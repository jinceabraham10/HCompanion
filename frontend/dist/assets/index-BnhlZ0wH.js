var ane=Object.defineProperty;var sne=(e,t,r)=>t in e?ane(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var cne=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ag=(e,t,r)=>sne(e,typeof t!="symbol"?t+"":t,r);var q7e=cne((Ia,xa)=>{function lne(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ia(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function z7(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var G7={exports:{}},gS={},W7={exports:{}},or={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0=Symbol.for("react.element"),une=Symbol.for("react.portal"),dne=Symbol.for("react.fragment"),hne=Symbol.for("react.strict_mode"),fne=Symbol.for("react.profiler"),pne=Symbol.for("react.provider"),mne=Symbol.for("react.context"),gne=Symbol.for("react.forward_ref"),yne=Symbol.for("react.suspense"),vne=Symbol.for("react.memo"),Ene=Symbol.for("react.lazy"),lM=Symbol.iterator;function _ne(e){return e===null||typeof e!="object"?null:(e=lM&&e[lM]||e["@@iterator"],typeof e=="function"?e:null)}var K7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q7=Object.assign,Y7={};function pm(e,t,r){this.props=e,this.context=t,this.refs=Y7,this.updater=r||K7}pm.prototype.isReactComponent={};pm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};pm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function X7(){}X7.prototype=pm.prototype;function Mk(e,t,r){this.props=e,this.context=t,this.refs=Y7,this.updater=r||K7}var jk=Mk.prototype=new X7;jk.constructor=Mk;q7(jk,pm.prototype);jk.isPureReactComponent=!0;var uM=Array.isArray,J7=Object.prototype.hasOwnProperty,Uk={current:null},Q7={key:!0,ref:!0,__self:!0,__source:!0};function Z7(e,t,r){var n,i={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)J7.call(t,n)&&!Q7.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:K0,type:e,key:o,ref:a,props:i,_owner:Uk.current}}function bne(e,t){return{$$typeof:K0,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fk(e){return typeof e=="object"&&e!==null&&e.$$typeof===K0}function wne(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var dM=/\/+/g;function NC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wne(""+e.key):t.toString(36)}function x_(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case K0:case une:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+NC(a,0):n,uM(i)?(r="",e!=null&&(r=e.replace(dM,"$&/")+"/"),x_(i,t,r,"",function(l){return l})):i!=null&&(Fk(i)&&(i=bne(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(dM,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",uM(e))for(var s=0;s<e.length;s++){o=e[s];var c=n+NC(o,s);a+=x_(o,t,r,c,i)}else if(c=_ne(e),typeof c=="function")for(e=c.call(e),s=0;!(o=e.next()).done;)o=o.value,c=n+NC(o,s++),a+=x_(o,t,r,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Jv(e,t,r){if(e==null)return e;var n=[],i=0;return x_(e,n,"","",function(o){return t.call(r,o,i++)}),n}function Sne(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var No={current:null},A_={transition:null},Tne={ReactCurrentDispatcher:No,ReactCurrentBatchConfig:A_,ReactCurrentOwner:Uk};function ez(){throw Error("act(...) is not supported in production builds of React.")}or.Children={map:Jv,forEach:function(e,t,r){Jv(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Jv(e,function(){t++}),t},toArray:function(e){return Jv(e,function(t){return t})||[]},only:function(e){if(!Fk(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};or.Component=pm;or.Fragment=dne;or.Profiler=fne;or.PureComponent=Mk;or.StrictMode=hne;or.Suspense=yne;or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tne;or.act=ez;or.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=q7({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Uk.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)J7.call(t,c)&&!Q7.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];n.children=s}return{$$typeof:K0,type:e.type,key:i,ref:o,props:n,_owner:a}};or.createContext=function(e){return e={$$typeof:mne,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pne,_context:e},e.Consumer=e};or.createElement=Z7;or.createFactory=function(e){var t=Z7.bind(null,e);return t.type=e,t};or.createRef=function(){return{current:null}};or.forwardRef=function(e){return{$$typeof:gne,render:e}};or.isValidElement=Fk;or.lazy=function(e){return{$$typeof:Ene,_payload:{_status:-1,_result:e},_init:Sne}};or.memo=function(e,t){return{$$typeof:vne,type:e,compare:t===void 0?null:t}};or.startTransition=function(e){var t=A_.transition;A_.transition={};try{e()}finally{A_.transition=t}};or.unstable_act=ez;or.useCallback=function(e,t){return No.current.useCallback(e,t)};or.useContext=function(e){return No.current.useContext(e)};or.useDebugValue=function(){};or.useDeferredValue=function(e){return No.current.useDeferredValue(e)};or.useEffect=function(e,t){return No.current.useEffect(e,t)};or.useId=function(){return No.current.useId()};or.useImperativeHandle=function(e,t,r){return No.current.useImperativeHandle(e,t,r)};or.useInsertionEffect=function(e,t){return No.current.useInsertionEffect(e,t)};or.useLayoutEffect=function(e,t){return No.current.useLayoutEffect(e,t)};or.useMemo=function(e,t){return No.current.useMemo(e,t)};or.useReducer=function(e,t,r){return No.current.useReducer(e,t,r)};or.useRef=function(e){return No.current.useRef(e)};or.useState=function(e){return No.current.useState(e)};or.useSyncExternalStore=function(e,t,r){return No.current.useSyncExternalStore(e,t,r)};or.useTransition=function(){return No.current.useTransition()};or.version="18.3.1";W7.exports=or;var C=W7.exports;const Or=ia(C),tz=lne({__proto__:null,default:Or},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cne=C,Rne=Symbol.for("react.element"),Ine=Symbol.for("react.fragment"),xne=Object.prototype.hasOwnProperty,Ane=Cne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Nne={key:!0,ref:!0,__self:!0,__source:!0};function rz(e,t,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)xne.call(t,n)&&!Nne.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Rne,type:e,key:o,ref:a,props:i,_owner:Ane.current}}gS.Fragment=Ine;gS.jsx=rz;gS.jsxs=rz;G7.exports=gS;var h=G7.exports,nz={exports:{}},Ma={},iz={exports:{}},oz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,B){var R=P.length;P.push(B);e:for(;0<R;){var _=R-1>>>1,x=P[_];if(0<i(x,B))P[_]=B,P[R]=x,R=_;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var B=P[0],R=P.pop();if(R!==B){P[0]=R;e:for(var _=0,x=P.length,T=x>>>1;_<T;){var W=2*(_+1)-1,U=P[W],X=W+1,ae=P[X];if(0>i(U,R))X<x&&0>i(ae,U)?(P[_]=ae,P[X]=R,_=X):(P[_]=U,P[W]=R,_=W);else if(X<x&&0>i(ae,R))P[_]=ae,P[X]=R,_=X;else break e}}return B}function i(P,B){var R=P.sortIndex-B.sortIndex;return R!==0?R:P.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(P){for(var B=r(l);B!==null;){if(B.callback===null)n(l);else if(B.startTime<=P)n(l),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(l)}}function S(P){if(g=!1,b(P),!m)if(r(c)!==null)m=!0,K(A);else{var B=r(l);B!==null&&k(S,B.startTime-P)}}function A(P,B){m=!1,g&&(g=!1,v(M),M=-1),p=!0;var R=f;try{for(b(B),d=r(c);d!==null&&(!(d.expirationTime>B)||P&&!G());){var _=d.callback;if(typeof _=="function"){d.callback=null,f=d.priorityLevel;var x=_(d.expirationTime<=B);B=e.unstable_now(),typeof x=="function"?d.callback=x:d===r(c)&&n(c),b(B)}else n(c);d=r(c)}if(d!==null)var T=!0;else{var W=r(l);W!==null&&k(S,W.startTime-B),T=!1}return T}finally{d=null,f=R,p=!1}}var N=!1,D=null,M=-1,H=5,V=-1;function G(){return!(e.unstable_now()-V<H)}function Y(){if(D!==null){var P=e.unstable_now();V=P;var B=!0;try{B=D(!0,P)}finally{B?Z():(N=!1,D=null)}}else N=!1}var Z;if(typeof E=="function")Z=function(){E(Y)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=Y,Z=function(){F.postMessage(null)}}else Z=function(){y(Y,0)};function K(P){D=P,N||(N=!0,Z())}function k(P,B){M=y(function(){P(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,K(A))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var R=f;f=B;try{return P()}finally{f=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var R=f;f=P;try{return B()}finally{f=R}},e.unstable_scheduleCallback=function(P,B,R){var _=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?_+R:_):R=_,P){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=R+x,P={id:u++,callback:B,priorityLevel:P,startTime:R,expirationTime:x,sortIndex:-1},R>_?(P.sortIndex=R,t(l,P),r(c)===null&&P===r(l)&&(g?(v(M),M=-1):g=!0,k(S,R-_))):(P.sortIndex=x,t(c,P),m||p||(m=!0,K(A))),P},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(P){var B=f;return function(){var R=f;f=B;try{return P.apply(this,arguments)}finally{f=R}}}})(oz);iz.exports=oz;var One=iz.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kne=C,Oa=One;function Ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var az=new Set,Vy={};function kh(e,t){Mp(e,t),Mp(e+"Capture",t)}function Mp(e,t){for(Vy[e]=t,e=0;e<t.length;e++)az.add(t[e])}var Tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),CA=Object.prototype.hasOwnProperty,Pne=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hM={},fM={};function Dne(e){return CA.call(fM,e)?!0:CA.call(hM,e)?!1:Pne.test(e)?fM[e]=!0:(hM[e]=!0,!1)}function Lne(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Mne(e,t,r,n){if(t===null||typeof t>"u"||Lne(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Oo(e,t,r,n,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Qi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qi[e]=new Oo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qi[t]=new Oo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qi[e]=new Oo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qi[e]=new Oo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qi[e]=new Oo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qi[e]=new Oo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qi[e]=new Oo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qi[e]=new Oo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qi[e]=new Oo(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vk=/[\-:]([a-z])/g;function Bk(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vk,Bk);Qi[t]=new Oo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vk,Bk);Qi[t]=new Oo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vk,Bk);Qi[t]=new Oo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qi[e]=new Oo(e,1,!1,e.toLowerCase(),null,!1,!1)});Qi.xlinkHref=new Oo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qi[e]=new Oo(e,1,!1,e.toLowerCase(),null,!0,!0)});function $k(e,t,r,n){var i=Qi.hasOwnProperty(t)?Qi[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Mne(t,r,i,n)&&(r=null),n||i===null?Dne(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Dl=kne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qv=Symbol.for("react.element"),Ff=Symbol.for("react.portal"),Vf=Symbol.for("react.fragment"),Hk=Symbol.for("react.strict_mode"),RA=Symbol.for("react.profiler"),sz=Symbol.for("react.provider"),cz=Symbol.for("react.context"),zk=Symbol.for("react.forward_ref"),IA=Symbol.for("react.suspense"),xA=Symbol.for("react.suspense_list"),Gk=Symbol.for("react.memo"),au=Symbol.for("react.lazy"),lz=Symbol.for("react.offscreen"),pM=Symbol.iterator;function sg(e){return e===null||typeof e!="object"?null:(e=pM&&e[pM]||e["@@iterator"],typeof e=="function"?e:null)}var Mn=Object.assign,OC;function Fg(e){if(OC===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);OC=t&&t[1]||""}return`
`+OC+e}var kC=!1;function PC(e,t){if(!e||kC)return"";kC=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var n=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){n=l}e.call(t.prototype)}else{try{throw Error()}catch(l){n=l}e()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=s);break}}}finally{kC=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Fg(e):""}function jne(e){switch(e.tag){case 5:return Fg(e.type);case 16:return Fg("Lazy");case 13:return Fg("Suspense");case 19:return Fg("SuspenseList");case 0:case 2:case 15:return e=PC(e.type,!1),e;case 11:return e=PC(e.type.render,!1),e;case 1:return e=PC(e.type,!0),e;default:return""}}function AA(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vf:return"Fragment";case Ff:return"Portal";case RA:return"Profiler";case Hk:return"StrictMode";case IA:return"Suspense";case xA:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cz:return(e.displayName||"Context")+".Consumer";case sz:return(e._context.displayName||"Context")+".Provider";case zk:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gk:return t=e.displayName||null,t!==null?t:AA(e.type)||"Memo";case au:t=e._payload,e=e._init;try{return AA(e(t))}catch{}}return null}function Une(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return AA(t);case 8:return t===Hk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uz(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fne(e){var t=uz(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zv(e){e._valueTracker||(e._valueTracker=Fne(e))}function dz(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=uz(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Cb(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function NA(e,t){var r=t.checked;return Mn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function mM(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Gu(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hz(e,t){t=t.checked,t!=null&&$k(e,"checked",t,!1)}function OA(e,t){hz(e,t);var r=Gu(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?kA(e,t.type,r):t.hasOwnProperty("defaultValue")&&kA(e,t.type,Gu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gM(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function kA(e,t,r){(t!=="number"||Cb(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Vg=Array.isArray;function pp(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Gu(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function PA(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return Mn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yM(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ne(92));if(Vg(r)){if(1<r.length)throw Error(Ne(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Gu(r)}}function fz(e,t){var r=Gu(t.value),n=Gu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function vM(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function pz(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function DA(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?pz(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var eE,mz=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(eE=eE||document.createElement("div"),eE.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=eE.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function By(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var oy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vne=["Webkit","ms","Moz","O"];Object.keys(oy).forEach(function(e){Vne.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),oy[t]=oy[e]})});function gz(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||oy.hasOwnProperty(e)&&oy[e]?(""+t).trim():t+"px"}function yz(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=gz(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Bne=Mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function LA(e,t){if(t){if(Bne[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ne(62))}}function MA(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jA=null;function Wk(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var UA=null,mp=null,gp=null;function EM(e){if(e=X0(e)){if(typeof UA!="function")throw Error(Ne(280));var t=e.stateNode;t&&(t=bS(t),UA(e.stateNode,e.type,t))}}function vz(e){mp?gp?gp.push(e):gp=[e]:mp=e}function Ez(){if(mp){var e=mp,t=gp;if(gp=mp=null,EM(e),t)for(e=0;e<t.length;e++)EM(t[e])}}function _z(e,t){return e(t)}function bz(){}var DC=!1;function wz(e,t,r){if(DC)return e(t,r);DC=!0;try{return _z(e,t,r)}finally{DC=!1,(mp!==null||gp!==null)&&(bz(),Ez())}}function $y(e,t){var r=e.stateNode;if(r===null)return null;var n=bS(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ne(231,t,typeof r));return r}var FA=!1;if(Tl)try{var cg={};Object.defineProperty(cg,"passive",{get:function(){FA=!0}}),window.addEventListener("test",cg,cg),window.removeEventListener("test",cg,cg)}catch{FA=!1}function $ne(e,t,r,n,i,o,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(r,l)}catch(u){this.onError(u)}}var ay=!1,Rb=null,Ib=!1,VA=null,Hne={onError:function(e){ay=!0,Rb=e}};function zne(e,t,r,n,i,o,a,s,c){ay=!1,Rb=null,$ne.apply(Hne,arguments)}function Gne(e,t,r,n,i,o,a,s,c){if(zne.apply(this,arguments),ay){if(ay){var l=Rb;ay=!1,Rb=null}else throw Error(Ne(198));Ib||(Ib=!0,VA=l)}}function Ph(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Sz(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _M(e){if(Ph(e)!==e)throw Error(Ne(188))}function Wne(e){var t=e.alternate;if(!t){if(t=Ph(e),t===null)throw Error(Ne(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return _M(i),e;if(o===n)return _M(i),t;o=o.sibling}throw Error(Ne(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(Ne(189))}}if(r.alternate!==n)throw Error(Ne(190))}if(r.tag!==3)throw Error(Ne(188));return r.stateNode.current===r?e:t}function Tz(e){return e=Wne(e),e!==null?Cz(e):null}function Cz(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Cz(e);if(t!==null)return t;e=e.sibling}return null}var Rz=Oa.unstable_scheduleCallback,bM=Oa.unstable_cancelCallback,Kne=Oa.unstable_shouldYield,qne=Oa.unstable_requestPaint,ri=Oa.unstable_now,Yne=Oa.unstable_getCurrentPriorityLevel,Kk=Oa.unstable_ImmediatePriority,Iz=Oa.unstable_UserBlockingPriority,xb=Oa.unstable_NormalPriority,Xne=Oa.unstable_LowPriority,xz=Oa.unstable_IdlePriority,yS=null,Ac=null;function Jne(e){if(Ac&&typeof Ac.onCommitFiberRoot=="function")try{Ac.onCommitFiberRoot(yS,e,void 0,(e.current.flags&128)===128)}catch{}}var Ks=Math.clz32?Math.clz32:eie,Qne=Math.log,Zne=Math.LN2;function eie(e){return e>>>=0,e===0?32:31-(Qne(e)/Zne|0)|0}var tE=64,rE=4194304;function Bg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ab(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=Bg(s):(o&=a,o!==0&&(n=Bg(o)))}else a=r&~i,a!==0?n=Bg(a):o!==0&&(n=Bg(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ks(t),i=1<<r,n|=e[r],t&=~i;return n}function tie(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rie(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Ks(o),s=1<<a,c=i[a];c===-1?(!(s&r)||s&n)&&(i[a]=tie(s,t)):c<=t&&(e.expiredLanes|=s),o&=~s}}function BA(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Az(){var e=tE;return tE<<=1,!(tE&4194240)&&(tE=64),e}function LC(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function q0(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ks(t),e[t]=r}function nie(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Ks(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function qk(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ks(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Hr=0;function Nz(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Oz,Yk,kz,Pz,Dz,$A=!1,nE=[],Iu=null,xu=null,Au=null,Hy=new Map,zy=new Map,uu=[],iie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wM(e,t){switch(e){case"focusin":case"focusout":Iu=null;break;case"dragenter":case"dragleave":xu=null;break;case"mouseover":case"mouseout":Au=null;break;case"pointerover":case"pointerout":Hy.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zy.delete(t.pointerId)}}function lg(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=X0(t),t!==null&&Yk(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function oie(e,t,r,n,i){switch(t){case"focusin":return Iu=lg(Iu,e,t,r,n,i),!0;case"dragenter":return xu=lg(xu,e,t,r,n,i),!0;case"mouseover":return Au=lg(Au,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Hy.set(o,lg(Hy.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,zy.set(o,lg(zy.get(o)||null,e,t,r,n,i)),!0}return!1}function Lz(e){var t=Bd(e.target);if(t!==null){var r=Ph(t);if(r!==null){if(t=r.tag,t===13){if(t=Sz(r),t!==null){e.blockedOn=t,Dz(e.priority,function(){kz(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function N_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=HA(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);jA=n,r.target.dispatchEvent(n),jA=null}else return t=X0(r),t!==null&&Yk(t),e.blockedOn=r,!1;t.shift()}return!0}function SM(e,t,r){N_(e)&&r.delete(t)}function aie(){$A=!1,Iu!==null&&N_(Iu)&&(Iu=null),xu!==null&&N_(xu)&&(xu=null),Au!==null&&N_(Au)&&(Au=null),Hy.forEach(SM),zy.forEach(SM)}function ug(e,t){e.blockedOn===t&&(e.blockedOn=null,$A||($A=!0,Oa.unstable_scheduleCallback(Oa.unstable_NormalPriority,aie)))}function Gy(e){function t(i){return ug(i,e)}if(0<nE.length){ug(nE[0],e);for(var r=1;r<nE.length;r++){var n=nE[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Iu!==null&&ug(Iu,e),xu!==null&&ug(xu,e),Au!==null&&ug(Au,e),Hy.forEach(t),zy.forEach(t),r=0;r<uu.length;r++)n=uu[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<uu.length&&(r=uu[0],r.blockedOn===null);)Lz(r),r.blockedOn===null&&uu.shift()}var yp=Dl.ReactCurrentBatchConfig,Nb=!0;function sie(e,t,r,n){var i=Hr,o=yp.transition;yp.transition=null;try{Hr=1,Xk(e,t,r,n)}finally{Hr=i,yp.transition=o}}function cie(e,t,r,n){var i=Hr,o=yp.transition;yp.transition=null;try{Hr=4,Xk(e,t,r,n)}finally{Hr=i,yp.transition=o}}function Xk(e,t,r,n){if(Nb){var i=HA(e,t,r,n);if(i===null)GC(e,t,n,Ob,r),wM(e,n);else if(oie(i,e,t,r,n))n.stopPropagation();else if(wM(e,n),t&4&&-1<iie.indexOf(e)){for(;i!==null;){var o=X0(i);if(o!==null&&Oz(o),o=HA(e,t,r,n),o===null&&GC(e,t,n,Ob,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else GC(e,t,n,null,r)}}var Ob=null;function HA(e,t,r,n){if(Ob=null,e=Wk(n),e=Bd(e),e!==null)if(t=Ph(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Sz(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ob=e,null}function Mz(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yne()){case Kk:return 1;case Iz:return 4;case xb:case Xne:return 16;case xz:return 536870912;default:return 16}default:return 16}}var gu=null,Jk=null,O_=null;function jz(){if(O_)return O_;var e,t=Jk,r=t.length,n,i="value"in gu?gu.value:gu.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[o-n];n++);return O_=i.slice(e,1<n?1-n:void 0)}function k_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function iE(){return!0}function TM(){return!1}function ja(e){function t(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?iE:TM,this.isPropagationStopped=TM,this}return Mn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=iE)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=iE)},persist:function(){},isPersistent:iE}),t}var mm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qk=ja(mm),Y0=Mn({},mm,{view:0,detail:0}),lie=ja(Y0),MC,jC,dg,vS=Mn({},Y0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zk,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dg&&(dg&&e.type==="mousemove"?(MC=e.screenX-dg.screenX,jC=e.screenY-dg.screenY):jC=MC=0,dg=e),MC)},movementY:function(e){return"movementY"in e?e.movementY:jC}}),CM=ja(vS),uie=Mn({},vS,{dataTransfer:0}),die=ja(uie),hie=Mn({},Y0,{relatedTarget:0}),UC=ja(hie),fie=Mn({},mm,{animationName:0,elapsedTime:0,pseudoElement:0}),pie=ja(fie),mie=Mn({},mm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gie=ja(mie),yie=Mn({},mm,{data:0}),RM=ja(yie),vie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_ie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bie(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_ie[e])?!!t[e]:!1}function Zk(){return bie}var wie=Mn({},Y0,{key:function(e){if(e.key){var t=vie[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=k_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Eie[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zk,charCode:function(e){return e.type==="keypress"?k_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?k_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Sie=ja(wie),Tie=Mn({},vS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IM=ja(Tie),Cie=Mn({},Y0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zk}),Rie=ja(Cie),Iie=Mn({},mm,{propertyName:0,elapsedTime:0,pseudoElement:0}),xie=ja(Iie),Aie=Mn({},vS,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nie=ja(Aie),Oie=[9,13,27,32],eP=Tl&&"CompositionEvent"in window,sy=null;Tl&&"documentMode"in document&&(sy=document.documentMode);var kie=Tl&&"TextEvent"in window&&!sy,Uz=Tl&&(!eP||sy&&8<sy&&11>=sy),xM=" ",AM=!1;function Fz(e,t){switch(e){case"keyup":return Oie.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vz(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bf=!1;function Pie(e,t){switch(e){case"compositionend":return Vz(t);case"keypress":return t.which!==32?null:(AM=!0,xM);case"textInput":return e=t.data,e===xM&&AM?null:e;default:return null}}function Die(e,t){if(Bf)return e==="compositionend"||!eP&&Fz(e,t)?(e=jz(),O_=Jk=gu=null,Bf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Uz&&t.locale!=="ko"?null:t.data;default:return null}}var Lie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lie[e.type]:t==="textarea"}function Bz(e,t,r,n){vz(n),t=kb(t,"onChange"),0<t.length&&(r=new Qk("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var cy=null,Wy=null;function Mie(e){Qz(e,0)}function ES(e){var t=zf(e);if(dz(t))return e}function jie(e,t){if(e==="change")return t}var $z=!1;if(Tl){var FC;if(Tl){var VC="oninput"in document;if(!VC){var OM=document.createElement("div");OM.setAttribute("oninput","return;"),VC=typeof OM.oninput=="function"}FC=VC}else FC=!1;$z=FC&&(!document.documentMode||9<document.documentMode)}function kM(){cy&&(cy.detachEvent("onpropertychange",Hz),Wy=cy=null)}function Hz(e){if(e.propertyName==="value"&&ES(Wy)){var t=[];Bz(t,Wy,e,Wk(e)),wz(Mie,t)}}function Uie(e,t,r){e==="focusin"?(kM(),cy=t,Wy=r,cy.attachEvent("onpropertychange",Hz)):e==="focusout"&&kM()}function Fie(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ES(Wy)}function Vie(e,t){if(e==="click")return ES(t)}function Bie(e,t){if(e==="input"||e==="change")return ES(t)}function $ie(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xs=typeof Object.is=="function"?Object.is:$ie;function Ky(e,t){if(Xs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!CA.call(t,i)||!Xs(e[i],t[i]))return!1}return!0}function PM(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function DM(e,t){var r=PM(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=PM(r)}}function zz(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zz(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gz(){for(var e=window,t=Cb();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Cb(e.document)}return t}function tP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Hie(e){var t=Gz(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&zz(r.ownerDocument.documentElement,r)){if(n!==null&&tP(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=DM(r,o);var a=DM(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zie=Tl&&"documentMode"in document&&11>=document.documentMode,$f=null,zA=null,ly=null,GA=!1;function LM(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;GA||$f==null||$f!==Cb(n)||(n=$f,"selectionStart"in n&&tP(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ly&&Ky(ly,n)||(ly=n,n=kb(zA,"onSelect"),0<n.length&&(t=new Qk("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=$f)))}function oE(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Hf={animationend:oE("Animation","AnimationEnd"),animationiteration:oE("Animation","AnimationIteration"),animationstart:oE("Animation","AnimationStart"),transitionend:oE("Transition","TransitionEnd")},BC={},Wz={};Tl&&(Wz=document.createElement("div").style,"AnimationEvent"in window||(delete Hf.animationend.animation,delete Hf.animationiteration.animation,delete Hf.animationstart.animation),"TransitionEvent"in window||delete Hf.transitionend.transition);function _S(e){if(BC[e])return BC[e];if(!Hf[e])return e;var t=Hf[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Wz)return BC[e]=t[r];return e}var Kz=_S("animationend"),qz=_S("animationiteration"),Yz=_S("animationstart"),Xz=_S("transitionend"),Jz=new Map,MM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ed(e,t){Jz.set(e,t),kh(t,[e])}for(var $C=0;$C<MM.length;$C++){var HC=MM[$C],Gie=HC.toLowerCase(),Wie=HC[0].toUpperCase()+HC.slice(1);ed(Gie,"on"+Wie)}ed(Kz,"onAnimationEnd");ed(qz,"onAnimationIteration");ed(Yz,"onAnimationStart");ed("dblclick","onDoubleClick");ed("focusin","onFocus");ed("focusout","onBlur");ed(Xz,"onTransitionEnd");Mp("onMouseEnter",["mouseout","mouseover"]);Mp("onMouseLeave",["mouseout","mouseover"]);Mp("onPointerEnter",["pointerout","pointerover"]);Mp("onPointerLeave",["pointerout","pointerover"]);kh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kh("onBeforeInput",["compositionend","keypress","textInput","paste"]);kh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $g="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kie=new Set("cancel close invalid load scroll toggle".split(" ").concat($g));function jM(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Gne(n,t,void 0,e),e.currentTarget=null}function Qz(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;jM(i,s,l),o=c}else for(a=0;a<n.length;a++){if(s=n[a],c=s.instance,l=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;jM(i,s,l),o=c}}}if(Ib)throw e=VA,Ib=!1,VA=null,e}function un(e,t){var r=t[XA];r===void 0&&(r=t[XA]=new Set);var n=e+"__bubble";r.has(n)||(Zz(t,e,2,!1),r.add(n))}function zC(e,t,r){var n=0;t&&(n|=4),Zz(r,e,n,t)}var aE="_reactListening"+Math.random().toString(36).slice(2);function qy(e){if(!e[aE]){e[aE]=!0,az.forEach(function(r){r!=="selectionchange"&&(Kie.has(r)||zC(r,!1,e),zC(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[aE]||(t[aE]=!0,zC("selectionchange",!1,t))}}function Zz(e,t,r,n){switch(Mz(t)){case 1:var i=sie;break;case 4:i=cie;break;default:i=Xk}r=i.bind(null,t,r,e),i=void 0,!FA||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function GC(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Bd(s),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}s=s.parentNode}}n=n.return}wz(function(){var l=o,u=Wk(r),d=[];e:{var f=Jz.get(e);if(f!==void 0){var p=Qk,m=e;switch(e){case"keypress":if(k_(r)===0)break e;case"keydown":case"keyup":p=Sie;break;case"focusin":m="focus",p=UC;break;case"focusout":m="blur",p=UC;break;case"beforeblur":case"afterblur":p=UC;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=CM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=die;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Rie;break;case Kz:case qz:case Yz:p=pie;break;case Xz:p=xie;break;case"scroll":p=lie;break;case"wheel":p=Nie;break;case"copy":case"cut":case"paste":p=gie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=IM}var g=(t&4)!==0,y=!g&&e==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var E=l,b;E!==null;){b=E;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=$y(E,v),S!=null&&g.push(Yy(E,S,b)))),y)break;E=E.return}0<g.length&&(f=new p(f,m,null,r,u),d.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==jA&&(m=r.relatedTarget||r.fromElement)&&(Bd(m)||m[Cl]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=l,m=m?Bd(m):null,m!==null&&(y=Ph(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=l),p!==m)){if(g=CM,S="onMouseLeave",v="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(g=IM,S="onPointerLeave",v="onPointerEnter",E="pointer"),y=p==null?f:zf(p),b=m==null?f:zf(m),f=new g(S,E+"leave",p,r,u),f.target=y,f.relatedTarget=b,S=null,Bd(u)===l&&(g=new g(v,E+"enter",m,r,u),g.target=b,g.relatedTarget=y,S=g),y=S,p&&m)t:{for(g=p,v=m,E=0,b=g;b;b=df(b))E++;for(b=0,S=v;S;S=df(S))b++;for(;0<E-b;)g=df(g),E--;for(;0<b-E;)v=df(v),b--;for(;E--;){if(g===v||v!==null&&g===v.alternate)break t;g=df(g),v=df(v)}g=null}else g=null;p!==null&&UM(d,f,p,g,!1),m!==null&&y!==null&&UM(d,y,m,g,!0)}}e:{if(f=l?zf(l):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var A=jie;else if(NM(f))if($z)A=Bie;else{A=Fie;var N=Uie}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=Vie);if(A&&(A=A(e,l))){Bz(d,A,r,u);break e}N&&N(e,f,l),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&kA(f,"number",f.value)}switch(N=l?zf(l):window,e){case"focusin":(NM(N)||N.contentEditable==="true")&&($f=N,zA=l,ly=null);break;case"focusout":ly=zA=$f=null;break;case"mousedown":GA=!0;break;case"contextmenu":case"mouseup":case"dragend":GA=!1,LM(d,r,u);break;case"selectionchange":if(zie)break;case"keydown":case"keyup":LM(d,r,u)}var D;if(eP)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Bf?Fz(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(Uz&&r.locale!=="ko"&&(Bf||M!=="onCompositionStart"?M==="onCompositionEnd"&&Bf&&(D=jz()):(gu=u,Jk="value"in gu?gu.value:gu.textContent,Bf=!0)),N=kb(l,M),0<N.length&&(M=new RM(M,e,null,r,u),d.push({event:M,listeners:N}),D?M.data=D:(D=Vz(r),D!==null&&(M.data=D)))),(D=kie?Pie(e,r):Die(e,r))&&(l=kb(l,"onBeforeInput"),0<l.length&&(u=new RM("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:l}),u.data=D))}Qz(d,t)})}function Yy(e,t,r){return{instance:e,listener:t,currentTarget:r}}function kb(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=$y(e,r),o!=null&&n.unshift(Yy(e,o,i)),o=$y(e,t),o!=null&&n.push(Yy(e,o,i))),e=e.return}return n}function df(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function UM(e,t,r,n,i){for(var o=t._reactName,a=[];r!==null&&r!==n;){var s=r,c=s.alternate,l=s.stateNode;if(c!==null&&c===n)break;s.tag===5&&l!==null&&(s=l,i?(c=$y(r,o),c!=null&&a.unshift(Yy(r,c,s))):i||(c=$y(r,o),c!=null&&a.push(Yy(r,c,s)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var qie=/\r\n?/g,Yie=/\u0000|\uFFFD/g;function FM(e){return(typeof e=="string"?e:""+e).replace(qie,`
`).replace(Yie,"")}function sE(e,t,r){if(t=FM(t),FM(e)!==t&&r)throw Error(Ne(425))}function Pb(){}var WA=null,KA=null;function qA(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var YA=typeof setTimeout=="function"?setTimeout:void 0,Xie=typeof clearTimeout=="function"?clearTimeout:void 0,VM=typeof Promise=="function"?Promise:void 0,Jie=typeof queueMicrotask=="function"?queueMicrotask:typeof VM<"u"?function(e){return VM.resolve(null).then(e).catch(Qie)}:YA;function Qie(e){setTimeout(function(){throw e})}function WC(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Gy(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Gy(t)}function Nu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function BM(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var gm=Math.random().toString(36).slice(2),bc="__reactFiber$"+gm,Xy="__reactProps$"+gm,Cl="__reactContainer$"+gm,XA="__reactEvents$"+gm,Zie="__reactListeners$"+gm,eoe="__reactHandles$"+gm;function Bd(e){var t=e[bc];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Cl]||r[bc]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=BM(e);e!==null;){if(r=e[bc])return r;e=BM(e)}return t}e=r,r=e.parentNode}return null}function X0(e){return e=e[bc]||e[Cl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ne(33))}function bS(e){return e[Xy]||null}var JA=[],Gf=-1;function td(e){return{current:e}}function gn(e){0>Gf||(e.current=JA[Gf],JA[Gf]=null,Gf--)}function an(e,t){Gf++,JA[Gf]=e.current,e.current=t}var Wu={},po=td(Wu),Yo=td(!1),fh=Wu;function jp(e,t){var r=e.type.contextTypes;if(!r)return Wu;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Xo(e){return e=e.childContextTypes,e!=null}function Db(){gn(Yo),gn(po)}function $M(e,t,r){if(po.current!==Wu)throw Error(Ne(168));an(po,t),an(Yo,r)}function eG(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Ne(108,Une(e)||"Unknown",i));return Mn({},r,n)}function Lb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wu,fh=po.current,an(po,e),an(Yo,Yo.current),!0}function HM(e,t,r){var n=e.stateNode;if(!n)throw Error(Ne(169));r?(e=eG(e,t,fh),n.__reactInternalMemoizedMergedChildContext=e,gn(Yo),gn(po),an(po,e)):gn(Yo),an(Yo,r)}var cl=null,wS=!1,KC=!1;function tG(e){cl===null?cl=[e]:cl.push(e)}function toe(e){wS=!0,tG(e)}function rd(){if(!KC&&cl!==null){KC=!0;var e=0,t=Hr;try{var r=cl;for(Hr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}cl=null,wS=!1}catch(i){throw cl!==null&&(cl=cl.slice(e+1)),Rz(Kk,rd),i}finally{Hr=t,KC=!1}}return null}var Wf=[],Kf=0,Mb=null,jb=0,ss=[],cs=0,ph=null,pl=1,ml="";function Cd(e,t){Wf[Kf++]=jb,Wf[Kf++]=Mb,Mb=e,jb=t}function rG(e,t,r){ss[cs++]=pl,ss[cs++]=ml,ss[cs++]=ph,ph=e;var n=pl;e=ml;var i=32-Ks(n)-1;n&=~(1<<i),r+=1;var o=32-Ks(t)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,pl=1<<32-Ks(t)+i|r<<i|n,ml=o+e}else pl=1<<o|r<<i|n,ml=e}function rP(e){e.return!==null&&(Cd(e,1),rG(e,1,0))}function nP(e){for(;e===Mb;)Mb=Wf[--Kf],Wf[Kf]=null,jb=Wf[--Kf],Wf[Kf]=null;for(;e===ph;)ph=ss[--cs],ss[cs]=null,ml=ss[--cs],ss[cs]=null,pl=ss[--cs],ss[cs]=null}var Aa=null,wa=null,wn=!1,$s=null;function nG(e,t){var r=fs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function zM(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Aa=e,wa=Nu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Aa=e,wa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ph!==null?{id:pl,overflow:ml}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=fs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Aa=e,wa=null,!0):!1;default:return!1}}function QA(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ZA(e){if(wn){var t=wa;if(t){var r=t;if(!zM(e,t)){if(QA(e))throw Error(Ne(418));t=Nu(r.nextSibling);var n=Aa;t&&zM(e,t)?nG(n,r):(e.flags=e.flags&-4097|2,wn=!1,Aa=e)}}else{if(QA(e))throw Error(Ne(418));e.flags=e.flags&-4097|2,wn=!1,Aa=e}}}function GM(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Aa=e}function cE(e){if(e!==Aa)return!1;if(!wn)return GM(e),wn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qA(e.type,e.memoizedProps)),t&&(t=wa)){if(QA(e))throw iG(),Error(Ne(418));for(;t;)nG(e,t),t=Nu(t.nextSibling)}if(GM(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){wa=Nu(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}wa=null}}else wa=Aa?Nu(e.stateNode.nextSibling):null;return!0}function iG(){for(var e=wa;e;)e=Nu(e.nextSibling)}function Up(){wa=Aa=null,wn=!1}function iP(e){$s===null?$s=[e]:$s.push(e)}var roe=Dl.ReactCurrentBatchConfig;function hg(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ne(309));var n=r.stateNode}if(!n)throw Error(Ne(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(Ne(284));if(!r._owner)throw Error(Ne(290,e))}return e}function lE(e,t){throw e=Object.prototype.toString.call(t),Error(Ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function WM(e){var t=e._init;return t(e._payload)}function oG(e){function t(v,E){if(e){var b=v.deletions;b===null?(v.deletions=[E],v.flags|=16):b.push(E)}}function r(v,E){if(!e)return null;for(;E!==null;)t(v,E),E=E.sibling;return null}function n(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function i(v,E){return v=Du(v,E),v.index=0,v.sibling=null,v}function o(v,E,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<E?(v.flags|=2,E):b):(v.flags|=2,E)):(v.flags|=1048576,E)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,E,b,S){return E===null||E.tag!==6?(E=eR(b,v.mode,S),E.return=v,E):(E=i(E,b),E.return=v,E)}function c(v,E,b,S){var A=b.type;return A===Vf?u(v,E,b.props.children,S,b.key):E!==null&&(E.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===au&&WM(A)===E.type)?(S=i(E,b.props),S.ref=hg(v,E,b),S.return=v,S):(S=F_(b.type,b.key,b.props,null,v.mode,S),S.ref=hg(v,E,b),S.return=v,S)}function l(v,E,b,S){return E===null||E.tag!==4||E.stateNode.containerInfo!==b.containerInfo||E.stateNode.implementation!==b.implementation?(E=tR(b,v.mode,S),E.return=v,E):(E=i(E,b.children||[]),E.return=v,E)}function u(v,E,b,S,A){return E===null||E.tag!==7?(E=th(b,v.mode,S,A),E.return=v,E):(E=i(E,b),E.return=v,E)}function d(v,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return E=eR(""+E,v.mode,b),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Qv:return b=F_(E.type,E.key,E.props,null,v.mode,b),b.ref=hg(v,null,E),b.return=v,b;case Ff:return E=tR(E,v.mode,b),E.return=v,E;case au:var S=E._init;return d(v,S(E._payload),b)}if(Vg(E)||sg(E))return E=th(E,v.mode,b,null),E.return=v,E;lE(v,E)}return null}function f(v,E,b,S){var A=E!==null?E.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return A!==null?null:s(v,E,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Qv:return b.key===A?c(v,E,b,S):null;case Ff:return b.key===A?l(v,E,b,S):null;case au:return A=b._init,f(v,E,A(b._payload),S)}if(Vg(b)||sg(b))return A!==null?null:u(v,E,b,S,null);lE(v,b)}return null}function p(v,E,b,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,s(E,v,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Qv:return v=v.get(S.key===null?b:S.key)||null,c(E,v,S,A);case Ff:return v=v.get(S.key===null?b:S.key)||null,l(E,v,S,A);case au:var N=S._init;return p(v,E,b,N(S._payload),A)}if(Vg(S)||sg(S))return v=v.get(b)||null,u(E,v,S,A,null);lE(E,S)}return null}function m(v,E,b,S){for(var A=null,N=null,D=E,M=E=0,H=null;D!==null&&M<b.length;M++){D.index>M?(H=D,D=null):H=D.sibling;var V=f(v,D,b[M],S);if(V===null){D===null&&(D=H);break}e&&D&&V.alternate===null&&t(v,D),E=o(V,E,M),N===null?A=V:N.sibling=V,N=V,D=H}if(M===b.length)return r(v,D),wn&&Cd(v,M),A;if(D===null){for(;M<b.length;M++)D=d(v,b[M],S),D!==null&&(E=o(D,E,M),N===null?A=D:N.sibling=D,N=D);return wn&&Cd(v,M),A}for(D=n(v,D);M<b.length;M++)H=p(D,v,M,b[M],S),H!==null&&(e&&H.alternate!==null&&D.delete(H.key===null?M:H.key),E=o(H,E,M),N===null?A=H:N.sibling=H,N=H);return e&&D.forEach(function(G){return t(v,G)}),wn&&Cd(v,M),A}function g(v,E,b,S){var A=sg(b);if(typeof A!="function")throw Error(Ne(150));if(b=A.call(b),b==null)throw Error(Ne(151));for(var N=A=null,D=E,M=E=0,H=null,V=b.next();D!==null&&!V.done;M++,V=b.next()){D.index>M?(H=D,D=null):H=D.sibling;var G=f(v,D,V.value,S);if(G===null){D===null&&(D=H);break}e&&D&&G.alternate===null&&t(v,D),E=o(G,E,M),N===null?A=G:N.sibling=G,N=G,D=H}if(V.done)return r(v,D),wn&&Cd(v,M),A;if(D===null){for(;!V.done;M++,V=b.next())V=d(v,V.value,S),V!==null&&(E=o(V,E,M),N===null?A=V:N.sibling=V,N=V);return wn&&Cd(v,M),A}for(D=n(v,D);!V.done;M++,V=b.next())V=p(D,v,M,V.value,S),V!==null&&(e&&V.alternate!==null&&D.delete(V.key===null?M:V.key),E=o(V,E,M),N===null?A=V:N.sibling=V,N=V);return e&&D.forEach(function(Y){return t(v,Y)}),wn&&Cd(v,M),A}function y(v,E,b,S){if(typeof b=="object"&&b!==null&&b.type===Vf&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Qv:e:{for(var A=b.key,N=E;N!==null;){if(N.key===A){if(A=b.type,A===Vf){if(N.tag===7){r(v,N.sibling),E=i(N,b.props.children),E.return=v,v=E;break e}}else if(N.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===au&&WM(A)===N.type){r(v,N.sibling),E=i(N,b.props),E.ref=hg(v,N,b),E.return=v,v=E;break e}r(v,N);break}else t(v,N);N=N.sibling}b.type===Vf?(E=th(b.props.children,v.mode,S,b.key),E.return=v,v=E):(S=F_(b.type,b.key,b.props,null,v.mode,S),S.ref=hg(v,E,b),S.return=v,v=S)}return a(v);case Ff:e:{for(N=b.key;E!==null;){if(E.key===N)if(E.tag===4&&E.stateNode.containerInfo===b.containerInfo&&E.stateNode.implementation===b.implementation){r(v,E.sibling),E=i(E,b.children||[]),E.return=v,v=E;break e}else{r(v,E);break}else t(v,E);E=E.sibling}E=tR(b,v.mode,S),E.return=v,v=E}return a(v);case au:return N=b._init,y(v,E,N(b._payload),S)}if(Vg(b))return m(v,E,b,S);if(sg(b))return g(v,E,b,S);lE(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,E!==null&&E.tag===6?(r(v,E.sibling),E=i(E,b),E.return=v,v=E):(r(v,E),E=eR(b,v.mode,S),E.return=v,v=E),a(v)):r(v,E)}return y}var Fp=oG(!0),aG=oG(!1),Ub=td(null),Fb=null,qf=null,oP=null;function aP(){oP=qf=Fb=null}function sP(e){var t=Ub.current;gn(Ub),e._currentValue=t}function eN(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function vp(e,t){Fb=e,oP=qf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ko=!0),e.firstContext=null)}function ys(e){var t=e._currentValue;if(oP!==e)if(e={context:e,memoizedValue:t,next:null},qf===null){if(Fb===null)throw Error(Ne(308));qf=e,Fb.dependencies={lanes:0,firstContext:e}}else qf=qf.next=e;return t}var $d=null;function cP(e){$d===null?$d=[e]:$d.push(e)}function sG(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,cP(t)):(r.next=i.next,i.next=r),t.interleaved=r,Rl(e,n)}function Rl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var su=!1;function lP(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cG(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ou(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Er&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Rl(e,r)}return i=n.interleaved,i===null?(t.next=t,cP(n)):(t.next=i.next,i.next=t),n.interleaved=t,Rl(e,r)}function P_(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,qk(e,r)}}function KM(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Vb(e,t,r,n){var i=e.updateQueue;su=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,a===null?o=l:a.next=l,a=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;a=0,u=l=c=null,s=o;do{var f=s.lane,p=s.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,g=s;switch(f=t,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Mn({},d,f);break e;case 2:su=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,a|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);gh|=a,e.lanes=a,e.memoizedState=d}}function qM(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Ne(191,i));i.call(n)}}}var J0={},Nc=td(J0),Jy=td(J0),Qy=td(J0);function Hd(e){if(e===J0)throw Error(Ne(174));return e}function uP(e,t){switch(an(Qy,t),an(Jy,e),an(Nc,J0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:DA(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=DA(t,e)}gn(Nc),an(Nc,t)}function Vp(){gn(Nc),gn(Jy),gn(Qy)}function lG(e){Hd(Qy.current);var t=Hd(Nc.current),r=DA(t,e.type);t!==r&&(an(Jy,e),an(Nc,r))}function dP(e){Jy.current===e&&(gn(Nc),gn(Jy))}var On=td(0);function Bb(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qC=[];function hP(){for(var e=0;e<qC.length;e++)qC[e]._workInProgressVersionPrimary=null;qC.length=0}var D_=Dl.ReactCurrentDispatcher,YC=Dl.ReactCurrentBatchConfig,mh=0,Dn=null,Ti=null,Di=null,$b=!1,uy=!1,Zy=0,noe=0;function no(){throw Error(Ne(321))}function fP(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xs(e[r],t[r]))return!1;return!0}function pP(e,t,r,n,i,o){if(mh=o,Dn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D_.current=e===null||e.memoizedState===null?soe:coe,e=r(n,i),uy){o=0;do{if(uy=!1,Zy=0,25<=o)throw Error(Ne(301));o+=1,Di=Ti=null,t.updateQueue=null,D_.current=loe,e=r(n,i)}while(uy)}if(D_.current=Hb,t=Ti!==null&&Ti.next!==null,mh=0,Di=Ti=Dn=null,$b=!1,t)throw Error(Ne(300));return e}function mP(){var e=Zy!==0;return Zy=0,e}function gc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Di===null?Dn.memoizedState=Di=e:Di=Di.next=e,Di}function vs(){if(Ti===null){var e=Dn.alternate;e=e!==null?e.memoizedState:null}else e=Ti.next;var t=Di===null?Dn.memoizedState:Di.next;if(t!==null)Di=t,Ti=e;else{if(e===null)throw Error(Ne(310));Ti=e,e={memoizedState:Ti.memoizedState,baseState:Ti.baseState,baseQueue:Ti.baseQueue,queue:Ti.queue,next:null},Di===null?Dn.memoizedState=Di=e:Di=Di.next=e}return Di}function e0(e,t){return typeof t=="function"?t(e):t}function XC(e){var t=vs(),r=t.queue;if(r===null)throw Error(Ne(311));r.lastRenderedReducer=e;var n=Ti,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,c=null,l=o;do{var u=l.lane;if((mh&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:e(n,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(s=c=d,a=n):c=c.next=d,Dn.lanes|=u,gh|=u}l=l.next}while(l!==null&&l!==o);c===null?a=n:c.next=s,Xs(n,t.memoizedState)||(Ko=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,Dn.lanes|=o,gh|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function JC(e){var t=vs(),r=t.queue;if(r===null)throw Error(Ne(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);Xs(o,t.memoizedState)||(Ko=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function uG(){}function dG(e,t){var r=Dn,n=vs(),i=t(),o=!Xs(n.memoizedState,i);if(o&&(n.memoizedState=i,Ko=!0),n=n.queue,gP(pG.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||Di!==null&&Di.memoizedState.tag&1){if(r.flags|=2048,t0(9,fG.bind(null,r,n,i,t),void 0,null),Vi===null)throw Error(Ne(349));mh&30||hG(r,t,i)}return i}function hG(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Dn.updateQueue,t===null?(t={lastEffect:null,stores:null},Dn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function fG(e,t,r,n){t.value=r,t.getSnapshot=n,mG(t)&&gG(e)}function pG(e,t,r){return r(function(){mG(t)&&gG(e)})}function mG(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xs(e,r)}catch{return!0}}function gG(e){var t=Rl(e,1);t!==null&&qs(t,e,1,-1)}function YM(e){var t=gc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e0,lastRenderedState:e},t.queue=e,e=e.dispatch=aoe.bind(null,Dn,e),[t.memoizedState,e]}function t0(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Dn.updateQueue,t===null?(t={lastEffect:null,stores:null},Dn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function yG(){return vs().memoizedState}function L_(e,t,r,n){var i=gc();Dn.flags|=e,i.memoizedState=t0(1|t,r,void 0,n===void 0?null:n)}function SS(e,t,r,n){var i=vs();n=n===void 0?null:n;var o=void 0;if(Ti!==null){var a=Ti.memoizedState;if(o=a.destroy,n!==null&&fP(n,a.deps)){i.memoizedState=t0(t,r,o,n);return}}Dn.flags|=e,i.memoizedState=t0(1|t,r,o,n)}function XM(e,t){return L_(8390656,8,e,t)}function gP(e,t){return SS(2048,8,e,t)}function vG(e,t){return SS(4,2,e,t)}function EG(e,t){return SS(4,4,e,t)}function _G(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bG(e,t,r){return r=r!=null?r.concat([e]):null,SS(4,4,_G.bind(null,t,e),r)}function yP(){}function wG(e,t){var r=vs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&fP(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function SG(e,t){var r=vs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&fP(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function TG(e,t,r){return mh&21?(Xs(r,t)||(r=Az(),Dn.lanes|=r,gh|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ko=!0),e.memoizedState=r)}function ioe(e,t){var r=Hr;Hr=r!==0&&4>r?r:4,e(!0);var n=YC.transition;YC.transition={};try{e(!1),t()}finally{Hr=r,YC.transition=n}}function CG(){return vs().memoizedState}function ooe(e,t,r){var n=Pu(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},RG(e))IG(t,r);else if(r=sG(e,t,r,n),r!==null){var i=xo();qs(r,e,n,i),xG(r,t,n)}}function aoe(e,t,r){var n=Pu(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(RG(e))IG(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,Xs(s,a)){var c=t.interleaved;c===null?(i.next=i,cP(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=sG(e,t,i,n),r!==null&&(i=xo(),qs(r,e,n,i),xG(r,t,n))}}function RG(e){var t=e.alternate;return e===Dn||t!==null&&t===Dn}function IG(e,t){uy=$b=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function xG(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,qk(e,r)}}var Hb={readContext:ys,useCallback:no,useContext:no,useEffect:no,useImperativeHandle:no,useInsertionEffect:no,useLayoutEffect:no,useMemo:no,useReducer:no,useRef:no,useState:no,useDebugValue:no,useDeferredValue:no,useTransition:no,useMutableSource:no,useSyncExternalStore:no,useId:no,unstable_isNewReconciler:!1},soe={readContext:ys,useCallback:function(e,t){return gc().memoizedState=[e,t===void 0?null:t],e},useContext:ys,useEffect:XM,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,L_(4194308,4,_G.bind(null,t,e),r)},useLayoutEffect:function(e,t){return L_(4194308,4,e,t)},useInsertionEffect:function(e,t){return L_(4,2,e,t)},useMemo:function(e,t){var r=gc();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=gc();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ooe.bind(null,Dn,e),[n.memoizedState,e]},useRef:function(e){var t=gc();return e={current:e},t.memoizedState=e},useState:YM,useDebugValue:yP,useDeferredValue:function(e){return gc().memoizedState=e},useTransition:function(){var e=YM(!1),t=e[0];return e=ioe.bind(null,e[1]),gc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Dn,i=gc();if(wn){if(r===void 0)throw Error(Ne(407));r=r()}else{if(r=t(),Vi===null)throw Error(Ne(349));mh&30||hG(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,XM(pG.bind(null,n,o,e),[e]),n.flags|=2048,t0(9,fG.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=gc(),t=Vi.identifierPrefix;if(wn){var r=ml,n=pl;r=(n&~(1<<32-Ks(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Zy++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=noe++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},coe={readContext:ys,useCallback:wG,useContext:ys,useEffect:gP,useImperativeHandle:bG,useInsertionEffect:vG,useLayoutEffect:EG,useMemo:SG,useReducer:XC,useRef:yG,useState:function(){return XC(e0)},useDebugValue:yP,useDeferredValue:function(e){var t=vs();return TG(t,Ti.memoizedState,e)},useTransition:function(){var e=XC(e0)[0],t=vs().memoizedState;return[e,t]},useMutableSource:uG,useSyncExternalStore:dG,useId:CG,unstable_isNewReconciler:!1},loe={readContext:ys,useCallback:wG,useContext:ys,useEffect:gP,useImperativeHandle:bG,useInsertionEffect:vG,useLayoutEffect:EG,useMemo:SG,useReducer:JC,useRef:yG,useState:function(){return JC(e0)},useDebugValue:yP,useDeferredValue:function(e){var t=vs();return Ti===null?t.memoizedState=e:TG(t,Ti.memoizedState,e)},useTransition:function(){var e=JC(e0)[0],t=vs().memoizedState;return[e,t]},useMutableSource:uG,useSyncExternalStore:dG,useId:CG,unstable_isNewReconciler:!1};function Us(e,t){if(e&&e.defaultProps){t=Mn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function tN(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Mn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var TS={isMounted:function(e){return(e=e._reactInternals)?Ph(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=xo(),i=Pu(e),o=vl(n,i);o.payload=t,r!=null&&(o.callback=r),t=Ou(e,o,i),t!==null&&(qs(t,e,i,n),P_(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=xo(),i=Pu(e),o=vl(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Ou(e,o,i),t!==null&&(qs(t,e,i,n),P_(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xo(),n=Pu(e),i=vl(r,n);i.tag=2,t!=null&&(i.callback=t),t=Ou(e,i,n),t!==null&&(qs(t,e,n,r),P_(t,e,n))}};function JM(e,t,r,n,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!Ky(r,n)||!Ky(i,o):!0}function AG(e,t,r){var n=!1,i=Wu,o=t.contextType;return typeof o=="object"&&o!==null?o=ys(o):(i=Xo(t)?fh:po.current,n=t.contextTypes,o=(n=n!=null)?jp(e,i):Wu),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=TS,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function QM(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&TS.enqueueReplaceState(t,t.state,null)}function rN(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},lP(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=ys(o):(o=Xo(t)?fh:po.current,i.context=jp(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(tN(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&TS.enqueueReplaceState(i,i.state,null),Vb(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Bp(e,t){try{var r="",n=t;do r+=jne(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function QC(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function nN(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var uoe=typeof WeakMap=="function"?WeakMap:Map;function NG(e,t,r){r=vl(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Gb||(Gb=!0,fN=n),nN(e,t)},r}function OG(e,t,r){r=vl(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){nN(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){nN(e,t),typeof n!="function"&&(ku===null?ku=new Set([this]):ku.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function ZM(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new uoe;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Toe.bind(null,e,t,r),t.then(e,e))}function ej(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tj(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=vl(-1,1),t.tag=2,Ou(r,t,1))),r.lanes|=1),e)}var doe=Dl.ReactCurrentOwner,Ko=!1;function To(e,t,r,n){t.child=e===null?aG(t,null,r,n):Fp(t,e.child,r,n)}function rj(e,t,r,n,i){r=r.render;var o=t.ref;return vp(t,i),n=pP(e,t,r,n,o,i),r=mP(),e!==null&&!Ko?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Il(e,t,i)):(wn&&r&&rP(t),t.flags|=1,To(e,t,n,i),t.child)}function nj(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!CP(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,kG(e,t,o,n,i)):(e=F_(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Ky,r(a,n)&&e.ref===t.ref)return Il(e,t,i)}return t.flags|=1,e=Du(o,n),e.ref=t.ref,e.return=t,t.child=e}function kG(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(Ky(o,n)&&e.ref===t.ref)if(Ko=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(Ko=!0);else return t.lanes=e.lanes,Il(e,t,i)}return iN(e,t,r,n,i)}function PG(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(Xf,va),va|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,an(Xf,va),va|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,an(Xf,va),va|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,an(Xf,va),va|=n;return To(e,t,i,r),t.child}function DG(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function iN(e,t,r,n,i){var o=Xo(r)?fh:po.current;return o=jp(t,o),vp(t,i),r=pP(e,t,r,n,o,i),n=mP(),e!==null&&!Ko?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Il(e,t,i)):(wn&&n&&rP(t),t.flags|=1,To(e,t,r,i),t.child)}function ij(e,t,r,n,i){if(Xo(r)){var o=!0;Lb(t)}else o=!1;if(vp(t,i),t.stateNode===null)M_(e,t),AG(t,r,n),rN(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,l=r.contextType;typeof l=="object"&&l!==null?l=ys(l):(l=Xo(r)?fh:po.current,l=jp(t,l));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||c!==l)&&QM(t,a,n,l),su=!1;var f=t.memoizedState;a.state=f,Vb(t,n,a,i),c=t.memoizedState,s!==n||f!==c||Yo.current||su?(typeof u=="function"&&(tN(t,r,u,n),c=t.memoizedState),(s=su||JM(t,r,s,n,f,c,l))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=l,n=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,cG(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Us(t.type,s),a.props=l,d=t.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=ys(c):(c=Xo(r)?fh:po.current,c=jp(t,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==c)&&QM(t,a,n,c),su=!1,f=t.memoizedState,a.state=f,Vb(t,n,a,i);var m=t.memoizedState;s!==d||f!==m||Yo.current||su?(typeof p=="function"&&(tN(t,r,p,n),m=t.memoizedState),(l=su||JM(t,r,l,n,f,m,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),a.props=n,a.state=m,a.context=c,n=l):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return oN(e,t,r,n,o,i)}function oN(e,t,r,n,i,o){DG(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&HM(t,r,!1),Il(e,t,o);n=t.stateNode,doe.current=t;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Fp(t,e.child,null,o),t.child=Fp(t,null,s,o)):To(e,t,s,o),t.memoizedState=n.state,i&&HM(t,r,!0),t.child}function LG(e){var t=e.stateNode;t.pendingContext?$M(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$M(e,t.context,!1),uP(e,t.containerInfo)}function oj(e,t,r,n,i){return Up(),iP(i),t.flags|=256,To(e,t,r,n),t.child}var aN={dehydrated:null,treeContext:null,retryLane:0};function sN(e){return{baseLanes:e,cachePool:null,transitions:null}}function MG(e,t,r){var n=t.pendingProps,i=On.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),an(On,i&1),e===null)return ZA(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=IS(a,n,0,null),e=th(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=sN(r),t.memoizedState=aN,e):vP(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return hoe(e,t,a,n,s,i,r);if(o){o=n.fallback,a=t.mode,i=e.child,s=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Du(i,c),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Du(s,o):(o=th(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?sN(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=aN,n}return o=e.child,e=o.sibling,n=Du(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function vP(e,t){return t=IS({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function uE(e,t,r,n){return n!==null&&iP(n),Fp(t,e.child,null,r),e=vP(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hoe(e,t,r,n,i,o,a){if(r)return t.flags&256?(t.flags&=-257,n=QC(Error(Ne(422))),uE(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=IS({mode:"visible",children:n.children},i,0,null),o=th(o,i,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Fp(t,e.child,null,a),t.child.memoizedState=sN(a),t.memoizedState=aN,o);if(!(t.mode&1))return uE(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(Ne(419)),n=QC(o,n,void 0),uE(e,t,a,n)}if(s=(a&e.childLanes)!==0,Ko||s){if(n=Vi,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Rl(e,i),qs(n,e,i,-1))}return TP(),n=QC(Error(Ne(421))),uE(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Coe.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,wa=Nu(i.nextSibling),Aa=t,wn=!0,$s=null,e!==null&&(ss[cs++]=pl,ss[cs++]=ml,ss[cs++]=ph,pl=e.id,ml=e.overflow,ph=t),t=vP(t,n.children),t.flags|=4096,t)}function aj(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),eN(e.return,t,r)}function ZC(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function jG(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(To(e,t,n.children,r),n=On.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&aj(e,r,t);else if(e.tag===19)aj(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(an(On,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Bb(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),ZC(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Bb(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}ZC(t,!0,r,null,o);break;case"together":ZC(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function M_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Il(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),gh|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ne(153));if(t.child!==null){for(e=t.child,r=Du(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Du(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function foe(e,t,r){switch(t.tag){case 3:LG(t),Up();break;case 5:lG(t);break;case 1:Xo(t.type)&&Lb(t);break;case 4:uP(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;an(Ub,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(an(On,On.current&1),t.flags|=128,null):r&t.child.childLanes?MG(e,t,r):(an(On,On.current&1),e=Il(e,t,r),e!==null?e.sibling:null);an(On,On.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return jG(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),an(On,On.current),n)break;return null;case 22:case 23:return t.lanes=0,PG(e,t,r)}return Il(e,t,r)}var UG,cN,FG,VG;UG=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};cN=function(){};FG=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Hd(Nc.current);var o=null;switch(r){case"input":i=NA(e,i),n=NA(e,n),o=[];break;case"select":i=Mn({},i,{value:void 0}),n=Mn({},n,{value:void 0}),o=[];break;case"textarea":i=PA(e,i),n=PA(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Pb)}LA(r,n);var a;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Vy.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in n){var c=n[l];if(s=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==s&&(c!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(l,r)),r=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(o=o||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Vy.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&un("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}r&&(o=o||[]).push("style",r);var l=o;(t.updateQueue=l)&&(t.flags|=4)}};VG=function(e,t,r,n){r!==n&&(t.flags|=4)};function fg(e,t){if(!wn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function io(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function poe(e,t,r){var n=t.pendingProps;switch(nP(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return io(t),null;case 1:return Xo(t.type)&&Db(),io(t),null;case 3:return n=t.stateNode,Vp(),gn(Yo),gn(po),hP(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(cE(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$s!==null&&(gN($s),$s=null))),cN(e,t),io(t),null;case 5:dP(t);var i=Hd(Qy.current);if(r=t.type,e!==null&&t.stateNode!=null)FG(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Ne(166));return io(t),null}if(e=Hd(Nc.current),cE(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[bc]=t,n[Xy]=o,e=(t.mode&1)!==0,r){case"dialog":un("cancel",n),un("close",n);break;case"iframe":case"object":case"embed":un("load",n);break;case"video":case"audio":for(i=0;i<$g.length;i++)un($g[i],n);break;case"source":un("error",n);break;case"img":case"image":case"link":un("error",n),un("load",n);break;case"details":un("toggle",n);break;case"input":mM(n,o),un("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},un("invalid",n);break;case"textarea":yM(n,o),un("invalid",n)}LA(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&sE(n.textContent,s,e),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&sE(n.textContent,s,e),i=["children",""+s]):Vy.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&un("scroll",n)}switch(r){case"input":Zv(n),gM(n,o,!0);break;case"textarea":Zv(n),vM(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Pb)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pz(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[bc]=t,e[Xy]=n,UG(e,t,!1,!1),t.stateNode=e;e:{switch(a=MA(r,n),r){case"dialog":un("cancel",e),un("close",e),i=n;break;case"iframe":case"object":case"embed":un("load",e),i=n;break;case"video":case"audio":for(i=0;i<$g.length;i++)un($g[i],e);i=n;break;case"source":un("error",e),i=n;break;case"img":case"image":case"link":un("error",e),un("load",e),i=n;break;case"details":un("toggle",e),i=n;break;case"input":mM(e,n),i=NA(e,n),un("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Mn({},n,{value:void 0}),un("invalid",e);break;case"textarea":yM(e,n),i=PA(e,n),un("invalid",e);break;default:i=n}LA(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="style"?yz(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&mz(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&By(e,c):typeof c=="number"&&By(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Vy.hasOwnProperty(o)?c!=null&&o==="onScroll"&&un("scroll",e):c!=null&&$k(e,o,c,a))}switch(r){case"input":Zv(e),gM(e,n,!1);break;case"textarea":Zv(e),vM(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Gu(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?pp(e,!!n.multiple,o,!1):n.defaultValue!=null&&pp(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Pb)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return io(t),null;case 6:if(e&&t.stateNode!=null)VG(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Ne(166));if(r=Hd(Qy.current),Hd(Nc.current),cE(t)){if(n=t.stateNode,r=t.memoizedProps,n[bc]=t,(o=n.nodeValue!==r)&&(e=Aa,e!==null))switch(e.tag){case 3:sE(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sE(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[bc]=t,t.stateNode=n}return io(t),null;case 13:if(gn(On),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wn&&wa!==null&&t.mode&1&&!(t.flags&128))iG(),Up(),t.flags|=98560,o=!1;else if(o=cE(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(Ne(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ne(317));o[bc]=t}else Up(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;io(t),o=!1}else $s!==null&&(gN($s),$s=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||On.current&1?Ri===0&&(Ri=3):TP())),t.updateQueue!==null&&(t.flags|=4),io(t),null);case 4:return Vp(),cN(e,t),e===null&&qy(t.stateNode.containerInfo),io(t),null;case 10:return sP(t.type._context),io(t),null;case 17:return Xo(t.type)&&Db(),io(t),null;case 19:if(gn(On),o=t.memoizedState,o===null)return io(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)fg(o,!1);else{if(Ri!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Bb(e),a!==null){for(t.flags|=128,fg(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return an(On,On.current&1|2),t.child}e=e.sibling}o.tail!==null&&ri()>$p&&(t.flags|=128,n=!0,fg(o,!1),t.lanes=4194304)}else{if(!n)if(e=Bb(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),fg(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!wn)return io(t),null}else 2*ri()-o.renderingStartTime>$p&&r!==1073741824&&(t.flags|=128,n=!0,fg(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ri(),t.sibling=null,r=On.current,an(On,n?r&1|2:r&1),t):(io(t),null);case 22:case 23:return SP(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?va&1073741824&&(io(t),t.subtreeFlags&6&&(t.flags|=8192)):io(t),null;case 24:return null;case 25:return null}throw Error(Ne(156,t.tag))}function moe(e,t){switch(nP(t),t.tag){case 1:return Xo(t.type)&&Db(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vp(),gn(Yo),gn(po),hP(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dP(t),null;case 13:if(gn(On),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ne(340));Up()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gn(On),null;case 4:return Vp(),null;case 10:return sP(t.type._context),null;case 22:case 23:return SP(),null;case 24:return null;default:return null}}var dE=!1,uo=!1,goe=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Yf(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){zn(e,t,n)}else r.current=null}function lN(e,t,r){try{r()}catch(n){zn(e,t,n)}}var sj=!1;function yoe(e,t){if(WA=Nb,e=Gz(),tP(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,c=-1,l=0,u=0,d=e,f=null;t:for(;;){for(var p;d!==r||i!==0&&d.nodeType!==3||(s=a+i),d!==o||n!==0&&d.nodeType!==3||(c=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===e)break t;if(f===r&&++l===i&&(s=a),f===o&&++u===n&&(c=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}r=s===-1||c===-1?null:{start:s,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(KA={focusedElem:e,selectionRange:r},Nb=!1,tt=t;tt!==null;)if(t=tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,tt=e;else for(;tt!==null;){t=tt;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,E=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Us(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(S){zn(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,tt=e;break}tt=t.return}return m=sj,sj=!1,m}function dy(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&lN(t,r,o)}i=i.next}while(i!==n)}}function CS(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function uN(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function BG(e){var t=e.alternate;t!==null&&(e.alternate=null,BG(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bc],delete t[Xy],delete t[XA],delete t[Zie],delete t[eoe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $G(e){return e.tag===5||e.tag===3||e.tag===4}function cj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$G(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dN(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Pb));else if(n!==4&&(e=e.child,e!==null))for(dN(e,t,r),e=e.sibling;e!==null;)dN(e,t,r),e=e.sibling}function hN(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(hN(e,t,r),e=e.sibling;e!==null;)hN(e,t,r),e=e.sibling}var Wi=null,Vs=!1;function Hl(e,t,r){for(r=r.child;r!==null;)HG(e,t,r),r=r.sibling}function HG(e,t,r){if(Ac&&typeof Ac.onCommitFiberUnmount=="function")try{Ac.onCommitFiberUnmount(yS,r)}catch{}switch(r.tag){case 5:uo||Yf(r,t);case 6:var n=Wi,i=Vs;Wi=null,Hl(e,t,r),Wi=n,Vs=i,Wi!==null&&(Vs?(e=Wi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Wi.removeChild(r.stateNode));break;case 18:Wi!==null&&(Vs?(e=Wi,r=r.stateNode,e.nodeType===8?WC(e.parentNode,r):e.nodeType===1&&WC(e,r),Gy(e)):WC(Wi,r.stateNode));break;case 4:n=Wi,i=Vs,Wi=r.stateNode.containerInfo,Vs=!0,Hl(e,t,r),Wi=n,Vs=i;break;case 0:case 11:case 14:case 15:if(!uo&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&lN(r,t,a),i=i.next}while(i!==n)}Hl(e,t,r);break;case 1:if(!uo&&(Yf(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){zn(r,t,s)}Hl(e,t,r);break;case 21:Hl(e,t,r);break;case 22:r.mode&1?(uo=(n=uo)||r.memoizedState!==null,Hl(e,t,r),uo=n):Hl(e,t,r);break;default:Hl(e,t,r)}}function lj(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new goe),t.forEach(function(n){var i=Roe.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function xs(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Wi=s.stateNode,Vs=!1;break e;case 3:Wi=s.stateNode.containerInfo,Vs=!0;break e;case 4:Wi=s.stateNode.containerInfo,Vs=!0;break e}s=s.return}if(Wi===null)throw Error(Ne(160));HG(o,a,i),Wi=null,Vs=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){zn(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zG(t,e),t=t.sibling}function zG(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xs(t,e),ac(e),n&4){try{dy(3,e,e.return),CS(3,e)}catch(g){zn(e,e.return,g)}try{dy(5,e,e.return)}catch(g){zn(e,e.return,g)}}break;case 1:xs(t,e),ac(e),n&512&&r!==null&&Yf(r,r.return);break;case 5:if(xs(t,e),ac(e),n&512&&r!==null&&Yf(r,r.return),e.flags&32){var i=e.stateNode;try{By(i,"")}catch(g){zn(e,e.return,g)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&hz(i,o),MA(s,a);var l=MA(s,o);for(a=0;a<c.length;a+=2){var u=c[a],d=c[a+1];u==="style"?yz(i,d):u==="dangerouslySetInnerHTML"?mz(i,d):u==="children"?By(i,d):$k(i,u,d,l)}switch(s){case"input":OA(i,o);break;case"textarea":fz(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?pp(i,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?pp(i,!!o.multiple,o.defaultValue,!0):pp(i,!!o.multiple,o.multiple?[]:"",!1))}i[Xy]=o}catch(g){zn(e,e.return,g)}}break;case 6:if(xs(t,e),ac(e),n&4){if(e.stateNode===null)throw Error(Ne(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){zn(e,e.return,g)}}break;case 3:if(xs(t,e),ac(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Gy(t.containerInfo)}catch(g){zn(e,e.return,g)}break;case 4:xs(t,e),ac(e);break;case 13:xs(t,e),ac(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(bP=ri())),n&4&&lj(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(uo=(l=uo)||u,xs(t,e),uo=l):xs(t,e),ac(e),n&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!u&&e.mode&1)for(tt=e,u=e.child;u!==null;){for(d=tt=u;tt!==null;){switch(f=tt,p=f.child,f.tag){case 0:case 11:case 14:case 15:dy(4,f,f.return);break;case 1:Yf(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){zn(n,r,g)}}break;case 5:Yf(f,f.return);break;case 22:if(f.memoizedState!==null){dj(d);continue}}p!==null?(p.return=f,tt=p):dj(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=gz("display",a))}catch(g){zn(e,e.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){zn(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:xs(t,e),ac(e),n&4&&lj(e);break;case 21:break;default:xs(t,e),ac(e)}}function ac(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if($G(r)){var n=r;break e}r=r.return}throw Error(Ne(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(By(i,""),n.flags&=-33);var o=cj(e);hN(e,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=cj(e);dN(e,s,a);break;default:throw Error(Ne(161))}}catch(c){zn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function voe(e,t,r){tt=e,GG(e)}function GG(e,t,r){for(var n=(e.mode&1)!==0;tt!==null;){var i=tt,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||dE;if(!a){var s=i.alternate,c=s!==null&&s.memoizedState!==null||uo;s=dE;var l=uo;if(dE=a,(uo=c)&&!l)for(tt=i;tt!==null;)a=tt,c=a.child,a.tag===22&&a.memoizedState!==null?hj(i):c!==null?(c.return=a,tt=c):hj(i);for(;o!==null;)tt=o,GG(o),o=o.sibling;tt=i,dE=s,uo=l}uj(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,tt=o):uj(e)}}function uj(e){for(;tt!==null;){var t=tt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:uo||CS(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!uo)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Us(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&qM(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}qM(t,a,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Gy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}uo||t.flags&512&&uN(t)}catch(f){zn(t,t.return,f)}}if(t===e){tt=null;break}if(r=t.sibling,r!==null){r.return=t.return,tt=r;break}tt=t.return}}function dj(e){for(;tt!==null;){var t=tt;if(t===e){tt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,tt=r;break}tt=t.return}}function hj(e){for(;tt!==null;){var t=tt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{CS(4,t)}catch(c){zn(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){zn(t,i,c)}}var o=t.return;try{uN(t)}catch(c){zn(t,o,c)}break;case 5:var a=t.return;try{uN(t)}catch(c){zn(t,a,c)}}}catch(c){zn(t,t.return,c)}if(t===e){tt=null;break}var s=t.sibling;if(s!==null){s.return=t.return,tt=s;break}tt=t.return}}var Eoe=Math.ceil,zb=Dl.ReactCurrentDispatcher,EP=Dl.ReactCurrentOwner,ms=Dl.ReactCurrentBatchConfig,Er=0,Vi=null,fi=null,Ji=0,va=0,Xf=td(0),Ri=0,r0=null,gh=0,RS=0,_P=0,hy=null,Bo=null,bP=0,$p=1/0,al=null,Gb=!1,fN=null,ku=null,hE=!1,yu=null,Wb=0,fy=0,pN=null,j_=-1,U_=0;function xo(){return Er&6?ri():j_!==-1?j_:j_=ri()}function Pu(e){return e.mode&1?Er&2&&Ji!==0?Ji&-Ji:roe.transition!==null?(U_===0&&(U_=Az()),U_):(e=Hr,e!==0||(e=window.event,e=e===void 0?16:Mz(e.type)),e):1}function qs(e,t,r,n){if(50<fy)throw fy=0,pN=null,Error(Ne(185));q0(e,r,n),(!(Er&2)||e!==Vi)&&(e===Vi&&(!(Er&2)&&(RS|=r),Ri===4&&du(e,Ji)),Jo(e,n),r===1&&Er===0&&!(t.mode&1)&&($p=ri()+500,wS&&rd()))}function Jo(e,t){var r=e.callbackNode;rie(e,t);var n=Ab(e,e===Vi?Ji:0);if(n===0)r!==null&&bM(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&bM(r),t===1)e.tag===0?toe(fj.bind(null,e)):tG(fj.bind(null,e)),Jie(function(){!(Er&6)&&rd()}),r=null;else{switch(Nz(n)){case 1:r=Kk;break;case 4:r=Iz;break;case 16:r=xb;break;case 536870912:r=xz;break;default:r=xb}r=ZG(r,WG.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function WG(e,t){if(j_=-1,U_=0,Er&6)throw Error(Ne(327));var r=e.callbackNode;if(Ep()&&e.callbackNode!==r)return null;var n=Ab(e,e===Vi?Ji:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Kb(e,n);else{t=n;var i=Er;Er|=2;var o=qG();(Vi!==e||Ji!==t)&&(al=null,$p=ri()+500,eh(e,t));do try{woe();break}catch(s){KG(e,s)}while(!0);aP(),zb.current=o,Er=i,fi!==null?t=0:(Vi=null,Ji=0,t=Ri)}if(t!==0){if(t===2&&(i=BA(e),i!==0&&(n=i,t=mN(e,i))),t===1)throw r=r0,eh(e,0),du(e,n),Jo(e,ri()),r;if(t===6)du(e,n);else{if(i=e.current.alternate,!(n&30)&&!_oe(i)&&(t=Kb(e,n),t===2&&(o=BA(e),o!==0&&(n=o,t=mN(e,o))),t===1))throw r=r0,eh(e,0),du(e,n),Jo(e,ri()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Ne(345));case 2:Rd(e,Bo,al);break;case 3:if(du(e,n),(n&130023424)===n&&(t=bP+500-ri(),10<t)){if(Ab(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){xo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=YA(Rd.bind(null,e,Bo,al),t);break}Rd(e,Bo,al);break;case 4:if(du(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-Ks(n);o=1<<a,a=t[a],a>i&&(i=a),n&=~o}if(n=i,n=ri()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Eoe(n/1960))-n,10<n){e.timeoutHandle=YA(Rd.bind(null,e,Bo,al),n);break}Rd(e,Bo,al);break;case 5:Rd(e,Bo,al);break;default:throw Error(Ne(329))}}}return Jo(e,ri()),e.callbackNode===r?WG.bind(null,e):null}function mN(e,t){var r=hy;return e.current.memoizedState.isDehydrated&&(eh(e,t).flags|=256),e=Kb(e,t),e!==2&&(t=Bo,Bo=r,t!==null&&gN(t)),e}function gN(e){Bo===null?Bo=e:Bo.push.apply(Bo,e)}function _oe(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Xs(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function du(e,t){for(t&=~_P,t&=~RS,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ks(t),n=1<<r;e[r]=-1,t&=~n}}function fj(e){if(Er&6)throw Error(Ne(327));Ep();var t=Ab(e,0);if(!(t&1))return Jo(e,ri()),null;var r=Kb(e,t);if(e.tag!==0&&r===2){var n=BA(e);n!==0&&(t=n,r=mN(e,n))}if(r===1)throw r=r0,eh(e,0),du(e,t),Jo(e,ri()),r;if(r===6)throw Error(Ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rd(e,Bo,al),Jo(e,ri()),null}function wP(e,t){var r=Er;Er|=1;try{return e(t)}finally{Er=r,Er===0&&($p=ri()+500,wS&&rd())}}function yh(e){yu!==null&&yu.tag===0&&!(Er&6)&&Ep();var t=Er;Er|=1;var r=ms.transition,n=Hr;try{if(ms.transition=null,Hr=1,e)return e()}finally{Hr=n,ms.transition=r,Er=t,!(Er&6)&&rd()}}function SP(){va=Xf.current,gn(Xf)}function eh(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Xie(r)),fi!==null)for(r=fi.return;r!==null;){var n=r;switch(nP(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Db();break;case 3:Vp(),gn(Yo),gn(po),hP();break;case 5:dP(n);break;case 4:Vp();break;case 13:gn(On);break;case 19:gn(On);break;case 10:sP(n.type._context);break;case 22:case 23:SP()}r=r.return}if(Vi=e,fi=e=Du(e.current,null),Ji=va=t,Ri=0,r0=null,_P=RS=gh=0,Bo=hy=null,$d!==null){for(t=0;t<$d.length;t++)if(r=$d[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}$d=null}return e}function KG(e,t){do{var r=fi;try{if(aP(),D_.current=Hb,$b){for(var n=Dn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}$b=!1}if(mh=0,Di=Ti=Dn=null,uy=!1,Zy=0,EP.current=null,r===null||r.return===null){Ri=1,r0=t,fi=null;break}e:{var o=e,a=r.return,s=r,c=t;if(t=Ji,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=ej(a);if(p!==null){p.flags&=-257,tj(p,a,s,o,t),p.mode&1&&ZM(o,l,t),t=p,c=l;var m=t.updateQueue;if(m===null){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}else{if(!(t&1)){ZM(o,l,t),TP();break e}c=Error(Ne(426))}}else if(wn&&s.mode&1){var y=ej(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),tj(y,a,s,o,t),iP(Bp(c,s));break e}}o=c=Bp(c,s),Ri!==4&&(Ri=2),hy===null?hy=[o]:hy.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=NG(o,c,t);KM(o,v);break e;case 1:s=c;var E=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ku===null||!ku.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=OG(o,s,t);KM(o,S);break e}}o=o.return}while(o!==null)}XG(r)}catch(A){t=A,fi===r&&r!==null&&(fi=r=r.return);continue}break}while(!0)}function qG(){var e=zb.current;return zb.current=Hb,e===null?Hb:e}function TP(){(Ri===0||Ri===3||Ri===2)&&(Ri=4),Vi===null||!(gh&268435455)&&!(RS&268435455)||du(Vi,Ji)}function Kb(e,t){var r=Er;Er|=2;var n=qG();(Vi!==e||Ji!==t)&&(al=null,eh(e,t));do try{boe();break}catch(i){KG(e,i)}while(!0);if(aP(),Er=r,zb.current=n,fi!==null)throw Error(Ne(261));return Vi=null,Ji=0,Ri}function boe(){for(;fi!==null;)YG(fi)}function woe(){for(;fi!==null&&!Kne();)YG(fi)}function YG(e){var t=QG(e.alternate,e,va);e.memoizedProps=e.pendingProps,t===null?XG(e):fi=t,EP.current=null}function XG(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=moe(r,t),r!==null){r.flags&=32767,fi=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ri=6,fi=null;return}}else if(r=poe(r,t,va),r!==null){fi=r;return}if(t=t.sibling,t!==null){fi=t;return}fi=t=e}while(t!==null);Ri===0&&(Ri=5)}function Rd(e,t,r){var n=Hr,i=ms.transition;try{ms.transition=null,Hr=1,Soe(e,t,r,n)}finally{ms.transition=i,Hr=n}return null}function Soe(e,t,r,n){do Ep();while(yu!==null);if(Er&6)throw Error(Ne(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ne(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(nie(e,o),e===Vi&&(fi=Vi=null,Ji=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||hE||(hE=!0,ZG(xb,function(){return Ep(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=ms.transition,ms.transition=null;var a=Hr;Hr=1;var s=Er;Er|=4,EP.current=null,yoe(e,r),zG(r,e),Hie(KA),Nb=!!WA,KA=WA=null,e.current=r,voe(r),qne(),Er=s,Hr=a,ms.transition=o}else e.current=r;if(hE&&(hE=!1,yu=e,Wb=i),o=e.pendingLanes,o===0&&(ku=null),Jne(r.stateNode),Jo(e,ri()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Gb)throw Gb=!1,e=fN,fN=null,e;return Wb&1&&e.tag!==0&&Ep(),o=e.pendingLanes,o&1?e===pN?fy++:(fy=0,pN=e):fy=0,rd(),null}function Ep(){if(yu!==null){var e=Nz(Wb),t=ms.transition,r=Hr;try{if(ms.transition=null,Hr=16>e?16:e,yu===null)var n=!1;else{if(e=yu,yu=null,Wb=0,Er&6)throw Error(Ne(331));var i=Er;for(Er|=4,tt=e.current;tt!==null;){var o=tt,a=o.child;if(tt.flags&16){var s=o.deletions;if(s!==null){for(var c=0;c<s.length;c++){var l=s[c];for(tt=l;tt!==null;){var u=tt;switch(u.tag){case 0:case 11:case 15:dy(8,u,o)}var d=u.child;if(d!==null)d.return=u,tt=d;else for(;tt!==null;){u=tt;var f=u.sibling,p=u.return;if(BG(u),u===l){tt=null;break}if(f!==null){f.return=p,tt=f;break}tt=p}}}var m=o.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}tt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,tt=a;else e:for(;tt!==null;){if(o=tt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:dy(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,tt=v;break e}tt=o.return}}var E=e.current;for(tt=E;tt!==null;){a=tt;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,tt=b;else e:for(a=E;tt!==null;){if(s=tt,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:CS(9,s)}}catch(A){zn(s,s.return,A)}if(s===a){tt=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,tt=S;break e}tt=s.return}}if(Er=i,rd(),Ac&&typeof Ac.onPostCommitFiberRoot=="function")try{Ac.onPostCommitFiberRoot(yS,e)}catch{}n=!0}return n}finally{Hr=r,ms.transition=t}}return!1}function pj(e,t,r){t=Bp(r,t),t=NG(e,t,1),e=Ou(e,t,1),t=xo(),e!==null&&(q0(e,1,t),Jo(e,t))}function zn(e,t,r){if(e.tag===3)pj(e,e,r);else for(;t!==null;){if(t.tag===3){pj(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ku===null||!ku.has(n))){e=Bp(r,e),e=OG(t,e,1),t=Ou(t,e,1),e=xo(),t!==null&&(q0(t,1,e),Jo(t,e));break}}t=t.return}}function Toe(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=xo(),e.pingedLanes|=e.suspendedLanes&r,Vi===e&&(Ji&r)===r&&(Ri===4||Ri===3&&(Ji&130023424)===Ji&&500>ri()-bP?eh(e,0):_P|=r),Jo(e,t)}function JG(e,t){t===0&&(e.mode&1?(t=rE,rE<<=1,!(rE&130023424)&&(rE=4194304)):t=1);var r=xo();e=Rl(e,t),e!==null&&(q0(e,t,r),Jo(e,r))}function Coe(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),JG(e,r)}function Roe(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Ne(314))}n!==null&&n.delete(t),JG(e,r)}var QG;QG=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Yo.current)Ko=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ko=!1,foe(e,t,r);Ko=!!(e.flags&131072)}else Ko=!1,wn&&t.flags&1048576&&rG(t,jb,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;M_(e,t),e=t.pendingProps;var i=jp(t,po.current);vp(t,r),i=pP(null,t,n,e,i,r);var o=mP();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xo(n)?(o=!0,Lb(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,lP(t),i.updater=TS,t.stateNode=i,i._reactInternals=t,rN(t,n,e,r),t=oN(null,t,n,!0,o,r)):(t.tag=0,wn&&o&&rP(t),To(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(M_(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=xoe(n),e=Us(n,e),i){case 0:t=iN(null,t,n,e,r);break e;case 1:t=ij(null,t,n,e,r);break e;case 11:t=rj(null,t,n,e,r);break e;case 14:t=nj(null,t,n,Us(n.type,e),r);break e}throw Error(Ne(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Us(n,i),iN(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Us(n,i),ij(e,t,n,i,r);case 3:e:{if(LG(t),e===null)throw Error(Ne(387));n=t.pendingProps,o=t.memoizedState,i=o.element,cG(e,t),Vb(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Bp(Error(Ne(423)),t),t=oj(e,t,n,r,i);break e}else if(n!==i){i=Bp(Error(Ne(424)),t),t=oj(e,t,n,r,i);break e}else for(wa=Nu(t.stateNode.containerInfo.firstChild),Aa=t,wn=!0,$s=null,r=aG(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Up(),n===i){t=Il(e,t,r);break e}To(e,t,n,r)}t=t.child}return t;case 5:return lG(t),e===null&&ZA(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,qA(n,i)?a=null:o!==null&&qA(n,o)&&(t.flags|=32),DG(e,t),To(e,t,a,r),t.child;case 6:return e===null&&ZA(t),null;case 13:return MG(e,t,r);case 4:return uP(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Fp(t,null,n,r):To(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Us(n,i),rj(e,t,n,i,r);case 7:return To(e,t,t.pendingProps,r),t.child;case 8:return To(e,t,t.pendingProps.children,r),t.child;case 12:return To(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,an(Ub,n._currentValue),n._currentValue=a,o!==null)if(Xs(o.value,a)){if(o.children===i.children&&!Yo.current){t=Il(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var c=s.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=vl(-1,r&-r),c.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),eN(o.return,r,t),s.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Ne(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),eN(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}To(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,vp(t,r),i=ys(i),n=n(i),t.flags|=1,To(e,t,n,r),t.child;case 14:return n=t.type,i=Us(n,t.pendingProps),i=Us(n.type,i),nj(e,t,n,i,r);case 15:return kG(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Us(n,i),M_(e,t),t.tag=1,Xo(n)?(e=!0,Lb(t)):e=!1,vp(t,r),AG(t,n,i),rN(t,n,i,r),oN(null,t,n,!0,e,r);case 19:return jG(e,t,r);case 22:return PG(e,t,r)}throw Error(Ne(156,t.tag))};function ZG(e,t){return Rz(e,t)}function Ioe(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(e,t,r,n){return new Ioe(e,t,r,n)}function CP(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xoe(e){if(typeof e=="function")return CP(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zk)return 11;if(e===Gk)return 14}return 2}function Du(e,t){var r=e.alternate;return r===null?(r=fs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function F_(e,t,r,n,i,o){var a=2;if(n=e,typeof e=="function")CP(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Vf:return th(r.children,i,o,t);case Hk:a=8,i|=8;break;case RA:return e=fs(12,r,t,i|2),e.elementType=RA,e.lanes=o,e;case IA:return e=fs(13,r,t,i),e.elementType=IA,e.lanes=o,e;case xA:return e=fs(19,r,t,i),e.elementType=xA,e.lanes=o,e;case lz:return IS(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sz:a=10;break e;case cz:a=9;break e;case zk:a=11;break e;case Gk:a=14;break e;case au:a=16,n=null;break e}throw Error(Ne(130,e==null?e:typeof e,""))}return t=fs(a,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function th(e,t,r,n){return e=fs(7,e,n,t),e.lanes=r,e}function IS(e,t,r,n){return e=fs(22,e,n,t),e.elementType=lz,e.lanes=r,e.stateNode={isHidden:!1},e}function eR(e,t,r){return e=fs(6,e,null,t),e.lanes=r,e}function tR(e,t,r){return t=fs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Aoe(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=LC(0),this.expirationTimes=LC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=LC(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function RP(e,t,r,n,i,o,a,s,c){return e=new Aoe(e,t,r,s,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=fs(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},lP(o),e}function Noe(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ff,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function eW(e){if(!e)return Wu;e=e._reactInternals;e:{if(Ph(e)!==e||e.tag!==1)throw Error(Ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ne(171))}if(e.tag===1){var r=e.type;if(Xo(r))return eG(e,r,t)}return t}function tW(e,t,r,n,i,o,a,s,c){return e=RP(r,n,!0,e,i,o,a,s,c),e.context=eW(null),r=e.current,n=xo(),i=Pu(r),o=vl(n,i),o.callback=t??null,Ou(r,o,i),e.current.lanes=i,q0(e,i,n),Jo(e,n),e}function xS(e,t,r,n){var i=t.current,o=xo(),a=Pu(i);return r=eW(r),t.context===null?t.context=r:t.pendingContext=r,t=vl(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ou(i,t,a),e!==null&&(qs(e,i,a,o),P_(e,i,a)),a}function qb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mj(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function IP(e,t){mj(e,t),(e=e.alternate)&&mj(e,t)}function Ooe(){return null}var rW=typeof reportError=="function"?reportError:function(e){console.error(e)};function xP(e){this._internalRoot=e}AS.prototype.render=xP.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ne(409));xS(e,t,null,null)};AS.prototype.unmount=xP.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yh(function(){xS(null,e,null,null)}),t[Cl]=null}};function AS(e){this._internalRoot=e}AS.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pz();e={blockedOn:null,target:e,priority:t};for(var r=0;r<uu.length&&t!==0&&t<uu[r].priority;r++);uu.splice(r,0,e),r===0&&Lz(e)}};function AP(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function NS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gj(){}function koe(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var l=qb(a);o.call(l)}}var a=tW(t,n,e,0,null,!1,!1,"",gj);return e._reactRootContainer=a,e[Cl]=a.current,qy(e.nodeType===8?e.parentNode:e),yh(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var l=qb(c);s.call(l)}}var c=RP(e,0,!1,null,null,!1,!1,"",gj);return e._reactRootContainer=c,e[Cl]=c.current,qy(e.nodeType===8?e.parentNode:e),yh(function(){xS(t,c,r,n)}),c}function OS(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var c=qb(a);s.call(c)}}xS(t,a,e,i)}else a=koe(r,t,e,i,n);return qb(a)}Oz=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Bg(t.pendingLanes);r!==0&&(qk(t,r|1),Jo(t,ri()),!(Er&6)&&($p=ri()+500,rd()))}break;case 13:yh(function(){var n=Rl(e,1);if(n!==null){var i=xo();qs(n,e,1,i)}}),IP(e,1)}};Yk=function(e){if(e.tag===13){var t=Rl(e,134217728);if(t!==null){var r=xo();qs(t,e,134217728,r)}IP(e,134217728)}};kz=function(e){if(e.tag===13){var t=Pu(e),r=Rl(e,t);if(r!==null){var n=xo();qs(r,e,t,n)}IP(e,t)}};Pz=function(){return Hr};Dz=function(e,t){var r=Hr;try{return Hr=e,t()}finally{Hr=r}};UA=function(e,t,r){switch(t){case"input":if(OA(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=bS(n);if(!i)throw Error(Ne(90));dz(n),OA(n,i)}}}break;case"textarea":fz(e,r);break;case"select":t=r.value,t!=null&&pp(e,!!r.multiple,t,!1)}};_z=wP;bz=yh;var Poe={usingClientEntryPoint:!1,Events:[X0,zf,bS,vz,Ez,wP]},pg={findFiberByHostInstance:Bd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Doe={bundleType:pg.bundleType,version:pg.version,rendererPackageName:pg.rendererPackageName,rendererConfig:pg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Tz(e),e===null?null:e.stateNode},findFiberByHostInstance:pg.findFiberByHostInstance||Ooe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fE.isDisabled&&fE.supportsFiber)try{yS=fE.inject(Doe),Ac=fE}catch{}}Ma.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Poe;Ma.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!AP(t))throw Error(Ne(200));return Noe(e,t,null,r)};Ma.createRoot=function(e,t){if(!AP(e))throw Error(Ne(299));var r=!1,n="",i=rW;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=RP(e,1,!1,null,null,r,!1,n,i),e[Cl]=t.current,qy(e.nodeType===8?e.parentNode:e),new xP(t)};Ma.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ne(188)):(e=Object.keys(e).join(","),Error(Ne(268,e)));return e=Tz(t),e=e===null?null:e.stateNode,e};Ma.flushSync=function(e){return yh(e)};Ma.hydrate=function(e,t,r){if(!NS(t))throw Error(Ne(200));return OS(null,e,t,!0,r)};Ma.hydrateRoot=function(e,t,r){if(!AP(e))throw Error(Ne(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=rW;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=tW(t,null,e,1,r??null,i,!1,o,a),e[Cl]=t.current,qy(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new AS(t)};Ma.render=function(e,t,r){if(!NS(t))throw Error(Ne(200));return OS(null,e,t,!1,r)};Ma.unmountComponentAtNode=function(e){if(!NS(e))throw Error(Ne(40));return e._reactRootContainer?(yh(function(){OS(null,null,e,!1,function(){e._reactRootContainer=null,e[Cl]=null})}),!0):!1};Ma.unstable_batchedUpdates=wP;Ma.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!NS(r))throw Error(Ne(200));if(e==null||e._reactInternals===void 0)throw Error(Ne(38));return OS(e,t,r,!1,n)};Ma.version="18.3.1-next-f1338f8080-20240426";function nW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nW)}catch(e){console.error(e)}}nW(),nz.exports=Ma;var kS=nz.exports,iW,yj=kS;iW=yj.createRoot,yj.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function n0(){return n0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n0.apply(this,arguments)}var vu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(vu||(vu={}));const vj="popstate";function Loe(e){e===void 0&&(e={});function t(n,i){let{pathname:o,search:a,hash:s}=n.location;return yN("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Yb(i)}return joe(t,r,null,e)}function pi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function oW(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Moe(){return Math.random().toString(36).substr(2,8)}function Ej(e,t){return{usr:e.state,key:e.key,idx:t}}function yN(e,t,r,n){return r===void 0&&(r=null),n0({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ym(t):t,{state:r,key:t&&t.key||n||Moe()})}function Yb(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ym(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function joe(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s=vu.Pop,c=null,l=u();l==null&&(l=0,a.replaceState(n0({},a.state,{idx:l}),""));function u(){return(a.state||{idx:null}).idx}function d(){s=vu.Pop;let y=u(),v=y==null?null:y-l;l=y,c&&c({action:s,location:g.location,delta:v})}function f(y,v){s=vu.Push;let E=yN(g.location,y,v);l=u()+1;let b=Ej(E,l),S=g.createHref(E);try{a.pushState(b,"",S)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(S)}o&&c&&c({action:s,location:g.location,delta:1})}function p(y,v){s=vu.Replace;let E=yN(g.location,y,v);l=u();let b=Ej(E,l),S=g.createHref(E);a.replaceState(b,"",S),o&&c&&c({action:s,location:g.location,delta:0})}function m(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof y=="string"?y:Yb(y);return E=E.replace(/ $/,"%20"),pi(v,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,v)}let g={get action(){return s},get location(){return e(i,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(vj,d),c=y,()=>{i.removeEventListener(vj,d),c=null}},createHref(y){return t(i,y)},createURL:m,encodeLocation(y){let v=m(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(y){return a.go(y)}};return g}var _j;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(_j||(_j={}));function Uoe(e,t,r){return r===void 0&&(r="/"),Foe(e,t,r,!1)}function Foe(e,t,r,n){let i=typeof t=="string"?ym(t):t,o=NP(i.pathname||"/",r);if(o==null)return null;let a=aW(e);Voe(a);let s=null;for(let c=0;s==null&&c<a.length;++c){let l=Joe(o);s=Yoe(a[c],l,n)}return s}function aW(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,a,s)=>{let c={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(pi(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let l=Lu([n,c.relativePath]),u=r.concat(c);o.children&&o.children.length>0&&(pi(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),aW(o.children,t,u,l)),!(o.path==null&&!o.index)&&t.push({path:l,score:Koe(l,o.index),routesMeta:u})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let c of sW(o.path))i(o,a,c)}),t}function sW(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=sW(n.join("/")),s=[];return s.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&s.push(...a),s.map(c=>e.startsWith("/")&&c===""?"/":c)}function Voe(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:qoe(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Boe=/^:[\w-]+$/,$oe=3,Hoe=2,zoe=1,Goe=10,Woe=-2,bj=e=>e==="*";function Koe(e,t){let r=e.split("/"),n=r.length;return r.some(bj)&&(n+=Woe),t&&(n+=Hoe),r.filter(i=>!bj(i)).reduce((i,o)=>i+(Boe.test(o)?$oe:o===""?zoe:Goe),n)}function qoe(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Yoe(e,t,r){let{routesMeta:n}=e,i={},o="/",a=[];for(let s=0;s<n.length;++s){let c=n[s],l=s===n.length-1,u=o==="/"?t:t.slice(o.length)||"/",d=wj({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=wj({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Lu([o,d.pathname]),pathnameBase:tae(Lu([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=Lu([o,d.pathnameBase]))}return a}function wj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Xoe(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((l,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let g=s[d]||"";a=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const m=s[d];return p&&!m?l[f]=void 0:l[f]=(m||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:a,pattern:e}}function Xoe(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),oW(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,c)=>(n.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Joe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return oW(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function NP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Qoe(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?ym(e):e;return{pathname:r?r.startsWith("/")?r:Zoe(r,t):t,search:rae(n),hash:nae(i)}}function Zoe(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function rR(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eae(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function cW(e,t){let r=eae(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function lW(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=ym(e):(i=n0({},e),pi(!i.pathname||!i.pathname.includes("?"),rR("?","pathname","search",i)),pi(!i.pathname||!i.pathname.includes("#"),rR("#","pathname","hash",i)),pi(!i.search||!i.search.includes("#"),rR("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=r;else{let d=t.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}s=d>=0?t[d]:"/"}let c=Qoe(i,s),l=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Lu=e=>e.join("/").replace(/\/\/+/g,"/"),tae=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),rae=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,nae=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function iae(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const uW=["post","put","patch","delete"];new Set(uW);const oae=["get",...uW];new Set(oae);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function i0(){return i0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i0.apply(this,arguments)}const OP=C.createContext(null),aae=C.createContext(null),Dh=C.createContext(null),PS=C.createContext(null),Ll=C.createContext({outlet:null,matches:[],isDataRoute:!1}),dW=C.createContext(null);function sae(e,t){let{relative:r}=t===void 0?{}:t;Q0()||pi(!1);let{basename:n,navigator:i}=C.useContext(Dh),{hash:o,pathname:a,search:s}=fW(e,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:Lu([n,a])),i.createHref({pathname:c,search:s,hash:o})}function Q0(){return C.useContext(PS)!=null}function vm(){return Q0()||pi(!1),C.useContext(PS).location}function hW(e){C.useContext(Dh).static||C.useLayoutEffect(e)}function en(){let{isDataRoute:e}=C.useContext(Ll);return e?wae():cae()}function cae(){Q0()||pi(!1);let e=C.useContext(OP),{basename:t,future:r,navigator:n}=C.useContext(Dh),{matches:i}=C.useContext(Ll),{pathname:o}=vm(),a=JSON.stringify(cW(i,r.v7_relativeSplatPath)),s=C.useRef(!1);return hW(()=>{s.current=!0}),C.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){n.go(l);return}let d=lW(l,JSON.parse(a),o,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Lu([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,a,o,e])}const lae=C.createContext(null);function uae(e){let t=C.useContext(Ll).outlet;return t&&C.createElement(lae.Provider,{value:e},t)}function Em(){let{matches:e}=C.useContext(Ll),t=e[e.length-1];return t?t.params:{}}function fW(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=C.useContext(Dh),{matches:i}=C.useContext(Ll),{pathname:o}=vm(),a=JSON.stringify(cW(i,n.v7_relativeSplatPath));return C.useMemo(()=>lW(e,JSON.parse(a),o,r==="path"),[e,a,o,r])}function dae(e,t){return hae(e,t)}function hae(e,t,r,n){Q0()||pi(!1);let{navigator:i}=C.useContext(Dh),{matches:o}=C.useContext(Ll),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let l=vm(),u;if(t){var d;let y=typeof t=="string"?ym(t):t;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||pi(!1),u=y}else u=l;let f=u.pathname||"/",p=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=Uoe(e,{pathname:p}),g=yae(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},s,y.params),pathname:Lu([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Lu([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,r,n);return t&&g?C.createElement(PS.Provider,{value:{location:i0({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:vu.Pop}},g):g}function fae(){let e=bae(),t=iae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),r?C.createElement("pre",{style:i},r):null,null)}const pae=C.createElement(fae,null);class mae extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?C.createElement(Ll.Provider,{value:this.props.routeContext},C.createElement(dW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gae(e){let{routeContext:t,match:r,children:n}=e,i=C.useContext(OP);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),C.createElement(Ll.Provider,{value:t},n)}function yae(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,s=(i=r)==null?void 0:i.errors;if(s!=null){let u=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||pi(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,l=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:f,errors:p}=r,m=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){c=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((u,d,f)=>{let p,m=!1,g=null,y=null;r&&(p=s&&d.route.id?s[d.route.id]:void 0,g=d.route.errorElement||pae,c&&(l<0&&f===0?(m=!0,y=null):l===f&&(m=!0,y=d.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,f+1)),E=()=>{let b;return p?b=g:m?b=y:d.route.Component?b=C.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,C.createElement(gae,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:r!=null},children:b})};return r&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?C.createElement(mae,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:E(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):E()},null)}var pW=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pW||{}),Xb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Xb||{});function vae(e){let t=C.useContext(OP);return t||pi(!1),t}function Eae(e){let t=C.useContext(aae);return t||pi(!1),t}function _ae(e){let t=C.useContext(Ll);return t||pi(!1),t}function mW(e){let t=_ae(),r=t.matches[t.matches.length-1];return r.route.id||pi(!1),r.route.id}function bae(){var e;let t=C.useContext(dW),r=Eae(Xb.UseRouteError),n=mW(Xb.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function wae(){let{router:e}=vae(pW.UseNavigateStable),t=mW(Xb.UseNavigateStable),r=C.useRef(!1);return hW(()=>{r.current=!0}),C.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,i0({fromRouteId:t},o)))},[e,t])}const Sj={};function Sae(e,t){Sj[t]||(Sj[t]=!0,console.warn(t))}const Tj=(e,t,r)=>Sae(e," React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+r+"."));function Tae(e,t){e!=null&&e.v7_startTransition||Tj("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&Tj("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function eo(e){return uae(e.context)}function Ze(e){pi(!1)}function Cae(e){let{basename:t="/",children:r=null,location:n,navigationType:i=vu.Pop,navigator:o,static:a=!1,future:s}=e;Q0()&&pi(!1);let c=t.replace(/^\/*/,"/"),l=C.useMemo(()=>({basename:c,navigator:o,static:a,future:i0({v7_relativeSplatPath:!1},s)}),[c,s,o,a]);typeof n=="string"&&(n=ym(n));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:m="default"}=n,g=C.useMemo(()=>{let y=NP(u,c);return y==null?null:{location:{pathname:y,search:d,hash:f,state:p,key:m},navigationType:i}},[c,u,d,f,p,m,i]);return g==null?null:C.createElement(Dh.Provider,{value:l},C.createElement(PS.Provider,{children:r,value:g}))}function Rae(e){let{children:t,location:r}=e;return dae(vN(t),r)}new Promise(()=>{});function vN(e,t){t===void 0&&(t=[]);let r=[];return C.Children.forEach(e,(n,i)=>{if(!C.isValidElement(n))return;let o=[...t,i];if(n.type===C.Fragment){r.push.apply(r,vN(n.props.children,o));return}n.type!==Ze&&pi(!1),!n.props.index||!n.props.children||pi(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=vN(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function EN(){return EN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EN.apply(this,arguments)}function Iae(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function xae(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Aae(e,t){return e.button===0&&(!t||t==="_self")&&!xae(e)}function Jb(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Nae(e,t){let r=Jb(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(o=>{r.append(i,o)})}),r}const Oae=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kae="6";try{window.__reactRouterVersion=kae}catch{}const Pae="startTransition",Cj=tz[Pae];function Dae(e){let{basename:t,children:r,future:n,window:i}=e,o=C.useRef();o.current==null&&(o.current=Loe({window:i,v5Compat:!0}));let a=o.current,[s,c]=C.useState({action:a.action,location:a.location}),{v7_startTransition:l}=n||{},u=C.useCallback(d=>{l&&Cj?Cj(()=>c(d)):c(d)},[c,l]);return C.useLayoutEffect(()=>a.listen(u),[a,u]),C.useEffect(()=>Tae(n),[n]),C.createElement(Cae,{basename:t,children:r,location:s.location,navigationType:s.action,navigator:a,future:n})}const Lae=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mae=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ar=C.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:o,replace:a,state:s,target:c,to:l,preventScrollReset:u,viewTransition:d}=t,f=Iae(t,Oae),{basename:p}=C.useContext(Dh),m,g=!1;if(typeof l=="string"&&Mae.test(l)&&(m=l,Lae))try{let b=new URL(window.location.href),S=l.startsWith("//")?new URL(b.protocol+l):new URL(l),A=NP(S.pathname,p);S.origin===b.origin&&A!=null?l=A+S.search+S.hash:g=!0}catch{}let y=sae(l,{relative:i}),v=jae(l,{replace:a,state:s,target:c,preventScrollReset:u,relative:i,viewTransition:d});function E(b){n&&n(b),b.defaultPrevented||v(b)}return C.createElement("a",EN({},f,{href:m||y,onClick:g||o?n:E,ref:r,target:c}))});var Rj;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Rj||(Rj={}));var Ij;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ij||(Ij={}));function jae(e,t){let{target:r,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:s}=t===void 0?{}:t,c=en(),l=vm(),u=fW(e,{relative:a});return C.useCallback(d=>{if(Aae(d,r)){d.preventDefault();let f=n!==void 0?n:Yb(l)===Yb(u);c(e,{replace:f,state:i,preventScrollReset:o,relative:a,viewTransition:s})}},[l,c,u,n,i,r,e,o,a,s])}function gW(e){let t=C.useRef(Jb(e)),r=C.useRef(!1),n=vm(),i=C.useMemo(()=>Nae(n.search,r.current?null:t.current),[n.search]),o=en(),a=C.useCallback((s,c)=>{const l=Jb(typeof s=="function"?s(i):s);r.current=!0,o("?"+l,c)},[o,i]);return[i,a]}var Uae=function(t){return Fae(t)&&!Vae(t)};function Fae(e){return!!e&&typeof e=="object"}function Vae(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||Hae(e)}var Bae=typeof Symbol=="function"&&Symbol.for,$ae=Bae?Symbol.for("react.element"):60103;function Hae(e){return e.$$typeof===$ae}function zae(e){return Array.isArray(e)?[]:{}}function Qb(e,t){return t.clone!==!1&&t.isMergeableObject(e)?o0(zae(e),e,t):e}function Gae(e,t,r){return e.concat(t).map(function(n){return Qb(n,r)})}function Wae(e,t,r){var n={};return r.isMergeableObject(e)&&Object.keys(e).forEach(function(i){n[i]=Qb(e[i],r)}),Object.keys(t).forEach(function(i){!r.isMergeableObject(t[i])||!e[i]?n[i]=Qb(t[i],r):n[i]=o0(e[i],t[i],r)}),n}function o0(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||Gae,r.isMergeableObject=r.isMergeableObject||Uae;var n=Array.isArray(t),i=Array.isArray(e),o=n===i;return o?n?r.arrayMerge(e,t,r):Wae(e,t,r):Qb(t,r)}o0.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return o0(n,i,r)},{})};var _N=o0,yW=typeof global=="object"&&global&&global.Object===Object&&global,Kae=typeof self=="object"&&self&&self.Object===Object&&self,Vc=yW||Kae||Function("return this")(),Ku=Vc.Symbol,vW=Object.prototype,qae=vW.hasOwnProperty,Yae=vW.toString,mg=Ku?Ku.toStringTag:void 0;function Xae(e){var t=qae.call(e,mg),r=e[mg];try{e[mg]=void 0;var n=!0}catch{}var i=Yae.call(e);return n&&(t?e[mg]=r:delete e[mg]),i}var Jae=Object.prototype,Qae=Jae.toString;function Zae(e){return Qae.call(e)}var ese="[object Null]",tse="[object Undefined]",xj=Ku?Ku.toStringTag:void 0;function Lh(e){return e==null?e===void 0?tse:ese:xj&&xj in Object(e)?Xae(e):Zae(e)}function EW(e,t){return function(r){return e(t(r))}}var kP=EW(Object.getPrototypeOf,Object);function Mh(e){return e!=null&&typeof e=="object"}var rse="[object Object]",nse=Function.prototype,ise=Object.prototype,_W=nse.toString,ose=ise.hasOwnProperty,ase=_W.call(Object);function Aj(e){if(!Mh(e)||Lh(e)!=rse)return!1;var t=kP(e);if(t===null)return!0;var r=ose.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&_W.call(r)==ase}function sse(){this.__data__=[],this.size=0}function bW(e,t){return e===t||e!==e&&t!==t}function DS(e,t){for(var r=e.length;r--;)if(bW(e[r][0],t))return r;return-1}var cse=Array.prototype,lse=cse.splice;function use(e){var t=this.__data__,r=DS(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():lse.call(t,r,1),--this.size,!0}function dse(e){var t=this.__data__,r=DS(t,e);return r<0?void 0:t[r][1]}function hse(e){return DS(this.__data__,e)>-1}function fse(e,t){var r=this.__data__,n=DS(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Ml(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ml.prototype.clear=sse;Ml.prototype.delete=use;Ml.prototype.get=dse;Ml.prototype.has=hse;Ml.prototype.set=fse;function pse(){this.__data__=new Ml,this.size=0}function mse(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function gse(e){return this.__data__.get(e)}function yse(e){return this.__data__.has(e)}function Z0(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var vse="[object AsyncFunction]",Ese="[object Function]",_se="[object GeneratorFunction]",bse="[object Proxy]";function wW(e){if(!Z0(e))return!1;var t=Lh(e);return t==Ese||t==_se||t==vse||t==bse}var nR=Vc["__core-js_shared__"],Nj=function(){var e=/[^.]+$/.exec(nR&&nR.keys&&nR.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function wse(e){return!!Nj&&Nj in e}var Sse=Function.prototype,Tse=Sse.toString;function jh(e){if(e!=null){try{return Tse.call(e)}catch{}try{return e+""}catch{}}return""}var Cse=/[\\^$.*+?()[\]{}|]/g,Rse=/^\[object .+?Constructor\]$/,Ise=Function.prototype,xse=Object.prototype,Ase=Ise.toString,Nse=xse.hasOwnProperty,Ose=RegExp("^"+Ase.call(Nse).replace(Cse,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kse(e){if(!Z0(e)||wse(e))return!1;var t=wW(e)?Ose:Rse;return t.test(jh(e))}function Pse(e,t){return e==null?void 0:e[t]}function Uh(e,t){var r=Pse(e,t);return kse(r)?r:void 0}var a0=Uh(Vc,"Map"),s0=Uh(Object,"create");function Dse(){this.__data__=s0?s0(null):{},this.size=0}function Lse(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Mse="__lodash_hash_undefined__",jse=Object.prototype,Use=jse.hasOwnProperty;function Fse(e){var t=this.__data__;if(s0){var r=t[e];return r===Mse?void 0:r}return Use.call(t,e)?t[e]:void 0}var Vse=Object.prototype,Bse=Vse.hasOwnProperty;function $se(e){var t=this.__data__;return s0?t[e]!==void 0:Bse.call(t,e)}var Hse="__lodash_hash_undefined__";function zse(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=s0&&t===void 0?Hse:t,this}function vh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}vh.prototype.clear=Dse;vh.prototype.delete=Lse;vh.prototype.get=Fse;vh.prototype.has=$se;vh.prototype.set=zse;function Gse(){this.size=0,this.__data__={hash:new vh,map:new(a0||Ml),string:new vh}}function Wse(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function LS(e,t){var r=e.__data__;return Wse(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Kse(e){var t=LS(this,e).delete(e);return this.size-=t?1:0,t}function qse(e){return LS(this,e).get(e)}function Yse(e){return LS(this,e).has(e)}function Xse(e,t){var r=LS(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function nd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}nd.prototype.clear=Gse;nd.prototype.delete=Kse;nd.prototype.get=qse;nd.prototype.has=Yse;nd.prototype.set=Xse;var Jse=200;function Qse(e,t){var r=this.__data__;if(r instanceof Ml){var n=r.__data__;if(!a0||n.length<Jse-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new nd(n)}return r.set(e,t),this.size=r.size,this}function _m(e){var t=this.__data__=new Ml(e);this.size=t.size}_m.prototype.clear=pse;_m.prototype.delete=mse;_m.prototype.get=gse;_m.prototype.has=yse;_m.prototype.set=Qse;function Zse(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Oj=function(){try{var e=Uh(Object,"defineProperty");return e({},"",{}),e}catch{}}();function SW(e,t,r){t=="__proto__"&&Oj?Oj(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var ece=Object.prototype,tce=ece.hasOwnProperty;function TW(e,t,r){var n=e[t];(!(tce.call(e,t)&&bW(n,r))||r===void 0&&!(t in e))&&SW(e,t,r)}function MS(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=void 0;c===void 0&&(c=e[s]),i?SW(r,s,c):TW(r,s,c)}return r}function rce(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var nce="[object Arguments]";function kj(e){return Mh(e)&&Lh(e)==nce}var CW=Object.prototype,ice=CW.hasOwnProperty,oce=CW.propertyIsEnumerable,ace=kj(function(){return arguments}())?kj:function(e){return Mh(e)&&ice.call(e,"callee")&&!oce.call(e,"callee")},ev=Array.isArray;function sce(){return!1}var RW=typeof Ia=="object"&&Ia&&!Ia.nodeType&&Ia,Pj=RW&&typeof xa=="object"&&xa&&!xa.nodeType&&xa,cce=Pj&&Pj.exports===RW,Dj=cce?Vc.Buffer:void 0,lce=Dj?Dj.isBuffer:void 0,IW=lce||sce,uce=9007199254740991,dce=/^(?:0|[1-9]\d*)$/;function hce(e,t){var r=typeof e;return t=t??uce,!!t&&(r=="number"||r!="symbol"&&dce.test(e))&&e>-1&&e%1==0&&e<t}var fce=9007199254740991;function xW(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fce}var pce="[object Arguments]",mce="[object Array]",gce="[object Boolean]",yce="[object Date]",vce="[object Error]",Ece="[object Function]",_ce="[object Map]",bce="[object Number]",wce="[object Object]",Sce="[object RegExp]",Tce="[object Set]",Cce="[object String]",Rce="[object WeakMap]",Ice="[object ArrayBuffer]",xce="[object DataView]",Ace="[object Float32Array]",Nce="[object Float64Array]",Oce="[object Int8Array]",kce="[object Int16Array]",Pce="[object Int32Array]",Dce="[object Uint8Array]",Lce="[object Uint8ClampedArray]",Mce="[object Uint16Array]",jce="[object Uint32Array]",fn={};fn[Ace]=fn[Nce]=fn[Oce]=fn[kce]=fn[Pce]=fn[Dce]=fn[Lce]=fn[Mce]=fn[jce]=!0;fn[pce]=fn[mce]=fn[Ice]=fn[gce]=fn[xce]=fn[yce]=fn[vce]=fn[Ece]=fn[_ce]=fn[bce]=fn[wce]=fn[Sce]=fn[Tce]=fn[Cce]=fn[Rce]=!1;function Uce(e){return Mh(e)&&xW(e.length)&&!!fn[Lh(e)]}function PP(e){return function(t){return e(t)}}var AW=typeof Ia=="object"&&Ia&&!Ia.nodeType&&Ia,py=AW&&typeof xa=="object"&&xa&&!xa.nodeType&&xa,Fce=py&&py.exports===AW,iR=Fce&&yW.process,Hp=function(){try{var e=py&&py.require&&py.require("util").types;return e||iR&&iR.binding&&iR.binding("util")}catch{}}(),Lj=Hp&&Hp.isTypedArray,Vce=Lj?PP(Lj):Uce,Bce=Object.prototype,$ce=Bce.hasOwnProperty;function NW(e,t){var r=ev(e),n=!r&&ace(e),i=!r&&!n&&IW(e),o=!r&&!n&&!i&&Vce(e),a=r||n||i||o,s=a?rce(e.length,String):[],c=s.length;for(var l in e)(t||$ce.call(e,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||hce(l,c)))&&s.push(l);return s}var Hce=Object.prototype;function DP(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Hce;return e===r}var zce=EW(Object.keys,Object),Gce=Object.prototype,Wce=Gce.hasOwnProperty;function Kce(e){if(!DP(e))return zce(e);var t=[];for(var r in Object(e))Wce.call(e,r)&&r!="constructor"&&t.push(r);return t}function OW(e){return e!=null&&xW(e.length)&&!wW(e)}function LP(e){return OW(e)?NW(e):Kce(e)}function qce(e,t){return e&&MS(t,LP(t),e)}function Yce(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Xce=Object.prototype,Jce=Xce.hasOwnProperty;function Qce(e){if(!Z0(e))return Yce(e);var t=DP(e),r=[];for(var n in e)n=="constructor"&&(t||!Jce.call(e,n))||r.push(n);return r}function MP(e){return OW(e)?NW(e,!0):Qce(e)}function Zce(e,t){return e&&MS(t,MP(t),e)}var kW=typeof Ia=="object"&&Ia&&!Ia.nodeType&&Ia,Mj=kW&&typeof xa=="object"&&xa&&!xa.nodeType&&xa,ele=Mj&&Mj.exports===kW,jj=ele?Vc.Buffer:void 0,Uj=jj?jj.allocUnsafe:void 0;function tle(e,t){if(t)return e.slice();var r=e.length,n=Uj?Uj(r):new e.constructor(r);return e.copy(n),n}function PW(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function rle(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}function DW(){return[]}var nle=Object.prototype,ile=nle.propertyIsEnumerable,Fj=Object.getOwnPropertySymbols,jP=Fj?function(e){return e==null?[]:(e=Object(e),rle(Fj(e),function(t){return ile.call(e,t)}))}:DW;function ole(e,t){return MS(e,jP(e),t)}function LW(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var ale=Object.getOwnPropertySymbols,MW=ale?function(e){for(var t=[];e;)LW(t,jP(e)),e=kP(e);return t}:DW;function sle(e,t){return MS(e,MW(e),t)}function jW(e,t,r){var n=t(e);return ev(e)?n:LW(n,r(e))}function cle(e){return jW(e,LP,jP)}function lle(e){return jW(e,MP,MW)}var bN=Uh(Vc,"DataView"),wN=Uh(Vc,"Promise"),SN=Uh(Vc,"Set"),TN=Uh(Vc,"WeakMap"),Vj="[object Map]",ule="[object Object]",Bj="[object Promise]",$j="[object Set]",Hj="[object WeakMap]",zj="[object DataView]",dle=jh(bN),hle=jh(a0),fle=jh(wN),ple=jh(SN),mle=jh(TN),ll=Lh;(bN&&ll(new bN(new ArrayBuffer(1)))!=zj||a0&&ll(new a0)!=Vj||wN&&ll(wN.resolve())!=Bj||SN&&ll(new SN)!=$j||TN&&ll(new TN)!=Hj)&&(ll=function(e){var t=Lh(e),r=t==ule?e.constructor:void 0,n=r?jh(r):"";if(n)switch(n){case dle:return zj;case hle:return Vj;case fle:return Bj;case ple:return $j;case mle:return Hj}return t});var gle=Object.prototype,yle=gle.hasOwnProperty;function vle(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&yle.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Gj=Vc.Uint8Array;function UP(e){var t=new e.constructor(e.byteLength);return new Gj(t).set(new Gj(e)),t}function Ele(e,t){var r=t?UP(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var _le=/\w*$/;function ble(e){var t=new e.constructor(e.source,_le.exec(e));return t.lastIndex=e.lastIndex,t}var Wj=Ku?Ku.prototype:void 0,Kj=Wj?Wj.valueOf:void 0;function wle(e){return Kj?Object(Kj.call(e)):{}}function Sle(e,t){var r=t?UP(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Tle="[object Boolean]",Cle="[object Date]",Rle="[object Map]",Ile="[object Number]",xle="[object RegExp]",Ale="[object Set]",Nle="[object String]",Ole="[object Symbol]",kle="[object ArrayBuffer]",Ple="[object DataView]",Dle="[object Float32Array]",Lle="[object Float64Array]",Mle="[object Int8Array]",jle="[object Int16Array]",Ule="[object Int32Array]",Fle="[object Uint8Array]",Vle="[object Uint8ClampedArray]",Ble="[object Uint16Array]",$le="[object Uint32Array]";function Hle(e,t,r){var n=e.constructor;switch(t){case kle:return UP(e);case Tle:case Cle:return new n(+e);case Ple:return Ele(e,r);case Dle:case Lle:case Mle:case jle:case Ule:case Fle:case Vle:case Ble:case $le:return Sle(e,r);case Rle:return new n;case Ile:case Nle:return new n(e);case xle:return ble(e);case Ale:return new n;case Ole:return wle(e)}}var qj=Object.create,zle=function(){function e(){}return function(t){if(!Z0(t))return{};if(qj)return qj(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Gle(e){return typeof e.constructor=="function"&&!DP(e)?zle(kP(e)):{}}var Wle="[object Map]";function Kle(e){return Mh(e)&&ll(e)==Wle}var Yj=Hp&&Hp.isMap,qle=Yj?PP(Yj):Kle,Yle="[object Set]";function Xle(e){return Mh(e)&&ll(e)==Yle}var Xj=Hp&&Hp.isSet,Jle=Xj?PP(Xj):Xle,Qle=1,Zle=2,eue=4,UW="[object Arguments]",tue="[object Array]",rue="[object Boolean]",nue="[object Date]",iue="[object Error]",FW="[object Function]",oue="[object GeneratorFunction]",aue="[object Map]",sue="[object Number]",VW="[object Object]",cue="[object RegExp]",lue="[object Set]",uue="[object String]",due="[object Symbol]",hue="[object WeakMap]",fue="[object ArrayBuffer]",pue="[object DataView]",mue="[object Float32Array]",gue="[object Float64Array]",yue="[object Int8Array]",vue="[object Int16Array]",Eue="[object Int32Array]",_ue="[object Uint8Array]",bue="[object Uint8ClampedArray]",wue="[object Uint16Array]",Sue="[object Uint32Array]",rn={};rn[UW]=rn[tue]=rn[fue]=rn[pue]=rn[rue]=rn[nue]=rn[mue]=rn[gue]=rn[yue]=rn[vue]=rn[Eue]=rn[aue]=rn[sue]=rn[VW]=rn[cue]=rn[lue]=rn[uue]=rn[due]=rn[_ue]=rn[bue]=rn[wue]=rn[Sue]=!0;rn[iue]=rn[FW]=rn[hue]=!1;function my(e,t,r,n,i,o){var a,s=t&Qle,c=t&Zle,l=t&eue;if(a!==void 0)return a;if(!Z0(e))return e;var u=ev(e);if(u){if(a=vle(e),!s)return PW(e,a)}else{var d=ll(e),f=d==FW||d==oue;if(IW(e))return tle(e,s);if(d==VW||d==UW||f&&!i){if(a=c||f?{}:Gle(e),!s)return c?sle(e,Zce(a,e)):ole(e,qce(a,e))}else{if(!rn[d])return i?e:{};a=Hle(e,d,s)}}o||(o=new _m);var p=o.get(e);if(p)return p;o.set(e,a),Jle(e)?e.forEach(function(y){a.add(my(y,t,r,y,e,o))}):qle(e)&&e.forEach(function(y,v){a.set(v,my(y,t,r,v,e,o))});var m=l?c?lle:cle:c?MP:LP,g=u?void 0:m(e);return Zse(g||e,function(y,v){g&&(v=y,y=e[v]),TW(a,v,my(y,t,r,v,e,o))}),a}var Tue=1,Cue=4;function pE(e){return my(e,Tue|Cue)}var Jj=Array.isArray,Qj=Object.keys,Rue=Object.prototype.hasOwnProperty,Iue=typeof Element<"u";function CN(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Jj(e),n=Jj(t),i,o,a;if(r&&n){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!CN(e[i],t[i]))return!1;return!0}if(r!=n)return!1;var s=e instanceof Date,c=t instanceof Date;if(s!=c)return!1;if(s&&c)return e.getTime()==t.getTime();var l=e instanceof RegExp,u=t instanceof RegExp;if(l!=u)return!1;if(l&&u)return e.toString()==t.toString();var d=Qj(e);if(o=d.length,o!==Qj(t).length)return!1;for(i=o;i--!==0;)if(!Rue.call(t,d[i]))return!1;if(Iue&&e instanceof Element&&t instanceof Element)return e===t;for(i=o;i--!==0;)if(a=d[i],!(a==="_owner"&&e.$$typeof)&&!CN(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}var xue=function(t,r){try{return CN(t,r)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||n.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}};const Id=ia(xue);var Aue=4;function Zj(e){return my(e,Aue)}function BW(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var Nue="[object Symbol]";function FP(e){return typeof e=="symbol"||Mh(e)&&Lh(e)==Nue}var Oue="Expected a function";function VP(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Oue);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(VP.Cache||nd),r}VP.Cache=nd;var kue=500;function Pue(e){var t=VP(e,function(n){return r.size===kue&&r.clear(),n}),r=t.cache;return t}var Due=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lue=/\\(\\)?/g,Mue=Pue(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Due,function(r,n,i,o){t.push(i?o.replace(Lue,"$1"):n||r)}),t}),jue=1/0;function Uue(e){if(typeof e=="string"||FP(e))return e;var t=e+"";return t=="0"&&1/e==-jue?"-0":t}var Fue=1/0,eU=Ku?Ku.prototype:void 0,tU=eU?eU.toString:void 0;function $W(e){if(typeof e=="string")return e;if(ev(e))return BW(e,$W)+"";if(FP(e))return tU?tU.call(e):"";var t=e+"";return t=="0"&&1/e==-Fue?"-0":t}function Vue(e){return e==null?"":$W(e)}function HW(e){return ev(e)?BW(e,Uue):FP(e)?[e]:PW(Mue(Vue(e)))}var zW={exports:{}},zr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $i=typeof Symbol=="function"&&Symbol.for,BP=$i?Symbol.for("react.element"):60103,$P=$i?Symbol.for("react.portal"):60106,jS=$i?Symbol.for("react.fragment"):60107,US=$i?Symbol.for("react.strict_mode"):60108,FS=$i?Symbol.for("react.profiler"):60114,VS=$i?Symbol.for("react.provider"):60109,BS=$i?Symbol.for("react.context"):60110,HP=$i?Symbol.for("react.async_mode"):60111,$S=$i?Symbol.for("react.concurrent_mode"):60111,HS=$i?Symbol.for("react.forward_ref"):60112,zS=$i?Symbol.for("react.suspense"):60113,Bue=$i?Symbol.for("react.suspense_list"):60120,GS=$i?Symbol.for("react.memo"):60115,WS=$i?Symbol.for("react.lazy"):60116,$ue=$i?Symbol.for("react.block"):60121,Hue=$i?Symbol.for("react.fundamental"):60117,zue=$i?Symbol.for("react.responder"):60118,Gue=$i?Symbol.for("react.scope"):60119;function Ua(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case BP:switch(e=e.type,e){case HP:case $S:case jS:case FS:case US:case zS:return e;default:switch(e=e&&e.$$typeof,e){case BS:case HS:case WS:case GS:case VS:return e;default:return t}}case $P:return t}}}function GW(e){return Ua(e)===$S}zr.AsyncMode=HP;zr.ConcurrentMode=$S;zr.ContextConsumer=BS;zr.ContextProvider=VS;zr.Element=BP;zr.ForwardRef=HS;zr.Fragment=jS;zr.Lazy=WS;zr.Memo=GS;zr.Portal=$P;zr.Profiler=FS;zr.StrictMode=US;zr.Suspense=zS;zr.isAsyncMode=function(e){return GW(e)||Ua(e)===HP};zr.isConcurrentMode=GW;zr.isContextConsumer=function(e){return Ua(e)===BS};zr.isContextProvider=function(e){return Ua(e)===VS};zr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===BP};zr.isForwardRef=function(e){return Ua(e)===HS};zr.isFragment=function(e){return Ua(e)===jS};zr.isLazy=function(e){return Ua(e)===WS};zr.isMemo=function(e){return Ua(e)===GS};zr.isPortal=function(e){return Ua(e)===$P};zr.isProfiler=function(e){return Ua(e)===FS};zr.isStrictMode=function(e){return Ua(e)===US};zr.isSuspense=function(e){return Ua(e)===zS};zr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===jS||e===$S||e===FS||e===US||e===zS||e===Bue||typeof e=="object"&&e!==null&&(e.$$typeof===WS||e.$$typeof===GS||e.$$typeof===VS||e.$$typeof===BS||e.$$typeof===HS||e.$$typeof===Hue||e.$$typeof===zue||e.$$typeof===Gue||e.$$typeof===$ue)};zr.typeOf=Ua;zW.exports=zr;var zP=zW.exports,WW=zP,Wue={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Kue={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},KW={};KW[WW.ForwardRef]=Wue;KW[WW.Memo]=Kue;function ki(){return ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ki.apply(this,arguments)}function qW(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var KS=C.createContext(void 0);KS.displayName="FormikContext";KS.Provider;KS.Consumer;function que(){var e=C.useContext(KS);return e}var Ps=function(t){return typeof t=="function"},qS=function(t){return t!==null&&typeof t=="object"},Yue=function(t){return String(Math.floor(Number(t)))===t},oR=function(t){return Object.prototype.toString.call(t)==="[object String]"},aR=function(t){return qS(t)&&Ps(t.then)};function ma(e,t,r,n){n===void 0&&(n=0);for(var i=HW(t);e&&n<i.length;)e=e[i[n++]];return n!==i.length&&!e||e===void 0?r:e}function rh(e,t,r){for(var n=Zj(e),i=n,o=0,a=HW(t);o<a.length-1;o++){var s=a[o],c=ma(e,a.slice(0,o+1));if(c&&(qS(c)||Array.isArray(c)))i=i[s]=Zj(c);else{var l=a[o+1];i=i[s]=Yue(l)&&Number(l)>=0?[]:{}}}return(o===0?e:i)[a[o]]===r?e:(r===void 0?delete i[a[o]]:i[a[o]]=r,o===0&&r===void 0&&delete n[a[o]],n)}function YW(e,t,r,n){r===void 0&&(r=new WeakMap),n===void 0&&(n={});for(var i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=e[a];qS(s)?r.get(s)||(r.set(s,!0),n[a]=Array.isArray(s)?[]:{},YW(s,t,r,n[a])):n[a]=t}return n}function Xue(e,t){switch(t.type){case"SET_VALUES":return ki({},e,{values:t.payload});case"SET_TOUCHED":return ki({},e,{touched:t.payload});case"SET_ERRORS":return Id(e.errors,t.payload)?e:ki({},e,{errors:t.payload});case"SET_STATUS":return ki({},e,{status:t.payload});case"SET_ISSUBMITTING":return ki({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return ki({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return ki({},e,{values:rh(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return ki({},e,{touched:rh(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return ki({},e,{errors:rh(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return ki({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return ki({},e,{touched:YW(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return ki({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return ki({},e,{isSubmitting:!1});default:return e}}var yd={},mE={};function qn(e){var t=e.validateOnChange,r=t===void 0?!0:t,n=e.validateOnBlur,i=n===void 0?!0:n,o=e.validateOnMount,a=o===void 0?!1:o,s=e.isInitialValid,c=e.enableReinitialize,l=c===void 0?!1:c,u=e.onSubmit,d=qW(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),f=ki({validateOnChange:r,validateOnBlur:i,validateOnMount:a,onSubmit:u},d),p=C.useRef(f.initialValues),m=C.useRef(f.initialErrors||yd),g=C.useRef(f.initialTouched||mE),y=C.useRef(f.initialStatus),v=C.useRef(!1),E=C.useRef({});C.useEffect(function(){return v.current=!0,function(){v.current=!1}},[]);var b=C.useState(0),S=b[1],A=C.useRef({values:pE(f.initialValues),errors:pE(f.initialErrors)||yd,touched:pE(f.initialTouched)||mE,status:pE(f.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),N=A.current,D=C.useCallback(function(te){var Ae=A.current;A.current=Xue(Ae,te),Ae!==A.current&&S(function(Ue){return Ue+1})},[]),M=C.useCallback(function(te,Ae){return new Promise(function(Ue,Ge){var ne=f.validate(te,Ae);ne==null?Ue(yd):aR(ne)?ne.then(function(ge){Ue(ge||yd)},function(ge){Ge(ge)}):Ue(ne)})},[f.validate]),H=C.useCallback(function(te,Ae){var Ue=f.validationSchema,Ge=Ps(Ue)?Ue(Ae):Ue,ne=Ae&&Ge.validateAt?Ge.validateAt(Ae,te):Que(te,Ge);return new Promise(function(ge,Xe){ne.then(function(){ge(yd)},function(lt){lt.name==="ValidationError"?ge(Jue(lt)):Xe(lt)})})},[f.validationSchema]),V=C.useCallback(function(te,Ae){return new Promise(function(Ue){return Ue(E.current[te].validate(Ae))})},[]),G=C.useCallback(function(te){var Ae=Object.keys(E.current).filter(function(Ge){return Ps(E.current[Ge].validate)}),Ue=Ae.length>0?Ae.map(function(Ge){return V(Ge,ma(te,Ge))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(Ue).then(function(Ge){return Ge.reduce(function(ne,ge,Xe){return ge==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||ge&&(ne=rh(ne,Ae[Xe],ge)),ne},{})})},[V]),Y=C.useCallback(function(te){return Promise.all([G(te),f.validationSchema?H(te):{},f.validate?M(te):{}]).then(function(Ae){var Ue=Ae[0],Ge=Ae[1],ne=Ae[2],ge=_N.all([Ue,Ge,ne],{arrayMerge:Zue});return ge})},[f.validate,f.validationSchema,G,M,H]),Z=Wa(function(te){return te===void 0&&(te=N.values),D({type:"SET_ISVALIDATING",payload:!0}),Y(te).then(function(Ae){return v.current&&(D({type:"SET_ISVALIDATING",payload:!1}),D({type:"SET_ERRORS",payload:Ae})),Ae})});C.useEffect(function(){a&&v.current===!0&&Id(p.current,f.initialValues)&&Z(p.current)},[a,Z]);var $=C.useCallback(function(te){var Ae=te&&te.values?te.values:p.current,Ue=te&&te.errors?te.errors:m.current?m.current:f.initialErrors||{},Ge=te&&te.touched?te.touched:g.current?g.current:f.initialTouched||{},ne=te&&te.status?te.status:y.current?y.current:f.initialStatus;p.current=Ae,m.current=Ue,g.current=Ge,y.current=ne;var ge=function(){D({type:"RESET_FORM",payload:{isSubmitting:!!te&&!!te.isSubmitting,errors:Ue,touched:Ge,status:ne,values:Ae,isValidating:!!te&&!!te.isValidating,submitCount:te&&te.submitCount&&typeof te.submitCount=="number"?te.submitCount:0}})};if(f.onReset){var Xe=f.onReset(N.values,ot);aR(Xe)?Xe.then(ge):ge()}else ge()},[f.initialErrors,f.initialStatus,f.initialTouched,f.onReset]);C.useEffect(function(){v.current===!0&&!Id(p.current,f.initialValues)&&l&&(p.current=f.initialValues,$(),a&&Z(p.current))},[l,f.initialValues,$,a,Z]),C.useEffect(function(){l&&v.current===!0&&!Id(m.current,f.initialErrors)&&(m.current=f.initialErrors||yd,D({type:"SET_ERRORS",payload:f.initialErrors||yd}))},[l,f.initialErrors]),C.useEffect(function(){l&&v.current===!0&&!Id(g.current,f.initialTouched)&&(g.current=f.initialTouched||mE,D({type:"SET_TOUCHED",payload:f.initialTouched||mE}))},[l,f.initialTouched]),C.useEffect(function(){l&&v.current===!0&&!Id(y.current,f.initialStatus)&&(y.current=f.initialStatus,D({type:"SET_STATUS",payload:f.initialStatus}))},[l,f.initialStatus,f.initialTouched]);var F=Wa(function(te){if(E.current[te]&&Ps(E.current[te].validate)){var Ae=ma(N.values,te),Ue=E.current[te].validate(Ae);return aR(Ue)?(D({type:"SET_ISVALIDATING",payload:!0}),Ue.then(function(Ge){return Ge}).then(function(Ge){D({type:"SET_FIELD_ERROR",payload:{field:te,value:Ge}}),D({type:"SET_ISVALIDATING",payload:!1})})):(D({type:"SET_FIELD_ERROR",payload:{field:te,value:Ue}}),Promise.resolve(Ue))}else if(f.validationSchema)return D({type:"SET_ISVALIDATING",payload:!0}),H(N.values,te).then(function(Ge){return Ge}).then(function(Ge){D({type:"SET_FIELD_ERROR",payload:{field:te,value:ma(Ge,te)}}),D({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),K=C.useCallback(function(te,Ae){var Ue=Ae.validate;E.current[te]={validate:Ue}},[]),k=C.useCallback(function(te){delete E.current[te]},[]),P=Wa(function(te,Ae){D({type:"SET_TOUCHED",payload:te});var Ue=Ae===void 0?i:Ae;return Ue?Z(N.values):Promise.resolve()}),B=C.useCallback(function(te){D({type:"SET_ERRORS",payload:te})},[]),R=Wa(function(te,Ae){var Ue=Ps(te)?te(N.values):te;D({type:"SET_VALUES",payload:Ue});var Ge=Ae===void 0?r:Ae;return Ge?Z(Ue):Promise.resolve()}),_=C.useCallback(function(te,Ae){D({type:"SET_FIELD_ERROR",payload:{field:te,value:Ae}})},[]),x=Wa(function(te,Ae,Ue){D({type:"SET_FIELD_VALUE",payload:{field:te,value:Ae}});var Ge=Ue===void 0?r:Ue;return Ge?Z(rh(N.values,te,Ae)):Promise.resolve()}),T=C.useCallback(function(te,Ae){var Ue=Ae,Ge=te,ne;if(!oR(te)){te.persist&&te.persist();var ge=te.target?te.target:te.currentTarget,Xe=ge.type,lt=ge.name,qt=ge.id,Un=ge.value,Sn=ge.checked,mi=ge.outerHTML,Tn=ge.options,Ai=ge.multiple;Ue=Ae||lt||qt,Ge=/number|range/.test(Xe)?(ne=parseFloat(Un),isNaN(ne)?"":ne):/checkbox/.test(Xe)?tde(ma(N.values,Ue),Sn,Un):Tn&&Ai?ede(Tn):Un}Ue&&x(Ue,Ge)},[x,N.values]),W=Wa(function(te){if(oR(te))return function(Ae){return T(Ae,te)};T(te)}),U=Wa(function(te,Ae,Ue){Ae===void 0&&(Ae=!0),D({type:"SET_FIELD_TOUCHED",payload:{field:te,value:Ae}});var Ge=Ue===void 0?i:Ue;return Ge?Z(N.values):Promise.resolve()}),X=C.useCallback(function(te,Ae){te.persist&&te.persist();var Ue=te.target,Ge=Ue.name,ne=Ue.id,ge=Ue.outerHTML,Xe=Ae||Ge||ne;U(Xe,!0)},[U]),ae=Wa(function(te){if(oR(te))return function(Ae){return X(Ae,te)};X(te)}),de=C.useCallback(function(te){Ps(te)?D({type:"SET_FORMIK_STATE",payload:te}):D({type:"SET_FORMIK_STATE",payload:function(){return te}})},[]),fe=C.useCallback(function(te){D({type:"SET_STATUS",payload:te})},[]),ke=C.useCallback(function(te){D({type:"SET_ISSUBMITTING",payload:te})},[]),Ve=Wa(function(){return D({type:"SUBMIT_ATTEMPT"}),Z().then(function(te){var Ae=te instanceof Error,Ue=!Ae&&Object.keys(te).length===0;if(Ue){var Ge;try{if(Ge=At(),Ge===void 0)return}catch(ne){throw ne}return Promise.resolve(Ge).then(function(ne){return v.current&&D({type:"SUBMIT_SUCCESS"}),ne}).catch(function(ne){if(v.current)throw D({type:"SUBMIT_FAILURE"}),ne})}else if(v.current&&(D({type:"SUBMIT_FAILURE"}),Ae))throw te})}),Me=Wa(function(te){te&&te.preventDefault&&Ps(te.preventDefault)&&te.preventDefault(),te&&te.stopPropagation&&Ps(te.stopPropagation)&&te.stopPropagation(),Ve().catch(function(Ae){console.warn("Warning: An unhandled error was caught from submitForm()",Ae)})}),ot={resetForm:$,validateForm:Z,validateField:F,setErrors:B,setFieldError:_,setFieldTouched:U,setFieldValue:x,setStatus:fe,setSubmitting:ke,setTouched:P,setValues:R,setFormikState:de,submitForm:Ve},At=Wa(function(){return u(N.values,ot)}),et=Wa(function(te){te&&te.preventDefault&&Ps(te.preventDefault)&&te.preventDefault(),te&&te.stopPropagation&&Ps(te.stopPropagation)&&te.stopPropagation(),$()}),Et=C.useCallback(function(te){return{value:ma(N.values,te),error:ma(N.errors,te),touched:!!ma(N.touched,te),initialValue:ma(p.current,te),initialTouched:!!ma(g.current,te),initialError:ma(m.current,te)}},[N.errors,N.touched,N.values]),Ie=C.useCallback(function(te){return{setValue:function(Ue,Ge){return x(te,Ue,Ge)},setTouched:function(Ue,Ge){return U(te,Ue,Ge)},setError:function(Ue){return _(te,Ue)}}},[x,U,_]),rt=C.useCallback(function(te){var Ae=qS(te),Ue=Ae?te.name:te,Ge=ma(N.values,Ue),ne={name:Ue,value:Ge,onChange:W,onBlur:ae};if(Ae){var ge=te.type,Xe=te.value,lt=te.as,qt=te.multiple;ge==="checkbox"?Xe===void 0?ne.checked=!!Ge:(ne.checked=!!(Array.isArray(Ge)&&~Ge.indexOf(Xe)),ne.value=Xe):ge==="radio"?(ne.checked=Ge===Xe,ne.value=Xe):lt==="select"&&qt&&(ne.value=ne.value||[],ne.multiple=!0)}return ne},[ae,W,N.values]),Be=C.useMemo(function(){return!Id(p.current,N.values)},[p.current,N.values]),Qe=C.useMemo(function(){return typeof s<"u"?Be?N.errors&&Object.keys(N.errors).length===0:s!==!1&&Ps(s)?s(f):s:N.errors&&Object.keys(N.errors).length===0},[s,Be,N.errors,f]),Ke=ki({},N,{initialValues:p.current,initialErrors:m.current,initialTouched:g.current,initialStatus:y.current,handleBlur:ae,handleChange:W,handleReset:et,handleSubmit:Me,resetForm:$,setErrors:B,setFormikState:de,setFieldTouched:U,setFieldValue:x,setFieldError:_,setStatus:fe,setSubmitting:ke,setTouched:P,setValues:R,submitForm:Ve,validateForm:Z,validateField:F,isValid:Qe,dirty:Be,unregisterField:k,registerField:K,getFieldProps:rt,getFieldMeta:Et,getFieldHelpers:Ie,validateOnBlur:i,validateOnChange:r,validateOnMount:a});return Ke}function Jue(e){var t={};if(e.inner){if(e.inner.length===0)return rh(t,e.path,e.message);for(var i=e.inner,r=Array.isArray(i),n=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(n>=i.length)break;o=i[n++]}else{if(n=i.next(),n.done)break;o=n.value}var a=o;ma(t,a.path)||(t=rh(t,a.path,a.message))}}return t}function Que(e,t,r,n){r===void 0&&(r=!1);var i=RN(e);return t[r?"validateSync":"validate"](i,{abortEarly:!1,context:i})}function RN(e){var t=Array.isArray(e)?[]:{};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=String(r);Array.isArray(e[n])===!0?t[n]=e[n].map(function(i){return Array.isArray(i)===!0||Aj(i)?RN(i):i!==""?i:void 0}):Aj(e[n])?t[n]=RN(e[n]):t[n]=e[n]!==""?e[n]:void 0}return t}function Zue(e,t,r){var n=e.slice();return t.forEach(function(o,a){if(typeof n[a]>"u"){var s=r.clone!==!1,c=s&&r.isMergeableObject(o);n[a]=c?_N(Array.isArray(o)?[]:{},o,r):o}else r.isMergeableObject(o)?n[a]=_N(e[a],o,r):e.indexOf(o)===-1&&n.push(o)}),n}function ede(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function tde(e,t,r){if(typeof e=="boolean")return!!t;var n=[],i=!1,o=-1;if(Array.isArray(e))n=e,o=e.indexOf(r),i=o>=0;else if(!r||r=="true"||r=="false")return!!t;return t&&r&&!i?n.concat(r):i?n.slice(0,o).concat(n.slice(o+1)):n}var rde=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?C.useLayoutEffect:C.useEffect;function Wa(e){var t=C.useRef(e);return rde(function(){t.current=e}),C.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current.apply(void 0,n)},[])}var nde=C.forwardRef(function(e,t){var r=e.action,n=qW(e,["action"]),i=r??"#",o=que(),a=o.handleReset,s=o.handleSubmit;return C.createElement("form",ki({onSubmit:s,ref:t,onReset:a,action:i},n))});nde.displayName="Form";function Fh(e){this._maxSize=e,this.clear()}Fh.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Fh.prototype.get=function(e){return this._values[e]};Fh.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var ide=/[^.^\]^[]+|(?=\[\]|\.\.)/g,XW=/^\d+$/,ode=/^\d/,ade=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,sde=/^\s*(['"]?)(.*?)(\1)\s*$/,GP=512,rU=new Fh(GP),nU=new Fh(GP),iU=new Fh(GP),nh={Cache:Fh,split:IN,normalizePath:sR,setter:function(e){var t=sR(e);return nU.get(e)||nU.set(e,function(n,i){for(var o=0,a=t.length,s=n;o<a-1;){var c=t[o];if(c==="__proto__"||c==="constructor"||c==="prototype")return n;s=s[t[o++]]}s[t[o]]=i})},getter:function(e,t){var r=sR(e);return iU.get(e)||iU.set(e,function(i){for(var o=0,a=r.length;o<a;)if(i!=null||!t)i=i[r[o++]];else return;return i})},join:function(e){return e.reduce(function(t,r){return t+(WP(r)||XW.test(r)?"["+r+"]":(t?".":"")+r)},"")},forEach:function(e,t,r){cde(Array.isArray(e)?e:IN(e),t,r)}};function sR(e){return rU.get(e)||rU.set(e,IN(e).map(function(t){return t.replace(sde,"$2")}))}function IN(e){return e.match(ide)||[""]}function cde(e,t,r){var n=e.length,i,o,a,s;for(o=0;o<n;o++)i=e[o],i&&(dde(i)&&(i='"'+i+'"'),s=WP(i),a=!s&&/^\d+$/.test(i),t.call(r,i,s,a,o,e))}function WP(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function lde(e){return e.match(ode)&&!e.match(XW)}function ude(e){return ade.test(e)}function dde(e){return!WP(e)&&(lde(e)||ude(e))}const hde=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,YS=e=>e.match(hde)||[],XS=e=>e[0].toUpperCase()+e.slice(1),KP=(e,t)=>YS(e).join(t).toLowerCase(),JW=e=>YS(e).reduce((t,r)=>`${t}${t?r[0].toUpperCase()+r.slice(1).toLowerCase():r.toLowerCase()}`,""),fde=e=>XS(JW(e)),pde=e=>KP(e,"_"),mde=e=>KP(e,"-"),gde=e=>XS(KP(e," ")),yde=e=>YS(e).map(XS).join(" ");var cR={words:YS,upperFirst:XS,camelCase:JW,pascalCase:fde,snakeCase:pde,kebabCase:mde,sentenceCase:gde,titleCase:yde},qP={exports:{}};qP.exports=function(e){return QW(vde(e),e)};qP.exports.array=QW;function QW(e,t){var r=e.length,n=new Array(r),i={},o=r,a=Ede(t),s=_de(e);for(t.forEach(function(l){if(!s.has(l[0])||!s.has(l[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});o--;)i[o]||c(e[o],o,new Set);return n;function c(l,u,d){if(d.has(l)){var f;try{f=", node was:"+JSON.stringify(l)}catch{f=""}throw new Error("Cyclic dependency"+f)}if(!s.has(l))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(l));if(!i[u]){i[u]=!0;var p=a.get(l)||new Set;if(p=Array.from(p),u=p.length){d.add(l);do{var m=p[--u];c(m,s.get(m),d)}while(u);d.delete(l)}n[--r]=l}}}function vde(e){for(var t=new Set,r=0,n=e.length;r<n;r++){var i=e[r];t.add(i[0]),t.add(i[1])}return Array.from(t)}function Ede(e){for(var t=new Map,r=0,n=e.length;r<n;r++){var i=e[r];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}function _de(e){for(var t=new Map,r=0,n=e.length;r<n;r++)t.set(e[r],r);return t}var bde=qP.exports;const wde=ia(bde),Sde=Object.prototype.toString,Tde=Error.prototype.toString,Cde=RegExp.prototype.toString,Rde=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Ide=/^Symbol\((.*)\)(.*)$/;function xde(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function oU(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const r=typeof e;if(r==="number")return xde(e);if(r==="string")return t?`"${e}"`:e;if(r==="function")return"[Function "+(e.name||"anonymous")+"]";if(r==="symbol")return Rde.call(e).replace(Ide,"Symbol($1)");const n=Sde.call(e).slice(8,-1);return n==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):n==="Error"||e instanceof Error?"["+Tde.call(e)+"]":n==="RegExp"?Cde.call(e):null}function El(e,t){let r=oU(e,t);return r!==null?r:JSON.stringify(e,function(n,i){let o=oU(this[n],t);return o!==null?o:i},2)}function ZW(e){return e==null?[]:[].concat(e)}let e9,t9,r9,Ade=/\$\{\s*(\w+)\s*\}/g;e9=Symbol.toStringTag;class aU{constructor(t,r,n,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[e9]="Error",this.name="ValidationError",this.value=r,this.path=n,this.type=i,this.errors=[],this.inner=[],ZW(t).forEach(o=>{if($o.isError(o)){this.errors.push(...o.errors);const a=o.inner.length?o.inner:[o];this.inner.push(...a)}else this.errors.push(o)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}t9=Symbol.hasInstance;r9=Symbol.toStringTag;class $o extends Error{static formatError(t,r){const n=r.label||r.path||"this";return r=Object.assign({},r,{path:n,originalPath:r.path}),typeof t=="string"?t.replace(Ade,(i,o)=>El(r[o])):typeof t=="function"?t(r):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,r,n,i,o){const a=new aU(t,r,n,i);if(o)return a;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[r9]="Error",this.name=a.name,this.message=a.message,this.type=a.type,this.value=a.value,this.path=a.path,this.errors=a.errors,this.inner=a.inner,Error.captureStackTrace&&Error.captureStackTrace(this,$o)}static[t9](t){return aU[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let Ec={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:n})=>{const i=n!=null&&n!==r?` (cast from the value \`${El(n,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${El(r,!0)}\``+i:`${e} must match the configured type. The validated value was: \`${El(r,!0)}\``+i}},Mo={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Nde={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},xN={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},AN={isValue:"${path} field must be ${value}"},V_={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},B_={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},Ode={notType:e=>{const{path:t,value:r,spec:n}=e,i=n.types.length;if(Array.isArray(r)){if(r.length<i)return`${t} tuple value has too few items, expected a length of ${i} but got ${r.length} for value: \`${El(r,!0)}\``;if(r.length>i)return`${t} tuple value has too many items, expected a length of ${i} but got ${r.length} for value: \`${El(r,!0)}\``}return $o.formatError(Ec.notType,e)}};Object.assign(Object.create(null),{mixed:Ec,string:Mo,number:Nde,date:xN,object:V_,array:B_,boolean:AN,tuple:Ode});const JS=e=>e&&e.__isYupSchema__;class Zb{static fromOptions(t,r){if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:i,otherwise:o}=r,a=typeof n=="function"?n:(...s)=>s.every(c=>c===n);return new Zb(t,(s,c)=>{var l;let u=a(...s)?i:o;return(l=u==null?void 0:u(c))!=null?l:c})}constructor(t,r){this.fn=void 0,this.refs=t,this.refs=t,this.fn=r}resolve(t,r){let n=this.refs.map(o=>o.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),i=this.fn(n,t,r);if(i===void 0||i===t)return t;if(!JS(i))throw new TypeError("conditions must return a schema object");return i.resolve(r)}}const gE={context:"$",value:"."};function n9(e,t){return new id(e,t)}class id{constructor(t,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===gE.context,this.isValue=this.key[0]===gE.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?gE.context:this.isValue?gE.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&nh.getter(this.path,!0),this.map=r.map}getValue(t,r,n){let i=this.isContext?n:this.isValue?t:r;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(t,r){return this.getValue(t,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}id.prototype.__isYupRef=!0;const gl=e=>e==null;function hf(e){function t({value:r,path:n="",options:i,originalValue:o,schema:a},s,c){const{name:l,test:u,params:d,message:f,skipAbsent:p}=e;let{parent:m,context:g,abortEarly:y=a.spec.abortEarly,disableStackTrace:v=a.spec.disableStackTrace}=i;function E(G){return id.isRef(G)?G.getValue(r,m,g):G}function b(G={}){const Y=Object.assign({value:r,originalValue:o,label:a.spec.label,path:G.path||n,spec:a.spec,disableStackTrace:G.disableStackTrace||v},d,G.params);for(const $ of Object.keys(Y))Y[$]=E(Y[$]);const Z=new $o($o.formatError(G.message||f,Y),r,Y.path,G.type||l,Y.disableStackTrace);return Z.params=Y,Z}const S=y?s:c;let A={path:n,parent:m,type:l,from:i.from,createError:b,resolve:E,options:i,originalValue:o,schema:a};const N=G=>{$o.isError(G)?S(G):G?c(null):S(b())},D=G=>{$o.isError(G)?S(G):s(G)};if(p&&gl(r))return N(!0);let H;try{var V;if(H=u.call(A,r,A),typeof((V=H)==null?void 0:V.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${A.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(H).then(N,D)}}catch(G){D(G);return}N(H)}return t.OPTIONS=e,t}function kde(e,t,r,n=r){let i,o,a;return t?(nh.forEach(t,(s,c,l)=>{let u=c?s.slice(1,s.length-1):s;e=e.resolve({context:n,parent:i,value:r});let d=e.type==="tuple",f=l?parseInt(u,10):0;if(e.innerType||d){if(d&&!l)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${a}" must contain an index to the tuple element, e.g. "${a}[0]"`);if(r&&f>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${s}, in the path: ${t}. because there is no value at that index. `);i=r,r=r&&r[f],e=d?e.spec.types[f]:e.innerType}if(!l){if(!e.fields||!e.fields[u])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${a} which is a type: "${e.type}")`);i=r,r=r&&r[u],e=e.fields[u]}o=u,a=c?"["+s+"]":"."+s}),{schema:e,parent:i,parentPath:o}):{parent:i,parentPath:t,schema:e}}class ew extends Set{describe(){const t=[];for(const r of this.values())t.push(id.isRef(r)?r.describe():r);return t}resolveAll(t){let r=[];for(const n of this.values())r.push(t(n));return r}clone(){return new ew(this.values())}merge(t,r){const n=this.clone();return t.forEach(i=>n.add(i)),r.forEach(i=>n.delete(i)),n}}function Jf(e,t=new Map){if(JS(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let r;if(e instanceof Date)r=new Date(e.getTime()),t.set(e,r);else if(e instanceof RegExp)r=new RegExp(e),t.set(e,r);else if(Array.isArray(e)){r=new Array(e.length),t.set(e,r);for(let n=0;n<e.length;n++)r[n]=Jf(e[n],t)}else if(e instanceof Map){r=new Map,t.set(e,r);for(const[n,i]of e.entries())r.set(n,Jf(i,t))}else if(e instanceof Set){r=new Set,t.set(e,r);for(const n of e)r.add(Jf(n,t))}else if(e instanceof Object){r={},t.set(e,r);for(const[n,i]of Object.entries(e))r[n]=Jf(i,t)}else throw Error(`Unable to clone ${e}`);return r}let ka=class{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new ew,this._blacklist=new ew,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Ec.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(r=>{r.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeCheck=this._typeCheck,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.internalTests=Object.assign({},this.internalTests),r.exclusiveTests=Object.assign({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=Jf(Object.assign({},this.spec,t)),r}label(t){let r=this.clone();return r.spec.label=t,r}meta(...t){if(t.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},t[0]),r}withMutation(t){let r=this._mutate;this._mutate=!0;let n=t(this);return this._mutate=r,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let r=this,n=t.clone();const i=Object.assign({},r.spec,n.spec);return n.spec=i,n.internalTests=Object.assign({},r.internalTests,n.internalTests),n._whitelist=r._whitelist.merge(t._whitelist,t._blacklist),n._blacklist=r._blacklist.merge(t._blacklist,t._whitelist),n.tests=r.tests,n.exclusiveTests=r.exclusiveTests,n.withMutation(o=>{t.tests.forEach(a=>{o.test(a.OPTIONS)})}),n.transforms=[...r.transforms,...n.transforms],n}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let r=this;if(r.conditions.length){let n=r.conditions;r=r.clone(),r.conditions=[],r=n.reduce((i,o)=>o.resolve(i,t),r),r=r.resolve(t)}return r}resolveOptions(t){var r,n,i,o;return Object.assign({},t,{from:t.from||[],strict:(r=t.strict)!=null?r:this.spec.strict,abortEarly:(n=t.abortEarly)!=null?n:this.spec.abortEarly,recursive:(i=t.recursive)!=null?i:this.spec.recursive,disableStackTrace:(o=t.disableStackTrace)!=null?o:this.spec.disableStackTrace})}cast(t,r={}){let n=this.resolve(Object.assign({value:t},r)),i=r.assert==="ignore-optionality",o=n._cast(t,r);if(r.assert!==!1&&!n.isType(o)){if(i&&gl(o))return o;let a=El(t),s=El(o);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". 

attempted value: ${a} 
`+(s!==a?`result of cast: ${s}`:""))}return o}_cast(t,r){let n=t===void 0?t:this.transforms.reduce((i,o)=>o.call(this,i,t,this),t);return n===void 0&&(n=this.getDefault(r)),n}_validate(t,r={},n,i){let{path:o,originalValue:a=t,strict:s=this.spec.strict}=r,c=t;s||(c=this._cast(c,Object.assign({assert:!1},r)));let l=[];for(let u of Object.values(this.internalTests))u&&l.push(u);this.runTests({path:o,value:c,originalValue:a,options:r,tests:l},n,u=>{if(u.length)return i(u,c);this.runTests({path:o,value:c,originalValue:a,options:r,tests:this.tests},n,i)})}runTests(t,r,n){let i=!1,{tests:o,value:a,originalValue:s,path:c,options:l}=t,u=g=>{i||(i=!0,r(g,a))},d=g=>{i||(i=!0,n(g,a))},f=o.length,p=[];if(!f)return d([]);let m={value:a,originalValue:s,path:c,options:l,schema:this};for(let g=0;g<o.length;g++){const y=o[g];y(m,u,function(E){E&&(Array.isArray(E)?p.push(...E):p.push(E)),--f<=0&&d(p)})}}asNestedTest({key:t,index:r,parent:n,parentPath:i,originalParent:o,options:a}){const s=t??r;if(s==null)throw TypeError("Must include `key` or `index` for nested validations");const c=typeof s=="number";let l=n[s];const u=Object.assign({},a,{strict:!0,parent:n,value:l,originalValue:o[s],key:void 0,[c?"index":"key"]:s,path:c||s.includes(".")?`${i||""}[${c?s:`"${s}"`}]`:(i?`${i}.`:"")+t});return(d,f,p)=>this.resolve(u)._validate(l,u,f,p)}validate(t,r){var n;let i=this.resolve(Object.assign({},r,{value:t})),o=(n=r==null?void 0:r.disableStackTrace)!=null?n:i.spec.disableStackTrace;return new Promise((a,s)=>i._validate(t,r,(c,l)=>{$o.isError(c)&&(c.value=l),s(c)},(c,l)=>{c.length?s(new $o(c,l,void 0,void 0,o)):a(l)}))}validateSync(t,r){var n;let i=this.resolve(Object.assign({},r,{value:t})),o,a=(n=r==null?void 0:r.disableStackTrace)!=null?n:i.spec.disableStackTrace;return i._validate(t,Object.assign({},r,{sync:!0}),(s,c)=>{throw $o.isError(s)&&(s.value=c),s},(s,c)=>{if(s.length)throw new $o(s,t,void 0,void 0,a);o=c}),o}isValid(t,r){return this.validate(t,r).then(()=>!0,n=>{if($o.isError(n))return!1;throw n})}isValidSync(t,r){try{return this.validateSync(t,r),!0}catch(n){if($o.isError(n))return!1;throw n}}_getDefault(t){let r=this.spec.default;return r==null?r:typeof r=="function"?r.call(this,t):Jf(r)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,r){const n=this.clone({nullable:t});return n.internalTests.nullable=hf({message:r,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),n}optionality(t,r){const n=this.clone({optional:t});return n.internalTests.optionality=hf({message:r,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),n}optional(){return this.optionality(!0)}defined(t=Ec.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=Ec.notNull){return this.nullability(!1,t)}required(t=Ec.required){return this.clone().withMutation(r=>r.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let r=this.clone();return r.transforms.push(t),r}test(...t){let r;if(t.length===1?typeof t[0]=="function"?r={test:t[0]}:r=t[0]:t.length===2?r={name:t[0],test:t[1]}:r={name:t[0],message:t[1],test:t[2]},r.message===void 0&&(r.message=Ec.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),i=hf(r),o=r.exclusive||r.name&&n.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(n.exclusiveTests[r.name]=!!r.exclusive),n.tests=n.tests.filter(a=>!(a.OPTIONS.name===r.name&&(o||a.OPTIONS.test===i.OPTIONS.test))),n.tests.push(i),n}when(t,r){!Array.isArray(t)&&typeof t!="string"&&(r=t,t=".");let n=this.clone(),i=ZW(t).map(o=>new id(o));return i.forEach(o=>{o.isSibling&&n.deps.push(o.key)}),n.conditions.push(typeof r=="function"?new Zb(i,r):Zb.fromOptions(i,r)),n}typeError(t){let r=this.clone();return r.internalTests.typeError=hf({message:t,name:"typeError",skipAbsent:!0,test(n){return this.schema._typeCheck(n)?!0:this.createError({params:{type:this.schema.type}})}}),r}oneOf(t,r=Ec.oneOf){let n=this.clone();return t.forEach(i=>{n._whitelist.add(i),n._blacklist.delete(i)}),n.internalTests.whiteList=hf({message:r,name:"oneOf",skipAbsent:!0,test(i){let o=this.schema._whitelist,a=o.resolveAll(this.resolve);return a.includes(i)?!0:this.createError({params:{values:Array.from(o).join(", "),resolved:a}})}}),n}notOneOf(t,r=Ec.notOneOf){let n=this.clone();return t.forEach(i=>{n._blacklist.add(i),n._whitelist.delete(i)}),n.internalTests.blacklist=hf({message:r,name:"notOneOf",test(i){let o=this.schema._blacklist,a=o.resolveAll(this.resolve);return a.includes(i)?this.createError({params:{values:Array.from(o).join(", "),resolved:a}}):!0}}),n}strip(t=!0){let r=this.clone();return r.spec.strip=t,r}describe(t){const r=(t?this.resolve(t):this).clone(),{label:n,meta:i,optional:o,nullable:a}=r.spec;return{meta:i,label:n,optional:o,nullable:a,default:r.getDefault(t),type:r.type,oneOf:r._whitelist.describe(),notOneOf:r._blacklist.describe(),tests:r.tests.map(c=>({name:c.OPTIONS.name,params:c.OPTIONS.params})).filter((c,l,u)=>u.findIndex(d=>d.name===c.name)===l)}}};ka.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])ka.prototype[`${e}At`]=function(t,r,n={}){const{parent:i,parentPath:o,schema:a}=kde(this,t,r,n.context);return a[e](i&&i[o],Object.assign({},n,{parent:i,path:t}))};for(const e of["equals","is"])ka.prototype[e]=ka.prototype.oneOf;for(const e of["not","nope"])ka.prototype[e]=ka.prototype.notOneOf;const Pde=()=>!0;function i9(e){return new o9(e)}class o9 extends ka{constructor(t){super(typeof t=="function"?{type:"mixed",check:t}:Object.assign({type:"mixed",check:Pde},t))}}i9.prototype=o9.prototype;function NN(){return new a9}class a9 extends ka{constructor(){super({type:"boolean",check(t){return t instanceof Boolean&&(t=t.valueOf()),typeof t=="boolean"}}),this.withMutation(()=>{this.transform((t,r,n)=>{if(n.spec.coerce&&!n.isType(t)){if(/^(true|1)$/i.test(String(t)))return!0;if(/^(false|0)$/i.test(String(t)))return!1}return t})})}isTrue(t=AN.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"true"},test(r){return gl(r)||r===!0}})}isFalse(t=AN.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"false"},test(r){return gl(r)||r===!1}})}default(t){return super.default(t)}defined(t){return super.defined(t)}optional(){return super.optional()}required(t){return super.required(t)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(t){return super.nonNullable(t)}strip(t){return super.strip(t)}}NN.prototype=a9.prototype;const Dde=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Lde(e){const t=ON(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let r=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(r=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(r=0-r)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+r,t.second,t.millisecond)}function ON(e){var t,r;const n=Dde.exec(e);return n?{year:Xc(n[1]),month:Xc(n[2],1)-1,day:Xc(n[3],1),hour:Xc(n[4]),minute:Xc(n[5]),second:Xc(n[6]),millisecond:n[7]?Xc(n[7].substring(0,3)):0,precision:(t=(r=n[7])==null?void 0:r.length)!=null?t:void 0,z:n[8]||void 0,plusMinus:n[9]||void 0,hourOffset:Xc(n[10]),minuteOffset:Xc(n[11])}:null}function Xc(e,t=0){return Number(e)||t}let Mde=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,jde=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Ude=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Fde="^\\d{4}-\\d{2}-\\d{2}",Vde="\\d{2}:\\d{2}:\\d{2}",Bde="(([+-]\\d{2}(:?\\d{2})?)|Z)",$de=new RegExp(`${Fde}T${Vde}(\\.\\d+)?${Bde}$`),Hde=e=>gl(e)||e===e.trim(),zde={}.toString();function jt(){return new s9}class s9 extends ka{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,r,n)=>{if(!n.spec.coerce||n.isType(t)||Array.isArray(t))return t;const i=t!=null&&t.toString?t.toString():t;return i===zde?t:i})})}required(t){return super.required(t).withMutation(r=>r.test({message:t||Ec.required,name:"required",skipAbsent:!0,test:n=>!!n.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(r=>r.OPTIONS.name!=="required"),t))}length(t,r=Mo.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(n){return n.length===this.resolve(t)}})}min(t,r=Mo.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(n){return n.length>=this.resolve(t)}})}max(t,r=Mo.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:t},skipAbsent:!0,test(n){return n.length<=this.resolve(t)}})}matches(t,r){let n=!1,i,o;return r&&(typeof r=="object"?{excludeEmptyString:n=!1,message:i,name:o}=r:i=r),this.test({name:o||"matches",message:i||Mo.matches,params:{regex:t},skipAbsent:!0,test:a=>a===""&&n||a.search(t)!==-1})}email(t=Mo.email){return this.matches(Mde,{name:"email",message:t,excludeEmptyString:!0})}url(t=Mo.url){return this.matches(jde,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=Mo.uuid){return this.matches(Ude,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let r="",n,i;return t&&(typeof t=="object"?{message:r="",allowOffset:n=!1,precision:i=void 0}=t:r=t),this.matches($de,{name:"datetime",message:r||Mo.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||Mo.datetime_offset,params:{allowOffset:n},skipAbsent:!0,test:o=>{if(!o||n)return!0;const a=ON(o);return a?!!a.z:!1}}).test({name:"datetime_precision",message:r||Mo.datetime_precision,params:{precision:i},skipAbsent:!0,test:o=>{if(!o||i==null)return!0;const a=ON(o);return a?a.precision===i:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=Mo.trim){return this.transform(r=>r!=null?r.trim():r).test({message:t,name:"trim",test:Hde})}lowercase(t=Mo.lowercase){return this.transform(r=>gl(r)?r:r.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>gl(r)||r===r.toLowerCase()})}uppercase(t=Mo.uppercase){return this.transform(r=>gl(r)?r:r.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>gl(r)||r===r.toUpperCase()})}}jt.prototype=s9.prototype;let Gde=new Date(""),Wde=e=>Object.prototype.toString.call(e)==="[object Date]";class QS extends ka{constructor(){super({type:"date",check(t){return Wde(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,r,n)=>!n.spec.coerce||n.isType(t)||t===null?t:(t=Lde(t),isNaN(t)?QS.INVALID_DATE:new Date(t)))})}prepareParam(t,r){let n;if(id.isRef(t))n=t;else{let i=this.cast(t);if(!this._typeCheck(i))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);n=i}return n}min(t,r=xN.min){let n=this.prepareParam(t,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(i){return i>=this.resolve(n)}})}max(t,r=xN.max){let n=this.prepareParam(t,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(i){return i<=this.resolve(n)}})}}QS.INVALID_DATE=Gde;QS.prototype;function Kde(e,t=[]){let r=[],n=new Set,i=new Set(t.map(([a,s])=>`${a}-${s}`));function o(a,s){let c=nh.split(a)[0];n.add(c),i.has(`${s}-${c}`)||r.push([s,c])}for(const a of Object.keys(e)){let s=e[a];n.add(a),id.isRef(s)&&s.isSibling?o(s.path,a):JS(s)&&"deps"in s&&s.deps.forEach(c=>o(c,a))}return wde.array(Array.from(n),r).reverse()}function sU(e,t){let r=1/0;return e.some((n,i)=>{var o;if((o=t.path)!=null&&o.includes(n))return r=i,!0}),r}function c9(e){return(t,r)=>sU(e,t)-sU(e,r)}const l9=(e,t,r)=>{if(typeof e!="string")return e;let n=e;try{n=JSON.parse(e)}catch{}return r.isType(n)?n:e};function $_(e){if("fields"in e){const t={};for(const[r,n]of Object.entries(e.fields))t[r]=$_(n);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=$_(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map($_)}):"optional"in e?e.optional():e}const qde=(e,t)=>{const r=[...nh.normalizePath(t)];if(r.length===1)return r[0]in e;let n=r.pop(),i=nh.getter(nh.join(r),!0)(e);return!!(i&&n in i)};let cU=e=>Object.prototype.toString.call(e)==="[object Object]";function lU(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(n=>r.indexOf(n)===-1)}const Yde=c9([]);function Ii(e){return new u9(e)}class u9 extends ka{constructor(t){super({type:"object",check(r){return cU(r)||typeof r=="function"}}),this.fields=Object.create(null),this._sortErrors=Yde,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,r={}){var n;let i=super._cast(t,r);if(i===void 0)return this.getDefault(r);if(!this._typeCheck(i))return i;let o=this.fields,a=(n=r.stripUnknown)!=null?n:this.spec.noUnknown,s=[].concat(this._nodes,Object.keys(i).filter(d=>!this._nodes.includes(d))),c={},l=Object.assign({},r,{parent:c,__validating:r.__validating||!1}),u=!1;for(const d of s){let f=o[d],p=d in i;if(f){let m,g=i[d];l.path=(r.path?`${r.path}.`:"")+d,f=f.resolve({value:g,context:r.context,parent:c});let y=f instanceof ka?f.spec:void 0,v=y==null?void 0:y.strict;if(y!=null&&y.strip){u=u||d in i;continue}m=!r.__validating||!v?f.cast(i[d],l):i[d],m!==void 0&&(c[d]=m)}else p&&!a&&(c[d]=i[d]);(p!==d in c||c[d]!==i[d])&&(u=!0)}return u?c:i}_validate(t,r={},n,i){let{from:o=[],originalValue:a=t,recursive:s=this.spec.recursive}=r;r.from=[{schema:this,value:a},...o],r.__validating=!0,r.originalValue=a,super._validate(t,r,n,(c,l)=>{if(!s||!cU(l)){i(c,l);return}a=a||l;let u=[];for(let d of this._nodes){let f=this.fields[d];!f||id.isRef(f)||u.push(f.asNestedTest({options:r,key:d,parent:l,parentPath:r.path,originalParent:a}))}this.runTests({tests:u,value:l,originalValue:a,options:r},n,d=>{i(d.sort(this._sortErrors).concat(c),l)})})}clone(t){const r=super.clone(t);return r.fields=Object.assign({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(t){let r=super.concat(t),n=r.fields;for(let[i,o]of Object.entries(this.fields)){const a=n[i];n[i]=a===void 0?o:a}return r.withMutation(i=>i.setFields(n,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let r={};return this._nodes.forEach(n=>{var i;const o=this.fields[n];let a=t;(i=a)!=null&&i.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[n]})),r[n]=o&&"getDefault"in o?o.getDefault(a):void 0}),r}setFields(t,r){let n=this.clone();return n.fields=t,n._nodes=Kde(t,r),n._sortErrors=c9(Object.keys(t)),r&&(n._excludedEdges=r),n}shape(t,r=[]){return this.clone().withMutation(n=>{let i=n._excludedEdges;return r.length&&(Array.isArray(r[0])||(r=[r]),i=[...n._excludedEdges,...r]),n.setFields(Object.assign(n.fields,t),i)})}partial(){const t={};for(const[r,n]of Object.entries(this.fields))t[r]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(t)}deepPartial(){return $_(this)}pick(t){const r={};for(const n of t)this.fields[n]&&(r[n]=this.fields[n]);return this.setFields(r,this._excludedEdges.filter(([n,i])=>t.includes(n)&&t.includes(i)))}omit(t){const r=[];for(const n of Object.keys(this.fields))t.includes(n)||r.push(n);return this.pick(r)}from(t,r,n){let i=nh.getter(t,!0);return this.transform(o=>{if(!o)return o;let a=o;return qde(o,t)&&(a=Object.assign({},o),n||delete a[t],a[r]=i(o)),a})}json(){return this.transform(l9)}exact(t){return this.test({name:"exact",exclusive:!0,message:t||V_.exact,test(r){if(r==null)return!0;const n=lU(this.schema,r);return n.length===0||this.createError({params:{properties:n.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(t=!0,r=V_.noUnknown){typeof t!="boolean"&&(r=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:r,test(i){if(i==null)return!0;const o=lU(this.schema,i);return!t||o.length===0||this.createError({params:{unknown:o.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,r=V_.noUnknown){return this.noUnknown(!t,r)}transformKeys(t){return this.transform(r=>{if(!r)return r;const n={};for(const i of Object.keys(r))n[t(i)]=r[i];return n})}camelCase(){return this.transformKeys(cR.camelCase)}snakeCase(){return this.transformKeys(cR.snakeCase)}constantCase(){return this.transformKeys(t=>cR.snakeCase(t).toUpperCase())}describe(t){const r=(t?this.resolve(t):this).clone(),n=super.describe(t);n.fields={};for(const[o,a]of Object.entries(r.fields)){var i;let s=t;(i=s)!=null&&i.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[o]})),n.fields[o]=a.describe(s)}return n}}Ii.prototype=u9.prototype;function d9(e){return new h9(e)}class h9 extends ka{constructor(t){super({type:"array",spec:{types:t},check(r){return Array.isArray(r)}}),this.innerType=void 0,this.innerType=t}_cast(t,r){const n=super._cast(t,r);if(!this._typeCheck(n)||!this.innerType)return n;let i=!1;const o=n.map((a,s)=>{const c=this.innerType.cast(a,Object.assign({},r,{path:`${r.path||""}[${s}]`}));return c!==a&&(i=!0),c});return i?o:n}_validate(t,r={},n,i){var o;let a=this.innerType,s=(o=r.recursive)!=null?o:this.spec.recursive;r.originalValue!=null&&r.originalValue,super._validate(t,r,n,(c,l)=>{var u;if(!s||!a||!this._typeCheck(l)){i(c,l);return}let d=new Array(l.length);for(let p=0;p<l.length;p++){var f;d[p]=a.asNestedTest({options:r,index:p,parent:l,parentPath:r.path,originalParent:(f=r.originalValue)!=null?f:t})}this.runTests({value:l,tests:d,originalValue:(u=r.originalValue)!=null?u:t,options:r},n,p=>i(p.concat(c),l))})}clone(t){const r=super.clone(t);return r.innerType=this.innerType,r}json(){return this.transform(l9)}concat(t){let r=super.concat(t);return r.innerType=this.innerType,t.innerType&&(r.innerType=r.innerType?r.innerType.concat(t.innerType):t.innerType),r}of(t){let r=this.clone();if(!JS(t))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+El(t));return r.innerType=t,r.spec=Object.assign({},r.spec,{types:t}),r}length(t,r=B_.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(n){return n.length===this.resolve(t)}})}min(t,r){return r=r||B_.min,this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(n){return n.length>=this.resolve(t)}})}max(t,r){return r=r||B_.max,this.test({message:r,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(n){return n.length<=this.resolve(t)}})}ensure(){return this.default(()=>[]).transform((t,r)=>this._typeCheck(t)?t:r==null?[]:[].concat(r))}compact(t){let r=t?(n,i,o)=>!t(n,i,o):n=>!!n;return this.transform(n=>n!=null?n.filter(r):n)}describe(t){const r=(t?this.resolve(t):this).clone(),n=super.describe(t);if(r.innerType){var i;let o=t;(i=o)!=null&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[0]})),n.innerType=r.innerType.describe(o)}return n}}d9.prototype=h9.prototype;const Xde=Ii().shape({username:jt().required("shouldn't be left empty").min(5,"minimum of 5 letters"),password:jt().required("Required").min(2,"shouldn't be less than 8")});function f9(e,t){return function(){return e.apply(t,arguments)}}const{toString:Jde}=Object.prototype,{getPrototypeOf:YP}=Object,ZS=(e=>t=>{const r=Jde.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Qs=e=>(e=e.toLowerCase(),t=>ZS(t)===e),eT=e=>t=>typeof t===e,{isArray:bm}=Array,c0=eT("undefined");function Qde(e){return e!==null&&!c0(e)&&e.constructor!==null&&!c0(e.constructor)&&Na(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const p9=Qs("ArrayBuffer");function Zde(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&p9(e.buffer),t}const ehe=eT("string"),Na=eT("function"),m9=eT("number"),tT=e=>e!==null&&typeof e=="object",the=e=>e===!0||e===!1,H_=e=>{if(ZS(e)!=="object")return!1;const t=YP(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},rhe=Qs("Date"),nhe=Qs("File"),ihe=Qs("Blob"),ohe=Qs("FileList"),ahe=e=>tT(e)&&Na(e.pipe),she=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Na(e.append)&&((t=ZS(e))==="formdata"||t==="object"&&Na(e.toString)&&e.toString()==="[object FormData]"))},che=Qs("URLSearchParams"),[lhe,uhe,dhe,hhe]=["ReadableStream","Request","Response","Headers"].map(Qs),fhe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tv(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),bm(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let s;for(n=0;n<a;n++)s=o[n],t.call(null,e[s],s,e)}}function g9(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const zd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,y9=e=>!c0(e)&&e!==zd;function kN(){const{caseless:e}=y9(this)&&this||{},t={},r=(n,i)=>{const o=e&&g9(t,i)||i;H_(t[o])&&H_(n)?t[o]=kN(t[o],n):H_(n)?t[o]=kN({},n):bm(n)?t[o]=n.slice():t[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&tv(arguments[n],r);return t}const phe=(e,t,r,{allOwnKeys:n}={})=>(tv(t,(i,o)=>{r&&Na(i)?e[o]=f9(i,r):e[o]=i},{allOwnKeys:n}),e),mhe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ghe=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},yhe=(e,t,r,n)=>{let i,o,a;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],(!n||n(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=r!==!1&&YP(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},vhe=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Ehe=e=>{if(!e)return null;if(bm(e))return e;let t=e.length;if(!m9(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},_he=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&YP(Uint8Array)),bhe=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},whe=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},She=Qs("HTMLFormElement"),The=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),uU=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Che=Qs("RegExp"),v9=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};tv(r,(i,o)=>{let a;(a=t(i,o,e))!==!1&&(n[o]=a||i)}),Object.defineProperties(e,n)},Rhe=e=>{v9(e,(t,r)=>{if(Na(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Na(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Ihe=(e,t)=>{const r={},n=i=>{i.forEach(o=>{r[o]=!0})};return bm(e)?n(e):n(String(e).split(t)),r},xhe=()=>{},Ahe=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,lR="abcdefghijklmnopqrstuvwxyz",dU="0123456789",E9={DIGIT:dU,ALPHA:lR,ALPHA_DIGIT:lR+lR.toUpperCase()+dU},Nhe=(e=16,t=E9.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function Ohe(e){return!!(e&&Na(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const khe=e=>{const t=new Array(10),r=(n,i)=>{if(tT(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const o=bm(n)?[]:{};return tv(n,(a,s)=>{const c=r(a,i+1);!c0(c)&&(o[s]=c)}),t[i]=void 0,o}}return n};return r(e,0)},Phe=Qs("AsyncFunction"),Dhe=e=>e&&(tT(e)||Na(e))&&Na(e.then)&&Na(e.catch),_9=((e,t)=>e?setImmediate:t?((r,n)=>(zd.addEventListener("message",({source:i,data:o})=>{i===zd&&o===r&&n.length&&n.shift()()},!1),i=>{n.push(i),zd.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Na(zd.postMessage)),Lhe=typeof queueMicrotask<"u"?queueMicrotask.bind(zd):typeof process<"u"&&process.nextTick||_9,ue={isArray:bm,isArrayBuffer:p9,isBuffer:Qde,isFormData:she,isArrayBufferView:Zde,isString:ehe,isNumber:m9,isBoolean:the,isObject:tT,isPlainObject:H_,isReadableStream:lhe,isRequest:uhe,isResponse:dhe,isHeaders:hhe,isUndefined:c0,isDate:rhe,isFile:nhe,isBlob:ihe,isRegExp:Che,isFunction:Na,isStream:ahe,isURLSearchParams:che,isTypedArray:_he,isFileList:ohe,forEach:tv,merge:kN,extend:phe,trim:fhe,stripBOM:mhe,inherits:ghe,toFlatObject:yhe,kindOf:ZS,kindOfTest:Qs,endsWith:vhe,toArray:Ehe,forEachEntry:bhe,matchAll:whe,isHTMLForm:She,hasOwnProperty:uU,hasOwnProp:uU,reduceDescriptors:v9,freezeMethods:Rhe,toObjectSet:Ihe,toCamelCase:The,noop:xhe,toFiniteNumber:Ahe,findKey:g9,global:zd,isContextDefined:y9,ALPHABET:E9,generateString:Nhe,isSpecCompliantForm:Ohe,toJSONObject:khe,isAsyncFn:Phe,isThenable:Dhe,setImmediate:_9,asap:Lhe};function Kt(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}ue.inherits(Kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.status}}});const b9=Kt.prototype,w9={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{w9[e]={value:e}});Object.defineProperties(Kt,w9);Object.defineProperty(b9,"isAxiosError",{value:!0});Kt.from=(e,t,r,n,i,o)=>{const a=Object.create(b9);return ue.toFlatObject(e,a,function(c){return c!==Error.prototype},s=>s!=="isAxiosError"),Kt.call(a,e.message,t,r,n,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const Mhe=null;function PN(e){return ue.isPlainObject(e)||ue.isArray(e)}function S9(e){return ue.endsWith(e,"[]")?e.slice(0,-2):e}function hU(e,t,r){return e?e.concat(t).map(function(i,o){return i=S9(i),!r&&o?"["+i+"]":i}).join(r?".":""):t}function jhe(e){return ue.isArray(e)&&!e.some(PN)}const Uhe=ue.toFlatObject(ue,{},null,function(t){return/^is[A-Z]/.test(t)});function rT(e,t,r){if(!ue.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=ue.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!ue.isUndefined(y[g])});const n=r.metaTokens,i=r.visitor||u,o=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&ue.isSpecCompliantForm(t);if(!ue.isFunction(i))throw new TypeError("visitor must be a function");function l(m){if(m===null)return"";if(ue.isDate(m))return m.toISOString();if(!c&&ue.isBlob(m))throw new Kt("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(m)||ue.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,g,y){let v=m;if(m&&!y&&typeof m=="object"){if(ue.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(ue.isArray(m)&&jhe(m)||(ue.isFileList(m)||ue.endsWith(g,"[]"))&&(v=ue.toArray(m)))return g=S9(g),v.forEach(function(b,S){!(ue.isUndefined(b)||b===null)&&t.append(a===!0?hU([g],S,o):a===null?g:g+"[]",l(b))}),!1}return PN(m)?!0:(t.append(hU(y,g,o),l(m)),!1)}const d=[],f=Object.assign(Uhe,{defaultVisitor:u,convertValue:l,isVisitable:PN});function p(m,g){if(!ue.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(m),ue.forEach(m,function(v,E){(!(ue.isUndefined(v)||v===null)&&i.call(t,v,ue.isString(E)?E.trim():E,g,f))===!0&&p(v,g?g.concat(E):[E])}),d.pop()}}if(!ue.isObject(e))throw new TypeError("data must be an object");return p(e),t}function fU(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function XP(e,t){this._pairs=[],e&&rT(e,this,t)}const T9=XP.prototype;T9.append=function(t,r){this._pairs.push([t,r])};T9.toString=function(t){const r=t?function(n){return t.call(this,n,fU)}:fU;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Fhe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function C9(e,t,r){if(!t)return e;const n=r&&r.encode||Fhe;ue.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let o;if(i?o=i(t,r):o=ue.isURLSearchParams(t)?t.toString():new XP(t,r).toString(n),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class pU{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ue.forEach(this.handlers,function(n){n!==null&&t(n)})}}const R9={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Vhe=typeof URLSearchParams<"u"?URLSearchParams:XP,Bhe=typeof FormData<"u"?FormData:null,$he=typeof Blob<"u"?Blob:null,Hhe={isBrowser:!0,classes:{URLSearchParams:Vhe,FormData:Bhe,Blob:$he},protocols:["http","https","file","blob","url","data"]},JP=typeof window<"u"&&typeof document<"u",DN=typeof navigator=="object"&&navigator||void 0,zhe=JP&&(!DN||["ReactNative","NativeScript","NS"].indexOf(DN.product)<0),Ghe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Whe=JP&&window.location.href||"http://localhost",Khe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:JP,hasStandardBrowserEnv:zhe,hasStandardBrowserWebWorkerEnv:Ghe,navigator:DN,origin:Whe},Symbol.toStringTag,{value:"Module"})),ho={...Khe,...Hhe};function qhe(e,t){return rT(e,new ho.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,o){return ho.isNode&&ue.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function Yhe(e){return ue.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Xhe(e){const t={},r=Object.keys(e);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}function I9(e){function t(r,n,i,o){let a=r[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),c=o>=r.length;return a=!a&&ue.isArray(i)?i.length:a,c?(ue.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!s):((!i[a]||!ue.isObject(i[a]))&&(i[a]=[]),t(r,n,i[a],o)&&ue.isArray(i[a])&&(i[a]=Xhe(i[a])),!s)}if(ue.isFormData(e)&&ue.isFunction(e.entries)){const r={};return ue.forEachEntry(e,(n,i)=>{t(Yhe(n),i,r,0)}),r}return null}function Jhe(e,t,r){if(ue.isString(e))try{return(t||JSON.parse)(e),ue.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}const rv={transitional:R9,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,o=ue.isObject(t);if(o&&ue.isHTMLForm(t)&&(t=new FormData(t)),ue.isFormData(t))return i?JSON.stringify(I9(t)):t;if(ue.isArrayBuffer(t)||ue.isBuffer(t)||ue.isStream(t)||ue.isFile(t)||ue.isBlob(t)||ue.isReadableStream(t))return t;if(ue.isArrayBufferView(t))return t.buffer;if(ue.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return qhe(t,this.formSerializer).toString();if((s=ue.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return rT(s?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),Jhe(t)):t}],transformResponse:[function(t){const r=this.transitional||rv.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(ue.isResponse(t)||ue.isReadableStream(t))return t;if(t&&ue.isString(t)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?Kt.from(s,Kt.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ho.classes.FormData,Blob:ho.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],e=>{rv.headers[e]={}});const Qhe=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Zhe=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||t[r]&&Qhe[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},mU=Symbol("internals");function gg(e){return e&&String(e).trim().toLowerCase()}function z_(e){return e===!1||e==null?e:ue.isArray(e)?e.map(z_):String(e)}function efe(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const tfe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function uR(e,t,r,n,i){if(ue.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!ue.isString(t)){if(ue.isString(n))return t.indexOf(n)!==-1;if(ue.isRegExp(n))return n.test(t)}}function rfe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function nfe(e,t){const r=ue.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,o,a){return this[n].call(this,t,i,o,a)},configurable:!0})})}class Qo{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function o(s,c,l){const u=gg(c);if(!u)throw new Error("header name must be a non-empty string");const d=ue.findKey(i,u);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||c]=z_(s))}const a=(s,c)=>ue.forEach(s,(l,u)=>o(l,u,c));if(ue.isPlainObject(t)||t instanceof this.constructor)a(t,r);else if(ue.isString(t)&&(t=t.trim())&&!tfe(t))a(Zhe(t),r);else if(ue.isHeaders(t))for(const[s,c]of t.entries())o(c,s,n);else t!=null&&o(r,t,n);return this}get(t,r){if(t=gg(t),t){const n=ue.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return efe(i);if(ue.isFunction(r))return r.call(this,i,n);if(ue.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=gg(t),t){const n=ue.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||uR(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function o(a){if(a=gg(a),a){const s=ue.findKey(n,a);s&&(!r||uR(n,n[s],s,r))&&(delete n[s],i=!0)}}return ue.isArray(t)?t.forEach(o):o(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const o=r[n];(!t||uR(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const r=this,n={};return ue.forEach(this,(i,o)=>{const a=ue.findKey(n,o);if(a){r[a]=z_(i),delete r[o];return}const s=t?rfe(o):String(o).trim();s!==o&&delete r[o],r[s]=z_(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return ue.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&ue.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[mU]=this[mU]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=gg(a);n[s]||(nfe(i,a),n[s]=!0)}return ue.isArray(t)?t.forEach(o):o(t),this}}Qo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ue.reduceDescriptors(Qo.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});ue.freezeMethods(Qo);function dR(e,t){const r=this||rv,n=t||r,i=Qo.from(n.headers);let o=n.data;return ue.forEach(e,function(s){o=s.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function x9(e){return!!(e&&e.__CANCEL__)}function wm(e,t,r){Kt.call(this,e??"canceled",Kt.ERR_CANCELED,t,r),this.name="CanceledError"}ue.inherits(wm,Kt,{__CANCEL__:!0});function A9(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Kt("Request failed with status code "+r.status,[Kt.ERR_BAD_REQUEST,Kt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function ife(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ofe(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,o=0,a;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=n[o];a||(a=l),r[i]=c,n[i]=l;let d=o,f=0;for(;d!==i;)f+=r[d++],d=d%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),l-a<t)return;const p=u&&l-u;return p?Math.round(f*1e3/p):void 0}}function afe(e,t){let r=0,n=1e3/t,i,o;const a=(l,u=Date.now())=>{r=u,i=null,o&&(clearTimeout(o),o=null),e.apply(null,l)};return[(...l)=>{const u=Date.now(),d=u-r;d>=n?a(l,u):(i=l,o||(o=setTimeout(()=>{o=null,a(i)},n-d)))},()=>i&&a(i)]}const tw=(e,t,r=3)=>{let n=0;const i=ofe(50,250);return afe(o=>{const a=o.loaded,s=o.lengthComputable?o.total:void 0,c=a-n,l=i(c),u=a<=s;n=a;const d={loaded:a,total:s,progress:s?a/s:void 0,bytes:c,rate:l||void 0,estimated:l&&s&&u?(s-a)/l:void 0,event:o,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(d)},r)},gU=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},yU=e=>(...t)=>ue.asap(()=>e(...t)),sfe=ho.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ho.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ho.origin),ho.navigator&&/(msie|trident)/i.test(ho.navigator.userAgent)):()=>!0,cfe=ho.hasStandardBrowserEnv?{write(e,t,r,n,i,o){const a=[e+"="+encodeURIComponent(t)];ue.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),ue.isString(n)&&a.push("path="+n),ue.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function lfe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ufe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function N9(e,t){return e&&!lfe(t)?ufe(e,t):t}const vU=e=>e instanceof Qo?{...e}:e;function Eh(e,t){t=t||{};const r={};function n(l,u,d,f){return ue.isPlainObject(l)&&ue.isPlainObject(u)?ue.merge.call({caseless:f},l,u):ue.isPlainObject(u)?ue.merge({},u):ue.isArray(u)?u.slice():u}function i(l,u,d,f){if(ue.isUndefined(u)){if(!ue.isUndefined(l))return n(void 0,l,d,f)}else return n(l,u,d,f)}function o(l,u){if(!ue.isUndefined(u))return n(void 0,u)}function a(l,u){if(ue.isUndefined(u)){if(!ue.isUndefined(l))return n(void 0,l)}else return n(void 0,u)}function s(l,u,d){if(d in t)return n(l,u);if(d in e)return n(void 0,l)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,u,d)=>i(vU(l),vU(u),d,!0)};return ue.forEach(Object.keys(Object.assign({},e,t)),function(u){const d=c[u]||i,f=d(e[u],t[u],u);ue.isUndefined(f)&&d!==s||(r[u]=f)}),r}const O9=e=>{const t=Eh({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:s}=t;t.headers=a=Qo.from(a),t.url=C9(N9(t.baseURL,t.url),e.params,e.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let c;if(ue.isFormData(r)){if(ho.hasStandardBrowserEnv||ho.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[l,...u]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];a.setContentType([l||"multipart/form-data",...u].join("; "))}}if(ho.hasStandardBrowserEnv&&(n&&ue.isFunction(n)&&(n=n(t)),n||n!==!1&&sfe(t.url))){const l=i&&o&&cfe.read(o);l&&a.set(i,l)}return t},dfe=typeof XMLHttpRequest<"u",hfe=dfe&&function(e){return new Promise(function(r,n){const i=O9(e);let o=i.data;const a=Qo.from(i.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:l}=i,u,d,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function v(){if(!y)return;const b=Qo.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),A={data:!s||s==="text"||s==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:b,config:e,request:y};A9(function(D){r(D),g()},function(D){n(D),g()},A),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(n(new Kt("Request aborted",Kt.ECONNABORTED,e,y)),y=null)},y.onerror=function(){n(new Kt("Network Error",Kt.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const A=i.transitional||R9;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),n(new Kt(S,A.clarifyTimeoutError?Kt.ETIMEDOUT:Kt.ECONNABORTED,e,y)),y=null},o===void 0&&a.setContentType(null),"setRequestHeader"in y&&ue.forEach(a.toJSON(),function(S,A){y.setRequestHeader(A,S)}),ue.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),s&&s!=="json"&&(y.responseType=i.responseType),l&&([f,m]=tw(l,!0),y.addEventListener("progress",f)),c&&y.upload&&([d,p]=tw(c),y.upload.addEventListener("progress",d),y.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=b=>{y&&(n(!b||b.type?new wm(null,e,y):b),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const E=ife(i.url);if(E&&ho.protocols.indexOf(E)===-1){n(new Kt("Unsupported protocol "+E+":",Kt.ERR_BAD_REQUEST,e));return}y.send(o||null)})},ffe=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const o=function(l){if(!i){i=!0,s();const u=l instanceof Error?l:this.reason;n.abort(u instanceof Kt?u:new wm(u instanceof Error?u.message:u))}};let a=t&&setTimeout(()=>{a=null,o(new Kt(`timeout ${t} of ms exceeded`,Kt.ETIMEDOUT))},t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(l=>{l.unsubscribe?l.unsubscribe(o):l.removeEventListener("abort",o)}),e=null)};e.forEach(l=>l.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>ue.asap(s),c}},pfe=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},mfe=async function*(e,t){for await(const r of gfe(e))yield*pfe(r,t)},gfe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},EU=(e,t,r,n)=>{const i=mfe(e,t);let o=0,a,s=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){s(),c.close();return}let d=u.byteLength;if(r){let f=o+=d;r(f)}c.enqueue(new Uint8Array(u))}catch(l){throw s(l),l}},cancel(c){return s(c),i.return()}},{highWaterMark:2})},nT=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",k9=nT&&typeof ReadableStream=="function",yfe=nT&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),P9=(e,...t)=>{try{return!!e(...t)}catch{return!1}},vfe=k9&&P9(()=>{let e=!1;const t=new Request(ho.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),_U=64*1024,LN=k9&&P9(()=>ue.isReadableStream(new Response("").body)),rw={stream:LN&&(e=>e.body)};nT&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!rw[t]&&(rw[t]=ue.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new Kt(`Response type '${t}' is not supported`,Kt.ERR_NOT_SUPPORT,n)})})})(new Response);const Efe=async e=>{if(e==null)return 0;if(ue.isBlob(e))return e.size;if(ue.isSpecCompliantForm(e))return(await new Request(ho.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(ue.isArrayBufferView(e)||ue.isArrayBuffer(e))return e.byteLength;if(ue.isURLSearchParams(e)&&(e=e+""),ue.isString(e))return(await yfe(e)).byteLength},_fe=async(e,t)=>{const r=ue.toFiniteNumber(e.getContentLength());return r??Efe(t)},bfe=nT&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:f}=O9(e);l=l?(l+"").toLowerCase():"text";let p=ffe([i,o&&o.toAbortSignal()],a),m;const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let y;try{if(c&&vfe&&r!=="get"&&r!=="head"&&(y=await _fe(u,n))!==0){let A=new Request(t,{method:"POST",body:n,duplex:"half"}),N;if(ue.isFormData(n)&&(N=A.headers.get("content-type"))&&u.setContentType(N),A.body){const[D,M]=gU(y,tw(yU(c)));n=EU(A.body,_U,D,M)}}ue.isString(d)||(d=d?"include":"omit");const v="credentials"in Request.prototype;m=new Request(t,{...f,signal:p,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:v?d:void 0});let E=await fetch(m);const b=LN&&(l==="stream"||l==="response");if(LN&&(s||b&&g)){const A={};["status","statusText","headers"].forEach(H=>{A[H]=E[H]});const N=ue.toFiniteNumber(E.headers.get("content-length")),[D,M]=s&&gU(N,tw(yU(s),!0))||[];E=new Response(EU(E.body,_U,D,()=>{M&&M(),g&&g()}),A)}l=l||"text";let S=await rw[ue.findKey(rw,l)||"text"](E,e);return!b&&g&&g(),await new Promise((A,N)=>{A9(A,N,{data:S,headers:Qo.from(E.headers),status:E.status,statusText:E.statusText,config:e,request:m})})}catch(v){throw g&&g(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new Kt("Network Error",Kt.ERR_NETWORK,e,m),{cause:v.cause||v}):Kt.from(v,v&&v.code,e,m)}}),MN={http:Mhe,xhr:hfe,fetch:bfe};ue.forEach(MN,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const bU=e=>`- ${e}`,wfe=e=>ue.isFunction(e)||e===null||e===!1,D9={getAdapter:e=>{e=ue.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let o=0;o<t;o++){r=e[o];let a;if(n=r,!wfe(r)&&(n=MN[(a=String(r)).toLowerCase()],n===void 0))throw new Kt(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+o]=n}if(!n){const o=Object.entries(i).map(([s,c])=>`adapter ${s} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(bU).join(`
`):" "+bU(o[0]):"as no adapter specified";throw new Kt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:MN};function hR(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new wm(null,e)}function wU(e){return hR(e),e.headers=Qo.from(e.headers),e.data=dR.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),D9.getAdapter(e.adapter||rv.adapter)(e).then(function(n){return hR(e),n.data=dR.call(e,e.transformResponse,n),n.headers=Qo.from(n.headers),n},function(n){return x9(n)||(hR(e),n&&n.response&&(n.response.data=dR.call(e,e.transformResponse,n.response),n.response.headers=Qo.from(n.response.headers))),Promise.reject(n)})}const L9="1.7.9",iT={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{iT[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const SU={};iT.transitional=function(t,r,n){function i(o,a){return"[Axios v"+L9+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,s)=>{if(t===!1)throw new Kt(i(a," has been removed"+(r?" in "+r:"")),Kt.ERR_DEPRECATED);return r&&!SU[a]&&(SU[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,s):!0}};iT.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Sfe(e,t,r){if(typeof e!="object")throw new Kt("options must be an object",Kt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],a=t[o];if(a){const s=e[o],c=s===void 0||a(s,o,e);if(c!==!0)throw new Kt("option "+o+" must be "+c,Kt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Kt("Unknown option "+o,Kt.ERR_BAD_OPTION)}}const G_={assertOptions:Sfe,validators:iT},sc=G_.validators;class ih{constructor(t){this.defaults=t,this.interceptors={request:new pU,response:new pU}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Eh(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:o}=r;n!==void 0&&G_.assertOptions(n,{silentJSONParsing:sc.transitional(sc.boolean),forcedJSONParsing:sc.transitional(sc.boolean),clarifyTimeoutError:sc.transitional(sc.boolean)},!1),i!=null&&(ue.isFunction(i)?r.paramsSerializer={serialize:i}:G_.assertOptions(i,{encode:sc.function,serialize:sc.function},!0)),G_.assertOptions(r,{baseUrl:sc.spelling("baseURL"),withXsrfToken:sc.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=o&&ue.merge(o.common,o[r.method]);o&&ue.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),r.headers=Qo.concat(a,o);const s=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,s.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let u,d=0,f;if(!c){const m=[wU.bind(this),void 0];for(m.unshift.apply(m,s),m.push.apply(m,l),f=m.length,u=Promise.resolve(r);d<f;)u=u.then(m[d++],m[d++]);return u}f=s.length;let p=r;for(d=0;d<f;){const m=s[d++],g=s[d++];try{p=m(p)}catch(y){g.call(this,y);break}}try{u=wU.call(this,p)}catch(m){return Promise.reject(m)}for(d=0,f=l.length;d<f;)u=u.then(l[d++],l[d++]);return u}getUri(t){t=Eh(this.defaults,t);const r=N9(t.baseURL,t.url);return C9(r,t.params,t.paramsSerializer)}}ue.forEach(["delete","get","head","options"],function(t){ih.prototype[t]=function(r,n){return this.request(Eh(n||{},{method:t,url:r,data:(n||{}).data}))}});ue.forEach(["post","put","patch"],function(t){function r(n){return function(o,a,s){return this.request(Eh(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}ih.prototype[t]=r(),ih.prototype[t+"Form"]=r(!0)});class QP{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{n.subscribe(s),o=s}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},t(function(o,a,s){n.reason||(n.reason=new wm(o,a,s),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new QP(function(i){t=i}),cancel:t}}}function Tfe(e){return function(r){return e.apply(null,r)}}function Cfe(e){return ue.isObject(e)&&e.isAxiosError===!0}const jN={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jN).forEach(([e,t])=>{jN[t]=e});function M9(e){const t=new ih(e),r=f9(ih.prototype.request,t);return ue.extend(r,ih.prototype,t,{allOwnKeys:!0}),ue.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return M9(Eh(e,i))},r}const be=M9(rv);be.Axios=ih;be.CanceledError=wm;be.CancelToken=QP;be.isCancel=x9;be.VERSION=L9;be.toFormData=rT;be.AxiosError=Kt;be.Cancel=be.CanceledError;be.all=function(t){return Promise.all(t)};be.spread=Tfe;be.isAxiosError=Cfe;be.mergeConfig=Eh;be.AxiosHeaders=Qo;be.formToJSON=e=>I9(ue.isHTMLForm(e)?new FormData(e):e);be.getAdapter=D9.getAdapter;be.HttpStatusCode=jN;be.default=be;/*!
* sweetalert2 v11.15.2
* Released under the MIT License.
*/function j9(e,t,r){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function Rfe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function TU(e,t){return e.get(j9(e,t))}function Ife(e,t,r){Rfe(e,t),t.set(e,r)}function xfe(e,t,r){return e.set(j9(e,t),r),r}const Afe=100,wt={},Nfe=()=>{wt.previousActiveElement instanceof HTMLElement?(wt.previousActiveElement.focus(),wt.previousActiveElement=null):document.body&&document.body.focus()},Ofe=e=>new Promise(t=>{if(!e)return t();const r=window.scrollX,n=window.scrollY;wt.restoreFocusTimeout=setTimeout(()=>{Nfe(),t()},Afe),window.scrollTo(r,n)}),U9="swal2-",kfe=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],ce=kfe.reduce((e,t)=>(e[t]=U9+t,e),{}),Pfe=["success","warning","info","question","error"],nw=Pfe.reduce((e,t)=>(e[t]=U9+t,e),{}),F9="SweetAlert2:",ZP=e=>e.charAt(0).toUpperCase()+e.slice(1),oa=e=>{console.warn(`${F9} ${typeof e=="object"?e.join(" "):e}`)},Vh=e=>{console.error(`${F9} ${e}`)},CU=[],Dfe=e=>{CU.includes(e)||(CU.push(e),oa(e))},V9=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Dfe(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},oT=e=>typeof e=="function"?e():e,eD=e=>e&&typeof e.toPromise=="function",nv=e=>eD(e)?e.toPromise():Promise.resolve(e),tD=e=>e&&Promise.resolve(e)===e,aa=()=>document.body.querySelector(`.${ce.container}`),iv=e=>{const t=aa();return t?t.querySelector(e):null},Fa=e=>iv(`.${e}`),Ir=()=>Fa(ce.popup),Sm=()=>Fa(ce.icon),Lfe=()=>Fa(ce["icon-content"]),B9=()=>Fa(ce.title),rD=()=>Fa(ce["html-container"]),$9=()=>Fa(ce.image),nD=()=>Fa(ce["progress-steps"]),aT=()=>Fa(ce["validation-message"]),Lc=()=>iv(`.${ce.actions} .${ce.confirm}`),Tm=()=>iv(`.${ce.actions} .${ce.cancel}`),Bh=()=>iv(`.${ce.actions} .${ce.deny}`),Mfe=()=>Fa(ce["input-label"]),Cm=()=>iv(`.${ce.loader}`),ov=()=>Fa(ce.actions),H9=()=>Fa(ce.footer),sT=()=>Fa(ce["timer-progress-bar"]),iD=()=>Fa(ce.close),jfe=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,oD=()=>{const e=Ir();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),r=Array.from(t).sort((o,a)=>{const s=parseInt(o.getAttribute("tabindex")||"0"),c=parseInt(a.getAttribute("tabindex")||"0");return s>c?1:s<c?-1:0}),n=e.querySelectorAll(jfe),i=Array.from(n).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(r.concat(i))].filter(o=>Zo(o))},aD=()=>_l(document.body,ce.shown)&&!_l(document.body,ce["toast-shown"])&&!_l(document.body,ce["no-backdrop"]),cT=()=>{const e=Ir();return e?_l(e,ce.toast):!1},Ufe=()=>{const e=Ir();return e?e.hasAttribute("data-loading"):!1},Va=(e,t)=>{if(e.textContent="",t){const n=new DOMParser().parseFromString(t,"text/html"),i=n.querySelector("head");i&&Array.from(i.childNodes).forEach(a=>{e.appendChild(a)});const o=n.querySelector("body");o&&Array.from(o.childNodes).forEach(a=>{a instanceof HTMLVideoElement||a instanceof HTMLAudioElement?e.appendChild(a.cloneNode(!0)):e.appendChild(a)})}},_l=(e,t)=>{if(!t)return!1;const r=t.split(/\s+/);for(let n=0;n<r.length;n++)if(!e.classList.contains(r[n]))return!1;return!0},Ffe=(e,t)=>{Array.from(e.classList).forEach(r=>{!Object.values(ce).includes(r)&&!Object.values(nw).includes(r)&&!Object.values(t.showClass||{}).includes(r)&&e.classList.remove(r)})},Pa=(e,t,r)=>{if(Ffe(e,t),!t.customClass)return;const n=t.customClass[r];if(n){if(typeof n!="string"&&!n.forEach){oa(`Invalid type of customClass.${r}! Expected string or iterable object, got "${typeof n}"`);return}mr(e,n)}},lT=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${ce.popup} > .${ce[t]}`);case"checkbox":return e.querySelector(`.${ce.popup} > .${ce.checkbox} input`);case"radio":return e.querySelector(`.${ce.popup} > .${ce.radio} input:checked`)||e.querySelector(`.${ce.popup} > .${ce.radio} input:first-child`);case"range":return e.querySelector(`.${ce.popup} > .${ce.range} input`);default:return e.querySelector(`.${ce.popup} > .${ce.input}`)}},z9=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},G9=(e,t,r)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(n=>{Array.isArray(e)?e.forEach(i=>{r?i.classList.add(n):i.classList.remove(n)}):r?e.classList.add(n):e.classList.remove(n)}))},mr=(e,t)=>{G9(e,t,!0)},Es=(e,t)=>{G9(e,t,!1)},Eu=(e,t)=>{const r=Array.from(e.children);for(let n=0;n<r.length;n++){const i=r[n];if(i instanceof HTMLElement&&_l(i,t))return i}},oh=(e,t,r)=>{r===`${parseInt(r)}`&&(r=parseInt(r)),r||parseInt(r)===0?e.style.setProperty(t,typeof r=="number"?`${r}px`:r):e.style.removeProperty(t)},Bi=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";e&&(e.style.display=t)},mo=e=>{e&&(e.style.display="none")},sD=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";e&&new MutationObserver(()=>{av(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},RU=(e,t,r,n)=>{const i=e.querySelector(t);i&&i.style.setProperty(r,n)},av=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";t?Bi(e,r):mo(e)},Zo=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),Vfe=()=>!Zo(Lc())&&!Zo(Bh())&&!Zo(Tm()),IU=e=>e.scrollHeight>e.clientHeight,W9=e=>{const t=window.getComputedStyle(e),r=parseFloat(t.getPropertyValue("animation-duration")||"0"),n=parseFloat(t.getPropertyValue("transition-duration")||"0");return r>0||n>0},cD=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=sT();r&&Zo(r)&&(t&&(r.style.transition="none",r.style.width="100%"),setTimeout(()=>{r.style.transition=`width ${e/1e3}s linear`,r.style.width="0%"},10))},Bfe=()=>{const e=sT();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const r=parseInt(window.getComputedStyle(e).width),n=t/r*100;e.style.width=`${n}%`},$fe=()=>typeof window>"u"||typeof document>"u",Hfe=`
 <div aria-labelledby="${ce.title}" aria-describedby="${ce["html-container"]}" class="${ce.popup}" tabindex="-1">
   <button type="button" class="${ce.close}"></button>
   <ul class="${ce["progress-steps"]}"></ul>
   <div class="${ce.icon}"></div>
   <img class="${ce.image}" />
   <h2 class="${ce.title}" id="${ce.title}"></h2>
   <div class="${ce["html-container"]}" id="${ce["html-container"]}"></div>
   <input class="${ce.input}" id="${ce.input}" />
   <input type="file" class="${ce.file}" />
   <div class="${ce.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${ce.select}" id="${ce.select}"></select>
   <div class="${ce.radio}"></div>
   <label class="${ce.checkbox}">
     <input type="checkbox" id="${ce.checkbox}" />
     <span class="${ce.label}"></span>
   </label>
   <textarea class="${ce.textarea}" id="${ce.textarea}"></textarea>
   <div class="${ce["validation-message"]}" id="${ce["validation-message"]}"></div>
   <div class="${ce.actions}">
     <div class="${ce.loader}"></div>
     <button type="button" class="${ce.confirm}"></button>
     <button type="button" class="${ce.deny}"></button>
     <button type="button" class="${ce.cancel}"></button>
   </div>
   <div class="${ce.footer}"></div>
   <div class="${ce["timer-progress-bar-container"]}">
     <div class="${ce["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),zfe=()=>{const e=aa();return e?(e.remove(),Es([document.documentElement,document.body],[ce["no-backdrop"],ce["toast-shown"],ce["has-column"]]),!0):!1},vd=()=>{wt.currentInstance.resetValidationMessage()},Gfe=()=>{const e=Ir(),t=Eu(e,ce.input),r=Eu(e,ce.file),n=e.querySelector(`.${ce.range} input`),i=e.querySelector(`.${ce.range} output`),o=Eu(e,ce.select),a=e.querySelector(`.${ce.checkbox} input`),s=Eu(e,ce.textarea);t.oninput=vd,r.onchange=vd,o.onchange=vd,a.onchange=vd,s.oninput=vd,n.oninput=()=>{vd(),i.value=n.value},n.onchange=()=>{vd(),i.value=n.value}},Wfe=e=>typeof e=="string"?document.querySelector(e):e,Kfe=e=>{const t=Ir();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},qfe=e=>{window.getComputedStyle(e).direction==="rtl"&&mr(aa(),ce.rtl)},Yfe=e=>{const t=zfe();if($fe()){Vh("SweetAlert2 requires document to initialize");return}const r=document.createElement("div");r.className=ce.container,t&&mr(r,ce["no-transition"]),Va(r,Hfe);const n=Wfe(e.target);n.appendChild(r),Kfe(e),qfe(n),Gfe()},lD=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?Xfe(e,t):e&&Va(t,e)},Xfe=(e,t)=>{e.jquery?Jfe(t,e):Va(t,e.toString())},Jfe=(e,t)=>{if(e.textContent="",0 in t)for(let r=0;r in t;r++)e.appendChild(t[r].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},Qfe=(e,t)=>{const r=ov(),n=Cm();!r||!n||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?mo(r):Bi(r),Pa(r,t,"actions"),Zfe(r,n,t),Va(n,t.loaderHtml||""),Pa(n,t,"loader"))};function Zfe(e,t,r){const n=Lc(),i=Bh(),o=Tm();!n||!i||!o||(fR(n,"confirm",r),fR(i,"deny",r),fR(o,"cancel",r),epe(n,i,o,r),r.reverseButtons&&(r.toast?(e.insertBefore(o,n),e.insertBefore(i,n)):(e.insertBefore(o,t),e.insertBefore(i,t),e.insertBefore(n,t))))}function epe(e,t,r,n){if(!n.buttonsStyling){Es([e,t,r],ce.styled);return}mr([e,t,r],ce.styled),n.confirmButtonColor&&(e.style.backgroundColor=n.confirmButtonColor,mr(e,ce["default-outline"])),n.denyButtonColor&&(t.style.backgroundColor=n.denyButtonColor,mr(t,ce["default-outline"])),n.cancelButtonColor&&(r.style.backgroundColor=n.cancelButtonColor,mr(r,ce["default-outline"]))}function fR(e,t,r){const n=ZP(t);av(e,r[`show${n}Button`],"inline-block"),Va(e,r[`${t}ButtonText`]||""),e.setAttribute("aria-label",r[`${t}ButtonAriaLabel`]||""),e.className=ce[t],Pa(e,r,`${t}Button`)}const tpe=(e,t)=>{const r=iD();r&&(Va(r,t.closeButtonHtml||""),Pa(r,t,"closeButton"),av(r,t.showCloseButton),r.setAttribute("aria-label",t.closeButtonAriaLabel||""))},rpe=(e,t)=>{const r=aa();r&&(npe(r,t.backdrop),ipe(r,t.position),ope(r,t.grow),Pa(r,t,"container"))};function npe(e,t){typeof t=="string"?e.style.background=t:t||mr([document.documentElement,document.body],ce["no-backdrop"])}function ipe(e,t){t&&(t in ce?mr(e,ce[t]):(oa('The "position" parameter is not valid, defaulting to "center"'),mr(e,ce.center)))}function ope(e,t){t&&mr(e,ce[`grow-${t}`])}var cn={innerParams:new WeakMap,domCache:new WeakMap};const ape=["input","file","range","select","radio","checkbox","textarea"],spe=(e,t)=>{const r=Ir();if(!r)return;const n=cn.innerParams.get(e),i=!n||t.input!==n.input;ape.forEach(o=>{const a=Eu(r,ce[o]);a&&(upe(o,t.inputAttributes),a.className=ce[o],i&&mo(a))}),t.input&&(i&&cpe(t),dpe(t))},cpe=e=>{if(!e.input)return;if(!Zn[e.input]){Vh(`Unexpected type of input! Expected ${Object.keys(Zn).join(" | ")}, got "${e.input}"`);return}const t=K9(e.input);if(!t)return;const r=Zn[e.input](t,e);Bi(t),e.inputAutoFocus&&setTimeout(()=>{z9(r)})},lpe=e=>{for(let t=0;t<e.attributes.length;t++){const r=e.attributes[t].name;["id","type","value","style"].includes(r)||e.removeAttribute(r)}},upe=(e,t)=>{const r=Ir();if(!r)return;const n=lT(r,e);if(n){lpe(n);for(const i in t)n.setAttribute(i,t[i])}},dpe=e=>{if(!e.input)return;const t=K9(e.input);t&&Pa(t,e,"input")},uD=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},sv=(e,t,r)=>{if(r.inputLabel){const n=document.createElement("label"),i=ce["input-label"];n.setAttribute("for",e.id),n.className=i,typeof r.customClass=="object"&&mr(n,r.customClass.inputLabel),n.innerText=r.inputLabel,t.insertAdjacentElement("beforebegin",n)}},K9=e=>{const t=Ir();if(t)return Eu(t,ce[e]||ce.input)},iw=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:tD(t)||oa(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Zn={};Zn.text=Zn.email=Zn.password=Zn.number=Zn.tel=Zn.url=Zn.search=Zn.date=Zn["datetime-local"]=Zn.time=Zn.week=Zn.month=(e,t)=>(iw(e,t.inputValue),sv(e,e,t),uD(e,t),e.type=t.input,e);Zn.file=(e,t)=>(sv(e,e,t),uD(e,t),e);Zn.range=(e,t)=>{const r=e.querySelector("input"),n=e.querySelector("output");return iw(r,t.inputValue),r.type=t.input,iw(n,t.inputValue),sv(r,e,t),e};Zn.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const r=document.createElement("option");Va(r,t.inputPlaceholder),r.value="",r.disabled=!0,r.selected=!0,e.appendChild(r)}return sv(e,e,t),e};Zn.radio=e=>(e.textContent="",e);Zn.checkbox=(e,t)=>{const r=lT(Ir(),"checkbox");r.value="1",r.checked=!!t.inputValue;const n=e.querySelector("span");return Va(n,t.inputPlaceholder||t.inputLabel),r};Zn.textarea=(e,t)=>{iw(e,t.inputValue),uD(e,t),sv(e,e,t);const r=n=>parseInt(window.getComputedStyle(n).marginLeft)+parseInt(window.getComputedStyle(n).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(Ir()).width),i=()=>{if(!document.body.contains(e))return;const o=e.offsetWidth+r(e);o>n?Ir().style.width=`${o}px`:oh(Ir(),"width",t.width)};new MutationObserver(i).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const hpe=(e,t)=>{const r=rD();r&&(sD(r),Pa(r,t,"htmlContainer"),t.html?(lD(t.html,r),Bi(r,"block")):t.text?(r.textContent=t.text,Bi(r,"block")):mo(r),spe(e,t))},fpe=(e,t)=>{const r=H9();r&&(sD(r),av(r,t.footer,"block"),t.footer&&lD(t.footer,r),Pa(r,t,"footer"))},ppe=(e,t)=>{const r=cn.innerParams.get(e),n=Sm();if(n){if(r&&t.icon===r.icon){AU(n,t),xU(n,t);return}if(!t.icon&&!t.iconHtml){mo(n);return}if(t.icon&&Object.keys(nw).indexOf(t.icon)===-1){Vh(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),mo(n);return}Bi(n),AU(n,t),xU(n,t),mr(n,t.showClass&&t.showClass.icon)}},xU=(e,t)=>{for(const[r,n]of Object.entries(nw))t.icon!==r&&Es(e,n);mr(e,t.icon&&nw[t.icon]),vpe(e,t),mpe(),Pa(e,t,"icon")},mpe=()=>{const e=Ir();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),r=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let n=0;n<r.length;n++)r[n].style.backgroundColor=t},gpe=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,ype=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,AU=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let r=e.innerHTML,n="";t.iconHtml?n=NU(t.iconHtml):t.icon==="success"?(n=gpe,r=r.replace(/ style=".*?"/g,"")):t.icon==="error"?n=ype:t.icon&&(n=NU({question:"?",warning:"!",info:"i"}[t.icon])),r.trim()!==n.trim()&&Va(e,n)},vpe=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const r of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])RU(e,r,"background-color",t.iconColor);RU(e,".swal2-success-ring","border-color",t.iconColor)}},NU=e=>`<div class="${ce["icon-content"]}">${e}</div>`,Epe=(e,t)=>{const r=$9();if(r){if(!t.imageUrl){mo(r);return}Bi(r,""),r.setAttribute("src",t.imageUrl),r.setAttribute("alt",t.imageAlt||""),oh(r,"width",t.imageWidth),oh(r,"height",t.imageHeight),r.className=ce.image,Pa(r,t,"image")}};let dD=!1,q9=0,Y9=0,X9=0,J9=0;const _pe=e=>{e.addEventListener("mousedown",ow),document.body.addEventListener("mousemove",aw),e.addEventListener("mouseup",sw),e.addEventListener("touchstart",ow),document.body.addEventListener("touchmove",aw),e.addEventListener("touchend",sw)},bpe=e=>{e.removeEventListener("mousedown",ow),document.body.removeEventListener("mousemove",aw),e.removeEventListener("mouseup",sw),e.removeEventListener("touchstart",ow),document.body.removeEventListener("touchmove",aw),e.removeEventListener("touchend",sw)},ow=e=>{const t=Ir();if(e.target===t||Sm().contains(e.target)){dD=!0;const r=Q9(e);q9=r.clientX,Y9=r.clientY,X9=parseInt(t.style.insetInlineStart)||0,J9=parseInt(t.style.insetBlockStart)||0,mr(t,"swal2-dragging")}},aw=e=>{const t=Ir();if(dD){let{clientX:r,clientY:n}=Q9(e);t.style.insetInlineStart=`${X9+(r-q9)}px`,t.style.insetBlockStart=`${J9+(n-Y9)}px`}},sw=()=>{const e=Ir();dD=!1,Es(e,"swal2-dragging")},Q9=e=>{let t=0,r=0;return e.type.startsWith("mouse")?(t=e.clientX,r=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,r=e.touches[0].clientY),{clientX:t,clientY:r}},wpe=(e,t)=>{const r=aa(),n=Ir();if(!(!r||!n)){if(t.toast){oh(r,"width",t.width),n.style.width="100%";const i=Cm();i&&n.insertBefore(i,Sm())}else oh(n,"width",t.width);oh(n,"padding",t.padding),t.color&&(n.style.color=t.color),t.background&&(n.style.background=t.background),mo(aT()),Spe(n,t),t.draggable&&!t.toast?(mr(n,ce.draggable),_pe(n)):(Es(n,ce.draggable),bpe(n))}},Spe=(e,t)=>{const r=t.showClass||{};e.className=`${ce.popup} ${Zo(e)?r.popup:""}`,t.toast?(mr([document.documentElement,document.body],ce["toast-shown"]),mr(e,ce.toast)):mr(e,ce.modal),Pa(e,t,"popup"),typeof t.customClass=="string"&&mr(e,t.customClass),t.icon&&mr(e,ce[`icon-${t.icon}`])},Tpe=(e,t)=>{const r=nD();if(!r)return;const{progressSteps:n,currentProgressStep:i}=t;if(!n||n.length===0||i===void 0){mo(r);return}Bi(r),r.textContent="",i>=n.length&&oa("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),n.forEach((o,a)=>{const s=Cpe(o);if(r.appendChild(s),a===i&&mr(s,ce["active-progress-step"]),a!==n.length-1){const c=Rpe(t);r.appendChild(c)}})},Cpe=e=>{const t=document.createElement("li");return mr(t,ce["progress-step"]),Va(t,e),t},Rpe=e=>{const t=document.createElement("li");return mr(t,ce["progress-step-line"]),e.progressStepsDistance&&oh(t,"width",e.progressStepsDistance),t},Ipe=(e,t)=>{const r=B9();r&&(sD(r),av(r,t.title||t.titleText,"block"),t.title&&lD(t.title,r),t.titleText&&(r.innerText=t.titleText),Pa(r,t,"title"))},Z9=(e,t)=>{wpe(e,t),rpe(e,t),Tpe(e,t),ppe(e,t),Epe(e,t),Ipe(e,t),tpe(e,t),hpe(e,t),Qfe(e,t),fpe(e,t);const r=Ir();typeof t.didRender=="function"&&r&&t.didRender(r),wt.eventEmitter.emit("didRender",r)},xpe=()=>Zo(Ir()),eK=()=>{var e;return(e=Lc())===null||e===void 0?void 0:e.click()},Ape=()=>{var e;return(e=Bh())===null||e===void 0?void 0:e.click()},Npe=()=>{var e;return(e=Tm())===null||e===void 0?void 0:e.click()},Rm=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),tK=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},Ope=(e,t,r)=>{tK(e),t.toast||(e.keydownHandler=n=>Ppe(t,n,r),e.keydownTarget=t.keydownListenerCapture?window:Ir(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},UN=(e,t)=>{var r;const n=oD();if(n.length){e=e+t,e===n.length?e=0:e===-1&&(e=n.length-1),n[e].focus();return}(r=Ir())===null||r===void 0||r.focus()},rK=["ArrowRight","ArrowDown"],kpe=["ArrowLeft","ArrowUp"],Ppe=(e,t,r)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?Dpe(t,e):t.key==="Tab"?Lpe(t):[...rK,...kpe].includes(t.key)?Mpe(t.key):t.key==="Escape"&&jpe(t,e,r)))},Dpe=(e,t)=>{if(!oT(t.allowEnterKey))return;const r=lT(Ir(),t.input);if(e.target&&r&&e.target instanceof HTMLElement&&e.target.outerHTML===r.outerHTML){if(["textarea","file"].includes(t.input))return;eK(),e.preventDefault()}},Lpe=e=>{const t=e.target,r=oD();let n=-1;for(let i=0;i<r.length;i++)if(t===r[i]){n=i;break}e.shiftKey?UN(n,-1):UN(n,1),e.stopPropagation(),e.preventDefault()},Mpe=e=>{const t=ov(),r=Lc(),n=Bh(),i=Tm();if(!t||!r||!n||!i)return;const o=[r,n,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const a=rK.includes(e)?"nextElementSibling":"previousElementSibling";let s=document.activeElement;if(s){for(let c=0;c<t.children.length;c++){if(s=s[a],!s)return;if(s instanceof HTMLButtonElement&&Zo(s))break}s instanceof HTMLButtonElement&&s.focus()}},jpe=(e,t,r)=>{oT(t.allowEscapeKey)&&(e.preventDefault(),r(Rm.esc))};var zp={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Upe=()=>{const e=aa();Array.from(document.body.children).forEach(r=>{r.contains(e)||(r.hasAttribute("aria-hidden")&&r.setAttribute("data-previous-aria-hidden",r.getAttribute("aria-hidden")||""),r.setAttribute("aria-hidden","true"))})},nK=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},iK=typeof window<"u"&&!!window.GestureEvent,Fpe=()=>{if(iK&&!_l(document.body,ce.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,mr(document.body,ce.iosfix),Vpe()}},Vpe=()=>{const e=aa();if(!e)return;let t;e.ontouchstart=r=>{t=Bpe(r)},e.ontouchmove=r=>{t&&(r.preventDefault(),r.stopPropagation())}},Bpe=e=>{const t=e.target,r=aa(),n=rD();return!r||!n||$pe(e)||Hpe(e)?!1:t===r||!IU(r)&&t instanceof HTMLElement&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(IU(n)&&n.contains(t))},$pe=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",Hpe=e=>e.touches&&e.touches.length>1,zpe=()=>{if(_l(document.body,ce.iosfix)){const e=parseInt(document.body.style.top,10);Es(document.body,ce.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},Gpe=()=>{const e=document.createElement("div");e.className=ce["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let _p=null;const Wpe=e=>{_p===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(_p=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${_p+Gpe()}px`)},Kpe=()=>{_p!==null&&(document.body.style.paddingRight=`${_p}px`,_p=null)};function oK(e,t,r,n){cT()?OU(e,n):(Ofe(r).then(()=>OU(e,n)),tK(wt)),iK?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),aD()&&(Kpe(),zpe(),nK()),qpe()}function qpe(){Es([document.documentElement,document.body],[ce.shown,ce["height-auto"],ce["no-backdrop"],ce["toast-shown"]])}function _u(e){e=Xpe(e);const t=zp.swalPromiseResolve.get(this),r=Ype(this);this.isAwaitingPromise?e.isDismissed||(cv(this),t(e)):r&&t(e)}const Ype=e=>{const t=Ir();if(!t)return!1;const r=cn.innerParams.get(e);if(!r||_l(t,r.hideClass.popup))return!1;Es(t,r.showClass.popup),mr(t,r.hideClass.popup);const n=aa();return Es(n,r.showClass.backdrop),mr(n,r.hideClass.backdrop),Jpe(e,t,r),!0};function aK(e){const t=zp.swalPromiseReject.get(this);cv(this),t&&t(e)}const cv=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,cn.innerParams.get(e)||e._destroy())},Xpe=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),Jpe=(e,t,r)=>{var n;const i=aa(),o=W9(t);typeof r.willClose=="function"&&r.willClose(t),(n=wt.eventEmitter)===null||n===void 0||n.emit("willClose",t),o?Qpe(e,t,i,r.returnFocus,r.didClose):oK(e,i,r.returnFocus,r.didClose)},Qpe=(e,t,r,n,i)=>{wt.swalCloseEventFinishedCallback=oK.bind(null,e,r,n,i);const o=function(a){if(a.target===t){var s;(s=wt.swalCloseEventFinishedCallback)===null||s===void 0||s.call(wt),delete wt.swalCloseEventFinishedCallback,t.removeEventListener("animationend",o),t.removeEventListener("transitionend",o)}};t.addEventListener("animationend",o),t.addEventListener("transitionend",o)},OU=(e,t)=>{setTimeout(()=>{var r;typeof t=="function"&&t.bind(e.params)(),(r=wt.eventEmitter)===null||r===void 0||r.emit("didClose"),e._destroy&&e._destroy()})},Gp=e=>{let t=Ir();if(t||new re,t=Ir(),!t)return;const r=Cm();cT()?mo(Sm()):Zpe(t,e),Bi(r),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},Zpe=(e,t)=>{const r=ov(),n=Cm();!r||!n||(!t&&Zo(Lc())&&(t=Lc()),Bi(r),t&&(mo(t),n.setAttribute("data-button-to-replace",t.className),r.insertBefore(n,t)),mr([e,r],ce.loading))},eme=(e,t)=>{t.input==="select"||t.input==="radio"?ome(e,t):["text","email","number","tel","textarea"].some(r=>r===t.input)&&(eD(t.inputValue)||tD(t.inputValue))&&(Gp(Lc()),ame(e,t))},tme=(e,t)=>{const r=e.getInput();if(!r)return null;switch(t.input){case"checkbox":return rme(r);case"radio":return nme(r);case"file":return ime(r);default:return t.inputAutoTrim?r.value.trim():r.value}},rme=e=>e.checked?1:0,nme=e=>e.checked?e.value:null,ime=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,ome=(e,t)=>{const r=Ir();if(!r)return;const n=i=>{t.input==="select"?sme(r,cw(i),t):t.input==="radio"&&cme(r,cw(i),t)};eD(t.inputOptions)||tD(t.inputOptions)?(Gp(Lc()),nv(t.inputOptions).then(i=>{e.hideLoading(),n(i)})):typeof t.inputOptions=="object"?n(t.inputOptions):Vh(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},ame=(e,t)=>{const r=e.getInput();r&&(mo(r),nv(t.inputValue).then(n=>{r.value=t.input==="number"?`${parseFloat(n)||0}`:`${n}`,Bi(r),r.focus(),e.hideLoading()}).catch(n=>{Vh(`Error in inputValue promise: ${n}`),r.value="",Bi(r),r.focus(),e.hideLoading()}))};function sme(e,t,r){const n=Eu(e,ce.select);if(!n)return;const i=(o,a,s)=>{const c=document.createElement("option");c.value=s,Va(c,a),c.selected=sK(s,r.inputValue),o.appendChild(c)};t.forEach(o=>{const a=o[0],s=o[1];if(Array.isArray(s)){const c=document.createElement("optgroup");c.label=a,c.disabled=!1,n.appendChild(c),s.forEach(l=>i(c,l[1],l[0]))}else i(n,s,a)}),n.focus()}function cme(e,t,r){const n=Eu(e,ce.radio);if(!n)return;t.forEach(o=>{const a=o[0],s=o[1],c=document.createElement("input"),l=document.createElement("label");c.type="radio",c.name=ce.radio,c.value=a,sK(a,r.inputValue)&&(c.checked=!0);const u=document.createElement("span");Va(u,s),u.className=ce.label,l.appendChild(c),l.appendChild(u),n.appendChild(l)});const i=n.querySelectorAll("input");i.length&&i[0].focus()}const cw=e=>{const t=[];return e instanceof Map?e.forEach((r,n)=>{let i=r;typeof i=="object"&&(i=cw(i)),t.push([n,i])}):Object.keys(e).forEach(r=>{let n=e[r];typeof n=="object"&&(n=cw(n)),t.push([r,n])}),t},sK=(e,t)=>!!t&&t.toString()===e.toString(),lme=e=>{const t=cn.innerParams.get(e);e.disableButtons(),t.input?cK(e,"confirm"):fD(e,!0)},ume=e=>{const t=cn.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?cK(e,"deny"):hD(e,!1)},dme=(e,t)=>{e.disableButtons(),t(Rm.cancel)},cK=(e,t)=>{const r=cn.innerParams.get(e);if(!r.input){Vh(`The "input" parameter is needed to be set when using returnInputValueOn${ZP(t)}`);return}const n=e.getInput(),i=tme(e,r);r.inputValidator?hme(e,i,t):n&&!n.checkValidity()?(e.enableButtons(),e.showValidationMessage(r.validationMessage||n.validationMessage)):t==="deny"?hD(e,i):fD(e,i)},hme=(e,t,r)=>{const n=cn.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>nv(n.inputValidator(t,n.validationMessage))).then(o=>{e.enableButtons(),e.enableInput(),o?e.showValidationMessage(o):r==="deny"?hD(e,t):fD(e,t)})},hD=(e,t)=>{const r=cn.innerParams.get(e||void 0);r.showLoaderOnDeny&&Gp(Bh()),r.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>nv(r.preDeny(t,r.validationMessage))).then(i=>{i===!1?(e.hideLoading(),cv(e)):e.close({isDenied:!0,value:typeof i>"u"?t:i})}).catch(i=>lK(e||void 0,i))):e.close({isDenied:!0,value:t})},kU=(e,t)=>{e.close({isConfirmed:!0,value:t})},lK=(e,t)=>{e.rejectPromise(t)},fD=(e,t)=>{const r=cn.innerParams.get(e||void 0);r.showLoaderOnConfirm&&Gp(),r.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>nv(r.preConfirm(t,r.validationMessage))).then(i=>{Zo(aT())||i===!1?(e.hideLoading(),cv(e)):kU(e,typeof i>"u"?t:i)}).catch(i=>lK(e||void 0,i))):kU(e,t)};function lw(){const e=cn.innerParams.get(this);if(!e)return;const t=cn.domCache.get(this);mo(t.loader),cT()?e.icon&&Bi(Sm()):fme(t),Es([t.popup,t.actions],ce.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const fme=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?Bi(t[0],"inline-block"):Vfe()&&mo(e.actions)};function uK(){const e=cn.innerParams.get(this),t=cn.domCache.get(this);return t?lT(t.popup,e.input):null}function dK(e,t,r){const n=cn.domCache.get(e);t.forEach(i=>{n[i].disabled=r})}function hK(e,t){const r=Ir();if(!(!r||!e))if(e.type==="radio"){const n=r.querySelectorAll(`[name="${ce.radio}"]`);for(let i=0;i<n.length;i++)n[i].disabled=t}else e.disabled=t}function fK(){dK(this,["confirmButton","denyButton","cancelButton"],!1)}function pK(){dK(this,["confirmButton","denyButton","cancelButton"],!0)}function mK(){hK(this.getInput(),!1)}function gK(){hK(this.getInput(),!0)}function yK(e){const t=cn.domCache.get(this),r=cn.innerParams.get(this);Va(t.validationMessage,e),t.validationMessage.className=ce["validation-message"],r.customClass&&r.customClass.validationMessage&&mr(t.validationMessage,r.customClass.validationMessage),Bi(t.validationMessage);const n=this.getInput();n&&(n.setAttribute("aria-invalid","true"),n.setAttribute("aria-describedby",ce["validation-message"]),z9(n),mr(n,ce.inputerror))}function vK(){const e=cn.domCache.get(this);e.validationMessage&&mo(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Es(t,ce.inputerror))}const bp={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},pme=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],mme={allowEnterKey:void 0},gme=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],EK=e=>Object.prototype.hasOwnProperty.call(bp,e),_K=e=>pme.indexOf(e)!==-1,bK=e=>mme[e],yme=e=>{EK(e)||oa(`Unknown parameter "${e}"`)},vme=e=>{gme.includes(e)&&oa(`The parameter "${e}" is incompatible with toasts`)},Eme=e=>{const t=bK(e);t&&V9(e,t)},_me=e=>{e.backdrop===!1&&e.allowOutsideClick&&oa('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)yme(t),e.toast&&vme(t),Eme(t)};function wK(e){const t=Ir(),r=cn.innerParams.get(this);if(!t||_l(t,r.hideClass.popup)){oa("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const n=bme(e),i=Object.assign({},r,n);Z9(this,i),cn.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const bme=e=>{const t={};return Object.keys(e).forEach(r=>{_K(r)?t[r]=e[r]:oa(`Invalid parameter to update: ${r}`)}),t};function SK(){const e=cn.domCache.get(this),t=cn.innerParams.get(this);if(!t){TK(this);return}e.popup&&wt.swalCloseEventFinishedCallback&&(wt.swalCloseEventFinishedCallback(),delete wt.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),wt.eventEmitter.emit("didDestroy"),wme(this)}const wme=e=>{TK(e),delete e.params,delete wt.keydownHandler,delete wt.keydownTarget,delete wt.currentInstance},TK=e=>{e.isAwaitingPromise?(pR(cn,e),e.isAwaitingPromise=!0):(pR(zp,e),pR(cn,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},pR=(e,t)=>{for(const r in e)e[r].delete(t)};var Sme=Object.freeze({__proto__:null,_destroy:SK,close:_u,closeModal:_u,closePopup:_u,closeToast:_u,disableButtons:pK,disableInput:gK,disableLoading:lw,enableButtons:fK,enableInput:mK,getInput:uK,handleAwaitingPromise:cv,hideLoading:lw,rejectPromise:aK,resetValidationMessage:vK,showValidationMessage:yK,update:wK});const Tme=(e,t,r)=>{e.toast?Cme(e,t,r):(Ime(t),xme(t),Ame(e,t,r))},Cme=(e,t,r)=>{t.popup.onclick=()=>{e&&(Rme(e)||e.timer||e.input)||r(Rm.close)}},Rme=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let uw=!1;const Ime=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(uw=!0)}}},xme=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(r){e.popup.onmouseup=()=>{},(r.target===e.popup||r.target instanceof HTMLElement&&e.popup.contains(r.target))&&(uw=!0)}}},Ame=(e,t,r)=>{t.container.onclick=n=>{if(uw){uw=!1;return}n.target===t.container&&oT(e.allowOutsideClick)&&r(Rm.backdrop)}},Nme=e=>typeof e=="object"&&e.jquery,PU=e=>e instanceof Element||Nme(e),Ome=e=>{const t={};return typeof e[0]=="object"&&!PU(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((r,n)=>{const i=e[n];typeof i=="string"||PU(i)?t[r]=i:i!==void 0&&Vh(`Unexpected type of ${r}! Expected "string" or "Element", got ${typeof i}`)}),t};function kme(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new this(...t)}function Pme(e){class t extends this{_main(n,i){return super._main(n,Object.assign({},e,i))}}return t}const Dme=()=>wt.timeout&&wt.timeout.getTimerLeft(),CK=()=>{if(wt.timeout)return Bfe(),wt.timeout.stop()},RK=()=>{if(wt.timeout){const e=wt.timeout.start();return cD(e),e}},Lme=()=>{const e=wt.timeout;return e&&(e.running?CK():RK())},Mme=e=>{if(wt.timeout){const t=wt.timeout.increase(e);return cD(t,!0),t}},jme=()=>!!(wt.timeout&&wt.timeout.isRunning());let DU=!1;const FN={};function Ume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";FN[e]=this,DU||(document.body.addEventListener("click",Fme),DU=!0)}const Fme=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const r in FN){const n=t.getAttribute(r);if(n){FN[r].fire({template:n});return}}};class Vme{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,r){const n=this._getHandlersByEventName(t);n.includes(r)||n.push(r)}once(t,r){var n=this;const i=function(){n.removeListener(t,i);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];r.apply(n,a)};this.on(t,i)}emit(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this._getHandlersByEventName(t).forEach(o=>{try{o.apply(this,n)}catch(a){console.error(a)}})}removeListener(t,r){const n=this._getHandlersByEventName(t),i=n.indexOf(r);i>-1&&n.splice(i,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}wt.eventEmitter=new Vme;const Bme=(e,t)=>{wt.eventEmitter.on(e,t)},$me=(e,t)=>{wt.eventEmitter.once(e,t)},Hme=(e,t)=>{if(!e){wt.eventEmitter.reset();return}t?wt.eventEmitter.removeListener(e,t):wt.eventEmitter.removeAllListeners(e)};var zme=Object.freeze({__proto__:null,argsToParams:Ome,bindClickHandler:Ume,clickCancel:Npe,clickConfirm:eK,clickDeny:Ape,enableLoading:Gp,fire:kme,getActions:ov,getCancelButton:Tm,getCloseButton:iD,getConfirmButton:Lc,getContainer:aa,getDenyButton:Bh,getFocusableElements:oD,getFooter:H9,getHtmlContainer:rD,getIcon:Sm,getIconContent:Lfe,getImage:$9,getInputLabel:Mfe,getLoader:Cm,getPopup:Ir,getProgressSteps:nD,getTimerLeft:Dme,getTimerProgressBar:sT,getTitle:B9,getValidationMessage:aT,increaseTimer:Mme,isDeprecatedParameter:bK,isLoading:Ufe,isTimerRunning:jme,isUpdatableParameter:_K,isValidParameter:EK,isVisible:xpe,mixin:Pme,off:Hme,on:Bme,once:$me,resumeTimer:RK,showLoading:Gp,stopTimer:CK,toggleTimer:Lme});class Gme{constructor(t,r){this.callback=t,this.remaining=r,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const r=this.running;return r&&this.stop(),this.remaining+=t,r&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const IK=["swal-title","swal-html","swal-footer"],Wme=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const r=t.content;return ege(r),Object.assign(Kme(r),qme(r),Yme(r),Xme(r),Jme(r),Qme(r),Zme(r,IK))},Kme=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(n=>{_h(n,["name","value"]);const i=n.getAttribute("name"),o=n.getAttribute("value");!i||!o||(typeof bp[i]=="boolean"?t[i]=o!=="false":typeof bp[i]=="object"?t[i]=JSON.parse(o):t[i]=o)}),t},qme=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(n=>{const i=n.getAttribute("name"),o=n.getAttribute("value");!i||!o||(t[i]=new Function(`return ${o}`)())}),t},Yme=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(n=>{_h(n,["type","color","aria-label"]);const i=n.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(t[`${i}ButtonText`]=n.innerHTML,t[`show${ZP(i)}Button`]=!0,n.hasAttribute("color")&&(t[`${i}ButtonColor`]=n.getAttribute("color")),n.hasAttribute("aria-label")&&(t[`${i}ButtonAriaLabel`]=n.getAttribute("aria-label")))}),t},Xme=e=>{const t={},r=e.querySelector("swal-image");return r&&(_h(r,["src","width","height","alt"]),r.hasAttribute("src")&&(t.imageUrl=r.getAttribute("src")||void 0),r.hasAttribute("width")&&(t.imageWidth=r.getAttribute("width")||void 0),r.hasAttribute("height")&&(t.imageHeight=r.getAttribute("height")||void 0),r.hasAttribute("alt")&&(t.imageAlt=r.getAttribute("alt")||void 0)),t},Jme=e=>{const t={},r=e.querySelector("swal-icon");return r&&(_h(r,["type","color"]),r.hasAttribute("type")&&(t.icon=r.getAttribute("type")),r.hasAttribute("color")&&(t.iconColor=r.getAttribute("color")),t.iconHtml=r.innerHTML),t},Qme=e=>{const t={},r=e.querySelector("swal-input");r&&(_h(r,["type","label","placeholder","value"]),t.input=r.getAttribute("type")||"text",r.hasAttribute("label")&&(t.inputLabel=r.getAttribute("label")),r.hasAttribute("placeholder")&&(t.inputPlaceholder=r.getAttribute("placeholder")),r.hasAttribute("value")&&(t.inputValue=r.getAttribute("value")));const n=Array.from(e.querySelectorAll("swal-input-option"));return n.length&&(t.inputOptions={},n.forEach(i=>{_h(i,["value"]);const o=i.getAttribute("value");if(!o)return;const a=i.innerHTML;t.inputOptions[o]=a})),t},Zme=(e,t)=>{const r={};for(const n in t){const i=t[n],o=e.querySelector(i);o&&(_h(o,[]),r[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return r},ege=e=>{const t=IK.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(r=>{const n=r.tagName.toLowerCase();t.includes(n)||oa(`Unrecognized element <${n}>`)})},_h=(e,t)=>{Array.from(e.attributes).forEach(r=>{t.indexOf(r.name)===-1&&oa([`Unrecognized attribute "${r.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},xK=10,tge=e=>{const t=aa(),r=Ir();typeof e.willOpen=="function"&&e.willOpen(r),wt.eventEmitter.emit("willOpen",r);const i=window.getComputedStyle(document.body).overflowY;ige(t,r,e),setTimeout(()=>{rge(t,r)},xK),aD()&&(nge(t,e.scrollbarPadding,i),Upe()),!cT()&&!wt.previousActiveElement&&(wt.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(r)),wt.eventEmitter.emit("didOpen",r),Es(t,ce["no-transition"])},dw=e=>{const t=Ir();if(e.target!==t)return;const r=aa();t.removeEventListener("animationend",dw),t.removeEventListener("transitionend",dw),r.style.overflowY="auto"},rge=(e,t)=>{W9(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",dw),t.addEventListener("transitionend",dw)):e.style.overflowY="auto"},nge=(e,t,r)=>{Fpe(),t&&r!=="hidden"&&Wpe(r),setTimeout(()=>{e.scrollTop=0})},ige=(e,t,r)=>{mr(e,r.showClass.backdrop),r.animation?(t.style.setProperty("opacity","0","important"),Bi(t,"grid"),setTimeout(()=>{mr(t,r.showClass.popup),t.style.removeProperty("opacity")},xK)):Bi(t,"grid"),mr([document.documentElement,document.body],ce.shown),r.heightAuto&&r.backdrop&&!r.toast&&mr([document.documentElement,document.body],ce["height-auto"])};var LU={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function oge(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=LU.email),e.input==="url"&&(e.inputValidator=LU.url))}function age(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(oa('Target parameter is not valid, defaulting to "body"'),e.target="body")}function sge(e){oge(e),e.showLoaderOnConfirm&&!e.preConfirm&&oa(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),age(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),Yfe(e)}let _c;var yE=new WeakMap;class ai{constructor(){if(Ife(this,yE,void 0),typeof window>"u")return;_c=this;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const i=Object.freeze(this.constructor.argsToParams(r));this.params=i,this.isAwaitingPromise=!1,xfe(yE,this,this._main(_c.params))}_main(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_me(Object.assign({},r,t)),wt.currentInstance){const o=zp.swalPromiseResolve.get(wt.currentInstance),{isAwaitingPromise:a}=wt.currentInstance;wt.currentInstance._destroy(),a||o({isDismissed:!0}),aD()&&nK()}wt.currentInstance=_c;const n=lge(t,r);sge(n),Object.freeze(n),wt.timeout&&(wt.timeout.stop(),delete wt.timeout),clearTimeout(wt.restoreFocusTimeout);const i=uge(_c);return Z9(_c,n),cn.innerParams.set(_c,n),cge(_c,i,n)}then(t){return TU(yE,this).then(t)}finally(t){return TU(yE,this).finally(t)}}const cge=(e,t,r)=>new Promise((n,i)=>{const o=a=>{e.close({isDismissed:!0,dismiss:a})};zp.swalPromiseResolve.set(e,n),zp.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{lme(e)},t.denyButton.onclick=()=>{ume(e)},t.cancelButton.onclick=()=>{dme(e,o)},t.closeButton.onclick=()=>{o(Rm.close)},Tme(r,t,o),Ope(wt,r,o),eme(e,r),tge(r),dge(wt,r,o),hge(t,r),setTimeout(()=>{t.container.scrollTop=0})}),lge=(e,t)=>{const r=Wme(e),n=Object.assign({},bp,t,r,e);return n.showClass=Object.assign({},bp.showClass,n.showClass),n.hideClass=Object.assign({},bp.hideClass,n.hideClass),n.animation===!1&&(n.showClass={backdrop:"swal2-noanimation"},n.hideClass={}),n},uge=e=>{const t={popup:Ir(),container:aa(),actions:ov(),confirmButton:Lc(),denyButton:Bh(),cancelButton:Tm(),loader:Cm(),closeButton:iD(),validationMessage:aT(),progressSteps:nD()};return cn.domCache.set(e,t),t},dge=(e,t,r)=>{const n=sT();mo(n),t.timer&&(e.timeout=new Gme(()=>{r("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(Bi(n),Pa(n,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&cD(t.timer)})))},hge=(e,t)=>{if(!t.toast){if(!oT(t.allowEnterKey)){V9("allowEnterKey"),mge();return}fge(e)||pge(e,t)||UN(-1,1)}},fge=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const r of t)if(r instanceof HTMLElement&&Zo(r))return r.focus(),!0;return!1},pge=(e,t)=>t.focusDeny&&Zo(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&Zo(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&Zo(e.confirmButton)?(e.confirmButton.focus(),!0):!1,mge=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const r=document.createElement("audio");r.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",r.loop=!0,document.body.appendChild(r),setTimeout(()=>{r.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}ai.prototype.disableButtons=pK;ai.prototype.enableButtons=fK;ai.prototype.getInput=uK;ai.prototype.disableInput=gK;ai.prototype.enableInput=mK;ai.prototype.hideLoading=lw;ai.prototype.disableLoading=lw;ai.prototype.showValidationMessage=yK;ai.prototype.resetValidationMessage=vK;ai.prototype.close=_u;ai.prototype.closePopup=_u;ai.prototype.closeModal=_u;ai.prototype.closeToast=_u;ai.prototype.rejectPromise=aK;ai.prototype.update=wK;ai.prototype._destroy=SK;Object.assign(ai,zme);Object.keys(Sme).forEach(e=>{ai[e]=function(){return _c&&_c[e]?_c[e](...arguments):null}});ai.DismissReason=Rm;ai.version="11.15.2";const re=ai;re.default=re;typeof document<"u"&&function(e,t){var r=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(r),r.styleSheet)r.styleSheet.disabled||(r.styleSheet.cssText=t);else try{r.innerHTML=t}catch{r.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');const $h="https://hcompanion.onrender.com/api";async function gge(e){try{const t=await be.post(`${$h}/user/login`,e);return await sessionStorage.setItem("token",t.data.jwtToken),t.data.userData}catch(t){return console.log(`error ${JSON.stringify(t)}`),t.response.status=="400"&&re.fire({title:"Failed",icon:"error",text:"username or password is wrong"}),!1}}async function yge(e){try{return(await be.post(`${$h}/user/createAccountGoogle`,e)).data.userData}catch(t){console.log(t)}}async function vge(e){try{return(await be.post(`${$h}/user/loginUsingGoogle`,e)).data.userData}catch(t){console.log(t)}}async function Ege({email:e}){try{const t=await be.post(`${$h}/user/forgotPasswordOtp`,{email:e},{withCredentials:!0});return!0}catch(t){return console.log(t),!1}}async function _ge({email:e,otp:t}){try{const r=await be.post(`${$h}/user/checkForgotPasswordOtp`,{email:e,otp:t},{withCredentials:!0});return console.log(r.data),!0}catch(r){return console.log(r),!1}}async function bge({password:e,email:t}){try{const r=await be.post(`${$h}/user/forgotPassword/reset`,{email:t,password:e},{withCredentials:!0});return console.log(r.data),!0}catch(r){return console.log(r),!1}}async function wge({email:e,password:t}){try{const r=await be.post(`${$h}/user/password/reset`,{password:t,email:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(r.data),!0}catch(r){return console.log(r),!1}}var AK={exports:{}},NK={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv=C;function Sge(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tge=typeof Object.is=="function"?Object.is:Sge,Cge=lv.useSyncExternalStore,Rge=lv.useRef,Ige=lv.useEffect,xge=lv.useMemo,Age=lv.useDebugValue;NK.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var o=Rge(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=xge(function(){function c(p){if(!l){if(l=!0,u=p,p=n(p),i!==void 0&&a.hasValue){var m=a.value;if(i(m,p))return d=m}return d=p}if(m=d,Tge(u,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(u=p,m):(u=p,d=g)}var l=!1,u,d,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,i]);var s=Cge(e,o[0],o[1]);return Ige(function(){a.hasValue=!0,a.value=s},[s]),Age(s),s};AK.exports=NK;var Nge=AK.exports;function Oge(e){e()}function kge(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Oge(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var MU={notify(){},get:()=>[]};function Pge(e,t){let r,n=MU,i=0,o=!1;function a(g){u();const y=n.subscribe(g);let v=!1;return()=>{v||(v=!0,y(),d())}}function s(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function l(){return o}function u(){i++,r||(r=e.subscribe(c),n=kge())}function d(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=MU)}function f(){o||(o=!0,u())}function p(){o&&(o=!1,d())}const m={addNestedSub:a,notifyNestedSubs:s,handleChangeWrapper:c,isSubscribed:l,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>n};return m}var Dge=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Lge=Dge(),Mge=()=>typeof navigator<"u"&&navigator.product==="ReactNative",jge=Mge(),Uge=()=>Lge||jge?C.useLayoutEffect:C.useEffect,Fge=Uge(),mR=Symbol.for("react-redux-context"),gR=typeof globalThis<"u"?globalThis:{};function Vge(){if(!C.createContext)return{};const e=gR[mR]??(gR[mR]=new Map);let t=e.get(C.createContext);return t||(t=C.createContext(null),e.set(C.createContext,t)),t}var qu=Vge();function Bge(e){const{children:t,context:r,serverState:n,store:i}=e,o=C.useMemo(()=>{const c=Pge(i);return{store:i,subscription:c,getServerState:n?()=>n:void 0}},[i,n]),a=C.useMemo(()=>i.getState(),[i]);Fge(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const s=r||qu;return C.createElement(s.Provider,{value:o},t)}var $ge=Bge;function pD(e=qu){return function(){return C.useContext(e)}}var OK=pD();function kK(e=qu){const t=e===qu?OK:pD(e),r=()=>{const{store:n}=t();return n};return Object.assign(r,{withTypes:()=>r}),r}var Hge=kK();function zge(e=qu){const t=e===qu?Hge:kK(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var Hh=zge(),Gge=(e,t)=>e===t;function Wge(e=qu){const t=e===qu?OK:pD(e),r=(n,i={})=>{const{equalityFn:o=Gge}=typeof i=="function"?{equalityFn:i}:i,a=t(),{store:s,subscription:c,getServerState:l}=a;C.useRef(!0);const u=C.useCallback({[n.name](f){return n(f)}}[n.name],[n]),d=Nge.useSyncExternalStoreWithSelector(c.addNestedSub,s.getState,l||s.getState,u,o);return C.useDebugValue(d),d};return Object.assign(r,{withTypes:()=>r}),r}var oi=Wge();function Gi(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Kge=typeof Symbol=="function"&&Symbol.observable||"@@observable",jU=Kge,yR=()=>Math.random().toString(36).substring(7).split("").join("."),qge={INIT:`@@redux/INIT${yR()}`,REPLACE:`@@redux/REPLACE${yR()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${yR()}`},hw=qge;function mD(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function PK(e,t,r){if(typeof e!="function")throw new Error(Gi(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Gi(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Gi(1));return r(PK)(e,t)}let n=e,i=t,o=new Map,a=o,s=0,c=!1;function l(){a===o&&(a=new Map,o.forEach((y,v)=>{a.set(v,y)}))}function u(){if(c)throw new Error(Gi(3));return i}function d(y){if(typeof y!="function")throw new Error(Gi(4));if(c)throw new Error(Gi(5));let v=!0;l();const E=s++;return a.set(E,y),function(){if(v){if(c)throw new Error(Gi(6));v=!1,l(),a.delete(E),o=null}}}function f(y){if(!mD(y))throw new Error(Gi(7));if(typeof y.type>"u")throw new Error(Gi(8));if(typeof y.type!="string")throw new Error(Gi(17));if(c)throw new Error(Gi(9));try{c=!0,i=n(i,y)}finally{c=!1}return(o=a).forEach(E=>{E()}),y}function p(y){if(typeof y!="function")throw new Error(Gi(10));n=y,f({type:hw.REPLACE})}function m(){const y=d;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Gi(11));function E(){const S=v;S.next&&S.next(u())}return E(),{unsubscribe:y(E)}},[jU](){return this}}}return f({type:hw.INIT}),{dispatch:f,subscribe:d,getState:u,replaceReducer:p,[jU]:m}}function Yge(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:hw.INIT})>"u")throw new Error(Gi(12));if(typeof r(void 0,{type:hw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Gi(13))})}function Xge(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const a=t[o];typeof e[a]=="function"&&(r[a]=e[a])}const n=Object.keys(r);let i;try{Yge(r)}catch(o){i=o}return function(a={},s){if(i)throw i;let c=!1;const l={};for(let u=0;u<n.length;u++){const d=n[u],f=r[d],p=a[d],m=f(p,s);if(typeof m>"u")throw s&&s.type,new Error(Gi(14));l[d]=m,c=c||m!==p}return c=c||n.length!==Object.keys(a).length,c?l:a}}function fw(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Jge(...e){return t=>(r,n)=>{const i=t(r,n);let o=()=>{throw new Error(Gi(15))};const a={getState:i.getState,dispatch:(c,...l)=>o(c,...l)},s=e.map(c=>c(a));return o=fw(...s)(i.dispatch),{...i,dispatch:o}}}function Qge(e){return mD(e)&&"type"in e&&typeof e.type=="string"}var DK=Symbol.for("immer-nothing"),UU=Symbol.for("immer-draftable"),Da=Symbol.for("immer-state");function zs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Wp=Object.getPrototypeOf;function bh(e){return!!e&&!!e[Da]}function xl(e){var t;return e?LK(e)||Array.isArray(e)||!!e[UU]||!!((t=e.constructor)!=null&&t[UU])||dT(e)||hT(e):!1}var Zge=Object.prototype.constructor.toString();function LK(e){if(!e||typeof e!="object")return!1;const t=Wp(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Zge}function pw(e,t){uT(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function uT(e){const t=e[Da];return t?t.type_:Array.isArray(e)?1:dT(e)?2:hT(e)?3:0}function VN(e,t){return uT(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function MK(e,t,r){const n=uT(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function eye(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function dT(e){return e instanceof Map}function hT(e){return e instanceof Set}function xd(e){return e.copy_||e.base_}function BN(e,t){if(dT(e))return new Map(e);if(hT(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=LK(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Da];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const a=i[o],s=n[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(Wp(e),n)}else{const n=Wp(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function gD(e,t=!1){return fT(e)||bh(e)||!xl(e)||(uT(e)>1&&(e.set=e.add=e.clear=e.delete=tye),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>gD(n,!0))),e}function tye(){zs(2)}function fT(e){return Object.isFrozen(e)}var rye={};function wh(e){const t=rye[e];return t||zs(0,e),t}var l0;function jK(){return l0}function nye(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function FU(e,t){t&&(wh("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function $N(e){HN(e),e.drafts_.forEach(iye),e.drafts_=null}function HN(e){e===l0&&(l0=e.parent_)}function VU(e){return l0=nye(l0,e)}function iye(e){const t=e[Da];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function BU(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Da].modified_&&($N(t),zs(4)),xl(e)&&(e=mw(t,e),t.parent_||gw(t,e)),t.patches_&&wh("Patches").generateReplacementPatches_(r[Da].base_,e,t.patches_,t.inversePatches_)):e=mw(t,r,[]),$N(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==DK?e:void 0}function mw(e,t,r){if(fT(t))return t;const n=t[Da];if(!n)return pw(t,(i,o)=>$U(e,n,t,i,o,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return gw(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),pw(o,(s,c)=>$U(e,n,i,s,c,r,a)),gw(e,i,!1),r&&e.patches_&&wh("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function $U(e,t,r,n,i,o,a){if(bh(i)){const s=o&&t&&t.type_!==3&&!VN(t.assigned_,n)?o.concat(n):void 0,c=mw(e,i,s);if(MK(r,n,c),bh(c))e.canAutoFreeze_=!1;else return}else a&&r.add(i);if(xl(i)&&!fT(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;mw(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&gw(e,i)}}function gw(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&gD(t,r)}function oye(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:jK(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=yD;r&&(i=[n],o=u0);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return n.draft_=s,n.revoke_=a,s}var yD={get(e,t){if(t===Da)return e;const r=xd(e);if(!VN(r,t))return aye(e,r,t);const n=r[t];return e.finalized_||!xl(n)?n:n===vR(e.base_,t)?(ER(e),e.copy_[t]=GN(n,e)):n},has(e,t){return t in xd(e)},ownKeys(e){return Reflect.ownKeys(xd(e))},set(e,t,r){const n=UK(xd(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=vR(xd(e),t),o=i==null?void 0:i[Da];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(eye(r,i)&&(r!==void 0||VN(e.base_,t)))return!0;ER(e),zN(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return vR(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ER(e),zN(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=xd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){zs(11)},getPrototypeOf(e){return Wp(e.base_)},setPrototypeOf(){zs(12)}},u0={};pw(yD,(e,t)=>{u0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});u0.deleteProperty=function(e,t){return u0.set.call(this,e,t,void 0)};u0.set=function(e,t,r){return yD.set.call(this,e[0],t,r,e[0])};function vR(e,t){const r=e[Da];return(r?xd(r):e)[t]}function aye(e,t,r){var i;const n=UK(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function UK(e,t){if(!(t in e))return;let r=Wp(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Wp(r)}}function zN(e){e.modified_||(e.modified_=!0,e.parent_&&zN(e.parent_))}function ER(e){e.copy_||(e.copy_=BN(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var sye=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const a=this;return function(c=o,...l){return a.produce(c,u=>r.call(this,u,...l))}}typeof r!="function"&&zs(6),n!==void 0&&typeof n!="function"&&zs(7);let i;if(xl(t)){const o=VU(this),a=GN(t,void 0);let s=!0;try{i=r(a),s=!1}finally{s?$N(o):HN(o)}return FU(o,n),BU(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===DK&&(i=void 0),this.autoFreeze_&&gD(i,!0),n){const o=[],a=[];wh("Patches").generateReplacementPatches_(t,i,o,a),n(o,a)}return i}else zs(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...s)=>this.produceWithPatches(a,c=>t(c,...s));let n,i;return[this.produce(t,r,(a,s)=>{n=a,i=s}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){xl(e)||zs(8),bh(e)&&(e=cye(e));const t=VU(this),r=GN(e,void 0);return r[Da].isManual_=!0,HN(t),r}finishDraft(e,t){const r=e&&e[Da];(!r||!r.isManual_)&&zs(9);const{scope_:n}=r;return FU(n,t),BU(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=wh("Patches").applyPatches_;return bh(e)?n(e,t):this.produce(e,i=>n(i,t))}};function GN(e,t){const r=dT(e)?wh("MapSet").proxyMap_(e,t):hT(e)?wh("MapSet").proxySet_(e,t):oye(e,t);return(t?t.scope_:jK()).drafts_.push(r),r}function cye(e){return bh(e)||zs(10,e),FK(e)}function FK(e){if(!xl(e)||fT(e))return e;const t=e[Da];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=BN(e,t.scope_.immer_.useStrictShallowCopy_)}else r=BN(e,!0);return pw(r,(n,i)=>{MK(r,n,FK(i))}),t&&(t.finalized_=!1),r}var La=new sye,VK=La.produce;La.produceWithPatches.bind(La);La.setAutoFreeze.bind(La);La.setUseStrictShallowCopy.bind(La);La.applyPatches.bind(La);La.createDraft.bind(La);La.finishDraft.bind(La);function BK(e){return({dispatch:r,getState:n})=>i=>o=>typeof o=="function"?o(r,n,e):i(o)}var lye=BK(),uye=BK,dye=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fw:fw.apply(null,arguments)};function HU(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(bl(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Qge(n)&&n.type===e,r}var $K=class Hg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Hg.prototype)}static get[Symbol.species](){return Hg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Hg(...t[0].concat(this)):new Hg(...t.concat(this))}};function zU(e){return xl(e)?VK(e,()=>{}):e}function GU(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function hye(e){return typeof e=="boolean"}var fye=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let a=new $K;return r&&(hye(r)?a.push(lye):a.push(uye(r.extraArgument))),a},pye="RTK_autoBatch",WU=e=>t=>{setTimeout(t,e)},mye=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,o=!1,a=!1;const s=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:WU(10):e.type==="callback"?e.queueNotification:WU(e.timeout),l=()=>{a=!1,o&&(o=!1,s.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const d=()=>i&&u(),f=n.subscribe(d);return s.add(u),()=>{f(),s.delete(u)}},dispatch(u){var d;try{return i=!((d=u==null?void 0:u.meta)!=null&&d[pye]),o=!i,o&&(a||(a=!0,c(l))),n.dispatch(u)}finally{i=!0}}})},gye=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new $K(e);return n&&i.push(mye(typeof n=="object"?n:void 0)),i};function yye(e){const t=fye(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:a=void 0}=e||{};let s;if(typeof r=="function")s=r;else if(mD(r))s=Xge(r);else throw new Error(bl(1));let c;typeof n=="function"?c=n(t):c=t();let l=fw;i&&(l=dye({trace:!1,...typeof i=="object"&&i}));const u=Jge(...c),d=gye(u);let f=typeof a=="function"?a(d):d();const p=l(...f);return PK(s,o,p)}function HK(e){const t={},r=[];let n;const i={addCase(o,a){const s=typeof o=="string"?o:o.type;if(!s)throw new Error(bl(28));if(s in t)throw new Error(bl(29));return t[s]=a,i},addMatcher(o,a){return r.push({matcher:o,reducer:a}),i},addDefaultCase(o){return n=o,i}};return e(i),[t,r,n]}function vye(e){return typeof e=="function"}function Eye(e,t){let[r,n,i]=HK(t),o;if(vye(e))o=()=>zU(e());else{const s=zU(e);o=()=>s}function a(s=o(),c){let l=[r[c.type],...n.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return l.filter(u=>!!u).length===0&&(l=[i]),l.reduce((u,d)=>{if(d)if(bh(u)){const p=d(u,c);return p===void 0?u:p}else{if(xl(u))return VK(u,f=>d(f,c));{const f=d(u,c);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},s)}return a.getInitialState=o,a}var _ye=Symbol.for("rtk-slice-createasyncthunk");function bye(e,t){return`${e}/${t}`}function wye({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[_ye];return function(i){const{name:o,reducerPath:a=o}=i;if(!o)throw new Error(bl(11));typeof process<"u";const s=(typeof i.reducers=="function"?i.reducers(Tye()):i.reducers)||{},c=Object.keys(s),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(b,S){const A=typeof b=="string"?b:b.type;if(!A)throw new Error(bl(12));if(A in l.sliceCaseReducersByType)throw new Error(bl(13));return l.sliceCaseReducersByType[A]=S,u},addMatcher(b,S){return l.sliceMatchers.push({matcher:b,reducer:S}),u},exposeAction(b,S){return l.actionCreators[b]=S,u},exposeCaseReducer(b,S){return l.sliceCaseReducersByName[b]=S,u}};c.forEach(b=>{const S=s[b],A={reducerName:b,type:bye(o,b),createNotation:typeof i.reducers=="function"};Rye(S)?xye(A,S,u,t):Cye(A,S,u)});function d(){const[b={},S=[],A=void 0]=typeof i.extraReducers=="function"?HK(i.extraReducers):[i.extraReducers],N={...b,...l.sliceCaseReducersByType};return Eye(i.initialState,D=>{for(let M in N)D.addCase(M,N[M]);for(let M of l.sliceMatchers)D.addMatcher(M.matcher,M.reducer);for(let M of S)D.addMatcher(M.matcher,M.reducer);A&&D.addDefaultCase(A)})}const f=b=>b,p=new Map;let m;function g(b,S){return m||(m=d()),m(b,S)}function y(){return m||(m=d()),m.getInitialState()}function v(b,S=!1){function A(D){let M=D[b];return typeof M>"u"&&S&&(M=y()),M}function N(D=f){const M=GU(p,S,()=>new WeakMap);return GU(M,D,()=>{const H={};for(const[V,G]of Object.entries(i.selectors??{}))H[V]=Sye(G,D,y,S);return H})}return{reducerPath:b,getSelectors:N,get selectors(){return N(A)},selectSlice:A}}const E={name:o,reducer:g,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:y,...v(a),injectInto(b,{reducerPath:S,...A}={}){const N=S??a;return b.inject({reducerPath:N,reducer:g},A),{...E,...v(N,!0)}}};return E}}function Sye(e,t,r,n){function i(o,...a){let s=t(o);return typeof s>"u"&&n&&(s=r()),e(s,...a)}return i.unwrapped=e,i}var Im=wye();function Tye(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Cye({type:e,reducerName:t,createNotation:r},n,i){let o,a;if("reducer"in n){if(r&&!Iye(n))throw new Error(bl(17));o=n.reducer,a=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,a?HU(e,a):HU(e))}function Rye(e){return e._reducerDefinitionType==="asyncThunk"}function Iye(e){return e._reducerDefinitionType==="reducerWithPrepare"}function xye({type:e,reducerName:t},r,n,i){if(!i)throw new Error(bl(18));const{payloadCreator:o,fulfilled:a,pending:s,rejected:c,settled:l,options:u}=r,d=i(e,o,u);n.exposeAction(t,d),a&&n.addCase(d.fulfilled,a),s&&n.addCase(d.pending,s),c&&n.addCase(d.rejected,c),l&&n.addMatcher(d.settled,l),n.exposeCaseReducer(t,{fulfilled:a||vE,pending:s||vE,rejected:c||vE,settled:l||vE})}function vE(){}function bl(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Aye={username:"",email:"",role:"",isLoggedIn:!1},zK=Im({name:"user",initialState:Aye,reducers:{setUser(e,t){e.username=t.payload.username,e.email=t.payload.email,e.role=t.payload.role,e.isLoggedIn=t.payload.role}}}),{setUser:Ao}=zK.actions,Nye=zK.reducer;var WN={exports:{}},Sh={},GK={exports:{}},Oye="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kye=Oye,Pye=kye;function WK(){}function KK(){}KK.resetWarningCache=WK;var Dye=function(){function e(n,i,o,a,s,c){if(c!==Pye){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:KK,resetWarningCache:WK};return r.PropTypes=r,r};GK.exports=Dye();var qK=GK.exports,KN={exports:{}},Zs={},qN={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var r="none",n="contents",i=/^(input|select|textarea|button|object|iframe)$/;function o(d,f){return f.getPropertyValue("overflow")!=="visible"||d.scrollWidth<=0&&d.scrollHeight<=0}function a(d){var f=d.offsetWidth<=0&&d.offsetHeight<=0;if(f&&!d.innerHTML)return!0;try{var p=window.getComputedStyle(d),m=p.getPropertyValue("display");return f?m!==n&&o(d,p):m===r}catch{return console.warn("Failed to inspect element style"),!1}}function s(d){for(var f=d,p=d.getRootNode&&d.getRootNode();f&&f!==document.body;){if(p&&f===p&&(f=p.host.parentNode),a(f))return!1;f=f.parentNode}return!0}function c(d,f){var p=d.nodeName.toLowerCase(),m=i.test(p)&&!d.disabled||p==="a"&&d.href||f;return m&&s(d)}function l(d){var f=d.getAttribute("tabindex");f===null&&(f=void 0);var p=isNaN(f);return(p||f>=0)&&c(d,!p)}function u(d){var f=[].slice.call(d.querySelectorAll("*"),0).reduce(function(p,m){return p.concat(m.shadowRoot?u(m.shadowRoot):[m])},[]);return f.filter(l)}e.exports=t.default})(qN,qN.exports);var YK=qN.exports;Object.defineProperty(Zs,"__esModule",{value:!0});Zs.resetState=Uye;Zs.log=Fye;Zs.handleBlur=d0;Zs.handleFocus=h0;Zs.markForFocusLater=Vye;Zs.returnFocus=Bye;Zs.popWithoutFocus=$ye;Zs.setupScopedFocus=Hye;Zs.teardownScopedFocus=zye;var Lye=YK,Mye=jye(Lye);function jye(e){return e&&e.__esModule?e:{default:e}}var Kp=[],Qf=null,YN=!1;function Uye(){Kp=[]}function Fye(){}function d0(){YN=!0}function h0(){if(YN){if(YN=!1,!Qf)return;setTimeout(function(){if(!Qf.contains(document.activeElement)){var e=(0,Mye.default)(Qf)[0]||Qf;e.focus()}},0)}}function Vye(){Kp.push(document.activeElement)}function Bye(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=null;try{Kp.length!==0&&(t=Kp.pop(),t.focus({preventScroll:e}));return}catch{console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}}function $ye(){Kp.length>0&&Kp.pop()}function Hye(e){Qf=e,window.addEventListener?(window.addEventListener("blur",d0,!1),document.addEventListener("focus",h0,!0)):(window.attachEvent("onBlur",d0),document.attachEvent("onFocus",h0))}function zye(){Qf=null,window.addEventListener?(window.removeEventListener("blur",d0),document.removeEventListener("focus",h0)):(window.detachEvent("onBlur",d0),document.detachEvent("onFocus",h0))}var XN={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=YK,n=i(r);function i(s){return s&&s.__esModule?s:{default:s}}function o(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return s.activeElement.shadowRoot?o(s.activeElement.shadowRoot):s.activeElement}function a(s,c){var l=(0,n.default)(s);if(!l.length){c.preventDefault();return}var u=void 0,d=c.shiftKey,f=l[0],p=l[l.length-1],m=o();if(s===m){if(!d)return;u=p}if(p===m&&!d&&(u=f),f===m&&d&&(u=p),u){c.preventDefault(),u.focus();return}var g=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),y=g!=null&&g[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(y){var v=l.indexOf(m);if(v>-1&&(v+=d?-1:1),u=l[v],typeof u>"u"){c.preventDefault(),u=d?p:f,u.focus();return}c.preventDefault(),u.focus()}}e.exports=t.default})(XN,XN.exports);var Gye=XN.exports,ec={},Wye=function(){},Kye=Wye,Ys={},XK={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(e){(function(){var t=!!(typeof window<"u"&&window.document&&window.document.createElement),r={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen};e.exports?e.exports=r:window.ExecutionEnvironment=r})()})(XK);var qye=XK.exports;Object.defineProperty(Ys,"__esModule",{value:!0});Ys.canUseDOM=Ys.SafeNodeList=Ys.SafeHTMLCollection=void 0;var Yye=qye,Xye=Jye(Yye);function Jye(e){return e&&e.__esModule?e:{default:e}}var pT=Xye.default,Qye=pT.canUseDOM?window.HTMLElement:{};Ys.SafeHTMLCollection=pT.canUseDOM?window.HTMLCollection:{};Ys.SafeNodeList=pT.canUseDOM?window.NodeList:{};Ys.canUseDOM=pT.canUseDOM;Ys.default=Qye;Object.defineProperty(ec,"__esModule",{value:!0});ec.resetState=n0e;ec.log=i0e;ec.assertNodeList=JK;ec.setElement=o0e;ec.validateElement=vD;ec.hide=a0e;ec.show=s0e;ec.documentNotReadyOrSSRTesting=c0e;var Zye=Kye,e0e=r0e(Zye),t0e=Ys;function r0e(e){return e&&e.__esModule?e:{default:e}}var as=null;function n0e(){as&&(as.removeAttribute?as.removeAttribute("aria-hidden"):as.length!=null?as.forEach(function(e){return e.removeAttribute("aria-hidden")}):document.querySelectorAll(as).forEach(function(e){return e.removeAttribute("aria-hidden")})),as=null}function i0e(){}function JK(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function o0e(e){var t=e;if(typeof t=="string"&&t0e.canUseDOM){var r=document.querySelectorAll(t);JK(r,t),t=r}return as=t||as,as}function vD(e){var t=e||as;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,e0e.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function a0e(e){var t=!0,r=!1,n=void 0;try{for(var i=vD(e)[Symbol.iterator](),o;!(t=(o=i.next()).done);t=!0){var a=o.value;a.setAttribute("aria-hidden","true")}}catch(s){r=!0,n=s}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}function s0e(e){var t=!0,r=!1,n=void 0;try{for(var i=vD(e)[Symbol.iterator](),o;!(t=(o=i.next()).done);t=!0){var a=o.value;a.removeAttribute("aria-hidden")}}catch(s){r=!0,n=s}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}function c0e(){as=null}var xm={};Object.defineProperty(xm,"__esModule",{value:!0});xm.resetState=l0e;xm.log=u0e;var gy={},yy={};function KU(e,t){e.classList.remove(t)}function l0e(){var e=document.getElementsByTagName("html")[0];for(var t in gy)KU(e,gy[t]);var r=document.body;for(var n in yy)KU(r,yy[n]);gy={},yy={}}function u0e(){}var d0e=function(t,r){return t[r]||(t[r]=0),t[r]+=1,r},h0e=function(t,r){return t[r]&&(t[r]-=1),r},f0e=function(t,r,n){n.forEach(function(i){d0e(r,i),t.add(i)})},p0e=function(t,r,n){n.forEach(function(i){h0e(r,i),r[i]===0&&t.remove(i)})};xm.add=function(t,r){return f0e(t.classList,t.nodeName.toLowerCase()=="html"?gy:yy,r.split(" "))};xm.remove=function(t,r){return p0e(t.classList,t.nodeName.toLowerCase()=="html"?gy:yy,r.split(" "))};var Am={};Object.defineProperty(Am,"__esModule",{value:!0});Am.log=g0e;Am.resetState=y0e;function m0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var QK=function e(){var t=this;m0e(this,e),this.register=function(r){t.openInstances.indexOf(r)===-1&&(t.openInstances.push(r),t.emit("register"))},this.deregister=function(r){var n=t.openInstances.indexOf(r);n!==-1&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(r){t.subscribers.push(r)},this.emit=function(r){t.subscribers.forEach(function(n){return n(r,t.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},yw=new QK;function g0e(){console.log("portalOpenInstances ----------"),console.log(yw.openInstances.length),yw.openInstances.forEach(function(e){return console.log(e)}),console.log("end portalOpenInstances ----------")}function y0e(){yw=new QK}Am.default=yw;var ED={};Object.defineProperty(ED,"__esModule",{value:!0});ED.resetState=b0e;ED.log=w0e;var v0e=Am,E0e=_0e(v0e);function _0e(e){return e&&e.__esModule?e:{default:e}}var so=void 0,Fs=void 0,ah=[];function b0e(){for(var e=[so,Fs],t=0;t<e.length;t++){var r=e[t];r&&r.parentNode&&r.parentNode.removeChild(r)}so=Fs=null,ah=[]}function w0e(){console.log("bodyTrap ----------"),console.log(ah.length);for(var e=[so,Fs],t=0;t<e.length;t++){var r=e[t],n=r||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")}function qU(){ah.length!==0&&ah[ah.length-1].focusContent()}function S0e(e,t){!so&&!Fs&&(so=document.createElement("div"),so.setAttribute("data-react-modal-body-trap",""),so.style.position="absolute",so.style.opacity="0",so.setAttribute("tabindex","0"),so.addEventListener("focus",qU),Fs=so.cloneNode(),Fs.addEventListener("focus",qU)),ah=t,ah.length>0?(document.body.firstChild!==so&&document.body.insertBefore(so,document.body.firstChild),document.body.lastChild!==Fs&&document.body.appendChild(Fs)):(so.parentElement&&so.parentElement.removeChild(so),Fs.parentElement&&Fs.parentElement.removeChild(Fs))}E0e.default.subscribe(S0e);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function($){for(var F=1;F<arguments.length;F++){var K=arguments[F];for(var k in K)Object.prototype.hasOwnProperty.call(K,k)&&($[k]=K[k])}return $},n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},i=function(){function $(F,K){for(var k=0;k<K.length;k++){var P=K[k];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(F,P.key,P)}}return function(F,K,k){return K&&$(F.prototype,K),k&&$(F,k),F}}(),o=C,a=qK,s=A(a),c=Zs,l=S(c),u=Gye,d=A(u),f=ec,p=S(f),m=xm,g=S(m),y=Ys,v=A(y),E=Am,b=A(E);function S($){if($&&$.__esModule)return $;var F={};if($!=null)for(var K in $)Object.prototype.hasOwnProperty.call($,K)&&(F[K]=$[K]);return F.default=$,F}function A($){return $&&$.__esModule?$:{default:$}}function N($,F){if(!($ instanceof F))throw new TypeError("Cannot call a class as a function")}function D($,F){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:$}function M($,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);$.prototype=Object.create(F&&F.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf($,F):$.__proto__=F)}var H={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},V=function(F){return F.code==="Tab"||F.keyCode===9},G=function(F){return F.code==="Escape"||F.keyCode===27},Y=0,Z=function($){M(F,$);function F(K){N(this,F);var k=D(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,K));return k.setOverlayRef=function(P){k.overlay=P,k.props.overlayRef&&k.props.overlayRef(P)},k.setContentRef=function(P){k.content=P,k.props.contentRef&&k.props.contentRef(P)},k.afterClose=function(){var P=k.props,B=P.appElement,R=P.ariaHideApp,_=P.htmlOpenClassName,x=P.bodyOpenClassName,T=P.parentSelector,W=T&&T().ownerDocument||document;x&&g.remove(W.body,x),_&&g.remove(W.getElementsByTagName("html")[0],_),R&&Y>0&&(Y-=1,Y===0&&p.show(B)),k.props.shouldFocusAfterRender&&(k.props.shouldReturnFocusAfterClose?(l.returnFocus(k.props.preventScroll),l.teardownScopedFocus()):l.popWithoutFocus()),k.props.onAfterClose&&k.props.onAfterClose(),b.default.deregister(k)},k.open=function(){k.beforeOpen(),k.state.afterOpen&&k.state.beforeClose?(clearTimeout(k.closeTimer),k.setState({beforeClose:!1})):(k.props.shouldFocusAfterRender&&(l.setupScopedFocus(k.node),l.markForFocusLater()),k.setState({isOpen:!0},function(){k.openAnimationFrame=requestAnimationFrame(function(){k.setState({afterOpen:!0}),k.props.isOpen&&k.props.onAfterOpen&&k.props.onAfterOpen({overlayEl:k.overlay,contentEl:k.content})})}))},k.close=function(){k.props.closeTimeoutMS>0?k.closeWithTimeout():k.closeWithoutTimeout()},k.focusContent=function(){return k.content&&!k.contentHasFocus()&&k.content.focus({preventScroll:!0})},k.closeWithTimeout=function(){var P=Date.now()+k.props.closeTimeoutMS;k.setState({beforeClose:!0,closesAt:P},function(){k.closeTimer=setTimeout(k.closeWithoutTimeout,k.state.closesAt-Date.now())})},k.closeWithoutTimeout=function(){k.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},k.afterClose)},k.handleKeyDown=function(P){V(P)&&(0,d.default)(k.content,P),k.props.shouldCloseOnEsc&&G(P)&&(P.stopPropagation(),k.requestClose(P))},k.handleOverlayOnClick=function(P){k.shouldClose===null&&(k.shouldClose=!0),k.shouldClose&&k.props.shouldCloseOnOverlayClick&&(k.ownerHandlesClose()?k.requestClose(P):k.focusContent()),k.shouldClose=null},k.handleContentOnMouseUp=function(){k.shouldClose=!1},k.handleOverlayOnMouseDown=function(P){!k.props.shouldCloseOnOverlayClick&&P.target==k.overlay&&P.preventDefault()},k.handleContentOnClick=function(){k.shouldClose=!1},k.handleContentOnMouseDown=function(){k.shouldClose=!1},k.requestClose=function(P){return k.ownerHandlesClose()&&k.props.onRequestClose(P)},k.ownerHandlesClose=function(){return k.props.onRequestClose},k.shouldBeClosed=function(){return!k.state.isOpen&&!k.state.beforeClose},k.contentHasFocus=function(){return document.activeElement===k.content||k.content.contains(document.activeElement)},k.buildClassName=function(P,B){var R=(typeof B>"u"?"undefined":n(B))==="object"?B:{base:H[P],afterOpen:H[P]+"--after-open",beforeClose:H[P]+"--before-close"},_=R.base;return k.state.afterOpen&&(_=_+" "+R.afterOpen),k.state.beforeClose&&(_=_+" "+R.beforeClose),typeof B=="string"&&B?_+" "+B:_},k.attributesFromObject=function(P,B){return Object.keys(B).reduce(function(R,_){return R[P+"-"+_]=B[_],R},{})},k.state={afterOpen:!1,beforeClose:!1},k.shouldClose=null,k.moveFromContentToOverlay=null,k}return i(F,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(k,P){this.props.isOpen&&!k.isOpen?this.open():!this.props.isOpen&&k.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!P.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var k=this.props,P=k.appElement,B=k.ariaHideApp,R=k.htmlOpenClassName,_=k.bodyOpenClassName,x=k.parentSelector,T=x&&x().ownerDocument||document;_&&g.add(T.body,_),R&&g.add(T.getElementsByTagName("html")[0],R),B&&(Y+=1,p.hide(P)),b.default.register(this)}},{key:"render",value:function(){var k=this.props,P=k.id,B=k.className,R=k.overlayClassName,_=k.defaultStyles,x=k.children,T=B?{}:_.content,W=R?{}:_.overlay;if(this.shouldBeClosed())return null;var U={ref:this.setOverlayRef,className:this.buildClassName("overlay",R),style:r({},W,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},X=r({id:P,ref:this.setContentRef,style:r({},T,this.props.style.content),className:this.buildClassName("content",B),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),ae=this.props.contentElement(X,x);return this.props.overlayElement(U,ae)}}]),F}(o.Component);Z.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},Z.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),parentSelector:s.default.func,bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(v.default),s.default.instanceOf(y.SafeHTMLCollection),s.default.instanceOf(y.SafeNodeList),s.default.arrayOf(s.default.instanceOf(v.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},t.default=Z,e.exports=t.default})(KN,KN.exports);var T0e=KN.exports;function ZK(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function eq(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n??null}this.setState(t.bind(this))}function tq(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}ZK.__suppressDeprecationWarning=!0;eq.__suppressDeprecationWarning=!0;tq.__suppressDeprecationWarning=!0;function C0e(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,i=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?i="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),r!==null||n!==null||i!==null){var o=e.displayName||e.name,a=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+a+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=ZK,t.componentWillReceiveProps=eq),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=tq;var s=t.componentDidUpdate;t.componentDidUpdate=function(l,u,d){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:d;s.call(this,l,u,f)}}return e}const R0e=Object.freeze(Object.defineProperty({__proto__:null,polyfill:C0e},Symbol.toStringTag,{value:"Module"})),I0e=z7(R0e);Object.defineProperty(Sh,"__esModule",{value:!0});Sh.bodyOpenClassName=Sh.portalClassName=void 0;var YU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x0e=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),rq=C,vw=uv(rq),A0e=kS,Ew=uv(A0e),N0e=qK,Ft=uv(N0e),O0e=T0e,XU=uv(O0e),k0e=ec,P0e=L0e(k0e),bu=Ys,JU=uv(bu),D0e=I0e;function L0e(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function uv(e){return e&&e.__esModule?e:{default:e}}function M0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QU(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function j0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var U0e=Sh.portalClassName="ReactModalPortal",F0e=Sh.bodyOpenClassName="ReactModal__Body--open",Ad=bu.canUseDOM&&Ew.default.createPortal!==void 0,ZU=function(t){return document.createElement(t)},e4=function(){return Ad?Ew.default.createPortal:Ew.default.unstable_renderSubtreeIntoContainer};function EE(e){return e()}var dv=function(e){j0e(t,e);function t(){var r,n,i,o;M0e(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return o=(n=(i=QU(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),i),i.removePortal=function(){!Ad&&Ew.default.unmountComponentAtNode(i.node);var l=EE(i.props.parentSelector);l&&l.contains(i.node)?l.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(l){i.portal=l},i.renderPortal=function(l){var u=e4(),d=u(i,vw.default.createElement(XU.default,YU({defaultStyles:t.defaultStyles},l)),i.node);i.portalRef(d)},n),QU(i,o)}return x0e(t,[{key:"componentDidMount",value:function(){if(bu.canUseDOM){Ad||(this.node=ZU("div")),this.node.className=this.props.portalClassName;var n=EE(this.props.parentSelector);n.appendChild(this.node),!Ad&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(n){var i=EE(n.parentSelector),o=EE(this.props.parentSelector);return{prevParent:i,nextParent:o}}},{key:"componentDidUpdate",value:function(n,i,o){if(bu.canUseDOM){var a=this.props,s=a.isOpen,c=a.portalClassName;n.portalClassName!==c&&(this.node.className=c);var l=o.prevParent,u=o.nextParent;u!==l&&(l.removeChild(this.node),u.appendChild(this.node)),!(!n.isOpen&&!s)&&!Ad&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!bu.canUseDOM||!this.node||!this.portal)){var n=this.portal.state,i=Date.now(),o=n.isOpen&&this.props.closeTimeoutMS&&(n.closesAt||i+this.props.closeTimeoutMS);o?(n.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,o-i)):this.removePortal()}}},{key:"render",value:function(){if(!bu.canUseDOM||!Ad)return null;!this.node&&Ad&&(this.node=ZU("div"));var n=e4();return n(vw.default.createElement(XU.default,YU({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(n){P0e.setElement(n)}}]),t}(rq.Component);dv.propTypes={isOpen:Ft.default.bool.isRequired,style:Ft.default.shape({content:Ft.default.object,overlay:Ft.default.object}),portalClassName:Ft.default.string,bodyOpenClassName:Ft.default.string,htmlOpenClassName:Ft.default.string,className:Ft.default.oneOfType([Ft.default.string,Ft.default.shape({base:Ft.default.string.isRequired,afterOpen:Ft.default.string.isRequired,beforeClose:Ft.default.string.isRequired})]),overlayClassName:Ft.default.oneOfType([Ft.default.string,Ft.default.shape({base:Ft.default.string.isRequired,afterOpen:Ft.default.string.isRequired,beforeClose:Ft.default.string.isRequired})]),appElement:Ft.default.oneOfType([Ft.default.instanceOf(JU.default),Ft.default.instanceOf(bu.SafeHTMLCollection),Ft.default.instanceOf(bu.SafeNodeList),Ft.default.arrayOf(Ft.default.instanceOf(JU.default))]),onAfterOpen:Ft.default.func,onRequestClose:Ft.default.func,closeTimeoutMS:Ft.default.number,ariaHideApp:Ft.default.bool,shouldFocusAfterRender:Ft.default.bool,shouldCloseOnOverlayClick:Ft.default.bool,shouldReturnFocusAfterClose:Ft.default.bool,preventScroll:Ft.default.bool,parentSelector:Ft.default.func,aria:Ft.default.object,data:Ft.default.object,role:Ft.default.string,contentLabel:Ft.default.string,shouldCloseOnEsc:Ft.default.bool,overlayRef:Ft.default.func,contentRef:Ft.default.func,id:Ft.default.string,overlayElement:Ft.default.func,contentElement:Ft.default.func};dv.defaultProps={isOpen:!1,portalClassName:U0e,bodyOpenClassName:F0e,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(t,r){return vw.default.createElement("div",t,r)},contentElement:function(t,r){return vw.default.createElement("div",t,r)}};dv.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,D0e.polyfill)(dv);Sh.default=dv;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Sh,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}t.default=n.default,e.exports=t.default})(WN,WN.exports);var V0e=WN.exports;const mT=ia(V0e),nq=Ii().shape({password:jt().required("Enter password").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirmPassword:jt().required("Enter confirmpassword").oneOf([n9("password"),null],"Should be matching with password field")}),iq=e=>{try{const[t,r]=e.split("@");return`${t.slice(0,4)+"************"}@${r}`}catch(t){console.log(t)}};var oq={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},t4=Or.createContext&&Or.createContext(oq),B0e=["attr","size","title"];function $0e(e,t){if(e==null)return{};var r=H0e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function H0e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _w(){return _w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_w.apply(this,arguments)}function r4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r4(Object(r),!0).forEach(function(n){z0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z0e(e,t,r){return t=G0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G0e(e){var t=W0e(e,"string");return typeof t=="symbol"?t:t+""}function W0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aq(e){return e&&e.map((t,r)=>Or.createElement(t.tag,bw({key:r},t.attr),aq(t.child)))}function xi(e){return t=>Or.createElement(K0e,_w({attr:bw({},e.attr)},t),aq(e.child))}function K0e(e){var t=r=>{var{attr:n,size:i,title:o}=e,a=$0e(e,B0e),s=i||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),Or.createElement("svg",_w({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:c,style:bw(bw({color:e.color||r.color},r.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&Or.createElement("title",null,o),e.children)};return t4!==void 0?Or.createElement(t4.Consumer,null,r=>t(r)):t(oq)}function q0e(e){return xi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Y0e(e){return xi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function X0e(e){return xi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(e)}function sq(e){return xi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function J0e(e){return xi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(e)}function Q0e(e){return xi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}function Z0e(e){return xi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},child:[]}]})(e)}function eve(e){return xi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function cq(e){return xi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"},child:[]}]})(e)}function tve(e){return xi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"},child:[]}]})(e)}function lq(e){return xi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"},child:[]}]})(e)}function rve(e){return xi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"},child:[]}]})(e)}function nve(e){return xi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"},child:[]}]})(e)}const _D="-";function ive(e){const t=ave(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;function i(a){const s=a.split(_D);return s[0]===""&&s.length!==1&&s.shift(),uq(s,t)||ove(a)}function o(a,s){const c=r[a]||[];return s&&n[a]?[...c,...n[a]]:c}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function uq(e,t){var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?uq(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(_D);return(a=t.validators.find(({validator:s})=>s(o)))==null?void 0:a.classGroupId}const n4=/^\[(.+)\]$/;function ove(e){if(n4.test(e)){const t=n4.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function ave(e){const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return cve(Object.entries(e.classGroups),r).forEach(([o,a])=>{JN(a,n,o,t)}),n}function JN(e,t,r,n){e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:i4(t,i);o.classGroupId=r;return}if(typeof i=="function"){if(sve(i)){JN(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([o,a])=>{JN(a,i4(t,o),r,n)})})}function i4(e,t){let r=e;return t.split(_D).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function sve(e){return e.isThemeGetter}function cve(e,t){return t?e.map(([r,n])=>{const i=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,s])=>[t+a,s])):o);return[r,i]}):e}function lve(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;function i(o,a){r.set(o,a),t++,t>e&&(t=0,n=r,r=new Map)}return{get(o){let a=r.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return i(o,a),a},set(o,a){r.has(o)?r.set(o,a):i(o,a)}}}const dq="!";function uve(e){const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],o=t.length;function a(s){const c=[];let l=0,u=0,d;for(let y=0;y<s.length;y++){let v=s[y];if(l===0){if(v===i&&(n||s.slice(y,y+o)===t)){c.push(s.slice(u,y)),u=y+o;continue}if(v==="/"){d=y;continue}}v==="["?l++:v==="]"&&l--}const f=c.length===0?s:s.substring(u),p=f.startsWith(dq),m=p?f.substring(1):f,g=d&&d>u?d-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}}return r?function(c){return r({className:c,parseClassName:a})}:a}function dve(e){if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t}function hve(e){return{cache:lve(e.cacheSize),parseClassName:uve(e),...ive(e)}}const fve=/\s+/;function pve(e,t){const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,o=new Set;return e.trim().split(fve).map(a=>{const{modifiers:s,hasImportantModifier:c,baseClassName:l,maybePostfixModifierPosition:u}=r(a);let d=!!u,f=n(d?l.substring(0,u):l);if(!f){if(!d)return{isTailwindClass:!1,originalClassName:a};if(f=n(l),!f)return{isTailwindClass:!1,originalClassName:a};d=!1}const p=dve(s).join(":");return{isTailwindClass:!0,modifierId:c?p+dq:p,classGroupId:f,originalClassName:a,hasPostfixModifier:d}}).reverse().filter(a=>{if(!a.isTailwindClass)return!0;const{modifierId:s,classGroupId:c,hasPostfixModifier:l}=a,u=s+c;return o.has(u)?!1:(o.add(u),i(c,l).forEach(d=>o.add(s+d)),!0)}).reverse().map(a=>a.originalClassName).join(" ")}function mve(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=hq(t))&&(n&&(n+=" "),n+=r);return n}function hq(e){if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=hq(e[n]))&&(r&&(r+=" "),r+=t);return r}function gve(e,...t){let r,n,i,o=a;function a(c){const l=t.reduce((u,d)=>d(u),e());return r=hve(l),n=r.cache.get,i=r.cache.set,o=s,s(c)}function s(c){const l=n(c);if(l)return l;const u=pve(c,r);return i(c,u),u}return function(){return o(mve.apply(null,arguments))}}function ln(e){const t=r=>r[e]||[];return t.isThemeGetter=!0,t}const fq=/^\[(?:([a-z-]+):)?(.+)\]$/i,yve=/^\d+\/\d+$/,vve=new Set(["px","full","screen"]),Eve=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_ve=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bve=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wve=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Sve=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Jc(e){return Gd(e)||vve.has(e)||yve.test(e)}function zl(e){return Nm(e,"length",Ove)}function Gd(e){return!!e&&!Number.isNaN(Number(e))}function _E(e){return Nm(e,"number",Gd)}function yg(e){return!!e&&Number.isInteger(Number(e))}function Tve(e){return e.endsWith("%")&&Gd(e.slice(0,-1))}function Yt(e){return fq.test(e)}function Gl(e){return Eve.test(e)}const Cve=new Set(["length","size","percentage"]);function Rve(e){return Nm(e,Cve,pq)}function Ive(e){return Nm(e,"position",pq)}const xve=new Set(["image","url"]);function Ave(e){return Nm(e,xve,Pve)}function Nve(e){return Nm(e,"",kve)}function vg(){return!0}function Nm(e,t,r){const n=fq.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1}function Ove(e){return _ve.test(e)&&!bve.test(e)}function pq(){return!1}function kve(e){return wve.test(e)}function Pve(e){return Sve.test(e)}function Dve(){const e=ln("colors"),t=ln("spacing"),r=ln("blur"),n=ln("brightness"),i=ln("borderColor"),o=ln("borderRadius"),a=ln("borderSpacing"),s=ln("borderWidth"),c=ln("contrast"),l=ln("grayscale"),u=ln("hueRotate"),d=ln("invert"),f=ln("gap"),p=ln("gradientColorStops"),m=ln("gradientColorStopPositions"),g=ln("inset"),y=ln("margin"),v=ln("opacity"),E=ln("padding"),b=ln("saturate"),S=ln("scale"),A=ln("sepia"),N=ln("skew"),D=ln("space"),M=ln("translate"),H=()=>["auto","contain","none"],V=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto",Yt,t],Y=()=>[Yt,t],Z=()=>["",Jc,zl],$=()=>["auto",Gd,Yt],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],k=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",Yt],R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>[Gd,_E],x=()=>[Gd,Yt];return{cacheSize:500,separator:":",theme:{colors:[vg],spacing:[Jc,zl],blur:["none","",Gl,Yt],brightness:_(),borderColor:[e],borderRadius:["none","","full",Gl,Yt],borderSpacing:Y(),borderWidth:Z(),contrast:_(),grayscale:B(),hueRotate:x(),invert:B(),gap:Y(),gradientColorStops:[e],gradientColorStopPositions:[Tve,zl],inset:G(),margin:G(),opacity:_(),padding:Y(),saturate:_(),scale:_(),sepia:B(),skew:x(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",Yt]}],container:["container"],columns:[{columns:[Gl]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Yt]}],overflow:[{overflow:V()}],"overflow-x":[{"overflow-x":V()}],"overflow-y":[{"overflow-y":V()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",yg,Yt]}],basis:[{basis:G()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Yt]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",yg,Yt]}],"grid-cols":[{"grid-cols":[vg]}],"col-start-end":[{col:["auto",{span:["full",yg,Yt]},Yt]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[vg]}],"row-start-end":[{row:["auto",{span:[yg,Yt]},Yt]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Yt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Yt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Yt,t]}],"min-w":[{"min-w":[Yt,t,"min","max","fit"]}],"max-w":[{"max-w":[Yt,t,"none","full","min","max","fit","prose",{screen:[Gl]},Gl]}],h:[{h:[Yt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Yt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Yt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Yt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Gl,zl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_E]}],"font-family":[{font:[vg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Yt]}],"line-clamp":[{"line-clamp":["none",Gd,_E]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Jc,Yt]}],"list-image":[{"list-image":["none",Yt]}],"list-style-type":[{list:["none","disc","decimal",Yt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Jc,zl]}],"underline-offset":[{"underline-offset":["auto",Jc,Yt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),Ive]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Rve]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Ave]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Jc,Yt]}],"outline-w":[{outline:[Jc,zl]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Jc,zl]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Gl,Nve]}],"shadow-color":[{shadow:[vg]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...k(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":k()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Gl,Yt]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Yt]}],duration:[{duration:x()}],ease:[{ease:["linear","in","out","in-out",Yt]}],delay:[{delay:x()}],animate:[{animate:["none","spin","ping","pulse","bounce",Yt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[yg,Yt]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Yt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Yt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Yt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Jc,zl,_E]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const se=gve(Dve);function Nd(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function f0(e){if(!Nd(e))return e;const t={};for(const r in e)t[r]=f0(e[r]);return t}function xe(e,t){if(Nd(t)&&Object.keys(t).length===0)return f0({...e,...t});const r={...e,...t};if(Nd(t)&&Nd(e))for(const n in t)Nd(t[n])&&n in e&&Nd(e[n])?r[n]=xe(e[n],t[n]):r[n]=Nd(t[n])?f0(t[n]):t[n];return r}const Lve={root:{base:"divide-y divide-gray-200 border-gray-200 dark:divide-gray-700 dark:border-gray-700",flush:{off:"rounded-lg border",on:"border-b"}},content:{base:"p-5 first:rounded-t-lg last:rounded-b-lg dark:bg-gray-900"},title:{arrow:{base:"h-6 w-6 shrink-0",open:{off:"",on:"rotate-180"}},base:"flex w-full items-center justify-between p-5 text-left font-medium text-gray-500 first:rounded-t-lg last:rounded-b-lg dark:text-gray-400",flush:{off:"hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:hover:bg-gray-800 dark:focus:ring-gray-800",on:"bg-transparent dark:bg-transparent"},heading:"",open:{off:"",on:"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-white"}}},Mve={base:"flex flex-col gap-2 p-4 text-sm",borderAccent:"border-t-4",closeButton:{base:"-m-1.5 ml-auto inline-flex h-8 w-8 rounded-lg p-1.5 focus:ring-2",icon:"h-5 w-5",color:{info:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",gray:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white",failure:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",success:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",warning:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",red:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",green:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",yellow:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",blue:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",pink:"bg-pink-100 text-pink-500 hover:bg-pink-200 focus:ring-pink-400 dark:bg-pink-200 dark:text-pink-600 dark:hover:bg-pink-300",lime:"bg-lime-100 text-lime-500 hover:bg-lime-200 focus:ring-lime-400 dark:bg-lime-200 dark:text-lime-600 dark:hover:bg-lime-300",dark:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-200 dark:text-gray-600 dark:hover:bg-gray-300",indigo:"bg-indigo-100 text-indigo-500 hover:bg-indigo-200 focus:ring-indigo-400 dark:bg-indigo-200 dark:text-indigo-600 dark:hover:bg-indigo-300",purple:"bg-purple-100 text-purple-500 hover:bg-purple-200 focus:ring-purple-400 dark:bg-purple-200 dark:text-purple-600 dark:hover:bg-purple-300",teal:"bg-teal-100 text-teal-500 hover:bg-teal-200 focus:ring-teal-400 dark:bg-teal-200 dark:text-teal-600 dark:hover:bg-teal-300",light:"bg-gray-50 text-gray-500 hover:bg-gray-100 focus:ring-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:hover:text-white"}},color:{info:"border-cyan-500 bg-cyan-100 text-cyan-700 dark:bg-cyan-200 dark:text-cyan-800",gray:"border-gray-500 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",failure:"border-red-500 bg-red-100 text-red-700 dark:bg-red-200 dark:text-red-800",success:"border-green-500 bg-green-100 text-green-700 dark:bg-green-200 dark:text-green-800",warning:"border-yellow-500 bg-yellow-100 text-yellow-700 dark:bg-yellow-200 dark:text-yellow-800",red:"border-red-500 bg-red-100 text-red-700 dark:bg-red-200 dark:text-red-800",green:"border-green-500 bg-green-100 text-green-700 dark:bg-green-200 dark:text-green-800",yellow:"border-yellow-500 bg-yellow-100 text-yellow-700 dark:bg-yellow-200 dark:text-yellow-800",blue:"border-blue-500 bg-blue-100 text-blue-700 dark:bg-blue-200 dark:text-blue-800",cyan:"border-cyan-500 bg-cyan-100 text-cyan-700 dark:bg-cyan-200 dark:text-cyan-800",pink:"border-pink-500 bg-pink-100 text-pink-700 dark:bg-pink-200 dark:text-pink-800",lime:"border-lime-500 bg-lime-100 text-lime-700 dark:bg-lime-200 dark:text-lime-800",dark:"border-gray-600 bg-gray-800 text-gray-200 dark:bg-gray-900 dark:text-gray-300",indigo:"border-indigo-500 bg-indigo-100 text-indigo-700 dark:bg-indigo-200 dark:text-indigo-800",purple:"border-purple-500 bg-purple-100 text-purple-700 dark:bg-purple-200 dark:text-purple-800",teal:"border-teal-500 bg-teal-100 text-teal-700 dark:bg-teal-200 dark:text-teal-800",light:"border-gray-400 bg-gray-50 text-gray-600 dark:bg-gray-500 dark:text-gray-200"},icon:"mr-3 inline h-5 w-5 flex-shrink-0",rounded:"rounded-lg",wrapper:"flex items-center"},jve={root:{base:"flex items-center justify-center space-x-4 rounded",bordered:"p-1 ring-2",rounded:"rounded-full",color:{dark:"ring-gray-800 dark:ring-gray-800",failure:"ring-red-500 dark:ring-red-700",gray:"ring-gray-500 dark:ring-gray-400",info:"ring-cyan-400 dark:ring-cyan-800",light:"ring-gray-300 dark:ring-gray-500",purple:"ring-purple-500 dark:ring-purple-600",success:"ring-green-500 dark:ring-green-500",warning:"ring-yellow-300 dark:ring-yellow-500",pink:"ring-pink-500 dark:ring-pink-500"},img:{base:"rounded",off:"relative overflow-hidden bg-gray-100 dark:bg-gray-600",on:"",placeholder:"absolute -bottom-1 h-auto w-auto text-gray-400"},size:{xs:"h-6 w-6",sm:"h-8 w-8",md:"h-10 w-10",lg:"h-20 w-20",xl:"h-36 w-36"},stacked:"ring-2 ring-gray-300 dark:ring-gray-500",statusPosition:{"bottom-left":"-bottom-1 -left-1","bottom-center":"-bottom-1","bottom-right":"-bottom-1 -right-1","top-left":"-left-1 -top-1","top-center":"-top-1","top-right":"-right-1 -top-1","center-right":"-right-1",center:"","center-left":"-left-1"},status:{away:"bg-yellow-400",base:"absolute h-3.5 w-3.5 rounded-full border-2 border-white dark:border-gray-800",busy:"bg-red-400",offline:"bg-gray-400",online:"bg-green-400"},initials:{text:"font-medium text-gray-600 dark:text-gray-300",base:"relative inline-flex items-center justify-center overflow-hidden bg-gray-100 dark:bg-gray-600"}},group:{base:"flex -space-x-4"},groupCounter:{base:"relative flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xs font-medium text-white ring-2 ring-gray-300 hover:bg-gray-600 dark:ring-gray-500"}},Uve={root:{base:"flex h-fit items-center gap-1 font-semibold",color:{info:"bg-cyan-100 text-cyan-800 group-hover:bg-cyan-200 dark:bg-cyan-200 dark:text-cyan-800 dark:group-hover:bg-cyan-300",gray:"bg-gray-100 text-gray-800 group-hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:group-hover:bg-gray-600",failure:"bg-red-100 text-red-800 group-hover:bg-red-200 dark:bg-red-200 dark:text-red-900 dark:group-hover:bg-red-300",success:"bg-green-100 text-green-800 group-hover:bg-green-200 dark:bg-green-200 dark:text-green-900 dark:group-hover:bg-green-300",warning:"bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 dark:bg-yellow-200 dark:text-yellow-900 dark:group-hover:bg-yellow-300",indigo:"bg-indigo-100 text-indigo-800 group-hover:bg-indigo-200 dark:bg-indigo-200 dark:text-indigo-900 dark:group-hover:bg-indigo-300",purple:"bg-purple-100 text-purple-800 group-hover:bg-purple-200 dark:bg-purple-200 dark:text-purple-900 dark:group-hover:bg-purple-300",pink:"bg-pink-100 text-pink-800 group-hover:bg-pink-200 dark:bg-pink-200 dark:text-pink-900 dark:group-hover:bg-pink-300",blue:"bg-blue-100 text-blue-800 group-hover:bg-blue-200 dark:bg-blue-200 dark:text-blue-900 dark:group-hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-800 group-hover:bg-cyan-200 dark:bg-cyan-200 dark:text-cyan-900 dark:group-hover:bg-cyan-300",dark:"bg-gray-600 text-gray-100 group-hover:bg-gray-500 dark:bg-gray-900 dark:text-gray-200 dark:group-hover:bg-gray-700",light:"bg-gray-200 text-gray-800 group-hover:bg-gray-300 dark:bg-gray-400 dark:text-gray-900 dark:group-hover:bg-gray-500",green:"bg-green-100 text-green-800 group-hover:bg-green-200 dark:bg-green-200 dark:text-green-900 dark:group-hover:bg-green-300",lime:"bg-lime-100 text-lime-800 group-hover:bg-lime-200 dark:bg-lime-200 dark:text-lime-900 dark:group-hover:bg-lime-300",red:"bg-red-100 text-red-800 group-hover:bg-red-200 dark:bg-red-200 dark:text-red-900 dark:group-hover:bg-red-300",teal:"bg-teal-100 text-teal-800 group-hover:bg-teal-200 dark:bg-teal-200 dark:text-teal-900 dark:group-hover:bg-teal-300",yellow:"bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 dark:bg-yellow-200 dark:text-yellow-900 dark:group-hover:bg-yellow-300"},href:"group",size:{xs:"p-1 text-xs",sm:"p-1.5 text-sm"}},icon:{off:"rounded px-2 py-0.5",on:"rounded-full p-1.5",size:{xs:"h-3 w-3",sm:"h-3.5 w-3.5"}}},Fve={root:{base:"text-xl font-semibold italic text-gray-900 dark:text-white"}},Vve={root:{base:"",list:"flex items-center"},item:{base:"group flex items-center",chevron:"mx-1 h-4 w-4 text-gray-400 group-first:hidden md:mx-2",href:{off:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",on:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},icon:"mr-2 h-4 w-4"}},Bve={base:"group relative flex items-stretch justify-center p-0.5 text-center font-medium transition-[color,background-color,border-color,text-decoration-color,fill,stroke,box-shadow] focus:z-10 focus:outline-none",fullSized:"w-full",color:{dark:"border border-transparent bg-gray-800 text-white focus:ring-4 focus:ring-gray-300 enabled:hover:bg-gray-900 dark:border-gray-700 dark:bg-gray-800 dark:focus:ring-gray-800 dark:enabled:hover:bg-gray-700",failure:"border border-transparent bg-red-700 text-white focus:ring-4 focus:ring-red-300 enabled:hover:bg-red-800 dark:bg-red-600 dark:focus:ring-red-900 dark:enabled:hover:bg-red-700",gray:":ring-cyan-700 border border-gray-200 bg-white text-gray-900 focus:text-cyan-700 focus:ring-4 enabled:hover:bg-gray-100 enabled:hover:text-cyan-700 dark:border-gray-600 dark:bg-transparent dark:text-gray-400 dark:enabled:hover:bg-gray-700 dark:enabled:hover:text-white",info:"border border-transparent bg-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-800 dark:bg-cyan-600 dark:focus:ring-cyan-800 dark:enabled:hover:bg-cyan-700",light:"border border-gray-300 bg-white text-gray-900 focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-600 dark:text-white dark:focus:ring-gray-700 dark:enabled:hover:border-gray-700 dark:enabled:hover:bg-gray-700",purple:"border border-transparent bg-purple-700 text-white focus:ring-4 focus:ring-purple-300 enabled:hover:bg-purple-800 dark:bg-purple-600 dark:focus:ring-purple-900 dark:enabled:hover:bg-purple-700",success:"border border-transparent bg-green-700 text-white focus:ring-4 focus:ring-green-300 enabled:hover:bg-green-800 dark:bg-green-600 dark:focus:ring-green-800 dark:enabled:hover:bg-green-700",warning:"border border-transparent bg-yellow-400 text-white focus:ring-4 focus:ring-yellow-300 enabled:hover:bg-yellow-500 dark:focus:ring-yellow-900",blue:"border border-transparent bg-blue-700 text-white focus:ring-4 focus:ring-blue-300 enabled:hover:bg-blue-800 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",cyan:"border border-cyan-300 bg-white text-cyan-900 focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-100 dark:border-cyan-600 dark:bg-cyan-600 dark:text-white dark:focus:ring-cyan-700 dark:enabled:hover:border-cyan-700 dark:enabled:hover:bg-cyan-700",green:"border border-green-300 bg-white text-green-900 focus:ring-4 focus:ring-green-300 enabled:hover:bg-green-100 dark:border-green-600 dark:bg-green-600 dark:text-white dark:focus:ring-green-700 dark:enabled:hover:border-green-700 dark:enabled:hover:bg-green-700",indigo:"border border-indigo-300 bg-white text-indigo-900 focus:ring-4 focus:ring-indigo-300 enabled:hover:bg-indigo-100 dark:border-indigo-600 dark:bg-indigo-600 dark:text-white dark:focus:ring-indigo-700 dark:enabled:hover:border-indigo-700 dark:enabled:hover:bg-indigo-700",lime:"border border-lime-300 bg-white text-lime-900 focus:ring-4 focus:ring-lime-300 enabled:hover:bg-lime-100 dark:border-lime-600 dark:bg-lime-600 dark:text-white dark:focus:ring-lime-700 dark:enabled:hover:border-lime-700 dark:enabled:hover:bg-lime-700",pink:"border border-pink-300 bg-white text-pink-900 focus:ring-4 focus:ring-pink-300 enabled:hover:bg-pink-100 dark:border-pink-600 dark:bg-pink-600 dark:text-white dark:focus:ring-pink-700 dark:enabled:hover:border-pink-700 dark:enabled:hover:bg-pink-700",red:"border border-red-300 bg-white text-red-900 focus:ring-4 focus:ring-red-300 enabled:hover:bg-red-100 dark:border-red-600 dark:bg-red-600 dark:text-white dark:focus:ring-red-700 dark:enabled:hover:border-red-700 dark:enabled:hover:bg-red-700",teal:"border border-teal-300 bg-white text-teal-900 focus:ring-4 focus:ring-teal-300 enabled:hover:bg-teal-100 dark:border-teal-600 dark:bg-teal-600 dark:text-white dark:focus:ring-teal-700 dark:enabled:hover:border-teal-700 dark:enabled:hover:bg-teal-700",yellow:"border border-yellow-300 bg-white text-yellow-900 focus:ring-4 focus:ring-yellow-300 enabled:hover:bg-yellow-100 dark:border-yellow-600 dark:bg-yellow-600 dark:text-white dark:focus:ring-yellow-700 dark:enabled:hover:border-yellow-700 dark:enabled:hover:bg-yellow-700"},disabled:"cursor-not-allowed opacity-50",isProcessing:"cursor-wait",spinnerSlot:"absolute top-0 flex h-full items-center",spinnerLeftPosition:{xs:"left-2",sm:"left-3",md:"left-4",lg:"left-5",xl:"left-6"},gradient:{cyan:"bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-br dark:focus:ring-cyan-800",failure:"bg-gradient-to-r from-red-400 via-red-500 to-red-600 text-white focus:ring-4 focus:ring-red-300 enabled:hover:bg-gradient-to-br dark:focus:ring-red-800",info:"bg-gradient-to-r from-cyan-500 via-cyan-600 to-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-br dark:focus:ring-cyan-800",lime:"bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 text-gray-900 focus:ring-4 focus:ring-lime-300 enabled:hover:bg-gradient-to-br dark:focus:ring-lime-800",pink:"bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 text-white focus:ring-4 focus:ring-pink-300 enabled:hover:bg-gradient-to-br dark:focus:ring-pink-800",purple:"bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 text-white focus:ring-4 focus:ring-purple-300 enabled:hover:bg-gradient-to-br dark:focus:ring-purple-800",success:"bg-gradient-to-r from-green-400 via-green-500 to-green-600 text-white focus:ring-4 focus:ring-green-300 enabled:hover:bg-gradient-to-br dark:focus:ring-green-800",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 text-white focus:ring-4 focus:ring-teal-300 enabled:hover:bg-gradient-to-br dark:focus:ring-teal-800"},gradientDuoTone:{cyanToBlue:"bg-gradient-to-r from-cyan-500 to-cyan-500 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-bl dark:focus:ring-cyan-800",greenToBlue:"bg-gradient-to-br from-green-400 to-cyan-600 text-white focus:ring-4 focus:ring-green-200 enabled:hover:bg-gradient-to-bl dark:focus:ring-green-800",pinkToOrange:"bg-gradient-to-br from-pink-500 to-orange-400 text-white focus:ring-4 focus:ring-pink-200 enabled:hover:bg-gradient-to-bl dark:focus:ring-pink-800",purpleToBlue:"bg-gradient-to-br from-purple-600 to-cyan-500 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-bl dark:focus:ring-cyan-800",purpleToPink:"bg-gradient-to-r from-purple-500 to-pink-500 text-white focus:ring-4 focus:ring-purple-200 enabled:hover:bg-gradient-to-l dark:focus:ring-purple-800",redToYellow:"bg-gradient-to-r from-red-200 via-red-300 to-yellow-200 text-gray-900 focus:ring-4 focus:ring-red-100 enabled:hover:bg-gradient-to-bl dark:focus:ring-red-400",tealToLime:"bg-gradient-to-r from-teal-200 to-lime-200 text-gray-900 focus:ring-4 focus:ring-lime-200 enabled:hover:bg-gradient-to-l enabled:hover:from-teal-200 enabled:hover:to-lime-200 enabled:hover:text-gray-900 dark:focus:ring-teal-700"},inner:{base:"flex items-stretch transition-all duration-200",position:{none:"",start:"rounded-r-none",middle:"rounded-none",end:"rounded-l-none"},outline:"border border-transparent",isProcessingPadding:{xs:"pl-8",sm:"pl-10",md:"pl-12",lg:"pl-16",xl:"pl-20"}},label:"ml-2 inline-flex h-4 w-4 items-center justify-center rounded-full bg-cyan-200 text-xs font-semibold text-cyan-800",outline:{color:{gray:"border border-gray-900 dark:border-white",default:"border-0",light:""},off:"",on:"flex w-full justify-center bg-white text-gray-900 transition-all duration-75 ease-in group-enabled:group-hover:bg-opacity-0 group-enabled:group-hover:text-inherit dark:bg-gray-900 dark:text-white",pill:{off:"rounded-md",on:"rounded-full"}},pill:{off:"rounded-lg",on:"rounded-full"},size:{xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base",xl:"px-6 py-3 text-base"}},$ve={base:"inline-flex",position:{none:"",start:"rounded-r-none focus:ring-2",middle:"rounded-none border-l-0 pl-0 focus:ring-2",end:"rounded-l-none border-l-0 pl-0 focus:ring-2"}},Hve={root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}},zve={root:{base:"relative h-full w-full",leftControl:"absolute left-0 top-0 flex h-full items-center justify-center px-4 focus:outline-none",rightControl:"absolute right-0 top-0 flex h-full items-center justify-center px-4 focus:outline-none"},indicators:{active:{off:"bg-white/50 hover:bg-white dark:bg-gray-800/50 dark:hover:bg-gray-800",on:"bg-white dark:bg-gray-800"},base:"h-3 w-3 rounded-full",wrapper:"absolute bottom-5 left-1/2 flex -translate-x-1/2 space-x-3"},item:{base:"absolute left-1/2 top-1/2 block w-full -translate-x-1/2 -translate-y-1/2",wrapper:{off:"w-full flex-shrink-0 transform cursor-default snap-center",on:"w-full flex-shrink-0 transform cursor-grab snap-center"}},control:{base:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:outline-none group-focus:ring-4 group-focus:ring-white dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70 sm:h-10 sm:w-10",icon:"h-5 w-5 text-white dark:text-gray-800 sm:h-6 sm:w-6"},scrollContainer:{base:"flex h-full snap-mandatory overflow-y-hidden overflow-x-scroll scroll-smooth rounded-lg",snap:"snap-x"}},Gve={root:{base:"h-4 w-4 rounded border border-gray-300 bg-gray-100 focus:ring-2 dark:border-gray-600 dark:bg-gray-700",color:{default:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-gray-800 dark:focus:ring-cyan-600",dark:"text-gray-800 focus:ring-gray-800 dark:ring-offset-gray-800 dark:focus:ring-gray-800",failure:"text-red-900 focus:ring-red-900 dark:ring-offset-red-900 dark:focus:ring-red-900",gray:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",info:"text-cyan-800 focus:ring-cyan-800 dark:ring-offset-gray-800 dark:focus:ring-cyan-800",light:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",purple:"text-purple-600 focus:ring-purple-600 dark:ring-offset-purple-600 dark:focus:ring-purple-600",success:"text-green-800 focus:ring-green-800 dark:ring-offset-green-800 dark:focus:ring-green-800",warning:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400",blue:"text-blue-700 focus:ring-blue-600 dark:ring-offset-blue-700 dark:focus:ring-blue-700",cyan:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-cyan-600 dark:focus:ring-cyan-600",green:"text-green-600 focus:ring-green-600 dark:ring-offset-green-600 dark:focus:ring-green-600",indigo:"text-indigo-700 focus:ring-indigo-700 dark:ring-offset-indigo-700 dark:focus:ring-indigo-700",lime:"text-lime-700 focus:ring-lime-700 dark:ring-offset-lime-700 dark:focus:ring-lime-700",pink:"text-pink-600 focus:ring-pink-600 dark:ring-offset-pink-600 dark:focus:ring-pink-600",red:"text-red-600 focus:ring-red-600 dark:ring-offset-red-600 dark:focus:ring-red-600",teal:"text-teal-600 focus:ring-teal-600 dark:ring-offset-teal-600 dark:focus:ring-teal-600",yellow:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400"}}},Wve={button:{base:"inline-flex w-full items-center justify-center rounded-lg bg-blue-700 px-5 py-3 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",label:"text-center text-sm font-medium text-white sm:w-auto"},withIcon:{base:"absolute end-2 top-1/2 inline-flex -translate-y-1/2 items-center justify-center rounded-lg p-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800",icon:{defaultIcon:"h-4 w-4",successIcon:"h-4 w-4 text-blue-700 dark:text-blue-500"}},withIconText:{base:"absolute end-2.5 top-1/2 inline-flex -translate-y-1/2 items-center justify-center rounded-lg border border-gray-200 bg-white px-2.5 py-2 text-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700",icon:{defaultIcon:"me-1.5 h-3 w-3",successIcon:"me-1.5 h-3 w-3 text-blue-700 dark:text-blue-500"},label:{base:"inline-flex items-center",defaultText:"text-xs font-semibold",successText:"text-xs font-semibold text-blue-700 dark:text-blue-500"}}},Kve={root:{base:"rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700",icon:"h-5 w-5"}},qve={root:{base:"relative"},popup:{root:{base:"absolute top-10 z-50 block pt-2",inline:"relative top-0 z-auto",inner:"inline-block rounded-lg bg-white p-4 shadow-lg dark:bg-gray-700"},header:{base:"",title:"px-2 py-3 text-center font-semibold text-gray-900 dark:text-white",selectors:{base:"mb-2 flex justify-between",button:{base:"rounded-lg bg-white px-5 py-2.5 text-sm font-semibold text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",prev:"",next:"",view:""}}},view:{base:"p-1"},footer:{base:"mt-2 flex space-x-2",button:{base:"w-full rounded-lg px-5 py-2 text-center text-sm font-medium focus:ring-4 focus:ring-cyan-300",today:"bg-cyan-700 text-white hover:bg-cyan-800 dark:bg-cyan-600 dark:hover:bg-cyan-700",clear:"border border-gray-300 bg-white text-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600"}}},views:{days:{header:{base:"mb-1 grid grid-cols-7",title:"h-6 text-center text-sm font-medium leading-6 text-gray-500 dark:text-gray-400"},items:{base:"grid w-64 grid-cols-7",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},months:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},years:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},decades:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}}}},Yve={root:{base:"fixed z-40 overflow-y-auto bg-white p-4 transition-transform dark:bg-gray-800",backdrop:"fixed inset-0 z-30 bg-gray-900/50 dark:bg-gray-900/80",edge:"bottom-16",position:{top:{on:"left-0 right-0 top-0 w-full transform-none",off:"left-0 right-0 top-0 w-full -translate-y-full"},right:{on:"right-0 top-0 h-screen w-80 transform-none",off:"right-0 top-0 h-screen w-80 translate-x-full"},bottom:{on:"bottom-0 left-0 right-0 w-full transform-none",off:"bottom-0 left-0 right-0 w-full translate-y-full"},left:{on:"left-0 top-0 h-screen w-80 transform-none",off:"left-0 top-0 h-screen w-80 -translate-x-full"}}},header:{inner:{closeButton:"absolute end-2.5 top-2.5 flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",closeIcon:"h-4 w-4",titleIcon:"me-2.5 h-4 w-4",titleText:"mb-4 inline-flex items-center text-base font-semibold text-gray-500 dark:text-gray-400"},collapsed:{on:"hidden",off:"block"}},items:{base:""}},nu={arrowIcon:"ml-2 h-4 w-4",content:"py-1 focus:outline-none",floating:{animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"z-10 w-fit divide-y divide-gray-100 rounded shadow focus:outline-none",content:"py-1 text-sm text-gray-700 dark:text-gray-200",divider:"my-1 h-px bg-gray-100 dark:bg-gray-600",header:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200",hidden:"invisible opacity-0",item:{container:"",base:"flex w-full cursor-pointer items-center justify-start px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:bg-gray-600 dark:focus:text-white",icon:"mr-2 h-4 w-4"},style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},target:"w-fit"},inlineWrapper:"flex items-center"},Xve={root:{base:"flex"},field:{base:"relative w-full",input:{base:"block w-full overflow-hidden rounded-lg border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"sm:text-xs",md:"text-sm",lg:"sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},Jve={input:{default:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-gray-300 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-gray-300 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"}},success:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-green-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:bg-gray-700 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-green-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:bg-gray-700 dark:text-white dark:focus:border-green-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-green-600 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none rounded-lg border border-green-600 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-green-600 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none border-0 border-b-2 border-green-600 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500"}},error:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-red-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:bg-gray-700 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-red-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:bg-gray-700 dark:text-white dark:focus:border-red-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-red-600 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none rounded-lg border border-red-600 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-red-600 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none border-0 border-b-2 border-red-600 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500"}}},label:{default:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"}},success:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-green-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-green-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-green-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-green-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-green-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-green-500"}},error:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-red-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-red-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-red-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-red-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-red-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-red-500"}}},helperText:{default:"mt-2 text-xs text-gray-600 dark:text-gray-400",success:"mt-2 text-xs text-green-600 dark:text-green-400",error:"mt-2 text-xs text-red-600 dark:text-red-400"}},Qve={root:{base:"w-full rounded-lg bg-white shadow dark:bg-gray-800 md:flex md:items-center md:justify-between",container:"w-full p-6",bgDark:"bg-gray-800"},groupLink:{base:"flex flex-wrap text-sm text-gray-500 dark:text-white",link:{base:"me-4 last:mr-0 md:mr-6",href:"hover:underline"},col:"flex-col space-y-4"},icon:{base:"text-gray-500 dark:hover:text-white",size:"h-5 w-5"},title:{base:"mb-6 text-sm font-semibold uppercase text-gray-500 dark:text-white"},divider:{base:"my-6 w-full border-gray-200 dark:border-gray-700 sm:mx-auto lg:my-8"},copyright:{base:"text-sm text-gray-500 dark:text-gray-400 sm:text-center",href:"ml-1 hover:underline",span:"ml-1"},brand:{base:"mb-4 flex items-center sm:mb-0",img:"mr-3 h-8",span:"self-center whitespace-nowrap text-2xl font-semibold text-gray-800 dark:text-white"}},Zve={root:{base:"mt-2 text-sm",colors:{gray:"text-gray-500 dark:text-gray-400",info:"text-cyan-700 dark:text-cyan-800",success:"text-green-600 dark:text-green-500",failure:"text-red-600 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600"}}},eEe={root:{base:"my-8 h-px border-0 bg-gray-200 dark:bg-gray-700"},trimmed:{base:"mx-auto my-4 h-1 w-48 rounded border-0 bg-gray-100 dark:bg-gray-700 md:my-10"},icon:{base:"inline-flex w-full items-center justify-center",hrLine:"my-8 h-1 w-64 rounded border-0 bg-gray-200 dark:bg-gray-700",icon:{base:"absolute left-1/2 -translate-x-1/2 bg-white px-4 dark:bg-gray-900",icon:"h-4 w-4 text-gray-700 dark:text-gray-300"}},text:{base:"inline-flex w-full items-center justify-center",hrLine:"my-8 h-px w-64 border-0 bg-gray-200 dark:bg-gray-700",text:"absolute left-1/2 -translate-x-1/2 bg-white px-3 font-medium text-gray-900 dark:bg-gray-900 dark:text-white"},square:{base:"mx-auto my-8 h-8 w-8 rounded border-0 bg-gray-200 dark:bg-gray-700 md:my-12"}},tEe={root:{base:"rounded-lg border border-gray-200 bg-gray-100 px-2 py-1.5 text-xs font-semibold text-gray-800 dark:border-gray-500 dark:bg-gray-600 dark:text-gray-100",icon:"inline-block"}},rEe={root:{base:"text-sm font-medium",disabled:"opacity-50",colors:{default:"text-gray-900 dark:text-white",info:"text-cyan-500 dark:text-cyan-600",failure:"text-red-700 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600",success:"text-green-700 dark:text-green-500"}}},nEe={root:{base:"list-inside space-y-1 text-gray-500 dark:text-gray-400",ordered:{off:"list-disc",on:"list-decimal"},horizontal:"flex list-none flex-wrap items-center justify-center space-x-4 space-y-0",unstyled:"list-none",nested:"mt-2 ps-5"},item:{withIcon:{off:"",on:"flex items-center"},icon:"me-2 h-3.5 w-3.5 flex-shrink-0"}},iEe={root:{base:"list-none rounded-lg border border-gray-200 bg-white text-left text-sm font-medium text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},item:{base:"[&>*]:first:rounded-t-lg [&>*]:last:rounded-b-lg [&>*]:last:border-b-0",link:{base:"flex w-full items-center border-b border-gray-200 px-4 py-2 dark:border-gray-600",active:{off:"hover:bg-gray-100 hover:text-cyan-700 focus:text-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:text-white dark:focus:ring-gray-500",on:"bg-cyan-700 text-white dark:bg-gray-800"},disabled:{off:"",on:"cursor-not-allowed bg-gray-100 text-gray-900 hover:bg-gray-100 hover:text-gray-900 focus:text-gray-900"},href:{off:"",on:""},icon:"mr-2 h-4 w-4 fill-current"}}},W_={root:{base:"bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"block py-2 pl-3 pr-4 md:p-0",active:{on:"bg-cyan-700 text-white dark:text-white md:bg-transparent md:text-cyan-700",off:"border-b border-gray-100 text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-cyan-700 md:dark:hover:bg-transparent md:dark:hover:text-white"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},oEe={...W_,dropdown:{base:"",toggle:{...nu,floating:{...nu.floating,base:se(nu.floating.base,"mt-2 block"),content:se(nu.floating.content,"text-gray-500 dark:text-gray-400"),style:{...nu.floating.style,auto:se(nu.floating.style.auto,"text-gray-500 dark:text-gray-400")}},inlineWrapper:se(nu.inlineWrapper,"flex w-full items-center justify-between")}},dropdownToggle:{base:se(W_.link.base,W_.link.active.off,"flex w-full items-center justify-between")}},aEe={root:{base:"fixed inset-x-0 top-0 z-50 h-screen overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900 bg-opacity-50 dark:bg-opacity-80",off:"hidden"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},content:{base:"relative h-full w-full p-4 md:h-auto",inner:"relative flex max-h-[90dvh] flex-col rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"flex-1 overflow-auto p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t border-b p-5 dark:border-gray-600",popup:"border-b-0 p-2",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"}},sEe={base:"",layout:{table:{base:"text-sm text-gray-700 dark:text-gray-400",span:"font-semibold text-gray-900 dark:text-white"}},pages:{base:"xs:mt-0 mt-2 inline-flex items-center -space-x-px",showIcon:"inline-flex",previous:{base:"ml-0 rounded-l-lg border border-gray-300 bg-white px-3 py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",icon:"h-5 w-5"},next:{base:"rounded-r-lg border border-gray-300 bg-white px-3 py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",icon:"h-5 w-5"},selector:{base:"w-12 border border-gray-300 bg-white py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",active:"bg-cyan-50 text-cyan-600 hover:bg-cyan-100 hover:text-cyan-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white",disabled:"cursor-not-allowed opacity-50"}}},cEe={base:"absolute z-20 inline-block w-max max-w-[100vw] bg-white outline-none border border-gray-200 rounded-lg shadow-sm dark:border-gray-600 dark:bg-gray-800",content:"z-10 overflow-hidden rounded-[7px]",arrow:{base:"absolute h-2 w-2 z-0 rotate-45 mix-blend-lighten bg-white border border-gray-200 dark:border-gray-600 dark:bg-gray-800 dark:mix-blend-color",placement:"-4px"}},lEe={base:"w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",label:"mb-1 flex justify-between font-medium dark:text-white",bar:"space-x-2 rounded-full text-center font-medium leading-none text-cyan-300 dark:text-cyan-100",color:{dark:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600",red:"bg-red-600 dark:bg-red-500",green:"bg-green-600 dark:bg-green-500",yellow:"bg-yellow-400",indigo:"bg-indigo-600 dark:bg-indigo-500",purple:"bg-purple-600 dark:bg-purple-500",cyan:"bg-cyan-600",gray:"bg-gray-500",lime:"bg-lime-600",pink:"bg-pink-500",teal:"bg-teal-600"},size:{sm:"h-1.5",md:"h-2.5",lg:"h-4",xl:"h-6"}},uEe={root:{base:"h-4 w-4 border border-gray-300 text-cyan-600 focus:ring-2 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:bg-cyan-600 dark:focus:ring-cyan-600"}},dEe={root:{base:"flex"},field:{base:"relative w-full",input:{base:"w-full cursor-pointer appearance-none rounded-lg bg-gray-200 dark:bg-gray-700",sizes:{sm:"h-1",md:"h-2",lg:"h-3"}}}},hEe={root:{base:"flex items-center"},star:{empty:"text-gray-300 dark:text-gray-500",filled:"text-yellow-400",sizes:{sm:"h-5 w-5",md:"h-7 w-7",lg:"h-10 w-10"}}},fEe={base:"flex items-center",label:"text-sm font-medium text-cyan-600 dark:text-cyan-500",progress:{base:"mx-4 h-5 w-2/4 rounded bg-gray-200 dark:bg-gray-700",fill:"h-5 rounded bg-yellow-400",label:"text-sm font-medium text-cyan-600 dark:text-cyan-500"}},pEe={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},mEe={root:{base:"h-full",collapsed:{on:"w-16",off:"w-64"},inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-gray-50 px-3 py-4 dark:bg-gray-800"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:{base:"h-6 w-6 transition delay-0 ease-in-out",open:{on:"rotate-180",off:""}}},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg bg-gray-100 p-4 dark:bg-gray-700",color:{blue:"bg-cyan-50 dark:bg-cyan-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"flex-1 whitespace-nowrap px-3"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:"",listItem:""},items:{base:""},itemGroup:{base:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700"},logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},gEe={base:"inline animate-spin text-gray-200",color:{failure:"fill-red-600",gray:"fill-gray-600",info:"fill-cyan-600",pink:"fill-pink-600",purple:"fill-purple-600",success:"fill-green-500",warning:"fill-yellow-400"},light:{off:{base:"dark:text-gray-600",color:{failure:"",gray:"dark:fill-gray-300",info:"",pink:"",purple:"",success:"",warning:""}},on:{base:"",color:{failure:"",gray:"",info:"",pink:"",purple:"",success:"",warning:""}}},size:{xs:"h-3 w-3",sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-10 w-10"}},yEe={root:{base:"w-full text-left text-sm text-gray-500 dark:text-gray-400",shadow:"absolute left-0 top-0 -z-10 h-full w-full rounded-lg bg-white drop-shadow-md dark:bg-black",wrapper:"relative"},body:{base:"group/body",cell:{base:"px-6 py-4 group-first/body:group-first/row:first:rounded-tl-lg group-first/body:group-first/row:last:rounded-tr-lg group-last/body:group-last/row:first:rounded-bl-lg group-last/body:group-last/row:last:rounded-br-lg"}},head:{base:"group/head text-xs uppercase text-gray-700 dark:text-gray-400",cell:{base:"bg-gray-50 px-6 py-3 group-first/head:first:rounded-tl-lg group-first/head:last:rounded-tr-lg dark:bg-gray-700"}},row:{base:"group/row",hovered:"hover:bg-gray-50 dark:hover:bg-gray-600",striped:"odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700"}},vEe={base:"flex flex-col gap-2",tablist:{base:"flex text-center",variant:{default:"flex-wrap border-b border-gray-200 dark:border-gray-700",underline:"-mb-px flex-wrap border-b border-gray-200 dark:border-gray-700",pills:"flex-wrap space-x-2 text-sm font-medium text-gray-500 dark:text-gray-400",fullWidth:"grid w-full grid-flow-col divide-x divide-gray-200 rounded-none text-sm font-medium shadow dark:divide-gray-700 dark:text-gray-400"},tabitem:{base:"flex items-center justify-center rounded-t-lg p-4 text-sm font-medium first:ml-0 focus:outline-none focus:ring-4 focus:ring-cyan-300 disabled:cursor-not-allowed disabled:text-gray-400 disabled:dark:text-gray-500",variant:{default:{base:"rounded-t-lg",active:{on:"bg-gray-100 text-cyan-600 dark:bg-gray-800 dark:text-cyan-500",off:"text-gray-500 hover:bg-gray-50 hover:text-gray-600 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300"}},underline:{base:"rounded-t-lg",active:{on:"active rounded-t-lg border-b-2 border-cyan-600 text-cyan-600 dark:border-cyan-500 dark:text-cyan-500",off:"border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"}},pills:{base:"",active:{on:"rounded-lg bg-cyan-600 text-white",off:"rounded-lg hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-white"}},fullWidth:{base:"ml-0 flex w-full rounded-none first:ml-0",active:{on:"active rounded-none bg-gray-100 p-4 text-gray-900 dark:bg-gray-700 dark:text-white",off:"rounded-none bg-white hover:bg-gray-50 hover:text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-white"}}},icon:"mr-2 h-5 w-5"}},tabitemcontainer:{base:"",variant:{default:"",underline:"",pills:"",fullWidth:""}},tabpanel:"py-3"},EEe={base:"block w-full rounded-lg border text-sm disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}},_Ee={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},bEe={root:{direction:{horizontal:"sm:flex",vertical:"relative border-l border-gray-200 dark:border-gray-700"}},item:{root:{horizontal:"relative mb-6 sm:mb-0",vertical:"mb-10 ml-6"},content:{root:{base:"",horizontal:"mt-3 sm:pr-8",vertical:""},body:{base:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400"},time:{base:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},title:{base:"text-lg font-semibold text-gray-900 dark:text-white"}},point:{horizontal:"flex items-center",line:"hidden h-0.5 w-full bg-gray-200 dark:bg-gray-700 sm:flex",marker:{base:{horizontal:"absolute -left-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700",vertical:"absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700"},icon:{base:"h-3 w-3 text-cyan-600 dark:text-cyan-300",wrapper:"absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-cyan-200 ring-8 ring-white dark:bg-cyan-900 dark:ring-gray-900"}},vertical:""}}},wEe={root:{base:"flex w-full max-w-xs items-center rounded-lg bg-white p-4 text-gray-500 shadow dark:bg-gray-800 dark:text-gray-400",closed:"opacity-0 ease-out"},toggle:{base:"-m-1.5 ml-auto inline-flex h-8 w-8 rounded-lg bg-white p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-900 focus:ring-2 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-500 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5 shrink-0"}},SEe={root:{base:"group flex rounded-lg focus:outline-none",active:{on:"cursor-pointer",off:"cursor-not-allowed opacity-50"},label:"ms-3 mt-0.5 text-start text-sm font-medium text-gray-900 dark:text-gray-300"},toggle:{base:"relative rounded-full border after:absolute after:rounded-full after:bg-white after:transition-all group-focus:ring-4 group-focus:ring-cyan-500/25",checked:{on:"after:translate-x-full after:border-white rtl:after:-translate-x-full",off:"border-gray-200 bg-gray-200 dark:border-gray-600 dark:bg-gray-700",color:{blue:"border-cyan-700 bg-cyan-700",dark:"bg-dark-700 border-dark-900",failure:"border-red-900 bg-red-700",gray:"border-gray-600 bg-gray-500",green:"border-green-700 bg-green-600",light:"bg-light-700 border-light-900",red:"border-red-900 bg-red-700",purple:"border-purple-900 bg-purple-700",success:"border-green-500 bg-green-500",yellow:"border-yellow-400 bg-yellow-400",warning:"border-yellow-600 bg-yellow-600",cyan:"border-cyan-500 bg-cyan-500",lime:"border-lime-400 bg-lime-400",indigo:"border-indigo-400 bg-indigo-400",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4",info:"border-cyan-600 bg-cyan-600",pink:"border-pink-600 bg-pink-600"}},sizes:{sm:"h-5 w-9 min-w-9 after:left-px after:top-px after:h-4 after:w-4 rtl:after:right-px",md:"h-6 w-11 min-w-11 after:left-px after:top-px after:h-5 after:w-5 rtl:after:right-px",lg:"h-7 w-14 min-w-14 after:left-1 after:top-0.5 after:h-6 after:w-6 rtl:after:right-1"}}},TEe={target:"w-fit",animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"absolute z-10 inline-block rounded-lg px-3 py-2 text-sm font-medium shadow-sm",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},content:"relative z-20"},CEe={accordion:Lve,alert:Mve,avatar:jve,badge:Uve,blockquote:Fve,breadcrumb:Vve,button:Bve,buttonGroup:$ve,card:Hve,carousel:zve,checkbox:Gve,clipboard:Wve,datepicker:qve,darkThemeToggle:Kve,drawer:Yve,dropdown:nu,fileInput:Xve,floatingLabel:Jve,footer:Qve,helperText:Zve,hr:eEe,kbd:tEe,label:rEe,listGroup:iEe,list:nEe,megaMenu:oEe,modal:aEe,navbar:W_,pagination:sEe,popover:cEe,progress:lEe,radio:uEe,rangeSlider:dEe,rating:hEe,ratingAdvanced:fEe,select:pEe,textInput:_Ee,textarea:EEe,toggleSwitch:SEe,sidebar:mEe,spinner:gEe,table:yEe,tabs:vEe,timeline:bEe,toast:wEe,tooltip:TEe},REe={theme:f0(CEe)};function st(){return f0(REe.theme)}const mq=C.createContext(void 0);function gq(){const e=C.useContext(mq);if(!e)throw new Error("useAccordionContext should be used within the AccordionPanelContext provider!");return e}const yq=({children:e,className:t,theme:r={},...n})=>{const{isOpen:i}=gq(),o=xe(st().accordion.content,r);return h.jsx("div",{className:se(o.base,t),"data-testid":"flowbite-accordion-content",hidden:!i,...n,children:e})},vq=({children:e,...t})=>{const{alwaysOpen:r}=t,[n,i]=C.useState(t.isOpen),o=r?{...t,isOpen:n,setOpen:()=>i(!n)}:t;return h.jsx(mq.Provider,{value:o,children:e})},Eq=({as:e="h2",children:t,className:r,theme:n={},...i})=>{const{arrowIcon:o,flush:a,isOpen:s,setOpen:c}=gq(),l=()=>typeof c<"u"&&c(),u=xe(st().accordion.title,n);return h.jsxs("button",{className:se(u.base,u.flush[a?"on":"off"],u.open[s?"on":"off"],r),onClick:l,type:"button",...i,children:[h.jsx(e,{className:u.heading,"data-testid":"flowbite-accordion-heading",children:t}),o&&h.jsx(o,{"aria-hidden":!0,className:se(u.arrow.base,u.arrow.open[s?"on":"off"]),"data-testid":"flowbite-accordion-arrow"})]})},_q=({alwaysOpen:e=!1,arrowIcon:t=sq,children:r,flush:n=!1,collapseAll:i=!1,className:o,theme:a={},...s})=>{const[c,l]=C.useState(i?-1:0),u=C.useMemo(()=>C.Children.map(r,(f,p)=>C.cloneElement(f,{alwaysOpen:e,arrowIcon:t,flush:n,isOpen:c===p,setOpen:()=>l(c===p?-1:p)})),[e,t,r,n,c]),d=xe(st().accordion.root,a);return h.jsx("div",{className:se(d.base,d.flush[n?"on":"off"],o),"data-testid":"flowbite-accordion",...s,children:u})};_q.displayName="Accordion";vq.displayName="Accordion.Panel";Eq.displayName="Accordion.Title";yq.displayName="Accordion.Content";Object.assign(_q,{Panel:vq,Title:Eq,Content:yq});const bq=({children:e,className:t,theme:r={},...n})=>{const i=xe(st().avatar.group,r);return h.jsx("div",{"data-testid":"avatar-group-element",className:se(i.base,t),...n,children:e})};bq.displayName="Avatar.Group";const wq=({className:e,href:t,theme:r={},total:n,...i})=>{const o=xe(st().avatar.groupCounter,r);return h.jsxs("a",{href:t,className:se(o.base,e),...i,children:["+",n]})};wq.displayName="Avatar.GroupCounter";const Sq=({alt:e="",bordered:t=!1,children:r,className:n,color:i="light",img:o,placeholderInitials:a="",rounded:s=!1,size:c="md",stacked:l=!1,status:u,statusPosition:d="top-left",theme:f={},...p})=>{const m=xe(st().avatar,f),g=se(m.root.img.base,t&&m.root.bordered,t&&m.root.color[i],s&&m.root.rounded,l&&m.root.stacked,m.root.img.on,m.root.size[c]),y={className:se(g,m.root.img.on),"data-testid":"flowbite-avatar-img"};return h.jsxs("div",{className:se(m.root.base,n),"data-testid":"flowbite-avatar",...p,children:[h.jsxs("div",{className:"relative",children:[o?typeof o=="string"?h.jsx("img",{alt:e,src:o,...y}):o({alt:e,...y}):a?h.jsx("div",{className:se(m.root.img.off,m.root.initials.base,l&&m.root.stacked,t&&m.root.bordered,t&&m.root.color[i],m.root.size[c],s&&m.root.rounded),"data-testid":"flowbite-avatar-initials-placeholder",children:h.jsx("span",{className:se(m.root.initials.text),"data-testid":"flowbite-avatar-initials-placeholder-text",children:a})}):h.jsx("div",{className:se(g,m.root.img.off),"data-testid":"flowbite-avatar-img",children:h.jsx("svg",{className:m.root.img.placeholder,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),u&&h.jsx("span",{"data-testid":"flowbite-avatar-status",className:se(m.root.status.base,m.root.status[u],m.root.statusPosition[d])})]}),r&&h.jsx("div",{children:r})]})};Sq.displayName="Avatar";Object.assign(Sq,{Group:bq,Counter:wq});const Tq=({children:e,color:t="info",href:r,icon:n,size:i="xs",className:o,theme:a={},...s})=>{const c=xe(st().badge,a),l=()=>h.jsxs("span",{className:se(c.root.base,c.root.color[t],c.root.size[i],c.icon[n?"on":"off"],o),"data-testid":"flowbite-badge",...s,children:[n&&h.jsx(n,{"aria-hidden":!0,className:c.icon.size[i],"data-testid":"flowbite-badge-icon"}),e&&h.jsx("span",{children:e})]});return r?h.jsx("a",{className:c.root.href,href:r,children:h.jsx(l,{})}):h.jsx(l,{})};Tq.displayName="Badge";const Cq=({className:e,color:t="info",light:r,size:n="md",theme:i={},...o})=>{const a=xe(st().spinner,i);return h.jsx("span",{role:"status",...o,children:h.jsxs("svg",{fill:"none",viewBox:"0 0 100 101",className:se(a.base,a.color[t],a.light[r?"on":"off"].base,a.light[r?"on":"off"].color[t],a.size[n],e),children:[h.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),h.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})})};Cq.displayName="Spinner";const bD=C.forwardRef(({children:e,as:t,href:r,type:n="button",...i},o)=>{const a=t||(r?"a":"button");return C.createElement(a,{ref:o,href:r,type:n,...i},e)});bD.displayName="ButtonBaseComponent";const Rq=(e,t,r)=>C.Children.map(e,(n,i)=>{if(C.isValidElement(n)){const o=n.type==wD?{positionInGroup:IEe(i,C.Children.count(e))}:{};return n.props.children?C.cloneElement(n,{...n.props,children:Rq(n.props.children,t,r),...o}):C.cloneElement(n,{outline:t,pill:r,...o})}return n}),IEe=(e,t)=>e===0?"start":e===t-1?"end":"middle",Iq=({children:e,className:t,outline:r,pill:n,theme:i={},...o})=>{const a=C.useMemo(()=>Rq(e,r,n),[e,r,n]),s=xe(st().buttonGroup,i);return h.jsx("div",{className:se(s.base,t),role:"group",...o,children:a})};Iq.displayName="Button.Group";const xq=C.forwardRef(({children:e,className:t,color:r="info",disabled:n,fullSized:i,isProcessing:o=!1,processingLabel:a="Loading...",processingSpinner:s,gradientDuoTone:c,gradientMonochrome:l,label:u,outline:d=!1,pill:f=!1,positionInGroup:p="none",size:m="md",theme:g={},...y},v)=>{const{buttonGroup:E,button:b}=st(),S=xe(b,g),A=y;return h.jsx(bD,{ref:v,disabled:n,className:se(S.base,n&&S.disabled,!c&&!l&&S.color[r],c&&!l&&S.gradientDuoTone[c],!c&&l&&S.gradient[l],d&&(S.outline.color[r]??S.outline.color.default),S.pill[f?"on":"off"],i&&S.fullSized,E.position[p],t),...A,children:h.jsx("span",{className:se(S.inner.base,S.outline[d?"on":"off"],S.outline.pill[d&&f?"on":"off"],S.size[m],d&&!S.outline.color[r]&&S.inner.outline,o&&S.isProcessing,o&&S.inner.isProcessingPadding[m],S.inner.position[p]),children:h.jsxs(h.Fragment,{children:[o&&h.jsx("span",{className:se(S.spinnerSlot,S.spinnerLeftPosition[m]),children:s||h.jsx(Cq,{size:m})}),typeof e<"u"?e:h.jsx("span",{"data-testid":"flowbite-button-label",className:se(S.label),children:o?a:u})]})})})});xq.displayName="Button";const wD=Object.assign(xq,{Group:Iq}),Aq=({children:e,...t})=>{const r=n=>{const o=n.target.closest('[role="banner"]');o==null||o.remove()};return h.jsx(wD,{onClick:r,...t,children:e})};Aq.displayName="Banner.CollapseButton";const Nq=({children:e,...t})=>h.jsx("div",{"data-testid":"flowbite-banner",role:"banner",tabIndex:-1,...t,children:e});Nq.displayName="Banner";Object.assign(Nq,{CollapseButton:Aq});const Oq=C.forwardRef(({children:e,className:t,href:r,icon:n,theme:i={},...o},a)=>{const s=typeof r<"u",c=s?"a":"span",l=xe(st().breadcrumb.item,i);return h.jsxs("li",{className:se(l.base,t),...o,children:[h.jsx(lq,{"aria-hidden":!0,className:l.chevron,"data-testid":"flowbite-breadcrumb-separator"}),h.jsxs(c,{ref:a,className:l.href[s?"on":"off"],"data-testid":"flowbite-breadcrumb-item",href:r,children:[n&&h.jsx(n,{"aria-hidden":!0,className:l.icon}),e]})]})});Oq.displayName="Breadcrumb.Item";const kq=({children:e,className:t,theme:r={},...n})=>{const i=xe(st().breadcrumb.root,r);return h.jsx("nav",{"aria-label":"Breadcrumb",className:se(i.base,t),...n,children:h.jsx("ol",{className:i.list,children:e})})};kq.displayName="Breadcrumb";Object.assign(kq,{Item:Oq});var Pq={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,n(s)))}return o}function n(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return r.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)t.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Pq);var xEe=Pq.exports;const AEe=ia(xEe);var SD={exports:{}};function Dq(e,t=100,r={}){if(typeof e!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof e}\`.`);if(t<0)throw new RangeError("`wait` must not be negative.");const{immediate:n}=typeof r=="boolean"?{immediate:r}:r;let i,o,a,s,c;function l(){const f=i,p=o;return i=void 0,o=void 0,c=e.apply(f,p),c}function u(){const f=Date.now()-s;f<t&&f>=0?a=setTimeout(u,t-f):(a=void 0,n||(c=l()))}const d=function(...f){if(i&&this!==i)throw new Error("Debounced method called with different contexts.");i=this,o=f,s=Date.now();const p=n&&!a;return a||(a=setTimeout(u,t)),p&&(c=l()),c};return d.clear=()=>{a&&(clearTimeout(a),a=void 0)},d.flush=()=>{a&&d.trigger()},d.trigger=()=>{c=l(),d.clear()},d}SD.exports.debounce=Dq;SD.exports=Dq;var NEe=SD.exports;const OEe=ia(NEe);var kEe=Object.defineProperty,PEe=(e,t,r)=>t in e?kEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wi=(e,t,r)=>PEe(e,typeof t!="symbol"?t+"":t,r);const DEe=300,LEe=0;class MEe extends C.PureComponent{constructor(t){super(t),wi(this,"container"),wi(this,"scrolling"),wi(this,"started"),wi(this,"pressed"),wi(this,"isMobile",!1),wi(this,"internal"),wi(this,"scrollLeft"),wi(this,"scrollTop"),wi(this,"clientX"),wi(this,"clientY"),wi(this,"onEndScroll",()=>{this.scrolling=!1,!this.pressed&&this.started&&this.processEnd()}),wi(this,"onScroll",()=>{const r=this.container.current;(r.scrollLeft!==this.scrollLeft||r.scrollTop!==this.scrollTop)&&(this.scrolling=!0,this.processScroll(),this.onEndScroll())}),wi(this,"onTouchStart",r=>{const{nativeMobileScroll:n}=this.props;if(this.isDraggable(r.target))if(this.internal=!0,n&&this.scrolling)this.pressed=!0;else{const i=r.touches[0];this.processClick(i.clientX,i.clientY),!n&&this.props.stopPropagation&&r.stopPropagation()}}),wi(this,"onTouchEnd",()=>{const{nativeMobileScroll:r}=this.props;this.pressed&&(this.started&&(!this.scrolling||!r)?this.processEnd():this.pressed=!1,this.forceUpdate())}),wi(this,"onTouchMove",r=>{const{nativeMobileScroll:n}=this.props;if(this.pressed&&(!n||!this.isMobile)){const i=r.touches[0];i&&this.processMove(i.clientX,i.clientY),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation()}}),wi(this,"onMouseDown",r=>{var n,i;this.isDraggable(r.target)&&this.isScrollable()&&(this.internal=!0,((i=(n=this.props)==null?void 0:n.buttons)==null?void 0:i.indexOf(r.button))!==-1&&(this.processClick(r.clientX,r.clientY),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation()))}),wi(this,"onMouseMove",r=>{this.pressed&&(this.processMove(r.clientX,r.clientY),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation())}),wi(this,"onMouseUp",r=>{this.pressed&&(this.started?this.processEnd():(this.internal=!1,this.pressed=!1,this.forceUpdate(),this.props.onClick&&this.props.onClick(r)),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation())}),this.container=Or.createRef(),this.onEndScroll=OEe(this.onEndScroll,DEe),this.scrolling=!1,this.started=!1,this.pressed=!1,this.internal=!1,this.getRef=this.getRef.bind(this)}componentDidMount(){const{nativeMobileScroll:t}=this.props,r=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),r.addEventListener("touchstart",this.onTouchStart,{passive:!1}),r.addEventListener("mousedown",this.onMouseDown,{passive:!1}),t&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())}componentWillUnmount(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)}getElement(){return this.container.current}isMobileDevice(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1}isDraggable(t){const r=this.props.ignoreElements;if(r){const n=t.closest(r);return n===null||n.contains(this.getElement())}else return!0}isScrollable(){const t=this.container.current;return t&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)}processClick(t,r){const n=this.container.current;this.scrollLeft=n==null?void 0:n.scrollLeft,this.scrollTop=n==null?void 0:n.scrollTop,this.clientX=t,this.clientY=r,this.pressed=!0}processStart(t=!0){const{onStartScroll:r}=this.props;this.started=!0,t&&document.body.classList.add("cursor-grab"),r&&r({external:!this.internal}),this.forceUpdate()}processScroll(){if(this.started){const{onScroll:t}=this.props;t&&t({external:!this.internal})}else this.processStart(!1)}processMove(t,r){const{horizontal:n,vertical:i,activationDistance:o,onScroll:a}=this.props,s=this.container.current;this.started?(n&&(s.scrollLeft-=t-this.clientX),i&&(s.scrollTop-=r-this.clientY),a&&a({external:!this.internal}),this.clientX=t,this.clientY=r,this.scrollLeft=s.scrollLeft,this.scrollTop=s.scrollTop):(n&&Math.abs(t-this.clientX)>o||i&&Math.abs(r-this.clientY)>o)&&(this.clientX=t,this.clientY=r,this.processStart())}processEnd(){const{onEndScroll:t}=this.props;this.container.current&&t&&t({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("cursor-grab"),this.forceUpdate()}getRef(t){[this.container,this.props.innerRef].forEach(r=>{r&&(typeof r=="function"?r(t):r.current=t)})}render(){const{children:t,draggingClassName:r,className:n,style:i,hideScrollbars:o}=this.props;return h.jsx("div",{className:AEe(n,this.pressed&&r,{"!scroll-auto [&>*]:pointer-events-none [&>*]:cursor-grab":this.pressed,"overflow-auto":this.isMobile,"overflow-hidden !overflow-x-hidden [overflow:-moz-scrollbars-none] [scrollbar-width:none]":o,"[&::-webkit-scrollbar]:[-webkit-appearance:none !important] [&::-webkit-scrollbar]:!hidden [&::-webkit-scrollbar]:!h-0 [&::-webkit-scrollbar]:!w-0 [&::-webkit-scrollbar]:!bg-transparent":o}),style:i,ref:this.getRef,onScroll:this.onScroll,children:t})}}wi(MEe,"defaultProps",{nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},buttons:[LEe]});const jEe=C.forwardRef(({className:e,color:t="default",theme:r={},...n},i)=>{const o=xe(st().checkbox,r);return h.jsx("input",{ref:i,type:"checkbox",className:se(o.root.base,o.root.color[t],e),...n})});jEe.displayName="Checkbox";function gT(){return typeof window<"u"}function od(e){return Lq(e)?(e.nodeName||"").toLowerCase():"#document"}function ea(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Bc(e){var t;return(t=(Lq(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Lq(e){return gT()?e instanceof Node||e instanceof ea(e).Node:!1}function Zr(e){return gT()?e instanceof Element||e instanceof ea(e).Element:!1}function ni(e){return gT()?e instanceof HTMLElement||e instanceof ea(e).HTMLElement:!1}function QN(e){return!gT()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ea(e).ShadowRoot}function hv(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=_s(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function UEe(e){return["table","td","th"].includes(od(e))}function yT(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function TD(e){const t=CD(),r=Zr(e)?_s(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function FEe(e){let t=Al(e);for(;ni(t)&&!Yu(t);){if(TD(t))return t;if(yT(t))return null;t=Al(t)}return null}function CD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Yu(e){return["html","body","#document"].includes(od(e))}function _s(e){return ea(e).getComputedStyle(e)}function vT(e){return Zr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Al(e){if(od(e)==="html")return e;const t=e.assignedSlot||e.parentNode||QN(e)&&e.host||Bc(e);return QN(t)?t.host:t}function Mq(e){const t=Al(e);return Yu(t)?e.ownerDocument?e.ownerDocument.body:e.body:ni(t)&&hv(t)?t:Mq(t)}function Mu(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=Mq(e),o=i===((n=e.ownerDocument)==null?void 0:n.body),a=ea(i);if(o){const s=ZN(a);return t.concat(a,a.visualViewport||[],hv(i)?i:[],s&&r?Mu(s):[])}return t.concat(i,Mu(i,[],r))}function ZN(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Hs(e){let t=e.activeElement;for(;((r=t)==null||(r=r.shadowRoot)==null?void 0:r.activeElement)!=null;){var r;t=t.shadowRoot.activeElement}return t}function ei(e,t){if(!e||!t)return!1;const r=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&QN(r)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function RD(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function jq(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:r,version:n}=t;return r+"/"+n}).join(" "):navigator.userAgent}function Uq(e){return e.mozInputSource===0&&e.isTrusted?!0:eO()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function ID(e){return VEe()?!1:!eO()&&e.width===0&&e.height===0||eO()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function xD(){return/apple/i.test(navigator.vendor)}function eO(){const e=/android/i;return e.test(RD())||e.test(jq())}function Fq(){return RD().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function VEe(){return jq().includes("jsdom/")}function p0(e,t){const r=["mouse","pen"];return t||r.push("",void 0),r.includes(e)}function BEe(e){return"nativeEvent"in e}function $Ee(e){return e.matches("html,body")}function Li(e){return(e==null?void 0:e.ownerDocument)||document}function _R(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const r=e;return r.target!=null&&t.contains(r.target)}function hl(e){return"composedPath"in e?e.composedPath()[0]:e.target}const HEe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function AD(e){return ni(e)&&e.matches(HEe)}function qi(e){e.preventDefault(),e.stopPropagation()}function Vq(e){return e?e.getAttribute("role")==="combobox"&&AD(e):!1}const zEe=["top","right","bottom","left"],o4=["start","end"],a4=zEe.reduce((e,t)=>e.concat(t,t+"-"+o4[0],t+"-"+o4[1]),[]),qp=Math.min,sh=Math.max,ww=Math.round,Zf=Math.floor,Oc=e=>({x:e,y:e}),GEe={left:"right",right:"left",bottom:"top",top:"bottom"},WEe={start:"end",end:"start"};function tO(e,t,r){return sh(e,qp(t,r))}function Om(e,t){return typeof e=="function"?e(t):e}function Nl(e){return e.split("-")[0]}function kc(e){return e.split("-")[1]}function Bq(e){return e==="x"?"y":"x"}function ND(e){return e==="y"?"height":"width"}function Yp(e){return["top","bottom"].includes(Nl(e))?"y":"x"}function OD(e){return Bq(Yp(e))}function $q(e,t,r){r===void 0&&(r=!1);const n=kc(e),i=OD(e),o=ND(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Tw(a)),[a,Tw(a)]}function KEe(e){const t=Tw(e);return[Sw(e),t,Sw(t)]}function Sw(e){return e.replace(/start|end/g,t=>WEe[t])}function qEe(e,t,r){const n=["left","right"],i=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?o:a;default:return[]}}function YEe(e,t,r,n){const i=kc(e);let o=qEe(Nl(e),r==="start",n);return i&&(o=o.map(a=>a+"-"+i),t&&(o=o.concat(o.map(Sw)))),o}function Tw(e){return e.replace(/left|right|bottom|top/g,t=>GEe[t])}function XEe(e){return{top:0,right:0,bottom:0,left:0,...e}}function Hq(e){return typeof e!="number"?XEe(e):{top:e,right:e,bottom:e,left:e}}function Cw(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var JEe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Rw=JEe.join(","),zq=typeof Element>"u",Xp=zq?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Iw=!zq&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},xw=function e(t,r){var n;r===void 0&&(r=!0);var i=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),o=i===""||i==="true",a=o||r&&t&&e(t.parentNode);return a},QEe=function(t){var r,n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return n===""||n==="true"},ZEe=function(t,r,n){if(xw(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(Rw));return r&&Xp.call(t,Rw)&&i.unshift(t),i=i.filter(n),i},e_e=function e(t,r,n){for(var i=[],o=Array.from(t);o.length;){var a=o.shift();if(!xw(a,!1))if(a.tagName==="SLOT"){var s=a.assignedElements(),c=s.length?s:a.children,l=e(c,!0,n);n.flatten?i.push.apply(i,l):i.push({scopeParent:a,candidates:l})}else{var u=Xp.call(a,Rw);u&&n.filter(a)&&(r||!t.includes(a))&&i.push(a);var d=a.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(a),f=!xw(d,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(a));if(d&&f){var p=e(d===!0?a.children:d.children,!0,n);n.flatten?i.push.apply(i,p):i.push({scopeParent:a,candidates:p})}else o.unshift.apply(o,a.children)}}return i},Gq=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Wq=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||QEe(t))&&!Gq(t)?0:t.tabIndex},t_e=function(t,r){var n=Wq(t);return n<0&&r&&!Gq(t)?0:n},r_e=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},Kq=function(t){return t.tagName==="INPUT"},n_e=function(t){return Kq(t)&&t.type==="hidden"},i_e=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},o_e=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},a_e=function(t){if(!t.name)return!0;var r=t.form||Iw(t),n=function(s){return r.querySelectorAll('input[type="radio"][name="'+s+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=n(window.CSS.escape(t.name));else try{i=n(t.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var o=o_e(i,t.form);return!o||o===t},s_e=function(t){return Kq(t)&&t.type==="radio"},c_e=function(t){return s_e(t)&&!a_e(t)},l_e=function(t){var r,n=t&&Iw(t),i=(r=n)===null||r===void 0?void 0:r.host,o=!1;if(n&&n!==t){var a,s,c;for(o=!!((a=i)!==null&&a!==void 0&&(s=a.ownerDocument)!==null&&s!==void 0&&s.contains(i)||t!=null&&(c=t.ownerDocument)!==null&&c!==void 0&&c.contains(t));!o&&i;){var l,u,d;n=Iw(i),i=(l=n)===null||l===void 0?void 0:l.host,o=!!((u=i)!==null&&u!==void 0&&(d=u.ownerDocument)!==null&&d!==void 0&&d.contains(i))}}return o},s4=function(t){var r=t.getBoundingClientRect(),n=r.width,i=r.height;return n===0&&i===0},u_e=function(t,r){var n=r.displayCheck,i=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=Xp.call(t,"details>summary:first-of-type"),a=o?t.parentElement:t;if(Xp.call(a,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof i=="function"){for(var s=t;t;){var c=t.parentElement,l=Iw(t);if(c&&!c.shadowRoot&&i(c)===!0)return s4(t);t.assignedSlot?t=t.assignedSlot:!c&&l!==t.ownerDocument?t=l.host:t=c}t=s}if(l_e(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return s4(t);return!1},d_e=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var i=r.children.item(n);if(i.tagName==="LEGEND")return Xp.call(r,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}r=r.parentElement}return!1},h_e=function(t,r){return!(r.disabled||xw(r)||n_e(r)||u_e(r,t)||i_e(r)||d_e(r))},rO=function(t,r){return!(c_e(r)||Wq(r)<0||!h_e(t,r))},f_e=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},p_e=function e(t){var r=[],n=[];return t.forEach(function(i,o){var a=!!i.scopeParent,s=a?i.scopeParent:i,c=t_e(s,a),l=a?e(i.candidates):s;c===0?a?r.push.apply(r,l):r.push(s):n.push({documentOrder:o,tabIndex:c,item:i,isScope:a,content:l})}),n.sort(r_e).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(r)},m0=function(t,r){r=r||{};var n;return r.getShadowRoot?n=e_e([t],r.includeContainer,{filter:rO.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:f_e}):n=ZEe(t,r.includeContainer,rO.bind(null,r)),p_e(n)},m_e=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return Xp.call(t,Rw)===!1?!1:rO(r,t)};function c4(e,t,r){let{reference:n,floating:i}=e;const o=Yp(t),a=OD(t),s=ND(a),c=Nl(t),l=o==="y",u=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,f=n[s]/2-i[s]/2;let p;switch(c){case"top":p={x:u,y:n.y-i.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:d};break;case"left":p={x:n.x-i.width,y:d};break;default:p={x:n.x,y:n.y}}switch(kc(t)){case"start":p[a]-=f*(r&&l?-1:1);break;case"end":p[a]+=f*(r&&l?-1:1);break}return p}const g_e=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:a}=r,s=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let l=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=c4(l,n,c),f=n,p={},m=0;for(let g=0;g<s.length;g++){const{name:y,fn:v}=s[g],{x:E,y:b,data:S,reset:A}=await v({x:u,y:d,initialPlacement:n,placement:f,strategy:i,middlewareData:p,rects:l,platform:a,elements:{reference:e,floating:t}});u=E??u,d=b??d,p={...p,[y]:{...p[y],...S}},A&&m<=50&&(m++,typeof A=="object"&&(A.placement&&(f=A.placement),A.rects&&(l=A.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):A.rects),{x:u,y:d}=c4(l,f,c)),g=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:p}};async function kD(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:o,rects:a,elements:s,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Om(t,e),m=Hq(p),y=s[f?d==="floating"?"reference":"floating":d],v=Cw(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(y)))==null||r?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:l,rootBoundary:u,strategy:c})),E=d==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),S=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},A=Cw(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:E,offsetParent:b,strategy:c}):E);return{top:(v.top-A.top+m.top)/S.y,bottom:(A.bottom-v.bottom+m.bottom)/S.y,left:(v.left-A.left+m.left)/S.x,right:(A.right-v.right+m.right)/S.x}}const y_e=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:o,platform:a,elements:s,middlewareData:c}=t,{element:l,padding:u=0}=Om(e,t)||{};if(l==null)return{};const d=Hq(u),f={x:r,y:n},p=OD(i),m=ND(p),g=await a.getDimensions(l),y=p==="y",v=y?"top":"left",E=y?"bottom":"right",b=y?"clientHeight":"clientWidth",S=o.reference[m]+o.reference[p]-f[p]-o.floating[m],A=f[p]-o.reference[p],N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let D=N?N[b]:0;(!D||!await(a.isElement==null?void 0:a.isElement(N)))&&(D=s.floating[b]||o.floating[m]);const M=S/2-A/2,H=D/2-g[m]/2-1,V=qp(d[v],H),G=qp(d[E],H),Y=V,Z=D-g[m]-G,$=D/2-g[m]/2+M,F=tO(Y,$,Z),K=!c.arrow&&kc(i)!=null&&$!==F&&o.reference[m]/2-($<Y?V:G)-g[m]/2<0,k=K?$<Y?$-Y:$-Z:0;return{[p]:f[p]+k,data:{[p]:F,centerOffset:$-F-k,...K&&{alignmentOffset:k}},reset:K}}});function v_e(e,t,r){return(e?[...r.filter(i=>kc(i)===e),...r.filter(i=>kc(i)!==e)]:r.filter(i=>Nl(i)===i)).filter(i=>e?kc(i)===e||(t?Sw(i)!==i:!1):!0)}const E_e=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var r,n,i;const{rects:o,middlewareData:a,placement:s,platform:c,elements:l}=t,{crossAxis:u=!1,alignment:d,allowedPlacements:f=a4,autoAlignment:p=!0,...m}=Om(e,t),g=d!==void 0||f===a4?v_e(d||null,p,f):f,y=await kD(t,m),v=((r=a.autoPlacement)==null?void 0:r.index)||0,E=g[v];if(E==null)return{};const b=$q(E,o,await(c.isRTL==null?void 0:c.isRTL(l.floating)));if(s!==E)return{reset:{placement:g[0]}};const S=[y[Nl(E)],y[b[0]],y[b[1]]],A=[...((n=a.autoPlacement)==null?void 0:n.overflows)||[],{placement:E,overflows:S}],N=g[v+1];if(N)return{data:{index:v+1,overflows:A},reset:{placement:N}};const D=A.map(V=>{const G=kc(V.placement);return[V.placement,G&&u?V.overflows.slice(0,2).reduce((Y,Z)=>Y+Z,0):V.overflows[0],V.overflows]}).sort((V,G)=>V[1]-G[1]),H=((i=D.filter(V=>V[2].slice(0,kc(V[0])?2:3).every(G=>G<=0))[0])==null?void 0:i[0])||D[0][0];return H!==s?{data:{index:v+1,overflows:A},reset:{placement:H}}:{}}}},__e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=Om(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const v=Nl(i),E=Yp(s),b=Nl(s)===s,S=await(c.isRTL==null?void 0:c.isRTL(l.floating)),A=f||(b||!g?[Tw(s)]:KEe(s)),N=m!=="none";!f&&N&&A.push(...YEe(s,g,m,S));const D=[s,...A],M=await kD(t,y),H=[];let V=((n=o.flip)==null?void 0:n.overflows)||[];if(u&&H.push(M[v]),d){const $=$q(i,a,S);H.push(M[$[0]],M[$[1]])}if(V=[...V,{placement:i,overflows:H}],!H.every($=>$<=0)){var G,Y;const $=(((G=o.flip)==null?void 0:G.index)||0)+1,F=D[$];if(F)return{data:{index:$,overflows:V},reset:{placement:F}};let K=(Y=V.filter(k=>k.overflows[0]<=0).sort((k,P)=>k.overflows[1]-P.overflows[1])[0])==null?void 0:Y.placement;if(!K)switch(p){case"bestFit":{var Z;const k=(Z=V.filter(P=>{if(N){const B=Yp(P.placement);return B===E||B==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(B=>B>0).reduce((B,R)=>B+R,0)]).sort((P,B)=>P[1]-B[1])[0])==null?void 0:Z[0];k&&(K=k);break}case"initialPlacement":K=s;break}if(i!==K)return{reset:{placement:K}}}return{}}}};async function b_e(e,t){const{placement:r,platform:n,elements:i}=e,o=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=Nl(r),s=kc(r),c=Yp(r)==="y",l=["left","top"].includes(a)?-1:1,u=o&&c?-1:1,d=Om(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&typeof m=="number"&&(p=s==="end"?m*-1:m),c?{x:p*u,y:f*l}:{x:f*l,y:p*u}}const w_e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:o,placement:a,middlewareData:s}=t,c=await b_e(t,e);return a===((r=s.offset)==null?void 0:r.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:a}}}}},S_e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:y=>{let{x:v,y:E}=y;return{x:v,y:E}}},...c}=Om(e,t),l={x:r,y:n},u=await kD(t,c),d=Yp(Nl(i)),f=Bq(d);let p=l[f],m=l[d];if(o){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",E=p+u[y],b=p-u[v];p=tO(E,p,b)}if(a){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",E=m+u[y],b=m-u[v];m=tO(E,m,b)}const g=s.fn({...t,[f]:p,[d]:m});return{...g,data:{x:g.x-r,y:g.y-n}}}}};function qq(e){const t=_s(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=ni(e),o=i?e.offsetWidth:r,a=i?e.offsetHeight:n,s=ww(r)!==o||ww(n)!==a;return s&&(r=o,n=a),{width:r,height:n,$:s}}function PD(e){return Zr(e)?e:e.contextElement}function wp(e){const t=PD(e);if(!ni(t))return Oc(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:o}=qq(t);let a=(o?ww(r.width):r.width)/n,s=(o?ww(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const T_e=Oc(0);function Yq(e){const t=ea(e);return!CD()||!t.visualViewport?T_e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function C_e(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ea(e)?!1:t}function Th(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=PD(e);let a=Oc(1);t&&(n?Zr(n)&&(a=wp(n)):a=wp(e));const s=C_e(o,r,n)?Yq(o):Oc(0);let c=(i.left+s.x)/a.x,l=(i.top+s.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(o){const f=ea(o),p=n&&Zr(n)?ea(n):n;let m=f,g=ZN(m);for(;g&&n&&p!==m;){const y=wp(g),v=g.getBoundingClientRect(),E=_s(g),b=v.left+(g.clientLeft+parseFloat(E.paddingLeft))*y.x,S=v.top+(g.clientTop+parseFloat(E.paddingTop))*y.y;c*=y.x,l*=y.y,u*=y.x,d*=y.y,c+=b,l+=S,m=ea(g),g=ZN(m)}}return Cw({width:u,height:d,x:c,y:l})}function DD(e,t){const r=vT(e).scrollLeft;return t?t.left+r:Th(Bc(e)).left+r}function Xq(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-(r?0:DD(e,n)),o=n.top+t.scrollTop;return{x:i,y:o}}function R_e(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const o=i==="fixed",a=Bc(n),s=t?yT(t.floating):!1;if(n===a||s&&o)return r;let c={scrollLeft:0,scrollTop:0},l=Oc(1);const u=Oc(0),d=ni(n);if((d||!d&&!o)&&((od(n)!=="body"||hv(a))&&(c=vT(n)),ni(n))){const p=Th(n);l=wp(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const f=a&&!d&&!o?Xq(a,c,!0):Oc(0);return{width:r.width*l.x,height:r.height*l.y,x:r.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:r.y*l.y-c.scrollTop*l.y+u.y+f.y}}function I_e(e){return Array.from(e.getClientRects())}function x_e(e){const t=Bc(e),r=vT(e),n=e.ownerDocument.body,i=sh(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=sh(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+DD(e);const s=-r.scrollTop;return _s(n).direction==="rtl"&&(a+=sh(t.clientWidth,n.clientWidth)-i),{width:i,height:o,x:a,y:s}}function A_e(e,t){const r=ea(e),n=Bc(e),i=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,s=0,c=0;if(i){o=i.width,a=i.height;const l=CD();(!l||l&&t==="fixed")&&(s=i.offsetLeft,c=i.offsetTop)}return{width:o,height:a,x:s,y:c}}function N_e(e,t){const r=Th(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,o=ni(e)?wp(e):Oc(1),a=e.clientWidth*o.x,s=e.clientHeight*o.y,c=i*o.x,l=n*o.y;return{width:a,height:s,x:c,y:l}}function l4(e,t,r){let n;if(t==="viewport")n=A_e(e,r);else if(t==="document")n=x_e(Bc(e));else if(Zr(t))n=N_e(t,r);else{const i=Yq(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Cw(n)}function Jq(e,t){const r=Al(e);return r===t||!Zr(r)||Yu(r)?!1:_s(r).position==="fixed"||Jq(r,t)}function O_e(e,t){const r=t.get(e);if(r)return r;let n=Mu(e,[],!1).filter(s=>Zr(s)&&od(s)!=="body"),i=null;const o=_s(e).position==="fixed";let a=o?Al(e):e;for(;Zr(a)&&!Yu(a);){const s=_s(a),c=TD(a);!c&&s.position==="fixed"&&(i=null),(o?!c&&!i:!c&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||hv(a)&&!c&&Jq(e,a))?n=n.filter(u=>u!==a):i=s,a=Al(a)}return t.set(e,n),n}function k_e(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const a=[...r==="clippingAncestors"?yT(t)?[]:O_e(t,this._c):[].concat(r),n],s=a[0],c=a.reduce((l,u)=>{const d=l4(t,u,i);return l.top=sh(d.top,l.top),l.right=qp(d.right,l.right),l.bottom=qp(d.bottom,l.bottom),l.left=sh(d.left,l.left),l},l4(t,s,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function P_e(e){const{width:t,height:r}=qq(e);return{width:t,height:r}}function D_e(e,t,r){const n=ni(t),i=Bc(t),o=r==="fixed",a=Th(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const c=Oc(0);if(n||!n&&!o)if((od(t)!=="body"||hv(i))&&(s=vT(t)),n){const f=Th(t,!0,o,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else i&&(c.x=DD(i));const l=i&&!n&&!o?Xq(i,s):Oc(0),u=a.left+s.scrollLeft-c.x-l.x,d=a.top+s.scrollTop-c.y-l.y;return{x:u,y:d,width:a.width,height:a.height}}function bR(e){return _s(e).position==="static"}function u4(e,t){if(!ni(e)||_s(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Bc(e)===r&&(r=r.ownerDocument.body),r}function Qq(e,t){const r=ea(e);if(yT(e))return r;if(!ni(e)){let i=Al(e);for(;i&&!Yu(i);){if(Zr(i)&&!bR(i))return i;i=Al(i)}return r}let n=u4(e,t);for(;n&&UEe(n)&&bR(n);)n=u4(n,t);return n&&Yu(n)&&bR(n)&&!TD(n)?r:n||FEe(e)||r}const L_e=async function(e){const t=this.getOffsetParent||Qq,r=this.getDimensions,n=await r(e.floating);return{reference:D_e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function M_e(e){return _s(e).direction==="rtl"}const j_e={convertOffsetParentRelativeRectToViewportRelativeRect:R_e,getDocumentElement:Bc,getClippingRect:k_e,getOffsetParent:Qq,getElementRects:L_e,getClientRects:I_e,getDimensions:P_e,getScale:wp,isElement:Zr,isRTL:M_e};function U_e(e,t){let r=null,n;const i=Bc(e);function o(){var s;clearTimeout(n),(s=r)==null||s.disconnect(),r=null}function a(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),o();const{left:l,top:u,width:d,height:f}=e.getBoundingClientRect();if(s||t(),!d||!f)return;const p=Zf(u),m=Zf(i.clientWidth-(l+d)),g=Zf(i.clientHeight-(u+f)),y=Zf(l),E={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:sh(0,qp(1,c))||1};let b=!0;function S(A){const N=A[0].intersectionRatio;if(N!==c){if(!b)return a();N?a(!1,N):n=setTimeout(()=>{a(!1,1e-7)},1e3)}b=!1}try{r=new IntersectionObserver(S,{...E,root:i.ownerDocument})}catch{r=new IntersectionObserver(S,E)}r.observe(e)}return a(!0),o}function Zq(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,l=PD(e),u=i||o?[...l?Mu(l):[],...Mu(t)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",r,{passive:!0}),o&&v.addEventListener("resize",r)});const d=l&&s?U_e(l,r):null;let f=-1,p=null;a&&(p=new ResizeObserver(v=>{let[E]=v;E&&E.target===l&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),r()}),l&&!c&&p.observe(l),p.observe(t));let m,g=c?Th(e):null;c&&y();function y(){const v=Th(e);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&r(),g=v,m=requestAnimationFrame(y)}return r(),()=>{var v;u.forEach(E=>{i&&E.removeEventListener("scroll",r),o&&E.removeEventListener("resize",r)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(m)}}const F_e=w_e,V_e=E_e,B_e=S_e,$_e=__e,d4=y_e,H_e=(e,t,r)=>{const n=new Map,i={platform:j_e,...r},o={...i.platform,_c:n};return g_e(e,t,{...i,platform:o})};var K_=typeof document<"u"?C.useLayoutEffect:C.useEffect;function Aw(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Aw(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const o=i[n];if(!(o==="_owner"&&e.$$typeof)&&!Aw(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function eY(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function h4(e,t){const r=eY(e);return Math.round(t*r)/r}function wR(e){const t=C.useRef(e);return K_(()=>{t.current=e}),t}function z_e(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:c,open:l}=e,[u,d]=C.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=C.useState(n);Aw(f,n)||p(n);const[m,g]=C.useState(null),[y,v]=C.useState(null),E=C.useCallback(P=>{P!==N.current&&(N.current=P,g(P))},[]),b=C.useCallback(P=>{P!==D.current&&(D.current=P,v(P))},[]),S=o||m,A=a||y,N=C.useRef(null),D=C.useRef(null),M=C.useRef(u),H=c!=null,V=wR(c),G=wR(i),Y=wR(l),Z=C.useCallback(()=>{if(!N.current||!D.current)return;const P={placement:t,strategy:r,middleware:f};G.current&&(P.platform=G.current),H_e(N.current,D.current,P).then(B=>{const R={...B,isPositioned:Y.current!==!1};$.current&&!Aw(M.current,R)&&(M.current=R,kS.flushSync(()=>{d(R)}))})},[f,t,r,G,Y]);K_(()=>{l===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,d(P=>({...P,isPositioned:!1})))},[l]);const $=C.useRef(!1);K_(()=>($.current=!0,()=>{$.current=!1}),[]),K_(()=>{if(S&&(N.current=S),A&&(D.current=A),S&&A){if(V.current)return V.current(S,A,Z);Z()}},[S,A,Z,V,H]);const F=C.useMemo(()=>({reference:N,floating:D,setReference:E,setFloating:b}),[E,b]),K=C.useMemo(()=>({reference:S,floating:A}),[S,A]),k=C.useMemo(()=>{const P={position:r,left:0,top:0};if(!K.floating)return P;const B=h4(K.floating,u.x),R=h4(K.floating,u.y);return s?{...P,transform:"translate("+B+"px, "+R+"px)",...eY(K.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:B,top:R}},[r,s,K.floating,u.x,u.y]);return C.useMemo(()=>({...u,update:Z,refs:F,elements:K,floatingStyles:k}),[u,Z,F,K,k])}const G_e=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?d4({element:n.current,padding:i}).fn(r):{}:n?d4({element:n,padding:i}).fn(r):{}}}},W_e=(e,t)=>({...F_e(e),options:[e,t]}),K_e=(e,t)=>({...B_e(e),options:[e,t]}),q_e=(e,t)=>({...$_e(e),options:[e,t]}),Y_e=(e,t)=>({...V_e(e),options:[e,t]}),X_e=(e,t)=>({...G_e(e),options:[e,t]});function tY(e){return C.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})},e)}const rY={...tz},J_e=rY.useInsertionEffect,Q_e=J_e||(e=>e());function Xi(e){const t=C.useRef(()=>{});return Q_e(()=>{t.current=e}),C.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current==null?void 0:t.current(...n)},[])}const LD="ArrowUp",fv="ArrowDown",Jp="ArrowLeft",km="ArrowRight";function bE(e,t,r){return Math.floor(e/t)!==r}function vy(e,t){return t<0||t>=e.current.length}function SR(e,t){return co(e,{disabledIndices:t})}function f4(e,t){return co(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function co(e,t){let{startingIndex:r=-1,decrement:n=!1,disabledIndices:i,amount:o=1}=t===void 0?{}:t;const a=e.current;let s=r;do s+=n?-o:o;while(s>=0&&s<=a.length-1&&q_(a,s,i));return s}function Z_e(e,t){let{event:r,orientation:n,loop:i,cols:o,disabledIndices:a,minIndex:s,maxIndex:c,prevIndex:l,stopEvent:u=!1}=t,d=l;if(r.key===LD){if(u&&qi(r),l===-1)d=c;else if(d=co(e,{startingIndex:d,amount:o,decrement:!0,disabledIndices:a}),i&&(l-o<s||d<0)){const f=l%o,p=c%o,m=c-(p-f);p===f?d=c:d=p>f?m:m-o}vy(e,d)&&(d=l)}if(r.key===fv&&(u&&qi(r),l===-1?d=s:(d=co(e,{startingIndex:l,amount:o,disabledIndices:a}),i&&l+o>c&&(d=co(e,{startingIndex:l%o-o,amount:o,disabledIndices:a}))),vy(e,d)&&(d=l)),n==="both"){const f=Zf(l/o);r.key===km&&(u&&qi(r),l%o!==o-1?(d=co(e,{startingIndex:l,disabledIndices:a}),i&&bE(d,o,f)&&(d=co(e,{startingIndex:l-l%o-1,disabledIndices:a}))):i&&(d=co(e,{startingIndex:l-l%o-1,disabledIndices:a})),bE(d,o,f)&&(d=l)),r.key===Jp&&(u&&qi(r),l%o!==0?(d=co(e,{startingIndex:l,decrement:!0,disabledIndices:a}),i&&bE(d,o,f)&&(d=co(e,{startingIndex:l+(o-l%o),decrement:!0,disabledIndices:a}))):i&&(d=co(e,{startingIndex:l+(o-l%o),decrement:!0,disabledIndices:a})),bE(d,o,f)&&(d=l));const p=Zf(c/o)===f;vy(e,d)&&(i&&p?d=r.key===Jp?c:co(e,{startingIndex:l-l%o-1,disabledIndices:a}):d=l)}return d}function ebe(e,t,r){const n=[];let i=0;return e.forEach((o,a)=>{let{width:s,height:c}=o,l=!1;for(r&&(i=0);!l;){const u=[];for(let d=0;d<s;d++)for(let f=0;f<c;f++)u.push(i+d+f*t);i%t+s<=t&&u.every(d=>n[d]==null)?(u.forEach(d=>{n[d]=a}),l=!0):i++}}),[...n]}function tbe(e,t,r,n,i){if(e===-1)return-1;const o=r.indexOf(e),a=t[e];switch(i){case"tl":return o;case"tr":return a?o+a.width-1:o;case"bl":return a?o+(a.height-1)*n:o;case"br":return r.lastIndexOf(e)}}function rbe(e,t){return t.flatMap((r,n)=>e.includes(r)?[n]:[])}function q_(e,t,r){if(r)return r.includes(t);const n=e[t];return n==null||n.hasAttribute("disabled")||n.getAttribute("aria-disabled")==="true"}let p4=0;function cu(e,t){t===void 0&&(t={});const{preventScroll:r=!1,cancelPrevious:n=!0,sync:i=!1}=t;n&&cancelAnimationFrame(p4);const o=()=>e==null?void 0:e.focus({preventScroll:r});i?o():p4=requestAnimationFrame(o)}var qr=typeof document<"u"?C.useLayoutEffect:C.useEffect;function nbe(e,t){const r=e.compareDocumentPosition(t);return r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS?1:0}function ibe(e,t){if(e.size!==t.size)return!1;for(const[r,n]of e.entries())if(n!==t.get(r))return!1;return!0}const nY=C.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function obe(e){const{children:t,elementsRef:r,labelsRef:n}=e,[i,o]=C.useState(()=>new Map),a=C.useCallback(c=>{o(l=>new Map(l).set(c,null))},[]),s=C.useCallback(c=>{o(l=>{const u=new Map(l);return u.delete(c),u})},[]);return qr(()=>{const c=new Map(i);Array.from(c.keys()).sort(nbe).forEach((u,d)=>{c.set(u,d)}),ibe(i,c)||o(c)},[i]),C.createElement(nY.Provider,{value:C.useMemo(()=>({register:a,unregister:s,map:i,elementsRef:r,labelsRef:n}),[a,s,i,r,n])},t)}function abe(e){e===void 0&&(e={});const{label:t}=e,{register:r,unregister:n,map:i,elementsRef:o,labelsRef:a}=C.useContext(nY),[s,c]=C.useState(null),l=C.useRef(null),u=C.useCallback(d=>{if(l.current=d,s!==null&&(o.current[s]=d,a)){var f;const p=t!==void 0;a.current[s]=p?t:(f=d==null?void 0:d.textContent)!=null?f:null}},[s,o,a,t]);return qr(()=>{const d=l.current;if(d)return r(d),()=>{n(d)}},[r,n]),qr(()=>{const d=l.current?i.get(l.current):null;d!=null&&c(d)},[i]),C.useMemo(()=>({ref:u,index:s??-1}),[s,u])}function g0(){return g0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g0.apply(this,arguments)}let m4=!1,sbe=0;const g4=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+sbe++;function cbe(){const[e,t]=C.useState(()=>m4?g4():void 0);return qr(()=>{e==null&&t(g4())},[]),C.useEffect(()=>{m4=!0},[]),e}const lbe=rY.useId,ET=lbe||cbe;function ube(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(i=>i(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,((n=e.get(t))==null?void 0:n.filter(i=>i!==r))||[])}}}const dbe=C.createContext(null),hbe=C.createContext(null),_T=()=>{var e;return((e=C.useContext(dbe))==null?void 0:e.id)||null},pv=()=>C.useContext(hbe);function Xu(e){return"data-floating-ui-"+e}function ba(e){const t=C.useRef(e);return qr(()=>{t.current=e}),t}const y4=Xu("safe-polygon");function TR(e,t,r){return r&&!p0(r)?0:typeof e=="number"?e:e==null?void 0:e[t]}function fbe(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,dataRef:i,events:o,elements:a}=e,{enabled:s=!0,delay:c=0,handleClose:l=null,mouseOnly:u=!1,restMs:d=0,move:f=!0}=t,p=pv(),m=_T(),g=ba(l),y=ba(c),v=ba(r),E=C.useRef(),b=C.useRef(-1),S=C.useRef(),A=C.useRef(-1),N=C.useRef(!0),D=C.useRef(!1),M=C.useRef(()=>{}),H=C.useCallback(()=>{var F;const K=(F=i.current.openEvent)==null?void 0:F.type;return(K==null?void 0:K.includes("mouse"))&&K!=="mousedown"},[i]);C.useEffect(()=>{if(!s)return;function F(K){let{open:k}=K;k||(clearTimeout(b.current),clearTimeout(A.current),N.current=!0)}return o.on("openchange",F),()=>{o.off("openchange",F)}},[s,o]),C.useEffect(()=>{if(!s||!g.current||!r)return;function F(k){H()&&n(!1,k,"hover")}const K=Li(a.floating).documentElement;return K.addEventListener("mouseleave",F),()=>{K.removeEventListener("mouseleave",F)}},[a.floating,r,n,s,g,H]);const V=C.useCallback(function(F,K,k){K===void 0&&(K=!0),k===void 0&&(k="hover");const P=TR(y.current,"close",E.current);P&&!S.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>n(!1,F,k),P)):K&&(clearTimeout(b.current),n(!1,F,k))},[y,n]),G=Xi(()=>{M.current(),S.current=void 0}),Y=Xi(()=>{if(D.current){const F=Li(a.floating).body;F.style.pointerEvents="",F.removeAttribute(y4),D.current=!1}});C.useEffect(()=>{if(!s)return;function F(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function K(R){if(clearTimeout(b.current),N.current=!1,u&&!p0(E.current)||d>0&&!TR(y.current,"open"))return;const _=TR(y.current,"open",E.current);_?b.current=window.setTimeout(()=>{v.current||n(!0,R,"hover")},_):n(!0,R,"hover")}function k(R){if(F())return;M.current();const _=Li(a.floating);if(clearTimeout(A.current),g.current&&i.current.floatingContext){r||clearTimeout(b.current),S.current=g.current({...i.current.floatingContext,tree:p,x:R.clientX,y:R.clientY,onClose(){Y(),G(),V(R,!0,"safe-polygon")}});const T=S.current;_.addEventListener("mousemove",T),M.current=()=>{_.removeEventListener("mousemove",T)};return}(E.current==="touch"?!ei(a.floating,R.relatedTarget):!0)&&V(R)}function P(R){F()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:R.clientX,y:R.clientY,onClose(){Y(),G(),V(R)}})(R))}if(Zr(a.domReference)){var B;const R=a.domReference;return r&&R.addEventListener("mouseleave",P),(B=a.floating)==null||B.addEventListener("mouseleave",P),f&&R.addEventListener("mousemove",K,{once:!0}),R.addEventListener("mouseenter",K),R.addEventListener("mouseleave",k),()=>{var _;r&&R.removeEventListener("mouseleave",P),(_=a.floating)==null||_.removeEventListener("mouseleave",P),f&&R.removeEventListener("mousemove",K),R.removeEventListener("mouseenter",K),R.removeEventListener("mouseleave",k)}}},[a,s,e,u,d,f,V,G,Y,n,r,v,p,y,g,i]),qr(()=>{var F;if(s&&r&&(F=g.current)!=null&&F.__options.blockPointerEvents&&H()){const k=Li(a.floating).body;k.setAttribute(y4,""),k.style.pointerEvents="none",D.current=!0;const P=a.floating;if(Zr(a.domReference)&&P){var K;const B=a.domReference,R=p==null||(K=p.nodesRef.current.find(_=>_.id===m))==null||(K=K.context)==null?void 0:K.elements.floating;return R&&(R.style.pointerEvents=""),B.style.pointerEvents="auto",P.style.pointerEvents="auto",()=>{B.style.pointerEvents="",P.style.pointerEvents=""}}}},[s,r,m,a,p,g,H]),qr(()=>{r||(E.current=void 0,G(),Y())},[r,G,Y]),C.useEffect(()=>()=>{G(),clearTimeout(b.current),clearTimeout(A.current),Y()},[s,a.domReference,G,Y]);const Z=C.useMemo(()=>{function F(K){E.current=K.pointerType}return{onPointerDown:F,onPointerEnter:F,onMouseMove(K){const{nativeEvent:k}=K;function P(){!N.current&&!v.current&&n(!0,k,"hover")}u&&!p0(E.current)||r||d===0||(clearTimeout(A.current),E.current==="touch"?P():A.current=window.setTimeout(P,d))}}},[u,n,r,v,d]),$=C.useMemo(()=>({onMouseEnter(){clearTimeout(b.current)},onMouseLeave(F){V(F.nativeEvent,!1)}}),[V]);return C.useMemo(()=>s?{reference:Z,floating:$}:{},[s,Z,$])}function pbe(e,t){var r;let n=[],i=(r=e.find(o=>o.id===t))==null?void 0:r.parentId;for(;i;){const o=e.find(a=>a.id===i);i=o==null?void 0:o.parentId,o&&(n=n.concat(o))}return n}function ch(e,t){let r=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),n=r;for(;n.length;)n=e.filter(i=>{var o;return(o=n)==null?void 0:o.some(a=>{var s;return i.parentId===a.id&&((s=i.context)==null?void 0:s.open)})}),r=r.concat(n);return r}function mbe(e,t){let r,n=-1;function i(o,a){a>n&&(r=o,n=a),ch(e,o).forEach(c=>{i(c.id,a+1)})}return i(t,0),e.find(o=>o.id===r)}let ff=new WeakMap,wE=new WeakSet,SE={},CR=0;const gbe=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,iY=e=>e&&(e.host||iY(e.parentNode)),ybe=(e,t)=>t.map(r=>{if(e.contains(r))return r;const n=iY(r);return e.contains(n)?n:null}).filter(r=>r!=null);function vbe(e,t,r,n){const i="data-floating-ui-inert",o=n?"inert":r?"aria-hidden":null,a=ybe(t,e),s=new Set,c=new Set(a),l=[];SE[i]||(SE[i]=new WeakMap);const u=SE[i];a.forEach(d),f(t),s.clear();function d(p){!p||s.has(p)||(s.add(p),p.parentNode&&d(p.parentNode))}function f(p){!p||c.has(p)||[].forEach.call(p.children,m=>{if(od(m)!=="script")if(s.has(m))f(m);else{const g=o?m.getAttribute(o):null,y=g!==null&&g!=="false",v=(ff.get(m)||0)+1,E=(u.get(m)||0)+1;ff.set(m,v),u.set(m,E),l.push(m),v===1&&y&&wE.add(m),E===1&&m.setAttribute(i,""),!y&&o&&m.setAttribute(o,"true")}})}return CR++,()=>{l.forEach(p=>{const m=(ff.get(p)||0)-1,g=(u.get(p)||0)-1;ff.set(p,m),u.set(p,g),m||(!wE.has(p)&&o&&p.removeAttribute(o),wE.delete(p)),g||p.removeAttribute(i)}),CR--,CR||(ff=new WeakMap,ff=new WeakMap,wE=new WeakSet,SE={})}}function v4(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);const n=Li(e[0]).body;return vbe(e.concat(Array.from(n.querySelectorAll("[aria-live]"))),n,t,r)}const Qp=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function oY(e,t){const r=m0(e,Qp());t==="prev"&&r.reverse();const n=r.indexOf(Hs(Li(e)));return r.slice(n+1)[0]}function aY(){return oY(document.body,"next")}function sY(){return oY(document.body,"prev")}function Ey(e,t){const r=t||e.currentTarget,n=e.relatedTarget;return!n||!ei(r,n)}function Ebe(e){m0(e,Qp()).forEach(r=>{r.dataset.tabindex=r.getAttribute("tabindex")||"",r.setAttribute("tabindex","-1")})}function _be(e){e.querySelectorAll("[data-tabindex]").forEach(r=>{const n=r.dataset.tabindex;delete r.dataset.tabindex,n?r.setAttribute("tabindex",n):r.removeAttribute("tabindex")})}function bbe(e,t,r){const n=e.indexOf(t);function i(a){const s=Xu("focus-guard");let c=n+(a?1:0),l=e[c];for(;l&&(!l.isConnected||l.hasAttribute(s)||ei(r,l));)a?c++:c--,l=e[c];return l}const o=i(!0);return o||i(!1)}const MD={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let wbe;function E4(e){e.key==="Tab"&&(e.target,clearTimeout(wbe))}const Nw=C.forwardRef(function(t,r){const[n,i]=C.useState();qr(()=>(xD()&&i("button"),document.addEventListener("keydown",E4),()=>{document.removeEventListener("keydown",E4)}),[]);const o={ref:r,tabIndex:0,role:n,"aria-hidden":n?void 0:!0,[Xu("focus-guard")]:"",style:MD};return C.createElement("span",g0({},t,o))}),cY=C.createContext(null),_4=Xu("portal");function Sbe(e){e===void 0&&(e={});const{id:t,root:r}=e,n=ET(),i=lY(),[o,a]=C.useState(null),s=C.useRef(null);return qr(()=>()=>{o==null||o.remove(),queueMicrotask(()=>{s.current=null})},[o]),qr(()=>{if(!n||s.current)return;const c=t?document.getElementById(t):null;if(!c)return;const l=document.createElement("div");l.id=n,l.setAttribute(_4,""),c.appendChild(l),s.current=l,a(l)},[t,n]),qr(()=>{if(!n||s.current)return;let c=r||(i==null?void 0:i.portalNode);c&&!Zr(c)&&(c=c.current),c=c||document.body;let l=null;t&&(l=document.createElement("div"),l.id=t,c.appendChild(l));const u=document.createElement("div");u.id=n,u.setAttribute(_4,""),c=l||c,c.appendChild(u),s.current=u,a(u)},[t,r,n,i]),o}function Tbe(e){const{children:t,id:r,root:n=null,preserveTabOrder:i=!0}=e,o=Sbe({id:r,root:n}),[a,s]=C.useState(null),c=C.useRef(null),l=C.useRef(null),u=C.useRef(null),d=C.useRef(null),f=!!a&&!a.modal&&a.open&&i&&!!(n||o);return C.useEffect(()=>{if(!o||!i||a!=null&&a.modal)return;function p(m){o&&Ey(m)&&(m.type==="focusin"?_be:Ebe)(o)}return o.addEventListener("focusin",p,!0),o.addEventListener("focusout",p,!0),()=>{o.removeEventListener("focusin",p,!0),o.removeEventListener("focusout",p,!0)}},[o,i,a==null?void 0:a.modal]),C.createElement(cY.Provider,{value:C.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:l,beforeInsideRef:u,afterInsideRef:d,portalNode:o,setFocusManagerState:s}),[i,o])},f&&o&&C.createElement(Nw,{"data-type":"outside",ref:c,onFocus:p=>{if(Ey(p,o)){var m;(m=u.current)==null||m.focus()}else{const g=sY()||(a==null?void 0:a.refs.domReference.current);g==null||g.focus()}}}),f&&o&&C.createElement("span",{"aria-owns":o.id,style:MD}),o&&kS.createPortal(t,o),f&&o&&C.createElement(Nw,{"data-type":"outside",ref:l,onFocus:p=>{if(Ey(p,o)){var m;(m=d.current)==null||m.focus()}else{const g=aY()||(a==null?void 0:a.refs.domReference.current);g==null||g.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1,p.nativeEvent))}}}))}const lY=()=>C.useContext(cY),b4=20;let Od=[];function RR(e){Od=Od.filter(r=>r.isConnected);let t=e;if(!(!t||od(t)==="body")){if(!m_e(t,Qp())){const r=m0(t,Qp())[0];r&&(t=r)}Od.push(t),Od.length>b4&&(Od=Od.slice(-b4))}}function w4(){return Od.slice().reverse().find(e=>e.isConnected)}const Cbe=C.forwardRef(function(t,r){return C.createElement("button",g0({},t,{type:"button",ref:r,tabIndex:-1,style:MD}))});function uY(e){const{context:t,children:r,disabled:n=!1,order:i=["content"],guards:o=!0,initialFocus:a=0,returnFocus:s=!0,restoreFocus:c=!1,modal:l=!0,visuallyHiddenDismiss:u=!1,closeOnFocusOut:d=!0}=e,{open:f,refs:p,nodeId:m,onOpenChange:g,events:y,dataRef:v,floatingId:E,elements:{domReference:b,floating:S}}=t,A=typeof a=="number"&&a<0,N=Vq(b)&&A,D=gbe()?o:!0,M=ba(i),H=ba(a),V=ba(s),G=pv(),Y=lY(),Z=C.useRef(null),$=C.useRef(null),F=C.useRef(!1),K=C.useRef(!1),k=C.useRef(-1),P=Y!=null,B=S==null?void 0:S.firstElementChild,R=(B==null?void 0:B.id)===E?B:S,_=Xi(function(U){return U===void 0&&(U=R),U?m0(U,Qp()):[]}),x=Xi(U=>{const X=_(U);return M.current.map(ae=>b&&ae==="reference"?b:R&&ae==="floating"?R:X).filter(Boolean).flat()});C.useEffect(()=>{if(n||!l)return;function U(ae){if(ae.key==="Tab"){ei(R,Hs(Li(R)))&&_().length===0&&!N&&qi(ae);const de=x(),fe=hl(ae);M.current[0]==="reference"&&fe===b&&(qi(ae),ae.shiftKey?cu(de[de.length-1]):cu(de[1])),M.current[1]==="floating"&&fe===R&&ae.shiftKey&&(qi(ae),cu(de[0]))}}const X=Li(R);return X.addEventListener("keydown",U),()=>{X.removeEventListener("keydown",U)}},[n,b,R,l,M,N,_,x]),C.useEffect(()=>{if(n||!S)return;function U(X){const ae=hl(X),fe=_().indexOf(ae);fe!==-1&&(k.current=fe)}return S.addEventListener("focusin",U),()=>{S.removeEventListener("focusin",U)}},[n,S,_]),C.useEffect(()=>{if(n||!d)return;function U(){K.current=!0,setTimeout(()=>{K.current=!1})}function X(ae){const de=ae.relatedTarget;queueMicrotask(()=>{const fe=!(ei(b,de)||ei(S,de)||ei(de,S)||ei(Y==null?void 0:Y.portalNode,de)||de!=null&&de.hasAttribute(Xu("focus-guard"))||G&&(ch(G.nodesRef.current,m).find(ke=>{var Ve,Me;return ei((Ve=ke.context)==null?void 0:Ve.elements.floating,de)||ei((Me=ke.context)==null?void 0:Me.elements.domReference,de)})||pbe(G.nodesRef.current,m).find(ke=>{var Ve,Me;return((Ve=ke.context)==null?void 0:Ve.elements.floating)===de||((Me=ke.context)==null?void 0:Me.elements.domReference)===de})));if(c&&fe&&Hs(Li(R))===Li(R).body){ni(R)&&(R==null||R.focus());const ke=k.current,Ve=_(),Me=Ve[ke]||Ve[Ve.length-1]||R;ni(Me)&&Me.focus()}(N||!l)&&de&&fe&&!K.current&&de!==w4()&&(F.current=!0,g(!1,ae))})}if(S&&ni(b))return b.addEventListener("focusout",X),b.addEventListener("pointerdown",U),S.addEventListener("focusout",X),()=>{b.removeEventListener("focusout",X),b.removeEventListener("pointerdown",U),S.removeEventListener("focusout",X)}},[n,b,S,R,l,m,G,Y,g,d,c,_,N]),C.useEffect(()=>{var U;if(n)return;const X=Array.from((Y==null||(U=Y.portalNode)==null?void 0:U.querySelectorAll("["+Xu("portal")+"]"))||[]);if(S){const ae=[S,...X,Z.current,$.current,M.current.includes("reference")||N?b:null].filter(fe=>fe!=null),de=l||N?v4(ae,D,!D):v4(ae);return()=>{de()}}},[n,b,S,l,M,Y,N,D]),qr(()=>{if(n||!ni(R))return;const U=Li(R),X=Hs(U);queueMicrotask(()=>{const ae=x(R),de=H.current,fe=(typeof de=="number"?ae[de]:de.current)||R,ke=ei(R,X);!A&&!ke&&f&&cu(fe,{preventScroll:fe===R})})},[n,f,R,A,x,H]),qr(()=>{if(n||!R)return;let U=!1;const X=Li(R),ae=Hs(X);let fe=v.current.openEvent;const ke=p.domReference.current;RR(ae);function Ve(Me){let{open:ot,reason:At,event:et,nested:Et}=Me;ot&&(fe=et),At==="escape-key"&&p.domReference.current&&RR(p.domReference.current),At==="hover"&&et.type==="mouseleave"&&(F.current=!0),At==="outside-press"&&(Et?(F.current=!1,U=!0):F.current=!(Uq(et)||ID(et)))}return y.on("openchange",Ve),()=>{y.off("openchange",Ve);const Me=Hs(X),ot=ei(S,Me)||G&&ch(G.nodesRef.current,m).some(Ie=>{var rt;return ei((rt=Ie.context)==null?void 0:rt.elements.floating,Me)});(ot||fe&&["click","mousedown"].includes(fe.type))&&p.domReference.current&&RR(p.domReference.current);const et=ke||ae,Et=m0(Li(et).body,Qp());queueMicrotask(()=>{let Ie=w4();!Ie&&ni(et)&&S&&(Ie=bbe(Et,et,S)),V.current&&!F.current&&ni(Ie)&&(!(Ie!==Me&&Me!==X.body)||ot)&&Ie.focus({preventScroll:U})})}},[n,S,R,V,v,p,y,G,m]),qr(()=>{if(!n&&Y)return Y.setFocusManagerState({modal:l,closeOnFocusOut:d,open:f,onOpenChange:g,refs:p}),()=>{Y.setFocusManagerState(null)}},[n,Y,l,f,g,p,d]),qr(()=>{if(n||!R||typeof MutationObserver!="function"||A)return;const U=()=>{const ae=R.getAttribute("tabindex"),de=_(),fe=Hs(Li(S)),ke=de.indexOf(fe);ke!==-1&&(k.current=ke),M.current.includes("floating")||fe!==p.domReference.current&&de.length===0?ae!=="0"&&R.setAttribute("tabindex","0"):ae!=="-1"&&R.setAttribute("tabindex","-1")};U();const X=new MutationObserver(U);return X.observe(R,{childList:!0,subtree:!0,attributes:!0}),()=>{X.disconnect()}},[n,S,R,p,M,_,A]);function T(U){return n||!u||!l?null:C.createElement(Cbe,{ref:U==="start"?Z:$,onClick:X=>g(!1,X.nativeEvent)},typeof u=="string"?u:"Dismiss")}const W=!n&&D&&(l?!N:!0)&&(P||l);return C.createElement(C.Fragment,null,W&&C.createElement(Nw,{"data-type":"inside",ref:Y==null?void 0:Y.beforeInsideRef,onFocus:U=>{if(l){const ae=x();cu(i[0]==="reference"?ae[0]:ae[ae.length-1])}else if(Y!=null&&Y.preserveTabOrder&&Y.portalNode)if(F.current=!1,Ey(U,Y.portalNode)){const ae=aY()||b;ae==null||ae.focus()}else{var X;(X=Y.beforeOutsideRef.current)==null||X.focus()}}}),!N&&T("start"),r,T("end"),W&&C.createElement(Nw,{"data-type":"inside",ref:Y==null?void 0:Y.afterInsideRef,onFocus:U=>{if(l)cu(x()[0]);else if(Y!=null&&Y.preserveTabOrder&&Y.portalNode)if(d&&(F.current=!0),Ey(U,Y.portalNode)){const ae=sY()||b;ae==null||ae.focus()}else{var X;(X=Y.afterOutsideRef.current)==null||X.focus()}}}))}const IR=new Set,Rbe=C.forwardRef(function(t,r){const{lockScroll:n=!1,...i}=t,o=ET();return qr(()=>{if(!n)return;IR.add(o);const a=/iP(hone|ad|od)|iOS/.test(RD()),s=document.body.style,l=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",u=window.innerWidth-document.documentElement.clientWidth,d=s.left?parseFloat(s.left):window.scrollX,f=s.top?parseFloat(s.top):window.scrollY;if(s.overflow="hidden",u&&(s[l]=u+"px"),a){var p,m;const g=((p=window.visualViewport)==null?void 0:p.offsetLeft)||0,y=((m=window.visualViewport)==null?void 0:m.offsetTop)||0;Object.assign(s,{position:"fixed",top:-(f-Math.floor(y))+"px",left:-(d-Math.floor(g))+"px",right:"0"})}return()=>{IR.delete(o),IR.size===0&&(Object.assign(s,{overflow:"",[l]:""}),a&&(Object.assign(s,{position:"",top:"",left:"",right:""}),window.scrollTo(d,f)))}},[o,n]),C.createElement("div",g0({ref:r},i,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}}))});function S4(e){return ni(e.target)&&e.target.tagName==="BUTTON"}function T4(e){return AD(e)}function dY(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,dataRef:i,elements:{domReference:o}}=e,{enabled:a=!0,event:s="click",toggle:c=!0,ignoreMouse:l=!1,keyboardHandlers:u=!0}=t,d=C.useRef(),f=C.useRef(!1),p=C.useMemo(()=>({onPointerDown(m){d.current=m.pointerType},onMouseDown(m){const g=d.current;m.button===0&&s!=="click"&&(p0(g,!0)&&l||(r&&c&&(!i.current.openEvent||i.current.openEvent.type==="mousedown")?n(!1,m.nativeEvent,"click"):(m.preventDefault(),n(!0,m.nativeEvent,"click"))))},onClick(m){const g=d.current;if(s==="mousedown"&&d.current){d.current=void 0;return}p0(g,!0)&&l||(r&&c&&(!i.current.openEvent||i.current.openEvent.type==="click")?n(!1,m.nativeEvent,"click"):n(!0,m.nativeEvent,"click"))},onKeyDown(m){d.current=void 0,!(m.defaultPrevented||!u||S4(m))&&(m.key===" "&&!T4(o)&&(m.preventDefault(),f.current=!0),m.key==="Enter"&&n(!(r&&c),m.nativeEvent,"click"))},onKeyUp(m){m.defaultPrevented||!u||S4(m)||T4(o)||m.key===" "&&f.current&&(f.current=!1,n(!(r&&c),m.nativeEvent,"click"))}}),[i,o,s,l,u,n,r,c]);return C.useMemo(()=>a?{reference:p}:{},[a,p])}const Ibe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},xbe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},C4=e=>{var t,r;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(r=e==null?void 0:e.outsidePress)!=null?r:!0}};function hY(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,elements:i,dataRef:o}=e,{enabled:a=!0,escapeKey:s=!0,outsidePress:c=!0,outsidePressEvent:l="pointerdown",referencePress:u=!1,referencePressEvent:d="pointerdown",ancestorScroll:f=!1,bubbles:p,capture:m}=t,g=pv(),y=Xi(typeof c=="function"?c:()=>!1),v=typeof c=="function"?y:c,E=C.useRef(!1),b=C.useRef(!1),{escapeKey:S,outsidePress:A}=C4(p),{escapeKey:N,outsidePress:D}=C4(m),M=Xi($=>{var F;if(!r||!a||!s||$.key!=="Escape")return;const K=(F=o.current.floatingContext)==null?void 0:F.nodeId,k=g?ch(g.nodesRef.current,K):[];if(!S&&($.stopPropagation(),k.length>0)){let P=!0;if(k.forEach(B=>{var R;if((R=B.context)!=null&&R.open&&!B.context.dataRef.current.__escapeKeyBubbles){P=!1;return}}),!P)return}n(!1,BEe($)?$.nativeEvent:$,"escape-key")}),H=Xi($=>{var F;const K=()=>{var k;M($),(k=hl($))==null||k.removeEventListener("keydown",K)};(F=hl($))==null||F.addEventListener("keydown",K)}),V=Xi($=>{var F;const K=E.current;E.current=!1;const k=b.current;if(b.current=!1,l==="click"&&k||K||typeof v=="function"&&!v($))return;const P=hl($),B="["+Xu("inert")+"]",R=Li(i.floating).querySelectorAll(B);let _=Zr(P)?P:null;for(;_&&!Yu(_);){const U=Al(_);if(Yu(U)||!Zr(U))break;_=U}if(R.length&&Zr(P)&&!$Ee(P)&&!ei(P,i.floating)&&Array.from(R).every(U=>!ei(_,U)))return;if(ni(P)&&Z){const U=P.clientWidth>0&&P.scrollWidth>P.clientWidth,X=P.clientHeight>0&&P.scrollHeight>P.clientHeight;let ae=X&&$.offsetX>P.clientWidth;if(X&&_s(P).direction==="rtl"&&(ae=$.offsetX<=P.offsetWidth-P.clientWidth),ae||U&&$.offsetY>P.clientHeight)return}const x=(F=o.current.floatingContext)==null?void 0:F.nodeId,T=g&&ch(g.nodesRef.current,x).some(U=>{var X;return _R($,(X=U.context)==null?void 0:X.elements.floating)});if(_R($,i.floating)||_R($,i.domReference)||T)return;const W=g?ch(g.nodesRef.current,x):[];if(W.length>0){let U=!0;if(W.forEach(X=>{var ae;if((ae=X.context)!=null&&ae.open&&!X.context.dataRef.current.__outsidePressBubbles){U=!1;return}}),!U)return}n(!1,$,"outside-press")}),G=Xi($=>{var F;const K=()=>{var k;V($),(k=hl($))==null||k.removeEventListener(l,K)};(F=hl($))==null||F.addEventListener(l,K)});C.useEffect(()=>{if(!r||!a)return;o.current.__escapeKeyBubbles=S,o.current.__outsidePressBubbles=A;function $(k){n(!1,k,"ancestor-scroll")}const F=Li(i.floating);s&&F.addEventListener("keydown",N?H:M,N),v&&F.addEventListener(l,D?G:V,D);let K=[];return f&&(Zr(i.domReference)&&(K=Mu(i.domReference)),Zr(i.floating)&&(K=K.concat(Mu(i.floating))),!Zr(i.reference)&&i.reference&&i.reference.contextElement&&(K=K.concat(Mu(i.reference.contextElement)))),K=K.filter(k=>{var P;return k!==((P=F.defaultView)==null?void 0:P.visualViewport)}),K.forEach(k=>{k.addEventListener("scroll",$,{passive:!0})}),()=>{s&&F.removeEventListener("keydown",N?H:M,N),v&&F.removeEventListener(l,D?G:V,D),K.forEach(k=>{k.removeEventListener("scroll",$)})}},[o,i,s,v,l,r,n,f,a,S,A,M,N,H,V,D,G]),C.useEffect(()=>{E.current=!1},[v,l]);const Y=C.useMemo(()=>({onKeyDown:M,[Ibe[d]]:$=>{u&&n(!1,$.nativeEvent,"reference-press")}}),[M,n,u,d]),Z=C.useMemo(()=>({onKeyDown:M,onMouseDown(){b.current=!0},onMouseUp(){b.current=!0},[xbe[l]]:()=>{E.current=!0}}),[M,l]);return C.useMemo(()=>a?{reference:Y,floating:Z}:{},[a,Y,Z])}function Abe(e){const{open:t=!1,onOpenChange:r,elements:n}=e,i=ET(),o=C.useRef({}),[a]=C.useState(()=>ube()),s=_T()!=null,[c,l]=C.useState(n.reference),u=Xi((p,m,g)=>{o.current.openEvent=p?m:void 0,a.emit("openchange",{open:p,event:m,reason:g,nested:s}),r==null||r(p,m,g)}),d=C.useMemo(()=>({setPositionReference:l}),[]),f=C.useMemo(()=>({reference:c||n.reference||null,floating:n.floating||null,domReference:n.reference}),[c,n.reference,n.floating]);return C.useMemo(()=>({dataRef:o,open:t,onOpenChange:u,elements:f,events:a,floatingId:i,refs:d}),[t,u,f,a,i,d])}function fY(e){e===void 0&&(e={});const{nodeId:t}=e,r=Abe({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,i=n.elements,[o,a]=C.useState(null),[s,c]=C.useState(null),u=(i==null?void 0:i.reference)||o,d=C.useRef(null),f=pv();qr(()=>{u&&(d.current=u)},[u]);const p=z_e({...e,elements:{...i,...s&&{reference:s}}}),m=C.useCallback(b=>{const S=Zr(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;c(S),p.refs.setReference(S)},[p.refs]),g=C.useCallback(b=>{(Zr(b)||b===null)&&(d.current=b,a(b)),(Zr(p.refs.reference.current)||p.refs.reference.current===null||b!==null&&!Zr(b))&&p.refs.setReference(b)},[p.refs]),y=C.useMemo(()=>({...p.refs,setReference:g,setPositionReference:m,domReference:d}),[p.refs,g,m]),v=C.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),E=C.useMemo(()=>({...p,...n,refs:y,elements:v,nodeId:t}),[p,y,v,t,n]);return qr(()=>{n.dataRef.current.floatingContext=E;const b=f==null?void 0:f.nodesRef.current.find(S=>S.id===t);b&&(b.context=E)}),C.useMemo(()=>({...p,context:E,refs:y,elements:v}),[p,y,v,E])}function Nbe(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,events:i,dataRef:o,elements:a}=e,{enabled:s=!0,visibleOnly:c=!0}=t,l=C.useRef(!1),u=C.useRef(),d=C.useRef(!0);C.useEffect(()=>{if(!s)return;const p=ea(a.domReference);function m(){!r&&ni(a.domReference)&&a.domReference===Hs(Li(a.domReference))&&(l.current=!0)}function g(){d.current=!0}return p.addEventListener("blur",m),p.addEventListener("keydown",g,!0),()=>{p.removeEventListener("blur",m),p.removeEventListener("keydown",g,!0)}},[a.domReference,r,s]),C.useEffect(()=>{if(!s)return;function p(m){let{reason:g}=m;(g==="reference-press"||g==="escape-key")&&(l.current=!0)}return i.on("openchange",p),()=>{i.off("openchange",p)}},[i,s]),C.useEffect(()=>()=>{clearTimeout(u.current)},[]);const f=C.useMemo(()=>({onPointerDown(p){ID(p.nativeEvent)||(d.current=!1)},onMouseLeave(){l.current=!1},onFocus(p){if(l.current)return;const m=hl(p.nativeEvent);if(c&&Zr(m))try{if(xD()&&Fq())throw Error();if(!m.matches(":focus-visible"))return}catch{if(!d.current&&!AD(m))return}n(!0,p.nativeEvent,"focus")},onBlur(p){l.current=!1;const m=p.relatedTarget,g=p.nativeEvent,y=Zr(m)&&m.hasAttribute(Xu("focus-guard"))&&m.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var v;const E=Hs(a.domReference?a.domReference.ownerDocument:document);!m&&E===a.domReference||ei((v=o.current.floatingContext)==null?void 0:v.refs.floating.current,E)||ei(a.domReference,E)||y||n(!1,g,"focus")})}}),[o,a.domReference,n,c]);return C.useMemo(()=>s?{reference:f}:{},[s,f])}const R4="active",I4="selected";function xR(e,t,r){const n=new Map,i=r==="item";let o=e;if(i&&e){const{[R4]:a,[I4]:s,...c}=e;o=c}return{...r==="floating"&&{tabIndex:-1},...o,...t.map(a=>{const s=a?a[r]:null;return typeof s=="function"?e?s(e):null:s}).concat(e).reduce((a,s)=>(s&&Object.entries(s).forEach(c=>{let[l,u]=c;if(!(i&&[R4,I4].includes(l)))if(l.indexOf("on")===0){if(n.has(l)||n.set(l,[]),typeof u=="function"){var d;(d=n.get(l))==null||d.push(u),a[l]=function(){for(var f,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return(f=n.get(l))==null?void 0:f.map(y=>y(...m)).find(y=>y!==void 0)}}}else a[l]=u}),a),{})}}function pY(e){e===void 0&&(e=[]);const t=e.map(s=>s==null?void 0:s.reference),r=e.map(s=>s==null?void 0:s.floating),n=e.map(s=>s==null?void 0:s.item),i=C.useCallback(s=>xR(s,e,"reference"),t),o=C.useCallback(s=>xR(s,e,"floating"),r),a=C.useCallback(s=>xR(s,e,"item"),n);return C.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:a}),[i,o,a])}let x4=!1;function bT(e,t,r){switch(e){case"vertical":return t;case"horizontal":return r;default:return t||r}}function A4(e,t){return bT(t,e===LD||e===fv,e===Jp||e===km)}function AR(e,t,r){return bT(t,e===fv,r?e===Jp:e===km)||e==="Enter"||e===" "||e===""}function Obe(e,t,r){return bT(t,r?e===Jp:e===km,e===fv)}function N4(e,t,r){return bT(t,r?e===km:e===Jp,e===LD)}function kbe(e,t){const{open:r,onOpenChange:n,elements:i}=e,{listRef:o,activeIndex:a,onNavigate:s=()=>{},enabled:c=!0,selectedIndex:l=null,allowEscape:u=!1,loop:d=!1,nested:f=!1,rtl:p=!1,virtual:m=!1,focusItemOnOpen:g="auto",focusItemOnHover:y=!0,openOnArrowKeyDown:v=!0,disabledIndices:E=void 0,orientation:b="vertical",cols:S=1,scrollItemIntoView:A=!0,virtualItemRef:N,itemSizes:D,dense:M=!1}=t,H=_T(),V=pv(),G=Xi(s),Y=C.useRef(g),Z=C.useRef(l??-1),$=C.useRef(null),F=C.useRef(!0),K=C.useRef(G),k=C.useRef(!!i.floating),P=C.useRef(r),B=C.useRef(!1),R=C.useRef(!1),_=ba(E),x=ba(r),T=ba(A),W=ba(i.floating),U=ba(l),[X,ae]=C.useState(),[de,fe]=C.useState(),ke=Xi(function(Ie,rt,Be){Be===void 0&&(Be=!1);function Qe(te){m?(ae(te.id),V==null||V.events.emit("virtualfocus",te),N&&(N.current=te)):cu(te,{preventScroll:!0,sync:Fq()&&xD()?x4||B.current:!1})}const Ke=Ie.current[rt.current];Ke&&Qe(Ke),requestAnimationFrame(()=>{const te=Ie.current[rt.current]||Ke;if(!te)return;Ke||Qe(te);const Ae=T.current;Ae&&Me&&(Be||!F.current)&&(te.scrollIntoView==null||te.scrollIntoView(typeof Ae=="boolean"?{block:"nearest",inline:"nearest"}:Ae))})});qr(()=>{document.createElement("div").focus({get preventScroll(){return x4=!0,!1}})},[]),qr(()=>{c&&(r&&i.floating?Y.current&&l!=null&&(R.current=!0,Z.current=l,G(l)):k.current&&(Z.current=-1,K.current(null)))},[c,r,i.floating,l,G]),qr(()=>{if(c&&r&&i.floating)if(a==null){if(B.current=!1,U.current!=null)return;if(k.current&&(Z.current=-1,ke(o,Z)),(!P.current||!k.current)&&Y.current&&($.current!=null||Y.current===!0&&$.current==null)){let Ie=0;const rt=()=>{o.current[0]==null?(Ie<2&&(Ie?requestAnimationFrame:queueMicrotask)(rt),Ie++):(Z.current=$.current==null||AR($.current,b,p)||f?SR(o,_.current):f4(o,_.current),$.current=null,G(Z.current))};rt()}}else vy(o,a)||(Z.current=a,ke(o,Z,R.current),R.current=!1)},[c,r,i.floating,a,U,f,o,b,p,G,ke,_]),qr(()=>{var Ie;if(!c||i.floating||!V||m||!k.current)return;const rt=V.nodesRef.current,Be=(Ie=rt.find(te=>te.id===H))==null||(Ie=Ie.context)==null?void 0:Ie.elements.floating,Qe=Hs(Li(i.floating)),Ke=rt.some(te=>te.context&&ei(te.context.elements.floating,Qe));Be&&!Ke&&F.current&&Be.focus({preventScroll:!0})},[c,i.floating,V,H,m]),qr(()=>{if(!c||!V||!m||H)return;function Ie(rt){fe(rt.id),N&&(N.current=rt)}return V.events.on("virtualfocus",Ie),()=>{V.events.off("virtualfocus",Ie)}},[c,V,m,H,N]),qr(()=>{K.current=G,k.current=!!i.floating}),qr(()=>{r||($.current=null)},[r]),qr(()=>{P.current=r},[r]);const Ve=a!=null,Me=C.useMemo(()=>{function Ie(Be){if(!r)return;const Qe=o.current.indexOf(Be);Qe!==-1&&G(Qe)}return{onFocus(Be){let{currentTarget:Qe}=Be;Ie(Qe)},onClick:Be=>{let{currentTarget:Qe}=Be;return Qe.focus({preventScroll:!0})},...y&&{onMouseMove(Be){let{currentTarget:Qe}=Be;Ie(Qe)},onPointerLeave(Be){let{pointerType:Qe}=Be;!F.current||Qe==="touch"||(Z.current=-1,ke(o,Z),G(null),m||cu(W.current,{preventScroll:!0}))}}}},[r,W,ke,y,o,G,m]),ot=Xi(Ie=>{if(F.current=!1,B.current=!0,!x.current&&Ie.currentTarget===W.current)return;if(f&&N4(Ie.key,b,p)){qi(Ie),n(!1,Ie.nativeEvent,"list-navigation"),ni(i.domReference)&&!m&&i.domReference.focus();return}const rt=Z.current,Be=SR(o,E),Qe=f4(o,E);if(Ie.key==="Home"&&(qi(Ie),Z.current=Be,G(Z.current)),Ie.key==="End"&&(qi(Ie),Z.current=Qe,G(Z.current)),S>1){const Ke=D||Array.from({length:o.current.length},()=>({width:1,height:1})),te=ebe(Ke,S,M),Ae=te.findIndex(Ge=>Ge!=null&&!q_(o.current,Ge,E)),Ue=te.reduce((Ge,ne,ge)=>ne!=null&&!q_(o.current,ne,E)?ge:Ge,-1);if(Z.current=te[Z_e({current:te.map(Ge=>Ge!=null?o.current[Ge]:null)},{event:Ie,orientation:b,loop:d,cols:S,disabledIndices:rbe([...E||o.current.map((Ge,ne)=>q_(o.current,ne)?ne:void 0),void 0],te),minIndex:Ae,maxIndex:Ue,prevIndex:tbe(Z.current>Qe?Be:Z.current,Ke,te,S,Ie.key===fv?"bl":Ie.key===km?"tr":"tl"),stopEvent:!0})],G(Z.current),b==="both")return}if(A4(Ie.key,b)){if(qi(Ie),r&&!m&&Hs(Ie.currentTarget.ownerDocument)===Ie.currentTarget){Z.current=AR(Ie.key,b,p)?Be:Qe,G(Z.current);return}AR(Ie.key,b,p)?d?Z.current=rt>=Qe?u&&rt!==o.current.length?-1:Be:co(o,{startingIndex:rt,disabledIndices:E}):Z.current=Math.min(Qe,co(o,{startingIndex:rt,disabledIndices:E})):d?Z.current=rt<=Be?u&&rt!==-1?o.current.length:Qe:co(o,{startingIndex:rt,decrement:!0,disabledIndices:E}):Z.current=Math.max(Be,co(o,{startingIndex:rt,decrement:!0,disabledIndices:E})),vy(o,Z.current)?G(null):G(Z.current)}}),At=C.useMemo(()=>m&&r&&Ve&&{"aria-activedescendant":de||X},[m,r,Ve,de,X]),et=C.useMemo(()=>({"aria-orientation":b==="both"?void 0:b,...!Vq(i.domReference)&&At,onKeyDown:ot,onPointerMove(){F.current=!0}}),[At,ot,i.domReference,b]),Et=C.useMemo(()=>{function Ie(Be){g==="auto"&&Uq(Be.nativeEvent)&&(Y.current=!0)}function rt(Be){Y.current=g,g==="auto"&&ID(Be.nativeEvent)&&(Y.current=!0)}return{...At,onKeyDown(Be){F.current=!1;const Qe=Be.key.indexOf("Arrow")===0,Ke=Obe(Be.key,b,p),te=N4(Be.key,b,p),Ae=A4(Be.key,b),Ue=(f?Ke:Ae)||Be.key==="Enter"||Be.key.trim()==="";if(m&&r){const Xe=V==null?void 0:V.nodesRef.current.find(qt=>qt.parentId==null),lt=V&&Xe?mbe(V.nodesRef.current,Xe.id):null;if(Qe&&lt&&N){const qt=new KeyboardEvent("keydown",{key:Be.key,bubbles:!0});if(Ke||te){var Ge,ne;const Un=((Ge=lt.context)==null?void 0:Ge.elements.domReference)===Be.currentTarget,Sn=te&&!Un?(ne=lt.context)==null?void 0:ne.elements.domReference:Ke?o.current.find(mi=>(mi==null?void 0:mi.id)===X):null;Sn&&(qi(Be),Sn.dispatchEvent(qt),fe(void 0))}if(Ae&&lt.context&&lt.context.open&&lt.parentId&&Be.currentTarget!==lt.context.elements.domReference){var ge;qi(Be),(ge=lt.context.elements.domReference)==null||ge.dispatchEvent(qt);return}}return ot(Be)}if(!(!r&&!v&&Qe)){if(Ue&&($.current=f&&Ae?null:Be.key),f){Ke&&(qi(Be),r?(Z.current=SR(o,_.current),G(Z.current)):n(!0,Be.nativeEvent,"list-navigation"));return}Ae&&(l!=null&&(Z.current=l),qi(Be),!r&&v?n(!0,Be.nativeEvent,"list-navigation"):ot(Be),r&&G(Z.current))}},onFocus(){r&&!m&&G(null)},onPointerDown:rt,onMouseDown:Ie,onClick:Ie}},[X,At,ot,_,g,o,f,G,n,r,v,b,p,l,V,m,N]);return C.useMemo(()=>c?{reference:Et,floating:et,item:Me}:{},[c,Et,et,Me])}const Pbe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function mY(e,t){var r;t===void 0&&(t={});const{open:n,floatingId:i}=e,{enabled:o=!0,role:a="dialog"}=t,s=(r=Pbe.get(a))!=null?r:a,c=ET(),u=_T()!=null,d=C.useMemo(()=>s==="tooltip"||a==="label"?{["aria-"+(a==="label"?"labelledby":"describedby")]:n?i:void 0}:{"aria-expanded":n?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":n?i:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:c},...s==="menu"&&u&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},[s,i,u,n,c,a]),f=C.useMemo(()=>{const m={id:i,...s&&{role:s}};return s==="tooltip"||a==="label"?m:{...m,...s==="menu"&&{"aria-labelledby":c}}},[s,i,c,a]),p=C.useCallback(m=>{let{active:g,selected:y}=m;const v={role:"option",...g&&{id:i+"-option"}};switch(a){case"select":return{...v,"aria-selected":g&&y};case"combobox":return{...v,...g&&{"aria-selected":!0}}}return{}},[i,a]);return C.useMemo(()=>o?{reference:d,floating:f,item:p}:{},[o,d,f,p])}function Dbe(e,t){var r;const{open:n,dataRef:i}=e,{listRef:o,activeIndex:a,onMatch:s,onTypingChange:c,enabled:l=!0,findMatch:u=null,resetMs:d=750,ignoreKeys:f=[],selectedIndex:p=null}=t,m=C.useRef(),g=C.useRef(""),y=C.useRef((r=p??a)!=null?r:-1),v=C.useRef(null),E=Xi(s),b=Xi(c),S=ba(u),A=ba(f);qr(()=>{n&&(clearTimeout(m.current),v.current=null,g.current="")},[n]),qr(()=>{if(n&&g.current===""){var V;y.current=(V=p??a)!=null?V:-1}},[n,p,a]);const N=Xi(V=>{V?i.current.typing||(i.current.typing=V,b(V)):i.current.typing&&(i.current.typing=V,b(V))}),D=Xi(V=>{function G(K,k,P){const B=S.current?S.current(k,P):k.find(R=>(R==null?void 0:R.toLocaleLowerCase().indexOf(P.toLocaleLowerCase()))===0);return B?K.indexOf(B):-1}const Y=o.current;if(g.current.length>0&&g.current[0]!==" "&&(G(Y,Y,g.current)===-1?N(!1):V.key===" "&&qi(V)),Y==null||A.current.includes(V.key)||V.key.length!==1||V.ctrlKey||V.metaKey||V.altKey)return;n&&V.key!==" "&&(qi(V),N(!0)),Y.every(K=>{var k,P;return K?((k=K[0])==null?void 0:k.toLocaleLowerCase())!==((P=K[1])==null?void 0:P.toLocaleLowerCase()):!0})&&g.current===V.key&&(g.current="",y.current=v.current),g.current+=V.key,clearTimeout(m.current),m.current=setTimeout(()=>{g.current="",y.current=v.current,N(!1)},d);const $=y.current,F=G(Y,[...Y.slice(($||0)+1),...Y.slice(0,($||0)+1)],g.current);F!==-1?(E(F),v.current=F):V.key!==" "&&(g.current="",N(!1))}),M=C.useMemo(()=>({onKeyDown:D}),[D]),H=C.useMemo(()=>({onKeyDown:D,onKeyUp(V){V.key===" "&&N(!1)}}),[D,N]);return C.useMemo(()=>l?{reference:M,floating:H}:{},[l,M,H])}function O4(e,t){const[r,n]=e;let i=!1;const o=t.length;for(let a=0,s=o-1;a<o;s=a++){const[c,l]=t[a]||[0,0],[u,d]=t[s]||[0,0];l>=n!=d>=n&&r<=(u-c)*(n-l)/(d-l)+c&&(i=!i)}return i}function Lbe(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function Mbe(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:r=!1,requireIntent:n=!0}=e;let i,o=!1,a=null,s=null,c=performance.now();function l(d,f){const p=performance.now(),m=p-c;if(a===null||s===null||m===0)return a=d,s=f,c=p,null;const g=d-a,y=f-s,E=Math.sqrt(g*g+y*y)/m;return a=d,s=f,c=p,E}const u=d=>{let{x:f,y:p,placement:m,elements:g,onClose:y,nodeId:v,tree:E}=d;return function(S){function A(){clearTimeout(i),y()}if(clearTimeout(i),!g.domReference||!g.floating||m==null||f==null||p==null)return;const{clientX:N,clientY:D}=S,M=[N,D],H=hl(S),V=S.type==="mouseleave",G=ei(g.floating,H),Y=ei(g.domReference,H),Z=g.domReference.getBoundingClientRect(),$=g.floating.getBoundingClientRect(),F=m.split("-")[0],K=f>$.right-$.width/2,k=p>$.bottom-$.height/2,P=Lbe(M,Z),B=$.width>Z.width,R=$.height>Z.height,_=(B?Z:$).left,x=(B?Z:$).right,T=(R?Z:$).top,W=(R?Z:$).bottom;if(G&&(o=!0,!V))return;if(Y&&(o=!1),Y&&!V){o=!0;return}if(V&&Zr(S.relatedTarget)&&ei(g.floating,S.relatedTarget)||E&&ch(E.nodesRef.current,v).some(ae=>{let{context:de}=ae;return de==null?void 0:de.open}))return;if(F==="top"&&p>=Z.bottom-1||F==="bottom"&&p<=Z.top+1||F==="left"&&f>=Z.right-1||F==="right"&&f<=Z.left+1)return A();let U=[];switch(F){case"top":U=[[_,Z.top+1],[_,$.bottom-1],[x,$.bottom-1],[x,Z.top+1]];break;case"bottom":U=[[_,$.top+1],[_,Z.bottom-1],[x,Z.bottom-1],[x,$.top+1]];break;case"left":U=[[$.right-1,W],[$.right-1,T],[Z.left+1,T],[Z.left+1,W]];break;case"right":U=[[Z.right-1,W],[Z.right-1,T],[$.left+1,T],[$.left+1,W]];break}function X(ae){let[de,fe]=ae;switch(F){case"top":{const ke=[B?de+t/2:K?de+t*4:de-t*4,fe+t+1],Ve=[B?de-t/2:K?de+t*4:de-t*4,fe+t+1],Me=[[$.left,K||B?$.bottom-t:$.top],[$.right,K?B?$.bottom-t:$.top:$.bottom-t]];return[ke,Ve,...Me]}case"bottom":{const ke=[B?de+t/2:K?de+t*4:de-t*4,fe-t],Ve=[B?de-t/2:K?de+t*4:de-t*4,fe-t],Me=[[$.left,K||B?$.top+t:$.bottom],[$.right,K?B?$.top+t:$.bottom:$.top+t]];return[ke,Ve,...Me]}case"left":{const ke=[de+t+1,R?fe+t/2:k?fe+t*4:fe-t*4],Ve=[de+t+1,R?fe-t/2:k?fe+t*4:fe-t*4];return[...[[k||R?$.right-t:$.left,$.top],[k?R?$.right-t:$.left:$.right-t,$.bottom]],ke,Ve]}case"right":{const ke=[de-t,R?fe+t/2:k?fe+t*4:fe-t*4],Ve=[de-t,R?fe-t/2:k?fe+t*4:fe-t*4],Me=[[k||R?$.left+t:$.right,$.top],[k?R?$.left+t:$.right:$.left+t,$.bottom]];return[ke,Ve,...Me]}}}if(!O4([N,D],U)){if(o&&!P)return A();if(!V&&n){const ae=l(S.clientX,S.clientY);if(ae!==null&&ae<.1)return A()}O4([N,D],X([f,p]))?!o&&n&&(i=window.setTimeout(A,40)):A()}}};return u.__options={blockPointerEvents:r},u}const jbe=({arrowRef:e,placement:t})=>{const r=[];return r.push(W_e(8)),r.push(t==="auto"?Y_e():q_e()),r.push(K_e({padding:8})),e!=null&&e.current&&r.push(X_e({element:e.current})),r},Ube=({placement:e})=>e==="auto"?void 0:e,Fbe=({placement:e})=>({top:"bottom",right:"left",bottom:"top",left:"right"})[e.split("-")[0]],gY=({open:e,arrowRef:t,placement:r="top",setOpen:n})=>fY({placement:Ube({placement:r}),open:e,onOpenChange:n,whileElementsMounted:Zq,middleware:jbe({placement:r,arrowRef:t})}),yY=({context:e,trigger:t,role:r="tooltip",interactions:n=[]})=>pY([dY(e,{enabled:t==="click"}),fbe(e,{enabled:t==="hover",handleClose:Mbe()}),hY(e),mY(e,{role:r}),...n]),Vbe=({animation:e="duration-300",arrow:t=!0,children:r,className:n,content:i,placement:o="top",style:a="dark",theme:s,trigger:c="hover",minWidth:l,...u})=>{const d=C.useRef(null),[f,p]=C.useState(!1),m=gY({open:f,placement:o,arrowRef:d,setOpen:p}),{context:g,middlewareData:{arrow:{x:y,y:v}={}},refs:E,strategy:b,update:S,x:A,y:N}=m,D=Nbe(g),{getFloatingProps:M,getReferenceProps:H}=yY({context:g,role:"tooltip",trigger:c,interactions:[D]});return C.useEffect(()=>{if(E.reference.current&&E.floating.current&&f)return Zq(E.reference.current,E.floating.current,S)},[f,E.floating,E.reference,S]),h.jsxs(h.Fragment,{children:[h.jsx("div",{ref:E.setReference,className:s.target,"data-testid":"flowbite-tooltip-target",...H(),children:r}),h.jsxs("div",{ref:E.setFloating,"data-testid":"flowbite-tooltip",...M({className:se(s.base,e&&`${s.animation} ${e}`,!f&&s.hidden,s.style[a],n),style:{position:b,top:N??" ",left:A??" ",minWidth:l},...u}),children:[h.jsx("div",{className:s.content,children:i}),t&&h.jsx("div",{className:se(s.arrow.base,a==="dark"&&s.arrow.style.dark,a==="light"&&s.arrow.style.light,a==="auto"&&s.arrow.style.auto),"data-testid":"flowbite-tooltip-arrow",ref:d,style:{top:v??" ",left:y??" ",right:" ",bottom:" ",[Fbe({placement:m.placement})]:s.arrow.placement},children:""})]})]})},wT=({animation:e="duration-300",arrow:t=!0,children:r,className:n,content:i,placement:o="top",style:a="dark",theme:s={},trigger:c="hover",...l})=>{const u=xe(st().tooltip,s);return h.jsx(Vbe,{animation:e,arrow:t,content:i,placement:o,style:a,theme:u,trigger:c,className:n,...l,children:r})};wT.displayName="Tooltip";function vY(e){return xi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function EY(e){return xi({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM72 272a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm104-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H176c-8.8 0-16-7.2-16-16s7.2-16 16-16zM72 368a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm88 0c0-8.8 7.2-16 16-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H176c-8.8 0-16-7.2-16-16z"},child:[]}]})(e)}function Bbe(e){return xi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 296c0 66.3-53.7 120-120 120h-8c-17.7 0-32-14.3-32-32s14.3-32 32-32h8c30.9 0 56-25.1 56-56v-8H320c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h64c35.3 0 64 28.7 64 64v32 32 72zm-256 0c0 66.3-53.7 120-120 120H64c-17.7 0-32-14.3-32-32s14.3-32 32-32h8c30.9 0 56-25.1 56-56v-8H64c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h64c35.3 0 64 28.7 64 64v32 32 72z"},child:[]}]})(e)}const jD=(e,t)=>{var r;t(!0),(r=navigator==null?void 0:navigator.clipboard)==null||r.writeText(e).then(()=>{console.log("Copy Successfull")}).catch(n=>{console.error("Failed to Copy text: ",n),t(!1)}),setTimeout(()=>t(!1),4e3)},_Y=C.forwardRef(({valueToCopy:e,icon:t=EY,theme:r={},className:n,...i},o)=>{const[a,s]=C.useState(!1),c=xe(st().clipboard.withIcon,r);return h.jsx("button",{className:se(c.base,n),onClick:()=>jD(e,s),...i,ref:o,children:a?h.jsx(vY,{"aria-hidden":!0,className:c.icon.successIcon}):h.jsx(t,{"aria-hidden":!0,className:c.icon.defaultIcon})})}),bY=C.forwardRef(({valueToCopy:e,icon:t=EY,label:r="Copy",theme:n={},className:i,...o},a)=>{const[s,c]=C.useState(!1),l=xe(st().clipboard.withIconText,n);return h.jsx("button",{className:se(l.base,i),onClick:()=>jD(e,c),...o,ref:a,children:s?h.jsxs("span",{className:l.label.base,children:[h.jsx(vY,{"aria-hidden":!0,className:l.icon.successIcon}),h.jsx("span",{className:l.label.successText,children:"Copied"})]}):h.jsxs("span",{className:l.label.base,children:[h.jsx(t,{"aria-hidden":!0,className:l.icon.defaultIcon}),h.jsx("span",{className:l.label.defaultText,children:r})]})})}),wY=C.forwardRef(({className:e,valueToCopy:t,label:r,theme:n={},...i},o)=>{const[a,s]=C.useState(!1),c=xe(st().clipboard.button,n);return h.jsx(wT,{content:a?"Copied":"Copy to clipboard",className:"[&_*]:cursor-pointer",children:h.jsx("button",{className:se(c.base,e),onClick:()=>jD(t,s),...i,ref:o,children:h.jsx("span",{className:c.label,children:r})})})});wY.displayName="Clipboard";_Y.displayName="Clipboard.WithIcon";bY.displayName="Clipboard.WithIconText";Object.assign(wY,{WithIcon:_Y,WithIconText:bY});const mv=({children:e,className:t,color:r="default",theme:n={},value:i,...o})=>{const a=xe(st().helperText,n);return h.jsx("p",{className:se(a.root.base,a.root.colors[r],t),...o,children:i??e??""})};mv.displayName="HelperText";const SY=C.forwardRef(({addon:e,className:t,color:r="gray",helperText:n,icon:i,rightIcon:o,shadow:a,sizing:s="md",theme:c={},type:l="text",...u},d)=>{const f=xe(st().textInput,c);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:se(f.base,t),children:[e&&h.jsx("span",{className:f.addon,children:e}),h.jsxs("div",{className:f.field.base,children:[i&&h.jsx("div",{className:f.field.icon.base,children:h.jsx(i,{className:f.field.icon.svg})}),o&&h.jsx("div",{"data-testid":"right-icon",className:f.field.rightIcon.base,children:h.jsx(o,{className:f.field.rightIcon.svg})}),h.jsx("input",{className:se(f.field.input.base,f.field.input.colors[r],f.field.input.sizes[s],f.field.input.withIcon[i?"on":"off"],f.field.input.withRightIcon[o?"on":"off"],f.field.input.withAddon[e?"on":"off"],f.field.input.withShadow[a?"on":"off"]),type:l,...u,ref:d})]})]}),n&&h.jsx(mv,{color:r,children:n})]})});SY.displayName="TextInput";const TY=C.createContext(void 0);function ST(){const e=C.useContext(TY);if(!e)throw new Error("useDatePickerContext should be used within the DatePickerContext provider!");return e}var bn=(e=>(e[e.Days=0]="Days",e[e.Months=1]="Months",e[e.Years=2]="Years",e[e.Decades=3]="Decades",e))(bn||{}),CY=(e=>(e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e))(CY||{});const Zp=(e,t,r)=>{const n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();if(t&&r){const i=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),o=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();return n>=i&&n<=o}if(t){const i=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return n>=i}if(r){const i=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();return n<=i}return!0},y0=(e,t)=>(e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e.getTime()===t.getTime()),TE=(e,t,r)=>(Zp(e,t,r)||(t&&e<t?e=t:r&&e>r&&(e=r)),e),$be=(e,t)=>{const r=new Date(e.getFullYear(),e.getMonth(),1);let i=r.getDay()-t;return i<0&&(i+=7),UD(r,-i)},Hbe=(e,t)=>{const r=[],n=new Date(0);n.setDate(n.getDate()-n.getDay()+t);const i=new Intl.DateTimeFormat(e,{weekday:"short"});for(let o=0;o<7;o++)r.push(i.format(UD(n,o)));return r},UD=(e,t)=>{const r=new Date(e);return r.setDate(r.getDate()+t),r},zbe=(e,t)=>{const r=new Date(e);return r.setMonth(r.getMonth()+t),r},ep=(e,t)=>{const r=new Date(e);return r.setFullYear(r.getFullYear()+t),r},tp=(e,t,r)=>{let n={day:"numeric",month:"long",year:"numeric"};return r&&(n=r),new Intl.DateTimeFormat(e,n).format(t)},rp=(e,t)=>{const r=e.getFullYear();return Math.floor(r/t)*t},Gbe=(e,t)=>{const r=e.getFullYear(),n=t+9;return r>=t&&r<=n},Wbe=({theme:e={}})=>{const{theme:t,weekStart:r,minDate:n,maxDate:i,viewDate:o,selectedDate:a,changeSelectedDate:s,language:c}=ST(),l=xe(t.views.days,e),u=Hbe(c,r),d=$be(o,r);return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:l.header.base,children:u.map((f,p)=>h.jsx("span",{className:l.header.title,children:f},p))}),h.jsx("div",{className:l.items.base,children:[...Array(42)].map((f,p)=>{const m=UD(d,p),g=tp(c,m,{day:"numeric"}),y=a&&y0(a,m),v=!Zp(m,n,i);return h.jsx("button",{disabled:v,type:"button",className:se(l.items.item.base,y&&l.items.item.selected,v&&l.items.item.disabled),onClick:()=>{v||s(m,!0)},children:g},p)})})]})},Kbe=({theme:e={}})=>{const{theme:t,viewDate:r,selectedDate:n,minDate:i,maxDate:o,setViewDate:a,setView:s}=ST(),c=xe(t.views.decades,e),l=rp(r,100);return h.jsx("div",{className:c.items.base,children:[...Array(12)].map((u,d)=>{const f=l-10+d*10;new Date(r.getTime()).setFullYear(f+r.getFullYear()%10);const m=new Date(f,0,1),g=ep(m,9),y=n&&Gbe(n,f),v=!Zp(m,i,o)&&!Zp(g,i,o);return h.jsx("button",{disabled:v,type:"button",className:se(c.items.item.base,y&&c.items.item.selected,v&&c.items.item.disabled),onClick:()=>{v||(n&&a(ep(r,f-n.getFullYear())),s(bn.Years))},children:f},d)})})},qbe=({theme:e={}})=>{const{theme:t,minDate:r,maxDate:n,selectedDate:i,viewDate:o,language:a,setViewDate:s,setView:c}=ST(),l=xe(t.views.months,e);return h.jsx("div",{className:l.items.base,children:[...Array(12)].map((u,d)=>{const f=new Date;f.setMonth(d,1),f.setFullYear(o.getFullYear());const p=tp(a,f,{month:"short"}),m=i&&y0(i,f),g=!Zp(f,r,n);return h.jsx("button",{disabled:g,type:"button",className:se(l.items.item.base,m&&l.items.item.selected,g&&l.items.item.disabled),onClick:()=>{g||(s(f),c(bn.Days))},children:p},d)})})},Ybe=({theme:e={}})=>{const{theme:t,selectedDate:r,minDate:n,maxDate:i,viewDate:o,setViewDate:a,setView:s}=ST(),c=xe(t.views.years,e);return h.jsx("div",{className:c.items.base,children:[...Array(12)].map((l,u)=>{const f=rp(o,10)+u,p=new Date(o.getTime());p.setFullYear(f);const m=r&&y0(r,p),g=!Zp(p,n,i);return h.jsx("button",{disabled:g,type:"button",className:se(c.items.item.base,m&&c.items.item.selected,g&&c.items.item.disabled),onClick:()=>{g||(a(p),s(bn.Months))},children:f},u)})})},Xbe=({title:e,open:t,inline:r=!1,autoHide:n=!0,showClearButton:i=!0,labelClearButton:o="Clear",showTodayButton:a=!0,labelTodayButton:s="Today",defaultValue:c,minDate:l,maxDate:u,language:d="en",weekStart:f=CY.Sunday,className:p,theme:m={},onChange:g,label:y,value:v,...E},b)=>{const S=xe(st().datepicker,m),A=c?TE(c,l,u):null,N=C.useMemo(()=>c?TE(c,l,u):new Date,[]),[D,M]=C.useState(t),[H,V]=C.useState(bn.Days),[G,Y]=C.useState(v??A),[Z,$]=C.useState(v??N),F=C.useRef(null),K=C.useRef(null),k=(W,U)=>{Y(W),(W===null||W)&&g&&g(W),n&&H===bn.Days&&U==!0&&!r&&M(!1)},P=()=>{k(A,!0),c&&$(c)};C.useImperativeHandle(b,()=>({focus(){var W;(W=F.current)==null||W.focus()},clear(){P()}}));const B=W=>{switch(W){case bn.Decades:return h.jsx(Kbe,{theme:S.views.decades});case bn.Years:return h.jsx(Ybe,{theme:S.views.years});case bn.Months:return h.jsx(qbe,{theme:S.views.months});case bn.Days:default:return h.jsx(Wbe,{theme:S.views.days})}},R=()=>{switch(H){case bn.Days:return bn.Months;case bn.Months:return bn.Years;case bn.Years:return bn.Decades}return H},_=()=>{switch(H){case bn.Decades:return`${rp(Z,100)-10} - ${rp(Z,100)+100}`;case bn.Years:return`${rp(Z,10)} - ${rp(Z,10)+11}`;case bn.Months:return tp(d,Z,{year:"numeric"});case bn.Days:default:return tp(d,Z,{month:"long",year:"numeric"})}},x=(W,U,X)=>{switch(W){case bn.Days:return new Date(zbe(U,X));case bn.Months:return new Date(ep(U,X));case bn.Years:return new Date(ep(U,X*10));case bn.Decades:return new Date(ep(U,X*100));default:return new Date(ep(U,X*10))}};C.useEffect(()=>{const W=U=>{var de,fe;const X=(de=K==null?void 0:K.current)==null?void 0:de.contains(U.target),ae=(fe=F==null?void 0:F.current)==null?void 0:fe.contains(U.target);!X&&!ae&&M(!1)};return document.addEventListener("mousedown",W),()=>{document.removeEventListener("mousedown",W)}},[F,K,M]),C.useEffect(()=>{const W=v&&TE(new Date(v),l,u),U=G&&TE(new Date(G),l,u);U&&W&&!y0(W,U)&&Y(W),G==null&&Y(A)},[v,Y,$,G]);const T=v===null?y:tp(d,G||new Date);return h.jsx(TY.Provider,{value:{theme:S,language:d,minDate:l,maxDate:u,weekStart:f,isOpen:D,setIsOpen:M,view:H,setView:V,viewDate:Z,setViewDate:$,selectedDate:G,setSelectedDate:Y,changeSelectedDate:k},children:h.jsxs("div",{className:se(S.root.base,p),children:[!r&&h.jsx(SY,{theme:S.root.input,icon:X0e,ref:F,onFocus:()=>{G&&!y0(Z,G)&&$(G),M(!0)},value:T,readOnly:!0,defaultValue:A?tp(d,A):y,...E}),(D||r)&&h.jsx("div",{ref:K,className:se(S.popup.root.base,r&&S.popup.root.inline),children:h.jsxs("div",{className:S.popup.root.inner,children:[h.jsxs("div",{className:S.popup.header.base,children:[e&&h.jsx("div",{className:S.popup.header.title,children:e}),h.jsxs("div",{className:S.popup.header.selectors.base,children:[h.jsx("button",{type:"button",className:se(S.popup.header.selectors.button.base,S.popup.header.selectors.button.prev),onClick:()=>$(x(H,Z,-1)),children:h.jsx(q0e,{})}),h.jsx("button",{type:"button",className:se(S.popup.header.selectors.button.base,S.popup.header.selectors.button.view),onClick:()=>V(R()),children:_()}),h.jsx("button",{type:"button",className:se(S.popup.header.selectors.button.base,S.popup.header.selectors.button.next),onClick:()=>$(x(H,Z,1)),children:h.jsx(Y0e,{})})]})]}),h.jsx("div",{className:S.popup.view.base,children:B(H)}),(i||a)&&h.jsxs("div",{className:S.popup.footer.base,children:[a&&h.jsx("button",{type:"button",className:se(S.popup.footer.button.base,S.popup.footer.button.today),onClick:()=>{const W=new Date;k(W,!0),$(W)},children:s}),i&&h.jsx("button",{type:"button",className:se(S.popup.footer.button.base,S.popup.footer.button.clear),onClick:()=>{k(null,!0)},children:o})]})]})})]})})},Jbe=C.forwardRef(Xbe);Jbe.displayName="Datepicker";const RY=C.createContext(void 0);function IY(){const e=C.useContext(RY);if(!e)throw new Error("useDrawerContext should be used within the DrawerContext provider!");return e}function Qbe(e){return xi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(e)}function Zbe(e){return xi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}const xY=({children:e,className:t,closeIcon:r=Zbe,theme:n={},title:i,titleIcon:o=Qbe,...a})=>{const s=C.useId(),{id:c,isOpen:l,onClose:u,theme:d}=IY(),f=xe(d.header,n);return h.jsxs("div",{className:t,...a,children:[h.jsxs("h5",{className:f.inner.titleText,id:c,children:[h.jsx(o,{"aria-hidden":!0,className:f.inner.titleIcon}),i]}),h.jsxs("button",{onClick:u,"data-testid":"close-drawer",className:f.inner.closeButton,children:[h.jsx(r,{"aria-hidden":!0,className:f.inner.closeIcon}),h.jsx("span",{className:"sr-only",children:"Close menu"})]}),h.jsx("span",{className:f.collapsed[l?"on":"off"],id:`flowbite-drawer-header-${s}`,children:e})]})};xY.displayName="Drawer.Header";const AY=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=IY(),o=xe(i.items,r);return h.jsx("div",{"data-testid":"flowbite-drawer-items",className:se(o.base,t),...n,children:e})};AY.displayName="Drawer.Items";const NY=({backdrop:e=!0,children:t,className:r,edge:n=!1,position:i="left",onClose:o,open:a=!1,theme:s={},...c})=>{const l=C.useId(),u=xe(st().drawer,s);return C.useEffect(()=>{const d=f=>{f.key==="Escape"&&a&&o&&o()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[o,a]),h.jsxs(RY.Provider,{value:{theme:u,onClose:o,isOpen:a,id:l},children:[h.jsx("div",{"aria-modal":!0,"aria-describedby":`drawer-dialog-${l}`,role:"dialog",tabIndex:-1,"data-testid":"flowbite-drawer",className:se(u.root.base,u.root.position[i][a?"on":"off"],n&&!a&&u.root.edge,r),...c,children:t}),a&&e&&h.jsx("div",{onClick:()=>o(),className:u.root.backdrop})]})};NY.displayName="Drawer";Object.assign(NY,{Header:xY,Items:AY});const OY=C.createContext(void 0);function FD(){const e=C.useContext(OY);if(!e)throw new Error("useDropdownContext should be used within the DropdownContext provider!");return e}const VD=({className:e,theme:t={},...r})=>{const{theme:n}=FD(),i=t.divider??n.floating.divider;return h.jsx("div",{className:se(i,e),...r})},kY=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=FD(),o=r.header??i.floating.header;return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:se(o,t),...n,children:e}),h.jsx(VD,{})]})},PY=C.forwardRef(({children:e,className:t,icon:r,onClick:n,theme:i={},...o},a)=>{const{ref:s,index:c}=abe({label:typeof e=="string"?e:void 0}),l=tY([a,s]),{theme:u,activeIndex:d,dismissOnClick:f,getItemProps:p,handleSelect:m}=FD(),g=d===c,y=xe(u.floating.item,i),v=o;return h.jsx("li",{role:"menuitem",className:y.container,children:h.jsxs(bD,{ref:l,className:se(y.base,t),...v,...p({onClick:()=>{n==null||n(),f&&m(null)}}),tabIndex:g?0:-1,children:[r&&h.jsx(r,{className:y.icon}),e]})})});PY.displayName="DropdownItem";const ewe={top:rve,right:lq,bottom:cq,left:tve},twe=({refs:e,children:t,inline:r,theme:n,disabled:i,setButtonWidth:o,getReferenceProps:a,renderTrigger:s,...c})=>{const l=e.reference,u=a();if(C.useEffect(()=>{l.current&&(o==null||o(l.current.clientWidth))},[l,o]),s){const d=s(n);return C.cloneElement(d,{ref:e.setReference,disabled:i,...u,...d.props})}return r?h.jsx("button",{type:"button",ref:e.setReference,className:n==null?void 0:n.inlineWrapper,disabled:i,...u,children:t}):h.jsx(wD,{...c,disabled:i,type:"button",ref:e.setReference,...u,children:t})},DY=({children:e,className:t,dismissOnClick:r=!0,theme:n={},enableTypeAhead:i=!0,renderTrigger:o,...a})=>{const[s,c]=C.useState(!1),[l,u]=C.useState(null),[d,f]=C.useState(null),[p,m]=C.useState(void 0),g=C.useRef([]),y=C.useRef([]),v=xe(st().dropdown,n),E=a,b=a["data-testid"]||"flowbite-dropdown-target",{placement:S=a.inline?"bottom-start":"bottom",trigger:A="click",label:N,inline:D,arrowIcon:M=!0,...H}=E,V=C.useCallback(_=>{f(_),c(!1)},[]),G=C.useCallback(_=>{s?u(_):V(_)},[s,V]),{context:Y,floatingStyles:Z,refs:$}=gY({open:s,setOpen:c,placement:S}),F=kbe(Y,{listRef:g,activeIndex:l,selectedIndex:d,onNavigate:u}),K=Dbe(Y,{listRef:y,activeIndex:l,selectedIndex:d,onMatch:G,enabled:i}),{getReferenceProps:k,getFloatingProps:P,getItemProps:B}=yY({context:Y,role:"menu",trigger:A,interactions:[F,K]}),R=C.useMemo(()=>{const[_]=S.split("-");return ewe[_]??cq},[S]);return h.jsxs(OY.Provider,{value:{theme:v,activeIndex:l,dismissOnClick:r,getItemProps:B,handleSelect:V},children:[h.jsxs(twe,{...H,refs:$,inline:D,theme:v,"data-testid":b,className:se(v.floating.target,H.className),setButtonWidth:m,getReferenceProps:k,renderTrigger:o,children:[N,M&&h.jsx(R,{className:v.arrowIcon})]}),s&&h.jsx(uY,{context:Y,modal:!1,children:h.jsx("div",{ref:$.setFloating,style:{...Z,minWidth:p},"data-testid":"flowbite-dropdown","aria-expanded":s,...P({className:se(v.floating.base,v.floating.animation,"duration-100",!s&&v.floating.hidden,v.floating.style.auto,t)}),children:h.jsx(obe,{elementsRef:g,labelsRef:y,children:h.jsx("ul",{className:v.content,tabIndex:-1,children:e})})})})]})};DY.displayName="Dropdown";kY.displayName="Dropdown.Header";VD.displayName="Dropdown.Divider";const rwe=Object.assign(DY,{Item:PY,Header:kY,Divider:VD}),zh=C.forwardRef(({className:e,color:t="gray",helperText:r,sizing:n="md",theme:i={},...o},a)=>{const s=xe(st().fileInput,i);return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:se(s.root.base,e),children:h.jsx("div",{className:s.field.base,children:h.jsx("input",{className:se(s.field.input.base,s.field.input.colors[t],s.field.input.sizes[n]),...o,type:"file",ref:a})})}),r&&h.jsx(mv,{color:t,children:r})]})});zh.displayName="FileInput";const He=C.forwardRef(({label:e,helperText:t,color:r="default",sizing:n="md",variant:i,disabled:o=!1,theme:a={},className:s,...c},l)=>{const u=C.useId(),d=xe(st().floatingLabel,a);return h.jsxs("div",{children:[h.jsxs("div",{className:se("relative",i==="standard"?"z-0":""),children:[h.jsx("input",{type:"text",id:c.id?c.id:"floatingLabel"+u,"aria-describedby":"outlined_success_help",className:se(d.input[r][i][n],s),placeholder:" ","data-testid":"floating-label",disabled:o,...c,ref:l}),h.jsx("label",{htmlFor:c.id?c.id:"floatingLabel"+u,className:se(d.label[r][i][n],s),children:e})]}),h.jsx("p",{id:"outlined_helper_text"+u,className:se(d.helperText[r],s),children:t})]})});He.displayName="FloatingLabel";const LY=({alt:e,className:t,children:r,href:n,name:i,src:o,theme:a={},...s})=>{const c=xe(st().footer.brand,a);return h.jsx("div",{children:n?h.jsxs("a",{"data-testid":"flowbite-footer-brand",href:n,className:se(c.base,t),...s,children:[h.jsx("img",{alt:e,src:o,className:c.img}),h.jsx("span",{"data-testid":"flowbite-footer-brand-span",className:c.span,children:i}),r]}):h.jsx("img",{alt:e,"data-testid":"flowbite-footer-brand",src:o,className:se(c.img,t),...s})})},MY=({by:e,className:t,href:r,theme:n={},year:i,...o})=>{const a=xe(st().footer.copyright,n);return h.jsxs("div",{"data-testid":"flowbite-footer-copyright",className:se(a.base,t),...o,children:[" ",i,r?h.jsx("a",{href:r,className:a.href,children:e}):h.jsx("span",{"data-testid":"flowbite-footer-copyright-span",className:a.span,children:e})]})},jY=({className:e,theme:t={},...r})=>{const n=xe(st().footer.divider,t);return h.jsx("hr",{"data-testid":"footer-divider",className:se(n.base,e),...r})},UY=({ariaLabel:e,className:t,href:r,icon:n,theme:i={},...o})=>{const a=xe(st().footer.icon,i);return h.jsx("div",{children:r?h.jsx("a",{"aria-label":e,"data-testid":"flowbite-footer-icon",href:r,className:se(a.base,t),...o,children:h.jsx(n,{className:a.size})}):h.jsx(n,{"data-testid":"flowbite-footer-icon",className:a.size,...o})})},FY=({as:e="a",children:t,className:r,href:n,theme:i={},...o})=>{const a=xe(st().footer.groupLink.link,i);return h.jsx("li",{className:se(a.base,r),children:h.jsx(e,{href:n,className:a.href,...o,children:t})})},VY=({children:e,className:t,col:r=!1,theme:n={},...i})=>{const o=xe(st().footer.groupLink,n);return h.jsx("ul",{"data-testid":"footer-groupLink",className:se(o.base,r&&o.col,t),...i,children:e})},BY=({as:e="h2",className:t,theme:r={},title:n,...i})=>{const o=xe(st().footer.title,r);return h.jsx(e,{"data-testid":"flowbite-footer-title",className:se(o.base,t),...i,children:n})},$Y=({bgDark:e=!1,children:t,className:r,container:n=!1,theme:i={},...o})=>{const a=xe(st().footer,i);return h.jsx("footer",{"data-testid":"flowbite-footer",className:se(a.root.base,e&&a.root.bgDark,n&&a.root.container,r),...o,children:t})};$Y.displayName="Footer";MY.displayName="Footer.Copyright";FY.displayName="Footer.Link";LY.displayName="Footer.Brand";VY.displayName="Footer.LinkGroup";UY.displayName="Footer.Icon";BY.displayName="Footer.Title";jY.displayName="Footer.Divider";Object.assign($Y,{Copyright:MY,Link:FY,LinkGroup:VY,Brand:LY,Icon:UY,Title:BY,Divider:jY});const HY=C.forwardRef(({theme:e={},icon:t=Bbe,className:r,...n},i)=>{const o=xe(st().hr.icon,e);return h.jsxs("div",{className:o.base,children:[h.jsx("hr",{className:se(o.hrLine,r),role:"separator","data-testid":"flowbite-hr-icon",ref:i,...n}),h.jsx("div",{className:o.icon.base,children:h.jsx(t,{"aria-hidden":!0,className:o.icon.icon})})]})}),zY=C.forwardRef(({theme:e={},className:t,...r},n)=>{const i=xe(st().hr.square,e);return h.jsx("hr",{className:se(i.base,t),role:"separator","data-testid":"flowbite-hr-square",ref:n,...r})}),GY=C.forwardRef(({theme:e={},text:t,className:r,...n},i)=>{const o=xe(st().hr.text,e);return h.jsxs("div",{className:o.base,children:[h.jsx("hr",{className:se(o.hrLine,r),"data-testid":"flowbite-hr-text",role:"separator",ref:i,...n}),h.jsx("span",{className:o.text,children:t})]})}),WY=C.forwardRef(({theme:e={},className:t,...r},n)=>{const i=xe(st().hr.trimmed,e);return h.jsx("hr",{className:se(i.base,t),role:"separator","data-testid":"flowbite-hr-trimmed",ref:n,...r})}),KY=C.forwardRef(({theme:e={},className:t,...r},n)=>{const i=xe(st().hr.root,e);return h.jsx("hr",{className:se(i.base,t),role:"separator","data-testid":"flowbite-hr",ref:n,...r})});KY.displayName="HR";WY.displayName="HR.Trimmed";HY.displayName="HR.Icon";GY.displayName="HR.Text";zY.displayName="HR.Square";Object.assign(KY,{Trimmed:WY,Icon:HY,Text:GY,Square:zY});const qY=({children:e,className:t,icon:r,theme:n={},...i})=>{const o=xe(st().list.item,n);return h.jsxs("li",{className:se(o.withIcon[r?"on":"off"],t),...i,children:[r&&h.jsx(r,{className:se(o.icon)}),e]})},YY=({children:e,className:t,unstyled:r,nested:n,ordered:i,horizontal:o,theme:a={},...s})=>{const c=xe(st().list,a),l=i?"ol":"ul";return h.jsx(l,{className:se(c.root.base,c.root.ordered[i?"on":"off"],r&&c.root.unstyled,n&&c.root.nested,o&&c.root.horizontal,t),...s,children:e})};YY.displayName="List";qY.displayName="List.Item";Object.assign(YY,{Item:qY});const XY=({active:e,children:t,className:r,href:n,icon:i,onClick:o,theme:a={},disabled:s,...c})=>{const l=xe(st().listGroup.item,a),u=typeof n<"u",d=u?"a":"button";return h.jsx("li",{className:se(l.base,r),children:h.jsxs(d,{href:n,onClick:o,type:u?void 0:"button",disabled:s,className:se(l.link.active[e?"on":"off"],l.link.disabled[s?"on":"off"],l.link.base,l.link.href[u?"on":"off"]),...c,children:[i&&h.jsx(i,{"aria-hidden":!0,"data-testid":"flowbite-list-group-item-icon",className:l.link.icon}),t]})})},JY=({children:e,className:t,theme:r={},...n})=>{const i=xe(st().listGroup,r);return h.jsx("ul",{className:se(i.root.base,t),...n,children:e})};JY.displayName="ListGroup";XY.displayName="ListGroup.Item";Object.assign(JY,{Item:XY});const QY=C.createContext(void 0);function TT(){const e=C.useContext(QY);if(!e)throw new Error("useNavBarContext should be used within the NavbarContext provider!");return e}const ZY=({as:e="a",children:t,className:r,theme:n={},...i})=>{const{theme:o}=TT(),a=xe(o.brand,n);return h.jsx(e,{className:se(a.base,r),...i,children:t})},eX=({children:e,className:t,theme:r={},...n})=>{const{theme:i,isOpen:o}=TT(),a=xe(i.collapse,r);return h.jsx("div",{"data-testid":"flowbite-navbar-collapse",className:se(a.base,a.hidden[o?"off":"on"],t),...n,children:h.jsx("ul",{className:a.list,children:e})})},tX=({active:e,as:t="a",disabled:r,children:n,className:i,theme:o={},onClick:a,...s})=>{const{theme:c,setIsOpen:l}=TT(),u=xe(c.link,o),d=f=>{l(!1),a==null||a(f)};return h.jsx("li",{children:h.jsx(t,{className:se(u.base,e&&u.active.on,!e&&!r&&u.active.off,u.disabled[r?"on":"off"],i),onClick:d,...s,children:n})})};function nwe(e){return xi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(e)}const rX=({barIcon:e=nwe,className:t,theme:r={},...n})=>{const{theme:i,isOpen:o,setIsOpen:a}=TT(),s=xe(i.toggle,r),c=()=>{a(!o)};return h.jsxs("button",{"data-testid":"flowbite-navbar-toggle",onClick:c,className:se(s.base,t),...n,children:[h.jsx("span",{className:"sr-only",children:"Open main menu"}),h.jsx(e,{"aria-hidden":!0,className:s.icon})]})},nX=({border:e,children:t,className:r,fluid:n=!1,menuOpen:i,rounded:o,theme:a={},...s})=>{const[c,l]=C.useState(i),u=xe(st().navbar,a);return h.jsx(QY.Provider,{value:{theme:u,isOpen:c,setIsOpen:l},children:h.jsx("nav",{className:se(u.root.base,u.root.bordered[e?"on":"off"],u.root.rounded[o?"on":"off"],r),...s,children:h.jsx("div",{className:se(u.root.inner.base,u.root.inner.fluid[n?"on":"off"]),children:t})})})};nX.displayName="Navbar";ZY.displayName="Navbar.Brand";eX.displayName="Navbar.Collapse";tX.displayName="Navbar.Link";rX.displayName="Navbar.Toggle";const iwe=Object.assign(nX,{Brand:ZY,Collapse:eX,Link:tX,Toggle:rX}),iX=({children:e,className:t,theme:r={},toggle:n,...i})=>{const[o,a]=C.useState(void 0),s=xe(st().megaMenu.dropdown,r);if(n)return h.jsx(rwe,{inline:!0,label:n,placement:"bottom",theme:s.toggle,className:se(s.base,t),children:e});const c=C.useId(),l=C.useRef(null);return C.useEffect(()=>{var d;a((d=function(){var p;const f=(p=l.current)==null?void 0:p.closest("nav");return f==null?void 0:f.querySelector('[aria-haspopup="menu"]')}())==null?void 0:d.id)},[]),h.jsx("div",{"aria-labelledby":o,id:c,ref:l,role:"menu",className:se(s.base,t),...i,children:e})};iX.displayName="MegaMenu.Dropdown";const oX=({children:e,className:t,theme:r={},...n})=>{const i=C.useId(),o=C.useRef(null),[a,s]=C.useState(void 0),[c,l]=C.useState(void 0),u=xe(st().megaMenu.dropdownToggle,r),d=function(){var m;const p=(m=o.current)==null?void 0:m.closest("nav");return p==null?void 0:p.querySelector('[role="menu"]')},f=function(){var p;(p=d())==null||p.classList.toggle("hidden"),l(!c)};return C.useEffect(()=>{const p=d(),m=p==null?void 0:p.classList.contains("hidden");s(p==null?void 0:p.id),l(!m)},[]),h.jsx("button",{"aria-controls":a,"aria-expanded":c,"aria-haspopup":"menu",id:i,onClick:f,ref:o,className:se(u.base,t),...n,children:e})};oX.displayName="MegaMenu.DropdownToggle";const aX=({children:e,theme:t={},...r})=>{const n=xe(st().megaMenu,t);return h.jsx(iwe,{fluid:!0,theme:n,...r,children:e})};Object.assign(aX,{Dropdown:iX,DropdownToggle:oX});aX.displayName="MegaMenu";const sX=C.createContext(void 0);function BD(){const e=C.useContext(sX);if(!e)throw new Error("useModalContext should be used within the ModalContext provider!");return e}const cX=({children:e,className:t,theme:r={},...n})=>{const{theme:i,popup:o}=BD(),a=xe(i.body,r);return h.jsx("div",{className:se(a.base,o&&[a.popup],t),...n,children:e})},lX=({children:e,className:t,theme:r={},...n})=>{const{theme:i,popup:o}=BD(),a=xe(i.footer,r);return h.jsx("div",{className:se(a.base,!o&&a.popup,t),...n,children:e})},uX=({as:e="h3",children:t,className:r,theme:n={},id:i,...o})=>{const a=C.useId(),s=i||a,{theme:c,popup:l,onClose:u,setHeaderId:d}=BD(),f=xe(c.header,n);return C.useLayoutEffect(()=>(d(s),()=>d(void 0)),[s,d]),h.jsxs("div",{className:se(f.base,l&&f.popup,r),...o,children:[h.jsx(e,{id:s,className:f.title,children:t}),h.jsx("button",{"aria-label":"Close",className:f.close.base,type:"button",onClick:u,children:h.jsx(nve,{"aria-hidden":!0,className:f.close.icon})})]})},dX=C.forwardRef(({children:e,className:t,dismissible:r=!1,onClose:n,popup:i,position:o="center",root:a,show:s,size:c="2xl",theme:l={},initialFocus:u,...d},f)=>{const[p,m]=C.useState(void 0),g=xe(st().modal,l),{context:y}=fY({open:s,onOpenChange:()=>n&&n()}),v=tY([y.refs.setFloating,f]),E=dY(y),b=hY(y,{outsidePressEvent:"mousedown",enabled:r}),S=mY(y),{getFloatingProps:A}=pY([E,b,S]);return s?h.jsx(sX.Provider,{value:{theme:g,popup:i,onClose:n,setHeaderId:m},children:h.jsx(Tbe,{root:a,children:h.jsx(Rbe,{lockScroll:!0,"data-testid":"modal-overlay",className:se(g.root.base,g.root.positions[o],s?g.root.show.on:g.root.show.off,t),...d,children:h.jsx(uY,{context:y,initialFocus:u,children:h.jsx("div",{ref:v,...A(d),"aria-labelledby":p,className:se(g.content.base,g.root.sizes[c]),children:h.jsx("div",{className:g.content.inner,children:e})})})})})}):null});dX.displayName="Modal";uX.displayName="Modal.Header";cX.displayName="Modal.Body";lX.displayName="Modal.Footer";const CE=Object.assign(dX,{Header:uX,Body:cX,Footer:lX}),owe=(e,t)=>e>=t?[]:[...Array(t-e+1).keys()].map(r=>r+e),$D=({active:e,children:t,className:r,onClick:n,theme:i={},...o})=>{const a=xe(st().pagination,i);return h.jsx("button",{type:"button",className:se(e&&a.pages.selector.active,r),onClick:n,...o,children:t})};$D.displayName="Pagination.Button";const nO=({children:e,className:t,onClick:r,theme:n={},disabled:i=!1,...o})=>{const a=xe(st().pagination,n);return h.jsx("button",{type:"button",className:se(i&&a.pages.selector.disabled,t),disabled:i,onClick:r,...o,children:e})};nO.displayName="Pagination.Navigation";const hX=({className:e,currentPage:t,layout:r="pagination",nextLabel:n="Next",onPageChange:i,previousLabel:o="Previous",renderPaginationButton:a=d=>h.jsx($D,{...d}),showIcons:s=!1,theme:c={},totalPages:l,...u})=>{const d=xe(st().pagination,c),f=Math.min(Math.max(r==="pagination"?t+2:t+4,5),l),p=Math.max(1,f-4),m=()=>{i(Math.min(t+1,l))},g=()=>{i(Math.max(t-1,1))};return h.jsxs("nav",{className:se(d.base,e),...u,children:[r==="table"&&h.jsxs("div",{className:d.layout.table.base,children:["Showing ",h.jsx("span",{className:d.layout.table.span,children:p})," to",h.jsx("span",{className:d.layout.table.span,children:f})," of",h.jsx("span",{className:d.layout.table.span,children:l})," Entries"]}),h.jsxs("ul",{className:d.pages.base,children:[h.jsx("li",{children:h.jsxs(nO,{className:se(d.pages.previous.base,s&&d.pages.showIcon),onClick:g,disabled:t===1,children:[s&&h.jsx(J0e,{"aria-hidden":!0,className:d.pages.previous.icon}),o]})}),r==="pagination"&&owe(p,f).map(y=>h.jsx("li",{"aria-current":y===t?"page":void 0,children:a({className:se(d.pages.selector.base,t===y&&d.pages.selector.active),active:y===t,onClick:()=>i(y),children:y})},y)),h.jsx("li",{children:h.jsxs(nO,{className:se(d.pages.next.base,s&&d.pages.showIcon),onClick:m,disabled:t===l,children:[n,s&&h.jsx(Q0e,{"aria-hidden":!0,className:d.pages.next.icon})]})})]})]})};hX.displayName="Pagination";Object.assign(hX,{Button:$D});const awe=C.forwardRef(({className:e,theme:t={},...r},n)=>{const i=xe(st().radio,t);return h.jsx("input",{ref:n,type:"radio",className:se(i.root.base,e),...r})});awe.displayName="Radio";const swe=C.forwardRef(({className:e,sizing:t="md",theme:r={},...n},i)=>{const o=xe(st().rangeSlider,r);return h.jsx(h.Fragment,{children:h.jsx("div",{"data-testid":"flowbite-range-slider",className:se(o.root.base,e),children:h.jsx("div",{className:o.field.base,children:h.jsx("input",{ref:i,type:"range",className:se(o.field.input.base,o.field.input.sizes[t]),...n})})})})});swe.displayName="RangeSlider";const fX=({children:e,className:t,percentFilled:r=0,theme:n={},...i})=>{const o=xe(st().ratingAdvanced,n);return h.jsxs("div",{className:se(o.base,t),...i,children:[h.jsx("span",{className:o.label,children:e}),h.jsx("div",{className:o.progress.base,children:h.jsx("div",{className:o.progress.fill,"data-testid":"flowbite-rating-fill",style:{width:`${r}%`}})}),h.jsx("span",{className:o.progress.label,children:`${r}%`})]})},pX=C.createContext(void 0);function cwe(){const e=C.useContext(pX);if(!e)throw new Error("useRatingContext should be used within the RatingContext provider!");return e}const mX=({className:e,filled:t=!0,starIcon:r=Z0e,theme:n={},...i})=>{const{theme:o,size:a="sm"}=cwe(),s=xe(o.star,n);return h.jsx(r,{"data-testid":"flowbite-rating-star",className:se(s.sizes[a],s[t?"filled":"empty"],e),...i})},gX=({children:e,className:t,size:r="sm",theme:n={},...i})=>{const o=xe(st().rating,n);return h.jsx(pX.Provider,{value:{theme:o,size:r},children:h.jsx("div",{className:se(o.root.base,t),...i,children:e})})};gX.displayName="Rating";mX.displayName="Rating.Star";fX.displayName="Rating.Advanced";Object.assign(gX,{Star:mX,Advanced:fX});const lwe=C.forwardRef(({addon:e,children:t,className:r,color:n="gray",helperText:i,icon:o,shadow:a,sizing:s="md",theme:c={},...l},u)=>{const d=xe(st().select,c);return h.jsxs("div",{className:se(d.base,r),children:[e&&h.jsx("span",{className:d.addon,children:e}),h.jsxs("div",{className:d.field.base,children:[o&&h.jsx("div",{className:d.field.icon.base,children:h.jsx(o,{className:d.field.icon.svg})}),h.jsx("select",{className:se(d.field.select.base,d.field.select.colors[n],d.field.select.sizes[s],d.field.select.withIcon[o?"on":"off"],d.field.select.withAddon[e?"on":"off"],d.field.select.withShadow[a?"on":"off"]),...l,ref:u,children:t}),i&&h.jsx(mv,{color:n,children:i})]})]})});lwe.displayName="Select";const yX=C.createContext(void 0);function Pm(){const e=C.useContext(yX);if(!e)throw new Error("useSidebarContext should be used within the SidebarContext provider!");return e}const HD=C.createContext(void 0);function uwe(){const e=C.useContext(HD);if(!e)throw new Error("useSidebarItemContext should be used within the SidebarItemContext provider!");return e}const vX=({children:e,className:t,icon:r,label:n,chevronIcon:i=sq,renderChevronIcon:o,open:a=!1,theme:s={},...c})=>{const l=C.useId(),[u,d]=C.useState(a),{theme:f,isCollapsed:p}=Pm(),m=xe(f.collapse,s);C.useEffect(()=>d(a),[a]);const g=({children:y})=>h.jsx("li",{children:p&&!u?h.jsx(wT,{content:n,placement:"right",children:y}):y});return h.jsxs(g,{children:[h.jsxs("button",{id:`flowbite-sidebar-collapse-${l}`,onClick:()=>d(!u),title:n,type:"button",className:se(m.button,t),...c,children:[r&&h.jsx(r,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-collapse-icon",className:se(m.icon.base,m.icon.open[u?"on":"off"])}),p?h.jsx("span",{className:"sr-only",children:n}):h.jsxs(h.Fragment,{children:[h.jsx("span",{"data-testid":"flowbite-sidebar-collapse-label",className:m.label.base,children:n}),o?o(m,u):h.jsx(i,{"aria-hidden":!0,className:se(m.label.icon.base,m.label.icon.open[u?"on":"off"])})]})]}),h.jsx("ul",{"aria-labelledby":`flowbite-sidebar-collapse-${l}`,hidden:!u,className:m.list,children:h.jsx(HD.Provider,{value:{isInsideCollapse:!0},children:e})})]})};vX.displayName="Sidebar.Collapse";const EX=({children:e,color:t="info",className:r,theme:n={},...i})=>{const{theme:o,isCollapsed:a}=Pm(),s=xe(o.cta,n);return h.jsx("div",{"data-testid":"sidebar-cta",hidden:a,className:se(s.base,s.color[t],r),...i,children:e})};EX.displayName="Sidebar.CTA";const dwe=({id:e,theme:t,isCollapsed:r,tooltipChildren:n,children:i,...o})=>h.jsx("li",{...o,children:r?h.jsx(wT,{content:h.jsx(_X,{id:e,theme:t,children:n}),placement:"right",children:i}):i}),_X=({id:e,theme:t,children:r})=>h.jsx("span",{"data-testid":"flowbite-sidebar-item-content",id:`flowbite-sidebar-item-${e}`,className:se(t.content.base),children:r}),bX=C.forwardRef(({active:e,as:t="a",children:r,className:n,icon:i,label:o,labelColor:a="info",theme:s={},...c},l)=>{var g,y,v,E;const u=C.useId(),{theme:d,isCollapsed:f}=Pm(),{isInsideCollapse:p}=uwe(),m=xe(d.item,s);return h.jsx(dwe,{theme:m,className:m.listItem,id:u,isCollapsed:f,tooltipChildren:r,children:h.jsxs(t,{"aria-labelledby":`flowbite-sidebar-item-${u}`,ref:l,className:se(m.base,e&&m.active,!f&&p&&((g=m.collapsed)==null?void 0:g.insideCollapse),n),...c,children:[i&&h.jsx(i,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-item-icon",className:se((y=m.icon)==null?void 0:y.base,e&&((v=m.icon)==null?void 0:v.active))}),f&&!i&&h.jsx("span",{className:(E=m.collapsed)==null?void 0:E.noIcon,children:r.charAt(0).toLocaleUpperCase()??"?"}),!f&&h.jsx(_X,{id:u,theme:m,children:r}),!f&&o&&h.jsx(Tq,{color:a,"data-testid":"flowbite-sidebar-label",hidden:f,className:m.label,children:o})]})})});bX.displayName="Sidebar.Item";const wX=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=Pm(),o=xe(i.itemGroup,r);return h.jsx("ul",{"data-testid":"flowbite-sidebar-item-group",className:se(o.base,t),...n,children:h.jsx(HD.Provider,{value:{isInsideCollapse:!1},children:e})})};wX.displayName="Sidebar.ItemGroup";const SX=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=Pm(),o=xe(i.items,r);return h.jsx("div",{className:se(o.base,t),"data-testid":"flowbite-sidebar-items",...n,children:e})};SX.displayName="Sidebar.Items";const TX=({children:e,className:t,href:r,img:n,imgAlt:i="",theme:o={},...a})=>{const s=C.useId(),{theme:c,isCollapsed:l}=Pm(),u=xe(c.logo,o);return h.jsxs("a",{"aria-labelledby":`flowbite-sidebar-logo-${s}`,href:r,className:se(u.base,t),...a,children:[h.jsx("img",{alt:i,src:n,className:u.img}),h.jsx("span",{className:u.collapsed[l?"on":"off"],id:`flowbite-sidebar-logo-${s}`,children:e})]})};TX.displayName="Sidebar.Logo";const CX=({children:e,as:t="nav",collapseBehavior:r="collapse",collapsed:n=!1,theme:i={},className:o,...a})=>{const s=xe(st().sidebar,i);return h.jsx(yX.Provider,{value:{theme:s,isCollapsed:n},children:h.jsx(t,{"aria-label":"Sidebar",hidden:n&&r==="hide",className:se(s.root.base,s.root.collapsed[n?"on":"off"],o),...a,children:h.jsx("div",{className:s.root.inner,children:e})})})};CX.displayName="Sidebar";Object.assign(CX,{Collapse:vX,CTA:EX,Item:bX,Items:SX,ItemGroup:wX,Logo:TX});const RX=C.createContext(void 0);function hwe(){const e=C.useContext(RX);if(!e)throw new Error("useTableBodyContext should be used within the TableBodyContext provider!");return e}const IX=C.createContext(void 0);function zD(){const e=C.useContext(IX);if(!e)throw new Error("useTableContext should be used within the TableContext provider!");return e}const xX=C.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o}=zD(),a=xe(o.body,r);return h.jsx(RX.Provider,{value:{theme:a},children:h.jsx("tbody",{className:se(a.base,t),ref:i,...n,children:e})})});xX.displayName="Table.Body";const AX=C.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o}=hwe(),a=xe(o.cell,r);return h.jsx("td",{className:se(a.base,t),ref:i,...n,children:e})});AX.displayName="Table.Cell";const NX=C.createContext(void 0);function fwe(){const e=C.useContext(NX);if(!e)throw new Error("useTableHeadContext should be used within the TableHeadContext provider!");return e}const OX=C.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o}=zD(),a=xe(o.head,r);return h.jsx(NX.Provider,{value:{theme:a},children:h.jsx("thead",{className:se(a.base,t),ref:i,...n,children:h.jsx("tr",{children:e})})})});OX.displayName="Table.Head";const kX=C.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o}=fwe(),a=xe(o.cell,r);return h.jsx("th",{className:se(a.base,t),ref:i,...n,children:e})});kX.displayName="Table.HeadCell";const PX=C.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o,hoverable:a,striped:s}=zD(),c=xe(o.row,r);return h.jsx("tr",{ref:i,"data-testid":"table-row-element",className:se(c.base,s&&c.striped,a&&c.hovered,t),...n,children:e})});PX.displayName="Table.Row";const DX=C.forwardRef(({children:e,className:t,striped:r,hoverable:n,theme:i={},...o},a)=>{const s=xe(st().table,i);return h.jsx("div",{"data-testid":"table-element",className:se(s.root.wrapper),children:h.jsxs(IX.Provider,{value:{theme:s,striped:r,hoverable:n},children:[h.jsx("div",{className:se(s.root.shadow,t)}),h.jsx("table",{className:se(s.root.base,t),...o,ref:a,children:e})]})})});DX.displayName="Table";const yr=Object.assign(DX,{Head:OX,Body:xX,Row:PX,Cell:AX,HeadCell:kX}),LX=({children:e,className:t})=>h.jsx("div",{className:t,children:e});LX.displayName="Tabs.Item";const MX=C.forwardRef(({children:e,className:t,onActiveTabChange:r,variant:n="default",theme:i={},...o},a)=>{const s=xe(st().tabs,i),c=C.useId(),l=C.useMemo(()=>C.Children.map(C.Children.toArray(e),({props:S})=>S),[e]),u=C.useRef([]),[d,f]=C.useState(Math.max(0,l.findIndex(S=>S.active))),[p,m]=C.useState(-1),g=S=>{f(S),r&&r(S)},y=({target:S})=>{g(S),m(S)},v=({event:S,target:A})=>{S.key==="ArrowLeft"&&m(Math.max(0,p-1)),S.key==="ArrowRight"&&m(Math.min(l.length-1,p+1)),S.key==="Enter"&&(g(A),m(A))},E=s.tablist.tabitem.variant[n],b=s.tabitemcontainer.variant[n];return C.useEffect(()=>{var S;(S=u.current[p])==null||S.focus()},[p]),C.useImperativeHandle(a,()=>({setActiveTab:g})),h.jsxs("div",{className:se(s.base,t),children:[h.jsx("div",{"aria-label":"Tabs",role:"tablist",className:se(s.tablist.base,s.tablist.variant[n],t),...o,children:l.map((S,A)=>h.jsxs("button",{type:"button","aria-controls":`${c}-tabpanel-${A}`,"aria-selected":A===d,className:se(s.tablist.tabitem.base,E.base,A===d&&E.active.on,A!==d&&!S.disabled&&E.active.off),disabled:S.disabled,id:`${c}-tab-${A}`,onClick:()=>y({target:A}),onKeyDown:N=>v({event:N,target:A}),ref:N=>u.current[A]=N,role:"tab",tabIndex:A===p?0:-1,style:{zIndex:A===p?2:1},children:[S.icon&&h.jsx(S.icon,{className:s.tablist.tabitem.icon}),S.title]},A))}),h.jsx("div",{className:se(s.tabitemcontainer.base,b),children:l.map((S,A)=>h.jsx("div",{"aria-labelledby":`${c}-tab-${A}`,className:s.tabpanel,hidden:A!==d,id:`${c}-tabpanel-${A}`,role:"tabpanel",tabIndex:0,children:S.children},A))})]})});MX.displayName="Tabs";Object.assign(MX,{Item:LX});const pwe=C.forwardRef(({className:e,color:t="gray",helperText:r,shadow:n,theme:i={},...o},a)=>{const s=xe(st().textarea,i);return h.jsxs(h.Fragment,{children:[h.jsx("textarea",{ref:a,className:se(s.base,s.colors[t],s.withShadow[n?"on":"off"],e),...o}),r&&h.jsx(mv,{color:t,children:r})]})});pwe.displayName="Textarea";const jX=C.createContext(void 0);function GD(){const e=C.useContext(jX);if(!e)throw new Error("useTimelineContentContext should be used within the TimelineContentContext provider!");return e}const UX=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=GD(),o=xe(i.body,r);return h.jsx("div",{className:se(o.base,t),...n,children:e})},FX=C.createContext(void 0);function WD(){const e=C.useContext(FX);if(!e)throw new Error("useTimelineContext should be used within the TimelineContext provider!");return e}const VX=C.createContext(void 0);function BX(){const e=C.useContext(VX);if(!e)throw new Error("useTimelineItemContext should be used within the TimelineItemContext provider!");return e}const $X=({children:e,className:t,theme:r={},...n})=>{const{horizontal:i}=WD(),{theme:o}=BX(),a=xe(o.content,r);return h.jsx(jX.Provider,{value:{theme:a},children:h.jsx("div",{"data-testid":"timeline-content",className:se(a.root.base,i?a.root.horizontal:a.root.vertical,t),...n,children:e})})},HX=({children:e,className:t,theme:r={},...n})=>{const{theme:i,horizontal:o}=WD(),a=xe(i.item,r);return h.jsx(VX.Provider,{value:{theme:a},children:h.jsx("li",{"data-testid":"timeline-item",className:se(o&&a.root.horizontal,!o&&a.root.vertical,t),...n,children:e})})},zX=({children:e,className:t,icon:r,theme:n={},...i})=>{const{horizontal:o}=WD(),{theme:a}=BX(),s=xe(a.point,n);return h.jsxs("div",{"data-testid":"timeline-point",className:se(o&&s.horizontal,!o&&s.vertical,t),...i,children:[e,r?h.jsx("span",{className:se(s.marker.icon.wrapper),children:h.jsx(r,{"aria-hidden":!0,className:se(s.marker.icon.base)})}):h.jsx("div",{className:se(o&&s.marker.base.horizontal,!o&&s.marker.base.vertical)}),o&&h.jsx("div",{className:se(s.line)})]})},GX=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=GD(),o=xe(i.time,r);return h.jsx("time",{className:se(o.base,t),...n,children:e})},WX=({as:e="h3",children:t,className:r,theme:n={},...i})=>{const{theme:o}=GD(),a=xe(o.title,n);return h.jsx(e,{className:se(a.base,r),...i,children:t})},KX=({children:e,className:t,horizontal:r,theme:n={},...i})=>{const o=xe(st().timeline,n);return h.jsx(FX.Provider,{value:{theme:o,horizontal:r},children:h.jsx("ol",{"data-testid":"timeline-component",className:se(r&&o.root.direction.horizontal,!r&&o.root.direction.vertical,t),...i,children:e})})};KX.displayName="Timeline";HX.displayName="Timeline.Item";zX.displayName="Timeline.Point";$X.displayName="Timeline.Content";GX.displayName="Timeline.Time";WX.displayName="Timeline.Title";UX.displayName="Timeline.Body";Object.assign(KX,{Item:HX,Point:zX,Content:$X,Time:GX,Title:WX,Body:UX});const qX=C.createContext(void 0);function mwe(){const e=C.useContext(qX);if(!e)throw new Error("useToastContext should be used within the ToastContext provider!");return e}const YX=({className:e,onClick:t,theme:r={},xIcon:n=eve,onDismiss:i,...o})=>{const{theme:a,duration:s,isClosed:c,isRemoved:l,setIsClosed:u,setIsRemoved:d}=mwe(),f=xe(a.toggle,r),p=m=>{if(t&&t(m),i){i();return}u(!c),setTimeout(()=>d(!l),s)};return h.jsx("button",{"aria-label":"Close",onClick:p,type:"button",className:se(f.base,e),...o,children:h.jsx(n,{"aria-hidden":!0,className:f.icon})})},gwe={75:"duration-75",100:"duration-100",150:"duration-150",200:"duration-200",300:"duration-300",500:"duration-500",700:"duration-700",1e3:"duration-1000"},XX=({children:e,className:t,duration:r=300,theme:n={},...i})=>{const[o,a]=C.useState(!1),[s,c]=C.useState(!1),l=xe(st().toast,n);return s?null:h.jsx(qX.Provider,{value:{theme:l,duration:r,isClosed:o,isRemoved:s,setIsClosed:a,setIsRemoved:c},children:h.jsx("div",{"data-testid":"flowbite-toast",role:"alert",className:se(l.root.base,gwe[r],o&&l.root.closed,t),...i,children:e})})};XX.displayName="Toast";YX.displayName="Toast.Toggle";Object.assign(XX,{Toggle:YX});const ywe=C.forwardRef(({checked:e,className:t,color:r="blue",sizing:n="md",disabled:i,label:o,name:a,onChange:s,theme:c={},...l},u)=>{const d=C.useId(),f=xe(st().toggleSwitch,c),p=()=>s(!e),m=()=>{p()},g=y=>{y.code=="Enter"&&y.preventDefault()};return h.jsxs(h.Fragment,{children:[a&&e?h.jsx("input",{ref:u,checked:e,hidden:!0,name:a,readOnly:!0,type:"checkbox",className:"sr-only"}):null,h.jsxs("button",{"aria-checked":e,"aria-labelledby":`${d}-flowbite-toggleswitch-label`,disabled:i,id:`${d}-flowbite-toggleswitch`,onClick:m,onKeyDown:g,role:"switch",tabIndex:0,type:"button",className:se(f.root.base,f.root.active[i?"off":"on"],t),...l,children:[h.jsx("div",{"data-testid":"flowbite-toggleswitch-toggle",className:se(f.toggle.base,f.toggle.checked[e?"on":"off"],e&&f.toggle.checked.color[r],f.toggle.sizes[n])}),o!=null&&o.length?h.jsx("span",{"data-testid":"flowbite-toggleswitch-label",id:`${d}-flowbite-toggleswitch-label`,className:f.root.label,children:o}):null]})]})});ywe.displayName="ToggleSwitch";const vwe={firstName:"",lastName:"",profileImage:"",weight:"",height:""},JX=Im({name:"patient",initialState:vwe,reducers:{setPatient(e,t){e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,e.profileImage=t.payload.profileImage,e.weight=t.payload.weight,e.height=t.payload.height}}}),{setPatient:NR}=JX.actions,Ewe=JX.reducer,_we="https://hcompanion.onrender.com/api",QX=async({token:e})=>{try{const t=await be.get(`${_we}/patient/getBasicDetails`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.userData}catch(t){return console.log(t),t.response.status=="401"||t.response.status=="400",!1}},CT="https://hcompanion.onrender.com/api",ZX=sessionStorage.getItem("token"),bwe=async e=>{try{const t=await be.post(`${CT}/patient/profile/updateDetails`,e,{headers:{"content-type":" multipart/form-data",Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(t),re.fire({icon:"success",text:"Profile has been Updated"}),!0}catch(t){console.log(t)}},eJ=async()=>{try{const e=await be.get(`${CT}/patient/profile/viewDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(e),e.data.patientDetails}catch(e){console.log(e),(e.response.status=e.response.data.invalidToken)&&re.fire({icon:"warning",text:"Login to access profile"})}},wwe=async()=>{var e,t,r,n,i,o;try{return(await be.get(`${CT}/patient/profile/getAddessAndPhone`,{headers:{Authorization:`bearer ${ZX}`}})).data.contactDetails}catch(a){return console.log(a),((e=a==null?void 0:a.response)==null?void 0:e.status)=="500"&&((r=(t=a==null?void 0:a.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Error at the Server","","error"),((n=a==null?void 0:a.response)==null?void 0:n.status)=="400"&&((o=(i=a==null?void 0:a.response)==null?void 0:i.data)!=null&&o.invalidToken)&&re.fire("Log in","","error"),!1}},Swe=async e=>{var t,r,n,i,o,a;try{const s=await be.post(`${CT}/patient/profile/updateAddessAndPhone`,e,{headers:{Authorization:`bearer ${ZX}`}});return!0}catch(s){return console.log(s),((t=s==null?void 0:s.response)==null?void 0:t.status)=="500"&&((n=(r=s==null?void 0:s.response)==null?void 0:r.data)!=null&&n.errorServer)&&re.fire("Error at the Server","","error"),((i=s==null?void 0:s.response)==null?void 0:i.status)=="400"&&((a=(o=s==null?void 0:s.response)==null?void 0:o.data)!=null&&a.invalidToken)&&re.fire("Log in","","error"),!1}};var tJ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(zu,function(){var r=1e3,n=6e4,i=36e5,o="millisecond",a="second",s="minute",c="hour",l="day",u="week",d="month",f="quarter",p="year",m="date",g="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],K=$%100;return"["+$+(F[(K-20)%10]||F[K]||F[0])+"]"}},b=function($,F,K){var k=String($);return!k||k.length>=F?$:""+Array(F+1-k.length).join(K)+$},S={s:b,z:function($){var F=-$.utcOffset(),K=Math.abs(F),k=Math.floor(K/60),P=K%60;return(F<=0?"+":"-")+b(k,2,"0")+":"+b(P,2,"0")},m:function $(F,K){if(F.date()<K.date())return-$(K,F);var k=12*(K.year()-F.year())+(K.month()-F.month()),P=F.clone().add(k,d),B=K-P<0,R=F.clone().add(k+(B?-1:1),d);return+(-(k+(K-P)/(B?P-R:R-P))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:d,y:p,w:u,d:l,D:m,h:c,m:s,s:a,ms:o,Q:f}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},A="en",N={};N[A]=E;var D="$isDayjsObject",M=function($){return $ instanceof Y||!(!$||!$[D])},H=function $(F,K,k){var P;if(!F)return A;if(typeof F=="string"){var B=F.toLowerCase();N[B]&&(P=B),K&&(N[B]=K,P=B);var R=F.split("-");if(!P&&R.length>1)return $(R[0])}else{var _=F.name;N[_]=F,P=_}return!k&&P&&(A=P),P||!k&&A},V=function($,F){if(M($))return $.clone();var K=typeof F=="object"?F:{};return K.date=$,K.args=arguments,new Y(K)},G=S;G.l=H,G.i=M,G.w=function($,F){return V($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var Y=function(){function $(K){this.$L=H(K.locale,null,!0),this.parse(K),this.$x=this.$x||K.x||{},this[D]=!0}var F=$.prototype;return F.parse=function(K){this.$d=function(k){var P=k.date,B=k.utc;if(P===null)return new Date(NaN);if(G.u(P))return new Date;if(P instanceof Date)return new Date(P);if(typeof P=="string"&&!/Z$/i.test(P)){var R=P.match(y);if(R){var _=R[2]-1||0,x=(R[7]||"0").substring(0,3);return B?new Date(Date.UTC(R[1],_,R[3]||1,R[4]||0,R[5]||0,R[6]||0,x)):new Date(R[1],_,R[3]||1,R[4]||0,R[5]||0,R[6]||0,x)}}return new Date(P)}(K),this.init()},F.init=function(){var K=this.$d;this.$y=K.getFullYear(),this.$M=K.getMonth(),this.$D=K.getDate(),this.$W=K.getDay(),this.$H=K.getHours(),this.$m=K.getMinutes(),this.$s=K.getSeconds(),this.$ms=K.getMilliseconds()},F.$utils=function(){return G},F.isValid=function(){return this.$d.toString()!==g},F.isSame=function(K,k){var P=V(K);return this.startOf(k)<=P&&P<=this.endOf(k)},F.isAfter=function(K,k){return V(K)<this.startOf(k)},F.isBefore=function(K,k){return this.endOf(k)<V(K)},F.$g=function(K,k,P){return G.u(K)?this[k]:this.set(P,K)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(K,k){var P=this,B=!!G.u(k)||k,R=G.p(K),_=function(fe,ke){var Ve=G.w(P.$u?Date.UTC(P.$y,ke,fe):new Date(P.$y,ke,fe),P);return B?Ve:Ve.endOf(l)},x=function(fe,ke){return G.w(P.toDate()[fe].apply(P.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(ke)),P)},T=this.$W,W=this.$M,U=this.$D,X="set"+(this.$u?"UTC":"");switch(R){case p:return B?_(1,0):_(31,11);case d:return B?_(1,W):_(0,W+1);case u:var ae=this.$locale().weekStart||0,de=(T<ae?T+7:T)-ae;return _(B?U-de:U+(6-de),W);case l:case m:return x(X+"Hours",0);case c:return x(X+"Minutes",1);case s:return x(X+"Seconds",2);case a:return x(X+"Milliseconds",3);default:return this.clone()}},F.endOf=function(K){return this.startOf(K,!1)},F.$set=function(K,k){var P,B=G.p(K),R="set"+(this.$u?"UTC":""),_=(P={},P[l]=R+"Date",P[m]=R+"Date",P[d]=R+"Month",P[p]=R+"FullYear",P[c]=R+"Hours",P[s]=R+"Minutes",P[a]=R+"Seconds",P[o]=R+"Milliseconds",P)[B],x=B===l?this.$D+(k-this.$W):k;if(B===d||B===p){var T=this.clone().set(m,1);T.$d[_](x),T.init(),this.$d=T.set(m,Math.min(this.$D,T.daysInMonth())).$d}else _&&this.$d[_](x);return this.init(),this},F.set=function(K,k){return this.clone().$set(K,k)},F.get=function(K){return this[G.p(K)]()},F.add=function(K,k){var P,B=this;K=Number(K);var R=G.p(k),_=function(W){var U=V(B);return G.w(U.date(U.date()+Math.round(W*K)),B)};if(R===d)return this.set(d,this.$M+K);if(R===p)return this.set(p,this.$y+K);if(R===l)return _(1);if(R===u)return _(7);var x=(P={},P[s]=n,P[c]=i,P[a]=r,P)[R]||1,T=this.$d.getTime()+K*x;return G.w(T,this)},F.subtract=function(K,k){return this.add(-1*K,k)},F.format=function(K){var k=this,P=this.$locale();if(!this.isValid())return P.invalidDate||g;var B=K||"YYYY-MM-DDTHH:mm:ssZ",R=G.z(this),_=this.$H,x=this.$m,T=this.$M,W=P.weekdays,U=P.months,X=P.meridiem,ae=function(ke,Ve,Me,ot){return ke&&(ke[Ve]||ke(k,B))||Me[Ve].slice(0,ot)},de=function(ke){return G.s(_%12||12,ke,"0")},fe=X||function(ke,Ve,Me){var ot=ke<12?"AM":"PM";return Me?ot.toLowerCase():ot};return B.replace(v,function(ke,Ve){return Ve||function(Me){switch(Me){case"YY":return String(k.$y).slice(-2);case"YYYY":return G.s(k.$y,4,"0");case"M":return T+1;case"MM":return G.s(T+1,2,"0");case"MMM":return ae(P.monthsShort,T,U,3);case"MMMM":return ae(U,T);case"D":return k.$D;case"DD":return G.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return ae(P.weekdaysMin,k.$W,W,2);case"ddd":return ae(P.weekdaysShort,k.$W,W,3);case"dddd":return W[k.$W];case"H":return String(_);case"HH":return G.s(_,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return fe(_,x,!0);case"A":return fe(_,x,!1);case"m":return String(x);case"mm":return G.s(x,2,"0");case"s":return String(k.$s);case"ss":return G.s(k.$s,2,"0");case"SSS":return G.s(k.$ms,3,"0");case"Z":return R}return null}(ke)||R.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(K,k,P){var B,R=this,_=G.p(k),x=V(K),T=(x.utcOffset()-this.utcOffset())*n,W=this-x,U=function(){return G.m(R,x)};switch(_){case p:B=U()/12;break;case d:B=U();break;case f:B=U()/3;break;case u:B=(W-T)/6048e5;break;case l:B=(W-T)/864e5;break;case c:B=W/i;break;case s:B=W/n;break;case a:B=W/r;break;default:B=W}return P?B:G.a(B)},F.daysInMonth=function(){return this.endOf(d).$D},F.$locale=function(){return N[this.$L]},F.locale=function(K,k){if(!K)return this.$L;var P=this.clone(),B=H(K,k,!0);return B&&(P.$L=B),P},F.clone=function(){return G.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),Z=Y.prototype;return V.prototype=Z,[["$ms",o],["$s",a],["$m",s],["$H",c],["$W",l],["$M",d],["$y",p],["$D",m]].forEach(function($){Z[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),V.extend=function($,F){return $.$i||($(F,Y,V),$.$i=!0),V},V.locale=H,V.isDayjs=M,V.unix=function($){return V(1e3*$)},V.en=N[A],V.Ls=N,V.p={},V})})(tJ);var Twe=tJ.exports;const dt=ia(Twe);var rJ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(zu,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,o=/\d\d/,a=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,c={},l=function(y){return(y=+y)+(y>68?1900:2e3)},u=function(y){return function(v){this[y]=+v}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var E=v.match(/([+-]|\d\d)/g),b=60*E[1]+(+E[2]||0);return b===0?0:E[0]==="+"?-b:b}(y)}],f=function(y){var v=c[y];return v&&(v.indexOf?v:v.s.concat(v.f))},p=function(y,v){var E,b=c.meridiem;if(b){for(var S=1;S<=24;S+=1)if(y.indexOf(b(S,0,v))>-1){E=S>12;break}}else E=y===(v?"pm":"PM");return E},m={A:[s,function(y){this.afternoon=p(y,!1)}],a:[s,function(y){this.afternoon=p(y,!0)}],Q:[i,function(y){this.month=3*(y-1)+1}],S:[i,function(y){this.milliseconds=100*+y}],SS:[o,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[a,u("seconds")],ss:[a,u("seconds")],m:[a,u("minutes")],mm:[a,u("minutes")],H:[a,u("hours")],h:[a,u("hours")],HH:[a,u("hours")],hh:[a,u("hours")],D:[a,u("day")],DD:[o,u("day")],Do:[s,function(y){var v=c.ordinal,E=y.match(/\d+/);if(this.day=E[0],v)for(var b=1;b<=31;b+=1)v(b).replace(/\[|\]/g,"")===y&&(this.day=b)}],w:[a,u("week")],ww:[o,u("week")],M:[a,u("month")],MM:[o,u("month")],MMM:[s,function(y){var v=f("months"),E=(f("monthsShort")||v.map(function(b){return b.slice(0,3)})).indexOf(y)+1;if(E<1)throw new Error;this.month=E%12||E}],MMMM:[s,function(y){var v=f("months").indexOf(y)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,u("year")],YY:[o,function(y){this.year=l(y)}],YYYY:[/\d{4}/,u("year")],Z:d,ZZ:d};function g(y){var v,E;v=y,E=c&&c.formats;for(var b=(y=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(V,G,Y){var Z=Y&&Y.toUpperCase();return G||E[Y]||r[Y]||E[Z].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function($,F,K){return F||K.slice(1)})})).match(n),S=b.length,A=0;A<S;A+=1){var N=b[A],D=m[N],M=D&&D[0],H=D&&D[1];b[A]=H?{regex:M,parser:H}:N.replace(/^\[|\]$/g,"")}return function(V){for(var G={},Y=0,Z=0;Y<S;Y+=1){var $=b[Y];if(typeof $=="string")Z+=$.length;else{var F=$.regex,K=$.parser,k=V.slice(Z),P=F.exec(k)[0];K.call(G,P),V=V.replace(P,"")}}return function(B){var R=B.afternoon;if(R!==void 0){var _=B.hours;R?_<12&&(B.hours+=12):_===12&&(B.hours=0),delete B.afternoon}}(G),G}}return function(y,v,E){E.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(l=y.parseTwoDigitYear);var b=v.prototype,S=b.parse;b.parse=function(A){var N=A.date,D=A.utc,M=A.args;this.$u=D;var H=M[1];if(typeof H=="string"){var V=M[2]===!0,G=M[3]===!0,Y=V||G,Z=M[2];G&&(Z=M[2]),c=this.$locale(),!V&&Z&&(c=E.Ls[Z]),this.$d=function(k,P,B,R){try{if(["x","X"].indexOf(P)>-1)return new Date((P==="X"?1e3:1)*k);var _=g(P)(k),x=_.year,T=_.month,W=_.day,U=_.hours,X=_.minutes,ae=_.seconds,de=_.milliseconds,fe=_.zone,ke=_.week,Ve=new Date,Me=W||(x||T?1:Ve.getDate()),ot=x||Ve.getFullYear(),At=0;x&&!T||(At=T>0?T-1:Ve.getMonth());var et,Et=U||0,Ie=X||0,rt=ae||0,Be=de||0;return fe?new Date(Date.UTC(ot,At,Me,Et,Ie,rt,Be+60*fe.offset*1e3)):B?new Date(Date.UTC(ot,At,Me,Et,Ie,rt,Be)):(et=new Date(ot,At,Me,Et,Ie,rt,Be),ke&&(et=R(et).week(ke).toDate()),et)}catch{return new Date("")}}(N,H,D,E),this.init(),Z&&Z!==!0&&(this.$L=this.locale(Z).$L),Y&&N!=this.format(H)&&(this.$d=new Date("")),c={}}else if(H instanceof Array)for(var $=H.length,F=1;F<=$;F+=1){M[1]=H[F-1];var K=E.apply(this,M);if(K.isValid()){this.$d=K.$d,this.$L=K.$L,this.init();break}F===$&&(this.$d=new Date(""))}else S.call(this,A)}}})})(rJ);var Cwe=rJ.exports;const tc=ia(Cwe);dt.extend(tc);const Rwe="wss://hcompanion.onrender.com";var RE;const Iwe=async({userId:e})=>{RE=new WebSocket(Rwe),RE.onopen=()=>{console.log("connected to websocket"),RE.send(JSON.stringify({type:"register",clientId:e}))},RE.onmessage=t=>{const r=JSON.parse(t==null?void 0:t.data);if(r.type=="meetingReminder"){const n=dt().diff(dt(`${r.booking.startTime}`,"H:mm A"),"minutes");Math.abs(n)<=60&&re.fire(`Meeting in ${Math.abs(n)} minutes`,"","warning")}}};function KD(){const e=Hh(),{username:t,email:r,role:n,isLoggedIn:i}=oi(c=>c.user),o=oi(c=>c.patient);oi(c=>c.patient_alert),console.log(t);const a=async()=>{if(sessionStorage.getItem("token")){const c=await QX({token:sessionStorage.getItem("token")});if(c){const l=await eJ();await Iwe({userId:c._id}),e(Ao({username:c.username,email:c.email,role:c.role,isLoggedIn:!0})),e(NR({firstName:l.firstName,lastName:l.lastName,profileImage:l.profileImage,weight:l.weight,height:l.height,profileImage:l.profileImage}))}else Ao({}),NR({})}};C.useEffect(()=>{a()},[]);const s=en();return h.jsx("div",{className:"w-full h-[12vh]",children:h.jsxs("div",{className:"w-full h-[12vh] flex flex-row items-center mx-2 p-2 gap-4",children:[h.jsx("div",{className:"logo w-44 flex justify-center items-center  ",children:h.jsx("img",{src:"/logo.png",alt:""})}),h.jsx("div",{className:"items w-[50%] h-full",children:h.jsxs("div",{className:"w-full h-full flex flex-row gap-4 items-center p-5 ml-10 ",children:[h.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/home"),children:"Home"}),h.jsx("button",{className:"font-medium text-lg p-2 ",id:"id_navDoctors",onClick:()=>s("/patient/doctors"),children:"Find Doctors"}),h.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/medicines"),children:"Medicines"}),h.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/tests"),children:"tests"}),h.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/treatmentPlan"),children:"Treatment Plan"}),!1]})}),h.jsx("div",{className:"search w-[25%] h-full flex justify-center items-center",children:h.jsxs("div",{className:"w-full h-[70%] rounded-lg flex flex-row gap-2 ",children:[h.jsx("input",{type:"text",placeholder:"search",className:"border w-full h-full rounded-lg"}),h.jsx("div",{className:"h-full flex justify-center items-center bg-blue-200 p-2 rounded-lg",children:h.jsx("img",{src:"/icons/search.png",alt:"search icon",className:"h-[2em] w-10 mr-2 opacity-40 cursor-pointer"})})]})}),i?h.jsxs("div",{className:"loggedIn h-full flex justify-end w-[18%] gap-8 px-2 mr-2",children:[h.jsxs("div",{className:"h-full flex flex-col gap-2",children:[h.jsx("span",{className:"font-bold",children:`Hi, ${o.firstName}`}),h.jsx("button",{className:"p-2 border rounded-lg bg-emerald-500 p-2 font-bold ",onClick:()=>{sessionStorage.removeItem("token"),e(Ao({})),e(NR({}))},children:"log out"})]}),h.jsx("img",{src:o.profileImage,alt:"",className:"h-[100%] w-[28%] rounded-[50%] cursor-pointer",onClick:()=>{s("/patient/profile")}})]}):h.jsx("button",{type:"button",className:"h-[80%] ml-4 border rounded-[5%] bg-orange-500 p-2 font-bold ",id:"id_loginNav",onClick:()=>{s("/login")},children:"login / sign up"})]})})}mT.setAppElement("#root");function xwe(){const e=Hh();oi(c=>c.user);const[t,r]=C.useState(!1),[n,i]=C.useState("jjjjjjjj"),o=en(),a=qn({initialValues:{username:"",password:""},validationSchema:Xde,onSubmit:async(c,l)=>{const u=await gge(c);if(u){if(await re.fire({title:"Successfull",icon:"success",text:"you have been successfully logged in"}),await e(Ao({username:u.username,role:u.role,email:u.email,isLoggedIn:!0})),u.role=="2")return o("/pharmacy/home");if(u.role=="1")return o("/doctor");if(u.role=="3")return o("/laboratory");if(u.role=="4")return o("/admin");o("/")}}});C.useEffect(()=>{google.accounts.id.initialize({client_id:"981653324698-i9aagns1rnmvcudlrt3bmj87v802e737.apps.googleusercontent.com",callback:async l=>{const u=await vge({googleToken:l.credential});if(!u)await Awe(l);else{if(await re.fire({title:"Successfull",icon:"success",text:"you have been successfully logged in"}),e(Ao({username:u.username,role:u.role,email:u.email})),u.role=="2")return o("/pharmacy/home");if(u.role=="3")return o("/laboratory/home");o("/")}}}),google.accounts.id.renderButton(document.getElementById("id_google"),{theme:"filled_blue",size:"large",width:350,type:"standard"})},[]);const s=async()=>{try{const{value:c}=await re.fire({title:"forgot password",input:"email",showCancelButton:!0,inputLabel:"Enter email"});console.log(c),await i(c);const l=await Ege({email:c});if(c&&l){const{value:u}=await re.fire({title:"Enter Otp",input:"number",showCancelButton:!0,inputLabel:"Enter Otp"});u&&await _ge({email:c,otp:u})&&await r(!0)}}catch(c){console.log(`error at handle forgot password ${c}`)}};return h.jsxs("div",{className:"homePage w-full h-full",children:[h.jsx("div",{className:"header w-full h-[12vh] shadow-lg bg-white",children:h.jsx(KD,{})}),h.jsxs("div",{className:"flex flex-row w-screen h-screen",children:[t&&h.jsx(Nwe,{email:n,isOtpChecked:t,setisForgotPasswordChecked:r}),h.jsx("div",{className:"w-[40%] ",children:h.jsx("img",{src:"logo.png",alt:""})}),h.jsxs("div",{className:"w-[60%] mainContainer h-[90vh] mt-1  flex flex-col justify-start items-center text-emerald-300 gap-10 bg-sky-300 rounded-l-[5%]",children:[h.jsxs("form",{onSubmit:a.handleSubmit,className:"border w-[50%] rounded-[5%] p-20 flex flex-col gap-4 bg-white  border-emerald-300 shadow-lg shadow-emerald-500 mt-10",children:[h.jsx("div",{className:"flex justify-center",children:h.jsx("h1",{className:"text-4xl text-bold text-emerald-500 ",children:"LOGIN"})}),h.jsxs("div",{className:"flex flex-col gap-4 text-black",children:[h.jsx("input",{type:"text",name:"username",id:"id_username",onChange:a.handleChange,onBlur:a.handleBlur,className:"border p-2 rounded-lg text-center",placeholder:"email/username"}),h.jsx("p",{className:"text-red-500",children:a.touched.username&&a.errors.username&&a.errors.username}),h.jsx("input",{type:"password",name:"password",id:"id_password",onChange:a.handleChange,onBlur:a.handleBlur,className:"border p-2 rounded-lg text-center",placeholder:"password"}),h.jsx("p",{className:"text-red-500",children:a.touched.password&&a.errors.password&&a.errors.password})]}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("button",{id:"id_loginButton",className:"w-[full] h-[50%] border rounded-[5%] bg-orange-500 p-2",type:"submit",children:"login"}),h.jsxs("div",{className:"flex flex-row gap-10 h-[50%] justify-center",children:[h.jsx("h2",{className:"text-blue-400",children:"don't have account...?"}),h.jsx("button",{type:"button",onClick:()=>{o("/register")},children:"sign up"})]}),h.jsx("button",{type:"button",onClick:s,className:"w-[full] h-[50%] border rounded-[5%] bg-blue-500 p-2",children:"forgot password"})]})]}),h.jsx("div",{className:"",children:h.jsx("button",{id:"id_google"})})]})]})]})}const Awe=async e=>{const{value:t}=await re.fire({input:"select",showCancelButton:!0,inputPlaceholder:"select role to proceed",title:"Role",inputOptions:{0:"patient",1:"doctor",2:"pharmacy",3:"laboratory"}});t&&await yge({googleToken:e.credential,role:t})&&re.fire({title:"Account Creation Successfull",icon:"success",text:"Account has been created"})};function Nwe(e){const[t,r]=C.useState(!1),n=async()=>r(!1),i=qn({initialValues:{password:"",confirmPassword:""},validationSchema:nq,onSubmit:async(o,a)=>{await bge({password:o.password,email:e.email})&&re.fire({icon:"success",html:"<b>Password has been reset</b>"}).then(async()=>{await n(),await e.setisForgotPasswordChecked(!1)})}});return C.useState(()=>{e.isOtpChecked&&r(!0),console.log("hiiiii")},[]),h.jsx("div",{className:"fixed w-screen h-screen",children:h.jsxs(mT,{isOpen:t,onRequestClose:n,overlayClassName:"fixed bg-black bg-opacity-50 inset-0 flex justify-center items-center",className:"bg-white opacity-100 mx-w-[60vw] flex flex-col gap-10 p-10 rounded-lg justify-center items-center",children:[h.jsx("h1",{className:"text-center font-bold",children:"Verification"}),h.jsxs("h3",{children:["Otp has been generated and sent to the email ",iq(e.email)]}),h.jsxs("form",{onSubmit:i.handleSubmit,className:"w-full flex flex-col gap-10 justify-center items-center",children:[h.jsxs("div",{className:"flex flex-col gap-10 w-full",children:[h.jsx(He,{name:"password",type:"password",variant:"filled",label:"Enter the password",onChange:i.handleChange,onBlur:i.handleBlur,className:"w-[40vw]",...i.touched.password&&(i.errors.password?{color:"error",helperText:`${i.errors.password}`}:{color:"success"})}),h.jsx(He,{name:"confirmPassword",type:"password",variant:"filled",label:"Enter the confirm password",onChange:i.handleChange,onBlur:i.handleBlur,className:"w-[40vw]",...i.touched.confirmPassword&&(i.errors.confirmPassword?{color:"error",helperText:`${i.errors.confirmPassword}`}:{color:"success"})})]}),h.jsx("button",{type:"submit",className:"w-full border rounded-[5%] bg-orange-500 p-2",children:"Submit"})]})]})})}const Owe=Ii().shape({username:jt().required("Username is Required"),email:jt().email("Provide valid email").required("Email is reuired"),password:jt().required("Password is required").min(8,"must contain atleast 8 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirmPassword:jt().required("confirm password is required").oneOf([n9("password"),null],"Password and Confirm password are not matching"),phone:jt().matches(/^[1-9][0-9]{9}$/,"Must be a valid number").required("Phone number is required"),role:jt().required("Required")}),gv="https://hcompanion.onrender.com/api";async function kwe({otp:e,email:t}){try{const r=await be.post(`${gv}/user/register/createPatient`,{otp:e,email:t},{withCredentials:!0});return console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&re.fire("Otp has been expired"),console.log(r)}}async function Pwe({otp:e,email:t}){try{const r=await be.post(`${gv}/user/register/createDoctor`,{otp:e,email:t},{withCredentials:!0});return console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&re.fire("Otp has been expired"),console.log(r)}}async function Dwe({otp:e,email:t}){try{const r=await be.post(`${gv}/user/register/createPharmacy`,{otp:e,email:t},{withCredentials:!0});return console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&re.fire("Otp has been expired"),console.log(r)}}async function Lwe({otp:e,email:t}){try{console.log("entered Laboratory");const r=await be.post(`${gv}/user/register/createLaboratory`,{otp:e,email:t},{withCredentials:!0});return await console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&re.fire("Otp has been expired"),console.log(r)}}async function Mwe(e){try{const t=await be.post(`${gv}/user/register/otp`,e,{withCredentials:!0});return console.log(t.data),t.data.info}catch(t){t.response.status=="401"?re.fire("User Already exist"):t.response.status=="404"?re.fire({icon:"error",title:"Mail couldn't be send",text:"Some error occured while sending otp to mail"}):re.fire({icon:"error",title:"Server Issue",text:"Some error Occurered in the server side , please try again..!"})}}const jwe=Ii().shape({email:jt().required("email required"),otp:jt().matches(/^[0-9]{6}$/,"Must be valid").required("Otp required")});mT.setAppElement("#root");function Uwe(){const[e,t]=C.useState(!1),[r,n]=C.useState(!1),i=qn({initialValues:{username:"",email:"",password:"",confirmPassword:"",phone:"",role:""},validationSchema:Owe,onSubmit:async(o,a)=>{await Mwe(o)&&await t(!0)}});return C.useEffect(()=>{r&&((async()=>await i.reset)(),n(!1))},[r]),h.jsxs("div",{className:"homePage w-full h-full",children:[h.jsx("div",{className:"header w-full h-[12vh] shadow-lg",children:h.jsx(KD,{})}),h.jsx("div",{className:"page flex w-screen h-screen",children:h.jsxs("div",{className:"flex flex-row w-screen gap-[30vh] m-10",children:[e&&h.jsx(Fwe,{isOtpGenerated:!0,setisOtpGenerated:t,email:i.values.email,role:i.values.role,setIsCreated:n}),h.jsx("div",{className:"w-[40%] ",children:h.jsx("img",{src:"logo.png",alt:""})}),h.jsxs("form",{onSubmit:i.handleSubmit,className:"registerDiv w-[40%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[h.jsx("div",{className:"flex items-center  justify-center",children:h.jsx("h2",{className:"text-4xl  text-emerald-500 ",children:"Sign Up"})}),h.jsxs("div",{className:"flex flex-row gap-4",children:[h.jsxs("select",{name:"role",onChange:i.handleChange,onBlur:i.handleBlur,id:"id_role",className:"font-bold text-black rounded-lg",children:[h.jsx("option",{className:"",children:"Select a role"}),h.jsx("option",{value:"0",children:"Patient"}),h.jsx("option",{value:"1",children:"Doctor"}),h.jsx("option",{value:"2",children:"Pharmacy"}),h.jsx("option",{value:"3",children:"Laboratory"}),h.jsx("option",{value:"4",children:"Admin"})]}),h.jsx("span",{className:"text-red-500",children:i.touched.role&&i.errors.role&&`* ${i.errors.role}`})]}),h.jsxs("div",{className:"inputSec flex flex-col gap-5",children:[h.jsx(He,{name:"username",onChange:i.handleChange,variant:"filled",label:"username",onBlur:i.handleBlur,...i.touched.username&&(i.errors.username?{color:"error",helperText:`${i.errors.username}`}:{color:"success"})}),h.jsx(He,{name:"email",onChange:i.handleChange,variant:"filled",label:"email",onBlur:i.handleBlur,...i.touched.email&&(i.errors.email?{color:"error",helperText:`${i.errors.email}`}:{color:"success"})}),h.jsx(He,{name:"password",type:"password",onChange:i.handleChange,variant:"filled",label:"Password",onBlur:i.handleBlur,...i.touched.password&&(i.errors.password?{color:"error",helperText:`${i.errors.password}`}:{color:"success"})}),h.jsx(He,{name:"confirmPassword",type:"password",variant:"filled",onChange:i.handleChange,label:"Confirm Password",onBlur:i.handleBlur,...i.touched.confirmPassword&&(i.errors.confirmPassword?{color:"error",helperText:`${i.errors.confirmPassword}`}:{color:"success"})}),h.jsx(He,{name:"phone",variant:"filled",onChange:i.handleChange,label:"phone",onBlur:i.handleBlur,...i.touched.phone&&(i.errors.phone?{color:"error",helperText:`${i.errors.phone}`}:{color:"success"})})]}),h.jsx("button",{type:"submit",className:"w-[full] border rounded-[5%] bg-orange-500 p-2 ",children:"sign up"})]})]})})]})}function Fwe(e){const[t,r]=C.useState(!1),n=en(),i=()=>{r(!1),e.setisOtpGenerated(!1)},o=qn({initialValues:{email:e.email,otp:""},validationSchema:jwe,onSubmit:async(a,s)=>{var c;e.role=="0"?c=await kwe(a):e.role=="1"?c=await Pwe(a):e.role=="2"?c=await Dwe(a):e.role=="3"&&(c=await Lwe(a)),c&&(i(),re.fire({title:"Registeration Successfull",text:"You have successfully Registered",icon:"success"}).then(()=>{n("/login")}))}});return C.useEffect(()=>{e.isOtpGenerated&&r(!0)},[]),h.jsx("div",{className:"fixed w-screen h-screen",children:h.jsxs(mT,{isOpen:t,onRequestClose:i,overlayClassName:"fixed bg-black bg-opacity-50 inset-0 flex justify-center items-center",className:"bg-white opacity-100 mx-w-[60vw] flex flex-col gap-10 p-10 rounded-lg justify-center items-center ",children:[h.jsx("h1",{className:"text-center font-bold",children:"Verification"}),h.jsxs("h3",{children:["Otp has been generated and sent to the email ",iq(e.email)]}),h.jsxs("form",{onSubmit:o.handleSubmit,className:"w-full flex flex-col gap-10 justify-center items-center",children:[h.jsx("div",{className:"flex flex-row gap-10 w-full",children:h.jsx(He,{name:"otp",variant:"filled",label:"Enter Otp",onChange:o.handleChange,onBlur:o.handleBlur,className:"w-[40vw]",...o.touched.otp&&(o.errors.otp?{color:"error",helperText:`${o.errors.otp}`}:{color:"success"})})}),h.jsx("button",{type:"submit",className:"w-full border rounded-[5%] bg-orange-500 p-2",children:"Submit"})]})]})})}var nJ={exports:{}},OR={exports:{}},kr={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var kR,k4;function Vwe(){if(k4)return kR;k4=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function i(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var a={},s=0;s<10;s++)a["_"+String.fromCharCode(s)]=s;var c=Object.getOwnPropertyNames(a).map(function(u){return a[u]});if(c.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(u){l[u]=u}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return kR=i()?Object.assign:function(o,a){for(var s,c=n(o),l,u=1;u<arguments.length;u++){s=Object(arguments[u]);for(var d in s)t.call(s,d)&&(c[d]=s[d]);if(e){l=e(s);for(var f=0;f<l.length;f++)r.call(s,l[f])&&(c[l[f]]=s[l[f]])}}return c},kR}/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P4;function Bwe(){if(P4)return kr;P4=1;var e=Vwe(),t=typeof Symbol=="function"&&Symbol.for,r=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,o=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,s=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.forward_ref"):60112,u=t?Symbol.for("react.suspense"):60113,d=t?Symbol.for("react.memo"):60115,f=t?Symbol.for("react.lazy"):60116,p=typeof Symbol=="function"&&Symbol.iterator;function m(U){for(var X="https://reactjs.org/docs/error-decoder.html?invariant="+U,ae=1;ae<arguments.length;ae++)X+="&args[]="+encodeURIComponent(arguments[ae]);return"Minified React error #"+U+"; visit "+X+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function v(U,X,ae){this.props=U,this.context=X,this.refs=y,this.updater=ae||g}v.prototype.isReactComponent={},v.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error(m(85));this.updater.enqueueSetState(this,U,X,"setState")},v.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function E(){}E.prototype=v.prototype;function b(U,X,ae){this.props=U,this.context=X,this.refs=y,this.updater=ae||g}var S=b.prototype=new E;S.constructor=b,e(S,v.prototype),S.isPureReactComponent=!0;var A={current:null},N=Object.prototype.hasOwnProperty,D={key:!0,ref:!0,__self:!0,__source:!0};function M(U,X,ae){var de,fe={},ke=null,Ve=null;if(X!=null)for(de in X.ref!==void 0&&(Ve=X.ref),X.key!==void 0&&(ke=""+X.key),X)N.call(X,de)&&!D.hasOwnProperty(de)&&(fe[de]=X[de]);var Me=arguments.length-2;if(Me===1)fe.children=ae;else if(1<Me){for(var ot=Array(Me),At=0;At<Me;At++)ot[At]=arguments[At+2];fe.children=ot}if(U&&U.defaultProps)for(de in Me=U.defaultProps,Me)fe[de]===void 0&&(fe[de]=Me[de]);return{$$typeof:r,type:U,key:ke,ref:Ve,props:fe,_owner:A.current}}function H(U,X){return{$$typeof:r,type:U.type,key:X,ref:U.ref,props:U.props,_owner:U._owner}}function V(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}function G(U){var X={"=":"=0",":":"=2"};return"$"+(""+U).replace(/[=:]/g,function(ae){return X[ae]})}var Y=/\/+/g,Z=[];function $(U,X,ae,de){if(Z.length){var fe=Z.pop();return fe.result=U,fe.keyPrefix=X,fe.func=ae,fe.context=de,fe.count=0,fe}return{result:U,keyPrefix:X,func:ae,context:de,count:0}}function F(U){U.result=null,U.keyPrefix=null,U.func=null,U.context=null,U.count=0,10>Z.length&&Z.push(U)}function K(U,X,ae,de){var fe=typeof U;(fe==="undefined"||fe==="boolean")&&(U=null);var ke=!1;if(U===null)ke=!0;else switch(fe){case"string":case"number":ke=!0;break;case"object":switch(U.$$typeof){case r:case n:ke=!0}}if(ke)return ae(de,U,X===""?"."+P(U,0):X),1;if(ke=0,X=X===""?".":X+":",Array.isArray(U))for(var Ve=0;Ve<U.length;Ve++){fe=U[Ve];var Me=X+P(fe,Ve);ke+=K(fe,Me,ae,de)}else if(U===null||typeof U!="object"?Me=null:(Me=p&&U[p]||U["@@iterator"],Me=typeof Me=="function"?Me:null),typeof Me=="function")for(U=Me.call(U),Ve=0;!(fe=U.next()).done;)fe=fe.value,Me=X+P(fe,Ve++),ke+=K(fe,Me,ae,de);else if(fe==="object")throw ae=""+U,Error(m(31,ae==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ae,""));return ke}function k(U,X,ae){return U==null?0:K(U,"",X,ae)}function P(U,X){return typeof U=="object"&&U!==null&&U.key!=null?G(U.key):X.toString(36)}function B(U,X){U.func.call(U.context,X,U.count++)}function R(U,X,ae){var de=U.result,fe=U.keyPrefix;U=U.func.call(U.context,X,U.count++),Array.isArray(U)?_(U,de,ae,function(ke){return ke}):U!=null&&(V(U)&&(U=H(U,fe+(!U.key||X&&X.key===U.key?"":(""+U.key).replace(Y,"$&/")+"/")+ae)),de.push(U))}function _(U,X,ae,de,fe){var ke="";ae!=null&&(ke=(""+ae).replace(Y,"$&/")+"/"),X=$(X,ke,de,fe),k(U,R,X),F(X)}var x={current:null};function T(){var U=x.current;if(U===null)throw Error(m(321));return U}var W={ReactCurrentDispatcher:x,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:A,IsSomeRendererActing:{current:!1},assign:e};return kr.Children={map:function(U,X,ae){if(U==null)return U;var de=[];return _(U,de,null,X,ae),de},forEach:function(U,X,ae){if(U==null)return U;X=$(null,null,X,ae),k(U,B,X),F(X)},count:function(U){return k(U,function(){return null},null)},toArray:function(U){var X=[];return _(U,X,null,function(ae){return ae}),X},only:function(U){if(!V(U))throw Error(m(143));return U}},kr.Component=v,kr.Fragment=i,kr.Profiler=a,kr.PureComponent=b,kr.StrictMode=o,kr.Suspense=u,kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,kr.cloneElement=function(U,X,ae){if(U==null)throw Error(m(267,U));var de=e({},U.props),fe=U.key,ke=U.ref,Ve=U._owner;if(X!=null){if(X.ref!==void 0&&(ke=X.ref,Ve=A.current),X.key!==void 0&&(fe=""+X.key),U.type&&U.type.defaultProps)var Me=U.type.defaultProps;for(ot in X)N.call(X,ot)&&!D.hasOwnProperty(ot)&&(de[ot]=X[ot]===void 0&&Me!==void 0?Me[ot]:X[ot])}var ot=arguments.length-2;if(ot===1)de.children=ae;else if(1<ot){Me=Array(ot);for(var At=0;At<ot;At++)Me[At]=arguments[At+2];de.children=Me}return{$$typeof:r,type:U.type,key:fe,ref:ke,props:de,_owner:Ve}},kr.createContext=function(U,X){return X===void 0&&(X=null),U={$$typeof:c,_calculateChangedBits:X,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider={$$typeof:s,_context:U},U.Consumer=U},kr.createElement=M,kr.createFactory=function(U){var X=M.bind(null,U);return X.type=U,X},kr.createRef=function(){return{current:null}},kr.forwardRef=function(U){return{$$typeof:l,render:U}},kr.isValidElement=V,kr.lazy=function(U){return{$$typeof:f,_ctor:U,_status:-1,_result:null}},kr.memo=function(U,X){return{$$typeof:d,type:U,compare:X===void 0?null:X}},kr.useCallback=function(U,X){return T().useCallback(U,X)},kr.useContext=function(U,X){return T().useContext(U,X)},kr.useDebugValue=function(){},kr.useEffect=function(U,X){return T().useEffect(U,X)},kr.useImperativeHandle=function(U,X,ae){return T().useImperativeHandle(U,X,ae)},kr.useLayoutEffect=function(U,X){return T().useLayoutEffect(U,X)},kr.useMemo=function(U,X){return T().useMemo(U,X)},kr.useReducer=function(U,X,ae){return T().useReducer(U,X,ae)},kr.useRef=function(U){return T().useRef(U)},kr.useState=function(U){return T().useState(U)},kr.version="16.14.0",kr}var D4;function $we(){return D4||(D4=1,OR.exports=Bwe()),OR.exports}var iJ={exports:{}};(function(e,t){(function(r){e.exports=r(null)})(function r(n){var i=/^\0+/g,o=/[\0\r\f]/g,a=/: */g,s=/zoo|gra/,c=/([,: ])(transform)/g,l=/,+\s*(?![^(]*[)])/g,u=/ +\s*(?![^(]*[)])/g,d=/ *[\0] */g,f=/,\r+?/g,p=/([\t\r\n ])*\f?&/g,m=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,g=/\W+/g,y=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,E=/:(read-only)/g,b=/\s+(?=[{\];=:>])/g,S=/([[}=:>])\s+/g,A=/(\{[^{]+?);(?=\})/g,N=/\s{2,}/g,D=/([^\(])(:+) */g,M=/[svh]\w+-[tblr]{2}/,H=/\(\s*(.*)\s*\)/g,V=/([\s\S]*?);/g,G=/-self|flex-/g,Y=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Z=/stretch|:\s*\w+\-(?:conte|avail)/,$=/([^-])(image-set\()/,F="-webkit-",K="-moz-",k="-ms-",P=59,B=125,R=123,_=40,x=41,T=91,W=93,U=10,X=13,ae=9,de=64,fe=32,ke=38,Ve=45,Me=95,ot=42,At=44,et=58,Et=39,Ie=34,rt=47,Be=62,Qe=43,Ke=126,te=0,Ae=12,Ue=11,Ge=107,ne=109,ge=115,Xe=112,lt=111,qt=105,Un=99,Sn=100,mi=112,Tn=1,Ai=1,yn=0,gi=1,Cn=1,Zm=1,$v=0,qc=0,fd=0,Zh=[],eg=[],Ha=0,ef=null,_C=-2,Hv=-1,bC=0,zv=1,Gv=2,wC=3,tg=0,Ul=1,tf="",Is="",pd="";function rf(kt,ht,ct,$t,qe){for(var br,le,ar=0,rr=0,vn=0,Qt=0,Fn=0,Wr=0,sr=0,yi=0,to=0,oc=0,ro=0,la=0,md=0,za=0,ur=0,ci=0,Yc=0,Bl=0,Ur=0,Rt=ct.length,Xr=Rt-1,li="",Ut="",j="",z="",ee="",Re="";ur<Rt;){if(sr=ct.charCodeAt(ur),ur===Xr&&rr+Qt+vn+ar!==0&&(rr!==0&&(sr=rr===rt?U:rt),Qt=vn=ar=0,Rt++,Xr++),rr+Qt+vn+ar===0){if(ur===Xr&&(ci>0&&(Ut=Ut.replace(o,"")),Ut.trim().length>0)){switch(sr){case fe:case ae:case P:case X:case U:break;default:Ut+=ct.charAt(ur)}sr=P}if(Yc===1)switch(sr){case R:case B:case P:case Ie:case Et:case _:case x:case At:Yc=0;case ae:case X:case U:case fe:break;default:for(Yc=0,Ur=ur,Fn=sr,ur--,sr=P;Ur<Rt;)switch(ct.charCodeAt(Ur++)){case U:case X:case P:++ur,sr=Fn,Ur=Rt;break;case et:ci>0&&(++ur,sr=Fn);case R:Ur=Rt}}switch(sr){case R:for(Fn=(Ut=Ut.trim()).charCodeAt(0),ro=1,Ur=++ur;ur<Rt;){switch(sr=ct.charCodeAt(ur)){case R:ro++;break;case B:ro--;break;case rt:switch(Wr=ct.charCodeAt(ur+1)){case ot:case rt:ur=qv(Wr,ur,Xr,ct)}break;case T:sr++;case _:sr++;case Ie:case Et:for(;ur++<Xr&&ct.charCodeAt(ur)!==sr;);}if(ro===0)break;ur++}switch(j=ct.substring(Ur,ur),Fn===te&&(Fn=(Ut=Ut.replace(i,"").trim()).charCodeAt(0)),Fn){case de:switch(ci>0&&(Ut=Ut.replace(o,"")),Wr=Ut.charCodeAt(1)){case Sn:case ne:case ge:case Ve:br=ht;break;default:br=Zh}if(Ur=(j=rf(ht,br,j,Wr,qe+1)).length,fd>0&&Ur===0&&(Ur=Ut.length),Ha>0&&(br=rg(Zh,Ut,Bl),le=Fl(wC,j,br,ht,Ai,Tn,Ur,Wr,qe,$t),Ut=br.join(""),le!==void 0&&(Ur=(j=le.trim()).length)===0&&(Wr=0,j="")),Ur>0)switch(Wr){case ge:Ut=Ut.replace(H,Kv);case Sn:case ne:case Ve:j=Ut+"{"+j+"}";break;case Ge:j=(Ut=Ut.replace(y,"$1 $2"+(Ul>0?tf:"")))+"{"+j+"}",Cn===1||Cn===2&&of("@"+j,3)?j="@"+F+j+"@"+j:j="@"+j;break;default:j=Ut+j,$t===mi&&(z+=j,j="")}else j="";break;default:j=rf(ht,rg(ht,Ut,Bl),j,$t,qe+1)}ee+=j,la=0,Yc=0,za=0,ci=0,Bl=0,md=0,Ut="",j="",sr=ct.charCodeAt(++ur);break;case B:case P:if((Ur=(Ut=(ci>0?Ut.replace(o,""):Ut).trim()).length)>1)switch(za===0&&((Fn=Ut.charCodeAt(0))===Ve||Fn>96&&Fn<123)&&(Ur=(Ut=Ut.replace(" ",":")).length),Ha>0&&(le=Fl(zv,Ut,ht,kt,Ai,Tn,z.length,$t,qe,$t))!==void 0&&(Ur=(Ut=le.trim()).length)===0&&(Ut="\0\0"),Fn=Ut.charCodeAt(0),Wr=Ut.charCodeAt(1),Fn){case te:break;case de:if(Wr===qt||Wr===Un){Re+=Ut+ct.charAt(ur);break}default:if(Ut.charCodeAt(Ur-1)===et)break;z+=nf(Ut,Fn,Wr,Ut.charCodeAt(2))}la=0,Yc=0,za=0,ci=0,Bl=0,Ut="",sr=ct.charCodeAt(++ur)}}switch(sr){case X:case U:if(rr+Qt+vn+ar+qc===0)switch(oc){case x:case Et:case Ie:case de:case Ke:case Be:case ot:case Qe:case rt:case Ve:case et:case At:case P:case R:case B:break;default:za>0&&(Yc=1)}rr===rt?rr=0:gi+la===0&&$t!==Ge&&Ut.length>0&&(ci=1,Ut+="\0"),Ha*tg>0&&Fl(bC,Ut,ht,kt,Ai,Tn,z.length,$t,qe,$t),Tn=1,Ai++;break;case P:case B:if(rr+Qt+vn+ar===0){Tn++;break}default:switch(Tn++,li=ct.charAt(ur),sr){case ae:case fe:if(Qt+ar+rr===0)switch(yi){case At:case et:case ae:case fe:li="";break;default:sr!==fe&&(li=" ")}break;case te:li="\\0";break;case Ae:li="\\f";break;case Ue:li="\\v";break;case ke:Qt+rr+ar===0&&gi>0&&(Bl=1,ci=1,li="\f"+li);break;case 108:if(Qt+rr+ar+yn===0&&za>0)switch(ur-za){case 2:yi===Xe&&ct.charCodeAt(ur-3)===et&&(yn=yi);case 8:to===lt&&(yn=to)}break;case et:Qt+rr+ar===0&&(za=ur);break;case At:rr+vn+Qt+ar===0&&(ci=1,li+="\r");break;case Ie:case Et:rr===0&&(Qt=Qt===sr?0:Qt===0?sr:Qt);break;case T:Qt+rr+vn===0&&ar++;break;case W:Qt+rr+vn===0&&ar--;break;case x:Qt+rr+ar===0&&vn--;break;case _:if(Qt+rr+ar===0){if(la===0)switch(2*yi+3*to){case 533:break;default:ro=0,la=1}vn++}break;case de:rr+vn+Qt+ar+za+md===0&&(md=1);break;case ot:case rt:if(Qt+ar+vn>0)break;switch(rr){case 0:switch(2*sr+3*ct.charCodeAt(ur+1)){case 235:rr=rt;break;case 220:Ur=ur,rr=ot}break;case ot:sr===rt&&yi===ot&&Ur+2!==ur&&(ct.charCodeAt(Ur+2)===33&&(z+=ct.substring(Ur,ur+1)),li="",rr=0)}}if(rr===0){if(gi+Qt+ar+md===0&&$t!==Ge&&sr!==P)switch(sr){case At:case Ke:case Be:case Qe:case x:case _:if(la===0){switch(yi){case ae:case fe:case U:case X:li+="\0";break;default:li="\0"+li+(sr===At?"":"\0")}ci=1}else switch(sr){case _:za+7===ur&&yi===108&&(za=0),la=++ro;break;case x:(la=--ro)==0&&(ci=1,li+="\0")}break;case ae:case fe:switch(yi){case te:case R:case B:case P:case At:case Ae:case ae:case fe:case U:case X:break;default:la===0&&(ci=1,li+="\0")}}Ut+=li,sr!==fe&&sr!==ae&&(oc=sr)}}to=yi,yi=sr,ur++}if(Ur=z.length,fd>0&&Ur===0&&ee.length===0&&ht[0].length!==0&&($t!==ne||ht.length===1&&(gi>0?Is:pd)===ht[0])&&(Ur=ht.join(",").length+2),Ur>0){if(br=gi===0&&$t!==Ge?function(Ye){for(var Ee,ie,nt=0,Pt=Ye.length,Te=Array(Pt);nt<Pt;++nt){for(var je=Ye[nt].split(d),ze="",Je=0,mt=0,Ot=0,Tt=0,Rn=je.length;Je<Rn;++Je)if(!((mt=(ie=je[Je]).length)===0&&Rn>1)){if(Ot=ze.charCodeAt(ze.length-1),Tt=ie.charCodeAt(0),Ee="",Je!==0)switch(Ot){case ot:case Ke:case Be:case Qe:case fe:case _:break;default:Ee=" "}switch(Tt){case ke:ie=Ee+Is;case Ke:case Be:case Qe:case fe:case x:case _:break;case T:ie=Ee+ie+Is;break;case et:switch(2*ie.charCodeAt(1)+3*ie.charCodeAt(2)){case 530:if(Zm>0){ie=Ee+ie.substring(8,mt-1);break}default:(Je<1||je[Je-1].length<1)&&(ie=Ee+Is+ie)}break;case At:Ee="";default:mt>1&&ie.indexOf(":")>0?ie=Ee+ie.replace(D,"$1"+Is+"$2"):ie=Ee+ie+Is}ze+=ie}Te[nt]=ze.replace(o,"").trim()}return Te}(ht):ht,Ha>0&&(le=Fl(Gv,z,br,kt,Ai,Tn,Ur,$t,qe,$t))!==void 0&&(z=le).length===0)return Re+z+ee;if(z=br.join(",")+"{"+z+"}",Cn*yn!=0){switch(Cn===2&&!of(z,2)&&(yn=0),yn){case lt:z=z.replace(E,":"+K+"$1")+z;break;case Xe:z=z.replace(v,"::"+F+"input-$1")+z.replace(v,"::"+K+"$1")+z.replace(v,":"+k+"input-$1")+z}yn=0}}return Re+z+ee}function rg(kt,ht,ct){var $t=ht.trim().split(f),qe=$t,br=$t.length,le=kt.length;switch(le){case 0:case 1:for(var ar=0,rr=le===0?"":kt[0]+" ";ar<br;++ar)qe[ar]=Wv(rr,qe[ar],ct,le).trim();break;default:ar=0;var vn=0;for(qe=[];ar<br;++ar)for(var Qt=0;Qt<le;++Qt)qe[vn++]=Wv(kt[Qt]+" ",$t[ar],ct,le).trim()}return qe}function Wv(kt,ht,ct,$t){var qe=ht,br=qe.charCodeAt(0);switch(br<33&&(br=(qe=qe.trim()).charCodeAt(0)),br){case ke:switch(gi+$t){case 0:case 1:if(kt.trim().length===0)break;default:return qe.replace(p,"$1"+kt.trim())}break;case et:switch(qe.charCodeAt(1)){case 103:if(Zm>0&&gi>0)return qe.replace(m,"$1").replace(p,"$1"+pd);break;default:return kt.trim()+qe.replace(p,"$1"+kt.trim())}default:if(ct*gi>0&&qe.indexOf("\f")>0)return qe.replace(p,(kt.charCodeAt(0)===et?"":"$1")+kt.trim())}return kt+qe}function nf(kt,ht,ct,$t){var qe,br=0,le=kt+";",ar=2*ht+3*ct+4*$t;if(ar===944)return function(rr){var vn=rr.length,Qt=rr.indexOf(":",9)+1,Fn=rr.substring(0,Qt).trim(),Wr=rr.substring(Qt,vn-1).trim();switch(rr.charCodeAt(9)*Ul){case 0:break;case Ve:if(rr.charCodeAt(10)!==110)break;default:for(var sr=Wr.split((Wr="",l)),yi=0,Qt=0,vn=sr.length;yi<vn;Qt=0,++yi){for(var to=sr[yi],oc=to.split(u);to=oc[Qt];){var ro=to.charCodeAt(0);if(Ul===1&&(ro>de&&ro<90||ro>96&&ro<123||ro===Me||ro===Ve&&to.charCodeAt(1)!==Ve))switch(isNaN(parseFloat(to))+(to.indexOf("(")!==-1)){case 1:switch(to){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:to+=tf}}oc[Qt++]=to}Wr+=(yi===0?"":",")+oc.join(" ")}}return Wr=Fn+Wr+";",Cn===1||Cn===2&&of(Wr,1)?F+Wr+Wr:Wr}(le);if(Cn===0||Cn===2&&!of(le,1))return le;switch(ar){case 1015:return le.charCodeAt(10)===97?F+le+le:le;case 951:return le.charCodeAt(3)===116?F+le+le:le;case 963:return le.charCodeAt(5)===110?F+le+le:le;case 1009:if(le.charCodeAt(4)!==100)break;case 969:case 942:return F+le+le;case 978:return F+le+K+le+le;case 1019:case 983:return F+le+K+le+k+le+le;case 883:return le.charCodeAt(8)===Ve?F+le+le:le.indexOf("image-set(",11)>0?le.replace($,"$1"+F+"$2")+le:le;case 932:if(le.charCodeAt(4)===Ve)switch(le.charCodeAt(5)){case 103:return F+"box-"+le.replace("-grow","")+F+le+k+le.replace("grow","positive")+le;case 115:return F+le+k+le.replace("shrink","negative")+le;case 98:return F+le+k+le.replace("basis","preferred-size")+le}return F+le+k+le+le;case 964:return F+le+k+"flex-"+le+le;case 1023:if(le.charCodeAt(8)!==99)break;return qe=le.substring(le.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),F+"box-pack"+qe+F+le+k+"flex-pack"+qe+le;case 1005:return s.test(le)?le.replace(a,":"+F)+le.replace(a,":"+K)+le:le;case 1e3:switch(br=(qe=le.substring(13).trim()).indexOf("-")+1,qe.charCodeAt(0)+qe.charCodeAt(br)){case 226:qe=le.replace(M,"tb");break;case 232:qe=le.replace(M,"tb-rl");break;case 220:qe=le.replace(M,"lr");break;default:return le}return F+le+k+qe+le;case 1017:if(le.indexOf("sticky",9)===-1)return le;case 975:switch(br=(le=kt).length-10,ar=(qe=(le.charCodeAt(br)===33?le.substring(0,br):le).substring(kt.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|qe.charCodeAt(7))){case 203:if(qe.charCodeAt(8)<111)break;case 115:le=le.replace(qe,F+qe)+";"+le;break;case 207:case 102:le=le.replace(qe,F+(ar>102?"inline-":"")+"box")+";"+le.replace(qe,F+qe)+";"+le.replace(qe,k+qe+"box")+";"+le}return le+";";case 938:if(le.charCodeAt(5)===Ve)switch(le.charCodeAt(6)){case 105:return qe=le.replace("-items",""),F+le+F+"box-"+qe+k+"flex-"+qe+le;case 115:return F+le+k+"flex-item-"+le.replace(G,"")+le;default:return F+le+k+"flex-line-pack"+le.replace("align-content","").replace(G,"")+le}break;case 973:case 989:if(le.charCodeAt(3)!==Ve||le.charCodeAt(4)===122)break;case 931:case 953:if(Z.test(kt)===!0)return(qe=kt.substring(kt.indexOf(":")+1)).charCodeAt(0)===115?nf(kt.replace("stretch","fill-available"),ht,ct,$t).replace(":fill-available",":stretch"):le.replace(qe,F+qe)+le.replace(qe,K+qe.replace("fill-",""))+le;break;case 962:if(le=F+le+(le.charCodeAt(5)===102?k+le:"")+le,ct+$t===211&&le.charCodeAt(13)===105&&le.indexOf("transform",10)>0)return le.substring(0,le.indexOf(";",27)+1).replace(c,"$1"+F+"$2")+le}return le}function of(kt,ht){var ct=kt.indexOf(ht===1?":":"{"),$t=kt.substring(0,ht!==3?ct:10),qe=kt.substring(ct+1,kt.length-1);return ef(ht!==2?$t:$t.replace(Y,"$1"),qe,ht)}function Kv(kt,ht){var ct=nf(ht,ht.charCodeAt(0),ht.charCodeAt(1),ht.charCodeAt(2));return ct!==ht+";"?ct.replace(V," or ($1)").substring(4):"("+ht+")"}function Fl(kt,ht,ct,$t,qe,br,le,ar,rr,vn){for(var Qt,Fn=0,Wr=ht;Fn<Ha;++Fn)switch(Qt=eg[Fn].call(Vl,kt,Wr,ct,$t,qe,br,le,ar,rr,vn)){case void 0:case!1:case!0:case null:break;default:Wr=Qt}if(Wr!==ht)return Wr}function qv(kt,ht,ct,$t){for(var qe=ht+1;qe<ct;++qe)switch($t.charCodeAt(qe)){case rt:if(kt===ot&&$t.charCodeAt(qe-1)===ot&&ht+2!==qe)return qe+1;break;case U:if(kt===rt)return qe+1}return qe}function af(kt){for(var ht in kt){var ct=kt[ht];switch(ht){case"keyframe":Ul=0|ct;break;case"global":Zm=0|ct;break;case"cascade":gi=0|ct;break;case"compress":$v=0|ct;break;case"semicolon":qc=0|ct;break;case"preserve":fd=0|ct;break;case"prefix":ef=null,ct?typeof ct!="function"?Cn=1:(Cn=2,ef=ct):Cn=0}}return af}function Vl(kt,ht){if(this!==void 0&&this.constructor===Vl)return r(kt);var ct=kt,$t=ct.charCodeAt(0);$t<33&&($t=(ct=ct.trim()).charCodeAt(0)),Ul>0&&(tf=ct.replace(g,$t===T?"":"-")),$t=1,gi===1?pd=ct:Is=ct;var qe,br=[pd];Ha>0&&(qe=Fl(Hv,ht,br,br,Ai,Tn,0,0,0,0))!==void 0&&typeof qe=="string"&&(ht=qe);var le=rf(Zh,br,ht,0,0);return Ha>0&&(qe=Fl(_C,le,br,br,Ai,Tn,le.length,0,0,0))!==void 0&&typeof(le=qe)!="string"&&($t=0),tf="",pd="",Is="",yn=0,Ai=1,Tn=1,$v*$t==0?le:le.replace(o,"").replace(b,"").replace(S,"$1").replace(A,"$1").replace(N," ")}return Vl.use=function kt(ht){switch(ht){case void 0:case null:Ha=eg.length=0;break;default:if(typeof ht=="function")eg[Ha++]=ht;else if(typeof ht=="object")for(var ct=0,$t=ht.length;ct<$t;++ct)kt(ht[ct]);else tg=0|!!ht}return kt},Vl.set=af,n!==void 0&&af(n),Vl})})(iJ);var Hwe=iJ.exports;const oJ=ia(Hwe);var aJ={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function(r){var n="/*|*/",i=n+"}";function o(a){if(a)try{r(a+"}")}catch{}}return function(s,c,l,u,d,f,p,m,g,y){switch(s){case 1:if(g===0&&c.charCodeAt(0)===64)return r(c+";"),"";break;case 2:if(m===0)return c+n;break;case 3:switch(m){case 102:case 112:return r(l[0]+c),"";default:return c+(y===0?n:"")}case-2:c.split(i).forEach(o)}}}})})(aJ);var zwe=aJ.exports;const Gwe=ia(zwe);var Wwe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},L4=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Kwe(e,t){return!!(e===t||L4(e)&&L4(t))}function qwe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!Kwe(e[r],t[r]))return!1;return!0}function sJ(e,t){t===void 0&&(t=qwe);var r,n=[],i,o=!1;function a(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return o&&r===this&&t(s,n)||(i=e.apply(this,s),o=!0,r=this,n=s),i}return a}function Ywe(e){var t={};return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Xwe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Jwe=Ywe(function(e){return Xwe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function qD(e){return Object.prototype.toString.call(e).slice(8,-1)}function zg(e){return qD(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function M4(e){return qD(e)==="Array"}function j4(e){return qD(e)==="Symbol"}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function U4(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function F4(e,t,r,n){var i=n.propertyIsEnumerable(t)?"enumerable":"nonenumerable";i==="enumerable"&&(e[t]=r),i==="nonenumerable"&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}function cJ(e,t,r){if(!zg(t))return r&&M4(r)&&r.forEach(function(l){t=l(e,t)}),t;var n={};if(zg(e)){var i=Object.getOwnPropertyNames(e),o=Object.getOwnPropertySymbols(e);n=U4(i,o).reduce(function(l,u){var d=e[u];return(!j4(u)&&!Object.getOwnPropertyNames(t).includes(u)||j4(u)&&!Object.getOwnPropertySymbols(t).includes(u))&&F4(l,u,d,e),l},{})}var a=Object.getOwnPropertyNames(t),s=Object.getOwnPropertySymbols(t),c=U4(a,s).reduce(function(l,u){var d=t[u],f=zg(e)?e[u]:void 0;return r&&M4(r)&&r.forEach(function(p){d=p(f,d)}),f!==void 0&&zg(d)&&(d=cJ(f,d,r)),F4(l,u,d,t),l},n);return c}function Qwe(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=null,i=e;return zg(e)&&e.extensions&&Object.keys(e).length===1&&(i={},n=e.extensions),t.reduce(function(o,a){return cJ(o,a,n)},i)}var Ow={},V4=function(e,t){for(var r=[e[0]],n=0,i=t.length;n<i;n+=1)r.push(t[n],e[n+1]);return r},lJ=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Zwe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yv=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},eSe=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},em=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},YD=function(e){return(typeof e>"u"?"undefined":lJ(e))==="object"&&e.constructor===Object},kw=Object.freeze([]),_y=Object.freeze({});function Ol(e){return typeof e=="function"}function XD(e){return e.displayName||e.name||"Component"}function tSe(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)}function vv(e){return e&&typeof e.styledComponentId=="string"}var v0=typeof process<"u"&&(Ow.REACT_APP_SC_ATTR||Ow.SC_ATTR)||"data-styled",RT="data-styled-version",rSe="data-styled-streamed",Ch=typeof window<"u"&&"HTMLElement"in window,uJ=typeof SC_DISABLE_SPEEDY=="boolean"&&SC_DISABLE_SPEEDY||typeof process<"u"&&(Ow.REACT_APP_SC_DISABLE_SPEEDY||Ow.SC_DISABLE_SPEEDY)||!1,nSe={},Mc=function(e){yv(t,e);function t(r){$c(this,t);for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a,a=em(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+r+" for more information."+(i.length>0?" Additional arguments: "+i.join(", "):"")));return em(a)}return t}(Error),iSe=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,oSe=function(e){var t=""+(e||""),r=[];return t.replace(iSe,function(n,i,o){return r.push({componentId:i,matchIndex:o}),n}),r.map(function(n,i){var o=n.componentId,a=n.matchIndex,s=r[i+1],c=s?t.slice(a,s.matchIndex):t.slice(a);return{componentId:o,cssFromDOM:c}})},aSe=/^\s*\/\/.*$/gm,dJ=new oJ({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),hJ=new oJ({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),iO=[],fJ=function(t){if(t===-2){var r=iO;return iO=[],r}},pJ=Gwe(function(e){iO.push(e)}),mJ=void 0,Sp=void 0,gJ=void 0,sSe=function(t,r,n){return r>0&&n.slice(0,r).indexOf(Sp)!==-1&&n.slice(r-Sp.length,r)!==Sp?"."+mJ:t},cSe=function(t,r,n){t===2&&n.length&&n[0].lastIndexOf(Sp)>0&&(n[0]=n[0].replace(gJ,sSe))};hJ.use([cSe,pJ,fJ]);dJ.use([pJ,fJ]);var lSe=function(t){return dJ("",t)};function JD(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"&",i=e.join("").replace(aSe,""),o=t&&r?r+" "+t+" { "+i+" }":i;return mJ=n,Sp=t,gJ=new RegExp("\\"+Sp+"\\b","g"),hJ(r||!t?"":t,o)}var QD=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},ZD=function(t,r,n){if(n){var i=t[r]||(t[r]=Object.create(null));i[n]=!0}},Pw=function(t,r){t[r]=Object.create(null)},e2=function(t){return function(r,n){return t[r]!==void 0&&t[r][n]}},yJ=function(t){var r="";for(var n in t)r+=Object.keys(t[n]).join(" ")+" ";return r.trim()},uSe=function(t){var r=Object.create(null);for(var n in t)r[n]=ta({},t[n]);return r},PR=function(t){if(t.sheet)return t.sheet;for(var r=t.ownerDocument.styleSheets.length,n=0;n<r;n+=1){var i=t.ownerDocument.styleSheets[n];if(i.ownerNode===t)return i}throw new Mc(10)},dSe=function(t,r,n){if(!r)return!1;var i=t.cssRules.length;try{t.insertRule(r,n<=i?n:i)}catch{return!1}return!0},hSe=function(t,r,n){for(var i=r-n,o=r;o>i;o-=1)t.deleteRule(o)},t2=function(t){return`
/* sc-component-id: `+t+` */
`},DR=function(t,r){for(var n=0,i=0;i<=r;i+=1)n+=t[i];return n},fSe=function(t,r,n){var i=document;t?i=t.ownerDocument:r&&(i=r.ownerDocument);var o=i.createElement("style");o.setAttribute(v0,""),o.setAttribute(RT,"4.4.1");var a=QD();if(a&&o.setAttribute("nonce",a),o.appendChild(i.createTextNode("")),t&&!r)t.appendChild(o);else{if(!r||!t||!r.parentNode)throw new Mc(6);r.parentNode.insertBefore(o,n?r:r.nextSibling)}return o},r2=function(t,r){return function(n){var i=QD(),o=[i&&'nonce="'+i+'"',v0+'="'+yJ(r)+'"',RT+'="4.4.1"',n],a=o.filter(Boolean).join(" ");return"<style "+a+">"+t()+"</style>"}},n2=function(t,r){return function(){var n,i=(n={},n[v0]=yJ(r),n[RT]="4.4.1",n),o=QD();return o&&(i.nonce=o),Or.createElement("style",ta({},i,{dangerouslySetInnerHTML:{__html:t()}}))}},i2=function(t){return function(){return Object.keys(t)}},pSe=function(t,r){var n=Object.create(null),i=Object.create(null),o=[],a=r!==void 0,s=!1,c=function(p){var m=i[p];return m!==void 0?m:(i[p]=o.length,o.push(0),Pw(n,p),i[p])},l=function(p,m,g){for(var y=c(p),v=PR(t),E=DR(o,y),b=0,S=[],A=m.length,N=0;N<A;N+=1){var D=m[N],M=a;M&&D.indexOf("@import")!==-1?S.push(D):dSe(v,D,E+b)&&(M=!1,b+=1)}a&&S.length>0&&(s=!0,r().insertRules(p+"-import",S)),o[y]+=b,ZD(n,p,g)},u=function(p){var m=i[p];if(m!==void 0&&t.isConnected!==!1){var g=o[m],y=PR(t),v=DR(o,m)-1;hSe(y,v,g),o[m]=0,Pw(n,p),a&&s&&r().removeRules(p+"-import")}},d=function(){var p=PR(t),m=p.cssRules,g="";for(var y in i){g+=t2(y);for(var v=i[y],E=DR(o,v),b=o[v],S=E-b;S<E;S+=1){var A=m[S];A!==void 0&&(g+=A.cssText)}}return g};return{clone:function(){throw new Mc(5)},css:d,getIds:i2(i),hasNameForId:e2(n),insertMarker:c,insertRules:l,removeRules:u,sealed:!1,styleTag:t,toElement:n2(d,n),toHTML:r2(d,n)}},B4=function(t,r){return t.createTextNode(t2(r))},mSe=function(t,r){var n=Object.create(null),i=Object.create(null),o=r!==void 0,a=!1,s=function(f){var p=i[f];return p!==void 0?p:(i[f]=B4(t.ownerDocument,f),t.appendChild(i[f]),n[f]=Object.create(null),i[f])},c=function(f,p,m){for(var g=s(f),y=[],v=p.length,E=0;E<v;E+=1){var b=p[E],S=o;if(S&&b.indexOf("@import")!==-1)y.push(b);else{S=!1;var A=E===v-1?"":" ";g.appendData(""+b+A)}}ZD(n,f,m),o&&y.length>0&&(a=!0,r().insertRules(f+"-import",y))},l=function(f){var p=i[f];if(p!==void 0){var m=B4(t.ownerDocument,f);t.replaceChild(m,p),i[f]=m,Pw(n,f),o&&a&&r().removeRules(f+"-import")}},u=function(){var f="";for(var p in i)f+=i[p].data;return f};return{clone:function(){throw new Mc(5)},css:u,getIds:i2(i),hasNameForId:e2(n),insertMarker:s,insertRules:c,removeRules:l,sealed:!1,styleTag:t,toElement:n2(u,n),toHTML:r2(u,n)}},gSe=function e(t,r){var n=t===void 0?Object.create(null):t,i=r===void 0?Object.create(null):r,o=function(f){var p=i[f];return p!==void 0?p:i[f]=[""]},a=function(f,p,m){var g=o(f);g[0]+=p.join(" "),ZD(n,f,m)},s=function(f){var p=i[f];p!==void 0&&(p[0]="",Pw(n,f))},c=function(){var f="";for(var p in i){var m=i[p][0];m&&(f+=t2(p)+m)}return f},l=function(){var f=uSe(n),p=Object.create(null);for(var m in i)p[m]=[i[m][0]];return e(f,p)},u={clone:l,css:c,getIds:i2(i),hasNameForId:e2(n),insertMarker:o,insertRules:a,removeRules:s,sealed:!1,styleTag:null,toElement:n2(c,n),toHTML:r2(c,n)};return u},$4=function(t,r,n,i,o){if(Ch&&!n){var a=fSe(t,r,i);return uJ?mSe(a,o):pSe(a,o)}return gSe()},ySe=function(t,r,n){for(var i=0,o=n.length;i<o;i+=1){var a=n[i],s=a.componentId,c=a.cssFromDOM,l=lSe(c);t.insertRules(s,l)}for(var u=0,d=r.length;u<d;u+=1){var f=r[u];f.parentNode&&f.parentNode.removeChild(f)}},vSe=/\s+/,Dw=void 0;Ch?Dw=uJ?40:1e3:Dw=-1;var H4=0,LR=void 0,kl=function(){function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ch?document.head:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;$c(this,e),this.getImportRuleTag=function(){var i=t.importRuleTag;if(i!==void 0)return i;var o=t.tags[0],a=!0;return t.importRuleTag=$4(t.target,o?o.styleTag:null,t.forceServer,a)},H4+=1,this.id=H4,this.forceServer=n,this.target=n?null:r,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!Ch||this.forceServer)return this;var r=[],n=[],i=!1,o=document.querySelectorAll("style["+v0+"]["+RT+'="4.4.1"]'),a=o.length;if(!a)return this;for(var s=0;s<a;s+=1){var c=o[s];i||(i=!!c.getAttribute(rSe));for(var l=(c.getAttribute(v0)||"").trim().split(vSe),u=l.length,d=0,f;d<u;d+=1)f=l[d],this.rehydratedNames[f]=!0;n.push.apply(n,oSe(c.textContent)),r.push(c)}var p=n.length;if(!p)return this;var m=this.makeTag(null);ySe(m,r,n),this.capacity=Math.max(1,Dw-p),this.tags.push(m);for(var g=0;g<p;g+=1)this.tagMap[n[g].componentId]=m;return this},e.reset=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;LR=new e(void 0,r).rehydrate()},e.prototype.clone=function(){var r=new e(this.target,this.forceServer);return this.clones.push(r),r.tags=this.tags.map(function(n){for(var i=n.getIds(),o=n.clone(),a=0;a<i.length;a+=1)r.tagMap[i[a]]=o;return o}),r.rehydratedNames=ta({},this.rehydratedNames),r.deferred=ta({},this.deferred),r},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach(function(r){r.sealed=!0})},e.prototype.makeTag=function(r){var n=r?r.styleTag:null,i=!1;return $4(this.target,n,this.forceServer,i,this.getImportRuleTag)},e.prototype.getTagForId=function(r){var n=this.tagMap[r];if(n!==void 0&&!n.sealed)return n;var i=this.tags[this.tags.length-1];return this.capacity-=1,this.capacity===0&&(this.capacity=Dw,i=this.makeTag(i),this.tags.push(i)),this.tagMap[r]=i},e.prototype.hasId=function(r){return this.tagMap[r]!==void 0},e.prototype.hasNameForId=function(r,n){if(this.ignoreRehydratedNames[r]===void 0&&this.rehydratedNames[n])return!0;var i=this.tagMap[r];return i!==void 0&&i.hasNameForId(r,n)},e.prototype.deferredInject=function(r,n){if(this.tagMap[r]===void 0){for(var i=this.clones,o=0;o<i.length;o+=1)i[o].deferredInject(r,n);this.getTagForId(r).insertMarker(r),this.deferred[r]=n}},e.prototype.inject=function(r,n,i){for(var o=this.clones,a=0;a<o.length;a+=1)o[a].inject(r,n,i);var s=this.getTagForId(r);if(this.deferred[r]!==void 0){var c=this.deferred[r].concat(n);s.insertRules(r,c,i),this.deferred[r]=void 0}else s.insertRules(r,n,i)},e.prototype.remove=function(r){var n=this.tagMap[r];if(n!==void 0){for(var i=this.clones,o=0;o<i.length;o+=1)i[o].remove(r);n.removeRules(r),this.ignoreRehydratedNames[r]=!0,this.deferred[r]=void 0}},e.prototype.toHTML=function(){return this.tags.map(function(r){return r.toHTML()}).join("")},e.prototype.toReactElements=function(){var r=this.id;return this.tags.map(function(n,i){var o="sc-"+r+"-"+i;return C.cloneElement(n.toElement(),{key:o})})},Zwe(e,null,[{key:"master",get:function(){return LR||(LR=new e().rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),vJ=function(){function e(t,r){var n=this;$c(this,e),this.inject=function(i){i.hasNameForId(n.id,n.name)||i.inject(n.id,n.rules,n.name)},this.toString=function(){throw new Mc(12,String(n.name))},this.name=t,this.rules=r,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),ESe=/([A-Z])/g,_Se=/^ms-/;function z4(e){return e.replace(ESe,"-$1").toLowerCase().replace(_Se,"-ms-")}function bSe(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!(e in Wwe)?t+"px":String(t).trim()}var EJ=function(t){return t==null||t===!1||t===""},wSe=function e(t,r){var n=[],i=Object.keys(t);return i.forEach(function(o){if(!EJ(t[o])){if(YD(t[o]))return n.push.apply(n,e(t[o],o)),n;if(Ol(t[o]))return n.push(z4(o)+":",t[o],";"),n;n.push(z4(o)+": "+bSe(o,t[o])+";")}return n}),r?[r+" {"].concat(n,["}"]):n};function tm(e,t,r){if(Array.isArray(e)){for(var n=[],i=0,o=e.length,a;i<o;i+=1)a=tm(e[i],t,r),a!==null&&(Array.isArray(a)?n.push.apply(n,a):n.push(a));return n}if(EJ(e))return null;if(vv(e))return"."+e.styledComponentId;if(Ol(e))if(tSe(e)&&t){var s=e(t);return tm(s,t,r)}else return e;return e instanceof vJ?r?(e.inject(r),e.getName()):e:YD(e)?wSe(e):e.toString()}function IT(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Ol(e)||YD(e)?tm(V4(kw,[e].concat(r))):tm(V4(e,r))}function oO(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_y;if(!zP.isValidElementType(t))throw new Mc(1,String(t));var n=function(){return e(t,r,IT.apply(void 0,arguments))};return n.withConfig=function(i){return oO(e,t,ta({},r,i))},n.attrs=function(i){return oO(e,t,ta({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},n}function o2(e){for(var t=e.length|0,r=t|0,n=0,i;t>=4;)i=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>24,i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16)^i,t-=4,++n;switch(t){case 3:r^=(e.charCodeAt(n+2)&255)<<16;case 2:r^=(e.charCodeAt(n+1)&255)<<8;case 1:r^=e.charCodeAt(n)&255,r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16)}return r^=r>>>13,r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16),(r^r>>>15)>>>0}var IE=52,G4=function(t){return String.fromCharCode(t+(t>25?39:97))};function _J(e){var t="",r=void 0;for(r=e;r>IE;r=Math.floor(r/IE))t=G4(r%IE)+t;return G4(r%IE)+t}function SSe(e){for(var t in e)if(Ol(e[t]))return!0;return!1}function a2(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(Array.isArray(n)&&!a2(n,t))return!1;if(Ol(n)&&!vv(n))return!1}return!t.some(function(i){return Ol(i)||SSe(i)})}var W4=function(t){return _J(o2(t))},K4=function(){function e(t,r,n){$c(this,e),this.rules=t,this.isStatic=a2(t,r),this.componentId=n,kl.master.hasId(n)||kl.master.deferredInject(n,[])}return e.prototype.generateAndInjectStyles=function(r,n){var i=this.isStatic,o=this.componentId,a=this.lastClassName;if(Ch&&i&&typeof a=="string"&&n.hasNameForId(o,a))return a;var s=tm(this.rules,r,n),c=W4(this.componentId+s.join(""));return n.hasNameForId(o,c)||n.inject(this.componentId,JD(s,"."+c,void 0,o),c),this.lastClassName=c,c},e.generateName=function(r){return W4(r)},e}(),s2=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_y,n=r?e.theme===r.theme:!1,i=e.theme&&!n?e.theme:t||r.theme;return i},TSe=/[[\].#*$><+~=|^:(),"'`-]+/g,CSe=/(^-|-$)/g;function aO(e){return e.replace(TSe,"-").replace(CSe,"")}function Lw(e){return typeof e=="string"&&!0}function RSe(e){return Lw(e)?"styled."+e:"Styled("+XD(e)+")"}var MR,q4={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},ISe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Y4=(MR={},MR[zP.ForwardRef]={$$typeof:!0,render:!0},MR),xSe=Object.defineProperty,ASe=Object.getOwnPropertyNames,X4=Object.getOwnPropertySymbols,NSe=X4===void 0?function(){return[]}:X4,OSe=Object.getOwnPropertyDescriptor,kSe=Object.getPrototypeOf,PSe=Object.prototype,DSe=Array.prototype;function c2(e,t,r){if(typeof t!="string"){var n=kSe(t);n&&n!==PSe&&c2(e,n,r);for(var i=DSe.concat(ASe(t),NSe(t)),o=Y4[e.$$typeof]||q4,a=Y4[t.$$typeof]||q4,s=i.length,c=void 0,l=void 0;s--;)if(l=i[s],!ISe[l]&&!(r&&r[l])&&!(a&&a[l])&&!(o&&o[l])&&(c=OSe(t,l),c))try{xSe(e,l,c)}catch{}return e}return e}function LSe(e){return!!(e&&e.prototype&&e.prototype.isReactComponent)}var Mw=C.createContext(),xT=Mw.Consumer,MSe=function(e){yv(t,e);function t(r){$c(this,t);var n=em(this,e.call(this,r));return n.getContext=sJ(n.getContext.bind(n)),n.renderInner=n.renderInner.bind(n),n}return t.prototype.render=function(){return this.props.children?Or.createElement(Mw.Consumer,null,this.renderInner):null},t.prototype.renderInner=function(n){var i=this.getContext(this.props.theme,n);return Or.createElement(Mw.Provider,{value:i},this.props.children)},t.prototype.getTheme=function(n,i){if(Ol(n)){var o=n(i);return o}if(n===null||Array.isArray(n)||(typeof n>"u"?"undefined":lJ(n))!=="object")throw new Mc(8);return ta({},i,n)},t.prototype.getContext=function(n,i){return this.getTheme(n,i)},t}(C.Component),jSe=function(){function e(){$c(this,e),this.masterSheet=kl.master,this.instance=this.masterSheet.clone(),this.sealed=!1}return e.prototype.seal=function(){if(!this.sealed){var r=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(r,1),this.sealed=!0}},e.prototype.collectStyles=function(r){if(this.sealed)throw new Mc(2);return Or.createElement(bJ,{sheet:this.instance},r)},e.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(r){throw new Mc(3)},e}(),l2=C.createContext(),u2=l2.Consumer,bJ=function(e){yv(t,e);function t(r){$c(this,t);var n=em(this,e.call(this,r));return n.getContext=sJ(n.getContext),n}return t.prototype.getContext=function(n,i){if(n)return n;if(i)return new kl(i);throw new Mc(4)},t.prototype.render=function(){var n=this.props,i=n.children,o=n.sheet,a=n.target;return Or.createElement(l2.Provider,{value:this.getContext(o,a)},i)},t}(C.Component),J4={};function USe(e,t,r){var n=typeof t!="string"?"sc":aO(t),i=(J4[n]||0)+1;J4[n]=i;var o=n+"-"+e.generateName(n+i);return r?r+"-"+o:o}var FSe=function(e){yv(t,e);function t(){$c(this,t);var r=em(this,e.call(this));return r.attrs={},r.renderOuter=r.renderOuter.bind(r),r.renderInner=r.renderInner.bind(r),r}return t.prototype.render=function(){return Or.createElement(u2,null,this.renderOuter)},t.prototype.renderOuter=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kl.master;return this.styleSheet=n,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():Or.createElement(xT,null,this.renderInner)},t.prototype.renderInner=function(n){var i=this.props.forwardedComponent,o=i.componentStyle,a=i.defaultProps;i.displayName;var s=i.foldedComponentIds,c=i.styledComponentId,l=i.target,u=void 0;o.isStatic?u=this.generateAndInjectStyles(_y,this.props):u=this.generateAndInjectStyles(s2(this.props,n,a)||_y,this.props);var d=this.props.as||this.attrs.as||l,f=Lw(d),p={},m=ta({},this.props,this.attrs),g=void 0;for(g in m)g==="forwardedComponent"||g==="as"||(g==="forwardedRef"?p.ref=m[g]:g==="forwardedAs"?p.as=m[g]:(!f||Jwe(g))&&(p[g]=m[g]));return this.props.style&&this.attrs.style&&(p.style=ta({},this.attrs.style,this.props.style)),p.className=Array.prototype.concat(s,c,u!==c?u:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),C.createElement(d,p)},t.prototype.buildExecutionContext=function(n,i,o){var a=this,s=ta({},i,{theme:n});return o.length&&(this.attrs={},o.forEach(function(c){var l=c,u=!1,d=void 0,f=void 0;Ol(l)&&(l=l(s),u=!0);for(f in l)d=l[f],u||Ol(d)&&!LSe(d)&&!vv(d)&&(d=d(s)),a.attrs[f]=d,s[f]=d})),s},t.prototype.generateAndInjectStyles=function(n,i){var o=i.forwardedComponent,a=o.attrs,s=o.componentStyle;if(o.warnTooManyClasses,s.isStatic&&!a.length)return s.generateAndInjectStyles(_y,this.styleSheet);var c=s.generateAndInjectStyles(this.buildExecutionContext(n,i,a),this.styleSheet);return c},t}(C.Component);function wJ(e,t,r){var n=vv(e),i=!Lw(e),o=t.displayName,a=o===void 0?RSe(e):o,s=t.componentId,c=s===void 0?USe(K4,t.displayName,t.parentComponentId):s,l=t.ParentComponent,u=l===void 0?FSe:l,d=t.attrs,f=d===void 0?kw:d,p=t.displayName&&t.componentId?aO(t.displayName)+"-"+t.componentId:t.componentId||c,m=n&&e.attrs?Array.prototype.concat(e.attrs,f).filter(Boolean):f,g=new K4(n?e.componentStyle.rules.concat(r):r,m,p),y=void 0,v=function(b,S){return Or.createElement(u,ta({},b,{forwardedComponent:y,forwardedRef:S}))};return v.displayName=a,y=Or.forwardRef(v),y.displayName=a,y.attrs=m,y.componentStyle=g,y.foldedComponentIds=n?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):kw,y.styledComponentId=p,y.target=n?e.target:e,y.withComponent=function(b){var S=t.componentId,A=eSe(t,["componentId"]),N=S&&S+"-"+(Lw(b)?b:aO(XD(b))),D=ta({},A,{attrs:m,componentId:N,ParentComponent:u});return wJ(b,D,r)},Object.defineProperty(y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(b){this._foldedDefaultProps=n?Qwe(e.defaultProps,b):b}}),y.toString=function(){return"."+y.styledComponentId},i&&c2(y,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),y}var VSe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],sO=function(t){return oO(wJ,t)};VSe.forEach(function(e){sO[e]=sO(e)});var BSe=function(){function e(t,r){$c(this,e),this.rules=t,this.componentId=r,this.isStatic=a2(t,kw),kl.master.hasId(r)||kl.master.deferredInject(r,[])}return e.prototype.createStyles=function(r,n){var i=tm(this.rules,r,n),o=JD(i,"");n.inject(this.componentId,o)},e.prototype.removeStyles=function(r){var n=this.componentId;r.hasId(n)&&r.remove(n)},e.prototype.renderStyles=function(r,n){this.removeStyles(n),this.createStyles(r,n)},e}();Ch&&(window.scCGSHMRCache={});function $Se(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=IT.apply(void 0,[e].concat(r)),o="sc-global-"+o2(JSON.stringify(i)),a=new BSe(i,o),s=function(c){yv(l,c);function l(u){$c(this,l);var d=em(this,c.call(this,u)),f=d.constructor,p=f.globalStyle,m=f.styledComponentId;return Ch&&(window.scCGSHMRCache[m]=(window.scCGSHMRCache[m]||0)+1),d.state={globalStyle:p,styledComponentId:m},d}return l.prototype.componentWillUnmount=function(){window.scCGSHMRCache[this.state.styledComponentId]&&(window.scCGSHMRCache[this.state.styledComponentId]-=1),window.scCGSHMRCache[this.state.styledComponentId]===0&&this.state.globalStyle.removeStyles(this.styleSheet)},l.prototype.render=function(){var d=this;return Or.createElement(u2,null,function(f){d.styleSheet=f||kl.master;var p=d.state.globalStyle;return p.isStatic?(p.renderStyles(nSe,d.styleSheet),null):Or.createElement(xT,null,function(m){var g=d.constructor.defaultProps,y=ta({},d.props);return typeof m<"u"&&(y.theme=s2(d.props,m,g)),p.renderStyles(y,d.styleSheet),null})})},l}(Or.Component);return s.globalStyle=a,s.styledComponentId=o,s}var HSe=function(t){return t.replace(/\s|\\n/g,"")};function zSe(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=IT.apply(void 0,[e].concat(r)),o=_J(o2(HSe(JSON.stringify(i))));return new vJ(o,JD(i,o,"@keyframes"))}var GSe=function(e){var t=Or.forwardRef(function(r,n){return Or.createElement(xT,null,function(i){var o=e.defaultProps,a=s2(r,i,o);return Or.createElement(e,ta({},r,{theme:a,ref:n}))})});return c2(t,e),t.displayName="WithTheme("+XD(e)+")",t},WSe={StyleSheet:kl};const KSe=Object.freeze(Object.defineProperty({__proto__:null,ServerStyleSheet:jSe,StyleSheetConsumer:u2,StyleSheetContext:l2,StyleSheetManager:bJ,ThemeConsumer:xT,ThemeContext:Mw,ThemeProvider:MSe,__DO_NOT_USE_OR_YOU_WILL_BE_HAUNTED_BY_SPOOKY_GHOSTS:WSe,createGlobalStyle:$Se,css:IT,default:sO,isStyledComponent:vv,keyframes:zSe,withTheme:GSe},Symbol.toStringTag,{value:"Module"})),qSe=z7(KSe);(function(e,t){(function(r,n){e.exports=n($we(),qSe)})(typeof self<"u"?self:zu,function(r,n){return function(i){var o={};function a(s){if(o[s])return o[s].exports;var c=o[s]={i:s,l:!1,exports:{}};return i[s].call(c.exports,c,c.exports,a),c.l=!0,c.exports}return a.m=i,a.c=o,a.d=function(s,c,l){a.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:l})},a.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},a.t=function(s,c){if(1&c&&(s=a(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(a.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var u in s)a.d(l,u,(function(d){return s[d]}).bind(null,u));return l},a.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(c,"a",c),c},a.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},a.p="dist/",a(a.s=9)}([function(i,o,a){i.exports=a(5)()},function(i,o){i.exports=r},function(i,o){i.exports=n},function(i,o){var a=function(s,c){return{parse:function(p,m){var g=JSON.parse(p,f).map(d),y=g[0],v=m||l,E=typeof y=="object"&&y?function b(S,A,N,D){return Object.keys(N).reduce(function(M,H){var V=M[H];if(V instanceof s){var G=S[V];typeof G!="object"||A.has(G)?M[H]=D.call(M,H,G):(A.add(G),M[H]=D.call(M,H,b(S,A,G,D)))}else M[H]=D.call(M,H,V);return M},N)}(g,new Set,y,v):y;return v.call({"":E},"",E)},stringify:function(p,m,g){for(var y,v=new Map,E=[],b=[],S=m&&typeof m==typeof E?function(D,M){if(D===""||-1<m.indexOf(D))return M}:m||l,A=+u(v,E,S.call({"":p},"",p)),N=function(D,M){if(y)return y=!y,M;var H=S.call(this,D,M);switch(typeof H){case"object":if(H===null)return H;case c:return v.get(H)||u(v,E,H)}return H};A<E.length;A++)y=!0,b[A]=JSON.stringify(E[A],N,g);return"["+b.join(",")+"]"}};function l(p,m){return m}function u(p,m,g){var y=s(m.push(g)-1);return p.set(g,y),y}function d(p){return p instanceof s?s(p):p}function f(p,m){return typeof m===c?new s(m):m}}(String,"string");i.exports=a},function(i,o,a){i.exports=function(s,c){var l=["abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ","0123456789","~!@#$%^&()_+-={}[];',"],u="";(c=c||"aA0").split("").forEach(function(f){isNaN(parseInt(f))?/[a-z]/.test(f)?u+=l[0]:/[A-Z]/.test(f)?u+=l[1]:u+=l[3]:u+=l[2]}),s=s||30;for(var d="";s--;)d+=u.charAt(Math.floor(Math.random()*u.length));return d}},function(i,o,a){var s=a(6),c=a(7),l=a(8);i.exports=function(){function u(p,m,g,y,v,E){E!==l&&c(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function d(){return u}u.isRequired=u;var f={array:u,bool:u,func:u,number:u,object:u,string:u,symbol:u,any:u,arrayOf:d,element:u,instanceOf:d,node:u,objectOf:d,oneOf:d,oneOfType:d,shape:d,exact:d};return f.checkPropTypes=s,f.PropTypes=f,f}},function(i,o,a){function s(l){return function(){return l}}var c=function(){};c.thatReturns=s,c.thatReturnsFalse=s(!1),c.thatReturnsTrue=s(!0),c.thatReturnsNull=s(null),c.thatReturnsThis=function(){return this},c.thatReturnsArgument=function(l){return l},i.exports=c},function(i,o,a){i.exports=function(s,c,l,u,d,f,p,m){if(!s){var g;if(c===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var y=[l,u,d,f,p,m],v=0;(g=new Error(c.replace(/%s/g,function(){return y[v++]}))).name="Invariant Violation"}throw g.framesToPop=1,g}}},function(i,o,a){i.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(i,o,a){a.r(o);var s=a(1),c=a.n(s),l=a(0),u=a.n(l),d=a(4),f=a.n(d),p=a(2),m=a.n(p),g=function(j){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ee=function(Re){Re=Re.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(Ee,ie,nt,Pt){return ie+ie+nt+nt+Pt+Pt});var Ye=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Re);return Ye?{r:parseInt(Ye[1],16),g:parseInt(Ye[2],16),b:parseInt(Ye[3],16)}:null}(j);return"rgba(".concat(ee.r,", ").concat(ee.g,", ").concat(ee.b,", ").concat(z,")")};function y(){var j=S([`
  0% { box-shadow: 0 0 0 0 `,`; }
  70% { box-shadow: 0 0 0 10px `,`; }
  100% { box-shadow: 0 0 0 0 `,`; }
`]);return y=function(){return j},j}function v(){var j=S([`
  25% { transform: rotate(-1deg); }
  100% { transform: rotate(1deg); }
`]);return v=function(){return j},j}function E(){var j=S([`
  100% { transform: scale(1); }
`]);return E=function(){return j},j}function b(){var j=S([`
  0% { opacity: .2; }
  20% { opacity: 1; }
  100% { opacity: .2; }
`]);return b=function(){return j},j}function S(j,z){return z||(z=j.slice(0)),Object.freeze(Object.defineProperties(j,{raw:{value:Object.freeze(z)}}))}var A=Object(p.keyframes)(b()),N=Object(p.keyframes)(E()),D=Object(p.keyframes)(v());function M(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  animation: `,` 1.4s infinite both;
  animation-delay: `,`;
`]);return M=function(){return j},j}var H=m.a.span(M(),A,function(j){return j.delay}),V=function(){return c.a.createElement("span",{className:"rsc-loading"},c.a.createElement(H,{delay:"0s"},"."),c.a.createElement(H,{delay:".2s"},"."),c.a.createElement(H,{delay:".4s"},"."))};function G(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  background: #fff;
  border-radius: 5px;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
  display: flex;
  justify-content: center;
  margin: 0 6px 10px 6px;
  padding: 16px;
`]);return G=function(){return j},j}var Y=m.a.div(G());function Z(j){return(Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(j)}function $(j,z){for(var ee=0;ee<z.length;ee++){var Re=z[ee];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(j,Re.key,Re)}}function F(j){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(j)}function K(j,z){return(K=Object.setPrototypeOf||function(ee,Re){return ee.__proto__=Re,ee})(j,z)}function k(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function P(j,z,ee){return z in j?Object.defineProperty(j,z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):j[z]=ee,j}var B=function(j){function z(){var Ye,Ee,ie,nt;(function(ze,Je){if(!(ze instanceof Je))throw new TypeError("Cannot call a class as a function")})(this,z);for(var Pt=arguments.length,Te=new Array(Pt),je=0;je<Pt;je++)Te[je]=arguments[je];return ie=this,nt=(Ye=F(z)).call.apply(Ye,[this].concat(Te)),Ee=!nt||Z(nt)!=="object"&&typeof nt!="function"?k(ie):nt,P(k(k(Ee)),"state",{loading:!0}),P(k(k(Ee)),"renderComponent",function(){var ze=Ee.props,Je=ze.step,mt=ze.steps,Ot=ze.previousStep,Tt=ze.triggerNextStep,Rn=Je.component;return c.a.cloneElement(Rn,{step:Je,steps:mt,previousStep:Ot,triggerNextStep:Tt})}),Ee}var ee,Re;return function(Ye,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function");Ye.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:Ye,writable:!0,configurable:!0}}),Ee&&K(Ye,Ee)}(z,s.Component),ee=z,(Re=[{key:"componentDidMount",value:function(){var Ye=this,Ee=this.props,ie=Ee.speak,nt=Ee.step,Pt=Ee.previousValue,Te=Ee.triggerNextStep,je=nt.delay,ze=nt.waitAction;setTimeout(function(){Ye.setState({loading:!1},function(){ze||nt.rendered||Te(),ie(nt,Pt)})},je)}},{key:"render",value:function(){var Ye=this.state.loading,Ee=this.props.style;return c.a.createElement(Y,{className:"rsc-cs",style:Ee},Ye?c.a.createElement(V,null):this.renderComponent())}}])&&$(ee.prototype,Re),z}();B.propTypes={previousStep:u.a.objectOf(u.a.any).isRequired,previousValue:u.a.oneOfType([u.a.string,u.a.bool,u.a.number,u.a.object,u.a.array]),speak:u.a.func,step:u.a.objectOf(u.a.any).isRequired,steps:u.a.objectOf(u.a.any).isRequired,style:u.a.objectOf(u.a.any).isRequired,triggerNextStep:u.a.func.isRequired},B.defaultProps={previousValue:"",speak:function(){}};var R=B;function _(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  animation: `,` 0.3s ease forwards;
  cursor: pointer;
  display: inline-block;
  margin: 2px;
  transform: scale(0);
`]);return _=function(){return j},j}var x=m.a.li(_(),N),T={background:"#f5f8fb",fontFamily:"monospace",headerBgColor:"#6e48aa",headerFontColor:"#fff",headerFontSize:"16px",botBubbleColor:"#6E48AA",botFontColor:"#fff",userBubbleColor:"#fff",userFontColor:"#4a4a4a"};function W(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  background: `,`;
  border: 0;
  border-radius: 22px;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
  color: `,`;
  display: inline-block;
  font-size: 14px;
  padding: 12px;

  &:hover {
    opacity: 0.7;
  }
  &:active,
  &:hover:focus {
    outline:none;
  }
`]);return W=function(){return j},j}var U=m.a.button(W(),function(j){return j.theme.botBubbleColor},function(j){return j.theme.botFontColor});U.defaultProps={theme:T};var X=U;function ae(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  margin: 2px 0 12px 0;
  padding: 0 6px;
`]);return ae=function(){return j},j}var de=m.a.ul(ae());function fe(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([""]);return fe=function(){return j},j}var ke=m.a.div(fe());function Ve(j){return(Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(j)}function Me(j,z){for(var ee=0;ee<z.length;ee++){var Re=z[ee];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(j,Re.key,Re)}}function ot(j){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(j)}function At(j,z){return(At=Object.setPrototypeOf||function(ee,Re){return ee.__proto__=Re,ee})(j,z)}function et(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function Et(j,z,ee){return z in j?Object.defineProperty(j,z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):j[z]=ee,j}var Ie=function(j){function z(){var Ye,Ee,ie,nt;(function(ze,Je){if(!(ze instanceof Je))throw new TypeError("Cannot call a class as a function")})(this,z);for(var Pt=arguments.length,Te=new Array(Pt),je=0;je<Pt;je++)Te[je]=arguments[je];return ie=this,nt=(Ye=ot(z)).call.apply(Ye,[this].concat(Te)),Ee=!nt||Ve(nt)!=="object"&&typeof nt!="function"?et(ie):nt,Et(et(et(Ee)),"onOptionClick",function(ze){var Je=ze.value;(0,Ee.props.triggerNextStep)({value:Je})}),Et(et(et(Ee)),"renderOption",function(ze){var Je=Ee.props,mt=Je.bubbleOptionStyle,Ot=Je.step.user,Tt=ze.value,Rn=ze.label;return c.a.createElement(x,{key:Tt,className:"rsc-os-option"},c.a.createElement(X,{className:"rsc-os-option-element",style:mt,user:Ot,onClick:function(){return Ee.onOptionClick({value:Tt})}},Rn))}),Ee}var ee,Re;return function(Ye,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function");Ye.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:Ye,writable:!0,configurable:!0}}),Ee&&At(Ye,Ee)}(z,s.Component),ee=z,(Re=[{key:"render",value:function(){var Ye=this.props.step.options;return c.a.createElement(ke,{className:"rsc-os"},c.a.createElement(de,{className:"rsc-os-options"},Object.keys(Ye).map(function(Ee){return Ye[Ee]}).map(this.renderOption)))}}])&&Me(ee.prototype,Re),z}();Ie.propTypes={bubbleOptionStyle:u.a.objectOf(u.a.any).isRequired,step:u.a.objectOf(u.a.any).isRequired,triggerNextStep:u.a.func.isRequired};var rt=Ie;function Be(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  animation: `,` 0.3s ease forwards;
  background: `,`;
  border-radius: `,`;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
  color: `,`;
  display: inline-block;
  font-size: 14px;
  max-width: 50%;
  margin: `,`;
  overflow: hidden;
  position: relative;
  padding: 12px;
  transform: scale(0);
  transform-origin: `,`;
`]);return Be=function(){return j},j}var Qe=m.a.div(Be(),N,function(j){return j.user?j.theme.userBubbleColor:j.theme.botBubbleColor},function(j){var z=j.isFirst,ee=j.isLast,Re=j.user;return z||ee?!z&&ee?Re?"18px 0 18px 18px":"0 18px 18px 18px":j.user?"18px 18px 0 18px":"18px 18px 18px 0":Re?"18px 0 0 18px":"0 18px 18px 0px"},function(j){return j.user?j.theme.userFontColor:j.theme.botFontColor},function(j){var z=j.isFirst,ee=j.showAvatar,Re=j.user;return!z&&ee?Re?"-8px 46px 10px 0":"-8px 0 10px 46px":z||ee?"0 0 10px 0":Re?"-8px 0px 10px 0":"-8px 0 10px 0px"},function(j){var z=j.isFirst,ee=j.user;return z?ee?"bottom right":"bottom left":ee?"top right":"top left"});Qe.defaultProps={theme:T};var Ke=Qe;function te(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  animation: `,` 0.3s ease forwards;
  border-radius: `,`;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
  height: 40px;
  min-width: 40px;
  padding: 3px;
  transform: scale(0);
  transform-origin: `,`;
  width: 40;
`]);return te=function(){return j},j}var Ae=m.a.img(te(),N,function(j){return j.user?"50% 50% 50% 0":"50% 50% 0 50%"},function(j){return j.user?"bottom left":"bottom right"});function Ue(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  display: inline-block;
  order: `,`;
  padding: 6px;
`]);return Ue=function(){return j},j}var Ge=m.a.div(Ue(),function(j){return j.user?"1":"0"});function ne(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  align-items: flex-end;
  display: flex;
  justify-content: `,`;
`]);return ne=function(){return j},j}var ge=m.a.div(ne(),function(j){return j.user?"flex-end":"flex-start"});function Xe(j){return(Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(j)}function lt(j,z){for(var ee=0;ee<z.length;ee++){var Re=z[ee];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(j,Re.key,Re)}}function qt(j){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(j)}function Un(j,z){return(Un=Object.setPrototypeOf||function(ee,Re){return ee.__proto__=Re,ee})(j,z)}function Sn(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function mi(j,z,ee){return z in j?Object.defineProperty(j,z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):j[z]=ee,j}var Tn=function(j){function z(){var Ye,Ee,ie,nt;(function(ze,Je){if(!(ze instanceof Je))throw new TypeError("Cannot call a class as a function")})(this,z);for(var Pt=arguments.length,Te=new Array(Pt),je=0;je<Pt;je++)Te[je]=arguments[je];return ie=this,nt=(Ye=qt(z)).call.apply(Ye,[this].concat(Te)),Ee=!nt||Xe(nt)!=="object"&&typeof nt!="function"?Sn(ie):nt,mi(Sn(Sn(Ee)),"state",{loading:!0}),mi(Sn(Sn(Ee)),"getMessage",function(){var ze=Ee.props,Je=ze.previousValue,mt=ze.step.message;return mt?mt.replace(/{previousValue}/g,Je):""}),mi(Sn(Sn(Ee)),"renderMessage",function(){var ze=Ee.props,Je=ze.step,mt=ze.steps,Ot=ze.previousStep,Tt=ze.triggerNextStep,Rn=Je.component;return Rn?c.a.cloneElement(Rn,{step:Je,steps:mt,previousStep:Ot,triggerNextStep:Tt}):Ee.getMessage()}),Ee}var ee,Re;return function(Ye,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function");Ye.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:Ye,writable:!0,configurable:!0}}),Ee&&Un(Ye,Ee)}(z,s.Component),ee=z,(Re=[{key:"componentDidMount",value:function(){var Ye=this,Ee=this.props,ie=Ee.step,nt=Ee.speak,Pt=Ee.previousValue,Te=Ee.triggerNextStep,je=ie.component,ze=ie.delay,Je=ie.waitAction,mt=je&&Je;setTimeout(function(){Ye.setState({loading:!1},function(){mt||ie.rendered||Te(),nt(ie,Pt)})},ze)}},{key:"render",value:function(){var Ye=this.props,Ee=Ye.step,ie=Ye.isFirst,nt=Ye.isLast,Pt=Ye.avatarStyle,Te=Ye.bubbleStyle,je=Ye.hideBotAvatar,ze=Ye.hideUserAvatar,Je=this.state.loading,mt=Ee.avatar,Ot=Ee.user,Tt=Ot?!ze:!je;return c.a.createElement(ge,{className:"rsc-ts ".concat(Ot?"rsc-ts-user":"rsc-ts-bot"),user:Ot},c.a.createElement(Ge,{className:"rsc-ts-image-container",user:Ot},ie&&Tt&&c.a.createElement(Ae,{className:"rsc-ts-image",style:Pt,showAvatar:Tt,user:Ot,src:mt,alt:"avatar"})),c.a.createElement(Ke,{className:"rsc-ts-bubble",style:Te,user:Ot,showAvatar:Tt,isFirst:ie,isLast:nt},Je?c.a.createElement(V,null):this.renderMessage()))}}])&&lt(ee.prototype,Re),z}();Tn.propTypes={avatarStyle:u.a.objectOf(u.a.any).isRequired,isFirst:u.a.bool.isRequired,isLast:u.a.bool.isRequired,bubbleStyle:u.a.objectOf(u.a.any).isRequired,hideBotAvatar:u.a.bool.isRequired,hideUserAvatar:u.a.bool.isRequired,previousStep:u.a.objectOf(u.a.any),previousValue:u.a.oneOfType([u.a.string,u.a.bool,u.a.number,u.a.object,u.a.array]),speak:u.a.func,step:u.a.objectOf(u.a.any).isRequired,steps:u.a.objectOf(u.a.any),triggerNextStep:u.a.func.isRequired},Tn.defaultProps={previousStep:{},previousValue:"",speak:function(){},steps:{}};var Ai=Tn,yn=[{key:"id",types:["string","number"],required:!0},{key:"user",types:["boolean"],required:!0},{key:"trigger",types:["string","number","function"],required:!1},{key:"validator",types:["function"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],gi=[{key:"id",types:["string","number"],required:!0},{key:"message",types:["string","function"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Cn=[{key:"id",types:["string","number"],required:!0},{key:"options",types:["object"],required:!0},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Zm=[{key:"id",types:["string","number"],required:!0},{key:"component",types:["any"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"replace",types:["boolean"],required:!1},{key:"waitAction",types:["boolean"],required:!1},{key:"asMessage",types:["boolean"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],$v=[{key:"id",types:["string","number"],required:!0},{key:"update",types:["string","number"],required:!0},{key:"trigger",types:["string","number","function"],required:!0},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],qc=a(3);function fd(j){return(fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(j)}var Zh={parse:function(j){var z=[];if(j.user)z=yn;else if(j.message)z=gi;else if(j.options)z=Cn;else if(j.component)z=Zm;else{if(!j.update)throw new Error("The step ".concat(Object(qc.stringify)(j)," is invalid"));z=$v}for(var ee=0,Re=z.length;ee<Re;ee+=1){var Ye=z[ee],Ee=Ye.key,ie=Ye.types,nt=Ye.required;if(!j[Ee]&&nt)throw new Error("Key '".concat(Ee,"' is required in step ").concat(Object(qc.stringify)(j)));if(j[Ee]&&ie[0]!=="any"&&ie.indexOf(fd(j[Ee]))<0)throw new Error("The type of '".concat(Ee,"' value must be ").concat(ie.join(" or ")," instead of ").concat(fd(j[Ee])))}var Pt=z.map(function(Te){return Te.key});for(var Ee in j)Pt.indexOf(Ee)<0&&(console.error("Invalid key '".concat(Ee,"' in step '").concat(j.id,"'")),delete j[Ee]);return j},checkInvalidIds:function(j){for(var z in j){var ee=j[z],Re=j[z].trigger;if(typeof Re!="function"){if(ee.options)for(var Ye=ee.options.filter(function(Pt){return typeof Pt.trigger!="function"}).map(function(Pt){return Pt.trigger}),Ee=0,ie=Ye.length;Ee<ie;Ee+=1){var nt=Ye[Ee];if(nt&&!j[nt])throw new Error("The id '".concat(nt,"' triggered by option ").concat(Ee+1," in step '").concat(j[z].id,"' does not exist"))}else if(Re&&!j[Re])throw new Error("The id '".concat(Re,"' triggered by step '").concat(j[z].id,"' does not exist"))}}}},eg=function(j,z){var ee=Object(qc.parse)(Object(qc.stringify)(z));for(var Re in ee)for(var Ye=0,Ee=ee[Re].length;Ye<Ee;Ye+=1)ee[Re][Ye].component&&(ee[Re][Ye].component=ee[Re][Ye].id);localStorage.setItem(j,Object(qc.stringify)(ee))};function Ha(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  background: `,`;
  border-radius: 10px;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);
  font-family: `,`;
  overflow: hidden;
  position: `,`;
  bottom: `,`;
  top: `,`;
  right: `,`;
  left: `,`;
  width: `,`;
  height: `,`;
  z-index: 999;
  transform: `,`;
  transform-origin: `,`;
  transition: transform 0.3s ease;

  @media screen and (max-width: 568px) {
    border-radius: `,`;
    bottom: 0 !important;
    left: initial !important;
    height: 100%;
    right: 0 !important;
    top: initial !important;
    width: 100%;
  }
`]);return Ha=function(){return j},j}var ef=m.a.div(Ha(),function(j){return j.theme.background},function(j){return j.theme.fontFamily},function(j){return j.floating?"fixed":"relative"},function(j){var z=j.floating,ee=j.floatingStyle;return z?ee.bottom||"32px":"initial"},function(j){var z=j.floating,ee=j.floatingStyle;return z&&ee.top||"initial"},function(j){var z=j.floating,ee=j.floatingStyle;return z?ee.right||"32px":"initial"},function(j){var z=j.floating,ee=j.floatingStyle;return z&&ee.left||"initial"},function(j){return j.width},function(j){return j.height},function(j){return j.opened?"scale(1)":"scale(0)"},function(j){return j.floatingStyle.transformOrigin||"bottom right"},function(j){return j.floating?"0":""});ef.defaultProps={theme:T};var _C=ef;function Hv(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  height: calc(`," - ",`);
  overflow-y: scroll;
  margin-top: 2px;
  padding-top: 6px;

  @media screen and (max-width: 568px) {
    height: `,`;
  }
`]);return Hv=function(){return j},j}var bC=m.a.div(Hv(),function(j){return j.height},function(j){return j.hideInput?"56px":"112px"},function(j){return j.floating?"calc(100% - 112px)":""});function zv(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  align-items: center;
  background: `,`;
  color: `,`;
  display: flex;
  fill: `,`;
  height: 56px;
  justify-content: space-between;
  padding: 0 10px;
`]);return zv=function(){return j},j}var Gv=m.a.div(zv(),function(j){return j.theme.headerBgColor},function(j){return j.theme.headerFontColor},function(j){return j.theme.headerFontColor});Gv.defaultProps={theme:T};var wC=Gv;function tg(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  margin: 0;
  font-size: `,`;
`]);return tg=function(){return j},j}var Ul=m.a.h2(tg(),function(j){return j.theme.headerFontSize});Ul.defaultProps={theme:T};var tf=Ul;function Is(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  cursor: pointer;
`]);return Is=function(){return j},j}var pd=m.a.a(Is());function rf(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  align-items: center;
  cursor: pointer;
  background: `,`;
  bottom: 32px;
  border-radius: 100%;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);
  display: flex;
  fill: `,`;
  height: 56px;
  justify-content: center;
  position: fixed;
  right: 32px;
  transform: `,`;
  transition: transform 0.3s ease;
  width: 56px;
  z-index: 999;
`]);return rf=function(){return j},j}var rg=m.a.a(rf(),function(j){return j.theme.headerBgColor},function(j){return j.theme.headerFontColor},function(j){return j.opened?"scale(0)":"scale(1)"});rg.defaultProps={theme:{headerBgColor:"#6e48aa",headerFontColor:"#fff"}};var Wv=rg;function nf(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  height: 24px;
  width: 24px;
`]);return nf=function(){return j},j}var of=m.a.img(nf());function Kv(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  position: relative;
`]);return Kv=function(){return j},j}var Fl=m.a.div(Kv());function qv(){var j=Vl([`
          `,` .2s ease
        `]);return qv=function(){return j},j}function af(){var j=Vl([`
  animation: `,`;
  border: 0;
  border-radius: 0;
  border-bottom-left-radius: 10px;
  border-bottom-right-radius: 10px;
  border-top: `,`;
  box-shadow: `,`;
  box-sizing: border-box;
  color: `,`;
  font-size: 16px;
  opacity: `,`;
  outline: none;
  padding: `,`;
  width: 100%;
  -webkit-appearance: none;

  &:disabled {
    background: #fff;
  }

  @media screen and (max-width: 568px) {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
`]);return af=function(){return j},j}function Vl(j,z){return z||(z=j.slice(0)),Object.freeze(Object.defineProperties(j,{raw:{value:Object.freeze(z)}}))}var kt=m.a.input(af(),function(j){return j.invalid?Object(p.css)(qv(),D):""},function(j){return j.invalid?"0":"1px solid #eee"},function(j){return j.invalid?"inset 0 0 2px #E53935":"none"},function(j){return j.invalid?"#E53935":""},function(j){return j.disabled&&!j.invalid?".5":"1"},function(j){return j.hasButton?"16px 52px 16px 10px":"16px 10px"},function(j){return j.floating?"0":"10px"},function(j){return j.floating?"0":"10px"});function ht(){var j=$t([`
            `,` 2s ease infinite
          `]);return ht=function(){return j},j}function ct(){var j=$t([`
  background-color: transparent;
  border: 0;
  border-bottom-right-radius: 10px;
  box-shadow: none;
  cursor: `,`;
  fill: `,`;
  opacity: `,`;
  outline: none;
  padding: 14px 16px 12px 16px;
  position: absolute;
  right: 0;
  top: 0;
  &:before {
    content: '';
    position: absolute;
    width: 23px;
    height: 23px;
    border-radius: 50%;
    animation: `,`;
  }
  &:not(:disabled):hover {
    opacity: 0.7;
  }
`]);return ct=function(){return j},j}function $t(j,z){return z||(z=j.slice(0)),Object.freeze(Object.defineProperties(j,{raw:{value:Object.freeze(z)}}))}var qe=m.a.button(ct(),function(j){return j.disabled?"default":"pointer"},function(j){var z=j.speaking,ee=j.invalid,Re=j.theme;return z?Re.headerBgColor:ee?"#E53935":"#4a4a4a"},function(j){return j.disabled&&!j.invalid?".5":"1"},function(j){var z,ee=j.theme;return j.speaking?Object(p.css)(ht(),(z=ee.headerBgColor,Object(p.keyframes)(y(),g(z,.4),g(z,0),g(z,0)))):""});qe.defaultProps={theme:T};var br=qe;function le(){return(le=Object.assign||function(j){for(var z=1;z<arguments.length;z++){var ee=arguments[z];for(var Re in ee)Object.prototype.hasOwnProperty.call(ee,Re)&&(j[Re]=ee[Re])}return j}).apply(this,arguments)}function ar(j,z){for(var ee=0;ee<z.length;ee++){var Re=z[ee];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(j,Re.key,Re)}}function rr(j,z,ee){return z&&ar(j.prototype,z),ee&&ar(j,ee),j}var vn=null,Qt=function(){},Fn=function(){function j(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qt,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qt,Re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qt,Ye=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"en";return function(Ee,ie){if(!(Ee instanceof ie))throw new TypeError("Cannot call a class as a function")}(this,j),vn||(vn=this),this.state={inputValue:"",lang:Ye,onChange:z,onEnd:ee,onStop:Re},this.onResult=this.onResult.bind(this),this.onEnd=this.onEnd.bind(this),this.setup(),vn}return rr(j,null,[{key:"isSupported",value:function(){return"webkitSpeechRecognition"in window}}]),rr(j,[{key:"onChange",value:function(z){var ee=this.state.onChange;this.setState({inputValue:z}),ee(z)}},{key:"onFinal",value:function(z){this.setState({inputValue:z}),this.recognition.stop()}},{key:"onEnd",value:function(){var z=this.state,ee=z.onStop,Re=z.onEnd,Ye=z.force;this.setState({speaking:!1}),Ye?ee():Re()}},{key:"onResult",value:function(z){for(var ee="",Re="",Ye=z.resultIndex;Ye<z.results.length;Ye+=1)z.results[Ye].isFinal?(Re+=z.results[Ye][0].transcript,this.onFinal(Re)):(ee+=z.results[Ye][0].transcript,this.onChange(ee))}},{key:"setState",value:function(z){this.state=le({},this.state,z)}},{key:"setup",value:function(){if(!j.isSupported())return this;var z=window.webkitSpeechRecognition;return this.recognition=new z,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang=this.state.lang,this.recognition.onresult=this.onResult,this.recognition.onend=this.onEnd,this}},{key:"setLang",value:function(z){return this.setState({lang:z}),this.setup(),this}},{key:"speak",value:function(){return j.isSupported()?(this.state.speaking?(this.setState({force:!0}),this.recognition.stop()):(this.recognition.start(),this.setState({speaking:!0,inputValue:""})),this):this}}]),j}(),Wr=function(){return c.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},sr=function(){return c.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},yi=function(j){var z=j.size;return c.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:z,height:z,viewBox:"0 0 500 500"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("polygon",{points:"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75"}))))};yi.propTypes={size:u.a.number},yi.defaultProps={size:20};var to=yi,oc=function(j){var z=j.size;return c.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:z,height:z,viewBox:"0 0 400 400"},c.a.createElement("g",null,c.a.createElement("path",{d:"M290.991,240.991c0,26.392-21.602,47.999-48.002,47.999h-11.529c-26.4,0-48.002-21.607-48.002-47.999V104.002   c0-26.4,21.602-48.004,48.002-48.004h11.529c26.4,0,48.002,21.604,48.002,48.004V240.991z"}),c.a.createElement("path",{d:"M342.381,209.85h-8.961c-4.932,0-8.961,4.034-8.961,8.961v8.008c0,50.26-37.109,91.001-87.361,91.001   c-50.26,0-87.109-40.741-87.109-91.001v-8.008c0-4.927-4.029-8.961-8.961-8.961h-8.961c-4.924,0-8.961,4.034-8.961,8.961v8.008   c0,58.862,40.229,107.625,96.07,116.362v36.966h-34.412c-4.932,0-8.961,4.039-8.961,8.971v17.922c0,4.923,4.029,8.961,8.961,8.961   h104.688c4.926,0,8.961-4.038,8.961-8.961v-17.922c0-4.932-4.035-8.971-8.961-8.971h-34.43v-36.966   c55.889-8.729,96.32-57.5,96.32-116.362v-8.008C351.342,213.884,347.303,209.85,342.381,209.85z"})))};oc.propTypes={size:u.a.number},oc.defaultProps={size:20};var ro=oc,la=function(){return/iphone|ipod|android|ie|blackberry|fennec/i.test(navigator.userAgent)},md=function(j){return typeof j=="string"},za=function(j){return function(z,ee){var Re=j.lang,Ye=j.voice,Ee=j.enable,ie=z.user;if(window.SpeechSynthesisUtterance&&window.speechSynthesis&&!ie&&Ee){var nt=function(Te){var je=Te.message,ze=Te.metadata,Je=ze===void 0?{}:ze;return md(Je.speak)?Je.speak:md(je)?je:""}(z),Pt=new window.SpeechSynthesisUtterance;Pt.text=nt.replace(/{previousValue}/g,ee),Pt.lang=Re,Pt.voice=Ye,window.speechSynthesis.speak(Pt)}}};function ur(j){return(ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(j)}function ci(){return(ci=Object.assign||function(j){for(var z=1;z<arguments.length;z++){var ee=arguments[z];for(var Re in ee)Object.prototype.hasOwnProperty.call(ee,Re)&&(j[Re]=ee[Re])}return j}).apply(this,arguments)}function Yc(j,z){for(var ee=0;ee<z.length;ee++){var Re=z[ee];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(j,Re.key,Re)}}function Bl(j){return(Bl=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(j)}function Ur(j,z){return(Ur=Object.setPrototypeOf||function(ee,Re){return ee.__proto__=Re,ee})(j,z)}function Rt(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function Xr(j,z,ee){return z in j?Object.defineProperty(j,z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):j[z]=ee,j}var li=function(j){function z(Ee){var ie,nt,Pt;return function(Te,je){if(!(Te instanceof je))throw new TypeError("Cannot call a class as a function")}(this,z),nt=this,Pt=Bl(z).call(this,Ee),ie=!Pt||ur(Pt)!=="object"&&typeof Pt!="function"?Rt(nt):Pt,Xr(Rt(Rt(ie)),"onNodeInserted",function(Te){var je=Te.currentTarget;ie.props.enableSmoothScroll&&ie.supportsScrollBehavior?je.scroll({top:je.scrollHeight,left:0,behavior:"smooth"}):je.scrollTop=je.scrollHeight}),Xr(Rt(Rt(ie)),"onResize",function(){ie.content.scrollTop=ie.content.scrollHeight}),Xr(Rt(Rt(ie)),"onRecognitionChange",function(Te){ie.setState({inputValue:Te})}),Xr(Rt(Rt(ie)),"onRecognitionEnd",function(){ie.setState({speaking:!1}),ie.handleSubmitButton()}),Xr(Rt(Rt(ie)),"onRecognitionStop",function(){ie.setState({speaking:!1})}),Xr(Rt(Rt(ie)),"onValueChange",function(Te){ie.setState({inputValue:Te.target.value})}),Xr(Rt(Rt(ie)),"getTriggeredStep",function(Te,je){var ze=ie.generateRenderedStepsById();return typeof Te=="function"?Te({value:je,steps:ze}):Te}),Xr(Rt(Rt(ie)),"getStepMessage",function(Te){var je=ie.state.previousSteps,ze=je.length>0?je.length-1:0,Je=ie.generateRenderedStepsById(),mt=je[ze].value;return typeof Te=="function"?Te({previousValue:mt,steps:Je}):Te}),Xr(Rt(Rt(ie)),"generateRenderedStepsById",function(){for(var Te=ie.state.previousSteps,je={},ze=0,Je=Te.length;ze<Je;ze+=1){var mt=Te[ze],Ot=mt.id,Tt=mt.message,Rn=mt.value,wr=mt.metadata;je[Ot]={id:Ot,message:Tt,value:Rn,metadata:wr}}return je}),Xr(Rt(Rt(ie)),"triggerNextStep",function(Te){var je=ie.props.enableMobileAutoFocus,ze=ie.state,Je=ze.defaultUserSettings,mt=ze.previousSteps,Ot=ze.renderedSteps,Tt=ze.steps,Rn=ie.state,wr=Rn.currentStep,vo=Rn.previousStep,ua=wr.end;if(Te&&Te.value&&(wr.value=Te.value),Te&&Te.hideInput&&(wr.hideInput=Te.hideInput),Te&&Te.trigger&&(wr.trigger=ie.getTriggeredStep(Te.trigger,Te.value)),ua)ie.handleEnd();else if(wr.options&&Te){var vi=wr.options.filter(function(ig){return ig.value===Te.value})[0],Ga=ie.getTriggeredStep(vi.trigger,wr.value);delete wr.options,wr=ci({},wr,vi,Je,{user:!0,message:vi.label,trigger:Ga}),Ot.pop(),mt.pop(),Ot.push(wr),mt.push(wr),ie.setState({currentStep:wr,renderedSteps:Ot,previousSteps:mt})}else if(wr.trigger){wr.replace&&Ot.pop();var In=ci({},Tt[ie.getTriggeredStep(wr.trigger,wr.value)]);if(In.message)In.message=ie.getStepMessage(In.message);else if(In.update){var Eo=In;if((In=ci({},Tt[Eo.update])).options)for(var _o=0,sf=In.options.length;_o<sf;_o+=1)In.options[_o].trigger=Eo.trigger;else In.trigger=Eo.trigger}In.key=f()(24),vo=wr,wr=In,ie.setState({renderedSteps:Ot,currentStep:wr,previousStep:vo},function(){In.user?ie.setState({disabled:!1},function(){!je&&la()||ie.input&&ie.input.focus()}):(Ot.push(In),mt.push(In),ie.setState({renderedSteps:Ot,previousSteps:mt}))})}var cf=ie.props,$l=cf.cache,ng=cf.cacheName;$l&&setTimeout(function(){eg(ng,{currentStep:wr,previousStep:vo,previousSteps:mt,renderedSteps:Ot})},300)}),Xr(Rt(Rt(ie)),"handleEnd",function(){var Te=ie.props.handleEnd;if(Te){for(var je=ie.state.previousSteps,ze=je.map(function(vi){return{id:vi.id,message:vi.message,value:vi.value,metadata:vi.metadata}}),Je=[],mt=0,Ot=je.length;mt<Ot;mt+=1){var Tt=je[mt],Rn=Tt.id,wr=Tt.message,vo=Tt.value,ua=Tt.metadata;Je[Rn]={id:Rn,message:wr,value:vo,metadata:ua}}Te({renderedSteps:ze,steps:Je,values:je.filter(function(vi){return vi.value}).map(function(vi){return vi.value})})}}),Xr(Rt(Rt(ie)),"isInputValueEmpty",function(){var Te=ie.state.inputValue;return!Te||Te.length===0}),Xr(Rt(Rt(ie)),"isLastPosition",function(Te){var je=ie.state.renderedSteps,ze=je.length,Je=je.map(function(Ot){return Ot.key}).indexOf(Te.key);if(ze<=1||Je+1===ze)return!0;var mt=je[Je+1];return!mt.message&&!mt.asMessage||Te.user!==mt.user}),Xr(Rt(Rt(ie)),"isFirstPosition",function(Te){var je=ie.state.renderedSteps,ze=je.map(function(mt){return mt.key}).indexOf(Te.key);if(ze===0)return!0;var Je=je[ze-1];return!Je.message&&!Je.asMessage||Te.user!==Je.user}),Xr(Rt(Rt(ie)),"handleKeyPress",function(Te){Te.key==="Enter"&&ie.submitUserMessage()}),Xr(Rt(Rt(ie)),"handleSubmitButton",function(){var Te=ie.state,je=Te.speaking,ze=Te.recognitionEnable;if((ie.isInputValueEmpty()||je)&&ze)return ie.recognition.speak(),void(je||ie.setState({speaking:!0}));ie.submitUserMessage()}),Xr(Rt(Rt(ie)),"submitUserMessage",function(){var Te=ie.state,je=Te.defaultUserSettings,ze=Te.inputValue,Je=Te.previousSteps,mt=Te.renderedSteps,Ot=ie.state.currentStep;Ot.validator&&ie.checkInvalidInput()||(Ot=ci({},je,Ot,{message:ze,value:ze}),mt.push(Ot),Je.push(Ot),ie.setState({currentStep:Ot,renderedSteps:mt,previousSteps:Je,disabled:!0,inputValue:""},function(){ie.input&&ie.input.blur()}))}),Xr(Rt(Rt(ie)),"checkInvalidInput",function(){var Te=ie.props.enableMobileAutoFocus,je=ie.state,ze=je.currentStep,Je=je.inputValue,mt=ze.validator(Je),Ot=Je;return(typeof mt!="boolean"||!mt)&&(ie.setState({inputValue:mt.toString(),inputInvalid:!0,disabled:!0},function(){setTimeout(function(){ie.setState({inputValue:Ot,inputInvalid:!1,disabled:!1},function(){!Te&&la()||ie.input&&ie.input.focus()})},2e3)}),!0)}),Xr(Rt(Rt(ie)),"toggleChatBot",function(Te){var je=ie.props.toggleFloating;je?je({opened:Te}):ie.setState({opened:Te})}),Xr(Rt(Rt(ie)),"renderStep",function(Te,je){var ze=ie.state.renderedSteps,Je=ie.props,mt=Je.avatarStyle,Ot=Je.bubbleStyle,Tt=Je.bubbleOptionStyle,Rn=Je.customStyle,wr=Je.hideBotAvatar,vo=Je.hideUserAvatar,ua=Je.speechSynthesis,vi=Te.options,Ga=Te.component,In=Te.asMessage,Eo=ie.generateRenderedStepsById(),_o=je>0?ze[je-1]:{};return Ga&&!In?c.a.createElement(R,{key:je,speak:ie.speak,step:Te,steps:Eo,style:Rn,previousStep:_o,previousValue:_o.value,triggerNextStep:ie.triggerNextStep}):vi?c.a.createElement(rt,{key:je,step:Te,speak:ie.speak,previousValue:_o.value,triggerNextStep:ie.triggerNextStep,bubbleOptionStyle:Tt}):c.a.createElement(Ai,{key:je,step:Te,steps:Eo,speak:ie.speak,previousStep:_o,previousValue:_o.value,triggerNextStep:ie.triggerNextStep,avatarStyle:mt,bubbleStyle:Ot,hideBotAvatar:wr,hideUserAvatar:vo,speechSynthesis:ua,isFirst:ie.isFirstPosition(Te),isLast:ie.isLastPosition(Te)})}),ie.content=null,ie.input=null,ie.supportsScrollBehavior=!1,ie.setContentRef=function(Te){ie.content=Te},ie.setInputRef=function(Te){ie.input=Te},ie.state={renderedSteps:[],previousSteps:[],currentStep:{},previousStep:{},steps:{},disabled:!0,opened:Ee.opened||!Ee.floating,inputValue:"",inputInvalid:!1,speaking:!1,recognitionEnable:Ee.recognitionEnable&&Fn.isSupported(),defaultUserSettings:{}},ie.speak=za(Ee.speechSynthesis),ie}var ee,Re,Ye;return function(Ee,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function");Ee.prototype=Object.create(ie&&ie.prototype,{constructor:{value:Ee,writable:!0,configurable:!0}}),ie&&Ur(Ee,ie)}(z,s.Component),ee=z,Ye=[{key:"getDerivedStateFromProps",value:function(Ee,ie){var nt=Ee.opened;return Ee.toggleFloating!==void 0&&nt!==void 0&&nt!==ie.opened?function(Pt){for(var Te=1;Te<arguments.length;Te++){var je=arguments[Te]!=null?arguments[Te]:{},ze=Object.keys(je);typeof Object.getOwnPropertySymbols=="function"&&(ze=ze.concat(Object.getOwnPropertySymbols(je).filter(function(Je){return Object.getOwnPropertyDescriptor(je,Je).enumerable}))),ze.forEach(function(Je){Xr(Pt,Je,je[Je])})}return Pt}({},ie,{opened:nt}):ie}}],(Re=[{key:"componentDidMount",value:function(){for(var Ee=this,ie=this.props.steps,nt=this.props,Pt=nt.botDelay,Te=nt.botAvatar,je=nt.cache,ze=nt.cacheName,Je=nt.customDelay,mt=nt.enableMobileAutoFocus,Ot=nt.userAvatar,Tt={},Rn={delay:Pt,avatar:Te},wr={delay:nt.userDelay,avatar:Ot,hideInput:!1},vo={delay:Je},ua=0,vi=ie.length;ua<vi;ua+=1){var Ga=ie[ua],In={};Ga.user?In=wr:Ga.message||Ga.asMessage?In=Rn:Ga.component&&(In=vo),Tt[Ga.id]=ci({},In,Zh.parse(Ga))}Zh.checkInvalidIds(Tt);var Eo=ie[0];if(Eo.message){var _o=Eo.message;Eo.message=typeof _o=="function"?_o():_o,Tt[Eo.id].message=Eo.message}var sf=this.state.recognitionEnable,cf=this.props.recognitionLang;sf&&(this.recognition=new Fn(this.onRecognitionChange,this.onRecognitionEnd,this.onRecognitionStop,cf)),this.supportsScrollBehavior="scrollBehavior"in document.documentElement.style,this.content&&(this.content.addEventListener("DOMNodeInserted",this.onNodeInserted),window.addEventListener("resize",this.onResize));var $l=function(lf,Yv){var og=lf.cacheName,CC=lf.cache,RC=lf.firstStep,gd=lf.steps,IC=RC,Zre=[gd[IC.id]],ene=[gd[IC.id]],oM=localStorage.getItem(og);if(CC&&oM)try{var Po=Object(qc.parse)(oM),aM=Po.renderedSteps[Po.renderedSteps.length-1];if(!aM||!aM.end){for(var uf=0,tne=Po.renderedSteps.length;uf<tne;uf+=1){var sM=Po.renderedSteps[uf];if(Po.renderedSteps[uf].delay=0,Po.renderedSteps[uf].rendered=!0,sM.component){var rne=sM.id;Po.renderedSteps[uf].component=gd[rne].component}}var xC=Po.currentStep,nne=xC.trigger,ine=xC.end,AC=xC.options,cM=Po.currentStep.id;if(AC&&delete Po.currentStep.rendered,!nne&&!ine)if(AC)for(var Xv=0;Xv<AC.length;Xv+=1)Po.currentStep.options[Xv].trigger=gd[cM].options[Xv].trigger;else Po.currentStep.trigger=gd[cM].trigger;return Po.currentStep.user&&Yv(),Po}localStorage.removeItem(og)}catch(one){console.info("Unable to parse cache named:".concat(og,`. 
The cache where probably created with an older version of react-simple-chatbot.
`),one)}return{currentStep:IC,previousStep:{},previousSteps:ene,renderedSteps:Zre}}({cacheName:ze,cache:je,firstStep:Eo,steps:Tt},function(){Ee.setState({disabled:!1},function(){!mt&&la()||Ee.input&&Ee.input.focus()})}),ng=$l.currentStep,ig=$l.previousStep,SC=$l.previousSteps,TC=$l.renderedSteps;this.setState({currentStep:ng,defaultUserSettings:wr,previousStep:ig,previousSteps:SC,renderedSteps:TC,steps:Tt})}},{key:"componentWillUnmount",value:function(){this.content&&(this.content.removeEventListener("DOMNodeInserted",this.onNodeInserted),window.removeEventListener("resize",this.onResize))}},{key:"render",value:function(){var Ee=this,ie=this.state,nt=ie.currentStep,Pt=ie.disabled,Te=ie.inputInvalid,je=ie.inputValue,ze=ie.opened,Je=ie.renderedSteps,mt=ie.speaking,Ot=ie.recognitionEnable,Tt=this.props,Rn=Tt.className,wr=Tt.contentStyle,vo=Tt.floating,ua=Tt.floatingIcon,vi=Tt.floatingStyle,Ga=Tt.footerStyle,In=Tt.headerComponent,Eo=Tt.headerTitle,_o=Tt.hideHeader,sf=Tt.hideSubmitButton,cf=Tt.inputStyle,$l=Tt.placeholder,ng=Tt.inputAttributes,ig=Tt.recognitionPlaceholder,SC=Tt.style,TC=Tt.submitButtonStyle,lf=Tt.width,Yv=Tt.height,og=In||c.a.createElement(wC,{className:"rsc-header"},c.a.createElement(tf,{className:"rsc-header-title"},Eo),vo&&c.a.createElement(pd,{className:"rsc-header-close-button",onClick:function(){return Ee.toggleChatBot(!1)}},c.a.createElement(sr,null))),CC=(this.isInputValueEmpty()||mt)&&Ot?c.a.createElement(ro,null):c.a.createElement(to,null),RC=mt?ig:nt.placeholder||$l,gd=nt.inputAttributes||ng;return c.a.createElement("div",{className:"rsc ".concat(Rn)},vo&&c.a.createElement(Wv,{className:"rsc-float-button",style:vi,opened:ze,onClick:function(){return Ee.toggleChatBot(!0)}},typeof ua=="string"?c.a.createElement(of,{src:ua}):ua),c.a.createElement(_C,{className:"rsc-container",floating:vo,floatingStyle:vi,opened:ze,style:SC,width:lf,height:Yv},!_o&&og,c.a.createElement(bC,{className:"rsc-content",ref:this.setContentRef,floating:vo,style:wr,height:Yv,hideInput:nt.hideInput},Je.map(this.renderStep)),c.a.createElement(Fl,{className:"rsc-footer",style:Ga},!nt.hideInput&&c.a.createElement(kt,ci({type:"textarea",style:cf,ref:this.setInputRef,className:"rsc-input",placeholder:Te?"":RC,onKeyPress:this.handleKeyPress,onChange:this.onValueChange,value:je,floating:vo,invalid:Te,disabled:Pt,hasButton:!sf},gd)),!nt.hideInput&&!sf&&c.a.createElement(br,{className:"rsc-submit-button",style:TC,onClick:this.handleSubmitButton,invalid:Te,disabled:Pt,speaking:mt},CC))))}}])&&Yc(ee.prototype,Re),Ye&&Yc(ee,Ye),z}();li.propTypes={avatarStyle:u.a.objectOf(u.a.any),botAvatar:u.a.string,botDelay:u.a.number,bubbleOptionStyle:u.a.objectOf(u.a.any),bubbleStyle:u.a.objectOf(u.a.any),cache:u.a.bool,cacheName:u.a.string,className:u.a.string,contentStyle:u.a.objectOf(u.a.any),customDelay:u.a.number,customStyle:u.a.objectOf(u.a.any),enableMobileAutoFocus:u.a.bool,enableSmoothScroll:u.a.bool,floating:u.a.bool,floatingIcon:u.a.oneOfType([u.a.string,u.a.element]),floatingStyle:u.a.objectOf(u.a.any),footerStyle:u.a.objectOf(u.a.any),handleEnd:u.a.func,headerComponent:u.a.element,headerTitle:u.a.string,height:u.a.string,hideBotAvatar:u.a.bool,hideHeader:u.a.bool,hideSubmitButton:u.a.bool,hideUserAvatar:u.a.bool,inputAttributes:u.a.objectOf(u.a.any),inputStyle:u.a.objectOf(u.a.any),opened:u.a.bool,toggleFloating:u.a.func,placeholder:u.a.string,recognitionEnable:u.a.bool,recognitionLang:u.a.string,recognitionPlaceholder:u.a.string,speechSynthesis:u.a.shape({enable:u.a.bool,lang:u.a.string,voice:typeof window<"u"?u.a.instanceOf(window.SpeechSynthesisVoice):u.a.any}),steps:u.a.arrayOf(u.a.object).isRequired,style:u.a.objectOf(u.a.any),submitButtonStyle:u.a.objectOf(u.a.any),userAvatar:u.a.string,userDelay:u.a.number,width:u.a.string},li.defaultProps={avatarStyle:{},botDelay:1e3,bubbleOptionStyle:{},bubbleStyle:{},cache:!1,cacheName:"rsc_cache",className:"",contentStyle:{},customStyle:{},customDelay:1e3,enableMobileAutoFocus:!1,enableSmoothScroll:!1,floating:!1,floatingIcon:c.a.createElement(Wr,null),floatingStyle:{},footerStyle:{},handleEnd:void 0,headerComponent:void 0,headerTitle:"Chat",height:"520px",hideBotAvatar:!1,hideHeader:!1,hideSubmitButton:!1,hideUserAvatar:!1,inputStyle:{},opened:void 0,placeholder:"Type the message ...",inputAttributes:{},recognitionEnable:!1,recognitionLang:"en",recognitionPlaceholder:"Listening ...",speechSynthesis:{enable:!1,lang:"en",voice:null},style:{},submitButtonStyle:{},toggleFloating:void 0,userDelay:1e3,width:"350px",botAvatar:"data:image/svg+xml,%3csvg version='1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3e%3cpath d='M303 70a47 47 0 1 0-70 40v84h46v-84c14-8 24-23 24-40z' fill='%2393c7ef'/%3e%3cpath d='M256 23v171h23v-84a47 47 0 0 0-23-87z' fill='%235a8bb0'/%3e%3cpath fill='%2393c7ef' d='M0 240h248v124H0z'/%3e%3cpath fill='%235a8bb0' d='M264 240h248v124H264z'/%3e%3cpath fill='%2393c7ef' d='M186 365h140v124H186z'/%3e%3cpath fill='%235a8bb0' d='M256 365h70v124h-70z'/%3e%3cpath fill='%23cce9f9' d='M47 163h419v279H47z'/%3e%3cpath fill='%2393c7ef' d='M256 163h209v279H256z'/%3e%3cpath d='M194 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%233c5d76'/%3e%3cpath d='M380 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%231e2e3b'/%3e%3cpath d='M186 349a70 70 0 1 0 140 0H186z' fill='%233c5d76'/%3e%3cpath d='M256 349v70c39 0 70-31 70-70h-70z' fill='%231e2e3b'/%3e%3c/svg%3e",userAvatar:"data:image/svg+xml,%3csvg viewBox='-208.5 21 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle cx='-158.5' cy='71' fill='%23F5EEE5' r='50'/%3e%3cdefs%3e%3ccircle cx='-158.5' cy='71' id='a' r='50'/%3e%3c/defs%3e%3cclipPath id='b'%3e%3cuse overflow='visible' xlink:href='%23a'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23b)' d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' fill='%23E6C19C'/%3e%3cg clip-path='url(%23b)'%3e%3cdefs%3e%3cpath d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' id='c'/%3e%3c/defs%3e%3cclipPath id='d'%3e%3cuse overflow='visible' xlink:href='%23c'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23d)' d='M-158.5 100.1c12.7 0 23-18.6 23-34.4 0-16.2-10.3-24.7-23-24.7s-23 8.5-23 24.7c0 15.8 10.3 34.4 23 34.4z' fill='%23D4B08C'/%3e%3c/g%3e%3cpath d='M-158.5 96c12.7 0 23-16.3 23-31 0-15.1-10.3-23-23-23s-23 7.9-23 23c0 14.7 10.3 31 23 31z' fill='%23F2CEA5'/%3e%3c/svg%3e"};var Ut=li;a.d(o,"Loading",function(){return V}),o.default=Ut}])})})(nJ);var YSe=nJ.exports;const XSe=ia(YSe);function JSe(){const e=[{id:"0",message:"Hey Geek!",trigger:"1"},{id:"1",message:"Please write your username",trigger:"2"},{id:"2",user:!0,trigger:"3"},{id:"3",message:" hi {previousValue}, how can I help you?",trigger:4},{id:"4",options:[{value:1,label:"View Courses"},{value:2,label:"Read Articles"}],end:!0}],t={botAvatar:"/logo.png"};return h.jsx("div",{children:h.jsx(XSe,{steps:e,...t})})}function QSe(){const[e,t]=C.useState(!1);return h.jsxs("div",{className:"homePage w-full h-full",id:"id_patientDashboard",children:[h.jsx("div",{className:"header bg-white w-full h-[12vh] shadow-lg ",children:h.jsx(KD,{})}),h.jsx("div",{className:"w-full h-full p-4 ",children:h.jsx(eo,{})}),h.jsx("div",{className:"chatBot fixed w-auto h-auto right-2 bottom-0",children:e?h.jsxs("div",{className:"flex gap-6 items-start ",children:[h.jsx("div",{children:h.jsx(JSe,{})}),h.jsx("button",{className:"px-6 py-3 bg-red-500 text-white font-medium rounded-tl-2xl",onClick:()=>t(!1),children:"Close"})]}):h.jsxs("div",{className:"relative w-auto h-[15vh]  right-10 bottom-0 flex flex-row gap-2",children:[h.jsx("img",{src:"/doctorBot.jpg",alt:"chatbot",className:" z-100 shadow-lg rounded-full w-[5vw] h-[10vh] cursor-pointer",onClick:()=>t(!0)}),h.jsx("span",{className:"h-[40%] p-2 rounded-tl-2xl  text-white font-medium bg-blue-500  ",children:"Hey, i'm an Ai Doctor..!!"})]})})]})}const ZSe="https://hcompanion.onrender.com/api",eTe=async({token:e})=>{try{const t=await be.get(`${ZSe}/pharmacy/getBasicDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.userData}catch(t){t.response.status=="401"&&re.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t)}},AT="https://hcompanion.onrender.com/api",tTe=async e=>{try{const t=await be.post(`${AT}/pharmacy/profile/updateDetails`,{updateDetails:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},SJ=async()=>{try{return(await be.get(`${AT}/pharmacy/profile/getProfileDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.details}catch(e){return console.log(e),!1}},rTe=async()=>{try{return(await be.get(`${AT}/pharmacy/profile/getContactDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.contactDetails}catch(e){return console.log(e),!1}},nTe=async e=>{try{const t=await be.post(`${AT}/pharmacy/profile/updateContactDetails`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return re.fire({icon:"success",text:"Contact Details Have been Updated"}),!0}catch(t){return console.log(t),!1}},iTe={pharmacyName:"",ownerName:"",profileImage:""},TJ=Im({name:"pharmacy",initialState:iTe,reducers:{setPharmacy(e,t){e.pharmacyName=t.payload.pharmacyName,e.ownerName=t.payload.ownerName,e.profileImage=t.payload.profileImage}}}),{setPharmacy:oTe}=TJ.actions,aTe=TJ.reducer;function sTe(){const e=Hh(),{username:t,email:r,role:n,isLoggedIn:i}=oi(u=>u.user),{pharmacyName:o,ownerName:a,profileImage:s}=oi(u=>u.pharmacy),c=en(),l=async()=>{if(sessionStorage.getItem("token")&&!i){const u=await eTe({token:sessionStorage.getItem("token")});if(u){const d=await SJ();e(Ao({username:u.username,email:u.email,role:u.role,isLoggedIn:!0})),e(oTe({pharmacyName:d.pharmacyName,ownerName:d.ownerName,profileImage:d.profileImage}))}}};return C.useEffect(()=>{l()},[]),h.jsx("div",{className:"navbarParent h-full w-full ",children:h.jsxs("div",{className:"navbar w-full h-full flex flex-col rounded-tr-[3%] bg-blue-600 bg-opacity-90 p-4 gap-10 ",children:[h.jsxs("div",{className:"w-full h-[8vh] flex justify-start items-center gap-4 ",children:[h.jsx("img",{src:"/icons/arrowBack.png",alt:"",className:"h-[5vh] w-[] p-2 ml-2 bg-white  rounded-lg"}),h.jsx("h2",{className:"text-white text-sm",children:"Minimize"}),h.jsx("div",{className:"flex-1 h-full flex justify-end items-center",children:h.jsx("img",{src:"/logo.png",alt:"",className:"w-[7vw] h-[7vh] bg-white mr-4"})})]}),h.jsxs("div",{className:"profile h-[12%] flex flex-row justify-start gap-4",children:[h.jsx("div",{className:"profileImage w-auto h-full flex ",children:h.jsx("img",{src:s,alt:"image",className:"h-full w-[5vw] rounded-full "})}),h.jsxs("div",{className:"details flex-1 flex flex-col justify-center bg-white bg-opacity-10 p-2 rounded-lg gap-2 ",children:[h.jsx("span",{children:h.jsx("h2",{className:"text-white text-lg font-bold",children:o||t})}),h.jsx("span",{children:h.jsx("h2",{className:"text-white text-sm",children:"pharmacy"})})]})]}),h.jsx("div",{className:"search w-full h-[5%]",children:h.jsx(He,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),h.jsxs("div",{className:"home w-full text-white h-[80%] flex flex-col gap-4 border-slate-50",children:[h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/pharmacyHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{c("/pharmacy/home")},children:"Home"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/stock.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",id:"id_navMedicineStock",onClick:()=>{c("/pharmacy/stock/viewStocks")},children:"Medicine Stock"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/pharmacyOrder.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{c("/pharmacy/order")},children:"Orders"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{c("/pharmacy/profile")},children:"Profile"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),e(Ao({})),c("/")},children:"sign out"})]})]})]})})}function CJ(){const e=en();return h.jsxs("div",{className:"w-full h-[12vh] py-2 flex flex-row justify-end gap-20  px-10 ",children:[h.jsx("div",{className:"w-[15%] h-full",children:h.jsx("button",{className:"w-full h-full p-4 font-bold rounded-sm flex items-center  bg-green-400  drop-shadow-xl",onClick:()=>{e("/pharmacy/stock/addCategory")},children:"Add New Stock"})}),h.jsx("div",{className:"w-[15%] h-full",children:h.jsx("button",{className:"w-full h-full p-4 font-bold rounded-sm flex items-center  bg-orange-500  drop-shadow-xl",id:"id_btnViewStock",onClick:()=>{e("/pharmacy/stock/viewStocks")},children:"View Stock"})})]})}const cTe=async()=>{try{const e=await be.get("https://rxnav.nlm.nih.gov/REST/allconcepts.json?tty=SCD+GPCK+SBD+BPCK");return console.log(e.data.minConceptGroup.minConcept[0]),e.data.minConceptGroup.minConcept}catch(e){console.log(e)}},lTe=Ii().shape({medicineName:jt().required("Required"),description:jt().required("required"),costPrice:jt(),sellingPrice:jt().required("required"),medicineType:jt().required("required"),medicineImage:i9().required("required")}),uTe=Ii().shape({medicineName:jt().required("Required"),description:jt().required("required"),costPrice:jt().required("required"),sellingPrice:jt().required("required"),medicineType:jt().required("required")}),Ev="https://hcompanion.onrender.com/api",dTe=async e=>{try{const t=await be.post(`${Ev}/pharmacy/medicine/add`,e,{headers:{"Content-Type":"multipart/form-data",authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),re.fire({icon:"success",text:"Successfully Added"}),t.data.medicineDetails}catch(t){console.log(t),t.response.status=="500"&&re.fire({icon:"error",text:"Encountered an Error on the backend"})}},hTe=async()=>{try{const e=await be.get(`${Ev}/pharmacy/medicine/viewStocks`,{headers:{"Content-Type":"multipart/form-data",authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(e.data),e.data.medicines}catch(e){console.log(e),e.response.status=="500"&&re.fire({icon:"error",text:"Encountered an Error on the backend"})}},fTe=async({inventoryId:e})=>{try{const t=await be.post(`${Ev}/pharmacy/medicine/deleteStock`,{inventoryId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),re.fire({icon:"success",text:"Medicine has been Deleted"}),!0}catch(t){console.log(t),t.response.status=="400"&&re.fire({icon:"error",text:"Medicine Not Found"}),t.response.status=="500"&&re.fire({icon:"error",text:"Encountered an Error on the backend"})}},pTe=async({inventoryId:e})=>{try{console.log(e);const t=await be.post(`${Ev}/pharmacy/medicine/viewDetails`,{inventoryId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.medicine}catch(t){console.log(t),t.response.status=="500"&&re.fire({icon:"error",text:"Encountered an Error on the backend"})}},mTe=async({medicine:e})=>{try{await console.log(e);const t=await be.post(`${Ev}/pharmacy/medicine/updateStock`,e,{headers:{"Content-Type":"multipart/form-data",authorization:`Bearer ${sessionStorage.getItem("token")}`}});return re.fire({icon:"success",text:"Medicine has been Updated"}),console.log(t.data),t.data.updated}catch(t){console.log(t)}};function gTe(){const[e,t]=C.useState([]),r=en(),n=qn({initialValues:{medicineName:"",description:"",costPrice:"",sellingPrice:"",medicineType:"",medicineImage:""},validationSchema:lTe,onSubmit:async(a,s)=>{console.log(`values ${JSON.stringify(a)}`),await dTe(a)&&r("/pharmacy/home")}}),i=async()=>{const a=await cTe();console.log(`${JSON.stringify(a)}`),await t(a)},o=(a,s)=>{try{const c=a.target.files[0];n.setFieldValue("medicineImage",c)}catch(c){console.log(c)}};return C.useEffect(()=>{i()},[]),console.log(n.errors),h.jsx("div",{className:"screen w-full h-full flex flex-row",children:h.jsx("div",{style:{backgroundImage:"url('/icons/pharmacyBg.jpg')",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},className:"w-full h-full flex flex-1 flex-col gap-4",children:h.jsxs("div",{className:"w-full h-full overflow-y-scroll pt-4 flex flex-1 flex-col gap-4 bg-black bg-opacity-70",children:[h.jsx(CJ,{}),h.jsx("div",{className:"addForm flex justify-center w-full h-[100%] mt-10 mb-[5vh]",children:h.jsxs("form",{onSubmit:n.handleSubmit,className:"w-[40%] h-[100%] p-4 flex flex-col gap-6 border shadow-xl bg-white",children:[h.jsx("span",{children:h.jsx("h1",{className:"font-bold text-xl text-emerald-500",children:"New Medicine"})}),h.jsx(He,{list:"medicines",variant:"filled",name:"medicineName",placeholder:"medicine name",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.medicineName&&(n.errors.medicineName?{color:"error",helperText:`${n.errors.medicineName}`}:{color:"success"})}),h.jsx("div",{children:h.jsx("datalist",{id:"medicines",children:e&&e.length>0?e.map((a,s)=>h.jsx("option",{value:a.name},s)):h.jsx("option",{value:"No Medicines Available"})})}),h.jsx(He,{variant:"filled",name:"medicineType",placeholder:"medicineType",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.medicineType&&(n.errors.medicineType?{color:"error",helperText:`${n.errors.medicineType}`}:{color:"success"})}),h.jsx(He,{variant:"filled",name:"description",placeholder:"description",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.description&&(n.errors.description?{color:"error",helperText:`${n.errors.description}`}:{color:"success"})}),h.jsx(He,{variant:"filled",name:"costPrice",placeholder:"cost price",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.costPrice&&(n.errors.costPrice?{color:"error",helperText:`${n.errors.costPrice}`}:{color:"success"})}),h.jsx(He,{variant:"filled",name:"sellingPrice",placeholder:"selling price",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.sellingPrice&&(n.errors.sellingPrice?{color:"error",helperText:`${n.errors.sellingPrice}`}:{color:"success"})}),h.jsx("div",{children:h.jsx(zh,{id:"id_medicineImage",accept:"image/jpeg, image/png",name:"medicineImage",helperText:"Upload Image",onChange:o,onBlur:n.handleBlur,...n.touched.medicineImage&&(n.errors.medicineImage?{color:"error",helperText:`${n.errors.medicineImage}`}:{color:"success"})})}),h.jsx("button",{type:"submit",className:"w-[full] h-[10%] border rounded-[5%] bg-orange-500 p-2 font-bold",children:"Add Medicine to the Inventory"})]})})]})})})}function yTe(){const[e,t]=C.useState([]),r=async()=>{const n=await hTe();await t(n)};return C.useEffect(()=>{r()},[]),h.jsxs("div",{className:"stockViewScreen w-full h-full p-2 flex flex-col gap-10 overflow-y-scroll",children:[h.jsx(CJ,{}),h.jsxs("div",{className:"w-full h-full mt-20 flex flex-col gap-2",children:[h.jsx("div",{className:"heading w-full  ml-20 mb-10  text-lg text-emerald-400 font-bold flex",children:h.jsx("h2",{children:"Medicine Stocks"})}),e&&e.length>0?h.jsx(vTe,{medicines:e}):h.jsx("span",{className:"w-full h-[70%] mb-10 text-xl font-bold flex flex-1 justify-center items-center ",children:"No medicine Stock.....!!!"})]})]})}function vTe(e){const t=en(),r=async(i,o)=>{console.log(o),await fTe({inventoryId:o}),t("/pharmacy/stock/viewStocks")},{medicines:n}=e;return h.jsx("div",{className:"w-full h-full mb-10 flex flex-1 justify-center ",children:h.jsxs(yr,{hoverable:!0,className:"w-full gap-x-10 ",children:[h.jsxs(yr.Head,{className:"gap-x-72",children:[h.jsx(yr.HeadCell,{children:"Medicine Name"}),h.jsx(yr.HeadCell,{children:"Description"}),h.jsx(yr.HeadCell,{children:"Type"}),h.jsx(yr.HeadCell,{children:"Stock"}),h.jsx(yr.HeadCell,{children:"cost price"}),h.jsx(yr.HeadCell,{children:"selling price"}),h.jsx(yr.HeadCell,{children:"Image"}),h.jsx(yr.HeadCell,{}),h.jsx(yr.HeadCell,{})]}),h.jsx(yr.Body,{className:"font-bold",children:n.map((i,o)=>h.jsxs(yr.Row,{className:"border-b-4",id:`id_${o}`,children:[h.jsx(yr.Cell,{children:i.medicineId.medicineName}),h.jsx(yr.Cell,{children:i.medicineId.description}),h.jsx(yr.Cell,{children:i.medicineId.medicineType}),h.jsx(yr.Cell,{children:i.stock}),h.jsx(yr.Cell,{children:i.costPrice}),h.jsx(yr.Cell,{children:i.sellingPrice}),h.jsx(yr.Cell,{children:h.jsx("img",{className:"h-14",src:i.medicineImage,alt:"productImage"})}),h.jsx(yr.Cell,{children:h.jsx("img",{className:"h-8 cursor-pointer",src:"/icons/editIcon.png",alt:"editIcon",id:`id_navEdit_${o}`,onClick:()=>{t("/pharmacy/stock/editStock",{state:{inventoryId:i._id}})}})}),h.jsx(yr.Cell,{children:h.jsx("img",{className:"h-8 cursor-pointer opacity-70",src:"/icons/deleteIcon.png",alt:"editIcon",id:`id_btnDelete_${o}`,onClick:a=>{r(a,i._id)}})})]},i._id))})]})})}function ETe(){return h.jsxs("div",{className:"screen w-screen h-screen flex flex-row",children:[h.jsx("div",{className:"fixed header w-[21%] h-[100vh] ",children:h.jsx(sTe,{})}),h.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4 overflow-y-auto",children:h.jsx(eo,{})})]})}function _Te(){const[e,t]=C.useState(void 0),[r,n]=C.useState(void 0),i=qn({initialValues:{medicineName:"",description:"",costPrice:"",stock:"",sellingPrice:"",medicineType:"",medicineImage:""},validationSchema:uTe,onSubmit:async(u,d)=>{await mTe({medicine:{...u,inventoryId:a}}),await s()}}),o=vm(),{inventoryId:a}=o.state,s=async()=>{const u=await pTe({inventoryId:a});console.log(`temp ${JSON.stringify(u)}`),i.setFieldValue("medicineName",u.medicineId.medicineName),i.setFieldValue("description",u.medicineId.description),i.setFieldValue("medicineType",u.medicineId.medicineType),i.setFieldValue("costPrice",u.costPrice),i.setFieldValue("sellingPrice",u.sellingPrice),i.setFieldValue("medicineImage",u.medicineImage),i.setFieldValue("stock",u.stock),await t(u)},c=async u=>{const d=u.target.files[0],f=new FileReader(d);f.onload=p=>{const m=p.target.result;n(m),i.setFieldValue("medicineImage",d)},f.readAsDataURL(d)},l=u=>{console.log(parseFloat(u.target.value)+1);const d=(100+parseFloat(u.target.value))/100*parseFloat(i.values.costPrice);i.setFieldValue("sellingPrice",d.toFixed(2))};return C.useEffect(()=>{s()},[]),h.jsxs("div",{className:"w-full h-full overflow-y-auto pl-4 pt-5",children:[h.jsx("div",{className:"w-full h-[10%] text-center",children:h.jsx("h2",{className:"text-[5vh] text-emerald-400 font-bold",children:"Medicine Details"})}),h.jsxs("div",{className:"w-full h-full mt-10 flex justify-center gap-10",children:[h.jsxs("form",{onSubmit:i.handleSubmit,className:"w-[50%] flex flex-col gap-5 font-bold",children:[h.jsx(He,{variant:"filled",name:"medicineName",label:"Medicine Name",value:i.values.medicineName,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.medicineName&&(i.errors.medicineName?{color:"error",helperText:`${i.errors.medicineName}`}:{color:"success"})}),h.jsx(He,{variant:"filled",name:"description",label:"Description",value:i.values.description,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.description&&(i.errors.description?{color:"error",helperText:`${i.errors.description}`}:{color:"success"})}),h.jsx(He,{variant:"filled",name:"MedicineType",label:"Medicine Type",value:i.values.medicineType,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.medicineType&&(i.errors.medicineType?{color:"error",helperText:`${i.errors.medicineType}`}:{color:"success"})}),h.jsx(He,{variant:"filled",name:"stock",label:"Stock",type:"number",value:i.values.stock,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.stock&&(i.errors.stock?{color:"error",helperText:`${i.errors.stock}`}:{color:"success"})}),h.jsx(He,{variant:"filled",name:"margin",label:"Margin %",onChange:l}),h.jsx(He,{variant:"filled",name:"costPrice",label:"Cost Price",value:i.values.costPrice,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.costPrice&&(i.errors.costPrice?{color:"error",helperText:`${i.errors.costPrice}`}:{color:"success"})}),h.jsx(He,{variant:"filled",name:"sellingPrice",label:"Selling Price",value:i.values.sellingPrice,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.sellingPrice&&(i.errors.sellingPrice?{color:"error",helperText:`${i.errors.sellingPrice}`}:{color:"success"})}),h.jsx("button",{type:"submit",className:"w-[full] h-[5vh] border rounded-[5%] bg-orange-500 p-2",children:"Save Details"})]}),h.jsxs("div",{className:"medicineImage w-[30%] flex flex-col gap-10 h-[60%]",children:[h.jsx("img",{src:r||i.values.medicineImage,alt:"medicineImage",className:"h-[70%] w-[70%] shadow-2xl"}),h.jsx("div",{children:h.jsx(zh,{helperText:"upload image",id:"id_medicineImage",name:"medicineImage",onChange:c,onBlur:i.handleBlur,...i.touched.medicineImage&&(i.errors.medicineImage?{color:"error",helperText:`${i.errors.medicineImage}`}:{color:"success"})})})]})]})]})}var RJ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Q4=Or.createContext&&Or.createContext(RJ),bTe=["attr","size","title"];function wTe(e,t){if(e==null)return{};var r=STe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function STe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jw.apply(this,arguments)}function Z4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Uw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z4(Object(r),!0).forEach(function(n){TTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TTe(e,t,r){return t=CTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CTe(e){var t=RTe(e,"string");return typeof t=="symbol"?t:t+""}function RTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IJ(e){return e&&e.map((t,r)=>Or.createElement(t.tag,Uw({key:r},t.attr),IJ(t.child)))}function jn(e){return t=>Or.createElement(ITe,jw({attr:Uw({},e.attr)},t),IJ(e.child))}function ITe(e){var t=r=>{var{attr:n,size:i,title:o}=e,a=wTe(e,bTe),s=i||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),Or.createElement("svg",jw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:c,style:Uw(Uw({color:e.color||r.color},r.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&Or.createElement("title",null,o),e.children)};return Q4!==void 0?Or.createElement(Q4.Consumer,null,r=>t(r)):t(RJ)}function NT(e){return jn({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.5 0h-12c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h12c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM13 14h-11v-12h11v12zM4 9h7v1h-7zM4 11h7v1h-7zM5 4.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5zM7.5 6h-2c-0.825 0-1.5 0.45-1.5 1v1h5v-1c0-0.55-0.675-1-1.5-1z"},child:[]}]})(e)}function xTe(e){return jn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function xJ(e){return jn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"},child:[]}]})(e)}function ATe(e){return jn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"},child:[]}]})(e)}function d2(e){return jn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.5 4.5c-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .65.73.45.75.45C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.41.21.75-.19.75-.45V6c-1.49-1.12-3.63-1.5-5.5-1.5zm3.5 14c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"},child:[]}]})(e)}function AJ(e){return jn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(e)}function h2(e){return jn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16ZM11 14V16H13V14H11ZM7 14V16H9V14H7ZM15 14V16H17V14H15Z"},child:[]}]})(e)}function NTe(){return h.jsxs("div",{className:"w-full h-[10vh] px-2 text-center font-bold flex justify-center items-center gap-2 ",children:[h.jsxs(Ar,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/pharmacy/profile/profileDetails ",children:[h.jsx(NT,{className:"h-full w-[5%]"}),h.jsx("span",{className:"flex flex-1",children:"Profile Details"})]}),h.jsxs(Ar,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/pharmacy/profile/contactDetails",children:[h.jsx(d2,{className:"h-full w-[5%]"}),h.jsx("span",{className:"flex flex-1",children:"Contact Details"})]}),h.jsxs(Ar,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/pharmacy/profile/passwordReset",children:[h.jsx(h2,{className:"h-full w-[5%]"}),h.jsx("span",{className:"flex flex-1",children:"Password Reset"})]})]})}function OTe(){return h.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[h.jsx(NTe,{}),h.jsx("div",{className:"w-full h-full mt-5 pb-2",children:h.jsx(eo,{})})]})}function f2(e){return jn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(e)}function Dm(e){return jn({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M308 96c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v44.748c0 6.627 5.373 12 12 12h85.28c27.308 0 48.261 9.958 60.97 27.252H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h158.757c-6.217 36.086-32.961 58.632-74.757 58.632H12c-6.627 0-12 5.373-12 12v53.012c0 3.349 1.4 6.546 3.861 8.818l165.052 152.356a12.001 12.001 0 0 0 8.139 3.182h82.562c10.924 0 16.166-13.408 8.139-20.818L116.871 319.906c76.499-2.34 131.144-53.395 138.318-127.906H308c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-58.69c-3.486-11.541-8.28-22.246-14.252-32H308z"},child:[]}]})(e)}function Gh(e){return jn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(e)}function kTe(e){return jn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Video_On"},child:[{tag:"path",attr:{d:"M21.05,5.05a1.433,1.433,0,0,0-1.48.08L16.25,7.37V6.56a2.5,2.5,0,0,0-2.5-2.5H4.69a2.5,2.5,0,0,0-2.5,2.5V17.44a2.5,2.5,0,0,0,2.5,2.5h9.06a2.5,2.5,0,0,0,2.5-2.5v-.81l3.32,2.24a1.5,1.5,0,0,0,.81.24,1.414,1.414,0,0,0,1.43-1.43V6.32A1.437,1.437,0,0,0,21.05,5.05Zm-5.8,12.39a1.5,1.5,0,0,1-1.5,1.5H4.69a1.5,1.5,0,0,1-1.5-1.5V6.56a1.5,1.5,0,0,1,1.5-1.5h9.06a1.5,1.5,0,0,1,1.5,1.5Zm5.56.24a.415.415,0,0,1-.23.38.425.425,0,0,1-.45-.02l-3.88-2.62V8.58l3.88-2.62a.425.425,0,0,1,.45-.02.415.415,0,0,1,.23.38Z"},child:[]}]}]})(e)}function NJ({username:e}){const{email:t}=oi(n=>n.user),r=qn({initialValues:{password:"",confirmPassword:""},validationSchema:nq,onSubmit:async(n,i)=>{await wge({password:n.password,email:t})&&(await re.fire({icon:"success",text:"Password has been reset"}),window.location.reload())}});return h.jsx("div",{className:"w-full h-full",children:h.jsxs("form",{onSubmit:r.handleSubmit,className:"w-full h-full flex flex-col gap-6",children:[h.jsx(He,{variant:"filled",label:"New Password",type:"password",name:"password",onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.password&&(r.errors.password?{color:"error",helperText:`${r.errors.password}`}:{color:"success"})}),h.jsx(He,{variant:"filled",label:"Confirm Password",type:"password",name:"confirmPassword",onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.confirmPassword&&(r.errors.confirmPassword?{color:"error",helperText:`${r.errors.confirmPassword}`}:{color:"success"})}),h.jsxs("button",{type:"submit",className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(Gh,{}),"Save"]})]})})}function e5(){return h.jsx("div",{className:"w-full h-full flex flex-col pt-[15vh] items-center",children:h.jsxs("div",{className:"resetPassword w-[40%] h-fit flex flex-col gap-6 border shadow-lg p-5 ",children:[h.jsx("h1",{className:"text-lg font-medium",children:"Reset Password"}),h.jsx(NJ,{})]})})}function PTe(e){const{medicine:t}=e;return console.log(`medicine ${JSON.stringify(t)}`),h.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:h.jsxs("div",{className:"h-full w-full flex flex-col ",children:[h.jsx("div",{className:"w-full h-[50%] ",children:h.jsx("img",{src:t.medicineImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[h.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[h.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t.medicineId.medicineName}),h.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:h.jsx("div",{className:"price w-full h-[5vh]",children:h.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[h.jsx(Dm,{})," ",t.sellingPrice]})})})]}),h.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:h.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",children:"Order Medicine"})})]})]})})}const _v="https://hcompanion.onrender.com/api",p2=sessionStorage.getItem("token"),DTe=async()=>{try{const e=await be.get(`${_v}/patient/medicines/getAllMedicines`);return console.log(e),e.data.medicines}catch(e){console.log(e)}},LTe=async({inventoryId:e})=>{try{const t=await be.post(`${_v}/patient/medicines/getMedicineDetails`,{inventoryId:e});return console.log(t),t.data.medicine}catch(t){console.log(t)}},MTe=async()=>{try{return(await be.get(`${_v}/patient/doctor/medicine/requests`,{headers:{Authorization:`bearer ${p2}`}})).data.medicines}catch(e){return console.log(e),!1}},jTe=async({razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,doctorId:n,order:i,pharmacyId:o,pharmacyInventoryId:a})=>{try{const s=await be.post(`${_v}/patient/doctors/medicine/requests/order`,{razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,doctorId:n,order:i,pharmacyId:o,pharmacyInventoryId:a},{headers:{Authorization:`bearer ${p2}`}});return!0}catch(s){return console.log(s),!1}},UTe=async()=>{try{return(await be.get(`${_v}/patient/doctors/medicine/requests/ordered`,{headers:{Authorization:`bearer ${p2}`}})).data.medicines}catch(e){return console.log(e),!1}};function FTe(){const e=en(),[t,r]=C.useState([]),n=async()=>{const o=await DTe();o.length>0&&await r(o)},i=async(o,a)=>{e({pathname:"/patient/medicines/medicineDetails",search:`?${Jb({inventoryId:encodeURIComponent(a)})}`})};return C.useEffect(()=>{n()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"medicinesList w-full h-full flex flex px-20 py-5 ",children:h.jsx("div",{className:"w-full h-full p-4 grid grid-cols-4 justify-items-center gap-y-10 ",children:t&&t.length>0?t.map((o,a)=>h.jsx("div",{className:"w-auto h-auto flex flex-col cursor-pointer hover:bg-slate-400 rounded-lg",onClick:s=>i(s,o._id),children:h.jsx(PTe,{medicine:o},o._id)},o._id)):h.jsx("span",{className:"text-lg font-medium",children:"No Medicines.....:)"})})})})}function VTe(){const[e,t]=C.useState(void 0),[r,n]=gW(),i=async()=>{const o=await LTe({inventoryId:decodeURIComponent(r.get("inventoryId"))});t(o)};return C.useEffect(()=>{i()},[r]),h.jsx("div",{className:"w-full h-screen flex flex-col",children:h.jsxs("div",{className:"content w-full h-full grid grid-cols-2 justify-items-center gap-8  ",children:[h.jsx("div",{className:"image w-full h-[70vh] mt-2 flex justify-center ml-10   ",children:h.jsx("img",{src:e&&e.medicineImage,alt:"Medicine Image",className:"h-full w-[70%]"})}),h.jsxs("div",{className:"w-full h-full pl-4 grid grid-cols-1 gap-y-4 place-content-center ",children:[h.jsx("div",{className:"",children:h.jsx("pre",{className:"opacity-50 text-medium font-medium",children:`By pharmacy ${e&&e.pharmacyId.userId.username}`})}),h.jsx("h1",{className:"font-sm text-[6vh] text-emerald-400 ",children:e&&e.medicineId.medicineName}),h.jsx("div",{className:"price w-full h-[10vh] ",children:h.jsxs("span",{className:"w-full h-full text-2xl font-medium flex items-center gap-4",children:[h.jsx(Dm,{})," ",e&&e.sellingPrice]})}),h.jsxs("div",{className:"description w-full h-full text-black opacity-60 flex  gap-2 ",children:[h.jsx("h1",{children:"Description : "}),h.jsx("span",{className:"",children:e&&e.medicineId.description})]}),h.jsx("div",{className:"w-full h-[10vh] flex  py-1 mb-2 pr-[40%]",children:h.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",children:"Order Medicine"})})]})]})})}function BTe(e){return jn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 2H6a2 2 0 0 0-2 2v3H2v2h2v2H2v2h2v2H2v2h2v3a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm-8 2.999c1.648 0 3 1.351 3 3A3.012 3.012 0 0 1 13 11c-1.647 0-3-1.353-3-3.001 0-1.649 1.353-3 3-3zM19 18H7v-.75c0-2.219 2.705-4.5 6-4.5s6 2.281 6 4.5V18z"},child:[]}]})(e)}function Fw(e){return jn({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M0 64C0 46.3 14.3 32 32 32l64 0 16 0 176 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-56.2 0c9.6 14.4 16.7 30.6 20.7 48l35.6 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-35.6 0c-13.2 58.3-61.9 103.2-122.2 110.9L274.6 422c14.4 10.3 17.7 30.3 7.4 44.6s-30.3 17.7-44.6 7.4L13.4 314C2.1 306-2.7 291.5 1.5 278.2S18.1 256 32 256l80 0c32.8 0 61-19.7 73.3-48L32 208c-17.7 0-32-14.3-32-32s14.3-32 32-32l153.3 0C173 115.7 144.8 96 112 96L96 96 32 96C14.3 96 0 81.7 0 64z"},child:[]}]})(e)}function OT(e){return jn({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"},child:[]}]})(e)}function xE(e){return jn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-96 55.2C54 332.9 0 401.3 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7c0-81-54-149.4-128-171.1l0 50.8c27.6 7.1 48 32.2 48 62l0 40c0 8.8-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16s7.2-16 16-16l0-24c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 24c8.8 0 16 7.2 16 16s-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16l0-40c0-29.8 20.4-54.9 48-62l0-57.1c-6-.6-12.1-.9-18.3-.9l-91.4 0c-6.2 0-12.3 .3-18.3 .9l0 65.4c23.1 6.9 40 28.3 40 53.7c0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.4 16.9-46.8 40-53.7l0-59.1zM144 448a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"},child:[]}]})(e)}function $Te(){return h.jsxs("div",{className:"screen w-full h-full flex flex-row gap-4",children:[h.jsxs("div",{className:"sideOptions w-[18%] p-4 h-full grid grid-cols-1 gap-6 border shadow-lg shadow-emerald-300",children:[h.jsxs(Ar,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/details",children:[h.jsx(NT,{className:"w-[3vw] h-[3vh]"}),"Personal Details",h.jsx("span",{})," "]}),h.jsxs(Ar,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/contactDetails",children:[h.jsx(BTe,{className:"w-[3vw] h-[3vh]"}),"Contact Details",h.jsx("span",{})]}),h.jsxs(Ar,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/bookings",children:[h.jsx(xE,{className:"w-[3vw] h-[3vh]"}),"Booking Details",h.jsx("span",{})]}),h.jsxs(Ar,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/medicine",children:[h.jsx(xE,{className:"w-[3vw] h-[3vh]"}),"Medicines",h.jsx("span",{})]}),h.jsxs(Ar,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/test",children:[h.jsx(xE,{className:"w-[3vw] h-[3vh]"}),"Lab Tests",h.jsx("span",{})]}),h.jsxs(Ar,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/prescription",children:[h.jsx(xE,{className:"w-[3vw] h-[3vh]"}),"Prescriptions",h.jsx("span",{})]})]}),h.jsx("div",{className:"content w-[60%] flex flex-1 flex-col overflow-y-auto",children:h.jsx(eo,{})})]})}const HTe=Ii().shape({firstName:jt(),lastName:jt(),bloodGroup:jt().matches(/^(A|B|AB|O)[+-]$/,"Not a valid Blood Group"),weight:jt().matches(/^[1-9][0-9]{0,5}(\.[0-9]{1,2})?$/,"Valid weight"),height:jt().matches(/^[1-9][0-9]{0,5}(\.[0-9]{1,2})?$/,"Valid height")}),zTe=Ii().shape({place:jt(),state:jt(),country:jt(),pincode:jt().matches(/[1-9][0-9]{5}$/,"Valid Number"),district:jt(),phone:d9().of(jt().matches(/^[1-9][0-9]{9}$/,"not valid number"))});Ii().shape({password:jt(),confirmPassword:jt()});function GTe(){C.useState(void 0);const[e,t]=C.useState(void 0),r=qn({initialValues:{firstName:"",lastName:"",bloodGroup:"",weight:"",height:"",profileImage:""},validationSchema:HTe,onSubmit:async(o,a)=>{console.log(o),await bwe(o)&&i()}}),n=o=>{const a=o.target.files[0],s=new FileReader;s.onload=c=>{const l=c.target.result;t(l),r.setFieldValue("profileImage",a)},s.readAsDataURL(a)},i=async()=>{const o=await eJ();console.log(`temp ${JSON.stringify(o)}`),o&&(await r.setFieldValue("firstName",o.firstName),r.setFieldValue("lastName",o.lastName),r.setFieldValue("bloodGroup",o.bloodGroup),r.setFieldValue("weight",o.weight),r.setFieldValue("height",o.height),r.setFieldValue("profileImage",o.profileImage))};return C.useEffect(()=>{i()},[]),console.log(r.values),h.jsxs("form",{onSubmit:r.handleSubmit,className:"screen w-full h-full mt-5 flex flex-col gap-4",children:[h.jsxs("div",{className:"image w-full h-auto flex gap-4 justify-start pl-[20vw]",children:[h.jsx("img",{src:e||r.values.profileImage,className:"rounded-full w-[20vh] h-[20vh]"}),h.jsx("div",{className:"w-full h-auto flex flex-1 items-center ",children:h.jsx("div",{className:"flex flex-col gap-1",children:h.jsx(zh,{id:"id_profileImage",name:"profileImage",helperText:"upload image",onChange:n,onBlur:r.handleBlur,...r.touched.profileImage&&(r.errors.profileImage?{color:"error",helperText:`${r.errors.profileImage}`}:{color:"success"})})})})]}),h.jsx("div",{className:"w-full h-full mt-10 flex justify-center  ",children:h.jsxs("div",{className:"w-[60%] h-full flex flex-col gap-4",children:[h.jsxs("div",{className:"w-full  grid grid-cols-2 gap-2 ",children:[h.jsx(He,{variant:"filled",name:"firstName",label:"First Name",value:r.values.firstName,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.firstName&&(r.errors.firstName?{color:"error",helperText:`${r.errors.firstName}`}:{color:"success"})}),h.jsx(He,{variant:"filled",name:"lastName",label:"Last Name",value:r.values.lastName,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.lastName&&(r.errors.lastName?{color:"error",helperText:`${r.errors.lastName}`}:{color:"success"})})]}),h.jsx(He,{variant:"filled",name:"bloodGroup",label:"Blood Group",className:"w-full ",value:r.values.bloodGroup,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.bloodGroup&&(r.errors.bloodGroup?{color:"error",helperText:`${r.errors.bloodGroup}`}:{color:"success"})}),h.jsx(He,{variant:"filled",name:"weight",label:"weight",className:"w-full ",value:r.values.weight,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.weight&&(r.errors.weight?{color:"error",helperText:`${r.errors.weight}`}:{color:"success"})}),h.jsx(He,{variant:"filled",name:"height",label:"height",className:"w-full ",value:r.values.height,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.height&&(r.errors.height?{color:"error",helperText:`${r.errors.height}`}:{color:"success"})}),h.jsx("button",{type:"submit",className:"w-[full] h-[5vh] border font-medium rounded-[5%] bg-orange-500 p-2 ",children:"Save"})]})})]})}const WTe={firstName:"",lastName:"",profileImage:"",weight:"",height:""},OJ=Im({name:"doctor",initialState:WTe,reducers:{setDoctor(e,t){e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,e.profileImage=t.payload.profileImage,e.weight=t.payload.weight,e.height=t.payload.height}}}),{setDoctor:jR}=OJ.actions,KTe=OJ.reducer,kJ="https://hcompanion.onrender.com/api",qTe=async({token:e})=>{try{const t=await be.get(`${kJ}/doctor/getBasicDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.userData}catch(t){return t.response.status=="401"&&re.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}},YTe=async({token:e})=>{try{const t=await be.get(`${kJ}/doctor/profile/viewDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.doctorDetails}catch(t){return console.log(t),t.response.status=="401"&&re.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),!1}};dt.extend(tc);const XTe="wss://hcompanion.onrender.com",JTe=async({userId:e})=>{const t=new WebSocket(XTe);t.onopen=()=>{console.log("connected to websocket"),t.send(JSON.stringify({type:"register",clientId:e}))},t.onmessage=r=>{const n=JSON.parse(r==null?void 0:r.data);if(n.type=="meetingReminder"){const i=dt().diff(dt(`${n.booking.startTime}`,"H:mm A"),"minutes");Math.abs(i)<=60&&re.fire(`Meeting in ${Math.abs(i)} minutes`,"","warning")}}};function QTe(){const e=en(),t=Hh(),{username:r,email:n,role:i,isLoggedIn:o}=oi(c=>c.user),a=oi(c=>c.doctor),s=async()=>{if(sessionStorage.getItem("token")){const c=await qTe({token:sessionStorage.getItem("token")});if(c){const l=await YTe({token:sessionStorage.getItem("token")});await JTe({userId:c._id}),console.log(l),t(Ao({username:c.username,email:c.email,role:c.role,isLoggedIn:!0})),t(jR({firstName:l.firstName,lastName:l.lastName,profileImage:l.profileImage,weight:l.weight,height:l.height,profileImage:l.profileImage}))}else Ao({}),jR({})}};return console.log(a),C.useEffect(()=>{s()},[]),h.jsx("div",{className:"navBar w-full h-full flex flex-col",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-4 p-4 bg-slate-800 bg-opacity-90 rounded-tr-[3%]  ",children:[h.jsxs("div",{className:"w-full h-[15vh] flex flex-row items-center gap-4  p-1  ",children:[h.jsx("img",{src:a.profileImage,className:"rounded-full w-[4vw] h-[100%]"}),h.jsxs("div",{className:"h-full w-full pl-4 flex flex-1 flex-col justify-center gap-2 bg-white bg-opacity-40 rounded-lg ",children:[h.jsx("h2",{className:"text-lg font-bold",children:a&&a.firstName?a.firstName:r}),h.jsx("span",{className:" font-sm",children:"Doctor"})]})]}),h.jsx("div",{className:"search w-full h-[5%]",children:h.jsx(He,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),h.jsxs("div",{className:"options h-full w-full mt-10 flex flex-col gap-4 font-medium text-white ",children:[h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/doctorHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/home")},children:"Home"})]}),h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/doctorSlotSetting.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",id:"id_navSlot",onClick:()=>{e("/doctor/slot")},children:"Slot"})]}),h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/doctorBookings.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/bookings")},children:"Bookings"})]}),h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/profile")},children:"Profile"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),t(Ao({})),t(jR({})),e("/")},children:"sign out"})]})]})]})})}function ZTe(){return h.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[h.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:h.jsx(QTe,{})}),h.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:h.jsx(eo,{})})]})}dt.extend(tc);const eCe=dt(),Gg=[];for(var UR=0;UR<=5;UR++)Gg.push(eCe.add(UR,"day").format("D MMM, dddd YYYY").toString());dt.extend(tc);dt();const tCe=["9:00 AM","11:00 AM","1:00 PM","3:00 PM","5:00 PM","7:00 PM"],m2="https://hcompanion.onrender.com/api",rCe=sessionStorage.getItem("token"),nCe=async({startTime:e,slotDate:t})=>{try{const r=await be.post(`${m2}/doctor/slot/add`,{startTime:e,slotDate:t},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(r.data),r.data.addedSlot&&re.fire({icon:"success",text:"Added Slot"}),r.data.addedSlot}catch(r){return console.log(`error ${r}`),!1}},t5=async({slotDate:e})=>{var t;try{console.log("token in slot",rCe);const r=await be.post(`${m2}/doctor/slot/viewSlots`,{slotDate:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(r.data),r.data.slots}catch(r){return console.log(r),((t=r.response)==null?void 0:t.status)=="401"&&re.fire({html:`<b>${r.response.data.message}</b>`,title:"Session Out"}),r.response.status=="400"&&r.response.data.invalidToken&&re.fire({html:`<b>${r.response.status.message}</b>`,title:"Session Out"}),!1}},iCe=async({bookingId:e})=>{try{const t=await be.post(`${m2}/doctor/slot/removeSlot`,{bookingId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),re.fire({icon:"success",text:"Removed the Slot"}),!0}catch(t){return console.log(`error ${t}`),!1}};dt.extend(tc);function oCe(){const[e,t]=C.useState(void 0),[r,n]=C.useState([]);oi(a=>a.doctor);const i=async()=>{await t(Gg[0]);const a=await t5({slotDate:Gg[0]});console.log(a),await n(a)},o=async a=>{await t(a);const s=await t5({slotDate:a});console.log(s),await n(s)};return C.useEffect(()=>{t(Gg[0]),i()},[]),h.jsx("div",{className:"w-full h-full flex p-4",children:h.jsxs("div",{className:"w-full h-full flex flex-row gap-8",children:[h.jsxs("div",{className:"w-[20%] h-auto p-4 flex flex-col gap-2 border shadow-lg shadow-emerald-400 bg-black bg-opacity-30 rounded-2xl ",children:[h.jsx("h1",{className:"font-bold",children:"Dates"}),h.jsx("div",{className:"dates w-full h-[10%] grid grid-cols-1 justify-items-start gap-4 ",children:Gg.map((a,s)=>h.jsx("button",{className:"p-2 w-full h-full font-medium bg-emerald-400 bg-opacity-50 border flex justify-start pl-5 ",id:`id_slotDate_${s}`,onClick:()=>o(a),children:a},s))})]}),h.jsxs("div",{className:"w-[80%] h-full bg-black bg-opacity-30 rounded-xl  pt-10 pl-8 pr-5 flex flex-col overflow-y-scroll",children:[h.jsxs("h2",{className:"font-bold flex flex-row justify-evenly",children:["Slots ",h.jsx("span",{children:e||"date"})]}),h.jsx("div",{className:"w-full mt-10 gap-4 flex flex-col  p-8 ",children:tCe.map((a,s)=>h.jsx("div",{className:"w-auto h-auto bg-white rounded-lg",children:dt().isBefore(dt(dt(`${e} ${dt(a,"h:mm A").format("H:mm A")}`,"D MMM, dddd YYYY H:mm A").format("D MMM, dddd YYYY H:mm A"),"D MMM, dddd YYYY H:mm A"))&&(r&&r.length>0&&r.some(c=>c.startTime==dt(a,"h:mm A").format("H:mm A").toString())?r.find(c=>c.startTime==dt(a,"h:mm A").format("H:mm A").toString()).bookedStatus==1?h.jsx(sCe,{time:a,onLoad:i,timeIndex:s,slot:r.find(c=>c.startTime==dt(a,"h:mm A").format("H:mm A").toString())}):h.jsx(cCe,{timeIndex:s,time:a,slot:r.find(c=>c.startTime==dt(a,"h:mm A").format("H:mm A").toString()),onLoad:i}):h.jsx(aCe,{timeIndex:s,time:a,selectedDate:e,onLoad:i}))},s))})]})]})})}function aCe(e){const{timeIndex:t}=e,r=async()=>{console.log(`slot date ${e.slotDate}`),await nCe({slotDate:e.selectedDate,startTime:dt(e.time,"h:mm A").format("H:mm A").toString()})&&e.onLoad()};return h.jsxs("div",{className:"w-full h-[15vh] p-4 flex flex-row gap-2 border rounded-lg shadow-lg",children:[h.jsx("div",{className:"w-[20%] flex items-center justify-center border shadow-md",children:h.jsx("span",{className:"text-emerald-400 font-medium text-lg",children:e.time})}),h.jsx("div",{className:"flex flex-1 flex-row gap-10 items-center pl-10 border shadow-md",children:h.jsx("button",{className:"w-[30%] h-[60%] bg-green-400 font-medium border ",id:`id_btnaddslot_${t}`,onClick:r,children:"Add"})})]})}function sCe(e){return h.jsxs("div",{className:"w-full h-[20vh] p-4 bg-red-400 bg-opacity-50 flex flex-row gap-2 border rounded-lg shadow-lg",children:[h.jsx("div",{className:"w-[20%] flex items-center justify-center  shadow-md",children:h.jsx("span",{className:"text-emerald-400 font-medium text-lg",children:e.time})}),h.jsxs("div",{className:"w-full h-full flex flex-1 flex-row gap-10 items-center pl-10 py-2 shadow-md",children:[h.jsx("button",{className:"w-[30%] h-[60%] bg-red-400 font-medium border ",children:"Reschedule"}),h.jsxs("div",{className:"w-full h-full grid grid-cols-1 justify-items-center pt-2 gap-2 ",children:[h.jsx("button",{className:"w-[70%] h-full bg-green-400 font-medium ",children:"View Booking Details "}),h.jsx("span",{className:"w-[70%] h-full  text-center bg-blue-500 flex justify-center items-center text-white font-medium text-md",children:e.slot.patientId.firstName})]})]})]})}function cCe(e){const{timeIndex:t}=e,r=async()=>{await iCe({bookingId:e.slot._id})&&e.onLoad()};return h.jsxs("div",{className:"w-full h-[15vh] p-4 bg-orange-400 bg-opacity-50 flex flex-row gap-2 border rounded-lg shadow-lg",children:[h.jsx("div",{className:"w-[20%] flex items-center justify-center border shadow-md",children:h.jsx("span",{className:"text-emerald-400 font-medium text-lg",children:e.time})}),h.jsx("div",{className:"flex flex-1 flex-row items-center pl-10 border shadow-md",children:h.jsx("button",{className:"w-[30%] h-[60%] bg-red-400 font-medium border ",id:`id_btnRemoveSlot_${t}`,onClick:r,children:"Remove"})})]})}function PJ(e){var t;return h.jsxs("div",{className:"w-auto h-[25vh] flex flex-row gap-1 hover:bg-blue-400 hover:bg-opacity-40 border shadow-xl p-2 rounded-lg",children:[h.jsx("div",{className:"w-[30%] h-full flex gap-4 ",children:h.jsx("img",{src:e.doctor.profileImage,className:"w-full h-full rounded-md"})}),h.jsxs("div",{className:"details w-full h-full pl-2 pt-5 flex flex-row  gap-4 ",children:[h.jsxs("div",{className:"w-[50%] h-full pl-10 pt-1 flex flex-col  gap-4",children:[h.jsx("div",{className:" w-auto",children:h.jsx("span",{className:"text-sm font-medium opacity-40",children:(t=e==null?void 0:e.doctor)==null?void 0:t.specialization})}),h.jsx("span",{className:"text-xl font-medium",children:`Dr. ${e.doctor.userId.username}`}),h.jsx("span",{className:"font-sm opacity-60",children:"16 years of experience"})]}),h.jsxs("div",{className:"w-[50%] h-full pb-8 flex flex-col gap-10 justify-end pr-5",children:[h.jsxs("span",{className:"text-lg font-bold opacity-80 flex justify-end items-center gap-2",children:[h.jsx("span",{className:"font-medium",children:"consultation fee"}),h.jsx(Dm,{}),h.jsx("span",{children:e.doctor.bookingPrice})]}),h.jsx("button",{className:"w-full h-[5vh] font-medium border rounded-[5%] bg-orange-500 p-2 hover:bg-opacity-50",children:"Book Consult"})]})]})]})}const g2="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const lCe=async()=>{try{const e=await be.get(`${g2}/patient/doctors/allDoctors`);return console.log(e.data),e.data.doctors}catch(e){return console.log(e),e.response.status=="401"&&re.fire({html:`<b>${e.response.status.message}</b>`,title:"Session Out"}),!1}},r5=async({slotDate:e,doctorId:t})=>{try{const r=await be.post(`${g2}/patient/doctors/freeSlots`,{slotDate:e,doctorId:t});return console.log(r.data),r.data.slots}catch(r){return console.log(r),!1}},DJ=async({doctorId:e})=>{try{const t=await be.post(`${g2}/patient/doctors/doctorDetails`,{doctorId:e});return console.log(t.data),t.data.doctor}catch(t){return console.log(t),!1}};function uCe(){const e=en(),[t,r]=C.useState([]),n=async()=>{const i=await lCe();await r(i)};return C.useEffect(()=>{n()},[]),h.jsx("div",{className:"w-full h-screen flex flex-col",children:h.jsxs("div",{className:"w-full h-full flex flex-row gap-10 pl-10",children:[h.jsx("div",{className:"w-[60%] h-full flex flex-1 flex-col flex-1 gap-10",children:t&&t.length>0&&t.map((i,o)=>h.jsx("div",{className:"w-auto h-auto cursor-pointer ",id:`id_doctor_${o}`,onClick:()=>e(`/patient/doctors/${i._id}`),children:h.jsx(PJ,{doctor:i})},o))}),h.jsx("div",{className:"w-[40%] h-full flex ",children:h.jsx(eo,{})})]})})}dt.extend(tc);const dCe=dt(),LJ=[];for(var FR=0;FR<=5;FR++)LJ.push(dCe.add(FR,"day").format("D MMM, dddd YYYY").toString());function bv(e){return jn({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M960 95.888l-256.224.001V32.113c0-17.68-14.32-32-32-32s-32 14.32-32 32v63.76h-256v-63.76c0-17.68-14.32-32-32-32s-32 14.32-32 32v63.76H64c-35.344 0-64 28.656-64 64v800c0 35.343 28.656 64 64 64h896c35.344 0 64-28.657 64-64v-800c0-35.329-28.656-63.985-64-63.985zm0 863.985H64v-800h255.776v32.24c0 17.679 14.32 32 32 32s32-14.321 32-32v-32.224h256v32.24c0 17.68 14.32 32 32 32s32-14.32 32-32v-32.24H960v799.984zM736 511.888h64c17.664 0 32-14.336 32-32v-64c0-17.664-14.336-32-32-32h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32zm0 255.984h64c17.664 0 32-14.32 32-32v-64c0-17.664-14.336-32-32-32h-64c-17.664 0-32 14.336-32 32v64c0 17.696 14.336 32 32 32zm-192-128h-64c-17.664 0-32 14.336-32 32v64c0 17.68 14.336 32 32 32h64c17.664 0 32-14.32 32-32v-64c0-17.648-14.336-32-32-32zm0-255.984h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32h64c17.664 0 32-14.336 32-32v-64c0-17.68-14.336-32-32-32zm-256 0h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32h64c17.664 0 32-14.336 32-32v-64c0-17.68-14.336-32-32-32zm0 255.984h-64c-17.664 0-32 14.336-32 32v64c0 17.68 14.336 32 32 32h64c17.664 0 32-14.32 32-32v-64c0-17.648-14.336-32-32-32z"},child:[]}]})(e)}function hCe(e){return jn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M8 13C7.44772 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11C8.55228 11 9 11.4477 9 12C9 12.5523 8.55228 13 8 13Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M8 17C7.44772 17 7 16.5523 7 16C7 15.4477 7.44772 15 8 15C8.55228 15 9 15.4477 9 16C9 16.5523 8.55228 17 8 17Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M11 16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M16 17C15.4477 17 15 16.5523 15 16C15 15.4477 15.4477 15 16 15C16.5523 15 17 15.4477 17 16C17 16.5523 16.5523 17 16 17Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M11 12C11 12.5523 11.4477 13 12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M16 13C15.4477 13 15 12.5523 15 12C15 11.4477 15.4477 11 16 11C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9H16C16.5523 9 17 8.55228 17 8C17 7.44772 16.5523 7 16 7H8Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M6 3C4.34315 3 3 4.34315 3 6V18C3 19.6569 4.34315 21 6 21H18C19.6569 21 21 19.6569 21 18V6C21 4.34315 19.6569 3 18 3H6ZM18 5H6C5.44772 5 5 5.44772 5 6V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V6C19 5.44772 18.5523 5 18 5Z",fill:"currentColor"},child:[]}]})(e)}const MJ="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const y2=async({amount:e})=>{try{return(await be.post(`${MJ}/patient/doctors/slots/payment/createOrder`,{amount:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.order}catch(t){return console.log(t),(t.response.status="401")?re.fire({icon:"error",text:"Login for booking"}):(t.response.status=invalidToken)&&re.fire({icon:"error",text:"Login for booking"}),!1}},fCe=async({razorpay_payment_id:e,razorpay_order_id:t,razorpay_signature:r,order:n,doctorId:i,slotDetails:o})=>{try{const a=sessionStorage.getItem("token"),s=await be.post(`${MJ}/patient/doctors/slots/payment/paymentVerification`,{razorpay_payment_id:e,razorpay_order_id:t,razorpay_signature:r,order:n,doctorId:i,slotDetails:o},{headers:{Authorization:`bearer ${a}`}});return!0}catch(a){return console.log(a),(a.response.status="401")?re.fire({icon:"error",text:"Login for booking"}):(a.response.status=invalidToken)?re.fire({icon:"error",text:"Login Again"}):(a.response.status="500")&&re.fire({icon:"error",text:"Server issue please try later"}),!1}},pCe=Ii().shape({amount:jt().matches(/^[1-9][0-9]{0,5}(\.[0-9]{1,2})?$/,"Invalid amount")}),Wh="https://hcompanion.onrender.com/api",mCe=sessionStorage.getItem("token"),gCe=async()=>{try{return(await be.get(`${Wh}/patient/tests/getAllTestAvailable`)).data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"?re.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorTestPresent&&re.fire({icon:"warning",text:"Test can't be found at database"}),!1}},yCe=async({testId:e})=>{try{const t=await be.post(`${Wh}/patient/tests/testDetails`,{testId:e});return console.log(t.data),t.data.testAndLabs}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&re.fire({icon:"warning",text:"Test can't be found at database"}),!1}},vCe=async()=>{try{const e=await be.get(`${Wh}/patient/doctor/test/requests`,{headers:{Authorization:`bearer ${mCe}`}});return console.log(e.data),e.data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"?re.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorNoPatient&&re.fire({icon:"warning",text:"Patient Can't be found"}),!1}},ECe=async({razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,order:n,labId:i,testOrderId:o})=>{try{const a=await be.post(`${Wh}/patient/doctor/test/requests/order`,{razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,order:n,labId:i,testOrderId:o},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return!0}catch(a){return console.log(a),a.status=="500"&&a.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):a.status=="400"&&a.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):a.status=="401"?re.fire({icon:"warning",text:"Log In"}):a.status=="404"&&a.response.data.errorNoPatient&&re.fire({icon:"warning",text:"Patient Can't be found"}),!1}},_Ce=async()=>{try{const e=await be.get(`${Wh}/patient/doctor/test/requests/ordered`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("ordered tests",e.data.orders),e.data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"?re.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorNoPatient&&re.fire({icon:"warning",text:"Patient Can't be found"}),!1}},bCe=async({testOrderId:e})=>{try{const t=await be.post(`${Wh}/patient/doctor/test/requests/complete/result`,{testOrderId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.result}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&re.fire({icon:"warning",text:"Test can't be found at database"}),!1}},wCe=async({testOrderId:e})=>{try{return(await be.post(`${Wh}/patient/doctor/test/requests/completed/orderDetails`,{testOrderId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.order}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},v2=void 0,SCe=(e,t)=>{const{order:r,patient:n,user:i,doctor:o}=e;return{key:v2,amount:e.amount*1e3,currency:"INR",name:"Health Companion",description:"Book Patient",image:"/logo.png",order_id:e.order.id,handler:async function(a){console.log("enterd payment handler"),await fCe({razorpay_order_id:a.razorpay_order_id,razorpay_payment_id:a.razorpay_payment_id,razorpay_signature:a.razorpay_signature,doctorId:o._id,order:r,slotDetails:t})?re.fire({icon:"success",text:"The slot has been booked"}):re.fire({icon:"error",text:"The slot has been booked"})},prefill:{name:e.patient.firstName,email:e.user.email,contact:e.user.phone||"7902249173","card[number]":"4111 1111 1111 1111","card[expiry]":"12/30","card[cvv]":"123"},notes:{address:"Health Companion Office"},theme:{color:"#3399cc"}}},TCe=(e,t)=>{var i,o,a,s;const{order:r,medicineOrder:n}=e;return{key:v2,amount:e.amount*1e3,currency:"INR",name:"Health Companion",description:"Book Medicine",image:"/logo.png",order_id:e.order.id,handler:async function(c){await jTe({razorpay_order_id:c.razorpay_order_id,razorpay_payment_id:c.razorpay_payment_id,razorpay_signature:c.razorpay_signature,doctorId:n.pharmacyInventoryId.la,order:r,pharmacyId:n.pharmacyInventoryId.pharmacyId._id,pharmacyInventoryId:n.pharmacyInventoryId._id})&&re.fire("Medicine has been ordere","","success")},prefill:{name:n.patientId.firstName,email:(o=(i=n==null?void 0:n.patientId)==null?void 0:i.userId)==null?void 0:o.email,contact:(s=(a=n==null?void 0:n.patientId)==null?void 0:a.userId)==null?void 0:s.phone},notes:{address:"Health Companion Office"},theme:{color:"#3399cc"}}},CCe=(e,t)=>{var i,o,a,s;const{order:r,testOrder:n}=e;return{key:v2,amount:e.amount*1e3,currency:"INR",name:"Health Companion",description:"Book Test",image:"/logo.png",order_id:e.order.id,handler:async function(c){await ECe({razorpay_order_id:c.razorpay_order_id,razorpay_payment_id:c.razorpay_payment_id,razorpay_signature:c.razorpay_signature,labId:n.labTestId.labId._id,order:r,testOrderId:n._id})&&re.fire("Test has been ordered","","success")},prefill:{name:n.patientId.firstName,email:(o=(i=n==null?void 0:n.patientId)==null?void 0:i.userId)==null?void 0:o.email,contact:(s=(a=n==null?void 0:n.patientId)==null?void 0:a.userId)==null?void 0:s.phone},notes:{address:"Health Companion Office"},theme:{color:"#3399cc"}}};dt.extend(tc);function RCe(){const[e,t]=C.useState(dt().format("D MMM, dddd YYYY").toString()),[r,n]=C.useState(void 0),[i,o]=C.useState(void 0),[a,s]=C.useState([]),[c,l]=C.useState(void 0),[u,d]=C.useState(!1),{doctorId:f}=Em();oi(y=>y.patient),Hh();const p=async()=>{const y=await DJ({doctorId:f});await l(y);const v=dt().format("D MMM, dddd YYYY").toString();t(v);const E=await r5({slotDate:v,doctorId:f});s(E)};C.useEffect(()=>{p()},[f]);const m=async y=>{const v=JSON.parse(y.target.value);console.log(`slot ${JSON.stringify(v)}`),await o(v),await n(dt(v.startTime,"H:mm A").format("h:mm A").toString()),await d(!u)},g=async y=>{y=dt(y,"D ,ddd").format("D MMM, dddd YYYY").toString(),t(y);const v=await r5({slotDate:y,doctorId:f});s(v)};return h.jsxs("div",{className:"w-full h-full",children:[u&&h.jsx(ICe,{openModal:u,setOpenModal:d,time:r,slotDate:e,selectedSlot:i,doctor:c,slotTime:r}),h.jsxs("div",{className:"w-full h-full flex flex-col gap-2 pt-5 overflow-y-scroll pr-2 ",children:[h.jsxs("div",{className:"w-full h-auto px-8 bg-black bg-opacity-20 flex flex-col gap-4 border py-5 rounded-tl-xl shadow-xl",children:[h.jsxs("div",{className:"date w-full h-[10vh] bg-blue-500 rounded-md  flex gap-6 items-center",children:[h.jsx(bv,{className:"h-full w-[6vh]  p-2"}),h.jsx("h2",{className:"text-white font-medium ",children:"Dates"}),h.jsxs("div",{className:"flex flex-1 gap-5 justify-end w-full h-full items-center pr-5",children:[h.jsx("span",{className:"text-white text-md font-medium",children:c&&c.userId.username}),h.jsx("img",{src:c&&c.profileImage,alt:"profile",className:"w-[3vw] h-[7vh] rounded-full"})]})]}),h.jsx("div",{className:"w-full h-auto flex ",children:h.jsx("div",{className:"w-full h-auto grid grid-cols-3 justify-items-center gap-4 p-1",children:LJ.map((y,v)=>h.jsx("button",{className:"w-[10vw] h-[8vh] font-medium text-white bg-slate-700 bg-opacity-70 border shadow-md rounded-lg p-6",id:`id_slotDate_${v}`,onClick:()=>g(y),children:dt(y,"D MMM, dddd YYYY").format("DD ,ddd").toString()},v))})})]}),h.jsxs("div",{className:"w-full h-full bg-black bg-opacity-20 flex flex-col gap-10 mt-5 p-5 border shadow-lg rounded-lg",children:[h.jsxs("div",{className:"w-full h-[10vh] bg-orange-500 text-white flex items-center gap-4 justify-evenly  rounded-md pl-2",children:[h.jsx(xJ,{className:"w-[5vw] h-[5vh]"}),h.jsx("h2",{className:"text-lg font-medium",children:e&&e})]}),h.jsx("div",{className:"w-full h-full grid grid-cols-3 justify-items-center content-start",children:a&&a.length>0&&a.map((y,v)=>h.jsx("button",{value:JSON.stringify(y),className:"w-auto h-auto border p-6 rounded-lg bg-green-400 font-medium shadow-lg",id:`id_slotTime_${v}`,onClick:m,children:dt(y.startTime,"H:mm A").format("h:mm A").toString()},v))})]})]})]})}function ICe(e){const{setOpenModal:t,openModal:r,doctor:n,time:i,slotDate:o,selectedSlot:a}=e,s=oi(u=>u.patient),c=oi(u=>u.user),l=qn({initialValues:{amount:500,patientdDescription:"",slotId:a._id},validationSchema:pCe,onSubmit:async(u,d)=>{const f=await y2({amount:n.bookingPrice});if(await console.log("order",f),f){const p=await SCe({order:f,patient:s,user:c,doctor:n},u);try{const m=new Razorpay(p);console.log("reached before razor pay"),await m.open()}catch(m){console.log("error during payment",m)}}t(!1)}});return C.useEffect(()=>{l.setFieldValue("slotId",a._id),l.setFieldValue("amount",n.bookingPrice)},[]),h.jsx("div",{children:h.jsxs(CE,{show:r,onClose:()=>t(!1),children:[h.jsx(CE.Header,{children:"Slot Details"}),h.jsxs(CE.Body,{className:"h-auto flex flex-col gap-4",children:[h.jsx("div",{className:"w-full h-[15vh] flex justify-end pr-5",children:h.jsxs("div",{className:"flex gap-5 items-center",children:[h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx("span",{className:"text-lg font-medium",children:n&&n.userId.username}),h.jsx("span",{className:"text-sm font-medium opacity-50",children:"Cardiology"})]}),h.jsx("img",{src:n.profileImage,alt:"profile",className:"h-[9vh] w-[4vw] rounded-full"})]})}),h.jsxs("div",{className:"flex gap-4 h-auto items-center bg-blue-500 p-2 text-white",children:[h.jsx(hCe,{className:"h-full w-[3vw]"}),h.jsx("span",{className:"text-xl font-medium h-auto",children:e.slotDate})]}),h.jsxs("div",{className:"flex gap-4 h-auto items-center bg-orange-500 p-2 text-white",children:[h.jsx(xJ,{className:"h-full w-[3vw]"}),h.jsx("span",{className:"text-md font-medium h-auto",children:e.slotTime})]}),h.jsxs("div",{className:"h-[50vh]  w-full flex flex-col gap-2",children:[h.jsx("h2",{className:"font-medium opacity-40",children:"Description (Optional)"}),h.jsx("textarea",{name:"description",onChange:u=>{l.setFieldValue("patientDescription",u.target.value)},id:"id_description",placeholder:"Write down a short description on the purpose of the booking",className:"flex flex-1  "})]})]}),h.jsxs(CE.Footer,{className:"gap-x-5 w-full flex flex-row",children:[h.jsx("button",{type:"submit",onClick:l.handleSubmit,className:"w-[40%] border rounded-[5%] bg-orange-500 p-2",id:"id_btnBookSlot",children:"Book"}),h.jsx("button",{type:"button",className:"w-[40%] border rounded-[5%] bg-red-500 p-2",onClick:()=>t(!1),children:"cancel"})]})]})})}sessionStorage.getItem("token");const jJ=async({diseaseName:e})=>{try{const t=await be.post("http://localhost:8000/predict",{"Medical Condition":e.toLowerCase(),"Blood Type":"O+",Gender:"Male"});return console.log(t.data),t.data.doctor}catch(t){console.log(t)}};var n5;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(n5||(n5={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i5;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(i5||(i5={}));var o5;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(o5||(o5={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=["user","model","function","system"];var s5;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(s5||(s5={}));var c5;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(c5||(c5={}));var l5;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(l5||(l5={}));var u5;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(u5||(u5={}));var by;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(by||(by={}));var d5;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(d5||(d5={}));var h5;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(h5||(h5={}));var f5;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(f5||(f5={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class pf extends fo{constructor(t,r){super(t),this.response=r}}class UJ extends fo{constructor(t,r,n,i){super(t),this.status=r,this.statusText=n,this.errorDetails=i}}class ju extends fo{}class FJ extends fo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xCe="https://generativelanguage.googleapis.com",ACe="v1beta",NCe="0.24.0",OCe="genai-js";var Rh;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Rh||(Rh={}));class kCe{constructor(t,r,n,i,o){this.model=t,this.task=r,this.apiKey=n,this.stream=i,this.requestOptions=o}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||ACe;let o=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||xCe}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function PCe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${OCe}/${NCe}`),t.join(" ")}async function DCe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",PCe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(i){throw new ju(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${i.message}`)}for(const[i,o]of n.entries()){if(i==="x-goog-api-key")throw new ju(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new ju(`Header name ${i} can only be set using the apiClient field`);r.append(i,o)}}return r}async function LCe(e,t,r,n,i,o){const a=new kCe(e,t,r,n,o);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},FCe(o)),{method:"POST",headers:await DCe(a),body:i})}}async function wv(e,t,r,n,i,o={},a=fetch){const{url:s,fetchOptions:c}=await LCe(e,t,r,n,i,o);return MCe(s,c,a)}async function MCe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(i){jCe(i,e)}return n.ok||await UCe(n,e),n}function jCe(e,t){let r=e;throw r.name==="AbortError"?(r=new FJ(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof UJ||e instanceof ju||(r=new fo(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function UCe(e,t){let r="",n;try{const i=await e.json();r=i.error.message,i.error.details&&(r+=` ${JSON.stringify(i.error.details)}`,n=i.error.details)}catch{}throw new UJ(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function FCe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Y_(e.candidates[0]))throw new pf(`${lu(e)}`,e);return VCe(e)}else if(e.promptFeedback)throw new pf(`Text not available. ${lu(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Y_(e.candidates[0]))throw new pf(`${lu(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),p5(e)[0]}else if(e.promptFeedback)throw new pf(`Function call not available. ${lu(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Y_(e.candidates[0]))throw new pf(`${lu(e)}`,e);return p5(e)}else if(e.promptFeedback)throw new pf(`Function call not available. ${lu(e)}`,e)},e}function VCe(e){var t,r,n,i;const o=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const a of(i=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)a.text&&o.push(a.text),a.executableCode&&o.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&o.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function p5(e){var t,r,n,i;const o=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const a of(i=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)a.functionCall&&o.push(a.functionCall);if(o.length>0)return o}const BCe=[by.RECITATION,by.SAFETY,by.LANGUAGE];function Y_(e){return!!e.finishReason&&BCe.includes(e.finishReason)}function lu(e){var t,r,n;let i="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)i+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(i+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const o=e.candidates[0];Y_(o)&&(i+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(i+=`: ${o.finishMessage}`))}return i}function E0(e){return this instanceof E0?(this.v=e,this):new E0(e)}function $Ce(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(f){n[f]&&(i[f]=function(p){return new Promise(function(m,g){o.push([f,p,m,g])>1||s(f,p)})})}function s(f,p){try{c(n[f](p))}catch(m){d(o[0][3],m)}}function c(f){f.value instanceof E0?Promise.resolve(f.value.v).then(l,u):d(o[0][2],f)}function l(f){s("next",f)}function u(f){s("throw",f)}function d(f,p){f(p),o.shift(),o.length&&s(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function HCe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=WCe(t),[n,i]=r.tee();return{stream:GCe(n),response:zCe(i)}}async function zCe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:i}=await r.read();if(n)return E2(KCe(t));t.push(i)}}function GCe(e){return $Ce(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:i}=yield E0(r.read());if(i)break;yield yield E0(E2(n))}})}function WCe(e){const t=e.getReader();return new ReadableStream({start(n){let i="";return o();function o(){return t.read().then(({value:a,done:s})=>{if(s){if(i.trim()){n.error(new fo("Failed to parse stream"));return}n.close();return}i+=a;let c=i.match(m5),l;for(;c;){try{l=JSON.parse(c[1])}catch{n.error(new fo(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(l),i=i.substring(c[0].length),c=i.match(m5)}return o()}).catch(a=>{let s=a;throw s.stack=a.stack,s.name==="AbortError"?s=new FJ("Request aborted when reading from the stream"):s=new fo("Error reading from the stream"),s})}}})}function KCe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let i=0;for(const o of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[i]||(r.candidates[i]={index:i}),r.candidates[i].citationMetadata=o.citationMetadata,r.candidates[i].groundingMetadata=o.groundingMetadata,r.candidates[i].finishReason=o.finishReason,r.candidates[i].finishMessage=o.finishMessage,r.candidates[i].safetyRatings=o.safetyRatings,o.content&&o.content.parts){r.candidates[i].content||(r.candidates[i].content={role:o.content.role||"user",parts:[]});const a={};for(const s of o.content.parts)s.text&&(a.text=s.text),s.functionCall&&(a.functionCall=s.functionCall),s.executableCode&&(a.executableCode=s.executableCode),s.codeExecutionResult&&(a.codeExecutionResult=s.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),r.candidates[i].content.parts.push(a)}i++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VJ(e,t,r,n){const i=await wv(t,Rh.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return HCe(i)}async function BJ(e,t,r,n){const o=await(await wv(t,Rh.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:E2(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $J(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function _0(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return qCe(t)}function qCe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,i=!1;for(const o of e)"functionResponse"in o?(r.parts.push(o),i=!0):(t.parts.push(o),n=!0);if(n&&i)throw new fo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!i)throw new fo("No content is provided for sending chat message.");return n?t:r}function YCe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const i=e.generateContentRequest!=null;if(e.contents){if(i)throw new ju("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(i)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const o=_0(e);n.contents=[o]}return{generateContentRequest:n}}function g5(e){let t;return e.contents?t=e:t={contents:[_0(e)]},e.systemInstruction&&(t.systemInstruction=$J(e.systemInstruction)),t}function XCe(e){return typeof e=="string"||Array.isArray(e)?{content:_0(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],JCe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function QCe(e){let t=!1;for(const r of e){const{role:n,parts:i}=r;if(!t&&n!=="user")throw new fo(`First content should be with role 'user', got ${n}`);if(!a5.includes(n))throw new fo(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(a5)}`);if(!Array.isArray(i))throw new fo("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new fo("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const s of i)for(const c of y5)c in s&&(o[c]+=1);const a=JCe[n];for(const s of y5)if(!a.includes(s)&&o[s]>0)throw new fo(`Content with role '${n}' can't contain '${s}' part`);t=!0}}function v5(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5="SILENT_ERROR";class ZCe{constructor(t,r,n,i={}){this.model=r,this.params=n,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(QCe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,i,o,a,s,c;await this._sendPromise;const l=_0(t),u={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),r);let f;return this._sendPromise=this._sendPromise.then(()=>BJ(this._apiKey,this.model,u,d)).then(p=>{var m;if(v5(p.response)){this._history.push(l);const g=Object.assign({parts:[],role:"model"},(m=p.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(g)}else{const g=lu(p.response);g&&console.warn(`sendMessage() was unsuccessful. ${g}. Inspect response object for details.`)}f=p}),await this._sendPromise,f}async sendMessageStream(t,r={}){var n,i,o,a,s,c;await this._sendPromise;const l=_0(t),u={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),r),f=VJ(this._apiKey,this.model,u,d);return this._sendPromise=this._sendPromise.then(()=>f).catch(p=>{throw new Error(E5)}).then(p=>p.response).then(p=>{if(v5(p)){this._history.push(l);const m=Object.assign({},p.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{const m=lu(p);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(p=>{p.message!==E5&&console.error(p)}),f}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eRe(e,t,r,n){return(await wv(t,Rh.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tRe(e,t,r,n){return(await wv(t,Rh.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function rRe(e,t,r,n){const i=r.requests.map(a=>Object.assign(Object.assign({},a),{model:t}));return(await wv(t,Rh.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=$J(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const i=g5(t),o=Object.assign(Object.assign({},this._requestOptions),r);return BJ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),o)}async generateContentStream(t,r={}){var n;const i=g5(t),o=Object.assign(Object.assign({},this._requestOptions),r);return VJ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),o)}startChat(t){var r;return new ZCe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=YCe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),r);return eRe(this.apiKey,this.model,n,i)}async embedContent(t,r={}){const n=XCe(t),i=Object.assign(Object.assign({},this._requestOptions),r);return tRe(this.apiKey,this.model,n,i)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return rRe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nRe{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new fo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new _5(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new ju("Cached content must contain a `name` field.");if(!t.model)throw new ju("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const a of i)if(r!=null&&r[a]&&t[a]&&(r==null?void 0:r[a])!==t[a]){if(a==="model"){const s=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(s===c)continue}throw new ju(`Different value for "${a}" specified in modelParams (${r[a]}) and cachedContent (${t[a]})`)}const o=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new _5(this.apiKey,o,n)}}function iRe(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const oRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,aRe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,sRe={};function b5(e,t){return(sRe.jsx?aRe:oRe).test(e)}const cRe=/[ \t\n\f\r]/g;function lRe(e){return typeof e=="object"?e.type==="text"?w5(e.value):!1:w5(e)}function w5(e){return e.replace(cRe,"")===""}class Sv{constructor(t,r,n){this.normal=r,this.property=t,n&&(this.space=n)}}Sv.prototype.normal={};Sv.prototype.property={};Sv.prototype.space=void 0;function HJ(e,t){const r={},n={};for(const i of e)Object.assign(r,i.property),Object.assign(n,i.normal);return new Sv(r,n,t)}function cO(e){return e.toLowerCase()}class sa{constructor(t,r){this.attribute=r,this.property=t}}sa.prototype.attribute="";sa.prototype.booleanish=!1;sa.prototype.boolean=!1;sa.prototype.commaOrSpaceSeparated=!1;sa.prototype.commaSeparated=!1;sa.prototype.defined=!1;sa.prototype.mustUseProperty=!1;sa.prototype.number=!1;sa.prototype.overloadedBoolean=!1;sa.prototype.property="";sa.prototype.spaceSeparated=!1;sa.prototype.space=void 0;let uRe=0;const zt=Kh(),hi=Kh(),zJ=Kh(),Oe=Kh(),nn=Kh(),Tp=Kh(),fa=Kh();function Kh(){return 2**++uRe}const lO=Object.freeze(Object.defineProperty({__proto__:null,boolean:zt,booleanish:hi,commaOrSpaceSeparated:fa,commaSeparated:Tp,number:Oe,overloadedBoolean:zJ,spaceSeparated:nn},Symbol.toStringTag,{value:"Module"})),VR=Object.keys(lO);class _2 extends sa{constructor(t,r,n,i){let o=-1;if(super(t,r),S5(this,"space",i),typeof n=="number")for(;++o<VR.length;){const a=VR[o];S5(this,VR[o],(n&lO[a])===lO[a])}}}_2.prototype.defined=!0;function S5(e,t,r){r&&(e[t]=r)}function Lm(e){const t={},r={};for(const[n,i]of Object.entries(e.properties)){const o=new _2(n,e.transform(e.attributes||{},n),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(o.mustUseProperty=!0),t[n]=o,r[cO(n)]=n,r[cO(o.attribute)]=n}return new Sv(t,r,e.space)}const GJ=Lm({properties:{ariaActiveDescendant:null,ariaAtomic:hi,ariaAutoComplete:null,ariaBusy:hi,ariaChecked:hi,ariaColCount:Oe,ariaColIndex:Oe,ariaColSpan:Oe,ariaControls:nn,ariaCurrent:null,ariaDescribedBy:nn,ariaDetails:null,ariaDisabled:hi,ariaDropEffect:nn,ariaErrorMessage:null,ariaExpanded:hi,ariaFlowTo:nn,ariaGrabbed:hi,ariaHasPopup:null,ariaHidden:hi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:nn,ariaLevel:Oe,ariaLive:null,ariaModal:hi,ariaMultiLine:hi,ariaMultiSelectable:hi,ariaOrientation:null,ariaOwns:nn,ariaPlaceholder:null,ariaPosInSet:Oe,ariaPressed:hi,ariaReadOnly:hi,ariaRelevant:null,ariaRequired:hi,ariaRoleDescription:nn,ariaRowCount:Oe,ariaRowIndex:Oe,ariaRowSpan:Oe,ariaSelected:hi,ariaSetSize:Oe,ariaSort:null,ariaValueMax:Oe,ariaValueMin:Oe,ariaValueNow:Oe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function WJ(e,t){return t in e?e[t]:t}function KJ(e,t){return WJ(e,t.toLowerCase())}const dRe=Lm({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Tp,acceptCharset:nn,accessKey:nn,action:null,allow:null,allowFullScreen:zt,allowPaymentRequest:zt,allowUserMedia:zt,alt:null,as:null,async:zt,autoCapitalize:null,autoComplete:nn,autoFocus:zt,autoPlay:zt,blocking:nn,capture:null,charSet:null,checked:zt,cite:null,className:nn,cols:Oe,colSpan:null,content:null,contentEditable:hi,controls:zt,controlsList:nn,coords:Oe|Tp,crossOrigin:null,data:null,dateTime:null,decoding:null,default:zt,defer:zt,dir:null,dirName:null,disabled:zt,download:zJ,draggable:hi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:zt,formTarget:null,headers:nn,height:Oe,hidden:zt,high:Oe,href:null,hrefLang:null,htmlFor:nn,httpEquiv:nn,id:null,imageSizes:null,imageSrcSet:null,inert:zt,inputMode:null,integrity:null,is:null,isMap:zt,itemId:null,itemProp:nn,itemRef:nn,itemScope:zt,itemType:nn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:zt,low:Oe,manifest:null,max:null,maxLength:Oe,media:null,method:null,min:null,minLength:Oe,multiple:zt,muted:zt,name:null,nonce:null,noModule:zt,noValidate:zt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:zt,optimum:Oe,pattern:null,ping:nn,placeholder:null,playsInline:zt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:zt,referrerPolicy:null,rel:nn,required:zt,reversed:zt,rows:Oe,rowSpan:Oe,sandbox:nn,scope:null,scoped:zt,seamless:zt,selected:zt,shadowRootClonable:zt,shadowRootDelegatesFocus:zt,shadowRootMode:null,shape:null,size:Oe,sizes:null,slot:null,span:Oe,spellCheck:hi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Oe,step:null,style:null,tabIndex:Oe,target:null,title:null,translate:null,type:null,typeMustMatch:zt,useMap:null,value:hi,width:Oe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:nn,axis:null,background:null,bgColor:null,border:Oe,borderColor:null,bottomMargin:Oe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:zt,declare:zt,event:null,face:null,frame:null,frameBorder:null,hSpace:Oe,leftMargin:Oe,link:null,longDesc:null,lowSrc:null,marginHeight:Oe,marginWidth:Oe,noResize:zt,noHref:zt,noShade:zt,noWrap:zt,object:null,profile:null,prompt:null,rev:null,rightMargin:Oe,rules:null,scheme:null,scrolling:hi,standby:null,summary:null,text:null,topMargin:Oe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Oe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:zt,disableRemotePlayback:zt,prefix:null,property:null,results:Oe,security:null,unselectable:null},space:"html",transform:KJ}),hRe=Lm({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:fa,accentHeight:Oe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Oe,amplitude:Oe,arabicForm:null,ascent:Oe,attributeName:null,attributeType:null,azimuth:Oe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Oe,by:null,calcMode:null,capHeight:Oe,className:nn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Oe,diffuseConstant:Oe,direction:null,display:null,dur:null,divisor:Oe,dominantBaseline:null,download:zt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Oe,enableBackground:null,end:null,event:null,exponent:Oe,externalResourcesRequired:null,fill:null,fillOpacity:Oe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Tp,g2:Tp,glyphName:Tp,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Oe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Oe,horizOriginX:Oe,horizOriginY:Oe,id:null,ideographic:Oe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Oe,k:Oe,k1:Oe,k2:Oe,k3:Oe,k4:Oe,kernelMatrix:fa,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Oe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Oe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Oe,overlineThickness:Oe,paintOrder:null,panose1:null,path:null,pathLength:Oe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:nn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Oe,pointsAtY:Oe,pointsAtZ:Oe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:fa,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:fa,rev:fa,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:fa,requiredFeatures:fa,requiredFonts:fa,requiredFormats:fa,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Oe,specularExponent:Oe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Oe,strikethroughThickness:Oe,string:null,stroke:null,strokeDashArray:fa,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Oe,strokeOpacity:Oe,strokeWidth:null,style:null,surfaceScale:Oe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:fa,tabIndex:Oe,tableValues:null,target:null,targetX:Oe,targetY:Oe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:fa,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Oe,underlineThickness:Oe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Oe,values:null,vAlphabetic:Oe,vMathematical:Oe,vectorEffect:null,vHanging:Oe,vIdeographic:Oe,version:null,vertAdvY:Oe,vertOriginX:Oe,vertOriginY:Oe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Oe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:WJ}),qJ=Lm({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),YJ=Lm({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:KJ}),XJ=Lm({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),fRe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},pRe=/[A-Z]/g,T5=/-[a-z]/g,mRe=/^data[-\w.:]+$/i;function gRe(e,t){const r=cO(t);let n=t,i=sa;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&mRe.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(T5,vRe);n="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!T5.test(o)){let a=o.replace(pRe,yRe);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=_2}return new i(n,t)}function yRe(e){return"-"+e.toLowerCase()}function vRe(e){return e.charAt(1).toUpperCase()}const ERe=HJ([GJ,dRe,qJ,YJ,XJ],"html"),b2=HJ([GJ,hRe,qJ,YJ,XJ],"svg");function _Re(e){return e.join(" ").trim()}var w2={},C5=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,bRe=/\n/g,wRe=/^\s*/,SRe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,TRe=/^:\s*/,CRe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,RRe=/^[;\s]*/,IRe=/^\s+|\s+$/g,xRe=`
`,R5="/",I5="*",Md="",ARe="comment",NRe="declaration",ORe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,n=1;function i(m){var g=m.match(bRe);g&&(r+=g.length);var y=m.lastIndexOf(xRe);n=~y?m.length-y:n+m.length}function o(){var m={line:r,column:n};return function(g){return g.position=new a(m),l(),g}}function a(m){this.start=m,this.end={line:r,column:n},this.source=t.source}a.prototype.content=e;function s(m){var g=new Error(t.source+":"+r+":"+n+": "+m);if(g.reason=m,g.filename=t.source,g.line=r,g.column=n,g.source=e,!t.silent)throw g}function c(m){var g=m.exec(e);if(g){var y=g[0];return i(y),e=e.slice(y.length),g}}function l(){c(wRe)}function u(m){var g;for(m=m||[];g=d();)g!==!1&&m.push(g);return m}function d(){var m=o();if(!(R5!=e.charAt(0)||I5!=e.charAt(1))){for(var g=2;Md!=e.charAt(g)&&(I5!=e.charAt(g)||R5!=e.charAt(g+1));)++g;if(g+=2,Md===e.charAt(g-1))return s("End of comment missing");var y=e.slice(2,g-2);return n+=2,i(y),e=e.slice(g),n+=2,m({type:ARe,comment:y})}}function f(){var m=o(),g=c(SRe);if(g){if(d(),!c(TRe))return s("property missing ':'");var y=c(CRe),v=m({type:NRe,property:x5(g[0].replace(C5,Md)),value:y?x5(y[0].replace(C5,Md)):Md});return c(RRe),v}}function p(){var m=[];u(m);for(var g;g=f();)g!==!1&&(m.push(g),u(m));return m}return l(),p()};function x5(e){return e?e.replace(IRe,Md):Md}var kRe=zu&&zu.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(w2,"__esModule",{value:!0});w2.default=DRe;var PRe=kRe(ORe);function DRe(e,t){var r=null;if(!e||typeof e!="string")return r;var n=(0,PRe.default)(e),i=typeof t=="function";return n.forEach(function(o){if(o.type==="declaration"){var a=o.property,s=o.value;i?t(a,s,o):s&&(r=r||{},r[a]=s)}}),r}var kT={};Object.defineProperty(kT,"__esModule",{value:!0});kT.camelCase=void 0;var LRe=/^--[a-zA-Z0-9_-]+$/,MRe=/-([a-z])/g,jRe=/^[^-]+$/,URe=/^-(webkit|moz|ms|o|khtml)-/,FRe=/^-(ms)-/,VRe=function(e){return!e||jRe.test(e)||LRe.test(e)},BRe=function(e,t){return t.toUpperCase()},A5=function(e,t){return"".concat(t,"-")},$Re=function(e,t){return t===void 0&&(t={}),VRe(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(FRe,A5):e=e.replace(URe,A5),e.replace(MRe,BRe))};kT.camelCase=$Re;var HRe=zu&&zu.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},zRe=HRe(w2),GRe=kT;function uO(e,t){var r={};return!e||typeof e!="string"||(0,zRe.default)(e,function(n,i){n&&i&&(r[(0,GRe.camelCase)(n,t)]=i)}),r}uO.default=uO;var WRe=uO;const KRe=ia(WRe),JJ=QJ("end"),S2=QJ("start");function QJ(e){return t;function t(r){const n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function qRe(e){const t=S2(e),r=JJ(e);if(t&&r)return{start:t,end:r}}function wy(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?N5(e.position):"start"in e||"end"in e?N5(e):"line"in e||"column"in e?dO(e):""}function dO(e){return O5(e&&e.line)+":"+O5(e&&e.column)}function N5(e){return dO(e&&e.start)+"-"+dO(e&&e.end)}function O5(e){return e&&typeof e=="number"?e:1}class go extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let i="",o={},a=!1;if(r&&("line"in r&&"column"in r?o={place:r}:"start"in r&&"end"in r?o={place:r}:"type"in r?o={ancestors:[r],place:r.position}:o={...r}),typeof t=="string"?i=t:!o.cause&&t&&(a=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof n=="string"){const c=n.indexOf(":");c===-1?o.ruleId=n:(o.source=n.slice(0,c),o.ruleId=n.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const s=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=s?s.line:void 0,this.name=wy(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=a&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}go.prototype.file="";go.prototype.name="";go.prototype.reason="";go.prototype.message="";go.prototype.stack="";go.prototype.column=void 0;go.prototype.line=void 0;go.prototype.ancestors=void 0;go.prototype.cause=void 0;go.prototype.fatal=void 0;go.prototype.place=void 0;go.prototype.ruleId=void 0;go.prototype.source=void 0;const T2={}.hasOwnProperty,YRe=new Map,XRe=/[A-Z]/g,JRe=new Set(["table","tbody","thead","tfoot","tr"]),QRe=new Set(["td","th"]),ZJ="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ZRe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=sIe(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=aIe(r,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?b2:ERe,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=e1(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function e1(e,t,r){if(t.type==="element")return eIe(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return tIe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return nIe(e,t,r);if(t.type==="mdxjsEsm")return rIe(e,t);if(t.type==="root")return iIe(e,t,r);if(t.type==="text")return oIe(e,t)}function eIe(e,t,r){const n=e.schema;let i=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(i=b2,e.schema=i),e.ancestors.push(t);const o=r1(e,t.tagName,!1),a=cIe(e,t);let s=R2(e,t);return JRe.has(t.tagName)&&(s=s.filter(function(c){return typeof c=="string"?!lRe(c):!0})),t1(e,a,o,t),C2(a,s),e.ancestors.pop(),e.schema=n,e.create(t,o,a,r)}function tIe(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}b0(e,t.position)}function rIe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);b0(e,t.position)}function nIe(e,t,r){const n=e.schema;let i=n;t.name==="svg"&&n.space==="html"&&(i=b2,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:r1(e,t.name,!0),a=lIe(e,t),s=R2(e,t);return t1(e,a,o,t),C2(a,s),e.ancestors.pop(),e.schema=n,e.create(t,o,a,r)}function iIe(e,t,r){const n={};return C2(n,R2(e,t)),e.create(t,e.Fragment,n,r)}function oIe(e,t){return t.value}function t1(e,t,r,n){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=n)}function C2(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function aIe(e,t,r){return n;function n(i,o,a,s){const l=Array.isArray(a.children)?r:t;return s?l(o,a,s):l(o,a)}}function sIe(e,t){return r;function r(n,i,o,a){const s=Array.isArray(o.children),c=S2(n);return t(i,o,a,s,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function cIe(e,t){const r={};let n,i;for(i in t.properties)if(i!=="children"&&T2.call(t.properties,i)){const o=uIe(e,i,t.properties[i]);if(o){const[a,s]=o;e.tableCellAlignToStyle&&a==="align"&&typeof s=="string"&&QRe.has(t.tagName)?n=s:r[a]=s}}if(n){const o=r.style||(r.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function lIe(e,t){const r={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&e.evaluater){const o=n.data.estree.body[0];o.type;const a=o.expression;a.type;const s=a.properties[0];s.type,Object.assign(r,e.evaluater.evaluateExpression(s.argument))}else b0(e,t.position);else{const i=n.name;let o;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&e.evaluater){const s=n.value.data.estree.body[0];s.type,o=e.evaluater.evaluateExpression(s.expression)}else b0(e,t.position);else o=n.value===null?!0:n.value;r[i]=o}return r}function R2(e,t){const r=[];let n=-1;const i=e.passKeys?new Map:YRe;for(;++n<t.children.length;){const o=t.children[n];let a;if(e.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const l=i.get(c)||0;a=c+"-"+l,i.set(c,l+1)}}const s=e1(e,o,a);s!==void 0&&r.push(s)}return r}function uIe(e,t,r){const n=gRe(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?iRe(r):_Re(r)),n.property==="style"){let i=typeof r=="object"?r:dIe(e,String(r));return e.stylePropertyNameCase==="css"&&(i=hIe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&n.space?fRe[n.property]||n.property:n.attribute,r]}}function dIe(e,t){try{return KRe(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const n=r,i=new go("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=ZJ+"#cannot-parse-style-attribute",i}}function r1(e,t,r){let n;if(!r)n={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,a;for(;++o<i.length;){const s=b5(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};a=a?{type:"MemberExpression",object:a,property:s,computed:!!(o&&s.type==="Literal"),optional:!1}:s}n=a}else n=b5(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const i=n.value;return T2.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(n);b0(e)}function b0(e,t){const r=new go("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=ZJ+"#cannot-handle-mdx-estrees-without-createevaluater",r}function hIe(e){const t={};let r;for(r in e)T2.call(e,r)&&(t[fIe(r)]=e[r]);return t}function fIe(e){let t=e.replace(XRe,pIe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function pIe(e){return"-"+e.toLowerCase()}const BR={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},mIe={};function gIe(e,t){const r=mIe,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,i=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return n1(e,n,i)}function n1(e,t,r){if(yIe(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return k5(e.children,t,r)}return Array.isArray(e)?k5(e,t,r):""}function k5(e,t,r){const n=[];let i=-1;for(;++i<e.length;)n[i]=n1(e[i],t,r);return n.join("")}function yIe(e){return!!(e&&typeof e=="object")}const P5=document.createElement("i");function I2(e){const t="&"+e+";";P5.innerHTML=t;const r=P5.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function jc(e,t,r,n){const i=e.length;let o=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,r=r>0?r:0,n.length<1e4)a=Array.from(n),a.unshift(t,r),e.splice(...a);else for(r&&e.splice(t,r);o<n.length;)a=n.slice(o,o+1e4),a.unshift(t,0),e.splice(...a),o+=1e4,t+=1e4}function ls(e,t){return e.length>0?(jc(e,e.length,0,t),e):t}const D5={}.hasOwnProperty;function vIe(e){const t={};let r=-1;for(;++r<e.length;)EIe(t,e[r]);return t}function EIe(e,t){let r;for(r in t){const i=(D5.call(e,r)?e[r]:void 0)||(e[r]={}),o=t[r];let a;if(o)for(a in o){D5.call(i,a)||(i[a]=[]);const s=o[a];_Ie(i[a],Array.isArray(s)?s:s?[s]:[])}}}function _Ie(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);jc(e,0,0,n)}function i1(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function Cp(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const wc=ad(/[A-Za-z]/),Sa=ad(/[\dA-Za-z]/),bIe=ad(/[#-'*+\--9=?A-Z^-~]/);function hO(e){return e!==null&&(e<32||e===127)}const fO=ad(/\d/),wIe=ad(/[\dA-Fa-f]/),SIe=ad(/[!-/:-@[-`{-~]/);function Nt(e){return e!==null&&e<-2}function ra(e){return e!==null&&(e<0||e===32)}function Nr(e){return e===-2||e===-1||e===32}const TIe=ad(new RegExp("\\p{P}|\\p{S}","u")),CIe=ad(/\s/);function ad(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function Mm(e){const t=[];let r=-1,n=0,i=0;for(;++r<e.length;){const o=e.charCodeAt(r);let a="";if(o===37&&Sa(e.charCodeAt(r+1))&&Sa(e.charCodeAt(r+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const s=e.charCodeAt(r+1);o<56320&&s>56319&&s<57344?(a=String.fromCharCode(o,s),i=1):a=""}else a=String.fromCharCode(o);a&&(t.push(e.slice(n,r),encodeURIComponent(a)),n=r+i+1,a=""),i&&(r+=i,i=0)}return t.join("")+e.slice(n)}function sn(e,t,r,n){const i=n?n-1:Number.POSITIVE_INFINITY;let o=0;return a;function a(c){return Nr(c)?(e.enter(r),s(c)):t(c)}function s(c){return Nr(c)&&o++<i?(e.consume(c),s):(e.exit(r),t(c))}}const RIe={tokenize:IIe};function IIe(e){const t=e.attempt(this.parser.constructs.contentInitial,n,i);let r;return t;function n(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),sn(e,t,"linePrefix")}function i(s){return e.enter("paragraph"),o(s)}function o(s){const c=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=c),r=c,a(s)}function a(s){if(s===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(s);return}return Nt(s)?(e.consume(s),e.exit("chunkText"),o):(e.consume(s),a)}}const xIe={tokenize:AIe},L5={tokenize:NIe};function AIe(e){const t=this,r=[];let n=0,i,o,a;return s;function s(b){if(n<r.length){const S=r[n];return t.containerState=S[1],e.attempt(S[0].continuation,c,l)(b)}return l(b)}function c(b){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&E();const S=t.events.length;let A=S,N;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){N=t.events[A][1].end;break}v(n);let D=S;for(;D<t.events.length;)t.events[D][1].end={...N},D++;return jc(t.events,A+1,0,t.events.slice(S)),t.events.length=D,l(b)}return s(b)}function l(b){if(n===r.length){if(!i)return f(b);if(i.currentConstruct&&i.currentConstruct.concrete)return m(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(L5,u,d)(b)}function u(b){return i&&E(),v(n),f(b)}function d(b){return t.parser.lazy[t.now().line]=n!==r.length,a=t.now().offset,m(b)}function f(b){return t.containerState={},e.attempt(L5,p,m)(b)}function p(b){return n++,r.push([t.currentConstruct,t.containerState]),f(b)}function m(b){if(b===null){i&&E(),v(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),g(b)}function g(b){if(b===null){y(e.exit("chunkFlow"),!0),v(0),e.consume(b);return}return Nt(b)?(e.consume(b),y(e.exit("chunkFlow")),n=0,t.interrupt=void 0,s):(e.consume(b),g)}function y(b,S){const A=t.sliceStream(b);if(S&&A.push(null),b.previous=o,o&&(o.next=b),o=b,i.defineSkip(b.start),i.write(A),t.parser.lazy[b.start.line]){let N=i.events.length;for(;N--;)if(i.events[N][1].start.offset<a&&(!i.events[N][1].end||i.events[N][1].end.offset>a))return;const D=t.events.length;let M=D,H,V;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){if(H){V=t.events[M][1].end;break}H=!0}for(v(n),N=D;N<t.events.length;)t.events[N][1].end={...V},N++;jc(t.events,M+1,0,t.events.slice(D)),t.events.length=N}}function v(b){let S=r.length;for(;S-- >b;){const A=r[S];t.containerState=A[1],A[0].exit.call(t,e)}r.length=b}function E(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function NIe(e,t,r){return sn(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function M5(e){if(e===null||ra(e)||CIe(e))return 1;if(TIe(e))return 2}function x2(e,t,r){const n=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!n.includes(o)&&(t=o(t,r),n.push(o))}return t}const pO={name:"attention",resolveAll:OIe,tokenize:kIe};function OIe(e,t){let r=-1,n,i,o,a,s,c,l,u;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;c=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const d={...e[n][1].end},f={...e[r][1].start};j5(d,-c),j5(f,c),a={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...e[n][1].end}},s={type:c>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:f},o={type:c>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},i={type:c>1?"strong":"emphasis",start:{...a.start},end:{...s.end}},e[n][1].end={...a.start},e[r][1].start={...s.end},l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=ls(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=ls(l,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",o,t]]),l=ls(l,x2(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),l=ls(l,[["exit",o,t],["enter",s,t],["exit",s,t],["exit",i,t]]),e[r][1].end.offset-e[r][1].start.offset?(u=2,l=ls(l,[["enter",e[r][1],t],["exit",e[r][1],t]])):u=0,jc(e,n-1,r-n+3,l),r=n+l.length-u-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function kIe(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,i=M5(n);let o;return a;function a(c){return o=c,e.enter("attentionSequence"),s(c)}function s(c){if(c===o)return e.consume(c),s;const l=e.exit("attentionSequence"),u=M5(c),d=!u||u===2&&i||r.includes(c),f=!i||i===2&&u||r.includes(n);return l._open=!!(o===42?d:d&&(i||!f)),l._close=!!(o===42?f:f&&(u||!d)),t(c)}}function j5(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const PIe={name:"autolink",tokenize:DIe};function DIe(e,t,r){let n=0;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(p){return wc(p)?(e.consume(p),a):p===64?r(p):l(p)}function a(p){return p===43||p===45||p===46||Sa(p)?(n=1,s(p)):l(p)}function s(p){return p===58?(e.consume(p),n=0,c):(p===43||p===45||p===46||Sa(p))&&n++<32?(e.consume(p),s):(n=0,l(p))}function c(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||hO(p)?r(p):(e.consume(p),c)}function l(p){return p===64?(e.consume(p),u):bIe(p)?(e.consume(p),l):r(p)}function u(p){return Sa(p)?d(p):r(p)}function d(p){return p===46?(e.consume(p),n=0,u):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):f(p)}function f(p){if((p===45||Sa(p))&&n++<63){const m=p===45?f:d;return e.consume(p),m}return r(p)}}const PT={partial:!0,tokenize:LIe};function LIe(e,t,r){return n;function n(o){return Nr(o)?sn(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||Nt(o)?t(o):r(o)}}const o1={continuation:{tokenize:jIe},exit:UIe,name:"blockQuote",tokenize:MIe};function MIe(e,t,r){const n=this;return i;function i(a){if(a===62){const s=n.containerState;return s.open||(e.enter("blockQuote",{_container:!0}),s.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),o}return r(a)}function o(a){return Nr(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function jIe(e,t,r){const n=this;return i;function i(a){return Nr(a)?sn(e,o,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):o(a)}function o(a){return e.attempt(o1,t,r)(a)}}function UIe(e){e.exit("blockQuote")}const a1={name:"characterEscape",tokenize:FIe};function FIe(e,t,r){return n;function n(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return SIe(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(o)}}const s1={name:"characterReference",tokenize:VIe};function VIe(e,t,r){const n=this;let i=0,o,a;return s;function s(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),c}function c(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),o=31,a=Sa,u(d))}function l(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,a=wIe,u):(e.enter("characterReferenceValue"),o=7,a=fO,u(d))}function u(d){if(d===59&&i){const f=e.exit("characterReferenceValue");return a===Sa&&!I2(n.sliceSerialize(f))?r(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(d)&&i++<o?(e.consume(d),u):r(d)}}const U5={partial:!0,tokenize:$Ie},F5={concrete:!0,name:"codeFenced",tokenize:BIe};function BIe(e,t,r){const n=this,i={partial:!0,tokenize:A};let o=0,a=0,s;return c;function c(N){return l(N)}function l(N){const D=n.events[n.events.length-1];return o=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,s=N,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(N)}function u(N){return N===s?(a++,e.consume(N),u):a<3?r(N):(e.exit("codeFencedFenceSequence"),Nr(N)?sn(e,d,"whitespace")(N):d(N))}function d(N){return N===null||Nt(N)?(e.exit("codeFencedFence"),n.interrupt?t(N):e.check(U5,g,S)(N)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(N))}function f(N){return N===null||Nt(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(N)):Nr(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),sn(e,p,"whitespace")(N)):N===96&&N===s?r(N):(e.consume(N),f)}function p(N){return N===null||Nt(N)?d(N):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(N))}function m(N){return N===null||Nt(N)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(N)):N===96&&N===s?r(N):(e.consume(N),m)}function g(N){return e.attempt(i,S,y)(N)}function y(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),v}function v(N){return o>0&&Nr(N)?sn(e,E,"linePrefix",o+1)(N):E(N)}function E(N){return N===null||Nt(N)?e.check(U5,g,S)(N):(e.enter("codeFlowValue"),b(N))}function b(N){return N===null||Nt(N)?(e.exit("codeFlowValue"),E(N)):(e.consume(N),b)}function S(N){return e.exit("codeFenced"),t(N)}function A(N,D,M){let H=0;return V;function V(F){return N.enter("lineEnding"),N.consume(F),N.exit("lineEnding"),G}function G(F){return N.enter("codeFencedFence"),Nr(F)?sn(N,Y,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):Y(F)}function Y(F){return F===s?(N.enter("codeFencedFenceSequence"),Z(F)):M(F)}function Z(F){return F===s?(H++,N.consume(F),Z):H>=a?(N.exit("codeFencedFenceSequence"),Nr(F)?sn(N,$,"whitespace")(F):$(F)):M(F)}function $(F){return F===null||Nt(F)?(N.exit("codeFencedFence"),D(F)):M(F)}}}function $Ie(e,t,r){const n=this;return i;function i(a){return a===null?r(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),o)}function o(a){return n.parser.lazy[n.now().line]?r(a):t(a)}}const $R={name:"codeIndented",tokenize:zIe},HIe={partial:!0,tokenize:GIe};function zIe(e,t,r){const n=this;return i;function i(l){return e.enter("codeIndented"),sn(e,o,"linePrefix",5)(l)}function o(l){const u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?a(l):r(l)}function a(l){return l===null?c(l):Nt(l)?e.attempt(HIe,a,c)(l):(e.enter("codeFlowValue"),s(l))}function s(l){return l===null||Nt(l)?(e.exit("codeFlowValue"),a(l)):(e.consume(l),s)}function c(l){return e.exit("codeIndented"),t(l)}}function GIe(e,t,r){const n=this;return i;function i(a){return n.parser.lazy[n.now().line]?r(a):Nt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):sn(e,o,"linePrefix",5)(a)}function o(a){const s=n.events[n.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(a):Nt(a)?i(a):r(a)}}const WIe={name:"codeText",previous:qIe,resolve:KIe,tokenize:YIe};function KIe(e){let t=e.length-4,r=3,n,i;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)i===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(i=n):(n===t||e[n][1].type==="lineEnding")&&(e[i][1].type="codeTextData",n!==i+2&&(e[i][1].end=e[n-1][1].end,e.splice(i+2,n-i-2),t-=n-i-2,n=i+2),i=void 0);return e}function qIe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function YIe(e,t,r){let n=0,i,o;return a;function a(d){return e.enter("codeText"),e.enter("codeTextSequence"),s(d)}function s(d){return d===96?(e.consume(d),n++,s):(e.exit("codeTextSequence"),c(d))}function c(d){return d===null?r(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),c):d===96?(o=e.enter("codeTextSequence"),i=0,u(d)):Nt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("codeTextData"),l(d))}function l(d){return d===null||d===32||d===96||Nt(d)?(e.exit("codeTextData"),c(d)):(e.consume(d),l)}function u(d){return d===96?(e.consume(d),i++,u):i===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(o.type="codeTextData",l(d))}}class XIe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){const i=r||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&Eg(this.left,n),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Eg(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Eg(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);Eg(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Eg(this.left,r.reverse())}}}function Eg(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function c1(e){const t={};let r=-1,n,i,o,a,s,c,l;const u=new XIe(e);for(;++r<u.length;){for(;r in t;)r=t[r];if(n=u.get(r),r&&n[1].type==="chunkFlow"&&u.get(r-1)[1].type==="listItemPrefix"&&(c=n[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,JIe(u,r)),r=t[r],l=!0);else if(n[1]._container){for(o=r,i=void 0;o--;)if(a=u.get(o),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(n[1].end={...u.get(i)[1].start},s=u.slice(i,r),s.unshift(n),u.splice(i,r-i+1,s))}}return jc(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function JIe(e,t){const r=e.get(t)[1],n=e.get(t)[2];let i=t-1;const o=[];let a=r._tokenizer;a||(a=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const s=a.events,c=[],l={};let u,d,f=-1,p=r,m=0,g=0;const y=[g];for(;p;){for(;e.get(++i)[1]!==p;);o.push(i),p._tokenizer||(u=n.sliceStream(p),p.next||u.push(null),d&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=r;++f<s.length;)s[f][0]==="exit"&&s[f-1][0]==="enter"&&s[f][1].type===s[f-1][1].type&&s[f][1].start.line!==s[f][1].end.line&&(g=f+1,y.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):y.pop(),f=y.length;f--;){const v=s.slice(y[f],y[f+1]),E=o.pop();c.push([E,E+v.length-1]),e.splice(E,2,v)}for(c.reverse(),f=-1;++f<c.length;)l[m+c[f][0]]=m+c[f][1],m+=c[f][1]-c[f][0]-1;return l}const QIe={resolve:exe,tokenize:txe},ZIe={partial:!0,tokenize:rxe};function exe(e){return c1(e),e}function txe(e,t){let r;return n;function n(s){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?o(s):Nt(s)?e.check(ZIe,a,o)(s):(e.consume(s),i)}function o(s){return e.exit("chunkContent"),e.exit("content"),t(s)}function a(s){return e.consume(s),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,i}}function rxe(e,t,r){const n=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),sn(e,o,"linePrefix")}function o(a){if(a===null||Nt(a))return r(a);const s=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(a):e.interrupt(n.parser.constructs.flow,r,t)(a)}}function l1(e,t,r,n,i,o,a,s,c){const l=c||Number.POSITIVE_INFINITY;let u=0;return d;function d(v){return v===60?(e.enter(n),e.enter(i),e.enter(o),e.consume(v),e.exit(o),f):v===null||v===32||v===41||hO(v)?r(v):(e.enter(n),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),g(v))}function f(v){return v===62?(e.enter(o),e.consume(v),e.exit(o),e.exit(i),e.exit(n),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===62?(e.exit("chunkString"),e.exit(s),f(v)):v===null||v===60||Nt(v)?r(v):(e.consume(v),v===92?m:p)}function m(v){return v===60||v===62||v===92?(e.consume(v),p):p(v)}function g(v){return!u&&(v===null||v===41||ra(v))?(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(n),t(v)):u<l&&v===40?(e.consume(v),u++,g):v===41?(e.consume(v),u--,g):v===null||v===32||v===40||hO(v)?r(v):(e.consume(v),v===92?y:g)}function y(v){return v===40||v===41||v===92?(e.consume(v),g):g(v)}}function u1(e,t,r,n,i,o){const a=this;let s=0,c;return l;function l(p){return e.enter(n),e.enter(i),e.consume(p),e.exit(i),e.enter(o),u}function u(p){return s>999||p===null||p===91||p===93&&!c||p===94&&!s&&"_hiddenFootnoteSupport"in a.parser.constructs?r(p):p===93?(e.exit(o),e.enter(i),e.consume(p),e.exit(i),e.exit(n),t):Nt(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===null||p===91||p===93||Nt(p)||s++>999?(e.exit("chunkString"),u(p)):(e.consume(p),c||(c=!Nr(p)),p===92?f:d)}function f(p){return p===91||p===92||p===93?(e.consume(p),s++,d):d(p)}}function d1(e,t,r,n,i,o){let a;return s;function s(f){return f===34||f===39||f===40?(e.enter(n),e.enter(i),e.consume(f),e.exit(i),a=f===40?41:f,c):r(f)}function c(f){return f===a?(e.enter(i),e.consume(f),e.exit(i),e.exit(n),t):(e.enter(o),l(f))}function l(f){return f===a?(e.exit(o),c(a)):f===null?r(f):Nt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),sn(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===a||f===null||Nt(f)?(e.exit("chunkString"),l(f)):(e.consume(f),f===92?d:u)}function d(f){return f===a||f===92?(e.consume(f),u):u(f)}}function Sy(e,t){let r;return n;function n(i){return Nt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),r=!0,n):Nr(i)?sn(e,n,r?"linePrefix":"lineSuffix")(i):t(i)}}const nxe={name:"definition",tokenize:oxe},ixe={partial:!0,tokenize:axe};function oxe(e,t,r){const n=this;let i;return o;function o(p){return e.enter("definition"),a(p)}function a(p){return u1.call(n,e,s,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function s(p){return i=Cp(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),c):r(p)}function c(p){return ra(p)?Sy(e,l)(p):l(p)}function l(p){return l1(e,u,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return e.attempt(ixe,d,d)(p)}function d(p){return Nr(p)?sn(e,f,"whitespace")(p):f(p)}function f(p){return p===null||Nt(p)?(e.exit("definition"),n.parser.defined.push(i),t(p)):r(p)}}function axe(e,t,r){return n;function n(s){return ra(s)?Sy(e,i)(s):r(s)}function i(s){return d1(e,o,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function o(s){return Nr(s)?sn(e,a,"whitespace")(s):a(s)}function a(s){return s===null||Nt(s)?t(s):r(s)}}const sxe={name:"hardBreakEscape",tokenize:cxe};function cxe(e,t,r){return n;function n(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return Nt(o)?(e.exit("hardBreakEscape"),t(o)):r(o)}}const lxe={name:"headingAtx",resolve:uxe,tokenize:dxe};function uxe(e,t){let r=e.length-2,n=3,i,o;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(i={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},o={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},jc(e,n,r-n+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function dxe(e,t,r){let n=0;return i;function i(u){return e.enter("atxHeading"),o(u)}function o(u){return e.enter("atxHeadingSequence"),a(u)}function a(u){return u===35&&n++<6?(e.consume(u),a):u===null||ra(u)?(e.exit("atxHeadingSequence"),s(u)):r(u)}function s(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||Nt(u)?(e.exit("atxHeading"),t(u)):Nr(u)?sn(e,s,"whitespace")(u):(e.enter("atxHeadingText"),l(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),s(u))}function l(u){return u===null||u===35||ra(u)?(e.exit("atxHeadingText"),s(u)):(e.consume(u),l)}}const hxe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],V5=["pre","script","style","textarea"],fxe={concrete:!0,name:"htmlFlow",resolveTo:gxe,tokenize:yxe},pxe={partial:!0,tokenize:Exe},mxe={partial:!0,tokenize:vxe};function gxe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function yxe(e,t,r){const n=this;let i,o,a,s,c;return l;function l(T){return u(T)}function u(T){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(T),d}function d(T){return T===33?(e.consume(T),f):T===47?(e.consume(T),o=!0,g):T===63?(e.consume(T),i=3,n.interrupt?t:R):wc(T)?(e.consume(T),a=String.fromCharCode(T),y):r(T)}function f(T){return T===45?(e.consume(T),i=2,p):T===91?(e.consume(T),i=5,s=0,m):wc(T)?(e.consume(T),i=4,n.interrupt?t:R):r(T)}function p(T){return T===45?(e.consume(T),n.interrupt?t:R):r(T)}function m(T){const W="CDATA[";return T===W.charCodeAt(s++)?(e.consume(T),s===W.length?n.interrupt?t:Y:m):r(T)}function g(T){return wc(T)?(e.consume(T),a=String.fromCharCode(T),y):r(T)}function y(T){if(T===null||T===47||T===62||ra(T)){const W=T===47,U=a.toLowerCase();return!W&&!o&&V5.includes(U)?(i=1,n.interrupt?t(T):Y(T)):hxe.includes(a.toLowerCase())?(i=6,W?(e.consume(T),v):n.interrupt?t(T):Y(T)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(T):o?E(T):b(T))}return T===45||Sa(T)?(e.consume(T),a+=String.fromCharCode(T),y):r(T)}function v(T){return T===62?(e.consume(T),n.interrupt?t:Y):r(T)}function E(T){return Nr(T)?(e.consume(T),E):V(T)}function b(T){return T===47?(e.consume(T),V):T===58||T===95||wc(T)?(e.consume(T),S):Nr(T)?(e.consume(T),b):V(T)}function S(T){return T===45||T===46||T===58||T===95||Sa(T)?(e.consume(T),S):A(T)}function A(T){return T===61?(e.consume(T),N):Nr(T)?(e.consume(T),A):b(T)}function N(T){return T===null||T===60||T===61||T===62||T===96?r(T):T===34||T===39?(e.consume(T),c=T,D):Nr(T)?(e.consume(T),N):M(T)}function D(T){return T===c?(e.consume(T),c=null,H):T===null||Nt(T)?r(T):(e.consume(T),D)}function M(T){return T===null||T===34||T===39||T===47||T===60||T===61||T===62||T===96||ra(T)?A(T):(e.consume(T),M)}function H(T){return T===47||T===62||Nr(T)?b(T):r(T)}function V(T){return T===62?(e.consume(T),G):r(T)}function G(T){return T===null||Nt(T)?Y(T):Nr(T)?(e.consume(T),G):r(T)}function Y(T){return T===45&&i===2?(e.consume(T),K):T===60&&i===1?(e.consume(T),k):T===62&&i===4?(e.consume(T),_):T===63&&i===3?(e.consume(T),R):T===93&&i===5?(e.consume(T),B):Nt(T)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(pxe,x,Z)(T)):T===null||Nt(T)?(e.exit("htmlFlowData"),Z(T)):(e.consume(T),Y)}function Z(T){return e.check(mxe,$,x)(T)}function $(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),F}function F(T){return T===null||Nt(T)?Z(T):(e.enter("htmlFlowData"),Y(T))}function K(T){return T===45?(e.consume(T),R):Y(T)}function k(T){return T===47?(e.consume(T),a="",P):Y(T)}function P(T){if(T===62){const W=a.toLowerCase();return V5.includes(W)?(e.consume(T),_):Y(T)}return wc(T)&&a.length<8?(e.consume(T),a+=String.fromCharCode(T),P):Y(T)}function B(T){return T===93?(e.consume(T),R):Y(T)}function R(T){return T===62?(e.consume(T),_):T===45&&i===2?(e.consume(T),R):Y(T)}function _(T){return T===null||Nt(T)?(e.exit("htmlFlowData"),x(T)):(e.consume(T),_)}function x(T){return e.exit("htmlFlow"),t(T)}}function vxe(e,t,r){const n=this;return i;function i(a){return Nt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),o):r(a)}function o(a){return n.parser.lazy[n.now().line]?r(a):t(a)}}function Exe(e,t,r){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(PT,t,r)}}const _xe={name:"htmlText",tokenize:bxe};function bxe(e,t,r){const n=this;let i,o,a;return s;function s(R){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(R),c}function c(R){return R===33?(e.consume(R),l):R===47?(e.consume(R),A):R===63?(e.consume(R),b):wc(R)?(e.consume(R),M):r(R)}function l(R){return R===45?(e.consume(R),u):R===91?(e.consume(R),o=0,m):wc(R)?(e.consume(R),E):r(R)}function u(R){return R===45?(e.consume(R),p):r(R)}function d(R){return R===null?r(R):R===45?(e.consume(R),f):Nt(R)?(a=d,k(R)):(e.consume(R),d)}function f(R){return R===45?(e.consume(R),p):d(R)}function p(R){return R===62?K(R):R===45?f(R):d(R)}function m(R){const _="CDATA[";return R===_.charCodeAt(o++)?(e.consume(R),o===_.length?g:m):r(R)}function g(R){return R===null?r(R):R===93?(e.consume(R),y):Nt(R)?(a=g,k(R)):(e.consume(R),g)}function y(R){return R===93?(e.consume(R),v):g(R)}function v(R){return R===62?K(R):R===93?(e.consume(R),v):g(R)}function E(R){return R===null||R===62?K(R):Nt(R)?(a=E,k(R)):(e.consume(R),E)}function b(R){return R===null?r(R):R===63?(e.consume(R),S):Nt(R)?(a=b,k(R)):(e.consume(R),b)}function S(R){return R===62?K(R):b(R)}function A(R){return wc(R)?(e.consume(R),N):r(R)}function N(R){return R===45||Sa(R)?(e.consume(R),N):D(R)}function D(R){return Nt(R)?(a=D,k(R)):Nr(R)?(e.consume(R),D):K(R)}function M(R){return R===45||Sa(R)?(e.consume(R),M):R===47||R===62||ra(R)?H(R):r(R)}function H(R){return R===47?(e.consume(R),K):R===58||R===95||wc(R)?(e.consume(R),V):Nt(R)?(a=H,k(R)):Nr(R)?(e.consume(R),H):K(R)}function V(R){return R===45||R===46||R===58||R===95||Sa(R)?(e.consume(R),V):G(R)}function G(R){return R===61?(e.consume(R),Y):Nt(R)?(a=G,k(R)):Nr(R)?(e.consume(R),G):H(R)}function Y(R){return R===null||R===60||R===61||R===62||R===96?r(R):R===34||R===39?(e.consume(R),i=R,Z):Nt(R)?(a=Y,k(R)):Nr(R)?(e.consume(R),Y):(e.consume(R),$)}function Z(R){return R===i?(e.consume(R),i=void 0,F):R===null?r(R):Nt(R)?(a=Z,k(R)):(e.consume(R),Z)}function $(R){return R===null||R===34||R===39||R===60||R===61||R===96?r(R):R===47||R===62||ra(R)?H(R):(e.consume(R),$)}function F(R){return R===47||R===62||ra(R)?H(R):r(R)}function K(R){return R===62?(e.consume(R),e.exit("htmlTextData"),e.exit("htmlText"),t):r(R)}function k(R){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),P}function P(R){return Nr(R)?sn(e,B,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):B(R)}function B(R){return e.enter("htmlTextData"),a(R)}}const A2={name:"labelEnd",resolveAll:Cxe,resolveTo:Rxe,tokenize:Ixe},wxe={tokenize:xxe},Sxe={tokenize:Axe},Txe={tokenize:Nxe};function Cxe(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const i=n.type==="labelImage"?4:2;n.type="data",t+=i}}return e.length!==r.length&&jc(e,0,e.length,r),e}function Rxe(e,t){let r=e.length,n=0,i,o,a,s;for(;r--;)if(i=e[r][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[r][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[r][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=r,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(a=r);const c={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},l={type:"label",start:{...e[o][1].start},end:{...e[a][1].end}},u={type:"labelText",start:{...e[o+n+2][1].end},end:{...e[a-2][1].start}};return s=[["enter",c,t],["enter",l,t]],s=ls(s,e.slice(o+1,o+n+3)),s=ls(s,[["enter",u,t]]),s=ls(s,x2(t.parser.constructs.insideSpan.null,e.slice(o+n+4,a-3),t)),s=ls(s,[["exit",u,t],e[a-2],e[a-1],["exit",l,t]]),s=ls(s,e.slice(a+1)),s=ls(s,[["exit",c,t]]),jc(e,o,e.length,s),e}function Ixe(e,t,r){const n=this;let i=n.events.length,o,a;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){o=n.events[i][1];break}return s;function s(f){return o?o._inactive?d(f):(a=n.parser.defined.includes(Cp(n.sliceSerialize({start:o.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),c):r(f)}function c(f){return f===40?e.attempt(wxe,u,a?u:d)(f):f===91?e.attempt(Sxe,u,a?l:d)(f):a?u(f):d(f)}function l(f){return e.attempt(Txe,u,d)(f)}function u(f){return t(f)}function d(f){return o._balanced=!0,r(f)}}function xxe(e,t,r){return n;function n(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return ra(d)?Sy(e,o)(d):o(d)}function o(d){return d===41?u(d):l1(e,a,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function a(d){return ra(d)?Sy(e,c)(d):u(d)}function s(d){return r(d)}function c(d){return d===34||d===39||d===40?d1(e,l,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function l(d){return ra(d)?Sy(e,u)(d):u(d)}function u(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):r(d)}}function Axe(e,t,r){const n=this;return i;function i(s){return u1.call(n,e,o,a,"reference","referenceMarker","referenceString")(s)}function o(s){return n.parser.defined.includes(Cp(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(s):r(s)}function a(s){return r(s)}}function Nxe(e,t,r){return n;function n(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):r(o)}}const Oxe={name:"labelStartImage",resolveAll:A2.resolveAll,tokenize:kxe};function kxe(e,t,r){const n=this;return i;function i(s){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(s),e.exit("labelImageMarker"),o}function o(s){return s===91?(e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelImage"),a):r(s)}function a(s){return s===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(s):t(s)}}const Pxe={name:"labelStartLink",resolveAll:A2.resolveAll,tokenize:Dxe};function Dxe(e,t,r){const n=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(a):t(a)}}const HR={name:"lineEnding",tokenize:Lxe};function Lxe(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),sn(e,t,"linePrefix")}}const X_={name:"thematicBreak",tokenize:Mxe};function Mxe(e,t,r){let n=0,i;return o;function o(l){return e.enter("thematicBreak"),a(l)}function a(l){return i=l,s(l)}function s(l){return l===i?(e.enter("thematicBreakSequence"),c(l)):n>=3&&(l===null||Nt(l))?(e.exit("thematicBreak"),t(l)):r(l)}function c(l){return l===i?(e.consume(l),n++,c):(e.exit("thematicBreakSequence"),Nr(l)?sn(e,s,"whitespace")(l):s(l))}}const jo={continuation:{tokenize:Vxe},exit:$xe,name:"list",tokenize:Fxe},jxe={partial:!0,tokenize:Hxe},Uxe={partial:!0,tokenize:Bxe};function Fxe(e,t,r){const n=this,i=n.events[n.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return s;function s(p){const m=n.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!n.containerState.marker||p===n.containerState.marker:fO(p)){if(n.containerState.type||(n.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(X_,r,l)(p):l(p);if(!n.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(p)}return r(p)}function c(p){return fO(p)&&++a<10?(e.consume(p),c):(!n.interrupt||a<2)&&(n.containerState.marker?p===n.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),l(p)):r(p)}function l(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||p,e.check(PT,n.interrupt?r:u,e.attempt(jxe,f,d))}function u(p){return n.containerState.initialBlankLine=!0,o++,f(p)}function d(p){return Nr(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),f):r(p)}function f(p){return n.containerState.size=o+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function Vxe(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(PT,i,o);function i(s){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,sn(e,t,"listItemIndent",n.containerState.size+1)(s)}function o(s){return n.containerState.furtherBlankLines||!Nr(s)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,a(s)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(Uxe,t,a)(s))}function a(s){return n.containerState._closeFlow=!0,n.interrupt=void 0,sn(e,e.attempt(jo,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function Bxe(e,t,r){const n=this;return sn(e,i,"listItemIndent",n.containerState.size+1);function i(o){const a=n.events[n.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===n.containerState.size?t(o):r(o)}}function $xe(e){e.exit(this.containerState.type)}function Hxe(e,t,r){const n=this;return sn(e,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const a=n.events[n.events.length-1];return!Nr(o)&&a&&a[1].type==="listItemPrefixWhitespace"?t(o):r(o)}}const B5={name:"setextUnderline",resolveTo:zxe,tokenize:Gxe};function zxe(e,t){let r=e.length,n,i,o;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(i=r)}else e[r][1].type==="content"&&e.splice(r,1),!o&&e[r][1].type==="definition"&&(o=r);const a={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",a,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end={...e[o][1].end}):e[n][1]=a,e.push(["exit",a,t]),e}function Gxe(e,t,r){const n=this;let i;return o;function o(l){let u=n.events.length,d;for(;u--;)if(n.events[u][1].type!=="lineEnding"&&n.events[u][1].type!=="linePrefix"&&n.events[u][1].type!=="content"){d=n.events[u][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||d)?(e.enter("setextHeadingLine"),i=l,a(l)):r(l)}function a(l){return e.enter("setextHeadingLineSequence"),s(l)}function s(l){return l===i?(e.consume(l),s):(e.exit("setextHeadingLineSequence"),Nr(l)?sn(e,c,"lineSuffix")(l):c(l))}function c(l){return l===null||Nt(l)?(e.exit("setextHeadingLine"),t(l)):r(l)}}const Wxe={tokenize:Kxe};function Kxe(e){const t=this,r=e.attempt(PT,n,e.attempt(this.parser.constructs.flowInitial,i,sn(e,e.attempt(this.parser.constructs.flow,i,e.attempt(QIe,i)),"linePrefix")));return r;function n(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const qxe={resolveAll:f1()},Yxe=h1("string"),Xxe=h1("text");function h1(e){return{resolveAll:f1(e==="text"?Jxe:void 0),tokenize:t};function t(r){const n=this,i=this.parser.constructs[e],o=r.attempt(i,a,s);return a;function a(u){return l(u)?o(u):s(u)}function s(u){if(u===null){r.consume(u);return}return r.enter("data"),r.consume(u),c}function c(u){return l(u)?(r.exit("data"),o(u)):(r.consume(u),c)}function l(u){if(u===null)return!0;const d=i[u];let f=-1;if(d)for(;++f<d.length;){const p=d[f];if(!p.previous||p.previous.call(n,n.previous))return!0}return!1}}}function f1(e){return t;function t(r,n){let i=-1,o;for(;++i<=r.length;)o===void 0?r[i]&&r[i][1].type==="data"&&(o=i,i++):(!r[i]||r[i][1].type!=="data")&&(i!==o+2&&(r[o][1].end=r[i-1][1].end,r.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(r,n):r}}function Jxe(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],i=t.sliceStream(n);let o=i.length,a=-1,s=0,c;for(;o--;){const l=i[o];if(typeof l=="string"){for(a=l.length;l.charCodeAt(a-1)===32;)s++,a--;if(a)break;a=-1}else if(l===-2)c=!0,s++;else if(l!==-1){o++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(s=0),s){const l={type:r===e.length||c||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?a:n.start._bufferIndex+a,_index:n.start._index+o,line:n.end.line,column:n.end.column-s,offset:n.end.offset-s},end:{...n.end}};n.end={...l.start},n.start.offset===n.end.offset?Object.assign(n,l):(e.splice(r,0,["enter",l,t],["exit",l,t]),r+=2)}r++}return e}const Qxe={42:jo,43:jo,45:jo,48:jo,49:jo,50:jo,51:jo,52:jo,53:jo,54:jo,55:jo,56:jo,57:jo,62:o1},Zxe={91:nxe},eAe={[-2]:$R,[-1]:$R,32:$R},tAe={35:lxe,42:X_,45:[B5,X_],60:fxe,61:B5,95:X_,96:F5,126:F5},rAe={38:s1,92:a1},nAe={[-5]:HR,[-4]:HR,[-3]:HR,33:Oxe,38:s1,42:pO,60:[PIe,_xe],91:Pxe,92:[sxe,a1],93:A2,95:pO,96:WIe},iAe={null:[pO,qxe]},oAe={null:[42,95]},aAe={null:[]},sAe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:oAe,contentInitial:Zxe,disable:aAe,document:Qxe,flow:tAe,flowInitial:eAe,insideSpan:iAe,string:rAe,text:nAe},Symbol.toStringTag,{value:"Module"}));function cAe(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const i={},o=[];let a=[],s=[];const c={attempt:D(A),check:D(N),consume:E,enter:b,exit:S,interrupt:D(N,{interrupt:!0})},l={code:null,containerState:{},defineSkip:g,events:[],now:m,parser:e,previous:null,sliceSerialize:f,sliceStream:p,write:d};let u=t.tokenize.call(l,c);return t.resolveAll&&o.push(t),l;function d(G){return a=ls(a,G),y(),a[a.length-1]!==null?[]:(M(t,0),l.events=x2(o,l.events,l),l.events)}function f(G,Y){return uAe(p(G),Y)}function p(G){return lAe(a,G)}function m(){const{_bufferIndex:G,_index:Y,line:Z,column:$,offset:F}=n;return{_bufferIndex:G,_index:Y,line:Z,column:$,offset:F}}function g(G){i[G.line]=G.column,V()}function y(){let G;for(;n._index<a.length;){const Y=a[n._index];if(typeof Y=="string")for(G=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===G&&n._bufferIndex<Y.length;)v(Y.charCodeAt(n._bufferIndex));else v(Y)}}function v(G){u=u(G)}function E(G){Nt(G)?(n.line++,n.column=1,n.offset+=G===-3?2:1,V()):G!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===a[n._index].length&&(n._bufferIndex=-1,n._index++)),l.previous=G}function b(G,Y){const Z=Y||{};return Z.type=G,Z.start=m(),l.events.push(["enter",Z,l]),s.push(Z),Z}function S(G){const Y=s.pop();return Y.end=m(),l.events.push(["exit",Y,l]),Y}function A(G,Y){M(G,Y.from)}function N(G,Y){Y.restore()}function D(G,Y){return Z;function Z($,F,K){let k,P,B,R;return Array.isArray($)?x($):"tokenize"in $?x([$]):_($);function _(X){return ae;function ae(de){const fe=de!==null&&X[de],ke=de!==null&&X.null,Ve=[...Array.isArray(fe)?fe:fe?[fe]:[],...Array.isArray(ke)?ke:ke?[ke]:[]];return x(Ve)(de)}}function x(X){return k=X,P=0,X.length===0?K:T(X[P])}function T(X){return ae;function ae(de){return R=H(),B=X,X.partial||(l.currentConstruct=X),X.name&&l.parser.constructs.disable.null.includes(X.name)?U():X.tokenize.call(Y?Object.assign(Object.create(l),Y):l,c,W,U)(de)}}function W(X){return G(B,R),F}function U(X){return R.restore(),++P<k.length?T(k[P]):K}}}function M(G,Y){G.resolveAll&&!o.includes(G)&&o.push(G),G.resolve&&jc(l.events,Y,l.events.length-Y,G.resolve(l.events.slice(Y),l)),G.resolveTo&&(l.events=G.resolveTo(l.events,l))}function H(){const G=m(),Y=l.previous,Z=l.currentConstruct,$=l.events.length,F=Array.from(s);return{from:$,restore:K};function K(){n=G,l.previous=Y,l.currentConstruct=Z,l.events.length=$,s=F,V()}}function V(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function lAe(e,t){const r=t.start._index,n=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let a;if(r===i)a=[e[r].slice(n,o)];else{if(a=e.slice(r,i),n>-1){const s=a[0];typeof s=="string"?a[0]=s.slice(n):a.shift()}o>0&&a.push(e[i].slice(0,o))}return a}function uAe(e,t){let r=-1;const n=[];let i;for(;++r<e.length;){const o=e[r];let a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,n.push(a)}return n.join("")}function dAe(e){const n={constructs:vIe([sAe,...(e||{}).extensions||[]]),content:i(RIe),defined:[],document:i(xIe),flow:i(Wxe),lazy:{},string:i(Yxe),text:i(Xxe)};return n;function i(o){return a;function a(s){return cAe(n,o,s)}}}function hAe(e){for(;!c1(e););return e}const $5=/[\0\t\n\r]/g;function fAe(){let e=1,t="",r=!0,n;return i;function i(o,a,s){const c=[];let l,u,d,f,p;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(a||void 0).decode(o)),d=0,t="",r&&(o.charCodeAt(0)===65279&&d++,r=void 0);d<o.length;){if($5.lastIndex=d,l=$5.exec(o),f=l&&l.index!==void 0?l.index:o.length,p=o.charCodeAt(f),!l){t=o.slice(d);break}if(p===10&&d===f&&n)c.push(-3),n=void 0;else switch(n&&(c.push(-5),n=void 0),d<f&&(c.push(o.slice(d,f)),e+=f-d),p){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:n=!0,e=1}d=f+1}return s&&(n&&c.push(-5),t&&c.push(t),c.push(null)),c}}const pAe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function mAe(e){return e.replace(pAe,gAe)}function gAe(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const i=r.charCodeAt(1),o=i===120||i===88;return i1(r.slice(o?2:1),o?16:10)}return I2(r)||e}const p1={}.hasOwnProperty;function yAe(e,t,r){return typeof t!="string"&&(r=t,t=void 0),vAe(r)(hAe(dAe(r).document().write(fAe()(e,t,!0))))}function vAe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Be),autolinkProtocol:H,autolinkEmail:H,atxHeading:o(et),blockQuote:o(ke),characterEscape:H,characterReference:H,codeFenced:o(Ve),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(Ve,a),codeText:o(Me,a),codeTextData:H,data:H,codeFlowValue:H,definition:o(ot),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(At),hardBreakEscape:o(Et),hardBreakTrailing:o(Et),htmlFlow:o(Ie,a),htmlFlowData:H,htmlText:o(Ie,a),htmlTextData:H,image:o(rt),label:a,link:o(Be),listItem:o(Ke),listItemValue:f,listOrdered:o(Qe,d),listUnordered:o(Qe),paragraph:o(te),reference:T,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(et),strong:o(Ae),thematicBreak:o(Ge)},exit:{atxHeading:c(),atxHeadingSequence:A,autolink:c(),autolinkEmail:fe,autolinkProtocol:de,blockQuote:c(),characterEscapeValue:V,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:X,characterReference:ae,codeFenced:c(y),codeFencedFence:g,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:V,codeIndented:c(v),codeText:c(F),codeTextData:V,data:V,definition:c(),definitionDestinationString:S,definitionLabelString:E,definitionTitleString:b,emphasis:c(),hardBreakEscape:c(Y),hardBreakTrailing:c(Y),htmlFlow:c(Z),htmlFlowData:V,htmlText:c($),htmlTextData:V,image:c(k),label:B,labelText:P,lineEnding:G,link:c(K),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:W,resourceDestinationString:R,resourceTitleString:_,resource:x,setextHeading:c(M),setextHeadingLineSequence:D,setextHeadingText:N,strong:c(),thematicBreak:c()}};m1(t,(e||{}).mdastExtensions||[]);const r={};return n;function n(ne){let ge={type:"root",children:[]};const Xe={stack:[ge],tokenStack:[],config:t,enter:s,exit:l,buffer:a,resume:u,data:r},lt=[];let qt=-1;for(;++qt<ne.length;)if(ne[qt][1].type==="listOrdered"||ne[qt][1].type==="listUnordered")if(ne[qt][0]==="enter")lt.push(qt);else{const Un=lt.pop();qt=i(ne,Un,qt)}for(qt=-1;++qt<ne.length;){const Un=t[ne[qt][0]];p1.call(Un,ne[qt][1].type)&&Un[ne[qt][1].type].call(Object.assign({sliceSerialize:ne[qt][2].sliceSerialize},Xe),ne[qt][1])}if(Xe.tokenStack.length>0){const Un=Xe.tokenStack[Xe.tokenStack.length-1];(Un[1]||H5).call(Xe,void 0,Un[0])}for(ge.position={start:Wl(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:Wl(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},qt=-1;++qt<t.transforms.length;)ge=t.transforms[qt](ge)||ge;return ge}function i(ne,ge,Xe){let lt=ge-1,qt=-1,Un=!1,Sn,mi,Tn,Ai;for(;++lt<=Xe;){const yn=ne[lt];switch(yn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{yn[0]==="enter"?qt++:qt--,Ai=void 0;break}case"lineEndingBlank":{yn[0]==="enter"&&(Sn&&!Ai&&!qt&&!Tn&&(Tn=lt),Ai=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ai=void 0}if(!qt&&yn[0]==="enter"&&yn[1].type==="listItemPrefix"||qt===-1&&yn[0]==="exit"&&(yn[1].type==="listUnordered"||yn[1].type==="listOrdered")){if(Sn){let gi=lt;for(mi=void 0;gi--;){const Cn=ne[gi];if(Cn[1].type==="lineEnding"||Cn[1].type==="lineEndingBlank"){if(Cn[0]==="exit")continue;mi&&(ne[mi][1].type="lineEndingBlank",Un=!0),Cn[1].type="lineEnding",mi=gi}else if(!(Cn[1].type==="linePrefix"||Cn[1].type==="blockQuotePrefix"||Cn[1].type==="blockQuotePrefixWhitespace"||Cn[1].type==="blockQuoteMarker"||Cn[1].type==="listItemIndent"))break}Tn&&(!mi||Tn<mi)&&(Sn._spread=!0),Sn.end=Object.assign({},mi?ne[mi][1].start:yn[1].end),ne.splice(mi||lt,0,["exit",Sn,yn[2]]),lt++,Xe++}if(yn[1].type==="listItemPrefix"){const gi={type:"listItem",_spread:!1,start:Object.assign({},yn[1].start),end:void 0};Sn=gi,ne.splice(lt,0,["enter",gi,yn[2]]),lt++,Xe++,Tn=void 0,Ai=!0}}}return ne[ge][1]._spread=Un,Xe}function o(ne,ge){return Xe;function Xe(lt){s.call(this,ne(lt),lt),ge&&ge.call(this,lt)}}function a(){this.stack.push({type:"fragment",children:[]})}function s(ne,ge,Xe){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([ge,Xe||void 0]),ne.position={start:Wl(ge.start),end:void 0}}function c(ne){return ge;function ge(Xe){ne&&ne.call(this,Xe),l.call(this,Xe)}}function l(ne,ge){const Xe=this.stack.pop(),lt=this.tokenStack.pop();if(lt)lt[0].type!==ne.type&&(ge?ge.call(this,ne,lt[0]):(lt[1]||H5).call(this,ne,lt[0]));else throw new Error("Cannot close `"+ne.type+"` ("+wy({start:ne.start,end:ne.end})+"): its not open");Xe.position.end=Wl(ne.end)}function u(){return gIe(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(ne){if(this.data.expectingFirstListItemValue){const ge=this.stack[this.stack.length-2];ge.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function p(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.lang=ne}function m(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.meta=ne}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.value=ne.replace(/(\r?\n|\r)$/g,"")}function E(ne){const ge=this.resume(),Xe=this.stack[this.stack.length-1];Xe.label=ge,Xe.identifier=Cp(this.sliceSerialize(ne)).toLowerCase()}function b(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.title=ne}function S(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.url=ne}function A(ne){const ge=this.stack[this.stack.length-1];if(!ge.depth){const Xe=this.sliceSerialize(ne).length;ge.depth=Xe}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function D(ne){const ge=this.stack[this.stack.length-1];ge.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function M(){this.data.setextHeadingSlurpLineEnding=void 0}function H(ne){const Xe=this.stack[this.stack.length-1].children;let lt=Xe[Xe.length-1];(!lt||lt.type!=="text")&&(lt=Ue(),lt.position={start:Wl(ne.start),end:void 0},Xe.push(lt)),this.stack.push(lt)}function V(ne){const ge=this.stack.pop();ge.value+=this.sliceSerialize(ne),ge.position.end=Wl(ne.end)}function G(ne){const ge=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Xe=ge.children[ge.children.length-1];Xe.position.end=Wl(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ge.type)&&(H.call(this,ne),V.call(this,ne))}function Y(){this.data.atHardBreak=!0}function Z(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.value=ne}function $(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.value=ne}function F(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.value=ne}function K(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const ge=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=ge,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function k(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const ge=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=ge,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function P(ne){const ge=this.sliceSerialize(ne),Xe=this.stack[this.stack.length-2];Xe.label=mAe(ge),Xe.identifier=Cp(ge).toLowerCase()}function B(){const ne=this.stack[this.stack.length-1],ge=this.resume(),Xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Xe.type==="link"){const lt=ne.children;Xe.children=lt}else Xe.alt=ge}function R(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.url=ne}function _(){const ne=this.resume(),ge=this.stack[this.stack.length-1];ge.title=ne}function x(){this.data.inReference=void 0}function T(){this.data.referenceType="collapsed"}function W(ne){const ge=this.resume(),Xe=this.stack[this.stack.length-1];Xe.label=ge,Xe.identifier=Cp(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function U(ne){this.data.characterReferenceType=ne.type}function X(ne){const ge=this.sliceSerialize(ne),Xe=this.data.characterReferenceType;let lt;Xe?(lt=i1(ge,Xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):lt=I2(ge);const qt=this.stack[this.stack.length-1];qt.value+=lt}function ae(ne){const ge=this.stack.pop();ge.position.end=Wl(ne.end)}function de(ne){V.call(this,ne);const ge=this.stack[this.stack.length-1];ge.url=this.sliceSerialize(ne)}function fe(ne){V.call(this,ne);const ge=this.stack[this.stack.length-1];ge.url="mailto:"+this.sliceSerialize(ne)}function ke(){return{type:"blockquote",children:[]}}function Ve(){return{type:"code",lang:null,meta:null,value:""}}function Me(){return{type:"inlineCode",value:""}}function ot(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function At(){return{type:"emphasis",children:[]}}function et(){return{type:"heading",depth:0,children:[]}}function Et(){return{type:"break"}}function Ie(){return{type:"html",value:""}}function rt(){return{type:"image",title:null,url:"",alt:null}}function Be(){return{type:"link",title:null,url:"",children:[]}}function Qe(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function Ke(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function te(){return{type:"paragraph",children:[]}}function Ae(){return{type:"strong",children:[]}}function Ue(){return{type:"text",value:""}}function Ge(){return{type:"thematicBreak"}}}function Wl(e){return{line:e.line,column:e.column,offset:e.offset}}function m1(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?m1(e,n):EAe(e,n)}}function EAe(e,t){let r;for(r in t)if(p1.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function H5(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+wy({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+wy({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+wy({start:t.start,end:t.end})+") is still open")}function _Ae(e){const t=this;t.parser=r;function r(n){return yAe(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function bAe(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function wAe(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function SAe(e,t){const r=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function TAe(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function CAe(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function RAe(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),i=Mm(n.toLowerCase()),o=e.footnoteOrder.indexOf(n);let a,s=e.footnoteCounts.get(n);s===void 0?(s=0,e.footnoteOrder.push(n),a=e.footnoteOrder.length):a=o+1,s+=1,e.footnoteCounts.set(n,s);const c={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+i,id:r+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const l={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,l),e.applyData(t,l)}function IAe(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function xAe(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function g1(e,t){const r=t.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=n:i.push({type:"text",value:n}),i}function AAe(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return g1(e,t);const i={src:Mm(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(i.title=n.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function NAe(e,t){const r={src:Mm(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function OAe(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function kAe(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return g1(e,t);const i={href:Mm(n.url||"")};n.title!==null&&n.title!==void 0&&(i.title=n.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function PAe(e,t){const r={href:Mm(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function DAe(e,t,r){const n=e.all(t),i=r?LAe(r):y1(t),o={},a=[];if(typeof t.checked=="boolean"){const u=n[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},n.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let s=-1;for(;++s<n.length;){const u=n[s];(i||s!==0||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?a.push(...u.children):a.push(u)}const c=n[n.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:o,children:a};return e.patch(t,l),e.applyData(t,l)}function LAe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=y1(r[n])}return t}function y1(e){const t=e.spread;return t??e.children.length>1}function MAe(e,t){const r={},n=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++i<n.length;){const a=n[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,o),e.applyData(t,o)}function jAe(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function UAe(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function FAe(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function VAe(e,t){const r=e.all(t),n=r.shift(),i=[];if(n){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],a),i.push(a)}if(r.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},s=S2(t.children[1]),c=JJ(t.children[t.children.length-1]);s&&c&&(a.position={start:s,end:c}),i.push(a)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function BAe(e,t,r){const n=r?r.children:void 0,o=(n?n.indexOf(t):1)===0?"th":"td",a=r&&r.type==="table"?r.align:void 0,s=a?a.length:t.children.length;let c=-1;const l=[];for(;++c<s;){const d=t.children[c],f={},p=a?a[c]:void 0;p&&(f.align=p);let m={type:"element",tagName:o,properties:f,children:[]};d&&(m.children=e.all(d),e.patch(d,m),m=e.applyData(d,m)),l.push(m)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,u),e.applyData(t,u)}function $Ae(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const z5=9,G5=32;function HAe(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),i=0;const o=[];for(;n;)o.push(W5(t.slice(i,n.index),i>0,!0),n[0]),i=n.index+n[0].length,n=r.exec(t);return o.push(W5(t.slice(i),i>0,!1)),o.join("")}function W5(e,t,r){let n=0,i=e.length;if(t){let o=e.codePointAt(n);for(;o===z5||o===G5;)n++,o=e.codePointAt(n)}if(r){let o=e.codePointAt(i-1);for(;o===z5||o===G5;)i--,o=e.codePointAt(i-1)}return i>n?e.slice(n,i):""}function zAe(e,t){const r={type:"text",value:HAe(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function GAe(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const WAe={blockquote:bAe,break:wAe,code:SAe,delete:TAe,emphasis:CAe,footnoteReference:RAe,heading:IAe,html:xAe,imageReference:AAe,image:NAe,inlineCode:OAe,linkReference:kAe,link:PAe,listItem:DAe,list:MAe,paragraph:jAe,root:UAe,strong:FAe,table:VAe,tableCell:$Ae,tableRow:BAe,text:zAe,thematicBreak:GAe,toml:AE,yaml:AE,definition:AE,footnoteDefinition:AE};function AE(){}const v1=-1,DT=0,Ty=1,Vw=2,N2=3,O2=4,k2=5,P2=6,E1=7,_1=8,K5=typeof self=="object"?self:globalThis,KAe=(e,t)=>{const r=(i,o)=>(e.set(o,i),i),n=i=>{if(e.has(i))return e.get(i);const[o,a]=t[i];switch(o){case DT:case v1:return r(a,i);case Ty:{const s=r([],i);for(const c of a)s.push(n(c));return s}case Vw:{const s=r({},i);for(const[c,l]of a)s[n(c)]=n(l);return s}case N2:return r(new Date(a),i);case O2:{const{source:s,flags:c}=a;return r(new RegExp(s,c),i)}case k2:{const s=r(new Map,i);for(const[c,l]of a)s.set(n(c),n(l));return s}case P2:{const s=r(new Set,i);for(const c of a)s.add(n(c));return s}case E1:{const{name:s,message:c}=a;return r(new K5[s](c),i)}case _1:return r(BigInt(a),i);case"BigInt":return r(Object(BigInt(a)),i);case"ArrayBuffer":return r(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:s}=new Uint8Array(a);return r(new DataView(s),a)}}return r(new K5[o](a),i)};return n},q5=e=>KAe(new Map,e)(0),mf="",{toString:qAe}={},{keys:YAe}=Object,_g=e=>{const t=typeof e;if(t!=="object"||!e)return[DT,t];const r=qAe.call(e).slice(8,-1);switch(r){case"Array":return[Ty,mf];case"Object":return[Vw,mf];case"Date":return[N2,mf];case"RegExp":return[O2,mf];case"Map":return[k2,mf];case"Set":return[P2,mf];case"DataView":return[Ty,r]}return r.includes("Array")?[Ty,r]:r.includes("Error")?[E1,r]:[Vw,r]},NE=([e,t])=>e===DT&&(t==="function"||t==="symbol"),XAe=(e,t,r,n)=>{const i=(a,s)=>{const c=n.push(a)-1;return r.set(s,c),c},o=a=>{if(r.has(a))return r.get(a);let[s,c]=_g(a);switch(s){case DT:{let u=a;switch(c){case"bigint":s=_1,u=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return i([v1],a)}return i([s,u],a)}case Ty:{if(c){let f=a;return c==="DataView"?f=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(f=new Uint8Array(a)),i([c,[...f]],a)}const u=[],d=i([s,u],a);for(const f of a)u.push(o(f));return d}case Vw:{if(c)switch(c){case"BigInt":return i([c,a.toString()],a);case"Boolean":case"Number":case"String":return i([c,a.valueOf()],a)}if(t&&"toJSON"in a)return o(a.toJSON());const u=[],d=i([s,u],a);for(const f of YAe(a))(e||!NE(_g(a[f])))&&u.push([o(f),o(a[f])]);return d}case N2:return i([s,a.toISOString()],a);case O2:{const{source:u,flags:d}=a;return i([s,{source:u,flags:d}],a)}case k2:{const u=[],d=i([s,u],a);for(const[f,p]of a)(e||!(NE(_g(f))||NE(_g(p))))&&u.push([o(f),o(p)]);return d}case P2:{const u=[],d=i([s,u],a);for(const f of a)(e||!NE(_g(f)))&&u.push(o(f));return d}}const{message:l}=a;return i([s,{name:c,message:l}],a)};return o},Y5=(e,{json:t,lossy:r}={})=>{const n=[];return XAe(!(t||r),!!t,new Map,n)(e),n},Bw=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?q5(Y5(e,t)):structuredClone(e):(e,t)=>q5(Y5(e,t));function JAe(e,t){const r=[{type:"text",value:""}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function QAe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function ZAe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||JAe,n=e.options.footnoteBackLabel||QAe,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let c=-1;for(;++c<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[c]);if(!l)continue;const u=e.all(l),d=String(l.identifier).toUpperCase(),f=Mm(d.toLowerCase());let p=0;const m=[],g=e.footnoteCounts.get(d);for(;g!==void 0&&++p<=g;){m.length>0&&m.push({type:"text",value:" "});let E=typeof r=="string"?r:r(c,p);typeof E=="string"&&(E={type:"text",value:E}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(c,p),className:["data-footnote-backref"]},children:Array.isArray(E)?E:[E]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const E=y.children[y.children.length-1];E&&E.type==="text"?E.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...m)}else u.push(...m);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(u,!0)};e.patch(l,v),s.push(v)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Bw(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:`
`}]}}const b1=function(e){if(e==null)return nNe;if(typeof e=="function")return LT(e);if(typeof e=="object")return Array.isArray(e)?eNe(e):tNe(e);if(typeof e=="string")return rNe(e);throw new Error("Expected function, string, or object as test")};function eNe(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=b1(e[r]);return LT(n);function n(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function tNe(e){const t=e;return LT(r);function r(n){const i=n;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function rNe(e){return LT(t);function t(r){return r&&r.type===e}}function LT(e){return t;function t(r,n,i){return!!(iNe(r)&&e.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function nNe(){return!0}function iNe(e){return e!==null&&typeof e=="object"&&"type"in e}const w1=[],oNe=!0,X5=!1,aNe="skip";function sNe(e,t,r,n){let i;typeof t=="function"&&typeof r!="function"?(n=r,r=t):i=t;const o=b1(i),a=n?-1:1;s(e,void 0,[])();function s(c,l,u){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const p=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=w1,m,g,y;if((!t||o(c,l,u[u.length-1]||void 0))&&(p=cNe(r(c,u)),p[0]===X5))return p;if("children"in c&&c.children){const v=c;if(v.children&&p[0]!==aNe)for(g=(n?v.children.length:-1)+a,y=u.concat(v);g>-1&&g<v.children.length;){const E=v.children[g];if(m=s(E,g,y)(),m[0]===X5)return m;g=typeof m[1]=="number"?m[1]:g+a}}return p}}}function cNe(e){return Array.isArray(e)?e:typeof e=="number"?[oNe,e]:e==null?w1:[e]}function S1(e,t,r,n){let i,o,a;typeof t=="function"&&typeof r!="function"?(o=void 0,a=t,i=r):(o=t,a=r,i=n),sNe(e,o,s,i);function s(c,l){const u=l[l.length-1],d=u?u.children.indexOf(c):void 0;return a(c,d,u)}}const mO={}.hasOwnProperty,lNe={};function uNe(e,t){const r=t||lNe,n=new Map,i=new Map,o=new Map,a={...WAe,...r.handlers},s={all:l,applyData:hNe,definitionById:n,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:a,one:c,options:r,patch:dNe,wrap:pNe};return S1(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?n:i,f=String(u.identifier).toUpperCase();d.has(f)||d.set(f,u)}}),s;function c(u,d){const f=u.type,p=s.handlers[f];if(mO.call(s.handlers,f)&&p)return p(s,u,d);if(s.options.passThrough&&s.options.passThrough.includes(f)){if("children"in u){const{children:g,...y}=u,v=Bw(y);return v.children=s.all(u),v}return Bw(u)}return(s.options.unknownHandler||fNe)(s,u,d)}function l(u){const d=[];if("children"in u){const f=u.children;let p=-1;for(;++p<f.length;){const m=s.one(f[p],u);if(m){if(p&&f[p-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=J5(m.value)),!Array.isArray(m)&&m.type==="element")){const g=m.children[0];g&&g.type==="text"&&(g.value=J5(g.value))}Array.isArray(m)?d.push(...m):d.push(m)}}}return d}}function dNe(e,t){e.position&&(t.position=qRe(e))}function hNe(e,t){let r=t;if(e&&e.data){const n=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const a="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:a}}r.type==="element"&&o&&Object.assign(r.properties,Bw(o)),"children"in r&&r.children&&i!==null&&i!==void 0&&(r.children=i)}return r}function fNe(e,t){const r=t.data||{},n="value"in t&&!(mO.call(r,"hProperties")||mO.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function pNe(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function J5(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function Q5(e,t){const r=uNe(e,t),n=r.one(e,void 0),i=ZAe(r),o=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function mNe(e,t){return e&&"run"in e?async function(r,n){const i=Q5(r,{file:n,...t});await e.run(i,n)}:function(r,n){return Q5(r,{file:n,...e||t})}}function Z5(e){if(e)throw e}var J_=Object.prototype.hasOwnProperty,T1=Object.prototype.toString,e3=Object.defineProperty,t3=Object.getOwnPropertyDescriptor,r3=function(t){return typeof Array.isArray=="function"?Array.isArray(t):T1.call(t)==="[object Array]"},n3=function(t){if(!t||T1.call(t)!=="[object Object]")return!1;var r=J_.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&J_.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var i;for(i in t);return typeof i>"u"||J_.call(t,i)},i3=function(t,r){e3&&r.name==="__proto__"?e3(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},o3=function(t,r){if(r==="__proto__")if(J_.call(t,r)){if(t3)return t3(t,r).value}else return;return t[r]},gNe=function e(){var t,r,n,i,o,a,s=arguments[0],c=1,l=arguments.length,u=!1;for(typeof s=="boolean"&&(u=s,s=arguments[1]||{},c=2),(s==null||typeof s!="object"&&typeof s!="function")&&(s={});c<l;++c)if(t=arguments[c],t!=null)for(r in t)n=o3(s,r),i=o3(t,r),s!==i&&(u&&i&&(n3(i)||(o=r3(i)))?(o?(o=!1,a=n&&r3(n)?n:[]):a=n&&n3(n)?n:{},i3(s,{name:r,newValue:e(u,a,i)})):typeof i<"u"&&i3(s,{name:r,newValue:i}));return s};const zR=ia(gNe);function gO(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function yNe(){const e=[],t={run:r,use:n};return t;function r(...i){let o=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);s(null,...i);function s(c,...l){const u=e[++o];let d=-1;if(c){a(c);return}for(;++d<i.length;)(l[d]===null||l[d]===void 0)&&(l[d]=i[d]);i=l,u?vNe(u,s)(...l):a(null,...l)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function vNe(e,t){let r;return n;function n(...a){const s=e.length>a.length;let c;s&&a.push(i);try{c=e.apply(this,a)}catch(l){const u=l;if(s&&r)throw u;return i(u)}s||(c&&c.then&&typeof c.then=="function"?c.then(o,i):c instanceof Error?i(c):o(c))}function i(a,...s){r||(r=!0,t(a,...s))}function o(a){i(null,a)}}const yc={basename:ENe,dirname:_Ne,extname:bNe,join:wNe,sep:"/"};function ENe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Tv(e);let r=0,n=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){r=i+1;break}}else n<0&&(o=!0,n=i+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let a=-1,s=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){r=i+1;break}}else a<0&&(o=!0,a=i+1),s>-1&&(e.codePointAt(i)===t.codePointAt(s--)?s<0&&(n=i):(s=-1,n=a));return r===n?n=a:n<0&&(n=e.length),e.slice(r,n)}function _Ne(e){if(Tv(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function bNe(e){Tv(e);let t=e.length,r=-1,n=0,i=-1,o=0,a;for(;t--;){const s=e.codePointAt(t);if(s===47){if(a){n=t+1;break}continue}r<0&&(a=!0,r=t+1),s===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||r<0||o===0||o===1&&i===r-1&&i===n+1?"":e.slice(i,r)}function wNe(...e){let t=-1,r;for(;++t<e.length;)Tv(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":SNe(r)}function SNe(e){Tv(e);const t=e.codePointAt(0)===47;let r=TNe(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function TNe(e,t){let r="",n=0,i=-1,o=0,a=-1,s,c;for(;++a<=e.length;){if(a<e.length)s=e.codePointAt(a);else{if(s===47)break;s=47}if(s===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(c=r.lastIndexOf("/"),c!==r.length-1){c<0?(r="",n=0):(r=r.slice(0,c),n=r.length-1-r.lastIndexOf("/")),i=a,o=0;continue}}else if(r.length>0){r="",n=0,i=a,o=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(i+1,a):r=e.slice(i+1,a),n=a-i-1;i=a,o=0}else s===46&&o>-1?o++:o=-1}return r}function Tv(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const CNe={cwd:RNe};function RNe(){return"/"}function yO(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function INe(e){if(typeof e=="string")e=new URL(e);else if(!yO(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return xNe(e)}function xNe(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const n=t.codePointAt(r+2);if(n===70||n===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const GR=["history","path","basename","stem","extname","dirname"];class C1{constructor(t){let r;t?yO(t)?r={path:t}:typeof t=="string"||ANe(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":CNe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<GR.length;){const o=GR[n];o in r&&r[o]!==void 0&&r[o]!==null&&(this[o]=o==="history"?[...r[o]]:r[o])}let i;for(i in r)GR.includes(i)||(this[i]=r[i])}get basename(){return typeof this.path=="string"?yc.basename(this.path):void 0}set basename(t){KR(t,"basename"),WR(t,"basename"),this.path=yc.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?yc.dirname(this.path):void 0}set dirname(t){a3(this.basename,"dirname"),this.path=yc.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?yc.extname(this.path):void 0}set extname(t){if(WR(t,"extname"),a3(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=yc.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){yO(t)&&(t=INe(t)),KR(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?yc.basename(this.path,this.extname):void 0}set stem(t){KR(t,"stem"),WR(t,"stem"),this.path=yc.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){const i=this.message(t,r,n);throw i.fatal=!0,i}info(t,r,n){const i=this.message(t,r,n);return i.fatal=void 0,i}message(t,r,n){const i=new go(t,r,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function WR(e,t){if(e&&e.includes(yc.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+yc.sep+"`")}function KR(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function a3(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ANe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const NNe=function(e){const n=this.constructor.prototype,i=n[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,n),o},ONe={}.hasOwnProperty;class D2 extends NNe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=yNe()}copy(){const t=new D2;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];t.use(...n)}return t.data(zR(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(XR("data",this.frozen),this.namespace[t]=r,this):ONe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(XR("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const i=r.call(t,...n);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=OE(t),n=this.parser||this.Parser;return qR("parse",n),n(String(r),r)}process(t,r){const n=this;return this.freeze(),qR("process",this.parser||this.Parser),YR("process",this.compiler||this.Compiler),r?i(void 0,r):new Promise(i);function i(o,a){const s=OE(t),c=n.parse(s);n.run(c,s,function(u,d,f){if(u||!d||!f)return l(u);const p=d,m=n.stringify(p,f);DNe(m)?f.value=m:f.result=m,l(u,f)});function l(u,d){u||!d?a(u):o?o(d):r(void 0,d)}}}processSync(t){let r=!1,n;return this.freeze(),qR("processSync",this.parser||this.Parser),YR("processSync",this.compiler||this.Compiler),this.process(t,i),c3("processSync","process",r),n;function i(o,a){r=!0,Z5(o),n=a}}run(t,r,n){s3(t),this.freeze();const i=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?o(void 0,n):new Promise(o);function o(a,s){const c=OE(r);i.run(t,c,l);function l(u,d,f){const p=d||t;u?s(u):a?a(p):n(void 0,p,f)}}}runSync(t,r){let n=!1,i;return this.run(t,r,o),c3("runSync","run",n),i;function o(a,s){Z5(a),i=s,n=!0}}stringify(t,r){this.freeze();const n=OE(r),i=this.compiler||this.Compiler;return YR("stringify",i),s3(t),i(t,n)}use(t,...r){const n=this.attachers,i=this.namespace;if(XR("use",this.frozen),t!=null)if(typeof t=="function")c(t,r);else if(typeof t=="object")Array.isArray(t)?s(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(l){if(typeof l=="function")c(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[u,...d]=l;c(u,d)}else a(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function a(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(l.plugins),l.settings&&(i.settings=zR(!0,i.settings,l.settings))}function s(l){let u=-1;if(l!=null)if(Array.isArray(l))for(;++u<l.length;){const d=l[u];o(d)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function c(l,u){let d=-1,f=-1;for(;++d<n.length;)if(n[d][0]===l){f=d;break}if(f===-1)n.push([l,...u]);else if(u.length>0){let[p,...m]=u;const g=n[f][1];gO(g)&&gO(p)&&(p=zR(!0,g,p)),n[f]=[l,p,...m]}}}}const kNe=new D2().freeze();function qR(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function YR(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function XR(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function s3(e){if(!gO(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function c3(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function OE(e){return PNe(e)?e:new C1(e)}function PNe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function DNe(e){return typeof e=="string"||LNe(e)}function LNe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const MNe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",l3=[],u3={allowDangerousHtml:!0},jNe=/^(https?|ircs?|mailto|xmpp)$/i,UNe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function FNe(e){const t=VNe(e),r=BNe(e);return $Ne(t.runSync(t.parse(r),r),e)}function VNe(e){const t=e.rehypePlugins||l3,r=e.remarkPlugins||l3,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...u3}:u3;return kNe().use(_Ae).use(r).use(mNe,n).use(t)}function BNe(e){const t=e.children||"",r=new C1;return typeof t=="string"&&(r.value=t),r}function $Ne(e,t){const r=t.allowedElements,n=t.allowElement,i=t.components,o=t.disallowedElements,a=t.skipHtml,s=t.unwrapDisallowed,c=t.urlTransform||HNe;for(const u of UNe)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+MNe+u.id,void 0);return S1(e,l),ZRe(e,{Fragment:h.Fragment,components:i,ignoreInvalidStyle:!0,jsx:h.jsx,jsxs:h.jsxs,passKeys:!0,passNode:!0});function l(u,d,f){if(u.type==="raw"&&f&&typeof d=="number")return a?f.children.splice(d,1):f.children[d]={type:"text",value:u.value},d;if(u.type==="element"){let p;for(p in BR)if(Object.hasOwn(BR,p)&&Object.hasOwn(u.properties,p)){const m=u.properties[p],g=BR[p];(g===null||g.includes(u.tagName))&&(u.properties[p]=c(String(m||""),p,u))}}if(u.type==="element"){let p=r?!r.includes(u.tagName):o?o.includes(u.tagName):!1;if(!p&&n&&typeof d=="number"&&(p=!n(u,d,f)),p&&f&&typeof d=="number")return s&&u.children?f.children.splice(d,1,...u.children):f.children.splice(d,1),d}}}function HNe(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||r!==-1&&t>r||n!==-1&&t>n||jNe.test(e.slice(0,t))?e:""}const zNe="AIzaSyBXEFxQGZZevsfg-BQhHu1H9bgMhfv39ig",GNe=new nRe(zNe),WNe=GNe.getGenerativeModel({model:"gemini-1.5-flash"});function KNe(){C.useState();const[e,t]=C.useState(void 0);C.useState(void 0);const r=async(n,i)=>{const o=await jJ({diseaseName:i});console.log("doctor",o),window.location.reload()};return h.jsx("div",{className:"w-full h-screen pt-10 flex flex-col",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-6",children:[h.jsx("div",{className:"header w-full h-[10%] flex justify-start",children:h.jsx("span",{className:"text-2xl font-medium",children:"Treatment Suggestion "})}),h.jsxs("div",{className:"w-full h-[5vh] flex gap-5",children:[h.jsx("input",{type:"text",name:"disease",className:"w-[40%]",onChange:n=>t(n.target.value),placeholder:"type disease name"}),h.jsx("button",{className:"h-full w-[5vw] bg-orange-500 shadow-lg rounded-md",onClick:n=>r(n,e),children:"Search"})]}),h.jsxs("div",{className:"w-full h-auto border rounded-lg p-2 grid grid-cols-2 gap-4",children:[h.jsx("div",{className:"flex w-full h-auto bg-black bg-opacity-20",children:e&&h.jsx(qNe,{diseaseName:e})}),h.jsx("div",{className:"flex w-full h-auto bg-black bg-opacity-20 p-2",children:e&&h.jsx(YNe,{diseaseName:e})})]})]})})}function qNe(e){const{diseaseName:t}=e,[r,n]=C.useState(void 0),i=async()=>{const o=await jJ({diseaseName:t}),a=await DJ({doctorId:o});n(a)};return C.useEffect(()=>{i()},[]),C.useEffect(()=>{i()},[t]),h.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-2",children:[h.jsx("h2",{className:"w-full h-auto p-3 flex justify-center bg-blue-500 text-lg text-white",children:"Suggested Doctors"}),h.jsx("div",{className:"suggestions w-full h-auto mt-3",children:r&&h.jsx(PJ,{doctor:r})})]})}function YNe(e){const{diseaseName:t}=e,[r,n]=C.useState(""),i=async()=>{const o=`As a doctor explain the precautions to be followed for a patient suffering from disease " ${t} " and present it in a professional structured way`,a=await WNe.generateContent(o);n(a.response.text())};return C.useEffect(()=>{i()},[]),C.useEffect(()=>{i()},[t]),h.jsxs("div",{className:"w-full h-auto flex flex-col gap-4 p-2",children:[h.jsx("div",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center",children:`Precautions for ${t}`}),h.jsx("div",{className:"w-full h-auto flex flex-col",children:h.jsx(FNe,{children:r})})]})}function XNe(e){return jn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M363 277h-86v86h-42v-86h-86v-42h86v-86h42v86h86v42z"},child:[]},{tag:"path",attr:{d:"M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422c-44.3 0-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256c0-44.3 17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}function JNe(e){return jn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M426.666 330.667a250.385 250.385 0 0 1-75.729-11.729c-7.469-2.136-16-1.073-21.332 5.333l-46.939 46.928c-60.802-30.928-109.864-80-140.802-140.803l46.939-46.927c5.332-5.333 7.462-13.864 5.332-21.333-8.537-24.531-12.802-50.136-12.802-76.803C181.333 73.604 171.734 64 160 64H85.333C73.599 64 64 73.604 64 85.333 64 285.864 226.136 448 426.666 448c11.73 0 21.334-9.604 21.334-21.333V352c0-11.729-9.604-21.333-21.334-21.333z"},child:[]}]})(e)}function QNe(e){return jn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M113.5 281.2v85.3L256 448l142.5-81.5v-85.3L256 362.7l-142.5-81.5zM256 64L32 192l224 128 183.3-104.7v147.4H480V192L256 64z"},child:[]}]})(e)}function ZNe(e){return jn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 192v128h85.334L256 431.543V80.458L149.334 192H64z"},child:[]}]})(e)}function eOe(e){return jn({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{strokeWidth:"2",d:"M15 19H2V1h16v4m0 0a5 5 0 110 10 5 5 0 010-10zm-3 9v8l3-2 3 2v-8M5 8h6m-6 3h5m-5 3h2M5 5h2"},child:[]}]})(e)}function tOe(){return h.jsxs("div",{className:"w-full h-[10vh] px-2 text-center font-bold flex justify-center items-center gap-2 ",children:[h.jsxs(Ar,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/doctor/profile/details",children:[h.jsx(NT,{className:"h-[3vh] w-[2vw]"}),h.jsx("span",{className:"flex flex-1",children:"Profile Details"})]}),h.jsxs(Ar,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/doctor/profile/contact",children:[h.jsx(d2,{className:"h-[3vh] w-[2vw]"}),h.jsx("span",{className:"flex flex-1",children:"Contact Details"})]}),h.jsxs(Ar,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/doctor/profile/resetPassword",children:[h.jsx(h2,{className:"h-[3vh] w-[2vw]"}),h.jsx("span",{className:"flex flex-1",children:"Password Reset"})]}),h.jsxs(Ar,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"",children:[h.jsx(QNe,{className:"h-[3vh] w-[2vw]"}),h.jsx("span",{className:"flex flex-1",children:"Educational Details"})]}),h.jsxs(Ar,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"",children:[h.jsx(eOe,{className:"h-[3vh] w-[2vw]"}),h.jsx("span",{className:"flex flex-1",children:"Proof Documents"})]})]})}function rOe(){return h.jsxs("div",{className:"screen w-full h-full ",children:[h.jsx("div",{children:h.jsx(tOe,{})}),h.jsx("div",{className:"content w-full h-full flex flex-1 flex-col",children:h.jsx(eo,{})})]})}const MT="https://hcompanion.onrender.com/api",jT=sessionStorage.getItem("token"),nOe=async e=>{try{const t=await be.post(`${MT}/doctor/profile/updateDetails`,{updateDetails:e},{headers:{Authorization:`bearer ${jT}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},iOe=async()=>{try{return(await be.get(`${MT}/doctor/profile/viewDetails`,{headers:{Authorization:`bearer ${jT}`}})).data.doctorDetails}catch(e){return console.log(e),!1}},oOe=async()=>{try{const e=await be.get(`${MT}/doctor/profile/getContactDetails`,{headers:{Authorization:`bearer ${jT}`}});return console.log(e.data),e.data.contactDetails}catch(e){return console.log(e),!1}},aOe=async e=>{try{const t=await be.post(`${MT}/doctor/profile/updateContactDetails`,e,{headers:{Authorization:`bearer ${jT}`}});return console.log(t.data),re.fire({icon:"success",text:"Contact Details Have been Updated"}),t.data.contactDetails}catch(t){return console.log(t),!1}};function sOe(){const[e,t]=C.useState(""),r=qn({initialValues:{firstName:"",lastName:"",age:"",bloodGroup:"",height:"",weight:"",profileImage:""},validationSchema:Ii().shape({}),onSubmit:async(o,a)=>{console.log("values",o),await nOe(o)&&(re.fire({icon:"success",text:"The profile has been updated"}),i())}}),n=o=>{const a=o.target.files[0],s=new FileReader;s.onload=c=>{t(c.target.result),r.setFieldValue("profileImage",a)},s.readAsDataURL(o.target.files[0])},i=async()=>{const o=await iOe();r.setFieldValue("firstName",o.firstName),r.setFieldValue("lastName",o.lastName),r.setFieldValue("age",o.age),r.setFieldValue("bloodGroup",o.bloodGroup),r.setFieldValue("height",o.height),r.setFieldValue("weight",o.weight),r.setFieldValue("profileImage",o.profileImage),t(o.profileImage)};return C.useEffect(()=>{i()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full flex flex-col items-center",children:h.jsxs("form",{className:"w-[50%] h-full flex flex-col gap-6 pt-10 ",children:[h.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[h.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),h.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:h.jsx("div",{className:"flex flex-col gap-1",children:h.jsx(zh,{helperText:"Choose an Image",name:"profileImage",onChange:n})})})]}),h.jsx(He,{variant:"filled",label:"First Name",name:"firstName",value:r.values.firstName,onChange:r.handleChange}),h.jsx(He,{variant:"filled",label:"Last Name",name:"lastName",value:r.values.lastName,onChange:r.handleChange}),h.jsx(He,{variant:"filled",label:"Age",name:"age",value:r.values.age,onChange:r.handleChange}),h.jsx(He,{variant:"filled",label:"Blood Group",name:"bloodGroup",value:r.values.bloodGroup,onChange:r.handleChange}),h.jsx(He,{variant:"filled",label:"Height",name:"height",value:r.values.height,onChange:r.handleChange}),h.jsx(He,{variant:"filled",label:"Weight",name:"weight",value:r.values.weight,onChange:r.handleChange}),h.jsxs("button",{type:"button",onClick:r.handleSubmit,className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(Gh,{}),"Save"]})]})})})}function cOe(){const e=qn({initialValues:{place:"",state:"",district:"",country:"",pincode:"",houseName:"",phone:""},validationSchema:Ii().shape({}),onSubmit:async(r,n)=>{await aOe(r)&&t()}}),t=async()=>{const{phone:r,...n}=await oOe();console.log("temp contact",n._doc),e.setFieldValue("place",n._doc.place),e.setFieldValue("state",n._doc.state),e.setFieldValue("district",n._doc.district),e.setFieldValue("country",n._doc.country),e.setFieldValue("pincode",n._doc.pincode?n._doc.pincode:""),e.setFieldValue("houseName",n._doc.houseName),e.setFieldValue("phone",r)};return C.useEffect(()=>{t()},[]),h.jsx("div",{className:"w-full h-full",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-4 items-center pt-10",children:[h.jsx("div",{className:"w-[70%] ",children:h.jsx("h1",{className:"text-lg font-medium",children:"Address"})}),h.jsxs("form",{className:"w-[70%]  grid grid-cols-2 gap-4",children:[h.jsx(He,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:e.values.houseName}),h.jsx(He,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),h.jsx(He,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),h.jsx(He,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),h.jsx(He,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),h.jsx(He,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]}),h.jsxs("form",{className:"w-[70%] flex flex-col pt-10",children:[h.jsx("div",{children:h.jsx("h1",{className:"text-lg font-medium",children:"Contact Details"})}),h.jsx("div",{className:"w-[30%] flex flex-col gap-4 mt-5 ",children:h.jsx(He,{variant:"filled",label:"Phone",className:"font-bold",name:"phone",onChange:e.handleChange,value:e.values.phone})})]}),h.jsxs("button",{type:"button",onClick:e.handleSubmit,className:"w-[70%] text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(Gh,{}),"Save"]})]})})}function lOe(){return h.jsx("div",{className:"w-full h-screen flex pt-[15vh] justify-center",children:h.jsxs("div",{className:"resetPassword w-[40%] h-fit flex flex-col gap-6 border shadow-lg p-5 ",children:[h.jsx("h1",{className:"text-lg font-medium",children:"Reset Password"}),h.jsx(NJ,{})]})})}function uOe(){const{username:e}=oi(t=>t.user);return h.jsxs("div",{className:"w-full h-full flex flex-col",children:[h.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:h.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:h.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white p-10",children:[h.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome"}),h.jsx("span",{className:"text-[10vh] font-bold",children:e}),h.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Pharmacy offers you the best Management of the Medicines"})]})})}),h.jsx("div",{className:"stock w-full h-auto mt-5",children:h.jsx("div",{className:"w-full h-[100vh] flex gap-10",children:h.jsx("div",{className:"w-full h-auto flex justify-center",children:h.jsx("img",{src:"/normalUser.png",className:"rounded-full object-fit h-[20vh] w-[10vw]"})})})})]})}const Cv="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const dOe=async()=>{try{const e=await be.get(`${Cv}/laboratory/profile/getDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("lab details",e.data),e.data.laboratoryDetails}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Your session is out.....please Log In"}):e.status=="401"&&re.fire({icon:"warning",text:"Log In"}),!1}},hOe=async e=>{try{const t=await be.post(`${Cv}/laboratory/profile/updateDetails`,{updateDetails:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},fOe=async()=>{try{const e=await be.get(`${Cv}/laboratory/profile/getProfileDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("profile details",e.data),e.data.details}catch(e){return console.log(e),!1}},pOe=async()=>{try{return(await be.get(`${Cv}/laboratory/profile/getContactDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.contactDetails}catch(e){return console.log(e),!1}},mOe=async e=>{try{const t=await be.post(`${Cv}/laboratory/profile/updateContactDetails`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return re.fire({icon:"success",text:"Contact Details Have been Updated"}),!0}catch(t){return console.log(t),!1}},gOe={laboratoryName:"",ownerName:"",profileImage:""},R1=Im({name:"laboratory",initialState:gOe,reducers:{setLaboratory(e,t){e.laboratoryName=t.payload.laboratoryName,e.ownerName=t.payload.ownerName,e.profileImage=t.payload.profileImage}}}),{setLaboratory:yOe}=R1.actions,vOe=R1.reducer;function EOe(){const e=Hh(),t=en(),{username:r,email:n}=oi(c=>c.user),{laboratoryName:i,ownerName:o,profileImage:a}=oi(c=>c.laboratory),s=async()=>{const c=await dOe();c&&(e(Ao({username:c.userId.username,email:c.userId.email,phone:c.userId.phone,role:c.userId.role,isLoggedIn:!0})),e(yOe({laboratoryName:c.laboratoryName,ownerName:c.ownerName,profileImage:c.profileImage})))};return C.useEffect(()=>{s()},[]),h.jsx("div",{className:"navbarParent h-full w-full ",children:h.jsxs("div",{className:"navbar w-full h-full flex flex-col rounded-tr-[3%] bg-pink-600 bg-opacity-90 p-4 gap-10 ",children:[h.jsxs("div",{className:"w-full h-[8vh] flex justify-start items-center gap-4 ",children:[h.jsx("img",{src:"/icons/arrowBack.png",alt:"",className:"h-[5vh] w-[] p-2 ml-2 bg-white  rounded-lg"}),h.jsx("h2",{className:"text-white text-sm",children:"Minimize"}),h.jsx("div",{className:"flex-1 h-full flex justify-end items-center",children:h.jsx("img",{src:"/logo.png",alt:"",className:"w-[7vw] h-[7vh] bg-white mr-4"})})]}),h.jsxs("div",{className:"profile h-[12%] flex flex-row justify-start gap-4",children:[h.jsx("div",{className:"profileImage w-auto h-full flex ",children:h.jsx("img",{src:a,alt:"image",className:"h-full w-[5vw] rounded-full "})}),h.jsxs("div",{className:"details flex-1 flex flex-col justify-center bg-white bg-opacity-30 p-2 rounded-lg gap-2 ",children:[h.jsx("span",{children:h.jsx("h2",{className:"text-white text-lg font-bold",children:i||r})}),h.jsx("span",{children:h.jsx("h2",{className:"text-white text-sm",children:"Laboratory"})})]})]}),h.jsx("div",{className:"search w-full h-[5%]",children:h.jsx(He,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),h.jsxs("div",{className:"home w-full text-white h-[80%] flex flex-col gap-4 border-slate-50",children:[h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[h.jsx("img",{src:"/icons/laboratory_homeIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full cursor-pointer",onClick:()=>{t("/laboratory/home")},children:"Home"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[h.jsx("img",{src:"/icons/laboratory_serviceIcon.jpg",alt:"laboratory services",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full cursor-pointer",onClick:()=>{t("/laboratory/testServices")},children:"Laboratory test Services"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[h.jsx("img",{src:"/icons/laboratory_testOrderIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{t("/laboratory/order")},children:"Test Orders"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[h.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{t("/laboratory/profile")},children:"Profile"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[h.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),e(Ao({})),t("/")},children:"sign out"})]})]})]})})}function _Oe(){return h.jsxs("div",{className:"w-screen h-screen flex fex-col",children:[h.jsx("div",{className:"fixed header w-[21%] h-[100vh] ",children:h.jsx(EOe,{})}),h.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4 overflow-y-auto",children:h.jsx(eo,{})})]})}function bOe(){return h.jsxs("div",{className:"w-full h-auto p-5 flex flex-row gap-5 justify-start ",children:[h.jsxs(Ar,{className:"w-auto h-auto p-3 flex flex-row gap-5 items-center border rounded-lg shadow-lg shadow-emerald-200",to:"/laboratory/testServices/addTest",children:[h.jsx(XNe,{className:"w-[2vw] h-[4vh]"}),h.jsx("span",{className:"font-medium",children:"New Test"})]}),h.jsxs(Ar,{className:"w-auto h-auto p-3 flex flex-row gap-5 items-center border rounded-lg shadow-lg shadow-emerald-200",to:"/laboratory/testServices/viewTests",children:[h.jsx(ATe,{className:"w-[2vw] h-[4vh]"}),h.jsx("span",{className:"font-medium",children:"View Test Service"})]})]})}function wOe(){return h.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[h.jsx("div",{className:"w-full h-[10vh]",children:h.jsx(bOe,{})}),h.jsx("div",{className:"content w-full h-full flex flex-col overflow-y-auto ",children:h.jsx(eo,{})})]})}const bs="https://hcompanion.onrender.com/api",ws=sessionStorage.getItem("token"),SOe=async({testName:e,testId:t,atLab:r,atHome:n,priceHome:i,priceLab:o})=>{try{const a=await be.post(`${bs}/laboratory/test/addTest`,{testId:t,priceHome:i,priceLab:o,atHome:n,atLab:r},{headers:{Authorization:`bearer ${ws}`}});return!0}catch(a){return console.log(a),a.status=="500"&&a.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):a.status=="400"&&a.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):a.status=="400"&&a.response.data.errorTestPresent?re.fire({icon:"warning",text:"Test Already Present"}):a.status=="401"&&re.fire({icon:"warning",text:"Log In"}),!1}},TOe=async()=>{try{return(await be.get(`${bs}/laboratory/test/getTestsPresent`,{headers:{Authorization:`bearer ${ws}`}})).data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"&&re.fire({icon:"warning",text:"Log In"}),!1}},COe=async()=>{try{return(await be.get(`${bs}/laboratory/test/getAddedTests`,{headers:{Authorization:`bearer ${ws}`}})).data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"&&re.fire({icon:"warning",text:"Log In"}),!1}},ROe=async({testName:e,testId:t})=>{try{const r=await be.post(`${bs}/laboratory/test/getAddedTestDetails`,{testName:e,testId:t},{headers:{Authorization:`bearer ${ws}`}});return console.log(r.data),r.data.test}catch(r){return console.log(r),r.status=="500"&&r.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):r.status=="400"&&r.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):r.status=="401"?re.fire({icon:"warning",text:"Log In"}):r.status=="404"&&r.response.data.errorTestPresent&&re.fire({icon:"warning",text:"Test can't be found at database"}),!1}},IOe=async({testName:e,testId:t,atHome:r,atLab:n,priceHome:i,priceLab:o})=>{try{const a=await be.post(`${bs}/laboratory/test/updateAddedTestDetails`,{testName:e,testId:t,atHome:r,atLab:n,priceHome:i,priceLab:o},{headers:{Authorization:`bearer ${ws}`}});return console.log(a.data),!0}catch(a){return console.log(a),a.status=="500"&&a.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):a.status=="400"&&a.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):a.status=="401"?re.fire({icon:"warning",text:"Log In"}):a.status=="400"&&a.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},xOe=async({testName:e,testId:t})=>{try{const r=await be.post(`${bs}/laboratory/test/deletedAddedTest`,{testName:e,testId:t},{headers:{Authorization:`bearer ${ws}`}});return console.log(r.data),!0}catch(r){return console.log(r),r.status=="500"&&r.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):r.status=="400"&&r.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):r.status=="401"?re.fire({icon:"warning",text:"Log In"}):r.status=="400"&&r.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},AOe=async()=>{try{return(await be.get(`${bs}/laboratory/order/test/getOrderedTests`,{headers:{Authorization:`bearer ${ws}`}})).data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"?re.fire({icon:"warning",text:"Log In"}):e.status=="400"&&e.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},NOe=async({testOrderId:e})=>{try{const t=await be.post(`${bs}/laboratory/order/test/completeOrderedTest`,{testOrderId:e},{headers:{Authorization:`bearer ${ws}`}});return!0}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},OOe=async()=>{try{return(await be.get(`${bs}/laboratory/order/test/getCompletedOrderedTest`,{headers:{Authorization:`bearer ${ws}`}})).data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"?re.fire({icon:"warning",text:"Log In"}):e.status=="400"&&e.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},kOe=async({testOrderId:e})=>{try{return(await be.post(`${bs}/laboratory/order/test/completed/testDetails`,{testOrderId:e},{headers:{Authorization:`bearer ${ws}`}})).data.order}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},POe=async({testOrderId:e,testResultDescription:t,patientId:r,doctorId:n})=>{try{const i=await be.post(`${bs}/laboratory/order/test/uploadResult`,{testOrderId:e,testResultDescription:t,patientId:r,doctorId:n},{headers:{Authorization:`bearer ${ws}`}});return!0}catch(i){return console.log(i),i.status=="500"&&i.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):i.status=="400"&&i.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):i.status=="401"?re.fire({icon:"warning",text:"Log In"}):i.status=="400"&&i.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},I1=async({testOrderId:e})=>{try{return(await be.post(`${bs}/laboratory/order/test/result/getDetails`,{testOrderId:e},{headers:{Authorization:`bearer ${ws}`}})).data.result}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},x1=Ii().shape({testId:jt().required("choose right category"),atHome:NN().required(),atLab:NN().required(),priceHome:jt().when("atHome",{is:!0,then:()=>jt().required().matches(/^(0|[1-9]\d*)(\.\d{1,2})?$/,"Not a number"),otherwise:()=>jt()}),priceLab:jt().when("atLab",{is:!0,then:()=>jt().required().matches(/^(0|[1-9]\d*)(\.\d{1,2})?$/,"Not a number"),otherwise:()=>jt()})}).test("atHome-or-atlab","Should choose any of them",e=>(console.log("jjjj",e),e?e.atHome||e.atLab:!1)),DOe=Ii().shape({testResultDescription:jt().required("Shouldn't be left empty")});function LOe(){const[e,t]=C.useState({}),[r,n]=C.useState([]),[i,o]=C.useState(void 0),a=qn({initialValues:{testId:"",priceHome:"",priceLab:"",atHome:!1,atLab:!1},validationSchema:x1,onSubmit:async(u,d)=>{await SOe(u)&&re.fire({icon:"success",text:"Test Service has been added"})}}),s=async u=>{const d=r==null?void 0:r.find(f=>f.testName==u.target.value);o(d),d?await a.setFieldValue("testId",d._id):await a.setFieldValue("testId",""),a.setFieldTouched("testId",!0)},c=async u=>{await t({...e,[u.target.name]:!e[u.target.name]}),u.target.name=="home"?(await a.setFieldValue("atHome",!a.values.atHome),a.setFieldTouched("atHome",!0)):u.target.name=="lab"&&(await a.setFieldValue("atLab",!a.values.atLab),a.setFieldTouched("atLab",!0))},l=async()=>{const u=await TOe();await n(u)};return C.useEffect(()=>{l()},[]),C.useEffect(()=>{const u=[];Object.keys(e).forEach(d=>{e[d]&&u.push(d)}),a.setFieldValue("testType",u)},[e]),console.log("values",a.values),console.log("errors",a.errors),h.jsx("div",{className:"w-full h-full flex flex-col items-center ",children:h.jsxs("form",{onSubmit:a.handleSubmit,className:"w-[80%] h-full flex flex-col gap-5 pt-20 px-5",children:[h.jsx("h1",{className:"font-bold text-emerald-400 text-2xl",children:"Test"}),h.jsxs("div",{className:"w-full h-auto flex flex-row gap-5 ",children:[h.jsxs("div",{className:"w-[60%] h-full flex flex-col gap-5",children:[h.jsx(He,{list:"tests",name:"testName",variant:"filled",label:"Test Type",onChange:s,onBlur:u=>a.setFieldTouched("testId",!0),...a.touched.testId&&(a.errors.testId?{color:"error",helperText:`${a.errors.testId}`}:{color:"success"})}),h.jsx("div",{children:h.jsx("datalist",{id:"tests",children:r&&r.map((u,d)=>h.jsx("option",{value:u.testName},d))})}),h.jsx("textarea",{label:" Test Description",rows:"10",value:i&&i.testDescription,placeholder:"Test Description"}),h.jsxs("div",{className:"options w-full h-auto flex flex-col gap-10 ",children:[h.jsx("h1",{className:"text-md font-medium",children:"Test Service Options"}),h.jsxs("div",{className:"flex flex-1 gap-10 w-full",children:[h.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("input",{type:"checkbox",id:"id_chkhome",name:"home",value:"home",onChange:c,checked:a.va}),h.jsx("span",{children:"Home"})]}),e.home&&h.jsx(He,{variant:"filled",label:"Price at Home",name:"priceHome",onChange:a.handleChange,onBlur:a.handleBlur,...a.touched.priceHome&&(a.errors.priceHome?{color:"error",helperText:`${a.errors.priceHome}`}:{color:"success"})})]}),h.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("input",{type:"checkbox",id:"id_lab",name:"lab",value:"lab",onChange:c}),h.jsx("span",{children:"Lab"})]}),e.lab&&h.jsx(He,{variant:"filled",label:"Price at Lab",name:"priceLab",onChange:a.handleChange,onBlur:a.handleBlur,...a.touched.priceLab&&(a.errors.priceLab?{color:"error",helperText:`${a.errors.priceLab}`}:{color:"success"})})]})]})]}),h.jsx("button",{type:"submit",className:"w-[full] h-[5vh] border rounded-[5%] bg-orange-500 p-2 mb-5",children:"Add Test"})]}),h.jsx("div",{className:"w-[30%] h-[40vh] flex flex-col",children:h.jsx("img",{src:i&&i.testImage,className:"h-full w-full object-fit",alt:"testImage"})})]})]})})}function MOe(){return h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full",children:h.jsx(jOe,{})})})}function jOe(e){const t=en(),[r,n]=C.useState(),i=["Test Name","image","on Home","on Clinic","Edit","Delete"],o=async()=>{const s=await COe();n(s)};C.useEffect(()=>{o()},[]);const a=async(s,c)=>{re.fire({showCancelButton:!0,title:"Do you want to delete",text:"please click yes to proceed",confirmButtonText:"Delete"}).then(async l=>{l.isConfirmed&&await xOe({testId:c==null?void 0:c.testId})&&(re.fire("Deleted","","success"),o())})};return h.jsx("div",{className:"w-auto h-auto px-10 py-5",children:h.jsxs(yr,{hoverable:!0,children:[h.jsx(yr.Head,{children:i.map((s,c)=>h.jsx(yr.HeadCell,{children:s},c))}),h.jsx(yr.Body,{className:"font-bold text-black",children:r&&r.map((s,c)=>h.jsxs(yr.Row,{className:"border border-b-black",children:[h.jsx(yr.Cell,{children:s.testId.testName}),h.jsx(yr.Cell,{children:h.jsx("img",{src:s.testId.testImage,className:"w-[3vw] h-[4vh] object-fit"})}),h.jsx(yr.Cell,{children:s.atHome?s.priceHome:"not available"}),h.jsx(yr.Cell,{children:s.atLab?s.priceLab:"not available"}),h.jsx(yr.Cell,{className:"cursor-pointer",children:h.jsx(AJ,{onClick:()=>t(`/laboratory/testServices/editTestDetails/?testName=${s.testId.testName}&testId=${s.testId._id}`)})}),h.jsx(yr.Cell,{className:"cursor-pointer",children:h.jsx(xTe,{onClick:l=>a(l,s)})})]},c))})]})})}function UOe(){var l,u,d;const[e,t]=gW(),[r,n]=C.useState(void 0),[i,o]=C.useState({}),a=qn({initialValues:{testId:e.get("testId"),priceHome:"",priceLab:"",atHome:!1,atLab:!1},validationSchema:x1,onSubmit:async(f,p)=>{await IOe({...f,testName:e.get("testId")})&&(re.fire({icon:"success",text:"Test Service has been updated"}),await c())}}),s=async f=>{await o({...i,[f.target.name]:!i[f.target.name]}),f.target.name=="home"?(await a.setFieldValue("atHome",!a.values.atHome),a.setFieldTouched("atHome",!0)):f.target.name=="lab"&&(await a.setFieldValue("atLab",!a.values.atLab),a.setFieldTouched("atLab",!0))},c=async()=>{const f=await ROe({testName:e.get("testName"),testId:e.get("testId")});n(f),a.setFieldValue("atHome",f.atHome),a.setFieldValue("atLab",f.atLab),a.setFieldValue("priceHome",f.priceHome),a.setFieldValue("priceLab",f.priceLab)};return C.useEffect(()=>{c()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsxs("form",{onSubmit:a.handleSubmit,className:"w-full h-full flex  gap-4 px-6 py-20 justify-center",children:[h.jsxs("div",{className:"detail w-[60%] h-auto flex flex-col gap-6 shadow-lg shadow-pink-500 p-4",children:[h.jsx("h1",{className:"w-full font-medium text-2xl text-emerald-400 flex justify-center ",children:"Update Test"}),h.jsx(He,{variant:"filled",label:"Test Name",value:(l=r==null?void 0:r.testId)==null?void 0:l.testName}),h.jsx("textarea",{variant:"filled",rows:"20",label:"Test Description",value:(u=r==null?void 0:r.testId)==null?void 0:u.testDescription}),h.jsxs("div",{className:"w-full h-auto flex gap-2",children:[h.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("input",{type:"checkbox",id:"id_chkhome",name:"home",value:"home",onChange:s,checked:a.values.atHome}),h.jsx("span",{children:"Home"})]}),a.values.atHome&&h.jsx(He,{variant:"filled",label:"Price at Home",name:"priceHome",value:a.values.priceHome,onChange:a.handleChange,onBlur:a.handleBlur,...a.touched.priceHome&&(a.errors.priceHome?{color:"error",helperText:a.errors.priceHome}:{color:"success"})})]}),h.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("input",{type:"checkbox",id:"id_lab",name:"lab",value:"lab",onChange:s,checked:a.values.atLab}),h.jsx("span",{children:"Lab"})]}),a.values.atLab&&h.jsx(He,{variant:"filled",label:"Price at Lab",name:"priceLab",value:a.values.priceLab,onChange:a.handleChange,onBlur:a.handleBlur,...a.touched.priceLab&&(a.errors.priceLab?{color:"error",helperText:a.errors.priceLab}:{color:"success"})})]})]}),h.jsxs("button",{type:"submit",className:"w-[full] h-[5vh] border rounded-[5%] bg-orange-500 p-2 mb-5 flex gap-2 items-center justify-center",children:[h.jsx(AJ,{}),"Update Test"]})]}),h.jsx("div",{className:"testImage flex  w-[20vw] h-full pt-20",children:h.jsx("img",{src:(d=r==null?void 0:r.testId)==null?void 0:d.testImage,alt:"test image",className:"mt-5 object-fit h-[40vh] w-[20vw]"})})]})})}function FOe(e){const{test:t}=e;return h.jsx("div",{className:"flex w-auto h-auto border rounded-lg shadow-lg shadow-emerald-300 hover:bg-black hover:bg-opacity-10 py-5 px-3 cursor-pointer   ",children:h.jsxs("div",{className:"w-[30vw] h-auto flex flex-row gap-5 ",children:[h.jsx("div",{className:"image w-[50%] h-full flex justify-center items-center",children:h.jsx("img",{src:t==null?void 0:t.testImage,alt:"testImage",className:"object-cover w-full h-[70%]"})}),h.jsxs("div",{className:"w-full h-full content flex flex-col gap-5 bg-black bg-opacity-10 p-4",children:[h.jsx("h2",{className:"flex justify-center text-white bg-blue-500 py-3 font-medium",children:t==null?void 0:t.testName}),h.jsx("textarea",{name:"testDescription",id:"id_testDescripion",value:t==null?void 0:t.testDescription,rows:"10",className:"flex text-sm cursor-pointer border-0",disabled:!0})]})]})})}function VOe(){const[e,t]=C.useState([]),r=en(),n=async()=>{const i=await gCe();t(i)};return C.useEffect(()=>{n()},[]),h.jsx("div",{className:"flex flex-col w-full h-full",children:h.jsx("div",{className:"w-full h-full grid grid-cols-3 gap-4 justify-items-start",children:(e==null?void 0:e.length)>0&&e.map((i,o)=>h.jsx("div",{className:"w-auto h-auto cursor-pointer",onClick:()=>r(`/patient/tests/testDetails/?testId=${i._id}&testName=${i.testName}`),children:h.jsx(FOe,{test:i})},o))})})}function jm(e){return jn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"circle",attr:{cx:"256",cy:"192",r:"32"},child:[]},{tag:"path",attr:{d:"M256 32c-88.22 0-160 68.65-160 153 0 40.17 18.31 93.59 54.42 158.78 29 52.34 62.55 99.67 80 123.22a31.75 31.75 0 0 0 51.22 0c17.42-23.55 51-70.88 80-123.22C397.69 278.61 416 225.19 416 185c0-84.35-71.78-153-160-153zm0 224a64 64 0 1 1 64-64 64.07 64.07 0 0 1-64 64z"},child:[]}]})(e)}function BOe(e){var r;const{test:t}=e;return h.jsx("div",{className:"flex w-full h-full ",children:h.jsxs("div",{className:"flex h-full w-[40vw] gap-6 bg-white  border rounded-lg p-4 shadow-lg",children:[h.jsx("div",{className:"image w-[20%] h-[90%]",children:h.jsx("img",{src:"/normalUser.png",alt:"image",className:"object-fit w-full h-full"})}),h.jsxs("div",{className:"details h-full w-full flex flex-1 flex-col gap-4 ",children:[h.jsx("h1",{children:(r=t==null?void 0:t.labId)==null?void 0:r.userId.username}),h.jsx("div",{className:"location"}),h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx(jm,{}),h.jsx("span",{children:"Koovappally"})]}),h.jsxs("div",{className:"flex gap-2 w-full h-auto",children:[(t==null?void 0:t.atHome)&&h.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-orange-400 p-3 rounded-md flex gap-4 items-center",children:[h.jsx("span",{children:" Home Service"}),h.jsxs("span",{className:"flex gap-2 items-center",children:[h.jsx(Fw,{}),h.jsx("h6",{children:t==null?void 0:t.priceHome})]})]}),(t==null?void 0:t.atLab)&&h.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-blue-400 p-3 rounded-md flex gap-4 items-center",children:[h.jsx("span",{children:" Lab Service"}),h.jsxs("span",{className:"flex gap-2 items-center",children:[h.jsx(Fw,{}),h.jsx("h6",{children:t==null?void 0:t.priceLab})]})]})]})]})]})})}function $Oe(){const[e,t]=C.useState([]),[r,n]=C.useState(void 0),i=new URLSearchParams(window.location.search),o=async()=>{const a=await yCe({testId:i.get("testId")});t(a),n(a[0].testId)};return C.useEffect(()=>{o()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"screen w-full h-full flex  gap-2 justify-between ",children:[h.jsxs("div",{className:"w-[50%] h-[80vh] flex gap-10 border p-4 shadow-lg items-center bg-emerald-400 bg-opacity-10 bg-blur-sm",children:[h.jsx("div",{className:"image h-[40vh] w-[70%]",children:h.jsx("img",{src:r==null?void 0:r.testImage,alt:"testImage",className:"w-full h-full object-fit"})}),h.jsxs("div",{className:"testDetails flex flex-col gap-2 w-full h-full justify-center",children:[h.jsxs("div",{className:"description w-full h-[10vh] border shadow-lg flex flex-col gap-2 px-1",children:[h.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Name"}),h.jsx("span",{className:"text-lg font-medium",children:r==null?void 0:r.testName.toUpperCase()})]}),h.jsxs("div",{className:"testDescription flex flex-col gap-2 border w-full h-[40vh] shadow-lg px-1",children:[h.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Description"}),h.jsx("span",{className:"h-[10vh] p-2",children:r==null?void 0:r.testDescription})]})]})]}),h.jsxs("div",{className:"laboratorys bg-black bg-opacity-10 p-3 flex flex-col gap-4 w-auto h-full border  ",children:[h.jsx("h2",{className:"text-lg text-white  font-medium flex justify-center bg-blue-500 py-2",children:"Labs where the service available"}),h.jsx("div",{className:"labs flex flex-col gap-4 h-full w-full overflow-y-auto",children:(e==null?void 0:e.length)>0&&e.map((a,s)=>h.jsx("div",{className:"w-full h-auto",children:h.jsx(BOe,{test:a})},s))})]})]})})}function HOe(){return h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[h.jsx(Ar,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"currentBookings",children:"Booked"}),h.jsx(Ar,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"pastBookings",children:"Past Bookings"})]})})}function zOe(){return h.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[h.jsx("div",{className:"header w-full h-[5vh]",children:h.jsx(HOe,{})}),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx(eo,{})})]})}const L2="https://hcompanion.onrender.com/api",A1=sessionStorage.getItem("token"),GOe=async()=>{var e,t,r;try{return(await be.get(`${L2}/patient/bookings/getAllCurrentBookings`,{headers:{Authorization:`bearer ${A1}`}})).data.bookings}catch(n){return console.log(n),((e=n.response)==null?void 0:e.status)=="500"&&((r=(t=n.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Server Error","","error"),!1}},N1=async({startTime:e,slotDate:t,doctorId:r})=>{var n,i,o;try{const a=await be.post(`${L2}/patient/bookings/cancelBooking`,{startTime:e,slotDate:t,doctorId:r},{headers:{Authorization:`bearer ${A1}`}});return console.log(a.data),!0}catch(a){return console.log(a),((n=a.response)==null?void 0:n.status)=="500"&&((o=(i=a.response)==null?void 0:i.data)!=null&&o.errorServer)&&re.fire("Server Error","","error"),!1}},WOe=async()=>{var e,t,r;try{return(await be.get(`${L2}/patient/bookings/getPastBookings`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.bookings}catch(n){return console.log(n),((e=n.response)==null?void 0:e.status)=="500"&&((r=(t=n.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Server Error","","error"),!1}};function KOe(e){var n,i,o,a,s,c,l;const{booking:t}=e;en();const r=async(u,d,f,p)=>{u.preventDefault(),await re.fire({showCancelButton:!0,confirmButtonText:"Proceed Canceling",text:"Do you want to cancel the booking",icon:"question"}).then(async m=>{m.isConfirmed&&await N1({startTime:d,slotDate:f,doctorId:p})&&(await re.fire("Canceled","Booking has been Canceled","success"),window.location.reload())})};return h.jsx("div",{className:"w-full h-full ",children:h.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[h.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:h.jsx("img",{src:(n=t==null?void 0:t.doctorId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),h.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[h.jsx("h4",{className:"text-sm font-medium opacity-40",children:"Cardiology"}),h.jsx("div",{className:"w-full h-auto",children:h.jsx("h4",{children:(o=(i=t==null?void 0:t.doctorId)==null?void 0:i.userId)==null?void 0:o.username})}),h.jsx("div",{className:"location w-full h-auto",children:h.jsxs("div",{className:"flex gap-4 items-start",children:[h.jsx(jm,{}),h.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[h.jsx("span",{className:"flex items-center",children:(s=(a=t==null?void 0:t.doctorId)==null?void 0:a.addressId)==null?void 0:s.place}),h.jsx("span",{className:"flex items-center",children:(l=(c=t==null?void 0:t.doctorId)==null?void 0:c.addressId)==null?void 0:l.district})]})]})})]}),h.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[h.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[h.jsx(bv,{}),h.jsx("span",{children:`${t==null?void 0:t.slotDate} ${dt(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),h.jsxs("div",{className:"w-full h-auto flex gap-4",children:[h.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:u=>{var d;return r(u,t==null?void 0:t.startTime,t==null?void 0:t.slotDate,(d=t==null?void 0:t.doctorId)==null?void 0:d._id)},children:"Cancel"}),dt().isAfter(dt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A"))&&dt().isBefore(dt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))&&h.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:u=>window.open(`/patient/bookings/videoConsult?patientId=${t.patientId._id}&doctorId=${t.doctorId._id}`,"_blank"),children:"Join Meeting"})]})]})]})})}function qOe(){const[e,t]=C.useState([]),r=async()=>{const n=await GOe();await t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"flex w-full h-full",children:h.jsx("div",{className:"booked flex flex-col gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>h.jsx("div",{className:"w-[60vw] h-[25vh] ",children:h.jsx(KOe,{booking:n})},i))})})}function YOe(){return h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[h.jsx(Ar,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"currentBookings",children:"Booked"}),h.jsx(Ar,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"pastCompletedBookings",children:"Past Bookings"})]})})}function XOe(){return h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsxs("div",{className:"screen w-full h-full flex flex-col gap-10 p-2",children:[h.jsx("div",{className:"w-full h-[5vh] flex",children:h.jsx(YOe,{})}),h.jsx("div",{className:"w-full h-full p-2 flex flex-col",children:h.jsx(eo,{})})]})})}const O1="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const JOe=async()=>{var e,t,r;try{const n=await be.get(`${O1}/doctor/bookings/getAllCurrentBookings`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(n.data),n.data.bookings}catch(n){return console.log(n),((e=n==null?void 0:n.response)==null?void 0:e.status)=="500"&&((r=(t=n==null?void 0:n.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Server Error","","error"),!1}},QOe=async()=>{var e,t,r;try{const n=await be.get(`${O1}/doctor/bookings/getPastCompletedBookings`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(n.data),n.data.bookings}catch(n){return console.log(n),((e=n==null?void 0:n.response)==null?void 0:e.status)=="500"&&((r=(t=n==null?void 0:n.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Server Error","","error"),!1}};dt.extend(tc);function ZOe(e){var n,i,o,a,s,c;const{booking:t}=e;en(),console.log("test date",dt().add(2,"hour").isBefore(dt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour")));const r=async(l,u,d,f)=>{l.preventDefault(),await re.fire({showCancelButton:!0,confirmButtonText:"Proceed Rescheduling",text:"Do you want to Reschedule the booking",icon:"question"}).then(async p=>{p.isConfirmed&&await patient_cancelBookingService({startTime:u,slotDate:d,doctorId:f})&&(await re.fire("Canceled","Booking has been Canceled","success"),window.location.reload())})};return h.jsx("div",{className:"w-full h-full ",children:h.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[h.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:h.jsx("img",{src:(n=t==null?void 0:t.patientId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),h.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[h.jsx("h4",{className:"text-sm font-medium opacity-40",children:"Cardiology"}),h.jsx("div",{className:"w-full h-auto",children:h.jsx("h4",{children:(i=t==null?void 0:t.patientId)==null?void 0:i.firstName})}),h.jsx("div",{className:"location w-full h-auto",children:h.jsxs("div",{className:"flex gap-4 items-start",children:[h.jsx(jm,{}),h.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[h.jsx("span",{className:"flex items-center",children:(a=(o=t==null?void 0:t.patientId)==null?void 0:o.addressId)==null?void 0:a.place}),h.jsx("span",{className:"flex items-center",children:(c=(s=t==null?void 0:t.patientId)==null?void 0:s.addressId)==null?void 0:c.district})]})]})})]}),h.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[h.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[h.jsx(bv,{}),h.jsx("span",{children:`${t==null?void 0:t.slotDate} ${dt(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),h.jsxs("div",{className:"w-full h-auto flex flex-between gap-4",children:[h.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:l=>{var u;return r(l,t==null?void 0:t.startTime,t==null?void 0:t.slotDate,(u=t==null?void 0:t.doctorId)==null?void 0:u._id)},children:"Reschedule"}),dt().isAfter(dt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A"))&&dt().isBefore(dt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))&&h.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:l=>window.open(`/patient/bookings/videoConsult?patientId=${t.patientId._id}&doctorId=${t.doctorId._id}`,"_blank"),children:"Join Meeting"})]})]})]})})}function eke(){const[e,t]=C.useState([]),r=async()=>{const n=await JOe();t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"bookings w-full h-full",children:(e==null?void 0:e.length)>0&&(e==null?void 0:e.map((n,i)=>h.jsx("div",{className:"w-[70%] h-[25vh]",children:h.jsx(ZOe,{booking:n})},i)))})})})}/**
 * @license agora-rtc-react
 * @version 2.3.0
 *
 * Copyright (c) Agora, Inc.
 *
 * This source code is licensed under the MIT license.
 */function tke(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in e)){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(e)}var Rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tn=function(e){try{return!!e()}catch{return!0}},UT=!tn(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),k1=UT,P1=Function.prototype,vO=P1.call,rke=k1&&P1.bind.bind(vO,vO),Yr=k1?rke:function(e){return function(){return vO.apply(e,arguments)}},Hi=Yr({}.isPrototypeOf),kE=function(e){return e&&e.Math==Math&&e},Yn=kE(typeof globalThis=="object"&&globalThis)||kE(typeof window=="object"&&window)||kE(typeof self=="object"&&self)||kE(typeof Rp=="object"&&Rp)||function(){return this}()||Rp||Function("return this")(),nke=UT,D1=Function.prototype,d3=D1.apply,h3=D1.call,M2=typeof Reflect=="object"&&Reflect.apply||(nke?h3.bind(d3):function(){return h3.apply(d3,arguments)}),L1=Yr,ike=L1({}.toString),oke=L1("".slice),Hc=function(e){return oke(ike(e),8,-1)},ake=Hc,ske=Yr,w0=function(e){if(ake(e)==="Function")return ske(e)},JR=typeof document=="object"&&document.all,FT={all:JR,IS_HTMLDDA:JR===void 0&&JR!==void 0},cke=FT.all,Xn=FT.IS_HTMLDDA?function(e){return typeof e=="function"||e===cke}:function(e){return typeof e=="function"},Rv={},Ba=!tn(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),lke=UT,PE=Function.prototype.call,Jn=lke?PE.bind(PE):function(){return PE.apply(PE,arguments)},VT={},M1={}.propertyIsEnumerable,j1=Object.getOwnPropertyDescriptor,uke=j1&&!M1.call({1:2},1);VT.f=uke?function(e){var t=j1(this,e);return!!t&&t.enumerable}:M1;var Kl,Q_,sd=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},dke=tn,hke=Hc,QR=Object,fke=Yr("".split),BT=dke(function(){return!QR("z").propertyIsEnumerable(0)})?function(e){return hke(e)=="String"?fke(e,""):QR(e)}:QR,Um=function(e){return e==null},pke=Um,mke=TypeError,Fm=function(e){if(pke(e))throw mke("Can't call method on "+e);return e},gke=BT,yke=Fm,cd=function(e){return gke(yke(e))},f3=Xn,vke=FT.all,ca=FT.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:f3(e)||e===vke}:function(e){return typeof e=="object"?e!==null:f3(e)},rc={},ZR=rc,eI=Yn,Eke=Xn,p3=function(e){return Eke(e)?e:void 0},ko=function(e,t){return arguments.length<2?p3(ZR[e])||p3(eI[e]):ZR[e]&&ZR[e][t]||eI[e]&&eI[e][t]},qh=typeof navigator<"u"&&String(navigator.userAgent)||"",U1=Yn,tI=qh,m3=U1.process,g3=U1.Deno,y3=m3&&m3.versions||g3&&g3.version,v3=y3&&y3.v8;v3&&(Q_=(Kl=v3.split("."))[0]>0&&Kl[0]<4?1:+(Kl[0]+Kl[1])),!Q_&&tI&&(!(Kl=tI.match(/Edge\/(\d+)/))||Kl[1]>=74)&&(Kl=tI.match(/Chrome\/(\d+)/))&&(Q_=+Kl[1]);var Ih=Q_,E3=Ih,_ke=tn,bke=Yn.String,Vm=!!Object.getOwnPropertySymbols&&!_ke(function(){var e=Symbol();return!bke(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&E3&&E3<41}),F1=Vm&&!Symbol.sham&&typeof Symbol.iterator=="symbol",wke=ko,Ske=Xn,Tke=Hi,Cke=Object,Iv=F1?function(e){return typeof e=="symbol"}:function(e){var t=wke("Symbol");return Ske(t)&&Tke(t.prototype,Cke(e))},Rke=String,Bm=function(e){try{return Rke(e)}catch{return"Object"}},Ike=Xn,xke=Bm,Ake=TypeError,Ss=function(e){if(Ike(e))return e;throw Ake(xke(e)+" is not a function")},Nke=Ss,Oke=Um,$T=function(e,t){var r=e[t];return Oke(r)?void 0:Nke(r)},_3=Jn,b3=Xn,w3=ca,kke=TypeError,V1={exports:{}},S3=Yn,Pke=Object.defineProperty,Dke=function(e,t){try{Pke(S3,e,{value:t,configurable:!0,writable:!0})}catch{S3[e]=t}return t},T3="__core-js_shared__",j2=Yn[T3]||Dke(T3,{}),C3=j2;(V1.exports=function(e,t){return C3[e]||(C3[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var $m=V1.exports,Lke=Fm,Mke=Object,zc=function(e){return Mke(Lke(e))},jke=zc,Uke=Yr({}.hasOwnProperty),si=Object.hasOwn||function(e,t){return Uke(jke(e),t)},Fke=Yr,Vke=0,Bke=Math.random(),$ke=Fke(1 .toString),U2=function(e){return"Symbol("+(e===void 0?"":e)+")_"+$ke(++Vke+Bke,36)},Hke=$m,R3=si,zke=U2,Gke=Vm,Wke=F1,np=Yn.Symbol,rI=Hke("wks"),Kke=Wke?np.for||np:np&&np.withoutSetter||zke,Gr=function(e){return R3(rI,e)||(rI[e]=Gke&&R3(np,e)?np[e]:Kke("Symbol."+e)),rI[e]},qke=Jn,I3=ca,x3=Iv,Yke=$T,Xke=function(e,t){var r,n;if(b3(r=e.toString)&&!w3(n=_3(r,e))||b3(r=e.valueOf)&&!w3(n=_3(r,e))||t!=="string")return n;throw kke("Can't convert object to primitive value")},Jke=TypeError,Qke=Gr("toPrimitive"),Zke=function(e,t){if(!I3(e)||x3(e))return e;var r,n=Yke(e,Qke);if(n){if(r=qke(n,e,t),!I3(r)||x3(r))return r;throw Jke("Can't convert object to primitive value")}return Xke(e,t)},ePe=Iv,HT=function(e){var t=Zke(e,"string");return ePe(t)?t:t+""},A3=ca,EO=Yn.document,tPe=A3(EO)&&A3(EO.createElement),F2=function(e){return tPe?EO.createElement(e):{}},rPe=F2,B1=!Ba&&!tn(function(){return Object.defineProperty(rPe("div"),"a",{get:function(){return 7}}).a!=7}),nPe=Ba,iPe=Jn,oPe=VT,aPe=sd,sPe=cd,cPe=HT,lPe=si,uPe=B1,N3=Object.getOwnPropertyDescriptor;Rv.f=nPe?N3:function(e,t){if(e=sPe(e),t=cPe(t),uPe)try{return N3(e,t)}catch{}if(lPe(e,t))return aPe(!iPe(oPe.f,e,t),e[t])};var dPe=tn,hPe=Xn,fPe=/#|\.prototype\./,xv=function(e,t){var r=mPe[pPe(e)];return r==yPe||r!=gPe&&(hPe(t)?dPe(t):!!t)},pPe=xv.normalize=function(e){return String(e).replace(fPe,".").toLowerCase()},mPe=xv.data={},gPe=xv.NATIVE="N",yPe=xv.POLYFILL="P",$1=xv,vPe=Ss,EPe=UT,_Pe=w0(w0.bind),ld=function(e,t){return vPe(e),t===void 0?e:EPe?_Pe(e,t):function(){return e.apply(t,arguments)}},Ts={},H1=Ba&&tn(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),bPe=ca,wPe=String,SPe=TypeError,yo=function(e){if(bPe(e))return e;throw SPe(wPe(e)+" is not an object")},TPe=Ba,CPe=B1,RPe=H1,DE=yo,O3=HT,IPe=TypeError,nI=Object.defineProperty,xPe=Object.getOwnPropertyDescriptor,iI="enumerable",oI="configurable",aI="writable";Ts.f=TPe?RPe?function(e,t,r){if(DE(e),t=O3(t),DE(r),typeof e=="function"&&t==="prototype"&&"value"in r&&aI in r&&!r[aI]){var n=xPe(e,t);n&&n[aI]&&(e[t]=r.value,r={configurable:oI in r?r[oI]:n[oI],enumerable:iI in r?r[iI]:n[iI],writable:!1})}return nI(e,t,r)}:nI:function(e,t,r){if(DE(e),t=O3(t),DE(r),CPe)try{return nI(e,t,r)}catch{}if("get"in r||"set"in r)throw IPe("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var APe=Ts,NPe=sd,ud=Ba?function(e,t,r){return APe.f(e,t,NPe(1,r))}:function(e,t,r){return e[t]=r,e},LE=Yn,OPe=M2,kPe=w0,PPe=Xn,DPe=Rv.f,LPe=$1,gf=rc,MPe=ld,yf=ud,k3=si,jPe=function(e){var t=function(r,n,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,n)}return new e(r,n,i)}return OPe(e,this,arguments)};return t.prototype=e.prototype,t},tr=function(e,t){var r,n,i,o,a,s,c,l,u,d=e.target,f=e.global,p=e.stat,m=e.proto,g=f?LE:p?LE[d]:(LE[d]||{}).prototype,y=f?gf:gf[d]||yf(gf,d,{})[d],v=y.prototype;for(o in t)n=!(r=LPe(f?o:d+(p?".":"#")+o,e.forced))&&g&&k3(g,o),s=y[o],n&&(c=e.dontCallGetSet?(u=DPe(g,o))&&u.value:g[o]),a=n&&c?c:t[o],n&&typeof s==typeof a||(l=e.bind&&n?MPe(a,LE):e.wrap&&n?jPe(a):m&&PPe(a)?kPe(a):a,(e.sham||a&&a.sham||s&&s.sham)&&yf(l,"sham",!0),yf(y,o,l),m&&(k3(gf,i=d+"Prototype")||yf(gf,i,{}),yf(gf[i],o,a),e.real&&v&&(r||!v[o])&&yf(v,o,a)))},UPe=Math.ceil,FPe=Math.floor,VPe=Math.trunc||function(e){var t=+e;return(t>0?FPe:UPe)(t)},BPe=VPe,V2=function(e){var t=+e;return t!=t||t===0?0:BPe(t)},$Pe=V2,HPe=Math.max,zPe=Math.min,B2=function(e,t){var r=$Pe(e);return r<0?HPe(r+t,0):zPe(r,t)},GPe=V2,WPe=Math.min,z1=function(e){return e>0?WPe(GPe(e),9007199254740991):0},KPe=z1,jl=function(e){return KPe(e.length)},qPe=cd,YPe=B2,XPe=jl,P3=function(e){return function(t,r,n){var i,o=qPe(t),a=XPe(o),s=YPe(n,a);if(e&&r!=r){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},$2={includes:P3(!0),indexOf:P3(!1)},JPe=$2.includes;tr({target:"Array",proto:!0,forced:tn(function(){return!Array(1).includes()})},{includes:function(e){return JPe(this,e,arguments.length>1?arguments[1]:void 0)}});var QPe=rc,Cs=function(e){return QPe[e+"Prototype"]},ZPe=Cs("Array").includes,eDe=ca,tDe=Hc,rDe=Gr("match"),G1=function(e){var t;return eDe(e)&&((t=e[rDe])!==void 0?!!t:tDe(e)=="RegExp")},nDe=G1,iDe=TypeError,W1={};W1[Gr("toStringTag")]="z";var H2=String(W1)==="[object z]",oDe=H2,aDe=Xn,Z_=Hc,sDe=Gr("toStringTag"),cDe=Object,lDe=Z_(function(){return arguments}())=="Arguments",Gc=oDe?Z_:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=function(i,o){try{return i[o]}catch{}}(t=cDe(e),sDe))=="string"?r:lDe?Z_(t):(n=Z_(t))=="Object"&&aDe(t.callee)?"Arguments":n},uDe=Gc,dDe=String,$a=function(e){if(uDe(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return dDe(e)},hDe=Gr("match"),fDe=tr,pDe=function(e){if(nDe(e))throw iDe("The method doesn't accept regular expressions");return e},mDe=Fm,D3=$a,gDe=function(e){var t=/./;try{"/./"[e](t)}catch{try{return t[hDe]=!1,"/./"[e](t)}catch{}}return!1},yDe=Yr("".indexOf);fDe({target:"String",proto:!0,forced:!gDe("includes")},{includes:function(e){return!!~yDe(D3(mDe(this)),D3(pDe(e)),arguments.length>1?arguments[1]:void 0)}});var vDe=Cs("String").includes,L3=Hi,EDe=ZPe,_De=vDe,sI=Array.prototype,cI=String.prototype,bDe=function(e){var t=e.includes;return e===sI||L3(sI,e)&&t===sI.includes?EDe:typeof e=="string"||e===cI||L3(cI,e)&&t===cI.includes?_De:t},me=jr(bDe),wDe=Ss,SDe=zc,TDe=BT,CDe=jl,RDe=TypeError,M3=function(e){return function(t,r,n,i){wDe(r);var o=SDe(t),a=TDe(o),s=CDe(o),c=e?s-1:0,l=e?-1:1;if(n<2)for(;;){if(c in a){i=a[c],c+=l;break}if(c+=l,e?c<0:s<=c)throw RDe("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=l)c in a&&(i=r(i,a[c],c,o));return i}},IDe={left:M3(!1),right:M3(!0)},xDe=tn,zT=function(e,t){var r=[][e];return!!r&&xDe(function(){r.call(null,t||function(){return 1},1)})},Av=typeof process<"u"&&Hc(process)=="process",ADe=IDe.left;tr({target:"Array",proto:!0,forced:!Av&&Ih>79&&Ih<83||!zT("reduce")},{reduce:function(e){var t=arguments.length;return ADe(this,e,t,t>1?arguments[1]:void 0)}});var NDe=Cs("Array").reduce,ODe=Hi,kDe=NDe,lI=Array.prototype,PDe=function(e){var t=e.reduce;return e===lI||ODe(lI,e)&&t===lI.reduce?kDe:t},K1=PDe,Js=jr(K1),q1=!0,Y1=!0;function ME(e,t,r){let n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function Yh(e,t,r){if(!e.RTCPeerConnection)return;let n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(a,s){if(a!==t)return i.apply(this,arguments);let c=l=>{let u=r(l);u&&(s.handleEvent?s.handleEvent(u):s(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(s,c),i.apply(this,[a,c])};let o=n.removeEventListener;n.removeEventListener=function(a,s){if(a!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(s))return o.apply(this,arguments);let c=this._eventMap[t].get(s);return this._eventMap[t].delete(s),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[a,c])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(a){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),a&&this.addEventListener(t,this["_on"+t]=a)},enumerable:!0,configurable:!0})}function DDe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(q1=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function LDe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Y1=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function X1(){if(typeof window=="object"){if(q1)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function z2(e,t){Y1&&console.warn(e+" is deprecated, please use "+t+" instead.")}function j3(e){return Object.prototype.toString.call(e)==="[object Object]"}function J1(e){var t;return j3(e)?Js(t=Object.keys(e)).call(t,function(r,n){let i=j3(e[n]),o=i?J1(e[n]):e[n],a=i&&!Object.keys(o).length;return o===void 0||a?r:Object.assign(r,{[n]:o})},{}):e}function _O(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach(n=>{n.endsWith("Id")?_O(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach(i=>{_O(e,e.get(i),r)})}))}function U3(e,t,r){let n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;let o=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===t.id&&o.push(a)}),o.forEach(a=>{e.forEach(s=>{s.type===n&&s.trackId===a.id&&_O(e,s,i)})}),i}var MDe=U2,F3=$m("keys"),GT=function(e){return F3[e]||(F3[e]=MDe(e))},jDe=!tn(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),UDe=si,FDe=Xn,VDe=zc,BDe=jDe,V3=GT("IE_PROTO"),bO=Object,$De=bO.prototype,G2=BDe?bO.getPrototypeOf:function(e){var t=VDe(e);if(UDe(t,V3))return t[V3];var r=t.constructor;return FDe(r)&&t instanceof r?r.prototype:t instanceof bO?$De:null},HDe=Yr,zDe=Ss,GDe=Xn,WDe=String,KDe=TypeError,qDe=function(e,t,r){try{return HDe(zDe(Object.getOwnPropertyDescriptor(e,t)[r]))}catch{}},YDe=yo,XDe=function(e){if(typeof e=="object"||GDe(e))return e;throw KDe("Can't set "+WDe(e)+" as a prototype")},JDe=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=qDe(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch{}return function(n,i){return YDe(n),XDe(i),t?e(n,i):n.__proto__=i,n}}():void 0),WT={},KT={},uI=si,QDe=cd,ZDe=$2.indexOf,e2e=KT,B3=Yr([].push),Q1=function(e,t){var r,n=QDe(e),i=0,o=[];for(r in n)!uI(e2e,r)&&uI(n,r)&&B3(o,r);for(;t.length>i;)uI(n,r=t[i++])&&(~ZDe(o,r)||B3(o,r));return o},W2=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],t2e=Q1,r2e=W2.concat("length","prototype");WT.f=Object.getOwnPropertyNames||function(e){return t2e(e,r2e)};var Nv={};Nv.f=Object.getOwnPropertySymbols;var n2e=ko,i2e=WT,o2e=Nv,a2e=yo,s2e=Yr([].concat),c2e=n2e("Reflect","ownKeys")||function(e){var t=i2e.f(a2e(e)),r=o2e.f;return r?s2e(t,r(e)):t},$3=si,l2e=c2e,u2e=Rv,d2e=Ts,K2={},h2e=Q1,f2e=W2,qT=Object.keys||function(e){return h2e(e,f2e)},p2e=Ba,m2e=H1,g2e=Ts,y2e=yo,v2e=cd,E2e=qT;K2.f=p2e&&!m2e?Object.defineProperties:function(e,t){y2e(e);for(var r,n=v2e(t),i=E2e(t),o=i.length,a=0;o>a;)g2e.f(e,r=i[a++],n[r]);return e};var jE,Z1=ko("document","documentElement"),_2e=yo,b2e=K2,H3=W2,w2e=KT,S2e=Z1,T2e=F2,wO="prototype",SO="script",eQ=GT("IE_PROTO"),dI=function(){},tQ=function(e){return"<"+SO+">"+e+"</"+SO+">"},z3=function(e){e.write(tQ("")),e.close();var t=e.parentWindow.Object;return e=null,t},eb=function(){try{jE=new ActiveXObject("htmlfile")}catch{}var e,t,r;eb=typeof document<"u"?document.domain&&jE?z3(jE):(t=T2e("iframe"),r="java"+SO+":",t.style.display="none",S2e.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(tQ("document.F=Object")),e.close(),e.F):z3(jE);for(var n=H3.length;n--;)delete eb[wO][H3[n]];return eb()};w2e[eQ]=!0;var Ov=Object.create||function(e,t){var r;return e!==null?(dI[wO]=_2e(e),r=new dI,dI[wO]=null,r[eQ]=e):r=eb(),t===void 0?r:b2e.f(r,t)},C2e=ca,R2e=ud,rQ=Error,I2e=Yr("".replace),x2e=String(rQ("zxcasd").stack),nQ=/\n\s*at [^:]*:[^\n]*/,A2e=nQ.test(x2e),N2e=sd,O2e=!tn(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",N2e(1,7)),e.stack!==7)}),k2e=ud,P2e=function(e,t){if(A2e&&typeof e=="string"&&!rQ.prepareStackTrace)for(;t--;)e=I2e(e,nQ,"");return e},D2e=O2e,G3=Error.captureStackTrace,Xh={},L2e=Xh,M2e=Gr("iterator"),j2e=Array.prototype,iQ=function(e){return e!==void 0&&(L2e.Array===e||j2e[M2e]===e)},U2e=Gc,W3=$T,F2e=Um,V2e=Xh,B2e=Gr("iterator"),YT=function(e){if(!F2e(e))return W3(e,B2e)||W3(e,"@@iterator")||V2e[U2e(e)]},$2e=Jn,H2e=Ss,z2e=yo,G2e=Bm,W2e=YT,K2e=TypeError,q2=function(e,t){var r=arguments.length<2?W2e(e):t;if(H2e(r))return z2e($2e(r,e));throw K2e(G2e(e)+" is not iterable")},q2e=Jn,K3=yo,Y2e=$T,oQ=function(e,t,r){var n,i;K3(e);try{if(!(n=Y2e(e,"return"))){if(t==="throw")throw r;return r}n=q2e(n,e)}catch(o){i=!0,n=o}if(t==="throw")throw r;if(i)throw n;return K3(n),r},X2e=ld,J2e=Jn,Q2e=yo,Z2e=Bm,eLe=iQ,tLe=jl,q3=Hi,rLe=q2,nLe=YT,Y3=oQ,iLe=TypeError,tb=function(e,t){this.stopped=e,this.result=t},X3=tb.prototype,kv=function(e,t,r){var n,i,o,a,s,c,l,u=r&&r.that,d=!(!r||!r.AS_ENTRIES),f=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),m=!(!r||!r.INTERRUPTED),g=X2e(t,u),y=function(E){return n&&Y3(n,"normal",E),new tb(!0,E)},v=function(E){return d?(Q2e(E),m?g(E[0],E[1],y):g(E[0],E[1])):m?g(E,y):g(E)};if(f)n=e.iterator;else if(p)n=e;else{if(!(i=nLe(e)))throw iLe(Z2e(e)+" is not iterable");if(eLe(i)){for(o=0,a=tLe(e);a>o;o++)if((s=v(e[o]))&&q3(X3,s))return s;return new tb(!1)}n=rLe(e,i)}for(c=f?e.next:n.next;!(l=J2e(c,n)).done;){try{s=v(l.value)}catch(E){Y3(n,"throw",E)}if(typeof s=="object"&&s&&q3(X3,s))return s}return new tb(!1)},oLe=$a,aLe=tr,sLe=Hi,cLe=G2,$w=JDe,lLe=function(e,t,r){for(var n=l2e(t),i=d2e.f,o=u2e.f,a=0;a<n.length;a++){var s=n[a];$3(e,s)||r&&$3(r,s)||i(e,s,o(t,s))}},aQ=Ov,hI=ud,fI=sd,uLe=function(e,t){C2e(t)&&"cause"in t&&R2e(e,"cause",t.cause)},dLe=function(e,t,r,n){D2e&&(G3?G3(e,t):k2e(e,"stack",P2e(r,n)))},hLe=kv,fLe=function(e,t){return e===void 0?arguments.length<2?"":t:oLe(e)},pLe=Gr("toStringTag"),Hw=Error,mLe=[].push,rm=function(e,t){var r,n=sLe(pI,this);$w?r=$w(Hw(),n?cLe(this):pI):(r=n?this:aQ(pI),hI(r,pLe,"Error")),t!==void 0&&hI(r,"message",fLe(t)),dLe(r,rm,r.stack,1),arguments.length>2&&uLe(r,arguments[2]);var i=[];return hLe(e,mLe,{that:i}),hI(r,"errors",i),r};$w?$w(rm,Hw):lLe(rm,Hw,{name:!0});var pI=rm.prototype=aQ(Hw.prototype,{constructor:fI(1,rm),message:fI(1,""),name:fI(1,"AggregateError")});aLe({global:!0,constructor:!0,arity:2},{AggregateError:rm});var zw,Cy,Gw,gLe=Xn,J3=Yn.WeakMap,yLe=gLe(J3)&&/native code/.test(String(J3)),sQ=Yn,vLe=ca,ELe=ud,mI=si,gI=j2,_Le=GT,bLe=KT,Q3="Object already initialized",TO=sQ.TypeError,wLe=sQ.WeakMap;yLe||gI.state?(As=gI.state||(gI.state=new wLe),As.get=As.get,As.has=As.has,As.set=As.set,zw=function(e,t){if(As.has(e))throw TO(Q3);return t.facade=e,As.set(e,t),t},Cy=function(e){return As.get(e)||{}},Gw=function(e){return As.has(e)}):(Ed=_Le("state"),bLe[Ed]=!0,zw=function(e,t){if(mI(e,Ed))throw TO(Q3);return t.facade=e,ELe(e,Ed,t),t},Cy=function(e){return mI(e,Ed)?e[Ed]:{}},Gw=function(e){return mI(e,Ed)});var As,Ed,lh,Z3,eF,Jh={set:zw,get:Cy,has:Gw,enforce:function(e){return Gw(e)?Cy(e):zw(e,{})},getterFor:function(e){return function(t){var r;if(!vLe(t)||(r=Cy(t)).type!==e)throw TO("Incompatible receiver, "+e+" required");return r}}},CO=Ba,SLe=si,cQ=Function.prototype,TLe=CO&&Object.getOwnPropertyDescriptor,yI=SLe(cQ,"name"),lQ={EXISTS:yI,PROPER:yI&&(function(){}).name==="something",CONFIGURABLE:yI&&(!CO||CO&&TLe(cQ,"name").configurable)},CLe=ud,dd=function(e,t,r,n){return n&&n.enumerable?e[t]=r:CLe(e,t,r),e},RLe=tn,ILe=Xn,xLe=ca,ALe=Ov,tF=G2,NLe=dd,RO=Gr("iterator"),uQ=!1;[].keys&&("next"in(eF=[].keys())?(Z3=tF(tF(eF)))!==Object.prototype&&(lh=Z3):uQ=!0);var OLe=!xLe(lh)||RLe(function(){var e={};return lh[RO].call(e)!==e});ILe((lh=OLe?{}:ALe(lh))[RO])||NLe(lh,RO,function(){return this});var dQ={IteratorPrototype:lh,BUGGY_SAFARI_ITERATORS:uQ},kLe=Gc,PLe=H2?{}.toString:function(){return"[object "+kLe(this)+"]"},DLe=H2,LLe=Ts.f,MLe=ud,jLe=si,ULe=PLe,rF=Gr("toStringTag"),hd=function(e,t,r,n){if(e){var i=r?e:e.prototype;jLe(i,rF)||LLe(i,rF,{configurable:!0,value:t}),n&&!DLe&&MLe(i,"toString",ULe)}},FLe=dQ.IteratorPrototype,VLe=Ov,BLe=sd,$Le=hd,HLe=Xh,zLe=function(){return this},Y2=function(e,t,r,n){var i=t+" Iterator";return e.prototype=VLe(FLe,{next:BLe(+!n,r)}),$Le(e,i,!1,!0),HLe[i]=zLe,e},GLe=tr,WLe=Jn,KLe=lQ,qLe=Y2,YLe=G2,XLe=hd,nF=dd,iF=Xh,JLe=dQ,QLe=KLe.PROPER,UE=JLe.BUGGY_SAFARI_ITERATORS,vI=Gr("iterator"),oF="keys",FE="values",aF="entries",ZLe=function(){return this},hQ=function(e,t,r,n,i,o,a){qLe(r,t,n);var s,c,l,u=function(v){if(v===i&&g)return g;if(!UE&&v in p)return p[v];switch(v){case oF:case FE:case aF:return function(){return new r(this,v)}}return function(){return new r(this)}},d=t+" Iterator",f=!1,p=e.prototype,m=p[vI]||p["@@iterator"]||i&&p[i],g=!UE&&m||u(i),y=t=="Array"&&p.entries||m;if(y&&(s=YLe(y.call(new e)))!==Object.prototype&&s.next&&(XLe(s,d,!0,!0),iF[d]=ZLe),QLe&&i==FE&&m&&m.name!==FE&&(f=!0,g=function(){return WLe(m,this)}),i)if(c={values:u(FE),keys:o?g:u(oF),entries:u(aF)},a)for(l in c)(UE||f||!(l in p))&&nF(p,l,c[l]);else GLe({target:t,proto:!0,forced:UE||f},c);return a&&p[vI]!==g&&nF(p,vI,g,{name:i}),iF[t]=g,c},X2=function(e,t){return{value:e,done:t}},eMe=cd,sF=Xh,fQ=Jh;Ts.f;var tMe=hQ,cF=X2,pQ="Array Iterator",rMe=fQ.set,nMe=fQ.getterFor(pQ);tMe(Array,"Array",function(e,t){rMe(this,{type:pQ,target:eMe(e),index:0,kind:t})},function(){var e=nMe(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,cF(void 0,!0)):cF(r=="keys"?n:r=="values"?t[n]:[n,t[n]],!1)},"values"),sF.Arguments=sF.Array;var iMe=Ts,XT=function(e,t,r){return iMe.f(e,t,r)},oMe=ko,aMe=XT,sMe=Ba,lF=Gr("species"),cMe=Hi,lMe=TypeError,J2=function(e,t){if(cMe(t,e))return e;throw lMe("Incorrect invocation")},uMe=Xn,IO=j2,dMe=Yr(Function.toString);uMe(IO.inspectSource)||(IO.inspectSource=function(e){return dMe(e)});var mQ=IO.inspectSource,hMe=Yr,fMe=tn,gQ=Xn,pMe=Gc,mMe=mQ,yQ=function(){},gMe=[],vQ=ko("Reflect","construct"),Q2=/^\s*(?:class|function)\b/,yMe=hMe(Q2.exec),vMe=!Q2.exec(yQ),bg=function(e){if(!gQ(e))return!1;try{return vQ(yQ,gMe,e),!0}catch{return!1}},EQ=function(e){if(!gQ(e))return!1;switch(pMe(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return vMe||!!yMe(Q2,mMe(e))}catch{return!0}};EQ.sham=!0;var S0,vf,uF,EI,JT=!vQ||fMe(function(){var e;return bg(bg.call)||!bg(Object)||!bg(function(){e=!0})||e})?EQ:bg,EMe=JT,_Me=Bm,bMe=TypeError,dF=yo,wMe=function(e){if(EMe(e))return e;throw bMe(_Me(e)+" is not a constructor")},SMe=Um,TMe=Gr("species"),Z2=function(e,t){var r,n=dF(e).constructor;return n===void 0||SMe(r=dF(n)[TMe])?t:wMe(r)},eL=Yr([].slice),CMe=TypeError,QT=function(e,t){if(e<t)throw CMe("Not enough arguments");return e},_Q=/(?:ipad|iphone|ipod).*applewebkit/i.test(qh),Ta=Yn,RMe=M2,IMe=ld,hF=Xn,xMe=si,bQ=tn,fF=Z1,AMe=eL,pF=F2,NMe=QT,OMe=_Q,kMe=Av,xO=Ta.setImmediate,AO=Ta.clearImmediate,PMe=Ta.process,_I=Ta.Dispatch,DMe=Ta.Function,mF=Ta.MessageChannel,LMe=Ta.String,bI=0,Ry={},gF="onreadystatechange";bQ(function(){S0=Ta.location});var tL=function(e){if(xMe(Ry,e)){var t=Ry[e];delete Ry[e],t()}},wI=function(e){return function(){tL(e)}},yF=function(e){tL(e.data)},vF=function(e){Ta.postMessage(LMe(e),S0.protocol+"//"+S0.host)};xO&&AO||(xO=function(e){NMe(arguments.length,1);var t=hF(e)?e:DMe(e),r=AMe(arguments,1);return Ry[++bI]=function(){RMe(t,void 0,r)},vf(bI),bI},AO=function(e){delete Ry[e]},kMe?vf=function(e){PMe.nextTick(wI(e))}:_I&&_I.now?vf=function(e){_I.now(wI(e))}:mF&&!OMe?(EI=(uF=new mF).port2,uF.port1.onmessage=yF,vf=IMe(EI.postMessage,EI)):Ta.addEventListener&&hF(Ta.postMessage)&&!Ta.importScripts&&S0&&S0.protocol!=="file:"&&!bQ(vF)?(vf=vF,Ta.addEventListener("message",yF,!1)):vf=gF in pF("script")?function(e){fF.appendChild(pF("script"))[gF]=function(){fF.removeChild(this),tL(e)}}:function(e){setTimeout(wI(e),0)});var wQ={set:xO,clear:AO},SQ=function(){this.head=null,this.tail=null};SQ.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return(this.head=e.next)===null&&(this.tail=null),e.item}};var Ef,SI,TI,CI,EF,TQ=SQ,MMe=/ipad|iphone|ipod/i.test(qh)&&typeof Pebble<"u",jMe=/web0s(?!.*chrome)/i.test(qh),xh=Yn,_F=ld,UMe=Rv.f,RI=wQ.set,FMe=TQ,VMe=_Q,BMe=MMe,$Me=jMe,II=Av,bF=xh.MutationObserver||xh.WebKitMutationObserver,wF=xh.document,SF=xh.process,VE=xh.Promise,TF=UMe(xh,"queueMicrotask"),NO=TF&&TF.value;NO||(wg=new FMe,Sg=function(){var e,t;for(II&&(e=SF.domain)&&e.exit();t=wg.get();)try{t()}catch(r){throw wg.head&&Ef(),r}e&&e.enter()},VMe||II||$Me||!bF||!wF?!BMe&&VE&&VE.resolve?((CI=VE.resolve(void 0)).constructor=VE,EF=_F(CI.then,CI),Ef=function(){EF(Sg)}):II?Ef=function(){SF.nextTick(Sg)}:(RI=_F(RI,xh),Ef=function(){RI(Sg)}):(SI=!0,TI=wF.createTextNode(""),new bF(Sg).observe(TI,{characterData:!0}),Ef=function(){TI.data=SI=!SI}),NO=function(e){wg.head||Ef(),wg.add(e)});var wg,Sg,HMe=NO,Hm=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}},Ah=Yn.Promise,CQ=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",zMe=!CQ&&!Av&&typeof window=="object"&&typeof document=="object",GMe=Yn,Iy=Ah,WMe=Xn,KMe=$1,qMe=mQ,YMe=Gr,XMe=zMe,JMe=CQ,xI=Ih,CF=Iy&&Iy.prototype,QMe=YMe("species"),RQ=!1,IQ=WMe(GMe.PromiseRejectionEvent),ZMe=KMe("Promise",function(){var e=qMe(Iy),t=e!==String(Iy);if(!t&&xI===66||!CF.catch||!CF.finally)return!0;if(!xI||xI<51||!/native code/.test(e)){var r=new Iy(function(i){i(1)}),n=function(i){i(function(){},function(){})};if((r.constructor={})[QMe]=n,!(RQ=r.then(function(){})instanceof n))return!0}return!t&&(XMe||JMe)&&!IQ}),Pv={CONSTRUCTOR:ZMe,REJECTION_EVENT:IQ,SUBCLASSING:RQ},Wc={},RF=Ss,eje=TypeError,tje=function(e){var t,r;this.promise=new e(function(n,i){if(t!==void 0||r!==void 0)throw eje("Bad Promise constructor");t=n,r=i}),this.resolve=RF(t),this.reject=RF(r)};Wc.f=function(e){return new tje(e)};var AI,IF,rje=tr,Ww=Av,Ju=Yn,Dv=Jn,nje=dd,ije=hd,oje=function(e){var t=oMe(e);sMe&&t&&!t[lF]&&aMe(t,lF,{configurable:!0,get:function(){return this}})},aje=Ss,OO=Xn,sje=ca,cje=J2,lje=Z2,xQ=wQ.set,rL=HMe,uje=function(e,t){try{arguments.length==1?console.error(e):console.error(e,t)}catch{}},dje=Hm,hje=TQ,AQ=Jh,kO=Ah,NQ=Pv,OQ=Wc,rb="Promise",xF=NQ.CONSTRUCTOR,fje=NQ.REJECTION_EVENT,NI=AQ.getterFor(rb),pje=AQ.set,mje=kO&&kO.prototype,Tg=kO,OI=mje,kQ=Ju.TypeError,PO=Ju.document,nL=Ju.process,DO=OQ.f,gje=DO,yje=!!(PO&&PO.createEvent&&Ju.dispatchEvent),PQ="unhandledrejection",DQ=function(e){var t;return!(!sje(e)||!OO(t=e.then))&&t},LQ=function(e,t){var r,n,i,o=t.value,a=t.state==1,s=a?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{s?(a||(t.rejection===2&&Eje(t),t.rejection=1),s===!0?r=o:(u&&u.enter(),r=s(o),u&&(u.exit(),i=!0)),r===e.promise?l(kQ("Promise-chain cycle")):(n=DQ(r))?Dv(n,r,c,l):c(r)):l(o)}catch(d){u&&!i&&u.exit(),l(d)}},MQ=function(e,t){e.notified||(e.notified=!0,rL(function(){for(var r,n=e.reactions;r=n.get();)LQ(r,e);e.notified=!1,t&&!e.rejection&&vje(e)}))},jQ=function(e,t,r){var n,i;yje?((n=PO.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),Ju.dispatchEvent(n)):n={promise:t,reason:r},!fje&&(i=Ju["on"+e])?i(n):e===PQ&&uje("Unhandled promise rejection",r)},vje=function(e){Dv(xQ,Ju,function(){var t,r=e.facade,n=e.value;if(AF(e)&&(t=dje(function(){Ww?nL.emit("unhandledRejection",n,r):jQ(PQ,r,n)}),e.rejection=Ww||AF(e)?2:1,t.error))throw t.value})},AF=function(e){return e.rejection!==1&&!e.parent},Eje=function(e){Dv(xQ,Ju,function(){var t=e.facade;Ww?nL.emit("rejectionHandled",t):jQ("rejectionhandled",t,e.value)})},ip=function(e,t,r){return function(n){e(t,n,r)}},Ip=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,MQ(e,!0))},LO=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw kQ("Promise can't be resolved itself");var n=DQ(t);n?rL(function(){var i={done:!1};try{Dv(n,t,ip(LO,i,e),ip(Ip,i,e))}catch(o){Ip(i,o,e)}}):(e.value=t,e.state=1,MQ(e,!1))}catch(i){Ip({done:!1},i,e)}}};xF&&(OI=(Tg=function(e){cje(this,OI),aje(e),Dv(AI,this);var t=NI(this);try{e(ip(LO,t),ip(Ip,t))}catch(r){Ip(t,r)}}).prototype,(AI=function(e){pje(this,{type:rb,done:!1,notified:!1,parent:!1,reactions:new hje,rejection:!1,state:0,value:void 0})}).prototype=nje(OI,"then",function(e,t){var r=NI(this),n=DO(lje(this,Tg));return r.parent=!0,n.ok=!OO(e)||e,n.fail=OO(t)&&t,n.domain=Ww?nL.domain:void 0,r.state==0?r.reactions.add(n):rL(function(){LQ(n,r)}),n.promise}),IF=function(){var e=new AI,t=NI(e);this.promise=e,this.resolve=ip(LO,t),this.reject=ip(Ip,t)},OQ.f=DO=function(e){return e===Tg||e===void 0?new IF(e):gje(e)}),rje({global:!0,constructor:!0,wrap:!0,forced:xF},{Promise:Tg}),ije(Tg,rb,!1,!0),oje(rb);var UQ=Gr("iterator"),FQ=!1;try{NF=0,kI={next:function(){return{done:!!NF++}},return:function(){FQ=!0}},kI[UQ]=function(){return this},Array.from(kI,function(){throw 2})}catch{}var NF,kI,_je=Ah,bje=function(e,t){if(!FQ)return!1;var r=!1;try{var n={};n[UQ]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch{}return r},ZT=Pv.CONSTRUCTOR||!bje(function(e){_je.all(e).then(void 0,function(){})}),wje=Jn,Sje=Ss,Tje=Wc,Cje=Hm,Rje=kv;tr({target:"Promise",stat:!0,forced:ZT},{all:function(e){var t=this,r=Tje.f(t),n=r.resolve,i=r.reject,o=Cje(function(){var a=Sje(t.resolve),s=[],c=0,l=1;Rje(e,function(u){var d=c++,f=!1;l++,wje(a,t,u).then(function(p){f||(f=!0,s[d]=p,--l||n(s))},i)}),--l||n(s)});return o.error&&i(o.value),r.promise}});var Ije=tr,xje=Pv.CONSTRUCTOR;Ah&&Ah.prototype,Ije({target:"Promise",proto:!0,forced:xje,real:!0},{catch:function(e){return this.then(void 0,e)}});var Aje=Jn,Nje=Ss,Oje=Wc,kje=Hm,Pje=kv;tr({target:"Promise",stat:!0,forced:ZT},{race:function(e){var t=this,r=Oje.f(t),n=r.reject,i=kje(function(){var o=Nje(t.resolve);Pje(e,function(a){Aje(o,t,a).then(r.resolve,n)})});return i.error&&n(i.value),r.promise}});var Dje=Jn,Lje=Wc;tr({target:"Promise",stat:!0,forced:Pv.CONSTRUCTOR},{reject:function(e){var t=Lje.f(this);return Dje(t.reject,void 0,e),t.promise}});var Mje=yo,jje=ca,Uje=Wc,VQ=function(e,t){if(Mje(e),jje(t)&&t.constructor===e)return t;var r=Uje.f(e);return(0,r.resolve)(t),r.promise},Fje=tr,Vje=Ah,Bje=Pv.CONSTRUCTOR,$je=VQ,Hje=ko("Promise"),zje=!Bje;Fje({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return $je(zje&&this===Hje?Vje:this,e)}});var Gje=Jn,Wje=Ss,Kje=Wc,qje=Hm,Yje=kv;tr({target:"Promise",stat:!0,forced:ZT},{allSettled:function(e){var t=this,r=Kje.f(t),n=r.resolve,i=r.reject,o=qje(function(){var a=Wje(t.resolve),s=[],c=0,l=1;Yje(e,function(u){var d=c++,f=!1;l++,Gje(a,t,u).then(function(p){f||(f=!0,s[d]={status:"fulfilled",value:p},--l||n(s))},function(p){f||(f=!0,s[d]={status:"rejected",reason:p},--l||n(s))})}),--l||n(s)});return o.error&&i(o.value),r.promise}});var Xje=Jn,Jje=Ss,Qje=ko,Zje=Wc,eUe=Hm,tUe=kv,OF="No one promise resolved";tr({target:"Promise",stat:!0,forced:ZT},{any:function(e){var t=this,r=Qje("AggregateError"),n=Zje.f(t),i=n.resolve,o=n.reject,a=eUe(function(){var s=Jje(t.resolve),c=[],l=0,u=1,d=!1;tUe(e,function(f){var p=l++,m=!1;u++,Xje(s,t,f).then(function(g){m||d||(d=!0,i(g))},function(g){m||d||(m=!0,c[p]=g,--u||o(new r(c,OF)))})}),--u||o(new r(c,OF))});return a.error&&o(a.value),n.promise}});var rUe=tr,MO=Ah,nUe=tn,iUe=ko,oUe=Xn,aUe=Z2,kF=VQ,sUe=MO&&MO.prototype;rUe({target:"Promise",proto:!0,real:!0,forced:!!MO&&nUe(function(){sUe.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=aUe(this,iUe("Promise")),r=oUe(e);return this.then(r?function(n){return kF(t,e()).then(function(){return n})}:e,r?function(n){return kF(t,e()).then(function(){throw n})}:e)}});var iL=Yr,cUe=V2,lUe=$a,uUe=Fm,dUe=iL("".charAt),PF=iL("".charCodeAt),hUe=iL("".slice),DF=function(e){return function(t,r){var n,i,o=lUe(uUe(t)),a=cUe(r),s=o.length;return a<0||a>=s?e?"":void 0:(n=PF(o,a))<55296||n>56319||a+1===s||(i=PF(o,a+1))<56320||i>57343?e?dUe(o,a):n:e?hUe(o,a,a+2):i-56320+(n-55296<<10)+65536}},oL={codeAt:DF(!1),charAt:DF(!0)},fUe=oL.charAt,pUe=$a,BQ=Jh,mUe=hQ,LF=X2,$Q="String Iterator",gUe=BQ.set,yUe=BQ.getterFor($Q);mUe(String,"String",function(e){gUe(this,{type:$Q,string:pUe(e),index:0})},function(){var e,t=yUe(this),r=t.string,n=t.index;return n>=r.length?LF(void 0,!0):(e=fUe(r,n),t.index+=e.length,LF(e,!1))});var vUe=rc.Promise,EUe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},_Ue=Yn,bUe=Gc,wUe=ud,MF=Xh,jF=Gr("toStringTag");for($E in EUe)PI=_Ue[$E],BE=PI&&PI.prototype,BE&&bUe(BE)!==jF&&wUe(BE,jF,$E),MF[$E]=MF.Array;var PI,BE,$E,HQ=vUe,he=jr(HQ),UF=X1;function zQ(e,t){let r=e&&e.navigator;if(!r.mediaDevices)return;let n=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;let s={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;let l=typeof a[c]=="object"?a[c]:{ideal:a[c]};l.exact!==void 0&&typeof l.exact=="number"&&(l.min=l.max=l.exact);let u=function(d,f){return d?d+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(l.ideal!==void 0){s.optional=s.optional||[];let d={};typeof l.ideal=="number"?(d[u("min",c)]=l.ideal,s.optional.push(d),d={},d[u("max",c)]=l.ideal,s.optional.push(d)):(d[u("",c)]=l.ideal,s.optional.push(d))}l.exact!==void 0&&typeof l.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[u("",c)]=l.exact):["min","max"].forEach(d=>{l[d]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[u(d,c)]=l[d])})}),a.advanced&&(s.optional=(s.optional||[]).concat(a.advanced)),s},i=function(a,s){if(t.version>=61)return s(a);if((a=JSON.parse(JSON.stringify(a)))&&typeof a.audio=="object"){let c=function(l,u,d){u in l&&!(d in l)&&(l[d]=l[u],delete l[u])};c((a=JSON.parse(JSON.stringify(a))).audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=n(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});let l=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||l)){let u;if(delete a.video.facingMode,c.exact==="environment"||c.ideal==="environment"?u=["back","rear"]:c.exact!=="user"&&c.ideal!=="user"||(u=["front"]),u)return r.mediaDevices.enumerateDevices().then(d=>{let f=(d=d.filter(p=>p.kind==="videoinput")).find(p=>u.some(m=>{var g;return me(g=p.label.toLowerCase()).call(g,m)}));return!f&&d.length&&me(u).call(u,"back")&&(f=d[d.length-1]),f&&(a.video.deviceId=c.exact?{exact:f.deviceId}:{ideal:f.deviceId}),a.video=n(a.video),UF("chrome: "+JSON.stringify(a)),s(a)})}a.video=n(a.video)}return UF("chrome: "+JSON.stringify(a)),s(a)},o=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=(function(a,s,c){i(a,l=>{r.webkitGetUserMedia(l,s,u=>{c&&c(o(u))})})}).bind(r),r.mediaDevices.getUserMedia){let a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(s){return i(s,c=>a(c).then(l=>{if(c.audio&&!l.getAudioTracks().length||c.video&&!l.getVideoTracks().length)throw l.getTracks().forEach(u=>{u.stop()}),new DOMException("","NotFoundError");return l},l=>he.reject(o(l))))}}}function GQ(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function WQ(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===n.track.id):{track:n.track};let o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===n.id):{track:n};let o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Yh(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function KQ(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){let t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};let i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,s){let c=i.apply(this,arguments);return c||(c=t(this,a),this._senders.push(c)),c};let o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);let s=this._senders.indexOf(a);s!==-1&&this._senders.splice(s,1)}}let r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(o=>{this._senders.push(t(this,o))})};let n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(o=>{let a=this._senders.find(s=>s.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){let t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){let r=t.apply(this,[]);return r.forEach(n=>n._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function qQ(e){if(!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[r,n,i]=arguments;if(arguments.length>0&&typeof r=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof r!="function"))return t.apply(this,[]);let o=function(s){let c={};return s.result().forEach(l=>{let u={id:l.id,timestamp:l.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[l.type]||l.type};l.names().forEach(d=>{u[d]=l.stat(d)}),c[u.id]=u}),c},a=function(s){return new Map(Object.keys(s).map(c=>[c,s[c]]))};if(arguments.length>=2){let s=function(c){n(a(o(c)))};return t.apply(this,[s,r])}return new he((s,c)=>{t.apply(this,[function(l){s(a(o(l)))},c])}).then(n,i)}}function YQ(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){let r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){let i=r.apply(this,[]);return i.forEach(o=>o._pc=this),i});let n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){let i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){let i=this;return this._pc.getStats().then(o=>U3(o,i.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){let r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){let n=r.apply(this,[]);return n.forEach(i=>i._pc=this),n}),Yh(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){let n=this;return this._pc.getStats().then(i=>U3(i,n.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;let t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){let r=arguments[0],n,i,o;return this.getSenders().forEach(a=>{a.track===r&&(n?o=!0:n=a)}),this.getReceivers().forEach(a=>(a.track===r&&(i?o=!0:i=a),a.track===r)),o||n&&i?he.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():i?i.getStats():he.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function XQ(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};let s=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(s)===-1&&this._shimmedLocalStreams[a.id].push(s):this._shimmedLocalStreams[a.id]=[a,s],s};let r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(l=>l.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});let a=this.getSenders();r.apply(this,arguments);let s=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(s)};let n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],n.apply(this,arguments)};let i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{let s=this._shimmedLocalStreams[a].indexOf(o);s!==-1&&this._shimmedLocalStreams[a].splice(s,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function JQ(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return XQ(e);let r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){let c=r.apply(this);return this._reverseStreams=this._reverseStreams||{},c.map(l=>this._reverseStreams[l.id])};let n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(c){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.getTracks().forEach(l=>{if(this.getSenders().find(u=>u.track===l))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[c.id]){let l=new e.MediaStream(c.getTracks());this._streams[c.id]=l,this._reverseStreams[l.id]=c,c=l}n.apply(this,[c])};let i=e.RTCPeerConnection.prototype.removeStream;function o(c,l){let u=l.sdp;return Object.keys(c._reverseStreams||[]).forEach(d=>{let f=c._reverseStreams[d],p=c._streams[f.id];u=u.replace(new RegExp(p.id,"g"),f.id)}),new RTCSessionDescription({type:l.type,sdp:u})}e.RTCPeerConnection.prototype.removeStream=function(c){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[c.id]||c]),delete this._reverseStreams[this._streams[c.id]?this._streams[c.id].id:c.id],delete this._streams[c.id]},e.RTCPeerConnection.prototype.addTrack=function(c,l){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");let u=[].slice.call(arguments,1);if(u.length!==1||!u[0].getTracks().find(f=>f===c))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(f=>f.track===c))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};let d=this._streams[l.id];if(d)d.addTrack(c),he.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{let f=new e.MediaStream([c]);this._streams[l.id]=f,this._reverseStreams[f.id]=l,this.addStream(f)}return this.getSenders().find(f=>f.track===c)},["createOffer","createAnswer"].forEach(function(c){let l=e.RTCPeerConnection.prototype[c],u={[c](){let d=arguments;return arguments.length&&typeof arguments[0]=="function"?l.apply(this,[f=>{let p=o(this,f);d[0].apply(null,[p])},f=>{d[1]&&d[1].apply(null,f)},arguments[2]]):l.apply(this,arguments).then(f=>o(this,f))}};e.RTCPeerConnection.prototype[c]=u[c]});let a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(c,l){let u=l.sdp;return Object.keys(c._reverseStreams||[]).forEach(d=>{let f=c._reverseStreams[d],p=c._streams[f.id];u=u.replace(new RegExp(f.id,"g"),p.id)}),new RTCSessionDescription({type:l.type,sdp:u})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};let s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){let c=s.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!c._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(c._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let l;this._streams=this._streams||{},Object.keys(this._streams).forEach(u=>{this._streams[u].getTracks().find(d=>c.track===d)&&(l=this._streams[u])}),l&&(l.getTracks().length===1?this.removeStream(this._reverseStreams[l.id]):l.removeTrack(c.track),this.dispatchEvent(new Event("negotiationneeded")))}}function jO(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){let n=e.RTCPeerConnection.prototype[r],i={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=i[r]})}function QQ(e,t){Yh(e,"negotiationneeded",r=>{let n=r.target;if(!(t.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")||n.signalingState==="stable")return r})}var FF=Object.freeze({__proto__:null,fixNegotiationNeeded:QQ,shimAddTrackRemoveTrack:JQ,shimAddTrackRemoveTrackWithNative:XQ,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(typeof t=="function"?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(n=>{let i=r.video&&r.video.width,o=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:a||3}},i&&(r.video.mandatory.maxWidth=i),o&&(r.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(r)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:KQ,shimGetStats:qQ,shimGetUserMedia:zQ,shimMediaStream:GQ,shimOnTrack:WQ,shimPeerConnection:jO,shimSenderReceiverGetStats:YQ});function ZQ(e,t){let r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(i,o,a){z2("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(i).then(o,a)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){let i=function(a,s,c){s in a&&!(c in a)&&(a[c]=a[s],delete a[s])},o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a.audio,"autoGainControl","mozAutoGainControl"),i(a.audio,"noiseSuppression","mozNoiseSuppression")),o(a)},n&&n.prototype.getSettings){let a=n.prototype.getSettings;n.prototype.getSettings=function(){let s=a.apply(this,arguments);return i(s,"mozAutoGainControl","autoGainControl"),i(s,"mozNoiseSuppression","noiseSuppression"),s}}if(n&&n.prototype.applyConstraints){let a=n.prototype.applyConstraints;n.prototype.applyConstraints=function(s){return this.kind==="audio"&&typeof s=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s,"autoGainControl","mozAutoGainControl"),i(s,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[s])}}}}function eZ(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function UO(e,t){if(typeof e!="object"||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){let o=e.RTCPeerConnection.prototype[i],a={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=a[i]});let r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[i,o,a]=arguments;return n.apply(this,[i||null]).then(s=>{if(t.version<53&&!o)try{s.forEach(c=>{c.type=r[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;s.forEach((l,u)=>{s.set(u,Object.assign({},l,{type:r[l.type]||l.type}))})}return s}).then(o,a)}}function tZ(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;let t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){let n=t.apply(this,[]);return n.forEach(i=>i._pc=this),n});let r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){let n=r.apply(this,arguments);return n._pc=this,n}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):he.resolve(new Map)}}function rZ(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;let t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){let r=t.apply(this,[]);return r.forEach(n=>n._pc=this),r}),Yh(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function nZ(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(t){z2("removeStream","removeTrack"),this.getSenders().forEach(r=>{var n;r.track&&me(n=t.getTracks()).call(n,r.track)&&this.removeTrack(r)})})}function iZ(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function oZ(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];let n=r.length>0;n&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});let i=t.apply(this,arguments);if(n){let{sender:o}=i,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return i})}function aZ(e){if(typeof e!="object"||!e.RTCRtpSender)return;let t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){let r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function sZ(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?he.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function cZ(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?he.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var VF=Object.freeze({__proto__:null,shimAddTransceiver:oZ,shimCreateAnswer:cZ,shimCreateOffer:sZ,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){let n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,he.reject(n)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})},shimGetParameters:aZ,shimGetUserMedia:ZQ,shimOnTrack:eZ,shimPeerConnection:UO,shimRTCDataChannel:iZ,shimReceiverGetStats:rZ,shimRemoveStream:nZ,shimSenderGetStats:tZ});function lZ(e){if(typeof e=="object"&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){var n;this._localStreams||(this._localStreams=[]),me(n=this._localStreams).call(n,r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i&&i.forEach(a=>{var s;this._localStreams?me(s=this._localStreams).call(s,a)||this._localStreams.push(a):this._localStreams=[a]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);let r=this._localStreams.indexOf(t);if(r===-1)return;this._localStreams.splice(r,1);let n=t.getTracks();this.getSenders().forEach(i=>{me(n).call(n,i.track)&&this.removeTrack(i)})})}}function uZ(e){if(typeof e=="object"&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(i=>{var o;if(this._remoteStreams||(this._remoteStreams=[]),me(o=this._remoteStreams).call(o,i))return;this._remoteStreams.push(i);let a=new Event("addstream");a.stream=i,this.dispatchEvent(a)})})}});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){let r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(i=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(i)>=0)return;r._remoteStreams.push(i);let o=new Event("addstream");o.stream=i,r.dispatchEvent(o)})}),t.apply(r,arguments)}}}function dZ(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(c,l){let u=arguments.length>=2?arguments[2]:arguments[0],d=r.apply(this,[u]);return l?(d.then(c,l),he.resolve()):d},t.createAnswer=function(c,l){let u=arguments.length>=2?arguments[2]:arguments[0],d=n.apply(this,[u]);return l?(d.then(c,l),he.resolve()):d};let s=function(c,l,u){let d=i.apply(this,[c]);return u?(d.then(l,u),he.resolve()):d};t.setLocalDescription=s,s=function(c,l,u){let d=o.apply(this,[c]);return u?(d.then(l,u),he.resolve()):d},t.setRemoteDescription=s,s=function(c,l,u){let d=a.apply(this,[c]);return u?(d.then(l,u),he.resolve()):d},t.addIceCandidate=s}function hZ(e){let t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){let r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=i=>n(fZ(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,n,i){t.mediaDevices.getUserMedia(r).then(n,i)}).bind(t))}function fZ(e){return e&&e.video!==void 0?Object.assign({},e,{video:J1(e.video)}):e}function pZ(e){if(!e.RTCPeerConnection)return;let t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,n){if(r&&r.iceServers){let i=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(z2("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,i.push(a)):i.push(r.iceServers[o])}r.iceServers=i}return new t(r,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function mZ(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function gZ(e){let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){r.offerToReceiveAudio!==void 0&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);let n=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):r.offerToReceiveAudio!==!0||n||this.addTransceiver("audio",{direction:"recvonly"}),r.offerToReceiveVideo!==void 0&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);let i=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveVideo!==!0||i||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function yZ(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var BF=Object.freeze({__proto__:null,shimAudioContext:yZ,shimCallbacksAPI:dZ,shimConstraints:fZ,shimCreateOfferLegacy:gZ,shimGetUserMedia:hZ,shimLocalStreamsAPI:lZ,shimRTCIceServerUrls:pZ,shimRemoteStreamsAPI:uZ,shimTrackEventTransceiver:mZ}),vZ=`	
\v\f\r \u2028\u2029\uFEFF`,SUe=Fm,TUe=$a,FO=vZ,$F=Yr("".replace),CUe=RegExp("^["+FO+"]+"),RUe=RegExp("(^|[^"+FO+"])["+FO+"]+$"),DI=function(e){return function(t){var r=TUe(SUe(t));return 1&e&&(r=$F(r,CUe,"")),2&e&&(r=$F(r,RUe,"$1")),r}},IUe={start:DI(1),end:DI(2),trim:DI(3)},xUe=lQ.PROPER,AUe=tn,HF=vZ,NUe=IUe.trim;tr({target:"String",proto:!0,forced:function(e){return AUe(function(){return!!HF[e]()||""[e]()!==""||xUe&&HF[e].name!==e})}("trim")},{trim:function(){return NUe(this)}});var OUe=Cs("String").trim,kUe=Hi,PUe=OUe,LI=String.prototype,DUe=function(e){var t=e.trim;return typeof e=="string"||e===LI||kUe(LI,e)&&t===LI.trim?PUe:t},Ci=jr(DUe),EZ={exports:{}};(function(e){let t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},t.splitSections=function(r){return r.split(`
m=`).map((n,i)=>(i>0?"m="+n:n).trim()+`\r
`)},t.getDescription=function(r){let n=t.splitSections(r);return n&&n[0]},t.getMediaSections=function(r){let n=t.splitSections(r);return n.shift(),n},t.matchPrefix=function(r,n){return t.splitLines(r).filter(i=>i.indexOf(n)===0)},t.parseCandidate=function(r){let n;n=r.indexOf("a=candidate:")===0?r.substring(12).split(" "):r.substring(10).split(" ");let i={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let o=8;o<n.length;o+=2)switch(n[o]){case"raddr":i.relatedAddress=n[o+1];break;case"rport":i.relatedPort=parseInt(n[o+1],10);break;case"tcptype":i.tcpType=n[o+1];break;case"ufrag":i.ufrag=n[o+1],i.usernameFragment=n[o+1];break;default:i[n[o]]===void 0&&(i[n[o]]=n[o+1])}return i},t.writeCandidate=function(r){let n=[];n.push(r.foundation);let i=r.component;i==="rtp"?n.push(1):i==="rtcp"?n.push(2):n.push(i),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);let o=r.type;return n.push("typ"),n.push(o),o!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},t.parseIceOptions=function(r){return r.substring(14).split(" ")},t.parseRtpMap=function(r){let n=r.substring(9).split(" "),i={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),i.name=n[0],i.clockRate=parseInt(n[1],10),i.channels=n.length===3?parseInt(n[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);let i=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(r){let n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},t.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},t.parseFmtp=function(r){let n={},i,o=r.substring(r.indexOf(" ")+1).split(";");for(let a=0;a<o.length;a++)i=o[a].trim().split("="),n[i[0].trim()]=i[1];return n},t.writeFmtp=function(r){let n="",i=r.payloadType;if(r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){let o=[];Object.keys(r.parameters).forEach(a=>{r.parameters[a]!==void 0?o.push(a+"="+r.parameters[a]):o.push(a)}),n+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return n},t.parseRtcpFb=function(r){let n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},t.writeRtcpFb=function(r){let n="",i=r.payloadType;return r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(o=>{n+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),n},t.parseSsrcMedia=function(r){let n=r.indexOf(" "),i={ssrc:parseInt(r.substring(7,n),10)},o=r.indexOf(":",n);return o>-1?(i.attribute=r.substring(n+1,o),i.value=r.substring(o+1)):i.attribute=r.substring(n+1),i},t.parseSsrcGroup=function(r){let n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(i=>parseInt(i,10))}},t.getMid=function(r){let n=t.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(r){let n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},t.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:t.matchPrefix(r+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(r,n){let i="a=setup:"+n+`\r
`;return r.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(r){let n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},t.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?t.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;let n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},t.getCryptoParameters=function(r,n){return t.matchPrefix(r+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(r,n){let i=t.matchPrefix(r+n,"a=ice-ufrag:")[0],o=t.matchPrefix(r+n,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},t.parseRtpParameters=function(r){let n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(r)[0].split(" ");n.profile=i[2];for(let a=3;a<i.length;a++){let s=i[a],c=t.matchPrefix(r,"a=rtpmap:"+s+" ")[0];if(c){let l=t.parseRtpMap(c),u=t.matchPrefix(r,"a=fmtp:"+s+" ");switch(l.parameters=u.length?t.parseFmtp(u[0]):{},l.rtcpFeedback=t.matchPrefix(r,"a=rtcp-fb:"+s+" ").map(t.parseRtcpFb),n.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(l.name.toUpperCase())}}}t.matchPrefix(r,"a=extmap:").forEach(a=>{n.headerExtensions.push(t.parseExtmap(a))});let o=t.matchPrefix(r,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach(a=>{o.forEach(s=>{a.rtcpFeedback.find(c=>c.type===s.type&&c.parameter===s.parameter)||a.rtcpFeedback.push(s)})}),n},t.writeRtpDescription=function(r,n){let i="";i+="m="+r+" ",i+=n.codecs.length>0?"9":"0",i+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=n.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(a=>{i+=t.writeRtpMap(a),i+=t.writeFmtp(a),i+=t.writeRtcpFb(a)});let o=0;return n.codecs.forEach(a=>{a.maxptime>o&&(o=a.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(a=>{i+=t.writeExtmap(a)}),i},t.parseRtpEncodingParameters=function(r){let n=[],i=t.parseRtpParameters(r),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=t.matchPrefix(r,"a=ssrc:").map(f=>t.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=s.length>0&&s[0].ssrc,l,u=t.matchPrefix(r,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let p={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(p.rtx={ssrc:l}),n.push(p),o&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},n.push(p))}}),n.length===0&&c&&n.push({ssrc:c});let d=t.matchPrefix(r,"b=");return d.length&&(d=d[0].indexOf("b=TIAS:")===0?parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?1e3*parseInt(d[0].substring(5),10)*.95-16e3:void 0,n.forEach(f=>{f.maxBitrate=d})),n},t.parseRtcpParameters=function(r){let n={},i=t.matchPrefix(r,"a=ssrc:").map(s=>t.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);let o=t.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=o.length===0;let a=t.matchPrefix(r,"a=rtcp-mux");return n.mux=a.length>0,n},t.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},t.parseMsid=function(r){let n,i=t.matchPrefix(r,"a=msid:");if(i.length===1)return n=i[0].substring(7).split(" "),{stream:n[0],track:n[1]};let o=t.matchPrefix(r,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");return o.length>0?(n=o[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(r){let n=t.parseMLine(r),i=t.matchPrefix(r,"a=max-message-size:"),o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);let a=t.matchPrefix(r,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:n.fmt,maxMessageSize:o};let s=t.matchPrefix(r,"a=sctpmap:");if(s.length>0){let c=s[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:o}}},t.writeSctpDescription=function(r,n){let i=[];return i=r.protocol!=="DTLS/SCTP"?["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&i.push("a=max-message-size:"+n.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(r,n,i){let o,a=n!==void 0?n:2;return o=r||t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(r,n){let i=t.splitLines(r);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(r){return t.splitLines(r)[0].split(" ")[0].substring(2)},t.isRejected=function(r){return r.split(" ",2)[1]==="0"},t.parseMLine=function(r){let n=t.splitLines(r)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(r){let n=t.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;let n=t.splitLines(r);for(let i=0;i<n.length;i++)if(n[i].length<2||n[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(EZ);var _Z=EZ.exports,xp=jr(_Z),LUe=tke({__proto__:null,default:xp},[_Z]);function nb(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;let t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&((r=JSON.parse(JSON.stringify(r))).candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){let n=new t(r),i=xp.parseCandidate(r.candidate),o=Object.assign(n,i);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Yh(e,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new e.RTCIceCandidate(r.candidate),writable:"false"}),r))}function VO(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Yh(e,"icecandidate",t=>{if(t.candidate){let r=xp.parseCandidate(t.candidate.candidate);r.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return t})}function ib(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});let r=function(s){if(!s||!s.sdp)return!1;let c=xp.splitSections(s.sdp);return c.shift(),c.some(l=>{let u=xp.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},n=function(s){let c=s.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;let l=parseInt(c[1],10);return l!=l?-1:l},i=function(s){let c=65536;return t.browser==="firefox"&&(c=t.version<57?s===-1?16384:2147483637:t.version<60?t.version===57?65535:65536:2147483637),c},o=function(s,c){let l=65536;t.browser==="firefox"&&t.version===57&&(l=65535);let u=xp.matchPrefix(s.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substr(19),10):t.browser==="firefox"&&c!==-1&&(l=2147483637),l},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){let{sdpSemantics:s}=this.getConfiguration();s==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){let s=n(arguments[0]),c=i(s),l=o(arguments[0],s),u;u=c===0&&l===0?Number.POSITIVE_INFINITY:c===0||l===0?Math.max(c,l):Math.min(c,l);let d={};Object.defineProperty(d,"maxMessageSize",{get:()=>u}),this._sctp=d}return a.apply(this,arguments)}}function ob(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(n,i){let o=n.send;n.send=function(){let a=arguments[0],s=a.length||a.size||a.byteLength;if(n.readyState==="open"&&i.sctp&&s>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(n,arguments)}}let r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){let n=r.apply(this,arguments);return t(n,this),n},Yh(e,"datachannel",n=>(t(n.channel,n.target),n))}function BO(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;let t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{let n=t[r];t[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{let o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;let a=new Event("connectionstatechange",i);o.dispatchEvent(a)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function $O(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;let r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){let i=n.sdp.split(`
`).filter(o=>Ci(o).call(o)!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&n instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:n.type,sdp:i}):n.sdp=i}return r.apply(this,arguments)}}function ab(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;let r=e.RTCPeerConnection.prototype.addIceCandidate;r&&r.length!==0&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?he.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),he.resolve())})}function sb(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;let r=e.RTCPeerConnection.prototype.setLocalDescription;r&&r.length!==0&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let n=arguments[0]||{};if(typeof n!="object"||n.type&&n.sdp)return r.apply(this,arguments);if(n={type:n.type,sdp:n.sdp},!n.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":n.type="offer";break;default:n.type="answer"}return n.sdp||n.type!=="offer"&&n.type!=="answer"?r.apply(this,[n]):(n.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(i=>r.apply(this,[i]))})}var MUe=Object.freeze({__proto__:null,removeExtmapAllowMixed:$O,shimAddIceCandidateNullOrEmpty:ab,shimConnectionState:BO,shimMaxMessageSize:ib,shimParameterlessSetLocalDescription:sb,shimRTCIceCandidate:nb,shimRTCIceCandidateRelayProtocol:VO,shimSendThrowTypeError:ob});(function(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},r=X1,n=function(o){let a={browser:null,version:null};if(o===void 0||!o.navigator)return a.browser="Not a browser.",a;let{navigator:s}=o;if(s.mozGetUserMedia)a.browser="firefox",a.version=ME(s.userAgent,/Firefox\/(\d+)\./,1);else if(s.webkitGetUserMedia||o.isSecureContext===!1&&o.webkitRTCPeerConnection)a.browser="chrome",a.version=ME(s.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!o.RTCPeerConnection||!s.userAgent.match(/AppleWebKit\/(\d+)\./))return a.browser="Not a supported browser.",a;a.browser="safari",a.version=ME(s.userAgent,/AppleWebKit\/(\d+)\./,1),a.supportsUnifiedPlan=o.RTCRtpTransceiver&&"currentDirection"in o.RTCRtpTransceiver.prototype}return a}(e),i={browserDetails:n,commonShim:MUe,extractVersion:ME,disableLog:DDe,disableWarnings:LDe,sdp:LUe};switch(n.browser){case"chrome":if(!FF||!jO||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),i;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),i;r("adapter.js shimming chrome."),i.browserShim=FF,ab(e,n),sb(e),zQ(e,n),GQ(e),jO(e,n),WQ(e),JQ(e,n),KQ(e),qQ(e),YQ(e),QQ(e,n),nb(e),VO(e),BO(e),ib(e,n),ob(e),$O(e,n);break;case"firefox":if(!VF||!UO||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),i;r("adapter.js shimming firefox."),i.browserShim=VF,ab(e,n),sb(e),ZQ(e,n),UO(e,n),eZ(e),nZ(e),tZ(e),rZ(e),iZ(e),oZ(e),aZ(e),sZ(e),cZ(e),nb(e),BO(e),ib(e,n),ob(e);break;case"safari":if(!BF||!t.shimSafari)return r("Safari shim is not included in this adapter release."),i;r("adapter.js shimming safari."),i.browserShim=BF,ab(e,n),sb(e),pZ(e),gZ(e),dZ(e),lZ(e),uZ(e),mZ(e),hZ(e),yZ(e),nb(e),VO(e),ib(e,n),ob(e),$O(e,n);break;default:r("Unsupported browser!")}})({window:typeof window>"u"?void 0:window});var jUe=Cs("Array").keys,UUe=Gc,FUe=si,VUe=Hi,BUe=jUe,MI=Array.prototype,$Ue={DOMTokenList:!0,NodeList:!0},HUe=function(e){var t=e.keys;return e===MI||VUe(MI,e)&&t===MI.keys||FUe($Ue,UUe(e))?BUe:t},Vo=jr(HUe),zF=Bm,zUe=TypeError,GUe=HT,WUe=Ts,KUe=sd,eC=function(e,t,r){var n=GUe(t);n in e?WUe.f(e,n,KUe(0,r)):e[n]=r},GF=B2,qUe=jl,YUe=eC,XUe=Array,JUe=Math.max,aL=function(e,t,r){for(var n=qUe(e),i=GF(t,n),o=GF(r===void 0?n:r,n),a=XUe(JUe(o-i,0)),s=0;i<o;i++,s++)YUe(a,s,e[i]);return a.length=s,a},WF=aL,QUe=Math.floor,HO=function(e,t){var r=e.length,n=QUe(r/2);return r<8?ZUe(e,t):e4e(e,HO(WF(e,0,n),t),HO(WF(e,n),t),t)},ZUe=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},e4e=function(e,t,r,n){for(var i=t.length,o=r.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?n(t[a],r[s])<=0?t[a++]:r[s++]:a<i?t[a++]:r[s++];return e},bZ=HO,KF=qh.match(/firefox\/(\d+)/i),t4e=!!KF&&+KF[1],r4e=/MSIE|Trident/.test(qh),qF=qh.match(/AppleWebKit\/(\d+)\./),n4e=!!qF&&+qF[1],i4e=tr,wZ=Yr,o4e=Ss,a4e=zc,YF=jl,s4e=function(e,t){if(!delete e[t])throw zUe("Cannot delete property "+zF(t)+" of "+zF(e))},XF=$a,sL=tn,c4e=bZ,l4e=zT,JF=t4e,u4e=r4e,QF=Ih,ZF=n4e,wu=[],eV=wZ(wu.sort),d4e=wZ(wu.push),h4e=sL(function(){wu.sort(void 0)}),f4e=sL(function(){wu.sort(null)}),p4e=l4e("sort"),tV=!sL(function(){if(QF)return QF<70;if(!(JF&&JF>3)){if(u4e)return!0;if(ZF)return ZF<603;var e,t,r,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)wu.push({k:t+n,v:r})}for(wu.sort(function(o,a){return a.v-o.v}),n=0;n<wu.length;n++)t=wu[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return i!=="DGBEFHACIJK"}});i4e({target:"Array",proto:!0,forced:h4e||!f4e||!p4e||!tV},{sort:function(e){e!==void 0&&o4e(e);var t=a4e(this);if(tV)return e===void 0?eV(t):eV(t,e);var r,n,i=[],o=YF(t);for(n=0;n<o;n++)n in t&&d4e(i,t[n]);for(c4e(i,function(a){return function(s,c){return c===void 0?-1:s===void 0?1:a!==void 0?+a(s,c)||0:XF(s)>XF(c)?1:-1}}(e)),r=YF(i),n=0;n<r;)t[n]=i[n++];for(;n<o;)s4e(t,n++);return t}});var jI,UI,m4e=Cs("Array").sort,g4e=Hi,y4e=m4e,FI=Array.prototype,v4e=function(e){var t=e.sort;return e===FI||g4e(FI,e)&&t===FI.sort?y4e:t},Lv=jr(v4e),zO={exports:{}};jI=zO,UI=zO.exports,function(e,t){var r="function",n="undefined",i="object",o="string",a="major",s="model",c="name",l="type",u="vendor",d="version",f="architecture",p="console",m="mobile",g="tablet",y="smarttv",v="wearable",E="embedded",b="Amazon",S="Apple",A="ASUS",N="BlackBerry",D="Browser",M="Chrome",H="Firefox",V="Google",G="Huawei",Y="LG",Z="Microsoft",$="Motorola",F="Opera",K="Samsung",k="Sharp",P="Sony",B="Xiaomi",R="Zebra",_="Facebook",x="Chromium OS",T="Mac OS",W=function(et){for(var Et={},Ie=0;Ie<et.length;Ie++)Et[et[Ie].toUpperCase()]=et[Ie];return Et},U=function(et,Et){return typeof et===o&&X(Et).indexOf(X(et))!==-1},X=function(et){return et.toLowerCase()},ae=function(et,Et){if(typeof et===o)return et=et.replace(/^\s\s*/,""),typeof Et===n?et:et.substring(0,350)},de=function(et,Et){for(var Ie,rt,Be,Qe,Ke,te,Ae=0;Ae<Et.length&&!Ke;){var Ue=Et[Ae],Ge=Et[Ae+1];for(Ie=rt=0;Ie<Ue.length&&!Ke&&Ue[Ie];)if(Ke=Ue[Ie++].exec(et))for(Be=0;Be<Ge.length;Be++)te=Ke[++rt],typeof(Qe=Ge[Be])===i&&Qe.length>0?Qe.length===2?typeof Qe[1]==r?this[Qe[0]]=Qe[1].call(this,te):this[Qe[0]]=Qe[1]:Qe.length===3?typeof Qe[1]!==r||Qe[1].exec&&Qe[1].test?this[Qe[0]]=te?te.replace(Qe[1],Qe[2]):t:this[Qe[0]]=te?Qe[1].call(this,te,Qe[2]):t:Qe.length===4&&(this[Qe[0]]=te?Qe[3].call(this,te.replace(Qe[1],Qe[2])):t):this[Qe]=te||t;Ae+=2}},fe=function(et,Et){for(var Ie in Et)if(typeof Et[Ie]===i&&Et[Ie].length>0){for(var rt=0;rt<Et[Ie].length;rt++)if(U(Et[Ie][rt],et))return Ie==="?"?t:Ie}else if(U(Et[Ie],et))return Ie==="?"?t:Ie;return et},ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ve={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,d],[/opios[\/ ]+([\w\.]+)/i],[d,[c,F+" Mini"]],[/\bopr\/([\w\.]+)/i],[d,[c,F]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,d],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[c,"UC"+D]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[d,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[d,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[d,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+D],d],[/\bfocus\/([\w\.]+)/i],[d,[c,H+" Focus"]],[/\bopt\/([\w\.]+)/i],[d,[c,F+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[c,F+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[c,"MIUI "+D]],[/fxios\/([-\w\.]+)/i],[d,[c,H]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 "+D]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 "+D],d],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[c,d],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,_],d],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[c,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[c,M+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,M+" WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[c,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,d],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[d,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[d,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[d,fe,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[c,H+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[c,d],[/(cobalt)\/([\w\.]+)/i],[c,[d,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,X]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",X]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,X]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[s,[u,K],[l,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[s,[u,K],[l,m]],[/\((ip(?:hone|od)[\w ]*);/i],[s,[u,S],[l,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[s,[u,S],[l,g]],[/(macintosh);/i],[s,[u,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[s,[u,k],[l,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[s,[u,G],[l,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[s,[u,G],[l,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[s,/_/g," "],[u,B],[l,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[s,/_/g," "],[u,B],[l,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[s,[u,"OPPO"],[l,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[s,[u,"Vivo"],[l,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[s,[u,"Realme"],[l,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[s,[u,$],[l,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[s,[u,$],[l,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[s,[u,Y],[l,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[s,[u,Y],[l,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[s,[u,"Lenovo"],[l,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[s,/_/g," "],[u,"Nokia"],[l,m]],[/(pixel c)\b/i],[s,[u,V],[l,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[s,[u,V],[l,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[u,P],[l,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[s,"Xperia Tablet"],[u,P],[l,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[s,[u,"OnePlus"],[l,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[s,[u,b],[l,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[s,/(.+)/g,"Fire Phone $1"],[u,b],[l,m]],[/(playbook);[-\w\),; ]+(rim)/i],[s,u,[l,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[s,[u,N],[l,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[s,[u,A],[l,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[s,[u,A],[l,m]],[/(nexus 9)/i],[s,[u,"HTC"],[l,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[s,/_/g," "],[l,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[s,[u,"Acer"],[l,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[s,[u,"Meizu"],[l,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,s,[l,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,s,[l,g]],[/(surface duo)/i],[s,[u,Z],[l,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[s,[u,"Fairphone"],[l,m]],[/(u304aa)/i],[s,[u,"AT&T"],[l,m]],[/\bsie-(\w*)/i],[s,[u,"Siemens"],[l,m]],[/\b(rct\w+) b/i],[s,[u,"RCA"],[l,g]],[/\b(venue[\d ]{2,7}) b/i],[s,[u,"Dell"],[l,g]],[/\b(q(?:mv|ta)\w+) b/i],[s,[u,"Verizon"],[l,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[s,[u,"Barnes & Noble"],[l,g]],[/\b(tm\d{3}\w+) b/i],[s,[u,"NuVision"],[l,g]],[/\b(k88) b/i],[s,[u,"ZTE"],[l,g]],[/\b(nx\d{3}j) b/i],[s,[u,"ZTE"],[l,m]],[/\b(gen\d{3}) b.+49h/i],[s,[u,"Swiss"],[l,m]],[/\b(zur\d{3}) b/i],[s,[u,"Swiss"],[l,g]],[/\b((zeki)?tb.*\b) b/i],[s,[u,"Zeki"],[l,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],s,[l,g]],[/\b(ns-?\w{0,9}) b/i],[s,[u,"Insignia"],[l,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[s,[u,"NextBook"],[l,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],s,[l,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],s,[l,m]],[/\b(ph-1) /i],[s,[u,"Essential"],[l,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[s,[u,"Envizen"],[l,g]],[/\b(trio[-\w\. ]+) b/i],[s,[u,"MachSpeed"],[l,g]],[/\btu_(1491) b/i],[s,[u,"Rotor"],[l,g]],[/(shield[\w ]+) b/i],[s,[u,"Nvidia"],[l,g]],[/(sprint) (\w+)/i],[u,s,[l,m]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[u,Z],[l,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[s,[u,R],[l,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[s,[u,R],[l,m]],[/smart-tv.+(samsung)/i],[u,[l,y]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[u,K],[l,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,Y],[l,y]],[/(apple) ?tv/i],[u,[s,S+" TV"],[l,y]],[/crkey/i],[[s,M+"cast"],[u,V],[l,y]],[/droid.+aft(\w)( bui|\))/i],[s,[u,b],[l,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[s,[u,k],[l,y]],[/(bravia[\w ]+)( bui|\))/i],[s,[u,P],[l,y]],[/(mitv-\w{5}) bui/i],[s,[u,B],[l,y]],[/Hbbtv.*(technisat) (.*);/i],[u,s,[l,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,ae],[s,ae],[l,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,s,[l,p]],[/droid.+; (shield) bui/i],[s,[u,"Nvidia"],[l,p]],[/(playstation [345portablevi]+)/i],[s,[u,P],[l,p]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[s,[u,Z],[l,p]],[/((pebble))app/i],[u,s,[l,v]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[s,[u,S],[l,v]],[/droid.+; (glass) \d/i],[s,[u,V],[l,v]],[/droid.+; (wt63?0{2,3})\)/i],[s,[u,R],[l,v]],[/(quest( 2| pro)?)/i],[s,[u,_],[l,v]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[l,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[s,[l,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[s,[l,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,m]],[/(android[-\w\. ]{0,9});.+buil/i],[s,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[c,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,d],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[c,[d,fe,ke]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[c,"Windows"],[d,fe,ke]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,T],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[d,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,d],[/\(bb(10);/i],[d,[c,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[c,H+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[d,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[d,[c,M+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,x],d],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,d],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[c,d]]},Me=function(et,Et){if(typeof et===i&&(Et=et,et=t),!(this instanceof Me))return new Me(et,Et).getResult();var Ie=typeof e!==n&&e.navigator?e.navigator:t,rt=et||(Ie&&Ie.userAgent?Ie.userAgent:""),Be=Ie&&Ie.userAgentData?Ie.userAgentData:t,Qe=Et?function(Ke,te){var Ae={};for(var Ue in Ke)te[Ue]&&te[Ue].length%2==0?Ae[Ue]=te[Ue].concat(Ke[Ue]):Ae[Ue]=Ke[Ue];return Ae}(Ve,Et):Ve;return this.getBrowser=function(){var Ke={};return Ke[c]=t,Ke[d]=t,de.call(Ke,rt,Qe.browser),Ke[a]=function(te){return typeof te===o?te.replace(/[^\d\.]/g,"").split(".")[0]:t}(Ke[d]),Ie&&Ie.brave&&typeof Ie.brave.isBrave==r&&(Ke[c]="Brave"),Ke},this.getCPU=function(){var Ke={};return Ke[f]=t,de.call(Ke,rt,Qe.cpu),Ke},this.getDevice=function(){var Ke={};return Ke[u]=t,Ke[s]=t,Ke[l]=t,de.call(Ke,rt,Qe.device),!Ke[l]&&Be&&Be.mobile&&(Ke[l]=m),Ke[s]=="Macintosh"&&Ie&&typeof Ie.standalone!==n&&Ie.maxTouchPoints&&Ie.maxTouchPoints>2&&(Ke[s]="iPad",Ke[l]=g),Ke},this.getEngine=function(){var Ke={};return Ke[c]=t,Ke[d]=t,de.call(Ke,rt,Qe.engine),Ke},this.getOS=function(){var Ke={};return Ke[c]=t,Ke[d]=t,de.call(Ke,rt,Qe.os),!Ke[c]&&Be&&Be.platform!="Unknown"&&(Ke[c]=Be.platform.replace(/chrome os/i,x).replace(/macos/i,T)),Ke},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return rt},this.setUA=function(Ke){return rt=typeof Ke===o&&Ke.length>350?ae(Ke,350):Ke,this},this.setUA(rt),this};Me.VERSION="0.7.34",Me.BROWSER=W([c,d,a]),Me.CPU=W([f]),Me.DEVICE=W([s,u,l,p,m,y,g,v,E]),Me.ENGINE=Me.OS=W([c,d]),jI.exports&&(UI=jI.exports=Me),UI.UAParser=Me;var ot=typeof e!==n&&(e.jQuery||e.Zepto);if(ot&&!ot.ua){var At=new Me;ot.ua=At.getResult(),ot.ua.get=function(){return At.getUA()},ot.ua.set=function(et){At.setUA(et);var Et=At.getResult();for(var Ie in Et)ot.ua[Ie]=Et[Ie]}}}(typeof window=="object"?window:Rp);var E4e=jr(zO.exports),_4e=Gc,b4e=si,w4e=Um,S4e=Xh,T4e=Gr("iterator"),C4e=Object,R4e=function(e){if(w4e(e))return!1;var t=C4e(e);return t[T4e]!==void 0||"@@iterator"in t||b4e(S4e,_4e(t))},I4e=jr(R4e),VI=Yn;tr({global:!0,forced:VI.globalThis!==VI},{globalThis:VI});var rV=jr(Yn);function SZ(e,t){return function(){return e.apply(t,arguments)}}var{toString:x4e}=Object.prototype,{getPrototypeOf:cL}=Object,Kw=(BI=Object.create(null),e=>{let t=x4e.call(e);return BI[t]||(BI[t]=t.slice(8,-1).toLowerCase())}),BI,Kc=e=>(e=e.toLowerCase(),t=>Kw(t)===e),tC=e=>t=>typeof t===e,{isArray:Df}=Array,Wg=tC("undefined"),nV=Kc("ArrayBuffer"),A4e=tC("string"),Ka=tC("function"),iV=tC("number"),HE=e=>e!==null&&typeof e=="object",zE=e=>{if(Kw(e)!=="object")return!1;let t=cL(e);return!(t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.toStringTag in e||I4e(e))},N4e=Kc("Date"),O4e=Kc("File"),k4e=Kc("Blob"),P4e=Kc("FileList"),D4e=Kc("URLSearchParams");function Kg(e,t){let r,n,{allOwnKeys:i=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e!=null)if(typeof e!="object"&&(e=[e]),Df(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{let o=i?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length,s;for(r=0;r<a;r++)s=o[r],t.call(null,e[s],s,e)}}function oV(e,t){t=t.toLowerCase();let r=Object.keys(e),n,i=r.length;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}var TZ=rV!==void 0?rV:typeof self<"u"?self:typeof window<"u"?window:global,aV=e=>!Wg(e)&&e!==TZ,L4e=($I=typeof Uint8Array<"u"&&cL(Uint8Array),e=>$I&&e instanceof $I),$I,M4e=Kc("HTMLFormElement"),sV=(e=>{let{hasOwnProperty:t}=e;return(r,n)=>t.call(r,n)})(Object.prototype),j4e=Kc("RegExp"),cV=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};Kg(r,(i,o)=>{let a;(a=t(i,o,e))!==!1&&(n[o]=a||i)}),Object.defineProperties(e,n)},HI="abcdefghijklmnopqrstuvwxyz",lV="0123456789",uV={DIGIT:lV,ALPHA:HI,ALPHA_DIGIT:HI+HI.toUpperCase()+lV},U4e=Kc("AsyncFunction"),ve={isArray:Df,isArrayBuffer:nV,isBuffer:function(e){return e!==null&&!Wg(e)&&e.constructor!==null&&!Wg(e.constructor)&&Ka(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ka(e.append)&&((t=Kw(e))==="formdata"||t==="object"&&Ka(e.toString)&&e.toString()==="[object FormData]"))},isArrayBufferView:function(e){let t;return t=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&nV(e.buffer),t},isString:A4e,isNumber:iV,isBoolean:e=>e===!0||e===!1,isObject:HE,isPlainObject:zE,isUndefined:Wg,isDate:N4e,isFile:O4e,isBlob:k4e,isRegExp:j4e,isFunction:Ka,isStream:e=>HE(e)&&Ka(e.pipe),isURLSearchParams:D4e,isTypedArray:L4e,isFileList:P4e,forEach:Kg,merge:function e(){let{caseless:t}=aV(this)&&this||{},r={},n=(i,o)=>{let a=t&&oV(r,o)||o;zE(r[a])&&zE(i)?r[a]=e(r[a],i):zE(i)?r[a]=e({},i):Df(i)?r[a]=i.slice():r[a]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Kg(arguments[i],n);return r},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Kg(t,(i,o)=>{r&&Ka(i)?e[o]=SZ(i,r):e[o]=i},{allOwnKeys:n}),e},trim:e=>Ci(e)?Ci(e).call(e):e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,o,a,s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],n&&!n(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=r!==!1&&cL(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Kw,kindOfTest:Kc,endsWith:(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return n!==-1&&n===r},toArray:e=>{if(!e)return null;if(Df(e))return e;let t=e.length;if(!iV(t))return null;let r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{let r=(e&&e[Symbol.iterator]).call(e),n;for(;(n=r.next())&&!n.done;){let i=n.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let r,n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},isHTMLForm:M4e,hasOwnProperty:sV,hasOwnProp:sV,reduceDescriptors:cV,freezeMethods:e=>{cV(e,(t,r)=>{if(Ka(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=e[r];Ka(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{let r={},n=i=>{i.forEach(o=>{r[o]=!0})};return Df(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,n){return r.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:oV,global:TZ,isContextDefined:aV,ALPHABET:uV,generateString:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uV.ALPHA_DIGIT,r="",{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r},isSpecCompliantForm:function(e){return!!(e&&Ka(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])},toJSONObject:e=>{let t=new Array(10),r=(n,i)=>{if(HE(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;let o=Df(n)?[]:{};return Kg(n,(a,s)=>{let c=r(a,i+1);!Wg(c)&&(o[s]=c)}),t[i]=void 0,o}}return n};return r(e,0)},isAsyncFn:U4e,isThenable:e=>e&&(HE(e)||Ka(e))&&Ka(e.then)&&Ka(e.catch)};function pr(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}ve.inherits(pr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var dV=pr.prototype,hV={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{hV[e]={value:e}}),Object.defineProperties(pr,hV),Object.defineProperty(dV,"isAxiosError",{value:!0}),pr.from=(e,t,r,n,i,o)=>{let a=Object.create(dV);return ve.toFlatObject(e,a,function(s){return s!==Error.prototype},s=>s!=="isAxiosError"),pr.call(a,e.message,t,r,n,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};function zI(e){return ve.isPlainObject(e)||ve.isArray(e)}function CZ(e){return ve.endsWith(e,"[]")?e.slice(0,-2):e}function fV(e,t,r){return e?e.concat(t).map(function(n,i){return n=CZ(n),!r&&i?"["+n+"]":n}).join(r?".":""):t}var F4e=ve.toFlatObject(ve,{},null,function(e){return/^is[A-Z]/.test(e)});function qw(e,t,r){if(!ve.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;let n=(r=ve.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,p){return!ve.isUndefined(p[f])})).metaTokens,i=r.visitor||l,o=r.dots,a=r.indexes,s=(r.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(t);if(!ve.isFunction(i))throw new TypeError("visitor must be a function");function c(f){if(f===null)return"";if(ve.isDate(f))return f.toISOString();if(!s&&ve.isBlob(f))throw new pr("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(f)||ve.isTypedArray(f)?s&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function l(f,p,m){let g=f;if(f&&!m&&typeof f=="object"){if(ve.endsWith(p,"{}"))p=n?p:p.slice(0,-2),f=JSON.stringify(f);else if(ve.isArray(f)&&function(y){return ve.isArray(y)&&!y.some(zI)}(f)||(ve.isFileList(f)||ve.endsWith(p,"[]"))&&(g=ve.toArray(f)))return p=CZ(p),g.forEach(function(y,v){!ve.isUndefined(y)&&y!==null&&t.append(a===!0?fV([p],v,o):a===null?p:p+"[]",c(y))}),!1}return!!zI(f)||(t.append(fV(m,p,o),c(f)),!1)}let u=[],d=Object.assign(F4e,{defaultVisitor:l,convertValue:c,isVisitable:zI});if(!ve.isObject(e))throw new TypeError("data must be an object");return function f(p,m){if(!ve.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));u.push(p),ve.forEach(p,function(g,y){(!(ve.isUndefined(g)||g===null)&&i.call(t,g,ve.isString(y)?Ci(y).call(y):y,m,d))===!0&&f(g,m?m.concat(y):[y])}),u.pop()}}(e),t}function pV(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function lL(e,t){this._pairs=[],e&&qw(e,this,t)}var mV=lL.prototype;function V4e(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function RZ(e,t,r){if(!t)return e;let n=r&&r.encode||V4e,i=r&&r.serialize,o;if(o=i?i(t,r):ve.isURLSearchParams(t)?t.toString():new lL(t,r).toString(n),o){let a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}mV.append=function(e,t){this._pairs.push([e,t])},mV.toString=function(e){let t=e?function(r){return e.call(this,r,pV)}:pV;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};var gV=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ve.forEach(this.handlers,function(t){t!==null&&e(t)})}},IZ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xZ={exports:{}},B4e=tr,$4e=Ba,yV=Ts.f;B4e({target:"Object",stat:!0,forced:Object.defineProperty!==yV,sham:!$4e},{defineProperty:yV});var AZ=rc.Object,H4e=xZ.exports=function(e,t,r){return AZ.defineProperty(e,t,r)};AZ.defineProperty.sham&&(H4e.sham=!0);var NZ=jr(xZ.exports),z4e=Hc,Mv=Array.isArray||function(e){return z4e(e)=="Array"},G4e=TypeError,vV=Mv,W4e=JT,K4e=ca,q4e=Gr("species"),EV=Array,Y4e=function(e){var t;return vV(e)&&(t=e.constructor,(W4e(t)&&(t===EV||vV(t.prototype))||K4e(t)&&(t=t[q4e])===null)&&(t=void 0)),t===void 0?EV:t},OZ=function(e,t){return new(Y4e(e))(t===0?0:t)},X4e=tn,J4e=Ih,Q4e=Gr("species"),kZ=function(e){return J4e>=51||!X4e(function(){var t=[];return(t.constructor={})[Q4e]=function(){return{foo:1}},t[e](Boolean).foo!==1})},Z4e=tr,e5e=tn,t5e=Mv,r5e=ca,n5e=zc,i5e=jl,_V=function(e){if(e>9007199254740991)throw G4e("Maximum allowed index exceeded");return e},bV=eC,o5e=OZ,a5e=kZ,s5e=Ih,PZ=Gr("isConcatSpreadable"),c5e=s5e>=51||!e5e(function(){var e=[];return e[PZ]=!1,e.concat()[0]!==e}),l5e=function(e){if(!r5e(e))return!1;var t=e[PZ];return t!==void 0?!!t:t5e(e)};Z4e({target:"Array",proto:!0,arity:1,forced:!c5e||!a5e("concat")},{concat:function(e){var t,r,n,i,o,a=n5e(this),s=o5e(a,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(l5e(o=t===-1?a:arguments[t]))for(i=i5e(o),_V(c+i),r=0;r<i;r++,c++)r in o&&bV(s,c,o[r]);else _V(c+1),bV(s,c++,o);return s.length=c,s}});var DZ={},u5e=Hc,d5e=cd,wV=WT.f,h5e=aL,SV=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];DZ.f=function(e){return SV&&u5e(e)=="Window"?function(t){try{return wV(t)}catch{return h5e(SV)}}(e):wV(d5e(e))};var zm={},f5e=Gr;zm.f=f5e;var TV=rc,p5e=si,m5e=zm,g5e=Ts.f,Hn=function(e){var t=TV.Symbol||(TV.Symbol={});p5e(t,e)||g5e(t,e,{value:m5e.f(e)})},y5e=Jn,v5e=ko,E5e=Gr,_5e=dd,LZ=function(){var e=v5e("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=E5e("toPrimitive");t&&!t[n]&&_5e(t,n,function(i){return y5e(r,this)},{arity:1})},b5e=ld,w5e=BT,S5e=zc,T5e=jl,C5e=OZ,CV=Yr([].push),ql=function(e){var t=e==1,r=e==2,n=e==3,i=e==4,o=e==6,a=e==7,s=e==5||o;return function(c,l,u,d){for(var f,p,m=S5e(c),g=w5e(m),y=b5e(l,u),v=T5e(g),E=0,b=d||C5e,S=t?b(c,v):r||a?b(c,0):void 0;v>E;E++)if((s||E in g)&&(p=y(f=g[E],E,m),e))if(t)S[E]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return E;case 2:CV(S,f)}else switch(e){case 4:return!1;case 7:CV(S,f)}return o?-1:n||i?i:S}},MZ={forEach:ql(0),map:ql(1),filter:ql(2),some:ql(3),every:ql(4),find:ql(5),findIndex:ql(6),filterReject:ql(7)},GE=tr,uL=Yn,dL=Jn,R5e=Yr,Ap=Ba,_f=Vm,I5e=tn,ji=si,x5e=Hi,GO=yo,rC=cd,hL=HT,A5e=$a,WO=sd,T0=Ov,jZ=qT,N5e=WT,UZ=DZ,O5e=Nv,FZ=Rv,VZ=Ts,k5e=K2,BZ=VT,RV=dd,P5e=XT,fL=$m,$Z=KT,IV=U2,D5e=Gr,L5e=zm,M5e=Hn,j5e=LZ,U5e=hd,HZ=Jh,nC=MZ.forEach,Ho=GT("hidden"),Yw="Symbol",C0="prototype",F5e=HZ.set,xV=HZ.getterFor(Yw),Gs=Object[C0],op=uL.Symbol,cb=op&&op[C0],V5e=uL.TypeError,GI=uL.QObject,zZ=FZ.f,jd=VZ.f,GZ=UZ.f,B5e=BZ.f,WZ=R5e([].push),Pl=fL("symbols"),jv=fL("op-symbols"),$5e=fL("wks"),WI=!GI||!GI[C0]||!GI[C0].findChild,KO=Ap&&I5e(function(){return T0(jd({},"a",{get:function(){return jd(this,"a",{value:7}).a}})).a!=7})?function(e,t,r){var n=zZ(Gs,t);n&&delete Gs[t],jd(e,t,r),n&&e!==Gs&&jd(Gs,t,n)}:jd,KI=function(e,t){var r=Pl[e]=T0(cb);return F5e(r,{type:Yw,tag:e,description:t}),Ap||(r.description=t),r},Xw=function(e,t,r){e===Gs&&Xw(jv,t,r),GO(e);var n=hL(t);return GO(r),ji(Pl,n)?(r.enumerable?(ji(e,Ho)&&e[Ho][n]&&(e[Ho][n]=!1),r=T0(r,{enumerable:WO(0,!1)})):(ji(e,Ho)||jd(e,Ho,WO(1,{})),e[Ho][n]=!0),KO(e,n,r)):jd(e,n,r)},qI=function(e,t){GO(e);var r=rC(t),n=jZ(r).concat(qZ(r));return nC(n,function(i){Ap&&!dL(KZ,r,i)||Xw(e,i,r[i])}),e},KZ=function(e){var t=hL(e),r=dL(B5e,this,t);return!(this===Gs&&ji(Pl,t)&&!ji(jv,t))&&(!(r||!ji(this,t)||!ji(Pl,t)||ji(this,Ho)&&this[Ho][t])||r)},AV=function(e,t){var r=rC(e),n=hL(t);if(r!==Gs||!ji(Pl,n)||ji(jv,n)){var i=zZ(r,n);return!i||!ji(Pl,n)||ji(r,Ho)&&r[Ho][n]||(i.enumerable=!0),i}},NV=function(e){var t=GZ(rC(e)),r=[];return nC(t,function(n){ji(Pl,n)||ji($Z,n)||WZ(r,n)}),r},qZ=function(e){var t=e===Gs,r=GZ(t?jv:rC(e)),n=[];return nC(r,function(i){!ji(Pl,i)||t&&!ji(Gs,i)||WZ(n,Pl[i])}),n};_f||(RV(cb=(op=function(){if(x5e(cb,this))throw V5e("Symbol is not a constructor");var e=arguments.length&&arguments[0]!==void 0?A5e(arguments[0]):void 0,t=IV(e),r=function(n){this===Gs&&dL(r,jv,n),ji(this,Ho)&&ji(this[Ho],t)&&(this[Ho][t]=!1),KO(this,t,WO(1,n))};return Ap&&WI&&KO(Gs,t,{configurable:!0,set:r}),KI(t,e)})[C0],"toString",function(){return xV(this).tag}),RV(op,"withoutSetter",function(e){return KI(IV(e),e)}),BZ.f=KZ,VZ.f=Xw,k5e.f=qI,FZ.f=AV,N5e.f=UZ.f=NV,O5e.f=qZ,L5e.f=function(e){return KI(D5e(e),e)},Ap&&P5e(cb,"description",{configurable:!0,get:function(){return xV(this).description}})),GE({global:!0,constructor:!0,wrap:!0,forced:!_f,sham:!_f},{Symbol:op}),nC(jZ($5e),function(e){M5e(e)}),GE({target:Yw,stat:!0,forced:!_f},{useSetter:function(){WI=!0},useSimple:function(){WI=!1}}),GE({target:"Object",stat:!0,forced:!_f,sham:!Ap},{create:function(e,t){return t===void 0?T0(e):qI(T0(e),t)},defineProperty:Xw,defineProperties:qI,getOwnPropertyDescriptor:AV}),GE({target:"Object",stat:!0,forced:!_f},{getOwnPropertyNames:NV}),j5e(),U5e(op,Yw),$Z[Ho]=!0;var YZ=Vm&&!!Symbol.for&&!!Symbol.keyFor,H5e=tr,z5e=ko,G5e=si,W5e=$a,XZ=$m,K5e=YZ,YI=XZ("string-to-symbol-registry"),q5e=XZ("symbol-to-string-registry");H5e({target:"Symbol",stat:!0,forced:!K5e},{for:function(e){var t=W5e(e);if(G5e(YI,t))return YI[t];var r=z5e("Symbol")(t);return YI[t]=r,q5e[r]=t,r}});var Y5e=tr,X5e=si,J5e=Iv,Q5e=Bm,Z5e=YZ,OV=$m("symbol-to-string-registry");Y5e({target:"Symbol",stat:!0,forced:!Z5e},{keyFor:function(e){if(!J5e(e))throw TypeError(Q5e(e)+" is not a symbol");if(X5e(OV,e))return OV[e]}});var kV=Mv,e3e=Xn,PV=Hc,t3e=$a,DV=Yr([].push),r3e=tr,JZ=ko,QZ=M2,n3e=Jn,Uv=Yr,ZZ=tn,LV=Xn,MV=Iv,eee=eL,i3e=function(e){if(e3e(e))return e;if(kV(e)){for(var t=e.length,r=[],n=0;n<t;n++){var i=e[n];typeof i=="string"?DV(r,i):typeof i!="number"&&PV(i)!="Number"&&PV(i)!="String"||DV(r,t3e(i))}var o=r.length,a=!0;return function(s,c){if(a)return a=!1,c;if(kV(this))return c;for(var l=0;l<o;l++)if(r[l]===s)return c}}},o3e=Vm,a3e=String,Uu=JZ("JSON","stringify"),WE=Uv(/./.exec),jV=Uv("".charAt),s3e=Uv("".charCodeAt),c3e=Uv("".replace),l3e=Uv(1 .toString),u3e=/[\uD800-\uDFFF]/g,UV=/^[\uD800-\uDBFF]$/,FV=/^[\uDC00-\uDFFF]$/,VV=!o3e||ZZ(function(){var e=JZ("Symbol")();return Uu([e])!="[null]"||Uu({a:e})!="{}"||Uu(Object(e))!="{}"}),BV=ZZ(function(){return Uu("\uDF06\uD834")!=='"\\udf06\\ud834"'||Uu("\uDEAD")!=='"\\udead"'}),d3e=function(e,t){var r=eee(arguments),n=i3e(t);if(LV(n)||e!==void 0&&!MV(e))return r[1]=function(i,o){if(LV(n)&&(o=n3e(n,this,a3e(i),o)),!MV(o))return o},QZ(Uu,null,r)},h3e=function(e,t,r){var n=jV(r,t-1),i=jV(r,t+1);return WE(UV,e)&&!WE(FV,i)||WE(FV,e)&&!WE(UV,n)?"\\u"+l3e(s3e(e,0),16):e};Uu&&r3e({target:"JSON",stat:!0,arity:3,forced:VV||BV},{stringify:function(e,t,r){var n=eee(arguments),i=QZ(VV?d3e:Uu,null,n);return BV&&typeof i=="string"?c3e(i,u3e,h3e):i}});var $V=Nv,f3e=zc;tr({target:"Object",stat:!0,forced:!Vm||tn(function(){$V.f(1)})},{getOwnPropertySymbols:function(e){var t=$V.f;return t?t(f3e(e)):[]}}),Hn("asyncIterator"),Hn("hasInstance"),Hn("isConcatSpreadable"),Hn("iterator"),Hn("match"),Hn("matchAll"),Hn("replace"),Hn("search"),Hn("species"),Hn("split");var p3e=LZ;Hn("toPrimitive"),p3e();var m3e=ko,g3e=hd;Hn("toStringTag"),g3e(m3e("Symbol"),"Symbol"),Hn("unscopables"),hd(Yn.JSON,"JSON",!0);var y3e=rc.Symbol,v3e=Gr,E3e=Ts.f,HV=v3e("metadata"),zV=Function.prototype;zV[HV]===void 0&&E3e(zV,HV,{value:null}),Hn("dispose"),Hn("metadata");var _3e=y3e;Hn("asyncDispose");var b3e=Yr,pL=ko("Symbol"),w3e=pL.keyFor,S3e=b3e(pL.prototype.valueOf),tee=pL.isRegisteredSymbol||function(e){try{return w3e(S3e(e))!==void 0}catch{return!1}};tr({target:"Symbol",stat:!0},{isRegisteredSymbol:tee});for(GV=$m,JI=ko,WV=Yr,KV=Iv,qV=Gr,Cg=JI("Symbol"),qO=Cg.isWellKnownSymbol,YO=JI("Object","getOwnPropertyNames"),ree=WV(Cg.prototype.valueOf),XO=GV("wks"),KE=0,QI=YO(Cg),YV=QI.length;KE<YV;KE++)try{XI=QI[KE],KV(Cg[XI])&&qV(XI)}catch{}var XI,GV,JI,WV,KV,qV,Cg,qO,YO,ree,XO,KE,QI,YV,XV=function(e){if(qO&&qO(e))return!0;try{for(var t=ree(e),r=0,n=YO(XO),i=n.length;r<i;r++)if(XO[n[r]]==t)return!0}catch{}return!1};tr({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:XV}),Hn("matcher"),Hn("observable"),tr({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:tee}),tr({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:XV}),Hn("metadataKey"),Hn("patternMatch"),Hn("replaceAll");var ap=jr(_3e),nee=jr(zm.f("iterator"));function xy(e){return xy=typeof ap=="function"&&typeof nee=="symbol"?function(t){return typeof t}:function(t){return t&&typeof ap=="function"&&t.constructor===ap&&t!==ap.prototype?"symbol":typeof t},xy(e)}var T3e=jr(zm.f("toPrimitive"));function C3e(e){var t=function(r,n){if(xy(r)!=="object"||r===null)return r;var i=r[T3e];if(i!==void 0){var o=i.call(r,n||"default");if(xy(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return xy(t)==="symbol"?t:String(t)}function I(e,t,r){return(t=C3e(t))in e?NZ(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R3e=tn,I3e=Gr("iterator"),mL=!R3e(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2"),n="";return e.pathname="c%20d",t.forEach(function(i,o){t.delete("b"),n+=o+i}),r.delete("a",2),!e.toJSON||!r.has("a",1)||r.has("a",2)||!t.size&&!0||!t.sort||e.href!=="http://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[I3e]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||n!=="a1c3"||new URL("http://x",void 0).host!=="x"}),x3e=dd,ZI=tr,nm=Yn,qE=Jn,Uc=Yr,sp=Ba,JV=mL,QV=dd,A3e=XT,N3e=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:x3e(e,n,t[n],r);return e},O3e=hd,k3e=Y2,gL=Jh,iee=J2,ex=Xn,P3e=si,D3e=ld,L3e=Gc,M3e=yo,oee=ca,So=$a,j3e=Ov,ZV=sd,JO=q2,U3e=YT,bf=QT,F3e=bZ,V3e=Gr("iterator"),R0="URLSearchParams",aee=R0+"Iterator",see=gL.set,ns=gL.getterFor(R0),B3e=gL.getterFor(aee),$3e=Object.getOwnPropertyDescriptor,yL=function(e){if(!sp)return nm[e];var t=$3e(nm,e);return t&&t.value},eB=yL("fetch"),Jw=yL("Request"),Ay=yL("Headers"),tx=Jw&&Jw.prototype,tB=Ay&&Ay.prototype,H3e=nm.RegExp,z3e=nm.TypeError,cee=nm.decodeURIComponent,G3e=nm.encodeURIComponent,W3e=Uc("".charAt),rB=Uc([].join),Wd=Uc([].push),QO=Uc("".replace),K3e=Uc([].shift),nB=Uc([].splice),iB=Uc("".split),q3e=Uc("".slice),Y3e=/\+/g,oB=Array(4),X3e=function(e){return oB[e-1]||(oB[e-1]=H3e("((?:%[\\da-f]{2}){"+e+"})","gi"))},J3e=function(e){try{return cee(e)}catch{return e}},aB=function(e){var t=QO(e,Y3e," "),r=4;try{return cee(t)}catch{for(;r;)t=QO(t,X3e(r--),J3e);return t}},Q3e=/[!'()~]|%20/g,Z3e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},eFe=function(e){return Z3e[e]},sB=function(e){return QO(G3e(e),Q3e,eFe)},rx=k3e(function(e,t){see(this,{type:aee,iterator:JO(ns(e).entries),kind:t})},"Iterator",function(){var e=B3e(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value=t==="keys"?n.key:t==="values"?n.value:[n.key,n.value]),r},!0),lee=function(e){this.entries=[],this.url=null,e!==void 0&&(oee(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?W3e(e,0)==="?"?q3e(e,1):e:So(e)))};lee.prototype={type:R0,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,i,o,a,s,c=U3e(e);if(c)for(r=(t=JO(e,c)).next;!(n=qE(r,t)).done;){if(o=(i=JO(M3e(n.value))).next,(a=qE(o,i)).done||(s=qE(o,i)).done||!qE(o,i).done)throw z3e("Expected sequence with length 2");Wd(this.entries,{key:So(a.value),value:So(s.value)})}else for(var l in e)P3e(e,l)&&Wd(this.entries,{key:l,value:So(e[l])})},parseQuery:function(e){if(e)for(var t,r,n=iB(e,"&"),i=0;i<n.length;)(t=n[i++]).length&&(r=iB(t,"="),Wd(this.entries,{key:aB(K3e(r)),value:aB(rB(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],Wd(r,sB(e.key)+"="+sB(e.value));return rB(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Qw=function(){iee(this,Lf);var e=see(this,new lee(arguments.length>0?arguments[0]:void 0));sp||(this.size=e.entries.length)},Lf=Qw.prototype;N3e(Lf,{append:function(e,t){var r=ns(this);bf(arguments.length,2),Wd(r.entries,{key:So(e),value:So(t)}),sp||this.length++,r.updateURL()},delete:function(e){for(var t=ns(this),r=bf(arguments.length,1),n=t.entries,i=So(e),o=r<2?void 0:arguments[1],a=o===void 0?o:So(o),s=0;s<n.length;){var c=n[s];if(c.key!==i||a!==void 0&&c.value!==a)s++;else if(nB(n,s,1),a!==void 0)break}sp||(this.size=n.length),t.updateURL()},get:function(e){var t=ns(this).entries;bf(arguments.length,1);for(var r=So(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){var t=ns(this).entries;bf(arguments.length,1);for(var r=So(e),n=[],i=0;i<t.length;i++)t[i].key===r&&Wd(n,t[i].value);return n},has:function(e){for(var t=ns(this).entries,r=bf(arguments.length,1),n=So(e),i=r<2?void 0:arguments[1],o=i===void 0?i:So(i),a=0;a<t.length;){var s=t[a++];if(s.key===n&&(o===void 0||s.value===o))return!0}return!1},set:function(e,t){var r=ns(this);bf(arguments.length,1);for(var n,i=r.entries,o=!1,a=So(e),s=So(t),c=0;c<i.length;c++)(n=i[c]).key===a&&(o?nB(i,c--,1):(o=!0,n.value=s));o||Wd(i,{key:a,value:s}),sp||(this.size=i.length),r.updateURL()},sort:function(){var e=ns(this);F3e(e.entries,function(t,r){return t.key>r.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,r=ns(this).entries,n=D3e(e,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new rx(this,"keys")},values:function(){return new rx(this,"values")},entries:function(){return new rx(this,"entries")}},{enumerable:!0}),QV(Lf,V3e,Lf.entries,{name:"entries"}),QV(Lf,"toString",function(){return ns(this).serialize()},{enumerable:!0}),sp&&A3e(Lf,"size",{get:function(){return ns(this).entries.length},configurable:!0,enumerable:!0}),O3e(Qw,R0),ZI({global:!0,constructor:!0,forced:!JV},{URLSearchParams:Qw}),!JV&&ex(Ay)&&(cB=Uc(tB.has),lB=Uc(tB.set),nx=function(e){if(oee(e)){var t,r=e.body;if(L3e(r)===R0)return t=e.headers?new Ay(e.headers):new Ay,cB(t,"content-type")||lB(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),j3e(e,{body:ZV(0,So(r)),headers:ZV(0,t)})}return e},ex(eB)&&ZI({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return eB(e,arguments.length>1?nx(arguments[1]):{})}}),ex(Jw)&&(YE=function(e){return iee(this,tx),new Jw(e,arguments.length>1?nx(arguments[1]):{})},tx.constructor=YE,YE.prototype=tx,ZI({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:YE})));var cB,lB,nx,YE,tFe={URLSearchParams:Qw,getState:ns},uB=jr(rc.URLSearchParams),rFe={isBrowser:!0,classes:{URLSearchParams:uB!==void 0?uB:lL,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},uee=typeof window<"u"&&typeof document<"u",nFe=(dB=typeof navigator<"u"&&navigator.product,uee&&["ReactNative","NativeScript","NS"].indexOf(dB)<0),dB,iFe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function";function hB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hB(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Rc=fB(fB({},Object.freeze({__proto__:null,hasBrowserEnv:uee,hasStandardBrowserEnv:nFe,hasStandardBrowserWebWorkerEnv:iFe})),rFe),oFe=yo,aFe=Jn,sFe=si,cFe=Hi,lFe=function(){var e=oFe(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},pB=RegExp.prototype,dee=function(e){var t=e.flags;return t!==void 0||"flags"in pB||sFe(e,"flags")||!cFe(pB,e)?t:aFe(lFe,e)},uFe=oL.charAt,mB=Jn,dFe=yo,hFe=Xn,fFe=Hc,pFe=/./.exec,mFe=TypeError,gFe=tr,gB=Jn,hee=w0,yFe=Y2,XE=X2,yB=Fm,fee=z1,I0=$a,vFe=yo,EFe=Um,_Fe=Hc,bFe=G1,pee=dee,wFe=$T,SFe=tn,TFe=Z2,CFe=function(e,t,r){return t+(r?uFe(e,t).length:1)},RFe=function(e,t){var r=e.exec;if(hFe(r)){var n=mB(r,e,t);return n!==null&&dFe(n),n}if(fFe(e)==="RegExp")return mB(pFe,e,t);throw mFe("RegExp#exec called on incompatible receiver")},mee=Jh,IFe=Gr("matchAll"),gee="RegExp String",yee=gee+" Iterator",xFe=mee.set,AFe=mee.getterFor(yee),NFe=TypeError,ZO=hee("".indexOf),Zw=hee("".matchAll),ix=!!Zw&&!SFe(function(){Zw("a",/./)}),OFe=yFe(function(e,t,r,n){xFe(this,{type:yee,regexp:e,string:t,global:r,unicode:n,done:!1})},gee,function(){var e=AFe(this);if(e.done)return XE(void 0,!0);var t=e.regexp,r=e.string,n=RFe(t,r);return n===null?(e.done=!0,XE(void 0,!0)):e.global?(I0(n[0])===""&&(t.lastIndex=CFe(r,fee(t.lastIndex),e.unicode)),XE(n,!1)):(e.done=!0,XE(n,!1))}),vB=function(e){var t,r,n,i=vFe(this),o=I0(e),a=TFe(i,RegExp),s=I0(pee(i));return t=new a(a===RegExp?i.source:i,s),r=!!~ZO(s,"g"),n=!!~ZO(s,"u"),t.lastIndex=fee(i.lastIndex),new OFe(t,o,r,n)};gFe({target:"String",proto:!0,forced:ix},{matchAll:function(e){var t,r,n,i,o=yB(this);if(EFe(e)){if(ix)return Zw(o,e)}else{if(bFe(e)&&(t=I0(yB(pee(e))),!~ZO(t,"g")))throw NFe("`.matchAll` does not allow non-global regexes");if(ix)return Zw(o,e);if((n=wFe(e,IFe))===void 0&&_Fe(e)=="RegExp"&&(n=vB),n)return gB(n,e,o)}return r=I0(o),i=new RegExp(e,"g"),gB(vB,i,r)}});var kFe=Cs("String").matchAll,PFe=Hi,DFe=kFe,ox=String.prototype,LFe=function(e){var t=e.matchAll;return typeof e=="string"||e===ox||PFe(ox,e)&&t===ox.matchAll?DFe:t},MFe=jr(LFe);function vee(e){function t(r,n,i,o){let a=r[o++];if(a==="__proto__")return!0;let s=Number.isFinite(+a),c=o>=r.length;return a=!a&&ve.isArray(i)?i.length:a,c?(ve.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!s):(i[a]&&ve.isObject(i[a])||(i[a]=[]),t(r,n,i[a],o)&&ve.isArray(i[a])&&(i[a]=function(l){let u={},d=Object.keys(l),f,p=d.length,m;for(f=0;f<p;f++)m=d[f],u[m]=l[m];return u}(i[a])),!s)}if(ve.isFormData(e)&&ve.isFunction(e.entries)){let r={};return ve.forEachEntry(e,(n,i)=>{t(function(o){return MFe(ve).call(ve,/\w+|\[(\w*)]/g,o).map(a=>a[0]==="[]"?"":a[1]||a[0])}(n),i,r,0)}),r}return null}var vL={transitional:IZ,adapter:["xhr","http"],transformRequest:[function(e,t){let r=t.getContentType()||"",n=r.indexOf("application/json")>-1,i=ve.isObject(e);if(i&&ve.isHTMLForm(e)&&(e=new FormData(e)),ve.isFormData(e))return n?JSON.stringify(vee(e)):e;if(ve.isArrayBuffer(e)||ve.isBuffer(e)||ve.isStream(e)||ve.isFile(e)||ve.isBlob(e))return e;if(ve.isArrayBufferView(e))return e.buffer;if(ve.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(a,s){return qw(a,new Rc.classes.URLSearchParams,Object.assign({visitor:function(c,l,u,d){return Rc.isNode&&ve.isBuffer(c)?(this.append(l,c.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},s))}(e,this.formSerializer).toString();if((o=ve.isFileList(e))||r.indexOf("multipart/form-data")>-1){let a=this.env&&this.env.FormData;return qw(o?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(a,s,c){if(ve.isString(a))try{return(s||JSON.parse)(a),Ci(ve).call(ve,a)}catch(l){if(l.name!=="SyntaxError")throw l}return(0,JSON.stringify)(a)}(e)):e}],transformResponse:[function(e){let t=this.transitional||vL.transitional,r=t&&t.forcedJSONParsing,n=this.responseType==="json";if(e&&ve.isString(e)&&(r&&!this.responseType||n)){let i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(o){if(i)throw o.name==="SyntaxError"?pr.from(o,pr.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rc.classes.FormData,Blob:Rc.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],e=>{vL.headers[e]={}});var EL=vL,jFe=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),EB=Symbol("internals");function Rg(e){var t;return e&&Ci(t=String(e)).call(t).toLowerCase()}function lb(e){return e===!1||e==null?e:ve.isArray(e)?e.map(lb):String(e)}function ax(e,t,r,n,i){return ve.isFunction(n)?n.call(this,t,r):(i&&(t=r),ve.isString(t)?ve.isString(n)?t.indexOf(n)!==-1:ve.isRegExp(n)?n.test(t):void 0:void 0)}var ub=class{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function i(s,c,l){let u=Rg(c);if(!u)throw new Error("header name must be a non-empty string");let d=ve.findKey(n,u);(!d||n[d]===void 0||l===!0||l===void 0&&n[d]!==!1)&&(n[d||c]=lb(s))}let o=(s,c)=>ve.forEach(s,(l,u)=>i(l,u,c));var a;return ve.isPlainObject(e)||e instanceof this.constructor?o(e,t):ve.isString(e)&&(e=Ci(e).call(e))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(Ci(a=e).call(a))?o((s=>{let c={},l,u,d;return s&&s.split(`
`).forEach(function(f){var p,m;d=f.indexOf(":"),l=Ci(p=f.substring(0,d)).call(p).toLowerCase(),u=Ci(m=f.substring(d+1)).call(m),!l||c[l]&&jFe[l]||(l==="set-cookie"?c[l]?c[l].push(u):c[l]=[u]:c[l]=c[l]?c[l]+", "+u:u)}),c})(e),t):e!=null&&i(t,e,r),this}get(e,t){if(e=Rg(e)){let r=ve.findKey(this,e);if(r){let n=this[r];if(!t)return n;if(t===!0)return function(i){let o=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,s;for(;s=a.exec(i);)o[s[1]]=s[2];return o}(n);if(ve.isFunction(t))return t.call(this,n,r);if(ve.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Rg(e)){let r=ve.findKey(this,e);return!(!r||this[r]===void 0||t&&!ax(0,this[r],r,t))}return!1}delete(e,t){let r=this,n=!1;function i(o){if(o=Rg(o)){let a=ve.findKey(r,o);!a||t&&!ax(0,r[a],a,t)||(delete r[a],n=!0)}}return ve.isArray(e)?e.forEach(i):i(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let i=t[r];e&&!ax(0,this[i],i,e,!0)||(delete this[i],n=!0)}return n}normalize(e){let t=this,r={};return ve.forEach(this,(n,i)=>{var o;let a=ve.findKey(r,i);if(a)return t[a]=lb(n),void delete t[i];let s=e?function(c){return Ci(c).call(c).toLowerCase().replace(/([a-z\d])(\w*)/g,(l,u,d)=>u.toUpperCase()+d)}(i):Ci(o=String(i)).call(o);s!==i&&delete t[i],t[s]=lb(n),r[s]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){let t=Object.create(null);return ve.forEach(this,(r,n)=>{r!=null&&r!==!1&&(t[n]=e&&ve.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){let t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.forEach(o=>t.set(o)),t}static accessor(e){let t=(this[EB]=this[EB]={accessors:{}}).accessors,r=this.prototype;function n(i){let o=Rg(i);t[o]||(function(a,s){let c=ve.toCamelCase(" "+s);["get","set","has"].forEach(l=>{Object.defineProperty(a,l+c,{value:function(u,d,f){return this[l].call(this,s,u,d,f)},configurable:!0})})}(r,i),t[o]=!0)}return ve.isArray(e)?e.forEach(n):n(e),this}};ub.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ve.reduceDescriptors(ub.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(i){this[n]=i}}}),ve.freezeMethods(ub);var wl=ub;function sx(e,t){let r=this||EL,n=t||r,i=wl.from(n.headers),o=n.data;return ve.forEach(e,function(a){o=a.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function Eee(e){return!(!e||!e.__CANCEL__)}function Fv(e,t,r){pr.call(this,e??"canceled",pr.ERR_CANCELED,t,r),this.name="CanceledError"}ve.inherits(Fv,pr,{__CANCEL__:!0});var UFe=Rc.hasStandardBrowserEnv?{write(e,t,r,n,i,o){let a=[e+"="+encodeURIComponent(t)];ve.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),ve.isString(n)&&a.push("path="+n),ve.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function _ee(e,t){return e&&!function(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}(t)?function(r,n){return n?r.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):r}(e,t):t}var FFe=Rc.hasStandardBrowserEnv?function(){let e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),r;function n(i){let o=i;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=n(window.location.href),function(i){let o=ve.isString(i)?n(i):i;return o.protocol===r.protocol&&o.host===r.host}}():function(){return!0};function _B(e,t){let r=0,n=function(i,o){i=i||10;let a=new Array(i),s=new Array(i),c,l=0,u=0;return o=o!==void 0?o:1e3,function(d){let f=Date.now(),p=s[u];c||(c=f),a[l]=d,s[l]=f;let m=u,g=0;for(;m!==l;)g+=a[m++],m%=i;if(l=(l+1)%i,l===u&&(u=(u+1)%i),f-c<o)return;let y=p&&f-p;return y?Math.round(1e3*g/y):void 0}}(50,250);return i=>{let o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-r,c=n(s);r=o;let l={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&o<=a?(a-o)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}var VFe=typeof XMLHttpRequest<"u"&&function(e){return new he(function(t,r){let n=e.data,i=wl.from(e.headers).normalize(),o,a,{responseType:s,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if(ve.isFormData(n)){if(Rc.hasStandardBrowserEnv||Rc.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((a=i.getContentType())!==!1){let[m,...g]=a?a.split(";").map(y=>Ci(y).call(y)).filter(Boolean):[];i.setContentType([m||"multipart/form-data",...g].join("; "))}}let u=new XMLHttpRequest;if(e.auth){let m=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(m+":"+g))}let d=_ee(e.baseURL,e.url);function f(){if(!u)return;let m=wl.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());(function(g,y,v){let E=v.config.validateStatus;v.status&&E&&!E(v.status)?y(new pr("Request failed with status code "+v.status,[pr.ERR_BAD_REQUEST,pr.ERR_BAD_RESPONSE][Math.floor(v.status/100)-4],v.config,v.request,v)):g(v)})(function(g){t(g),l()},function(g){r(g),l()},{data:s&&s!=="text"&&s!=="json"?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:m,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),RZ(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){u&&u.readyState===4&&(u.status!==0||u.responseURL&&u.responseURL.indexOf("file:")===0)&&setTimeout(f)},u.onabort=function(){u&&(r(new pr("Request aborted",pr.ECONNABORTED,e,u)),u=null)},u.onerror=function(){r(new pr("Network Error",pr.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let m=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",g=e.transitional||IZ;e.timeoutErrorMessage&&(m=e.timeoutErrorMessage),r(new pr(m,g.clarifyTimeoutError?pr.ETIMEDOUT:pr.ECONNABORTED,e,u)),u=null},Rc.hasStandardBrowserEnv&&(c&&ve.isFunction(c)&&(c=c(e)),c||c!==!1&&FFe(d))){let m=e.xsrfHeaderName&&e.xsrfCookieName&&UFe.read(e.xsrfCookieName);m&&i.set(e.xsrfHeaderName,m)}n===void 0&&i.setContentType(null),"setRequestHeader"in u&&ve.forEach(i.toJSON(),function(m,g){u.setRequestHeader(g,m)}),ve.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),s&&s!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",_B(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",_B(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=m=>{u&&(r(!m||m.type?new Fv(null,e,u):m),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));let p=function(m){let g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(m);return g&&g[1]||""}(d);p&&Rc.protocols.indexOf(p)===-1?r(new pr("Unsupported protocol "+p+":",pr.ERR_BAD_REQUEST,e)):u.send(n||null)})},ek={http:null,xhr:VFe};ve.forEach(ek,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var bB=e=>"- ".concat(e),BFe=e=>ve.isFunction(e)||e===null||e===!1,bee={getAdapter:e=>{e=ve.isArray(e)?e:[e];let{length:t}=e,r,n,i={};for(let o=0;o<t;o++){let a;if(r=e[o],n=r,!BFe(r)&&(n=ek[(a=String(r)).toLowerCase()],n===void 0))throw new pr("Unknown adapter '".concat(a,"'"));if(n)break;i[a||"#"+o]=n}if(!n){let o=Object.entries(i).map(a=>{let[s,c]=a;return"adapter ".concat(s," ")+(c===!1?"is not supported by the environment":"is not available in the build")});throw new pr("There is no suitable adapter to dispatch the request "+(t?o.length>1?`since :
`+o.map(bB).join(`
`):" "+bB(o[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n},adapters:ek};function cx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Fv(null,e)}function wB(e){return cx(e),e.headers=wl.from(e.headers),e.data=sx.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),bee.getAdapter(e.adapter||EL.adapter)(e).then(function(t){return cx(e),t.data=sx.call(e,e.transformResponse,t),t.headers=wl.from(t.headers),t},function(t){return Eee(t)||(cx(e),t&&t.response&&(t.response.data=sx.call(e,e.transformResponse,t.response),t.response.headers=wl.from(t.response.headers))),he.reject(t)})}function SB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var TB=e=>e instanceof wl?function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?SB(Object(n),!0).forEach(function(i){I(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SB(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}({},e):e;function im(e,t){t=t||{};let r={};function n(l,u,d){return ve.isPlainObject(l)&&ve.isPlainObject(u)?ve.merge.call({caseless:d},l,u):ve.isPlainObject(u)?ve.merge({},u):ve.isArray(u)?u.slice():u}function i(l,u,d){return ve.isUndefined(u)?ve.isUndefined(l)?void 0:n(void 0,l,d):n(l,u,d)}function o(l,u){if(!ve.isUndefined(u))return n(void 0,u)}function a(l,u){return ve.isUndefined(u)?ve.isUndefined(l)?void 0:n(void 0,l):n(void 0,u)}function s(l,u,d){return d in t?n(l,u):d in e?n(void 0,l):void 0}let c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,u)=>i(TB(l),TB(u),!0)};return ve.forEach(Object.keys(Object.assign({},e,t)),function(l){let u=c[l]||i,d=u(e[l],t[l],l);ve.isUndefined(d)&&u!==s||(r[l]=d)}),r}var wee="1.6.8",_L={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_L[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var CB={};_L.transitional=function(e,t,r){function n(i,o){return"[Axios v"+wee+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new pr(n(o," has been removed"+(t?" in "+t:"")),pr.ERR_DEPRECATED);return t&&!CB[o]&&(CB[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,o,a)}};var tk={assertOptions:function(e,t,r){if(typeof e!="object")throw new pr("options must be an object",pr.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),i=n.length;for(;i-- >0;){let o=n[i],a=t[o];if(a){let s=e[o],c=s===void 0||a(s,o,e);if(c!==!0)throw new pr("option "+o+" must be "+c,pr.ERR_BAD_OPTION_VALUE)}else if(r!==!0)throw new pr("Unknown option "+o,pr.ERR_BAD_OPTION)}},validators:_L},Yl=tk.validators,db=class{constructor(e){this.defaults=e,this.interceptors={request:new gV,response:new gV}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let n;Error.captureStackTrace?Error.captureStackTrace(n={}):n=new Error;let i=n.stack?n.stack.replace(/^.+\n/,""):"";r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}throw r}}_request(e,t){typeof e=="string"?(t=t||{}).url=e:t=e||{},t=im(this.defaults,t);let{transitional:r,paramsSerializer:n,headers:i}=t;r!==void 0&&tk.assertOptions(r,{silentJSONParsing:Yl.transitional(Yl.boolean),forcedJSONParsing:Yl.transitional(Yl.boolean),clarifyTimeoutError:Yl.transitional(Yl.boolean)},!1),n!=null&&(ve.isFunction(n)?t.paramsSerializer={serialize:n}:tk.assertOptions(n,{encode:Yl.function,serialize:Yl.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&ve.merge(i.common,i[t.method]);i&&ve.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),t.headers=wl.concat(o,i);let a=[],s=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(t)===!1||(s=s&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});let c=[],l;this.interceptors.response.forEach(function(p){c.push(p.fulfilled,p.rejected)});let u,d=0;if(!s){let p=[wB.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),u=p.length,l=he.resolve(t);d<u;)l=l.then(p[d++],p[d++]);return l}u=a.length;let f=t;for(d=0;d<u;){let p=a[d++],m=a[d++];try{f=p(f)}catch(g){m.call(this,g);break}}try{l=wB.call(this,f)}catch(p){return he.reject(p)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return RZ(_ee((e=im(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};ve.forEach(["delete","get","head","options"],function(e){db.prototype[e]=function(t,r){return this.request(im(r||{},{method:e,url:t,data:(r||{}).data}))}}),ve.forEach(["post","put","patch"],function(e){function t(r){return function(n,i,o){return this.request(im(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}db.prototype[e]=t(),db.prototype[e+"Form"]=t(!0)});var hb=db,$Fe=class See{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new he(function(i){r=i});let n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o,a=new he(s=>{n.subscribe(s),o=s}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},t(function(i,o,a){n.reason||(n.reason=new Fv(i,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new See(function(r){t=r}),cancel:t}}},HFe=$Fe,rk={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(rk).forEach(e=>{let[t,r]=e;rk[r]=t});var zFe=rk,ui=function e(t){let r=new hb(t),n=SZ(hb.prototype.request,r);return ve.extend(n,hb.prototype,r,{allOwnKeys:!0}),ve.extend(n,r,null,{allOwnKeys:!0}),n.create=function(i){return e(im(t,i))},n}(EL);ui.Axios=hb,ui.CanceledError=Fv,ui.CancelToken=HFe,ui.isCancel=Eee,ui.VERSION=wee,ui.toFormData=qw,ui.AxiosError=pr,ui.Cancel=ui.CanceledError,ui.all=function(e){return he.all(e)},ui.spread=function(e){return function(t){return e.apply(null,t)}},ui.isAxiosError=function(e){return ve.isObject(e)&&e.isAxiosError===!0},ui.mergeConfig=im,ui.AxiosHeaders=wl,ui.formToJSON=e=>vee(ve.isHTMLForm(e)?new FormData(e):e),ui.getAdapter=bee.getAdapter,ui.HttpStatusCode=zFe,ui.default=ui;var Zi=ui,GFe=()=>{};function x0(){let e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:GFe};return e.promise=new he((t,r)=>{e.resolve=n=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=n=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,r(n))}}),e}var JE=new Map,QE=new Map,cc=new Map,mn=function(e){return e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot",e}({}),Mt=function(e){return e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger",e}({}),Tee=new E4e,Bs=Tee.getResult(),lx=null;function St(e){if(!lx){Bs=Tee.getResult();let t=function(s){if(s.engine.name==="Blink"&&s.browser.name!=="WeChat")return Mt.CHROME;switch(s.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Mt.CHROME;case"Safari":case"Mobile Safari":return Mt.SAFARI;case"Edge":return Mt.EDGE;case"Firefox":return Mt.FIREFOX;case"QQ":case"QQBrowser":return Mt.QQ;case"Opera":return Mt.OPERA;case"WeChat":return Mt.WECHAT;default:return s.browser.name||""}}(Bs),r=RB(Bs),n=function(s){return s.os.name==="Windows"?s.os.version?s.os.name+" "+s.os.version:s.os.name:s.os.name||""}(Bs),i=Bs.os.version,o=RB(Bs,!1),a=Bs.device.type;if(!(t&&r&&n&&i))return{name:t,version:r,os:n,osVersion:i,browserVersion:o,deviceType:a};lx={name:t,version:r,os:n,osVersion:i,browserVersion:o,deviceType:a}}return lx}function RB(e){let t,r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return t=e.engine.name==="Blink"?e.engine.version||"":e.browser.version||"",r?t.split(".")[0]:t}function iC(){return St().os}function IB(){let e=St();return"".concat(e.os," ").concat(e.osVersion)}function eS(){let e=St();return!!(Bs.engine.name==="WebKit"&&e.os===mn.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==Mt.SAFARI||Ui()&&e.name!==Mt.SAFARI)}function Fu(){return St().name===Mt.CHROME}function Wn(){return St().name===Mt.SAFARI}function Cee(){return St().name===Mt.EDGE}function Rr(){return St().name===Mt.FIREFOX}function Ui(){return St().os===mn.IOS}function nk(e){let t=St();return!(t.name!==Mt.CHROME||!t.osVersion)&&Number(t.version)>=e}function Ree(e){let t=St();return!(t.name!==Mt.CHROME||!t.osVersion)&&Number(t.version)<e}function xB(e){let t=St();return!(t.name!==Mt.EDGE||!t.osVersion)&&Number(t.version)>=e}function Iee(e){let t=St();return!(t.name!==Mt.SAFARI||!t.osVersion)&&Number(t.version)>=e}function xee(e,t,r){let n=St();if(n.os!==mn.IOS||!n.osVersion)return!1;let i=n.osVersion.split(".");return t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e}function Aee(e,t,r){let n=St();if(n.name!==Mt.SAFARI||!n.osVersion||!n.browserVersion)return!1;let i=n.browserVersion.split(".");return t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e}function AB(e){let t=St();return!(t.name!==Mt.OPERA||!t.osVersion)&&Number(t.version)>=e}function NB(){let e=St();if(e.os!==mn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])<14||Number(t[0])===14&&Number(t[1])<=6}function om(){let e=St();if(e.os!==mn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])===15}function ik(){let e=St();if(e.os!==mn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])===16}function OB(){let e=St();if(e.os!==mn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])===15&&Number(t[1])>=1}function gs(){return Wn()&&navigator.maxTouchPoints>0}function Nee(){return St().name===Mt.WECHAT}function Oee(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function bL(){let e=iC();return function(){let{deviceType:t}=St();return t==="mobile"||t==="tablet"}()||e===mn.ANDROID||e===mn.IOS||e===mn.HARMONY_OS}function Qu(){let e=St();return e.name!==Mt.EDGE&&e.name!==Mt.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function oC(){return iC()===mn.ANDROID}function A0(){let e=St();return oC()&&(e.name===Mt.CHROME||e.name===Mt.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function cr(e,t,r){return(t=function(n){var i=function(o,a){if(typeof o!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var c=s.call(o,"string");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(n);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kB(Object(r),!0).forEach(function(n){cr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var O=function(e){return e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",e}({}),J=class extends Error{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;super(t),cr(this,"code",void 0),cr(this,"message",void 0),cr(this,"data",void 0),cr(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=r}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return e==="error"&&(t||console).error(this.toString()),e==="warning"&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function fl(e,t){if(typeof e!="boolean")throw new J(O.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function on(e,t,r){if(!me(r).call(r,e))throw new J(O.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(r)))}function Wt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4;if(e<r||e>n||(!(arguments.length>4&&arguments[4]!==void 0)||arguments[4])&&!function(i){return typeof i=="number"&&i%1==0}(e))throw new J(O.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(r,", ").concat(n,"]. integer only"))}function ux(e,t){if(typeof e!="number"){if(!(e.min||e.max||e.ideal||e.exact))throw new J(O.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));e.min!==void 0&&Wt(e.min,"".concat(t,".min"),0,1/0),e.max!==void 0&&Wt(e.max,"".concat(t,".max"),1,1/0),e.exact!==void 0&&Wt(e.exact,"".concat(t,".exact"),1,1/0),e.ideal!==void 0&&Wt(e.ideal,"".concat(t,".ideal"),1,1/0)}else Wt(e,t,1,1/0)}function Nn(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(e==null)throw new J(O.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!kee(e,r,n,i))throw new J(O.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(r,",").concat(n,"].").concat(i?" ASCII characters only.":""))}function sl(e,t){if(!Array.isArray(e))throw new J(O.INVALID_PARAMS,"".concat(t," should be an array"))}function gr(e){return e==null}function kee(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof e=="string"&&e.length<=r&&e.length>=t&&(!n||function(i){if(typeof i!="string")return!1;for(let o=0;o<i.length;o+=1){let a=i.charCodeAt(o);if(a<0||a>255)return!1}return!0}(e))}var qg=function(e){return e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE",e}(qg||{}),ok=function(e){return e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",e}(ok||{}),Pee=new class{constructor(){cr(this,"_clientSize",null),cr(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),cr(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),cr(this,"getStyle",e=>window.getComputedStyle(e,null)),cr(this,"checkCssVisibleProperty",e=>{var t;let r=!0,n=this.getStyle(e),{display:i,visibility:o,opacity:a,filter:s}=n;return(i==="none"||me(t=["hidden","collapse"]).call(t,o)||Number(a)<.1)&&(r=!1),!!r&&(s&&s.split(" ").filter(c=>{var l;let u=c.split("(")[0];return me(l=["brightness","blur","opacity"]).call(l,u)}).map(c=>{let[l,u]=c.split(/\(|\)/);return[l,Number(u.match(/^[0-9\.]+/))]}).forEach(c=>{let[l,u]=c;switch(l){case"brightness":(u<.1||u>3)&&(r=!1);break;case"blur":u>3&&(r=!1);break;case"opacity":u<.1&&(r=!1)}}),r)}),cr(this,"checkPropertyUpToAllParentNodes",(e,t)=>{let r=!0,n=!0,i=a=>t(a),o=e;for(;o&&n;)i(o)||(r=!1,n=!1),o=o.parentElement,o||(n=!1);return r}),cr(this,"checkActualCssVisibleIncludeInherit",e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty)),cr(this,"getSizeAboutClient",e=>{let{width:t,height:r,left:n,right:i,top:o,bottom:a}=e.getBoundingClientRect(),s=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:r,left:n,right:i,top:o,bottom:a,clientWidth:s,clientHeight:c,clientMin:Math.min(s,c)}}),cr(this,"checkActualSize",()=>{let{width:e,height:t,clientMin:r}=this._clientSize;return this.checkSizeIsVisible(e,t,r)}),cr(this,"elementFromPoint",(e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null),cr(this,"checkCoverForAPoint",(e,t,r)=>{let n=this.elementFromPoint(e,t);return n!==null&&n!==r}),cr(this,"getPointPositionList",()=>{let{width:e,height:t,left:r,top:n}=this._clientSize,i=e/6,o=t/6,a=[],s=10**6;for(let c=0;c<5;c++)for(let l=0;l<5;l++){let u=(r*s+(c===0?.1:c===4?(i*c*s-1e5)/s:i*c)*s)/s,d=(n*s+(l===0?.1:l===4?(o*l*s-1e5)/s:o*l)*s)/s;a.push({x:u,y:d})}return[...a]}),cr(this,"checkElementCover",e=>this.getPointPositionList().map(t=>this.checkCoverForAPoint(t.x,t.y,e)).filter(t=>!!t).length>6),cr(this,"checkSizeIsVisible",(e,t,r)=>(e>50||r/e<=10)&&(t>50||r/t<=10)),cr(this,"checkSizeOfPartInClient",()=>{let{left:e,right:t,top:r,bottom:n,clientHeight:i,clientWidth:o,clientMin:a}=this._clientSize,s,c,l,u;if(e<0)s=0;else{if(!(e<o))return!1;s=e}if(t<0)return!1;if(c=t<o?t:o,r<0)l=0;else{if(!(r<i))return!1;l=r}if(n<0)return!1;u=n<i?n:i;let d=c-s,f=u-l;return this.checkSizeIsVisible(d,f,a)}),cr(this,"returnHiddenResult",e=>(this._clientSize=null,{visible:!1,reason:e})),cr(this,"checkOneElementVisible",e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(qg.COVERED);{let t=this.checkActualSize(),r=this.checkSizeOfPartInClient();return t&&!r?this.returnHiddenResult(qg.POSITION):t?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(qg.SIZE)}}return this.returnHiddenResult(qg.STYLE)}return this.returnHiddenResult(ok.UNMOUNTED)}return this.returnHiddenResult(ok.INVALID_HTML_ELEMENT)}),cr(this,"checkElementIsMountedOnDom",e=>this.checkPropertyUpToAllParentNodes(e,t=>t.nodeName.toUpperCase()!=="HTML"?t.parentElement!==null:!!document.documentElement))}};function wL(e){return new TextEncoder().encode(e)}var PB=function(e,t){let r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r},ak=async e=>function(t,r){let n="";return new Uint8Array(t).forEach(i=>{n+=i.toString(r).padStart(2,"0")}),n}(await crypto.subtle.digest("SHA-256",wL(e)),16),_r=class{constructor(){cr(this,"_events",{}),cr(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map(t=>t.listener):[]}on(e,t){this._events[e]||(this._events[e]=[]);let r=this._events[e];this._indexOfListener(r,t)===-1&&r.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);let r=this._events[e];this._indexOfListener(r,t)===-1&&r.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;let r=this._events[e],n=this._indexOfListener(r,t);n!==-1&&r.splice(n,1),this._events[e].length===0&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);let t=this._events[e].map(o=>o);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(let o=0;o<t.length;o+=1){let a=t[o];a.once&&this.off(e,a.listener),a.listener.apply(this,n||[])}}safeEmit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];[...this._events[e]||[]].forEach(i=>{i.once&&this.off(e,i.listener);try{i.listener.apply(this,r)}catch(o){console.error("safeEmit event:".concat(e," error ").concat(o==null?void 0:o.toString()))}})}_indexOfListener(e,t){let r=e.length;for(;r--;)if(e[r].listener===t)return r;return-1}},Ig=null;function Dee(){if(Ig)return Ig;if(window.electron)return Ig=window.electron;if(!window.require)return null;try{return Ig=window.require("electron"),Ig}catch{return null}}var Qr=function(e){return e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.PRELOAD="PRELOAD",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload",e}({}),Cr=function(e){return e.TRACER="tracer",e}({});function DB(e){return Wt(e.timeout,"config.timeout",0,1e5),Wt(e.timeoutFactor,"config.timeoutFactor",0,100,!1),Wt(e.maxRetryCount,"config.maxRetryConfig",0,1/0),Wt(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}var WFe=function(e){return e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",e}({}),Bt=function(e){return e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.FALLBACK="FALLBACK",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e}({});function aC(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach(t=>{if(!t.urls)throw Error()})}catch{return!1}return!0}function Lee(e){return Nn(e.turnServerURL,"turnServerURL"),Nn(e.username,"username"),Nn(e.password,"password"),e.udpport&&Wt(e.udpport,"udpport",1,99999,!0),e.forceturn&&fl(e.forceturn,"forceturn"),e.security&&fl(e.security,"security"),e.tcpport&&Wt(e.tcpport,"tcpport",1,99999,!0),!0}function LB(e){return e.level!==void 0&&on(e.level,"level",[1,2,3]),e.delay!==void 0&&Wt(e.delay,"delay",0,3e3,!0),!0}var gt=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",e}({}),Gn=function(e){return e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK",e}({}),Co=function(e){return e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({}),cp=function(e){return e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({});function Kn(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return e.getListeners(t).length===0?he.reject(new J(O.UNEXPECTED_ERROR,"can not emit promise")):new he((o,a)=>{e.emit(t,...n,o,a)})}function Jt(e,t){if(e.getListeners(t).length===0)return he.resolve();for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return Kn(e,t,...n)}function Ca(e,t){if(e.getListeners(t).length===0)return null;for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return N0(e,t,...n)}function N0(e,t){let r=null,n=null;for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if(e.emit(t,...o,s=>{r=s},s=>{n=s}),n!==null)throw n;if(r===null)throw new J(O.UNEXPECTED_ERROR,"handler is not sync");return r}var $r=new class extends _r{set networkState(e){this.emit(cp.NETWORK_STATE_CHANGE,e,this._networkState),e===Co.ONLINE?this.emit(cp.ONLINE):e===Co.OFFLINE&&(this.onlineWaiter=new he(t=>{this.once(cp.ONLINE,()=>{this.onlineWaiter=void 0,t(Co.ONLINE)})}),this.emit(cp.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===Co.ONLINE}constructor(){super(),cr(this,"_moduleName","network-indicator"),cr(this,"_networkState",Co.ONLINE),cr(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=Co.ONLINE}),window.addEventListener("offline",()=>{this.networkState=Co.OFFLINE})}};function tS(e,t){let r=e.indexOf(t);r!==-1&&e.splice(r,1)}function lp(e){let t=[];return e.forEach(r=>{t.indexOf(r)===-1&&t.push(r)}),t}function sC(e){he!==void 0?he.resolve().then(e):setTimeout(e,0)}function Vr(e){return JSON.parse(JSON.stringify(e))}function Kd(e){try{return Vr(e)}catch{return e}}var MB={};function Zu(e,t){MB[t]||(MB[t]=!0,e())}function qd(e){let t=window.atob(e),r=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n+=1)r[n]=t.charCodeAt(n);return r}function Vu(e){let t="";for(let r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return window.btoa(t)}function Mee(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,r=new TextEncoder().encode(e);if(r.length>t)r=r.slice(0,t);else if(r.length<t){let n=new Uint8Array(t);n.set(r),r=n}return r}function jB(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=Js(t).call(t,(a,s)=>a+s.length,0),i=new Uint8Array(new ArrayBuffer(n)),o=0;return t.forEach(a=>{i.set(a,o),o+=a.length}),i}function Ic(e){return window.TextEncoder?new TextEncoder().encode(e).length:e.length}function jee(e){let t=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&e.realFormData&&(e=e.realFormData),e.forEach(r=>{t+=typeof r=="string"?Ic(r):r.size}),t+138}function KFe(e){let t=new J(O.TIMEOUT,"timeout");return new he((r,n)=>{window.setTimeout(()=>n(t),e)})}function Ln(e){return new he(t=>{window.setTimeout(t,e)})}function er(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0,r=Math.random().toString(16).substr(2,e).toLowerCase();return r.length===e?"".concat(t).concat(r):"".concat(t).concat(r)+er(e-r.length,"")}function up(){return er(32,"").toUpperCase()}var cC=()=>{},UB=new class{constructor(){cr(this,"fnMap",new Map)}throttleByKey(e,t,r,n){for(var i=arguments.length,o=new Array(i>4?i-4:0),a=4;a<i;a++)o[a-4]=arguments[a];if(this.fnMap.has(t)){let s=this.fnMap.get(t);if(s.threshold!==r){s.fn(...s.args),clearTimeout(s.timer);let c=window.setTimeout(()=>{let l=this.fnMap.get(t);l&&l.fn(...l.args),this.fnMap.delete(t)},r);this.fnMap.set(t,{fn:e,threshold:r,timer:c,args:o,skipFn:n})}else s.skipFn&&s.skipFn(...s.args),this.fnMap.set(t,we(we({},s),{},{fn:e,args:o,skipFn:n}))}else{let s=window.setTimeout(()=>{let c=this.fnMap.get(t);c&&c.fn(...c.args),this.fnMap.delete(t)},r);this.fnMap.set(t,{fn:e,threshold:r,timer:s,args:o,skipFn:n})}}},FB=UB.throttleByKey.bind(UB);function VB(e){return typeof e=="object"&&e!==null&&!(e instanceof RegExp)}function sk(e,t){if(!VB(e)||!VB(t)||Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){let r=[...e];for(let n=0;n<t.length;n++)r[n]=sk(e[n],t[n]);return r}{let r=we({},e);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)?r[n]=sk(e[n],t[n]):r[n]=t[n]);return r}}function BB(e,t){let r=[0];if(r=new Array(t).fill(0),e===0)return r;let n=0;for(;e>0&&(r[n]=255&e,e>>=8,n++,n!==t););return r}function dx(e){return typeof e=="number"?e:e.exact||e.ideal||e.max||e.min||0}function Uee(e){let t="0123456789abcdef";function r(b){let S,A="";for(S=0;S<=3;S++)A+=t.charAt(b>>8*S+4&15)+t.charAt(b>>8*S&15);return A}function n(b,S){let A=(65535&b)+(65535&S);return(b>>16)+(S>>16)+(A>>16)<<16|65535&A}function i(b,S,A,N,D,M){return n(function(H,V){return H<<V|H>>>32-V}(n(n(S,b),n(N,M)),D),A)}function o(b,S,A,N,D,M,H){return i(S&A|~S&N,b,S,D,M,H)}function a(b,S,A,N,D,M,H){return i(S&N|A&~N,b,S,D,M,H)}function s(b,S,A,N,D,M,H){return i(S^A^N,b,S,D,M,H)}function c(b,S,A,N,D,M,H){return i(A^(S|~N),b,S,D,M,H)}let l=function(b){let S,A=1+(b.length+8>>6),N=new Array(16*A);for(S=0;S<16*A;S++)N[S]=0;for(S=0;S<b.length;S++)N[S>>2]|=b.charCodeAt(S)<<S%4*8;return N[S>>2]|=128<<S%4*8,N[16*A-2]=8*b.length,N}(e),u,d,f,p,m,g=1732584193,y=-271733879,v=-1732584194,E=271733878;for(u=0;u<l.length;u+=16)d=g,f=y,p=v,m=E,g=o(g,y,v,E,l[u+0],7,-680876936),E=o(E,g,y,v,l[u+1],12,-389564586),v=o(v,E,g,y,l[u+2],17,606105819),y=o(y,v,E,g,l[u+3],22,-1044525330),g=o(g,y,v,E,l[u+4],7,-176418897),E=o(E,g,y,v,l[u+5],12,1200080426),v=o(v,E,g,y,l[u+6],17,-1473231341),y=o(y,v,E,g,l[u+7],22,-45705983),g=o(g,y,v,E,l[u+8],7,1770035416),E=o(E,g,y,v,l[u+9],12,-1958414417),v=o(v,E,g,y,l[u+10],17,-42063),y=o(y,v,E,g,l[u+11],22,-1990404162),g=o(g,y,v,E,l[u+12],7,1804603682),E=o(E,g,y,v,l[u+13],12,-40341101),v=o(v,E,g,y,l[u+14],17,-1502002290),y=o(y,v,E,g,l[u+15],22,1236535329),g=a(g,y,v,E,l[u+1],5,-165796510),E=a(E,g,y,v,l[u+6],9,-1069501632),v=a(v,E,g,y,l[u+11],14,643717713),y=a(y,v,E,g,l[u+0],20,-373897302),g=a(g,y,v,E,l[u+5],5,-701558691),E=a(E,g,y,v,l[u+10],9,38016083),v=a(v,E,g,y,l[u+15],14,-660478335),y=a(y,v,E,g,l[u+4],20,-405537848),g=a(g,y,v,E,l[u+9],5,568446438),E=a(E,g,y,v,l[u+14],9,-1019803690),v=a(v,E,g,y,l[u+3],14,-187363961),y=a(y,v,E,g,l[u+8],20,1163531501),g=a(g,y,v,E,l[u+13],5,-1444681467),E=a(E,g,y,v,l[u+2],9,-51403784),v=a(v,E,g,y,l[u+7],14,1735328473),y=a(y,v,E,g,l[u+12],20,-1926607734),g=s(g,y,v,E,l[u+5],4,-378558),E=s(E,g,y,v,l[u+8],11,-2022574463),v=s(v,E,g,y,l[u+11],16,1839030562),y=s(y,v,E,g,l[u+14],23,-35309556),g=s(g,y,v,E,l[u+1],4,-1530992060),E=s(E,g,y,v,l[u+4],11,1272893353),v=s(v,E,g,y,l[u+7],16,-155497632),y=s(y,v,E,g,l[u+10],23,-1094730640),g=s(g,y,v,E,l[u+13],4,681279174),E=s(E,g,y,v,l[u+0],11,-358537222),v=s(v,E,g,y,l[u+3],16,-722521979),y=s(y,v,E,g,l[u+6],23,76029189),g=s(g,y,v,E,l[u+9],4,-640364487),E=s(E,g,y,v,l[u+12],11,-421815835),v=s(v,E,g,y,l[u+15],16,530742520),y=s(y,v,E,g,l[u+2],23,-995338651),g=c(g,y,v,E,l[u+0],6,-198630844),E=c(E,g,y,v,l[u+7],10,1126891415),v=c(v,E,g,y,l[u+14],15,-1416354905),y=c(y,v,E,g,l[u+5],21,-57434055),g=c(g,y,v,E,l[u+12],6,1700485571),E=c(E,g,y,v,l[u+3],10,-1894986606),v=c(v,E,g,y,l[u+10],15,-1051523),y=c(y,v,E,g,l[u+1],21,-2054922799),g=c(g,y,v,E,l[u+8],6,1873313359),E=c(E,g,y,v,l[u+15],10,-30611744),v=c(v,E,g,y,l[u+6],15,-1560198380),y=c(y,v,E,g,l[u+13],21,1309151649),g=c(g,y,v,E,l[u+4],6,-145523070),E=c(E,g,y,v,l[u+11],10,-1120210379),v=c(v,E,g,y,l[u+2],15,718787259),y=c(y,v,E,g,l[u+9],21,-343485551),g=n(g,d),y=n(y,f),v=n(v,p),E=n(E,m);return r(g)+r(y)+r(v)+r(E)}var qFe=1,ZE=console,ii=class{static setLogger(e){ZE=e}constructor(e){cr(this,"lockingPromise",he.resolve()),cr(this,"locks",0),cr(this,"name",""),cr(this,"lockId",void 0),this.lockId=qFe++,e&&(this.name=e),ZE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,ZE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof e=="string"?e:""));let r=new he(i=>{t=()=>{this.locks-=1,ZE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof e=="string"?e:"")),i()}}),n=this.lockingPromise.then(()=>t);return this.lockingPromise=this.lockingPromise.then(()=>r),n}};function am(e,t){return function(r,n,i){let o=i.value;if(typeof o!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){let a=this[t];if(!a)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));let s=await a.lock("From ".concat(e,".").concat(n));try{for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return await o.apply(this,l)}finally{s()}},i}}var Kr={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function SL(e,t){let r=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,r)}function nc(e,t,r,n){let i=Object.assign({},Kr,n),o=i.timeout,a=async()=>{await function(l){return new he(u=>{window.setTimeout(u,l)})}(o),o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o)},s=!1,c=new he(async(l,u)=>{t=t||(()=>!1),r=r||(()=>!0);for(let d=0;d<i.maxRetryCount;d+=1){if(s)return u(new J(O.OPERATION_ABORTED));try{let f=await e();if(!t(f,d)||d+1===i.maxRetryCount)return l(f);await a()}catch(f){if(!r(f,d)||d+1===i.maxRetryCount)return u(f);await a()}}});return c.cancel=()=>s=!0,c}var Fee=class{constructor(e){cr(this,"input",[]),cr(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return this.input.length===0?0:Js(e=this.input).call(e,(t,r)=>t+r)/this.input.length}},e_,t_=0,hx=0;function ck(e,t,r,n){return new he((i,o)=>{t.responseType=t.responseType||"json",t.data&&!r?(t.data=JSON.stringify(t.data),t_+=Ic(t.data)):r&&(t.data.size?t_+=t.data.size:t.data instanceof FormData?t_+=jee(t.data):t_+=Ic(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,Zi.request(t).then(a=>{typeof a.data=="string"?hx+=Ic(a.data):a.data instanceof ArrayBuffer||a.data instanceof Uint8Array?hx+=a.data.byteLength:hx+=Ic(JSON.stringify(a.data)),i(a.data)}).catch(a=>{Zi.isCancel(a)?o(new J(O.OPERATION_ABORTED,"cancel token canceled")):a.code==="ECONNABORTED"?o(new J(O.NETWORK_TIMEOUT,a.message)):a.response?o(new J(O.NETWORK_RESPONSE_ERROR,a.response.status)):o(new J(O.NETWORK_ERROR,a.message))})})}async function YFe(e,t){let r=new Blob([t.data],{type:"buffer"});return await ck(e,we(we({},t),{},{data:r,headers:{"Content-Type":"application/octet-stream"}}),!0)}var $B=()=>window.isSecureContext!==void 0,Ra=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;let t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){let n=t[1],i=t[2];return"".concat(n,".").concat(i)}let r=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(r&&r[1]&&r[2]){let n=r[1],i=r[2];return"".concat(n,".").concat(100*(Number(i)+1))}return"4.0.0.999"}("4.22.0"),TL=function(){try{return JSON.parse("true")===!0}catch{return!0}}(),kd=function(e){return e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn",e}({}),CL={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},RL="v4.22.0-0-g8569241d-dirty(8/15/2024, 7:04:06 PM)",Lr=we(we({PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:CL,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,CUSTOM_ADAPTATION_DEFAULT_MODE:"",ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,ENABLE_PRELOAD:!0},{ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,USE_PUB_RTX:!0,USE_SUB_RTX:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_DATASTREAM_2:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,USE_XR:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,ENABLE_PREALLOC_PC:!1,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC:!1,ENABLE_SVC_DEFAULT_CODECS:["H264","VP8","VP9","AV1"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:2,ENABLE_PRE_SUB:!1,ENABLE_AUT_FEEDBACK:!1}),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1});function Gt(e,t,r){var n,i,o;me(n=Object.keys(Lr)).call(n,e)&&(!r&&me(i=Object.keys(Su)).call(i,e)||(Lr[e]=t,e==="ENABLE_VIDEO_SEI"&&t===!0&&(Lr.ENABLE_ENCODED_TRANSFORM=!0),e==="USE_NEW_NETWORK_CONFIG"&&t&&(o=!!t,Lr.USE_NEW_NETWORK_CONFIG=o,o&&(Lr.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],Lr.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],Lr.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],Lr.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],Lr.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",Lr.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",Lr.GATEWAY_DOMAINS=["edge.sd-rtn.com"])),e==="ENABLE_PRE_SUB"&&t&&(Lr.ENABLE_INSTANT_VIDEO=!0,Lr.ENABLE_PREALLOC_PC=!0),e==="ENABLE_SVC"&&t&&(Lr.ENABLE_AUT_CC=!0)))}function L(e){return Lr[e]}var Su={},ft=function(e){return e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",e}(ft||{}),XFe=class{constructor(e,t,r,n){cr(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:r,clientId:n,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useP2P:!1,p2pTransport:kd.Default}}dispatch(e){this.state=function(t,r){switch(r.type){case ft.SET_SESSION_ID:return we(we({},t),{},{sessionId:r.sessionId});case ft.SET_P2P_ID:return we(we({},t),{},{p2pId:r.p2pId});case ft.SET_UID:return we(we({},t),{},{uid:r.uid});case ft.SET_INT_UID:return we(we({},t),{},{intUid:r.intUid});case ft.SET_PUB_ID:return we(we({},t),{},{pubId:r.pubId});case ft.KEY_METRIC_CLIENT_CREATED:return we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{clientCreated:r.metric})});case ft.KEY_METRIC_JOIN_START:return we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{joinStart:r.metric})});case ft.AVOID_JOIN_START:return we(we({},t),{},{avoidJoinStart:r.avoidJoinStart});case ft.KEY_METRIC_JOIN_END:return we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{joinEnd:r.metric})});case ft.KEY_METRIC_REQUEST_AP_START:return we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{requestAPStart:r.metric})});case ft.KEY_METRIC_REQUEST_AP_END:return we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{requestAPEnd:r.metric})});case ft.KEY_METRIC_JOIN_GATEWAY_START:return we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{joinGatewayStart:r.metric})});case ft.KEY_METRIC_JOIN_GATEWAY_END:return we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{joinGatewayEnd:r.metric})});case ft.KEY_METRIC_PEER_CONNECTION_START:return we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{peerConnectionStart:r.metric})});case ft.KEY_METRIC_PEER_CONNECTION_END:return we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{peerConnectionEnd:r.metric})});case ft.KEY_METRIC_DESCRIPTION_START:return we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{descriptionStart:r.metric})});case ft.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{signalChannelOpen:r.metric})});case ft.KEY_METRIC_ICE_CONNECTION_END:return we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{iceConnectionEnd:r.metric})});case ft.KEY_METRIC_PUBLISH:{let n=t.keyMetrics.publish,i=n.findIndex(o=>o.trackId===r.metric.trackId);return i!==-1?(n[i]=we(we({},n[i]),r.metric),we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{publish:[...n]})})):we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{publish:[...t.keyMetrics.publish,r.metric]})})}case ft.KEY_METRIC_SUBSCRIBE:{let n=t.keyMetrics.subscribe,i=n.findIndex(o=>o.userId===r.metric.userId&&o.type===r.metric.type);return i!==-1?(n[i]=we(we({},n[i]),r.metric),we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{subscribe:[...n]})})):we(we({},t),{},{keyMetrics:we(we({},t.keyMetrics),{},{subscribe:[...t.keyMetrics.subscribe,r.metric]})})}case ft.SET_CLOUD_PROXY_SERVER_MODE:return t.cloudProxyServerMode=r.mode,t;case ft.RECORD_JOIN_CHANNEL_SERVICE:return typeof r.index!="number"?t.joinChannelServiceRecords=[...t.joinChannelServiceRecords,r.record]:(t.joinChannelServiceRecords[r.index]=we(we({},t.joinChannelServiceRecords[r.index]),r.record),t.joinChannelServiceRecords=[...t.joinChannelServiceRecords]),t;case ft.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return t.joinChannelServiceRecords=[],t;case ft.RESET_KEY_METRICS:return t.keyMetrics={publish:[],subscribe:[]},t;case ft.SET_USE_P2P:return we(we({},t),{},{useP2P:r.val});case ft.SET_TRANSPORT_TYPE:return we(we({},t),{},{p2pTransport:r.val});default:return t}}(this.state,e)}set sessionId(e){this.dispatch({type:ft.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:ft.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:ft.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:ft.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:ft.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:ft.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:ft.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(e){this.dispatch({type:ft.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:ft.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:ft.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:ft.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:ft.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:ft.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:ft.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:ft.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:ft.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:ft.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:ft.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:ft.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:ft.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:ft.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,r,n){this.dispatch({type:ft.KEY_METRIC_PUBLISH,metric:we(we({trackId:e,type:t},r&&{publishStart:r}),n&&{publishEnd:n})})}subscribe(e,t,r,n,i,o,a){this.dispatch({type:ft.KEY_METRIC_SUBSCRIBE,metric:we(we(we(we(we({userId:e,type:t},r&&{subscribeStart:r}),n&&{subscribeEnd:n}),i&&{firstFrame:i}),o&&{streamAdded:o}),a&&{firstDecoded:a})})}massSubscribe(e,t,r,n){e.forEach(i=>{this.dispatch({type:ft.KEY_METRIC_SUBSCRIBE,metric:we(we(we({userId:i.userId,type:i.type},t&&{subscribeStart:t}),r&&{subscribeEnd:r}),n&&{firstFrame:n})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){e.service==="gateway"&&Array.isArray(e.urls)&&(e.urls=e.urls.map(r=>r.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof t!="number"?(this.dispatch({type:ft.RECORD_JOIN_CHANNEL_SERVICE,record:we(we({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:ft.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:ft.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:ft.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:ft.AVOID_JOIN_START,avoidJoinStart:e})}},lC=function(e){return e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1",e}({});(function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"})({});var HB=128,JFe=96,zB=1e3,wf=10,QFe=0;function Dr(e,t,r){return(t=function(n){var i=function(o,a){if(typeof o!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var c=s.call(o,"string");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(n);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GB(Object(r),!0).forEach(function(n){Dr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Vee=new class extends _r{constructor(){super(...arguments),Dr(this,"currentUploadLogID",0)}reportLogUploadError(e){let{errorRange:t}=e;t[t.length-1]&&t[t.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=t[t.length-1],this.emit("REPORT_LOG_UPLOAD",e))}},ZFe=class{constructor(e){Dr(this,"logger",void 0),Dr(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}};function fx(){let e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function WB(){let e=new Date,t=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return t?(t==null?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}var ga={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},r_=Date.now(),xg=e=>{for(let t in ga)if(Object.prototype.hasOwnProperty.call(ga,t)&&ga[t]===e)return t;return"DEFAULT"},w=new class{constructor(){Dr(this,"proxyServerURL",void 0),Dr(this,"logLevel",ga.DEBUG),Dr(this,"uploadState","collecting"),Dr(this,"uploadLogWaitingList",[]),Dr(this,"uploadLogUploadingList",[]),Dr(this,"uploadErrorCount",0),Dr(this,"currentLogID",0),Dr(this,"url",void 0),Dr(this,"extLog",(e,t)=>{this.appendLogToWaitingList(e,...t)})}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[ga.DEBUG].concat(t);this.log.apply(this,n)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[ga.INFO].concat(t);this.log.apply(this,n)}warning(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[ga.WARNING].concat(t);this.log.apply(this,n)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[ga.ERROR].concat(t);this.log.apply(this,n)}upload(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[ga.DEBUG].concat(t);this.uploadLog.apply(this,n)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){Gt("UPLOAD_LOG",!0)}disableLogUpload(){Gt("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new ZFe(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(Date.now()-r_<100)return void setTimeout(()=>{this.log(...t)},Date.now()-r_);let n=Math.max(0,Math.min(4,t[0]));if(t[0]=fx()+" Agora-SDK [".concat(xg(n),"]:"),this.appendLogToWaitingList(n,...t),n<this.logLevel)return;let i=fx()+" %cAgora-SDK [".concat(xg(n),"]:"),o=[];if(!L("USE_NEW_LOG"))switch(n){case ga.DEBUG:o=[i,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,o);break;case ga.INFO:o=[i,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,o);break;case ga.WARNING:o=[i,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,o);break;case ga.ERROR:o=[i,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,o)}}uploadLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(Date.now()-r_<100)return void setTimeout(()=>{this.uploadLog(...t)},Date.now()-r_);let n=Math.max(0,Math.min(4,t[0]));t[0]=fx()+" Agora-SDK [".concat(xg(n),"]:"),this.appendLogToWaitingList(n,...t)}appendLogToWaitingList(e){if(!L("UPLOAD_LOG"))return;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Array.isArray(r[0])?r[0][0]=WB()+" Agora-SDK [".concat(xg(e),"]:"):r[0]=WB()+" Agora-SDK [".concat(xg(e),"]:");let i="";r.forEach(o=>{typeof o=="object"&&(o=JSON.stringify(o)),i+="".concat(o," ")}),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){let e=this.uploadLogUploadingList,t={sdk_version:Ra,process_id:L("PROCESS_ID"),payload:JSON.stringify(e)};return nc(async()=>{let r=await Zi.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(L("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(L("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if(r.data!=="OK"){let n=new Error("unexpected upload log response");throw n.response=r,n}},()=>(this.uploadLogUploadingList=[],!1),r=>{let n={status:-1,message:r.message,errorRange:e.map(i=>i.log_item_id)};return r.response?(n.status=r.response.status,n.data=r.response.data,n.headers=r.response.headers):r.request&&(n.status=r.request.status),Vee.reportLogUploadError(n),!0},{timeout:L("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:L("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,L("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),L("UPLOAD_LOG_INTERVAL"))}).catch(e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),L("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),L("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},KB;function eVe(e){return Nn(e.reportId,"params.reportId",0,100,!1),Nn(e.category,"params.category",0,100,!1),Nn(e.event,"params.event",0,100,!1),Nn(e.label,"params.label",0,100,!1),Wt(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(KB={}).FREE="free",KB.UPLOADING="uploading",function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}({});var tVe={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},An=function(e){return e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",e}({}),vr=function(e){return e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",e}({});(function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"})({});var rVe=function(e){return e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED",e}({}),IL=class Bee{constructor(){Dr(this,"baseInfoMap",new Map),Dr(this,"proxyServer",void 0),Dr(this,"eventUploadTimer",void 0),Dr(this,"setSessionIdTimer",void 0),Dr(this,"url",void 0),Dr(this,"backupUrl",void 0),Dr(this,"_appId",void 0),Dr(this,"keyEventUploadPendingItems",[]),Dr(this,"normalEventUploadPendingItems",[]),Dr(this,"apiInvokeUploadPendingItems",[]),Dr(this,"apiInvokeCount",0),Dr(this,"ltsList",[]),Dr(this,"lastSendNormalEventTime",Date.now()),Dr(this,"customReportCounterTimer",void 0),Dr(this,"customReportCount",0),Dr(this,"extApiInvoke",async t=>{for(let r of t){let n=it(it({},r),{},{sid:null,invokeId:++this.apiInvokeCount,tag:Cr.TRACER});this.sendApiInvoke(n)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),L("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),L("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(t){return this.baseInfoMap.get(t)}adjustSessionStartTime(t){if(!this.baseInfoMap.has(t)&&!this.baseInfoMap.get(t))return void w.error("adjust session ".concat(t," start time, sid is not exist or info is undefined"));let r=this.baseInfoMap.get(t),n=Date.now(),i=r.startTime;r.startTime=n,w.debug("rewrite session ".concat(t," startTime: ").concat(n," , ").concat(n-i,"ms")),this.baseInfoMap.set(t,r)}setAppId(t){this._appId=t}reportApiInvoke(t,r,n){r.timeout=r.timeout||6e4,r.reportResult=r.reportResult===void 0||r.reportResult;let i=Date.now();this.apiInvokeCount+=1;let o=this.apiInvokeCount,a=()=>({tag:r.tag,invokeId:o,sid:t,name:r.name,apiInvokeTime:i,options:r.options,states:r.states||null}),s=!!L("SHOW_REPORT_INVOKER_LOG");s&&w.info("".concat(r.name," start"),r.options);let c=!1;Ln(r.timeout).then(()=>{c||(this.sendApiInvoke(it(it({},a()),{},{error:O.API_INVOKE_TIMEOUT,success:!1})),w.debug("".concat(r.name," timeout")))});let l=new J(O.UNEXPECTED_ERROR,"".concat(r.name,": this api invoke is end"));return{onSuccess:u=>{let d=()=>{if(c)throw l;return c=!0,this.sendApiInvoke(it(it({},a()),{},{success:!0},r.reportResult&&{result:u})),s&&w.info("".concat(r.name," onSuccess")),u};return n?FB(d,r.name+"Success",n,()=>c=!0):d()},onError:u=>{let d=()=>{if(c)throw u;c=!0,this.sendApiInvoke(it(it({},a()),{},{success:!1,error:u})),s&&w.info("".concat(r.name," onFailure"),u.toString())};return n?FB(d,r.name+"Error",n,()=>c=!0):d()}}}sessionInit(t,r){if(this.baseInfoMap.has(t))return;let n=Date.now(),i=this.createBaseInfo(t,n);i.cname=r.cname;let o=Object.assign({},{willUploadConsoleLog:L("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:TL?"global":"oversea",areas:L("AREAS")&&L("AREAS").join(",")},r.extend),{stringUid:a,channelProfile:s,channelMode:c,isABTestSuccess:l,lsid:u,clientRole:d}=r,f=Date.now(),p=it(it({},i),{},{eventType:An.SESSION_INIT,appid:r.appid,browser:navigator.userAgent,buildFormat:r.buildFormat,build:RL,lts:f,elapse:f-n,extend:JSON.stringify(o),mode:r.mode,process:L("PROCESS_ID"),appType:L("APP_TYPE"),success:!0,version:Ra,stringUid:a,channelProfile:s,channelMode:c,isABTestSuccess:l,lsid:u,clientType:me(m=window.navigator.userAgent).call(m,"AgoraWebView")?42:20,clientRole:d,serviceId:L("PROCESS_ID"),extensionID:L("PLUGIN_INFO").join(",")||""});var m;this.send({type:vr.SESSION,data:p},!0)}joinChooseServer(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{eventType:An.JOIN_CHOOSE_SERVER,lts:o,eventElapse:r.elapse||o-r.lts,chooseServerAddr:r.csAddr,errorCode:r.ec,elapse:o-n.startTime,success:r.succ,chooseServerAddrList:JSON.stringify(r.serverList),uid:r.uid?parseInt(r.uid):null,cid:r.cid?parseInt(r.cid):null,chooseServerIp:r.csIp||"",opid:r.opid,unilbsServerIds:r.unilbsServerIds,extend:r.extend||void 0,isHttp3:r.isHttp3});this.send({type:vr.JOIN_CHOOSE_SERVER,data:a},!0)}reqUserAccount(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{eventType:An.REQ_USER_ACCOUNT,lts:o,success:r.success,serverAddress:r.serverAddr,stringUid:r.stringUid,uid:r.uid,errorCode:r.errorCode,elapse:r.elapse||o-n.startTime,eventElapse:o-r.lts,extend:JSON.stringify(r.extend)});this.send({type:vr.REQ_USER_ACCOUNT,data:a},!0)}joinGateway(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info;r.vid&&(i.vid=r.vid),i.uid=r.uid,i.cid=r.cid;let o=Date.now(),{firstSuccess:a,avoidJoinStartTime:s}=r,c=o-(a&&s?s:n.startTime),l=it(it({},i),{},{eventType:An.JOIN_GATEWAY,lts:o,gatewayAddr:r.addr,success:r.succ,errorCode:r.ec,errorMsg:r.errorMsg||"",elapse:c,eventElapse:o-r.lts,firstSuccess:a,signalChannel:r.signalChannel,preload:r.preload?1:0});r.succ&&(n.lastJoinSuccessTime=o),this.send({type:vr.JOIN_GATEWAY,data:l},!0)}joinChannelTimeout(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=Date.now(),o=it(it({},n.info),{},{lts:i,timeout:r,elapse:i-n.startTime});this.send({type:vr.JOIN_CHANNEL_TIMEOUT,data:o},!0)}publish(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{eventType:An.PUBLISH,lts:o,eventElapse:r.eventElapse,elapse:o-n.startTime,success:r.succ,errorCode:r.ec,videoName:r.videoName,audioName:r.audioName,screenName:r.screenName,screenshare:r.screenshare,audio:r.audio,video:r.video,p2pid:r.p2pid,publishRequestid:r.publishRequestid});this.send({type:vr.PUBLISH,data:a},!0)}subscribe(t,r,n){let i=this.baseInfoMap.get(t);if(!i)return;let o=i.info,a=Date.now(),s=it(it({},o),{},{eventType:An.SUBSCRIBE,lts:a,eventElapse:r.eventElapse,elapse:a-i.startTime,success:r.succ,errorCode:r.ec,video:r.video,audio:r.audio,subscribeRequestid:r.subscribeRequestid,p2pid:r.p2pid,preSsrc:r.preSsrc?1:0},n&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof r.peerid=="string"?s.peerSuid=r.peerid:s.peer=r.peerid,this.send({type:vr.SUBSCRIBE,data:s},!0)}wsCompressorInit(t){var r;let n=[...Vo(r=this.baseInfoMap).call(r)],i=n.length?n[0]:"UnableToGetSid",o=this.baseInfoMap.get(i);if(!o)return;let a=o.info,s=Date.now(),c=it(it({},a),{},{eventType:An.WS_COMPRESSOR_INIT,lts:s,eventElapse:t.eventElapse,elapse:s-o.startTime,status:t.status?1:2});this.send({type:vr.WS_COMPRESSOR_INIT,data:c},!0)}firstRemoteVideoDecode(t,r,n,i){let o=this.baseInfoMap.get(t);if(!o)return;let a=o.info,s=Date.now(),c=it(it(it({},a),i),{},{elapse:s-o.startTime,eventType:r,lts:s,firstDecodeFrame:Math.max((i.firstFrame||s)-o.startTime,0),apEnd:Math.max(i.apEnd-o.startTime,0),apStart:Math.max(i.apStart-o.startTime,0),joinGwEnd:Math.max(i.joinGwEnd-o.startTime,0),joinGwStart:Math.max(i.joinGwStart-o.startTime,0),pcEnd:Math.max(i.pcEnd-o.startTime,0),pcStart:Math.max(i.pcStart-o.startTime,0),subscriberEnd:Math.max(i.subscriberEnd-o.startTime,0),subscriberStart:Math.max(i.subscriberStart-o.startTime,0),videoAddNotify:Math.max(i.videoAddNotify-o.startTime,0)});this.send({type:n,data:c},!0)}firstRemoteFrame(t,r,n,i){let o=this.baseInfoMap.get(t);if(!o)return;let a=o.info,s=Date.now(),c=it(it(it({},a),i),{},{elapse:s-o.startTime,eventType:r,lts:s});this.send({type:n,data:c},!0)}pcStats(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it(it({},i),r),{},{vid:i.vid===void 0?0:Number(i.vid),elapse:o-n.startTime,eventType:An.PC_STATS,lts:o,preallocation:r.preallocation?1:0});this.send({type:vr.PC_STATS,data:a},!0)}updateRemoteRTPCapabilities(t,r){if(t){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it(it({},i),r),{},{vid:i.vid===void 0?0:Number(i.vid),eventType:An.UPDATE_REMOTE_RTPCAPABILITIES,lts:o});this.send({type:vr.UPDATE_REMOTE_RTPCAPABILITIES,data:a},!0)}}onGatewayStream(t,r,n,i){let o=this.baseInfoMap.get(t);if(!o)return;let a=o.info,s=Date.now(),c=it(it(it({},a),i),{},{eventType:r,lts:s});this.send({type:n,data:c},!0)}streamSwitch(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{eventType:An.STREAM_SWITCH,lts:o,isDual:r.isdual,elapse:o-n.startTime,success:r.succ});this.send({type:vr.STREAM_SWITCH,data:a},!0)}requestProxyAppCenter(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{eventType:An.REQUEST_PROXY_APPCENTER,lts:o,eventElapse:o-r.lts,elapse:o-n.startTime,APAddr:r.APAddr,workerManagerList:r.workerManagerList,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:vr.REQUEST_PROXY_APPCENTER,data:a},!0)}requestProxyWorkerManager(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{eventType:An.REQUEST_PROXY_WORKER_MANAGER,lts:o,eventElapse:o-r.lts,elapse:o-n.startTime,workerManagerAddr:r.workerManagerAddr,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:vr.REQUEST_PROXY_WORKER_MANAGER,data:a},!0)}setProxyServer(t){this.proxyServer=t,t?w.debug("reportProxyServerurl: ".concat(t)):w.debug("disable reportProxyServerurl: ".concat(t))}peerPublishStatus(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{subscribeElapse:r.subscribeElapse,peer:r.peer,peerPublishDuration:Math.max(r.audioPublishDuration,r.videoPublishDuration),audiotag:r.audioPublishDuration>0?1:-1,videotag:r.videoPublishDuration>0?1:-1,lts:o,elapse:o-n.startTime,joinChannelSuccessElapse:o-(n.lastJoinSuccessTime||o),peerPublishDurationVideo:r.videoPublishDuration,peerPublishDurationAudio:r.audioPublishDuration});this.send({type:vr.PEER_PUBLISH_STATUS,data:a},!0)}workerEvent(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now();(function(a,s,c){let l=a[s];if(!l||typeof l!="string")return[a];a[s]="";let u=Ic(JSON.stringify(a)),d=0,f=[],p=0;for(let m=0;m<l.length;m++)p+=l.charCodeAt(m)<=127?1:3,p<=c-u||(f[f.length]=we(we({},a),{},{[s]:l.substring(d,m)}),d=m,p=l.charCodeAt(m)<=127?1:3);return d!==l.length-1&&(f[f.length]=we(we({},a),{},{[s]:l.substring(d)})),f})(it(it(it({},i),r),{},{elapse:o-n.startTime,lts:o,productType:"WebRTC"}),"payload",1300).forEach(a=>this.send({type:vr.WORKER_EVENT,data:a},!0))}apworkerEvent(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it(it({},i),r),{},{elapse:o-n.startTime,lts:o});this.send({type:vr.AP_WORKER_EVENT,data:a},!0)}joinWebProxyAP(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it(it({},i),r),{},{elapse:o-n.startTime,lts:o,extend:r.extend||void 0});this.send({type:vr.JOIN_WEB_PROXY_AP,data:a},!0)}WebSocketQuit(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it(it({},i),r),{},{elapse:o-n.startTime,lts:o});this.send({type:vr.WEBSOCKET_QUIT,data:a},!0)}async sendCustomReportMessage(t,r){if(this.customReportCount+=r.length,this.customReportCount>L("CUSTOM_REPORT_LIMIT"))throw new J(O.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));let n=Date.now(),i=r.map(o=>({type:vr.USER_ANALYTICS,data:it(it({sid:t},o),{},{lts:n})}));try{L("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(i):await this.postDataToStatsCollector(i)}catch(o){throw w.error("send custom report message failed",o.toString()),new J(O.CUSTOM_REPORT_SEND_FAILED,o.message)}}sendApiInvoke(t){let r=L("NOT_REPORT_EVENT");if(t.tag&&me(r)&&me(r).call(r,t.tag))return!1;if(t.sid===null)return this.apiInvokeUploadPendingItems.push(t),!1;let n=this.baseInfoMap.get(t.sid);if(!n)return this.apiInvokeUploadPendingItems.push(t),!1;let{cname:i,uid:o,cid:a}=n.info,s;if(t.lts=t.lts||Date.now(),t.error)if(t.error instanceof J){let{code:l,message:u}=t.error;s=l||u||t.error.toString()}else s=t.error.toString();let c={invokeId:t.invokeId,sid:t.sid,cname:i,cid:a,uid:o,lts:t.lts,success:t.success,elapse:t.lts-n.startTime,execElapse:t.lts-t.apiInvokeTime,apiName:t.name,options:t.options?JSON.stringify(t.options):void 0,execStates:t.states?JSON.stringify(t.states):void 0,execResult:t.result?JSON.stringify(t.result):void 0,errorCode:t.error?s:void 0,errorMsg:t.error?JSON.stringify(t.error):void 0};return this.send({type:vr.API_INVOKE,data:c},!1),!0}appendSessionId(){Bee.__CLIENT_LIST__.forEach(t=>{if(t._sessionId){let r=this.apiInvokeUploadPendingItems.length;for(let n=0;n<r;n++){let i=this.apiInvokeUploadPendingItems.shift();i&&(i.sid=t._sessionId,this.sendApiInvoke(Object.assign({},i)))}}})}send(t,r){if(r)return this.keyEventUploadPendingItems.push(t),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(t),this.normalEventUploadPendingItems.length>L("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(t,r){let n=[],i=[];for(;t.length;){let a=t.shift();n.length<20?n.push(a):i.push(a)}t.push(...i);for(let a of[...n]){var o;this.ltsList.indexOf(a.data.lts)!==-1?(a.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(a.data.lts)):(this.ltsList.push(a.data.lts),Lv(o=this.ltsList).call(o,(s,c)=>s-c))}return r||(this.lastSendNormalEventTime=Date.now()),L("ENABLE_EVENT_REPORT")&&n.length&&(L("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((a=>s=>{L("EVENT_REPORT_RETRY")&&(r?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(a):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(a),this.normalEventUploadPendingItems.length>L("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-L("NORMAL_EVENT_QUEUE_CAPACITY")),w.warning("report: drop normal events"))))})(n)),t}async postDataToStatsCollector2(t){$r.networkState===Co.OFFLINE&&await he.race([$r.onlineWaiter,Ln(2*Kr.maxRetryTimeout)]);let r=o=>{let a=new Uint8Array;return o.forEach(s=>{let c=wL(JSON.stringify(s.data)),l=new ArrayBuffer(5),u=(f=>{let p=0;return Object.entries(vr).forEach(m=>{let[g,y]=m;y===f.type&&(p=rVe[g])}),p})(s),d=new DataView(l);d.setUint16(0,c.byteLength,!0),d.setUint8(2,255&u),d.setUint8(3,u>>>8&255),d.setUint8(4,u>>>16&255),a=PB(a,new Uint8Array(l)),a=PB(a,c)}),a},n="event",i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(L("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(n):"https://".concat(L("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(n);for(let o=0;o<2;o+=1){o===1&&(i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(L("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(n):"https://".concat(L("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(n));try{await ck(i,{timeout:1e4,data:r(t),headers:it(it({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(a){if(o===1)throw a;continue}return}}async postDataToStatsCollector(t){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:t.map(a=>JSON.stringify(a)),vid:(a=>{let s=a&&a.data.sid&&this.baseInfoMap.get(a.data.sid);return s&&s.info.vid&&+s.info.vid||0})(t[0])};$r.networkState===Co.OFFLINE&&await he.race([$r.onlineWaiter,Ln(2*Kr.maxRetryTimeout)]);let i=r?"/events/proto-raws":"/events/messages",o=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(L("EVENT_REPORT_DOMAIN"),"&p=").concat(L("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(L("EVENT_REPORT_DOMAIN"),":").concat(L("STATS_COLLECTOR_PORT")).concat(i));for(let a=0;a<2;a+=1){a===1&&(o=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(L("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(L("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(L("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(L("STATS_COLLECTOR_PORT")).concat(i)));try{r?await YFe(o,{timeout:1e4,data:n}):await ck(o,{timeout:1e4,data:n})}catch(s){if(a===1)throw s;continue}return}}createBaseInfo(t,r){let n=Object.assign({},tVe);return n.sid=t,this.baseInfoMap.set(t,{info:n,startTime:r}),n}reportResourceTiming(t,r){let n=performance.getEntriesByName(t),i=n[n.length-1];i&&this.reportApiInvoke(r,{name:"Client.resourceTiming",options:i,tag:Cr.TRACER}).onSuccess()}};function De(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(t,r,n){let i=n.value;if(typeof i=="function"){let o=e.className||t.__className__||(t.constructor.name==="AgoraRTCClient"?"Client":t.constructor.name);n.value=function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];let l=s;if(e.argsMap)try{l=e.argsMap(this,...s)}catch(d){w.warning(d),l=[]}try{JSON.stringify(l)}catch{w.warning("arguments for method ".concat(o,".").concat(String(r)," not serializable for apiInvoke.")),l=[]}let u=(e.report||Se).reportApiInvoke(this._sessionId||null,{name:"".concat(o,".").concat(String(r)),options:l,tag:Cr.TRACER,reportResult:e.reportResult},e.throttleTime);try{let d=i.apply(this,s);return d instanceof he?d.then(f=>(u.onSuccess(e.reportResult&&f),f)).catch(f=>{throw u.onError(f),f}):(u.onSuccess(e.reportResult&&d),d)}catch(d){throw u.onError(d),d}}}return n}}Dr(IL,"__CLIENT_LIST__",[]);var Se=new IL;Vee.on("REPORT_LOG_UPLOAD",e=>{e.networkState=$r.networkState,Se.reportApiInvoke(null,{name:"logUploadError",options:e,tag:Cr.TRACER}).onSuccess("logUploadError")});var nVe=["CHINA","GLOBAL"],$n=function(){let e="us".concat("erna","me"),t="pa".concat("sswo","rd"),r=["t","s","t"];r.splice(1,0,"e");let n=r.join(""),i=[];for(let s=0;s<6;s++)i.push("1");let o=i.join(""),a={};return a[e]=n,a[t]=o,Object.assign(a,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=$n,TL||(Lr.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Lr.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Lr.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Lr.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Lr.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Lr.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Lr.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Lr.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Lr.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Lr.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Lr.AREAS=["NORTH_AMERICA","OVERSEA"]);var $ee=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],hu=[];function _d(e,t){return!!t&&hu.some(r=>r.uid===e&&r.channelName===t)}IL.__CLIENT_LIST__=hu;var iVe=MZ.forEach,qB=zT("forEach")?[].forEach:function(e){return iVe(this,e,arguments.length>1?arguments[1]:void 0)};tr({target:"Array",proto:!0,forced:[].forEach!=qB},{forEach:qB});var oVe=Cs("Array").forEach,aVe=Gc,sVe=si,cVe=Hi,lVe=oVe,px=Array.prototype,uVe={DOMTokenList:!0,NodeList:!0},dVe=function(e){var t=e.forEach;return e===px||cVe(px,e)&&t===px.forEach||sVe(uVe,aVe(e))?lVe:t},hVe=jr(dVe),fVe=zc,YB=qT;tr({target:"Object",stat:!0,forced:tn(function(){YB(1)})},{keys:function(e){return YB(fVe(e))}});var Hee=jr(rc.Object.keys),pVe=jr(K1),mVe=tr,gVe=Mv,yVe=Yr([].reverse),XB=[1,2];mVe({target:"Array",proto:!0,forced:String(XB)===String(XB.reverse())},{reverse:function(){return gVe(this)&&(this.length=this.length),yVe(this)}});var vVe=Cs("Array").reverse,EVe=Hi,_Ve=vVe,mx=Array.prototype,bVe=function(e){var t=e.reverse;return e===mx||EVe(mx,e)&&t===mx.reverse?_Ve:t},zee=bVe,wVe=jr(zee),SVe=tr,JB=Mv,TVe=JT,CVe=ca,QB=B2,RVe=jl,IVe=cd,xVe=eC,AVe=Gr,NVe=eL,OVe=kZ("slice"),kVe=AVe("species"),gx=Array,PVe=Math.max;SVe({target:"Array",proto:!0,forced:!OVe},{slice:function(e,t){var r,n,i,o=IVe(this),a=RVe(o),s=QB(e,a),c=QB(t===void 0?a:t,a);if(JB(o)&&(r=o.constructor,(TVe(r)&&(r===gx||JB(r.prototype))||CVe(r)&&(r=r[kVe])===null)&&(r=void 0),r===gx||r===void 0))return NVe(o,s,c);for(n=new(r===void 0?gx:r)(PVe(c-s,0)),i=0;s<c;s++,i++)s in o&&xVe(n,i,o[s]);return n.length=i,n}});var DVe=Cs("Array").slice,LVe=Hi,MVe=DVe,yx=Array.prototype,jVe=function(e){var t=e.slice;return e===yx||LVe(yx,e)&&t===yx.slice?MVe:t},UVe=jr(jVe);function _e(e,t,r,n,i){var o,a,s,c={};return hVe(o=Hee(n)).call(o,function(l){c[l]=n[l]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=pVe(a=wVe(s=UVe(r).call(r)).call(s)).call(a,function(l,u){return u(e,t,l)||l},c),i&&c.initializer!==void 0&&(c.value=c.initializer?c.initializer.call(i):void 0,c.initializer=void 0),c.initializer===void 0&&(NZ(e,t,c),c=null),c}var lk=function(e){return e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L1T3_KEY="L1T3_KEY",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY",e}({}),Do=function(e){return e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver",e}({}),fb=function(e){return e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",e}({}),vx=function(e){return e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR",e}({}),qa=function(e){return e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",e}({}),Ni=function(e){return e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",e}({}),Pe=function(e){return e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",e}({}),Zt=function(e){return e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed",e}({}),$e=function(e){return e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.PRE_CONNECT_PC="pre_connect_pc",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",e}({}),Fe=function(e){return e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag",e}({}),O0=function(e){return e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats",e}({}),pt=function(e){return e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list",e}({}),Mi=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({}),We=function(e){return e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",e}({}),q=class extends J{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",arguments.length>2?arguments[2]:void 0),I(this,"name","AgoraRTCException")}print(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return super.print(e,w)}throw(){super.throw(w)}};function uC(e){if(typeof e!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw w.error("Invalid Channel Name ".concat(e)),new q(O.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function dC(e){if(!function(t){return typeof t=="number"&&Math.floor(t)===t&&0<=t&&t<=4294967295}(e)&&!kee(e,1,255))throw new q(O.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");typeof e=="string"&&w.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}var yl=function(e){return e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e}({}),FVe={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},Ex={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function _x(e,t){Nn(e.url,"".concat(t,".url"),1,1e3,!1),gr(e.x)||Wt(e.x,"".concat(t,".x"),0,1e4),gr(e.y)||Wt(e.y,"".concat(t,".y"),0,1e4),gr(e.width)||Wt(e.width,"".concat(t,".width"),0,1e4),gr(e.height)||Wt(e.height,"".concat(t,".height"),0,1e4),gr(e.zOrder)||Wt(e.zOrder,"".concat(t,".zOrder"),0,255),gr(e.alpha)||Wt(e.alpha,"".concat(t,".alpha"),0,1,!1)}var VVe={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},fu=function(e){return e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address",e}({}),uk=function(e){return e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",e}({}),Jr=function(e){return e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",e}({});function ZB(e){if(!e.channelName)throw new q(O.INVALID_PARAMS,"invalid channelName in info");if(typeof e.uid!="number")throw new q(O.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&Nn(e.token,"info.token",1,2047),dC(e.uid),uC(e.channelName),!0}var Oi=function(e){return e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile",e}({}),rl=function(e){return e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",e}({}),ao=function(e){return e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",e}({}),Mf=function(e){return e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",e}({}),Lt=function(e){return e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low",e}({}),Bn=function(e){return e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.PRE_CONNECT_PC="pre-connect_pc",e}({}),pb=function(e){return e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON",e}({}),hn=function(e){return e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7",e}({}),xt=function(e){return e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS",e}({}),e6=[xt.AFRICA,xt.ASIA,xt.CHINA,xt.EUROPE,xt.GLOBAL,xt.INDIA,xt.JAPAN,xt.NORTH_AMERICA,xt.OCEANIA,xt.OVERSEA,xt.SOUTH_AMERICA],Qn=function(e){return e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL",e}({}),hC={CHINA:{},ASIA:{CODE:Qn.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Qn.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Qn.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Qn.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Qn.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Qn.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Qn.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Qn.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Qn.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Qn.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Qn.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Qn.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Qn.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};TL&&(hC.CHINA={CODE:Qn.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});var dk=function(e){return e.UPDATE_BITRATE_LIMIT="update_bitrate_limit",e}({}),Gee=class extends _r{constructor(e,t){super(),I(this,"onICEConnectionStateChange",void 0),I(this,"onConnectionStateChange",void 0),I(this,"onDTLSTransportStateChange",void 0),I(this,"onDTLSTransportError",void 0),I(this,"onICETransportStateChange",void 0),I(this,"onFirstAudioReceived",void 0),I(this,"onFirstVideoReceived",void 0),I(this,"onFirstAudioDecoded",void 0),I(this,"onFirstVideoDecoded",void 0),I(this,"onFirstVideoDecodedTimeout",void 0),I(this,"onSelectedLocalCandidateChanged",void 0),I(this,"onSelectedRemoteCandidateChanged",void 0),I(this,"getLocalVideoStats",void 0)}},Wee=class extends Gee{constructor(e,t){super(e,t),I(this,"establishPromise",void 0)}},Ce=function(e){return e.VIDEO="video",e.AUDIO="audio",e}({}),Ro=function(e){return e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY",e}({}),Qc=function(e){return e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",e}({}),oe=function(e){return e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack",e}({}),Dt=function(e){return e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected",e}({}),Le=function(e){return e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE",e}({}),ts=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),Ya=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),_n=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),Kee=function(e){return e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback",e.PRE_CONNECT_PC="transmitter:pre_connect_pc",e}({}),Sc=function(e){return e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation",e}({}),pa=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),Ls=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),Sf=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),Pr=function(e){return e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check",e}({}),Tf=function(e){return e.ABORT="abort",e}({}),Tu=function(e){return e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e}({}),BVe=function(e){return e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed",e}({}),$Ve={[fb.ACCESS_POINT]:{[Ni.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Ni.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Ni.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Ni.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[Ni.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[Ni.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Ni.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Ni.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[Ni.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Ni.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Ni.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Ni.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Ni.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Ni.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Ni.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Ni.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Ni.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Ni.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[fb.UNILBS]:{[qa.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[qa.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[qa.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[qa.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[qa.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[qa.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[qa.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[qa.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[qa.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[qa.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[qa.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[qa.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[fb.STRING_UID_ALLOCATOR]:{[vx.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[vx.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[vx.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function sm(e){let t=$Ve[Math.floor(e/1e4)];if(!t)return{desc:"unknown error",retry:!1};let r=t[e%1e4];if(!r){if(Math.floor(e/1e4)===fb.ACCESS_POINT){let n=e%1e4;if(n.toString()[0]==="1")return{desc:e.toString(),retry:!1};if(n.toString()[0]==="2")return{desc:e.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return r}var HVe={[Pe.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Pe.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Pe.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Pe.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Pe.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Pe.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Pe.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Pe.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Pe.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Pe.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Pe.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Pe.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[Pe.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Pe.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Pe.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Pe.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Pe.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Pe.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Pe.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Pe.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Pe.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Pe.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Pe.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Pe.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Pe.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Pe.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Pe.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Pe.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Pe.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Pe.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Pe.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Pe.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Pe.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Pe.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Pe.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Pe.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Pe.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Pe.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Pe.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Pe.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Pe.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Pe.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Pe.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Pe.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Pe.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Pe.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Pe.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Pe.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Pe.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Pe.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Pe.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Pe.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Pe.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Pe.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Pe.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Pe.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Pe.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[Pe.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[Pe.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[Pe.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[Pe.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[Pe.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[Pe.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function k0(e){return HVe[e]||{desc:"UNKNOWN_ERROR_".concat(e),action:"failed"}}function t6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t6(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r6(e){return e.every(t=>t.readyState===WebSocket.CLOSED||t.readyState===WebSocket.CLOSING)}function n6(e,t){if(typeof e=="string")return e;let{proxy:r,host:n,port:i}=e;if(t){let o=L("JOIN_GATEWAY_FALLBACK_PORT")||443;return o===443?"wss://".concat(n,"/ws/?p=").concat(Number(i)+150):"wss://".concat(n,":").concat(o,"/ws/?p=").concat(Number(i)+150)}return r?"wss://".concat(r,"/ws/?h=").concat(n,"&p=").concat(i):"wss://".concat(n,":").concat(i)}var zVe=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,GVe=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,WVe=/wss:\/\/(.+):([0-9]+)\/?/,KVe=/wss:\/\/(.[^\/]+)\/?/,qVe=0,YVe=class{constructor(e,t){I(this,"id",0),I(this,"store",void 0),I(this,"recordIndex",void 0),I(this,"websockets",[]),I(this,"try443PortDuration",2e3),I(this,"forceCloseWSDuration",5e3),I(this,"try443PortTimeout",null),I(this,"forceCloseTimeout",null),I(this,"isTry443PortFailed",!1),I(this,"isNormalPortFailed",!1),I(this,"useDoubleDomain",!1),I(this,"useProxy",!1),I(this,"startTime",Date.now()),this.id=++qVe,this.try443PortDuration=L("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach(e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()}),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var e;let t=Date.now()-this.startTime;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];w.debug("[choose-best-ws ".concat((e=this.store)===null||e===void 0?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:"),...n)}createWebSocket(e,t,r){this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:r});let n=L("GATEWAY_DOMAINS"),i=Date.now(),o=[],a=n.find(l=>{var u;return me(u=e.host).call(u,l)});a||(this.useDoubleDomain=!1);let s=[];if(this.useDoubleDomain)n.forEach(l=>{s.push(n6(bx(bx({},e),{},{host:e.host.replace(a,l)}),t))});else{let l=bx({},e);if(t&&a){let u=n.find(d=>d!==a);u&&(l.host=l.host.replace(a,u))}s.push(n6(l,t))}try{s.forEach(l=>{let u=new WebSocket(l);u.binaryType="arraybuffer",o.push(u),this.logger("ws is connecting:",u.url)})}catch(l){if(this.logger("ws create failed"),o.forEach(u=>u.close()),o.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,r);if(!t&&Number(e.port)!==443)return this.createWebSocket(e,!0,r);throw new q(O.WS_ERR,"init websocket failed! Error: ".concat(l.toString()))}let c=x0();return this.store&&this.store.recordJoinChannelService({urls:o.map(l=>l.url),service:"gateway"},this.recordIndex),o.forEach(l=>{l.onopen=()=>{this.logger("onopen: ws ".concat(l.url," open cost ").concat(Date.now()-i,"ms")),this.websockets.forEach(u=>{u!==l&&(u.onopen=null,u.onclose=null,u.onmessage=null,u.close(),this.logger("close backup websocket: ".concat(u.url)))}),this.websockets.length=0,c.resolve(l)},l.onclose=u=>{this.logger("onclose: ws ".concat(l.url," closed cost ").concat(Date.now()-i,"ms state: ").concat(l.readyState)),t?this.isTry443PortFailed=r6(o):this.isNormalPortFailed=r6(o),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),(t&&this.isTry443PortFailed||!t&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(u.reason)),c.reject({code:u.code,reason:pb.A_ROUND_WS_FAILED}))},l.onmessage=u=>this.logger("".concat(l.url," onmessage: ").concat(u.data))}),this.websockets.push(...o),r||(()=>{let l=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",c.isResolved),this.websockets.forEach(u=>u.readyState!==WebSocket.OPEN&&u.close())};if(t||this.useProxy)return this.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(l,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout(()=>{if(this.logger("2s timeout, isWebsocket created: ",c.isResolved),c.isResolved)return l();St().os===mn.MAC_OS&&Rr()&&l(),this.createWebSocket(e,!0,!0).then(u=>c.resolve(u)).catch(u=>{this.isNormalPortFailed&&c.reject(u),this.logger("try 443 port to create ws failed")}),this.forceCloseTimeout=window.setTimeout(l,this.forceCloseWSDuration)},this.try443PortDuration)})(),c.promise}chooseBestWebsocket(e,t,r,n){return this.useDoubleDomain=!!t,typeof e=="string"&&(e=function(i){let o,a,s;return[,o,a,s]=i.match(zVe)||[],o||([,a,s]=i.match(GVe)||[]),a&&s||([,a,s]=i.match(WVe)||[]),a&&s||([,a]=i.match(KVe)||[]),a||w.warning("un-destructible url: ",i),{proxy:o,host:a,port:s||"443"}}(e)),this.recordIndex=n,this.useProxy=!!e.proxy,r&&this.useProxy&&(w.warn("cannot use 443 only when use proxy"),r=!1),this.createWebSocket(e,!!r,!1).finally(()=>this.clearTimeout())}};function i6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var qee=class extends _r{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;me(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,this._state==="reconnecting"?this.emit(We.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(We.CONNECTED):this._state==="closed"?this.emit(We.CLOSED):this._state==="failed"&&this.emit(We.FAILED))}resetReconnectCount(e){w.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],n=arguments.length>3&&arguments[3]!==void 0&&arguments[3],i=arguments.length>4&&arguments[4]!==void 0&&arguments[4],o=arguments.length>5?arguments[5]:void 0;super(),I(this,"connectionID",0),I(this,"currentURLIndex",0),I(this,"urls",[]),I(this,"_reconnectMode","tryNext"),I(this,"reconnectReason",void 0),I(this,"_initMutex",new ii("websocket")),I(this,"name",void 0),I(this,"_state","closed"),I(this,"reconnectInterrupter",void 0),I(this,"websocket",void 0),I(this,"retryConfig",void 0),I(this,"reconnectCount",0),I(this,"forceCloseTimeout",5e3),I(this,"onlineReconnectListener",void 0),I(this,"useCompress",void 0),I(this,"tryDoubleDomain",!1),I(this,"use443PortOnly",!1),I(this,"wsInflateLength",0),I(this,"wsDeflateLength",0),I(this,"closeEstablishingWs",()=>{}),I(this,"store",void 0),I(this,"joinGatewayRecordIndex",void 0),this.store=o,this.name=e,this.retryConfig=function(u){for(var d=1;d<arguments.length;d++){var f=arguments[d]!=null?arguments[d]:{};d%2?i6(Object(f),!0).forEach(function(p){I(u,p,f[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):i6(Object(f)).forEach(function(p){Object.defineProperty(u,p,Object.getOwnPropertyDescriptor(f,p))})}return u}({},t),this.useCompress=r,this.tryDoubleDomain=n,this.use443PortOnly=i;let{timeout:a,timeoutFactor:s}=t,c=Math.max(300,Math.floor(3*a/5)),l=Math.max(1.2,Math.floor(8*s)/10);Co.ONLINE&&(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l),$r.on(cp.NETWORK_STATE_CHANGE,(u,d)=>{u!==d&&(this.resetReconnectCount("network state change: ".concat(d," -> ").concat(u)),u===Co.ONLINE?(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l):(this.retryConfig.timeout=a,this.retryConfig.timeoutFactor=s))})}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,r=await this._initMutex.lock();this.forceCloseTimeout=t,this.urls=e,this.state="connecting";try{let n=x0(),i=this.urls[this.currentURLIndex];L("ENABLE_PREALLOC_PC")&&this.emit(Kee.PRE_CONNECT_PC),this.createWebSocketConnection(i).then(n.resolve).catch(n.reject),this.once(We.CLOSED,()=>{n.reject(new J(O.WS_DISCONNECT))}),this.once(We.CONNECTED,n.resolve),await n.promise}catch{}finally{r()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;let r=this.websocket;t?setTimeout(()=>r.close(),500):r.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void w.warning("[".concat(this.name,"] can not reconnect, no websocket"));e!==void 0&&(this.reconnectMode=e),w.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinGatewayRecordIndex=="number"&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);let r=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),r&&r.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new J(O.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(r){throw new J(O.WS_ERR,"send websocket message error"+r.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){let e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;let r=x0();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;let n=l=>{var u;(u=this.store)===null||u===void 0||u.signalChannelOpen(),w.debug("[".concat(this.name,"] websocket opened:"),l),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),r.resolve()},i=async l=>{var u;if(w.debug("[".concat(this.name,"] websocket close ").concat((u=this.websocket)===null||u===void 0?void 0:u.url,", code: ").concat(l.code,", reason: ").concat(l.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)r.reject(new J(O.WS_DISCONNECT,"websocket close: ".concat(l.code))),this.close();else{this.state==="connected"&&(this.reconnectReason=l.reason,this.state="reconnecting");let d=Ca(this,We.WILL_RECONNECT,this.reconnectMode,l.reason)||this.reconnectMode,f=await this.reconnectWithAction(d);if(this.state==="closed")return void w.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!f)return r.reject(new J(O.WS_DISCONNECT,"websocket reconnect failed: ".concat(l.code))),this.close(!0);r.resolve()}},o=l=>{this.emit(We.ON_MESSAGE,l)},a=l=>{w.warn("[".concat(this.connectionID,"] ws open error ").concat(l))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),L("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=L("GATEWAY_WSS_ADDRESS")),w.debug("[".concat(this.name,"] start connect, url:"),e);let s=(t=this.store)===null||t===void 0?void 0:t.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var c;let l=await this.chooseBestWebsocketConnection(e);this.websocket=l,n&&n(this.websocket.url),this.websocket.onclose=i,this.websocket.onmessage=o,this.websocket.onerror=a,(c=this.store)===null||c===void 0||c.recordJoinChannelService({endTs:Date.now(),status:"success"},s),this.joinGatewayRecordIndex=s}catch(l){let u=this.state==="closed",d=l instanceof J,f=d&&l.code===O.WS_ABORT,p=d&&l.code===O.WS_ERR,m=d?l.message:l&&(l.reason||l.toString());w.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(m)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:f?"aborted":"error",errors:[l]},s),u||p?(r.reject(u?new J(O.WS_DISCONNECT,"websocket is closed: ".concat(m)):new J(O.WS_ERR,"init websocket failed: ".concat(m))),p&&w.error("[".concat(this.name,"] init websocket failed: ").concat(m))):i&&i(l)}return r.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||this.urls.length===0||this.state==="closed")return!1;w.warning("[choose-best-ws] action: =>",e),this.onlineReconnectListener||$r.isOnline||!$r.onlineWaiter||(this.onlineReconnectListener=$r.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let r=!0;if(this.reconnectInterrupter=()=>r=!1,t){let o=SL(this.reconnectCount,this.retryConfig);w.debug("[".concat(this.name,"] wait ").concat(o,"ms to reconnect websocket, mode: ").concat(e)),await he.race([Ln(o),this.onlineReconnectListener||new he(()=>{})])}if(this._state==="closed"||!r)return!1;this.reconnectCount+=1;let n=async(o,a)=>{this.emit(We.RECONNECT_CREATE_CONNECTION,a),await this.createWebSocketConnection(o)};try{if(e==="retry")this.emit(We.RECONNECT_WAITTING_FINISH,e),await n(this.urls[this.currentURLIndex],e);else if(e==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);w.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit(We.RECONNECT_WAITTING_FINISH,e),await n(this.urls[this.currentURLIndex],e)}else e==="recover"&&(w.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(We.RECONNECT_WAITTING_FINISH,e),this.urls=await Kn(this,We.REQUEST_NEW_URLS),this.currentURLIndex=0,await n(this.urls[this.currentURLIndex],e))}catch(o){var i;w.error("[".concat(this.name,"] reconnect failed ").concat(o&&o.toString()));let a=o==null||(i=o.data)===null||i===void 0?void 0:i.desc;return Array.isArray(a)&&me(a).call(a,"dynamic key expired")?(this.emit(We.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}},xL=class extends qee{constructor(e,t){super(e,t,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){let r=x0(),n=function(o,a){return new YVe(o,a)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{w.debug("[choose-best-ws] close establishing websockets"),n.closeAllWebsockets(),r.reject(new J(O.WS_ABORT,"choose best websocket aborted"))};let i=L("GATEWAY_DOMAINS");return w.debug("[choose-best-ws] currentDomain: ",e,", domains: ",i,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),n.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(r.resolve).catch(r.reject),r.promise.finally(()=>{this.closeEstablishingWs=void 0})}},P0=class extends qee{constructor(e,t){super(e,t,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new he((r,n)=>{let i=!1,o=[];this.closeEstablishingWs=()=>{w.debug("[choose-best-ws] close establishing websockets"),o.forEach(p=>{p.onclose=null,p.onopen=null,p.onmessage=null,p.close()}),n(new J(O.WS_ABORT,"choose best websocket aborted"))};let a=L("GATEWAY_DOMAINS"),s,c=e.indexOf("?h="),l=a.find(p=>c!==-1?me(e).call(e,p,c):me(e).call(e,p));w.debug("[choose-best-ws] currentDomain: ",l,", domains: ",a);let u=!this.tryDoubleDomain||!l;if(!u&&l){var d;let p=Date.now();try{a.forEach(m=>{let g=c===-1?e.replace(l,m):e.substr(0,c)+e.substr(c).replace(l,m),y=new WebSocket(g);y.binaryType="arraybuffer",o.push(y),w.debug("[choose-best-ws] ws is connecting:",y.url)})}catch{for(w.debug("[choose-best-ws] ws create failed, fallback to single url"),o.forEach(m=>m.close());o.length;)o.pop();u=!0}(d=this.store)===null||d===void 0||d.recordJoinChannelService({urls:o.map(m=>m.url),service:"gateway"},t),o.forEach(m=>{m.onopen=()=>{if(i)return;let g=Date.now()-p;w.debug("[choose-best-ws] ws open cost ".concat(g,"ms")),o.filter(y=>y!==m).forEach(y=>{w.debug("[choose-best-ws]close backup websocket: ".concat(y.url)),y.close()}),i=!0,r(m)},m.onclose=g=>{s=g,!i&&(o.find(y=>!(y.readyState===WebSocket.CLOSED||y.readyState===WebSocket.CLOSING))||(w.debug("[choose-best-ws] all websocket is closed"),i=!0,n(s)))},m.onmessage=g=>{w.debug("[choose-best-ws]".concat(m.url," onmessage: ").concat(g.data))}}),Ln(this.forceCloseTimeout).then(()=>{o.forEach(m=>{m.readyState!==WebSocket.OPEN&&m.close()})})}if(u){var f;let p;w.debug("[choose-best-ws] use single url: ",e),(f=this.store)===null||f===void 0||f.recordJoinChannelService({urls:[e],service:"gateway"},t);try{p=new WebSocket(e),o.push(p),p.binaryType="arraybuffer"}catch(m){let g=new J(O.WS_ERR,"init websocket failed! Error: ".concat(m.toString()));return w.error("[".concat(this.name,"]").concat(g)),void n(g)}p.onopen=()=>{r(p)},p.onclose=m=>{n(m)},p.onmessage=m=>{w.debug("[choose-best-ws]".concat(p.url," onmessage: ").concat(m.data))},Ln(this.forceCloseTimeout).then(()=>{p&&p.readyState!==WebSocket.OPEN&&p.close()})}}).then(r=>(this.closeEstablishingWs=void 0,r)).catch(r=>{throw this.closeEstablishingWs=void 0,r})}},XVe=class extends _r{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===Zt.CONNECTED?this.emit($e.WS_CONNECTED):e===Zt.RECONNECTING?this.emit($e.WS_RECONNECTING,this._websocketReconnectReason):e===Zt.CLOSED&&this.emit($e.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),I(this,"_disconnectedReason",void 0),I(this,"_websocketReconnectReason",void 0),I(this,"_connectionState",Zt.CLOSED),I(this,"reconnectToken",void 0),I(this,"websocket",void 0),I(this,"openConnectionTime",void 0),I(this,"clientId",void 0),I(this,"lastMsgTime",Date.now()),I(this,"uploadCache",[]),I(this,"uploadCacheInterval",void 0),I(this,"rttRolling",new Fee(5)),I(this,"pingpongTimer",void 0),I(this,"wsInflateDataTimer",void 0),I(this,"pingpongTimeoutCount",0),I(this,"joinResponse",void 0),I(this,"multiIpOption",void 0),I(this,"initError",void 0),I(this,"spec",void 0),I(this,"store",void 0),I(this,"onWebsocketMessage",r=>{if(r.data instanceof ArrayBuffer)return void this.emit($e.ON_BINARY_DATA,r.data);let n=JSON.parse(r.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(n,"_id")){let i="res-@".concat(n._id);this.emit(i,n._result,n._message)}else if(Object.prototype.hasOwnProperty.call(n,"_type")){if(this.emit(n._type,n._message),n._type===pt.ON_NOTIFICATION&&this.handleNotification(n._message),n._type===pt.ON_USER_BANNED)switch(n._message.error_code){case 14:this.close(Bt.UID_BANNED);break;case 15:this.close(Bt.IP_BANNED);break;case 16:this.close(Bt.CHANNEL_BANNED)}if(n._type===pt.ON_USER_LICENSE_BANNED)switch(n._message.error_code){case Pe.ERR_LICENSE_MISSING:this.close(Bt.LICENSE_MISSING);break;case Pe.ERR_LICENSE_EXPIRED:this.close(Bt.LICENSE_EXPIRED);break;case Pe.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Bt.LICENSE_MINUTES_EXCEEDED);break;case Pe.ERR_LICENSE_PERIOD_INVALID:this.close(Bt.LICENSE_PERIOD_INVALID);break;case Pe.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Bt.LICENSE_MULTIPLE_SDK_SERVICE);break;case Pe.ERR_LICENSE_ILLEGAL:this.close(Bt.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new xL("gateway-".concat(this.clientId),this.spec.retryConfig,!0,L("JOIN_GATEWAY_USE_DUAL_DOMAIN"),L("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Zt.CONNECTED&&this.reconnect("retry",Gn.OFFLINE)})}async request(e,t,r,n){let i=er(6,""),o={_id:i,_type:e,_message:t},a=this.websocket.connectionID,s=()=>new he((p,m)=>{if(this.connectionState===Zt.CONNECTED)return p();let g=()=>{this.off($e.WS_CLOSED,y),p()},y=()=>{this.off($e.WS_CONNECTED,g),m(new q(O.WS_ABORT))};this.once($e.WS_CONNECTED,g),this.once($e.WS_CLOSED,y),e!==Fe.PUBLISH&&e!==Fe.PUBLISH_DATASTREAM&&e!==Fe.SUBSCRIBE&&e!==Fe.SUBSCRIBE_DATASTREAM&&e!==Fe.UNSUBSCRIBE&&e!==Fe.UNSUBSCRIBE_DATASTREAM&&e!==Fe.UNPUBLISH&&e!==Fe.UNPUBLISH_DATASTREAM&&e!==Fe.CONTROL&&e!==Fe.RESTART_ICE||this.once($e.DISCONNECT_P2P,()=>{m(new q(O.DISCONNECT_P2P))}),e!==Fe.PUBLISH&&e!==Fe.RESTART_ICE||this.once($e.ABORT_P2P_EXECUTION,()=>{m(new q(O.DISCONNECT_P2P))})});if(this.connectionState!==Zt.CONNECTING&&this.connectionState!==Zt.RECONNECTING||e===Fe.JOIN||e===Fe.REJOIN||await s(),this.websocket.sendMessage(o,!0),n)return;let c=new he((p,m)=>{let g=!1,y=(E,b)=>{g=!0,p({isSuccess:E==="success",message:b||{}}),this.off($e.WS_CLOSED,v),this.off($e.WS_RECONNECTING,v),this.emit($e.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),y);let v=()=>{m(new q(O.WS_ABORT,"type: ".concat(e))),this.off($e.WS_CLOSED,v),this.off($e.WS_RECONNECTING,v),this.off("res-@".concat(i),y)};this.once($e.WS_CLOSED,v),this.once($e.WS_RECONNECTING,v),Ln(L("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==a||g||(w.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit($e.REQUEST_TIMEOUT,e,t))})}),l=null;try{l=await c}catch(p){if(this.connectionState===Zt.CLOSED||e===Fe.LEAVE)throw new q(O.WS_ABORT);return!this.spec.forceWaitGatewayResponse||r?p.throw():e===Fe.JOIN||e===Fe.REJOIN?null:(await s(),await this.request(e,t))}if(l.isSuccess)return l.message;let u=Number(l.message.error_code||l.message.code),d=k0(u),f=new q(O.UNEXPECTED_RESPONSE,"".concat(d.desc,": ").concat(l.message.error_str),{code:u,data:l.message,desc:d.desc});return d.action==="success"?l.message:(w.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(d.desc,", action: ").concat(d.action)),u===Pe.ERR_TOO_MANY_BROADCASTERS?((e===Fe.JOIN||e===Fe.REJOIN)&&(this.initError=f,this.close()),f.throw()):d.action==="failed"?f.throw():d.action==="quit"?(this.initError=f,this.close(),f.throw()):(u===Pe.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,w.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Gn.MULTI_IP)):this.reconnect(d.action,Gn.SERVER_ERROR),e===Fe.JOIN||e===Fe.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new he(r=>{let n=i=>{(!t||t(i))&&(this.off(e,n),r(i))};this.on(e,n)})}uploadWRTCStats(e){if(!this.store.sessionId)return void w.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));let t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(O0.WRTC_STATS,t)}upload(e,t){let r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch{let n=L("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>n&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Zt.CONNECTED)return;let i=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(i._type,i._message)},L("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){let r={_type:e,_message:t};this.websocket.sendMessage(r)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new he((r,n)=>{this.once($e.WS_CONNECTED,()=>r(this.joinResponse)),this.once($e.WS_CLOSED,()=>n(this.initError||new q(O.WS_ABORT))),this.connectionState=Zt.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||Bt.LEAVE,this.connectionState=Zt.CLOSED,w.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit($e.ABORT_P2P_EXECUTION);let e=await Kn(this,$e.REQUEST_JOIN_INFO),t=await this.request(Fe.JOIN,e);if(!t)return this.emit($e.REPORT_JOIN_GATEWAY,pb.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit($e.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new q(O.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");let e=N0(this,$e.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;let t=await this.request(Fe.REJOIN,e);return!!t&&(this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach(r=>{this.emit(pt.ON_USER_ONLINE,{uid:r.uid}),r.audio&&this.emit(pt.ON_ADD_AUDIO_STREAM,{uid:r.uid,uint_id:r.uint_id,audio:!0,ssrcId:r.audio_ssrc}),r.video&&this.emit(pt.ON_ADD_VIDEO_STREAM,{uid:r.uid,uint_id:r.uint_id,video:!0,ssrcId:r.video_ssrc}),r.audio_mute?this.emit(pt.MUTE_AUDIO,{uid:r.uid}):this.emit(pt.UNMUTE_AUDIO,{uid:r.uid}),r.video_mute?this.emit(pt.MUTE_VIDEO,{uid:r.uid}):this.emit(pt.UNMUTE_VIDEO,{uid:r.uid}),r.audio_enable_local?this.emit(pt.ENABLE_LOCAL_AUDIO,{uid:r.uid}):this.emit(pt.DISABLE_LOCAL_AUDIO,{uid:r.uid}),r.video_enable_local?this.emit(pt.ENABLE_LOCAL_VIDEO,{uid:r.uid}):this.emit(pt.DISABLE_LOCAL_VIDEO,{uid:r.uid}),r.audio||r.video||this.emit(pt.ON_REMOVE_STREAM,{uid:r.uid,uint_id:r.uint_id})}),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){w.debug("[".concat(this.clientId,"] receive notification: "),e);let t=k0(e.code);if(t.action!=="success"){if(t.action!=="failed")return t.action==="quit"?(t.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Bt.UID_BANNED),void this.close()):void this.reconnect(t.action,Gn.SERVER_ERROR);w.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;let e=L("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(w.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>L("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Gn.TIMEOUT):this.request(Fe.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;let r=Date.now()-t;this.rttRolling.add(r),L("REPORT_STATS")&&this.send(Fe.PING_BACK,{pingpongElapse:r})}).catch(r=>{})}handleWsInflateData(){let{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();e!==0&&t!==0&&this.upload(O0.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(We.RECONNECT_WAITTING_FINISH,e=>{this.emit($e.WS_RECONNECT_WAITTING_FINISH,e)}),this.websocket.on(We.RECONNECT_CREATE_CONNECTION,e=>{this.emit($e.WS_RECONNECT_CREATE_CONNECTION,e)}),this.websocket.on(We.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(We.CLOSED,()=>{this.connectionState=Zt.CLOSED}),this.websocket.on(We.FAILED,()=>{this._disconnectedReason=Bt.NETWORK_ERROR,this.connectionState=Zt.CLOSED}),this.websocket.on(We.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===Zt.CONNECTED?this.connectionState=Zt.RECONNECTING:this.connectionState=Zt.CONNECTING}),this.websocket.on(We.WILL_RECONNECT,(e,t,r)=>{let n=N0(this,$e.IS_P2P_DISCONNECTED),i=n||e!=="retry";n&&e==="retry"&&(w.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e="tryNext",t=pb.P2P_DISCONNECTED),i&&(w.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(e)),this.emit($e.REPORT_JOIN_GATEWAY,t||pb.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit($e.DISCONNECT_P2P)),r(e)}),this.websocket.on(We.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(e=>{w.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",Gn.SERVER_ERROR)}):this.join().catch(e=>{if(this.emit($e.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof q){if(e.code===O.UNEXPECTED_RESPONSE&&e.data.code===Pe.ERR_NO_AUTHORIZED)return this.initError=new q(O.CAN_NOT_GET_GATEWAY_SERVER,"AgoraRTCError CAN_NOT_GET_GATEWAY_SERVER: dynamic key expired"),w.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Gn.SERVER_ERROR);w.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Gn.SERVER_ERROR):(this.initError=e,this.close())}})}),this.websocket.on(We.REQUEST_NEW_URLS,(e,t)=>{Kn(this,$e.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)}),this.websocket.on(We.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(pt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(Kee.PRE_CONNECT_PC,()=>{this.emit($e.PRE_CONNECT_PC)})}},Br=function(e){return e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",e}({});function o6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function n_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o6(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dp(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(L("TURN_DOMAIN")):(w.info("Unidentified as ip: ".concat(e,", use as host")),e)}function AL(e,t){e.addresses||(e.addresses=[]);let r=function(s,c){if(L("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return s.map(d=>{let{ip:f,port:p}=d;return{address:"".concat(f,":").concat(p)}});let l=L("GATEWAY_DOMAINS"),u=l[1]&&me(c).call(c,l[1])?1:0;return s.map(d=>{let{domain_prefix:f,port:p,ip:m}=d;if(f)return{address:"".concat(f,".").concat(l[u++%l.length],":").concat(p)};let g=/^[\.\:\d]+$/.test(m),y=g?"".concat(m.replace(/[^\d]/g,"-"),".").concat(l[u++%l.length],":").concat(p):"".concat(m,":").concat(p);return g||w.info("Unidentified as ip: ".concat(m,", use as host")),{ip:m,port:p,address:y}})}(e.addresses,t),n=Array.isArray(e.detail)&&e.detail[18];if(n&&typeof n=="string"){let s=n.split(";");for(let c=0;c<s.length;c++){var i;let l=Ci(i=s[c]).call(i);r[c]&&l&&(r[c].ip6=l)}}let o=e.detail&&e.detail.candidate,a;if(o){let[s,c]=o.split(":");s&&c&&(a={port:Number(c),ip:s,address:"".concat(s,":").concat(c)})}return{gatewayAddrs:r,apGatewayAddress:a,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function Io(e){return typeof e=="number"?e:e.exact||e.ideal||e.max||e.min||0}function a6(e){let t=e._encoderConfig;if(!t)return{};let r={resolution:t.width&&t.height?"".concat(Io(t.width),"x").concat(Io(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return typeof t.frameRate=="number"?(r.maxFrameRate=t.frameRate,r.minFrameRate=t.frameRate):t.frameRate&&(r.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,r.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),r}function s6(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function D0(e,t){let r,n,i;switch(t){case Br.CHOOSE_SERVER:n=4096,i="choose server";break;case Br.CLOUD_PROXY:n=1048576,i="proxy";break;case Br.CLOUD_PROXY_5:n=4194304,i="proxy5";break;case Br.CLOUD_PROXY_FALLBACK:n=4194310,i="proxy fallback";break;default:throw new q(O.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach(o=>{o.buffer&&o.buffer.flag===n&&(r={code:o.buffer.code,addresses:(o.buffer.edges_services||[]).map(a=>n_(n_({},a),{},{ticket:o.buffer.cert})),server_ts:e.enter_ts,uid:o.buffer.uid,cid:o.buffer.cid,cname:o.buffer.cname,detail:n_(n_({},o.buffer.detail),e.detail),flag:o.buffer.flag,opid:e.opid,cert:o.buffer.cert})}),!r)throw new q(O.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return r}async function Yee(e,t){return await he.all(e.addresses.map(async r=>({address:dp(r.ip),tcpport:r.port,udpport:r.port,username:t&&L("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():$n.username,password:t&&L("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await ak(t.toString()):$n.password})))}function hk(e,t){let r=t.getMediaStreamTrack(!0).getSettings(),n=t.videoHeight||r.height,i=t.videoWidth||r.width;return n&&i?Math.max(Math.min(n,i)/Math.min(Io(e.height),Io(e.width)),1):(w.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function Cu(e){let{candidateType:t,relayProtocol:r,type:n,address:i,port:o,protocol:a}=e;return n==="local-candidate"?{candidateType:t,relayProtocol:r,protocol:a}:{candidateType:t,relayProtocol:r,address:i,port:o,protocol:a}}var Xa,JVe=jr(zee),QVe=Cs("Array").values,ZVe=Gc,eBe=si,tBe=Hi,rBe=QVe,wx=Array.prototype,nBe={DOMTokenList:!0,NodeList:!0},iBe=function(e){var t=e.values;return e===wx||tBe(wx,e)&&t===wx.values||eBe(nBe,ZVe(e))?rBe:t},Sl=jr(iBe),c6=Ba,oBe=Yr,aBe=Jn,sBe=tn,Sx=qT,cBe=Nv,lBe=VT,uBe=zc,dBe=BT,Cf=Object.assign,l6=Object.defineProperty,hBe=oBe([].concat),fBe=!Cf||sBe(function(){if(c6&&Cf({b:1},Cf(l6({},"a",{enumerable:!0,get:function(){l6(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(i){t[i]=i}),Cf({},e)[r]!=7||Sx(Cf({},t)).join("")!=n})?function(e,t){for(var r=uBe(e),n=arguments.length,i=1,o=cBe.f,a=lBe.f;n>i;)for(var s,c=dBe(arguments[i++]),l=o?hBe(Sx(c),o(c)):Sx(c),u=l.length,d=0;u>d;)s=l[d++],c6&&!aBe(a,c,s)||(r[s]=c[s]);return r}:Cf,pBe=yo,mBe=oQ,gBe=ld,yBe=Jn,vBe=zc,EBe=function(e,t,r,n){try{return n?t(pBe(r)[0],r[1]):t(r)}catch(i){mBe(e,"throw",i)}},_Be=iQ,bBe=JT,wBe=jl,u6=eC,SBe=q2,TBe=YT,d6=Array,Qh=Yr,Tx=2147483647,CBe=/[^\0-\u007E]/,Xee=/[.\u3002\uFF0E\uFF61]/g,h6="Overflow: input needs wider integers to process",f6=RangeError,RBe=Qh(Xee.exec),hp=Math.floor,Cx=String.fromCharCode,p6=Qh("".charCodeAt),Jee=Qh([].join),iu=Qh([].push),IBe=Qh("".replace),xBe=Qh("".split),ABe=Qh("".toLowerCase),m6=function(e){return e+22+75*(e<26)},NBe=function(e,t,r){var n=0;for(e=r?hp(e/700):e>>1,e+=hp(e/t);e>455;)e=hp(e/35),n+=36;return hp(n+36*e/(e+38))},OBe=function(e){var t=[];e=function(v){for(var E=[],b=0,S=v.length;b<S;){var A=p6(v,b++);if(A>=55296&&A<=56319&&b<S){var N=p6(v,b++);(64512&N)==56320?iu(E,((1023&A)<<10)+(1023&N)+65536):(iu(E,A),b--)}else iu(E,A)}return E}(e);var r,n,i=e.length,o=128,a=0,s=72;for(r=0;r<e.length;r++)(n=e[r])<128&&iu(t,Cx(n));var c=t.length,l=c;for(c&&iu(t,"-");l<i;){var u=Tx;for(r=0;r<e.length;r++)(n=e[r])>=o&&n<u&&(u=n);var d=l+1;if(u-o>hp((Tx-a)/d))throw f6(h6);for(a+=(u-o)*d,o=u,r=0;r<e.length;r++){if((n=e[r])<o&&++a>Tx)throw f6(h6);if(n==o){for(var f=a,p=36;;){var m=p<=s?1:p>=s+26?26:p-s;if(f<m)break;var g=f-m,y=36-m;iu(t,Cx(m6(m+g%y))),f=hp(g/y),p+=36}iu(t,Cx(m6(f))),s=NBe(a,d,l==c),a=0,l++}}a++,o++}return Jee(t,"")},kBe=tr,NL=Ba,PBe=mL,OL=Yn,g6=ld,Rs=Yr,i_=dd,Ja=XT,DBe=J2,fk=si,kL=fBe,Rf=function(e){var t=vBe(e),r=bBe(this),n=arguments.length,i=n>1?arguments[1]:void 0,o=i!==void 0;o&&(i=gBe(i,n>2?arguments[2]:void 0));var a,s,c,l,u,d,f=TBe(t),p=0;if(!f||this===d6&&_Be(f))for(a=wBe(t),s=r?new this(a):d6(a);a>p;p++)d=o?i(t[p],p):t[p],u6(s,p,d);else for(u=(l=SBe(t,f)).next,s=r?new this:[];!(c=yBe(u,l)).done;p++)d=o?EBe(l,i,[c.value,p],!0):c.value,u6(s,p,d);return s.length=p,s},Ns=aL,LBe=oL.codeAt,MBe=function(e){var t,r,n=[],i=xBe(IBe(ABe(e),Xee,"."),".");for(t=0;t<i.length;t++)r=i[t],iu(n,RBe(CBe,r)?"xn--"+OBe(r):r);return Jee(n,".")},nl=$a,jBe=hd,UBe=QT,Qee=tFe,Zee=Jh,FBe=Zee.set,rS=Zee.getterFor("URL"),VBe=Qee.URLSearchParams,BBe=Qee.getState,Ag=OL.URL,pk=OL.TypeError,o_=OL.parseInt,$Be=Math.floor,y6=Math.pow,os=Rs("".charAt),Ds=Rs(/./.exec),Yg=Rs([].join),HBe=Rs(1 .toString),zBe=Rs([].pop),If=Rs([].push),Rx=Rs("".replace),GBe=Rs([].shift),WBe=Rs("".split),Xg=Rs("".slice),mb=Rs("".toLowerCase),KBe=Rs([].unshift),Ix="Invalid scheme",Ng="Invalid host",v6="Invalid port",ete=/[a-z]/i,qBe=/[\d+-.a-z]/i,xx=/\d/,YBe=/^0x/i,XBe=/^[0-7]+$/,JBe=/^\d+$/,E6=/^[\da-f]+$/i,QBe=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ZBe=/[\0\t\n\r #/:<>?@[\\\]^|]/,e6e=/^[\u0000-\u0020]+/,t6e=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,r6e=/[\t\n\r]/g,Og=function(e){var t,r,n,i;if(typeof e=="number"){for(t=[],r=0;r<4;r++)KBe(t,e%256),e=$Be(e/256);return Yg(t,".")}if(typeof e=="object"){for(t="",n=function(o){for(var a=null,s=1,c=null,l=0,u=0;u<8;u++)o[u]!==0?(l>s&&(a=c,s=l),c=null,l=0):(c===null&&(c=u),++l);return l>s&&(a=c,s=l),a}(e),r=0;r<8;r++)i&&e[r]===0||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=HBe(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},gb={},tte=kL({},gb,{" ":1,'"':1,"<":1,">":1,"`":1}),rte=kL({},tte,{"#":1,"?":1,"{":1,"}":1}),Ax=kL({},rte,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Xl=function(e,t){var r=LBe(e,0);return r>32&&r<127&&!fk(t,e)?e:encodeURIComponent(e)},a_={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Jg=function(e,t){var r;return e.length==2&&Ds(ete,os(e,0))&&((r=os(e,1))==":"||!t&&r=="|")},_6=function(e){var t;return e.length>1&&Jg(Xg(e,0,2))&&(e.length==2||(t=os(e,2))==="/"||t==="\\"||t==="?"||t==="#")},n6e=function(e){return e==="."||mb(e)==="%2e"},Nx={},b6={},Ox={},w6={},S6={},kx={},T6={},C6={},s_={},c_={},Px={},Dx={},Lx={},Mx={},R6={},jx={},xf={},lc={},I6={},bd={},Zc={},PL=function(e,t,r){var n,i,o,a=nl(e);if(t){if(i=this.parse(a))throw pk(i);this.searchParams=null}else{if(r!==void 0&&(n=new PL(r,!0)),i=this.parse(a,null,n))throw pk(i);(o=BBe(new VBe)).bindURL(this),this.searchParams=o}};PL.prototype={type:"URL",parse:function(e,t,r){var n,i,o,a,s,c=this,l=t||Nx,u=0,d="",f=!1,p=!1,m=!1;for(e=nl(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=Rx(e,e6e,""),e=Rx(e,t6e,"$1")),e=Rx(e,r6e,""),n=Rf(e);u<=n.length;){switch(i=n[u],l){case Nx:if(!i||!Ds(ete,i)){if(t)return Ix;l=Ox;continue}d+=mb(i),l=b6;break;case b6:if(i&&(Ds(qBe,i)||i=="+"||i=="-"||i=="."))d+=mb(i);else{if(i!=":"){if(t)return Ix;d="",l=Ox,u=0;continue}if(t&&(c.isSpecial()!=fk(a_,d)||d=="file"&&(c.includesCredentials()||c.port!==null)||c.scheme=="file"&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&a_[c.scheme]==c.port&&(c.port=null));d="",c.scheme=="file"?l=Mx:c.isSpecial()&&r&&r.scheme==c.scheme?l=w6:c.isSpecial()?l=C6:n[u+1]=="/"?(l=S6,u++):(c.cannotBeABaseURL=!0,If(c.path,""),l=I6)}break;case Ox:if(!r||r.cannotBeABaseURL&&i!="#")return Ix;if(r.cannotBeABaseURL&&i=="#"){c.scheme=r.scheme,c.path=Ns(r.path),c.query=r.query,c.fragment="",c.cannotBeABaseURL=!0,l=Zc;break}l=r.scheme=="file"?Mx:kx;continue;case w6:if(i!="/"||n[u+1]!="/"){l=kx;continue}l=s_,u++;break;case S6:if(i=="/"){l=c_;break}l=lc;continue;case kx:if(c.scheme=r.scheme,i==Xa)c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=Ns(r.path),c.query=r.query;else if(i=="/"||i=="\\"&&c.isSpecial())l=T6;else if(i=="?")c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=Ns(r.path),c.query="",l=bd;else{if(i!="#"){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=Ns(r.path),c.path.length--,l=lc;continue}c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=Ns(r.path),c.query=r.query,c.fragment="",l=Zc}break;case T6:if(!c.isSpecial()||i!="/"&&i!="\\"){if(i!="/"){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,l=lc;continue}l=c_}else l=s_;break;case C6:if(l=s_,i!="/"||os(d,u+1)!="/")continue;u++;break;case s_:if(i!="/"&&i!="\\"){l=c_;continue}break;case c_:if(i=="@"){f&&(d="%40"+d),f=!0,o=Rf(d);for(var g=0;g<o.length;g++){var y=o[g];if(y!=":"||m){var v=Xl(y,Ax);m?c.password+=v:c.username+=v}else m=!0}d=""}else if(i==Xa||i=="/"||i=="?"||i=="#"||i=="\\"&&c.isSpecial()){if(f&&d=="")return"Invalid authority";u-=Rf(d).length+1,d="",l=Px}else d+=i;break;case Px:case Dx:if(t&&c.scheme=="file"){l=jx;continue}if(i!=":"||p){if(i==Xa||i=="/"||i=="?"||i=="#"||i=="\\"&&c.isSpecial()){if(c.isSpecial()&&d=="")return Ng;if(t&&d==""&&(c.includesCredentials()||c.port!==null))return;if(a=c.parseHost(d))return a;if(d="",l=xf,t)return;continue}i=="["?p=!0:i=="]"&&(p=!1),d+=i}else{if(d=="")return Ng;if(a=c.parseHost(d))return a;if(d="",l=Lx,t==Dx)return}break;case Lx:if(!Ds(xx,i)){if(i==Xa||i=="/"||i=="?"||i=="#"||i=="\\"&&c.isSpecial()||t){if(d!=""){var E=o_(d,10);if(E>65535)return v6;c.port=c.isSpecial()&&E===a_[c.scheme]?null:E,d=""}if(t)return;l=xf;continue}return v6}d+=i;break;case Mx:if(c.scheme="file",i=="/"||i=="\\")l=R6;else{if(!r||r.scheme!="file"){l=lc;continue}if(i==Xa)c.host=r.host,c.path=Ns(r.path),c.query=r.query;else if(i=="?")c.host=r.host,c.path=Ns(r.path),c.query="",l=bd;else{if(i!="#"){_6(Yg(Ns(n,u),""))||(c.host=r.host,c.path=Ns(r.path),c.shortenPath()),l=lc;continue}c.host=r.host,c.path=Ns(r.path),c.query=r.query,c.fragment="",l=Zc}}break;case R6:if(i=="/"||i=="\\"){l=jx;break}r&&r.scheme=="file"&&!_6(Yg(Ns(n,u),""))&&(Jg(r.path[0],!0)?If(c.path,r.path[0]):c.host=r.host),l=lc;continue;case jx:if(i==Xa||i=="/"||i=="\\"||i=="?"||i=="#"){if(!t&&Jg(d))l=lc;else if(d==""){if(c.host="",t)return;l=xf}else{if(a=c.parseHost(d))return a;if(c.host=="localhost"&&(c.host=""),t)return;d="",l=xf}continue}d+=i;break;case xf:if(c.isSpecial()){if(l=lc,i!="/"&&i!="\\")continue}else if(t||i!="?")if(t||i!="#"){if(i!=Xa&&(l=lc,i!="/"))continue}else c.fragment="",l=Zc;else c.query="",l=bd;break;case lc:if(i==Xa||i=="/"||i=="\\"&&c.isSpecial()||!t&&(i=="?"||i=="#")){if((s=mb(s=d))===".."||s==="%2e."||s===".%2e"||s==="%2e%2e"?(c.shortenPath(),i=="/"||i=="\\"&&c.isSpecial()||If(c.path,"")):n6e(d)?i=="/"||i=="\\"&&c.isSpecial()||If(c.path,""):(c.scheme=="file"&&!c.path.length&&Jg(d)&&(c.host&&(c.host=""),d=os(d,0)+":"),If(c.path,d)),d="",c.scheme=="file"&&(i==Xa||i=="?"||i=="#"))for(;c.path.length>1&&c.path[0]==="";)GBe(c.path);i=="?"?(c.query="",l=bd):i=="#"&&(c.fragment="",l=Zc)}else d+=Xl(i,rte);break;case I6:i=="?"?(c.query="",l=bd):i=="#"?(c.fragment="",l=Zc):i!=Xa&&(c.path[0]+=Xl(i,gb));break;case bd:t||i!="#"?i!=Xa&&(i=="'"&&c.isSpecial()?c.query+="%27":c.query+=i=="#"?"%23":Xl(i,gb)):(c.fragment="",l=Zc);break;case Zc:i!=Xa&&(c.fragment+=Xl(i,tte))}u++}},parseHost:function(e){var t,r,n;if(os(e,0)=="["){if(os(e,e.length-1)!="]"||(t=function(i){var o,a,s,c,l,u,d,f=[0,0,0,0,0,0,0,0],p=0,m=null,g=0,y=function(){return os(i,g)};if(y()==":"){if(os(i,1)!=":")return;g+=2,m=++p}for(;y();){if(p==8)return;if(y()!=":"){for(o=a=0;a<4&&Ds(E6,y());)o=16*o+o_(y(),16),g++,a++;if(y()=="."){if(a==0||(g-=a,p>6))return;for(s=0;y();){if(c=null,s>0){if(!(y()=="."&&s<4))return;g++}if(!Ds(xx,y()))return;for(;Ds(xx,y());){if(l=o_(y(),10),c===null)c=l;else{if(c==0)return;c=10*c+l}if(c>255)return;g++}f[p]=256*f[p]+c,++s!=2&&s!=4||p++}if(s!=4)return;break}if(y()==":"){if(g++,!y())return}else if(y())return;f[p++]=o}else{if(m!==null)return;g++,m=++p}}if(m!==null)for(u=p-m,p=7;p!=0&&u>0;)d=f[p],f[p--]=f[m+u-1],f[m+--u]=d;else if(p!=8)return;return f}(Xg(e,1,-1)),!t))return Ng;this.host=t}else if(this.isSpecial()){if(e=MBe(e),Ds(QBe,e)||(t=function(i){var o,a,s,c,l,u,d,f=WBe(i,".");if(f.length&&f[f.length-1]==""&&f.length--,(o=f.length)>4)return i;for(a=[],s=0;s<o;s++){if((c=f[s])=="")return i;if(l=10,c.length>1&&os(c,0)=="0"&&(l=Ds(YBe,c)?16:8,c=Xg(c,l==8?1:2)),c==="")u=0;else{if(!Ds(l==10?JBe:l==8?XBe:E6,c))return i;u=o_(c,l)}If(a,u)}for(s=0;s<o;s++)if(u=a[s],s==o-1){if(u>=y6(256,5-o))return null}else if(u>255)return null;for(d=zBe(a),s=0;s<a.length;s++)d+=a[s]*y6(256,3-s);return d}(e),t===null))return Ng;this.host=t}else{if(Ds(ZBe,e))return Ng;for(t="",r=Rf(e),n=0;n<r.length;n++)t+=Xl(r[n],gb);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return fk(a_,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||this.scheme=="file"&&t==1&&Jg(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,l=t+":";return i!==null?(l+="//",e.includesCredentials()&&(l+=r+(n?":"+n:"")+"@"),l+=Og(i),o!==null&&(l+=":"+o)):t=="file"&&(l+="//"),l+=e.cannotBeABaseURL?a[0]:a.length?"/"+Yg(a,"/"):"",s!==null&&(l+="?"+s),c!==null&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw pk(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e=="blob")try{return new cm(e.path[0]).origin}catch{return"null"}return e!="file"&&this.isSpecial()?e+"://"+Og(this.host)+(t!==null?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(nl(e)+":",Nx)},getUsername:function(){return this.username},setUsername:function(e){var t=Rf(nl(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Xl(t[r],Ax)}},getPassword:function(){return this.password},setPassword:function(e){var t=Rf(nl(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Xl(t[r],Ax)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?Og(e):Og(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Px)},getHostname:function(){var e=this.host;return e===null?"":Og(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Dx)},getPort:function(){var e=this.port;return e===null?"":nl(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||((e=nl(e))==""?this.port=null:this.parse(e,Lx))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Yg(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,xf))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){(e=nl(e))==""?this.query=null:(os(e,0)=="?"&&(e=Xg(e,1)),this.query="",this.parse(e,bd)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){(e=nl(e))!=""?(os(e,0)=="#"&&(e=Xg(e,1)),this.fragment="",this.parse(e,Zc)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var cm=function(e){var t=DBe(this,bo),r=UBe(arguments.length,1)>1?arguments[1]:void 0,n=FBe(t,new PL(e,!1,r));NL||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},bo=cm.prototype,Qa=function(e,t){return{get:function(){return rS(this)[e]()},set:t&&function(r){return rS(this)[t](r)},configurable:!0,enumerable:!0}};NL&&(Ja(bo,"href",Qa("serialize","setHref")),Ja(bo,"origin",Qa("getOrigin")),Ja(bo,"protocol",Qa("getProtocol","setProtocol")),Ja(bo,"username",Qa("getUsername","setUsername")),Ja(bo,"password",Qa("getPassword","setPassword")),Ja(bo,"host",Qa("getHost","setHost")),Ja(bo,"hostname",Qa("getHostname","setHostname")),Ja(bo,"port",Qa("getPort","setPort")),Ja(bo,"pathname",Qa("getPathname","setPathname")),Ja(bo,"search",Qa("getSearch","setSearch")),Ja(bo,"searchParams",Qa("getSearchParams")),Ja(bo,"hash",Qa("getHash","setHash"))),i_(bo,"toJSON",function(){return rS(this).serialize()},{enumerable:!0}),i_(bo,"toString",function(){return rS(this).serialize()},{enumerable:!0}),Ag&&(Ux=Ag.createObjectURL,Fx=Ag.revokeObjectURL,Ux&&i_(cm,"createObjectURL",g6(Ux,Ag)),Fx&&i_(cm,"revokeObjectURL",g6(Fx,Ag)));var Ux,Fx;jBe(cm,"URL"),kBe({global:!0,constructor:!0,forced:!PBe,sham:!NL},{URL:cm});var i6e=tr,o6e=tn,a6e=QT,x6=$a,s6e=mL,A6=ko("URL");i6e({target:"URL",stat:!0,forced:!(s6e&&o6e(function(){A6.canParse()}))},{canParse:function(e){var t=a6e(arguments.length,1),r=x6(e),n=t<2||arguments[1]===void 0?void 0:x6(arguments[1]);try{return!!new A6(r,n)}catch{return!1}}});var N6=jr(rc.URL),xn={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function Ct(){return xn}function nte(){return"setSinkId"in HTMLAudioElement.prototype&&(!L("RESTRICTION_SET_PLAYBACK_DEVICE")||(Fu()||Cee())&&!bL())}function O6(){return!xn.supportUnifiedPlan||L("CHROME_FORCE_PLAN_B")&&Qu()}var kn=function(e){return e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change",e}({});function Af(e,t,r){return{sampleRate:e,stereo:t,bitrate:r}}function _t(e,t,r,n,i){return{width:e,height:t,frameRate:r,bitrateMin:n,bitrateMax:i}}function Za(e,t,r,n,i){return{width:{max:e},height:{max:t},frameRate:r,bitrateMin:n,bitrateMax:i}}function Vx(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}var c6e={"90p":_t(160,90),"90p_1":_t(160,90),"120p":_t(160,120,15,30,65),"120p_1":_t(160,120,15,30,65),"120p_3":_t(120,120,15,30,50),"120p_4":_t(212,120),"180p":_t(320,180,15,30,140),"180p_1":_t(320,180,15,30,140),"180p_3":_t(180,180,15,30,100),"180p_4":_t(240,180,15,30,120),"240p":_t(320,240,15,40,200),"240p_1":_t(320,240,15,40,200),"240p_3":_t(240,240,15,40,140),"240p_4":_t(424,240,15,40,220),"360p":_t(640,360,15,80,400),"360p_1":_t(640,360,15,80,400),"360p_3":_t(360,360,15,80,260),"360p_4":_t(640,360,30,80,600),"360p_6":_t(360,360,30,80,400),"360p_7":_t(480,360,15,80,320),"360p_8":_t(480,360,30,80,490),"360p_9":_t(640,360,15,80,800),"360p_10":_t(640,360,24,80,800),"360p_11":_t(640,360,24,80,1e3),"480p":_t(640,480,15,100,500),"480p_1":_t(640,480,15,100,500),"480p_2":_t(640,480,30,100,1e3),"480p_3":_t(480,480,15,100,400),"480p_4":_t(640,480,30,100,750),"480p_6":_t(480,480,30,100,600),"480p_8":_t(848,480,15,100,610),"480p_9":_t(848,480,30,100,930),"480p_10":_t(640,480,10,100,400),"720p":_t(1280,720,15,120,1130),"720p_auto":_t(1280,720,30,900,3e3),"720p_1":_t(1280,720,15,120,1130),"720p_2":_t(1280,720,30,120,2e3),"720p_3":_t(1280,720,30,120,1710),"720p_5":_t(960,720,15,120,910),"720p_6":_t(960,720,30,120,1380),"1080p":_t(1920,1080,15,120,2080),"1080p_1":_t(1920,1080,15,120,2080),"1080p_2":_t(1920,1080,30,120,3e3),"1080p_3":_t(1920,1080,30,120,3150),"1080p_5":_t(1920,1080,60,120,4780),"1440p":_t(2560,1440,30,120,4850),"1440p_1":_t(2560,1440,30,120,4850),"1440p_2":_t(2560,1440,60,120,7350),"4k":_t(3840,2160,30,120,8910),"4k_1":_t(3840,2160,30,120,8910),"4k_3":_t(3840,2160,60,120,13500)},l6e={"480p":Za(640,480,5),"480p_1":Za(640,480,5),"480p_2":Za(640,480,30),"480p_3":Za(640,480,15),"720p":Za(1280,720,5),"720p_auto":_t(1280,720,30,900,3e3),"720p_1":Za(1280,720,5),"720p_2":Za(1280,720,30),"720p_3":Za(1280,720,15),"1080p":Za(1920,1080,5),"1080p_1":Za(1920,1080,5),"1080p_2":Za(1920,1080,30),"1080p_3":Za(1920,1080,15)},u6e={"1SL1TL":Vx(1,1),"3SL3TL":Vx(3,3),"2SL3TL":Vx(2,3)};function xc(e){return e||(e="480p_1"),typeof e=="string"?Object.assign({},c6e[e]):e}function Bx(e){return typeof e=="string"?Object.assign({},l6e[e]):e}function l_(e){return typeof e=="string"?Object.assign({},u6e[e]):e}var d6e={speech_low_quality:Af(16e3,!1),speech_standard:Af(32e3,!1,18),music_standard:Af(48e3,!1),standard_stereo:Af(48e3,!0,56),high_quality:Af(48e3,!1,128),high_quality_stereo:Af(48e3,!0,192)};function nS(e){return typeof e=="string"?Object.assign({},d6e[e]):e}var jf=[];function k6(e){return on(e,"mediaSource",["screen","window","application"]),!0}var ye=function(e){return e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track",e}({}),lr=function(e){return e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream",e}({}),lm=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),h6e=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),f6e=function(e){return e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY",e}({}),uh=function(e){return e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received",e.TRACK_UPDATED="track-updated",e}({}),Gm=function(e){return e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed",e}({}),Np=function(e){return e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed",e}({}),Wm=function(e){return e.AUDIO="audio",e.VIDEO="video",e.DATA="data",e}({}),Wo=function(e){return e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source",e}({});(function(e){e.UPDATE_TRACK_SOURCE="update-track-source"})({});var mk={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},gk={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},ite={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},p6e={uplinkNetworkQuality:0,downlinkNetworkQuality:0},ote={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},Fi=function(e){return e.ON_TRACK="on_track",e.ON_NODE="on_node",e}({}),na=function(e){return e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints",e}({}),kg=function(e){return e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND",e}({}),Yd=function(e){return e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",e}({}),Si=function(e){return e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata",e}({}),uc=function(e){return e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen",e}({}),$x={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370},yb=function(e){return e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error",e}({});function bt(e,t,r,n,i){var o,a,s={};return Object.keys(n).forEach(function(c){s[c]=n[c]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=Js(o=JVe(a=r.slice()).call(a)).call(o,function(c,l){return l(e,t,c)||c},s),i&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}function Q(e,t,r){return(t=function(n){var i=function(o,a){if(typeof o!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var c=s.call(o,"string");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(n);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P6(Object(r),!0).forEach(function(n){Q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var ate=class extends _r{set _mediaStreamTrack(e){e!==this.mediaStreamTrack&&(this.safeEmit(uh.TRACK_UPDATED,e),this.mediaStreamTrack=e)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(e,t){super(),Q(this,"trackMediaType",void 0),Q(this,"_ID",void 0),Q(this,"_rtpTransceiver",void 0),Q(this,"_lowRtpTransceiver",void 0),Q(this,"_hints",[]),Q(this,"_isClosed",!1),Q(this,"_originMediaStreamTrack",void 0),Q(this,"mediaStreamTrack",void 0),Q(this,"_external",{}),this._ID=t||er(8,"track-"),this._originMediaStreamTrack=e,this.mediaStreamTrack=e,function(r){me(jf).call(jf,r)||jf.push(r)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){return e||Zu(()=>{var t;Se.reportApiInvoke(null,{name:Qr.GET_MEDIA_STREAM_TRACK,options:[],tag:Cr.TRACER}).onSuccess(((t=this._mediaStreamTrack)===null||t===void 0?void 0:t.label)||"")},this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===lm.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){let t=jf.indexOf(e);t!==-1&&jf.splice(t,1)}(this),this.emit(Gm.CLOSED),this.removeAllListeners(uh.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===lm.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(uh.TRANSCEIVER_UPDATED,e,t)}},fp=class extends ate{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),Q(this,"_enabled",!0),Q(this,"_muted",!1),Q(this,"_isExternalTrack",!1),Q(this,"_isClosed",!1),Q(this,"_enabledMutex",void 0),Q(this,"processor",void 0),Q(this,"_processorContext",void 0),Q(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new ii("".concat(this.getTrackId())),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return(e=(t=this._originMediaStreamTrack)===null||t===void 0?void 0:t.label)!==null&&e!==void 0?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,w.debug("[".concat(this.getTrackId(),"] close")),this.emit(ye.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=r,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Jt(this,ye.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){w.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Gm.TRACK_ENDED)}stateCheck(e,t){if(w.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),fl(t,e),this._enabled&&this._muted&&e==="enabled"&&t===!1)throw new J(O.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",w);if(!this._enabled&&!this._muted&&e==="muted"&&t===!0)throw new J(O.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",w)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():he.resolve([])}},D6=window.AudioContext||window.webkitAudioContext,Uo=null,Ht=new class extends _r{constructor(){super(...arguments),Q(this,"prevState",void 0),Q(this,"curState",void 0),Q(this,"currentTime",void 0),Q(this,"currentTimeStuckAt",void 0),Q(this,"interruptDetectorTrack",void 0),Q(this,"onLocalAudioTrackMute",()=>{w.info("ios15-interruption-start"),this.emit(kn.IOS_15_16_INTERRUPTION_START)}),Q(this,"onLocalAudioTrackUnmute",async()=>{w.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?w.info("ios15-interruption-end-canceled"):(Uo&&await Uo.suspend(),this.emit(kn.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(e){w.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){w.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function Km(){if(!Uo){if(function(){if(!D6)return void w.error("your browser is not support web audio");w.info("create audio context");let e=hr({},L("WEBAUDIO_INIT_OPTIONS"));w.debug("audio context init option:",JSON.stringify(e)),Uo=new D6(e),Ht.curState=Uo.state,Uo.onstatechange=()=>{Ht.prevState=Ht.curState,Ht.curState=Uo?Uo.state:void 0;let{prevState:t,curState:r}=Ht,n=r==="running",i=r==="interrupted",o=t==="running",a=t==="suspended",s=t==="interrupted",c=St().osVersion;(Ui()||gs())&&o&&i&&(w.info("ios".concat(c,"-interruption-start")),Ht.emit(kn.IOS_INTERRUPTION_START)),(Ui()||gs())&&(a||s)&&n&&(w.info("ios".concat(c,"-interruption-end")),Ht.emit(kn.IOS_INTERRUPTION_END)),t!==r&&Ht.emit(kn.STATE_CHANGE,r,t)},setInterval(()=>{var t;let r=(t=Uo)===null||t===void 0?void 0:t.currentTime;Ht.currentTime!==r?(Ht.currentTimeStuckAt&&(w.debug("AudioContext current time resume at ".concat(r)),Ht.currentTimeStuckAt=void 0),Ht.currentTime=r):(r!==Ht.currentTimeStuckAt&&(Se.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:r},tag:Cr.TRACER}).onSuccess(),w.warning("AudioContext current time stuck at ".concat(r))),Ht.currentTimeStuckAt=r)},5e3),async function(t){let r=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"],n,i=!1,o=!1,a=!1;function s(g){t.state==="running"?c(!1):Ui()||gs()?t.state==="suspended"&&(c(!0),g&&t.resume().then(l,l)):t.state!=="closed"&&(c(!0),g&&t.resume().then(l,l))}function c(g){if(i!==g){i=g;for(let y=0,v=r;y<v.length;y+=1){let E=v[y];g?window.addEventListener(E,u,{capture:!0,passive:!0}):window.removeEventListener(E,u,{capture:!0,passive:!0})}}}function l(){s(!1)}function u(){s(!0)}function d(g){if(!a)if(n.paused)if(g){let y;f(!1),a=!0;try{y=n.play(),y?y.then(p,p):(n.addEventListener("playing",p),n.addEventListener("abort",p),n.addEventListener("error",p))}catch{p()}}else f(!0);else f(!1)}function f(g){if(o!==g){o=g;for(let y=0,v=r;y<v.length;y++){let E=v[y];g?window.addEventListener(E,m,{capture:!0,passive:!0}):window.removeEventListener(E,m,{capture:!0,passive:!0})}}}function p(){n.removeEventListener("playing",p),n.removeEventListener("abort",p),n.removeEventListener("error",p),a=!1,d(!1)}function m(){d(!0)}if(Ui()){let g=t.createMediaStreamDestination(),y=document.createElement("div");y.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=y.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=g.stream,d(!0)}Ht.on(kn.STATE_CHANGE,function(){s(!0)}),s(!1)}(Uo)}(),!Uo)throw new J(O.NOT_SUPPORTED,"can not create audio context");return Uo}return Uo}function Pd(e){if(function(){if(Hx!==null)return Hx;let n=Km(),i=n.createBufferSource(),o=n.createGain(),a=n.createGain();i.connect(o),i.connect(a),i.disconnect(o);let s=!1;try{i.disconnect(o)}catch{s=!0}return i.disconnect(),Hx=s,s}())return;let t=e.connect,r=e.disconnect;e.connect=(n,i,o)=>{var a;return e._inputNodes||(e._inputNodes=[]),me(a=e._inputNodes).call(a,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,i,o)):t.call(e,n,i)),e},e.disconnect=(n,i,o)=>{r.call(e),n?tS(e._inputNodes,n):e._inputNodes=[];for(let a of e._inputNodes)t.call(e,a)}}var Hx=null;function DL(e,t){let r=!1,n=1/t;if(L("DISABLE_WEBAUDIO")){let i=window.setInterval(()=>{r?window.clearInterval(i):e(performance.now()/1e3)},1e3*n)}else{let i=Km(),o=i.createGain();o.gain.value=0,o.connect(i.destination);let a=()=>{if(r)return void(o=null);let s=i.createOscillator();s.onended=a,s.connect(o),s.start(0),s.stop(i.currentTime+n),e(i.currentTime)};a()}return()=>{r=!0}}var ste=class{constructor(){Q(this,"context",void 0),Q(this,"analyserNode",void 0),Q(this,"sourceNode",void 0),this.context=Km(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=e,e==null||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||Ui()||gs()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;let e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{let r=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(r);for(let n=0;n<e.length;++n)e[n]=r[n]/128-1}let t=Js(e).call(e,(r,n)=>r+n*n,0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;(e=this.sourceNode)===null||e===void 0||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(t=this.sourceNode)===null||t===void 0||t.connect(this.analyserNode)}catch{w.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}},cte=class extends _r{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var r;(r=this.sourceNode)===null||r===void 0||r.disconnect(this.outputNode)}catch{}(t=this._processedNode)===null||t===void 0||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),Q(this,"outputNode",void 0),Q(this,"outputTrack",void 0),Q(this,"isPlayed",!1),Q(this,"sourceNode",void 0),Q(this,"context",void 0),Q(this,"audioBufferNode",void 0),Q(this,"destNode",void 0),Q(this,"audioOutputLevel",0),Q(this,"volumeLevelAnalyser",void 0),Q(this,"_processedNode",void 0),Q(this,"playNode",void 0),Q(this,"isDestroyed",!1),Q(this,"onNoAudioInput",void 0),Q(this,"isNoAudioInput",!1),Q(this,"_noAudioInputCount",0),this.context=Km(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),Pd(this.outputNode),this.volumeLevelAnalyser=new ste}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=t=>{this.emit(Wo.ON_AUDIO_BUFFER,function(r){for(let n=0;n<r.outputBuffer.numberOfChannels;n+=1){let i=r.outputBuffer.getChannelData(n);for(let o=0;o<i.length;o+=1)i[o]=0}return r.inputBuffer}(t))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Ct().webAudioMediaStreamDest)throw new J(O.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){this.context.state!=="running"&&sC(()=>{Ht.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Ui()||gs()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();let t=this.volumeLevelAnalyser.getAnalyserNode(),r;t.getFloatTimeDomainData?(r=new Float32Array(t.fftSize),t.getFloatTimeDomainData(r)):(r=new Uint8Array(t.fftSize),t.getByteTimeDomainData(r));let n=!1;for(let i=0;i<r.length;i++)r[i]!==0&&(n=!0);return n?(this.isNoAudioInput=!1,!0):(await Ln(200),await this.checkHasAudioInput(e?e+1:1)&&n)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;(e=this.processedNode)===null||e===void 0||e.disconnect(),(t=this.sourceNode)===null||t===void 0||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?(e=this.processedNode)===null||e===void 0||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}},lte=class extends cte{get isFreeze(){return!1}constructor(e,t,r){var n;if(super(),Q(this,"sourceNode",void 0),Q(this,"track",void 0),Q(this,"clonedTrack",void 0),Q(this,"audioElement",void 0),Q(this,"isCurrentTrackCloned",!1),Q(this,"isRemoteTrack",!1),Q(this,"originVolumeLevelAnalyser",void 0),Q(this,"rebuildWebAudio",async()=>{if(w.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void w.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>w.info("resume success")),w.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();let a=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?a.stop():this.isCurrentTrackCloned=!0;let s=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(s),Pd(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();let c=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(c,this.context.currentTime),Pd(this.outputNode),this.emit(Wo.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=s,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),e.kind!=="audio")throw new J(O.UNEXPECTED_ERROR);this.track=e;let i=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(i),Pd(this.sourceNode),r){let a=r.clone();a.enabled=!0,this.clonedTrack=a,w.debug("create an unmuted track ".concat(a.id," from the original track ").concat(r.id," to get the volume"));let s=this.context.createMediaStreamSource(new MediaStream([a]));Pd(s),this.originVolumeLevelAnalyser=new ste,this.originVolumeLevelAnalyser.updateSource(s)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=i;let o=St();t&&o.os===mn.IOS&&Number((n=o.osVersion)===null||n===void 0?void 0:n.split(".")[0])<15&&(Ht.on(kn.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(a=>{a||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;let t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),Pd(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Wo.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),Ht.off("state-change",this.rebuildWebAudio),(e=this.originVolumeLevelAnalyser)===null||e===void 0||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){let t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),w.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));let r=this.context.createMediaStreamSource(new MediaStream([t]));Pd(r),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(r)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}};async function ute(e,t,r){let n=(o,a)=>o?typeof o!="number"?o.max||o.exact||o.ideal||o.min||a:o:a,i={audio:!!r&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:n(t.height,1080),maxWidth:n(t.width,1920)}}};return t.frameRate&&typeof t.frameRate!="number"?(i.video.mandatory.maxFrameRate=t.frameRate.max,i.video.mandatory.minFrameRate=t.frameRate.min):typeof t.frameRate=="number"&&(i.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(i)}async function m6e(e,t){let r=await dte(e.mediaSource),{sourceId:n,audio:i}=await function(o){let a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new he((s,c)=>{let l=document.createElement("div");l.innerText="share screen",l.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");let u=document.createElement("div");u.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");let d=document.createElement("div");d.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",d.setAttribute("style","height: 12%;");let f=document.createElement("div");f.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");let p=document.createElement("div");p.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");let m=document.createElement("button");m.innerHTML="cancel",m.setAttribute("style","width: 85px;"),m.onclick=()=>{document.body.removeChild(v);let E=new Error("NotAllowedError");E.name="NotAllowedError",c(E)};let g=a,y=document.createElement("div");if(a){let E=document.createElement("input");E.setAttribute("type","checkbox");let b=document.createElement("span");E.setAttribute("style","margin-right: 6px;"),b.innerText="Share audio",E.checked=g,E.onchange=()=>{g=E.checked},y.appendChild(E),y.appendChild(b)}p.appendChild(y),p.appendChild(m),u.appendChild(d),u.appendChild(f),u.appendChild(p);let v=document.createElement("div");v.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),v.appendChild(l),v.appendChild(u),document.body.appendChild(v),o.map(E=>{if(E.id){let b=document.createElement("div");b.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let S=E.thumbnail;try{let{width:A}=S.getSize();A>1920&&(S=S.resize({width:1920}))}catch(A){throw A&&A.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),A}b.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+S.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+E.name.replace(/[\u00A0-\u9999<>\&]/g,function(A){return"&#"+A.charCodeAt(0)+";"})+"</span>",b.onclick=()=>{document.body.removeChild(v),s({sourceId:E.id,audio:g})},f.appendChild(b)}})})}(r,t);return await ute(n,e,i)}async function dte(e){let t=["window","screen"];e!=="application"&&e!=="window"||(t=["window"]),e==="screen"&&(t=["screen"]);let r=Dee();if(!r)throw console.error("failed to fetch electron, please mount it to window"),new J(O.ELECTRON_IS_NULL);let n=null;try{var i;n=((i=r.desktopCapturer)===null||i===void 0?void 0:i.getSources({types:t}))||r.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch{n=null}n&&n.then||(n=new he((o,a)=>{r.desktopCapturer.getSources({types:t},(s,c)=>{s?a(s):o(c)})}));try{return await n}catch(o){throw new J(O.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,o.toString())}}var yk=new ii("safari"),hte=!1,fte=!1;async function zo(e,t){let r=0,n=null;for(;r<2;)try{n=await g6e(e,t,r>0);break}catch(i){if(i instanceof J)throw w.error("[".concat(t,"] ").concat(i.toString())),i;let o=vb(i.name||i.code||i,i.message);if(o.code===O.MEDIA_OPTION_INVALID){w.debug("[".concat(t,"] detect media option invalid, retry")),r+=1,await Ln(500);continue}throw w.error("[".concat(t,"] ").concat(o.toString())),o}if(!n)throw new J(O.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return n}async function g6e(e,t,r){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new J(O.NOT_SUPPORTED,"can not find getUserMedia");r&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));let n=Ct(),i=new MediaStream;if(e.audioSource&&i.addTrack(e.audioSource),e.videoSource&&i.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return w.debug("Using Video Source/ Audio Source"),i;if(e.screen)if(Dee())e.screen.sourceId?Nf(i,await ute(e.screen.sourceId,e.screen,e.screenAudio)):Nf(i,await m6e(e.screen,e.screenAudio));else if(Fu()&&e.screen.extensionId&&e.screen.mandatory){if(!n.getStreamFromExtension)throw new J(O.NOT_SUPPORTED,"This browser does not support screen sharing");w.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));let f=await(a=e.screen.extensionId,s=t,new he((p,m)=>{try{chrome.runtime.sendMessage(a,{getStream:!0},g=>{if(!g||!g.streamId)return w.error("[".concat(s,"] No response from Chrome Plugin. Plugin not installed properly"),g),void m(new J(O.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));p(g.streamId)})}catch(g){w.error("[".concat(s,"] AgoraRTC screensharing plugin is not accessible(").concat(a,")"),g.toString()),m(new J(O.CHROME_PLUGIN_NOT_INSTALL))}}));e.screen.mandatory.chromeMediaSourceId=f,Nf(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(n.getDisplayMedia){var o;e.screen.mediaSource&&k6(e.screen.mediaSource);let f={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:(o=e.screen.displaySurface)!==null&&o!==void 0?o:e.screen.mediaSource==="screen"?"monitor":e.screen.mediaSource},{selfBrowserSurface:p,surfaceSwitching:m,systemAudio:g}=e.screen,y={selfBrowserSurface:p,surfaceSwitching:m,systemAudio:g};!p&&delete y.selfBrowserSurface,!m&&delete y.surfaceSwitching,!g&&delete y.systemAudio,w.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:f,audio:!!e.screenAudio,controls:y})),Nf(i,await navigator.mediaDevices.getDisplayMedia(hr({video:f,audio:!!e.screenAudio},y)))}else{if(!Rr())throw w.error("[".concat(t,"] This browser does not support screenSharing")),new J(O.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&k6(e.screen.mediaSource);let f={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};w.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(f))),Nf(i,await navigator.mediaDevices.getUserMedia(f))}}var a,s;if(!e.video&&!e.audio)return i;let c={video:e.video,audio:e.audio},l=L("MEDIA_DEVICE_CONSTRAINTS");if(l)try{typeof l=="string"&&(l=JSON.parse(l)),c=sk(c,l)}catch{}w.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(c)),St();let u,d=null;(Wn()||Ui()||eS())&&(d=await yk.lock());try{u=await navigator.mediaDevices.getUserMedia(c)}catch(f){throw d&&d(),f}return c.audio&&(hte=!0),c.video&&(fte=!0),Nf(i,u),d&&d(),i}function vb(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new J(O.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new J(O.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new J(O.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new J(O.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new J(O.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new J(O.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return w.error("getUserMedia unexpected error",e),new J(O.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function Nf(e,t){let r=e.getVideoTracks()[0],n=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(n&&e.removeTrack(n),e.addTrack(o)),i&&(r&&e.removeTrack(r),e.addTrack(i))}var qo=new class extends _r{get state(){return this._state}set state(e){e!==this._state&&(this.emit(Yd.STATE_CHANGE,e),this._state=e)}constructor(){super(),Q(this,"_state",kg.IDLE),Q(this,"isAccessMicrophonePermission",!1),Q(this,"isAccessCameraPermission",!1),Q(this,"lastAccessMicrophonePermission",!1),Q(this,"lastAccessCameraPermission",!1),Q(this,"checkdeviceMatched",!1),Q(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(L("ENUMERATE_DEVICES_INTERVAL")||(oC()||iC()===mn.HARMONY_OS)&&Qu())&&this.updateDevicesInfo()},L("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(e=>w.error(e.toString()))}async enumerateDevices(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new J(O.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();let n=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(n),o=!this.isAccessMicrophonePermission&&e,a=!this.isAccessCameraPermission&&t;i.audio&&(o=!1),i.video&&(a=!1);let s=null,c=null,l=null;if(!r&&(o||a)){if(yk.isLocked&&(w.debug("[device manager] wait GUM lock"),(await yk.lock())(),w.debug("[device manager] GUM unlock")),hte&&(o=!1,this.isAccessMicrophonePermission=!0),fte&&(a=!1,this.isAccessCameraPermission=!0),w.debug("[device manager] check media device permissions",e,t,o,a),o&&a){try{l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(u){let d=vb(u.name||u.code||u,u.message);if(d.code===O.PERMISSION_DENIED)throw d;w.warning("getUserMedia failed in getDevices",d)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{s=await navigator.mediaDevices.getUserMedia({audio:e})}catch(u){let d=vb(u.name||u.code||u,u.message);if(d.code===O.PERMISSION_DENIED)throw d;w.warning("getUserMedia failed in getDevices",d)}this.isAccessMicrophonePermission=!0}else if(a){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(u){let d=vb(u.name||u.code||u,u.message);if(d.code===O.PERMISSION_DENIED)throw d;w.warning("getUserMedia failed in getDevices",d)}this.isAccessCameraPermission=!0}w.debug("[device manager] mic permission",e,"cam permission",t)}try{let u=await navigator.mediaDevices.enumerateDevices();return s&&s.getTracks().forEach(d=>d.stop()),c&&c.getTracks().forEach(d=>d.stop()),l&&l.getTracks().forEach(d=>d.stop()),s=null,c=null,l=null,u}catch(u){return s&&s.getTracks().forEach(d=>d.stop()),c&&c.getTracks().forEach(d=>d.stop()),l&&l.getTracks().forEach(d=>d.stop()),s=null,c=null,l=null,new J(O.ENUMERATE_DEVICES_FAILED,u.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(t=>t.kind==="audioinput")}async getCamerasDevices(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter(t=>t.kind==="videoinput")}async getSpeakers(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(t=>t.kind==="audiooutput")}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach(r=>{r.device.label===e&&(t=r.device.deviceId)}),t}async getDeviceById(e){let t=(await this.enumerateDevices(!0,!0,!0)).find(r=>r.deviceId===e);if(!t)throw new J(O.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=kg.INITING;try{await this.updateDevicesInfo(),this.state=kg.INITEND}catch(e){throw w.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=kg.IDLE,(typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1")||new J(O.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){let e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),r=[];if(e[0]&&e[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;let i=e.find(a=>a.kind==="audioinput"&&a.deviceId==="default"),o=e.find(a=>a.kind==="audiooutput"&&a.deviceId==="default");i&&o?o.groupId===i.groupId?w.debug("[device-check] default input ".concat(i.label," and output ").concat(o.label," is the same group")):w.warning("[device-check] default input ".concat(i.label," and output ").concat(o.label," is not the same group")):w.debug("[device-check] default input or output not found")}let n=this.checkMediaDeviceInfoIsOk(e);if(e.forEach(i=>{if(!i.deviceId)return;let o=this.deviceInfoMap.get("".concat(i.kind,"_").concat(i.deviceId));if((o?o.state:"INACTIVE")!=="ACTIVE"){let a={initAt:t,updateAt:t,device:i,state:"ACTIVE"};this.deviceInfoMap.set("".concat(i.kind,"_").concat(i.deviceId),a),r.push(a)}o&&(o.updateAt=t)}),this.deviceInfoMap.forEach((i,o)=>{i.state==="ACTIVE"&&i.updateAt!==t&&(i.state="INACTIVE",r.push(i))}),this.state!==kg.INITEND)return n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));r.forEach(i=>{switch(i.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Yd.RECORDING_DEVICE_CHANGED,i);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(Yd.CAMERA_DEVICE_CHANGED,i);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Yd.PLAYOUT_DEVICE_CHANGED,i)}}),n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){let t=e.filter(i=>i.kind==="audioinput"),r=e.filter(i=>i.kind==="videoinput"),n={audio:!1,video:!1};for(let i of t)if(i.label&&i.deviceId){n.audio=!0;break}for(let i of r)if(i.label&&i.deviceId){n.video=!0;break}return n}},zx=!1,Fo=new class extends _r{constructor(){super(...arguments),Q(this,"onAutoplayFailed",void 0),Q(this,"onAudioAutoplayFailed",void 0)}};function pte(){if(St(),!zx){let e=t=>{t.preventDefault(),zx=!1,A0()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};zx=!0,A0()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),w.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Fo.onAutoplayFailed?Fo.onAutoplayFailed():Fo.onAudioAutoplayFailed?w.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):w.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),Fo.emit("autoplay-failed")}}function mte(e,t,r,n){if(!e)return;let i=Se.getBaseInfoBySessionId(e);if(!i)return;let o=i.info,a=Date.now(),s=hr(hr({},o),{},{vid:o.vid===void 0?0:Number(o.vid),lts:a,elapse:a-i.startTime,cbRegistered:Fo.onAutoplayFailed||Fo.onAudioAutoplayFailed?1:-1,errorMsg:r,mediaType:t,trackId:n,extend:void 0});Se.send({type:vr.AUTOPLAY_FAILED,data:s},!0)}var y6e=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],Yi=new class{constructor(){Q(this,"onAutoplayFailed",void 0),Q(this,"elementMap",new Map),Q(this,"elementStateMap",new Map),Q(this,"elementsNeedToResume",[]),Q(this,"sinkIdMap",new Map),Q(this,"autoResumeAfterInterruption",e=>{Array.from(this.elementMap.entries()).forEach(t=>{let[r,n]=t,i=this.elementStateMap.get(r),o=n.srcObject.getAudioTracks()[0],a=o&&o.readyState;if(w.debug("resume after interrupted, ele: ".concat(i," audio: ").concat(a," ").concat(e)),a==="live"){if(e)return n.pause(),void n.play();if(Ht.curState==="running")return om()?(n.pause(),void n.play()):void(i&&i==="paused"&&n.play())}})}),Q(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(e=>{let[t,r]=e,n=r.srcObject.getAudioTracks()[0];n&&n.readyState==="live"&&(w.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),r.pause(),r.play())})}),this.autoResumeAudioElement(),Ht.on(kn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Ht.on(kn.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),Ht.on(kn.STATE_CHANGE,()=>{Ui()&&Ht.prevState==="suspended"&&Ht.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(e,t){let r=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),r)try{await r.setSinkId(t)}catch(n){throw new J(O.PERMISSION_DENIED,"can not set sink id: "+n.toString())}}play(e,t,r,n){if(this.elementMap.has(t))return;let i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,Si.INIT),this.setVolume(t,r);let o=this.sinkIdMap.get(t);if(o)try{i.setSinkId(o).catch(s=>{w.warning("[".concat(t,"] set sink id failed"),s.toString())})}catch(s){w.warning("[".concat(t,"] set sink id failed"),s.toString())}let a=i.play();a&&a.then&&a.catch(s=>{n&&mte(n,"audio",s.message,t),w.warning("audio element play warning",s.toString()),this.elementMap.has(t)&&s.name==="NotAllowedError"&&(w.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),sC(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),pte()}))})}updateTrack(e,t){let r=this.elementMap.get(e);r&&(r.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&this.elementStateMap.get(e)==="playing"}setVolume(e,t){let r=this.elementMap.get(e);r&&(t=Math.max(0,Math.min(100,t)),r.volume=t/100)}stop(e){let t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;let r=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(r,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){y6e.forEach(r=>{t.addEventListener(r,n=>{let i=this.elementStateMap.get(e),o=n.type==="pause"?"paused":n.type;if(w.debug("[".concat(e,"] audio-element-status change ").concat(i," => ").concat(o)),n.type==="error"){let a=t==null?void 0:t.error;a&&w.error("[".concat(e,"] media error, code: ").concat(a.code,", message: ").concat(a.message))}this.elementStateMap.set(e,o)})})}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){let e=()=>{this.elementsNeedToResume.forEach(t=>{t.play().then(r=>{w.debug("Auto resume audio element success")}).catch(r=>{w.warning("Auto resume audio element failed!",r)})}),this.elementsNeedToResume=[]};new he(t=>{document.body?t():window.addEventListener("load",()=>t())}).then(()=>{A0()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))})}};function Mr(){return function(e,t,r){let n=r.value;return typeof n=="function"&&(r.value=function(){this._isClosed&&new J(O.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",w);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];let s=n.apply(this,o);return s instanceof he?new he((c,l)=>{s.then(c).catch(l)}):s}),r}}var gte=class extends _r{constructor(e){super(),Q(this,"name","VideoProcessorDestination"),Q(this,"ID","0"),Q(this,"_source",void 0),Q(this,"videoContext",void 0),Q(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new J(O.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new J(O.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(Fi.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(Fi.ON_TRACK,void 0)}},yte=class extends _r{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),Q(this,"constraintsMap",new Map),Q(this,"statsRegistry",[]),Q(this,"usageRegistry",[]),Q(this,"trackId",void 0),Q(this,"direction",void 0),Q(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await Kn(this,na.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var r;return w.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Jt(this,na.REQUEST_UPDATE_CONSTRAINTS,Array.from(Sl(r=this.constraintsMap).call(r)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return w.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),Jt(this,na.REQUEST_UPDATE_CONSTRAINTS,Array.from(Sl(t=this.constraintsMap).call(t)))}registerStats(e,t,r){this.statsRegistry.find(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t)||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:r})}unregisterStats(e,t){let r=this.statsRegistry.findIndex(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t);r!==-1&&this.statsRegistry.splice(r,1)}gatherStats(){let e=[];for(let{processorID:t,processorName:r,type:n,cb:i}of this.statsRegistry)try{let o=i();e.push({processorID:t,processorName:r,type:n,stats:o})}catch(o){w.error(new J(O.UNEXPECTED_ERROR,o.message))}return e}registerUsage(e,t){this.usageRegistry.find(r=>r.processorID===e.ID&&r.processorName===e.name)||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){let t=this.usageRegistry.findIndex(r=>r.processorID===e.ID&&r.processorName===e.name);t!==-1&&this.usageRegistry.splice(t,1)}async gatherUsage(){let e=[];if(!this.chained)return[];for(let{cb:t}of this.usageRegistry)try{let r=t();r instanceof he&&(r=await r),e.push(hr(hr({},r),{},{direction:this.direction}))}catch(r){w.error("gather extension usage error",r)}return e}getDirection(){return this.direction}},vte=class extends _r{constructor(e){super(),Q(this,"name","AudioProcessorDestination"),Q(this,"ID","0"),Q(this,"inputTrack",void 0),Q(this,"inputNode",void 0),Q(this,"audioProcessorContext",void 0),Q(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new J(O.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new J(O.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(Fi.ON_TRACK,void 0),this.emit(Fi.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(Fi.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(Fi.ON_NODE,this.inputNode))}},Ete=class extends _r{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,r){super(),Q(this,"constraintsMap",new Map),Q(this,"statsRegistry",[]),Q(this,"audioContext",void 0),Q(this,"trackId",void 0),Q(this,"direction",void 0),Q(this,"usageRegistry",[]),Q(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=r}async getConstraints(){return Kn(this,na.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var r;return w.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Jt(this,na.REQUEST_UPDATE_CONSTRAINTS,Array.from(Sl(r=this.constraintsMap).call(r)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),Jt(this,na.REQUEST_UPDATE_CONSTRAINTS,Array.from(Sl(t=this.constraintsMap).call(t)))}registerStats(e,t,r){this.statsRegistry.find(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t)||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:r})}unregisterStats(e,t){let r=this.statsRegistry.findIndex(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t);r!==-1&&this.statsRegistry.splice(r,1)}gatherStats(){let e=[];for(let{processorID:t,processorName:r,type:n,cb:i}of this.statsRegistry)try{let o=i();e.push({processorID:t,processorName:r,type:n,stats:o})}catch(o){w.error(new J(O.UNEXPECTED_ERROR,o.message))}return e}registerUsage(e,t){this.usageRegistry.find(r=>r.processorID===e.ID&&r.processorName===e.name)||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){let t=this.usageRegistry.findIndex(r=>r.processorID===e.ID&&r.processorName===e.name);t!==-1&&this.usageRegistry.splice(t,1)}async gatherUsage(){let e=[];if(!this.chained)return[];for(let{cb:t}of this.usageRegistry)try{let r=t();r instanceof he&&(r=await r),e.push(hr(hr({},r),{},{direction:this.direction}))}catch(r){w.error("gather extension usage error",r)}return e}getDirection(){return this.direction}},vk=class extends _r{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),Q(this,"context",void 0),Q(this,"processSourceNode",void 0),Q(this,"outputTrack",void 0),Q(this,"processedNode",void 0),Q(this,"clonedTrack",void 0),Q(this,"outputNode",void 0),this.outputNode=new v6e}setVolume(){}createOutputTrack(){throw new J(O.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}},v6e=class{disconnect(){}connect(){}};function _te(e){return new he((t,r)=>{let n=!1,i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);let o=Ui()?"canplay":"playing";i.addEventListener(o,()=>{let a=i.videoWidth,s=i.videoHeight;!a&&Rr()||(n=!0,i.srcObject=null,i.remove(),t([a,s]))}),i.srcObject=new MediaStream([e]),i.play().catch(cC),setTimeout(()=>{n||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))},4e3)})}function iS(e){let t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});let r=xc(e.encoderConfig);return r.width!=null&&(t.width=r.width),r.height!=null&&(t.height=r.height),!Oee()&&r.frameRate&&(t.frameRate=r.frameRate),Cee()&&typeof t.frameRate=="object"&&(t.frameRate.max=60),Rr()&&(t.frameRate={ideal:30,max:30}),t}function L6(e){let t={};if(Oee()||(e.AGC!==void 0&&(t.autoGainControl=e.AGC),e.AEC!==void 0&&(t.echoCancellation=e.AEC),e.ANS!==void 0&&(t.noiseSuppression=e.ANS,Fu()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){let r=nS(e.encoderConfig);t.channelCount=r.stereo?2:1,t.sampleRate=r.sampleRate,t.sampleSize=r.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),oC()&&(t.sampleRate=void 0),t}var E6e=e=>{let t=e._encoderConfig;if(!t)return;let{frameRate:r,width:n,height:i}=e.getMediaStreamTrackSettings(),{frameRate:o=r,width:a=n,height:s=i}=t;if(!o||!a||!s)return;a=dx(a),s=dx(s),o=dx(o);let{max:c,min:l}=function(p,m,g){let y=200*Math.pow(g/15,.6)*Math.pow(p*m/640/360,.75);return{min:Math.floor(y),max:Math.floor(4*y)}}(a,s,o),{bitrateMax:u,bitrateMin:d}=t||{};u||w.debug("calculate bitrate: [w: ".concat(a,", h: ").concat(s,", fps: ").concat(o,"] => [brMax: ").concat(u,", brMin: ").concat(d,"]"));let{maxFramerate:f}=L("ENCODER_CONFIG_LIMIT");return f&&typeof f=="number"&&(o=Math.min(o,f)),{frameRate:o,bitrateMax:u||c,bitrateMin:d||l,scaleResolutionDownBy:1,scale:0}},bte=async(e,t,r)=>await(async(n,i,o)=>{let a=function(l){let u=[];for(let d=0;d<l.length;d+=2)u.push(parseInt(l.slice(d,d+2),16));return Uint8Array.from(u)}(Uee(""+i+o)).slice(0,16),s=a.slice(0,12),c=await window.crypto.subtle.importKey("raw",a,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:s},c,n))})(e.buffer,t,r),LL=e=>{let t=document.createElement("canvas");return t.width=2,t.height=2,new he((r,n)=>{t.toBlob(async i=>{if(t.remove(),i){let o=await wte(i);r({buffer:o,width:t.width,height:t.height})}else n(new J(O.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},e,1)})},wte=async e=>{let t=await e.arrayBuffer();return new Uint8Array(t)},M6,j6,U6,F6,V6,B6,$6,H6,z6,G6,W6,K6,q6,Y6,X6,J6,Q6,Z6,fr,e8,t8,r8,n8,i8,o8,dc,a8,s8,c8,l8,u8,d8,h8,f8,p8,m8,g8,y8,v8,Vn,Tr=(M6=De({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),j6=De({argsMap:(e,t)=>[e.getTrackId(),t]}),U6=Mr(),F6=am("LocalAudioTrack","_enabledMutex"),V6=De({argsMap:(e,t)=>[e.getTrackId(),t]}),B6=Mr(),$6=am("LocalAudioTrack","_enabledMutex"),H6=De({argsMap:(e,t)=>[e.getTrackId(),t]}),z6=Mr(),G6=Mr(),W6=Mr(),K6=De({argsMap:e=>[e.getTrackId()]}),q6=Mr(),Y6=De({argsMap:e=>[e.getTrackId()]}),X6=Mr(),J6=De({argsMap:e=>[e.getTrackId()]}),Q6=De({argsMap:(e,t)=>[e.getTrackId(),t.name]}),Z6=De({argsMap:e=>[e.getTrackId()]}),bt((fr=class extends fp{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?Yi.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,r,n){super(e,r),Q(this,"trackMediaType",Wm.AUDIO),Q(this,"_encoderConfig",void 0),Q(this,"_trackSource",void 0),Q(this,"_enabled",!0),Q(this,"_volume",100),Q(this,"_useAudioElement",!0),Q(this,"_bypassWebAudio",!1),Q(this,"processor",void 0),Q(this,"_processorContext",void 0),Q(this,"_processorDestination",void 0),Q(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!n,this._trackSource=new vk,L("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),L("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),Wn()&&!Uo?setTimeout(()=>this.initWebAudio()):this.initWebAudio()}setVolume(e){Wt(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Yi.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void w.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));let t=this._source.createOutputTrack();this._mediaStreamTrack!==t&&(this._mediaStreamTrack=t,Jt(this,ye.NEED_REPLACE_TRACK,this).then(()=>{w.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(r=>{w.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),r)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!nte())throw new J(O.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Yi.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,r){return this._setEnabled(e,t,r)}async _setEnabled(e,t,r){if(!r){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(w.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{r||(this._enabled=!0),await Jt(this,ye.NEED_ENABLE_TRACK,this),w.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(n){throw r||(this._enabled=!1),w.error("[".concat(this.getTrackId(),"] setEnabled to true error"),n.toString()),n}}else{this._originMediaStreamTrack.enabled=!1,r||(this._enabled=!1);try{await Jt(this,ye.NEED_DISABLE_TRACK,this)}catch(n){throw r||(this._enabled=!0),w.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,w.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await Jt(this,ye.NEED_MUTE_TRACK,this):await Jt(this,ye.NEED_UNMUTE_TRACK,this))}getStats(){return Zu(()=>{w.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Ca(this,ye.GET_STATS)||hr({},mk)}setAudioFrameCallback(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Wo.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Wo.ON_AUDIO_BUFFER),this._source.on(Wo.ON_AUDIO_BUFFER,r=>e(r))}play(){w.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(w.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Yi.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){w.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Yi.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];w.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Yi.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Jt(this,ye.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return he.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new J(O.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new J(O.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;let t=this.processor;(e=this._source.processSourceNode)===null||e===void 0||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(Fi.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(t),await Jt(this,ye.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Jt(this,ye.NEED_REPLACE_TRACK,this))}),e.on(Fi.ON_NODE,t=>{this._source.processedNode=t})}unbindProcessorDestinationEvents(e){e.removeAllListeners(Fi.ON_TRACK),e.removeAllListeners(Fi.ON_NODE)}bindProcessorContextEvents(e){e.on(na.REQUEST_CONSTRAINTS,async t=>{t(this._originMediaStreamTrack.getSettings())})}unbindProcessorContextEvents(e){e.removeAllListeners(na.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof vk&&(this._trackSource=new lte(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){let e=new Ete(this._source.context,this.getTrackId(),"local"),t=new vte(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(Wo.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})}),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(Yi.stop(this.getTrackId()),this._source.play()),Jt(this,ye.NEED_REPLACE_MIXING_TRACK,this).then(()=>{w.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))}).catch(r=>{w.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),r)})),{processorContext:e,processorDestination:t}}}).prototype,"setVolume",[M6],Object.getOwnPropertyDescriptor(fr.prototype,"setVolume"),fr.prototype),bt(fr.prototype,"setPlaybackDevice",[j6,U6],Object.getOwnPropertyDescriptor(fr.prototype,"setPlaybackDevice"),fr.prototype),bt(fr.prototype,"setEnabled",[F6,V6,B6],Object.getOwnPropertyDescriptor(fr.prototype,"setEnabled"),fr.prototype),bt(fr.prototype,"setMuted",[$6,H6,z6],Object.getOwnPropertyDescriptor(fr.prototype,"setMuted"),fr.prototype),bt(fr.prototype,"getStats",[G6],Object.getOwnPropertyDescriptor(fr.prototype,"getStats"),fr.prototype),bt(fr.prototype,"setAudioFrameCallback",[W6],Object.getOwnPropertyDescriptor(fr.prototype,"setAudioFrameCallback"),fr.prototype),bt(fr.prototype,"play",[K6,q6],Object.getOwnPropertyDescriptor(fr.prototype,"play"),fr.prototype),bt(fr.prototype,"stop",[Y6,X6],Object.getOwnPropertyDescriptor(fr.prototype,"stop"),fr.prototype),bt(fr.prototype,"close",[J6],Object.getOwnPropertyDescriptor(fr.prototype,"close"),fr.prototype),bt(fr.prototype,"pipe",[Q6],Object.getOwnPropertyDescriptor(fr.prototype,"pipe"),fr.prototype),bt(fr.prototype,"unpipe",[Z6],Object.getOwnPropertyDescriptor(fr.prototype,"unpipe"),fr.prototype),fr),oS=(e8=De({argsMap:(e,t)=>[e.getTrackId(),t]}),t8=Mr(),r8=am("MicrophoneAudioTrack","_enabledMutex"),n8=De({argsMap:(e,t,r)=>[e.getTrackId(),t,r]}),i8=Mr(),o8=De({argsMap:e=>[e.getTrackId()]}),bt((dc=class extends Tr{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,r,n){super(e,t.encoderConfig?nS(t.encoderConfig):{},n,L("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),Q(this,"_config",void 0),Q(this,"_deviceName","default"),Q(this,"_constraints",void 0),Q(this,"_originalConstraints",void 0),Q(this,"_enabled",!0),this._config=t,this._constraints=r,this._originalConstraints=r,this._deviceName=e.label,typeof t.bypassWebAudio=="boolean"&&(this._bypassWebAudio=t.bypassWebAudio),(om()||ik())&&Ht.bindInterruptDetectorTrack(this)}async setDevice(e){if(w.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{let t=await qo.getDeviceById(e),r={};r.audio=hr({},this._constraints),r.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let n=null;try{n=await zo(r,this.getTrackId())}catch(i){throw w.error("[".concat(this.getTrackId(),"] setDevice failed"),i.toString()),n=await zo({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),i}await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(t){throw w.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}else try{let t=await qo.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(t){throw w.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}w.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,r){if(t)return w.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!r){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(w.info("[".concat(this.getTrackId(),"] start setEnabled"),e),L("AUTO_RESET_AUDIO_ROUTE")&&(Ui()||gs())){let a=navigator.audioSession;a&&(e||(a.type="playback"),a.type="auto")}if(!e){var n;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(n=this._source.clonedTrack)===null||n===void 0||n.stop(),r||(this._enabled=!1);try{await Jt(this,ye.NEED_DISABLE_TRACK,this)}catch(a){throw w.error("[".concat(this.getTrackId(),"] setEnabled false failed"),a.toString()),a}return}let i=hr({},this._constraints),o=qo.searchDeviceIdByName(this._deviceName);o&&!i.deviceId&&(i.deviceId=o);try{r||(this._enabled=!0);let a=await zo({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),await Jt(this,ye.NEED_ENABLE_TRACK,this)}catch(a){throw r||(this._enabled=!1),w.error("[".concat(this.getTrackId(),"] setEnabled true failed"),a.toString()),a}w.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(om()||ik())&&Ht.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ui()||gs())&&this._enabled&&!this._isClosed&&Ht.duringInterruption){let e=async()=>{Ht.off(kn.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(w.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Ht.on(kn.IOS_INTERRUPTION_END,e)}else w.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Gm.TRACK_ENDED)}async renewMediaStreamTrack(e){let t=e||this._constraints,r=qo.searchDeviceIdByName(this._deviceName);if(r&&!t.deviceId&&(t.deviceId=r),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();let n=await zo({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(na.REQUEST_UPDATE_CONSTRAINTS,async(t,r,n)=>{try{let i=Object.assign({},this._originalConstraints,...t);await this.renewMediaStreamTrack(i),r()}catch(i){n(i)}})}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(na.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[e8,t8],Object.getOwnPropertyDescriptor(dc.prototype,"setDevice"),dc.prototype),bt(dc.prototype,"setEnabled",[r8,n8,i8],Object.getOwnPropertyDescriptor(dc.prototype,"setEnabled"),dc.prototype),bt(dc.prototype,"close",[o8],Object.getOwnPropertyDescriptor(dc.prototype,"close"),dc.prototype),dc),_6e=(a8=De({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),s8=Mr(),c8=De({argsMap:e=>[e.getTrackId()]}),l8=Mr(),u8=De({argsMap:e=>[e.getTrackId()]}),d8=Mr(),h8=De({argsMap:e=>[e.getTrackId()]}),f8=Mr(),p8=De({argsMap:e=>[e.getTrackId()]}),m8=Mr(),g8=De({argsMap:e=>[e.getTrackId()]}),y8=De({argsMap:e=>[e.getTrackId()]}),v8=Mr(),bt((Vn=class extends Tr{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,r,n){super(t.createOutputTrack(),r,n),Q(this,"source",void 0),Q(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(Wo.AUDIO_SOURCE_STATE_CHANGE,i=>{this.safeEmit(Gm.SOURCE_STATE_CHANGE,i)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){Wt(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}).prototype,"startProcessAudioBuffer",[a8,s8],Object.getOwnPropertyDescriptor(Vn.prototype,"startProcessAudioBuffer"),Vn.prototype),bt(Vn.prototype,"pauseProcessAudioBuffer",[c8,l8],Object.getOwnPropertyDescriptor(Vn.prototype,"pauseProcessAudioBuffer"),Vn.prototype),bt(Vn.prototype,"seekAudioBuffer",[u8,d8],Object.getOwnPropertyDescriptor(Vn.prototype,"seekAudioBuffer"),Vn.prototype),bt(Vn.prototype,"resumeProcessAudioBuffer",[h8,f8],Object.getOwnPropertyDescriptor(Vn.prototype,"resumeProcessAudioBuffer"),Vn.prototype),bt(Vn.prototype,"stopProcessAudioBuffer",[p8,m8],Object.getOwnPropertyDescriptor(Vn.prototype,"stopProcessAudioBuffer"),Vn.prototype),bt(Vn.prototype,"close",[g8],Object.getOwnPropertyDescriptor(Vn.prototype,"close"),Vn.prototype),bt(Vn.prototype,"setAudioBufferPlaybackSpeed",[y8,v8],Object.getOwnPropertyDescriptor(Vn.prototype,"setAudioBufferPlaybackSpeed"),Vn.prototype),Vn),pn=class Ste extends Tr{get __className__(){return"MixingAudioTrack"}get isActive(){for(let t of this.trackList)if(t._enabled&&!t._isClosed&&!t.muted)return!0;return!1}constructor(){let t=Km().createMediaStreamDestination();super(t.stream.getAudioTracks()[0],void 0,er(8,"track-mix-")),Q(this,"trackList",void 0),Q(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=t,this.trackList=[]}hasAudioTrack(t){return this.trackList.indexOf(t)!==-1}addAudioTrack(t){this.trackList.indexOf(t)===-1?(w.debug("add ".concat(t.getTrackId()," to mixing track")),t._source.outputNode.connect(this.destNode),this.trackList.push(t),this.updateEncoderConfig()):w.debug("track ".concat(t.getTrackId()," is already added"))}removeAudioTrack(t){if(this.trackList.indexOf(t)!==-1){w.debug("remove ".concat(t.getTrackId()," from mixing track"));try{t._source.outputNode.disconnect(this.destNode)}catch{}tS(this.trackList,t),this.updateEncoderConfig()}}updateEncoderConfig(){let t={};this.trackList.forEach(r=>{r._encoderConfig&&((r._encoderConfig.bitrate||0)>(t.bitrate||0)&&(t.bitrate=r._encoderConfig.bitrate),(r._encoderConfig.sampleRate||0)>(t.sampleRate||0)&&(t.sampleRate=r._encoderConfig.sampleRate),(r._encoderConfig.sampleSize||0)>(t.sampleSize||0)&&(t.sampleSize=r._encoderConfig.sampleSize),r._encoderConfig.stereo&&(t.stereo=!0))}),this._encoderConfig=t}_updateRtpTransceiver(t){this._rtpTransceiver!==t&&(this._rtpTransceiver=t,this.trackList.forEach(r=>{r instanceof Ste?r.emit(uh.TRANSCEIVER_UPDATED,t):r._updateRtpTransceiver(t)}))}},b6e=class extends cte{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(Wo.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Q(this,"audioBuffer",void 0),Q(this,"sourceNode",void 0),Q(this,"startPlayTime",0),Q(this,"startPlayOffset",0),Q(this,"pausePlayTime",0),Q(this,"options",void 0),Q(this,"currentLoopCount",0),Q(this,"currentPlaybackSpeed",100),Q(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){this.currentState==="stopped"?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):w.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=e,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){let e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}},E8=new Map,ML=class{get rendFrameRate(){if(this.renderStats&&this.renderStats.curTs!==this.renderStats.lastTs){let e=this.renderStats.curTs-this.renderStats.lastTs,t=(this.renderStats.renderNum-this.renderStats.lastRenderNum)/e;return this.renderStats.lastRenderNum=this.renderStats.renderNum,this.renderStats.lastTs=this.renderStats.curTs,t}return 0}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(w.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(this._videoState=e,(t=this.onVideoStateChanged)===null||t===void 0||t.call(this,this.videoState))}constructor(e){Q(this,"trackId",void 0),Q(this,"config",void 0),Q(this,"onFirstVideoFrameDecoded",void 0),Q(this,"onVideoStateChanged",void 0),Q(this,"freezeTimeCounterList",[]),Q(this,"renderFreezeAccTime",0),Q(this,"isKeepLastFrame",!1),Q(this,"timeUpdatedCount",0),Q(this,"freezeTime",0),Q(this,"playbackTime",0),Q(this,"lastTimeUpdatedTime",0),Q(this,"autoplayFailed",!1),Q(this,"videoTrack",void 0),Q(this,"videoElement",void 0),Q(this,"cacheVideoElement",void 0),Q(this,"renderStats",void 0),Q(this,"_videoState",uc.VideoStateStopped),Q(this,"videoElementCheckInterval",void 0),Q(this,"videoElementFreezeTimeout",void 0),Q(this,"_videoElementStatus",Si.NONE),Q(this,"isGettingVideoDimensions",!1),Q(this,"startGetVideoDimensions",()=>{let t=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return w.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(t,500)};!this.isGettingVideoDimensions&&t()}),Q(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&Ht.curState==="running"&&(w.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(IB())),OB()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),Q(this,"handleVideoEvents",t=>{switch(t.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Si.PLAYING;break;case"loadeddata":if(this.videoState=uc.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=Si.CANPLAY;break;case"stalled":this.videoElementStatus=Si.STALLED;break;case"suspend":this.videoElementStatus=Si.SUSPEND;break;case"pause":this.videoElementStatus=Si.PAUSED,Ui()||gs()||Wn()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(w.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=Si.WAITING;break;case"abort":this.videoElementStatus=Si.ABORT;break;case"ended":this.videoElementStatus=Si.ENDED;break;case"emptied":this.videoElementStatus=Si.EMPTIED;break;case"error":{let r=this.videoElement.error;r?(this.videoElementStatus=Si.ERROR,w.error("[".concat(this.trackId,"] media error: ").concat(r.message," (").concat(r.code,")"))):w.debug("[".concat(this.trackId,"] media not been an error."));break}case"timeupdate":{let r=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=r);let n=r-this.lastTimeUpdatedTime,i=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=r,il.lastVisibleTime<il.lastHiddenTime||i<il.lastHiddenTime||i<il.lastVisibleTime)return;for(n>L("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=n),this.playbackTime+=n;this.playbackTime>=6e3;){this.playbackTime-=6e3;let o=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(o),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),Q(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(w.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(IB())),OB()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),Ht.on(kn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Ht.on(kn.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return(e=this.videoElement.parentElement)!==null&&e!==void 0?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){let t=this.videoElement.play();t&&t.catch&&t.catch(n=>{e&&mte(e,"video",n.message,this.trackId),n.name==="NotAllowedError"?(w.warning("detected video element autoplay failed",n),this.autoplayFailed=!0,this.handleAutoPlayFailed()):w.warning("[".concat(this.trackId,"] play warning: "),n)});let r=St();if((r.name==="Safari"&&Number(r.version)===15||om())&&t&&t.then){let n=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(n).catch(n)}}getCurrentFrame(){let e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;let t=e.getContext("2d");if(!t)return w.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);let r=t.getImageData(0,0,e.width,e.height);return e.remove(),r}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;let n=r.getContext("2d");return n?(n.drawImage(this.videoElement,0,0,r.width,r.height),new he((i,o)=>{r.toBlob(async a=>{if(r.remove(),a){let s=await wte(a);i({buffer:s,width:r.width,height:r.height})}else o(new J(O.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},e,t<0?.1:t>1?1:t)})):await LL(e)}destroy(){this.renderStats=void 0,Ht.off(kn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Ht.off(kn.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=uc.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=Si.INIT,!this.videoElementCheckInterval&&(_8.forEach(i=>{this.videoElement.addEventListener(i,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(i){return i!==document.body&&document.body.contains(i)})(this.videoElement)||(this.videoElementStatus=Si.DESTROYED)},1e3),L("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let i,o=()=>{document.visibilityState==="visible"&&(document.removeEventListener("visibilitychange",o),this.videoElementFreezeTimeout=window.setTimeout(a,L("VIDEO_FREEZE_DURATION")))},a=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===uc.VideoStateDecoding&&(document.visibilityState==="visible"?this.videoState=uc.VideoStateFrozen:document.addEventListener("visibilitychange",o))},s=(c,l)=>{if(this.videoElementStatus===Si.PLAYING){if(this.renderStats?(this.renderStats.renderNum++,this.renderStats.curTs=l.mediaTime):this.renderStats={lastTs:l.mediaTime,curTs:l.mediaTime,lastRenderNum:0,renderNum:0},i){let f=l.presentationTime-i.presentationTime;this.videoState===uc.VideoStateStarting&&(this.videoState=uc.VideoStateDecoding),this.videoState===uc.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(a,L("VIDEO_FREEZE_DURATION"))),f<L("VIDEO_FREEZE_DURATION")&&this.videoState===uc.VideoStateFrozen&&(this.videoState=uc.VideoStateDecoding),f>L("VIDEO_FREEZE_DURATION")&&il.lastVisibleTime>=il.lastHiddenTime&&i.timestamp>il.lastVisibleTime&&i.timestamp>il.lastHiddenTime&&(this.renderFreezeAccTime+=f)}i=hr(hr({},l),{},{timestamp:c})}var u,d;L("ENABLE_VIDEO_FRAME_CALLBACK")&&((u=(d=this.videoElement).requestVideoFrameCallback)===null||u===void 0||u.call(d,s))};(e=(t=this.videoElement).requestVideoFrameCallback)===null||e===void 0||e.call(t,s)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),oC()&&!L("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");let r=St();r.name==="Safari"&&Number(r.version)===15||om()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Rr()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Rr()&&this.videoElement.load());let n=this.videoElement.play();n!==void 0&&n.catch(i=>{w.debug("[".concat(this.trackId,"] playback interrupted"),i.toString())})}resetVideoElement(){_8.forEach(e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=Si.NONE}handleAutoPlayFailed(){let e=t=>{t.preventDefault(),this.videoElement.play().then(()=>{w.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(r=>{w.error(r)}),this.autoplayFailed=!1,A0()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};A0()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),pte()}},_8=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"],Tte=class extends ML{constructor(e){super(e),Q(this,"container",void 0),Q(this,"slot",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;let t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;(t=this.container)!==null&&t!==void 0&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return(e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(t=this.container)!==null&&t!==void 0&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,r):await LL(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",L("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||(e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var e;if((e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var e;(e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}},b8,w8,S8,T8,C8,R8,I8,x8,A8,N8,O8,k8,P8,D8,L8,M8,j8,U8,F8,V8,B8,$8,H8,z8,yt,G8,W8,K8,q8,Y8,X8,J8,Q8,Lo,ir=(b8=De({argsMap:(e,t,r)=>[e.getTrackId(),typeof t=="string"?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",r]}),w8=Mr(),S8=De({argsMap:e=>[e.getTrackId()]}),T8=am("LocalVideoTrack","_enabledMutex"),C8=De({argsMap:(e,t)=>[e.getTrackId(),t]}),R8=Mr(),I8=am("LocalVideoTrack","_enabledMutex"),x8=De({argsMap:(e,t)=>[e.getTrackId(),t]}),A8=Mr(),N8=De({argsMap:(e,t)=>[e.getTrackId(),t]}),O8=Mr(),k8=Mr(),P8=De({argsMap:(e,t,r)=>[e.getTrackId(),t,r]}),D8=Mr(),L8=Mr(),M8=Mr(),j8=Mr(),U8=Mr(),F8=Mr(),V8=Mr(),B8=De({argsMap:(e,t)=>[e.getTrackId(),t.name]}),$8=De({argsMap:e=>[e.getTrackId()]}),H8=De({argsMap:e=>[e.getTrackId()]}),z8=De({argsMap:(e,t,r)=>[e.getTrackId(),t.label,r]}),yt=class Cte extends fp{get videoHeight(){if(Wn()){let{height:t}=this._mediaStreamTrack.getSettings();return this._videoHeight=t,this._videoHeight}return this._videoHeight}get videoWidth(){if(Wn()){let{width:t}=this._mediaStreamTrack.getSettings();return this._videoWidth=t,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Si.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(t){this._processorContext=t}get __className__(){return"LocalVideoTrack"}constructor(t,r,n,i,o,a){if(super(t,o),Q(this,"trackMediaType",Wm.VIDEO),Q(this,"_player",void 0),Q(this,"isUseScaleResolutionDownBy",!1),Q(this,"_videoVisibleTimer",null),Q(this,"_previousVideoVisibleStatus",void 0),Q(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),Q(this,"_encoderConfig",void 0),Q(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),Q(this,"_optimizationMode",void 0),Q(this,"_videoHeight",void 0),Q(this,"_videoWidth",void 0),Q(this,"_forceBitrateLimit",void 0),Q(this,"_enabled",!0),Q(this,"_processorDestination",void 0),Q(this,"_processorContext",void 0),Wn()){let{width:s,height:c}=t.getSettings();this._videoWidth=s,this._videoHeight=c}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=r,this._scalabilityMode=n,this._optimizationMode=i,this._hints=a||[],this._hints.indexOf(lr.SCREEN_TRACK)===-1)this.updateBitrateFromProfile();else if(function(s,c,l){let u=St();return!(u.name!==s||!u.osVersion)&&Number(u.version)===c}(Mt.CHROME,115)&&iC().indexOf("Windows")!==-1){let s=function(c,l){if("VideoFrame"in window&&"TransformStream"in window&&Ct().supportWebRTCInsertableStream){let u=new MediaStreamTrackProcessor(c),d=new MediaStreamTrackGenerator({kind:"video"}),f,p,m=Date.now(),g=()=>{y&&(clearInterval(y),y=void 0),f&&(f.close(),f=void 0),c.stop(),p=void 0,d.removeEventListener("ended",g)},y=window.setInterval(()=>{if(p&&f&&Date.now()-m>1e3)try{d.readyState==="live"?p.enqueue(f.clone()):g()}catch{g()}},1e3),v=new TransformStream({transform:(E,b)=>{d.readyState==="live"?(p=b,m=Date.now(),f===void 0?(f=E,b.enqueue(E.clone())):(b.enqueue(f),f=E)):E.close()}});return d.addEventListener("ended",g),u.readable.pipeThrough(v).pipeTo(d.writable),d}}(t);s&&(w.info("local screen video track begin to inject frame"),this._mediaStreamTrack=s)}r&&this._hints.indexOf(lr.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(r),this._processorContext=new yte(this.getTrackId(),"local"),this._processorDestination=new gte(this.processorContext),this.bindProcessorDestinationEvents()}play(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string"){let i=document.getElementById(t);i?t=i:(w.warning("[".concat(this.getTrackId(),'] can not find "#').concat(t,'" element, use document.body')),t=document.body)}w.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(r));let n=hr(hr(hr({},this._getDefaultPlayerConfig()),r),{},{trackId:this.getTrackId(),element:t});this._player?this._player.updateConfig(n):(t instanceof HTMLVideoElement?this._player=new ML(n):this._player=new Tte(n),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{let i=this.getVideoElementVisibleStatus();this.safeEmit(Gm.VIDEO_ELEMENT_VISIBLE_STATUS,i)}catch{}},L("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,w.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(t,r){if(!r){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(w.info("[".concat(this.getTrackId(),"] start setEnabled"),t),!t){this._originMediaStreamTrack.enabled=!1;try{await Jt(this,ye.NEED_DISABLE_TRACK,this)}catch(n){throw w.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}return r||(this._enabled=!1),void w.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Jt(this,ye.NEED_ENABLE_TRACK,this)}catch(n){throw w.error("[".concat(this.getTrackId(),"] setEnabled to true error"),n.toString()),n}w.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}async setMuted(t){t!==this._muted&&(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,w.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),t?await Jt(this,ye.NEED_MUTE_TRACK,this):await Jt(this,ye.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(t,r){if(!this._enabled)throw new J(O.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(t=xc(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),t.width||t.height||t.frameRate){let n=iS({encoderConfig:t});(Wn()||Ui()||gs())&&(n.deviceId=void 0),w.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(n));try{await this._originMediaStreamTrack.applyConstraints(n),this.updateMediaStreamTrackResolution()}catch(i){let o=new J(O.UNEXPECTED_ERROR,i.toString());throw w.error("[".concat(this.getTrackId(),"] applyConstraints error"),o.toString()),o}}this._encoderConfig=t,this._hints.indexOf(lr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Jt(this,ye.NEED_UPDATE_VIDEO_ENCODER,this)}catch(n){return n.throw(w)}}getStats(){return Zu(()=>{w.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Ca(this,ye.GET_STATS)||hr({},gk)}async setBeautyEffect(t){w.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(t,r):await LL(t)}async setBitrateLimit(t){if(w.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(t))),t){this._forceBitrateLimit=t,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<t.max_bitrate?this._encoderConfig.bitrateMax:t.max_bitrate:this._encoderConfig.bitrateMax=t.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=t.min_bitrate);try{await Jt(this,ye.NEED_UPDATE_VIDEO_ENCODER,this)}catch(r){return r.throw(w)}}}async setOptimizationMode(t){if(t!=="motion"&&t!=="detail"&&t!=="balanced")return void w.error(O.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");let r=this._optimizationMode;try{this._optimizationMode=t,await Jt(this,ye.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(n){throw this._optimizationMode=r,w.error("[".concat(this.getTrackId(),"] set optimization mode failed"),n.toString()),n}w.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(t,")"))}setScalabiltyMode(t){if(t.numSpatialLayers===1&&t.numTemporalLayers!==1)return w.error(O.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=t,w.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(t,")"))}updateMediaStreamTrackResolution(){_te(this._originMediaStreamTrack).then(t=>{let[r,n]=t;this._videoHeight=n,this._videoWidth=r}).catch(cC)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(t){if(!this._enabled)throw new J(O.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");w.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(t)),t=xc(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),this._encoderConfig=t,this._hints.indexOf(lr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Jt(this,ye.NEED_UPDATE_VIDEO_ENCODER,this)}catch(r){return r.throw(w)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;let{width:t,height:r,frameRate:n}=this.getMediaStreamTrackSettings();if(!t||!r||!n)return;let{bitrateMax:i,bitrateMin:o}=this._encoderConfig;if(o==null||i==null){let{max:a,min:s}=function(c,l,u,d,f){let p=L("BITRATE_ADAPTER_TYPE");if(p==="DEFAULT_BITRATE")return{min:d,max:f};if(f===void 0){var m;let y=Math.floor(200*Math.pow(u/15,.6)*Math.pow(c*l/640/360,.75));f=p==="STANDARD_BITRATE"?4*y:2*y,d=(m=d)!==null&&m!==void 0?m:y}else{var g;d=(g=d)!==null&&g!==void 0?g:Math.floor(f/10)}return{min:d,max:f}}(t,r,n,o,i);this._encoderConfig.bitrateMin=s,this._encoderConfig.bitrateMax=a,w.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(t,", h: ").concat(r,", fps: ").concat(n,"] => [brMax: ").concat(a,", brMin: ").concat(s,"]"))}}getVideoElementVisibleStatus(){try{var t,r;let n=this==null||(t=this._player)===null||t===void 0?void 0:t.getContainerElement(),i={track:this,element:this==null||(r=this._player)===null||r===void 0?void 0:r.getVideoElement(),slot:n==null?void 0:n.parentElement},{element:o,slot:a}=i;if(this.isPlaying&&o instanceof HTMLVideoElement&&a instanceof HTMLElement){let s=Pee.checkOneElementVisible(o),c=Object.assign({},s);if(c.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=c.visible;let l=Se.reportApiInvoke(null,{tag:Cr.TRACER,name:Qr.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});c.visible?l.onSuccess("Video is visible"):l.onSuccess("Invisible because of ".concat(c.reason))}return c}return}catch(n){throw new J(O.GET_VIDEO_ELEMENT_VISIBLE_ERROR,n.message)}}async renewMediaStreamTrack(t){}pipe(t){if(this.processor===t)return t;if(t._source)throw new J(O.INVALID_OPERATION,"Processor ".concat(t.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=t,this.processor._source=this,t.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),t}unpipe(){if(!this.processor)return;let t=this.processor;this.processor._source=void 0,this.processor=void 0,t.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(t){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this._encoderConfig;t&&(n=hr(hr({},n),xc(t))),n=Kd(n);let i=er(8,"track-video-cloned-"),o=new Cte(r?this._mediaStreamTrack.clone():this._mediaStreamTrack,n,Kd(this._scalabilityMode),this._optimizationMode,i,Kd(this._hints));return t&&n&&o.setEncoderConfiguration(n),w.debug("clone video track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(r)),o}async replaceTrack(t,r){if(!(t instanceof MediaStreamTrack))throw new J(O.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(t.kind!=="video")throw new J(O.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(t,r,!0),this.updateMediaStreamTrackResolution()}sendSeiData(t){if(Zu(()=>{Se.reportApiInvoke(null,{name:Qr.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:Cr.TRACER}).onSuccess("")},this._mediaStreamTrack.id||this.getTrackId()),!L("ENABLE_VIDEO_SEI")||!L("ENABLE_ENCODED_TRANSFORM"))return void w.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(t instanceof Uint8Array==0)return new J(O.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();let r=this.getRTCRtpTransceiver();if(!r)return void w.warning("Video track is not published, SEI can not be send");let n=r.sender.getParameters();if(n.codecs.length===0)return;let i=n.codecs[0].mimeType.toLocaleLowerCase();i==="video/h264"?this.safeEmit("sei-to-send",t):w.warning("SEI is not supported by ".concat(i))}bindProcessorDestinationEvents(){this.processorDestination.on(Fi.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(),await Jt(this,ye.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Jt(this,ye.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Fi.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(na.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(na.REQUEST_CONSTRAINTS)}},bt(yt.prototype,"play",[b8,w8],Object.getOwnPropertyDescriptor(yt.prototype,"play"),yt.prototype),bt(yt.prototype,"stop",[S8],Object.getOwnPropertyDescriptor(yt.prototype,"stop"),yt.prototype),bt(yt.prototype,"setEnabled",[T8,C8,R8],Object.getOwnPropertyDescriptor(yt.prototype,"setEnabled"),yt.prototype),bt(yt.prototype,"setMuted",[I8,x8,A8],Object.getOwnPropertyDescriptor(yt.prototype,"setMuted"),yt.prototype),bt(yt.prototype,"setEncoderConfiguration",[N8,O8],Object.getOwnPropertyDescriptor(yt.prototype,"setEncoderConfiguration"),yt.prototype),bt(yt.prototype,"getStats",[k8],Object.getOwnPropertyDescriptor(yt.prototype,"getStats"),yt.prototype),bt(yt.prototype,"setBeautyEffect",[P8,D8],Object.getOwnPropertyDescriptor(yt.prototype,"setBeautyEffect"),yt.prototype),bt(yt.prototype,"getCurrentFrameData",[L8],Object.getOwnPropertyDescriptor(yt.prototype,"getCurrentFrameData"),yt.prototype),bt(yt.prototype,"getCurrentFrameImage",[M8],Object.getOwnPropertyDescriptor(yt.prototype,"getCurrentFrameImage"),yt.prototype),bt(yt.prototype,"setBitrateLimit",[j8],Object.getOwnPropertyDescriptor(yt.prototype,"setBitrateLimit"),yt.prototype),bt(yt.prototype,"setOptimizationMode",[U8],Object.getOwnPropertyDescriptor(yt.prototype,"setOptimizationMode"),yt.prototype),bt(yt.prototype,"setScalabiltyMode",[F8],Object.getOwnPropertyDescriptor(yt.prototype,"setScalabiltyMode"),yt.prototype),bt(yt.prototype,"updateMediaStreamTrackResolution",[V8],Object.getOwnPropertyDescriptor(yt.prototype,"updateMediaStreamTrackResolution"),yt.prototype),bt(yt.prototype,"pipe",[B8],Object.getOwnPropertyDescriptor(yt.prototype,"pipe"),yt.prototype),bt(yt.prototype,"unpipe",[$8],Object.getOwnPropertyDescriptor(yt.prototype,"unpipe"),yt.prototype),bt(yt.prototype,"close",[H8],Object.getOwnPropertyDescriptor(yt.prototype,"close"),yt.prototype),bt(yt.prototype,"replaceTrack",[z8],Object.getOwnPropertyDescriptor(yt.prototype,"replaceTrack"),yt.prototype),yt),Ek=(G8=De({argsMap:(e,t)=>[e.getTrackId(),t]}),W8=Mr(),K8=am("CameraVideoTrack","_enabledMutex"),q8=De({argsMap:(e,t)=>[e.getTrackId(),t]}),Y8=Mr(),X8=De({argsMap:(e,t)=>[e.getTrackId(),t]}),J8=Mr(),Q8=De({argsMap:e=>[e.getTrackId()]}),Lo=class Rte extends ir{get __className__(){return"CameraVideoTrack"}constructor(t,r,n,i,o,a){super(t,xc(r.encoderConfig),i,o,a),Q(this,"_config",void 0),Q(this,"_originalConstraints",void 0),Q(this,"_constraints",void 0),Q(this,"_enabled",!0),Q(this,"_deviceName","default"),Q(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(om()||ik())&&!function(){let s=St();if(s.os!==mn.IOS||!s.osVersion)return!1;let c=s.osVersion.split(".");return Number(c[0])===15&&Number(c[1])>=2}()&&Nee()&&this._enabled&&!this._isClosed&&(w.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=r,this._originalConstraints=n,this._constraints=n,this._deviceName=t.label,this._encoderConfig=xc(this._config.encoderConfig),Ht.on(kn.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Ht.on(kn.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(t){return typeof t=="string"?this._setDeviceById(t):t.deviceId?this._setDeviceById(t.deviceId):t.facingMode?this._setDeviceByFacingModel(t.facingMode):void 0}async _setDeviceById(t){if(w.info("[".concat(this.getTrackId(),"] set device to ").concat(t)),this._enabled)try{let r=await qo.getDeviceById(t),n={};n.video=hr({},this._constraints),n.video.deviceId={exact:t},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let i=null;try{i=await zo(n,this.getTrackId())}catch(o){throw w.error("[".concat(this.getTrackId(),"] setDevice failed"),o.toString()),i=await zo({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),o}await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=r.label,this._config.cameraId=t,this._constraints.deviceId={exact:t}}catch(r){throw w.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{let r=await qo.getDeviceById(t);this._deviceName=r.label,this._config.cameraId=t,this._constraints.deviceId={exact:t}}catch(r){throw w.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}w.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(t){w.info("[".concat(this.getTrackId(),"] set facingMode ").concat(t));let r={video:hr(hr({},this._constraints),{},{deviceId:void 0,facingMode:{exact:t}})};if(this._enabled){this._originMediaStreamTrack.stop();let n=null;try{n=await zo(r,this.getTrackId())}catch(i){throw w.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),i.toString()),n=await zo({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),i}await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=t,this._config.cameraId=void 0,this._constraints=hr({},r.video),w.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(t,r){if(!r){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(w.info("[".concat(this.getTrackId(),"] start setEnabled"),t),t){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{let n=await zo({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1)}await Jt(this,ye.NEED_ENABLE_TRACK,this)}catch(n){throw w.error("[".concat(this.getTrackId(),"] setEnabled true error"),n.toString()),n}this.updateMediaStreamTrackResolution(),w.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),r||(this._enabled=!1);try{await Jt(this,ye.NEED_DISABLE_TRACK,this)}catch(n){throw w.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}w.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(t,r){if(!this._enabled)throw new J(O.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");t=xc(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate||t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate||t.bitrateMin);let n=Vr(this._config);n.encoderConfig=t;let i=iS(n);(Wn()||Ui()||gs())&&(i.deviceId=void 0),w.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(i));try{await this._originMediaStreamTrack.applyConstraints(i),this.updateMediaStreamTrackResolution()}catch(o){let a=new J(O.UNEXPECTED_ERROR,o.toString());throw w.error("[".concat(this.getTrackId(),"] applyConstraints error"),a.toString()),a}this._config=n,this._constraints=i,this._originalConstraints=i,this._encoderConfig=t,this._hints.indexOf(lr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Jt(this,ye.NEED_UPDATE_VIDEO_ENCODER,this)}catch(o){return o.throw(w)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ui()||gs())&&this._enabled&&!this._isClosed&&Ht.duringInterruption){let t=async()=>{Ht.off(kn.IOS_INTERRUPTION_END,t),this._enabled&&!this._isClosed&&(w.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Ht.on(kn.IOS_INTERRUPTION_END,t)}else w.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Gm.TRACK_ENDED)}async renewMediaStreamTrack(t){let r=t||this._constraints,n=qo.searchDeviceIdByName(this._deviceName);if(n&&!r.deviceId&&(r.deviceId={exact:n}),this._enabled){let i=await zo({video:r},this.getTrackId());this._constraints=r,await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),Ht.off(kn.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Ht.off(kn.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(t){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this._encoderConfig;t&&(n=hr(hr({},n),xc(t))),n=Kd(n);let i=er(8,"track-cam-cloned-"),o=new Rte(r?this._mediaStreamTrack.clone():this._mediaStreamTrack,Kd(hr(hr({},this._config),{},{encoderConfig:n})),Kd(this._constraints),Kd(this._scalabilityMode),this._optimizationMode,i);return t&&n&&o.setEncoderConfiguration(n),w.debug("clone track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(r)),o}bindProcessorContextEvents(){this.processorContext.on(na.REQUEST_UPDATE_CONSTRAINTS,async(t,r,n)=>{try{let i=Object.assign({},this._originalConstraints,...t);await this.renewMediaStreamTrack(i),r()}catch(i){n(i)}}),this.processorContext.on(na.REQUEST_CONSTRAINTS,async t=>{t(this._originMediaStreamTrack.getSettings())})}},bt(Lo.prototype,"setDevice",[G8,W8],Object.getOwnPropertyDescriptor(Lo.prototype,"setDevice"),Lo.prototype),bt(Lo.prototype,"setEnabled",[K8,q8,Y8],Object.getOwnPropertyDescriptor(Lo.prototype,"setEnabled"),Lo.prototype),bt(Lo.prototype,"setEncoderConfiguration",[X8,J8],Object.getOwnPropertyDescriptor(Lo.prototype,"setEncoderConfiguration"),Lo.prototype),bt(Lo.prototype,"close",[Q8],Object.getOwnPropertyDescriptor(Lo.prototype,"close"),Lo.prototype),Lo);function Gx(e,t,r,n){r.optimizationMode&&(n&&n.width&&n.height?(r.encoderConfig=hr(hr({},n),{},{bitrateMin:n.bitrateMin,bitrateMax:n.bitrateMax}),r.optimizationMode!=="motion"&&r.optimizationMode!=="detail"||(t.contentHint=r.optimizationMode,t.contentHint===r.optimizationMode?w.debug("[".concat(e,"] set content hint to"),r.optimizationMode):w.debug("[".concat(e,"] set content hint failed")))):w.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var Z8,e$,t$,r$,da,n$,i$,o$,a$,s$,c$,Ei,Ite=class extends ate{getUserId(){return this._userId}constructor(e,t,r,n){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(n.clientId,"_").concat(er(5,""))),Q(this,"_userId",void 0),Q(this,"_uintId",void 0),Q(this,"_isDestroyed",!1),Q(this,"store",void 0),Q(this,"processor",void 0),Q(this,"processorContext",void 0),this._userId=t,this._uintId=r,this.store=n}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,w.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}},Op=(Z8=De({argsMap:(e,t,r)=>[e.getTrackId(),typeof t=="string"?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",r]}),e$=De({argsMap:e=>[e.getTrackId()]}),t$=De({argsMap:(e,t)=>[e.getTrackId(),t.name]}),r$=De({argsMap:e=>[e.getTrackId()]}),bt((da=class extends Ite{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Si.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,r,n){super(e,t,r,n),Q(this,"_videoVisibleTimer",null),Q(this,"_previousVideoVisibleStatus",void 0),Q(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),Q(this,"trackMediaType",Wm.VIDEO),Q(this,"_videoWidth",void 0),Q(this,"_videoHeight",void 0),Q(this,"_player",void 0),Q(this,"processorDestination",void 0),Q(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new yte(this.getTrackId(),"remote"),this.processorDestination=new gte(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Zu(()=>{w.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Ca(this,ye.GET_STATS)||hr({},ote)}play(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="string"){let n=document.getElementById(e);n?e=n:(w.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}w.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));let r=hr(hr({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(r):(e instanceof HTMLVideoElement?this._player=new ML(r):this._player=new Tte(r),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(Np.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=n=>{this.safeEmit(Np.VIDEO_STATE_CHANGED,n)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{let n=this.getVideoElementVisibleStatus();this.safeEmit(Np.VIDEO_ELEMENT_VISIBLE_STATUS,n)}catch{}},L("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,w.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){_te(this._originMediaStreamTrack).then(e=>{let[t,r]=e;this._videoHeight=r,this._videoWidth=t}).catch(cC)}_updatePlayerSource(){w.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;let r=this==null||(e=this._player)===null||e===void 0?void 0:e.getContainerElement(),n={track:this,element:this==null||(t=this._player)===null||t===void 0?void 0:t.getVideoElement(),slot:r==null?void 0:r.parentElement},{element:i,slot:o}=n;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){let a=Pee.checkOneElementVisible(i),s=Object.assign({},a);if(s.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=s.visible;let c=Se.reportApiInvoke(null,{tag:Cr.TRACER,name:Qr.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});s.visible?c.onSuccess("Video is visible"):c.onSuccess("Invisible because of ".concat(s.reason))}return s}return}catch(r){throw new J(O.GET_VIDEO_ELEMENT_VISIBLE_ERROR,r.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new J(O.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;let e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Fi.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Fi.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(uh.SEI_RECEIVED,e)}}).prototype,"play",[Z8],Object.getOwnPropertyDescriptor(da.prototype,"play"),da.prototype),bt(da.prototype,"stop",[e$],Object.getOwnPropertyDescriptor(da.prototype,"stop"),da.prototype),bt(da.prototype,"pipe",[t$],Object.getOwnPropertyDescriptor(da.prototype,"pipe"),da.prototype),bt(da.prototype,"unpipe",[r$],Object.getOwnPropertyDescriptor(da.prototype,"unpipe"),da.prototype),da),kp=(n$=De({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),i$=De({argsMap:(e,t)=>[e.getTrackId(),t]}),o$=De({argsMap:e=>[e.getTrackId()]}),a$=De({argsMap:e=>[e.getTrackId()]}),s$=De({argsMap:(e,t)=>[e.getTrackId(),t.name]}),c$=De({argsMap:e=>[e.getTrackId()]}),bt((Ei=class extends Ite{get isPlaying(){return this._useAudioElement?Yi.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,r,n){super(e,t,r,n),Q(this,"trackMediaType",Wm.AUDIO),Q(this,"_source",void 0),Q(this,"_useAudioElement",!0),Q(this,"_volume",100),Q(this,"processorContext",void 0),Q(this,"processorDestination",void 0),Q(this,"_played",!1),Q(this,"_bypassWebAudio",!1),L("DISABLE_WEBAUDIO")?(this._source=new vk,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new lte(e,!0),L("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(Wo.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(Np.FIRST_FRAME_DECODED)}),this.processorContext=new Ete(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new vte(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Wo.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Wo.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Wo.ON_AUDIO_BUFFER),this._source.on(Wo.ON_AUDIO_BUFFER,r=>e(r))}setVolume(e){this._volume=e,this._useAudioElement?Yi.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!nte())throw new J(O.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Yi.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Zu(()=>{w.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Ca(this,ye.GET_STATS)||hr({},ite)}play(){w.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(w.debug("[".concat(this.getTrackId(),"] use audio element to play")),Yi.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){w.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?Yi.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];w.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Yi.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new J(O.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new J(O.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new J(O.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;let t=this.processor;(e=this._source.processSourceNode)===null||e===void 0||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Fi.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(Fi.ON_NODE,e=>{this._source.processedNode=e;let t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Fi.ON_TRACK),this.processorDestination.removeAllListeners(Fi.ON_NODE)}}).prototype,"setVolume",[n$],Object.getOwnPropertyDescriptor(Ei.prototype,"setVolume"),Ei.prototype),bt(Ei.prototype,"setPlaybackDevice",[i$],Object.getOwnPropertyDescriptor(Ei.prototype,"setPlaybackDevice"),Ei.prototype),bt(Ei.prototype,"play",[o$],Object.getOwnPropertyDescriptor(Ei.prototype,"play"),Ei.prototype),bt(Ei.prototype,"stop",[a$],Object.getOwnPropertyDescriptor(Ei.prototype,"stop"),Ei.prototype),bt(Ei.prototype,"pipe",[s$],Object.getOwnPropertyDescriptor(Ei.prototype,"pipe"),Ei.prototype),bt(Ei.prototype,"unpipe",[c$],Object.getOwnPropertyDescriptor(Ei.prototype,"unpipe"),Ei.prototype),Ei),il=new class extends _r{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),Q(this,"_lastHiddenTime",0),Q(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),w.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}},xte=class extends _r{constructor(e,t){super(),Q(this,"trackMediaType",Wm.DATA),Q(this,"_version",1),Q(this,"_type",3),Q(this,"_config",void 0),Q(this,"_originDataChannel",void 0),Q(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),Q(this,"_dataStreamPacketHandler",{serialize:r=>r,deserialize:r=>r}),Q(this,"_datachannelEventMap",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader()}useDataStream(e){this._dataStreamPacketHandler=e}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return L("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var e,t;return(e=(t=this._originDataChannel)===null||t===void 0?void 0:t.readyState)!==null&&e!==void 0?e:"connecting"}get _originDataChannelId(){var e,t;return(e=(t=this._originDataChannel)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new he((e,t)=>{if(this._originDataChannel){this._originDataChannel.readyState==="open"&&e();let r=setTimeout(()=>{var n;t(new J(O.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat((n=this._originDataChannel)===null||n===void 0?void 0:n.id)))},1e4);this._originDataChannel.onopen=()=>{clearTimeout(r),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(r),new J(O.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new J(O.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))})}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){let e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[yb.OPEN,yb.CLOSE,yb.ERROR].forEach(t=>{let r=()=>{this.emit(t)};this._datachannelEventMap.set(t,r),e.addEventListener(t,r)})}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach(t=>{let[r,n]=t;e.removeEventListener(r,n)}),this._datachannelEventMap.clear()}},w6e=class extends xte{constructor(e){super(e),Q(this,"_messageListener",void 0),this._messageListener=t=>{if(t.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);let r=t.data.slice(0,this._dataStreamPacketHeader.byteLength),n=new DataView(r).getUint8(3);if(n!==this.id)return void(L("SHOW_DATASTREAM2_LOG")&&w.debug("invalid datachannel id: ".concat(n," !== ").concat(this.id)));let i=t.data.slice(this._dataStreamPacketHeader.byteLength);i=this._dataStreamPacketHandler.deserialize(i),this.emit(yb.MESSAGE,i)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}},S6e=class extends xte{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);let r=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);r.set(new Uint8Array(this._dataStreamPacketHeader),0),r.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(r.buffer)}}};function Eb(){let e=new Blob([atob("ZnVuY3Rpb24gZShlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLGE9W10sbz0wO2Zvcig7YS5sZW5ndGg8bjspbyszPG4mJjA9PT1yW29dJiYwPT09cltvKzFdJiYzPT09cltvKzJdJiYoMD09PXJbbyszXXx8MT09PXJbbyszXXx8Mj09PXJbbyszXXx8Mz09PXJbbyszXSk/KGEucHVzaChyW29dLHJbbysxXSxyW28rM10pLG8rPTQpOihhLnB1c2gocltvXSksbysrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9ZnVuY3Rpb24gdChlLHQpe2NvbnN0IG49ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmxlbmd0aDtsZXQgbj1bXSxyPTA7Zm9yKDtyPHQ7KXIrMjx0JiYwPT09ZVtyXSYmMD09PWVbcisxXSYmKDA9PT1lW3IrMl18fDE9PT1lW3IrMl18fDI9PT1lW3IrMl18fDM9PT1lW3IrMl0pPyhuLnB1c2goZVtyXSxlW3IrMV0sMyxlW3IrMl0pLHIrPTMpOihuLnB1c2goZVtyXSkscisrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9KHQpLHI9bi5sZW5ndGgsYT1NYXRoLmZsb29yKHIvMjU1KSxvPXIlMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNithKzErcitlLmJ5dGVMZW5ndGgpO3NbMF09MCxzWzFdPTAsc1syXT0wLHNbM109MSxzWzRdPTYsc1s1XT0xMDE7bGV0IGk9MDtmb3IoO2k8YTspc1s2K2ldPTI1NSxpKys7cmV0dXJuIHNbNitpXT1vLGkrKyxzLnNldChuLDYraSkscy5zZXQobmV3IFVpbnQ4QXJyYXkoZSksNitpK3IpLHMuYnVmZmVyfW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+LTEmJi0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJDaHJvbWUiKSYmKHNlbGYub25ydGN0cmFuc2Zvcm09bj0+e2NvbnN0IHI9bi50cmFuc2Zvcm1lcjtsZXQgYT1bXTtyLm9wdGlvbnMucG9ydC5vbm1lc3NhZ2U9ZT0+e2UuZGF0YS5zZWkmJmEucHVzaChlLmRhdGEuc2VpKX0sc2VsZi5wb3N0TWVzc2FnZSgic3RhcnRlZCIpO2NvbnN0IG89ci5yZWFkYWJsZS5nZXRSZWFkZXIoKSxzPXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7InJ4Ij09PXIub3B0aW9ucy5uYW1lP2Z1bmN0aW9uIHQobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgdD1mdW5jdGlvbih0KXtjb25zdCBuPW5ldyBEYXRhVmlldyh0LmRhdGEpO2xldCByPTA7Zm9yKDtyKzQ8dC5kYXRhLmJ5dGVMZW5ndGg7KXtpZigwPT09bi5nZXRVaW50OChyKzApJiYwPT09bi5nZXRVaW50OChyKzEpJiYwPT09bi5nZXRVaW50OChyKzIpJiYxPT09bi5nZXRVaW50OChyKzMpJiY2PT09bi5nZXRVaW50OChyKzQpKXtsZXQgYT1yKzYsbz0wLHM9MDtmb3IoOzI1NT09PShzPW4uZ2V0VWludDgoYSsrKSk7KW8rPTI1NTtvKz1zO2NvbnN0IGk9ZSh0LmRhdGEsYSxvKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoaSl9cisrfXJldHVybiBudWxsfShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1hLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout(()=>N6.revokeObjectURL(e),0),new Worker(N6.createObjectURL(e))}var u_=new Map,d_=new Map;function T6e(e,t,r){let n=new Uint8Array(e,t,r),i=[],o=0;for(;i.length<r;)o+3<r&&n[o]===0&&n[o+1]===0&&n[o+2]===3&&(n[o+3]===0||n[o+3]===1||n[o+3]===2||n[o+3]===3)?(i.push(n[o],n[o+1],n[o+3]),o+=4):(i.push(n[o]),o++);return new Uint8Array(i)}var h_=new Map;async function C6e(e,t){if(!Ct().supportWebRTCEncodedTransform)return void w.warning("browser not support video encoded transform");if(h_.has(e)||!e.track)return;let r={track:e.track};if(Fu()){if(!e.createEncodedStreams)return void w.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(s){return void w.error("create video-encoded-streams error",s&&s.message)}let o=[];t.on("sei-to-send",s=>{o.push(s)});let a=new TransformStream({transform(s,c){r.controller||(r.controller=c),e.track&&e.track.id!==r.track.id&&(w.debug("video track changed: ".concat(r.track.id," => ").concat(e.track.id)),r.track.removeEventListener("ended",n),r.track=e.track,r.track.addEventListener("ended",n));let l=o.shift();l&&(s.data=function(u,d){let f=function(E){let b=E.length,S=[],A=0;for(;A<b;)A+2<b&&E[A]===0&&E[A+1]===0&&(E[A+2]===0||E[A+2]===1||E[A+2]===2||E[A+2]===3)?(S.push(E[A],E[A+1],3,E[A+2]),A+=3):(S.push(E[A]),A++);return new Uint8Array(S)}(d),p=f.length,m=Math.floor(p/255),g=p%255,y=new Uint8Array(6+m+1+p+u.byteLength);y[0]=0,y[1]=0,y[2]=0,y[3]=1,y[4]=6,y[5]=101;let v=0;for(;v<m;)y[6+v]=255,v++;return y[6+v]=g,v++,y.set(f,6+v),y.set(new Uint8Array(u),6+v+p),y.buffer}(s.data,l)),c.enqueue(s)}});i.readable.pipeThrough(a).pipeTo(i.writable)}else{if(!Wn())return;{if(typeof RTCRtpScriptTransform>"u")return void w.warning("browser not support RTCRtpScriptTransform");let i=Eb(),o=new MessageChannel;await new he(s=>i.onmessage=c=>{c.data==="registered"&&s(void 0)});let a=new RTCRtpScriptTransform(i,{name:"tx",port:o.port2},[o.port2]);e.transform=a,await new he(s=>i.onmessage=c=>{c.data==="started"&&s(void 0)}),t.on("sei-to-send",s=>{o.port1.postMessage({sei:s})}),o.port1.onmessage=s=>{var c;s.data.transformed&&e.track&&((c=e.track)===null||c===void 0?void 0:c.id)!==r.track.id&&(w.debug("video track changed: ".concat(r.track.id," => ").concat(e.track.id)),r.track.removeEventListener("ended",n),r.track=e.track,r.track.addEventListener("ended",n))},r.worker=i}}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",n)}let i=h_.get(e);if(i){h_.delete(e);try{var o,a;(o=i.controller)===null||o===void 0||o.terminate(),(a=i.worker)===null||a===void 0||a.terminate()}catch(s){w.warning(s&&s.message)}}}h_.set(e,r),e.track.addEventListener("ended",n)}var Pg=new Map;(function(){let e=St();xn.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),xn.getStreamFromExtension=e.name===Mt.CHROME&&Number(e.version)>34,xn.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t=new RTCPeerConnection,r=!1;try{t.addTransceiver("audio"),r=!0}catch{}return t.close(),r}(),xn.supportMinBitrate=e.name===Mt.CHROME||e.name===Mt.EDGE,xn.supportSetRtpSenderParameters=function(){let t=St();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Qu()||!(!Wn()&&!eS())||t.name===Mt.FIREFOX&&Number(t.version)>=64)}(),e.name===Mt.SAFARI&&(Number(e.version)>=14?xn.supportDualStream=!0:xn.supportDualStream=!1),xn.webAudioMediaStreamDest=function(){let t=St();return!(t.name===Mt.SAFARI&&Number(t.version)<12)}(),xn.supportReplaceTrack=!!window.RTCRtpSender&&typeof RTCRtpSender.prototype.replaceTrack=="function",xn.supportWebGL=typeof WebGLRenderingContext<"u",xn.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Qu()||(xn.webAudioWithAEC=!0),xn.supportShareAudio=function(){let t=St();return(t.os===mn.WIN_10||t.os===mn.WIN_81||t.os===mn.WIN_7||t.os===mn.LINUX||t.os===mn.MAC_OS||t.os===mn.CHROMIUM_OS)&&t.name===Mt.CHROME&&Number(t.version)>=74}(),xn.supportDataChannel=!!(nk(76)||function(t){let r=St();return!(r.name!==Mt.FIREFOX||!r.osVersion)&&Number(r.version)>=t}(68)||Iee(14)),xn.supportPCSetConfiguration=function(){let t=window.RTCPeerConnection;return!Rr()&&!!t&&t.prototype.setConfiguration instanceof Function}(),xn.supportWebRTCEncodedTransform=function(){let t=St();return t.name==="Chrome"&&Number(t.version)>=86||t.name==="Safari"&&Number(t.version)>=15}(),xn.supportWebRTCInsertableStream=function(){let t=St();return(t.name===Mt.CHROME||t.name===Mt.EDGE)&&Number(t.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),xn.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,xn.supportWebCrypto=typeof window<"u"&&window.crypto!==void 0&&window.crypto.subtle!==void 0,sC(()=>{xn.supportDualStreamEncoding=function(){let t=St();return!!L("DISABLE_WEBAUDIO")||t.name==="Safari"&&Number(t.version)>=14||!!(t.name==="Chrome"&&/Windows/i.test(t.os||"")&&Number(t.version)>=100&&L("CHROME_DUAL_STREAM_USE_ENCODING"))}(),w.info("browser compatibility",JSON.stringify(xn),JSON.stringify(e))})})();var aS=class _k extends _r{constructor(t,r){super(),I(this,"signal",void 0),I(this,"token",void 0),I(this,"tokenTimeout",void 0),I(this,"tokenInterval",void 0),I(this,"_sequence",0),I(this,"userMap",new Map),I(this,"encoder",new TextEncoder),this.signal=t,this.token=r;let n=()=>{this.signal.connectionState===Zt.CONNECTED&&this.check(),this.userMap.size===0?this.tokenInterval=window.setTimeout(n,1e3):this.tokenInterval=window.setTimeout(n,3*L("P2P_TOKEN_INTERVAL"))};n()}async send(t,r,n,i,o){var a,s,c;if(this.userMap.size===0)return;let l=Array.from(Sl(a=this.userMap).call(a))[0].token;typeof r!="string"&&(r=JSON.stringify(r)),i=(s=i)!==null&&s!==void 0?s:er(6,""),o=(c=o)!==null&&c!==void 0?c:this._sequence++;let u={_id:i,_type:t,_seq:o,_message:r,token:"".concat(this.token,"_").concat(l)};L("SHOW_P2P_LOG")&&w.debug("send message",u,"noNeedResponse : ".concat(n)),this.splitMessage(JSON.stringify(u)).forEach(f=>{this.signal.request(Fe.DATA_STREAM,{payload:Vu(this.encoder.encode(f))})});let d=new he((f,p)=>{let m=window.setTimeout(()=>{this.off("res-@".concat(i,"_ack"),g),this.off("res-@".concat(i),v),this.off(Tf.ABORT,y),w.debug("[external-signal] request timeout, type: ".concat(t,", requestId: ").concat(i)),this.userMap.size===0?p(new J(O.INVALID_REMOTE_USER)):p(new J(O.TIMEOUT))},L("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),g=()=>{m&&window.clearTimeout(m),this.off(Tf.ABORT,y),n&&f()},y=()=>{m&&window.clearTimeout(m),this.off("res-@".concat(i,"_ack"),g),this.off("res-@".concat(i),v),p(new J(O.EXTERNAL_SIGNAL_ABORT,"type: ".concat(t,", requestId: ").concat(i)))};this.once(Tf.ABORT,y),this.once("res-@".concat(i,"_ack"),g);let v=(b,S)=>{E=!0,m&&window.clearTimeout(m),this.off("res-@".concat(i,"_ack"),g),this.off(Tf.ABORT,y),b==="success"?f(S):p(new J(O.P2P_MESSAGE_FAILED,"request ".concat(t," failed, requestId: ").concat(i)))},E=!1;n||(this.once("res-@".concat(i),v),Ln(L("SIGNAL_REQUEST_TIMEOUT")).then(()=>{E||w.warning("external_signal request timeout, type: ".concat(t,", requestId: ").concat(i,", ").concat(u))}))});try{return await d}catch(f){if(f.code===O.TIMEOUT)return await this.send(t,r,n,i,o);throw f}}onMessage(t){var r;let{_uid:n}=t,i,o=this.userMap.get(n);if(o)i=o.splitMessageMap;else{if(this.userMap.size>0||!("_type"in t)||t._type!==Pr.CHECK)return;let{token:l}=t;i=new Map,o={uid:n,isStart:!0,token:l,splitMessageMap:i,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(n,o),this.signal.emit(pt.ON_USER_ONLINE,{uid:n}),this.handleUserOnline()}if("id"in t&&"total"in t){var a;let{id:l,total:u}=t,d=(a=i.get(l))!==null&&a!==void 0?a:[];if(d.push(t),i.has(l)||i.set(l,d),d.length!==u)return;{let f=Lv(d).call(d,(p,m)=>p.index-m.index).map(p=>p.payload).join("");i.delete(l),(t=JSON.parse(f))._uid=n}}let{_type:s,token:c}=t;if(me(r=[Pr.ACK,Pr.CHECK]).call(r,s))return s===Pr.CHECK&&this.handleCheckToken(o,c),void this.receiveMessage(t);c==="".concat(o.token,"_").concat(this.token)?this.handleReceivedMessage(t):w.debug('Receive unexpected message", '.concat(c,", cur_token: ").concat(o.token,"_").concat(this.token),t)}check(){let t={_id:er(6,""),token:this.token,_type:Pr.CHECK};L("SHOW_P2P_LOG")&&w.debug("send message",t),this.signal.request(Fe.DATA_STREAM,{payload:Vu(this.encoder.encode(JSON.stringify(t)))})}ack(t){let r={_id:t,_type:Pr.ACK,token:this.token};L("SHOW_P2P_LOG")&&w.debug("send message",r),this.signal.request(Fe.DATA_STREAM,{payload:Vu(this.encoder.encode(JSON.stringify(r)))})}response(t,r,n){this.send(Pr.RESPONSE,JSON.stringify({success:!n,message:r}),!0,t)}handleReceivedMessage(t){let r=()=>{this.userMap.forEach(l=>{let{receivedMessagesMap:u,nextExpectedSequenceNumber:d}=l;for(;u.has(d);){let f=u.get(d);u.delete(d),this.receiveMessage(f),l.nextExpectedSequenceNumber++}})};if(!t)return void r();let{_uid:n,_seq:i}=t,o=this.userMap.get(n),{receivedMessagesMap:a,isStart:s,nextExpectedSequenceNumber:c}=o;if(i<c)return this.ack(t._id),void w.debug("[external-signal] receive old message, seq: ".concat(i,", ").concat(t._message));a.set(i,t),s&&i===c&&(this.receiveMessage(t),a.delete(c),o.nextExpectedSequenceNumber++,r())}receiveMessage(t){let{_id:r,_type:n,_message:i,_uid:o}=t;if(L("SHOW_P2P_LOG")&&w.debug("receive message",t),r){let a;switch(t._type!==Pr.ACK&&(i&&(a=JSON.parse(i)),this.ack(t._id)),t._type){case Pr.CANDIDATE:case Pr.CONTROL:this.signal.emit(n,a,o);break;case Pr.PUBLISH:case Pr.UNPUBLISH:case Pr.RESTART_ICE:case Pr.CALL:a.uid=o,Kn(this.signal,n,a).then(s=>{this.response(t._id,s)}).catch(()=>{this.response(t._id,void 0,!0)});break;case Pr.ACK:this.getListeners("res-@".concat(r,"_ack")).length>0&&this.emit("res-@".concat(r,"_ack"));break;case Pr.RESPONSE:{let{success:s,message:c}=a;this.emit("res-@".concat(r),s?"success":"failed",c);break}}}}splitMessage(t){if(t.length<_k.MAX_MESSAGE_SIZE)return[t];let r=[],{remoteToken:n}=JSON.parse(t),i=er(6,""),o=0,a=800,s=Math.ceil(t.length/a);for(;t.length>0;){o++;let c={id:i,index:o,total:s,payload:t.slice(0,a),token:"".concat(this.token,"_").concat(n)};JSON.stringify(c).length>_k.MAX_MESSAGE_SIZE?a-=50:(r.push(c),t=t.slice(a))}return r.map(c=>JSON.stringify(c))}handleCheckToken(t,r){return t.token!==r?(w.debug("token changed, from ".concat(t.token," to ").concat(r)),this.reset(t.uid,r),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout(()=>{w.debug("token timeout, ".concat(r)),this.reset(t.uid)},L("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){let t=await Kn(this.signal,Pr.CALL,void 0),r=await this.send(Pr.CALL,t);this.signal.emit($e.P2P_CONNECTION,r,!0)}async reset(t,r){let n=this.userMap.get(t);n&&(this.emit(Tf.ABORT),this.signal.emit(pt.ON_USER_OFFLINE,{uid:n.uid,reason:BVe.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),r||(w.debug("change local token from ".concat(r," to ").concat(r)),this.token=er(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(Tf.ABORT)}};I(aS,"MAX_SIZE",1),I(aS,"MAX_MESSAGE_SIZE",1024);var l$=class extends _r{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===Zt.CONNECTED?this.emit($e.WS_CONNECTED):e===Zt.RECONNECTING?this.emit($e.WS_RECONNECTING,this._websocketReconnectReason):e===Zt.CLOSED&&this.emit($e.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),I(this,"_disconnectedReason",void 0),I(this,"_websocketReconnectReason",void 0),I(this,"_connectionState",Zt.CLOSED),I(this,"reconnectToken",void 0),I(this,"p2pToken",void 0),I(this,"websocket",void 0),I(this,"openConnectionTime",void 0),I(this,"clientId",void 0),I(this,"lastMsgTime",Date.now()),I(this,"uploadCache",[]),I(this,"uploadCacheInterval",void 0),I(this,"rttRolling",new Fee(5)),I(this,"pingpongTimer",void 0),I(this,"pingpongTimeoutCount",0),I(this,"joinResponse",void 0),I(this,"multiIpOption",void 0),I(this,"initError",void 0),I(this,"spec",void 0),I(this,"store",void 0),I(this,"_external_signal",void 0),I(this,"onWebsocketMessage",r=>{if(r.data instanceof ArrayBuffer)return void this.emit($e.ON_BINARY_DATA,r.data);let n=JSON.parse(r.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(n,"_id")){let i="res-@".concat(n._id);this.emit(i,n._result,n._message)}else if(Object.prototype.hasOwnProperty.call(n,"_type")){switch(n._type){case pt.ON_DATA_STREAM:return void this.handleDataStream(n._message);case pt.MUTE_AUDIO:case pt.MUTE_VIDEO:case pt.ON_P2P_LOST:case pt.ON_USER_ONLINE:return;case pt.ON_USER_OFFLINE:let{uid:i}=n._message;return w.debug("[".concat(this.clientId,"] user-offline uid: ").concat(i)),void this._external_signal.reset(i)}if(this.emit(n._type,n._message),n._type===pt.ON_NOTIFICATION&&this.handleNotification(n._message),n._type===pt.ON_USER_BANNED)switch(n._message.error_code){case 14:this.close(Bt.UID_BANNED);break;case 15:this.close(Bt.IP_BANNED);break;case 16:this.close(Bt.CHANNEL_BANNED)}if(n._type===pt.ON_USER_LICENSE_BANNED)switch(n._message.error_code){case Pe.ERR_LICENSE_MISSING:this.close(Bt.LICENSE_MISSING);break;case Pe.ERR_LICENSE_EXPIRED:this.close(Bt.LICENSE_EXPIRED);break;case Pe.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Bt.LICENSE_MINUTES_EXCEEDED);break;case Pe.ERR_LICENSE_PERIOD_INVALID:this.close(Bt.LICENSE_PERIOD_INVALID);break;case Pe.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Bt.LICENSE_MULTIPLE_SDK_SERVICE);break;case Pe.ERR_LICENSE_ILLEGAL:this.close(Bt.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new xL("gateway-".concat(this.clientId),this.spec.retryConfig,!0,L("JOIN_GATEWAY_USE_DUAL_DOMAIN"),L("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Zt.CONNECTED&&this.reconnect("retry",Gn.OFFLINE)}),this.p2pToken=er(6,""),this._external_signal=new aS(this,this.p2pToken)}async request(e,t,r,n){let i=er(6,""),o={_id:i,_type:e,_message:t},a=this.websocket.connectionID,s=()=>new he((p,m)=>{if(this.connectionState===Zt.CONNECTED)return p();let g=()=>{this.off($e.WS_CLOSED,y),p()},y=()=>{this.off($e.WS_CONNECTED,g),m(new J(O.WS_ABORT))};this.once($e.WS_CONNECTED,g),this.once($e.WS_CLOSED,y)});if(this.connectionState!==Zt.CONNECTING&&this.connectionState!==Zt.RECONNECTING||e===Fe.JOIN||e===Fe.REJOIN||await s(),this.websocket.sendMessage(o,!0),n)return;let c=new he((p,m)=>{let g=!1,y=(E,b)=>{g=!0,p({isSuccess:E==="success",message:b||{}}),this.off($e.WS_CLOSED,v),this.off($e.WS_RECONNECTING,v),this.emit($e.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),y);let v=()=>{m(new J(O.WS_ABORT,"type: ".concat(e))),this.off($e.WS_CLOSED,v),this.off($e.WS_RECONNECTING,v),this.off("res-@".concat(i),y)};this.once($e.WS_CLOSED,v),this.once($e.WS_RECONNECTING,v),Ln(L("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==a||g||(w.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit($e.REQUEST_TIMEOUT,e,t))})}),l=null;try{l=await c}catch(p){if(this.connectionState===Zt.CLOSED||e===Fe.LEAVE)throw new J(O.WS_ABORT);return!this.spec.forceWaitGatewayResponse||r?p.throw():e===Fe.JOIN||e===Fe.REJOIN?null:(await s(),await this.request(e,t))}if(l.isSuccess)return l.message;let u=Number(l.message.error_code||l.message.code),d=k0(u),f=new J(O.UNEXPECTED_RESPONSE,"".concat(d.desc,": ").concat(l.message.error_str),{code:u,data:l.message,desc:d.desc});return d.action==="success"?l.message:(w.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(d.desc,", action: ").concat(d.action)),u===Pe.ERR_TOO_MANY_BROADCASTERS?((e===Fe.JOIN||e===Fe.REJOIN)&&(this.initError=f,this.close()),f.throw()):d.action==="failed"?f.throw():d.action==="quit"?(this.initError=f,this.close(),f.throw()):(u===Pe.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,w.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Gn.MULTI_IP)):this.reconnect(d.action,Gn.SERVER_ERROR),e===Fe.JOIN||e===Fe.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new he(r=>{let n=i=>{(!t||t(i))&&(this.off(e,n),r(i))};this.on(e,n)})}uploadWRTCStats(e){if(!this.store.sessionId)return void w.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));let t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(O0.WRTC_STATS,t)}upload(e,t){let r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch{let n=L("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>n&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Zt.CONNECTED)return;let i=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(i._type,i._message)},L("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){let r={_type:e,_message:t};this.websocket.sendMessage(r)}async sendExtensionMessage(e,t,r){return await this._external_signal.send(e,t,r)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new he((t,r)=>{this.once($e.WS_CONNECTED,()=>t(this.joinResponse)),this.once($e.WS_CLOSED,()=>r(this.initError||new J(O.WS_ABORT))),this.connectionState=Zt.CONNECTING,this.websocket.init(e).catch(r)})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||Bt.LEAVE,this.connectionState=Zt.CLOSED,w.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),this.p2pToken=er(6,""),this._external_signal.clear(),this._external_signal=new aS(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit($e.ABORT_P2P_EXECUTION);let e=await Kn(this,$e.REQUEST_JOIN_INFO),t=await this.request(Fe.JOIN,e);if(!t)return this.emit($e.REPORT_JOIN_GATEWAY,O.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit($e.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;let r=qd(e.payload),n=new TextDecoder().decode(r),i=JSON.parse(n);"total"in i&&"id"in i||me(t=Object.values(Pr)).call(t,i._type)?(i._uid=e.uid,this._external_signal.onMessage(i)):this.emit(pt.ON_DATA_STREAM,e)}catch{this.emit(pt.ON_DATA_STREAM,e)}}handleNotification(e){w.debug("[".concat(this.clientId,"] receive notification: "),e);let t=k0(e.code);if(t.action!=="success"){if(t.action!=="failed")return t.action==="quit"?(t.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Bt.UID_BANNED),void this.close()):void this.reconnect(t.action,Gn.SERVER_ERROR);w.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;let e=L("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(w.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>L("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Gn.TIMEOUT):this.request(Fe.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;let r=Date.now()-t;this.rttRolling.add(r),L("REPORT_STATS")&&this.send(Fe.PING_BACK,{pingpongElapse:r})}).catch(r=>{})}handleWebsocketEvents(){this.websocket.on(We.RECONNECT_WAITTING_FINISH,e=>{this.emit($e.WS_RECONNECT_WAITTING_FINISH,e)}),this.websocket.on(We.RECONNECT_CREATE_CONNECTION,e=>{this.emit($e.WS_RECONNECT_CREATE_CONNECTION,e)}),this.websocket.on(We.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(We.CLOSED,()=>{this.connectionState=Zt.CLOSED}),this.websocket.on(We.FAILED,()=>{this._disconnectedReason=Bt.NETWORK_ERROR,this.connectionState=Zt.CLOSED}),this.websocket.on(We.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===Zt.CONNECTED?this.connectionState=Zt.RECONNECTING:this.connectionState=Zt.CONNECTING}),this.websocket.on(We.WILL_RECONNECT,(e,t,r)=>{e!=="retry"?(w.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0):w.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),r(e)}),this.websocket.on(We.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.join().catch(e=>{if(this.emit($e.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof J&&e.code===O.UNEXPECTED_RESPONSE&&e.data.code===Pe.ERR_NO_AUTHORIZED)return w.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Gn.SERVER_ERROR);w.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Gn.SERVER_ERROR):(this.initError=e,this.close())})}),this.websocket.on(We.REQUEST_NEW_URLS,(e,t)=>{Kn(this,$e.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)}),this.websocket.on(We.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(pt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}},Ate={exports:{}};Ate.exports=(()=>{var e={8:(n,i,o)=>{o.r(i),o.d(i,{Parser:()=>H,Printer:()=>$,parse:()=>P,print:()=>B});let a=`
`,s="".concat("\r").concat(a),c=" ",l;function u(R){return R>="0"&&R<="9"}function d(R){return R>="!"&&R<="~"}function f(R){return d(R)||R>=""&&R<=""}function p(R){return R==="!"||R>="#"&&R<="'"||R>="*"&&R<="+"||R>="-"&&R<="."||R>="0"&&R<="9"||R>="A"&&R<="Z"||R>="^"&&R<="~"}function m(R){return R>="1"&&R<="9"}function g(R){return R>="A"&&R<="Z"||R>="a"&&R<="z"}function y(R){return R==="d"||R==="h"||R==="m"||R==="s"}function v(R){return R>""&&R<"	"||R>"\v"&&R<"\f"||R>""&&R<""}function E(R){return g(R)||u(R)||R==="+"||R==="/"}function b(R){return u(R)||g(R)||R==="+"||R==="/"||R==="-"||R==="_"}function S(R){return g(R)||u(R)||R==="+"||R==="/"}function A(R,_){var x=Object.keys(R);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(R);_&&(T=T.filter(function(W){return Object.getOwnPropertyDescriptor(R,W).enumerable})),x.push.apply(x,T)}return x}function N(R){for(var _=1;_<arguments.length;_++){var x=arguments[_]!=null?arguments[_]:{};_%2?A(Object(x),!0).forEach(function(T){D(R,T,x[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(x)):A(Object(x)).forEach(function(T){Object.defineProperty(R,T,Object.getOwnPropertyDescriptor(x,T))})}return R}function D(R,_,x){return _ in R?Object.defineProperty(R,_,{value:x,enumerable:!0,configurable:!0,writable:!0}):R[_]=x,R}(function(R){R.VERSION="v",R.ORIGIN="o",R.SESSION_NAME="s",R.INFORMATION="i",R.URI="u",R.EMAIL="e",R.PHONE="p",R.CONNECTION="c",R.BANDWIDTH="b",R.TIME="t",R.REPEAT="r",R.ZONE_ADJUSTMENTS="z",R.KEY="k",R.ATTRIBUTE="a",R.MEDIA="m"})(l||(l={}));class M{consumeText(_,x){let T=x;for(;T<_.length;){let W=_[T];if(W==="\0"||W==="\r"||W===a)break;T+=1}if(T-x==0)throw new Error("Invalid text, at ".concat(_));return T}consumeUnicastAddress(_,x,T){return this.consumeTill(_,x,c)}consumeOneOrMore(_,x,T){let W=x;for(;T(_[W]);)W++;if(W-x==0)throw new Error("Invalid rule at ".concat(x,"."));return W}consumeSpace(_,x){if(_[x]===c)return x+1;throw new Error("Invalid space at ".concat(x,"."))}consumeIP4Address(_,x){let T=x;for(let W=0;W<4;W++)if(T=this.consumeDecimalUChar(_,T),W!==3){if(_[T]!==".")throw new Error("Invalid IP4 address.");T++}return T}consumeDecimalUChar(_,x){let T=x;for(let U=0;U<3&&u(_[T]);U++,T++);if(T-x==0)throw new Error("Invalid decimal uchar.");let W=parseInt(_.slice(x,T));if(W>=0&&W<=255)return T;throw new Error("Invalid decimal uchar")}consumeIP6Address(_,x){let T=this.consumeHexpart(_,x);return _[T]===":"&&(T+=1,T=this.consumeIP4Address(_,T)),T}consumeHexpart(_,x){let T=x;if(_[T]===":"&&_[T+1]===":"){T+=2;try{T=this.consumeHexseq(_,T)}catch{}return T}if(T=this.consumeHexseq(_,T),_[T]===":"&&_[T+1]===":"){T+=2;try{T=this.consumeHexseq(_,T)}catch{}return T}return T}consumeHexseq(_,x){let T=x;for(;T=this.consumeHex4(_,T),_[T]===":"&&_[T+1]!==":";)T+=1;return T}consumeHex4(_,x){let T=0;for(;T<4;T++)if(!((W=_[x+T])>="0"&&W<="9"||W>="a"&&W<="f"||W>="A"&&W<="F")){if(T===0)throw new Error("Invalid hex 4");break}var W;return x+T}consumeFQDN(_,x){let T=x;for(;u(_[T])||g(_[T])||_[T]==="-"||_[T]===".";)T+=1;if(T-x<4)throw new Error("Invalid FQDN");return T}consumeExtnAddr(_,x){return this.consumeOneOrMore(_,x,f)}consumeMulticastAddress(_,x,T){switch(T){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(_,x);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(_,x);default:try{return this.consumeFQDN(_,x)}catch{return this.consumeExtnAddr(_,x)}}}consumeIP6MulticastAddress(_,x){let T=this.consumeHexpart(_,x);return _[T]==="/"?this.consumeInteger(_,T+1):T}consumeIP4MulticastAddress(_,x){let T=x+3,W=_.slice(x,T),U=parseInt(W);if(U<224||U>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let X=0;X<3;X++){if(_[T]!==".")throw new Error("Invalid IP4 multicast address.");T+=1,T=this.consumeDecimalUChar(_,T)}return _[T]==="/"&&(T+=1),T=this.consumeTTL(_,T),_[T]==="/"&&(T=this.consumeInteger(_,T)),T}consumeInteger(_,x){if(!m(_[x]))throw new Error("Invalid integer.");for(x+=1;u(_[x]);)x+=1;return x}consumeTTL(_,x){if(_[x]==="0")return x+1;if(!m(_[x]))throw new Error("Invalid TTL.");x+=1;for(let T=0;T<2&&u(_[x]);T++)x+=1;return x}consumeToken(_,x){return this.consumeOneOrMore(_,x,p)}consumeTime(_,x){let T=x;if(_[T]==="0")return T+1;for(m(_[T])&&(T+=1);u(_[T]);)T++;if(T-x<10)throw new Error("Invalid time");return T}consumeAddress(_,x){return this.consumeTill(_,x,c)}consumeTypedTime(_,x){let T=x;return T=this.consumeOneOrMore(_,T,u),y(_[T])?T+1:T}consumeRepeatInterval(_,x){if(!m(_[x]))throw new Error("Invalid repeat interval");for(x+=1;u(_[x]);)x+=1;return y(_[x])&&(x+=1),x}consumePort(_,x){return this.consumeOneOrMore(_,x,u)}consume(_,x,T){for(let W=0;W<T.length;W++){if(x+W>=_.length)throw new Error("consume exceeding value length");if(_[x+W]!==T[W])throw new Error("consume ".concat(T," failed at ").concat(W))}return x+T.length}consumeTill(_,x,T){let W=x;for(;W<_.length&&(typeof T!="string"||_[W]!==T)&&(typeof T!="function"||!T(_[W]));)W++;return W}}class H extends M{constructor(){super(),D(this,"records",[]),D(this,"currentLine",0)}parse(_){let x=this.probeEOL(_);this.records=_.split(x).filter(Et=>!!Ci(Et).call(Et)).map(this.parseLine),this.currentLine=0;let T=this.parseVersion(),W=this.parseOrigin(),U=this.parseSessionName(),X=this.parseInformation(),ae=this.parseUri(),de=this.parseEmail(),fe=this.parsePhone(),ke=this.parseConnection(),Ve=this.parseBandWidth(),Me=this.parseTimeFields(),ot=this.parseKey(),At=this.parseSessionAttribute(),et=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:T,origin:W,sessionName:U,information:X,uri:ae,emails:de,phones:fe,connection:ke,bandwidths:Ve,timeFields:Me,key:ot,attributes:At,mediaDescriptions:et}}getCurrentRecord(){let _=this.records[this.currentLine];if(!_)throw new Error("Record doesn't exit.");return _}probeEOL(_){for(let x=0;x<_.length;x++)if(_[x]===a)return _[x-1]==="\r"?s:a;throw new Error("Invalid newline character.")}parseLine(_,x){if(_.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");let T=_[0];if(_[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:T,value:_.slice(2),line:x,cur:0}}parseSessionAttribute(){let _=new G;for(;this.currentLine<this.records.length;){let x=this.getCurrentRecord();if(x.type!==l.ATTRIBUTE)break;let T={attField:this.extractOneOrMore(x,W=>p(W)&&W!==":"),_cur:0};x.value[x.cur]===":"&&(x.cur+=1,T.attValue=this.extractOneOrMore(x,v)),_.parse(T),this.currentLine++}return _.digest()}parseMediaAttributes(_){let x=new Y(_);for(;this.currentLine<this.records.length;){let T=this.getCurrentRecord();if(T.type!==l.ATTRIBUTE)break;let W={attField:this.extractOneOrMore(T,U=>p(U)&&U!==":"),_cur:0};T.value[T.cur]===":"&&(T.cur+=1,W.attValue=this.extractOneOrMore(T,v)),x.parse(W),this.currentLine++}return x.digest()}parseKey(){let _=this.getCurrentRecord();if(_.type===l.KEY){if(_.value==="prompt"||_.value==="clear:"||_.value==="base64:"||_.value==="uri:")return _.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){let _=this.getCurrentRecord();if(_.type===l.ZONE_ADJUSTMENTS){let x=[];for(;;)try{let T=this.extract(_,this.consumeTime);this.consumeSpaceForRecord(_);let W=!1;_.value[_.cur]==="-"&&(W=!0,_.cur+=1);let U=this.extract(_,this.consumeTypedTime);x.push({time:T,typedTime:U,back:W})}catch{break}if(x.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,x}return[]}parseRepeat(){let _=[];for(;;){let x=this.getCurrentRecord();if(x.type!==l.REPEAT)break;{let T=this.extract(x,this.consumeRepeatInterval),W=this.parseTypedTime(x);_.push({repeatInterval:T,typedTimes:W}),this.currentLine++}}return _}parseTypedTime(_){let x=[];for(;;)try{this.consumeSpaceForRecord(_),x.push(this.extract(_,this.consumeTypedTime))}catch{break}if(x.length===0)throw new Error("Invalid typed time.");return x}parseTime(){let _=this.getCurrentRecord(),x=this.extract(_,this.consumeTime);this.consumeSpaceForRecord(_);let T=this.extract(_,this.consumeTime);return this.currentLine++,{startTime:x,stopTime:T}}parseBandWidth(){let _=[];for(;this.currentLine<this.records.length;){let x=this.getCurrentRecord();if(x.type!==l.BANDWIDTH)break;{let T=this.extractOneOrMore(x,p);if(x.value[x.cur]!==":")throw new Error("Invalid bandwidth field.");x.cur++;let W=this.extractOneOrMore(x,u);_.push({bwtype:T,bandwidth:W}),this.currentLine++}}return _}parseVersion(){let _=this.getCurrentRecord();if(_.type!==l.VERSION)throw new Error("first sdp record must be version");let x=_.value.slice(0,this.consumeOneOrMore(_.value,0,u));if(x.length!==_.value.length)throw new Error('invalid proto version, "v='.concat(_.value,'"'));return this.currentLine++,x}parseOrigin(){let _=this.getCurrentRecord();if(_.type!==l.ORIGIN)throw new Error("second line of sdp must be origin");let x=this.extractOneOrMore(_,f);this.consumeSpaceForRecord(_);let T=this.extractOneOrMore(_,u);this.consumeSpaceForRecord(_);let W=this.extractOneOrMore(_,u);this.consumeSpaceForRecord(_);let U=this.extractOneOrMore(_,p);this.consumeSpaceForRecord(_);let X=this.extractOneOrMore(_,p);this.consumeSpaceForRecord(_);let ae=this.extract(_,this.consumeUnicastAddress);return this.currentLine++,{username:x,sessId:T,sessVersion:W,nettype:U,addrtype:X,unicastAddress:ae}}parseSessionName(){let _=this.getCurrentRecord();if(_.type===l.SESSION_NAME){let x=this.extract(_,this.consumeText);return this.currentLine++,x}}parseInformation(){let _=this.getCurrentRecord();if(_.type!==l.INFORMATION)return;let x=this.extract(_,this.consumeText);return this.currentLine++,x}parseUri(){let _=this.getCurrentRecord();if(_.type===l.URI)return this.currentLine++,_.value}parseEmail(){let _=[];for(;;){let x=this.getCurrentRecord();if(x.type!==l.EMAIL)break;_.push(x.value),this.currentLine++}return _}parsePhone(){let _=[];for(;;){let x=this.getCurrentRecord();if(x.type!==l.PHONE)break;_.push(x.value),this.currentLine++}return _}parseConnection(){let _=this.getCurrentRecord();if(_.type===l.CONNECTION){let x=this.extractOneOrMore(_,p);this.consumeSpaceForRecord(_);let T=this.extractOneOrMore(_,p);this.consumeSpaceForRecord(_);let W=this.extract(_,this.consumeAddress);return this.currentLine++,{nettype:x,addrtype:T,address:W}}}parseMedia(){let _=this.getCurrentRecord(),x=this.extract(_,this.consumeToken);this.consumeSpaceForRecord(_);let T=this.extract(_,this.consumePort);_.value[_.cur]==="/"&&(_.cur+=1,T+=this.extract(_,this.consumeInteger)),this.consumeSpaceForRecord(_);let W=[];for(W.push(this.extract(_,this.consumeToken));_.value[_.cur]==="/";)_.cur+=1,W.push(this.extract(_,this.consumeToken));if(W.length===0)throw new Error("Invalid proto");let U=this.parseFmt(_);return this.currentLine++,{mediaType:x,port:T,protos:W,fmts:U}}parseTimeFields(){let _=[];for(;this.getCurrentRecord().type===l.TIME;){let x=this.parseTime(),T=this.parseRepeat(),W=this.parseZone();_.push({time:x,repeats:T,zones:W})}return _}parseMediaDescription(){let _=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===l.MEDIA;){let x=this.parseMedia(),T=this.parseInformation(),W=this.parseConnections(),U=this.parseBandWidth(),X=this.parseKey(),ae=this.parseMediaAttributes(x);_.push({media:x,information:T,connections:W,bandwidths:U,key:X,attributes:ae})}return _}parseConnections(){let _=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===l.CONNECTION;)_.push(this.parseConnection());return _}parseFmt(_){let x=[];for(;;)try{this.consumeSpaceForRecord(_),x.push(this.extract(_,this.consumeToken))}catch{break}if(x.length===0)throw new Error("Invalid fmts");return x}extract(_,x){for(var T=arguments.length,W=new Array(T>2?T-2:0),U=2;U<T;U++)W[U-2]=arguments[U];let X=x.call(this,_.value,_.cur,...W),ae=_.value.slice(_.cur,X);return _.cur=X,ae}extractOneOrMore(_,x){let T=this.consumeOneOrMore(_.value,_.cur,x),W=_.value.slice(_.cur,T);return _.cur=T,W}consumeSpaceForRecord(_){if(_.value[_.cur]!==c)throw new Error("Invalid space at ".concat(_.cur,"."));_.cur+=1}}class V extends M{constructor(){super(...arguments),D(this,"attributes",void 0),D(this,"digested",!1)}extractOneOrMore(_,x,T){let W=this.consumeOneOrMore(_.attValue,_._cur,x),U=_.attValue.slice(_._cur,W),[X,ae]=T||[];if(typeof X=="number"&&U.length<X)throw new Error("error in length, should be more or equal than ".concat(X," characters."));if(typeof ae=="number"&&U.length>ae)throw new Error("error in length, should be less or equal than ".concat(ae," characters."));return _._cur=W,U}consumeAttributeSpace(_){if(_.attValue[_._cur]!==c)throw new Error("Invalid space at ".concat(_._cur,"."));_._cur+=1}extract(_,x){if(!_.attValue)throw new Error("Nothing to extract from attValue.");for(var T=arguments.length,W=new Array(T>2?T-2:0),U=2;U<T;U++)W[U-2]=arguments[U];let X=x.call(this,_.attValue,_._cur,...W),ae=_.attValue.slice(_._cur,X);return _._cur=X,ae}atEnd(_){if(!_.attValue)throw new Error;return _._cur>=_.attValue.length}peekChar(_){if(!_.attValue)throw new Error;return _.attValue[_._cur]}peek(_,x){if(!_.attValue)throw new Error;for(let T=0;T<x.length;T++)if(x[T]!==_.attValue[_._cur+T])return!1;return!0}parseIceUfrag(_){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(_,E,[4,256])}parseIcePwd(_){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(_,E,[22,256])}parseIceOptions(_){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");let x=[];for(;!this.atEnd(_);){x.push(this.extractOneOrMore(_,E));try{this.consumeAttributeSpace(_)}catch(T){if(this.atEnd(_))break;throw T}}this.attributes.iceOptions=x}parseFingerprint(_){let x=this.extract(_,this.consumeToken);this.consumeAttributeSpace(_);let T=this.extract(_,this.consumeTill);this.attributes.fingerprints.push({hashFunction:x,fingerprint:T})}parseExtmap(_){let x=this.extractOneOrMore(_,u),T;this.peekChar(_)==="/"&&(this.extract(_,this.consume,"/"),T=this.extract(_,this.consumeToken)),this.consumeAttributeSpace(_);let W=this.extract(_,this.consumeTill,c),U=N(N({entry:parseInt(x,10)},T&&{direction:T}),{},{extensionName:W});this.peekChar(_)===c&&(this.consumeAttributeSpace(_),U.extensionAttributes=this.extract(_,this.consumeTill)),this.attributes.extmaps.push(U)}parseSetup(_){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");let x=this.extract(_,this.consumeTill);if(x!=="active"&&x!=="passive"&&x!=="actpass"&&x!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=x}}class G extends V{constructor(){super(...arguments),D(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(_){if(this.digested)throw new Error("already digested");try{switch(_.attField){case"group":this.parseGroup(_);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(_);break;case"ice-pwd":this.parseIcePwd(_);break;case"ice-options":this.parseIceOptions(_);break;case"fingerprint":this.parseFingerprint(_);break;case"setup":this.parseSetup(_);break;case"tls-id":this.parseTlsId(_);break;case"identity":this.parseIdentity(_);break;case"extmap":this.parseExtmap(_);break;case"msid-semantic":this.parseMsidSemantic(_);break;default:_.ignored=!0,this.attributes.unrecognized.push(_)}}catch(x){throw console.error("parsing session attribute ".concat(_.attField,' error, "a=').concat(_.attField,":").concat(_.attValue,'"')),x}if(!_.ignored&&_.attValue&&!this.atEnd(_))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(_){let x=this.extract(_,this.consumeToken),T=[];for(;!this.atEnd(_)&&this.peekChar(_)===c;)this.consumeAttributeSpace(_),T.push(this.extract(_,this.consumeToken));this.attributes.groups.push({semantic:x,identificationTag:T})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(_){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(_,b)}parseIdentity(_){let x=this.extractOneOrMore(_,S),T=[];for(;!this.atEnd(_)&&this.peekChar(_)===c;){this.consumeAttributeSpace(_);let W=this.extract(_,this.consumeToken);this.extract(_,this.consume,"=");let U=this.extractOneOrMore(_,X=>X!==c&&v(X));T.push({name:W,value:U})}this.attributes.identities.push({assertionValue:x,extensions:T})}parseMsidSemantic(_){this.peekChar(_)===c&&this.consumeAttributeSpace(_);let x={semantic:this.extract(_,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(_)}catch{break}if(this.peekChar(_)==="*"){this.extract(_,this.consume,"*"),x.applyForAll=!0;break}{let T=this.extract(_,this.consumeTill,c);x.identifierList.push(T)}}this.attributes.msidSemantic=x}}class Y extends V{constructor(_){super(),D(this,"attributes",void 0),_.protos.indexOf("RTP")!==-1||_.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(_){if(this.digested)throw new Error("already digested");try{switch(_.attField){case"extmap":this.parseExtmap(_);break;case"setup":this.parseSetup(_);break;case"ice-ufrag":this.parseIceUfrag(_);break;case"ice-pwd":this.parseIcePwd(_);break;case"ice-options":this.parseIceOptions(_);break;case"candidate":this.parseCandidate(_);break;case"remote-candidate":this.parseRemoteCandidate(_);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(_);break;case"rtpmap":this.parseRtpmap(_);break;case"ptime":this.parsePtime(_);break;case"maxptime":this.parseMaxPtime(_);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(_);break;case"ssrc":this.parseSSRC(_);break;case"fmtp":this.parseFmtp(_);break;case"rtcp-fb":this.parseRtcpFb(_);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(_);break;case"mid":this.parseMid(_);break;case"msid":this.parseMsid(_);break;case"imageattr":this.parseImageAttr(_);break;case"rid":this.parseRid(_);break;case"simulcast":this.parseSimulcast(_);break;case"sctp-port":this.parseSctpPort(_);break;case"max-message-size":this.parseMaxMessageSize(_);break;case"ssrc-group":this.parseSSRCGroup(_);break;default:_.ignored=!0,this.attributes.unrecognized.push(_)}}catch(x){throw console.error("parsing media attribute ".concat(_.attField,' error, "a=').concat(_.attField,":").concat(_.attValue,'"')),x}if(!_.ignored&&_.attValue&&!this.atEnd(_))throw new Error("attribute parsing error")}parseCandidate(_){let x=this.extractOneOrMore(_,E,[1,32]);this.consumeAttributeSpace(_);let T=this.extractOneOrMore(_,u,[1,5]);this.consumeAttributeSpace(_);let W=this.extract(_,this.consumeToken);this.consumeAttributeSpace(_);let U=this.extractOneOrMore(_,u,[1,10]);this.consumeAttributeSpace(_);let X=this.extract(_,this.consumeAddress);this.consumeAttributeSpace(_);let ae=this.extract(_,this.consumePort);this.consumeAttributeSpace(_),this.extract(_,this.consume,"typ"),this.consumeAttributeSpace(_);let de={foundation:x,componentId:T,transport:W,priority:U,connectionAddress:X,port:ae,type:this.extract(_,this.consumeToken),extension:{}};for(this.peek(_," raddr")&&(this.extract(_,this.consume," raddr"),this.consumeAttributeSpace(_),de.relAddr=this.extract(_,this.consumeAddress)),this.peek(_," rport")&&(this.extract(_,this.consume," rport"),this.consumeAttributeSpace(_),de.relPort=this.extract(_,this.consumePort));this.peekChar(_)===c;){this.consumeAttributeSpace(_);let fe=this.extract(_,this.consumeToken);this.consumeAttributeSpace(_),de.extension[fe]=this.extractOneOrMore(_,d)}this.attributes.candidates.push(de)}parseRemoteCandidate(_){let x=[];for(;;){let T=this.extractOneOrMore(_,u,[1,5]);this.consumeAttributeSpace(_);let W=this.extract(_,this.consumeAddress);this.consumeAttributeSpace(_);let U=this.extract(_,this.consumePort);x.push({componentId:T,connectionAddress:W,port:U});try{this.consumeAttributeSpace(_)}catch{break}}this.attributes.remoteCandidatesList.push(x)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(_){let x=this.extract(_,this.consumeToken);this.consumeAttributeSpace(_);let T=this.extract(_,this.consumeTill,"/");this.extract(_,this.consume,"/");let W={encodingName:T,clockRate:this.extractOneOrMore(_,u)};this.atEnd(_)||this.peekChar(_)!=="/"||(this.extract(_,this.consume,"/"),W.encodingParameters=parseInt(this.extract(_,this.consumeTill),10));let U=this.attributes.payloads.find(X=>X.payloadType===parseInt(x,10));U?U.rtpMap=W:this.attributes.payloads.push({payloadType:parseInt(x,10),rtpMap:W,rtcpFeedbacks:[]})}parsePtime(_){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(_,this.consumeTill)}parseMaxPtime(_){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(_,this.consumeTill)}parseDirection(_){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=_.attField}parseSSRC(_){let x=this.extractOneOrMore(_,u);this.consumeAttributeSpace(_);let T=this.extract(_,this.consumeTill,":"),W;this.peekChar(_)===":"&&(this.extract(_,this.consume,":"),W=this.extract(_,this.consumeTill));let U=this.attributes.ssrcs.find(X=>X.ssrcId===parseInt(x,10));U?U.attributes[T]=W:this.attributes.ssrcs.push({ssrcId:parseInt(x,10),attributes:{[T]:W}})}parseFmtp(_){let x=this.extract(_,this.consumeTill,c);this.consumeAttributeSpace(_);let T=this.extract(_,this.consumeTill),W={};T.split(";").forEach(X=>{let[ae,de]=X.split("=");ae=Ci(ae).call(ae);let fe=typeof de=="string"?Ci(de).call(de):null;typeof ae=="string"&&ae.length>0&&(W[ae]=fe)});let U=this.attributes.payloads.find(X=>X.payloadType===parseInt(x,10));U?U.fmtp={parameters:W}:this.attributes.payloads.push({payloadType:parseInt(x,10),rtcpFeedbacks:[],fmtp:{parameters:W}})}parseFmtParameters(_){let x={},T=this.extract(_,this.consumeTill,"=");_._cur++;let W=this.extract(_,this.consumeTill,";");for(x[T]=W;_.attValue[_._cur]===";";){let U=this.extract(_,this.consumeTill,"=");_._cur++;let X=this.extract(_,this.consumeTill,";");x[U]=X}return x}parseRtcpFb(_){let x="";x=this.peekChar(_)==="*"?this.extract(_,this.consume,"*"):this.extract(_,this.consumeTill,c),this.consumeAttributeSpace(_);let T=this.extract(_,this.consumeTill,c),W;if(T==="trr-int")W={type:T,interval:this.extract(_,this.consumeTill)};else{let U={type:T};this.peekChar(_)===c&&(this.consumeAttributeSpace(_),U.parameter=this.extract(_,this.consumeToken),this.peekChar(_)===c&&(U.additional=this.extract(_,this.consumeTill))),W=U}if(x==="*")this.attributes.rtcpFeedbackWildcards.push(W);else{let U=this.attributes.payloads.find(X=>X.payloadType===parseInt(x,10));U?U.rtcpFeedbacks.push(W):this.attributes.payloads.push({payloadType:parseInt(x,10),rtcpFeedbacks:[W]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(_){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");let x={port:this.extract(_,this.consumePort)};this.peekChar(_)===c&&(this.consumeAttributeSpace(_),x.netType=this.extractOneOrMore(_,p),this.consumeAttributeSpace(_),x.addressType=this.extractOneOrMore(_,p),this.consumeAttributeSpace(_),x.address=this.extract(_,this.consumeAddress)),this.attributes.rtcp=x}parseMsid(_){let x={id:this.extractOneOrMore(_,p,[1,64])};this.peekChar(_)===c&&(this.consumeAttributeSpace(_),x.appdata=this.extractOneOrMore(_,p,[1,64])),this.attributes.msids.push(x)}parseImageAttr(_){this.attributes.imageattr.push(_.attValue)}parseRid(_){let x=this.extractOneOrMore(_,W=>g(W)||u(W)||W==="_"||W==="-");this.consumeAttributeSpace(_);let T={id:x,direction:this.extract(_,this.consumeToken),params:[]};if(this.peekChar(_)===c){if(this.consumeAttributeSpace(_),this.peek(_,"pt=")){this.extract(_,this.consume,"pt=");let W=[];for(;;){let U=this.extract(_,this.consumeToken);W.push(U);try{this.extract(_,this.consume,",")}catch{break}}T.payloads=W,this.peekChar(_)===c&&this.extract(_,this.consume,c)}for(;;){let W=this.extract(_,this.consumeToken);switch(W){case"depend":{let U={type:W,rids:this.extract(_,this.consume,"=").split(",")};T.params.push(U);break}default:{let U={type:W};this.peekChar(_)==="="&&(this.extract(_,this.consume,"="),U.val=this.extract(_,this.consumeTill,";")),T.params.push(U)}}try{this.extract(_,this.consume,";")}catch{break}}}this.attributes.rids.push(T)}parseSimulcast(_){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=_.attValue,this.extract(_,this.consumeTill)}parseSctpPort(_){this.attributes.sctpPort=this.extractOneOrMore(_,u,[1,5])}parseMaxMessageSize(_){this.attributes.maxMessageSize=this.extractOneOrMore(_,u,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(_){this.attributes.mid=this.extract(_,this.consumeToken)}parseSSRCGroup(_){let x=this.extract(_,this.consumeToken),T=[];for(;;)try{this.consumeAttributeSpace(_);let W=this.extract(_,this.consumeInteger);T.push(parseInt(W,10))}catch{break}this.attributes.ssrcGroups.push({semantic:x,ssrcIds:T})}}function Z(R,_,x){return _ in R?Object.defineProperty(R,_,{value:x,enumerable:!0,configurable:!0,writable:!0}):R[_]=x,R}class ${constructor(){Z(this,"eol",s)}print(_,x){let T="";return x&&(this.eol=x),T+=this.printVersion(_.version),T+=this.printOrigin(_.origin),T+=this.printSessionName(_.sessionName),T+=this.printInformation(_.information),T+=this.printUri(_.uri),T+=this.printEmail(_.emails),T+=this.printPhone(_.phones),T+=this.printConnection(_.connection),T+=this.printBandwidth(_.bandwidths),T+=this.printTimeFields(_.timeFields),T+=this.printKey(_.key),T+=this.printSessionAttributes(_.attributes),T+=this.printMediaDescription(_.mediaDescriptions),T}printVersion(_){return"v=".concat(_).concat(this.eol)}printOrigin(_){return"o=".concat(_.username," ").concat(_.sessId," ").concat(_.sessVersion," ").concat(_.nettype," ").concat(_.addrtype," ").concat(_.unicastAddress).concat(this.eol)}printSessionName(_){return _?"s=".concat(_).concat(this.eol):""}printInformation(_){return _?"i=".concat(_).concat(this.eol):""}printUri(_){return _?"u=".concat(_).concat(this.eol):""}printEmail(_){let x="";for(let T of _)x+="e=".concat(T).concat(this.eol);return x}printPhone(_){let x="";for(let T of _)x+="e=".concat(T).concat(this.eol);return x}printConnection(_){return _?"c=".concat(_.nettype," ").concat(_.addrtype," ").concat(_.address).concat(this.eol):""}printBandwidth(_){let x="";for(let T of _)x+="b=".concat(T.bwtype,":").concat(T.bandwidth).concat(this.eol);return x}printTimeFields(_){let x="";for(let T of _){x+="t=".concat(T.time.startTime," ").concat(T.time.startTime).concat(this.eol);for(let W of T.repeats)x+="r=".concat(W.repeatInterval," ").concat(W.typedTimes.join(" ")).concat(this.eol);T.zoneAdjustments&&(x+="z=",x+="z=".concat(T.zoneAdjustments.map(W=>"".concat(W.time," ").concat(W.back?"-":""," ").concat(W.typedTime)).join(" ")).concat(this.eol),x+=this.eol)}return x}printKey(_){return _?"k=".concat(_).concat(this.eol):""}printAttributes(_){let x="";for(let T of _)x+="a=".concat(T.attField).concat(T.attValue?":".concat(T.attValue):"").concat(this.eol);return x}printMediaDescription(_){let x="";for(let T of _)x+=this.printMedia(T.media),x+=this.printInformation(T.information),x+=this.printConnections(T.connections),x+=this.printBandwidth(T.bandwidths),x+=this.printKey(T.key),x+=this.printMediaAttributes(T);return x}printConnections(_){let x="";for(let T of _)x+=this.printConnection(T);return x}printMedia(_){return"m=".concat(_.mediaType," ").concat(_.port," ").concat(_.protos.join("/")," ").concat(_.fmts.join(" ")).concat(this.eol)}printSessionAttributes(_){return new K(this.eol).print(_)}printMediaAttributes(_){return new k(this.eol).print(_)}}class F{constructor(_){Z(this,"eol",void 0),this.eol=_}printIceUfrag(_){return _===void 0?"":"a=ice-ufrag:".concat(_).concat(this.eol)}printIcePwd(_){return _===void 0?"":"a=ice-pwd:".concat(_).concat(this.eol)}printIceOptions(_){return _===void 0?"":"a=ice-options:".concat(_.join(c)).concat(this.eol)}printFingerprints(_){return _.length>0?_.map(x=>"a=fingerprint:".concat(x.hashFunction).concat(c).concat(x.fingerprint)).join(this.eol)+this.eol:""}printExtmap(_){return _.map(x=>"a=extmap:".concat(x.entry).concat(x.direction?"/".concat(x.direction):"").concat(c).concat(x.extensionName).concat(x.extensionAttributes?"".concat(c).concat(x.extensionAttributes):"").concat(this.eol)).join("")}printSetup(_){return _===void 0?"":"a=setup:".concat(_).concat(this.eol)}printUnrecognized(_){return _.map(x=>"a=".concat(x.attField).concat(x.attValue?":".concat(x.attValue):"").concat(this.eol)).join("")}}class K extends F{print(_){let x="";return x+=this.printGroups(_.groups),x+=this.printMsidSemantic(_.msidSemantic),x+=this.printIceLite(_.iceLite),x+=this.printIceUfrag(_.iceUfrag),x+=this.printIcePwd(_.icePwd),x+=this.printIceOptions(_.iceOptions),x+=this.printFingerprints(_.fingerprints),x+=this.printSetup(_.setup),x+=this.printTlsId(_.tlsId),x+=this.printIdentity(_.identities),x+=this.printExtmap(_.extmaps),x+=this.printUnrecognized(_.unrecognized),x}printGroups(_){let x="";return _.length>0&&(x+=_.map(T=>"a=group:".concat(T.semantic).concat(T.identificationTag.map(W=>"".concat(c).concat(W)).join("")).concat(this.eol)).join("")),x}printIceLite(_){return _===void 0?"":"a=ice-lite"+this.eol}printTlsId(_){return _?"a=tls-id:".concat(_).concat(this.eol):""}printIdentity(_){return _.length===0?"":_.map(x=>"a=identity:".concat(x.assertionValue).concat(x.extensions.map(T=>"".concat(c).concat(T.name).concat(T.value?"=".concat(T.value):"")))).join(this.eol)+this.eol}printMsidSemantic(_){if(!_)return"";let x="a=msid-semantic:".concat(_.semantic);return _.applyForAll?x+="".concat(c,"*"):_.identifierList.length>0&&(x+=_.identifierList.map(T=>"".concat(c).concat(T))),x+this.eol}}class k extends F{print(_){let x=_.attributes,T="";return T+=this.printRTCP(x.rtcp),T+=this.printIceUfrag(x.iceUfrag),T+=this.printIcePwd(x.icePwd),T+=this.printIceOptions(x.iceOptions),T+=this.printCandidates(x.candidates),T+=this.printRemoteCandidatesList(x.remoteCandidatesList),T+=this.printEndOfCandidates(x.endOfCandidates),T+=this.printFingerprints(x.fingerprints),T+=this.printSetup(x.setup),T+=this.printMid(x.mid),T+=this.printExtmap(x.extmaps),T+=this.printRTPRelated(x),T+=this.printPtime(x.ptime),T+=this.printMaxPtime(x.maxPtime),T+=this.printDirection(x.direction),T+=this.printSSRCGroups(x.ssrcGroups),T+=this.printSSRC(x.ssrcs),T+=this.printRTCPMux(x.rtcpMux),T+=this.printRTCPMuxOnly(x.rtcpMuxOnly),T+=this.printRTCPRsize(x.rtcpRsize),T+=this.printMSId(x.msids),T+=this.printImageattr(x.imageattr),T+=this.printRid(x.rids),T+=this.printSimulcast(x.simulcast),T+=this.printSCTPPort(x.sctpPort),T+=this.printMaxMessageSize(x.maxMessageSize),T+=this.printUnrecognized(x.unrecognized),T}printCandidates(_){return _.map(x=>"a=candidate:".concat(x.foundation).concat(c).concat(x.componentId).concat(c).concat(x.transport).concat(c).concat(x.priority).concat(c).concat(x.connectionAddress).concat(c).concat(x.port).concat(c,"typ").concat(c).concat(x.type).concat(x.relAddr?"".concat(c,"raddr").concat(c).concat(x.relAddr):"").concat(x.relPort?"".concat(c,"rport").concat(c).concat(x.relPort):"").concat(Object.keys(x.extension).map(T=>"".concat(c).concat(T).concat(c).concat(x.extension[T])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(_){return _.map(x=>"a=remote-candidates:".concat(x.join(c)).concat(this.eol)).join("")}printEndOfCandidates(_){return _===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(_){if(!_.payloads)return"";let x=_.payloads,T="";T+=_.rtcpFeedbackWildcards.map(W=>this.printRTCPFeedback("*",W)).join("");for(let W of x)T+=this.printRtpMap(W.payloadType,W.rtpMap),T+=this.printFmtp(W.payloadType,W.fmtp),T+=W.rtcpFeedbacks.map(U=>this.printRTCPFeedback(W.payloadType,U)).join("");return T}printFmtp(_,x){if(!x)return"";let T=Object.keys(x.parameters);return T.length===1&&x.parameters[T[0]]===null?"a=fmtp:".concat(_).concat(c).concat(T[0]).concat(this.eol):"a=fmtp:".concat(_).concat(c).concat(Object.keys(x.parameters).map(W=>"".concat(W,"=").concat(x.parameters[W])).join(";")).concat(this.eol)}printRtpMap(_,x){return x?"a=rtpmap:".concat(_).concat(c).concat(x.encodingName,"/").concat(x.clockRate).concat(x.encodingParameters?"/".concat(x.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(_,x){let T="a=rtcp-fb:".concat(_).concat(c),W=x;return W.type==="trr-int"?T+="ttr-int".concat(c).concat(W.interval):(T+="".concat(W.type),W.parameter&&(T+="".concat(c).concat(W.parameter),W.additional&&(T+="".concat(c).concat(W.additional)))),T+this.eol}printPtime(_){return _===void 0?"":"a=ptime:".concat(_).concat(this.eol)}printMaxPtime(_){return _===void 0?"":"a=maxptime:".concat(_).concat(this.eol)}printDirection(_){return _===void 0?"":"a=".concat(_).concat(this.eol)}printSSRC(_){return _.map(x=>Object.keys(x.attributes).map(T=>"a=ssrc:".concat(x.ssrcId.toString(10)).concat(c).concat(T).concat(x.attributes[T]?":".concat(x.attributes[T]):"").concat(this.eol)).join("")).join("")}printRTCPMux(_){return _===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(_){return _===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(_){return _===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(_){if(_===void 0)return"";let x="a=rtcp:".concat(_.port);return _.netType&&(x+="".concat(c).concat(_.netType)),_.addressType&&(x+="".concat(c).concat(_.addressType)),_.address&&(x+="".concat(c).concat(_.address)),x+this.eol}printMSId(_){return _.map(x=>"a=msid:".concat(x.id).concat(x.appdata?"".concat(c).concat(x.appdata):"").concat(this.eol)).join("")}printImageattr(_){return _.map(x=>"a=imageattr:".concat(x).concat(this.eol)).join("")}printRid(_){return _.map(x=>{let T="a=rid:".concat(x.id).concat(c).concat(x.direction);return x.payloads&&(T+="".concat(c,"pt=").concat(x.payloads.join(","))),x.params.length>0&&(T+="".concat(c).concat(x.params.map(W=>W.type==="depend"?"depend=".concat(W.rids.join(",")):"".concat(W.type,"=").concat(W.val)).join(";"))),T+this.eol}).join("")}printSimulcast(_){return _===void 0?"":"a=simulcast:".concat(_).concat(this.eol)}printSCTPPort(_){return _===void 0?"":"a=sctp-port:".concat(_).concat(this.eol)}printMaxMessageSize(_){return _===void 0?"":"a=max-message-size:".concat(_).concat(this.eol)}printMid(_){return _===void 0?"":"a=mid:".concat(_).concat(this.eol)}printSSRCGroups(_){return _.map(x=>"a=ssrc-group:".concat(x.semantic).concat(x.ssrcIds.map(T=>"".concat(c).concat(T.toString(10))).join("")).concat(this.eol)).join("")}}function P(R){return new H().parse(R)}function B(R,_){return new $().print(R,_)}}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var o in i)r.o(i,o)&&!r.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:i[o]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(8)})();var Pn=Ate.exports;function bk(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L("SVC_MODE");if(L("ENABLE_SVC"))return function(t){return t in lk}(e)?e:lk.L1T3}function u$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function d$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u$(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,{filterRTX:i,filterVideoFec:o,filterAudioFec:a,filterAudioCodec:s,filterVideoCodec:c}=t,{useXR:l}=r,u=[],d=[],f=[],p=[],m=!1,g=!1;if(Pn.parse(e).mediaDescriptions.forEach(v=>{n&&n!==v.attributes.direction||(v.media.mediaType!=="video"||m||(d=v.attributes.payloads,p=v.attributes.extmaps,m=!0),v.media.mediaType!=="audio"||g||(u=v.attributes.payloads,f=v.attributes.extmaps,g=!0))}),!p||d.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!f||u.length===0)throw new Error("Cannot get audio capabilities from SDP.");if(d.forEach(v=>{var E;(E=v.rtpMap)!==null&&E!==void 0&&E.clockRate&&(v.rtpMap.clockRate=parseInt(v.rtpMap.clockRate)),l&&v.rtcpFeedbacks.push({type:"rrtr"})}),u.forEach(v=>{var E;(E=v.rtpMap)!==null&&E!==void 0&&E.clockRate&&(v.rtpMap.clockRate=parseInt(v.rtpMap.clockRate)),l&&v.rtcpFeedbacks.push({type:"rrtr"})}),i&&(u=u.filter(v=>{var E;return((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())!=="rtx"}),d=d.filter(v=>{var E;return((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())!=="rtx"})),o&&(d=d.filter(v=>{var E;return!/(red)|(ulpfec)|(flexfec)/i.test(((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName)||"")})),a&&(u=u.filter(v=>{var E;return!/(red)|(ulpfec)|(flexfec)/i.test(((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName)||"")})),s&&(s==null?void 0:s.length)>0&&(u=u.filter(v=>{var E;return me(s).call(s,((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())||"")})),c&&(c==null?void 0:c.length)>0){let v=d.filter(E=>{var b;return me(c).call(c,((b=E.rtpMap)===null||b===void 0?void 0:b.encodingName.toLowerCase())||"")});d=v.concat(i?[]:FL(v,d))}let y=L("UNSUPPORTED_VIDEO_CODEC");return y&&y.length>0&&(d=d.filter(v=>!(v.rtpMap&&me(y).call(y,v.rtpMap.encodingName.toLowerCase())))),{audioCodecs:u,videoCodecs:d,audioExtensions:f,videoExtensions:p}}function Ru(e){let t=Pn.parse(e),r,n;for(let i of t.mediaDescriptions){if(!r){let o=i.attributes.iceUfrag,a=i.attributes.icePwd;if(!o||!a)throw new Error("Cannot get iceUfrag or icePwd from SDP.");r={iceUfrag:o,icePwd:a}}if(!n){let o=i.attributes.fingerprints;o.length>0&&(n={fingerprints:o})}}if(!n&&t.attributes.fingerprints.length>0&&(n={fingerprints:t.attributes.fingerprints}),!n||!r)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:r,dtlsParameters:n}}function Nte(e,t){let r=[],n=e.attributes.ssrcGroups.filter(a=>a.semantic==="FID"),i=e.attributes.ssrcGroups.find(a=>a.semantic==="SIM"),o=e.attributes.ssrcs;if(i)i.ssrcIds.forEach(a=>{var s;let c=(s=n.find(l=>l.ssrcIds[0]===a))===null||s===void 0?void 0:s.ssrcIds[1];r.push({ssrcId:a,rtx:t?c:void 0})});else if(n.length>0){let a=n[0].ssrcIds[0],s=n[0].ssrcIds[1];r.push({ssrcId:a,rtx:t?s:void 0})}else{if(o.length===0)throw new Error("No ssrcs found on local media description.");r.push({ssrcId:o[0].ssrcId})}return r}function h$(e,t,r){let{cname:n}=e,i;t?i=Ote(t):(i=e.iceParameters.candidates.map(u=>({foundation:u.foundation,componentId:"1",transport:u.protocol,priority:u.priority.toString(),connectionAddress:u.ip,port:u.port.toString(),type:u.type,extension:{}})),w.debug("Using candidates from gateway."));let o={fingerprints:e.dtlsParameters.fingerprints.map(u=>({hashFunction:u.algorithm,fingerprint:u.fingerprint}))},a={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd},s;switch(e.dtlsParameters.role){case"server":s="passive";break;case"client":s="active";break;case"auto":s="actpass"}let c=cS(e.rtpCapabilities),l=[];return Array.isArray(r)&&r.length>0&&r.forEach(u=>{l.push({kind:Ce.VIDEO,ssrcId:u.v,rtx:u.v_rtx,mslabel:"".concat(u.v,"_").concat(u.a)},{kind:Ce.AUDIO,ssrcId:u.a,mslabel:"".concat(u.v,"_").concat(u.a)})}),{dtlsParameters:o,iceParameters:a,candidates:i,rtpCapabilities:c,setup:s,cname:n,preSSRCs:l}}function Ote(e){let t=[];return e.ip&&typeof e.port=="number"&&(t=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],w.debug("Using remote candidate from AP ".concat(e.ip,":").concat(e.port)),e.ip6&&(t.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip6,port:e.port.toString(),type:"host",extension:{}}),w.debug("Using IPV6 remote candidate from AP ".concat(e.ip6,":").concat(e.port)))),t}function Ud(e,t,r){let n=[],i=[];return e.forEach(o=>{let{ssrcId:a,rtx:s}=o,c=er(8,"track-"),l={ssrcId:a,attributes:d$({label:c,mslabel:r=r||er(10,""),msid:"".concat(r," ").concat(c)},t&&{cname:t})};if(n.push(l),s!==void 0){let u={ssrcId:s,attributes:d$({label:c,mslabel:r,msid:"".concat(r," ").concat(c)},t&&{cname:t})};n.push(u),i.push({semantic:"FID",ssrcIds:[a,s]})}}),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map(o=>{let{ssrcId:a}=o;return a})}),{ssrcs:n,ssrcGroups:i}}function um(e,t){t instanceof Tr&&e.attributes.payloads.forEach(r=>{var n;let i=(n=r.rtpMap)===null||n===void 0?void 0:n.encodingName.toLowerCase();if(!i||["opus","pcmu","pcma","g722"].indexOf(i)===-1)return;r.fmtp||(r.fmtp={parameters:{}}),r.fmtp.parameters.minptime="10",r.fmtp.parameters.useinbandfec="1";let o=t._encoderConfig;o&&i!=="pcmu"&&i!=="pcma"&&i!=="g722"&&(o.bitrate&&!Rr()&&(r.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*o.bitrate))),o.sampleRate&&(r.fmtp.parameters.maxplaybackrate="".concat(o.sampleRate),r.fmtp.parameters["sprop-maxcapturerate"]="".concat(o.sampleRate)),o.stereo&&(r.fmtp.parameters.stereo="1",r.fmtp.parameters["sprop-stereo"]="1"))})}function jL(e){let t=e.attributes.unrecognized.findIndex(r=>r.attField==="x-google-flag"&&r.attValue==="conference");t!==-1&&e.attributes.unrecognized.splice(t,1)}function UL(e,t){var r;if(!(t instanceof ir&&t._encoderConfig&&t._hints.indexOf(lr.SCREEN_TRACK)===-1))return;let n=t._encoderConfig;Ct().supportMinBitrate&&n.bitrateMin&&e.attributes.payloads.forEach(i=>{var o,a;me(o=["h264","h265","vp8","vp9","av1"]).call(o,((a=i.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase())||"")&&(i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters["x-google-min-bitrate"]="".concat(n.bitrateMin))}),Ct().supportMinBitrate&&!me(r=t._hints).call(r,lr.LOW_STREAM)&&n.bitrateMax&&e.attributes.payloads.forEach(i=>{var o,a;me(o=["h264","h265","vp8","vp9","av1"]).call(o,((a=i.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase())||"")&&(i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters["x-google-start-bitrate"]="".concat(L("X_GOOGLE_START_BITRATE")||Math.floor(n.bitrateMax)))})}function kte(e){if(e.media.mediaType!=="video")return;let t=St();if(t.name!==Mt.SAFARI&&t.os!==mn.IOS)return;let r=e.attributes.extmaps.findIndex(n=>/video-orientation/g.test(n.extensionName));r!==-1&&e.attributes.extmaps.splice(r,1)}function sS(e,t,r){if(!t)return;let n,i;if(e.media.mediaType==="video"?(n=r.videoExtensions,i=r.videoCodecs):(n=r.audioExtensions,i=r.audioCodecs),t.twcc===!0){let o=n.find(a=>a.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");o&&(e.attributes.extmaps.find(a=>a.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||e.attributes.extmaps.push({entry:o.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(a,s){return s.filter(c=>!!a.find(l=>l.payloadType===c.payloadType&&!!l.rtcpFeedbacks.find(u=>u.type==="transport-cc")))}(i,e.attributes.payloads).forEach(a=>{a.rtcpFeedbacks.find(s=>s.type==="transport-cc")||a.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(t.twcc===!1){let o=e.attributes.extmaps.findIndex(a=>a.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");o!==-1&&e.attributes.extmaps.splice(o,1),e.attributes.payloads.forEach(a=>{let s=a.rtcpFeedbacks.findIndex(c=>c.type==="transport-cc");s!==-1&&a.rtcpFeedbacks.splice(s,1)})}if(t.remb===!0){let o=n.find(a=>a.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");o&&(e.attributes.extmaps.find(a=>a.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||e.attributes.extmaps.push({entry:o.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(a,s){return s.filter(c=>!!a.find(l=>l.payloadType===c.payloadType&&!!l.rtcpFeedbacks.find(u=>u.type==="goog-remb")))}(i,e.attributes.payloads).forEach(a=>{a.rtcpFeedbacks.find(s=>s.type==="goog-remb")||a.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(t.remb===!1){let o=e.attributes.extmaps.findIndex(a=>a.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");o!==-1&&e.attributes.extmaps.splice(o,1),e.attributes.payloads.forEach(a=>{let s=a.rtcpFeedbacks.findIndex(c=>c.type==="goog-remb");s!==-1&&a.rtcpFeedbacks.splice(s,1)})}}function Pte(e,t,r){if(Rr()||e.media.mediaType!=="video"||!(t instanceof ir)||r!=="vp9"&&r!=="vp8"||r==="vp8"&&!L("SIMULCAST")||r==="vp9"&&L("ENABLE_SVC")||t._scalabilityMode===void 0||t._scalabilityMode.numSpatialLayers<=1)return;let n=r==="vp8"?2:t._scalabilityMode.numSpatialLayers,i=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find(s=>s.semantic==="FID"&&s.ssrcIds[0]===i.ssrcId),a={semantic:"SIM",ssrcIds:[i.ssrcId]};for(let s=1;s<n;s++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+s,attributes:Vr(i.attributes)}),a.ssrcIds.push(i.ssrcId+s),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+s,attributes:Vr(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+s,o.ssrcIds[1]+s]}));e.attributes.ssrcGroups.unshift(a)}async function Dte(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new RTCPeerConnection;r.addTransceiver("video",{direction:"sendonly"}),r.addTransceiver("audio",{direction:"sendonly"}),r.addTransceiver("video",{direction:"recvonly"}),r.addTransceiver("audio",{direction:"recvonly"});let n=(await r.createOffer()).sdp,{send:i,recv:o,sendrecv:a}=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0,u=L0(l,s,c,"sendonly"),d=L0(l,s,c,"recvonly"),f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},p={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},m={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(ps(u,d,"videoExtensions",f,p,m),ps(u,d,"videoCodecs",f,p,m),ps(u,d,"audioExtensions",f,p,m),ps(u,d,"audioCodecs",f,p,m),L("RAISE_H264_BASELINE_PRIORITY")){let g=m.videoCodecs.findIndex(y=>{var v,E;return((v=y.rtpMap)===null||v===void 0?void 0:v.encodingName.toLocaleLowerCase())==="h264"&&((E=y.fmtp)===null||E===void 0?void 0:E.parameters["profile-level-id"])==="42001f"});if(g!==-1){let y=m.videoCodecs.findIndex(v=>{var E;return((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName.toLocaleLowerCase())==="h264"});if(y<g){w.debug("raising H264 baseline profile priority");let v=m.videoCodecs[g];m.videoCodecs.splice(g,1),m.videoCodecs.splice(y,0,v)}y!==-1&&(p.videoCodecs=p.videoCodecs.filter(v=>{var E,b;return!(((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName.toLocaleLowerCase())==="h264"&&((b=v.fmtp)===null||b===void 0?void 0:b.parameters["profile-level-id"])!=="42001f")})),y!==-1&&L("FILTER_SEND_H264_BASELINE")&&(f.videoCodecs=f.videoCodecs.filter(v=>{var E,b;return!(((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName.toLocaleLowerCase())==="h264"&&((b=v.fmtp)===null||b===void 0?void 0:b.parameters["profile-level-id"])!=="42001f")}))}}return{send:f,recv:p,sendrecv:m}}(e,t,n);try{r.close()}catch{}return{send:i,recv:o,sendrecv:a}}function f$(){let e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=L0(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"recvonly"),r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(ps(e,t,"videoExtensions",r,n,i),ps(e,t,"videoCodecs",r,n,i),ps(e,t,"audioExtensions",r,n,i),ps(e,t,"audioCodecs",r,n,i),L("RAISE_H264_BASELINE_PRIORITY")){let o=i.videoCodecs.findIndex(a=>a.rtpMap&&a.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&a.fmtp&&a.fmtp.parameters["profile-level-id"]==="42001f");if(o!==-1){let a=i.videoCodecs.findIndex(s=>s.rtpMap&&s.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(a<o){w.debug("raising H264 baseline profile priority");let s=i.videoCodecs[o];i.videoCodecs.splice(o,1),i.videoCodecs.splice(a,0,s)}a!==-1&&(n.videoCodecs=n.videoCodecs.filter(s=>!(s.rtpMap&&s.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&s.fmtp&&s.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:r,recv:n,sendrecv:i}}function ps(e,t,r,n,i,o){if(r==="videoExtensions"||r==="audioExtensions"){let a=[];return e[r].forEach(s=>{t[r].some((c,l)=>{if(s.entry===c.entry&&s.extensionName===c.extensionName)return a.push(l),!0})?o[r].push(s):n[r].push(s)}),void t[r].forEach((s,c)=>{a.indexOf(c)===-1&&i[r].push(s)})}if(r==="videoCodecs"||r==="audioCodecs"){let a=[];return e[r].forEach(s=>{t[r].some((c,l)=>{if(s.payloadType===c.payloadType&&JSON.stringify(s)===JSON.stringify(c))return a.push(l),!0})?o[r].push(s):n[r].push(s)}),void t[r].forEach((s,c)=>{a.indexOf(c)===-1&&i[r].push(s)})}}function cS(e){let{send:t,recv:r,sendrecv:n}=e;if(!n){if(!t||!r)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:r}}let i,o;return t?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...t.audioCodecs,...n.audioCodecs],i.videoCodecs=[...t.videoCodecs,...n.videoCodecs],i.audioExtensions=[...t.audioExtensions,...n.audioExtensions],i.videoExtensions=[...t.videoExtensions,...n.videoExtensions]):i=n,r?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...r.audioCodecs,...n.audioCodecs],o.videoCodecs=[...r.videoCodecs,...n.videoCodecs],o.audioExtensions=[...r.audioExtensions,...n.audioExtensions],o.videoExtensions=[...r.videoExtensions,...n.videoExtensions]):o=n,{send:i,recv:o}}function dm(e){e.media.mediaType==="audio"&&e.attributes.payloads.filter(t=>{var r;return((r=t.rtpMap)===null||r===void 0?void 0:r.encodingName.toLowerCase())==="opus"}).forEach(t=>{t.fmtp||(t.fmtp={parameters:{}}),t.fmtp.parameters.stereo="1",t.fmtp.parameters["sprop-stereo"]="1"})}function Ny(e,t,r,n){let i=[];if(e===Ce.VIDEO){if(L("H264_PROFILE_LEVEL_ID")&&n==="h264"&&(i=t.videoCodecs.filter(o=>{var a;return me(a=o.rtpMap&&o.rtpMap.encodingName.toLowerCase()||"").call(a,n)&&o&&o.fmtp&&o.fmtp.parameters["profile-level-id"]===L("H264_PROFILE_LEVEL_ID")})),!Array.isArray(i)||i.length===0){let o=[],a=[],s=[],c=[];if(r.videoCodecs.forEach(l=>{let u=l.rtpMap&&l.rtpMap.encodingName.toLowerCase()||"";me(u).call(u,n)?o.push(l):me(u).call(u,"vp9")?a.push(l):me(u).call(u,"vp8")?s.push(l):me(u).call(u,"h264")&&c.push(l)}),o.length===0){let l="";a.length!==0?(o=a,l="vp9"):s.length!==0?(o=s,l="vp8"):c.length!==0&&(o=c,l="h264"),w.warning("codec ".concat(n," not included in rtpCapabilities, fallback to default payloads: ").concat(l))}o.length!==0&&(i=t.videoCodecs.filter(l=>o.some(u=>u.payloadType===l.payloadType)))}if(i.length===0&&(w.warning("codec ".concat(n," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),i=t.videoCodecs),L("USE_PUB_RTX")||L("USE_SUB_RTX")){let o=FL(i,t.videoCodecs);i=[...i,...o]}}else i=t.audioCodecs.filter(o=>{var a;return me(a=o.rtpMap&&o.rtpMap.encodingName.toLowerCase()||"").call(a,n)}),i.length===0&&(w.warning("codec ".concat(n," not included in rtpCapabilities, fallback to opus")),i=t.audioCodecs.filter(o=>{var a;return me(a=o.rtpMap&&o.rtpMap.encodingName.toLowerCase()||"").call(a,"opus")}));return i}function FL(e,t){let r=e.map(n=>n.payloadType.toString());return t.filter(n=>n.rtpMap&&n.rtpMap.encodingName==="rtx"&&n.fmtp&&n.fmtp.parameters.apt&&me(r).call(r,n.fmtp&&n.fmtp.parameters.apt))}async function f_(e,t,r){let n=t.toString(),i=Mte(n,"offer","remote","exchangeSDP");await e.setRemoteDescription({type:"offer",sdp:n});let o=await e.createAnswer();if(!o.sdp)throw new Error("cannot get answer sdp");let a=o.sdp;a=Lte(a,r||{}),i==null||i(a||""),await e.setLocalDescription({type:"answer",sdp:a})}function Lte(e,t,r){let n=Pn.parse(e),{useXR:i}=t;return n.mediaDescriptions.forEach(o=>{var a;o.attributes.mid&&(Array.isArray(r)&&!me(r).call(r,o.attributes.mid)||(o.media.mediaType==="audio"&&dm(o),i&&me(a=["audio","video"]).call(a,o.media.mediaType)&&o.attributes.payloads.forEach(s=>{s.rtcpFeedbacks.findIndex(c=>c.type==="rrtr")===-1&&s.rtcpFeedbacks.push({type:"rrtr"})})))}),Pn.print(n)}function Mte(e,t,r,n){if(L("SDP_LOGGING"))return w.upload("exchanging ".concat(r," ").concat(t," SDP during P2PConnection.").concat(n,`
`),e),t==="offer"?i=>{Mte(i,"answer",r==="local"?"remote":"local",n)}:void 0}function hc(e,t){return typeof L(e)===t?L(e):void 0}function p$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Jl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p$(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Wx=new Map,R6e=class extends _r{get state(){return this._state}set state(e){if(e===this._state)return;let t=this._state;this._state=e,e==="DISCONNECTED"&&this._disconnectedReason?this.emit(Bn.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(Bn.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){w.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),I(this,"store",void 0),I(this,"joinInfo",void 0),I(this,"key",void 0),I(this,"ntpOffset",0),I(this,"signal",void 0),I(this,"role",void 0),I(this,"inChannelInfo",{joinAt:null,duration:0}),I(this,"spec",void 0),I(this,"_state","DISCONNECTED"),I(this,"_statsCollector",void 0),I(this,"_disconnectedReason",void 0),I(this,"isSignalRecover",!1),I(this,"hasChangeBGPAddress",!1),I(this,"trafficStatsInterval",void 0),I(this,"networkQualityInterval",void 0),I(this,"_joinGatewayStartTime",0),I(this,"_signalTimeout",!1),I(this,"_clientRoleOptions",void 0),I(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?new l$(Jl(Jl({},t),{},{retryConfig:t.websocketRetryConfig}),e):new XVe(Jl(Jl({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,r){this.store.joinGatewayStart(),e.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);let n=Date.now(),i=Wx.get(e.cname);if(i||(i=new Map,Wx.set(e.cname,i)),this._isProactiveJoin=!0,i.has(e.uid)){let c=new q(O.UID_CONFLICT);throw Se.joinGateway(e.sid,{lts:n,succ:!1,ec:c.code,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:"0",preload:e.preload}),this._isProactiveJoin=!1,c}i.set(e.uid,!0),this.joinInfo=e,this.key=t;let o=0;this.joinGatewayStartTime=n;let a=e.proxyServer;try{w.debug("[".concat(this.store.clientId,"] use websocket join uid ").concat(o));let c=e.gatewayAddrs.map(l=>{let{address:u}=l,[d,f]=u.split(":"),p={host:d,port:f};return e.proxyServer&&(p.proxy=e.proxyServer),p});o=(await this.signal.init(c,r)).uid,w.debug("[".concat(this.store.clientId,"] websocket join uid ").concat(o," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(c){var s;throw w.error("[".concat(this.store.clientId,"] User join failed"),c.toString()),Se.joinGateway(e.sid,{lts:n,succ:!1,ec:((s=c.data)===null||s===void 0?void 0:s.desc)||c.code,errorMsg:c.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!a,signalChannel:"0",preload:e.preload}),this._isProactiveJoin=!1,i.delete(e.uid),this.signal.close(),c}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),w.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(c=>{w.warning("[".concat(this.store.clientId,"] get traffic stats error"),c.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(Bn.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(Bn.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(Bn.NETWORK_QUALITY,{uplinkNetworkQuality:s6(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:s6(this._statsCollector.trafficStats.B_dnq)}):this.emit(Bn.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),o}async leave(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){t!==Bt.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==Zt.CONNECTED||await function(r,n){return n===1/0?r:he.race([r,KFe(n)])}(this.signal.request(Fe.LEAVE,void 0,!0),3e3)}catch(r){w.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),r)}this.signal.close(t),t!==Bt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));let n={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:L("PUB_EXTEND"),twcc:!!L("PUBLISH_TWCC"),rtx:!!L("USE_PUB_RTX")};try{return(await this.signal.request(Fe.PUBLISH,n,!0))._message}catch(i){if(r&&i.data&&i.data.code===Pe.ERR_PUBLISH_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),i.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw i}}async publishDataChannel(e,t,r){var n;if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));let i={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:(n=t.maxRetransmits)!==null&&n!==void 0?n:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(Fe.PUBLISH_DATASTREAM,i,!0)}catch(o){if(r&&o.data&&o.data.code===Pe.ERR_PUBLISH_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),o.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw o}}async unpublish(e,t){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Fe.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(r){w.warning("[".concat(this.store.clientId,"] unpublish warning: "),r)}}async unpublishDataChannel(e){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await he.all(e.map(t=>this.signal.request(Fe.UNPUBLISH_DATASTREAM,{channel_id:t},!0)))}catch(t){w.warning("unpublish datachannels warning: ",t)}}async presubscribe(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));let n={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!L("SUBSCRIBE_TWCC"),rtx:!!L("USE_SUB_RTX")||void 0,extend:L("SUB_EXTEND"),svc:Array.isArray(L("SVC"))&&L("SVC").length!==0?L("SVC"):void 0};try{return await this.signal.request(Fe.PRE_SUBSCRIBE,n,!0)}catch(i){if(r&&i.data&&i.data.code===Pe.ERR_SUBSCRIBE_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),i.toString()),this.presubscribe(e,t,!1);throw i}}async subscribe(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));let n={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!L("SUBSCRIBE_TWCC"),rtx:!!L("USE_SUB_RTX"),extend:L("SUB_EXTEND"),ssrcId:t.ssrcId,svc:Array.isArray(L("SVC"))&&L("SVC").length!==0?L("SVC"):void 0};try{return(await this.signal.request(Fe.SUBSCRIBE,n,!0))._message}catch(i){if(r&&i.data&&i.data.code===Pe.ERR_SUBSCRIBE_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),i.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw i}}async subscribeDataChannel(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));let n={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(Fe.SUBSCRIBE_DATASTREAM,n,!0)}catch(i){if(r&&i.data&&i.data.code===Pe.ERR_SUBSCRIBE_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),i.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw i}}async subscribeAll(e,t){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));let r={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!L("USE_SUB_RTX"),twcc:!!L("SUBSCRIBE_TWCC"),svc:Array.isArray(L("SVC"))&&L("SVC").length!==0?L("SVC"):void 0};try{return await this.signal.request(Fe.SUBSCRIBE_STREAMS,r,!0)}catch(n){if(t&&n.data&&n.data.code===Pe.ERR_SUBSCRIBE_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),n.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw n}}async setVideoProfile(e){let t=function(r){if(!(r.bitrateMax&&r.bitrateMin&&r.frameRate&&r.height&&r.width))return;let n=r.frameRate,i=r.width,o=r.height,a=!0;return typeof n!="number"&&(n=n.exact||n.ideal||n.max||n.min||0,n||(a=!1)),typeof i!="number"&&(i=i.exact||i.ideal||i.max||i.min||0,i||(a=!1)),typeof o!="number"&&(o=o.exact||o.ideal||o.max||o.min||0,n||(a=!1)),a?{stream_type:0,width:i,height:o,fps:n,start_bps:1e3*r.bitrateMax,min_bps:1e3*r.bitrateMin,target_bps:1e3*r.bitrateMax}:void 0}(e);if(t)return this.signal.request(Fe.SET_VIDEO_PROFILE,t);w.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(Fe.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(r){w.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),r)}}async unsubscribeDataChannel(e,t){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await he.all(e.map(r=>this.signal.request(Fe.UNSUBSCRIBE_DATASTREAM,{stream_id:r,uid:t},!0)))}catch(r){w.warning("unsubscribeDataChannel warning: ",r)}}async massUnsubscribe(e){try{await this.signal.request(Fe.UNSUBSCRIBE_STREAMS,e,!0)}catch(t){w.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),t)}}async reconnectPC(e){let{iceParameters:t,dtlsParameters:r,rtpCapabilities:n}=e;return{gatewayEstablishParams:await this.signal.request(Fe.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:r,rtpCapabilities:n}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(Fe.GATEWAY_INFO)}async renewToken(e){await this.signal.request(Fe.RENEW_TOKEN,e),this.key=e.token}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),this.state!=="CONNECTED")return void(this.role=e);let r,n=0;e==="audience"?this._clientRoleOptions&&this._clientRoleOptions.delay?(r=this._clientRoleOptions.delay,n=1):n=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:n=0,await this.signal.request(Fe.SET_CLIENT_ROLE,{role:e,level:n,delay:r,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(Fe.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(Fe.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(Fe.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(Fe.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(Fe.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,r){if(this.signal instanceof l$)return this.signal.sendExtensionMessage(e,t,r)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Jl({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Fe.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){let e=Wx.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;let e=function(t){let r;return r=t.startsWith("dc")?t.match(/(dc\:\/\/)?([^:]+):(\d+)/):t.match(/(wss\:\/\/)?([^:]+):(\d+)/),r?{username:$n.username,password:$n.password,turnServerURL:r[2],tcpport:parseInt(r[3])+30,udpport:parseInt(r[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(Jl(Jl({},$n),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;let e=await this.signal.request(Fe.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),e.ntp_offset!=null&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach(t=>{let r=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(n=>n.peer_uid===t.peer_uid);r&&r.B_st!==t.B_st&&sC(()=>{this.emit(Bn.STREAM_TYPE_CHANGE,t.peer_uid,t.B_st)})}),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new q(O.UNEXPECTED_ERROR,"can not generate join message, no join info");let t=Object.assign({},this.joinInfo.apResponse),r=L("REPORT_APP_SCENARIO");if(typeof r!="string")try{r=JSON.stringify(r)}catch{r=void 0}r&&r.length>128&&(r=void 0);let n=!(Rr()||Ree(87)||O6())&&typeof L("ENABLE_PRE_SUB")=="boolean"&&L("ENABLE_PRE_SUB"),i=!O6()&&hc("ENABLE_PREALLOC_PC","boolean"),o=Jl({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:Ra,browser:navigator.userAgent,process_id:L("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:L("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:r,attributes:{userAttributes:{enablePublishedUserList:L("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:L("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof L("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?L("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof L("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?L("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof L("ENABLE_USER_LICENSE_CHECK")=="boolean"?L("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:L("USE_PUB_RTX")===!0||L("USE_SUB_RTX")===!0||void 0,disableFEC:L("DISABLE_FEC"),enableNTPReport:!!L("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!L("ENABLE_INSTANT_VIDEO")||void 0,enableFulllinkAvSync:!!L("ENABLE_FULL_LINK_AV_SYNC")||void 0,enableDataStream2:hc("ENABLE_DATASTREAM_2","boolean"),enableAutFeedback:!!L("ENABLE_AUT_FEEDBACK")||void 0,rtm2Flag:typeof this.joinInfo.rtmFlag=="number"?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!L("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:hc("USE_XR","boolean"),enableLossbasedBwe:hc("ENABLE_LOSSBASED_BWE","boolean"),enableAutCC:!!L("ENABLE_AUT_CC")||void 0,enableCCFallback:hc("ENABLE_CC_FALLBACK","boolean"),enablePreallocPC:i,preSubNum:n?hc("PRE_SUB_NUM","number"):void 0,enablePubTWCC:hc("PUBLISH_TWCC","boolean"),enableSubTWCC:hc("SUBSCRIBE_TWCC","boolean"),enablePubRTX:hc("USE_PUB_RTX","boolean"),enableSubRTX:hc("USE_SUB_RTX","boolean"),enableSubSVC:L("ENABLE_SVC")?L("ENABLE_SVC_DEFAULT_CODECS"):Array.isArray(L("SVC"))&&L("SVC").length!==0?L("SVC"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(o.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(o.aes_mode=this.joinInfo.aesmode,L("ENCRYPT_AES")?(o.aes_secret=this.joinInfo.aespassword,o.aes_encrypt=!0):o.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(o.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(o.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),this.joinInfo.defaultVideoStream!==void 0&&(o.default_video_stream=this.joinInfo.defaultVideoStream),o}getRejoinMessage(){if(!this.joinInfo)throw new q(O.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on($e.WS_RECONNECT_WAITTING_FINISH,e=>{var t;me(t=["tryNext","recover"]).call(t,e)&&this.joinInfo&&Se.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on($e.WS_RECONNECT_CREATE_CONNECTION,e=>{this.joinGatewayStartTime=Date.now()}),this.signal.on($e.WS_RECONNECTING,e=>{this.joinInfo&&Se.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||Gn.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Se.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:this.spec.mode==="live"?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:this.role==="audience"?2:1,buildFormat:2}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on($e.WS_CLOSED,e=>{let t;switch(e){case Bt.LEAVE:t=Gn.LEAVE;break;case Bt.UID_BANNED:case Bt.IP_BANNED:case Bt.CHANNEL_BANNED:case Bt.SERVER_ERROR:t=Gn.SERVER_ERROR;break;case Bt.FALLBACK:t=Gn.FALLBACK;break;case Bt.LICENSE_MISSING:case Bt.LICENSE_EXPIRED:case Bt.LICENSE_MINUTES_EXCEEDED:case Bt.LICENSE_PERIOD_INVALID:case Bt.LICENSE_MULTIPLE_SDK_SERVICE:case Bt.LICENSE_ILLEGAL:case Bt.TOKEN_EXPIRE:t=e;break;default:t=Gn.NETWORK_ERROR}w.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(t||"undefined -> "+Gn.NETWORK_ERROR)),this.joinInfo&&Se.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===Bt.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==Bt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on($e.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(w.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),Se.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){let e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void w.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));Gt("EVENT_REPORT_DOMAIN",e[1]),Gt("EVENT_REPORT_BACKUP_DOMAIN",e[1]),Gt("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}}),this.signal.on(pt.ON_UPLINK_STATS,e=>{this._statsCollector.updateUplinkStats(e)}),this.signal.on($e.REQUEST_RECOVER,(e,t,r)=>{if(!this.joinInfo)return r(new q(O.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Kn(this,Bn.REQUEST_NEW_GATEWAY_LIST).then(t).catch(r)}),this.signal.on($e.REQUEST_JOIN_INFO,async e=>{var t;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));let{iceParameters:r,dtlsParameters:n,rtpCapabilities:i}=await Kn(this,Bn.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(t=this.joinInfo)===null||t===void 0?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:r,dtlsParameters:n,rtpCapabilities:i,version:"2"}}))}),this.signal.on($e.REQUEST_REJOIN_INFO,e=>{e(this.getRejoinMessage())}),this.signal.on($e.REPORT_JOIN_GATEWAY,(e,t)=>{if(!this.joinInfo)return;let r,n="";var i;e instanceof q?(r=((i=e.data)===null||i===void 0?void 0:i.desc)||e.code,n=e.message):r=e,Se.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:r,errorMsg:n,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1}),this.signal.on($e.IS_P2P_DISCONNECTED,e=>{e(N0(this,Bn.IS_P2P_DISCONNECTED))}),this.signal.on($e.DISCONNECT_P2P,()=>{this.emit(Bn.DISCONNECT_P2P)}),this.signal.on($e.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on($e.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on($e.JOIN_RESPONSE,e=>{let t=this.getCurrentGatewayAddress();this.emit(Bn.JOIN_RESPONSE,e,t)}),this.signal.on($e.PRE_CONNECT_PC,async()=>{if(this.joinInfo){this.updateTurnConfigFromSignal();let e=this.getCurrentGatewayAddress(),t=L("FINGERPRINT")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(e&&t){let r=Ote(e);this.emit(Bn.PRE_CONNECT_PC,{candidates:r,fingerprint:t})}}})}async tryUnsubBeforeResub(e,t){try{await this.signal.request(Fe.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(r){throw w.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),r),r}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(Fe.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(r){throw w.warning("unsubscribe datachannel warning",r),r}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(Fe.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(r){throw w.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),r),r}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(Fe.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(r){throw w.warning("unpublish datastream warning: ",r),r}}async tryMassUnsubBeforeResub(e){let t={users:e.map(r=>({stream_id:r.stream_id,stream_type:r.stream_type}))};try{await this.signal.request(Fe.UNSUBSCRIBE_STREAMS,t,!0)}catch(r){throw w.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),r),r}}async muteLocal(e,t){let r={action:e.find(n=>n.stream_type===Lt.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(Fe.CONTROL,r,!0,!0)}catch(n){throw w.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),n),n}}async unmuteLocal(e,t){let r={action:e.find(n=>n.stream_type===Lt.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(Fe.CONTROL,r,!0,!0)}catch(n){throw w.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),n),n}}async muteRemote(e,t){let r={action:e===Ce.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(Fe.CONTROL,r,!0,!0)}catch(n){throw w.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),n),n}}async unmuteRemote(e,t){let r={action:e===Ce.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(Fe.CONTROL,r,!0,!0)}catch(n){throw w.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),n),n}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){let t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(Fe.RESTART_ICE,t,!0)}catch(r){throw w.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),r),r}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,Gn.P2P_FAILED)}getCurrentGatewayAddress(){var e,t;if(!L("GATEWAY_WSS_ADDRESS"))return L("USE_CANDIDATE_FROM_AP_DETAIL")&&(e=this.joinInfo)!==null&&e!==void 0&&e.apGatewayAddress?(w.debug("[".concat(this.store.clientId,"] use candidate from ap detail, ").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):(t=this.joinInfo)!==null&&t!==void 0&&t.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(Fe.SET_PARAMETER,{enablePublishAudioFilter:e})}},p_=0,Kx=0;function ic(e,t,r,n){return new he((i,o)=>{t.timeout=t.timeout||L("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!r?(t.data=JSON.stringify(t.data),p_+=Ic(t.data)):r&&(t.data.size?p_+=t.data.size:t.data instanceof FormData?p_+=jee(t.data):p_+=Ic(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,Zi.request(t).then(a=>{typeof a.data=="string"?Kx+=Ic(a.data):a.data instanceof ArrayBuffer||a.data instanceof Uint8Array?Kx+=a.data.byteLength:Kx+=Ic(JSON.stringify(a.data)),n&&i({data:a.data,headers:a.headers}),i(a.data)}).catch(a=>{Zi.isCancel(a)?o(new q(O.OPERATION_ABORTED,"cancel token canceled")):a.code==="ECONNABORTED"?o(new q(O.NETWORK_TIMEOUT,a.message)):a.response?o(new q(O.NETWORK_RESPONSE_ERROR,a.response.status)):o(new q(O.NETWORK_ERROR,a.message))})})}(function(){var e;function t(k){var P=0;return function(){return P<k.length?{done:!1,value:k[P++]}:{done:!0}}}var r=typeof Object.defineProperties=="function"?Object.defineProperty:function(k,P,B){return k==Array.prototype||k==Object.prototype||(k[P]=B.value),k},n,i=function(k){k=[typeof globalThis=="object"&&globalThis,k,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rp=="object"&&Rp];for(var P=0;P<k.length;++P){var B=k[P];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}(this);function o(k,P){if(P)e:{var B=i;k=k.split(".");for(var R=0;R<k.length-1;R++){var _=k[R];if(!(_ in B))break e;B=B[_]}(P=P(R=B[k=k[k.length-1]]))!=R&&P!=null&&r(B,k,{configurable:!0,writable:!0,value:P})}}function a(k){return(k={next:k})[Symbol.iterator]=function(){return this},k}function s(k){var P=typeof Symbol<"u"&&Symbol.iterator&&k[Symbol.iterator];return P?P.call(k):{next:t(k)}}if(o("Symbol",function(k){function P(_,x){this.A=_,r(this,"description",{configurable:!0,writable:!0,value:x})}if(k)return k;P.prototype.toString=function(){return this.A};var B="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",R=0;return function _(x){if(this instanceof _)throw new TypeError("Symbol is not a constructor");return new P(B+(x||"")+"_"+R++,x)}}),o("Symbol.iterator",function(k){if(k)return k;k=Symbol("Symbol.iterator");for(var P="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),B=0;B<P.length;B++){var R=i[P[B]];typeof R=="function"&&typeof R.prototype[k]!="function"&&r(R.prototype,k,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return k}),typeof Object.setPrototypeOf=="function")n=Object.setPrototypeOf;else{var c;e:{var l={};try{l.__proto__={a:!0},c=l.a;break e}catch{}c=!1}n=c?function(k,P){if(k.__proto__=P,k.__proto__!==P)throw new TypeError(k+" is not extensible");return k}:null}var u=n;function d(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function f(k){if(k.m)throw new TypeError("Generator is already running");k.m=!0}function p(k,P){return k.h=3,{value:P}}function m(k){this.g=new d,this.G=k}function g(k,P,B,R){try{var _=P.call(k.g.j,B);if(!(_ instanceof Object))throw new TypeError("Iterator result "+_+" is not an object");if(!_.done)return k.g.m=!1,_;var x=_.value}catch(T){return k.g.j=null,k.g.s(T),y(k)}return k.g.j=null,R.call(k.g,x),y(k)}function y(k){for(;k.g.h;)try{var P=k.G(k.g);if(P)return k.g.m=!1,{value:P.value,done:!1}}catch(B){k.g.v=void 0,k.g.s(B)}if(k.g.m=!1,k.g.l){if(P=k.g.l,k.g.l=null,P.F)throw P.D;return{value:P.return,done:!0}}return{value:void 0,done:!0}}function v(k){this.next=function(P){return k.o(P)},this.throw=function(P){return k.s(P)},this.return=function(P){return function(B,R){f(B.g);var _=B.g.j;return _?g(B,"return"in _?_.return:function(x){return{value:x,done:!0}},R,B.g.return):(B.g.return(R),y(B))}(k,P)},this[Symbol.iterator]=function(){return this}}function E(k,P){return P=new v(new m(P)),u&&k.prototype&&u(P,k.prototype),P}if(d.prototype.o=function(k){this.v=k},d.prototype.s=function(k){this.l={D:k,F:!0},this.h=this.C||this.u},d.prototype.return=function(k){this.l={return:k},this.h=this.u},m.prototype.o=function(k){return f(this.g),this.g.j?g(this,this.g.j.next,k,this.g.o):(this.g.o(k),y(this))},m.prototype.s=function(k){return f(this.g),this.g.j?g(this,this.g.j.throw,k,this.g.o):(this.g.s(k),y(this))},o("Array.prototype.entries",function(k){return k||function(){return function(P,B){P instanceof String&&(P+="");var R=0,_=!1,x={next:function(){if(!_&&R<P.length){var T=R++;return{value:B(T,P[T]),done:!1}}return _=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}(this,function(P,B){return[P,B]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var b=function(k,P){for(var B=0;B<k.length;B++)P(k[B])},S=function(k){return k.replace(/\r?\n|\r/g,`\r
`)},A=function(k,P,B){return P instanceof Blob?(B=B!==void 0?B+"":typeof P.name=="string"?P.name:"blob",P.name===B&&Object.prototype.toString.call(P)!=="[object Blob]"||(P=new File([P],B)),[String(k),P]):[String(k),String(P)]},N=function(k,P){if(k.length<P)throw new TypeError(P+" argument required, but only "+k.length+" present.")},D=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,M=D.FormData,H=D.XMLHttpRequest&&D.XMLHttpRequest.prototype.send,V=D.Request&&D.fetch,G=D.navigator&&D.navigator.sendBeacon,Y=D.Element&&D.Element.prototype,Z=D.Symbol&&Symbol.toStringTag;Z&&(Blob.prototype[Z]||(Blob.prototype[Z]="Blob"),"File"in D&&!File.prototype[Z]&&(File.prototype[Z]="File"));try{new File([],"")}catch{D.File=function(k,P,B){return k=new Blob(k,B||{}),Object.defineProperties(k,{name:{value:P},lastModified:{value:+(B&&B.lastModified!==void 0?new Date(B.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Z&&Object.defineProperty(k,Z,{value:"File"}),k}}var $=function(k){return k.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},F=function(k){this.i=[];var P=this;k&&b(k.elements,function(B){if(B.name&&!B.disabled&&B.type!=="submit"&&B.type!=="button"&&!B.matches("form fieldset[disabled] *"))if(B.type==="file"){var R=B.files&&B.files.length?B.files:[new File([],"",{type:"application/octet-stream"})];b(R,function(_){P.append(B.name,_)})}else B.type==="select-multiple"||B.type==="select-one"?b(B.options,function(_){!_.disabled&&_.selected&&P.append(B.name,_.value)}):B.type==="checkbox"||B.type==="radio"?B.checked&&P.append(B.name,B.value):(R=B.type==="textarea"?S(B.value):B.value,P.append(B.name,R))})};if((e=F.prototype).append=function(k,P,B){N(arguments,2),this.i.push(A(k,P,B))},e.delete=function(k){N(arguments,1);var P=[];k=String(k),b(this.i,function(B){B[0]!==k&&P.push(B)}),this.i=P},e.entries=function k(){var P,B=this;return E(k,function(R){if(R.h==1&&(P=0),R.h!=3)return P<B.i.length?R=p(R,B.i[P]):(R.h=0,R=void 0),R;P++,R.h=2})},e.forEach=function(k,P){N(arguments,1);for(var B=s(this),R=B.next();!R.done;R=B.next()){var _=s(R.value);R=_.next().value,_=_.next().value,k.call(P,_,R,this)}},e.get=function(k){N(arguments,1);var P=this.i;k=String(k);for(var B=0;B<P.length;B++)if(P[B][0]===k)return P[B][1];return null},e.getAll=function(k){N(arguments,1);var P=[];return k=String(k),b(this.i,function(B){B[0]===k&&P.push(B[1])}),P},e.has=function(k){N(arguments,1),k=String(k);for(var P=0;P<this.i.length;P++)if(this.i[P][0]===k)return!0;return!1},e.keys=function k(){var P,B,R,_,x=this;return E(k,function(T){if(T.h==1&&(P=s(x),B=P.next()),T.h!=3)return B.done?void(T.h=0):(R=B.value,_=s(R),p(T,_.next().value));B=P.next(),T.h=2})},e.set=function(k,P,B){N(arguments,2),k=String(k);var R=[],_=A(k,P,B),x=!0;b(this.i,function(T){T[0]===k?x&&(x=!R.push(_)):R.push(T)}),x&&R.push(_),this.i=R},e.values=function k(){var P,B,R,_,x=this;return E(k,function(T){if(T.h==1&&(P=s(x),B=P.next()),T.h!=3)return B.done?void(T.h=0):(R=B.value,(_=s(R)).next(),p(T,_.next().value));B=P.next(),T.h=2})},F.prototype._asNative=function(){for(var k=new M,P=s(this),B=P.next();!B.done;B=P.next()){var R=s(B.value);B=R.next().value,R=R.next().value,k.append(B,R)}return k},F.prototype._blob=function(){var k="----formdata-polyfill-"+Math.random(),P=[],B="--"+k+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(R,_){return typeof R=="string"?P.push(B+$(S(_))+`"\r
\r
`+S(R)+`\r
`):P.push(B+$(S(_))+'"; filename="'+$(R.name)+`"\r
Content-Type: `+(R.type||"application/octet-stream")+`\r
\r
`,R,`\r
`)}),P.push("--"+k+"--"),new Blob(P,{type:"multipart/form-data; boundary="+k})},F.prototype[Symbol.iterator]=function(){return this.entries()},F.prototype.toString=function(){return"[object FormData]"},Y&&!Y.matches&&(Y.matches=Y.matchesSelector||Y.mozMatchesSelector||Y.msMatchesSelector||Y.oMatchesSelector||Y.webkitMatchesSelector||function(k){for(var P=(k=(this.document||this.ownerDocument).querySelectorAll(k)).length;0<=--P&&k.item(P)!==this;);return-1<P}),Z&&(F.prototype[Z]="FormData"),H){var K=D.XMLHttpRequest.prototype.setRequestHeader;D.XMLHttpRequest.prototype.setRequestHeader=function(k,P){K.call(this,k,P),k.toLowerCase()==="content-type"&&(this.B=!0)},D.XMLHttpRequest.prototype.send=function(k){k instanceof F?(k=k._blob(),this.B||this.setRequestHeader("Content-Type",k.type),H.call(this,k)):H.call(this,k)}}V&&(D.fetch=function(k,P){return P&&P.body&&P.body instanceof F&&(P.body=P.body._blob()),V.call(this,k,P)}),G&&(D.navigator.sendBeacon=function(k,P){return P instanceof F&&(P=P._asNative()),G.call(this,k,P)}),D.FormData=F}})();var M0=()=>{let e=L("AREAS");return e.length===0&&e.push(xt.GLOBAL),Js(e).call(e,(t,r,n)=>{let i=jte(r);return i?n===0?i:"".concat(t,",").concat(i):t},"")},jte=e=>e===xt.OVERSEA?"".concat(Qn.ASIA,",").concat(Qn.EUROPE,",").concat(Qn.AFRICA,",").concat(Qn.NORTH_AMERICA,",").concat(Qn.SOUTH_AMERICA,",").concat(Qn.OCEANIA):Qn[e],I6e=e=>{let t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map(r=>{let n=hC[r],i=Object.keys(n);i&&i.map(o=>{o!=="CODE"&&(t[o]=t[o].concat(n[o]))})}),t},_b={GLOBAL:{ASIA:[xt.CHINA,xt.JAPAN,xt.INDIA,xt.KOREA,xt.HKMC],EUROPE:[],NORTH_AMERICA:[xt.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},m_=Object.keys(_b[xt.GLOBAL]),qx=[xt.CHINA,xt.NORTH_AMERICA,xt.EUROPE,xt.ASIA,xt.JAPAN,xt.INDIA,xt.OCEANIA,xt.SOUTH_AMERICA,xt.AFRICA,xt.KOREA,xt.HKMC,xt.US],x6e=function(e,t){let r=[];if(me(e).call(e,xt.GLOBAL)){let o=[xt.GLOBAL,xt.OVERSEA],a=Object.keys(hC);if(t===xt.GLOBAL)throw new q(O.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===xt.CHINA)r=[xt.OVERSEA];else if(i=t,me(m_).call(m_,i)){let s=(n=t,_b[xt.GLOBAL][n]||[]),c=[...o,t,...s];r=a.filter(l=>!me(c).call(c,l))}else if(function(s){let c=!1;return m_.forEach(l=>{var u;me(u=_b[xt.GLOBAL][l]).call(u,s)&&(c=!0)}),c}(t)){let s=function(l){let u;return m_.forEach(d=>{var f;me(f=_b[xt.GLOBAL][d]).call(f,l)&&(u=d)}),u}(t),c=[...o,s,t];r=a.filter(l=>!me(c).call(c,l))}else r=e;r=function(s){let c=[];return qx.forEach(l=>{me(s).call(s,l)&&c.push(l)}),c.concat(s.filter(l=>!me(qx).call(qx,l)))}(r)}else r=e;var n,i;return r};function m$(e){var t,r;if(!e&&me(t=L("AREAS")).call(t,xt.EXTENSIONS))return w.debug("update area from ap : reset"),void VL(nVe,!0);if(!me(r=L("AREAS")).call(r,xt.GLOBAL)||!e)return;let n=hC.EXTENSIONS;n&&(n={CODE:jte(xt.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},w.debug("update area from ap success: ".concat(e,",config is "),n),Gt("AREAS",[xt.EXTENSIONS],!0),Object.keys(n).map(i=>{i==="LOG_UPLOAD_SERVER"||i==="EVENT_REPORT_DOMAIN"||i==="EVENT_REPORT_BACKUP_DOMAIN"||i==="PROXY_SERVER_TYPE3"?Gt(i,n[i][0]):Gt(i,n[i])}))}function VL(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=Se.reportApiInvoke(null,{name:Qr.SET_AREA,options:e,tag:Cr.TRACER});try{let n=[];if(typeof e=="string"&&(n=[e]),Array.isArray(e)&&(e.forEach(o=>{if(!me(e6).call(e6,o))throw new q(O.INVALID_PARAMS,"invalid area code")}),n=e),Object.prototype.toString.call(e)==="[object Object]"){let{areaCode:o,excludedArea:a}=e;if(!o)throw new q(O.INVALID_PARAMS,"area code is needed");let s=o;typeof o=="string"&&(s=[o]),n=a?x6e(s,a):s}if(!t){if(Su.AREAS){let o=new q(O.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return r.onError(o),void w.warning("setArea is prohibited because of config-distribute")}if(me(n).call(n,xt.GLOBAL)&&L("AREAS")===xt.EXTENSIONS){let o=new q(O.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return r.onError(o),void w.warning("setArea is prohibited because of ap extensions")}}Gt("AREAS",n,t);let i=I6e(n);Object.keys(i).map(o=>{o==="LOG_UPLOAD_SERVER"||o==="EVENT_REPORT_DOMAIN"||o==="EVENT_REPORT_BACKUP_DOMAIN"||o==="PROXY_SERVER_TYPE3"?Gt(o,i[o][0]):Gt(o,i[o])}),w.debug("set area success:",n.join(","))}catch(n){throw r.onError(n),n}r.onSuccess()}function g$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g$(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Yx=1;function A6e(e,t,r,n,i){Yx+=1;let o={sid:r.sid,command:"convergeAllocateEdge",uid:"666",appId:r.appId,ts:Math.floor(Date.now()/1e3),seq:Yx,requestId:Yx,version:Ra,cname:r.cname},a={service_name:t,json_body:JSON.stringify(o)},s,c,l=e[0];return nc(async()=>{s=Date.now();let u=await ic(l,{data:a,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Date.now()-s,u.code!==0){let p=new q(O.UNEXPECTED_RESPONSE,"live streaming ap error, code"+u.code,{retry:!0,responseTime:c});throw w.error(p.toString()),p}let d=JSON.parse(u.json_body);if(d.code!==200){let p=new q(O.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(d.code,", reason: ").concat(d.reason),{code:d.code,responseTime:c});throw w.error(p.toString()),p}if(!d.servers||d.servers.length===0){let p=new q(O.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:d.code,responseTime:c});throw w.error(p.toString()),p}let f=function(p,m){return{addressList:p.servers.map(g=>"wss://".concat(g.address.replace(/\./g,"-"),".").concat(L("WORKER_DOMAIN"),":").concat(g.wss,"?serviceName=").concat(encodeURIComponent(m))),workerToken:p.workerToken,vid:p.vid}}(d,t);return L("LIVE_STREAMING_ADDRESS")&&(f.addressList=L("LIVE_STREAMING_ADDRESS")instanceof Array?L("LIVE_STREAMING_ADDRESS"):[L("LIVE_STREAMING_ADDRESS")]),wk(wk({},f),{},{responseTime:c})},(u,d)=>(Se.apworkerEvent(r.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(u.addressList),firstSuccess:d===0,responseTime:c,serverIp:e[d%e.length]}),!1),(u,d)=>(Se.apworkerEvent(r.sid,{success:!1,sc:u.data&&u.data.code||200,serviceName:t,responseTime:c,serverIp:e[d%e.length]}),!!(u.code!==O.OPERATION_ABORTED&&u.code!==O.UNEXPECTED_RESPONSE||u.data&&u.data.retry)&&(l=e[(d+1)%e.length],!0)),i)}var Xx=1;function y$(e,t,r,n){let{url:i,areaCode:o}=e,{clientId:a,sid:s}=t,c=Date.now(),l,[u,d]=$L(t,o,[Br.CHOOSE_SERVER]),f=$r.networkState;return nc(async()=>{f&&$r.networkState===Co.OFFLINE&&$r.onlineWaiter&&await he.race([$r.onlineWaiter,Ln(n&&n.maxRetryTimeout||Kr.maxRetryTimeout)]),f=$r.networkState;let{data:p,headers:m}=await ic(i,{data:u,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=m.http3==="1"?1:-1,Se.reportResourceTiming(i,s),Ute(p,i,t,c,[Br.CHOOSE_SERVER],l);let g=D0(p,Br.CHOOSE_SERVER);return BL(g),AL(g,i)},p=>(p&&Se.joinChooseServer(s,{lts:c,succ:!0,csAddr:i,opid:d,serverList:p.gatewayAddrs.map(m=>m.address),ec:null,cid:p.cid.toString(),uid:p.uid.toString(),csIp:p.csIp,unilbsServerIds:[Br.CHOOSE_SERVER].toString(),isHttp3:l}),!1),p=>p.code!==O.OPERATION_ABORTED&&(p.code===O.CAN_NOT_GET_GATEWAY_SERVER?p.data.retry:(Se.joinChooseServer(s,{lts:c,succ:!1,csAddr:i,serverList:null,opid:d,ec:p.code,csIp:p.data&&p.data.csIp,unilbsServerIds:[Br.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:f}),isHttp3:l}),w.warning("[".concat(a||"sid-".concat(s.slice(0,6)),"] Choose server network error, retry"),p),!0)),n)}function v$(e,t,r,n){let i,{url:o,areaCode:a,serviceIds:s}=e,c=Date.now(),[l,u]=$L(t,a,s),d;return nc(async()=>{d&&$r.networkState===Co.OFFLINE&&$r.onlineWaiter&&await he.race([$r.onlineWaiter,Ln(n&&n.maxRetryTimeout||Kr.maxRetryTimeout)]),d=$r.networkState;let{data:f,headers:p}=await ic(o,{data:l,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);i=p.http3==="1"?1:-1,Se.reportResourceTiming(o,t.sid),Ute(f,o,t,c,s,i);let m=D0(f,Br.CHOOSE_SERVER),g=D0(f,t.cloudProxyServer==="proxy5"?Br.CLOUD_PROXY_5:t.cloudProxyServer==="proxy3"||t.cloudProxyServer==="proxy4"?Br.CLOUD_PROXY:Br.CLOUD_PROXY_FALLBACK);return BL(m),{gatewayInfo:AL(m,o),proxyInfo:g,url:o}},f=>(f.gatewayInfo&&Se.joinChooseServer(t.sid,{lts:c,succ:!0,csAddr:o,serverList:f.gatewayInfo.gatewayAddrs.map(p=>p.address),ec:null,opid:u,cid:f.gatewayInfo.cid.toString(),uid:f.gatewayInfo.uid.toString(),csIp:f.gatewayInfo.csIp,unilbsServerIds:s.toString(),isHttp3:i}),f.proxyInfo&&Se.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:o,turnServerAddrList:f.proxyInfo.addresses.map(p=>p.ip).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:s.toString()}),!1),f=>f.code!==O.OPERATION_ABORTED&&(f.code===O.CAN_NOT_GET_GATEWAY_SERVER?f.data.retry:(Se.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:f.code,eventType:t.cloudProxyServer,unilbsServerIds:s.toString(),extend:JSON.stringify({networkState:d})}),w.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),f),!0)),n)}var Ute=(e,t,r,n,i,o)=>{let{sid:a,clientId:s,cloudProxyServer:c}=r,l=[],u=d=>{d.flag===4096?Se.joinChooseServer(a,{lts:n,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:d.error.message,csIp:d.error.data&&d.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:o}):d.flag!==1048576&&d.flag!==4194304&&d.flag!==4194310||Se.joinWebProxyAP(a,{lts:n,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:d.error.code,eventType:c,unilbsServerIds:i.toString()})};if(e.response_body.forEach(d=>{let f=d.buffer.code;if(d.uri===23&&f===0&&!d.buffer.edges_services)if(d.buffer.flag===4194310)w.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),d.buffer.edges_services=[];else{let p={error:new q(O.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:d.buffer.flag};l.push(p),u(p)}if(f!==0){let p=sm(f),m={error:new q(O.CAN_NOT_GET_GATEWAY_SERVER,p.desc,{desc:p.desc,retry:p.retry,csIp:e.detail[502]}),flag:d.buffer.flag};d.buffer.flag===4194310?w.warning(m.error.toString()):l.push(m),u(m)}}),l.length)throw w.warning("[".concat(s||"sid-".concat(a.slice(0,6)),"] multi unilbs ").concat(t," failed, ").concat(l.map(d=>"flag: ".concat(d.flag,", message: ").concat(d.error.message,", retry: ").concat(d.error.data.retry)).join(" | "))),new q(O.CAN_NOT_GET_GATEWAY_SERVER,l.map(d=>"flag: ".concat(d.flag,", message: ").concat(d.error.message)).join(" | "),{retry:!!l.find(d=>d.error.data.retry),csIp:e.detail[502],desc:[...new Set(l.map(d=>{var f;return d==null||(f=d.error)===null||f===void 0||(f=f.data)===null||f===void 0?void 0:f.desc}).filter(d=>!!d))]})},BL=e=>{var t,r,n,i;if(e.addresses&&e.addresses.length===0&&e.code===0)throw new q(O.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(L("AP_AREA")&&((n=e.detail)!==null&&n!==void 0&&n[23]&&typeof((i=e.detail)===null||i===void 0?void 0:i[23])=="string"?m$(e.detail[23].toLowerCase()):m$()),(t=e.detail)!==null&&t!==void 0&&t[19]&&typeof((r=e.detail)===null||r===void 0?void 0:r[19])=="string"){let a=e.detail[19],s=a==null?void 0:a.split(";");for(let c=0;c<s.length;c++){var o;let l=Ci(o=s[c]).call(o);e.addresses[c]&&s&&(e.addresses[c].fingerprint=l)}}if(L("GATEWAY_ADDRESS")&&L("GATEWAY_ADDRESS").length>0){w.debug("assign gateway address to",L("GATEWAY_ADDRESS"));let a=L("GATEWAY_ADDRESS").map(s=>{var c,l;let u=(c=(l=e.addresses.find(d=>d.ip===s.ip&&d.port===s.port))===null||l===void 0?void 0:l.fingerprint)!==null&&c!==void 0?c:"";return{ip:s.ip,port:s.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:u}});e.addresses=a}},N6e=(e,t)=>{if(e.response_body&&e.response_body.length){let r=e.response_body[0];if(r.buffer.code!==0){let n=sm(r.buffer.code);throw new q(O.UPDATE_TICKET_FAILED,"[".concat(r.buffer.code,"]: ").concat(n.desc),{retry:n.retry})}return r.buffer.ticket}throw w.debug("update ticket request received ap response without response body:",t),new q(O.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},$L=(e,t,r)=>{let n=Math.floor(Math.random()*1e12),i={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:wk({6:e.stringUid,11:t,12:L("USE_NEW_TOKEN")?"1":void 0,22:t},e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:r,uid:e.uid||0}}]};i.request_bodies.forEach(a=>{e.multiIP&&e.multiIP.gateway_ip&&(a.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))});let o=new FormData;return o.append("request",JSON.stringify(i)),[o,n]},O6e=(e,t)=>{let r=Math.floor(Math.random()*1e12),n={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map(o=>({ip:o.ip,port:o.port}))}}]},i=new FormData;return i.append("request",JSON.stringify(n)),[i,r]},Pp=0;function qm(e){return he.all(e.map(t=>t.then(r=>{throw r},r=>r))).then(t=>{throw t},t=>t)}var j0=async e=>{let{fragementLength:t,referenceList:r,asyncMapHandler:n,allFailedhandler:i,promisesCollector:o}=e,a=0,s=t,c,l=0,u=async()=>{let d=(()=>{let f=a*s,p=f+s;return r.slice(f,p).map(n)})();o&&o.push(...d);try{c=await qm(d)}catch(f){if(l+=s,a++,!(l>=r.length))return void await u();i(f)}d.forEach(f=>f.cancel())};return await u(),c},Fte=async e=>{let{referenceList:t,asyncMapHandler:r,closeFn:n}=e,i=t.length,o=0,a=async()=>{let s=r(t.shift());try{return await s}catch(c){if(o++,o>=i||n!=null&&n(c))throw c;return a()}};return a()};async function Sk(e,t,r,n){return{gatewayInfo:await async function(i,o,a,s){let c=null,l=[],u=async()=>{let f=L("WEBCS_DOMAIN").slice(0,L("AJAX_REQUEST_CONCURRENT")).map(g=>({url:i.proxyServer?"https://".concat(i.proxyServer,"/ap/?url=").concat(g+"/api/v2/transpond/webrtc?v=2"):"https://".concat(g,"/api/v2/transpond/webrtc?v=2"),areaCode:M0()})),p=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:f.map(g=>g.url)}),m=await j0({fragementLength:L("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:g=>(w.debug("[".concat(i.clientId,"] Connect to choose_server:"),g.url),y$(g,i,o,a)),allFailedhandler:g=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:g},p),g[0]},promisesCollector:l});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},p),m},d=async()=>{if(await Ln(1e3),c!==null)return c;let f=L("WEBCS_DOMAIN_BACKUP_LIST").map(g=>({url:i.proxyServer?"https://".concat(i.proxyServer,"/ap/?url=").concat(g+"/api/v2/transpond/webrtc?v=2"):"https://".concat(g,"/api/v2/transpond/webrtc?v=2"),areaCode:M0()})),p=s.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:f.map(g=>g.url)}),m=await j0({fragementLength:L("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:g=>(w.debug("[".concat(i.clientId,"] Connect to backup choose_server:"),g.url),y$(g,i,o,a)),allFailedhandler:g=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:g},p),g[0]},promisesCollector:l});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},p),m};try{return c=await qm([u(),d()]),l.length&&l.forEach(f=>f.cancel&&typeof f.cancel=="function"&&f.cancel()),c}catch(f){throw f[0]}}(e,t,r,n)}}async function E$(e,t,r,n,i){let o=e.cloudProxyServer;if(o==="disabled"){if(e.useLocalAccessPoint)return await Sk(e,t,r,i);if(L("JOIN_WITH_FALLBACK_MEDIA_PROXY")){let{gatewayInfo:f,proxyInfo:p}=await b$(e,t,r,i);if(e.turnServer&&e.turnServer.mode!=="auto")return{gatewayInfo:f};let m=p.map(g=>({turnServerURL:g.address,tcpport:g.tcpport||$n.tcpport,udpport:g.udpport||$n.udpport,username:g.username||$n.username,password:g.password||$n.password,forceturn:!1,security:!0}));if(i.useP2P){var a;let g=(a=e.uid)!==null&&a!==void 0?a:f.uid,y="glb:".concat(g.toString()),v=await ak(y),E=p.map(b=>({turnServerURL:b.address,tcpport:b.tcpport||$n.tcpport,udpport:b.udpport||$n.udpport,username:y,password:v,forceturn:!1,security:!0}));m.push(...E)}return e.turnServer={mode:"manual",servers:m},{gatewayInfo:f}}return await Sk(e,t,r,i)}let{proxyInfo:s,gatewayInfo:c}=await b$(e,t,r,i),l={gatewayInfo:c},u=s.map(f=>({turnServerURL:f.address,tcpport:o==="proxy3"?void 0:f.tcpport?f.tcpport:$n.tcpport,udpport:o==="proxy4"?void 0:f.udpport?f.udpport:$n.udpport,username:f.username||$n.username,password:f.password||$n.password,forceturn:o!=="proxy4",security:o==="proxy5"}));if(i.useP2P){var d;let f=(d=e.uid)!==null&&d!==void 0?d:c.uid,p="glb:".concat(f.toString()),m=await ak(p),g=s.map(y=>({turnServerURL:y.address,tcpport:o==="proxy3"?void 0:y.tcpport||$n.tcpport,udpport:o==="proxy4"?void 0:y.udpport||$n.udpport,username:p,password:m,forceturn:o!=="proxy4",security:o==="proxy5"}));u.push(...g)}return e.turnServer={mode:"manual",servers:u},w.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(o)),l}async function Vte(e,t,r,n,i){let o=L("ACCOUNT_REGISTER").slice(0,L("AJAX_REQUEST_CONCURRENT")),a=[];a=t.proxyServer?o.map(c=>"https://".concat(t.proxyServer,"/ap/?url=").concat(c+"/api/v1")):o.map(c=>"https://".concat(c,"/api/v1"));let s=i==null?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:a});try{let c=await async function(l,u,d,f,p){let m=Date.now(),g={sid:d.sid,opid:10,appid:d.appId,string_uid:u},y=l[0],v=await nc(()=>ic(y+"".concat(y.indexOf("?")===-1?"?":"&","action=stringuid"),{data:g,cancelToken:f,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(E,b)=>{if(E.code===0){if(E.uid<=0||E.uid>=Math.pow(2,32))throw w.error("Invalid Uint Uid ".concat(u," => ").concat(E.uid),E),Se.reqUserAccount(g.sid,{lts:m,success:!1,serverAddr:y,stringUid:g.string_uid,uid:E.uid,errorCode:O.INVALID_UINT_UID_FROM_STRING_UID,extend:g}),new q(O.INVALID_UINT_UID_FROM_STRING_UID);return Se.reqUserAccount(g.sid,{lts:m,success:!0,serverAddr:y,stringUid:g.string_uid,uid:E.uid,errorCode:null,extend:g}),!1}let S=sm(E.code);return S.retry&&(y=l[(b+1)%l.length]),Se.reqUserAccount(g.sid,{lts:m,success:!1,serverAddr:y,stringUid:g.string_uid,uid:E.uid,errorCode:S.desc,extend:g}),S.retry},(E,b)=>E.code!==O.OPERATION_ABORTED&&(Se.reqUserAccount(g.sid,{lts:m,success:!1,serverAddr:y,stringUid:g.string_uid,uid:null,errorCode:E.code,extend:g}),y=l[(b+1)%l.length],!0),p);if(v.code!==0){let E=sm(v.code);throw new q(O.UNEXPECTED_RESPONSE,E.desc)}return v}(a,e,t,r,n);return i==null||i.recordJoinChannelService({status:"success",endTs:Date.now()},s),c.uid}catch(c){throw i==null||i.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[c]},s),c}}async function k6e(e,t,r){let n=L("ACCOUNT_REGISTER"),i=[];i=t.proxyServer?n.map(o=>"https://".concat(t.proxyServer,"/ap/?url=").concat(o+"/api/v1")):n.map(o=>"https://".concat(o,"/api/v1"));try{return await Fte({referenceList:i,asyncMapHandler:o=>async function(a,s,c,l){let u=Date.now(),d={sid:c.sid,opid:10,appid:c.appId,string_uid:s};try{let f=await ic(a+"".concat(a.indexOf("?")===-1?"?":"&","action=stringuid"),{data:d,cancelToken:l,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(f.code!==0){let p=sm(f.code);throw new q(O.UNEXPECTED_RESPONSE,"preload sua error:".concat(p.desc),p)}if(f.uid<=0||f.uid>=Math.pow(2,32))throw new q(O.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:u,url:a,req:d,uid:f.uid,elapse:Date.now()-u}}catch(f){throw f}}(o,e,t,r),closeFn:o=>o.code===O.OPERATION_ABORTED||o.code===O.UNEXPECTED_RESPONSE&&!o.data.retry})}catch(o){throw o}}async function P6e(e,t,r){let n=L("CDS_AP").slice(0,L("AJAX_REQUEST_CONCURRENT")).map(c=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(c+"/api/v1"):"https://".concat(c,"/api/v1?action=config")),i=n.map(c=>function(l,u,d,f){let p=St(),m={flag:64,cipher_method:0,features:{device:p.name,system:p.os,system_general:navigator.userAgent,vendor:u.appId,version:Ra,cname:u.cname,sid:u.sid,session_id:u.sid,detail:"",proxyServer:u.proxyServer}};return nc(()=>ic(l,{data:m,timeout:1e3,cancelToken:d,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,g=>g.code!==O.OPERATION_ABORTED,f)}(c,e,t,r)),o=null,a=null,s={};try{o=await qm(i)}catch(c){if(c.code===O.OPERATION_ABORTED)throw c;a=c}if(i.forEach(c=>c.cancel()),Se.reportApiInvoke(e.sid,{name:Qr.REQUEST_CONFIG_DISTRIBUTE,options:{error:a,res:o}}).onSuccess(),o&&o.test_tags)try{s=function(c){if(!c.test_tags)return{};let l=c.test_tags,u=Object.keys(l),d={};return u.forEach(f=>{var p;let m=Ci(p=f.slice(4)).call(p),g=JSON.parse(l[f])[1];d[m]=g}),d}(o)}catch{}return s}async function _$(e,t){let r=L("WEBCS_DOMAIN").concat(L("WEBCS_DOMAIN_BACKUP_LIST")).map(n=>({url:"https://".concat(n,"/api/v2/transpond/webrtc?v=2"),areaCode:M0(),serviceIds:[Br.CHOOSE_SERVER,Br.CLOUD_PROXY_FALLBACK]}));try{return await Fte({referenceList:r,asyncMapHandler:n=>async function(i,o,a){let s,{url:c,areaCode:l,serviceIds:u}=i,d=Date.now(),[f,p]=$L(o,l,u),m=$r.networkState;try{m&&$r.networkState===Co.OFFLINE&&$r.onlineWaiter&&await he.race([$r.onlineWaiter,Ln(Kr.maxRetryTimeout)]),m=$r.networkState;let{data:g,headers:y}=await ic(c,{data:f,cancelToken:a,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);s=y.http3==="1"?1:-1,(b=>{let S=[];if(b.response_body.forEach(A=>{let N=A.buffer.code;if(A.uri===23&&N===0&&!A.buffer.edges_services)if(A.buffer.flag===4194310)A.buffer.edges_services=[];else{let D={error:new q(O.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:b.detail[502]}),flag:A.buffer.flag};S.push(D)}if(N!==0){let D=sm(N),M={error:new q(O.CAN_NOT_GET_GATEWAY_SERVER,D.desc,{desc:D.desc,retry:D.retry,csIp:b.detail[502]}),flag:A.buffer.flag};A.buffer.flag===4194310?w.warning(M.error.toString()):S.push(M)}}),S.length)throw new q(O.CAN_NOT_GET_GATEWAY_SERVER,S.map(A=>"flag: ".concat(A.flag,", message: ").concat(A.error.message)).join(" | "),{retry:!!S.find(A=>A.error.data.retry),csIp:b.detail[502],desc:[...new Set(S.map(A=>{var N;return A==null||(N=A.error)===null||N===void 0||(N=N.data)===null||N===void 0?void 0:N.desc}).filter(A=>!!A))]})})(g);let v=D0(g,Br.CHOOSE_SERVER),E=D0(g,Br.CLOUD_PROXY_FALLBACK);return BL(v),{gatewayInfo:AL(v,c),proxyInfo:E,opid:p,requestTime:d,url:c,isHttp3:s,elapse:Date.now()-d}}catch(g){throw g}}(n,e,t),closeFn:n=>n.code===O.OPERATION_ABORTED||n.code===O.CAN_NOT_GET_GATEWAY_SERVER&&!n.data.retry})}catch(n){throw n}}async function b$(e,t,r,n){let i=L("PROXY_SERVER_TYPE3"),o=(p,m,g)=>{let y=g||i;return Array.isArray(y)&&(y=m%2==0?i[1]:i[0]),"https://".concat(y,"/ap/?url=").concat(p)},a=null,s=[],c=async()=>{let p=L("WEBCS_DOMAIN").slice(0,L("AJAX_REQUEST_CONCURRENT")).map((y,v)=>{let E;return E=e.cloudProxyServer==="disabled"&&e.proxyServer?o("".concat(y,"/api/v2/transpond/webrtc?v=2"),v,e.proxyServer):e.cloudProxyServer==="disabled"||e.cloudProxyServer==="fallback"?"https://".concat(y,"/api/v2/transpond/webrtc?v=2"):o("".concat(y,"/api/v2/transpond/webrtc?v=2"),v),{url:E,areaCode:M0(),serviceIds:[Br.CHOOSE_SERVER,e.cloudProxyServer==="proxy5"?Br.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?Br.CLOUD_PROXY:Br.CLOUD_PROXY_FALLBACK]}}),m=n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:p.map(y=>y.url)}),g=await j0({fragementLength:L("FRAGEMENT_LENGTH"),referenceList:p,asyncMapHandler:y=>(w.debug("[".concat(e.clientId,"] Connect to choose_server:"),y.url),v$(y,e,t,r)),allFailedhandler:y=>{throw n.recordJoinChannelService({endTs:Date.now(),status:"error",errors:y},m),y[0]},promisesCollector:s});return n.recordJoinChannelService({endTs:Date.now(),status:"success"},m),g},l=async()=>{if(await Ln(1e3),a!==null)return a;let p=L("WEBCS_DOMAIN_BACKUP_LIST").map((y,v)=>{let E;return E=e.cloudProxyServer==="disabled"&&e.proxyServer?o("".concat(y,"/api/v2/transpond/webrtc?v=2"),v,e.proxyServer):e.cloudProxyServer==="disabled"||e.cloudProxyServer==="fallback"?"https://".concat(y,"/api/v2/transpond/webrtc?v=2"):o("".concat(y,"/api/v2/transpond/webrtc?v=2"),v),{url:E,areaCode:M0(),serviceIds:[Br.CHOOSE_SERVER,e.cloudProxyServer==="proxy5"?Br.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?Br.CLOUD_PROXY:Br.CLOUD_PROXY_FALLBACK]}}),m=n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:p.map(y=>y.url)}),g=await j0({fragementLength:L("FRAGEMENT_LENGTH"),referenceList:p,asyncMapHandler:y=>(w.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),y.url),v$(y,e,t,r)),allFailedhandler:y=>{throw n.recordJoinChannelService({endTs:Date.now(),status:"error",errors:y},m),y[0]},promisesCollector:s});return n.recordJoinChannelService({endTs:Date.now(),status:"success"},m),g},u,d,f;try{({gatewayInfo:u,proxyInfo:d,url:f}=await qm([c(),l()]))}catch(p){throw p[0]}if(s.length&&s.forEach(p=>p.cancel&&typeof p.cancel=="function"&&p.cancel()),!u||!d)throw new q(O.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=f,e.cloudProxyServer!=="disabled"&&Array.isArray(i)&&f){let p=/^https?:\/\/(.+?)(\/.*)?$/.exec(f)[1];me(i).call(i,p)&&(e.proxyServer=p,w.setProxyServer(p),Se.setProxyServer(p))}return a={gatewayInfo:u,proxyInfo:await Yee(d,u.uid)},a}async function D6e(e,t,r){let n=L("UAP_AP").slice(0,L("AJAX_REQUEST_CONCURRENT")).map(o=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(o+"/api/v1?action=uap"):"https://".concat(o,"/api/v1?action=uap")),i=n.map(o=>function(a,s,c,l){let u={command:"convergeAllocateEdge",sid:s.sid,appId:s.appId,token:s.token,ts:Date.now(),version:Ra,cname:s.cname,uid:s.uid.toString(),requestId:Xx,seq:Xx};Xx+=1;let d={service_name:"tele_channel",json_body:JSON.stringify(u)};return nc(async()=>{let f=await ic(a,{data:d,cancelToken:c,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(f.code!==0){let m=new q(O.UNEXPECTED_RESPONSE,"cross channel ap error, code"+f.code,{retry:!0});throw w.error(m.toString()),m}let p=JSON.parse(f.json_body);if(p.code!==200){let m=new q(O.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(p.code,", reason: ").concat(p.reason));throw w.error(m.toString()),m}if(!p.servers||p.servers.length===0){let m=new q(O.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw w.error(m.toString()),m}return{vid:p.vid,workerToken:p.workerToken,addressList:(L("CHANNEL_MEDIA_RELAY_SERVERS")||p.servers).map(m=>"wss://".concat(m.address.replace(/\./g,"-"),".").concat(L("WORKER_DOMAIN"),":").concat(m.wss))}},void 0,f=>!!(f.code!==O.OPERATION_ABORTED&&f.code!==O.UNEXPECTED_RESPONSE||f.data&&f.data.retry),l)}(o,e,t,r));try{let o=await qm(i);return i.forEach(a=>a.cancel()),o}catch(o){throw o[0]}}async function L6e(e,t,r){let n=null,i=[],o=async a=>{let s=L(a?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(c=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(c+"/api/v2/transpond/webrtc?v=2"):"https://".concat(c,"/api/v2/transpond/webrtc?v=2"));return a&&(await Ln(1e3),n!==null)?n:await j0({fragementLength:L("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:c=>(w.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(a?"backup":""," choose_server:"),c),function(l,u,d,f){let[p]=O6e(u,[Br.CHOOSE_SERVER]),m=$r.networkState;return nc(async()=>{m&&$r.networkState===Co.OFFLINE&&$r.onlineWaiter&&await he.race([$r.onlineWaiter,Ln(f&&f.maxRetryTimeout||Kr.maxRetryTimeout)]),m=$r.networkState;let g=await ic(l,{data:p,cancelToken:d,headers:{"Content-Type":"multipart/form-data;"}},!0);return N6e(g,l)},()=>!1,g=>g.code!==O.OPERATION_ABORTED&&(g.code===O.UPDATE_TICKET_FAILED?g.data.retry:(w.warning("[".concat(u.clientId,"] update ticket network error, retry"),g),!0)),f)}(c,e,t,r)),allFailedhandler:c=>{throw c[0]},promisesCollector:i})};try{return n=await qm([o(!1),o(!0)]),i.length&&i.forEach(a=>a.cancel&&typeof a.cancel=="function"&&a.cancel()),n}catch(a){throw a[0]}}function w$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function S$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w$(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var M6e=class extends _r{get isSuccess(){return!!this.configs}constructor(){super(),I(this,"configs",void 0),I(this,"joinInfo",void 0),I(this,"cancelToken",void 0),I(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),I(this,"interval",void 0),I(this,"mutex",new ii("config-distribute")),I(this,"mutableParamsRead",!1)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),L("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},L("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,Se.reportApiInvoke(null,{options:void 0,name:Qr.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Cr.TRACER}).onSuccess(JSON.stringify(Su))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void w.debug("[config-distribute] get config distribute interrupted have no joininfo");let e,t=await this.mutex.lock();try{e=await P6e(this.joinInfo,this.cancelToken,this.retryConfig),w.debug("[config-distribute] get config distribute",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(r){let n=new q(O.NETWORK_RESPONSE_ERROR,r);w.warning("[config-distribute] ".concat(n.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&t.uplink.max_bitrate!==void 0&&t.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(dk.UPDATE_BITRATE_LIMIT,e):this.emit(dk.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&S$({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;let r=Lv(t=Object.keys(e).filter(i=>/^webrtc_ng_global_parameter/.test(i))).call(t);for(let i=0;i<r.length;i++)for(let o=r.length-1;o>i;o--){let a=r[o];if(typeof e[a].__priority=="number"){let s=e[a].__priority,c=r[o-1];if(typeof e[c].__priority=="number"){if(!(s>e[c].__priority))continue;{let l=a;r[o]=r[o-1],r[o-1]=l}}else{let l=a;r[o]=r[o-1],r[o-1]=l}}}let n={};r.forEach(i=>{let o=e[i],a=o.__expires;Object.keys(o).forEach(s=>{s==="__priority"||s==="__expires"||Object.prototype.hasOwnProperty.call(n,s)||(n[s]=S$({value:o[s]},a&&{expires:a}))})});try{(function(a){try{let s=Date.now();Object.keys(a).forEach(c=>{switch(c){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":case"ENABLE_AG_ADAPTATION":case"FORCE_AG_HIGH_FRAMERATE":case"FORCE_SUPPORT_AG_ADAPTATION":case"ENCODER_CONFIG_LIMIT":case"CAMERA_CAPTURE_CONFIG":case"ENABLE_PRELOAD":if(Object.prototype.hasOwnProperty.call(Lr,c)){let{value:l,expires:u}=a[c];if(u&&u<=s)return;Su[c]=l,Lr[c]=l,w.debug("Update global parameters from config distribute",c,l)}}})}catch(s){w.error("Error update config immediately: ".concat(a),s.message)}})(n);let i=JSON.stringify(n),o=window.btoa(i);window.localStorage.setItem("websdk_ng_global_parameter",o),w.debug("Caching global parameters ".concat(i))}catch(i){w.error("Error caching global parameters:",i.message)}}},j6e=class extends _r{constructor(){super(...arguments),I(this,"resultStorage",new Map)}setLocalAudioStats(e,t,r){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(r,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(r,t))}setLocalVideoStats(e,t,r){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(r,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(r,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(r))}setRemoteAudioStats(e,t){let r=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",r,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){let r=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",r,this.checkVideoDecode(t))}record(e,t,r){if(L("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});let n=this.resultStorage.get(e);if(n&&(n.result.push(r),n.result.length>=5)){var i;let o=me(i=n.result).call(i,!0);n.isPrevNormal&&!o&&this.emit("exception",T$[e],e,t),!n.isPrevNormal&&o&&this.emit("exception",T$[e]+2e3,e+"_RECOVER",t),n.isPrevNormal=o,n.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&e.receiveLevel===0)}checkAudioInputLevel(e,t){return t instanceof pn&&!t.isActive||!!t.muted||e.sendVolumeLevel!==0}checkFramerateInput(e,t){let r=null;t._encoderConfig&&t._encoderConfig.frameRate&&(r=Io(t._encoderConfig.frameRate));let n=e.captureFrameRate;return!r||!n||!(r>10&&n<5||r<10&&r>=5&&n<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||e.sendBitrate!==0}checkSendAudioBitrate(e,t){return t instanceof pn&&!t.isActive||!!t.muted||e.sendBitrate!==0}checkVideoDecode(e){return e.receiveBitrate===0||e.decodeFrameRate!==0}},T$={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},ti=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){let r=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(r.length>0){let n=r[r.length-1];return Math.round(performance.now()-n.startTime)}return 0}measureFromPublishStart(e,t){let r=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(r.length>0){let n=r[r.length-1];return Math.round(performance.now()-n.startTime)}return 0}};function HL(e,t){this.v=e,this.k=t}function It(e){return new HL(e,0)}var U6e=HQ,F6e=Wc;tr({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var e=F6e.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var V6e=Wc,B6e=Hm;tr({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=V6e.f(this),r=B6e(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}});var Tk=jr(U6e),Bte=zm.f("asyncIterator"),$6e=jr(Bte);function Qg(e){var t,r;function n(o,a){try{var s=e[o](a),c=s.value,l=c instanceof HL;Tk.resolve(l?c.v:c).then(function(u){if(l){var d=o==="return"?"return":"next";if(!c.k||u.done)return n(d,u);u=e[d](u).value}i(s.done?"return":"normal",u)},function(u){n("throw",u)})}catch(u){i("throw",u)}}function i(o,a){switch(o){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(o,a){return new Tk(function(s,c){var l={key:o,arg:a,resolve:s,reject:c,next:null};r?r=r.next=l:(t=r=l,n(o,a))})},typeof e.return!="function"&&(this.return=void 0)}function Ws(e){return function(){return new Qg(e.apply(this,arguments))}}Qg.prototype[typeof ap=="function"&&$6e||"@@asyncIterator"]=function(){return this},Qg.prototype.next=function(e){return this._invoke("next",e)},Qg.prototype.throw=function(e){return this._invoke("throw",e)},Qg.prototype.return=function(e){return this._invoke("return",e)};var C$=jr(rc.Object.getOwnPropertySymbols),H6e=tr,z6e=$2.indexOf,G6e=zT,Ck=w0([].indexOf),R$=!!Ck&&1/Ck([1],1,-0)<0;H6e({target:"Array",proto:!0,forced:R$||!G6e("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return R$?Ck(this,e,t)||0:z6e(this,e,t)}});var W6e=Cs("Array").indexOf,K6e=Hi,q6e=W6e,Jx=Array.prototype,Y6e=function(e){var t=e.indexOf;return e===Jx||K6e(Jx,e)&&t===Jx.indexOf?q6e:t},I$=jr(Y6e);function X6e(e,t){if(e==null)return{};var r,n,i=function(a,s){if(a==null)return{};var c,l,u={},d=Hee(a);for(l=0;l<d.length;l++)c=d[l],I$(s).call(s,c)>=0||(u[c]=a[c]);return u}(e,t);if(C$){var o=C$(e);for(n=0;n<o.length;n++)r=o[n],I$(t).call(t,r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function us(e){if(Array.isArray(e))return e.map(r=>r);if(!x$(e))return e;let t={};for(let r in e){let n=e[r];x$(n)||Array.isArray(n)?t[r]=us(n):t[r]=n}return t}function x$(e){return!(typeof e!="object"||Array.isArray(e)||!e)}var Qx=class{constructor(e){I(this,"input",[]),I(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}},Fc={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},U0={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:Fc,remoteCandidate:Fc}},$te={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0},Hte={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},zte={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},Gte={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function A$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function N$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A$(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var zL=class{constructor(e,t){I(this,"onFirstVideoReceived",void 0),I(this,"onFirstVideoDecoded",void 0),I(this,"onFirstAudioReceived",void 0),I(this,"onFirstVideoDecodedTimeout",void 0),I(this,"onFirstAudioDecoded",void 0),I(this,"onSelectedLocalCandidateChanged",void 0),I(this,"onSelectedRemoteCandidateChanged",void 0),I(this,"videoIsReady",!1),I(this,"videoIsReady2",{}),I(this,"pc",void 0),I(this,"options",void 0),I(this,"intervalTimer",void 0),I(this,"stats",us(U0)),I(this,"isFirstVideoReceived",{}),I(this,"isFirstVideoDecoded",{}),I(this,"isFirstAudioReceived",{}),I(this,"isFirstAudioDecoded",{}),I(this,"isFirstVideoDecodedTimeout",{}),I(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new he(e=>{e({local:N$({},Fc),remote:N$({},Fc)})})}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);let t=this.lossRateWindowStats.length,r=["videoSend","audioSend","videoRecv","audioRecv"],n=0,i=0,o=0,a=0;for(let s of r)e[s].forEach((c,l)=>{if(!this.lossRateWindowStats[t-1][s][l]||!this.lossRateWindowStats[0][s][l])return;let u=this.lossRateWindowStats[t-1][s][l].packets-this.lossRateWindowStats[0][s][l].packets,d=this.lossRateWindowStats[t-1][s][l].packetsLost-this.lossRateWindowStats[0][s][l].packetsLost;s==="videoSend"||s==="audioSend"?(n+=u,o+=d):(i+=u,a+=d),Number.isNaN(u)||Number.isNaN(u)?c.packetLostRate=0:c.packetLostRate=u<=0||d<=0?0:d/(u+d)});e.sendPacketLossRate=n<=0||o<=0?0:o/(n+o),e.recvPacketLossRate=i<=0||a<=0?0:a/(i+a)}};function O$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function J6e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O$(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Q6e=class extends zL{constructor(){super(...arguments),I(this,"_stats",U0),I(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){let e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=us(U0);let r=t.filter(i=>i.type==="ssrc");this.processSSRCStats(r);let n=t.find(i=>i.type==="VideoBwe");n&&this.processBandwidthStats(n),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach(t=>{var r;let n=me(r=t.id).call(r,"send");switch("".concat(t.mediaType,"_").concat(n?"send":"recv")){case"video_send":{let i=us(Hte);i.codec=t.googCodecName,i.adaptionChangeReason="none",t.googCpuLimitedResolution&&(i.adaptionChangeReason="cpu"),t.googBandwidthLimitedResolution&&(i.adaptionChangeReason="bandwidth"),i.avgEncodeMs=Number(t.googAvgEncodeMs),i.inputFrame={width:Number(t.googFrameWidthInput)||Number(t.googFrameWidthSent),height:Number(t.googFrameHeightInput)||Number(t.googFrameHeightSent),frameRate:Number(t.googFrameRateInput)},i.sentFrame={width:Number(t.googFrameWidthSent),height:Number(t.googFrameHeightSent),frameRate:Number(t.googFrameRateInput)},i.firsCount=Number(t.googFirReceived),i.nacksCount=Number(t.googNacksReceived),i.plisCount=Number(t.googPlisReceived),i.frameCount=Number(t.framesEncoded),i.bytes=Number(t.bytesSent),i.packets=Number(t.packetsSent),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.rttMs=Number(t.googRtt||0),this._stats.videoSend.push(i),this._stats.rtt=i.rttMs;break}case"video_recv":{let i=us($te),o=this.lastDecodeVideoReceiverStats.get(Number(t.ssrc));if(i.codec=t.googCodecName,i.targetDelayMs=Number(t.googTargetDelayMs),i.renderDelayMs=Number(t.googRenderDelayMs),i.currentDelayMs=Number(t.googCurrentDelayMs),i.minPlayoutDelayMs=Number(t.googMinPlayoutDelayMs),i.decodeMs=Number(t.googDecodeMs),i.maxDecodeMs=Number(t.googMaxDecodeMs),i.receivedFrame={width:Number(t.googFrameWidthReceived),height:Number(t.googFrameHeightReceived),frameRate:Number(t.googFrameRateReceived)},i.decodedFrame={width:Number(t.googFrameWidthReceived),height:Number(t.googFrameHeightReceived),frameRate:Number(t.googFrameRateDecoded)},i.decodeFrameRate=Number(t.googFrameRateDecoded),i.outputFrame={width:Number(t.googFrameWidthReceived),height:Number(t.googFrameHeightReceived),frameRate:Number(t.googFrameRateOutput)},i.jitterBufferMs=Number(t.googJitterBufferMs),i.firsCount=Number(t.googFirsSent),i.nacksCount=Number(t.googNacksSent),i.plisCount=Number(t.googPlisSent),i.framesDecodeCount=Number(t.framesDecoded),i.bytes=Number(t.bytesReceived),i.packets=Number(t.packetsReceived),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.packets>0&&!this.isFirstVideoReceived[i.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(i.ssrc),this.isFirstVideoReceived[i.ssrc]=!0),i.framesDecodeCount>0&&!this.isFirstVideoDecoded[i.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(i.ssrc,i.decodedFrame.width,i.decodedFrame.height),this.isFirstVideoDecoded[i.ssrc]=!0),o){let a=o.stats,s=Date.now()-o.lts;i.framesDecodeFreezeTime=a.framesDecodeFreezeTime,i.framesDecodeInterval=a.framesDecodeInterval,i.framesDecodeCount>a.framesDecodeCount&&this.isFirstVideoDecoded[i.ssrc]?(o.lts=Date.now(),i.framesDecodeInterval=s,i.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(t.ssrc,10))?i.framesDecodeFreezeTime+=i.framesDecodeInterval:this.setVideoIsReady2(parseInt(t.ssrc,10),!0))):i.framesDecodeCount<o.stats.framesDecodeCount&&(i.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(i.ssrc,{stats:J6e({},i),lts:Date.now()}),this._stats.videoRecv.push(i);break}case"audio_recv":{let i=us(Gte);i.codec=t.googCodecName,i.outputLevel=Math.abs(Number(t.audioOutputLevel))/32767,i.decodingCNG=Number(t.googDecodingCNG),i.decodingCTN=Number(t.googDecodingCTN),i.decodingCTSG=Number(t.googDecodingCTSG),i.decodingNormal=Number(t.googDecodingNormal),i.decodingPLC=Number(t.googDecodingPLC),i.decodingPLCCNG=Number(t.googDecodingPLCCNG),i.expandRate=Number(t.googExpandRate),i.accelerateRate=Number(t.googAccelerateRate),i.preemptiveExpandRate=Number(t.googPreemptiveExpandRate),i.secondaryDecodedRate=Number(t.googSecondaryDecodedRate),i.speechExpandRate=Number(t.googSpeechExpandRate),i.preferredJitterBufferMs=Number(t.googPreferredJitterBufferMs),i.jitterBufferMs=Number(t.googJitterBufferMs),i.jitterMs=Number(t.googJitterReceived),i.bytes=Number(t.bytesReceived),i.packets=Number(t.packetsReceived),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.receivedFrames=Number(t.googDecodingCTN)||Number(t.packetsReceived),i.droppedFrames=Number(t.googDecodingPLC)+Number(t.googDecodingPLCCNG)||Number(t.packetsLost),i.receivedFrames>0&&!this.isFirstAudioReceived[i.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(i.ssrc),this.isFirstAudioReceived[i.ssrc]=!0),i.decodingNormal>0&&!this.isFirstAudioDecoded[i.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(i.ssrc),this.isFirstAudioDecoded[i.ssrc]=!0),this._stats.audioRecv.push(i);break}case"audio_send":{let i=us(zte);i.codec=t.googCodecName,i.inputLevel=Math.abs(Number(t.audioInputLevel))/32767,i.aecReturnLoss=Number(t.googEchoCancellationReturnLoss||0),i.aecReturnLossEnhancement=Number(t.googEchoCancellationReturnLossEnhancement||0),i.residualEchoLikelihood=Number(t.googResidualEchoLikelihood||0),i.residualEchoLikelihoodRecentMax=Number(t.googResidualEchoLikelihoodRecentMax||0),i.bytes=Number(t.bytesSent),i.packets=Number(t.packetsSent),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.rttMs=Number(t.googRtt||0),this._stats.rtt=i.rttMs,this._stats.audioSend.push(i);break}}})}_getStats(){return new he((e,t)=>{this.pc.getStats(e,t)})}statsResponsesToObjects(e){let t=[];return e.result().forEach(r=>{let n={id:r.id,timestamp:r.timestamp.valueOf().toString(),type:r.type};r.names().forEach(i=>{n[i]=r.stat(i)}),t.push(n)}),t}};function k$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k$(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var P$=class extends zL{constructor(){super(...arguments),I(this,"_stats",U0),I(this,"report",void 0),I(this,"lastDecodeVideoReceiverStats",new Map),I(this,"lastVideoFramesRecv",new Map),I(this,"lastVideoFramesSent",new Map),I(this,"lastVideoFramesDecode",new Map),I(this,"lastVideoFramesOutput",new Map),I(this,"lastVideoJBDelay",new Map),I(this,"lastAudioJBDelay",new Map),I(this,"mediaBytesSent",new Map),I(this,"mediaBytesRetransmit",new Map),I(this,"mediaBytesTargetEncode",new Map),I(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=us(U0),this.report.forEach(e=>{switch(e.type){case Do.OUTBOUND:case Do.INBOUND:{let t=e.mediaType||e.kind,r=!t&&"frameWidth"in e,n=!t&&!("frameWidth"in e);e.type===Do.OUTBOUND?t==="audio"||n?this.processAudioOutboundStats(e):(t==="video"||r)&&this.processVideoOutboundStats(e):e.type===Do.INBOUND&&(t==="audio"||n?this.processAudioInboundStats(e):(t==="video"||r)&&this.processVideoInboundStats(e));break}case Do.TRANSPORT:{let t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case Do.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){let e=await this.pc.getStats(),t={local:wd({},Fc),remote:wd({},Fc)};return e.forEach(r=>{let n;if(r.type===Do.TRANSPORT&&(n=e.get(r.selectedCandidatePairId)),r.type===Do.CANDIDATE_PAIR&&r.selected&&(n=r),n){let i=(o,a)=>{o.type=a.type,o.id=a.id,a.address&&(o.address=a.address),a.candidateType&&(o.candidateType=a.candidateType),a.port&&(o.port=a.port),a.priority&&(o.priority=a.priority),a.protocol&&(o.protocol=a.protocol),a.relayProtocol&&(o.relayProtocol=a.relayProtocol)};if(n.localCandidateId){let o=e.get(n.localCandidateId);o&&i(t.local,o)}if(n.remoteCandidateId){let o=e.get(n.remoteCandidateId);o&&i(t.remote,o)}}}),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach(t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}),this._stats.audioSend.forEach(t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){let t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){let t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===Do.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===Do.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===Do.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(wd({},t),wd({},this.stats.selectedCandidatePair.localCandidate)),e.type===Do.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(wd({},t),wd({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find(r=>r.ssrc===e.ssrc);t||(t=us(Gte),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.packetsDiscarded=e.packetsDiscarded,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),typeof e.concealedSamples=="number"&&(t.concealedSamples=e.concealedSamples)}processVideoInboundStats(e){let t=this._stats.videoRecv.find(a=>a.ssrc===e.ssrc);t||(t=us($te),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.framesDroppedCount=e.framesDropped,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay,t.totalFreezesDuration=e.totalFreezesDuration;let r=this.lastDecodeVideoReceiverStats.get(t.ssrc),n=this.lastVideoFramesDecode.get(t.ssrc),i=this.lastVideoFramesOutput.get(t.ssrc),o=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){let a=t.decodedFrame?t.decodedFrame.width:0,s=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,a,s),this.isFirstVideoDecoded[t.ssrc]=!0}if(r){let a=r.stats,s=o-r.lts;t.framesDecodeFreezeTime=a.framesDecodeFreezeTime,t.framesDecodeInterval=a.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&s>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>a.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(r.lts=Date.now(),t.framesDecodeInterval=s,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<a.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(r.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-r.qpSum)/(e.framesDecoded-r.stats.framesDecodeCount))}n&&o-n.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-n.count)/((o-n.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:t.decodeFrameRate})):n?t.decodeFrameRate=n.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:0}),t.framesDroppedCount&&e.framesReceived&&(i&&o-i.lts>=800?(t.outputFrameRate=Math.round((e.framesReceived-t.framesDroppedCount-i.count)/((o-i.lts)/1e3)),this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:Math.max(t.outputFrameRate,0)})):i?t.outputFrameRate=i.rate:this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:0})),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:wd({},t),lts:r?r.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find(n=>n.ssrc===e.ssrc);t||(t=us(Hte),this._stats.videoSend.push(t));let r=this.mediaBytesSent.get(e.ssrc);if(r)r.add(e.bytesSent);else{let n=new Qx(10);n.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,n)}if(e.retransmittedBytesSent!==void 0){let n=this.mediaBytesRetransmit.get(e.ssrc);if(n)n.add(e.retransmittedBytesSent);else{let i=new Qx(10);i.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,i)}}if(e.totalEncodedBytesTarget){let n=this.mediaBytesTargetEncode.get(e.ssrc);if(n)n.add(e.totalEncodedBytesTarget);else{let i=new Qx(10);i.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,i)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){let n=this.lastEncoderMs.get(e.ssrc);if(!n||n.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{let i=e.framesEncoded-n.lastFrameCount,o=e.totalEncodeTime-n.lastEncoderTime;t.avgEncodeMs=1e3*o/i}}if(e.framesEncoded&&e.qpSum){let n=this.lastEncoderMs.get(e.ssrc);!n||n.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-n.lastQpSum)/(e.framesEncoded-n.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{let n=this.findRemoteStatsId(e.ssrc,Do.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find(r=>r.ssrc===e.ssrc);if(t||(t=us(zte),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{let r=this.findRemoteStatsId(e.ssrc,Do.REMOTE_INBOUND);r&&this.processRemoteInboundStats(r,t)}}findRemoteStatsId(e,t){var r;let n=Array.from(Sl(r=this.report).call(r)).find(i=>i.type===t&&i.ssrc===e);return n?n.id:null}processVideoMediaSource(e,t){let r=this.report.get(e);r&&r.width&&r.height&&r.framesPerSecond&&(t.inputFrame={width:r.width,height:r.height,frameRate:r.framesPerSecond})}processAudioMediaSource(e,t){let r=this.report.get(e);r&&(t.inputLevel=r.audioLevel)}processVideoTrackSenderStats(e,t,r){var n,i,o,a;let s=t?this.report.get(t):void 0,c=(n=s==null?void 0:s.framesSent)!==null&&n!==void 0?n:e.framesSent;if(typeof c!="number")return;let l=(i=s==null?void 0:s.frameWidth)!==null&&i!==void 0?i:e.frameWidth,u=(o=s==null?void 0:s.frameHeight)!==null&&o!==void 0?o:e.frameHeight,d=(a=s==null?void 0:s.framesPerSecond)!==null&&a!==void 0?a:e.framesPerSecond;if(typeof l=="number"&&typeof u=="number"||(l=0,u=0),d==null){let f=Date.now(),p=this.lastVideoFramesSent.get(r.ssrc);p&&f-p.lts>=800?(d=Math.round((c-p.count)/((f-p.lts)/1e3)),this.lastVideoFramesSent.set(r.ssrc,{count:c,lts:f,rate:d})):p?d=p.rate:this.lastVideoFramesSent.set(r.ssrc,{count:c,lts:f,rate:0})}r.sentFrame={width:l,height:u,frameRate:Math.max(0,d)}}processVideoTrackReceiverStats(e,t,r){var n,i,o,a,s;let c=t?this.report.get(t):void 0,l=(n=c==null?void 0:c.framesReceived)!==null&&n!==void 0?n:e.framesReceived,u=(i=c==null?void 0:c.frameWidth)!==null&&i!==void 0?i:e.frameWidth,d=(o=c==null?void 0:c.frameHeight)!==null&&o!==void 0?o:e.frameHeight,f=(a=c==null?void 0:c.jitterBufferDelay)!==null&&a!==void 0?a:e.jitterBufferDelay,p=(s=c==null?void 0:c.jitterBufferEmittedCount)!==null&&s!==void 0?s:e.jitterBufferEmittedCount;if(typeof l=="number"){let m=this.lastVideoFramesRecv.get(r.ssrc),g=Date.now();r.framesReceivedCount=l;let y=0;m&&g-m.lts>=800?(y=Math.round((l-m.count)/((g-m.lts)/1e3)),this.lastVideoFramesRecv.set(r.ssrc,{count:l,lts:g,rate:y})):m?y=m.rate:this.lastVideoFramesRecv.set(r.ssrc,{count:l,lts:g,rate:0}),r.receivedFrame={width:u||0,height:d||0,frameRate:y||0},r.decodedFrame={width:u||0,height:d||0,frameRate:r.decodeFrameRate||0},r.outputFrame={width:u||0,height:d||0,frameRate:r.outputFrameRate||r.decodeFrameRate||0}}if(f&&p){let m=this.lastVideoJBDelay.get(r.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0},g=m.jitterBufferMs,y=p-m.jitterBufferEmittedCount;y>0&&(g=1e3*(f-m.jitterBufferDelay)/y),r.jitterBufferMs=g,r.currentDelayMs=Math.round(g),this.lastVideoJBDelay.set(r.ssrc,{jitterBufferDelay:f,jitterBufferEmittedCount:p,jitterBufferMs:r.currentDelayMs})}}processAudioTrackSenderStats(e,t,r){var n,i,o,a;let s=t?this.report.get(t):void 0,c=(n=(i=s==null?void 0:s.echoReturnLoss)!==null&&i!==void 0?i:e.echoReturnLoss)!==null&&n!==void 0?n:0,l=(o=(a=s==null?void 0:s.echoReturnLossEnhancement)!==null&&a!==void 0?a:e.echoReturnLossEnhancement)!==null&&o!==void 0?o:0;r.aecReturnLoss=c,r.aecReturnLossEnhancement=l}processAudioTrackReceiverStats(e,t,r){var n,i,o,a,s,c,l;let u=t?this.report.get(t):void 0,d=(n=u==null?void 0:u.removedSamplesForAcceleration)!==null&&n!==void 0?n:e.removedSamplesForAcceleration,f=(i=u==null?void 0:u.totalSamplesReceived)!==null&&i!==void 0?i:e.totalSamplesReceived,p=(o=u==null?void 0:u.jitterBufferDelay)!==null&&o!==void 0?o:e.jitterBufferDelay,m=(a=u==null?void 0:u.jitterBufferEmittedCount)!==null&&a!==void 0?a:e.jitterBufferEmittedCount,g=(s=u==null?void 0:u.audioLevel)!==null&&s!==void 0?s:e==null?void 0:e.audioLevel,y=(c=u==null?void 0:u.totalSamplesDuration)!==null&&c!==void 0?c:e==null?void 0:e.totalSamplesDuration,v=(l=u==null?void 0:u.concealedSamples)!==null&&l!==void 0?l:e.concealedSamples;if(d&&f&&(r.accelerateRate=d/f),p&&m){let b=this.lastAudioJBDelay.get(r.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0},S=b.jitterBufferMs,A=m-b.jitterBufferEmittedCount;A>0&&(S=1e3*(p-b.jitterBufferDelay)/A),r.jitterBufferMs=Math.round(S),this.lastAudioJBDelay.set(r.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:m,jitterBufferMs:r.jitterBufferMs})}r.outputLevel=g;let E=1920;y&&f&&(E=f/y/50,r.receivedFrames=Math.round(f/E)),v&&(r.droppedFrames=Math.round(v/E))}processRemoteInboundStats(e,t){let r=this.report.get(e);r&&(t.packetsLost=r.packetsLost,r.roundTripTime&&(t.rttMs=1e3*r.roundTripTime),r.jitter&&(t.jitterMs=1e3*r.jitter),r.timestamp&&(t.timestamp=r.timestamp))}getCodecFromCodecStats(e){let t=this.report.get(e);if(!t)return"";let r=t.mimeType.match(/\/(.*)$/);return r&&r[1]?r[1]:""}updateSendBitrate(){let e=0,t=null,r=null;this.mediaBytesSent.forEach(i=>{e+=i.diffMean()}),this.mediaBytesRetransmit.forEach(i=>{t=t===null?i.diffMean():t+i.diffMean()}),this.mediaBytesTargetEncode.forEach(i=>{r=r===null?i.diffMean():r+i.diffMean()});let n=t!==null?e-t:e;this._stats.bitrate={actualEncoded:8*n/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},t!==null&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),r!==null&&(this._stats.bitrate.targetEncoded=8*r/(this.options.updateInterval/1e3))}},Z6e=class extends zL{updateStats(){return he.resolve()}};function GL(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4,o=function(){let a=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return a&&a[0]?Number(a[0].split("/")[1]):null}();return o?o<76?new Q6e(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i}):new P$(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i}):function(a){if(!window.RTCStatsReport)return!1;let s=a.getStats();return!!(s instanceof he||function(c){return!!c&&(typeof c=="object"||typeof c=="function")&&typeof c.then=="function"}(s))}(e)?new P$(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i}):new Z6e(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i})}var D$=class{get localCapabilities(){return Vr(this._localCapabilities)}get rtpCapabilities(){return Vr(this._rtpCapabilities)}get candidates(){return Vr(this._candidates)}get iceParameters(){return Vr(this._iceParameters)}get dtlsParameters(){return Vr(this._dtlsParameters)}constructor(e){I(this,"sessionDesc",void 0),I(this,"_localCapabilities",void 0),I(this,"_rtpCapabilities",void 0),I(this,"_candidates",void 0),I(this,"_iceParameters",void 0),I(this,"_dtlsParameters",void 0),I(this,"setup",void 0),I(this,"currentMidIndex",void 0),I(this,"cname","o/i14u9pJrxRKAsu"),I(this,"firefoxSsrcMidMap",new Map),e=Vr(e);let{remoteIceParameters:t,remoteDtlsParameters:r,candidates:n,remoteRTPCapabilities:i,localCapabilities:o,direction:a,setup:s,videoCodec:c,audioCodec:l}=e,u;this.setup=s,u=a===Mi.RECEIVE_ONLY?Pn.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`):Pn.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`),this._rtpCapabilities=i,this._candidates=n,this._iceParameters=t,this._dtlsParameters=r,this._localCapabilities=o;let d=a===Mi.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,f=a===Mi.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,p=a===Mi.RECEIVE_ONLY?i.send.videoCodecs:Ny(Ce.VIDEO,d,f,c),m=a===Mi.RECEIVE_ONLY?i.send.audioCodecs:Ny(Ce.AUDIO,d,f,l);for(let g of u.mediaDescriptions)g.attributes.iceUfrag=t.iceUfrag,g.attributes.icePwd=t.icePwd,g.attributes.fingerprints=r.fingerprints,g.attributes.candidates=n,g.attributes.setup=this.setup,g.media.mediaType==="application"&&(g.attributes.sctpPort="5000"),g.media.mediaType==="video"&&(g.media.fmts=p.map(y=>y.payloadType.toString(10)),g.attributes.payloads=p,g.attributes.extmaps=d.videoExtensions),g.media.mediaType==="audio"&&(g.media.fmts=m.map(y=>y.payloadType.toString(10)),g.attributes.payloads=m,g.attributes.extmaps=d.audioExtensions,dm(g));this.sessionDesc=u,this.currentMidIndex=u.mediaDescriptions.length-1}toString(){return Pn.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every(t=>this.hasMid(t)):this.sessionDesc.mediaDescriptions.some(t=>t.attributes.mid===e)}send(e,t,r,n,i){r=r.replace(/ /g,"-");let{ssrcs:o,ssrcGroups:a}=Ud(t,this.cname,L("SYNC_GROUP")?r:void 0),s=this.findPreloadMediaDesc(o);if(s){if(Rr()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,s.attributes.mid),i&&(i.twcc||i.remb)){let c=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(s,i),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{let c=this.findAvailableMediaIndex(e,o,n),l;return c===-1?(l=this.createOrRecycleSendMedia(e,o,a,"sendonly",n,i),this.updateBundleMids()):(l=Vr(this.sessionDesc.mediaDescriptions[c]),l.attributes.direction="sendonly",l.attributes.ssrcs=o,l.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(l,i)),Rr()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,l.attributes.mid),{needExchangeSDP:!0,mid:l.attributes.mid}}}stopSending(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>r.attributes.mid&&e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach(r=>{r.attributes.ssrcs=[]}),this.updateBundleMids()}receive(e,t,r){let n=[];return e.forEach(i=>{let o=i._mediaStreamTrack.kind,a=this.findAvailableRecvMediaIndex(o),s,c=!1;a===-1?(c=!0,s=this.createOrRecycleRecvMedia(i,[],"recvonly",t,r),this.updateBundleMids()):(s=Vr(this.sessionDesc.mediaDescriptions[a]),s.attributes.direction="recvonly"),n.push({mid:s.attributes.mid,needCreateTransceiver:c})}),n}stopReceiving(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach(r=>{r.media.port="0",r.attributes.direction="inactive"}),this.updateBundleMids()}addRemoteCandidate(e){let{foundation:t,protocol:r,address:n,port:i,type:o,relatedAddress:a,relatedPort:s,priority:c}=new RTCIceCandidate(e),l={foundation:t??"",componentId:"1",transport:r??"",priority:c?c+"":"",connectionAddress:n??"",port:i?i+"":"",type:o?o+"":"",relAddr:a??"",relPort:s?s+"":"",extension:{}};this.candidates.some(u=>u.priority===l.priority&&u.connectionAddress===l.connectionAddress&&u.port===l.port)||(this._candidates.push(l),this.sessionDesc.mediaDescriptions.forEach(u=>{u.attributes.candidates=this.candidates}))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,r,n,i){let o=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,s=Ny(o,a,this.localCapabilities.send,o===Ce.AUDIO?i:n),c=o===Ce.VIDEO?a.videoExtensions:a.audioExtensions,l="".concat(++this.currentMidIndex),u={media:{mediaType:o,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(f=>f.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};u=this.mungRecvMediaDsec(u,e);let d=this.findFirstClosedMedia(o);if(d){let f=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[f]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}muteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>me(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="inactive"})}unmuteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>me(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="recvonly"})}findAvailableMediaIndex(e,t,r){return this.sessionDesc.mediaDescriptions.findIndex(n=>{let i=n.media.mediaType===e&&n.media.port!=="0"&&(n.attributes.direction==="sendonly"||n.attributes.direction==="sendrecv")&&n.attributes.ssrcs.length===0;if(Rr()){if(i){let o=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(o||n.attributes.mid!=="0"&&n.attributes.mid!=="1")||!(!o||o!==n.attributes.mid)}return!1}return i&&n.attributes.mid===r})}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex(t=>{let r=t.media.mediaType===e&&t.media.port!=="0"&&(t.attributes.direction==="recvonly"||t.attributes.direction==="sendrecv");return t.attributes.mid!=="0"&&t.attributes.mid!=="1"&&r})}predictReceivingMids(e){let t=[];for(let r=0;r<e;r++)t.push((this.currentMidIndex+r+1).toString(10));return t}restartICE(e){e=Vr(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd})}createOrRecycleSendMedia(e,t,r,n,i,o){let a=this.rtpCapabilities.send,s=e===Ce.VIDEO?a.videoCodecs:a.audioCodecs,c=e===Ce.VIDEO?a.videoExtensions:a.audioExtensions;Rr()&&(i="".concat(++this.currentMidIndex));let l={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(d=>d.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:r,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:i}};l=this.mungSendMediaDesc(l,o);let u=this.findFirstClosedMedia(e);if(u){let d=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[d]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}mungRecvMediaDsec(e,t,r){let n=Vr(e);return jL(n),um(n,t),UL(n,t),kte(n),sS(n,r,this.localCapabilities.send),n}mungSendMediaDesc(e,t){let r=Vr(e);return sS(r,t,this.localCapabilities.recv),dm(r),r}updateRecvMedia(e,t){let r=this.sessionDesc.mediaDescriptions.findIndex(n=>n.attributes.mid===e);if(r!==-1){let n=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],t);this.sessionDesc.mediaDescriptions[r]=n}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>e.media.port!=="0").map(e=>e.attributes.mid)}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(t=>{var r;return((r=t.attributes)===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId)===e[0].ssrcId})}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(t=>Rr()?t.media.port==="0"&&t.media.mediaType===e:t.media.port==="0")}},e8e=["sdp"],nr;function L$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ql(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L$(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var M$=(nr=class Uf extends Gee{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var t,r;return(t=(r=this.peerConnection.getReceivers()[0])===null||r===void 0||(r=r.transport)===null||r===void 0?void 0:r.state)!==null&&t!==void 0?t:null}get localCodecs(){return[]}set isInRestartIce(t){this._isInRestartIce=t}get isInRestartIce(){return this._isInRestartIce}constructor(t,r,n){super(t,r),I(this,"direction",void 0),I(this,"name",void 0),I(this,"store",void 0),I(this,"spec",void 0),I(this,"peerConnection",void 0),I(this,"initialOffer",void 0),I(this,"transport",void 0),I(this,"statsFilter",void 0),I(this,"localCandidateCount",0),I(this,"_isInRestartIce",!1),I(this,"mutex",new ii("P2PConnection-mutex")),I(this,"onLocalCandidate",void 0),I(this,"remoteSDP",void 0),I(this,"pendingCandidates",[]),I(this,"localCapabilities",void 0),I(this,"isReady",!1),I(this,"restartCnt",0),I(this,"curTurnServerIndex",0),this.store=r,this.spec=t,this.peerConnection=new RTCPeerConnection(Uf.resolvePCConfiguration(t,r.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=n??Mi.SEND_ONLY,this.name=this.direction===Mi.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=GL(this.peerConnection,L("STATS_UPDATE_INTERVAL"),void 0,Rr()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(t){try{let r=await Dte();if(this.localCapabilities=cS(r),t){let{sdp:n}=t,i=X6e(t,e8e),o=function(){let u={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},d=L0(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"sendonly"),f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},p={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},m={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(ps(d,u,"videoExtensions",f,p,m),ps(d,u,"videoCodecs",f,p,m),ps(d,u,"audioExtensions",f,p,m),ps(d,u,"audioCodecs",f,p,m),L("RAISE_H264_BASELINE_PRIORITY")){let g=m.videoCodecs.findIndex(y=>y.rtpMap&&y.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&y.fmtp&&y.fmtp.parameters["profile-level-id"]==="42001f");if(g!==-1){let y=m.videoCodecs.findIndex(v=>v.rtpMap&&v.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(y<g){w.debug("raising H264 baseline profile priority");let v=m.videoCodecs[g];m.videoCodecs.splice(g,1),m.videoCodecs.splice(y,0,v)}y!==-1&&L("FILTER_SEND_H264_BASELINE")&&(f.videoCodecs=f.videoCodecs.filter(v=>!(v.rtpMap&&v.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&v.fmtp&&v.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:f,recv:p,sendrecv:m}}({},{},n);this.remoteSDP=new D$({remoteIceParameters:i.iceParameters,remoteDtlsParameters:i.dtlsParameters,candidates:[],remoteRTPCapabilities:o,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;let a=await this.peerConnection.createAnswer();if(!a.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");let s=Ru(a.sdp);await this.peerConnection.setLocalDescription(a);let c=await f$({},{},a.sdp);this.localCapabilities=cS(c);let l=this.peerConnection.getTransceivers()[0];return l!=null&&l.receiver&&l.receiver.transport&&this.tryBindTransportEvents(l.receiver.transport),Ql(Ql({},s),{},{sdp:a.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});let n=await this.peerConnection.createOffer();if(!n.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let i=Ru(n.sdp);return this.initialOffer=n,Ql(Ql({},i),{},{sdp:n.sdp})}}catch(r){throw new J(O.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);let{sdp:r,iceParameters:n,dtlsParameters:i}=t,o=await f$({},{},r);this.remoteSDP=new D$({remoteIceParameters:n,remoteDtlsParameters:i,candidates:[],remoteRTPCapabilities:o,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});let a=this.peerConnection.getTransceivers()[0];a!=null&&a.sender&&a.sender.transport&&this.tryBindTransportEvents(a.sender.transport)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}}async addRemoteCandidate(t){try{t&&this.pendingCandidates.push(t),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach(r=>{this.peerConnection.addIceCandidate(r)}),this.pendingCandidates=[])}catch(r){throw new J(O.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(r.toString()))}}send(t,r,n){var i=this;return Ws(function*(){let o=yield It(i.mutex.lock("From P2PConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let a=[],s=i.remoteSDP.receive(t,r,n);t.forEach((y,v)=>{if(s[v].needCreateTransceiver){let E=i.peerConnection.addTransceiver(y._mediaStreamTrack,{direction:"sendonly"});a.push(E),y._updateRtpTransceiver(E)}else{let E=i.peerConnection.getTransceivers().find(b=>b.mid===s[v].mid);if(!E)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(s[v].mid));a.push(E),y._updateRtpTransceiver(E)}}),Rr()&&L("SIMULCAST")===!0&&(yield It(i.applySimulcastForFirefox(a,t)));let c=s.map(y=>y.mid),l=yield It(i.peerConnection.createOffer()),u=i.mungSendOfferSDP(l.sdp,t,c),d=Pn.parse(u),f=c.map(y=>{let v=d.mediaDescriptions.find(E=>E.attributes.mid===y);if(!v)throw new Error("Cannot extract ssrc from mediaDescription.");return Nte(v,L("USE_PUB_RTX"))}),p=a.map((y,v)=>{let E=c[v];return{localSSRC:f[v],id:E}});yield It(i.peerConnection.setLocalDescription({type:"offer",sdp:u}));try{yield p}catch(y){let v=i.remoteSDP.toString();throw yield It(i.peerConnection.setLocalDescription({type:"offer",sdp:u})),yield It(i.peerConnection.setRemoteDescription({type:"answer",sdp:v})),yield It(i.stopSending(c,!0)),y}yield It(i.applySimulcastEncodings(a,t)),yield It(i.applySendEncodings(a,t));let m=i.remoteSDP.toString(),g=i.logSDPExchange(u,"offer","local","send");return g==null||g(m),yield It(i.setRemoteDescription({type:"answer",sdp:m})),a.map((y,v)=>{let E=c[v];return{localSSRC:f[v],id:E}})}catch(a){throw a instanceof J?a:new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(a.toString()))}finally{o()}})()}async stopSending(t,r){let n=r?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let i=this.peerConnection.getTransceivers().filter(c=>t.indexOf(c.mid)!==-1);if(i.length!==t.length)throw new Error("Transceivers' length (".concat(i.length,") doesn't match mids' length (").concat(t.length,") when trying to call P2PConnection.stopSending."));i.map(c=>{var l;c.direction="inactive",(l=c.stop)===null||l===void 0||l.call(c)});let o=await this.peerConnection.createOffer(),a=this.logSDPExchange(o.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(o),this.remoteSDP.stopReceiving(t);let s=this.remoteSDP.toString();a==null||a(s),await this.setRemoteDescription({type:"answer",sdp:s})}catch(i){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}finally{n&&n()}}async receive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{mid:o,needExchangeSDP:a}=this.remoteSDP.send(t,r,n,i);if(a){let c=this.remoteSDP.toString(),l=this.logSDPExchange(c,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:c});let u=await this.peerConnection.createAnswer(),d=this.mungReceiveAnswerSDP(u.sdp,o,t);l==null||l(d||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:d}),w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP."))}else w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," no need to exchange SDP."));let s=this.peerConnection.getTransceivers().find(c=>c.mid===o);if(!s||s.mid===null)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,mid:s.mid,transceiver:s}}catch(o){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async mockReceive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{mid:o,needExchangeSDP:a}=this.remoteSDP.send(t,r,n,i);if(a){let s=this.remoteSDP.toString(),c=this.logSDPExchange(s,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:s});let l=await this.peerConnection.createAnswer(),u=this.mungReceiveAnswerSDP(l.sdp,o,t);c==null||c(u||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:u}),w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP."))}else w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," no need to exchange SDP."))}catch(o){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===kd.Auto&&(this.store.p2pTransport=kd.SdRtn,Ct().supportPCSetConfiguration&&this.peerConnection.setConfiguration(Uf.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,Ct().supportPCSetConfiguration&&this.peerConnection.setConfiguration(Uf.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;let r=await this.peerConnection.createOffer({iceRestart:!0});if(!r.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let{iceParameters:n}=Ru(r.sdp);return this.store.descriptionStart(),this.direction===Mi.SEND_ONLY&&await this.peerConnection.setLocalDescription(r),n}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===Mi.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});let r=await this.peerConnection.createAnswer();if(!r.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");let{iceParameters:n}=Ru(r.sdp);return await this.peerConnection.setLocalDescription(r),n}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}close(){var t;this.peerConnection.close(),this.peerConnection.onicecandidate=null,(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[r],[t]);this.remoteSDP.updateRecvMedia(t,r);let o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),a==null||a(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new J(O.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(t,r){let n=this.peerConnection.getTransceivers().filter(i=>i.mid===t);n.length===1&&(this.isVP8Simulcast(r)?Rr()||await this.applySimulcastEncodings(n,[r]):await this.applySendEncodings(n,[r]))}setStatsRemoteVideoIsReady(t,r){this.statsFilter.setVideoIsReady2(t,r)}async replaceTrack(t,r){let n=this.peerConnection.getTransceivers().find(i=>i.mid===r);n&&await n.sender.replaceTrack(t._mediaStreamTrack)}async getSelectedCandidatePair(){let t=this.peerConnection.getReceivers();if(t.length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair()){let r=t[0].transport.iceTransport,{local:n,remote:i}=r.getSelectedCandidatePair();return{local:Ql(Ql({},Fc),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:Ql(Ql({},Fc),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t,r;me(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)&&(this.isReady=!1),(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;this.peerConnection.connectionState==="connected"&&(this.restartCnt=0),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=t=>{if(t.candidate){var r;t.candidate.candidate&&((r=this.onLocalCandidate)===null||r===void 0||r.call(this,t.candidate.toJSON())),this.localCandidateCount+=1}else w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i={iceServers:[]};var o;return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(aC(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...Uf.turnServerConfigToIceServers(t.turnServer.servers,r,n)),L("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...Uf.turnServerConfigToIceServers(t.turnServer.serversFromGateway,r,n)),me(o=[kd.Relay,kd.SdRtn]).call(o,r)&&(i.iceTransportPolicy="relay"),L("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),L("ENABLE_ENCODED_TRANSFORM")&&Ct().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),w.debug("P2PConnection p2pTransport is ".concat(r)),i}static turnServerConfigToIceServers(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=[],o=t.filter(s=>s.tcpport);w.debug("P2PConnection turnServers is ".concat(o,", current index is ").concat(n));let a=o.length>n?o[n]:o[0];switch(r){case kd.SdRtn:let s=t.filter(l=>{var u;return me(u=l.username).call(u,"glb:")&&l.turnServerURL==l.turnServerURL}),c=s.length>n?s[n]:s[0];c&&(i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(dp(c.turnServerURL),":").concat(c.tcpport,"?transport=udp")}),i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(dp(c.turnServerURL),":").concat(c.tcpport,"?transport=tcp")}));break;case kd.Relay:a&&(i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=udp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(dp(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}));break;default:a&&(i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=udp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(dp(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"stun:".concat(a.turnServerURL,":").concat(a.tcpport)}))}return i}tryBindTransportEvents(t){if(t){this.transport=t,t.onstatechange=()=>{var n;t!=null&&t.state&&((n=this.onDTLSTransportStateChange)===null||n===void 0||n.call(this,t.state))},t.onerror=n=>{var i;(i=this.onDTLSTransportError)===null||i===void 0||i.call(this,"error"in n?n.error:n)};let r=t.iceTransport;r&&(r.onstatechange=()=>{let n=t==null?void 0:t.iceTransport.state;var i;n&&((i=this.onICETransportStateChange)===null||i===void 0||i.call(this,n))},r.getSelectedCandidatePair&&(r.onselectedcandidatepairchange=()=>{if(r.getSelectedCandidatePair()){let{local:n,remote:i}=r.getSelectedCandidatePair();w.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol}),", remote ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(t,r){var n;if(r||(r=this.peerConnection.getSenders().find(u=>u.track===t._mediaStreamTrack)),!r)return w.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(t))return w.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!Ct().supportSetRtpSenderParameters)return w.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");let i={},o={};switch(t._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(t._encoderConfig){var a;let{bitrateMax:u,frameRate:d,scaleResolutionDownBy:f}=t._encoderConfig;u&&(o.maxBitrate=1e3*u),me(a=t._hints).call(a,lr.LOW_STREAM)&&(d&&(o.maxFramerate=Io(d)),f&&f>=1&&(o.scaleResolutionDownBy=f))}if(L("DSCP_TYPE")&&Qu()){var s;let u=L("DSCP_TYPE");me(s=["very-low","low","medium","high"]).call(s,u)&&(o.networkPriority=u)}let c=r.getParameters(),l=(n=c.encodings)===null||n===void 0?void 0:n[0];Rr()&&!l&&(i.encodings=[o]),l&&Object.assign(l,o),Object.assign(c,i),w.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(c.encodings))),await r.setParameters(c)}async applySendEncodings(t,r){try{if(!Ct().supportSetRtpSenderParameters||t.length!==r.length)return;for(let n=0;n<t.length;n++){let i=t[n],o=r[n];o instanceof ir&&!this.isVP8Simulcast(o)&&await this.updateRtpSenderEncodings(o,i.sender)}}catch{w.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,r,n){let i=Pn.parse(t);return r.forEach((o,a)=>{let s=n[a],c=i.mediaDescriptions.find(l=>l.attributes.mid===s);c&&(um(c,o),Pte(c,o,this.store.codec))}),Pn.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var r;(r=this.onFirstAudioReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var r;(r=this.onFirstVideoReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var r;(r=this.onFirstAudioDecoded)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,r,n)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,r,n)},this.statsFilter.onSelectedLocalCandidateChanged=(t,r)=>{var n;(n=this.onSelectedLocalCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,r)=>{var n;(n=this.onSelectedRemoteCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onFirstVideoDecodedTimeout=t=>{var r;(r=this.onFirstVideoDecodedTimeout)===null||r===void 0||r.call(this,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(t,r){if(t.length===r.length)for(let c=0;c<t.length;c++){var n,i,o,a,s;let l=t[c],u=r[c];if(u instanceof ir&&!me(n=u._hints).call(n,lr.LOW_STREAM)&&(i=u._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((o=u._encoderConfig)===null||o===void 0?void 0:o.bitrateMax)>200&&(a=u._scalabilityMode)!==null&&a!==void 0&&a.numSpatialLayers&&((s=u._scalabilityMode)===null||s===void 0?void 0:s.numSpatialLayers)>1&&this.store.codec==="vp8"){let d={},f={high:1e3*(u._encoderConfig.bitrateMax-50),medium:5e4};d.encodings=[{rid:"m",active:!0,maxBitrate:f.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:f.high}];let p=l.sender.getParameters();await l.sender.setParameters(Object.assign(p,d))}}}async applySimulcastEncodings(t,r){if(!Rr()&&t.length===r.length)for(let n=0;n<t.length;n++){let i=r[n];if(i instanceof ir&&this.isVP8Simulcast(i)){let o=t[n],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];let c=o.sender.getParameters();await o.sender.setParameters(Object.assign(c,a))}}}isVP8Simulcast(t){var r,n,i,o,a;return!!(t instanceof ir&&L("SIMULCAST")&&this.store.codec==="vp8"&&!me(r=t._hints).call(r,lr.LOW_STREAM)&&(n=t._encoderConfig)!==null&&n!==void 0&&n.bitrateMax&&((i=t._encoderConfig)===null||i===void 0?void 0:i.bitrateMax)>200&&(o=t._scalabilityMode)!==null&&o!==void 0&&o.numSpatialLayers&&((a=t._scalabilityMode)===null||a===void 0?void 0:a.numSpatialLayers)>1)}logSDPExchange(t,r,n,i){if(L("SDP_LOGGING"))return w.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(r," SDP during P2PConnection.").concat(i,`
`),t),r==="offer"?o=>{this.logSDPExchange(o,"answer",n==="local"?"remote":"local",i)}:void 0}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(a=>{a.direction="inactive"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(t);let o=this.remoteSDP.toString();i==null||i(o),await this.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(r.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(async a=>{a.direction="sendonly"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(t);let o=this.remoteSDP.toString();i==null||i(o),await this.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(r.toString()))}}async getRemoteSSRC(t,r){var n,i;if(r=(n=r)!==null&&n!==void 0?n:(i=this.currentRemoteDescription)===null||i===void 0?void 0:i.sdp){var o;let a=(o=Pn.parse(r).mediaDescriptions.find(s=>s.attributes.mid===t))===null||o===void 0?void 0:o.attributes.ssrcs;return a==null?void 0:a[0].ssrcId}}async setRemoteDescription(t){var r;await this.peerConnection.setRemoteDescription(t),me(r=["connected","completed"]).call(r,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(t,r,n){let i=Pn.parse(t),o=i.mediaDescriptions.find(a=>a.attributes.mid===r);return o&&n===Ce.AUDIO&&o.media.mediaType==="audio"&&dm(o),Pn.print(i)}},_e(nr.prototype,"establish",[es],Object.getOwnPropertyDescriptor(nr.prototype,"establish"),nr.prototype),_e(nr.prototype,"connect",[es],Object.getOwnPropertyDescriptor(nr.prototype,"connect"),nr.prototype),_e(nr.prototype,"receive",[es],Object.getOwnPropertyDescriptor(nr.prototype,"receive"),nr.prototype),_e(nr.prototype,"mockReceive",[es],Object.getOwnPropertyDescriptor(nr.prototype,"mockReceive"),nr.prototype),_e(nr.prototype,"stopReceiving",[es],Object.getOwnPropertyDescriptor(nr.prototype,"stopReceiving"),nr.prototype),_e(nr.prototype,"restartICE",[es],Object.getOwnPropertyDescriptor(nr.prototype,"restartICE"),nr.prototype),_e(nr.prototype,"close",[es],Object.getOwnPropertyDescriptor(nr.prototype,"close"),nr.prototype),_e(nr.prototype,"updateEncoderConfig",[es],Object.getOwnPropertyDescriptor(nr.prototype,"updateEncoderConfig"),nr.prototype),_e(nr.prototype,"updateSendParameters",[es],Object.getOwnPropertyDescriptor(nr.prototype,"updateSendParameters"),nr.prototype),_e(nr.prototype,"replaceTrack",[es],Object.getOwnPropertyDescriptor(nr.prototype,"replaceTrack"),nr.prototype),_e(nr.prototype,"muteLocal",[es],Object.getOwnPropertyDescriptor(nr.prototype,"muteLocal"),nr.prototype),_e(nr.prototype,"unmuteLocal",[es],Object.getOwnPropertyDescriptor(nr.prototype,"unmuteLocal"),nr.prototype),nr);function es(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,o=await i.lock("From P2PConnection.".concat(t));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await n.apply(this,s)}finally{o()}},r}function Rk(e,t){let r=document.createElement("video"),n=document.createElement("canvas");r.setAttribute("style","display:none"),n.setAttribute("style","display:none"),r.setAttribute("muted",""),r.muted=!0,r.setAttribute("autoplay",""),r.autoplay=!0,r.setAttribute("playsinline",""),n.width=Io(t.width),n.height=Io(t.height);let i=Io(t.framerate||15);document.body.append(r),document.body.append(n);let o=e._mediaStreamTrack;r.srcObject=new MediaStream([o]),r.play();let a=n.getContext("2d");if(!a)throw new q(O.UNEXPECTED_ERROR,"can not get canvas context");let s=Ct(),c=n.captureStream(s.supportRequestFrame?0:i).getVideoTracks()[0];c.canvas||(c.canvas=n),n.startCapture=()=>{if(!r)return n.stopCapture&&n.stopCapture();if(r.paused&&r.play(),r.videoHeight>2&&r.videoWidth>2){let u=r.videoWidth,d=r.videoHeight/u,f=n.width*d;Math.abs(f-n.height)>=2&&(w.debug("adjust low stream resolution","".concat(n.width,"x").concat(n.height," -> ").concat(n.width,"x").concat(f)),n.height=f)}a.drawImage(r,0,0,n.width,n.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,r.srcObject=new MediaStream([o]))},n.stopCapture=DL(()=>n.startCapture&&n.startCapture(),i);let l=c.stop;return c.stop=()=>{l.call(c),r&&(r.remove(),r.srcObject=null,r=null),n&&(n.width=0,n.remove(),n.stopCapture&&n.stopCapture(),n.startCapture=void 0,n.stopCapture=void 0,n=null),w.debug("clean low stream renderer")},c}var bb=function(e){return e[e.HEIGHT=2033]="HEIGHT",e[e.FRAME_RATE=2034]="FRAME_RATE",e[e.WIDTH=2035]="WIDTH",e}(bb||{}),dn=function(e){return e[e.FRAME_RATE=2002]="FRAME_RATE",e[e.WIDTH=2003]="WIDTH",e[e.HEIGHT=2004]="HEIGHT",e[e.PACKAGE_LOST=2005]="PACKAGE_LOST",e[e.AVG_ENCODE=2007]="AVG_ENCODE",e[e.NACKS=2009]="NACKS",e[e.PLIS=2010]="PLIS",e[e.FIRS=2011]="FIRS",e[e.BITRATE=2012]="BITRATE",e[e.PACKAGE_RATE=2031]="PACKAGE_RATE",e[e.ADAPTATION=2032]="ADAPTATION",e[e.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",e[e.BANDWIDTH=2061]="BANDWIDTH",e[e.RETRANSMIT=2062]="RETRANSMIT",e[e.TARGET_ENCODED=2064]="TARGET_ENCODED",e[e.TRANSMIT=2066]="TRANSMIT",e[e.FREEZE=2082]="FREEZE",e[e.DISABLED=2095]="DISABLED",e[e.PLAYER_STATUS=2128]="PLAYER_STATUS",e[e.QP_SUM=2143]="QP_SUM",e}(dn||{}),Dd=function(e){return e[e.BITRATE=2069]="BITRATE",e[e.PACKAGE_LOST=2070]="PACKAGE_LOST",e[e.PACKAGE_RATE=2071]="PACKAGE_RATE",e[e.HEIGHT=2073]="HEIGHT",e[e.FRAME_RATE=2075]="FRAME_RATE",e[e.WIDTH=2077]="WIDTH",e}(Dd||{}),di=function(e){return e[e.JITTER=-1]="JITTER",e[e.PACKAGE_LOST=2014]="PACKAGE_LOST",e[e.WIDTH=2018]="WIDTH",e[e.HEIGHT=2019]="HEIGHT",e[e.FRAME_RATE=2020]="FRAME_RATE",e[e.JITTER_BUFFER=2023]="JITTER_BUFFER",e[e.CURRENT_DELAY=2024]="CURRENT_DELAY",e[e.NACKS=2026]="NACKS",e[e.PLIS=2027]="PLIS",e[e.FIRS=2028]="FIRS",e[e.BITRATE=2029]="BITRATE",e[e.PACKAGE_RATE=2078]="PACKAGE_RATE",e[e.FREEZE=2084]="FREEZE",e[e.DISABLED=2101]="DISABLED",e[e.PLAYER_STATUS=2129]="PLAYER_STATUS",e[e.QP_SUM=2144]="QP_SUM",e[e.I_FRAME_DELAY=2149]="I_FRAME_DELAY",e}(di||{}),Ld=function(e){return e[e.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",e[e.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",e[e.FRAME_RATE_OUTPUT=2155]="FRAME_RATE_OUTPUT",e[e.FREEZE_TIME=2109]="FREEZE_TIME",e[e.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER",e[e.FREEZE_DURATION=2156]="FREEZE_DURATION",e}(Ld||{}),Wte=function(e){return e[e.PCM_LEVEL=2104]="PCM_LEVEL",e}(Wte||{}),ou=function(e){return e[e.PACKAGE_LOST=-1]="PACKAGE_LOST",e[e.LEVEL=2038]="LEVEL",e[e.BITRATE=2039]="BITRATE",e[e.PACKAGE_RATE=2040]="PACKAGE_RATE",e[e.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",e[e.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",e[e.FREEZE=2081]="FREEZE",e[e.DISABLED=2096]="DISABLED",e}(ou||{}),rs=function(e){return e[e.BITRATE=2044]="BITRATE",e[e.PACKAGE_LOST=2045]="PACKAGE_LOST",e[e.PACKAGE_RATE=2046]="PACKAGE_RATE",e[e.CURRENT_DELAY=2047]="CURRENT_DELAY",e[e.JITTER_BUFFER=2054]="JITTER_BUFFER",e[e.JITTER=2055]="JITTER",e[e.FREEZE=2083]="FREEZE",e[e.DISABLED=2102]="DISABLED",e[e.PCM_LEVEL=2105]="PCM_LEVEL",e[e.PLAYER_STATUS=2130]="PLAYER_STATUS",e[e.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES",e}(rs||{}),Kte=function(e){return e[e.FREEZE_TIME=-1]="FREEZE_TIME",e[e.LEVEL=2043]="LEVEL",e}(Kte||{}),Ea=function(e){return e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE",e}(Ea||{}),el=1e3,Sd=3;function at(e,t,r){r!=null&&Number.isFinite(r)&&(e[t]=Math.round(Math.max(0,r)))}function j$(e){let t={[Ea.CONN_TYPE]:0,[Ea.RTT]:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{let r=e.selectedCandidatePair.localCandidate.relayProtocol;r==="udp"&&(t[Ea.CONN_TYPE]=1),r==="tcp"&&(t[Ea.CONN_TYPE]=3),r==="tls"&&(t[Ea.CONN_TYPE]=4);break}case"srflx":t[Ea.CONN_TYPE]=2}return t}function U$(e){let t=0;switch(e){case"none":t=0;break;case"cpu":t=1;break;case"bandwidth":t=2;break;case"other":t=3}return t}var qte=class extends _r{constructor(e){super(),I(this,"store",void 0),I(this,"uploadWRTCStatsTimer",void 0),I(this,"uploadOutboundDenoiserStatsTimer",void 0),I(this,"uploadExtStatsTimer",void 0),I(this,"uploadExtUsageStatsTimer",void 0),I(this,"uploadInboundExtStatsTimer",void 0),I(this,"requestStats",void 0),I(this,"requestTransportStats",void 0),I(this,"requestLocalMedia",void 0),I(this,"requestRemoteMedia",void 0),I(this,"requestAllTracks",void 0),I(this,"requestVideoIsReady",void 0),I(this,"requestUploadStats",void 0),I(this,"requestUpload",void 0),I(this,"uploadOutboundStarted",!1),I(this,"uploadInboundStarted",!1),I(this,"uploadTransportStarted",!1),I(this,"uploadExtensionUsageStarted",!1),I(this,"lastRecvStats",void 0),I(this,"lastSendStats",void 0),I(this,"lastFullRecvStats",void 0),I(this,"lastFullSendStats",void 0),I(this,"needUploadRenderFreezeTime",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;let t,r;if(this.uploadTransportStarted&&(t=this.requestStats(),this.store.useP2P&&(r=this.requestStats(!0))),!t&&this.uploadOutboundStarted&&(t=this.requestStats()),!r&&this.uploadInboundStarted&&(r=this.requestStats(!0)),t||r){let n={};if(this.uploadTransportStarted&&t){let i=this.getTransportStats(t,r,e);i&&(n.misc=[i])}if(this.uploadOutboundStarted&&t){let i=this.getOutboundStats(t,e?this.lastSendStats:this.lastFullSendStats,e);i&&(n.outbound=[i])}if(this.uploadInboundStarted&&r){let i=this.getInboundStats(r,e?this.lastRecvStats:this.lastFullRecvStats,e);i&&(n.inbound=i)}this.requestUploadStats(n)}this.lastRecvStats=r,this.lastSendStats=t,e||(this.lastFullRecvStats=r,this.lastFullSendStats=t)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let e=1;this.uploadWRTCStatsTimer=window.setInterval(()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(e!==Sd),++e===Sd+1&&(e=1)},el)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,r){if(!this.requestStats)return;if(r)return e.rtt==null?void 0:{addition:{[Ea.RTT]:e.rtt,[Ea.CONN_TYPE]:void 0}};let n=j$(e);if(this.store.useP2P){if(t){let i=j$(t);n[Ea.CONN_TYPE]+=i[Ea.CONN_TYPE]<<3}n[Ea.CONN_TYPE]+=110}else n[Ea.CONN_TYPE]+=100;return{addition:n}}getOutboundStats(e,t,r){if(!this.requestUploadStats||!this.requestLocalMedia)return;let n=this.requestLocalMedia();if(!n||n.length===0)return;let i,o,a;return n.forEach(s=>{let[c,{track:l,ssrcs:u}]=s;switch(c){case oe.LocalVideoLowTrack:case oe.LocalVideoTrack:if(c===oe.LocalVideoTrack){let d=function(m,g,y,v,E){let b=g.videoSend.find(H=>H.ssrc===m);if(!b)return;let S={},{sentFrame:A,inputFrame:N}=b;if(N&&A){let H=N.frameRate,V=A.frameRate;S[dn.FREEZE]=function(G,Y){let Z=!0;return Z=!(G<=5)&&(G<=10?Y<3:G<=20?Y<4:Y<5),Z}(H,V)?1:0}if(at(S,dn.QP_SUM,b.qpSumPerFrame),E)return S;switch(A&&(at(S,dn.HEIGHT,A.height),at(S,dn.WIDTH,A.width),at(S,dn.FRAME_RATE,A.frameRate)),S[dn.DISABLED]=v._originMediaStreamTrack&&!v._originMediaStreamTrack.enabled||v._mediaStreamTrack&&!v._mediaStreamTrack.enabled?1:0,b.adaptionChangeReason){case"none":S[dn.ADAPTATION]=0;break;case"cpu":S[dn.ADAPTATION]=1;break;case"bandwidth":S[dn.ADAPTATION]=2;break;case"other":S[dn.ADAPTATION]=3}let D=0;b.adaptionChangeReason&&(D+=U$(b.adaptionChangeReason)),g.qualityLimitationReason&&(D+=U$(g.qualityLimitationReason)<<3),S[dn.ADAPTATION]=D,S[dn.PLAYER_STATUS]=$x[v._player?v._player.videoElementStatus:"uninit"],at(S,dn.NACKS,b.nacksCount),at(S,dn.PLIS,b.plisCount),at(S,dn.FIRS,b.firsCount),at(S,dn.AVG_ENCODE,b.avgEncodeMs);let M=y&&y.videoSend.find(H=>H.ssrc===m);if(M){let H=E?el:el*Sd;M.timestamp&&b.timestamp&&(H=b.timestamp-M.timestamp),M.packets!=null&&b.packets!=null&&at(S,dn.PACKAGE_RATE,1e3*(b.packets-M.packets)/H),b.packetsLost!=null&&M.packetsLost!=null&&at(S,dn.PACKAGE_LOST,b.packetsLost-M.packetsLost),M.bytes!=null&&b.bytes!=null&&at(S,dn.BITRATE,8*(b.bytes-M.bytes)/H)}return S}(u[0].ssrcId,e,t,l,r),f=r?null:function(m,g,y){let v=g.videoSend.find(D=>D.ssrc===m);if(!v)return null;let E={},b=v.inputFrame,S=b&&b.height||y&&y.videoHeight||0,A=b&&b.width||y&&y.videoWidth||0,N=b&&b.frameRate||0;return at(E,bb.HEIGHT,S),at(E,bb.WIDTH,A),at(E,bb.FRAME_RATE,N),E}(u[0].ssrcId,e,l),p=r?null:function(m){let g={};return at(g,dn.RETRANSMIT,m.bitrate.retransmit),at(g,dn.TARGET_ENCODED,m.bitrate.targetEncoded),at(g,dn.ACTUAL_ENCODED,m.bitrate.actualEncoded),at(g,dn.TRANSMIT,m.bitrate.transmit),at(g,dn.BANDWIDTH,m.sendBandwidth),g}(e);o=Object.assign({},d,f,p)}else a=r?void 0:function(d,f,p){let m=f.videoSend.find(v=>v.ssrc===d);if(!m)return;let g={},y=m.sentFrame;if(y&&(at(g,Dd.HEIGHT,y.height),at(g,Dd.WIDTH,y.width),at(g,Dd.FRAME_RATE,y.frameRate)),p){let v=p.videoSend.find(E=>E.ssrc===d);if(v){let E=el*Sd;v.timestamp&&m.timestamp&&(E=m.timestamp-v.timestamp),v.packets!=null&&m.packets!=null&&at(g,Dd.PACKAGE_RATE,1e3*(m.packets-v.packets)/E),m.packetsLost!=null&&v.packetsLost!=null&&at(g,Dd.PACKAGE_LOST,m.packetsLost-v.packetsLost),v.bytes!=null&&m.bytes!=null&&at(g,Dd.BITRATE,8*(m.bytes-v.bytes)/E)}}return g}(u[0].ssrcId,e,t);break;case oe.LocalAudioTrack:i=r?void 0:function(d,f,p,m){let g=f.audioSend.find(S=>S.ssrc===d);if(!g)return;let y={};y[ou.DISABLED]=m._originMediaStreamTrack&&!m._originMediaStreamTrack.enabled||m._mediaStreamTrack&&!m._mediaStreamTrack.enabled?1:0;let v=100*m._source.getAccurateVolumeLevel(),E=g.inputLevel;if(E!=null){let S=Math.ceil(50*Math.log10(100*E+1));at(y,ou.LEVEL,S)}at(y,Wte.PCM_LEVEL,v),at(y,ou.AEC_RETURN_LOSS,g.aecReturnLoss),at(y,ou.AEC_RETURN_LOSS_ENH,g.aecReturnLossEnhancement),y[ou.FREEZE]=0;let b=p&&p.audioSend.find(S=>S.ssrc===d);if(b){let S=el*Sd;b.timestamp&&g.timestamp&&(S=g.timestamp-b.timestamp),b.bytes!=null&&g.bytes!=null&&at(y,ou.BITRATE,8*(g.bytes-b.bytes)/S),b.packets!=null&&g.packets!=null&&at(y,ou.PACKAGE_RATE,1e3*(g.packets-b.packets)/S)}return y}(u[0].ssrcId,e,t,l)}}),{high:o,low:a,audio:i}}getInboundStats(e,t,r){if(!this.requestRemoteMedia)return;let n=this.requestRemoteMedia()||[],i=[];return n.forEach(o=>{let[a,s]=o,c={peer:a.uid};if(s.has(Ce.VIDEO)&&a.videoTrack){let l=a._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(a._videoSSRC)||!1,u=a.videoTrack?function(d,f,p,m,g,y,v){var E;let b=f.videoRecv.find(V=>V.ssrc===d);if(!b)return;let S={},{receivedFrame:A,outputFrame:N,decodeFrameRate:D}=b,M=p&&p.videoRecv.find(V=>V.ssrc===d);if(S[di.FREEZE]=g&&Yte.isRemoteVideoFreeze(m,b,M)?1:0,at(S,Ld.FRAME_RATE_DECODE,D),at(S,di.QP_SUM,b.qpSumPerFrame),b.framesRateFirefox&&at(S,di.FRAME_RATE,b.framesRateFirefox),A&&at(S,di.FRAME_RATE,A.frameRate),M){let V=f.timestamp-p.timestamp||(v?el:Sd*el);b.packetsLost!=null&&M.packetsLost!=null&&at(S,di.PACKAGE_LOST,b.packetsLost-M.packetsLost),M.bytes!=null&&b.bytes!=null&&at(S,di.BITRATE,8*(b.bytes-M.bytes)/V),M.packets!=null&&b.packets!=null&&at(S,di.PACKAGE_RATE,1e3*(b.packets-M.packets)/V)}if(v)return S;A?(at(S,di.HEIGHT,A.height),at(S,di.WIDTH,A.width)):m&&(at(S,di.HEIGHT,m._videoHeight||0),at(S,di.WIDTH,m._videoWidth||0)),N&&at(S,Ld.FRAME_RATE_OUTPUT,N.frameRate);let H=(E=m._player)===null||E===void 0?void 0:E.rendFrameRate.toFixed(0);if(H&&at(S,Ld.FRAME_RATE_RENDER,+H),at(S,di.JITTER_BUFFER,b.jitterBufferMs),at(S,di.CURRENT_DELAY,b.currentDelayMs),at(S,di.FIRS,b.firsCount),at(S,di.NACKS,b.nacksCount),at(S,di.PLIS,b.plisCount),m){S[di.DISABLED]=m._originMediaStreamTrack.enabled&&m._mediaStreamTrack.enabled?0:1;let V=m._player;if(V){let{freezeTimeCounterList:G,renderFreezeAccTime:Y,videoElementStatus:Z}=V;if(G&&G.length>0&&at(S,Ld.FREEZE_TIME,G.splice(0,1)[0]),y&&il.visibility==="visible"&&Z===Si.PLAYING&&Ct().supportRequestVideoFrameCallback){let $=Math.min(6e3,Y);V.renderFreezeAccTime=Math.max(0,Y-$),at(S,Ld.FREEZE_TIME_RENDER,$)}if(typeof b.totalFreezesDuration=="number"){let $=M&&M.totalFreezesDuration?b.totalFreezesDuration-M.totalFreezesDuration:b.totalFreezesDuration;at(S,Ld.FREEZE_DURATION,1e3*$)}}}if(S[di.PLAYER_STATUS]=$x[m._player?m._player.videoElementStatus:"uninit"],M&&b.totalInterFrameDelay!==void 0&&b.totalSquaredInterFrameDelay!==void 0&&M.totalInterFrameDelay!==void 0&&M.totalSquaredInterFrameDelay!==void 0){let V=b.totalInterFrameDelay-M.totalInterFrameDelay,G=b.totalSquaredInterFrameDelay-M.totalSquaredInterFrameDelay,Y=b.framesDecodeCount-M.framesDecodeCount,Z=V/Y*1e3,$=Math.round(1e3*Math.sqrt((G-Math.pow(V,2)/Y)/Y));!isNaN($)&&Z+$>Math.max(3*Z,Z+150)&&(S[di.I_FRAME_DELAY]=$)}return S}(a._videoSSRC,e,t,a.videoTrack,l===!0,this.needUploadRenderFreezeTime,r):void 0;u&&(c.video=u)}if(s.has(Ce.AUDIO)&&a.audioTrack){let l=a.audioTrack?function(u,d,f,p,m){let g=d.audioRecv.find(M=>M.ssrc===u);if(!g)return;let y={},v=f&&f.audioRecv.find(M=>M.ssrc===u),{receivedFrames:E,droppedFrames:b}=g;var S,A;if(at(y,rs.JITTER,g.jitterMs),E!=null&&b!=null&&(y[rs.FREEZE]=(A=b,(S=E)===0||100*A/S>20?1:0)),v){let M=d.timestamp-f.timestamp||(m?el:el*Sd);g.packets!=null&&v.packets!=null&&at(y,rs.PACKAGE_RATE,1e3*(g.packets-v.packets)/M),v.bytes!=null&&g.bytes!=null&&at(y,rs.BITRATE,8*(g.bytes-v.bytes)/M),g.packetsLost!=null&&v.packetsLost!=null&&at(y,rs.PACKAGE_LOST,g.packetsLost-v.packetsLost)}if(m)return y;let N=100*p._source.getAccurateVolumeLevel(),D=g.outputLevel;if(D!=null){let M=Math.ceil(50*Math.log10(100*D+1));at(y,Kte.LEVEL,M)}if(at(y,rs.PCM_LEVEL,N),p&&(y[rs.DISABLED]=p._originMediaStreamTrack.enabled&&p._mediaStreamTrack.enabled?0:1),at(y,rs.JITTER_BUFFER,g.jitterBufferMs),at(y,rs.CURRENT_DELAY,g.jitterBufferMs),y[rs.PLAYER_STATUS]=$x[Yi.getPlayerState(p.getTrackId())],v){let M=g.concealedSamples-v.concealedSamples;M>0&&at(y,rs.CONCEALED_SAMPLES,M)}return y}(a._audioSSRC,e,t,a.audioTrack,r):void 0;l&&(c.audio=l)}(c.video||c.audio)&&i.push(c)}),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,i}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval(()=>{if(!this.requestAllTracks||!this.requestUpload)return;let e=(this.requestAllTracks()||[]).find(t=>t instanceof oS);if(e&&e._external.getDenoiserStats){let t=e._external.getDenoiserStats();t&&this.requestUpload(O0.DENOISER_STATS,t)}},2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval(()=>{!this.requestAllTracks||!this.requestUpload||this.requestAllTracks().forEach(e=>{e.getProcessorStats().forEach(t=>{this.requestUpload&&this.requestUpload(t.type,t.stats)})})},2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval(()=>{!this.requestUpload||!this.requestRemoteMedia||(this.requestRemoteMedia()||[]).forEach(e=>{let[t,r]=e;r.has(Ce.VIDEO)&&t.videoTrack&&t.videoTrack.getProcessorStats().forEach(n=>{this.requestUpload&&this.requestUpload(n.type,n.stats)}),r.has(Ce.AUDIO)&&t.audioTrack&&t.audioTrack.getProcessorStats().forEach(n=>{this.requestUpload&&this.requestUpload(n.type,n.stats)})})},2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);let e=new Map;this.uploadExtUsageStatsTimer=window.setInterval(async()=>{let t=Date.now(),r={connectionInterval:L("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:t},n=[],i=this.requestAllTracks&&this.requestAllTracks()||[];for(let c of i)!c.muted&&c.enabled&&(n=n.concat(await c.getProcessorUsage()));let o=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(let[c,l]of o)l.has(Ce.VIDEO)&&c.videoTrack&&(n=n.concat(await c.videoTrack.getProcessorUsage())),l.has(Ce.AUDIO)&&c.audioTrack&&(n=n.concat(await c.audioTrack.getProcessorUsage()));if(n.length===0)return;r.details=function(c,l){let u={};for(let{id:m,value:g,level:y,direction:v}of c){var d;let E=(d=l.get(m))!==null&&d!==void 0?d:0,b=g===2?E+L("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:E;var f,p;l.set(m,b),u[m]?(g===2&&(u[m].value=g),y>u[m].level&&(u[m].level=y),v==="remote"&&(u[m].remoteUidCount+=1),u[m].totalTs=(f=l.get(m))!==null&&f!==void 0?f:0):u[m]={value:g,level:y,remoteUidCount:v==="local"?0:1,totalTs:(p=l.get(m))!==null&&p!==void 0?p:0}}return Object.keys(u).map(m=>{let{level:g,value:y,totalTs:v}=u[m];return{id:m,level:g,value:y,totalTs:v}})}(n,e);let a=Date.now(),s=a>t?a:t+1;this.requestUpload&&this.requestUpload(O0.EXTENSION_USAGE_STATS,{usageStats:r,sendTs:s})},L("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}},pu=class{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){I(this,"uid",void 0),I(this,"_uintid",void 0),I(this,"_trust_in_room_",!0),I(this,"_trust_audio_enabled_state_",!0),I(this,"_trust_video_enabled_state_",!0),I(this,"_trust_audio_mute_state_",!0),I(this,"_trust_video_mute_state_",!0),I(this,"_audio_muted_",!1),I(this,"_video_muted_",!1),I(this,"_audio_enabled_",!0),I(this,"_video_enabled_",!0),I(this,"_audio_added_",!1),I(this,"_video_added_",!1),I(this,"_is_pre_created",!1),I(this,"_video_pre_subscribed",!1),I(this,"_audio_pre_subscribed",!1),I(this,"_trust_video_stream_added_state_",!0),I(this,"_trust_audio_stream_added_state_",!0),I(this,"_audioTrack",void 0),I(this,"_videoTrack",void 0),I(this,"_dataChannels",[]),I(this,"_audioSSRC",void 0),I(this,"_videoSSRC",void 0),I(this,"_audioOrtc",void 0),I(this,"_videoOrtc",void 0),I(this,"_cname",void 0),I(this,"_rtxSsrcId",void 0),I(this,"_videoMid",void 0),I(this,"_audioMid",void 0),this.uid=e,this._uintid=t}},Ms=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({});function t8e(e,t){var r;let n;switch(t){case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoTrack:n=me(r=e._hints).call(r,lr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalVideoLowTrack:n=Lt.Low}return n}function Ik(e){let t=Ct();if(e.some(r=>r._bypassWebAudio))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function Zx(e,t){Ik(e);let r=new pn;return e.forEach(n=>r.addAudioTrack(n)),r}var F$,V$,B$,$$,H$,z$,G$,W$,K$,q$,Y$,dr;function X$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function g_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X$(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var wo=(F$=Os(Ms.SEND_ONLY),V$=Os(Ms.SEND_ONLY),B$=Os(),$$=Os(Ms.RECEIVE_ONLY),H$=Os(Ms.RECEIVE_ONLY),z$=Os(Ms.RECEIVE_ONLY),G$=Os(Ms.RECEIVE_ONLY),W$=Os(Ms.RECEIVE_ONLY),K$=Os(Ms.RECEIVE_ONLY),q$=Os(),Y$=Os(Ms.RECEIVE_ONLY),dr=class extends _r{get state(){return this._state}set state(e){let t=this._state;this._state=e,this.emit(Le.StateChange,t,this._state)}constructor(e,t){super(),I(this,"isPlanB",!1),I(this,"store",void 0),I(this,"statsUploader",void 0),I(this,"sendConnection",void 0),I(this,"recvConnection",void 0),I(this,"localTrackMap",new Map),I(this,"remoteUserMap",new Map),I(this,"localDataChannels",[]),I(this,"pendingLocalTracks",[]),I(this,"pendingRemoteTracks",[]),I(this,"statsCollector",void 0),I(this,"dtlsFailedCount",0),I(this,"sendMutex",new ii("P2PChannel2-send-mutex")),I(this,"recvMutex",new ii("P2PChannel2-recv-mutex")),I(this,"_state",Dt.Disconnected),I(this,"_restartStates",["disconnected","failed"]),I(this,"reconnectInterval",void 0),I(this,"uploadUnplinkStarted",!1),I(this,"uploadDownlinkStarted",!1),I(this,"uplinkStateUploadInterval",void 0),I(this,"downlinkStatsUploadInterval",void 0),I(this,"handleMuteLocalTrack",async(r,n,i)=>{let o=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==Dt.Connected)return void i(new J(O.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));let c=this.filterTobeMutedTracks(r);if(c.length===0)return void n();let l=c.find(p=>p[0]==="videoLowTrack");l&&l[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(c.map(p=>{let[,{id:m}]=p;return m}));let u=!1;var a,s;r.trackMediaType==="video"?u=!((a=this.localTrackMap.get(oe.LocalAudioTrack))===null||a===void 0||!a.track._muted):u=((s=this.localTrackMap.get(oe.LocalVideoTrack))===null||s===void 0?void 0:s.id)===void 0;let d=this.createMuteMessage(c);await Jt(this,Le.RequestMuteLocal,d);let f=r.trackMediaType==="video"?Tu.MUTE_LOCAL_VIDEO:Tu.MUTE_LOCAL_AUDIO;await Jt(this,Le.RequestP2PMuteLocal,{action:f,message:d,isMuteAll:u}),n()}catch(c){i(c)}finally{o()}}),I(this,"handleUnmuteLocalTrack",async(r,n,i)=>{let o=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==Dt.Connected)return void i(new J(O.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));let a=this.filterTobeUnmutedTracks(r);if(a.length===0)return void n();await this.sendConnection.unmuteLocal(a.map(l=>{let[,{id:u}]=l;return u}));let s=this.createUnmuteMessage(a),c=r.trackMediaType==="video"?Tu.UNMUTE_LOCAL_VIDEO:Tu.UNMUTE_LOCAL_AUDIO;await Jt(this,Le.RequestP2PMuteLocal,{action:c,message:s}),n()}catch(a){i(a)}finally{o()}}),I(this,"handleUpdateVideoEncoder",async(r,n,i)=>{let o=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{let a=this.localTrackMap.get(oe.LocalVideoTrack);if(!this.sendConnection||!a||a.track!==r||this.state!==Dt.Connected)return void n();let{id:s,track:c}=a;s&&(await this.sendConnection.updateSendParameters(s,c),await this.sendConnection.updateEncoderConfig(s,c),this.emit(Le.UpdateVideoEncoder,c)),n()}catch(a){i(a)}finally{o()}}),I(this,"handleUpdateVideoSendParameters",async(r,n,i)=>{let o=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{let a=this.localTrackMap.get(oe.LocalVideoTrack);if(!this.sendConnection||!a||a.track!==r||this.state!==Dt.Connected)return void n();let{id:s,track:c}=a;s&&await this.sendConnection.updateSendParameters(s,c),n()}catch(a){i(a)}finally{o()}}),I(this,"handleReplaceTrack",async(r,n,i,o)=>{let a;w.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(r.getTrackId(),"]")),typeof o=="boolean"&&o||(a=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var s;let l=Array.from(this.localTrackMap.entries()).find(u=>{let[,{track:d}]=u;return r===d});if(!this.sendConnection||!l||l[1].id===void 0||this.state!==Dt.Connected)return void n();if(await((s=this.sendConnection)===null||s===void 0?void 0:s.replaceTrack(r,l[1].id)),l[0]===oe.LocalVideoTrack&&Ct().supportDualStreamEncoding){let u=this.localTrackMap.get(oe.LocalVideoLowTrack);if(u){let d=r._mediaStreamTrack.clone();u.track._originMediaStreamTrack.stop(),u.track._mediaStreamTrack=d,u.track._originMediaStreamTrack=d,await new he((f,p)=>{this.handleReplaceTrack(u.track,f,p,!0)})}}n()}catch(l){i(l)}finally{var c;(c=a)===null||c===void 0||c()}}),I(this,"handleGetLocalVideoStats",r=>{r(this.statsCollector.getLocalVideoTrackStats())}),I(this,"handleGetLocalAudioStats",r=>{r(this.statsCollector.getLocalAudioTrackStats())}),I(this,"handleGetRemoteVideoStats",r=>this.statsCollector.getRemoteVideoTrackStats(r.uid)[r.uid]),I(this,"handleGetRemoteAudioStats",r=>this.statsCollector.getRemoteAudioTrackStats(r.uid)[r.uid]),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new qte(e),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval(()=>{[this.sendConnection,this.recvConnection].forEach(r=>{r&&(r.iceConnectionState!=="disconnected"&&r.iceConnectionState!=="failed"||this.handleDisconnect(r.direction))})},L("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new J(O.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e){throw new J(O.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let r;try{if(t){this.recvConnection&&(w.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),r=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new M$(e,this.store,Mi.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);let n=await this.recvConnection.establish(t);return{iceParameters:n.iceParameters,dtlsParameters:n.dtlsParameters,sdp:n.sdp}}{this.state=Dt.New,this.sendConnection&&(w.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),r=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new M$(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);let n=await this.sendConnection.establish();return{iceParameters:n.iceParameters,dtlsParameters:n.dtlsParameters,sdp:n.sdp}}}finally{r&&r()}}async p2pConnect(e){if(!this.sendConnection)throw new J(O.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Dt.Connected}async addRemoteCandidate(e,t){if(t===Mi.RECEIVE_ONLY){if(!this.sendConnection)throw new J(O.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new J(O.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,r){var n=this;return Ws(function*(){let i=yield It(n.sendMutex.lock("From P2PChannel.publish"));try{if(!n.sendConnection||n.state!==Dt.Connected){n.throwIfTrackTypeNotMatch(e);let l=e.filter(u=>n.pendingLocalTracks.indexOf(u)===-1);return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(l))}n.store.pubId=n.store.pubId+1,ti.markPublishStart(n.store.clientId,n.store.pubId);let o=n.filterTobePublishedTracks(e,t,r);if(o.length===0)return void(yield It(n.tryToUnmuteAudio(e)));o.forEach(l=>{let{track:u,type:d}=l,f=Date.now();n.store.publish(u.getTrackId(),d===oe.LocalAudioTrack?"audio":"video",f)}),n.bindLocalTrackEvents(o);let a=yield It(n.sendConnection.send(o.map(l=>{let{track:u}=l;return u}),n.store.codec,n.store.audioCodec)),s=(yield It(a.next())).value,c=n.createGatewayPublishMessage(o,s);try{yield c}catch(l){throw a.throw(l),(l==null?void 0:l.code)===O.WS_ABORT&&o.forEach(u=>{let{track:d}=u;n.pendingLocalTracks.indexOf(d)===-1&&n.pendingLocalTracks.push(d)}),n.unbindLocalTrackEvents(o),l}yield It(a.next()),o.forEach(l=>{let{type:u}=l;n.statsCollector.addLocalStats(u)}),n.statsUploader.startUploadOutboundStats(),n.assignLocalTracks(o,s),o.forEach(l=>{let{track:u,type:d}=l,f=Date.now();n.store.publish(u.getTrackId(),d===oe.LocalAudioTrack?"audio":"video",void 0,f)}),n.startUploadUplinkState()}finally{i()}})()}async unpublish(e){if(!this.sendConnection||this.state!==Dt.Connected)return void(e.length===0?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter(i=>!me(e).call(e,i)));let t=this.filterTobeUnpublishedTracks(e);if(t.length===0)return;let r=t.find(i=>i[0]==="videoLowTrack");r&&r[1].track.close();let n=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map(i=>{let[,{id:o}]=i;return o})),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map(i=>{let[o,{track:a}]=i;return{type:o,track:a}})),t.forEach(i=>{let[o]=i;this.statsCollector.removeLocalStats(o)}),this.localTrackMap.size===0&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===Dt.Connected)return r&&r[1].track.close(),n;e.forEach(i=>{let o=this.pendingLocalTracks.indexOf(i);o!==-1&&this.pendingLocalTracks.splice(o,1)})}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);let e=()=>{let t=[],r=[];Array.from(this.localTrackMap.entries()).forEach(n=>{let[i,{track:o,ssrcs:a}]=n,s={stream_type:t8e(o,i),ssrcs:a};o._muted||!o._enabled?t.push(s):r.push(s)}),t.length>0&&t.forEach(n=>{Jt(this,Le.RequestMuteLocal,[n])}),r.length>0&&r.forEach(n=>{Jt(this,Le.RequestUnmuteLocal,[n])})};e(),this.uplinkStateUploadInterval=window.setInterval(()=>{e()},3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return Ws(function*(){throw new J(O.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")})()}async republish(){this.pendingLocalTracks.length>0&&(w.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await Kn(this,Le.RequestRePublish,this.pendingLocalTracks),this.emit(Le.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new J(O.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,r,n){var i;if(!this.recvConnection)throw new J(O.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if((i=this.remoteUserMap.get(e))!==null&&i!==void 0&&i.has(t))return;let{track:o,mid:a,transceiver:s}=await this.recvConnection.receive(t,[{ssrcId:r}],String(e.uid),n);t===Ce.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new kp(o,e.uid,e._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),s&&e._audioTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=r,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new Op(o,e.uid,e._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),s&&e._videoTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._videoTrack));let c=this.remoteUserMap.get(e);c?c.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();let l=this.pendingRemoteTracks.findIndex(u=>{let{user:d,kind:f}=u;return d.uid===e.uid&&t===f});l!==-1&&(this.pendingRemoteTracks.splice(l,1),this.emit(Le.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,r,n){if(!this.recvConnection)throw new J(O.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:r}],String(e.uid),n)}async unsubscribe(e,t,r){let n=this.pendingRemoteTracks.filter(o=>{let{user:a,kind:s}=o;return t!==void 0?a.uid===e.uid&&t===s:a.uid===e.uid});if(n.forEach(o=>{let a=this.pendingRemoteTracks.indexOf(o);this.pendingRemoteTracks.splice(a,1)}),this.recvConnection||r||n.forEach(o=>{let{kind:a}=o;var s;if(a===Ce.AUDIO)(s=e._audioTrack)===null||s===void 0||s._destroy(),e._audioTrack=void 0;else if(a===Ce.VIDEO){var c;(c=e._videoTrack)===null||c===void 0||c._destroy(),e._videoTrack=void 0}}),!this.recvConnection)return;let i=this.filterTobeUnSubscribedTracks(e,t);i.length!==0&&(await this.recvConnection.stopReceiving(i.map(o=>{let[,{id:a}]=o;return a})),this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),i.forEach(o=>{let[a,{kind:s}]=o;var c,l;if(s===Ce.VIDEO&&a._videoSSRC&&((c=this.recvConnection)===null||c===void 0||c.setStatsRemoteVideoIsReady(a._videoSSRC,!1)),s===Ce.VIDEO)this.unbindRemoteTrackEvents(a._videoTrack),r||((l=a._videoTrack)===null||l===void 0||l._destroy(),a._videoTrack=void 0);else if(s===Ce.AUDIO){var u;this.unbindRemoteTrackEvents(a._audioTrack),!r&&((u=a._audioTrack)===null||u===void 0||u._destroy(),a._audioTrack=void 0)}}),i.forEach(o=>{let[,{kind:a}]=o;Jt(this,Le.RequestP2PMuteRemote,a)}))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let e=()=>Array.from(this.remoteUserMap.entries()).forEach(t=>{let[,r]=t;[Ce.VIDEO,Ce.AUDIO].forEach(n=>{r.has(n)?Jt(this,Le.RequestP2PUnmuteRemote,n):Jt(this,Le.RequestP2PMuteRemote,n)})});e(),this.downlinkStatsUploadInterval=window.setInterval(()=>{e()},3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new J(O.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new J(O.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new J(O.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new J(O.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;let r=this.remoteUserMap.get(e);if(!r)return void w.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!r.get(t))return void w.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));let n=t===Ce.VIDEO?e._videoSSRC:e._audioSSRC;n!==void 0&&this.recvConnection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;let r=this.remoteUserMap.get(e);if(!r)return void w.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."));r.get(t)||w.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."))}getAllTracks(e){let t=this.localTrackMap.get(oe.LocalAudioTrack);if((t==null?void 0:t.track)instanceof pn){let r=t.track;return Array.from(this.localTrackMap.entries()).filter(n=>{let[i]=n;return i!==oe.LocalAudioTrack}).filter(n=>{let[i]=n;return!(e&&i===oe.LocalVideoLowTrack)}).map(n=>{let[,{track:i}]=n;return i}).concat(r.trackList)}return Array.from(this.localTrackMap.entries()).filter(r=>{let[n]=r;return!(e&&n===oe.LocalVideoLowTrack)}).map(r=>{let[,{track:n}]=r;return n})}reportPublishEvent(e,t,r,n,i){if(e){let a=this.localTrackMap.get(oe.LocalAudioTrack),s=n?this.localTrackMap.get(oe.LocalVideoLowTrack):this.localTrackMap.get(oe.LocalVideoTrack);Se.publish(this.store.sessionId,{eventElapse:ti.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.track.getTrackLabel(),videoName:s==null?void 0:s.track.getTrackLabel(),screenshare:(s==null?void 0:s.track._hints.indexOf(lr.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;r||(r=[]);let a=r.find(c=>c instanceof Tr),s=n?(o=this.localTrackMap.get(oe.LocalVideoTrack))===null||o===void 0?void 0:o.track:r.find(c=>c instanceof ir);Se.publish(this.store.sessionId,{eventElapse:ti.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.getTrackLabel(),videoName:s==null?void 0:s.getTrackLabel(),screenshare:(s==null?void 0:s._hints.indexOf(lr.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,r,n){let i=n===Ce.VIDEO?r._videoSSRC:r._audioSSRC;i&&Se.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===Ce.VIDEO,audio:n===Ce.AUDIO,peerid:r.uid,subscribeRequestid:n===Ce.VIDEO?r._videoSSRC:r._audioSSRC,p2pid:this.store.p2pId,eventElapse:ti.measureFromSubscribeStart(this.store.clientId,i)})}reset(){w.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new ii("P2PChannel2-send-mutex"),this.sendMutex=new ii("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();let e=this.localTrackMap.get(oe.LocalAudioTrack);if((e==null?void 0:e.track)instanceof pn){if(e.track.trackList.length>0){let t=e.track;e.track.trackList.forEach(r=>{t.removeAudioTrack(r)})}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=Dt.Disconnected}getStats(e){var t,r;return e?(r=this.recvConnection)===null||r===void 0?void 0:r.getStats():(t=this.sendConnection)===null||t===void 0?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return((t=this.recvConnection)===null||t===void 0?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){let e=this.localTrackMap.get(oe.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){let e=this.localTrackMap.get(oe.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){let t=this.localTrackMap.get(e);return t&&t.track instanceof ir||t&&t.track instanceof Tr?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}getRemoteMedia(e){var t;let r=Array.from(Vo(t=this.remoteUserMap).call(t)).find(n=>n.uid===e);return r?{audioTrack:r.audioTrack,audioSSRC:r._audioSSRC,videoTrack:r.videoTrack,videoSSRC:r._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(r=>{let[n]=r;return{uid:n.uid,level:n.audioTrack?100*n.audioTrack._source.getAccurateVolumeLevel():0}}),t=this.localTrackMap.get(oe.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Lv(e).call(e,(r,n)=>r.level-n.level),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(w.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=Dt.Reconnecting,L("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t]=e;var r;t._videoTrack&&t._videoTrack._player&&((r=t._videoTrack._player.getVideoElement())===null||r===void 0||r.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())}),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(e=>{var t;let[r,{track:n}]=e;switch(r){case oe.LocalVideoTrack:me(t=n._hints).call(t,lr.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case oe.LocalAudioTrack:n instanceof pn?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);case oe.LocalVideoLowTrack:}}),this.emit(Le.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;Array.from(Vo(r).call(r)).forEach(n=>{this.setPendingRemoteMedia(t,n)}),this.emit(Le.MediaReconnectStart,t.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),w.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(let r of this.pendingRemoteTracks){let{user:n,kind:i}=r;if((e instanceof pu?e.uid:e)===n.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let r,n;if(e===Mi.SEND_ONLY){if(!this.sendConnection)throw new J(O.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");r=await this.sendMutex.lock("From P2PChannel.restartICE"),n=this.sendConnection}else{if(!this.recvConnection)throw new J(O.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");r=await this.recvMutex.lock("From P2PChannel.restartICE"),n=this.recvConnection}try{if(t){let i=await n.restartICE(t);return n.isInRestartIce=!1,i}{let i=await n.restartICE();if(i){let o=await Kn(this,Le.RequestP2PRestartICE,{direction:Mi.RECEIVE_ONLY,iceParameter:i});await n.restartICE(o),n.isInRestartIce=!1}}}finally{r()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;let e=this.sendConnection.getStats(),t=this.localTrackMap.get(oe.LocalVideoTrack),r=this.localTrackMap.get(oe.LocalAudioTrack),n=e.videoSend.find(p=>{var m;return p.ssrc===(t==null||(m=t.ssrcs)===null||m===void 0?void 0:m[0].ssrcId)}),i=e.audioSend.find(p=>{var m;return p.ssrc===(r==null||(m=r.ssrcs)===null||m===void 0?void 0:m[0].ssrcId)});if(!n||!i)return 1;let o=Ca(this,Le.NeedSignalRTT),a=n?n.rttMs:void 0,s=i?i.rttMs:void 0,c=a&&s?(a+s)/2:a||s,l=(c&&o?(c+o)/2:c||o)||0,u=100*e.sendPacketLossRate*.7/50+.3*l/1500,d=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,f=t==null?void 0:t.track;if(f&&f._encoderConfig&&f._hints.indexOf(lr.SCREEN_TRACK)===-1){let p=f._encoderConfig.bitrateMax,m=e.bitrate.actualEncoded;if(p&&m){let g=(1e3*p-m)/(1e3*p);return $ee[g<.15?0:g<.3?1:g<.45?2:g<.6?3:4][d]}}return d}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;let e=this.recvConnection.getStats(),t=0;return Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n]=r,i=n._audioSSRC,o=n._videoSSRC,a=e.audioRecv.find(m=>m.ssrc===i),s=e.videoRecv.find(m=>m.ssrc===o);if(!a&&!s)return void(t+=1);let c=Ca(this,Le.NeedSignalRTT),l=e.rtt,u=(l&&c?(l+c)/2:l||c)||0,d=a?a.jitterMs:void 0,f=e.recvPacketLossRate,p=.7*f*100/50+.3*u/1500;d&&(p=.6*f*100/50+.2*u/1500+.2*d/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5}),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new he((t,r)=>{this.handleMuteLocalTrack(e,t,r)})}filterTobePublishedTracks(e,t,r){let n=[],i=Ct(),o=this.getAllTracks();e=lp(e=e.filter(c=>o.indexOf(c)===-1));let a=!1,s=!1;for(let c of e){if(c instanceof ir&&(this.localTrackMap.has(oe.LocalVideoTrack)||a?new J(O.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:c,type:oe.LocalVideoTrack}),a=!0),t)){let l=this.getLowVideoTrack(c,r);n.push({track:l,type:oe.LocalVideoLowTrack})}if(c instanceof Tr){let l=this.localTrackMap.get(oe.LocalAudioTrack);if(l){if(!(l.track instanceof pn))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");l.track.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0)}else if(s){let u=n.find(d=>{let{type:f}=d;return f===oe.LocalAudioTrack});if(!(u.track instanceof pn))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");u.track.addAudioTrack(c)}else{if(!i.webAudioMediaStreamDest||c instanceof pn||c._bypassWebAudio)n.push({track:c,type:oe.LocalAudioTrack});else{let u=new pn;u.addAudioTrack(c),n.push({track:u,type:oe.LocalAudioTrack})}s=!0}}}return n}filterTobeUnpublishedTracks(e){let t=[],r=this.getAllTracks();e=lp(e=e.filter(n=>r.indexOf(n)!==-1));for(let n of e){if(n instanceof Tr){let i=this.localTrackMap.get(oe.LocalAudioTrack);if(!i)continue;i.track instanceof pn?(i.track.removeAudioTrack(n),this.unbindLocalAudioTrackEvents(n),i.track.trackList.length===0&&(t.push([oe.LocalAudioTrack,i]),i.track.close())):t.push([oe.LocalAudioTrack,i])}if(n instanceof ir){let i=this.localTrackMap.get(oe.LocalVideoTrack);if(!i)continue;t.push([oe.LocalVideoTrack,i]);let o=this.localTrackMap.get(oe.LocalVideoLowTrack);o&&t.push([oe.LocalVideoLowTrack,o])}}return t}bindLocalTrackEvents(e){e.forEach(t=>{let{track:r,type:n}=t;switch(n){case oe.LocalVideoTrack:r.addListener(ye.GET_STATS,this.handleGetLocalVideoStats),r.addListener(ye.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(ye.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(ye.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.addListener(ye.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.addListener(ye.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.addListener(ye.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(ye.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case oe.LocalAudioTrack:this.bindLocalAudioTrackEvents(r);case oe.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){e instanceof pn?e.trackList.forEach(r=>{r.addListener(ye.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(ye.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(ye.GET_STATS,this.handleGetLocalAudioStats),r.addListener(ye.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(ye.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(ye.GET_STATS,this.handleGetLocalAudioStats),e.addListener(ye.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(ye.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(ye.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(ye.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(ye.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(t=>{let[r,{track:n}]=t;return{track:n,type:r}})),e.forEach(t=>{let{track:r,type:n}=t;switch(n){case oe.LocalVideoTrack:r.off(ye.GET_STATS,this.handleGetLocalVideoStats),r.off(ye.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(ye.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(ye.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.off(ye.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.off(ye.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.off(ye.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(ye.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case oe.LocalAudioTrack:this.unbindLocalAudioTrackEvents(r);case oe.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof pn?e.trackList.forEach(t=>{t.off(ye.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(ye.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(ye.GET_STATS,this.handleGetLocalAudioStats),t.off(ye.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(ye.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(ye.GET_STATS,this.handleGetLocalAudioStats),e.off(ye.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(ye.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(ye.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(ye.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(ye.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof Op&&t.addListener(ye.GET_STATS,r=>{r(this.handleGetRemoteVideoStats(e))}),t instanceof kp&&t.addListener(ye.GET_STATS,r=>{r(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(ye.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;r.has(Ce.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),r.has(Ce.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)})}createGatewayPublishMessage(e,t){return e.map((r,n)=>{var i;let o,{track:a,type:s}=r;switch(s){case oe.LocalAudioTrack:o=Lt.Audio;break;case oe.LocalVideoTrack:o=me(i=a._hints).call(i,lr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalVideoLowTrack:o=Lt.Low}return{kind:s===oe.LocalAudioTrack?Ce.AUDIO:Ce.VIDEO,stream_type:o,mid:t[n].id,ssrcs:t[n].localSSRC,isMuted:a.muted||!a.enabled}})}createGatewayUnpublishMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case oe.LocalVideoTrack:n=me(r=o._hints).call(r,lr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoLowTrack:n=Lt.Low}return{stream_type:n,ssrcs:a,mid:s}})}assignLocalTracks(e,t){e.forEach((r,n)=>{let{track:i,type:o}=r;this.localTrackMap.set(o,{track:i,id:t[n].id,ssrcs:t[n].localSSRC})})}withdrawLocalTracks(e){e.forEach(t=>{let[r]=t;this.localTrackMap.delete(r)})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var r;w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(Le.PeerConnectionStateChange,t),t!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),t==="connected"&&(e.isInRestartIce=!1),me(r=this._restartStates).call(r,t)&&!e.isInRestartIce&&(t==="disconnected"&&await Ln(800),e.iceConnectionState!=="disconnected"&&e.iceConnectionState!=="failed"||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=t=>{t!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(t,")")),Se.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:t,tag:Cr.TRACER}).onSuccess(),this.emit(Le.IceConnectionStateChange,t)},e.onICETransportStateChange=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(t,")"))},e.onDTLSTransportStateChange=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(t,")"))},e.onDTLSTransportError=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(t,")"))},e.onFirstAudioDecoded=t=>{var r;let n=Array.from(Vo(r=this.remoteUserMap).call(r)).find(o=>o._audioSSRC===t);var i;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),(i=n.audioTrack)===null||i===void 0||i.emit(Np.FIRST_FRAME_DECODED),Se.firstRemoteFrame(this.store.sessionId,An.FIRST_AUDIO_DECODE,vr.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:ti.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=t=>{var r;let n=Array.from(Vo(r=this.remoteUserMap).call(r)).find(i=>i._audioSSRC===t);n&&Se.firstRemoteFrame(this.store.sessionId,An.FIRST_AUDIO_RECEIVED,vr.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:ti.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(t,r,n)=>{this.reportVideoFirstFrameDecoded(t,r,n)},e.onFirstVideoReceived=t=>{var r;let n=Array.from(Vo(r=this.remoteUserMap).call(r)).find(i=>i._videoSSRC===t);n&&Se.firstRemoteFrame(this.store.sessionId,An.FIRST_VIDEO_RECEIVED,vr.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:ti.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(t,r)=>{let n=t.candidateType==="relay",i=r.candidateType==="relay";r.candidateType!=="unknown"&&n===i||this.emit(Le.ConnectionTypeChange,n),w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Cu(r))," -> ").concat(JSON.stringify(Cu(t)),")"))},e.onSelectedRemoteCandidateChanged=(t,r)=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Cu(r))," -> ").concat(JSON.stringify(Cu(t)),")"))},e.onFirstVideoDecodedTimeout=t=>{this.reportVideoFirstFrameDecoded(t,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(Le.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){let t=e===Mi.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,w.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===Mi.SEND_ONLY?this.restartICE(e):Kn(this,Le.RequestP2PRestartICE,{direction:Mi.SEND_ONLY}))}filterTobeMutedTracks(e){let t=[];if(this.getAllTracks().indexOf(e)===-1)return t;let r=this.localTrackMap.get(oe.LocalAudioTrack);if(e instanceof Tr&&(r==null?void 0:r.track)instanceof pn)return r.track.isActive||t.push([oe.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(n&&(t.push(n),n[0]===oe.LocalVideoTrack)){let i=this.localTrackMap.get(oe.LocalVideoLowTrack);i&&t.push([oe.LocalVideoLowTrack,i])}return t}filterTobeUnmutedTracks(e){let t=[],r=this.localTrackMap.get(oe.LocalAudioTrack);if(e instanceof Tr&&(r==null?void 0:r.track)instanceof pn)return r.track.isActive&&t.push([oe.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(n)if(n[0]===oe.LocalVideoTrack){t.push(n);let i=this.localTrackMap.get(oe.LocalVideoLowTrack);i&&t.push([oe.LocalVideoLowTrack,i])}else t.push(n);return t}createMuteMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoTrack:n=me(r=o._hints).call(r,lr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalVideoLowTrack:n=Lt.Low}return{stream_type:n,ssrcs:a,mid:s}})}createUnmuteMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoTrack:n=me(r=o._hints).call(r,lr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalVideoLowTrack:n=Lt.Low}return{stream_type:n,ssrcs:a,mid:s}})}filterTobeUnSubscribedTracks(e,t){let r=[],n=this.remoteUserMap.get(e);if(!n)return r;if(t){let i=n.get(t);if(!i)return r;r.push([e,{kind:t,id:i}])}else Array.from(n.entries()).forEach(i=>{let[o,a]=i;r.push([e,{kind:o,id:a}])});return r}createUnsubscribeMessage(e){let t=[];return e.forEach(r=>{let[n,{kind:i,id:o}]=r;switch(i){case Ce.VIDEO:return void(n._videoSSRC&&t.push({stream_type:Ce.VIDEO,ssrcId:n._videoSSRC}));case Ce.AUDIO:return void(n._audioSSRC&&t.push({stream_type:Ce.AUDIO,ssrcId:n._audioSSRC}))}}),t}withdrawRemoteTracks(e){e.forEach(t=>{let[r,{kind:n}]=t,i=this.remoteUserMap.get(r);i&&(i.delete(n),Array.from(i.entries()).length===0&&this.remoteUserMap.delete(r))})}async updateBitrateLimit(e){let t=this.localTrackMap.get(oe.LocalVideoTrack),r=this.localTrackMap.get(oe.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),r&&e.low_stream_uplink&&await r.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){let e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return e!=="connected"&&t!=="connected"}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof Tr){let r=this.filterTobeUnmutedTracks(e[t]);if(r.length===0)continue;let n=this.createUnmuteMessage(r);return void await Jt(this,Le.RequestUnmuteLocal,n)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter(e=>{let[,{ssrcs:t}]=e;return!!t}),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!((t=this.recvConnection)===null||t===void 0||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Le.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(Le.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Ln(SL(this.dtlsFailedCount,Kr)),this.emit(Le.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(oe.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof ir)}throwIfTrackTypeNotMatch(e){if(e.filter(t=>t instanceof ir).length>1)throw new J(O.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(t=>t instanceof Tr).length>1&&(e.some(t=>t instanceof Tr&&t._bypassWebAudio)||!Ct().webAudioMediaStreamDest))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(let t of e){if(t instanceof ir&&this.pendingLocalTracks.some(r=>r instanceof ir))throw new J(O.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof Tr&&this.pendingLocalTracks.some(r=>r instanceof Tr)&&(!Ct().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some(r=>r instanceof Tr&&r._bypassWebAudio)))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){let r=!L("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ct().supportDualStreamEncoding,n=g_(g_({},{width:160,height:120,framerate:15,bitrate:50}),t),i;i=r?e._mediaStreamTrack.clone():Rk(e,n);let o=er(8,"track-low-"),a=new ir(i,g_(g_({},r&&{scaleResolutionDownBy:hk(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,o);return a.on(uh.TRANSCEIVER_UPDATED,s=>{e._updateRtpTransceiver(s,lm.LOW_STREAM)}),a._hints.push(lr.LOW_STREAM),e.addListener(ye.NEED_CLOSE,()=>{a.close()}),a}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,r,n){var i;let o=Array.from(Vo(i=this.remoteUserMap).call(i)).find(a=>a._videoSSRC===e);if(o){n||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());let a=this.store.keyMetrics,s=a.subscribe.find(c=>c.userId===o.uid&&c.type==="video");Se.firstRemoteVideoDecode(this.store.sessionId,An.FIRST_VIDEO_DECODE,vr.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:r,subscribeElapse:ti.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:a.requestAPEnd||0,apStart:a.requestAPStart||0,joinGwEnd:a.joinGatewayEnd||0,joinGwStart:a.joinGatewayStart||0,pcEnd:a.peerConnectionEnd||0,pcStart:a.peerConnectionStart||0,subscriberEnd:(s==null?void 0:s.subscribeEnd)||0,subscriberStart:(s==null?void 0:s.subscribeStart)||0,videoAddNotify:(s==null?void 0:s.streamAdded)||0,state:n?1:0})}}async remoteMediaSsrcChanged(e,t,r){if(!this.recvConnection)return!1;let n=this.remoteUserMap.get(e);if(!n)return!1;let i=n.get(t);if(!i)return!1;let o=await this.recvConnection.getRemoteSSRC(i);return o!==void 0&&o!==r}isPreSubScribe(e){return!1}async publishDataChannel(e){throw new J(O.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new J(O.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new J(O.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new J(O.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new J(O.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new J(O.NOT_SUPPORTED)}async preConnect(e){throw new J(O.NOT_SUPPORTED)}getEstablishParams(){throw new J(O.NOT_SUPPORTED)}async reSubscribe(e){throw new J(O.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new J(O.NOT_SUPPORTED)}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(e=>{let[t,{track:r}]=e;t===oe.LocalVideoLowTrack?r._updateRtpTransceiver(void 0,lm.LOW_STREAM):r._updateRtpTransceiver(void 0)})}},_e(dr.prototype,"p2pConnect",[F$],Object.getOwnPropertyDescriptor(dr.prototype,"p2pConnect"),dr.prototype),_e(dr.prototype,"unpublish",[V$],Object.getOwnPropertyDescriptor(dr.prototype,"unpublish"),dr.prototype),_e(dr.prototype,"unpublishLowStream",[B$],Object.getOwnPropertyDescriptor(dr.prototype,"unpublishLowStream"),dr.prototype),_e(dr.prototype,"subscribe",[$$],Object.getOwnPropertyDescriptor(dr.prototype,"subscribe"),dr.prototype),_e(dr.prototype,"mockSubscribe",[H$],Object.getOwnPropertyDescriptor(dr.prototype,"mockSubscribe"),dr.prototype),_e(dr.prototype,"unsubscribe",[z$],Object.getOwnPropertyDescriptor(dr.prototype,"unsubscribe"),dr.prototype),_e(dr.prototype,"muteRemote",[G$],Object.getOwnPropertyDescriptor(dr.prototype,"muteRemote"),dr.prototype),_e(dr.prototype,"unmuteRemote",[W$],Object.getOwnPropertyDescriptor(dr.prototype,"unmuteRemote"),dr.prototype),_e(dr.prototype,"hasRemoteMediaWithLock",[K$],Object.getOwnPropertyDescriptor(dr.prototype,"hasRemoteMediaWithLock"),dr.prototype),_e(dr.prototype,"disconnectForReconnect",[q$],Object.getOwnPropertyDescriptor(dr.prototype,"disconnectForReconnect"),dr.prototype),_e(dr.prototype,"remoteMediaSsrcChanged",[Y$],Object.getOwnPropertyDescriptor(dr.prototype,"remoteMediaSsrcChanged"),dr.prototype),dr);function Os(e){return function(t,r,n){let i=t[r];if(typeof i!="function")throw new Error("Cannot use mutex on object property.");return n.value=async function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];switch(e){case Ms.SEND_ONLY:{let c=await this.sendMutex.lock("From P2PChannel2.".concat(r));try{return await i.apply(this,a)}finally{c()}}case Ms.RECEIVE_ONLY:{let c=await this.recvMutex.lock("From P2PChannel2.".concat(r));try{return await i.apply(this,a)}finally{c()}}default:{let c=await this.sendMutex.lock("From P2PChannel2.".concat(r)),l=await this.recvMutex.lock("From P2PChannel2.".concat(r));try{return await i.apply(this,a)}finally{c(),l()}}}},n}}function J$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Td(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J$(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Yte=class xk{constructor(t){I(this,"store",void 0),I(this,"onStatsException",void 0),I(this,"onUploadPublishDuration",void 0),I(this,"onStatsChanged",void 0),I(this,"localStats",new Map),I(this,"remoteStats",new Map),I(this,"updateStatsInterval",void 0),I(this,"trafficStats",void 0),I(this,"trafficStatsPeerList",[]),I(this,"uplinkStats",void 0),I(this,"exceptionMonitor",void 0),I(this,"p2pChannel",void 0),I(this,"scalabilityMode",lk.L1T1),I(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=t,this.exceptionMonitor=new j6e,this.exceptionMonitor.on("exception",(r,n,i)=>{this.onStatsException&&this.onStatsException(r,n,i)})}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(oe.LocalAudioTrack)||Td({},mk)}getLocalVideoTrackStats(){return this.localStats.get(oe.LocalVideoTrack)||Td({},gk)}getRemoteAudioTrackStats(t){let r=(o,a)=>{if(!this.trafficStats)return a;let s=this.trafficStats.peer_delay.find(c=>c.peer_uid===o);return s&&(a.publishDuration=s.B_ppad+(Date.now()-this.trafficStats.timestamp)),a},n={};if(t){var i;let o=(i=this.remoteStats.get(t))===null||i===void 0?void 0:i.audioStats;o&&(n[t]=r(t,o))}else Array.from(this.remoteStats.entries()).forEach(o=>{let[a,{audioStats:s}]=o;s&&(n[a]=r(a,s))});return n}getRemoteNetworkQualityStats(t){let r={};if(t){var n;let i=(n=this.remoteStats.get(t))===null||n===void 0?void 0:n.networkStats;i&&(r[t]=i)}else Array.from(this.remoteStats.entries()).forEach(i=>{let[o,{networkStats:a}]=i;a&&(r[o]=a)});return r}getRemoteVideoTrackStats(t){let r=(o,a)=>{if(!this.trafficStats)return a;let s=this.trafficStats.peer_delay.find(c=>c.peer_uid===o);return s&&(a.publishDuration=s.B_ppvd+(Date.now()-this.trafficStats.timestamp)),a},n={};if(t){var i;let o=(i=this.remoteStats.get(t))===null||i===void 0?void 0:i.videoStats;o&&(n[t]=r(t,o))}else Array.from(this.remoteStats.entries()).forEach(o=>{let[a,{videoStats:s}]=o;s&&(n[a]=r(a,s))});return n}getRTCStats(){let t=0,r=0,n=0,i=0,o=this.localStats.get(oe.LocalAudioTrack);o&&(t+=o.sendBytes,r+=o.sendBitrate);let a=this.localStats.get(oe.LocalVideoTrack);a&&(t+=a.sendBytes,r+=a.sendBitrate);let s=this.localStats.get(oe.LocalVideoLowTrack);s&&(t+=s.sendBytes,r+=s.sendBitrate),this.remoteStats.forEach(l=>{let{audioStats:u,videoStats:d}=l;u&&(n+=u.receiveBytes,i+=u.receiveBitrate),d&&(n+=d.receiveBytes,i+=d.receiveBitrate)});let c=1;return this.trafficStats&&(c+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:c,SendBitrate:r,SendBytes:t,RecvBytes:n,RecvBitrate:i,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(t){this.localStats.set(t,void 0)}removeLocalStats(t){t?this.localStats.delete(t):this.localStats.clear()}addRemoteStats(t){this.remoteStats.set(t,{})}removeRemoteStats(t){t?this.remoteStats.delete(t):this.remoteStats.clear()}addP2PChannel(t){this.p2pChannel=t}updateTrafficStats(t){t.peer_delay=t.peer_delay.filter(r=>r.B_ppad!==void 0||r.B_ppvd!==void 0),t.peer_delay.filter(r=>this.trafficStatsPeerList.indexOf(r.peer_uid)===-1).forEach(r=>{var n;let i=(n=this.p2pChannel)===null||n===void 0?void 0:n.getRemoteMedia(r.peer_uid),o=i!=null&&i.videoSSRC?ti.measureFromSubscribeStart(this.store.clientId,i.videoSSRC):0,a=i!=null&&i.audioSSRC?ti.measureFromSubscribeStart(this.store.clientId,i.audioSSRC):0;r.B_ppad!==void 0&&r.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(r.peer_uid,r.B_ppad,r.B_ppvd,o>a?o:a),this.trafficStatsPeerList.push(r.peer_uid))}),this.trafficStats=t}updateUplinkStats(t){this.uplinkStats&&this.uplinkStats.B_fir!==t.B_fir&&w.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(t.B_fir)),this.uplinkStats=t}static isRemoteVideoFreeze(t,r,n){if(!t)return!1;let i=!!n&&r.framesDecodeFreezeTime>n.framesDecodeFreezeTime,o=!n||r.framesDecodeCount>n.framesDecodeCount;return i||!o}static isRemoteAudioFreeze(t){return!!t&&t._isFreeze()}isLocalVideoFreeze(t){return!(!t.inputFrame||!t.sentFrame)&&t.inputFrame.frameRate>5&&t.sentFrame.frameRate<3}updateLocalStats(t){Array.from(this.localStats.entries()).forEach(r=>{let[n,i]=r;switch(n){case oe.LocalVideoTrack:case oe.LocalVideoLowTrack:{let a=i,s=Td({},gk),c=t.getStats(),l=t.getLocalMedia(n);if(c){let u=c.videoSend.find(d=>d.ssrc===(l==null?void 0:l.ssrcs[0].ssrcId));if(u){let d=t.getLocalVideoSize(),f=t.getEncoderConfig(oe.LocalVideoTrack);u.codec!=="H264"&&u.codec!=="H265"&&u.codec!=="VP8"&&u.codec!=="VP9"&&u.codec!=="AV1X"&&u.codec!=="AV1"||(s.codecType=u.codec),s.sendBytes=u.bytes,s.sendBitrate=a?8*Math.max(0,s.sendBytes-a.sendBytes):0,u.inputFrame?(s.captureFrameRate=u.inputFrame.frameRate,s.captureResolutionHeight=u.inputFrame.height,s.captureResolutionWidth=u.inputFrame.width):d&&(s.captureResolutionWidth=d.width,s.captureResolutionHeight=d.height),u.sentFrame?(s.sendFrameRate=u.sentFrame.frameRate,s.sendResolutionHeight=u.sentFrame.height,s.sendResolutionWidth=u.sentFrame.width):d&&(s.sendResolutionWidth=d.width,s.sendResolutionHeight=d.height),u.avgEncodeMs&&(s.encodeDelay=u.avgEncodeMs),f&&f.bitrateMax&&(s.targetSendBitrate=1e3*f.bitrateMax),s.sendPackets=u.packets,s.sendPacketsLost=u.packetsLost,s.sendJitterMs=u.jitterMs,s.sendRttMs=u.rttMs,s.totalDuration=a?a.totalDuration+1:1,s.totalFreezeTime=a?a.totalFreezeTime:0,this.isLocalVideoFreeze(u)&&(s.totalFreezeTime+=1),u.scalabilityMode&&this.scalabilityMode!==u.scalabilityMode&&(w.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(u.scalabilityMode)),this.scalabilityMode=u.scalabilityMode)}this.trafficStats&&(s.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var o;this.localStats.set(n,s),((a==null?void 0:a.sendResolutionWidth)!==s.sendResolutionWidth||(a==null?void 0:a.sendResolutionHeight)!==s.sendResolutionHeight)&&((o=this.onStatsChanged)===null||o===void 0||o.call(this,"resolution",{width:s.sendResolutionWidth,height:s.sendResolutionHeight})),s&&l&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,l.track,s);break}case oe.LocalAudioTrack:{let a=i,s=Td({},mk),c=t.getStats(),l=t.getLocalMedia(n);if(c){let u=c.audioSend.find(d=>d.ssrc===(l==null?void 0:l.ssrcs[0].ssrcId));if(u){if(u.codec!=="opus"&&u.codec!=="aac"&&u.codec!=="PCMU"&&u.codec!=="PCMA"&&u.codec!=="G722"||(s.codecType=u.codec),u.inputLevel)s.sendVolumeLevel=Math.round(32767*u.inputLevel);else{let d=t.getLocalAudioVolume();d&&(s.sendVolumeLevel=Math.round(32767*d))}s.sendBytes=u.bytes,s.sendPackets=u.packets,s.sendPacketsLost=u.packetsLost,s.sendJitterMs=u.jitterMs,s.sendRttMs=u.rttMs,s.sendBitrate=a?8*Math.max(0,s.sendBytes-a.sendBytes):0}}this.trafficStats&&(s.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(oe.LocalAudioTrack,s),s&&l&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,l.track,s);break}}})}updateRemoteStats(t){Array.from(this.remoteStats.entries()).forEach(r=>{var n,i;let[o,{videoStats:a,audioStats:s,videoPcStats:c}]=r,l=s,u=a,d=c,f=Td({},ite),p=Td({},ote),m=Td({},p6e),{audioTrack:g,videoTrack:y,audioSSRC:v,videoSSRC:E}=t.getRemoteMedia(o),b;b=t instanceof wo?t.getStats(!0):t.getStats();let S=(n=b)===null||n===void 0?void 0:n.audioRecv.find(D=>D.ssrc===v),A=(i=b)===null||i===void 0?void 0:i.videoRecv.find(D=>D.ssrc===E),N=this.trafficStats&&this.trafficStats.peer_delay.find(D=>D.peer_uid===o);if(S&&(S.codec!=="opus"&&S.codec!=="aac"&&S.codec!=="PCMU"&&S.codec!=="PCMA"&&S.codec!=="G722"||(f.codecType=S.codec),S.outputLevel?f.receiveLevel=Math.round(32767*S.outputLevel):g&&(f.receiveLevel=Math.round(32767*g.getVolumeLevel())),f.receiveBytes=S.bytes,f.receivePackets=S.packets,f.receivePacketsLost=S.packetsLost,f.receivePacketsDiscarded=S.packetsDiscarded,f.packetLossRate=f.receivePacketsLost/(f.receivePackets+f.receivePacketsLost),f.receiveBitrate=l?8*Math.max(0,f.receiveBytes-l.receiveBytes):0,f.totalDuration=l?l.totalDuration+1:1,f.totalFreezeTime=l?l.totalFreezeTime:0,f.freezeRate=f.totalFreezeTime/f.totalDuration,f.receiveDelay=S.jitterBufferMs,f.totalDuration>10&&xk.isRemoteAudioFreeze(g)&&(f.totalFreezeTime+=1)),A){A.codec!=="H264"&&A.codec!=="H265"&&A.codec!=="VP8"&&A.codec!=="VP9"&&A.codec!=="AV1X"&&A.codec!=="AV1"||(p.codecType=A.codec),p.receiveBytes=A.bytes,p.receiveBitrate=u?8*Math.max(0,p.receiveBytes-u.receiveBytes):0,p.decodeFrameRate=A.decodeFrameRate<0?0:A.decodeFrameRate,p.renderFrameRate=A.decodeFrameRate<0?0:A.decodeFrameRate,A.outputFrame&&(p.renderFrameRate=A.outputFrame.frameRate),A.receivedFrame?(p.receiveFrameRate=A.receivedFrame.frameRate,p.receiveResolutionHeight=A.receivedFrame.height,p.receiveResolutionWidth=A.receivedFrame.width):y&&(p.receiveResolutionHeight=y._videoHeight||0,p.receiveResolutionWidth=y._videoWidth||0),A.framesRateFirefox!==void 0&&(p.receiveFrameRate=Math.round(A.framesRateFirefox)),p.receivePackets=A.packets,p.receivePacketsLost=A.packetsLost,p.packetLossRate=p.receivePacketsLost/(p.receivePackets+p.receivePacketsLost),p.totalDuration=u?u.totalDuration+1:1,p.totalFreezeTime=u?u.totalFreezeTime:0,p.receiveDelay=A.jitterBufferMs||0;let D=!!E&&t.getRemoteVideoIsReady(E);y&&D&&xk.isRemoteVideoFreeze(y,A,d)&&(p.totalFreezeTime+=1),p.freezeRate=p.totalFreezeTime/p.totalDuration}N&&(f.end2EndDelay=N.B_ad,p.end2EndDelay=N.B_vd,f.transportDelay=N.B_ed,p.transportDelay=N.B_ed,f.currentPacketLossRate=N.B_ealr4/100,p.currentPacketLossRate=N.B_evlr4/100,m.uplinkNetworkQuality=N.B_punq?N.B_punq:0,m.downlinkNetworkQuality=N.B_pdnq?N.B_pdnq:0),this.remoteStats.set(o,{audioStats:f,videoStats:p,videoPcStats:A,networkStats:m}),g&&this.exceptionMonitor.setRemoteAudioStats(g,f),y&&this.exceptionMonitor.setRemoteVideoStats(y,p)})}},Xte=class{constructor(){I(this,"destChannelMediaInfos",new Map),I(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){ZB(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){ZB(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){uC(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}};function Q$(e){if(!(e instanceof Xte))return new q(O.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();let t=e.getSrcChannelMediaInfo(),r=e.getDestChannelMediaInfo();if(!t)return new q(O.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(r.size===0)return new q(O.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}function Z$(e){var t={},r=!1;function n(i,o){return r=!0,{done:!1,value:new HL(o=new Tk(function(a){a(e[i](o))}),1)}}return t[ap!==void 0&&nee||"@@iterator"]=function(){return this},t.next=function(i){return r?(r=!1,i):n("next",i)},typeof e.throw=="function"&&(t.throw=function(i){if(r)throw r=!1,i;return n("throw",i)}),typeof e.return=="function"&&(t.return=function(i){return r?(r=!1,i):n("return",i)}),t}var r8e=jr(Bte);function eH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eH(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Xt;function rH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function y_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rH(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Dg=(Xt=class Zg extends Wee{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map(t=>t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").filter(t=>{var r;return me(r=Object.keys(lC)).call(r,t)}))]}constructor(t,r){super(t,r),I(this,"store",void 0),I(this,"peerConnection",void 0),I(this,"remoteSDP",void 0),I(this,"initialOffer",void 0),I(this,"statsFilter",void 0),I(this,"useRTX",!1),I(this,"localCapabilities",void 0),I(this,"localCandidateCount",0),I(this,"allCandidatesReceived",!1),I(this,"establishPromise",void 0),I(this,"mutex",new ii("P2PConnection-mutex")),this.store=r,this.peerConnection=new RTCPeerConnection(Zg.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=GL(this.peerConnection,L("STATS_UPDATE_INTERVAL"),void 0,Rr()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{let t=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!t.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let r=Ru(t.sdp),n=L0(t.sdp,{filterRTX:!this.useRTX,filterVideoFec:L("FILTER_VIDEO_FEC"),filterAudioFec:L("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=n,this.initialOffer=t,y_(y_({},r),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:n},offerSDP:t.sdp})}catch(t){throw new J(O.GET_LOCAL_CONNECTION_PARAMS_FAILED,t.toString())}}async updateRemoteConnect(){}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(n){I(this,"sessionDesc",void 0),I(this,"localCapabilities",void 0),I(this,"rtpCapabilities",void 0),I(this,"candidates",void 0),I(this,"iceParameters",void 0),I(this,"dtlsParameters",void 0),I(this,"setup",void 0),I(this,"currentMidIndex",void 0),I(this,"cname",void 0),n=Vr(n);let{iceParameters:i,dtlsParameters:o,candidates:a,rtpCapabilities:s,setup:c,localCapabilities:l,sdkCodec:u,cname:d}=n,f=Pn.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=s,this.candidates=a,this.iceParameters=i,this.dtlsParameters=o,this.setup=c,this.localCapabilities=l,this.cname=d;for(let p=0;p<f.mediaDescriptions.length;p++){let m=f.mediaDescriptions[p];if(m.attributes.iceUfrag=i.iceUfrag,m.attributes.icePwd=i.icePwd,m.attributes.fingerprints=o.fingerprints,m.attributes.candidates=a,m.attributes.setup=c,m.media.mediaType==="video"){m.media.fmts=s.videoCodecs.map(y=>y.payloadType.toString(10));let g=s.videoCodecs.filter(y=>{var v,E;return(v=y.rtpMap)===null||v===void 0?void 0:me(E=v.encodingName.toLowerCase()).call(E,u)});g.length===0&&(g=s.videoCodecs),m.attributes.payloads=g,m.attributes.extmaps=s.videoExtensions}m.media.mediaType==="audio"&&(m.media.fmts=s.audioCodecs.map(g=>g.payloadType.toString(10)),m.attributes.payloads=s.audioCodecs,m.attributes.extmaps=s.audioExtensions),f.mediaDescriptions[p]=this.mungMediaDesc(m)}this.sessionDesc=f,this.currentMidIndex=f.mediaDescriptions.length-1}toString(){return Pn.print(this.sessionDesc)}send(n,i,o){let{ssrcs:a,ssrcGroups:s}=Ud(i,this.cname),c=this.sessionDesc.mediaDescriptions.find(d=>n===Ce.VIDEO?d.media.mediaType==="video":d.media.mediaType==="audio"),l=a[0].attributes.label,u=a[0].attributes.mslabel;return c.attributes.ssrcs=c.attributes.ssrcs.concat(a),c.attributes.ssrcGroups=c.attributes.ssrcGroups.concat(s),{id:l,mslabel:u}}batchSend(n){return n.map(i=>{let{kind:o,ssrcMsg:a}=i;return this.send(o,a,void 0)})}stopSending(n){this.sessionDesc.mediaDescriptions.forEach(i=>{let o=[],a=[],s=[];i.attributes.ssrcs.forEach(c=>{me(n).call(n,c.attributes.label||"")?s.push(c):o.push(c)}),i.attributes.ssrcGroups.forEach(c=>{var l;me(l=s.map(u=>u.ssrcId)).call(l,c.ssrcIds[0])||a.push(c)}),i.attributes.ssrcs=o,i.attributes.ssrcGroups=a})}mute(n){let i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(n){let i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}receive(n,i,o){n.forEach((a,s)=>{let c=a._mediaStreamTrack,l=this.sessionDesc.mediaDescriptions.findIndex(d=>d.attributes.mid===c.kind),u=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[l],a);this.sessionDesc.mediaDescriptions[l]=u})}stopReceiving(n){}updateCandidates(n){n===Ro.TCP?this.candidates.forEach(i=>{this.candidates.findIndex(o=>o.transport==="tcp"&&o.connectionAddress===i.connectionAddress&&o.port===i.port)===-1&&this.candidates.push(tH(tH({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this.candidates=this.candidates.filter(i=>i.transport!=="tcp");for(let i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(n){n=Vr(n),this.iceParameters=n,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=n.iceUfrag,i.attributes.icePwd=n.icePwd})}predictReceivingMids(n){let i=[];for(let o=0;o<n;o++)i.push((this.currentMidIndex+o+1).toString(10));return i}mungRecvMediaDsec(n,i){let o=Vr(n);return um(o,i),UL(o,i),o}updateRecvMedia(n,i){let o=this.sessionDesc.mediaDescriptions.findIndex(a=>a.attributes.mid===n);if(o!==-1){let a=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[o],i);this.sessionDesc.mediaDescriptions[o]=a}}bumpMid(n){this.currentMidIndex+=n}updateTrackLabel(n,i,o){let a=this.sessionDesc.mediaDescriptions.find(c=>n===Ce.VIDEO?c.attributes.mid==="video":c.attributes.mid==="audio");if(a){let c=a.attributes.ssrcs.find(l=>l.attributes.label===i);var s;c&&(c.attributes.label=o,(s=c.attributes.msid)===null||s===void 0||s.replace(i,o))}}mungMediaDesc(n){let i=Vr(n);return jL(i),function(o){let a=o.attributes.extmaps.find(s=>s.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");a&&o.attributes.extmaps.splice(o.attributes.extmaps.indexOf(a),1),o.attributes.payloads.forEach(s=>{let c=s.rtcpFeedbacks.findIndex(l=>l.type==="transport-cc");c!==-1&&s.rtcpFeedbacks.splice(c,1)})}(i),i}getSSRC(n){for(let i of this.sessionDesc.mediaDescriptions)for(let o of i.attributes.ssrcs)if(o.attributes.label===n)return[o]}}(y_(y_({},t),{},{rtpCapabilities:t.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));let r=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}}async updateRemoteRTPCapabilities(t,r){throw new J(O.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}getPreMedia(t){}send(t,r){var n=this;return Ws(function*(){let i=yield It(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let o=t.map(f=>n.peerConnection.addTrack(f._mediaStreamTrack)),a=yield It(n.peerConnection.createOffer()),s=Pn.parse(a.sdp),c=t.map(f=>{let p=f._mediaStreamTrack,m=s.mediaDescriptions.find(g=>g.attributes.mid===p.kind);if(!m)throw new Error("Cannot extract ssrc from mediaDescription.");return function(g,y,v){let E=g.attributes.ssrcs.filter(S=>S.attributes.label===y),b=g.attributes.ssrcGroups;if(E.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(b&&E.length>1){let S=b.find(A=>A.ssrcIds.indexOf(E[0].ssrcId)!==-1);return S?[{ssrcId:S.ssrcIds[0],rtx:v?S.ssrcIds[1]:void 0}]:[{ssrcId:E[0].ssrcId}]}return[{ssrcId:E[0].ssrcId}]}(m,p.id,n.useRTX)}),l;try{l=yield c}catch(f){throw o.forEach(p=>{Wn()&&p.replaceTrack(null),n.peerConnection.removeTrack(p)}),f}let u=n.mungSendOfferSDP(a.sdp,t);n.remoteSDP.receive(t,r,l);let d=n.remoteSDP.toString();return yield It(n.peerConnection.setLocalDescription({type:"offer",sdp:u})),yield It(n.applySendEncodings(o,t)),yield It(n.peerConnection.setRemoteDescription({type:"answer",sdp:d})),t.map((f,p)=>{let m=f._mediaStreamTrack.id;return{localSSRC:c[p],id:m}})}catch(o){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(o.toString()))}finally{i()}})()}async stopSending(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let r=this.peerConnection.getSenders().filter(o=>{var a;return t.indexOf(((a=o.track)===null||a===void 0?void 0:a.id)||"")!==-1});if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");r.map(o=>{Wn()&&o.replaceTrack(null),this.peerConnection.removeTrack(o)});let n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(t);let i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(r.toString()))}}async receive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{id:o,mslabel:a}=this.remoteSDP.send(t,r,i),s=new he((u,d)=>{let f=setTimeout(()=>{d(new Error("Cannot receive track, id: ".concat(o)))},1e4),p=m=>{let g=St();if((g.name==="Safari"&&Number(g.version)===11||Ui())&&m.track.id!==o&&m.streams[0].id===a){var y;let v=m.streams[0].getTracks()[0];return(y=this.remoteSDP)===null||y===void 0||y.updateTrackLabel(t,o,m.track.id),this.peerConnection.removeEventListener("track",p),clearTimeout(f),void u(v)}if(m.track.id===o)return this.peerConnection.removeEventListener("track",p),clearTimeout(f),void u(m.track)};this.peerConnection.addEventListener("track",p)}),c=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:c});let l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),{track:await s,id:o}}catch(o){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(t);let r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}async muteRemote(t){}async unmuteRemote(t){}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let r=this.peerConnection.getSenders().filter(n=>{var i;return t.indexOf(((i=n.track)===null||i===void 0?void 0:i.id)||"")!==-1});if(r.length!==t.length)throw new Error("sender' length doesn't match mids' length.");r.map(n=>{if(Wn()&&n.track)n.track.enabled=!1;else{let i=n.getParameters();i.encodings.forEach(o=>o.active=!1),n.setParameters(i)}})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(r.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let r=this.peerConnection.getSenders().filter(o=>{var a;return t.indexOf(((a=o.track)===null||a===void 0?void 0:a.id)||"")!==-1});if(r.length!==t.length)throw new Error("Senders' length doesn't match mids' length.");r.map(async o=>{if(Wn()&&o.track)o.track.enabled=!0;else{let a=o.getParameters();a.encodings.forEach(s=>s.active=!0),await o.setParameters(a)}});let n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);let i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(r.toString()))}}restartICE(t){var r=this;return Ws(function*(){let n=yield It(r.mutex.lock("From P2PConnection.restartICE"));try{if(!r.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Ct().supportPCSetConfiguration){let c=r.peerConnection.getConfiguration(),l=t===Ro.RELAY?"relay":"all";c.iceTransportPolicy!==l&&(w.debug("[".concat(r.store.clientId,"] restartICE change iceTransportPolicy from [").concat(c.iceTransportPolicy,"] to [").concat(l,"]")),c.iceTransportPolicy=l,r.peerConnection.setConfiguration(c))}else if(t===Ro.RELAY)return;t!==Ro.RELAY&&r.remoteSDP.updateCandidates(t);let i=yield It(r.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let o=Ru(i.sdp),{remoteIceParameters:a}=yield o.iceParameters;r.remoteSDP.restartICE(a);let s=r.remoteSDP.toString();yield It(r.peerConnection.setLocalDescription(i)),yield It(r.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(i){w.warning("[".concat(r.store.clientId,"] restart ICE failed, abort operation"),i)}finally{n()}})()}close(){var t;this.peerConnection.close(),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[r]);this.remoteSDP.updateRecvMedia(r._mediaStreamTrack.kind,r);let o=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new J(O.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(t,r){let n=this.peerConnection.getSenders().filter(i=>{var o;return((o=i.track)===null||o===void 0?void 0:o.id)===t});n.length===1&&await this.applySendEncodings(n,[r])}setStatsRemoteVideoIsReady(t,r){this.statsFilter.setVideoIsReady2(t,r)}async replaceTrack(t,r){let n=this.peerConnection.getSenders().find(i=>{var o;return((o=i.track)===null||o===void 0?void 0:o.id)===r});n&&await n.replaceTrack(t._mediaStreamTrack)}createDataChannels(t,r){throw new J(O.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(t){throw new J(O.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t;(t=this.onICEConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=t=>{t.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},L("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){let r={iceServers:[],sdpSemantics:"plan-b"};return t.iceServers?r.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(aC(t.turnServer.servers)?r.iceServers=t.turnServer.servers:(r.iceServers&&r.iceServers.push(...Zg.turnServerConfigToIceServers(t.turnServer.servers)),L("USE_TURN_SERVER_OF_GATEWAY")&&r.iceServers&&t.turnServer.serversFromGateway&&r.iceServers.push(...Zg.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(n=>{n.forceturn&&(r.iceTransportPolicy="relay")}))),r}static turnServerConfigToIceServers(t){let r=[];return t.forEach(n=>{n.security?n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turns:".concat(n.turnServerURL,":").concat(n.tcpport,"?transport=tcp")}):(n.udpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.udpport,"?transport=udp")}),n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.tcpport,"?transport=tcp")}))}),r}async updateRtpSenderEncodings(t,r){var n;if(r||(r=this.peerConnection.getSenders().find(l=>{var u;return((u=l.track)===null||u===void 0?void 0:u.id)===t._mediaStreamTrack.id})),!r)return w.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(!Ct().supportSetRtpSenderParameters)return w.warn("Browser not support set rtp-sender parameters");let i={},o={};if(t instanceof ir)switch(t._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(L("DSCP_TYPE")&&Qu()){var a;let l=L("DSCP_TYPE");me(a=["very-low","low","medium","high"]).call(a,l)&&(o.networkPriority=l)}let s=r.getParameters(),c=(n=s.encodings)===null||n===void 0?void 0:n[0];c&&Object.assign(c,o),Object.assign(s,i),w.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(s.encodings))),await r.setParameters(s)}async applySendEncodings(t,r){try{if(!Ct().supportSetRtpSenderParameters||t.length!==r.length)return;for(let n=0;n<t.length;n++){let i=t[n],o=r[n];i&&o&&await this.updateRtpSenderEncodings(o,i)}}catch{w.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,r){let n=Pn.parse(t);return r.forEach((i,o)=>{let a=i._mediaStreamTrack,s=n.mediaDescriptions.find(c=>c.attributes.mid===a.kind);s&&um(s,i)}),Pn.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var r;(r=this.onFirstAudioReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var r;(r=this.onFirstVideoReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var r;(r=this.onFirstAudioDecoded)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,r,n)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,r,n)},this.statsFilter.onSelectedLocalCandidateChanged=(t,r)=>{var n;(n=this.onSelectedLocalCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,r)=>{var n;(n=this.onSelectedRemoteCandidateChanged)===null||n===void 0||n.call(this,t,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");let r=this.remoteSDP.batchSend(t).map((o,a)=>{let{id:s,mslabel:c}=o,{kind:l}=t[a];return new he((u,d)=>{let f=setTimeout(()=>{d(new Error("Cannot receive track, id: ".concat(s)))},1e4),p=m=>{let g=St();if(g.name==="Safari"&&Number(g.version)===11&&m.track.id!==s&&m.streams[0].id===c){var y;let v=m.streams[0].getTracks()[0];return(y=this.remoteSDP)===null||y===void 0||y.updateTrackLabel(l,s,m.track.id),this.peerConnection.removeEventListener("track",p),clearTimeout(f),void u({track:v,id:s})}if(m.track.id===s)return this.peerConnection.removeEventListener("track",p),clearTimeout(f),void u({track:m.track,id:s})};this.peerConnection.addEventListener("track",p)})}),n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});let i=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(i),await he.all(r)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(r.toString()))}}async getRemoteSSRC(t){if(!this.remoteSDP)return;let r=this.remoteSDP.getSSRC(t);return r==null?void 0:r[0].ssrcId}setConfiguration(t){if(Ct().supportPCSetConfiguration){let r=Zg.resolvePCConfiguration(t);this.peerConnection.setConfiguration(r)}}},_e(Xt.prototype,"connect",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"connect"),Xt.prototype),_e(Xt.prototype,"stopSending",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"stopSending"),Xt.prototype),_e(Xt.prototype,"receive",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"receive"),Xt.prototype),_e(Xt.prototype,"stopReceiving",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"stopReceiving"),Xt.prototype),_e(Xt.prototype,"muteRemote",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"muteRemote"),Xt.prototype),_e(Xt.prototype,"unmuteRemote",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"unmuteRemote"),Xt.prototype),_e(Xt.prototype,"muteLocal",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"muteLocal"),Xt.prototype),_e(Xt.prototype,"unmuteLocal",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"unmuteLocal"),Xt.prototype),_e(Xt.prototype,"close",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"close"),Xt.prototype),_e(Xt.prototype,"updateEncoderConfig",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"updateEncoderConfig"),Xt.prototype),_e(Xt.prototype,"updateSendParameters",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"updateSendParameters"),Xt.prototype),_e(Xt.prototype,"replaceTrack",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"replaceTrack"),Xt.prototype),_e(Xt.prototype,"getRemoteSSRC",[ha],Object.getOwnPropertyDescriptor(Xt.prototype,"getRemoteSSRC"),Xt.prototype),Xt);function ha(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,o=await i.lock("Locking from P2PConnection.".concat(t));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await n.apply(this,s)}finally{o()}},r}function nH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Zl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nH(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Lg="9",iH=4e4,n8e=class{get localCapabilities(){return Vr(this._localCapabilities)}get rtpCapabilities(){return Vr(this._rtpCapabilities)}get candidates(){return Vr(this._candidates)}get iceParameters(){return Vr(this._iceParameters)}get dtlsParameters(){return Vr(this._dtlsParameters)}constructor(e){I(this,"sessionDesc",void 0),I(this,"_localCapabilities",void 0),I(this,"_rtpCapabilities",void 0),I(this,"_candidates",void 0),I(this,"_iceParameters",void 0),I(this,"_dtlsParameters",void 0),I(this,"setup",void 0),I(this,"currentMidIndex",void 0),I(this,"cname",void 0),I(this,"firefoxSsrcMidMap",new Map),e=Vr(e);let{iceParameters:t,dtlsParameters:r,candidates:n,rtpCapabilities:i,setup:o,localCapabilities:a,cname:s}=e;this._rtpCapabilities=i,this._candidates=n,this._iceParameters=t,this._dtlsParameters=r,this._localCapabilities=a,this.setup=o,this.cname=s,this.sessionDesc=this.updateRemoteRTPCapabilities(i),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}preloadRemoteMedia(e){let t=this.candidates,r=this.dtlsParameters,n=this.iceParameters,i=this.rtpCapabilities.send,o=this.sessionDesc.mediaDescriptions.length-1;for(let a=1;a<e;a++){let s=2*a+2e4,c=2*a+iH,{ssrcs:l,ssrcGroups:u}=Ud([{ssrcId:s}],this.cname),{ssrcs:d,ssrcGroups:f}=Ud([{ssrcId:c,rtx:L("USE_SUB_RTX")?c+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:Lg,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map(p=>p.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:r.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:f,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:Lg,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map(p=>p.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:r.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++o)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return Pn.print(this.sessionDesc)}send(e,t,r,n){let{ssrcs:i,ssrcGroups:o}=Ud(t,this.cname,L("SYNC_GROUP")?r:void 0),a=this.findPreloadMediaDesc(i);if(a){if(Rr()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,a.attributes.mid),n&&(n.twcc||n.remb)){let s=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[s]=this.mungSendMediaDesc(a,n),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{let s=this.findAvailableMediaIndex(e,i),c;return s===-1||s===1&&(Wn()||function(){let l=St();return!(l.name!==Mt.CHROME||!l.osVersion)&&Number(l.version)<=90}())||s===0&&L("USE_SUB_RTX")||NB()?(c=this.createOrRecycleSendMedia(e,i,o,"sendonly",n),this.updateBundleMids()):(c=Vr(this.sessionDesc.mediaDescriptions[s]),c.attributes.direction="sendonly",c.attributes.ssrcs=i,c.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[s]=this.mungSendMediaDesc(c,n)),Rr()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,c.attributes.mid),{mid:c.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){let{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){let t=e.map(i=>{let{kind:o,ssrcMsg:a,mslabel:s}=i;return this.send(o,a,s)}),r=[],n=!1;return t.forEach(i=>{let{mid:o,needExchangeSDP:a}=i;a&&(n=!0),r.push(o)}),{mids:r,needExchangeSDP:n}}stopSending(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>r.attributes.mid&&e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach(r=>{r.attributes.mid==="0"||Rr()||NB()?r.attributes.ssrcs=[]:(r.attributes.ssrcs=[],r.attributes.direction="inactive",r.media.port="0")}),this.updateBundleMids()}mute(e){let t=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){let t=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>me(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="inactive"})}unmuteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>me(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="recvonly"})}receive(e,t,r,n){e.forEach((i,o)=>{this.createOrRecycleRecvMedia(i,[],"recvonly",t,r,n[o])}),this.updateBundleMids()}stopReceiving(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach(r=>{r.media.port="0",r.attributes.direction="inactive"}),this.updateBundleMids()}updateRemoteRTPCapabilities(e){let t=this.sessionDesc||Pn.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=e;let r=this.rtpCapabilities.send,n=this.localCapabilities.send;for(let i of t.mediaDescriptions){if(i.attributes.iceUfrag=this._iceParameters.iceUfrag,i.attributes.icePwd=this._iceParameters.icePwd,i.attributes.fingerprints=this._dtlsParameters.fingerprints,i.attributes.candidates=this._candidates,i.attributes.setup=this.setup,i.media.mediaType==="application"&&(i.attributes.sctpPort="5000"),i.media.mediaType==="video"){if(r.videoCodecs.length===0){let o=n.videoCodecs.filter(a=>{var s,c;return(s=a.rtpMap)===null||s===void 0?void 0:me(c=s.encodingName.toLowerCase()).call(c,"vp8")})||[n.videoCodecs[0]];i.media.fmts=o.map(a=>a.payloadType.toString(10)),i.attributes.payloads=o,i.attributes.extmaps=[]}else if(i.media.fmts=r.videoCodecs.map(o=>o.payloadType.toString(10)),i.attributes.payloads=r.videoCodecs,i.attributes.extmaps=r.videoExtensions,L("PRELOAD_MEDIA_COUNT")>0){let{ssrcs:o,ssrcGroups:a}=Ud([{ssrcId:iH,rtx:L("USE_SUB_RTX")?40001:void 0}],this.cname);i.attributes.ssrcs=o,i.attributes.ssrcGroups=a}}if(i.media.mediaType==="audio"){if(r.audioCodecs.length===0){let o=n.audioCodecs.filter(a=>{var s,c;return(s=a.rtpMap)===null||s===void 0?void 0:me(c=s.encodingName.toLowerCase()).call(c,"opus")})||[n.audioCodecs[0]];i.media.fmts=o.map(a=>a.payloadType.toString(10)),i.attributes.payloads=o,i.attributes.extmaps=[]}else if(i.media.fmts=r.audioCodecs.map(o=>o.payloadType.toString(10)),i.attributes.payloads=r.audioCodecs,i.attributes.extmaps=r.audioExtensions,dm(i),L("PRELOAD_MEDIA_COUNT")>0){let{ssrcs:o,ssrcGroups:a}=Ud([{ssrcId:2e4}],this.cname);i.attributes.ssrcs=o,i.attributes.ssrcGroups=a}}}return this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1,this.sessionDesc}updateCandidates(e){let t=this._candidates.filter(r=>r.transport==="udp");if(e===Ro.TCP){if(t.length===0)return;if(L("TCP_CANDIDATE_ONLY")){let r=this._candidates.filter(n=>n.transport==="tcp");t.forEach(n=>{r.findIndex(i=>i.connectionAddress===n.connectionAddress)===-1&&r.push(Zl(Zl({},n),{},{foundation:"tcpcandidate",priority:Number(n.priority)-1+"",transport:"tcp",port:Number(n.port)+90+""}))}),this._candidates=r}else{let r=[];t.forEach(n=>{r.push(Zl(Zl({},n),{},{foundation:"tcpcandidate",priority:Number(n.priority)-1+"",transport:"tcp",port:Number(n.port)+90+""}))}),this._candidates=[...t,...r]}}else if(e===Ro.RELAY){if(t.length!==0)return;{let r=this._candidates.filter(n=>n.transport==="tcp");r.forEach(n=>{t.push(Zl(Zl({},n),{},{foundation:"udpcandidate",priority:Number(n.priority)+1+"",transport:"udp",port:Number(n.port)-90+""}))}),this._candidates=[...t,...r]}}else t.length===0?(this._candidates.filter(r=>r.transport==="tcp").forEach(r=>{t.push(Zl(Zl({},r),{},{foundation:"udpcandidate",priority:Number(r.priority)+1+"",transport:"udp",port:Number(r.port)-90+""}))}),this._candidates=t):this._candidates=this._candidates.filter(r=>r.transport!=="tcp");for(let r of this.sessionDesc.mediaDescriptions)r.attributes.candidates=this.candidates}restartICE(e){e=Vr(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd})}predictReceivingMids(e){let t=[];for(let r=0;r<e;r++)t.push((this.currentMidIndex+r+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex(r=>{let n=r.media.mediaType===e&&r.media.port!=="0"&&(r.attributes.direction==="sendonly"||r.attributes.direction==="sendrecv")&&r.attributes.ssrcs.length===0;if(Rr()){if(n){let i=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(i||r.attributes.mid!=="0"&&r.attributes.mid!=="1")||!(!i||i!==r.attributes.mid)}return!1}return n})}createOrRecycleDataChannel(){for(let r of this.sessionDesc.mediaDescriptions)if(r.media.mediaType==="application")return{mediaDesc:r,needExchangeSDP:!1};this.currentMidIndex+=1;let e="".concat(this.currentMidIndex),t={media:{mediaType:"application",port:Lg,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(e),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,r,n,i,o){let a=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,c=Ny(a,s,this.localCapabilities.send,a===Ce.VIDEO?n:i),l=a===Ce.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;let u="".concat(this.currentMidIndex),d={media:{mediaType:a,port:Lg,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map(p=>p.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(u)}};d=this.mungRecvMediaDsec(d,e,o);let f=this.findFirstClosedMedia(a);if(f){let p=this.sessionDesc.mediaDescriptions.indexOf(f);this.sessionDesc.mediaDescriptions[p]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}updateRemoteCodec(e,t,r){let n=[...new Set(this._rtpCapabilities.recv.videoCodecs.map(d=>d.rtpMap&&d.rtpMap.encodingName.toLowerCase()||"").filter(d=>{var f;return me(f=Object.keys(lC)).call(f,d)}))],i=new Set(t);if(n.every(d=>i.has(d)))return w.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;let o=this._rtpCapabilities.recv.videoCodecs.filter(d=>t.some(f=>{var p;return me(p=d.rtpMap&&d.rtpMap.encodingName.toLowerCase()||"").call(p,f)}));if(o.length===0)return w.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(n," codecs: ").concat(t)),!1;let a=[...new Set(o.map(d=>d.rtpMap&&d.rtpMap.encodingName.toLowerCase()||""))],s;if(w.debug("updateRemoteCodec, from ".concat(n," to ").concat(a)),e.length===0)s=this.sessionDesc.mediaDescriptions.filter(d=>d.media.mediaType==="video"&&d.attributes.direction==="recvonly");else if(s=this.sessionDesc.mediaDescriptions.filter(d=>d.attributes.mid&&me(e).call(e,d.attributes.mid)&&d.attributes.direction==="recvonly"),s.length!==e.length)return w.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;if(L("USE_PUB_RTX")||L("USE_SUB_RTX")){let d=FL(o,this.rtpCapabilities.recv.videoCodecs);o.push(...d)}this._rtpCapabilities.recv.videoCodecs=o;let c=this.localCapabilities.send,l=this.rtpCapabilities.recv,u=Ny(Ce.VIDEO,l,c,r);return s.forEach(d=>{let f=u.map(p=>p.payloadType.toString(10));w.debug("updateRemoteCodec mid: ".concat(d.attributes.mid,", from ").concat(d.attributes.payloads," to ").concat(u)),d.attributes.payloads=u,d.media.fmts=f}),!0}createOrRecycleSendMedia(e,t,r,n,i){let o=this.rtpCapabilities.send,a=e===Ce.VIDEO?o.videoCodecs:o.audioCodecs,s=e===Ce.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;let c="".concat(this.currentMidIndex),l={media:{mediaType:e,port:Lg,protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map(d=>d.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:r,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};l=this.mungSendMediaDesc(l,i);let u=this.findFirstClosedMedia(e);if(u){let d=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[d]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>e.media.port!=="0").map(e=>e.attributes.mid)}mungRecvMediaDsec(e,t,r){let n=Vr(e);return jL(n),um(n,t),UL(n,t),kte(n),sS(n,r,this.localCapabilities.send),n}mungSendMediaDesc(e,t){let r=Vr(e);return sS(r,t,this.localCapabilities.recv),dm(r),r}updateRecvMedia(e,t){let r=this.sessionDesc.mediaDescriptions.findIndex(n=>n.attributes.mid===e);if(r!==-1){let n=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],t);this.sessionDesc.mediaDescriptions[r]=n}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(t=>Rr()?t.media.port==="0"&&t.media.mediaType===e:t.media.port==="0")}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(t=>{var r;return((r=t.attributes)===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId)===e[0].ssrcId})}getSSRC(e){var t;return(t=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e))===null||t===void 0?void 0:t.attributes.ssrcs}};function oH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oH(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Oy=function(e){return e.BANDWIDTH="bandwidth",e.CPU="cpu",e.NONE="none",e.OTHER="other",e}({}),Dp=function(e){return e[e.DOWN=0]="DOWN",e[e.UP=1]="UP",e}(Dp||{}),lS=new Map;function aH(e,t,r,n){let{scale:i}=e;if(i===0&&n===Dp.UP||i>=t.length-1&&n===Dp.DOWN)return e;let o=ol(ol({},e),{},{scale:n===Dp.DOWN?++i:--i});switch(r){case"maintain-framerate":o=ol(ol({},o),t[i].motion);break;case"maintain-resolution":o=ol(ol({},o),t[i].detail);break;case"balanced":o=ol(ol({},o),t[i].balanced)}return o}function Jte(e,t){if(t){let r={overUse:0,underUse:0,adaptationList:Qte(t)};lS.set(e,r)}else lS.delete(e)}function Qte(e){let t=ol({},e),{bitrateMax:r,frameRate:n,scaleResolutionDownBy:i,bitrateMin:o}=t,{MIN_FRAME_RATE:a,MAX_THRESHOLD_FRAMERATE:s,MAX_SCALE:c,BITRATE_MIN_THRESHOLD:l,BITRATE_MAX_THRESHOLD:u,BWE_SCALE_UP_THRESHOLD:d,BWE_SCALE_DOWN_THRESHOLD:f,PERF_SCALE_DOWN_THRESHOLD:p,PERF_SCALE_UP_THRESHOLD:m,BALANCE_BITRATE_FACTOR:g,BALANCE_FRAMERATE_FACTOR:y,BALANCE_RESOLUTION_FACTOR:v,MOTION_RESOLUTION_FACTOR:E,MOTION_BITRATE_FACTOR:b,DETAIL_FRAMERATE_FACTOR:S,DETAIL_BITRATE_FACTOR:A}=CL,N=Math.min(t.frameRate,s),D=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(f,1)*r),bwe_up:r,fps_down:Math.round(Math.pow(p,1)*N),fps_up:n},balanced:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:r,bitrateMin:o},motion:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:r,bitrateMin:o},detail:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:r,bitrateMin:o}}];for(let M=1;M<=c;M++){let H={bwe_up:Math.round(Math.pow(d,M)*r),bwe_down:Math.round(Math.pow(f,M+1)*r),fps_up:Math.round(Math.pow(m,M)*N),fps_down:Math.round(Math.pow(p,M+1)*N)},V={scaleResolutionDownBy:i/Math.pow(v,M),frameRate:Math.max(Math.round(Math.pow(y,M)*n),a),bitrateMax:Math.max(Math.round(Math.pow(g,M)*r),u),bitrateMin:Math.max(Math.round(Math.pow(g,M)*o),l)},G={scaleResolutionDownBy:i/Math.pow(E,M),frameRate:n,bitrateMax:Math.max(Math.round(Math.pow(b,M)*r),u),bitrateMin:Math.max(Math.round(Math.pow(b,M)*o),l)},Y={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(S,M)*n),a),bitrateMax:Math.max(Math.round(Math.pow(A,M)*r),u),bitrateMin:Math.max(Math.round(Math.pow(A,M)*o),l)};D.push({scale:M,threshold:H,balanced:V,motion:G,detail:Y})}return D}function i8e(e,t,r,n,i,o){let a=lS.get(e)||{overUse:0,underUse:0,adaptationList:Qte(i)},{adaptationList:s}=a;lS.set(e,a);let{OVERUSE_TIMES_THRESHOLD:c,UNDERUSE_TIMES_THRESHOLD:l}=CL,{scale:u}=n,d,f;return typeof t=="number"&&t>0&&function(p,m,g,y){if(m>=g.length)return!1;let{threshold:{fps_down:v}}=g[m];return L("FORCE_AG_HIGH_FRAMERATE")&&y==="maintain-framerate"&&(v=g[0].threshold.fps_down),p<v}(t,u,s,o)&&(a.overUse++,f=Oy.CPU,a.overUse>c)||typeof r=="number"&&r>0&&function(p,m,g){if(m>=g.length)return!1;let{threshold:{bwe_down:y}}=g[m];return p<y}(r,u,s)&&(a.overUse++,f=Oy.BANDWIDTH,a.overUse>c)?(a.overUse=0,a.underUse=0,d=aH(n,s,o,Dp.DOWN),[d,f]):(typeof t=="number"&&t>0&&typeof r=="number"&&r>0&&function(p,m,g,y){if(m===0)return;let{threshold:{fps_up:v}}=g[m];return L("FORCE_AG_HIGH_FRAMERATE")&&y==="maintain-framerate"&&(v=g[1].threshold.fps_up),p>v}(t,u,s,o)&&function(p,m,g){if(m===0)return;let{threshold:{bwe_up:y}}=g[m];return p>y}(r,u,s)&&(a.underUse++,a.underUse>l&&(a.overUse=0,a.underUse=0,d=aH(n,s,o,Dp.UP),d.scale===0&&(f=Oy.NONE))),[d,f])}function sH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sH(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o8e(e){var t;return!!L("ENABLE_AG_ADAPTATION")&&!!(e instanceof Ek||me(t=e._hints).call(t,lr.CUSTOM_TRACK))&&(!!L("FORCE_SUPPORT_AG_ADAPTATION")||!!(function(r){let n=St();if(n.os!==mn.IOS||!n.osVersion)return!1;let i=n.osVersion.split(".");return Number(i[0])>=r}(14)&&xee(17,4)||Iee(14)&&Aee(17,4)))}var uS=new Map;function v_(e,t){let r=uS.get(e);if(r){let{timer:n}=r;window.clearTimeout(n),uS.delete(e)}t.qualityLimitationReason=Oy.NONE,Jte(e)}var vt;function cH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cH(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var ks=(vt=class ey extends Wee{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var t,r;return(t=(r=this.peerConnection.getReceivers()[0])===null||r===void 0||(r=r.transport)===null||r===void 0?void 0:r.state)!==null&&t!==void 0?t:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map(t=>t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").filter(t=>{var r;return me(r=Object.keys(lC)).call(r,t)}))]}constructor(t,r){super(t,r),I(this,"store",void 0),I(this,"peerConnection",void 0),I(this,"id",er(5,"connection-")),I(this,"remoteSDP",void 0),I(this,"initialOffer",void 0),I(this,"transportEventReceiver",void 0),I(this,"statsFilter",void 0),I(this,"extension",{useXR:L("USE_XR")}),I(this,"localCapabilities",void 0),I(this,"remoteCodecs",void 0),I(this,"localCandidateCount",0),I(this,"allCandidatesReceived",!1),I(this,"isPreallocation",!1),I(this,"preSSRCMap",new Map),I(this,"dataStreamChannelMap",new Map),I(this,"establishPromise",void 0),I(this,"recoveredDataChannelIds",[]),I(this,"currentDataChannelId",1),I(this,"mutex",new ii("P2PConnection-mutex")),I(this,"qualityLimitationReason",Oy.NONE),this.store=r,this.peerConnection=new RTCPeerConnection(ey.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=GL(this.peerConnection,L("STATS_UPDATE_INTERVAL"),void 0,Rr()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}getPreMedia(t){let r=this.preSSRCMap.get(t);if(r!==void 0){let n=this.peerConnection.getTransceivers().find(i=>i.mid===r);if(n)return{transceiver:n,track:n.receiver.track,id:r}}}async updateRemoteRTPCapabilities(t,r){if(this.remoteCodecs=r,!this.remoteSDP)return void w.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(r));if(this.remoteSDP.updateRemoteCodec(t,r,this.store.codec)){let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n);let o=this.remoteSDP.toString();i==null||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}else w.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.")}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});let t=await this.peerConnection.createOffer();if(!t.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let r=Ru(t.sdp),n=await Dte({filterRTX:!L("USE_PUB_RTX")&&!L("USE_SUB_RTX"),filterVideoFec:L("FILTER_VIDEO_FEC"),filterAudioFec:L("FILTER_AUDIO_FEC"),filterVideoCodec:L("FILTER_VIDEO_CODEC")},this.extension);return this.localCapabilities=cS(n),this.initialOffer=t,fc(fc({},r),{},{rtpCapabilities:n,offerSDP:t.sdp})}catch(t){throw new J(O.GET_LOCAL_CONNECTION_PARAMS_FAILED,t.toString())}}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new n8e(fc(fc({},t),{},{localCapabilities:this.localCapabilities})),t.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);let r=this.remoteSDP.toString(),n=Lte(this.initialOffer.sdp,this.extension),i=this.logSDPExchange(n||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),i==null||i(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r});let o=this.peerConnection.getTransceivers()[0];if(o!=null&&o.receiver&&this.tryBindTransportEvents(o.receiver),L("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia(L("PRELOAD_MEDIA_COUNT"));let s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});let c=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(c)}let{preSSRCs:a}=t;if(Array.isArray(a)&&a.length>0){let{mids:s}=this.remoteSDP.batchSend(a.map(c=>({kind:c.kind,ssrcMsg:[{ssrcId:c.ssrcId,rtx:c.rtx}],mslabel:c.mslabel})));s.forEach((c,l)=>{this.preSSRCMap.set(a[l].ssrcId,c)}),await f_(this.peerConnection,this.remoteSDP,this.extension),w.debug("[".concat(this.store.clientId,"] [P2PConnection] pre-batchReceive exchange SDP."))}}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}}async updateRemoteConnect(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateRemoteConnect before remote SDP created");let{rtpCapabilities:r}=t;this.remoteSDP.updateRemoteRTPCapabilities(r),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);let{preSSRCs:n}=t;if(Array.isArray(n)&&n.length>0){let{mids:i}=this.remoteSDP.batchSend(n.map(o=>Object.assign({},{kind:o.kind,ssrcMsg:[{ssrcId:o.ssrcId,rtx:o.rtx}],mslabel:o.mslabel})));i.forEach((o,a)=>{this.preSSRCMap.set(n[a].ssrcId,o)})}await f_(this.peerConnection,this.remoteSDP,this.extension),w.debug("[P2PConnection] updateRemoteRTPCapabilities by exchanging SDP.")}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.updateRemoteConnect failed; ".concat(r.toString()))}}send(t,r,n){var i=this;return Ws(function*(){let o=yield It(i.mutex.lock("From P2PConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let a=[];t.forEach(g=>{let y=i.peerConnection.addTransceiver(g._mediaStreamTrack,{direction:"sendonly"});a.push(y),g._updateRtpTransceiver(y)}),Rr()&&L("SIMULCAST")===!0&&(yield It(i.applySimulcastForFirefox(a,t)));let s=yield It(i.peerConnection.createOffer()),c=i.remoteSDP.predictReceivingMids(t.length),l=i.mungSendOfferSDP(s.sdp,t,c),u=Pn.parse(l),d=c.map(g=>{let y=u.mediaDescriptions.find(v=>v.attributes.mid===g);if(!y)throw new Error("Cannot extract ssrc from mediaDescription.");return Nte(y,L("USE_PUB_RTX"))}),f;try{f=yield d}catch(g){f=[],i.remoteSDP.receive(t,r,n,f);let y=i.remoteSDP.toString();throw yield It(i.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield It(i.peerConnection.setRemoteDescription({type:"answer",sdp:y})),yield It(i.stopSending(c,!0)),g}i.remoteSDP.receive(t,r,n,f);let p=i.remoteSDP.toString(),m=i.logSDPExchange(l,"offer","local","send");return yield It(i.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield It(i.applySimulcastEncodings(a,t)),yield It(i.applySendEncodings(a,t)),m==null||m(p),yield It(i.peerConnection.setRemoteDescription({type:"answer",sdp:p})),a.map((g,y)=>{let v=c[y];return{localSSRC:d[y],id:v,transceiver:g}})}catch(a){throw a instanceof J?a:new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(a.toString()))}finally{o()}})()}async createDataChannels(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(t);if(n&&n.readyState==="open")w.debug("[P2PConnection] Channels are already available and can be reused directly.");else{let o=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if(typeof o!="number")throw new Error("create DataChannel error, because cannot get dc id");n=this.peerConnection.createDataChannel("datastream-channel",{id:o,negotiated:!0,ordered:!1,maxRetransmits:L("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(t,n)}r.forEach(o=>{o._updateOriginDataChannel(n)});let{needExchangeSDP:i}=this.remoteSDP.sendDataChannel();if(i){let o=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});let a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(a),w.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else w.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(n){throw n instanceof J?n:new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(n.toString()))}}async stopDataChannels(t){try{let r=this.dataStreamChannelMap.get(t);return r&&(r.id&&this.recoveredDataChannelIds.push(r.id),r.close()),void this.dataStreamChannelMap.delete(t)}catch(r){throw r instanceof J?r:new J(O.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(r.toString()))}}async stopSending(t,r){let n=r?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let i=this.peerConnection.getTransceivers().filter(c=>t.indexOf(c.mid)!==-1);if(i.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");i.map(c=>{var l;v_(this.id+c.mid,this),c.direction="inactive",(l=c.stop)===null||l===void 0||l.call(c)});let o=await this.peerConnection.createOffer(),a=this.logSDPExchange(o.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(o),this.remoteSDP.stopReceiving(t);let s=this.remoteSDP.toString();a==null||a(s),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s})}catch(i){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}finally{n&&n()}}async receive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{mid:o,needExchangeSDP:a}=this.remoteSDP.send(t,r,n,i);a&&(await f_(this.peerConnection,this.remoteSDP,this.extension),w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP.")));let s=this.peerConnection.getTransceivers().find(c=>c.mid===o);if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:o,transceiver:s}}catch(o){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async batchReceive(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");let{mids:r,needExchangeSDP:n}=this.remoteSDP.batchSend(t);return n&&(await f_(this.peerConnection,this.remoteSDP,this.extension),w.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))),r.map(i=>{let o=this.peerConnection.getTransceivers().find(a=>a.mid===i);if(!o)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:o.receiver.track,id:i,transceiver:o}})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(r.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");t.forEach(o=>{Array.from(this.preSSRCMap.entries()).some(a=>{let[s,c]=a;if(c===o)return this.preSSRCMap.delete(s),!0})}),this.remoteSDP.stopSending(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}async muteRemote(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(t," before remote SDP created."));this.remoteSDP.mute(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(r.toString()))}}async unmuteRemote(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(t," before remote SDP created."));this.remoteSDP.unmute(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(r.toString()))}}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(a=>{a.direction="inactive"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(t);let o=this.remoteSDP.toString();i==null||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(r.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(async(a,s)=>{a.direction="sendonly"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(t);let o=this.remoteSDP.toString();i==null||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(r.toString()))}}restartICE(t){var r=this;return Ws(function*(){let n=yield It(r.mutex.lock("From P2PConnection.restartICE"));try{if(!r.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Ct().supportPCSetConfiguration){let l=r.peerConnection.getConfiguration(),u=t===Ro.RELAY?"relay":"all";l.iceTransportPolicy!==u&&(w.debug("[".concat(r.store.clientId,"] restartICE change iceTransportPolicy from [").concat(l.iceTransportPolicy,"] to [").concat(u,"]")),l.iceTransportPolicy=u,r.peerConnection.setConfiguration(l))}else if(t===Ro.RELAY)return;r.remoteSDP.updateCandidates(t);let i=yield It(r.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let o=Ru(i.sdp),{remoteIceParameters:a}=yield o.iceParameters;r.remoteSDP.restartICE(a);let s=r.remoteSDP.toString(),c=r.logSDPExchange(i.sdp||"","offer","local","restartICE");r.store.descriptionStart(),yield It(r.peerConnection.setLocalDescription(i)),c==null||c(s),yield It(r.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(i){w.warning("[".concat(r.store.clientId,"] restart ICE failed, abort operation"),i)}finally{n()}})()}close(){var t;this.peerConnection.getTransceivers().forEach(r=>{v_(this.id+r.mid,this)}),this.preSSRCMap.clear(),this.peerConnection.close(),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return fc(fc({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[r],[t]);this.remoteSDP.updateRecvMedia(t,r);let o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),a==null||a(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new J(O.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(t,r){let n=this.peerConnection.getTransceivers().filter(i=>i.mid===t);n.length===1&&(this.isVP8Simulcast(r)?Rr()||await this.applySimulcastEncodings(n,[r]):await this.applySendEncodings(n,[r]))}setStatsRemoteVideoIsReady(t,r){this.statsFilter.setVideoIsReady2(t,r)}async replaceTrack(t,r){let n=this.peerConnection.getTransceivers().find(i=>i.mid===r);n&&await n.sender.replaceTrack(t._mediaStreamTrack)}async getSelectedCandidatePair(){let t=this.peerConnection.getReceivers();if(t.length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair()){let r=t[0].transport.iceTransport,{local:n,remote:i}=r.getSelectedCandidatePair();return{local:fc(fc({},Fc),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:fc(fc({},Fc),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t;(t=this.onICEConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=t=>{t.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},L("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){let r={iceServers:[]};return t.iceServers?r.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(aC(t.turnServer.servers)?r.iceServers=t.turnServer.servers:(r.iceServers&&r.iceServers.push(...ey.turnServerConfigToIceServers(t.turnServer.servers)),L("USE_TURN_SERVER_OF_GATEWAY")&&r.iceServers&&t.turnServer.serversFromGateway&&r.iceServers.push(...ey.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),L("FORCE_TURN_TCP")?r.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(n=>{n.forceturn&&(r.iceTransportPolicy="relay")}))),L("ENABLE_ENCODED_TRANSFORM")&&Ct().supportWebRTCEncodedTransform&&(r.encodedInsertableStreams=!0),r}static turnServerConfigToIceServers(t){let r=[];return t.forEach(n=>{n.security?n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turns:".concat(dp(n.turnServerURL),":").concat(n.tcpport,"?transport=tcp")}):(n.udpport&&!L("FORCE_TURN_TCP")&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.udpport,"?transport=udp")}),n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.tcpport,"?transport=tcp")}))}),r}tryBindTransportEvents(t){let r=t.transport;if(r){this.transportEventReceiver=t,r.onstatechange=()=>{var i;r!=null&&r.state&&((i=this.onDTLSTransportStateChange)===null||i===void 0||i.call(this,r.state))},r.onerror=i=>{var o;(o=this.onDTLSTransportError)===null||o===void 0||o.call(this,"error"in i?i.error:i)};let n=r.iceTransport;n&&(n.onstatechange=()=>{let i=r==null?void 0:r.iceTransport.state;var o;i&&((o=this.onICETransportStateChange)===null||o===void 0||o.call(this,i))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){let{local:i,remote:o}=n.getSelectedCandidatePair();w.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol}),", remote ").concat(JSON.stringify({candidateType:o.type,protocol:o.protocol,address:o.address,port:o.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(t,r){var n,i;if(r||(r=this.peerConnection.getSenders().find(g=>g.track===t._mediaStreamTrack)),!r)return w.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(t))return w.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!Ct().supportSetRtpSenderParameters)return w.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");let o={},a={};switch(t._optimizationMode){case"motion":o.degradationPreference="maintain-framerate";break;case"detail":o.degradationPreference="maintain-resolution";break;case"balanced":o.degradationPreference="balanced"}let s=function(g,y){return g.getTransceivers().find(v=>v.sender.track===y||v.receiver.track===y)}(this.peerConnection,t._mediaStreamTrack),c=E6e(t);if(o8e(t)&&s&&r&&c&&this.getLocalVideoStats&&me(n=["vp8","vp9"]).call(n,this.store.codec)){var l;let g=o.degradationPreference||(me(l=t._hints).call(l,lr.CUSTOM_TRACK)?L("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");(function(y,v,E,b,S,A){if(v_(y,E),S(v),b!=="balanced"&&b!=="maintain-framerate"&&b!=="maintain-resolution")return;let N=-1;Jte(y,v);let D=window.setInterval(()=>{let H=uS.get(y);if(!L("ENABLE_AG_ADAPTATION")||!H)return v_(y,E),void S(v);let V=A();if(V.sendPackets>0&&V.OutgoingAvailableBandwidth>0){if(N===-1)return void(N=Date.now());if(Date.now()-N<1e3)return;let G=V.sendFrameRate,Y=V.OutgoingAvailableBandwidth,[Z,$]=i8e(y,G,Y,H.adaptationConfig,v,b);$&&(E.qualityLimitationReason=$),Z&&H.adaptationConfig.scale!==Z.scale&&(w.debug("[".concat(y,"] applyAdaptation: ").concat(E.qualityLimitationReason,`
           sendFps `).concat(G,", bwe ").concat(Y,", switch from ").concat(H.adaptationConfig.scale," to ").concat(Z.scale," ")),H.adaptationConfig=eA(eA({},H.adaptationConfig),Z),S(Z))}},L("CHECK_LOCAL_STATS_INTERVAL")),M=eA({},v);uS.set(y,{timer:D,adaptationConfig:M,originConfig:v,adaptationFunc:S}),w.debug("[".concat(y,"] start adaptation, originConfig: ").concat(JSON.stringify(v),", degradationPreference: ").concat(b))})(this.id+s.mid,c,this,g,y=>{r&&this.updateAdaptation(r,y)},this.getLocalVideoStats.bind(this))}if(t._encoderConfig){var u;let{bitrateMax:g,frameRate:y,scaleResolutionDownBy:v}=t._encoderConfig;g&&(a.maxBitrate=1e3*g),(me(u=t._hints).call(u,lr.LOW_STREAM)||t.isUseScaleResolutionDownBy)&&(y&&(a.maxFramerate=Io(y)),v&&v>=1&&(a.scaleResolutionDownBy=v))}let{maxFramerate:d}=L("ENCODER_CONFIG_LIMIT");if(d&&typeof d=="number"&&(a.maxFramerate=a.maxFramerate?Math.min(a.maxFramerate,d):d),L("DSCP_TYPE")&&Qu()){var f;let g=L("DSCP_TYPE");me(f=["very-low","low","medium","high"]).call(f,g)&&(a.networkPriority=g)}let p=r.getParameters(),m=(i=p.encodings)===null||i===void 0?void 0:i[0];Rr()&&!m&&(o.encodings=[a]),m&&Object.assign(m,a),Object.assign(p,o),w.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(p.encodings))),await r.setParameters(p),await async function(g,y,v){try{var E;if(!Ct().supportSetRtpSenderParameters||!function(D){return D==="vp9"}(g)||!L("ENABLE_SVC"))return;let b={},S={},A=y.getParameters(),N=(E=A.encodings)===null||E===void 0?void 0:E[0];S.scalabilityMode=bk(v),N&&Object.assign(N,S),Object.assign(A,b),await y.setParameters(A),w.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: ".concat(JSON.stringify(A.encodings)))}catch(b){w.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed",b)}}(this.store.codec,r,L("SVC_MODE"))}async updateAdaptation(t,r){var n,i;if(!t)return w.debug("[updateAdaptation] no rtpSender found");if(!Ct().supportSetRtpSenderParameters)return w.debug("[updateAdaptation] Browser not support set rtp-sender parameters");let o={},{bitrateMax:a,frameRate:s,scaleResolutionDownBy:c}=r;a&&(o.maxBitrate=1e3*a),s&&(o.maxFramerate=Io(s)),c&&c>=1&&me(n=["vp8","vp9"]).call(n,this.store.codec)&&(o.scaleResolutionDownBy=c);let l=t.getParameters(),u=(i=l.encodings)===null||i===void 0?void 0:i[0];u&&Object.assign(u,o),Object.assign(l,{});try{await t.setParameters(l),w.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(l.encodings)))}catch(d){!("transport"in t)||t.transport&&t.transport.state==="connected"?this.peerConnectionState!=="connected"?w.debug("[updateAdaptation] peerConnection not connected}"):w.debug("[updateAdaptation] updateRtpSenderEncodings failed",d):w.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(t,r){try{if(!Ct().supportSetRtpSenderParameters||t.length!==r.length)return;for(let n=0;n<t.length;n++){let i=t[n],o=r[n];o instanceof ir&&!this.isVP8Simulcast(o)&&await this.updateRtpSenderEncodings(o,i.sender)}}catch{w.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,r,n){let i=Pn.parse(t);return r.forEach((o,a)=>{let s=n[a],c=i.mediaDescriptions.find(l=>l.attributes.mid===s);c&&(um(c,o),Pte(c,o,this.store.codec))}),Pn.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var r;(r=this.onFirstAudioReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var r;(r=this.onFirstVideoReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var r;(r=this.onFirstAudioDecoded)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,r,n)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,r,n)},this.statsFilter.onSelectedLocalCandidateChanged=(t,r)=>{var n;(n=this.onSelectedLocalCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,r)=>{var n;(n=this.onSelectedRemoteCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onFirstVideoDecodedTimeout=t=>{var r;(r=this.onFirstVideoDecodedTimeout)===null||r===void 0||r.call(this,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(t,r){if(t.length===r.length)for(let c=0;c<t.length;c++){var n,i,o,a,s;let l=t[c],u=r[c];if(u instanceof ir&&!me(n=u._hints).call(n,lr.LOW_STREAM)&&(i=u._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((o=u._encoderConfig)===null||o===void 0?void 0:o.bitrateMax)>200&&(a=u._scalabilityMode)!==null&&a!==void 0&&a.numSpatialLayers&&((s=u._scalabilityMode)===null||s===void 0?void 0:s.numSpatialLayers)>1&&this.store.codec==="vp8"){let d={},f={high:1e3*(u._encoderConfig.bitrateMax-50),medium:5e4};d.encodings=[{rid:"m",active:!0,maxBitrate:f.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:f.high}];let p=l.sender.getParameters();await l.sender.setParameters(Object.assign(p,d))}}}async applySimulcastEncodings(t,r){if(!Rr()&&t.length===r.length)for(let n=0;n<t.length;n++){let i=r[n];if(i instanceof ir&&this.isVP8Simulcast(i)){let o=t[n],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];let c=o.sender.getParameters();await o.sender.setParameters(Object.assign(c,a))}}}isVP8Simulcast(t){var r,n,i,o,a;return!!(t instanceof ir&&L("SIMULCAST")&&this.store.codec==="vp8"&&!me(r=t._hints).call(r,lr.LOW_STREAM)&&(n=t._encoderConfig)!==null&&n!==void 0&&n.bitrateMax&&((i=t._encoderConfig)===null||i===void 0?void 0:i.bitrateMax)>200&&(o=t._scalabilityMode)!==null&&o!==void 0&&o.numSpatialLayers&&((a=t._scalabilityMode)===null||a===void 0?void 0:a.numSpatialLayers)>1)}logSDPExchange(t,r,n,i){if(L("SDP_LOGGING"))return w.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(r," SDP during P2PConnection.").concat(i,`
`),t),r==="offer"?o=>{this.logSDPExchange(o,"answer",n==="local"?"remote":"local",i)}:void 0}async getRemoteSSRC(t){if(!this.remoteSDP)return;let r=this.remoteSDP.getSSRC(t);return r&&r.length!==0?r[0].ssrcId:void 0}setConfiguration(t){if(Ct().supportPCSetConfiguration){let r=ey.resolvePCConfiguration(t);this.peerConnection.setConfiguration(r)}}},_e(vt.prototype,"updateRemoteRTPCapabilities",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"updateRemoteRTPCapabilities"),vt.prototype),_e(vt.prototype,"connect",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"connect"),vt.prototype),_e(vt.prototype,"updateRemoteConnect",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"updateRemoteConnect"),vt.prototype),_e(vt.prototype,"createDataChannels",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"createDataChannels"),vt.prototype),_e(vt.prototype,"receive",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"receive"),vt.prototype),_e(vt.prototype,"batchReceive",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"batchReceive"),vt.prototype),_e(vt.prototype,"stopReceiving",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"stopReceiving"),vt.prototype),_e(vt.prototype,"muteRemote",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"muteRemote"),vt.prototype),_e(vt.prototype,"unmuteRemote",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"unmuteRemote"),vt.prototype),_e(vt.prototype,"muteLocal",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"muteLocal"),vt.prototype),_e(vt.prototype,"unmuteLocal",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"unmuteLocal"),vt.prototype),_e(vt.prototype,"close",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"close"),vt.prototype),_e(vt.prototype,"updateEncoderConfig",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"updateEncoderConfig"),vt.prototype),_e(vt.prototype,"updateSendParameters",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"updateSendParameters"),vt.prototype),_e(vt.prototype,"replaceTrack",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"replaceTrack"),vt.prototype),_e(vt.prototype,"updateAdaptation",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"updateAdaptation"),vt.prototype),_e(vt.prototype,"getRemoteSSRC",[zi],Object.getOwnPropertyDescriptor(vt.prototype,"getRemoteSSRC"),vt.prototype),vt);function zi(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,o=await i.lock("From P2PConnection.".concat(t));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await n.apply(this,s)}finally{o()}},r}var ut;function lH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lH(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uH(e){var t,r,n,i=2;for(typeof Symbol<"u"&&(r=r8e,n=Symbol.iterator);i--;){if(r&&(t=e[r])!=null)return t.call(e);if(n&&(t=e[n])!=null)return new wb(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function wb(e){function t(r){if(Object(r)!==r)return he.reject(new TypeError(r+" is not an object."));var n=r.done;return he.resolve(r.value).then(function(i){return{value:i,done:n}})}return wb=function(r){this.s=r,this.n=r.next},wb.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(r){var n=this.s.return;return n===void 0?he.resolve({value:r,done:!0}):t(n.apply(this.s,arguments))},throw:function(r){var n=this.s.return;return n===void 0?he.reject(r):t(n.apply(this.s,arguments))}},new wb(e)}var E_=(ut=class extends _r{get state(){return this._state}set state(e){let t=this._state;this._state=e,this.emit(Le.StateChange,t,this._state)}constructor(e,t){super(),I(this,"isPlanB",void 0),I(this,"store",void 0),I(this,"statsUploader",void 0),I(this,"connection",void 0),I(this,"localTrackMap",new Map),I(this,"remoteUserMap",new Map),I(this,"localDataChannels",[]),I(this,"remoteDataChannelMap",new Map),I(this,"pendingLocalTracks",[]),I(this,"pendingRemoteTracks",[]),I(this,"pendingLocalDataChannels",[]),I(this,"pendingRemoteDataChannels",[]),I(this,"statsCollector",void 0),I(this,"shouldForwardP2PCreation",void 0),I(this,"iceFailedCount",0),I(this,"dtlsFailedCount",0),I(this,"mutex",new ii("P2PChannel-mutex")),I(this,"_state",Dt.Disconnected),I(this,"_pcStatsUploadType",L("NEW_ICE_RESTART")?Qc.FIRST_CONNECTION:Qc.OLD_FIRST_CONNECTION),I(this,"_isInRestartIce",!1),I(this,"_isStartRestartIce",!1),I(this,"_restartStates",["disconnected","failed"]),I(this,"_restartTimer",void 0),I(this,"_isFirstConnected",!0),I(this,"handleMuteLocalTrack",async(r,n,i)=>{let o=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==Dt.Connected)return void i(new J(O.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));let a=this.filterTobeMutedTracks(r);if(a.length===0)return void n();let s=a.find(l=>l[0]==="videoLowTrack");s&&s[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(a.map(l=>{let[,{id:u}]=l;return u}));let c=this.createMuteMessage(a);await Jt(this,Le.RequestMuteLocal,c),n()}catch(a){i(a)}finally{o()}}),I(this,"handleUnmuteLocalTrack",async(r,n,i)=>{let o=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==Dt.Connected)return void i(new J(O.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));let a=this.filterTobeUnmutedTracks(r);if(a.length===0)return void n();let s=a.find(l=>l[0]==="videoLowTrack");if(s){let l=s[1];if(l.track._originMediaStreamTrack.stop(),!L("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ct().supportDualStreamEncoding){let u=r._mediaStreamTrack.clone();l.track._mediaStreamTrack=u,l.track._originMediaStreamTrack=u}else{let u=Rk(r,N0(this,Le.RequestLowStreamParameter));l.track._mediaStreamTrack=u,l.track._originMediaStreamTrack=u}await new he((u,d)=>{this.handleReplaceTrack(l.track,u,d,!0)})}await this.connection.unmuteLocal(a.map(l=>{let[,{id:u}]=l;return u}));let c=this.createUnmuteMessage(a);await Jt(this,Le.RequestUnmuteLocal,c),n()}catch(a){i(a)}finally{o()}}),I(this,"handleUpdateVideoEncoder",async(r,n,i)=>{let o=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{let a=this.localTrackMap.get(oe.LocalVideoTrack);if(!this.connection||!a||a.track!==r||this.state!==Dt.Connected)return void n();let{id:s,track:c}=a;await this.connection.updateSendParameters(s,c),await this.connection.updateEncoderConfig(s,c),this.emit(Le.UpdateVideoEncoder,c),n()}catch(a){i(a)}finally{o()}}),I(this,"handleUpdateVideoSendParameters",async(r,n,i)=>{let o=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{let a=this.localTrackMap.get(oe.LocalVideoTrack);if(!this.connection||!a||a.track!==r||this.state!==Dt.Connected)return void n();let{id:s,track:c}=a;await this.connection.updateSendParameters(s,c),n()}catch(a){i(a)}finally{o()}}),I(this,"handleReplaceMixingTrack",async(r,n,i,o)=>{if(!this.connection||this.state!==Dt.Connected)return void n();let a=Zx([r]),s;w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(a.getTrackId(),"]")),typeof o=="boolean"&&o||(s=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(r,a),n()}catch(l){i(l)}finally{var c;(c=s)===null||c===void 0||c()}}),I(this,"handleReplaceTrack",async(r,n,i,o)=>{let a;w.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(r.getTrackId(),"]")),typeof o=="boolean"&&o||(a=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var s;let l=Array.from(this.localTrackMap.entries()).find(u=>{let[,{track:d}]=u;return r===d});if(!this.connection||!l||this.state!==Dt.Connected)return void n();if(await((s=this.connection)===null||s===void 0?void 0:s.replaceTrack(r,l[1].id)),this.isPlanB){let u=l[1];u.id=r._mediaStreamTrack.id,this.localTrackMap.set(l[0],u)}if(l[0]===oe.LocalVideoTrack&&!L("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ct().supportDualStreamEncoding){let u=this.localTrackMap.get(oe.LocalVideoLowTrack);if(u){let d=r._mediaStreamTrack.clone();u.track._originMediaStreamTrack.stop(),u.track._mediaStreamTrack=d,u.track._originMediaStreamTrack=d,await new he((f,p)=>{this.handleReplaceTrack(u.track,f,p,!0)})}}n()}catch(l){i(l)}finally{var c;(c=a)===null||c===void 0||c()}}),I(this,"handleGetRTCStats",r=>{r(this.statsCollector.getRTCStats())}),I(this,"handleGetLocalVideoStats",r=>{r(this.statsCollector.getLocalVideoTrackStats())}),I(this,"handleGetLocalAudioStats",r=>{r(this.statsCollector.getLocalAudioTrackStats())}),I(this,"handleGetRemoteVideoStats",r=>this.statsCollector.getRemoteVideoTrackStats(r.uid)[r.uid]),I(this,"handleGetRemoteAudioStats",r=>this.statsCollector.getRemoteAudioTrackStats(r.uid)[r.uid]),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new qte(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!Ct().supportUnifiedPlan||L("CHROME_FORCE_PLAN_B")&&Qu(),this.shouldForwardP2PCreation=L("FORWARD_P2P_CREATION")&&Ct().supportPCSetConfiguration&&bL(),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new Dg({},this.store):new ks({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e){var t;this.state=Dt.New;let r=this.shouldForwardP2PCreation&&((t=this.connection)===null||t===void 0?void 0:t.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!r||(r&&this.connection&&(w.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.isPlanB?new Dg(e,this.store):new ks(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new J(O.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=L("NEW_ICE_RESTART")?Qc.FIRST_CONNECTION:Qc.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e){if(!this.connection)throw new J(O.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");L("ENABLE_PREALLOC_PC")&&this.state===Dt.Connected?await this.connection.updateRemoteConnect(e):(this.store.peerConnectionStart(),await this.connection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Dt.Connected)}updateRemoteRTPCapabilities(e){let t=Array.from(this.localTrackMap.entries()).filter(i=>{var o;let[a]=i;return me(o=[oe.LocalVideoLowTrack,oe.LocalVideoTrack]).call(o,a)}),r=t.map(i=>{let[,{id:o}]=i;return o}),n=t.map(i=>{let[o]=i;return o});if(this.connection instanceof ks){if(Se.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(n),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!me(e).call(e,this.store.codec)){let i=["vp9","vp8","h264"].find(o=>me(e).call(e,o));i&&(this.store.codec=i,w.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(i,".")))}this.connection.updateRemoteRTPCapabilities(r,e)}}async getEstablishParams(){var e;if(this.connection instanceof ks&&this.connection.peerConnectionState!=="closed"&&me(e=[Dt.New,Dt.Connected]).call(e,this.state))return this.connection.establishPromise}async publishDataChannel(e){if(!this.connection||this.state!==Dt.Connected){if(this.state===Dt.Disconnected)throw new J(O.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return e.forEach(r=>{var n;me(n=this.pendingLocalDataChannels).call(n,r)||this.pendingLocalDataChannels.push(r)}),[]}let t=this.filterTobePublishedDataChannels(e);return t.length===0?[]:(t.forEach(r=>{let n=Date.now();this.store.publish(r.id.toString(),"datachannel",n)}),await this.connection.createDataChannels(this.store.uid,t),t.forEach(r=>{this.localDataChannels.push(r);let n=Date.now();this.store.publish(r.id+"","datachannel",void 0,n)}),e.map(r=>({streamId:r.id,ordered:r.ordered,maxRetransmits:r.maxRetransmits,metadata:r.metadata,channelId:r._originDataChannelId})))}publish(e,t,r){var n=this;return Ws(function*(){let i=yield It(n.mutex.lock("From P2PChannel.publish"));try{if(!n.connection||n.state!==Dt.Connected){if(n.state===Dt.Disconnected)throw new J(O.UNEXPECTED_ERROR,"PeerConnection already disconnected.");n.throwIfTrackTypeNotMatch(e);let a=e.filter(s=>n.pendingLocalTracks.indexOf(s)===-1);return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(a))}n.store.pubId=n.store.pubId+1,ti.markPublishStart(n.store.clientId,n.store.pubId);let o=n.filterTobePublishedTracks(e,t,r);if(o.length===0)return void(yield It(n.tryToUnmuteAudio(e)));yield*Z$(uH(n.doPublish(n.connection,o)))}finally{i()}})()}doPublish(e,t){var r=this;return Ws(function*(){t.forEach(d=>{let{track:f,type:p}=d,m=Date.now();r.store.publish(f.getTrackId(),p===oe.LocalAudioTrack?"audio":"video",m)}),r.bindLocalTrackEvents(t);let n=t.map(d=>{let{track:f}=d;return f}),i=yield It(e.send(t.map(d=>{let{track:f}=d;return f}),r.store.codec,r.store.audioCodec)),o=(yield It(i.next())).value,a=r.createGatewayPublishMessage(t,o),s;try{s=yield a}catch(d){throw i.throw(d),(d==null?void 0:d.code)===O.WS_ABORT&&t.forEach(f=>{let{track:p}=f;r.pendingLocalTracks.indexOf(p)===-1&&r.pendingLocalTracks.push(p)}),r.unbindLocalTrackEvents(t),d}let c=r.mapPubResToRemoteConfig(a,s),l=(yield It(i.next(c))).value,u=L("ENABLE_VIDEO_SEI");n.forEach(async d=>{let f=d.getRTCRtpTransceiver();f&&u&&(d.trackMediaType===Ce.VIDEO?await C6e(f.sender,d):d.trackMediaType===Ce.AUDIO&&await async function(p){if(!Ct().supportWebRTCEncodedTransform)return void w.warning("browser not support audio encoded transform");if(u_.has(p)||!p.track)return;let m={track:p.track};if(Fu()){if(!p.createEncodedStreams)return void w.warning("browser not support createEncodedStreams() API");let y=null;try{y=p.createEncodedStreams()}catch(E){return void w.error("create audio-encoded-streams error",E&&E.message)}let v=new TransformStream({transform(E,b){m.controller||(m.controller=b),p.track&&p.track.id!==m.track.id&&(w.debug("audio track changed: ".concat(m.track.id," => ").concat(p.track.id)),m.track.removeEventListener("ended",g),m.track=p.track,m.track.addEventListener("ended",g)),b.enqueue(E)}});y.readable.pipeThrough(v).pipeTo(y.writable)}else if(Wn()){if(typeof RTCRtpScriptTransform>"u")return void w.warning("browser not support RTCRtpScriptTransform");let y=Eb(),v=new MessageChannel;await new he(b=>y.onmessage=S=>{S.data==="registered"&&b(void 0)});let E=new RTCRtpScriptTransform(y,{name:"tx",port:v.port2},[v.port2]);p.transform=E,await new he(b=>y.onmessage=S=>{S.data==="started"&&b(void 0)}),v.port1.onmessage=b=>{var S;b.data.transformed&&p.track&&((S=p.track)===null||S===void 0?void 0:S.id)!==m.track.id&&(w.debug("audio track changed: ".concat(m.track.id," => ").concat(p.track.id)),m.track.removeEventListener("ended",g),m.track=p.track,m.track.addEventListener("ended",g))},m.worker=y}function g(){if(p.track){if(this.id!==p.track.id)return;p.track.removeEventListener("ended",g)}let y=u_.get(p);if(y){u_.delete(p);try{var v,E;(v=y.controller)===null||v===void 0||v.terminate(),(E=y.worker)===null||E===void 0||E.terminate()}catch(b){w.warning(b&&b.message)}}}u_.set(p,m),p.track.addEventListener("ended",g)}(f.sender))}),t.forEach(d=>{let{type:f}=d;r.statsCollector.addLocalStats(f)}),r.assignLocalTracks(t,l),r.statsUploader.startUploadOutboundStats(),t.forEach(d=>{let{track:f,type:p}=d,m=Date.now();r.store.publish(f.getTrackId(),p===oe.LocalAudioTrack?"audio":"video",void 0,m)})})()}async updateVideoStreamParameter(e,t){let r=this.localTrackMap.get(t);if(!r)return;if(!(r.track instanceof ir))return w.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof ks||this.connection instanceof Dg))return w.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");let{track:n}=r,i=function(o,a){let s={};return o.height&&o.width&&(s.scaleResolutionDownBy=hk(o,a)),s.maxFramerate=o.framerate?Io(o.framerate):void 0,s.maxBitrate=o.bitrate?1e3*o.bitrate:void 0,s}(e,n);if(n._encoderConfig||(n._encoderConfig={}),t!==oe.LocalVideoLowTrack||!L("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ct().supportDualStreamEncoding)i.scaleResolutionDownBy!=null&&(n._encoderConfig.scaleResolutionDownBy=i.scaleResolutionDownBy);else{let o=n._originMediaStreamTrack;if(!o.canvas)return w.warn("[".concat(n.getTrackId(),"] no canvas on track"));(function(a,s){let c=a.canvas;s.width&&(c.width=Io(s.width)),s.height&&(c.height=Io(s.height)),s.framerate&&(c.stopCapture&&c.stopCapture(),c.stopCapture=DL(()=>{!c.startCapture&&c.stopCapture&&c.stopCapture(),c.startCapture&&c.startCapture()},Io(s.framerate)))})(o,e)}i.maxBitrate!=null&&(n._encoderConfig.bitrateMax=i.maxBitrate/1e3),i.maxFramerate!=null&&(n._encoderConfig.frameRate&&typeof n._encoderConfig.frameRate=="object"?n._encoderConfig.frameRate.max=i.maxFramerate:n._encoderConfig.frameRate={max:i.maxFramerate}),w.debug("[".concat(n.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(n._encoderConfig))),await this.connection.updateRtpSenderEncodings(n)}publishLowStream(e){var t=this;return Ws(function*(){if(!t.connection||t.state!==Dt.Connected)return;let r=yield It(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{let i=t.localTrackMap.get(oe.LocalVideoTrack);if(!i)throw new J(O.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(oe.LocalVideoLowTrack))throw new J(O.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));let o=[{track:t.getLowVideoTrack(i.track,e),type:oe.LocalVideoLowTrack}];if(yield*Z$(uH(t.doPublish(t.connection,o))),i.track.muted||!i.track.enabled){var n;let a=(n=t.localTrackMap.get(oe.LocalVideoLowTrack))===null||n===void 0?void 0:n.id;a!==void 0&&(yield It(t.connection.muteLocal([a])))}}finally{r()}})()}async republish(){this.pendingLocalTracks.length>0&&(w.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await Kn(this,Le.RequestRePublish,this.pendingLocalTracks),this.emit(Le.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(w.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await Kn(this,Le.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let t=this.pendingRemoteTracks.length-1;t>=0;t--){let{user:r,kind:n}=this.pendingRemoteTracks[t];(n!==Ce.AUDIO||r._audio_added_&&r._audioSSRC)&&(n!==Ce.VIDEO||r._video_added_&&r._videoSSRC)||this.pendingRemoteTracks.splice(t,1)}if(e)await Kn(this,Le.RequestReSubscribe,this.pendingRemoteTracks);else for(let{user:t,kind:r}of this.pendingRemoteTracks)await this.subscribe(t,r,r===Ce.VIDEO?t._videoSSRC:t._audioSSRC);this.pendingRemoteTracks.forEach(t=>{let{user:r}=t;this.emit(Le.MediaReconnectEnd,r.uid)}),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==Dt.Connected)return void e.forEach(n=>{let i=this.pendingLocalTracks.indexOf(n);i!==-1&&this.pendingLocalTracks.splice(i,1)});let t=this.filterTobeUnpublishedTracks(e);if(t.length===0)return;let r=t.find(n=>n[0]==="videoLowTrack");return r&&r[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==Dt.Connected)return void e.forEach(r=>{let n=this.pendingLocalDataChannels.indexOf(r);n!==-1&&this.pendingLocalDataChannels.splice(n,1)});let t=this.filterTobeUnpublishedDataChannels(e);return t.length!==0?(t.forEach(r=>{let n=this.localDataChannels.indexOf(r);n!==-1&&this.localDataChannels.splice(n,1)}),this.localDataChannels.length===0&&await this.connection.stopDataChannels(this.store.uid),t.map(r=>r.id)):void 0}async unpublishLowStream(){if(!this.connection||this.state!==Dt.Connected)return;let e=this.localTrackMap.get(oe.LocalVideoLowTrack);if(!e)return;e.track.close();let t=[[oe.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){let r=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map(n=>{let[,{id:i}]=n;return i})),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map(n=>{let[i,{track:o}]=n;return{type:i,track:o}})),t.forEach(n=>{let[i]=n;this.statsCollector.removeLocalStats(i)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadOutboundStats(),r}async subscribeDataChannel(e,t){if(!this.connection||this.state!==Dt.Connected)throw new J(O.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");let r=t.filter(n=>{var i;return!((i=this.remoteDataChannelMap.get(e))!==null&&i!==void 0&&i.get(n.id))});if(r.length!==0)return await this.connection.createDataChannels(e.uid,r),r.forEach(n=>{var i;this.remoteDataChannelMap.has(e)?(i=this.remoteDataChannelMap.get(e))===null||i===void 0||i.set(n.id,n):this.remoteDataChannelMap.set(e,new Map([[n.id,n]]));let o=this.pendingRemoteDataChannels.findIndex(a=>{let{user:s,id:c}=a;return s.uid===e.uid&&c===n.id});o!==-1&&this.pendingRemoteDataChannels.splice(o,1)}),r.map(n=>n.id)}async subscribe(e,t,r,n,i){var o;if(!this.connection||this.state!==Dt.Connected)throw new J(O.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((o=this.remoteUserMap.get(e))!==null&&o!==void 0&&o.has(t))return;let a,s,c,l=this.connection.getPreMedia(r);if(l)w.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] preSSRCMap has ssrcId: ").concat(r,", no need to send sub to gateway.")),c=l.transceiver,a=l.track,s=l.id;else if(i){let f=i.find(m=>{let{stream_type:g}=m;return g===t});if(!f)throw new J(O.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));let p=await this.connection.receive(t,f.ssrcs,String(e._uintid),f.attributes);this.connection instanceof ks&&(c=p.transceiver),a=p.track,s=p.id}else{let f=await this.connection.receive(t,[{ssrcId:r,rtx:n}],String(e._uintid),void 0);this.connection instanceof ks&&(c=f.transceiver),a=f.track,s=f.id}t===Ce.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(a):(e._audioTrack=new kp(a,e.uid,e._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(a):(e._videoTrack=new Op(a,e.uid,e._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),L("ENABLE_VIDEO_SEI")&&c&&(t==Ce.VIDEO?await async function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ct().supportWebRTCEncodedTransform)return void w.warning("browser not support video encoded transform");if(!f.track)return;if(Pg.has(f)){let y=Pg.get(f);return void(y&&(y.onSei=p.onSei))}let m={track:f.track,onSei:p.onSei};if(Fu()){if(!f.createEncodedStreams)return void w.warning("browser not support createEncodedStreams() API");let y=null;try{y=f.createEncodedStreams()}catch(E){return void w.error("create video-encoded-streams error",E&&E.message)}let v=new TransformStream({transform(E,b){m.controller||(m.controller=b),f.track&&f.track.id!==m.track.id&&(w.debug("video track changed: ".concat(m.track.id," => ").concat(f.track.id)),m.track.removeEventListener("ended",g),m.track=f.track,m.track.addEventListener("ended",g));let S=function(A){let N=new DataView(A.data),D=0;for(;D+4<A.data.byteLength;){if(N.getUint8(D+0)===0&&N.getUint8(D+1)===0&&N.getUint8(D+2)===0&&N.getUint8(D+3)===1&&N.getUint8(D+4)===6){let M=D+6,H=0,V=0;for(;(V=N.getUint8(M++))===255;)H+=255;H+=V;let G=T6e(A.data,M,H);return new Uint8Array(G)}D++}return null}(E);S&&m.onSei&&m.onSei(S),b.enqueue(E)}});y.readable.pipeThrough(v).pipeTo(y.writable)}else if(Wn()){if(typeof RTCRtpScriptTransform>"u")return void w.warning("browser not support RTCRtpScriptTransform");let y=Eb(),v=new MessageChannel;await new he(b=>y.onmessage=S=>{S.data==="registered"&&b(void 0)});let E=new RTCRtpScriptTransform(y,{name:"rx",port:v.port2},[v.port2]);f.transform=E,await new he(b=>y.onmessage=S=>{S.data==="started"&&b(void 0)}),v.port1.onmessage=b=>{var S;b.data.transformed&&f.track&&((S=f.track)===null||S===void 0?void 0:S.id)!==m.track.id?(w.debug("video track changed: ".concat(m.track.id," => ").concat(f.track.id)),m.track.removeEventListener("ended",g),m.track=f.track,m.track.addEventListener("ended",g)):b.data.sei&&m.onSei&&m.onSei(b.data.sei)},m.worker=y}function g(){if(f.track){if(this.id!==f.track.id)return;f.track.removeEventListener("ended",g)}(function(y){let v=Pg.get(y);if(v){Pg.delete(y);try{var E,b;(E=v.controller)===null||E===void 0||E.terminate(),(b=v.worker)===null||b===void 0||b.terminate()}catch(S){w.warning(S&&S.message)}}})(f)}Pg.set(f,m),f.track.addEventListener("ended",g)}(c.receiver,{onSei:f=>{var p;(p=e._videoTrack)===null||p===void 0||p._onSei(f)}}):t==Ce.AUDIO&&await async function(f){if(!Ct().supportWebRTCEncodedTransform)return void w.warning("browser not support audio encoded transform");if(d_.has(f))return;let p={track:f.track};if(Fu()){if(!f.createEncodedStreams)return void w.warning("browser not support createEncodedStreams() API");let g=null;try{g=f.createEncodedStreams()}catch(v){return void w.error("create audio-encoded-streams error",v&&v.message)}let y=new TransformStream({transform(v,E){p.controller||(p.controller=E),f.track&&f.track.id!==p.track.id&&(w.debug("audio track changed: ".concat(p.track.id," => ").concat(f.track.id)),p.track.removeEventListener("ended",m),p.track=f.track,p.track.addEventListener("ended",m)),E.enqueue(v)}});g.readable.pipeThrough(y).pipeTo(g.writable)}else if(Wn()){if(typeof RTCRtpScriptTransform>"u")return void w.warning("browser not support RTCRtpScriptTransform");let g=Eb(),y=new MessageChannel;await new he(E=>g.onmessage=b=>{b.data==="registered"&&E(void 0)});let v=new RTCRtpScriptTransform(g,{name:"rx",port:y.port2},[y.port2]);f.transform=v,await new he(E=>g.onmessage=b=>{b.data==="started"&&E(void 0)}),y.port1.onmessage=E=>{var b;E.data.transformed&&f.track&&((b=f.track)===null||b===void 0?void 0:b.id)!==p.track.id&&(w.debug("audio track changed: ".concat(p.track.id," => ").concat(f.track.id)),p.track.removeEventListener("ended",m),p.track=f.track,p.track.addEventListener("ended",m))},p.worker=g}function m(){f.track.removeEventListener("ended",m),function(g){let y=d_.get(g);if(y){d_.delete(g);try{var v,E;(v=y.controller)===null||v===void 0||v.terminate(),(E=y.worker)===null||E===void 0||E.terminate()}catch(b){w.warning(b&&b.message)}}}(f)}d_.set(f,p),f.track.addEventListener("ended",m)}(c.receiver));let u=this.remoteUserMap.get(e);u?u.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();let d=this.pendingRemoteTracks.findIndex(f=>{let{user:p,kind:m}=f;return p.uid===e.uid&&t===m});d!==-1&&(this.pendingRemoteTracks.splice(d,1),this.emit(Le.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==Dt.Connected)throw new J(O.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter(i=>{var o;let{user:a,mediaType:s}=i;return!((o=this.remoteUserMap.get(a))!==null&&o!==void 0&&o.has(s))});let t=[],r=new Map;e.forEach(i=>{if(!this.connection)return;let o=this.connection.getPreMedia(i.ssrcId);o?r.set(i.ssrcId,o):t.push(i)});let n=await this.connection.batchReceive(t.map(i=>{let{user:o,mediaType:a,ssrcId:s,rtxSsrcId:c}=i;return{kind:a,ssrcMsg:[{ssrcId:s,rtx:c}],mslabel:String(o._uintid)}}));t.forEach((i,o)=>{r.set(i.ssrcId,n[o])}),e.forEach(i=>{let{user:o,mediaType:a,ssrcId:s}=i,c=r.get(s);if(!c)return void w.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] cannot find ").concat(o.uid," subscribe data,").concat(a,", ").concat(s));let{track:l,id:u,transceiver:d}=c;a===Ce.AUDIO?(o._audioTrack?o._audioTrack._updateOriginMediaStreamTrack(l):(o._audioTrack=new kp(l,o.uid,o._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(o._audioTrack.getTrackId()))),d&&o._audioTrack._updateRtpTransceiver(d),this.bindRemoteTrackEvents(o,o._audioTrack)):(o._videoTrack?o._videoTrack._updateOriginMediaStreamTrack(l):(o._videoTrack=new Op(l,o.uid,o._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(o._videoTrack.getTrackId()))),d&&o._videoTrack._updateRtpTransceiver(d),this.bindRemoteTrackEvents(o,o._videoTrack));let f=this.remoteUserMap.get(o);f?f.set(a,u):this.remoteUserMap.set(o,new Map([[a,u]])),this.statsCollector.addRemoteStats(o.uid),this.statsUploader.startUploadInboundStats();let p=this.pendingRemoteTracks.findIndex(m=>{let{user:g,kind:y}=m;return g.uid===o.uid&&a===y});p!==-1&&(this.pendingRemoteTracks.splice(p,1),this.emit(Le.MediaReconnectEnd,o.uid))})}async unsubscribe(e,t,r){let n=this.pendingRemoteTracks.filter(a=>{let{user:s,kind:c}=a;return t!==void 0?s.uid===e.uid&&t===c:s.uid===e.uid});if(n.forEach(a=>{let s=this.pendingRemoteTracks.indexOf(a);this.pendingRemoteTracks.splice(s,1)}),this.connection&&this.state===Dt.Connected||r||n.forEach(a=>{let{kind:s}=a;var c;if(s===Ce.AUDIO)(c=e._audioTrack)===null||c===void 0||c._destroy(),e._audioTrack=void 0;else if(s===Ce.VIDEO){var l;(l=e._videoTrack)===null||l===void 0||l._destroy(),e._videoTrack=void 0}}),!this.connection||this.state!==Dt.Connected)return;let i=this.filterTobeUnSubscribedTracks(e,t);if(i.length===0)return;await this.connection.stopReceiving(i.map(a=>{let[,{id:s}]=a;return s}));let o=this.createUnsubscribeMessage(i);return this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),i.forEach(a=>{let[s,{kind:c}]=a;var l,u;if(c===Ce.VIDEO&&s._videoSSRC&&((l=this.connection)===null||l===void 0||l.setStatsRemoteVideoIsReady(s._videoSSRC,!1)),c===Ce.VIDEO)this.unbindRemoteTrackEvents(s._videoTrack),r||((u=s._videoTrack)===null||u===void 0||u._destroy(),s._videoTrack=void 0);else if(c===Ce.AUDIO){var d;this.unbindRemoteTrackEvents(s._audioTrack),!r&&((d=s._audioTrack)===null||d===void 0||d._destroy(),s._audioTrack=void 0)}}),o}async unsubscribeDataChannel(e,t){if(t.forEach(i=>{let o=this.pendingRemoteDataChannels.findIndex(a=>a.id===i.id);o!==-1&&this.pendingRemoteDataChannels.splice(o,1)}),!this.connection)return;let r=this.filterTobeUnSubscribedDataChannels(e,t);if(r.length===0)return;t.forEach(i=>{i._close()});let n=this.remoteDataChannelMap.get(e);return r.forEach(i=>{n&&n.delete(i.id)}),n&&n.size===0&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),r.map(i=>i.id)}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(let{user:i,mediaType:o}of e){let a=this.pendingRemoteTracks.filter(s=>{let{user:c,kind:l}=s;return o!==void 0?c.uid===i.uid&&o===l:c.uid===i.uid});a.forEach(s=>{let c=this.pendingRemoteTracks.indexOf(s);this.pendingRemoteTracks.splice(c,1)}),t=t.concat(a)}if(!this.connection||this.state!==Dt.Connected)return void t.forEach(i=>{let{user:o,kind:a}=i;var s;if(a===Ce.AUDIO)(s=o._audioTrack)===null||s===void 0||s._destroy(),o._audioTrack=void 0;else if(a===Ce.VIDEO){var c;(c=o._videoTrack)===null||c===void 0||c._destroy(),o._videoTrack=void 0}});let r=Js(e).call(e,(i,o)=>{let{user:a,mediaType:s}=o,c=this.filterTobeUnSubscribedTracks(a,s);return i.concat(c)},[]);if(r.length===0)return;await this.connection.stopReceiving(r.map(i=>{let[,{id:o}]=i;return o}));let n=this.createUnsubscribeAllMessage(r);return this.withdrawRemoteTracks(r),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),r.forEach(i=>{let[o,{kind:a}]=i;var s,c;if(a===Ce.VIDEO&&o._videoSSRC&&((s=this.connection)===null||s===void 0||s.setStatsRemoteVideoIsReady(o._videoSSRC,!1)),a===Ce.VIDEO)this.unbindRemoteTrackEvents(o._videoTrack),(c=o._videoTrack)===null||c===void 0||c._destroy(),o._videoTrack=void 0;else if(a===Ce.AUDIO){var l;this.unbindRemoteTrackEvents(o._audioTrack),(l=o._audioTrack)===null||l===void 0||l._destroy(),o._audioTrack=void 0}}),n}isPreSubScribe(e){return!this.connection||this.state!==Dt.Connected?!1:!!this.connection.getPreMedia(e)}async muteRemote(e,t){if(!this.connection)return;let r=this.remoteUserMap.get(e);if(!r)return void w.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!r.get(t))return void w.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));let n=t===Ce.VIDEO?e._videoSSRC:e._audioSSRC;n!==void 0&&this.connection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;let r=this.remoteUserMap.get(e);if(!r)return void w.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."));r.get(t)||w.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."))}getAllTracks(e){let t=this.localTrackMap.get(oe.LocalAudioTrack);if((t==null?void 0:t.track)instanceof pn){let r=t.track;return Array.from(this.localTrackMap.entries()).filter(n=>{let[i]=n;return i!==oe.LocalAudioTrack}).filter(n=>{let[i]=n;return!(e&&i===oe.LocalVideoLowTrack)}).map(n=>{let[,{track:i}]=n;return i}).concat(r.trackList)}return Array.from(this.localTrackMap.entries()).filter(r=>{let[n]=r;return!(e&&n===oe.LocalVideoLowTrack)}).map(r=>{let[,{track:n}]=r;return n})}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,r,n,i){if(e){let a=this.localTrackMap.get(oe.LocalAudioTrack),s=n?this.localTrackMap.get(oe.LocalVideoLowTrack):this.localTrackMap.get(oe.LocalVideoTrack);Se.publish(this.store.sessionId,{eventElapse:ti.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.track.getTrackLabel(),videoName:s==null?void 0:s.track.getTrackLabel(),screenshare:(s==null?void 0:s.track._hints.indexOf(lr.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;r||(r=[]);let a=r.find(c=>c instanceof Tr),s=n?(o=this.localTrackMap.get(oe.LocalVideoTrack))===null||o===void 0?void 0:o.track:r.find(c=>c instanceof ir);Se.publish(this.store.sessionId,{eventElapse:ti.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.getTrackLabel(),videoName:s==null?void 0:s.getTrackLabel(),screenshare:(s==null?void 0:s._hints.indexOf(lr.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,r,n){let i=n===Ce.VIDEO?r._videoSSRC:r._audioSSRC;i&&Se.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===Ce.VIDEO,audio:n===Ce.AUDIO,peerid:r.uid,subscribeRequestid:i,p2pid:this.store.p2pId,eventElapse:ti.measureFromSubscribeStart(this.store.clientId,i),preSsrc:this.isPreSubScribe(i)})}reset(){w.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new ii("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new Dg({},this.store):new ks({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();let e=this.localTrackMap.get(oe.LocalAudioTrack);if((e==null?void 0:e.track)instanceof pn){if(e.track.trackList.length>0){let t=e.track;e.track.trackList.forEach(r=>{t.removeAudioTrack(r)})}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=Dt.Disconnected}getStats(){var e;return(e=this.connection)===null||e===void 0?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return((t=this.connection)===null||t===void 0?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){let e=this.localTrackMap.get(oe.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){let e=this.localTrackMap.get(oe.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){let t=this.localTrackMap.get(e);return t&&t.track instanceof ir||t&&t.track instanceof Tr?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}getRemoteMedia(e){var t;let r=Array.from(Vo(t=this.remoteUserMap).call(t)).find(n=>n.uid===e);return r?{audioTrack:r.audioTrack,audioSSRC:r._audioSSRC,videoTrack:r.videoTrack,videoSSRC:r._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(r=>{let[n]=r;return{uid:n.uid,level:n.audioTrack?100*n.audioTrack._source.getAccurateVolumeLevel():0}}),t=this.localTrackMap.get(oe.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Lv(e).call(e,(r,n)=>r.level-n.level),e}async disconnectForReconnect(){this.connection&&(w.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=Dt.Reconnecting,L("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t]=e;var r;t._videoTrack&&t._videoTrack._player&&((r=t._videoTrack._player.getVideoElement())===null||r===void 0||r.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new Dg({},this.store):new ks({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(e=>{var t;let[r,{track:n}]=e;switch(r){case oe.LocalVideoTrack:me(t=n._hints).call(t,lr.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case oe.LocalAudioTrack:n instanceof pn?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);case oe.LocalVideoLowTrack:}}),this.emit(Le.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;Array.from(Vo(r).call(r)).forEach(n=>{this.setPendingRemoteMedia(t,n)}),this.emit(Le.MediaReconnectStart,t.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.localDataChannels.length!==0&&(this.localDataChannels.forEach(e=>{this.pendingLocalDataChannels.push(e)}),this.localDataChannels.length=0),this.remoteDataChannelMap.size!==0&&(Array.from(this.remoteDataChannelMap.entries()).forEach(e=>{let[t,r]=e;Array.from(Vo(r).call(r)).forEach(n=>{this.setPendingRemoteDataChannel(t,n)})}),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),w.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(let r of this.pendingRemoteDataChannels){let{user:n,id:i}=r;if((e instanceof pu?e.uid:e)===n.uid&&i===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(let r of this.pendingRemoteTracks){let{user:n,kind:i}=r;if((e instanceof pu?e.uid:e)===n.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return Ws(function*(){if(!t.connection||t.state!==Dt.Connected)return;let r=yield It(t.mutex.lock("From P2PChannel.restartICE")),n;try{n=yield It(t.connection.restartICE(e));let o=yield It(n.next());if(o.done)return;let a=o.value,s=yield a;switch(t.reportPCDisconnectedOrFailed(e),e){case Ro.TCP:t._pcStatsUploadType=Qc.TCP_RESTART;break;case Ro.RELAY:t._pcStatsUploadType=Qc.RELAY_RESTART;break;default:t._pcStatsUploadType=Qc.OLD_RESTART}t._isInRestartIce=!0,n.next(s)}catch(o){var i;(i=n)===null||i===void 0||i.throw(o)}finally{r()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;let e=this.connection.getStats(),t=this.localTrackMap.get(oe.LocalVideoTrack),r=this.localTrackMap.get(oe.LocalAudioTrack),n=e.videoSend.find(p=>p.ssrc===(t==null?void 0:t.ssrcs[0].ssrcId)),i=e.audioSend.find(p=>p.ssrc===(r==null?void 0:r.ssrcs[0].ssrcId));if(!n||!i)return 1;let o=Ca(this,Le.NeedSignalRTT),a=n?n.rttMs:void 0,s=i?i.rttMs:void 0,c=a&&s?(a+s)/2:a||s,l=(c&&o?(c+o)/2:c||o)||0,u=100*e.sendPacketLossRate*.7/50+.3*l/1500,d=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,f=t==null?void 0:t.track;if(f&&f._encoderConfig&&f._hints.indexOf(lr.SCREEN_TRACK)===-1){let p=f._encoderConfig.bitrateMax,m=e.bitrate.actualEncoded;if(p&&m){let g=(1e3*p-m)/(1e3*p);return $ee[g<.15?0:g<.3?1:g<.45?2:g<.6?3:4][d]}}return d}getDownlinkNetworkQuality(){if(!this.connection)return 0;let e=this.connection.getStats(),t=0;return Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n]=r,i=n._audioSSRC,o=n._videoSSRC,a=e.audioRecv.find(m=>m.ssrc===i),s=e.videoRecv.find(m=>m.ssrc===o);if(!a&&!s)return void(t+=1);let c=Ca(this,Le.NeedSignalRTT),l=e.rtt,u=(l&&c?(l+c)/2:l||c)||0,d=a?a.jitterMs:void 0,f=e.recvPacketLossRate,p=.7*f*100/50+.3*u/1500;d&&(p=.6*f*100/50+.2*u/1500+.2*d/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5}),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new he((t,r)=>{this.handleMuteLocalTrack(e,t,r)})}async replaceTrack(e,t){var r;if(w.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==Dt.Connected)return;let n=Array.from(this.localTrackMap.entries()).find(o=>{let[,{track:a}]=o;return e===a});if(!n)return;let i=n[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:i}]),this.bindLocalTrackEvents([{track:t,type:i}]),n[1].track=t),await((r=this.connection)===null||r===void 0?void 0:r.replaceTrack(t,n[1].id)),this.isPlanB){let o=n[1];o.id=t._mediaStreamTrack.id,this.localTrackMap.set(i,o)}if(i===oe.LocalVideoTrack&&!L("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ct().supportDualStreamEncoding){let o=this.localTrackMap.get(oe.LocalVideoLowTrack);if(o){let a=e._mediaStreamTrack.clone();o.track._originMediaStreamTrack.stop(),o.track._mediaStreamTrack=a,o.track._originMediaStreamTrack=a,await new he((s,c)=>{this.handleReplaceTrack(o.track,s,c,!0)})}}}filterTobePublishedTracks(e,t,r){let n=[],i=this.getAllTracks();e=lp(e=e.filter(c=>i.indexOf(c)===-1));let o,a=!1,s=this.localTrackMap.get(oe.LocalAudioTrack);for(let c of e){if(c instanceof ir&&(this.localTrackMap.has(oe.LocalVideoTrack)||a?new J(O.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:c,type:oe.LocalVideoTrack}),a=!0),t)){let l=this.getLowVideoTrack(c,r);n.push({track:l,type:oe.LocalVideoLowTrack})}if(c instanceof Tr)if(s){let l=s.track;if(l instanceof pn)Ik([c]),l.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0);else{let u=Zx([l,c]);w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(u.getTrackId(),"]")),this.replaceTrack(l,u)}}else o instanceof pn?(Ik([c]),o.addAudioTrack(c)):o||!c._useAudioElement&&Ct().webAudioMediaStreamDest&&!c._bypassWebAudio?o=Zx(o?[c,o]:[c]):o=c}return o&&(w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(o.getTrackId(),"]")),n.push({track:o,type:oe.LocalAudioTrack})),n}filterTobeUnpublishedTracks(e){let t=[],r=this.getAllTracks();e=lp(e=e.filter(n=>r.indexOf(n)!==-1));for(let n of e){if(n instanceof Tr){let i=this.localTrackMap.get(oe.LocalAudioTrack);if(!i)continue;i.track instanceof pn?(i.track.removeAudioTrack(n),this.unbindLocalAudioTrackEvents(n),i.track.trackList.length===0&&(t.push([oe.LocalAudioTrack,i]),i.track.close())):t.push([oe.LocalAudioTrack,i])}if(n instanceof ir){let i=this.localTrackMap.get(oe.LocalVideoTrack);if(!i)continue;t.push([oe.LocalVideoTrack,i]);let o=this.localTrackMap.get(oe.LocalVideoLowTrack);o&&t.push([oe.LocalVideoLowTrack,o])}}return t}filterTobePublishedDataChannels(e){return e=(e=lp(e)).filter(t=>this.localDataChannels.findIndex(r=>r.id===t.id)===-1)}filterTobeUnpublishedDataChannels(e){return e=(e=(e=lp(e)).filter(t=>this.localDataChannels.indexOf(t)!==-1)).filter(t=>t._originDataChannel)}bindLocalTrackEvents(e){e.forEach(t=>{let{track:r,type:n}=t;switch(n){case oe.LocalVideoTrack:r.addListener(ye.GET_STATS,this.handleGetLocalVideoStats),r.addListener(ye.GET_RTC_STATS,this.handleGetRTCStats),r.addListener(ye.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(ye.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(ye.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.addListener(ye.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.addListener(ye.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.addListener(ye.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(ye.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case oe.LocalAudioTrack:this.bindLocalAudioTrackEvents(r);case oe.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){e instanceof pn?e.trackList.forEach(r=>{r.addListener(ye.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(ye.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(ye.GET_STATS,this.handleGetLocalAudioStats),r.addListener(ye.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(ye.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(ye.GET_STATS,this.handleGetLocalAudioStats),e.addListener(ye.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(ye.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(ye.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(ye.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(ye.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(ye.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(t=>{let[r,{track:n}]=t;return{track:n,type:r}})),e.forEach(t=>{let{track:r,type:n}=t;switch(n){case oe.LocalVideoTrack:r.off(ye.GET_STATS,this.handleGetLocalVideoStats),r.off(ye.GET_RTC_STATS,this.handleGetRTCStats),r.off(ye.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(ye.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(ye.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.off(ye.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.off(ye.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.off(ye.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(ye.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case oe.LocalAudioTrack:this.unbindLocalAudioTrackEvents(r);case oe.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof pn?e.trackList.forEach(t=>{t.off(ye.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(ye.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(ye.GET_STATS,this.handleGetLocalAudioStats),t.off(ye.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(ye.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(ye.GET_STATS,this.handleGetLocalAudioStats),e.off(ye.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(ye.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(ye.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(ye.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(ye.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(ye.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof Op&&t.addListener(ye.GET_STATS,r=>{r(this.handleGetRemoteVideoStats(e))}),t instanceof kp&&t.addListener(ye.GET_STATS,r=>{r(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(ye.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;r.has(Ce.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),r.has(Ce.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)})}createGatewayPublishMessage(e,t){return e.map((r,n)=>{var i;let o,a,{track:s,type:c}=r;switch(c){case oe.LocalAudioTrack:o=Lt.Audio,a={dtx:s instanceof oS&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case oe.LocalVideoTrack:o=me(i=s._hints).call(i,lr.SCREEN_TRACK)?Lt.Screen:Lt.High,a=pc(pc({},a6(s)),{},{codec:this.store.codec,svc_mode:bk()});break;case oe.LocalVideoLowTrack:o=Lt.Low,a=pc(pc({},a6(s)),{},{codec:this.store.codec,svc_mode:bk()})}return{stream_type:o,attributes:a,ssrcs:t[n]}})}createGatewayUnpublishMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case oe.LocalVideoTrack:n=me(r=o._hints).call(r,lr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoLowTrack:n=Lt.Low}return{stream_type:n,ssrcs:a,mid:s}})}assignLocalTracks(e,t){e.forEach((r,n)=>{let{track:i,type:o}=r;this.localTrackMap.set(o,{track:i,id:t[n].id,ssrcs:t[n].localSSRC})})}withdrawLocalTracks(e){e.forEach(t=>{let[r]=t;this.localTrackMap.delete(r)})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(Le.PeerConnectionStateChange,t),t!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),t==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),L("NEW_ICE_RESTART")){var r;if(me(r=this._restartStates).call(r,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;let n=a=>{(e.iceConnectionState==="disconnected"||e.iceConnectionState==="checking"||e.iceConnectionState==="failed")&&(w.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(a)),Ca(this,Le.QueryClientConnectionState)==="CONNECTED"&&this.emit(Le.RequestRestartICE,a))},i=()=>{e.iceConnectionState!=="disconnected"&&e.iceConnectionState!=="checking"&&e.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),w.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(Le.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},o=L("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(L("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&Ct().supportPCSetConfiguration)n(Ro.RELAY),this._restartTimer=window.setTimeout(i,o);else if(Rr())n(Ro.UDP),this._restartTimer=window.setTimeout(i,4e3);else{if(n(Ro.TCP),Ct().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{n(Ro.RELAY),this._restartTimer=window.setTimeout(i,o)},o));this._restartTimer=window.setTimeout(i,o)}},800))}}else{if(t==="disconnected"&&e.iceConnectionState==="disconnected")return setTimeout(()=>{e.iceConnectionState==="disconnected"&&L("ICE_RESTART")&&Ca(this,Le.QueryClientConnectionState)==="CONNECTED"&&this.emit(Le.RequestRestartICE)},800),void setTimeout(()=>{e.peerConnectionState==="disconnected"&&(w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(Le.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);t==="failed"&&(w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(Le.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=t=>{t!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(t,")")),Se.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:t,tag:Cr.TRACER}).onSuccess(),this.emit(Le.IceConnectionStateChange,t)},e.onICETransportStateChange=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(t,")"))},e.onDTLSTransportStateChange=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(t,")"))},e.onDTLSTransportError=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(t,")"))},e.onFirstAudioDecoded=t=>{var r;let n=Array.from(Vo(r=this.remoteUserMap).call(r)).find(o=>o._audioSSRC===t);var i;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),(i=n.audioTrack)===null||i===void 0||i.emit(Np.FIRST_FRAME_DECODED),Se.firstRemoteFrame(this.store.sessionId,An.FIRST_AUDIO_DECODE,vr.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:ti.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=t=>{var r;let n=Array.from(Vo(r=this.remoteUserMap).call(r)).find(i=>i._audioSSRC===t);n&&Se.firstRemoteFrame(this.store.sessionId,An.FIRST_AUDIO_RECEIVED,vr.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:ti.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(t,r,n)=>{this.reportVideoFirstFrameDecoded(t,r,n)},e.onFirstVideoReceived=t=>{var r;let n=Array.from(Vo(r=this.remoteUserMap).call(r)).find(i=>i._videoSSRC===t);n&&Se.firstRemoteFrame(this.store.sessionId,An.FIRST_VIDEO_RECEIVED,vr.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:ti.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(t,r)=>{let n=t.candidateType==="relay",i=r.candidateType==="relay";r.candidateType!=="unknown"&&n===i||this.emit(Le.ConnectionTypeChange,n),w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Cu(r))," -> ").concat(JSON.stringify(Cu(t)),")"))},e.onSelectedRemoteCandidateChanged=(t,r)=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Cu(r))," -> ").concat(JSON.stringify(Cu(t)),")"))},e.onFirstVideoDecodedTimeout=t=>{this.reportVideoFirstFrameDecoded(t,void 0,void 0,!0)},e.getLocalVideoStats=()=>{let t=this.statsCollector.getLocalVideoTrackStats(),r=this.statsCollector.getRTCStats();return pc(pc({},t),r)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.getLocalVideoStats=void 0}filterTobeMutedTracks(e){let t=[];if(this.getAllTracks().indexOf(e)===-1)return t;let r=this.localTrackMap.get(oe.LocalAudioTrack);if(e instanceof Tr&&(r==null?void 0:r.track)instanceof pn)return r.track.isActive||t.push([oe.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(n&&(t.push(n),n[0]===oe.LocalVideoTrack)){let i=this.localTrackMap.get(oe.LocalVideoLowTrack);i&&t.push([oe.LocalVideoLowTrack,i])}return t}filterTobeUnmutedTracks(e){let t=[],r=this.localTrackMap.get(oe.LocalAudioTrack);if(e instanceof Tr&&(r==null?void 0:r.track)instanceof pn)return r.track.isActive&&t.push([oe.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(n)if(n[0]===oe.LocalVideoTrack){t.push(n);let i=this.localTrackMap.get(oe.LocalVideoLowTrack);i&&t.push([oe.LocalVideoLowTrack,i])}else t.push(n);return t}createMuteMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoTrack:n=me(r=o._hints).call(r,lr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalVideoLowTrack:n=Lt.Low}return{stream_type:n,ssrcs:a,mid:s}})}createUnmuteMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoTrack:n=me(r=o._hints).call(r,lr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalVideoLowTrack:n=Lt.Low}return{stream_type:n,ssrcs:a,mid:s}})}filterTobeUnSubscribedTracks(e,t){let r=[],n=this.remoteUserMap.get(e);if(!n)return r;if(t){let i=n.get(t);if(!i)return r;r.push([e,{kind:t,id:i}])}else Array.from(n.entries()).forEach(i=>{let[o,a]=i;r.push([e,{kind:o,id:a}])});return r}filterTobeUnSubscribedDataChannels(e,t){let r=[];return t.forEach(n=>{var i;(i=this.remoteDataChannelMap.get(e))!==null&&i!==void 0&&i.has(n.id)&&r.push(n)}),r}createUnsubscribeMessage(e){let t=[];return e.forEach(r=>{let[n,{kind:i,id:o}]=r;switch(i){case Ce.VIDEO:return void(n._videoSSRC&&t.push({stream_type:Ce.VIDEO,ssrcId:n._videoSSRC}));case Ce.AUDIO:return void(n._audioSSRC&&t.push({stream_type:Ce.AUDIO,ssrcId:n._audioSSRC}))}}),t}createUnsubscribeAllMessage(e){let t=new Map;return e.forEach(r=>{let[n,{kind:i}]=r;if(t.has(n)){let o=t.get(n);i===Ce.VIDEO?o|=hn.Video:o|=hn.Audio,t.set(n,o)}else i===Ce.VIDEO?t.set(n,hn.Video):t.set(n,hn.Audio)}),{users:Array.from(t.entries()).map(r=>{let[n,i]=r;return{stream_id:n.uid,stream_type:i}})}}withdrawRemoteTracks(e){e.forEach(t=>{let[r,{kind:n}]=t,i=this.remoteUserMap.get(r);i&&(i.delete(n),Array.from(i.entries()).length===0&&this.remoteUserMap.delete(r))})}async updateBitrateLimit(e){let t=this.localTrackMap.get(oe.LocalVideoTrack),r=this.localTrackMap.get(oe.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),r&&e.low_stream_uplink&&await r.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(e,t){return e.map((r,n)=>{var i;let{stream_type:o}=r;return(i=t.find(a=>{let{stream_type:s}=a;return o===s}))===null||i===void 0?void 0:i.attributes})}async tryToUnmuteAudio(e){for(let r=0;r<e.length;r++)if(e[r]instanceof Tr){var t;let n=this.filterTobeUnmutedTracks(e[r]);if(n.length===0)continue;await((t=this.connection)===null||t===void 0?void 0:t.unmuteLocal(n.map(o=>{let[,{id:a}]=o;return a})));let i=this.createUnmuteMessage(n);return void await Jt(this,Le.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!((t=this.connection)===null||t===void 0||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Le.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(Le.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Ln(SL(this.dtlsFailedCount,Kr)),this.emit(Le.RequestReconnect)}async reconnectP2P(){let e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await Kn(this,Le.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(Le.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(oe.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof ir)}throwIfTrackTypeNotMatch(e){if(e.filter(t=>t instanceof ir).length>1)throw new J(O.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(t=>t instanceof Tr).length>1&&(e.some(t=>t instanceof Tr&&t._bypassWebAudio)||!Ct().webAudioMediaStreamDest))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(let t of e){if(t instanceof ir&&this.pendingLocalTracks.some(r=>r instanceof ir))throw new J(O.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof Tr&&this.pendingLocalTracks.some(r=>r instanceof Tr)&&(!Ct().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some(r=>r instanceof Tr&&r._bypassWebAudio)))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){let r=!L("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ct().supportDualStreamEncoding,n=pc(pc({},{width:160,height:120,framerate:15,bitrate:50}),t),i;i=r?e._mediaStreamTrack.clone():Rk(e,n);let o=er(8,"track-low-"),a=new ir(i,pc(pc({},r&&{scaleResolutionDownBy:hk(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,o);return a.on(uh.TRANSCEIVER_UPDATED,s=>{e._updateRtpTransceiver(s,lm.LOW_STREAM)}),a._hints.push(lr.LOW_STREAM),e.on("sei-to-send",s=>{a.emit("sei-to-send",s)}),e.addListener(ye.NEED_CLOSE,()=>{a.close()}),a}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof ks){var i,o,a,s;let c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:l,dtlsTransportState:u,peerConnectionState:d}=this.connection,{local:f,remote:p}=await this.connection.getSelectedCandidatePair();Se.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:l,dtlsstate:u,connectionstate:d,intSucc:t?1:2,error:n,selectedLocalCandidateProtocol:(i=f==null?void 0:f.protocol)!==null&&i!==void 0?i:"",selectedLocalCandidateType:(o=f.candidateType)!==null&&o!==void 0?o:"",selectedLocalCandidateAddress:"".concat(f.address,":").concat(f.port),selectedRemoteCandidateProtocol:(a=p.protocol)!==null&&a!==void 0?a:"",selectedRemoteCandidateType:(s=p.candidateType)!==null&&s!==void 0?s:"",selectedRemoteCandidateAddress:"".concat(p.address,":").concat(p.port),restartCnt:r,preallocation:this.connection.isPreallocation})}}reportVideoFirstFrameDecoded(e,t,r,n){var i;let o=Array.from(Vo(i=this.remoteUserMap).call(i)).find(a=>a._videoSSRC===e);if(o){n||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());let a=this.store.keyMetrics,s=a.subscribe.find(c=>c.userId===o.uid&&c.type==="video");Se.firstRemoteVideoDecode(this.store.sessionId,An.FIRST_VIDEO_DECODE,vr.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:r,subscribeElapse:ti.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:a.requestAPEnd||0,apStart:a.requestAPStart||0,joinGwEnd:a.joinGatewayEnd||0,joinGwStart:a.joinGatewayStart||0,pcEnd:a.peerConnectionEnd||0,pcStart:a.peerConnectionStart||0,subscriberEnd:(s==null?void 0:s.subscribeEnd)||0,subscriberStart:(s==null?void 0:s.subscribeStart)||0,videoAddNotify:(s==null?void 0:s.streamAdded)||0,state:n?1:0,firstFrame:(s==null?void 0:s.firstFrame)||0})}}async remoteMediaSsrcChanged(e,t,r){if(!this.connection)return!1;let n=this.remoteUserMap.get(e);if(!n)return!1;let i=n.get(t);if(!i)return!1;let o=await this.connection.getRemoteSSRC(i);return o!==void 0&&o!==r}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(e=>{let[t,{track:r}]=e;t===oe.LocalVideoLowTrack?r._updateRtpTransceiver(void 0,lm.LOW_STREAM):r._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof ks&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===Qc.TCP_RESTART&&e===Ro.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,Qc.DISCONNECTED_OR_FAILED)))}},_e(ut.prototype,"startP2PConnection",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"startP2PConnection"),ut.prototype),_e(ut.prototype,"connect",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"connect"),ut.prototype),_e(ut.prototype,"updateRemoteRTPCapabilities",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"updateRemoteRTPCapabilities"),ut.prototype),_e(ut.prototype,"publishDataChannel",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"publishDataChannel"),ut.prototype),_e(ut.prototype,"unpublish",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"unpublish"),ut.prototype),_e(ut.prototype,"unpublishDataChannel",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"unpublishDataChannel"),ut.prototype),_e(ut.prototype,"unpublishLowStream",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"unpublishLowStream"),ut.prototype),_e(ut.prototype,"subscribeDataChannel",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"subscribeDataChannel"),ut.prototype),_e(ut.prototype,"subscribe",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"subscribe"),ut.prototype),_e(ut.prototype,"massSubscribe",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"massSubscribe"),ut.prototype),_e(ut.prototype,"unsubscribe",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"unsubscribe"),ut.prototype),_e(ut.prototype,"unsubscribeDataChannel",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"unsubscribeDataChannel"),ut.prototype),_e(ut.prototype,"massUnsubscribe",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"massUnsubscribe"),ut.prototype),_e(ut.prototype,"muteRemote",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"muteRemote"),ut.prototype),_e(ut.prototype,"unmuteRemote",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"unmuteRemote"),ut.prototype),_e(ut.prototype,"hasRemoteMediaWithLock",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"hasRemoteMediaWithLock"),ut.prototype),_e(ut.prototype,"disconnectForReconnect",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"disconnectForReconnect"),ut.prototype),_e(ut.prototype,"updateBitrateLimit",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"updateBitrateLimit"),ut.prototype),_e(ut.prototype,"remoteMediaSsrcChanged",[_i],Object.getOwnPropertyDescriptor(ut.prototype,"remoteMediaSsrcChanged"),ut.prototype),ut);function _i(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,o=await i.lock("From P2PChannel.".concat(t));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await n.apply(this,s)}finally{o()}},r}var Zte={};function Mg(e){(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&w.debug("install service ".concat(e.name)),Zte[e.name]=e}function ty(e){let t=Zte[e];if(!t)throw new J(O.INVALID_OPERATION,"".concat(e," not found, please use AgoraRTC.use(").concat(e,"Service) to load it first"));return t}function dH(e,t){return ty("DataStream").create(e,t)}function hH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hH(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var a8e=Date.now(),s8e=20,Ak=new Map,Sb=new Map;async function ere(e){let t=Ak.get(e),r=Array.isArray(t)&&t[t.length-1],n=Sb.get(e);if(!r)return void(n.isSyncing=!1);let i={uid:r.uid,payload:r.payload};n.firstRecvTs===0&&(n.firstRecvTs=r.recvTs,n.firstSendTs=r.sendTs);let o=r.sendTs-n.firstSendTs,a=o-(Date.now()-n.firstRecvTs);a>0&&(n.firstRecvTs=Date.now()-o);let s=r.mediaDelay+a;s<=0?(t.pop(),tre(r.context,i),s=0):s=Math.min(s,s8e),setTimeout(()=>t.length&&ere(e),s)}function tre(e,t){e.safeEmit(gt.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function c8e(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return tre(r,{uid:e.uid,payload:e.payload});let n="".concat(r.id,"-").concat(e.uid),i=Ak.get(n)||[],o=i.findIndex(l=>e.sendTs>=l.sendTs),a=fH(fH({},e),{},{context:r,mediaDelay:t,recvTs:Date.now()});o===-1?i.push(a):i.splice(o,0,a),Ak.set(n,i);let s=!1;var c;Sb.has(n)?s=!((c=Sb.get(n))===null||c===void 0||!c.isSyncing):Sb.set(n,{isSyncing:s,firstRecvTs:0,firstSendTs:0}),s||ere(n)}var l8e=St().name;function pH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pH(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Lp="websdk_ng_cache_parameter",u8e=L("MAX_PRELOAD_ASYNC_LENGTH"),d8e=1e4,Fd=new Map,Vd=[],tA=null,rA=0,nA=0,__=new Map,h8e=function(e,t){let r=[],n=0,i=async()=>{let o=r.shift();o&&await o(),r.length>0&&n<t?i():n--};return async function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return new he(async(c,l)=>{r.push(async()=>{try{let u=await e(...a);c(u)}catch(u){l(u)}}),n<t&&(n++,i())})}}(rre,u8e),iA=Zi.CancelToken.source();async function rre(e,t,r,n,i,o){try{if(!L("ENABLE_PRELOAD"))return;if(!Ct().supportWebCrypto)return void Zu(()=>{w.warn("Your browser does not support preloading, this feature  be run in a secure environment")},"preload_webcrypto_not_supported");if(!r&&r!==null)throw new J(O.INVALID_PARAMS,"Invalid token: ".concat(r,". If you don not use token, set it to null"));r&&Nn(r,"token",1,2047),Nn(e,"appid",1,2047),uC(t),n&&dC(n);let a=up();w.debug("preload channel ".concat(t,", uid is ").concat(n));let s={appId:e,cname:t,token:r||e,uid:typeof n!="string"?n:null,sid:a,proxyServer:i},c,l;typeof n=="string"?(s.stringUid=n,[l,c]=await he.all([k6e(n,{sid:a,appId:e},iA.token),_$(mH(mH({},s),{},{token:r||e,uid:0}),iA.token)]),s.uid=l.uid,c.gatewayInfo.uid=s.uid,c.gatewayInfo.res.uid=s.uid):(o&&(s.stringUid=o),c=await _$(s,iA.token));let u={sid:a,appId:e,cname:t,token:r||e,uid:s.stringUid||n,intUid:s.uid||c.gatewayInfo.uid,stringUid:s.stringUid,ts:Date.now(),sua:l,ap:c};await async function(d){let f;try{d.uid&&nre({appId:d.appId,cname:d.cname,token:d.token,uid:d.uid,stringUid:d.stringUid});let p=are(d),m=await async function(y,v){try{let E=await window.crypto.subtle.importKey("raw",Mee(v),"AES-GCM",!1,["encrypt"]),b=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},E,qd(window.btoa(JSON.stringify(y))));return Vu(new Uint8Array(b))}catch{return}}(d,d.token||d.appId);if(!m)return;f=ore(Lp);let g=f?JSON.parse(f):[];g.push({[p]:m}),g.length>L("AP_CACHE_NUM")&&g.shift(),dS(Lp,JSON.stringify(g))}catch(p){w.warn("Error caching server parameters:",p.message),dS(Lp,"")}}(u),rA++}catch(a){throw nA++,function(s){tA||(tA=window.setTimeout(()=>{let l="";__.forEach((u,d)=>{l+="".concat(d,": ").concat(u," ;")}),Se.reportApiInvoke(null,{name:Qr.PRELOAD,options:{success:rA,failed:nA,err:l}}).onError(s),rA=0,nA=0,__.clear(),tA=null},d8e));let c=__.get(s.code)||0;__.set(s.code,c+1)}(a),a}}async function gH(e){try{let t=nre(e);if(!t||e.cloudProxyServer!=="disabled")return;let r=await async function(n,i){try{let o=await window.crypto.subtle.importKey("raw",Mee(i),"AES-GCM",!1,["decrypt"]),a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},o,qd(n));return JSON.parse(window.atob(Vu(new Uint8Array(a))))}catch{return}}(t,e.token||e.appId);if(!r||!function(n,i){return n.cname===i.cname&&n.appId===i.appId&&n.token===i.token?i.stringUid?n.stringUid===i.stringUid:typeof i.uid=="number"?n.uid===i.uid:n.uid==i.uid:!1}(r,e))return;if(r&&Date.now()-r.ts<L("AP_CACHE_LIFETIME"))return r}catch(t){w.warn("Error get preloadInfo",t.message)}}function nre(e){let t;try{if(t=ore(Lp),!t)return;let r=JSON.parse(t),n=are(e),i=function(a,s){for(let c=a.length-1;c>=0;c--)if(s(a[c]))return c;return-1}(r,a=>n in a);if(i===-1)return;let o=r.splice(i,1)[0];return dS(Lp,JSON.stringify(r)),o[n]}catch(r){w.warn("Error delete preload info: ".concat(t),r.message),dS(Lp,"")}}function WL(e){if(e){let t=Fd.get(e);t&&(window.clearTimeout(t),t=null,Fd.delete(e)),me(Vd).call(Vd,e)||e.cloudProxyServer!=="disabled"||Vd.push(e)}if(Fd.size<L("AP_CACHE_NUM")&&Vd.length>0){let t=Vd.shift();Fd.set(t,window.setTimeout(async()=>{let{appId:r,cname:n,token:i,stringUid:o,uid:a,proxyServer:s}=t;try{await h8e(r,n,i,a,s,o),Fd.has(t)&&WL(t)}catch(c){w.warn("update preload failed",c.message),ire(t)}},L("AP_UPDATE_INTERVAL")))}}function ire(e){let t=Vd.indexOf(e);t!==-1&&Vd.splice(t,1);let r=Fd.get(e);r&&(window.clearTimeout(r),r=null,Fd.delete(e),WL())}function yH(e,t){let r=e.sua,n=e.ap;t&&r&&Se.reqUserAccount(e.sid,{lts:r.requestTime,elapse:r.elapse,success:!0,serverAddr:r.url,stringUid:t,uid:e.intUid,errorCode:null,extend:r.req}),Se.reportResourceTiming(e.ap.url,e.sid),Se.joinWebProxyAP(e.sid,{lts:n.requestTime,elapse:n.elapse,sucess:1,apServerAddr:n.url,turnServerAddrList:n.proxyInfo.addresses.map(i=>i.ip).join(","),eventType:"disabled",unilbsServerIds:[Br.CHOOSE_SERVER,Br.CLOUD_PROXY_FALLBACK].toString()}),Se.joinChooseServer(e.sid,{lts:n.requestTime,elapse:n.elapse,succ:!0,csAddr:n.url,opid:n.opid,serverList:n.gatewayInfo.gatewayAddrs.map(i=>i.address),ec:null,cid:n.gatewayInfo.cid.toString(),uid:n.gatewayInfo.uid.toString(),csIp:n.gatewayInfo.csIp,unilbsServerIds:[Br.CHOOSE_SERVER].toString(),isHttp3:n.isHttp3})}function ore(e){return window.atob(window.localStorage.getItem(e)||"")}function dS(e,t){window.localStorage.setItem(e,window.btoa(t))}function are(e){let t="".concat(e.appId,"_").concat(e.cname);return typeof e.uid=="string"&&(t+="_s_".concat(e.uid)),typeof e.uid=="number"&&(t+="_".concat(e.uid)),e.token&&(t+="_".concat(e.token)),Uee(t)}function f8e(e){let t=function(){let r=g8e.pop();return r?(r.offset=r.limit=0,r):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(r,n){let i=r.appId;i!==void 0&&(Fr(n,10),eu(n,i));let o=r.cid;o!==void 0&&(Fr(n,16),Fr(n,o));let a=r.cname;a!==void 0&&(Fr(n,26),eu(n,a));let s=r.deviceId;s!==void 0&&(Fr(n,34),eu(n,s));let c=r.elapse;c!==void 0&&(Fr(n,40),tu(n,c));let l=r.fileSize;l!==void 0&&(Fr(n,48),tu(n,Of(l)));let u=r.height;u!==void 0&&(Fr(n,56),tu(n,Of(u)));let d=r.jpg;d!==void 0&&(Fr(n,66),Fr(n,d.length),vH(n,d));let f=r.networkType;f!==void 0&&(Fr(n,72),tu(n,Of(f)));let p=r.osType;p!==void 0&&(Fr(n,80),tu(n,Of(p)));let m=r.requestId;m!==void 0&&(Fr(n,90),eu(n,m));let g=r.sdkVersion;g!==void 0&&(Fr(n,98),eu(n,g));let y=r.sequence;y!==void 0&&(Fr(n,104),tu(n,Of(y)));let v=r.sid;v!==void 0&&(Fr(n,114),eu(n,v));let E=r.timestamp;E!==void 0&&(Fr(n,120),tu(n,E));let b=r.uid;b!==void 0&&(Fr(n,128),Fr(n,b));let S=r.vid;S!==void 0&&(Fr(n,136),Fr(n,S));let A=r.width;A!==void 0&&(Fr(n,144),tu(n,Of(A)));let N=r.service;N!==void 0&&(Fr(n,152),Fr(n,N));let D=r.callbackData;D!==void 0&&(Fr(n,162),Fr(n,D.length),vH(n,D));let M=r.ticket;M!==void 0&&(Fr(n,170),eu(n,M));let H=r.vendorConfigs;H!==void 0&&(Fr(n,178),eu(n,H))}(e,t),function(r){let n=r.bytes,i=r.limit;return n.length===i?n:n.subarray(0,i)}(t)}function p8e(e){return function(r){let n={};e:for(;!y8e(r);){let i=ry(r);switch(i>>>3){case 0:break e;case 1:n.code=ry(r);break;case 2:n.msg=EH(r,ry(r));break;case 3:n.requestId=EH(r,ry(r));break;case 4:n.timestamp=v8e(r,!1);break;default:m8e(r,7&i)}}return n}({bytes:t=e,offset:0,limit:t.length});var t}function m8e(e,t){switch(t){case 0:for(;128&is(e););break;case 2:oA(e,ry(e));break;case 5:oA(e,4);break;case 1:oA(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function Of(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var g8e=[];function oA(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function y8e(e){return e.offset>=e.limit}function fC(e,t){let r=e.bytes,n=e.offset,i=e.limit,o=n+t;if(o>r.length){let a=new Uint8Array(2*o);a.set(r),e.bytes=a}return e.offset=o,o>i&&(e.limit=o),n}function sre(e,t){let r=e.offset;if(r+t>e.limit)throw new Error("Read past limit");return e.offset+=t,r}function vH(e,t){let r=fC(e,t.length);e.bytes.set(t,r)}function EH(e,t){let r=sre(e,t),n=String.fromCharCode,i=e.bytes,o="",a="";for(let s=0;s<t;s++){let c,l,u,d,f=i[s+r];128&f?(224&f)==192?s+1>=t?a+=o:(c=i[s+r+1],(192&c)!=128?a+=o:(d=(31&f)<<6|63&c,d<128?a+=o:(a+=n(d),s++))):(240&f)==224?s+2>=t?a+=o:(c=i[s+r+1],l=i[s+r+2],(49344&(c|l<<8))!=32896?a+=o:(d=(15&f)<<12|(63&c)<<6|63&l,d<2048||d>=55296&&d<=57343?a+=o:(a+=n(d),s+=2))):(248&f)==240?s+3>=t?a+=o:(c=i[s+r+1],l=i[s+r+2],u=i[s+r+3],(12632256&(c|l<<8|u<<16))!=8421504?a+=o:(d=(7&f)<<18|(63&c)<<12|(63&l)<<6|63&u,d<65536||d>1114111?a+=o:(d-=65536,a+=n(55296+(d>>10),56320+(1023&d)),s+=3))):a+=o:a+=n(f)}return a}function eu(e,t){let r=t.length,n=0;for(let a=0;a<r;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<r&&(s=(s<<10)+t.charCodeAt(++a)-56613888),n+=s<128?1:s<2048?2:s<65536?3:4}Fr(e,n);let i=fC(e,n),o=e.bytes;for(let a=0;a<r;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<r&&(s=(s<<10)+t.charCodeAt(++a)-56613888),s<128?o[i++]=s:(s<2048?o[i++]=s>>6&31|192:(s<65536?o[i++]=s>>12&15|224:(o[i++]=s>>18&7|240,o[i++]=s>>12&63|128),o[i++]=s>>6&63|128),o[i++]=63&s|128)}}function is(e){return e.bytes[sre(e,1)]}function _H(e,t){let r=fC(e,1);e.bytes[r]=t}function ry(e){let t,r=0,n=0;do t=is(e),r<32&&(n|=(127&t)<<r),r+=7;while(128&t);return n}function Fr(e,t){for(t>>>=0;t>=128;)_H(e,127&t|128),t>>>=7;_H(e,t)}function v8e(e,t){let r,n=0,i=0,o=0;return r=is(e),n=127&r,128&r&&(r=is(e),n|=(127&r)<<7,128&r&&(r=is(e),n|=(127&r)<<14,128&r&&(r=is(e),n|=(127&r)<<21,128&r&&(r=is(e),i=127&r,128&r&&(r=is(e),i|=(127&r)<<7,128&r&&(r=is(e),i|=(127&r)<<14,128&r&&(r=is(e),i|=(127&r)<<21,128&r&&(r=is(e),o=127&r,128&r&&(r=is(e),o|=(127&r)<<7))))))))),{low:n|i<<28,high:i>>>4|o<<24,unsigned:t}}function tu(e,t){let r=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=i===0?n===0?r<16384?r<128?1:2:r<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:i<128?9:10,a=fC(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=o!==9?128|i:127&i;case 8:s[a+7]=o!==8?n>>>21|128:n>>>21&127;case 7:s[a+6]=o!==7?n>>>14|128:n>>>14&127;case 6:s[a+5]=o!==6?n>>>7|128:n>>>7&127;case 5:s[a+4]=o!==5?128|n:127&n;case 4:s[a+3]=o!==4?r>>>21|128:r>>>21&127;case 3:s[a+2]=o!==3?r>>>14|128:r>>>14&127;case 2:s[a+1]=o!==2?r>>>7|128:r>>>7&127;case 1:s[a]=o!==1?128|r:127&r}}var bH={},wH={},hS=4294967296,E8e=hS*hS,SH=E8e/2;cre(0,!0);var TH=cre(0),_8e=F0(0,-2147483648,!1),b8e=F0(-1,2147483647,!1);function cre(e,t){let r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=wH[e],n)?n:(r=F0(e,0,!0),i&&(wH[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=bH[e],n)?n:(r=F0(e,e<0?-1:0,!1),i&&(bH[e]=r),r)}function F0(e,t,r){return{low:0|e,high:0|t,unsigned:!!r}}function w8e(e,t){if(isNaN(e))return TH;{if(e<=-SH)return _8e;if(e+1>=SH)return b8e}return e<0?TH:F0(e%hS|0,e/hS|0,t)}function CH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var S8e=class lre extends _r{get connectionState(){return this._connectionState}set connectionState(t){if(this._connectionState===t)return;let r=this._connectionState;this._connectionState=t,this.emit(Ls.CONNECTION_STATE_CHANGE,t,r)}get quality(){return this._quality}set quality(t){this._quality=t>1?1:t<.1?.1:t,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(t){var r;super(),I(this,"name","AgoraRTCImageModeration"),I(this,"_connectionState",pa.CONNECTING),I(this,"_sequence",0),I(this,"_moderationStartTime",void 0),I(this,"_workerConnection",void 0),I(this,"_workerMessageLengthLimit",void 0),I(this,"_qualityRatio",void 0),I(this,"_connectInfo",void 0),I(this,"_cancelTokenSource",Zi.CancelToken.source()),I(this,"_retryConfig",void 0),I(this,"_moderationInterval",void 0),I(this,"_moderationTimer",null),I(this,"_moderationMode",1),I(this,"_quality",1),I(this,"_qualityTimer",null),I(this,"_ticket",void 0),I(this,"_moderationIntervalMinimum",void 0),I(this,"_uploadFailedNum",0),I(this,"_uploadNum",0),I(this,"_uploadTimer",null),I(this,"_extraInfo",void 0),I(this,"_vendor",""),I(this,"_encoder",new TextEncoder),I(this,"_moderationId",void 0),I(this,"inspectImage",()=>{if(this.connectionState!==pa.CONNECTED)throw new q(O.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===pa.CONNECTED?this.requestToInspectImage():w.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=er(5,"image-moderation-"),this._workerMessageLengthLimit=L("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=L("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(r=t.interval)!==null&&r!==void 0?r:1e3,t.extraInfo&&(this._extraInfo=this._encoder.encode(t.extraInfo)),t.vendor&&(this._vendor=t.vendor),this._qualityRatio=L("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new P0("worker-"+this._moderationId,Kr),this.on(Ls.STATE_CHANGE,(n,i)=>{w.debug("[".concat(this._moderationId,"] Moderation operation :").concat(Sf[n]," ").concat(i||""))}),this.handleWorkerEvents()}async init(t,r){this.emit(Ls.STATE_CHANGE,Sf.CONNECT_AP),this._connectInfo=t;let n=this._cancelTokenSource.token;return this._retryConfig=r,new he((i,o)=>{this.on(Ls.CONNECTION_STATE_CHANGE,(a,s)=>{a===pa.CONNECTED&&i()}),this.requestAP(t,n,r).then(a=>{this.connectWorker(a)}).catch(a=>{o(a)})})}updateConfig(t){var r;this._moderationInterval=(r=t.interval)!==null&&r!==void 0?r:1e3,t.extraInfo&&(this._extraInfo=this._encoder.encode(t.extraInfo)),t.vendor&&(this._vendor=t.vendor),w.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(t))),this.connectionState===pa.CONNECTED&&this.inspectImage()}async requestAP(t,r,n){let i=L("WEBCS_DOMAIN").map(c=>"https://".concat(c,"/api/v1")),o=await function(c,l,u,d){let{appId:f,areaCode:p,cname:m,sid:g,token:y,uid:v}=l;Pp++;let E="moderation_plugin",b={service_name:E,json_body:JSON.stringify({appId:f,areaCode:p,cname:m,command:"allocateEdge",requestId:Pp,seq:Pp,sid:g,appToken:y,ts:Date.now(),uid:v+""})},S,A,N=c[0];return nc(async()=>{S=Date.now();let D=await ic(N,{data:b,cancelToken:u,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(A=Date.now()-S,D.code!==0){let V=new q(O.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+D.code,{retry:!0,responseTime:A});throw w.error(V.toString()),V}let M=JSON.parse(D.json_body);if(M.code!==200){let V=new q(O.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(M.code,", reason: ").concat(M.reason),{code:M.code,responseTime:A});throw w.error(V.toString()),V}if(!M.servers||!Array.isArray(M.servers)||M.servers.length===0){let V=new q(O.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:M.code,responseTime:A});throw w.error(V.toString()),V}if(!M.servers.some(V=>!!V.wss)){let V=new q(O.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:M.code,responseTime:A});throw w.error(V.toString()),V}let H=L("IMAGE_MODERATION_WORKER_HOST");return{addressList:M.servers.map(V=>{let{address:G,wss:Y}=V;if(G&&Y)return"wss://".concat(G.replace(/\./g,"-"),".").concat(H,":").concat(Y,"/moderation")}).filter(V=>!!V),workerToken:M.workerToken,vid:M.vid,ticket:M.appTicket,responseTime:A}},(D,M)=>(Se.apworkerEvent(g,{success:!0,sc:200,serviceName:E,responseDetail:JSON.stringify(D.addressList),firstSuccess:M===0,responseTime:A,serverIp:c[M%c.length]}),!1),(D,M)=>(Se.apworkerEvent(g,{success:!1,sc:D.data&&D.data.code||200,serviceName:E,responseTime:A,serverIp:c[M%c.length]}),!!(D.code!==O.OPERATION_ABORTED&&D.code!==O.UNEXPECTED_RESPONSE||D.data&&D.data.retry)&&(N=c[(M+1)%c.length],!0)),d)}(i,t,r,n);this.emit(Ls.STATE_CHANGE,Sf.AP_CONNECTED);let{addressList:a,ticket:s}=o;return this._ticket=s,a}async connectWorker(t){this.emit(Ls.STATE_CHANGE,Sf.CONNECT_WORKER),await this._workerConnection.init(t,1e4)}handleWorkerEvents(){this._workerConnection.on(We.CONNECTED,async()=>{this.emit(Ls.STATE_CHANGE,Sf.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=pa.CONNECTED}),this._workerConnection.on(We.CLOSED,()=>{this.connectionState=pa.CLOSED}),this._workerConnection.on(We.FAILED,()=>{this.connectionState=pa.CLOSED}),this._workerConnection.on(We.RECONNECTING,()=>{this.connectionState=this.connectionState===pa.CONNECTED?pa.RECONNECTING:pa.CONNECTING}),this._workerConnection.on(We.ON_MESSAGE,async t=>{if(t.data instanceof ArrayBuffer){let r=p8e(new Uint8Array(t.data));L("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&w.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(r)),this._uploadNum++,r.code===void 0||r.code===0||(this._uploadFailedNum++,w.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(r.code,", msg is ").concat(r.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{Se.reportApiInvoke(this._connectInfo.sid||null,{name:Qr.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,r.code],tag:Cr.TRACER}).onError(new q(O.IMAGE_MODERATION_UPLOAD_FAILED,r.msg)),this._uploadTimer=null},L("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else w.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(We.WILL_RECONNECT,(t,r,n)=>{t==="recover"&&n(t),n("tryNext")}),this._workerConnection.on(We.REQUEST_NEW_URLS,(t,r)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(t).catch(r)})}static intToLong(t){return{low:t|=0,high:t>>31,unsigned:t>=0}}async requestToInspectImage(){let t=Ca(this,Ls.CLIENT_LOCAL_VIDEO_TRACK),r={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(t){if(!t.isPlaying)return void(L("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&w.debug("Only the track being played can be inspected"));this._sequence++;let n=await this.generateRequestData(t,r);this._workerConnection.sendMessage(n,!0,!0)}else L("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&w.debug("Only the track being published can be inspected")}async generateRequestData(t,r){let{appId:n,cname:i,cid:o,vid:a,sid:s,uid:c}=r,l=Date.now(),u=await t.getCurrentFrameImage("image/jpeg",this.quality),d=await bte(u,n,i),f=this._sequence+"-"+o+"-"+c+"-"+l+"-"+er(12,""),p={appId:n,cid:o,cname:i,deviceId:"",elapse:lre.intToLong(Number(l-this._moderationStartTime)),fileSize:u.buffer.byteLength,height:u.height,width:u.width,jpg:d,networkType:6,osType:7,requestId:f,sdkVersion:"4.22.0",sequence:this._sequence,sid:s,timestamp:w8e(l),uid:c,vid:a,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};this._extraInfo===void 0&&delete p.callbackData;let m=f8e(p);if(m.byteLength<this._workerMessageLengthLimit){if(L("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){let g=function(y){for(var v=1;v<arguments.length;v++){var E=arguments[v]!=null?arguments[v]:{};v%2?CH(Object(E),!0).forEach(function(b){I(y,b,E[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(E)):CH(Object(E)).forEach(function(b){Object.defineProperty(y,b,Object.getOwnPropertyDescriptor(E,b))})}return y}({},p);delete g.jpg,w.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(g))}return m}{let g=this.quality*this._qualityRatio;return this.quality=g,await this.generateRequestData(t,{appId:n,cname:i,cid:o,vid:a,sid:s,uid:c})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Zi.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=pa.CLOSED,this.emit(Ls.STATE_CHANGE,Sf.CLOSED)}};function ure(e){if(Wt(e.interval,"interval",1e3,1/0),e&&e.extraInfo&&e.extraInfo.length>1024)throw new q(O.INVALID_PARAMS,"config.extraInfo length cannot exceed 1024 bytes");if(e&&e.vendor&&e.vendor.length>1024)throw new q(O.INVALID_PARAMS,"config.vendor length cannot exceed 1024 bytes")}var T8e={name:"ImageModeration",create:function(e){let{config:t}=e;return ure(t),new S8e(t)}},RH,IH,xH,AH,NH,OH,kH,PH,DH,LH,MH,jH,UH,FH,VH,BH,$H,HH,zH,GH,WH,KH,qH,YH,XH,JH,QH,ZH,e7,t7,r7,n7,i7,o7,a7,s7,c7,l7,u7,d7,pe;function h7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function js(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h7(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}ii.setLogger(w);var C8e=(RH=De(),IH=De({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof fp))return[t];t=[t]}return t.map(r=>r?Object(r).toString():"null")}}),xH=De({argsMap:(e,t)=>(t||(t=[]),Array.isArray(t)||t.trackMediaType!==Wm.DATA?(Array.isArray(t)||(t=[t]),t.map(r=>r.getTrackId())):[t.getChannelId()])}),AH=De({argsMap:(e,t,r,n)=>[typeof t=="object"?t.uid:t,r,n]}),NH=De({argsMap:(e,t,r)=>[t,r]}),OH=De({argsMap:(e,t)=>t.map(r=>{let{user:n,mediaType:i}=r;return[n==null?void 0:n.uid,i]})}),kH=De({argsMap:(e,t,r,n)=>[typeof t=="object"?t.uid:t,r,n]}),PH=De({argsMap:(e,t)=>t.map(r=>{let{user:n,mediaType:i}=r;return{uid:n==null?void 0:n.uid,mediaType:i}})}),DH=De(),LH=De(),MH=De(),jH=De(),UH=De(),FH=De(),VH=De(),BH=De(),$H=De(),HH=De(),zH=De(),GH=De(),WH=De(),KH=De(),qH=De({argsMap:(e,t)=>[t]}),YH=De(),XH=De(),JH=De(),QH=De(),ZH=De(),e7=De(),t7=De(),r7=De(),n7=De({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),i7=De(),o7=De(),a7=De(),s7=De(),c7=De(),l7=De(),u7=De({reportResult:!0}),d7=De(),pe=class extends _r{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return((e=this._config)===null||e===void 0?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e){let t;if(super(),I(this,"store",void 0),I(this,"_uid",void 0),I(this,"_channelName",void 0),I(this,"_uintUid",void 0),I(this,"_users",[]),I(this,"_config",void 0),I(this,"_clientId",void 0),I(this,"_appId",void 0),I(this,"_sessionId",null),I(this,"_key",void 0),I(this,"_rtmConfig",{}),I(this,"_joinInfo",void 0),I(this,"_gateway",void 0),I(this,"_statsCollector",void 0),I(this,"_configDistribute",void 0),I(this,"_leaveMutex",new ii("client-leave")),I(this,"_publishMutex",new ii("client-publish")),I(this,"_renewTokenMutex",new ii("client-renewtoken")),I(this,"_subscribeMutex",new ii("client-subscribe")),I(this,"_encryptionMode","none"),I(this,"_encryptionSecret",null),I(this,"_encryptionSalt",null),I(this,"_encryptDataStream",!1),I(this,"_encryptDataStreamKey",null),I(this,"_encryptDataStreamIv",null),I(this,"_proxyServer",void 0),I(this,"_turnServer",{servers:[],mode:"auto"}),I(this,"_cloudProxyServerMode","disabled"),I(this,"_isDualStreamEnabled",!1),I(this,"_defaultStreamFallbackType",void 0),I(this,"_lowStreamParameter",void 0),I(this,"_streamFallbackTypeCacheMap",new Map),I(this,"_remoteStreamTypeCacheMap",new Map),I(this,"_axiosCancelSource",Zi.CancelToken.source()),I(this,"_audioVolumeIndicationInterval",void 0),I(this,"_networkQualityInterval",void 0),I(this,"_userOfflineTimeout",void 0),I(this,"_streamRemovedTimeout",void 0),I(this,"_liveTranscodeStreamingClient",void 0),I(this,"_liveRawStreamingClient",void 0),I(this,"_channelMediaRelayClient",void 0),I(this,"_networkQualitySensitivity","normal"),I(this,"_p2pChannel",void 0),I(this,"_useLocalAccessPoint",!1),I(this,"_setLocalAPVersion",void 0),I(this,"_joinAndNotLeaveYet",!1),I(this,"_numberOfJoinCount",0),I(this,"_remoteDefaultVideoStreamType",void 0),I(this,"_inspect",void 0),I(this,"_moderation",void 0),I(this,"_license",void 0),I(this,"_pendingPublishedUsers",[]),I(this,"ntpAlignErrorCount",0),I(this,"remoteInboundOffset",0),I(this,"_handleLocalTrackEnable",(r,n,i)=>{this.publish(r,!1).then(n).catch(i)}),I(this,"_handleLocalTrackDisable",(r,n,i)=>{this.unpublish(r).then(n).catch(i)}),I(this,"_handleUserOnline",r=>{if(L("BLOCK_LOCAL_CLIENT")&&_d(r.uid,this.channelName))return void w.debug("[".concat(r.uid,"] will be ignored in local"));this.isStringUID&&typeof r.uid!="string"&&w.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));let n=this._users.find(i=>i.uid===r.uid);if(n)n._trust_in_room_=!0,n._is_pre_created&&(n._is_pre_created=!1,this.safeEmit(gt.USER_JOINED,n));else{let i=new pu(r.uid,r.uint_id||r.uid);this._users.push(i),w.debug("[".concat(this._clientId,"] user online"),r.uid),this.safeEmit(gt.USER_JOINED,i)}}),I(this,"_handleUserOffline",r=>{if(L("BLOCK_LOCAL_CLIENT")&&_d(r.uid,this.channelName))return;let n=this._users.find(i=>i.uid===r.uid);n&&(this._handleRemoveStream(r),this._handleRemoveDataChannels(r),n._audio_pre_subscribed||n._video_pre_subscribed?n._is_pre_created=!0:tS(this._users,n),this._remoteStreamTypeCacheMap.delete(n.uid),this._streamFallbackTypeCacheMap.delete(n.uid),w.debug("[".concat(this._clientId,"] user offline"),r.uid,"reason:",r.reason),this.safeEmit(gt.USER_LEAVED,n,r.reason))}),I(this,"_handleAddAudioOrVideoStream",(r,n,i,o,a,s,c)=>{if(L("BLOCK_LOCAL_CLIENT")&&_d(n,this.channelName))return;let l=this._users.find(d=>d.uid===n);if(!l)return void w.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));w.debug("[".concat(this._clientId,"] stream added with uid ").concat(n,", type ").concat(r)),this.store.subscribe(l.uid,r,void 0,void 0,void 0,Date.now());let u=r==="audio"?l.hasAudio:l.hasVideo;l._uintid||(l._uintid=a||n),r==="audio"?l._trust_audio_stream_added_state_=!0:l._trust_video_stream_added_state_=!0,r==="audio"?(l._audio_added_=!0,i!==void 0&&(l._audioSSRC=i),o!==void 0&&(l._cname=o),s&&(l._audioOrtc=s)):(l._video_added_=!0,i!==void 0&&(l._videoSSRC=i),o!==void 0&&(l._cname=o),c!==void 0&&(l._rtxSsrcId=c),s&&(l._videoOrtc=s)),(r==="audio"?l.hasAudio:l.hasVideo)&&!u&&(w.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published ").concat(r)),this.safeEmit(gt.USER_PUBLISHED,l,r)),r==="video"?Se.onGatewayStream(this._sessionId,An.ON_ADD_VIDEO_STREAM,vr.ON_ADD_VIDEO_STREAM,{peer:a||n,ssrc:l._videoSSRC}):Se.onGatewayStream(this._sessionId,An.ON_ADD_AUDIO_STREAM,vr.ON_ADD_AUDIO_STREAM,{peer:a||n,ssrc:l._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(l,r,i).then(d=>{if(d&&(w.debug("[".concat(this._clientId,"] resubscribe ").concat(r," for user ").concat(l.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof E_))return this._p2pChannel.unsubscribe(l,r,!0).then(()=>this._subscribe(l,r,!0).catch(f=>{w.error("[".concat(this._clientId,"] resubscribe error"),f.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(l,r)&&(w.debug("[".concat(this._clientId,"] resubscribe ").concat(r," for user ").concat(l.uid," after reconnect.")),this._subscribe(l,r,!0).catch(d=>{w.error("[".concat(this._clientId,"] resubscribe error"),d.toString())}))}),I(this,"_handleRemoveStream",r=>{if(L("BLOCK_LOCAL_CLIENT")&&_d(r.uid,this.channelName))return;let n=this._users.find(o=>o.uid===r.uid);if(!n)return void w.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));w.debug("[".concat(this._clientId,"] stream removed with uid ").concat(r.uid));let i=()=>{};n.hasAudio&&n.hasVideo?i=()=>{w.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished audio track")),this.safeEmit(gt.USER_UNPUBLISHED,n,"audio"),w.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished video track")),this.safeEmit(gt.USER_UNPUBLISHED,n,"video")}:n.hasVideo?i=()=>{w.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished video track")),this.safeEmit(gt.USER_UNPUBLISHED,n,"video")}:n.hasAudio&&(i=()=>{w.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished audio track")),this.safeEmit(gt.USER_UNPUBLISHED,n,"audio")}),n._video_pre_subscribed||n._audio_pre_subscribed||(n._trust_audio_stream_added_state_=!0,n._trust_video_stream_added_state_=!0,n._audio_added_=!1,n._video_added_=!1,this._p2pChannel instanceof E_&&this._p2pChannel.unsubscribe(n).then(o=>{if(o)return this._gateway.unsubscribe(o,n.uid)}),n._audioSSRC=void 0,n._videoSSRC=void 0,n._audioOrtc=void 0,n._videoOrtc=void 0,n._rtxSsrcId=void 0),Se.onGatewayStream(this._sessionId,An.ON_REMOVE_STREAM,vr.ON_REMOVE_STREAM,{peer:r.uint_id||r.uid}),i()}),I(this,"_handleSetStreamLocalEnable",(r,n,i)=>{if(L("BLOCK_LOCAL_CLIENT")&&_d(n,this.channelName))return;let o=this._users.find(c=>c.uid===n);if(!o)return void w.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));w.debug("[".concat(this._clientId,"] local ").concat(r," ").concat(i?"enabled":"disabled"," with uid ").concat(n));let a=r==="audio"?o.hasAudio:o.hasVideo;if(r==="audio"){o._trust_audio_enabled_state_=!0;let c=o._audio_enabled_;if(o._audio_enabled_=i,o._audio_enabled_===c)return;{let l=o._audio_enabled_?"enable-local-audio":"disable-local-audio";w.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(n,", msg: ").concat(l)),this.safeEmit(gt.USER_INFO_UPDATED,n,l)}}else{o._trust_video_enabled_state_=!0;let c=o._video_enabled_;if(o._video_enabled_=i,o._video_enabled_===c)return;{let l=o._video_enabled_?"enable-local-video":"disable-local-video";w.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(n,", msg: ").concat(l)),this.safeEmit(gt.USER_INFO_UPDATED,n,l)}}let s=r==="audio"?o.hasAudio:o.hasVideo;return a!==s?!a&&s?(w.info("[".concat(this._clientId,"] remote user ").concat(n," published ").concat(r)),void this.safeEmit(gt.USER_PUBLISHED,o,r)):(r==="video"&&o._videoTrack&&o._videoTrack._destroy(),r==="audio"&&o._audioTrack,this._p2pChannel.muteRemote(o,r),w.info("[".concat(this._clientId,"] remote user ").concat(n," unpublished ").concat(r)),void this.safeEmit(gt.USER_UNPUBLISHED,o,r)):void 0}),I(this,"_handleMuteStream",(r,n,i)=>{if(L("BLOCK_LOCAL_CLIENT")&&_d(r,this.channelName))return;w.debug("[".concat(this._clientId,"] receive mute message"),r,n,i);let o=this._users.find(c=>c.uid===r);if(!o)return void w.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(r));let a=n==="audio"?o.hasAudio:o.hasVideo;if(n==="audio"){o._trust_audio_mute_state_=!0;let c=o._audio_muted_;if(o._audio_muted_=i,o._audio_muted_===c)return;{let l=o._audio_muted_?"mute-audio":"unmute-audio";w.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(r,", msg: ").concat(l)),this.safeEmit(gt.USER_INFO_UPDATED,r,l)}}else{o._trust_video_mute_state_=!0;let c=o._video_muted_;if(o._video_muted_=i,o._video_muted_===c)return;{let l=o._video_muted_?"mute-video":"unmute-video";w.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(r,", msg: ").concat(l)),this.safeEmit(gt.USER_INFO_UPDATED,r,l)}}let s=n==="audio"?o.hasAudio:o.hasVideo;if(a!==s){if(!a&&s)return(n==="audio"?o._audioSSRC:o._videoSSRC)?(w.info("[".concat(this._clientId,"] remote user ").concat(r," published ").concat(n)),void this.safeEmit(gt.USER_PUBLISHED,o,n)):void w.warning("[".concat(this._clientId,"] remote user ").concat(r," receive ").concat(n," unmute message  before add stream message, ").concat(n," SSRC doesn't exist yet."));n==="video"&&o._videoTrack&&!o._video_pre_subscribed&&o._videoTrack._destroy(),n==="audio"&&o._audioTrack,this._p2pChannel.muteRemote(o,n),w.info("[".concat(this._clientId,"] remote user ").concat(r," unpublished ").concat(n)),this.safeEmit(gt.USER_UNPUBLISHED,o,n)}}),I(this,"_handleP2PLost",async r=>{w.debug("[".concat(this._clientId,"] receive p2p lost"),r),parseInt(r.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():w.warning("[".concat(this._clientId,"] P2PLost stream not found"),r)}),I(this,"_handleTokenWillExpire",()=>{w.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(gt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),I(this,"_handleBeforeUnload",r=>{r.type==="beforeunload"&&r.returnValue!==void 0&&r.returnValue!==""||(this.leave(),w.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),I(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(gt.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});let r={downlinkNetworkQuality:0,uplinkNetworkQuality:0};r.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),r.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(gt.NETWORK_QUALITY,r)}),I(this,"_handleP2PAddAudioOrVideoStream",(r,n,i,o)=>{let a=this._users.find(c=>c.uid===n);if(!a)return void w.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));w.debug("[".concat(this._clientId,"] stream added with uid ").concat(n,", type ").concat(r)),this.store.subscribe(a.uid,r,void 0,void 0,void 0,Date.now());let s=r==="audio"?a.hasAudio:a.hasVideo;r==="audio"?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,r==="audio"?(a._audio_added_=!0,i!==void 0&&(a._audioSSRC=i),o!==void 0&&(a._audioMid=o)):(a._video_added_=!0,i!==void 0&&(a._videoSSRC=i),o!==void 0&&(a._videoMid=o)),(r==="audio"?a.hasAudio:a.hasVideo)&&!s&&(w.info("[".concat(this._clientId,"] remote user ").concat(a.uid," published ").concat(r)),this.safeEmit(gt.USER_PUBLISHED,a,r)),this._p2pChannel.hasPendingRemoteMedia(a,r)&&(w.debug("[".concat(this._clientId,"] resubscribe ").concat(r," for user ").concat(a.uid," after reconnect.")),this._subscribe(a,r,!0).catch(c=>{w.error("[".concat(this._clientId,"] resubscribe error"),c.toString())}))}),this._config=e,this._clientId=er(5,"client-"),this.store=new XFe(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),w.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(Ra," build: ").concat(RL,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{LB(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(r){w.warning("[".concat(this._clientId,"] ").concat(r.toString()))}this._statsCollector=new Yte(this.store),this._statsCollector.onStatsException=(r,n,i)=>{w.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(r,", msg: ").concat(n,", uid: ").concat(i)),this.safeEmit(gt.EXCEPTION,{code:r,msg:n,uid:i})},this._statsCollector.onUploadPublishDuration=(r,n,i,o)=>{let a=this._users.find(s=>s.uid===r);a&&Se.peerPublishStatus(this._sessionId,{subscribeElapse:o,audioPublishDuration:n,videoPublishDuration:i,peer:a._uintid})},this.store.useP2P=e.mode==="p2p",this._gateway=new R6e(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||Kr,httpRetryConfig:e.httpRetryConfig||Kr,forceWaitGatewayResponse:e.forceWaitGatewayResponse===void 0||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._configDistribute=new M6e,this.store.useP2P?(this._p2pChannel=new wo(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new E_(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,r,n,i){let o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],a=arguments.length>6&&arguments[6]!==void 0&&arguments[6];Gt("JOIN_GATEWAY_USE_443PORT_ONLY",o),Gt("JOIN_GATEWAY_USE_DUAL_DOMAIN",a);let s=this._gateway.signal.websocket;return s instanceof xL&&(s.use443PortOnly=o,s.tryDoubleDomain=a),async function(c,l,u){JE.get(c)||JE.set(c,[]),QE.get(c)||QE.set(c,l),cc.get(c)||cc.set(c,0);let d=JE.get(c),f=QE.get(c);if(!d||!f)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(cc.get(c)===f){let v=x0();d.push(v),await v.promise}cc.set(c,cc.get(c)+1);for(var p=arguments.length,m=new Array(p>3?p-3:0),g=3;g<p;g++)m[g-3]=arguments[g];let y=await u(...m);return cc.set(c,cc.get(c)-1),cc.get(c)===f-1&&d.length>0&&(d[0].resolve(),d.shift()),cc.get(c)===0&&(JE.set(c,[]),QE.set(c,0),cc.set(c,0)),y}("client.join",L("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,r,n,i)}async join(e,t,r,n,i){let o=++this._numberOfJoinCount;this.store.joinStart(),n&&(this.store.uid=n);let a=(e_||e_||(e_=(window.location.protocol.split(":")[0]||"").toUpperCase(),e_))==="HTTPS",s=$B()?window.isSecureContext:"Browser Not Support";(!$B()&&!a||!window.isSecureContext)&&w.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser"),this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),w.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),Se.setAppId(e);try{if(!r&&r!==null)throw new q(O.INVALID_PARAMS,"Invalid token: ".concat(r,". If you don not use token, set it to null"));r&&Nn(r,"token",1,2047),Nn(e,"appid",1,2047),uC(t),n&&dC(n),i&&Nn(i,"optionalInfo",1,2047)}catch(g){throw Se.reportApiInvoke(up(),{name:Qr.JOIN,options:[e,t,r,n],states:{isHttps:a,isSecureContext:s},tag:Cr.TRACER}).onError(g),g}if(this._leaveMutex.isLocked&&(w.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),w.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){let g=new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw Se.reportApiInvoke(up(),{name:Qr.JOIN,options:[e,t,r,n],states:{isHttps:a,isSecureContext:s},tag:Cr.TRACER}).onError(g),g}this._gateway.state="CONNECTING";let c=await gH({appId:e,cname:t,uid:n,stringUid:typeof n=="string"?n:void 0,token:r||e,cloudProxyServer:this._cloudProxyServerMode});if(!this._joinAndNotLeaveYet)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));let l=(c==null?void 0:c.sid)||up();w.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(o)),this._sessionId||(this._sessionId=l,this.store.sessionId=this._sessionId);let u=Se.reportApiInvoke(l,{name:Qr.JOIN,options:[e,t,r,n],states:{isHttps:a,isSecureContext:s},tag:Cr.TRACER}),d=js(js({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:typeof n!="string"?n:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:r||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!c},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(d.setLocalAPVersion=this._setLocalAPVersion),typeof n=="string"&&(d.stringUid=n,this._uintUid?(d.uid=this._uintUid,this._uintUid=void 0):d.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(d.aesmode=this._encryptionMode,d.aespassword=await(async g=>{let y=function(S){let A=window.atob(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),N=new Uint8Array(new ArrayBuffer(A.length));for(let D=0;D<A.length;D+=1)N[D]=A.charCodeAt(D);return N}(),v=await window.crypto.subtle.importKey("spki",y,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),E=wL(g),b=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},v,E);return function(S){let A="";for(let N=0;N<S.length;N+=1)A+=String.fromCharCode(S[N]);return window.btoa(A)}(new Uint8Array(b))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(d.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&(this._encryptionMode==="aes-128-gcm2"||this._encryptionMode==="aes-256-gcm2"))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){let g=new TextEncoder,y=L("USE_PURE_ENCRYPTION_MASTER_KEY")?g.encode(d.appId+this._encryptionSecret+this._encryptionSecret):g.encode(d.appId+d.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(v,E,b){let S=await window.crypto.subtle.importKey("raw",E,"PBKDF2",!1,["deriveBits","deriveKey"]),A=v==="aes-128-gcm2"?128:256,N=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:zB,hash:"SHA-256",salt:b},S,A+JFe);return new Uint8Array(N).subarray(A/8)}(this._encryptionMode,y,qd(this._encryptionSalt)),this._encryptDataStreamKey=await async function(v,E,b){let S=await window.crypto.subtle.importKey("raw",E,"PBKDF2",!1,["deriveBits","deriveKey"]),A=v==="aes-128-gcm2"?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:zB,hash:"SHA-256",salt:b},S,{name:"AES-GCM",length:A},!0,["encrypt","decrypt"])}(this._encryptionMode,y,qd(this._encryptionSalt))}else s?w.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):w.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,w.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:d.stringUid});let f=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&f===this._sessionId&&Se.joinChannelTimeout(this._sessionId,5)},5e3);try{var p;let g,y=d.cloudProxyServer;if(me(p=["proxy3","proxy4","proxy5"]).call(p,y)){let A=L("PROXY_SERVER_TYPE3");Array.isArray(A)?d.proxyServer=A[0]:d.proxyServer=A}if(Se.setProxyServer(d.proxyServer),w.setProxyServer(d.proxyServer),this.store.requestAPStart(),c){if(w.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(d.stringUid?", ".concat(d.stringUid," => ").concat(c.intUid):""," ")),d.stringUid&&!d.uid&&(d.uid=c.intUid),g={gatewayInfo:c.ap.gatewayInfo},L("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&d.turnServer.mode==="auto")if(c.ap.proxyInfo.addresses.length===0)w.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{let A=(await Yee(c.ap.proxyInfo,c.ap.gatewayInfo.uid)).map(N=>({turnServerURL:N.address,tcpport:N.tcpport||$n.tcpport,udpport:N.udpport||$n.udpport,username:N.username||$n.username,password:N.password||$n.password,forceturn:!1,security:!0}));d.turnServer={mode:"manual",servers:A}}yH(c,d.stringUid)}else{if(d.stringUid&&!d.uid){let A;[A,g]=await he.all([Vte(d.stringUid,d,this._axiosCancelSource.token,this._config.httpRetryConfig||Kr,this.store),E$(d,this._axiosCancelSource.token,this._config.httpRetryConfig||Kr,!0,this.store)]),w.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(d.stringUid," => ").concat(A)),d.uid=A,g.gatewayInfo.uid=A,g.gatewayInfo.res.uid=A}else g=await E$(d,this._axiosCancelSource.token,this._config.httpRetryConfig||Kr,!0,this.store);if(!this._joinAndNotLeaveYet)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(d,this._axiosCancelSource.token),this._configDistribute.on(dk.UPDATE_BITRATE_LIMIT,A=>{this._p2pChannel.updateBitrateLimit(A)})},0),this._key=r||e;let v=g.gatewayInfo,E=d.uid?d.uid:v.uid;this._joinInfo=js(js({},d),{},{cid:v.cid,uid:E,vid:v.vid,apResponse:v.res,apGatewayAddress:v.apGatewayAddress,uni_lbs_ip:v.uni_lbs_ip,gatewayAddrs:v.gatewayAddrs}),this.store.intUid=E;let b=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));u.onSuccess(b),this._appId=e,this._channelName=d.cname,this._uid=b,this.store.uid=b,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Wn()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()},0);let S=d.stringUid?"string uid: ".concat(d.stringUid,",uid: ").concat(d.uid):"uid: ".concat(this._uid);return w.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(S)),setTimeout(()=>{w.startUpload()},5e3),this.store.joinEnd(),m=this,me(hu).call(hu,m)||hu.push(m),this._cloudProxyServerMode==="disabled"&&Ct().supportWebCrypto&&L("ENABLE_PRELOAD")&&WL(this._joinInfo),b}catch(g){let y=Array.isArray(g)?g[0]:g;throw y&&y.code===O.OPERATION_ABORTED?w.warning("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),y):w.error("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),y),y.code!==O.OPERATION_ABORTED&&this._numberOfJoinCount===o&&(this._gateway.state="DISCONNECTED",this._reset()),u.onError(y),y}var m}_joinGateway(){if(!this._joinInfo||!this._key)throw new q(O.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!L("JOIN_WITH_FALLBACK_SIGNAL_PROXY")))}async leave(){w.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Wn()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(t){let r=hu.indexOf(t);r!==-1&&hu.splice(r,1)}(this),this._statsCollector.stopUpdateStats();let e=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return w.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave(this.connectionState!=="CONNECTED"),w.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!Array.isArray(e)){if(!(e instanceof fp))return this._publishDataChannel(e);e=[e]}if(e.length===0)throw new q(O.INVALID_PARAMS,"param list is empty");let r=e;if(this._gateway.role==="audience")throw new q(O.INVALID_OPERATION,"audience can not publish stream");for(let i of r){if(!(i instanceof fp))throw new q(O.INVALID_PARAMS,"parameter is not local track");if(!i._enabled&&t)throw new q(O.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()))}w.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(r.map(i=>"".concat(i.getTrackId()," "))));let n=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&r.forEach(i=>{let o=this._configDistribute.getBitrateLimit();i instanceof ir&&o&&i.setBitrateLimit(o.uplink)});try{await this._publishHighStream(r),w.info("[".concat(this._clientId,"] Publish success, id ").concat(r.map(i=>"".concat(i.getTrackId()," "))))}catch(i){throw w.error("[".concat(this._clientId,"] publish error"),i.toString()),i}finally{n()}}async _publishDataChannel(e){Wt(e.id,"id",0,65535,!0),fl(e.ordered,"ordered"),Nn(e.metadata,"metadata",0,512),w.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));let t=await this._publishMutex.lock();try{if(this._p2pChannel.getAllDataChannels().findIndex(i=>i.id===e.id)!==-1)throw new q(O.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||this._uid===void 0)throw new q(O.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&L("FORCE_TURN")&&!L("TURN_ENABLE_TCP")&&!L("TURN_ENABLE_UDP"))throw new q(O.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");let r=function(i){return dH(i,!1)}(e),n=await this._p2pChannel.publishDataChannel([r]);if(n.length>0){if(typeof r._originDataChannelId!="number")throw w.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new q(O.CREATE_DATACHANNEL_ERROR);try{await he.all(n.map(i=>this._uid&&this._gateway.publishDataChannel(this._uid,i,!0))),await r._waitTillOpen()}catch(i){if(i.code!==O.DISCONNECT_P2P)throw i}}return w.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(r.id)),r}catch(r){throw w.error("[".concat(this._clientId,"] publish datachannels error"),r.toString()),r}finally{t()}}async unpublish(e){if(!this._joinInfo||this._uid===void 0)throw new q(O.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof fp))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);w.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map(n=>"".concat(n.getTrackId()," "))," "));let r=await this._publishMutex.lock();try{if(this._p2pChannel instanceof wo){let n=await this._p2pChannel.unpublish(t);n&&await this._gateway.sendExtensionMessage(Pr.UNPUBLISH,{unpubMsg:n},!0)}else{let n=await this._p2pChannel.unpublish(t);n&&await this._gateway.unpublish(n,this._uid),w.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map(i=>"".concat(i.getTrackId()))))}}catch(n){throw w.error("[".concat(this._clientId,"] unpublish error"),n.toString()),n}finally{r&&r()}}async _unpublishDataChannel(e){e!==void 0&&e.length!==0||(e=this._p2pChannel.getAllDataChannels()),w.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map(r=>"".concat(r.id," "))," "));let t=await this._publishMutex.lock();try{let r=await this._p2pChannel.unpublishDataChannel(e);r&&await this._gateway.unpublishDataChannel(r),w.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map(n=>"".concat(n.id))))}catch(r){throw w.error("[".concat(this._clientId,"] unpublish dataChannel error"),r.toString()),r}finally{t&&t()}}async subscribe(e,t,r){if(!(e instanceof pu)){let n=this.remoteUsers.find(i=>i.uid===e);if(!n)throw new q(O.INVALID_REMOTE_USER,"user is not in the channel");e=n}return t==="datachannel"?this._subscribeDataChannel(e,r):this._subscribe(e,t)}async presubscribe(e,t){if(on(t,"mediaType",["audio","video"]),this._p2pChannel instanceof wo)throw new q(O.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new q(O.INVALID_OPERATION,"can't presub when not join");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));let r=t===Ce.AUDIO,n=t===Ce.VIDEO,i=await this._subscribeMutex.lock();try{let{ssrcId:o,ortc:a,rtxSsrcId:s,cname:c,uint_id:l}=await this._gateway.presubscribe(e,t,!0);if(o==null)throw new q(O.UNEXPECTED_RESPONSE,"no ssrc id");let u=this._users.find(f=>f.uid===e);u||(u=new pu(e,l||e),u._is_pre_created=!0,this._users.push(u)),c&&(u._cname=c),u._uintid||(u._uintid=l||e),r&&(u._audioSSRC=o,u._audio_pre_subscribed=!0,a&&(u._audioOrtc=a)),n&&(u._videoSSRC=o,u._video_pre_subscribed=!0,a&&(u._videoOrtc=a),s!=null&&(u._rtxSsrcId=s)),w.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(o)),await this._p2pChannel.subscribe(u,t,o,s,a);let d=r?u._audioTrack:u._videoTrack;if(!d)throw new q(O.UNEXPECTED_ERROR,"can not find remote track in user");return r&&(u._trust_audio_stream_added_state_=!0,u._audio_added_=!0),n&&(u._trust_video_stream_added_state_=!0,u._video_added_=!0),d}catch(o){throw w.error("[".concat(this._clientId,"] presub user ").concat(e," error"),o),o}finally{i()}}async _subscribeDataChannel(e,t){var r;if(Wt(t,"channelId",0,65535,!0),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find(a=>a===e))throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new q(O.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&e._dataChannels.length===0)throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new q(O.INVALID_REMOTE_USER,"user is not published");let n=(r=e._dataChannels)===null||r===void 0?void 0:r.find(a=>a.id===t);if(!n)throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new q(O.REMOTE_USER_IS_NOT_PUBLISHED);let i=await this._subscribeMutex.lock();w.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{let a=await this._p2pChannel.subscribeDataChannel(e,[n]);if(a&&me(a).call(a,n.id))try{var o;if(typeof n._originDataChannelId!="number")throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new q(O.CREATE_DATACHANNEL_ERROR);let s={id:n.id,datachannelId:n._originDataChannelId,ordered:n.ordered,maxRetransmits:n.maxRetransmits,metadata:(o=n.metadata)!==null&&o!==void 0?o:""};await this._gateway.subscribeDataChannel(e.uid,s,!0),await n._waitTillOpen()}catch(s){if((s==null?void 0:s.code)!==O.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[n]),s;await this._p2pChannel.unsubscribeDataChannel(e,[n]),this._p2pChannel.setPendingRemoteDataChannel(e,n.id)}return w.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),n}finally{i()}}async _p2pSubscribe(e,t,r){if(on(t,"mediaType",["audio","video"]),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(i=>i===e)){let i=new q(O.INVALID_REMOTE_USER,"user is not in the channel");throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),i}if(!e.hasAudio&&!e.hasVideo){let i=new q(O.INVALID_REMOTE_USER,"user is not published");throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),i}if(!r&&(t==="audio"&&!e.hasAudio||t==="video"&&!e.hasVideo)){let i=new q(O.REMOTE_USER_IS_NOT_PUBLISHED);throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),i}let n=await this._subscribeMutex.lock();w.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{let o=t==="audio"?e._audioSSRC:e._videoSSRC,a=t==="audio"?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof wo&&await this._p2pChannel.subscribe(e,t,o,a)}catch(o){throw o}w.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(o=>{w.warning("[".concat(this._clientId,"] auto set fallback failed"),o)});let i=t==="audio"?e._audioTrack:e._videoTrack;if(!i)throw new q(O.UNEXPECTED_ERROR,"can not find remote track in user object");return i}catch(i){throw w.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),i),i}finally{n()}}async _subscribe(e,t,r){if(this._p2pChannel instanceof wo)return this._p2pSubscribe(e,t);if(on(t,"mediaType",["audio","video"]),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(c=>c===e)){let c=new q(O.INVALID_REMOTE_USER,"user is not in the channel");throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),c}if(!e.hasAudio&&!e.hasVideo){let c=new q(O.INVALID_REMOTE_USER,"user is not published");throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),c}if(!(r||(t!=="audio"||e.hasAudio&&e._audioSSRC!==void 0)&&(t!=="video"||e.hasVideo&&e._videoSSRC!==void 0))){let c=new q(O.REMOTE_USER_IS_NOT_PUBLISHED);throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),c}let n=t==="audio"?e._audioSSRC:e._videoSSRC,i=t==="audio"?e._audioOrtc:e._videoOrtc,o=t==="video"?e._rtxSsrcId:void 0,a={stream_type:t==="audio"?Ce.AUDIO:Ce.VIDEO,ssrcId:n},s=await this._subscribeMutex.lock();w.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{let l=t==="audio"?e._audioSSRC:e._videoSSRC;l!==void 0&&l!==n&&(n=l,i=t==="audio"?e._audioOrtc:e._videoOrtc,o=t==="video"?e._rtxSsrcId:void 0,a={stream_type:t==="audio"?Ce.AUDIO:Ce.VIDEO,ssrcId:n}),ti.markSubscribeStart(this.store.clientId,n),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,n,o,i);try{this._p2pChannel.isPreSubScribe(n)||await this._gateway.subscribe(e.uid,a,!0)}catch(u){if((u==null?void 0:u.code)!==O.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),u;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(l){throw this._p2pChannel.reportSubscribeEvent(!1,l==null?void 0:l.code,e,t),l}w.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(l=>{w.warning("[".concat(this._clientId,"] auto set fallback failed"),l)});let c=t==="audio"?e._audioTrack:e._videoTrack;if(!c)throw new q(O.UNEXPECTED_ERROR,"can not find remote track in user object");return c}catch(c){throw w.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),c),c}finally{s()}}async massSubscribe(e){if(sl(e,"subscribeList"),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));let t=Date.now(),r=new Map,n=await this._subscribeMutex.lock();w.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map(s=>{let{user:c,mediaType:l}=s;return"user: ".concat(c==null?void 0:c.uid,", mediaType: ").concat(l)}).join("; ")));let i=(e=[...e]).map(s=>{let{user:c,mediaType:l}=s;return{user:c,mediaType:l}}),o=await this._p2pChannel.globalLock();try{var a;for(let c=e.length-1;c>=0;c--){let l=e[c],{user:u,mediaType:d}=l;if(on(d,"mediaType",["audio","video"]),!u){let m=new q(O.INVALID_PARAMS,"user property does not exist in subscribeList item");throw w.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),m}if(!this._users.find(m=>m===u)){let m=new q(O.INVALID_REMOTE_USER,"user is not in the channel");w.error("[".concat(this._clientId,"] can not massSubscribe ").concat(u.uid,", this user is not in the channel")),i[c].error=m,e.splice(c,1);continue}if(d==="audio"&&(!u.hasAudio||u._audioSSRC===void 0)||d==="video"&&(!u.hasVideo||u._videoSSRC===void 0)){let m=new q(O.REMOTE_USER_IS_NOT_PUBLISHED);w.error("[".concat(this._clientId,"] can not subscribe ").concat(u.uid," with mediaType ").concat(d,", remote user is not published")),i[c].error=m,e.splice(c,1);continue}let f=hn.Video|hn.LwoVideo,p=r.get(u);if(p){if(d==="video"?p&f:p&hn.Audio){e.splice(c,1),w.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(u.uid,", mediaType:").concat(d," twice"));continue}r.set(u,p|(d==="video"?f:hn.Audio))}else r.set(u,d==="video"?f:hn.Audio)}for(let c=e.length-1;c>=0;c--){let l=e[c],{user:u,mediaType:d}=l,f=hn.Video|hn.LwoVideo;if(this._p2pChannel.hasRemoteMedia(u,d)){await this._p2pChannel.unmuteRemoteNoLock(u,d);let p=r.get(u);r.set(u,d==="video"?p^f:p^hn.Audio),e.splice(c,1)}}this.store.massSubscribe(e.map(c=>({userId:c.user.uid,type:c.mediaType})),t);let s=Js(a=Array.from(r.entries())).call(a,(c,l)=>{let[u,d]=l;if(d===0)return c;let f={stream_id:u.uid,stream_type:d};return d&hn.Audio&&(f.audio_ssrc=u._audioSSRC),d&hn.Video&&(f.video_ssrc=u._videoSSRC),c.push(f),c},[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map(l=>{let{user:u,mediaType:d}=l;return{user:u,mediaType:d,ssrcId:d===Ce.VIDEO?u._videoSSRC:u._audioSSRC,rtxSsrcId:d===Ce.VIDEO?u._rtxSsrcId:void 0}}));let c=new Map;if(s=s.filter(l=>l.video_ssrc&&!this._p2pChannel.isPreSubScribe(l.video_ssrc)||l.audio_ssrc&&!this._p2pChannel.isPreSubScribe(l.audio_ssrc)||!l.video_ssrc&&!l.audio_ssrc),s.length>0){let l=await this._gateway.subscribeAll(s,!0);((l==null?void 0:l.users)||[]).forEach(u=>{let{stream_id:d,video_error_code:f,audio_error_code:p,error_code:m}=u;(f||p||m)&&c.set(d,{video_error_code:f,audio_error_code:p,error_code:m})})}if(Array.from(c.entries()).length>0){let l=[];Array.from(c.entries()).forEach(u=>{let[d,f]=u,p=this.remoteUsers.find(m=>m.uid===d);if(p){let m;f.error_code||f.video_error_code&&f.audio_error_code?m=void 0:f.video_error_code?m=Ce.VIDEO:f.audio_error_code&&(m=Ce.AUDIO),l.push({user:p,mediaType:m})}}),l.length>0&&await this._p2pChannel.massUnsubscribeNoLock(l)}for(let l of i){let u=c.get(l.user.uid);if(u){let d=u.error_code||l.mediaType==="audio"&&u.audio_error_code||l.mediaType==="video"&&u.video_error_code;if(d){let f=k0(d);w.error("user:".concat(l.user.uid," mediaType:").concat(l.mediaType," has massSubscribe error ").concat(f.desc)),l.error=new q(O.SUBSCRIBE_FAILED,"code ".concat(d,": ").concat(f.desc))}}l.error||(l.mediaType==="video"?l.track=l.user.videoTrack:l.track=l.user.audioTrack)}return this.store.massSubscribe(i.filter(l=>!l.error).map(l=>({userId:l.user.uid,type:l.mediaType})),void 0,Date.now()),i.forEach(l=>{var u;Se.subscribe(this.store.sessionId,{succ:!!l.error,ec:((u=l.error)===null||u===void 0?void 0:u.code)||null,video:l.mediaType===Ce.VIDEO,audio:l.mediaType===Ce.AUDIO,peerid:l.user.uid,subscribeRequestid:l.mediaType===Ce.VIDEO?l.user._videoSSRC:l.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t),preSsrc:this._p2pChannel.isPreSubScribe(l.user._videoSSRC)},!0)}),w.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map(l=>{let{user:u,mediaType:d}=l;return"user: ".concat(u==null?void 0:u.uid,", mediaType: ").concat(d)}).join("; "))),i}catch(c){throw await this._p2pChannel.massUnsubscribeNoLock(e),c}}finally{o(),n()}}async unsubscribe(e,t,r){if(!(e instanceof pu)){let i=this.remoteUsers.find(o=>o.uid===e);if(!i)throw new q(O.INVALID_REMOTE_USER,"user is not in the channel");e=i}if(t||this.store.useP2P){if(t==="datachannel")return this._unsubscribeDataChannel(e,r)}else await this._unsubscribeDataChannel(e,r);if(t&&on(t,"mediaType",["audio","video"]),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(i=>i===e)){let i=new q(O.INVALID_REMOTE_USER,"user is not in the channel");throw w.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),i}w.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));let n=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof wo)await this._p2pChannel.unsubscribe(e,t);else{let i=await this._p2pChannel.unsubscribe(e,t);i&&await this._gateway.unsubscribe(i,e.uid),t&&t!=="audio"||(e._audio_pre_subscribed=!1),t&&t!=="video"||(e._video_pre_subscribed=!1),e._is_pre_created&&tS(this._users,e),w.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(i){if(i.code===O.DISCONNECT_P2P)return void w.warning("disconnecting p2p, abort unsubscribe request.");throw w.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),i.toString()),i}finally{n()}}async _unsubscribeDataChannel(e,t){if(t&&Wt(t,"id",0,65535,!0),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find(n=>n===e)){let n=new q(O.INVALID_REMOTE_USER,"user is not in the channel");throw w.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),n}let r;if(typeof t=="number"){let n=e._dataChannels.find(i=>i.id===t);n&&(r=[n])}else r=e._dataChannels;if(r===void 0){let n=new q(O.REMOTE_USER_IS_NOT_PUBLISHED);throw w.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),n}w.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(r.map(n=>n.id)));try{let n=await this._p2pChannel.unsubscribeDataChannel(e,r);n&&await this._gateway.unsubscribeDataChannel(n,e.uid),w.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(n))}catch(n){if(n.code===O.DISCONNECT_P2P)return void w.warning("disconnecting p2p, abort unsubscribe request.");throw w.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),n.toString()),n}}async massUnsubscribe(e){if(sl(e,"unsubscribeList"),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");w.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map(r=>{let{user:n,mediaType:i}=r;return"user: ".concat(n==null?void 0:n.uid,", mediaType: ").concat(i,";")}).join())),e=[...e];let t=new Map;for(let r=e.length-1;r>=0;r--){let{user:n,mediaType:i}=e[r];if(!n){let a=new q(O.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw w.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),a}if(on(i,"mediaType",["video","audio",void 0]),!this._users.find(a=>a===n)){w.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(n.uid,", user is not in the channel")),e.splice(r,1);continue}let o=hn.Video|hn.LwoVideo;if(t.has(n)){let a=t.get(n),s;switch(i){case"video":s=a&o;break;case"audio":s=a&hn.Audio;break;default:s=a&(hn.Audio|o)}if(s){w.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(n.uid,",mediaType:").concat(i," twice.")),e.splice(r,1);continue}i?i==="audio"?t.set(n,a|hn.Audio):i==="video"&&t.set(n,a|o):t.set(n,a|hn.Audio|o)}else i?i==="audio"?t.set(n,hn.Audio):i==="video"&&t.set(n,o):t.set(n,hn.Audio|o)}try{let r=await this._p2pChannel.massUnsubscribe(e);r&&await this._gateway.massUnsubscribe(r),w.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map(n=>{let{user:i,mediaType:o}=n;return"user: ".concat(i==null?void 0:i.uid,", mediaType: ").concat(o,";")}).join()))}catch(r){if(r.code===O.DISCONNECT_P2P)return void w.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw w.error("[".concat(this._clientId,"] massUnsubscribe error"),r.toString()),r}}async setLowStreamParameter(e){(function(r){if(!r)throw new J(O.INVALID_PARAMS);gr(r.width)||ux(r.width,"streamParameter.width"),gr(r.height)||ux(r.height,"streamParameter.height"),gr(r.framerate)||ux(r.framerate,"streamParameter.framerate"),gr(r.bitrate)||Wt(r.bitrate,"streamParameter.bitrate")})(e),(!e.width&&e.height||e.width&&!e.height)&&w.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),w.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));let t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,oe.LocalVideoLowTrack)}async enableDualStream(){if(!Ct().supportDualStream)throw Se.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new q(O.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new q(O.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw Se.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,Se.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),w.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(oe.LocalVideoLowTrack))try{let e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw Se.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,Se.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),w.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(r){on(r,"role",["audience","host"])}(e),t&&LB(t),this.mode==="rtc"||this.mode==="p2p")throw w.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new q(O.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&e==="host")throw new q(O.INVALID_OPERATION,"host mode can not set audience latency level");if(e==="audience"&&this._p2pChannel.hasLocalMedia())throw new q(O.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(e,t),this._config.role=e,w.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}getRemoteInboundOffset(){var e;let t=(e=this._p2pChannel.getStats())===null||e===void 0?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;let r=t.timestamp-Date.now();return Math.abs(r)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?r:0}getNtpWallTimeInMs(){return document.visibilityState==="visible"&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(Nn(e,"proxyServer"),!t){if(this.connectionState!=="DISCONNECTED")throw new q(O.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new q(O.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,Se.setProxyServer(this._proxyServer),w.setProxyServer(this._proxyServer),w.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if(this.connectionState!=="DISCONNECTED")throw new q(O.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new q(O.INVALID_OPERATION,"You have already set the proxy")}if(aC(e))return this._turnServer={servers:e,mode:"original-manual"},void w.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map(r=>r.urls).join(","),"."));e.forEach(r=>Lee(r)),this._turnServer={servers:e,mode:"manual"},w.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if(this.connectionState!=="DISCONNECTED")throw new q(O.INVALID_OPERATION,"you should set license before join channel");if(Nn(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new q(O.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,w.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if(this.connectionState!=="DISCONNECTED")throw new q(O.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new q(O.INVALID_OPERATION,"You have already set the proxy");let t=[3,4,5],r;switch(e===void 0&&(e=3),e){case 1:case 2:throw new q(O.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:r="proxy3";break;case 4:r="proxy4";break;case 5:r="proxy5";break;default:throw new q(O.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=r,this.store.cloudProxyServerMode=r,w.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new q(O.INVALID_OPERATION,"Stop proxy server after leave channel");Se.setProxyServer(),w.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",w.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new q(O.INVALID_PARAMS,"accessPoints is required.");sl(e.accessPoints.serverList,"accessPoints.serverList"),Nn(e.accessPoints.domain,"accessPoints.domain");let t=(f,p)=>{Wt(f,p,0,65535,!0)},r=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),r=e.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new q(O.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");L("CLOSE_AFB_FOR_LOCAL_AP")&&(Gt("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),Gt("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));let n=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,o=e.accessPoints.serverList.map(f=>n.test(f)?"".concat(f.replace(/\./g,"-"),".").concat(i):f),a=o.map(f=>"".concat(f,":").concat(r));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Gt("WEBCS_DOMAIN",a),Gt("WEBCS_DOMAIN_BACKUP_LIST",a),Gt("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(sl(e.report.hostname,"report.hostname"),Gt("EVENT_REPORT_DOMAIN",e.report.hostname[0]),Gt("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(Gt("EVENT_REPORT_DOMAIN",o[0]),Gt("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));let s=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),s=e.report.port),Gt("STATS_COLLECTOR_PORT",s),e.report?Gt("ENABLE_EVENT_REPORT",!0):Gt("ENABLE_EVENT_REPORT",!1);let c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(sl(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=o[0];let l=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),l=e.log.port),Gt("LOG_UPLOAD_SERVER","".concat(c,":").concat(l));let u=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(sl(e.cds.hostname,"cds.hostname"),u=e.cds.hostname):u=o;let d=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),d=e.cds.port),Gt("CDS_AP",u.map(f=>"".concat(f,":").concat(d))),e.cds?Gt("ENABLE_CONFIG_DISTRIBUTE",!0):Gt("ENABLE_CONFIG_DISTRIBUTE",!1),w.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(sl(e,"serverList"),Nn(t,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new q(O.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");let r=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map(n=>r.test(n)?"".concat(n.replace(/\./g,"-"),".").concat(t):n),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Gt("WEBCS_DOMAIN",e),Gt("WEBCS_DOMAIN_BACKUP_LIST",e),Gt("GATEWAY_DOMAINS",[t]),Gt("EVENT_REPORT_DOMAIN",e[0]),Gt("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),Gt("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),w.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(on(e,"streamType",[0,1]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(t){throw w.error("[".concat(this._clientId,"] set default remote video stream type error"),t.toString()),t}else w.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){on(t,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout(()=>{let r=this._users.find(n=>n.uid===e);r&&r.videoTrack&&r.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(r){throw w.error("[".concat(this._clientId,"] set remote video stream type error"),r.toString()),r}w.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){on(t,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(r){throw w.error("[".concat(this._clientId,"] set stream fallback option"),r.toString()),r}w.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,r,n){(function(o){on(o,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])})(e),Nn(t,"secret");let i=["aes-128-gcm2","aes-256-gcm2"];if(me(i).call(i,e)){if(!r||!(r instanceof Uint8Array&&r.length===32))throw new q(O.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(r)throw new q(O.INVALID_PARAMS,"current encrypt mode does not need salt");if(n){if(fl(n,"encryptDataStream"),!me(i).call(i,e))throw new q(O.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(t)||w.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=e,this._encryptionSecret=t,r&&(this._encryptionSalt=Vu(r))}async renewToken(e){if(Nn(e,"token",1,2047),!this._key||!this._joinInfo)throw new q(O.INVALID_OPERATION,"renewToken should not be called before user join");let t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);let r=await this._renewTokenMutex.lock();try{if(L("USE_NEW_TOKEN")){w.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));let n=await L6e(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Kr);w.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:n})}else w.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});w.debug("[".concat(this._clientId,"] renewToken success"))}catch(n){throw this._key=t,this._joinInfo.token=t,w.error("[".concat(this._clientId,"] renewToken failed"),n.toString()),n}finally{r()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?w.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{let e=this._p2pChannel.getAudioLevels();this.safeEmit(gt.VOLUME_INDICATOR,e)},L("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){let e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if(this.codec!=="h264")throw new q(O.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new q(O.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new q(O.LIVE_STREAMING_TASK_CONFLICT);let r=t?yl.TRANSCODE:yl.RAW;return this._createLiveStreamingClient(r).startLiveStreamingTask(e,r)}setLiveTranscoding(e){return this._createLiveStreamingClient(yl.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){let t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(r=>r&&r.hasUrl(e));if(!t.length)throw new q(O.INVALID_PARAMS,"can not find live streaming url to stop");await he.all(t.map(r=>r&&r.stopLiveStreamingTask(e)))}async startChannelMediaRelay(e){Q$(e),await this._createChannelMediaRelayClient().startChannelMediaRelay(e)}async updateChannelMediaRelay(e){Q$(e),await this._createChannelMediaRelayClient().updateChannelMediaRelay(e)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new q(O.INVALID_OPERATION,"can not send data stream, not joined");if((typeof e=="string"||e instanceof Uint8Array)&&(e={payload:e}),typeof e.payload=="string"){let i=new TextEncoder;e.payload=i.encode(e.payload)}let n=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&me(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(n=!0,e.payload=await async function(i,o,a){var s;let c=Js(s=Array.from(a)).call(s,(g,y)=>g+y,0),l={serverTs:0,seq:QFe++,length:a.length,checkSum:c},u=new Uint8Array(BB(c,2)),d=new ArrayBuffer(wf),f=new DataView(d);f.setUint32(0,l.serverTs),f.setUint16(4,l.seq),f.setUint16(6,l.length),f.setUint16(8,l.checkSum);let p=16-a.length%16;a=jB(a,new Uint8Array(p));let m=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i,tagLength:HB,additionalData:u},o,a);return jB(new Uint8Array(d),new Uint8Array(m))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new q(O.INVALID_PARAMS,n?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(Fe.DATA_STREAM,{payload:Vu(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-a8e},!r)}sendMetadata(e){if(!this._joinInfo)throw new q(O.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new q(O.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Fe.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Vu(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(eVe),!this._joinInfo)throw new q(O.INVALID_OPERATION,"can not send custom report, not joined");await Se.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){on(t.spatialLayer,"spatialLayer",[0,1,2,3]),on(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(r){throw w.error("[".concat(this._clientId,"] pick SVC layer failed"),r.toString()),r}}async setRTMConfig(e){let{apRTM:t=!1,rtmFlag:r}=e;if(fl(t,"apRTM"),Wt(r,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=r,w.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),(this.connectionState==="CONNECTED"||this.connectionState==="RECONNECTING")&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=r,this._gateway.setRTM2Flag(r)}_reset(){if(w.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Zi.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&ire(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach(e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach(t=>t._close()),e._dataChannels.length=0)}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new ii("client-publish"),this._subscribeMutex=new ii("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(e,t){var r;let n=e||up();e?w.debug("[".concat(this._clientId,"] new Session ").concat(n)):w.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(n));let i=e?"":this._sessionId||"";this._sessionId=n,this.store.sessionId=n;let o={lts:new Date().getTime(),mode:this.mode,buildFormat:2,stringUid:(t==null?void 0:t.stringUid)||((r=this._joinInfo)===null||r===void 0?void 0:r.stringUid),channelProfile:this.mode==="live"?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:i,clientRole:this.role==="audience"?2:1};Se.sessionInit(this._sessionId,js({cname:t.channel,appid:t.appId},o)),this._joinInfo&&(this._joinInfo.sid=n),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=n)}async _publishHighStream(e){if(!this._joinInfo||this._uid===void 0)throw new q(O.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&L("FORCE_TURN")&&!L("TURN_ENABLE_TCP")&&!L("TURN_ENABLE_UDP"))throw new q(O.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");w.debug("[".concat(this._clientId,"] publish high stream"));try{let r=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof wo){let n=(await r.next()).value;if(n){try{await this._gateway.sendExtensionMessage(Pr.PUBLISH,n,!0)}catch(i){throw r.throw(i),i}await r.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{let n=(await r.next()).value;if(n){var t;let i;try{i=await this._gateway.publish(this._uid,n,!0)}catch(o){if(o.code!==O.DISCONNECT_P2P)throw r.throw(o),o}await r.next(((t=i)===null||t===void 0?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(let i of e)i instanceof ir&&i._encoderConfig&&this._gateway.setVideoProfile(i._encoderConfig),!i.muted&&i.enabled||await this._p2pChannel.muteLocalTrack(i)}}catch(r){if(this._p2pChannel.reportPublishEvent(!1,r==null?void 0:r.code,e),(r==null?void 0:r.code)===O.WS_ABORT)return;throw r}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new q(O.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));w.debug("[".concat(this._clientId,"] publish low stream"));let e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{let r=await this._p2pChannel.publishLowStream(this._lowStreamParameter),n=(await r.next()).value;if(n){var t;let i;try{i=await this._gateway.publish(this._uid,n,!0)}catch(o){if(o.code!==O.DISCONNECT_P2P)throw r.throw(o),o}r.next(((t=i)===null||t===void 0?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(r){if(this._p2pChannel.reportPublishEvent(!1,r==null?void 0:r.code,void 0,!0),(r==null?void 0:r.code)===O.WS_ABORT)return;throw r}}_createLiveStreamingClient(e){let t=()=>{if(!this._joinInfo||!this._appId)return new q(O.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();let r=(n={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},ty("LiveStreaming").create(n));var n;return r.onLiveStreamError=(i,o)=>{Se.reportApiInvoke(this._sessionId,{name:Qr.ON_LIVE_STREAM_ERROR,options:[i,o],tag:Cr.TRACER}).onSuccess(),this.safeEmit(gt.LIVE_STREAMING_ERROR,i,o)},r.onLiveStreamWarning=(i,o)=>{Se.reportApiInvoke(this._sessionId,{name:Qr.ON_LIVE_STREAM_WARNING,options:[i,o],tag:Cr.TRACER}).onSuccess(),this.safeEmit(gt.LIVE_STREAMING_WARNING,i,o)},r.on(uk.REQUEST_WORKER_MANAGER_LIST,(i,o,a)=>{if(!this._joinInfo)return a(new q(O.INVALID_OPERATION,"can not find join info to get worker manager"));(async function(s,c,l,u){let d=L("UAP_AP").slice(0,L("AJAX_REQUEST_CONCURRENT")).map(f=>c.proxyServer?"https://".concat(c.proxyServer,"/ap/?url=").concat(f+"/api/v1?action=uap"):"https://".concat(f,"/api/v1?action=uap"));return await A6e(d,s,c,l,u)})(i,this._joinInfo,this._axiosCancelSource.token,Kr).then(o).catch(a)}),r};return e===yl.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||t(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||t(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo)return new q(O.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){let{sendResolutionWidth:t,sendResolutionHeight:r}=this.getLocalVideoStats(),n=(e={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:t,height:r}},ty("ChannelMediaRelay").create(e));n.on("state",i=>{i===ao.RELAY_STATE_FAILURE&&n&&n.dispose(),this.safeEmit(gt.CHANNEL_MEDIA_RELAY_STATE,i)}),n.on("event",i=>{this.safeEmit(gt.CHANNEL_MEDIA_RELAY_EVENT,i)}),this._channelMediaRelayClient=n,this._statsCollector.onStatsChanged=(i,o)=>{var a;i==="resolution"&&((a=this._channelMediaRelayClient)===null||a===void 0||a.setVideoProfile(o))}}var e;return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){let{added:r,deleted:n}=e,i=[];if(t){let o=[];this._users.forEach(a=>{a._dataChannels.forEach(s=>{r.every(c=>c.uid!==a._uintid||c.stream_id!==s.id)&&o.push({uid:a._uintid,stream_id:s.id,ordered:s.ordered,max_retrans_times:s.maxRetransmits,metadata:s.metadata})})}),o.length>0&&this._handleUpdateDataChannel({added:[],deleted:o})}Array.isArray(r)&&r.length>0&&r.forEach(o=>{let{uid:a,stream_id:s,ordered:c,max_retrans_times:l,metadata:u}=o,d=this._users.find(f=>f._uintid===a);if(!d)return void w.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"));if(w.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(a)),me(i).call(i,d)||i.push(d),d._uintid||(d._uintid=a),d._dataChannels.findIndex(f=>f.id===o.stream_id)===-1){let f={id:s,ordered:!!c,maxRetransmits:l,metadata:u},p=function(m){return dH(m,!0)}(f);d._dataChannels.push(p),w.info("[".concat(this._clientId,"] remote user ").concat(d.uid," published datachannel")),t||this.safeEmit(gt.USER_PUBLISHED,d,"datachannel",f)}this._p2pChannel.hasPendingRemoteDataChannel(d,o.stream_id)&&(w.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(d.uid," after reconnect.")),this._subscribeDataChannel(d,o.stream_id).catch(f=>{w.error("[".concat(this._clientId,"] resubscribe datachannel error"),f.toString())}))}),t&&(this.safeEmit(gt.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(n)&&n.length>0&&n.forEach(o=>{let{uid:a,stream_id:s}=o,c=this._users.find(u=>u._uintid===a);if(!c)return void w.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));let l=c._dataChannels.find(u=>u.id===o.stream_id);l&&(w.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(a)),this._p2pChannel.unsubscribeDataChannel(c,[l]).then(u=>{if(c._dataChannels=c._dataChannels.filter(d=>d!==l),u)return this._gateway.unsubscribeDataChannel(u,c.uid)}),w.info("[".concat(this._clientId,"] remote user ").concat(a," unpublished datachannel ,id:").concat(l.id)),this.safeEmit(gt.USER_UNPUBLISHED,c,"datachannel",l._config))})}_handleRemoveDataChannels(e){let t=this._users.find(r=>r.uid===e.uid);if(t){if(t._dataChannels!==void 0&&t._dataChannels.length>0){w.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));let r=()=>{w.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach(n=>{this.safeEmit(gt.USER_UNPUBLISHED,t,"datachannel",n._config)})};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then(n=>{if(n)return this._gateway.unsubscribeDataChannel(n,t.uid)}),r()}}else w.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(Bn.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(Bn.CONNECTION_STATE_CHANGE,(e,t,r)=>{var n;if(r===Bt.FALLBACK)return;let i=()=>{this.safeEmit(gt.CONNECTION_STATE_CHANGE,e,t,r)};if(Se.reportApiInvoke(this._sessionId||((n=this._gateway.joinInfo)===null||n===void 0?void 0:n.sid)||null,{name:Qr.CONNECTION_STATE_CHANGE,options:[e,t,r],tag:Cr.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:r})),w.info("[".concat(this._clientId,"] connection state change: ").concat(t," -> ").concat(e)),e==="DISCONNECTED")return this._reset(),void i();if(e==="RECONNECTING")this._users.forEach(a=>{a._trust_in_room_=!1,a._trust_audio_enabled_state_=!1,a._trust_video_enabled_state_=!1,a._trust_audio_mute_state_=!1,a._trust_video_mute_state_=!1,a._trust_audio_stream_added_state_=!1,a._trust_video_stream_added_state_=!1,a._is_pre_created||(a._audio_pre_subscribed||(a._audioSSRC=void 0,a._audioOrtc=void 0),a._video_pre_subscribed||(a._videoSSRC=void 0,a._videoOrtc=void 0,a._rtxSsrcId=void 0),a._cname=void 0)}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(e==="CONNECTED"){var o;this._streamFallbackTypeCacheMap.forEach((a,s)=>{this._gateway.setStreamFallbackOption(s,a).catch(c=>{w.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),c)})}),this._remoteStreamTypeCacheMap.forEach((a,s)=>{this._gateway.setRemoteVideoStreamType(s,a).catch(c=>{w.warning("[".concat(this._clientId,"] auto set remote stream type failed"),c)})}),this._remoteDefaultVideoStreamType!==void 0&&((o=this._joinInfo)===null||o===void 0?void 0:o.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{w.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(a=>{w.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(a))}),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(a=>!a._trust_in_room_).forEach(a=>{w.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(a.uid)),this._handleUserOffline({uid:a.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(a=>{a._trust_audio_mute_state_||(w.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(a.uid)),this._handleMuteStream(a.uid,Ce.AUDIO,!1)),a._trust_video_mute_state_||(w.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(a.uid)),this._handleMuteStream(a.uid,Ce.VIDEO,!1)),a._trust_audio_enabled_state_||(w.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(a.uid)),this._handleSetStreamLocalEnable("audio",a.uid,!0)),a._trust_video_enabled_state_||(w.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(a.uid)),this._handleSetStreamLocalEnable("video",a.uid,!0)),a._trust_video_stream_added_state_||(w.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(a.uid)),this._handleResetAddStream(a,"video")),a._trust_audio_stream_added_state_||(w.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(a.uid)),this._handleResetAddStream(a,"audio")),a._video_added_||a._audio_added_||(w.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(a.uid)),this._handleRemoveStream({uid:a.uid,uint_id:a._uintid}))}))},1e3))}i()}),this._gateway.on(Bn.REQUEST_NEW_GATEWAY_LIST,async(e,t)=>{if(!this._joinInfo)return t(new q(O.UNEXPECTED_ERROR,"can not recover, no join info"));try{let r,n=await gH(js(js({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));n?(r=n.ap,yH(n),this._joinInfo.preload=!0):(r=await Sk(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Kr,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=r.gatewayInfo.res,this._joinInfo.gatewayAddrs=r.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=r.gatewayInfo.uni_lbs_ip);let i=[];r.gatewayInfo.gatewayAddrs.forEach(o=>{let{address:a}=o,[s,c]=a.split(":");this._joinInfo&&this._joinInfo.proxyServer?i.push({proxy:this._joinInfo.proxyServer,host:s,port:c}):i.push({host:s,port:c})}),e(i)}catch(r){t(r)}}),this._gateway.on(Bn.NETWORK_QUALITY,e=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(gt.NETWORK_QUALITY,e)}),this._gateway.on(Bn.STREAM_TYPE_CHANGE,(e,t)=>{this.safeEmit(gt.STREAM_TYPE_CHANGED,e,t),Se.reportApiInvoke(this._sessionId,{name:Qr.STREAM_TYPE_CHANGE,options:[e,t],tag:Cr.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))}),this._gateway.on(Bn.IS_P2P_DISCONNECTED,e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)}),this._gateway.on(Bn.REQUEST_P2P_CONNECTION_PARAMS,async(e,t,r)=>{try{let n=await this._p2pChannel.getEstablishParams();L("ENABLE_PREALLOC_PC")&&n||(n=await this._p2pChannel.startP2PConnection(e)),t(n)}catch(n){r(n)}}),this._gateway.on(Bn.JOIN_RESPONSE,(e,t)=>{if(this.store.useP2P)return;let r=h$(e.ortc,t,e.attributes.userAttributes.preSubSsrcs);this._p2pChannel.connect(r)}),this._gateway.on(Bn.PRE_CONNECT_PC,async e=>{let{candidates:t,fingerprint:r}=e;if(this._joinInfo&&t.length>0&&!this._p2pChannel.isPlanB){var n;await this._p2pChannel.startP2PConnection({turnServer:this._joinInfo.turnServer});let{cert:i,cid:o}=this._joinInfo.apResponse;await this._p2pChannel.connect({iceParameters:{iceUfrag:"".concat(o,"_").concat(i),icePwd:"".concat(o,"_").concat(i)},dtlsParameters:{fingerprints:[{hashFunction:"sha-256",fingerprint:(n=L("FINGERPRINT"))!==null&&n!==void 0?n:r}]},candidates:t,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:"active",cname:"o/i14u9pJrxRKAsu",preallocation:!0})}})}_handleGatewaySignalEvents(){this._gateway.signal.on(pt.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(pt.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(pt.ON_ADD_AUDIO_STREAM,e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc)),this._gateway.signal.on(pt.ON_ADD_VIDEO_STREAM,e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId)),this._gateway.signal.on(pt.ON_REMOTE_DATASTREAM_UPDATE,e=>{this._handleUpdateDataChannel(e)}),this._gateway.signal.on(pt.ON_REMOTE_FULL_DATASTREAM_INFO,e=>{this._handleUpdateDataChannel({added:e.datastreams||[],deleted:[]},!0)}),this._gateway.signal.on(pt.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(pt.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(pt.MUTE_AUDIO,e=>this._handleMuteStream(e.uid,Ce.AUDIO,!0)),this._gateway.signal.on(pt.UNMUTE_AUDIO,e=>this._handleMuteStream(e.uid,Ce.AUDIO,!1)),this._gateway.signal.on(pt.MUTE_VIDEO,e=>this._handleMuteStream(e.uid,Ce.VIDEO,!0)),this._gateway.signal.on(pt.UNMUTE_VIDEO,e=>this._handleMuteStream(e.uid,Ce.VIDEO,!1)),this._gateway.signal.on(pt.RECEIVE_METADATA,e=>{let t=qd(e.metadata);this.safeEmit(gt.RECEIVE_METADATA,e.uid,t)}),this._gateway.signal.on(pt.ON_DATA_STREAM,async e=>{var t;if(!e)return;let r=qd(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&me(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<wf)throw new q(O.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(wf));r=await async function(i,o,a){let s=a.subarray(0,wf),c=s.slice(8,wf),l=(c[0]<<8)+c[1],u=(s[6]<<8)+s[7],d=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:i,tagLength:HB,additionalData:new Uint8Array(BB(l,2))},o,a.subarray(wf));return new Uint8Array(d).subarray(0,u)}(this._encryptDataStreamIv,this._encryptDataStreamKey,r)}let n=0;if(e.ordered||e.syncWithAudio){let i=this._p2pChannel.getStats(),o=this.remoteUsers.find(s=>s.uid===e.uid),a=i==null?void 0:i.audioRecv.find(s=>s.ssrc===(o==null?void 0:o._audioSSRC));n=a==null?void 0:a.jitterBufferMs}n==null&&(n=0),c8e(js(js({},e),{},{payload:r}),n,{id:this._clientId,onStreamMessage:typeof this.onStreamMessage=="function"?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})}),this._gateway.signal.on(pt.ON_CRYPT_ERROR,()=>{Zu(()=>{w.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(gt.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(pt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(pt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{w.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,Bt.TOKEN_EXPIRE),this.safeEmit(gt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(pt.ON_STREAM_FALLBACK_UPDATE,e=>{w.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(gt.STREAM_FALLBACK,e.stream_id,e.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(pt.ON_PUBLISH_STREAM,e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),w.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))}),this._gateway.signal.on(pt.ENABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)}),this._gateway.signal.on(pt.DISABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)}),this._gateway.signal.on($e.REQUEST_TIMEOUT,(e,t)=>{if(this._joinInfo)switch(e){case Fe.PUBLISH:{if(!t)return;let i=t.ortc;if(i){var r,n;let o=i.some(c=>{let{stream_type:l}=c;return l===Lt.Audio}),a=i.some(c=>{let{stream_type:l}=c;return l!==Lt.Audio}),s=i.some(c=>{let{stream_type:l}=c;return l===Lt.Screen||l===Lt.ScreenLow});t.state==="offer"&&Se.publish(this._joinInfo.sid,{eventElapse:ti.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:O.TIMEOUT,audio:o,video:a,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:s,audioName:o?(r=i.find(c=>{let{stream_type:l}=c;return l===Lt.Audio}))===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId.toString():void 0,videoName:a?(n=i.find(c=>{let{stream_type:l}=c;return l!==Lt.Audio}))===null||n===void 0||(n=n.ssrcs[0])===null||n===void 0?void 0:n.ssrcId.toString():void 0})}break}case Fe.SUBSCRIBE:t&&Se.subscribe(this._joinInfo.sid,{succ:!1,ec:O.TIMEOUT,audio:t.stream_type===Ce.AUDIO,video:t.stream_type===Ce.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:ti.measureFromSubscribeStart(this.store.clientId,t.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(t.ssrcId)})}}),this._gateway.signal.on(pt.ON_P2P_OK,e=>{this.uid,this._uid}),this._gateway.signal.on(pt.ON_PUBLISHED_USER_LIST,e=>{if(e==null||!e.users)return;L("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter(n=>!_d(n.string_id||n.stream_id,this.channelName)));let t=[],r=[];for(let n of e.users){let i=this._users.find(u=>u._uintid===n.stream_id);i?i._trust_in_room_=!0:(i=new pu(n.string_id||n.stream_id,n.stream_id),this._users.push(i),this.getListeners(gt.PUBLISHED_USER_LIST).length===0&&(w.debug("[".concat(this._clientId,"] user online"),n.stream_id),this.safeEmit(gt.USER_JOINED,i)));let o=hn.Audio&n.stream_type,a=(hn.Video|hn.LwoVideo)&n.stream_type,s=(65280&n.stream_type)!=0,c=o&&i.hasAudio,l=a&&i.hasVideo;a&&(i._trust_video_stream_added_state_=!0,i._video_added_=!0,i._videoSSRC=n.video_ssrc,i._rtxSsrcId=n.video_rtx),o&&(i._trust_audio_stream_added_state_=!0,i._audio_added_=!0,i._audioSSRC=n.audio_ssrc),o&&!c&&this.getListeners(gt.PUBLISHED_USER_LIST).length===0&&(w.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published audio")),this.safeEmit(gt.USER_PUBLISHED,i,"audio")),a&&!l&&this.getListeners(gt.PUBLISHED_USER_LIST).length===0&&(w.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published video")),this.safeEmit(gt.USER_PUBLISHED,i,"video")),(o&&!c||a&&!l||s)&&t.push(i),a&&this._p2pChannel.hasPendingRemoteMedia(i,"video")&&r.push({user:i,mediaType:"video"}),o&&this._p2pChannel.hasPendingRemoteMedia(i,"audio")&&r.push({user:i,mediaType:"audio"})}r.length>0&&(w.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(r.map(n=>"user: ".concat(n.user.uid,", mediaType: ").concat(n.mediaType)).join("; ")," ")),this.massSubscribe(r).catch(n=>{w.error("[".concat(this._clientId,"] mass resubscribe error"),n.toString())})),this.getListeners(gt.PUBLISHED_USER_LIST).length>0?L("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(w.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map(n=>n.uid).join(", "))),this.safeEmit(gt.PUBLISHED_USER_LIST,t)):w.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map(n=>n.uid).join(", ")))}),this._gateway.signal.on(pt.ON_RTP_CAPABILITY_CHANGE,e=>{let{video_codec:t}=e;this._p2pChannel instanceof E_&&this._p2pChannel.updateRemoteRTPCapabilities(t.map(r=>r.toLowerCase()).filter(r=>{var n;return me(n=Object.keys(lC)).call(n,r)}))})}_handleP2PEvents(){this._gateway.signal.on(pt.ON_USER_OFFLINE,()=>{this._p2pChannel.disconnectForReconnect()}),this._gateway.signal.on(Pr.PUBLISH,(e,t,r)=>{let{uid:n}=e;e.forEach(i=>{let{kind:o,ssrcs:a,mid:s,isMuted:c}=i;this._handleP2PAddAudioOrVideoStream(o,n,a[0].ssrcId,s);let l=this._users.find(u=>u.uid===n);return l&&this._p2pChannel instanceof wo?this._p2pChannel.mockSubscribe(l,o,a[0].ssrcId,s).then(()=>{t()}).catch(r):t(),this._handleMuteStream(n,o,!!c)})}),this._gateway.signal.on(Pr.CALL,async(e,t,r)=>{if(this._p2pChannel instanceof wo)try{var n;t(await this._p2pChannel.startP2P({turnServer:(n=this._joinInfo)===null||n===void 0?void 0:n.turnServer},e))}catch(i){r(i)}}),this._gateway.signal.on($e.P2P_CONNECTION,async e=>{this._p2pChannel instanceof wo&&await this._p2pChannel.p2pConnect(e)}),this._gateway.signal.on(Pr.UNPUBLISH,async(e,t,r)=>{if(this._p2pChannel instanceof wo){let{unpubMsg:n,uid:i}=e,o=this._users.find(a=>a.uid===i);if(!o)return w.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i)),void t();try{n.forEach(async a=>{let{stream_type:s}=a,c=s===Lt.Audio?Ce.AUDIO:Ce.VIDEO;await this._p2pChannel.unsubscribe(o,c),this._handleMuteStream(i,c,!0)}),t()}catch(a){r(a)}}}),this._gateway.signal.on(Pr.CONTROL,async(e,t)=>{let{action:r}=e;switch(r){case Tu.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,Ce.VIDEO,!0);break;case Tu.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,Ce.AUDIO,!0);break;case Tu.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,Ce.VIDEO,!1);break;case Tu.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,Ce.AUDIO,!1)}}),this._gateway.signal.on(Pr.RESTART_ICE,async(e,t,r)=>{if(this._p2pChannel instanceof wo)try{let{direction:n,iceParameter:i}=e;n!==Mi.SEND_ONLY||i?t(await this._p2pChannel.restartICE(n,i)):(this._p2pChannel.handleDisconnect(n),t())}catch(n){r(n)}}),this._gateway.signal.on(Pr.CANDIDATE,e=>{if(this._p2pChannel instanceof wo){let{candidate:t,direction:r}=e;this._p2pChannel.addRemoteCandidate(t,r)}}),this._p2pChannel.on(Le.RequestP2PRestartICE,async(e,t,r)=>{try{let{direction:n}=e;t(await this._gateway.sendExtensionMessage(Pr.RESTART_ICE,e,n===Mi.SEND_ONLY))}catch(n){r(n)}}),this._p2pChannel.on(Le.LocalCandidate,e=>{this._gateway.sendExtensionMessage(Pr.CANDIDATE,JSON.stringify(e),!0)}),this._p2pChannel.on(Le.RequestP2PMuteLocal,async(e,t,r)=>{try{await this._gateway.sendExtensionMessage(Pr.CONTROL,e,!0),t()}catch(n){r(n)}}),this._p2pChannel.on(Le.RequestP2PUnmuteRemote,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===O.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Le.RequestP2PMuteRemote,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===O.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Le.StateChange,(e,t)=>{t===Dt.Connected&&this._p2pChannel.republish()})}_handleP2PChannelEvents(){this._p2pChannel.on(Le.RequestMuteLocal,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===O.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Le.RequestUnmuteLocal,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===O.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Le.RequestRePublish,(e,t,r)=>{this.publish(e,!1).then(t).catch(r)}),this._p2pChannel.on(Le.RequestRePublishDataChannel,(e,t,r)=>{he.all(e.map(async n=>{let i=await this._p2pChannel.publishDataChannel([n]);try{i.forEach(o=>{this._uid&&this._gateway.publishDataChannel(this._uid,o,!0)})}catch(o){if(o.code!==O.DISCONNECT_P2P)throw o}})).then(t).catch(r)}),this._p2pChannel.on(Le.RequestReSubscribe,async(e,t,r)=>{try{for(let{user:n,kind:i}of e)i===Ce.VIDEO?await this.subscribe(n,"video"):await this.subscribe(n,"audio");t()}catch(n){r(n)}}),this._p2pChannel.on(Le.RequestUpload,(e,t)=>{this._gateway.upload(e,t)}),this._p2pChannel.on(Le.RequestUploadStats,e=>{this._gateway.uploadWRTCStats(e)}),this._p2pChannel.on(Le.MediaReconnectStart,e=>{this.safeEmit(gt.MEDIA_RECONNECT_START,e)}),this._p2pChannel.on(Le.MediaReconnectEnd,e=>{this.safeEmit(gt.MEDIA_RECONNECT_END,e)}),this._p2pChannel.on(Le.NeedSignalRTT,e=>{e(this._gateway.getSignalRTT())}),this._p2pChannel.on(Le.RequestRestartICE,async e=>{if(this._p2pChannel instanceof wo)return;let t=await this._p2pChannel.restartICE(e),r=await t.next();if(r.done)return;let n=r.value,i;try{i=await this._gateway.restartICE({iceParameters:n})}catch(a){return void t.throw(a)}let{iceParameters:o}=function(a){let s=a.iceParameters;return{iceParameters:{iceUfrag:s.iceUfrag,icePwd:s.icePwd}}}(i);await t.next({remoteIceParameters:o})}),this._p2pChannel.on(Le.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(Le.RequestReconnectPC,async()=>{var e;let{iceParameters:t,dtlsParameters:r,rtpCapabilities:n}=await this._p2pChannel.startP2PConnection({turnServer:(e=this._joinInfo)===null||e===void 0?void 0:e.turnServer}),{gatewayEstablishParams:i,gatewayAddress:o}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:r,rtpCapabilities:n}),a=h$(i,o);await this._p2pChannel.connect(a),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(Le.RequestUnpublishForReconnectPC,async(e,t,r)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(e,this._uid),t()):r()}),this._p2pChannel.on(Le.P2PLost,()=>{this.safeEmit(gt.P2P_LOST,this.store.uid)}),this._p2pChannel.on(Le.UpdateVideoEncoder,e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)}),this._p2pChannel.on(Le.ConnectionTypeChange,e=>{this.safeEmit(gt.IS_USING_CLOUD_PROXY,e)}),this._p2pChannel.on(Le.RequestLowStreamParameter,e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(Le.QueryClientConnectionState,e=>{e(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if(!this._joinInfo||this.connectionState!=="CONNECTED")throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] can not create content inspect, please join channel first"));if(this._inspect)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));try{let r=(t={config:e},ty("ContentInspect").create(t));this._inspect=r,this.handleVideoInspectEvents(r);let{appId:n,cname:i,sid:o,token:a,uid:s,cid:c,vid:l}=this._joinInfo;await r.init({appId:n,areaCode:"",cname:i,sid:o,token:a,uid:s,cid:c,vid:l?Number(l):0},Kr)}catch(r){throw Array.isArray(r)?r[0]:r}var t}handleVideoInspectEvents(e){e.on(_n.CONNECTION_STATE_CHANGE,(t,r)=>{if(this.safeEmit(gt.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,r),r===ts.CONNECTED){if(this.connectionState!=="CONNECTED")return void this.safeEmit(gt.CONTENT_INSPECT_ERROR,new q(O.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}}),e.on(_n.INSPECT_RESULT,(t,r)=>{var n;if((r==null?void 0:r.code)===O.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return w.debug("Stop inspect content because that has left channel"),this==null||(n=this._inspect)===null||n===void 0||n.close(),void(this._inspect=void 0);this.safeEmit(gt.CONTENT_INSPECT_RESULT,t,r)}),e.on(_n.CLIENT_LOCAL_VIDEO_TRACK,t=>{t(this.localTracks.filter(r=>r.trackMediaType==="video")[0])})}async disableContentInspect(){if(!this._inspect)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(fl(e,"enabled"),e){if(!t)throw new q(O.INVALID_PARAMS,"config is required");if(ure(t),!this._joinInfo)throw new q(O.INVALID_OPERATION,"can not create image moderation, please join channel first");try{if(this._moderation)this._moderation.updateConfig(t);else{let n=(r={config:t},ty("ImageModeration").create(r));this._moderation=n,this.handleImageModerationEvents(n);let{appId:i,cname:o,sid:a,token:s,uid:c,cid:l,vid:u}=this._joinInfo;await n.init({appId:i,areaCode:"",cname:o,sid:a,token:s,uid:c,cid:l,vid:u?Number(u):0},Kr)}}catch(n){throw Array.isArray(n)?n[0]:n}}else{var r;if(!this._moderation)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(n){throw Array.isArray(n)?n[0]:n}}}handleImageModerationEvents(e){e.on(Ls.CONNECTION_STATE_CHANGE,(t,r)=>{if(this.safeEmit(gt.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,r),t===pa.CONNECTED){if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new q(O.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}}),e.on(Ls.CLIENT_LOCAL_VIDEO_TRACK,t=>{t(this.localTracks.filter(r=>r.trackMediaType==="video")[0])})}setP2PTransport(e){if(function(t){on(t,"transport",["default","auto","relay","sd-rtn"])}(e),this.mode!=="p2p")throw new q(O.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,w.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}getJoinChannelServiceRecords(){return w.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){fl(e,"enabled"),Gt("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}},_e(pe.prototype,"leave",[RH],Object.getOwnPropertyDescriptor(pe.prototype,"leave"),pe.prototype),_e(pe.prototype,"publish",[IH],Object.getOwnPropertyDescriptor(pe.prototype,"publish"),pe.prototype),_e(pe.prototype,"unpublish",[xH],Object.getOwnPropertyDescriptor(pe.prototype,"unpublish"),pe.prototype),_e(pe.prototype,"subscribe",[AH],Object.getOwnPropertyDescriptor(pe.prototype,"subscribe"),pe.prototype),_e(pe.prototype,"presubscribe",[NH],Object.getOwnPropertyDescriptor(pe.prototype,"presubscribe"),pe.prototype),_e(pe.prototype,"massSubscribe",[OH],Object.getOwnPropertyDescriptor(pe.prototype,"massSubscribe"),pe.prototype),_e(pe.prototype,"unsubscribe",[kH],Object.getOwnPropertyDescriptor(pe.prototype,"unsubscribe"),pe.prototype),_e(pe.prototype,"massUnsubscribe",[PH],Object.getOwnPropertyDescriptor(pe.prototype,"massUnsubscribe"),pe.prototype),_e(pe.prototype,"setLowStreamParameter",[DH],Object.getOwnPropertyDescriptor(pe.prototype,"setLowStreamParameter"),pe.prototype),_e(pe.prototype,"enableDualStream",[LH],Object.getOwnPropertyDescriptor(pe.prototype,"enableDualStream"),pe.prototype),_e(pe.prototype,"disableDualStream",[MH],Object.getOwnPropertyDescriptor(pe.prototype,"disableDualStream"),pe.prototype),_e(pe.prototype,"setClientRole",[jH],Object.getOwnPropertyDescriptor(pe.prototype,"setClientRole"),pe.prototype),_e(pe.prototype,"setProxyServer",[UH],Object.getOwnPropertyDescriptor(pe.prototype,"setProxyServer"),pe.prototype),_e(pe.prototype,"setTurnServer",[FH],Object.getOwnPropertyDescriptor(pe.prototype,"setTurnServer"),pe.prototype),_e(pe.prototype,"setLicense",[VH],Object.getOwnPropertyDescriptor(pe.prototype,"setLicense"),pe.prototype),_e(pe.prototype,"startProxyServer",[BH],Object.getOwnPropertyDescriptor(pe.prototype,"startProxyServer"),pe.prototype),_e(pe.prototype,"stopProxyServer",[$H],Object.getOwnPropertyDescriptor(pe.prototype,"stopProxyServer"),pe.prototype),_e(pe.prototype,"setLocalAccessPointsV2",[HH],Object.getOwnPropertyDescriptor(pe.prototype,"setLocalAccessPointsV2"),pe.prototype),_e(pe.prototype,"setLocalAccessPoints",[zH],Object.getOwnPropertyDescriptor(pe.prototype,"setLocalAccessPoints"),pe.prototype),_e(pe.prototype,"setRemoteDefaultVideoStreamType",[GH],Object.getOwnPropertyDescriptor(pe.prototype,"setRemoteDefaultVideoStreamType"),pe.prototype),_e(pe.prototype,"setRemoteVideoStreamType",[WH],Object.getOwnPropertyDescriptor(pe.prototype,"setRemoteVideoStreamType"),pe.prototype),_e(pe.prototype,"setStreamFallbackOption",[KH],Object.getOwnPropertyDescriptor(pe.prototype,"setStreamFallbackOption"),pe.prototype),_e(pe.prototype,"setEncryptionConfig",[qH],Object.getOwnPropertyDescriptor(pe.prototype,"setEncryptionConfig"),pe.prototype),_e(pe.prototype,"renewToken",[YH],Object.getOwnPropertyDescriptor(pe.prototype,"renewToken"),pe.prototype),_e(pe.prototype,"enableAudioVolumeIndicator",[XH],Object.getOwnPropertyDescriptor(pe.prototype,"enableAudioVolumeIndicator"),pe.prototype),_e(pe.prototype,"startLiveStreaming",[JH],Object.getOwnPropertyDescriptor(pe.prototype,"startLiveStreaming"),pe.prototype),_e(pe.prototype,"setLiveTranscoding",[QH],Object.getOwnPropertyDescriptor(pe.prototype,"setLiveTranscoding"),pe.prototype),_e(pe.prototype,"stopLiveStreaming",[ZH],Object.getOwnPropertyDescriptor(pe.prototype,"stopLiveStreaming"),pe.prototype),_e(pe.prototype,"startChannelMediaRelay",[e7],Object.getOwnPropertyDescriptor(pe.prototype,"startChannelMediaRelay"),pe.prototype),_e(pe.prototype,"updateChannelMediaRelay",[t7],Object.getOwnPropertyDescriptor(pe.prototype,"updateChannelMediaRelay"),pe.prototype),_e(pe.prototype,"stopChannelMediaRelay",[r7],Object.getOwnPropertyDescriptor(pe.prototype,"stopChannelMediaRelay"),pe.prototype),_e(pe.prototype,"sendCustomReportMessage",[n7],Object.getOwnPropertyDescriptor(pe.prototype,"sendCustomReportMessage"),pe.prototype),_e(pe.prototype,"pickSVCLayer",[i7],Object.getOwnPropertyDescriptor(pe.prototype,"pickSVCLayer"),pe.prototype),_e(pe.prototype,"setRTMConfig",[o7],Object.getOwnPropertyDescriptor(pe.prototype,"setRTMConfig"),pe.prototype),_e(pe.prototype,"enableContentInspect",[a7],Object.getOwnPropertyDescriptor(pe.prototype,"enableContentInspect"),pe.prototype),_e(pe.prototype,"disableContentInspect",[s7],Object.getOwnPropertyDescriptor(pe.prototype,"disableContentInspect"),pe.prototype),_e(pe.prototype,"setImageModeration",[c7],Object.getOwnPropertyDescriptor(pe.prototype,"setImageModeration"),pe.prototype),_e(pe.prototype,"setP2PTransport",[l7],Object.getOwnPropertyDescriptor(pe.prototype,"setP2PTransport"),pe.prototype),_e(pe.prototype,"getJoinChannelServiceRecords",[u7],Object.getOwnPropertyDescriptor(pe.prototype,"getJoinChannelServiceRecords"),pe.prototype),_e(pe.prototype,"setPublishAudioFilterEnabled",[d7],Object.getOwnPropertyDescriptor(pe.prototype,"setPublishAudioFilterEnabled"),pe.prototype),pe),dre=class Nk{constructor(t,r){I(this,"id",0),I(this,"element",void 0),I(this,"peerPair",void 0),I(this,"context",void 0),I(this,"audioPlayerElement",void 0),I(this,"audioTrack",void 0),Nk.count+=1,this.id=Nk.count,this.element=t,this.context=r}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=t=>{let r=document.createElement("audio");r.srcObject=new MediaStream([t.track]),r.play(),this.audioPlayerElement=r}}async switchSdp(){if(!this.peerPair)return;let t=async(n,i)=>{let o=i==="offer"?await n.createOffer():await n.createAnswer();return await n.setLocalDescription(o),n.iceGatheringState==="complete"?n.localDescription:new he(a=>{n.onicegatheringstatechange=()=>{n.iceGatheringState==="complete"&&a(n.localDescription)}})},r=async(n,i)=>await n.setRemoteDescription(i);try{let n=await t(this.peerPair[0],"offer");await r(this.peerPair[1],n);let i=await t(this.peerPair[1],"answer");await r(this.peerPair[0],i)}catch(n){throw new q(O.LOCAL_AEC_ERROR,n.toString()).print()}}async getTracksFromMediaElement(t){if(this.audioTrack)return this.audioTrack;let r;try{t instanceof HTMLVideoElement&&(t.captureStream?t.captureStream():t.mozCaptureStream()),r=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(t).connect(r)}catch(i){throw new q(O.LOCAL_AEC_ERROR,i.toString()).print()}if(!r)throw new q(O.LOCAL_AEC_ERROR,"no dest node when local aec").print();let n=r.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();let t=this.element,r=await this.getTracksFromMediaElement(t);this.peerPair&&this.peerPair[0].addTrack(r),await this.switchSdp()}close(){w.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(t=>{t.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}},f7,b_;I(dre,"count",0);var R8e=window.AudioContext||window.webkitAudioContext,I8e=new(f7=De({report:Se}),_e((b_=class{constructor(){I(this,"units",[]),I(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return w.debug("the system does not need to process local aec"),-1;this.context||(this.context=new R8e);let t=this.units.find(r=>r&&r.getElement()===e);return t||(t=new dre(e,this.context),this.units.push(t)),t.startEchoCancellation(),w.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return St().name!==Mt.SAFARI}}).prototype,"processExternalMediaAEC",[f7],Object.getOwnPropertyDescriptor(b_.prototype,"processExternalMediaAEC"),b_.prototype),b_);function p7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function m7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p7(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var aA=window||document;function hre(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!aA)return;let r=Sr._cspEventHandlerPointer;if(r&&t)return void console.error(r,t);let n=i=>{if(!(i&&i.blockedURI&&(Sr.onSecurityPolicyViolation||Sr.getListeners(Sc.SECURITY_POLICY_VIOLATION).length>0)))return;let o=i.blockedURI;L("CSP_DETECTED_HOSTNAME_LIST").some(a=>me(o).call(o,a))&&(Sr.onSecurityPolicyViolation&&typeof Sr.onSecurityPolicyViolation=="function"&&Sr.onSecurityPolicyViolation(i),Sr.getListeners(Sc.SECURITY_POLICY_VIOLATION).length>0&&Sr.safeEmit(Sc.SECURITY_POLICY_VIOLATION,i))};r&&aA.removeEventListener("securitypolicyviolation",r),(t||e&&typeof e=="function"||Sr.getListeners(Sc.SECURITY_POLICY_VIOLATION).length>0)&&aA.addEventListener("securitypolicyviolation",n),Sr._cspEventHandlerPointer=n}var x8e=Hi,A8e=dee,g7=RegExp.prototype,N8e=function(e){return e===g7||x8e(g7,e)?A8e(e):e.flags},bi=jr(N8e);function Ym(e){let t=e.length;for(;--t>=0;)e[t]=0}var KL=256,fre=286,ky=30,Py=15,Ok=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Tb=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),O8e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),y7=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ul=new Array(576);Ym(ul);var Dy=new Array(60);Ym(Dy);var V0=new Array(512);Ym(V0);var B0=new Array(256);Ym(B0);var qL=new Array(29);Ym(qL);var fS=new Array(ky);function sA(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var v7,E7,_7;function cA(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Ym(fS);var pre=e=>e<256?V0[e]:V0[256+(e>>>7)],$0=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Go=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,$0(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},Tc=(e,t,r)=>{Go(e,r[2*t],r[2*t+1])},mre=(e,t)=>{let r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0);return r>>>1},gre=(e,t,r)=>{let n=new Array(16),i,o,a=0;for(i=1;i<=Py;i++)a=a+r[i-1]<<1,n[i]=a;for(o=0;o<=t;o++){let s=e[2*o+1];s!==0&&(e[2*o]=mre(n[s]++,s))}},yre=e=>{let t;for(t=0;t<fre;t++)e.dyn_ltree[2*t]=0;for(t=0;t<ky;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},vre=e=>{e.bi_valid>8?$0(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},b7=(e,t,r,n)=>{let i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},lA=(e,t,r)=>{let n=e.heap[r],i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&b7(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!b7(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},w7=(e,t,r)=>{let n,i,o,a,s=0;if(e.sym_next!==0)do n=255&e.pending_buf[e.sym_buf+s++],n+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],n===0?Tc(e,i,t):(o=B0[i],Tc(e,o+KL+1,t),a=Ok[o],a!==0&&(i-=qL[o],Go(e,i,a)),n--,o=pre(n),Tc(e,o,r),a=Tb[o],a!==0&&(n-=fS[o],Go(e,n,a)));while(s<e.sym_next);Tc(e,256,t)},uA=(e,t)=>{let r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,a,s,c,l=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<o;a++)r[2*a]!==0?(e.heap[++e.heap_len]=l=a,e.depth[a]=0):r[2*a+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,r[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=n[2*c+1]);for(t.max_code=l,a=e.heap_len>>1;a>=1;a--)lA(e,r,a);c=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],lA(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,r[2*c]=r[2*a]+r[2*s],e.depth[c]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,r[2*a+1]=r[2*s+1]=c,e.heap[1]=c++,lA(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((u,d)=>{let f=d.dyn_tree,p=d.max_code,m=d.stat_desc.static_tree,g=d.stat_desc.has_stree,y=d.stat_desc.extra_bits,v=d.stat_desc.extra_base,E=d.stat_desc.max_length,b,S,A,N,D,M,H=0;for(N=0;N<=Py;N++)u.bl_count[N]=0;for(f[2*u.heap[u.heap_max]+1]=0,b=u.heap_max+1;b<573;b++)S=u.heap[b],N=f[2*f[2*S+1]+1]+1,N>E&&(N=E,H++),f[2*S+1]=N,S>p||(u.bl_count[N]++,D=0,S>=v&&(D=y[S-v]),M=f[2*S],u.opt_len+=M*(N+D),g&&(u.static_len+=M*(m[2*S+1]+D)));if(H!==0){do{for(N=E-1;u.bl_count[N]===0;)N--;u.bl_count[N]--,u.bl_count[N+1]+=2,u.bl_count[E]--,H-=2}while(H>0);for(N=E;N!==0;N--)for(S=u.bl_count[N];S!==0;)A=u.heap[--b],A>p||(f[2*A+1]!==N&&(u.opt_len+=(N-f[2*A+1])*f[2*A],f[2*A+1]=N),S--)}})(e,t),gre(r,l,e.bl_count)},S7=(e,t,r)=>{let n,i,o=-1,a=t[1],s=0,c=7,l=4;for(a===0&&(c=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<c&&i===a||(s<l?e.bl_tree[2*i]+=s:i!==0?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,a===0?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4))},T7=(e,t,r)=>{let n,i,o=-1,a=t[1],s=0,c=7,l=4;for(a===0&&(c=138,l=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<c&&i===a)){if(s<l)do Tc(e,i,e.bl_tree);while(--s!=0);else i!==0?(i!==o&&(Tc(e,i,e.bl_tree),s--),Tc(e,16,e.bl_tree),Go(e,s-3,2)):s<=10?(Tc(e,17,e.bl_tree),Go(e,s-3,3)):(Tc(e,18,e.bl_tree),Go(e,s-11,7));s=0,o=i,a===0?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4)}},C7=!1,Ere=(e,t,r,n)=>{Go(e,0+(n?1:0),3),vre(e),$0(e,r),$0(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},k8e=e=>{C7||((()=>{let t,r,n,i,o,a=new Array(16);for(n=0,i=0;i<28;i++)for(qL[i]=n,t=0;t<1<<Ok[i];t++)B0[n++]=i;for(B0[n-1]=i,o=0,i=0;i<16;i++)for(fS[i]=o,t=0;t<1<<Tb[i];t++)V0[o++]=i;for(o>>=7;i<ky;i++)for(fS[i]=o<<7,t=0;t<1<<Tb[i]-7;t++)V0[256+o++]=i;for(r=0;r<=Py;r++)a[r]=0;for(t=0;t<=143;)ul[2*t+1]=8,t++,a[8]++;for(;t<=255;)ul[2*t+1]=9,t++,a[9]++;for(;t<=279;)ul[2*t+1]=7,t++,a[7]++;for(;t<=287;)ul[2*t+1]=8,t++,a[8]++;for(gre(ul,287,a),t=0;t<ky;t++)Dy[2*t+1]=5,Dy[2*t]=mre(t,5);v7=new sA(ul,Ok,257,fre,Py),E7=new sA(Dy,Tb,0,ky,Py),_7=new sA(new Array(0),O8e,0,19,7)})(),C7=!0),e.l_desc=new cA(e.dyn_ltree,v7),e.d_desc=new cA(e.dyn_dtree,E7),e.bl_desc=new cA(e.bl_tree,_7),e.bi_buf=0,e.bi_valid=0,yre(e)},P8e=(e,t,r,n)=>{let i,o,a=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=(s=>{let c,l=4093624447;for(c=0;c<=31;c++,l>>>=1)if(1&l&&s.dyn_ltree[2*c]!==0)return 0;if(s.dyn_ltree[18]!==0||s.dyn_ltree[20]!==0||s.dyn_ltree[26]!==0)return 1;for(c=32;c<KL;c++)if(s.dyn_ltree[2*c]!==0)return 1;return 0})(e)),uA(e,e.l_desc),uA(e,e.d_desc),a=(s=>{let c;for(S7(s,s.dyn_ltree,s.l_desc.max_code),S7(s,s.dyn_dtree,s.d_desc.max_code),uA(s,s.bl_desc),c=18;c>=3&&s.bl_tree[2*y7[c]+1]===0;c--);return s.opt_len+=3*(c+1)+5+5+4,c})(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&t!==-1?Ere(e,t,r,n):e.strategy===4||o===i?(Go(e,2+(n?1:0),3),w7(e,ul,Dy)):(Go(e,4+(n?1:0),3),((s,c,l,u)=>{let d;for(Go(s,c-257,5),Go(s,l-1,5),Go(s,u-4,4),d=0;d<u;d++)Go(s,s.bl_tree[2*y7[d]+1],3);T7(s,s.dyn_ltree,c-1),T7(s,s.dyn_dtree,l-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),w7(e,e.dyn_ltree,e.dyn_dtree)),yre(e),n&&vre(e)},D8e=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(B0[r]+KL+1)]++,e.dyn_dtree[2*pre(t)]++),e.sym_next===e.sym_end),L8e=e=>{Go(e,2,3),Tc(e,256,ul),(t=>{t.bi_valid===16?($0(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(e)},M8e={_tr_init:k8e,_tr_stored_block:Ere,_tr_flush_block:P8e,_tr_tally:D8e,_tr_align:L8e},H0=(e,t,r,n)=>{let i=65535&e|0,o=e>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+t[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0},j8e=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})()),Pi=(e,t,r,n)=>{let i=j8e,o=n+r;e^=-1;for(let a=n;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},Nh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Xm={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:U8e,_tr_stored_block:kk,_tr_flush_block:F8e,_tr_tally:Bu,_tr_align:V8e}=M8e,{Z_NO_FLUSH:$u,Z_PARTIAL_FLUSH:B8e,Z_FULL_FLUSH:$8e,Z_FINISH:ds,Z_BLOCK:R7,Z_OK:Ki,Z_STREAM_END:I7,Z_STREAM_ERROR:Pc,Z_DATA_ERROR:H8e,Z_BUF_ERROR:dA,Z_DEFAULT_COMPRESSION:z8e,Z_FILTERED:G8e,Z_HUFFMAN_ONLY:w_,Z_RLE:W8e,Z_FIXED:K8e,Z_DEFAULT_STRATEGY:q8e,Z_UNKNOWN:Y8e,Z_DEFLATED:pC}=Xm,Pk=286,X8e=30,J8e=19,Q8e=2*Pk+1,Z8e=15,Xd=258,Dc=262,hm=42,Jd=113,ny=666,Qd=(e,t)=>(e.msg=Nh[t],t),x7=e=>2*e-(e>4?9:0),mu=e=>{let t=e.length;for(;--t>=0;)e[t]=0},e$e=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=i?r-i:0;while(--t);t=i,n=t;do r=e.prev[--n],e.prev[n]=r>=i?r-i:0;while(--t)},Hu=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,ya=e=>{let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},_a=(e,t)=>{F8e(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ya(e.strm)},xr=(e,t)=>{e.pending_buf[e.pending++]=t},jg=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Dk=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),e.state.wrap===1?e.adler=H0(e.adler,t,i,r):e.state.wrap===2&&(e.adler=Pi(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},_re=(e,t)=>{let r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-Dc?e.strstart-(e.w_size-Dc):0,l=e.window,u=e.w_mask,d=e.prev,f=e.strstart+Xd,p=l[o+a-1],m=l[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do if(r=t,l[r+a]===m&&l[r+a-1]===p&&l[r]===l[o]&&l[++r]===l[o+1]){o+=2,r++;do;while(l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&o<f);if(n=Xd-(f-o),o=f-Xd,n>a){if(e.match_start=t,a=n,n>=s)break;p=l[o+a-1],m=l[o+a]}}while((t=d[t&u])>c&&--i!=0);return a<=e.lookahead?a:e.lookahead},fm=e=>{let t=e.w_size,r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Dc)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),e$e(e),n+=t),e.strm.avail_in===0)break;if(r=Dk(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Hu(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Hu(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Dc&&e.strm.avail_in!==0)},bre=(e,t)=>{let r,n,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<o&&(r===0&&t!==ds||t===$u||r!==n+e.strm.avail_in)))break;a=t===ds&&r===n+e.strm.avail_in?1:0,kk(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,ya(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(Dk(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(a===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==$u&&t!==ds&&e.strm.avail_in===0&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Dk(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,o=i>e.w_size?e.w_size:i,n=e.strstart-e.block_start,(n>=o||(n||t===ds)&&t!==$u&&e.strm.avail_in===0&&n<=i)&&(r=n>i?i:n,a=t===ds&&e.strm.avail_in===0&&r===n?1:0,kk(e,e.block_start,r,a),e.block_start+=r,ya(e.strm)),a?3:1)},hA=(e,t)=>{let r,n;for(;;){if(e.lookahead<Dc){if(fm(e),e.lookahead<Dc&&t===$u)return 1;if(e.lookahead===0)break}if(r=0,e.lookahead>=3&&(e.ins_h=Hu(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Dc&&(e.match_length=_re(e,r)),e.match_length>=3)if(n=Bu(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=Hu(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Hu(e,e.ins_h,e.window[e.strstart+1]);else n=Bu(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(_a(e,!1),e.strm.avail_out===0))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ds?(_a(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(_a(e,!1),e.strm.avail_out===0)?1:2},kf=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<Dc){if(fm(e),e.lookahead<Dc&&t===$u)return 1;if(e.lookahead===0)break}if(r=0,e.lookahead>=3&&(e.ins_h=Hu(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Dc&&(e.match_length=_re(e,r),e.match_length<=5&&(e.strategy===G8e||e.match_length===3&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=Bu(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=Hu(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(_a(e,!1),e.strm.avail_out===0))return 1}else if(e.match_available){if(n=Bu(e,0,e.window[e.strstart-1]),n&&_a(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Bu(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ds?(_a(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(_a(e,!1),e.strm.avail_out===0)?1:2};function mc(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var iy=[new mc(0,0,0,0,bre),new mc(4,4,8,4,hA),new mc(4,5,16,8,hA),new mc(4,6,32,32,hA),new mc(4,4,16,16,kf),new mc(8,16,32,32,kf),new mc(8,16,128,128,kf),new mc(8,32,128,256,kf),new mc(32,128,258,1024,kf),new mc(32,258,258,4096,kf)];function t$e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pC,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*Q8e),this.dyn_dtree=new Uint16Array(2*(2*X8e+1)),this.bl_tree=new Uint16Array(2*(2*J8e+1)),mu(this.dyn_ltree),mu(this.dyn_dtree),mu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Z8e+1),this.heap=new Uint16Array(2*Pk+1),mu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Pk+1),mu(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var z0=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.status!==hm&&t.status!==57&&t.status!==69&&t.status!==73&&t.status!==91&&t.status!==103&&t.status!==Jd&&t.status!==ny?1:0},wre=e=>{if(z0(e))return Qd(e,Pc);e.total_in=e.total_out=0,e.data_type=Y8e;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?57:t.wrap?hm:Jd,e.adler=t.wrap===2?0:1,t.last_flush=-2,U8e(t),Ki},Sre=e=>{let t=wre(e);return t===Ki&&(r=>{r.window_size=2*r.w_size,mu(r.head),r.max_lazy_match=iy[r.level].max_lazy,r.good_match=iy[r.level].good_length,r.nice_match=iy[r.level].nice_length,r.max_chain_length=iy[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0})(e.state),t},A7=(e,t,r,n,i,o)=>{if(!e)return Pc;let a=1;if(t===z8e&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>9||r!==pC||n<8||n>15||t<0||t>9||o<0||o>K8e||n===8&&a!==1)return Qd(e,Pc);n===8&&(n=9);let s=new t$e;return e.state=s,s.strm=e,s.status=hm,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=r,Sre(e)},r$e=(e,t)=>{if(z0(e)||t>R7||t<0)return e?Qd(e,Pc):Pc;let r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===ny&&t!==ds)return Qd(e,e.avail_out===0?dA:Pc);let n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(ya(e),e.avail_out===0)return r.last_flush=-1,Ki}else if(e.avail_in===0&&x7(t)<=x7(n)&&t!==ds)return Qd(e,dA);if(r.status===ny&&e.avail_in!==0)return Qd(e,dA);if(r.status===hm&&r.wrap===0&&(r.status=Jd),r.status===hm){let i=pC+(r.w_bits-8<<4)<<8,o=-1;if(o=r.strategy>=w_||r.level<2?0:r.level<6?1:r.level===6?2:3,i|=o<<6,r.strstart!==0&&(i|=32),i+=31-i%31,jg(r,i),r.strstart!==0&&(jg(r,e.adler>>>16),jg(r,65535&e.adler)),e.adler=1,r.status=Jd,ya(e),r.pending!==0)return r.last_flush=-1,Ki}if(r.status===57){if(e.adler=0,xr(r,31),xr(r,139),xr(r,8),r.gzhead)xr(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),xr(r,255&r.gzhead.time),xr(r,r.gzhead.time>>8&255),xr(r,r.gzhead.time>>16&255),xr(r,r.gzhead.time>>24&255),xr(r,r.level===9?2:r.strategy>=w_||r.level<2?4:0),xr(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(xr(r,255&r.gzhead.extra.length),xr(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Pi(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(xr(r,0),xr(r,0),xr(r,0),xr(r,0),xr(r,0),xr(r,r.level===9?2:r.strategy>=w_||r.level<2?4:0),xr(r,3),r.status=Jd,ya(e),r.pending!==0)return r.last_flush=-1,Ki}if(r.status===69){if(r.gzhead.extra){let i=r.pending,o=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+o>r.pending_buf_size;){let s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(e.adler=Pi(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=s,ya(e),r.pending!==0)return r.last_flush=-1,Ki;i=0,o-=s}let a=new Uint8Array(r.gzhead.extra);r.pending_buf.set(a.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending+=o,r.gzhead.hcrc&&r.pending>i&&(e.adler=Pi(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=73}if(r.status===73){if(r.gzhead.name){let i,o=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(e.adler=Pi(e.adler,r.pending_buf,r.pending-o,o)),ya(e),r.pending!==0)return r.last_flush=-1,Ki;o=0}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,xr(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=Pi(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=91}if(r.status===91){if(r.gzhead.comment){let i,o=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(e.adler=Pi(e.adler,r.pending_buf,r.pending-o,o)),ya(e),r.pending!==0)return r.last_flush=-1,Ki;o=0}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,xr(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=Pi(e.adler,r.pending_buf,r.pending-o,o))}r.status=103}if(r.status===103){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(ya(e),r.pending!==0))return r.last_flush=-1,Ki;xr(r,255&e.adler),xr(r,e.adler>>8&255),e.adler=0}if(r.status=Jd,ya(e),r.pending!==0)return r.last_flush=-1,Ki}if(e.avail_in!==0||r.lookahead!==0||t!==$u&&r.status!==ny){let i=r.level===0?bre(r,t):r.strategy===w_?((o,a)=>{let s;for(;;){if(o.lookahead===0&&(fm(o),o.lookahead===0)){if(a===$u)return 1;break}if(o.match_length=0,s=Bu(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,s&&(_a(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,a===ds?(_a(o,!0),o.strm.avail_out===0?3:4):o.sym_next&&(_a(o,!1),o.strm.avail_out===0)?1:2})(r,t):r.strategy===W8e?((o,a)=>{let s,c,l,u,d=o.window;for(;;){if(o.lookahead<=Xd){if(fm(o),o.lookahead<=Xd&&a===$u)return 1;if(o.lookahead===0)break}if(o.match_length=0,o.lookahead>=3&&o.strstart>0&&(l=o.strstart-1,c=d[l],c===d[++l]&&c===d[++l]&&c===d[++l])){u=o.strstart+Xd;do;while(c===d[++l]&&c===d[++l]&&c===d[++l]&&c===d[++l]&&c===d[++l]&&c===d[++l]&&c===d[++l]&&c===d[++l]&&l<u);o.match_length=Xd-(u-l),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(o.match_length>=3?(s=Bu(o,1,o.match_length-3),o.lookahead-=o.match_length,o.strstart+=o.match_length,o.match_length=0):(s=Bu(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),s&&(_a(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,a===ds?(_a(o,!0),o.strm.avail_out===0?3:4):o.sym_next&&(_a(o,!1),o.strm.avail_out===0)?1:2})(r,t):iy[r.level].func(r,t);if(i!==3&&i!==4||(r.status=ny),i===1||i===3)return e.avail_out===0&&(r.last_flush=-1),Ki;if(i===2&&(t===B8e?V8e(r):t!==R7&&(kk(r,0,0,!1),t===$8e&&(mu(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),ya(e),e.avail_out===0))return r.last_flush=-1,Ki}return t!==ds?Ki:r.wrap<=0?I7:(r.wrap===2?(xr(r,255&e.adler),xr(r,e.adler>>8&255),xr(r,e.adler>>16&255),xr(r,e.adler>>24&255),xr(r,255&e.total_in),xr(r,e.total_in>>8&255),xr(r,e.total_in>>16&255),xr(r,e.total_in>>24&255)):(jg(r,e.adler>>>16),jg(r,65535&e.adler)),ya(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Ki:I7)},n$e=(e,t)=>{let r=t.length;if(z0(e))return Pc;let n=e.state,i=n.wrap;if(i===2||i===1&&n.status!==hm||n.lookahead)return Pc;if(i===1&&(e.adler=H0(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){i===0&&(mu(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(t.subarray(r-n.w_size,r),0),t=c,r=n.w_size}let o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,fm(n);n.lookahead>=3;){let c=n.strstart,l=n.lookahead-2;do n.ins_h=Hu(n,n.ins_h,n.window[c+3-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--l);n.strstart=c,n.lookahead=2,fm(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,n.wrap=i,Ki},Ly={deflateInit:(e,t)=>A7(e,t,pC,15,8,q8e),deflateInit2:A7,deflateReset:Sre,deflateResetKeep:wre,deflateSetHeader:(e,t)=>z0(e)||e.state.wrap!==2?Pc:(e.state.gzhead=t,Ki),deflate:r$e,deflateEnd:e=>{if(z0(e))return Pc;let t=e.state.status;return e.state=null,t===Jd?Qd(e,H8e):Ki},deflateSetDictionary:n$e,deflateInfo:"pako deflate (from Nodeca project)"},i$e=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),mC={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(let n in r)i$e(r,n)&&(e[n]=r[n])}}return e},flattenChunks:e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;let r=new Uint8Array(t);for(let n=0,i=0,o=e.length;n<o;n++){let a=e[n];r.set(a,i),i+=a.length}return r}},Tre=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Tre=!1}var G0=new Uint8Array(256);for(let e=0;e<256;e++)G0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;G0[254]=G0[254]=1;var W0={string2buf:e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,o,a=e.length,s=0;for(i=0;i<a;i++)r=e.charCodeAt(i),(64512&r)==55296&&i+1<a&&(n=e.charCodeAt(i+1),(64512&n)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)r=e.charCodeAt(i),(64512&r)==55296&&i+1<a&&(n=e.charCodeAt(i+1),(64512&n)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|63&r):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},buf2string:(e,t)=>{let r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i,o=new Array(2*r);for(i=0,n=0;n<r;){let a=e[n++];if(a<128){o[i++]=a;continue}let s=G0[a];if(s>4)o[i++]=65533,n+=s-1;else{for(a&=s===2?31:s===3?15:7;s>1&&n<r;)a=a<<6|63&e[n++],s--;s>1?o[i++]=65533:a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|1023&a)}}return((a,s)=>{if(s<65534&&a.subarray&&Tre)return String.fromCharCode.apply(null,a.length===s?a:a.subarray(0,s));let c="";for(let l=0;l<s;l++)c+=String.fromCharCode(a[l]);return c})(o,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(192&e[r])==128;)r--;return r<0||r===0?t:r+G0[e[r]]>t?r:t}},Cre=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Rre=Object.prototype.toString,{Z_NO_FLUSH:o$e,Z_SYNC_FLUSH:a$e,Z_FULL_FLUSH:s$e,Z_FINISH:c$e,Z_OK:pS,Z_STREAM_END:l$e,Z_DEFAULT_COMPRESSION:u$e,Z_DEFAULT_STRATEGY:d$e,Z_DEFLATED:h$e}=Xm;function My(e){this.options=mC.assign({level:u$e,method:h$e,chunkSize:16384,windowBits:15,memLevel:8,strategy:d$e},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Cre,this.strm.avail_out=0;let r=Ly.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==pS)throw new Error(Nh[r]);if(t.header&&Ly.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(n=typeof t.dictionary=="string"?W0.string2buf(t.dictionary):Rre.call(t.dictionary)==="[object ArrayBuffer]"?new Uint8Array(t.dictionary):t.dictionary,r=Ly.deflateSetDictionary(this.strm,n),r!==pS)throw new Error(Nh[r]);this._dict_set=!0}}function fA(e,t){let r=new My(t);if(r.push(e,!0),r.err)throw r.msg||Nh[r.err];return r.result}My.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,i,o;if(this.ended)return!1;for(o=t===~~t?t:t===!0?c$e:o$e,typeof e=="string"?r.input=W0.string2buf(e):Rre.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===a$e||o===s$e)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=Ly.deflate(r,o),i===l$e)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Ly.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===pS;if(r.avail_out!==0){if(o>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(r.avail_in===0)break}else this.onData(r.output)}return!0},My.prototype.onData=function(e){this.chunks.push(e)},My.prototype.onEnd=function(e){e===pS&&(this.result=mC.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var f$e={Deflate:My,deflate:fA,deflateRaw:function(e,t){return(t=t||{}).raw=!0,fA(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,fA(e,t)},constants:Xm},S_=16209,p$e=function(e,t){let r,n,i,o,a,s,c,l,u,d,f,p,m,g,y,v,E,b,S,A,N,D,M,H,V=e.state;r=e.next_in,M=e.input,n=r+(e.avail_in-5),i=e.next_out,H=e.output,o=i-(t-e.avail_out),a=i+(e.avail_out-257),s=V.dmax,c=V.wsize,l=V.whave,u=V.wnext,d=V.window,f=V.hold,p=V.bits,m=V.lencode,g=V.distcode,y=(1<<V.lenbits)-1,v=(1<<V.distbits)-1;e:do{p<15&&(f+=M[r++]<<p,p+=8,f+=M[r++]<<p,p+=8),E=m[f&y];t:for(;;){if(b=E>>>24,f>>>=b,p-=b,b=E>>>16&255,b===0)H[i++]=65535&E;else{if(!(16&b)){if(!(64&b)){E=m[(65535&E)+(f&(1<<b)-1)];continue t}if(32&b){V.mode=16191;break e}e.msg="invalid literal/length code",V.mode=S_;break e}S=65535&E,b&=15,b&&(p<b&&(f+=M[r++]<<p,p+=8),S+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=M[r++]<<p,p+=8,f+=M[r++]<<p,p+=8),E=g[f&v];r:for(;;){if(b=E>>>24,f>>>=b,p-=b,b=E>>>16&255,!(16&b)){if(!(64&b)){E=g[(65535&E)+(f&(1<<b)-1)];continue r}e.msg="invalid distance code",V.mode=S_;break e}if(A=65535&E,b&=15,p<b&&(f+=M[r++]<<p,p+=8,p<b&&(f+=M[r++]<<p,p+=8)),A+=f&(1<<b)-1,A>s){e.msg="invalid distance too far back",V.mode=S_;break e}if(f>>>=b,p-=b,b=i-o,A>b){if(b=A-b,b>l&&V.sane){e.msg="invalid distance too far back",V.mode=S_;break e}if(N=0,D=d,u===0){if(N+=c-b,b<S){S-=b;do H[i++]=d[N++];while(--b);N=i-A,D=H}}else if(u<b){if(N+=c+u-b,b-=u,b<S){S-=b;do H[i++]=d[N++];while(--b);if(N=0,u<S){b=u,S-=b;do H[i++]=d[N++];while(--b);N=i-A,D=H}}}else if(N+=u-b,b<S){S-=b;do H[i++]=d[N++];while(--b);N=i-A,D=H}for(;S>2;)H[i++]=D[N++],H[i++]=D[N++],H[i++]=D[N++],S-=3;S&&(H[i++]=D[N++],S>1&&(H[i++]=D[N++]))}else{N=i-A;do H[i++]=H[N++],H[i++]=H[N++],H[i++]=H[N++],S-=3;while(S>2);S&&(H[i++]=H[N++],S>1&&(H[i++]=H[N++]))}break}}break}}while(r<n&&i<a);S=p>>3,r-=S,p-=S<<3,f&=(1<<p)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<a?a-i+257:257-(i-a),V.hold=f,V.bits=p},T_=15,m$e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),g$e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),y$e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),v$e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),jy=(e,t,r,n,i,o,a,s)=>{let c=s.bits,l,u,d,f,p,m,g=0,y=0,v=0,E=0,b=0,S=0,A=0,N=0,D=0,M=0,H=null,V=new Uint16Array(16),G=new Uint16Array(16),Y,Z,$,F=null;for(g=0;g<=T_;g++)V[g]=0;for(y=0;y<n;y++)V[t[r+y]]++;for(b=c,E=T_;E>=1&&V[E]===0;E--);if(b>E&&(b=E),E===0)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(v=1;v<E&&V[v]===0;v++);for(b<v&&(b=v),N=1,g=1;g<=T_;g++)if(N<<=1,N-=V[g],N<0)return-1;if(N>0&&(e===0||E!==1))return-1;for(G[1]=0,g=1;g<T_;g++)G[g+1]=G[g]+V[g];for(y=0;y<n;y++)t[r+y]!==0&&(a[G[t[r+y]]++]=y);if(e===0?(H=F=a,m=20):e===1?(H=m$e,F=g$e,m=257):(H=y$e,F=v$e,m=0),M=0,y=0,g=v,p=o,S=b,A=0,d=-1,D=1<<b,f=D-1,e===1&&D>852||e===2&&D>592)return 1;for(;;){Y=g-A,a[y]+1<m?(Z=0,$=a[y]):a[y]>=m?(Z=F[a[y]-m],$=H[a[y]-m]):(Z=96,$=0),l=1<<g-A,u=1<<S,v=u;do u-=l,i[p+(M>>A)+u]=Y<<24|Z<<16|$|0;while(u!==0);for(l=1<<g-1;M&l;)l>>=1;if(l!==0?(M&=l-1,M+=l):M=0,y++,--V[g]==0){if(g===E)break;g=t[r+a[y]]}if(g>b&&(M&f)!==d){for(A===0&&(A=b),p+=v,S=g-A,N=1<<S;S+A<E&&(N-=V[S+A],!(N<=0));)S++,N<<=1;if(D+=1<<S,e===1&&D>852||e===2&&D>592)return 1;d=M&f,i[d]=b<<24|S<<16|p-o|0}}return M!==0&&(i[p+M]=g-A<<24|64<<16|0),s.bits=b,0},{Z_FINISH:N7,Z_BLOCK:E$e,Z_TREES:C_,Z_OK:dh,Z_STREAM_END:_$e,Z_NEED_DICT:b$e,Z_STREAM_ERROR:hs,Z_DATA_ERROR:Ire,Z_MEM_ERROR:xre,Z_BUF_ERROR:w$e,Z_DEFLATED:O7}=Xm,gC=16180,mS=16190,tl=16191,pA=16192,mA=16194,R_=16199,I_=16200,gA=16206,En=16209,k7=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function S$e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var hh=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<gC||t.mode>16211?1:0},Are=e=>{if(hh(e))return hs;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=gC,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,dh},Nre=e=>{if(hh(e))return hs;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Are(e)},Ore=(e,t)=>{let r;if(hh(e))return hs;let n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?hs:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Nre(e))},P7=(e,t)=>{if(!e)return hs;let r=new S$e;e.state=r,r.strm=e,r.window=null,r.mode=gC;let n=Ore(e,t);return n!==dh&&(e.state=null),n},yA,vA,D7=!0,T$e=e=>{if(D7){yA=new Int32Array(512),vA=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(jy(1,e.lens,0,288,yA,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;jy(2,e.lens,0,32,vA,0,e.work,{bits:5}),D7=!1}e.lencode=yA,e.lenbits=9,e.distcode=vA,e.distbits=5},kre=(e,t,r,n)=>{let i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},C$e=(e,t)=>{let r,n,i,o,a,s,c,l,u,d,f,p,m,g,y,v,E,b,S,A,N,D,M=0,H=new Uint8Array(4),V,G,Y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(hh(e)||!e.output||!e.input&&e.avail_in!==0)return hs;r=e.state,r.mode===tl&&(r.mode=pA),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,l=r.hold,u=r.bits,d=s,f=c,D=dh;e:for(;;)switch(r.mode){case gC:if(r.wrap===0){r.mode=pA;break}for(;u<16;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}if(2&r.wrap&&l===35615){r.wbits===0&&(r.wbits=15),r.check=0,H[0]=255&l,H[1]=l>>>8&255,r.check=Pi(r.check,H,2,0),l=0,u=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",r.mode=En;break}if((15&l)!==O7){e.msg="unknown compression method",r.mode=En;break}if(l>>>=4,u-=4,N=8+(15&l),r.wbits===0&&(r.wbits=N),N>15||N>r.wbits){e.msg="invalid window size",r.mode=En;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&l?16189:tl,l=0,u=0;break;case 16181:for(;u<16;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}if(r.flags=l,(255&bi(r))!==O7){e.msg="unknown compression method",r.mode=En;break}if(57344&bi(r)){e.msg="unknown header flags set",r.mode=En;break}r.head&&(r.head.text=l>>8&1),512&bi(r)&&4&r.wrap&&(H[0]=255&l,H[1]=l>>>8&255,r.check=Pi(r.check,H,2,0)),l=0,u=0,r.mode=16182;case 16182:for(;u<32;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}r.head&&(r.head.time=l),512&bi(r)&&4&r.wrap&&(H[0]=255&l,H[1]=l>>>8&255,H[2]=l>>>16&255,H[3]=l>>>24&255,r.check=Pi(r.check,H,4,0)),l=0,u=0,r.mode=16183;case 16183:for(;u<16;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&bi(r)&&4&r.wrap&&(H[0]=255&l,H[1]=l>>>8&255,r.check=Pi(r.check,H,2,0)),l=0,u=0,r.mode=16184;case 16184:if(1024&bi(r)){for(;u<16;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),512&bi(r)&&4&r.wrap&&(H[0]=255&l,H[1]=l>>>8&255,r.check=Pi(r.check,H,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&bi(r)&&(p=r.length,p>s&&(p=s),p&&(r.head&&(N=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+p),N)),512&bi(r)&&4&r.wrap&&(r.check=Pi(r.check,n,p,o)),s-=p,o+=p,r.length-=p),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&bi(r)){if(s===0)break e;p=0;do N=n[o+p++],r.head&&N&&r.length<65536&&(r.head.name+=String.fromCharCode(N));while(N&&p<s);if(512&bi(r)&&4&r.wrap&&(r.check=Pi(r.check,n,p,o)),s-=p,o+=p,N)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&bi(r)){if(s===0)break e;p=0;do N=n[o+p++],r.head&&N&&r.length<65536&&(r.head.comment+=String.fromCharCode(N));while(N&&p<s);if(512&bi(r)&&4&r.wrap&&(r.check=Pi(r.check,n,p,o)),s-=p,o+=p,N)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&bi(r)){for(;u<16;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}if(4&r.wrap&&l!==(65535&r.check)){e.msg="header crc mismatch",r.mode=En;break}l=0,u=0}r.head&&(r.head.hcrc=bi(r)>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=tl;break;case 16189:for(;u<32;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}e.adler=r.check=k7(l),l=0,u=0,r.mode=mS;case mS:if(r.havedict===0)return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,r.hold=l,r.bits=u,b$e;e.adler=r.check=1,r.mode=tl;case tl:if(t===E$e||t===C_)break e;case pA:if(r.last){l>>>=7&u,u-=7&u,r.mode=gA;break}for(;u<3;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}switch(r.last=1&l,l>>>=1,u-=1,3&l){case 0:r.mode=16193;break;case 1:if(T$e(r),r.mode=R_,t===C_){l>>>=2,u-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=En}l>>>=2,u-=2;break;case 16193:for(l>>>=7&u,u-=7&u;u<32;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=En;break}if(r.length=65535&l,l=0,u=0,r.mode=mA,t===C_)break e;case mA:r.mode=16195;case 16195:if(p=r.length,p){if(p>s&&(p=s),p>c&&(p=c),p===0)break e;i.set(n.subarray(o,o+p),a),s-=p,o+=p,c-=p,a+=p,r.length-=p;break}r.mode=tl;break;case 16196:for(;u<14;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}if(r.nlen=257+(31&l),l>>>=5,u-=5,r.ndist=1+(31&l),l>>>=5,u-=5,r.ncode=4+(15&l),l>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=En;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;u<3;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}r.lens[Y[r.have++]]=7&l,l>>>=3,u-=3}for(;r.have<19;)r.lens[Y[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,V={bits:r.lenbits},D=jy(0,r.lens,0,19,r.lencode,0,r.work,V),r.lenbits=V.bits,D){e.msg="invalid code lengths set",r.mode=En;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;M=r.lencode[l&(1<<r.lenbits)-1],y=M>>>24,v=M>>>16&255,E=65535&M,!(y<=u);){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}if(E<16)l>>>=y,u-=y,r.lens[r.have++]=E;else{if(E===16){for(G=y+2;u<G;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}if(l>>>=y,u-=y,r.have===0){e.msg="invalid bit length repeat",r.mode=En;break}N=r.lens[r.have-1],p=3+(3&l),l>>>=2,u-=2}else if(E===17){for(G=y+3;u<G;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}l>>>=y,u-=y,N=0,p=3+(7&l),l>>>=3,u-=3}else{for(G=y+7;u<G;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}l>>>=y,u-=y,N=0,p=11+(127&l),l>>>=7,u-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=En;break}for(;p--;)r.lens[r.have++]=N}}if(r.mode===En)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=En;break}if(r.lenbits=9,V={bits:r.lenbits},D=jy(1,r.lens,0,r.nlen,r.lencode,0,r.work,V),r.lenbits=V.bits,D){e.msg="invalid literal/lengths set",r.mode=En;break}if(r.distbits=6,r.distcode=r.distdyn,V={bits:r.distbits},D=jy(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,V),r.distbits=V.bits,D){e.msg="invalid distances set",r.mode=En;break}if(r.mode=R_,t===C_)break e;case R_:r.mode=I_;case I_:if(s>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,r.hold=l,r.bits=u,p$e(e,f),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,l=r.hold,u=r.bits,r.mode===tl&&(r.back=-1);break}for(r.back=0;M=r.lencode[l&(1<<r.lenbits)-1],y=M>>>24,v=M>>>16&255,E=65535&M,!(y<=u);){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}if(v&&!(240&v)){for(b=y,S=v,A=E;M=r.lencode[A+((l&(1<<b+S)-1)>>b)],y=M>>>24,v=M>>>16&255,E=65535&M,!(b+y<=u);){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}l>>>=b,u-=b,r.back+=b}if(l>>>=y,u-=y,r.back+=y,r.length=E,v===0){r.mode=16205;break}if(32&v){r.back=-1,r.mode=tl;break}if(64&v){e.msg="invalid literal/length code",r.mode=En;break}r.extra=15&v,r.mode=16201;case 16201:if(r.extra){for(G=r.extra;u<G;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;M=r.distcode[l&(1<<r.distbits)-1],y=M>>>24,v=M>>>16&255,E=65535&M,!(y<=u);){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}if(!(240&v)){for(b=y,S=v,A=E;M=r.distcode[A+((l&(1<<b+S)-1)>>b)],y=M>>>24,v=M>>>16&255,E=65535&M,!(b+y<=u);){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}l>>>=b,u-=b,r.back+=b}if(l>>>=y,u-=y,r.back+=y,64&v){e.msg="invalid distance code",r.mode=En;break}r.offset=E,r.extra=15&v,r.mode=16203;case 16203:if(r.extra){for(G=r.extra;u<G;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=En;break}r.mode=16204;case 16204:if(c===0)break e;if(p=f-c,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=En;break}p>r.wnext?(p-=r.wnext,m=r.wsize-p):m=r.wnext-p,p>r.length&&(p=r.length),g=r.window}else g=i,m=a-r.offset,p=r.length;p>c&&(p=c),c-=p,r.length-=p;do i[a++]=g[m++];while(--p);r.length===0&&(r.mode=I_);break;case 16205:if(c===0)break e;i[a++]=r.length,c--,r.mode=I_;break;case gA:if(r.wrap){for(;u<32;){if(s===0)break e;s--,l|=n[o++]<<u,u+=8}if(f-=c,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=bi(r)?Pi(r.check,i,f,a-f):H0(r.check,i,f,a-f)),f=c,4&r.wrap&&(bi(r)?l:k7(l))!==r.check){e.msg="incorrect data check",r.mode=En;break}l=0,u=0}r.mode=16207;case 16207:if(r.wrap&&bi(r)){for(;u<32;){if(s===0)break e;s--,l+=n[o++]<<u,u+=8}if(4&r.wrap&&l!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=En;break}l=0,u=0}r.mode=16208;case 16208:D=_$e;break e;case En:D=Ire;break e;case 16210:return xre;default:return hs}return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,r.hold=l,r.bits=u,(r.wsize||f!==e.avail_out&&r.mode<En&&(r.mode<gA||t!==N7))&&kre(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=bi(r)?Pi(r.check,i,f,e.next_out-f):H0(r.check,i,f,e.next_out-f)),e.data_type=r.bits+(r.last?64:0)+(r.mode===tl?128:0)+(r.mode===R_||r.mode===mA?256:0),(d===0&&f===0||t===N7)&&D===dh&&(D=w$e),D},dl={inflateReset:Nre,inflateReset2:Ore,inflateResetKeep:Are,inflateInit:e=>P7(e,15),inflateInit2:P7,inflate:C$e,inflateEnd:e=>{if(hh(e))return hs;let t=e.state;return t.window&&(t.window=null),e.state=null,dh},inflateGetHeader:(e,t)=>{if(hh(e))return hs;let r=e.state;return 2&r.wrap?(r.head=t,t.done=!1,dh):hs},inflateSetDictionary:(e,t)=>{let r=t.length,n,i,o;return hh(e)?hs:(n=e.state,n.wrap!==0&&n.mode!==mS?hs:n.mode===mS&&(i=1,i=H0(i,t,r,0),i!==n.check)?Ire:(o=kre(e,t,r,r),o?(n.mode=16210,xre):(n.havedict=1,dh)))},inflateInfo:"pako inflate (from Nodeca project)"},R$e=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Pre=Object.prototype.toString,{Z_NO_FLUSH:I$e,Z_FINISH:x$e,Z_OK:Uy,Z_STREAM_END:EA,Z_NEED_DICT:_A,Z_STREAM_ERROR:A$e,Z_DATA_ERROR:L7,Z_MEM_ERROR:N$e}=Xm;function Fy(e){this.options=mC.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Cre,this.strm.avail_out=0;let r=dl.inflateInit2(this.strm,t.windowBits);if(r!==Uy)throw new Error(Nh[r]);if(this.header=new R$e,dl.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=W0.string2buf(t.dictionary):Pre.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=dl.inflateSetDictionary(this.strm,t.dictionary),r!==Uy)))throw new Error(Nh[r])}function bA(e,t){let r=new Fy(t);if(r.push(e),r.err)throw r.msg||Nh[r.err];return r.result}Fy.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,o,a,s;if(this.ended)return!1;for(a=t===~~t?t:t===!0?x$e:I$e,Pre.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=dl.inflate(r,a),o===_A&&i&&(o=dl.inflateSetDictionary(r,i),o===Uy?o=dl.inflate(r,a):o===L7&&(o=_A));r.avail_in>0&&o===EA&&r.state.wrap>0&&e[r.next_in]!==0;)dl.inflateReset(r),o=dl.inflate(r,a);switch(o){case A$e:case L7:case _A:case N$e:return this.onEnd(o),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(r.avail_out===0||o===EA))if(this.options.to==="string"){let c=W0.utf8border(r.output,r.next_out),l=r.next_out-c,u=W0.buf2string(r.output,c);r.next_out=l,r.avail_out=n-l,l&&r.output.set(r.output.subarray(c,c+l),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(o!==Uy||s!==0){if(o===EA)return o=dl.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0},Fy.prototype.onData=function(e){this.chunks.push(e)},Fy.prototype.onEnd=function(e){e===Uy&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=mC.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var O$e={Inflate:Fy,inflate:bA,inflateRaw:function(e,t){return(t=t||{}).raw=!0,bA(e,t)},ungzip:bA,constants:Xm},{Deflate:J7e,deflate:k$e,deflateRaw:Q7e,gzip:Z7e}=f$e,{Inflate:eze,inflate:P$e,inflateRaw:tze,ungzip:rze}=O$e,D$e=k$e,L$e=P$e,Dre=function(e){return e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE",e}(Dre||{}),M$e=class{constructor(){I(this,"_sequence",0),I(this,"_startTime",Date.now()),I(this,"isUseOneByte",!0)}get startTime(){let e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){let t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){let a=new Uint8Array(4);a.set([1,0,0,0]);let s={id:0,length:4,data:a.buffer},c={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[s]};t.commonPacketHeader.extension=1,t.extension=c,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;L("SHOW_DATASTREAM2_LOG")&&w.debug("send data header: ".concat(JSON.stringify(t.commonPacketHeader)));let r=new ArrayBuffer(t.commonPacketHeader.length),n=new Uint8Array(r),i=new DataView(r),o=0;if(i.setUint16(o,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),o+=2,i.setUint32(o,t.commonPacketHeader.sequence,!0),o+=4,i.setUint16(o,t.commonStreamHeader,!0),o+=2,t.extension){let a=this.serializeExtension(t.extension);n.set(new Uint8Array(a),o),o+=a.byteLength}if(n.set(new Uint8Array(t.payload),o),o+=t.payload.byteLength,o!==t.commonPacketHeader.length)throw Error("serialize error!");return r}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);let t=new DataView(e),r=0,n=t.getUint16(r,!0);r+=2;let i={length:16383&n,reserved:(16384&n)>>14,extension:(32768&n)>>15,sequence:t.getUint16(r+2,!0)<<16|t.getUint16(r,!0)},o,a;if(r+=4,L("SHOW_DATASTREAM2_LOG")&&w.debug("receive data header: ".concat(JSON.stringify(i))),t.getUint16(r,!0),r+=2,i.extension){a=this.deserializeExtension(e.slice(r)),r+=2+a.length,o=e.slice(r);let s=!1;if(a.datas.length>0){let c=a.datas.find(l=>l.id===0);c&&(s=(1&new DataView(c.data).getUint32(0,!0))==1)}o=s?this.decompress(o):o}else o=e.slice(8);return o}serializeExtension(e){let{profile:t,length:r,datas:n}=e,i=new ArrayBuffer(r+2),o=new Uint8Array(i),a=new DataView(i),s=0;if(a.setUint8(s++,t),a.setUint8(s++,r),n.forEach(c=>{t?(a.setUint8(s++,c.id),a.setUint8(s++,c.length),o.set(new Uint8Array(c.data),s),s+=c.data.byteLength):(a.setUint8(s++,c.id|c.length<<4),o.set(new Uint8Array(c.data),s),s+=c.data.byteLength)}),s!==r+2)throw Error("serialize extension error, is ".concat(s,"!==").concat(r+2));return i}deserializeExtension(e){let t=new DataView(e),r=0,n=t.getUint8(r);r++;let i=t.getUint8(r);r++;let o=n===Dre.TWO_BYTE,a=[],s=new DataView(e,2),c=0;for(;c<i;){let l=0,u=0,d=new ArrayBuffer(0);o?(l=s.getUint8(c),c++,u=s.getUint8(c),c++):(l=15&s.getUint8(c),u=s.getUint8(c)>>4,c++),u>0&&(d=s.buffer.slice(c+2,c+2+u),c+=d.byteLength),a.push({id:l,length:u,data:d})}if(c!==i)throw Error("parse error");return{profile:n,length:i,datas:a}}decompress(e){return L$e(new Uint8Array(e))}compress(e){return D$e(new Uint8Array(e))}},j$e={name:"DataStream",create:(e,t)=>{let r=t?new w6e(e):new S6e(e);return r.useDataStream(new M$e),r}},U$e=class extends _r{constructor(e,t,r){super(),I(this,"ws",void 0),I(this,"requestId",1),I(this,"heartBeatTimer",void 0),I(this,"joinInfo",void 0),I(this,"clientId",void 0),I(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),I(this,"onClose",n=>{this.emit("close"),this.dispose()}),I(this,"onMessage",n=>{let i=JSON.parse(n.data);if(!i||i.command!=="serverResponse"||!i.requestId)return i&&i.command==="serverStatus"&&i.serverStatus&&i.serverStatus.command?(this.emit("status",i.serverStatus),void this.emit(i.serverStatus.command,i.serverStatus)):void 0;this.emit("req_".concat(i.requestId),i)}),this.joinInfo=e,this.clientId=t,this.ws=new P0("cross-channel-".concat(this.clientId),r),this.ws.on(We.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(We.CONNECTED,this.onOpen),this.ws.on(We.ON_MESSAGE,this.onMessage),this.ws.on(We.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(e){let t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new he((t,r)=>{let n=window.setTimeout(()=>{r(new q(O.TIMEOUT,"wait status timeout, status: ".concat(e)))},5e3);this.once(e,i=>{window.clearTimeout(n),i.state&&i.state!==0?r(new q(O.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)}),this.once("dispose",()=>{window.clearTimeout(n),r(new q(O.WS_ABORT))})})}async request(e){if(this.ws.state==="closed")throw new q(O.WS_DISCONNECT);let t=()=>new he((o,a)=>{this.ws.once(We.CLOSED,()=>a(new q(O.WS_ABORT))),this.ws.once(We.CONNECTED,o)});this.ws.state!=="connected"&&await t();let r=this.sendMessage(e),n=new he((o,a)=>{let s=()=>{a(new q(O.WS_ABORT))};this.ws.once(We.RECONNECTING,s),this.ws.once(We.CLOSED,s),this.once("req_".concat(r),o),Ln(3e3).then(()=>{this.removeAllListeners("req_".concat(r)),this.ws.off(We.RECONNECTING,s),this.ws.off(We.CLOSED,s),a(new q(O.TIMEOUT,"cross channel ws request timeout"))})}),i=await n;if(!i||i.code!==200)throw new q(O.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(i)));return i}async connect(e){this.ws.removeAllListeners(We.REQUEST_NEW_URLS),this.ws.on(We.REQUEST_NEW_URLS,t=>{t(e)}),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){let t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}},F$e=class extends _r{set state(e){e!==this._state&&(e!==ao.RELAY_STATE_FAILURE&&(this.errorCode=Mf.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,r,n,i){super(),I(this,"joinInfo",void 0),I(this,"sid",void 0),I(this,"clientId",void 0),I(this,"cancelToken",Zi.CancelToken.source()),I(this,"workerToken",void 0),I(this,"requestId",0),I(this,"signal",void 0),I(this,"prevChannelMediaConfig",void 0),I(this,"httpRetryConfig",void 0),I(this,"_resolution",void 0),I(this,"_state",ao.RELAY_STATE_IDLE),I(this,"errorCode",Mf.RELAY_OK),I(this,"onStatus",o=>{w.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(o))),o&&o.command&&(o.command==="onAudioPacketReceived"&&this.emit("event",rl.PACKET_RECEIVED_AUDIO_FROM_SRC),o.command==="onVideoPacketReceived"&&this.emit("event",rl.PACKET_RECEIVED_VIDEO_FROM_SRC),o.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=Mf.SRC_TOKEN_EXPIRED,this.state=ao.RELAY_STATE_FAILURE),o.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=Mf.DEST_TOKEN_EXPIRED,this.state=ao.RELAY_STATE_FAILURE))}),I(this,"onReconnect",async()=>{w.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",rl.NETWORK_DISCONNECTED),this.state=ao.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(o=>{this.state!==ao.RELAY_STATE_IDLE&&(w.error("auto restart channel media relay failed",o.toString()),this.errorCode=Mf.SERVER_CONNECTION_LOST,this.state=ao.RELAY_STATE_FAILURE)})}),this.joinInfo=e,this.clientId=t,this.sid=up(),this.signal=new U$e(this.joinInfo,this.clientId,r),this.httpRetryConfig=n,this._resolution=i}async startChannelMediaRelay(e){if(this.state!==ao.RELAY_STATE_IDLE)throw new q(O.INVALID_OPERATION);this.state=ao.RELAY_STATE_CONNECTING,await this.connect(),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(t){throw t.data&&t.data.serverResponse&&t.data.serverResponse.command==="SetSourceChannel"?new q(O.CROSS_CHANNEL_FAILED_JOIN_SRC):t.data&&t.data.serverResponse&&t.serverResponse.command==="SetDestChannelStatus"?new q(O.CROSS_CHANNEL_FAILED_JOIN_DEST):t.data&&t.data.serverResponse&&t.serverResponse.command==="StartPacketTransfer"?new q(O.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):t}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==ao.RELAY_STATE_RUNNING)throw new q(O.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==ao.RELAY_STATE_RUNNING)throw new q(O.INVALID_OPERATION);let t=this.genMessage(Oi.SetVideoProfile);await this.signal.request(t),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),w.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=ao.RELAY_STATE_IDLE,this.dispose()}dispose(){w.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Zi.CancelToken.source(),this.state=ao.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){let e=await D6e(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",rl.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){let t=this.genMessage(Oi.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));let r=this.genMessage(Oi.SetSdkProfile,e);await this.signal.request(r),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));let n=this.genMessage(Oi.SetSourceChannel,e);await this.signal.request(n),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",rl.PACKET_JOINED_SRC_CHANNEL),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));let i=this.genMessage(Oi.SetSourceUserId,e);await this.signal.request(i),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));let o=this.genMessage(Oi.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",rl.PACKET_JOINED_DEST_CHANNEL),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));let a=this.genMessage(Oi.StartPacketTransfer,e);await this.signal.request(a),this.emit("event",rl.PACKET_SENT_TO_DEST_CHANNEL),this.state=ao.RELAY_STATE_RUNNING,w.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){let t=this.genMessage(Oi.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",rl.PACKET_UPDATE_DEST_CHANNEL),w.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){let e=this.genMessage(Oi.StopPacketTransfer);await this.signal.request(e),w.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){let r=[],n=[],i=[];this.requestId+=1;let o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:Ra,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};o.sdkVersion==="4.22.0"&&(o.sdkVersion="0.0.1");let a=null,s=null;switch(e){case Oi.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case Oi.SetSourceChannel:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new q(O.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceChannel",uid:"0",channelName:s.channelName,token:s.token||this.joinInfo.appId},o;case Oi.SetSourceUserId:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new q(O.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceUserId",uid:s.uid+""},o;case Oi.SetDestChannel:if(a=t&&t.getDestChannelMediaInfo(),!a)throw new q(O.UNEXPECTED_ERROR,"can not find dest config");return a.forEach(c=>{r.push(c.channelName),n.push(c.uid+""),i.push(c.token||this.joinInfo.appId)}),o.clientRequest={command:"SetDestChannel",channelName:r,uid:n,token:i},o;case Oi.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case Oi.Reconnect:return o.clientRequest={command:"Reconnect"},o;case Oi.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case Oi.UpdateDestChannel:if(a=t&&t.getDestChannelMediaInfo(),!a)throw new q(O.UNEXPECTED_ERROR,"can not find dest config");return a.forEach(c=>{r.push(c.channelName),n.push(c.uid+""),i.push(c.token||this.joinInfo.appId)}),o.clientRequest={command:"UpdateDestChannel",channelName:r,uid:n,token:i},o;case Oi.SetVideoProfile:o.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return o}},V$e={name:"ChannelMediaRelay",create:function(e){return new F$e(e.joinInfo,e.clientId,e.websocketRetryConfig||Kr,e.httpRetryConfig||Kr,e.resolution)}};function M7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ug(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M7(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var B$e=class extends _r{constructor(e,t,r,n){super(),I(this,"spec",void 0),I(this,"token",void 0),I(this,"websocket",void 0),I(this,"pingpongTimer",void 0),I(this,"reconnectMode","retry"),I(this,"serviceMode",void 0),I(this,"reqId",0),I(this,"commandReqId",0),I(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),I(this,"handleWebSocketMessage",i=>{if(!i.data)return;let o=JSON.parse(i.data);o.requestId?this.emit("@".concat(o.requestId,"-").concat(o.sid),o):(Se.workerEvent(this.spec.sid,{actionType:"status",serverCode:o.code,workerType:this.serviceMode===yl.TRANSCODE?1:2}),this.emit(fu.PUBLISH_STREAM_STATUS,o))}),this.spec=t,this.token=e,this.serviceMode=n,this.websocket=new P0("live-streaming",r),this.websocket.on(We.CONNECTED,this.handleWebSocketOpen),this.websocket.on(We.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(We.REQUEST_NEW_URLS,(i,o)=>{Kn(this,fu.REQUEST_NEW_ADDRESS).then(i).catch(o)}),this.websocket.on(We.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(e){return this.websocket.init(e)}async request(e,t,r,n){this.reqId+=1,e==="request"&&(this.commandReqId+=1);let i=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new q(O.UNEXPECTED_ERROR);let a=Ug({command:e,sdkVersion:Ra==="4.22.0"?"0.0.1":Ra,seq:o,requestId:o,allocate:r,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if(this.websocket.state==="closed")throw new q(O.WS_DISCONNECT);let s=()=>new he((d,f)=>{this.websocket.once(We.CLOSED,()=>f(new q(O.WS_ABORT))),this.websocket.once(We.CONNECTED,d)});this.websocket.state!=="connected"&&await s(),a.clientRequest&&(a.clientRequest.workerToken=this.token);let c=new he((d,f)=>{let p=()=>{f(new q(O.WS_ABORT))};this.websocket.once(We.RECONNECTING,p),this.websocket.once(We.CLOSED,p),this.once("@".concat(o,"-").concat(this.spec.sid),m=>{d(m)})});n&&Se.workerEvent(this.spec.sid,Ug(Ug({},n),{},{requestId:i,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));let l=Date.now();this.websocket.sendMessage(a);let u=null;try{u=await c}catch(d){if(this.websocket.state==="closed")throw d;return await s(),await this.request(e,t,r)}return n&&Se.workerEvent(this.spec.sid,Ug(Ug({},n),{},{requestId:i,actionType:"response",payload:JSON.stringify(u.serverResponse),serverCode:u.code,success:u.code===200,responseTime:Date.now()-l})),u.code!==200&&this.handleResponseError(u),u}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){let e=Ra==="4.22.0"?"0.0.1":Ra;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case Jr.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void w.warning("live stream response already exists stream");case Jr.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case Jr.LIVE_STREAM_RESPONSE_BAD_STREAM:case Jr.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new q(O.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case Jr.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(e.serverResponse.command==="UnpublishStream")return;throw new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Jr.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new q(O.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case Jr.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{let t=new q(O.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(fu.WARNING,t,e.serverResponse.url)}case Jr.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{let t=new q(O.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(fu.WARNING,t,e.serverResponse.url)}case Jr.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Jr.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new q(O.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case Jr.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{let t=new q(O.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(fu.WARNING,t,e.serverResponse.url)}case Jr.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case Jr.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case Jr.LIVE_STREAM_RESPONSE_WORKER_LOST:case Jr.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(e.serverResponse.command==="UnpublishStream")return;throw new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Jr.ERROR_FAIL_SEND_MESSAGE:if(e.serverResponse.command==="UnpublishStream")return;if(e.serverResponse.command==="UpdateTranscoding"||e.serverResponse.command==="ControlStream")return new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Jr.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Jr.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Jr.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Jr.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new q(O.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(cC)},6e3)}};function j7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j7(Object(r),!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var $$e=class extends _r{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kr,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Kr;super(),I(this,"onLiveStreamWarning",void 0),I(this,"onLiveStreamError",void 0),I(this,"spec",void 0),I(this,"retryTimeout",1e4),I(this,"connection",void 0),I(this,"httpRetryConfig",void 0),I(this,"wsRetryConfig",void 0),I(this,"streamingTasks",new Map),I(this,"isStartingStreamingTask",!1),I(this,"taskMutex",new ii("live-streaming")),I(this,"cancelToken",Zi.CancelToken.source()),I(this,"transcodingConfig",void 0),I(this,"uapResponse",void 0),I(this,"lastTaskId",1),I(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=r,this.wsRetryConfig=t}async setTranscodingConfig(e){let t=oo(oo({},VVe),e);t.videoCodecProfile!==66&&t.videoCodecProfile!==77&&t.videoCodecProfile!==100&&(w.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map(o=>oo(oo(oo({},FVe),o),{},{zOrder:o.zOrder?o.zOrder+1:1}))),function(o){gr(o.width)||Wt(o.width,"config.width",0,1e4),gr(o.height)||Wt(o.height,"config.height",0,1e4),gr(o.videoBitrate)||Wt(o.videoBitrate,"config.videoBitrate",1,1e6),gr(o.videoFrameRate)||Wt(o.videoFrameRate,"config.videoFrameRate"),gr(o.lowLatency)||fl(o.lowLatency,"config.lowLatency"),gr(o.audioSampleRate)||on(o.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),gr(o.audioBitrate)||Wt(o.audioBitrate,"config.audioBitrate",1,128),gr(o.audioChannels)||on(o.audioChannels,"config.audioChannels",[1,2,3,4,5]),gr(o.videoGop)||Wt(o.videoGop,"config.videoGop"),gr(o.videoCodecProfile)||on(o.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),gr(o.userCount)||Wt(o.userCount,"config.userCount",0,17),gr(o.backgroundColor)||Wt(o.backgroundColor,"config.backgroundColor",0,16777215),gr(o.userConfigExtraInfo)||Nn(o.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),o.transcodingUsers&&!gr(o.transcodingUsers)&&(sl(o.transcodingUsers,"config.transcodingUsers"),o.transcodingUsers.forEach((a,s)=>{dC(a.uid),gr(a.x)||Wt(a.x,"transcodingUser[".concat(s,"].x"),0,1e4),gr(a.y)||Wt(a.y,"transcodingUser[".concat(s,"].y"),0,1e4),gr(a.width)||Wt(a.width,"transcodingUser[".concat(s,"].width"),0,1e4),gr(a.height)||Wt(a.height,"transcodingUser[".concat(s,"].height"),0,1e4),gr(a.zOrder)||Wt(a.zOrder-1,"transcodingUser[".concat(s,"].zOrder"),0,100),gr(a.alpha)||Wt(a.alpha,"transcodingUser[".concat(s,"].alpha"),0,1,!1)})),gr(o.watermark)||_x(o.watermark,"watermark"),gr(o.backgroundImage)||_x(o.backgroundImage,"backgroundImage"),o.images&&!gr(o.images)&&(sl(o.images,"config.images"),o.images.forEach((a,s)=>{_x(a,"images[".concat(s,"]"))}))}(t);let r=[];t.images&&r.push(...t.images.map(o=>oo(oo(oo({},Ex),o),{},{zOrder:255}))),t.backgroundImage&&(r.push(oo(oo(oo({},Ex),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(r.push(oo(oo(oo({},Ex),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=r,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map(o=>oo({},o)),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);let n=(t.userConfigs||[]).map(o=>typeof o.uid=="number"?he.resolve(o.uid):Vte(o.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await he.all(n)).forEach((o,a)=>{t.userConfigs&&t.userConfigs[a]&&(t.userConfigs[a].uid=o)}),this.transcodingConfig=t,this.connection)try{var i;let o=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Sl(i=this.streamingTasks).call(i)).map(a=>a.taskId).join("#")});w.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(o.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(o){if(!o.data||!o.data.retry)throw o;o.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(a=>{w.warning("[".concat(this.spec.clientId,"] live streaming receive error"),o.toString(),"try to republish",a.url),this.startLiveStreamingTask(a.url,a.mode,o).then(()=>{w.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(a.url," success"))}).catch(s=>{w.error("[".concat(this.spec.clientId,"] live streaming republish failed"),a.url,s.toString()),this.onLiveStreamError&&this.onLiveStreamError(a.url,s)})})}}async startLiveStreamingTask(e,t,r){if(!this.transcodingConfig&&t===yl.TRANSCODE)throw new q(O.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let n={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};w.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));let i=await this.taskMutex.lock();if(!this.connection&&r)return void i();if(this.streamingTasks.get(e)&&!r)return i(),new q(O.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(a){throw i(),a}switch(t){case yl.TRANSCODE:n.transcodingConfig=oo({},this.transcodingConfig)}this.uapResponse&&this.uapResponse.vid&&(n.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;let o=this.lastTaskId++;try{let a=new he((c,l)=>{Ln(this.retryTimeout).then(()=>{if(r)return l(r);let u=this.statusError.get(e);return u?(this.statusError.delete(e),l(u)):void 0})}),s=await he.race([this.connection.request("request",{clientRequest:n},!0,{url:e,command:"PublishStream",workerType:t===yl.TRANSCODE?1:2,requestByUser:!r,tid:o.toString()}),a]);this.isStartingStreamingTask=!1,w.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(s.code)),this.streamingTasks.set(e,{clientRequest:n,mode:t,url:e,taskId:o}),i()}catch(a){if(i(),this.isStartingStreamingTask=!1,!a.data||!a.data.retry||r)throw a;return a.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,a)):await this.startLiveStreamingTask(e,t,a)}}stopLiveStreamingTask(e){return new he((t,r)=>{let n=this.streamingTasks.get(e);if(!n||!this.connection)return new q(O.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();let i=n.mode;n.abortTask=()=>{w.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:"UnpublishStream",url:n.url}},!1,{url:e,command:"UnPublishStream",workerType:i===yl.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(o=>{w.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(o.code)),this.streamingTasks.delete(e),this.streamingTasks.size===0&&(this.connection&&this.connection.close(),this.connection=void 0),t()}).catch(r)})}resetAllTask(){var e;let t=Array.from(Sl(e=this.streamingTasks).call(e));this.terminate();for(let r of t)this.startLiveStreamingTask(r.url,r.mode).catch(n=>{this.onLiveStreamError&&this.onLiveStreamError(r.url,n)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Zi.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new q(O.UNEXPECTED_ERROR,"live streaming connection has already connected");let t=await Kn(this,uk.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new B$e(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(fu.WARNING,(r,n)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(n,r)),this.connection.on(fu.PUBLISH_STREAM_STATUS,r=>this.handlePublishStreamServer(r)),this.connection.on(fu.REQUEST_NEW_ADDRESS,(r,n)=>{if(!this.connection)return n(new q(O.UNEXPECTED_ERROR,"can not get new live streaming address list"));Kn(this,uk.REQUEST_WORKER_MANAGER_LIST,e).then(i=>{this.uapResponse=i,r(i.addressList)}).catch(n)}),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){let t=e.serverStatus&&e.serverStatus.url||"empty_url",r=this.streamingTasks.get(t),n=e.reason;switch(e.code){case Jr.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Jr.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Jr.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Jr.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{let o=new q(O.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(r)return w.error(o.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,o);if(!this.isStartingStreamingTask)return;this.statusError.set(t,o)}case Jr.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{let o=new q(O.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,n);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,o)}case Jr.LIVE_STREAM_RESPONSE_WORKER_LOST:case Jr.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var i;if(!this.connection)return;this.connection.tryNextAddress();let o=Array.from(Sl(i=this.streamingTasks).call(i));for(let a of o)a.abortTask?a.abortTask():(w.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",a.url),this.startLiveStreamingTask(a.url,a.mode,new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then(()=>{w.debug("[".concat(this.spec.clientId,"] republish live stream success"),a.url)}).catch(s=>{w.error(s.toString()),this.onLiveStreamError&&this.onLiveStreamError(a.url,s)}));return}}}hasUrl(e){return this.streamingTasks.has(e)}},H$e={name:"LiveStreaming",create:function(e){return new $$e(e.joinInfo,e.websocketRetryConfig||Kr,e.httpRetryConfig||Kr)}};function z$e(e){let t=U7();return function(r,n){let i=r.appId;i!==void 0&&(Vt(n,10),vc(n,i));let o=r.cid;o!==void 0&&(Vt(n,16),Vt(n,o));let a=r.cname;a!==void 0&&(Vt(n,26),vc(n,a));let s=r.deviceId;s!==void 0&&(Vt(n,34),vc(n,s));let c=r.elapse;c!==void 0&&(Vt(n,40),ru(n,c));let l=r.fileSize;l!==void 0&&(Vt(n,48),ru(n,Pf(l)));let u=r.height;u!==void 0&&(Vt(n,56),ru(n,Pf(u)));let d=r.jpg;d!==void 0&&(Vt(n,66),Vt(n,d.length),function(K,k){let P=Jm(K,k.length);K.bytes.set(k,P)}(n,d));let f=r.networkType;f!==void 0&&(Vt(n,72),ru(n,Pf(f)));let p=r.osType;p!==void 0&&(Vt(n,80),ru(n,Pf(p)));let m=r.requestId;m!==void 0&&(Vt(n,90),vc(n,m));let g=r.sdkVersion;g!==void 0&&(Vt(n,98),vc(n,g));let y=r.sequence;y!==void 0&&(Vt(n,104),ru(n,Pf(y)));let v=r.sid;v!==void 0&&(Vt(n,114),vc(n,v));let E=r.timestamp;E!==void 0&&(Vt(n,120),ru(n,E));let b=r.uid;b!==void 0&&(Vt(n,128),Vt(n,b));let S=r.vid;S!==void 0&&(Vt(n,136),Vt(n,S));let A=r.width;A!==void 0&&(Vt(n,144),ru(n,Pf(A)));let N=r.service;N!==void 0&&(Vt(n,152),Vt(n,N));let D=r.callbackData;D!==void 0&&(Vt(n,162),vc(n,D));let M=r.jpgEncryption;M!==void 0&&(Vt(n,168),Vt(n,M));let H=r.requestType;H!==void 0&&(Vt(n,176),Vt(n,H));let V=r.scorePorn;V!==void 0&&(Vt(n,185),TA(n,V));let G=r.scoreSexy;G!==void 0&&(Vt(n,193),TA(n,G));let Y=r.scoreNeutral;Y!==void 0&&(Vt(n,201),TA(n,Y));let Z=r.scene;Z!==void 0&&(Vt(n,208),Vt(n,Z));let $=r.ossFilePrefix;$!==void 0&&(Vt(n,218),vc(n,$));let F=r.serviceVendor;if(F!==void 0)for(let K of F){Vt(n,226);let k=U7();K$e(K,k),Vt(n,k.limit),J$e(n,k),X$e(k)}}(e,t),function(r){let n=r.bytes,i=r.limit;return n.length===i?n:n.subarray(0,i)}(t)}function G$e(e){return function(r){let n={};e:for(;!jre(r);){let i=Cc(r);switch(i>>>3){case 0:break e;case 1:n.code=Cc(r);break;case 2:n.msg=Ure(r,Cc(r));break;case 3:{let o=q$e(r);n.data=W$e(r),r.limit=o;break}default:Lre(r,7&i)}}return n}({bytes:t=e,offset:0,limit:t.length});var t}function W$e(e){let t={};e:for(;!jre(e);){let r=Cc(e);switch(r>>>3){case 0:break e;case 1:t.requestId=Ure(e,Cc(e));break;case 2:t.requestType=Cc(e)>>>0;break;case 3:t.scorePorn=SA(e);break;case 4:t.scoreSexy=SA(e);break;case 5:t.scoreNeutral=SA(e);break;case 6:t.requestScene=Cc(e)>>>0;break;case 7:t.scene=Cc(e)>>>0;break;default:Lre(e,7&r)}}return t}function K$e(e,t){let r=e.service;r!==void 0&&(Vt(t,8),Vt(t,r));let n=e.vendor;n!==void 0&&(Vt(t,16),Vt(t,n));let i=e.token;i!==void 0&&(Vt(t,26),vc(t,i));let o=e.callbackUrl;o!==void 0&&(Vt(t,34),vc(t,o))}function q$e(e){let t=Cc(e),r=e.limit;return e.limit=e.offset+t,r}function Lre(e,t){switch(t){case 0:for(;128&Fre(e););break;case 2:wA(e,Cc(e));break;case 5:wA(e,4);break;case 1:wA(e,8);break;default:throw new Error("Unimplemented type: "+t)}}var Y$e=new Float32Array(1);new Uint8Array(Y$e.buffer);var YL=new Float64Array(1),lo=new Uint8Array(YL.buffer);function Pf(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var Mre=[];function U7(){let e=Mre.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function X$e(e){Mre.push(e)}function wA(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function jre(e){return e.offset>=e.limit}function Jm(e,t){let r=e.bytes,n=e.offset,i=e.limit,o=n+t;if(o>r.length){let a=new Uint8Array(2*o);a.set(r),e.bytes=a}return e.offset=o,o>i&&(e.limit=o),n}function XL(e,t){let r=e.offset;if(r+t>e.limit)throw new Error("Read past limit");return e.offset+=t,r}function Ure(e,t){let r=XL(e,t),n=String.fromCharCode,i=e.bytes,o="",a="";for(let s=0;s<t;s++){let c,l,u,d,f=i[s+r];128&f?(224&f)==192?s+1>=t?a+=o:(c=i[s+r+1],(192&c)!=128?a+=o:(d=(31&f)<<6|63&c,d<128?a+=o:(a+=n(d),s++))):(240&f)==224?s+2>=t?a+=o:(c=i[s+r+1],l=i[s+r+2],(49344&(c|l<<8))!=32896?a+=o:(d=(15&f)<<12|(63&c)<<6|63&l,d<2048||d>=55296&&d<=57343?a+=o:(a+=n(d),s+=2))):(248&f)==240?s+3>=t?a+=o:(c=i[s+r+1],l=i[s+r+2],u=i[s+r+3],(12632256&(c|l<<8|u<<16))!=8421504?a+=o:(d=(7&f)<<18|(63&c)<<12|(63&l)<<6|63&u,d<65536||d>1114111?a+=o:(d-=65536,a+=n(55296+(d>>10),56320+(1023&d)),s+=3))):a+=o:a+=n(f)}return a}function vc(e,t){let r=t.length,n=0;for(let a=0;a<r;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<r&&(s=(s<<10)+t.charCodeAt(++a)-56613888),n+=s<128?1:s<2048?2:s<65536?3:4}Vt(e,n);let i=Jm(e,n),o=e.bytes;for(let a=0;a<r;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<r&&(s=(s<<10)+t.charCodeAt(++a)-56613888),s<128?o[i++]=s:(s<2048?o[i++]=s>>6&31|192:(s<65536?o[i++]=s>>12&15|224:(o[i++]=s>>18&7|240,o[i++]=s>>12&63|128),o[i++]=s>>6&63|128),o[i++]=63&s|128)}}function J$e(e,t){let r=Jm(e,t.limit),n=e.bytes,i=t.bytes;for(let o=0,a=t.limit;o<a;o++)n[o+r]=i[o]}function Fre(e){return e.bytes[XL(e,1)]}function F7(e,t){let r=Jm(e,1);e.bytes[r]=t}function SA(e){let t=XL(e,8),r=e.bytes;return lo[0]=r[t++],lo[1]=r[t++],lo[2]=r[t++],lo[3]=r[t++],lo[4]=r[t++],lo[5]=r[t++],lo[6]=r[t++],lo[7]=r[t++],YL[0]}function TA(e,t){let r=Jm(e,8),n=e.bytes;YL[0]=t,n[r++]=lo[0],n[r++]=lo[1],n[r++]=lo[2],n[r++]=lo[3],n[r++]=lo[4],n[r++]=lo[5],n[r++]=lo[6],n[r++]=lo[7]}function Cc(e){let t,r=0,n=0;do t=Fre(e),r<32&&(n|=(127&t)<<r),r+=7;while(128&t);return n}function Vt(e,t){for(t>>>=0;t>=128;)F7(e,127&t|128),t>>>=7;F7(e,t)}function ru(e,t){let r=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=i===0?n===0?r<16384?r<128?1:2:r<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:i<128?9:10,a=Jm(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=o!==9?128|i:127&i;case 8:s[a+7]=o!==8?n>>>21|128:n>>>21&127;case 7:s[a+6]=o!==7?n>>>14|128:n>>>14&127;case 6:s[a+5]=o!==6?n>>>7|128:n>>>7&127;case 5:s[a+4]=o!==5?128|n:127&n;case 4:s[a+3]=o!==4?r>>>21|128:r>>>21&127;case 3:s[a+2]=o!==3?r>>>14|128:r>>>14&127;case 2:s[a+1]=o!==2?r>>>7|128:r>>>7&127;case 1:s[a]=o!==1?128|r:127&r}}function V7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var Q$e=new Map([["moderation",1],["supervise",2]]);function B7(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var Z$e=class extends _r{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;let t=this._connectionState;this._connectionState=e,this.emit(_n.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=Js(t=e.map(r=>Q$e.get(r)||0)).call(t,(r,n)=>r+n),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(e){super(),I(this,"name","AgoraRTCVideoContentInspect"),I(this,"_connectionState",ts.CONNECTING),I(this,"_innerConnectionState",void 0),I(this,"sequence",0),I(this,"inspectStartTime",void 0),I(this,"workerManagerConnection",void 0),I(this,"workerConnection",void 0),I(this,"workerMessageLengthLimit",void 0),I(this,"inspectIntervalMinimum",void 0),I(this,"qualityRatio",void 0),I(this,"_connectInfo",void 0),I(this,"_cancelTokenSource",Zi.CancelToken.source()),I(this,"_retryConfig",void 0),I(this,"wmSequence",0),I(this,"inspectInterval",void 0),I(this,"inspectTimer",null),I(this,"ossFilePrefix",void 0),I(this,"extraInfo",void 0),I(this,"_inspectType",void 0),I(this,"_inspectMode",void 0),I(this,"_quality",1),I(this,"qualityTimer",null),I(this,"_inspectId",void 0),I(this,"_needWorkUrlOnly",!1),I(this,"inspectImage",()=>{if(this.connectionState!==ts.CONNECTED)throw new q(O.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===ts.CONNECTED?this.requestToInspectImage():w.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=er(5,"inspect-"),this.workerMessageLengthLimit=L("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=L("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=L("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new P0("worker-manager-"+this._inspectId,Kr),this.on(_n.STATE_CHANGE,(t,r)=>{this._innerConnectionState=t,w.debug("[".concat(this._inspectId,"] Inspect operation :").concat(Ya[t]," ").concat(r||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new P0("worker-"+this._inspectId,Kr),this.handleWorkerEvents()}async init(e,t){this.emit(_n.STATE_CHANGE,Ya.CONNECT_AP),this._connectInfo=e;let r=this._cancelTokenSource.token;return this._retryConfig=t,new he((n,i)=>{this.on(_n.CONNECTION_STATE_CHANGE,(o,a)=>{a===ts.CONNECTED&&n()}),this.requestAP(e,r,t).then(o=>{this.connectWorkerManager(o)}).catch(o=>{i(o)})})}async requestAP(e,t,r){let n=L("WEBCS_DOMAIN").map(a=>"https://".concat(a,"/api/v1")),i=await function(a,s,c,l){let{appId:u,areaCode:d,cname:f,sid:p,token:m,uid:g}=s;Pp++;let y="image_moderation_api",v={service_name:y,json_body:JSON.stringify({appId:u,areaCode:d,cname:f,command:"allocateEdge",requestId:Pp,seq:Pp,sid:p,token:m,ts:Date.now(),uid:g+""})},E,b,S=a[0];return nc(async()=>{E=Date.now();let A=await ic(S,{data:v,cancelToken:c,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(b=Date.now()-E,A.code!==0){let H=new q(O.UNEXPECTED_RESPONSE,"image inspect ap error, code"+A.code,{retry:!0,responseTime:b});throw w.error(H.toString()),H}let N=JSON.parse(A.json_body);if(N.code!==200){let H=new q(O.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(N.code,", reason: ").concat(N.reason),{code:N.code,responseTime:b});throw w.error(H.toString()),H}if(!N.servers||!Array.isArray(N.servers)||N.servers.length===0){let H=new q(O.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:N.code,responseTime:b});throw w.error(H.toString()),H}let D=L("VIDEO_INSPECT_WORKER_MANAGER_HOST"),M=L("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:N.servers.map(H=>{let{address:V,wss:G}=H;if(V&&G)return"wss://".concat(V.replace(/\./g,"-"),".").concat(D,":").concat(M||G)}).filter(H=>!!H),workerToken:N.workerToken,vid:N.vid,responseTime:b}},(A,N)=>(Se.apworkerEvent(p,{success:!0,sc:200,serviceName:y,responseDetail:JSON.stringify(A.addressList),firstSuccess:N===0,responseTime:b,serverIp:a[N%a.length]}),!1),(A,N)=>(Se.apworkerEvent(p,{success:!1,sc:A.data&&A.data.code||200,serviceName:y,responseTime:b,serverIp:a[N%a.length]}),!!(A.code!==O.OPERATION_ABORTED&&A.code!==O.UNEXPECTED_RESPONSE||A.data&&A.data.retry)&&(S=a[(N+1)%a.length],!0)),l)}(n,e,t,r);this.emit(_n.STATE_CHANGE,Ya.AP_CONNECTED);let{addressList:o}=i;return this.wmSequence++,o}async connectWorkerManager(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=t,this.emit(_n.STATE_CHANGE,Ya.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(We.CONNECTED,async()=>{this.emit(_n.STATE_CHANGE,Ya.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.22.0",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(We.CLOSED,()=>{this._innerConnectionState<Ya.GET_WORKER_MANAGER_RESPONSE&&w.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(We.FAILED,()=>{this._innerConnectionState<Ya.GET_WORKER_MANAGER_RESPONSE&&w.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(We.RECONNECTING,()=>{this._innerConnectionState<Ya.GET_WORKER_MANAGER_RESPONSE&&w.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(We.ON_MESSAGE,async e=>{this.emit(_n.STATE_CHANGE,Ya.GET_WORKER_MANAGER_RESPONSE);let t=this.workerManagerConnection.url;this.workerManagerConnection.close();let r=JSON.parse(e.data);if(r.code!==200)throw w.error("[".concat(this._inspectId,"] Unexpected code ").concat(r.code," from worker manager")),new q(O.UNEXPECTED_RESPONSE,"response code of worker is unexpected",r);if(!(r.serverResponse&&r.serverResponse.portWss&&t))throw w.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(r))),new q(O.UNEXPECTED_RESPONSE,"response content of worker is unexpected",r);{let n=L("VIDEO_INSPECT_WORKER_PORT")||r.serverResponse.portWss,i=t.replace(/:\d+\/?$/,":".concat(n));this.emit(_n.STATE_CHANGE,Ya.CONNECT_WORKER,i),this._needWorkUrlOnly?this.emit(_n.REQUEST_NEW_WORKER_URL,i):await this.connectWorker(i)}}),this.workerManagerConnection.on(We.WILL_RECONNECT,(e,t,r)=>{r(e)}),this.workerManagerConnection.on(We.REQUEST_NEW_URLS,(e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)})}handleWorkerEvents(){this.workerConnection.on(We.CONNECTED,async()=>{this.emit(_n.STATE_CHANGE,Ya.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=ts.CONNECTED}),this.workerConnection.on(We.ON_MESSAGE,async e=>{if(e.data instanceof ArrayBuffer){let r=G$e(new Uint8Array(e.data));if(L("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&w.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(r)),r.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(_n.INSPECT_RESULT,void 0,void 0);if(r.data&&r.data.scorePorn&&r.data.scoreSexy&&r.data.scoreNeutral){var t;let n={porn:r.data.scorePorn,sexy:r.data.scoreSexy,neutral:r.data.scoreNeutral},i=Js(t=Object.keys(n)).call(t,(a,s)=>n[a]>n[s]?a:s,"porn"),o=Object.keys(n).find(a=>a===i);this.emit(_n.INSPECT_RESULT,o)}else this.emit(_n.INSPECT_RESULT,void 0,new q(O.UNEXPECTED_RESPONSE,r.code+"","There is an unexpected data on message"))}else this.emit(_n.INSPECT_RESULT,void 0,new q(O.UNEXPECTED_RESPONSE,r.code+"",r.msg))}else w.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(_n.INSPECT_RESULT,void 0,new q(O.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(We.CLOSED,()=>{this.connectionState=ts.CLOSED}),this.workerConnection.on(We.FAILED,()=>{this.connectionState=ts.CLOSED}),this.workerConnection.on(We.RECONNECTING,()=>{this.connectionState=this.connectionState===ts.CONNECTED?ts.RECONNECTING:ts.CONNECTING}),this.workerConnection.on(We.WILL_RECONNECT,(e,t,r)=>{e==="recover"&&r(e),r("tryNext")}),this.workerConnection.on(We.REQUEST_NEW_URLS,(e,t)=>{this.workerManagerConnection.close(),this.once(_n.REQUEST_NEW_WORKER_URL,r=>{e([r])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r=>{this.connectWorkerManager(r,!0)}).catch(r=>{t(r)})})}async requestToInspectImage(){this.sequence++;let e=Ca(this,_n.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(_n.INSPECT_RESULT,void 0,new q(O.INVALID_OPERATION,"Only the track being played can be inspected"));let r=await this.generateRequestData(e,t);this.workerConnection.sendMessage(r,!0,!0)}else this.emit(_n.INSPECT_RESULT,void 0,new q(O.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:r,cname:n,cid:i,vid:o,sid:a,uid:s}=t,c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),u=await bte(l,r,n),d=this.sequence+"-"+i+"-"+s+"-"+c+"-"+er(12,""),f={appId:r,cid:i,cname:n,deviceId:"",elapse:B7(Number(c-this.inspectStartTime)),fileSize:u.byteLength,jpgEncryption:2,height:l.height,width:l.width,jpg:u,networkType:6,osType:7,requestId:d,sdkVersion:"4.22.0",sequence:this.sequence,sid:a,timestamp:B7(c),uid:s,vid:o,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete f.callbackData,this.ossFilePrefix===void 0&&delete f.ossFilePrefix;let p=z$e(f);if(p.byteLength<this.workerMessageLengthLimit){if(L("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){let m=function(g){for(var y=1;y<arguments.length;y++){var v=arguments[y]!=null?arguments[y]:{};y%2?V7(Object(v),!0).forEach(function(E){I(g,E,v[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(v)):V7(Object(v)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(v,E))})}return g}({},f);delete m.jpg,w.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(m))}return p}{let m=this.quality*this.qualityRatio;return this.quality=m,await this.generateRequestData(e,{appId:r,cname:n,cid:i,vid:o,sid:a,uid:s})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Zi.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=ts.CLOSED,this.emit(_n.STATE_CHANGE,Ya.CLOSED)}},eHe={name:"ContentInspect",create:function(e){let{config:t}=e;return function(r){if(!r)throw new q(O.INVALID_PARAMS,"inspectConfig is necessary.");if(!r.inspectType||!Array.isArray(r.inspectType))throw new q(O.INVALID_PARAMS,"inspectConfig.inspectType is necessary and is an instance of Array.");{let n=[...new Set(r.inspectType)];n.forEach(i=>{var o;if(!me(o=["supervise","moderation"]).call(o,i))throw new q(O.INVALID_PARAMS,"".concat(i," is not a valid inspect type."))}),r.inspectType=n}if(r&&r.extraInfo&&r.extraInfo.length>1024)throw new q(O.INVALID_PARAMS,"inspectConfig.extraInfo length cannot exceed 1024 bytes")}(t),new Z$e(t)}};Gt("PROCESS_ID","process-".concat(er(8,""),"-").concat(er(4,""),"-").concat(er(4,""),"-").concat(er(4,""),"-").concat(er(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(t){return void w.error("Error loading sdk config",t.message)}if(e)try{let t=JSON.parse(window.atob(e)),r=Date.now();w.debug("Loading global parameters from cache",t),Object.keys(t).forEach(n=>{if(Object.prototype.hasOwnProperty.call(Lr,n)){let{value:i,expires:o}=t[n];if(o&&o<=r)return;Su[n]=i,Lr[n]=i}})}catch(t){w.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(Su.AREAS)&&Su.AREAS.length>0&&VL(Su.AREAS,!0);var $7=(e,t,r)=>{w.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),Gt(e,t,r)};Mg(V$e,!1),Mg(H$e,!1),Mg(T8e,!1),Mg(eHe,!1),Mg(j$e,!1);var Sr=function(e){let t=new _r,r=e,n={getListeners:t.getListeners.bind(t),on:(i,o)=>(function(a,s){a===Sc.SECURITY_POLICY_VIOLATION&&hre(s,!0)}(i,o),t.on.bind(t)(i,o)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return m7(m7({},r),n)}({__TRACK_LIST__:jf,VERSION:Ra,BUILD:RL,ESM_BUNDLER:!1,ESM:!0,UMD:!1,DEV:!1,setParameter:$7,getParameter:L,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection,r=await async function(n){let i;return Ct().supportUnifiedPlan?(n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"}),i=(await n.createOffer()).sdp):i=(await n.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,i}(t);if(!r)return e;t.close(),t=null,e=function(n){let i={video:[],audio:[]};return n.match(/ VP8/i)&&i.video.push("VP8"),n.match(/ VP9/i)&&i.video.push("VP9"),n.match(/ AV1/i)&&i.video.push("AV1"),n.match(/ H264/i)&&i.video.push("H264"),n.match(/ H265/i)&&i.video.push("H265"),n.match(/ opus/i)&&i.audio.push("OPUS"),n.match(/ PCMU/i)&&i.audio.push("PCMU"),n.match(/ PCMA/i)&&i.audio.push("PCMA"),n.match(/ G722/i)&&i.audio.push("G722"),i}(r)}catch(t){throw new q(O.CREATE_OFFER_FAILED,t.toString&&t.toString()).print()}return e},checkSystemRequirements:function(){let e=Se.reportApiInvoke(null,{name:Qr.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Cr.TRACER}),t=!1;try{let o=window.RTCPeerConnection,a=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,s=window.WebSocket;t=!!(o&&a&&s),t&&bL()&&Ree(75)&&new o().close()}catch(o){return w.error("check system requirement failed: ",o),!1}let r=!1,n=St();n.name===Mt.CHROME&&Number(n.version)>=58&&(Bs.engine.name!=="WebKit"||function(){let o=St();if(eS()){if(o.os===mn.MAC_OS)return!0;if(o.os===mn.IOS){let a=Bs.os.version&&Bs.os.version.split(".");if(a&&Number(a[0])===14&&a[1]&&Number(a[1])>=3||a&&Number(a[0])>14)return!0}}return!1}())&&(r=!0),(n.name===Mt.FIREFOX&&Number(n.version)>=56||n.name===Mt.OPERA&&Number(n.version)>=45||n.name===Mt.SAFARI&&Number(n.version)>=11||n.name==="WebKit"&&(Ui()||gs())&&n.osVersion&&Number(n.osVersion.split(".")[0])>=11||Nee()||St().name===Mt.QQ)&&(r=!0),w.debug("checkSystemRequirements, api:",t,"browser",r);let i=t&&r;return e.onSuccess(i),i},getDevices:function(e){return qo.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return qo.getRecordingDevices(e)},getCameras:function(e){return qo.getCamerasDevices(e)},getElectronScreenSources:dte,getPlaybackDevices:function(e){return qo.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"},r=Se.reportApiInvoke(null,{name:Qr.CREATE_CLIENT,options:[t],tag:Cr.TRACER});try{(function(n){on(n.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),on(n.mode,"config.mode",["rtc","live","p2p"]),n.audioCodec!==void 0&&on(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),n.proxyServer!==void 0&&Nn(n.proxyServer,"config.proxyServer",1,1e4),n.turnServer!==void 0&&Lee(n.turnServer),n.httpRetryConfig!==void 0&&DB(n.httpRetryConfig),n.websocketRetryConfig!==void 0&&DB(n.websocketRetryConfig)})(t)}catch(n){throw r.onError(n),n}return(xee(16,0)||Aee(16,0))&&(t.codec==="vp9"&&(t.codec="vp8",w.debug("browser not support vp9, force use vp8")),Gt("UNSUPPORTED_VIDEO_CODEC",["vp9"])),t.audioCodec===void 0&&(t.audioCodec="opus"),r.onSuccess(),new C8e(js(js({forceWaitGatewayResponse:!0},t),{},{role:me(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=L("CAMERA_CAPTURE_CONFIG"),r=Se.reportApiInvoke(null,{tag:Cr.TRACER,name:Qr.CREATE_CAM_VIDEO_TRACK,options:[hr({},e),t]});t&&(e.encoderConfig=t);let n=iS(e),i=er(8,"track-cam-"),o=null;w.info("start create camera video track with config",JSON.stringify(e),"trackId",i);try{o=(await zo({video:n},i)).getVideoTracks()[0]||null}catch(s){throw r.onError(s),s}if(!o){let s=new J(O.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(s),s.throw(w)}e.optimizationMode&&Gx(i,o,e,xc(e.encoderConfig));let a=new Ek(o,e,n,e.scalabiltyMode?l_(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i);return r.onSuccess(a.getTrackId()),w.info("create camera video success, trackId:",i),a},createCustomVideoTrack:function(e){let t=Se.reportApiInvoke(null,{tag:Cr.TRACER,name:Qr.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),r=new ir(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?l_(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,er(8,"track-cus-"),[lr.CUSTOM_TRACK]);return t.onSuccess(r.getTrackId()),w.info("create custom video track success with config",e,"trackId",r.getTrackId()),r},createScreenVideoTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable",r=Se.reportApiInvoke(null,{tag:Cr.TRACER,name:Qr.CREATE_SCREEN_VIDEO_TRACK,options:[hr({},e),t]});e.encoderConfig?typeof e.encoderConfig=="string"||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";let n=function(u){let d={};u.screenSourceType&&(d.mediaSource=u.screenSourceType),u.extensionId&&Fu()&&(d.extensionId=u.extensionId);let{displaySurface:f,selfBrowserSurface:p,surfaceSwitching:m,systemAudio:g}=u;(nk(107)||xB(107)||AB(93))&&(f&&(on(f,"displaySurface",["browser","window","monitor"]),d.displaySurface=f),p?(on(p,"selfBrowserSurface",["exclude","include"]),d.selfBrowserSurface=p):d.selfBrowserSurface="include",m&&(on(m,"surfaceSwitching",["exclude","include"]),d.surfaceSwitching=m)),(nk(105)||xB(105)||AB(91))&&g&&(on(g,"systemAudio",["exclude","include"]),d.systemAudio=g),u.electronScreenSourceId&&(d.sourceId=u.electronScreenSourceId);let y=u.encoderConfig?Bx(u.encoderConfig):null;return d.mandatory={chromeMediaSource:"desktop",maxWidth:y?y.width:void 0,maxHeight:y?y.height:void 0},y&&(y.frameRate&&(typeof y.frameRate=="number"?(d.mandatory.maxFrameRate=y.frameRate,d.mandatory.minFrameRate=y.frameRate):(d.mandatory.maxFrameRate=y.frameRate.max||y.frameRate.ideal||y.frameRate.exact||void 0,d.mandatory.minFrameRate=y.frameRate.min||y.frameRate.ideal||y.frameRate.exact||void 0),d.frameRate=y.frameRate),y.width&&(d.width=y.width),y.height&&(d.height=y.height)),d}(e),i=er(8,"track-scr-v-"),o=null,a=null,s=Ct();if(!s.supportShareAudio&&t==="enable"){let u=new J(O.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return r.onError(u),u.throw(w)}w.info("start create screen video track with config",e,"withAudio",t,"trackId",i);try{let u=await zo({screen:n,screenAudio:t==="auto"?s.supportShareAudio:t==="enable"},i);o=u.getVideoTracks()[0]||null,a=u.getAudioTracks()[0]||null}catch(u){throw r.onError(u),u}if(!o){let u=new J(O.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(u),u.throw(w)}if(!a&&t==="enable"){o&&o.stop();let u=new J(O.SHARE_AUDIO_NOT_ALLOWED);return r.onError(u),u.throw(w)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(Gx(i,o,e,e.encoderConfig&&Bx(e.encoderConfig)||void 0),e.encoderConfig&&typeof e.encoderConfig!="string"&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));let c=new ir(o,e.encoderConfig?Bx(e.encoderConfig):{},e.scalabiltyMode?l_(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i,[lr.SCREEN_TRACK]);if(!a)return r.onSuccess(c.getTrackId()),w.info("create screen video track success","video:",c.getTrackId()),c;let l=new Tr(a,void 0,er(8,"track-scr-a-"),!1);return r.onSuccess([c.getTrackId(),l.getTrackId()]),w.info("create screen video track success","video:",c.getTrackId(),"audio:",l.getTrackId()),[c,l]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=L("CAMERA_CAPTURE_CONFIG"),n=Se.reportApiInvoke(null,{tag:Cr.TRACER,name:Qr.CREATE_MIC_AND_CAM_TRACKS,options:[e,t,r]});r&&(t.encoderConfig=r);let i=iS(t),o=L6(e),a=er(8,"track-mic-"),s=er(8,"track-cam-"),c=null,l=null;w.info("start create camera video track(".concat(s,") and microphone audio track(").concat(a,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{let f=await zo({audio:o,video:i},"".concat(a,"-").concat(s));c=f.getAudioTracks()[0],l=f.getVideoTracks()[0]}catch(f){throw n.onError(f),f}if(!c||!l){let f=new J(O.UNEXPECTED_ERROR,"can not find tracks in media stream");return n.onError(f),f.throw(w)}t.optimizationMode&&Gx(s,l,t,xc(t.encoderConfig));let u=new oS(c,e,o,a),d=new Ek(l,t,i,t.scalabiltyMode?l_(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,s);return n.onSuccess([u.getTrackId(),d.getTrackId()]),w.info("create camera video track(".concat(s,") and microphone audio track(").concat(a,") success")),[u,d]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Se.reportApiInvoke(null,{tag:Cr.TRACER,name:Qr.CREATE_MIC_AUDIO_TRACK,options:[e]}),r=L6(e),n=er(8,"track-mic-"),i=null;w.info("start create microphone audio track with config",JSON.stringify(e),"trackId",n);try{i=(await zo({audio:r},n)).getAudioTracks()[0]||null}catch(a){throw t.onError(a),a}if(!i){let a=new J(O.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(a),a.throw(w)}let o=new oS(i,e,r,n);return t.onSuccess(o.getTrackId()),w.info("create microphone audio track success, trackId:",n),o},createCustomAudioTrack:function(e){let t=Se.reportApiInvoke(null,{tag:Cr.TRACER,name:Qr.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),r=new Tr(e.mediaStreamTrack,e.encoderConfig?nS(e.encoderConfig):{},er(8,"track-cus-"),!1);return w.info("create custom audio track success with config",e,"trackId",r.getTrackId()),t.onSuccess(r.getTrackId()),r},createBufferSourceAudioTrack:async function(e){var t;let{cacheOnlineFile:r,encoderConfig:n}=e,{source:i}=e,o={source:i instanceof AudioBuffer?"AudioBuffer":i instanceof File?(t=File.name)!==null&&t!==void 0?t:"File":i,cacheOnlineFile:r,encoderConfig:n},a=Se.reportApiInvoke(null,{tag:Cr.TRACER,name:Qr.CREATE_BUFFER_AUDIO_TRACK,options:[o]});if(L("DISABLE_WEBAUDIO"))throw new J(O.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");let s=er(8,"track-buf-");w.info("start create buffer source audio track with config",JSON.stringify(o),"trackId",s);let c=i;if(!(i instanceof AudioBuffer))try{i=await async function(d,f){let p=null;if(typeof d=="string"){let g=E8.get(d);if(g)return w.debug("use cached audio resource: ",d),g;try{p=(await nc(()=>Zi.get(d,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(y){throw new J(O.FETCH_AUDIO_FILE_FAILED,y.toString())}}else p=await new he((g,y)=>{let v=new FileReader;v.onload=E=>{E.target?g(E.target.result):y(new J(O.READ_LOCAL_AUDIO_FILE_ERROR))},v.onerror=()=>{y(new J(O.READ_LOCAL_AUDIO_FILE_ERROR))},v.readAsArrayBuffer(d)});let m=await function(g){let y=Km();return new he((v,E)=>{y.decodeAudioData(g,b=>{v(b)},b=>{E(new J(O.DECODE_AUDIO_FILE_FAILED,b.toString()))})})}(p);return typeof d=="string"&&f&&E8.set(d,m),m}(i,r)}catch(d){return a.onError(d),d.throw(w)}let l=new b6e(i),u=new _6e(c,l,n?nS(n):{},s);return w.info("create buffer source audio track success, trackId:",s),a.onSuccess(u.getTrackId()),u},setAppType:function(e){if(w.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw w.debug("Invalid appType"),new q(O.INVALID_PARAMS,"invalid app type",e);Gt("APP_TYPE",Math.floor(e))},setLogLevel:function(e){w.setLogLevel(e)},enableLogUpload:function(){L("USE_NEW_LOG")?Gt("UPLOAD_LOG",!0):w.enableLogUpload()},disableLogUpload:function(){L("USE_NEW_LOG")?Gt("UPLOAD_LOG",!1):w.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new Xte},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,r=Se.reportApiInvoke(null,{tag:Cr.TRACER,name:Qr.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof Tr||e instanceof kp)){let c=new q(O.INVALID_TRACK,"the parameter is not a audio track");return r.onError(c),c.throw()}t&&t<1e3&&(t=1e3);let n=e instanceof Tr?e.getTrackLabel():"remote_track",i=e.getVolumeLevel(),o=i,a=i,s=Date.now();return new he(c=>{let l=setInterval(()=>{let u=e.getVolumeLevel();o=u>o?u:o,a=u<a?u:a;let d=o-a>1e-4,f=Date.now()-s;if(d||f>t){clearInterval(l);let p=d,m={duration:f,deviceLabel:n,maxVolumeLevel:o,result:p};w.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(m))),r.onSuccess(m),c(p)}},200)})},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,r=Se.reportApiInvoke(null,{tag:Cr.TRACER,name:Qr.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof ir||e instanceof Op)){let d=new q(O.INVALID_TRACK,"the parameter is not a video track");return r.onError(d),d.throw()}t&&t<1e3&&(t=1e3);let n=e instanceof ir?e.getTrackLabel():"remote_track",i=e.getMediaStreamTrack(!0),o=document.createElement("video");o.style.width="1px",o.style.height="1px",o.setAttribute("muted",""),o.muted=!0,o.setAttribute("playsinline",""),o.controls=!1,(Wn()||eS())&&(o.style.opacity="0.01",o.style.position="fixed",o.style.left="0",o.style.top="0",document.body.appendChild(o)),o.srcObject=new MediaStream([i]),o.play();let a=document.createElement("canvas");a.width=160,a.height=120;let s=0,c=0;try{let d=Date.now();s=await function(f,p,m,g){let y,v=0,E=null;return new he((b,S)=>{function A(){v>g&&y&&(y(),b(v));let N=m.getContext("2d");if(!N){let H=new q(O.UNEXPECTED_ERROR,"can not get canvas 2d context.");return w.error(H.toString()),void S(H)}N.drawImage(f,0,0,160,120);let D=N.getImageData(0,0,m.width,m.height),M=Math.floor(D.data.length/3);if(E){for(let H=0;H<M;H+=3)if(D.data[H]!==E[H])return v+=1,void(E=D.data);E=D.data}else E=D.data}setTimeout(()=>{y&&(y(),b(v))},p),y=DL(()=>{A()},30)})}(o,t,a,4),c=Date.now()-d}catch(d){throw r.onError(d),d}l8e===Mt.SAFARI&&(o.pause(),o.remove()),o.srcObject=null;let l=s>4,u={duration:c,changedPicNum:s,deviceLabel:n,result:l};return w.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(u))),r.onSuccess(u),l},setArea:VL,audioElementPlayCenter:Yi,resumeAudioContext:function(){Yi.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){I8e.processExternalMediaAEC(e)},registerExtensions:function(e){let t=L("PLUGIN_INFO")||[];e.forEach(r=>{"name"in r&&!me(t).call(t,r.name)&&t.push(r.name);let n=r;n.__registered__=!0,n.logger.hookLog=w.extLog,n.reporter.hookApiInvoke=Se.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach(i=>{n.parameters[i]=L(i)})}),$7("PLUGIN_INFO",t)},ChannelMediaRelayError:Mf,ChannelMediaRelayEvent:rl,ChannelMediaRelayState:ao,RemoteStreamFallbackType:f6e,RemoteStreamType:h6e,ConnectionDisconnectedReason:Bt,AudienceLatencyLevelType:WFe,AREAS:xt,preload:async function(e,t,r,n){return rre(e,t,r,n)}});Object.defineProperties(Sr,{onAudioAutoplayFailed:{get:()=>Fo.onAudioAutoplayFailed,set:e=>{Fo.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>Fo.onAutoplayFailed,set:e=>{Fo.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>Sr._onSecurityPolicyViolation,set(e){Sr._onSecurityPolicyViolation=e,hre(e)}},__CLIENT_LIST__:{get:()=>L("SHOW_GLOBAL_CLIENT_LIST")?hu:[]}}),qo.on(Yd.CAMERA_DEVICE_CHANGED,e=>{w.info("camera device changed",JSON.stringify(e)),Sr.onCameraChanged&&Sr.onCameraChanged(e),Sr.safeEmit(Sc.CAMERA_CHANGED,e)}),qo.on(Yd.RECORDING_DEVICE_CHANGED,e=>{w.info("microphone device changed",JSON.stringify(e)),Sr.onMicrophoneChanged&&Sr.onMicrophoneChanged(e),Sr.safeEmit(Sc.MICROPHONE_CHANGED,e)}),qo.on(Yd.PLAYOUT_DEVICE_CHANGED,e=>{w.debug("playout device changed",JSON.stringify(e)),Sr.onPlaybackDeviceChanged&&Sr.onPlaybackDeviceChanged(e),Sr.safeEmit(Sc.PLAYBACK_DEVICE_CHANGED,e)}),Yi.onAutoplayFailed=()=>{w.info("detect audio element autoplay failed"),Fo.onAudioAutoplayFailed&&Fo.onAudioAutoplayFailed()},Ht.on("autoplay-failed",()=>{w.info("detect webaudio autoplay failed"),Fo.onAudioAutoplayFailed&&Fo.onAudioAutoplayFailed(),Sr.safeEmit(Sc.AUTOPLAY_FAILED)}),Ht.on(kn.STATE_CHANGE,(e,t)=>{w.info("audio context state changed: ".concat(t," => ").concat(e)),Sr.onAudioContextStateChanged&&Sr.onAudioContextStateChanged(e,t),Sr.safeEmit(Sc.AUDIO_CONTEXT_STATE_CHANGED,e,t)}),$r.on(cp.NETWORK_STATE_CHANGE,(e,t)=>{w.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))}),window&&(window.__ARTC__=Sr);function Zd(e,t,r){return e.on(t,r),()=>e.off(t,r)}function tHe(e){try{return e()}catch(t){console.error(t)}}function yC(e){return()=>e.forEach(tHe)}function rHe(e,t){let r=setTimeout(e,t);return()=>clearTimeout(r)}function JL(){let e,t,r;function n(){if(t){let l=t;t=void 0,l()}}async function i(){if(r){let l=r;r=void 0;try{await l()}catch(u){console.error(u)}}}async function o(l){e=!0,await i();try{r=await l()}catch(u){console.error(u)}e=!1,n()}async function a(){e=!0,await i(),e=!1,n()}function s(l){e?t=()=>o(l):o(l)}function c(){e?t=a:a()}return{run:s,dispose:c}}var Vre=typeof document<"u"?C.useLayoutEffect:C.useEffect;function nHe(e){return e!=null&&typeof e.then=="function"}function Vv(){let e=C.useRef(!1);return C.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function iHe(){let e=Vv();function t(r,n){return new Promise(async(i,o)=>{try{let a=await r;e.current||i(a)}catch(a){e.current?n&&n(a):o(a)}})}return C.useCallback(t,[e])}function Bre(e){let t=iHe(),[r,n]=C.useState();return Vre(()=>{nHe(e)?t(e).then(n):n(e)},[e,t]),r}function vC(e,t){let r=C.useRef();C.useEffect(()=>{let{run:n,dispose:i}=r.current||(r.current=JL());return n(e),i},t)}function oHe(e,t){let r=e.split("."),n=t.split("."),i=Math.max(r.length,n.length);for(let o=0;o<i;o++){let a=parseInt(r[o]||"0"),s=parseInt(n[o]||"0");if(a>s)return 1;if(a<s)return-1}return 0}var $re=C.createContext(null);function aHe({client:e,children:t}){return h.jsx($re.Provider,{value:e,children:t})}function sHe(e){return C.useContext($re)}function Bv(e){let t=sHe();if(!t)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return t}C.createContext(null);function Qm(e){let t=Bv(),[r,n]=C.useState(t?t.connectionState==="CONNECTED":!1);return C.useEffect(()=>{if(t){n(t.connectionState==="CONNECTED");let i;return yC([Zd(t,"connection-state-change",o=>{i==null||i(),i=rHe(()=>n(o==="CONNECTED"),0)}),()=>i==null?void 0:i()])}else n(!1)},[t]),r}var Oh=class extends Error{constructor(t,r){var e=(...IGe)=>(super(...IGe),ag(this,"rtcMethod"),ag(this,"rtcError"),ag(this,"name","AgoraRTCReactException"),this);e(typeof r=="string"?r:r.message),this.rtcMethod=t,this.rtcError=r}log(t){console[t](this)}};function cHe(e,t=!0,r){let n=Bv(),i=Qm(),o=C.useRef(),[a,s]=C.useState(!1),[c,l]=C.useState(0),[u,d]=C.useState(null),f=Vv();return vC(async()=>{if(f.current||(d(null),l(0),s(!1)),t&&n){try{f.current||s(!0);let{appid:m,channel:g,token:y,uid:v}=typeof e=="function"?await e():e,E=await n.join(m,g,y,v);f.current||l(E)}catch(m){console.error(m),f.current||d(new Oh("IAgoraRTCClient.join",m))}f.current||s(!1);let p=o.current||(o.current=JL());return yC([()=>{p.dispose()},()=>{p.run(()=>n.unpublish(n.localTracks))},()=>{for(let m of n.localTracks)m.isPlaying&&m.stop(),m.close();p.run(()=>n.leave())}])}},[t,r]),{data:c,isLoading:a,isConnected:i,error:u}}function lHe(e,t=!0,r){let n=Bv(),i=Qm(),o=C.useRef([]),[a,s]=C.useState(!1),[c,l]=C.useState(null),u=Vv();return vC(async()=>{if(u.current||(s(!1),l(null)),!n||!i||!t)return;let d=e.filter(Boolean),f=g=>{let y=oHe(Sr.VERSION,"4.18.2")>=0;return y||new Oh("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),y?n.mode!=="live"||n.role!=="audience":!0},p=g=>o.current.some(y=>y&&y.getTrackId()===g.getTrackId()),m=g=>f()&&g.enabled&&t&&!p(g);for(let g=0;g<d.length;g++){let y=d[g];if(y&&m(y)){await n.unpublish(o.current.filter(v=>(v==null?void 0:v.trackMediaType)===y.trackMediaType));try{u.current||s(!0),await n.publish(y)}catch(v){console.error(v),u.current||l(new Oh("IAgoraRTCClient.publish",v))}u.current||s(!1)}}o.current=d},[i,t,n,e]),{isLoading:a,error:c}}function uHe(e=!0,t={ANS:!0,AEC:!0},r){let n=Qm(),[i,o]=C.useState(null),[a,s]=C.useState(!1),[c,l]=C.useState(null),u=Vv();return vC(async()=>{if(u.current||(s(!1),l(null)),n&&e&&!i){try{u.current||s(!0);let d=await Sr.createMicrophoneAudioTrack(t);u.current||o(d)}catch(d){console.error(d),u.current||l(new Oh("IAgoraRTC.createMicrophoneAudioTrack",d))}u.current||s(!1)}!n&&!u.current&&o(null)},[n,e]),{localMicrophoneTrack:i,isLoading:a,error:c}}function dHe(e=!0,t,r){let n=Qm(),[i,o]=C.useState(null),[a,s]=C.useState(!1),[c,l]=C.useState(null),u=Vv();return vC(async()=>{if(u.current||(s(!1),l(null)),n&&e&&!i){try{u.current||s(!0);let d=await Sr.createCameraVideoTrack(t);u.current||o(d)}catch(d){console.error(d),u.current||l(new Oh("IAgoraRTC.createCameraVideoTrack",d))}u.current||s(!1)}!n&&!u.current&&o(null)},[n,e]),{localCameraTrack:i,isLoading:a,error:c}}function H7(e,t,r){let n=Bv(),i=t==="audio"?"audioTrack":"videoTrack",[o,a]=C.useState(e&&e[i]),s=Qm(),c=C.useRef(),[l,u]=C.useState(!1),[d,f]=C.useState(null);return C.useEffect(()=>{if(!e||!s)return;let p=!1;p||f(null);let m=t==="audio"?"hasAudio":"hasVideo",g=e.uid,y=async(b,S)=>{if(b[i]&&n.remoteUsers.some(({uid:A})=>b.uid===A))try{p||u(!0),await n.unsubscribe(b,S)}catch(A){p||f(new Oh("IAgoraRTCClient.unsubscribe",A)),console.error(A)}p||(a(void 0),u(!1))},v=async(b,S)=>{try{!b[i]&&n.remoteUsers.some(({uid:A})=>b.uid===A)&&(p||u(!0),await n.subscribe(b,S)),p||a(b[i])}catch(A){p||f(new Oh("IAgoraRTCClient.subscribe",A)),console.error(A)}p||u(!1)},E=c.current||(c.current=JL());return!e[i]&&e[m]?E.run(()=>v(e,t)):a(e[i]),yC([()=>{p=!0,E.dispose()},Zd(n,"user-published",(b,S)=>{b.uid===g&&S===t&&E.run(()=>v(b,t))}),Zd(n,"user-unpublished",(b,S)=>{b.uid===g&&S===t&&E.run(()=>y(b,t))})])},[s,n,e,t,i]),{track:o,isLoading:l,error:d}}function hHe(e){let t=Bv(),[r,n]=C.useState(t?t.remoteUsers:[]);return C.useEffect(()=>{if(t){let i=()=>n(t.remoteUsers.slice());return yC([Zd(t,"user-joined",i),Zd(t,"user-left",i),Zd(t,"user-published",i),Zd(t,"user-unpublished",i)])}},[t]),r}var Hre=C.createContext(void 0);function zre(e,t,r,n){let i=C.useContext(Hre);C.useEffect(()=>{if(e)return n&&t?e.play(n,r||void 0):e.stop(),i?(i.onMount(e),()=>i.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,n,t,i,r])}function Gre(e,t){let r=C.useContext(Hre);Vre(()=>{if(e)return t?e.play():e.stop(),r?(r.onMount(e),()=>r.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,t,r])}function fHe({track:e,play:t=!1,volume:r,disabled:n,muted:i,children:o}){let a=Bre(e);return Gre(a,t),C.useEffect(()=>{a&&r!=null&&a.setVolume(r)},[a,r]),C.useEffect(()=>{a&&n!=null&&a.setEnabled(!n).catch(console.warn)},[n,a]),C.useEffect(()=>{a&&i!=null&&a.setMuted(i).catch(console.warn)},[i,a]),o?h.jsx(h.Fragment,{children:o}):null}var Wre={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},Kre={width:"100%",height:"100%"},QL={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},EC=(e,t)=>C.useMemo(()=>({...e,...t}),[e,t]);function pHe({track:e,play:t,disabled:r,muted:n,style:i,videoPlayerConfig:o,...a}){let s=EC(Kre,i),[c,l]=C.useState(null),u=Bre(e);return zre(u,t,o,c),C.useEffect(()=>{u&&r!=null&&u.setEnabled(!r).catch(console.warn)},[r,u]),C.useEffect(()=>{u&&n!=null&&u.setMuted(n).catch(console.warn)},[n,u]),h.jsx("div",{...a,ref:l,style:s})}var mHe={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},gHe={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function qre({cover:e}){return h.jsx("div",{style:QL,children:typeof e=="string"?h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{...mHe,backgroundImage:`url(${e})`}}),h.jsx("img",{src:e,style:gHe})]}):e()})}function yHe({micOn:e,cameraOn:t,audioTrack:r,videoTrack:n,playAudio:i,playVideo:o,volume:a,cover:s,children:c,style:l,...u}){let d=EC(Wre,l);return o=o??!!t,i=i??!!e,h.jsxs("div",{...u,style:d,children:[h.jsx(pHe,{disabled:!t,play:o,track:n}),h.jsx(fHe,{disabled:!e,play:i,track:r,volume:a}),s&&!t&&h.jsx(qre,{cover:s}),h.jsx("div",{style:QL,children:c})]})}function vHe({track:e,play:t=!1,playbackDeviceId:r,volume:n,children:i}){return Gre(e,t),C.useEffect(()=>{e&&r!=null&&e.setPlaybackDevice(r).catch(console.warn)},[e,r]),C.useEffect(()=>{e&&n!=null&&e.setVolume(n)},[e,n]),i?h.jsx(h.Fragment,{children:i}):null}function EHe({track:e,play:t,style:r,videoPlayerConfig:n,...i}){let o=EC(Kre,r),[a,s]=C.useState(null);return zre(e,t,n,a),h.jsx("div",{...i,ref:s,style:o})}function _He({user:e,playVideo:t,playAudio:r,playbackDeviceId:n,volume:i,cover:o,style:a,children:s,videoPlayerConfig:c,...l}){let u=EC(Wre,a),{track:d}=H7(e,"video"),{track:f}=H7(e,"audio");return t=t??(e==null?void 0:e.hasVideo),r=r??(e==null?void 0:e.hasAudio),h.jsxs("div",{...l,style:u,children:[h.jsx(EHe,{play:t,track:d,videoPlayerConfig:c}),h.jsx(vHe,{play:r,playbackDeviceId:n,track:f,volume:i}),o&&!t&&h.jsx(qre,{cover:o}),h.jsx("div",{style:QL,children:s})]})}var bHe=class{constructor(){ag(this,"appType",1001);Sr.setAppType(this.appType)}};new bHe;var wHe=Sr;const Lk=wHe.createClient({mode:"rtc",codec:"vp8"});function SHe(){const e=new URLSearchParams(location.search),t=e.get("doctorId"),r=e.get("patientId");return h.jsxs("div",{className:"w-screen h-screen flex flex-col gap-2",children:[h.jsx("h1",{className:"w-full h-auto bg-blue-500 p-2 text-lg font-medium flex justify-center shadow-lg",children:"Consultation"}),h.jsx("div",{className:"flex flex-1 w-full p-2",children:h.jsx(aHe,{client:Lk,children:h.jsx("div",{className:"w-full h-[80vh]",children:h.jsx(THe,{doctorId:t,patientId:r})})})})]})}function THe(e){const t="7b2118df626f4986907f6d989f14fa9d",r=Qm(),[n,i]=C.useState(!0),[o,a]=C.useState(!0),[s,c]=C.useState(!0),{localMicrophoneTrack:l}=uHe(o),{localCameraTrack:u}=dHe(s),{doctorId:d,patientId:f}=e;cHe({appid:t,channel:`consulation_${d}_${f}`,token:null},n),lHe([l,u]),C.useEffect(()=>{Lk.on("user-joined",m=>{console.log("userrr",m)}),Lk.on("user-published",(m,g)=>{console.log("user published",m.uid,g)})},[]);const p=hHe();return h.jsx("div",{className:"w-full h-[88vh]  flex ",children:r&&h.jsxs("div",{className:"w-screen h-full flex gap-2 ",children:[h.jsxs("div",{className:"w-[80%] h-full grid grid-cols-1 ",children:[p.map((m,g)=>h.jsx("div",{className:"w-full h-full ",children:h.jsx(_He,{user:m,className:"rounded-lg  "},g)},g)),h.jsx("div",{className:"h-full w-full px-5 py-2 flex flex-col justify-end",children:h.jsx(CHe,{setCameraOn:c,setMicOn:a,cameraOn:s,micOn:o,setCalling:i})})]}),h.jsx("div",{className:"w-[20%] h-full flex flex-col justify-end",children:h.jsx("div",{className:"w-full h-[30vh]",children:h.jsx(yHe,{cameraOn:s,micOn:o,videoTrack:u,audioTrack:l,className:"rounded-lg",children:h.jsx("samp",{className:"pr-2 flex justify-end text-white text-2xl",children:"you"})})})})]})})}function CHe(e){const{setMicOn:t,setCameraOn:r,micOn:n,cameraOn:i,setCalling:o}=e;return h.jsx("div",{className:"w-full h-[10vh] bg-white bg-opacity-20 rounded-lg  flex flex-between gap-2 ",children:h.jsxs("div",{className:"w-full h-full flex justify-center gap-4 p-4",children:[h.jsx("div",{className:`callButton ${n?"bg-red-500":"bg-white"}  w-[10%] h-full flex items-center justify-center`,onClick:a=>t(!n),children:h.jsx(ZNe,{})}),h.jsx("button",{className:`callButton ${i?"bg-red-500":"bg-white"}  w-[10%] h-full flex items-center justify-center`,onClick:a=>r(!i),children:h.jsx(kTe,{})}),h.jsx("button",{type:"button",className:"callButton bg-red-500  w-[10%] h-full flex items-center justify-center",onClick:a=>o(s=>!s),children:h.jsx(JNe,{})})]})})}function RHe(){const{firstName:e}=oi(t=>t.patient);return h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:h.jsxs("div",{className:"doctor details flex flex-col gap-4",children:[h.jsxs("h1",{className:"w-[60%] h-[20vh] flex item-center p-2 rounded-lg bg-red-400 ",children:[`you have a meeting ${e}`,"  "]}),h.jsx("div",{className:"content w-full h-full flex"})]})})})}function IHe(){return h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full flex flex-col p-2",children:h.jsxs("div",{className:"meetingAlert w-full h-full flex flex-col gap-2",children:[h.jsx("h2",{className:"w-[80%] h-[8vh] text-lg font-medium flex items-center pl-10 bg-blue-500",children:"Notifications"}),h.jsx("div",{className:"alerts flex flex-col hap-2",children:h.jsx(RHe,{})})]})})})}dt.extend(tc);function xHe(e){var n,i,o,a,s,c;const{booking:t}=e,r=en();return console.log("test date",dt().add(2,"hour").isBefore(dt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))),h.jsx("div",{className:"w-full h-full ",children:h.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[h.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:h.jsx("img",{src:(n=t==null?void 0:t.patientId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),h.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[h.jsx("div",{className:"w-full h-auto",children:h.jsx("h4",{children:(i=t==null?void 0:t.patientId)==null?void 0:i.firstName})}),h.jsx("div",{className:"location w-full h-auto",children:h.jsxs("div",{className:"flex gap-4 items-start",children:[h.jsx(jm,{}),h.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[h.jsx("span",{className:"flex items-center",children:(a=(o=t==null?void 0:t.patientId)==null?void 0:o.addressId)==null?void 0:a.place}),h.jsx("span",{className:"flex items-center",children:(c=(s=t==null?void 0:t.patientId)==null?void 0:s.addressId)==null?void 0:c.district})]})]})})]}),h.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[h.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[h.jsx(bv,{}),h.jsx("span",{children:`Completed On ${t==null?void 0:t.slotDate} ${dt(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),h.jsxs("div",{className:"w-full h-auto flex flex-between gap-4",children:[h.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:l=>r(`/doctor/bookings/prescription/${t.patientId.userId}/${t._id}`),children:"Add Prescription"}),h.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",onClick:l=>r(`/doctor/bookings/labtest/${t.patientId.userId}/${t._id}`),children:"Request Lab Tests"}),h.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",onClick:l=>r(`/doctor/bookings/medicine/${t.patientId._id}/${t._id}`),children:"Request Medicines"})]})]})]})})}function AHe(){const[e,t]=C.useState([]),r=async()=>{const n=await QOe();t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-4 p-5",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[90%] h-[25vh]",children:h.jsx(xHe,{booking:n})},i))})})}const ZL="https://hcompanion.onrender.com/api",eM=sessionStorage.getItem("token"),NHe=async({patientId:e})=>{var t,r,n;try{return(await be.post(`${ZL}/doctor/patient/getDetails`,{patientId:e},{headers:{authorization:`bearer ${eM}`}})).data.patientDetails}catch(i){return console.log(i),((t=i==null?void 0:i.response)==null?void 0:t.status)=="500"&&((n=(r=i==null?void 0:i.response)==null?void 0:r.data)!=null&&n.errorServer)&&re.fire("Server Error","","error"),!1}},OHe=async({patientId:e,disease:t,prescription:r,bookingId:n})=>{var i,o,a;try{const s=await be.post(`${ZL}/doctor/patient/prescription/add`,{patientId:e,disease:t,prescription:r,bookingId:n},{headers:{authorization:`bearer ${eM}`}});return!0}catch(s){return console.log(s),((i=s==null?void 0:s.response)==null?void 0:i.status)=="500"&&((a=(o=s==null?void 0:s.response)==null?void 0:o.data)!=null&&a.errorServer)&&re.fire("Server Error","","error"),!1}},kHe=async({bookingId:e})=>{var t,r,n;try{const i=await be.post(`${ZL}/doctor/patient/prescription/onLoad/view`,{bookingId:e},{headers:{authorization:`bearer ${eM}`}});return console.log(i),i.data.prescription}catch(i){return console.log(i),((t=i==null?void 0:i.response)==null?void 0:t.status)=="500"&&((n=(r=i==null?void 0:i.response)==null?void 0:r.data)!=null&&n.errorServer)&&re.fire("Server Error","","error"),!1}};function PHe(){const[e,t]=C.useState(void 0),[r,n]=C.useState(void 0),{patientId:i,bookingId:o}=Em(),a=qn({initialValues:{disease:"",prescription:""},validationSchema:"",onSubmit:async(c,l)=>{await OHe({...c,patientId:r,bookingId:o})&&re.fire("Added Prescription","","success")}}),s=async()=>{const c=await NHe({patientId:i});n(c._id);const l=await kHe({bookingId:o});l&&(a.setFieldValue("disease",l.disease),a.setFieldValue("prescription",l.prescription)),t(c)};return C.useEffect(()=>{s()},[]),h.jsx("div",{className:"w-full h-full flex ",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:h.jsxs("div",{className:"patient profile w-full h-full flex flex-col gap-4",children:[h.jsxs("div",{className:"w-full h-[10vh] flex gap-10 items-center",children:[h.jsx("div",{className:"w-[5vw] h-[10vh] ",children:h.jsx("img",{src:e==null?void 0:e.profileImage,alt:"patientprofile",className:"w-full h-full rounded-full"})}),h.jsx("div",{className:"details w-full h-full flex flex-col justify-center ",children:h.jsx("h1",{className:"w-full h-[70%] pl-10 bg-blue-500 flex items-center text-lg font-medium",children:`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName}`})})]}),h.jsx("div",{className:"prescription w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex justify-center bg-black bg-opacity-30",children:h.jsxs("form",{onSubmit:a.handleSubmit,className:"w-[70%] h-full p-4 flex flex-col gap-5",children:[h.jsx("h1",{className:"w-full h-[5vh] pl-10 bg-orange-500 flex items-center text-lg font-medium",children:"Prescription"}),h.jsx(He,{variant:"filled",label:"disease",name:"disease",value:a.values.disease,onChange:a.handleChange,onBlur:a.handleBlur}),h.jsx("textarea",{rows:"10",placeholder:"Prescription",name:"prescription",value:a.values.prescription,onChange:a.handleChange,onBlur:a.handleBlur}),h.jsx("button",{className:"bg-orange-500 w-[50%] h-[7vh]",type:"submit",children:"Add"})]})})})]})})})}const Yre="https://hcompanion.onrender.com/api",DHe=sessionStorage.getItem("token"),LHe=async()=>{try{const e=await be.get(`${Yre}/patient/medicines/getAllMedicines`);return console.log(e),e.data.medicines}catch(e){console.log(e)}},MHe=async({patientId:e,pharmacyInventoryId:t,bookingId:r})=>{var n,i,o;try{const a=await be.post(`${Yre}/doctor/patient/medicine/request`,{patientId:e,pharmacyInventoryId:t,bookingId:r},{headers:{Authorization:`bearer ${DHe}`}});return console.log(a),!0}catch(a){return console.log(a),((n=a==null?void 0:a.response)==null?void 0:n.status)=="500"&&((o=(i=a==null?void 0:a.response)==null?void 0:i.data)!=null&&o.errorServer)&&re.fire("Server Error","","error"),!1}};function jHe(e){const{medicine:t,patientId:r,bookingId:n}=e,i=async(o,a)=>{await MHe({patientId:r,bookingId:n,pharmacyInventoryId:a._id})&&re.fire("Requested Medicine","","success")};return h.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:h.jsxs("div",{className:"h-full w-full flex flex-col ",children:[h.jsx("div",{className:"w-full h-[50%] ",children:h.jsx("img",{src:t.medicineImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[h.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[h.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t.medicineId.medicineName}),h.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:h.jsx("div",{className:"price w-full h-[5vh]",children:h.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[h.jsx(Dm,{})," ",t.sellingPrice]})})})]}),h.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:h.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:o=>i(o,t),children:"Prescribe Medicine"})})]})]})})}function UHe(){en();const{patientId:e,bookingId:t}=Em(),[r,n]=C.useState([]),i=async()=>{const o=await LHe();o.length>0&&await n(o)};return C.useEffect(()=>{i()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"medicinesList w-full h-full flex flex px-20 py-5 ",children:h.jsx("div",{className:"w-full h-full p-4 grid grid-cols-3 justify-items-center gap-y-10 ",children:r&&r.length>0?r.map((o,a)=>h.jsx("div",{className:"w-auto h-[40vh] flex flex-col cursor-pointer hover:bg-slate-400 rounded-lg",children:h.jsx(jHe,{medicine:o,patientId:e,bookingId:t},o._id)},o._id)):h.jsx("span",{className:"text-lg font-medium",children:"No Medicines.....:)"})})})})}function FHe(e){const{order:t}=e,r=async(n,i)=>{const o=await y2({amount:t.doctorId.bookingPrice});if(o){const a=TCe({order:o,medicineOrder:t});await new Razorpay(a).open()}};return h.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:h.jsxs("div",{className:"h-full w-full flex flex-col ",children:[h.jsx("div",{className:"w-full h-[50%] ",children:h.jsx("img",{src:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[h.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[h.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t.pharmacyInventoryId.medicineId.medicineName}),h.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:h.jsx("div",{className:"price w-full h-[5vh]",children:h.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[h.jsx(Dm,{})," ",t.pharmacyInventoryId.sellingPrice]})})})]}),h.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:h.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:n=>r(n,t.pharmacyInventoryId._id),children:"Order Medicine"})})]})]})})}function VHe(){const[e,t]=C.useState([]),r=async()=>{const n=await MTe();console.log(n),n&&t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-2",children:[h.jsx("h1",{className:"w-full h-[6vh] bg-blue-500 flex items-center pl-10",children:"Prescribed Medicines"}),h.jsx("div",{className:"w-full h-full flex gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>h.jsx("div",{className:"w-auto h-auto flex",children:h.jsx(FHe,{order:n})},i))})]})})}function BHe(){return h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[h.jsx(Ar,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"requests",children:"Requests"}),h.jsx(Ar,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"ordered",children:"Ordered"})]})})}function $He(){return h.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[h.jsx("div",{className:"header w-full h-[5vh]",children:h.jsx(BHe,{})}),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx(eo,{})})]})}function HHe(e){var r,n;const{order:t}=e;return h.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-xl rounded-lg border  ",children:h.jsxs("div",{className:"h-full w-full flex flex-col ",children:[h.jsx("div",{className:"w-full h-[50%] ",children:h.jsx("img",{src:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[h.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[h.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:(n=(r=t==null?void 0:t.pharmacyInventoryId)==null?void 0:r.medicineId)==null?void 0:n.medicineName}),h.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:h.jsx("div",{className:"price w-full h-[5vh]",children:h.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[h.jsx(Dm,{})," ",t.pharmacyInventoryId.sellingPrice]})})})]}),h.jsx("div",{className:"w-full h-[8vh] flex  px-2 py-1 mb-2 ",children:h.jsx("h2",{className:"text-md font-bold text-emerald-500 w-full p-5 bg-blue-100",children:(t==null?void 0:t.orderStatus)=="1"?"Pending Delivery":"Delivered"})})]})]})})}function zHe(){const[e,t]=C.useState([]),r=async()=>{const n=await UTe();console.log(n),n&&t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:h.jsx("div",{className:"w-full h-full grid grid-cols-3 gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>h.jsx("div",{className:"w-auto h-auto flex",children:h.jsx(HHe,{order:n})},i))})})})}function GHe(){return h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[h.jsx(Ar,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"requested",children:"Received"}),h.jsx(Ar,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"delivered",children:"Delivered"})]})})}function WHe(){return h.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[h.jsx("div",{className:"w-full h-[8vh] p-5",children:h.jsx(GHe,{})}),h.jsx("div",{className:"w-full h-full mt-5 pb-2",children:h.jsx(eo,{})})]})}const tM="https://hcompanion.onrender.com/api",rM=sessionStorage.getItem("token"),KHe=async()=>{try{const e=await be.get(`${tM}/pharmacy/order/medicines/requests`,{headers:{Authorization:`bearer ${rM}`}});return console.log(e),e.data.medicines}catch(e){return console.log(e),!1}},qHe=async({pharmacyInventoryId:e})=>{try{const t=await be.post(`${tM}/pharmacy/order/medicines/deliver`,{pharmacyInventoryId:e},{headers:{Authorization:`bearer ${rM}`}});return!0}catch(t){return console.log(t),!1}},YHe=async()=>{try{const e=await be.get(`${tM}/pharmacy/order/medicines/delivered`,{headers:{Authorization:`bearer ${rM}`}});return console.log("delivered Medicines",e),e.data.medicines}catch(e){return console.log(e),!1}};function XHe(e){const{order:t}=e,r=async n=>{await qHe({pharmacyInventoryId:t.pharmacyInventoryId})&&re.fire("Updated as Delivered","","success")};return h.jsx("div",{className:"w-full h-full flex flex-col shadow-xl rounded-lg border ",children:h.jsxs("div",{className:"h-full w-full flex gap-2 ",children:[h.jsx("div",{className:"w-[30%] h-full ",children:h.jsx("img",{src:t==null?void 0:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-full flex flex-1 flex-col gap-4 mt-2 p-1 ",children:[h.jsxs("div",{className:"w-full h-auto flex gap-10 items-center p-2 bg-blue-500",children:[h.jsx("div",{className:"w-[3vw] h-[6vh]",children:h.jsx("img",{src:t.patientId.profileImage,alt:"",className:"w-full h-full rounded-full"})}),h.jsxs("div",{className:"w-auto h-auto",children:[h.jsx("h2",{className:"text-lg font-medium",children:`${t.patientId.firstName} ${t.patientId.lastName}`}),h.jsx("h2",{})]})]}),h.jsx("div",{className:"content w-full h-[10vh] flex flex-col pl-4 gap-2  ",children:h.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t==null?void 0:t.pharmacyInventoryId.medicineId.medicineName})}),h.jsx("div",{className:"w-full h-[8vh] flex  px-2 py-1 mb-2 ",children:h.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:n=>r(),children:"Delivered"})})]})]})})}function JHe(){const[e,t]=C.useState([]),r=async()=>{const n=await KHe();n&&t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex p-2",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-5",children:h.jsx("div",{className:"orders w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full grid grid-cols-1",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[80%] h-[30vh]",children:h.jsx(XHe,{order:n})},i))})})})})}function QHe(e){const{order:t}=e;return h.jsx("div",{className:"w-full h-full flex flex-col shadow-xl rounded-lg border ",children:h.jsxs("div",{className:"h-full w-full flex gap-2 ",children:[h.jsx("div",{className:"w-[30%] h-full ",children:h.jsx("img",{src:t==null?void 0:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-full flex flex-1 flex-col gap-4 mt-2 p-1 ",children:[h.jsxs("div",{className:"w-full h-auto flex gap-10 items-center p-2 bg-blue-500",children:[h.jsx("div",{className:"w-[3vw] h-[6vh]",children:h.jsx("img",{src:t.patientId.profileImage,alt:"",className:"w-full h-full rounded-full"})}),h.jsxs("div",{className:"w-auto h-auto",children:[h.jsx("h2",{className:"text-lg font-medium",children:`${t.patientId.firstName} ${t.patientId.lastName}`}),h.jsx("h2",{})]})]}),h.jsx("div",{className:"content w-full h-[10vh] flex flex-col pl-4 gap-2  ",children:h.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t==null?void 0:t.pharmacyInventoryId.medicineId.medicineName})}),h.jsx("div",{className:"w-full h-[8vh] flex  px-2 py-1 mb-2 ",children:h.jsx("h2",{className:"text-md font-bold text-emerald-500 w-full p-5 bg-blue-100",children:"Delivered"})})]})]})})}function ZHe(){const[e,t]=C.useState([]),r=async()=>{const n=await YHe();n&&t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex p-2",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-5",children:h.jsx("div",{className:"orders w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full grid grid-cols-1",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[80%] h-[30vh]",children:h.jsx(QHe,{order:n})},i))})})})})}const nM="https://hcompanion.onrender.com/api",iM=sessionStorage.getItem("token"),e7e=async()=>{var e,t,r;try{return(await be.get(`${nM}/doctor/patient/test/allTests`,{headers:{Authorization:`bearer ${iM}`}})).data.tests}catch(n){return console.log(n),((e=n==null?void 0:n.response)==null?void 0:e.status)=="500"&&((r=(t=n==null?void 0:n.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Server Error","","error"),!1}},t7e=async({testId:e})=>{try{const t=await be.post(`${nM}/doctor/patient/test/testDetails`,{testId:e},{headers:{Authorization:`bearer ${iM}`}});return console.log(t.data),t.data.testAndLabs}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&re.fire({icon:"warning",text:"Test can't be found at database"}),!1}},r7e=async({labTestId:e,patientId:t,bookingId:r})=>{var n,i;try{const o=await be.post(`${nM}/doctor/patient/test/request`,{labTestId:e,patientId:t,bookingId:r},{headers:{Authorization:`bearer ${iM}`}});return!0}catch(o){return console.log(o),o.status=="500"&&((i=(n=o==null?void 0:o.response)==null?void 0:n.data)!=null&&i.errorServer)?re.fire({icon:"error",text:"Server Issue"}):o.status=="400"&&o.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):o.status=="401"?re.fire({icon:"warning",text:"Log In"}):o.status=="404"&&o.response.data.errorTestPresent?re.fire({icon:"warning",text:"Test can't be found at database"}):o.status=="404"&&o.response.data.errorTestOrdered&&re.fire({icon:"warning",text:"Test Already Ordered"}),!1}};function n7e(e){var o;const{test:t,patientId:r,bookingId:n}=e,i=async a=>{await r7e({labTestId:t._id,patientId:r,bookingId:n})&&re.fire("Requested Test for the patient","","success")};return h.jsx("div",{className:"flex w-full h-full ",children:h.jsxs("div",{className:"flex h-full w-[40vw] gap-6 bg-white  border rounded-lg p-4 shadow-lg",children:[h.jsx("div",{className:"image w-[20%] h-[90%]",children:h.jsx("img",{src:"/normalUser.png",alt:"image",className:"object-fit w-full h-full"})}),h.jsxs("div",{className:"details h-full w-full flex flex-1 flex-col gap-4 ",children:[h.jsx("h1",{children:(o=t==null?void 0:t.labId)==null?void 0:o.userId.username}),h.jsx("div",{className:"location"}),h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx(jm,{}),h.jsx("span",{children:"Koovappally"})]}),h.jsxs("div",{className:"flex gap-2 w-full h-auto",children:[(t==null?void 0:t.atHome)&&h.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-orange-400 p-3 rounded-md flex gap-4 items-center",children:[h.jsx("span",{children:" Home Service"}),h.jsxs("span",{className:"flex gap-2 items-center",children:[h.jsx(Fw,{}),h.jsx("h6",{children:t==null?void 0:t.priceHome})]})]}),(t==null?void 0:t.atLab)&&h.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-blue-400 p-3 rounded-md flex gap-4 items-center",children:[h.jsx("span",{children:" Lab Service"}),h.jsxs("span",{className:"flex gap-2 items-center",children:[h.jsx(Fw,{}),h.jsx("h6",{children:t==null?void 0:t.priceLab})]})]}),h.jsx("button",{className:"w-[30%] text-white text-md font-medium bg-emerald-400 p-3 rounded-md flex gap-4 items-center",onClick:a=>i(),children:"Request Test"})]})]})]})})}function i7e(){const[e,t]=C.useState([]),[r,n]=C.useState(void 0),{patientId:i,bookingId:o,testId:a}=Em();console.log("testId",a);const s=async()=>{const c=await t7e({testId:a});t(c),n(c[0].testId)};return C.useEffect(()=>{s()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"screen w-full h-full flex  gap-2 justify-between ",children:[h.jsxs("div",{className:"w-[56%] h-[80vh] flex gap-10 border p-4 shadow-lg items-center bg-emerald-400 bg-opacity-10 bg-blur-sm",children:[h.jsx("div",{className:"image h-[40vh] w-[70%]",children:h.jsx("img",{src:r==null?void 0:r.testImage,alt:"testImage",className:"w-full h-full object-fit"})}),h.jsxs("div",{className:"testDetails flex flex-col gap-2 w-full h-full justify-center",children:[h.jsxs("div",{className:"description w-full h-[10vh] border shadow-lg flex flex-col gap-2 px-1",children:[h.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Name"}),h.jsx("span",{className:"text-lg font-medium",children:r==null?void 0:r.testName.toUpperCase()})]}),h.jsxs("div",{className:"testDescription flex flex-col gap-2 border w-full h-[40vh] shadow-lg px-1",children:[h.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Description"}),h.jsx("span",{className:"h-[10vh] p-2",children:r==null?void 0:r.testDescription})]})]})]}),h.jsxs("div",{className:"laboratorys bg-black bg-opacity-10 p-3 flex flex-col gap-4 w-auto h-full border  ",children:[h.jsx("h2",{className:"text-lg text-white  font-medium flex justify-center bg-blue-500 py-2",children:"Labs where the service available"}),h.jsx("div",{className:"labs flex flex-col gap-4 h-full w-full overflow-y-auto",children:(e==null?void 0:e.length)>0&&e.map((c,l)=>h.jsx("div",{className:"w-full h-auto",children:h.jsx(n7e,{test:c,patientId:i,bookingId:o})},l))})]})]})})}function o7e(e){const{test:t,patientId:r,bookingId:n}=e;return h.jsx("div",{className:"flex w-auto h-auto border rounded-lg shadow-lg shadow-emerald-300 hover:bg-black hover:bg-opacity-10 py-5 px-3 cursor-pointer   ",children:h.jsxs("div",{className:"w-[30vw] h-auto flex flex-row gap-5 ",children:[h.jsx("div",{className:"image w-[50%] h-full flex justify-center items-center",children:h.jsx("img",{src:t==null?void 0:t.testImage,alt:"testImage",className:"object-cover w-full h-[70%]"})}),h.jsxs("div",{className:"w-full h-full content flex flex-col gap-5 bg-black bg-opacity-10 p-4",children:[h.jsx("h2",{className:"flex justify-center text-white bg-blue-500 py-3 font-medium",children:t==null?void 0:t.testName}),h.jsx("textarea",{name:"testDescription",id:"id_testDescripion",value:t==null?void 0:t.testDescription,rows:"10",className:"flex text-sm cursor-pointer border-0",disabled:!0})]})]})})}function a7e(){const[e,t]=C.useState([]),r=en(),{patientId:n,bookingId:i}=Em(),o=async()=>{const a=await e7e();t(a)};return C.useEffect(()=>{o()},[]),h.jsx("div",{className:"flex flex-col w-full h-full",children:h.jsx("div",{className:"w-full h-full grid grid-cols-2 gap-2 justify-items-start",children:(e==null?void 0:e.length)>0&&e.map((a,s)=>h.jsx("div",{className:"w-auto h-auto cursor-pointer",onClick:()=>r(`/doctor/bookings/labtest/testDetails/${n}/${i}/${a._id}`),children:h.jsx(o7e,{test:a,patientId:n,bookingId:i})},s))})})}function s7e(){return h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[h.jsx(Ar,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"requests",children:"Requests"}),h.jsx(Ar,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"ordered",children:"Ordered"})]})})}function c7e(){return h.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[h.jsx("div",{className:"header w-full h-[5vh]",children:h.jsx(s7e,{})}),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx(eo,{})})]})}function l7e(e){var n,i,o,a,s,c,l,u,d,f,p,m;const{testOrder:t}=e;console.log(t);const r=async(g,y)=>{const v=await y2({amount:100});if(v){const E=CCe({order:v,testOrder:t});await new Razorpay(E).open()}};return h.jsx("div",{className:"w-full h-full flex ",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[h.jsxs("div",{className:"w-full h-auto flex gap-2",children:[h.jsx("div",{className:"img w-[30%] h-full",children:h.jsx("img",{src:(i=(n=t==null?void 0:t.labTestId)==null?void 0:n.testId)==null?void 0:i.testImage,alt:"test image",className:"w-full h-full object-fit"})}),h.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[h.jsx("div",{className:"w-full h-auto flex ",children:h.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[h.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(a=(o=t==null?void 0:t.labTestId)==null?void 0:o.testId)==null?void 0:a.testName}),h.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),h.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[h.jsx("div",{className:"description w-[60%] bg-black bg-opacity-20 p-2",children:h.jsx("h2",{className:"w-full h--full",children:(c=(s=t==null?void 0:t.labTestId)==null?void 0:s.testId)==null?void 0:c.testDescription})}),h.jsxs("div",{className:"pharmacy w-[40%] flex flex-col gap-2 p-1",children:[h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((u=(l=t==null?void 0:t.labTestId)==null?void 0:l.labId)==null?void 0:u.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(f=(d=t==null?void 0:t.labTestId)==null?void 0:d.labId)==null?void 0:f.laboratoryName})]}),h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(OT,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:"koovappally"})]})}),h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((p=t==null?void 0:t.doctorId)==null?void 0:p.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`prescribed by the doctor ${(m=t==null?void 0:t.doctorId)==null?void 0:m.firstName}`})]})]})]})]})]}),h.jsx("div",{className:"w-full h-[5vh] flex gap-2",children:h.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",onClick:g=>r(g,t._id),children:"Order Test"})})]})})}function u7e(){const[e,t]=C.useState([]),r=async()=>{const n=await vCe();console.log(n),n&&await t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"requestedTests flex flex-col gap-4",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[90%] h-auto",children:h.jsx(l7e,{testOrder:n})},i))})})})}function d7e(){return h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[h.jsx(Ar,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"test/ordered",children:"Received"}),h.jsx(Ar,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"test/completed",children:"Serviced"})]})})}function h7e(){return h.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[h.jsx("div",{className:"w-full h-[8vh] p-5",children:h.jsx(d7e,{})}),h.jsx("div",{className:"w-full h-full mt-5 pb-2",children:h.jsx(eo,{})})]})}function f7e(e){var n,i,o,a,s,c,l,u,d,f,p,m,g,y,v,E;const{testOrder:t}=e;console.log(t);const r=async(b,S)=>{await NOe({testOrderId:S})&&re.fire("Successfully Updated as completed","","success")};return h.jsx("div",{className:"w-full h-full flex ",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[h.jsxs("div",{className:"w-full h-auto flex gap-2",children:[h.jsx("div",{className:"img w-[30%] h-full",children:h.jsx("img",{src:(i=(n=t==null?void 0:t.labTestId)==null?void 0:n.testId)==null?void 0:i.testImage,alt:"test image",className:"w-full h-full object-fit"})}),h.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[h.jsx("div",{className:"w-full h-auto flex ",children:h.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[h.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(a=(o=t==null?void 0:t.labTestId)==null?void 0:o.testId)==null?void 0:a.testName}),h.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),h.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[h.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:h.jsx("h2",{className:"w-full h--full",children:(c=(s=t==null?void 0:t.labTestId)==null?void 0:s.testId)==null?void 0:c.testDescription})}),h.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((u=(l=t==null?void 0:t.labTestId)==null?void 0:l.labId)==null?void 0:u.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(f=(d=t==null?void 0:t.labTestId)==null?void 0:d.labId)==null?void 0:f.laboratoryName})]}),h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((p=t==null?void 0:t.patientId)==null?void 0:p.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Ordered by ${(m=t==null?void 0:t.patientId)==null?void 0:m.firstName}`})]})]}),h.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(OT,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:(y=(g=t==null?void 0:t.patientId)==null?void 0:g.addressId)==null?void 0:y.place})]})}),h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(f2,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:(E=(v=t==null?void 0:t.patientId)==null?void 0:v.userId)==null?void 0:E.phone})]})})]})]})]})]}),h.jsxs("div",{className:"w-full h-[5vh] flex gap-2",children:[h.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",onClick:b=>r(b,t._id),children:"Completed"}),h.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",children:"Upload test Result"})]})]})})}function p7e(){const[e,t]=C.useState([]),r=async()=>{const n=await AOe();t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"orders w-full h-full flex flex-col gap-5 p-5",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[90%] h-auto",children:h.jsx(f7e,{testOrder:n})},i))})})})}function m7e(e){var a,s,c,l,u,d,f,p,m,g,y,v,E,b,S,A;const[t,r]=C.useState(!1),{testOrder:n}=e;console.log(n);const i=en(),o=async()=>{await I1({testOrderId:n._id})&&r(!0)};return C.useEffect(()=>{o()},[]),h.jsx("div",{className:"w-full h-full flex ",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[h.jsxs("div",{className:"w-full h-auto flex gap-2",children:[h.jsx("div",{className:"img w-[30%] h-full",children:h.jsx("img",{src:(s=(a=n==null?void 0:n.labTestId)==null?void 0:a.testId)==null?void 0:s.testImage,alt:"test image",className:"w-full h-full object-fit"})}),h.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[h.jsx("div",{className:"w-full h-auto flex ",children:h.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[h.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(l=(c=n==null?void 0:n.labTestId)==null?void 0:c.testId)==null?void 0:l.testName}),h.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${n==null?void 0:n.bookingId._id}`})]})}),h.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[h.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:h.jsx("h2",{className:"w-full h--full",children:(d=(u=n==null?void 0:n.labTestId)==null?void 0:u.testId)==null?void 0:d.testDescription})}),h.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((p=(f=n==null?void 0:n.labTestId)==null?void 0:f.labId)==null?void 0:p.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(g=(m=n==null?void 0:n.labTestId)==null?void 0:m.labId)==null?void 0:g.laboratoryName})]}),h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((y=n==null?void 0:n.patientId)==null?void 0:y.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Ordered by ${(v=n==null?void 0:n.patientId)==null?void 0:v.firstName}`})]})]}),h.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(OT,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:(b=(E=n==null?void 0:n.patientId)==null?void 0:E.addressId)==null?void 0:b.place})]})}),h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(f2,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:(A=(S=n==null?void 0:n.patientId)==null?void 0:S.userId)==null?void 0:A.phone})]})})]})]})]})]}),h.jsx("div",{className:"w-full h-[5vh] flex gap-2",children:h.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",onClick:N=>{var D;return i(`uploadResult?patientId=${n.patientId._id}&testOrderId=${n._id}&bookingId=${(D=n==null?void 0:n.bookingId)==null?void 0:D._id}&doctorId=${n.doctorId._id}`)},children:t?"View Uploaded result":"Upload test Result"})})]})})}function g7e(){const[e,t]=C.useState([]),r=async()=>{const n=await OOe();t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"orders w-full h-full flex flex-col gap-5 p-5",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[90%] h-auto",children:h.jsx(m7e,{testOrder:n})},i))})})})}function y7e(){var l,u;const e=en(),t=new URLSearchParams(location.search),r=t.get("testOrderId"),n=t.get("patientId"),i=t.get("doctorId");console.log("doctorId",i);const[o,a]=C.useState(void 0),s=qn({initialValues:{testResultDescription:""},validationSchema:DOe,onSubmit:async(d,f)=>{await POe({...d,testOrderId:r,patientId:n,doctorId:i})&&(re.fire("Result uploaded successfully","","success"),e("/laboratory/order/test/completed"))}}),c=async()=>{const d=await kOe({testOrderId:r}),f=await I1({testOrderId:r});f&&s.setFieldValue("testResultDescription",f.testResultDescription),a(d)};return C.useEffect(()=>{c()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-2 p-10",children:h.jsxs("form",{onSubmit:s.handleSubmit,className:"flex flex-col gap-10",children:[h.jsx("h1",{className:"w-full h-[8vh] p-2 flex items-center justify-center text-white text-lg font-bold bg-blue-500",children:`Test Result for the Request from ${(l=o==null?void 0:o.doctorId)==null?void 0:l.firstName} for ${(u=o==null?void 0:o.patientId)==null?void 0:u.firstName}`}),h.jsx("textarea",{rows:15,name:"testResultDescription",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.testResultDescription}),s.touched.testResultDescription&&s.errors.testResultDescription?h.jsx("span",{className:"text-red",children:s.errors.testResultDescription}):"",h.jsx("div",{className:"w-full h-[5vh] flex",children:h.jsx("button",{className:"w-full h-full flex items-center justify-center bg-orange-500",children:"Upload Result"})})]})})})}function v7e(e){var n,i,o,a,s,c,l;const{booking:t}=e;en();const r=async(u,d,f,p)=>{u.preventDefault(),await re.fire({showCancelButton:!0,confirmButtonText:"Proceed Canceling",text:"Do you want to cancel the booking",icon:"question"}).then(async m=>{m.isConfirmed&&await N1({startTime:d,slotDate:f,doctorId:p})&&(await re.fire("Canceled","Booking has been Canceled","success"),window.location.reload())})};return h.jsx("div",{className:"w-full h-full ",children:h.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[h.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:h.jsx("img",{src:(n=t==null?void 0:t.doctorId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),h.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[h.jsx("h4",{className:"text-sm font-medium opacity-40",children:"Cardiology"}),h.jsx("div",{className:"w-full h-auto",children:h.jsx("h4",{children:(o=(i=t==null?void 0:t.doctorId)==null?void 0:i.userId)==null?void 0:o.username})}),h.jsx("div",{className:"location w-full h-auto",children:h.jsxs("div",{className:"flex gap-4 items-start",children:[h.jsx(jm,{}),h.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[h.jsx("span",{className:"flex items-center",children:(s=(a=t==null?void 0:t.doctorId)==null?void 0:a.addressId)==null?void 0:s.place}),h.jsx("span",{className:"flex items-center",children:(l=(c=t==null?void 0:t.doctorId)==null?void 0:c.addressId)==null?void 0:l.district})]})]})})]}),h.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[h.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[h.jsx(bv,{}),h.jsx("span",{children:`${t==null?void 0:t.slotDate} ${dt(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),h.jsxs("div",{className:"w-full h-auto flex gap-4",children:[h.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:u=>{var d;return r(u,t==null?void 0:t.startTime,t==null?void 0:t.slotDate,(d=t==null?void 0:t.doctorId)==null?void 0:d._id)},children:"Cancel"}),dt().isAfter(dt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A"))&&dt().isBefore(dt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))&&h.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:u=>window.open(`/patient/bookings/videoConsult?patientId=${t.patientId._id}&doctorId=${t.doctorId._id}`,"_blank"),children:"Join Meeting"})]})]})]})})}function E7e(){const[e,t]=C.useState([]),r=async()=>{const n=await WOe();await t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"flex w-full h-full",children:h.jsx("div",{className:"booked flex flex-col gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>h.jsx("div",{className:"w-[60vw] h-[25vh] ",children:h.jsx(v7e,{booking:n})},i))})})}var Xre={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(zu,function(){return function(r,n,i){n.prototype.dayOfYear=function(o){var a=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return o==null?a:this.add(o-a,"day")}}})})(Xre);var _7e=Xre.exports;const Jre=ia(_7e);dt.extend(tc);dt.extend(Jre);function b7e(e){var i,o,a,s,c,l,u,d,f,p,m,g,y,v,E,b;const{testOrder:t}=e,r=dt(t==null?void 0:t.testDoneDate.split(" (")[0]).format("D MMM, dddd YYYY h:mm A"),n=en();return h.jsx("div",{className:"w-full h-full flex ",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[h.jsxs("div",{className:"w-full h-auto flex gap-2",children:[h.jsx("div",{className:"img w-[30%] h-full",children:h.jsx("img",{src:(o=(i=t==null?void 0:t.labTestId)==null?void 0:i.testId)==null?void 0:o.testImage,alt:"test image",className:"w-full h-full object-fit"})}),h.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[h.jsx("div",{className:"w-full h-auto flex ",children:h.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[h.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(s=(a=t==null?void 0:t.labTestId)==null?void 0:a.testId)==null?void 0:s.testName}),h.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),h.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[h.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:h.jsx("h2",{className:"w-full h--full",children:(l=(c=t==null?void 0:t.labTestId)==null?void 0:c.testId)==null?void 0:l.testDescription})}),h.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((d=(u=t==null?void 0:t.labTestId)==null?void 0:u.labId)==null?void 0:d.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(p=(f=t==null?void 0:t.labTestId)==null?void 0:f.labId)==null?void 0:p.laboratoryName})]}),h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((m=t==null?void 0:t.doctorId)==null?void 0:m.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Requested by ${(g=t==null?void 0:t.doctorId)==null?void 0:g.firstName}`})]})]}),h.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(OT,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:(v=(y=t==null?void 0:t.patientId)==null?void 0:y.addressId)==null?void 0:v.place})]})}),h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(f2,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:(b=(E=t==null?void 0:t.patientId)==null?void 0:E.userId)==null?void 0:b.phone})]})})]})]})]})]}),h.jsxs("div",{className:"w-full h-[5vh] flex gap-2",children:[(t==null?void 0:t.orderStatus)=="2"?h.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",onClick:S=>{var A;return n(`uploadResult?patientId=${t.patientId._id}&testOrderId=${t._id}&bookingId=${(A=t==null?void 0:t.bookingId)==null?void 0:A._id}&doctorId=${t.doctorId._id}`)},children:"View test Result"}):h.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",children:"need to be Completed"}),h.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",children:`ordered on ${r}`})]})]})})}function w7e(){const[e,t]=C.useState([]),r=async()=>{const n=await _Ce();console.log(n),n&&await t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"requestedTests flex flex-col gap-4",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[90%] h-auto",children:h.jsx(b7e,{testOrder:n})},i))})})})}function S7e(){const[e,t]=C.useState(),r=qn({initialValues:{place:"",state:"",country:"",pincode:"",district:"",phone:""},validationSchema:zTe,onSubmit:async(i,o)=>{console.log("values",i),await Swe(i)&&re.fire("Profile has been Update","","success")}}),n=async()=>{const i=await wwe();r.setFieldValue("place",i._doc.place),r.setFieldValue("district",i._doc.district),r.setFieldValue("state",i._doc.state),r.setFieldValue("pincode",i._doc.pincode),r.setFieldValue("country",i._doc.country),r.setFieldValue("phone",i.phone),t(i)};return C.useEffect(()=>{n()},[]),h.jsx("div",{className:"screen w-full h-full flex flex-col p-10",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-4 justify-center pl-20  ",children:[h.jsx("h1",{className:"font-medium mb-2",children:"Address"}),h.jsxs("div",{className:"w-[60%] flex flex-col gap-2",children:[h.jsx(He,{variant:"filled",name:"place",label:"Place",className:"w-full ",value:r.values.place,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.place&&r.errors.place?{color:"error",helperText:r.errors.place}:{color:"success"}}),h.jsx(He,{variant:"filled",name:"state",label:"state",className:"w-full ",value:r.values.state,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.state&&r.errors.state?{color:"error",helperText:r.errors.state}:{color:"success"}}),h.jsx(He,{variant:"filled",name:"district",label:"district",className:"w-full ",value:r.values.pincode,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.district&&r.errors.district?{color:"error",helperText:r.errors.district}:{color:"success"}}),h.jsx(He,{variant:"filled",name:"country",label:"country",className:"w-full ",value:r.values.country,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.country&&r.errors.country?{color:"error",helperText:r.errors.country}:{color:"success"}}),h.jsx(He,{variant:"filled",name:"pincode",label:"pincode",className:"w-full ",value:r.values.pincode,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.pincode&&r.errors.pincode?{color:"error",helperText:r.errors.pincode}:{color:"success"}})]}),h.jsx("h1",{className:"mt-5 font-medium mb-2",children:"Phone Details"}),h.jsx("div",{className:"w-[60%] flex flex-col gap-2",children:h.jsx(He,{variant:"filled",name:"phone",label:"phone",className:"w-full ",value:r.values.phone,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.phone&&r.errors.phone?{color:"error",helperText:r.errors.phone}:{color:"success"}})}),h.jsx("button",{type:"button",onClick:r.handleSubmit,className:"w-[60%] h-[5vh] border font-medium rounded-[5%] bg-orange-500 p-2 ",children:"Save"})]})})}function T7e(){var l;const e=en(),t=new URLSearchParams(location.search),r=t.get("testOrderId"),n=t.get("patientId"),i=t.get("doctorId");console.log("doctorId",i);const[o,a]=C.useState(void 0),s=qn({initialValues:{testResultDescription:""},validationSchema:"",onSubmit:async(u,d)=>{await laboratory_uploadTestResultService({...u,testOrderId:r,patientId:n,doctorId:i})&&(re.fire("Result uploaded successfully","","success"),e("/laboratory/order/test/completed"))}}),c=async()=>{const u=await wCe({testOrderId:r}),d=await bCe({testOrderId:r});d&&s.setFieldValue("testResultDescription",d.testResultDescription),a(u)};return C.useEffect(()=>{c()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-2 p-10",children:h.jsxs("form",{onSubmit:s.handleSubmit,className:"flex flex-col gap-10",children:[h.jsx("h1",{className:"w-full h-[8vh] p-2 flex items-center justify-center text-white text-lg font-bold bg-blue-500",children:`Test Result for ${(l=o==null?void 0:o.patientId)==null?void 0:l.firstName}`}),h.jsx("textarea",{rows:15,name:"testResultDescription",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.testResultDescription}),s.touched.testResultDescription&&s.errors.testResultDescription?h.jsx("span",{className:"text-red",children:s.errors.testResultDescription}):""]})})})}const Qre="https://hcompanion.onrender.com/api",C7e=async()=>{var e,t,r;try{return(await be.get(`${Qre}/patient/doctor/prescriptions`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.prescriptions}catch(n){return console.log(n),((e=n.response)==null?void 0:e.status)=="500"&&((r=(t=n.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Server Error","","error"),!1}},R7e=async({bookingId:e})=>{var t,r,n;try{const i=await be.post(`${Qre}/patient/doctor/prescription/details/booking`,{bookingId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("prescription details",i.data.prescription),i.data.prescription}catch(i){return console.log(i),((t=i.response)==null?void 0:t.status)=="500"&&((n=(r=i.response)==null?void 0:r.data)!=null&&n.errorServer)&&re.fire("Server Error","","error"),!1}};dt.extend(tc);dt.extend(Jre);function I7e(e){var i,o,a;const{prescription:t}=e,r=dt(t==null?void 0:t.updatedAt).format("D MMM, dddd YYYY h:mm A"),n=en();return h.jsx("div",{className:"w-full h-full flex flex-col shadow-xl rounded-lg border ",children:h.jsxs("div",{className:"h-full w-full flex gap-2 ",children:[h.jsx("div",{className:"w-[15%] h-full ",children:h.jsx("img",{src:(i=t==null?void 0:t.doctorId)==null?void 0:i.profileImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-full flex flex-1 flex-col gap-4 mt-2 p-1 ",children:[h.jsxs("div",{className:"w-full h-auto flex gap-10 items-center p-2 ",children:[h.jsxs("div",{className:"w-[30%] h-auto bg-black bg-opacity-20 flex items-center justify-center p-2",children:[h.jsx("h2",{className:"text-lg font-medium",children:`Doctor ${(o=t==null?void 0:t.doctorId)==null?void 0:o.firstName} ${(a=t==null?void 0:t.doctorId)==null?void 0:a.lastName}`}),h.jsx("h2",{})]}),h.jsx("div",{className:"w-full flex justify-end h-auto bg-black bg-opacity-20 p-2",children:h.jsx("h2",{className:"text-lg font-medium",children:`prescription on Date ${r}`})})]}),h.jsx("div",{className:"w-full h-[8vh] flex   py-1 mb-2 ",children:h.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:s=>{var c,l;return n(`/patient/profile/prescription/details/${(l=(c=t==null?void 0:t.patientId)==null?void 0:c.userId)==null?void 0:l._id}/${t==null?void 0:t.bookingId._id}`)},children:"View Prescription"})})]})]})})}function x7e(){const[e,t]=C.useState([]),r=async()=>{const n=await C7e();t(n)};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full flex flex-col p-4",children:h.jsx("div",{className:"prescriptions w-[90%] h-full flex flex-col gap-5",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>h.jsx("div",{className:"w-full h-auto",children:h.jsx(I7e,{prescription:n})},i))})})})}function A7e(){var u,d,f,p,m;const[e,t]=C.useState(void 0),[r,n]=C.useState(void 0),[i,o]=C.useState(void 0),{patientId:a,bookingId:s}=Em(),c=qn({initialValues:{disease:"",prescription:""},validationSchema:"",onSubmit:async(g,y)=>{}}),l=async()=>{const g=await QX({patientId:a});n(g._id);const y=await R7e({bookingId:s});o(y),y&&(c.setFieldValue("disease",y.disease),c.setFieldValue("prescription",y.prescription)),t(g)};return C.useEffect(()=>{l()},[]),h.jsx("div",{className:"w-full h-full flex ",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:h.jsxs("div",{className:"patient profile w-full h-full flex flex-col gap-4",children:[h.jsxs("div",{className:"w-full h-[10vh] flex gap-10 items-center",children:[h.jsx("div",{className:"w-[5vw] h-[10vh] ",children:h.jsx("img",{src:(u=i==null?void 0:i.doctorId)==null?void 0:u.profileImage,alt:"patientprofile",className:"w-full h-full rounded-full"})}),h.jsxs("div",{className:"details w-full h-full flex items-center  gap-10",children:[h.jsx("h1",{className:"w-full h-[70%] pl-10 bg-black bg-opacity-20 flex items-center text-lg font-medium",children:`Doctor ${(d=i==null?void 0:i.doctorId)==null?void 0:d.firstName} ${(f=i==null?void 0:i.doctorId)==null?void 0:f.lastName}`}),h.jsx("h1",{className:"w-full h-[70%] pl-10 bg-black bg-opacity-20 flex items-center text-lg font-medium",children:`Consulted on ${(p=i==null?void 0:i.bookingId)==null?void 0:p.slotDate} ${(m=i==null?void 0:i.bookingId)==null?void 0:m.startTime}`})]})]}),h.jsx("div",{className:"prescription w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex justify-center bg-black bg-opacity-30",children:h.jsxs("form",{onSubmit:c.handleSubmit,className:"w-[70%] h-full p-4 flex flex-col gap-5",children:[h.jsx("h1",{className:"w-full h-[5vh] pl-10 bg-orange-500 flex items-center text-lg font-medium",children:"Prescription"}),h.jsx(He,{variant:"filled",label:"disease",name:"disease",value:c.values.disease,onChange:c.handleChange,onBlur:c.handleBlur}),h.jsx("textarea",{rows:"10",placeholder:"Prescription",name:"prescription",value:c.values.prescription,onChange:c.handleChange,onBlur:c.handleBlur})]})})})]})})})}function N7e(){const[e,t]=C.useState(""),r=qn({initialValues:{pharmacyName:"",ownerName:""},validationSchema:Ii().shape({}),onSubmit:async(o,a)=>{console.log("values",o),await tTe(o)&&(re.fire({icon:"success",text:"The profile has been updated"}),i())}}),n=o=>{const a=o.target.files[0],s=new FileReader;s.onload=c=>{t(c.target.result),r.setFieldValue("profileImage",a)},s.readAsDataURL(o.target.files[0])},i=async()=>{const o=await SJ();r.setFieldValue("pharmacyName",o.pharmacyName),r.setFieldValue("ownerName",o.ownerName),t(o.profileImage)};return C.useEffect(()=>{i()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full flex flex-col items-center",children:h.jsxs("form",{className:"w-[50%] h-full flex flex-col gap-6 pt-10 ",children:[h.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[h.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),h.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:h.jsx("div",{className:"flex flex-col gap-1",children:h.jsx(zh,{helperText:"Choose an Image",name:"profileImage",onChange:n})})})]}),h.jsx(He,{variant:"filled",label:"First Name",name:"firstName",value:r.values.pharmacyName,onChange:r.handleChange}),h.jsx(He,{variant:"filled",label:"Last Name",name:"lastName",value:r.values.ownerName,onChange:r.handleChange}),h.jsxs("button",{type:"button",onClick:r.handleSubmit,className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(Gh,{}),"Save"]})]})})})}function O7e(){var r;const e=qn({initialValues:{place:"",state:"",district:"",country:"",pincode:"",houseName:"",phone:""},validationSchema:Ii().shape({}),onSubmit:async(n,i)=>{await nTe(n)&&t()}}),t=async()=>{const{phone:n,...i}=await rTe();console.log("temp contact",i._doc),e.setFieldValue("place",i._doc.place),e.setFieldValue("state",i._doc.state),e.setFieldValue("district",i._doc.district),e.setFieldValue("country",i._doc.country),e.setFieldValue("pincode",i._doc.pincode?i._doc.pincode:""),e.setFieldValue("houseName",i._doc.houseName),e.setFieldValue("phone",n)};return C.useEffect(()=>{t()},[]),h.jsx("div",{className:"w-full h-full",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-4 items-center pt-10",children:[h.jsx("div",{className:"w-[70%] ",children:h.jsx("h1",{className:"text-lg font-medium",children:"Address"})}),h.jsxs("form",{className:"w-[70%]  grid grid-cols-2 gap-4",children:[h.jsx(He,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:(r=e.values)==null?void 0:r.houseName}),h.jsx(He,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),h.jsx(He,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),h.jsx(He,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),h.jsx(He,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),h.jsx(He,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]}),h.jsxs("form",{className:"w-[70%] flex flex-col pt-10",children:[h.jsx("div",{children:h.jsx("h1",{className:"text-lg font-medium",children:"Contact Details"})}),h.jsx("div",{className:"w-[30%] flex flex-col gap-4 mt-5 ",children:h.jsx(He,{variant:"filled",label:"Phone",className:"font-bold",name:"phone",onChange:e.handleChange,value:e.values.phone})})]}),h.jsxs("button",{type:"button",onClick:e.handleSubmit,className:"w-[70%] text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(Gh,{}),"Save"]})]})})}function k7e(){return h.jsxs("div",{className:"w-full h-[10vh] px-2 text-center font-bold flex justify-center items-center gap-2 ",children:[h.jsxs(Ar,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/laboratory/profile/profileDetails ",children:[h.jsx(NT,{className:"h-full w-[5%]"}),h.jsx("span",{className:"flex flex-1",children:"Profile Details"})]}),h.jsxs(Ar,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/laboratory/profile/contactDetails",children:[h.jsx(d2,{className:"h-full w-[5%]"}),h.jsx("span",{className:"flex flex-1",children:"Contact Details"})]}),h.jsxs(Ar,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/laboratory/profile/passwordReset",children:[h.jsx(h2,{className:"h-full w-[5%]"}),h.jsx("span",{className:"flex flex-1",children:"Password Reset"})]})]})}function P7e(){return h.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[h.jsx(k7e,{}),h.jsx("div",{className:"w-full h-full mt-5 pb-2",children:h.jsx(eo,{})})]})}function D7e(){const[e,t]=C.useState(""),r=qn({initialValues:{laboratoryName:"",ownerName:"",profileImage:""},validationSchema:Ii().shape({}),onSubmit:async(o,a)=>{console.log("values",o),await hOe(o)&&(re.fire({icon:"success",text:"The profile has been updated"}),i())}}),n=o=>{const a=o.target.files[0],s=new FileReader;s.onload=c=>{t(c.target.result),r.setFieldValue("profileImage",a)},s.readAsDataURL(o.target.files[0])},i=async()=>{const o=await fOe();r.setFieldValue("laboratoryName",o.laboratoryName),r.setFieldValue("ownerName",o.ownerName),t(o.profileImage)};return C.useEffect(()=>{i()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full flex flex-col items-center",children:h.jsxs("form",{className:"w-[50%] h-full flex flex-col gap-6 pt-10 ",children:[h.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[h.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),h.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:h.jsx("div",{className:"flex flex-col gap-1",children:h.jsx(zh,{helperText:"Choose an Image",name:"profileImage",onChange:n})})})]}),h.jsx(He,{variant:"filled",label:"First Name",name:"laboratoryName",value:r.values.laboratoryName,onChange:r.handleChange}),h.jsx(He,{variant:"filled",label:"Last Name",name:"ownerName",value:r.values.ownerName,onChange:r.handleChange}),h.jsxs("button",{type:"button",onClick:r.handleSubmit,className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(Gh,{}),"Save"]})]})})})}function L7e(){var r;const e=qn({initialValues:{place:"",state:"",district:"",country:"",pincode:"",houseName:"",phone:""},validationSchema:Ii().shape({}),onSubmit:async(n,i)=>{await mOe(n)&&t()}}),t=async()=>{const{phone:n,...i}=await pOe();console.log("temp contact",i._doc),e.setFieldValue("place",i._doc.place),e.setFieldValue("state",i._doc.state),e.setFieldValue("district",i._doc.district),e.setFieldValue("country",i._doc.country),e.setFieldValue("pincode",i._doc.pincode?i._doc.pincode:""),e.setFieldValue("houseName",i._doc.houseName),e.setFieldValue("phone",n)};return C.useEffect(()=>{t()},[]),h.jsx("div",{className:"w-full h-full",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-4 items-center pt-10",children:[h.jsx("div",{className:"w-[70%] ",children:h.jsx("h1",{className:"text-lg font-medium",children:"Address"})}),h.jsxs("form",{className:"w-[70%]  grid grid-cols-2 gap-4",children:[h.jsx(He,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:(r=e.values)==null?void 0:r.houseName}),h.jsx(He,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),h.jsx(He,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),h.jsx(He,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),h.jsx(He,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),h.jsx(He,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]}),h.jsxs("form",{className:"w-[70%] flex flex-col pt-10",children:[h.jsx("div",{children:h.jsx("h1",{className:"text-lg font-medium",children:"Contact Details"})}),h.jsx("div",{className:"w-[30%] flex flex-col gap-4 mt-5 ",children:h.jsx(He,{variant:"filled",label:"Phone",className:"font-bold",name:"phone",onChange:e.handleChange,value:e.values.phone})})]}),h.jsxs("button",{type:"button",onClick:e.handleSubmit,className:"w-[70%] text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(Gh,{}),"Save"]})]})})}const M7e="https://hcompanion.onrender.com/api",j7e=async({token:e})=>{try{const t=await be.get(`${M7e}/doctor/getBasicDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.userData}catch(t){return t.response.status=="401"&&re.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}};function U7e(){const e=en(),t=Hh();oi(n=>n.user);const r=async()=>{if(sessionStorage.getItem("token")){const n=await j7e({token:sessionStorage.getItem("token")});n?t(Ao({username:n.username,email:n.email,role:n.role,isLoggedIn:!0})):Ao({})}};return C.useEffect(()=>{r()},[]),h.jsx("div",{className:"navBar w-full h-full flex flex-col",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-4 p-4 bg-emerald-400 bg-opacity-90 rounded-tr-[3%]  ",children:[h.jsxs("div",{className:"w-full h-[15vh] flex flex-row items-center gap-4  p-1  ",children:[h.jsx("img",{src:"normalUser.png",className:"rounded-full w-[4vw] h-[100%]"}),h.jsxs("div",{className:"h-full w-full pl-4 flex flex-1 flex-col justify-center gap-2 bg-white bg-opacity-40 rounded-lg ",children:[h.jsx("h2",{className:"text-lg font-bold",children:"Admin"}),h.jsx("span",{className:" font-sm",children:"admin"})]})]}),h.jsx("div",{className:"search w-full h-[5%]",children:h.jsx(He,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),h.jsxs("div",{className:"options h-full w-full mt-10 flex flex-col gap-4 font-medium text-white ",children:[h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/doctorHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{e("/doctor")},children:"Home"})]}),h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/doctorSlotSetting.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",id:"id_navSlot",onClick:()=>{e("/doctor/slot")},children:"Users"})]}),h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/doctorBookings.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/bookings")},children:"Approvals"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),t(Ao({})),e("/")},children:"sign out"})]})]})]})})}function F7e(){return h.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[h.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:h.jsx(U7e,{})}),h.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:h.jsx(eo,{})})]})}function V7e(){const{username:e}=oi(t=>t.user);return h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:h.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:h.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white ",children:[h.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome"}),h.jsx("span",{className:"text-[10vh] font-bold",children:e||" "}),h.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Offers you best doctor consultations"})]})})})})}function B7e(){const{username:e}=oi(t=>t.user);return h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:h.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:h.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white p-10 ",children:[h.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome Doctor"}),h.jsx("span",{className:"text-[10vh] font-bold",children:e}),h.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Offers you best doctor consultations"})]})})})})}function $7e(){const{username:e}=oi(t=>t.user);return h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:h.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:h.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white p-10 ",children:[h.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome"}),h.jsx("span",{className:"text-[10vh] font-bold",children:e}),h.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Laboratory Management"})]})})})})}function H7e(){return h.jsx(h.Fragment,{children:h.jsx(Dae,{children:h.jsxs(Rae,{children:[h.jsx(Ze,{path:"/login",element:h.jsx(xwe,{})}),h.jsx(Ze,{path:"/register",element:h.jsx(Uwe,{})}),"//Patient",h.jsxs(Ze,{path:"/",element:h.jsx(QSe,{}),children:[h.jsx(Ze,{path:"patient/home",element:h.jsx(V7e,{})}),h.jsx(Ze,{path:"/patient/medicines",element:h.jsx(FTe,{})}),h.jsx(Ze,{path:"/patient/medicines/medicineDetails",element:h.jsx(VTe,{})}),h.jsxs(Ze,{path:"/patient/profile",element:h.jsx($Te,{}),children:[h.jsx(Ze,{index:!0,path:"/patient/profile/details",element:h.jsx(GTe,{})}),h.jsx(Ze,{path:"/patient/profile/contactDetails",element:h.jsx(S7e,{})}),h.jsxs(Ze,{path:"/patient/profile/bookings",element:h.jsx(zOe,{}),children:[h.jsx(Ze,{path:"/patient/profile/bookings/currentBookings",element:h.jsx(qOe,{})}),h.jsx(Ze,{path:"/patient/profile/bookings/pastBookings",element:h.jsx(E7e,{})})]}),h.jsxs(Ze,{path:"/patient/profile/medicine",element:h.jsx($He,{}),children:[h.jsx(Ze,{path:"/patient/profile/medicine/requests",element:h.jsx(VHe,{})}),h.jsx(Ze,{path:"/patient/profile/medicine/ordered",element:h.jsx(zHe,{})})]}),h.jsxs(Ze,{path:"/patient/profile/test",element:h.jsx(c7e,{}),children:[h.jsx(Ze,{path:"/patient/profile/test/requests",element:h.jsx(u7e,{})}),h.jsx(Ze,{path:"/patient/profile/test/ordered",element:h.jsx(w7e,{})}),h.jsx(Ze,{path:"/patient/profile/test/ordered/uploadResult",element:h.jsx(T7e,{})})]}),h.jsx(Ze,{path:"/patient/profile/prescription",element:h.jsx(x7e,{})}),h.jsx(Ze,{path:"/patient/profile/prescription/details/:patientId/:bookingId",element:h.jsx(A7e,{})})]}),h.jsx(Ze,{path:"/patient/doctors",element:h.jsx(uCe,{}),children:h.jsx(Ze,{path:"/patient/doctors/:doctorId",element:h.jsx(RCe,{})})}),"//test",h.jsx(Ze,{path:"/patient/tests",element:h.jsx(VOe,{})}),h.jsx(Ze,{path:"/patient/tests/testDetails",element:h.jsx($Oe,{})}),h.jsx(Ze,{path:"/patient/treatmentPlan",element:h.jsx(KNe,{})}),h.jsx(Ze,{path:"/patient/alerts",element:h.jsx(IHe,{})})]}),"//video",h.jsx(Ze,{path:"/patient/bookings/videoConsult",element:h.jsx(SHe,{})}),"//pharmcacy",h.jsxs(Ze,{path:"/pharmacy",element:h.jsx(ETe,{}),children:[h.jsx(Ze,{path:"/pharmacy/home",element:h.jsx(uOe,{})}),h.jsx(Ze,{path:"/pharmacy/stock/addCategory",element:h.jsx(gTe,{})}),h.jsx(Ze,{path:"/pharmacy/stock/viewStocks",element:h.jsx(yTe,{})}),h.jsx(Ze,{path:"/pharmacy/stock/editStock",element:h.jsx(_Te,{})}),h.jsxs(Ze,{path:"/pharmacy/profile",element:h.jsx(OTe,{}),children:[h.jsx(Ze,{path:"/pharmacy/profile/profileDetails",element:h.jsx(N7e,{})}),h.jsx(Ze,{path:"/pharmacy/profile/contactDetails",element:h.jsx(O7e,{})}),h.jsx(Ze,{path:"/pharmacy/profile/passwordReset",element:h.jsx(e5,{})})]}),h.jsxs(Ze,{path:"/pharmacy/order",element:h.jsx(WHe,{}),children:[h.jsx(Ze,{path:"/pharmacy/order/requested",element:h.jsx(JHe,{})}),h.jsx(Ze,{path:"/pharmacy/order/delivered",element:h.jsx(ZHe,{})})]})]}),"//Doctor",h.jsxs(Ze,{path:"/doctor",element:h.jsx(ZTe,{}),children:[h.jsx(Ze,{path:"/doctor/slot",element:h.jsx(oCe,{})}),h.jsx(Ze,{path:"/doctor/home",element:h.jsx(B7e,{})}),h.jsxs(Ze,{path:"/doctor/profile",element:h.jsx(rOe,{}),children:[h.jsx(Ze,{path:"/doctor/profile/details",element:h.jsx(sOe,{})}),h.jsx(Ze,{path:"/doctor/profile/contact",element:h.jsx(cOe,{})}),h.jsx(Ze,{path:"/doctor/profile/resetPassword",element:h.jsx(lOe,{})})]}),h.jsxs(Ze,{path:"/doctor/bookings",element:h.jsx(XOe,{}),children:[h.jsx(Ze,{path:"/doctor/bookings/currentBookings",element:h.jsx(eke,{})}),h.jsx(Ze,{path:"/doctor/bookings/pastCompletedBookings",element:h.jsx(AHe,{})}),h.jsx(Ze,{path:"/doctor/bookings/prescription/:patientId/:bookingId",element:h.jsx(PHe,{})}),h.jsx(Ze,{path:"/doctor/bookings/medicine/:patientId/:bookingId",element:h.jsx(UHe,{})}),h.jsx(Ze,{path:"/doctor/bookings/labtest/:patientId/:bookingId",element:h.jsx(a7e,{})}),h.jsx(Ze,{path:"/doctor/bookings/labtest/testDetails/:patientId/:bookingId/:testId",element:h.jsx(i7e,{})})]})]}),"//Laboratory",h.jsxs(Ze,{path:"/laboratory",element:h.jsx(_Oe,{}),children:[h.jsx(Ze,{path:"/laboratory/home",element:h.jsx($7e,{})}),h.jsxs(Ze,{path:"/laboratory/testServices",element:h.jsx(wOe,{}),children:[h.jsx(Ze,{path:"/laboratory/testServices/addTest",element:h.jsx(LOe,{})}),h.jsx(Ze,{path:"/laboratory/testServices/viewTests",element:h.jsx(MOe,{})}),h.jsx(Ze,{path:"/laboratory/testServices/editTestDetails",element:h.jsx(UOe,{})})]}),h.jsxs(Ze,{path:"/laboratory/order",element:h.jsx(h7e,{}),children:[h.jsx(Ze,{path:"/laboratory/order/test/ordered",element:h.jsx(p7e,{})}),h.jsx(Ze,{path:"/laboratory/order/test/completed",element:h.jsx(g7e,{})}),h.jsx(Ze,{path:"/laboratory/order/test/completed/uploadResult",element:h.jsx(y7e,{})})]}),h.jsxs(Ze,{path:"/laboratory/profile",element:h.jsx(P7e,{}),children:[h.jsx(Ze,{path:"/laboratory/profile/profileDetails",element:h.jsx(D7e,{})}),h.jsx(Ze,{path:"/laboratory/profile/contactDetails",element:h.jsx(L7e,{})}),h.jsx(Ze,{path:"/laboratory/profile/passwordReset",element:h.jsx(e5,{})})]})]}),"//Admin",h.jsx(Ze,{path:"/admin",element:h.jsx(F7e,{})})]})})})}const z7e={patient_meetingAlert:!1},G7e=Im({name:"alert",initialState:z7e,reducers:{setAlert(e,t){e.patient_meetingAlert=t.payload.patient_meetingAlert}}}),W7e=G7e.reducer,K7e=yye({reducer:{user:Nye,patient:Ewe,doctor:KTe,patient_alert:W7e,pharmacy:aTe,laboratory:vOe}});iW(document.getElementById("root")).render(h.jsx(C.StrictMode,{children:h.jsx($ge,{store:K7e,children:h.jsx(H7e,{})})}))});export default q7e();
