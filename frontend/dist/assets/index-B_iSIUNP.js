var R1=Object.defineProperty;var I1=(e,t,r)=>t in e?R1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var x1=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var xm=(e,t,r)=>I1(e,typeof t!="symbol"?t+"":t,r);var G4e=x1((sa,ca)=>{function A1(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Q8(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Z8={exports:{}},Ew={},e$={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay=Symbol.for("react.element"),N1=Symbol.for("react.portal"),O1=Symbol.for("react.fragment"),k1=Symbol.for("react.strict_mode"),P1=Symbol.for("react.profiler"),D1=Symbol.for("react.provider"),L1=Symbol.for("react.context"),M1=Symbol.for("react.forward_ref"),j1=Symbol.for("react.suspense"),U1=Symbol.for("react.memo"),F1=Symbol.for("react.lazy"),C2=Symbol.iterator;function V1(e){return e===null||typeof e!="object"?null:(e=C2&&e[C2]||e["@@iterator"],typeof e=="function"?e:null)}var t$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r$=Object.assign,n$={};function Uf(e,t,r){this.props=e,this.context=t,this.refs=n$,this.updater=r||t$}Uf.prototype.isReactComponent={};Uf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Uf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function i$(){}i$.prototype=Uf.prototype;function fO(e,t,r){this.props=e,this.context=t,this.refs=n$,this.updater=r||t$}var mO=fO.prototype=new i$;mO.constructor=fO;r$(mO,Uf.prototype);mO.isPureReactComponent=!0;var R2=Array.isArray,o$=Object.prototype.hasOwnProperty,gO={current:null},a$={key:!0,ref:!0,__self:!0,__source:!0};function s$(e,t,r){var n,i={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)o$.call(t,n)&&!a$.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:ay,type:e,key:o,ref:a,props:i,_owner:gO.current}}function B1(e,t){return{$$typeof:ay,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yO(e){return typeof e=="object"&&e!==null&&e.$$typeof===ay}function $1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var I2=/\/+/g;function AT(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$1(""+e.key):t.toString(36)}function LE(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ay:case N1:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+AT(a,0):n,R2(i)?(r="",e!=null&&(r=e.replace(I2,"$&/")+"/"),LE(i,t,r,"",function(l){return l})):i!=null&&(yO(i)&&(i=B1(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(I2,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",R2(e))for(var s=0;s<e.length;s++){o=e[s];var c=n+AT(o,s);a+=LE(o,t,r,c,i)}else if(c=V1(e),typeof c=="function")for(e=c.call(e),s=0;!(o=e.next()).done;)o=o.value,c=n+AT(o,s++),a+=LE(o,t,r,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function sv(e,t,r){if(e==null)return e;var n=[],i=0;return LE(e,n,"","",function(o){return t.call(r,o,i++)}),n}function H1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fo={current:null},ME={transition:null},W1={ReactCurrentDispatcher:fo,ReactCurrentBatchConfig:ME,ReactCurrentOwner:gO};function c$(){throw Error("act(...) is not supported in production builds of React.")}Zt.Children={map:sv,forEach:function(e,t,r){sv(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return sv(e,function(){t++}),t},toArray:function(e){return sv(e,function(t){return t})||[]},only:function(e){if(!yO(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Zt.Component=Uf;Zt.Fragment=O1;Zt.Profiler=P1;Zt.PureComponent=fO;Zt.StrictMode=k1;Zt.Suspense=j1;Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W1;Zt.act=c$;Zt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=r$({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=gO.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)o$.call(t,c)&&!a$.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];n.children=s}return{$$typeof:ay,type:e.type,key:i,ref:o,props:n,_owner:a}};Zt.createContext=function(e){return e={$$typeof:L1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:D1,_context:e},e.Consumer=e};Zt.createElement=s$;Zt.createFactory=function(e){var t=s$.bind(null,e);return t.type=e,t};Zt.createRef=function(){return{current:null}};Zt.forwardRef=function(e){return{$$typeof:M1,render:e}};Zt.isValidElement=yO;Zt.lazy=function(e){return{$$typeof:F1,_payload:{_status:-1,_result:e},_init:H1}};Zt.memo=function(e,t){return{$$typeof:U1,type:e,compare:t===void 0?null:t}};Zt.startTransition=function(e){var t=ME.transition;ME.transition={};try{e()}finally{ME.transition=t}};Zt.unstable_act=c$;Zt.useCallback=function(e,t){return fo.current.useCallback(e,t)};Zt.useContext=function(e){return fo.current.useContext(e)};Zt.useDebugValue=function(){};Zt.useDeferredValue=function(e){return fo.current.useDeferredValue(e)};Zt.useEffect=function(e,t){return fo.current.useEffect(e,t)};Zt.useId=function(){return fo.current.useId()};Zt.useImperativeHandle=function(e,t,r){return fo.current.useImperativeHandle(e,t,r)};Zt.useInsertionEffect=function(e,t){return fo.current.useInsertionEffect(e,t)};Zt.useLayoutEffect=function(e,t){return fo.current.useLayoutEffect(e,t)};Zt.useMemo=function(e,t){return fo.current.useMemo(e,t)};Zt.useReducer=function(e,t,r){return fo.current.useReducer(e,t,r)};Zt.useRef=function(e){return fo.current.useRef(e)};Zt.useState=function(e){return fo.current.useState(e)};Zt.useSyncExternalStore=function(e,t,r){return fo.current.useSyncExternalStore(e,t,r)};Zt.useTransition=function(){return fo.current.useTransition()};Zt.version="18.3.1";e$.exports=Zt;var T=e$.exports;const Tr=rs(T),l$=A1({__proto__:null,default:Tr},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1=T,z1=Symbol.for("react.element"),K1=Symbol.for("react.fragment"),q1=Object.prototype.hasOwnProperty,Y1=G1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X1={key:!0,ref:!0,__self:!0,__source:!0};function d$(e,t,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)q1.call(t,n)&&!X1.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:z1,type:e,key:o,ref:a,props:i,_owner:Y1.current}}Ew.Fragment=K1;Ew.jsx=d$;Ew.jsxs=d$;Z8.exports=Ew;var h=Z8.exports,u$={exports:{}},ga={},h$={exports:{}},p$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,F){var P=N.length;N.push(F);e:for(;0<P;){var _=P-1>>>1,R=N[_];if(0<i(R,F))N[_]=F,N[P]=R,P=_;else break e}}function r(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var F=N[0],P=N.pop();if(P!==F){N[0]=P;e:for(var _=0,R=N.length,k=R>>>1;_<k;){var z=2*(_+1)-1,U=N[z],q=z+1,oe=N[q];if(0>i(U,P))q<R&&0>i(oe,U)?(N[_]=oe,N[q]=P,_=q):(N[_]=U,N[z]=P,_=z);else if(q<R&&0>i(oe,P))N[_]=oe,N[q]=P,_=q;else break e}}return F}function i(N,F){var P=N.sortIndex-F.sortIndex;return P!==0?P:N.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var c=[],l=[],d=1,u=null,p=3,f=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var F=r(l);F!==null;){if(F.callback===null)n(l);else if(F.startTime<=N)n(l),F.sortIndex=F.expirationTime,t(c,F);else break;F=r(l)}}function S(N){if(g=!1,w(N),!m)if(r(c)!==null)m=!0,K(x);else{var F=r(l);F!==null&&A(S,F.startTime-N)}}function x(N,F){m=!1,g&&(g=!1,v(j),j=-1),f=!0;var P=p;try{for(w(F),u=r(c);u!==null&&(!(u.expirationTime>F)||N&&!Y());){var _=u.callback;if(typeof _=="function"){u.callback=null,p=u.priorityLevel;var R=_(u.expirationTime<=F);F=e.unstable_now(),typeof R=="function"?u.callback=R:u===r(c)&&n(c),w(F)}else n(c);u=r(c)}if(u!==null)var k=!0;else{var z=r(l);z!==null&&A(S,z.startTime-F),k=!1}return k}finally{u=null,p=P,f=!1}}var O=!1,L=null,j=-1,W=5,V=-1;function Y(){return!(e.unstable_now()-V<W)}function Z(){if(L!==null){var N=e.unstable_now();V=N;var F=!0;try{F=L(!0,N)}finally{F?te():(O=!1,L=null)}}else O=!1}var te;if(typeof E=="function")te=function(){E(Z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,$=H.port2;H.port1.onmessage=Z,te=function(){$.postMessage(null)}}else te=function(){y(Z,0)};function K(N){L=N,O||(O=!0,te())}function A(N,F){j=y(function(){N(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,K(x))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(N){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var P=p;p=F;try{return N()}finally{p=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,F){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var P=p;p=N;try{return F()}finally{p=P}},e.unstable_scheduleCallback=function(N,F,P){var _=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?_+P:_):P=_,N){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=P+R,N={id:d++,callback:F,priorityLevel:N,startTime:P,expirationTime:R,sortIndex:-1},P>_?(N.sortIndex=P,t(l,N),r(c)===null&&N===r(l)&&(g?(v(j),j=-1):g=!0,A(S,P-_))):(N.sortIndex=R,t(c,N),m||f||(m=!0,K(x))),N},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(N){var F=p;return function(){var P=p;p=F;try{return N.apply(this,arguments)}finally{p=P}}}})(p$);h$.exports=p$;var J1=h$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1=T,ua=J1;function Ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f$=new Set,r0={};function sh(e,t){af(e,t),af(e+"Capture",t)}function af(e,t){for(r0[e]=t,e=0;e<t.length;e++)f$.add(t[e])}var al=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),px=Object.prototype.hasOwnProperty,Z1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x2={},A2={};function eee(e){return px.call(A2,e)?!0:px.call(x2,e)?!1:Z1.test(e)?A2[e]=!0:(x2[e]=!0,!1)}function tee(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ree(e,t,r,n){if(t===null||typeof t>"u"||tee(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mo(e,t,r,n,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ji={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ji[e]=new mo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ji[t]=new mo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ji[e]=new mo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ji[e]=new mo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ji[e]=new mo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ji[e]=new mo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ji[e]=new mo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ji[e]=new mo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ji[e]=new mo(e,5,!1,e.toLowerCase(),null,!1,!1)});var vO=/[\-:]([a-z])/g;function EO(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vO,EO);ji[t]=new mo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vO,EO);ji[t]=new mo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vO,EO);ji[t]=new mo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ji[e]=new mo(e,1,!1,e.toLowerCase(),null,!1,!1)});ji.xlinkHref=new mo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ji[e]=new mo(e,1,!1,e.toLowerCase(),null,!0,!0)});function _O(e,t,r,n){var i=ji.hasOwnProperty(t)?ji[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ree(t,r,i,n)&&(r=null),n||i===null?eee(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var gl=Q1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cv=Symbol.for("react.element"),dp=Symbol.for("react.portal"),up=Symbol.for("react.fragment"),bO=Symbol.for("react.strict_mode"),fx=Symbol.for("react.profiler"),m$=Symbol.for("react.provider"),g$=Symbol.for("react.context"),wO=Symbol.for("react.forward_ref"),mx=Symbol.for("react.suspense"),gx=Symbol.for("react.suspense_list"),SO=Symbol.for("react.memo"),Bl=Symbol.for("react.lazy"),y$=Symbol.for("react.offscreen"),N2=Symbol.iterator;function Am(e){return e===null||typeof e!="object"?null:(e=N2&&e[N2]||e["@@iterator"],typeof e=="function"?e:null)}var Cn=Object.assign,NT;function og(e){if(NT===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);NT=t&&t[1]||""}return`
`+NT+e}var OT=!1;function kT(e,t){if(!e||OT)return"";OT=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var n=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){n=l}e.call(t.prototype)}else{try{throw Error()}catch(l){n=l}e()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=s);break}}}finally{OT=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?og(e):""}function nee(e){switch(e.tag){case 5:return og(e.type);case 16:return og("Lazy");case 13:return og("Suspense");case 19:return og("SuspenseList");case 0:case 2:case 15:return e=kT(e.type,!1),e;case 11:return e=kT(e.type.render,!1),e;case 1:return e=kT(e.type,!0),e;default:return""}}function yx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case up:return"Fragment";case dp:return"Portal";case fx:return"Profiler";case bO:return"StrictMode";case mx:return"Suspense";case gx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case g$:return(e.displayName||"Context")+".Consumer";case m$:return(e._context.displayName||"Context")+".Provider";case wO:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case SO:return t=e.displayName||null,t!==null?t:yx(e.type)||"Memo";case Bl:t=e._payload,e=e._init;try{return yx(e(t))}catch{}}return null}function iee(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yx(t);case 8:return t===bO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Sd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function v$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function oee(e){var t=v$(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function lv(e){e._valueTracker||(e._valueTracker=oee(e))}function E$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=v$(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function A_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vx(e,t){var r=t.checked;return Cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function O2(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Sd(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _$(e,t){t=t.checked,t!=null&&_O(e,"checked",t,!1)}function Ex(e,t){_$(e,t);var r=Sd(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_x(e,t.type,r):t.hasOwnProperty("defaultValue")&&_x(e,t.type,Sd(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function k2(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function _x(e,t,r){(t!=="number"||A_(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ag=Array.isArray;function Fp(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Sd(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function bx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return Cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function P2(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ie(92));if(ag(r)){if(1<r.length)throw Error(Ie(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Sd(r)}}function b$(e,t){var r=Sd(t.value),n=Sd(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function D2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function w$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?w$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var dv,S$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(dv=dv||document.createElement("div"),dv.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=dv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function n0(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Cg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aee=["Webkit","ms","Moz","O"];Object.keys(Cg).forEach(function(e){aee.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cg[t]=Cg[e]})});function T$(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Cg.hasOwnProperty(e)&&Cg[e]?(""+t).trim():t+"px"}function C$(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=T$(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var see=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sx(e,t){if(t){if(see[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ie(62))}}function Tx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cx=null;function TO(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rx=null,Vp=null,Bp=null;function L2(e){if(e=ly(e)){if(typeof Rx!="function")throw Error(Ie(280));var t=e.stateNode;t&&(t=Tw(t),Rx(e.stateNode,e.type,t))}}function R$(e){Vp?Bp?Bp.push(e):Bp=[e]:Vp=e}function I$(){if(Vp){var e=Vp,t=Bp;if(Bp=Vp=null,L2(e),t)for(e=0;e<t.length;e++)L2(t[e])}}function x$(e,t){return e(t)}function A$(){}var PT=!1;function N$(e,t,r){if(PT)return e(t,r);PT=!0;try{return x$(e,t,r)}finally{PT=!1,(Vp!==null||Bp!==null)&&(A$(),I$())}}function i0(e,t){var r=e.stateNode;if(r===null)return null;var n=Tw(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ie(231,t,typeof r));return r}var Ix=!1;if(al)try{var Nm={};Object.defineProperty(Nm,"passive",{get:function(){Ix=!0}}),window.addEventListener("test",Nm,Nm),window.removeEventListener("test",Nm,Nm)}catch{Ix=!1}function cee(e,t,r,n,i,o,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(r,l)}catch(d){this.onError(d)}}var Rg=!1,N_=null,O_=!1,xx=null,lee={onError:function(e){Rg=!0,N_=e}};function dee(e,t,r,n,i,o,a,s,c){Rg=!1,N_=null,cee.apply(lee,arguments)}function uee(e,t,r,n,i,o,a,s,c){if(dee.apply(this,arguments),Rg){if(Rg){var l=N_;Rg=!1,N_=null}else throw Error(Ie(198));O_||(O_=!0,xx=l)}}function ch(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function O$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function M2(e){if(ch(e)!==e)throw Error(Ie(188))}function hee(e){var t=e.alternate;if(!t){if(t=ch(e),t===null)throw Error(Ie(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return M2(i),e;if(o===n)return M2(i),t;o=o.sibling}throw Error(Ie(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(Ie(189))}}if(r.alternate!==n)throw Error(Ie(190))}if(r.tag!==3)throw Error(Ie(188));return r.stateNode.current===r?e:t}function k$(e){return e=hee(e),e!==null?P$(e):null}function P$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=P$(e);if(t!==null)return t;e=e.sibling}return null}var D$=ua.unstable_scheduleCallback,j2=ua.unstable_cancelCallback,pee=ua.unstable_shouldYield,fee=ua.unstable_requestPaint,Wn=ua.unstable_now,mee=ua.unstable_getCurrentPriorityLevel,CO=ua.unstable_ImmediatePriority,L$=ua.unstable_UserBlockingPriority,k_=ua.unstable_NormalPriority,gee=ua.unstable_LowPriority,M$=ua.unstable_IdlePriority,_w=null,uc=null;function yee(e){if(uc&&typeof uc.onCommitFiberRoot=="function")try{uc.onCommitFiberRoot(_w,e,void 0,(e.current.flags&128)===128)}catch{}}var As=Math.clz32?Math.clz32:_ee,vee=Math.log,Eee=Math.LN2;function _ee(e){return e>>>=0,e===0?32:31-(vee(e)/Eee|0)|0}var uv=64,hv=4194304;function sg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function P_(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=sg(s):(o&=a,o!==0&&(n=sg(o)))}else a=r&~i,a!==0?n=sg(a):o!==0&&(n=sg(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-As(t),i=1<<r,n|=e[r],t&=~i;return n}function bee(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wee(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-As(o),s=1<<a,c=i[a];c===-1?(!(s&r)||s&n)&&(i[a]=bee(s,t)):c<=t&&(e.expiredLanes|=s),o&=~s}}function Ax(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function j$(){var e=uv;return uv<<=1,!(uv&4194240)&&(uv=64),e}function DT(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function sy(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-As(t),e[t]=r}function See(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-As(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function RO(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-As(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Mr=0;function U$(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var F$,IO,V$,B$,$$,Nx=!1,pv=[],sd=null,cd=null,ld=null,o0=new Map,a0=new Map,Wl=[],Tee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function U2(e,t){switch(e){case"focusin":case"focusout":sd=null;break;case"dragenter":case"dragleave":cd=null;break;case"mouseover":case"mouseout":ld=null;break;case"pointerover":case"pointerout":o0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":a0.delete(t.pointerId)}}function Om(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=ly(t),t!==null&&IO(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Cee(e,t,r,n,i){switch(t){case"focusin":return sd=Om(sd,e,t,r,n,i),!0;case"dragenter":return cd=Om(cd,e,t,r,n,i),!0;case"mouseover":return ld=Om(ld,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return o0.set(o,Om(o0.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,a0.set(o,Om(a0.get(o)||null,e,t,r,n,i)),!0}return!1}function H$(e){var t=yu(e.target);if(t!==null){var r=ch(t);if(r!==null){if(t=r.tag,t===13){if(t=O$(r),t!==null){e.blockedOn=t,$$(e.priority,function(){V$(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jE(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ox(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Cx=n,r.target.dispatchEvent(n),Cx=null}else return t=ly(r),t!==null&&IO(t),e.blockedOn=r,!1;t.shift()}return!0}function F2(e,t,r){jE(e)&&r.delete(t)}function Ree(){Nx=!1,sd!==null&&jE(sd)&&(sd=null),cd!==null&&jE(cd)&&(cd=null),ld!==null&&jE(ld)&&(ld=null),o0.forEach(F2),a0.forEach(F2)}function km(e,t){e.blockedOn===t&&(e.blockedOn=null,Nx||(Nx=!0,ua.unstable_scheduleCallback(ua.unstable_NormalPriority,Ree)))}function s0(e){function t(i){return km(i,e)}if(0<pv.length){km(pv[0],e);for(var r=1;r<pv.length;r++){var n=pv[r];n.blockedOn===e&&(n.blockedOn=null)}}for(sd!==null&&km(sd,e),cd!==null&&km(cd,e),ld!==null&&km(ld,e),o0.forEach(t),a0.forEach(t),r=0;r<Wl.length;r++)n=Wl[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Wl.length&&(r=Wl[0],r.blockedOn===null);)H$(r),r.blockedOn===null&&Wl.shift()}var $p=gl.ReactCurrentBatchConfig,D_=!0;function Iee(e,t,r,n){var i=Mr,o=$p.transition;$p.transition=null;try{Mr=1,xO(e,t,r,n)}finally{Mr=i,$p.transition=o}}function xee(e,t,r,n){var i=Mr,o=$p.transition;$p.transition=null;try{Mr=4,xO(e,t,r,n)}finally{Mr=i,$p.transition=o}}function xO(e,t,r,n){if(D_){var i=Ox(e,t,r,n);if(i===null)WT(e,t,n,L_,r),U2(e,n);else if(Cee(i,e,t,r,n))n.stopPropagation();else if(U2(e,n),t&4&&-1<Tee.indexOf(e)){for(;i!==null;){var o=ly(i);if(o!==null&&F$(o),o=Ox(e,t,r,n),o===null&&WT(e,t,n,L_,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else WT(e,t,n,null,r)}}var L_=null;function Ox(e,t,r,n){if(L_=null,e=TO(n),e=yu(e),e!==null)if(t=ch(e),t===null)e=null;else if(r=t.tag,r===13){if(e=O$(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return L_=e,null}function W$(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mee()){case CO:return 1;case L$:return 4;case k_:case gee:return 16;case M$:return 536870912;default:return 16}default:return 16}}var Xl=null,AO=null,UE=null;function G$(){if(UE)return UE;var e,t=AO,r=t.length,n,i="value"in Xl?Xl.value:Xl.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[o-n];n++);return UE=i.slice(e,1<n?1-n:void 0)}function FE(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fv(){return!0}function V2(){return!1}function ya(e){function t(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?fv:V2,this.isPropagationStopped=V2,this}return Cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fv)},persist:function(){},isPersistent:fv}),t}var Ff={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},NO=ya(Ff),cy=Cn({},Ff,{view:0,detail:0}),Aee=ya(cy),LT,MT,Pm,bw=Cn({},cy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:OO,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pm&&(Pm&&e.type==="mousemove"?(LT=e.screenX-Pm.screenX,MT=e.screenY-Pm.screenY):MT=LT=0,Pm=e),LT)},movementY:function(e){return"movementY"in e?e.movementY:MT}}),B2=ya(bw),Nee=Cn({},bw,{dataTransfer:0}),Oee=ya(Nee),kee=Cn({},cy,{relatedTarget:0}),jT=ya(kee),Pee=Cn({},Ff,{animationName:0,elapsedTime:0,pseudoElement:0}),Dee=ya(Pee),Lee=Cn({},Ff,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mee=ya(Lee),jee=Cn({},Ff,{data:0}),$2=ya(jee),Uee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bee(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vee[e])?!!t[e]:!1}function OO(){return Bee}var $ee=Cn({},cy,{key:function(e){if(e.key){var t=Uee[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=FE(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fee[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:OO,charCode:function(e){return e.type==="keypress"?FE(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?FE(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hee=ya($ee),Wee=Cn({},bw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H2=ya(Wee),Gee=Cn({},cy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:OO}),zee=ya(Gee),Kee=Cn({},Ff,{propertyName:0,elapsedTime:0,pseudoElement:0}),qee=ya(Kee),Yee=Cn({},bw,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xee=ya(Yee),Jee=[9,13,27,32],kO=al&&"CompositionEvent"in window,Ig=null;al&&"documentMode"in document&&(Ig=document.documentMode);var Qee=al&&"TextEvent"in window&&!Ig,z$=al&&(!kO||Ig&&8<Ig&&11>=Ig),W2=" ",G2=!1;function K$(e,t){switch(e){case"keyup":return Jee.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q$(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hp=!1;function Zee(e,t){switch(e){case"compositionend":return q$(t);case"keypress":return t.which!==32?null:(G2=!0,W2);case"textInput":return e=t.data,e===W2&&G2?null:e;default:return null}}function ete(e,t){if(hp)return e==="compositionend"||!kO&&K$(e,t)?(e=G$(),UE=AO=Xl=null,hp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return z$&&t.locale!=="ko"?null:t.data;default:return null}}var tte={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tte[e.type]:t==="textarea"}function Y$(e,t,r,n){R$(n),t=M_(t,"onChange"),0<t.length&&(r=new NO("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var xg=null,c0=null;function rte(e){a7(e,0)}function ww(e){var t=mp(e);if(E$(t))return e}function nte(e,t){if(e==="change")return t}var X$=!1;if(al){var UT;if(al){var FT="oninput"in document;if(!FT){var K2=document.createElement("div");K2.setAttribute("oninput","return;"),FT=typeof K2.oninput=="function"}UT=FT}else UT=!1;X$=UT&&(!document.documentMode||9<document.documentMode)}function q2(){xg&&(xg.detachEvent("onpropertychange",J$),c0=xg=null)}function J$(e){if(e.propertyName==="value"&&ww(c0)){var t=[];Y$(t,c0,e,TO(e)),N$(rte,t)}}function ite(e,t,r){e==="focusin"?(q2(),xg=t,c0=r,xg.attachEvent("onpropertychange",J$)):e==="focusout"&&q2()}function ote(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ww(c0)}function ate(e,t){if(e==="click")return ww(t)}function ste(e,t){if(e==="input"||e==="change")return ww(t)}function cte(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ks=typeof Object.is=="function"?Object.is:cte;function l0(e,t){if(ks(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!px.call(t,i)||!ks(e[i],t[i]))return!1}return!0}function Y2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function X2(e,t){var r=Y2(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Y2(r)}}function Q$(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Q$(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Z$(){for(var e=window,t=A_();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=A_(e.document)}return t}function PO(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lte(e){var t=Z$(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Q$(r.ownerDocument.documentElement,r)){if(n!==null&&PO(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=X2(r,o);var a=X2(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dte=al&&"documentMode"in document&&11>=document.documentMode,pp=null,kx=null,Ag=null,Px=!1;function J2(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Px||pp==null||pp!==A_(n)||(n=pp,"selectionStart"in n&&PO(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ag&&l0(Ag,n)||(Ag=n,n=M_(kx,"onSelect"),0<n.length&&(t=new NO("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=pp)))}function mv(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var fp={animationend:mv("Animation","AnimationEnd"),animationiteration:mv("Animation","AnimationIteration"),animationstart:mv("Animation","AnimationStart"),transitionend:mv("Transition","TransitionEnd")},VT={},e7={};al&&(e7=document.createElement("div").style,"AnimationEvent"in window||(delete fp.animationend.animation,delete fp.animationiteration.animation,delete fp.animationstart.animation),"TransitionEvent"in window||delete fp.transitionend.transition);function Sw(e){if(VT[e])return VT[e];if(!fp[e])return e;var t=fp[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in e7)return VT[e]=t[r];return e}var t7=Sw("animationend"),r7=Sw("animationiteration"),n7=Sw("animationstart"),i7=Sw("transitionend"),o7=new Map,Q2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kd(e,t){o7.set(e,t),sh(t,[e])}for(var BT=0;BT<Q2.length;BT++){var $T=Q2[BT],ute=$T.toLowerCase(),hte=$T[0].toUpperCase()+$T.slice(1);kd(ute,"on"+hte)}kd(t7,"onAnimationEnd");kd(r7,"onAnimationIteration");kd(n7,"onAnimationStart");kd("dblclick","onDoubleClick");kd("focusin","onFocus");kd("focusout","onBlur");kd(i7,"onTransitionEnd");af("onMouseEnter",["mouseout","mouseover"]);af("onMouseLeave",["mouseout","mouseover"]);af("onPointerEnter",["pointerout","pointerover"]);af("onPointerLeave",["pointerout","pointerover"]);sh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sh("onBeforeInput",["compositionend","keypress","textInput","paste"]);sh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pte=new Set("cancel close invalid load scroll toggle".split(" ").concat(cg));function Z2(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,uee(n,t,void 0,e),e.currentTarget=null}function a7(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;Z2(i,s,l),o=c}else for(a=0;a<n.length;a++){if(s=n[a],c=s.instance,l=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;Z2(i,s,l),o=c}}}if(O_)throw e=xx,O_=!1,xx=null,e}function tn(e,t){var r=t[Ux];r===void 0&&(r=t[Ux]=new Set);var n=e+"__bubble";r.has(n)||(s7(t,e,2,!1),r.add(n))}function HT(e,t,r){var n=0;t&&(n|=4),s7(r,e,n,t)}var gv="_reactListening"+Math.random().toString(36).slice(2);function d0(e){if(!e[gv]){e[gv]=!0,f$.forEach(function(r){r!=="selectionchange"&&(pte.has(r)||HT(r,!1,e),HT(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gv]||(t[gv]=!0,HT("selectionchange",!1,t))}}function s7(e,t,r,n){switch(W$(t)){case 1:var i=Iee;break;case 4:i=xee;break;default:i=xO}r=i.bind(null,t,r,e),i=void 0,!Ix||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function WT(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;s!==null;){if(a=yu(s),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}s=s.parentNode}}n=n.return}N$(function(){var l=o,d=TO(r),u=[];e:{var p=o7.get(e);if(p!==void 0){var f=NO,m=e;switch(e){case"keypress":if(FE(r)===0)break e;case"keydown":case"keyup":f=Hee;break;case"focusin":m="focus",f=jT;break;case"focusout":m="blur",f=jT;break;case"beforeblur":case"afterblur":f=jT;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=B2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Oee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=zee;break;case t7:case r7:case n7:f=Dee;break;case i7:f=qee;break;case"scroll":f=Aee;break;case"wheel":f=Xee;break;case"copy":case"cut":case"paste":f=Mee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=H2}var g=(t&4)!==0,y=!g&&e==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var E=l,w;E!==null;){w=E;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,v!==null&&(S=i0(E,v),S!=null&&g.push(u0(E,S,w)))),y)break;E=E.return}0<g.length&&(p=new f(p,m,null,r,d),u.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",p&&r!==Cx&&(m=r.relatedTarget||r.fromElement)&&(yu(m)||m[sl]))break e;if((f||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,f?(m=r.relatedTarget||r.toElement,f=l,m=m?yu(m):null,m!==null&&(y=ch(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=l),f!==m)){if(g=B2,S="onMouseLeave",v="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(g=H2,S="onPointerLeave",v="onPointerEnter",E="pointer"),y=f==null?p:mp(f),w=m==null?p:mp(m),p=new g(S,E+"leave",f,r,d),p.target=y,p.relatedTarget=w,S=null,yu(d)===l&&(g=new g(v,E+"enter",m,r,d),g.target=w,g.relatedTarget=y,S=g),y=S,f&&m)t:{for(g=f,v=m,E=0,w=g;w;w=Uh(w))E++;for(w=0,S=v;S;S=Uh(S))w++;for(;0<E-w;)g=Uh(g),E--;for(;0<w-E;)v=Uh(v),w--;for(;E--;){if(g===v||v!==null&&g===v.alternate)break t;g=Uh(g),v=Uh(v)}g=null}else g=null;f!==null&&eL(u,p,f,g,!1),m!==null&&y!==null&&eL(u,y,m,g,!0)}}e:{if(p=l?mp(l):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var x=nte;else if(z2(p))if(X$)x=ste;else{x=ote;var O=ite}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(x=ate);if(x&&(x=x(e,l))){Y$(u,x,r,d);break e}O&&O(e,p,l),e==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&_x(p,"number",p.value)}switch(O=l?mp(l):window,e){case"focusin":(z2(O)||O.contentEditable==="true")&&(pp=O,kx=l,Ag=null);break;case"focusout":Ag=kx=pp=null;break;case"mousedown":Px=!0;break;case"contextmenu":case"mouseup":case"dragend":Px=!1,J2(u,r,d);break;case"selectionchange":if(dte)break;case"keydown":case"keyup":J2(u,r,d)}var L;if(kO)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else hp?K$(e,r)&&(j="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(z$&&r.locale!=="ko"&&(hp||j!=="onCompositionStart"?j==="onCompositionEnd"&&hp&&(L=G$()):(Xl=d,AO="value"in Xl?Xl.value:Xl.textContent,hp=!0)),O=M_(l,j),0<O.length&&(j=new $2(j,e,null,r,d),u.push({event:j,listeners:O}),L?j.data=L:(L=q$(r),L!==null&&(j.data=L)))),(L=Qee?Zee(e,r):ete(e,r))&&(l=M_(l,"onBeforeInput"),0<l.length&&(d=new $2("onBeforeInput","beforeinput",null,r,d),u.push({event:d,listeners:l}),d.data=L))}a7(u,t)})}function u0(e,t,r){return{instance:e,listener:t,currentTarget:r}}function M_(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=i0(e,r),o!=null&&n.unshift(u0(e,o,i)),o=i0(e,t),o!=null&&n.push(u0(e,o,i))),e=e.return}return n}function Uh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function eL(e,t,r,n,i){for(var o=t._reactName,a=[];r!==null&&r!==n;){var s=r,c=s.alternate,l=s.stateNode;if(c!==null&&c===n)break;s.tag===5&&l!==null&&(s=l,i?(c=i0(r,o),c!=null&&a.unshift(u0(r,c,s))):i||(c=i0(r,o),c!=null&&a.push(u0(r,c,s)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var fte=/\r\n?/g,mte=/\u0000|\uFFFD/g;function tL(e){return(typeof e=="string"?e:""+e).replace(fte,`
`).replace(mte,"")}function yv(e,t,r){if(t=tL(t),tL(e)!==t&&r)throw Error(Ie(425))}function j_(){}var Dx=null,Lx=null;function Mx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jx=typeof setTimeout=="function"?setTimeout:void 0,gte=typeof clearTimeout=="function"?clearTimeout:void 0,rL=typeof Promise=="function"?Promise:void 0,yte=typeof queueMicrotask=="function"?queueMicrotask:typeof rL<"u"?function(e){return rL.resolve(null).then(e).catch(vte)}:jx;function vte(e){setTimeout(function(){throw e})}function GT(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),s0(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);s0(t)}function dd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function nL(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Vf=Math.random().toString(36).slice(2),ic="__reactFiber$"+Vf,h0="__reactProps$"+Vf,sl="__reactContainer$"+Vf,Ux="__reactEvents$"+Vf,Ete="__reactListeners$"+Vf,_te="__reactHandles$"+Vf;function yu(e){var t=e[ic];if(t)return t;for(var r=e.parentNode;r;){if(t=r[sl]||r[ic]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=nL(e);e!==null;){if(r=e[ic])return r;e=nL(e)}return t}e=r,r=e.parentNode}return null}function ly(e){return e=e[ic]||e[sl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ie(33))}function Tw(e){return e[h0]||null}var Fx=[],gp=-1;function Pd(e){return{current:e}}function cn(e){0>gp||(e.current=Fx[gp],Fx[gp]=null,gp--)}function Qr(e,t){gp++,Fx[gp]=e.current,e.current=t}var Td={},Ji=Pd(Td),ko=Pd(!1),Hu=Td;function sf(e,t){var r=e.type.contextTypes;if(!r)return Td;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Po(e){return e=e.childContextTypes,e!=null}function U_(){cn(ko),cn(Ji)}function iL(e,t,r){if(Ji.current!==Td)throw Error(Ie(168));Qr(Ji,t),Qr(ko,r)}function c7(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Ie(108,iee(e)||"Unknown",i));return Cn({},r,n)}function F_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Td,Hu=Ji.current,Qr(Ji,e),Qr(ko,ko.current),!0}function oL(e,t,r){var n=e.stateNode;if(!n)throw Error(Ie(169));r?(e=c7(e,t,Hu),n.__reactInternalMemoizedMergedChildContext=e,cn(ko),cn(Ji),Qr(Ji,e)):cn(ko),Qr(ko,r)}var Wc=null,Cw=!1,zT=!1;function l7(e){Wc===null?Wc=[e]:Wc.push(e)}function bte(e){Cw=!0,l7(e)}function Dd(){if(!zT&&Wc!==null){zT=!0;var e=0,t=Mr;try{var r=Wc;for(Mr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Wc=null,Cw=!1}catch(i){throw Wc!==null&&(Wc=Wc.slice(e+1)),D$(CO,Dd),i}finally{Mr=t,zT=!1}}return null}var yp=[],vp=0,V_=null,B_=0,Ha=[],Wa=0,Wu=null,Xc=1,Jc="";function ru(e,t){yp[vp++]=B_,yp[vp++]=V_,V_=e,B_=t}function d7(e,t,r){Ha[Wa++]=Xc,Ha[Wa++]=Jc,Ha[Wa++]=Wu,Wu=e;var n=Xc;e=Jc;var i=32-As(n)-1;n&=~(1<<i),r+=1;var o=32-As(t)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Xc=1<<32-As(t)+i|r<<i|n,Jc=o+e}else Xc=1<<o|r<<i|n,Jc=e}function DO(e){e.return!==null&&(ru(e,1),d7(e,1,0))}function LO(e){for(;e===V_;)V_=yp[--vp],yp[vp]=null,B_=yp[--vp],yp[vp]=null;for(;e===Wu;)Wu=Ha[--Wa],Ha[Wa]=null,Jc=Ha[--Wa],Ha[Wa]=null,Xc=Ha[--Wa],Ha[Wa]=null}var la=null,na=null,pn=!1,Ts=null;function u7(e,t){var r=qa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function aL(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,la=e,na=dd(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,la=e,na=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Wu!==null?{id:Xc,overflow:Jc}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=qa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,la=e,na=null,!0):!1;default:return!1}}function Vx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Bx(e){if(pn){var t=na;if(t){var r=t;if(!aL(e,t)){if(Vx(e))throw Error(Ie(418));t=dd(r.nextSibling);var n=la;t&&aL(e,t)?u7(n,r):(e.flags=e.flags&-4097|2,pn=!1,la=e)}}else{if(Vx(e))throw Error(Ie(418));e.flags=e.flags&-4097|2,pn=!1,la=e}}}function sL(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;la=e}function vv(e){if(e!==la)return!1;if(!pn)return sL(e),pn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mx(e.type,e.memoizedProps)),t&&(t=na)){if(Vx(e))throw h7(),Error(Ie(418));for(;t;)u7(e,t),t=dd(t.nextSibling)}if(sL(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){na=dd(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}na=null}}else na=la?dd(e.stateNode.nextSibling):null;return!0}function h7(){for(var e=na;e;)e=dd(e.nextSibling)}function cf(){na=la=null,pn=!1}function MO(e){Ts===null?Ts=[e]:Ts.push(e)}var wte=gl.ReactCurrentBatchConfig;function Dm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ie(309));var n=r.stateNode}if(!n)throw Error(Ie(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(Ie(284));if(!r._owner)throw Error(Ie(290,e))}return e}function Ev(e,t){throw e=Object.prototype.toString.call(t),Error(Ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function cL(e){var t=e._init;return t(e._payload)}function p7(e){function t(v,E){if(e){var w=v.deletions;w===null?(v.deletions=[E],v.flags|=16):w.push(E)}}function r(v,E){if(!e)return null;for(;E!==null;)t(v,E),E=E.sibling;return null}function n(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function i(v,E){return v=fd(v,E),v.index=0,v.sibling=null,v}function o(v,E,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<E?(v.flags|=2,E):w):(v.flags|=2,E)):(v.flags|=1048576,E)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,E,w,S){return E===null||E.tag!==6?(E=ZT(w,v.mode,S),E.return=v,E):(E=i(E,w),E.return=v,E)}function c(v,E,w,S){var x=w.type;return x===up?d(v,E,w.props.children,S,w.key):E!==null&&(E.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Bl&&cL(x)===E.type)?(S=i(E,w.props),S.ref=Dm(v,E,w),S.return=v,S):(S=zE(w.type,w.key,w.props,null,v.mode,S),S.ref=Dm(v,E,w),S.return=v,S)}function l(v,E,w,S){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=eC(w,v.mode,S),E.return=v,E):(E=i(E,w.children||[]),E.return=v,E)}function d(v,E,w,S,x){return E===null||E.tag!==7?(E=Ou(w,v.mode,S,x),E.return=v,E):(E=i(E,w),E.return=v,E)}function u(v,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return E=ZT(""+E,v.mode,w),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case cv:return w=zE(E.type,E.key,E.props,null,v.mode,w),w.ref=Dm(v,null,E),w.return=v,w;case dp:return E=eC(E,v.mode,w),E.return=v,E;case Bl:var S=E._init;return u(v,S(E._payload),w)}if(ag(E)||Am(E))return E=Ou(E,v.mode,w,null),E.return=v,E;Ev(v,E)}return null}function p(v,E,w,S){var x=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return x!==null?null:s(v,E,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case cv:return w.key===x?c(v,E,w,S):null;case dp:return w.key===x?l(v,E,w,S):null;case Bl:return x=w._init,p(v,E,x(w._payload),S)}if(ag(w)||Am(w))return x!==null?null:d(v,E,w,S,null);Ev(v,w)}return null}function f(v,E,w,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(w)||null,s(E,v,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case cv:return v=v.get(S.key===null?w:S.key)||null,c(E,v,S,x);case dp:return v=v.get(S.key===null?w:S.key)||null,l(E,v,S,x);case Bl:var O=S._init;return f(v,E,w,O(S._payload),x)}if(ag(S)||Am(S))return v=v.get(w)||null,d(E,v,S,x,null);Ev(E,S)}return null}function m(v,E,w,S){for(var x=null,O=null,L=E,j=E=0,W=null;L!==null&&j<w.length;j++){L.index>j?(W=L,L=null):W=L.sibling;var V=p(v,L,w[j],S);if(V===null){L===null&&(L=W);break}e&&L&&V.alternate===null&&t(v,L),E=o(V,E,j),O===null?x=V:O.sibling=V,O=V,L=W}if(j===w.length)return r(v,L),pn&&ru(v,j),x;if(L===null){for(;j<w.length;j++)L=u(v,w[j],S),L!==null&&(E=o(L,E,j),O===null?x=L:O.sibling=L,O=L);return pn&&ru(v,j),x}for(L=n(v,L);j<w.length;j++)W=f(L,v,j,w[j],S),W!==null&&(e&&W.alternate!==null&&L.delete(W.key===null?j:W.key),E=o(W,E,j),O===null?x=W:O.sibling=W,O=W);return e&&L.forEach(function(Y){return t(v,Y)}),pn&&ru(v,j),x}function g(v,E,w,S){var x=Am(w);if(typeof x!="function")throw Error(Ie(150));if(w=x.call(w),w==null)throw Error(Ie(151));for(var O=x=null,L=E,j=E=0,W=null,V=w.next();L!==null&&!V.done;j++,V=w.next()){L.index>j?(W=L,L=null):W=L.sibling;var Y=p(v,L,V.value,S);if(Y===null){L===null&&(L=W);break}e&&L&&Y.alternate===null&&t(v,L),E=o(Y,E,j),O===null?x=Y:O.sibling=Y,O=Y,L=W}if(V.done)return r(v,L),pn&&ru(v,j),x;if(L===null){for(;!V.done;j++,V=w.next())V=u(v,V.value,S),V!==null&&(E=o(V,E,j),O===null?x=V:O.sibling=V,O=V);return pn&&ru(v,j),x}for(L=n(v,L);!V.done;j++,V=w.next())V=f(L,v,j,V.value,S),V!==null&&(e&&V.alternate!==null&&L.delete(V.key===null?j:V.key),E=o(V,E,j),O===null?x=V:O.sibling=V,O=V);return e&&L.forEach(function(Z){return t(v,Z)}),pn&&ru(v,j),x}function y(v,E,w,S){if(typeof w=="object"&&w!==null&&w.type===up&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case cv:e:{for(var x=w.key,O=E;O!==null;){if(O.key===x){if(x=w.type,x===up){if(O.tag===7){r(v,O.sibling),E=i(O,w.props.children),E.return=v,v=E;break e}}else if(O.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Bl&&cL(x)===O.type){r(v,O.sibling),E=i(O,w.props),E.ref=Dm(v,O,w),E.return=v,v=E;break e}r(v,O);break}else t(v,O);O=O.sibling}w.type===up?(E=Ou(w.props.children,v.mode,S,w.key),E.return=v,v=E):(S=zE(w.type,w.key,w.props,null,v.mode,S),S.ref=Dm(v,E,w),S.return=v,v=S)}return a(v);case dp:e:{for(O=w.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){r(v,E.sibling),E=i(E,w.children||[]),E.return=v,v=E;break e}else{r(v,E);break}else t(v,E);E=E.sibling}E=eC(w,v.mode,S),E.return=v,v=E}return a(v);case Bl:return O=w._init,y(v,E,O(w._payload),S)}if(ag(w))return m(v,E,w,S);if(Am(w))return g(v,E,w,S);Ev(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,E!==null&&E.tag===6?(r(v,E.sibling),E=i(E,w),E.return=v,v=E):(r(v,E),E=ZT(w,v.mode,S),E.return=v,v=E),a(v)):r(v,E)}return y}var lf=p7(!0),f7=p7(!1),$_=Pd(null),H_=null,Ep=null,jO=null;function UO(){jO=Ep=H_=null}function FO(e){var t=$_.current;cn($_),e._currentValue=t}function $x(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Hp(e,t){H_=e,jO=Ep=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(No=!0),e.firstContext=null)}function Qa(e){var t=e._currentValue;if(jO!==e)if(e={context:e,memoizedValue:t,next:null},Ep===null){if(H_===null)throw Error(Ie(308));Ep=e,H_.dependencies={lanes:0,firstContext:e}}else Ep=Ep.next=e;return t}var vu=null;function VO(e){vu===null?vu=[e]:vu.push(e)}function m7(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,VO(t)):(r.next=i.next,i.next=r),t.interleaved=r,cl(e,n)}function cl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var $l=!1;function BO(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g7(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function el(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ud(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,pr&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,cl(e,r)}return i=n.interleaved,i===null?(t.next=t,VO(n)):(t.next=i.next,i.next=t),n.interleaved=t,cl(e,r)}function VE(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,RO(e,r)}}function lL(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function W_(e,t,r,n){var i=e.updateQueue;$l=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,a===null?o=l:a.next=l,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==a&&(s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=c))}if(o!==null){var u=i.baseState;a=0,d=l=c=null,s=o;do{var p=s.lane,f=s.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,g=s;switch(p=t,f=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){u=m.call(f,u,p);break e}u=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,p=typeof m=="function"?m.call(f,u,p):m,p==null)break e;u=Cn({},u,p);break e;case 2:$l=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(l=d=f,c=u):d=d.next=f,a|=p;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(c=u),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);zu|=a,e.lanes=a,e.memoizedState=u}}function dL(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Ie(191,i));i.call(n)}}}var dy={},hc=Pd(dy),p0=Pd(dy),f0=Pd(dy);function Eu(e){if(e===dy)throw Error(Ie(174));return e}function $O(e,t){switch(Qr(f0,t),Qr(p0,e),Qr(hc,dy),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wx(t,e)}cn(hc),Qr(hc,t)}function df(){cn(hc),cn(p0),cn(f0)}function y7(e){Eu(f0.current);var t=Eu(hc.current),r=wx(t,e.type);t!==r&&(Qr(p0,e),Qr(hc,r))}function HO(e){p0.current===e&&(cn(hc),cn(p0))}var _n=Pd(0);function G_(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var KT=[];function WO(){for(var e=0;e<KT.length;e++)KT[e]._workInProgressVersionPrimary=null;KT.length=0}var BE=gl.ReactCurrentDispatcher,qT=gl.ReactCurrentBatchConfig,Gu=0,Sn=null,ci=null,yi=null,z_=!1,Ng=!1,m0=0,Ste=0;function $i(){throw Error(Ie(321))}function GO(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ks(e[r],t[r]))return!1;return!0}function zO(e,t,r,n,i,o){if(Gu=o,Sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,BE.current=e===null||e.memoizedState===null?Ite:xte,e=r(n,i),Ng){o=0;do{if(Ng=!1,m0=0,25<=o)throw Error(Ie(301));o+=1,yi=ci=null,t.updateQueue=null,BE.current=Ate,e=r(n,i)}while(Ng)}if(BE.current=K_,t=ci!==null&&ci.next!==null,Gu=0,yi=ci=Sn=null,z_=!1,t)throw Error(Ie(300));return e}function KO(){var e=m0!==0;return m0=0,e}function ec(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yi===null?Sn.memoizedState=yi=e:yi=yi.next=e,yi}function Za(){if(ci===null){var e=Sn.alternate;e=e!==null?e.memoizedState:null}else e=ci.next;var t=yi===null?Sn.memoizedState:yi.next;if(t!==null)yi=t,ci=e;else{if(e===null)throw Error(Ie(310));ci=e,e={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},yi===null?Sn.memoizedState=yi=e:yi=yi.next=e}return yi}function g0(e,t){return typeof t=="function"?t(e):t}function YT(e){var t=Za(),r=t.queue;if(r===null)throw Error(Ie(311));r.lastRenderedReducer=e;var n=ci,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,c=null,l=o;do{var d=l.lane;if((Gu&d)===d)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:e(n,l.action);else{var u={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(s=c=u,a=n):c=c.next=u,Sn.lanes|=d,zu|=d}l=l.next}while(l!==null&&l!==o);c===null?a=n:c.next=s,ks(n,t.memoizedState)||(No=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,Sn.lanes|=o,zu|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function XT(e){var t=Za(),r=t.queue;if(r===null)throw Error(Ie(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);ks(o,t.memoizedState)||(No=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function v7(){}function E7(e,t){var r=Sn,n=Za(),i=t(),o=!ks(n.memoizedState,i);if(o&&(n.memoizedState=i,No=!0),n=n.queue,qO(w7.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||yi!==null&&yi.memoizedState.tag&1){if(r.flags|=2048,y0(9,b7.bind(null,r,n,i,t),void 0,null),Si===null)throw Error(Ie(349));Gu&30||_7(r,t,i)}return i}function _7(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Sn.updateQueue,t===null?(t={lastEffect:null,stores:null},Sn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function b7(e,t,r,n){t.value=r,t.getSnapshot=n,S7(t)&&T7(e)}function w7(e,t,r){return r(function(){S7(t)&&T7(e)})}function S7(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ks(e,r)}catch{return!0}}function T7(e){var t=cl(e,1);t!==null&&Ns(t,e,1,-1)}function uL(e){var t=ec();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g0,lastRenderedState:e},t.queue=e,e=e.dispatch=Rte.bind(null,Sn,e),[t.memoizedState,e]}function y0(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Sn.updateQueue,t===null?(t={lastEffect:null,stores:null},Sn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function C7(){return Za().memoizedState}function $E(e,t,r,n){var i=ec();Sn.flags|=e,i.memoizedState=y0(1|t,r,void 0,n===void 0?null:n)}function Rw(e,t,r,n){var i=Za();n=n===void 0?null:n;var o=void 0;if(ci!==null){var a=ci.memoizedState;if(o=a.destroy,n!==null&&GO(n,a.deps)){i.memoizedState=y0(t,r,o,n);return}}Sn.flags|=e,i.memoizedState=y0(1|t,r,o,n)}function hL(e,t){return $E(8390656,8,e,t)}function qO(e,t){return Rw(2048,8,e,t)}function R7(e,t){return Rw(4,2,e,t)}function I7(e,t){return Rw(4,4,e,t)}function x7(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function A7(e,t,r){return r=r!=null?r.concat([e]):null,Rw(4,4,x7.bind(null,t,e),r)}function YO(){}function N7(e,t){var r=Za();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&GO(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function O7(e,t){var r=Za();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&GO(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function k7(e,t,r){return Gu&21?(ks(r,t)||(r=j$(),Sn.lanes|=r,zu|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,No=!0),e.memoizedState=r)}function Tte(e,t){var r=Mr;Mr=r!==0&&4>r?r:4,e(!0);var n=qT.transition;qT.transition={};try{e(!1),t()}finally{Mr=r,qT.transition=n}}function P7(){return Za().memoizedState}function Cte(e,t,r){var n=pd(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},D7(e))L7(t,r);else if(r=m7(e,t,r,n),r!==null){var i=ho();Ns(r,e,n,i),M7(r,t,n)}}function Rte(e,t,r){var n=pd(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(D7(e))L7(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,ks(s,a)){var c=t.interleaved;c===null?(i.next=i,VO(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=m7(e,t,i,n),r!==null&&(i=ho(),Ns(r,e,n,i),M7(r,t,n))}}function D7(e){var t=e.alternate;return e===Sn||t!==null&&t===Sn}function L7(e,t){Ng=z_=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function M7(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,RO(e,r)}}var K_={readContext:Qa,useCallback:$i,useContext:$i,useEffect:$i,useImperativeHandle:$i,useInsertionEffect:$i,useLayoutEffect:$i,useMemo:$i,useReducer:$i,useRef:$i,useState:$i,useDebugValue:$i,useDeferredValue:$i,useTransition:$i,useMutableSource:$i,useSyncExternalStore:$i,useId:$i,unstable_isNewReconciler:!1},Ite={readContext:Qa,useCallback:function(e,t){return ec().memoizedState=[e,t===void 0?null:t],e},useContext:Qa,useEffect:hL,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,$E(4194308,4,x7.bind(null,t,e),r)},useLayoutEffect:function(e,t){return $E(4194308,4,e,t)},useInsertionEffect:function(e,t){return $E(4,2,e,t)},useMemo:function(e,t){var r=ec();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ec();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Cte.bind(null,Sn,e),[n.memoizedState,e]},useRef:function(e){var t=ec();return e={current:e},t.memoizedState=e},useState:uL,useDebugValue:YO,useDeferredValue:function(e){return ec().memoizedState=e},useTransition:function(){var e=uL(!1),t=e[0];return e=Tte.bind(null,e[1]),ec().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Sn,i=ec();if(pn){if(r===void 0)throw Error(Ie(407));r=r()}else{if(r=t(),Si===null)throw Error(Ie(349));Gu&30||_7(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,hL(w7.bind(null,n,o,e),[e]),n.flags|=2048,y0(9,b7.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=ec(),t=Si.identifierPrefix;if(pn){var r=Jc,n=Xc;r=(n&~(1<<32-As(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=m0++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Ste++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},xte={readContext:Qa,useCallback:N7,useContext:Qa,useEffect:qO,useImperativeHandle:A7,useInsertionEffect:R7,useLayoutEffect:I7,useMemo:O7,useReducer:YT,useRef:C7,useState:function(){return YT(g0)},useDebugValue:YO,useDeferredValue:function(e){var t=Za();return k7(t,ci.memoizedState,e)},useTransition:function(){var e=YT(g0)[0],t=Za().memoizedState;return[e,t]},useMutableSource:v7,useSyncExternalStore:E7,useId:P7,unstable_isNewReconciler:!1},Ate={readContext:Qa,useCallback:N7,useContext:Qa,useEffect:qO,useImperativeHandle:A7,useInsertionEffect:R7,useLayoutEffect:I7,useMemo:O7,useReducer:XT,useRef:C7,useState:function(){return XT(g0)},useDebugValue:YO,useDeferredValue:function(e){var t=Za();return ci===null?t.memoizedState=e:k7(t,ci.memoizedState,e)},useTransition:function(){var e=XT(g0)[0],t=Za().memoizedState;return[e,t]},useMutableSource:v7,useSyncExternalStore:E7,useId:P7,unstable_isNewReconciler:!1};function _s(e,t){if(e&&e.defaultProps){t=Cn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Hx(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Cn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Iw={isMounted:function(e){return(e=e._reactInternals)?ch(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ho(),i=pd(e),o=el(n,i);o.payload=t,r!=null&&(o.callback=r),t=ud(e,o,i),t!==null&&(Ns(t,e,i,n),VE(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ho(),i=pd(e),o=el(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=ud(e,o,i),t!==null&&(Ns(t,e,i,n),VE(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ho(),n=pd(e),i=el(r,n);i.tag=2,t!=null&&(i.callback=t),t=ud(e,i,n),t!==null&&(Ns(t,e,n,r),VE(t,e,n))}};function pL(e,t,r,n,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!l0(r,n)||!l0(i,o):!0}function j7(e,t,r){var n=!1,i=Td,o=t.contextType;return typeof o=="object"&&o!==null?o=Qa(o):(i=Po(t)?Hu:Ji.current,n=t.contextTypes,o=(n=n!=null)?sf(e,i):Td),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Iw,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function fL(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Iw.enqueueReplaceState(t,t.state,null)}function Wx(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},BO(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Qa(o):(o=Po(t)?Hu:Ji.current,i.context=sf(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Hx(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Iw.enqueueReplaceState(i,i.state,null),W_(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function uf(e,t){try{var r="",n=t;do r+=nee(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function JT(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Gx(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Nte=typeof WeakMap=="function"?WeakMap:Map;function U7(e,t,r){r=el(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Y_||(Y_=!0,tA=n),Gx(e,t)},r}function F7(e,t,r){r=el(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Gx(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Gx(e,t),typeof n!="function"&&(hd===null?hd=new Set([this]):hd.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function mL(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Nte;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Wte.bind(null,e,t,r),t.then(e,e))}function gL(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yL(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=el(-1,1),t.tag=2,ud(r,t,1))),r.lanes|=1),e)}var Ote=gl.ReactCurrentOwner,No=!1;function so(e,t,r,n){t.child=e===null?f7(t,null,r,n):lf(t,e.child,r,n)}function vL(e,t,r,n,i){r=r.render;var o=t.ref;return Hp(t,i),n=zO(e,t,r,n,o,i),r=KO(),e!==null&&!No?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ll(e,t,i)):(pn&&r&&DO(t),t.flags|=1,so(e,t,n,i),t.child)}function EL(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!nk(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,V7(e,t,o,n,i)):(e=zE(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:l0,r(a,n)&&e.ref===t.ref)return ll(e,t,i)}return t.flags|=1,e=fd(o,n),e.ref=t.ref,e.return=t,t.child=e}function V7(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(l0(o,n)&&e.ref===t.ref)if(No=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(No=!0);else return t.lanes=e.lanes,ll(e,t,i)}return zx(e,t,r,n,i)}function B7(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qr(bp,Zo),Zo|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Qr(bp,Zo),Zo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Qr(bp,Zo),Zo|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Qr(bp,Zo),Zo|=n;return so(e,t,i,r),t.child}function $7(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function zx(e,t,r,n,i){var o=Po(r)?Hu:Ji.current;return o=sf(t,o),Hp(t,i),r=zO(e,t,r,n,o,i),n=KO(),e!==null&&!No?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ll(e,t,i)):(pn&&n&&DO(t),t.flags|=1,so(e,t,r,i),t.child)}function _L(e,t,r,n,i){if(Po(r)){var o=!0;F_(t)}else o=!1;if(Hp(t,i),t.stateNode===null)HE(e,t),j7(t,r,n),Wx(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,l=r.contextType;typeof l=="object"&&l!==null?l=Qa(l):(l=Po(r)?Hu:Ji.current,l=sf(t,l));var d=r.getDerivedStateFromProps,u=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||c!==l)&&fL(t,a,n,l),$l=!1;var p=t.memoizedState;a.state=p,W_(t,n,a,i),c=t.memoizedState,s!==n||p!==c||ko.current||$l?(typeof d=="function"&&(Hx(t,r,d,n),c=t.memoizedState),(s=$l||pL(t,r,s,n,p,c,l))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=l,n=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,g7(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:_s(t.type,s),a.props=l,u=t.pendingProps,p=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Qa(c):(c=Po(r)?Hu:Ji.current,c=sf(t,c));var f=r.getDerivedStateFromProps;(d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==u||p!==c)&&fL(t,a,n,c),$l=!1,p=t.memoizedState,a.state=p,W_(t,n,a,i);var m=t.memoizedState;s!==u||p!==m||ko.current||$l?(typeof f=="function"&&(Hx(t,r,f,n),m=t.memoizedState),(l=$l||pL(t,r,l,n,p,m,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),a.props=n,a.state=m,a.context=c,n=l):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Kx(e,t,r,n,o,i)}function Kx(e,t,r,n,i,o){$7(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&oL(t,r,!1),ll(e,t,o);n=t.stateNode,Ote.current=t;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=lf(t,e.child,null,o),t.child=lf(t,null,s,o)):so(e,t,s,o),t.memoizedState=n.state,i&&oL(t,r,!0),t.child}function H7(e){var t=e.stateNode;t.pendingContext?iL(e,t.pendingContext,t.pendingContext!==t.context):t.context&&iL(e,t.context,!1),$O(e,t.containerInfo)}function bL(e,t,r,n,i){return cf(),MO(i),t.flags|=256,so(e,t,r,n),t.child}var qx={dehydrated:null,treeContext:null,retryLane:0};function Yx(e){return{baseLanes:e,cachePool:null,transitions:null}}function W7(e,t,r){var n=t.pendingProps,i=_n.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Qr(_n,i&1),e===null)return Bx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Nw(a,n,0,null),e=Ou(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Yx(r),t.memoizedState=qx,e):XO(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return kte(e,t,a,n,s,i,r);if(o){o=n.fallback,a=t.mode,i=e.child,s=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=fd(i,c),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=fd(s,o):(o=Ou(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?Yx(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=qx,n}return o=e.child,e=o.sibling,n=fd(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function XO(e,t){return t=Nw({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _v(e,t,r,n){return n!==null&&MO(n),lf(t,e.child,null,r),e=XO(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kte(e,t,r,n,i,o,a){if(r)return t.flags&256?(t.flags&=-257,n=JT(Error(Ie(422))),_v(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=Nw({mode:"visible",children:n.children},i,0,null),o=Ou(o,i,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&lf(t,e.child,null,a),t.child.memoizedState=Yx(a),t.memoizedState=qx,o);if(!(t.mode&1))return _v(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(Ie(419)),n=JT(o,n,void 0),_v(e,t,a,n)}if(s=(a&e.childLanes)!==0,No||s){if(n=Si,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,cl(e,i),Ns(n,e,i,-1))}return rk(),n=JT(Error(Ie(421))),_v(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Gte.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,na=dd(i.nextSibling),la=t,pn=!0,Ts=null,e!==null&&(Ha[Wa++]=Xc,Ha[Wa++]=Jc,Ha[Wa++]=Wu,Xc=e.id,Jc=e.overflow,Wu=t),t=XO(t,n.children),t.flags|=4096,t)}function wL(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),$x(e.return,t,r)}function QT(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function G7(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(so(e,t,n.children,r),n=_n.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wL(e,r,t);else if(e.tag===19)wL(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Qr(_n,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&G_(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),QT(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&G_(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}QT(t,!0,r,null,o);break;case"together":QT(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function HE(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ll(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),zu|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ie(153));if(t.child!==null){for(e=t.child,r=fd(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=fd(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Pte(e,t,r){switch(t.tag){case 3:H7(t),cf();break;case 5:y7(t);break;case 1:Po(t.type)&&F_(t);break;case 4:$O(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Qr($_,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Qr(_n,_n.current&1),t.flags|=128,null):r&t.child.childLanes?W7(e,t,r):(Qr(_n,_n.current&1),e=ll(e,t,r),e!==null?e.sibling:null);Qr(_n,_n.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return G7(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Qr(_n,_n.current),n)break;return null;case 22:case 23:return t.lanes=0,B7(e,t,r)}return ll(e,t,r)}var z7,Xx,K7,q7;z7=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xx=function(){};K7=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Eu(hc.current);var o=null;switch(r){case"input":i=vx(e,i),n=vx(e,n),o=[];break;case"select":i=Cn({},i,{value:void 0}),n=Cn({},n,{value:void 0}),o=[];break;case"textarea":i=bx(e,i),n=bx(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=j_)}Sx(r,n);var a;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(r0.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in n){var c=n[l];if(s=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==s&&(c!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(l,r)),r=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(o=o||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(r0.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&tn("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}r&&(o=o||[]).push("style",r);var l=o;(t.updateQueue=l)&&(t.flags|=4)}};q7=function(e,t,r,n){r!==n&&(t.flags|=4)};function Lm(e,t){if(!pn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Hi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Dte(e,t,r){var n=t.pendingProps;switch(LO(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hi(t),null;case 1:return Po(t.type)&&U_(),Hi(t),null;case 3:return n=t.stateNode,df(),cn(ko),cn(Ji),WO(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(vv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ts!==null&&(iA(Ts),Ts=null))),Xx(e,t),Hi(t),null;case 5:HO(t);var i=Eu(f0.current);if(r=t.type,e!==null&&t.stateNode!=null)K7(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Ie(166));return Hi(t),null}if(e=Eu(hc.current),vv(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[ic]=t,n[h0]=o,e=(t.mode&1)!==0,r){case"dialog":tn("cancel",n),tn("close",n);break;case"iframe":case"object":case"embed":tn("load",n);break;case"video":case"audio":for(i=0;i<cg.length;i++)tn(cg[i],n);break;case"source":tn("error",n);break;case"img":case"image":case"link":tn("error",n),tn("load",n);break;case"details":tn("toggle",n);break;case"input":O2(n,o),tn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},tn("invalid",n);break;case"textarea":P2(n,o),tn("invalid",n)}Sx(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&yv(n.textContent,s,e),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&yv(n.textContent,s,e),i=["children",""+s]):r0.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&tn("scroll",n)}switch(r){case"input":lv(n),k2(n,o,!0);break;case"textarea":lv(n),D2(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=j_)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=w$(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[ic]=t,e[h0]=n,z7(e,t,!1,!1),t.stateNode=e;e:{switch(a=Tx(r,n),r){case"dialog":tn("cancel",e),tn("close",e),i=n;break;case"iframe":case"object":case"embed":tn("load",e),i=n;break;case"video":case"audio":for(i=0;i<cg.length;i++)tn(cg[i],e);i=n;break;case"source":tn("error",e),i=n;break;case"img":case"image":case"link":tn("error",e),tn("load",e),i=n;break;case"details":tn("toggle",e),i=n;break;case"input":O2(e,n),i=vx(e,n),tn("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Cn({},n,{value:void 0}),tn("invalid",e);break;case"textarea":P2(e,n),i=bx(e,n),tn("invalid",e);break;default:i=n}Sx(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="style"?C$(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&S$(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&n0(e,c):typeof c=="number"&&n0(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(r0.hasOwnProperty(o)?c!=null&&o==="onScroll"&&tn("scroll",e):c!=null&&_O(e,o,c,a))}switch(r){case"input":lv(e),k2(e,n,!1);break;case"textarea":lv(e),D2(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Sd(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Fp(e,!!n.multiple,o,!1):n.defaultValue!=null&&Fp(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=j_)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Hi(t),null;case 6:if(e&&t.stateNode!=null)q7(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Ie(166));if(r=Eu(f0.current),Eu(hc.current),vv(t)){if(n=t.stateNode,r=t.memoizedProps,n[ic]=t,(o=n.nodeValue!==r)&&(e=la,e!==null))switch(e.tag){case 3:yv(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yv(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ic]=t,t.stateNode=n}return Hi(t),null;case 13:if(cn(_n),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pn&&na!==null&&t.mode&1&&!(t.flags&128))h7(),cf(),t.flags|=98560,o=!1;else if(o=vv(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(Ie(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ie(317));o[ic]=t}else cf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Hi(t),o=!1}else Ts!==null&&(iA(Ts),Ts=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||_n.current&1?di===0&&(di=3):rk())),t.updateQueue!==null&&(t.flags|=4),Hi(t),null);case 4:return df(),Xx(e,t),e===null&&d0(t.stateNode.containerInfo),Hi(t),null;case 10:return FO(t.type._context),Hi(t),null;case 17:return Po(t.type)&&U_(),Hi(t),null;case 19:if(cn(_n),o=t.memoizedState,o===null)return Hi(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)Lm(o,!1);else{if(di!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=G_(e),a!==null){for(t.flags|=128,Lm(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Qr(_n,_n.current&1|2),t.child}e=e.sibling}o.tail!==null&&Wn()>hf&&(t.flags|=128,n=!0,Lm(o,!1),t.lanes=4194304)}else{if(!n)if(e=G_(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Lm(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!pn)return Hi(t),null}else 2*Wn()-o.renderingStartTime>hf&&r!==1073741824&&(t.flags|=128,n=!0,Lm(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Wn(),t.sibling=null,r=_n.current,Qr(_n,n?r&1|2:r&1),t):(Hi(t),null);case 22:case 23:return tk(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Zo&1073741824&&(Hi(t),t.subtreeFlags&6&&(t.flags|=8192)):Hi(t),null;case 24:return null;case 25:return null}throw Error(Ie(156,t.tag))}function Lte(e,t){switch(LO(t),t.tag){case 1:return Po(t.type)&&U_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return df(),cn(ko),cn(Ji),WO(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return HO(t),null;case 13:if(cn(_n),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ie(340));cf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return cn(_n),null;case 4:return df(),null;case 10:return FO(t.type._context),null;case 22:case 23:return tk(),null;case 24:return null;default:return null}}var bv=!1,Yi=!1,Mte=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function _p(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){kn(e,t,n)}else r.current=null}function Jx(e,t,r){try{r()}catch(n){kn(e,t,n)}}var SL=!1;function jte(e,t){if(Dx=D_,e=Z$(),PO(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,c=-1,l=0,d=0,u=e,p=null;t:for(;;){for(var f;u!==r||i!==0&&u.nodeType!==3||(s=a+i),u!==o||n!==0&&u.nodeType!==3||(c=a+n),u.nodeType===3&&(a+=u.nodeValue.length),(f=u.firstChild)!==null;)p=u,u=f;for(;;){if(u===e)break t;if(p===r&&++l===i&&(s=a),p===o&&++d===n&&(c=a),(f=u.nextSibling)!==null)break;u=p,p=u.parentNode}u=f}r=s===-1||c===-1?null:{start:s,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Lx={focusedElem:e,selectionRange:r},D_=!1,Xe=t;Xe!==null;)if(t=Xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xe=e;else for(;Xe!==null;){t=Xe;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,E=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:_s(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(S){kn(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Xe=e;break}Xe=t.return}return m=SL,SL=!1,m}function Og(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Jx(t,r,o)}i=i.next}while(i!==n)}}function xw(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Qx(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Y7(e){var t=e.alternate;t!==null&&(e.alternate=null,Y7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ic],delete t[h0],delete t[Ux],delete t[Ete],delete t[_te])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function X7(e){return e.tag===5||e.tag===3||e.tag===4}function TL(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||X7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zx(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=j_));else if(n!==4&&(e=e.child,e!==null))for(Zx(e,t,r),e=e.sibling;e!==null;)Zx(e,t,r),e=e.sibling}function eA(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(eA(e,t,r),e=e.sibling;e!==null;)eA(e,t,r),e=e.sibling}var Oi=null,ws=!1;function Cl(e,t,r){for(r=r.child;r!==null;)J7(e,t,r),r=r.sibling}function J7(e,t,r){if(uc&&typeof uc.onCommitFiberUnmount=="function")try{uc.onCommitFiberUnmount(_w,r)}catch{}switch(r.tag){case 5:Yi||_p(r,t);case 6:var n=Oi,i=ws;Oi=null,Cl(e,t,r),Oi=n,ws=i,Oi!==null&&(ws?(e=Oi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Oi.removeChild(r.stateNode));break;case 18:Oi!==null&&(ws?(e=Oi,r=r.stateNode,e.nodeType===8?GT(e.parentNode,r):e.nodeType===1&&GT(e,r),s0(e)):GT(Oi,r.stateNode));break;case 4:n=Oi,i=ws,Oi=r.stateNode.containerInfo,ws=!0,Cl(e,t,r),Oi=n,ws=i;break;case 0:case 11:case 14:case 15:if(!Yi&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Jx(r,t,a),i=i.next}while(i!==n)}Cl(e,t,r);break;case 1:if(!Yi&&(_p(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){kn(r,t,s)}Cl(e,t,r);break;case 21:Cl(e,t,r);break;case 22:r.mode&1?(Yi=(n=Yi)||r.memoizedState!==null,Cl(e,t,r),Yi=n):Cl(e,t,r);break;default:Cl(e,t,r)}}function CL(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Mte),t.forEach(function(n){var i=zte.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ds(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Oi=s.stateNode,ws=!1;break e;case 3:Oi=s.stateNode.containerInfo,ws=!0;break e;case 4:Oi=s.stateNode.containerInfo,ws=!0;break e}s=s.return}if(Oi===null)throw Error(Ie(160));J7(o,a,i),Oi=null,ws=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){kn(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Q7(t,e),t=t.sibling}function Q7(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ds(t,e),Ws(e),n&4){try{Og(3,e,e.return),xw(3,e)}catch(g){kn(e,e.return,g)}try{Og(5,e,e.return)}catch(g){kn(e,e.return,g)}}break;case 1:ds(t,e),Ws(e),n&512&&r!==null&&_p(r,r.return);break;case 5:if(ds(t,e),Ws(e),n&512&&r!==null&&_p(r,r.return),e.flags&32){var i=e.stateNode;try{n0(i,"")}catch(g){kn(e,e.return,g)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&_$(i,o),Tx(s,a);var l=Tx(s,o);for(a=0;a<c.length;a+=2){var d=c[a],u=c[a+1];d==="style"?C$(i,u):d==="dangerouslySetInnerHTML"?S$(i,u):d==="children"?n0(i,u):_O(i,d,u,l)}switch(s){case"input":Ex(i,o);break;case"textarea":b$(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Fp(i,!!o.multiple,f,!1):p!==!!o.multiple&&(o.defaultValue!=null?Fp(i,!!o.multiple,o.defaultValue,!0):Fp(i,!!o.multiple,o.multiple?[]:"",!1))}i[h0]=o}catch(g){kn(e,e.return,g)}}break;case 6:if(ds(t,e),Ws(e),n&4){if(e.stateNode===null)throw Error(Ie(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){kn(e,e.return,g)}}break;case 3:if(ds(t,e),Ws(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{s0(t.containerInfo)}catch(g){kn(e,e.return,g)}break;case 4:ds(t,e),Ws(e);break;case 13:ds(t,e),Ws(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(ZO=Wn())),n&4&&CL(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Yi=(l=Yi)||d,ds(t,e),Yi=l):ds(t,e),Ws(e),n&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!d&&e.mode&1)for(Xe=e,d=e.child;d!==null;){for(u=Xe=d;Xe!==null;){switch(p=Xe,f=p.child,p.tag){case 0:case 11:case 14:case 15:Og(4,p,p.return);break;case 1:_p(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kn(n,r,g)}}break;case 5:_p(p,p.return);break;case 22:if(p.memoizedState!==null){IL(u);continue}}f!==null?(f.return=p,Xe=f):IL(u)}d=d.sibling}e:for(d=null,u=e;;){if(u.tag===5){if(d===null){d=u;try{i=u.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=u.stateNode,c=u.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=T$("display",a))}catch(g){kn(e,e.return,g)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=l?"":u.memoizedProps}catch(g){kn(e,e.return,g)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:ds(t,e),Ws(e),n&4&&CL(e);break;case 21:break;default:ds(t,e),Ws(e)}}function Ws(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(X7(r)){var n=r;break e}r=r.return}throw Error(Ie(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(n0(i,""),n.flags&=-33);var o=TL(e);eA(e,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=TL(e);Zx(e,s,a);break;default:throw Error(Ie(161))}}catch(c){kn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ute(e,t,r){Xe=e,Z7(e)}function Z7(e,t,r){for(var n=(e.mode&1)!==0;Xe!==null;){var i=Xe,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||bv;if(!a){var s=i.alternate,c=s!==null&&s.memoizedState!==null||Yi;s=bv;var l=Yi;if(bv=a,(Yi=c)&&!l)for(Xe=i;Xe!==null;)a=Xe,c=a.child,a.tag===22&&a.memoizedState!==null?xL(i):c!==null?(c.return=a,Xe=c):xL(i);for(;o!==null;)Xe=o,Z7(o),o=o.sibling;Xe=i,bv=s,Yi=l}RL(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Xe=o):RL(e)}}function RL(e){for(;Xe!==null;){var t=Xe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Yi||xw(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Yi)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:_s(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&dL(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}dL(t,a,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var d=l.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&s0(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}Yi||t.flags&512&&Qx(t)}catch(p){kn(t,t.return,p)}}if(t===e){Xe=null;break}if(r=t.sibling,r!==null){r.return=t.return,Xe=r;break}Xe=t.return}}function IL(e){for(;Xe!==null;){var t=Xe;if(t===e){Xe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Xe=r;break}Xe=t.return}}function xL(e){for(;Xe!==null;){var t=Xe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{xw(4,t)}catch(c){kn(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){kn(t,i,c)}}var o=t.return;try{Qx(t)}catch(c){kn(t,o,c)}break;case 5:var a=t.return;try{Qx(t)}catch(c){kn(t,a,c)}}}catch(c){kn(t,t.return,c)}if(t===e){Xe=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Xe=s;break}Xe=t.return}}var Fte=Math.ceil,q_=gl.ReactCurrentDispatcher,JO=gl.ReactCurrentOwner,Xa=gl.ReactCurrentBatchConfig,pr=0,Si=null,Zn=null,Mi=0,Zo=0,bp=Pd(0),di=0,v0=null,zu=0,Aw=0,QO=0,kg=null,To=null,ZO=0,hf=1/0,$c=null,Y_=!1,tA=null,hd=null,wv=!1,Jl=null,X_=0,Pg=0,rA=null,WE=-1,GE=0;function ho(){return pr&6?Wn():WE!==-1?WE:WE=Wn()}function pd(e){return e.mode&1?pr&2&&Mi!==0?Mi&-Mi:wte.transition!==null?(GE===0&&(GE=j$()),GE):(e=Mr,e!==0||(e=window.event,e=e===void 0?16:W$(e.type)),e):1}function Ns(e,t,r,n){if(50<Pg)throw Pg=0,rA=null,Error(Ie(185));sy(e,r,n),(!(pr&2)||e!==Si)&&(e===Si&&(!(pr&2)&&(Aw|=r),di===4&&Gl(e,Mi)),Do(e,n),r===1&&pr===0&&!(t.mode&1)&&(hf=Wn()+500,Cw&&Dd()))}function Do(e,t){var r=e.callbackNode;wee(e,t);var n=P_(e,e===Si?Mi:0);if(n===0)r!==null&&j2(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&j2(r),t===1)e.tag===0?bte(AL.bind(null,e)):l7(AL.bind(null,e)),yte(function(){!(pr&6)&&Dd()}),r=null;else{switch(U$(n)){case 1:r=CO;break;case 4:r=L$;break;case 16:r=k_;break;case 536870912:r=M$;break;default:r=k_}r=sH(r,eH.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function eH(e,t){if(WE=-1,GE=0,pr&6)throw Error(Ie(327));var r=e.callbackNode;if(Wp()&&e.callbackNode!==r)return null;var n=P_(e,e===Si?Mi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=J_(e,n);else{t=n;var i=pr;pr|=2;var o=rH();(Si!==e||Mi!==t)&&($c=null,hf=Wn()+500,Nu(e,t));do try{$te();break}catch(s){tH(e,s)}while(!0);UO(),q_.current=o,pr=i,Zn!==null?t=0:(Si=null,Mi=0,t=di)}if(t!==0){if(t===2&&(i=Ax(e),i!==0&&(n=i,t=nA(e,i))),t===1)throw r=v0,Nu(e,0),Gl(e,n),Do(e,Wn()),r;if(t===6)Gl(e,n);else{if(i=e.current.alternate,!(n&30)&&!Vte(i)&&(t=J_(e,n),t===2&&(o=Ax(e),o!==0&&(n=o,t=nA(e,o))),t===1))throw r=v0,Nu(e,0),Gl(e,n),Do(e,Wn()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Ie(345));case 2:nu(e,To,$c);break;case 3:if(Gl(e,n),(n&130023424)===n&&(t=ZO+500-Wn(),10<t)){if(P_(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){ho(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=jx(nu.bind(null,e,To,$c),t);break}nu(e,To,$c);break;case 4:if(Gl(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-As(n);o=1<<a,a=t[a],a>i&&(i=a),n&=~o}if(n=i,n=Wn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Fte(n/1960))-n,10<n){e.timeoutHandle=jx(nu.bind(null,e,To,$c),n);break}nu(e,To,$c);break;case 5:nu(e,To,$c);break;default:throw Error(Ie(329))}}}return Do(e,Wn()),e.callbackNode===r?eH.bind(null,e):null}function nA(e,t){var r=kg;return e.current.memoizedState.isDehydrated&&(Nu(e,t).flags|=256),e=J_(e,t),e!==2&&(t=To,To=r,t!==null&&iA(t)),e}function iA(e){To===null?To=e:To.push.apply(To,e)}function Vte(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!ks(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gl(e,t){for(t&=~QO,t&=~Aw,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-As(t),n=1<<r;e[r]=-1,t&=~n}}function AL(e){if(pr&6)throw Error(Ie(327));Wp();var t=P_(e,0);if(!(t&1))return Do(e,Wn()),null;var r=J_(e,t);if(e.tag!==0&&r===2){var n=Ax(e);n!==0&&(t=n,r=nA(e,n))}if(r===1)throw r=v0,Nu(e,0),Gl(e,t),Do(e,Wn()),r;if(r===6)throw Error(Ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nu(e,To,$c),Do(e,Wn()),null}function ek(e,t){var r=pr;pr|=1;try{return e(t)}finally{pr=r,pr===0&&(hf=Wn()+500,Cw&&Dd())}}function Ku(e){Jl!==null&&Jl.tag===0&&!(pr&6)&&Wp();var t=pr;pr|=1;var r=Xa.transition,n=Mr;try{if(Xa.transition=null,Mr=1,e)return e()}finally{Mr=n,Xa.transition=r,pr=t,!(pr&6)&&Dd()}}function tk(){Zo=bp.current,cn(bp)}function Nu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,gte(r)),Zn!==null)for(r=Zn.return;r!==null;){var n=r;switch(LO(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&U_();break;case 3:df(),cn(ko),cn(Ji),WO();break;case 5:HO(n);break;case 4:df();break;case 13:cn(_n);break;case 19:cn(_n);break;case 10:FO(n.type._context);break;case 22:case 23:tk()}r=r.return}if(Si=e,Zn=e=fd(e.current,null),Mi=Zo=t,di=0,v0=null,QO=Aw=zu=0,To=kg=null,vu!==null){for(t=0;t<vu.length;t++)if(r=vu[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}vu=null}return e}function tH(e,t){do{var r=Zn;try{if(UO(),BE.current=K_,z_){for(var n=Sn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}z_=!1}if(Gu=0,yi=ci=Sn=null,Ng=!1,m0=0,JO.current=null,r===null||r.return===null){di=1,v0=t,Zn=null;break}e:{var o=e,a=r.return,s=r,c=t;if(t=Mi,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,d=s,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gL(a);if(f!==null){f.flags&=-257,yL(f,a,s,o,t),f.mode&1&&mL(o,l,t),t=f,c=l;var m=t.updateQueue;if(m===null){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}else{if(!(t&1)){mL(o,l,t),rk();break e}c=Error(Ie(426))}}else if(pn&&s.mode&1){var y=gL(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),yL(y,a,s,o,t),MO(uf(c,s));break e}}o=c=uf(c,s),di!==4&&(di=2),kg===null?kg=[o]:kg.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=U7(o,c,t);lL(o,v);break e;case 1:s=c;var E=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(hd===null||!hd.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=F7(o,s,t);lL(o,S);break e}}o=o.return}while(o!==null)}iH(r)}catch(x){t=x,Zn===r&&r!==null&&(Zn=r=r.return);continue}break}while(!0)}function rH(){var e=q_.current;return q_.current=K_,e===null?K_:e}function rk(){(di===0||di===3||di===2)&&(di=4),Si===null||!(zu&268435455)&&!(Aw&268435455)||Gl(Si,Mi)}function J_(e,t){var r=pr;pr|=2;var n=rH();(Si!==e||Mi!==t)&&($c=null,Nu(e,t));do try{Bte();break}catch(i){tH(e,i)}while(!0);if(UO(),pr=r,q_.current=n,Zn!==null)throw Error(Ie(261));return Si=null,Mi=0,di}function Bte(){for(;Zn!==null;)nH(Zn)}function $te(){for(;Zn!==null&&!pee();)nH(Zn)}function nH(e){var t=aH(e.alternate,e,Zo);e.memoizedProps=e.pendingProps,t===null?iH(e):Zn=t,JO.current=null}function iH(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Lte(r,t),r!==null){r.flags&=32767,Zn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{di=6,Zn=null;return}}else if(r=Dte(r,t,Zo),r!==null){Zn=r;return}if(t=t.sibling,t!==null){Zn=t;return}Zn=t=e}while(t!==null);di===0&&(di=5)}function nu(e,t,r){var n=Mr,i=Xa.transition;try{Xa.transition=null,Mr=1,Hte(e,t,r,n)}finally{Xa.transition=i,Mr=n}return null}function Hte(e,t,r,n){do Wp();while(Jl!==null);if(pr&6)throw Error(Ie(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ie(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(See(e,o),e===Si&&(Zn=Si=null,Mi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||wv||(wv=!0,sH(k_,function(){return Wp(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Xa.transition,Xa.transition=null;var a=Mr;Mr=1;var s=pr;pr|=4,JO.current=null,jte(e,r),Q7(r,e),lte(Lx),D_=!!Dx,Lx=Dx=null,e.current=r,Ute(r),fee(),pr=s,Mr=a,Xa.transition=o}else e.current=r;if(wv&&(wv=!1,Jl=e,X_=i),o=e.pendingLanes,o===0&&(hd=null),yee(r.stateNode),Do(e,Wn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Y_)throw Y_=!1,e=tA,tA=null,e;return X_&1&&e.tag!==0&&Wp(),o=e.pendingLanes,o&1?e===rA?Pg++:(Pg=0,rA=e):Pg=0,Dd(),null}function Wp(){if(Jl!==null){var e=U$(X_),t=Xa.transition,r=Mr;try{if(Xa.transition=null,Mr=16>e?16:e,Jl===null)var n=!1;else{if(e=Jl,Jl=null,X_=0,pr&6)throw Error(Ie(331));var i=pr;for(pr|=4,Xe=e.current;Xe!==null;){var o=Xe,a=o.child;if(Xe.flags&16){var s=o.deletions;if(s!==null){for(var c=0;c<s.length;c++){var l=s[c];for(Xe=l;Xe!==null;){var d=Xe;switch(d.tag){case 0:case 11:case 15:Og(8,d,o)}var u=d.child;if(u!==null)u.return=d,Xe=u;else for(;Xe!==null;){d=Xe;var p=d.sibling,f=d.return;if(Y7(d),d===l){Xe=null;break}if(p!==null){p.return=f,Xe=p;break}Xe=f}}}var m=o.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Xe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Xe=a;else e:for(;Xe!==null;){if(o=Xe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Og(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,Xe=v;break e}Xe=o.return}}var E=e.current;for(Xe=E;Xe!==null;){a=Xe;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Xe=w;else e:for(a=E;Xe!==null;){if(s=Xe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:xw(9,s)}}catch(x){kn(s,s.return,x)}if(s===a){Xe=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Xe=S;break e}Xe=s.return}}if(pr=i,Dd(),uc&&typeof uc.onPostCommitFiberRoot=="function")try{uc.onPostCommitFiberRoot(_w,e)}catch{}n=!0}return n}finally{Mr=r,Xa.transition=t}}return!1}function NL(e,t,r){t=uf(r,t),t=U7(e,t,1),e=ud(e,t,1),t=ho(),e!==null&&(sy(e,1,t),Do(e,t))}function kn(e,t,r){if(e.tag===3)NL(e,e,r);else for(;t!==null;){if(t.tag===3){NL(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(hd===null||!hd.has(n))){e=uf(r,e),e=F7(t,e,1),t=ud(t,e,1),e=ho(),t!==null&&(sy(t,1,e),Do(t,e));break}}t=t.return}}function Wte(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ho(),e.pingedLanes|=e.suspendedLanes&r,Si===e&&(Mi&r)===r&&(di===4||di===3&&(Mi&130023424)===Mi&&500>Wn()-ZO?Nu(e,0):QO|=r),Do(e,t)}function oH(e,t){t===0&&(e.mode&1?(t=hv,hv<<=1,!(hv&130023424)&&(hv=4194304)):t=1);var r=ho();e=cl(e,t),e!==null&&(sy(e,t,r),Do(e,r))}function Gte(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),oH(e,r)}function zte(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Ie(314))}n!==null&&n.delete(t),oH(e,r)}var aH;aH=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ko.current)No=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return No=!1,Pte(e,t,r);No=!!(e.flags&131072)}else No=!1,pn&&t.flags&1048576&&d7(t,B_,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;HE(e,t),e=t.pendingProps;var i=sf(t,Ji.current);Hp(t,r),i=zO(null,t,n,e,i,r);var o=KO();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Po(n)?(o=!0,F_(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,BO(t),i.updater=Iw,t.stateNode=i,i._reactInternals=t,Wx(t,n,e,r),t=Kx(null,t,n,!0,o,r)):(t.tag=0,pn&&o&&DO(t),so(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(HE(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=qte(n),e=_s(n,e),i){case 0:t=zx(null,t,n,e,r);break e;case 1:t=_L(null,t,n,e,r);break e;case 11:t=vL(null,t,n,e,r);break e;case 14:t=EL(null,t,n,_s(n.type,e),r);break e}throw Error(Ie(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:_s(n,i),zx(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:_s(n,i),_L(e,t,n,i,r);case 3:e:{if(H7(t),e===null)throw Error(Ie(387));n=t.pendingProps,o=t.memoizedState,i=o.element,g7(e,t),W_(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=uf(Error(Ie(423)),t),t=bL(e,t,n,r,i);break e}else if(n!==i){i=uf(Error(Ie(424)),t),t=bL(e,t,n,r,i);break e}else for(na=dd(t.stateNode.containerInfo.firstChild),la=t,pn=!0,Ts=null,r=f7(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(cf(),n===i){t=ll(e,t,r);break e}so(e,t,n,r)}t=t.child}return t;case 5:return y7(t),e===null&&Bx(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,Mx(n,i)?a=null:o!==null&&Mx(n,o)&&(t.flags|=32),$7(e,t),so(e,t,a,r),t.child;case 6:return e===null&&Bx(t),null;case 13:return W7(e,t,r);case 4:return $O(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=lf(t,null,n,r):so(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:_s(n,i),vL(e,t,n,i,r);case 7:return so(e,t,t.pendingProps,r),t.child;case 8:return so(e,t,t.pendingProps.children,r),t.child;case 12:return so(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Qr($_,n._currentValue),n._currentValue=a,o!==null)if(ks(o.value,a)){if(o.children===i.children&&!ko.current){t=ll(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var c=s.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=el(-1,r&-r),c.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var d=l.pending;d===null?c.next=c:(c.next=d.next,d.next=c),l.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),$x(o.return,r,t),s.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Ie(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),$x(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}so(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Hp(t,r),i=Qa(i),n=n(i),t.flags|=1,so(e,t,n,r),t.child;case 14:return n=t.type,i=_s(n,t.pendingProps),i=_s(n.type,i),EL(e,t,n,i,r);case 15:return V7(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:_s(n,i),HE(e,t),t.tag=1,Po(n)?(e=!0,F_(t)):e=!1,Hp(t,r),j7(t,n,i),Wx(t,n,i,r),Kx(null,t,n,!0,e,r);case 19:return G7(e,t,r);case 22:return B7(e,t,r)}throw Error(Ie(156,t.tag))};function sH(e,t){return D$(e,t)}function Kte(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qa(e,t,r,n){return new Kte(e,t,r,n)}function nk(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qte(e){if(typeof e=="function")return nk(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wO)return 11;if(e===SO)return 14}return 2}function fd(e,t){var r=e.alternate;return r===null?(r=qa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function zE(e,t,r,n,i,o){var a=2;if(n=e,typeof e=="function")nk(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case up:return Ou(r.children,i,o,t);case bO:a=8,i|=8;break;case fx:return e=qa(12,r,t,i|2),e.elementType=fx,e.lanes=o,e;case mx:return e=qa(13,r,t,i),e.elementType=mx,e.lanes=o,e;case gx:return e=qa(19,r,t,i),e.elementType=gx,e.lanes=o,e;case y$:return Nw(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case m$:a=10;break e;case g$:a=9;break e;case wO:a=11;break e;case SO:a=14;break e;case Bl:a=16,n=null;break e}throw Error(Ie(130,e==null?e:typeof e,""))}return t=qa(a,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Ou(e,t,r,n){return e=qa(7,e,n,t),e.lanes=r,e}function Nw(e,t,r,n){return e=qa(22,e,n,t),e.elementType=y$,e.lanes=r,e.stateNode={isHidden:!1},e}function ZT(e,t,r){return e=qa(6,e,null,t),e.lanes=r,e}function eC(e,t,r){return t=qa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yte(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=DT(0),this.expirationTimes=DT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=DT(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ik(e,t,r,n,i,o,a,s,c){return e=new Yte(e,t,r,s,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=qa(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},BO(o),e}function Xte(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dp,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function cH(e){if(!e)return Td;e=e._reactInternals;e:{if(ch(e)!==e||e.tag!==1)throw Error(Ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Po(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ie(171))}if(e.tag===1){var r=e.type;if(Po(r))return c7(e,r,t)}return t}function lH(e,t,r,n,i,o,a,s,c){return e=ik(r,n,!0,e,i,o,a,s,c),e.context=cH(null),r=e.current,n=ho(),i=pd(r),o=el(n,i),o.callback=t??null,ud(r,o,i),e.current.lanes=i,sy(e,i,n),Do(e,n),e}function Ow(e,t,r,n){var i=t.current,o=ho(),a=pd(i);return r=cH(r),t.context===null?t.context=r:t.pendingContext=r,t=el(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ud(i,t,a),e!==null&&(Ns(e,i,a,o),VE(e,i,a)),a}function Q_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function OL(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ok(e,t){OL(e,t),(e=e.alternate)&&OL(e,t)}function Jte(){return null}var dH=typeof reportError=="function"?reportError:function(e){console.error(e)};function ak(e){this._internalRoot=e}kw.prototype.render=ak.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ie(409));Ow(e,t,null,null)};kw.prototype.unmount=ak.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ku(function(){Ow(null,e,null,null)}),t[sl]=null}};function kw(e){this._internalRoot=e}kw.prototype.unstable_scheduleHydration=function(e){if(e){var t=B$();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Wl.length&&t!==0&&t<Wl[r].priority;r++);Wl.splice(r,0,e),r===0&&H$(e)}};function sk(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kL(){}function Qte(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var l=Q_(a);o.call(l)}}var a=lH(t,n,e,0,null,!1,!1,"",kL);return e._reactRootContainer=a,e[sl]=a.current,d0(e.nodeType===8?e.parentNode:e),Ku(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var l=Q_(c);s.call(l)}}var c=ik(e,0,!1,null,null,!1,!1,"",kL);return e._reactRootContainer=c,e[sl]=c.current,d0(e.nodeType===8?e.parentNode:e),Ku(function(){Ow(t,c,r,n)}),c}function Dw(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var c=Q_(a);s.call(c)}}Ow(t,a,e,i)}else a=Qte(r,t,e,i,n);return Q_(a)}F$=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=sg(t.pendingLanes);r!==0&&(RO(t,r|1),Do(t,Wn()),!(pr&6)&&(hf=Wn()+500,Dd()))}break;case 13:Ku(function(){var n=cl(e,1);if(n!==null){var i=ho();Ns(n,e,1,i)}}),ok(e,1)}};IO=function(e){if(e.tag===13){var t=cl(e,134217728);if(t!==null){var r=ho();Ns(t,e,134217728,r)}ok(e,134217728)}};V$=function(e){if(e.tag===13){var t=pd(e),r=cl(e,t);if(r!==null){var n=ho();Ns(r,e,t,n)}ok(e,t)}};B$=function(){return Mr};$$=function(e,t){var r=Mr;try{return Mr=e,t()}finally{Mr=r}};Rx=function(e,t,r){switch(t){case"input":if(Ex(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Tw(n);if(!i)throw Error(Ie(90));E$(n),Ex(n,i)}}}break;case"textarea":b$(e,r);break;case"select":t=r.value,t!=null&&Fp(e,!!r.multiple,t,!1)}};x$=ek;A$=Ku;var Zte={usingClientEntryPoint:!1,Events:[ly,mp,Tw,R$,I$,ek]},Mm={findFiberByHostInstance:yu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ere={bundleType:Mm.bundleType,version:Mm.version,rendererPackageName:Mm.rendererPackageName,rendererConfig:Mm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=k$(e),e===null?null:e.stateNode},findFiberByHostInstance:Mm.findFiberByHostInstance||Jte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sv.isDisabled&&Sv.supportsFiber)try{_w=Sv.inject(ere),uc=Sv}catch{}}ga.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zte;ga.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sk(t))throw Error(Ie(200));return Xte(e,t,null,r)};ga.createRoot=function(e,t){if(!sk(e))throw Error(Ie(299));var r=!1,n="",i=dH;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ik(e,1,!1,null,null,r,!1,n,i),e[sl]=t.current,d0(e.nodeType===8?e.parentNode:e),new ak(t)};ga.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ie(188)):(e=Object.keys(e).join(","),Error(Ie(268,e)));return e=k$(t),e=e===null?null:e.stateNode,e};ga.flushSync=function(e){return Ku(e)};ga.hydrate=function(e,t,r){if(!Pw(t))throw Error(Ie(200));return Dw(null,e,t,!0,r)};ga.hydrateRoot=function(e,t,r){if(!sk(e))throw Error(Ie(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=dH;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=lH(t,null,e,1,r??null,i,!1,o,a),e[sl]=t.current,d0(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new kw(t)};ga.render=function(e,t,r){if(!Pw(t))throw Error(Ie(200));return Dw(null,e,t,!1,r)};ga.unmountComponentAtNode=function(e){if(!Pw(e))throw Error(Ie(40));return e._reactRootContainer?(Ku(function(){Dw(null,null,e,!1,function(){e._reactRootContainer=null,e[sl]=null})}),!0):!1};ga.unstable_batchedUpdates=ek;ga.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Pw(r))throw Error(Ie(200));if(e==null||e._reactInternals===void 0)throw Error(Ie(38));return Dw(e,t,r,!1,n)};ga.version="18.3.1-next-f1338f8080-20240426";function uH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uH)}catch(e){console.error(e)}}uH(),u$.exports=ga;var Lw=u$.exports,hH,PL=Lw;hH=PL.createRoot,PL.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function E0(){return E0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E0.apply(this,arguments)}var Ql;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ql||(Ql={}));const DL="popstate";function tre(e){e===void 0&&(e={});function t(n,i){let{pathname:o,search:a,hash:s}=n.location;return oA("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Z_(i)}return nre(t,r,null,e)}function ei(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pH(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rre(){return Math.random().toString(36).substr(2,8)}function LL(e,t){return{usr:e.state,key:e.key,idx:t}}function oA(e,t,r,n){return r===void 0&&(r=null),E0({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Bf(t):t,{state:r,key:t&&t.key||n||rre()})}function Z_(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Bf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function nre(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s=Ql.Pop,c=null,l=d();l==null&&(l=0,a.replaceState(E0({},a.state,{idx:l}),""));function d(){return(a.state||{idx:null}).idx}function u(){s=Ql.Pop;let y=d(),v=y==null?null:y-l;l=y,c&&c({action:s,location:g.location,delta:v})}function p(y,v){s=Ql.Push;let E=oA(g.location,y,v);l=d()+1;let w=LL(E,l),S=g.createHref(E);try{a.pushState(w,"",S)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(S)}o&&c&&c({action:s,location:g.location,delta:1})}function f(y,v){s=Ql.Replace;let E=oA(g.location,y,v);l=d();let w=LL(E,l),S=g.createHref(E);a.replaceState(w,"",S),o&&c&&c({action:s,location:g.location,delta:0})}function m(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof y=="string"?y:Z_(y);return E=E.replace(/ $/,"%20"),ei(v,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,v)}let g={get action(){return s},get location(){return e(i,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(DL,u),c=y,()=>{i.removeEventListener(DL,u),c=null}},createHref(y){return t(i,y)},createURL:m,encodeLocation(y){let v=m(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:f,go(y){return a.go(y)}};return g}var ML;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ML||(ML={}));function ire(e,t,r){return r===void 0&&(r="/"),ore(e,t,r,!1)}function ore(e,t,r,n){let i=typeof t=="string"?Bf(t):t,o=ck(i.pathname||"/",r);if(o==null)return null;let a=fH(e);are(a);let s=null;for(let c=0;s==null&&c<a.length;++c){let l=yre(o);s=mre(a[c],l,n)}return s}function fH(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,a,s)=>{let c={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(ei(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let l=md([n,c.relativePath]),d=r.concat(c);o.children&&o.children.length>0&&(ei(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),fH(o.children,t,d,l)),!(o.path==null&&!o.index)&&t.push({path:l,score:pre(l,o.index),routesMeta:d})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let c of mH(o.path))i(o,a,c)}),t}function mH(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=mH(n.join("/")),s=[];return s.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&s.push(...a),s.map(c=>e.startsWith("/")&&c===""?"/":c)}function are(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:fre(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const sre=/^:[\w-]+$/,cre=3,lre=2,dre=1,ure=10,hre=-2,jL=e=>e==="*";function pre(e,t){let r=e.split("/"),n=r.length;return r.some(jL)&&(n+=hre),t&&(n+=lre),r.filter(i=>!jL(i)).reduce((i,o)=>i+(sre.test(o)?cre:o===""?dre:ure),n)}function fre(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function mre(e,t,r){let{routesMeta:n}=e,i={},o="/",a=[];for(let s=0;s<n.length;++s){let c=n[s],l=s===n.length-1,d=o==="/"?t:t.slice(o.length)||"/",u=UL({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},d),p=c.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=UL({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:md([o,u.pathname]),pathnameBase:bre(md([o,u.pathnameBase])),route:p}),u.pathnameBase!=="/"&&(o=md([o,u.pathnameBase]))}return a}function UL(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=gre(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((l,d,u)=>{let{paramName:p,isOptional:f}=d;if(p==="*"){let g=s[u]||"";a=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const m=s[u];return f&&!m?l[p]=void 0:l[p]=(m||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:a,pattern:e}}function gre(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),pH(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,c)=>(n.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function yre(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return pH(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ck(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function vre(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Bf(e):e;return{pathname:r?r.startsWith("/")?r:Ere(r,t):t,search:wre(n),hash:Sre(i)}}function Ere(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function tC(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _re(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function gH(e,t){let r=_re(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function yH(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=Bf(e):(i=E0({},e),ei(!i.pathname||!i.pathname.includes("?"),tC("?","pathname","search",i)),ei(!i.pathname||!i.pathname.includes("#"),tC("#","pathname","hash",i)),ei(!i.search||!i.search.includes("#"),tC("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=r;else{let u=t.length-1;if(!n&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),u-=1;i.pathname=p.join("/")}s=u>=0?t[u]:"/"}let c=vre(i,s),l=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(l||d)&&(c.pathname+="/"),c}const md=e=>e.join("/").replace(/\/\/+/g,"/"),bre=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wre=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Sre=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Tre(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const vH=["post","put","patch","delete"];new Set(vH);const Cre=["get",...vH];new Set(Cre);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _0(){return _0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_0.apply(this,arguments)}const lk=T.createContext(null),Rre=T.createContext(null),lh=T.createContext(null),Mw=T.createContext(null),yl=T.createContext({outlet:null,matches:[],isDataRoute:!1}),EH=T.createContext(null);function Ire(e,t){let{relative:r}=t===void 0?{}:t;uy()||ei(!1);let{basename:n,navigator:i}=T.useContext(lh),{hash:o,pathname:a,search:s}=bH(e,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:md([n,a])),i.createHref({pathname:c,search:s,hash:o})}function uy(){return T.useContext(Mw)!=null}function $f(){return uy()||ei(!1),T.useContext(Mw).location}function _H(e){T.useContext(lh).static||T.useLayoutEffect(e)}function qr(){let{isDataRoute:e}=T.useContext(yl);return e?$re():xre()}function xre(){uy()||ei(!1);let e=T.useContext(lk),{basename:t,future:r,navigator:n}=T.useContext(lh),{matches:i}=T.useContext(yl),{pathname:o}=$f(),a=JSON.stringify(gH(i,r.v7_relativeSplatPath)),s=T.useRef(!1);return _H(()=>{s.current=!0}),T.useCallback(function(l,d){if(d===void 0&&(d={}),!s.current)return;if(typeof l=="number"){n.go(l);return}let u=yH(l,JSON.parse(a),o,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:md([t,u.pathname])),(d.replace?n.replace:n.push)(u,d.state,d)},[t,n,a,o,e])}const Are=T.createContext(null);function Nre(e){let t=T.useContext(yl).outlet;return t&&T.createElement(Are.Provider,{value:e},t)}function Hf(){let{matches:e}=T.useContext(yl),t=e[e.length-1];return t?t.params:{}}function bH(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=T.useContext(lh),{matches:i}=T.useContext(yl),{pathname:o}=$f(),a=JSON.stringify(gH(i,n.v7_relativeSplatPath));return T.useMemo(()=>yH(e,JSON.parse(a),o,r==="path"),[e,a,o,r])}function Ore(e,t){return kre(e,t)}function kre(e,t,r,n){uy()||ei(!1);let{navigator:i}=T.useContext(lh),{matches:o}=T.useContext(yl),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let l=$f(),d;if(t){var u;let y=typeof t=="string"?Bf(t):t;c==="/"||(u=y.pathname)!=null&&u.startsWith(c)||ei(!1),d=y}else d=l;let p=d.pathname||"/",f=p;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=ire(e,{pathname:f}),g=jre(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},s,y.params),pathname:md([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:md([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,r,n);return t&&g?T.createElement(Mw.Provider,{value:{location:_0({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ql.Pop}},g):g}function Pre(){let e=Bre(),t=Tre(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:i},r):null,null)}const Dre=T.createElement(Pre,null);class Lre extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?T.createElement(yl.Provider,{value:this.props.routeContext},T.createElement(EH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mre(e){let{routeContext:t,match:r,children:n}=e,i=T.useContext(lk);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(yl.Provider,{value:t},n)}function jre(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,s=(i=r)==null?void 0:i.errors;if(s!=null){let d=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);d>=0||ei(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,l=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let u=a[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=d),u.route.id){let{loaderData:p,errors:f}=r,m=u.route.loader&&p[u.route.id]===void 0&&(!f||f[u.route.id]===void 0);if(u.route.lazy||m){c=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((d,u,p)=>{let f,m=!1,g=null,y=null;r&&(f=s&&u.route.id?s[u.route.id]:void 0,g=u.route.errorElement||Dre,c&&(l<0&&p===0?(m=!0,y=null):l===p&&(m=!0,y=u.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,p+1)),E=()=>{let w;return f?w=g:m?w=y:u.route.Component?w=T.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=d,T.createElement(Mre,{match:u,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:w})};return r&&(u.route.ErrorBoundary||u.route.errorElement||p===0)?T.createElement(Lre,{location:r.location,revalidation:r.revalidation,component:g,error:f,children:E(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):E()},null)}var wH=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(wH||{}),eb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(eb||{});function Ure(e){let t=T.useContext(lk);return t||ei(!1),t}function Fre(e){let t=T.useContext(Rre);return t||ei(!1),t}function Vre(e){let t=T.useContext(yl);return t||ei(!1),t}function SH(e){let t=Vre(),r=t.matches[t.matches.length-1];return r.route.id||ei(!1),r.route.id}function Bre(){var e;let t=T.useContext(EH),r=Fre(eb.UseRouteError),n=SH(eb.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function $re(){let{router:e}=Ure(wH.UseNavigateStable),t=SH(eb.UseNavigateStable),r=T.useRef(!1);return _H(()=>{r.current=!0}),T.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,_0({fromRouteId:t},o)))},[e,t])}const FL={};function Hre(e,t){FL[t]||(FL[t]=!0,console.warn(t))}const VL=(e,t,r)=>Hre(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+r+"."));function Wre(e,t){e!=null&&e.v7_startTransition||VL("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&VL("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Fi(e){return Nre(e.context)}function Ye(e){ei(!1)}function Gre(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Ql.Pop,navigator:o,static:a=!1,future:s}=e;uy()&&ei(!1);let c=t.replace(/^\/*/,"/"),l=T.useMemo(()=>({basename:c,navigator:o,static:a,future:_0({v7_relativeSplatPath:!1},s)}),[c,s,o,a]);typeof n=="string"&&(n=Bf(n));let{pathname:d="/",search:u="",hash:p="",state:f=null,key:m="default"}=n,g=T.useMemo(()=>{let y=ck(d,c);return y==null?null:{location:{pathname:y,search:u,hash:p,state:f,key:m},navigationType:i}},[c,d,u,p,f,m,i]);return g==null?null:T.createElement(lh.Provider,{value:l},T.createElement(Mw.Provider,{children:r,value:g}))}function zre(e){let{children:t,location:r}=e;return Ore(aA(t),r)}new Promise(()=>{});function aA(e,t){t===void 0&&(t=[]);let r=[];return T.Children.forEach(e,(n,i)=>{if(!T.isValidElement(n))return;let o=[...t,i];if(n.type===T.Fragment){r.push.apply(r,aA(n.props.children,o));return}n.type!==Ye&&ei(!1),!n.props.index||!n.props.children||ei(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=aA(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sA(){return sA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sA.apply(this,arguments)}function Kre(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function qre(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Yre(e,t){return e.button===0&&(!t||t==="_self")&&!qre(e)}function tb(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Xre(e,t){let r=tb(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(o=>{r.append(i,o)})}),r}const Jre=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Qre="6";try{window.__reactRouterVersion=Qre}catch{}const Zre="startTransition",BL=l$[Zre];function ene(e){let{basename:t,children:r,future:n,window:i}=e,o=T.useRef();o.current==null&&(o.current=tre({window:i,v5Compat:!0}));let a=o.current,[s,c]=T.useState({action:a.action,location:a.location}),{v7_startTransition:l}=n||{},d=T.useCallback(u=>{l&&BL?BL(()=>c(u)):c(u)},[c,l]);return T.useLayoutEffect(()=>a.listen(d),[a,d]),T.useEffect(()=>Wre(n),[n]),T.createElement(Gre,{basename:t,children:r,location:s.location,navigationType:s.action,navigator:a,future:n})}const tne=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sr=T.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:o,replace:a,state:s,target:c,to:l,preventScrollReset:d,viewTransition:u}=t,p=Kre(t,Jre),{basename:f}=T.useContext(lh),m,g=!1;if(typeof l=="string"&&rne.test(l)&&(m=l,tne))try{let w=new URL(window.location.href),S=l.startsWith("//")?new URL(w.protocol+l):new URL(l),x=ck(S.pathname,f);S.origin===w.origin&&x!=null?l=x+S.search+S.hash:g=!0}catch{}let y=Ire(l,{relative:i}),v=nne(l,{replace:a,state:s,target:c,preventScrollReset:d,relative:i,viewTransition:u});function E(w){n&&n(w),w.defaultPrevented||v(w)}return T.createElement("a",sA({},p,{href:m||y,onClick:g||o?n:E,ref:r,target:c}))});var $L;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})($L||($L={}));var HL;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(HL||(HL={}));function nne(e,t){let{target:r,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:s}=t===void 0?{}:t,c=qr(),l=$f(),d=bH(e,{relative:a});return T.useCallback(u=>{if(Yre(u,r)){u.preventDefault();let p=n!==void 0?n:Z_(l)===Z_(d);c(e,{replace:p,state:i,preventScrollReset:o,relative:a,viewTransition:s})}},[l,c,d,n,i,r,e,o,a,s])}function TH(e){let t=T.useRef(tb(e)),r=T.useRef(!1),n=$f(),i=T.useMemo(()=>Xre(n.search,r.current?null:t.current),[n.search]),o=qr(),a=T.useCallback((s,c)=>{const l=tb(typeof s=="function"?s(i):s);r.current=!0,o("?"+l,c)},[o,i]);return[i,a]}var ine=function(t){return one(t)&&!ane(t)};function one(e){return!!e&&typeof e=="object"}function ane(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||lne(e)}var sne=typeof Symbol=="function"&&Symbol.for,cne=sne?Symbol.for("react.element"):60103;function lne(e){return e.$$typeof===cne}function dne(e){return Array.isArray(e)?[]:{}}function rb(e,t){return t.clone!==!1&&t.isMergeableObject(e)?b0(dne(e),e,t):e}function une(e,t,r){return e.concat(t).map(function(n){return rb(n,r)})}function hne(e,t,r){var n={};return r.isMergeableObject(e)&&Object.keys(e).forEach(function(i){n[i]=rb(e[i],r)}),Object.keys(t).forEach(function(i){!r.isMergeableObject(t[i])||!e[i]?n[i]=rb(t[i],r):n[i]=b0(e[i],t[i],r)}),n}function b0(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||une,r.isMergeableObject=r.isMergeableObject||ine;var n=Array.isArray(t),i=Array.isArray(e),o=n===i;return o?n?r.arrayMerge(e,t,r):hne(e,t,r):rb(t,r)}b0.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return b0(n,i,r)},{})};var cA=b0,CH=typeof global=="object"&&global&&global.Object===Object&&global,pne=typeof self=="object"&&self&&self.Object===Object&&self,bc=CH||pne||Function("return this")(),Cd=bc.Symbol,RH=Object.prototype,fne=RH.hasOwnProperty,mne=RH.toString,jm=Cd?Cd.toStringTag:void 0;function gne(e){var t=fne.call(e,jm),r=e[jm];try{e[jm]=void 0;var n=!0}catch{}var i=mne.call(e);return n&&(t?e[jm]=r:delete e[jm]),i}var yne=Object.prototype,vne=yne.toString;function Ene(e){return vne.call(e)}var _ne="[object Null]",bne="[object Undefined]",WL=Cd?Cd.toStringTag:void 0;function dh(e){return e==null?e===void 0?bne:_ne:WL&&WL in Object(e)?gne(e):Ene(e)}function IH(e,t){return function(r){return e(t(r))}}var dk=IH(Object.getPrototypeOf,Object);function uh(e){return e!=null&&typeof e=="object"}var wne="[object Object]",Sne=Function.prototype,Tne=Object.prototype,xH=Sne.toString,Cne=Tne.hasOwnProperty,Rne=xH.call(Object);function GL(e){if(!uh(e)||dh(e)!=wne)return!1;var t=dk(e);if(t===null)return!0;var r=Cne.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&xH.call(r)==Rne}function Ine(){this.__data__=[],this.size=0}function AH(e,t){return e===t||e!==e&&t!==t}function jw(e,t){for(var r=e.length;r--;)if(AH(e[r][0],t))return r;return-1}var xne=Array.prototype,Ane=xne.splice;function Nne(e){var t=this.__data__,r=jw(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Ane.call(t,r,1),--this.size,!0}function One(e){var t=this.__data__,r=jw(t,e);return r<0?void 0:t[r][1]}function kne(e){return jw(this.__data__,e)>-1}function Pne(e,t){var r=this.__data__,n=jw(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function vl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}vl.prototype.clear=Ine;vl.prototype.delete=Nne;vl.prototype.get=One;vl.prototype.has=kne;vl.prototype.set=Pne;function Dne(){this.__data__=new vl,this.size=0}function Lne(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Mne(e){return this.__data__.get(e)}function jne(e){return this.__data__.has(e)}function hy(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Une="[object AsyncFunction]",Fne="[object Function]",Vne="[object GeneratorFunction]",Bne="[object Proxy]";function NH(e){if(!hy(e))return!1;var t=dh(e);return t==Fne||t==Vne||t==Une||t==Bne}var rC=bc["__core-js_shared__"],zL=function(){var e=/[^.]+$/.exec(rC&&rC.keys&&rC.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function $ne(e){return!!zL&&zL in e}var Hne=Function.prototype,Wne=Hne.toString;function hh(e){if(e!=null){try{return Wne.call(e)}catch{}try{return e+""}catch{}}return""}var Gne=/[\\^$.*+?()[\]{}|]/g,zne=/^\[object .+?Constructor\]$/,Kne=Function.prototype,qne=Object.prototype,Yne=Kne.toString,Xne=qne.hasOwnProperty,Jne=RegExp("^"+Yne.call(Xne).replace(Gne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qne(e){if(!hy(e)||$ne(e))return!1;var t=NH(e)?Jne:zne;return t.test(hh(e))}function Zne(e,t){return e==null?void 0:e[t]}function ph(e,t){var r=Zne(e,t);return Qne(r)?r:void 0}var w0=ph(bc,"Map"),S0=ph(Object,"create");function eie(){this.__data__=S0?S0(null):{},this.size=0}function tie(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var rie="__lodash_hash_undefined__",nie=Object.prototype,iie=nie.hasOwnProperty;function oie(e){var t=this.__data__;if(S0){var r=t[e];return r===rie?void 0:r}return iie.call(t,e)?t[e]:void 0}var aie=Object.prototype,sie=aie.hasOwnProperty;function cie(e){var t=this.__data__;return S0?t[e]!==void 0:sie.call(t,e)}var lie="__lodash_hash_undefined__";function die(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=S0&&t===void 0?lie:t,this}function qu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qu.prototype.clear=eie;qu.prototype.delete=tie;qu.prototype.get=oie;qu.prototype.has=cie;qu.prototype.set=die;function uie(){this.size=0,this.__data__={hash:new qu,map:new(w0||vl),string:new qu}}function hie(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Uw(e,t){var r=e.__data__;return hie(t)?r[typeof t=="string"?"string":"hash"]:r.map}function pie(e){var t=Uw(this,e).delete(e);return this.size-=t?1:0,t}function fie(e){return Uw(this,e).get(e)}function mie(e){return Uw(this,e).has(e)}function gie(e,t){var r=Uw(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function Ld(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ld.prototype.clear=uie;Ld.prototype.delete=pie;Ld.prototype.get=fie;Ld.prototype.has=mie;Ld.prototype.set=gie;var yie=200;function vie(e,t){var r=this.__data__;if(r instanceof vl){var n=r.__data__;if(!w0||n.length<yie-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ld(n)}return r.set(e,t),this.size=r.size,this}function Wf(e){var t=this.__data__=new vl(e);this.size=t.size}Wf.prototype.clear=Dne;Wf.prototype.delete=Lne;Wf.prototype.get=Mne;Wf.prototype.has=jne;Wf.prototype.set=vie;function Eie(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var KL=function(){try{var e=ph(Object,"defineProperty");return e({},"",{}),e}catch{}}();function OH(e,t,r){t=="__proto__"&&KL?KL(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var _ie=Object.prototype,bie=_ie.hasOwnProperty;function kH(e,t,r){var n=e[t];(!(bie.call(e,t)&&AH(n,r))||r===void 0&&!(t in e))&&OH(e,t,r)}function Fw(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=void 0;c===void 0&&(c=e[s]),i?OH(r,s,c):kH(r,s,c)}return r}function wie(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Sie="[object Arguments]";function qL(e){return uh(e)&&dh(e)==Sie}var PH=Object.prototype,Tie=PH.hasOwnProperty,Cie=PH.propertyIsEnumerable,Rie=qL(function(){return arguments}())?qL:function(e){return uh(e)&&Tie.call(e,"callee")&&!Cie.call(e,"callee")},py=Array.isArray;function Iie(){return!1}var DH=typeof sa=="object"&&sa&&!sa.nodeType&&sa,YL=DH&&typeof ca=="object"&&ca&&!ca.nodeType&&ca,xie=YL&&YL.exports===DH,XL=xie?bc.Buffer:void 0,Aie=XL?XL.isBuffer:void 0,LH=Aie||Iie,Nie=9007199254740991,Oie=/^(?:0|[1-9]\d*)$/;function kie(e,t){var r=typeof e;return t=t??Nie,!!t&&(r=="number"||r!="symbol"&&Oie.test(e))&&e>-1&&e%1==0&&e<t}var Pie=9007199254740991;function MH(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Pie}var Die="[object Arguments]",Lie="[object Array]",Mie="[object Boolean]",jie="[object Date]",Uie="[object Error]",Fie="[object Function]",Vie="[object Map]",Bie="[object Number]",$ie="[object Object]",Hie="[object RegExp]",Wie="[object Set]",Gie="[object String]",zie="[object WeakMap]",Kie="[object ArrayBuffer]",qie="[object DataView]",Yie="[object Float32Array]",Xie="[object Float64Array]",Jie="[object Int8Array]",Qie="[object Int16Array]",Zie="[object Int32Array]",eoe="[object Uint8Array]",toe="[object Uint8ClampedArray]",roe="[object Uint16Array]",noe="[object Uint32Array]",on={};on[Yie]=on[Xie]=on[Jie]=on[Qie]=on[Zie]=on[eoe]=on[toe]=on[roe]=on[noe]=!0;on[Die]=on[Lie]=on[Kie]=on[Mie]=on[qie]=on[jie]=on[Uie]=on[Fie]=on[Vie]=on[Bie]=on[$ie]=on[Hie]=on[Wie]=on[Gie]=on[zie]=!1;function ioe(e){return uh(e)&&MH(e.length)&&!!on[dh(e)]}function uk(e){return function(t){return e(t)}}var jH=typeof sa=="object"&&sa&&!sa.nodeType&&sa,Dg=jH&&typeof ca=="object"&&ca&&!ca.nodeType&&ca,ooe=Dg&&Dg.exports===jH,nC=ooe&&CH.process,pf=function(){try{var e=Dg&&Dg.require&&Dg.require("util").types;return e||nC&&nC.binding&&nC.binding("util")}catch{}}(),JL=pf&&pf.isTypedArray,aoe=JL?uk(JL):ioe,soe=Object.prototype,coe=soe.hasOwnProperty;function UH(e,t){var r=py(e),n=!r&&Rie(e),i=!r&&!n&&LH(e),o=!r&&!n&&!i&&aoe(e),a=r||n||i||o,s=a?wie(e.length,String):[],c=s.length;for(var l in e)(t||coe.call(e,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||kie(l,c)))&&s.push(l);return s}var loe=Object.prototype;function hk(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||loe;return e===r}var doe=IH(Object.keys,Object),uoe=Object.prototype,hoe=uoe.hasOwnProperty;function poe(e){if(!hk(e))return doe(e);var t=[];for(var r in Object(e))hoe.call(e,r)&&r!="constructor"&&t.push(r);return t}function FH(e){return e!=null&&MH(e.length)&&!NH(e)}function pk(e){return FH(e)?UH(e):poe(e)}function foe(e,t){return e&&Fw(t,pk(t),e)}function moe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var goe=Object.prototype,yoe=goe.hasOwnProperty;function voe(e){if(!hy(e))return moe(e);var t=hk(e),r=[];for(var n in e)n=="constructor"&&(t||!yoe.call(e,n))||r.push(n);return r}function fk(e){return FH(e)?UH(e,!0):voe(e)}function Eoe(e,t){return e&&Fw(t,fk(t),e)}var VH=typeof sa=="object"&&sa&&!sa.nodeType&&sa,QL=VH&&typeof ca=="object"&&ca&&!ca.nodeType&&ca,_oe=QL&&QL.exports===VH,ZL=_oe?bc.Buffer:void 0,eM=ZL?ZL.allocUnsafe:void 0;function boe(e,t){if(t)return e.slice();var r=e.length,n=eM?eM(r):new e.constructor(r);return e.copy(n),n}function BH(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function woe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}function $H(){return[]}var Soe=Object.prototype,Toe=Soe.propertyIsEnumerable,tM=Object.getOwnPropertySymbols,mk=tM?function(e){return e==null?[]:(e=Object(e),woe(tM(e),function(t){return Toe.call(e,t)}))}:$H;function Coe(e,t){return Fw(e,mk(e),t)}function HH(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var Roe=Object.getOwnPropertySymbols,WH=Roe?function(e){for(var t=[];e;)HH(t,mk(e)),e=dk(e);return t}:$H;function Ioe(e,t){return Fw(e,WH(e),t)}function GH(e,t,r){var n=t(e);return py(e)?n:HH(n,r(e))}function xoe(e){return GH(e,pk,mk)}function Aoe(e){return GH(e,fk,WH)}var lA=ph(bc,"DataView"),dA=ph(bc,"Promise"),uA=ph(bc,"Set"),hA=ph(bc,"WeakMap"),rM="[object Map]",Noe="[object Object]",nM="[object Promise]",iM="[object Set]",oM="[object WeakMap]",aM="[object DataView]",Ooe=hh(lA),koe=hh(w0),Poe=hh(dA),Doe=hh(uA),Loe=hh(hA),Gc=dh;(lA&&Gc(new lA(new ArrayBuffer(1)))!=aM||w0&&Gc(new w0)!=rM||dA&&Gc(dA.resolve())!=nM||uA&&Gc(new uA)!=iM||hA&&Gc(new hA)!=oM)&&(Gc=function(e){var t=dh(e),r=t==Noe?e.constructor:void 0,n=r?hh(r):"";if(n)switch(n){case Ooe:return aM;case koe:return rM;case Poe:return nM;case Doe:return iM;case Loe:return oM}return t});var Moe=Object.prototype,joe=Moe.hasOwnProperty;function Uoe(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&joe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var sM=bc.Uint8Array;function gk(e){var t=new e.constructor(e.byteLength);return new sM(t).set(new sM(e)),t}function Foe(e,t){var r=t?gk(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Voe=/\w*$/;function Boe(e){var t=new e.constructor(e.source,Voe.exec(e));return t.lastIndex=e.lastIndex,t}var cM=Cd?Cd.prototype:void 0,lM=cM?cM.valueOf:void 0;function $oe(e){return lM?Object(lM.call(e)):{}}function Hoe(e,t){var r=t?gk(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Woe="[object Boolean]",Goe="[object Date]",zoe="[object Map]",Koe="[object Number]",qoe="[object RegExp]",Yoe="[object Set]",Xoe="[object String]",Joe="[object Symbol]",Qoe="[object ArrayBuffer]",Zoe="[object DataView]",eae="[object Float32Array]",tae="[object Float64Array]",rae="[object Int8Array]",nae="[object Int16Array]",iae="[object Int32Array]",oae="[object Uint8Array]",aae="[object Uint8ClampedArray]",sae="[object Uint16Array]",cae="[object Uint32Array]";function lae(e,t,r){var n=e.constructor;switch(t){case Qoe:return gk(e);case Woe:case Goe:return new n(+e);case Zoe:return Foe(e,r);case eae:case tae:case rae:case nae:case iae:case oae:case aae:case sae:case cae:return Hoe(e,r);case zoe:return new n;case Koe:case Xoe:return new n(e);case qoe:return Boe(e);case Yoe:return new n;case Joe:return $oe(e)}}var dM=Object.create,dae=function(){function e(){}return function(t){if(!hy(t))return{};if(dM)return dM(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function uae(e){return typeof e.constructor=="function"&&!hk(e)?dae(dk(e)):{}}var hae="[object Map]";function pae(e){return uh(e)&&Gc(e)==hae}var uM=pf&&pf.isMap,fae=uM?uk(uM):pae,mae="[object Set]";function gae(e){return uh(e)&&Gc(e)==mae}var hM=pf&&pf.isSet,yae=hM?uk(hM):gae,vae=1,Eae=2,_ae=4,zH="[object Arguments]",bae="[object Array]",wae="[object Boolean]",Sae="[object Date]",Tae="[object Error]",KH="[object Function]",Cae="[object GeneratorFunction]",Rae="[object Map]",Iae="[object Number]",qH="[object Object]",xae="[object RegExp]",Aae="[object Set]",Nae="[object String]",Oae="[object Symbol]",kae="[object WeakMap]",Pae="[object ArrayBuffer]",Dae="[object DataView]",Lae="[object Float32Array]",Mae="[object Float64Array]",jae="[object Int8Array]",Uae="[object Int16Array]",Fae="[object Int32Array]",Vae="[object Uint8Array]",Bae="[object Uint8ClampedArray]",$ae="[object Uint16Array]",Hae="[object Uint32Array]",Xr={};Xr[zH]=Xr[bae]=Xr[Pae]=Xr[Dae]=Xr[wae]=Xr[Sae]=Xr[Lae]=Xr[Mae]=Xr[jae]=Xr[Uae]=Xr[Fae]=Xr[Rae]=Xr[Iae]=Xr[qH]=Xr[xae]=Xr[Aae]=Xr[Nae]=Xr[Oae]=Xr[Vae]=Xr[Bae]=Xr[$ae]=Xr[Hae]=!0;Xr[Tae]=Xr[KH]=Xr[kae]=!1;function Lg(e,t,r,n,i,o){var a,s=t&vae,c=t&Eae,l=t&_ae;if(a!==void 0)return a;if(!hy(e))return e;var d=py(e);if(d){if(a=Uoe(e),!s)return BH(e,a)}else{var u=Gc(e),p=u==KH||u==Cae;if(LH(e))return boe(e,s);if(u==qH||u==zH||p&&!i){if(a=c||p?{}:uae(e),!s)return c?Ioe(e,Eoe(a,e)):Coe(e,foe(a,e))}else{if(!Xr[u])return i?e:{};a=lae(e,u,s)}}o||(o=new Wf);var f=o.get(e);if(f)return f;o.set(e,a),yae(e)?e.forEach(function(y){a.add(Lg(y,t,r,y,e,o))}):fae(e)&&e.forEach(function(y,v){a.set(v,Lg(y,t,r,v,e,o))});var m=l?c?Aoe:xoe:c?fk:pk,g=d?void 0:m(e);return Eie(g||e,function(y,v){g&&(v=y,y=e[v]),kH(a,v,Lg(y,t,r,v,e,o))}),a}var Wae=1,Gae=4;function Tv(e){return Lg(e,Wae|Gae)}var pM=Array.isArray,fM=Object.keys,zae=Object.prototype.hasOwnProperty,Kae=typeof Element<"u";function pA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=pM(e),n=pM(t),i,o,a;if(r&&n){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!pA(e[i],t[i]))return!1;return!0}if(r!=n)return!1;var s=e instanceof Date,c=t instanceof Date;if(s!=c)return!1;if(s&&c)return e.getTime()==t.getTime();var l=e instanceof RegExp,d=t instanceof RegExp;if(l!=d)return!1;if(l&&d)return e.toString()==t.toString();var u=fM(e);if(o=u.length,o!==fM(t).length)return!1;for(i=o;i--!==0;)if(!zae.call(t,u[i]))return!1;if(Kae&&e instanceof Element&&t instanceof Element)return e===t;for(i=o;i--!==0;)if(a=u[i],!(a==="_owner"&&e.$$typeof)&&!pA(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}var qae=function(t,r){try{return pA(t,r)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||n.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}};const iu=rs(qae);var Yae=4;function mM(e){return Lg(e,Yae)}function YH(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var Xae="[object Symbol]";function yk(e){return typeof e=="symbol"||uh(e)&&dh(e)==Xae}var Jae="Expected a function";function vk(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Jae);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(vk.Cache||Ld),r}vk.Cache=Ld;var Qae=500;function Zae(e){var t=vk(e,function(n){return r.size===Qae&&r.clear(),n}),r=t.cache;return t}var ese=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tse=/\\(\\)?/g,rse=Zae(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ese,function(r,n,i,o){t.push(i?o.replace(tse,"$1"):n||r)}),t}),nse=1/0;function ise(e){if(typeof e=="string"||yk(e))return e;var t=e+"";return t=="0"&&1/e==-nse?"-0":t}var ose=1/0,gM=Cd?Cd.prototype:void 0,yM=gM?gM.toString:void 0;function XH(e){if(typeof e=="string")return e;if(py(e))return YH(e,XH)+"";if(yk(e))return yM?yM.call(e):"";var t=e+"";return t=="0"&&1/e==-ose?"-0":t}function ase(e){return e==null?"":XH(e)}function JH(e){return py(e)?YH(e,ise):yk(e)?[e]:BH(rse(ase(e)))}var QH={exports:{}},jr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ri=typeof Symbol=="function"&&Symbol.for,Ek=Ri?Symbol.for("react.element"):60103,_k=Ri?Symbol.for("react.portal"):60106,Vw=Ri?Symbol.for("react.fragment"):60107,Bw=Ri?Symbol.for("react.strict_mode"):60108,$w=Ri?Symbol.for("react.profiler"):60114,Hw=Ri?Symbol.for("react.provider"):60109,Ww=Ri?Symbol.for("react.context"):60110,bk=Ri?Symbol.for("react.async_mode"):60111,Gw=Ri?Symbol.for("react.concurrent_mode"):60111,zw=Ri?Symbol.for("react.forward_ref"):60112,Kw=Ri?Symbol.for("react.suspense"):60113,sse=Ri?Symbol.for("react.suspense_list"):60120,qw=Ri?Symbol.for("react.memo"):60115,Yw=Ri?Symbol.for("react.lazy"):60116,cse=Ri?Symbol.for("react.block"):60121,lse=Ri?Symbol.for("react.fundamental"):60117,dse=Ri?Symbol.for("react.responder"):60118,use=Ri?Symbol.for("react.scope"):60119;function va(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Ek:switch(e=e.type,e){case bk:case Gw:case Vw:case $w:case Bw:case Kw:return e;default:switch(e=e&&e.$$typeof,e){case Ww:case zw:case Yw:case qw:case Hw:return e;default:return t}}case _k:return t}}}function ZH(e){return va(e)===Gw}jr.AsyncMode=bk;jr.ConcurrentMode=Gw;jr.ContextConsumer=Ww;jr.ContextProvider=Hw;jr.Element=Ek;jr.ForwardRef=zw;jr.Fragment=Vw;jr.Lazy=Yw;jr.Memo=qw;jr.Portal=_k;jr.Profiler=$w;jr.StrictMode=Bw;jr.Suspense=Kw;jr.isAsyncMode=function(e){return ZH(e)||va(e)===bk};jr.isConcurrentMode=ZH;jr.isContextConsumer=function(e){return va(e)===Ww};jr.isContextProvider=function(e){return va(e)===Hw};jr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ek};jr.isForwardRef=function(e){return va(e)===zw};jr.isFragment=function(e){return va(e)===Vw};jr.isLazy=function(e){return va(e)===Yw};jr.isMemo=function(e){return va(e)===qw};jr.isPortal=function(e){return va(e)===_k};jr.isProfiler=function(e){return va(e)===$w};jr.isStrictMode=function(e){return va(e)===Bw};jr.isSuspense=function(e){return va(e)===Kw};jr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Vw||e===Gw||e===$w||e===Bw||e===Kw||e===sse||typeof e=="object"&&e!==null&&(e.$$typeof===Yw||e.$$typeof===qw||e.$$typeof===Hw||e.$$typeof===Ww||e.$$typeof===zw||e.$$typeof===lse||e.$$typeof===dse||e.$$typeof===use||e.$$typeof===cse)};jr.typeOf=va;QH.exports=jr;var wk=QH.exports,eW=wk,hse={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},pse={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},tW={};tW[eW.ForwardRef]=hse;tW[eW.Memo]=pse;function mi(){return mi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mi.apply(this,arguments)}function rW(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var Xw=T.createContext(void 0);Xw.displayName="FormikContext";Xw.Provider;Xw.Consumer;function fse(){var e=T.useContext(Xw);return e}var ms=function(t){return typeof t=="function"},Jw=function(t){return t!==null&&typeof t=="object"},mse=function(t){return String(Math.floor(Number(t)))===t},iC=function(t){return Object.prototype.toString.call(t)==="[object String]"},oC=function(t){return Jw(t)&&ms(t.then)};function Xo(e,t,r,n){n===void 0&&(n=0);for(var i=JH(t);e&&n<i.length;)e=e[i[n++]];return n!==i.length&&!e||e===void 0?r:e}function ku(e,t,r){for(var n=mM(e),i=n,o=0,a=JH(t);o<a.length-1;o++){var s=a[o],c=Xo(e,a.slice(0,o+1));if(c&&(Jw(c)||Array.isArray(c)))i=i[s]=mM(c);else{var l=a[o+1];i=i[s]=mse(l)&&Number(l)>=0?[]:{}}}return(o===0?e:i)[a[o]]===r?e:(r===void 0?delete i[a[o]]:i[a[o]]=r,o===0&&r===void 0&&delete n[a[o]],n)}function nW(e,t,r,n){r===void 0&&(r=new WeakMap),n===void 0&&(n={});for(var i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=e[a];Jw(s)?r.get(s)||(r.set(s,!0),n[a]=Array.isArray(s)?[]:{},nW(s,t,r,n[a])):n[a]=t}return n}function gse(e,t){switch(t.type){case"SET_VALUES":return mi({},e,{values:t.payload});case"SET_TOUCHED":return mi({},e,{touched:t.payload});case"SET_ERRORS":return iu(e.errors,t.payload)?e:mi({},e,{errors:t.payload});case"SET_STATUS":return mi({},e,{status:t.payload});case"SET_ISSUBMITTING":return mi({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return mi({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return mi({},e,{values:ku(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return mi({},e,{touched:ku(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return mi({},e,{errors:ku(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return mi({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return mi({},e,{touched:nW(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return mi({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return mi({},e,{isSubmitting:!1});default:return e}}var qd={},Cv={};function Mn(e){var t=e.validateOnChange,r=t===void 0?!0:t,n=e.validateOnBlur,i=n===void 0?!0:n,o=e.validateOnMount,a=o===void 0?!1:o,s=e.isInitialValid,c=e.enableReinitialize,l=c===void 0?!1:c,d=e.onSubmit,u=rW(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),p=mi({validateOnChange:r,validateOnBlur:i,validateOnMount:a,onSubmit:d},u),f=T.useRef(p.initialValues),m=T.useRef(p.initialErrors||qd),g=T.useRef(p.initialTouched||Cv),y=T.useRef(p.initialStatus),v=T.useRef(!1),E=T.useRef({});T.useEffect(function(){return v.current=!0,function(){v.current=!1}},[]);var w=T.useState(0),S=w[1],x=T.useRef({values:Tv(p.initialValues),errors:Tv(p.initialErrors)||qd,touched:Tv(p.initialTouched)||Cv,status:Tv(p.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),O=x.current,L=T.useCallback(function(ee){var xe=x.current;x.current=gse(xe,ee),xe!==x.current&&S(function(Le){return Le+1})},[]),j=T.useCallback(function(ee,xe){return new Promise(function(Le,Ge){var ut=p.validate(ee,xe);ut==null?Le(qd):oC(ut)?ut.then(function(Gt){Le(Gt||qd)},function(Gt){Ge(Gt)}):Le(ut)})},[p.validate]),W=T.useCallback(function(ee,xe){var Le=p.validationSchema,Ge=ms(Le)?Le(xe):Le,ut=xe&&Ge.validateAt?Ge.validateAt(xe,ee):vse(ee,Ge);return new Promise(function(Gt,Hr){ut.then(function(){Gt(qd)},function(fn){fn.name==="ValidationError"?Gt(yse(fn)):Hr(fn)})})},[p.validationSchema]),V=T.useCallback(function(ee,xe){return new Promise(function(Le){return Le(E.current[ee].validate(xe))})},[]),Y=T.useCallback(function(ee){var xe=Object.keys(E.current).filter(function(Ge){return ms(E.current[Ge].validate)}),Le=xe.length>0?xe.map(function(Ge){return V(Ge,Xo(ee,Ge))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(Le).then(function(Ge){return Ge.reduce(function(ut,Gt,Hr){return Gt==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||Gt&&(ut=ku(ut,xe[Hr],Gt)),ut},{})})},[V]),Z=T.useCallback(function(ee){return Promise.all([Y(ee),p.validationSchema?W(ee):{},p.validate?j(ee):{}]).then(function(xe){var Le=xe[0],Ge=xe[1],ut=xe[2],Gt=cA.all([Le,Ge,ut],{arrayMerge:Ese});return Gt})},[p.validate,p.validationSchema,Y,j,W]),te=xa(function(ee){return ee===void 0&&(ee=O.values),L({type:"SET_ISVALIDATING",payload:!0}),Z(ee).then(function(xe){return v.current&&(L({type:"SET_ISVALIDATING",payload:!1}),L({type:"SET_ERRORS",payload:xe})),xe})});T.useEffect(function(){a&&v.current===!0&&iu(f.current,p.initialValues)&&te(f.current)},[a,te]);var H=T.useCallback(function(ee){var xe=ee&&ee.values?ee.values:f.current,Le=ee&&ee.errors?ee.errors:m.current?m.current:p.initialErrors||{},Ge=ee&&ee.touched?ee.touched:g.current?g.current:p.initialTouched||{},ut=ee&&ee.status?ee.status:y.current?y.current:p.initialStatus;f.current=xe,m.current=Le,g.current=Ge,y.current=ut;var Gt=function(){L({type:"RESET_FORM",payload:{isSubmitting:!!ee&&!!ee.isSubmitting,errors:Le,touched:Ge,status:ut,values:xe,isValidating:!!ee&&!!ee.isValidating,submitCount:ee&&ee.submitCount&&typeof ee.submitCount=="number"?ee.submitCount:0}})};if(p.onReset){var Hr=p.onReset(O.values,it);oC(Hr)?Hr.then(Gt):Gt()}else Gt()},[p.initialErrors,p.initialStatus,p.initialTouched,p.onReset]);T.useEffect(function(){v.current===!0&&!iu(f.current,p.initialValues)&&l&&(f.current=p.initialValues,H(),a&&te(f.current))},[l,p.initialValues,H,a,te]),T.useEffect(function(){l&&v.current===!0&&!iu(m.current,p.initialErrors)&&(m.current=p.initialErrors||qd,L({type:"SET_ERRORS",payload:p.initialErrors||qd}))},[l,p.initialErrors]),T.useEffect(function(){l&&v.current===!0&&!iu(g.current,p.initialTouched)&&(g.current=p.initialTouched||Cv,L({type:"SET_TOUCHED",payload:p.initialTouched||Cv}))},[l,p.initialTouched]),T.useEffect(function(){l&&v.current===!0&&!iu(y.current,p.initialStatus)&&(y.current=p.initialStatus,L({type:"SET_STATUS",payload:p.initialStatus}))},[l,p.initialStatus,p.initialTouched]);var $=xa(function(ee){if(E.current[ee]&&ms(E.current[ee].validate)){var xe=Xo(O.values,ee),Le=E.current[ee].validate(xe);return oC(Le)?(L({type:"SET_ISVALIDATING",payload:!0}),Le.then(function(Ge){return Ge}).then(function(Ge){L({type:"SET_FIELD_ERROR",payload:{field:ee,value:Ge}}),L({type:"SET_ISVALIDATING",payload:!1})})):(L({type:"SET_FIELD_ERROR",payload:{field:ee,value:Le}}),Promise.resolve(Le))}else if(p.validationSchema)return L({type:"SET_ISVALIDATING",payload:!0}),W(O.values,ee).then(function(Ge){return Ge}).then(function(Ge){L({type:"SET_FIELD_ERROR",payload:{field:ee,value:Xo(Ge,ee)}}),L({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),K=T.useCallback(function(ee,xe){var Le=xe.validate;E.current[ee]={validate:Le}},[]),A=T.useCallback(function(ee){delete E.current[ee]},[]),N=xa(function(ee,xe){L({type:"SET_TOUCHED",payload:ee});var Le=xe===void 0?i:xe;return Le?te(O.values):Promise.resolve()}),F=T.useCallback(function(ee){L({type:"SET_ERRORS",payload:ee})},[]),P=xa(function(ee,xe){var Le=ms(ee)?ee(O.values):ee;L({type:"SET_VALUES",payload:Le});var Ge=xe===void 0?r:xe;return Ge?te(Le):Promise.resolve()}),_=T.useCallback(function(ee,xe){L({type:"SET_FIELD_ERROR",payload:{field:ee,value:xe}})},[]),R=xa(function(ee,xe,Le){L({type:"SET_FIELD_VALUE",payload:{field:ee,value:xe}});var Ge=Le===void 0?r:Le;return Ge?te(ku(O.values,ee,xe)):Promise.resolve()}),k=T.useCallback(function(ee,xe){var Le=xe,Ge=ee,ut;if(!iC(ee)){ee.persist&&ee.persist();var Gt=ee.target?ee.target:ee.currentTarget,Hr=Gt.type,fn=Gt.name,Ho=Gt.id,Bs=Gt.value,eo=Gt.checked,Ac=Gt.outerHTML,xi=Gt.options,Sa=Gt.multiple;Le=xe||fn||Ho,Ge=/number|range/.test(Hr)?(ut=parseFloat(Bs),isNaN(ut)?"":ut):/checkbox/.test(Hr)?bse(Xo(O.values,Le),eo,Bs):xi&&Sa?_se(xi):Bs}Le&&R(Le,Ge)},[R,O.values]),z=xa(function(ee){if(iC(ee))return function(xe){return k(xe,ee)};k(ee)}),U=xa(function(ee,xe,Le){xe===void 0&&(xe=!0),L({type:"SET_FIELD_TOUCHED",payload:{field:ee,value:xe}});var Ge=Le===void 0?i:Le;return Ge?te(O.values):Promise.resolve()}),q=T.useCallback(function(ee,xe){ee.persist&&ee.persist();var Le=ee.target,Ge=Le.name,ut=Le.id,Gt=Le.outerHTML,Hr=xe||Ge||ut;U(Hr,!0)},[U]),oe=xa(function(ee){if(iC(ee))return function(xe){return q(xe,ee)};q(ee)}),ue=T.useCallback(function(ee){ms(ee)?L({type:"SET_FORMIK_STATE",payload:ee}):L({type:"SET_FORMIK_STATE",payload:function(){return ee}})},[]),me=T.useCallback(function(ee){L({type:"SET_STATUS",payload:ee})},[]),De=T.useCallback(function(ee){L({type:"SET_ISSUBMITTING",payload:ee})},[]),We=xa(function(){return L({type:"SUBMIT_ATTEMPT"}),te().then(function(ee){var xe=ee instanceof Error,Le=!xe&&Object.keys(ee).length===0;if(Le){var Ge;try{if(Ge=Rt(),Ge===void 0)return}catch(ut){throw ut}return Promise.resolve(Ge).then(function(ut){return v.current&&L({type:"SUBMIT_SUCCESS"}),ut}).catch(function(ut){if(v.current)throw L({type:"SUBMIT_FAILURE"}),ut})}else if(v.current&&(L({type:"SUBMIT_FAILURE"}),xe))throw ee})}),Pe=xa(function(ee){ee&&ee.preventDefault&&ms(ee.preventDefault)&&ee.preventDefault(),ee&&ee.stopPropagation&&ms(ee.stopPropagation)&&ee.stopPropagation(),We().catch(function(xe){console.warn("Warning: An unhandled error was caught from submitForm()",xe)})}),it={resetForm:H,validateForm:te,validateField:$,setErrors:F,setFieldError:_,setFieldTouched:U,setFieldValue:R,setStatus:me,setSubmitting:De,setTouched:N,setValues:P,setFormikState:ue,submitForm:We},Rt=xa(function(){return d(O.values,it)}),Je=xa(function(ee){ee&&ee.preventDefault&&ms(ee.preventDefault)&&ee.preventDefault(),ee&&ee.stopPropagation&&ms(ee.stopPropagation)&&ee.stopPropagation(),H()}),bt=T.useCallback(function(ee){return{value:Xo(O.values,ee),error:Xo(O.errors,ee),touched:!!Xo(O.touched,ee),initialValue:Xo(f.current,ee),initialTouched:!!Xo(g.current,ee),initialError:Xo(m.current,ee)}},[O.errors,O.touched,O.values]),Ce=T.useCallback(function(ee){return{setValue:function(Le,Ge){return R(ee,Le,Ge)},setTouched:function(Le,Ge){return U(ee,Le,Ge)},setError:function(Le){return _(ee,Le)}}},[R,U,_]),et=T.useCallback(function(ee){var xe=Jw(ee),Le=xe?ee.name:ee,Ge=Xo(O.values,Le),ut={name:Le,value:Ge,onChange:z,onBlur:oe};if(xe){var Gt=ee.type,Hr=ee.value,fn=ee.as,Ho=ee.multiple;Gt==="checkbox"?Hr===void 0?ut.checked=!!Ge:(ut.checked=!!(Array.isArray(Ge)&&~Ge.indexOf(Hr)),ut.value=Hr):Gt==="radio"?(ut.checked=Ge===Hr,ut.value=Hr):fn==="select"&&Ho&&(ut.value=ut.value||[],ut.multiple=!0)}return ut},[oe,z,O.values]),Be=T.useMemo(function(){return!iu(f.current,O.values)},[f.current,O.values]),qe=T.useMemo(function(){return typeof s<"u"?Be?O.errors&&Object.keys(O.errors).length===0:s!==!1&&ms(s)?s(p):s:O.errors&&Object.keys(O.errors).length===0},[s,Be,O.errors,p]),ze=mi({},O,{initialValues:f.current,initialErrors:m.current,initialTouched:g.current,initialStatus:y.current,handleBlur:oe,handleChange:z,handleReset:Je,handleSubmit:Pe,resetForm:H,setErrors:F,setFormikState:ue,setFieldTouched:U,setFieldValue:R,setFieldError:_,setStatus:me,setSubmitting:De,setTouched:N,setValues:P,submitForm:We,validateForm:te,validateField:$,isValid:qe,dirty:Be,unregisterField:A,registerField:K,getFieldProps:et,getFieldMeta:bt,getFieldHelpers:Ce,validateOnBlur:i,validateOnChange:r,validateOnMount:a});return ze}function yse(e){var t={};if(e.inner){if(e.inner.length===0)return ku(t,e.path,e.message);for(var i=e.inner,r=Array.isArray(i),n=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(n>=i.length)break;o=i[n++]}else{if(n=i.next(),n.done)break;o=n.value}var a=o;Xo(t,a.path)||(t=ku(t,a.path,a.message))}}return t}function vse(e,t,r,n){r===void 0&&(r=!1);var i=fA(e);return t[r?"validateSync":"validate"](i,{abortEarly:!1,context:i})}function fA(e){var t=Array.isArray(e)?[]:{};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=String(r);Array.isArray(e[n])===!0?t[n]=e[n].map(function(i){return Array.isArray(i)===!0||GL(i)?fA(i):i!==""?i:void 0}):GL(e[n])?t[n]=fA(e[n]):t[n]=e[n]!==""?e[n]:void 0}return t}function Ese(e,t,r){var n=e.slice();return t.forEach(function(o,a){if(typeof n[a]>"u"){var s=r.clone!==!1,c=s&&r.isMergeableObject(o);n[a]=c?cA(Array.isArray(o)?[]:{},o,r):o}else r.isMergeableObject(o)?n[a]=cA(e[a],o,r):e.indexOf(o)===-1&&n.push(o)}),n}function _se(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function bse(e,t,r){if(typeof e=="boolean")return!!t;var n=[],i=!1,o=-1;if(Array.isArray(e))n=e,o=e.indexOf(r),i=o>=0;else if(!r||r=="true"||r=="false")return!!t;return t&&r&&!i?n.concat(r):i?n.slice(0,o).concat(n.slice(o+1)):n}var wse=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?T.useLayoutEffect:T.useEffect;function xa(e){var t=T.useRef(e);return wse(function(){t.current=e}),T.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current.apply(void 0,n)},[])}var Sse=T.forwardRef(function(e,t){var r=e.action,n=rW(e,["action"]),i=r??"#",o=fse(),a=o.handleReset,s=o.handleSubmit;return T.createElement("form",mi({onSubmit:s,ref:t,onReset:a,action:i},n))});Sse.displayName="Form";function fh(e){this._maxSize=e,this.clear()}fh.prototype.clear=function(){this._size=0,this._values=Object.create(null)};fh.prototype.get=function(e){return this._values[e]};fh.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var Tse=/[^.^\]^[]+|(?=\[\]|\.\.)/g,iW=/^\d+$/,Cse=/^\d/,Rse=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,Ise=/^\s*(['"]?)(.*?)(\1)\s*$/,Sk=512,vM=new fh(Sk),EM=new fh(Sk),_M=new fh(Sk),Pu={Cache:fh,split:mA,normalizePath:aC,setter:function(e){var t=aC(e);return EM.get(e)||EM.set(e,function(n,i){for(var o=0,a=t.length,s=n;o<a-1;){var c=t[o];if(c==="__proto__"||c==="constructor"||c==="prototype")return n;s=s[t[o++]]}s[t[o]]=i})},getter:function(e,t){var r=aC(e);return _M.get(e)||_M.set(e,function(i){for(var o=0,a=r.length;o<a;)if(i!=null||!t)i=i[r[o++]];else return;return i})},join:function(e){return e.reduce(function(t,r){return t+(Tk(r)||iW.test(r)?"["+r+"]":(t?".":"")+r)},"")},forEach:function(e,t,r){xse(Array.isArray(e)?e:mA(e),t,r)}};function aC(e){return vM.get(e)||vM.set(e,mA(e).map(function(t){return t.replace(Ise,"$2")}))}function mA(e){return e.match(Tse)||[""]}function xse(e,t,r){var n=e.length,i,o,a,s;for(o=0;o<n;o++)i=e[o],i&&(Ose(i)&&(i='"'+i+'"'),s=Tk(i),a=!s&&/^\d+$/.test(i),t.call(r,i,s,a,o,e))}function Tk(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function Ase(e){return e.match(Cse)&&!e.match(iW)}function Nse(e){return Rse.test(e)}function Ose(e){return!Tk(e)&&(Ase(e)||Nse(e))}const kse=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Qw=e=>e.match(kse)||[],Zw=e=>e[0].toUpperCase()+e.slice(1),Ck=(e,t)=>Qw(e).join(t).toLowerCase(),oW=e=>Qw(e).reduce((t,r)=>`${t}${t?r[0].toUpperCase()+r.slice(1).toLowerCase():r.toLowerCase()}`,""),Pse=e=>Zw(oW(e)),Dse=e=>Ck(e,"_"),Lse=e=>Ck(e,"-"),Mse=e=>Zw(Ck(e," ")),jse=e=>Qw(e).map(Zw).join(" ");var sC={words:Qw,upperFirst:Zw,camelCase:oW,pascalCase:Pse,snakeCase:Dse,kebabCase:Lse,sentenceCase:Mse,titleCase:jse},Rk={exports:{}};Rk.exports=function(e){return aW(Use(e),e)};Rk.exports.array=aW;function aW(e,t){var r=e.length,n=new Array(r),i={},o=r,a=Fse(t),s=Vse(e);for(t.forEach(function(l){if(!s.has(l[0])||!s.has(l[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});o--;)i[o]||c(e[o],o,new Set);return n;function c(l,d,u){if(u.has(l)){var p;try{p=", node was:"+JSON.stringify(l)}catch{p=""}throw new Error("Cyclic dependency"+p)}if(!s.has(l))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(l));if(!i[d]){i[d]=!0;var f=a.get(l)||new Set;if(f=Array.from(f),d=f.length){u.add(l);do{var m=f[--d];c(m,s.get(m),u)}while(d);u.delete(l)}n[--r]=l}}}function Use(e){for(var t=new Set,r=0,n=e.length;r<n;r++){var i=e[r];t.add(i[0]),t.add(i[1])}return Array.from(t)}function Fse(e){for(var t=new Map,r=0,n=e.length;r<n;r++){var i=e[r];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}function Vse(e){for(var t=new Map,r=0,n=e.length;r<n;r++)t.set(e[r],r);return t}var Bse=Rk.exports;const $se=rs(Bse),Hse=Object.prototype.toString,Wse=Error.prototype.toString,Gse=RegExp.prototype.toString,zse=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Kse=/^Symbol\((.*)\)(.*)$/;function qse(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function bM(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const r=typeof e;if(r==="number")return qse(e);if(r==="string")return t?`"${e}"`:e;if(r==="function")return"[Function "+(e.name||"anonymous")+"]";if(r==="symbol")return zse.call(e).replace(Kse,"Symbol($1)");const n=Hse.call(e).slice(8,-1);return n==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):n==="Error"||e instanceof Error?"["+Wse.call(e)+"]":n==="RegExp"?Gse.call(e):null}function tl(e,t){let r=bM(e,t);return r!==null?r:JSON.stringify(e,function(n,i){let o=bM(this[n],t);return o!==null?o:i},2)}function sW(e){return e==null?[]:[].concat(e)}let cW,lW,dW,Yse=/\$\{\s*(\w+)\s*\}/g;cW=Symbol.toStringTag;class wM{constructor(t,r,n,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[cW]="Error",this.name="ValidationError",this.value=r,this.path=n,this.type=i,this.errors=[],this.inner=[],sW(t).forEach(o=>{if(Co.isError(o)){this.errors.push(...o.errors);const a=o.inner.length?o.inner:[o];this.inner.push(...a)}else this.errors.push(o)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}lW=Symbol.hasInstance;dW=Symbol.toStringTag;class Co extends Error{static formatError(t,r){const n=r.label||r.path||"this";return r=Object.assign({},r,{path:n,originalPath:r.path}),typeof t=="string"?t.replace(Yse,(i,o)=>tl(r[o])):typeof t=="function"?t(r):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,r,n,i,o){const a=new wM(t,r,n,i);if(o)return a;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[dW]="Error",this.name=a.name,this.message=a.message,this.type=a.type,this.value=a.value,this.path=a.path,this.errors=a.errors,this.inner=a.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Co)}static[lW](t){return wM[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let rc={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:n})=>{const i=n!=null&&n!==r?` (cast from the value \`${tl(n,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${tl(r,!0)}\``+i:`${e} must match the configured type. The validated value was: \`${tl(r,!0)}\``+i}},_o={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Xse={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},gA={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},yA={isValue:"${path} field must be ${value}"},KE={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},qE={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},Jse={notType:e=>{const{path:t,value:r,spec:n}=e,i=n.types.length;if(Array.isArray(r)){if(r.length<i)return`${t} tuple value has too few items, expected a length of ${i} but got ${r.length} for value: \`${tl(r,!0)}\``;if(r.length>i)return`${t} tuple value has too many items, expected a length of ${i} but got ${r.length} for value: \`${tl(r,!0)}\``}return Co.formatError(rc.notType,e)}};Object.assign(Object.create(null),{mixed:rc,string:_o,number:Xse,date:gA,object:KE,array:qE,boolean:yA,tuple:Jse});const eS=e=>e&&e.__isYupSchema__;class nb{static fromOptions(t,r){if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:i,otherwise:o}=r,a=typeof n=="function"?n:(...s)=>s.every(c=>c===n);return new nb(t,(s,c)=>{var l;let d=a(...s)?i:o;return(l=d==null?void 0:d(c))!=null?l:c})}constructor(t,r){this.fn=void 0,this.refs=t,this.refs=t,this.fn=r}resolve(t,r){let n=this.refs.map(o=>o.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),i=this.fn(n,t,r);if(i===void 0||i===t)return t;if(!eS(i))throw new TypeError("conditions must return a schema object");return i.resolve(r)}}const Rv={context:"$",value:"."};function uW(e,t){return new Md(e,t)}class Md{constructor(t,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Rv.context,this.isValue=this.key[0]===Rv.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?Rv.context:this.isValue?Rv.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&Pu.getter(this.path,!0),this.map=r.map}getValue(t,r,n){let i=this.isContext?n:this.isValue?t:r;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(t,r){return this.getValue(t,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}Md.prototype.__isYupRef=!0;const Qc=e=>e==null;function Fh(e){function t({value:r,path:n="",options:i,originalValue:o,schema:a},s,c){const{name:l,test:d,params:u,message:p,skipAbsent:f}=e;let{parent:m,context:g,abortEarly:y=a.spec.abortEarly,disableStackTrace:v=a.spec.disableStackTrace}=i;function E(Y){return Md.isRef(Y)?Y.getValue(r,m,g):Y}function w(Y={}){const Z=Object.assign({value:r,originalValue:o,label:a.spec.label,path:Y.path||n,spec:a.spec,disableStackTrace:Y.disableStackTrace||v},u,Y.params);for(const H of Object.keys(Z))Z[H]=E(Z[H]);const te=new Co(Co.formatError(Y.message||p,Z),r,Z.path,Y.type||l,Z.disableStackTrace);return te.params=Z,te}const S=y?s:c;let x={path:n,parent:m,type:l,from:i.from,createError:w,resolve:E,options:i,originalValue:o,schema:a};const O=Y=>{Co.isError(Y)?S(Y):Y?c(null):S(w())},L=Y=>{Co.isError(Y)?S(Y):s(Y)};if(f&&Qc(r))return O(!0);let W;try{var V;if(W=d.call(x,r,x),typeof((V=W)==null?void 0:V.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${x.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(W).then(O,L)}}catch(Y){L(Y);return}O(W)}return t.OPTIONS=e,t}function Qse(e,t,r,n=r){let i,o,a;return t?(Pu.forEach(t,(s,c,l)=>{let d=c?s.slice(1,s.length-1):s;e=e.resolve({context:n,parent:i,value:r});let u=e.type==="tuple",p=l?parseInt(d,10):0;if(e.innerType||u){if(u&&!l)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${a}" must contain an index to the tuple element, e.g. "${a}[0]"`);if(r&&p>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${s}, in the path: ${t}. because there is no value at that index. `);i=r,r=r&&r[p],e=u?e.spec.types[p]:e.innerType}if(!l){if(!e.fields||!e.fields[d])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${a} which is a type: "${e.type}")`);i=r,r=r&&r[d],e=e.fields[d]}o=d,a=c?"["+s+"]":"."+s}),{schema:e,parent:i,parentPath:o}):{parent:i,parentPath:t,schema:e}}class ib extends Set{describe(){const t=[];for(const r of this.values())t.push(Md.isRef(r)?r.describe():r);return t}resolveAll(t){let r=[];for(const n of this.values())r.push(t(n));return r}clone(){return new ib(this.values())}merge(t,r){const n=this.clone();return t.forEach(i=>n.add(i)),r.forEach(i=>n.delete(i)),n}}function wp(e,t=new Map){if(eS(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let r;if(e instanceof Date)r=new Date(e.getTime()),t.set(e,r);else if(e instanceof RegExp)r=new RegExp(e),t.set(e,r);else if(Array.isArray(e)){r=new Array(e.length),t.set(e,r);for(let n=0;n<e.length;n++)r[n]=wp(e[n],t)}else if(e instanceof Map){r=new Map,t.set(e,r);for(const[n,i]of e.entries())r.set(n,wp(i,t))}else if(e instanceof Set){r=new Set,t.set(e,r);for(const n of e)r.add(wp(n,t))}else if(e instanceof Object){r={},t.set(e,r);for(const[n,i]of Object.entries(e))r[n]=wp(i,t)}else throw Error(`Unable to clone ${e}`);return r}class ha{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new ib,this._blacklist=new ib,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(rc.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(r=>{r.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeCheck=this._typeCheck,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.internalTests=Object.assign({},this.internalTests),r.exclusiveTests=Object.assign({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=wp(Object.assign({},this.spec,t)),r}label(t){let r=this.clone();return r.spec.label=t,r}meta(...t){if(t.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},t[0]),r}withMutation(t){let r=this._mutate;this._mutate=!0;let n=t(this);return this._mutate=r,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let r=this,n=t.clone();const i=Object.assign({},r.spec,n.spec);return n.spec=i,n.internalTests=Object.assign({},r.internalTests,n.internalTests),n._whitelist=r._whitelist.merge(t._whitelist,t._blacklist),n._blacklist=r._blacklist.merge(t._blacklist,t._whitelist),n.tests=r.tests,n.exclusiveTests=r.exclusiveTests,n.withMutation(o=>{t.tests.forEach(a=>{o.test(a.OPTIONS)})}),n.transforms=[...r.transforms,...n.transforms],n}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let r=this;if(r.conditions.length){let n=r.conditions;r=r.clone(),r.conditions=[],r=n.reduce((i,o)=>o.resolve(i,t),r),r=r.resolve(t)}return r}resolveOptions(t){var r,n,i,o;return Object.assign({},t,{from:t.from||[],strict:(r=t.strict)!=null?r:this.spec.strict,abortEarly:(n=t.abortEarly)!=null?n:this.spec.abortEarly,recursive:(i=t.recursive)!=null?i:this.spec.recursive,disableStackTrace:(o=t.disableStackTrace)!=null?o:this.spec.disableStackTrace})}cast(t,r={}){let n=this.resolve(Object.assign({value:t},r)),i=r.assert==="ignore-optionality",o=n._cast(t,r);if(r.assert!==!1&&!n.isType(o)){if(i&&Qc(o))return o;let a=tl(t),s=tl(o);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". 

attempted value: ${a} 
`+(s!==a?`result of cast: ${s}`:""))}return o}_cast(t,r){let n=t===void 0?t:this.transforms.reduce((i,o)=>o.call(this,i,t,this),t);return n===void 0&&(n=this.getDefault(r)),n}_validate(t,r={},n,i){let{path:o,originalValue:a=t,strict:s=this.spec.strict}=r,c=t;s||(c=this._cast(c,Object.assign({assert:!1},r)));let l=[];for(let d of Object.values(this.internalTests))d&&l.push(d);this.runTests({path:o,value:c,originalValue:a,options:r,tests:l},n,d=>{if(d.length)return i(d,c);this.runTests({path:o,value:c,originalValue:a,options:r,tests:this.tests},n,i)})}runTests(t,r,n){let i=!1,{tests:o,value:a,originalValue:s,path:c,options:l}=t,d=g=>{i||(i=!0,r(g,a))},u=g=>{i||(i=!0,n(g,a))},p=o.length,f=[];if(!p)return u([]);let m={value:a,originalValue:s,path:c,options:l,schema:this};for(let g=0;g<o.length;g++){const y=o[g];y(m,d,function(E){E&&(Array.isArray(E)?f.push(...E):f.push(E)),--p<=0&&u(f)})}}asNestedTest({key:t,index:r,parent:n,parentPath:i,originalParent:o,options:a}){const s=t??r;if(s==null)throw TypeError("Must include `key` or `index` for nested validations");const c=typeof s=="number";let l=n[s];const d=Object.assign({},a,{strict:!0,parent:n,value:l,originalValue:o[s],key:void 0,[c?"index":"key"]:s,path:c||s.includes(".")?`${i||""}[${c?s:`"${s}"`}]`:(i?`${i}.`:"")+t});return(u,p,f)=>this.resolve(d)._validate(l,d,p,f)}validate(t,r){var n;let i=this.resolve(Object.assign({},r,{value:t})),o=(n=r==null?void 0:r.disableStackTrace)!=null?n:i.spec.disableStackTrace;return new Promise((a,s)=>i._validate(t,r,(c,l)=>{Co.isError(c)&&(c.value=l),s(c)},(c,l)=>{c.length?s(new Co(c,l,void 0,void 0,o)):a(l)}))}validateSync(t,r){var n;let i=this.resolve(Object.assign({},r,{value:t})),o,a=(n=r==null?void 0:r.disableStackTrace)!=null?n:i.spec.disableStackTrace;return i._validate(t,Object.assign({},r,{sync:!0}),(s,c)=>{throw Co.isError(s)&&(s.value=c),s},(s,c)=>{if(s.length)throw new Co(s,t,void 0,void 0,a);o=c}),o}isValid(t,r){return this.validate(t,r).then(()=>!0,n=>{if(Co.isError(n))return!1;throw n})}isValidSync(t,r){try{return this.validateSync(t,r),!0}catch(n){if(Co.isError(n))return!1;throw n}}_getDefault(t){let r=this.spec.default;return r==null?r:typeof r=="function"?r.call(this,t):wp(r)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,r){const n=this.clone({nullable:t});return n.internalTests.nullable=Fh({message:r,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),n}optionality(t,r){const n=this.clone({optional:t});return n.internalTests.optionality=Fh({message:r,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),n}optional(){return this.optionality(!0)}defined(t=rc.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=rc.notNull){return this.nullability(!1,t)}required(t=rc.required){return this.clone().withMutation(r=>r.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let r=this.clone();return r.transforms.push(t),r}test(...t){let r;if(t.length===1?typeof t[0]=="function"?r={test:t[0]}:r=t[0]:t.length===2?r={name:t[0],test:t[1]}:r={name:t[0],message:t[1],test:t[2]},r.message===void 0&&(r.message=rc.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),i=Fh(r),o=r.exclusive||r.name&&n.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(n.exclusiveTests[r.name]=!!r.exclusive),n.tests=n.tests.filter(a=>!(a.OPTIONS.name===r.name&&(o||a.OPTIONS.test===i.OPTIONS.test))),n.tests.push(i),n}when(t,r){!Array.isArray(t)&&typeof t!="string"&&(r=t,t=".");let n=this.clone(),i=sW(t).map(o=>new Md(o));return i.forEach(o=>{o.isSibling&&n.deps.push(o.key)}),n.conditions.push(typeof r=="function"?new nb(i,r):nb.fromOptions(i,r)),n}typeError(t){let r=this.clone();return r.internalTests.typeError=Fh({message:t,name:"typeError",skipAbsent:!0,test(n){return this.schema._typeCheck(n)?!0:this.createError({params:{type:this.schema.type}})}}),r}oneOf(t,r=rc.oneOf){let n=this.clone();return t.forEach(i=>{n._whitelist.add(i),n._blacklist.delete(i)}),n.internalTests.whiteList=Fh({message:r,name:"oneOf",skipAbsent:!0,test(i){let o=this.schema._whitelist,a=o.resolveAll(this.resolve);return a.includes(i)?!0:this.createError({params:{values:Array.from(o).join(", "),resolved:a}})}}),n}notOneOf(t,r=rc.notOneOf){let n=this.clone();return t.forEach(i=>{n._blacklist.add(i),n._whitelist.delete(i)}),n.internalTests.blacklist=Fh({message:r,name:"notOneOf",test(i){let o=this.schema._blacklist,a=o.resolveAll(this.resolve);return a.includes(i)?this.createError({params:{values:Array.from(o).join(", "),resolved:a}}):!0}}),n}strip(t=!0){let r=this.clone();return r.spec.strip=t,r}describe(t){const r=(t?this.resolve(t):this).clone(),{label:n,meta:i,optional:o,nullable:a}=r.spec;return{meta:i,label:n,optional:o,nullable:a,default:r.getDefault(t),type:r.type,oneOf:r._whitelist.describe(),notOneOf:r._blacklist.describe(),tests:r.tests.map(c=>({name:c.OPTIONS.name,params:c.OPTIONS.params})).filter((c,l,d)=>d.findIndex(u=>u.name===c.name)===l)}}}ha.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])ha.prototype[`${e}At`]=function(t,r,n={}){const{parent:i,parentPath:o,schema:a}=Qse(this,t,r,n.context);return a[e](i&&i[o],Object.assign({},n,{parent:i,path:t}))};for(const e of["equals","is"])ha.prototype[e]=ha.prototype.oneOf;for(const e of["not","nope"])ha.prototype[e]=ha.prototype.notOneOf;const Zse=()=>!0;function hW(e){return new pW(e)}class pW extends ha{constructor(t){super(typeof t=="function"?{type:"mixed",check:t}:Object.assign({type:"mixed",check:Zse},t))}}hW.prototype=pW.prototype;function vA(){return new fW}class fW extends ha{constructor(){super({type:"boolean",check(t){return t instanceof Boolean&&(t=t.valueOf()),typeof t=="boolean"}}),this.withMutation(()=>{this.transform((t,r,n)=>{if(n.spec.coerce&&!n.isType(t)){if(/^(true|1)$/i.test(String(t)))return!0;if(/^(false|0)$/i.test(String(t)))return!1}return t})})}isTrue(t=yA.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"true"},test(r){return Qc(r)||r===!0}})}isFalse(t=yA.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"false"},test(r){return Qc(r)||r===!1}})}default(t){return super.default(t)}defined(t){return super.defined(t)}optional(){return super.optional()}required(t){return super.required(t)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(t){return super.nonNullable(t)}strip(t){return super.strip(t)}}vA.prototype=fW.prototype;const ece=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function tce(e){const t=EA(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let r=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(r=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(r=0-r)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+r,t.second,t.millisecond)}function EA(e){var t,r;const n=ece.exec(e);return n?{year:kc(n[1]),month:kc(n[2],1)-1,day:kc(n[3],1),hour:kc(n[4]),minute:kc(n[5]),second:kc(n[6]),millisecond:n[7]?kc(n[7].substring(0,3)):0,precision:(t=(r=n[7])==null?void 0:r.length)!=null?t:void 0,z:n[8]||void 0,plusMinus:n[9]||void 0,hourOffset:kc(n[10]),minuteOffset:kc(n[11])}:null}function kc(e,t=0){return Number(e)||t}let rce=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,nce=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,ice=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,oce="^\\d{4}-\\d{2}-\\d{2}",ace="\\d{2}:\\d{2}:\\d{2}",sce="(([+-]\\d{2}(:?\\d{2})?)|Z)",cce=new RegExp(`${oce}T${ace}(\\.\\d+)?${sce}$`),lce=e=>Qc(e)||e===e.trim(),dce={}.toString();function kt(){return new mW}class mW extends ha{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,r,n)=>{if(!n.spec.coerce||n.isType(t)||Array.isArray(t))return t;const i=t!=null&&t.toString?t.toString():t;return i===dce?t:i})})}required(t){return super.required(t).withMutation(r=>r.test({message:t||rc.required,name:"required",skipAbsent:!0,test:n=>!!n.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(r=>r.OPTIONS.name!=="required"),t))}length(t,r=_o.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(n){return n.length===this.resolve(t)}})}min(t,r=_o.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(n){return n.length>=this.resolve(t)}})}max(t,r=_o.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:t},skipAbsent:!0,test(n){return n.length<=this.resolve(t)}})}matches(t,r){let n=!1,i,o;return r&&(typeof r=="object"?{excludeEmptyString:n=!1,message:i,name:o}=r:i=r),this.test({name:o||"matches",message:i||_o.matches,params:{regex:t},skipAbsent:!0,test:a=>a===""&&n||a.search(t)!==-1})}email(t=_o.email){return this.matches(rce,{name:"email",message:t,excludeEmptyString:!0})}url(t=_o.url){return this.matches(nce,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=_o.uuid){return this.matches(ice,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let r="",n,i;return t&&(typeof t=="object"?{message:r="",allowOffset:n=!1,precision:i=void 0}=t:r=t),this.matches(cce,{name:"datetime",message:r||_o.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||_o.datetime_offset,params:{allowOffset:n},skipAbsent:!0,test:o=>{if(!o||n)return!0;const a=EA(o);return a?!!a.z:!1}}).test({name:"datetime_precision",message:r||_o.datetime_precision,params:{precision:i},skipAbsent:!0,test:o=>{if(!o||i==null)return!0;const a=EA(o);return a?a.precision===i:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=_o.trim){return this.transform(r=>r!=null?r.trim():r).test({message:t,name:"trim",test:lce})}lowercase(t=_o.lowercase){return this.transform(r=>Qc(r)?r:r.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>Qc(r)||r===r.toLowerCase()})}uppercase(t=_o.uppercase){return this.transform(r=>Qc(r)?r:r.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>Qc(r)||r===r.toUpperCase()})}}kt.prototype=mW.prototype;let uce=new Date(""),hce=e=>Object.prototype.toString.call(e)==="[object Date]";class tS extends ha{constructor(){super({type:"date",check(t){return hce(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,r,n)=>!n.spec.coerce||n.isType(t)||t===null?t:(t=tce(t),isNaN(t)?tS.INVALID_DATE:new Date(t)))})}prepareParam(t,r){let n;if(Md.isRef(t))n=t;else{let i=this.cast(t);if(!this._typeCheck(i))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);n=i}return n}min(t,r=gA.min){let n=this.prepareParam(t,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(i){return i>=this.resolve(n)}})}max(t,r=gA.max){let n=this.prepareParam(t,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(i){return i<=this.resolve(n)}})}}tS.INVALID_DATE=uce;tS.prototype;function pce(e,t=[]){let r=[],n=new Set,i=new Set(t.map(([a,s])=>`${a}-${s}`));function o(a,s){let c=Pu.split(a)[0];n.add(c),i.has(`${s}-${c}`)||r.push([s,c])}for(const a of Object.keys(e)){let s=e[a];n.add(a),Md.isRef(s)&&s.isSibling?o(s.path,a):eS(s)&&"deps"in s&&s.deps.forEach(c=>o(c,a))}return $se.array(Array.from(n),r).reverse()}function SM(e,t){let r=1/0;return e.some((n,i)=>{var o;if((o=t.path)!=null&&o.includes(n))return r=i,!0}),r}function gW(e){return(t,r)=>SM(e,t)-SM(e,r)}const yW=(e,t,r)=>{if(typeof e!="string")return e;let n=e;try{n=JSON.parse(e)}catch{}return r.isType(n)?n:e};function YE(e){if("fields"in e){const t={};for(const[r,n]of Object.entries(e.fields))t[r]=YE(n);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=YE(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(YE)}):"optional"in e?e.optional():e}const fce=(e,t)=>{const r=[...Pu.normalizePath(t)];if(r.length===1)return r[0]in e;let n=r.pop(),i=Pu.getter(Pu.join(r),!0)(e);return!!(i&&n in i)};let TM=e=>Object.prototype.toString.call(e)==="[object Object]";function CM(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(n=>r.indexOf(n)===-1)}const mce=gW([]);function ui(e){return new vW(e)}class vW extends ha{constructor(t){super({type:"object",check(r){return TM(r)||typeof r=="function"}}),this.fields=Object.create(null),this._sortErrors=mce,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,r={}){var n;let i=super._cast(t,r);if(i===void 0)return this.getDefault(r);if(!this._typeCheck(i))return i;let o=this.fields,a=(n=r.stripUnknown)!=null?n:this.spec.noUnknown,s=[].concat(this._nodes,Object.keys(i).filter(u=>!this._nodes.includes(u))),c={},l=Object.assign({},r,{parent:c,__validating:r.__validating||!1}),d=!1;for(const u of s){let p=o[u],f=u in i;if(p){let m,g=i[u];l.path=(r.path?`${r.path}.`:"")+u,p=p.resolve({value:g,context:r.context,parent:c});let y=p instanceof ha?p.spec:void 0,v=y==null?void 0:y.strict;if(y!=null&&y.strip){d=d||u in i;continue}m=!r.__validating||!v?p.cast(i[u],l):i[u],m!==void 0&&(c[u]=m)}else f&&!a&&(c[u]=i[u]);(f!==u in c||c[u]!==i[u])&&(d=!0)}return d?c:i}_validate(t,r={},n,i){let{from:o=[],originalValue:a=t,recursive:s=this.spec.recursive}=r;r.from=[{schema:this,value:a},...o],r.__validating=!0,r.originalValue=a,super._validate(t,r,n,(c,l)=>{if(!s||!TM(l)){i(c,l);return}a=a||l;let d=[];for(let u of this._nodes){let p=this.fields[u];!p||Md.isRef(p)||d.push(p.asNestedTest({options:r,key:u,parent:l,parentPath:r.path,originalParent:a}))}this.runTests({tests:d,value:l,originalValue:a,options:r},n,u=>{i(u.sort(this._sortErrors).concat(c),l)})})}clone(t){const r=super.clone(t);return r.fields=Object.assign({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(t){let r=super.concat(t),n=r.fields;for(let[i,o]of Object.entries(this.fields)){const a=n[i];n[i]=a===void 0?o:a}return r.withMutation(i=>i.setFields(n,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let r={};return this._nodes.forEach(n=>{var i;const o=this.fields[n];let a=t;(i=a)!=null&&i.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[n]})),r[n]=o&&"getDefault"in o?o.getDefault(a):void 0}),r}setFields(t,r){let n=this.clone();return n.fields=t,n._nodes=pce(t,r),n._sortErrors=gW(Object.keys(t)),r&&(n._excludedEdges=r),n}shape(t,r=[]){return this.clone().withMutation(n=>{let i=n._excludedEdges;return r.length&&(Array.isArray(r[0])||(r=[r]),i=[...n._excludedEdges,...r]),n.setFields(Object.assign(n.fields,t),i)})}partial(){const t={};for(const[r,n]of Object.entries(this.fields))t[r]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(t)}deepPartial(){return YE(this)}pick(t){const r={};for(const n of t)this.fields[n]&&(r[n]=this.fields[n]);return this.setFields(r,this._excludedEdges.filter(([n,i])=>t.includes(n)&&t.includes(i)))}omit(t){const r=[];for(const n of Object.keys(this.fields))t.includes(n)||r.push(n);return this.pick(r)}from(t,r,n){let i=Pu.getter(t,!0);return this.transform(o=>{if(!o)return o;let a=o;return fce(o,t)&&(a=Object.assign({},o),n||delete a[t],a[r]=i(o)),a})}json(){return this.transform(yW)}exact(t){return this.test({name:"exact",exclusive:!0,message:t||KE.exact,test(r){if(r==null)return!0;const n=CM(this.schema,r);return n.length===0||this.createError({params:{properties:n.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(t=!0,r=KE.noUnknown){typeof t!="boolean"&&(r=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:r,test(i){if(i==null)return!0;const o=CM(this.schema,i);return!t||o.length===0||this.createError({params:{unknown:o.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,r=KE.noUnknown){return this.noUnknown(!t,r)}transformKeys(t){return this.transform(r=>{if(!r)return r;const n={};for(const i of Object.keys(r))n[t(i)]=r[i];return n})}camelCase(){return this.transformKeys(sC.camelCase)}snakeCase(){return this.transformKeys(sC.snakeCase)}constantCase(){return this.transformKeys(t=>sC.snakeCase(t).toUpperCase())}describe(t){const r=(t?this.resolve(t):this).clone(),n=super.describe(t);n.fields={};for(const[o,a]of Object.entries(r.fields)){var i;let s=t;(i=s)!=null&&i.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[o]})),n.fields[o]=a.describe(s)}return n}}ui.prototype=vW.prototype;function EW(e){return new _W(e)}class _W extends ha{constructor(t){super({type:"array",spec:{types:t},check(r){return Array.isArray(r)}}),this.innerType=void 0,this.innerType=t}_cast(t,r){const n=super._cast(t,r);if(!this._typeCheck(n)||!this.innerType)return n;let i=!1;const o=n.map((a,s)=>{const c=this.innerType.cast(a,Object.assign({},r,{path:`${r.path||""}[${s}]`}));return c!==a&&(i=!0),c});return i?o:n}_validate(t,r={},n,i){var o;let a=this.innerType,s=(o=r.recursive)!=null?o:this.spec.recursive;r.originalValue!=null&&r.originalValue,super._validate(t,r,n,(c,l)=>{var d;if(!s||!a||!this._typeCheck(l)){i(c,l);return}let u=new Array(l.length);for(let f=0;f<l.length;f++){var p;u[f]=a.asNestedTest({options:r,index:f,parent:l,parentPath:r.path,originalParent:(p=r.originalValue)!=null?p:t})}this.runTests({value:l,tests:u,originalValue:(d=r.originalValue)!=null?d:t,options:r},n,f=>i(f.concat(c),l))})}clone(t){const r=super.clone(t);return r.innerType=this.innerType,r}json(){return this.transform(yW)}concat(t){let r=super.concat(t);return r.innerType=this.innerType,t.innerType&&(r.innerType=r.innerType?r.innerType.concat(t.innerType):t.innerType),r}of(t){let r=this.clone();if(!eS(t))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+tl(t));return r.innerType=t,r.spec=Object.assign({},r.spec,{types:t}),r}length(t,r=qE.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(n){return n.length===this.resolve(t)}})}min(t,r){return r=r||qE.min,this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(n){return n.length>=this.resolve(t)}})}max(t,r){return r=r||qE.max,this.test({message:r,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(n){return n.length<=this.resolve(t)}})}ensure(){return this.default(()=>[]).transform((t,r)=>this._typeCheck(t)?t:r==null?[]:[].concat(r))}compact(t){let r=t?(n,i,o)=>!t(n,i,o):n=>!!n;return this.transform(n=>n!=null?n.filter(r):n)}describe(t){const r=(t?this.resolve(t):this).clone(),n=super.describe(t);if(r.innerType){var i;let o=t;(i=o)!=null&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[0]})),n.innerType=r.innerType.describe(o)}return n}}EW.prototype=_W.prototype;const gce=ui().shape({username:kt().required("shouldn't be left empty").min(5,"minimum of 5 letters"),password:kt().required("Required").min(2,"shouldn't be less than 8")});function bW(e,t){return function(){return e.apply(t,arguments)}}const{toString:yce}=Object.prototype,{getPrototypeOf:Ik}=Object,rS=(e=>t=>{const r=yce.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ds=e=>(e=e.toLowerCase(),t=>rS(t)===e),nS=e=>t=>typeof t===e,{isArray:Gf}=Array,T0=nS("undefined");function vce(e){return e!==null&&!T0(e)&&e.constructor!==null&&!T0(e.constructor)&&da(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const wW=Ds("ArrayBuffer");function Ece(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&wW(e.buffer),t}const _ce=nS("string"),da=nS("function"),SW=nS("number"),iS=e=>e!==null&&typeof e=="object",bce=e=>e===!0||e===!1,XE=e=>{if(rS(e)!=="object")return!1;const t=Ik(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},wce=Ds("Date"),Sce=Ds("File"),Tce=Ds("Blob"),Cce=Ds("FileList"),Rce=e=>iS(e)&&da(e.pipe),Ice=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||da(e.append)&&((t=rS(e))==="formdata"||t==="object"&&da(e.toString)&&e.toString()==="[object FormData]"))},xce=Ds("URLSearchParams"),[Ace,Nce,Oce,kce]=["ReadableStream","Request","Response","Headers"].map(Ds),Pce=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fy(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Gf(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let s;for(n=0;n<a;n++)s=o[n],t.call(null,e[s],s,e)}}function TW(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const _u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,CW=e=>!T0(e)&&e!==_u;function _A(){const{caseless:e}=CW(this)&&this||{},t={},r=(n,i)=>{const o=e&&TW(t,i)||i;XE(t[o])&&XE(n)?t[o]=_A(t[o],n):XE(n)?t[o]=_A({},n):Gf(n)?t[o]=n.slice():t[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&fy(arguments[n],r);return t}const Dce=(e,t,r,{allOwnKeys:n}={})=>(fy(t,(i,o)=>{r&&da(i)?e[o]=bW(i,r):e[o]=i},{allOwnKeys:n}),e),Lce=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Mce=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},jce=(e,t,r,n)=>{let i,o,a;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],(!n||n(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=r!==!1&&Ik(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Uce=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Fce=e=>{if(!e)return null;if(Gf(e))return e;let t=e.length;if(!SW(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Vce=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ik(Uint8Array)),Bce=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},$ce=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Hce=Ds("HTMLFormElement"),Wce=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),RM=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Gce=Ds("RegExp"),RW=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};fy(r,(i,o)=>{let a;(a=t(i,o,e))!==!1&&(n[o]=a||i)}),Object.defineProperties(e,n)},zce=e=>{RW(e,(t,r)=>{if(da(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(da(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Kce=(e,t)=>{const r={},n=i=>{i.forEach(o=>{r[o]=!0})};return Gf(e)?n(e):n(String(e).split(t)),r},qce=()=>{},Yce=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,cC="abcdefghijklmnopqrstuvwxyz",IM="0123456789",IW={DIGIT:IM,ALPHA:cC,ALPHA_DIGIT:cC+cC.toUpperCase()+IM},Xce=(e=16,t=IW.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function Jce(e){return!!(e&&da(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Qce=e=>{const t=new Array(10),r=(n,i)=>{if(iS(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const o=Gf(n)?[]:{};return fy(n,(a,s)=>{const c=r(a,i+1);!T0(c)&&(o[s]=c)}),t[i]=void 0,o}}return n};return r(e,0)},Zce=Ds("AsyncFunction"),ele=e=>e&&(iS(e)||da(e))&&da(e.then)&&da(e.catch),xW=((e,t)=>e?setImmediate:t?((r,n)=>(_u.addEventListener("message",({source:i,data:o})=>{i===_u&&o===r&&n.length&&n.shift()()},!1),i=>{n.push(i),_u.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",da(_u.postMessage)),tle=typeof queueMicrotask<"u"?queueMicrotask.bind(_u):typeof process<"u"&&process.nextTick||xW,le={isArray:Gf,isArrayBuffer:wW,isBuffer:vce,isFormData:Ice,isArrayBufferView:Ece,isString:_ce,isNumber:SW,isBoolean:bce,isObject:iS,isPlainObject:XE,isReadableStream:Ace,isRequest:Nce,isResponse:Oce,isHeaders:kce,isUndefined:T0,isDate:wce,isFile:Sce,isBlob:Tce,isRegExp:Gce,isFunction:da,isStream:Rce,isURLSearchParams:xce,isTypedArray:Vce,isFileList:Cce,forEach:fy,merge:_A,extend:Dce,trim:Pce,stripBOM:Lce,inherits:Mce,toFlatObject:jce,kindOf:rS,kindOfTest:Ds,endsWith:Uce,toArray:Fce,forEachEntry:Bce,matchAll:$ce,isHTMLForm:Hce,hasOwnProperty:RM,hasOwnProp:RM,reduceDescriptors:RW,freezeMethods:zce,toObjectSet:Kce,toCamelCase:Wce,noop:qce,toFiniteNumber:Yce,findKey:TW,global:_u,isContextDefined:CW,ALPHABET:IW,generateString:Xce,isSpecCompliantForm:Jce,toJSONObject:Qce,isAsyncFn:Zce,isThenable:ele,setImmediate:xW,asap:tle};function Bt(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}le.inherits(Bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.status}}});const AW=Bt.prototype,NW={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{NW[e]={value:e}});Object.defineProperties(Bt,NW);Object.defineProperty(AW,"isAxiosError",{value:!0});Bt.from=(e,t,r,n,i,o)=>{const a=Object.create(AW);return le.toFlatObject(e,a,function(c){return c!==Error.prototype},s=>s!=="isAxiosError"),Bt.call(a,e.message,t,r,n,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const rle=null;function bA(e){return le.isPlainObject(e)||le.isArray(e)}function OW(e){return le.endsWith(e,"[]")?e.slice(0,-2):e}function xM(e,t,r){return e?e.concat(t).map(function(i,o){return i=OW(i),!r&&o?"["+i+"]":i}).join(r?".":""):t}function nle(e){return le.isArray(e)&&!e.some(bA)}const ile=le.toFlatObject(le,{},null,function(t){return/^is[A-Z]/.test(t)});function oS(e,t,r){if(!le.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=le.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!le.isUndefined(y[g])});const n=r.metaTokens,i=r.visitor||d,o=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&le.isSpecCompliantForm(t);if(!le.isFunction(i))throw new TypeError("visitor must be a function");function l(m){if(m===null)return"";if(le.isDate(m))return m.toISOString();if(!c&&le.isBlob(m))throw new Bt("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(m)||le.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,y){let v=m;if(m&&!y&&typeof m=="object"){if(le.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(le.isArray(m)&&nle(m)||(le.isFileList(m)||le.endsWith(g,"[]"))&&(v=le.toArray(m)))return g=OW(g),v.forEach(function(w,S){!(le.isUndefined(w)||w===null)&&t.append(a===!0?xM([g],S,o):a===null?g:g+"[]",l(w))}),!1}return bA(m)?!0:(t.append(xM(y,g,o),l(m)),!1)}const u=[],p=Object.assign(ile,{defaultVisitor:d,convertValue:l,isVisitable:bA});function f(m,g){if(!le.isUndefined(m)){if(u.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));u.push(m),le.forEach(m,function(v,E){(!(le.isUndefined(v)||v===null)&&i.call(t,v,le.isString(E)?E.trim():E,g,p))===!0&&f(v,g?g.concat(E):[E])}),u.pop()}}if(!le.isObject(e))throw new TypeError("data must be an object");return f(e),t}function AM(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function xk(e,t){this._pairs=[],e&&oS(e,this,t)}const kW=xk.prototype;kW.append=function(t,r){this._pairs.push([t,r])};kW.toString=function(t){const r=t?function(n){return t.call(this,n,AM)}:AM;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function ole(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function PW(e,t,r){if(!t)return e;const n=r&&r.encode||ole;le.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let o;if(i?o=i(t,r):o=le.isURLSearchParams(t)?t.toString():new xk(t,r).toString(n),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class NM{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){le.forEach(this.handlers,function(n){n!==null&&t(n)})}}const DW={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ale=typeof URLSearchParams<"u"?URLSearchParams:xk,sle=typeof FormData<"u"?FormData:null,cle=typeof Blob<"u"?Blob:null,lle={isBrowser:!0,classes:{URLSearchParams:ale,FormData:sle,Blob:cle},protocols:["http","https","file","blob","url","data"]},Ak=typeof window<"u"&&typeof document<"u",wA=typeof navigator=="object"&&navigator||void 0,dle=Ak&&(!wA||["ReactNative","NativeScript","NS"].indexOf(wA.product)<0),ule=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",hle=Ak&&window.location.href||"http://localhost",ple=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ak,hasStandardBrowserEnv:dle,hasStandardBrowserWebWorkerEnv:ule,navigator:wA,origin:hle},Symbol.toStringTag,{value:"Module"})),Xi={...ple,...lle};function fle(e,t){return oS(e,new Xi.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,o){return Xi.isNode&&le.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function mle(e){return le.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function gle(e){const t={},r=Object.keys(e);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}function LW(e){function t(r,n,i,o){let a=r[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),c=o>=r.length;return a=!a&&le.isArray(i)?i.length:a,c?(le.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!s):((!i[a]||!le.isObject(i[a]))&&(i[a]=[]),t(r,n,i[a],o)&&le.isArray(i[a])&&(i[a]=gle(i[a])),!s)}if(le.isFormData(e)&&le.isFunction(e.entries)){const r={};return le.forEachEntry(e,(n,i)=>{t(mle(n),i,r,0)}),r}return null}function yle(e,t,r){if(le.isString(e))try{return(t||JSON.parse)(e),le.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}const my={transitional:DW,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,o=le.isObject(t);if(o&&le.isHTMLForm(t)&&(t=new FormData(t)),le.isFormData(t))return i?JSON.stringify(LW(t)):t;if(le.isArrayBuffer(t)||le.isBuffer(t)||le.isStream(t)||le.isFile(t)||le.isBlob(t)||le.isReadableStream(t))return t;if(le.isArrayBufferView(t))return t.buffer;if(le.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return fle(t,this.formSerializer).toString();if((s=le.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return oS(s?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),yle(t)):t}],transformResponse:[function(t){const r=this.transitional||my.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(le.isResponse(t)||le.isReadableStream(t))return t;if(t&&le.isString(t)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?Bt.from(s,Bt.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xi.classes.FormData,Blob:Xi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],e=>{my.headers[e]={}});const vle=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ele=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||t[r]&&vle[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},OM=Symbol("internals");function Um(e){return e&&String(e).trim().toLowerCase()}function JE(e){return e===!1||e==null?e:le.isArray(e)?e.map(JE):String(e)}function _le(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const ble=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function lC(e,t,r,n,i){if(le.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!le.isString(t)){if(le.isString(n))return t.indexOf(n)!==-1;if(le.isRegExp(n))return n.test(t)}}function wle(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Sle(e,t){const r=le.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,o,a){return this[n].call(this,t,i,o,a)},configurable:!0})})}class Lo{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function o(s,c,l){const d=Um(c);if(!d)throw new Error("header name must be a non-empty string");const u=le.findKey(i,d);(!u||i[u]===void 0||l===!0||l===void 0&&i[u]!==!1)&&(i[u||c]=JE(s))}const a=(s,c)=>le.forEach(s,(l,d)=>o(l,d,c));if(le.isPlainObject(t)||t instanceof this.constructor)a(t,r);else if(le.isString(t)&&(t=t.trim())&&!ble(t))a(Ele(t),r);else if(le.isHeaders(t))for(const[s,c]of t.entries())o(c,s,n);else t!=null&&o(r,t,n);return this}get(t,r){if(t=Um(t),t){const n=le.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return _le(i);if(le.isFunction(r))return r.call(this,i,n);if(le.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Um(t),t){const n=le.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||lC(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function o(a){if(a=Um(a),a){const s=le.findKey(n,a);s&&(!r||lC(n,n[s],s,r))&&(delete n[s],i=!0)}}return le.isArray(t)?t.forEach(o):o(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const o=r[n];(!t||lC(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const r=this,n={};return le.forEach(this,(i,o)=>{const a=le.findKey(n,o);if(a){r[a]=JE(i),delete r[o];return}const s=t?wle(o):String(o).trim();s!==o&&delete r[o],r[s]=JE(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return le.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&le.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[OM]=this[OM]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=Um(a);n[s]||(Sle(i,a),n[s]=!0)}return le.isArray(t)?t.forEach(o):o(t),this}}Lo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);le.reduceDescriptors(Lo.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});le.freezeMethods(Lo);function dC(e,t){const r=this||my,n=t||r,i=Lo.from(n.headers);let o=n.data;return le.forEach(e,function(s){o=s.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function MW(e){return!!(e&&e.__CANCEL__)}function zf(e,t,r){Bt.call(this,e??"canceled",Bt.ERR_CANCELED,t,r),this.name="CanceledError"}le.inherits(zf,Bt,{__CANCEL__:!0});function jW(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Bt("Request failed with status code "+r.status,[Bt.ERR_BAD_REQUEST,Bt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Tle(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Cle(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,o=0,a;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),d=n[o];a||(a=l),r[i]=c,n[i]=l;let u=o,p=0;for(;u!==i;)p+=r[u++],u=u%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),l-a<t)return;const f=d&&l-d;return f?Math.round(p*1e3/f):void 0}}function Rle(e,t){let r=0,n=1e3/t,i,o;const a=(l,d=Date.now())=>{r=d,i=null,o&&(clearTimeout(o),o=null),e.apply(null,l)};return[(...l)=>{const d=Date.now(),u=d-r;u>=n?a(l,d):(i=l,o||(o=setTimeout(()=>{o=null,a(i)},n-u)))},()=>i&&a(i)]}const ob=(e,t,r=3)=>{let n=0;const i=Cle(50,250);return Rle(o=>{const a=o.loaded,s=o.lengthComputable?o.total:void 0,c=a-n,l=i(c),d=a<=s;n=a;const u={loaded:a,total:s,progress:s?a/s:void 0,bytes:c,rate:l||void 0,estimated:l&&s&&d?(s-a)/l:void 0,event:o,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(u)},r)},kM=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},PM=e=>(...t)=>le.asap(()=>e(...t)),Ile=Xi.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Xi.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Xi.origin),Xi.navigator&&/(msie|trident)/i.test(Xi.navigator.userAgent)):()=>!0,xle=Xi.hasStandardBrowserEnv?{write(e,t,r,n,i,o){const a=[e+"="+encodeURIComponent(t)];le.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),le.isString(n)&&a.push("path="+n),le.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ale(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Nle(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function UW(e,t){return e&&!Ale(t)?Nle(e,t):t}const DM=e=>e instanceof Lo?{...e}:e;function Yu(e,t){t=t||{};const r={};function n(l,d,u,p){return le.isPlainObject(l)&&le.isPlainObject(d)?le.merge.call({caseless:p},l,d):le.isPlainObject(d)?le.merge({},d):le.isArray(d)?d.slice():d}function i(l,d,u,p){if(le.isUndefined(d)){if(!le.isUndefined(l))return n(void 0,l,u,p)}else return n(l,d,u,p)}function o(l,d){if(!le.isUndefined(d))return n(void 0,d)}function a(l,d){if(le.isUndefined(d)){if(!le.isUndefined(l))return n(void 0,l)}else return n(void 0,d)}function s(l,d,u){if(u in t)return n(l,d);if(u in e)return n(void 0,l)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,d,u)=>i(DM(l),DM(d),u,!0)};return le.forEach(Object.keys(Object.assign({},e,t)),function(d){const u=c[d]||i,p=u(e[d],t[d],d);le.isUndefined(p)&&u!==s||(r[d]=p)}),r}const FW=e=>{const t=Yu({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:s}=t;t.headers=a=Lo.from(a),t.url=PW(UW(t.baseURL,t.url),e.params,e.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let c;if(le.isFormData(r)){if(Xi.hasStandardBrowserEnv||Xi.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[l,...d]=c?c.split(";").map(u=>u.trim()).filter(Boolean):[];a.setContentType([l||"multipart/form-data",...d].join("; "))}}if(Xi.hasStandardBrowserEnv&&(n&&le.isFunction(n)&&(n=n(t)),n||n!==!1&&Ile(t.url))){const l=i&&o&&xle.read(o);l&&a.set(i,l)}return t},Ole=typeof XMLHttpRequest<"u",kle=Ole&&function(e){return new Promise(function(r,n){const i=FW(e);let o=i.data;const a=Lo.from(i.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:l}=i,d,u,p,f,m;function g(){f&&f(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function v(){if(!y)return;const w=Lo.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),x={data:!s||s==="text"||s==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:w,config:e,request:y};jW(function(L){r(L),g()},function(L){n(L),g()},x),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(n(new Bt("Request aborted",Bt.ECONNABORTED,e,y)),y=null)},y.onerror=function(){n(new Bt("Network Error",Bt.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const x=i.transitional||DW;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),n(new Bt(S,x.clarifyTimeoutError?Bt.ETIMEDOUT:Bt.ECONNABORTED,e,y)),y=null},o===void 0&&a.setContentType(null),"setRequestHeader"in y&&le.forEach(a.toJSON(),function(S,x){y.setRequestHeader(x,S)}),le.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),s&&s!=="json"&&(y.responseType=i.responseType),l&&([p,m]=ob(l,!0),y.addEventListener("progress",p)),c&&y.upload&&([u,f]=ob(c),y.upload.addEventListener("progress",u),y.upload.addEventListener("loadend",f)),(i.cancelToken||i.signal)&&(d=w=>{y&&(n(!w||w.type?new zf(null,e,y):w),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const E=Tle(i.url);if(E&&Xi.protocols.indexOf(E)===-1){n(new Bt("Unsupported protocol "+E+":",Bt.ERR_BAD_REQUEST,e));return}y.send(o||null)})},Ple=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const o=function(l){if(!i){i=!0,s();const d=l instanceof Error?l:this.reason;n.abort(d instanceof Bt?d:new zf(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,o(new Bt(`timeout ${t} of ms exceeded`,Bt.ETIMEDOUT))},t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(l=>{l.unsubscribe?l.unsubscribe(o):l.removeEventListener("abort",o)}),e=null)};e.forEach(l=>l.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>le.asap(s),c}},Dle=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},Lle=async function*(e,t){for await(const r of Mle(e))yield*Dle(r,t)},Mle=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},LM=(e,t,r,n)=>{const i=Lle(e,t);let o=0,a,s=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:l,value:d}=await i.next();if(l){s(),c.close();return}let u=d.byteLength;if(r){let p=o+=u;r(p)}c.enqueue(new Uint8Array(d))}catch(l){throw s(l),l}},cancel(c){return s(c),i.return()}},{highWaterMark:2})},aS=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",VW=aS&&typeof ReadableStream=="function",jle=aS&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),BW=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Ule=VW&&BW(()=>{let e=!1;const t=new Request(Xi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),MM=64*1024,SA=VW&&BW(()=>le.isReadableStream(new Response("").body)),ab={stream:SA&&(e=>e.body)};aS&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ab[t]&&(ab[t]=le.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new Bt(`Response type '${t}' is not supported`,Bt.ERR_NOT_SUPPORT,n)})})})(new Response);const Fle=async e=>{if(e==null)return 0;if(le.isBlob(e))return e.size;if(le.isSpecCompliantForm(e))return(await new Request(Xi.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(le.isArrayBufferView(e)||le.isArrayBuffer(e))return e.byteLength;if(le.isURLSearchParams(e)&&(e=e+""),le.isString(e))return(await jle(e)).byteLength},Vle=async(e,t)=>{const r=le.toFiniteNumber(e.getContentLength());return r??Fle(t)},Ble=aS&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:l,headers:d,withCredentials:u="same-origin",fetchOptions:p}=FW(e);l=l?(l+"").toLowerCase():"text";let f=Ple([i,o&&o.toAbortSignal()],a),m;const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let y;try{if(c&&Ule&&r!=="get"&&r!=="head"&&(y=await Vle(d,n))!==0){let x=new Request(t,{method:"POST",body:n,duplex:"half"}),O;if(le.isFormData(n)&&(O=x.headers.get("content-type"))&&d.setContentType(O),x.body){const[L,j]=kM(y,ob(PM(c)));n=LM(x.body,MM,L,j)}}le.isString(u)||(u=u?"include":"omit");const v="credentials"in Request.prototype;m=new Request(t,{...p,signal:f,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:v?u:void 0});let E=await fetch(m);const w=SA&&(l==="stream"||l==="response");if(SA&&(s||w&&g)){const x={};["status","statusText","headers"].forEach(W=>{x[W]=E[W]});const O=le.toFiniteNumber(E.headers.get("content-length")),[L,j]=s&&kM(O,ob(PM(s),!0))||[];E=new Response(LM(E.body,MM,L,()=>{j&&j(),g&&g()}),x)}l=l||"text";let S=await ab[le.findKey(ab,l)||"text"](E,e);return!w&&g&&g(),await new Promise((x,O)=>{jW(x,O,{data:S,headers:Lo.from(E.headers),status:E.status,statusText:E.statusText,config:e,request:m})})}catch(v){throw g&&g(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new Bt("Network Error",Bt.ERR_NETWORK,e,m),{cause:v.cause||v}):Bt.from(v,v&&v.code,e,m)}}),TA={http:rle,xhr:kle,fetch:Ble};le.forEach(TA,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const jM=e=>`- ${e}`,$le=e=>le.isFunction(e)||e===null||e===!1,$W={getAdapter:e=>{e=le.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let o=0;o<t;o++){r=e[o];let a;if(n=r,!$le(r)&&(n=TA[(a=String(r)).toLowerCase()],n===void 0))throw new Bt(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+o]=n}if(!n){const o=Object.entries(i).map(([s,c])=>`adapter ${s} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(jM).join(`
`):" "+jM(o[0]):"as no adapter specified";throw new Bt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:TA};function uC(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new zf(null,e)}function UM(e){return uC(e),e.headers=Lo.from(e.headers),e.data=dC.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),$W.getAdapter(e.adapter||my.adapter)(e).then(function(n){return uC(e),n.data=dC.call(e,e.transformResponse,n),n.headers=Lo.from(n.headers),n},function(n){return MW(n)||(uC(e),n&&n.response&&(n.response.data=dC.call(e,e.transformResponse,n.response),n.response.headers=Lo.from(n.response.headers))),Promise.reject(n)})}const HW="1.7.9",sS={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{sS[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const FM={};sS.transitional=function(t,r,n){function i(o,a){return"[Axios v"+HW+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,s)=>{if(t===!1)throw new Bt(i(a," has been removed"+(r?" in "+r:"")),Bt.ERR_DEPRECATED);return r&&!FM[a]&&(FM[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,s):!0}};sS.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Hle(e,t,r){if(typeof e!="object")throw new Bt("options must be an object",Bt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],a=t[o];if(a){const s=e[o],c=s===void 0||a(s,o,e);if(c!==!0)throw new Bt("option "+o+" must be "+c,Bt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Bt("Unknown option "+o,Bt.ERR_BAD_OPTION)}}const QE={assertOptions:Hle,validators:sS},Gs=QE.validators;class Du{constructor(t){this.defaults=t,this.interceptors={request:new NM,response:new NM}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Yu(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:o}=r;n!==void 0&&QE.assertOptions(n,{silentJSONParsing:Gs.transitional(Gs.boolean),forcedJSONParsing:Gs.transitional(Gs.boolean),clarifyTimeoutError:Gs.transitional(Gs.boolean)},!1),i!=null&&(le.isFunction(i)?r.paramsSerializer={serialize:i}:QE.assertOptions(i,{encode:Gs.function,serialize:Gs.function},!0)),QE.assertOptions(r,{baseUrl:Gs.spelling("baseURL"),withXsrfToken:Gs.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=o&&le.merge(o.common,o[r.method]);o&&le.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),r.headers=Lo.concat(a,o);const s=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,s.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let d,u=0,p;if(!c){const m=[UM.bind(this),void 0];for(m.unshift.apply(m,s),m.push.apply(m,l),p=m.length,d=Promise.resolve(r);u<p;)d=d.then(m[u++],m[u++]);return d}p=s.length;let f=r;for(u=0;u<p;){const m=s[u++],g=s[u++];try{f=m(f)}catch(y){g.call(this,y);break}}try{d=UM.call(this,f)}catch(m){return Promise.reject(m)}for(u=0,p=l.length;u<p;)d=d.then(l[u++],l[u++]);return d}getUri(t){t=Yu(this.defaults,t);const r=UW(t.baseURL,t.url);return PW(r,t.params,t.paramsSerializer)}}le.forEach(["delete","get","head","options"],function(t){Du.prototype[t]=function(r,n){return this.request(Yu(n||{},{method:t,url:r,data:(n||{}).data}))}});le.forEach(["post","put","patch"],function(t){function r(n){return function(o,a,s){return this.request(Yu(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Du.prototype[t]=r(),Du.prototype[t+"Form"]=r(!0)});class Nk{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{n.subscribe(s),o=s}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},t(function(o,a,s){n.reason||(n.reason=new zf(o,a,s),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Nk(function(i){t=i}),cancel:t}}}function Wle(e){return function(r){return e.apply(null,r)}}function Gle(e){return le.isObject(e)&&e.isAxiosError===!0}const CA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(CA).forEach(([e,t])=>{CA[t]=e});function WW(e){const t=new Du(e),r=bW(Du.prototype.request,t);return le.extend(r,Du.prototype,t,{allOwnKeys:!0}),le.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return WW(Yu(e,i))},r}const Ee=WW(my);Ee.Axios=Du;Ee.CanceledError=zf;Ee.CancelToken=Nk;Ee.isCancel=MW;Ee.VERSION=HW;Ee.toFormData=oS;Ee.AxiosError=Bt;Ee.Cancel=Ee.CanceledError;Ee.all=function(t){return Promise.all(t)};Ee.spread=Wle;Ee.isAxiosError=Gle;Ee.mergeConfig=Yu;Ee.AxiosHeaders=Lo;Ee.formToJSON=e=>LW(le.isHTMLForm(e)?new FormData(e):e);Ee.getAdapter=$W.getAdapter;Ee.HttpStatusCode=CA;Ee.default=Ee;/*!
* sweetalert2 v11.15.2
* Released under the MIT License.
*/function GW(e,t,r){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function zle(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function VM(e,t){return e.get(GW(e,t))}function Kle(e,t,r){zle(e,t),t.set(e,r)}function qle(e,t,r){return e.set(GW(e,t),r),r}const Yle=100,yt={},Xle=()=>{yt.previousActiveElement instanceof HTMLElement?(yt.previousActiveElement.focus(),yt.previousActiveElement=null):document.body&&document.body.focus()},Jle=e=>new Promise(t=>{if(!e)return t();const r=window.scrollX,n=window.scrollY;yt.restoreFocusTimeout=setTimeout(()=>{Xle(),t()},Yle),window.scrollTo(r,n)}),zW="swal2-",Qle=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],se=Qle.reduce((e,t)=>(e[t]=zW+t,e),{}),Zle=["success","warning","info","question","error"],sb=Zle.reduce((e,t)=>(e[t]=zW+t,e),{}),KW="SweetAlert2:",Ok=e=>e.charAt(0).toUpperCase()+e.slice(1),Vo=e=>{console.warn(`${KW} ${typeof e=="object"?e.join(" "):e}`)},mh=e=>{console.error(`${KW} ${e}`)},BM=[],ede=e=>{BM.includes(e)||(BM.push(e),Vo(e))},qW=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;ede(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},cS=e=>typeof e=="function"?e():e,kk=e=>e&&typeof e.toPromise=="function",gy=e=>kk(e)?e.toPromise():Promise.resolve(e),Pk=e=>e&&Promise.resolve(e)===e,Bo=()=>document.body.querySelector(`.${se.container}`),yy=e=>{const t=Bo();return t?t.querySelector(e):null},Ea=e=>yy(`.${e}`),br=()=>Ea(se.popup),Kf=()=>Ea(se.icon),tde=()=>Ea(se["icon-content"]),YW=()=>Ea(se.title),Dk=()=>Ea(se["html-container"]),XW=()=>Ea(se.image),Lk=()=>Ea(se["progress-steps"]),lS=()=>Ea(se["validation-message"]),yc=()=>yy(`.${se.actions} .${se.confirm}`),qf=()=>yy(`.${se.actions} .${se.cancel}`),gh=()=>yy(`.${se.actions} .${se.deny}`),rde=()=>Ea(se["input-label"]),Yf=()=>yy(`.${se.loader}`),vy=()=>Ea(se.actions),JW=()=>Ea(se.footer),dS=()=>Ea(se["timer-progress-bar"]),Mk=()=>Ea(se.close),nde=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,jk=()=>{const e=br();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),r=Array.from(t).sort((o,a)=>{const s=parseInt(o.getAttribute("tabindex")||"0"),c=parseInt(a.getAttribute("tabindex")||"0");return s>c?1:s<c?-1:0}),n=e.querySelectorAll(nde),i=Array.from(n).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(r.concat(i))].filter(o=>Mo(o))},Uk=()=>rl(document.body,se.shown)&&!rl(document.body,se["toast-shown"])&&!rl(document.body,se["no-backdrop"]),uS=()=>{const e=br();return e?rl(e,se.toast):!1},ide=()=>{const e=br();return e?e.hasAttribute("data-loading"):!1},_a=(e,t)=>{if(e.textContent="",t){const n=new DOMParser().parseFromString(t,"text/html"),i=n.querySelector("head");i&&Array.from(i.childNodes).forEach(a=>{e.appendChild(a)});const o=n.querySelector("body");o&&Array.from(o.childNodes).forEach(a=>{a instanceof HTMLVideoElement||a instanceof HTMLAudioElement?e.appendChild(a.cloneNode(!0)):e.appendChild(a)})}},rl=(e,t)=>{if(!t)return!1;const r=t.split(/\s+/);for(let n=0;n<r.length;n++)if(!e.classList.contains(r[n]))return!1;return!0},ode=(e,t)=>{Array.from(e.classList).forEach(r=>{!Object.values(se).includes(r)&&!Object.values(sb).includes(r)&&!Object.values(t.showClass||{}).includes(r)&&e.classList.remove(r)})},pa=(e,t,r)=>{if(ode(e,t),!t.customClass)return;const n=t.customClass[r];if(n){if(typeof n!="string"&&!n.forEach){Vo(`Invalid type of customClass.${r}! Expected string or iterable object, got "${typeof n}"`);return}lr(e,n)}},hS=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${se.popup} > .${se[t]}`);case"checkbox":return e.querySelector(`.${se.popup} > .${se.checkbox} input`);case"radio":return e.querySelector(`.${se.popup} > .${se.radio} input:checked`)||e.querySelector(`.${se.popup} > .${se.radio} input:first-child`);case"range":return e.querySelector(`.${se.popup} > .${se.range} input`);default:return e.querySelector(`.${se.popup} > .${se.input}`)}},QW=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},ZW=(e,t,r)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(n=>{Array.isArray(e)?e.forEach(i=>{r?i.classList.add(n):i.classList.remove(n)}):r?e.classList.add(n):e.classList.remove(n)}))},lr=(e,t)=>{ZW(e,t,!0)},es=(e,t)=>{ZW(e,t,!1)},Zl=(e,t)=>{const r=Array.from(e.children);for(let n=0;n<r.length;n++){const i=r[n];if(i instanceof HTMLElement&&rl(i,t))return i}},Lu=(e,t,r)=>{r===`${parseInt(r)}`&&(r=parseInt(r)),r||parseInt(r)===0?e.style.setProperty(t,typeof r=="number"?`${r}px`:r):e.style.removeProperty(t)},Ci=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";e&&(e.style.display=t)},Qi=e=>{e&&(e.style.display="none")},Fk=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";e&&new MutationObserver(()=>{Ey(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},$M=(e,t,r,n)=>{const i=e.querySelector(t);i&&i.style.setProperty(r,n)},Ey=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";t?Ci(e,r):Qi(e)},Mo=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),ade=()=>!Mo(yc())&&!Mo(gh())&&!Mo(qf()),HM=e=>e.scrollHeight>e.clientHeight,eG=e=>{const t=window.getComputedStyle(e),r=parseFloat(t.getPropertyValue("animation-duration")||"0"),n=parseFloat(t.getPropertyValue("transition-duration")||"0");return r>0||n>0},Vk=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=dS();r&&Mo(r)&&(t&&(r.style.transition="none",r.style.width="100%"),setTimeout(()=>{r.style.transition=`width ${e/1e3}s linear`,r.style.width="0%"},10))},sde=()=>{const e=dS();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const r=parseInt(window.getComputedStyle(e).width),n=t/r*100;e.style.width=`${n}%`},cde=()=>typeof window>"u"||typeof document>"u",lde=`
 <div aria-labelledby="${se.title}" aria-describedby="${se["html-container"]}" class="${se.popup}" tabindex="-1">
   <button type="button" class="${se.close}"></button>
   <ul class="${se["progress-steps"]}"></ul>
   <div class="${se.icon}"></div>
   <img class="${se.image}" />
   <h2 class="${se.title}" id="${se.title}"></h2>
   <div class="${se["html-container"]}" id="${se["html-container"]}"></div>
   <input class="${se.input}" id="${se.input}" />
   <input type="file" class="${se.file}" />
   <div class="${se.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${se.select}" id="${se.select}"></select>
   <div class="${se.radio}"></div>
   <label class="${se.checkbox}">
     <input type="checkbox" id="${se.checkbox}" />
     <span class="${se.label}"></span>
   </label>
   <textarea class="${se.textarea}" id="${se.textarea}"></textarea>
   <div class="${se["validation-message"]}" id="${se["validation-message"]}"></div>
   <div class="${se.actions}">
     <div class="${se.loader}"></div>
     <button type="button" class="${se.confirm}"></button>
     <button type="button" class="${se.deny}"></button>
     <button type="button" class="${se.cancel}"></button>
   </div>
   <div class="${se.footer}"></div>
   <div class="${se["timer-progress-bar-container"]}">
     <div class="${se["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),dde=()=>{const e=Bo();return e?(e.remove(),es([document.documentElement,document.body],[se["no-backdrop"],se["toast-shown"],se["has-column"]]),!0):!1},Yd=()=>{yt.currentInstance.resetValidationMessage()},ude=()=>{const e=br(),t=Zl(e,se.input),r=Zl(e,se.file),n=e.querySelector(`.${se.range} input`),i=e.querySelector(`.${se.range} output`),o=Zl(e,se.select),a=e.querySelector(`.${se.checkbox} input`),s=Zl(e,se.textarea);t.oninput=Yd,r.onchange=Yd,o.onchange=Yd,a.onchange=Yd,s.oninput=Yd,n.oninput=()=>{Yd(),i.value=n.value},n.onchange=()=>{Yd(),i.value=n.value}},hde=e=>typeof e=="string"?document.querySelector(e):e,pde=e=>{const t=br();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},fde=e=>{window.getComputedStyle(e).direction==="rtl"&&lr(Bo(),se.rtl)},mde=e=>{const t=dde();if(cde()){mh("SweetAlert2 requires document to initialize");return}const r=document.createElement("div");r.className=se.container,t&&lr(r,se["no-transition"]),_a(r,lde);const n=hde(e.target);n.appendChild(r),pde(e),fde(n),ude()},Bk=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?gde(e,t):e&&_a(t,e)},gde=(e,t)=>{e.jquery?yde(t,e):_a(t,e.toString())},yde=(e,t)=>{if(e.textContent="",0 in t)for(let r=0;r in t;r++)e.appendChild(t[r].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},vde=(e,t)=>{const r=vy(),n=Yf();!r||!n||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?Qi(r):Ci(r),pa(r,t,"actions"),Ede(r,n,t),_a(n,t.loaderHtml||""),pa(n,t,"loader"))};function Ede(e,t,r){const n=yc(),i=gh(),o=qf();!n||!i||!o||(hC(n,"confirm",r),hC(i,"deny",r),hC(o,"cancel",r),_de(n,i,o,r),r.reverseButtons&&(r.toast?(e.insertBefore(o,n),e.insertBefore(i,n)):(e.insertBefore(o,t),e.insertBefore(i,t),e.insertBefore(n,t))))}function _de(e,t,r,n){if(!n.buttonsStyling){es([e,t,r],se.styled);return}lr([e,t,r],se.styled),n.confirmButtonColor&&(e.style.backgroundColor=n.confirmButtonColor,lr(e,se["default-outline"])),n.denyButtonColor&&(t.style.backgroundColor=n.denyButtonColor,lr(t,se["default-outline"])),n.cancelButtonColor&&(r.style.backgroundColor=n.cancelButtonColor,lr(r,se["default-outline"]))}function hC(e,t,r){const n=Ok(t);Ey(e,r[`show${n}Button`],"inline-block"),_a(e,r[`${t}ButtonText`]||""),e.setAttribute("aria-label",r[`${t}ButtonAriaLabel`]||""),e.className=se[t],pa(e,r,`${t}Button`)}const bde=(e,t)=>{const r=Mk();r&&(_a(r,t.closeButtonHtml||""),pa(r,t,"closeButton"),Ey(r,t.showCloseButton),r.setAttribute("aria-label",t.closeButtonAriaLabel||""))},wde=(e,t)=>{const r=Bo();r&&(Sde(r,t.backdrop),Tde(r,t.position),Cde(r,t.grow),pa(r,t,"container"))};function Sde(e,t){typeof t=="string"?e.style.background=t:t||lr([document.documentElement,document.body],se["no-backdrop"])}function Tde(e,t){t&&(t in se?lr(e,se[t]):(Vo('The "position" parameter is not valid, defaulting to "center"'),lr(e,se.center)))}function Cde(e,t){t&&lr(e,se[`grow-${t}`])}var Zr={innerParams:new WeakMap,domCache:new WeakMap};const Rde=["input","file","range","select","radio","checkbox","textarea"],Ide=(e,t)=>{const r=br();if(!r)return;const n=Zr.innerParams.get(e),i=!n||t.input!==n.input;Rde.forEach(o=>{const a=Zl(r,se[o]);a&&(Nde(o,t.inputAttributes),a.className=se[o],i&&Qi(a))}),t.input&&(i&&xde(t),Ode(t))},xde=e=>{if(!e.input)return;if(!Bn[e.input]){mh(`Unexpected type of input! Expected ${Object.keys(Bn).join(" | ")}, got "${e.input}"`);return}const t=tG(e.input);if(!t)return;const r=Bn[e.input](t,e);Ci(t),e.inputAutoFocus&&setTimeout(()=>{QW(r)})},Ade=e=>{for(let t=0;t<e.attributes.length;t++){const r=e.attributes[t].name;["id","type","value","style"].includes(r)||e.removeAttribute(r)}},Nde=(e,t)=>{const r=br();if(!r)return;const n=hS(r,e);if(n){Ade(n);for(const i in t)n.setAttribute(i,t[i])}},Ode=e=>{if(!e.input)return;const t=tG(e.input);t&&pa(t,e,"input")},$k=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},_y=(e,t,r)=>{if(r.inputLabel){const n=document.createElement("label"),i=se["input-label"];n.setAttribute("for",e.id),n.className=i,typeof r.customClass=="object"&&lr(n,r.customClass.inputLabel),n.innerText=r.inputLabel,t.insertAdjacentElement("beforebegin",n)}},tG=e=>{const t=br();if(t)return Zl(t,se[e]||se.input)},cb=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:Pk(t)||Vo(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Bn={};Bn.text=Bn.email=Bn.password=Bn.number=Bn.tel=Bn.url=Bn.search=Bn.date=Bn["datetime-local"]=Bn.time=Bn.week=Bn.month=(e,t)=>(cb(e,t.inputValue),_y(e,e,t),$k(e,t),e.type=t.input,e);Bn.file=(e,t)=>(_y(e,e,t),$k(e,t),e);Bn.range=(e,t)=>{const r=e.querySelector("input"),n=e.querySelector("output");return cb(r,t.inputValue),r.type=t.input,cb(n,t.inputValue),_y(r,e,t),e};Bn.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const r=document.createElement("option");_a(r,t.inputPlaceholder),r.value="",r.disabled=!0,r.selected=!0,e.appendChild(r)}return _y(e,e,t),e};Bn.radio=e=>(e.textContent="",e);Bn.checkbox=(e,t)=>{const r=hS(br(),"checkbox");r.value="1",r.checked=!!t.inputValue;const n=e.querySelector("span");return _a(n,t.inputPlaceholder||t.inputLabel),r};Bn.textarea=(e,t)=>{cb(e,t.inputValue),$k(e,t),_y(e,e,t);const r=n=>parseInt(window.getComputedStyle(n).marginLeft)+parseInt(window.getComputedStyle(n).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(br()).width),i=()=>{if(!document.body.contains(e))return;const o=e.offsetWidth+r(e);o>n?br().style.width=`${o}px`:Lu(br(),"width",t.width)};new MutationObserver(i).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const kde=(e,t)=>{const r=Dk();r&&(Fk(r),pa(r,t,"htmlContainer"),t.html?(Bk(t.html,r),Ci(r,"block")):t.text?(r.textContent=t.text,Ci(r,"block")):Qi(r),Ide(e,t))},Pde=(e,t)=>{const r=JW();r&&(Fk(r),Ey(r,t.footer,"block"),t.footer&&Bk(t.footer,r),pa(r,t,"footer"))},Dde=(e,t)=>{const r=Zr.innerParams.get(e),n=Kf();if(n){if(r&&t.icon===r.icon){GM(n,t),WM(n,t);return}if(!t.icon&&!t.iconHtml){Qi(n);return}if(t.icon&&Object.keys(sb).indexOf(t.icon)===-1){mh(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),Qi(n);return}Ci(n),GM(n,t),WM(n,t),lr(n,t.showClass&&t.showClass.icon)}},WM=(e,t)=>{for(const[r,n]of Object.entries(sb))t.icon!==r&&es(e,n);lr(e,t.icon&&sb[t.icon]),Ude(e,t),Lde(),pa(e,t,"icon")},Lde=()=>{const e=br();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),r=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let n=0;n<r.length;n++)r[n].style.backgroundColor=t},Mde=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,jde=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,GM=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let r=e.innerHTML,n="";t.iconHtml?n=zM(t.iconHtml):t.icon==="success"?(n=Mde,r=r.replace(/ style=".*?"/g,"")):t.icon==="error"?n=jde:t.icon&&(n=zM({question:"?",warning:"!",info:"i"}[t.icon])),r.trim()!==n.trim()&&_a(e,n)},Ude=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const r of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])$M(e,r,"background-color",t.iconColor);$M(e,".swal2-success-ring","border-color",t.iconColor)}},zM=e=>`<div class="${se["icon-content"]}">${e}</div>`,Fde=(e,t)=>{const r=XW();if(r){if(!t.imageUrl){Qi(r);return}Ci(r,""),r.setAttribute("src",t.imageUrl),r.setAttribute("alt",t.imageAlt||""),Lu(r,"width",t.imageWidth),Lu(r,"height",t.imageHeight),r.className=se.image,pa(r,t,"image")}};let Hk=!1,rG=0,nG=0,iG=0,oG=0;const Vde=e=>{e.addEventListener("mousedown",lb),document.body.addEventListener("mousemove",db),e.addEventListener("mouseup",ub),e.addEventListener("touchstart",lb),document.body.addEventListener("touchmove",db),e.addEventListener("touchend",ub)},Bde=e=>{e.removeEventListener("mousedown",lb),document.body.removeEventListener("mousemove",db),e.removeEventListener("mouseup",ub),e.removeEventListener("touchstart",lb),document.body.removeEventListener("touchmove",db),e.removeEventListener("touchend",ub)},lb=e=>{const t=br();if(e.target===t||Kf().contains(e.target)){Hk=!0;const r=aG(e);rG=r.clientX,nG=r.clientY,iG=parseInt(t.style.insetInlineStart)||0,oG=parseInt(t.style.insetBlockStart)||0,lr(t,"swal2-dragging")}},db=e=>{const t=br();if(Hk){let{clientX:r,clientY:n}=aG(e);t.style.insetInlineStart=`${iG+(r-rG)}px`,t.style.insetBlockStart=`${oG+(n-nG)}px`}},ub=()=>{const e=br();Hk=!1,es(e,"swal2-dragging")},aG=e=>{let t=0,r=0;return e.type.startsWith("mouse")?(t=e.clientX,r=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,r=e.touches[0].clientY),{clientX:t,clientY:r}},$de=(e,t)=>{const r=Bo(),n=br();if(!(!r||!n)){if(t.toast){Lu(r,"width",t.width),n.style.width="100%";const i=Yf();i&&n.insertBefore(i,Kf())}else Lu(n,"width",t.width);Lu(n,"padding",t.padding),t.color&&(n.style.color=t.color),t.background&&(n.style.background=t.background),Qi(lS()),Hde(n,t),t.draggable&&!t.toast?(lr(n,se.draggable),Vde(n)):(es(n,se.draggable),Bde(n))}},Hde=(e,t)=>{const r=t.showClass||{};e.className=`${se.popup} ${Mo(e)?r.popup:""}`,t.toast?(lr([document.documentElement,document.body],se["toast-shown"]),lr(e,se.toast)):lr(e,se.modal),pa(e,t,"popup"),typeof t.customClass=="string"&&lr(e,t.customClass),t.icon&&lr(e,se[`icon-${t.icon}`])},Wde=(e,t)=>{const r=Lk();if(!r)return;const{progressSteps:n,currentProgressStep:i}=t;if(!n||n.length===0||i===void 0){Qi(r);return}Ci(r),r.textContent="",i>=n.length&&Vo("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),n.forEach((o,a)=>{const s=Gde(o);if(r.appendChild(s),a===i&&lr(s,se["active-progress-step"]),a!==n.length-1){const c=zde(t);r.appendChild(c)}})},Gde=e=>{const t=document.createElement("li");return lr(t,se["progress-step"]),_a(t,e),t},zde=e=>{const t=document.createElement("li");return lr(t,se["progress-step-line"]),e.progressStepsDistance&&Lu(t,"width",e.progressStepsDistance),t},Kde=(e,t)=>{const r=YW();r&&(Fk(r),Ey(r,t.title||t.titleText,"block"),t.title&&Bk(t.title,r),t.titleText&&(r.innerText=t.titleText),pa(r,t,"title"))},sG=(e,t)=>{$de(e,t),wde(e,t),Wde(e,t),Dde(e,t),Fde(e,t),Kde(e,t),bde(e,t),kde(e,t),vde(e,t),Pde(e,t);const r=br();typeof t.didRender=="function"&&r&&t.didRender(r),yt.eventEmitter.emit("didRender",r)},qde=()=>Mo(br()),cG=()=>{var e;return(e=yc())===null||e===void 0?void 0:e.click()},Yde=()=>{var e;return(e=gh())===null||e===void 0?void 0:e.click()},Xde=()=>{var e;return(e=qf())===null||e===void 0?void 0:e.click()},Xf=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),lG=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},Jde=(e,t,r)=>{lG(e),t.toast||(e.keydownHandler=n=>Zde(t,n,r),e.keydownTarget=t.keydownListenerCapture?window:br(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},RA=(e,t)=>{var r;const n=jk();if(n.length){e=e+t,e===n.length?e=0:e===-1&&(e=n.length-1),n[e].focus();return}(r=br())===null||r===void 0||r.focus()},dG=["ArrowRight","ArrowDown"],Qde=["ArrowLeft","ArrowUp"],Zde=(e,t,r)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?eue(t,e):t.key==="Tab"?tue(t):[...dG,...Qde].includes(t.key)?rue(t.key):t.key==="Escape"&&nue(t,e,r)))},eue=(e,t)=>{if(!cS(t.allowEnterKey))return;const r=hS(br(),t.input);if(e.target&&r&&e.target instanceof HTMLElement&&e.target.outerHTML===r.outerHTML){if(["textarea","file"].includes(t.input))return;cG(),e.preventDefault()}},tue=e=>{const t=e.target,r=jk();let n=-1;for(let i=0;i<r.length;i++)if(t===r[i]){n=i;break}e.shiftKey?RA(n,-1):RA(n,1),e.stopPropagation(),e.preventDefault()},rue=e=>{const t=vy(),r=yc(),n=gh(),i=qf();if(!t||!r||!n||!i)return;const o=[r,n,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const a=dG.includes(e)?"nextElementSibling":"previousElementSibling";let s=document.activeElement;if(s){for(let c=0;c<t.children.length;c++){if(s=s[a],!s)return;if(s instanceof HTMLButtonElement&&Mo(s))break}s instanceof HTMLButtonElement&&s.focus()}},nue=(e,t,r)=>{cS(t.allowEscapeKey)&&(e.preventDefault(),r(Xf.esc))};var ff={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const iue=()=>{const e=Bo();Array.from(document.body.children).forEach(r=>{r.contains(e)||(r.hasAttribute("aria-hidden")&&r.setAttribute("data-previous-aria-hidden",r.getAttribute("aria-hidden")||""),r.setAttribute("aria-hidden","true"))})},uG=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},hG=typeof window<"u"&&!!window.GestureEvent,oue=()=>{if(hG&&!rl(document.body,se.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,lr(document.body,se.iosfix),aue()}},aue=()=>{const e=Bo();if(!e)return;let t;e.ontouchstart=r=>{t=sue(r)},e.ontouchmove=r=>{t&&(r.preventDefault(),r.stopPropagation())}},sue=e=>{const t=e.target,r=Bo(),n=Dk();return!r||!n||cue(e)||lue(e)?!1:t===r||!HM(r)&&t instanceof HTMLElement&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(HM(n)&&n.contains(t))},cue=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",lue=e=>e.touches&&e.touches.length>1,due=()=>{if(rl(document.body,se.iosfix)){const e=parseInt(document.body.style.top,10);es(document.body,se.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},uue=()=>{const e=document.createElement("div");e.className=se["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Gp=null;const hue=e=>{Gp===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(Gp=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Gp+uue()}px`)},pue=()=>{Gp!==null&&(document.body.style.paddingRight=`${Gp}px`,Gp=null)};function pG(e,t,r,n){uS()?KM(e,n):(Jle(r).then(()=>KM(e,n)),lG(yt)),hG?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),Uk()&&(pue(),due(),uG()),fue()}function fue(){es([document.documentElement,document.body],[se.shown,se["height-auto"],se["no-backdrop"],se["toast-shown"]])}function ed(e){e=gue(e);const t=ff.swalPromiseResolve.get(this),r=mue(this);this.isAwaitingPromise?e.isDismissed||(by(this),t(e)):r&&t(e)}const mue=e=>{const t=br();if(!t)return!1;const r=Zr.innerParams.get(e);if(!r||rl(t,r.hideClass.popup))return!1;es(t,r.showClass.popup),lr(t,r.hideClass.popup);const n=Bo();return es(n,r.showClass.backdrop),lr(n,r.hideClass.backdrop),yue(e,t,r),!0};function fG(e){const t=ff.swalPromiseReject.get(this);by(this),t&&t(e)}const by=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Zr.innerParams.get(e)||e._destroy())},gue=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),yue=(e,t,r)=>{var n;const i=Bo(),o=eG(t);typeof r.willClose=="function"&&r.willClose(t),(n=yt.eventEmitter)===null||n===void 0||n.emit("willClose",t),o?vue(e,t,i,r.returnFocus,r.didClose):pG(e,i,r.returnFocus,r.didClose)},vue=(e,t,r,n,i)=>{yt.swalCloseEventFinishedCallback=pG.bind(null,e,r,n,i);const o=function(a){if(a.target===t){var s;(s=yt.swalCloseEventFinishedCallback)===null||s===void 0||s.call(yt),delete yt.swalCloseEventFinishedCallback,t.removeEventListener("animationend",o),t.removeEventListener("transitionend",o)}};t.addEventListener("animationend",o),t.addEventListener("transitionend",o)},KM=(e,t)=>{setTimeout(()=>{var r;typeof t=="function"&&t.bind(e.params)(),(r=yt.eventEmitter)===null||r===void 0||r.emit("didClose"),e._destroy&&e._destroy()})},mf=e=>{let t=br();if(t||new re,t=br(),!t)return;const r=Yf();uS()?Qi(Kf()):Eue(t,e),Ci(r),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},Eue=(e,t)=>{const r=vy(),n=Yf();!r||!n||(!t&&Mo(yc())&&(t=yc()),Ci(r),t&&(Qi(t),n.setAttribute("data-button-to-replace",t.className),r.insertBefore(n,t)),lr([e,r],se.loading))},_ue=(e,t)=>{t.input==="select"||t.input==="radio"?Cue(e,t):["text","email","number","tel","textarea"].some(r=>r===t.input)&&(kk(t.inputValue)||Pk(t.inputValue))&&(mf(yc()),Rue(e,t))},bue=(e,t)=>{const r=e.getInput();if(!r)return null;switch(t.input){case"checkbox":return wue(r);case"radio":return Sue(r);case"file":return Tue(r);default:return t.inputAutoTrim?r.value.trim():r.value}},wue=e=>e.checked?1:0,Sue=e=>e.checked?e.value:null,Tue=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,Cue=(e,t)=>{const r=br();if(!r)return;const n=i=>{t.input==="select"?Iue(r,hb(i),t):t.input==="radio"&&xue(r,hb(i),t)};kk(t.inputOptions)||Pk(t.inputOptions)?(mf(yc()),gy(t.inputOptions).then(i=>{e.hideLoading(),n(i)})):typeof t.inputOptions=="object"?n(t.inputOptions):mh(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},Rue=(e,t)=>{const r=e.getInput();r&&(Qi(r),gy(t.inputValue).then(n=>{r.value=t.input==="number"?`${parseFloat(n)||0}`:`${n}`,Ci(r),r.focus(),e.hideLoading()}).catch(n=>{mh(`Error in inputValue promise: ${n}`),r.value="",Ci(r),r.focus(),e.hideLoading()}))};function Iue(e,t,r){const n=Zl(e,se.select);if(!n)return;const i=(o,a,s)=>{const c=document.createElement("option");c.value=s,_a(c,a),c.selected=mG(s,r.inputValue),o.appendChild(c)};t.forEach(o=>{const a=o[0],s=o[1];if(Array.isArray(s)){const c=document.createElement("optgroup");c.label=a,c.disabled=!1,n.appendChild(c),s.forEach(l=>i(c,l[1],l[0]))}else i(n,s,a)}),n.focus()}function xue(e,t,r){const n=Zl(e,se.radio);if(!n)return;t.forEach(o=>{const a=o[0],s=o[1],c=document.createElement("input"),l=document.createElement("label");c.type="radio",c.name=se.radio,c.value=a,mG(a,r.inputValue)&&(c.checked=!0);const d=document.createElement("span");_a(d,s),d.className=se.label,l.appendChild(c),l.appendChild(d),n.appendChild(l)});const i=n.querySelectorAll("input");i.length&&i[0].focus()}const hb=e=>{const t=[];return e instanceof Map?e.forEach((r,n)=>{let i=r;typeof i=="object"&&(i=hb(i)),t.push([n,i])}):Object.keys(e).forEach(r=>{let n=e[r];typeof n=="object"&&(n=hb(n)),t.push([r,n])}),t},mG=(e,t)=>!!t&&t.toString()===e.toString(),Aue=e=>{const t=Zr.innerParams.get(e);e.disableButtons(),t.input?gG(e,"confirm"):Gk(e,!0)},Nue=e=>{const t=Zr.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?gG(e,"deny"):Wk(e,!1)},Oue=(e,t)=>{e.disableButtons(),t(Xf.cancel)},gG=(e,t)=>{const r=Zr.innerParams.get(e);if(!r.input){mh(`The "input" parameter is needed to be set when using returnInputValueOn${Ok(t)}`);return}const n=e.getInput(),i=bue(e,r);r.inputValidator?kue(e,i,t):n&&!n.checkValidity()?(e.enableButtons(),e.showValidationMessage(r.validationMessage||n.validationMessage)):t==="deny"?Wk(e,i):Gk(e,i)},kue=(e,t,r)=>{const n=Zr.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>gy(n.inputValidator(t,n.validationMessage))).then(o=>{e.enableButtons(),e.enableInput(),o?e.showValidationMessage(o):r==="deny"?Wk(e,t):Gk(e,t)})},Wk=(e,t)=>{const r=Zr.innerParams.get(e||void 0);r.showLoaderOnDeny&&mf(gh()),r.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>gy(r.preDeny(t,r.validationMessage))).then(i=>{i===!1?(e.hideLoading(),by(e)):e.close({isDenied:!0,value:typeof i>"u"?t:i})}).catch(i=>yG(e||void 0,i))):e.close({isDenied:!0,value:t})},qM=(e,t)=>{e.close({isConfirmed:!0,value:t})},yG=(e,t)=>{e.rejectPromise(t)},Gk=(e,t)=>{const r=Zr.innerParams.get(e||void 0);r.showLoaderOnConfirm&&mf(),r.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>gy(r.preConfirm(t,r.validationMessage))).then(i=>{Mo(lS())||i===!1?(e.hideLoading(),by(e)):qM(e,typeof i>"u"?t:i)}).catch(i=>yG(e||void 0,i))):qM(e,t)};function pb(){const e=Zr.innerParams.get(this);if(!e)return;const t=Zr.domCache.get(this);Qi(t.loader),uS()?e.icon&&Ci(Kf()):Pue(t),es([t.popup,t.actions],se.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const Pue=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?Ci(t[0],"inline-block"):ade()&&Qi(e.actions)};function vG(){const e=Zr.innerParams.get(this),t=Zr.domCache.get(this);return t?hS(t.popup,e.input):null}function EG(e,t,r){const n=Zr.domCache.get(e);t.forEach(i=>{n[i].disabled=r})}function _G(e,t){const r=br();if(!(!r||!e))if(e.type==="radio"){const n=r.querySelectorAll(`[name="${se.radio}"]`);for(let i=0;i<n.length;i++)n[i].disabled=t}else e.disabled=t}function bG(){EG(this,["confirmButton","denyButton","cancelButton"],!1)}function wG(){EG(this,["confirmButton","denyButton","cancelButton"],!0)}function SG(){_G(this.getInput(),!1)}function TG(){_G(this.getInput(),!0)}function CG(e){const t=Zr.domCache.get(this),r=Zr.innerParams.get(this);_a(t.validationMessage,e),t.validationMessage.className=se["validation-message"],r.customClass&&r.customClass.validationMessage&&lr(t.validationMessage,r.customClass.validationMessage),Ci(t.validationMessage);const n=this.getInput();n&&(n.setAttribute("aria-invalid","true"),n.setAttribute("aria-describedby",se["validation-message"]),QW(n),lr(n,se.inputerror))}function RG(){const e=Zr.domCache.get(this);e.validationMessage&&Qi(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),es(t,se.inputerror))}const zp={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Due=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Lue={allowEnterKey:void 0},Mue=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],IG=e=>Object.prototype.hasOwnProperty.call(zp,e),xG=e=>Due.indexOf(e)!==-1,AG=e=>Lue[e],jue=e=>{IG(e)||Vo(`Unknown parameter "${e}"`)},Uue=e=>{Mue.includes(e)&&Vo(`The parameter "${e}" is incompatible with toasts`)},Fue=e=>{const t=AG(e);t&&qW(e,t)},Vue=e=>{e.backdrop===!1&&e.allowOutsideClick&&Vo('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)jue(t),e.toast&&Uue(t),Fue(t)};function NG(e){const t=br(),r=Zr.innerParams.get(this);if(!t||rl(t,r.hideClass.popup)){Vo("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const n=Bue(e),i=Object.assign({},r,n);sG(this,i),Zr.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const Bue=e=>{const t={};return Object.keys(e).forEach(r=>{xG(r)?t[r]=e[r]:Vo(`Invalid parameter to update: ${r}`)}),t};function OG(){const e=Zr.domCache.get(this),t=Zr.innerParams.get(this);if(!t){kG(this);return}e.popup&&yt.swalCloseEventFinishedCallback&&(yt.swalCloseEventFinishedCallback(),delete yt.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),yt.eventEmitter.emit("didDestroy"),$ue(this)}const $ue=e=>{kG(e),delete e.params,delete yt.keydownHandler,delete yt.keydownTarget,delete yt.currentInstance},kG=e=>{e.isAwaitingPromise?(pC(Zr,e),e.isAwaitingPromise=!0):(pC(ff,e),pC(Zr,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},pC=(e,t)=>{for(const r in e)e[r].delete(t)};var Hue=Object.freeze({__proto__:null,_destroy:OG,close:ed,closeModal:ed,closePopup:ed,closeToast:ed,disableButtons:wG,disableInput:TG,disableLoading:pb,enableButtons:bG,enableInput:SG,getInput:vG,handleAwaitingPromise:by,hideLoading:pb,rejectPromise:fG,resetValidationMessage:RG,showValidationMessage:CG,update:NG});const Wue=(e,t,r)=>{e.toast?Gue(e,t,r):(Kue(t),que(t),Yue(e,t,r))},Gue=(e,t,r)=>{t.popup.onclick=()=>{e&&(zue(e)||e.timer||e.input)||r(Xf.close)}},zue=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let fb=!1;const Kue=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(fb=!0)}}},que=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(r){e.popup.onmouseup=()=>{},(r.target===e.popup||r.target instanceof HTMLElement&&e.popup.contains(r.target))&&(fb=!0)}}},Yue=(e,t,r)=>{t.container.onclick=n=>{if(fb){fb=!1;return}n.target===t.container&&cS(e.allowOutsideClick)&&r(Xf.backdrop)}},Xue=e=>typeof e=="object"&&e.jquery,YM=e=>e instanceof Element||Xue(e),Jue=e=>{const t={};return typeof e[0]=="object"&&!YM(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((r,n)=>{const i=e[n];typeof i=="string"||YM(i)?t[r]=i:i!==void 0&&mh(`Unexpected type of ${r}! Expected "string" or "Element", got ${typeof i}`)}),t};function Que(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new this(...t)}function Zue(e){class t extends this{_main(n,i){return super._main(n,Object.assign({},e,i))}}return t}const ehe=()=>yt.timeout&&yt.timeout.getTimerLeft(),PG=()=>{if(yt.timeout)return sde(),yt.timeout.stop()},DG=()=>{if(yt.timeout){const e=yt.timeout.start();return Vk(e),e}},the=()=>{const e=yt.timeout;return e&&(e.running?PG():DG())},rhe=e=>{if(yt.timeout){const t=yt.timeout.increase(e);return Vk(t,!0),t}},nhe=()=>!!(yt.timeout&&yt.timeout.isRunning());let XM=!1;const IA={};function ihe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";IA[e]=this,XM||(document.body.addEventListener("click",ohe),XM=!0)}const ohe=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const r in IA){const n=t.getAttribute(r);if(n){IA[r].fire({template:n});return}}};class ahe{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,r){const n=this._getHandlersByEventName(t);n.includes(r)||n.push(r)}once(t,r){var n=this;const i=function(){n.removeListener(t,i);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];r.apply(n,a)};this.on(t,i)}emit(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this._getHandlersByEventName(t).forEach(o=>{try{o.apply(this,n)}catch(a){console.error(a)}})}removeListener(t,r){const n=this._getHandlersByEventName(t),i=n.indexOf(r);i>-1&&n.splice(i,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}yt.eventEmitter=new ahe;const she=(e,t)=>{yt.eventEmitter.on(e,t)},che=(e,t)=>{yt.eventEmitter.once(e,t)},lhe=(e,t)=>{if(!e){yt.eventEmitter.reset();return}t?yt.eventEmitter.removeListener(e,t):yt.eventEmitter.removeAllListeners(e)};var dhe=Object.freeze({__proto__:null,argsToParams:Jue,bindClickHandler:ihe,clickCancel:Xde,clickConfirm:cG,clickDeny:Yde,enableLoading:mf,fire:Que,getActions:vy,getCancelButton:qf,getCloseButton:Mk,getConfirmButton:yc,getContainer:Bo,getDenyButton:gh,getFocusableElements:jk,getFooter:JW,getHtmlContainer:Dk,getIcon:Kf,getIconContent:tde,getImage:XW,getInputLabel:rde,getLoader:Yf,getPopup:br,getProgressSteps:Lk,getTimerLeft:ehe,getTimerProgressBar:dS,getTitle:YW,getValidationMessage:lS,increaseTimer:rhe,isDeprecatedParameter:AG,isLoading:ide,isTimerRunning:nhe,isUpdatableParameter:xG,isValidParameter:IG,isVisible:qde,mixin:Zue,off:lhe,on:she,once:che,resumeTimer:DG,showLoading:mf,stopTimer:PG,toggleTimer:the});class uhe{constructor(t,r){this.callback=t,this.remaining=r,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const r=this.running;return r&&this.stop(),this.remaining+=t,r&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const LG=["swal-title","swal-html","swal-footer"],hhe=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const r=t.content;return _he(r),Object.assign(phe(r),fhe(r),mhe(r),ghe(r),yhe(r),vhe(r),Ehe(r,LG))},phe=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(n=>{Xu(n,["name","value"]);const i=n.getAttribute("name"),o=n.getAttribute("value");!i||!o||(typeof zp[i]=="boolean"?t[i]=o!=="false":typeof zp[i]=="object"?t[i]=JSON.parse(o):t[i]=o)}),t},fhe=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(n=>{const i=n.getAttribute("name"),o=n.getAttribute("value");!i||!o||(t[i]=new Function(`return ${o}`)())}),t},mhe=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(n=>{Xu(n,["type","color","aria-label"]);const i=n.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(t[`${i}ButtonText`]=n.innerHTML,t[`show${Ok(i)}Button`]=!0,n.hasAttribute("color")&&(t[`${i}ButtonColor`]=n.getAttribute("color")),n.hasAttribute("aria-label")&&(t[`${i}ButtonAriaLabel`]=n.getAttribute("aria-label")))}),t},ghe=e=>{const t={},r=e.querySelector("swal-image");return r&&(Xu(r,["src","width","height","alt"]),r.hasAttribute("src")&&(t.imageUrl=r.getAttribute("src")||void 0),r.hasAttribute("width")&&(t.imageWidth=r.getAttribute("width")||void 0),r.hasAttribute("height")&&(t.imageHeight=r.getAttribute("height")||void 0),r.hasAttribute("alt")&&(t.imageAlt=r.getAttribute("alt")||void 0)),t},yhe=e=>{const t={},r=e.querySelector("swal-icon");return r&&(Xu(r,["type","color"]),r.hasAttribute("type")&&(t.icon=r.getAttribute("type")),r.hasAttribute("color")&&(t.iconColor=r.getAttribute("color")),t.iconHtml=r.innerHTML),t},vhe=e=>{const t={},r=e.querySelector("swal-input");r&&(Xu(r,["type","label","placeholder","value"]),t.input=r.getAttribute("type")||"text",r.hasAttribute("label")&&(t.inputLabel=r.getAttribute("label")),r.hasAttribute("placeholder")&&(t.inputPlaceholder=r.getAttribute("placeholder")),r.hasAttribute("value")&&(t.inputValue=r.getAttribute("value")));const n=Array.from(e.querySelectorAll("swal-input-option"));return n.length&&(t.inputOptions={},n.forEach(i=>{Xu(i,["value"]);const o=i.getAttribute("value");if(!o)return;const a=i.innerHTML;t.inputOptions[o]=a})),t},Ehe=(e,t)=>{const r={};for(const n in t){const i=t[n],o=e.querySelector(i);o&&(Xu(o,[]),r[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return r},_he=e=>{const t=LG.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(r=>{const n=r.tagName.toLowerCase();t.includes(n)||Vo(`Unrecognized element <${n}>`)})},Xu=(e,t)=>{Array.from(e.attributes).forEach(r=>{t.indexOf(r.name)===-1&&Vo([`Unrecognized attribute "${r.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},MG=10,bhe=e=>{const t=Bo(),r=br();typeof e.willOpen=="function"&&e.willOpen(r),yt.eventEmitter.emit("willOpen",r);const i=window.getComputedStyle(document.body).overflowY;The(t,r,e),setTimeout(()=>{whe(t,r)},MG),Uk()&&(She(t,e.scrollbarPadding,i),iue()),!uS()&&!yt.previousActiveElement&&(yt.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(r)),yt.eventEmitter.emit("didOpen",r),es(t,se["no-transition"])},mb=e=>{const t=br();if(e.target!==t)return;const r=Bo();t.removeEventListener("animationend",mb),t.removeEventListener("transitionend",mb),r.style.overflowY="auto"},whe=(e,t)=>{eG(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",mb),t.addEventListener("transitionend",mb)):e.style.overflowY="auto"},She=(e,t,r)=>{oue(),t&&r!=="hidden"&&hue(r),setTimeout(()=>{e.scrollTop=0})},The=(e,t,r)=>{lr(e,r.showClass.backdrop),r.animation?(t.style.setProperty("opacity","0","important"),Ci(t,"grid"),setTimeout(()=>{lr(t,r.showClass.popup),t.style.removeProperty("opacity")},MG)):Ci(t,"grid"),lr([document.documentElement,document.body],se.shown),r.heightAuto&&r.backdrop&&!r.toast&&lr([document.documentElement,document.body],se["height-auto"])};var JM={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function Che(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=JM.email),e.input==="url"&&(e.inputValidator=JM.url))}function Rhe(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(Vo('Target parameter is not valid, defaulting to "body"'),e.target="body")}function Ihe(e){Che(e),e.showLoaderOnConfirm&&!e.preConfirm&&Vo(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Rhe(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),mde(e)}let nc;var Iv=new WeakMap;class Kn{constructor(){if(Kle(this,Iv,void 0),typeof window>"u")return;nc=this;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const i=Object.freeze(this.constructor.argsToParams(r));this.params=i,this.isAwaitingPromise=!1,qle(Iv,this,this._main(nc.params))}_main(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Vue(Object.assign({},r,t)),yt.currentInstance){const o=ff.swalPromiseResolve.get(yt.currentInstance),{isAwaitingPromise:a}=yt.currentInstance;yt.currentInstance._destroy(),a||o({isDismissed:!0}),Uk()&&uG()}yt.currentInstance=nc;const n=Ahe(t,r);Ihe(n),Object.freeze(n),yt.timeout&&(yt.timeout.stop(),delete yt.timeout),clearTimeout(yt.restoreFocusTimeout);const i=Nhe(nc);return sG(nc,n),Zr.innerParams.set(nc,n),xhe(nc,i,n)}then(t){return VM(Iv,this).then(t)}finally(t){return VM(Iv,this).finally(t)}}const xhe=(e,t,r)=>new Promise((n,i)=>{const o=a=>{e.close({isDismissed:!0,dismiss:a})};ff.swalPromiseResolve.set(e,n),ff.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{Aue(e)},t.denyButton.onclick=()=>{Nue(e)},t.cancelButton.onclick=()=>{Oue(e,o)},t.closeButton.onclick=()=>{o(Xf.close)},Wue(r,t,o),Jde(yt,r,o),_ue(e,r),bhe(r),Ohe(yt,r,o),khe(t,r),setTimeout(()=>{t.container.scrollTop=0})}),Ahe=(e,t)=>{const r=hhe(e),n=Object.assign({},zp,t,r,e);return n.showClass=Object.assign({},zp.showClass,n.showClass),n.hideClass=Object.assign({},zp.hideClass,n.hideClass),n.animation===!1&&(n.showClass={backdrop:"swal2-noanimation"},n.hideClass={}),n},Nhe=e=>{const t={popup:br(),container:Bo(),actions:vy(),confirmButton:yc(),denyButton:gh(),cancelButton:qf(),loader:Yf(),closeButton:Mk(),validationMessage:lS(),progressSteps:Lk()};return Zr.domCache.set(e,t),t},Ohe=(e,t,r)=>{const n=dS();Qi(n),t.timer&&(e.timeout=new uhe(()=>{r("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(Ci(n),pa(n,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&Vk(t.timer)})))},khe=(e,t)=>{if(!t.toast){if(!cS(t.allowEnterKey)){qW("allowEnterKey"),Lhe();return}Phe(e)||Dhe(e,t)||RA(-1,1)}},Phe=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const r of t)if(r instanceof HTMLElement&&Mo(r))return r.focus(),!0;return!1},Dhe=(e,t)=>t.focusDeny&&Mo(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&Mo(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&Mo(e.confirmButton)?(e.confirmButton.focus(),!0):!1,Lhe=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const r=document.createElement("audio");r.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",r.loop=!0,document.body.appendChild(r),setTimeout(()=>{r.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}Kn.prototype.disableButtons=wG;Kn.prototype.enableButtons=bG;Kn.prototype.getInput=vG;Kn.prototype.disableInput=TG;Kn.prototype.enableInput=SG;Kn.prototype.hideLoading=pb;Kn.prototype.disableLoading=pb;Kn.prototype.showValidationMessage=CG;Kn.prototype.resetValidationMessage=RG;Kn.prototype.close=ed;Kn.prototype.closePopup=ed;Kn.prototype.closeModal=ed;Kn.prototype.closeToast=ed;Kn.prototype.rejectPromise=fG;Kn.prototype.update=NG;Kn.prototype._destroy=OG;Object.assign(Kn,dhe);Object.keys(Hue).forEach(e=>{Kn[e]=function(){return nc&&nc[e]?nc[e](...arguments):null}});Kn.DismissReason=Xf;Kn.version="11.15.2";const re=Kn;re.default=re;typeof document<"u"&&function(e,t){var r=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(r),r.styleSheet)r.styleSheet.disabled||(r.styleSheet.cssText=t);else try{r.innerHTML=t}catch{r.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');const yh="https://hcompanion.onrender.com/api";async function Mhe(e){try{const t=await Ee.post(`${yh}/user/login`,e);return await sessionStorage.setItem("token",t.data.jwtToken),t.data.userData}catch(t){return console.log(`error ${JSON.stringify(t)}`),t.response.status=="400"&&re.fire({title:"Failed",icon:"error",text:"username or password is wrong"}),!1}}async function jhe(e){try{return(await Ee.post(`${yh}/user/createAccountGoogle`,e)).data.userData}catch(t){console.log(t)}}async function Uhe(e){try{return(await Ee.post(`${yh}/user/loginUsingGoogle`,e)).data.userData}catch(t){console.log(t)}}async function Fhe({email:e}){try{const t=await Ee.post(`${yh}/user/forgotPasswordOtp`,{email:e},{withCredentials:!0});return!0}catch(t){return console.log(t),!1}}async function Vhe({email:e,otp:t}){try{const r=await Ee.post(`${yh}/user/checkForgotPasswordOtp`,{email:e,otp:t},{withCredentials:!0});return console.log(r.data),!0}catch(r){return console.log(r),!1}}async function Bhe({password:e,email:t}){try{const r=await Ee.post(`${yh}/user/forgotPassword/reset`,{email:t,password:e},{withCredentials:!0});return console.log(r.data),!0}catch(r){return console.log(r),!1}}async function $he({email:e,password:t}){try{const r=await Ee.post(`${yh}/user/password/reset`,{password:t,email:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(r.data),!0}catch(r){return console.log(r),!1}}var jG={exports:{}},UG={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy=T;function Hhe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Whe=typeof Object.is=="function"?Object.is:Hhe,Ghe=wy.useSyncExternalStore,zhe=wy.useRef,Khe=wy.useEffect,qhe=wy.useMemo,Yhe=wy.useDebugValue;UG.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var o=zhe(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=qhe(function(){function c(f){if(!l){if(l=!0,d=f,f=n(f),i!==void 0&&a.hasValue){var m=a.value;if(i(m,f))return u=m}return u=f}if(m=u,Whe(d,f))return m;var g=n(f);return i!==void 0&&i(m,g)?(d=f,m):(d=f,u=g)}var l=!1,d,u,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,i]);var s=Ghe(e,o[0],o[1]);return Khe(function(){a.hasValue=!0,a.value=s},[s]),Yhe(s),s};jG.exports=UG;var Xhe=jG.exports;function Jhe(e){e()}function Qhe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Jhe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var QM={notify(){},get:()=>[]};function Zhe(e,t){let r,n=QM,i=0,o=!1;function a(g){d();const y=n.subscribe(g);let v=!1;return()=>{v||(v=!0,y(),u())}}function s(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function l(){return o}function d(){i++,r||(r=e.subscribe(c),n=Qhe())}function u(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=QM)}function p(){o||(o=!0,d())}function f(){o&&(o=!1,u())}const m={addNestedSub:a,notifyNestedSubs:s,handleChangeWrapper:c,isSubscribed:l,trySubscribe:p,tryUnsubscribe:f,getListeners:()=>n};return m}var epe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tpe=epe(),rpe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",npe=rpe(),ipe=()=>tpe||npe?T.useLayoutEffect:T.useEffect,ope=ipe(),fC=Symbol.for("react-redux-context"),mC=typeof globalThis<"u"?globalThis:{};function ape(){if(!T.createContext)return{};const e=mC[fC]??(mC[fC]=new Map);let t=e.get(T.createContext);return t||(t=T.createContext(null),e.set(T.createContext,t)),t}var Rd=ape();function spe(e){const{children:t,context:r,serverState:n,store:i}=e,o=T.useMemo(()=>{const c=Zhe(i);return{store:i,subscription:c,getServerState:n?()=>n:void 0}},[i,n]),a=T.useMemo(()=>i.getState(),[i]);ope(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const s=r||Rd;return T.createElement(s.Provider,{value:o},t)}var cpe=spe;function zk(e=Rd){return function(){return T.useContext(e)}}var FG=zk();function VG(e=Rd){const t=e===Rd?FG:zk(e),r=()=>{const{store:n}=t();return n};return Object.assign(r,{withTypes:()=>r}),r}var lpe=VG();function dpe(e=Rd){const t=e===Rd?lpe:VG(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var vh=dpe(),upe=(e,t)=>e===t;function hpe(e=Rd){const t=e===Rd?FG:zk(e),r=(n,i={})=>{const{equalityFn:o=upe}=typeof i=="function"?{equalityFn:i}:i,a=t(),{store:s,subscription:c,getServerState:l}=a;T.useRef(!0);const d=T.useCallback({[n.name](p){return n(p)}}[n.name],[n]),u=Xhe.useSyncExternalStoreWithSelector(c.addNestedSub,s.getState,l||s.getState,d,o);return T.useDebugValue(u),u};return Object.assign(r,{withTypes:()=>r}),r}var Ti=hpe();function Ni(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ppe=typeof Symbol=="function"&&Symbol.observable||"@@observable",ZM=ppe,gC=()=>Math.random().toString(36).substring(7).split("").join("."),fpe={INIT:`@@redux/INIT${gC()}`,REPLACE:`@@redux/REPLACE${gC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${gC()}`},gb=fpe;function Kk(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function BG(e,t,r){if(typeof e!="function")throw new Error(Ni(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ni(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ni(1));return r(BG)(e,t)}let n=e,i=t,o=new Map,a=o,s=0,c=!1;function l(){a===o&&(a=new Map,o.forEach((y,v)=>{a.set(v,y)}))}function d(){if(c)throw new Error(Ni(3));return i}function u(y){if(typeof y!="function")throw new Error(Ni(4));if(c)throw new Error(Ni(5));let v=!0;l();const E=s++;return a.set(E,y),function(){if(v){if(c)throw new Error(Ni(6));v=!1,l(),a.delete(E),o=null}}}function p(y){if(!Kk(y))throw new Error(Ni(7));if(typeof y.type>"u")throw new Error(Ni(8));if(typeof y.type!="string")throw new Error(Ni(17));if(c)throw new Error(Ni(9));try{c=!0,i=n(i,y)}finally{c=!1}return(o=a).forEach(E=>{E()}),y}function f(y){if(typeof y!="function")throw new Error(Ni(10));n=y,p({type:gb.REPLACE})}function m(){const y=u;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Ni(11));function E(){const S=v;S.next&&S.next(d())}return E(),{unsubscribe:y(E)}},[ZM](){return this}}}return p({type:gb.INIT}),{dispatch:p,subscribe:u,getState:d,replaceReducer:f,[ZM]:m}}function mpe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:gb.INIT})>"u")throw new Error(Ni(12));if(typeof r(void 0,{type:gb.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ni(13))})}function gpe(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const a=t[o];typeof e[a]=="function"&&(r[a]=e[a])}const n=Object.keys(r);let i;try{mpe(r)}catch(o){i=o}return function(a={},s){if(i)throw i;let c=!1;const l={};for(let d=0;d<n.length;d++){const u=n[d],p=r[u],f=a[u],m=p(f,s);if(typeof m>"u")throw s&&s.type,new Error(Ni(14));l[u]=m,c=c||m!==f}return c=c||n.length!==Object.keys(a).length,c?l:a}}function yb(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function ype(...e){return t=>(r,n)=>{const i=t(r,n);let o=()=>{throw new Error(Ni(15))};const a={getState:i.getState,dispatch:(c,...l)=>o(c,...l)},s=e.map(c=>c(a));return o=yb(...s)(i.dispatch),{...i,dispatch:o}}}function vpe(e){return Kk(e)&&"type"in e&&typeof e.type=="string"}var $G=Symbol.for("immer-nothing"),ej=Symbol.for("immer-draftable"),fa=Symbol.for("immer-state");function Rs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var gf=Object.getPrototypeOf;function Ju(e){return!!e&&!!e[fa]}function dl(e){var t;return e?HG(e)||Array.isArray(e)||!!e[ej]||!!((t=e.constructor)!=null&&t[ej])||fS(e)||mS(e):!1}var Epe=Object.prototype.constructor.toString();function HG(e){if(!e||typeof e!="object")return!1;const t=gf(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Epe}function vb(e,t){pS(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function pS(e){const t=e[fa];return t?t.type_:Array.isArray(e)?1:fS(e)?2:mS(e)?3:0}function xA(e,t){return pS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function WG(e,t,r){const n=pS(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function _pe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function fS(e){return e instanceof Map}function mS(e){return e instanceof Set}function ou(e){return e.copy_||e.base_}function AA(e,t){if(fS(e))return new Map(e);if(mS(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=HG(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[fa];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const a=i[o],s=n[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(gf(e),n)}else{const n=gf(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function qk(e,t=!1){return gS(e)||Ju(e)||!dl(e)||(pS(e)>1&&(e.set=e.add=e.clear=e.delete=bpe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>qk(n,!0))),e}function bpe(){Rs(2)}function gS(e){return Object.isFrozen(e)}var wpe={};function Qu(e){const t=wpe[e];return t||Rs(0,e),t}var C0;function GG(){return C0}function Spe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function tj(e,t){t&&(Qu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function NA(e){OA(e),e.drafts_.forEach(Tpe),e.drafts_=null}function OA(e){e===C0&&(C0=e.parent_)}function rj(e){return C0=Spe(C0,e)}function Tpe(e){const t=e[fa];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function nj(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[fa].modified_&&(NA(t),Rs(4)),dl(e)&&(e=Eb(t,e),t.parent_||_b(t,e)),t.patches_&&Qu("Patches").generateReplacementPatches_(r[fa].base_,e,t.patches_,t.inversePatches_)):e=Eb(t,r,[]),NA(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==$G?e:void 0}function Eb(e,t,r){if(gS(t))return t;const n=t[fa];if(!n)return vb(t,(i,o)=>ij(e,n,t,i,o,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return _b(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),vb(o,(s,c)=>ij(e,n,i,s,c,r,a)),_b(e,i,!1),r&&e.patches_&&Qu("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function ij(e,t,r,n,i,o,a){if(Ju(i)){const s=o&&t&&t.type_!==3&&!xA(t.assigned_,n)?o.concat(n):void 0,c=Eb(e,i,s);if(WG(r,n,c),Ju(c))e.canAutoFreeze_=!1;else return}else a&&r.add(i);if(dl(i)&&!gS(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Eb(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&_b(e,i)}}function _b(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&qk(t,r)}function Cpe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:GG(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=Yk;r&&(i=[n],o=R0);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return n.draft_=s,n.revoke_=a,s}var Yk={get(e,t){if(t===fa)return e;const r=ou(e);if(!xA(r,t))return Rpe(e,r,t);const n=r[t];return e.finalized_||!dl(n)?n:n===yC(e.base_,t)?(vC(e),e.copy_[t]=PA(n,e)):n},has(e,t){return t in ou(e)},ownKeys(e){return Reflect.ownKeys(ou(e))},set(e,t,r){const n=zG(ou(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=yC(ou(e),t),o=i==null?void 0:i[fa];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(_pe(r,i)&&(r!==void 0||xA(e.base_,t)))return!0;vC(e),kA(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return yC(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,vC(e),kA(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ou(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Rs(11)},getPrototypeOf(e){return gf(e.base_)},setPrototypeOf(){Rs(12)}},R0={};vb(Yk,(e,t)=>{R0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});R0.deleteProperty=function(e,t){return R0.set.call(this,e,t,void 0)};R0.set=function(e,t,r){return Yk.set.call(this,e[0],t,r,e[0])};function yC(e,t){const r=e[fa];return(r?ou(r):e)[t]}function Rpe(e,t,r){var i;const n=zG(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function zG(e,t){if(!(t in e))return;let r=gf(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=gf(r)}}function kA(e){e.modified_||(e.modified_=!0,e.parent_&&kA(e.parent_))}function vC(e){e.copy_||(e.copy_=AA(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ipe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const a=this;return function(c=o,...l){return a.produce(c,d=>r.call(this,d,...l))}}typeof r!="function"&&Rs(6),n!==void 0&&typeof n!="function"&&Rs(7);let i;if(dl(t)){const o=rj(this),a=PA(t,void 0);let s=!0;try{i=r(a),s=!1}finally{s?NA(o):OA(o)}return tj(o,n),nj(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===$G&&(i=void 0),this.autoFreeze_&&qk(i,!0),n){const o=[],a=[];Qu("Patches").generateReplacementPatches_(t,i,o,a),n(o,a)}return i}else Rs(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...s)=>this.produceWithPatches(a,c=>t(c,...s));let n,i;return[this.produce(t,r,(a,s)=>{n=a,i=s}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){dl(e)||Rs(8),Ju(e)&&(e=xpe(e));const t=rj(this),r=PA(e,void 0);return r[fa].isManual_=!0,OA(t),r}finishDraft(e,t){const r=e&&e[fa];(!r||!r.isManual_)&&Rs(9);const{scope_:n}=r;return tj(n,t),nj(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Qu("Patches").applyPatches_;return Ju(e)?n(e,t):this.produce(e,i=>n(i,t))}};function PA(e,t){const r=fS(e)?Qu("MapSet").proxyMap_(e,t):mS(e)?Qu("MapSet").proxySet_(e,t):Cpe(e,t);return(t?t.scope_:GG()).drafts_.push(r),r}function xpe(e){return Ju(e)||Rs(10,e),KG(e)}function KG(e){if(!dl(e)||gS(e))return e;const t=e[fa];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=AA(e,t.scope_.immer_.useStrictShallowCopy_)}else r=AA(e,!0);return vb(r,(n,i)=>{WG(r,n,KG(i))}),t&&(t.finalized_=!1),r}var ma=new Ipe,qG=ma.produce;ma.produceWithPatches.bind(ma);ma.setAutoFreeze.bind(ma);ma.setUseStrictShallowCopy.bind(ma);ma.applyPatches.bind(ma);ma.createDraft.bind(ma);ma.finishDraft.bind(ma);function YG(e){return({dispatch:r,getState:n})=>i=>o=>typeof o=="function"?o(r,n,e):i(o)}var Ape=YG(),Npe=YG,Ope=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?yb:yb.apply(null,arguments)};function oj(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(nl(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>vpe(n)&&n.type===e,r}var XG=class lg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,lg.prototype)}static get[Symbol.species](){return lg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new lg(...t[0].concat(this)):new lg(...t.concat(this))}};function aj(e){return dl(e)?qG(e,()=>{}):e}function sj(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function kpe(e){return typeof e=="boolean"}var Ppe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let a=new XG;return r&&(kpe(r)?a.push(Ape):a.push(Npe(r.extraArgument))),a},Dpe="RTK_autoBatch",cj=e=>t=>{setTimeout(t,e)},Lpe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,o=!1,a=!1;const s=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:cj(10):e.type==="callback"?e.queueNotification:cj(e.timeout),l=()=>{a=!1,o&&(o=!1,s.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const u=()=>i&&d(),p=n.subscribe(u);return s.add(d),()=>{p(),s.delete(d)}},dispatch(d){var u;try{return i=!((u=d==null?void 0:d.meta)!=null&&u[Dpe]),o=!i,o&&(a||(a=!0,c(l))),n.dispatch(d)}finally{i=!0}}})},Mpe=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new XG(e);return n&&i.push(Lpe(typeof n=="object"?n:void 0)),i};function jpe(e){const t=Ppe(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:a=void 0}=e||{};let s;if(typeof r=="function")s=r;else if(Kk(r))s=gpe(r);else throw new Error(nl(1));let c;typeof n=="function"?c=n(t):c=t();let l=yb;i&&(l=Ope({trace:!1,...typeof i=="object"&&i}));const d=ype(...c),u=Mpe(d);let p=typeof a=="function"?a(u):u();const f=l(...p);return BG(s,o,f)}function JG(e){const t={},r=[];let n;const i={addCase(o,a){const s=typeof o=="string"?o:o.type;if(!s)throw new Error(nl(28));if(s in t)throw new Error(nl(29));return t[s]=a,i},addMatcher(o,a){return r.push({matcher:o,reducer:a}),i},addDefaultCase(o){return n=o,i}};return e(i),[t,r,n]}function Upe(e){return typeof e=="function"}function Fpe(e,t){let[r,n,i]=JG(t),o;if(Upe(e))o=()=>aj(e());else{const s=aj(e);o=()=>s}function a(s=o(),c){let l=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return l.filter(d=>!!d).length===0&&(l=[i]),l.reduce((d,u)=>{if(u)if(Ju(d)){const f=u(d,c);return f===void 0?d:f}else{if(dl(d))return qG(d,p=>u(p,c));{const p=u(d,c);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},s)}return a.getInitialState=o,a}var Vpe=Symbol.for("rtk-slice-createasyncthunk");function Bpe(e,t){return`${e}/${t}`}function $pe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Vpe];return function(i){const{name:o,reducerPath:a=o}=i;if(!o)throw new Error(nl(11));typeof process<"u";const s=(typeof i.reducers=="function"?i.reducers(Wpe()):i.reducers)||{},c=Object.keys(s),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,S){const x=typeof w=="string"?w:w.type;if(!x)throw new Error(nl(12));if(x in l.sliceCaseReducersByType)throw new Error(nl(13));return l.sliceCaseReducersByType[x]=S,d},addMatcher(w,S){return l.sliceMatchers.push({matcher:w,reducer:S}),d},exposeAction(w,S){return l.actionCreators[w]=S,d},exposeCaseReducer(w,S){return l.sliceCaseReducersByName[w]=S,d}};c.forEach(w=>{const S=s[w],x={reducerName:w,type:Bpe(o,w),createNotation:typeof i.reducers=="function"};zpe(S)?qpe(x,S,d,t):Gpe(x,S,d)});function u(){const[w={},S=[],x=void 0]=typeof i.extraReducers=="function"?JG(i.extraReducers):[i.extraReducers],O={...w,...l.sliceCaseReducersByType};return Fpe(i.initialState,L=>{for(let j in O)L.addCase(j,O[j]);for(let j of l.sliceMatchers)L.addMatcher(j.matcher,j.reducer);for(let j of S)L.addMatcher(j.matcher,j.reducer);x&&L.addDefaultCase(x)})}const p=w=>w,f=new Map;let m;function g(w,S){return m||(m=u()),m(w,S)}function y(){return m||(m=u()),m.getInitialState()}function v(w,S=!1){function x(L){let j=L[w];return typeof j>"u"&&S&&(j=y()),j}function O(L=p){const j=sj(f,S,()=>new WeakMap);return sj(j,L,()=>{const W={};for(const[V,Y]of Object.entries(i.selectors??{}))W[V]=Hpe(Y,L,y,S);return W})}return{reducerPath:w,getSelectors:O,get selectors(){return O(x)},selectSlice:x}}const E={name:o,reducer:g,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:y,...v(a),injectInto(w,{reducerPath:S,...x}={}){const O=S??a;return w.inject({reducerPath:O,reducer:g},x),{...E,...v(O,!0)}}};return E}}function Hpe(e,t,r,n){function i(o,...a){let s=t(o);return typeof s>"u"&&n&&(s=r()),e(s,...a)}return i.unwrapped=e,i}var Jf=$pe();function Wpe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Gpe({type:e,reducerName:t,createNotation:r},n,i){let o,a;if("reducer"in n){if(r&&!Kpe(n))throw new Error(nl(17));o=n.reducer,a=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,a?oj(e,a):oj(e))}function zpe(e){return e._reducerDefinitionType==="asyncThunk"}function Kpe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function qpe({type:e,reducerName:t},r,n,i){if(!i)throw new Error(nl(18));const{payloadCreator:o,fulfilled:a,pending:s,rejected:c,settled:l,options:d}=r,u=i(e,o,d);n.exposeAction(t,u),a&&n.addCase(u.fulfilled,a),s&&n.addCase(u.pending,s),c&&n.addCase(u.rejected,c),l&&n.addMatcher(u.settled,l),n.exposeCaseReducer(t,{fulfilled:a||xv,pending:s||xv,rejected:c||xv,settled:l||xv})}function xv(){}function nl(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Ype={username:"",email:"",role:"",isLoggedIn:!1},QG=Jf({name:"user",initialState:Ype,reducers:{setUser(e,t){e.username=t.payload.username,e.email=t.payload.email,e.role=t.payload.role,e.isLoggedIn=t.payload.role}}}),{setUser:po}=QG.actions,Xpe=QG.reducer;var DA={exports:{}},Zu={},ZG={exports:{}},Jpe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Qpe=Jpe,Zpe=Qpe;function ez(){}function tz(){}tz.resetWarningCache=ez;var efe=function(){function e(n,i,o,a,s,c){if(c!==Zpe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:tz,resetWarningCache:ez};return r.PropTypes=r,r};ZG.exports=efe();var rz=ZG.exports,LA={exports:{}},Ls={},MA={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var r="none",n="contents",i=/^(input|select|textarea|button|object|iframe)$/;function o(u,p){return p.getPropertyValue("overflow")!=="visible"||u.scrollWidth<=0&&u.scrollHeight<=0}function a(u){var p=u.offsetWidth<=0&&u.offsetHeight<=0;if(p&&!u.innerHTML)return!0;try{var f=window.getComputedStyle(u),m=f.getPropertyValue("display");return p?m!==n&&o(u,f):m===r}catch{return console.warn("Failed to inspect element style"),!1}}function s(u){for(var p=u,f=u.getRootNode&&u.getRootNode();p&&p!==document.body;){if(f&&p===f&&(p=f.host.parentNode),a(p))return!1;p=p.parentNode}return!0}function c(u,p){var f=u.nodeName.toLowerCase(),m=i.test(f)&&!u.disabled||f==="a"&&u.href||p;return m&&s(u)}function l(u){var p=u.getAttribute("tabindex");p===null&&(p=void 0);var f=isNaN(p);return(f||p>=0)&&c(u,!f)}function d(u){var p=[].slice.call(u.querySelectorAll("*"),0).reduce(function(f,m){return f.concat(m.shadowRoot?d(m.shadowRoot):[m])},[]);return p.filter(l)}e.exports=t.default})(MA,MA.exports);var nz=MA.exports;Object.defineProperty(Ls,"__esModule",{value:!0});Ls.resetState=ife;Ls.log=ofe;Ls.handleBlur=I0;Ls.handleFocus=x0;Ls.markForFocusLater=afe;Ls.returnFocus=sfe;Ls.popWithoutFocus=cfe;Ls.setupScopedFocus=lfe;Ls.teardownScopedFocus=dfe;var tfe=nz,rfe=nfe(tfe);function nfe(e){return e&&e.__esModule?e:{default:e}}var yf=[],Sp=null,jA=!1;function ife(){yf=[]}function ofe(){}function I0(){jA=!0}function x0(){if(jA){if(jA=!1,!Sp)return;setTimeout(function(){if(!Sp.contains(document.activeElement)){var e=(0,rfe.default)(Sp)[0]||Sp;e.focus()}},0)}}function afe(){yf.push(document.activeElement)}function sfe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=null;try{yf.length!==0&&(t=yf.pop(),t.focus({preventScroll:e}));return}catch{console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}}function cfe(){yf.length>0&&yf.pop()}function lfe(e){Sp=e,window.addEventListener?(window.addEventListener("blur",I0,!1),document.addEventListener("focus",x0,!0)):(window.attachEvent("onBlur",I0),document.attachEvent("onFocus",x0))}function dfe(){Sp=null,window.addEventListener?(window.removeEventListener("blur",I0),document.removeEventListener("focus",x0)):(window.detachEvent("onBlur",I0),document.detachEvent("onFocus",x0))}var UA={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=nz,n=i(r);function i(s){return s&&s.__esModule?s:{default:s}}function o(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return s.activeElement.shadowRoot?o(s.activeElement.shadowRoot):s.activeElement}function a(s,c){var l=(0,n.default)(s);if(!l.length){c.preventDefault();return}var d=void 0,u=c.shiftKey,p=l[0],f=l[l.length-1],m=o();if(s===m){if(!u)return;d=f}if(f===m&&!u&&(d=p),p===m&&u&&(d=f),d){c.preventDefault(),d.focus();return}var g=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),y=g!=null&&g[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(y){var v=l.indexOf(m);if(v>-1&&(v+=u?-1:1),d=l[v],typeof d>"u"){c.preventDefault(),d=u?f:p,d.focus();return}c.preventDefault(),d.focus()}}e.exports=t.default})(UA,UA.exports);var ufe=UA.exports,Ms={},hfe=function(){},pfe=hfe,Os={},iz={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(e){(function(){var t=!!(typeof window<"u"&&window.document&&window.document.createElement),r={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen};e.exports?e.exports=r:window.ExecutionEnvironment=r})()})(iz);var ffe=iz.exports;Object.defineProperty(Os,"__esModule",{value:!0});Os.canUseDOM=Os.SafeNodeList=Os.SafeHTMLCollection=void 0;var mfe=ffe,gfe=yfe(mfe);function yfe(e){return e&&e.__esModule?e:{default:e}}var yS=gfe.default,vfe=yS.canUseDOM?window.HTMLElement:{};Os.SafeHTMLCollection=yS.canUseDOM?window.HTMLCollection:{};Os.SafeNodeList=yS.canUseDOM?window.NodeList:{};Os.canUseDOM=yS.canUseDOM;Os.default=vfe;Object.defineProperty(Ms,"__esModule",{value:!0});Ms.resetState=Sfe;Ms.log=Tfe;Ms.assertNodeList=oz;Ms.setElement=Cfe;Ms.validateElement=Xk;Ms.hide=Rfe;Ms.show=Ife;Ms.documentNotReadyOrSSRTesting=xfe;var Efe=pfe,_fe=wfe(Efe),bfe=Os;function wfe(e){return e&&e.__esModule?e:{default:e}}var $a=null;function Sfe(){$a&&($a.removeAttribute?$a.removeAttribute("aria-hidden"):$a.length!=null?$a.forEach(function(e){return e.removeAttribute("aria-hidden")}):document.querySelectorAll($a).forEach(function(e){return e.removeAttribute("aria-hidden")})),$a=null}function Tfe(){}function oz(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function Cfe(e){var t=e;if(typeof t=="string"&&bfe.canUseDOM){var r=document.querySelectorAll(t);oz(r,t),t=r}return $a=t||$a,$a}function Xk(e){var t=e||$a;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,_fe.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function Rfe(e){var t=!0,r=!1,n=void 0;try{for(var i=Xk(e)[Symbol.iterator](),o;!(t=(o=i.next()).done);t=!0){var a=o.value;a.setAttribute("aria-hidden","true")}}catch(s){r=!0,n=s}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}function Ife(e){var t=!0,r=!1,n=void 0;try{for(var i=Xk(e)[Symbol.iterator](),o;!(t=(o=i.next()).done);t=!0){var a=o.value;a.removeAttribute("aria-hidden")}}catch(s){r=!0,n=s}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}function xfe(){$a=null}var Qf={};Object.defineProperty(Qf,"__esModule",{value:!0});Qf.resetState=Afe;Qf.log=Nfe;var Mg={},jg={};function lj(e,t){e.classList.remove(t)}function Afe(){var e=document.getElementsByTagName("html")[0];for(var t in Mg)lj(e,Mg[t]);var r=document.body;for(var n in jg)lj(r,jg[n]);Mg={},jg={}}function Nfe(){}var Ofe=function(t,r){return t[r]||(t[r]=0),t[r]+=1,r},kfe=function(t,r){return t[r]&&(t[r]-=1),r},Pfe=function(t,r,n){n.forEach(function(i){Ofe(r,i),t.add(i)})},Dfe=function(t,r,n){n.forEach(function(i){kfe(r,i),r[i]===0&&t.remove(i)})};Qf.add=function(t,r){return Pfe(t.classList,t.nodeName.toLowerCase()=="html"?Mg:jg,r.split(" "))};Qf.remove=function(t,r){return Dfe(t.classList,t.nodeName.toLowerCase()=="html"?Mg:jg,r.split(" "))};var Zf={};Object.defineProperty(Zf,"__esModule",{value:!0});Zf.log=Mfe;Zf.resetState=jfe;function Lfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var az=function e(){var t=this;Lfe(this,e),this.register=function(r){t.openInstances.indexOf(r)===-1&&(t.openInstances.push(r),t.emit("register"))},this.deregister=function(r){var n=t.openInstances.indexOf(r);n!==-1&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(r){t.subscribers.push(r)},this.emit=function(r){t.subscribers.forEach(function(n){return n(r,t.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},bb=new az;function Mfe(){console.log("portalOpenInstances ----------"),console.log(bb.openInstances.length),bb.openInstances.forEach(function(e){return console.log(e)}),console.log("end portalOpenInstances ----------")}function jfe(){bb=new az}Zf.default=bb;var Jk={};Object.defineProperty(Jk,"__esModule",{value:!0});Jk.resetState=Bfe;Jk.log=$fe;var Ufe=Zf,Ffe=Vfe(Ufe);function Vfe(e){return e&&e.__esModule?e:{default:e}}var zi=void 0,bs=void 0,Mu=[];function Bfe(){for(var e=[zi,bs],t=0;t<e.length;t++){var r=e[t];r&&r.parentNode&&r.parentNode.removeChild(r)}zi=bs=null,Mu=[]}function $fe(){console.log("bodyTrap ----------"),console.log(Mu.length);for(var e=[zi,bs],t=0;t<e.length;t++){var r=e[t],n=r||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")}function dj(){Mu.length!==0&&Mu[Mu.length-1].focusContent()}function Hfe(e,t){!zi&&!bs&&(zi=document.createElement("div"),zi.setAttribute("data-react-modal-body-trap",""),zi.style.position="absolute",zi.style.opacity="0",zi.setAttribute("tabindex","0"),zi.addEventListener("focus",dj),bs=zi.cloneNode(),bs.addEventListener("focus",dj)),Mu=t,Mu.length>0?(document.body.firstChild!==zi&&document.body.insertBefore(zi,document.body.firstChild),document.body.lastChild!==bs&&document.body.appendChild(bs)):(zi.parentElement&&zi.parentElement.removeChild(zi),bs.parentElement&&bs.parentElement.removeChild(bs))}Ffe.default.subscribe(Hfe);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(H){for(var $=1;$<arguments.length;$++){var K=arguments[$];for(var A in K)Object.prototype.hasOwnProperty.call(K,A)&&(H[A]=K[A])}return H},n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},i=function(){function H($,K){for(var A=0;A<K.length;A++){var N=K[A];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty($,N.key,N)}}return function($,K,A){return K&&H($.prototype,K),A&&H($,A),$}}(),o=T,a=rz,s=x(a),c=Ls,l=S(c),d=ufe,u=x(d),p=Ms,f=S(p),m=Qf,g=S(m),y=Os,v=x(y),E=Zf,w=x(E);function S(H){if(H&&H.__esModule)return H;var $={};if(H!=null)for(var K in H)Object.prototype.hasOwnProperty.call(H,K)&&($[K]=H[K]);return $.default=H,$}function x(H){return H&&H.__esModule?H:{default:H}}function O(H,$){if(!(H instanceof $))throw new TypeError("Cannot call a class as a function")}function L(H,$){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:H}function j(H,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);H.prototype=Object.create($&&$.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(H,$):H.__proto__=$)}var W={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},V=function($){return $.code==="Tab"||$.keyCode===9},Y=function($){return $.code==="Escape"||$.keyCode===27},Z=0,te=function(H){j($,H);function $(K){O(this,$);var A=L(this,($.__proto__||Object.getPrototypeOf($)).call(this,K));return A.setOverlayRef=function(N){A.overlay=N,A.props.overlayRef&&A.props.overlayRef(N)},A.setContentRef=function(N){A.content=N,A.props.contentRef&&A.props.contentRef(N)},A.afterClose=function(){var N=A.props,F=N.appElement,P=N.ariaHideApp,_=N.htmlOpenClassName,R=N.bodyOpenClassName,k=N.parentSelector,z=k&&k().ownerDocument||document;R&&g.remove(z.body,R),_&&g.remove(z.getElementsByTagName("html")[0],_),P&&Z>0&&(Z-=1,Z===0&&f.show(F)),A.props.shouldFocusAfterRender&&(A.props.shouldReturnFocusAfterClose?(l.returnFocus(A.props.preventScroll),l.teardownScopedFocus()):l.popWithoutFocus()),A.props.onAfterClose&&A.props.onAfterClose(),w.default.deregister(A)},A.open=function(){A.beforeOpen(),A.state.afterOpen&&A.state.beforeClose?(clearTimeout(A.closeTimer),A.setState({beforeClose:!1})):(A.props.shouldFocusAfterRender&&(l.setupScopedFocus(A.node),l.markForFocusLater()),A.setState({isOpen:!0},function(){A.openAnimationFrame=requestAnimationFrame(function(){A.setState({afterOpen:!0}),A.props.isOpen&&A.props.onAfterOpen&&A.props.onAfterOpen({overlayEl:A.overlay,contentEl:A.content})})}))},A.close=function(){A.props.closeTimeoutMS>0?A.closeWithTimeout():A.closeWithoutTimeout()},A.focusContent=function(){return A.content&&!A.contentHasFocus()&&A.content.focus({preventScroll:!0})},A.closeWithTimeout=function(){var N=Date.now()+A.props.closeTimeoutMS;A.setState({beforeClose:!0,closesAt:N},function(){A.closeTimer=setTimeout(A.closeWithoutTimeout,A.state.closesAt-Date.now())})},A.closeWithoutTimeout=function(){A.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},A.afterClose)},A.handleKeyDown=function(N){V(N)&&(0,u.default)(A.content,N),A.props.shouldCloseOnEsc&&Y(N)&&(N.stopPropagation(),A.requestClose(N))},A.handleOverlayOnClick=function(N){A.shouldClose===null&&(A.shouldClose=!0),A.shouldClose&&A.props.shouldCloseOnOverlayClick&&(A.ownerHandlesClose()?A.requestClose(N):A.focusContent()),A.shouldClose=null},A.handleContentOnMouseUp=function(){A.shouldClose=!1},A.handleOverlayOnMouseDown=function(N){!A.props.shouldCloseOnOverlayClick&&N.target==A.overlay&&N.preventDefault()},A.handleContentOnClick=function(){A.shouldClose=!1},A.handleContentOnMouseDown=function(){A.shouldClose=!1},A.requestClose=function(N){return A.ownerHandlesClose()&&A.props.onRequestClose(N)},A.ownerHandlesClose=function(){return A.props.onRequestClose},A.shouldBeClosed=function(){return!A.state.isOpen&&!A.state.beforeClose},A.contentHasFocus=function(){return document.activeElement===A.content||A.content.contains(document.activeElement)},A.buildClassName=function(N,F){var P=(typeof F>"u"?"undefined":n(F))==="object"?F:{base:W[N],afterOpen:W[N]+"--after-open",beforeClose:W[N]+"--before-close"},_=P.base;return A.state.afterOpen&&(_=_+" "+P.afterOpen),A.state.beforeClose&&(_=_+" "+P.beforeClose),typeof F=="string"&&F?_+" "+F:_},A.attributesFromObject=function(N,F){return Object.keys(F).reduce(function(P,_){return P[N+"-"+_]=F[_],P},{})},A.state={afterOpen:!1,beforeClose:!1},A.shouldClose=null,A.moveFromContentToOverlay=null,A}return i($,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(A,N){this.props.isOpen&&!A.isOpen?this.open():!this.props.isOpen&&A.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!N.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var A=this.props,N=A.appElement,F=A.ariaHideApp,P=A.htmlOpenClassName,_=A.bodyOpenClassName,R=A.parentSelector,k=R&&R().ownerDocument||document;_&&g.add(k.body,_),P&&g.add(k.getElementsByTagName("html")[0],P),F&&(Z+=1,f.hide(N)),w.default.register(this)}},{key:"render",value:function(){var A=this.props,N=A.id,F=A.className,P=A.overlayClassName,_=A.defaultStyles,R=A.children,k=F?{}:_.content,z=P?{}:_.overlay;if(this.shouldBeClosed())return null;var U={ref:this.setOverlayRef,className:this.buildClassName("overlay",P),style:r({},z,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},q=r({id:N,ref:this.setContentRef,style:r({},k,this.props.style.content),className:this.buildClassName("content",F),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),oe=this.props.contentElement(q,R);return this.props.overlayElement(U,oe)}}]),$}(o.Component);te.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},te.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),parentSelector:s.default.func,bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(v.default),s.default.instanceOf(y.SafeHTMLCollection),s.default.instanceOf(y.SafeNodeList),s.default.arrayOf(s.default.instanceOf(v.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},t.default=te,e.exports=t.default})(LA,LA.exports);var Wfe=LA.exports;function sz(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function cz(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n??null}this.setState(t.bind(this))}function lz(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}sz.__suppressDeprecationWarning=!0;cz.__suppressDeprecationWarning=!0;lz.__suppressDeprecationWarning=!0;function Gfe(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,i=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?i="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),r!==null||n!==null||i!==null){var o=e.displayName||e.name,a=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+a+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=sz,t.componentWillReceiveProps=cz),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=lz;var s=t.componentDidUpdate;t.componentDidUpdate=function(l,d,u){var p=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:u;s.call(this,l,d,p)}}return e}const zfe=Object.freeze(Object.defineProperty({__proto__:null,polyfill:Gfe},Symbol.toStringTag,{value:"Module"})),Kfe=Q8(zfe);Object.defineProperty(Zu,"__esModule",{value:!0});Zu.bodyOpenClassName=Zu.portalClassName=void 0;var uj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qfe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),dz=T,wb=Sy(dz),Yfe=Lw,Sb=Sy(Yfe),Xfe=rz,Dt=Sy(Xfe),Jfe=Wfe,hj=Sy(Jfe),Qfe=Ms,Zfe=tme(Qfe),td=Os,pj=Sy(td),eme=Kfe;function tme(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function Sy(e){return e&&e.__esModule?e:{default:e}}function rme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fj(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function nme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ime=Zu.portalClassName="ReactModalPortal",ome=Zu.bodyOpenClassName="ReactModal__Body--open",au=td.canUseDOM&&Sb.default.createPortal!==void 0,mj=function(t){return document.createElement(t)},gj=function(){return au?Sb.default.createPortal:Sb.default.unstable_renderSubtreeIntoContainer};function Av(e){return e()}var Ty=function(e){nme(t,e);function t(){var r,n,i,o;rme(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return o=(n=(i=fj(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),i),i.removePortal=function(){!au&&Sb.default.unmountComponentAtNode(i.node);var l=Av(i.props.parentSelector);l&&l.contains(i.node)?l.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(l){i.portal=l},i.renderPortal=function(l){var d=gj(),u=d(i,wb.default.createElement(hj.default,uj({defaultStyles:t.defaultStyles},l)),i.node);i.portalRef(u)},n),fj(i,o)}return qfe(t,[{key:"componentDidMount",value:function(){if(td.canUseDOM){au||(this.node=mj("div")),this.node.className=this.props.portalClassName;var n=Av(this.props.parentSelector);n.appendChild(this.node),!au&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(n){var i=Av(n.parentSelector),o=Av(this.props.parentSelector);return{prevParent:i,nextParent:o}}},{key:"componentDidUpdate",value:function(n,i,o){if(td.canUseDOM){var a=this.props,s=a.isOpen,c=a.portalClassName;n.portalClassName!==c&&(this.node.className=c);var l=o.prevParent,d=o.nextParent;d!==l&&(l.removeChild(this.node),d.appendChild(this.node)),!(!n.isOpen&&!s)&&!au&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!td.canUseDOM||!this.node||!this.portal)){var n=this.portal.state,i=Date.now(),o=n.isOpen&&this.props.closeTimeoutMS&&(n.closesAt||i+this.props.closeTimeoutMS);o?(n.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,o-i)):this.removePortal()}}},{key:"render",value:function(){if(!td.canUseDOM||!au)return null;!this.node&&au&&(this.node=mj("div"));var n=gj();return n(wb.default.createElement(hj.default,uj({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(n){Zfe.setElement(n)}}]),t}(dz.Component);Ty.propTypes={isOpen:Dt.default.bool.isRequired,style:Dt.default.shape({content:Dt.default.object,overlay:Dt.default.object}),portalClassName:Dt.default.string,bodyOpenClassName:Dt.default.string,htmlOpenClassName:Dt.default.string,className:Dt.default.oneOfType([Dt.default.string,Dt.default.shape({base:Dt.default.string.isRequired,afterOpen:Dt.default.string.isRequired,beforeClose:Dt.default.string.isRequired})]),overlayClassName:Dt.default.oneOfType([Dt.default.string,Dt.default.shape({base:Dt.default.string.isRequired,afterOpen:Dt.default.string.isRequired,beforeClose:Dt.default.string.isRequired})]),appElement:Dt.default.oneOfType([Dt.default.instanceOf(pj.default),Dt.default.instanceOf(td.SafeHTMLCollection),Dt.default.instanceOf(td.SafeNodeList),Dt.default.arrayOf(Dt.default.instanceOf(pj.default))]),onAfterOpen:Dt.default.func,onRequestClose:Dt.default.func,closeTimeoutMS:Dt.default.number,ariaHideApp:Dt.default.bool,shouldFocusAfterRender:Dt.default.bool,shouldCloseOnOverlayClick:Dt.default.bool,shouldReturnFocusAfterClose:Dt.default.bool,preventScroll:Dt.default.bool,parentSelector:Dt.default.func,aria:Dt.default.object,data:Dt.default.object,role:Dt.default.string,contentLabel:Dt.default.string,shouldCloseOnEsc:Dt.default.bool,overlayRef:Dt.default.func,contentRef:Dt.default.func,id:Dt.default.string,overlayElement:Dt.default.func,contentElement:Dt.default.func};Ty.defaultProps={isOpen:!1,portalClassName:ime,bodyOpenClassName:ome,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(t,r){return wb.default.createElement("div",t,r)},contentElement:function(t,r){return wb.default.createElement("div",t,r)}};Ty.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,eme.polyfill)(Ty);Zu.default=Ty;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Zu,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}t.default=n.default,e.exports=t.default})(DA,DA.exports);var ame=DA.exports;const vS=rs(ame),uz=ui().shape({password:kt().required("Enter password").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirmPassword:kt().required("Enter confirmpassword").oneOf([uW("password"),null],"Should be matching with password field")}),hz=e=>{try{const[t,r]=e.split("@");return`${t.slice(0,4)+"************"}@${r}`}catch(t){console.log(t)}};var pz={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yj=Tr.createContext&&Tr.createContext(pz),sme=["attr","size","title"];function cme(e,t){if(e==null)return{};var r=lme(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lme(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Tb(){return Tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tb.apply(this,arguments)}function vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vj(Object(r),!0).forEach(function(n){dme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dme(e,t,r){return t=ume(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ume(e){var t=hme(e,"string");return typeof t=="symbol"?t:t+""}function hme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fz(e){return e&&e.map((t,r)=>Tr.createElement(t.tag,Cb({key:r},t.attr),fz(t.child)))}function hi(e){return t=>Tr.createElement(pme,Tb({attr:Cb({},e.attr)},t),fz(e.child))}function pme(e){var t=r=>{var{attr:n,size:i,title:o}=e,a=cme(e,sme),s=i||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),Tr.createElement("svg",Tb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:c,style:Cb(Cb({color:e.color||r.color},r.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&Tr.createElement("title",null,o),e.children)};return yj!==void 0?Tr.createElement(yj.Consumer,null,r=>t(r)):t(pz)}function fme(e){return hi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function mme(e){return hi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function gme(e){return hi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(e)}function mz(e){return hi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function yme(e){return hi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(e)}function vme(e){return hi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}function Eme(e){return hi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},child:[]}]})(e)}function _me(e){return hi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function gz(e){return hi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"},child:[]}]})(e)}function bme(e){return hi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"},child:[]}]})(e)}function yz(e){return hi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"},child:[]}]})(e)}function wme(e){return hi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"},child:[]}]})(e)}function Sme(e){return hi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"},child:[]}]})(e)}const Qk="-";function Tme(e){const t=Rme(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;function i(a){const s=a.split(Qk);return s[0]===""&&s.length!==1&&s.shift(),vz(s,t)||Cme(a)}function o(a,s){const c=r[a]||[];return s&&n[a]?[...c,...n[a]]:c}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function vz(e,t){var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?vz(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(Qk);return(a=t.validators.find(({validator:s})=>s(o)))==null?void 0:a.classGroupId}const Ej=/^\[(.+)\]$/;function Cme(e){if(Ej.test(e)){const t=Ej.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function Rme(e){const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return xme(Object.entries(e.classGroups),r).forEach(([o,a])=>{FA(a,n,o,t)}),n}function FA(e,t,r,n){e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:_j(t,i);o.classGroupId=r;return}if(typeof i=="function"){if(Ime(i)){FA(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([o,a])=>{FA(a,_j(t,o),r,n)})})}function _j(e,t){let r=e;return t.split(Qk).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function Ime(e){return e.isThemeGetter}function xme(e,t){return t?e.map(([r,n])=>{const i=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,s])=>[t+a,s])):o);return[r,i]}):e}function Ame(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;function i(o,a){r.set(o,a),t++,t>e&&(t=0,n=r,r=new Map)}return{get(o){let a=r.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return i(o,a),a},set(o,a){r.has(o)?r.set(o,a):i(o,a)}}}const Ez="!";function Nme(e){const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],o=t.length;function a(s){const c=[];let l=0,d=0,u;for(let y=0;y<s.length;y++){let v=s[y];if(l===0){if(v===i&&(n||s.slice(y,y+o)===t)){c.push(s.slice(d,y)),d=y+o;continue}if(v==="/"){u=y;continue}}v==="["?l++:v==="]"&&l--}const p=c.length===0?s:s.substring(d),f=p.startsWith(Ez),m=f?p.substring(1):p,g=u&&u>d?u-d:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:g}}return r?function(c){return r({className:c,parseClassName:a})}:a}function Ome(e){if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t}function kme(e){return{cache:Ame(e.cacheSize),parseClassName:Nme(e),...Tme(e)}}const Pme=/\s+/;function Dme(e,t){const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,o=new Set;return e.trim().split(Pme).map(a=>{const{modifiers:s,hasImportantModifier:c,baseClassName:l,maybePostfixModifierPosition:d}=r(a);let u=!!d,p=n(u?l.substring(0,d):l);if(!p){if(!u)return{isTailwindClass:!1,originalClassName:a};if(p=n(l),!p)return{isTailwindClass:!1,originalClassName:a};u=!1}const f=Ome(s).join(":");return{isTailwindClass:!0,modifierId:c?f+Ez:f,classGroupId:p,originalClassName:a,hasPostfixModifier:u}}).reverse().filter(a=>{if(!a.isTailwindClass)return!0;const{modifierId:s,classGroupId:c,hasPostfixModifier:l}=a,d=s+c;return o.has(d)?!1:(o.add(d),i(c,l).forEach(u=>o.add(s+u)),!0)}).reverse().map(a=>a.originalClassName).join(" ")}function Lme(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=_z(t))&&(n&&(n+=" "),n+=r);return n}function _z(e){if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=_z(e[n]))&&(r&&(r+=" "),r+=t);return r}function Mme(e,...t){let r,n,i,o=a;function a(c){const l=t.reduce((d,u)=>u(d),e());return r=kme(l),n=r.cache.get,i=r.cache.set,o=s,s(c)}function s(c){const l=n(c);if(l)return l;const d=Dme(c,r);return i(c,d),d}return function(){return o(Lme.apply(null,arguments))}}function en(e){const t=r=>r[e]||[];return t.isThemeGetter=!0,t}const bz=/^\[(?:([a-z-]+):)?(.+)\]$/i,jme=/^\d+\/\d+$/,Ume=new Set(["px","full","screen"]),Fme=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Vme=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Bme=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,$me=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Hme=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Pc(e){return bu(e)||Ume.has(e)||jme.test(e)}function Rl(e){return em(e,"length",Jme)}function bu(e){return!!e&&!Number.isNaN(Number(e))}function Nv(e){return em(e,"number",bu)}function Fm(e){return!!e&&Number.isInteger(Number(e))}function Wme(e){return e.endsWith("%")&&bu(e.slice(0,-1))}function $t(e){return bz.test(e)}function Il(e){return Fme.test(e)}const Gme=new Set(["length","size","percentage"]);function zme(e){return em(e,Gme,wz)}function Kme(e){return em(e,"position",wz)}const qme=new Set(["image","url"]);function Yme(e){return em(e,qme,Zme)}function Xme(e){return em(e,"",Qme)}function Vm(){return!0}function em(e,t,r){const n=bz.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1}function Jme(e){return Vme.test(e)&&!Bme.test(e)}function wz(){return!1}function Qme(e){return $me.test(e)}function Zme(e){return Hme.test(e)}function ege(){const e=en("colors"),t=en("spacing"),r=en("blur"),n=en("brightness"),i=en("borderColor"),o=en("borderRadius"),a=en("borderSpacing"),s=en("borderWidth"),c=en("contrast"),l=en("grayscale"),d=en("hueRotate"),u=en("invert"),p=en("gap"),f=en("gradientColorStops"),m=en("gradientColorStopPositions"),g=en("inset"),y=en("margin"),v=en("opacity"),E=en("padding"),w=en("saturate"),S=en("scale"),x=en("sepia"),O=en("skew"),L=en("space"),j=en("translate"),W=()=>["auto","contain","none"],V=()=>["auto","hidden","clip","visible","scroll"],Y=()=>["auto",$t,t],Z=()=>[$t,t],te=()=>["",Pc,Rl],H=()=>["auto",bu,$t],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],A=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",$t],P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>[bu,Nv],R=()=>[bu,$t];return{cacheSize:500,separator:":",theme:{colors:[Vm],spacing:[Pc,Rl],blur:["none","",Il,$t],brightness:_(),borderColor:[e],borderRadius:["none","","full",Il,$t],borderSpacing:Z(),borderWidth:te(),contrast:_(),grayscale:F(),hueRotate:R(),invert:F(),gap:Z(),gradientColorStops:[e],gradientColorStopPositions:[Wme,Rl],inset:Y(),margin:Y(),opacity:_(),padding:Z(),saturate:_(),scale:_(),sepia:F(),skew:R(),space:Z(),translate:Z()},classGroups:{aspect:[{aspect:["auto","square","video",$t]}],container:["container"],columns:[{columns:[Il]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),$t]}],overflow:[{overflow:V()}],"overflow-x":[{"overflow-x":V()}],"overflow-y":[{"overflow-y":V()}],overscroll:[{overscroll:W()}],"overscroll-x":[{"overscroll-x":W()}],"overscroll-y":[{"overscroll-y":W()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fm,$t]}],basis:[{basis:Y()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",$t]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Fm,$t]}],"grid-cols":[{"grid-cols":[Vm]}],"col-start-end":[{col:["auto",{span:["full",Fm,$t]},$t]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Vm]}],"row-start-end":[{row:["auto",{span:[Fm,$t]},$t]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",$t]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",$t]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...N()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...N(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...N(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",$t,t]}],"min-w":[{"min-w":[$t,t,"min","max","fit"]}],"max-w":[{"max-w":[$t,t,"none","full","min","max","fit","prose",{screen:[Il]},Il]}],h:[{h:[$t,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[$t,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[$t,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[$t,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Il,Rl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Nv]}],"font-family":[{font:[Vm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",$t]}],"line-clamp":[{"line-clamp":["none",bu,Nv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pc,$t]}],"list-image":[{"list-image":["none",$t]}],"list-style-type":[{list:["none","disc","decimal",$t]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pc,Rl]}],"underline-offset":[{"underline-offset":["auto",Pc,$t]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),Kme]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zme]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Yme]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Pc,$t]}],"outline-w":[{outline:[Pc,Rl]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Pc,Rl]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Il,Xme]}],"shadow-color":[{shadow:[Vm]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...A(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":A()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Il,$t]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[w]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",$t]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",$t]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",$t]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Fm,$t]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",$t]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$t]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Z()}],"scroll-mx":[{"scroll-mx":Z()}],"scroll-my":[{"scroll-my":Z()}],"scroll-ms":[{"scroll-ms":Z()}],"scroll-me":[{"scroll-me":Z()}],"scroll-mt":[{"scroll-mt":Z()}],"scroll-mr":[{"scroll-mr":Z()}],"scroll-mb":[{"scroll-mb":Z()}],"scroll-ml":[{"scroll-ml":Z()}],"scroll-p":[{"scroll-p":Z()}],"scroll-px":[{"scroll-px":Z()}],"scroll-py":[{"scroll-py":Z()}],"scroll-ps":[{"scroll-ps":Z()}],"scroll-pe":[{"scroll-pe":Z()}],"scroll-pt":[{"scroll-pt":Z()}],"scroll-pr":[{"scroll-pr":Z()}],"scroll-pb":[{"scroll-pb":Z()}],"scroll-pl":[{"scroll-pl":Z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$t]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Pc,Rl,Nv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const ae=Mme(ege);function su(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function A0(e){if(!su(e))return e;const t={};for(const r in e)t[r]=A0(e[r]);return t}function Re(e,t){if(su(t)&&Object.keys(t).length===0)return A0({...e,...t});const r={...e,...t};if(su(t)&&su(e))for(const n in t)su(t[n])&&n in e&&su(e[n])?r[n]=Re(e[n],t[n]):r[n]=su(t[n])?A0(t[n]):t[n];return r}const tge={root:{base:"divide-y divide-gray-200 border-gray-200 dark:divide-gray-700 dark:border-gray-700",flush:{off:"rounded-lg border",on:"border-b"}},content:{base:"p-5 first:rounded-t-lg last:rounded-b-lg dark:bg-gray-900"},title:{arrow:{base:"h-6 w-6 shrink-0",open:{off:"",on:"rotate-180"}},base:"flex w-full items-center justify-between p-5 text-left font-medium text-gray-500 first:rounded-t-lg last:rounded-b-lg dark:text-gray-400",flush:{off:"hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:hover:bg-gray-800 dark:focus:ring-gray-800",on:"bg-transparent dark:bg-transparent"},heading:"",open:{off:"",on:"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-white"}}},rge={base:"flex flex-col gap-2 p-4 text-sm",borderAccent:"border-t-4",closeButton:{base:"-m-1.5 ml-auto inline-flex h-8 w-8 rounded-lg p-1.5 focus:ring-2",icon:"h-5 w-5",color:{info:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",gray:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white",failure:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",success:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",warning:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",red:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",green:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",yellow:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",blue:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",pink:"bg-pink-100 text-pink-500 hover:bg-pink-200 focus:ring-pink-400 dark:bg-pink-200 dark:text-pink-600 dark:hover:bg-pink-300",lime:"bg-lime-100 text-lime-500 hover:bg-lime-200 focus:ring-lime-400 dark:bg-lime-200 dark:text-lime-600 dark:hover:bg-lime-300",dark:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-200 dark:text-gray-600 dark:hover:bg-gray-300",indigo:"bg-indigo-100 text-indigo-500 hover:bg-indigo-200 focus:ring-indigo-400 dark:bg-indigo-200 dark:text-indigo-600 dark:hover:bg-indigo-300",purple:"bg-purple-100 text-purple-500 hover:bg-purple-200 focus:ring-purple-400 dark:bg-purple-200 dark:text-purple-600 dark:hover:bg-purple-300",teal:"bg-teal-100 text-teal-500 hover:bg-teal-200 focus:ring-teal-400 dark:bg-teal-200 dark:text-teal-600 dark:hover:bg-teal-300",light:"bg-gray-50 text-gray-500 hover:bg-gray-100 focus:ring-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:hover:text-white"}},color:{info:"border-cyan-500 bg-cyan-100 text-cyan-700 dark:bg-cyan-200 dark:text-cyan-800",gray:"border-gray-500 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",failure:"border-red-500 bg-red-100 text-red-700 dark:bg-red-200 dark:text-red-800",success:"border-green-500 bg-green-100 text-green-700 dark:bg-green-200 dark:text-green-800",warning:"border-yellow-500 bg-yellow-100 text-yellow-700 dark:bg-yellow-200 dark:text-yellow-800",red:"border-red-500 bg-red-100 text-red-700 dark:bg-red-200 dark:text-red-800",green:"border-green-500 bg-green-100 text-green-700 dark:bg-green-200 dark:text-green-800",yellow:"border-yellow-500 bg-yellow-100 text-yellow-700 dark:bg-yellow-200 dark:text-yellow-800",blue:"border-blue-500 bg-blue-100 text-blue-700 dark:bg-blue-200 dark:text-blue-800",cyan:"border-cyan-500 bg-cyan-100 text-cyan-700 dark:bg-cyan-200 dark:text-cyan-800",pink:"border-pink-500 bg-pink-100 text-pink-700 dark:bg-pink-200 dark:text-pink-800",lime:"border-lime-500 bg-lime-100 text-lime-700 dark:bg-lime-200 dark:text-lime-800",dark:"border-gray-600 bg-gray-800 text-gray-200 dark:bg-gray-900 dark:text-gray-300",indigo:"border-indigo-500 bg-indigo-100 text-indigo-700 dark:bg-indigo-200 dark:text-indigo-800",purple:"border-purple-500 bg-purple-100 text-purple-700 dark:bg-purple-200 dark:text-purple-800",teal:"border-teal-500 bg-teal-100 text-teal-700 dark:bg-teal-200 dark:text-teal-800",light:"border-gray-400 bg-gray-50 text-gray-600 dark:bg-gray-500 dark:text-gray-200"},icon:"mr-3 inline h-5 w-5 flex-shrink-0",rounded:"rounded-lg",wrapper:"flex items-center"},nge={root:{base:"flex items-center justify-center space-x-4 rounded",bordered:"p-1 ring-2",rounded:"rounded-full",color:{dark:"ring-gray-800 dark:ring-gray-800",failure:"ring-red-500 dark:ring-red-700",gray:"ring-gray-500 dark:ring-gray-400",info:"ring-cyan-400 dark:ring-cyan-800",light:"ring-gray-300 dark:ring-gray-500",purple:"ring-purple-500 dark:ring-purple-600",success:"ring-green-500 dark:ring-green-500",warning:"ring-yellow-300 dark:ring-yellow-500",pink:"ring-pink-500 dark:ring-pink-500"},img:{base:"rounded",off:"relative overflow-hidden bg-gray-100 dark:bg-gray-600",on:"",placeholder:"absolute -bottom-1 h-auto w-auto text-gray-400"},size:{xs:"h-6 w-6",sm:"h-8 w-8",md:"h-10 w-10",lg:"h-20 w-20",xl:"h-36 w-36"},stacked:"ring-2 ring-gray-300 dark:ring-gray-500",statusPosition:{"bottom-left":"-bottom-1 -left-1","bottom-center":"-bottom-1","bottom-right":"-bottom-1 -right-1","top-left":"-left-1 -top-1","top-center":"-top-1","top-right":"-right-1 -top-1","center-right":"-right-1",center:"","center-left":"-left-1"},status:{away:"bg-yellow-400",base:"absolute h-3.5 w-3.5 rounded-full border-2 border-white dark:border-gray-800",busy:"bg-red-400",offline:"bg-gray-400",online:"bg-green-400"},initials:{text:"font-medium text-gray-600 dark:text-gray-300",base:"relative inline-flex items-center justify-center overflow-hidden bg-gray-100 dark:bg-gray-600"}},group:{base:"flex -space-x-4"},groupCounter:{base:"relative flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xs font-medium text-white ring-2 ring-gray-300 hover:bg-gray-600 dark:ring-gray-500"}},ige={root:{base:"flex h-fit items-center gap-1 font-semibold",color:{info:"bg-cyan-100 text-cyan-800 group-hover:bg-cyan-200 dark:bg-cyan-200 dark:text-cyan-800 dark:group-hover:bg-cyan-300",gray:"bg-gray-100 text-gray-800 group-hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:group-hover:bg-gray-600",failure:"bg-red-100 text-red-800 group-hover:bg-red-200 dark:bg-red-200 dark:text-red-900 dark:group-hover:bg-red-300",success:"bg-green-100 text-green-800 group-hover:bg-green-200 dark:bg-green-200 dark:text-green-900 dark:group-hover:bg-green-300",warning:"bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 dark:bg-yellow-200 dark:text-yellow-900 dark:group-hover:bg-yellow-300",indigo:"bg-indigo-100 text-indigo-800 group-hover:bg-indigo-200 dark:bg-indigo-200 dark:text-indigo-900 dark:group-hover:bg-indigo-300",purple:"bg-purple-100 text-purple-800 group-hover:bg-purple-200 dark:bg-purple-200 dark:text-purple-900 dark:group-hover:bg-purple-300",pink:"bg-pink-100 text-pink-800 group-hover:bg-pink-200 dark:bg-pink-200 dark:text-pink-900 dark:group-hover:bg-pink-300",blue:"bg-blue-100 text-blue-800 group-hover:bg-blue-200 dark:bg-blue-200 dark:text-blue-900 dark:group-hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-800 group-hover:bg-cyan-200 dark:bg-cyan-200 dark:text-cyan-900 dark:group-hover:bg-cyan-300",dark:"bg-gray-600 text-gray-100 group-hover:bg-gray-500 dark:bg-gray-900 dark:text-gray-200 dark:group-hover:bg-gray-700",light:"bg-gray-200 text-gray-800 group-hover:bg-gray-300 dark:bg-gray-400 dark:text-gray-900 dark:group-hover:bg-gray-500",green:"bg-green-100 text-green-800 group-hover:bg-green-200 dark:bg-green-200 dark:text-green-900 dark:group-hover:bg-green-300",lime:"bg-lime-100 text-lime-800 group-hover:bg-lime-200 dark:bg-lime-200 dark:text-lime-900 dark:group-hover:bg-lime-300",red:"bg-red-100 text-red-800 group-hover:bg-red-200 dark:bg-red-200 dark:text-red-900 dark:group-hover:bg-red-300",teal:"bg-teal-100 text-teal-800 group-hover:bg-teal-200 dark:bg-teal-200 dark:text-teal-900 dark:group-hover:bg-teal-300",yellow:"bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 dark:bg-yellow-200 dark:text-yellow-900 dark:group-hover:bg-yellow-300"},href:"group",size:{xs:"p-1 text-xs",sm:"p-1.5 text-sm"}},icon:{off:"rounded px-2 py-0.5",on:"rounded-full p-1.5",size:{xs:"h-3 w-3",sm:"h-3.5 w-3.5"}}},oge={root:{base:"text-xl font-semibold italic text-gray-900 dark:text-white"}},age={root:{base:"",list:"flex items-center"},item:{base:"group flex items-center",chevron:"mx-1 h-4 w-4 text-gray-400 group-first:hidden md:mx-2",href:{off:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",on:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},icon:"mr-2 h-4 w-4"}},sge={base:"group relative flex items-stretch justify-center p-0.5 text-center font-medium transition-[color,background-color,border-color,text-decoration-color,fill,stroke,box-shadow] focus:z-10 focus:outline-none",fullSized:"w-full",color:{dark:"border border-transparent bg-gray-800 text-white focus:ring-4 focus:ring-gray-300 enabled:hover:bg-gray-900 dark:border-gray-700 dark:bg-gray-800 dark:focus:ring-gray-800 dark:enabled:hover:bg-gray-700",failure:"border border-transparent bg-red-700 text-white focus:ring-4 focus:ring-red-300 enabled:hover:bg-red-800 dark:bg-red-600 dark:focus:ring-red-900 dark:enabled:hover:bg-red-700",gray:":ring-cyan-700 border border-gray-200 bg-white text-gray-900 focus:text-cyan-700 focus:ring-4 enabled:hover:bg-gray-100 enabled:hover:text-cyan-700 dark:border-gray-600 dark:bg-transparent dark:text-gray-400 dark:enabled:hover:bg-gray-700 dark:enabled:hover:text-white",info:"border border-transparent bg-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-800 dark:bg-cyan-600 dark:focus:ring-cyan-800 dark:enabled:hover:bg-cyan-700",light:"border border-gray-300 bg-white text-gray-900 focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-600 dark:text-white dark:focus:ring-gray-700 dark:enabled:hover:border-gray-700 dark:enabled:hover:bg-gray-700",purple:"border border-transparent bg-purple-700 text-white focus:ring-4 focus:ring-purple-300 enabled:hover:bg-purple-800 dark:bg-purple-600 dark:focus:ring-purple-900 dark:enabled:hover:bg-purple-700",success:"border border-transparent bg-green-700 text-white focus:ring-4 focus:ring-green-300 enabled:hover:bg-green-800 dark:bg-green-600 dark:focus:ring-green-800 dark:enabled:hover:bg-green-700",warning:"border border-transparent bg-yellow-400 text-white focus:ring-4 focus:ring-yellow-300 enabled:hover:bg-yellow-500 dark:focus:ring-yellow-900",blue:"border border-transparent bg-blue-700 text-white focus:ring-4 focus:ring-blue-300 enabled:hover:bg-blue-800 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",cyan:"border border-cyan-300 bg-white text-cyan-900 focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-100 dark:border-cyan-600 dark:bg-cyan-600 dark:text-white dark:focus:ring-cyan-700 dark:enabled:hover:border-cyan-700 dark:enabled:hover:bg-cyan-700",green:"border border-green-300 bg-white text-green-900 focus:ring-4 focus:ring-green-300 enabled:hover:bg-green-100 dark:border-green-600 dark:bg-green-600 dark:text-white dark:focus:ring-green-700 dark:enabled:hover:border-green-700 dark:enabled:hover:bg-green-700",indigo:"border border-indigo-300 bg-white text-indigo-900 focus:ring-4 focus:ring-indigo-300 enabled:hover:bg-indigo-100 dark:border-indigo-600 dark:bg-indigo-600 dark:text-white dark:focus:ring-indigo-700 dark:enabled:hover:border-indigo-700 dark:enabled:hover:bg-indigo-700",lime:"border border-lime-300 bg-white text-lime-900 focus:ring-4 focus:ring-lime-300 enabled:hover:bg-lime-100 dark:border-lime-600 dark:bg-lime-600 dark:text-white dark:focus:ring-lime-700 dark:enabled:hover:border-lime-700 dark:enabled:hover:bg-lime-700",pink:"border border-pink-300 bg-white text-pink-900 focus:ring-4 focus:ring-pink-300 enabled:hover:bg-pink-100 dark:border-pink-600 dark:bg-pink-600 dark:text-white dark:focus:ring-pink-700 dark:enabled:hover:border-pink-700 dark:enabled:hover:bg-pink-700",red:"border border-red-300 bg-white text-red-900 focus:ring-4 focus:ring-red-300 enabled:hover:bg-red-100 dark:border-red-600 dark:bg-red-600 dark:text-white dark:focus:ring-red-700 dark:enabled:hover:border-red-700 dark:enabled:hover:bg-red-700",teal:"border border-teal-300 bg-white text-teal-900 focus:ring-4 focus:ring-teal-300 enabled:hover:bg-teal-100 dark:border-teal-600 dark:bg-teal-600 dark:text-white dark:focus:ring-teal-700 dark:enabled:hover:border-teal-700 dark:enabled:hover:bg-teal-700",yellow:"border border-yellow-300 bg-white text-yellow-900 focus:ring-4 focus:ring-yellow-300 enabled:hover:bg-yellow-100 dark:border-yellow-600 dark:bg-yellow-600 dark:text-white dark:focus:ring-yellow-700 dark:enabled:hover:border-yellow-700 dark:enabled:hover:bg-yellow-700"},disabled:"cursor-not-allowed opacity-50",isProcessing:"cursor-wait",spinnerSlot:"absolute top-0 flex h-full items-center",spinnerLeftPosition:{xs:"left-2",sm:"left-3",md:"left-4",lg:"left-5",xl:"left-6"},gradient:{cyan:"bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-br dark:focus:ring-cyan-800",failure:"bg-gradient-to-r from-red-400 via-red-500 to-red-600 text-white focus:ring-4 focus:ring-red-300 enabled:hover:bg-gradient-to-br dark:focus:ring-red-800",info:"bg-gradient-to-r from-cyan-500 via-cyan-600 to-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-br dark:focus:ring-cyan-800",lime:"bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 text-gray-900 focus:ring-4 focus:ring-lime-300 enabled:hover:bg-gradient-to-br dark:focus:ring-lime-800",pink:"bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 text-white focus:ring-4 focus:ring-pink-300 enabled:hover:bg-gradient-to-br dark:focus:ring-pink-800",purple:"bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 text-white focus:ring-4 focus:ring-purple-300 enabled:hover:bg-gradient-to-br dark:focus:ring-purple-800",success:"bg-gradient-to-r from-green-400 via-green-500 to-green-600 text-white focus:ring-4 focus:ring-green-300 enabled:hover:bg-gradient-to-br dark:focus:ring-green-800",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 text-white focus:ring-4 focus:ring-teal-300 enabled:hover:bg-gradient-to-br dark:focus:ring-teal-800"},gradientDuoTone:{cyanToBlue:"bg-gradient-to-r from-cyan-500 to-cyan-500 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-bl dark:focus:ring-cyan-800",greenToBlue:"bg-gradient-to-br from-green-400 to-cyan-600 text-white focus:ring-4 focus:ring-green-200 enabled:hover:bg-gradient-to-bl dark:focus:ring-green-800",pinkToOrange:"bg-gradient-to-br from-pink-500 to-orange-400 text-white focus:ring-4 focus:ring-pink-200 enabled:hover:bg-gradient-to-bl dark:focus:ring-pink-800",purpleToBlue:"bg-gradient-to-br from-purple-600 to-cyan-500 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-bl dark:focus:ring-cyan-800",purpleToPink:"bg-gradient-to-r from-purple-500 to-pink-500 text-white focus:ring-4 focus:ring-purple-200 enabled:hover:bg-gradient-to-l dark:focus:ring-purple-800",redToYellow:"bg-gradient-to-r from-red-200 via-red-300 to-yellow-200 text-gray-900 focus:ring-4 focus:ring-red-100 enabled:hover:bg-gradient-to-bl dark:focus:ring-red-400",tealToLime:"bg-gradient-to-r from-teal-200 to-lime-200 text-gray-900 focus:ring-4 focus:ring-lime-200 enabled:hover:bg-gradient-to-l enabled:hover:from-teal-200 enabled:hover:to-lime-200 enabled:hover:text-gray-900 dark:focus:ring-teal-700"},inner:{base:"flex items-stretch transition-all duration-200",position:{none:"",start:"rounded-r-none",middle:"rounded-none",end:"rounded-l-none"},outline:"border border-transparent",isProcessingPadding:{xs:"pl-8",sm:"pl-10",md:"pl-12",lg:"pl-16",xl:"pl-20"}},label:"ml-2 inline-flex h-4 w-4 items-center justify-center rounded-full bg-cyan-200 text-xs font-semibold text-cyan-800",outline:{color:{gray:"border border-gray-900 dark:border-white",default:"border-0",light:""},off:"",on:"flex w-full justify-center bg-white text-gray-900 transition-all duration-75 ease-in group-enabled:group-hover:bg-opacity-0 group-enabled:group-hover:text-inherit dark:bg-gray-900 dark:text-white",pill:{off:"rounded-md",on:"rounded-full"}},pill:{off:"rounded-lg",on:"rounded-full"},size:{xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base",xl:"px-6 py-3 text-base"}},cge={base:"inline-flex",position:{none:"",start:"rounded-r-none focus:ring-2",middle:"rounded-none border-l-0 pl-0 focus:ring-2",end:"rounded-l-none border-l-0 pl-0 focus:ring-2"}},lge={root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}},dge={root:{base:"relative h-full w-full",leftControl:"absolute left-0 top-0 flex h-full items-center justify-center px-4 focus:outline-none",rightControl:"absolute right-0 top-0 flex h-full items-center justify-center px-4 focus:outline-none"},indicators:{active:{off:"bg-white/50 hover:bg-white dark:bg-gray-800/50 dark:hover:bg-gray-800",on:"bg-white dark:bg-gray-800"},base:"h-3 w-3 rounded-full",wrapper:"absolute bottom-5 left-1/2 flex -translate-x-1/2 space-x-3"},item:{base:"absolute left-1/2 top-1/2 block w-full -translate-x-1/2 -translate-y-1/2",wrapper:{off:"w-full flex-shrink-0 transform cursor-default snap-center",on:"w-full flex-shrink-0 transform cursor-grab snap-center"}},control:{base:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:outline-none group-focus:ring-4 group-focus:ring-white dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70 sm:h-10 sm:w-10",icon:"h-5 w-5 text-white dark:text-gray-800 sm:h-6 sm:w-6"},scrollContainer:{base:"flex h-full snap-mandatory overflow-y-hidden overflow-x-scroll scroll-smooth rounded-lg",snap:"snap-x"}},uge={root:{base:"h-4 w-4 rounded border border-gray-300 bg-gray-100 focus:ring-2 dark:border-gray-600 dark:bg-gray-700",color:{default:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-gray-800 dark:focus:ring-cyan-600",dark:"text-gray-800 focus:ring-gray-800 dark:ring-offset-gray-800 dark:focus:ring-gray-800",failure:"text-red-900 focus:ring-red-900 dark:ring-offset-red-900 dark:focus:ring-red-900",gray:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",info:"text-cyan-800 focus:ring-cyan-800 dark:ring-offset-gray-800 dark:focus:ring-cyan-800",light:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",purple:"text-purple-600 focus:ring-purple-600 dark:ring-offset-purple-600 dark:focus:ring-purple-600",success:"text-green-800 focus:ring-green-800 dark:ring-offset-green-800 dark:focus:ring-green-800",warning:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400",blue:"text-blue-700 focus:ring-blue-600 dark:ring-offset-blue-700 dark:focus:ring-blue-700",cyan:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-cyan-600 dark:focus:ring-cyan-600",green:"text-green-600 focus:ring-green-600 dark:ring-offset-green-600 dark:focus:ring-green-600",indigo:"text-indigo-700 focus:ring-indigo-700 dark:ring-offset-indigo-700 dark:focus:ring-indigo-700",lime:"text-lime-700 focus:ring-lime-700 dark:ring-offset-lime-700 dark:focus:ring-lime-700",pink:"text-pink-600 focus:ring-pink-600 dark:ring-offset-pink-600 dark:focus:ring-pink-600",red:"text-red-600 focus:ring-red-600 dark:ring-offset-red-600 dark:focus:ring-red-600",teal:"text-teal-600 focus:ring-teal-600 dark:ring-offset-teal-600 dark:focus:ring-teal-600",yellow:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400"}}},hge={button:{base:"inline-flex w-full items-center justify-center rounded-lg bg-blue-700 px-5 py-3 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",label:"text-center text-sm font-medium text-white sm:w-auto"},withIcon:{base:"absolute end-2 top-1/2 inline-flex -translate-y-1/2 items-center justify-center rounded-lg p-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800",icon:{defaultIcon:"h-4 w-4",successIcon:"h-4 w-4 text-blue-700 dark:text-blue-500"}},withIconText:{base:"absolute end-2.5 top-1/2 inline-flex -translate-y-1/2 items-center justify-center rounded-lg border border-gray-200 bg-white px-2.5 py-2 text-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700",icon:{defaultIcon:"me-1.5 h-3 w-3",successIcon:"me-1.5 h-3 w-3 text-blue-700 dark:text-blue-500"},label:{base:"inline-flex items-center",defaultText:"text-xs font-semibold",successText:"text-xs font-semibold text-blue-700 dark:text-blue-500"}}},pge={root:{base:"rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700",icon:"h-5 w-5"}},fge={root:{base:"relative"},popup:{root:{base:"absolute top-10 z-50 block pt-2",inline:"relative top-0 z-auto",inner:"inline-block rounded-lg bg-white p-4 shadow-lg dark:bg-gray-700"},header:{base:"",title:"px-2 py-3 text-center font-semibold text-gray-900 dark:text-white",selectors:{base:"mb-2 flex justify-between",button:{base:"rounded-lg bg-white px-5 py-2.5 text-sm font-semibold text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",prev:"",next:"",view:""}}},view:{base:"p-1"},footer:{base:"mt-2 flex space-x-2",button:{base:"w-full rounded-lg px-5 py-2 text-center text-sm font-medium focus:ring-4 focus:ring-cyan-300",today:"bg-cyan-700 text-white hover:bg-cyan-800 dark:bg-cyan-600 dark:hover:bg-cyan-700",clear:"border border-gray-300 bg-white text-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600"}}},views:{days:{header:{base:"mb-1 grid grid-cols-7",title:"h-6 text-center text-sm font-medium leading-6 text-gray-500 dark:text-gray-400"},items:{base:"grid w-64 grid-cols-7",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},months:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},years:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},decades:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}}}},mge={root:{base:"fixed z-40 overflow-y-auto bg-white p-4 transition-transform dark:bg-gray-800",backdrop:"fixed inset-0 z-30 bg-gray-900/50 dark:bg-gray-900/80",edge:"bottom-16",position:{top:{on:"left-0 right-0 top-0 w-full transform-none",off:"left-0 right-0 top-0 w-full -translate-y-full"},right:{on:"right-0 top-0 h-screen w-80 transform-none",off:"right-0 top-0 h-screen w-80 translate-x-full"},bottom:{on:"bottom-0 left-0 right-0 w-full transform-none",off:"bottom-0 left-0 right-0 w-full translate-y-full"},left:{on:"left-0 top-0 h-screen w-80 transform-none",off:"left-0 top-0 h-screen w-80 -translate-x-full"}}},header:{inner:{closeButton:"absolute end-2.5 top-2.5 flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",closeIcon:"h-4 w-4",titleIcon:"me-2.5 h-4 w-4",titleText:"mb-4 inline-flex items-center text-base font-semibold text-gray-500 dark:text-gray-400"},collapsed:{on:"hidden",off:"block"}},items:{base:""}},Ul={arrowIcon:"ml-2 h-4 w-4",content:"py-1 focus:outline-none",floating:{animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"z-10 w-fit divide-y divide-gray-100 rounded shadow focus:outline-none",content:"py-1 text-sm text-gray-700 dark:text-gray-200",divider:"my-1 h-px bg-gray-100 dark:bg-gray-600",header:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200",hidden:"invisible opacity-0",item:{container:"",base:"flex w-full cursor-pointer items-center justify-start px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:bg-gray-600 dark:focus:text-white",icon:"mr-2 h-4 w-4"},style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},target:"w-fit"},inlineWrapper:"flex items-center"},gge={root:{base:"flex"},field:{base:"relative w-full",input:{base:"block w-full overflow-hidden rounded-lg border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"sm:text-xs",md:"text-sm",lg:"sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},yge={input:{default:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-gray-300 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-gray-300 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"}},success:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-green-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:bg-gray-700 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-green-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:bg-gray-700 dark:text-white dark:focus:border-green-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-green-600 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none rounded-lg border border-green-600 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-green-600 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none border-0 border-b-2 border-green-600 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500"}},error:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-red-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:bg-gray-700 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-red-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:bg-gray-700 dark:text-white dark:focus:border-red-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-red-600 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none rounded-lg border border-red-600 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-red-600 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none border-0 border-b-2 border-red-600 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500"}}},label:{default:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"}},success:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-green-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-green-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-green-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-green-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-green-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-green-500"}},error:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-red-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-red-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-red-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-red-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-red-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-red-500"}}},helperText:{default:"mt-2 text-xs text-gray-600 dark:text-gray-400",success:"mt-2 text-xs text-green-600 dark:text-green-400",error:"mt-2 text-xs text-red-600 dark:text-red-400"}},vge={root:{base:"w-full rounded-lg bg-white shadow dark:bg-gray-800 md:flex md:items-center md:justify-between",container:"w-full p-6",bgDark:"bg-gray-800"},groupLink:{base:"flex flex-wrap text-sm text-gray-500 dark:text-white",link:{base:"me-4 last:mr-0 md:mr-6",href:"hover:underline"},col:"flex-col space-y-4"},icon:{base:"text-gray-500 dark:hover:text-white",size:"h-5 w-5"},title:{base:"mb-6 text-sm font-semibold uppercase text-gray-500 dark:text-white"},divider:{base:"my-6 w-full border-gray-200 dark:border-gray-700 sm:mx-auto lg:my-8"},copyright:{base:"text-sm text-gray-500 dark:text-gray-400 sm:text-center",href:"ml-1 hover:underline",span:"ml-1"},brand:{base:"mb-4 flex items-center sm:mb-0",img:"mr-3 h-8",span:"self-center whitespace-nowrap text-2xl font-semibold text-gray-800 dark:text-white"}},Ege={root:{base:"mt-2 text-sm",colors:{gray:"text-gray-500 dark:text-gray-400",info:"text-cyan-700 dark:text-cyan-800",success:"text-green-600 dark:text-green-500",failure:"text-red-600 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600"}}},_ge={root:{base:"my-8 h-px border-0 bg-gray-200 dark:bg-gray-700"},trimmed:{base:"mx-auto my-4 h-1 w-48 rounded border-0 bg-gray-100 dark:bg-gray-700 md:my-10"},icon:{base:"inline-flex w-full items-center justify-center",hrLine:"my-8 h-1 w-64 rounded border-0 bg-gray-200 dark:bg-gray-700",icon:{base:"absolute left-1/2 -translate-x-1/2 bg-white px-4 dark:bg-gray-900",icon:"h-4 w-4 text-gray-700 dark:text-gray-300"}},text:{base:"inline-flex w-full items-center justify-center",hrLine:"my-8 h-px w-64 border-0 bg-gray-200 dark:bg-gray-700",text:"absolute left-1/2 -translate-x-1/2 bg-white px-3 font-medium text-gray-900 dark:bg-gray-900 dark:text-white"},square:{base:"mx-auto my-8 h-8 w-8 rounded border-0 bg-gray-200 dark:bg-gray-700 md:my-12"}},bge={root:{base:"rounded-lg border border-gray-200 bg-gray-100 px-2 py-1.5 text-xs font-semibold text-gray-800 dark:border-gray-500 dark:bg-gray-600 dark:text-gray-100",icon:"inline-block"}},wge={root:{base:"text-sm font-medium",disabled:"opacity-50",colors:{default:"text-gray-900 dark:text-white",info:"text-cyan-500 dark:text-cyan-600",failure:"text-red-700 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600",success:"text-green-700 dark:text-green-500"}}},Sge={root:{base:"list-inside space-y-1 text-gray-500 dark:text-gray-400",ordered:{off:"list-disc",on:"list-decimal"},horizontal:"flex list-none flex-wrap items-center justify-center space-x-4 space-y-0",unstyled:"list-none",nested:"mt-2 ps-5"},item:{withIcon:{off:"",on:"flex items-center"},icon:"me-2 h-3.5 w-3.5 flex-shrink-0"}},Tge={root:{base:"list-none rounded-lg border border-gray-200 bg-white text-left text-sm font-medium text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},item:{base:"[&>*]:first:rounded-t-lg [&>*]:last:rounded-b-lg [&>*]:last:border-b-0",link:{base:"flex w-full items-center border-b border-gray-200 px-4 py-2 dark:border-gray-600",active:{off:"hover:bg-gray-100 hover:text-cyan-700 focus:text-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:text-white dark:focus:ring-gray-500",on:"bg-cyan-700 text-white dark:bg-gray-800"},disabled:{off:"",on:"cursor-not-allowed bg-gray-100 text-gray-900 hover:bg-gray-100 hover:text-gray-900 focus:text-gray-900"},href:{off:"",on:""},icon:"mr-2 h-4 w-4 fill-current"}}},ZE={root:{base:"bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"block py-2 pl-3 pr-4 md:p-0",active:{on:"bg-cyan-700 text-white dark:text-white md:bg-transparent md:text-cyan-700",off:"border-b border-gray-100 text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-cyan-700 md:dark:hover:bg-transparent md:dark:hover:text-white"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},Cge={...ZE,dropdown:{base:"",toggle:{...Ul,floating:{...Ul.floating,base:ae(Ul.floating.base,"mt-2 block"),content:ae(Ul.floating.content,"text-gray-500 dark:text-gray-400"),style:{...Ul.floating.style,auto:ae(Ul.floating.style.auto,"text-gray-500 dark:text-gray-400")}},inlineWrapper:ae(Ul.inlineWrapper,"flex w-full items-center justify-between")}},dropdownToggle:{base:ae(ZE.link.base,ZE.link.active.off,"flex w-full items-center justify-between")}},Rge={root:{base:"fixed inset-x-0 top-0 z-50 h-screen overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900 bg-opacity-50 dark:bg-opacity-80",off:"hidden"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},content:{base:"relative h-full w-full p-4 md:h-auto",inner:"relative flex max-h-[90dvh] flex-col rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"flex-1 overflow-auto p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t border-b p-5 dark:border-gray-600",popup:"border-b-0 p-2",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"}},Ige={base:"",layout:{table:{base:"text-sm text-gray-700 dark:text-gray-400",span:"font-semibold text-gray-900 dark:text-white"}},pages:{base:"xs:mt-0 mt-2 inline-flex items-center -space-x-px",showIcon:"inline-flex",previous:{base:"ml-0 rounded-l-lg border border-gray-300 bg-white px-3 py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",icon:"h-5 w-5"},next:{base:"rounded-r-lg border border-gray-300 bg-white px-3 py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",icon:"h-5 w-5"},selector:{base:"w-12 border border-gray-300 bg-white py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",active:"bg-cyan-50 text-cyan-600 hover:bg-cyan-100 hover:text-cyan-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white",disabled:"cursor-not-allowed opacity-50"}}},xge={base:"absolute z-20 inline-block w-max max-w-[100vw] bg-white outline-none border border-gray-200 rounded-lg shadow-sm dark:border-gray-600 dark:bg-gray-800",content:"z-10 overflow-hidden rounded-[7px]",arrow:{base:"absolute h-2 w-2 z-0 rotate-45 mix-blend-lighten bg-white border border-gray-200 dark:border-gray-600 dark:bg-gray-800 dark:mix-blend-color",placement:"-4px"}},Age={base:"w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",label:"mb-1 flex justify-between font-medium dark:text-white",bar:"space-x-2 rounded-full text-center font-medium leading-none text-cyan-300 dark:text-cyan-100",color:{dark:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600",red:"bg-red-600 dark:bg-red-500",green:"bg-green-600 dark:bg-green-500",yellow:"bg-yellow-400",indigo:"bg-indigo-600 dark:bg-indigo-500",purple:"bg-purple-600 dark:bg-purple-500",cyan:"bg-cyan-600",gray:"bg-gray-500",lime:"bg-lime-600",pink:"bg-pink-500",teal:"bg-teal-600"},size:{sm:"h-1.5",md:"h-2.5",lg:"h-4",xl:"h-6"}},Nge={root:{base:"h-4 w-4 border border-gray-300 text-cyan-600 focus:ring-2 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:bg-cyan-600 dark:focus:ring-cyan-600"}},Oge={root:{base:"flex"},field:{base:"relative w-full",input:{base:"w-full cursor-pointer appearance-none rounded-lg bg-gray-200 dark:bg-gray-700",sizes:{sm:"h-1",md:"h-2",lg:"h-3"}}}},kge={root:{base:"flex items-center"},star:{empty:"text-gray-300 dark:text-gray-500",filled:"text-yellow-400",sizes:{sm:"h-5 w-5",md:"h-7 w-7",lg:"h-10 w-10"}}},Pge={base:"flex items-center",label:"text-sm font-medium text-cyan-600 dark:text-cyan-500",progress:{base:"mx-4 h-5 w-2/4 rounded bg-gray-200 dark:bg-gray-700",fill:"h-5 rounded bg-yellow-400",label:"text-sm font-medium text-cyan-600 dark:text-cyan-500"}},Dge={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},Lge={root:{base:"h-full",collapsed:{on:"w-16",off:"w-64"},inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-gray-50 px-3 py-4 dark:bg-gray-800"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:{base:"h-6 w-6 transition delay-0 ease-in-out",open:{on:"rotate-180",off:""}}},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg bg-gray-100 p-4 dark:bg-gray-700",color:{blue:"bg-cyan-50 dark:bg-cyan-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"flex-1 whitespace-nowrap px-3"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:"",listItem:""},items:{base:""},itemGroup:{base:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700"},logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},Mge={base:"inline animate-spin text-gray-200",color:{failure:"fill-red-600",gray:"fill-gray-600",info:"fill-cyan-600",pink:"fill-pink-600",purple:"fill-purple-600",success:"fill-green-500",warning:"fill-yellow-400"},light:{off:{base:"dark:text-gray-600",color:{failure:"",gray:"dark:fill-gray-300",info:"",pink:"",purple:"",success:"",warning:""}},on:{base:"",color:{failure:"",gray:"",info:"",pink:"",purple:"",success:"",warning:""}}},size:{xs:"h-3 w-3",sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-10 w-10"}},jge={root:{base:"w-full text-left text-sm text-gray-500 dark:text-gray-400",shadow:"absolute left-0 top-0 -z-10 h-full w-full rounded-lg bg-white drop-shadow-md dark:bg-black",wrapper:"relative"},body:{base:"group/body",cell:{base:"px-6 py-4 group-first/body:group-first/row:first:rounded-tl-lg group-first/body:group-first/row:last:rounded-tr-lg group-last/body:group-last/row:first:rounded-bl-lg group-last/body:group-last/row:last:rounded-br-lg"}},head:{base:"group/head text-xs uppercase text-gray-700 dark:text-gray-400",cell:{base:"bg-gray-50 px-6 py-3 group-first/head:first:rounded-tl-lg group-first/head:last:rounded-tr-lg dark:bg-gray-700"}},row:{base:"group/row",hovered:"hover:bg-gray-50 dark:hover:bg-gray-600",striped:"odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700"}},Uge={base:"flex flex-col gap-2",tablist:{base:"flex text-center",variant:{default:"flex-wrap border-b border-gray-200 dark:border-gray-700",underline:"-mb-px flex-wrap border-b border-gray-200 dark:border-gray-700",pills:"flex-wrap space-x-2 text-sm font-medium text-gray-500 dark:text-gray-400",fullWidth:"grid w-full grid-flow-col divide-x divide-gray-200 rounded-none text-sm font-medium shadow dark:divide-gray-700 dark:text-gray-400"},tabitem:{base:"flex items-center justify-center rounded-t-lg p-4 text-sm font-medium first:ml-0 focus:outline-none focus:ring-4 focus:ring-cyan-300 disabled:cursor-not-allowed disabled:text-gray-400 disabled:dark:text-gray-500",variant:{default:{base:"rounded-t-lg",active:{on:"bg-gray-100 text-cyan-600 dark:bg-gray-800 dark:text-cyan-500",off:"text-gray-500 hover:bg-gray-50 hover:text-gray-600 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300"}},underline:{base:"rounded-t-lg",active:{on:"active rounded-t-lg border-b-2 border-cyan-600 text-cyan-600 dark:border-cyan-500 dark:text-cyan-500",off:"border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"}},pills:{base:"",active:{on:"rounded-lg bg-cyan-600 text-white",off:"rounded-lg hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-white"}},fullWidth:{base:"ml-0 flex w-full rounded-none first:ml-0",active:{on:"active rounded-none bg-gray-100 p-4 text-gray-900 dark:bg-gray-700 dark:text-white",off:"rounded-none bg-white hover:bg-gray-50 hover:text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-white"}}},icon:"mr-2 h-5 w-5"}},tabitemcontainer:{base:"",variant:{default:"",underline:"",pills:"",fullWidth:""}},tabpanel:"py-3"},Fge={base:"block w-full rounded-lg border text-sm disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}},Vge={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},Bge={root:{direction:{horizontal:"sm:flex",vertical:"relative border-l border-gray-200 dark:border-gray-700"}},item:{root:{horizontal:"relative mb-6 sm:mb-0",vertical:"mb-10 ml-6"},content:{root:{base:"",horizontal:"mt-3 sm:pr-8",vertical:""},body:{base:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400"},time:{base:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},title:{base:"text-lg font-semibold text-gray-900 dark:text-white"}},point:{horizontal:"flex items-center",line:"hidden h-0.5 w-full bg-gray-200 dark:bg-gray-700 sm:flex",marker:{base:{horizontal:"absolute -left-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700",vertical:"absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700"},icon:{base:"h-3 w-3 text-cyan-600 dark:text-cyan-300",wrapper:"absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-cyan-200 ring-8 ring-white dark:bg-cyan-900 dark:ring-gray-900"}},vertical:""}}},$ge={root:{base:"flex w-full max-w-xs items-center rounded-lg bg-white p-4 text-gray-500 shadow dark:bg-gray-800 dark:text-gray-400",closed:"opacity-0 ease-out"},toggle:{base:"-m-1.5 ml-auto inline-flex h-8 w-8 rounded-lg bg-white p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-900 focus:ring-2 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-500 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5 shrink-0"}},Hge={root:{base:"group flex rounded-lg focus:outline-none",active:{on:"cursor-pointer",off:"cursor-not-allowed opacity-50"},label:"ms-3 mt-0.5 text-start text-sm font-medium text-gray-900 dark:text-gray-300"},toggle:{base:"relative rounded-full border after:absolute after:rounded-full after:bg-white after:transition-all group-focus:ring-4 group-focus:ring-cyan-500/25",checked:{on:"after:translate-x-full after:border-white rtl:after:-translate-x-full",off:"border-gray-200 bg-gray-200 dark:border-gray-600 dark:bg-gray-700",color:{blue:"border-cyan-700 bg-cyan-700",dark:"bg-dark-700 border-dark-900",failure:"border-red-900 bg-red-700",gray:"border-gray-600 bg-gray-500",green:"border-green-700 bg-green-600",light:"bg-light-700 border-light-900",red:"border-red-900 bg-red-700",purple:"border-purple-900 bg-purple-700",success:"border-green-500 bg-green-500",yellow:"border-yellow-400 bg-yellow-400",warning:"border-yellow-600 bg-yellow-600",cyan:"border-cyan-500 bg-cyan-500",lime:"border-lime-400 bg-lime-400",indigo:"border-indigo-400 bg-indigo-400",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4",info:"border-cyan-600 bg-cyan-600",pink:"border-pink-600 bg-pink-600"}},sizes:{sm:"h-5 w-9 min-w-9 after:left-px after:top-px after:h-4 after:w-4 rtl:after:right-px",md:"h-6 w-11 min-w-11 after:left-px after:top-px after:h-5 after:w-5 rtl:after:right-px",lg:"h-7 w-14 min-w-14 after:left-1 after:top-0.5 after:h-6 after:w-6 rtl:after:right-1"}}},Wge={target:"w-fit",animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"absolute z-10 inline-block rounded-lg px-3 py-2 text-sm font-medium shadow-sm",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},content:"relative z-20"},Gge={accordion:tge,alert:rge,avatar:nge,badge:ige,blockquote:oge,breadcrumb:age,button:sge,buttonGroup:cge,card:lge,carousel:dge,checkbox:uge,clipboard:hge,datepicker:fge,darkThemeToggle:pge,drawer:mge,dropdown:Ul,fileInput:gge,floatingLabel:yge,footer:vge,helperText:Ege,hr:_ge,kbd:bge,label:wge,listGroup:Tge,list:Sge,megaMenu:Cge,modal:Rge,navbar:ZE,pagination:Ige,popover:xge,progress:Age,radio:Nge,rangeSlider:Oge,rating:kge,ratingAdvanced:Pge,select:Dge,textInput:Vge,textarea:Fge,toggleSwitch:Hge,sidebar:Lge,spinner:Mge,table:jge,tabs:Uge,timeline:Bge,toast:$ge,tooltip:Wge},zge={theme:A0(Gge)};function rt(){return A0(zge.theme)}const Sz=T.createContext(void 0);function Tz(){const e=T.useContext(Sz);if(!e)throw new Error("useAccordionContext should be used within the AccordionPanelContext provider!");return e}const Cz=({children:e,className:t,theme:r={},...n})=>{const{isOpen:i}=Tz(),o=Re(rt().accordion.content,r);return h.jsx("div",{className:ae(o.base,t),"data-testid":"flowbite-accordion-content",hidden:!i,...n,children:e})},Rz=({children:e,...t})=>{const{alwaysOpen:r}=t,[n,i]=T.useState(t.isOpen),o=r?{...t,isOpen:n,setOpen:()=>i(!n)}:t;return h.jsx(Sz.Provider,{value:o,children:e})},Iz=({as:e="h2",children:t,className:r,theme:n={},...i})=>{const{arrowIcon:o,flush:a,isOpen:s,setOpen:c}=Tz(),l=()=>typeof c<"u"&&c(),d=Re(rt().accordion.title,n);return h.jsxs("button",{className:ae(d.base,d.flush[a?"on":"off"],d.open[s?"on":"off"],r),onClick:l,type:"button",...i,children:[h.jsx(e,{className:d.heading,"data-testid":"flowbite-accordion-heading",children:t}),o&&h.jsx(o,{"aria-hidden":!0,className:ae(d.arrow.base,d.arrow.open[s?"on":"off"]),"data-testid":"flowbite-accordion-arrow"})]})},xz=({alwaysOpen:e=!1,arrowIcon:t=mz,children:r,flush:n=!1,collapseAll:i=!1,className:o,theme:a={},...s})=>{const[c,l]=T.useState(i?-1:0),d=T.useMemo(()=>T.Children.map(r,(p,f)=>T.cloneElement(p,{alwaysOpen:e,arrowIcon:t,flush:n,isOpen:c===f,setOpen:()=>l(c===f?-1:f)})),[e,t,r,n,c]),u=Re(rt().accordion.root,a);return h.jsx("div",{className:ae(u.base,u.flush[n?"on":"off"],o),"data-testid":"flowbite-accordion",...s,children:d})};xz.displayName="Accordion";Rz.displayName="Accordion.Panel";Iz.displayName="Accordion.Title";Cz.displayName="Accordion.Content";Object.assign(xz,{Panel:Rz,Title:Iz,Content:Cz});const Az=({children:e,className:t,theme:r={},...n})=>{const i=Re(rt().avatar.group,r);return h.jsx("div",{"data-testid":"avatar-group-element",className:ae(i.base,t),...n,children:e})};Az.displayName="Avatar.Group";const Nz=({className:e,href:t,theme:r={},total:n,...i})=>{const o=Re(rt().avatar.groupCounter,r);return h.jsxs("a",{href:t,className:ae(o.base,e),...i,children:["+",n]})};Nz.displayName="Avatar.GroupCounter";const Oz=({alt:e="",bordered:t=!1,children:r,className:n,color:i="light",img:o,placeholderInitials:a="",rounded:s=!1,size:c="md",stacked:l=!1,status:d,statusPosition:u="top-left",theme:p={},...f})=>{const m=Re(rt().avatar,p),g=ae(m.root.img.base,t&&m.root.bordered,t&&m.root.color[i],s&&m.root.rounded,l&&m.root.stacked,m.root.img.on,m.root.size[c]),y={className:ae(g,m.root.img.on),"data-testid":"flowbite-avatar-img"};return h.jsxs("div",{className:ae(m.root.base,n),"data-testid":"flowbite-avatar",...f,children:[h.jsxs("div",{className:"relative",children:[o?typeof o=="string"?h.jsx("img",{alt:e,src:o,...y}):o({alt:e,...y}):a?h.jsx("div",{className:ae(m.root.img.off,m.root.initials.base,l&&m.root.stacked,t&&m.root.bordered,t&&m.root.color[i],m.root.size[c],s&&m.root.rounded),"data-testid":"flowbite-avatar-initials-placeholder",children:h.jsx("span",{className:ae(m.root.initials.text),"data-testid":"flowbite-avatar-initials-placeholder-text",children:a})}):h.jsx("div",{className:ae(g,m.root.img.off),"data-testid":"flowbite-avatar-img",children:h.jsx("svg",{className:m.root.img.placeholder,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),d&&h.jsx("span",{"data-testid":"flowbite-avatar-status",className:ae(m.root.status.base,m.root.status[d],m.root.statusPosition[u])})]}),r&&h.jsx("div",{children:r})]})};Oz.displayName="Avatar";Object.assign(Oz,{Group:Az,Counter:Nz});const kz=({children:e,color:t="info",href:r,icon:n,size:i="xs",className:o,theme:a={},...s})=>{const c=Re(rt().badge,a),l=()=>h.jsxs("span",{className:ae(c.root.base,c.root.color[t],c.root.size[i],c.icon[n?"on":"off"],o),"data-testid":"flowbite-badge",...s,children:[n&&h.jsx(n,{"aria-hidden":!0,className:c.icon.size[i],"data-testid":"flowbite-badge-icon"}),e&&h.jsx("span",{children:e})]});return r?h.jsx("a",{className:c.root.href,href:r,children:h.jsx(l,{})}):h.jsx(l,{})};kz.displayName="Badge";const Pz=({className:e,color:t="info",light:r,size:n="md",theme:i={},...o})=>{const a=Re(rt().spinner,i);return h.jsx("span",{role:"status",...o,children:h.jsxs("svg",{fill:"none",viewBox:"0 0 100 101",className:ae(a.base,a.color[t],a.light[r?"on":"off"].base,a.light[r?"on":"off"].color[t],a.size[n],e),children:[h.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),h.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})})};Pz.displayName="Spinner";const Zk=T.forwardRef(({children:e,as:t,href:r,type:n="button",...i},o)=>{const a=t||(r?"a":"button");return T.createElement(a,{ref:o,href:r,type:n,...i},e)});Zk.displayName="ButtonBaseComponent";const Dz=(e,t,r)=>T.Children.map(e,(n,i)=>{if(T.isValidElement(n)){const o=n.type==eP?{positionInGroup:Kge(i,T.Children.count(e))}:{};return n.props.children?T.cloneElement(n,{...n.props,children:Dz(n.props.children,t,r),...o}):T.cloneElement(n,{outline:t,pill:r,...o})}return n}),Kge=(e,t)=>e===0?"start":e===t-1?"end":"middle",Lz=({children:e,className:t,outline:r,pill:n,theme:i={},...o})=>{const a=T.useMemo(()=>Dz(e,r,n),[e,r,n]),s=Re(rt().buttonGroup,i);return h.jsx("div",{className:ae(s.base,t),role:"group",...o,children:a})};Lz.displayName="Button.Group";const Mz=T.forwardRef(({children:e,className:t,color:r="info",disabled:n,fullSized:i,isProcessing:o=!1,processingLabel:a="Loading...",processingSpinner:s,gradientDuoTone:c,gradientMonochrome:l,label:d,outline:u=!1,pill:p=!1,positionInGroup:f="none",size:m="md",theme:g={},...y},v)=>{const{buttonGroup:E,button:w}=rt(),S=Re(w,g),x=y;return h.jsx(Zk,{ref:v,disabled:n,className:ae(S.base,n&&S.disabled,!c&&!l&&S.color[r],c&&!l&&S.gradientDuoTone[c],!c&&l&&S.gradient[l],u&&(S.outline.color[r]??S.outline.color.default),S.pill[p?"on":"off"],i&&S.fullSized,E.position[f],t),...x,children:h.jsx("span",{className:ae(S.inner.base,S.outline[u?"on":"off"],S.outline.pill[u&&p?"on":"off"],S.size[m],u&&!S.outline.color[r]&&S.inner.outline,o&&S.isProcessing,o&&S.inner.isProcessingPadding[m],S.inner.position[f]),children:h.jsxs(h.Fragment,{children:[o&&h.jsx("span",{className:ae(S.spinnerSlot,S.spinnerLeftPosition[m]),children:s||h.jsx(Pz,{size:m})}),typeof e<"u"?e:h.jsx("span",{"data-testid":"flowbite-button-label",className:ae(S.label),children:o?a:d})]})})})});Mz.displayName="Button";const eP=Object.assign(Mz,{Group:Lz}),jz=({children:e,...t})=>{const r=n=>{const o=n.target.closest('[role="banner"]');o==null||o.remove()};return h.jsx(eP,{onClick:r,...t,children:e})};jz.displayName="Banner.CollapseButton";const Uz=({children:e,...t})=>h.jsx("div",{"data-testid":"flowbite-banner",role:"banner",tabIndex:-1,...t,children:e});Uz.displayName="Banner";Object.assign(Uz,{CollapseButton:jz});const Fz=T.forwardRef(({children:e,className:t,href:r,icon:n,theme:i={},...o},a)=>{const s=typeof r<"u",c=s?"a":"span",l=Re(rt().breadcrumb.item,i);return h.jsxs("li",{className:ae(l.base,t),...o,children:[h.jsx(yz,{"aria-hidden":!0,className:l.chevron,"data-testid":"flowbite-breadcrumb-separator"}),h.jsxs(c,{ref:a,className:l.href[s?"on":"off"],"data-testid":"flowbite-breadcrumb-item",href:r,children:[n&&h.jsx(n,{"aria-hidden":!0,className:l.icon}),e]})]})});Fz.displayName="Breadcrumb.Item";const Vz=({children:e,className:t,theme:r={},...n})=>{const i=Re(rt().breadcrumb.root,r);return h.jsx("nav",{"aria-label":"Breadcrumb",className:ae(i.base,t),...n,children:h.jsx("ol",{className:i.list,children:e})})};Vz.displayName="Breadcrumb";Object.assign(Vz,{Item:Fz});var Bz={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,n(s)))}return o}function n(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return r.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)t.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Bz);var qge=Bz.exports;const Yge=rs(qge);var tP={exports:{}};function $z(e,t=100,r={}){if(typeof e!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof e}\`.`);if(t<0)throw new RangeError("`wait` must not be negative.");const{immediate:n}=typeof r=="boolean"?{immediate:r}:r;let i,o,a,s,c;function l(){const p=i,f=o;return i=void 0,o=void 0,c=e.apply(p,f),c}function d(){const p=Date.now()-s;p<t&&p>=0?a=setTimeout(d,t-p):(a=void 0,n||(c=l()))}const u=function(...p){if(i&&this!==i)throw new Error("Debounced method called with different contexts.");i=this,o=p,s=Date.now();const f=n&&!a;return a||(a=setTimeout(d,t)),f&&(c=l()),c};return u.clear=()=>{a&&(clearTimeout(a),a=void 0)},u.flush=()=>{a&&u.trigger()},u.trigger=()=>{c=l(),u.clear()},u}tP.exports.debounce=$z;tP.exports=$z;var Xge=tP.exports;const Jge=rs(Xge);var Qge=Object.defineProperty,Zge=(e,t,r)=>t in e?Qge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ai=(e,t,r)=>Zge(e,typeof t!="symbol"?t+"":t,r);const e0e=300,t0e=0;class r0e extends T.PureComponent{constructor(t){super(t),ai(this,"container"),ai(this,"scrolling"),ai(this,"started"),ai(this,"pressed"),ai(this,"isMobile",!1),ai(this,"internal"),ai(this,"scrollLeft"),ai(this,"scrollTop"),ai(this,"clientX"),ai(this,"clientY"),ai(this,"onEndScroll",()=>{this.scrolling=!1,!this.pressed&&this.started&&this.processEnd()}),ai(this,"onScroll",()=>{const r=this.container.current;(r.scrollLeft!==this.scrollLeft||r.scrollTop!==this.scrollTop)&&(this.scrolling=!0,this.processScroll(),this.onEndScroll())}),ai(this,"onTouchStart",r=>{const{nativeMobileScroll:n}=this.props;if(this.isDraggable(r.target))if(this.internal=!0,n&&this.scrolling)this.pressed=!0;else{const i=r.touches[0];this.processClick(i.clientX,i.clientY),!n&&this.props.stopPropagation&&r.stopPropagation()}}),ai(this,"onTouchEnd",()=>{const{nativeMobileScroll:r}=this.props;this.pressed&&(this.started&&(!this.scrolling||!r)?this.processEnd():this.pressed=!1,this.forceUpdate())}),ai(this,"onTouchMove",r=>{const{nativeMobileScroll:n}=this.props;if(this.pressed&&(!n||!this.isMobile)){const i=r.touches[0];i&&this.processMove(i.clientX,i.clientY),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation()}}),ai(this,"onMouseDown",r=>{var n,i;this.isDraggable(r.target)&&this.isScrollable()&&(this.internal=!0,((i=(n=this.props)==null?void 0:n.buttons)==null?void 0:i.indexOf(r.button))!==-1&&(this.processClick(r.clientX,r.clientY),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation()))}),ai(this,"onMouseMove",r=>{this.pressed&&(this.processMove(r.clientX,r.clientY),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation())}),ai(this,"onMouseUp",r=>{this.pressed&&(this.started?this.processEnd():(this.internal=!1,this.pressed=!1,this.forceUpdate(),this.props.onClick&&this.props.onClick(r)),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation())}),this.container=Tr.createRef(),this.onEndScroll=Jge(this.onEndScroll,e0e),this.scrolling=!1,this.started=!1,this.pressed=!1,this.internal=!1,this.getRef=this.getRef.bind(this)}componentDidMount(){const{nativeMobileScroll:t}=this.props,r=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),r.addEventListener("touchstart",this.onTouchStart,{passive:!1}),r.addEventListener("mousedown",this.onMouseDown,{passive:!1}),t&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())}componentWillUnmount(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)}getElement(){return this.container.current}isMobileDevice(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1}isDraggable(t){const r=this.props.ignoreElements;if(r){const n=t.closest(r);return n===null||n.contains(this.getElement())}else return!0}isScrollable(){const t=this.container.current;return t&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)}processClick(t,r){const n=this.container.current;this.scrollLeft=n==null?void 0:n.scrollLeft,this.scrollTop=n==null?void 0:n.scrollTop,this.clientX=t,this.clientY=r,this.pressed=!0}processStart(t=!0){const{onStartScroll:r}=this.props;this.started=!0,t&&document.body.classList.add("cursor-grab"),r&&r({external:!this.internal}),this.forceUpdate()}processScroll(){if(this.started){const{onScroll:t}=this.props;t&&t({external:!this.internal})}else this.processStart(!1)}processMove(t,r){const{horizontal:n,vertical:i,activationDistance:o,onScroll:a}=this.props,s=this.container.current;this.started?(n&&(s.scrollLeft-=t-this.clientX),i&&(s.scrollTop-=r-this.clientY),a&&a({external:!this.internal}),this.clientX=t,this.clientY=r,this.scrollLeft=s.scrollLeft,this.scrollTop=s.scrollTop):(n&&Math.abs(t-this.clientX)>o||i&&Math.abs(r-this.clientY)>o)&&(this.clientX=t,this.clientY=r,this.processStart())}processEnd(){const{onEndScroll:t}=this.props;this.container.current&&t&&t({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("cursor-grab"),this.forceUpdate()}getRef(t){[this.container,this.props.innerRef].forEach(r=>{r&&(typeof r=="function"?r(t):r.current=t)})}render(){const{children:t,draggingClassName:r,className:n,style:i,hideScrollbars:o}=this.props;return h.jsx("div",{className:Yge(n,this.pressed&&r,{"!scroll-auto [&>*]:pointer-events-none [&>*]:cursor-grab":this.pressed,"overflow-auto":this.isMobile,"overflow-hidden !overflow-x-hidden [overflow:-moz-scrollbars-none] [scrollbar-width:none]":o,"[&::-webkit-scrollbar]:[-webkit-appearance:none !important] [&::-webkit-scrollbar]:!hidden [&::-webkit-scrollbar]:!h-0 [&::-webkit-scrollbar]:!w-0 [&::-webkit-scrollbar]:!bg-transparent":o}),style:i,ref:this.getRef,onScroll:this.onScroll,children:t})}}ai(r0e,"defaultProps",{nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},buttons:[t0e]});const n0e=T.forwardRef(({className:e,color:t="default",theme:r={},...n},i)=>{const o=Re(rt().checkbox,r);return h.jsx("input",{ref:i,type:"checkbox",className:ae(o.root.base,o.root.color[t],e),...n})});n0e.displayName="Checkbox";function ES(){return typeof window<"u"}function jd(e){return Hz(e)?(e.nodeName||"").toLowerCase():"#document"}function jo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function wc(e){var t;return(t=(Hz(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Hz(e){return ES()?e instanceof Node||e instanceof jo(e).Node:!1}function Kr(e){return ES()?e instanceof Element||e instanceof jo(e).Element:!1}function Gn(e){return ES()?e instanceof HTMLElement||e instanceof jo(e).HTMLElement:!1}function VA(e){return!ES()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof jo(e).ShadowRoot}function Cy(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=ts(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function i0e(e){return["table","td","th"].includes(jd(e))}function _S(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function rP(e){const t=nP(),r=Kr(e)?ts(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function o0e(e){let t=ul(e);for(;Gn(t)&&!Id(t);){if(rP(t))return t;if(_S(t))return null;t=ul(t)}return null}function nP(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Id(e){return["html","body","#document"].includes(jd(e))}function ts(e){return jo(e).getComputedStyle(e)}function bS(e){return Kr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ul(e){if(jd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||VA(e)&&e.host||wc(e);return VA(t)?t.host:t}function Wz(e){const t=ul(e);return Id(t)?e.ownerDocument?e.ownerDocument.body:e.body:Gn(t)&&Cy(t)?t:Wz(t)}function gd(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=Wz(e),o=i===((n=e.ownerDocument)==null?void 0:n.body),a=jo(i);if(o){const s=BA(a);return t.concat(a,a.visualViewport||[],Cy(i)?i:[],s&&r?gd(s):[])}return t.concat(i,gd(i,[],r))}function BA(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Cs(e){let t=e.activeElement;for(;((r=t)==null||(r=r.shadowRoot)==null?void 0:r.activeElement)!=null;){var r;t=t.shadowRoot.activeElement}return t}function $n(e,t){if(!e||!t)return!1;const r=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&VA(r)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function iP(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Gz(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:r,version:n}=t;return r+"/"+n}).join(" "):navigator.userAgent}function zz(e){return e.mozInputSource===0&&e.isTrusted?!0:$A()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function oP(e){return a0e()?!1:!$A()&&e.width===0&&e.height===0||$A()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function aP(){return/apple/i.test(navigator.vendor)}function $A(){const e=/android/i;return e.test(iP())||e.test(Gz())}function Kz(){return iP().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function a0e(){return Gz().includes("jsdom/")}function N0(e,t){const r=["mouse","pen"];return t||r.push("",void 0),r.includes(e)}function s0e(e){return"nativeEvent"in e}function c0e(e){return e.matches("html,body")}function vi(e){return(e==null?void 0:e.ownerDocument)||document}function EC(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const r=e;return r.target!=null&&t.contains(r.target)}function qc(e){return"composedPath"in e?e.composedPath()[0]:e.target}const l0e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function sP(e){return Gn(e)&&e.matches(l0e)}function Pi(e){e.preventDefault(),e.stopPropagation()}function qz(e){return e?e.getAttribute("role")==="combobox"&&sP(e):!1}const d0e=["top","right","bottom","left"],bj=["start","end"],wj=d0e.reduce((e,t)=>e.concat(t,t+"-"+bj[0],t+"-"+bj[1]),[]),vf=Math.min,ju=Math.max,Rb=Math.round,Tp=Math.floor,pc=e=>({x:e,y:e}),u0e={left:"right",right:"left",bottom:"top",top:"bottom"},h0e={start:"end",end:"start"};function HA(e,t,r){return ju(e,vf(t,r))}function tm(e,t){return typeof e=="function"?e(t):e}function hl(e){return e.split("-")[0]}function fc(e){return e.split("-")[1]}function Yz(e){return e==="x"?"y":"x"}function cP(e){return e==="y"?"height":"width"}function Ef(e){return["top","bottom"].includes(hl(e))?"y":"x"}function lP(e){return Yz(Ef(e))}function Xz(e,t,r){r===void 0&&(r=!1);const n=fc(e),i=lP(e),o=cP(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=xb(a)),[a,xb(a)]}function p0e(e){const t=xb(e);return[Ib(e),t,Ib(t)]}function Ib(e){return e.replace(/start|end/g,t=>h0e[t])}function f0e(e,t,r){const n=["left","right"],i=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?o:a;default:return[]}}function m0e(e,t,r,n){const i=fc(e);let o=f0e(hl(e),r==="start",n);return i&&(o=o.map(a=>a+"-"+i),t&&(o=o.concat(o.map(Ib)))),o}function xb(e){return e.replace(/left|right|bottom|top/g,t=>u0e[t])}function g0e(e){return{top:0,right:0,bottom:0,left:0,...e}}function Jz(e){return typeof e!="number"?g0e(e):{top:e,right:e,bottom:e,left:e}}function Ab(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var y0e=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Nb=y0e.join(","),Qz=typeof Element>"u",_f=Qz?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ob=!Qz&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},kb=function e(t,r){var n;r===void 0&&(r=!0);var i=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),o=i===""||i==="true",a=o||r&&t&&e(t.parentNode);return a},v0e=function(t){var r,n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return n===""||n==="true"},E0e=function(t,r,n){if(kb(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(Nb));return r&&_f.call(t,Nb)&&i.unshift(t),i=i.filter(n),i},_0e=function e(t,r,n){for(var i=[],o=Array.from(t);o.length;){var a=o.shift();if(!kb(a,!1))if(a.tagName==="SLOT"){var s=a.assignedElements(),c=s.length?s:a.children,l=e(c,!0,n);n.flatten?i.push.apply(i,l):i.push({scopeParent:a,candidates:l})}else{var d=_f.call(a,Nb);d&&n.filter(a)&&(r||!t.includes(a))&&i.push(a);var u=a.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(a),p=!kb(u,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(a));if(u&&p){var f=e(u===!0?a.children:u.children,!0,n);n.flatten?i.push.apply(i,f):i.push({scopeParent:a,candidates:f})}else o.unshift.apply(o,a.children)}}return i},Zz=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},e9=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||v0e(t))&&!Zz(t)?0:t.tabIndex},b0e=function(t,r){var n=e9(t);return n<0&&r&&!Zz(t)?0:n},w0e=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},t9=function(t){return t.tagName==="INPUT"},S0e=function(t){return t9(t)&&t.type==="hidden"},T0e=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},C0e=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},R0e=function(t){if(!t.name)return!0;var r=t.form||Ob(t),n=function(s){return r.querySelectorAll('input[type="radio"][name="'+s+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=n(window.CSS.escape(t.name));else try{i=n(t.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var o=C0e(i,t.form);return!o||o===t},I0e=function(t){return t9(t)&&t.type==="radio"},x0e=function(t){return I0e(t)&&!R0e(t)},A0e=function(t){var r,n=t&&Ob(t),i=(r=n)===null||r===void 0?void 0:r.host,o=!1;if(n&&n!==t){var a,s,c;for(o=!!((a=i)!==null&&a!==void 0&&(s=a.ownerDocument)!==null&&s!==void 0&&s.contains(i)||t!=null&&(c=t.ownerDocument)!==null&&c!==void 0&&c.contains(t));!o&&i;){var l,d,u;n=Ob(i),i=(l=n)===null||l===void 0?void 0:l.host,o=!!((d=i)!==null&&d!==void 0&&(u=d.ownerDocument)!==null&&u!==void 0&&u.contains(i))}}return o},Sj=function(t){var r=t.getBoundingClientRect(),n=r.width,i=r.height;return n===0&&i===0},N0e=function(t,r){var n=r.displayCheck,i=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=_f.call(t,"details>summary:first-of-type"),a=o?t.parentElement:t;if(_f.call(a,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof i=="function"){for(var s=t;t;){var c=t.parentElement,l=Ob(t);if(c&&!c.shadowRoot&&i(c)===!0)return Sj(t);t.assignedSlot?t=t.assignedSlot:!c&&l!==t.ownerDocument?t=l.host:t=c}t=s}if(A0e(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return Sj(t);return!1},O0e=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var i=r.children.item(n);if(i.tagName==="LEGEND")return _f.call(r,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}r=r.parentElement}return!1},k0e=function(t,r){return!(r.disabled||kb(r)||S0e(r)||N0e(r,t)||T0e(r)||O0e(r))},WA=function(t,r){return!(x0e(r)||e9(r)<0||!k0e(t,r))},P0e=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},D0e=function e(t){var r=[],n=[];return t.forEach(function(i,o){var a=!!i.scopeParent,s=a?i.scopeParent:i,c=b0e(s,a),l=a?e(i.candidates):s;c===0?a?r.push.apply(r,l):r.push(s):n.push({documentOrder:o,tabIndex:c,item:i,isScope:a,content:l})}),n.sort(w0e).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(r)},O0=function(t,r){r=r||{};var n;return r.getShadowRoot?n=_0e([t],r.includeContainer,{filter:WA.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:P0e}):n=E0e(t,r.includeContainer,WA.bind(null,r)),D0e(n)},L0e=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return _f.call(t,Nb)===!1?!1:WA(r,t)};function Tj(e,t,r){let{reference:n,floating:i}=e;const o=Ef(t),a=lP(t),s=cP(a),c=hl(t),l=o==="y",d=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2,p=n[s]/2-i[s]/2;let f;switch(c){case"top":f={x:d,y:n.y-i.height};break;case"bottom":f={x:d,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:u};break;case"left":f={x:n.x-i.width,y:u};break;default:f={x:n.x,y:n.y}}switch(fc(t)){case"start":f[a]-=p*(r&&l?-1:1);break;case"end":f[a]+=p*(r&&l?-1:1);break}return f}const M0e=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:a}=r,s=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let l=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:u}=Tj(l,n,c),p=n,f={},m=0;for(let g=0;g<s.length;g++){const{name:y,fn:v}=s[g],{x:E,y:w,data:S,reset:x}=await v({x:d,y:u,initialPlacement:n,placement:p,strategy:i,middlewareData:f,rects:l,platform:a,elements:{reference:e,floating:t}});d=E??d,u=w??u,f={...f,[y]:{...f[y],...S}},x&&m<=50&&(m++,typeof x=="object"&&(x.placement&&(p=x.placement),x.rects&&(l=x.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:d,y:u}=Tj(l,p,c)),g=-1)}return{x:d,y:u,placement:p,strategy:i,middlewareData:f}};async function dP(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:o,rects:a,elements:s,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:p=!1,padding:f=0}=tm(t,e),m=Jz(f),y=s[p?u==="floating"?"reference":"floating":u],v=Ab(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(y)))==null||r?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:l,rootBoundary:d,strategy:c})),E=u==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),S=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},x=Ab(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:E,offsetParent:w,strategy:c}):E);return{top:(v.top-x.top+m.top)/S.y,bottom:(x.bottom-v.bottom+m.bottom)/S.y,left:(v.left-x.left+m.left)/S.x,right:(x.right-v.right+m.right)/S.x}}const j0e=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:o,platform:a,elements:s,middlewareData:c}=t,{element:l,padding:d=0}=tm(e,t)||{};if(l==null)return{};const u=Jz(d),p={x:r,y:n},f=lP(i),m=cP(f),g=await a.getDimensions(l),y=f==="y",v=y?"top":"left",E=y?"bottom":"right",w=y?"clientHeight":"clientWidth",S=o.reference[m]+o.reference[f]-p[f]-o.floating[m],x=p[f]-o.reference[f],O=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let L=O?O[w]:0;(!L||!await(a.isElement==null?void 0:a.isElement(O)))&&(L=s.floating[w]||o.floating[m]);const j=S/2-x/2,W=L/2-g[m]/2-1,V=vf(u[v],W),Y=vf(u[E],W),Z=V,te=L-g[m]-Y,H=L/2-g[m]/2+j,$=HA(Z,H,te),K=!c.arrow&&fc(i)!=null&&H!==$&&o.reference[m]/2-(H<Z?V:Y)-g[m]/2<0,A=K?H<Z?H-Z:H-te:0;return{[f]:p[f]+A,data:{[f]:$,centerOffset:H-$-A,...K&&{alignmentOffset:A}},reset:K}}});function U0e(e,t,r){return(e?[...r.filter(i=>fc(i)===e),...r.filter(i=>fc(i)!==e)]:r.filter(i=>hl(i)===i)).filter(i=>e?fc(i)===e||(t?Ib(i)!==i:!1):!0)}const F0e=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var r,n,i;const{rects:o,middlewareData:a,placement:s,platform:c,elements:l}=t,{crossAxis:d=!1,alignment:u,allowedPlacements:p=wj,autoAlignment:f=!0,...m}=tm(e,t),g=u!==void 0||p===wj?U0e(u||null,f,p):p,y=await dP(t,m),v=((r=a.autoPlacement)==null?void 0:r.index)||0,E=g[v];if(E==null)return{};const w=Xz(E,o,await(c.isRTL==null?void 0:c.isRTL(l.floating)));if(s!==E)return{reset:{placement:g[0]}};const S=[y[hl(E)],y[w[0]],y[w[1]]],x=[...((n=a.autoPlacement)==null?void 0:n.overflows)||[],{placement:E,overflows:S}],O=g[v+1];if(O)return{data:{index:v+1,overflows:x},reset:{placement:O}};const L=x.map(V=>{const Y=fc(V.placement);return[V.placement,Y&&d?V.overflows.slice(0,2).reduce((Z,te)=>Z+te,0):V.overflows[0],V.overflows]}).sort((V,Y)=>V[1]-Y[1]),W=((i=L.filter(V=>V[2].slice(0,fc(V[0])?2:3).every(Y=>Y<=0))[0])==null?void 0:i[0])||L[0][0];return W!==s?{data:{index:v+1,overflows:x},reset:{placement:W}}:{}}}},V0e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=tm(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const v=hl(i),E=Ef(s),w=hl(s)===s,S=await(c.isRTL==null?void 0:c.isRTL(l.floating)),x=p||(w||!g?[xb(s)]:p0e(s)),O=m!=="none";!p&&O&&x.push(...m0e(s,g,m,S));const L=[s,...x],j=await dP(t,y),W=[];let V=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&W.push(j[v]),u){const H=Xz(i,a,S);W.push(j[H[0]],j[H[1]])}if(V=[...V,{placement:i,overflows:W}],!W.every(H=>H<=0)){var Y,Z;const H=(((Y=o.flip)==null?void 0:Y.index)||0)+1,$=L[H];if($)return{data:{index:H,overflows:V},reset:{placement:$}};let K=(Z=V.filter(A=>A.overflows[0]<=0).sort((A,N)=>A.overflows[1]-N.overflows[1])[0])==null?void 0:Z.placement;if(!K)switch(f){case"bestFit":{var te;const A=(te=V.filter(N=>{if(O){const F=Ef(N.placement);return F===E||F==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(F=>F>0).reduce((F,P)=>F+P,0)]).sort((N,F)=>N[1]-F[1])[0])==null?void 0:te[0];A&&(K=A);break}case"initialPlacement":K=s;break}if(i!==K)return{reset:{placement:K}}}return{}}}};async function B0e(e,t){const{placement:r,platform:n,elements:i}=e,o=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=hl(r),s=fc(r),c=Ef(r)==="y",l=["left","top"].includes(a)?-1:1,d=o&&c?-1:1,u=tm(t,e);let{mainAxis:p,crossAxis:f,alignmentAxis:m}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return s&&typeof m=="number"&&(f=s==="end"?m*-1:m),c?{x:f*d,y:p*l}:{x:p*l,y:f*d}}const $0e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:o,placement:a,middlewareData:s}=t,c=await B0e(t,e);return a===((r=s.offset)==null?void 0:r.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:a}}}}},H0e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:y=>{let{x:v,y:E}=y;return{x:v,y:E}}},...c}=tm(e,t),l={x:r,y:n},d=await dP(t,c),u=Ef(hl(i)),p=Yz(u);let f=l[p],m=l[u];if(o){const y=p==="y"?"top":"left",v=p==="y"?"bottom":"right",E=f+d[y],w=f-d[v];f=HA(E,f,w)}if(a){const y=u==="y"?"top":"left",v=u==="y"?"bottom":"right",E=m+d[y],w=m-d[v];m=HA(E,m,w)}const g=s.fn({...t,[p]:f,[u]:m});return{...g,data:{x:g.x-r,y:g.y-n}}}}};function r9(e){const t=ts(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=Gn(e),o=i?e.offsetWidth:r,a=i?e.offsetHeight:n,s=Rb(r)!==o||Rb(n)!==a;return s&&(r=o,n=a),{width:r,height:n,$:s}}function uP(e){return Kr(e)?e:e.contextElement}function Kp(e){const t=uP(e);if(!Gn(t))return pc(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:o}=r9(t);let a=(o?Rb(r.width):r.width)/n,s=(o?Rb(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const W0e=pc(0);function n9(e){const t=jo(e);return!nP()||!t.visualViewport?W0e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function G0e(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==jo(e)?!1:t}function eh(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=uP(e);let a=pc(1);t&&(n?Kr(n)&&(a=Kp(n)):a=Kp(e));const s=G0e(o,r,n)?n9(o):pc(0);let c=(i.left+s.x)/a.x,l=(i.top+s.y)/a.y,d=i.width/a.x,u=i.height/a.y;if(o){const p=jo(o),f=n&&Kr(n)?jo(n):n;let m=p,g=BA(m);for(;g&&n&&f!==m;){const y=Kp(g),v=g.getBoundingClientRect(),E=ts(g),w=v.left+(g.clientLeft+parseFloat(E.paddingLeft))*y.x,S=v.top+(g.clientTop+parseFloat(E.paddingTop))*y.y;c*=y.x,l*=y.y,d*=y.x,u*=y.y,c+=w,l+=S,m=jo(g),g=BA(m)}}return Ab({width:d,height:u,x:c,y:l})}function hP(e,t){const r=bS(e).scrollLeft;return t?t.left+r:eh(wc(e)).left+r}function i9(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-(r?0:hP(e,n)),o=n.top+t.scrollTop;return{x:i,y:o}}function z0e(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const o=i==="fixed",a=wc(n),s=t?_S(t.floating):!1;if(n===a||s&&o)return r;let c={scrollLeft:0,scrollTop:0},l=pc(1);const d=pc(0),u=Gn(n);if((u||!u&&!o)&&((jd(n)!=="body"||Cy(a))&&(c=bS(n)),Gn(n))){const f=eh(n);l=Kp(n),d.x=f.x+n.clientLeft,d.y=f.y+n.clientTop}const p=a&&!u&&!o?i9(a,c,!0):pc(0);return{width:r.width*l.x,height:r.height*l.y,x:r.x*l.x-c.scrollLeft*l.x+d.x+p.x,y:r.y*l.y-c.scrollTop*l.y+d.y+p.y}}function K0e(e){return Array.from(e.getClientRects())}function q0e(e){const t=wc(e),r=bS(e),n=e.ownerDocument.body,i=ju(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=ju(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+hP(e);const s=-r.scrollTop;return ts(n).direction==="rtl"&&(a+=ju(t.clientWidth,n.clientWidth)-i),{width:i,height:o,x:a,y:s}}function Y0e(e,t){const r=jo(e),n=wc(e),i=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,s=0,c=0;if(i){o=i.width,a=i.height;const l=nP();(!l||l&&t==="fixed")&&(s=i.offsetLeft,c=i.offsetTop)}return{width:o,height:a,x:s,y:c}}function X0e(e,t){const r=eh(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,o=Gn(e)?Kp(e):pc(1),a=e.clientWidth*o.x,s=e.clientHeight*o.y,c=i*o.x,l=n*o.y;return{width:a,height:s,x:c,y:l}}function Cj(e,t,r){let n;if(t==="viewport")n=Y0e(e,r);else if(t==="document")n=q0e(wc(e));else if(Kr(t))n=X0e(t,r);else{const i=n9(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Ab(n)}function o9(e,t){const r=ul(e);return r===t||!Kr(r)||Id(r)?!1:ts(r).position==="fixed"||o9(r,t)}function J0e(e,t){const r=t.get(e);if(r)return r;let n=gd(e,[],!1).filter(s=>Kr(s)&&jd(s)!=="body"),i=null;const o=ts(e).position==="fixed";let a=o?ul(e):e;for(;Kr(a)&&!Id(a);){const s=ts(a),c=rP(a);!c&&s.position==="fixed"&&(i=null),(o?!c&&!i:!c&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Cy(a)&&!c&&o9(e,a))?n=n.filter(d=>d!==a):i=s,a=ul(a)}return t.set(e,n),n}function Q0e(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const a=[...r==="clippingAncestors"?_S(t)?[]:J0e(t,this._c):[].concat(r),n],s=a[0],c=a.reduce((l,d)=>{const u=Cj(t,d,i);return l.top=ju(u.top,l.top),l.right=vf(u.right,l.right),l.bottom=vf(u.bottom,l.bottom),l.left=ju(u.left,l.left),l},Cj(t,s,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Z0e(e){const{width:t,height:r}=r9(e);return{width:t,height:r}}function eye(e,t,r){const n=Gn(t),i=wc(t),o=r==="fixed",a=eh(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const c=pc(0);if(n||!n&&!o)if((jd(t)!=="body"||Cy(i))&&(s=bS(t)),n){const p=eh(t,!0,o,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else i&&(c.x=hP(i));const l=i&&!n&&!o?i9(i,s):pc(0),d=a.left+s.scrollLeft-c.x-l.x,u=a.top+s.scrollTop-c.y-l.y;return{x:d,y:u,width:a.width,height:a.height}}function _C(e){return ts(e).position==="static"}function Rj(e,t){if(!Gn(e)||ts(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return wc(e)===r&&(r=r.ownerDocument.body),r}function a9(e,t){const r=jo(e);if(_S(e))return r;if(!Gn(e)){let i=ul(e);for(;i&&!Id(i);){if(Kr(i)&&!_C(i))return i;i=ul(i)}return r}let n=Rj(e,t);for(;n&&i0e(n)&&_C(n);)n=Rj(n,t);return n&&Id(n)&&_C(n)&&!rP(n)?r:n||o0e(e)||r}const tye=async function(e){const t=this.getOffsetParent||a9,r=this.getDimensions,n=await r(e.floating);return{reference:eye(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function rye(e){return ts(e).direction==="rtl"}const nye={convertOffsetParentRelativeRectToViewportRelativeRect:z0e,getDocumentElement:wc,getClippingRect:Q0e,getOffsetParent:a9,getElementRects:tye,getClientRects:K0e,getDimensions:Z0e,getScale:Kp,isElement:Kr,isRTL:rye};function iye(e,t){let r=null,n;const i=wc(e);function o(){var s;clearTimeout(n),(s=r)==null||s.disconnect(),r=null}function a(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),o();const{left:l,top:d,width:u,height:p}=e.getBoundingClientRect();if(s||t(),!u||!p)return;const f=Tp(d),m=Tp(i.clientWidth-(l+u)),g=Tp(i.clientHeight-(d+p)),y=Tp(l),E={rootMargin:-f+"px "+-m+"px "+-g+"px "+-y+"px",threshold:ju(0,vf(1,c))||1};let w=!0;function S(x){const O=x[0].intersectionRatio;if(O!==c){if(!w)return a();O?a(!1,O):n=setTimeout(()=>{a(!1,1e-7)},1e3)}w=!1}try{r=new IntersectionObserver(S,{...E,root:i.ownerDocument})}catch{r=new IntersectionObserver(S,E)}r.observe(e)}return a(!0),o}function s9(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,l=uP(e),d=i||o?[...l?gd(l):[],...gd(t)]:[];d.forEach(v=>{i&&v.addEventListener("scroll",r,{passive:!0}),o&&v.addEventListener("resize",r)});const u=l&&s?iye(l,r):null;let p=-1,f=null;a&&(f=new ResizeObserver(v=>{let[E]=v;E&&E.target===l&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(t)})),r()}),l&&!c&&f.observe(l),f.observe(t));let m,g=c?eh(e):null;c&&y();function y(){const v=eh(e);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&r(),g=v,m=requestAnimationFrame(y)}return r(),()=>{var v;d.forEach(E=>{i&&E.removeEventListener("scroll",r),o&&E.removeEventListener("resize",r)}),u==null||u(),(v=f)==null||v.disconnect(),f=null,c&&cancelAnimationFrame(m)}}const oye=$0e,aye=F0e,sye=H0e,cye=V0e,Ij=j0e,lye=(e,t,r)=>{const n=new Map,i={platform:nye,...r},o={...i.platform,_c:n};return M0e(e,t,{...i,platform:o})};var e_=typeof document<"u"?T.useLayoutEffect:T.useEffect;function Pb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Pb(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const o=i[n];if(!(o==="_owner"&&e.$$typeof)&&!Pb(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function c9(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function xj(e,t){const r=c9(e);return Math.round(t*r)/r}function bC(e){const t=T.useRef(e);return e_(()=>{t.current=e}),t}function dye(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:c,open:l}=e,[d,u]=T.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=T.useState(n);Pb(p,n)||f(n);const[m,g]=T.useState(null),[y,v]=T.useState(null),E=T.useCallback(N=>{N!==O.current&&(O.current=N,g(N))},[]),w=T.useCallback(N=>{N!==L.current&&(L.current=N,v(N))},[]),S=o||m,x=a||y,O=T.useRef(null),L=T.useRef(null),j=T.useRef(d),W=c!=null,V=bC(c),Y=bC(i),Z=bC(l),te=T.useCallback(()=>{if(!O.current||!L.current)return;const N={placement:t,strategy:r,middleware:p};Y.current&&(N.platform=Y.current),lye(O.current,L.current,N).then(F=>{const P={...F,isPositioned:Z.current!==!1};H.current&&!Pb(j.current,P)&&(j.current=P,Lw.flushSync(()=>{u(P)}))})},[p,t,r,Y,Z]);e_(()=>{l===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,u(N=>({...N,isPositioned:!1})))},[l]);const H=T.useRef(!1);e_(()=>(H.current=!0,()=>{H.current=!1}),[]),e_(()=>{if(S&&(O.current=S),x&&(L.current=x),S&&x){if(V.current)return V.current(S,x,te);te()}},[S,x,te,V,W]);const $=T.useMemo(()=>({reference:O,floating:L,setReference:E,setFloating:w}),[E,w]),K=T.useMemo(()=>({reference:S,floating:x}),[S,x]),A=T.useMemo(()=>{const N={position:r,left:0,top:0};if(!K.floating)return N;const F=xj(K.floating,d.x),P=xj(K.floating,d.y);return s?{...N,transform:"translate("+F+"px, "+P+"px)",...c9(K.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:F,top:P}},[r,s,K.floating,d.x,d.y]);return T.useMemo(()=>({...d,update:te,refs:$,elements:K,floatingStyles:A}),[d,te,$,K,A])}const uye=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Ij({element:n.current,padding:i}).fn(r):{}:n?Ij({element:n,padding:i}).fn(r):{}}}},hye=(e,t)=>({...oye(e),options:[e,t]}),pye=(e,t)=>({...sye(e),options:[e,t]}),fye=(e,t)=>({...cye(e),options:[e,t]}),mye=(e,t)=>({...aye(e),options:[e,t]}),gye=(e,t)=>({...uye(e),options:[e,t]});function l9(e){return T.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})},e)}const d9={...l$},yye=d9.useInsertionEffect,vye=yye||(e=>e());function Li(e){const t=T.useRef(()=>{});return vye(()=>{t.current=e}),T.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current==null?void 0:t.current(...n)},[])}const pP="ArrowUp",Ry="ArrowDown",bf="ArrowLeft",rm="ArrowRight";function Ov(e,t,r){return Math.floor(e/t)!==r}function Ug(e,t){return t<0||t>=e.current.length}function wC(e,t){return Ki(e,{disabledIndices:t})}function Aj(e,t){return Ki(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function Ki(e,t){let{startingIndex:r=-1,decrement:n=!1,disabledIndices:i,amount:o=1}=t===void 0?{}:t;const a=e.current;let s=r;do s+=n?-o:o;while(s>=0&&s<=a.length-1&&t_(a,s,i));return s}function Eye(e,t){let{event:r,orientation:n,loop:i,cols:o,disabledIndices:a,minIndex:s,maxIndex:c,prevIndex:l,stopEvent:d=!1}=t,u=l;if(r.key===pP){if(d&&Pi(r),l===-1)u=c;else if(u=Ki(e,{startingIndex:u,amount:o,decrement:!0,disabledIndices:a}),i&&(l-o<s||u<0)){const p=l%o,f=c%o,m=c-(f-p);f===p?u=c:u=f>p?m:m-o}Ug(e,u)&&(u=l)}if(r.key===Ry&&(d&&Pi(r),l===-1?u=s:(u=Ki(e,{startingIndex:l,amount:o,disabledIndices:a}),i&&l+o>c&&(u=Ki(e,{startingIndex:l%o-o,amount:o,disabledIndices:a}))),Ug(e,u)&&(u=l)),n==="both"){const p=Tp(l/o);r.key===rm&&(d&&Pi(r),l%o!==o-1?(u=Ki(e,{startingIndex:l,disabledIndices:a}),i&&Ov(u,o,p)&&(u=Ki(e,{startingIndex:l-l%o-1,disabledIndices:a}))):i&&(u=Ki(e,{startingIndex:l-l%o-1,disabledIndices:a})),Ov(u,o,p)&&(u=l)),r.key===bf&&(d&&Pi(r),l%o!==0?(u=Ki(e,{startingIndex:l,decrement:!0,disabledIndices:a}),i&&Ov(u,o,p)&&(u=Ki(e,{startingIndex:l+(o-l%o),decrement:!0,disabledIndices:a}))):i&&(u=Ki(e,{startingIndex:l+(o-l%o),decrement:!0,disabledIndices:a})),Ov(u,o,p)&&(u=l));const f=Tp(c/o)===p;Ug(e,u)&&(i&&f?u=r.key===bf?c:Ki(e,{startingIndex:l-l%o-1,disabledIndices:a}):u=l)}return u}function _ye(e,t,r){const n=[];let i=0;return e.forEach((o,a)=>{let{width:s,height:c}=o,l=!1;for(r&&(i=0);!l;){const d=[];for(let u=0;u<s;u++)for(let p=0;p<c;p++)d.push(i+u+p*t);i%t+s<=t&&d.every(u=>n[u]==null)?(d.forEach(u=>{n[u]=a}),l=!0):i++}}),[...n]}function bye(e,t,r,n,i){if(e===-1)return-1;const o=r.indexOf(e),a=t[e];switch(i){case"tl":return o;case"tr":return a?o+a.width-1:o;case"bl":return a?o+(a.height-1)*n:o;case"br":return r.lastIndexOf(e)}}function wye(e,t){return t.flatMap((r,n)=>e.includes(r)?[n]:[])}function t_(e,t,r){if(r)return r.includes(t);const n=e[t];return n==null||n.hasAttribute("disabled")||n.getAttribute("aria-disabled")==="true"}let Nj=0;function Hl(e,t){t===void 0&&(t={});const{preventScroll:r=!1,cancelPrevious:n=!0,sync:i=!1}=t;n&&cancelAnimationFrame(Nj);const o=()=>e==null?void 0:e.focus({preventScroll:r});i?o():Nj=requestAnimationFrame(o)}var Br=typeof document<"u"?T.useLayoutEffect:T.useEffect;function Sye(e,t){const r=e.compareDocumentPosition(t);return r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS?1:0}function Tye(e,t){if(e.size!==t.size)return!1;for(const[r,n]of e.entries())if(n!==t.get(r))return!1;return!0}const u9=T.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function Cye(e){const{children:t,elementsRef:r,labelsRef:n}=e,[i,o]=T.useState(()=>new Map),a=T.useCallback(c=>{o(l=>new Map(l).set(c,null))},[]),s=T.useCallback(c=>{o(l=>{const d=new Map(l);return d.delete(c),d})},[]);return Br(()=>{const c=new Map(i);Array.from(c.keys()).sort(Sye).forEach((d,u)=>{c.set(d,u)}),Tye(i,c)||o(c)},[i]),T.createElement(u9.Provider,{value:T.useMemo(()=>({register:a,unregister:s,map:i,elementsRef:r,labelsRef:n}),[a,s,i,r,n])},t)}function Rye(e){e===void 0&&(e={});const{label:t}=e,{register:r,unregister:n,map:i,elementsRef:o,labelsRef:a}=T.useContext(u9),[s,c]=T.useState(null),l=T.useRef(null),d=T.useCallback(u=>{if(l.current=u,s!==null&&(o.current[s]=u,a)){var p;const f=t!==void 0;a.current[s]=f?t:(p=u==null?void 0:u.textContent)!=null?p:null}},[s,o,a,t]);return Br(()=>{const u=l.current;if(u)return r(u),()=>{n(u)}},[r,n]),Br(()=>{const u=l.current?i.get(l.current):null;u!=null&&c(u)},[i]),T.useMemo(()=>({ref:d,index:s??-1}),[s,d])}function k0(){return k0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k0.apply(this,arguments)}let Oj=!1,Iye=0;const kj=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Iye++;function xye(){const[e,t]=T.useState(()=>Oj?kj():void 0);return Br(()=>{e==null&&t(kj())},[]),T.useEffect(()=>{Oj=!0},[]),e}const Aye=d9.useId,wS=Aye||xye;function Nye(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(i=>i(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,((n=e.get(t))==null?void 0:n.filter(i=>i!==r))||[])}}}const Oye=T.createContext(null),kye=T.createContext(null),SS=()=>{var e;return((e=T.useContext(Oye))==null?void 0:e.id)||null},Iy=()=>T.useContext(kye);function xd(e){return"data-floating-ui-"+e}function ra(e){const t=T.useRef(e);return Br(()=>{t.current=e}),t}const Pj=xd("safe-polygon");function SC(e,t,r){return r&&!N0(r)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Pye(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,dataRef:i,events:o,elements:a}=e,{enabled:s=!0,delay:c=0,handleClose:l=null,mouseOnly:d=!1,restMs:u=0,move:p=!0}=t,f=Iy(),m=SS(),g=ra(l),y=ra(c),v=ra(r),E=T.useRef(),w=T.useRef(-1),S=T.useRef(),x=T.useRef(-1),O=T.useRef(!0),L=T.useRef(!1),j=T.useRef(()=>{}),W=T.useCallback(()=>{var $;const K=($=i.current.openEvent)==null?void 0:$.type;return(K==null?void 0:K.includes("mouse"))&&K!=="mousedown"},[i]);T.useEffect(()=>{if(!s)return;function $(K){let{open:A}=K;A||(clearTimeout(w.current),clearTimeout(x.current),O.current=!0)}return o.on("openchange",$),()=>{o.off("openchange",$)}},[s,o]),T.useEffect(()=>{if(!s||!g.current||!r)return;function $(A){W()&&n(!1,A,"hover")}const K=vi(a.floating).documentElement;return K.addEventListener("mouseleave",$),()=>{K.removeEventListener("mouseleave",$)}},[a.floating,r,n,s,g,W]);const V=T.useCallback(function($,K,A){K===void 0&&(K=!0),A===void 0&&(A="hover");const N=SC(y.current,"close",E.current);N&&!S.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>n(!1,$,A),N)):K&&(clearTimeout(w.current),n(!1,$,A))},[y,n]),Y=Li(()=>{j.current(),S.current=void 0}),Z=Li(()=>{if(L.current){const $=vi(a.floating).body;$.style.pointerEvents="",$.removeAttribute(Pj),L.current=!1}});T.useEffect(()=>{if(!s)return;function $(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function K(P){if(clearTimeout(w.current),O.current=!1,d&&!N0(E.current)||u>0&&!SC(y.current,"open"))return;const _=SC(y.current,"open",E.current);_?w.current=window.setTimeout(()=>{v.current||n(!0,P,"hover")},_):n(!0,P,"hover")}function A(P){if($())return;j.current();const _=vi(a.floating);if(clearTimeout(x.current),g.current&&i.current.floatingContext){r||clearTimeout(w.current),S.current=g.current({...i.current.floatingContext,tree:f,x:P.clientX,y:P.clientY,onClose(){Z(),Y(),V(P,!0,"safe-polygon")}});const k=S.current;_.addEventListener("mousemove",k),j.current=()=>{_.removeEventListener("mousemove",k)};return}(E.current==="touch"?!$n(a.floating,P.relatedTarget):!0)&&V(P)}function N(P){$()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:f,x:P.clientX,y:P.clientY,onClose(){Z(),Y(),V(P)}})(P))}if(Kr(a.domReference)){var F;const P=a.domReference;return r&&P.addEventListener("mouseleave",N),(F=a.floating)==null||F.addEventListener("mouseleave",N),p&&P.addEventListener("mousemove",K,{once:!0}),P.addEventListener("mouseenter",K),P.addEventListener("mouseleave",A),()=>{var _;r&&P.removeEventListener("mouseleave",N),(_=a.floating)==null||_.removeEventListener("mouseleave",N),p&&P.removeEventListener("mousemove",K),P.removeEventListener("mouseenter",K),P.removeEventListener("mouseleave",A)}}},[a,s,e,d,u,p,V,Y,Z,n,r,v,f,y,g,i]),Br(()=>{var $;if(s&&r&&($=g.current)!=null&&$.__options.blockPointerEvents&&W()){const A=vi(a.floating).body;A.setAttribute(Pj,""),A.style.pointerEvents="none",L.current=!0;const N=a.floating;if(Kr(a.domReference)&&N){var K;const F=a.domReference,P=f==null||(K=f.nodesRef.current.find(_=>_.id===m))==null||(K=K.context)==null?void 0:K.elements.floating;return P&&(P.style.pointerEvents=""),F.style.pointerEvents="auto",N.style.pointerEvents="auto",()=>{F.style.pointerEvents="",N.style.pointerEvents=""}}}},[s,r,m,a,f,g,W]),Br(()=>{r||(E.current=void 0,Y(),Z())},[r,Y,Z]),T.useEffect(()=>()=>{Y(),clearTimeout(w.current),clearTimeout(x.current),Z()},[s,a.domReference,Y,Z]);const te=T.useMemo(()=>{function $(K){E.current=K.pointerType}return{onPointerDown:$,onPointerEnter:$,onMouseMove(K){const{nativeEvent:A}=K;function N(){!O.current&&!v.current&&n(!0,A,"hover")}d&&!N0(E.current)||r||u===0||(clearTimeout(x.current),E.current==="touch"?N():x.current=window.setTimeout(N,u))}}},[d,n,r,v,u]),H=T.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave($){V($.nativeEvent,!1)}}),[V]);return T.useMemo(()=>s?{reference:te,floating:H}:{},[s,te,H])}function Dye(e,t){var r;let n=[],i=(r=e.find(o=>o.id===t))==null?void 0:r.parentId;for(;i;){const o=e.find(a=>a.id===i);i=o==null?void 0:o.parentId,o&&(n=n.concat(o))}return n}function Uu(e,t){let r=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),n=r;for(;n.length;)n=e.filter(i=>{var o;return(o=n)==null?void 0:o.some(a=>{var s;return i.parentId===a.id&&((s=i.context)==null?void 0:s.open)})}),r=r.concat(n);return r}function Lye(e,t){let r,n=-1;function i(o,a){a>n&&(r=o,n=a),Uu(e,o).forEach(c=>{i(c.id,a+1)})}return i(t,0),e.find(o=>o.id===r)}let Vh=new WeakMap,kv=new WeakSet,Pv={},TC=0;const Mye=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,h9=e=>e&&(e.host||h9(e.parentNode)),jye=(e,t)=>t.map(r=>{if(e.contains(r))return r;const n=h9(r);return e.contains(n)?n:null}).filter(r=>r!=null);function Uye(e,t,r,n){const i="data-floating-ui-inert",o=n?"inert":r?"aria-hidden":null,a=jye(t,e),s=new Set,c=new Set(a),l=[];Pv[i]||(Pv[i]=new WeakMap);const d=Pv[i];a.forEach(u),p(t),s.clear();function u(f){!f||s.has(f)||(s.add(f),f.parentNode&&u(f.parentNode))}function p(f){!f||c.has(f)||[].forEach.call(f.children,m=>{if(jd(m)!=="script")if(s.has(m))p(m);else{const g=o?m.getAttribute(o):null,y=g!==null&&g!=="false",v=(Vh.get(m)||0)+1,E=(d.get(m)||0)+1;Vh.set(m,v),d.set(m,E),l.push(m),v===1&&y&&kv.add(m),E===1&&m.setAttribute(i,""),!y&&o&&m.setAttribute(o,"true")}})}return TC++,()=>{l.forEach(f=>{const m=(Vh.get(f)||0)-1,g=(d.get(f)||0)-1;Vh.set(f,m),d.set(f,g),m||(!kv.has(f)&&o&&f.removeAttribute(o),kv.delete(f)),g||f.removeAttribute(i)}),TC--,TC||(Vh=new WeakMap,Vh=new WeakMap,kv=new WeakSet,Pv={})}}function Dj(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);const n=vi(e[0]).body;return Uye(e.concat(Array.from(n.querySelectorAll("[aria-live]"))),n,t,r)}const wf=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function p9(e,t){const r=O0(e,wf());t==="prev"&&r.reverse();const n=r.indexOf(Cs(vi(e)));return r.slice(n+1)[0]}function f9(){return p9(document.body,"next")}function m9(){return p9(document.body,"prev")}function Fg(e,t){const r=t||e.currentTarget,n=e.relatedTarget;return!n||!$n(r,n)}function Fye(e){O0(e,wf()).forEach(r=>{r.dataset.tabindex=r.getAttribute("tabindex")||"",r.setAttribute("tabindex","-1")})}function Vye(e){e.querySelectorAll("[data-tabindex]").forEach(r=>{const n=r.dataset.tabindex;delete r.dataset.tabindex,n?r.setAttribute("tabindex",n):r.removeAttribute("tabindex")})}function Bye(e,t,r){const n=e.indexOf(t);function i(a){const s=xd("focus-guard");let c=n+(a?1:0),l=e[c];for(;l&&(!l.isConnected||l.hasAttribute(s)||$n(r,l));)a?c++:c--,l=e[c];return l}const o=i(!0);return o||i(!1)}const fP={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let $ye;function Lj(e){e.key==="Tab"&&(e.target,clearTimeout($ye))}const Db=T.forwardRef(function(t,r){const[n,i]=T.useState();Br(()=>(aP()&&i("button"),document.addEventListener("keydown",Lj),()=>{document.removeEventListener("keydown",Lj)}),[]);const o={ref:r,tabIndex:0,role:n,"aria-hidden":n?void 0:!0,[xd("focus-guard")]:"",style:fP};return T.createElement("span",k0({},t,o))}),g9=T.createContext(null),Mj=xd("portal");function Hye(e){e===void 0&&(e={});const{id:t,root:r}=e,n=wS(),i=y9(),[o,a]=T.useState(null),s=T.useRef(null);return Br(()=>()=>{o==null||o.remove(),queueMicrotask(()=>{s.current=null})},[o]),Br(()=>{if(!n||s.current)return;const c=t?document.getElementById(t):null;if(!c)return;const l=document.createElement("div");l.id=n,l.setAttribute(Mj,""),c.appendChild(l),s.current=l,a(l)},[t,n]),Br(()=>{if(!n||s.current)return;let c=r||(i==null?void 0:i.portalNode);c&&!Kr(c)&&(c=c.current),c=c||document.body;let l=null;t&&(l=document.createElement("div"),l.id=t,c.appendChild(l));const d=document.createElement("div");d.id=n,d.setAttribute(Mj,""),c=l||c,c.appendChild(d),s.current=d,a(d)},[t,r,n,i]),o}function Wye(e){const{children:t,id:r,root:n=null,preserveTabOrder:i=!0}=e,o=Hye({id:r,root:n}),[a,s]=T.useState(null),c=T.useRef(null),l=T.useRef(null),d=T.useRef(null),u=T.useRef(null),p=!!a&&!a.modal&&a.open&&i&&!!(n||o);return T.useEffect(()=>{if(!o||!i||a!=null&&a.modal)return;function f(m){o&&Fg(m)&&(m.type==="focusin"?Vye:Fye)(o)}return o.addEventListener("focusin",f,!0),o.addEventListener("focusout",f,!0),()=>{o.removeEventListener("focusin",f,!0),o.removeEventListener("focusout",f,!0)}},[o,i,a==null?void 0:a.modal]),T.createElement(g9.Provider,{value:T.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:l,beforeInsideRef:d,afterInsideRef:u,portalNode:o,setFocusManagerState:s}),[i,o])},p&&o&&T.createElement(Db,{"data-type":"outside",ref:c,onFocus:f=>{if(Fg(f,o)){var m;(m=d.current)==null||m.focus()}else{const g=m9()||(a==null?void 0:a.refs.domReference.current);g==null||g.focus()}}}),p&&o&&T.createElement("span",{"aria-owns":o.id,style:fP}),o&&Lw.createPortal(t,o),p&&o&&T.createElement(Db,{"data-type":"outside",ref:l,onFocus:f=>{if(Fg(f,o)){var m;(m=u.current)==null||m.focus()}else{const g=f9()||(a==null?void 0:a.refs.domReference.current);g==null||g.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1,f.nativeEvent))}}}))}const y9=()=>T.useContext(g9),jj=20;let cu=[];function CC(e){cu=cu.filter(r=>r.isConnected);let t=e;if(!(!t||jd(t)==="body")){if(!L0e(t,wf())){const r=O0(t,wf())[0];r&&(t=r)}cu.push(t),cu.length>jj&&(cu=cu.slice(-jj))}}function Uj(){return cu.slice().reverse().find(e=>e.isConnected)}const Gye=T.forwardRef(function(t,r){return T.createElement("button",k0({},t,{type:"button",ref:r,tabIndex:-1,style:fP}))});function v9(e){const{context:t,children:r,disabled:n=!1,order:i=["content"],guards:o=!0,initialFocus:a=0,returnFocus:s=!0,restoreFocus:c=!1,modal:l=!0,visuallyHiddenDismiss:d=!1,closeOnFocusOut:u=!0}=e,{open:p,refs:f,nodeId:m,onOpenChange:g,events:y,dataRef:v,floatingId:E,elements:{domReference:w,floating:S}}=t,x=typeof a=="number"&&a<0,O=qz(w)&&x,L=Mye()?o:!0,j=ra(i),W=ra(a),V=ra(s),Y=Iy(),Z=y9(),te=T.useRef(null),H=T.useRef(null),$=T.useRef(!1),K=T.useRef(!1),A=T.useRef(-1),N=Z!=null,F=S==null?void 0:S.firstElementChild,P=(F==null?void 0:F.id)===E?F:S,_=Li(function(U){return U===void 0&&(U=P),U?O0(U,wf()):[]}),R=Li(U=>{const q=_(U);return j.current.map(oe=>w&&oe==="reference"?w:P&&oe==="floating"?P:q).filter(Boolean).flat()});T.useEffect(()=>{if(n||!l)return;function U(oe){if(oe.key==="Tab"){$n(P,Cs(vi(P)))&&_().length===0&&!O&&Pi(oe);const ue=R(),me=qc(oe);j.current[0]==="reference"&&me===w&&(Pi(oe),oe.shiftKey?Hl(ue[ue.length-1]):Hl(ue[1])),j.current[1]==="floating"&&me===P&&oe.shiftKey&&(Pi(oe),Hl(ue[0]))}}const q=vi(P);return q.addEventListener("keydown",U),()=>{q.removeEventListener("keydown",U)}},[n,w,P,l,j,O,_,R]),T.useEffect(()=>{if(n||!S)return;function U(q){const oe=qc(q),me=_().indexOf(oe);me!==-1&&(A.current=me)}return S.addEventListener("focusin",U),()=>{S.removeEventListener("focusin",U)}},[n,S,_]),T.useEffect(()=>{if(n||!u)return;function U(){K.current=!0,setTimeout(()=>{K.current=!1})}function q(oe){const ue=oe.relatedTarget;queueMicrotask(()=>{const me=!($n(w,ue)||$n(S,ue)||$n(ue,S)||$n(Z==null?void 0:Z.portalNode,ue)||ue!=null&&ue.hasAttribute(xd("focus-guard"))||Y&&(Uu(Y.nodesRef.current,m).find(De=>{var We,Pe;return $n((We=De.context)==null?void 0:We.elements.floating,ue)||$n((Pe=De.context)==null?void 0:Pe.elements.domReference,ue)})||Dye(Y.nodesRef.current,m).find(De=>{var We,Pe;return((We=De.context)==null?void 0:We.elements.floating)===ue||((Pe=De.context)==null?void 0:Pe.elements.domReference)===ue})));if(c&&me&&Cs(vi(P))===vi(P).body){Gn(P)&&(P==null||P.focus());const De=A.current,We=_(),Pe=We[De]||We[We.length-1]||P;Gn(Pe)&&Pe.focus()}(O||!l)&&ue&&me&&!K.current&&ue!==Uj()&&($.current=!0,g(!1,oe))})}if(S&&Gn(w))return w.addEventListener("focusout",q),w.addEventListener("pointerdown",U),S.addEventListener("focusout",q),()=>{w.removeEventListener("focusout",q),w.removeEventListener("pointerdown",U),S.removeEventListener("focusout",q)}},[n,w,S,P,l,m,Y,Z,g,u,c,_,O]),T.useEffect(()=>{var U;if(n)return;const q=Array.from((Z==null||(U=Z.portalNode)==null?void 0:U.querySelectorAll("["+xd("portal")+"]"))||[]);if(S){const oe=[S,...q,te.current,H.current,j.current.includes("reference")||O?w:null].filter(me=>me!=null),ue=l||O?Dj(oe,L,!L):Dj(oe);return()=>{ue()}}},[n,w,S,l,j,Z,O,L]),Br(()=>{if(n||!Gn(P))return;const U=vi(P),q=Cs(U);queueMicrotask(()=>{const oe=R(P),ue=W.current,me=(typeof ue=="number"?oe[ue]:ue.current)||P,De=$n(P,q);!x&&!De&&p&&Hl(me,{preventScroll:me===P})})},[n,p,P,x,R,W]),Br(()=>{if(n||!P)return;let U=!1;const q=vi(P),oe=Cs(q);let me=v.current.openEvent;const De=f.domReference.current;CC(oe);function We(Pe){let{open:it,reason:Rt,event:Je,nested:bt}=Pe;it&&(me=Je),Rt==="escape-key"&&f.domReference.current&&CC(f.domReference.current),Rt==="hover"&&Je.type==="mouseleave"&&($.current=!0),Rt==="outside-press"&&(bt?($.current=!1,U=!0):$.current=!(zz(Je)||oP(Je)))}return y.on("openchange",We),()=>{y.off("openchange",We);const Pe=Cs(q),it=$n(S,Pe)||Y&&Uu(Y.nodesRef.current,m).some(Ce=>{var et;return $n((et=Ce.context)==null?void 0:et.elements.floating,Pe)});(it||me&&["click","mousedown"].includes(me.type))&&f.domReference.current&&CC(f.domReference.current);const Je=De||oe,bt=O0(vi(Je).body,wf());queueMicrotask(()=>{let Ce=Uj();!Ce&&Gn(Je)&&S&&(Ce=Bye(bt,Je,S)),V.current&&!$.current&&Gn(Ce)&&(!(Ce!==Pe&&Pe!==q.body)||it)&&Ce.focus({preventScroll:U})})}},[n,S,P,V,v,f,y,Y,m]),Br(()=>{if(!n&&Z)return Z.setFocusManagerState({modal:l,closeOnFocusOut:u,open:p,onOpenChange:g,refs:f}),()=>{Z.setFocusManagerState(null)}},[n,Z,l,p,g,f,u]),Br(()=>{if(n||!P||typeof MutationObserver!="function"||x)return;const U=()=>{const oe=P.getAttribute("tabindex"),ue=_(),me=Cs(vi(S)),De=ue.indexOf(me);De!==-1&&(A.current=De),j.current.includes("floating")||me!==f.domReference.current&&ue.length===0?oe!=="0"&&P.setAttribute("tabindex","0"):oe!=="-1"&&P.setAttribute("tabindex","-1")};U();const q=new MutationObserver(U);return q.observe(P,{childList:!0,subtree:!0,attributes:!0}),()=>{q.disconnect()}},[n,S,P,f,j,_,x]);function k(U){return n||!d||!l?null:T.createElement(Gye,{ref:U==="start"?te:H,onClick:q=>g(!1,q.nativeEvent)},typeof d=="string"?d:"Dismiss")}const z=!n&&L&&(l?!O:!0)&&(N||l);return T.createElement(T.Fragment,null,z&&T.createElement(Db,{"data-type":"inside",ref:Z==null?void 0:Z.beforeInsideRef,onFocus:U=>{if(l){const oe=R();Hl(i[0]==="reference"?oe[0]:oe[oe.length-1])}else if(Z!=null&&Z.preserveTabOrder&&Z.portalNode)if($.current=!1,Fg(U,Z.portalNode)){const oe=f9()||w;oe==null||oe.focus()}else{var q;(q=Z.beforeOutsideRef.current)==null||q.focus()}}}),!O&&k("start"),r,k("end"),z&&T.createElement(Db,{"data-type":"inside",ref:Z==null?void 0:Z.afterInsideRef,onFocus:U=>{if(l)Hl(R()[0]);else if(Z!=null&&Z.preserveTabOrder&&Z.portalNode)if(u&&($.current=!0),Fg(U,Z.portalNode)){const oe=m9()||w;oe==null||oe.focus()}else{var q;(q=Z.afterOutsideRef.current)==null||q.focus()}}}))}const RC=new Set,zye=T.forwardRef(function(t,r){const{lockScroll:n=!1,...i}=t,o=wS();return Br(()=>{if(!n)return;RC.add(o);const a=/iP(hone|ad|od)|iOS/.test(iP()),s=document.body.style,l=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",d=window.innerWidth-document.documentElement.clientWidth,u=s.left?parseFloat(s.left):window.scrollX,p=s.top?parseFloat(s.top):window.scrollY;if(s.overflow="hidden",d&&(s[l]=d+"px"),a){var f,m;const g=((f=window.visualViewport)==null?void 0:f.offsetLeft)||0,y=((m=window.visualViewport)==null?void 0:m.offsetTop)||0;Object.assign(s,{position:"fixed",top:-(p-Math.floor(y))+"px",left:-(u-Math.floor(g))+"px",right:"0"})}return()=>{RC.delete(o),RC.size===0&&(Object.assign(s,{overflow:"",[l]:""}),a&&(Object.assign(s,{position:"",top:"",left:"",right:""}),window.scrollTo(u,p)))}},[o,n]),T.createElement("div",k0({ref:r},i,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}}))});function Fj(e){return Gn(e.target)&&e.target.tagName==="BUTTON"}function Vj(e){return sP(e)}function E9(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,dataRef:i,elements:{domReference:o}}=e,{enabled:a=!0,event:s="click",toggle:c=!0,ignoreMouse:l=!1,keyboardHandlers:d=!0}=t,u=T.useRef(),p=T.useRef(!1),f=T.useMemo(()=>({onPointerDown(m){u.current=m.pointerType},onMouseDown(m){const g=u.current;m.button===0&&s!=="click"&&(N0(g,!0)&&l||(r&&c&&(!i.current.openEvent||i.current.openEvent.type==="mousedown")?n(!1,m.nativeEvent,"click"):(m.preventDefault(),n(!0,m.nativeEvent,"click"))))},onClick(m){const g=u.current;if(s==="mousedown"&&u.current){u.current=void 0;return}N0(g,!0)&&l||(r&&c&&(!i.current.openEvent||i.current.openEvent.type==="click")?n(!1,m.nativeEvent,"click"):n(!0,m.nativeEvent,"click"))},onKeyDown(m){u.current=void 0,!(m.defaultPrevented||!d||Fj(m))&&(m.key===" "&&!Vj(o)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&n(!(r&&c),m.nativeEvent,"click"))},onKeyUp(m){m.defaultPrevented||!d||Fj(m)||Vj(o)||m.key===" "&&p.current&&(p.current=!1,n(!(r&&c),m.nativeEvent,"click"))}}),[i,o,s,l,d,n,r,c]);return T.useMemo(()=>a?{reference:f}:{},[a,f])}const Kye={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},qye={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Bj=e=>{var t,r;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(r=e==null?void 0:e.outsidePress)!=null?r:!0}};function _9(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,elements:i,dataRef:o}=e,{enabled:a=!0,escapeKey:s=!0,outsidePress:c=!0,outsidePressEvent:l="pointerdown",referencePress:d=!1,referencePressEvent:u="pointerdown",ancestorScroll:p=!1,bubbles:f,capture:m}=t,g=Iy(),y=Li(typeof c=="function"?c:()=>!1),v=typeof c=="function"?y:c,E=T.useRef(!1),w=T.useRef(!1),{escapeKey:S,outsidePress:x}=Bj(f),{escapeKey:O,outsidePress:L}=Bj(m),j=Li(H=>{var $;if(!r||!a||!s||H.key!=="Escape")return;const K=($=o.current.floatingContext)==null?void 0:$.nodeId,A=g?Uu(g.nodesRef.current,K):[];if(!S&&(H.stopPropagation(),A.length>0)){let N=!0;if(A.forEach(F=>{var P;if((P=F.context)!=null&&P.open&&!F.context.dataRef.current.__escapeKeyBubbles){N=!1;return}}),!N)return}n(!1,s0e(H)?H.nativeEvent:H,"escape-key")}),W=Li(H=>{var $;const K=()=>{var A;j(H),(A=qc(H))==null||A.removeEventListener("keydown",K)};($=qc(H))==null||$.addEventListener("keydown",K)}),V=Li(H=>{var $;const K=E.current;E.current=!1;const A=w.current;if(w.current=!1,l==="click"&&A||K||typeof v=="function"&&!v(H))return;const N=qc(H),F="["+xd("inert")+"]",P=vi(i.floating).querySelectorAll(F);let _=Kr(N)?N:null;for(;_&&!Id(_);){const U=ul(_);if(Id(U)||!Kr(U))break;_=U}if(P.length&&Kr(N)&&!c0e(N)&&!$n(N,i.floating)&&Array.from(P).every(U=>!$n(_,U)))return;if(Gn(N)&&te){const U=N.clientWidth>0&&N.scrollWidth>N.clientWidth,q=N.clientHeight>0&&N.scrollHeight>N.clientHeight;let oe=q&&H.offsetX>N.clientWidth;if(q&&ts(N).direction==="rtl"&&(oe=H.offsetX<=N.offsetWidth-N.clientWidth),oe||U&&H.offsetY>N.clientHeight)return}const R=($=o.current.floatingContext)==null?void 0:$.nodeId,k=g&&Uu(g.nodesRef.current,R).some(U=>{var q;return EC(H,(q=U.context)==null?void 0:q.elements.floating)});if(EC(H,i.floating)||EC(H,i.domReference)||k)return;const z=g?Uu(g.nodesRef.current,R):[];if(z.length>0){let U=!0;if(z.forEach(q=>{var oe;if((oe=q.context)!=null&&oe.open&&!q.context.dataRef.current.__outsidePressBubbles){U=!1;return}}),!U)return}n(!1,H,"outside-press")}),Y=Li(H=>{var $;const K=()=>{var A;V(H),(A=qc(H))==null||A.removeEventListener(l,K)};($=qc(H))==null||$.addEventListener(l,K)});T.useEffect(()=>{if(!r||!a)return;o.current.__escapeKeyBubbles=S,o.current.__outsidePressBubbles=x;function H(A){n(!1,A,"ancestor-scroll")}const $=vi(i.floating);s&&$.addEventListener("keydown",O?W:j,O),v&&$.addEventListener(l,L?Y:V,L);let K=[];return p&&(Kr(i.domReference)&&(K=gd(i.domReference)),Kr(i.floating)&&(K=K.concat(gd(i.floating))),!Kr(i.reference)&&i.reference&&i.reference.contextElement&&(K=K.concat(gd(i.reference.contextElement)))),K=K.filter(A=>{var N;return A!==((N=$.defaultView)==null?void 0:N.visualViewport)}),K.forEach(A=>{A.addEventListener("scroll",H,{passive:!0})}),()=>{s&&$.removeEventListener("keydown",O?W:j,O),v&&$.removeEventListener(l,L?Y:V,L),K.forEach(A=>{A.removeEventListener("scroll",H)})}},[o,i,s,v,l,r,n,p,a,S,x,j,O,W,V,L,Y]),T.useEffect(()=>{E.current=!1},[v,l]);const Z=T.useMemo(()=>({onKeyDown:j,[Kye[u]]:H=>{d&&n(!1,H.nativeEvent,"reference-press")}}),[j,n,d,u]),te=T.useMemo(()=>({onKeyDown:j,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[qye[l]]:()=>{E.current=!0}}),[j,l]);return T.useMemo(()=>a?{reference:Z,floating:te}:{},[a,Z,te])}function Yye(e){const{open:t=!1,onOpenChange:r,elements:n}=e,i=wS(),o=T.useRef({}),[a]=T.useState(()=>Nye()),s=SS()!=null,[c,l]=T.useState(n.reference),d=Li((f,m,g)=>{o.current.openEvent=f?m:void 0,a.emit("openchange",{open:f,event:m,reason:g,nested:s}),r==null||r(f,m,g)}),u=T.useMemo(()=>({setPositionReference:l}),[]),p=T.useMemo(()=>({reference:c||n.reference||null,floating:n.floating||null,domReference:n.reference}),[c,n.reference,n.floating]);return T.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:p,events:a,floatingId:i,refs:u}),[t,d,p,a,i,u])}function b9(e){e===void 0&&(e={});const{nodeId:t}=e,r=Yye({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,i=n.elements,[o,a]=T.useState(null),[s,c]=T.useState(null),d=(i==null?void 0:i.reference)||o,u=T.useRef(null),p=Iy();Br(()=>{d&&(u.current=d)},[d]);const f=dye({...e,elements:{...i,...s&&{reference:s}}}),m=T.useCallback(w=>{const S=Kr(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;c(S),f.refs.setReference(S)},[f.refs]),g=T.useCallback(w=>{(Kr(w)||w===null)&&(u.current=w,a(w)),(Kr(f.refs.reference.current)||f.refs.reference.current===null||w!==null&&!Kr(w))&&f.refs.setReference(w)},[f.refs]),y=T.useMemo(()=>({...f.refs,setReference:g,setPositionReference:m,domReference:u}),[f.refs,g,m]),v=T.useMemo(()=>({...f.elements,domReference:d}),[f.elements,d]),E=T.useMemo(()=>({...f,...n,refs:y,elements:v,nodeId:t}),[f,y,v,t,n]);return Br(()=>{n.dataRef.current.floatingContext=E;const w=p==null?void 0:p.nodesRef.current.find(S=>S.id===t);w&&(w.context=E)}),T.useMemo(()=>({...f,context:E,refs:y,elements:v}),[f,y,v,E])}function Xye(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,events:i,dataRef:o,elements:a}=e,{enabled:s=!0,visibleOnly:c=!0}=t,l=T.useRef(!1),d=T.useRef(),u=T.useRef(!0);T.useEffect(()=>{if(!s)return;const f=jo(a.domReference);function m(){!r&&Gn(a.domReference)&&a.domReference===Cs(vi(a.domReference))&&(l.current=!0)}function g(){u.current=!0}return f.addEventListener("blur",m),f.addEventListener("keydown",g,!0),()=>{f.removeEventListener("blur",m),f.removeEventListener("keydown",g,!0)}},[a.domReference,r,s]),T.useEffect(()=>{if(!s)return;function f(m){let{reason:g}=m;(g==="reference-press"||g==="escape-key")&&(l.current=!0)}return i.on("openchange",f),()=>{i.off("openchange",f)}},[i,s]),T.useEffect(()=>()=>{clearTimeout(d.current)},[]);const p=T.useMemo(()=>({onPointerDown(f){oP(f.nativeEvent)||(u.current=!1)},onMouseLeave(){l.current=!1},onFocus(f){if(l.current)return;const m=qc(f.nativeEvent);if(c&&Kr(m))try{if(aP()&&Kz())throw Error();if(!m.matches(":focus-visible"))return}catch{if(!u.current&&!sP(m))return}n(!0,f.nativeEvent,"focus")},onBlur(f){l.current=!1;const m=f.relatedTarget,g=f.nativeEvent,y=Kr(m)&&m.hasAttribute(xd("focus-guard"))&&m.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var v;const E=Cs(a.domReference?a.domReference.ownerDocument:document);!m&&E===a.domReference||$n((v=o.current.floatingContext)==null?void 0:v.refs.floating.current,E)||$n(a.domReference,E)||y||n(!1,g,"focus")})}}),[o,a.domReference,n,c]);return T.useMemo(()=>s?{reference:p}:{},[s,p])}const $j="active",Hj="selected";function IC(e,t,r){const n=new Map,i=r==="item";let o=e;if(i&&e){const{[$j]:a,[Hj]:s,...c}=e;o=c}return{...r==="floating"&&{tabIndex:-1},...o,...t.map(a=>{const s=a?a[r]:null;return typeof s=="function"?e?s(e):null:s}).concat(e).reduce((a,s)=>(s&&Object.entries(s).forEach(c=>{let[l,d]=c;if(!(i&&[$j,Hj].includes(l)))if(l.indexOf("on")===0){if(n.has(l)||n.set(l,[]),typeof d=="function"){var u;(u=n.get(l))==null||u.push(d),a[l]=function(){for(var p,f=arguments.length,m=new Array(f),g=0;g<f;g++)m[g]=arguments[g];return(p=n.get(l))==null?void 0:p.map(y=>y(...m)).find(y=>y!==void 0)}}}else a[l]=d}),a),{})}}function w9(e){e===void 0&&(e=[]);const t=e.map(s=>s==null?void 0:s.reference),r=e.map(s=>s==null?void 0:s.floating),n=e.map(s=>s==null?void 0:s.item),i=T.useCallback(s=>IC(s,e,"reference"),t),o=T.useCallback(s=>IC(s,e,"floating"),r),a=T.useCallback(s=>IC(s,e,"item"),n);return T.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:a}),[i,o,a])}let Wj=!1;function TS(e,t,r){switch(e){case"vertical":return t;case"horizontal":return r;default:return t||r}}function Gj(e,t){return TS(t,e===pP||e===Ry,e===bf||e===rm)}function xC(e,t,r){return TS(t,e===Ry,r?e===bf:e===rm)||e==="Enter"||e===" "||e===""}function Jye(e,t,r){return TS(t,r?e===bf:e===rm,e===Ry)}function zj(e,t,r){return TS(t,r?e===rm:e===bf,e===pP)}function Qye(e,t){const{open:r,onOpenChange:n,elements:i}=e,{listRef:o,activeIndex:a,onNavigate:s=()=>{},enabled:c=!0,selectedIndex:l=null,allowEscape:d=!1,loop:u=!1,nested:p=!1,rtl:f=!1,virtual:m=!1,focusItemOnOpen:g="auto",focusItemOnHover:y=!0,openOnArrowKeyDown:v=!0,disabledIndices:E=void 0,orientation:w="vertical",cols:S=1,scrollItemIntoView:x=!0,virtualItemRef:O,itemSizes:L,dense:j=!1}=t,W=SS(),V=Iy(),Y=Li(s),Z=T.useRef(g),te=T.useRef(l??-1),H=T.useRef(null),$=T.useRef(!0),K=T.useRef(Y),A=T.useRef(!!i.floating),N=T.useRef(r),F=T.useRef(!1),P=T.useRef(!1),_=ra(E),R=ra(r),k=ra(x),z=ra(i.floating),U=ra(l),[q,oe]=T.useState(),[ue,me]=T.useState(),De=Li(function(Ce,et,Be){Be===void 0&&(Be=!1);function qe(ee){m?(oe(ee.id),V==null||V.events.emit("virtualfocus",ee),O&&(O.current=ee)):Hl(ee,{preventScroll:!0,sync:Kz()&&aP()?Wj||F.current:!1})}const ze=Ce.current[et.current];ze&&qe(ze),requestAnimationFrame(()=>{const ee=Ce.current[et.current]||ze;if(!ee)return;ze||qe(ee);const xe=k.current;xe&&Pe&&(Be||!$.current)&&(ee.scrollIntoView==null||ee.scrollIntoView(typeof xe=="boolean"?{block:"nearest",inline:"nearest"}:xe))})});Br(()=>{document.createElement("div").focus({get preventScroll(){return Wj=!0,!1}})},[]),Br(()=>{c&&(r&&i.floating?Z.current&&l!=null&&(P.current=!0,te.current=l,Y(l)):A.current&&(te.current=-1,K.current(null)))},[c,r,i.floating,l,Y]),Br(()=>{if(c&&r&&i.floating)if(a==null){if(F.current=!1,U.current!=null)return;if(A.current&&(te.current=-1,De(o,te)),(!N.current||!A.current)&&Z.current&&(H.current!=null||Z.current===!0&&H.current==null)){let Ce=0;const et=()=>{o.current[0]==null?(Ce<2&&(Ce?requestAnimationFrame:queueMicrotask)(et),Ce++):(te.current=H.current==null||xC(H.current,w,f)||p?wC(o,_.current):Aj(o,_.current),H.current=null,Y(te.current))};et()}}else Ug(o,a)||(te.current=a,De(o,te,P.current),P.current=!1)},[c,r,i.floating,a,U,p,o,w,f,Y,De,_]),Br(()=>{var Ce;if(!c||i.floating||!V||m||!A.current)return;const et=V.nodesRef.current,Be=(Ce=et.find(ee=>ee.id===W))==null||(Ce=Ce.context)==null?void 0:Ce.elements.floating,qe=Cs(vi(i.floating)),ze=et.some(ee=>ee.context&&$n(ee.context.elements.floating,qe));Be&&!ze&&$.current&&Be.focus({preventScroll:!0})},[c,i.floating,V,W,m]),Br(()=>{if(!c||!V||!m||W)return;function Ce(et){me(et.id),O&&(O.current=et)}return V.events.on("virtualfocus",Ce),()=>{V.events.off("virtualfocus",Ce)}},[c,V,m,W,O]),Br(()=>{K.current=Y,A.current=!!i.floating}),Br(()=>{r||(H.current=null)},[r]),Br(()=>{N.current=r},[r]);const We=a!=null,Pe=T.useMemo(()=>{function Ce(Be){if(!r)return;const qe=o.current.indexOf(Be);qe!==-1&&Y(qe)}return{onFocus(Be){let{currentTarget:qe}=Be;Ce(qe)},onClick:Be=>{let{currentTarget:qe}=Be;return qe.focus({preventScroll:!0})},...y&&{onMouseMove(Be){let{currentTarget:qe}=Be;Ce(qe)},onPointerLeave(Be){let{pointerType:qe}=Be;!$.current||qe==="touch"||(te.current=-1,De(o,te),Y(null),m||Hl(z.current,{preventScroll:!0}))}}}},[r,z,De,y,o,Y,m]),it=Li(Ce=>{if($.current=!1,F.current=!0,!R.current&&Ce.currentTarget===z.current)return;if(p&&zj(Ce.key,w,f)){Pi(Ce),n(!1,Ce.nativeEvent,"list-navigation"),Gn(i.domReference)&&!m&&i.domReference.focus();return}const et=te.current,Be=wC(o,E),qe=Aj(o,E);if(Ce.key==="Home"&&(Pi(Ce),te.current=Be,Y(te.current)),Ce.key==="End"&&(Pi(Ce),te.current=qe,Y(te.current)),S>1){const ze=L||Array.from({length:o.current.length},()=>({width:1,height:1})),ee=_ye(ze,S,j),xe=ee.findIndex(Ge=>Ge!=null&&!t_(o.current,Ge,E)),Le=ee.reduce((Ge,ut,Gt)=>ut!=null&&!t_(o.current,ut,E)?Gt:Ge,-1);if(te.current=ee[Eye({current:ee.map(Ge=>Ge!=null?o.current[Ge]:null)},{event:Ce,orientation:w,loop:u,cols:S,disabledIndices:wye([...E||o.current.map((Ge,ut)=>t_(o.current,ut)?ut:void 0),void 0],ee),minIndex:xe,maxIndex:Le,prevIndex:bye(te.current>qe?Be:te.current,ze,ee,S,Ce.key===Ry?"bl":Ce.key===rm?"tr":"tl"),stopEvent:!0})],Y(te.current),w==="both")return}if(Gj(Ce.key,w)){if(Pi(Ce),r&&!m&&Cs(Ce.currentTarget.ownerDocument)===Ce.currentTarget){te.current=xC(Ce.key,w,f)?Be:qe,Y(te.current);return}xC(Ce.key,w,f)?u?te.current=et>=qe?d&&et!==o.current.length?-1:Be:Ki(o,{startingIndex:et,disabledIndices:E}):te.current=Math.min(qe,Ki(o,{startingIndex:et,disabledIndices:E})):u?te.current=et<=Be?d&&et!==-1?o.current.length:qe:Ki(o,{startingIndex:et,decrement:!0,disabledIndices:E}):te.current=Math.max(Be,Ki(o,{startingIndex:et,decrement:!0,disabledIndices:E})),Ug(o,te.current)?Y(null):Y(te.current)}}),Rt=T.useMemo(()=>m&&r&&We&&{"aria-activedescendant":ue||q},[m,r,We,ue,q]),Je=T.useMemo(()=>({"aria-orientation":w==="both"?void 0:w,...!qz(i.domReference)&&Rt,onKeyDown:it,onPointerMove(){$.current=!0}}),[Rt,it,i.domReference,w]),bt=T.useMemo(()=>{function Ce(Be){g==="auto"&&zz(Be.nativeEvent)&&(Z.current=!0)}function et(Be){Z.current=g,g==="auto"&&oP(Be.nativeEvent)&&(Z.current=!0)}return{...Rt,onKeyDown(Be){$.current=!1;const qe=Be.key.indexOf("Arrow")===0,ze=Jye(Be.key,w,f),ee=zj(Be.key,w,f),xe=Gj(Be.key,w),Le=(p?ze:xe)||Be.key==="Enter"||Be.key.trim()==="";if(m&&r){const Hr=V==null?void 0:V.nodesRef.current.find(Ho=>Ho.parentId==null),fn=V&&Hr?Lye(V.nodesRef.current,Hr.id):null;if(qe&&fn&&O){const Ho=new KeyboardEvent("keydown",{key:Be.key,bubbles:!0});if(ze||ee){var Ge,ut;const Bs=((Ge=fn.context)==null?void 0:Ge.elements.domReference)===Be.currentTarget,eo=ee&&!Bs?(ut=fn.context)==null?void 0:ut.elements.domReference:ze?o.current.find(Ac=>(Ac==null?void 0:Ac.id)===q):null;eo&&(Pi(Be),eo.dispatchEvent(Ho),me(void 0))}if(xe&&fn.context&&fn.context.open&&fn.parentId&&Be.currentTarget!==fn.context.elements.domReference){var Gt;Pi(Be),(Gt=fn.context.elements.domReference)==null||Gt.dispatchEvent(Ho);return}}return it(Be)}if(!(!r&&!v&&qe)){if(Le&&(H.current=p&&xe?null:Be.key),p){ze&&(Pi(Be),r?(te.current=wC(o,_.current),Y(te.current)):n(!0,Be.nativeEvent,"list-navigation"));return}xe&&(l!=null&&(te.current=l),Pi(Be),!r&&v?n(!0,Be.nativeEvent,"list-navigation"):it(Be),r&&Y(te.current))}},onFocus(){r&&!m&&Y(null)},onPointerDown:et,onMouseDown:Ce,onClick:Ce}},[q,Rt,it,_,g,o,p,Y,n,r,v,w,f,l,V,m,O]);return T.useMemo(()=>c?{reference:bt,floating:Je,item:Pe}:{},[c,bt,Je,Pe])}const Zye=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function S9(e,t){var r;t===void 0&&(t={});const{open:n,floatingId:i}=e,{enabled:o=!0,role:a="dialog"}=t,s=(r=Zye.get(a))!=null?r:a,c=wS(),d=SS()!=null,u=T.useMemo(()=>s==="tooltip"||a==="label"?{["aria-"+(a==="label"?"labelledby":"describedby")]:n?i:void 0}:{"aria-expanded":n?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":n?i:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:c},...s==="menu"&&d&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},[s,i,d,n,c,a]),p=T.useMemo(()=>{const m={id:i,...s&&{role:s}};return s==="tooltip"||a==="label"?m:{...m,...s==="menu"&&{"aria-labelledby":c}}},[s,i,c,a]),f=T.useCallback(m=>{let{active:g,selected:y}=m;const v={role:"option",...g&&{id:i+"-option"}};switch(a){case"select":return{...v,"aria-selected":g&&y};case"combobox":return{...v,...g&&{"aria-selected":!0}}}return{}},[i,a]);return T.useMemo(()=>o?{reference:u,floating:p,item:f}:{},[o,u,p,f])}function eve(e,t){var r;const{open:n,dataRef:i}=e,{listRef:o,activeIndex:a,onMatch:s,onTypingChange:c,enabled:l=!0,findMatch:d=null,resetMs:u=750,ignoreKeys:p=[],selectedIndex:f=null}=t,m=T.useRef(),g=T.useRef(""),y=T.useRef((r=f??a)!=null?r:-1),v=T.useRef(null),E=Li(s),w=Li(c),S=ra(d),x=ra(p);Br(()=>{n&&(clearTimeout(m.current),v.current=null,g.current="")},[n]),Br(()=>{if(n&&g.current===""){var V;y.current=(V=f??a)!=null?V:-1}},[n,f,a]);const O=Li(V=>{V?i.current.typing||(i.current.typing=V,w(V)):i.current.typing&&(i.current.typing=V,w(V))}),L=Li(V=>{function Y(K,A,N){const F=S.current?S.current(A,N):A.find(P=>(P==null?void 0:P.toLocaleLowerCase().indexOf(N.toLocaleLowerCase()))===0);return F?K.indexOf(F):-1}const Z=o.current;if(g.current.length>0&&g.current[0]!==" "&&(Y(Z,Z,g.current)===-1?O(!1):V.key===" "&&Pi(V)),Z==null||x.current.includes(V.key)||V.key.length!==1||V.ctrlKey||V.metaKey||V.altKey)return;n&&V.key!==" "&&(Pi(V),O(!0)),Z.every(K=>{var A,N;return K?((A=K[0])==null?void 0:A.toLocaleLowerCase())!==((N=K[1])==null?void 0:N.toLocaleLowerCase()):!0})&&g.current===V.key&&(g.current="",y.current=v.current),g.current+=V.key,clearTimeout(m.current),m.current=setTimeout(()=>{g.current="",y.current=v.current,O(!1)},u);const H=y.current,$=Y(Z,[...Z.slice((H||0)+1),...Z.slice(0,(H||0)+1)],g.current);$!==-1?(E($),v.current=$):V.key!==" "&&(g.current="",O(!1))}),j=T.useMemo(()=>({onKeyDown:L}),[L]),W=T.useMemo(()=>({onKeyDown:L,onKeyUp(V){V.key===" "&&O(!1)}}),[L,O]);return T.useMemo(()=>l?{reference:j,floating:W}:{},[l,j,W])}function Kj(e,t){const[r,n]=e;let i=!1;const o=t.length;for(let a=0,s=o-1;a<o;s=a++){const[c,l]=t[a]||[0,0],[d,u]=t[s]||[0,0];l>=n!=u>=n&&r<=(d-c)*(n-l)/(u-l)+c&&(i=!i)}return i}function tve(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function rve(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:r=!1,requireIntent:n=!0}=e;let i,o=!1,a=null,s=null,c=performance.now();function l(u,p){const f=performance.now(),m=f-c;if(a===null||s===null||m===0)return a=u,s=p,c=f,null;const g=u-a,y=p-s,E=Math.sqrt(g*g+y*y)/m;return a=u,s=p,c=f,E}const d=u=>{let{x:p,y:f,placement:m,elements:g,onClose:y,nodeId:v,tree:E}=u;return function(S){function x(){clearTimeout(i),y()}if(clearTimeout(i),!g.domReference||!g.floating||m==null||p==null||f==null)return;const{clientX:O,clientY:L}=S,j=[O,L],W=qc(S),V=S.type==="mouseleave",Y=$n(g.floating,W),Z=$n(g.domReference,W),te=g.domReference.getBoundingClientRect(),H=g.floating.getBoundingClientRect(),$=m.split("-")[0],K=p>H.right-H.width/2,A=f>H.bottom-H.height/2,N=tve(j,te),F=H.width>te.width,P=H.height>te.height,_=(F?te:H).left,R=(F?te:H).right,k=(P?te:H).top,z=(P?te:H).bottom;if(Y&&(o=!0,!V))return;if(Z&&(o=!1),Z&&!V){o=!0;return}if(V&&Kr(S.relatedTarget)&&$n(g.floating,S.relatedTarget)||E&&Uu(E.nodesRef.current,v).some(oe=>{let{context:ue}=oe;return ue==null?void 0:ue.open}))return;if($==="top"&&f>=te.bottom-1||$==="bottom"&&f<=te.top+1||$==="left"&&p>=te.right-1||$==="right"&&p<=te.left+1)return x();let U=[];switch($){case"top":U=[[_,te.top+1],[_,H.bottom-1],[R,H.bottom-1],[R,te.top+1]];break;case"bottom":U=[[_,H.top+1],[_,te.bottom-1],[R,te.bottom-1],[R,H.top+1]];break;case"left":U=[[H.right-1,z],[H.right-1,k],[te.left+1,k],[te.left+1,z]];break;case"right":U=[[te.right-1,z],[te.right-1,k],[H.left+1,k],[H.left+1,z]];break}function q(oe){let[ue,me]=oe;switch($){case"top":{const De=[F?ue+t/2:K?ue+t*4:ue-t*4,me+t+1],We=[F?ue-t/2:K?ue+t*4:ue-t*4,me+t+1],Pe=[[H.left,K||F?H.bottom-t:H.top],[H.right,K?F?H.bottom-t:H.top:H.bottom-t]];return[De,We,...Pe]}case"bottom":{const De=[F?ue+t/2:K?ue+t*4:ue-t*4,me-t],We=[F?ue-t/2:K?ue+t*4:ue-t*4,me-t],Pe=[[H.left,K||F?H.top+t:H.bottom],[H.right,K?F?H.top+t:H.bottom:H.top+t]];return[De,We,...Pe]}case"left":{const De=[ue+t+1,P?me+t/2:A?me+t*4:me-t*4],We=[ue+t+1,P?me-t/2:A?me+t*4:me-t*4];return[...[[A||P?H.right-t:H.left,H.top],[A?P?H.right-t:H.left:H.right-t,H.bottom]],De,We]}case"right":{const De=[ue-t,P?me+t/2:A?me+t*4:me-t*4],We=[ue-t,P?me-t/2:A?me+t*4:me-t*4],Pe=[[A||P?H.left+t:H.right,H.top],[A?P?H.left+t:H.right:H.left+t,H.bottom]];return[De,We,...Pe]}}}if(!Kj([O,L],U)){if(o&&!N)return x();if(!V&&n){const oe=l(S.clientX,S.clientY);if(oe!==null&&oe<.1)return x()}Kj([O,L],q([p,f]))?!o&&n&&(i=window.setTimeout(x,40)):x()}}};return d.__options={blockPointerEvents:r},d}const nve=({arrowRef:e,placement:t})=>{const r=[];return r.push(hye(8)),r.push(t==="auto"?mye():fye()),r.push(pye({padding:8})),e!=null&&e.current&&r.push(gye({element:e.current})),r},ive=({placement:e})=>e==="auto"?void 0:e,ove=({placement:e})=>({top:"bottom",right:"left",bottom:"top",left:"right"})[e.split("-")[0]],T9=({open:e,arrowRef:t,placement:r="top",setOpen:n})=>b9({placement:ive({placement:r}),open:e,onOpenChange:n,whileElementsMounted:s9,middleware:nve({placement:r,arrowRef:t})}),C9=({context:e,trigger:t,role:r="tooltip",interactions:n=[]})=>w9([E9(e,{enabled:t==="click"}),Pye(e,{enabled:t==="hover",handleClose:rve()}),_9(e),S9(e,{role:r}),...n]),ave=({animation:e="duration-300",arrow:t=!0,children:r,className:n,content:i,placement:o="top",style:a="dark",theme:s,trigger:c="hover",minWidth:l,...d})=>{const u=T.useRef(null),[p,f]=T.useState(!1),m=T9({open:p,placement:o,arrowRef:u,setOpen:f}),{context:g,middlewareData:{arrow:{x:y,y:v}={}},refs:E,strategy:w,update:S,x,y:O}=m,L=Xye(g),{getFloatingProps:j,getReferenceProps:W}=C9({context:g,role:"tooltip",trigger:c,interactions:[L]});return T.useEffect(()=>{if(E.reference.current&&E.floating.current&&p)return s9(E.reference.current,E.floating.current,S)},[p,E.floating,E.reference,S]),h.jsxs(h.Fragment,{children:[h.jsx("div",{ref:E.setReference,className:s.target,"data-testid":"flowbite-tooltip-target",...W(),children:r}),h.jsxs("div",{ref:E.setFloating,"data-testid":"flowbite-tooltip",...j({className:ae(s.base,e&&`${s.animation} ${e}`,!p&&s.hidden,s.style[a],n),style:{position:w,top:O??" ",left:x??" ",minWidth:l},...d}),children:[h.jsx("div",{className:s.content,children:i}),t&&h.jsx("div",{className:ae(s.arrow.base,a==="dark"&&s.arrow.style.dark,a==="light"&&s.arrow.style.light,a==="auto"&&s.arrow.style.auto),"data-testid":"flowbite-tooltip-arrow",ref:u,style:{top:v??" ",left:y??" ",right:" ",bottom:" ",[ove({placement:m.placement})]:s.arrow.placement},children:" "})]})]})},CS=({animation:e="duration-300",arrow:t=!0,children:r,className:n,content:i,placement:o="top",style:a="dark",theme:s={},trigger:c="hover",...l})=>{const d=Re(rt().tooltip,s);return h.jsx(ave,{animation:e,arrow:t,content:i,placement:o,style:a,theme:d,trigger:c,className:n,...l,children:r})};CS.displayName="Tooltip";function R9(e){return hi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function I9(e){return hi({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM72 272a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm104-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H176c-8.8 0-16-7.2-16-16s7.2-16 16-16zM72 368a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm88 0c0-8.8 7.2-16 16-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H176c-8.8 0-16-7.2-16-16z"},child:[]}]})(e)}function sve(e){return hi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 296c0 66.3-53.7 120-120 120h-8c-17.7 0-32-14.3-32-32s14.3-32 32-32h8c30.9 0 56-25.1 56-56v-8H320c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h64c35.3 0 64 28.7 64 64v32 32 72zm-256 0c0 66.3-53.7 120-120 120H64c-17.7 0-32-14.3-32-32s14.3-32 32-32h8c30.9 0 56-25.1 56-56v-8H64c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h64c35.3 0 64 28.7 64 64v32 32 72z"},child:[]}]})(e)}const mP=(e,t)=>{var r;t(!0),(r=navigator==null?void 0:navigator.clipboard)==null||r.writeText(e).then(()=>{console.log("Copy Successfull")}).catch(n=>{console.error("Failed to Copy text: ",n),t(!1)}),setTimeout(()=>t(!1),4e3)},x9=T.forwardRef(({valueToCopy:e,icon:t=I9,theme:r={},className:n,...i},o)=>{const[a,s]=T.useState(!1),c=Re(rt().clipboard.withIcon,r);return h.jsx("button",{className:ae(c.base,n),onClick:()=>mP(e,s),...i,ref:o,children:a?h.jsx(R9,{"aria-hidden":!0,className:c.icon.successIcon}):h.jsx(t,{"aria-hidden":!0,className:c.icon.defaultIcon})})}),A9=T.forwardRef(({valueToCopy:e,icon:t=I9,label:r="Copy",theme:n={},className:i,...o},a)=>{const[s,c]=T.useState(!1),l=Re(rt().clipboard.withIconText,n);return h.jsx("button",{className:ae(l.base,i),onClick:()=>mP(e,c),...o,ref:a,children:s?h.jsxs("span",{className:l.label.base,children:[h.jsx(R9,{"aria-hidden":!0,className:l.icon.successIcon}),h.jsx("span",{className:l.label.successText,children:"Copied"})]}):h.jsxs("span",{className:l.label.base,children:[h.jsx(t,{"aria-hidden":!0,className:l.icon.defaultIcon}),h.jsx("span",{className:l.label.defaultText,children:r})]})})}),N9=T.forwardRef(({className:e,valueToCopy:t,label:r,theme:n={},...i},o)=>{const[a,s]=T.useState(!1),c=Re(rt().clipboard.button,n);return h.jsx(CS,{content:a?"Copied":"Copy to clipboard",className:"[&_*]:cursor-pointer",children:h.jsx("button",{className:ae(c.base,e),onClick:()=>mP(t,s),...i,ref:o,children:h.jsx("span",{className:c.label,children:r})})})});N9.displayName="Clipboard";x9.displayName="Clipboard.WithIcon";A9.displayName="Clipboard.WithIconText";Object.assign(N9,{WithIcon:x9,WithIconText:A9});const xy=({children:e,className:t,color:r="default",theme:n={},value:i,...o})=>{const a=Re(rt().helperText,n);return h.jsx("p",{className:ae(a.root.base,a.root.colors[r],t),...o,children:i??e??""})};xy.displayName="HelperText";const O9=T.forwardRef(({addon:e,className:t,color:r="gray",helperText:n,icon:i,rightIcon:o,shadow:a,sizing:s="md",theme:c={},type:l="text",...d},u)=>{const p=Re(rt().textInput,c);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:ae(p.base,t),children:[e&&h.jsx("span",{className:p.addon,children:e}),h.jsxs("div",{className:p.field.base,children:[i&&h.jsx("div",{className:p.field.icon.base,children:h.jsx(i,{className:p.field.icon.svg})}),o&&h.jsx("div",{"data-testid":"right-icon",className:p.field.rightIcon.base,children:h.jsx(o,{className:p.field.rightIcon.svg})}),h.jsx("input",{className:ae(p.field.input.base,p.field.input.colors[r],p.field.input.sizes[s],p.field.input.withIcon[i?"on":"off"],p.field.input.withRightIcon[o?"on":"off"],p.field.input.withAddon[e?"on":"off"],p.field.input.withShadow[a?"on":"off"]),type:l,...d,ref:u})]})]}),n&&h.jsx(xy,{color:r,children:n})]})});O9.displayName="TextInput";const k9=T.createContext(void 0);function RS(){const e=T.useContext(k9);if(!e)throw new Error("useDatePickerContext should be used within the DatePickerContext provider!");return e}var hn=(e=>(e[e.Days=0]="Days",e[e.Months=1]="Months",e[e.Years=2]="Years",e[e.Decades=3]="Decades",e))(hn||{}),P9=(e=>(e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e))(P9||{});const Sf=(e,t,r)=>{const n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();if(t&&r){const i=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),o=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();return n>=i&&n<=o}if(t){const i=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return n>=i}if(r){const i=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();return n<=i}return!0},P0=(e,t)=>(e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e.getTime()===t.getTime()),Dv=(e,t,r)=>(Sf(e,t,r)||(t&&e<t?e=t:r&&e>r&&(e=r)),e),cve=(e,t)=>{const r=new Date(e.getFullYear(),e.getMonth(),1);let i=r.getDay()-t;return i<0&&(i+=7),gP(r,-i)},lve=(e,t)=>{const r=[],n=new Date(0);n.setDate(n.getDate()-n.getDay()+t);const i=new Intl.DateTimeFormat(e,{weekday:"short"});for(let o=0;o<7;o++)r.push(i.format(gP(n,o)));return r},gP=(e,t)=>{const r=new Date(e);return r.setDate(r.getDate()+t),r},dve=(e,t)=>{const r=new Date(e);return r.setMonth(r.getMonth()+t),r},Cp=(e,t)=>{const r=new Date(e);return r.setFullYear(r.getFullYear()+t),r},Rp=(e,t,r)=>{let n={day:"numeric",month:"long",year:"numeric"};return r&&(n=r),new Intl.DateTimeFormat(e,n).format(t)},Ip=(e,t)=>{const r=e.getFullYear();return Math.floor(r/t)*t},uve=(e,t)=>{const r=e.getFullYear(),n=t+9;return r>=t&&r<=n},hve=({theme:e={}})=>{const{theme:t,weekStart:r,minDate:n,maxDate:i,viewDate:o,selectedDate:a,changeSelectedDate:s,language:c}=RS(),l=Re(t.views.days,e),d=lve(c,r),u=cve(o,r);return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:l.header.base,children:d.map((p,f)=>h.jsx("span",{className:l.header.title,children:p},f))}),h.jsx("div",{className:l.items.base,children:[...Array(42)].map((p,f)=>{const m=gP(u,f),g=Rp(c,m,{day:"numeric"}),y=a&&P0(a,m),v=!Sf(m,n,i);return h.jsx("button",{disabled:v,type:"button",className:ae(l.items.item.base,y&&l.items.item.selected,v&&l.items.item.disabled),onClick:()=>{v||s(m,!0)},children:g},f)})})]})},pve=({theme:e={}})=>{const{theme:t,viewDate:r,selectedDate:n,minDate:i,maxDate:o,setViewDate:a,setView:s}=RS(),c=Re(t.views.decades,e),l=Ip(r,100);return h.jsx("div",{className:c.items.base,children:[...Array(12)].map((d,u)=>{const p=l-10+u*10;new Date(r.getTime()).setFullYear(p+r.getFullYear()%10);const m=new Date(p,0,1),g=Cp(m,9),y=n&&uve(n,p),v=!Sf(m,i,o)&&!Sf(g,i,o);return h.jsx("button",{disabled:v,type:"button",className:ae(c.items.item.base,y&&c.items.item.selected,v&&c.items.item.disabled),onClick:()=>{v||(n&&a(Cp(r,p-n.getFullYear())),s(hn.Years))},children:p},u)})})},fve=({theme:e={}})=>{const{theme:t,minDate:r,maxDate:n,selectedDate:i,viewDate:o,language:a,setViewDate:s,setView:c}=RS(),l=Re(t.views.months,e);return h.jsx("div",{className:l.items.base,children:[...Array(12)].map((d,u)=>{const p=new Date;p.setMonth(u,1),p.setFullYear(o.getFullYear());const f=Rp(a,p,{month:"short"}),m=i&&P0(i,p),g=!Sf(p,r,n);return h.jsx("button",{disabled:g,type:"button",className:ae(l.items.item.base,m&&l.items.item.selected,g&&l.items.item.disabled),onClick:()=>{g||(s(p),c(hn.Days))},children:f},u)})})},mve=({theme:e={}})=>{const{theme:t,selectedDate:r,minDate:n,maxDate:i,viewDate:o,setViewDate:a,setView:s}=RS(),c=Re(t.views.years,e);return h.jsx("div",{className:c.items.base,children:[...Array(12)].map((l,d)=>{const p=Ip(o,10)+d,f=new Date(o.getTime());f.setFullYear(p);const m=r&&P0(r,f),g=!Sf(f,n,i);return h.jsx("button",{disabled:g,type:"button",className:ae(c.items.item.base,m&&c.items.item.selected,g&&c.items.item.disabled),onClick:()=>{g||(a(f),s(hn.Months))},children:p},d)})})},gve=({title:e,open:t,inline:r=!1,autoHide:n=!0,showClearButton:i=!0,labelClearButton:o="Clear",showTodayButton:a=!0,labelTodayButton:s="Today",defaultValue:c,minDate:l,maxDate:d,language:u="en",weekStart:p=P9.Sunday,className:f,theme:m={},onChange:g,label:y,value:v,...E},w)=>{const S=Re(rt().datepicker,m),x=c?Dv(c,l,d):null,O=T.useMemo(()=>c?Dv(c,l,d):new Date,[]),[L,j]=T.useState(t),[W,V]=T.useState(hn.Days),[Y,Z]=T.useState(v??x),[te,H]=T.useState(v??O),$=T.useRef(null),K=T.useRef(null),A=(z,U)=>{Z(z),(z===null||z)&&g&&g(z),n&&W===hn.Days&&U==!0&&!r&&j(!1)},N=()=>{A(x,!0),c&&H(c)};T.useImperativeHandle(w,()=>({focus(){var z;(z=$.current)==null||z.focus()},clear(){N()}}));const F=z=>{switch(z){case hn.Decades:return h.jsx(pve,{theme:S.views.decades});case hn.Years:return h.jsx(mve,{theme:S.views.years});case hn.Months:return h.jsx(fve,{theme:S.views.months});case hn.Days:default:return h.jsx(hve,{theme:S.views.days})}},P=()=>{switch(W){case hn.Days:return hn.Months;case hn.Months:return hn.Years;case hn.Years:return hn.Decades}return W},_=()=>{switch(W){case hn.Decades:return`${Ip(te,100)-10} - ${Ip(te,100)+100}`;case hn.Years:return`${Ip(te,10)} - ${Ip(te,10)+11}`;case hn.Months:return Rp(u,te,{year:"numeric"});case hn.Days:default:return Rp(u,te,{month:"long",year:"numeric"})}},R=(z,U,q)=>{switch(z){case hn.Days:return new Date(dve(U,q));case hn.Months:return new Date(Cp(U,q));case hn.Years:return new Date(Cp(U,q*10));case hn.Decades:return new Date(Cp(U,q*100));default:return new Date(Cp(U,q*10))}};T.useEffect(()=>{const z=U=>{var ue,me;const q=(ue=K==null?void 0:K.current)==null?void 0:ue.contains(U.target),oe=(me=$==null?void 0:$.current)==null?void 0:me.contains(U.target);!q&&!oe&&j(!1)};return document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[$,K,j]),T.useEffect(()=>{const z=v&&Dv(new Date(v),l,d),U=Y&&Dv(new Date(Y),l,d);U&&z&&!P0(z,U)&&Z(z),Y==null&&Z(x)},[v,Z,H,Y]);const k=v===null?y:Rp(u,Y||new Date);return h.jsx(k9.Provider,{value:{theme:S,language:u,minDate:l,maxDate:d,weekStart:p,isOpen:L,setIsOpen:j,view:W,setView:V,viewDate:te,setViewDate:H,selectedDate:Y,setSelectedDate:Z,changeSelectedDate:A},children:h.jsxs("div",{className:ae(S.root.base,f),children:[!r&&h.jsx(O9,{theme:S.root.input,icon:gme,ref:$,onFocus:()=>{Y&&!P0(te,Y)&&H(Y),j(!0)},value:k,readOnly:!0,defaultValue:x?Rp(u,x):y,...E}),(L||r)&&h.jsx("div",{ref:K,className:ae(S.popup.root.base,r&&S.popup.root.inline),children:h.jsxs("div",{className:S.popup.root.inner,children:[h.jsxs("div",{className:S.popup.header.base,children:[e&&h.jsx("div",{className:S.popup.header.title,children:e}),h.jsxs("div",{className:S.popup.header.selectors.base,children:[h.jsx("button",{type:"button",className:ae(S.popup.header.selectors.button.base,S.popup.header.selectors.button.prev),onClick:()=>H(R(W,te,-1)),children:h.jsx(fme,{})}),h.jsx("button",{type:"button",className:ae(S.popup.header.selectors.button.base,S.popup.header.selectors.button.view),onClick:()=>V(P()),children:_()}),h.jsx("button",{type:"button",className:ae(S.popup.header.selectors.button.base,S.popup.header.selectors.button.next),onClick:()=>H(R(W,te,1)),children:h.jsx(mme,{})})]})]}),h.jsx("div",{className:S.popup.view.base,children:F(W)}),(i||a)&&h.jsxs("div",{className:S.popup.footer.base,children:[a&&h.jsx("button",{type:"button",className:ae(S.popup.footer.button.base,S.popup.footer.button.today),onClick:()=>{const z=new Date;A(z,!0),H(z)},children:s}),i&&h.jsx("button",{type:"button",className:ae(S.popup.footer.button.base,S.popup.footer.button.clear),onClick:()=>{A(null,!0)},children:o})]})]})})]})})},yve=T.forwardRef(gve);yve.displayName="Datepicker";const D9=T.createContext(void 0);function L9(){const e=T.useContext(D9);if(!e)throw new Error("useDrawerContext should be used within the DrawerContext provider!");return e}function vve(e){return hi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(e)}function Eve(e){return hi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}const M9=({children:e,className:t,closeIcon:r=Eve,theme:n={},title:i,titleIcon:o=vve,...a})=>{const s=T.useId(),{id:c,isOpen:l,onClose:d,theme:u}=L9(),p=Re(u.header,n);return h.jsxs("div",{className:t,...a,children:[h.jsxs("h5",{className:p.inner.titleText,id:c,children:[h.jsx(o,{"aria-hidden":!0,className:p.inner.titleIcon}),i]}),h.jsxs("button",{onClick:d,"data-testid":"close-drawer",className:p.inner.closeButton,children:[h.jsx(r,{"aria-hidden":!0,className:p.inner.closeIcon}),h.jsx("span",{className:"sr-only",children:"Close menu"})]}),h.jsx("span",{className:p.collapsed[l?"on":"off"],id:`flowbite-drawer-header-${s}`,children:e})]})};M9.displayName="Drawer.Header";const j9=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=L9(),o=Re(i.items,r);return h.jsx("div",{"data-testid":"flowbite-drawer-items",className:ae(o.base,t),...n,children:e})};j9.displayName="Drawer.Items";const U9=({backdrop:e=!0,children:t,className:r,edge:n=!1,position:i="left",onClose:o,open:a=!1,theme:s={},...c})=>{const l=T.useId(),d=Re(rt().drawer,s);return T.useEffect(()=>{const u=p=>{p.key==="Escape"&&a&&o&&o()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[o,a]),h.jsxs(D9.Provider,{value:{theme:d,onClose:o,isOpen:a,id:l},children:[h.jsx("div",{"aria-modal":!0,"aria-describedby":`drawer-dialog-${l}`,role:"dialog",tabIndex:-1,"data-testid":"flowbite-drawer",className:ae(d.root.base,d.root.position[i][a?"on":"off"],n&&!a&&d.root.edge,r),...c,children:t}),a&&e&&h.jsx("div",{onClick:()=>o(),className:d.root.backdrop})]})};U9.displayName="Drawer";Object.assign(U9,{Header:M9,Items:j9});const F9=T.createContext(void 0);function yP(){const e=T.useContext(F9);if(!e)throw new Error("useDropdownContext should be used within the DropdownContext provider!");return e}const vP=({className:e,theme:t={},...r})=>{const{theme:n}=yP(),i=t.divider??n.floating.divider;return h.jsx("div",{className:ae(i,e),...r})},V9=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=yP(),o=r.header??i.floating.header;return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:ae(o,t),...n,children:e}),h.jsx(vP,{})]})},B9=T.forwardRef(({children:e,className:t,icon:r,onClick:n,theme:i={},...o},a)=>{const{ref:s,index:c}=Rye({label:typeof e=="string"?e:void 0}),l=l9([a,s]),{theme:d,activeIndex:u,dismissOnClick:p,getItemProps:f,handleSelect:m}=yP(),g=u===c,y=Re(d.floating.item,i),v=o;return h.jsx("li",{role:"menuitem",className:y.container,children:h.jsxs(Zk,{ref:l,className:ae(y.base,t),...v,...f({onClick:()=>{n==null||n(),p&&m(null)}}),tabIndex:g?0:-1,children:[r&&h.jsx(r,{className:y.icon}),e]})})});B9.displayName="DropdownItem";const _ve={top:wme,right:yz,bottom:gz,left:bme},bve=({refs:e,children:t,inline:r,theme:n,disabled:i,setButtonWidth:o,getReferenceProps:a,renderTrigger:s,...c})=>{const l=e.reference,d=a();if(T.useEffect(()=>{l.current&&(o==null||o(l.current.clientWidth))},[l,o]),s){const u=s(n);return T.cloneElement(u,{ref:e.setReference,disabled:i,...d,...u.props})}return r?h.jsx("button",{type:"button",ref:e.setReference,className:n==null?void 0:n.inlineWrapper,disabled:i,...d,children:t}):h.jsx(eP,{...c,disabled:i,type:"button",ref:e.setReference,...d,children:t})},$9=({children:e,className:t,dismissOnClick:r=!0,theme:n={},enableTypeAhead:i=!0,renderTrigger:o,...a})=>{const[s,c]=T.useState(!1),[l,d]=T.useState(null),[u,p]=T.useState(null),[f,m]=T.useState(void 0),g=T.useRef([]),y=T.useRef([]),v=Re(rt().dropdown,n),E=a,w=a["data-testid"]||"flowbite-dropdown-target",{placement:S=a.inline?"bottom-start":"bottom",trigger:x="click",label:O,inline:L,arrowIcon:j=!0,...W}=E,V=T.useCallback(_=>{p(_),c(!1)},[]),Y=T.useCallback(_=>{s?d(_):V(_)},[s,V]),{context:Z,floatingStyles:te,refs:H}=T9({open:s,setOpen:c,placement:S}),$=Qye(Z,{listRef:g,activeIndex:l,selectedIndex:u,onNavigate:d}),K=eve(Z,{listRef:y,activeIndex:l,selectedIndex:u,onMatch:Y,enabled:i}),{getReferenceProps:A,getFloatingProps:N,getItemProps:F}=C9({context:Z,role:"menu",trigger:x,interactions:[$,K]}),P=T.useMemo(()=>{const[_]=S.split("-");return _ve[_]??gz},[S]);return h.jsxs(F9.Provider,{value:{theme:v,activeIndex:l,dismissOnClick:r,getItemProps:F,handleSelect:V},children:[h.jsxs(bve,{...W,refs:H,inline:L,theme:v,"data-testid":w,className:ae(v.floating.target,W.className),setButtonWidth:m,getReferenceProps:A,renderTrigger:o,children:[O,j&&h.jsx(P,{className:v.arrowIcon})]}),s&&h.jsx(v9,{context:Z,modal:!1,children:h.jsx("div",{ref:H.setFloating,style:{...te,minWidth:f},"data-testid":"flowbite-dropdown","aria-expanded":s,...N({className:ae(v.floating.base,v.floating.animation,"duration-100",!s&&v.floating.hidden,v.floating.style.auto,t)}),children:h.jsx(Cye,{elementsRef:g,labelsRef:y,children:h.jsx("ul",{className:v.content,tabIndex:-1,children:e})})})})]})};$9.displayName="Dropdown";V9.displayName="Dropdown.Header";vP.displayName="Dropdown.Divider";const wve=Object.assign($9,{Item:B9,Header:V9,Divider:vP}),Eh=T.forwardRef(({className:e,color:t="gray",helperText:r,sizing:n="md",theme:i={},...o},a)=>{const s=Re(rt().fileInput,i);return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:ae(s.root.base,e),children:h.jsx("div",{className:s.field.base,children:h.jsx("input",{className:ae(s.field.input.base,s.field.input.colors[t],s.field.input.sizes[n]),...o,type:"file",ref:a})})}),r&&h.jsx(xy,{color:t,children:r})]})});Eh.displayName="FileInput";const Ue=T.forwardRef(({label:e,helperText:t,color:r="default",sizing:n="md",variant:i,disabled:o=!1,theme:a={},className:s,...c},l)=>{const d=T.useId(),u=Re(rt().floatingLabel,a);return h.jsxs("div",{children:[h.jsxs("div",{className:ae("relative",i==="standard"?"z-0":""),children:[h.jsx("input",{type:"text",id:c.id?c.id:"floatingLabel"+d,"aria-describedby":"outlined_success_help",className:ae(u.input[r][i][n],s),placeholder:" ","data-testid":"floating-label",disabled:o,...c,ref:l}),h.jsx("label",{htmlFor:c.id?c.id:"floatingLabel"+d,className:ae(u.label[r][i][n],s),children:e})]}),h.jsx("p",{id:"outlined_helper_text"+d,className:ae(u.helperText[r],s),children:t})]})});Ue.displayName="FloatingLabel";const H9=({alt:e,className:t,children:r,href:n,name:i,src:o,theme:a={},...s})=>{const c=Re(rt().footer.brand,a);return h.jsx("div",{children:n?h.jsxs("a",{"data-testid":"flowbite-footer-brand",href:n,className:ae(c.base,t),...s,children:[h.jsx("img",{alt:e,src:o,className:c.img}),h.jsx("span",{"data-testid":"flowbite-footer-brand-span",className:c.span,children:i}),r]}):h.jsx("img",{alt:e,"data-testid":"flowbite-footer-brand",src:o,className:ae(c.img,t),...s})})},W9=({by:e,className:t,href:r,theme:n={},year:i,...o})=>{const a=Re(rt().footer.copyright,n);return h.jsxs("div",{"data-testid":"flowbite-footer-copyright",className:ae(a.base,t),...o,children:["© ",i,r?h.jsx("a",{href:r,className:a.href,children:e}):h.jsx("span",{"data-testid":"flowbite-footer-copyright-span",className:a.span,children:e})]})},G9=({className:e,theme:t={},...r})=>{const n=Re(rt().footer.divider,t);return h.jsx("hr",{"data-testid":"footer-divider",className:ae(n.base,e),...r})},z9=({ariaLabel:e,className:t,href:r,icon:n,theme:i={},...o})=>{const a=Re(rt().footer.icon,i);return h.jsx("div",{children:r?h.jsx("a",{"aria-label":e,"data-testid":"flowbite-footer-icon",href:r,className:ae(a.base,t),...o,children:h.jsx(n,{className:a.size})}):h.jsx(n,{"data-testid":"flowbite-footer-icon",className:a.size,...o})})},K9=({as:e="a",children:t,className:r,href:n,theme:i={},...o})=>{const a=Re(rt().footer.groupLink.link,i);return h.jsx("li",{className:ae(a.base,r),children:h.jsx(e,{href:n,className:a.href,...o,children:t})})},q9=({children:e,className:t,col:r=!1,theme:n={},...i})=>{const o=Re(rt().footer.groupLink,n);return h.jsx("ul",{"data-testid":"footer-groupLink",className:ae(o.base,r&&o.col,t),...i,children:e})},Y9=({as:e="h2",className:t,theme:r={},title:n,...i})=>{const o=Re(rt().footer.title,r);return h.jsx(e,{"data-testid":"flowbite-footer-title",className:ae(o.base,t),...i,children:n})},X9=({bgDark:e=!1,children:t,className:r,container:n=!1,theme:i={},...o})=>{const a=Re(rt().footer,i);return h.jsx("footer",{"data-testid":"flowbite-footer",className:ae(a.root.base,e&&a.root.bgDark,n&&a.root.container,r),...o,children:t})};X9.displayName="Footer";W9.displayName="Footer.Copyright";K9.displayName="Footer.Link";H9.displayName="Footer.Brand";q9.displayName="Footer.LinkGroup";z9.displayName="Footer.Icon";Y9.displayName="Footer.Title";G9.displayName="Footer.Divider";Object.assign(X9,{Copyright:W9,Link:K9,LinkGroup:q9,Brand:H9,Icon:z9,Title:Y9,Divider:G9});const J9=T.forwardRef(({theme:e={},icon:t=sve,className:r,...n},i)=>{const o=Re(rt().hr.icon,e);return h.jsxs("div",{className:o.base,children:[h.jsx("hr",{className:ae(o.hrLine,r),role:"separator","data-testid":"flowbite-hr-icon",ref:i,...n}),h.jsx("div",{className:o.icon.base,children:h.jsx(t,{"aria-hidden":!0,className:o.icon.icon})})]})}),Q9=T.forwardRef(({theme:e={},className:t,...r},n)=>{const i=Re(rt().hr.square,e);return h.jsx("hr",{className:ae(i.base,t),role:"separator","data-testid":"flowbite-hr-square",ref:n,...r})}),Z9=T.forwardRef(({theme:e={},text:t,className:r,...n},i)=>{const o=Re(rt().hr.text,e);return h.jsxs("div",{className:o.base,children:[h.jsx("hr",{className:ae(o.hrLine,r),"data-testid":"flowbite-hr-text",role:"separator",ref:i,...n}),h.jsx("span",{className:o.text,children:t})]})}),eK=T.forwardRef(({theme:e={},className:t,...r},n)=>{const i=Re(rt().hr.trimmed,e);return h.jsx("hr",{className:ae(i.base,t),role:"separator","data-testid":"flowbite-hr-trimmed",ref:n,...r})}),tK=T.forwardRef(({theme:e={},className:t,...r},n)=>{const i=Re(rt().hr.root,e);return h.jsx("hr",{className:ae(i.base,t),role:"separator","data-testid":"flowbite-hr",ref:n,...r})});tK.displayName="HR";eK.displayName="HR.Trimmed";J9.displayName="HR.Icon";Z9.displayName="HR.Text";Q9.displayName="HR.Square";Object.assign(tK,{Trimmed:eK,Icon:J9,Text:Z9,Square:Q9});const rK=({children:e,className:t,icon:r,theme:n={},...i})=>{const o=Re(rt().list.item,n);return h.jsxs("li",{className:ae(o.withIcon[r?"on":"off"],t),...i,children:[r&&h.jsx(r,{className:ae(o.icon)}),e]})},nK=({children:e,className:t,unstyled:r,nested:n,ordered:i,horizontal:o,theme:a={},...s})=>{const c=Re(rt().list,a),l=i?"ol":"ul";return h.jsx(l,{className:ae(c.root.base,c.root.ordered[i?"on":"off"],r&&c.root.unstyled,n&&c.root.nested,o&&c.root.horizontal,t),...s,children:e})};nK.displayName="List";rK.displayName="List.Item";Object.assign(nK,{Item:rK});const iK=({active:e,children:t,className:r,href:n,icon:i,onClick:o,theme:a={},disabled:s,...c})=>{const l=Re(rt().listGroup.item,a),d=typeof n<"u",u=d?"a":"button";return h.jsx("li",{className:ae(l.base,r),children:h.jsxs(u,{href:n,onClick:o,type:d?void 0:"button",disabled:s,className:ae(l.link.active[e?"on":"off"],l.link.disabled[s?"on":"off"],l.link.base,l.link.href[d?"on":"off"]),...c,children:[i&&h.jsx(i,{"aria-hidden":!0,"data-testid":"flowbite-list-group-item-icon",className:l.link.icon}),t]})})},oK=({children:e,className:t,theme:r={},...n})=>{const i=Re(rt().listGroup,r);return h.jsx("ul",{className:ae(i.root.base,t),...n,children:e})};oK.displayName="ListGroup";iK.displayName="ListGroup.Item";Object.assign(oK,{Item:iK});const aK=T.createContext(void 0);function IS(){const e=T.useContext(aK);if(!e)throw new Error("useNavBarContext should be used within the NavbarContext provider!");return e}const sK=({as:e="a",children:t,className:r,theme:n={},...i})=>{const{theme:o}=IS(),a=Re(o.brand,n);return h.jsx(e,{className:ae(a.base,r),...i,children:t})},cK=({children:e,className:t,theme:r={},...n})=>{const{theme:i,isOpen:o}=IS(),a=Re(i.collapse,r);return h.jsx("div",{"data-testid":"flowbite-navbar-collapse",className:ae(a.base,a.hidden[o?"off":"on"],t),...n,children:h.jsx("ul",{className:a.list,children:e})})},lK=({active:e,as:t="a",disabled:r,children:n,className:i,theme:o={},onClick:a,...s})=>{const{theme:c,setIsOpen:l}=IS(),d=Re(c.link,o),u=p=>{l(!1),a==null||a(p)};return h.jsx("li",{children:h.jsx(t,{className:ae(d.base,e&&d.active.on,!e&&!r&&d.active.off,d.disabled[r?"on":"off"],i),onClick:u,...s,children:n})})};function Sve(e){return hi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(e)}const dK=({barIcon:e=Sve,className:t,theme:r={},...n})=>{const{theme:i,isOpen:o,setIsOpen:a}=IS(),s=Re(i.toggle,r),c=()=>{a(!o)};return h.jsxs("button",{"data-testid":"flowbite-navbar-toggle",onClick:c,className:ae(s.base,t),...n,children:[h.jsx("span",{className:"sr-only",children:"Open main menu"}),h.jsx(e,{"aria-hidden":!0,className:s.icon})]})},uK=({border:e,children:t,className:r,fluid:n=!1,menuOpen:i,rounded:o,theme:a={},...s})=>{const[c,l]=T.useState(i),d=Re(rt().navbar,a);return h.jsx(aK.Provider,{value:{theme:d,isOpen:c,setIsOpen:l},children:h.jsx("nav",{className:ae(d.root.base,d.root.bordered[e?"on":"off"],d.root.rounded[o?"on":"off"],r),...s,children:h.jsx("div",{className:ae(d.root.inner.base,d.root.inner.fluid[n?"on":"off"]),children:t})})})};uK.displayName="Navbar";sK.displayName="Navbar.Brand";cK.displayName="Navbar.Collapse";lK.displayName="Navbar.Link";dK.displayName="Navbar.Toggle";const Tve=Object.assign(uK,{Brand:sK,Collapse:cK,Link:lK,Toggle:dK}),hK=({children:e,className:t,theme:r={},toggle:n,...i})=>{const[o,a]=T.useState(void 0),s=Re(rt().megaMenu.dropdown,r);if(n)return h.jsx(wve,{inline:!0,label:n,placement:"bottom",theme:s.toggle,className:ae(s.base,t),children:e});const c=T.useId(),l=T.useRef(null);return T.useEffect(()=>{var u;a((u=function(){var f;const p=(f=l.current)==null?void 0:f.closest("nav");return p==null?void 0:p.querySelector('[aria-haspopup="menu"]')}())==null?void 0:u.id)},[]),h.jsx("div",{"aria-labelledby":o,id:c,ref:l,role:"menu",className:ae(s.base,t),...i,children:e})};hK.displayName="MegaMenu.Dropdown";const pK=({children:e,className:t,theme:r={},...n})=>{const i=T.useId(),o=T.useRef(null),[a,s]=T.useState(void 0),[c,l]=T.useState(void 0),d=Re(rt().megaMenu.dropdownToggle,r),u=function(){var m;const f=(m=o.current)==null?void 0:m.closest("nav");return f==null?void 0:f.querySelector('[role="menu"]')},p=function(){var f;(f=u())==null||f.classList.toggle("hidden"),l(!c)};return T.useEffect(()=>{const f=u(),m=f==null?void 0:f.classList.contains("hidden");s(f==null?void 0:f.id),l(!m)},[]),h.jsx("button",{"aria-controls":a,"aria-expanded":c,"aria-haspopup":"menu",id:i,onClick:p,ref:o,className:ae(d.base,t),...n,children:e})};pK.displayName="MegaMenu.DropdownToggle";const fK=({children:e,theme:t={},...r})=>{const n=Re(rt().megaMenu,t);return h.jsx(Tve,{fluid:!0,theme:n,...r,children:e})};Object.assign(fK,{Dropdown:hK,DropdownToggle:pK});fK.displayName="MegaMenu";const mK=T.createContext(void 0);function EP(){const e=T.useContext(mK);if(!e)throw new Error("useModalContext should be used within the ModalContext provider!");return e}const gK=({children:e,className:t,theme:r={},...n})=>{const{theme:i,popup:o}=EP(),a=Re(i.body,r);return h.jsx("div",{className:ae(a.base,o&&[a.popup],t),...n,children:e})},yK=({children:e,className:t,theme:r={},...n})=>{const{theme:i,popup:o}=EP(),a=Re(i.footer,r);return h.jsx("div",{className:ae(a.base,!o&&a.popup,t),...n,children:e})},vK=({as:e="h3",children:t,className:r,theme:n={},id:i,...o})=>{const a=T.useId(),s=i||a,{theme:c,popup:l,onClose:d,setHeaderId:u}=EP(),p=Re(c.header,n);return T.useLayoutEffect(()=>(u(s),()=>u(void 0)),[s,u]),h.jsxs("div",{className:ae(p.base,l&&p.popup,r),...o,children:[h.jsx(e,{id:s,className:p.title,children:t}),h.jsx("button",{"aria-label":"Close",className:p.close.base,type:"button",onClick:d,children:h.jsx(Sme,{"aria-hidden":!0,className:p.close.icon})})]})},EK=T.forwardRef(({children:e,className:t,dismissible:r=!1,onClose:n,popup:i,position:o="center",root:a,show:s,size:c="2xl",theme:l={},initialFocus:d,...u},p)=>{const[f,m]=T.useState(void 0),g=Re(rt().modal,l),{context:y}=b9({open:s,onOpenChange:()=>n&&n()}),v=l9([y.refs.setFloating,p]),E=E9(y),w=_9(y,{outsidePressEvent:"mousedown",enabled:r}),S=S9(y),{getFloatingProps:x}=w9([E,w,S]);return s?h.jsx(mK.Provider,{value:{theme:g,popup:i,onClose:n,setHeaderId:m},children:h.jsx(Wye,{root:a,children:h.jsx(zye,{lockScroll:!0,"data-testid":"modal-overlay",className:ae(g.root.base,g.root.positions[o],s?g.root.show.on:g.root.show.off,t),...u,children:h.jsx(v9,{context:y,initialFocus:d,children:h.jsx("div",{ref:v,...x(u),"aria-labelledby":f,className:ae(g.content.base,g.root.sizes[c]),children:h.jsx("div",{className:g.content.inner,children:e})})})})})}):null});EK.displayName="Modal";vK.displayName="Modal.Header";gK.displayName="Modal.Body";yK.displayName="Modal.Footer";const Lv=Object.assign(EK,{Header:vK,Body:gK,Footer:yK}),Cve=(e,t)=>e>=t?[]:[...Array(t-e+1).keys()].map(r=>r+e),_P=({active:e,children:t,className:r,onClick:n,theme:i={},...o})=>{const a=Re(rt().pagination,i);return h.jsx("button",{type:"button",className:ae(e&&a.pages.selector.active,r),onClick:n,...o,children:t})};_P.displayName="Pagination.Button";const GA=({children:e,className:t,onClick:r,theme:n={},disabled:i=!1,...o})=>{const a=Re(rt().pagination,n);return h.jsx("button",{type:"button",className:ae(i&&a.pages.selector.disabled,t),disabled:i,onClick:r,...o,children:e})};GA.displayName="Pagination.Navigation";const _K=({className:e,currentPage:t,layout:r="pagination",nextLabel:n="Next",onPageChange:i,previousLabel:o="Previous",renderPaginationButton:a=u=>h.jsx(_P,{...u}),showIcons:s=!1,theme:c={},totalPages:l,...d})=>{const u=Re(rt().pagination,c),p=Math.min(Math.max(r==="pagination"?t+2:t+4,5),l),f=Math.max(1,p-4),m=()=>{i(Math.min(t+1,l))},g=()=>{i(Math.max(t-1,1))};return h.jsxs("nav",{className:ae(u.base,e),...d,children:[r==="table"&&h.jsxs("div",{className:u.layout.table.base,children:["Showing ",h.jsx("span",{className:u.layout.table.span,children:f})," to ",h.jsx("span",{className:u.layout.table.span,children:p})," of ",h.jsx("span",{className:u.layout.table.span,children:l})," Entries"]}),h.jsxs("ul",{className:u.pages.base,children:[h.jsx("li",{children:h.jsxs(GA,{className:ae(u.pages.previous.base,s&&u.pages.showIcon),onClick:g,disabled:t===1,children:[s&&h.jsx(yme,{"aria-hidden":!0,className:u.pages.previous.icon}),o]})}),r==="pagination"&&Cve(f,p).map(y=>h.jsx("li",{"aria-current":y===t?"page":void 0,children:a({className:ae(u.pages.selector.base,t===y&&u.pages.selector.active),active:y===t,onClick:()=>i(y),children:y})},y)),h.jsx("li",{children:h.jsxs(GA,{className:ae(u.pages.next.base,s&&u.pages.showIcon),onClick:m,disabled:t===l,children:[n,s&&h.jsx(vme,{"aria-hidden":!0,className:u.pages.next.icon})]})})]})]})};_K.displayName="Pagination";Object.assign(_K,{Button:_P});const Rve=T.forwardRef(({className:e,theme:t={},...r},n)=>{const i=Re(rt().radio,t);return h.jsx("input",{ref:n,type:"radio",className:ae(i.root.base,e),...r})});Rve.displayName="Radio";const Ive=T.forwardRef(({className:e,sizing:t="md",theme:r={},...n},i)=>{const o=Re(rt().rangeSlider,r);return h.jsx(h.Fragment,{children:h.jsx("div",{"data-testid":"flowbite-range-slider",className:ae(o.root.base,e),children:h.jsx("div",{className:o.field.base,children:h.jsx("input",{ref:i,type:"range",className:ae(o.field.input.base,o.field.input.sizes[t]),...n})})})})});Ive.displayName="RangeSlider";const bK=({children:e,className:t,percentFilled:r=0,theme:n={},...i})=>{const o=Re(rt().ratingAdvanced,n);return h.jsxs("div",{className:ae(o.base,t),...i,children:[h.jsx("span",{className:o.label,children:e}),h.jsx("div",{className:o.progress.base,children:h.jsx("div",{className:o.progress.fill,"data-testid":"flowbite-rating-fill",style:{width:`${r}%`}})}),h.jsx("span",{className:o.progress.label,children:`${r}%`})]})},wK=T.createContext(void 0);function xve(){const e=T.useContext(wK);if(!e)throw new Error("useRatingContext should be used within the RatingContext provider!");return e}const SK=({className:e,filled:t=!0,starIcon:r=Eme,theme:n={},...i})=>{const{theme:o,size:a="sm"}=xve(),s=Re(o.star,n);return h.jsx(r,{"data-testid":"flowbite-rating-star",className:ae(s.sizes[a],s[t?"filled":"empty"],e),...i})},TK=({children:e,className:t,size:r="sm",theme:n={},...i})=>{const o=Re(rt().rating,n);return h.jsx(wK.Provider,{value:{theme:o,size:r},children:h.jsx("div",{className:ae(o.root.base,t),...i,children:e})})};TK.displayName="Rating";SK.displayName="Rating.Star";bK.displayName="Rating.Advanced";Object.assign(TK,{Star:SK,Advanced:bK});const Ave=T.forwardRef(({addon:e,children:t,className:r,color:n="gray",helperText:i,icon:o,shadow:a,sizing:s="md",theme:c={},...l},d)=>{const u=Re(rt().select,c);return h.jsxs("div",{className:ae(u.base,r),children:[e&&h.jsx("span",{className:u.addon,children:e}),h.jsxs("div",{className:u.field.base,children:[o&&h.jsx("div",{className:u.field.icon.base,children:h.jsx(o,{className:u.field.icon.svg})}),h.jsx("select",{className:ae(u.field.select.base,u.field.select.colors[n],u.field.select.sizes[s],u.field.select.withIcon[o?"on":"off"],u.field.select.withAddon[e?"on":"off"],u.field.select.withShadow[a?"on":"off"]),...l,ref:d,children:t}),i&&h.jsx(xy,{color:n,children:i})]})]})});Ave.displayName="Select";const CK=T.createContext(void 0);function nm(){const e=T.useContext(CK);if(!e)throw new Error("useSidebarContext should be used within the SidebarContext provider!");return e}const bP=T.createContext(void 0);function Nve(){const e=T.useContext(bP);if(!e)throw new Error("useSidebarItemContext should be used within the SidebarItemContext provider!");return e}const RK=({children:e,className:t,icon:r,label:n,chevronIcon:i=mz,renderChevronIcon:o,open:a=!1,theme:s={},...c})=>{const l=T.useId(),[d,u]=T.useState(a),{theme:p,isCollapsed:f}=nm(),m=Re(p.collapse,s);T.useEffect(()=>u(a),[a]);const g=({children:y})=>h.jsx("li",{children:f&&!d?h.jsx(CS,{content:n,placement:"right",children:y}):y});return h.jsxs(g,{children:[h.jsxs("button",{id:`flowbite-sidebar-collapse-${l}`,onClick:()=>u(!d),title:n,type:"button",className:ae(m.button,t),...c,children:[r&&h.jsx(r,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-collapse-icon",className:ae(m.icon.base,m.icon.open[d?"on":"off"])}),f?h.jsx("span",{className:"sr-only",children:n}):h.jsxs(h.Fragment,{children:[h.jsx("span",{"data-testid":"flowbite-sidebar-collapse-label",className:m.label.base,children:n}),o?o(m,d):h.jsx(i,{"aria-hidden":!0,className:ae(m.label.icon.base,m.label.icon.open[d?"on":"off"])})]})]}),h.jsx("ul",{"aria-labelledby":`flowbite-sidebar-collapse-${l}`,hidden:!d,className:m.list,children:h.jsx(bP.Provider,{value:{isInsideCollapse:!0},children:e})})]})};RK.displayName="Sidebar.Collapse";const IK=({children:e,color:t="info",className:r,theme:n={},...i})=>{const{theme:o,isCollapsed:a}=nm(),s=Re(o.cta,n);return h.jsx("div",{"data-testid":"sidebar-cta",hidden:a,className:ae(s.base,s.color[t],r),...i,children:e})};IK.displayName="Sidebar.CTA";const Ove=({id:e,theme:t,isCollapsed:r,tooltipChildren:n,children:i,...o})=>h.jsx("li",{...o,children:r?h.jsx(CS,{content:h.jsx(xK,{id:e,theme:t,children:n}),placement:"right",children:i}):i}),xK=({id:e,theme:t,children:r})=>h.jsx("span",{"data-testid":"flowbite-sidebar-item-content",id:`flowbite-sidebar-item-${e}`,className:ae(t.content.base),children:r}),AK=T.forwardRef(({active:e,as:t="a",children:r,className:n,icon:i,label:o,labelColor:a="info",theme:s={},...c},l)=>{var g,y,v,E;const d=T.useId(),{theme:u,isCollapsed:p}=nm(),{isInsideCollapse:f}=Nve(),m=Re(u.item,s);return h.jsx(Ove,{theme:m,className:m.listItem,id:d,isCollapsed:p,tooltipChildren:r,children:h.jsxs(t,{"aria-labelledby":`flowbite-sidebar-item-${d}`,ref:l,className:ae(m.base,e&&m.active,!p&&f&&((g=m.collapsed)==null?void 0:g.insideCollapse),n),...c,children:[i&&h.jsx(i,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-item-icon",className:ae((y=m.icon)==null?void 0:y.base,e&&((v=m.icon)==null?void 0:v.active))}),p&&!i&&h.jsx("span",{className:(E=m.collapsed)==null?void 0:E.noIcon,children:r.charAt(0).toLocaleUpperCase()??"?"}),!p&&h.jsx(xK,{id:d,theme:m,children:r}),!p&&o&&h.jsx(kz,{color:a,"data-testid":"flowbite-sidebar-label",hidden:p,className:m.label,children:o})]})})});AK.displayName="Sidebar.Item";const NK=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=nm(),o=Re(i.itemGroup,r);return h.jsx("ul",{"data-testid":"flowbite-sidebar-item-group",className:ae(o.base,t),...n,children:h.jsx(bP.Provider,{value:{isInsideCollapse:!1},children:e})})};NK.displayName="Sidebar.ItemGroup";const OK=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=nm(),o=Re(i.items,r);return h.jsx("div",{className:ae(o.base,t),"data-testid":"flowbite-sidebar-items",...n,children:e})};OK.displayName="Sidebar.Items";const kK=({children:e,className:t,href:r,img:n,imgAlt:i="",theme:o={},...a})=>{const s=T.useId(),{theme:c,isCollapsed:l}=nm(),d=Re(c.logo,o);return h.jsxs("a",{"aria-labelledby":`flowbite-sidebar-logo-${s}`,href:r,className:ae(d.base,t),...a,children:[h.jsx("img",{alt:i,src:n,className:d.img}),h.jsx("span",{className:d.collapsed[l?"on":"off"],id:`flowbite-sidebar-logo-${s}`,children:e})]})};kK.displayName="Sidebar.Logo";const PK=({children:e,as:t="nav",collapseBehavior:r="collapse",collapsed:n=!1,theme:i={},className:o,...a})=>{const s=Re(rt().sidebar,i);return h.jsx(CK.Provider,{value:{theme:s,isCollapsed:n},children:h.jsx(t,{"aria-label":"Sidebar",hidden:n&&r==="hide",className:ae(s.root.base,s.root.collapsed[n?"on":"off"],o),...a,children:h.jsx("div",{className:s.root.inner,children:e})})})};PK.displayName="Sidebar";Object.assign(PK,{Collapse:RK,CTA:IK,Item:AK,Items:OK,ItemGroup:NK,Logo:kK});const DK=T.createContext(void 0);function kve(){const e=T.useContext(DK);if(!e)throw new Error("useTableBodyContext should be used within the TableBodyContext provider!");return e}const LK=T.createContext(void 0);function wP(){const e=T.useContext(LK);if(!e)throw new Error("useTableContext should be used within the TableContext provider!");return e}const MK=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o}=wP(),a=Re(o.body,r);return h.jsx(DK.Provider,{value:{theme:a},children:h.jsx("tbody",{className:ae(a.base,t),ref:i,...n,children:e})})});MK.displayName="Table.Body";const jK=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o}=kve(),a=Re(o.cell,r);return h.jsx("td",{className:ae(a.base,t),ref:i,...n,children:e})});jK.displayName="Table.Cell";const UK=T.createContext(void 0);function Pve(){const e=T.useContext(UK);if(!e)throw new Error("useTableHeadContext should be used within the TableHeadContext provider!");return e}const FK=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o}=wP(),a=Re(o.head,r);return h.jsx(UK.Provider,{value:{theme:a},children:h.jsx("thead",{className:ae(a.base,t),ref:i,...n,children:h.jsx("tr",{children:e})})})});FK.displayName="Table.Head";const VK=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o}=Pve(),a=Re(o.cell,r);return h.jsx("th",{className:ae(a.base,t),ref:i,...n,children:e})});VK.displayName="Table.HeadCell";const BK=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o,hoverable:a,striped:s}=wP(),c=Re(o.row,r);return h.jsx("tr",{ref:i,"data-testid":"table-row-element",className:ae(c.base,s&&c.striped,a&&c.hovered,t),...n,children:e})});BK.displayName="Table.Row";const $K=T.forwardRef(({children:e,className:t,striped:r,hoverable:n,theme:i={},...o},a)=>{const s=Re(rt().table,i);return h.jsx("div",{"data-testid":"table-element",className:ae(s.root.wrapper),children:h.jsxs(LK.Provider,{value:{theme:s,striped:r,hoverable:n},children:[h.jsx("div",{className:ae(s.root.shadow,t)}),h.jsx("table",{className:ae(s.root.base,t),...o,ref:a,children:e})]})})});$K.displayName="Table";const ur=Object.assign($K,{Head:FK,Body:MK,Row:BK,Cell:jK,HeadCell:VK}),HK=({children:e,className:t})=>h.jsx("div",{className:t,children:e});HK.displayName="Tabs.Item";const WK=T.forwardRef(({children:e,className:t,onActiveTabChange:r,variant:n="default",theme:i={},...o},a)=>{const s=Re(rt().tabs,i),c=T.useId(),l=T.useMemo(()=>T.Children.map(T.Children.toArray(e),({props:S})=>S),[e]),d=T.useRef([]),[u,p]=T.useState(Math.max(0,l.findIndex(S=>S.active))),[f,m]=T.useState(-1),g=S=>{p(S),r&&r(S)},y=({target:S})=>{g(S),m(S)},v=({event:S,target:x})=>{S.key==="ArrowLeft"&&m(Math.max(0,f-1)),S.key==="ArrowRight"&&m(Math.min(l.length-1,f+1)),S.key==="Enter"&&(g(x),m(x))},E=s.tablist.tabitem.variant[n],w=s.tabitemcontainer.variant[n];return T.useEffect(()=>{var S;(S=d.current[f])==null||S.focus()},[f]),T.useImperativeHandle(a,()=>({setActiveTab:g})),h.jsxs("div",{className:ae(s.base,t),children:[h.jsx("div",{"aria-label":"Tabs",role:"tablist",className:ae(s.tablist.base,s.tablist.variant[n],t),...o,children:l.map((S,x)=>h.jsxs("button",{type:"button","aria-controls":`${c}-tabpanel-${x}`,"aria-selected":x===u,className:ae(s.tablist.tabitem.base,E.base,x===u&&E.active.on,x!==u&&!S.disabled&&E.active.off),disabled:S.disabled,id:`${c}-tab-${x}`,onClick:()=>y({target:x}),onKeyDown:O=>v({event:O,target:x}),ref:O=>d.current[x]=O,role:"tab",tabIndex:x===f?0:-1,style:{zIndex:x===f?2:1},children:[S.icon&&h.jsx(S.icon,{className:s.tablist.tabitem.icon}),S.title]},x))}),h.jsx("div",{className:ae(s.tabitemcontainer.base,w),children:l.map((S,x)=>h.jsx("div",{"aria-labelledby":`${c}-tab-${x}`,className:s.tabpanel,hidden:x!==u,id:`${c}-tabpanel-${x}`,role:"tabpanel",tabIndex:0,children:S.children},x))})]})});WK.displayName="Tabs";Object.assign(WK,{Item:HK});const Dve=T.forwardRef(({className:e,color:t="gray",helperText:r,shadow:n,theme:i={},...o},a)=>{const s=Re(rt().textarea,i);return h.jsxs(h.Fragment,{children:[h.jsx("textarea",{ref:a,className:ae(s.base,s.colors[t],s.withShadow[n?"on":"off"],e),...o}),r&&h.jsx(xy,{color:t,children:r})]})});Dve.displayName="Textarea";const GK=T.createContext(void 0);function SP(){const e=T.useContext(GK);if(!e)throw new Error("useTimelineContentContext should be used within the TimelineContentContext provider!");return e}const zK=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=SP(),o=Re(i.body,r);return h.jsx("div",{className:ae(o.base,t),...n,children:e})},KK=T.createContext(void 0);function TP(){const e=T.useContext(KK);if(!e)throw new Error("useTimelineContext should be used within the TimelineContext provider!");return e}const qK=T.createContext(void 0);function YK(){const e=T.useContext(qK);if(!e)throw new Error("useTimelineItemContext should be used within the TimelineItemContext provider!");return e}const XK=({children:e,className:t,theme:r={},...n})=>{const{horizontal:i}=TP(),{theme:o}=YK(),a=Re(o.content,r);return h.jsx(GK.Provider,{value:{theme:a},children:h.jsx("div",{"data-testid":"timeline-content",className:ae(a.root.base,i?a.root.horizontal:a.root.vertical,t),...n,children:e})})},JK=({children:e,className:t,theme:r={},...n})=>{const{theme:i,horizontal:o}=TP(),a=Re(i.item,r);return h.jsx(qK.Provider,{value:{theme:a},children:h.jsx("li",{"data-testid":"timeline-item",className:ae(o&&a.root.horizontal,!o&&a.root.vertical,t),...n,children:e})})},QK=({children:e,className:t,icon:r,theme:n={},...i})=>{const{horizontal:o}=TP(),{theme:a}=YK(),s=Re(a.point,n);return h.jsxs("div",{"data-testid":"timeline-point",className:ae(o&&s.horizontal,!o&&s.vertical,t),...i,children:[e,r?h.jsx("span",{className:ae(s.marker.icon.wrapper),children:h.jsx(r,{"aria-hidden":!0,className:ae(s.marker.icon.base)})}):h.jsx("div",{className:ae(o&&s.marker.base.horizontal,!o&&s.marker.base.vertical)}),o&&h.jsx("div",{className:ae(s.line)})]})},ZK=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=SP(),o=Re(i.time,r);return h.jsx("time",{className:ae(o.base,t),...n,children:e})},eq=({as:e="h3",children:t,className:r,theme:n={},...i})=>{const{theme:o}=SP(),a=Re(o.title,n);return h.jsx(e,{className:ae(a.base,r),...i,children:t})},tq=({children:e,className:t,horizontal:r,theme:n={},...i})=>{const o=Re(rt().timeline,n);return h.jsx(KK.Provider,{value:{theme:o,horizontal:r},children:h.jsx("ol",{"data-testid":"timeline-component",className:ae(r&&o.root.direction.horizontal,!r&&o.root.direction.vertical,t),...i,children:e})})};tq.displayName="Timeline";JK.displayName="Timeline.Item";QK.displayName="Timeline.Point";XK.displayName="Timeline.Content";ZK.displayName="Timeline.Time";eq.displayName="Timeline.Title";zK.displayName="Timeline.Body";Object.assign(tq,{Item:JK,Point:QK,Content:XK,Time:ZK,Title:eq,Body:zK});const rq=T.createContext(void 0);function Lve(){const e=T.useContext(rq);if(!e)throw new Error("useToastContext should be used within the ToastContext provider!");return e}const nq=({className:e,onClick:t,theme:r={},xIcon:n=_me,onDismiss:i,...o})=>{const{theme:a,duration:s,isClosed:c,isRemoved:l,setIsClosed:d,setIsRemoved:u}=Lve(),p=Re(a.toggle,r),f=m=>{if(t&&t(m),i){i();return}d(!c),setTimeout(()=>u(!l),s)};return h.jsx("button",{"aria-label":"Close",onClick:f,type:"button",className:ae(p.base,e),...o,children:h.jsx(n,{"aria-hidden":!0,className:p.icon})})},Mve={75:"duration-75",100:"duration-100",150:"duration-150",200:"duration-200",300:"duration-300",500:"duration-500",700:"duration-700",1e3:"duration-1000"},iq=({children:e,className:t,duration:r=300,theme:n={},...i})=>{const[o,a]=T.useState(!1),[s,c]=T.useState(!1),l=Re(rt().toast,n);return s?null:h.jsx(rq.Provider,{value:{theme:l,duration:r,isClosed:o,isRemoved:s,setIsClosed:a,setIsRemoved:c},children:h.jsx("div",{"data-testid":"flowbite-toast",role:"alert",className:ae(l.root.base,Mve[r],o&&l.root.closed,t),...i,children:e})})};iq.displayName="Toast";nq.displayName="Toast.Toggle";Object.assign(iq,{Toggle:nq});const jve=T.forwardRef(({checked:e,className:t,color:r="blue",sizing:n="md",disabled:i,label:o,name:a,onChange:s,theme:c={},...l},d)=>{const u=T.useId(),p=Re(rt().toggleSwitch,c),f=()=>s(!e),m=()=>{f()},g=y=>{y.code=="Enter"&&y.preventDefault()};return h.jsxs(h.Fragment,{children:[a&&e?h.jsx("input",{ref:d,checked:e,hidden:!0,name:a,readOnly:!0,type:"checkbox",className:"sr-only"}):null,h.jsxs("button",{"aria-checked":e,"aria-labelledby":`${u}-flowbite-toggleswitch-label`,disabled:i,id:`${u}-flowbite-toggleswitch`,onClick:m,onKeyDown:g,role:"switch",tabIndex:0,type:"button",className:ae(p.root.base,p.root.active[i?"off":"on"],t),...l,children:[h.jsx("div",{"data-testid":"flowbite-toggleswitch-toggle",className:ae(p.toggle.base,p.toggle.checked[e?"on":"off"],e&&p.toggle.checked.color[r],p.toggle.sizes[n])}),o!=null&&o.length?h.jsx("span",{"data-testid":"flowbite-toggleswitch-label",id:`${u}-flowbite-toggleswitch-label`,className:p.root.label,children:o}):null]})]})});jve.displayName="ToggleSwitch";const Uve={firstName:"",lastName:"",profileImage:"",weight:"",height:""},oq=Jf({name:"patient",initialState:Uve,reducers:{setPatient(e,t){e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,e.profileImage=t.payload.profileImage,e.weight=t.payload.weight,e.height=t.payload.height}}}),{setPatient:AC}=oq.actions,Fve=oq.reducer,Vve="https://hcompanion.onrender.com/api",aq=async({token:e})=>{try{const t=await Ee.get(`${Vve}/patient/getBasicDetails`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.userData}catch(t){return console.log(t),t.response.status=="401"||t.response.status=="400",!1}},xS="https://hcompanion.onrender.com/api",sq=sessionStorage.getItem("token"),Bve=async e=>{try{const t=await Ee.post(`${xS}/patient/profile/updateDetails`,e,{headers:{"content-type":" multipart/form-data",Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(t),re.fire({icon:"success",text:"Profile has been Updated"}),!0}catch(t){console.log(t)}},cq=async()=>{try{const e=await Ee.get(`${xS}/patient/profile/viewDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(e),e.data.patientDetails}catch(e){console.log(e),(e.response.status=e.response.data.invalidToken)&&re.fire({icon:"warning",text:"Login to access profile"})}},$ve=async()=>{var e,t,r,n,i,o;try{return(await Ee.get(`${xS}/patient/profile/getAddessAndPhone`,{headers:{Authorization:`bearer ${sq}`}})).data.contactDetails}catch(a){return console.log(a),((e=a==null?void 0:a.response)==null?void 0:e.status)=="500"&&((r=(t=a==null?void 0:a.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Error at the Server","","error"),((n=a==null?void 0:a.response)==null?void 0:n.status)=="400"&&((o=(i=a==null?void 0:a.response)==null?void 0:i.data)!=null&&o.invalidToken)&&re.fire("Log in","","error"),!1}},Hve=async e=>{var t,r,n,i,o,a;try{const s=await Ee.post(`${xS}/patient/profile/updateAddessAndPhone`,e,{headers:{Authorization:`bearer ${sq}`}});return!0}catch(s){return console.log(s),((t=s==null?void 0:s.response)==null?void 0:t.status)=="500"&&((n=(r=s==null?void 0:s.response)==null?void 0:r.data)!=null&&n.errorServer)&&re.fire("Error at the Server","","error"),((i=s==null?void 0:s.response)==null?void 0:i.status)=="400"&&((a=(o=s==null?void 0:s.response)==null?void 0:o.data)!=null&&a.invalidToken)&&re.fire("Log in","","error"),!1}};var lq={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(vw,function(){var r=1e3,n=6e4,i=36e5,o="millisecond",a="second",s="minute",c="hour",l="day",d="week",u="month",p="quarter",f="year",m="date",g="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(H){var $=["th","st","nd","rd"],K=H%100;return"["+H+($[(K-20)%10]||$[K]||$[0])+"]"}},w=function(H,$,K){var A=String(H);return!A||A.length>=$?H:""+Array($+1-A.length).join(K)+H},S={s:w,z:function(H){var $=-H.utcOffset(),K=Math.abs($),A=Math.floor(K/60),N=K%60;return($<=0?"+":"-")+w(A,2,"0")+":"+w(N,2,"0")},m:function H($,K){if($.date()<K.date())return-H(K,$);var A=12*(K.year()-$.year())+(K.month()-$.month()),N=$.clone().add(A,u),F=K-N<0,P=$.clone().add(A+(F?-1:1),u);return+(-(A+(K-N)/(F?N-P:P-N))||0)},a:function(H){return H<0?Math.ceil(H)||0:Math.floor(H)},p:function(H){return{M:u,y:f,w:d,d:l,D:m,h:c,m:s,s:a,ms:o,Q:p}[H]||String(H||"").toLowerCase().replace(/s$/,"")},u:function(H){return H===void 0}},x="en",O={};O[x]=E;var L="$isDayjsObject",j=function(H){return H instanceof Z||!(!H||!H[L])},W=function H($,K,A){var N;if(!$)return x;if(typeof $=="string"){var F=$.toLowerCase();O[F]&&(N=F),K&&(O[F]=K,N=F);var P=$.split("-");if(!N&&P.length>1)return H(P[0])}else{var _=$.name;O[_]=$,N=_}return!A&&N&&(x=N),N||!A&&x},V=function(H,$){if(j(H))return H.clone();var K=typeof $=="object"?$:{};return K.date=H,K.args=arguments,new Z(K)},Y=S;Y.l=W,Y.i=j,Y.w=function(H,$){return V(H,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var Z=function(){function H(K){this.$L=W(K.locale,null,!0),this.parse(K),this.$x=this.$x||K.x||{},this[L]=!0}var $=H.prototype;return $.parse=function(K){this.$d=function(A){var N=A.date,F=A.utc;if(N===null)return new Date(NaN);if(Y.u(N))return new Date;if(N instanceof Date)return new Date(N);if(typeof N=="string"&&!/Z$/i.test(N)){var P=N.match(y);if(P){var _=P[2]-1||0,R=(P[7]||"0").substring(0,3);return F?new Date(Date.UTC(P[1],_,P[3]||1,P[4]||0,P[5]||0,P[6]||0,R)):new Date(P[1],_,P[3]||1,P[4]||0,P[5]||0,P[6]||0,R)}}return new Date(N)}(K),this.init()},$.init=function(){var K=this.$d;this.$y=K.getFullYear(),this.$M=K.getMonth(),this.$D=K.getDate(),this.$W=K.getDay(),this.$H=K.getHours(),this.$m=K.getMinutes(),this.$s=K.getSeconds(),this.$ms=K.getMilliseconds()},$.$utils=function(){return Y},$.isValid=function(){return this.$d.toString()!==g},$.isSame=function(K,A){var N=V(K);return this.startOf(A)<=N&&N<=this.endOf(A)},$.isAfter=function(K,A){return V(K)<this.startOf(A)},$.isBefore=function(K,A){return this.endOf(A)<V(K)},$.$g=function(K,A,N){return Y.u(K)?this[A]:this.set(N,K)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(K,A){var N=this,F=!!Y.u(A)||A,P=Y.p(K),_=function(me,De){var We=Y.w(N.$u?Date.UTC(N.$y,De,me):new Date(N.$y,De,me),N);return F?We:We.endOf(l)},R=function(me,De){return Y.w(N.toDate()[me].apply(N.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(De)),N)},k=this.$W,z=this.$M,U=this.$D,q="set"+(this.$u?"UTC":"");switch(P){case f:return F?_(1,0):_(31,11);case u:return F?_(1,z):_(0,z+1);case d:var oe=this.$locale().weekStart||0,ue=(k<oe?k+7:k)-oe;return _(F?U-ue:U+(6-ue),z);case l:case m:return R(q+"Hours",0);case c:return R(q+"Minutes",1);case s:return R(q+"Seconds",2);case a:return R(q+"Milliseconds",3);default:return this.clone()}},$.endOf=function(K){return this.startOf(K,!1)},$.$set=function(K,A){var N,F=Y.p(K),P="set"+(this.$u?"UTC":""),_=(N={},N[l]=P+"Date",N[m]=P+"Date",N[u]=P+"Month",N[f]=P+"FullYear",N[c]=P+"Hours",N[s]=P+"Minutes",N[a]=P+"Seconds",N[o]=P+"Milliseconds",N)[F],R=F===l?this.$D+(A-this.$W):A;if(F===u||F===f){var k=this.clone().set(m,1);k.$d[_](R),k.init(),this.$d=k.set(m,Math.min(this.$D,k.daysInMonth())).$d}else _&&this.$d[_](R);return this.init(),this},$.set=function(K,A){return this.clone().$set(K,A)},$.get=function(K){return this[Y.p(K)]()},$.add=function(K,A){var N,F=this;K=Number(K);var P=Y.p(A),_=function(z){var U=V(F);return Y.w(U.date(U.date()+Math.round(z*K)),F)};if(P===u)return this.set(u,this.$M+K);if(P===f)return this.set(f,this.$y+K);if(P===l)return _(1);if(P===d)return _(7);var R=(N={},N[s]=n,N[c]=i,N[a]=r,N)[P]||1,k=this.$d.getTime()+K*R;return Y.w(k,this)},$.subtract=function(K,A){return this.add(-1*K,A)},$.format=function(K){var A=this,N=this.$locale();if(!this.isValid())return N.invalidDate||g;var F=K||"YYYY-MM-DDTHH:mm:ssZ",P=Y.z(this),_=this.$H,R=this.$m,k=this.$M,z=N.weekdays,U=N.months,q=N.meridiem,oe=function(De,We,Pe,it){return De&&(De[We]||De(A,F))||Pe[We].slice(0,it)},ue=function(De){return Y.s(_%12||12,De,"0")},me=q||function(De,We,Pe){var it=De<12?"AM":"PM";return Pe?it.toLowerCase():it};return F.replace(v,function(De,We){return We||function(Pe){switch(Pe){case"YY":return String(A.$y).slice(-2);case"YYYY":return Y.s(A.$y,4,"0");case"M":return k+1;case"MM":return Y.s(k+1,2,"0");case"MMM":return oe(N.monthsShort,k,U,3);case"MMMM":return oe(U,k);case"D":return A.$D;case"DD":return Y.s(A.$D,2,"0");case"d":return String(A.$W);case"dd":return oe(N.weekdaysMin,A.$W,z,2);case"ddd":return oe(N.weekdaysShort,A.$W,z,3);case"dddd":return z[A.$W];case"H":return String(_);case"HH":return Y.s(_,2,"0");case"h":return ue(1);case"hh":return ue(2);case"a":return me(_,R,!0);case"A":return me(_,R,!1);case"m":return String(R);case"mm":return Y.s(R,2,"0");case"s":return String(A.$s);case"ss":return Y.s(A.$s,2,"0");case"SSS":return Y.s(A.$ms,3,"0");case"Z":return P}return null}(De)||P.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(K,A,N){var F,P=this,_=Y.p(A),R=V(K),k=(R.utcOffset()-this.utcOffset())*n,z=this-R,U=function(){return Y.m(P,R)};switch(_){case f:F=U()/12;break;case u:F=U();break;case p:F=U()/3;break;case d:F=(z-k)/6048e5;break;case l:F=(z-k)/864e5;break;case c:F=z/i;break;case s:F=z/n;break;case a:F=z/r;break;default:F=z}return N?F:Y.a(F)},$.daysInMonth=function(){return this.endOf(u).$D},$.$locale=function(){return O[this.$L]},$.locale=function(K,A){if(!K)return this.$L;var N=this.clone(),F=W(K,A,!0);return F&&(N.$L=F),N},$.clone=function(){return Y.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},H}(),te=Z.prototype;return V.prototype=te,[["$ms",o],["$s",a],["$m",s],["$H",c],["$W",l],["$M",u],["$y",f],["$D",m]].forEach(function(H){te[H[1]]=function($){return this.$g($,H[0],H[1])}}),V.extend=function(H,$){return H.$i||(H($,Z,V),H.$i=!0),V},V.locale=W,V.isDayjs=j,V.unix=function(H){return V(1e3*H)},V.en=O[x],V.Ls=O,V.p={},V})})(lq);var Wve=lq.exports;const at=rs(Wve);var dq={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(vw,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,o=/\d\d/,a=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,c={},l=function(y){return(y=+y)+(y>68?1900:2e3)},d=function(y){return function(v){this[y]=+v}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var E=v.match(/([+-]|\d\d)/g),w=60*E[1]+(+E[2]||0);return w===0?0:E[0]==="+"?-w:w}(y)}],p=function(y){var v=c[y];return v&&(v.indexOf?v:v.s.concat(v.f))},f=function(y,v){var E,w=c.meridiem;if(w){for(var S=1;S<=24;S+=1)if(y.indexOf(w(S,0,v))>-1){E=S>12;break}}else E=y===(v?"pm":"PM");return E},m={A:[s,function(y){this.afternoon=f(y,!1)}],a:[s,function(y){this.afternoon=f(y,!0)}],Q:[i,function(y){this.month=3*(y-1)+1}],S:[i,function(y){this.milliseconds=100*+y}],SS:[o,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[a,d("seconds")],ss:[a,d("seconds")],m:[a,d("minutes")],mm:[a,d("minutes")],H:[a,d("hours")],h:[a,d("hours")],HH:[a,d("hours")],hh:[a,d("hours")],D:[a,d("day")],DD:[o,d("day")],Do:[s,function(y){var v=c.ordinal,E=y.match(/\d+/);if(this.day=E[0],v)for(var w=1;w<=31;w+=1)v(w).replace(/\[|\]/g,"")===y&&(this.day=w)}],w:[a,d("week")],ww:[o,d("week")],M:[a,d("month")],MM:[o,d("month")],MMM:[s,function(y){var v=p("months"),E=(p("monthsShort")||v.map(function(w){return w.slice(0,3)})).indexOf(y)+1;if(E<1)throw new Error;this.month=E%12||E}],MMMM:[s,function(y){var v=p("months").indexOf(y)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,d("year")],YY:[o,function(y){this.year=l(y)}],YYYY:[/\d{4}/,d("year")],Z:u,ZZ:u};function g(y){var v,E;v=y,E=c&&c.formats;for(var w=(y=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(V,Y,Z){var te=Z&&Z.toUpperCase();return Y||E[Z]||r[Z]||E[te].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(H,$,K){return $||K.slice(1)})})).match(n),S=w.length,x=0;x<S;x+=1){var O=w[x],L=m[O],j=L&&L[0],W=L&&L[1];w[x]=W?{regex:j,parser:W}:O.replace(/^\[|\]$/g,"")}return function(V){for(var Y={},Z=0,te=0;Z<S;Z+=1){var H=w[Z];if(typeof H=="string")te+=H.length;else{var $=H.regex,K=H.parser,A=V.slice(te),N=$.exec(A)[0];K.call(Y,N),V=V.replace(N,"")}}return function(F){var P=F.afternoon;if(P!==void 0){var _=F.hours;P?_<12&&(F.hours+=12):_===12&&(F.hours=0),delete F.afternoon}}(Y),Y}}return function(y,v,E){E.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(l=y.parseTwoDigitYear);var w=v.prototype,S=w.parse;w.parse=function(x){var O=x.date,L=x.utc,j=x.args;this.$u=L;var W=j[1];if(typeof W=="string"){var V=j[2]===!0,Y=j[3]===!0,Z=V||Y,te=j[2];Y&&(te=j[2]),c=this.$locale(),!V&&te&&(c=E.Ls[te]),this.$d=function(A,N,F,P){try{if(["x","X"].indexOf(N)>-1)return new Date((N==="X"?1e3:1)*A);var _=g(N)(A),R=_.year,k=_.month,z=_.day,U=_.hours,q=_.minutes,oe=_.seconds,ue=_.milliseconds,me=_.zone,De=_.week,We=new Date,Pe=z||(R||k?1:We.getDate()),it=R||We.getFullYear(),Rt=0;R&&!k||(Rt=k>0?k-1:We.getMonth());var Je,bt=U||0,Ce=q||0,et=oe||0,Be=ue||0;return me?new Date(Date.UTC(it,Rt,Pe,bt,Ce,et,Be+60*me.offset*1e3)):F?new Date(Date.UTC(it,Rt,Pe,bt,Ce,et,Be)):(Je=new Date(it,Rt,Pe,bt,Ce,et,Be),De&&(Je=P(Je).week(De).toDate()),Je)}catch{return new Date("")}}(O,W,L,E),this.init(),te&&te!==!0&&(this.$L=this.locale(te).$L),Z&&O!=this.format(W)&&(this.$d=new Date("")),c={}}else if(W instanceof Array)for(var H=W.length,$=1;$<=H;$+=1){j[1]=W[$-1];var K=E.apply(this,j);if(K.isValid()){this.$d=K.$d,this.$L=K.$L,this.init();break}$===H&&(this.$d=new Date(""))}else S.call(this,x)}}})})(dq);var Gve=dq.exports;const js=rs(Gve);at.extend(js);const zve="wss://hcompanion.onrender.com";var Mv;const Kve=async({userId:e})=>{Mv=new WebSocket(zve),Mv.onopen=()=>{console.log("connected to websocket"),Mv.send(JSON.stringify({type:"register",clientId:e}))},Mv.onmessage=t=>{const r=JSON.parse(t==null?void 0:t.data);if(r.type=="meetingReminder"){const n=at().diff(at(`${r.booking.startTime}`,"H:mm A"),"minutes");Math.abs(n)<=60&&re.fire(`Meeting in ${Math.abs(n)} minutes`,"","warning")}}};function CP(){const e=vh(),{username:t,email:r,role:n,isLoggedIn:i}=Ti(c=>c.user),o=Ti(c=>c.patient);Ti(c=>c.patient_alert),console.log(t);const a=async()=>{if(sessionStorage.getItem("token")){const c=await aq({token:sessionStorage.getItem("token")});if(c){const l=await cq();await Kve({userId:c._id}),e(po({username:c.username,email:c.email,role:c.role,isLoggedIn:!0})),e(AC({firstName:l.firstName,lastName:l.lastName,profileImage:l.profileImage,weight:l.weight,height:l.height,profileImage:l.profileImage}))}else po({}),AC({})}};T.useEffect(()=>{a()},[]);const s=qr();return h.jsx("div",{className:"w-full h-[12vh]",children:h.jsxs("div",{className:"w-full h-[12vh] flex flex-row items-center mx-2 p-2 gap-4",children:[h.jsx("div",{className:"logo w-44 flex justify-center items-center  ",children:h.jsx("img",{src:"/logo.png",alt:""})}),h.jsx("div",{className:"items w-[50%] h-full",children:h.jsxs("div",{className:"w-full h-full flex flex-row gap-4 items-center p-5 ml-10 ",children:[h.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/"),children:"Home"}),h.jsx("button",{className:"font-medium text-lg p-2 ",id:"id_navDoctors",onClick:()=>s("/patient/doctors"),children:"Find Doctors"}),h.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/medicines"),children:"Medicines"}),h.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/tests"),children:"tests"}),h.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/treatmentPlan"),children:"Treatment Plan"}),!1]})}),h.jsx("div",{className:"search w-[25%] h-full flex justify-center items-center",children:h.jsxs("div",{className:"w-full h-[70%] rounded-lg flex flex-row gap-2 ",children:[h.jsx("input",{type:"text",placeholder:"search",className:"border w-full h-full rounded-lg"}),h.jsx("div",{className:"h-full flex justify-center items-center bg-blue-200 p-2 rounded-lg",children:h.jsx("img",{src:"/icons/search.png",alt:"search icon",className:"h-[2em] w-10 mr-2 opacity-40 cursor-pointer"})})]})}),i?h.jsxs("div",{className:"loggedIn h-full flex justify-end w-[18%] gap-8 px-2 mr-2",children:[h.jsxs("div",{className:"h-full flex flex-col gap-2",children:[h.jsx("span",{className:"font-bold",children:`Hi, ${o.firstName}`}),h.jsx("button",{className:"p-2 border rounded-lg bg-emerald-500 p-2 font-bold ",onClick:()=>{sessionStorage.removeItem("token"),e(po({})),e(AC({}))},children:"log out"})]}),h.jsx("img",{src:o.profileImage,alt:"",className:"h-[100%] w-[28%] rounded-[50%] cursor-pointer",onClick:()=>{s("/patient/profile")}})]}):h.jsx("button",{type:"button",className:"h-[80%] ml-4 border rounded-[5%] bg-orange-500 p-2 font-bold ",id:"id_loginNav",onClick:()=>{s("/login")},children:"login / sign up"})]})})}vS.setAppElement("#root");function qve(){const e=vh();Ti(c=>c.user);const[t,r]=T.useState(!1),[n,i]=T.useState("jjjjjjjj"),o=qr(),a=Mn({initialValues:{username:"",password:""},validationSchema:gce,onSubmit:async(c,l)=>{const d=await Mhe(c);if(d){if(await re.fire({title:"Successfull",icon:"success",text:"you have been successfully logged in"}),await e(po({username:d.username,role:d.role,email:d.email,isLoggedIn:!0})),d.role=="2")return o("/pharmacy/home");if(d.role=="1")return o("/doctor");if(d.role=="3")return o("/laboratory");if(d.role=="4")return o("/admin");o("/")}}});T.useEffect(()=>{google.accounts.id.initialize({client_id:"981653324698-i9aagns1rnmvcudlrt3bmj87v802e737.apps.googleusercontent.com",callback:async l=>{const d=await Uhe({googleToken:l.credential});if(!d)await Yve(l);else{if(await re.fire({title:"Successfull",icon:"success",text:"you have been successfully logged in"}),e(po({username:d.username,role:d.role,email:d.email})),d.role=="2")return o("/pharmacy/home");if(d.role=="3")return o("/laboratory/home");o("/")}}}),google.accounts.id.renderButton(document.getElementById("id_google"),{theme:"filled_blue",size:"large",width:350,type:"standard"})},[]);const s=async()=>{try{const{value:c}=await re.fire({title:"forgot password",input:"email",showCancelButton:!0,inputLabel:"Enter email"});console.log(c),await i(c);const l=await Fhe({email:c});if(c&&l){const{value:d}=await re.fire({title:"Enter Otp",input:"number",showCancelButton:!0,inputLabel:"Enter Otp"});d&&await Vhe({email:c,otp:d})&&await r(!0)}}catch(c){console.log(`error at handle forgot password ${c}`)}};return h.jsxs("div",{className:"homePage w-full h-full",children:[h.jsx("div",{className:"header w-full h-[12vh] shadow-lg bg-white",children:h.jsx(CP,{})}),h.jsxs("div",{className:"flex flex-row w-screen h-screen",children:[t&&h.jsx(Xve,{email:n,isOtpChecked:t,setisForgotPasswordChecked:r}),h.jsx("div",{className:"w-[40%] ",children:h.jsx("img",{src:"logo.png",alt:""})}),h.jsxs("div",{className:"w-[60%] mainContainer h-[90vh] mt-1  flex flex-col justify-start items-center text-emerald-300 gap-10 bg-sky-300 rounded-l-[5%]",children:[h.jsxs("form",{onSubmit:a.handleSubmit,className:"border w-[50%] rounded-[5%] p-20 flex flex-col gap-4 bg-white  border-emerald-300 shadow-lg shadow-emerald-500 mt-10",children:[h.jsx("div",{className:"flex justify-center",children:h.jsx("h1",{className:"text-4xl text-bold text-emerald-500 ",children:"LOGIN"})}),h.jsxs("div",{className:"flex flex-col gap-4 text-black",children:[h.jsx("input",{type:"text",name:"username",id:"id_username",onChange:a.handleChange,onBlur:a.handleBlur,className:"border p-2 rounded-lg text-center",placeholder:"email/username"}),h.jsx("p",{className:"text-red-500",children:a.touched.username&&a.errors.username&&a.errors.username}),h.jsx("input",{type:"password",name:"password",id:"id_password",onChange:a.handleChange,onBlur:a.handleBlur,className:"border p-2 rounded-lg text-center",placeholder:"password"}),h.jsx("p",{className:"text-red-500",children:a.touched.password&&a.errors.password&&a.errors.password})]}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("button",{id:"id_loginButton",className:"w-[full] h-[50%] border rounded-[5%] bg-orange-500 p-2",type:"submit",children:"login"}),h.jsxs("div",{className:"flex flex-row gap-10 h-[50%] justify-center",children:[h.jsx("h2",{className:"text-blue-400",children:"don't have account...?"}),h.jsx("button",{type:"button",onClick:()=>{o("/register")},children:"sign up"})]}),h.jsx("button",{type:"button",onClick:s,className:"w-[full] h-[50%] border rounded-[5%] bg-blue-500 p-2",children:"forgot password"})]})]}),h.jsx("div",{className:"",children:h.jsx("button",{id:"id_google"})})]})]})]})}const Yve=async e=>{const{value:t}=await re.fire({input:"select",showCancelButton:!0,inputPlaceholder:"select role to proceed",title:"Role",inputOptions:{0:"patient",1:"doctor",2:"pharmacy",3:"laboratory"}});t&&await jhe({googleToken:e.credential,role:t})&&re.fire({title:"Account Creation Successfull",icon:"success",text:"Account has been created"})};function Xve(e){const[t,r]=T.useState(!1),n=async()=>r(!1),i=Mn({initialValues:{password:"",confirmPassword:""},validationSchema:uz,onSubmit:async(o,a)=>{await Bhe({password:o.password,email:e.email})&&re.fire({icon:"success",html:"<b>Password has been reset</b>"}).then(async()=>{await n(),await e.setisForgotPasswordChecked(!1)})}});return T.useState(()=>{e.isOtpChecked&&r(!0),console.log("hiiiii")},[]),h.jsx("div",{className:"fixed w-screen h-screen",children:h.jsxs(vS,{isOpen:t,onRequestClose:n,overlayClassName:"fixed bg-black bg-opacity-50 inset-0 flex justify-center items-center",className:"bg-white opacity-100 mx-w-[60vw] flex flex-col gap-10 p-10 rounded-lg justify-center items-center",children:[h.jsx("h1",{className:"text-center font-bold",children:"Verification"}),h.jsxs("h3",{children:["Otp has been generated and sent to the email ",hz(e.email)]}),h.jsxs("form",{onSubmit:i.handleSubmit,className:"w-full flex flex-col gap-10 justify-center items-center",children:[h.jsxs("div",{className:"flex flex-col gap-10 w-full",children:[h.jsx(Ue,{name:"password",type:"password",variant:"filled",label:"Enter the password",onChange:i.handleChange,onBlur:i.handleBlur,className:"w-[40vw]",...i.touched.password&&(i.errors.password?{color:"error",helperText:`${i.errors.password}`}:{color:"success"})}),h.jsx(Ue,{name:"confirmPassword",type:"password",variant:"filled",label:"Enter the confirm password",onChange:i.handleChange,onBlur:i.handleBlur,className:"w-[40vw]",...i.touched.confirmPassword&&(i.errors.confirmPassword?{color:"error",helperText:`${i.errors.confirmPassword}`}:{color:"success"})})]}),h.jsx("button",{type:"submit",className:"w-full border rounded-[5%] bg-orange-500 p-2",children:"Submit"})]})]})})}const Jve=ui().shape({username:kt().required("Username is Required"),email:kt().email("Provide valid email").required("Email is reuired"),password:kt().required("Password is required").min(8,"must contain atleast 8 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirmPassword:kt().required("confirm password is required").oneOf([uW("password"),null],"Password and Confirm password are not matching"),phone:kt().matches(/^[1-9][0-9]{9}$/,"Must be a valid number").required("Phone number is required"),role:kt().required("Required")}),Ay="https://hcompanion.onrender.com/api";async function Qve({otp:e,email:t}){try{const r=await Ee.post(`${Ay}/user/register/createPatient`,{otp:e,email:t},{withCredentials:!0});return console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&re.fire("Otp has been expired"),console.log(r)}}async function Zve({otp:e,email:t}){try{const r=await Ee.post(`${Ay}/user/register/createDoctor`,{otp:e,email:t},{withCredentials:!0});return console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&re.fire("Otp has been expired"),console.log(r)}}async function eEe({otp:e,email:t}){try{const r=await Ee.post(`${Ay}/user/register/createPharmacy`,{otp:e,email:t},{withCredentials:!0});return console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&re.fire("Otp has been expired"),console.log(r)}}async function tEe({otp:e,email:t}){try{console.log("entered Laboratory");const r=await Ee.post(`${Ay}/user/register/createLaboratory`,{otp:e,email:t},{withCredentials:!0});return await console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&re.fire("Otp has been expired"),console.log(r)}}async function rEe(e){try{const t=await Ee.post(`${Ay}/user/register/otp`,e,{withCredentials:!0});return console.log(t.data),t.data.info}catch(t){t.response.status=="401"?re.fire("User Already exist"):t.response.status=="404"?re.fire({icon:"error",title:"Mail couldn't be send",text:"Some error occured while sending otp to mail"}):re.fire({icon:"error",title:"Server Issue",text:"Some error Occurered in the server side , please try again..!"})}}const nEe=ui().shape({email:kt().required("email required"),otp:kt().matches(/^[0-9]{6}$/,"Must be valid").required("Otp required")});vS.setAppElement("#root");function iEe(){const[e,t]=T.useState(!1),[r,n]=T.useState(!1),i=Mn({initialValues:{username:"",email:"",password:"",confirmPassword:"",phone:"",role:""},validationSchema:Jve,onSubmit:async(o,a)=>{await rEe(o)&&await t(!0)}});return T.useEffect(()=>{r&&((async()=>await i.reset)(),n(!1))},[r]),h.jsxs("div",{className:"homePage w-full h-full",children:[h.jsx("div",{className:"header w-full h-[12vh] shadow-lg",children:h.jsx(CP,{})}),h.jsx("div",{className:"page flex w-screen h-screen",children:h.jsxs("div",{className:"flex flex-row w-screen gap-[30vh] m-10",children:[e&&h.jsx(oEe,{isOtpGenerated:!0,setisOtpGenerated:t,email:i.values.email,role:i.values.role,setIsCreated:n}),h.jsx("div",{className:"w-[40%] ",children:h.jsx("img",{src:"logo.png",alt:""})}),h.jsxs("form",{onSubmit:i.handleSubmit,className:"registerDiv w-[40%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[h.jsx("div",{className:"flex items-center  justify-center",children:h.jsx("h2",{className:"text-4xl  text-emerald-500 ",children:"Sign Up"})}),h.jsxs("div",{className:"flex flex-row gap-4",children:[h.jsxs("select",{name:"role",onChange:i.handleChange,onBlur:i.handleBlur,id:"id_role",className:"font-bold text-black rounded-lg",children:[h.jsx("option",{className:"",children:"Select a role"}),h.jsx("option",{value:"0",children:"Patient"}),h.jsx("option",{value:"1",children:"Doctor"}),h.jsx("option",{value:"2",children:"Pharmacy"}),h.jsx("option",{value:"3",children:"Laboratory"}),h.jsx("option",{value:"4",children:"Admin"})]}),h.jsx("span",{className:"text-red-500",children:i.touched.role&&i.errors.role&&`* ${i.errors.role}`})]}),h.jsxs("div",{className:"inputSec flex flex-col gap-5",children:[h.jsx(Ue,{name:"username",onChange:i.handleChange,variant:"filled",label:"username",onBlur:i.handleBlur,...i.touched.username&&(i.errors.username?{color:"error",helperText:`${i.errors.username}`}:{color:"success"})}),h.jsx(Ue,{name:"email",onChange:i.handleChange,variant:"filled",label:"email",onBlur:i.handleBlur,...i.touched.email&&(i.errors.email?{color:"error",helperText:`${i.errors.email}`}:{color:"success"})}),h.jsx(Ue,{name:"password",type:"password",onChange:i.handleChange,variant:"filled",label:"Password",onBlur:i.handleBlur,...i.touched.password&&(i.errors.password?{color:"error",helperText:`${i.errors.password}`}:{color:"success"})}),h.jsx(Ue,{name:"confirmPassword",type:"password",variant:"filled",onChange:i.handleChange,label:"Confirm Password",onBlur:i.handleBlur,...i.touched.confirmPassword&&(i.errors.confirmPassword?{color:"error",helperText:`${i.errors.confirmPassword}`}:{color:"success"})}),h.jsx(Ue,{name:"phone",variant:"filled",onChange:i.handleChange,label:"phone",onBlur:i.handleBlur,...i.touched.phone&&(i.errors.phone?{color:"error",helperText:`${i.errors.phone}`}:{color:"success"})})]}),h.jsx("button",{type:"submit",className:"w-[full] border rounded-[5%] bg-orange-500 p-2 ",children:"sign up"})]})]})})]})}function oEe(e){const[t,r]=T.useState(!1),n=qr(),i=()=>{r(!1),e.setisOtpGenerated(!1)},o=Mn({initialValues:{email:e.email,otp:""},validationSchema:nEe,onSubmit:async(a,s)=>{var c;e.role=="0"?c=await Qve(a):e.role=="1"?c=await Zve(a):e.role=="2"?c=await eEe(a):e.role=="3"&&(c=await tEe(a)),c&&(i(),re.fire({title:"Registeration Successfull",text:"You have successfully Registered",icon:"success"}).then(()=>{n("/login")}))}});return T.useEffect(()=>{e.isOtpGenerated&&r(!0)},[]),h.jsx("div",{className:"fixed w-screen h-screen",children:h.jsxs(vS,{isOpen:t,onRequestClose:i,overlayClassName:"fixed bg-black bg-opacity-50 inset-0 flex justify-center items-center",className:"bg-white opacity-100 mx-w-[60vw] flex flex-col gap-10 p-10 rounded-lg justify-center items-center ",children:[h.jsx("h1",{className:"text-center font-bold",children:"Verification"}),h.jsxs("h3",{children:["Otp has been generated and sent to the email ",hz(e.email)]}),h.jsxs("form",{onSubmit:o.handleSubmit,className:"w-full flex flex-col gap-10 justify-center items-center",children:[h.jsx("div",{className:"flex flex-row gap-10 w-full",children:h.jsx(Ue,{name:"otp",variant:"filled",label:"Enter Otp",onChange:o.handleChange,onBlur:o.handleBlur,className:"w-[40vw]",...o.touched.otp&&(o.errors.otp?{color:"error",helperText:`${o.errors.otp}`}:{color:"success"})})}),h.jsx("button",{type:"submit",className:"w-full border rounded-[5%] bg-orange-500 p-2",children:"Submit"})]})]})})}var uq={exports:{}},NC={exports:{}},Cr={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var OC,qj;function aEe(){if(qj)return OC;qj=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function i(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var a={},s=0;s<10;s++)a["_"+String.fromCharCode(s)]=s;var c=Object.getOwnPropertyNames(a).map(function(d){return a[d]});if(c.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(d){l[d]=d}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return OC=i()?Object.assign:function(o,a){for(var s,c=n(o),l,d=1;d<arguments.length;d++){s=Object(arguments[d]);for(var u in s)t.call(s,u)&&(c[u]=s[u]);if(e){l=e(s);for(var p=0;p<l.length;p++)r.call(s,l[p])&&(c[l[p]]=s[l[p]])}}return c},OC}/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yj;function sEe(){if(Yj)return Cr;Yj=1;var e=aEe(),t=typeof Symbol=="function"&&Symbol.for,r=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,o=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,s=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,u=t?Symbol.for("react.memo"):60115,p=t?Symbol.for("react.lazy"):60116,f=typeof Symbol=="function"&&Symbol.iterator;function m(U){for(var q="https://reactjs.org/docs/error-decoder.html?invariant="+U,oe=1;oe<arguments.length;oe++)q+="&args[]="+encodeURIComponent(arguments[oe]);return"Minified React error #"+U+"; visit "+q+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function v(U,q,oe){this.props=U,this.context=q,this.refs=y,this.updater=oe||g}v.prototype.isReactComponent={},v.prototype.setState=function(U,q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error(m(85));this.updater.enqueueSetState(this,U,q,"setState")},v.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function E(){}E.prototype=v.prototype;function w(U,q,oe){this.props=U,this.context=q,this.refs=y,this.updater=oe||g}var S=w.prototype=new E;S.constructor=w,e(S,v.prototype),S.isPureReactComponent=!0;var x={current:null},O=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function j(U,q,oe){var ue,me={},De=null,We=null;if(q!=null)for(ue in q.ref!==void 0&&(We=q.ref),q.key!==void 0&&(De=""+q.key),q)O.call(q,ue)&&!L.hasOwnProperty(ue)&&(me[ue]=q[ue]);var Pe=arguments.length-2;if(Pe===1)me.children=oe;else if(1<Pe){for(var it=Array(Pe),Rt=0;Rt<Pe;Rt++)it[Rt]=arguments[Rt+2];me.children=it}if(U&&U.defaultProps)for(ue in Pe=U.defaultProps,Pe)me[ue]===void 0&&(me[ue]=Pe[ue]);return{$$typeof:r,type:U,key:De,ref:We,props:me,_owner:x.current}}function W(U,q){return{$$typeof:r,type:U.type,key:q,ref:U.ref,props:U.props,_owner:U._owner}}function V(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}function Y(U){var q={"=":"=0",":":"=2"};return"$"+(""+U).replace(/[=:]/g,function(oe){return q[oe]})}var Z=/\/+/g,te=[];function H(U,q,oe,ue){if(te.length){var me=te.pop();return me.result=U,me.keyPrefix=q,me.func=oe,me.context=ue,me.count=0,me}return{result:U,keyPrefix:q,func:oe,context:ue,count:0}}function $(U){U.result=null,U.keyPrefix=null,U.func=null,U.context=null,U.count=0,10>te.length&&te.push(U)}function K(U,q,oe,ue){var me=typeof U;(me==="undefined"||me==="boolean")&&(U=null);var De=!1;if(U===null)De=!0;else switch(me){case"string":case"number":De=!0;break;case"object":switch(U.$$typeof){case r:case n:De=!0}}if(De)return oe(ue,U,q===""?"."+N(U,0):q),1;if(De=0,q=q===""?".":q+":",Array.isArray(U))for(var We=0;We<U.length;We++){me=U[We];var Pe=q+N(me,We);De+=K(me,Pe,oe,ue)}else if(U===null||typeof U!="object"?Pe=null:(Pe=f&&U[f]||U["@@iterator"],Pe=typeof Pe=="function"?Pe:null),typeof Pe=="function")for(U=Pe.call(U),We=0;!(me=U.next()).done;)me=me.value,Pe=q+N(me,We++),De+=K(me,Pe,oe,ue);else if(me==="object")throw oe=""+U,Error(m(31,oe==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":oe,""));return De}function A(U,q,oe){return U==null?0:K(U,"",q,oe)}function N(U,q){return typeof U=="object"&&U!==null&&U.key!=null?Y(U.key):q.toString(36)}function F(U,q){U.func.call(U.context,q,U.count++)}function P(U,q,oe){var ue=U.result,me=U.keyPrefix;U=U.func.call(U.context,q,U.count++),Array.isArray(U)?_(U,ue,oe,function(De){return De}):U!=null&&(V(U)&&(U=W(U,me+(!U.key||q&&q.key===U.key?"":(""+U.key).replace(Z,"$&/")+"/")+oe)),ue.push(U))}function _(U,q,oe,ue,me){var De="";oe!=null&&(De=(""+oe).replace(Z,"$&/")+"/"),q=H(q,De,ue,me),A(U,P,q),$(q)}var R={current:null};function k(){var U=R.current;if(U===null)throw Error(m(321));return U}var z={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:e};return Cr.Children={map:function(U,q,oe){if(U==null)return U;var ue=[];return _(U,ue,null,q,oe),ue},forEach:function(U,q,oe){if(U==null)return U;q=H(null,null,q,oe),A(U,F,q),$(q)},count:function(U){return A(U,function(){return null},null)},toArray:function(U){var q=[];return _(U,q,null,function(oe){return oe}),q},only:function(U){if(!V(U))throw Error(m(143));return U}},Cr.Component=v,Cr.Fragment=i,Cr.Profiler=a,Cr.PureComponent=w,Cr.StrictMode=o,Cr.Suspense=d,Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,Cr.cloneElement=function(U,q,oe){if(U==null)throw Error(m(267,U));var ue=e({},U.props),me=U.key,De=U.ref,We=U._owner;if(q!=null){if(q.ref!==void 0&&(De=q.ref,We=x.current),q.key!==void 0&&(me=""+q.key),U.type&&U.type.defaultProps)var Pe=U.type.defaultProps;for(it in q)O.call(q,it)&&!L.hasOwnProperty(it)&&(ue[it]=q[it]===void 0&&Pe!==void 0?Pe[it]:q[it])}var it=arguments.length-2;if(it===1)ue.children=oe;else if(1<it){Pe=Array(it);for(var Rt=0;Rt<it;Rt++)Pe[Rt]=arguments[Rt+2];ue.children=Pe}return{$$typeof:r,type:U.type,key:me,ref:De,props:ue,_owner:We}},Cr.createContext=function(U,q){return q===void 0&&(q=null),U={$$typeof:c,_calculateChangedBits:q,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider={$$typeof:s,_context:U},U.Consumer=U},Cr.createElement=j,Cr.createFactory=function(U){var q=j.bind(null,U);return q.type=U,q},Cr.createRef=function(){return{current:null}},Cr.forwardRef=function(U){return{$$typeof:l,render:U}},Cr.isValidElement=V,Cr.lazy=function(U){return{$$typeof:p,_ctor:U,_status:-1,_result:null}},Cr.memo=function(U,q){return{$$typeof:u,type:U,compare:q===void 0?null:q}},Cr.useCallback=function(U,q){return k().useCallback(U,q)},Cr.useContext=function(U,q){return k().useContext(U,q)},Cr.useDebugValue=function(){},Cr.useEffect=function(U,q){return k().useEffect(U,q)},Cr.useImperativeHandle=function(U,q,oe){return k().useImperativeHandle(U,q,oe)},Cr.useLayoutEffect=function(U,q){return k().useLayoutEffect(U,q)},Cr.useMemo=function(U,q){return k().useMemo(U,q)},Cr.useReducer=function(U,q,oe){return k().useReducer(U,q,oe)},Cr.useRef=function(U){return k().useRef(U)},Cr.useState=function(U){return k().useState(U)},Cr.version="16.14.0",Cr}var Xj;function cEe(){return Xj||(Xj=1,NC.exports=sEe()),NC.exports}var hq={exports:{}};(function(e,t){(function(r){e.exports=r(null)})(function r(n){var i=/^\0+/g,o=/[\0\r\f]/g,a=/: */g,s=/zoo|gra/,c=/([,: ])(transform)/g,l=/,+\s*(?![^(]*[)])/g,d=/ +\s*(?![^(]*[)])/g,u=/ *[\0] */g,p=/,\r+?/g,f=/([\t\r\n ])*\f?&/g,m=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,g=/\W+/g,y=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,E=/:(read-only)/g,w=/\s+(?=[{\];=:>])/g,S=/([[}=:>])\s+/g,x=/(\{[^{]+?);(?=\})/g,O=/\s{2,}/g,L=/([^\(])(:+) */g,j=/[svh]\w+-[tblr]{2}/,W=/\(\s*(.*)\s*\)/g,V=/([\s\S]*?);/g,Y=/-self|flex-/g,Z=/[^]*?(:[rp][el]a[\w-]+)[^]*/,te=/stretch|:\s*\w+\-(?:conte|avail)/,H=/([^-])(image-set\()/,$="-webkit-",K="-moz-",A="-ms-",N=59,F=125,P=123,_=40,R=41,k=91,z=93,U=10,q=13,oe=9,ue=64,me=32,De=38,We=45,Pe=95,it=42,Rt=44,Je=58,bt=39,Ce=34,et=47,Be=62,qe=43,ze=126,ee=0,xe=12,Le=11,Ge=107,ut=109,Gt=115,Hr=112,fn=111,Ho=105,Bs=99,eo=100,Ac=112,xi=1,Sa=1,$s=0,Ta=1,Wo=1,bm=1,Qy=0,Nc=0,Wd=0,Ih=[],wm=[],Ca=0,xh=null,ET=-2,Zy=-1,_T=0,ev=1,tv=2,bT=3,Sm=0,_l=1,Ah="",ls="",Gd="";function Nh(It,st,nt,jt,$e){for(var mr,ce,er=0,Xt=0,ln=0,zt=0,In=0,Fr=0,tr=0,ti=0,Vi=0,Hs=0,Bi=0,Go=0,zd=0,Ra=0,ir=0,Yn=0,Oc=0,Sl=0,Or=0,wt=nt.length,Wr=wt-1,Xn="",Pt="",M="",B="",Q="",Te="";ir<wt;){if(tr=nt.charCodeAt(ir),ir===Wr&&Xt+zt+ln+er!==0&&(Xt!==0&&(tr=Xt===et?U:et),zt=ln=er=0,wt++,Wr++),Xt+zt+ln+er===0){if(ir===Wr&&(Yn>0&&(Pt=Pt.replace(o,"")),Pt.trim().length>0)){switch(tr){case me:case oe:case N:case q:case U:break;default:Pt+=nt.charAt(ir)}tr=N}if(Oc===1)switch(tr){case P:case F:case N:case Ce:case bt:case _:case R:case Rt:Oc=0;case oe:case q:case U:case me:break;default:for(Oc=0,Or=ir,In=tr,ir--,tr=N;Or<wt;)switch(nt.charCodeAt(Or++)){case U:case q:case N:++ir,tr=In,Or=wt;break;case Je:Yn>0&&(++ir,tr=In);case P:Or=wt}}switch(tr){case P:for(In=(Pt=Pt.trim()).charCodeAt(0),Bi=1,Or=++ir;ir<wt;){switch(tr=nt.charCodeAt(ir)){case P:Bi++;break;case F:Bi--;break;case et:switch(Fr=nt.charCodeAt(ir+1)){case it:case et:ir=iv(Fr,ir,Wr,nt)}break;case k:tr++;case _:tr++;case Ce:case bt:for(;ir++<Wr&&nt.charCodeAt(ir)!==tr;);}if(Bi===0)break;ir++}switch(M=nt.substring(Or,ir),In===ee&&(In=(Pt=Pt.replace(i,"").trim()).charCodeAt(0)),In){case ue:switch(Yn>0&&(Pt=Pt.replace(o,"")),Fr=Pt.charCodeAt(1)){case eo:case ut:case Gt:case We:mr=st;break;default:mr=Ih}if(Or=(M=Nh(st,mr,M,Fr,$e+1)).length,Wd>0&&Or===0&&(Or=Pt.length),Ca>0&&(mr=Tm(Ih,Pt,Sl),ce=bl(bT,M,mr,st,Sa,xi,Or,Fr,$e,jt),Pt=mr.join(""),ce!==void 0&&(Or=(M=ce.trim()).length)===0&&(Fr=0,M="")),Or>0)switch(Fr){case Gt:Pt=Pt.replace(W,nv);case eo:case ut:case We:M=Pt+"{"+M+"}";break;case Ge:M=(Pt=Pt.replace(y,"$1 $2"+(_l>0?Ah:"")))+"{"+M+"}",Wo===1||Wo===2&&kh("@"+M,3)?M="@"+$+M+"@"+M:M="@"+M;break;default:M=Pt+M,jt===Ac&&(B+=M,M="")}else M="";break;default:M=Nh(st,Tm(st,Pt,Sl),M,jt,$e+1)}Q+=M,Go=0,Oc=0,Ra=0,Yn=0,Sl=0,zd=0,Pt="",M="",tr=nt.charCodeAt(++ir);break;case F:case N:if((Or=(Pt=(Yn>0?Pt.replace(o,""):Pt).trim()).length)>1)switch(Ra===0&&((In=Pt.charCodeAt(0))===We||In>96&&In<123)&&(Or=(Pt=Pt.replace(" ",":")).length),Ca>0&&(ce=bl(ev,Pt,st,It,Sa,xi,B.length,jt,$e,jt))!==void 0&&(Or=(Pt=ce.trim()).length)===0&&(Pt="\0\0"),In=Pt.charCodeAt(0),Fr=Pt.charCodeAt(1),In){case ee:break;case ue:if(Fr===Ho||Fr===Bs){Te+=Pt+nt.charAt(ir);break}default:if(Pt.charCodeAt(Or-1)===Je)break;B+=Oh(Pt,In,Fr,Pt.charCodeAt(2))}Go=0,Oc=0,Ra=0,Yn=0,Sl=0,Pt="",tr=nt.charCodeAt(++ir)}}switch(tr){case q:case U:if(Xt+zt+ln+er+Nc===0)switch(Hs){case R:case bt:case Ce:case ue:case ze:case Be:case it:case qe:case et:case We:case Je:case Rt:case N:case P:case F:break;default:Ra>0&&(Oc=1)}Xt===et?Xt=0:Ta+Go===0&&jt!==Ge&&Pt.length>0&&(Yn=1,Pt+="\0"),Ca*Sm>0&&bl(_T,Pt,st,It,Sa,xi,B.length,jt,$e,jt),xi=1,Sa++;break;case N:case F:if(Xt+zt+ln+er===0){xi++;break}default:switch(xi++,Xn=nt.charAt(ir),tr){case oe:case me:if(zt+er+Xt===0)switch(ti){case Rt:case Je:case oe:case me:Xn="";break;default:tr!==me&&(Xn=" ")}break;case ee:Xn="\\0";break;case xe:Xn="\\f";break;case Le:Xn="\\v";break;case De:zt+Xt+er===0&&Ta>0&&(Sl=1,Yn=1,Xn="\f"+Xn);break;case 108:if(zt+Xt+er+$s===0&&Ra>0)switch(ir-Ra){case 2:ti===Hr&&nt.charCodeAt(ir-3)===Je&&($s=ti);case 8:Vi===fn&&($s=Vi)}break;case Je:zt+Xt+er===0&&(Ra=ir);break;case Rt:Xt+ln+zt+er===0&&(Yn=1,Xn+="\r");break;case Ce:case bt:Xt===0&&(zt=zt===tr?0:zt===0?tr:zt);break;case k:zt+Xt+ln===0&&er++;break;case z:zt+Xt+ln===0&&er--;break;case R:zt+Xt+er===0&&ln--;break;case _:if(zt+Xt+er===0){if(Go===0)switch(2*ti+3*Vi){case 533:break;default:Bi=0,Go=1}ln++}break;case ue:Xt+ln+zt+er+Ra+zd===0&&(zd=1);break;case it:case et:if(zt+er+ln>0)break;switch(Xt){case 0:switch(2*tr+3*nt.charCodeAt(ir+1)){case 235:Xt=et;break;case 220:Or=ir,Xt=it}break;case it:tr===et&&ti===it&&Or+2!==ir&&(nt.charCodeAt(Or+2)===33&&(B+=nt.substring(Or,ir+1)),Xn="",Xt=0)}}if(Xt===0){if(Ta+zt+er+zd===0&&jt!==Ge&&tr!==N)switch(tr){case Rt:case ze:case Be:case qe:case R:case _:if(Go===0){switch(ti){case oe:case me:case U:case q:Xn+="\0";break;default:Xn="\0"+Xn+(tr===Rt?"":"\0")}Yn=1}else switch(tr){case _:Ra+7===ir&&ti===108&&(Ra=0),Go=++Bi;break;case R:(Go=--Bi)==0&&(Yn=1,Xn+="\0")}break;case oe:case me:switch(ti){case ee:case P:case F:case N:case Rt:case xe:case oe:case me:case U:case q:break;default:Go===0&&(Yn=1,Xn+="\0")}}Pt+=Xn,tr!==me&&tr!==oe&&(Hs=tr)}}Vi=ti,ti=tr,ir++}if(Or=B.length,Wd>0&&Or===0&&Q.length===0&&st[0].length!==0&&(jt!==ut||st.length===1&&(Ta>0?ls:Gd)===st[0])&&(Or=st.join(",").length+2),Or>0){if(mr=Ta===0&&jt!==Ge?function(He){for(var ye,ne,Qe=0,xt=He.length,we=Array(xt);Qe<xt;++Qe){for(var ke=He[Qe].split(u),Fe="",Ke=0,dt=0,Ct=0,Et=0,mn=ke.length;Ke<mn;++Ke)if(!((dt=(ne=ke[Ke]).length)===0&&mn>1)){if(Ct=Fe.charCodeAt(Fe.length-1),Et=ne.charCodeAt(0),ye="",Ke!==0)switch(Ct){case it:case ze:case Be:case qe:case me:case _:break;default:ye=" "}switch(Et){case De:ne=ye+ls;case ze:case Be:case qe:case me:case R:case _:break;case k:ne=ye+ne+ls;break;case Je:switch(2*ne.charCodeAt(1)+3*ne.charCodeAt(2)){case 530:if(bm>0){ne=ye+ne.substring(8,dt-1);break}default:(Ke<1||ke[Ke-1].length<1)&&(ne=ye+ls+ne)}break;case Rt:ye="";default:dt>1&&ne.indexOf(":")>0?ne=ye+ne.replace(L,"$1"+ls+"$2"):ne=ye+ne+ls}Fe+=ne}we[Qe]=Fe.replace(o,"").trim()}return we}(st):st,Ca>0&&(ce=bl(tv,B,mr,It,Sa,xi,Or,jt,$e,jt))!==void 0&&(B=ce).length===0)return Te+B+Q;if(B=mr.join(",")+"{"+B+"}",Wo*$s!=0){switch(Wo===2&&!kh(B,2)&&($s=0),$s){case fn:B=B.replace(E,":"+K+"$1")+B;break;case Hr:B=B.replace(v,"::"+$+"input-$1")+B.replace(v,"::"+K+"$1")+B.replace(v,":"+A+"input-$1")+B}$s=0}}return Te+B+Q}function Tm(It,st,nt){var jt=st.trim().split(p),$e=jt,mr=jt.length,ce=It.length;switch(ce){case 0:case 1:for(var er=0,Xt=ce===0?"":It[0]+" ";er<mr;++er)$e[er]=rv(Xt,$e[er],nt,ce).trim();break;default:er=0;var ln=0;for($e=[];er<mr;++er)for(var zt=0;zt<ce;++zt)$e[ln++]=rv(It[zt]+" ",jt[er],nt,ce).trim()}return $e}function rv(It,st,nt,jt){var $e=st,mr=$e.charCodeAt(0);switch(mr<33&&(mr=($e=$e.trim()).charCodeAt(0)),mr){case De:switch(Ta+jt){case 0:case 1:if(It.trim().length===0)break;default:return $e.replace(f,"$1"+It.trim())}break;case Je:switch($e.charCodeAt(1)){case 103:if(bm>0&&Ta>0)return $e.replace(m,"$1").replace(f,"$1"+Gd);break;default:return It.trim()+$e.replace(f,"$1"+It.trim())}default:if(nt*Ta>0&&$e.indexOf("\f")>0)return $e.replace(f,(It.charCodeAt(0)===Je?"":"$1")+It.trim())}return It+$e}function Oh(It,st,nt,jt){var $e,mr=0,ce=It+";",er=2*st+3*nt+4*jt;if(er===944)return function(Xt){var ln=Xt.length,zt=Xt.indexOf(":",9)+1,In=Xt.substring(0,zt).trim(),Fr=Xt.substring(zt,ln-1).trim();switch(Xt.charCodeAt(9)*_l){case 0:break;case We:if(Xt.charCodeAt(10)!==110)break;default:for(var tr=Fr.split((Fr="",l)),ti=0,zt=0,ln=tr.length;ti<ln;zt=0,++ti){for(var Vi=tr[ti],Hs=Vi.split(d);Vi=Hs[zt];){var Bi=Vi.charCodeAt(0);if(_l===1&&(Bi>ue&&Bi<90||Bi>96&&Bi<123||Bi===Pe||Bi===We&&Vi.charCodeAt(1)!==We))switch(isNaN(parseFloat(Vi))+(Vi.indexOf("(")!==-1)){case 1:switch(Vi){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:Vi+=Ah}}Hs[zt++]=Vi}Fr+=(ti===0?"":",")+Hs.join(" ")}}return Fr=In+Fr+";",Wo===1||Wo===2&&kh(Fr,1)?$+Fr+Fr:Fr}(ce);if(Wo===0||Wo===2&&!kh(ce,1))return ce;switch(er){case 1015:return ce.charCodeAt(10)===97?$+ce+ce:ce;case 951:return ce.charCodeAt(3)===116?$+ce+ce:ce;case 963:return ce.charCodeAt(5)===110?$+ce+ce:ce;case 1009:if(ce.charCodeAt(4)!==100)break;case 969:case 942:return $+ce+ce;case 978:return $+ce+K+ce+ce;case 1019:case 983:return $+ce+K+ce+A+ce+ce;case 883:return ce.charCodeAt(8)===We?$+ce+ce:ce.indexOf("image-set(",11)>0?ce.replace(H,"$1"+$+"$2")+ce:ce;case 932:if(ce.charCodeAt(4)===We)switch(ce.charCodeAt(5)){case 103:return $+"box-"+ce.replace("-grow","")+$+ce+A+ce.replace("grow","positive")+ce;case 115:return $+ce+A+ce.replace("shrink","negative")+ce;case 98:return $+ce+A+ce.replace("basis","preferred-size")+ce}return $+ce+A+ce+ce;case 964:return $+ce+A+"flex-"+ce+ce;case 1023:if(ce.charCodeAt(8)!==99)break;return $e=ce.substring(ce.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),$+"box-pack"+$e+$+ce+A+"flex-pack"+$e+ce;case 1005:return s.test(ce)?ce.replace(a,":"+$)+ce.replace(a,":"+K)+ce:ce;case 1e3:switch(mr=($e=ce.substring(13).trim()).indexOf("-")+1,$e.charCodeAt(0)+$e.charCodeAt(mr)){case 226:$e=ce.replace(j,"tb");break;case 232:$e=ce.replace(j,"tb-rl");break;case 220:$e=ce.replace(j,"lr");break;default:return ce}return $+ce+A+$e+ce;case 1017:if(ce.indexOf("sticky",9)===-1)return ce;case 975:switch(mr=(ce=It).length-10,er=($e=(ce.charCodeAt(mr)===33?ce.substring(0,mr):ce).substring(It.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|$e.charCodeAt(7))){case 203:if($e.charCodeAt(8)<111)break;case 115:ce=ce.replace($e,$+$e)+";"+ce;break;case 207:case 102:ce=ce.replace($e,$+(er>102?"inline-":"")+"box")+";"+ce.replace($e,$+$e)+";"+ce.replace($e,A+$e+"box")+";"+ce}return ce+";";case 938:if(ce.charCodeAt(5)===We)switch(ce.charCodeAt(6)){case 105:return $e=ce.replace("-items",""),$+ce+$+"box-"+$e+A+"flex-"+$e+ce;case 115:return $+ce+A+"flex-item-"+ce.replace(Y,"")+ce;default:return $+ce+A+"flex-line-pack"+ce.replace("align-content","").replace(Y,"")+ce}break;case 973:case 989:if(ce.charCodeAt(3)!==We||ce.charCodeAt(4)===122)break;case 931:case 953:if(te.test(It)===!0)return($e=It.substring(It.indexOf(":")+1)).charCodeAt(0)===115?Oh(It.replace("stretch","fill-available"),st,nt,jt).replace(":fill-available",":stretch"):ce.replace($e,$+$e)+ce.replace($e,K+$e.replace("fill-",""))+ce;break;case 962:if(ce=$+ce+(ce.charCodeAt(5)===102?A+ce:"")+ce,nt+jt===211&&ce.charCodeAt(13)===105&&ce.indexOf("transform",10)>0)return ce.substring(0,ce.indexOf(";",27)+1).replace(c,"$1"+$+"$2")+ce}return ce}function kh(It,st){var nt=It.indexOf(st===1?":":"{"),jt=It.substring(0,st!==3?nt:10),$e=It.substring(nt+1,It.length-1);return xh(st!==2?jt:jt.replace(Z,"$1"),$e,st)}function nv(It,st){var nt=Oh(st,st.charCodeAt(0),st.charCodeAt(1),st.charCodeAt(2));return nt!==st+";"?nt.replace(V," or ($1)").substring(4):"("+st+")"}function bl(It,st,nt,jt,$e,mr,ce,er,Xt,ln){for(var zt,In=0,Fr=st;In<Ca;++In)switch(zt=wm[In].call(wl,It,Fr,nt,jt,$e,mr,ce,er,Xt,ln)){case void 0:case!1:case!0:case null:break;default:Fr=zt}if(Fr!==st)return Fr}function iv(It,st,nt,jt){for(var $e=st+1;$e<nt;++$e)switch(jt.charCodeAt($e)){case et:if(It===it&&jt.charCodeAt($e-1)===it&&st+2!==$e)return $e+1;break;case U:if(It===et)return $e+1}return $e}function Ph(It){for(var st in It){var nt=It[st];switch(st){case"keyframe":_l=0|nt;break;case"global":bm=0|nt;break;case"cascade":Ta=0|nt;break;case"compress":Qy=0|nt;break;case"semicolon":Nc=0|nt;break;case"preserve":Wd=0|nt;break;case"prefix":xh=null,nt?typeof nt!="function"?Wo=1:(Wo=2,xh=nt):Wo=0}}return Ph}function wl(It,st){if(this!==void 0&&this.constructor===wl)return r(It);var nt=It,jt=nt.charCodeAt(0);jt<33&&(jt=(nt=nt.trim()).charCodeAt(0)),_l>0&&(Ah=nt.replace(g,jt===k?"":"-")),jt=1,Ta===1?Gd=nt:ls=nt;var $e,mr=[Gd];Ca>0&&($e=bl(Zy,st,mr,mr,Sa,xi,0,0,0,0))!==void 0&&typeof $e=="string"&&(st=$e);var ce=Nh(Ih,mr,st,0,0);return Ca>0&&($e=bl(ET,ce,mr,mr,Sa,xi,ce.length,0,0,0))!==void 0&&typeof(ce=$e)!="string"&&(jt=0),Ah="",Gd="",ls="",$s=0,Sa=1,xi=1,Qy*jt==0?ce:ce.replace(o,"").replace(w,"").replace(S,"$1").replace(x,"$1").replace(O," ")}return wl.use=function It(st){switch(st){case void 0:case null:Ca=wm.length=0;break;default:if(typeof st=="function")wm[Ca++]=st;else if(typeof st=="object")for(var nt=0,jt=st.length;nt<jt;++nt)It(st[nt]);else Sm=0|!!st}return It},wl.set=Ph,n!==void 0&&Ph(n),wl})})(hq);var lEe=hq.exports;const pq=rs(lEe);var fq={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function(r){var n="/*|*/",i=n+"}";function o(a){if(a)try{r(a+"}")}catch{}}return function(s,c,l,d,u,p,f,m,g,y){switch(s){case 1:if(g===0&&c.charCodeAt(0)===64)return r(c+";"),"";break;case 2:if(m===0)return c+n;break;case 3:switch(m){case 102:case 112:return r(l[0]+c),"";default:return c+(y===0?n:"")}case-2:c.split(i).forEach(o)}}}})})(fq);var dEe=fq.exports;const uEe=rs(dEe);var hEe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Jj=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function pEe(e,t){return!!(e===t||Jj(e)&&Jj(t))}function fEe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!pEe(e[r],t[r]))return!1;return!0}function mq(e,t){t===void 0&&(t=fEe);var r,n=[],i,o=!1;function a(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return o&&r===this&&t(s,n)||(i=e.apply(this,s),o=!0,r=this,n=s),i}return a}function mEe(e){var t={};return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var gEe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,yEe=mEe(function(e){return gEe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function RP(e){return Object.prototype.toString.call(e).slice(8,-1)}function dg(e){return RP(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Qj(e){return RP(e)==="Array"}function Zj(e){return RP(e)==="Symbol"}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function eU(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function tU(e,t,r,n){var i=n.propertyIsEnumerable(t)?"enumerable":"nonenumerable";i==="enumerable"&&(e[t]=r),i==="nonenumerable"&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}function gq(e,t,r){if(!dg(t))return r&&Qj(r)&&r.forEach(function(l){t=l(e,t)}),t;var n={};if(dg(e)){var i=Object.getOwnPropertyNames(e),o=Object.getOwnPropertySymbols(e);n=eU(i,o).reduce(function(l,d){var u=e[d];return(!Zj(d)&&!Object.getOwnPropertyNames(t).includes(d)||Zj(d)&&!Object.getOwnPropertySymbols(t).includes(d))&&tU(l,d,u,e),l},{})}var a=Object.getOwnPropertyNames(t),s=Object.getOwnPropertySymbols(t),c=eU(a,s).reduce(function(l,d){var u=t[d],p=dg(e)?e[d]:void 0;return r&&Qj(r)&&r.forEach(function(f){u=f(p,u)}),p!==void 0&&dg(u)&&(u=gq(p,u,r)),tU(l,d,u,t),l},n);return c}function vEe(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=null,i=e;return dg(e)&&e.extensions&&Object.keys(e).length===1&&(i={},n=e.extensions),t.reduce(function(o,a){return gq(o,a,n)},i)}var Lb={},rU=function(e,t){for(var r=[e[0]],n=0,i=t.length;n<i;n+=1)r.push(t[n],e[n+1]);return r},yq=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},EEe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Uo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ny=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_Ee=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},Tf=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},IP=function(e){return(typeof e>"u"?"undefined":yq(e))==="object"&&e.constructor===Object},Mb=Object.freeze([]),Vg=Object.freeze({});function pl(e){return typeof e=="function"}function xP(e){return e.displayName||e.name||"Component"}function bEe(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)}function Oy(e){return e&&typeof e.styledComponentId=="string"}var D0=typeof process<"u"&&(Lb.REACT_APP_SC_ATTR||Lb.SC_ATTR)||"data-styled",AS="data-styled-version",wEe="data-styled-streamed",th=typeof window<"u"&&"HTMLElement"in window,vq=typeof SC_DISABLE_SPEEDY=="boolean"&&SC_DISABLE_SPEEDY||typeof process<"u"&&(Lb.REACT_APP_SC_DISABLE_SPEEDY||Lb.SC_DISABLE_SPEEDY)||!1,SEe={},vc=function(e){Ny(t,e);function t(r){Sc(this,t);for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a,a=Tf(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+r+" for more information."+(i.length>0?" Additional arguments: "+i.join(", "):"")));return Tf(a)}return t}(Error),TEe=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,CEe=function(e){var t=""+(e||""),r=[];return t.replace(TEe,function(n,i,o){return r.push({componentId:i,matchIndex:o}),n}),r.map(function(n,i){var o=n.componentId,a=n.matchIndex,s=r[i+1],c=s?t.slice(a,s.matchIndex):t.slice(a);return{componentId:o,cssFromDOM:c}})},REe=/^\s*\/\/.*$/gm,Eq=new pq({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),_q=new pq({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),zA=[],bq=function(t){if(t===-2){var r=zA;return zA=[],r}},wq=uEe(function(e){zA.push(e)}),Sq=void 0,qp=void 0,Tq=void 0,IEe=function(t,r,n){return r>0&&n.slice(0,r).indexOf(qp)!==-1&&n.slice(r-qp.length,r)!==qp?"."+Sq:t},xEe=function(t,r,n){t===2&&n.length&&n[0].lastIndexOf(qp)>0&&(n[0]=n[0].replace(Tq,IEe))};_q.use([xEe,wq,bq]);Eq.use([wq,bq]);var AEe=function(t){return Eq("",t)};function AP(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"&",i=e.join("").replace(REe,""),o=t&&r?r+" "+t+" { "+i+" }":i;return Sq=n,qp=t,Tq=new RegExp("\\"+qp+"\\b","g"),_q(r||!t?"":t,o)}var NP=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},OP=function(t,r,n){if(n){var i=t[r]||(t[r]=Object.create(null));i[n]=!0}},jb=function(t,r){t[r]=Object.create(null)},kP=function(t){return function(r,n){return t[r]!==void 0&&t[r][n]}},Cq=function(t){var r="";for(var n in t)r+=Object.keys(t[n]).join(" ")+" ";return r.trim()},NEe=function(t){var r=Object.create(null);for(var n in t)r[n]=Uo({},t[n]);return r},kC=function(t){if(t.sheet)return t.sheet;for(var r=t.ownerDocument.styleSheets.length,n=0;n<r;n+=1){var i=t.ownerDocument.styleSheets[n];if(i.ownerNode===t)return i}throw new vc(10)},OEe=function(t,r,n){if(!r)return!1;var i=t.cssRules.length;try{t.insertRule(r,n<=i?n:i)}catch{return!1}return!0},kEe=function(t,r,n){for(var i=r-n,o=r;o>i;o-=1)t.deleteRule(o)},PP=function(t){return`
/* sc-component-id: `+t+` */
`},PC=function(t,r){for(var n=0,i=0;i<=r;i+=1)n+=t[i];return n},PEe=function(t,r,n){var i=document;t?i=t.ownerDocument:r&&(i=r.ownerDocument);var o=i.createElement("style");o.setAttribute(D0,""),o.setAttribute(AS,"4.4.1");var a=NP();if(a&&o.setAttribute("nonce",a),o.appendChild(i.createTextNode("")),t&&!r)t.appendChild(o);else{if(!r||!t||!r.parentNode)throw new vc(6);r.parentNode.insertBefore(o,n?r:r.nextSibling)}return o},DP=function(t,r){return function(n){var i=NP(),o=[i&&'nonce="'+i+'"',D0+'="'+Cq(r)+'"',AS+'="4.4.1"',n],a=o.filter(Boolean).join(" ");return"<style "+a+">"+t()+"</style>"}},LP=function(t,r){return function(){var n,i=(n={},n[D0]=Cq(r),n[AS]="4.4.1",n),o=NP();return o&&(i.nonce=o),Tr.createElement("style",Uo({},i,{dangerouslySetInnerHTML:{__html:t()}}))}},MP=function(t){return function(){return Object.keys(t)}},DEe=function(t,r){var n=Object.create(null),i=Object.create(null),o=[],a=r!==void 0,s=!1,c=function(f){var m=i[f];return m!==void 0?m:(i[f]=o.length,o.push(0),jb(n,f),i[f])},l=function(f,m,g){for(var y=c(f),v=kC(t),E=PC(o,y),w=0,S=[],x=m.length,O=0;O<x;O+=1){var L=m[O],j=a;j&&L.indexOf("@import")!==-1?S.push(L):OEe(v,L,E+w)&&(j=!1,w+=1)}a&&S.length>0&&(s=!0,r().insertRules(f+"-import",S)),o[y]+=w,OP(n,f,g)},d=function(f){var m=i[f];if(m!==void 0&&t.isConnected!==!1){var g=o[m],y=kC(t),v=PC(o,m)-1;kEe(y,v,g),o[m]=0,jb(n,f),a&&s&&r().removeRules(f+"-import")}},u=function(){var f=kC(t),m=f.cssRules,g="";for(var y in i){g+=PP(y);for(var v=i[y],E=PC(o,v),w=o[v],S=E-w;S<E;S+=1){var x=m[S];x!==void 0&&(g+=x.cssText)}}return g};return{clone:function(){throw new vc(5)},css:u,getIds:MP(i),hasNameForId:kP(n),insertMarker:c,insertRules:l,removeRules:d,sealed:!1,styleTag:t,toElement:LP(u,n),toHTML:DP(u,n)}},nU=function(t,r){return t.createTextNode(PP(r))},LEe=function(t,r){var n=Object.create(null),i=Object.create(null),o=r!==void 0,a=!1,s=function(p){var f=i[p];return f!==void 0?f:(i[p]=nU(t.ownerDocument,p),t.appendChild(i[p]),n[p]=Object.create(null),i[p])},c=function(p,f,m){for(var g=s(p),y=[],v=f.length,E=0;E<v;E+=1){var w=f[E],S=o;if(S&&w.indexOf("@import")!==-1)y.push(w);else{S=!1;var x=E===v-1?"":" ";g.appendData(""+w+x)}}OP(n,p,m),o&&y.length>0&&(a=!0,r().insertRules(p+"-import",y))},l=function(p){var f=i[p];if(f!==void 0){var m=nU(t.ownerDocument,p);t.replaceChild(m,f),i[p]=m,jb(n,p),o&&a&&r().removeRules(p+"-import")}},d=function(){var p="";for(var f in i)p+=i[f].data;return p};return{clone:function(){throw new vc(5)},css:d,getIds:MP(i),hasNameForId:kP(n),insertMarker:s,insertRules:c,removeRules:l,sealed:!1,styleTag:t,toElement:LP(d,n),toHTML:DP(d,n)}},MEe=function e(t,r){var n=t===void 0?Object.create(null):t,i=r===void 0?Object.create(null):r,o=function(p){var f=i[p];return f!==void 0?f:i[p]=[""]},a=function(p,f,m){var g=o(p);g[0]+=f.join(" "),OP(n,p,m)},s=function(p){var f=i[p];f!==void 0&&(f[0]="",jb(n,p))},c=function(){var p="";for(var f in i){var m=i[f][0];m&&(p+=PP(f)+m)}return p},l=function(){var p=NEe(n),f=Object.create(null);for(var m in i)f[m]=[i[m][0]];return e(p,f)},d={clone:l,css:c,getIds:MP(i),hasNameForId:kP(n),insertMarker:o,insertRules:a,removeRules:s,sealed:!1,styleTag:null,toElement:LP(c,n),toHTML:DP(c,n)};return d},iU=function(t,r,n,i,o){if(th&&!n){var a=PEe(t,r,i);return vq?LEe(a,o):DEe(a,o)}return MEe()},jEe=function(t,r,n){for(var i=0,o=n.length;i<o;i+=1){var a=n[i],s=a.componentId,c=a.cssFromDOM,l=AEe(c);t.insertRules(s,l)}for(var d=0,u=r.length;d<u;d+=1){var p=r[d];p.parentNode&&p.parentNode.removeChild(p)}},UEe=/\s+/,Ub=void 0;th?Ub=vq?40:1e3:Ub=-1;var oU=0,DC=void 0,fl=function(){function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:th?document.head:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Sc(this,e),this.getImportRuleTag=function(){var i=t.importRuleTag;if(i!==void 0)return i;var o=t.tags[0],a=!0;return t.importRuleTag=iU(t.target,o?o.styleTag:null,t.forceServer,a)},oU+=1,this.id=oU,this.forceServer=n,this.target=n?null:r,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!th||this.forceServer)return this;var r=[],n=[],i=!1,o=document.querySelectorAll("style["+D0+"]["+AS+'="4.4.1"]'),a=o.length;if(!a)return this;for(var s=0;s<a;s+=1){var c=o[s];i||(i=!!c.getAttribute(wEe));for(var l=(c.getAttribute(D0)||"").trim().split(UEe),d=l.length,u=0,p;u<d;u+=1)p=l[u],this.rehydratedNames[p]=!0;n.push.apply(n,CEe(c.textContent)),r.push(c)}var f=n.length;if(!f)return this;var m=this.makeTag(null);jEe(m,r,n),this.capacity=Math.max(1,Ub-f),this.tags.push(m);for(var g=0;g<f;g+=1)this.tagMap[n[g].componentId]=m;return this},e.reset=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;DC=new e(void 0,r).rehydrate()},e.prototype.clone=function(){var r=new e(this.target,this.forceServer);return this.clones.push(r),r.tags=this.tags.map(function(n){for(var i=n.getIds(),o=n.clone(),a=0;a<i.length;a+=1)r.tagMap[i[a]]=o;return o}),r.rehydratedNames=Uo({},this.rehydratedNames),r.deferred=Uo({},this.deferred),r},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach(function(r){r.sealed=!0})},e.prototype.makeTag=function(r){var n=r?r.styleTag:null,i=!1;return iU(this.target,n,this.forceServer,i,this.getImportRuleTag)},e.prototype.getTagForId=function(r){var n=this.tagMap[r];if(n!==void 0&&!n.sealed)return n;var i=this.tags[this.tags.length-1];return this.capacity-=1,this.capacity===0&&(this.capacity=Ub,i=this.makeTag(i),this.tags.push(i)),this.tagMap[r]=i},e.prototype.hasId=function(r){return this.tagMap[r]!==void 0},e.prototype.hasNameForId=function(r,n){if(this.ignoreRehydratedNames[r]===void 0&&this.rehydratedNames[n])return!0;var i=this.tagMap[r];return i!==void 0&&i.hasNameForId(r,n)},e.prototype.deferredInject=function(r,n){if(this.tagMap[r]===void 0){for(var i=this.clones,o=0;o<i.length;o+=1)i[o].deferredInject(r,n);this.getTagForId(r).insertMarker(r),this.deferred[r]=n}},e.prototype.inject=function(r,n,i){for(var o=this.clones,a=0;a<o.length;a+=1)o[a].inject(r,n,i);var s=this.getTagForId(r);if(this.deferred[r]!==void 0){var c=this.deferred[r].concat(n);s.insertRules(r,c,i),this.deferred[r]=void 0}else s.insertRules(r,n,i)},e.prototype.remove=function(r){var n=this.tagMap[r];if(n!==void 0){for(var i=this.clones,o=0;o<i.length;o+=1)i[o].remove(r);n.removeRules(r),this.ignoreRehydratedNames[r]=!0,this.deferred[r]=void 0}},e.prototype.toHTML=function(){return this.tags.map(function(r){return r.toHTML()}).join("")},e.prototype.toReactElements=function(){var r=this.id;return this.tags.map(function(n,i){var o="sc-"+r+"-"+i;return T.cloneElement(n.toElement(),{key:o})})},EEe(e,null,[{key:"master",get:function(){return DC||(DC=new e().rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),Rq=function(){function e(t,r){var n=this;Sc(this,e),this.inject=function(i){i.hasNameForId(n.id,n.name)||i.inject(n.id,n.rules,n.name)},this.toString=function(){throw new vc(12,String(n.name))},this.name=t,this.rules=r,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),FEe=/([A-Z])/g,VEe=/^ms-/;function aU(e){return e.replace(FEe,"-$1").toLowerCase().replace(VEe,"-ms-")}function BEe(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!(e in hEe)?t+"px":String(t).trim()}var Iq=function(t){return t==null||t===!1||t===""},$Ee=function e(t,r){var n=[],i=Object.keys(t);return i.forEach(function(o){if(!Iq(t[o])){if(IP(t[o]))return n.push.apply(n,e(t[o],o)),n;if(pl(t[o]))return n.push(aU(o)+":",t[o],";"),n;n.push(aU(o)+": "+BEe(o,t[o])+";")}return n}),r?[r+" {"].concat(n,["}"]):n};function Cf(e,t,r){if(Array.isArray(e)){for(var n=[],i=0,o=e.length,a;i<o;i+=1)a=Cf(e[i],t,r),a!==null&&(Array.isArray(a)?n.push.apply(n,a):n.push(a));return n}if(Iq(e))return null;if(Oy(e))return"."+e.styledComponentId;if(pl(e))if(bEe(e)&&t){var s=e(t);return Cf(s,t,r)}else return e;return e instanceof Rq?r?(e.inject(r),e.getName()):e:IP(e)?$Ee(e):e.toString()}function NS(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return pl(e)||IP(e)?Cf(rU(Mb,[e].concat(r))):Cf(rU(e,r))}function KA(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vg;if(!wk.isValidElementType(t))throw new vc(1,String(t));var n=function(){return e(t,r,NS.apply(void 0,arguments))};return n.withConfig=function(i){return KA(e,t,Uo({},r,i))},n.attrs=function(i){return KA(e,t,Uo({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},n}function jP(e){for(var t=e.length|0,r=t|0,n=0,i;t>=4;)i=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>24,i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16)^i,t-=4,++n;switch(t){case 3:r^=(e.charCodeAt(n+2)&255)<<16;case 2:r^=(e.charCodeAt(n+1)&255)<<8;case 1:r^=e.charCodeAt(n)&255,r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16)}return r^=r>>>13,r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16),(r^r>>>15)>>>0}var jv=52,sU=function(t){return String.fromCharCode(t+(t>25?39:97))};function xq(e){var t="",r=void 0;for(r=e;r>jv;r=Math.floor(r/jv))t=sU(r%jv)+t;return sU(r%jv)+t}function HEe(e){for(var t in e)if(pl(e[t]))return!0;return!1}function UP(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(Array.isArray(n)&&!UP(n,t))return!1;if(pl(n)&&!Oy(n))return!1}return!t.some(function(i){return pl(i)||HEe(i)})}var cU=function(t){return xq(jP(t))},lU=function(){function e(t,r,n){Sc(this,e),this.rules=t,this.isStatic=UP(t,r),this.componentId=n,fl.master.hasId(n)||fl.master.deferredInject(n,[])}return e.prototype.generateAndInjectStyles=function(r,n){var i=this.isStatic,o=this.componentId,a=this.lastClassName;if(th&&i&&typeof a=="string"&&n.hasNameForId(o,a))return a;var s=Cf(this.rules,r,n),c=cU(this.componentId+s.join(""));return n.hasNameForId(o,c)||n.inject(this.componentId,AP(s,"."+c,void 0,o),c),this.lastClassName=c,c},e.generateName=function(r){return cU(r)},e}(),FP=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vg,n=r?e.theme===r.theme:!1,i=e.theme&&!n?e.theme:t||r.theme;return i},WEe=/[[\].#*$><+~=|^:(),"'`-]+/g,GEe=/(^-|-$)/g;function qA(e){return e.replace(WEe,"-").replace(GEe,"")}function Fb(e){return typeof e=="string"&&!0}function zEe(e){return Fb(e)?"styled."+e:"Styled("+xP(e)+")"}var LC,dU={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},KEe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},uU=(LC={},LC[wk.ForwardRef]={$$typeof:!0,render:!0},LC),qEe=Object.defineProperty,YEe=Object.getOwnPropertyNames,hU=Object.getOwnPropertySymbols,XEe=hU===void 0?function(){return[]}:hU,JEe=Object.getOwnPropertyDescriptor,QEe=Object.getPrototypeOf,ZEe=Object.prototype,e_e=Array.prototype;function VP(e,t,r){if(typeof t!="string"){var n=QEe(t);n&&n!==ZEe&&VP(e,n,r);for(var i=e_e.concat(YEe(t),XEe(t)),o=uU[e.$$typeof]||dU,a=uU[t.$$typeof]||dU,s=i.length,c=void 0,l=void 0;s--;)if(l=i[s],!KEe[l]&&!(r&&r[l])&&!(a&&a[l])&&!(o&&o[l])&&(c=JEe(t,l),c))try{qEe(e,l,c)}catch{}return e}return e}function t_e(e){return!!(e&&e.prototype&&e.prototype.isReactComponent)}var Vb=T.createContext(),OS=Vb.Consumer,r_e=function(e){Ny(t,e);function t(r){Sc(this,t);var n=Tf(this,e.call(this,r));return n.getContext=mq(n.getContext.bind(n)),n.renderInner=n.renderInner.bind(n),n}return t.prototype.render=function(){return this.props.children?Tr.createElement(Vb.Consumer,null,this.renderInner):null},t.prototype.renderInner=function(n){var i=this.getContext(this.props.theme,n);return Tr.createElement(Vb.Provider,{value:i},this.props.children)},t.prototype.getTheme=function(n,i){if(pl(n)){var o=n(i);return o}if(n===null||Array.isArray(n)||(typeof n>"u"?"undefined":yq(n))!=="object")throw new vc(8);return Uo({},i,n)},t.prototype.getContext=function(n,i){return this.getTheme(n,i)},t}(T.Component),n_e=function(){function e(){Sc(this,e),this.masterSheet=fl.master,this.instance=this.masterSheet.clone(),this.sealed=!1}return e.prototype.seal=function(){if(!this.sealed){var r=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(r,1),this.sealed=!0}},e.prototype.collectStyles=function(r){if(this.sealed)throw new vc(2);return Tr.createElement(Aq,{sheet:this.instance},r)},e.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(r){throw new vc(3)},e}(),BP=T.createContext(),$P=BP.Consumer,Aq=function(e){Ny(t,e);function t(r){Sc(this,t);var n=Tf(this,e.call(this,r));return n.getContext=mq(n.getContext),n}return t.prototype.getContext=function(n,i){if(n)return n;if(i)return new fl(i);throw new vc(4)},t.prototype.render=function(){var n=this.props,i=n.children,o=n.sheet,a=n.target;return Tr.createElement(BP.Provider,{value:this.getContext(o,a)},i)},t}(T.Component),pU={};function i_e(e,t,r){var n=typeof t!="string"?"sc":qA(t),i=(pU[n]||0)+1;pU[n]=i;var o=n+"-"+e.generateName(n+i);return r?r+"-"+o:o}var o_e=function(e){Ny(t,e);function t(){Sc(this,t);var r=Tf(this,e.call(this));return r.attrs={},r.renderOuter=r.renderOuter.bind(r),r.renderInner=r.renderInner.bind(r),r}return t.prototype.render=function(){return Tr.createElement($P,null,this.renderOuter)},t.prototype.renderOuter=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fl.master;return this.styleSheet=n,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():Tr.createElement(OS,null,this.renderInner)},t.prototype.renderInner=function(n){var i=this.props.forwardedComponent,o=i.componentStyle,a=i.defaultProps;i.displayName;var s=i.foldedComponentIds,c=i.styledComponentId,l=i.target,d=void 0;o.isStatic?d=this.generateAndInjectStyles(Vg,this.props):d=this.generateAndInjectStyles(FP(this.props,n,a)||Vg,this.props);var u=this.props.as||this.attrs.as||l,p=Fb(u),f={},m=Uo({},this.props,this.attrs),g=void 0;for(g in m)g==="forwardedComponent"||g==="as"||(g==="forwardedRef"?f.ref=m[g]:g==="forwardedAs"?f.as=m[g]:(!p||yEe(g))&&(f[g]=m[g]));return this.props.style&&this.attrs.style&&(f.style=Uo({},this.attrs.style,this.props.style)),f.className=Array.prototype.concat(s,c,d!==c?d:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),T.createElement(u,f)},t.prototype.buildExecutionContext=function(n,i,o){var a=this,s=Uo({},i,{theme:n});return o.length&&(this.attrs={},o.forEach(function(c){var l=c,d=!1,u=void 0,p=void 0;pl(l)&&(l=l(s),d=!0);for(p in l)u=l[p],d||pl(u)&&!t_e(u)&&!Oy(u)&&(u=u(s)),a.attrs[p]=u,s[p]=u})),s},t.prototype.generateAndInjectStyles=function(n,i){var o=i.forwardedComponent,a=o.attrs,s=o.componentStyle;if(o.warnTooManyClasses,s.isStatic&&!a.length)return s.generateAndInjectStyles(Vg,this.styleSheet);var c=s.generateAndInjectStyles(this.buildExecutionContext(n,i,a),this.styleSheet);return c},t}(T.Component);function Nq(e,t,r){var n=Oy(e),i=!Fb(e),o=t.displayName,a=o===void 0?zEe(e):o,s=t.componentId,c=s===void 0?i_e(lU,t.displayName,t.parentComponentId):s,l=t.ParentComponent,d=l===void 0?o_e:l,u=t.attrs,p=u===void 0?Mb:u,f=t.displayName&&t.componentId?qA(t.displayName)+"-"+t.componentId:t.componentId||c,m=n&&e.attrs?Array.prototype.concat(e.attrs,p).filter(Boolean):p,g=new lU(n?e.componentStyle.rules.concat(r):r,m,f),y=void 0,v=function(w,S){return Tr.createElement(d,Uo({},w,{forwardedComponent:y,forwardedRef:S}))};return v.displayName=a,y=Tr.forwardRef(v),y.displayName=a,y.attrs=m,y.componentStyle=g,y.foldedComponentIds=n?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Mb,y.styledComponentId=f,y.target=n?e.target:e,y.withComponent=function(w){var S=t.componentId,x=_Ee(t,["componentId"]),O=S&&S+"-"+(Fb(w)?w:qA(xP(w))),L=Uo({},x,{attrs:m,componentId:O,ParentComponent:d});return Nq(w,L,r)},Object.defineProperty(y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(w){this._foldedDefaultProps=n?vEe(e.defaultProps,w):w}}),y.toString=function(){return"."+y.styledComponentId},i&&VP(y,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),y}var a_e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],YA=function(t){return KA(Nq,t)};a_e.forEach(function(e){YA[e]=YA(e)});var s_e=function(){function e(t,r){Sc(this,e),this.rules=t,this.componentId=r,this.isStatic=UP(t,Mb),fl.master.hasId(r)||fl.master.deferredInject(r,[])}return e.prototype.createStyles=function(r,n){var i=Cf(this.rules,r,n),o=AP(i,"");n.inject(this.componentId,o)},e.prototype.removeStyles=function(r){var n=this.componentId;r.hasId(n)&&r.remove(n)},e.prototype.renderStyles=function(r,n){this.removeStyles(n),this.createStyles(r,n)},e}();th&&(window.scCGSHMRCache={});function c_e(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=NS.apply(void 0,[e].concat(r)),o="sc-global-"+jP(JSON.stringify(i)),a=new s_e(i,o),s=function(c){Ny(l,c);function l(d){Sc(this,l);var u=Tf(this,c.call(this,d)),p=u.constructor,f=p.globalStyle,m=p.styledComponentId;return th&&(window.scCGSHMRCache[m]=(window.scCGSHMRCache[m]||0)+1),u.state={globalStyle:f,styledComponentId:m},u}return l.prototype.componentWillUnmount=function(){window.scCGSHMRCache[this.state.styledComponentId]&&(window.scCGSHMRCache[this.state.styledComponentId]-=1),window.scCGSHMRCache[this.state.styledComponentId]===0&&this.state.globalStyle.removeStyles(this.styleSheet)},l.prototype.render=function(){var u=this;return Tr.createElement($P,null,function(p){u.styleSheet=p||fl.master;var f=u.state.globalStyle;return f.isStatic?(f.renderStyles(SEe,u.styleSheet),null):Tr.createElement(OS,null,function(m){var g=u.constructor.defaultProps,y=Uo({},u.props);return typeof m<"u"&&(y.theme=FP(u.props,m,g)),f.renderStyles(y,u.styleSheet),null})})},l}(Tr.Component);return s.globalStyle=a,s.styledComponentId=o,s}var l_e=function(t){return t.replace(/\s|\\n/g,"")};function d_e(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=NS.apply(void 0,[e].concat(r)),o=xq(jP(l_e(JSON.stringify(i))));return new Rq(o,AP(i,o,"@keyframes"))}var u_e=function(e){var t=Tr.forwardRef(function(r,n){return Tr.createElement(OS,null,function(i){var o=e.defaultProps,a=FP(r,i,o);return Tr.createElement(e,Uo({},r,{theme:a,ref:n}))})});return VP(t,e),t.displayName="WithTheme("+xP(e)+")",t},h_e={StyleSheet:fl};const p_e=Object.freeze(Object.defineProperty({__proto__:null,ServerStyleSheet:n_e,StyleSheetConsumer:$P,StyleSheetContext:BP,StyleSheetManager:Aq,ThemeConsumer:OS,ThemeContext:Vb,ThemeProvider:r_e,__DO_NOT_USE_OR_YOU_WILL_BE_HAUNTED_BY_SPOOKY_GHOSTS:h_e,createGlobalStyle:c_e,css:NS,default:YA,isStyledComponent:Oy,keyframes:d_e,withTheme:u_e},Symbol.toStringTag,{value:"Module"})),f_e=Q8(p_e);(function(e,t){(function(r,n){e.exports=n(cEe(),f_e)})(typeof self<"u"?self:vw,function(r,n){return function(i){var o={};function a(s){if(o[s])return o[s].exports;var c=o[s]={i:s,l:!1,exports:{}};return i[s].call(c.exports,c,c.exports,a),c.l=!0,c.exports}return a.m=i,a.c=o,a.d=function(s,c,l){a.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:l})},a.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},a.t=function(s,c){if(1&c&&(s=a(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(a.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var d in s)a.d(l,d,(function(u){return s[u]}).bind(null,d));return l},a.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(c,"a",c),c},a.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},a.p="dist/",a(a.s=9)}([function(i,o,a){i.exports=a(5)()},function(i,o){i.exports=r},function(i,o){i.exports=n},function(i,o){var a=function(s,c){return{parse:function(f,m){var g=JSON.parse(f,p).map(u),y=g[0],v=m||l,E=typeof y=="object"&&y?function w(S,x,O,L){return Object.keys(O).reduce(function(j,W){var V=j[W];if(V instanceof s){var Y=S[V];typeof Y!="object"||x.has(Y)?j[W]=L.call(j,W,Y):(x.add(Y),j[W]=L.call(j,W,w(S,x,Y,L)))}else j[W]=L.call(j,W,V);return j},O)}(g,new Set,y,v):y;return v.call({"":E},"",E)},stringify:function(f,m,g){for(var y,v=new Map,E=[],w=[],S=m&&typeof m==typeof E?function(L,j){if(L===""||-1<m.indexOf(L))return j}:m||l,x=+d(v,E,S.call({"":f},"",f)),O=function(L,j){if(y)return y=!y,j;var W=S.call(this,L,j);switch(typeof W){case"object":if(W===null)return W;case c:return v.get(W)||d(v,E,W)}return W};x<E.length;x++)y=!0,w[x]=JSON.stringify(E[x],O,g);return"["+w.join(",")+"]"}};function l(f,m){return m}function d(f,m,g){var y=s(m.push(g)-1);return f.set(g,y),y}function u(f){return f instanceof s?s(f):f}function p(f,m){return typeof m===c?new s(m):m}}(String,"string");i.exports=a},function(i,o,a){i.exports=function(s,c){var l=["abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ","0123456789","~!@#$%^&()_+-={}[];',"],d="";(c=c||"aA0").split("").forEach(function(p){isNaN(parseInt(p))?/[a-z]/.test(p)?d+=l[0]:/[A-Z]/.test(p)?d+=l[1]:d+=l[3]:d+=l[2]}),s=s||30;for(var u="";s--;)u+=d.charAt(Math.floor(Math.random()*d.length));return u}},function(i,o,a){var s=a(6),c=a(7),l=a(8);i.exports=function(){function d(f,m,g,y,v,E){E!==l&&c(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function u(){return d}d.isRequired=d;var p={array:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:u,element:d,instanceOf:u,node:d,objectOf:u,oneOf:u,oneOfType:u,shape:u,exact:u};return p.checkPropTypes=s,p.PropTypes=p,p}},function(i,o,a){function s(l){return function(){return l}}var c=function(){};c.thatReturns=s,c.thatReturnsFalse=s(!1),c.thatReturnsTrue=s(!0),c.thatReturnsNull=s(null),c.thatReturnsThis=function(){return this},c.thatReturnsArgument=function(l){return l},i.exports=c},function(i,o,a){i.exports=function(s,c,l,d,u,p,f,m){if(!s){var g;if(c===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var y=[l,d,u,p,f,m],v=0;(g=new Error(c.replace(/%s/g,function(){return y[v++]}))).name="Invariant Violation"}throw g.framesToPop=1,g}}},function(i,o,a){i.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(i,o,a){a.r(o);var s=a(1),c=a.n(s),l=a(0),d=a.n(l),u=a(4),p=a.n(u),f=a(2),m=a.n(f),g=function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Q=function(Te){Te=Te.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(ye,ne,Qe,xt){return ne+ne+Qe+Qe+xt+xt});var He=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Te);return He?{r:parseInt(He[1],16),g:parseInt(He[2],16),b:parseInt(He[3],16)}:null}(M);return"rgba(".concat(Q.r,", ").concat(Q.g,", ").concat(Q.b,", ").concat(B,")")};function y(){var M=S([`
  0% { box-shadow: 0 0 0 0 `,`; }
  70% { box-shadow: 0 0 0 10px `,`; }
  100% { box-shadow: 0 0 0 0 `,`; }
`]);return y=function(){return M},M}function v(){var M=S([`
  25% { transform: rotate(-1deg); }
  100% { transform: rotate(1deg); }
`]);return v=function(){return M},M}function E(){var M=S([`
  100% { transform: scale(1); }
`]);return E=function(){return M},M}function w(){var M=S([`
  0% { opacity: .2; }
  20% { opacity: 1; }
  100% { opacity: .2; }
`]);return w=function(){return M},M}function S(M,B){return B||(B=M.slice(0)),Object.freeze(Object.defineProperties(M,{raw:{value:Object.freeze(B)}}))}var x=Object(f.keyframes)(w()),O=Object(f.keyframes)(E()),L=Object(f.keyframes)(v());function j(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  animation: `,` 1.4s infinite both;
  animation-delay: `,`;
`]);return j=function(){return M},M}var W=m.a.span(j(),x,function(M){return M.delay}),V=function(){return c.a.createElement("span",{className:"rsc-loading"},c.a.createElement(W,{delay:"0s"},"."),c.a.createElement(W,{delay:".2s"},"."),c.a.createElement(W,{delay:".4s"},"."))};function Y(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  background: #fff;
  border-radius: 5px;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
  display: flex;
  justify-content: center;
  margin: 0 6px 10px 6px;
  padding: 16px;
`]);return Y=function(){return M},M}var Z=m.a.div(Y());function te(M){return(te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(M)}function H(M,B){for(var Q=0;Q<B.length;Q++){var Te=B[Q];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(M,Te.key,Te)}}function $(M){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)})(M)}function K(M,B){return(K=Object.setPrototypeOf||function(Q,Te){return Q.__proto__=Te,Q})(M,B)}function A(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function N(M,B,Q){return B in M?Object.defineProperty(M,B,{value:Q,enumerable:!0,configurable:!0,writable:!0}):M[B]=Q,M}var F=function(M){function B(){var He,ye,ne,Qe;(function(Fe,Ke){if(!(Fe instanceof Ke))throw new TypeError("Cannot call a class as a function")})(this,B);for(var xt=arguments.length,we=new Array(xt),ke=0;ke<xt;ke++)we[ke]=arguments[ke];return ne=this,Qe=(He=$(B)).call.apply(He,[this].concat(we)),ye=!Qe||te(Qe)!=="object"&&typeof Qe!="function"?A(ne):Qe,N(A(A(ye)),"state",{loading:!0}),N(A(A(ye)),"renderComponent",function(){var Fe=ye.props,Ke=Fe.step,dt=Fe.steps,Ct=Fe.previousStep,Et=Fe.triggerNextStep,mn=Ke.component;return c.a.cloneElement(mn,{step:Ke,steps:dt,previousStep:Ct,triggerNextStep:Et})}),ye}var Q,Te;return function(He,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");He.prototype=Object.create(ye&&ye.prototype,{constructor:{value:He,writable:!0,configurable:!0}}),ye&&K(He,ye)}(B,s.Component),Q=B,(Te=[{key:"componentDidMount",value:function(){var He=this,ye=this.props,ne=ye.speak,Qe=ye.step,xt=ye.previousValue,we=ye.triggerNextStep,ke=Qe.delay,Fe=Qe.waitAction;setTimeout(function(){He.setState({loading:!1},function(){Fe||Qe.rendered||we(),ne(Qe,xt)})},ke)}},{key:"render",value:function(){var He=this.state.loading,ye=this.props.style;return c.a.createElement(Z,{className:"rsc-cs",style:ye},He?c.a.createElement(V,null):this.renderComponent())}}])&&H(Q.prototype,Te),B}();F.propTypes={previousStep:d.a.objectOf(d.a.any).isRequired,previousValue:d.a.oneOfType([d.a.string,d.a.bool,d.a.number,d.a.object,d.a.array]),speak:d.a.func,step:d.a.objectOf(d.a.any).isRequired,steps:d.a.objectOf(d.a.any).isRequired,style:d.a.objectOf(d.a.any).isRequired,triggerNextStep:d.a.func.isRequired},F.defaultProps={previousValue:"",speak:function(){}};var P=F;function _(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  animation: `,` 0.3s ease forwards;
  cursor: pointer;
  display: inline-block;
  margin: 2px;
  transform: scale(0);
`]);return _=function(){return M},M}var R=m.a.li(_(),O),k={background:"#f5f8fb",fontFamily:"monospace",headerBgColor:"#6e48aa",headerFontColor:"#fff",headerFontSize:"16px",botBubbleColor:"#6E48AA",botFontColor:"#fff",userBubbleColor:"#fff",userFontColor:"#4a4a4a"};function z(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  background: `,`;
  border: 0;
  border-radius: 22px;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
  color: `,`;
  display: inline-block;
  font-size: 14px;
  padding: 12px;

  &:hover {
    opacity: 0.7;
  }
  &:active,
  &:hover:focus {
    outline:none;
  }
`]);return z=function(){return M},M}var U=m.a.button(z(),function(M){return M.theme.botBubbleColor},function(M){return M.theme.botFontColor});U.defaultProps={theme:k};var q=U;function oe(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  margin: 2px 0 12px 0;
  padding: 0 6px;
`]);return oe=function(){return M},M}var ue=m.a.ul(oe());function me(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([""]);return me=function(){return M},M}var De=m.a.div(me());function We(M){return(We=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(M)}function Pe(M,B){for(var Q=0;Q<B.length;Q++){var Te=B[Q];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(M,Te.key,Te)}}function it(M){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)})(M)}function Rt(M,B){return(Rt=Object.setPrototypeOf||function(Q,Te){return Q.__proto__=Te,Q})(M,B)}function Je(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function bt(M,B,Q){return B in M?Object.defineProperty(M,B,{value:Q,enumerable:!0,configurable:!0,writable:!0}):M[B]=Q,M}var Ce=function(M){function B(){var He,ye,ne,Qe;(function(Fe,Ke){if(!(Fe instanceof Ke))throw new TypeError("Cannot call a class as a function")})(this,B);for(var xt=arguments.length,we=new Array(xt),ke=0;ke<xt;ke++)we[ke]=arguments[ke];return ne=this,Qe=(He=it(B)).call.apply(He,[this].concat(we)),ye=!Qe||We(Qe)!=="object"&&typeof Qe!="function"?Je(ne):Qe,bt(Je(Je(ye)),"onOptionClick",function(Fe){var Ke=Fe.value;(0,ye.props.triggerNextStep)({value:Ke})}),bt(Je(Je(ye)),"renderOption",function(Fe){var Ke=ye.props,dt=Ke.bubbleOptionStyle,Ct=Ke.step.user,Et=Fe.value,mn=Fe.label;return c.a.createElement(R,{key:Et,className:"rsc-os-option"},c.a.createElement(q,{className:"rsc-os-option-element",style:dt,user:Ct,onClick:function(){return ye.onOptionClick({value:Et})}},mn))}),ye}var Q,Te;return function(He,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");He.prototype=Object.create(ye&&ye.prototype,{constructor:{value:He,writable:!0,configurable:!0}}),ye&&Rt(He,ye)}(B,s.Component),Q=B,(Te=[{key:"render",value:function(){var He=this.props.step.options;return c.a.createElement(De,{className:"rsc-os"},c.a.createElement(ue,{className:"rsc-os-options"},Object.keys(He).map(function(ye){return He[ye]}).map(this.renderOption)))}}])&&Pe(Q.prototype,Te),B}();Ce.propTypes={bubbleOptionStyle:d.a.objectOf(d.a.any).isRequired,step:d.a.objectOf(d.a.any).isRequired,triggerNextStep:d.a.func.isRequired};var et=Ce;function Be(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  animation: `,` 0.3s ease forwards;
  background: `,`;
  border-radius: `,`;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
  color: `,`;
  display: inline-block;
  font-size: 14px;
  max-width: 50%;
  margin: `,`;
  overflow: hidden;
  position: relative;
  padding: 12px;
  transform: scale(0);
  transform-origin: `,`;
`]);return Be=function(){return M},M}var qe=m.a.div(Be(),O,function(M){return M.user?M.theme.userBubbleColor:M.theme.botBubbleColor},function(M){var B=M.isFirst,Q=M.isLast,Te=M.user;return B||Q?!B&&Q?Te?"18px 0 18px 18px":"0 18px 18px 18px":M.user?"18px 18px 0 18px":"18px 18px 18px 0":Te?"18px 0 0 18px":"0 18px 18px 0px"},function(M){return M.user?M.theme.userFontColor:M.theme.botFontColor},function(M){var B=M.isFirst,Q=M.showAvatar,Te=M.user;return!B&&Q?Te?"-8px 46px 10px 0":"-8px 0 10px 46px":B||Q?"0 0 10px 0":Te?"-8px 0px 10px 0":"-8px 0 10px 0px"},function(M){var B=M.isFirst,Q=M.user;return B?Q?"bottom right":"bottom left":Q?"top right":"top left"});qe.defaultProps={theme:k};var ze=qe;function ee(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  animation: `,` 0.3s ease forwards;
  border-radius: `,`;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
  height: 40px;
  min-width: 40px;
  padding: 3px;
  transform: scale(0);
  transform-origin: `,`;
  width: 40;
`]);return ee=function(){return M},M}var xe=m.a.img(ee(),O,function(M){return M.user?"50% 50% 50% 0":"50% 50% 0 50%"},function(M){return M.user?"bottom left":"bottom right"});function Le(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  display: inline-block;
  order: `,`;
  padding: 6px;
`]);return Le=function(){return M},M}var Ge=m.a.div(Le(),function(M){return M.user?"1":"0"});function ut(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  align-items: flex-end;
  display: flex;
  justify-content: `,`;
`]);return ut=function(){return M},M}var Gt=m.a.div(ut(),function(M){return M.user?"flex-end":"flex-start"});function Hr(M){return(Hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(M)}function fn(M,B){for(var Q=0;Q<B.length;Q++){var Te=B[Q];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(M,Te.key,Te)}}function Ho(M){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)})(M)}function Bs(M,B){return(Bs=Object.setPrototypeOf||function(Q,Te){return Q.__proto__=Te,Q})(M,B)}function eo(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function Ac(M,B,Q){return B in M?Object.defineProperty(M,B,{value:Q,enumerable:!0,configurable:!0,writable:!0}):M[B]=Q,M}var xi=function(M){function B(){var He,ye,ne,Qe;(function(Fe,Ke){if(!(Fe instanceof Ke))throw new TypeError("Cannot call a class as a function")})(this,B);for(var xt=arguments.length,we=new Array(xt),ke=0;ke<xt;ke++)we[ke]=arguments[ke];return ne=this,Qe=(He=Ho(B)).call.apply(He,[this].concat(we)),ye=!Qe||Hr(Qe)!=="object"&&typeof Qe!="function"?eo(ne):Qe,Ac(eo(eo(ye)),"state",{loading:!0}),Ac(eo(eo(ye)),"getMessage",function(){var Fe=ye.props,Ke=Fe.previousValue,dt=Fe.step.message;return dt?dt.replace(/{previousValue}/g,Ke):""}),Ac(eo(eo(ye)),"renderMessage",function(){var Fe=ye.props,Ke=Fe.step,dt=Fe.steps,Ct=Fe.previousStep,Et=Fe.triggerNextStep,mn=Ke.component;return mn?c.a.cloneElement(mn,{step:Ke,steps:dt,previousStep:Ct,triggerNextStep:Et}):ye.getMessage()}),ye}var Q,Te;return function(He,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");He.prototype=Object.create(ye&&ye.prototype,{constructor:{value:He,writable:!0,configurable:!0}}),ye&&Bs(He,ye)}(B,s.Component),Q=B,(Te=[{key:"componentDidMount",value:function(){var He=this,ye=this.props,ne=ye.step,Qe=ye.speak,xt=ye.previousValue,we=ye.triggerNextStep,ke=ne.component,Fe=ne.delay,Ke=ne.waitAction,dt=ke&&Ke;setTimeout(function(){He.setState({loading:!1},function(){dt||ne.rendered||we(),Qe(ne,xt)})},Fe)}},{key:"render",value:function(){var He=this.props,ye=He.step,ne=He.isFirst,Qe=He.isLast,xt=He.avatarStyle,we=He.bubbleStyle,ke=He.hideBotAvatar,Fe=He.hideUserAvatar,Ke=this.state.loading,dt=ye.avatar,Ct=ye.user,Et=Ct?!Fe:!ke;return c.a.createElement(Gt,{className:"rsc-ts ".concat(Ct?"rsc-ts-user":"rsc-ts-bot"),user:Ct},c.a.createElement(Ge,{className:"rsc-ts-image-container",user:Ct},ne&&Et&&c.a.createElement(xe,{className:"rsc-ts-image",style:xt,showAvatar:Et,user:Ct,src:dt,alt:"avatar"})),c.a.createElement(ze,{className:"rsc-ts-bubble",style:we,user:Ct,showAvatar:Et,isFirst:ne,isLast:Qe},Ke?c.a.createElement(V,null):this.renderMessage()))}}])&&fn(Q.prototype,Te),B}();xi.propTypes={avatarStyle:d.a.objectOf(d.a.any).isRequired,isFirst:d.a.bool.isRequired,isLast:d.a.bool.isRequired,bubbleStyle:d.a.objectOf(d.a.any).isRequired,hideBotAvatar:d.a.bool.isRequired,hideUserAvatar:d.a.bool.isRequired,previousStep:d.a.objectOf(d.a.any),previousValue:d.a.oneOfType([d.a.string,d.a.bool,d.a.number,d.a.object,d.a.array]),speak:d.a.func,step:d.a.objectOf(d.a.any).isRequired,steps:d.a.objectOf(d.a.any),triggerNextStep:d.a.func.isRequired},xi.defaultProps={previousStep:{},previousValue:"",speak:function(){},steps:{}};var Sa=xi,$s=[{key:"id",types:["string","number"],required:!0},{key:"user",types:["boolean"],required:!0},{key:"trigger",types:["string","number","function"],required:!1},{key:"validator",types:["function"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Ta=[{key:"id",types:["string","number"],required:!0},{key:"message",types:["string","function"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Wo=[{key:"id",types:["string","number"],required:!0},{key:"options",types:["object"],required:!0},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],bm=[{key:"id",types:["string","number"],required:!0},{key:"component",types:["any"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"replace",types:["boolean"],required:!1},{key:"waitAction",types:["boolean"],required:!1},{key:"asMessage",types:["boolean"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Qy=[{key:"id",types:["string","number"],required:!0},{key:"update",types:["string","number"],required:!0},{key:"trigger",types:["string","number","function"],required:!0},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Nc=a(3);function Wd(M){return(Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(M)}var Ih={parse:function(M){var B=[];if(M.user)B=$s;else if(M.message)B=Ta;else if(M.options)B=Wo;else if(M.component)B=bm;else{if(!M.update)throw new Error("The step ".concat(Object(Nc.stringify)(M)," is invalid"));B=Qy}for(var Q=0,Te=B.length;Q<Te;Q+=1){var He=B[Q],ye=He.key,ne=He.types,Qe=He.required;if(!M[ye]&&Qe)throw new Error("Key '".concat(ye,"' is required in step ").concat(Object(Nc.stringify)(M)));if(M[ye]&&ne[0]!=="any"&&ne.indexOf(Wd(M[ye]))<0)throw new Error("The type of '".concat(ye,"' value must be ").concat(ne.join(" or ")," instead of ").concat(Wd(M[ye])))}var xt=B.map(function(we){return we.key});for(var ye in M)xt.indexOf(ye)<0&&(console.error("Invalid key '".concat(ye,"' in step '").concat(M.id,"'")),delete M[ye]);return M},checkInvalidIds:function(M){for(var B in M){var Q=M[B],Te=M[B].trigger;if(typeof Te!="function"){if(Q.options)for(var He=Q.options.filter(function(xt){return typeof xt.trigger!="function"}).map(function(xt){return xt.trigger}),ye=0,ne=He.length;ye<ne;ye+=1){var Qe=He[ye];if(Qe&&!M[Qe])throw new Error("The id '".concat(Qe,"' triggered by option ").concat(ye+1," in step '").concat(M[B].id,"' does not exist"))}else if(Te&&!M[Te])throw new Error("The id '".concat(Te,"' triggered by step '").concat(M[B].id,"' does not exist"))}}}},wm=function(M,B){var Q=Object(Nc.parse)(Object(Nc.stringify)(B));for(var Te in Q)for(var He=0,ye=Q[Te].length;He<ye;He+=1)Q[Te][He].component&&(Q[Te][He].component=Q[Te][He].id);localStorage.setItem(M,Object(Nc.stringify)(Q))};function Ca(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  background: `,`;
  border-radius: 10px;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);
  font-family: `,`;
  overflow: hidden;
  position: `,`;
  bottom: `,`;
  top: `,`;
  right: `,`;
  left: `,`;
  width: `,`;
  height: `,`;
  z-index: 999;
  transform: `,`;
  transform-origin: `,`;
  transition: transform 0.3s ease;

  @media screen and (max-width: 568px) {
    border-radius: `,`;
    bottom: 0 !important;
    left: initial !important;
    height: 100%;
    right: 0 !important;
    top: initial !important;
    width: 100%;
  }
`]);return Ca=function(){return M},M}var xh=m.a.div(Ca(),function(M){return M.theme.background},function(M){return M.theme.fontFamily},function(M){return M.floating?"fixed":"relative"},function(M){var B=M.floating,Q=M.floatingStyle;return B?Q.bottom||"32px":"initial"},function(M){var B=M.floating,Q=M.floatingStyle;return B&&Q.top||"initial"},function(M){var B=M.floating,Q=M.floatingStyle;return B?Q.right||"32px":"initial"},function(M){var B=M.floating,Q=M.floatingStyle;return B&&Q.left||"initial"},function(M){return M.width},function(M){return M.height},function(M){return M.opened?"scale(1)":"scale(0)"},function(M){return M.floatingStyle.transformOrigin||"bottom right"},function(M){return M.floating?"0":""});xh.defaultProps={theme:k};var ET=xh;function Zy(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  height: calc(`," - ",`);
  overflow-y: scroll;
  margin-top: 2px;
  padding-top: 6px;

  @media screen and (max-width: 568px) {
    height: `,`;
  }
`]);return Zy=function(){return M},M}var _T=m.a.div(Zy(),function(M){return M.height},function(M){return M.hideInput?"56px":"112px"},function(M){return M.floating?"calc(100% - 112px)":""});function ev(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  align-items: center;
  background: `,`;
  color: `,`;
  display: flex;
  fill: `,`;
  height: 56px;
  justify-content: space-between;
  padding: 0 10px;
`]);return ev=function(){return M},M}var tv=m.a.div(ev(),function(M){return M.theme.headerBgColor},function(M){return M.theme.headerFontColor},function(M){return M.theme.headerFontColor});tv.defaultProps={theme:k};var bT=tv;function Sm(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  margin: 0;
  font-size: `,`;
`]);return Sm=function(){return M},M}var _l=m.a.h2(Sm(),function(M){return M.theme.headerFontSize});_l.defaultProps={theme:k};var Ah=_l;function ls(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  cursor: pointer;
`]);return ls=function(){return M},M}var Gd=m.a.a(ls());function Nh(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  align-items: center;
  cursor: pointer;
  background: `,`;
  bottom: 32px;
  border-radius: 100%;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);
  display: flex;
  fill: `,`;
  height: 56px;
  justify-content: center;
  position: fixed;
  right: 32px;
  transform: `,`;
  transition: transform 0.3s ease;
  width: 56px;
  z-index: 999;
`]);return Nh=function(){return M},M}var Tm=m.a.a(Nh(),function(M){return M.theme.headerBgColor},function(M){return M.theme.headerFontColor},function(M){return M.opened?"scale(0)":"scale(1)"});Tm.defaultProps={theme:{headerBgColor:"#6e48aa",headerFontColor:"#fff"}};var rv=Tm;function Oh(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  height: 24px;
  width: 24px;
`]);return Oh=function(){return M},M}var kh=m.a.img(Oh());function nv(){var M=function(B,Q){return Q||(Q=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(Q)}}))}([`
  position: relative;
`]);return nv=function(){return M},M}var bl=m.a.div(nv());function iv(){var M=wl([`
          `,` .2s ease
        `]);return iv=function(){return M},M}function Ph(){var M=wl([`
  animation: `,`;
  border: 0;
  border-radius: 0;
  border-bottom-left-radius: 10px;
  border-bottom-right-radius: 10px;
  border-top: `,`;
  box-shadow: `,`;
  box-sizing: border-box;
  color: `,`;
  font-size: 16px;
  opacity: `,`;
  outline: none;
  padding: `,`;
  width: 100%;
  -webkit-appearance: none;

  &:disabled {
    background: #fff;
  }

  @media screen and (max-width: 568px) {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
`]);return Ph=function(){return M},M}function wl(M,B){return B||(B=M.slice(0)),Object.freeze(Object.defineProperties(M,{raw:{value:Object.freeze(B)}}))}var It=m.a.input(Ph(),function(M){return M.invalid?Object(f.css)(iv(),L):""},function(M){return M.invalid?"0":"1px solid #eee"},function(M){return M.invalid?"inset 0 0 2px #E53935":"none"},function(M){return M.invalid?"#E53935":""},function(M){return M.disabled&&!M.invalid?".5":"1"},function(M){return M.hasButton?"16px 52px 16px 10px":"16px 10px"},function(M){return M.floating?"0":"10px"},function(M){return M.floating?"0":"10px"});function st(){var M=jt([`
            `,` 2s ease infinite
          `]);return st=function(){return M},M}function nt(){var M=jt([`
  background-color: transparent;
  border: 0;
  border-bottom-right-radius: 10px;
  box-shadow: none;
  cursor: `,`;
  fill: `,`;
  opacity: `,`;
  outline: none;
  padding: 14px 16px 12px 16px;
  position: absolute;
  right: 0;
  top: 0;
  &:before {
    content: '';
    position: absolute;
    width: 23px;
    height: 23px;
    border-radius: 50%;
    animation: `,`;
  }
  &:not(:disabled):hover {
    opacity: 0.7;
  }
`]);return nt=function(){return M},M}function jt(M,B){return B||(B=M.slice(0)),Object.freeze(Object.defineProperties(M,{raw:{value:Object.freeze(B)}}))}var $e=m.a.button(nt(),function(M){return M.disabled?"default":"pointer"},function(M){var B=M.speaking,Q=M.invalid,Te=M.theme;return B?Te.headerBgColor:Q?"#E53935":"#4a4a4a"},function(M){return M.disabled&&!M.invalid?".5":"1"},function(M){var B,Q=M.theme;return M.speaking?Object(f.css)(st(),(B=Q.headerBgColor,Object(f.keyframes)(y(),g(B,.4),g(B,0),g(B,0)))):""});$e.defaultProps={theme:k};var mr=$e;function ce(){return(ce=Object.assign||function(M){for(var B=1;B<arguments.length;B++){var Q=arguments[B];for(var Te in Q)Object.prototype.hasOwnProperty.call(Q,Te)&&(M[Te]=Q[Te])}return M}).apply(this,arguments)}function er(M,B){for(var Q=0;Q<B.length;Q++){var Te=B[Q];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(M,Te.key,Te)}}function Xt(M,B,Q){return B&&er(M.prototype,B),Q&&er(M,Q),M}var ln=null,zt=function(){},In=function(){function M(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zt,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zt,Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zt,He=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"en";return function(ye,ne){if(!(ye instanceof ne))throw new TypeError("Cannot call a class as a function")}(this,M),ln||(ln=this),this.state={inputValue:"",lang:He,onChange:B,onEnd:Q,onStop:Te},this.onResult=this.onResult.bind(this),this.onEnd=this.onEnd.bind(this),this.setup(),ln}return Xt(M,null,[{key:"isSupported",value:function(){return"webkitSpeechRecognition"in window}}]),Xt(M,[{key:"onChange",value:function(B){var Q=this.state.onChange;this.setState({inputValue:B}),Q(B)}},{key:"onFinal",value:function(B){this.setState({inputValue:B}),this.recognition.stop()}},{key:"onEnd",value:function(){var B=this.state,Q=B.onStop,Te=B.onEnd,He=B.force;this.setState({speaking:!1}),He?Q():Te()}},{key:"onResult",value:function(B){for(var Q="",Te="",He=B.resultIndex;He<B.results.length;He+=1)B.results[He].isFinal?(Te+=B.results[He][0].transcript,this.onFinal(Te)):(Q+=B.results[He][0].transcript,this.onChange(Q))}},{key:"setState",value:function(B){this.state=ce({},this.state,B)}},{key:"setup",value:function(){if(!M.isSupported())return this;var B=window.webkitSpeechRecognition;return this.recognition=new B,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang=this.state.lang,this.recognition.onresult=this.onResult,this.recognition.onend=this.onEnd,this}},{key:"setLang",value:function(B){return this.setState({lang:B}),this.setup(),this}},{key:"speak",value:function(){return M.isSupported()?(this.state.speaking?(this.setState({force:!0}),this.recognition.stop()):(this.recognition.start(),this.setState({speaking:!0,inputValue:""})),this):this}}]),M}(),Fr=function(){return c.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},tr=function(){return c.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},ti=function(M){var B=M.size;return c.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:B,height:B,viewBox:"0 0 500 500"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("polygon",{points:"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75"}))))};ti.propTypes={size:d.a.number},ti.defaultProps={size:20};var Vi=ti,Hs=function(M){var B=M.size;return c.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:B,height:B,viewBox:"0 0 400 400"},c.a.createElement("g",null,c.a.createElement("path",{d:"M290.991,240.991c0,26.392-21.602,47.999-48.002,47.999h-11.529c-26.4,0-48.002-21.607-48.002-47.999V104.002   c0-26.4,21.602-48.004,48.002-48.004h11.529c26.4,0,48.002,21.604,48.002,48.004V240.991z"}),c.a.createElement("path",{d:"M342.381,209.85h-8.961c-4.932,0-8.961,4.034-8.961,8.961v8.008c0,50.26-37.109,91.001-87.361,91.001   c-50.26,0-87.109-40.741-87.109-91.001v-8.008c0-4.927-4.029-8.961-8.961-8.961h-8.961c-4.924,0-8.961,4.034-8.961,8.961v8.008   c0,58.862,40.229,107.625,96.07,116.362v36.966h-34.412c-4.932,0-8.961,4.039-8.961,8.971v17.922c0,4.923,4.029,8.961,8.961,8.961   h104.688c4.926,0,8.961-4.038,8.961-8.961v-17.922c0-4.932-4.035-8.971-8.961-8.971h-34.43v-36.966   c55.889-8.729,96.32-57.5,96.32-116.362v-8.008C351.342,213.884,347.303,209.85,342.381,209.85z"})))};Hs.propTypes={size:d.a.number},Hs.defaultProps={size:20};var Bi=Hs,Go=function(){return/iphone|ipod|android|ie|blackberry|fennec/i.test(navigator.userAgent)},zd=function(M){return typeof M=="string"},Ra=function(M){return function(B,Q){var Te=M.lang,He=M.voice,ye=M.enable,ne=B.user;if(window.SpeechSynthesisUtterance&&window.speechSynthesis&&!ne&&ye){var Qe=function(we){var ke=we.message,Fe=we.metadata,Ke=Fe===void 0?{}:Fe;return zd(Ke.speak)?Ke.speak:zd(ke)?ke:""}(B),xt=new window.SpeechSynthesisUtterance;xt.text=Qe.replace(/{previousValue}/g,Q),xt.lang=Te,xt.voice=He,window.speechSynthesis.speak(xt)}}};function ir(M){return(ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(M)}function Yn(){return(Yn=Object.assign||function(M){for(var B=1;B<arguments.length;B++){var Q=arguments[B];for(var Te in Q)Object.prototype.hasOwnProperty.call(Q,Te)&&(M[Te]=Q[Te])}return M}).apply(this,arguments)}function Oc(M,B){for(var Q=0;Q<B.length;Q++){var Te=B[Q];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(M,Te.key,Te)}}function Sl(M){return(Sl=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)})(M)}function Or(M,B){return(Or=Object.setPrototypeOf||function(Q,Te){return Q.__proto__=Te,Q})(M,B)}function wt(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function Wr(M,B,Q){return B in M?Object.defineProperty(M,B,{value:Q,enumerable:!0,configurable:!0,writable:!0}):M[B]=Q,M}var Xn=function(M){function B(ye){var ne,Qe,xt;return function(we,ke){if(!(we instanceof ke))throw new TypeError("Cannot call a class as a function")}(this,B),Qe=this,xt=Sl(B).call(this,ye),ne=!xt||ir(xt)!=="object"&&typeof xt!="function"?wt(Qe):xt,Wr(wt(wt(ne)),"onNodeInserted",function(we){var ke=we.currentTarget;ne.props.enableSmoothScroll&&ne.supportsScrollBehavior?ke.scroll({top:ke.scrollHeight,left:0,behavior:"smooth"}):ke.scrollTop=ke.scrollHeight}),Wr(wt(wt(ne)),"onResize",function(){ne.content.scrollTop=ne.content.scrollHeight}),Wr(wt(wt(ne)),"onRecognitionChange",function(we){ne.setState({inputValue:we})}),Wr(wt(wt(ne)),"onRecognitionEnd",function(){ne.setState({speaking:!1}),ne.handleSubmitButton()}),Wr(wt(wt(ne)),"onRecognitionStop",function(){ne.setState({speaking:!1})}),Wr(wt(wt(ne)),"onValueChange",function(we){ne.setState({inputValue:we.target.value})}),Wr(wt(wt(ne)),"getTriggeredStep",function(we,ke){var Fe=ne.generateRenderedStepsById();return typeof we=="function"?we({value:ke,steps:Fe}):we}),Wr(wt(wt(ne)),"getStepMessage",function(we){var ke=ne.state.previousSteps,Fe=ke.length>0?ke.length-1:0,Ke=ne.generateRenderedStepsById(),dt=ke[Fe].value;return typeof we=="function"?we({previousValue:dt,steps:Ke}):we}),Wr(wt(wt(ne)),"generateRenderedStepsById",function(){for(var we=ne.state.previousSteps,ke={},Fe=0,Ke=we.length;Fe<Ke;Fe+=1){var dt=we[Fe],Ct=dt.id,Et=dt.message,mn=dt.value,gr=dt.metadata;ke[Ct]={id:Ct,message:Et,value:mn,metadata:gr}}return ke}),Wr(wt(wt(ne)),"triggerNextStep",function(we){var ke=ne.props.enableMobileAutoFocus,Fe=ne.state,Ke=Fe.defaultUserSettings,dt=Fe.previousSteps,Ct=Fe.renderedSteps,Et=Fe.steps,mn=ne.state,gr=mn.currentStep,to=mn.previousStep,zo=gr.end;if(we&&we.value&&(gr.value=we.value),we&&we.hideInput&&(gr.hideInput=we.hideInput),we&&we.trigger&&(gr.trigger=ne.getTriggeredStep(we.trigger,we.value)),zo)ne.handleEnd();else if(gr.options&&we){var ri=gr.options.filter(function(Rm){return Rm.value===we.value})[0],Ia=ne.getTriggeredStep(ri.trigger,gr.value);delete gr.options,gr=Yn({},gr,ri,Ke,{user:!0,message:ri.label,trigger:Ia}),Ct.pop(),dt.pop(),Ct.push(gr),dt.push(gr),ne.setState({currentStep:gr,renderedSteps:Ct,previousSteps:dt})}else if(gr.trigger){gr.replace&&Ct.pop();var gn=Yn({},Et[ne.getTriggeredStep(gr.trigger,gr.value)]);if(gn.message)gn.message=ne.getStepMessage(gn.message);else if(gn.update){var ro=gn;if((gn=Yn({},Et[ro.update])).options)for(var no=0,Dh=gn.options.length;no<Dh;no+=1)gn.options[no].trigger=ro.trigger;else gn.trigger=ro.trigger}gn.key=p()(24),to=gr,gr=gn,ne.setState({renderedSteps:Ct,currentStep:gr,previousStep:to},function(){gn.user?ne.setState({disabled:!1},function(){!ke&&Go()||ne.input&&ne.input.focus()}):(Ct.push(gn),dt.push(gn),ne.setState({renderedSteps:Ct,previousSteps:dt}))})}var Lh=ne.props,Tl=Lh.cache,Cm=Lh.cacheName;Tl&&setTimeout(function(){wm(Cm,{currentStep:gr,previousStep:to,previousSteps:dt,renderedSteps:Ct})},300)}),Wr(wt(wt(ne)),"handleEnd",function(){var we=ne.props.handleEnd;if(we){for(var ke=ne.state.previousSteps,Fe=ke.map(function(ri){return{id:ri.id,message:ri.message,value:ri.value,metadata:ri.metadata}}),Ke=[],dt=0,Ct=ke.length;dt<Ct;dt+=1){var Et=ke[dt],mn=Et.id,gr=Et.message,to=Et.value,zo=Et.metadata;Ke[mn]={id:mn,message:gr,value:to,metadata:zo}}we({renderedSteps:Fe,steps:Ke,values:ke.filter(function(ri){return ri.value}).map(function(ri){return ri.value})})}}),Wr(wt(wt(ne)),"isInputValueEmpty",function(){var we=ne.state.inputValue;return!we||we.length===0}),Wr(wt(wt(ne)),"isLastPosition",function(we){var ke=ne.state.renderedSteps,Fe=ke.length,Ke=ke.map(function(Ct){return Ct.key}).indexOf(we.key);if(Fe<=1||Ke+1===Fe)return!0;var dt=ke[Ke+1];return!dt.message&&!dt.asMessage||we.user!==dt.user}),Wr(wt(wt(ne)),"isFirstPosition",function(we){var ke=ne.state.renderedSteps,Fe=ke.map(function(dt){return dt.key}).indexOf(we.key);if(Fe===0)return!0;var Ke=ke[Fe-1];return!Ke.message&&!Ke.asMessage||we.user!==Ke.user}),Wr(wt(wt(ne)),"handleKeyPress",function(we){we.key==="Enter"&&ne.submitUserMessage()}),Wr(wt(wt(ne)),"handleSubmitButton",function(){var we=ne.state,ke=we.speaking,Fe=we.recognitionEnable;if((ne.isInputValueEmpty()||ke)&&Fe)return ne.recognition.speak(),void(ke||ne.setState({speaking:!0}));ne.submitUserMessage()}),Wr(wt(wt(ne)),"submitUserMessage",function(){var we=ne.state,ke=we.defaultUserSettings,Fe=we.inputValue,Ke=we.previousSteps,dt=we.renderedSteps,Ct=ne.state.currentStep;Ct.validator&&ne.checkInvalidInput()||(Ct=Yn({},ke,Ct,{message:Fe,value:Fe}),dt.push(Ct),Ke.push(Ct),ne.setState({currentStep:Ct,renderedSteps:dt,previousSteps:Ke,disabled:!0,inputValue:""},function(){ne.input&&ne.input.blur()}))}),Wr(wt(wt(ne)),"checkInvalidInput",function(){var we=ne.props.enableMobileAutoFocus,ke=ne.state,Fe=ke.currentStep,Ke=ke.inputValue,dt=Fe.validator(Ke),Ct=Ke;return(typeof dt!="boolean"||!dt)&&(ne.setState({inputValue:dt.toString(),inputInvalid:!0,disabled:!0},function(){setTimeout(function(){ne.setState({inputValue:Ct,inputInvalid:!1,disabled:!1},function(){!we&&Go()||ne.input&&ne.input.focus()})},2e3)}),!0)}),Wr(wt(wt(ne)),"toggleChatBot",function(we){var ke=ne.props.toggleFloating;ke?ke({opened:we}):ne.setState({opened:we})}),Wr(wt(wt(ne)),"renderStep",function(we,ke){var Fe=ne.state.renderedSteps,Ke=ne.props,dt=Ke.avatarStyle,Ct=Ke.bubbleStyle,Et=Ke.bubbleOptionStyle,mn=Ke.customStyle,gr=Ke.hideBotAvatar,to=Ke.hideUserAvatar,zo=Ke.speechSynthesis,ri=we.options,Ia=we.component,gn=we.asMessage,ro=ne.generateRenderedStepsById(),no=ke>0?Fe[ke-1]:{};return Ia&&!gn?c.a.createElement(P,{key:ke,speak:ne.speak,step:we,steps:ro,style:mn,previousStep:no,previousValue:no.value,triggerNextStep:ne.triggerNextStep}):ri?c.a.createElement(et,{key:ke,step:we,speak:ne.speak,previousValue:no.value,triggerNextStep:ne.triggerNextStep,bubbleOptionStyle:Et}):c.a.createElement(Sa,{key:ke,step:we,steps:ro,speak:ne.speak,previousStep:no,previousValue:no.value,triggerNextStep:ne.triggerNextStep,avatarStyle:dt,bubbleStyle:Ct,hideBotAvatar:gr,hideUserAvatar:to,speechSynthesis:zo,isFirst:ne.isFirstPosition(we),isLast:ne.isLastPosition(we)})}),ne.content=null,ne.input=null,ne.supportsScrollBehavior=!1,ne.setContentRef=function(we){ne.content=we},ne.setInputRef=function(we){ne.input=we},ne.state={renderedSteps:[],previousSteps:[],currentStep:{},previousStep:{},steps:{},disabled:!0,opened:ye.opened||!ye.floating,inputValue:"",inputInvalid:!1,speaking:!1,recognitionEnable:ye.recognitionEnable&&In.isSupported(),defaultUserSettings:{}},ne.speak=Ra(ye.speechSynthesis),ne}var Q,Te,He;return function(ye,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function");ye.prototype=Object.create(ne&&ne.prototype,{constructor:{value:ye,writable:!0,configurable:!0}}),ne&&Or(ye,ne)}(B,s.Component),Q=B,He=[{key:"getDerivedStateFromProps",value:function(ye,ne){var Qe=ye.opened;return ye.toggleFloating!==void 0&&Qe!==void 0&&Qe!==ne.opened?function(xt){for(var we=1;we<arguments.length;we++){var ke=arguments[we]!=null?arguments[we]:{},Fe=Object.keys(ke);typeof Object.getOwnPropertySymbols=="function"&&(Fe=Fe.concat(Object.getOwnPropertySymbols(ke).filter(function(Ke){return Object.getOwnPropertyDescriptor(ke,Ke).enumerable}))),Fe.forEach(function(Ke){Wr(xt,Ke,ke[Ke])})}return xt}({},ne,{opened:Qe}):ne}}],(Te=[{key:"componentDidMount",value:function(){for(var ye=this,ne=this.props.steps,Qe=this.props,xt=Qe.botDelay,we=Qe.botAvatar,ke=Qe.cache,Fe=Qe.cacheName,Ke=Qe.customDelay,dt=Qe.enableMobileAutoFocus,Ct=Qe.userAvatar,Et={},mn={delay:xt,avatar:we},gr={delay:Qe.userDelay,avatar:Ct,hideInput:!1},to={delay:Ke},zo=0,ri=ne.length;zo<ri;zo+=1){var Ia=ne[zo],gn={};Ia.user?gn=gr:Ia.message||Ia.asMessage?gn=mn:Ia.component&&(gn=to),Et[Ia.id]=Yn({},gn,Ih.parse(Ia))}Ih.checkInvalidIds(Et);var ro=ne[0];if(ro.message){var no=ro.message;ro.message=typeof no=="function"?no():no,Et[ro.id].message=ro.message}var Dh=this.state.recognitionEnable,Lh=this.props.recognitionLang;Dh&&(this.recognition=new In(this.onRecognitionChange,this.onRecognitionEnd,this.onRecognitionStop,Lh)),this.supportsScrollBehavior="scrollBehavior"in document.documentElement.style,this.content&&(this.content.addEventListener("DOMNodeInserted",this.onNodeInserted),window.addEventListener("resize",this.onResize));var Tl=function(Mh,ov){var Im=Mh.cacheName,TT=Mh.cache,CT=Mh.firstStep,Kd=Mh.steps,RT=CT,E1=[Kd[RT.id]],_1=[Kd[RT.id]],b2=localStorage.getItem(Im);if(TT&&b2)try{var yo=Object(Nc.parse)(b2),w2=yo.renderedSteps[yo.renderedSteps.length-1];if(!w2||!w2.end){for(var jh=0,b1=yo.renderedSteps.length;jh<b1;jh+=1){var S2=yo.renderedSteps[jh];if(yo.renderedSteps[jh].delay=0,yo.renderedSteps[jh].rendered=!0,S2.component){var w1=S2.id;yo.renderedSteps[jh].component=Kd[w1].component}}var IT=yo.currentStep,S1=IT.trigger,T1=IT.end,xT=IT.options,T2=yo.currentStep.id;if(xT&&delete yo.currentStep.rendered,!S1&&!T1)if(xT)for(var av=0;av<xT.length;av+=1)yo.currentStep.options[av].trigger=Kd[T2].options[av].trigger;else yo.currentStep.trigger=Kd[T2].trigger;return yo.currentStep.user&&ov(),yo}localStorage.removeItem(Im)}catch(C1){console.info("Unable to parse cache named:".concat(Im,`. 
The cache where probably created with an older version of react-simple-chatbot.
`),C1)}return{currentStep:RT,previousStep:{},previousSteps:_1,renderedSteps:E1}}({cacheName:Fe,cache:ke,firstStep:ro,steps:Et},function(){ye.setState({disabled:!1},function(){!dt&&Go()||ye.input&&ye.input.focus()})}),Cm=Tl.currentStep,Rm=Tl.previousStep,wT=Tl.previousSteps,ST=Tl.renderedSteps;this.setState({currentStep:Cm,defaultUserSettings:gr,previousStep:Rm,previousSteps:wT,renderedSteps:ST,steps:Et})}},{key:"componentWillUnmount",value:function(){this.content&&(this.content.removeEventListener("DOMNodeInserted",this.onNodeInserted),window.removeEventListener("resize",this.onResize))}},{key:"render",value:function(){var ye=this,ne=this.state,Qe=ne.currentStep,xt=ne.disabled,we=ne.inputInvalid,ke=ne.inputValue,Fe=ne.opened,Ke=ne.renderedSteps,dt=ne.speaking,Ct=ne.recognitionEnable,Et=this.props,mn=Et.className,gr=Et.contentStyle,to=Et.floating,zo=Et.floatingIcon,ri=Et.floatingStyle,Ia=Et.footerStyle,gn=Et.headerComponent,ro=Et.headerTitle,no=Et.hideHeader,Dh=Et.hideSubmitButton,Lh=Et.inputStyle,Tl=Et.placeholder,Cm=Et.inputAttributes,Rm=Et.recognitionPlaceholder,wT=Et.style,ST=Et.submitButtonStyle,Mh=Et.width,ov=Et.height,Im=gn||c.a.createElement(bT,{className:"rsc-header"},c.a.createElement(Ah,{className:"rsc-header-title"},ro),to&&c.a.createElement(Gd,{className:"rsc-header-close-button",onClick:function(){return ye.toggleChatBot(!1)}},c.a.createElement(tr,null))),TT=(this.isInputValueEmpty()||dt)&&Ct?c.a.createElement(Bi,null):c.a.createElement(Vi,null),CT=dt?Rm:Qe.placeholder||Tl,Kd=Qe.inputAttributes||Cm;return c.a.createElement("div",{className:"rsc ".concat(mn)},to&&c.a.createElement(rv,{className:"rsc-float-button",style:ri,opened:Fe,onClick:function(){return ye.toggleChatBot(!0)}},typeof zo=="string"?c.a.createElement(kh,{src:zo}):zo),c.a.createElement(ET,{className:"rsc-container",floating:to,floatingStyle:ri,opened:Fe,style:wT,width:Mh,height:ov},!no&&Im,c.a.createElement(_T,{className:"rsc-content",ref:this.setContentRef,floating:to,style:gr,height:ov,hideInput:Qe.hideInput},Ke.map(this.renderStep)),c.a.createElement(bl,{className:"rsc-footer",style:Ia},!Qe.hideInput&&c.a.createElement(It,Yn({type:"textarea",style:Lh,ref:this.setInputRef,className:"rsc-input",placeholder:we?"":CT,onKeyPress:this.handleKeyPress,onChange:this.onValueChange,value:ke,floating:to,invalid:we,disabled:xt,hasButton:!Dh},Kd)),!Qe.hideInput&&!Dh&&c.a.createElement(mr,{className:"rsc-submit-button",style:ST,onClick:this.handleSubmitButton,invalid:we,disabled:xt,speaking:dt},TT))))}}])&&Oc(Q.prototype,Te),He&&Oc(Q,He),B}();Xn.propTypes={avatarStyle:d.a.objectOf(d.a.any),botAvatar:d.a.string,botDelay:d.a.number,bubbleOptionStyle:d.a.objectOf(d.a.any),bubbleStyle:d.a.objectOf(d.a.any),cache:d.a.bool,cacheName:d.a.string,className:d.a.string,contentStyle:d.a.objectOf(d.a.any),customDelay:d.a.number,customStyle:d.a.objectOf(d.a.any),enableMobileAutoFocus:d.a.bool,enableSmoothScroll:d.a.bool,floating:d.a.bool,floatingIcon:d.a.oneOfType([d.a.string,d.a.element]),floatingStyle:d.a.objectOf(d.a.any),footerStyle:d.a.objectOf(d.a.any),handleEnd:d.a.func,headerComponent:d.a.element,headerTitle:d.a.string,height:d.a.string,hideBotAvatar:d.a.bool,hideHeader:d.a.bool,hideSubmitButton:d.a.bool,hideUserAvatar:d.a.bool,inputAttributes:d.a.objectOf(d.a.any),inputStyle:d.a.objectOf(d.a.any),opened:d.a.bool,toggleFloating:d.a.func,placeholder:d.a.string,recognitionEnable:d.a.bool,recognitionLang:d.a.string,recognitionPlaceholder:d.a.string,speechSynthesis:d.a.shape({enable:d.a.bool,lang:d.a.string,voice:typeof window<"u"?d.a.instanceOf(window.SpeechSynthesisVoice):d.a.any}),steps:d.a.arrayOf(d.a.object).isRequired,style:d.a.objectOf(d.a.any),submitButtonStyle:d.a.objectOf(d.a.any),userAvatar:d.a.string,userDelay:d.a.number,width:d.a.string},Xn.defaultProps={avatarStyle:{},botDelay:1e3,bubbleOptionStyle:{},bubbleStyle:{},cache:!1,cacheName:"rsc_cache",className:"",contentStyle:{},customStyle:{},customDelay:1e3,enableMobileAutoFocus:!1,enableSmoothScroll:!1,floating:!1,floatingIcon:c.a.createElement(Fr,null),floatingStyle:{},footerStyle:{},handleEnd:void 0,headerComponent:void 0,headerTitle:"Chat",height:"520px",hideBotAvatar:!1,hideHeader:!1,hideSubmitButton:!1,hideUserAvatar:!1,inputStyle:{},opened:void 0,placeholder:"Type the message ...",inputAttributes:{},recognitionEnable:!1,recognitionLang:"en",recognitionPlaceholder:"Listening ...",speechSynthesis:{enable:!1,lang:"en",voice:null},style:{},submitButtonStyle:{},toggleFloating:void 0,userDelay:1e3,width:"350px",botAvatar:"data:image/svg+xml,%3csvg version='1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3e%3cpath d='M303 70a47 47 0 1 0-70 40v84h46v-84c14-8 24-23 24-40z' fill='%2393c7ef'/%3e%3cpath d='M256 23v171h23v-84a47 47 0 0 0-23-87z' fill='%235a8bb0'/%3e%3cpath fill='%2393c7ef' d='M0 240h248v124H0z'/%3e%3cpath fill='%235a8bb0' d='M264 240h248v124H264z'/%3e%3cpath fill='%2393c7ef' d='M186 365h140v124H186z'/%3e%3cpath fill='%235a8bb0' d='M256 365h70v124h-70z'/%3e%3cpath fill='%23cce9f9' d='M47 163h419v279H47z'/%3e%3cpath fill='%2393c7ef' d='M256 163h209v279H256z'/%3e%3cpath d='M194 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%233c5d76'/%3e%3cpath d='M380 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%231e2e3b'/%3e%3cpath d='M186 349a70 70 0 1 0 140 0H186z' fill='%233c5d76'/%3e%3cpath d='M256 349v70c39 0 70-31 70-70h-70z' fill='%231e2e3b'/%3e%3c/svg%3e",userAvatar:"data:image/svg+xml,%3csvg viewBox='-208.5 21 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle cx='-158.5' cy='71' fill='%23F5EEE5' r='50'/%3e%3cdefs%3e%3ccircle cx='-158.5' cy='71' id='a' r='50'/%3e%3c/defs%3e%3cclipPath id='b'%3e%3cuse overflow='visible' xlink:href='%23a'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23b)' d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' fill='%23E6C19C'/%3e%3cg clip-path='url(%23b)'%3e%3cdefs%3e%3cpath d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' id='c'/%3e%3c/defs%3e%3cclipPath id='d'%3e%3cuse overflow='visible' xlink:href='%23c'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23d)' d='M-158.5 100.1c12.7 0 23-18.6 23-34.4 0-16.2-10.3-24.7-23-24.7s-23 8.5-23 24.7c0 15.8 10.3 34.4 23 34.4z' fill='%23D4B08C'/%3e%3c/g%3e%3cpath d='M-158.5 96c12.7 0 23-16.3 23-31 0-15.1-10.3-23-23-23s-23 7.9-23 23c0 14.7 10.3 31 23 31z' fill='%23F2CEA5'/%3e%3c/svg%3e"};var Pt=Xn;a.d(o,"Loading",function(){return V}),o.default=Pt}])})})(uq);var m_e=uq.exports;const g_e=rs(m_e);function y_e(){const e=[{id:"0",message:"Hey Geek!",trigger:"1"},{id:"1",message:"Please write your username",trigger:"2"},{id:"2",user:!0,trigger:"3"},{id:"3",message:" hi {previousValue}, how can I help you?",trigger:4},{id:"4",options:[{value:1,label:"View Courses"},{value:2,label:"Read Articles"}],end:!0}],t={botAvatar:"/logo.png"};return h.jsx("div",{children:h.jsx(g_e,{steps:e,...t})})}function v_e(){const[e,t]=T.useState(!1);return h.jsxs("div",{className:"homePage w-full h-full",id:"id_patientDashboard",children:[h.jsx("div",{className:"header bg-white w-full h-[12vh] shadow-lg ",children:h.jsx(CP,{})}),h.jsx("div",{className:"w-full h-full p-4 ",children:h.jsx(Fi,{})}),h.jsx("div",{className:"chatBot fixed w-auto h-auto right-2 bottom-0",children:e?h.jsxs("div",{className:"flex gap-6 items-start ",children:[h.jsx("div",{children:h.jsx(y_e,{})}),h.jsx("button",{className:"px-6 py-3 bg-red-500 text-white font-medium rounded-tl-2xl",onClick:()=>t(!1),children:"Close"})]}):h.jsxs("div",{className:"relative w-auto h-[15vh]  right-10 bottom-0 flex flex-row gap-2",children:[h.jsx("img",{src:"/doctorBot.jpg",alt:"chatbot",className:" z-100 shadow-lg rounded-full w-[5vw] h-[10vh] cursor-pointer",onClick:()=>t(!0)}),h.jsx("span",{className:"h-[40%] p-2 rounded-tl-2xl  text-white font-medium bg-blue-500  ",children:"Hey, i'm an Ai Doctor..!!"})]})})]})}const E_e="https://hcompanion.onrender.com/api",__e=async({token:e})=>{try{const t=await Ee.get(`${E_e}/pharmacy/getBasicDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.userData}catch(t){t.response.status=="401"&&re.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t)}},kS="https://hcompanion.onrender.com/api",b_e=async e=>{try{const t=await Ee.post(`${kS}/pharmacy/profile/updateDetails`,{updateDetails:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},Oq=async()=>{try{return(await Ee.get(`${kS}/pharmacy/profile/getProfileDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.details}catch(e){return console.log(e),!1}},w_e=async()=>{try{return(await Ee.get(`${kS}/pharmacy/profile/getContactDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.contactDetails}catch(e){return console.log(e),!1}},S_e=async e=>{try{const t=await Ee.post(`${kS}/pharmacy/profile/updateContactDetails`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return re.fire({icon:"success",text:"Contact Details Have been Updated"}),!0}catch(t){return console.log(t),!1}},T_e={pharmacyName:"",ownerName:"",profileImage:""},kq=Jf({name:"pharmacy",initialState:T_e,reducers:{setPharmacy(e,t){e.pharmacyName=t.payload.pharmacyName,e.ownerName=t.payload.ownerName,e.profileImage=t.payload.profileImage}}}),{setPharmacy:C_e}=kq.actions,R_e=kq.reducer;function I_e(){const e=vh(),{username:t,email:r,role:n,isLoggedIn:i}=Ti(d=>d.user),{pharmacyName:o,ownerName:a,profileImage:s}=Ti(d=>d.pharmacy),c=qr(),l=async()=>{if(sessionStorage.getItem("token")&&!i){const d=await __e({token:sessionStorage.getItem("token")});if(d){const u=await Oq();e(po({username:d.username,email:d.email,role:d.role,isLoggedIn:!0})),e(C_e({pharmacyName:u.pharmacyName,ownerName:u.ownerName,profileImage:u.profileImage}))}}};return T.useEffect(()=>{l()},[]),h.jsx("div",{className:"navbarParent h-full w-full ",children:h.jsxs("div",{className:"navbar w-full h-full flex flex-col rounded-tr-[3%] bg-blue-600 bg-opacity-90 p-4 gap-10 ",children:[h.jsxs("div",{className:"w-full h-[8vh] flex justify-start items-center gap-4 ",children:[h.jsx("img",{src:"/icons/arrowBack.png",alt:"",className:"h-[5vh] w-[] p-2 ml-2 bg-white  rounded-lg"}),h.jsx("h2",{className:"text-white text-sm",children:"Minimize"}),h.jsx("div",{className:"flex-1 h-full flex justify-end items-center",children:h.jsx("img",{src:"/logo.png",alt:"",className:"w-[7vw] h-[7vh] bg-white mr-4"})})]}),h.jsxs("div",{className:"profile h-[12%] flex flex-row justify-start gap-4",children:[h.jsx("div",{className:"profileImage w-auto h-full flex ",children:h.jsx("img",{src:s,alt:"image",className:"h-full w-[5vw] rounded-full "})}),h.jsxs("div",{className:"details flex-1 flex flex-col justify-center bg-white bg-opacity-10 p-2 rounded-lg gap-2 ",children:[h.jsx("span",{children:h.jsx("h2",{className:"text-white text-lg font-bold",children:o||t})}),h.jsx("span",{children:h.jsx("h2",{className:"text-white text-sm",children:"pharmacy"})})]})]}),h.jsx("div",{className:"search w-full h-[5%]",children:h.jsx(Ue,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),h.jsxs("div",{className:"home w-full text-white h-[80%] flex flex-col gap-4 border-slate-50",children:[h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/pharmacyHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{c("/pharmacy/home")},children:"Home"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/stock.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",id:"id_navMedicineStock",onClick:()=>{c("/pharmacy/stock/viewStocks")},children:"Medicine Stock"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/pharmacyOrder.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{c("/pharmacy/order")},children:"Orders"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{c("/pharmacy/profile")},children:"Profile"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),e(po({})),c("/")},children:"sign out"})]})]})]})})}function Pq(){const e=qr();return h.jsxs("div",{className:"w-full h-[12vh] py-2 flex flex-row justify-end gap-20  px-10 ",children:[h.jsx("div",{className:"w-[15%] h-full",children:h.jsx("button",{className:"w-full h-full p-4 font-bold rounded-sm flex items-center  bg-green-400  drop-shadow-xl",onClick:()=>{e("/pharmacy/stock/addCategory")},children:"Add New Stock"})}),h.jsx("div",{className:"w-[15%] h-full",children:h.jsx("button",{className:"w-full h-full p-4 font-bold rounded-sm flex items-center  bg-orange-500  drop-shadow-xl",id:"id_btnViewStock",onClick:()=>{e("/pharmacy/stock/viewStocks")},children:"View Stock"})})]})}const x_e=async()=>{try{const e=await Ee.get("https://rxnav.nlm.nih.gov/REST/allconcepts.json?tty=SCD+GPCK+SBD+BPCK");return console.log(e.data.minConceptGroup.minConcept[0]),e.data.minConceptGroup.minConcept}catch(e){console.log(e)}},A_e=ui().shape({medicineName:kt().required("Required"),description:kt().required("required"),costPrice:kt(),sellingPrice:kt().required("required"),medicineType:kt().required("required"),medicineImage:hW().required("required")}),N_e=ui().shape({medicineName:kt().required("Required"),description:kt().required("required"),costPrice:kt().required("required"),sellingPrice:kt().required("required"),medicineType:kt().required("required")}),ky="https://hcompanion.onrender.com/api",O_e=async e=>{try{const t=await Ee.post(`${ky}/pharmacy/medicine/add`,e,{headers:{"Content-Type":"multipart/form-data",authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),re.fire({icon:"success",text:"Successfully Added"}),t.data.medicineDetails}catch(t){console.log(t),t.response.status=="500"&&re.fire({icon:"error",text:"Encountered an Error on the backend"})}},k_e=async()=>{try{const e=await Ee.get(`${ky}/pharmacy/medicine/viewStocks`,{headers:{"Content-Type":"multipart/form-data",authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(e.data),e.data.medicines}catch(e){console.log(e),e.response.status=="500"&&re.fire({icon:"error",text:"Encountered an Error on the backend"})}},P_e=async({inventoryId:e})=>{try{const t=await Ee.post(`${ky}/pharmacy/medicine/deleteStock`,{inventoryId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),re.fire({icon:"success",text:"Medicine has been Deleted"}),!0}catch(t){console.log(t),t.response.status=="400"&&re.fire({icon:"error",text:"Medicine Not Found"}),t.response.status=="500"&&re.fire({icon:"error",text:"Encountered an Error on the backend"})}},D_e=async({inventoryId:e})=>{try{console.log(e);const t=await Ee.post(`${ky}/pharmacy/medicine/viewDetails`,{inventoryId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.medicine}catch(t){console.log(t),t.response.status=="500"&&re.fire({icon:"error",text:"Encountered an Error on the backend"})}},L_e=async({medicine:e})=>{try{await console.log(e);const t=await Ee.post(`${ky}/pharmacy/medicine/updateStock`,e,{headers:{"Content-Type":"multipart/form-data",authorization:`Bearer ${sessionStorage.getItem("token")}`}});return re.fire({icon:"success",text:"Medicine has been Updated"}),console.log(t.data),t.data.updated}catch(t){console.log(t)}};function M_e(){const[e,t]=T.useState([]),r=qr(),n=Mn({initialValues:{medicineName:"",description:"",costPrice:"",sellingPrice:"",medicineType:"",medicineImage:""},validationSchema:A_e,onSubmit:async(a,s)=>{console.log(`values ${JSON.stringify(a)}`),await O_e(a)&&r("/pharmacy/home")}}),i=async()=>{const a=await x_e();console.log(`${JSON.stringify(a)}`),await t(a)},o=(a,s)=>{try{const c=a.target.files[0];n.setFieldValue("medicineImage",c)}catch(c){console.log(c)}};return T.useEffect(()=>{i()},[]),console.log(n.errors),h.jsx("div",{className:"screen w-full h-full flex flex-row",children:h.jsx("div",{style:{backgroundImage:"url('/icons/pharmacyBg.jpg')",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},className:"w-full h-full flex flex-1 flex-col gap-4",children:h.jsxs("div",{className:"w-full h-full overflow-y-scroll pt-4 flex flex-1 flex-col gap-4 bg-black bg-opacity-70",children:[h.jsx(Pq,{}),h.jsx("div",{className:"addForm flex justify-center w-full h-[100%] mt-10 mb-[5vh]",children:h.jsxs("form",{onSubmit:n.handleSubmit,className:"w-[40%] h-[100%] p-4 flex flex-col gap-6 border shadow-xl bg-white",children:[h.jsx("span",{children:h.jsx("h1",{className:"font-bold text-xl text-emerald-500",children:"New Medicine"})}),h.jsx(Ue,{list:"medicines",variant:"filled",name:"medicineName",placeholder:"medicine name",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.medicineName&&(n.errors.medicineName?{color:"error",helperText:`${n.errors.medicineName}`}:{color:"success"})}),h.jsx("div",{children:h.jsx("datalist",{id:"medicines",children:e&&e.length>0?e.map((a,s)=>h.jsx("option",{value:a.name},s)):h.jsx("option",{value:"No Medicines Available"})})}),h.jsx(Ue,{variant:"filled",name:"medicineType",placeholder:"medicineType",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.medicineType&&(n.errors.medicineType?{color:"error",helperText:`${n.errors.medicineType}`}:{color:"success"})}),h.jsx(Ue,{variant:"filled",name:"description",placeholder:"description",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.description&&(n.errors.description?{color:"error",helperText:`${n.errors.description}`}:{color:"success"})}),h.jsx(Ue,{variant:"filled",name:"costPrice",placeholder:"cost price",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.costPrice&&(n.errors.costPrice?{color:"error",helperText:`${n.errors.costPrice}`}:{color:"success"})}),h.jsx(Ue,{variant:"filled",name:"sellingPrice",placeholder:"selling price",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.sellingPrice&&(n.errors.sellingPrice?{color:"error",helperText:`${n.errors.sellingPrice}`}:{color:"success"})}),h.jsx("div",{children:h.jsx(Eh,{id:"id_medicineImage",accept:"image/jpeg, image/png",name:"medicineImage",helperText:"Upload Image",onChange:o,onBlur:n.handleBlur,...n.touched.medicineImage&&(n.errors.medicineImage?{color:"error",helperText:`${n.errors.medicineImage}`}:{color:"success"})})}),h.jsx("button",{type:"submit",className:"w-[full] h-[10%] border rounded-[5%] bg-orange-500 p-2 font-bold",children:"Add Medicine to the Inventory"})]})})]})})})}function j_e(){const[e,t]=T.useState([]),r=async()=>{const n=await k_e();await t(n)};return T.useEffect(()=>{r()},[]),h.jsxs("div",{className:"stockViewScreen w-full h-full p-2 flex flex-col gap-10 overflow-y-scroll",children:[h.jsx(Pq,{}),h.jsxs("div",{className:"w-full h-full mt-20 flex flex-col gap-2",children:[h.jsx("div",{className:"heading w-full  ml-20 mb-10  text-lg text-emerald-400 font-bold flex",children:h.jsx("h2",{children:"Medicine Stocks"})}),e&&e.length>0?h.jsx(U_e,{medicines:e}):h.jsx("span",{className:"w-full h-[70%] mb-10 text-xl font-bold flex flex-1 justify-center items-center ",children:"No medicine Stock.....!!!"})]})]})}function U_e(e){const t=qr(),r=async(i,o)=>{console.log(o),await P_e({inventoryId:o}),t("/pharmacy/stock/viewStocks")},{medicines:n}=e;return h.jsx("div",{className:"w-full h-full mb-10 flex flex-1 justify-center ",children:h.jsxs(ur,{hoverable:!0,className:"w-full gap-x-10 ",children:[h.jsxs(ur.Head,{className:"gap-x-72",children:[h.jsx(ur.HeadCell,{children:"Medicine Name"}),h.jsx(ur.HeadCell,{children:"Description"}),h.jsx(ur.HeadCell,{children:"Type"}),h.jsx(ur.HeadCell,{children:"Stock"}),h.jsx(ur.HeadCell,{children:"cost price"}),h.jsx(ur.HeadCell,{children:"selling price"}),h.jsx(ur.HeadCell,{children:"Image"}),h.jsx(ur.HeadCell,{}),h.jsx(ur.HeadCell,{})]}),h.jsx(ur.Body,{className:"font-bold",children:n.map((i,o)=>h.jsxs(ur.Row,{className:"border-b-4",id:`id_${o}`,children:[h.jsx(ur.Cell,{children:i.medicineId.medicineName}),h.jsx(ur.Cell,{children:i.medicineId.description}),h.jsx(ur.Cell,{children:i.medicineId.medicineType}),h.jsx(ur.Cell,{children:i.stock}),h.jsx(ur.Cell,{children:i.costPrice}),h.jsx(ur.Cell,{children:i.sellingPrice}),h.jsx(ur.Cell,{children:h.jsx("img",{className:"h-14",src:i.medicineImage,alt:"productImage"})}),h.jsx(ur.Cell,{children:h.jsx("img",{className:"h-8 cursor-pointer",src:"/icons/editIcon.png",alt:"editIcon",id:`id_navEdit_${o}`,onClick:()=>{t("/pharmacy/stock/editStock",{state:{inventoryId:i._id}})}})}),h.jsx(ur.Cell,{children:h.jsx("img",{className:"h-8 cursor-pointer opacity-70",src:"/icons/deleteIcon.png",alt:"editIcon",id:`id_btnDelete_${o}`,onClick:a=>{r(a,i._id)}})})]},i._id))})]})})}function F_e(){return h.jsxs("div",{className:"screen w-screen h-screen flex flex-row",children:[h.jsx("div",{className:"fixed header w-[21%] h-[100vh] ",children:h.jsx(I_e,{})}),h.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4 overflow-y-auto",children:h.jsx(Fi,{})})]})}function V_e(){const[e,t]=T.useState(void 0),[r,n]=T.useState(void 0),i=Mn({initialValues:{medicineName:"",description:"",costPrice:"",stock:"",sellingPrice:"",medicineType:"",medicineImage:""},validationSchema:N_e,onSubmit:async(d,u)=>{await L_e({medicine:{...d,inventoryId:a}}),await s()}}),o=$f(),{inventoryId:a}=o.state,s=async()=>{const d=await D_e({inventoryId:a});console.log(`temp ${JSON.stringify(d)}`),i.setFieldValue("medicineName",d.medicineId.medicineName),i.setFieldValue("description",d.medicineId.description),i.setFieldValue("medicineType",d.medicineId.medicineType),i.setFieldValue("costPrice",d.costPrice),i.setFieldValue("sellingPrice",d.sellingPrice),i.setFieldValue("medicineImage",d.medicineImage),i.setFieldValue("stock",d.stock),await t(d)},c=async d=>{const u=d.target.files[0],p=new FileReader(u);p.onload=f=>{const m=f.target.result;n(m),i.setFieldValue("medicineImage",u)},p.readAsDataURL(u)},l=d=>{console.log(parseFloat(d.target.value)+1);const u=(100+parseFloat(d.target.value))/100*parseFloat(i.values.costPrice);i.setFieldValue("sellingPrice",u.toFixed(2))};return T.useEffect(()=>{s()},[]),h.jsxs("div",{className:"w-full h-full overflow-y-auto pl-4 pt-5",children:[h.jsx("div",{className:"w-full h-[10%] text-center",children:h.jsx("h2",{className:"text-[5vh] text-emerald-400 font-bold",children:"Medicine Details"})}),h.jsxs("div",{className:"w-full h-full mt-10 flex justify-center gap-10",children:[h.jsxs("form",{onSubmit:i.handleSubmit,className:"w-[50%] flex flex-col gap-5 font-bold",children:[h.jsx(Ue,{variant:"filled",name:"medicineName",label:"Medicine Name",value:i.values.medicineName,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.medicineName&&(i.errors.medicineName?{color:"error",helperText:`${i.errors.medicineName}`}:{color:"success"})}),h.jsx(Ue,{variant:"filled",name:"description",label:"Description",value:i.values.description,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.description&&(i.errors.description?{color:"error",helperText:`${i.errors.description}`}:{color:"success"})}),h.jsx(Ue,{variant:"filled",name:"MedicineType",label:"Medicine Type",value:i.values.medicineType,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.medicineType&&(i.errors.medicineType?{color:"error",helperText:`${i.errors.medicineType}`}:{color:"success"})}),h.jsx(Ue,{variant:"filled",name:"stock",label:"Stock",type:"number",value:i.values.stock,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.stock&&(i.errors.stock?{color:"error",helperText:`${i.errors.stock}`}:{color:"success"})}),h.jsx(Ue,{variant:"filled",name:"margin",label:"Margin %",onChange:l}),h.jsx(Ue,{variant:"filled",name:"costPrice",label:"Cost Price",value:i.values.costPrice,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.costPrice&&(i.errors.costPrice?{color:"error",helperText:`${i.errors.costPrice}`}:{color:"success"})}),h.jsx(Ue,{variant:"filled",name:"sellingPrice",label:"Selling Price",value:i.values.sellingPrice,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.sellingPrice&&(i.errors.sellingPrice?{color:"error",helperText:`${i.errors.sellingPrice}`}:{color:"success"})}),h.jsx("button",{type:"submit",className:"w-[full] h-[5vh] border rounded-[5%] bg-orange-500 p-2",children:"Save Details"})]}),h.jsxs("div",{className:"medicineImage w-[30%] flex flex-col gap-10 h-[60%]",children:[h.jsx("img",{src:r||i.values.medicineImage,alt:"medicineImage",className:"h-[70%] w-[70%] shadow-2xl"}),h.jsx("div",{children:h.jsx(Eh,{helperText:"upload image",id:"id_medicineImage",name:"medicineImage",onChange:c,onBlur:i.handleBlur,...i.touched.medicineImage&&(i.errors.medicineImage?{color:"error",helperText:`${i.errors.medicineImage}`}:{color:"success"})})})]})]})]})}var Dq={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},fU=Tr.createContext&&Tr.createContext(Dq),B_e=["attr","size","title"];function $_e(e,t){if(e==null)return{};var r=H_e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function H_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Bb(){return Bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bb.apply(this,arguments)}function mU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $b(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mU(Object(r),!0).forEach(function(n){W_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W_e(e,t,r){return t=G_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G_e(e){var t=z_e(e,"string");return typeof t=="symbol"?t:t+""}function z_e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lq(e){return e&&e.map((t,r)=>Tr.createElement(t.tag,$b({key:r},t.attr),Lq(t.child)))}function Rn(e){return t=>Tr.createElement(K_e,Bb({attr:$b({},e.attr)},t),Lq(e.child))}function K_e(e){var t=r=>{var{attr:n,size:i,title:o}=e,a=$_e(e,B_e),s=i||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),Tr.createElement("svg",Bb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:c,style:$b($b({color:e.color||r.color},r.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&Tr.createElement("title",null,o),e.children)};return fU!==void 0?Tr.createElement(fU.Consumer,null,r=>t(r)):t(Dq)}function PS(e){return Rn({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.5 0h-12c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h12c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM13 14h-11v-12h11v12zM4 9h7v1h-7zM4 11h7v1h-7zM5 4.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5zM7.5 6h-2c-0.825 0-1.5 0.45-1.5 1v1h5v-1c0-0.55-0.675-1-1.5-1z"},child:[]}]})(e)}function q_e(e){return Rn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function Mq(e){return Rn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"},child:[]}]})(e)}function Y_e(e){return Rn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"},child:[]}]})(e)}function HP(e){return Rn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.5 4.5c-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .65.73.45.75.45C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.41.21.75-.19.75-.45V6c-1.49-1.12-3.63-1.5-5.5-1.5zm3.5 14c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"},child:[]}]})(e)}function jq(e){return Rn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(e)}function WP(e){return Rn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16ZM11 14V16H13V14H11ZM7 14V16H9V14H7ZM15 14V16H17V14H15Z"},child:[]}]})(e)}function X_e(){return h.jsxs("div",{className:"w-full h-[10vh] px-2 text-center font-bold flex justify-center items-center gap-2 ",children:[h.jsxs(Sr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/pharmacy/profile/profileDetails ",children:[h.jsx(PS,{className:"h-full w-[5%]"}),h.jsx("span",{className:"flex flex-1",children:"Profile Details"})]}),h.jsxs(Sr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/pharmacy/profile/contactDetails",children:[h.jsx(HP,{className:"h-full w-[5%]"}),h.jsx("span",{className:"flex flex-1",children:"Contact Details"})]}),h.jsxs(Sr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/pharmacy/profile/passwordReset",children:[h.jsx(WP,{className:"h-full w-[5%]"}),h.jsx("span",{className:"flex flex-1",children:"Password Reset"})]})]})}function J_e(){return h.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[h.jsx(X_e,{}),h.jsx("div",{className:"w-full h-full mt-5 pb-2",children:h.jsx(Fi,{})})]})}function GP(e){return Rn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(e)}function im(e){return Rn({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M308 96c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v44.748c0 6.627 5.373 12 12 12h85.28c27.308 0 48.261 9.958 60.97 27.252H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h158.757c-6.217 36.086-32.961 58.632-74.757 58.632H12c-6.627 0-12 5.373-12 12v53.012c0 3.349 1.4 6.546 3.861 8.818l165.052 152.356a12.001 12.001 0 0 0 8.139 3.182h82.562c10.924 0 16.166-13.408 8.139-20.818L116.871 319.906c76.499-2.34 131.144-53.395 138.318-127.906H308c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-58.69c-3.486-11.541-8.28-22.246-14.252-32H308z"},child:[]}]})(e)}function _h(e){return Rn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(e)}function Q_e(e){return Rn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Video_On"},child:[{tag:"path",attr:{d:"M21.05,5.05a1.433,1.433,0,0,0-1.48.08L16.25,7.37V6.56a2.5,2.5,0,0,0-2.5-2.5H4.69a2.5,2.5,0,0,0-2.5,2.5V17.44a2.5,2.5,0,0,0,2.5,2.5h9.06a2.5,2.5,0,0,0,2.5-2.5v-.81l3.32,2.24a1.5,1.5,0,0,0,.81.24,1.414,1.414,0,0,0,1.43-1.43V6.32A1.437,1.437,0,0,0,21.05,5.05Zm-5.8,12.39a1.5,1.5,0,0,1-1.5,1.5H4.69a1.5,1.5,0,0,1-1.5-1.5V6.56a1.5,1.5,0,0,1,1.5-1.5h9.06a1.5,1.5,0,0,1,1.5,1.5Zm5.56.24a.415.415,0,0,1-.23.38.425.425,0,0,1-.45-.02l-3.88-2.62V8.58l3.88-2.62a.425.425,0,0,1,.45-.02.415.415,0,0,1,.23.38Z"},child:[]}]}]})(e)}function Uq({username:e}){const{email:t}=Ti(n=>n.user),r=Mn({initialValues:{password:"",confirmPassword:""},validationSchema:uz,onSubmit:async(n,i)=>{await $he({password:n.password,email:t})&&(await re.fire({icon:"success",text:"Password has been reset"}),window.location.reload())}});return h.jsx("div",{className:"w-full h-full",children:h.jsxs("form",{onSubmit:r.handleSubmit,className:"w-full h-full flex flex-col gap-6",children:[h.jsx(Ue,{variant:"filled",label:"New Password",type:"password",name:"password",onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.password&&(r.errors.password?{color:"error",helperText:`${r.errors.password}`}:{color:"success"})}),h.jsx(Ue,{variant:"filled",label:"Confirm Password",type:"password",name:"confirmPassword",onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.confirmPassword&&(r.errors.confirmPassword?{color:"error",helperText:`${r.errors.confirmPassword}`}:{color:"success"})}),h.jsxs("button",{type:"submit",className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(_h,{}),"Save"]})]})})}function gU(){return h.jsx("div",{className:"w-full h-full flex flex-col pt-[15vh] items-center",children:h.jsxs("div",{className:"resetPassword w-[40%] h-fit flex flex-col gap-6 border shadow-lg p-5 ",children:[h.jsx("h1",{className:"text-lg font-medium",children:"Reset Password"}),h.jsx(Uq,{})]})})}function Z_e(e){const{medicine:t}=e;return console.log(`medicine ${JSON.stringify(t)}`),h.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:h.jsxs("div",{className:"h-full w-full flex flex-col ",children:[h.jsx("div",{className:"w-full h-[50%] ",children:h.jsx("img",{src:t.medicineImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[h.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[h.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t.medicineId.medicineName}),h.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:h.jsx("div",{className:"price w-full h-[5vh]",children:h.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[h.jsx(im,{})," ",t.sellingPrice]})})})]}),h.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:h.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",children:"Order Medicine"})})]})]})})}const Py="https://hcompanion.onrender.com/api",zP=sessionStorage.getItem("token"),ebe=async()=>{try{const e=await Ee.get(`${Py}/patient/medicines/getAllMedicines`);return console.log(e),e.data.medicines}catch(e){console.log(e)}},tbe=async({inventoryId:e})=>{try{const t=await Ee.post(`${Py}/patient/medicines/getMedicineDetails`,{inventoryId:e});return console.log(t),t.data.medicine}catch(t){console.log(t)}},rbe=async()=>{try{return(await Ee.get(`${Py}/patient/doctor/medicine/requests`,{headers:{Authorization:`bearer ${zP}`}})).data.medicines}catch(e){return console.log(e),!1}},nbe=async({razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,doctorId:n,order:i,pharmacyId:o,pharmacyInventoryId:a})=>{try{const s=await Ee.post(`${Py}/patient/doctors/medicine/requests/order`,{razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,doctorId:n,order:i,pharmacyId:o,pharmacyInventoryId:a},{headers:{Authorization:`bearer ${zP}`}});return!0}catch(s){return console.log(s),!1}},ibe=async()=>{try{return(await Ee.get(`${Py}/patient/doctors/medicine/requests/ordered`,{headers:{Authorization:`bearer ${zP}`}})).data.medicines}catch(e){return console.log(e),!1}};function obe(){const e=qr(),[t,r]=T.useState([]),n=async()=>{const o=await ebe();o.length>0&&await r(o)},i=async(o,a)=>{e({pathname:"/patient/medicines/medicineDetails",search:`?${tb({inventoryId:encodeURIComponent(a)})}`})};return T.useEffect(()=>{n()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"medicinesList w-full h-full flex flex px-20 py-5 ",children:h.jsx("div",{className:"w-full h-full p-4 grid grid-cols-4 justify-items-center gap-y-10 ",children:t&&t.length>0?t.map((o,a)=>h.jsx("div",{className:"w-auto h-auto flex flex-col cursor-pointer hover:bg-slate-400 rounded-lg",onClick:s=>i(s,o._id),children:h.jsx(Z_e,{medicine:o},o._id)},o._id)):h.jsx("span",{className:"text-lg font-medium",children:"No Medicines.....:)"})})})})}function abe(){const[e,t]=T.useState(void 0),[r,n]=TH(),i=async()=>{const o=await tbe({inventoryId:decodeURIComponent(r.get("inventoryId"))});t(o)};return T.useEffect(()=>{i()},[r]),h.jsx("div",{className:"w-full h-screen flex flex-col",children:h.jsxs("div",{className:"content w-full h-full grid grid-cols-2 justify-items-center gap-8  ",children:[h.jsx("div",{className:"image w-full h-[70vh] mt-2 flex justify-center ml-10   ",children:h.jsx("img",{src:e&&e.medicineImage,alt:"Medicine Image",className:"h-full w-[70%]"})}),h.jsxs("div",{className:"w-full h-full pl-4 grid grid-cols-1 gap-y-4 place-content-center ",children:[h.jsx("div",{className:"",children:h.jsx("pre",{className:"opacity-50 text-medium font-medium",children:`By pharmacy ${e&&e.pharmacyId.userId.username}`})}),h.jsx("h1",{className:"font-sm text-[6vh] text-emerald-400 ",children:e&&e.medicineId.medicineName}),h.jsx("div",{className:"price w-full h-[10vh] ",children:h.jsxs("span",{className:"w-full h-full text-2xl font-medium flex items-center gap-4",children:[h.jsx(im,{})," ",e&&e.sellingPrice]})}),h.jsxs("div",{className:"description w-full h-full text-black opacity-60 flex  gap-2 ",children:[h.jsx("h1",{children:"Description : "}),h.jsx("span",{className:"",children:e&&e.medicineId.description})]}),h.jsx("div",{className:"w-full h-[10vh] flex  py-1 mb-2 pr-[40%]",children:h.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",children:"Order Medicine"})})]})]})})}function sbe(e){return Rn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 2H6a2 2 0 0 0-2 2v3H2v2h2v2H2v2h2v2H2v2h2v3a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm-8 2.999c1.648 0 3 1.351 3 3A3.012 3.012 0 0 1 13 11c-1.647 0-3-1.353-3-3.001 0-1.649 1.353-3 3-3zM19 18H7v-.75c0-2.219 2.705-4.5 6-4.5s6 2.281 6 4.5V18z"},child:[]}]})(e)}function Hb(e){return Rn({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M0 64C0 46.3 14.3 32 32 32l64 0 16 0 176 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-56.2 0c9.6 14.4 16.7 30.6 20.7 48l35.6 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-35.6 0c-13.2 58.3-61.9 103.2-122.2 110.9L274.6 422c14.4 10.3 17.7 30.3 7.4 44.6s-30.3 17.7-44.6 7.4L13.4 314C2.1 306-2.7 291.5 1.5 278.2S18.1 256 32 256l80 0c32.8 0 61-19.7 73.3-48L32 208c-17.7 0-32-14.3-32-32s14.3-32 32-32l153.3 0C173 115.7 144.8 96 112 96L96 96 32 96C14.3 96 0 81.7 0 64z"},child:[]}]})(e)}function DS(e){return Rn({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"},child:[]}]})(e)}function Uv(e){return Rn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-96 55.2C54 332.9 0 401.3 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7c0-81-54-149.4-128-171.1l0 50.8c27.6 7.1 48 32.2 48 62l0 40c0 8.8-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16s7.2-16 16-16l0-24c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 24c8.8 0 16 7.2 16 16s-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16l0-40c0-29.8 20.4-54.9 48-62l0-57.1c-6-.6-12.1-.9-18.3-.9l-91.4 0c-6.2 0-12.3 .3-18.3 .9l0 65.4c23.1 6.9 40 28.3 40 53.7c0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.4 16.9-46.8 40-53.7l0-59.1zM144 448a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"},child:[]}]})(e)}function cbe(){return h.jsxs("div",{className:"screen w-full h-full flex flex-row gap-4",children:[h.jsxs("div",{className:"sideOptions w-[18%] p-4 h-full grid grid-cols-1 gap-6 border shadow-lg shadow-emerald-300",children:[h.jsxs(Sr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/details",children:[h.jsx(PS,{className:"w-[3vw] h-[3vh]"}),"Personal Details",h.jsx("span",{})," "]}),h.jsxs(Sr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/contactDetails",children:[h.jsx(sbe,{className:"w-[3vw] h-[3vh]"}),"Contact Details",h.jsx("span",{})]}),h.jsxs(Sr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/bookings",children:[h.jsx(Uv,{className:"w-[3vw] h-[3vh]"}),"Booking Details",h.jsx("span",{})]}),h.jsxs(Sr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/medicine",children:[h.jsx(Uv,{className:"w-[3vw] h-[3vh]"}),"Medicines",h.jsx("span",{})]}),h.jsxs(Sr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/test",children:[h.jsx(Uv,{className:"w-[3vw] h-[3vh]"}),"Lab Tests",h.jsx("span",{})]}),h.jsxs(Sr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/prescription",children:[h.jsx(Uv,{className:"w-[3vw] h-[3vh]"}),"Prescriptions",h.jsx("span",{})]})]}),h.jsx("div",{className:"content w-[60%] flex flex-1 flex-col overflow-y-auto",children:h.jsx(Fi,{})})]})}const lbe=ui().shape({firstName:kt(),lastName:kt(),bloodGroup:kt().matches(/^(A|B|AB|O)[+-]$/,"Not a valid Blood Group"),weight:kt().matches(/^[1-9][0-9]{0,5}(\.[0-9]{1,2})?$/,"Valid weight"),height:kt().matches(/^[1-9][0-9]{0,5}(\.[0-9]{1,2})?$/,"Valid height")}),dbe=ui().shape({place:kt(),state:kt(),country:kt(),pincode:kt().matches(/[1-9][0-9]{5}$/,"Valid Number"),district:kt(),phone:EW().of(kt().matches(/^[1-9][0-9]{9}$/,"not valid number"))});ui().shape({password:kt(),confirmPassword:kt()});function ube(){T.useState(void 0);const[e,t]=T.useState(void 0),r=Mn({initialValues:{firstName:"",lastName:"",bloodGroup:"",weight:"",height:"",profileImage:""},validationSchema:lbe,onSubmit:async(o,a)=>{console.log(o),await Bve(o)&&i()}}),n=o=>{const a=o.target.files[0],s=new FileReader;s.onload=c=>{const l=c.target.result;t(l),r.setFieldValue("profileImage",a)},s.readAsDataURL(a)},i=async()=>{const o=await cq();console.log(`temp ${JSON.stringify(o)}`),o&&(await r.setFieldValue("firstName",o.firstName),r.setFieldValue("lastName",o.lastName),r.setFieldValue("bloodGroup",o.bloodGroup),r.setFieldValue("weight",o.weight),r.setFieldValue("height",o.height),r.setFieldValue("profileImage",o.profileImage))};return T.useEffect(()=>{i()},[]),console.log(r.values),h.jsxs("form",{onSubmit:r.handleSubmit,className:"screen w-full h-full mt-5 flex flex-col gap-4",children:[h.jsxs("div",{className:"image w-full h-auto flex gap-4 justify-start pl-[20vw]",children:[h.jsx("img",{src:e||r.values.profileImage,className:"rounded-full w-[20vh] h-[20vh]"}),h.jsx("div",{className:"w-full h-auto flex flex-1 items-center ",children:h.jsx("div",{className:"flex flex-col gap-1",children:h.jsx(Eh,{id:"id_profileImage",name:"profileImage",helperText:"upload image",onChange:n,onBlur:r.handleBlur,...r.touched.profileImage&&(r.errors.profileImage?{color:"error",helperText:`${r.errors.profileImage}`}:{color:"success"})})})})]}),h.jsx("div",{className:"w-full h-full mt-10 flex justify-center  ",children:h.jsxs("div",{className:"w-[60%] h-full flex flex-col gap-4",children:[h.jsxs("div",{className:"w-full  grid grid-cols-2 gap-2 ",children:[h.jsx(Ue,{variant:"filled",name:"firstName",label:"First Name",value:r.values.firstName,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.firstName&&(r.errors.firstName?{color:"error",helperText:`${r.errors.firstName}`}:{color:"success"})}),h.jsx(Ue,{variant:"filled",name:"lastName",label:"Last Name",value:r.values.lastName,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.lastName&&(r.errors.lastName?{color:"error",helperText:`${r.errors.lastName}`}:{color:"success"})})]}),h.jsx(Ue,{variant:"filled",name:"bloodGroup",label:"Blood Group",className:"w-full ",value:r.values.bloodGroup,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.bloodGroup&&(r.errors.bloodGroup?{color:"error",helperText:`${r.errors.bloodGroup}`}:{color:"success"})}),h.jsx(Ue,{variant:"filled",name:"weight",label:"weight",className:"w-full ",value:r.values.weight,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.weight&&(r.errors.weight?{color:"error",helperText:`${r.errors.weight}`}:{color:"success"})}),h.jsx(Ue,{variant:"filled",name:"height",label:"height",className:"w-full ",value:r.values.height,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.height&&(r.errors.height?{color:"error",helperText:`${r.errors.height}`}:{color:"success"})}),h.jsx("button",{type:"submit",className:"w-[full] h-[5vh] border font-medium rounded-[5%] bg-orange-500 p-2 ",children:"Save"})]})})]})}const hbe={firstName:"",lastName:"",profileImage:"",weight:"",height:""},Fq=Jf({name:"doctor",initialState:hbe,reducers:{setDoctor(e,t){e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,e.profileImage=t.payload.profileImage,e.weight=t.payload.weight,e.height=t.payload.height}}}),{setDoctor:MC}=Fq.actions,pbe=Fq.reducer,Vq="https://hcompanion.onrender.com/api",fbe=async({token:e})=>{try{const t=await Ee.get(`${Vq}/doctor/getBasicDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.userData}catch(t){return t.response.status=="401"&&re.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}},mbe=async({token:e})=>{try{const t=await Ee.get(`${Vq}/doctor/profile/viewDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.doctorDetails}catch(t){return console.log(t),t.response.status=="401"&&re.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),!1}};at.extend(js);const gbe="wss://hcompanion.onrender.com",ybe=async({userId:e})=>{const t=new WebSocket(gbe);t.onopen=()=>{console.log("connected to websocket"),t.send(JSON.stringify({type:"register",clientId:e}))},t.onmessage=r=>{const n=JSON.parse(r==null?void 0:r.data);if(n.type=="meetingReminder"){const i=at().diff(at(`${n.booking.startTime}`,"H:mm A"),"minutes");Math.abs(i)<=60&&re.fire(`Meeting in ${Math.abs(i)} minutes`,"","warning")}}};function vbe(){const e=qr(),t=vh(),{username:r,email:n,role:i,isLoggedIn:o}=Ti(c=>c.user),a=Ti(c=>c.doctor),s=async()=>{if(sessionStorage.getItem("token")){const c=await fbe({token:sessionStorage.getItem("token")});if(c){const l=await mbe({token:sessionStorage.getItem("token")});await ybe({userId:c._id}),console.log(l),t(po({username:c.username,email:c.email,role:c.role,isLoggedIn:!0})),t(MC({firstName:l.firstName,lastName:l.lastName,profileImage:l.profileImage,weight:l.weight,height:l.height,profileImage:l.profileImage}))}else po({}),MC({})}};return console.log(a),T.useEffect(()=>{s()},[]),h.jsx("div",{className:"navBar w-full h-full flex flex-col",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-4 p-4 bg-slate-800 bg-opacity-90 rounded-tr-[3%]  ",children:[h.jsxs("div",{className:"w-full h-[15vh] flex flex-row items-center gap-4  p-1  ",children:[h.jsx("img",{src:a.profileImage,className:"rounded-full w-[4vw] h-[100%]"}),h.jsxs("div",{className:"h-full w-full pl-4 flex flex-1 flex-col justify-center gap-2 bg-white bg-opacity-40 rounded-lg ",children:[h.jsx("h2",{className:"text-lg font-bold",children:a&&a.firstName?a.firstName:r}),h.jsx("span",{className:" font-sm",children:"Doctor"})]})]}),h.jsx("div",{className:"search w-full h-[5%]",children:h.jsx(Ue,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),h.jsxs("div",{className:"options h-full w-full mt-10 flex flex-col gap-4 font-medium text-white ",children:[h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/doctorHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{e("/doctor")},children:"Home"})]}),h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/doctorSlotSetting.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",id:"id_navSlot",onClick:()=>{e("/doctor/slot")},children:"Slot"})]}),h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/doctorBookings.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/bookings")},children:"Bookings"})]}),h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/profile")},children:"Profile"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),t(po({})),t(MC({})),e("/")},children:"sign out"})]})]})]})})}function Ebe(){return h.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[h.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:h.jsx(vbe,{})}),h.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:h.jsx(Fi,{})})]})}at.extend(js);const _be=at(),ug=[];for(var jC=0;jC<=5;jC++)ug.push(_be.add(jC,"day").format("D MMM, dddd YYYY").toString());at.extend(js);at();const bbe=["9:00 AM","11:00 AM","1:00 PM","3:00 PM","5:00 PM","7:00 PM"],KP="https://hcompanion.onrender.com/api",wbe=sessionStorage.getItem("token"),Sbe=async({startTime:e,slotDate:t})=>{try{const r=await Ee.post(`${KP}/doctor/slot/add`,{startTime:e,slotDate:t},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(r.data),r.data.addedSlot&&re.fire({icon:"success",text:"Added Slot"}),r.data.addedSlot}catch(r){return console.log(`error ${r}`),!1}},yU=async({slotDate:e})=>{var t;try{console.log("token in slot",wbe);const r=await Ee.post(`${KP}/doctor/slot/viewSlots`,{slotDate:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(r.data),r.data.slots}catch(r){return console.log(r),((t=r.response)==null?void 0:t.status)=="401"&&re.fire({html:`<b>${r.response.data.message}</b>`,title:"Session Out"}),r.response.status=="400"&&r.response.data.invalidToken&&re.fire({html:`<b>${r.response.status.message}</b>`,title:"Session Out"}),!1}},Tbe=async({bookingId:e})=>{try{const t=await Ee.post(`${KP}/doctor/slot/removeSlot`,{bookingId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),re.fire({icon:"success",text:"Removed the Slot"}),!0}catch(t){return console.log(`error ${t}`),!1}};at.extend(js);function Cbe(){const[e,t]=T.useState(void 0),[r,n]=T.useState([]);Ti(a=>a.doctor);const i=async()=>{await t(ug[0]);const a=await yU({slotDate:ug[0]});console.log(a),await n(a)},o=async a=>{await t(a);const s=await yU({slotDate:a});console.log(s),await n(s)};return T.useEffect(()=>{t(ug[0]),i()},[]),h.jsx("div",{className:"w-full h-full flex p-4",children:h.jsxs("div",{className:"w-full h-full flex flex-row gap-8",children:[h.jsxs("div",{className:"w-[20%] h-auto p-4 flex flex-col gap-2 border shadow-lg shadow-emerald-400 bg-black bg-opacity-30 rounded-2xl ",children:[h.jsx("h1",{className:"font-bold",children:"Dates"}),h.jsx("div",{className:"dates w-full h-[10%] grid grid-cols-1 justify-items-start gap-4 ",children:ug.map((a,s)=>h.jsx("button",{className:"p-2 w-full h-full font-medium bg-emerald-400 bg-opacity-50 border flex justify-start pl-5 ",id:`id_slotDate_${s}`,onClick:()=>o(a),children:a},s))})]}),h.jsxs("div",{className:"w-[80%] h-full bg-black bg-opacity-30 rounded-xl  pt-10 pl-8 pr-5 flex flex-col overflow-y-scroll",children:[h.jsxs("h2",{className:"font-bold flex flex-row justify-evenly",children:["Slots ",h.jsx("span",{children:e||"date"})]}),h.jsx("div",{className:"w-full mt-10 gap-4 flex flex-col  p-8 ",children:bbe.map((a,s)=>h.jsx("div",{className:"w-auto h-auto bg-white rounded-lg",children:at().isBefore(at(at(`${e} ${at(a,"h:mm A").format("H:mm A")}`,"D MMM, dddd YYYY H:mm A").format("D MMM, dddd YYYY H:mm A"),"D MMM, dddd YYYY H:mm A"))&&(r&&r.length>0&&r.some(c=>c.startTime==at(a,"h:mm A").format("H:mm A").toString())?r.find(c=>c.startTime==at(a,"h:mm A").format("H:mm A").toString()).bookedStatus==1?h.jsx(Ibe,{time:a,onLoad:i,timeIndex:s,slot:r.find(c=>c.startTime==at(a,"h:mm A").format("H:mm A").toString())}):h.jsx(xbe,{timeIndex:s,time:a,slot:r.find(c=>c.startTime==at(a,"h:mm A").format("H:mm A").toString()),onLoad:i}):h.jsx(Rbe,{timeIndex:s,time:a,selectedDate:e,onLoad:i}))},s))})]})]})})}function Rbe(e){const{timeIndex:t}=e,r=async()=>{console.log(`slot date ${e.slotDate}`),await Sbe({slotDate:e.selectedDate,startTime:at(e.time,"h:mm A").format("H:mm A").toString()})&&e.onLoad()};return h.jsxs("div",{className:"w-full h-[15vh] p-4 flex flex-row gap-2 border rounded-lg shadow-lg",children:[h.jsx("div",{className:"w-[20%] flex items-center justify-center border shadow-md",children:h.jsx("span",{className:"text-emerald-400 font-medium text-lg",children:e.time})}),h.jsx("div",{className:"flex flex-1 flex-row gap-10 items-center pl-10 border shadow-md",children:h.jsx("button",{className:"w-[30%] h-[60%] bg-green-400 font-medium border ",id:`id_btnaddslot_${t}`,onClick:r,children:"Add"})})]})}function Ibe(e){return h.jsxs("div",{className:"w-full h-[20vh] p-4 bg-red-400 bg-opacity-50 flex flex-row gap-2 border rounded-lg shadow-lg",children:[h.jsx("div",{className:"w-[20%] flex items-center justify-center  shadow-md",children:h.jsx("span",{className:"text-emerald-400 font-medium text-lg",children:e.time})}),h.jsxs("div",{className:"w-full h-full flex flex-1 flex-row gap-10 items-center pl-10 py-2 shadow-md",children:[h.jsx("button",{className:"w-[30%] h-[60%] bg-red-400 font-medium border ",children:"Reschedule"}),h.jsxs("div",{className:"w-full h-full grid grid-cols-1 justify-items-center pt-2 gap-2 ",children:[h.jsx("button",{className:"w-[70%] h-full bg-green-400 font-medium ",children:"View Booking Details "}),h.jsx("span",{className:"w-[70%] h-full  text-center bg-blue-500 flex justify-center items-center text-white font-medium text-md",children:e.slot.patientId.firstName})]})]})]})}function xbe(e){const{timeIndex:t}=e,r=async()=>{await Tbe({bookingId:e.slot._id})&&e.onLoad()};return h.jsxs("div",{className:"w-full h-[15vh] p-4 bg-orange-400 bg-opacity-50 flex flex-row gap-2 border rounded-lg shadow-lg",children:[h.jsx("div",{className:"w-[20%] flex items-center justify-center border shadow-md",children:h.jsx("span",{className:"text-emerald-400 font-medium text-lg",children:e.time})}),h.jsx("div",{className:"flex flex-1 flex-row items-center pl-10 border shadow-md",children:h.jsx("button",{className:"w-[30%] h-[60%] bg-red-400 font-medium border ",id:`id_btnRemoveSlot_${t}`,onClick:r,children:"Remove"})})]})}function Bq(e){var t;return h.jsxs("div",{className:"w-auto h-[25vh] flex flex-row gap-1 hover:bg-blue-400 hover:bg-opacity-40 border shadow-xl p-2 rounded-lg",children:[h.jsx("div",{className:"w-[30%] h-full flex gap-4 ",children:h.jsx("img",{src:e.doctor.profileImage,className:"w-full h-full rounded-md"})}),h.jsxs("div",{className:"details w-full h-full pl-2 pt-5 flex flex-row  gap-4 ",children:[h.jsxs("div",{className:"w-[50%] h-full pl-10 pt-1 flex flex-col  gap-4",children:[h.jsx("div",{className:" w-auto",children:h.jsx("span",{className:"text-sm font-medium opacity-40",children:(t=e==null?void 0:e.doctor)==null?void 0:t.specialization})}),h.jsx("span",{className:"text-xl font-medium",children:`Dr. ${e.doctor.userId.username}`}),h.jsx("span",{className:"font-sm opacity-60",children:"16 years of experience"})]}),h.jsxs("div",{className:"w-[50%] h-full pb-8 flex flex-col gap-10 justify-end pr-5",children:[h.jsxs("span",{className:"text-lg font-bold opacity-80 flex justify-end items-center gap-2",children:[h.jsx("span",{className:"font-medium",children:"consultation fee"}),h.jsx(im,{}),h.jsx("span",{children:e.doctor.bookingPrice})]}),h.jsx("button",{className:"w-full h-[5vh] font-medium border rounded-[5%] bg-orange-500 p-2 hover:bg-opacity-50",children:"Book Consult"})]})]})]})}const qP="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const Abe=async()=>{try{const e=await Ee.get(`${qP}/patient/doctors/allDoctors`);return console.log(e.data),e.data.doctors}catch(e){return console.log(e),e.response.status=="401"&&re.fire({html:`<b>${e.response.status.message}</b>`,title:"Session Out"}),!1}},vU=async({slotDate:e,doctorId:t})=>{try{const r=await Ee.post(`${qP}/patient/doctors/freeSlots`,{slotDate:e,doctorId:t});return console.log(r.data),r.data.slots}catch(r){return console.log(r),!1}},$q=async({doctorId:e})=>{try{const t=await Ee.post(`${qP}/patient/doctors/doctorDetails`,{doctorId:e});return console.log(t.data),t.data.doctor}catch(t){return console.log(t),!1}};function Nbe(){const e=qr(),[t,r]=T.useState([]),n=async()=>{const i=await Abe();await r(i)};return T.useEffect(()=>{n()},[]),h.jsx("div",{className:"w-full h-screen flex flex-col",children:h.jsxs("div",{className:"w-full h-full flex flex-row gap-10 pl-10",children:[h.jsx("div",{className:"w-[60%] h-full flex flex-1 flex-col flex-1 gap-10",children:t&&t.length>0&&t.map((i,o)=>h.jsx("div",{className:"w-auto h-auto cursor-pointer ",id:`id_doctor_${o}`,onClick:()=>e(`/patient/doctors/${i._id}`),children:h.jsx(Bq,{doctor:i})},o))}),h.jsx("div",{className:"w-[40%] h-full flex ",children:h.jsx(Fi,{})})]})})}at.extend(js);const Obe=at(),Hq=[];for(var UC=0;UC<=5;UC++)Hq.push(Obe.add(UC,"day").format("D MMM, dddd YYYY").toString());function Dy(e){return Rn({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M960 95.888l-256.224.001V32.113c0-17.68-14.32-32-32-32s-32 14.32-32 32v63.76h-256v-63.76c0-17.68-14.32-32-32-32s-32 14.32-32 32v63.76H64c-35.344 0-64 28.656-64 64v800c0 35.343 28.656 64 64 64h896c35.344 0 64-28.657 64-64v-800c0-35.329-28.656-63.985-64-63.985zm0 863.985H64v-800h255.776v32.24c0 17.679 14.32 32 32 32s32-14.321 32-32v-32.224h256v32.24c0 17.68 14.32 32 32 32s32-14.32 32-32v-32.24H960v799.984zM736 511.888h64c17.664 0 32-14.336 32-32v-64c0-17.664-14.336-32-32-32h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32zm0 255.984h64c17.664 0 32-14.32 32-32v-64c0-17.664-14.336-32-32-32h-64c-17.664 0-32 14.336-32 32v64c0 17.696 14.336 32 32 32zm-192-128h-64c-17.664 0-32 14.336-32 32v64c0 17.68 14.336 32 32 32h64c17.664 0 32-14.32 32-32v-64c0-17.648-14.336-32-32-32zm0-255.984h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32h64c17.664 0 32-14.336 32-32v-64c0-17.68-14.336-32-32-32zm-256 0h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32h64c17.664 0 32-14.336 32-32v-64c0-17.68-14.336-32-32-32zm0 255.984h-64c-17.664 0-32 14.336-32 32v64c0 17.68 14.336 32 32 32h64c17.664 0 32-14.32 32-32v-64c0-17.648-14.336-32-32-32z"},child:[]}]})(e)}function kbe(e){return Rn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M8 13C7.44772 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11C8.55228 11 9 11.4477 9 12C9 12.5523 8.55228 13 8 13Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M8 17C7.44772 17 7 16.5523 7 16C7 15.4477 7.44772 15 8 15C8.55228 15 9 15.4477 9 16C9 16.5523 8.55228 17 8 17Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M11 16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M16 17C15.4477 17 15 16.5523 15 16C15 15.4477 15.4477 15 16 15C16.5523 15 17 15.4477 17 16C17 16.5523 16.5523 17 16 17Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M11 12C11 12.5523 11.4477 13 12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M16 13C15.4477 13 15 12.5523 15 12C15 11.4477 15.4477 11 16 11C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9H16C16.5523 9 17 8.55228 17 8C17 7.44772 16.5523 7 16 7H8Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M6 3C4.34315 3 3 4.34315 3 6V18C3 19.6569 4.34315 21 6 21H18C19.6569 21 21 19.6569 21 18V6C21 4.34315 19.6569 3 18 3H6ZM18 5H6C5.44772 5 5 5.44772 5 6V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V6C19 5.44772 18.5523 5 18 5Z",fill:"currentColor"},child:[]}]})(e)}const Wq="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const YP=async({amount:e})=>{try{return(await Ee.post(`${Wq}/patient/doctors/slots/payment/createOrder`,{amount:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.order}catch(t){return console.log(t),(t.response.status="401")?re.fire({icon:"error",text:"Login for booking"}):(t.response.status=invalidToken)&&re.fire({icon:"error",text:"Login for booking"}),!1}},Pbe=async({razorpay_payment_id:e,razorpay_order_id:t,razorpay_signature:r,order:n,doctorId:i,slotDetails:o})=>{try{const a=sessionStorage.getItem("token"),s=await Ee.post(`${Wq}/patient/doctors/slots/payment/paymentVerification`,{razorpay_payment_id:e,razorpay_order_id:t,razorpay_signature:r,order:n,doctorId:i,slotDetails:o},{headers:{Authorization:`bearer ${a}`}});return!0}catch(a){return console.log(a),(a.response.status="401")?re.fire({icon:"error",text:"Login for booking"}):(a.response.status=invalidToken)?re.fire({icon:"error",text:"Login Again"}):(a.response.status="500")&&re.fire({icon:"error",text:"Server issue please try later"}),!1}},Dbe=ui().shape({amount:kt().matches(/^[1-9][0-9]{0,5}(\.[0-9]{1,2})?$/,"Invalid amount")}),bh="https://hcompanion.onrender.com/api",Lbe=sessionStorage.getItem("token"),Mbe=async()=>{try{return(await Ee.get(`${bh}/patient/tests/getAllTestAvailable`)).data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"?re.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorTestPresent&&re.fire({icon:"warning",text:"Test can't be found at database"}),!1}},jbe=async({testId:e})=>{try{const t=await Ee.post(`${bh}/patient/tests/testDetails`,{testId:e});return console.log(t.data),t.data.testAndLabs}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&re.fire({icon:"warning",text:"Test can't be found at database"}),!1}},Ube=async()=>{try{const e=await Ee.get(`${bh}/patient/doctor/test/requests`,{headers:{Authorization:`bearer ${Lbe}`}});return console.log(e.data),e.data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"?re.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorNoPatient&&re.fire({icon:"warning",text:"Patient Can't be found"}),!1}},Fbe=async({razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,order:n,labId:i,testOrderId:o})=>{try{const a=await Ee.post(`${bh}/patient/doctor/test/requests/order`,{razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,order:n,labId:i,testOrderId:o},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return!0}catch(a){return console.log(a),a.status=="500"&&a.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):a.status=="400"&&a.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):a.status=="401"?re.fire({icon:"warning",text:"Log In"}):a.status=="404"&&a.response.data.errorNoPatient&&re.fire({icon:"warning",text:"Patient Can't be found"}),!1}},Vbe=async()=>{try{const e=await Ee.get(`${bh}/patient/doctor/test/requests/ordered`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("ordered tests",e.data.orders),e.data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"?re.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorNoPatient&&re.fire({icon:"warning",text:"Patient Can't be found"}),!1}},Bbe=async({testOrderId:e})=>{try{const t=await Ee.post(`${bh}/patient/doctor/test/requests/complete/result`,{testOrderId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.result}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&re.fire({icon:"warning",text:"Test can't be found at database"}),!1}},$be=async({testOrderId:e})=>{try{return(await Ee.post(`${bh}/patient/doctor/test/requests/completed/orderDetails`,{testOrderId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.order}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},XP=void 0,Hbe=(e,t)=>{const{order:r,patient:n,user:i,doctor:o}=e;return{key:XP,amount:e.amount*1e3,currency:"INR",name:"Health Companion",description:"Book Patient",image:"/logo.png",order_id:e.order.id,handler:async function(a){console.log("enterd payment handler"),await Pbe({razorpay_order_id:a.razorpay_order_id,razorpay_payment_id:a.razorpay_payment_id,razorpay_signature:a.razorpay_signature,doctorId:o._id,order:r,slotDetails:t})?re.fire({icon:"success",text:"The slot has been booked"}):re.fire({icon:"error",text:"The slot has been booked"})},prefill:{name:e.patient.firstName,email:e.user.email,contact:e.user.phone||"7902249173","card[number]":"4111 1111 1111 1111","card[expiry]":"12/30","card[cvv]":"123"},notes:{address:"Health Companion Office"},theme:{color:"#3399cc"}}},Wbe=(e,t)=>{var i,o,a,s;const{order:r,medicineOrder:n}=e;return{key:XP,amount:e.amount*1e3,currency:"INR",name:"Health Companion",description:"Book Medicine",image:"/logo.png",order_id:e.order.id,handler:async function(c){await nbe({razorpay_order_id:c.razorpay_order_id,razorpay_payment_id:c.razorpay_payment_id,razorpay_signature:c.razorpay_signature,doctorId:n.pharmacyInventoryId.la,order:r,pharmacyId:n.pharmacyInventoryId.pharmacyId._id,pharmacyInventoryId:n.pharmacyInventoryId._id})&&re.fire("Medicine has been ordere","","success")},prefill:{name:n.patientId.firstName,email:(o=(i=n==null?void 0:n.patientId)==null?void 0:i.userId)==null?void 0:o.email,contact:(s=(a=n==null?void 0:n.patientId)==null?void 0:a.userId)==null?void 0:s.phone},notes:{address:"Health Companion Office"},theme:{color:"#3399cc"}}},Gbe=(e,t)=>{var i,o,a,s;const{order:r,testOrder:n}=e;return{key:XP,amount:e.amount*1e3,currency:"INR",name:"Health Companion",description:"Book Test",image:"/logo.png",order_id:e.order.id,handler:async function(c){await Fbe({razorpay_order_id:c.razorpay_order_id,razorpay_payment_id:c.razorpay_payment_id,razorpay_signature:c.razorpay_signature,labId:n.labTestId.labId._id,order:r,testOrderId:n._id})&&re.fire("Test has been ordered","","success")},prefill:{name:n.patientId.firstName,email:(o=(i=n==null?void 0:n.patientId)==null?void 0:i.userId)==null?void 0:o.email,contact:(s=(a=n==null?void 0:n.patientId)==null?void 0:a.userId)==null?void 0:s.phone},notes:{address:"Health Companion Office"},theme:{color:"#3399cc"}}};at.extend(js);function zbe(){const[e,t]=T.useState(at().format("D MMM, dddd YYYY").toString()),[r,n]=T.useState(void 0),[i,o]=T.useState(void 0),[a,s]=T.useState([]),[c,l]=T.useState(void 0),[d,u]=T.useState(!1),{doctorId:p}=Hf();Ti(y=>y.patient),vh();const f=async()=>{const y=await $q({doctorId:p});await l(y);const v=at().format("D MMM, dddd YYYY").toString();t(v);const E=await vU({slotDate:v,doctorId:p});s(E)};T.useEffect(()=>{f()},[p]);const m=async y=>{const v=JSON.parse(y.target.value);console.log(`slot ${JSON.stringify(v)}`),await o(v),await n(at(v.startTime,"H:mm A").format("h:mm A").toString()),await u(!d)},g=async y=>{y=at(y,"D ,ddd").format("D MMM, dddd YYYY").toString(),t(y);const v=await vU({slotDate:y,doctorId:p});s(v)};return h.jsxs("div",{className:"w-full h-full",children:[d&&h.jsx(Kbe,{openModal:d,setOpenModal:u,time:r,slotDate:e,selectedSlot:i,doctor:c,slotTime:r}),h.jsxs("div",{className:"w-full h-full flex flex-col gap-2 pt-5 overflow-y-scroll pr-2 ",children:[h.jsxs("div",{className:"w-full h-auto px-8 bg-black bg-opacity-20 flex flex-col gap-4 border py-5 rounded-tl-xl shadow-xl",children:[h.jsxs("div",{className:"date w-full h-[10vh] bg-blue-500 rounded-md  flex gap-6 items-center",children:[h.jsx(Dy,{className:"h-full w-[6vh]  p-2"}),h.jsx("h2",{className:"text-white font-medium ",children:"Dates"}),h.jsxs("div",{className:"flex flex-1 gap-5 justify-end w-full h-full items-center pr-5",children:[h.jsx("span",{className:"text-white text-md font-medium",children:c&&c.userId.username}),h.jsx("img",{src:c&&c.profileImage,alt:"profile",className:"w-[3vw] h-[7vh] rounded-full"})]})]}),h.jsx("div",{className:"w-full h-auto flex ",children:h.jsx("div",{className:"w-full h-auto grid grid-cols-3 justify-items-center gap-4 p-1",children:Hq.map((y,v)=>h.jsx("button",{className:"w-[10vw] h-[8vh] font-medium text-white bg-slate-700 bg-opacity-70 border shadow-md rounded-lg p-6",id:`id_slotDate_${v}`,onClick:()=>g(y),children:at(y,"D MMM, dddd YYYY").format("DD ,ddd").toString()},v))})})]}),h.jsxs("div",{className:"w-full h-full bg-black bg-opacity-20 flex flex-col gap-10 mt-5 p-5 border shadow-lg rounded-lg",children:[h.jsxs("div",{className:"w-full h-[10vh] bg-orange-500 text-white flex items-center gap-4 justify-evenly  rounded-md pl-2",children:[h.jsx(Mq,{className:"w-[5vw] h-[5vh]"}),h.jsx("h2",{className:"text-lg font-medium",children:e&&e})]}),h.jsx("div",{className:"w-full h-full grid grid-cols-3 justify-items-center content-start",children:a&&a.length>0&&a.map((y,v)=>h.jsx("button",{value:JSON.stringify(y),className:"w-auto h-auto border p-6 rounded-lg bg-green-400 font-medium shadow-lg",id:`id_slotTime_${v}`,onClick:m,children:at(y.startTime,"H:mm A").format("h:mm A").toString()},v))})]})]})]})}function Kbe(e){const{setOpenModal:t,openModal:r,doctor:n,time:i,slotDate:o,selectedSlot:a}=e,s=Ti(d=>d.patient),c=Ti(d=>d.user),l=Mn({initialValues:{amount:500,patientdDescription:"",slotId:a._id},validationSchema:Dbe,onSubmit:async(d,u)=>{const p=await YP({amount:n.bookingPrice});if(await console.log("order",p),p){const f=await Hbe({order:p,patient:s,user:c,doctor:n},d);try{const m=new Razorpay(f);console.log("reached before razor pay"),await m.open()}catch(m){console.log("error during payment",m)}}t(!1)}});return T.useEffect(()=>{l.setFieldValue("slotId",a._id),l.setFieldValue("amount",n.bookingPrice)},[]),h.jsx("div",{children:h.jsxs(Lv,{show:r,onClose:()=>t(!1),children:[h.jsx(Lv.Header,{children:"Slot Details"}),h.jsxs(Lv.Body,{className:"h-auto flex flex-col gap-4",children:[h.jsx("div",{className:"w-full h-[15vh] flex justify-end pr-5",children:h.jsxs("div",{className:"flex gap-5 items-center",children:[h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx("span",{className:"text-lg font-medium",children:n&&n.userId.username}),h.jsx("span",{className:"text-sm font-medium opacity-50",children:"Cardiology"})]}),h.jsx("img",{src:n.profileImage,alt:"profile",className:"h-[9vh] w-[4vw] rounded-full"})]})}),h.jsxs("div",{className:"flex gap-4 h-auto items-center bg-blue-500 p-2 text-white",children:[h.jsx(kbe,{className:"h-full w-[3vw]"}),h.jsx("span",{className:"text-xl font-medium h-auto",children:e.slotDate})]}),h.jsxs("div",{className:"flex gap-4 h-auto items-center bg-orange-500 p-2 text-white",children:[h.jsx(Mq,{className:"h-full w-[3vw]"}),h.jsx("span",{className:"text-md font-medium h-auto",children:e.slotTime})]}),h.jsxs("div",{className:"h-[50vh]  w-full flex flex-col gap-2",children:[h.jsx("h2",{className:"font-medium opacity-40",children:"Description (Optional)"}),h.jsx("textarea",{name:"description",onChange:d=>{l.setFieldValue("patientDescription",d.target.value)},id:"id_description",placeholder:"Write down a short description on the purpose of the booking",className:"flex flex-1  "})]})]}),h.jsxs(Lv.Footer,{className:"gap-x-5 w-full flex flex-row",children:[h.jsx("button",{type:"submit",onClick:l.handleSubmit,className:"w-[40%] border rounded-[5%] bg-orange-500 p-2",id:"id_btnBookSlot",children:"Book"}),h.jsx("button",{type:"button",className:"w-[40%] border rounded-[5%] bg-red-500 p-2",onClick:()=>t(!1),children:"cancel"})]})]})})}sessionStorage.getItem("token");const Gq=async({diseaseName:e})=>{try{const t=await Ee.post("http://localhost:8000/predict",{"Medical Condition":e,"Blood Type":"O+",Gender:"Male"});return console.log(t.data),t.data.doctor}catch(t){console.log(t)}};function qbe(){T.useState();const[e,t]=T.useState(void 0);T.useState(void 0);const r=async(n,i)=>{const o=await Gq({diseaseName:i});console.log("doctor",o),window.location.reload()};return h.jsx("div",{className:"w-full h-screen pt-10 flex flex-col",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-6",children:[h.jsx("div",{className:"header w-full h-[10%] flex justify-start",children:h.jsx("span",{className:"text-2xl font-medium",children:"Treatment Suggestion "})}),h.jsxs("div",{className:"w-full h-[5vh] flex gap-5",children:[h.jsx("input",{type:"text",name:"disease",className:"w-[40%]",onChange:n=>t(n.target.value),placeholder:"type disease name"}),h.jsx("button",{className:"h-full w-[5vw] bg-orange-500 shadow-lg rounded-md",onClick:n=>r(n,e),children:"Search"})]}),h.jsx("div",{className:"w-full h-full flex border rounded-lg p-2",children:h.jsx("div",{className:"flex w-[50%] h-[50vh] bg-black bg-opacity-20",children:e&&h.jsx(Ybe,{diseaseName:e})})})]})})}function Ybe(e){const{diseaseName:t}=e,[r,n]=T.useState(void 0),i=async()=>{const o=await Gq({diseaseName:t}),a=await $q({doctorId:o});n(a)};return T.useEffect(()=>{i()},[]),T.useEffect(()=>{i()},[t]),h.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-2",children:[h.jsx("h2",{className:"w-full h-auto p-3 flex justify-center bg-blue-500 text-lg text-white",children:"Suggested Doctors"}),h.jsx("div",{className:"suggestions w-full h-auto mt-3",children:r&&h.jsx(Bq,{doctor:r})})]})}function Xbe(e){return Rn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M363 277h-86v86h-42v-86h-86v-42h86v-86h42v86h86v42z"},child:[]},{tag:"path",attr:{d:"M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422c-44.3 0-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256c0-44.3 17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}function Jbe(e){return Rn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M426.666 330.667a250.385 250.385 0 0 1-75.729-11.729c-7.469-2.136-16-1.073-21.332 5.333l-46.939 46.928c-60.802-30.928-109.864-80-140.802-140.803l46.939-46.927c5.332-5.333 7.462-13.864 5.332-21.333-8.537-24.531-12.802-50.136-12.802-76.803C181.333 73.604 171.734 64 160 64H85.333C73.599 64 64 73.604 64 85.333 64 285.864 226.136 448 426.666 448c11.73 0 21.334-9.604 21.334-21.333V352c0-11.729-9.604-21.333-21.334-21.333z"},child:[]}]})(e)}function Qbe(e){return Rn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M113.5 281.2v85.3L256 448l142.5-81.5v-85.3L256 362.7l-142.5-81.5zM256 64L32 192l224 128 183.3-104.7v147.4H480V192L256 64z"},child:[]}]})(e)}function Zbe(e){return Rn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 192v128h85.334L256 431.543V80.458L149.334 192H64z"},child:[]}]})(e)}function ewe(e){return Rn({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{strokeWidth:"2",d:"M15 19H2V1h16v4m0 0a5 5 0 110 10 5 5 0 010-10zm-3 9v8l3-2 3 2v-8M5 8h6m-6 3h5m-5 3h2M5 5h2"},child:[]}]})(e)}function twe(){return h.jsxs("div",{className:"w-full h-[10vh] px-2 text-center font-bold flex justify-center items-center gap-2 ",children:[h.jsxs(Sr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/doctor/profile/details",children:[h.jsx(PS,{className:"h-[3vh] w-[2vw]"}),h.jsx("span",{className:"flex flex-1",children:"Profile Details"})]}),h.jsxs(Sr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/doctor/profile/contact",children:[h.jsx(HP,{className:"h-[3vh] w-[2vw]"}),h.jsx("span",{className:"flex flex-1",children:"Contact Details"})]}),h.jsxs(Sr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/doctor/profile/resetPassword",children:[h.jsx(WP,{className:"h-[3vh] w-[2vw]"}),h.jsx("span",{className:"flex flex-1",children:"Password Reset"})]}),h.jsxs(Sr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"",children:[h.jsx(Qbe,{className:"h-[3vh] w-[2vw]"}),h.jsx("span",{className:"flex flex-1",children:"Educational Details"})]}),h.jsxs(Sr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"",children:[h.jsx(ewe,{className:"h-[3vh] w-[2vw]"}),h.jsx("span",{className:"flex flex-1",children:"Proof Documents"})]})]})}function rwe(){return h.jsxs("div",{className:"screen w-full h-full ",children:[h.jsx("div",{children:h.jsx(twe,{})}),h.jsx("div",{className:"content w-full h-full flex flex-1 flex-col",children:h.jsx(Fi,{})})]})}const LS="https://hcompanion.onrender.com/api",MS=sessionStorage.getItem("token"),nwe=async e=>{try{const t=await Ee.post(`${LS}/doctor/profile/updateDetails`,{updateDetails:e},{headers:{Authorization:`bearer ${MS}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},iwe=async()=>{try{return(await Ee.get(`${LS}/doctor/profile/viewDetails`,{headers:{Authorization:`bearer ${MS}`}})).data.doctorDetails}catch(e){return console.log(e),!1}},owe=async()=>{try{const e=await Ee.get(`${LS}/doctor/profile/getContactDetails`,{headers:{Authorization:`bearer ${MS}`}});return console.log(e.data),e.data.contactDetails}catch(e){return console.log(e),!1}},awe=async e=>{try{const t=await Ee.post(`${LS}/doctor/profile/updateContactDetails`,e,{headers:{Authorization:`bearer ${MS}`}});return console.log(t.data),re.fire({icon:"success",text:"Contact Details Have been Updated"}),t.data.contactDetails}catch(t){return console.log(t),!1}};function swe(){const[e,t]=T.useState(""),r=Mn({initialValues:{firstName:"",lastName:"",age:"",bloodGroup:"",height:"",weight:"",profileImage:""},validationSchema:ui().shape({}),onSubmit:async(o,a)=>{console.log("values",o),await nwe(o)&&(re.fire({icon:"success",text:"The profile has been updated"}),i())}}),n=o=>{const a=o.target.files[0],s=new FileReader;s.onload=c=>{t(c.target.result),r.setFieldValue("profileImage",a)},s.readAsDataURL(o.target.files[0])},i=async()=>{const o=await iwe();r.setFieldValue("firstName",o.firstName),r.setFieldValue("lastName",o.lastName),r.setFieldValue("age",o.age),r.setFieldValue("bloodGroup",o.bloodGroup),r.setFieldValue("height",o.height),r.setFieldValue("weight",o.weight),r.setFieldValue("profileImage",o.profileImage),t(o.profileImage)};return T.useEffect(()=>{i()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full flex flex-col items-center",children:h.jsxs("form",{className:"w-[50%] h-full flex flex-col gap-6 pt-10 ",children:[h.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[h.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),h.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:h.jsx("div",{className:"flex flex-col gap-1",children:h.jsx(Eh,{helperText:"Choose an Image",name:"profileImage",onChange:n})})})]}),h.jsx(Ue,{variant:"filled",label:"First Name",name:"firstName",value:r.values.firstName,onChange:r.handleChange}),h.jsx(Ue,{variant:"filled",label:"Last Name",name:"lastName",value:r.values.lastName,onChange:r.handleChange}),h.jsx(Ue,{variant:"filled",label:"Age",name:"age",value:r.values.age,onChange:r.handleChange}),h.jsx(Ue,{variant:"filled",label:"Blood Group",name:"bloodGroup",value:r.values.bloodGroup,onChange:r.handleChange}),h.jsx(Ue,{variant:"filled",label:"Height",name:"height",value:r.values.height,onChange:r.handleChange}),h.jsx(Ue,{variant:"filled",label:"Weight",name:"weight",value:r.values.weight,onChange:r.handleChange}),h.jsxs("button",{type:"button",onClick:r.handleSubmit,className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(_h,{}),"Save"]})]})})})}function cwe(){const e=Mn({initialValues:{place:"",state:"",district:"",country:"",pincode:"",houseName:"",phone:""},validationSchema:ui().shape({}),onSubmit:async(r,n)=>{await awe(r)&&t()}}),t=async()=>{const{phone:r,...n}=await owe();console.log("temp contact",n._doc),e.setFieldValue("place",n._doc.place),e.setFieldValue("state",n._doc.state),e.setFieldValue("district",n._doc.district),e.setFieldValue("country",n._doc.country),e.setFieldValue("pincode",n._doc.pincode?n._doc.pincode:""),e.setFieldValue("houseName",n._doc.houseName),e.setFieldValue("phone",r)};return T.useEffect(()=>{t()},[]),h.jsx("div",{className:"w-full h-full",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-4 items-center pt-10",children:[h.jsx("div",{className:"w-[70%] ",children:h.jsx("h1",{className:"text-lg font-medium",children:"Address"})}),h.jsxs("form",{className:"w-[70%]  grid grid-cols-2 gap-4",children:[h.jsx(Ue,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:e.values.houseName}),h.jsx(Ue,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),h.jsx(Ue,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),h.jsx(Ue,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),h.jsx(Ue,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),h.jsx(Ue,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]}),h.jsxs("form",{className:"w-[70%] flex flex-col pt-10",children:[h.jsx("div",{children:h.jsx("h1",{className:"text-lg font-medium",children:"Contact Details"})}),h.jsx("div",{className:"w-[30%] flex flex-col gap-4 mt-5 ",children:h.jsx(Ue,{variant:"filled",label:"Phone",className:"font-bold",name:"phone",onChange:e.handleChange,value:e.values.phone})})]}),h.jsxs("button",{type:"button",onClick:e.handleSubmit,className:"w-[70%] text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(_h,{}),"Save"]})]})})}function lwe(){return h.jsx("div",{className:"w-full h-screen flex pt-[15vh] justify-center",children:h.jsxs("div",{className:"resetPassword w-[40%] h-fit flex flex-col gap-6 border shadow-lg p-5 ",children:[h.jsx("h1",{className:"text-lg font-medium",children:"Reset Password"}),h.jsx(Uq,{})]})})}function dwe(){const{username:e}=Ti(t=>t.user);return h.jsxs("div",{className:"w-full h-full flex flex-col",children:[h.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:h.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:h.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white p-10",children:[h.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome"}),h.jsx("span",{className:"text-[10vh] font-bold",children:e}),h.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Pharmacy offers you the best Management of the Medicines"})]})})}),h.jsx("div",{className:"stock w-full h-auto mt-5",children:h.jsx("div",{className:"w-full h-[100vh] flex gap-10",children:h.jsx("div",{className:"w-full h-auto flex justify-center",children:h.jsx("img",{src:"/normalUser.png",className:"rounded-full object-fit h-[20vh] w-[10vw]"})})})})]})}const Ly="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const uwe=async()=>{try{const e=await Ee.get(`${Ly}/laboratory/profile/getDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("lab details",e.data),e.data.laboratoryDetails}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Your session is out.....please Log In"}):e.status=="401"&&re.fire({icon:"warning",text:"Log In"}),!1}},hwe=async e=>{try{const t=await Ee.post(`${Ly}/laboratory/profile/updateDetails`,{updateDetails:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},pwe=async()=>{try{const e=await Ee.get(`${Ly}/laboratory/profile/getProfileDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("profile details",e.data),e.data.details}catch(e){return console.log(e),!1}},fwe=async()=>{try{return(await Ee.get(`${Ly}/laboratory/profile/getContactDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.contactDetails}catch(e){return console.log(e),!1}},mwe=async e=>{try{const t=await Ee.post(`${Ly}/laboratory/profile/updateContactDetails`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return re.fire({icon:"success",text:"Contact Details Have been Updated"}),!0}catch(t){return console.log(t),!1}},gwe={laboratoryName:"",ownerName:"",profileImage:""},zq=Jf({name:"laboratory",initialState:gwe,reducers:{setLaboratory(e,t){e.laboratoryName=t.payload.laboratoryName,e.ownerName=t.payload.ownerName,e.profileImage=t.payload.profileImage}}}),{setLaboratory:ywe}=zq.actions,vwe=zq.reducer;function Ewe(){const e=vh(),t=qr(),{username:r,email:n}=Ti(c=>c.user),{laboratoryName:i,ownerName:o,profileImage:a}=Ti(c=>c.laboratory),s=async()=>{const c=await uwe();c&&(e(po({username:c.userId.username,email:c.userId.email,phone:c.userId.phone,role:c.userId.role,isLoggedIn:!0})),e(ywe({laboratoryName:c.laboratoryName,ownerName:c.ownerName,profileImage:c.profileImage})))};return T.useEffect(()=>{s()},[]),h.jsx("div",{className:"navbarParent h-full w-full ",children:h.jsxs("div",{className:"navbar w-full h-full flex flex-col rounded-tr-[3%] bg-pink-600 bg-opacity-90 p-4 gap-10 ",children:[h.jsxs("div",{className:"w-full h-[8vh] flex justify-start items-center gap-4 ",children:[h.jsx("img",{src:"/icons/arrowBack.png",alt:"",className:"h-[5vh] w-[] p-2 ml-2 bg-white  rounded-lg"}),h.jsx("h2",{className:"text-white text-sm",children:"Minimize"}),h.jsx("div",{className:"flex-1 h-full flex justify-end items-center",children:h.jsx("img",{src:"/logo.png",alt:"",className:"w-[7vw] h-[7vh] bg-white mr-4"})})]}),h.jsxs("div",{className:"profile h-[12%] flex flex-row justify-start gap-4",children:[h.jsx("div",{className:"profileImage w-auto h-full flex ",children:h.jsx("img",{src:a,alt:"image",className:"h-full w-[5vw] rounded-full "})}),h.jsxs("div",{className:"details flex-1 flex flex-col justify-center bg-white bg-opacity-30 p-2 rounded-lg gap-2 ",children:[h.jsx("span",{children:h.jsx("h2",{className:"text-white text-lg font-bold",children:i||r})}),h.jsx("span",{children:h.jsx("h2",{className:"text-white text-sm",children:"Laboratory"})})]})]}),h.jsx("div",{className:"search w-full h-[5%]",children:h.jsx(Ue,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),h.jsxs("div",{className:"home w-full text-white h-[80%] flex flex-col gap-4 border-slate-50",children:[h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[h.jsx("img",{src:"/icons/laboratory_homeIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full cursor-pointer",onClick:()=>{t("")},children:"Home"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[h.jsx("img",{src:"/icons/laboratory_serviceIcon.jpg",alt:"laboratory services",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full cursor-pointer",onClick:()=>{t("/laboratory/testServices")},children:"Laboratory test Services"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[h.jsx("img",{src:"/icons/laboratory_testOrderIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{t("/laboratory/order")},children:"Test Orders"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[h.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{t("/laboratory/profile")},children:"Profile"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[h.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),e(po({})),t("/")},children:"sign out"})]})]})]})})}function _we(){return h.jsxs("div",{className:"w-screen h-screen flex fex-col",children:[h.jsx("div",{className:"fixed header w-[21%] h-[100vh] ",children:h.jsx(Ewe,{})}),h.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4 overflow-y-auto",children:h.jsx(Fi,{})})]})}function bwe(){return h.jsxs("div",{className:"w-full h-auto p-5 flex flex-row gap-5 justify-start ",children:[h.jsxs(Sr,{className:"w-auto h-auto p-3 flex flex-row gap-5 items-center border rounded-lg shadow-lg shadow-emerald-200",to:"/laboratory/testServices/addTest",children:[h.jsx(Xbe,{className:"w-[2vw] h-[4vh]"}),h.jsx("span",{className:"font-medium",children:"New Test"})]}),h.jsxs(Sr,{className:"w-auto h-auto p-3 flex flex-row gap-5 items-center border rounded-lg shadow-lg shadow-emerald-200",to:"/laboratory/testServices/viewTests",children:[h.jsx(Y_e,{className:"w-[2vw] h-[4vh]"}),h.jsx("span",{className:"font-medium",children:"View Test Service"})]})]})}function wwe(){return h.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[h.jsx("div",{className:"w-full h-[10vh]",children:h.jsx(bwe,{})}),h.jsx("div",{className:"content w-full h-full flex flex-col overflow-y-auto ",children:h.jsx(Fi,{})})]})}const ns="https://hcompanion.onrender.com/api",is=sessionStorage.getItem("token"),Swe=async({testName:e,testId:t,atLab:r,atHome:n,priceHome:i,priceLab:o})=>{try{const a=await Ee.post(`${ns}/laboratory/test/addTest`,{testId:t,priceHome:i,priceLab:o,atHome:n,atLab:r},{headers:{Authorization:`bearer ${is}`}});return!0}catch(a){return console.log(a),a.status=="500"&&a.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):a.status=="400"&&a.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):a.status=="400"&&a.response.data.errorTestPresent?re.fire({icon:"warning",text:"Test Already Present"}):a.status=="401"&&re.fire({icon:"warning",text:"Log In"}),!1}},Twe=async()=>{try{return(await Ee.get(`${ns}/laboratory/test/getTestsPresent`,{headers:{Authorization:`bearer ${is}`}})).data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"&&re.fire({icon:"warning",text:"Log In"}),!1}},Cwe=async()=>{try{return(await Ee.get(`${ns}/laboratory/test/getAddedTests`,{headers:{Authorization:`bearer ${is}`}})).data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"&&re.fire({icon:"warning",text:"Log In"}),!1}},Rwe=async({testName:e,testId:t})=>{try{const r=await Ee.post(`${ns}/laboratory/test/getAddedTestDetails`,{testName:e,testId:t},{headers:{Authorization:`bearer ${is}`}});return console.log(r.data),r.data.test}catch(r){return console.log(r),r.status=="500"&&r.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):r.status=="400"&&r.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):r.status=="401"?re.fire({icon:"warning",text:"Log In"}):r.status=="404"&&r.response.data.errorTestPresent&&re.fire({icon:"warning",text:"Test can't be found at database"}),!1}},Iwe=async({testName:e,testId:t,atHome:r,atLab:n,priceHome:i,priceLab:o})=>{try{const a=await Ee.post(`${ns}/laboratory/test/updateAddedTestDetails`,{testName:e,testId:t,atHome:r,atLab:n,priceHome:i,priceLab:o},{headers:{Authorization:`bearer ${is}`}});return console.log(a.data),!0}catch(a){return console.log(a),a.status=="500"&&a.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):a.status=="400"&&a.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):a.status=="401"?re.fire({icon:"warning",text:"Log In"}):a.status=="400"&&a.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},xwe=async({testName:e,testId:t})=>{try{const r=await Ee.post(`${ns}/laboratory/test/deletedAddedTest`,{testName:e,testId:t},{headers:{Authorization:`bearer ${is}`}});return console.log(r.data),!0}catch(r){return console.log(r),r.status=="500"&&r.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):r.status=="400"&&r.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):r.status=="401"?re.fire({icon:"warning",text:"Log In"}):r.status=="400"&&r.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},Awe=async()=>{try{return(await Ee.get(`${ns}/laboratory/order/test/getOrderedTests`,{headers:{Authorization:`bearer ${is}`}})).data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"?re.fire({icon:"warning",text:"Log In"}):e.status=="400"&&e.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},Nwe=async({testOrderId:e})=>{try{const t=await Ee.post(`${ns}/laboratory/order/test/completeOrderedTest`,{testOrderId:e},{headers:{Authorization:`bearer ${is}`}});return!0}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},Owe=async()=>{try{return(await Ee.get(`${ns}/laboratory/order/test/getCompletedOrderedTest`,{headers:{Authorization:`bearer ${is}`}})).data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):e.status=="401"?re.fire({icon:"warning",text:"Log In"}):e.status=="400"&&e.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},kwe=async({testOrderId:e})=>{try{return(await Ee.post(`${ns}/laboratory/order/test/completed/testDetails`,{testOrderId:e},{headers:{Authorization:`bearer ${is}`}})).data.order}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},Pwe=async({testOrderId:e,testResultDescription:t,patientId:r,doctorId:n})=>{try{const i=await Ee.post(`${ns}/laboratory/order/test/uploadResult`,{testOrderId:e,testResultDescription:t,patientId:r,doctorId:n},{headers:{Authorization:`bearer ${is}`}});return!0}catch(i){return console.log(i),i.status=="500"&&i.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):i.status=="400"&&i.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):i.status=="401"?re.fire({icon:"warning",text:"Log In"}):i.status=="400"&&i.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},Kq=async({testOrderId:e})=>{try{return(await Ee.post(`${ns}/laboratory/order/test/result/getDetails`,{testOrderId:e},{headers:{Authorization:`bearer ${is}`}})).data.result}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&re.fire({icon:"error",text:"Issue at the Database"}),!1}},qq=ui().shape({testId:kt().required("choose right category"),atHome:vA().required(),atLab:vA().required(),priceHome:kt().when("atHome",{is:!0,then:()=>kt().required().matches(/^(0|[1-9]\d*)(\.\d{1,2})?$/,"Not a number"),otherwise:()=>kt()}),priceLab:kt().when("atLab",{is:!0,then:()=>kt().required().matches(/^(0|[1-9]\d*)(\.\d{1,2})?$/,"Not a number"),otherwise:()=>kt()})}).test("atHome-or-atlab","Should choose any of them",e=>(console.log("jjjj",e),e?e.atHome||e.atLab:!1)),Dwe=ui().shape({testResultDescription:kt().required("Shouldn't be left empty")});function Lwe(){const[e,t]=T.useState({}),[r,n]=T.useState([]),[i,o]=T.useState(void 0),a=Mn({initialValues:{testId:"",priceHome:"",priceLab:"",atHome:!1,atLab:!1},validationSchema:qq,onSubmit:async(d,u)=>{await Swe(d)&&re.fire({icon:"success",text:"Test Service has been added"})}}),s=async d=>{const u=r==null?void 0:r.find(p=>p.testName==d.target.value);o(u),u?await a.setFieldValue("testId",u._id):await a.setFieldValue("testId",""),a.setFieldTouched("testId",!0)},c=async d=>{await t({...e,[d.target.name]:!e[d.target.name]}),d.target.name=="home"?(await a.setFieldValue("atHome",!a.values.atHome),a.setFieldTouched("atHome",!0)):d.target.name=="lab"&&(await a.setFieldValue("atLab",!a.values.atLab),a.setFieldTouched("atLab",!0))},l=async()=>{const d=await Twe();await n(d)};return T.useEffect(()=>{l()},[]),T.useEffect(()=>{const d=[];Object.keys(e).forEach(u=>{e[u]&&d.push(u)}),a.setFieldValue("testType",d)},[e]),console.log("values",a.values),console.log("errors",a.errors),h.jsx("div",{className:"w-full h-full flex flex-col items-center ",children:h.jsxs("form",{onSubmit:a.handleSubmit,className:"w-[80%] h-full flex flex-col gap-5 pt-20 px-5",children:[h.jsx("h1",{className:"font-bold text-emerald-400 text-2xl",children:"Test"}),h.jsxs("div",{className:"w-full h-auto flex flex-row gap-5 ",children:[h.jsxs("div",{className:"w-[60%] h-full flex flex-col gap-5",children:[h.jsx(Ue,{list:"tests",name:"testName",variant:"filled",label:"Test Type",onChange:s,onBlur:d=>a.setFieldTouched("testId",!0),...a.touched.testId&&(a.errors.testId?{color:"error",helperText:`${a.errors.testId}`}:{color:"success"})}),h.jsx("div",{children:h.jsx("datalist",{id:"tests",children:r&&r.map((d,u)=>h.jsx("option",{value:d.testName},u))})}),h.jsx("textarea",{label:" Test Description",rows:"10",value:i&&i.testDescription,placeholder:"Test Description"}),h.jsxs("div",{className:"options w-full h-auto flex flex-col gap-10 ",children:[h.jsx("h1",{className:"text-md font-medium",children:"Test Service Options"}),h.jsxs("div",{className:"flex flex-1 gap-10 w-full",children:[h.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("input",{type:"checkbox",id:"id_chkhome",name:"home",value:"home",onChange:c,checked:a.va}),h.jsx("span",{children:"Home"})]}),e.home&&h.jsx(Ue,{variant:"filled",label:"Price at Home",name:"priceHome",onChange:a.handleChange,onBlur:a.handleBlur,...a.touched.priceHome&&(a.errors.priceHome?{color:"error",helperText:`${a.errors.priceHome}`}:{color:"success"})})]}),h.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("input",{type:"checkbox",id:"id_lab",name:"lab",value:"lab",onChange:c}),h.jsx("span",{children:"Lab"})]}),e.lab&&h.jsx(Ue,{variant:"filled",label:"Price at Lab",name:"priceLab",onChange:a.handleChange,onBlur:a.handleBlur,...a.touched.priceLab&&(a.errors.priceLab?{color:"error",helperText:`${a.errors.priceLab}`}:{color:"success"})})]})]})]}),h.jsx("button",{type:"submit",className:"w-[full] h-[5vh] border rounded-[5%] bg-orange-500 p-2 mb-5",children:"Add Test"})]}),h.jsx("div",{className:"w-[30%] h-[40vh] flex flex-col",children:h.jsx("img",{src:i&&i.testImage,className:"h-full w-full object-fit",alt:"testImage"})})]})]})})}function Mwe(){return h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full",children:h.jsx(jwe,{})})})}function jwe(e){const t=qr(),[r,n]=T.useState(),i=["Test Name","image","on Home","on Clinic","Edit","Delete"],o=async()=>{const s=await Cwe();n(s)};T.useEffect(()=>{o()},[]);const a=async(s,c)=>{re.fire({showCancelButton:!0,title:"Do you want to delete",text:"please click yes to proceed",confirmButtonText:"Delete"}).then(async l=>{l.isConfirmed&&await xwe({testId:c==null?void 0:c.testId})&&(re.fire("Deleted","","success"),o())})};return h.jsx("div",{className:"w-auto h-auto px-10 py-5",children:h.jsxs(ur,{hoverable:!0,children:[h.jsx(ur.Head,{children:i.map((s,c)=>h.jsx(ur.HeadCell,{children:s},c))}),h.jsx(ur.Body,{className:"font-bold text-black",children:r&&r.map((s,c)=>h.jsxs(ur.Row,{className:"border border-b-black",children:[h.jsx(ur.Cell,{children:s.testId.testName}),h.jsx(ur.Cell,{children:h.jsx("img",{src:s.testId.testImage,className:"w-[3vw] h-[4vh] object-fit"})}),h.jsx(ur.Cell,{children:s.atHome?s.priceHome:"not available"}),h.jsx(ur.Cell,{children:s.atLab?s.priceLab:"not available"}),h.jsx(ur.Cell,{className:"cursor-pointer",children:h.jsx(jq,{onClick:()=>t(`/laboratory/testServices/editTestDetails/?testName=${s.testId.testName}&testId=${s.testId._id}`)})}),h.jsx(ur.Cell,{className:"cursor-pointer",children:h.jsx(q_e,{onClick:l=>a(l,s)})})]},c))})]})})}function Uwe(){var l,d,u;const[e,t]=TH(),[r,n]=T.useState(void 0),[i,o]=T.useState({}),a=Mn({initialValues:{testId:e.get("testId"),priceHome:"",priceLab:"",atHome:!1,atLab:!1},validationSchema:qq,onSubmit:async(p,f)=>{await Iwe({...p,testName:e.get("testId")})&&(re.fire({icon:"success",text:"Test Service has been updated"}),await c())}}),s=async p=>{await o({...i,[p.target.name]:!i[p.target.name]}),p.target.name=="home"?(await a.setFieldValue("atHome",!a.values.atHome),a.setFieldTouched("atHome",!0)):p.target.name=="lab"&&(await a.setFieldValue("atLab",!a.values.atLab),a.setFieldTouched("atLab",!0))},c=async()=>{const p=await Rwe({testName:e.get("testName"),testId:e.get("testId")});n(p),a.setFieldValue("atHome",p.atHome),a.setFieldValue("atLab",p.atLab),a.setFieldValue("priceHome",p.priceHome),a.setFieldValue("priceLab",p.priceLab)};return T.useEffect(()=>{c()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsxs("form",{onSubmit:a.handleSubmit,className:"w-full h-full flex  gap-4 px-6 py-20 justify-center",children:[h.jsxs("div",{className:"detail w-[60%] h-auto flex flex-col gap-6 shadow-lg shadow-pink-500 p-4",children:[h.jsx("h1",{className:"w-full font-medium text-2xl text-emerald-400 flex justify-center ",children:"Update Test"}),h.jsx(Ue,{variant:"filled",label:"Test Name",value:(l=r==null?void 0:r.testId)==null?void 0:l.testName}),h.jsx("textarea",{variant:"filled",rows:"20",label:"Test Description",value:(d=r==null?void 0:r.testId)==null?void 0:d.testDescription}),h.jsxs("div",{className:"w-full h-auto flex gap-2",children:[h.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("input",{type:"checkbox",id:"id_chkhome",name:"home",value:"home",onChange:s,checked:a.values.atHome}),h.jsx("span",{children:"Home"})]}),a.values.atHome&&h.jsx(Ue,{variant:"filled",label:"Price at Home",name:"priceHome",value:a.values.priceHome,onChange:a.handleChange,onBlur:a.handleBlur,...a.touched.priceHome&&(a.errors.priceHome?{color:"error",helperText:a.errors.priceHome}:{color:"success"})})]}),h.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("input",{type:"checkbox",id:"id_lab",name:"lab",value:"lab",onChange:s,checked:a.values.atLab}),h.jsx("span",{children:"Lab"})]}),a.values.atLab&&h.jsx(Ue,{variant:"filled",label:"Price at Lab",name:"priceLab",value:a.values.priceLab,onChange:a.handleChange,onBlur:a.handleBlur,...a.touched.priceLab&&(a.errors.priceLab?{color:"error",helperText:a.errors.priceLab}:{color:"success"})})]})]}),h.jsxs("button",{type:"submit",className:"w-[full] h-[5vh] border rounded-[5%] bg-orange-500 p-2 mb-5 flex gap-2 items-center justify-center",children:[h.jsx(jq,{}),"Update Test"]})]}),h.jsx("div",{className:"testImage flex  w-[20vw] h-full pt-20",children:h.jsx("img",{src:(u=r==null?void 0:r.testId)==null?void 0:u.testImage,alt:"test image",className:"mt-5 object-fit h-[40vh] w-[20vw]"})})]})})}function Fwe(e){const{test:t}=e;return h.jsx("div",{className:"flex w-auto h-auto border rounded-lg shadow-lg shadow-emerald-300 hover:bg-black hover:bg-opacity-10 py-5 px-3 cursor-pointer   ",children:h.jsxs("div",{className:"w-[30vw] h-auto flex flex-row gap-5 ",children:[h.jsx("div",{className:"image w-[50%] h-full flex justify-center items-center",children:h.jsx("img",{src:t==null?void 0:t.testImage,alt:"testImage",className:"object-cover w-full h-[70%]"})}),h.jsxs("div",{className:"w-full h-full content flex flex-col gap-5 bg-black bg-opacity-10 p-4",children:[h.jsx("h2",{className:"flex justify-center text-white bg-blue-500 py-3 font-medium",children:t==null?void 0:t.testName}),h.jsx("textarea",{name:"testDescription",id:"id_testDescripion",value:t==null?void 0:t.testDescription,rows:"10",className:"flex text-sm cursor-pointer border-0",disabled:!0})]})]})})}function Vwe(){const[e,t]=T.useState([]),r=qr(),n=async()=>{const i=await Mbe();t(i)};return T.useEffect(()=>{n()},[]),h.jsx("div",{className:"flex flex-col w-full h-full",children:h.jsx("div",{className:"w-full h-full grid grid-cols-3 gap-4 justify-items-start",children:(e==null?void 0:e.length)>0&&e.map((i,o)=>h.jsx("div",{className:"w-auto h-auto cursor-pointer",onClick:()=>r(`/patient/tests/testDetails/?testId=${i._id}&testName=${i.testName}`),children:h.jsx(Fwe,{test:i})},o))})})}function om(e){return Rn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"circle",attr:{cx:"256",cy:"192",r:"32"},child:[]},{tag:"path",attr:{d:"M256 32c-88.22 0-160 68.65-160 153 0 40.17 18.31 93.59 54.42 158.78 29 52.34 62.55 99.67 80 123.22a31.75 31.75 0 0 0 51.22 0c17.42-23.55 51-70.88 80-123.22C397.69 278.61 416 225.19 416 185c0-84.35-71.78-153-160-153zm0 224a64 64 0 1 1 64-64 64.07 64.07 0 0 1-64 64z"},child:[]}]})(e)}function Bwe(e){var r;const{test:t}=e;return h.jsx("div",{className:"flex w-full h-full ",children:h.jsxs("div",{className:"flex h-full w-[40vw] gap-6 bg-white  border rounded-lg p-4 shadow-lg",children:[h.jsx("div",{className:"image w-[20%] h-[90%]",children:h.jsx("img",{src:"/normalUser.png",alt:"image",className:"object-fit w-full h-full"})}),h.jsxs("div",{className:"details h-full w-full flex flex-1 flex-col gap-4 ",children:[h.jsx("h1",{children:(r=t==null?void 0:t.labId)==null?void 0:r.userId.username}),h.jsx("div",{className:"location"}),h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx(om,{}),h.jsx("span",{children:"Koovappally"})]}),h.jsxs("div",{className:"flex gap-2 w-full h-auto",children:[(t==null?void 0:t.atHome)&&h.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-orange-400 p-3 rounded-md flex gap-4 items-center",children:[h.jsx("span",{children:" Home Service"}),h.jsxs("span",{className:"flex gap-2 items-center",children:[h.jsx(Hb,{}),h.jsx("h6",{children:t==null?void 0:t.priceHome})]})]}),(t==null?void 0:t.atLab)&&h.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-blue-400 p-3 rounded-md flex gap-4 items-center",children:[h.jsx("span",{children:" Lab Service"}),h.jsxs("span",{className:"flex gap-2 items-center",children:[h.jsx(Hb,{}),h.jsx("h6",{children:t==null?void 0:t.priceLab})]})]})]})]})]})})}function $we(){const[e,t]=T.useState([]),[r,n]=T.useState(void 0),i=new URLSearchParams(window.location.search),o=async()=>{const a=await jbe({testId:i.get("testId")});t(a),n(a[0].testId)};return T.useEffect(()=>{o()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"screen w-full h-full flex  gap-2 justify-between ",children:[h.jsxs("div",{className:"w-[50%] h-[80vh] flex gap-10 border p-4 shadow-lg items-center bg-emerald-400 bg-opacity-10 bg-blur-sm",children:[h.jsx("div",{className:"image h-[40vh] w-[70%]",children:h.jsx("img",{src:r==null?void 0:r.testImage,alt:"testImage",className:"w-full h-full object-fit"})}),h.jsxs("div",{className:"testDetails flex flex-col gap-2 w-full h-full justify-center",children:[h.jsxs("div",{className:"description w-full h-[10vh] border shadow-lg flex flex-col gap-2 px-1",children:[h.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Name"}),h.jsx("span",{className:"text-lg font-medium",children:r==null?void 0:r.testName.toUpperCase()})]}),h.jsxs("div",{className:"testDescription flex flex-col gap-2 border w-full h-[40vh] shadow-lg px-1",children:[h.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Description"}),h.jsx("span",{className:"h-[10vh] p-2",children:r==null?void 0:r.testDescription})]})]})]}),h.jsxs("div",{className:"laboratorys bg-black bg-opacity-10 p-3 flex flex-col gap-4 w-auto h-full border  ",children:[h.jsx("h2",{className:"text-lg text-white  font-medium flex justify-center bg-blue-500 py-2",children:"Labs where the service available"}),h.jsx("div",{className:"labs flex flex-col gap-4 h-full w-full overflow-y-auto",children:(e==null?void 0:e.length)>0&&e.map((a,s)=>h.jsx("div",{className:"w-full h-auto",children:h.jsx(Bwe,{test:a})},s))})]})]})})}function Hwe(){return h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[h.jsx(Sr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"currentBookings",children:"Booked"}),h.jsx(Sr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"pastBookings",children:"Past Bookings"})]})})}function Wwe(){return h.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[h.jsx("div",{className:"header w-full h-[5vh]",children:h.jsx(Hwe,{})}),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx(Fi,{})})]})}const JP="https://hcompanion.onrender.com/api",Yq=sessionStorage.getItem("token"),Gwe=async()=>{var e,t,r;try{return(await Ee.get(`${JP}/patient/bookings/getAllCurrentBookings`,{headers:{Authorization:`bearer ${Yq}`}})).data.bookings}catch(n){return console.log(n),((e=n.response)==null?void 0:e.status)=="500"&&((r=(t=n.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Server Error","","error"),!1}},Xq=async({startTime:e,slotDate:t,doctorId:r})=>{var n,i,o;try{const a=await Ee.post(`${JP}/patient/bookings/cancelBooking`,{startTime:e,slotDate:t,doctorId:r},{headers:{Authorization:`bearer ${Yq}`}});return console.log(a.data),!0}catch(a){return console.log(a),((n=a.response)==null?void 0:n.status)=="500"&&((o=(i=a.response)==null?void 0:i.data)!=null&&o.errorServer)&&re.fire("Server Error","","error"),!1}},zwe=async()=>{var e,t,r;try{return(await Ee.get(`${JP}/patient/bookings/getPastBookings`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.bookings}catch(n){return console.log(n),((e=n.response)==null?void 0:e.status)=="500"&&((r=(t=n.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Server Error","","error"),!1}};function Kwe(e){var n,i,o,a,s,c,l;const{booking:t}=e;qr();const r=async(d,u,p,f)=>{d.preventDefault(),await re.fire({showCancelButton:!0,confirmButtonText:"Proceed Canceling",text:"Do you want to cancel the booking",icon:"question"}).then(async m=>{m.isConfirmed&&await Xq({startTime:u,slotDate:p,doctorId:f})&&(await re.fire("Canceled","Booking has been Canceled","success"),window.location.reload())})};return h.jsx("div",{className:"w-full h-full ",children:h.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[h.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:h.jsx("img",{src:(n=t==null?void 0:t.doctorId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),h.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[h.jsx("h4",{className:"text-sm font-medium opacity-40",children:"Cardiology"}),h.jsx("div",{className:"w-full h-auto",children:h.jsx("h4",{children:(o=(i=t==null?void 0:t.doctorId)==null?void 0:i.userId)==null?void 0:o.username})}),h.jsx("div",{className:"location w-full h-auto",children:h.jsxs("div",{className:"flex gap-4 items-start",children:[h.jsx(om,{}),h.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[h.jsx("span",{className:"flex items-center",children:(s=(a=t==null?void 0:t.doctorId)==null?void 0:a.addressId)==null?void 0:s.place}),h.jsx("span",{className:"flex items-center",children:(l=(c=t==null?void 0:t.doctorId)==null?void 0:c.addressId)==null?void 0:l.district})]})]})})]}),h.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[h.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[h.jsx(Dy,{}),h.jsx("span",{children:`${t==null?void 0:t.slotDate} ${at(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),h.jsxs("div",{className:"w-full h-auto flex gap-4",children:[h.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:d=>{var u;return r(d,t==null?void 0:t.startTime,t==null?void 0:t.slotDate,(u=t==null?void 0:t.doctorId)==null?void 0:u._id)},children:"Cancel"}),at().isAfter(at(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A"))&&at().isBefore(at(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))&&h.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:d=>window.open(`/patient/bookings/videoConsult?patientId=${t.patientId._id}&doctorId=${t.doctorId._id}`,"_blank"),children:"Join Meeting"})]})]})]})})}function qwe(){const[e,t]=T.useState([]),r=async()=>{const n=await Gwe();await t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"flex w-full h-full",children:h.jsx("div",{className:"booked flex flex-col gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>h.jsx("div",{className:"w-[60vw] h-[25vh] ",children:h.jsx(Kwe,{booking:n})},i))})})}function Ywe(){return h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[h.jsx(Sr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"currentBookings",children:"Booked"}),h.jsx(Sr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"pastCompletedBookings",children:"Past Bookings"})]})})}function Xwe(){return h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsxs("div",{className:"screen w-full h-full flex flex-col gap-10 p-2",children:[h.jsx("div",{className:"w-full h-[5vh] flex",children:h.jsx(Ywe,{})}),h.jsx("div",{className:"w-full h-full p-2 flex flex-col",children:h.jsx(Fi,{})})]})})}const Jq="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const Jwe=async()=>{var e,t,r;try{const n=await Ee.get(`${Jq}/doctor/bookings/getAllCurrentBookings`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(n.data),n.data.bookings}catch(n){return console.log(n),((e=n==null?void 0:n.response)==null?void 0:e.status)=="500"&&((r=(t=n==null?void 0:n.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Server Error","","error"),!1}},Qwe=async()=>{var e,t,r;try{const n=await Ee.get(`${Jq}/doctor/bookings/getPastCompletedBookings`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(n.data),n.data.bookings}catch(n){return console.log(n),((e=n==null?void 0:n.response)==null?void 0:e.status)=="500"&&((r=(t=n==null?void 0:n.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Server Error","","error"),!1}};at.extend(js);function Zwe(e){var n,i,o,a,s,c;const{booking:t}=e;qr(),console.log("test date",at().add(2,"hour").isBefore(at(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour")));const r=async(l,d,u,p)=>{l.preventDefault(),await re.fire({showCancelButton:!0,confirmButtonText:"Proceed Rescheduling",text:"Do you want to Reschedule the booking",icon:"question"}).then(async f=>{f.isConfirmed&&await patient_cancelBookingService({startTime:d,slotDate:u,doctorId:p})&&(await re.fire("Canceled","Booking has been Canceled","success"),window.location.reload())})};return h.jsx("div",{className:"w-full h-full ",children:h.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[h.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:h.jsx("img",{src:(n=t==null?void 0:t.patientId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),h.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[h.jsx("h4",{className:"text-sm font-medium opacity-40",children:"Cardiology"}),h.jsx("div",{className:"w-full h-auto",children:h.jsx("h4",{children:(i=t==null?void 0:t.patientId)==null?void 0:i.firstName})}),h.jsx("div",{className:"location w-full h-auto",children:h.jsxs("div",{className:"flex gap-4 items-start",children:[h.jsx(om,{}),h.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[h.jsx("span",{className:"flex items-center",children:(a=(o=t==null?void 0:t.patientId)==null?void 0:o.addressId)==null?void 0:a.place}),h.jsx("span",{className:"flex items-center",children:(c=(s=t==null?void 0:t.patientId)==null?void 0:s.addressId)==null?void 0:c.district})]})]})})]}),h.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[h.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[h.jsx(Dy,{}),h.jsx("span",{children:`${t==null?void 0:t.slotDate} ${at(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),h.jsxs("div",{className:"w-full h-auto flex flex-between gap-4",children:[h.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:l=>{var d;return r(l,t==null?void 0:t.startTime,t==null?void 0:t.slotDate,(d=t==null?void 0:t.doctorId)==null?void 0:d._id)},children:"Reschedule"}),at().isAfter(at(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A"))&&at().isBefore(at(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))&&h.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:l=>window.open(`/patient/bookings/videoConsult?patientId=${t.patientId._id}&doctorId=${t.doctorId._id}`,"_blank"),children:"Join Meeting"})]})]})]})})}function eSe(){const[e,t]=T.useState([]),r=async()=>{const n=await Jwe();t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"bookings w-full h-full",children:(e==null?void 0:e.length)>0&&(e==null?void 0:e.map((n,i)=>h.jsx("div",{className:"w-[70%] h-[25vh]",children:h.jsx(Zwe,{booking:n})},i)))})})})}/**
 * @license agora-rtc-react
 * @version 2.3.0
 *
 * Copyright (c) Agora, Inc.
 *
 * This source code is licensed under the MIT license.
 */function tSe(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in e)){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(e)}var Yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yr=function(e){try{return!!e()}catch{return!0}},jS=!Yr(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Qq=jS,Zq=Function.prototype,XA=Zq.call,rSe=Qq&&Zq.bind.bind(XA,XA),$r=Qq?rSe:function(e){return function(){return XA.apply(e,arguments)}},Ii=$r({}.isPrototypeOf),Fv=function(e){return e&&e.Math==Math&&e},jn=Fv(typeof globalThis=="object"&&globalThis)||Fv(typeof window=="object"&&window)||Fv(typeof self=="object"&&self)||Fv(typeof Yp=="object"&&Yp)||function(){return this}()||Yp||Function("return this")(),nSe=jS,eY=Function.prototype,EU=eY.apply,_U=eY.call,QP=typeof Reflect=="object"&&Reflect.apply||(nSe?_U.bind(EU):function(){return _U.apply(EU,arguments)}),tY=$r,iSe=tY({}.toString),oSe=tY("".slice),Tc=function(e){return oSe(iSe(e),8,-1)},aSe=Tc,sSe=$r,L0=function(e){if(aSe(e)==="Function")return sSe(e)},FC=typeof document=="object"&&document.all,US={all:FC,IS_HTMLDDA:FC===void 0&&FC!==void 0},cSe=US.all,Un=US.IS_HTMLDDA?function(e){return typeof e=="function"||e===cSe}:function(e){return typeof e=="function"},My={},ba=!Yr(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),lSe=jS,Vv=Function.prototype.call,Fn=lSe?Vv.bind(Vv):function(){return Vv.apply(Vv,arguments)},FS={},rY={}.propertyIsEnumerable,nY=Object.getOwnPropertyDescriptor,dSe=nY&&!rY.call({1:2},1);FS.f=dSe?function(e){var t=nY(this,e);return!!t&&t.enumerable}:rY;var xl,r_,Ud=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},uSe=Yr,hSe=Tc,VC=Object,pSe=$r("".split),VS=uSe(function(){return!VC("z").propertyIsEnumerable(0)})?function(e){return hSe(e)=="String"?pSe(e,""):VC(e)}:VC,am=function(e){return e==null},fSe=am,mSe=TypeError,sm=function(e){if(fSe(e))throw mSe("Can't call method on "+e);return e},gSe=VS,ySe=sm,Fd=function(e){return gSe(ySe(e))},bU=Un,vSe=US.all,$o=US.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:bU(e)||e===vSe}:function(e){return typeof e=="object"?e!==null:bU(e)},Us={},BC=Us,$C=jn,ESe=Un,wU=function(e){return ESe(e)?e:void 0},go=function(e,t){return arguments.length<2?wU(BC[e])||wU($C[e]):BC[e]&&BC[e][t]||$C[e]&&$C[e][t]},wh=typeof navigator<"u"&&String(navigator.userAgent)||"",iY=jn,HC=wh,SU=iY.process,TU=iY.Deno,CU=SU&&SU.versions||TU&&TU.version,RU=CU&&CU.v8;RU&&(r_=(xl=RU.split("."))[0]>0&&xl[0]<4?1:+(xl[0]+xl[1])),!r_&&HC&&(!(xl=HC.match(/Edge\/(\d+)/))||xl[1]>=74)&&(xl=HC.match(/Chrome\/(\d+)/))&&(r_=+xl[1]);var rh=r_,IU=rh,_Se=Yr,bSe=jn.String,cm=!!Object.getOwnPropertySymbols&&!_Se(function(){var e=Symbol();return!bSe(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&IU&&IU<41}),oY=cm&&!Symbol.sham&&typeof Symbol.iterator=="symbol",wSe=go,SSe=Un,TSe=Ii,CSe=Object,jy=oY?function(e){return typeof e=="symbol"}:function(e){var t=wSe("Symbol");return SSe(t)&&TSe(t.prototype,CSe(e))},RSe=String,lm=function(e){try{return RSe(e)}catch{return"Object"}},ISe=Un,xSe=lm,ASe=TypeError,os=function(e){if(ISe(e))return e;throw ASe(xSe(e)+" is not a function")},NSe=os,OSe=am,BS=function(e,t){var r=e[t];return OSe(r)?void 0:NSe(r)},xU=Fn,AU=Un,NU=$o,kSe=TypeError,aY={exports:{}},OU=jn,PSe=Object.defineProperty,DSe=function(e,t){try{PSe(OU,e,{value:t,configurable:!0,writable:!0})}catch{OU[e]=t}return t},kU="__core-js_shared__",ZP=jn[kU]||DSe(kU,{}),PU=ZP;(aY.exports=function(e,t){return PU[e]||(PU[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var dm=aY.exports,LSe=sm,MSe=Object,Cc=function(e){return MSe(LSe(e))},jSe=Cc,USe=$r({}.hasOwnProperty),qn=Object.hasOwn||function(e,t){return USe(jSe(e),t)},FSe=$r,VSe=0,BSe=Math.random(),$Se=FSe(1 .toString),eD=function(e){return"Symbol("+(e===void 0?"":e)+")_"+$Se(++VSe+BSe,36)},HSe=dm,DU=qn,WSe=eD,GSe=cm,zSe=oY,xp=jn.Symbol,WC=HSe("wks"),KSe=zSe?xp.for||xp:xp&&xp.withoutSetter||WSe,Ur=function(e){return DU(WC,e)||(WC[e]=GSe&&DU(xp,e)?xp[e]:KSe("Symbol."+e)),WC[e]},qSe=Fn,LU=$o,MU=jy,YSe=BS,XSe=function(e,t){var r,n;if(AU(r=e.toString)&&!NU(n=xU(r,e))||AU(r=e.valueOf)&&!NU(n=xU(r,e))||t!=="string")return n;throw kSe("Can't convert object to primitive value")},JSe=TypeError,QSe=Ur("toPrimitive"),ZSe=function(e,t){if(!LU(e)||MU(e))return e;var r,n=YSe(e,QSe);if(n){if(r=qSe(n,e,t),!LU(r)||MU(r))return r;throw JSe("Can't convert object to primitive value")}return XSe(e,t)},eTe=jy,$S=function(e){var t=ZSe(e,"string");return eTe(t)?t:t+""},jU=$o,JA=jn.document,tTe=jU(JA)&&jU(JA.createElement),tD=function(e){return tTe?JA.createElement(e):{}},rTe=tD,sY=!ba&&!Yr(function(){return Object.defineProperty(rTe("div"),"a",{get:function(){return 7}}).a!=7}),nTe=ba,iTe=Fn,oTe=FS,aTe=Ud,sTe=Fd,cTe=$S,lTe=qn,dTe=sY,UU=Object.getOwnPropertyDescriptor;My.f=nTe?UU:function(e,t){if(e=sTe(e),t=cTe(t),dTe)try{return UU(e,t)}catch{}if(lTe(e,t))return aTe(!iTe(oTe.f,e,t),e[t])};var uTe=Yr,hTe=Un,pTe=/#|\.prototype\./,Uy=function(e,t){var r=mTe[fTe(e)];return r==yTe||r!=gTe&&(hTe(t)?uTe(t):!!t)},fTe=Uy.normalize=function(e){return String(e).replace(pTe,".").toLowerCase()},mTe=Uy.data={},gTe=Uy.NATIVE="N",yTe=Uy.POLYFILL="P",cY=Uy,vTe=os,ETe=jS,_Te=L0(L0.bind),Vd=function(e,t){return vTe(e),t===void 0?e:ETe?_Te(e,t):function(){return e.apply(t,arguments)}},as={},lY=ba&&Yr(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),bTe=$o,wTe=String,STe=TypeError,Zi=function(e){if(bTe(e))return e;throw STe(wTe(e)+" is not an object")},TTe=ba,CTe=sY,RTe=lY,Bv=Zi,FU=$S,ITe=TypeError,GC=Object.defineProperty,xTe=Object.getOwnPropertyDescriptor,zC="enumerable",KC="configurable",qC="writable";as.f=TTe?RTe?function(e,t,r){if(Bv(e),t=FU(t),Bv(r),typeof e=="function"&&t==="prototype"&&"value"in r&&qC in r&&!r[qC]){var n=xTe(e,t);n&&n[qC]&&(e[t]=r.value,r={configurable:KC in r?r[KC]:n[KC],enumerable:zC in r?r[zC]:n[zC],writable:!1})}return GC(e,t,r)}:GC:function(e,t,r){if(Bv(e),t=FU(t),Bv(r),CTe)try{return GC(e,t,r)}catch{}if("get"in r||"set"in r)throw ITe("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var ATe=as,NTe=Ud,Bd=ba?function(e,t,r){return ATe.f(e,t,NTe(1,r))}:function(e,t,r){return e[t]=r,e},$v=jn,OTe=QP,kTe=L0,PTe=Un,DTe=My.f,LTe=cY,Bh=Us,MTe=Vd,$h=Bd,VU=qn,jTe=function(e){var t=function(r,n,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,n)}return new e(r,n,i)}return OTe(e,this,arguments)};return t.prototype=e.prototype,t},Yt=function(e,t){var r,n,i,o,a,s,c,l,d,u=e.target,p=e.global,f=e.stat,m=e.proto,g=p?$v:f?$v[u]:($v[u]||{}).prototype,y=p?Bh:Bh[u]||$h(Bh,u,{})[u],v=y.prototype;for(o in t)n=!(r=LTe(p?o:u+(f?".":"#")+o,e.forced))&&g&&VU(g,o),s=y[o],n&&(c=e.dontCallGetSet?(d=DTe(g,o))&&d.value:g[o]),a=n&&c?c:t[o],n&&typeof s==typeof a||(l=e.bind&&n?MTe(a,$v):e.wrap&&n?jTe(a):m&&PTe(a)?kTe(a):a,(e.sham||a&&a.sham||s&&s.sham)&&$h(l,"sham",!0),$h(y,o,l),m&&(VU(Bh,i=u+"Prototype")||$h(Bh,i,{}),$h(Bh[i],o,a),e.real&&v&&(r||!v[o])&&$h(v,o,a)))},UTe=Math.ceil,FTe=Math.floor,VTe=Math.trunc||function(e){var t=+e;return(t>0?FTe:UTe)(t)},BTe=VTe,rD=function(e){var t=+e;return t!=t||t===0?0:BTe(t)},$Te=rD,HTe=Math.max,WTe=Math.min,nD=function(e,t){var r=$Te(e);return r<0?HTe(r+t,0):WTe(r,t)},GTe=rD,zTe=Math.min,dY=function(e){return e>0?zTe(GTe(e),9007199254740991):0},KTe=dY,El=function(e){return KTe(e.length)},qTe=Fd,YTe=nD,XTe=El,BU=function(e){return function(t,r,n){var i,o=qTe(t),a=XTe(o),s=YTe(n,a);if(e&&r!=r){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},iD={includes:BU(!0),indexOf:BU(!1)},JTe=iD.includes;Yt({target:"Array",proto:!0,forced:Yr(function(){return!Array(1).includes()})},{includes:function(e){return JTe(this,e,arguments.length>1?arguments[1]:void 0)}});var QTe=Us,ss=function(e){return QTe[e+"Prototype"]},ZTe=ss("Array").includes,eCe=$o,tCe=Tc,rCe=Ur("match"),uY=function(e){var t;return eCe(e)&&((t=e[rCe])!==void 0?!!t:tCe(e)=="RegExp")},nCe=uY,iCe=TypeError,hY={};hY[Ur("toStringTag")]="z";var oD=String(hY)==="[object z]",oCe=oD,aCe=Un,n_=Tc,sCe=Ur("toStringTag"),cCe=Object,lCe=n_(function(){return arguments}())=="Arguments",Rc=oCe?n_:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=function(i,o){try{return i[o]}catch{}}(t=cCe(e),sCe))=="string"?r:lCe?n_(t):(n=n_(t))=="Object"&&aCe(t.callee)?"Arguments":n},dCe=Rc,uCe=String,wa=function(e){if(dCe(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return uCe(e)},hCe=Ur("match"),pCe=Yt,fCe=function(e){if(nCe(e))throw iCe("The method doesn't accept regular expressions");return e},mCe=sm,$U=wa,gCe=function(e){var t=/./;try{"/./"[e](t)}catch{try{return t[hCe]=!1,"/./"[e](t)}catch{}}return!1},yCe=$r("".indexOf);pCe({target:"String",proto:!0,forced:!gCe("includes")},{includes:function(e){return!!~yCe($U(mCe(this)),$U(fCe(e)),arguments.length>1?arguments[1]:void 0)}});var vCe=ss("String").includes,HU=Ii,ECe=ZTe,_Ce=vCe,YC=Array.prototype,XC=String.prototype,bCe=function(e){var t=e.includes;return e===YC||HU(YC,e)&&t===YC.includes?ECe:typeof e=="string"||e===XC||HU(XC,e)&&t===XC.includes?_Ce:t},pe=Nr(bCe),wCe=os,SCe=Cc,TCe=VS,CCe=El,RCe=TypeError,WU=function(e){return function(t,r,n,i){wCe(r);var o=SCe(t),a=TCe(o),s=CCe(o),c=e?s-1:0,l=e?-1:1;if(n<2)for(;;){if(c in a){i=a[c],c+=l;break}if(c+=l,e?c<0:s<=c)throw RCe("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=l)c in a&&(i=r(i,a[c],c,o));return i}},ICe={left:WU(!1),right:WU(!0)},xCe=Yr,HS=function(e,t){var r=[][e];return!!r&&xCe(function(){r.call(null,t||function(){return 1},1)})},Fy=typeof process<"u"&&Tc(process)=="process",ACe=ICe.left;Yt({target:"Array",proto:!0,forced:!Fy&&rh>79&&rh<83||!HS("reduce")},{reduce:function(e){var t=arguments.length;return ACe(this,e,t,t>1?arguments[1]:void 0)}});var NCe=ss("Array").reduce,OCe=Ii,kCe=NCe,JC=Array.prototype,PCe=function(e){var t=e.reduce;return e===JC||OCe(JC,e)&&t===JC.reduce?kCe:t},pY=PCe,Ps=Nr(pY),fY=!0,mY=!0;function Hv(e,t,r){let n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function Sh(e,t,r){if(!e.RTCPeerConnection)return;let n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(a,s){if(a!==t)return i.apply(this,arguments);let c=l=>{let d=r(l);d&&(s.handleEvent?s.handleEvent(d):s(d))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(s,c),i.apply(this,[a,c])};let o=n.removeEventListener;n.removeEventListener=function(a,s){if(a!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(s))return o.apply(this,arguments);let c=this._eventMap[t].get(s);return this._eventMap[t].delete(s),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[a,c])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(a){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),a&&this.addEventListener(t,this["_on"+t]=a)},enumerable:!0,configurable:!0})}function DCe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(fY=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function LCe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(mY=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function gY(){if(typeof window=="object"){if(fY)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function aD(e,t){mY&&console.warn(e+" is deprecated, please use "+t+" instead.")}function GU(e){return Object.prototype.toString.call(e)==="[object Object]"}function yY(e){var t;return GU(e)?Ps(t=Object.keys(e)).call(t,function(r,n){let i=GU(e[n]),o=i?yY(e[n]):e[n],a=i&&!Object.keys(o).length;return o===void 0||a?r:Object.assign(r,{[n]:o})},{}):e}function QA(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach(n=>{n.endsWith("Id")?QA(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach(i=>{QA(e,e.get(i),r)})}))}function zU(e,t,r){let n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;let o=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===t.id&&o.push(a)}),o.forEach(a=>{e.forEach(s=>{s.type===n&&s.trackId===a.id&&QA(e,s,i)})}),i}var MCe=eD,KU=dm("keys"),WS=function(e){return KU[e]||(KU[e]=MCe(e))},jCe=!Yr(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),UCe=qn,FCe=Un,VCe=Cc,BCe=jCe,qU=WS("IE_PROTO"),ZA=Object,$Ce=ZA.prototype,sD=BCe?ZA.getPrototypeOf:function(e){var t=VCe(e);if(UCe(t,qU))return t[qU];var r=t.constructor;return FCe(r)&&t instanceof r?r.prototype:t instanceof ZA?$Ce:null},HCe=$r,WCe=os,GCe=Un,zCe=String,KCe=TypeError,qCe=function(e,t,r){try{return HCe(WCe(Object.getOwnPropertyDescriptor(e,t)[r]))}catch{}},YCe=Zi,XCe=function(e){if(typeof e=="object"||GCe(e))return e;throw KCe("Can't set "+zCe(e)+" as a prototype")},JCe=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=qCe(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch{}return function(n,i){return YCe(n),XCe(i),t?e(n,i):n.__proto__=i,n}}():void 0),GS={},zS={},QC=qn,QCe=Fd,ZCe=iD.indexOf,eRe=zS,YU=$r([].push),vY=function(e,t){var r,n=QCe(e),i=0,o=[];for(r in n)!QC(eRe,r)&&QC(n,r)&&YU(o,r);for(;t.length>i;)QC(n,r=t[i++])&&(~ZCe(o,r)||YU(o,r));return o},cD=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],tRe=vY,rRe=cD.concat("length","prototype");GS.f=Object.getOwnPropertyNames||function(e){return tRe(e,rRe)};var Vy={};Vy.f=Object.getOwnPropertySymbols;var nRe=go,iRe=GS,oRe=Vy,aRe=Zi,sRe=$r([].concat),cRe=nRe("Reflect","ownKeys")||function(e){var t=iRe.f(aRe(e)),r=oRe.f;return r?sRe(t,r(e)):t},XU=qn,lRe=cRe,dRe=My,uRe=as,lD={},hRe=vY,pRe=cD,KS=Object.keys||function(e){return hRe(e,pRe)},fRe=ba,mRe=lY,gRe=as,yRe=Zi,vRe=Fd,ERe=KS;lD.f=fRe&&!mRe?Object.defineProperties:function(e,t){yRe(e);for(var r,n=vRe(t),i=ERe(t),o=i.length,a=0;o>a;)gRe.f(e,r=i[a++],n[r]);return e};var Wv,EY=go("document","documentElement"),_Re=Zi,bRe=lD,JU=cD,wRe=zS,SRe=EY,TRe=tD,eN="prototype",tN="script",_Y=WS("IE_PROTO"),ZC=function(){},bY=function(e){return"<"+tN+">"+e+"</"+tN+">"},QU=function(e){e.write(bY("")),e.close();var t=e.parentWindow.Object;return e=null,t},i_=function(){try{Wv=new ActiveXObject("htmlfile")}catch{}var e,t,r;i_=typeof document<"u"?document.domain&&Wv?QU(Wv):(t=TRe("iframe"),r="java"+tN+":",t.style.display="none",SRe.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(bY("document.F=Object")),e.close(),e.F):QU(Wv);for(var n=JU.length;n--;)delete i_[eN][JU[n]];return i_()};wRe[_Y]=!0;var By=Object.create||function(e,t){var r;return e!==null?(ZC[eN]=_Re(e),r=new ZC,ZC[eN]=null,r[_Y]=e):r=i_(),t===void 0?r:bRe.f(r,t)},CRe=$o,RRe=Bd,wY=Error,IRe=$r("".replace),xRe=String(wY("zxcasd").stack),SY=/\n\s*at [^:]*:[^\n]*/,ARe=SY.test(xRe),NRe=Ud,ORe=!Yr(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",NRe(1,7)),e.stack!==7)}),kRe=Bd,PRe=function(e,t){if(ARe&&typeof e=="string"&&!wY.prepareStackTrace)for(;t--;)e=IRe(e,SY,"");return e},DRe=ORe,ZU=Error.captureStackTrace,Th={},LRe=Th,MRe=Ur("iterator"),jRe=Array.prototype,TY=function(e){return e!==void 0&&(LRe.Array===e||jRe[MRe]===e)},URe=Rc,e5=BS,FRe=am,VRe=Th,BRe=Ur("iterator"),qS=function(e){if(!FRe(e))return e5(e,BRe)||e5(e,"@@iterator")||VRe[URe(e)]},$Re=Fn,HRe=os,WRe=Zi,GRe=lm,zRe=qS,KRe=TypeError,dD=function(e,t){var r=arguments.length<2?zRe(e):t;if(HRe(r))return WRe($Re(r,e));throw KRe(GRe(e)+" is not iterable")},qRe=Fn,t5=Zi,YRe=BS,CY=function(e,t,r){var n,i;t5(e);try{if(!(n=YRe(e,"return"))){if(t==="throw")throw r;return r}n=qRe(n,e)}catch(o){i=!0,n=o}if(t==="throw")throw r;if(i)throw n;return t5(n),r},XRe=Vd,JRe=Fn,QRe=Zi,ZRe=lm,eIe=TY,tIe=El,r5=Ii,rIe=dD,nIe=qS,n5=CY,iIe=TypeError,o_=function(e,t){this.stopped=e,this.result=t},i5=o_.prototype,$y=function(e,t,r){var n,i,o,a,s,c,l,d=r&&r.that,u=!(!r||!r.AS_ENTRIES),p=!(!r||!r.IS_RECORD),f=!(!r||!r.IS_ITERATOR),m=!(!r||!r.INTERRUPTED),g=XRe(t,d),y=function(E){return n&&n5(n,"normal",E),new o_(!0,E)},v=function(E){return u?(QRe(E),m?g(E[0],E[1],y):g(E[0],E[1])):m?g(E,y):g(E)};if(p)n=e.iterator;else if(f)n=e;else{if(!(i=nIe(e)))throw iIe(ZRe(e)+" is not iterable");if(eIe(i)){for(o=0,a=tIe(e);a>o;o++)if((s=v(e[o]))&&r5(i5,s))return s;return new o_(!1)}n=rIe(e,i)}for(c=p?e.next:n.next;!(l=JRe(c,n)).done;){try{s=v(l.value)}catch(E){n5(n,"throw",E)}if(typeof s=="object"&&s&&r5(i5,s))return s}return new o_(!1)},oIe=wa,aIe=Yt,sIe=Ii,cIe=sD,Wb=JCe,lIe=function(e,t,r){for(var n=lRe(t),i=uRe.f,o=dRe.f,a=0;a<n.length;a++){var s=n[a];XU(e,s)||r&&XU(r,s)||i(e,s,o(t,s))}},RY=By,eR=Bd,tR=Ud,dIe=function(e,t){CRe(t)&&"cause"in t&&RRe(e,"cause",t.cause)},uIe=function(e,t,r,n){DRe&&(ZU?ZU(e,t):kRe(e,"stack",PRe(r,n)))},hIe=$y,pIe=function(e,t){return e===void 0?arguments.length<2?"":t:oIe(e)},fIe=Ur("toStringTag"),Gb=Error,mIe=[].push,Rf=function(e,t){var r,n=sIe(rR,this);Wb?r=Wb(Gb(),n?cIe(this):rR):(r=n?this:RY(rR),eR(r,fIe,"Error")),t!==void 0&&eR(r,"message",pIe(t)),uIe(r,Rf,r.stack,1),arguments.length>2&&dIe(r,arguments[2]);var i=[];return hIe(e,mIe,{that:i}),eR(r,"errors",i),r};Wb?Wb(Rf,Gb):lIe(Rf,Gb,{name:!0});var rR=Rf.prototype=RY(Gb.prototype,{constructor:tR(1,Rf),message:tR(1,""),name:tR(1,"AggregateError")});aIe({global:!0,constructor:!0,arity:2},{AggregateError:Rf});var zb,Bg,Kb,gIe=Un,o5=jn.WeakMap,yIe=gIe(o5)&&/native code/.test(String(o5)),IY=jn,vIe=$o,EIe=Bd,nR=qn,iR=ZP,_Ie=WS,bIe=zS,a5="Object already initialized",rN=IY.TypeError,wIe=IY.WeakMap;yIe||iR.state?(us=iR.state||(iR.state=new wIe),us.get=us.get,us.has=us.has,us.set=us.set,zb=function(e,t){if(us.has(e))throw rN(a5);return t.facade=e,us.set(e,t),t},Bg=function(e){return us.get(e)||{}},Kb=function(e){return us.has(e)}):(Xd=_Ie("state"),bIe[Xd]=!0,zb=function(e,t){if(nR(e,Xd))throw rN(a5);return t.facade=e,EIe(e,Xd,t),t},Bg=function(e){return nR(e,Xd)?e[Xd]:{}},Kb=function(e){return nR(e,Xd)});var us,Xd,Fu,s5,c5,Ch={set:zb,get:Bg,has:Kb,enforce:function(e){return Kb(e)?Bg(e):zb(e,{})},getterFor:function(e){return function(t){var r;if(!vIe(t)||(r=Bg(t)).type!==e)throw rN("Incompatible receiver, "+e+" required");return r}}},nN=ba,SIe=qn,xY=Function.prototype,TIe=nN&&Object.getOwnPropertyDescriptor,oR=SIe(xY,"name"),AY={EXISTS:oR,PROPER:oR&&(function(){}).name==="something",CONFIGURABLE:oR&&(!nN||nN&&TIe(xY,"name").configurable)},CIe=Bd,$d=function(e,t,r,n){return n&&n.enumerable?e[t]=r:CIe(e,t,r),e},RIe=Yr,IIe=Un,xIe=$o,AIe=By,l5=sD,NIe=$d,iN=Ur("iterator"),NY=!1;[].keys&&("next"in(c5=[].keys())?(s5=l5(l5(c5)))!==Object.prototype&&(Fu=s5):NY=!0);var OIe=!xIe(Fu)||RIe(function(){var e={};return Fu[iN].call(e)!==e});IIe((Fu=OIe?{}:AIe(Fu))[iN])||NIe(Fu,iN,function(){return this});var OY={IteratorPrototype:Fu,BUGGY_SAFARI_ITERATORS:NY},kIe=Rc,PIe=oD?{}.toString:function(){return"[object "+kIe(this)+"]"},DIe=oD,LIe=as.f,MIe=Bd,jIe=qn,UIe=PIe,d5=Ur("toStringTag"),Hd=function(e,t,r,n){if(e){var i=r?e:e.prototype;jIe(i,d5)||LIe(i,d5,{configurable:!0,value:t}),n&&!DIe&&MIe(i,"toString",UIe)}},FIe=OY.IteratorPrototype,VIe=By,BIe=Ud,$Ie=Hd,HIe=Th,WIe=function(){return this},uD=function(e,t,r,n){var i=t+" Iterator";return e.prototype=VIe(FIe,{next:BIe(+!n,r)}),$Ie(e,i,!1,!0),HIe[i]=WIe,e},GIe=Yt,zIe=Fn,KIe=AY,qIe=uD,YIe=sD,XIe=Hd,u5=$d,h5=Th,JIe=OY,QIe=KIe.PROPER,Gv=JIe.BUGGY_SAFARI_ITERATORS,aR=Ur("iterator"),p5="keys",zv="values",f5="entries",ZIe=function(){return this},kY=function(e,t,r,n,i,o,a){qIe(r,t,n);var s,c,l,d=function(v){if(v===i&&g)return g;if(!Gv&&v in f)return f[v];switch(v){case p5:case zv:case f5:return function(){return new r(this,v)}}return function(){return new r(this)}},u=t+" Iterator",p=!1,f=e.prototype,m=f[aR]||f["@@iterator"]||i&&f[i],g=!Gv&&m||d(i),y=t=="Array"&&f.entries||m;if(y&&(s=YIe(y.call(new e)))!==Object.prototype&&s.next&&(XIe(s,u,!0,!0),h5[u]=ZIe),QIe&&i==zv&&m&&m.name!==zv&&(p=!0,g=function(){return zIe(m,this)}),i)if(c={values:d(zv),keys:o?g:d(p5),entries:d(f5)},a)for(l in c)(Gv||p||!(l in f))&&u5(f,l,c[l]);else GIe({target:t,proto:!0,forced:Gv||p},c);return a&&f[aR]!==g&&u5(f,aR,g,{name:i}),h5[t]=g,c},hD=function(e,t){return{value:e,done:t}},exe=Fd,m5=Th,PY=Ch;as.f;var txe=kY,g5=hD,DY="Array Iterator",rxe=PY.set,nxe=PY.getterFor(DY);txe(Array,"Array",function(e,t){rxe(this,{type:DY,target:exe(e),index:0,kind:t})},function(){var e=nxe(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,g5(void 0,!0)):g5(r=="keys"?n:r=="values"?t[n]:[n,t[n]],!1)},"values"),m5.Arguments=m5.Array;var ixe=as,YS=function(e,t,r){return ixe.f(e,t,r)},oxe=go,axe=YS,sxe=ba,y5=Ur("species"),cxe=Ii,lxe=TypeError,pD=function(e,t){if(cxe(t,e))return e;throw lxe("Incorrect invocation")},dxe=Un,oN=ZP,uxe=$r(Function.toString);dxe(oN.inspectSource)||(oN.inspectSource=function(e){return uxe(e)});var LY=oN.inspectSource,hxe=$r,pxe=Yr,MY=Un,fxe=Rc,mxe=LY,jY=function(){},gxe=[],UY=go("Reflect","construct"),fD=/^\s*(?:class|function)\b/,yxe=hxe(fD.exec),vxe=!fD.exec(jY),Bm=function(e){if(!MY(e))return!1;try{return UY(jY,gxe,e),!0}catch{return!1}},FY=function(e){if(!MY(e))return!1;switch(fxe(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return vxe||!!yxe(fD,mxe(e))}catch{return!0}};FY.sham=!0;var M0,Hh,v5,sR,XS=!UY||pxe(function(){var e;return Bm(Bm.call)||!Bm(Object)||!Bm(function(){e=!0})||e})?FY:Bm,Exe=XS,_xe=lm,bxe=TypeError,E5=Zi,wxe=function(e){if(Exe(e))return e;throw bxe(_xe(e)+" is not a constructor")},Sxe=am,Txe=Ur("species"),mD=function(e,t){var r,n=E5(e).constructor;return n===void 0||Sxe(r=E5(n)[Txe])?t:wxe(r)},gD=$r([].slice),Cxe=TypeError,JS=function(e,t){if(e<t)throw Cxe("Not enough arguments");return e},VY=/(?:ipad|iphone|ipod).*applewebkit/i.test(wh),ia=jn,Rxe=QP,Ixe=Vd,_5=Un,xxe=qn,BY=Yr,b5=EY,Axe=gD,w5=tD,Nxe=JS,Oxe=VY,kxe=Fy,aN=ia.setImmediate,sN=ia.clearImmediate,Pxe=ia.process,cR=ia.Dispatch,Dxe=ia.Function,S5=ia.MessageChannel,Lxe=ia.String,lR=0,$g={},T5="onreadystatechange";BY(function(){M0=ia.location});var yD=function(e){if(xxe($g,e)){var t=$g[e];delete $g[e],t()}},dR=function(e){return function(){yD(e)}},C5=function(e){yD(e.data)},R5=function(e){ia.postMessage(Lxe(e),M0.protocol+"//"+M0.host)};aN&&sN||(aN=function(e){Nxe(arguments.length,1);var t=_5(e)?e:Dxe(e),r=Axe(arguments,1);return $g[++lR]=function(){Rxe(t,void 0,r)},Hh(lR),lR},sN=function(e){delete $g[e]},kxe?Hh=function(e){Pxe.nextTick(dR(e))}:cR&&cR.now?Hh=function(e){cR.now(dR(e))}:S5&&!Oxe?(sR=(v5=new S5).port2,v5.port1.onmessage=C5,Hh=Ixe(sR.postMessage,sR)):ia.addEventListener&&_5(ia.postMessage)&&!ia.importScripts&&M0&&M0.protocol!=="file:"&&!BY(R5)?(Hh=R5,ia.addEventListener("message",C5,!1)):Hh=T5 in w5("script")?function(e){b5.appendChild(w5("script"))[T5]=function(){b5.removeChild(this),yD(e)}}:function(e){setTimeout(dR(e),0)});var $Y={set:aN,clear:sN},HY=function(){this.head=null,this.tail=null};HY.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return(this.head=e.next)===null&&(this.tail=null),e.item}};var Wh,uR,hR,pR,I5,WY=HY,Mxe=/ipad|iphone|ipod/i.test(wh)&&typeof Pebble<"u",jxe=/web0s(?!.*chrome)/i.test(wh),nh=jn,x5=Vd,Uxe=My.f,fR=$Y.set,Fxe=WY,Vxe=VY,Bxe=Mxe,$xe=jxe,mR=Fy,A5=nh.MutationObserver||nh.WebKitMutationObserver,N5=nh.document,O5=nh.process,Kv=nh.Promise,k5=Uxe(nh,"queueMicrotask"),cN=k5&&k5.value;cN||($m=new Fxe,Hm=function(){var e,t;for(mR&&(e=O5.domain)&&e.exit();t=$m.get();)try{t()}catch(r){throw $m.head&&Wh(),r}e&&e.enter()},Vxe||mR||$xe||!A5||!N5?!Bxe&&Kv&&Kv.resolve?((pR=Kv.resolve(void 0)).constructor=Kv,I5=x5(pR.then,pR),Wh=function(){I5(Hm)}):mR?Wh=function(){O5.nextTick(Hm)}:(fR=x5(fR,nh),Wh=function(){fR(Hm)}):(uR=!0,hR=N5.createTextNode(""),new A5(Hm).observe(hR,{characterData:!0}),Wh=function(){hR.data=uR=!uR}),cN=function(e){$m.head||Wh(),$m.add(e)});var $m,Hm,Hxe=cN,um=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}},ih=jn.Promise,GY=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",Wxe=!GY&&!Fy&&typeof window=="object"&&typeof document=="object",Gxe=jn,Hg=ih,zxe=Un,Kxe=cY,qxe=LY,Yxe=Ur,Xxe=Wxe,Jxe=GY,gR=rh,P5=Hg&&Hg.prototype,Qxe=Yxe("species"),zY=!1,KY=zxe(Gxe.PromiseRejectionEvent),Zxe=Kxe("Promise",function(){var e=qxe(Hg),t=e!==String(Hg);if(!t&&gR===66||!P5.catch||!P5.finally)return!0;if(!gR||gR<51||!/native code/.test(e)){var r=new Hg(function(i){i(1)}),n=function(i){i(function(){},function(){})};if((r.constructor={})[Qxe]=n,!(zY=r.then(function(){})instanceof n))return!0}return!t&&(Xxe||Jxe)&&!KY}),Hy={CONSTRUCTOR:Zxe,REJECTION_EVENT:KY,SUBCLASSING:zY},Ic={},D5=os,eAe=TypeError,tAe=function(e){var t,r;this.promise=new e(function(n,i){if(t!==void 0||r!==void 0)throw eAe("Bad Promise constructor");t=n,r=i}),this.resolve=D5(t),this.reject=D5(r)};Ic.f=function(e){return new tAe(e)};var yR,L5,rAe=Yt,qb=Fy,Ad=jn,Wy=Fn,nAe=$d,iAe=Hd,oAe=function(e){var t=oxe(e);sxe&&t&&!t[y5]&&axe(t,y5,{configurable:!0,get:function(){return this}})},aAe=os,lN=Un,sAe=$o,cAe=pD,lAe=mD,qY=$Y.set,vD=Hxe,dAe=function(e,t){try{arguments.length==1?console.error(e):console.error(e,t)}catch{}},uAe=um,hAe=WY,YY=Ch,dN=ih,XY=Hy,JY=Ic,a_="Promise",M5=XY.CONSTRUCTOR,pAe=XY.REJECTION_EVENT,vR=YY.getterFor(a_),fAe=YY.set,mAe=dN&&dN.prototype,Wm=dN,ER=mAe,QY=Ad.TypeError,uN=Ad.document,ED=Ad.process,hN=JY.f,gAe=hN,yAe=!!(uN&&uN.createEvent&&Ad.dispatchEvent),ZY="unhandledrejection",eX=function(e){var t;return!(!sAe(e)||!lN(t=e.then))&&t},tX=function(e,t){var r,n,i,o=t.value,a=t.state==1,s=a?e.ok:e.fail,c=e.resolve,l=e.reject,d=e.domain;try{s?(a||(t.rejection===2&&EAe(t),t.rejection=1),s===!0?r=o:(d&&d.enter(),r=s(o),d&&(d.exit(),i=!0)),r===e.promise?l(QY("Promise-chain cycle")):(n=eX(r))?Wy(n,r,c,l):c(r)):l(o)}catch(u){d&&!i&&d.exit(),l(u)}},rX=function(e,t){e.notified||(e.notified=!0,vD(function(){for(var r,n=e.reactions;r=n.get();)tX(r,e);e.notified=!1,t&&!e.rejection&&vAe(e)}))},nX=function(e,t,r){var n,i;yAe?((n=uN.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),Ad.dispatchEvent(n)):n={promise:t,reason:r},!pAe&&(i=Ad["on"+e])?i(n):e===ZY&&dAe("Unhandled promise rejection",r)},vAe=function(e){Wy(qY,Ad,function(){var t,r=e.facade,n=e.value;if(j5(e)&&(t=uAe(function(){qb?ED.emit("unhandledRejection",n,r):nX(ZY,r,n)}),e.rejection=qb||j5(e)?2:1,t.error))throw t.value})},j5=function(e){return e.rejection!==1&&!e.parent},EAe=function(e){Wy(qY,Ad,function(){var t=e.facade;qb?ED.emit("rejectionHandled",t):nX("rejectionhandled",t,e.value)})},Ap=function(e,t,r){return function(n){e(t,n,r)}},Xp=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,rX(e,!0))},pN=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw QY("Promise can't be resolved itself");var n=eX(t);n?vD(function(){var i={done:!1};try{Wy(n,t,Ap(pN,i,e),Ap(Xp,i,e))}catch(o){Xp(i,o,e)}}):(e.value=t,e.state=1,rX(e,!1))}catch(i){Xp({done:!1},i,e)}}};M5&&(ER=(Wm=function(e){cAe(this,ER),aAe(e),Wy(yR,this);var t=vR(this);try{e(Ap(pN,t),Ap(Xp,t))}catch(r){Xp(t,r)}}).prototype,(yR=function(e){fAe(this,{type:a_,done:!1,notified:!1,parent:!1,reactions:new hAe,rejection:!1,state:0,value:void 0})}).prototype=nAe(ER,"then",function(e,t){var r=vR(this),n=hN(lAe(this,Wm));return r.parent=!0,n.ok=!lN(e)||e,n.fail=lN(t)&&t,n.domain=qb?ED.domain:void 0,r.state==0?r.reactions.add(n):vD(function(){tX(n,r)}),n.promise}),L5=function(){var e=new yR,t=vR(e);this.promise=e,this.resolve=Ap(pN,t),this.reject=Ap(Xp,t)},JY.f=hN=function(e){return e===Wm||e===void 0?new L5(e):gAe(e)}),rAe({global:!0,constructor:!0,wrap:!0,forced:M5},{Promise:Wm}),iAe(Wm,a_,!1,!0),oAe(a_);var iX=Ur("iterator"),oX=!1;try{U5=0,_R={next:function(){return{done:!!U5++}},return:function(){oX=!0}},_R[iX]=function(){return this},Array.from(_R,function(){throw 2})}catch{}var U5,_R,_Ae=ih,bAe=function(e,t){if(!oX)return!1;var r=!1;try{var n={};n[iX]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch{}return r},QS=Hy.CONSTRUCTOR||!bAe(function(e){_Ae.all(e).then(void 0,function(){})}),wAe=Fn,SAe=os,TAe=Ic,CAe=um,RAe=$y;Yt({target:"Promise",stat:!0,forced:QS},{all:function(e){var t=this,r=TAe.f(t),n=r.resolve,i=r.reject,o=CAe(function(){var a=SAe(t.resolve),s=[],c=0,l=1;RAe(e,function(d){var u=c++,p=!1;l++,wAe(a,t,d).then(function(f){p||(p=!0,s[u]=f,--l||n(s))},i)}),--l||n(s)});return o.error&&i(o.value),r.promise}});var IAe=Yt,xAe=Hy.CONSTRUCTOR;ih&&ih.prototype,IAe({target:"Promise",proto:!0,forced:xAe,real:!0},{catch:function(e){return this.then(void 0,e)}});var AAe=Fn,NAe=os,OAe=Ic,kAe=um,PAe=$y;Yt({target:"Promise",stat:!0,forced:QS},{race:function(e){var t=this,r=OAe.f(t),n=r.reject,i=kAe(function(){var o=NAe(t.resolve);PAe(e,function(a){AAe(o,t,a).then(r.resolve,n)})});return i.error&&n(i.value),r.promise}});var DAe=Fn,LAe=Ic;Yt({target:"Promise",stat:!0,forced:Hy.CONSTRUCTOR},{reject:function(e){var t=LAe.f(this);return DAe(t.reject,void 0,e),t.promise}});var MAe=Zi,jAe=$o,UAe=Ic,aX=function(e,t){if(MAe(e),jAe(t)&&t.constructor===e)return t;var r=UAe.f(e);return(0,r.resolve)(t),r.promise},FAe=Yt,VAe=ih,BAe=Hy.CONSTRUCTOR,$Ae=aX,HAe=go("Promise"),WAe=!BAe;FAe({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return $Ae(WAe&&this===HAe?VAe:this,e)}});var GAe=Fn,zAe=os,KAe=Ic,qAe=um,YAe=$y;Yt({target:"Promise",stat:!0,forced:QS},{allSettled:function(e){var t=this,r=KAe.f(t),n=r.resolve,i=r.reject,o=qAe(function(){var a=zAe(t.resolve),s=[],c=0,l=1;YAe(e,function(d){var u=c++,p=!1;l++,GAe(a,t,d).then(function(f){p||(p=!0,s[u]={status:"fulfilled",value:f},--l||n(s))},function(f){p||(p=!0,s[u]={status:"rejected",reason:f},--l||n(s))})}),--l||n(s)});return o.error&&i(o.value),r.promise}});var XAe=Fn,JAe=os,QAe=go,ZAe=Ic,eNe=um,tNe=$y,F5="No one promise resolved";Yt({target:"Promise",stat:!0,forced:QS},{any:function(e){var t=this,r=QAe("AggregateError"),n=ZAe.f(t),i=n.resolve,o=n.reject,a=eNe(function(){var s=JAe(t.resolve),c=[],l=0,d=1,u=!1;tNe(e,function(p){var f=l++,m=!1;d++,XAe(s,t,p).then(function(g){m||u||(u=!0,i(g))},function(g){m||u||(m=!0,c[f]=g,--d||o(new r(c,F5)))})}),--d||o(new r(c,F5))});return a.error&&o(a.value),n.promise}});var rNe=Yt,fN=ih,nNe=Yr,iNe=go,oNe=Un,aNe=mD,V5=aX,sNe=fN&&fN.prototype;rNe({target:"Promise",proto:!0,real:!0,forced:!!fN&&nNe(function(){sNe.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=aNe(this,iNe("Promise")),r=oNe(e);return this.then(r?function(n){return V5(t,e()).then(function(){return n})}:e,r?function(n){return V5(t,e()).then(function(){throw n})}:e)}});var _D=$r,cNe=rD,lNe=wa,dNe=sm,uNe=_D("".charAt),B5=_D("".charCodeAt),hNe=_D("".slice),$5=function(e){return function(t,r){var n,i,o=lNe(dNe(t)),a=cNe(r),s=o.length;return a<0||a>=s?e?"":void 0:(n=B5(o,a))<55296||n>56319||a+1===s||(i=B5(o,a+1))<56320||i>57343?e?uNe(o,a):n:e?hNe(o,a,a+2):i-56320+(n-55296<<10)+65536}},bD={codeAt:$5(!1),charAt:$5(!0)},pNe=bD.charAt,fNe=wa,sX=Ch,mNe=kY,H5=hD,cX="String Iterator",gNe=sX.set,yNe=sX.getterFor(cX);mNe(String,"String",function(e){gNe(this,{type:cX,string:fNe(e),index:0})},function(){var e,t=yNe(this),r=t.string,n=t.index;return n>=r.length?H5(void 0,!0):(e=pNe(r,n),t.index+=e.length,H5(e,!1))});var vNe=Us.Promise,ENe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},_Ne=jn,bNe=Rc,wNe=Bd,W5=Th,G5=Ur("toStringTag");for(Yv in ENe)bR=_Ne[Yv],qv=bR&&bR.prototype,qv&&bNe(qv)!==G5&&wNe(qv,G5,Yv),W5[Yv]=W5.Array;var bR,qv,Yv,lX=vNe,de=Nr(lX),z5=gY;function dX(e,t){let r=e&&e.navigator;if(!r.mediaDevices)return;let n=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;let s={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;let l=typeof a[c]=="object"?a[c]:{ideal:a[c]};l.exact!==void 0&&typeof l.exact=="number"&&(l.min=l.max=l.exact);let d=function(u,p){return u?u+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(l.ideal!==void 0){s.optional=s.optional||[];let u={};typeof l.ideal=="number"?(u[d("min",c)]=l.ideal,s.optional.push(u),u={},u[d("max",c)]=l.ideal,s.optional.push(u)):(u[d("",c)]=l.ideal,s.optional.push(u))}l.exact!==void 0&&typeof l.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[d("",c)]=l.exact):["min","max"].forEach(u=>{l[u]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[d(u,c)]=l[u])})}),a.advanced&&(s.optional=(s.optional||[]).concat(a.advanced)),s},i=function(a,s){if(t.version>=61)return s(a);if((a=JSON.parse(JSON.stringify(a)))&&typeof a.audio=="object"){let c=function(l,d,u){d in l&&!(u in l)&&(l[u]=l[d],delete l[d])};c((a=JSON.parse(JSON.stringify(a))).audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=n(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});let l=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||l)){let d;if(delete a.video.facingMode,c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:c.exact!=="user"&&c.ideal!=="user"||(d=["front"]),d)return r.mediaDevices.enumerateDevices().then(u=>{let p=(u=u.filter(f=>f.kind==="videoinput")).find(f=>d.some(m=>{var g;return pe(g=f.label.toLowerCase()).call(g,m)}));return!p&&u.length&&pe(d).call(d,"back")&&(p=u[u.length-1]),p&&(a.video.deviceId=c.exact?{exact:p.deviceId}:{ideal:p.deviceId}),a.video=n(a.video),z5("chrome: "+JSON.stringify(a)),s(a)})}a.video=n(a.video)}return z5("chrome: "+JSON.stringify(a)),s(a)},o=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=(function(a,s,c){i(a,l=>{r.webkitGetUserMedia(l,s,d=>{c&&c(o(d))})})}).bind(r),r.mediaDevices.getUserMedia){let a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(s){return i(s,c=>a(c).then(l=>{if(c.audio&&!l.getAudioTracks().length||c.video&&!l.getVideoTracks().length)throw l.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return l},l=>de.reject(o(l))))}}}function uX(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function hX(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===n.track.id):{track:n.track};let o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===n.id):{track:n};let o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Sh(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function pX(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){let t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};let i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,s){let c=i.apply(this,arguments);return c||(c=t(this,a),this._senders.push(c)),c};let o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);let s=this._senders.indexOf(a);s!==-1&&this._senders.splice(s,1)}}let r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(o=>{this._senders.push(t(this,o))})};let n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(o=>{let a=this._senders.find(s=>s.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){let t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){let r=t.apply(this,[]);return r.forEach(n=>n._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function fX(e){if(!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[r,n,i]=arguments;if(arguments.length>0&&typeof r=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof r!="function"))return t.apply(this,[]);let o=function(s){let c={};return s.result().forEach(l=>{let d={id:l.id,timestamp:l.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[l.type]||l.type};l.names().forEach(u=>{d[u]=l.stat(u)}),c[d.id]=d}),c},a=function(s){return new Map(Object.keys(s).map(c=>[c,s[c]]))};if(arguments.length>=2){let s=function(c){n(a(o(c)))};return t.apply(this,[s,r])}return new de((s,c)=>{t.apply(this,[function(l){s(a(o(l)))},c])}).then(n,i)}}function mX(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){let r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){let i=r.apply(this,[]);return i.forEach(o=>o._pc=this),i});let n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){let i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){let i=this;return this._pc.getStats().then(o=>zU(o,i.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){let r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){let n=r.apply(this,[]);return n.forEach(i=>i._pc=this),n}),Sh(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){let n=this;return this._pc.getStats().then(i=>zU(i,n.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;let t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){let r=arguments[0],n,i,o;return this.getSenders().forEach(a=>{a.track===r&&(n?o=!0:n=a)}),this.getReceivers().forEach(a=>(a.track===r&&(i?o=!0:i=a),a.track===r)),o||n&&i?de.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():i?i.getStats():de.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function gX(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};let s=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(s)===-1&&this._shimmedLocalStreams[a.id].push(s):this._shimmedLocalStreams[a.id]=[a,s],s};let r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(l=>l.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});let a=this.getSenders();r.apply(this,arguments);let s=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(s)};let n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],n.apply(this,arguments)};let i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{let s=this._shimmedLocalStreams[a].indexOf(o);s!==-1&&this._shimmedLocalStreams[a].splice(s,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function yX(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return gX(e);let r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){let c=r.apply(this);return this._reverseStreams=this._reverseStreams||{},c.map(l=>this._reverseStreams[l.id])};let n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(c){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[c.id]){let l=new e.MediaStream(c.getTracks());this._streams[c.id]=l,this._reverseStreams[l.id]=c,c=l}n.apply(this,[c])};let i=e.RTCPeerConnection.prototype.removeStream;function o(c,l){let d=l.sdp;return Object.keys(c._reverseStreams||[]).forEach(u=>{let p=c._reverseStreams[u],f=c._streams[p.id];d=d.replace(new RegExp(f.id,"g"),p.id)}),new RTCSessionDescription({type:l.type,sdp:d})}e.RTCPeerConnection.prototype.removeStream=function(c){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[c.id]||c]),delete this._reverseStreams[this._streams[c.id]?this._streams[c.id].id:c.id],delete this._streams[c.id]},e.RTCPeerConnection.prototype.addTrack=function(c,l){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");let d=[].slice.call(arguments,1);if(d.length!==1||!d[0].getTracks().find(p=>p===c))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(p=>p.track===c))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};let u=this._streams[l.id];if(u)u.addTrack(c),de.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{let p=new e.MediaStream([c]);this._streams[l.id]=p,this._reverseStreams[p.id]=l,this.addStream(p)}return this.getSenders().find(p=>p.track===c)},["createOffer","createAnswer"].forEach(function(c){let l=e.RTCPeerConnection.prototype[c],d={[c](){let u=arguments;return arguments.length&&typeof arguments[0]=="function"?l.apply(this,[p=>{let f=o(this,p);u[0].apply(null,[f])},p=>{u[1]&&u[1].apply(null,p)},arguments[2]]):l.apply(this,arguments).then(p=>o(this,p))}};e.RTCPeerConnection.prototype[c]=d[c]});let a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(c,l){let d=l.sdp;return Object.keys(c._reverseStreams||[]).forEach(u=>{let p=c._reverseStreams[u],f=c._streams[p.id];d=d.replace(new RegExp(p.id,"g"),f.id)}),new RTCSessionDescription({type:l.type,sdp:d})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};let s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){let c=s.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!c._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(c._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let l;this._streams=this._streams||{},Object.keys(this._streams).forEach(d=>{this._streams[d].getTracks().find(u=>c.track===u)&&(l=this._streams[d])}),l&&(l.getTracks().length===1?this.removeStream(this._reverseStreams[l.id]):l.removeTrack(c.track),this.dispatchEvent(new Event("negotiationneeded")))}}function mN(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){let n=e.RTCPeerConnection.prototype[r],i={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=i[r]})}function vX(e,t){Sh(e,"negotiationneeded",r=>{let n=r.target;if(!(t.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")||n.signalingState==="stable")return r})}var K5=Object.freeze({__proto__:null,fixNegotiationNeeded:vX,shimAddTrackRemoveTrack:yX,shimAddTrackRemoveTrackWithNative:gX,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(typeof t=="function"?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(n=>{let i=r.video&&r.video.width,o=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:a||3}},i&&(r.video.mandatory.maxWidth=i),o&&(r.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(r)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:pX,shimGetStats:fX,shimGetUserMedia:dX,shimMediaStream:uX,shimOnTrack:hX,shimPeerConnection:mN,shimSenderReceiverGetStats:mX});function EX(e,t){let r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(i,o,a){aD("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(i).then(o,a)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){let i=function(a,s,c){s in a&&!(c in a)&&(a[c]=a[s],delete a[s])},o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a.audio,"autoGainControl","mozAutoGainControl"),i(a.audio,"noiseSuppression","mozNoiseSuppression")),o(a)},n&&n.prototype.getSettings){let a=n.prototype.getSettings;n.prototype.getSettings=function(){let s=a.apply(this,arguments);return i(s,"mozAutoGainControl","autoGainControl"),i(s,"mozNoiseSuppression","noiseSuppression"),s}}if(n&&n.prototype.applyConstraints){let a=n.prototype.applyConstraints;n.prototype.applyConstraints=function(s){return this.kind==="audio"&&typeof s=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s,"autoGainControl","mozAutoGainControl"),i(s,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[s])}}}}function _X(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function gN(e,t){if(typeof e!="object"||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){let o=e.RTCPeerConnection.prototype[i],a={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=a[i]});let r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[i,o,a]=arguments;return n.apply(this,[i||null]).then(s=>{if(t.version<53&&!o)try{s.forEach(c=>{c.type=r[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;s.forEach((l,d)=>{s.set(d,Object.assign({},l,{type:r[l.type]||l.type}))})}return s}).then(o,a)}}function bX(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;let t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){let n=t.apply(this,[]);return n.forEach(i=>i._pc=this),n});let r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){let n=r.apply(this,arguments);return n._pc=this,n}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):de.resolve(new Map)}}function wX(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;let t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){let r=t.apply(this,[]);return r.forEach(n=>n._pc=this),r}),Sh(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function SX(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(t){aD("removeStream","removeTrack"),this.getSenders().forEach(r=>{var n;r.track&&pe(n=t.getTracks()).call(n,r.track)&&this.removeTrack(r)})})}function TX(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function CX(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];let n=r.length>0;n&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});let i=t.apply(this,arguments);if(n){let{sender:o}=i,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return i})}function RX(e){if(typeof e!="object"||!e.RTCRtpSender)return;let t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){let r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function IX(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?de.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function xX(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?de.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var q5=Object.freeze({__proto__:null,shimAddTransceiver:CX,shimCreateAnswer:xX,shimCreateOffer:IX,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){let n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,de.reject(n)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})},shimGetParameters:RX,shimGetUserMedia:EX,shimOnTrack:_X,shimPeerConnection:gN,shimRTCDataChannel:TX,shimReceiverGetStats:wX,shimRemoveStream:SX,shimSenderGetStats:bX});function AX(e){if(typeof e=="object"&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){var n;this._localStreams||(this._localStreams=[]),pe(n=this._localStreams).call(n,r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i&&i.forEach(a=>{var s;this._localStreams?pe(s=this._localStreams).call(s,a)||this._localStreams.push(a):this._localStreams=[a]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);let r=this._localStreams.indexOf(t);if(r===-1)return;this._localStreams.splice(r,1);let n=t.getTracks();this.getSenders().forEach(i=>{pe(n).call(n,i.track)&&this.removeTrack(i)})})}}function NX(e){if(typeof e=="object"&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(i=>{var o;if(this._remoteStreams||(this._remoteStreams=[]),pe(o=this._remoteStreams).call(o,i))return;this._remoteStreams.push(i);let a=new Event("addstream");a.stream=i,this.dispatchEvent(a)})})}});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){let r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(i=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(i)>=0)return;r._remoteStreams.push(i);let o=new Event("addstream");o.stream=i,r.dispatchEvent(o)})}),t.apply(r,arguments)}}}function OX(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(c,l){let d=arguments.length>=2?arguments[2]:arguments[0],u=r.apply(this,[d]);return l?(u.then(c,l),de.resolve()):u},t.createAnswer=function(c,l){let d=arguments.length>=2?arguments[2]:arguments[0],u=n.apply(this,[d]);return l?(u.then(c,l),de.resolve()):u};let s=function(c,l,d){let u=i.apply(this,[c]);return d?(u.then(l,d),de.resolve()):u};t.setLocalDescription=s,s=function(c,l,d){let u=o.apply(this,[c]);return d?(u.then(l,d),de.resolve()):u},t.setRemoteDescription=s,s=function(c,l,d){let u=a.apply(this,[c]);return d?(u.then(l,d),de.resolve()):u},t.addIceCandidate=s}function kX(e){let t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){let r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=i=>n(PX(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,n,i){t.mediaDevices.getUserMedia(r).then(n,i)}).bind(t))}function PX(e){return e&&e.video!==void 0?Object.assign({},e,{video:yY(e.video)}):e}function DX(e){if(!e.RTCPeerConnection)return;let t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,n){if(r&&r.iceServers){let i=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(aD("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,i.push(a)):i.push(r.iceServers[o])}r.iceServers=i}return new t(r,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function LX(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function MX(e){let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){r.offerToReceiveAudio!==void 0&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);let n=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):r.offerToReceiveAudio!==!0||n||this.addTransceiver("audio",{direction:"recvonly"}),r.offerToReceiveVideo!==void 0&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);let i=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveVideo!==!0||i||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function jX(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Y5=Object.freeze({__proto__:null,shimAudioContext:jX,shimCallbacksAPI:OX,shimConstraints:PX,shimCreateOfferLegacy:MX,shimGetUserMedia:kX,shimLocalStreamsAPI:AX,shimRTCIceServerUrls:DX,shimRemoteStreamsAPI:NX,shimTrackEventTransceiver:LX}),UX=`	
\v\f\r                　\u2028\u2029\uFEFF`,SNe=sm,TNe=wa,yN=UX,X5=$r("".replace),CNe=RegExp("^["+yN+"]+"),RNe=RegExp("(^|[^"+yN+"])["+yN+"]+$"),wR=function(e){return function(t){var r=TNe(SNe(t));return 1&e&&(r=X5(r,CNe,"")),2&e&&(r=X5(r,RNe,"$1")),r}},INe={start:wR(1),end:wR(2),trim:wR(3)},xNe=AY.PROPER,ANe=Yr,J5=UX,NNe=INe.trim;Yt({target:"String",proto:!0,forced:function(e){return ANe(function(){return!!J5[e]()||"​᠎"[e]()!=="​᠎"||xNe&&J5[e].name!==e})}("trim")},{trim:function(){return NNe(this)}});var ONe=ss("String").trim,kNe=Ii,PNe=ONe,SR=String.prototype,DNe=function(e){var t=e.trim;return typeof e=="string"||e===SR||kNe(SR,e)&&t===SR.trim?PNe:t},li=Nr(DNe),FX={exports:{}};(function(e){let t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},t.splitSections=function(r){return r.split(`
m=`).map((n,i)=>(i>0?"m="+n:n).trim()+`\r
`)},t.getDescription=function(r){let n=t.splitSections(r);return n&&n[0]},t.getMediaSections=function(r){let n=t.splitSections(r);return n.shift(),n},t.matchPrefix=function(r,n){return t.splitLines(r).filter(i=>i.indexOf(n)===0)},t.parseCandidate=function(r){let n;n=r.indexOf("a=candidate:")===0?r.substring(12).split(" "):r.substring(10).split(" ");let i={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let o=8;o<n.length;o+=2)switch(n[o]){case"raddr":i.relatedAddress=n[o+1];break;case"rport":i.relatedPort=parseInt(n[o+1],10);break;case"tcptype":i.tcpType=n[o+1];break;case"ufrag":i.ufrag=n[o+1],i.usernameFragment=n[o+1];break;default:i[n[o]]===void 0&&(i[n[o]]=n[o+1])}return i},t.writeCandidate=function(r){let n=[];n.push(r.foundation);let i=r.component;i==="rtp"?n.push(1):i==="rtcp"?n.push(2):n.push(i),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);let o=r.type;return n.push("typ"),n.push(o),o!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},t.parseIceOptions=function(r){return r.substring(14).split(" ")},t.parseRtpMap=function(r){let n=r.substring(9).split(" "),i={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),i.name=n[0],i.clockRate=parseInt(n[1],10),i.channels=n.length===3?parseInt(n[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);let i=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(r){let n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},t.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},t.parseFmtp=function(r){let n={},i,o=r.substring(r.indexOf(" ")+1).split(";");for(let a=0;a<o.length;a++)i=o[a].trim().split("="),n[i[0].trim()]=i[1];return n},t.writeFmtp=function(r){let n="",i=r.payloadType;if(r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){let o=[];Object.keys(r.parameters).forEach(a=>{r.parameters[a]!==void 0?o.push(a+"="+r.parameters[a]):o.push(a)}),n+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return n},t.parseRtcpFb=function(r){let n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},t.writeRtcpFb=function(r){let n="",i=r.payloadType;return r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(o=>{n+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),n},t.parseSsrcMedia=function(r){let n=r.indexOf(" "),i={ssrc:parseInt(r.substring(7,n),10)},o=r.indexOf(":",n);return o>-1?(i.attribute=r.substring(n+1,o),i.value=r.substring(o+1)):i.attribute=r.substring(n+1),i},t.parseSsrcGroup=function(r){let n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(i=>parseInt(i,10))}},t.getMid=function(r){let n=t.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(r){let n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},t.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:t.matchPrefix(r+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(r,n){let i="a=setup:"+n+`\r
`;return r.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(r){let n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},t.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?t.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;let n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},t.getCryptoParameters=function(r,n){return t.matchPrefix(r+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(r,n){let i=t.matchPrefix(r+n,"a=ice-ufrag:")[0],o=t.matchPrefix(r+n,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},t.parseRtpParameters=function(r){let n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(r)[0].split(" ");n.profile=i[2];for(let a=3;a<i.length;a++){let s=i[a],c=t.matchPrefix(r,"a=rtpmap:"+s+" ")[0];if(c){let l=t.parseRtpMap(c),d=t.matchPrefix(r,"a=fmtp:"+s+" ");switch(l.parameters=d.length?t.parseFmtp(d[0]):{},l.rtcpFeedback=t.matchPrefix(r,"a=rtcp-fb:"+s+" ").map(t.parseRtcpFb),n.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(l.name.toUpperCase())}}}t.matchPrefix(r,"a=extmap:").forEach(a=>{n.headerExtensions.push(t.parseExtmap(a))});let o=t.matchPrefix(r,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach(a=>{o.forEach(s=>{a.rtcpFeedback.find(c=>c.type===s.type&&c.parameter===s.parameter)||a.rtcpFeedback.push(s)})}),n},t.writeRtpDescription=function(r,n){let i="";i+="m="+r+" ",i+=n.codecs.length>0?"9":"0",i+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=n.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(a=>{i+=t.writeRtpMap(a),i+=t.writeFmtp(a),i+=t.writeRtcpFb(a)});let o=0;return n.codecs.forEach(a=>{a.maxptime>o&&(o=a.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(a=>{i+=t.writeExtmap(a)}),i},t.parseRtpEncodingParameters=function(r){let n=[],i=t.parseRtpParameters(r),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=t.matchPrefix(r,"a=ssrc:").map(p=>t.parseSsrcMedia(p)).filter(p=>p.attribute==="cname"),c=s.length>0&&s[0].ssrc,l,d=t.matchPrefix(r,"a=ssrc-group:FID").map(p=>p.substring(17).split(" ").map(f=>parseInt(f,10)));d.length>0&&d[0].length>1&&d[0][0]===c&&(l=d[0][1]),i.codecs.forEach(p=>{if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){let f={ssrc:c,codecPayloadType:parseInt(p.parameters.apt,10)};c&&l&&(f.rtx={ssrc:l}),n.push(f),o&&(f=JSON.parse(JSON.stringify(f)),f.fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},n.push(f))}}),n.length===0&&c&&n.push({ssrc:c});let u=t.matchPrefix(r,"b=");return u.length&&(u=u[0].indexOf("b=TIAS:")===0?parseInt(u[0].substring(7),10):u[0].indexOf("b=AS:")===0?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,n.forEach(p=>{p.maxBitrate=u})),n},t.parseRtcpParameters=function(r){let n={},i=t.matchPrefix(r,"a=ssrc:").map(s=>t.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);let o=t.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=o.length===0;let a=t.matchPrefix(r,"a=rtcp-mux");return n.mux=a.length>0,n},t.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},t.parseMsid=function(r){let n,i=t.matchPrefix(r,"a=msid:");if(i.length===1)return n=i[0].substring(7).split(" "),{stream:n[0],track:n[1]};let o=t.matchPrefix(r,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");return o.length>0?(n=o[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(r){let n=t.parseMLine(r),i=t.matchPrefix(r,"a=max-message-size:"),o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);let a=t.matchPrefix(r,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:n.fmt,maxMessageSize:o};let s=t.matchPrefix(r,"a=sctpmap:");if(s.length>0){let c=s[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:o}}},t.writeSctpDescription=function(r,n){let i=[];return i=r.protocol!=="DTLS/SCTP"?["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&i.push("a=max-message-size:"+n.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(r,n,i){let o,a=n!==void 0?n:2;return o=r||t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(r,n){let i=t.splitLines(r);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(r){return t.splitLines(r)[0].split(" ")[0].substring(2)},t.isRejected=function(r){return r.split(" ",2)[1]==="0"},t.parseMLine=function(r){let n=t.splitLines(r)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(r){let n=t.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;let n=t.splitLines(r);for(let i=0;i<n.length;i++)if(n[i].length<2||n[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(FX);var VX=FX.exports,Jp=Nr(VX),LNe=tSe({__proto__:null,default:Jp},[VX]);function s_(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;let t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&((r=JSON.parse(JSON.stringify(r))).candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){let n=new t(r),i=Jp.parseCandidate(r.candidate),o=Object.assign(n,i);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Sh(e,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new e.RTCIceCandidate(r.candidate),writable:"false"}),r))}function vN(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Sh(e,"icecandidate",t=>{if(t.candidate){let r=Jp.parseCandidate(t.candidate.candidate);r.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return t})}function c_(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});let r=function(s){if(!s||!s.sdp)return!1;let c=Jp.splitSections(s.sdp);return c.shift(),c.some(l=>{let d=Jp.parseMLine(l);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},n=function(s){let c=s.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;let l=parseInt(c[1],10);return l!=l?-1:l},i=function(s){let c=65536;return t.browser==="firefox"&&(c=t.version<57?s===-1?16384:2147483637:t.version<60?t.version===57?65535:65536:2147483637),c},o=function(s,c){let l=65536;t.browser==="firefox"&&t.version===57&&(l=65535);let d=Jp.matchPrefix(s.sdp,"a=max-message-size:");return d.length>0?l=parseInt(d[0].substr(19),10):t.browser==="firefox"&&c!==-1&&(l=2147483637),l},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){let{sdpSemantics:s}=this.getConfiguration();s==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){let s=n(arguments[0]),c=i(s),l=o(arguments[0],s),d;d=c===0&&l===0?Number.POSITIVE_INFINITY:c===0||l===0?Math.max(c,l):Math.min(c,l);let u={};Object.defineProperty(u,"maxMessageSize",{get:()=>d}),this._sctp=u}return a.apply(this,arguments)}}function l_(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(n,i){let o=n.send;n.send=function(){let a=arguments[0],s=a.length||a.size||a.byteLength;if(n.readyState==="open"&&i.sctp&&s>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(n,arguments)}}let r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){let n=r.apply(this,arguments);return t(n,this),n},Sh(e,"datachannel",n=>(t(n.channel,n.target),n))}function EN(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;let t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{let n=t[r];t[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{let o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;let a=new Event("connectionstatechange",i);o.dispatchEvent(a)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function _N(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;let r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){let i=n.sdp.split(`
`).filter(o=>li(o).call(o)!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&n instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:n.type,sdp:i}):n.sdp=i}return r.apply(this,arguments)}}function d_(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;let r=e.RTCPeerConnection.prototype.addIceCandidate;r&&r.length!==0&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?de.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),de.resolve())})}function u_(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;let r=e.RTCPeerConnection.prototype.setLocalDescription;r&&r.length!==0&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let n=arguments[0]||{};if(typeof n!="object"||n.type&&n.sdp)return r.apply(this,arguments);if(n={type:n.type,sdp:n.sdp},!n.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":n.type="offer";break;default:n.type="answer"}return n.sdp||n.type!=="offer"&&n.type!=="answer"?r.apply(this,[n]):(n.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(i=>r.apply(this,[i]))})}var MNe=Object.freeze({__proto__:null,removeExtmapAllowMixed:_N,shimAddIceCandidateNullOrEmpty:d_,shimConnectionState:EN,shimMaxMessageSize:c_,shimParameterlessSetLocalDescription:u_,shimRTCIceCandidate:s_,shimRTCIceCandidateRelayProtocol:vN,shimSendThrowTypeError:l_});(function(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},r=gY,n=function(o){let a={browser:null,version:null};if(o===void 0||!o.navigator)return a.browser="Not a browser.",a;let{navigator:s}=o;if(s.mozGetUserMedia)a.browser="firefox",a.version=Hv(s.userAgent,/Firefox\/(\d+)\./,1);else if(s.webkitGetUserMedia||o.isSecureContext===!1&&o.webkitRTCPeerConnection)a.browser="chrome",a.version=Hv(s.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!o.RTCPeerConnection||!s.userAgent.match(/AppleWebKit\/(\d+)\./))return a.browser="Not a supported browser.",a;a.browser="safari",a.version=Hv(s.userAgent,/AppleWebKit\/(\d+)\./,1),a.supportsUnifiedPlan=o.RTCRtpTransceiver&&"currentDirection"in o.RTCRtpTransceiver.prototype}return a}(e),i={browserDetails:n,commonShim:MNe,extractVersion:Hv,disableLog:DCe,disableWarnings:LCe,sdp:LNe};switch(n.browser){case"chrome":if(!K5||!mN||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),i;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),i;r("adapter.js shimming chrome."),i.browserShim=K5,d_(e,n),u_(e),dX(e,n),uX(e),mN(e,n),hX(e),yX(e,n),pX(e),fX(e),mX(e),vX(e,n),s_(e),vN(e),EN(e),c_(e,n),l_(e),_N(e,n);break;case"firefox":if(!q5||!gN||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),i;r("adapter.js shimming firefox."),i.browserShim=q5,d_(e,n),u_(e),EX(e,n),gN(e,n),_X(e),SX(e),bX(e),wX(e),TX(e),CX(e),RX(e),IX(e),xX(e),s_(e),EN(e),c_(e,n),l_(e);break;case"safari":if(!Y5||!t.shimSafari)return r("Safari shim is not included in this adapter release."),i;r("adapter.js shimming safari."),i.browserShim=Y5,d_(e,n),u_(e),DX(e),MX(e),OX(e),AX(e),NX(e),LX(e),kX(e),jX(e),s_(e),vN(e),c_(e,n),l_(e),_N(e,n);break;default:r("Unsupported browser!")}})({window:typeof window>"u"?void 0:window});var jNe=ss("Array").keys,UNe=Rc,FNe=qn,VNe=Ii,BNe=jNe,TR=Array.prototype,$Ne={DOMTokenList:!0,NodeList:!0},HNe=function(e){var t=e.keys;return e===TR||VNe(TR,e)&&t===TR.keys||FNe($Ne,UNe(e))?BNe:t},So=Nr(HNe),Q5=lm,WNe=TypeError,GNe=$S,zNe=as,KNe=Ud,ZS=function(e,t,r){var n=GNe(t);n in e?zNe.f(e,n,KNe(0,r)):e[n]=r},Z5=nD,qNe=El,YNe=ZS,XNe=Array,JNe=Math.max,wD=function(e,t,r){for(var n=qNe(e),i=Z5(t,n),o=Z5(r===void 0?n:r,n),a=XNe(JNe(o-i,0)),s=0;i<o;i++,s++)YNe(a,s,e[i]);return a.length=s,a},e4=wD,QNe=Math.floor,bN=function(e,t){var r=e.length,n=QNe(r/2);return r<8?ZNe(e,t):eOe(e,bN(e4(e,0,n),t),bN(e4(e,n),t),t)},ZNe=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},eOe=function(e,t,r,n){for(var i=t.length,o=r.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?n(t[a],r[s])<=0?t[a++]:r[s++]:a<i?t[a++]:r[s++];return e},BX=bN,t4=wh.match(/firefox\/(\d+)/i),tOe=!!t4&&+t4[1],rOe=/MSIE|Trident/.test(wh),r4=wh.match(/AppleWebKit\/(\d+)\./),nOe=!!r4&&+r4[1],iOe=Yt,$X=$r,oOe=os,aOe=Cc,n4=El,sOe=function(e,t){if(!delete e[t])throw WNe("Cannot delete property "+Q5(t)+" of "+Q5(e))},i4=wa,SD=Yr,cOe=BX,lOe=HS,o4=tOe,dOe=rOe,a4=rh,s4=nOe,rd=[],c4=$X(rd.sort),uOe=$X(rd.push),hOe=SD(function(){rd.sort(void 0)}),pOe=SD(function(){rd.sort(null)}),fOe=lOe("sort"),l4=!SD(function(){if(a4)return a4<70;if(!(o4&&o4>3)){if(dOe)return!0;if(s4)return s4<603;var e,t,r,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)rd.push({k:t+n,v:r})}for(rd.sort(function(o,a){return a.v-o.v}),n=0;n<rd.length;n++)t=rd[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return i!=="DGBEFHACIJK"}});iOe({target:"Array",proto:!0,forced:hOe||!pOe||!fOe||!l4},{sort:function(e){e!==void 0&&oOe(e);var t=aOe(this);if(l4)return e===void 0?c4(t):c4(t,e);var r,n,i=[],o=n4(t);for(n=0;n<o;n++)n in t&&uOe(i,t[n]);for(cOe(i,function(a){return function(s,c){return c===void 0?-1:s===void 0?1:a!==void 0?+a(s,c)||0:i4(s)>i4(c)?1:-1}}(e)),r=n4(i),n=0;n<r;)t[n]=i[n++];for(;n<o;)sOe(t,n++);return t}});var CR,RR,mOe=ss("Array").sort,gOe=Ii,yOe=mOe,IR=Array.prototype,vOe=function(e){var t=e.sort;return e===IR||gOe(IR,e)&&t===IR.sort?yOe:t},Gy=Nr(vOe),wN={exports:{}};CR=wN,RR=wN.exports,function(e,t){var r="function",n="undefined",i="object",o="string",a="major",s="model",c="name",l="type",d="vendor",u="version",p="architecture",f="console",m="mobile",g="tablet",y="smarttv",v="wearable",E="embedded",w="Amazon",S="Apple",x="ASUS",O="BlackBerry",L="Browser",j="Chrome",W="Firefox",V="Google",Y="Huawei",Z="LG",te="Microsoft",H="Motorola",$="Opera",K="Samsung",A="Sharp",N="Sony",F="Xiaomi",P="Zebra",_="Facebook",R="Chromium OS",k="Mac OS",z=function(Je){for(var bt={},Ce=0;Ce<Je.length;Ce++)bt[Je[Ce].toUpperCase()]=Je[Ce];return bt},U=function(Je,bt){return typeof Je===o&&q(bt).indexOf(q(Je))!==-1},q=function(Je){return Je.toLowerCase()},oe=function(Je,bt){if(typeof Je===o)return Je=Je.replace(/^\s\s*/,""),typeof bt===n?Je:Je.substring(0,350)},ue=function(Je,bt){for(var Ce,et,Be,qe,ze,ee,xe=0;xe<bt.length&&!ze;){var Le=bt[xe],Ge=bt[xe+1];for(Ce=et=0;Ce<Le.length&&!ze&&Le[Ce];)if(ze=Le[Ce++].exec(Je))for(Be=0;Be<Ge.length;Be++)ee=ze[++et],typeof(qe=Ge[Be])===i&&qe.length>0?qe.length===2?typeof qe[1]==r?this[qe[0]]=qe[1].call(this,ee):this[qe[0]]=qe[1]:qe.length===3?typeof qe[1]!==r||qe[1].exec&&qe[1].test?this[qe[0]]=ee?ee.replace(qe[1],qe[2]):t:this[qe[0]]=ee?qe[1].call(this,ee,qe[2]):t:qe.length===4&&(this[qe[0]]=ee?qe[3].call(this,ee.replace(qe[1],qe[2])):t):this[qe]=ee||t;xe+=2}},me=function(Je,bt){for(var Ce in bt)if(typeof bt[Ce]===i&&bt[Ce].length>0){for(var et=0;et<bt[Ce].length;et++)if(U(bt[Ce][et],Je))return Ce==="?"?t:Ce}else if(U(bt[Ce],Je))return Ce==="?"?t:Ce;return Je},De={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},We={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[u,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[u,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,u],[/opios[\/ ]+([\w\.]+)/i],[u,[c,$+" Mini"]],[/\bopr\/([\w\.]+)/i],[u,[c,$]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,u],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[u,[c,"UC"+L]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[u,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[u,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[u,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[u,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[u,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+L],u],[/\bfocus\/([\w\.]+)/i],[u,[c,W+" Focus"]],[/\bopt\/([\w\.]+)/i],[u,[c,$+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[u,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[u,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[u,[c,$+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[u,[c,"MIUI "+L]],[/fxios\/([-\w\.]+)/i],[u,[c,W]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 "+L]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 "+L],u],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],u],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[c,u],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,_],u],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[c,u],[/\bgsa\/([\w\.]+) .*safari\//i],[u,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[u,[c,j+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,j+" WebView"],u],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[u,[c,"Android "+L]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,u],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[u,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[u,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[u,me,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,u],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],u],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[u,[c,W+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[c,u],[/(cobalt)\/([\w\.]+)/i],[c,[u,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,q]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[s,[d,K],[l,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[s,[d,K],[l,m]],[/\((ip(?:hone|od)[\w ]*);/i],[s,[d,S],[l,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[s,[d,S],[l,g]],[/(macintosh);/i],[s,[d,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[s,[d,A],[l,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[s,[d,Y],[l,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[s,[d,Y],[l,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[s,/_/g," "],[d,F],[l,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[s,/_/g," "],[d,F],[l,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[s,[d,"OPPO"],[l,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[s,[d,"Vivo"],[l,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[s,[d,"Realme"],[l,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[s,[d,H],[l,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[s,[d,H],[l,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[s,[d,Z],[l,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[s,[d,Z],[l,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[s,[d,"Lenovo"],[l,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[s,/_/g," "],[d,"Nokia"],[l,m]],[/(pixel c)\b/i],[s,[d,V],[l,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[s,[d,V],[l,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[d,N],[l,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[s,"Xperia Tablet"],[d,N],[l,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[s,[d,"OnePlus"],[l,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[s,[d,w],[l,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[s,/(.+)/g,"Fire Phone $1"],[d,w],[l,m]],[/(playbook);[-\w\),; ]+(rim)/i],[s,d,[l,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[s,[d,O],[l,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[s,[d,x],[l,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[s,[d,x],[l,m]],[/(nexus 9)/i],[s,[d,"HTC"],[l,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[s,/_/g," "],[l,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[s,[d,"Acer"],[l,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[s,[d,"Meizu"],[l,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,s,[l,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,s,[l,g]],[/(surface duo)/i],[s,[d,te],[l,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[s,[d,"Fairphone"],[l,m]],[/(u304aa)/i],[s,[d,"AT&T"],[l,m]],[/\bsie-(\w*)/i],[s,[d,"Siemens"],[l,m]],[/\b(rct\w+) b/i],[s,[d,"RCA"],[l,g]],[/\b(venue[\d ]{2,7}) b/i],[s,[d,"Dell"],[l,g]],[/\b(q(?:mv|ta)\w+) b/i],[s,[d,"Verizon"],[l,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[s,[d,"Barnes & Noble"],[l,g]],[/\b(tm\d{3}\w+) b/i],[s,[d,"NuVision"],[l,g]],[/\b(k88) b/i],[s,[d,"ZTE"],[l,g]],[/\b(nx\d{3}j) b/i],[s,[d,"ZTE"],[l,m]],[/\b(gen\d{3}) b.+49h/i],[s,[d,"Swiss"],[l,m]],[/\b(zur\d{3}) b/i],[s,[d,"Swiss"],[l,g]],[/\b((zeki)?tb.*\b) b/i],[s,[d,"Zeki"],[l,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],s,[l,g]],[/\b(ns-?\w{0,9}) b/i],[s,[d,"Insignia"],[l,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[s,[d,"NextBook"],[l,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],s,[l,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],s,[l,m]],[/\b(ph-1) /i],[s,[d,"Essential"],[l,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[s,[d,"Envizen"],[l,g]],[/\b(trio[-\w\. ]+) b/i],[s,[d,"MachSpeed"],[l,g]],[/\btu_(1491) b/i],[s,[d,"Rotor"],[l,g]],[/(shield[\w ]+) b/i],[s,[d,"Nvidia"],[l,g]],[/(sprint) (\w+)/i],[d,s,[l,m]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[d,te],[l,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[s,[d,P],[l,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[s,[d,P],[l,m]],[/smart-tv.+(samsung)/i],[d,[l,y]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[d,K],[l,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,Z],[l,y]],[/(apple) ?tv/i],[d,[s,S+" TV"],[l,y]],[/crkey/i],[[s,j+"cast"],[d,V],[l,y]],[/droid.+aft(\w)( bui|\))/i],[s,[d,w],[l,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[s,[d,A],[l,y]],[/(bravia[\w ]+)( bui|\))/i],[s,[d,N],[l,y]],[/(mitv-\w{5}) bui/i],[s,[d,F],[l,y]],[/Hbbtv.*(technisat) (.*);/i],[d,s,[l,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,oe],[s,oe],[l,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,s,[l,f]],[/droid.+; (shield) bui/i],[s,[d,"Nvidia"],[l,f]],[/(playstation [345portablevi]+)/i],[s,[d,N],[l,f]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[s,[d,te],[l,f]],[/((pebble))app/i],[d,s,[l,v]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[s,[d,S],[l,v]],[/droid.+; (glass) \d/i],[s,[d,V],[l,v]],[/droid.+; (wt63?0{2,3})\)/i],[s,[d,P],[l,v]],[/(quest( 2| pro)?)/i],[s,[d,_],[l,v]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[s,[l,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[s,[l,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,m]],[/(android[-\w\. ]{0,9});.+buil/i],[s,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[u,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[u,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[c,u],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[u,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,u],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[c,[u,me,De]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[c,"Windows"],[u,me,De]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[u,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,k],[u,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[u,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,u],[/\(bb(10);/i],[u,[c,O]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[u,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[u,[c,W+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[u,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[u,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[u,[c,j+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,R],u],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,u],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],u],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[c,u]]},Pe=function(Je,bt){if(typeof Je===i&&(bt=Je,Je=t),!(this instanceof Pe))return new Pe(Je,bt).getResult();var Ce=typeof e!==n&&e.navigator?e.navigator:t,et=Je||(Ce&&Ce.userAgent?Ce.userAgent:""),Be=Ce&&Ce.userAgentData?Ce.userAgentData:t,qe=bt?function(ze,ee){var xe={};for(var Le in ze)ee[Le]&&ee[Le].length%2==0?xe[Le]=ee[Le].concat(ze[Le]):xe[Le]=ze[Le];return xe}(We,bt):We;return this.getBrowser=function(){var ze={};return ze[c]=t,ze[u]=t,ue.call(ze,et,qe.browser),ze[a]=function(ee){return typeof ee===o?ee.replace(/[^\d\.]/g,"").split(".")[0]:t}(ze[u]),Ce&&Ce.brave&&typeof Ce.brave.isBrave==r&&(ze[c]="Brave"),ze},this.getCPU=function(){var ze={};return ze[p]=t,ue.call(ze,et,qe.cpu),ze},this.getDevice=function(){var ze={};return ze[d]=t,ze[s]=t,ze[l]=t,ue.call(ze,et,qe.device),!ze[l]&&Be&&Be.mobile&&(ze[l]=m),ze[s]=="Macintosh"&&Ce&&typeof Ce.standalone!==n&&Ce.maxTouchPoints&&Ce.maxTouchPoints>2&&(ze[s]="iPad",ze[l]=g),ze},this.getEngine=function(){var ze={};return ze[c]=t,ze[u]=t,ue.call(ze,et,qe.engine),ze},this.getOS=function(){var ze={};return ze[c]=t,ze[u]=t,ue.call(ze,et,qe.os),!ze[c]&&Be&&Be.platform!="Unknown"&&(ze[c]=Be.platform.replace(/chrome os/i,R).replace(/macos/i,k)),ze},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return et},this.setUA=function(ze){return et=typeof ze===o&&ze.length>350?oe(ze,350):ze,this},this.setUA(et),this};Pe.VERSION="0.7.34",Pe.BROWSER=z([c,u,a]),Pe.CPU=z([p]),Pe.DEVICE=z([s,d,l,f,m,y,g,v,E]),Pe.ENGINE=Pe.OS=z([c,u]),CR.exports&&(RR=CR.exports=Pe),RR.UAParser=Pe;var it=typeof e!==n&&(e.jQuery||e.Zepto);if(it&&!it.ua){var Rt=new Pe;it.ua=Rt.getResult(),it.ua.get=function(){return Rt.getUA()},it.ua.set=function(Je){Rt.setUA(Je);var bt=Rt.getResult();for(var Ce in bt)it.ua[Ce]=bt[Ce]}}}(typeof window=="object"?window:Yp);var EOe=Nr(wN.exports),_Oe=Rc,bOe=qn,wOe=am,SOe=Th,TOe=Ur("iterator"),COe=Object,ROe=function(e){if(wOe(e))return!1;var t=COe(e);return t[TOe]!==void 0||"@@iterator"in t||bOe(SOe,_Oe(t))},IOe=Nr(ROe),xR=jn;Yt({global:!0,forced:xR.globalThis!==xR},{globalThis:xR});var d4=Nr(jn);function HX(e,t){return function(){return e.apply(t,arguments)}}var{toString:xOe}=Object.prototype,{getPrototypeOf:TD}=Object,Yb=(AR=Object.create(null),e=>{let t=xOe.call(e);return AR[t]||(AR[t]=t.slice(8,-1).toLowerCase())}),AR,xc=e=>(e=e.toLowerCase(),t=>Yb(t)===e),eT=e=>t=>typeof t===e,{isArray:op}=Array,hg=eT("undefined"),u4=xc("ArrayBuffer"),AOe=eT("string"),Aa=eT("function"),h4=eT("number"),Xv=e=>e!==null&&typeof e=="object",Jv=e=>{if(Yb(e)!=="object")return!1;let t=TD(e);return!(t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.toStringTag in e||IOe(e))},NOe=xc("Date"),OOe=xc("File"),kOe=xc("Blob"),POe=xc("FileList"),DOe=xc("URLSearchParams");function pg(e,t){let r,n,{allOwnKeys:i=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e!=null)if(typeof e!="object"&&(e=[e]),op(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{let o=i?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length,s;for(r=0;r<a;r++)s=o[r],t.call(null,e[s],s,e)}}function p4(e,t){t=t.toLowerCase();let r=Object.keys(e),n,i=r.length;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}var WX=d4!==void 0?d4:typeof self<"u"?self:typeof window<"u"?window:global,f4=e=>!hg(e)&&e!==WX,LOe=(NR=typeof Uint8Array<"u"&&TD(Uint8Array),e=>NR&&e instanceof NR),NR,MOe=xc("HTMLFormElement"),m4=(e=>{let{hasOwnProperty:t}=e;return(r,n)=>t.call(r,n)})(Object.prototype),jOe=xc("RegExp"),g4=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};pg(r,(i,o)=>{let a;(a=t(i,o,e))!==!1&&(n[o]=a||i)}),Object.defineProperties(e,n)},OR="abcdefghijklmnopqrstuvwxyz",y4="0123456789",v4={DIGIT:y4,ALPHA:OR,ALPHA_DIGIT:OR+OR.toUpperCase()+y4},UOe=xc("AsyncFunction"),ge={isArray:op,isArrayBuffer:u4,isBuffer:function(e){return e!==null&&!hg(e)&&e.constructor!==null&&!hg(e.constructor)&&Aa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Aa(e.append)&&((t=Yb(e))==="formdata"||t==="object"&&Aa(e.toString)&&e.toString()==="[object FormData]"))},isArrayBufferView:function(e){let t;return t=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&u4(e.buffer),t},isString:AOe,isNumber:h4,isBoolean:e=>e===!0||e===!1,isObject:Xv,isPlainObject:Jv,isUndefined:hg,isDate:NOe,isFile:OOe,isBlob:kOe,isRegExp:jOe,isFunction:Aa,isStream:e=>Xv(e)&&Aa(e.pipe),isURLSearchParams:DOe,isTypedArray:LOe,isFileList:POe,forEach:pg,merge:function e(){let{caseless:t}=f4(this)&&this||{},r={},n=(i,o)=>{let a=t&&p4(r,o)||o;Jv(r[a])&&Jv(i)?r[a]=e(r[a],i):Jv(i)?r[a]=e({},i):op(i)?r[a]=i.slice():r[a]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&pg(arguments[i],n);return r},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return pg(t,(i,o)=>{r&&Aa(i)?e[o]=HX(i,r):e[o]=i},{allOwnKeys:n}),e},trim:e=>li(e)?li(e).call(e):e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,o,a,s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],n&&!n(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=r!==!1&&TD(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Yb,kindOfTest:xc,endsWith:(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return n!==-1&&n===r},toArray:e=>{if(!e)return null;if(op(e))return e;let t=e.length;if(!h4(t))return null;let r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{let r=(e&&e[Symbol.iterator]).call(e),n;for(;(n=r.next())&&!n.done;){let i=n.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let r,n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},isHTMLForm:MOe,hasOwnProperty:m4,hasOwnProp:m4,reduceDescriptors:g4,freezeMethods:e=>{g4(e,(t,r)=>{if(Aa(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=e[r];Aa(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{let r={},n=i=>{i.forEach(o=>{r[o]=!0})};return op(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,n){return r.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:p4,global:WX,isContextDefined:f4,ALPHABET:v4,generateString:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v4.ALPHA_DIGIT,r="",{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r},isSpecCompliantForm:function(e){return!!(e&&Aa(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])},toJSONObject:e=>{let t=new Array(10),r=(n,i)=>{if(Xv(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;let o=op(n)?[]:{};return pg(n,(a,s)=>{let c=r(a,i+1);!hg(c)&&(o[s]=c)}),t[i]=void 0,o}}return n};return r(e,0)},isAsyncFn:UOe,isThenable:e=>e&&(Xv(e)||Aa(e))&&Aa(e.then)&&Aa(e.catch)};function cr(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}ge.inherits(cr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ge.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var E4=cr.prototype,_4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{_4[e]={value:e}}),Object.defineProperties(cr,_4),Object.defineProperty(E4,"isAxiosError",{value:!0}),cr.from=(e,t,r,n,i,o)=>{let a=Object.create(E4);return ge.toFlatObject(e,a,function(s){return s!==Error.prototype},s=>s!=="isAxiosError"),cr.call(a,e.message,t,r,n,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};function kR(e){return ge.isPlainObject(e)||ge.isArray(e)}function GX(e){return ge.endsWith(e,"[]")?e.slice(0,-2):e}function b4(e,t,r){return e?e.concat(t).map(function(n,i){return n=GX(n),!r&&i?"["+n+"]":n}).join(r?".":""):t}var FOe=ge.toFlatObject(ge,{},null,function(e){return/^is[A-Z]/.test(e)});function Xb(e,t,r){if(!ge.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;let n=(r=ge.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,f){return!ge.isUndefined(f[p])})).metaTokens,i=r.visitor||l,o=r.dots,a=r.indexes,s=(r.Blob||typeof Blob<"u"&&Blob)&&ge.isSpecCompliantForm(t);if(!ge.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(ge.isDate(p))return p.toISOString();if(!s&&ge.isBlob(p))throw new cr("Blob is not supported. Use a Buffer instead.");return ge.isArrayBuffer(p)||ge.isTypedArray(p)?s&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function l(p,f,m){let g=p;if(p&&!m&&typeof p=="object"){if(ge.endsWith(f,"{}"))f=n?f:f.slice(0,-2),p=JSON.stringify(p);else if(ge.isArray(p)&&function(y){return ge.isArray(y)&&!y.some(kR)}(p)||(ge.isFileList(p)||ge.endsWith(f,"[]"))&&(g=ge.toArray(p)))return f=GX(f),g.forEach(function(y,v){!ge.isUndefined(y)&&y!==null&&t.append(a===!0?b4([f],v,o):a===null?f:f+"[]",c(y))}),!1}return!!kR(p)||(t.append(b4(m,f,o),c(p)),!1)}let d=[],u=Object.assign(FOe,{defaultVisitor:l,convertValue:c,isVisitable:kR});if(!ge.isObject(e))throw new TypeError("data must be an object");return function p(f,m){if(!ge.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(f),ge.forEach(f,function(g,y){(!(ge.isUndefined(g)||g===null)&&i.call(t,g,ge.isString(y)?li(y).call(y):y,m,u))===!0&&p(g,m?m.concat(y):[y])}),d.pop()}}(e),t}function w4(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function CD(e,t){this._pairs=[],e&&Xb(e,this,t)}var S4=CD.prototype;function VOe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zX(e,t,r){if(!t)return e;let n=r&&r.encode||VOe,i=r&&r.serialize,o;if(o=i?i(t,r):ge.isURLSearchParams(t)?t.toString():new CD(t,r).toString(n),o){let a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}S4.append=function(e,t){this._pairs.push([e,t])},S4.toString=function(e){let t=e?function(r){return e.call(this,r,w4)}:w4;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};var T4=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ge.forEach(this.handlers,function(t){t!==null&&e(t)})}},KX={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qX={exports:{}},BOe=Yt,$Oe=ba,C4=as.f;BOe({target:"Object",stat:!0,forced:Object.defineProperty!==C4,sham:!$Oe},{defineProperty:C4});var YX=Us.Object,HOe=qX.exports=function(e,t,r){return YX.defineProperty(e,t,r)};YX.defineProperty.sham&&(HOe.sham=!0);var XX=Nr(qX.exports),WOe=Tc,zy=Array.isArray||function(e){return WOe(e)=="Array"},GOe=TypeError,R4=zy,zOe=XS,KOe=$o,qOe=Ur("species"),I4=Array,YOe=function(e){var t;return R4(e)&&(t=e.constructor,(zOe(t)&&(t===I4||R4(t.prototype))||KOe(t)&&(t=t[qOe])===null)&&(t=void 0)),t===void 0?I4:t},JX=function(e,t){return new(YOe(e))(t===0?0:t)},XOe=Yr,JOe=rh,QOe=Ur("species"),QX=function(e){return JOe>=51||!XOe(function(){var t=[];return(t.constructor={})[QOe]=function(){return{foo:1}},t[e](Boolean).foo!==1})},ZOe=Yt,eke=Yr,tke=zy,rke=$o,nke=Cc,ike=El,x4=function(e){if(e>9007199254740991)throw GOe("Maximum allowed index exceeded");return e},A4=ZS,oke=JX,ake=QX,ske=rh,ZX=Ur("isConcatSpreadable"),cke=ske>=51||!eke(function(){var e=[];return e[ZX]=!1,e.concat()[0]!==e}),lke=function(e){if(!rke(e))return!1;var t=e[ZX];return t!==void 0?!!t:tke(e)};ZOe({target:"Array",proto:!0,arity:1,forced:!cke||!ake("concat")},{concat:function(e){var t,r,n,i,o,a=nke(this),s=oke(a,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(lke(o=t===-1?a:arguments[t]))for(i=ike(o),x4(c+i),r=0;r<i;r++,c++)r in o&&A4(s,c,o[r]);else x4(c+1),A4(s,c++,o);return s.length=c,s}});var eJ={},dke=Tc,uke=Fd,N4=GS.f,hke=wD,O4=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];eJ.f=function(e){return O4&&dke(e)=="Window"?function(t){try{return N4(t)}catch{return hke(O4)}}(e):N4(uke(e))};var hm={},pke=Ur;hm.f=pke;var k4=Us,fke=qn,mke=hm,gke=as.f,On=function(e){var t=k4.Symbol||(k4.Symbol={});fke(t,e)||gke(t,e,{value:mke.f(e)})},yke=Fn,vke=go,Eke=Ur,_ke=$d,tJ=function(){var e=vke("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=Eke("toPrimitive");t&&!t[n]&&_ke(t,n,function(i){return yke(r,this)},{arity:1})},bke=Vd,wke=VS,Ske=Cc,Tke=El,Cke=JX,P4=$r([].push),Al=function(e){var t=e==1,r=e==2,n=e==3,i=e==4,o=e==6,a=e==7,s=e==5||o;return function(c,l,d,u){for(var p,f,m=Ske(c),g=wke(m),y=bke(l,d),v=Tke(g),E=0,w=u||Cke,S=t?w(c,v):r||a?w(c,0):void 0;v>E;E++)if((s||E in g)&&(f=y(p=g[E],E,m),e))if(t)S[E]=f;else if(f)switch(e){case 3:return!0;case 5:return p;case 6:return E;case 2:P4(S,p)}else switch(e){case 4:return!1;case 7:P4(S,p)}return o?-1:n||i?i:S}},rJ={forEach:Al(0),map:Al(1),filter:Al(2),some:Al(3),every:Al(4),find:Al(5),findIndex:Al(6),filterReject:Al(7)},Qv=Yt,RD=jn,ID=Fn,Rke=$r,Qp=ba,Gh=cm,Ike=Yr,_i=qn,xke=Ii,SN=Zi,tT=Fd,xD=$S,Ake=wa,TN=Ud,j0=By,nJ=KS,Nke=GS,iJ=eJ,Oke=Vy,oJ=My,aJ=as,kke=lD,sJ=FS,D4=$d,Pke=YS,AD=dm,cJ=zS,L4=eD,Dke=Ur,Lke=hm,Mke=On,jke=tJ,Uke=Hd,lJ=Ch,rT=rJ.forEach,Ro=WS("hidden"),Jb="Symbol",U0="prototype",Fke=lJ.set,M4=lJ.getterFor(Jb),Is=Object[U0],Np=RD.Symbol,h_=Np&&Np[U0],Vke=RD.TypeError,PR=RD.QObject,dJ=oJ.f,pu=aJ.f,uJ=iJ.f,Bke=sJ.f,hJ=Rke([].push),ml=AD("symbols"),Ky=AD("op-symbols"),$ke=AD("wks"),DR=!PR||!PR[U0]||!PR[U0].findChild,CN=Qp&&Ike(function(){return j0(pu({},"a",{get:function(){return pu(this,"a",{value:7}).a}})).a!=7})?function(e,t,r){var n=dJ(Is,t);n&&delete Is[t],pu(e,t,r),n&&e!==Is&&pu(Is,t,n)}:pu,LR=function(e,t){var r=ml[e]=j0(h_);return Fke(r,{type:Jb,tag:e,description:t}),Qp||(r.description=t),r},Qb=function(e,t,r){e===Is&&Qb(Ky,t,r),SN(e);var n=xD(t);return SN(r),_i(ml,n)?(r.enumerable?(_i(e,Ro)&&e[Ro][n]&&(e[Ro][n]=!1),r=j0(r,{enumerable:TN(0,!1)})):(_i(e,Ro)||pu(e,Ro,TN(1,{})),e[Ro][n]=!0),CN(e,n,r)):pu(e,n,r)},MR=function(e,t){SN(e);var r=tT(t),n=nJ(r).concat(fJ(r));return rT(n,function(i){Qp&&!ID(pJ,r,i)||Qb(e,i,r[i])}),e},pJ=function(e){var t=xD(e),r=ID(Bke,this,t);return!(this===Is&&_i(ml,t)&&!_i(Ky,t))&&(!(r||!_i(this,t)||!_i(ml,t)||_i(this,Ro)&&this[Ro][t])||r)},j4=function(e,t){var r=tT(e),n=xD(t);if(r!==Is||!_i(ml,n)||_i(Ky,n)){var i=dJ(r,n);return!i||!_i(ml,n)||_i(r,Ro)&&r[Ro][n]||(i.enumerable=!0),i}},U4=function(e){var t=uJ(tT(e)),r=[];return rT(t,function(n){_i(ml,n)||_i(cJ,n)||hJ(r,n)}),r},fJ=function(e){var t=e===Is,r=uJ(t?Ky:tT(e)),n=[];return rT(r,function(i){!_i(ml,i)||t&&!_i(Is,i)||hJ(n,ml[i])}),n};Gh||(D4(h_=(Np=function(){if(xke(h_,this))throw Vke("Symbol is not a constructor");var e=arguments.length&&arguments[0]!==void 0?Ake(arguments[0]):void 0,t=L4(e),r=function(n){this===Is&&ID(r,Ky,n),_i(this,Ro)&&_i(this[Ro],t)&&(this[Ro][t]=!1),CN(this,t,TN(1,n))};return Qp&&DR&&CN(Is,t,{configurable:!0,set:r}),LR(t,e)})[U0],"toString",function(){return M4(this).tag}),D4(Np,"withoutSetter",function(e){return LR(L4(e),e)}),sJ.f=pJ,aJ.f=Qb,kke.f=MR,oJ.f=j4,Nke.f=iJ.f=U4,Oke.f=fJ,Lke.f=function(e){return LR(Dke(e),e)},Qp&&Pke(h_,"description",{configurable:!0,get:function(){return M4(this).description}})),Qv({global:!0,constructor:!0,wrap:!0,forced:!Gh,sham:!Gh},{Symbol:Np}),rT(nJ($ke),function(e){Mke(e)}),Qv({target:Jb,stat:!0,forced:!Gh},{useSetter:function(){DR=!0},useSimple:function(){DR=!1}}),Qv({target:"Object",stat:!0,forced:!Gh,sham:!Qp},{create:function(e,t){return t===void 0?j0(e):MR(j0(e),t)},defineProperty:Qb,defineProperties:MR,getOwnPropertyDescriptor:j4}),Qv({target:"Object",stat:!0,forced:!Gh},{getOwnPropertyNames:U4}),jke(),Uke(Np,Jb),cJ[Ro]=!0;var mJ=cm&&!!Symbol.for&&!!Symbol.keyFor,Hke=Yt,Wke=go,Gke=qn,zke=wa,gJ=dm,Kke=mJ,jR=gJ("string-to-symbol-registry"),qke=gJ("symbol-to-string-registry");Hke({target:"Symbol",stat:!0,forced:!Kke},{for:function(e){var t=zke(e);if(Gke(jR,t))return jR[t];var r=Wke("Symbol")(t);return jR[t]=r,qke[r]=t,r}});var Yke=Yt,Xke=qn,Jke=jy,Qke=lm,Zke=mJ,F4=dm("symbol-to-string-registry");Yke({target:"Symbol",stat:!0,forced:!Zke},{keyFor:function(e){if(!Jke(e))throw TypeError(Qke(e)+" is not a symbol");if(Xke(F4,e))return F4[e]}});var V4=zy,ePe=Un,B4=Tc,tPe=wa,$4=$r([].push),rPe=Yt,yJ=go,vJ=QP,nPe=Fn,qy=$r,EJ=Yr,H4=Un,W4=jy,_J=gD,iPe=function(e){if(ePe(e))return e;if(V4(e)){for(var t=e.length,r=[],n=0;n<t;n++){var i=e[n];typeof i=="string"?$4(r,i):typeof i!="number"&&B4(i)!="Number"&&B4(i)!="String"||$4(r,tPe(i))}var o=r.length,a=!0;return function(s,c){if(a)return a=!1,c;if(V4(this))return c;for(var l=0;l<o;l++)if(r[l]===s)return c}}},oPe=cm,aPe=String,yd=yJ("JSON","stringify"),Zv=qy(/./.exec),G4=qy("".charAt),sPe=qy("".charCodeAt),cPe=qy("".replace),lPe=qy(1 .toString),dPe=/[\uD800-\uDFFF]/g,z4=/^[\uD800-\uDBFF]$/,K4=/^[\uDC00-\uDFFF]$/,q4=!oPe||EJ(function(){var e=yJ("Symbol")();return yd([e])!="[null]"||yd({a:e})!="{}"||yd(Object(e))!="{}"}),Y4=EJ(function(){return yd("\uDF06\uD834")!=='"\\udf06\\ud834"'||yd("\uDEAD")!=='"\\udead"'}),uPe=function(e,t){var r=_J(arguments),n=iPe(t);if(H4(n)||e!==void 0&&!W4(e))return r[1]=function(i,o){if(H4(n)&&(o=nPe(n,this,aPe(i),o)),!W4(o))return o},vJ(yd,null,r)},hPe=function(e,t,r){var n=G4(r,t-1),i=G4(r,t+1);return Zv(z4,e)&&!Zv(K4,i)||Zv(K4,e)&&!Zv(z4,n)?"\\u"+lPe(sPe(e,0),16):e};yd&&rPe({target:"JSON",stat:!0,arity:3,forced:q4||Y4},{stringify:function(e,t,r){var n=_J(arguments),i=vJ(q4?uPe:yd,null,n);return Y4&&typeof i=="string"?cPe(i,dPe,hPe):i}});var X4=Vy,pPe=Cc;Yt({target:"Object",stat:!0,forced:!cm||Yr(function(){X4.f(1)})},{getOwnPropertySymbols:function(e){var t=X4.f;return t?t(pPe(e)):[]}}),On("asyncIterator"),On("hasInstance"),On("isConcatSpreadable"),On("iterator"),On("match"),On("matchAll"),On("replace"),On("search"),On("species"),On("split");var fPe=tJ;On("toPrimitive"),fPe();var mPe=go,gPe=Hd;On("toStringTag"),gPe(mPe("Symbol"),"Symbol"),On("unscopables"),Hd(jn.JSON,"JSON",!0);var yPe=Us.Symbol,vPe=Ur,EPe=as.f,J4=vPe("metadata"),Q4=Function.prototype;Q4[J4]===void 0&&EPe(Q4,J4,{value:null}),On("dispose"),On("metadata");var _Pe=yPe;On("asyncDispose");var bPe=$r,ND=go("Symbol"),wPe=ND.keyFor,SPe=bPe(ND.prototype.valueOf),bJ=ND.isRegisteredSymbol||function(e){try{return wPe(SPe(e))!==void 0}catch{return!1}};Yt({target:"Symbol",stat:!0},{isRegisteredSymbol:bJ});for(Z4=dm,FR=go,e3=$r,t3=jy,r3=Ur,Gm=FR("Symbol"),RN=Gm.isWellKnownSymbol,IN=FR("Object","getOwnPropertyNames"),wJ=e3(Gm.prototype.valueOf),xN=Z4("wks"),eE=0,VR=IN(Gm),n3=VR.length;eE<n3;eE++)try{UR=VR[eE],t3(Gm[UR])&&r3(UR)}catch{}var UR,Z4,FR,e3,t3,r3,Gm,RN,IN,wJ,xN,eE,VR,n3,i3=function(e){if(RN&&RN(e))return!0;try{for(var t=wJ(e),r=0,n=IN(xN),i=n.length;r<i;r++)if(xN[n[r]]==t)return!0}catch{}return!1};Yt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:i3}),On("matcher"),On("observable"),Yt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:bJ}),Yt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:i3}),On("metadataKey"),On("patternMatch"),On("replaceAll");var Op=Nr(_Pe),SJ=Nr(hm.f("iterator"));function Wg(e){return Wg=typeof Op=="function"&&typeof SJ=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Op=="function"&&t.constructor===Op&&t!==Op.prototype?"symbol":typeof t},Wg(e)}var TPe=Nr(hm.f("toPrimitive"));function CPe(e){var t=function(r,n){if(Wg(r)!=="object"||r===null)return r;var i=r[TPe];if(i!==void 0){var o=i.call(r,n||"default");if(Wg(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Wg(t)==="symbol"?t:String(t)}function C(e,t,r){return(t=CPe(t))in e?XX(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var RPe=Yr,IPe=Ur("iterator"),OD=!RPe(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2"),n="";return e.pathname="c%20d",t.forEach(function(i,o){t.delete("b"),n+=o+i}),r.delete("a",2),!e.toJSON||!r.has("a",1)||r.has("a",2)||!t.size&&!0||!t.sort||e.href!=="http://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[IPe]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||n!=="a1c3"||new URL("http://x",void 0).host!=="x"}),xPe=$d,BR=Yt,If=jn,tE=Fn,Ec=$r,kp=ba,o3=OD,a3=$d,APe=YS,NPe=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:xPe(e,n,t[n],r);return e},OPe=Hd,kPe=uD,kD=Ch,TJ=pD,$R=Un,PPe=qn,DPe=Vd,LPe=Rc,MPe=Zi,CJ=$o,ao=wa,jPe=By,s3=Ud,AN=dD,UPe=qS,zh=JS,FPe=BX,VPe=Ur("iterator"),F0="URLSearchParams",RJ=F0+"Iterator",IJ=kD.set,Fa=kD.getterFor(F0),BPe=kD.getterFor(RJ),$Pe=Object.getOwnPropertyDescriptor,PD=function(e){if(!kp)return If[e];var t=$Pe(If,e);return t&&t.value},c3=PD("fetch"),Zb=PD("Request"),Gg=PD("Headers"),HR=Zb&&Zb.prototype,l3=Gg&&Gg.prototype,HPe=If.RegExp,WPe=If.TypeError,xJ=If.decodeURIComponent,GPe=If.encodeURIComponent,zPe=Ec("".charAt),d3=Ec([].join),wu=Ec([].push),NN=Ec("".replace),KPe=Ec([].shift),u3=Ec([].splice),h3=Ec("".split),qPe=Ec("".slice),YPe=/\+/g,p3=Array(4),XPe=function(e){return p3[e-1]||(p3[e-1]=HPe("((?:%[\\da-f]{2}){"+e+"})","gi"))},JPe=function(e){try{return xJ(e)}catch{return e}},f3=function(e){var t=NN(e,YPe," "),r=4;try{return xJ(t)}catch{for(;r;)t=NN(t,XPe(r--),JPe);return t}},QPe=/[!'()~]|%20/g,ZPe={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},eDe=function(e){return ZPe[e]},m3=function(e){return NN(GPe(e),QPe,eDe)},WR=kPe(function(e,t){IJ(this,{type:RJ,iterator:AN(Fa(e).entries),kind:t})},"Iterator",function(){var e=BPe(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value=t==="keys"?n.key:t==="values"?n.value:[n.key,n.value]),r},!0),AJ=function(e){this.entries=[],this.url=null,e!==void 0&&(CJ(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?zPe(e,0)==="?"?qPe(e,1):e:ao(e)))};AJ.prototype={type:F0,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,i,o,a,s,c=UPe(e);if(c)for(r=(t=AN(e,c)).next;!(n=tE(r,t)).done;){if(o=(i=AN(MPe(n.value))).next,(a=tE(o,i)).done||(s=tE(o,i)).done||!tE(o,i).done)throw WPe("Expected sequence with length 2");wu(this.entries,{key:ao(a.value),value:ao(s.value)})}else for(var l in e)PPe(e,l)&&wu(this.entries,{key:l,value:ao(e[l])})},parseQuery:function(e){if(e)for(var t,r,n=h3(e,"&"),i=0;i<n.length;)(t=n[i++]).length&&(r=h3(t,"="),wu(this.entries,{key:f3(KPe(r)),value:f3(d3(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],wu(r,m3(e.key)+"="+m3(e.value));return d3(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ew=function(){TJ(this,ap);var e=IJ(this,new AJ(arguments.length>0?arguments[0]:void 0));kp||(this.size=e.entries.length)},ap=ew.prototype;NPe(ap,{append:function(e,t){var r=Fa(this);zh(arguments.length,2),wu(r.entries,{key:ao(e),value:ao(t)}),kp||this.length++,r.updateURL()},delete:function(e){for(var t=Fa(this),r=zh(arguments.length,1),n=t.entries,i=ao(e),o=r<2?void 0:arguments[1],a=o===void 0?o:ao(o),s=0;s<n.length;){var c=n[s];if(c.key!==i||a!==void 0&&c.value!==a)s++;else if(u3(n,s,1),a!==void 0)break}kp||(this.size=n.length),t.updateURL()},get:function(e){var t=Fa(this).entries;zh(arguments.length,1);for(var r=ao(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){var t=Fa(this).entries;zh(arguments.length,1);for(var r=ao(e),n=[],i=0;i<t.length;i++)t[i].key===r&&wu(n,t[i].value);return n},has:function(e){for(var t=Fa(this).entries,r=zh(arguments.length,1),n=ao(e),i=r<2?void 0:arguments[1],o=i===void 0?i:ao(i),a=0;a<t.length;){var s=t[a++];if(s.key===n&&(o===void 0||s.value===o))return!0}return!1},set:function(e,t){var r=Fa(this);zh(arguments.length,1);for(var n,i=r.entries,o=!1,a=ao(e),s=ao(t),c=0;c<i.length;c++)(n=i[c]).key===a&&(o?u3(i,c--,1):(o=!0,n.value=s));o||wu(i,{key:a,value:s}),kp||(this.size=i.length),r.updateURL()},sort:function(){var e=Fa(this);FPe(e.entries,function(t,r){return t.key>r.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,r=Fa(this).entries,n=DPe(e,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new WR(this,"keys")},values:function(){return new WR(this,"values")},entries:function(){return new WR(this,"entries")}},{enumerable:!0}),a3(ap,VPe,ap.entries,{name:"entries"}),a3(ap,"toString",function(){return Fa(this).serialize()},{enumerable:!0}),kp&&APe(ap,"size",{get:function(){return Fa(this).entries.length},configurable:!0,enumerable:!0}),OPe(ew,F0),BR({global:!0,constructor:!0,forced:!o3},{URLSearchParams:ew}),!o3&&$R(Gg)&&(g3=Ec(l3.has),y3=Ec(l3.set),GR=function(e){if(CJ(e)){var t,r=e.body;if(LPe(r)===F0)return t=e.headers?new Gg(e.headers):new Gg,g3(t,"content-type")||y3(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),jPe(e,{body:s3(0,ao(r)),headers:s3(0,t)})}return e},$R(c3)&&BR({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return c3(e,arguments.length>1?GR(arguments[1]):{})}}),$R(Zb)&&(rE=function(e){return TJ(this,HR),new Zb(e,arguments.length>1?GR(arguments[1]):{})},HR.constructor=rE,rE.prototype=HR,BR({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:rE})));var g3,y3,GR,rE,tDe={URLSearchParams:ew,getState:Fa},v3=Nr(Us.URLSearchParams),rDe={isBrowser:!0,classes:{URLSearchParams:v3!==void 0?v3:CD,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},NJ=typeof window<"u"&&typeof document<"u",nDe=(E3=typeof navigator<"u"&&navigator.product,NJ&&["ReactNative","NativeScript","NS"].indexOf(E3)<0),E3,iDe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function";function _3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function b3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_3(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var cc=b3(b3({},Object.freeze({__proto__:null,hasBrowserEnv:NJ,hasStandardBrowserEnv:nDe,hasStandardBrowserWebWorkerEnv:iDe})),rDe),oDe=Zi,aDe=Fn,sDe=qn,cDe=Ii,lDe=function(){var e=oDe(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},w3=RegExp.prototype,OJ=function(e){var t=e.flags;return t!==void 0||"flags"in w3||sDe(e,"flags")||!cDe(w3,e)?t:aDe(lDe,e)},dDe=bD.charAt,S3=Fn,uDe=Zi,hDe=Un,pDe=Tc,fDe=/./.exec,mDe=TypeError,gDe=Yt,T3=Fn,kJ=L0,yDe=uD,nE=hD,C3=sm,PJ=dY,V0=wa,vDe=Zi,EDe=am,_De=Tc,bDe=uY,DJ=OJ,wDe=BS,SDe=Yr,TDe=mD,CDe=function(e,t,r){return t+(r?dDe(e,t).length:1)},RDe=function(e,t){var r=e.exec;if(hDe(r)){var n=S3(r,e,t);return n!==null&&uDe(n),n}if(pDe(e)==="RegExp")return S3(fDe,e,t);throw mDe("RegExp#exec called on incompatible receiver")},LJ=Ch,IDe=Ur("matchAll"),MJ="RegExp String",jJ=MJ+" Iterator",xDe=LJ.set,ADe=LJ.getterFor(jJ),NDe=TypeError,ON=kJ("".indexOf),tw=kJ("".matchAll),zR=!!tw&&!SDe(function(){tw("a",/./)}),ODe=yDe(function(e,t,r,n){xDe(this,{type:jJ,regexp:e,string:t,global:r,unicode:n,done:!1})},MJ,function(){var e=ADe(this);if(e.done)return nE(void 0,!0);var t=e.regexp,r=e.string,n=RDe(t,r);return n===null?(e.done=!0,nE(void 0,!0)):e.global?(V0(n[0])===""&&(t.lastIndex=CDe(r,PJ(t.lastIndex),e.unicode)),nE(n,!1)):(e.done=!0,nE(n,!1))}),R3=function(e){var t,r,n,i=vDe(this),o=V0(e),a=TDe(i,RegExp),s=V0(DJ(i));return t=new a(a===RegExp?i.source:i,s),r=!!~ON(s,"g"),n=!!~ON(s,"u"),t.lastIndex=PJ(i.lastIndex),new ODe(t,o,r,n)};gDe({target:"String",proto:!0,forced:zR},{matchAll:function(e){var t,r,n,i,o=C3(this);if(EDe(e)){if(zR)return tw(o,e)}else{if(bDe(e)&&(t=V0(C3(DJ(e))),!~ON(t,"g")))throw NDe("`.matchAll` does not allow non-global regexes");if(zR)return tw(o,e);if((n=wDe(e,IDe))===void 0&&_De(e)=="RegExp"&&(n=R3),n)return T3(n,e,o)}return r=V0(o),i=new RegExp(e,"g"),T3(R3,i,r)}});var kDe=ss("String").matchAll,PDe=Ii,DDe=kDe,KR=String.prototype,LDe=function(e){var t=e.matchAll;return typeof e=="string"||e===KR||PDe(KR,e)&&t===KR.matchAll?DDe:t},MDe=Nr(LDe);function UJ(e){function t(r,n,i,o){let a=r[o++];if(a==="__proto__")return!0;let s=Number.isFinite(+a),c=o>=r.length;return a=!a&&ge.isArray(i)?i.length:a,c?(ge.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!s):(i[a]&&ge.isObject(i[a])||(i[a]=[]),t(r,n,i[a],o)&&ge.isArray(i[a])&&(i[a]=function(l){let d={},u=Object.keys(l),p,f=u.length,m;for(p=0;p<f;p++)m=u[p],d[m]=l[m];return d}(i[a])),!s)}if(ge.isFormData(e)&&ge.isFunction(e.entries)){let r={};return ge.forEachEntry(e,(n,i)=>{t(function(o){return MDe(ge).call(ge,/\w+|\[(\w*)]/g,o).map(a=>a[0]==="[]"?"":a[1]||a[0])}(n),i,r,0)}),r}return null}var DD={transitional:KX,adapter:["xhr","http"],transformRequest:[function(e,t){let r=t.getContentType()||"",n=r.indexOf("application/json")>-1,i=ge.isObject(e);if(i&&ge.isHTMLForm(e)&&(e=new FormData(e)),ge.isFormData(e))return n?JSON.stringify(UJ(e)):e;if(ge.isArrayBuffer(e)||ge.isBuffer(e)||ge.isStream(e)||ge.isFile(e)||ge.isBlob(e))return e;if(ge.isArrayBufferView(e))return e.buffer;if(ge.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(a,s){return Xb(a,new cc.classes.URLSearchParams,Object.assign({visitor:function(c,l,d,u){return cc.isNode&&ge.isBuffer(c)?(this.append(l,c.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},s))}(e,this.formSerializer).toString();if((o=ge.isFileList(e))||r.indexOf("multipart/form-data")>-1){let a=this.env&&this.env.FormData;return Xb(o?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(a,s,c){if(ge.isString(a))try{return(s||JSON.parse)(a),li(ge).call(ge,a)}catch(l){if(l.name!=="SyntaxError")throw l}return(0,JSON.stringify)(a)}(e)):e}],transformResponse:[function(e){let t=this.transitional||DD.transitional,r=t&&t.forcedJSONParsing,n=this.responseType==="json";if(e&&ge.isString(e)&&(r&&!this.responseType||n)){let i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(o){if(i)throw o.name==="SyntaxError"?cr.from(o,cr.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cc.classes.FormData,Blob:cc.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ge.forEach(["delete","get","head","post","put","patch"],e=>{DD.headers[e]={}});var LD=DD,jDe=ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),I3=Symbol("internals");function zm(e){var t;return e&&li(t=String(e)).call(t).toLowerCase()}function p_(e){return e===!1||e==null?e:ge.isArray(e)?e.map(p_):String(e)}function qR(e,t,r,n,i){return ge.isFunction(n)?n.call(this,t,r):(i&&(t=r),ge.isString(t)?ge.isString(n)?t.indexOf(n)!==-1:ge.isRegExp(n)?n.test(t):void 0:void 0)}var f_=class{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function i(s,c,l){let d=zm(c);if(!d)throw new Error("header name must be a non-empty string");let u=ge.findKey(n,d);(!u||n[u]===void 0||l===!0||l===void 0&&n[u]!==!1)&&(n[u||c]=p_(s))}let o=(s,c)=>ge.forEach(s,(l,d)=>i(l,d,c));var a;return ge.isPlainObject(e)||e instanceof this.constructor?o(e,t):ge.isString(e)&&(e=li(e).call(e))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(li(a=e).call(a))?o((s=>{let c={},l,d,u;return s&&s.split(`
`).forEach(function(p){var f,m;u=p.indexOf(":"),l=li(f=p.substring(0,u)).call(f).toLowerCase(),d=li(m=p.substring(u+1)).call(m),!l||c[l]&&jDe[l]||(l==="set-cookie"?c[l]?c[l].push(d):c[l]=[d]:c[l]=c[l]?c[l]+", "+d:d)}),c})(e),t):e!=null&&i(t,e,r),this}get(e,t){if(e=zm(e)){let r=ge.findKey(this,e);if(r){let n=this[r];if(!t)return n;if(t===!0)return function(i){let o=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,s;for(;s=a.exec(i);)o[s[1]]=s[2];return o}(n);if(ge.isFunction(t))return t.call(this,n,r);if(ge.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=zm(e)){let r=ge.findKey(this,e);return!(!r||this[r]===void 0||t&&!qR(0,this[r],r,t))}return!1}delete(e,t){let r=this,n=!1;function i(o){if(o=zm(o)){let a=ge.findKey(r,o);!a||t&&!qR(0,r[a],a,t)||(delete r[a],n=!0)}}return ge.isArray(e)?e.forEach(i):i(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let i=t[r];e&&!qR(0,this[i],i,e,!0)||(delete this[i],n=!0)}return n}normalize(e){let t=this,r={};return ge.forEach(this,(n,i)=>{var o;let a=ge.findKey(r,i);if(a)return t[a]=p_(n),void delete t[i];let s=e?function(c){return li(c).call(c).toLowerCase().replace(/([a-z\d])(\w*)/g,(l,d,u)=>d.toUpperCase()+u)}(i):li(o=String(i)).call(o);s!==i&&delete t[i],t[s]=p_(n),r[s]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){let t=Object.create(null);return ge.forEach(this,(r,n)=>{r!=null&&r!==!1&&(t[n]=e&&ge.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){let t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.forEach(o=>t.set(o)),t}static accessor(e){let t=(this[I3]=this[I3]={accessors:{}}).accessors,r=this.prototype;function n(i){let o=zm(i);t[o]||(function(a,s){let c=ge.toCamelCase(" "+s);["get","set","has"].forEach(l=>{Object.defineProperty(a,l+c,{value:function(d,u,p){return this[l].call(this,s,d,u,p)},configurable:!0})})}(r,i),t[o]=!0)}return ge.isArray(e)?e.forEach(n):n(e),this}};f_.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ge.reduceDescriptors(f_.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(i){this[n]=i}}}),ge.freezeMethods(f_);var il=f_;function YR(e,t){let r=this||LD,n=t||r,i=il.from(n.headers),o=n.data;return ge.forEach(e,function(a){o=a.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function FJ(e){return!(!e||!e.__CANCEL__)}function Yy(e,t,r){cr.call(this,e??"canceled",cr.ERR_CANCELED,t,r),this.name="CanceledError"}ge.inherits(Yy,cr,{__CANCEL__:!0});var UDe=cc.hasStandardBrowserEnv?{write(e,t,r,n,i,o){let a=[e+"="+encodeURIComponent(t)];ge.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),ge.isString(n)&&a.push("path="+n),ge.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function VJ(e,t){return e&&!function(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}(t)?function(r,n){return n?r.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):r}(e,t):t}var FDe=cc.hasStandardBrowserEnv?function(){let e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),r;function n(i){let o=i;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=n(window.location.href),function(i){let o=ge.isString(i)?n(i):i;return o.protocol===r.protocol&&o.host===r.host}}():function(){return!0};function x3(e,t){let r=0,n=function(i,o){i=i||10;let a=new Array(i),s=new Array(i),c,l=0,d=0;return o=o!==void 0?o:1e3,function(u){let p=Date.now(),f=s[d];c||(c=p),a[l]=u,s[l]=p;let m=d,g=0;for(;m!==l;)g+=a[m++],m%=i;if(l=(l+1)%i,l===d&&(d=(d+1)%i),p-c<o)return;let y=f&&p-f;return y?Math.round(1e3*g/y):void 0}}(50,250);return i=>{let o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-r,c=n(s);r=o;let l={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&o<=a?(a-o)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}var VDe=typeof XMLHttpRequest<"u"&&function(e){return new de(function(t,r){let n=e.data,i=il.from(e.headers).normalize(),o,a,{responseType:s,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if(ge.isFormData(n)){if(cc.hasStandardBrowserEnv||cc.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((a=i.getContentType())!==!1){let[m,...g]=a?a.split(";").map(y=>li(y).call(y)).filter(Boolean):[];i.setContentType([m||"multipart/form-data",...g].join("; "))}}let d=new XMLHttpRequest;if(e.auth){let m=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(m+":"+g))}let u=VJ(e.baseURL,e.url);function p(){if(!d)return;let m=il.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders());(function(g,y,v){let E=v.config.validateStatus;v.status&&E&&!E(v.status)?y(new cr("Request failed with status code "+v.status,[cr.ERR_BAD_REQUEST,cr.ERR_BAD_RESPONSE][Math.floor(v.status/100)-4],v.config,v.request,v)):g(v)})(function(g){t(g),l()},function(g){r(g),l()},{data:s&&s!=="text"&&s!=="json"?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:m,config:e,request:d}),d=null}if(d.open(e.method.toUpperCase(),zX(u,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,"onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){d&&d.readyState===4&&(d.status!==0||d.responseURL&&d.responseURL.indexOf("file:")===0)&&setTimeout(p)},d.onabort=function(){d&&(r(new cr("Request aborted",cr.ECONNABORTED,e,d)),d=null)},d.onerror=function(){r(new cr("Network Error",cr.ERR_NETWORK,e,d)),d=null},d.ontimeout=function(){let m=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",g=e.transitional||KX;e.timeoutErrorMessage&&(m=e.timeoutErrorMessage),r(new cr(m,g.clarifyTimeoutError?cr.ETIMEDOUT:cr.ECONNABORTED,e,d)),d=null},cc.hasStandardBrowserEnv&&(c&&ge.isFunction(c)&&(c=c(e)),c||c!==!1&&FDe(u))){let m=e.xsrfHeaderName&&e.xsrfCookieName&&UDe.read(e.xsrfCookieName);m&&i.set(e.xsrfHeaderName,m)}n===void 0&&i.setContentType(null),"setRequestHeader"in d&&ge.forEach(i.toJSON(),function(m,g){d.setRequestHeader(g,m)}),ge.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),s&&s!=="json"&&(d.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&d.addEventListener("progress",x3(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",x3(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=m=>{d&&(r(!m||m.type?new Yy(null,e,d):m),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));let f=function(m){let g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(m);return g&&g[1]||""}(u);f&&cc.protocols.indexOf(f)===-1?r(new cr("Unsupported protocol "+f+":",cr.ERR_BAD_REQUEST,e)):d.send(n||null)})},kN={http:null,xhr:VDe};ge.forEach(kN,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var A3=e=>"- ".concat(e),BDe=e=>ge.isFunction(e)||e===null||e===!1,BJ={getAdapter:e=>{e=ge.isArray(e)?e:[e];let{length:t}=e,r,n,i={};for(let o=0;o<t;o++){let a;if(r=e[o],n=r,!BDe(r)&&(n=kN[(a=String(r)).toLowerCase()],n===void 0))throw new cr("Unknown adapter '".concat(a,"'"));if(n)break;i[a||"#"+o]=n}if(!n){let o=Object.entries(i).map(a=>{let[s,c]=a;return"adapter ".concat(s," ")+(c===!1?"is not supported by the environment":"is not available in the build")});throw new cr("There is no suitable adapter to dispatch the request "+(t?o.length>1?`since :
`+o.map(A3).join(`
`):" "+A3(o[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n},adapters:kN};function XR(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Yy(null,e)}function N3(e){return XR(e),e.headers=il.from(e.headers),e.data=YR.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),BJ.getAdapter(e.adapter||LD.adapter)(e).then(function(t){return XR(e),t.data=YR.call(e,e.transformResponse,t),t.headers=il.from(t.headers),t},function(t){return FJ(t)||(XR(e),t&&t.response&&(t.response.data=YR.call(e,e.transformResponse,t.response),t.response.headers=il.from(t.response.headers))),de.reject(t)})}function O3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var k3=e=>e instanceof il?function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?O3(Object(n),!0).forEach(function(i){C(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}({},e):e;function xf(e,t){t=t||{};let r={};function n(l,d,u){return ge.isPlainObject(l)&&ge.isPlainObject(d)?ge.merge.call({caseless:u},l,d):ge.isPlainObject(d)?ge.merge({},d):ge.isArray(d)?d.slice():d}function i(l,d,u){return ge.isUndefined(d)?ge.isUndefined(l)?void 0:n(void 0,l,u):n(l,d,u)}function o(l,d){if(!ge.isUndefined(d))return n(void 0,d)}function a(l,d){return ge.isUndefined(d)?ge.isUndefined(l)?void 0:n(void 0,l):n(void 0,d)}function s(l,d,u){return u in t?n(l,d):u in e?n(void 0,l):void 0}let c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,d)=>i(k3(l),k3(d),!0)};return ge.forEach(Object.keys(Object.assign({},e,t)),function(l){let d=c[l]||i,u=d(e[l],t[l],l);ge.isUndefined(u)&&d!==s||(r[l]=u)}),r}var $J="1.6.8",MD={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{MD[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var P3={};MD.transitional=function(e,t,r){function n(i,o){return"[Axios v"+$J+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new cr(n(o," has been removed"+(t?" in "+t:"")),cr.ERR_DEPRECATED);return t&&!P3[o]&&(P3[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,o,a)}};var PN={assertOptions:function(e,t,r){if(typeof e!="object")throw new cr("options must be an object",cr.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),i=n.length;for(;i-- >0;){let o=n[i],a=t[o];if(a){let s=e[o],c=s===void 0||a(s,o,e);if(c!==!0)throw new cr("option "+o+" must be "+c,cr.ERR_BAD_OPTION_VALUE)}else if(r!==!0)throw new cr("Unknown option "+o,cr.ERR_BAD_OPTION)}},validators:MD},Nl=PN.validators,m_=class{constructor(e){this.defaults=e,this.interceptors={request:new T4,response:new T4}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let n;Error.captureStackTrace?Error.captureStackTrace(n={}):n=new Error;let i=n.stack?n.stack.replace(/^.+\n/,""):"";r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}throw r}}_request(e,t){typeof e=="string"?(t=t||{}).url=e:t=e||{},t=xf(this.defaults,t);let{transitional:r,paramsSerializer:n,headers:i}=t;r!==void 0&&PN.assertOptions(r,{silentJSONParsing:Nl.transitional(Nl.boolean),forcedJSONParsing:Nl.transitional(Nl.boolean),clarifyTimeoutError:Nl.transitional(Nl.boolean)},!1),n!=null&&(ge.isFunction(n)?t.paramsSerializer={serialize:n}:PN.assertOptions(n,{encode:Nl.function,serialize:Nl.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&ge.merge(i.common,i[t.method]);i&&ge.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),t.headers=il.concat(o,i);let a=[],s=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(t)===!1||(s=s&&f.synchronous,a.unshift(f.fulfilled,f.rejected))});let c=[],l;this.interceptors.response.forEach(function(f){c.push(f.fulfilled,f.rejected)});let d,u=0;if(!s){let f=[N3.bind(this),void 0];for(f.unshift.apply(f,a),f.push.apply(f,c),d=f.length,l=de.resolve(t);u<d;)l=l.then(f[u++],f[u++]);return l}d=a.length;let p=t;for(u=0;u<d;){let f=a[u++],m=a[u++];try{p=f(p)}catch(g){m.call(this,g);break}}try{l=N3.call(this,p)}catch(f){return de.reject(f)}for(u=0,d=c.length;u<d;)l=l.then(c[u++],c[u++]);return l}getUri(e){return zX(VJ((e=xf(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};ge.forEach(["delete","get","head","options"],function(e){m_.prototype[e]=function(t,r){return this.request(xf(r||{},{method:e,url:t,data:(r||{}).data}))}}),ge.forEach(["post","put","patch"],function(e){function t(r){return function(n,i,o){return this.request(xf(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}m_.prototype[e]=t(),m_.prototype[e+"Form"]=t(!0)});var g_=m_,$De=class HJ{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new de(function(i){r=i});let n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o,a=new de(s=>{n.subscribe(s),o=s}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},t(function(i,o,a){n.reason||(n.reason=new Yy(i,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new HJ(function(r){t=r}),cancel:t}}},HDe=$De,DN={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(DN).forEach(e=>{let[t,r]=e;DN[r]=t});var WDe=DN,Jn=function e(t){let r=new g_(t),n=HX(g_.prototype.request,r);return ge.extend(n,g_.prototype,r,{allOwnKeys:!0}),ge.extend(n,r,null,{allOwnKeys:!0}),n.create=function(i){return e(xf(t,i))},n}(LD);Jn.Axios=g_,Jn.CanceledError=Yy,Jn.CancelToken=HDe,Jn.isCancel=FJ,Jn.VERSION=$J,Jn.toFormData=Xb,Jn.AxiosError=cr,Jn.Cancel=Jn.CanceledError,Jn.all=function(e){return de.all(e)},Jn.spread=function(e){return function(t){return e.apply(null,t)}},Jn.isAxiosError=function(e){return ge.isObject(e)&&e.isAxiosError===!0},Jn.mergeConfig=xf,Jn.AxiosHeaders=il,Jn.formToJSON=e=>UJ(ge.isHTMLForm(e)?new FormData(e):e),Jn.getAdapter=BJ.getAdapter,Jn.HttpStatusCode=WDe,Jn.default=Jn;var Ui=Jn,GDe=()=>{};function B0(){let e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:GDe};return e.promise=new de((t,r)=>{e.resolve=n=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=n=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,r(n))}}),e}var iE=new Map,oE=new Map,zs=new Map,sn=function(e){return e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot",e}({}),Ot=function(e){return e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger",e}({}),WJ=new EOe,Ss=WJ.getResult(),JR=null;function vt(e){if(!JR){Ss=WJ.getResult();let t=function(s){if(s.engine.name==="Blink"&&s.browser.name!=="WeChat")return Ot.CHROME;switch(s.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Ot.CHROME;case"Safari":case"Mobile Safari":return Ot.SAFARI;case"Edge":return Ot.EDGE;case"Firefox":return Ot.FIREFOX;case"QQ":case"QQBrowser":return Ot.QQ;case"Opera":return Ot.OPERA;case"WeChat":return Ot.WECHAT;default:return s.browser.name||""}}(Ss),r=D3(Ss),n=function(s){return s.os.name==="Windows"?s.os.version?s.os.name+" "+s.os.version:s.os.name:s.os.name||""}(Ss),i=Ss.os.version,o=D3(Ss,!1),a=Ss.device.type;if(!(t&&r&&n&&i))return{name:t,version:r,os:n,osVersion:i,browserVersion:o,deviceType:a};JR={name:t,version:r,os:n,osVersion:i,browserVersion:o,deviceType:a}}return JR}function D3(e){let t,r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return t=e.engine.name==="Blink"?e.engine.version||"":e.browser.version||"",r?t.split(".")[0]:t}function nT(){return vt().os}function L3(){let e=vt();return"".concat(e.os," ").concat(e.osVersion)}function rw(){let e=vt();return!!(Ss.engine.name==="WebKit"&&e.os===sn.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==Ot.SAFARI||bi()&&e.name!==Ot.SAFARI)}function vd(){return vt().name===Ot.CHROME}function Dn(){return vt().name===Ot.SAFARI}function GJ(){return vt().name===Ot.EDGE}function _r(){return vt().name===Ot.FIREFOX}function bi(){return vt().os===sn.IOS}function LN(e){let t=vt();return!(t.name!==Ot.CHROME||!t.osVersion)&&Number(t.version)>=e}function zJ(e){let t=vt();return!(t.name!==Ot.CHROME||!t.osVersion)&&Number(t.version)<e}function M3(e){let t=vt();return!(t.name!==Ot.EDGE||!t.osVersion)&&Number(t.version)>=e}function KJ(e){let t=vt();return!(t.name!==Ot.SAFARI||!t.osVersion)&&Number(t.version)>=e}function qJ(e,t,r){let n=vt();if(n.os!==sn.IOS||!n.osVersion)return!1;let i=n.osVersion.split(".");return t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e}function YJ(e,t,r){let n=vt();if(n.name!==Ot.SAFARI||!n.osVersion||!n.browserVersion)return!1;let i=n.browserVersion.split(".");return t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e}function j3(e){let t=vt();return!(t.name!==Ot.OPERA||!t.osVersion)&&Number(t.version)>=e}function U3(){let e=vt();if(e.os!==sn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])<14||Number(t[0])===14&&Number(t[1])<=6}function Af(){let e=vt();if(e.os!==sn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])===15}function MN(){let e=vt();if(e.os!==sn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])===16}function F3(){let e=vt();if(e.os!==sn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])===15&&Number(t[1])>=1}function Ja(){return Dn()&&navigator.maxTouchPoints>0}function XJ(){return vt().name===Ot.WECHAT}function JJ(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function jD(){let e=nT();return function(){let{deviceType:t}=vt();return t==="mobile"||t==="tablet"}()||e===sn.ANDROID||e===sn.IOS||e===sn.HARMONY_OS}function Nd(){let e=vt();return e.name!==Ot.EDGE&&e.name!==Ot.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function iT(){return nT()===sn.ANDROID}function $0(){let e=vt();return iT()&&(e.name===Ot.CHROME||e.name===Ot.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function rr(e,t,r){return(t=function(n){var i=function(o,a){if(typeof o!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var c=s.call(o,"string");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(n);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(r),!0).forEach(function(n){rr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var I=function(e){return e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",e}({}),X=class extends Error{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;super(t),rr(this,"code",void 0),rr(this,"message",void 0),rr(this,"data",void 0),rr(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=r}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return e==="error"&&(t||console).error(this.toString()),e==="warning"&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function Yc(e,t){if(typeof e!="boolean")throw new X(I.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function Jr(e,t,r){if(!pe(r).call(r,e))throw new X(I.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(r)))}function Vt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4;if(e<r||e>n||(!(arguments.length>4&&arguments[4]!==void 0)||arguments[4])&&!function(i){return typeof i=="number"&&i%1==0}(e))throw new X(I.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(r,", ").concat(n,"]. integer only"))}function QR(e,t){if(typeof e!="number"){if(!(e.min||e.max||e.ideal||e.exact))throw new X(I.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));e.min!==void 0&&Vt(e.min,"".concat(t,".min"),0,1/0),e.max!==void 0&&Vt(e.max,"".concat(t,".max"),1,1/0),e.exact!==void 0&&Vt(e.exact,"".concat(t,".exact"),1,1/0),e.ideal!==void 0&&Vt(e.ideal,"".concat(t,".ideal"),1,1/0)}else Vt(e,t,1,1/0)}function En(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(e==null)throw new X(I.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!QJ(e,r,n,i))throw new X(I.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(r,",").concat(n,"].").concat(i?" ASCII characters only.":""))}function Hc(e,t){if(!Array.isArray(e))throw new X(I.INVALID_PARAMS,"".concat(t," should be an array"))}function dr(e){return e==null}function QJ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof e=="string"&&e.length<=r&&e.length>=t&&(!n||function(i){if(typeof i!="string")return!1;for(let o=0;o<i.length;o+=1){let a=i.charCodeAt(o);if(a<0||a>255)return!1}return!0}(e))}var fg=function(e){return e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE",e}(fg||{}),jN=function(e){return e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",e}(jN||{}),ZJ=new class{constructor(){rr(this,"_clientSize",null),rr(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),rr(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),rr(this,"getStyle",e=>window.getComputedStyle(e,null)),rr(this,"checkCssVisibleProperty",e=>{var t;let r=!0,n=this.getStyle(e),{display:i,visibility:o,opacity:a,filter:s}=n;return(i==="none"||pe(t=["hidden","collapse"]).call(t,o)||Number(a)<.1)&&(r=!1),!!r&&(s&&s.split(" ").filter(c=>{var l;let d=c.split("(")[0];return pe(l=["brightness","blur","opacity"]).call(l,d)}).map(c=>{let[l,d]=c.split(/\(|\)/);return[l,Number(d.match(/^[0-9\.]+/))]}).forEach(c=>{let[l,d]=c;switch(l){case"brightness":(d<.1||d>3)&&(r=!1);break;case"blur":d>3&&(r=!1);break;case"opacity":d<.1&&(r=!1)}}),r)}),rr(this,"checkPropertyUpToAllParentNodes",(e,t)=>{let r=!0,n=!0,i=a=>t(a),o=e;for(;o&&n;)i(o)||(r=!1,n=!1),o=o.parentElement,o||(n=!1);return r}),rr(this,"checkActualCssVisibleIncludeInherit",e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty)),rr(this,"getSizeAboutClient",e=>{let{width:t,height:r,left:n,right:i,top:o,bottom:a}=e.getBoundingClientRect(),s=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:r,left:n,right:i,top:o,bottom:a,clientWidth:s,clientHeight:c,clientMin:Math.min(s,c)}}),rr(this,"checkActualSize",()=>{let{width:e,height:t,clientMin:r}=this._clientSize;return this.checkSizeIsVisible(e,t,r)}),rr(this,"elementFromPoint",(e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null),rr(this,"checkCoverForAPoint",(e,t,r)=>{let n=this.elementFromPoint(e,t);return n!==null&&n!==r}),rr(this,"getPointPositionList",()=>{let{width:e,height:t,left:r,top:n}=this._clientSize,i=e/6,o=t/6,a=[],s=10**6;for(let c=0;c<5;c++)for(let l=0;l<5;l++){let d=(r*s+(c===0?.1:c===4?(i*c*s-1e5)/s:i*c)*s)/s,u=(n*s+(l===0?.1:l===4?(o*l*s-1e5)/s:o*l)*s)/s;a.push({x:d,y:u})}return[...a]}),rr(this,"checkElementCover",e=>this.getPointPositionList().map(t=>this.checkCoverForAPoint(t.x,t.y,e)).filter(t=>!!t).length>6),rr(this,"checkSizeIsVisible",(e,t,r)=>(e>50||r/e<=10)&&(t>50||r/t<=10)),rr(this,"checkSizeOfPartInClient",()=>{let{left:e,right:t,top:r,bottom:n,clientHeight:i,clientWidth:o,clientMin:a}=this._clientSize,s,c,l,d;if(e<0)s=0;else{if(!(e<o))return!1;s=e}if(t<0)return!1;if(c=t<o?t:o,r<0)l=0;else{if(!(r<i))return!1;l=r}if(n<0)return!1;d=n<i?n:i;let u=c-s,p=d-l;return this.checkSizeIsVisible(u,p,a)}),rr(this,"returnHiddenResult",e=>(this._clientSize=null,{visible:!1,reason:e})),rr(this,"checkOneElementVisible",e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(fg.COVERED);{let t=this.checkActualSize(),r=this.checkSizeOfPartInClient();return t&&!r?this.returnHiddenResult(fg.POSITION):t?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(fg.SIZE)}}return this.returnHiddenResult(fg.STYLE)}return this.returnHiddenResult(jN.UNMOUNTED)}return this.returnHiddenResult(jN.INVALID_HTML_ELEMENT)}),rr(this,"checkElementIsMountedOnDom",e=>this.checkPropertyUpToAllParentNodes(e,t=>t.nodeName.toUpperCase()!=="HTML"?t.parentElement!==null:!!document.documentElement))}};function UD(e){return new TextEncoder().encode(e)}var B3=function(e,t){let r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r},UN=async e=>function(t,r){let n="";return new Uint8Array(t).forEach(i=>{n+=i.toString(r).padStart(2,"0")}),n}(await crypto.subtle.digest("SHA-256",UD(e)),16),fr=class{constructor(){rr(this,"_events",{}),rr(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map(t=>t.listener):[]}on(e,t){this._events[e]||(this._events[e]=[]);let r=this._events[e];this._indexOfListener(r,t)===-1&&r.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);let r=this._events[e];this._indexOfListener(r,t)===-1&&r.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;let r=this._events[e],n=this._indexOfListener(r,t);n!==-1&&r.splice(n,1),this._events[e].length===0&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);let t=this._events[e].map(o=>o);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(let o=0;o<t.length;o+=1){let a=t[o];a.once&&this.off(e,a.listener),a.listener.apply(this,n||[])}}safeEmit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];[...this._events[e]||[]].forEach(i=>{i.once&&this.off(e,i.listener);try{i.listener.apply(this,r)}catch(o){console.error("safeEmit event:".concat(e," error ").concat(o==null?void 0:o.toString()))}})}_indexOfListener(e,t){let r=e.length;for(;r--;)if(e[r].listener===t)return r;return-1}},Km=null;function eQ(){if(Km)return Km;if(window.electron)return Km=window.electron;if(!window.require)return null;try{return Km=window.require("electron"),Km}catch{return null}}var zr=function(e){return e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.PRELOAD="PRELOAD",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload",e}({}),Er=function(e){return e.TRACER="tracer",e}({});function $3(e){return Vt(e.timeout,"config.timeout",0,1e5),Vt(e.timeoutFactor,"config.timeoutFactor",0,100,!1),Vt(e.maxRetryCount,"config.maxRetryConfig",0,1/0),Vt(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}var zDe=function(e){return e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",e}({}),Mt=function(e){return e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.FALLBACK="FALLBACK",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e}({});function oT(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach(t=>{if(!t.urls)throw Error()})}catch{return!1}return!0}function tQ(e){return En(e.turnServerURL,"turnServerURL"),En(e.username,"username"),En(e.password,"password"),e.udpport&&Vt(e.udpport,"udpport",1,99999,!0),e.forceturn&&Yc(e.forceturn,"forceturn"),e.security&&Yc(e.security,"security"),e.tcpport&&Vt(e.tcpport,"tcpport",1,99999,!0),!0}function H3(e){return e.level!==void 0&&Jr(e.level,"level",[1,2,3]),e.delay!==void 0&&Vt(e.delay,"delay",0,3e3,!0),!0}var ht=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",e}({}),Pn=function(e){return e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK",e}({}),co=function(e){return e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({}),Pp=function(e){return e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({});function Ln(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return e.getListeners(t).length===0?de.reject(new X(I.UNEXPECTED_ERROR,"can not emit promise")):new de((o,a)=>{e.emit(t,...n,o,a)})}function Wt(e,t){if(e.getListeners(t).length===0)return de.resolve();for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return Ln(e,t,...n)}function oa(e,t){if(e.getListeners(t).length===0)return null;for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return H0(e,t,...n)}function H0(e,t){let r=null,n=null;for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if(e.emit(t,...o,s=>{r=s},s=>{n=s}),n!==null)throw n;if(r===null)throw new X(I.UNEXPECTED_ERROR,"handler is not sync");return r}var Lr=new class extends fr{set networkState(e){this.emit(Pp.NETWORK_STATE_CHANGE,e,this._networkState),e===co.ONLINE?this.emit(Pp.ONLINE):e===co.OFFLINE&&(this.onlineWaiter=new de(t=>{this.once(Pp.ONLINE,()=>{this.onlineWaiter=void 0,t(co.ONLINE)})}),this.emit(Pp.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===co.ONLINE}constructor(){super(),rr(this,"_moduleName","network-indicator"),rr(this,"_networkState",co.ONLINE),rr(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=co.ONLINE}),window.addEventListener("offline",()=>{this.networkState=co.OFFLINE})}};function nw(e,t){let r=e.indexOf(t);r!==-1&&e.splice(r,1)}function Dp(e){let t=[];return e.forEach(r=>{t.indexOf(r)===-1&&t.push(r)}),t}function aT(e){de!==void 0?de.resolve().then(e):setTimeout(e,0)}function Pr(e){return JSON.parse(JSON.stringify(e))}function Su(e){try{return Pr(e)}catch{return e}}var W3={};function Od(e,t){W3[t]||(W3[t]=!0,e())}function Tu(e){let t=window.atob(e),r=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n+=1)r[n]=t.charCodeAt(n);return r}function Ed(e){let t="";for(let r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return window.btoa(t)}function rQ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,r=new TextEncoder().encode(e);if(r.length>t)r=r.slice(0,t);else if(r.length<t){let n=new Uint8Array(t);n.set(r),r=n}return r}function G3(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=Ps(t).call(t,(a,s)=>a+s.length,0),i=new Uint8Array(new ArrayBuffer(n)),o=0;return t.forEach(a=>{i.set(a,o),o+=a.length}),i}function lc(e){return window.TextEncoder?new TextEncoder().encode(e).length:e.length}function nQ(e){let t=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&e.realFormData&&(e=e.realFormData),e.forEach(r=>{t+=typeof r=="string"?lc(r):r.size}),t+138}function KDe(e){let t=new X(I.TIMEOUT,"timeout");return new de((r,n)=>{window.setTimeout(()=>n(t),e)})}function Tn(e){return new de(t=>{window.setTimeout(t,e)})}function qt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0,r=Math.random().toString(16).substr(2,e).toLowerCase();return r.length===e?"".concat(t).concat(r):"".concat(t).concat(r)+qt(e-r.length,"")}function Lp(){return qt(32,"").toUpperCase()}var sT=()=>{},z3=new class{constructor(){rr(this,"fnMap",new Map)}throttleByKey(e,t,r,n){for(var i=arguments.length,o=new Array(i>4?i-4:0),a=4;a<i;a++)o[a-4]=arguments[a];if(this.fnMap.has(t)){let s=this.fnMap.get(t);if(s.threshold!==r){s.fn(...s.args),clearTimeout(s.timer);let c=window.setTimeout(()=>{let l=this.fnMap.get(t);l&&l.fn(...l.args),this.fnMap.delete(t)},r);this.fnMap.set(t,{fn:e,threshold:r,timer:c,args:o,skipFn:n})}else s.skipFn&&s.skipFn(...s.args),this.fnMap.set(t,_e(_e({},s),{},{fn:e,args:o,skipFn:n}))}else{let s=window.setTimeout(()=>{let c=this.fnMap.get(t);c&&c.fn(...c.args),this.fnMap.delete(t)},r);this.fnMap.set(t,{fn:e,threshold:r,timer:s,args:o,skipFn:n})}}},K3=z3.throttleByKey.bind(z3);function q3(e){return typeof e=="object"&&e!==null&&!(e instanceof RegExp)}function FN(e,t){if(!q3(e)||!q3(t)||Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){let r=[...e];for(let n=0;n<t.length;n++)r[n]=FN(e[n],t[n]);return r}{let r=_e({},e);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)?r[n]=FN(e[n],t[n]):r[n]=t[n]);return r}}function Y3(e,t){let r=[0];if(r=new Array(t).fill(0),e===0)return r;let n=0;for(;e>0&&(r[n]=255&e,e>>=8,n++,n!==t););return r}function ZR(e){return typeof e=="number"?e:e.exact||e.ideal||e.max||e.min||0}function iQ(e){let t="0123456789abcdef";function r(w){let S,x="";for(S=0;S<=3;S++)x+=t.charAt(w>>8*S+4&15)+t.charAt(w>>8*S&15);return x}function n(w,S){let x=(65535&w)+(65535&S);return(w>>16)+(S>>16)+(x>>16)<<16|65535&x}function i(w,S,x,O,L,j){return n(function(W,V){return W<<V|W>>>32-V}(n(n(S,w),n(O,j)),L),x)}function o(w,S,x,O,L,j,W){return i(S&x|~S&O,w,S,L,j,W)}function a(w,S,x,O,L,j,W){return i(S&O|x&~O,w,S,L,j,W)}function s(w,S,x,O,L,j,W){return i(S^x^O,w,S,L,j,W)}function c(w,S,x,O,L,j,W){return i(x^(S|~O),w,S,L,j,W)}let l=function(w){let S,x=1+(w.length+8>>6),O=new Array(16*x);for(S=0;S<16*x;S++)O[S]=0;for(S=0;S<w.length;S++)O[S>>2]|=w.charCodeAt(S)<<S%4*8;return O[S>>2]|=128<<S%4*8,O[16*x-2]=8*w.length,O}(e),d,u,p,f,m,g=1732584193,y=-271733879,v=-1732584194,E=271733878;for(d=0;d<l.length;d+=16)u=g,p=y,f=v,m=E,g=o(g,y,v,E,l[d+0],7,-680876936),E=o(E,g,y,v,l[d+1],12,-389564586),v=o(v,E,g,y,l[d+2],17,606105819),y=o(y,v,E,g,l[d+3],22,-1044525330),g=o(g,y,v,E,l[d+4],7,-176418897),E=o(E,g,y,v,l[d+5],12,1200080426),v=o(v,E,g,y,l[d+6],17,-1473231341),y=o(y,v,E,g,l[d+7],22,-45705983),g=o(g,y,v,E,l[d+8],7,1770035416),E=o(E,g,y,v,l[d+9],12,-1958414417),v=o(v,E,g,y,l[d+10],17,-42063),y=o(y,v,E,g,l[d+11],22,-1990404162),g=o(g,y,v,E,l[d+12],7,1804603682),E=o(E,g,y,v,l[d+13],12,-40341101),v=o(v,E,g,y,l[d+14],17,-1502002290),y=o(y,v,E,g,l[d+15],22,1236535329),g=a(g,y,v,E,l[d+1],5,-165796510),E=a(E,g,y,v,l[d+6],9,-1069501632),v=a(v,E,g,y,l[d+11],14,643717713),y=a(y,v,E,g,l[d+0],20,-373897302),g=a(g,y,v,E,l[d+5],5,-701558691),E=a(E,g,y,v,l[d+10],9,38016083),v=a(v,E,g,y,l[d+15],14,-660478335),y=a(y,v,E,g,l[d+4],20,-405537848),g=a(g,y,v,E,l[d+9],5,568446438),E=a(E,g,y,v,l[d+14],9,-1019803690),v=a(v,E,g,y,l[d+3],14,-187363961),y=a(y,v,E,g,l[d+8],20,1163531501),g=a(g,y,v,E,l[d+13],5,-1444681467),E=a(E,g,y,v,l[d+2],9,-51403784),v=a(v,E,g,y,l[d+7],14,1735328473),y=a(y,v,E,g,l[d+12],20,-1926607734),g=s(g,y,v,E,l[d+5],4,-378558),E=s(E,g,y,v,l[d+8],11,-2022574463),v=s(v,E,g,y,l[d+11],16,1839030562),y=s(y,v,E,g,l[d+14],23,-35309556),g=s(g,y,v,E,l[d+1],4,-1530992060),E=s(E,g,y,v,l[d+4],11,1272893353),v=s(v,E,g,y,l[d+7],16,-155497632),y=s(y,v,E,g,l[d+10],23,-1094730640),g=s(g,y,v,E,l[d+13],4,681279174),E=s(E,g,y,v,l[d+0],11,-358537222),v=s(v,E,g,y,l[d+3],16,-722521979),y=s(y,v,E,g,l[d+6],23,76029189),g=s(g,y,v,E,l[d+9],4,-640364487),E=s(E,g,y,v,l[d+12],11,-421815835),v=s(v,E,g,y,l[d+15],16,530742520),y=s(y,v,E,g,l[d+2],23,-995338651),g=c(g,y,v,E,l[d+0],6,-198630844),E=c(E,g,y,v,l[d+7],10,1126891415),v=c(v,E,g,y,l[d+14],15,-1416354905),y=c(y,v,E,g,l[d+5],21,-57434055),g=c(g,y,v,E,l[d+12],6,1700485571),E=c(E,g,y,v,l[d+3],10,-1894986606),v=c(v,E,g,y,l[d+10],15,-1051523),y=c(y,v,E,g,l[d+1],21,-2054922799),g=c(g,y,v,E,l[d+8],6,1873313359),E=c(E,g,y,v,l[d+15],10,-30611744),v=c(v,E,g,y,l[d+6],15,-1560198380),y=c(y,v,E,g,l[d+13],21,1309151649),g=c(g,y,v,E,l[d+4],6,-145523070),E=c(E,g,y,v,l[d+11],10,-1120210379),v=c(v,E,g,y,l[d+2],15,718787259),y=c(y,v,E,g,l[d+9],21,-343485551),g=n(g,u),y=n(y,p),v=n(v,f),E=n(E,m);return r(g)+r(y)+r(v)+r(E)}var qDe=1,aE=console,zn=class{static setLogger(e){aE=e}constructor(e){rr(this,"lockingPromise",de.resolve()),rr(this,"locks",0),rr(this,"name",""),rr(this,"lockId",void 0),this.lockId=qDe++,e&&(this.name=e),aE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,aE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof e=="string"?e:""));let r=new de(i=>{t=()=>{this.locks-=1,aE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof e=="string"?e:"")),i()}}),n=this.lockingPromise.then(()=>t);return this.lockingPromise=this.lockingPromise.then(()=>r),n}};function Nf(e,t){return function(r,n,i){let o=i.value;if(typeof o!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){let a=this[t];if(!a)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));let s=await a.lock("From ".concat(e,".").concat(n));try{for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];return await o.apply(this,l)}finally{s()}},i}}var Vr={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function FD(e,t){let r=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,r)}function Fs(e,t,r,n){let i=Object.assign({},Vr,n),o=i.timeout,a=async()=>{await function(l){return new de(d=>{window.setTimeout(d,l)})}(o),o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o)},s=!1,c=new de(async(l,d)=>{t=t||(()=>!1),r=r||(()=>!0);for(let u=0;u<i.maxRetryCount;u+=1){if(s)return d(new X(I.OPERATION_ABORTED));try{let p=await e();if(!t(p,u)||u+1===i.maxRetryCount)return l(p);await a()}catch(p){if(!r(p,u)||u+1===i.maxRetryCount)return d(p);await a()}}});return c.cancel=()=>s=!0,c}var oQ=class{constructor(e){rr(this,"input",[]),rr(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return this.input.length===0?0:Ps(e=this.input).call(e,(t,r)=>t+r)/this.input.length}},sE,cE=0,eI=0;function VN(e,t,r,n){return new de((i,o)=>{t.responseType=t.responseType||"json",t.data&&!r?(t.data=JSON.stringify(t.data),cE+=lc(t.data)):r&&(t.data.size?cE+=t.data.size:t.data instanceof FormData?cE+=nQ(t.data):cE+=lc(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,Ui.request(t).then(a=>{typeof a.data=="string"?eI+=lc(a.data):a.data instanceof ArrayBuffer||a.data instanceof Uint8Array?eI+=a.data.byteLength:eI+=lc(JSON.stringify(a.data)),i(a.data)}).catch(a=>{Ui.isCancel(a)?o(new X(I.OPERATION_ABORTED,"cancel token canceled")):a.code==="ECONNABORTED"?o(new X(I.NETWORK_TIMEOUT,a.message)):a.response?o(new X(I.NETWORK_RESPONSE_ERROR,a.response.status)):o(new X(I.NETWORK_ERROR,a.message))})})}async function YDe(e,t){let r=new Blob([t.data],{type:"buffer"});return await VN(e,_e(_e({},t),{},{data:r,headers:{"Content-Type":"application/octet-stream"}}),!0)}var X3=()=>window.isSecureContext!==void 0,aa=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;let t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){let n=t[1],i=t[2];return"".concat(n,".").concat(i)}let r=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(r&&r[1]&&r[2]){let n=r[1],i=r[2];return"".concat(n,".").concat(100*(Number(i)+1))}return"4.0.0.999"}("4.22.0"),VD=function(){try{return JSON.parse("true")===!0}catch{return!0}}(),lu=function(e){return e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn",e}({}),BD={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},$D="v4.22.0-0-g8569241d-dirty(8/15/2024, 7:04:06 PM)",xr=_e(_e({PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:BD,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,CUSTOM_ADAPTATION_DEFAULT_MODE:"",ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,ENABLE_PRELOAD:!0},{ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,USE_PUB_RTX:!0,USE_SUB_RTX:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_DATASTREAM_2:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,USE_XR:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,ENABLE_PREALLOC_PC:!1,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC:!1,ENABLE_SVC_DEFAULT_CODECS:["H264","VP8","VP9","AV1"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:2,ENABLE_PRE_SUB:!1,ENABLE_AUT_FEEDBACK:!1}),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1});function Ft(e,t,r){var n,i,o;pe(n=Object.keys(xr)).call(n,e)&&(!r&&pe(i=Object.keys(nd)).call(i,e)||(xr[e]=t,e==="ENABLE_VIDEO_SEI"&&t===!0&&(xr.ENABLE_ENCODED_TRANSFORM=!0),e==="USE_NEW_NETWORK_CONFIG"&&t&&(o=!!t,xr.USE_NEW_NETWORK_CONFIG=o,o&&(xr.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],xr.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],xr.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],xr.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],xr.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",xr.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",xr.GATEWAY_DOMAINS=["edge.sd-rtn.com"])),e==="ENABLE_PRE_SUB"&&t&&(xr.ENABLE_INSTANT_VIDEO=!0,xr.ENABLE_PREALLOC_PC=!0),e==="ENABLE_SVC"&&t&&(xr.ENABLE_AUT_CC=!0)))}function D(e){return xr[e]}var nd={},ct=function(e){return e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",e}(ct||{}),XDe=class{constructor(e,t,r,n){rr(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:r,clientId:n,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useP2P:!1,p2pTransport:lu.Default}}dispatch(e){this.state=function(t,r){switch(r.type){case ct.SET_SESSION_ID:return _e(_e({},t),{},{sessionId:r.sessionId});case ct.SET_P2P_ID:return _e(_e({},t),{},{p2pId:r.p2pId});case ct.SET_UID:return _e(_e({},t),{},{uid:r.uid});case ct.SET_INT_UID:return _e(_e({},t),{},{intUid:r.intUid});case ct.SET_PUB_ID:return _e(_e({},t),{},{pubId:r.pubId});case ct.KEY_METRIC_CLIENT_CREATED:return _e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{clientCreated:r.metric})});case ct.KEY_METRIC_JOIN_START:return _e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{joinStart:r.metric})});case ct.AVOID_JOIN_START:return _e(_e({},t),{},{avoidJoinStart:r.avoidJoinStart});case ct.KEY_METRIC_JOIN_END:return _e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{joinEnd:r.metric})});case ct.KEY_METRIC_REQUEST_AP_START:return _e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{requestAPStart:r.metric})});case ct.KEY_METRIC_REQUEST_AP_END:return _e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{requestAPEnd:r.metric})});case ct.KEY_METRIC_JOIN_GATEWAY_START:return _e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{joinGatewayStart:r.metric})});case ct.KEY_METRIC_JOIN_GATEWAY_END:return _e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{joinGatewayEnd:r.metric})});case ct.KEY_METRIC_PEER_CONNECTION_START:return _e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{peerConnectionStart:r.metric})});case ct.KEY_METRIC_PEER_CONNECTION_END:return _e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{peerConnectionEnd:r.metric})});case ct.KEY_METRIC_DESCRIPTION_START:return _e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{descriptionStart:r.metric})});case ct.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return _e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{signalChannelOpen:r.metric})});case ct.KEY_METRIC_ICE_CONNECTION_END:return _e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{iceConnectionEnd:r.metric})});case ct.KEY_METRIC_PUBLISH:{let n=t.keyMetrics.publish,i=n.findIndex(o=>o.trackId===r.metric.trackId);return i!==-1?(n[i]=_e(_e({},n[i]),r.metric),_e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{publish:[...n]})})):_e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{publish:[...t.keyMetrics.publish,r.metric]})})}case ct.KEY_METRIC_SUBSCRIBE:{let n=t.keyMetrics.subscribe,i=n.findIndex(o=>o.userId===r.metric.userId&&o.type===r.metric.type);return i!==-1?(n[i]=_e(_e({},n[i]),r.metric),_e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{subscribe:[...n]})})):_e(_e({},t),{},{keyMetrics:_e(_e({},t.keyMetrics),{},{subscribe:[...t.keyMetrics.subscribe,r.metric]})})}case ct.SET_CLOUD_PROXY_SERVER_MODE:return t.cloudProxyServerMode=r.mode,t;case ct.RECORD_JOIN_CHANNEL_SERVICE:return typeof r.index!="number"?t.joinChannelServiceRecords=[...t.joinChannelServiceRecords,r.record]:(t.joinChannelServiceRecords[r.index]=_e(_e({},t.joinChannelServiceRecords[r.index]),r.record),t.joinChannelServiceRecords=[...t.joinChannelServiceRecords]),t;case ct.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return t.joinChannelServiceRecords=[],t;case ct.RESET_KEY_METRICS:return t.keyMetrics={publish:[],subscribe:[]},t;case ct.SET_USE_P2P:return _e(_e({},t),{},{useP2P:r.val});case ct.SET_TRANSPORT_TYPE:return _e(_e({},t),{},{p2pTransport:r.val});default:return t}}(this.state,e)}set sessionId(e){this.dispatch({type:ct.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:ct.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:ct.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:ct.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:ct.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:ct.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:ct.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(e){this.dispatch({type:ct.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:ct.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:ct.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:ct.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:ct.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:ct.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:ct.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:ct.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:ct.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:ct.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:ct.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:ct.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:ct.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:ct.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,r,n){this.dispatch({type:ct.KEY_METRIC_PUBLISH,metric:_e(_e({trackId:e,type:t},r&&{publishStart:r}),n&&{publishEnd:n})})}subscribe(e,t,r,n,i,o,a){this.dispatch({type:ct.KEY_METRIC_SUBSCRIBE,metric:_e(_e(_e(_e(_e({userId:e,type:t},r&&{subscribeStart:r}),n&&{subscribeEnd:n}),i&&{firstFrame:i}),o&&{streamAdded:o}),a&&{firstDecoded:a})})}massSubscribe(e,t,r,n){e.forEach(i=>{this.dispatch({type:ct.KEY_METRIC_SUBSCRIBE,metric:_e(_e(_e({userId:i.userId,type:i.type},t&&{subscribeStart:t}),r&&{subscribeEnd:r}),n&&{firstFrame:n})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){e.service==="gateway"&&Array.isArray(e.urls)&&(e.urls=e.urls.map(r=>r.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof t!="number"?(this.dispatch({type:ct.RECORD_JOIN_CHANNEL_SERVICE,record:_e(_e({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:ct.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:ct.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:ct.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:ct.AVOID_JOIN_START,avoidJoinStart:e})}},cT=function(e){return e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1",e}({});(function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"})({});var J3=128,JDe=96,Q3=1e3,Kh=10,QDe=0;function Ir(e,t,r){return(t=function(n){var i=function(o,a){if(typeof o!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var c=s.call(o,"string");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(n);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z3(Object(r),!0).forEach(function(n){Ir(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var aQ=new class extends fr{constructor(){super(...arguments),Ir(this,"currentUploadLogID",0)}reportLogUploadError(e){let{errorRange:t}=e;t[t.length-1]&&t[t.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=t[t.length-1],this.emit("REPORT_LOG_UPLOAD",e))}},ZDe=class{constructor(e){Ir(this,"logger",void 0),Ir(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}};function tI(){let e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function eF(){let e=new Date,t=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return t?(t==null?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}var Jo={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},lE=Date.now(),qm=e=>{for(let t in Jo)if(Object.prototype.hasOwnProperty.call(Jo,t)&&Jo[t]===e)return t;return"DEFAULT"},b=new class{constructor(){Ir(this,"proxyServerURL",void 0),Ir(this,"logLevel",Jo.DEBUG),Ir(this,"uploadState","collecting"),Ir(this,"uploadLogWaitingList",[]),Ir(this,"uploadLogUploadingList",[]),Ir(this,"uploadErrorCount",0),Ir(this,"currentLogID",0),Ir(this,"url",void 0),Ir(this,"extLog",(e,t)=>{this.appendLogToWaitingList(e,...t)})}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[Jo.DEBUG].concat(t);this.log.apply(this,n)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[Jo.INFO].concat(t);this.log.apply(this,n)}warning(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[Jo.WARNING].concat(t);this.log.apply(this,n)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[Jo.ERROR].concat(t);this.log.apply(this,n)}upload(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[Jo.DEBUG].concat(t);this.uploadLog.apply(this,n)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){Ft("UPLOAD_LOG",!0)}disableLogUpload(){Ft("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new ZDe(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(Date.now()-lE<100)return void setTimeout(()=>{this.log(...t)},Date.now()-lE);let n=Math.max(0,Math.min(4,t[0]));if(t[0]=tI()+" Agora-SDK [".concat(qm(n),"]:"),this.appendLogToWaitingList(n,...t),n<this.logLevel)return;let i=tI()+" %cAgora-SDK [".concat(qm(n),"]:"),o=[];if(!D("USE_NEW_LOG"))switch(n){case Jo.DEBUG:o=[i,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,o);break;case Jo.INFO:o=[i,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,o);break;case Jo.WARNING:o=[i,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,o);break;case Jo.ERROR:o=[i,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,o)}}uploadLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(Date.now()-lE<100)return void setTimeout(()=>{this.uploadLog(...t)},Date.now()-lE);let n=Math.max(0,Math.min(4,t[0]));t[0]=tI()+" Agora-SDK [".concat(qm(n),"]:"),this.appendLogToWaitingList(n,...t)}appendLogToWaitingList(e){if(!D("UPLOAD_LOG"))return;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Array.isArray(r[0])?r[0][0]=eF()+" Agora-SDK [".concat(qm(e),"]:"):r[0]=eF()+" Agora-SDK [".concat(qm(e),"]:");let i="";r.forEach(o=>{typeof o=="object"&&(o=JSON.stringify(o)),i+="".concat(o," ")}),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){let e=this.uploadLogUploadingList,t={sdk_version:aa,process_id:D("PROCESS_ID"),payload:JSON.stringify(e)};return Fs(async()=>{let r=await Ui.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(D("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(D("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if(r.data!=="OK"){let n=new Error("unexpected upload log response");throw n.response=r,n}},()=>(this.uploadLogUploadingList=[],!1),r=>{let n={status:-1,message:r.message,errorRange:e.map(i=>i.log_item_id)};return r.response?(n.status=r.response.status,n.data=r.response.data,n.headers=r.response.headers):r.request&&(n.status=r.request.status),aQ.reportLogUploadError(n),!0},{timeout:D("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:D("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,D("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),D("UPLOAD_LOG_INTERVAL"))}).catch(e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),D("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),D("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},tF;function e2e(e){return En(e.reportId,"params.reportId",0,100,!1),En(e.category,"params.category",0,100,!1),En(e.event,"params.event",0,100,!1),En(e.label,"params.label",0,100,!1),Vt(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(tF={}).FREE="free",tF.UPLOADING="uploading",function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}({});var t2e={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},vn=function(e){return e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",e}({}),hr=function(e){return e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",e}({});(function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"})({});var r2e=function(e){return e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED",e}({}),HD=class sQ{constructor(){Ir(this,"baseInfoMap",new Map),Ir(this,"proxyServer",void 0),Ir(this,"eventUploadTimer",void 0),Ir(this,"setSessionIdTimer",void 0),Ir(this,"url",void 0),Ir(this,"backupUrl",void 0),Ir(this,"_appId",void 0),Ir(this,"keyEventUploadPendingItems",[]),Ir(this,"normalEventUploadPendingItems",[]),Ir(this,"apiInvokeUploadPendingItems",[]),Ir(this,"apiInvokeCount",0),Ir(this,"ltsList",[]),Ir(this,"lastSendNormalEventTime",Date.now()),Ir(this,"customReportCounterTimer",void 0),Ir(this,"customReportCount",0),Ir(this,"extApiInvoke",async t=>{for(let r of t){let n=Ze(Ze({},r),{},{sid:null,invokeId:++this.apiInvokeCount,tag:Er.TRACER});this.sendApiInvoke(n)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),D("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),D("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(t){return this.baseInfoMap.get(t)}adjustSessionStartTime(t){if(!this.baseInfoMap.has(t)&&!this.baseInfoMap.get(t))return void b.error("adjust session ".concat(t," start time, sid is not exist or info is undefined"));let r=this.baseInfoMap.get(t),n=Date.now(),i=r.startTime;r.startTime=n,b.debug("rewrite session ".concat(t," startTime: ").concat(n," , ").concat(n-i,"ms")),this.baseInfoMap.set(t,r)}setAppId(t){this._appId=t}reportApiInvoke(t,r,n){r.timeout=r.timeout||6e4,r.reportResult=r.reportResult===void 0||r.reportResult;let i=Date.now();this.apiInvokeCount+=1;let o=this.apiInvokeCount,a=()=>({tag:r.tag,invokeId:o,sid:t,name:r.name,apiInvokeTime:i,options:r.options,states:r.states||null}),s=!!D("SHOW_REPORT_INVOKER_LOG");s&&b.info("".concat(r.name," start"),r.options);let c=!1;Tn(r.timeout).then(()=>{c||(this.sendApiInvoke(Ze(Ze({},a()),{},{error:I.API_INVOKE_TIMEOUT,success:!1})),b.debug("".concat(r.name," timeout")))});let l=new X(I.UNEXPECTED_ERROR,"".concat(r.name,": this api invoke is end"));return{onSuccess:d=>{let u=()=>{if(c)throw l;return c=!0,this.sendApiInvoke(Ze(Ze({},a()),{},{success:!0},r.reportResult&&{result:d})),s&&b.info("".concat(r.name," onSuccess")),d};return n?K3(u,r.name+"Success",n,()=>c=!0):u()},onError:d=>{let u=()=>{if(c)throw d;c=!0,this.sendApiInvoke(Ze(Ze({},a()),{},{success:!1,error:d})),s&&b.info("".concat(r.name," onFailure"),d.toString())};return n?K3(u,r.name+"Error",n,()=>c=!0):u()}}}sessionInit(t,r){if(this.baseInfoMap.has(t))return;let n=Date.now(),i=this.createBaseInfo(t,n);i.cname=r.cname;let o=Object.assign({},{willUploadConsoleLog:D("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:VD?"global":"oversea",areas:D("AREAS")&&D("AREAS").join(",")},r.extend),{stringUid:a,channelProfile:s,channelMode:c,isABTestSuccess:l,lsid:d,clientRole:u}=r,p=Date.now(),f=Ze(Ze({},i),{},{eventType:vn.SESSION_INIT,appid:r.appid,browser:navigator.userAgent,buildFormat:r.buildFormat,build:$D,lts:p,elapse:p-n,extend:JSON.stringify(o),mode:r.mode,process:D("PROCESS_ID"),appType:D("APP_TYPE"),success:!0,version:aa,stringUid:a,channelProfile:s,channelMode:c,isABTestSuccess:l,lsid:d,clientType:pe(m=window.navigator.userAgent).call(m,"AgoraWebView")?42:20,clientRole:u,serviceId:D("PROCESS_ID"),extensionID:D("PLUGIN_INFO").join(",")||""});var m;this.send({type:hr.SESSION,data:f},!0)}joinChooseServer(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=Ze(Ze({},i),{},{eventType:vn.JOIN_CHOOSE_SERVER,lts:o,eventElapse:r.elapse||o-r.lts,chooseServerAddr:r.csAddr,errorCode:r.ec,elapse:o-n.startTime,success:r.succ,chooseServerAddrList:JSON.stringify(r.serverList),uid:r.uid?parseInt(r.uid):null,cid:r.cid?parseInt(r.cid):null,chooseServerIp:r.csIp||"",opid:r.opid,unilbsServerIds:r.unilbsServerIds,extend:r.extend||void 0,isHttp3:r.isHttp3});this.send({type:hr.JOIN_CHOOSE_SERVER,data:a},!0)}reqUserAccount(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=Ze(Ze({},i),{},{eventType:vn.REQ_USER_ACCOUNT,lts:o,success:r.success,serverAddress:r.serverAddr,stringUid:r.stringUid,uid:r.uid,errorCode:r.errorCode,elapse:r.elapse||o-n.startTime,eventElapse:o-r.lts,extend:JSON.stringify(r.extend)});this.send({type:hr.REQ_USER_ACCOUNT,data:a},!0)}joinGateway(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info;r.vid&&(i.vid=r.vid),i.uid=r.uid,i.cid=r.cid;let o=Date.now(),{firstSuccess:a,avoidJoinStartTime:s}=r,c=o-(a&&s?s:n.startTime),l=Ze(Ze({},i),{},{eventType:vn.JOIN_GATEWAY,lts:o,gatewayAddr:r.addr,success:r.succ,errorCode:r.ec,errorMsg:r.errorMsg||"",elapse:c,eventElapse:o-r.lts,firstSuccess:a,signalChannel:r.signalChannel,preload:r.preload?1:0});r.succ&&(n.lastJoinSuccessTime=o),this.send({type:hr.JOIN_GATEWAY,data:l},!0)}joinChannelTimeout(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=Date.now(),o=Ze(Ze({},n.info),{},{lts:i,timeout:r,elapse:i-n.startTime});this.send({type:hr.JOIN_CHANNEL_TIMEOUT,data:o},!0)}publish(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=Ze(Ze({},i),{},{eventType:vn.PUBLISH,lts:o,eventElapse:r.eventElapse,elapse:o-n.startTime,success:r.succ,errorCode:r.ec,videoName:r.videoName,audioName:r.audioName,screenName:r.screenName,screenshare:r.screenshare,audio:r.audio,video:r.video,p2pid:r.p2pid,publishRequestid:r.publishRequestid});this.send({type:hr.PUBLISH,data:a},!0)}subscribe(t,r,n){let i=this.baseInfoMap.get(t);if(!i)return;let o=i.info,a=Date.now(),s=Ze(Ze({},o),{},{eventType:vn.SUBSCRIBE,lts:a,eventElapse:r.eventElapse,elapse:a-i.startTime,success:r.succ,errorCode:r.ec,video:r.video,audio:r.audio,subscribeRequestid:r.subscribeRequestid,p2pid:r.p2pid,preSsrc:r.preSsrc?1:0},n&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof r.peerid=="string"?s.peerSuid=r.peerid:s.peer=r.peerid,this.send({type:hr.SUBSCRIBE,data:s},!0)}wsCompressorInit(t){var r;let n=[...So(r=this.baseInfoMap).call(r)],i=n.length?n[0]:"UnableToGetSid",o=this.baseInfoMap.get(i);if(!o)return;let a=o.info,s=Date.now(),c=Ze(Ze({},a),{},{eventType:vn.WS_COMPRESSOR_INIT,lts:s,eventElapse:t.eventElapse,elapse:s-o.startTime,status:t.status?1:2});this.send({type:hr.WS_COMPRESSOR_INIT,data:c},!0)}firstRemoteVideoDecode(t,r,n,i){let o=this.baseInfoMap.get(t);if(!o)return;let a=o.info,s=Date.now(),c=Ze(Ze(Ze({},a),i),{},{elapse:s-o.startTime,eventType:r,lts:s,firstDecodeFrame:Math.max((i.firstFrame||s)-o.startTime,0),apEnd:Math.max(i.apEnd-o.startTime,0),apStart:Math.max(i.apStart-o.startTime,0),joinGwEnd:Math.max(i.joinGwEnd-o.startTime,0),joinGwStart:Math.max(i.joinGwStart-o.startTime,0),pcEnd:Math.max(i.pcEnd-o.startTime,0),pcStart:Math.max(i.pcStart-o.startTime,0),subscriberEnd:Math.max(i.subscriberEnd-o.startTime,0),subscriberStart:Math.max(i.subscriberStart-o.startTime,0),videoAddNotify:Math.max(i.videoAddNotify-o.startTime,0)});this.send({type:n,data:c},!0)}firstRemoteFrame(t,r,n,i){let o=this.baseInfoMap.get(t);if(!o)return;let a=o.info,s=Date.now(),c=Ze(Ze(Ze({},a),i),{},{elapse:s-o.startTime,eventType:r,lts:s});this.send({type:n,data:c},!0)}pcStats(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=Ze(Ze(Ze({},i),r),{},{vid:i.vid===void 0?0:Number(i.vid),elapse:o-n.startTime,eventType:vn.PC_STATS,lts:o,preallocation:r.preallocation?1:0});this.send({type:hr.PC_STATS,data:a},!0)}updateRemoteRTPCapabilities(t,r){if(t){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=Ze(Ze(Ze({},i),r),{},{vid:i.vid===void 0?0:Number(i.vid),eventType:vn.UPDATE_REMOTE_RTPCAPABILITIES,lts:o});this.send({type:hr.UPDATE_REMOTE_RTPCAPABILITIES,data:a},!0)}}onGatewayStream(t,r,n,i){let o=this.baseInfoMap.get(t);if(!o)return;let a=o.info,s=Date.now(),c=Ze(Ze(Ze({},a),i),{},{eventType:r,lts:s});this.send({type:n,data:c},!0)}streamSwitch(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=Ze(Ze({},i),{},{eventType:vn.STREAM_SWITCH,lts:o,isDual:r.isdual,elapse:o-n.startTime,success:r.succ});this.send({type:hr.STREAM_SWITCH,data:a},!0)}requestProxyAppCenter(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=Ze(Ze({},i),{},{eventType:vn.REQUEST_PROXY_APPCENTER,lts:o,eventElapse:o-r.lts,elapse:o-n.startTime,APAddr:r.APAddr,workerManagerList:r.workerManagerList,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:hr.REQUEST_PROXY_APPCENTER,data:a},!0)}requestProxyWorkerManager(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=Ze(Ze({},i),{},{eventType:vn.REQUEST_PROXY_WORKER_MANAGER,lts:o,eventElapse:o-r.lts,elapse:o-n.startTime,workerManagerAddr:r.workerManagerAddr,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:hr.REQUEST_PROXY_WORKER_MANAGER,data:a},!0)}setProxyServer(t){this.proxyServer=t,t?b.debug("reportProxyServerurl: ".concat(t)):b.debug("disable reportProxyServerurl: ".concat(t))}peerPublishStatus(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=Ze(Ze({},i),{},{subscribeElapse:r.subscribeElapse,peer:r.peer,peerPublishDuration:Math.max(r.audioPublishDuration,r.videoPublishDuration),audiotag:r.audioPublishDuration>0?1:-1,videotag:r.videoPublishDuration>0?1:-1,lts:o,elapse:o-n.startTime,joinChannelSuccessElapse:o-(n.lastJoinSuccessTime||o),peerPublishDurationVideo:r.videoPublishDuration,peerPublishDurationAudio:r.audioPublishDuration});this.send({type:hr.PEER_PUBLISH_STATUS,data:a},!0)}workerEvent(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now();(function(a,s,c){let l=a[s];if(!l||typeof l!="string")return[a];a[s]="";let d=lc(JSON.stringify(a)),u=0,p=[],f=0;for(let m=0;m<l.length;m++)f+=l.charCodeAt(m)<=127?1:3,f<=c-d||(p[p.length]=_e(_e({},a),{},{[s]:l.substring(u,m)}),u=m,f=l.charCodeAt(m)<=127?1:3);return u!==l.length-1&&(p[p.length]=_e(_e({},a),{},{[s]:l.substring(u)})),p})(Ze(Ze(Ze({},i),r),{},{elapse:o-n.startTime,lts:o,productType:"WebRTC"}),"payload",1300).forEach(a=>this.send({type:hr.WORKER_EVENT,data:a},!0))}apworkerEvent(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=Ze(Ze(Ze({},i),r),{},{elapse:o-n.startTime,lts:o});this.send({type:hr.AP_WORKER_EVENT,data:a},!0)}joinWebProxyAP(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=Ze(Ze(Ze({},i),r),{},{elapse:o-n.startTime,lts:o,extend:r.extend||void 0});this.send({type:hr.JOIN_WEB_PROXY_AP,data:a},!0)}WebSocketQuit(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=Ze(Ze(Ze({},i),r),{},{elapse:o-n.startTime,lts:o});this.send({type:hr.WEBSOCKET_QUIT,data:a},!0)}async sendCustomReportMessage(t,r){if(this.customReportCount+=r.length,this.customReportCount>D("CUSTOM_REPORT_LIMIT"))throw new X(I.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));let n=Date.now(),i=r.map(o=>({type:hr.USER_ANALYTICS,data:Ze(Ze({sid:t},o),{},{lts:n})}));try{D("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(i):await this.postDataToStatsCollector(i)}catch(o){throw b.error("send custom report message failed",o.toString()),new X(I.CUSTOM_REPORT_SEND_FAILED,o.message)}}sendApiInvoke(t){let r=D("NOT_REPORT_EVENT");if(t.tag&&pe(r)&&pe(r).call(r,t.tag))return!1;if(t.sid===null)return this.apiInvokeUploadPendingItems.push(t),!1;let n=this.baseInfoMap.get(t.sid);if(!n)return this.apiInvokeUploadPendingItems.push(t),!1;let{cname:i,uid:o,cid:a}=n.info,s;if(t.lts=t.lts||Date.now(),t.error)if(t.error instanceof X){let{code:l,message:d}=t.error;s=l||d||t.error.toString()}else s=t.error.toString();let c={invokeId:t.invokeId,sid:t.sid,cname:i,cid:a,uid:o,lts:t.lts,success:t.success,elapse:t.lts-n.startTime,execElapse:t.lts-t.apiInvokeTime,apiName:t.name,options:t.options?JSON.stringify(t.options):void 0,execStates:t.states?JSON.stringify(t.states):void 0,execResult:t.result?JSON.stringify(t.result):void 0,errorCode:t.error?s:void 0,errorMsg:t.error?JSON.stringify(t.error):void 0};return this.send({type:hr.API_INVOKE,data:c},!1),!0}appendSessionId(){sQ.__CLIENT_LIST__.forEach(t=>{if(t._sessionId){let r=this.apiInvokeUploadPendingItems.length;for(let n=0;n<r;n++){let i=this.apiInvokeUploadPendingItems.shift();i&&(i.sid=t._sessionId,this.sendApiInvoke(Object.assign({},i)))}}})}send(t,r){if(r)return this.keyEventUploadPendingItems.push(t),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(t),this.normalEventUploadPendingItems.length>D("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(t,r){let n=[],i=[];for(;t.length;){let a=t.shift();n.length<20?n.push(a):i.push(a)}t.push(...i);for(let a of[...n]){var o;this.ltsList.indexOf(a.data.lts)!==-1?(a.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(a.data.lts)):(this.ltsList.push(a.data.lts),Gy(o=this.ltsList).call(o,(s,c)=>s-c))}return r||(this.lastSendNormalEventTime=Date.now()),D("ENABLE_EVENT_REPORT")&&n.length&&(D("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((a=>s=>{D("EVENT_REPORT_RETRY")&&(r?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(a):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(a),this.normalEventUploadPendingItems.length>D("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-D("NORMAL_EVENT_QUEUE_CAPACITY")),b.warning("report: drop normal events"))))})(n)),t}async postDataToStatsCollector2(t){Lr.networkState===co.OFFLINE&&await de.race([Lr.onlineWaiter,Tn(2*Vr.maxRetryTimeout)]);let r=o=>{let a=new Uint8Array;return o.forEach(s=>{let c=UD(JSON.stringify(s.data)),l=new ArrayBuffer(5),d=(p=>{let f=0;return Object.entries(hr).forEach(m=>{let[g,y]=m;y===p.type&&(f=r2e[g])}),f})(s),u=new DataView(l);u.setUint16(0,c.byteLength,!0),u.setUint8(2,255&d),u.setUint8(3,d>>>8&255),u.setUint8(4,d>>>16&255),a=B3(a,new Uint8Array(l)),a=B3(a,c)}),a},n="event",i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(D("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(n):"https://".concat(D("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(n);for(let o=0;o<2;o+=1){o===1&&(i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(D("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(n):"https://".concat(D("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(n));try{await VN(i,{timeout:1e4,data:r(t),headers:Ze(Ze({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(a){if(o===1)throw a;continue}return}}async postDataToStatsCollector(t){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:t.map(a=>JSON.stringify(a)),vid:(a=>{let s=a&&a.data.sid&&this.baseInfoMap.get(a.data.sid);return s&&s.info.vid&&+s.info.vid||0})(t[0])};Lr.networkState===co.OFFLINE&&await de.race([Lr.onlineWaiter,Tn(2*Vr.maxRetryTimeout)]);let i=r?"/events/proto-raws":"/events/messages",o=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(D("EVENT_REPORT_DOMAIN"),"&p=").concat(D("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(D("EVENT_REPORT_DOMAIN"),":").concat(D("STATS_COLLECTOR_PORT")).concat(i));for(let a=0;a<2;a+=1){a===1&&(o=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(D("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(D("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(D("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(D("STATS_COLLECTOR_PORT")).concat(i)));try{r?await YDe(o,{timeout:1e4,data:n}):await VN(o,{timeout:1e4,data:n})}catch(s){if(a===1)throw s;continue}return}}createBaseInfo(t,r){let n=Object.assign({},t2e);return n.sid=t,this.baseInfoMap.set(t,{info:n,startTime:r}),n}reportResourceTiming(t,r){let n=performance.getEntriesByName(t),i=n[n.length-1];i&&this.reportApiInvoke(r,{name:"Client.resourceTiming",options:i,tag:Er.TRACER}).onSuccess()}};function Ne(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(t,r,n){let i=n.value;if(typeof i=="function"){let o=e.className||t.__className__||(t.constructor.name==="AgoraRTCClient"?"Client":t.constructor.name);n.value=function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];let l=s;if(e.argsMap)try{l=e.argsMap(this,...s)}catch(u){b.warning(u),l=[]}try{JSON.stringify(l)}catch{b.warning("arguments for method ".concat(o,".").concat(String(r)," not serializable for apiInvoke.")),l=[]}let d=(e.report||be).reportApiInvoke(this._sessionId||null,{name:"".concat(o,".").concat(String(r)),options:l,tag:Er.TRACER,reportResult:e.reportResult},e.throttleTime);try{let u=i.apply(this,s);return u instanceof de?u.then(p=>(d.onSuccess(e.reportResult&&p),p)).catch(p=>{throw d.onError(p),p}):(d.onSuccess(e.reportResult&&u),u)}catch(u){throw d.onError(u),u}}}return n}}Ir(HD,"__CLIENT_LIST__",[]);var be=new HD;aQ.on("REPORT_LOG_UPLOAD",e=>{e.networkState=Lr.networkState,be.reportApiInvoke(null,{name:"logUploadError",options:e,tag:Er.TRACER}).onSuccess("logUploadError")});var n2e=["CHINA","GLOBAL"],Nn=function(){let e="us".concat("erna","me"),t="pa".concat("sswo","rd"),r=["t","s","t"];r.splice(1,0,"e");let n=r.join(""),i=[];for(let s=0;s<6;s++)i.push("1");let o=i.join(""),a={};return a[e]=n,a[t]=o,Object.assign(a,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=Nn,VD||(xr.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],xr.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],xr.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],xr.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],xr.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],xr.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],xr.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",xr.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",xr.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",xr.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",xr.AREAS=["NORTH_AMERICA","OVERSEA"]);var cQ=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],zl=[];function Jd(e,t){return!!t&&zl.some(r=>r.uid===e&&r.channelName===t)}HD.__CLIENT_LIST__=zl;var i2e=rJ.forEach,rF=HS("forEach")?[].forEach:function(e){return i2e(this,e,arguments.length>1?arguments[1]:void 0)};Yt({target:"Array",proto:!0,forced:[].forEach!=rF},{forEach:rF});var o2e=ss("Array").forEach,a2e=Rc,s2e=qn,c2e=Ii,l2e=o2e,rI=Array.prototype,d2e={DOMTokenList:!0,NodeList:!0},u2e=function(e){var t=e.forEach;return e===rI||c2e(rI,e)&&t===rI.forEach||s2e(d2e,a2e(e))?l2e:t},h2e=Nr(u2e),p2e=Cc,nF=KS;Yt({target:"Object",stat:!0,forced:Yr(function(){nF(1)})},{keys:function(e){return nF(p2e(e))}});var lQ=Nr(Us.Object.keys),f2e=Nr(pY),m2e=Yt,g2e=zy,y2e=$r([].reverse),iF=[1,2];m2e({target:"Array",proto:!0,forced:String(iF)===String(iF.reverse())},{reverse:function(){return g2e(this)&&(this.length=this.length),y2e(this)}});var v2e=ss("Array").reverse,E2e=Ii,_2e=v2e,nI=Array.prototype,b2e=function(e){var t=e.reverse;return e===nI||E2e(nI,e)&&t===nI.reverse?_2e:t},dQ=b2e,w2e=Nr(dQ),S2e=Yt,oF=zy,T2e=XS,C2e=$o,aF=nD,R2e=El,I2e=Fd,x2e=ZS,A2e=Ur,N2e=gD,O2e=QX("slice"),k2e=A2e("species"),iI=Array,P2e=Math.max;S2e({target:"Array",proto:!0,forced:!O2e},{slice:function(e,t){var r,n,i,o=I2e(this),a=R2e(o),s=aF(e,a),c=aF(t===void 0?a:t,a);if(oF(o)&&(r=o.constructor,(T2e(r)&&(r===iI||oF(r.prototype))||C2e(r)&&(r=r[k2e])===null)&&(r=void 0),r===iI||r===void 0))return N2e(o,s,c);for(n=new(r===void 0?iI:r)(P2e(c-s,0)),i=0;s<c;s++,i++)s in o&&x2e(n,i,o[s]);return n.length=i,n}});var D2e=ss("Array").slice,L2e=Ii,M2e=D2e,oI=Array.prototype,j2e=function(e){var t=e.slice;return e===oI||L2e(oI,e)&&t===oI.slice?M2e:t},U2e=Nr(j2e);function ve(e,t,r,n,i){var o,a,s,c={};return h2e(o=lQ(n)).call(o,function(l){c[l]=n[l]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=f2e(a=w2e(s=U2e(r).call(r)).call(s)).call(a,function(l,d){return d(e,t,l)||l},c),i&&c.initializer!==void 0&&(c.value=c.initializer?c.initializer.call(i):void 0,c.initializer=void 0),c.initializer===void 0&&(XX(e,t,c),c=null),c}var BN=function(e){return e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L1T3_KEY="L1T3_KEY",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY",e}({}),vo=function(e){return e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver",e}({}),y_=function(e){return e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",e}({}),aI=function(e){return e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR",e}({}),Na=function(e){return e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",e}({}),pi=function(e){return e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",e}({}),Ae=function(e){return e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",e}({}),Kt=function(e){return e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed",e}({}),je=function(e){return e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.PRE_CONNECT_PC="pre_connect_pc",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",e}({}),Me=function(e){return e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag",e}({}),W0=function(e){return e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats",e}({}),lt=function(e){return e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list",e}({}),Ei=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({}),Ve=function(e){return e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",e}({}),G=class extends X{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",arguments.length>2?arguments[2]:void 0),C(this,"name","AgoraRTCException")}print(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return super.print(e,b)}throw(){super.throw(b)}};function lT(e){if(typeof e!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw b.error("Invalid Channel Name ".concat(e)),new G(I.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function dT(e){if(!function(t){return typeof t=="number"&&Math.floor(t)===t&&0<=t&&t<=4294967295}(e)&&!QJ(e,1,255))throw new G(I.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");typeof e=="string"&&b.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}var Zc=function(e){return e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e}({}),F2e={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},sI={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function cI(e,t){En(e.url,"".concat(t,".url"),1,1e3,!1),dr(e.x)||Vt(e.x,"".concat(t,".x"),0,1e4),dr(e.y)||Vt(e.y,"".concat(t,".y"),0,1e4),dr(e.width)||Vt(e.width,"".concat(t,".width"),0,1e4),dr(e.height)||Vt(e.height,"".concat(t,".height"),0,1e4),dr(e.zOrder)||Vt(e.zOrder,"".concat(t,".zOrder"),0,255),dr(e.alpha)||Vt(e.alpha,"".concat(t,".alpha"),0,1,!1)}var V2e={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},Kl=function(e){return e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address",e}({}),$N=function(e){return e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",e}({}),Gr=function(e){return e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",e}({});function sF(e){if(!e.channelName)throw new G(I.INVALID_PARAMS,"invalid channelName in info");if(typeof e.uid!="number")throw new G(I.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&En(e.token,"info.token",1,2047),dT(e.uid),lT(e.channelName),!0}var fi=function(e){return e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile",e}({}),Uc=function(e){return e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",e}({}),Gi=function(e){return e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",e}({}),sp=function(e){return e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",e}({}),Nt=function(e){return e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low",e}({}),An=function(e){return e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.PRE_CONNECT_PC="pre-connect_pc",e}({}),v_=function(e){return e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON",e}({}),nn=function(e){return e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7",e}({}),Tt=function(e){return e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS",e}({}),cF=[Tt.AFRICA,Tt.ASIA,Tt.CHINA,Tt.EUROPE,Tt.GLOBAL,Tt.INDIA,Tt.JAPAN,Tt.NORTH_AMERICA,Tt.OCEANIA,Tt.OVERSEA,Tt.SOUTH_AMERICA],Vn=function(e){return e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL",e}({}),uT={CHINA:{},ASIA:{CODE:Vn.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Vn.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Vn.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Vn.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Vn.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Vn.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Vn.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Vn.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Vn.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Vn.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Vn.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Vn.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Vn.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};VD&&(uT.CHINA={CODE:Vn.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});var HN=function(e){return e.UPDATE_BITRATE_LIMIT="update_bitrate_limit",e}({}),uQ=class extends fr{constructor(e,t){super(),C(this,"onICEConnectionStateChange",void 0),C(this,"onConnectionStateChange",void 0),C(this,"onDTLSTransportStateChange",void 0),C(this,"onDTLSTransportError",void 0),C(this,"onICETransportStateChange",void 0),C(this,"onFirstAudioReceived",void 0),C(this,"onFirstVideoReceived",void 0),C(this,"onFirstAudioDecoded",void 0),C(this,"onFirstVideoDecoded",void 0),C(this,"onFirstVideoDecodedTimeout",void 0),C(this,"onSelectedLocalCandidateChanged",void 0),C(this,"onSelectedRemoteCandidateChanged",void 0),C(this,"getLocalVideoStats",void 0)}},hQ=class extends uQ{constructor(e,t){super(e,t),C(this,"establishPromise",void 0)}},Se=function(e){return e.VIDEO="video",e.AUDIO="audio",e}({}),lo=function(e){return e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY",e}({}),Dc=function(e){return e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",e}({}),ie=function(e){return e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack",e}({}),At=function(e){return e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected",e}({}),Oe=function(e){return e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE",e}({}),ja=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),Oa=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),un=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),pQ=function(e){return e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback",e.PRE_CONNECT_PC="transmitter:pre_connect_pc",e}({}),oc=function(e){return e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation",e}({}),Yo=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),ys=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),qh=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),Rr=function(e){return e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check",e}({}),Yh=function(e){return e.ABORT="abort",e}({}),id=function(e){return e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e}({}),B2e=function(e){return e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed",e}({}),$2e={[y_.ACCESS_POINT]:{[pi.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[pi.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[pi.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[pi.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[pi.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[pi.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[pi.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[pi.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[pi.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[pi.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[pi.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[pi.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[pi.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[pi.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[pi.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[pi.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[pi.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[pi.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[y_.UNILBS]:{[Na.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Na.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Na.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Na.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Na.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Na.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Na.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Na.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Na.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Na.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Na.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Na.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[y_.STRING_UID_ALLOCATOR]:{[aI.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[aI.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[aI.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function Of(e){let t=$2e[Math.floor(e/1e4)];if(!t)return{desc:"unknown error",retry:!1};let r=t[e%1e4];if(!r){if(Math.floor(e/1e4)===y_.ACCESS_POINT){let n=e%1e4;if(n.toString()[0]==="1")return{desc:e.toString(),retry:!1};if(n.toString()[0]==="2")return{desc:e.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return r}var H2e={[Ae.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Ae.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Ae.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Ae.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Ae.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Ae.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Ae.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Ae.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Ae.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Ae.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Ae.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Ae.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[Ae.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ae.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ae.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Ae.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Ae.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Ae.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Ae.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Ae.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Ae.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Ae.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Ae.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Ae.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Ae.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Ae.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Ae.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Ae.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Ae.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Ae.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Ae.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Ae.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Ae.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Ae.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Ae.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Ae.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Ae.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Ae.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Ae.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Ae.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Ae.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ae.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ae.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Ae.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Ae.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Ae.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Ae.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Ae.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Ae.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Ae.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Ae.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Ae.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Ae.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Ae.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Ae.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Ae.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Ae.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[Ae.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[Ae.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[Ae.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[Ae.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[Ae.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[Ae.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function G0(e){return H2e[e]||{desc:"UNKNOWN_ERROR_".concat(e),action:"failed"}}function lF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lF(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dF(e){return e.every(t=>t.readyState===WebSocket.CLOSED||t.readyState===WebSocket.CLOSING)}function uF(e,t){if(typeof e=="string")return e;let{proxy:r,host:n,port:i}=e;if(t){let o=D("JOIN_GATEWAY_FALLBACK_PORT")||443;return o===443?"wss://".concat(n,"/ws/?p=").concat(Number(i)+150):"wss://".concat(n,":").concat(o,"/ws/?p=").concat(Number(i)+150)}return r?"wss://".concat(r,"/ws/?h=").concat(n,"&p=").concat(i):"wss://".concat(n,":").concat(i)}var W2e=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,G2e=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,z2e=/wss:\/\/(.+):([0-9]+)\/?/,K2e=/wss:\/\/(.[^\/]+)\/?/,q2e=0,Y2e=class{constructor(e,t){C(this,"id",0),C(this,"store",void 0),C(this,"recordIndex",void 0),C(this,"websockets",[]),C(this,"try443PortDuration",2e3),C(this,"forceCloseWSDuration",5e3),C(this,"try443PortTimeout",null),C(this,"forceCloseTimeout",null),C(this,"isTry443PortFailed",!1),C(this,"isNormalPortFailed",!1),C(this,"useDoubleDomain",!1),C(this,"useProxy",!1),C(this,"startTime",Date.now()),this.id=++q2e,this.try443PortDuration=D("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach(e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()}),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var e;let t=Date.now()-this.startTime;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];b.debug("[choose-best-ws ".concat((e=this.store)===null||e===void 0?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:"),...n)}createWebSocket(e,t,r){this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:r});let n=D("GATEWAY_DOMAINS"),i=Date.now(),o=[],a=n.find(l=>{var d;return pe(d=e.host).call(d,l)});a||(this.useDoubleDomain=!1);let s=[];if(this.useDoubleDomain)n.forEach(l=>{s.push(uF(lI(lI({},e),{},{host:e.host.replace(a,l)}),t))});else{let l=lI({},e);if(t&&a){let d=n.find(u=>u!==a);d&&(l.host=l.host.replace(a,d))}s.push(uF(l,t))}try{s.forEach(l=>{let d=new WebSocket(l);d.binaryType="arraybuffer",o.push(d),this.logger("ws is connecting:",d.url)})}catch(l){if(this.logger("ws create failed"),o.forEach(d=>d.close()),o.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,r);if(!t&&Number(e.port)!==443)return this.createWebSocket(e,!0,r);throw new G(I.WS_ERR,"init websocket failed! Error: ".concat(l.toString()))}let c=B0();return this.store&&this.store.recordJoinChannelService({urls:o.map(l=>l.url),service:"gateway"},this.recordIndex),o.forEach(l=>{l.onopen=()=>{this.logger("onopen: ws ".concat(l.url," open cost ").concat(Date.now()-i,"ms")),this.websockets.forEach(d=>{d!==l&&(d.onopen=null,d.onclose=null,d.onmessage=null,d.close(),this.logger("close backup websocket: ".concat(d.url)))}),this.websockets.length=0,c.resolve(l)},l.onclose=d=>{this.logger("onclose: ws ".concat(l.url," closed cost ").concat(Date.now()-i,"ms state: ").concat(l.readyState)),t?this.isTry443PortFailed=dF(o):this.isNormalPortFailed=dF(o),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),(t&&this.isTry443PortFailed||!t&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(d.reason)),c.reject({code:d.code,reason:v_.A_ROUND_WS_FAILED}))},l.onmessage=d=>this.logger("".concat(l.url," onmessage: ").concat(d.data))}),this.websockets.push(...o),r||(()=>{let l=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",c.isResolved),this.websockets.forEach(d=>d.readyState!==WebSocket.OPEN&&d.close())};if(t||this.useProxy)return this.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(l,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout(()=>{if(this.logger("2s timeout, isWebsocket created: ",c.isResolved),c.isResolved)return l();vt().os===sn.MAC_OS&&_r()&&l(),this.createWebSocket(e,!0,!0).then(d=>c.resolve(d)).catch(d=>{this.isNormalPortFailed&&c.reject(d),this.logger("try 443 port to create ws failed")}),this.forceCloseTimeout=window.setTimeout(l,this.forceCloseWSDuration)},this.try443PortDuration)})(),c.promise}chooseBestWebsocket(e,t,r,n){return this.useDoubleDomain=!!t,typeof e=="string"&&(e=function(i){let o,a,s;return[,o,a,s]=i.match(W2e)||[],o||([,a,s]=i.match(G2e)||[]),a&&s||([,a,s]=i.match(z2e)||[]),a&&s||([,a]=i.match(K2e)||[]),a||b.warning("un-destructible url: ",i),{proxy:o,host:a,port:s||"443"}}(e)),this.recordIndex=n,this.useProxy=!!e.proxy,r&&this.useProxy&&(b.warn("cannot use 443 only when use proxy"),r=!1),this.createWebSocket(e,!!r,!1).finally(()=>this.clearTimeout())}};function hF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var fQ=class extends fr{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;pe(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,this._state==="reconnecting"?this.emit(Ve.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(Ve.CONNECTED):this._state==="closed"?this.emit(Ve.CLOSED):this._state==="failed"&&this.emit(Ve.FAILED))}resetReconnectCount(e){b.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],n=arguments.length>3&&arguments[3]!==void 0&&arguments[3],i=arguments.length>4&&arguments[4]!==void 0&&arguments[4],o=arguments.length>5?arguments[5]:void 0;super(),C(this,"connectionID",0),C(this,"currentURLIndex",0),C(this,"urls",[]),C(this,"_reconnectMode","tryNext"),C(this,"reconnectReason",void 0),C(this,"_initMutex",new zn("websocket")),C(this,"name",void 0),C(this,"_state","closed"),C(this,"reconnectInterrupter",void 0),C(this,"websocket",void 0),C(this,"retryConfig",void 0),C(this,"reconnectCount",0),C(this,"forceCloseTimeout",5e3),C(this,"onlineReconnectListener",void 0),C(this,"useCompress",void 0),C(this,"tryDoubleDomain",!1),C(this,"use443PortOnly",!1),C(this,"wsInflateLength",0),C(this,"wsDeflateLength",0),C(this,"closeEstablishingWs",()=>{}),C(this,"store",void 0),C(this,"joinGatewayRecordIndex",void 0),this.store=o,this.name=e,this.retryConfig=function(d){for(var u=1;u<arguments.length;u++){var p=arguments[u]!=null?arguments[u]:{};u%2?hF(Object(p),!0).forEach(function(f){C(d,f,p[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(p)):hF(Object(p)).forEach(function(f){Object.defineProperty(d,f,Object.getOwnPropertyDescriptor(p,f))})}return d}({},t),this.useCompress=r,this.tryDoubleDomain=n,this.use443PortOnly=i;let{timeout:a,timeoutFactor:s}=t,c=Math.max(300,Math.floor(3*a/5)),l=Math.max(1.2,Math.floor(8*s)/10);co.ONLINE&&(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l),Lr.on(Pp.NETWORK_STATE_CHANGE,(d,u)=>{d!==u&&(this.resetReconnectCount("network state change: ".concat(u," -> ").concat(d)),d===co.ONLINE?(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l):(this.retryConfig.timeout=a,this.retryConfig.timeoutFactor=s))})}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,r=await this._initMutex.lock();this.forceCloseTimeout=t,this.urls=e,this.state="connecting";try{let n=B0(),i=this.urls[this.currentURLIndex];D("ENABLE_PREALLOC_PC")&&this.emit(pQ.PRE_CONNECT_PC),this.createWebSocketConnection(i).then(n.resolve).catch(n.reject),this.once(Ve.CLOSED,()=>{n.reject(new X(I.WS_DISCONNECT))}),this.once(Ve.CONNECTED,n.resolve),await n.promise}catch{}finally{r()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;let r=this.websocket;t?setTimeout(()=>r.close(),500):r.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void b.warning("[".concat(this.name,"] can not reconnect, no websocket"));e!==void 0&&(this.reconnectMode=e),b.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinGatewayRecordIndex=="number"&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);let r=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),r&&r.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new X(I.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(r){throw new X(I.WS_ERR,"send websocket message error"+r.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){let e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;let r=B0();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;let n=l=>{var d;(d=this.store)===null||d===void 0||d.signalChannelOpen(),b.debug("[".concat(this.name,"] websocket opened:"),l),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),r.resolve()},i=async l=>{var d;if(b.debug("[".concat(this.name,"] websocket close ").concat((d=this.websocket)===null||d===void 0?void 0:d.url,", code: ").concat(l.code,", reason: ").concat(l.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)r.reject(new X(I.WS_DISCONNECT,"websocket close: ".concat(l.code))),this.close();else{this.state==="connected"&&(this.reconnectReason=l.reason,this.state="reconnecting");let u=oa(this,Ve.WILL_RECONNECT,this.reconnectMode,l.reason)||this.reconnectMode,p=await this.reconnectWithAction(u);if(this.state==="closed")return void b.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!p)return r.reject(new X(I.WS_DISCONNECT,"websocket reconnect failed: ".concat(l.code))),this.close(!0);r.resolve()}},o=l=>{this.emit(Ve.ON_MESSAGE,l)},a=l=>{b.warn("[".concat(this.connectionID,"] ws open error ").concat(l))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),D("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=D("GATEWAY_WSS_ADDRESS")),b.debug("[".concat(this.name,"] start connect, url:"),e);let s=(t=this.store)===null||t===void 0?void 0:t.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var c;let l=await this.chooseBestWebsocketConnection(e);this.websocket=l,n&&n(this.websocket.url),this.websocket.onclose=i,this.websocket.onmessage=o,this.websocket.onerror=a,(c=this.store)===null||c===void 0||c.recordJoinChannelService({endTs:Date.now(),status:"success"},s),this.joinGatewayRecordIndex=s}catch(l){let d=this.state==="closed",u=l instanceof X,p=u&&l.code===I.WS_ABORT,f=u&&l.code===I.WS_ERR,m=u?l.message:l&&(l.reason||l.toString());b.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(m)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:p?"aborted":"error",errors:[l]},s),d||f?(r.reject(d?new X(I.WS_DISCONNECT,"websocket is closed: ".concat(m)):new X(I.WS_ERR,"init websocket failed: ".concat(m))),f&&b.error("[".concat(this.name,"] init websocket failed: ").concat(m))):i&&i(l)}return r.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||this.urls.length===0||this.state==="closed")return!1;b.warning("[choose-best-ws] action: =>",e),this.onlineReconnectListener||Lr.isOnline||!Lr.onlineWaiter||(this.onlineReconnectListener=Lr.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let r=!0;if(this.reconnectInterrupter=()=>r=!1,t){let o=FD(this.reconnectCount,this.retryConfig);b.debug("[".concat(this.name,"] wait ").concat(o,"ms to reconnect websocket, mode: ").concat(e)),await de.race([Tn(o),this.onlineReconnectListener||new de(()=>{})])}if(this._state==="closed"||!r)return!1;this.reconnectCount+=1;let n=async(o,a)=>{this.emit(Ve.RECONNECT_CREATE_CONNECTION,a),await this.createWebSocketConnection(o)};try{if(e==="retry")this.emit(Ve.RECONNECT_WAITTING_FINISH,e),await n(this.urls[this.currentURLIndex],e);else if(e==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);b.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit(Ve.RECONNECT_WAITTING_FINISH,e),await n(this.urls[this.currentURLIndex],e)}else e==="recover"&&(b.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(Ve.RECONNECT_WAITTING_FINISH,e),this.urls=await Ln(this,Ve.REQUEST_NEW_URLS),this.currentURLIndex=0,await n(this.urls[this.currentURLIndex],e))}catch(o){var i;b.error("[".concat(this.name,"] reconnect failed ").concat(o&&o.toString()));let a=o==null||(i=o.data)===null||i===void 0?void 0:i.desc;return Array.isArray(a)&&pe(a).call(a,"dynamic key expired")?(this.emit(Ve.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}},WD=class extends fQ{constructor(e,t){super(e,t,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){let r=B0(),n=function(o,a){return new Y2e(o,a)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{b.debug("[choose-best-ws] close establishing websockets"),n.closeAllWebsockets(),r.reject(new X(I.WS_ABORT,"choose best websocket aborted"))};let i=D("GATEWAY_DOMAINS");return b.debug("[choose-best-ws] currentDomain: ",e,", domains: ",i,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),n.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(r.resolve).catch(r.reject),r.promise.finally(()=>{this.closeEstablishingWs=void 0})}},z0=class extends fQ{constructor(e,t){super(e,t,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new de((r,n)=>{let i=!1,o=[];this.closeEstablishingWs=()=>{b.debug("[choose-best-ws] close establishing websockets"),o.forEach(f=>{f.onclose=null,f.onopen=null,f.onmessage=null,f.close()}),n(new X(I.WS_ABORT,"choose best websocket aborted"))};let a=D("GATEWAY_DOMAINS"),s,c=e.indexOf("?h="),l=a.find(f=>c!==-1?pe(e).call(e,f,c):pe(e).call(e,f));b.debug("[choose-best-ws] currentDomain: ",l,", domains: ",a);let d=!this.tryDoubleDomain||!l;if(!d&&l){var u;let f=Date.now();try{a.forEach(m=>{let g=c===-1?e.replace(l,m):e.substr(0,c)+e.substr(c).replace(l,m),y=new WebSocket(g);y.binaryType="arraybuffer",o.push(y),b.debug("[choose-best-ws] ws is connecting:",y.url)})}catch{for(b.debug("[choose-best-ws] ws create failed, fallback to single url"),o.forEach(m=>m.close());o.length;)o.pop();d=!0}(u=this.store)===null||u===void 0||u.recordJoinChannelService({urls:o.map(m=>m.url),service:"gateway"},t),o.forEach(m=>{m.onopen=()=>{if(i)return;let g=Date.now()-f;b.debug("[choose-best-ws] ws open cost ".concat(g,"ms")),o.filter(y=>y!==m).forEach(y=>{b.debug("[choose-best-ws]close backup websocket: ".concat(y.url)),y.close()}),i=!0,r(m)},m.onclose=g=>{s=g,!i&&(o.find(y=>!(y.readyState===WebSocket.CLOSED||y.readyState===WebSocket.CLOSING))||(b.debug("[choose-best-ws] all websocket is closed"),i=!0,n(s)))},m.onmessage=g=>{b.debug("[choose-best-ws]".concat(m.url," onmessage: ").concat(g.data))}}),Tn(this.forceCloseTimeout).then(()=>{o.forEach(m=>{m.readyState!==WebSocket.OPEN&&m.close()})})}if(d){var p;let f;b.debug("[choose-best-ws] use single url: ",e),(p=this.store)===null||p===void 0||p.recordJoinChannelService({urls:[e],service:"gateway"},t);try{f=new WebSocket(e),o.push(f),f.binaryType="arraybuffer"}catch(m){let g=new X(I.WS_ERR,"init websocket failed! Error: ".concat(m.toString()));return b.error("[".concat(this.name,"]").concat(g)),void n(g)}f.onopen=()=>{r(f)},f.onclose=m=>{n(m)},f.onmessage=m=>{b.debug("[choose-best-ws]".concat(f.url," onmessage: ").concat(m.data))},Tn(this.forceCloseTimeout).then(()=>{f&&f.readyState!==WebSocket.OPEN&&f.close()})}}).then(r=>(this.closeEstablishingWs=void 0,r)).catch(r=>{throw this.closeEstablishingWs=void 0,r})}},X2e=class extends fr{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===Kt.CONNECTED?this.emit(je.WS_CONNECTED):e===Kt.RECONNECTING?this.emit(je.WS_RECONNECTING,this._websocketReconnectReason):e===Kt.CLOSED&&this.emit(je.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),C(this,"_disconnectedReason",void 0),C(this,"_websocketReconnectReason",void 0),C(this,"_connectionState",Kt.CLOSED),C(this,"reconnectToken",void 0),C(this,"websocket",void 0),C(this,"openConnectionTime",void 0),C(this,"clientId",void 0),C(this,"lastMsgTime",Date.now()),C(this,"uploadCache",[]),C(this,"uploadCacheInterval",void 0),C(this,"rttRolling",new oQ(5)),C(this,"pingpongTimer",void 0),C(this,"wsInflateDataTimer",void 0),C(this,"pingpongTimeoutCount",0),C(this,"joinResponse",void 0),C(this,"multiIpOption",void 0),C(this,"initError",void 0),C(this,"spec",void 0),C(this,"store",void 0),C(this,"onWebsocketMessage",r=>{if(r.data instanceof ArrayBuffer)return void this.emit(je.ON_BINARY_DATA,r.data);let n=JSON.parse(r.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(n,"_id")){let i="res-@".concat(n._id);this.emit(i,n._result,n._message)}else if(Object.prototype.hasOwnProperty.call(n,"_type")){if(this.emit(n._type,n._message),n._type===lt.ON_NOTIFICATION&&this.handleNotification(n._message),n._type===lt.ON_USER_BANNED)switch(n._message.error_code){case 14:this.close(Mt.UID_BANNED);break;case 15:this.close(Mt.IP_BANNED);break;case 16:this.close(Mt.CHANNEL_BANNED)}if(n._type===lt.ON_USER_LICENSE_BANNED)switch(n._message.error_code){case Ae.ERR_LICENSE_MISSING:this.close(Mt.LICENSE_MISSING);break;case Ae.ERR_LICENSE_EXPIRED:this.close(Mt.LICENSE_EXPIRED);break;case Ae.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Mt.LICENSE_MINUTES_EXCEEDED);break;case Ae.ERR_LICENSE_PERIOD_INVALID:this.close(Mt.LICENSE_PERIOD_INVALID);break;case Ae.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Mt.LICENSE_MULTIPLE_SDK_SERVICE);break;case Ae.ERR_LICENSE_ILLEGAL:this.close(Mt.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new WD("gateway-".concat(this.clientId),this.spec.retryConfig,!0,D("JOIN_GATEWAY_USE_DUAL_DOMAIN"),D("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Kt.CONNECTED&&this.reconnect("retry",Pn.OFFLINE)})}async request(e,t,r,n){let i=qt(6,""),o={_id:i,_type:e,_message:t},a=this.websocket.connectionID,s=()=>new de((f,m)=>{if(this.connectionState===Kt.CONNECTED)return f();let g=()=>{this.off(je.WS_CLOSED,y),f()},y=()=>{this.off(je.WS_CONNECTED,g),m(new G(I.WS_ABORT))};this.once(je.WS_CONNECTED,g),this.once(je.WS_CLOSED,y),e!==Me.PUBLISH&&e!==Me.PUBLISH_DATASTREAM&&e!==Me.SUBSCRIBE&&e!==Me.SUBSCRIBE_DATASTREAM&&e!==Me.UNSUBSCRIBE&&e!==Me.UNSUBSCRIBE_DATASTREAM&&e!==Me.UNPUBLISH&&e!==Me.UNPUBLISH_DATASTREAM&&e!==Me.CONTROL&&e!==Me.RESTART_ICE||this.once(je.DISCONNECT_P2P,()=>{m(new G(I.DISCONNECT_P2P))}),e!==Me.PUBLISH&&e!==Me.RESTART_ICE||this.once(je.ABORT_P2P_EXECUTION,()=>{m(new G(I.DISCONNECT_P2P))})});if(this.connectionState!==Kt.CONNECTING&&this.connectionState!==Kt.RECONNECTING||e===Me.JOIN||e===Me.REJOIN||await s(),this.websocket.sendMessage(o,!0),n)return;let c=new de((f,m)=>{let g=!1,y=(E,w)=>{g=!0,f({isSuccess:E==="success",message:w||{}}),this.off(je.WS_CLOSED,v),this.off(je.WS_RECONNECTING,v),this.emit(je.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),y);let v=()=>{m(new G(I.WS_ABORT,"type: ".concat(e))),this.off(je.WS_CLOSED,v),this.off(je.WS_RECONNECTING,v),this.off("res-@".concat(i),y)};this.once(je.WS_CLOSED,v),this.once(je.WS_RECONNECTING,v),Tn(D("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==a||g||(b.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(je.REQUEST_TIMEOUT,e,t))})}),l=null;try{l=await c}catch(f){if(this.connectionState===Kt.CLOSED||e===Me.LEAVE)throw new G(I.WS_ABORT);return!this.spec.forceWaitGatewayResponse||r?f.throw():e===Me.JOIN||e===Me.REJOIN?null:(await s(),await this.request(e,t))}if(l.isSuccess)return l.message;let d=Number(l.message.error_code||l.message.code),u=G0(d),p=new G(I.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(l.message.error_str),{code:d,data:l.message,desc:u.desc});return u.action==="success"?l.message:(b.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(d,", message: ").concat(u.desc,", action: ").concat(u.action)),d===Ae.ERR_TOO_MANY_BROADCASTERS?((e===Me.JOIN||e===Me.REJOIN)&&(this.initError=p,this.close()),p.throw()):u.action==="failed"?p.throw():u.action==="quit"?(this.initError=p,this.close(),p.throw()):(d===Ae.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,b.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Pn.MULTI_IP)):this.reconnect(u.action,Pn.SERVER_ERROR),e===Me.JOIN||e===Me.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new de(r=>{let n=i=>{(!t||t(i))&&(this.off(e,n),r(i))};this.on(e,n)})}uploadWRTCStats(e){if(!this.store.sessionId)return void b.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));let t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(W0.WRTC_STATS,t)}upload(e,t){let r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch{let n=D("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>n&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Kt.CONNECTED)return;let i=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(i._type,i._message)},D("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){let r={_type:e,_message:t};this.websocket.sendMessage(r)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new de((r,n)=>{this.once(je.WS_CONNECTED,()=>r(this.joinResponse)),this.once(je.WS_CLOSED,()=>n(this.initError||new G(I.WS_ABORT))),this.connectionState=Kt.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||Mt.LEAVE,this.connectionState=Kt.CLOSED,b.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(je.ABORT_P2P_EXECUTION);let e=await Ln(this,je.REQUEST_JOIN_INFO),t=await this.request(Me.JOIN,e);if(!t)return this.emit(je.REPORT_JOIN_GATEWAY,v_.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(je.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Kt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new G(I.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");let e=H0(this,je.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;let t=await this.request(Me.REJOIN,e);return!!t&&(this.connectionState=Kt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach(r=>{this.emit(lt.ON_USER_ONLINE,{uid:r.uid}),r.audio&&this.emit(lt.ON_ADD_AUDIO_STREAM,{uid:r.uid,uint_id:r.uint_id,audio:!0,ssrcId:r.audio_ssrc}),r.video&&this.emit(lt.ON_ADD_VIDEO_STREAM,{uid:r.uid,uint_id:r.uint_id,video:!0,ssrcId:r.video_ssrc}),r.audio_mute?this.emit(lt.MUTE_AUDIO,{uid:r.uid}):this.emit(lt.UNMUTE_AUDIO,{uid:r.uid}),r.video_mute?this.emit(lt.MUTE_VIDEO,{uid:r.uid}):this.emit(lt.UNMUTE_VIDEO,{uid:r.uid}),r.audio_enable_local?this.emit(lt.ENABLE_LOCAL_AUDIO,{uid:r.uid}):this.emit(lt.DISABLE_LOCAL_AUDIO,{uid:r.uid}),r.video_enable_local?this.emit(lt.ENABLE_LOCAL_VIDEO,{uid:r.uid}):this.emit(lt.DISABLE_LOCAL_VIDEO,{uid:r.uid}),r.audio||r.video||this.emit(lt.ON_REMOVE_STREAM,{uid:r.uid,uint_id:r.uint_id})}),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){b.debug("[".concat(this.clientId,"] receive notification: "),e);let t=G0(e.code);if(t.action!=="success"){if(t.action!=="failed")return t.action==="quit"?(t.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Mt.UID_BANNED),void this.close()):void this.reconnect(t.action,Pn.SERVER_ERROR);b.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;let e=D("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(b.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>D("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Pn.TIMEOUT):this.request(Me.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;let r=Date.now()-t;this.rttRolling.add(r),D("REPORT_STATS")&&this.send(Me.PING_BACK,{pingpongElapse:r})}).catch(r=>{})}handleWsInflateData(){let{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();e!==0&&t!==0&&this.upload(W0.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(Ve.RECONNECT_WAITTING_FINISH,e=>{this.emit(je.WS_RECONNECT_WAITTING_FINISH,e)}),this.websocket.on(Ve.RECONNECT_CREATE_CONNECTION,e=>{this.emit(je.WS_RECONNECT_CREATE_CONNECTION,e)}),this.websocket.on(Ve.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Ve.CLOSED,()=>{this.connectionState=Kt.CLOSED}),this.websocket.on(Ve.FAILED,()=>{this._disconnectedReason=Mt.NETWORK_ERROR,this.connectionState=Kt.CLOSED}),this.websocket.on(Ve.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===Kt.CONNECTED?this.connectionState=Kt.RECONNECTING:this.connectionState=Kt.CONNECTING}),this.websocket.on(Ve.WILL_RECONNECT,(e,t,r)=>{let n=H0(this,je.IS_P2P_DISCONNECTED),i=n||e!=="retry";n&&e==="retry"&&(b.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e="tryNext",t=v_.P2P_DISCONNECTED),i&&(b.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(e)),this.emit(je.REPORT_JOIN_GATEWAY,t||v_.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(je.DISCONNECT_P2P)),r(e)}),this.websocket.on(Ve.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(e=>{b.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",Pn.SERVER_ERROR)}):this.join().catch(e=>{if(this.emit(je.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof G){if(e.code===I.UNEXPECTED_RESPONSE&&e.data.code===Ae.ERR_NO_AUTHORIZED)return this.initError=new G(I.CAN_NOT_GET_GATEWAY_SERVER,"AgoraRTCError CAN_NOT_GET_GATEWAY_SERVER: dynamic key expired"),b.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Pn.SERVER_ERROR);b.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Pn.SERVER_ERROR):(this.initError=e,this.close())}})}),this.websocket.on(Ve.REQUEST_NEW_URLS,(e,t)=>{Ln(this,je.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)}),this.websocket.on(Ve.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(lt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(pQ.PRE_CONNECT_PC,()=>{this.emit(je.PRE_CONNECT_PC)})}},Dr=function(e){return e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",e}({});function pF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pF(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mp(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(D("TURN_DOMAIN")):(b.info("Unidentified as ip: ".concat(e,", use as host")),e)}function GD(e,t){e.addresses||(e.addresses=[]);let r=function(s,c){if(D("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return s.map(u=>{let{ip:p,port:f}=u;return{address:"".concat(p,":").concat(f)}});let l=D("GATEWAY_DOMAINS"),d=l[1]&&pe(c).call(c,l[1])?1:0;return s.map(u=>{let{domain_prefix:p,port:f,ip:m}=u;if(p)return{address:"".concat(p,".").concat(l[d++%l.length],":").concat(f)};let g=/^[\.\:\d]+$/.test(m),y=g?"".concat(m.replace(/[^\d]/g,"-"),".").concat(l[d++%l.length],":").concat(f):"".concat(m,":").concat(f);return g||b.info("Unidentified as ip: ".concat(m,", use as host")),{ip:m,port:f,address:y}})}(e.addresses,t),n=Array.isArray(e.detail)&&e.detail[18];if(n&&typeof n=="string"){let s=n.split(";");for(let c=0;c<s.length;c++){var i;let l=li(i=s[c]).call(i);r[c]&&l&&(r[c].ip6=l)}}let o=e.detail&&e.detail.candidate,a;if(o){let[s,c]=o.split(":");s&&c&&(a={port:Number(c),ip:s,address:"".concat(s,":").concat(c)})}return{gatewayAddrs:r,apGatewayAddress:a,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function uo(e){return typeof e=="number"?e:e.exact||e.ideal||e.max||e.min||0}function fF(e){let t=e._encoderConfig;if(!t)return{};let r={resolution:t.width&&t.height?"".concat(uo(t.width),"x").concat(uo(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return typeof t.frameRate=="number"?(r.maxFrameRate=t.frameRate,r.minFrameRate=t.frameRate):t.frameRate&&(r.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,r.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),r}function mF(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function K0(e,t){let r,n,i;switch(t){case Dr.CHOOSE_SERVER:n=4096,i="choose server";break;case Dr.CLOUD_PROXY:n=1048576,i="proxy";break;case Dr.CLOUD_PROXY_5:n=4194304,i="proxy5";break;case Dr.CLOUD_PROXY_FALLBACK:n=4194310,i="proxy fallback";break;default:throw new G(I.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach(o=>{o.buffer&&o.buffer.flag===n&&(r={code:o.buffer.code,addresses:(o.buffer.edges_services||[]).map(a=>dE(dE({},a),{},{ticket:o.buffer.cert})),server_ts:e.enter_ts,uid:o.buffer.uid,cid:o.buffer.cid,cname:o.buffer.cname,detail:dE(dE({},o.buffer.detail),e.detail),flag:o.buffer.flag,opid:e.opid,cert:o.buffer.cert})}),!r)throw new G(I.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return r}async function mQ(e,t){return await de.all(e.addresses.map(async r=>({address:Mp(r.ip),tcpport:r.port,udpport:r.port,username:t&&D("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():Nn.username,password:t&&D("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await UN(t.toString()):Nn.password})))}function WN(e,t){let r=t.getMediaStreamTrack(!0).getSettings(),n=t.videoHeight||r.height,i=t.videoWidth||r.width;return n&&i?Math.max(Math.min(n,i)/Math.min(uo(e.height),uo(e.width)),1):(b.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function od(e){let{candidateType:t,relayProtocol:r,type:n,address:i,port:o,protocol:a}=e;return n==="local-candidate"?{candidateType:t,relayProtocol:r,protocol:a}:{candidateType:t,relayProtocol:r,address:i,port:o,protocol:a}}var ka,J2e=Nr(dQ),Q2e=ss("Array").values,Z2e=Rc,eLe=qn,tLe=Ii,rLe=Q2e,dI=Array.prototype,nLe={DOMTokenList:!0,NodeList:!0},iLe=function(e){var t=e.values;return e===dI||tLe(dI,e)&&t===dI.values||eLe(nLe,Z2e(e))?rLe:t},ol=Nr(iLe),gF=ba,oLe=$r,aLe=Fn,sLe=Yr,uI=KS,cLe=Vy,lLe=FS,dLe=Cc,uLe=VS,Xh=Object.assign,yF=Object.defineProperty,hLe=oLe([].concat),pLe=!Xh||sLe(function(){if(gF&&Xh({b:1},Xh(yF({},"a",{enumerable:!0,get:function(){yF(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(i){t[i]=i}),Xh({},e)[r]!=7||uI(Xh({},t)).join("")!=n})?function(e,t){for(var r=dLe(e),n=arguments.length,i=1,o=cLe.f,a=lLe.f;n>i;)for(var s,c=uLe(arguments[i++]),l=o?hLe(uI(c),o(c)):uI(c),d=l.length,u=0;d>u;)s=l[u++],gF&&!aLe(a,c,s)||(r[s]=c[s]);return r}:Xh,fLe=Zi,mLe=CY,gLe=Vd,yLe=Fn,vLe=Cc,ELe=function(e,t,r,n){try{return n?t(fLe(r)[0],r[1]):t(r)}catch(i){mLe(e,"throw",i)}},_Le=TY,bLe=XS,wLe=El,vF=ZS,SLe=dD,TLe=qS,EF=Array,Rh=$r,hI=2147483647,CLe=/[^\0-\u007E]/,gQ=/[.\u3002\uFF0E\uFF61]/g,_F="Overflow: input needs wider integers to process",bF=RangeError,RLe=Rh(gQ.exec),jp=Math.floor,pI=String.fromCharCode,wF=Rh("".charCodeAt),yQ=Rh([].join),Fl=Rh([].push),ILe=Rh("".replace),xLe=Rh("".split),ALe=Rh("".toLowerCase),SF=function(e){return e+22+75*(e<26)},NLe=function(e,t,r){var n=0;for(e=r?jp(e/700):e>>1,e+=jp(e/t);e>455;)e=jp(e/35),n+=36;return jp(n+36*e/(e+38))},OLe=function(e){var t=[];e=function(v){for(var E=[],w=0,S=v.length;w<S;){var x=wF(v,w++);if(x>=55296&&x<=56319&&w<S){var O=wF(v,w++);(64512&O)==56320?Fl(E,((1023&x)<<10)+(1023&O)+65536):(Fl(E,x),w--)}else Fl(E,x)}return E}(e);var r,n,i=e.length,o=128,a=0,s=72;for(r=0;r<e.length;r++)(n=e[r])<128&&Fl(t,pI(n));var c=t.length,l=c;for(c&&Fl(t,"-");l<i;){var d=hI;for(r=0;r<e.length;r++)(n=e[r])>=o&&n<d&&(d=n);var u=l+1;if(d-o>jp((hI-a)/u))throw bF(_F);for(a+=(d-o)*u,o=d,r=0;r<e.length;r++){if((n=e[r])<o&&++a>hI)throw bF(_F);if(n==o){for(var p=a,f=36;;){var m=f<=s?1:f>=s+26?26:f-s;if(p<m)break;var g=p-m,y=36-m;Fl(t,pI(SF(m+g%y))),p=jp(g/y),f+=36}Fl(t,pI(SF(p))),s=NLe(a,u,l==c),a=0,l++}}a++,o++}return yQ(t,"")},kLe=Yt,zD=ba,PLe=OD,KD=jn,TF=Vd,cs=$r,uE=$d,Pa=YS,DLe=pD,GN=qn,qD=pLe,Jh=function(e){var t=vLe(e),r=bLe(this),n=arguments.length,i=n>1?arguments[1]:void 0,o=i!==void 0;o&&(i=gLe(i,n>2?arguments[2]:void 0));var a,s,c,l,d,u,p=TLe(t),f=0;if(!p||this===EF&&_Le(p))for(a=wLe(t),s=r?new this(a):EF(a);a>f;f++)u=o?i(t[f],f):t[f],vF(s,f,u);else for(d=(l=SLe(t,p)).next,s=r?new this:[];!(c=yLe(d,l)).done;f++)u=o?ELe(l,i,[c.value,f],!0):c.value,vF(s,f,u);return s.length=f,s},hs=wD,LLe=bD.codeAt,MLe=function(e){var t,r,n=[],i=xLe(ILe(ALe(e),gQ,"."),".");for(t=0;t<i.length;t++)r=i[t],Fl(n,RLe(CLe,r)?"xn--"+OLe(r):r);return yQ(n,".")},Fc=wa,jLe=Hd,ULe=JS,vQ=tDe,EQ=Ch,FLe=EQ.set,iw=EQ.getterFor("URL"),VLe=vQ.URLSearchParams,BLe=vQ.getState,Ym=KD.URL,zN=KD.TypeError,hE=KD.parseInt,$Le=Math.floor,CF=Math.pow,Ba=cs("".charAt),gs=cs(/./.exec),mg=cs([].join),HLe=cs(1 .toString),WLe=cs([].pop),Qh=cs([].push),fI=cs("".replace),GLe=cs([].shift),zLe=cs("".split),gg=cs("".slice),E_=cs("".toLowerCase),KLe=cs([].unshift),mI="Invalid scheme",Xm="Invalid host",RF="Invalid port",_Q=/[a-z]/i,qLe=/[\d+-.a-z]/i,gI=/\d/,YLe=/^0x/i,XLe=/^[0-7]+$/,JLe=/^\d+$/,IF=/^[\da-f]+$/i,QLe=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ZLe=/[\0\t\n\r #/:<>?@[\\\]^|]/,eMe=/^[\u0000-\u0020]+/,tMe=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,rMe=/[\t\n\r]/g,Jm=function(e){var t,r,n,i;if(typeof e=="number"){for(t=[],r=0;r<4;r++)KLe(t,e%256),e=$Le(e/256);return mg(t,".")}if(typeof e=="object"){for(t="",n=function(o){for(var a=null,s=1,c=null,l=0,d=0;d<8;d++)o[d]!==0?(l>s&&(a=c,s=l),c=null,l=0):(c===null&&(c=d),++l);return l>s&&(a=c,s=l),a}(e),r=0;r<8;r++)i&&e[r]===0||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=HLe(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},__={},bQ=qD({},__,{" ":1,'"':1,"<":1,">":1,"`":1}),wQ=qD({},bQ,{"#":1,"?":1,"{":1,"}":1}),yI=qD({},wQ,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ol=function(e,t){var r=LLe(e,0);return r>32&&r<127&&!GN(t,e)?e:encodeURIComponent(e)},pE={ftp:21,file:null,http:80,https:443,ws:80,wss:443},yg=function(e,t){var r;return e.length==2&&gs(_Q,Ba(e,0))&&((r=Ba(e,1))==":"||!t&&r=="|")},xF=function(e){var t;return e.length>1&&yg(gg(e,0,2))&&(e.length==2||(t=Ba(e,2))==="/"||t==="\\"||t==="?"||t==="#")},nMe=function(e){return e==="."||E_(e)==="%2e"},vI={},AF={},EI={},NF={},OF={},_I={},kF={},PF={},fE={},mE={},bI={},wI={},SI={},TI={},DF={},CI={},Zh={},Ks={},LF={},Qd={},Lc={},YD=function(e,t,r){var n,i,o,a=Fc(e);if(t){if(i=this.parse(a))throw zN(i);this.searchParams=null}else{if(r!==void 0&&(n=new YD(r,!0)),i=this.parse(a,null,n))throw zN(i);(o=BLe(new VLe)).bindURL(this),this.searchParams=o}};YD.prototype={type:"URL",parse:function(e,t,r){var n,i,o,a,s,c=this,l=t||vI,d=0,u="",p=!1,f=!1,m=!1;for(e=Fc(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=fI(e,eMe,""),e=fI(e,tMe,"$1")),e=fI(e,rMe,""),n=Jh(e);d<=n.length;){switch(i=n[d],l){case vI:if(!i||!gs(_Q,i)){if(t)return mI;l=EI;continue}u+=E_(i),l=AF;break;case AF:if(i&&(gs(qLe,i)||i=="+"||i=="-"||i=="."))u+=E_(i);else{if(i!=":"){if(t)return mI;u="",l=EI,d=0;continue}if(t&&(c.isSpecial()!=GN(pE,u)||u=="file"&&(c.includesCredentials()||c.port!==null)||c.scheme=="file"&&!c.host))return;if(c.scheme=u,t)return void(c.isSpecial()&&pE[c.scheme]==c.port&&(c.port=null));u="",c.scheme=="file"?l=TI:c.isSpecial()&&r&&r.scheme==c.scheme?l=NF:c.isSpecial()?l=PF:n[d+1]=="/"?(l=OF,d++):(c.cannotBeABaseURL=!0,Qh(c.path,""),l=LF)}break;case EI:if(!r||r.cannotBeABaseURL&&i!="#")return mI;if(r.cannotBeABaseURL&&i=="#"){c.scheme=r.scheme,c.path=hs(r.path),c.query=r.query,c.fragment="",c.cannotBeABaseURL=!0,l=Lc;break}l=r.scheme=="file"?TI:_I;continue;case NF:if(i!="/"||n[d+1]!="/"){l=_I;continue}l=fE,d++;break;case OF:if(i=="/"){l=mE;break}l=Ks;continue;case _I:if(c.scheme=r.scheme,i==ka)c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=hs(r.path),c.query=r.query;else if(i=="/"||i=="\\"&&c.isSpecial())l=kF;else if(i=="?")c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=hs(r.path),c.query="",l=Qd;else{if(i!="#"){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=hs(r.path),c.path.length--,l=Ks;continue}c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=hs(r.path),c.query=r.query,c.fragment="",l=Lc}break;case kF:if(!c.isSpecial()||i!="/"&&i!="\\"){if(i!="/"){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,l=Ks;continue}l=mE}else l=fE;break;case PF:if(l=fE,i!="/"||Ba(u,d+1)!="/")continue;d++;break;case fE:if(i!="/"&&i!="\\"){l=mE;continue}break;case mE:if(i=="@"){p&&(u="%40"+u),p=!0,o=Jh(u);for(var g=0;g<o.length;g++){var y=o[g];if(y!=":"||m){var v=Ol(y,yI);m?c.password+=v:c.username+=v}else m=!0}u=""}else if(i==ka||i=="/"||i=="?"||i=="#"||i=="\\"&&c.isSpecial()){if(p&&u=="")return"Invalid authority";d-=Jh(u).length+1,u="",l=bI}else u+=i;break;case bI:case wI:if(t&&c.scheme=="file"){l=CI;continue}if(i!=":"||f){if(i==ka||i=="/"||i=="?"||i=="#"||i=="\\"&&c.isSpecial()){if(c.isSpecial()&&u=="")return Xm;if(t&&u==""&&(c.includesCredentials()||c.port!==null))return;if(a=c.parseHost(u))return a;if(u="",l=Zh,t)return;continue}i=="["?f=!0:i=="]"&&(f=!1),u+=i}else{if(u=="")return Xm;if(a=c.parseHost(u))return a;if(u="",l=SI,t==wI)return}break;case SI:if(!gs(gI,i)){if(i==ka||i=="/"||i=="?"||i=="#"||i=="\\"&&c.isSpecial()||t){if(u!=""){var E=hE(u,10);if(E>65535)return RF;c.port=c.isSpecial()&&E===pE[c.scheme]?null:E,u=""}if(t)return;l=Zh;continue}return RF}u+=i;break;case TI:if(c.scheme="file",i=="/"||i=="\\")l=DF;else{if(!r||r.scheme!="file"){l=Ks;continue}if(i==ka)c.host=r.host,c.path=hs(r.path),c.query=r.query;else if(i=="?")c.host=r.host,c.path=hs(r.path),c.query="",l=Qd;else{if(i!="#"){xF(mg(hs(n,d),""))||(c.host=r.host,c.path=hs(r.path),c.shortenPath()),l=Ks;continue}c.host=r.host,c.path=hs(r.path),c.query=r.query,c.fragment="",l=Lc}}break;case DF:if(i=="/"||i=="\\"){l=CI;break}r&&r.scheme=="file"&&!xF(mg(hs(n,d),""))&&(yg(r.path[0],!0)?Qh(c.path,r.path[0]):c.host=r.host),l=Ks;continue;case CI:if(i==ka||i=="/"||i=="\\"||i=="?"||i=="#"){if(!t&&yg(u))l=Ks;else if(u==""){if(c.host="",t)return;l=Zh}else{if(a=c.parseHost(u))return a;if(c.host=="localhost"&&(c.host=""),t)return;u="",l=Zh}continue}u+=i;break;case Zh:if(c.isSpecial()){if(l=Ks,i!="/"&&i!="\\")continue}else if(t||i!="?")if(t||i!="#"){if(i!=ka&&(l=Ks,i!="/"))continue}else c.fragment="",l=Lc;else c.query="",l=Qd;break;case Ks:if(i==ka||i=="/"||i=="\\"&&c.isSpecial()||!t&&(i=="?"||i=="#")){if((s=E_(s=u))===".."||s==="%2e."||s===".%2e"||s==="%2e%2e"?(c.shortenPath(),i=="/"||i=="\\"&&c.isSpecial()||Qh(c.path,"")):nMe(u)?i=="/"||i=="\\"&&c.isSpecial()||Qh(c.path,""):(c.scheme=="file"&&!c.path.length&&yg(u)&&(c.host&&(c.host=""),u=Ba(u,0)+":"),Qh(c.path,u)),u="",c.scheme=="file"&&(i==ka||i=="?"||i=="#"))for(;c.path.length>1&&c.path[0]==="";)GLe(c.path);i=="?"?(c.query="",l=Qd):i=="#"&&(c.fragment="",l=Lc)}else u+=Ol(i,wQ);break;case LF:i=="?"?(c.query="",l=Qd):i=="#"?(c.fragment="",l=Lc):i!=ka&&(c.path[0]+=Ol(i,__));break;case Qd:t||i!="#"?i!=ka&&(i=="'"&&c.isSpecial()?c.query+="%27":c.query+=i=="#"?"%23":Ol(i,__)):(c.fragment="",l=Lc);break;case Lc:i!=ka&&(c.fragment+=Ol(i,bQ))}d++}},parseHost:function(e){var t,r,n;if(Ba(e,0)=="["){if(Ba(e,e.length-1)!="]"||(t=function(i){var o,a,s,c,l,d,u,p=[0,0,0,0,0,0,0,0],f=0,m=null,g=0,y=function(){return Ba(i,g)};if(y()==":"){if(Ba(i,1)!=":")return;g+=2,m=++f}for(;y();){if(f==8)return;if(y()!=":"){for(o=a=0;a<4&&gs(IF,y());)o=16*o+hE(y(),16),g++,a++;if(y()=="."){if(a==0||(g-=a,f>6))return;for(s=0;y();){if(c=null,s>0){if(!(y()=="."&&s<4))return;g++}if(!gs(gI,y()))return;for(;gs(gI,y());){if(l=hE(y(),10),c===null)c=l;else{if(c==0)return;c=10*c+l}if(c>255)return;g++}p[f]=256*p[f]+c,++s!=2&&s!=4||f++}if(s!=4)return;break}if(y()==":"){if(g++,!y())return}else if(y())return;p[f++]=o}else{if(m!==null)return;g++,m=++f}}if(m!==null)for(d=f-m,f=7;f!=0&&d>0;)u=p[f],p[f--]=p[m+d-1],p[m+--d]=u;else if(f!=8)return;return p}(gg(e,1,-1)),!t))return Xm;this.host=t}else if(this.isSpecial()){if(e=MLe(e),gs(QLe,e)||(t=function(i){var o,a,s,c,l,d,u,p=zLe(i,".");if(p.length&&p[p.length-1]==""&&p.length--,(o=p.length)>4)return i;for(a=[],s=0;s<o;s++){if((c=p[s])=="")return i;if(l=10,c.length>1&&Ba(c,0)=="0"&&(l=gs(YLe,c)?16:8,c=gg(c,l==8?1:2)),c==="")d=0;else{if(!gs(l==10?JLe:l==8?XLe:IF,c))return i;d=hE(c,l)}Qh(a,d)}for(s=0;s<o;s++)if(d=a[s],s==o-1){if(d>=CF(256,5-o))return null}else if(d>255)return null;for(u=WLe(a),s=0;s<a.length;s++)u+=a[s]*CF(256,3-s);return u}(e),t===null))return Xm;this.host=t}else{if(gs(ZLe,e))return Xm;for(t="",r=Jh(e),n=0;n<r.length;n++)t+=Ol(r[n],__);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return GN(pE,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||this.scheme=="file"&&t==1&&yg(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,l=t+":";return i!==null?(l+="//",e.includesCredentials()&&(l+=r+(n?":"+n:"")+"@"),l+=Jm(i),o!==null&&(l+=":"+o)):t=="file"&&(l+="//"),l+=e.cannotBeABaseURL?a[0]:a.length?"/"+mg(a,"/"):"",s!==null&&(l+="?"+s),c!==null&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw zN(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e=="blob")try{return new kf(e.path[0]).origin}catch{return"null"}return e!="file"&&this.isSpecial()?e+"://"+Jm(this.host)+(t!==null?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Fc(e)+":",vI)},getUsername:function(){return this.username},setUsername:function(e){var t=Jh(Fc(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Ol(t[r],yI)}},getPassword:function(){return this.password},setPassword:function(e){var t=Jh(Fc(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Ol(t[r],yI)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?Jm(e):Jm(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,bI)},getHostname:function(){var e=this.host;return e===null?"":Jm(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,wI)},getPort:function(){var e=this.port;return e===null?"":Fc(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||((e=Fc(e))==""?this.port=null:this.parse(e,SI))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+mg(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Zh))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){(e=Fc(e))==""?this.query=null:(Ba(e,0)=="?"&&(e=gg(e,1)),this.query="",this.parse(e,Qd)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){(e=Fc(e))!=""?(Ba(e,0)=="#"&&(e=gg(e,1)),this.fragment="",this.parse(e,Lc)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var kf=function(e){var t=DLe(this,io),r=ULe(arguments.length,1)>1?arguments[1]:void 0,n=FLe(t,new YD(e,!1,r));zD||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},io=kf.prototype,Da=function(e,t){return{get:function(){return iw(this)[e]()},set:t&&function(r){return iw(this)[t](r)},configurable:!0,enumerable:!0}};zD&&(Pa(io,"href",Da("serialize","setHref")),Pa(io,"origin",Da("getOrigin")),Pa(io,"protocol",Da("getProtocol","setProtocol")),Pa(io,"username",Da("getUsername","setUsername")),Pa(io,"password",Da("getPassword","setPassword")),Pa(io,"host",Da("getHost","setHost")),Pa(io,"hostname",Da("getHostname","setHostname")),Pa(io,"port",Da("getPort","setPort")),Pa(io,"pathname",Da("getPathname","setPathname")),Pa(io,"search",Da("getSearch","setSearch")),Pa(io,"searchParams",Da("getSearchParams")),Pa(io,"hash",Da("getHash","setHash"))),uE(io,"toJSON",function(){return iw(this).serialize()},{enumerable:!0}),uE(io,"toString",function(){return iw(this).serialize()},{enumerable:!0}),Ym&&(RI=Ym.createObjectURL,II=Ym.revokeObjectURL,RI&&uE(kf,"createObjectURL",TF(RI,Ym)),II&&uE(kf,"revokeObjectURL",TF(II,Ym)));var RI,II;jLe(kf,"URL"),kLe({global:!0,constructor:!0,forced:!PLe,sham:!zD},{URL:kf});var iMe=Yt,oMe=Yr,aMe=JS,MF=wa,sMe=OD,jF=go("URL");iMe({target:"URL",stat:!0,forced:!(sMe&&oMe(function(){jF.canParse()}))},{canParse:function(e){var t=aMe(arguments.length,1),r=MF(e),n=t<2||arguments[1]===void 0?void 0:MF(arguments[1]);try{return!!new jF(r,n)}catch{return!1}}});var UF=Nr(Us.URL),yn={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function _t(){return yn}function SQ(){return"setSinkId"in HTMLAudioElement.prototype&&(!D("RESTRICTION_SET_PLAYBACK_DEVICE")||(vd()||GJ())&&!jD())}function FF(){return!yn.supportUnifiedPlan||D("CHROME_FORCE_PLAN_B")&&Nd()}var bn=function(e){return e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change",e}({});function ep(e,t,r){return{sampleRate:e,stereo:t,bitrate:r}}function mt(e,t,r,n,i){return{width:e,height:t,frameRate:r,bitrateMin:n,bitrateMax:i}}function La(e,t,r,n,i){return{width:{max:e},height:{max:t},frameRate:r,bitrateMin:n,bitrateMax:i}}function xI(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}var cMe={"90p":mt(160,90),"90p_1":mt(160,90),"120p":mt(160,120,15,30,65),"120p_1":mt(160,120,15,30,65),"120p_3":mt(120,120,15,30,50),"120p_4":mt(212,120),"180p":mt(320,180,15,30,140),"180p_1":mt(320,180,15,30,140),"180p_3":mt(180,180,15,30,100),"180p_4":mt(240,180,15,30,120),"240p":mt(320,240,15,40,200),"240p_1":mt(320,240,15,40,200),"240p_3":mt(240,240,15,40,140),"240p_4":mt(424,240,15,40,220),"360p":mt(640,360,15,80,400),"360p_1":mt(640,360,15,80,400),"360p_3":mt(360,360,15,80,260),"360p_4":mt(640,360,30,80,600),"360p_6":mt(360,360,30,80,400),"360p_7":mt(480,360,15,80,320),"360p_8":mt(480,360,30,80,490),"360p_9":mt(640,360,15,80,800),"360p_10":mt(640,360,24,80,800),"360p_11":mt(640,360,24,80,1e3),"480p":mt(640,480,15,100,500),"480p_1":mt(640,480,15,100,500),"480p_2":mt(640,480,30,100,1e3),"480p_3":mt(480,480,15,100,400),"480p_4":mt(640,480,30,100,750),"480p_6":mt(480,480,30,100,600),"480p_8":mt(848,480,15,100,610),"480p_9":mt(848,480,30,100,930),"480p_10":mt(640,480,10,100,400),"720p":mt(1280,720,15,120,1130),"720p_auto":mt(1280,720,30,900,3e3),"720p_1":mt(1280,720,15,120,1130),"720p_2":mt(1280,720,30,120,2e3),"720p_3":mt(1280,720,30,120,1710),"720p_5":mt(960,720,15,120,910),"720p_6":mt(960,720,30,120,1380),"1080p":mt(1920,1080,15,120,2080),"1080p_1":mt(1920,1080,15,120,2080),"1080p_2":mt(1920,1080,30,120,3e3),"1080p_3":mt(1920,1080,30,120,3150),"1080p_5":mt(1920,1080,60,120,4780),"1440p":mt(2560,1440,30,120,4850),"1440p_1":mt(2560,1440,30,120,4850),"1440p_2":mt(2560,1440,60,120,7350),"4k":mt(3840,2160,30,120,8910),"4k_1":mt(3840,2160,30,120,8910),"4k_3":mt(3840,2160,60,120,13500)},lMe={"480p":La(640,480,5),"480p_1":La(640,480,5),"480p_2":La(640,480,30),"480p_3":La(640,480,15),"720p":La(1280,720,5),"720p_auto":mt(1280,720,30,900,3e3),"720p_1":La(1280,720,5),"720p_2":La(1280,720,30),"720p_3":La(1280,720,15),"1080p":La(1920,1080,5),"1080p_1":La(1920,1080,5),"1080p_2":La(1920,1080,30),"1080p_3":La(1920,1080,15)},dMe={"1SL1TL":xI(1,1),"3SL3TL":xI(3,3),"2SL3TL":xI(2,3)};function dc(e){return e||(e="480p_1"),typeof e=="string"?Object.assign({},cMe[e]):e}function AI(e){return typeof e=="string"?Object.assign({},lMe[e]):e}function gE(e){return typeof e=="string"?Object.assign({},dMe[e]):e}var uMe={speech_low_quality:ep(16e3,!1),speech_standard:ep(32e3,!1,18),music_standard:ep(48e3,!1),standard_stereo:ep(48e3,!0,56),high_quality:ep(48e3,!1,128),high_quality_stereo:ep(48e3,!0,192)};function ow(e){return typeof e=="string"?Object.assign({},uMe[e]):e}var cp=[];function VF(e){return Jr(e,"mediaSource",["screen","window","application"]),!0}var fe=function(e){return e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track",e}({}),nr=function(e){return e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream",e}({}),Pf=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),hMe=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),pMe=function(e){return e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY",e}({}),Vu=function(e){return e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received",e.TRACK_UPDATED="track-updated",e}({}),pm=function(e){return e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed",e}({}),Zp=function(e){return e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed",e}({}),fm=function(e){return e.AUDIO="audio",e.VIDEO="video",e.DATA="data",e}({}),Ao=function(e){return e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source",e}({});(function(e){e.UPDATE_TRACK_SOURCE="update-track-source"})({});var KN={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},qN={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},TQ={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},fMe={uplinkNetworkQuality:0,downlinkNetworkQuality:0},CQ={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},wi=function(e){return e.ON_TRACK="on_track",e.ON_NODE="on_node",e}({}),Fo=function(e){return e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints",e}({}),Qm=function(e){return e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND",e}({}),Cu=function(e){return e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",e}({}),si=function(e){return e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata",e}({}),qs=function(e){return e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen",e}({}),NI={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370},b_=function(e){return e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error",e}({});function gt(e,t,r,n,i){var o,a,s={};return Object.keys(n).forEach(function(c){s[c]=n[c]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=Ps(o=J2e(a=r.slice()).call(a)).call(o,function(c,l){return l(e,t,c)||c},s),i&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}function J(e,t,r){return(t=function(n){var i=function(o,a){if(typeof o!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var c=s.call(o,"string");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(n);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BF(Object(r),!0).forEach(function(n){J(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var RQ=class extends fr{set _mediaStreamTrack(e){e!==this.mediaStreamTrack&&(this.safeEmit(Vu.TRACK_UPDATED,e),this.mediaStreamTrack=e)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(e,t){super(),J(this,"trackMediaType",void 0),J(this,"_ID",void 0),J(this,"_rtpTransceiver",void 0),J(this,"_lowRtpTransceiver",void 0),J(this,"_hints",[]),J(this,"_isClosed",!1),J(this,"_originMediaStreamTrack",void 0),J(this,"mediaStreamTrack",void 0),J(this,"_external",{}),this._ID=t||qt(8,"track-"),this._originMediaStreamTrack=e,this.mediaStreamTrack=e,function(r){pe(cp).call(cp,r)||cp.push(r)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){return e||Od(()=>{var t;be.reportApiInvoke(null,{name:zr.GET_MEDIA_STREAM_TRACK,options:[],tag:Er.TRACER}).onSuccess(((t=this._mediaStreamTrack)===null||t===void 0?void 0:t.label)||"")},this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===Pf.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){let t=cp.indexOf(e);t!==-1&&cp.splice(t,1)}(this),this.emit(pm.CLOSED),this.removeAllListeners(Vu.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===Pf.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(Vu.TRANSCEIVER_UPDATED,e,t)}},Up=class extends RQ{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),J(this,"_enabled",!0),J(this,"_muted",!1),J(this,"_isExternalTrack",!1),J(this,"_isClosed",!1),J(this,"_enabledMutex",void 0),J(this,"processor",void 0),J(this,"_processorContext",void 0),J(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new zn("".concat(this.getTrackId())),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return(e=(t=this._originMediaStreamTrack)===null||t===void 0?void 0:t.label)!==null&&e!==void 0?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,b.debug("[".concat(this.getTrackId(),"] close")),this.emit(fe.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=r,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Wt(this,fe.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){b.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(pm.TRACK_ENDED)}stateCheck(e,t){if(b.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),Yc(t,e),this._enabled&&this._muted&&e==="enabled"&&t===!1)throw new X(I.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",b);if(!this._enabled&&!this._muted&&e==="muted"&&t===!0)throw new X(I.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",b)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():de.resolve([])}},$F=window.AudioContext||window.webkitAudioContext,bo=null,Ut=new class extends fr{constructor(){super(...arguments),J(this,"prevState",void 0),J(this,"curState",void 0),J(this,"currentTime",void 0),J(this,"currentTimeStuckAt",void 0),J(this,"interruptDetectorTrack",void 0),J(this,"onLocalAudioTrackMute",()=>{b.info("ios15-interruption-start"),this.emit(bn.IOS_15_16_INTERRUPTION_START)}),J(this,"onLocalAudioTrackUnmute",async()=>{b.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?b.info("ios15-interruption-end-canceled"):(bo&&await bo.suspend(),this.emit(bn.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(e){b.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){b.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function mm(){if(!bo){if(function(){if(!$F)return void b.error("your browser is not support web audio");b.info("create audio context");let e=ar({},D("WEBAUDIO_INIT_OPTIONS"));b.debug("audio context init option:",JSON.stringify(e)),bo=new $F(e),Ut.curState=bo.state,bo.onstatechange=()=>{Ut.prevState=Ut.curState,Ut.curState=bo?bo.state:void 0;let{prevState:t,curState:r}=Ut,n=r==="running",i=r==="interrupted",o=t==="running",a=t==="suspended",s=t==="interrupted",c=vt().osVersion;(bi()||Ja())&&o&&i&&(b.info("ios".concat(c,"-interruption-start")),Ut.emit(bn.IOS_INTERRUPTION_START)),(bi()||Ja())&&(a||s)&&n&&(b.info("ios".concat(c,"-interruption-end")),Ut.emit(bn.IOS_INTERRUPTION_END)),t!==r&&Ut.emit(bn.STATE_CHANGE,r,t)},setInterval(()=>{var t;let r=(t=bo)===null||t===void 0?void 0:t.currentTime;Ut.currentTime!==r?(Ut.currentTimeStuckAt&&(b.debug("AudioContext current time resume at ".concat(r)),Ut.currentTimeStuckAt=void 0),Ut.currentTime=r):(r!==Ut.currentTimeStuckAt&&(be.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:r},tag:Er.TRACER}).onSuccess(),b.warning("AudioContext current time stuck at ".concat(r))),Ut.currentTimeStuckAt=r)},5e3),async function(t){let r=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"],n,i=!1,o=!1,a=!1;function s(g){t.state==="running"?c(!1):bi()||Ja()?t.state==="suspended"&&(c(!0),g&&t.resume().then(l,l)):t.state!=="closed"&&(c(!0),g&&t.resume().then(l,l))}function c(g){if(i!==g){i=g;for(let y=0,v=r;y<v.length;y+=1){let E=v[y];g?window.addEventListener(E,d,{capture:!0,passive:!0}):window.removeEventListener(E,d,{capture:!0,passive:!0})}}}function l(){s(!1)}function d(){s(!0)}function u(g){if(!a)if(n.paused)if(g){let y;p(!1),a=!0;try{y=n.play(),y?y.then(f,f):(n.addEventListener("playing",f),n.addEventListener("abort",f),n.addEventListener("error",f))}catch{f()}}else p(!0);else p(!1)}function p(g){if(o!==g){o=g;for(let y=0,v=r;y<v.length;y++){let E=v[y];g?window.addEventListener(E,m,{capture:!0,passive:!0}):window.removeEventListener(E,m,{capture:!0,passive:!0})}}}function f(){n.removeEventListener("playing",f),n.removeEventListener("abort",f),n.removeEventListener("error",f),a=!1,u(!1)}function m(){u(!0)}if(bi()){let g=t.createMediaStreamDestination(),y=document.createElement("div");y.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=y.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=g.stream,u(!0)}Ut.on(bn.STATE_CHANGE,function(){s(!0)}),s(!1)}(bo)}(),!bo)throw new X(I.NOT_SUPPORTED,"can not create audio context");return bo}return bo}function du(e){if(function(){if(OI!==null)return OI;let n=mm(),i=n.createBufferSource(),o=n.createGain(),a=n.createGain();i.connect(o),i.connect(a),i.disconnect(o);let s=!1;try{i.disconnect(o)}catch{s=!0}return i.disconnect(),OI=s,s}())return;let t=e.connect,r=e.disconnect;e.connect=(n,i,o)=>{var a;return e._inputNodes||(e._inputNodes=[]),pe(a=e._inputNodes).call(a,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,i,o)):t.call(e,n,i)),e},e.disconnect=(n,i,o)=>{r.call(e),n?nw(e._inputNodes,n):e._inputNodes=[];for(let a of e._inputNodes)t.call(e,a)}}var OI=null;function XD(e,t){let r=!1,n=1/t;if(D("DISABLE_WEBAUDIO")){let i=window.setInterval(()=>{r?window.clearInterval(i):e(performance.now()/1e3)},1e3*n)}else{let i=mm(),o=i.createGain();o.gain.value=0,o.connect(i.destination);let a=()=>{if(r)return void(o=null);let s=i.createOscillator();s.onended=a,s.connect(o),s.start(0),s.stop(i.currentTime+n),e(i.currentTime)};a()}return()=>{r=!0}}var IQ=class{constructor(){J(this,"context",void 0),J(this,"analyserNode",void 0),J(this,"sourceNode",void 0),this.context=mm(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=e,e==null||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||bi()||Ja()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;let e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{let r=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(r);for(let n=0;n<e.length;++n)e[n]=r[n]/128-1}let t=Ps(e).call(e,(r,n)=>r+n*n,0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;(e=this.sourceNode)===null||e===void 0||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(t=this.sourceNode)===null||t===void 0||t.connect(this.analyserNode)}catch{b.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}},xQ=class extends fr{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var r;(r=this.sourceNode)===null||r===void 0||r.disconnect(this.outputNode)}catch{}(t=this._processedNode)===null||t===void 0||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),J(this,"outputNode",void 0),J(this,"outputTrack",void 0),J(this,"isPlayed",!1),J(this,"sourceNode",void 0),J(this,"context",void 0),J(this,"audioBufferNode",void 0),J(this,"destNode",void 0),J(this,"audioOutputLevel",0),J(this,"volumeLevelAnalyser",void 0),J(this,"_processedNode",void 0),J(this,"playNode",void 0),J(this,"isDestroyed",!1),J(this,"onNoAudioInput",void 0),J(this,"isNoAudioInput",!1),J(this,"_noAudioInputCount",0),this.context=mm(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),du(this.outputNode),this.volumeLevelAnalyser=new IQ}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=t=>{this.emit(Ao.ON_AUDIO_BUFFER,function(r){for(let n=0;n<r.outputBuffer.numberOfChannels;n+=1){let i=r.outputBuffer.getChannelData(n);for(let o=0;o<i.length;o+=1)i[o]=0}return r.inputBuffer}(t))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!_t().webAudioMediaStreamDest)throw new X(I.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){this.context.state!=="running"&&aT(()=>{Ut.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;bi()||Ja()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();let t=this.volumeLevelAnalyser.getAnalyserNode(),r;t.getFloatTimeDomainData?(r=new Float32Array(t.fftSize),t.getFloatTimeDomainData(r)):(r=new Uint8Array(t.fftSize),t.getByteTimeDomainData(r));let n=!1;for(let i=0;i<r.length;i++)r[i]!==0&&(n=!0);return n?(this.isNoAudioInput=!1,!0):(await Tn(200),await this.checkHasAudioInput(e?e+1:1)&&n)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;(e=this.processedNode)===null||e===void 0||e.disconnect(),(t=this.sourceNode)===null||t===void 0||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?(e=this.processedNode)===null||e===void 0||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}},AQ=class extends xQ{get isFreeze(){return!1}constructor(e,t,r){var n;if(super(),J(this,"sourceNode",void 0),J(this,"track",void 0),J(this,"clonedTrack",void 0),J(this,"audioElement",void 0),J(this,"isCurrentTrackCloned",!1),J(this,"isRemoteTrack",!1),J(this,"originVolumeLevelAnalyser",void 0),J(this,"rebuildWebAudio",async()=>{if(b.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void b.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>b.info("resume success")),b.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();let a=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?a.stop():this.isCurrentTrackCloned=!0;let s=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(s),du(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();let c=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(c,this.context.currentTime),du(this.outputNode),this.emit(Ao.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=s,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),e.kind!=="audio")throw new X(I.UNEXPECTED_ERROR);this.track=e;let i=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(i),du(this.sourceNode),r){let a=r.clone();a.enabled=!0,this.clonedTrack=a,b.debug("create an unmuted track ".concat(a.id," from the original track ").concat(r.id," to get the volume"));let s=this.context.createMediaStreamSource(new MediaStream([a]));du(s),this.originVolumeLevelAnalyser=new IQ,this.originVolumeLevelAnalyser.updateSource(s)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=i;let o=vt();t&&o.os===sn.IOS&&Number((n=o.osVersion)===null||n===void 0?void 0:n.split(".")[0])<15&&(Ut.on(bn.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(a=>{a||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;let t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),du(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Ao.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),Ut.off("state-change",this.rebuildWebAudio),(e=this.originVolumeLevelAnalyser)===null||e===void 0||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){let t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),b.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));let r=this.context.createMediaStreamSource(new MediaStream([t]));du(r),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(r)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}};async function NQ(e,t,r){let n=(o,a)=>o?typeof o!="number"?o.max||o.exact||o.ideal||o.min||a:o:a,i={audio:!!r&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:n(t.height,1080),maxWidth:n(t.width,1920)}}};return t.frameRate&&typeof t.frameRate!="number"?(i.video.mandatory.maxFrameRate=t.frameRate.max,i.video.mandatory.minFrameRate=t.frameRate.min):typeof t.frameRate=="number"&&(i.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(i)}async function mMe(e,t){let r=await OQ(e.mediaSource),{sourceId:n,audio:i}=await function(o){let a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new de((s,c)=>{let l=document.createElement("div");l.innerText="share screen",l.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");let d=document.createElement("div");d.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");let u=document.createElement("div");u.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",u.setAttribute("style","height: 12%;");let p=document.createElement("div");p.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");let f=document.createElement("div");f.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");let m=document.createElement("button");m.innerHTML="cancel",m.setAttribute("style","width: 85px;"),m.onclick=()=>{document.body.removeChild(v);let E=new Error("NotAllowedError");E.name="NotAllowedError",c(E)};let g=a,y=document.createElement("div");if(a){let E=document.createElement("input");E.setAttribute("type","checkbox");let w=document.createElement("span");E.setAttribute("style","margin-right: 6px;"),w.innerText="Share audio",E.checked=g,E.onchange=()=>{g=E.checked},y.appendChild(E),y.appendChild(w)}f.appendChild(y),f.appendChild(m),d.appendChild(u),d.appendChild(p),d.appendChild(f);let v=document.createElement("div");v.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),v.appendChild(l),v.appendChild(d),document.body.appendChild(v),o.map(E=>{if(E.id){let w=document.createElement("div");w.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let S=E.thumbnail;try{let{width:x}=S.getSize();x>1920&&(S=S.resize({width:1920}))}catch(x){throw x&&x.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),x}w.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+S.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+E.name.replace(/[\u00A0-\u9999<>\&]/g,function(x){return"&#"+x.charCodeAt(0)+";"})+"</span>",w.onclick=()=>{document.body.removeChild(v),s({sourceId:E.id,audio:g})},p.appendChild(w)}})})}(r,t);return await NQ(n,e,i)}async function OQ(e){let t=["window","screen"];e!=="application"&&e!=="window"||(t=["window"]),e==="screen"&&(t=["screen"]);let r=eQ();if(!r)throw console.error("failed to fetch electron, please mount it to window"),new X(I.ELECTRON_IS_NULL);let n=null;try{var i;n=((i=r.desktopCapturer)===null||i===void 0?void 0:i.getSources({types:t}))||r.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch{n=null}n&&n.then||(n=new de((o,a)=>{r.desktopCapturer.getSources({types:t},(s,c)=>{s?a(s):o(c)})}));try{return await n}catch(o){throw new X(I.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,o.toString())}}var YN=new zn("safari"),kQ=!1,PQ=!1;async function Io(e,t){let r=0,n=null;for(;r<2;)try{n=await gMe(e,t,r>0);break}catch(i){if(i instanceof X)throw b.error("[".concat(t,"] ").concat(i.toString())),i;let o=w_(i.name||i.code||i,i.message);if(o.code===I.MEDIA_OPTION_INVALID){b.debug("[".concat(t,"] detect media option invalid, retry")),r+=1,await Tn(500);continue}throw b.error("[".concat(t,"] ").concat(o.toString())),o}if(!n)throw new X(I.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return n}async function gMe(e,t,r){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new X(I.NOT_SUPPORTED,"can not find getUserMedia");r&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));let n=_t(),i=new MediaStream;if(e.audioSource&&i.addTrack(e.audioSource),e.videoSource&&i.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return b.debug("Using Video Source/ Audio Source"),i;if(e.screen)if(eQ())e.screen.sourceId?tp(i,await NQ(e.screen.sourceId,e.screen,e.screenAudio)):tp(i,await mMe(e.screen,e.screenAudio));else if(vd()&&e.screen.extensionId&&e.screen.mandatory){if(!n.getStreamFromExtension)throw new X(I.NOT_SUPPORTED,"This browser does not support screen sharing");b.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));let p=await(a=e.screen.extensionId,s=t,new de((f,m)=>{try{chrome.runtime.sendMessage(a,{getStream:!0},g=>{if(!g||!g.streamId)return b.error("[".concat(s,"] No response from Chrome Plugin. Plugin not installed properly"),g),void m(new X(I.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));f(g.streamId)})}catch(g){b.error("[".concat(s,"] AgoraRTC screensharing plugin is not accessible(").concat(a,")"),g.toString()),m(new X(I.CHROME_PLUGIN_NOT_INSTALL))}}));e.screen.mandatory.chromeMediaSourceId=p,tp(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(n.getDisplayMedia){var o;e.screen.mediaSource&&VF(e.screen.mediaSource);let p={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:(o=e.screen.displaySurface)!==null&&o!==void 0?o:e.screen.mediaSource==="screen"?"monitor":e.screen.mediaSource},{selfBrowserSurface:f,surfaceSwitching:m,systemAudio:g}=e.screen,y={selfBrowserSurface:f,surfaceSwitching:m,systemAudio:g};!f&&delete y.selfBrowserSurface,!m&&delete y.surfaceSwitching,!g&&delete y.systemAudio,b.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:p,audio:!!e.screenAudio,controls:y})),tp(i,await navigator.mediaDevices.getDisplayMedia(ar({video:p,audio:!!e.screenAudio},y)))}else{if(!_r())throw b.error("[".concat(t,"] This browser does not support screenSharing")),new X(I.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&VF(e.screen.mediaSource);let p={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};b.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(p))),tp(i,await navigator.mediaDevices.getUserMedia(p))}}var a,s;if(!e.video&&!e.audio)return i;let c={video:e.video,audio:e.audio},l=D("MEDIA_DEVICE_CONSTRAINTS");if(l)try{typeof l=="string"&&(l=JSON.parse(l)),c=FN(c,l)}catch{}b.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(c)),vt();let d,u=null;(Dn()||bi()||rw())&&(u=await YN.lock());try{d=await navigator.mediaDevices.getUserMedia(c)}catch(p){throw u&&u(),p}return c.audio&&(kQ=!0),c.video&&(PQ=!0),tp(i,d),u&&u(),i}function w_(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new X(I.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new X(I.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new X(I.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new X(I.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new X(I.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new X(I.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return b.error("getUserMedia unexpected error",e),new X(I.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function tp(e,t){let r=e.getVideoTracks()[0],n=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(n&&e.removeTrack(n),e.addTrack(o)),i&&(r&&e.removeTrack(r),e.addTrack(i))}var Oo=new class extends fr{get state(){return this._state}set state(e){e!==this._state&&(this.emit(Cu.STATE_CHANGE,e),this._state=e)}constructor(){super(),J(this,"_state",Qm.IDLE),J(this,"isAccessMicrophonePermission",!1),J(this,"isAccessCameraPermission",!1),J(this,"lastAccessMicrophonePermission",!1),J(this,"lastAccessCameraPermission",!1),J(this,"checkdeviceMatched",!1),J(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(D("ENUMERATE_DEVICES_INTERVAL")||(iT()||nT()===sn.HARMONY_OS)&&Nd())&&this.updateDevicesInfo()},D("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(e=>b.error(e.toString()))}async enumerateDevices(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new X(I.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();let n=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(n),o=!this.isAccessMicrophonePermission&&e,a=!this.isAccessCameraPermission&&t;i.audio&&(o=!1),i.video&&(a=!1);let s=null,c=null,l=null;if(!r&&(o||a)){if(YN.isLocked&&(b.debug("[device manager] wait GUM lock"),(await YN.lock())(),b.debug("[device manager] GUM unlock")),kQ&&(o=!1,this.isAccessMicrophonePermission=!0),PQ&&(a=!1,this.isAccessCameraPermission=!0),b.debug("[device manager] check media device permissions",e,t,o,a),o&&a){try{l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(d){let u=w_(d.name||d.code||d,d.message);if(u.code===I.PERMISSION_DENIED)throw u;b.warning("getUserMedia failed in getDevices",u)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{s=await navigator.mediaDevices.getUserMedia({audio:e})}catch(d){let u=w_(d.name||d.code||d,d.message);if(u.code===I.PERMISSION_DENIED)throw u;b.warning("getUserMedia failed in getDevices",u)}this.isAccessMicrophonePermission=!0}else if(a){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(d){let u=w_(d.name||d.code||d,d.message);if(u.code===I.PERMISSION_DENIED)throw u;b.warning("getUserMedia failed in getDevices",u)}this.isAccessCameraPermission=!0}b.debug("[device manager] mic permission",e,"cam permission",t)}try{let d=await navigator.mediaDevices.enumerateDevices();return s&&s.getTracks().forEach(u=>u.stop()),c&&c.getTracks().forEach(u=>u.stop()),l&&l.getTracks().forEach(u=>u.stop()),s=null,c=null,l=null,d}catch(d){return s&&s.getTracks().forEach(u=>u.stop()),c&&c.getTracks().forEach(u=>u.stop()),l&&l.getTracks().forEach(u=>u.stop()),s=null,c=null,l=null,new X(I.ENUMERATE_DEVICES_FAILED,d.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(t=>t.kind==="audioinput")}async getCamerasDevices(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter(t=>t.kind==="videoinput")}async getSpeakers(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(t=>t.kind==="audiooutput")}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach(r=>{r.device.label===e&&(t=r.device.deviceId)}),t}async getDeviceById(e){let t=(await this.enumerateDevices(!0,!0,!0)).find(r=>r.deviceId===e);if(!t)throw new X(I.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=Qm.INITING;try{await this.updateDevicesInfo(),this.state=Qm.INITEND}catch(e){throw b.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=Qm.IDLE,(typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1")||new X(I.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){let e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),r=[];if(e[0]&&e[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;let i=e.find(a=>a.kind==="audioinput"&&a.deviceId==="default"),o=e.find(a=>a.kind==="audiooutput"&&a.deviceId==="default");i&&o?o.groupId===i.groupId?b.debug("[device-check] default input ".concat(i.label," and output ").concat(o.label," is the same group")):b.warning("[device-check] default input ".concat(i.label," and output ").concat(o.label," is not the same group")):b.debug("[device-check] default input or output not found")}let n=this.checkMediaDeviceInfoIsOk(e);if(e.forEach(i=>{if(!i.deviceId)return;let o=this.deviceInfoMap.get("".concat(i.kind,"_").concat(i.deviceId));if((o?o.state:"INACTIVE")!=="ACTIVE"){let a={initAt:t,updateAt:t,device:i,state:"ACTIVE"};this.deviceInfoMap.set("".concat(i.kind,"_").concat(i.deviceId),a),r.push(a)}o&&(o.updateAt=t)}),this.deviceInfoMap.forEach((i,o)=>{i.state==="ACTIVE"&&i.updateAt!==t&&(i.state="INACTIVE",r.push(i))}),this.state!==Qm.INITEND)return n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));r.forEach(i=>{switch(i.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Cu.RECORDING_DEVICE_CHANGED,i);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(Cu.CAMERA_DEVICE_CHANGED,i);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Cu.PLAYOUT_DEVICE_CHANGED,i)}}),n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){let t=e.filter(i=>i.kind==="audioinput"),r=e.filter(i=>i.kind==="videoinput"),n={audio:!1,video:!1};for(let i of t)if(i.label&&i.deviceId){n.audio=!0;break}for(let i of r)if(i.label&&i.deviceId){n.video=!0;break}return n}},kI=!1,wo=new class extends fr{constructor(){super(...arguments),J(this,"onAutoplayFailed",void 0),J(this,"onAudioAutoplayFailed",void 0)}};function DQ(){if(vt(),!kI){let e=t=>{t.preventDefault(),kI=!1,$0()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};kI=!0,$0()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),b.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),wo.onAutoplayFailed?wo.onAutoplayFailed():wo.onAudioAutoplayFailed?b.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):b.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),wo.emit("autoplay-failed")}}function LQ(e,t,r,n){if(!e)return;let i=be.getBaseInfoBySessionId(e);if(!i)return;let o=i.info,a=Date.now(),s=ar(ar({},o),{},{vid:o.vid===void 0?0:Number(o.vid),lts:a,elapse:a-i.startTime,cbRegistered:wo.onAutoplayFailed||wo.onAudioAutoplayFailed?1:-1,errorMsg:r,mediaType:t,trackId:n,extend:void 0});be.send({type:hr.AUTOPLAY_FAILED,data:s},!0)}var yMe=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],Di=new class{constructor(){J(this,"onAutoplayFailed",void 0),J(this,"elementMap",new Map),J(this,"elementStateMap",new Map),J(this,"elementsNeedToResume",[]),J(this,"sinkIdMap",new Map),J(this,"autoResumeAfterInterruption",e=>{Array.from(this.elementMap.entries()).forEach(t=>{let[r,n]=t,i=this.elementStateMap.get(r),o=n.srcObject.getAudioTracks()[0],a=o&&o.readyState;if(b.debug("resume after interrupted, ele: ".concat(i," audio: ").concat(a," ").concat(e)),a==="live"){if(e)return n.pause(),void n.play();if(Ut.curState==="running")return Af()?(n.pause(),void n.play()):void(i&&i==="paused"&&n.play())}})}),J(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(e=>{let[t,r]=e,n=r.srcObject.getAudioTracks()[0];n&&n.readyState==="live"&&(b.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),r.pause(),r.play())})}),this.autoResumeAudioElement(),Ut.on(bn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Ut.on(bn.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),Ut.on(bn.STATE_CHANGE,()=>{bi()&&Ut.prevState==="suspended"&&Ut.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(e,t){let r=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),r)try{await r.setSinkId(t)}catch(n){throw new X(I.PERMISSION_DENIED,"can not set sink id: "+n.toString())}}play(e,t,r,n){if(this.elementMap.has(t))return;let i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,si.INIT),this.setVolume(t,r);let o=this.sinkIdMap.get(t);if(o)try{i.setSinkId(o).catch(s=>{b.warning("[".concat(t,"] set sink id failed"),s.toString())})}catch(s){b.warning("[".concat(t,"] set sink id failed"),s.toString())}let a=i.play();a&&a.then&&a.catch(s=>{n&&LQ(n,"audio",s.message,t),b.warning("audio element play warning",s.toString()),this.elementMap.has(t)&&s.name==="NotAllowedError"&&(b.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),aT(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),DQ()}))})}updateTrack(e,t){let r=this.elementMap.get(e);r&&(r.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&this.elementStateMap.get(e)==="playing"}setVolume(e,t){let r=this.elementMap.get(e);r&&(t=Math.max(0,Math.min(100,t)),r.volume=t/100)}stop(e){let t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;let r=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(r,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){yMe.forEach(r=>{t.addEventListener(r,n=>{let i=this.elementStateMap.get(e),o=n.type==="pause"?"paused":n.type;if(b.debug("[".concat(e,"] audio-element-status change ").concat(i," => ").concat(o)),n.type==="error"){let a=t==null?void 0:t.error;a&&b.error("[".concat(e,"] media error, code: ").concat(a.code,", message: ").concat(a.message))}this.elementStateMap.set(e,o)})})}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){let e=()=>{this.elementsNeedToResume.forEach(t=>{t.play().then(r=>{b.debug("Auto resume audio element success")}).catch(r=>{b.warning("Auto resume audio element failed!",r)})}),this.elementsNeedToResume=[]};new de(t=>{document.body?t():window.addEventListener("load",()=>t())}).then(()=>{$0()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))})}};function Ar(){return function(e,t,r){let n=r.value;return typeof n=="function"&&(r.value=function(){this._isClosed&&new X(I.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",b);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];let s=n.apply(this,o);return s instanceof de?new de((c,l)=>{s.then(c).catch(l)}):s}),r}}var MQ=class extends fr{constructor(e){super(),J(this,"name","VideoProcessorDestination"),J(this,"ID","0"),J(this,"_source",void 0),J(this,"videoContext",void 0),J(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new X(I.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new X(I.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(wi.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(wi.ON_TRACK,void 0)}},jQ=class extends fr{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),J(this,"constraintsMap",new Map),J(this,"statsRegistry",[]),J(this,"usageRegistry",[]),J(this,"trackId",void 0),J(this,"direction",void 0),J(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await Ln(this,Fo.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var r;return b.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Wt(this,Fo.REQUEST_UPDATE_CONSTRAINTS,Array.from(ol(r=this.constraintsMap).call(r)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return b.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),Wt(this,Fo.REQUEST_UPDATE_CONSTRAINTS,Array.from(ol(t=this.constraintsMap).call(t)))}registerStats(e,t,r){this.statsRegistry.find(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t)||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:r})}unregisterStats(e,t){let r=this.statsRegistry.findIndex(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t);r!==-1&&this.statsRegistry.splice(r,1)}gatherStats(){let e=[];for(let{processorID:t,processorName:r,type:n,cb:i}of this.statsRegistry)try{let o=i();e.push({processorID:t,processorName:r,type:n,stats:o})}catch(o){b.error(new X(I.UNEXPECTED_ERROR,o.message))}return e}registerUsage(e,t){this.usageRegistry.find(r=>r.processorID===e.ID&&r.processorName===e.name)||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){let t=this.usageRegistry.findIndex(r=>r.processorID===e.ID&&r.processorName===e.name);t!==-1&&this.usageRegistry.splice(t,1)}async gatherUsage(){let e=[];if(!this.chained)return[];for(let{cb:t}of this.usageRegistry)try{let r=t();r instanceof de&&(r=await r),e.push(ar(ar({},r),{},{direction:this.direction}))}catch(r){b.error("gather extension usage error",r)}return e}getDirection(){return this.direction}},UQ=class extends fr{constructor(e){super(),J(this,"name","AudioProcessorDestination"),J(this,"ID","0"),J(this,"inputTrack",void 0),J(this,"inputNode",void 0),J(this,"audioProcessorContext",void 0),J(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new X(I.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new X(I.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(wi.ON_TRACK,void 0),this.emit(wi.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(wi.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(wi.ON_NODE,this.inputNode))}},FQ=class extends fr{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,r){super(),J(this,"constraintsMap",new Map),J(this,"statsRegistry",[]),J(this,"audioContext",void 0),J(this,"trackId",void 0),J(this,"direction",void 0),J(this,"usageRegistry",[]),J(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=r}async getConstraints(){return Ln(this,Fo.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var r;return b.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Wt(this,Fo.REQUEST_UPDATE_CONSTRAINTS,Array.from(ol(r=this.constraintsMap).call(r)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),Wt(this,Fo.REQUEST_UPDATE_CONSTRAINTS,Array.from(ol(t=this.constraintsMap).call(t)))}registerStats(e,t,r){this.statsRegistry.find(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t)||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:r})}unregisterStats(e,t){let r=this.statsRegistry.findIndex(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t);r!==-1&&this.statsRegistry.splice(r,1)}gatherStats(){let e=[];for(let{processorID:t,processorName:r,type:n,cb:i}of this.statsRegistry)try{let o=i();e.push({processorID:t,processorName:r,type:n,stats:o})}catch(o){b.error(new X(I.UNEXPECTED_ERROR,o.message))}return e}registerUsage(e,t){this.usageRegistry.find(r=>r.processorID===e.ID&&r.processorName===e.name)||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){let t=this.usageRegistry.findIndex(r=>r.processorID===e.ID&&r.processorName===e.name);t!==-1&&this.usageRegistry.splice(t,1)}async gatherUsage(){let e=[];if(!this.chained)return[];for(let{cb:t}of this.usageRegistry)try{let r=t();r instanceof de&&(r=await r),e.push(ar(ar({},r),{},{direction:this.direction}))}catch(r){b.error("gather extension usage error",r)}return e}getDirection(){return this.direction}},XN=class extends fr{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),J(this,"context",void 0),J(this,"processSourceNode",void 0),J(this,"outputTrack",void 0),J(this,"processedNode",void 0),J(this,"clonedTrack",void 0),J(this,"outputNode",void 0),this.outputNode=new vMe}setVolume(){}createOutputTrack(){throw new X(I.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}},vMe=class{disconnect(){}connect(){}};function VQ(e){return new de((t,r)=>{let n=!1,i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);let o=bi()?"canplay":"playing";i.addEventListener(o,()=>{let a=i.videoWidth,s=i.videoHeight;!a&&_r()||(n=!0,i.srcObject=null,i.remove(),t([a,s]))}),i.srcObject=new MediaStream([e]),i.play().catch(sT),setTimeout(()=>{n||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))},4e3)})}function aw(e){let t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});let r=dc(e.encoderConfig);return r.width!=null&&(t.width=r.width),r.height!=null&&(t.height=r.height),!JJ()&&r.frameRate&&(t.frameRate=r.frameRate),GJ()&&typeof t.frameRate=="object"&&(t.frameRate.max=60),_r()&&(t.frameRate={ideal:30,max:30}),t}function HF(e){let t={};if(JJ()||(e.AGC!==void 0&&(t.autoGainControl=e.AGC),e.AEC!==void 0&&(t.echoCancellation=e.AEC),e.ANS!==void 0&&(t.noiseSuppression=e.ANS,vd()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){let r=ow(e.encoderConfig);t.channelCount=r.stereo?2:1,t.sampleRate=r.sampleRate,t.sampleSize=r.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),iT()&&(t.sampleRate=void 0),t}var EMe=e=>{let t=e._encoderConfig;if(!t)return;let{frameRate:r,width:n,height:i}=e.getMediaStreamTrackSettings(),{frameRate:o=r,width:a=n,height:s=i}=t;if(!o||!a||!s)return;a=ZR(a),s=ZR(s),o=ZR(o);let{max:c,min:l}=function(f,m,g){let y=200*Math.pow(g/15,.6)*Math.pow(f*m/640/360,.75);return{min:Math.floor(y),max:Math.floor(4*y)}}(a,s,o),{bitrateMax:d,bitrateMin:u}=t||{};d||b.debug("calculate bitrate: [w: ".concat(a,", h: ").concat(s,", fps: ").concat(o,"] => [brMax: ").concat(d,", brMin: ").concat(u,"]"));let{maxFramerate:p}=D("ENCODER_CONFIG_LIMIT");return p&&typeof p=="number"&&(o=Math.min(o,p)),{frameRate:o,bitrateMax:d||c,bitrateMin:u||l,scaleResolutionDownBy:1,scale:0}},BQ=async(e,t,r)=>await(async(n,i,o)=>{let a=function(l){let d=[];for(let u=0;u<l.length;u+=2)d.push(parseInt(l.slice(u,u+2),16));return Uint8Array.from(d)}(iQ(""+i+o)).slice(0,16),s=a.slice(0,12),c=await window.crypto.subtle.importKey("raw",a,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:s},c,n))})(e.buffer,t,r),JD=e=>{let t=document.createElement("canvas");return t.width=2,t.height=2,new de((r,n)=>{t.toBlob(async i=>{if(t.remove(),i){let o=await $Q(i);r({buffer:o,width:t.width,height:t.height})}else n(new X(I.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},e,1)})},$Q=async e=>{let t=await e.arrayBuffer();return new Uint8Array(t)},WF,GF,zF,KF,qF,YF,XF,JF,QF,ZF,eV,tV,rV,nV,iV,oV,aV,sV,sr,cV,lV,dV,uV,hV,pV,Ys,fV,mV,gV,yV,vV,EV,_V,bV,wV,SV,TV,CV,RV,xn,vr=(WF=Ne({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),GF=Ne({argsMap:(e,t)=>[e.getTrackId(),t]}),zF=Ar(),KF=Nf("LocalAudioTrack","_enabledMutex"),qF=Ne({argsMap:(e,t)=>[e.getTrackId(),t]}),YF=Ar(),XF=Nf("LocalAudioTrack","_enabledMutex"),JF=Ne({argsMap:(e,t)=>[e.getTrackId(),t]}),QF=Ar(),ZF=Ar(),eV=Ar(),tV=Ne({argsMap:e=>[e.getTrackId()]}),rV=Ar(),nV=Ne({argsMap:e=>[e.getTrackId()]}),iV=Ar(),oV=Ne({argsMap:e=>[e.getTrackId()]}),aV=Ne({argsMap:(e,t)=>[e.getTrackId(),t.name]}),sV=Ne({argsMap:e=>[e.getTrackId()]}),gt((sr=class extends Up{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?Di.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,r,n){super(e,r),J(this,"trackMediaType",fm.AUDIO),J(this,"_encoderConfig",void 0),J(this,"_trackSource",void 0),J(this,"_enabled",!0),J(this,"_volume",100),J(this,"_useAudioElement",!0),J(this,"_bypassWebAudio",!1),J(this,"processor",void 0),J(this,"_processorContext",void 0),J(this,"_processorDestination",void 0),J(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!n,this._trackSource=new XN,D("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),D("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),Dn()&&!bo?setTimeout(()=>this.initWebAudio()):this.initWebAudio()}setVolume(e){Vt(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Di.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void b.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));let t=this._source.createOutputTrack();this._mediaStreamTrack!==t&&(this._mediaStreamTrack=t,Wt(this,fe.NEED_REPLACE_TRACK,this).then(()=>{b.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(r=>{b.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),r)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!SQ())throw new X(I.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Di.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,r){return this._setEnabled(e,t,r)}async _setEnabled(e,t,r){if(!r){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(b.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{r||(this._enabled=!0),await Wt(this,fe.NEED_ENABLE_TRACK,this),b.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(n){throw r||(this._enabled=!1),b.error("[".concat(this.getTrackId(),"] setEnabled to true error"),n.toString()),n}}else{this._originMediaStreamTrack.enabled=!1,r||(this._enabled=!1);try{await Wt(this,fe.NEED_DISABLE_TRACK,this)}catch(n){throw r||(this._enabled=!0),b.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,b.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await Wt(this,fe.NEED_MUTE_TRACK,this):await Wt(this,fe.NEED_UNMUTE_TRACK,this))}getStats(){return Od(()=>{b.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),oa(this,fe.GET_STATS)||ar({},KN)}setAudioFrameCallback(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Ao.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Ao.ON_AUDIO_BUFFER),this._source.on(Ao.ON_AUDIO_BUFFER,r=>e(r))}play(){b.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(b.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Di.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){b.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Di.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];b.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Di.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Wt(this,fe.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return de.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new X(I.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new X(I.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;let t=this.processor;(e=this._source.processSourceNode)===null||e===void 0||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(wi.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(t),await Wt(this,fe.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Wt(this,fe.NEED_REPLACE_TRACK,this))}),e.on(wi.ON_NODE,t=>{this._source.processedNode=t})}unbindProcessorDestinationEvents(e){e.removeAllListeners(wi.ON_TRACK),e.removeAllListeners(wi.ON_NODE)}bindProcessorContextEvents(e){e.on(Fo.REQUEST_CONSTRAINTS,async t=>{t(this._originMediaStreamTrack.getSettings())})}unbindProcessorContextEvents(e){e.removeAllListeners(Fo.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof XN&&(this._trackSource=new AQ(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){let e=new FQ(this._source.context,this.getTrackId(),"local"),t=new UQ(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(Ao.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})}),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(Di.stop(this.getTrackId()),this._source.play()),Wt(this,fe.NEED_REPLACE_MIXING_TRACK,this).then(()=>{b.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))}).catch(r=>{b.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),r)})),{processorContext:e,processorDestination:t}}}).prototype,"setVolume",[WF],Object.getOwnPropertyDescriptor(sr.prototype,"setVolume"),sr.prototype),gt(sr.prototype,"setPlaybackDevice",[GF,zF],Object.getOwnPropertyDescriptor(sr.prototype,"setPlaybackDevice"),sr.prototype),gt(sr.prototype,"setEnabled",[KF,qF,YF],Object.getOwnPropertyDescriptor(sr.prototype,"setEnabled"),sr.prototype),gt(sr.prototype,"setMuted",[XF,JF,QF],Object.getOwnPropertyDescriptor(sr.prototype,"setMuted"),sr.prototype),gt(sr.prototype,"getStats",[ZF],Object.getOwnPropertyDescriptor(sr.prototype,"getStats"),sr.prototype),gt(sr.prototype,"setAudioFrameCallback",[eV],Object.getOwnPropertyDescriptor(sr.prototype,"setAudioFrameCallback"),sr.prototype),gt(sr.prototype,"play",[tV,rV],Object.getOwnPropertyDescriptor(sr.prototype,"play"),sr.prototype),gt(sr.prototype,"stop",[nV,iV],Object.getOwnPropertyDescriptor(sr.prototype,"stop"),sr.prototype),gt(sr.prototype,"close",[oV],Object.getOwnPropertyDescriptor(sr.prototype,"close"),sr.prototype),gt(sr.prototype,"pipe",[aV],Object.getOwnPropertyDescriptor(sr.prototype,"pipe"),sr.prototype),gt(sr.prototype,"unpipe",[sV],Object.getOwnPropertyDescriptor(sr.prototype,"unpipe"),sr.prototype),sr),sw=(cV=Ne({argsMap:(e,t)=>[e.getTrackId(),t]}),lV=Ar(),dV=Nf("MicrophoneAudioTrack","_enabledMutex"),uV=Ne({argsMap:(e,t,r)=>[e.getTrackId(),t,r]}),hV=Ar(),pV=Ne({argsMap:e=>[e.getTrackId()]}),gt((Ys=class extends vr{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,r,n){super(e,t.encoderConfig?ow(t.encoderConfig):{},n,D("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),J(this,"_config",void 0),J(this,"_deviceName","default"),J(this,"_constraints",void 0),J(this,"_originalConstraints",void 0),J(this,"_enabled",!0),this._config=t,this._constraints=r,this._originalConstraints=r,this._deviceName=e.label,typeof t.bypassWebAudio=="boolean"&&(this._bypassWebAudio=t.bypassWebAudio),(Af()||MN())&&Ut.bindInterruptDetectorTrack(this)}async setDevice(e){if(b.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{let t=await Oo.getDeviceById(e),r={};r.audio=ar({},this._constraints),r.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let n=null;try{n=await Io(r,this.getTrackId())}catch(i){throw b.error("[".concat(this.getTrackId(),"] setDevice failed"),i.toString()),n=await Io({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),i}await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(t){throw b.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}else try{let t=await Oo.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(t){throw b.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}b.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,r){if(t)return b.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!r){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(b.info("[".concat(this.getTrackId(),"] start setEnabled"),e),D("AUTO_RESET_AUDIO_ROUTE")&&(bi()||Ja())){let a=navigator.audioSession;a&&(e||(a.type="playback"),a.type="auto")}if(!e){var n;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(n=this._source.clonedTrack)===null||n===void 0||n.stop(),r||(this._enabled=!1);try{await Wt(this,fe.NEED_DISABLE_TRACK,this)}catch(a){throw b.error("[".concat(this.getTrackId(),"] setEnabled false failed"),a.toString()),a}return}let i=ar({},this._constraints),o=Oo.searchDeviceIdByName(this._deviceName);o&&!i.deviceId&&(i.deviceId=o);try{r||(this._enabled=!0);let a=await Io({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),await Wt(this,fe.NEED_ENABLE_TRACK,this)}catch(a){throw r||(this._enabled=!1),b.error("[".concat(this.getTrackId(),"] setEnabled true failed"),a.toString()),a}b.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(Af()||MN())&&Ut.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((bi()||Ja())&&this._enabled&&!this._isClosed&&Ut.duringInterruption){let e=async()=>{Ut.off(bn.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(b.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Ut.on(bn.IOS_INTERRUPTION_END,e)}else b.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(pm.TRACK_ENDED)}async renewMediaStreamTrack(e){let t=e||this._constraints,r=Oo.searchDeviceIdByName(this._deviceName);if(r&&!t.deviceId&&(t.deviceId=r),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();let n=await Io({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(Fo.REQUEST_UPDATE_CONSTRAINTS,async(t,r,n)=>{try{let i=Object.assign({},this._originalConstraints,...t);await this.renewMediaStreamTrack(i),r()}catch(i){n(i)}})}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(Fo.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[cV,lV],Object.getOwnPropertyDescriptor(Ys.prototype,"setDevice"),Ys.prototype),gt(Ys.prototype,"setEnabled",[dV,uV,hV],Object.getOwnPropertyDescriptor(Ys.prototype,"setEnabled"),Ys.prototype),gt(Ys.prototype,"close",[pV],Object.getOwnPropertyDescriptor(Ys.prototype,"close"),Ys.prototype),Ys),_Me=(fV=Ne({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),mV=Ar(),gV=Ne({argsMap:e=>[e.getTrackId()]}),yV=Ar(),vV=Ne({argsMap:e=>[e.getTrackId()]}),EV=Ar(),_V=Ne({argsMap:e=>[e.getTrackId()]}),bV=Ar(),wV=Ne({argsMap:e=>[e.getTrackId()]}),SV=Ar(),TV=Ne({argsMap:e=>[e.getTrackId()]}),CV=Ne({argsMap:e=>[e.getTrackId()]}),RV=Ar(),gt((xn=class extends vr{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,r,n){super(t.createOutputTrack(),r,n),J(this,"source",void 0),J(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(Ao.AUDIO_SOURCE_STATE_CHANGE,i=>{this.safeEmit(pm.SOURCE_STATE_CHANGE,i)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){Vt(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}).prototype,"startProcessAudioBuffer",[fV,mV],Object.getOwnPropertyDescriptor(xn.prototype,"startProcessAudioBuffer"),xn.prototype),gt(xn.prototype,"pauseProcessAudioBuffer",[gV,yV],Object.getOwnPropertyDescriptor(xn.prototype,"pauseProcessAudioBuffer"),xn.prototype),gt(xn.prototype,"seekAudioBuffer",[vV,EV],Object.getOwnPropertyDescriptor(xn.prototype,"seekAudioBuffer"),xn.prototype),gt(xn.prototype,"resumeProcessAudioBuffer",[_V,bV],Object.getOwnPropertyDescriptor(xn.prototype,"resumeProcessAudioBuffer"),xn.prototype),gt(xn.prototype,"stopProcessAudioBuffer",[wV,SV],Object.getOwnPropertyDescriptor(xn.prototype,"stopProcessAudioBuffer"),xn.prototype),gt(xn.prototype,"close",[TV],Object.getOwnPropertyDescriptor(xn.prototype,"close"),xn.prototype),gt(xn.prototype,"setAudioBufferPlaybackSpeed",[CV,RV],Object.getOwnPropertyDescriptor(xn.prototype,"setAudioBufferPlaybackSpeed"),xn.prototype),xn),an=class HQ extends vr{get __className__(){return"MixingAudioTrack"}get isActive(){for(let t of this.trackList)if(t._enabled&&!t._isClosed&&!t.muted)return!0;return!1}constructor(){let t=mm().createMediaStreamDestination();super(t.stream.getAudioTracks()[0],void 0,qt(8,"track-mix-")),J(this,"trackList",void 0),J(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=t,this.trackList=[]}hasAudioTrack(t){return this.trackList.indexOf(t)!==-1}addAudioTrack(t){this.trackList.indexOf(t)===-1?(b.debug("add ".concat(t.getTrackId()," to mixing track")),t._source.outputNode.connect(this.destNode),this.trackList.push(t),this.updateEncoderConfig()):b.debug("track ".concat(t.getTrackId()," is already added"))}removeAudioTrack(t){if(this.trackList.indexOf(t)!==-1){b.debug("remove ".concat(t.getTrackId()," from mixing track"));try{t._source.outputNode.disconnect(this.destNode)}catch{}nw(this.trackList,t),this.updateEncoderConfig()}}updateEncoderConfig(){let t={};this.trackList.forEach(r=>{r._encoderConfig&&((r._encoderConfig.bitrate||0)>(t.bitrate||0)&&(t.bitrate=r._encoderConfig.bitrate),(r._encoderConfig.sampleRate||0)>(t.sampleRate||0)&&(t.sampleRate=r._encoderConfig.sampleRate),(r._encoderConfig.sampleSize||0)>(t.sampleSize||0)&&(t.sampleSize=r._encoderConfig.sampleSize),r._encoderConfig.stereo&&(t.stereo=!0))}),this._encoderConfig=t}_updateRtpTransceiver(t){this._rtpTransceiver!==t&&(this._rtpTransceiver=t,this.trackList.forEach(r=>{r instanceof HQ?r.emit(Vu.TRANSCEIVER_UPDATED,t):r._updateRtpTransceiver(t)}))}},bMe=class extends xQ{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(Ao.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),J(this,"audioBuffer",void 0),J(this,"sourceNode",void 0),J(this,"startPlayTime",0),J(this,"startPlayOffset",0),J(this,"pausePlayTime",0),J(this,"options",void 0),J(this,"currentLoopCount",0),J(this,"currentPlaybackSpeed",100),J(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){this.currentState==="stopped"?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):b.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=e,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){let e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}},IV=new Map,QD=class{get rendFrameRate(){if(this.renderStats&&this.renderStats.curTs!==this.renderStats.lastTs){let e=this.renderStats.curTs-this.renderStats.lastTs,t=(this.renderStats.renderNum-this.renderStats.lastRenderNum)/e;return this.renderStats.lastRenderNum=this.renderStats.renderNum,this.renderStats.lastTs=this.renderStats.curTs,t}return 0}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(b.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(this._videoState=e,(t=this.onVideoStateChanged)===null||t===void 0||t.call(this,this.videoState))}constructor(e){J(this,"trackId",void 0),J(this,"config",void 0),J(this,"onFirstVideoFrameDecoded",void 0),J(this,"onVideoStateChanged",void 0),J(this,"freezeTimeCounterList",[]),J(this,"renderFreezeAccTime",0),J(this,"isKeepLastFrame",!1),J(this,"timeUpdatedCount",0),J(this,"freezeTime",0),J(this,"playbackTime",0),J(this,"lastTimeUpdatedTime",0),J(this,"autoplayFailed",!1),J(this,"videoTrack",void 0),J(this,"videoElement",void 0),J(this,"cacheVideoElement",void 0),J(this,"renderStats",void 0),J(this,"_videoState",qs.VideoStateStopped),J(this,"videoElementCheckInterval",void 0),J(this,"videoElementFreezeTimeout",void 0),J(this,"_videoElementStatus",si.NONE),J(this,"isGettingVideoDimensions",!1),J(this,"startGetVideoDimensions",()=>{let t=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return b.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(t,500)};!this.isGettingVideoDimensions&&t()}),J(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&Ut.curState==="running"&&(b.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(L3())),F3()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),J(this,"handleVideoEvents",t=>{switch(t.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=si.PLAYING;break;case"loadeddata":if(this.videoState=qs.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=si.CANPLAY;break;case"stalled":this.videoElementStatus=si.STALLED;break;case"suspend":this.videoElementStatus=si.SUSPEND;break;case"pause":this.videoElementStatus=si.PAUSED,bi()||Ja()||Dn()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(b.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=si.WAITING;break;case"abort":this.videoElementStatus=si.ABORT;break;case"ended":this.videoElementStatus=si.ENDED;break;case"emptied":this.videoElementStatus=si.EMPTIED;break;case"error":{let r=this.videoElement.error;r?(this.videoElementStatus=si.ERROR,b.error("[".concat(this.trackId,"] media error: ").concat(r.message," (").concat(r.code,")"))):b.debug("[".concat(this.trackId,"] media not been an error."));break}case"timeupdate":{let r=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=r);let n=r-this.lastTimeUpdatedTime,i=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=r,Vc.lastVisibleTime<Vc.lastHiddenTime||i<Vc.lastHiddenTime||i<Vc.lastVisibleTime)return;for(n>D("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=n),this.playbackTime+=n;this.playbackTime>=6e3;){this.playbackTime-=6e3;let o=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(o),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),J(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(b.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(L3())),F3()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),Ut.on(bn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Ut.on(bn.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return(e=this.videoElement.parentElement)!==null&&e!==void 0?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){let t=this.videoElement.play();t&&t.catch&&t.catch(n=>{e&&LQ(e,"video",n.message,this.trackId),n.name==="NotAllowedError"?(b.warning("detected video element autoplay failed",n),this.autoplayFailed=!0,this.handleAutoPlayFailed()):b.warning("[".concat(this.trackId,"] play warning: "),n)});let r=vt();if((r.name==="Safari"&&Number(r.version)===15||Af())&&t&&t.then){let n=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(n).catch(n)}}getCurrentFrame(){let e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;let t=e.getContext("2d");if(!t)return b.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);let r=t.getImageData(0,0,e.width,e.height);return e.remove(),r}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;let n=r.getContext("2d");return n?(n.drawImage(this.videoElement,0,0,r.width,r.height),new de((i,o)=>{r.toBlob(async a=>{if(r.remove(),a){let s=await $Q(a);i({buffer:s,width:r.width,height:r.height})}else o(new X(I.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},e,t<0?.1:t>1?1:t)})):await JD(e)}destroy(){this.renderStats=void 0,Ut.off(bn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Ut.off(bn.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=qs.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=si.INIT,!this.videoElementCheckInterval&&(xV.forEach(i=>{this.videoElement.addEventListener(i,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(i){return i!==document.body&&document.body.contains(i)})(this.videoElement)||(this.videoElementStatus=si.DESTROYED)},1e3),D("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let i,o=()=>{document.visibilityState==="visible"&&(document.removeEventListener("visibilitychange",o),this.videoElementFreezeTimeout=window.setTimeout(a,D("VIDEO_FREEZE_DURATION")))},a=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===qs.VideoStateDecoding&&(document.visibilityState==="visible"?this.videoState=qs.VideoStateFrozen:document.addEventListener("visibilitychange",o))},s=(c,l)=>{if(this.videoElementStatus===si.PLAYING){if(this.renderStats?(this.renderStats.renderNum++,this.renderStats.curTs=l.mediaTime):this.renderStats={lastTs:l.mediaTime,curTs:l.mediaTime,lastRenderNum:0,renderNum:0},i){let p=l.presentationTime-i.presentationTime;this.videoState===qs.VideoStateStarting&&(this.videoState=qs.VideoStateDecoding),this.videoState===qs.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(a,D("VIDEO_FREEZE_DURATION"))),p<D("VIDEO_FREEZE_DURATION")&&this.videoState===qs.VideoStateFrozen&&(this.videoState=qs.VideoStateDecoding),p>D("VIDEO_FREEZE_DURATION")&&Vc.lastVisibleTime>=Vc.lastHiddenTime&&i.timestamp>Vc.lastVisibleTime&&i.timestamp>Vc.lastHiddenTime&&(this.renderFreezeAccTime+=p)}i=ar(ar({},l),{},{timestamp:c})}var d,u;D("ENABLE_VIDEO_FRAME_CALLBACK")&&((d=(u=this.videoElement).requestVideoFrameCallback)===null||d===void 0||d.call(u,s))};(e=(t=this.videoElement).requestVideoFrameCallback)===null||e===void 0||e.call(t,s)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),iT()&&!D("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");let r=vt();r.name==="Safari"&&Number(r.version)===15||Af()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,_r()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,_r()&&this.videoElement.load());let n=this.videoElement.play();n!==void 0&&n.catch(i=>{b.debug("[".concat(this.trackId,"] playback interrupted"),i.toString())})}resetVideoElement(){xV.forEach(e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=si.NONE}handleAutoPlayFailed(){let e=t=>{t.preventDefault(),this.videoElement.play().then(()=>{b.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(r=>{b.error(r)}),this.autoplayFailed=!1,$0()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};$0()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),DQ()}},xV=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"],WQ=class extends QD{constructor(e){super(e),J(this,"container",void 0),J(this,"slot",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;let t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;(t=this.container)!==null&&t!==void 0&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return(e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(t=this.container)!==null&&t!==void 0&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,r):await JD(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",D("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||(e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var e;if((e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var e;(e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}},AV,NV,OV,kV,PV,DV,LV,MV,jV,UV,FV,VV,BV,$V,HV,WV,GV,zV,KV,qV,YV,XV,JV,QV,pt,ZV,eB,tB,rB,nB,iB,oB,aB,Eo,Qt=(AV=Ne({argsMap:(e,t,r)=>[e.getTrackId(),typeof t=="string"?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",r]}),NV=Ar(),OV=Ne({argsMap:e=>[e.getTrackId()]}),kV=Nf("LocalVideoTrack","_enabledMutex"),PV=Ne({argsMap:(e,t)=>[e.getTrackId(),t]}),DV=Ar(),LV=Nf("LocalVideoTrack","_enabledMutex"),MV=Ne({argsMap:(e,t)=>[e.getTrackId(),t]}),jV=Ar(),UV=Ne({argsMap:(e,t)=>[e.getTrackId(),t]}),FV=Ar(),VV=Ar(),BV=Ne({argsMap:(e,t,r)=>[e.getTrackId(),t,r]}),$V=Ar(),HV=Ar(),WV=Ar(),GV=Ar(),zV=Ar(),KV=Ar(),qV=Ar(),YV=Ne({argsMap:(e,t)=>[e.getTrackId(),t.name]}),XV=Ne({argsMap:e=>[e.getTrackId()]}),JV=Ne({argsMap:e=>[e.getTrackId()]}),QV=Ne({argsMap:(e,t,r)=>[e.getTrackId(),t.label,r]}),pt=class GQ extends Up{get videoHeight(){if(Dn()){let{height:t}=this._mediaStreamTrack.getSettings();return this._videoHeight=t,this._videoHeight}return this._videoHeight}get videoWidth(){if(Dn()){let{width:t}=this._mediaStreamTrack.getSettings();return this._videoWidth=t,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==si.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(t){this._processorContext=t}get __className__(){return"LocalVideoTrack"}constructor(t,r,n,i,o,a){if(super(t,o),J(this,"trackMediaType",fm.VIDEO),J(this,"_player",void 0),J(this,"isUseScaleResolutionDownBy",!1),J(this,"_videoVisibleTimer",null),J(this,"_previousVideoVisibleStatus",void 0),J(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),J(this,"_encoderConfig",void 0),J(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),J(this,"_optimizationMode",void 0),J(this,"_videoHeight",void 0),J(this,"_videoWidth",void 0),J(this,"_forceBitrateLimit",void 0),J(this,"_enabled",!0),J(this,"_processorDestination",void 0),J(this,"_processorContext",void 0),Dn()){let{width:s,height:c}=t.getSettings();this._videoWidth=s,this._videoHeight=c}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=r,this._scalabilityMode=n,this._optimizationMode=i,this._hints=a||[],this._hints.indexOf(nr.SCREEN_TRACK)===-1)this.updateBitrateFromProfile();else if(function(s,c,l){let d=vt();return!(d.name!==s||!d.osVersion)&&Number(d.version)===c}(Ot.CHROME,115)&&nT().indexOf("Windows")!==-1){let s=function(c,l){if("VideoFrame"in window&&"TransformStream"in window&&_t().supportWebRTCInsertableStream){let d=new MediaStreamTrackProcessor(c),u=new MediaStreamTrackGenerator({kind:"video"}),p,f,m=Date.now(),g=()=>{y&&(clearInterval(y),y=void 0),p&&(p.close(),p=void 0),c.stop(),f=void 0,u.removeEventListener("ended",g)},y=window.setInterval(()=>{if(f&&p&&Date.now()-m>1e3)try{u.readyState==="live"?f.enqueue(p.clone()):g()}catch{g()}},1e3),v=new TransformStream({transform:(E,w)=>{u.readyState==="live"?(f=w,m=Date.now(),p===void 0?(p=E,w.enqueue(E.clone())):(w.enqueue(p),p=E)):E.close()}});return u.addEventListener("ended",g),d.readable.pipeThrough(v).pipeTo(u.writable),u}}(t);s&&(b.info("local screen video track begin to inject frame"),this._mediaStreamTrack=s)}r&&this._hints.indexOf(nr.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(r),this._processorContext=new jQ(this.getTrackId(),"local"),this._processorDestination=new MQ(this.processorContext),this.bindProcessorDestinationEvents()}play(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string"){let i=document.getElementById(t);i?t=i:(b.warning("[".concat(this.getTrackId(),'] can not find "#').concat(t,'" element, use document.body')),t=document.body)}b.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(r));let n=ar(ar(ar({},this._getDefaultPlayerConfig()),r),{},{trackId:this.getTrackId(),element:t});this._player?this._player.updateConfig(n):(t instanceof HTMLVideoElement?this._player=new QD(n):this._player=new WQ(n),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{let i=this.getVideoElementVisibleStatus();this.safeEmit(pm.VIDEO_ELEMENT_VISIBLE_STATUS,i)}catch{}},D("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,b.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(t,r){if(!r){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(b.info("[".concat(this.getTrackId(),"] start setEnabled"),t),!t){this._originMediaStreamTrack.enabled=!1;try{await Wt(this,fe.NEED_DISABLE_TRACK,this)}catch(n){throw b.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}return r||(this._enabled=!1),void b.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Wt(this,fe.NEED_ENABLE_TRACK,this)}catch(n){throw b.error("[".concat(this.getTrackId(),"] setEnabled to true error"),n.toString()),n}b.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}async setMuted(t){t!==this._muted&&(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,b.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),t?await Wt(this,fe.NEED_MUTE_TRACK,this):await Wt(this,fe.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(t,r){if(!this._enabled)throw new X(I.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(t=dc(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),t.width||t.height||t.frameRate){let n=aw({encoderConfig:t});(Dn()||bi()||Ja())&&(n.deviceId=void 0),b.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(n));try{await this._originMediaStreamTrack.applyConstraints(n),this.updateMediaStreamTrackResolution()}catch(i){let o=new X(I.UNEXPECTED_ERROR,i.toString());throw b.error("[".concat(this.getTrackId(),"] applyConstraints error"),o.toString()),o}}this._encoderConfig=t,this._hints.indexOf(nr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Wt(this,fe.NEED_UPDATE_VIDEO_ENCODER,this)}catch(n){return n.throw(b)}}getStats(){return Od(()=>{b.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),oa(this,fe.GET_STATS)||ar({},qN)}async setBeautyEffect(t){b.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(t,r):await JD(t)}async setBitrateLimit(t){if(b.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(t))),t){this._forceBitrateLimit=t,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<t.max_bitrate?this._encoderConfig.bitrateMax:t.max_bitrate:this._encoderConfig.bitrateMax=t.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=t.min_bitrate);try{await Wt(this,fe.NEED_UPDATE_VIDEO_ENCODER,this)}catch(r){return r.throw(b)}}}async setOptimizationMode(t){if(t!=="motion"&&t!=="detail"&&t!=="balanced")return void b.error(I.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");let r=this._optimizationMode;try{this._optimizationMode=t,await Wt(this,fe.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(n){throw this._optimizationMode=r,b.error("[".concat(this.getTrackId(),"] set optimization mode failed"),n.toString()),n}b.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(t,")"))}setScalabiltyMode(t){if(t.numSpatialLayers===1&&t.numTemporalLayers!==1)return b.error(I.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=t,b.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(t,")"))}updateMediaStreamTrackResolution(){VQ(this._originMediaStreamTrack).then(t=>{let[r,n]=t;this._videoHeight=n,this._videoWidth=r}).catch(sT)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(t){if(!this._enabled)throw new X(I.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");b.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(t)),t=dc(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),this._encoderConfig=t,this._hints.indexOf(nr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Wt(this,fe.NEED_UPDATE_VIDEO_ENCODER,this)}catch(r){return r.throw(b)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;let{width:t,height:r,frameRate:n}=this.getMediaStreamTrackSettings();if(!t||!r||!n)return;let{bitrateMax:i,bitrateMin:o}=this._encoderConfig;if(o==null||i==null){let{max:a,min:s}=function(c,l,d,u,p){let f=D("BITRATE_ADAPTER_TYPE");if(f==="DEFAULT_BITRATE")return{min:u,max:p};if(p===void 0){var m;let y=Math.floor(200*Math.pow(d/15,.6)*Math.pow(c*l/640/360,.75));p=f==="STANDARD_BITRATE"?4*y:2*y,u=(m=u)!==null&&m!==void 0?m:y}else{var g;u=(g=u)!==null&&g!==void 0?g:Math.floor(p/10)}return{min:u,max:p}}(t,r,n,o,i);this._encoderConfig.bitrateMin=s,this._encoderConfig.bitrateMax=a,b.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(t,", h: ").concat(r,", fps: ").concat(n,"] => [brMax: ").concat(a,", brMin: ").concat(s,"]"))}}getVideoElementVisibleStatus(){try{var t,r;let n=this==null||(t=this._player)===null||t===void 0?void 0:t.getContainerElement(),i={track:this,element:this==null||(r=this._player)===null||r===void 0?void 0:r.getVideoElement(),slot:n==null?void 0:n.parentElement},{element:o,slot:a}=i;if(this.isPlaying&&o instanceof HTMLVideoElement&&a instanceof HTMLElement){let s=ZJ.checkOneElementVisible(o),c=Object.assign({},s);if(c.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=c.visible;let l=be.reportApiInvoke(null,{tag:Er.TRACER,name:zr.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});c.visible?l.onSuccess("Video is visible"):l.onSuccess("Invisible because of ".concat(c.reason))}return c}return}catch(n){throw new X(I.GET_VIDEO_ELEMENT_VISIBLE_ERROR,n.message)}}async renewMediaStreamTrack(t){}pipe(t){if(this.processor===t)return t;if(t._source)throw new X(I.INVALID_OPERATION,"Processor ".concat(t.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=t,this.processor._source=this,t.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),t}unpipe(){if(!this.processor)return;let t=this.processor;this.processor._source=void 0,this.processor=void 0,t.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(t){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this._encoderConfig;t&&(n=ar(ar({},n),dc(t))),n=Su(n);let i=qt(8,"track-video-cloned-"),o=new GQ(r?this._mediaStreamTrack.clone():this._mediaStreamTrack,n,Su(this._scalabilityMode),this._optimizationMode,i,Su(this._hints));return t&&n&&o.setEncoderConfiguration(n),b.debug("clone video track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(r)),o}async replaceTrack(t,r){if(!(t instanceof MediaStreamTrack))throw new X(I.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(t.kind!=="video")throw new X(I.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(t,r,!0),this.updateMediaStreamTrackResolution()}sendSeiData(t){if(Od(()=>{be.reportApiInvoke(null,{name:zr.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:Er.TRACER}).onSuccess("")},this._mediaStreamTrack.id||this.getTrackId()),!D("ENABLE_VIDEO_SEI")||!D("ENABLE_ENCODED_TRANSFORM"))return void b.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(t instanceof Uint8Array==0)return new X(I.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();let r=this.getRTCRtpTransceiver();if(!r)return void b.warning("Video track is not published, SEI can not be send");let n=r.sender.getParameters();if(n.codecs.length===0)return;let i=n.codecs[0].mimeType.toLocaleLowerCase();i==="video/h264"?this.safeEmit("sei-to-send",t):b.warning("SEI is not supported by ".concat(i))}bindProcessorDestinationEvents(){this.processorDestination.on(wi.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(),await Wt(this,fe.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Wt(this,fe.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(wi.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Fo.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Fo.REQUEST_CONSTRAINTS)}},gt(pt.prototype,"play",[AV,NV],Object.getOwnPropertyDescriptor(pt.prototype,"play"),pt.prototype),gt(pt.prototype,"stop",[OV],Object.getOwnPropertyDescriptor(pt.prototype,"stop"),pt.prototype),gt(pt.prototype,"setEnabled",[kV,PV,DV],Object.getOwnPropertyDescriptor(pt.prototype,"setEnabled"),pt.prototype),gt(pt.prototype,"setMuted",[LV,MV,jV],Object.getOwnPropertyDescriptor(pt.prototype,"setMuted"),pt.prototype),gt(pt.prototype,"setEncoderConfiguration",[UV,FV],Object.getOwnPropertyDescriptor(pt.prototype,"setEncoderConfiguration"),pt.prototype),gt(pt.prototype,"getStats",[VV],Object.getOwnPropertyDescriptor(pt.prototype,"getStats"),pt.prototype),gt(pt.prototype,"setBeautyEffect",[BV,$V],Object.getOwnPropertyDescriptor(pt.prototype,"setBeautyEffect"),pt.prototype),gt(pt.prototype,"getCurrentFrameData",[HV],Object.getOwnPropertyDescriptor(pt.prototype,"getCurrentFrameData"),pt.prototype),gt(pt.prototype,"getCurrentFrameImage",[WV],Object.getOwnPropertyDescriptor(pt.prototype,"getCurrentFrameImage"),pt.prototype),gt(pt.prototype,"setBitrateLimit",[GV],Object.getOwnPropertyDescriptor(pt.prototype,"setBitrateLimit"),pt.prototype),gt(pt.prototype,"setOptimizationMode",[zV],Object.getOwnPropertyDescriptor(pt.prototype,"setOptimizationMode"),pt.prototype),gt(pt.prototype,"setScalabiltyMode",[KV],Object.getOwnPropertyDescriptor(pt.prototype,"setScalabiltyMode"),pt.prototype),gt(pt.prototype,"updateMediaStreamTrackResolution",[qV],Object.getOwnPropertyDescriptor(pt.prototype,"updateMediaStreamTrackResolution"),pt.prototype),gt(pt.prototype,"pipe",[YV],Object.getOwnPropertyDescriptor(pt.prototype,"pipe"),pt.prototype),gt(pt.prototype,"unpipe",[XV],Object.getOwnPropertyDescriptor(pt.prototype,"unpipe"),pt.prototype),gt(pt.prototype,"close",[JV],Object.getOwnPropertyDescriptor(pt.prototype,"close"),pt.prototype),gt(pt.prototype,"replaceTrack",[QV],Object.getOwnPropertyDescriptor(pt.prototype,"replaceTrack"),pt.prototype),pt),JN=(ZV=Ne({argsMap:(e,t)=>[e.getTrackId(),t]}),eB=Ar(),tB=Nf("CameraVideoTrack","_enabledMutex"),rB=Ne({argsMap:(e,t)=>[e.getTrackId(),t]}),nB=Ar(),iB=Ne({argsMap:(e,t)=>[e.getTrackId(),t]}),oB=Ar(),aB=Ne({argsMap:e=>[e.getTrackId()]}),Eo=class zQ extends Qt{get __className__(){return"CameraVideoTrack"}constructor(t,r,n,i,o,a){super(t,dc(r.encoderConfig),i,o,a),J(this,"_config",void 0),J(this,"_originalConstraints",void 0),J(this,"_constraints",void 0),J(this,"_enabled",!0),J(this,"_deviceName","default"),J(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(Af()||MN())&&!function(){let s=vt();if(s.os!==sn.IOS||!s.osVersion)return!1;let c=s.osVersion.split(".");return Number(c[0])===15&&Number(c[1])>=2}()&&XJ()&&this._enabled&&!this._isClosed&&(b.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=r,this._originalConstraints=n,this._constraints=n,this._deviceName=t.label,this._encoderConfig=dc(this._config.encoderConfig),Ut.on(bn.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Ut.on(bn.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(t){return typeof t=="string"?this._setDeviceById(t):t.deviceId?this._setDeviceById(t.deviceId):t.facingMode?this._setDeviceByFacingModel(t.facingMode):void 0}async _setDeviceById(t){if(b.info("[".concat(this.getTrackId(),"] set device to ").concat(t)),this._enabled)try{let r=await Oo.getDeviceById(t),n={};n.video=ar({},this._constraints),n.video.deviceId={exact:t},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let i=null;try{i=await Io(n,this.getTrackId())}catch(o){throw b.error("[".concat(this.getTrackId(),"] setDevice failed"),o.toString()),i=await Io({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),o}await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=r.label,this._config.cameraId=t,this._constraints.deviceId={exact:t}}catch(r){throw b.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{let r=await Oo.getDeviceById(t);this._deviceName=r.label,this._config.cameraId=t,this._constraints.deviceId={exact:t}}catch(r){throw b.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}b.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(t){b.info("[".concat(this.getTrackId(),"] set facingMode ").concat(t));let r={video:ar(ar({},this._constraints),{},{deviceId:void 0,facingMode:{exact:t}})};if(this._enabled){this._originMediaStreamTrack.stop();let n=null;try{n=await Io(r,this.getTrackId())}catch(i){throw b.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),i.toString()),n=await Io({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),i}await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=t,this._config.cameraId=void 0,this._constraints=ar({},r.video),b.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(t,r){if(!r){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(b.info("[".concat(this.getTrackId(),"] start setEnabled"),t),t){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{let n=await Io({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1)}await Wt(this,fe.NEED_ENABLE_TRACK,this)}catch(n){throw b.error("[".concat(this.getTrackId(),"] setEnabled true error"),n.toString()),n}this.updateMediaStreamTrackResolution(),b.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),r||(this._enabled=!1);try{await Wt(this,fe.NEED_DISABLE_TRACK,this)}catch(n){throw b.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}b.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(t,r){if(!this._enabled)throw new X(I.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");t=dc(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate||t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate||t.bitrateMin);let n=Pr(this._config);n.encoderConfig=t;let i=aw(n);(Dn()||bi()||Ja())&&(i.deviceId=void 0),b.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(i));try{await this._originMediaStreamTrack.applyConstraints(i),this.updateMediaStreamTrackResolution()}catch(o){let a=new X(I.UNEXPECTED_ERROR,o.toString());throw b.error("[".concat(this.getTrackId(),"] applyConstraints error"),a.toString()),a}this._config=n,this._constraints=i,this._originalConstraints=i,this._encoderConfig=t,this._hints.indexOf(nr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Wt(this,fe.NEED_UPDATE_VIDEO_ENCODER,this)}catch(o){return o.throw(b)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((bi()||Ja())&&this._enabled&&!this._isClosed&&Ut.duringInterruption){let t=async()=>{Ut.off(bn.IOS_INTERRUPTION_END,t),this._enabled&&!this._isClosed&&(b.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Ut.on(bn.IOS_INTERRUPTION_END,t)}else b.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(pm.TRACK_ENDED)}async renewMediaStreamTrack(t){let r=t||this._constraints,n=Oo.searchDeviceIdByName(this._deviceName);if(n&&!r.deviceId&&(r.deviceId={exact:n}),this._enabled){let i=await Io({video:r},this.getTrackId());this._constraints=r,await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),Ut.off(bn.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Ut.off(bn.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(t){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this._encoderConfig;t&&(n=ar(ar({},n),dc(t))),n=Su(n);let i=qt(8,"track-cam-cloned-"),o=new zQ(r?this._mediaStreamTrack.clone():this._mediaStreamTrack,Su(ar(ar({},this._config),{},{encoderConfig:n})),Su(this._constraints),Su(this._scalabilityMode),this._optimizationMode,i);return t&&n&&o.setEncoderConfiguration(n),b.debug("clone track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(r)),o}bindProcessorContextEvents(){this.processorContext.on(Fo.REQUEST_UPDATE_CONSTRAINTS,async(t,r,n)=>{try{let i=Object.assign({},this._originalConstraints,...t);await this.renewMediaStreamTrack(i),r()}catch(i){n(i)}}),this.processorContext.on(Fo.REQUEST_CONSTRAINTS,async t=>{t(this._originMediaStreamTrack.getSettings())})}},gt(Eo.prototype,"setDevice",[ZV,eB],Object.getOwnPropertyDescriptor(Eo.prototype,"setDevice"),Eo.prototype),gt(Eo.prototype,"setEnabled",[tB,rB,nB],Object.getOwnPropertyDescriptor(Eo.prototype,"setEnabled"),Eo.prototype),gt(Eo.prototype,"setEncoderConfiguration",[iB,oB],Object.getOwnPropertyDescriptor(Eo.prototype,"setEncoderConfiguration"),Eo.prototype),gt(Eo.prototype,"close",[aB],Object.getOwnPropertyDescriptor(Eo.prototype,"close"),Eo.prototype),Eo);function PI(e,t,r,n){r.optimizationMode&&(n&&n.width&&n.height?(r.encoderConfig=ar(ar({},n),{},{bitrateMin:n.bitrateMin,bitrateMax:n.bitrateMax}),r.optimizationMode!=="motion"&&r.optimizationMode!=="detail"||(t.contentHint=r.optimizationMode,t.contentHint===r.optimizationMode?b.debug("[".concat(e,"] set content hint to"),r.optimizationMode):b.debug("[".concat(e,"] set content hint failed")))):b.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var sB,cB,lB,dB,Ko,uB,hB,pB,fB,mB,gB,ni,KQ=class extends RQ{getUserId(){return this._userId}constructor(e,t,r,n){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(n.clientId,"_").concat(qt(5,""))),J(this,"_userId",void 0),J(this,"_uintId",void 0),J(this,"_isDestroyed",!1),J(this,"store",void 0),J(this,"processor",void 0),J(this,"processorContext",void 0),this._userId=t,this._uintId=r,this.store=n}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,b.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}},ef=(sB=Ne({argsMap:(e,t,r)=>[e.getTrackId(),typeof t=="string"?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",r]}),cB=Ne({argsMap:e=>[e.getTrackId()]}),lB=Ne({argsMap:(e,t)=>[e.getTrackId(),t.name]}),dB=Ne({argsMap:e=>[e.getTrackId()]}),gt((Ko=class extends KQ{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==si.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,r,n){super(e,t,r,n),J(this,"_videoVisibleTimer",null),J(this,"_previousVideoVisibleStatus",void 0),J(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),J(this,"trackMediaType",fm.VIDEO),J(this,"_videoWidth",void 0),J(this,"_videoHeight",void 0),J(this,"_player",void 0),J(this,"processorDestination",void 0),J(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new jQ(this.getTrackId(),"remote"),this.processorDestination=new MQ(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Od(()=>{b.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),oa(this,fe.GET_STATS)||ar({},CQ)}play(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="string"){let n=document.getElementById(e);n?e=n:(b.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}b.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));let r=ar(ar({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(r):(e instanceof HTMLVideoElement?this._player=new QD(r):this._player=new WQ(r),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(Zp.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=n=>{this.safeEmit(Zp.VIDEO_STATE_CHANGED,n)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{let n=this.getVideoElementVisibleStatus();this.safeEmit(Zp.VIDEO_ELEMENT_VISIBLE_STATUS,n)}catch{}},D("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,b.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){VQ(this._originMediaStreamTrack).then(e=>{let[t,r]=e;this._videoHeight=r,this._videoWidth=t}).catch(sT)}_updatePlayerSource(){b.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;let r=this==null||(e=this._player)===null||e===void 0?void 0:e.getContainerElement(),n={track:this,element:this==null||(t=this._player)===null||t===void 0?void 0:t.getVideoElement(),slot:r==null?void 0:r.parentElement},{element:i,slot:o}=n;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){let a=ZJ.checkOneElementVisible(i),s=Object.assign({},a);if(s.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=s.visible;let c=be.reportApiInvoke(null,{tag:Er.TRACER,name:zr.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});s.visible?c.onSuccess("Video is visible"):c.onSuccess("Invisible because of ".concat(s.reason))}return s}return}catch(r){throw new X(I.GET_VIDEO_ELEMENT_VISIBLE_ERROR,r.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new X(I.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;let e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(wi.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(wi.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(Vu.SEI_RECEIVED,e)}}).prototype,"play",[sB],Object.getOwnPropertyDescriptor(Ko.prototype,"play"),Ko.prototype),gt(Ko.prototype,"stop",[cB],Object.getOwnPropertyDescriptor(Ko.prototype,"stop"),Ko.prototype),gt(Ko.prototype,"pipe",[lB],Object.getOwnPropertyDescriptor(Ko.prototype,"pipe"),Ko.prototype),gt(Ko.prototype,"unpipe",[dB],Object.getOwnPropertyDescriptor(Ko.prototype,"unpipe"),Ko.prototype),Ko),tf=(uB=Ne({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),hB=Ne({argsMap:(e,t)=>[e.getTrackId(),t]}),pB=Ne({argsMap:e=>[e.getTrackId()]}),fB=Ne({argsMap:e=>[e.getTrackId()]}),mB=Ne({argsMap:(e,t)=>[e.getTrackId(),t.name]}),gB=Ne({argsMap:e=>[e.getTrackId()]}),gt((ni=class extends KQ{get isPlaying(){return this._useAudioElement?Di.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,r,n){super(e,t,r,n),J(this,"trackMediaType",fm.AUDIO),J(this,"_source",void 0),J(this,"_useAudioElement",!0),J(this,"_volume",100),J(this,"processorContext",void 0),J(this,"processorDestination",void 0),J(this,"_played",!1),J(this,"_bypassWebAudio",!1),D("DISABLE_WEBAUDIO")?(this._source=new XN,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new AQ(e,!0),D("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(Ao.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(Zp.FIRST_FRAME_DECODED)}),this.processorContext=new FQ(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new UQ(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Ao.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Ao.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Ao.ON_AUDIO_BUFFER),this._source.on(Ao.ON_AUDIO_BUFFER,r=>e(r))}setVolume(e){this._volume=e,this._useAudioElement?Di.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!SQ())throw new X(I.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Di.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Od(()=>{b.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),oa(this,fe.GET_STATS)||ar({},TQ)}play(){b.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(b.debug("[".concat(this.getTrackId(),"] use audio element to play")),Di.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){b.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?Di.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];b.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Di.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new X(I.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new X(I.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new X(I.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;let t=this.processor;(e=this._source.processSourceNode)===null||e===void 0||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(wi.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(wi.ON_NODE,e=>{this._source.processedNode=e;let t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(wi.ON_TRACK),this.processorDestination.removeAllListeners(wi.ON_NODE)}}).prototype,"setVolume",[uB],Object.getOwnPropertyDescriptor(ni.prototype,"setVolume"),ni.prototype),gt(ni.prototype,"setPlaybackDevice",[hB],Object.getOwnPropertyDescriptor(ni.prototype,"setPlaybackDevice"),ni.prototype),gt(ni.prototype,"play",[pB],Object.getOwnPropertyDescriptor(ni.prototype,"play"),ni.prototype),gt(ni.prototype,"stop",[fB],Object.getOwnPropertyDescriptor(ni.prototype,"stop"),ni.prototype),gt(ni.prototype,"pipe",[mB],Object.getOwnPropertyDescriptor(ni.prototype,"pipe"),ni.prototype),gt(ni.prototype,"unpipe",[gB],Object.getOwnPropertyDescriptor(ni.prototype,"unpipe"),ni.prototype),ni),Vc=new class extends fr{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),J(this,"_lastHiddenTime",0),J(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),b.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}},qQ=class extends fr{constructor(e,t){super(),J(this,"trackMediaType",fm.DATA),J(this,"_version",1),J(this,"_type",3),J(this,"_config",void 0),J(this,"_originDataChannel",void 0),J(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),J(this,"_dataStreamPacketHandler",{serialize:r=>r,deserialize:r=>r}),J(this,"_datachannelEventMap",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader()}useDataStream(e){this._dataStreamPacketHandler=e}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return D("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var e,t;return(e=(t=this._originDataChannel)===null||t===void 0?void 0:t.readyState)!==null&&e!==void 0?e:"connecting"}get _originDataChannelId(){var e,t;return(e=(t=this._originDataChannel)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new de((e,t)=>{if(this._originDataChannel){this._originDataChannel.readyState==="open"&&e();let r=setTimeout(()=>{var n;t(new X(I.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat((n=this._originDataChannel)===null||n===void 0?void 0:n.id)))},1e4);this._originDataChannel.onopen=()=>{clearTimeout(r),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(r),new X(I.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new X(I.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))})}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){let e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[b_.OPEN,b_.CLOSE,b_.ERROR].forEach(t=>{let r=()=>{this.emit(t)};this._datachannelEventMap.set(t,r),e.addEventListener(t,r)})}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach(t=>{let[r,n]=t;e.removeEventListener(r,n)}),this._datachannelEventMap.clear()}},wMe=class extends qQ{constructor(e){super(e),J(this,"_messageListener",void 0),this._messageListener=t=>{if(t.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);let r=t.data.slice(0,this._dataStreamPacketHeader.byteLength),n=new DataView(r).getUint8(3);if(n!==this.id)return void(D("SHOW_DATASTREAM2_LOG")&&b.debug("invalid datachannel id: ".concat(n," !== ").concat(this.id)));let i=t.data.slice(this._dataStreamPacketHeader.byteLength);i=this._dataStreamPacketHandler.deserialize(i),this.emit(b_.MESSAGE,i)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}},SMe=class extends qQ{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);let r=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);r.set(new Uint8Array(this._dataStreamPacketHeader),0),r.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(r.buffer)}}};function S_(){let e=new Blob([atob("ZnVuY3Rpb24gZShlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLGE9W10sbz0wO2Zvcig7YS5sZW5ndGg8bjspbyszPG4mJjA9PT1yW29dJiYwPT09cltvKzFdJiYzPT09cltvKzJdJiYoMD09PXJbbyszXXx8MT09PXJbbyszXXx8Mj09PXJbbyszXXx8Mz09PXJbbyszXSk/KGEucHVzaChyW29dLHJbbysxXSxyW28rM10pLG8rPTQpOihhLnB1c2gocltvXSksbysrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9ZnVuY3Rpb24gdChlLHQpe2NvbnN0IG49ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmxlbmd0aDtsZXQgbj1bXSxyPTA7Zm9yKDtyPHQ7KXIrMjx0JiYwPT09ZVtyXSYmMD09PWVbcisxXSYmKDA9PT1lW3IrMl18fDE9PT1lW3IrMl18fDI9PT1lW3IrMl18fDM9PT1lW3IrMl0pPyhuLnB1c2goZVtyXSxlW3IrMV0sMyxlW3IrMl0pLHIrPTMpOihuLnB1c2goZVtyXSkscisrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9KHQpLHI9bi5sZW5ndGgsYT1NYXRoLmZsb29yKHIvMjU1KSxvPXIlMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNithKzErcitlLmJ5dGVMZW5ndGgpO3NbMF09MCxzWzFdPTAsc1syXT0wLHNbM109MSxzWzRdPTYsc1s1XT0xMDE7bGV0IGk9MDtmb3IoO2k8YTspc1s2K2ldPTI1NSxpKys7cmV0dXJuIHNbNitpXT1vLGkrKyxzLnNldChuLDYraSkscy5zZXQobmV3IFVpbnQ4QXJyYXkoZSksNitpK3IpLHMuYnVmZmVyfW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+LTEmJi0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJDaHJvbWUiKSYmKHNlbGYub25ydGN0cmFuc2Zvcm09bj0+e2NvbnN0IHI9bi50cmFuc2Zvcm1lcjtsZXQgYT1bXTtyLm9wdGlvbnMucG9ydC5vbm1lc3NhZ2U9ZT0+e2UuZGF0YS5zZWkmJmEucHVzaChlLmRhdGEuc2VpKX0sc2VsZi5wb3N0TWVzc2FnZSgic3RhcnRlZCIpO2NvbnN0IG89ci5yZWFkYWJsZS5nZXRSZWFkZXIoKSxzPXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7InJ4Ij09PXIub3B0aW9ucy5uYW1lP2Z1bmN0aW9uIHQobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgdD1mdW5jdGlvbih0KXtjb25zdCBuPW5ldyBEYXRhVmlldyh0LmRhdGEpO2xldCByPTA7Zm9yKDtyKzQ8dC5kYXRhLmJ5dGVMZW5ndGg7KXtpZigwPT09bi5nZXRVaW50OChyKzApJiYwPT09bi5nZXRVaW50OChyKzEpJiYwPT09bi5nZXRVaW50OChyKzIpJiYxPT09bi5nZXRVaW50OChyKzMpJiY2PT09bi5nZXRVaW50OChyKzQpKXtsZXQgYT1yKzYsbz0wLHM9MDtmb3IoOzI1NT09PShzPW4uZ2V0VWludDgoYSsrKSk7KW8rPTI1NTtvKz1zO2NvbnN0IGk9ZSh0LmRhdGEsYSxvKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoaSl9cisrfXJldHVybiBudWxsfShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1hLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout(()=>UF.revokeObjectURL(e),0),new Worker(UF.createObjectURL(e))}var yE=new Map,vE=new Map;function TMe(e,t,r){let n=new Uint8Array(e,t,r),i=[],o=0;for(;i.length<r;)o+3<r&&n[o]===0&&n[o+1]===0&&n[o+2]===3&&(n[o+3]===0||n[o+3]===1||n[o+3]===2||n[o+3]===3)?(i.push(n[o],n[o+1],n[o+3]),o+=4):(i.push(n[o]),o++);return new Uint8Array(i)}var EE=new Map;async function CMe(e,t){if(!_t().supportWebRTCEncodedTransform)return void b.warning("browser not support video encoded transform");if(EE.has(e)||!e.track)return;let r={track:e.track};if(vd()){if(!e.createEncodedStreams)return void b.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(s){return void b.error("create video-encoded-streams error",s&&s.message)}let o=[];t.on("sei-to-send",s=>{o.push(s)});let a=new TransformStream({transform(s,c){r.controller||(r.controller=c),e.track&&e.track.id!==r.track.id&&(b.debug("video track changed: ".concat(r.track.id," => ").concat(e.track.id)),r.track.removeEventListener("ended",n),r.track=e.track,r.track.addEventListener("ended",n));let l=o.shift();l&&(s.data=function(d,u){let p=function(E){let w=E.length,S=[],x=0;for(;x<w;)x+2<w&&E[x]===0&&E[x+1]===0&&(E[x+2]===0||E[x+2]===1||E[x+2]===2||E[x+2]===3)?(S.push(E[x],E[x+1],3,E[x+2]),x+=3):(S.push(E[x]),x++);return new Uint8Array(S)}(u),f=p.length,m=Math.floor(f/255),g=f%255,y=new Uint8Array(6+m+1+f+d.byteLength);y[0]=0,y[1]=0,y[2]=0,y[3]=1,y[4]=6,y[5]=101;let v=0;for(;v<m;)y[6+v]=255,v++;return y[6+v]=g,v++,y.set(p,6+v),y.set(new Uint8Array(d),6+v+f),y.buffer}(s.data,l)),c.enqueue(s)}});i.readable.pipeThrough(a).pipeTo(i.writable)}else{if(!Dn())return;{if(typeof RTCRtpScriptTransform>"u")return void b.warning("browser not support RTCRtpScriptTransform");let i=S_(),o=new MessageChannel;await new de(s=>i.onmessage=c=>{c.data==="registered"&&s(void 0)});let a=new RTCRtpScriptTransform(i,{name:"tx",port:o.port2},[o.port2]);e.transform=a,await new de(s=>i.onmessage=c=>{c.data==="started"&&s(void 0)}),t.on("sei-to-send",s=>{o.port1.postMessage({sei:s})}),o.port1.onmessage=s=>{var c;s.data.transformed&&e.track&&((c=e.track)===null||c===void 0?void 0:c.id)!==r.track.id&&(b.debug("video track changed: ".concat(r.track.id," => ").concat(e.track.id)),r.track.removeEventListener("ended",n),r.track=e.track,r.track.addEventListener("ended",n))},r.worker=i}}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",n)}let i=EE.get(e);if(i){EE.delete(e);try{var o,a;(o=i.controller)===null||o===void 0||o.terminate(),(a=i.worker)===null||a===void 0||a.terminate()}catch(s){b.warning(s&&s.message)}}}EE.set(e,r),e.track.addEventListener("ended",n)}var Zm=new Map;(function(){let e=vt();yn.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),yn.getStreamFromExtension=e.name===Ot.CHROME&&Number(e.version)>34,yn.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t=new RTCPeerConnection,r=!1;try{t.addTransceiver("audio"),r=!0}catch{}return t.close(),r}(),yn.supportMinBitrate=e.name===Ot.CHROME||e.name===Ot.EDGE,yn.supportSetRtpSenderParameters=function(){let t=vt();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Nd()||!(!Dn()&&!rw())||t.name===Ot.FIREFOX&&Number(t.version)>=64)}(),e.name===Ot.SAFARI&&(Number(e.version)>=14?yn.supportDualStream=!0:yn.supportDualStream=!1),yn.webAudioMediaStreamDest=function(){let t=vt();return!(t.name===Ot.SAFARI&&Number(t.version)<12)}(),yn.supportReplaceTrack=!!window.RTCRtpSender&&typeof RTCRtpSender.prototype.replaceTrack=="function",yn.supportWebGL=typeof WebGLRenderingContext<"u",yn.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Nd()||(yn.webAudioWithAEC=!0),yn.supportShareAudio=function(){let t=vt();return(t.os===sn.WIN_10||t.os===sn.WIN_81||t.os===sn.WIN_7||t.os===sn.LINUX||t.os===sn.MAC_OS||t.os===sn.CHROMIUM_OS)&&t.name===Ot.CHROME&&Number(t.version)>=74}(),yn.supportDataChannel=!!(LN(76)||function(t){let r=vt();return!(r.name!==Ot.FIREFOX||!r.osVersion)&&Number(r.version)>=t}(68)||KJ(14)),yn.supportPCSetConfiguration=function(){let t=window.RTCPeerConnection;return!_r()&&!!t&&t.prototype.setConfiguration instanceof Function}(),yn.supportWebRTCEncodedTransform=function(){let t=vt();return t.name==="Chrome"&&Number(t.version)>=86||t.name==="Safari"&&Number(t.version)>=15}(),yn.supportWebRTCInsertableStream=function(){let t=vt();return(t.name===Ot.CHROME||t.name===Ot.EDGE)&&Number(t.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),yn.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,yn.supportWebCrypto=typeof window<"u"&&window.crypto!==void 0&&window.crypto.subtle!==void 0,aT(()=>{yn.supportDualStreamEncoding=function(){let t=vt();return!!D("DISABLE_WEBAUDIO")||t.name==="Safari"&&Number(t.version)>=14||!!(t.name==="Chrome"&&/Windows/i.test(t.os||"")&&Number(t.version)>=100&&D("CHROME_DUAL_STREAM_USE_ENCODING"))}(),b.info("browser compatibility",JSON.stringify(yn),JSON.stringify(e))})})();var cw=class QN extends fr{constructor(t,r){super(),C(this,"signal",void 0),C(this,"token",void 0),C(this,"tokenTimeout",void 0),C(this,"tokenInterval",void 0),C(this,"_sequence",0),C(this,"userMap",new Map),C(this,"encoder",new TextEncoder),this.signal=t,this.token=r;let n=()=>{this.signal.connectionState===Kt.CONNECTED&&this.check(),this.userMap.size===0?this.tokenInterval=window.setTimeout(n,1e3):this.tokenInterval=window.setTimeout(n,3*D("P2P_TOKEN_INTERVAL"))};n()}async send(t,r,n,i,o){var a,s,c;if(this.userMap.size===0)return;let l=Array.from(ol(a=this.userMap).call(a))[0].token;typeof r!="string"&&(r=JSON.stringify(r)),i=(s=i)!==null&&s!==void 0?s:qt(6,""),o=(c=o)!==null&&c!==void 0?c:this._sequence++;let d={_id:i,_type:t,_seq:o,_message:r,token:"".concat(this.token,"_").concat(l)};D("SHOW_P2P_LOG")&&b.debug("send message",d,"noNeedResponse : ".concat(n)),this.splitMessage(JSON.stringify(d)).forEach(p=>{this.signal.request(Me.DATA_STREAM,{payload:Ed(this.encoder.encode(p))})});let u=new de((p,f)=>{let m=window.setTimeout(()=>{this.off("res-@".concat(i,"_ack"),g),this.off("res-@".concat(i),v),this.off(Yh.ABORT,y),b.debug("[external-signal] request timeout, type: ".concat(t,", requestId: ").concat(i)),this.userMap.size===0?f(new X(I.INVALID_REMOTE_USER)):f(new X(I.TIMEOUT))},D("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),g=()=>{m&&window.clearTimeout(m),this.off(Yh.ABORT,y),n&&p()},y=()=>{m&&window.clearTimeout(m),this.off("res-@".concat(i,"_ack"),g),this.off("res-@".concat(i),v),f(new X(I.EXTERNAL_SIGNAL_ABORT,"type: ".concat(t,", requestId: ").concat(i)))};this.once(Yh.ABORT,y),this.once("res-@".concat(i,"_ack"),g);let v=(w,S)=>{E=!0,m&&window.clearTimeout(m),this.off("res-@".concat(i,"_ack"),g),this.off(Yh.ABORT,y),w==="success"?p(S):f(new X(I.P2P_MESSAGE_FAILED,"request ".concat(t," failed, requestId: ").concat(i)))},E=!1;n||(this.once("res-@".concat(i),v),Tn(D("SIGNAL_REQUEST_TIMEOUT")).then(()=>{E||b.warning("external_signal request timeout, type: ".concat(t,", requestId: ").concat(i,", ").concat(d))}))});try{return await u}catch(p){if(p.code===I.TIMEOUT)return await this.send(t,r,n,i,o);throw p}}onMessage(t){var r;let{_uid:n}=t,i,o=this.userMap.get(n);if(o)i=o.splitMessageMap;else{if(this.userMap.size>0||!("_type"in t)||t._type!==Rr.CHECK)return;let{token:l}=t;i=new Map,o={uid:n,isStart:!0,token:l,splitMessageMap:i,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(n,o),this.signal.emit(lt.ON_USER_ONLINE,{uid:n}),this.handleUserOnline()}if("id"in t&&"total"in t){var a;let{id:l,total:d}=t,u=(a=i.get(l))!==null&&a!==void 0?a:[];if(u.push(t),i.has(l)||i.set(l,u),u.length!==d)return;{let p=Gy(u).call(u,(f,m)=>f.index-m.index).map(f=>f.payload).join("");i.delete(l),(t=JSON.parse(p))._uid=n}}let{_type:s,token:c}=t;if(pe(r=[Rr.ACK,Rr.CHECK]).call(r,s))return s===Rr.CHECK&&this.handleCheckToken(o,c),void this.receiveMessage(t);c==="".concat(o.token,"_").concat(this.token)?this.handleReceivedMessage(t):b.debug('Receive unexpected message", '.concat(c,", cur_token: ").concat(o.token,"_").concat(this.token),t)}check(){let t={_id:qt(6,""),token:this.token,_type:Rr.CHECK};D("SHOW_P2P_LOG")&&b.debug("send message",t),this.signal.request(Me.DATA_STREAM,{payload:Ed(this.encoder.encode(JSON.stringify(t)))})}ack(t){let r={_id:t,_type:Rr.ACK,token:this.token};D("SHOW_P2P_LOG")&&b.debug("send message",r),this.signal.request(Me.DATA_STREAM,{payload:Ed(this.encoder.encode(JSON.stringify(r)))})}response(t,r,n){this.send(Rr.RESPONSE,JSON.stringify({success:!n,message:r}),!0,t)}handleReceivedMessage(t){let r=()=>{this.userMap.forEach(l=>{let{receivedMessagesMap:d,nextExpectedSequenceNumber:u}=l;for(;d.has(u);){let p=d.get(u);d.delete(u),this.receiveMessage(p),l.nextExpectedSequenceNumber++}})};if(!t)return void r();let{_uid:n,_seq:i}=t,o=this.userMap.get(n),{receivedMessagesMap:a,isStart:s,nextExpectedSequenceNumber:c}=o;if(i<c)return this.ack(t._id),void b.debug("[external-signal] receive old message, seq: ".concat(i,", ").concat(t._message));a.set(i,t),s&&i===c&&(this.receiveMessage(t),a.delete(c),o.nextExpectedSequenceNumber++,r())}receiveMessage(t){let{_id:r,_type:n,_message:i,_uid:o}=t;if(D("SHOW_P2P_LOG")&&b.debug("receive message",t),r){let a;switch(t._type!==Rr.ACK&&(i&&(a=JSON.parse(i)),this.ack(t._id)),t._type){case Rr.CANDIDATE:case Rr.CONTROL:this.signal.emit(n,a,o);break;case Rr.PUBLISH:case Rr.UNPUBLISH:case Rr.RESTART_ICE:case Rr.CALL:a.uid=o,Ln(this.signal,n,a).then(s=>{this.response(t._id,s)}).catch(()=>{this.response(t._id,void 0,!0)});break;case Rr.ACK:this.getListeners("res-@".concat(r,"_ack")).length>0&&this.emit("res-@".concat(r,"_ack"));break;case Rr.RESPONSE:{let{success:s,message:c}=a;this.emit("res-@".concat(r),s?"success":"failed",c);break}}}}splitMessage(t){if(t.length<QN.MAX_MESSAGE_SIZE)return[t];let r=[],{remoteToken:n}=JSON.parse(t),i=qt(6,""),o=0,a=800,s=Math.ceil(t.length/a);for(;t.length>0;){o++;let c={id:i,index:o,total:s,payload:t.slice(0,a),token:"".concat(this.token,"_").concat(n)};JSON.stringify(c).length>QN.MAX_MESSAGE_SIZE?a-=50:(r.push(c),t=t.slice(a))}return r.map(c=>JSON.stringify(c))}handleCheckToken(t,r){return t.token!==r?(b.debug("token changed, from ".concat(t.token," to ").concat(r)),this.reset(t.uid,r),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout(()=>{b.debug("token timeout, ".concat(r)),this.reset(t.uid)},D("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){let t=await Ln(this.signal,Rr.CALL,void 0),r=await this.send(Rr.CALL,t);this.signal.emit(je.P2P_CONNECTION,r,!0)}async reset(t,r){let n=this.userMap.get(t);n&&(this.emit(Yh.ABORT),this.signal.emit(lt.ON_USER_OFFLINE,{uid:n.uid,reason:B2e.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),r||(b.debug("change local token from ".concat(r," to ").concat(r)),this.token=qt(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(Yh.ABORT)}};C(cw,"MAX_SIZE",1),C(cw,"MAX_MESSAGE_SIZE",1024);var yB=class extends fr{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===Kt.CONNECTED?this.emit(je.WS_CONNECTED):e===Kt.RECONNECTING?this.emit(je.WS_RECONNECTING,this._websocketReconnectReason):e===Kt.CLOSED&&this.emit(je.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),C(this,"_disconnectedReason",void 0),C(this,"_websocketReconnectReason",void 0),C(this,"_connectionState",Kt.CLOSED),C(this,"reconnectToken",void 0),C(this,"p2pToken",void 0),C(this,"websocket",void 0),C(this,"openConnectionTime",void 0),C(this,"clientId",void 0),C(this,"lastMsgTime",Date.now()),C(this,"uploadCache",[]),C(this,"uploadCacheInterval",void 0),C(this,"rttRolling",new oQ(5)),C(this,"pingpongTimer",void 0),C(this,"pingpongTimeoutCount",0),C(this,"joinResponse",void 0),C(this,"multiIpOption",void 0),C(this,"initError",void 0),C(this,"spec",void 0),C(this,"store",void 0),C(this,"_external_signal",void 0),C(this,"onWebsocketMessage",r=>{if(r.data instanceof ArrayBuffer)return void this.emit(je.ON_BINARY_DATA,r.data);let n=JSON.parse(r.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(n,"_id")){let i="res-@".concat(n._id);this.emit(i,n._result,n._message)}else if(Object.prototype.hasOwnProperty.call(n,"_type")){switch(n._type){case lt.ON_DATA_STREAM:return void this.handleDataStream(n._message);case lt.MUTE_AUDIO:case lt.MUTE_VIDEO:case lt.ON_P2P_LOST:case lt.ON_USER_ONLINE:return;case lt.ON_USER_OFFLINE:let{uid:i}=n._message;return b.debug("[".concat(this.clientId,"] user-offline uid: ").concat(i)),void this._external_signal.reset(i)}if(this.emit(n._type,n._message),n._type===lt.ON_NOTIFICATION&&this.handleNotification(n._message),n._type===lt.ON_USER_BANNED)switch(n._message.error_code){case 14:this.close(Mt.UID_BANNED);break;case 15:this.close(Mt.IP_BANNED);break;case 16:this.close(Mt.CHANNEL_BANNED)}if(n._type===lt.ON_USER_LICENSE_BANNED)switch(n._message.error_code){case Ae.ERR_LICENSE_MISSING:this.close(Mt.LICENSE_MISSING);break;case Ae.ERR_LICENSE_EXPIRED:this.close(Mt.LICENSE_EXPIRED);break;case Ae.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Mt.LICENSE_MINUTES_EXCEEDED);break;case Ae.ERR_LICENSE_PERIOD_INVALID:this.close(Mt.LICENSE_PERIOD_INVALID);break;case Ae.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Mt.LICENSE_MULTIPLE_SDK_SERVICE);break;case Ae.ERR_LICENSE_ILLEGAL:this.close(Mt.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new WD("gateway-".concat(this.clientId),this.spec.retryConfig,!0,D("JOIN_GATEWAY_USE_DUAL_DOMAIN"),D("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Kt.CONNECTED&&this.reconnect("retry",Pn.OFFLINE)}),this.p2pToken=qt(6,""),this._external_signal=new cw(this,this.p2pToken)}async request(e,t,r,n){let i=qt(6,""),o={_id:i,_type:e,_message:t},a=this.websocket.connectionID,s=()=>new de((f,m)=>{if(this.connectionState===Kt.CONNECTED)return f();let g=()=>{this.off(je.WS_CLOSED,y),f()},y=()=>{this.off(je.WS_CONNECTED,g),m(new X(I.WS_ABORT))};this.once(je.WS_CONNECTED,g),this.once(je.WS_CLOSED,y)});if(this.connectionState!==Kt.CONNECTING&&this.connectionState!==Kt.RECONNECTING||e===Me.JOIN||e===Me.REJOIN||await s(),this.websocket.sendMessage(o,!0),n)return;let c=new de((f,m)=>{let g=!1,y=(E,w)=>{g=!0,f({isSuccess:E==="success",message:w||{}}),this.off(je.WS_CLOSED,v),this.off(je.WS_RECONNECTING,v),this.emit(je.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),y);let v=()=>{m(new X(I.WS_ABORT,"type: ".concat(e))),this.off(je.WS_CLOSED,v),this.off(je.WS_RECONNECTING,v),this.off("res-@".concat(i),y)};this.once(je.WS_CLOSED,v),this.once(je.WS_RECONNECTING,v),Tn(D("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==a||g||(b.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(je.REQUEST_TIMEOUT,e,t))})}),l=null;try{l=await c}catch(f){if(this.connectionState===Kt.CLOSED||e===Me.LEAVE)throw new X(I.WS_ABORT);return!this.spec.forceWaitGatewayResponse||r?f.throw():e===Me.JOIN||e===Me.REJOIN?null:(await s(),await this.request(e,t))}if(l.isSuccess)return l.message;let d=Number(l.message.error_code||l.message.code),u=G0(d),p=new X(I.UNEXPECTED_RESPONSE,"".concat(u.desc,": ").concat(l.message.error_str),{code:d,data:l.message,desc:u.desc});return u.action==="success"?l.message:(b.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(d,", message: ").concat(u.desc,", action: ").concat(u.action)),d===Ae.ERR_TOO_MANY_BROADCASTERS?((e===Me.JOIN||e===Me.REJOIN)&&(this.initError=p,this.close()),p.throw()):u.action==="failed"?p.throw():u.action==="quit"?(this.initError=p,this.close(),p.throw()):(d===Ae.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,b.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Pn.MULTI_IP)):this.reconnect(u.action,Pn.SERVER_ERROR),e===Me.JOIN||e===Me.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new de(r=>{let n=i=>{(!t||t(i))&&(this.off(e,n),r(i))};this.on(e,n)})}uploadWRTCStats(e){if(!this.store.sessionId)return void b.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));let t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(W0.WRTC_STATS,t)}upload(e,t){let r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch{let n=D("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>n&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Kt.CONNECTED)return;let i=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(i._type,i._message)},D("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){let r={_type:e,_message:t};this.websocket.sendMessage(r)}async sendExtensionMessage(e,t,r){return await this._external_signal.send(e,t,r)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new de((t,r)=>{this.once(je.WS_CONNECTED,()=>t(this.joinResponse)),this.once(je.WS_CLOSED,()=>r(this.initError||new X(I.WS_ABORT))),this.connectionState=Kt.CONNECTING,this.websocket.init(e).catch(r)})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||Mt.LEAVE,this.connectionState=Kt.CLOSED,b.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),this.p2pToken=qt(6,""),this._external_signal.clear(),this._external_signal=new cw(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(je.ABORT_P2P_EXECUTION);let e=await Ln(this,je.REQUEST_JOIN_INFO),t=await this.request(Me.JOIN,e);if(!t)return this.emit(je.REPORT_JOIN_GATEWAY,I.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(je.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Kt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;let r=Tu(e.payload),n=new TextDecoder().decode(r),i=JSON.parse(n);"total"in i&&"id"in i||pe(t=Object.values(Rr)).call(t,i._type)?(i._uid=e.uid,this._external_signal.onMessage(i)):this.emit(lt.ON_DATA_STREAM,e)}catch{this.emit(lt.ON_DATA_STREAM,e)}}handleNotification(e){b.debug("[".concat(this.clientId,"] receive notification: "),e);let t=G0(e.code);if(t.action!=="success"){if(t.action!=="failed")return t.action==="quit"?(t.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Mt.UID_BANNED),void this.close()):void this.reconnect(t.action,Pn.SERVER_ERROR);b.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;let e=D("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(b.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>D("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Pn.TIMEOUT):this.request(Me.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;let r=Date.now()-t;this.rttRolling.add(r),D("REPORT_STATS")&&this.send(Me.PING_BACK,{pingpongElapse:r})}).catch(r=>{})}handleWebsocketEvents(){this.websocket.on(Ve.RECONNECT_WAITTING_FINISH,e=>{this.emit(je.WS_RECONNECT_WAITTING_FINISH,e)}),this.websocket.on(Ve.RECONNECT_CREATE_CONNECTION,e=>{this.emit(je.WS_RECONNECT_CREATE_CONNECTION,e)}),this.websocket.on(Ve.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Ve.CLOSED,()=>{this.connectionState=Kt.CLOSED}),this.websocket.on(Ve.FAILED,()=>{this._disconnectedReason=Mt.NETWORK_ERROR,this.connectionState=Kt.CLOSED}),this.websocket.on(Ve.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===Kt.CONNECTED?this.connectionState=Kt.RECONNECTING:this.connectionState=Kt.CONNECTING}),this.websocket.on(Ve.WILL_RECONNECT,(e,t,r)=>{e!=="retry"?(b.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0):b.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),r(e)}),this.websocket.on(Ve.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.join().catch(e=>{if(this.emit(je.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof X&&e.code===I.UNEXPECTED_RESPONSE&&e.data.code===Ae.ERR_NO_AUTHORIZED)return b.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Pn.SERVER_ERROR);b.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Pn.SERVER_ERROR):(this.initError=e,this.close())})}),this.websocket.on(Ve.REQUEST_NEW_URLS,(e,t)=>{Ln(this,je.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)}),this.websocket.on(Ve.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(lt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}},YQ={exports:{}};YQ.exports=(()=>{var e={8:(n,i,o)=>{o.r(i),o.d(i,{Parser:()=>W,Printer:()=>H,parse:()=>N,print:()=>F});let a=`
`,s="".concat("\r").concat(a),c=" ",l;function d(P){return P>="0"&&P<="9"}function u(P){return P>="!"&&P<="~"}function p(P){return u(P)||P>=""&&P<="ÿ"}function f(P){return P==="!"||P>="#"&&P<="'"||P>="*"&&P<="+"||P>="-"&&P<="."||P>="0"&&P<="9"||P>="A"&&P<="Z"||P>="^"&&P<="~"}function m(P){return P>="1"&&P<="9"}function g(P){return P>="A"&&P<="Z"||P>="a"&&P<="z"}function y(P){return P==="d"||P==="h"||P==="m"||P==="s"}function v(P){return P>""&&P<"	"||P>"\v"&&P<"\f"||P>""&&P<"ÿ"}function E(P){return g(P)||d(P)||P==="+"||P==="/"}function w(P){return d(P)||g(P)||P==="+"||P==="/"||P==="-"||P==="_"}function S(P){return g(P)||d(P)||P==="+"||P==="/"}function x(P,_){var R=Object.keys(P);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(P);_&&(k=k.filter(function(z){return Object.getOwnPropertyDescriptor(P,z).enumerable})),R.push.apply(R,k)}return R}function O(P){for(var _=1;_<arguments.length;_++){var R=arguments[_]!=null?arguments[_]:{};_%2?x(Object(R),!0).forEach(function(k){L(P,k,R[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(R)):x(Object(R)).forEach(function(k){Object.defineProperty(P,k,Object.getOwnPropertyDescriptor(R,k))})}return P}function L(P,_,R){return _ in P?Object.defineProperty(P,_,{value:R,enumerable:!0,configurable:!0,writable:!0}):P[_]=R,P}(function(P){P.VERSION="v",P.ORIGIN="o",P.SESSION_NAME="s",P.INFORMATION="i",P.URI="u",P.EMAIL="e",P.PHONE="p",P.CONNECTION="c",P.BANDWIDTH="b",P.TIME="t",P.REPEAT="r",P.ZONE_ADJUSTMENTS="z",P.KEY="k",P.ATTRIBUTE="a",P.MEDIA="m"})(l||(l={}));class j{consumeText(_,R){let k=R;for(;k<_.length;){let z=_[k];if(z==="\0"||z==="\r"||z===a)break;k+=1}if(k-R==0)throw new Error("Invalid text, at ".concat(_));return k}consumeUnicastAddress(_,R,k){return this.consumeTill(_,R,c)}consumeOneOrMore(_,R,k){let z=R;for(;k(_[z]);)z++;if(z-R==0)throw new Error("Invalid rule at ".concat(R,"."));return z}consumeSpace(_,R){if(_[R]===c)return R+1;throw new Error("Invalid space at ".concat(R,"."))}consumeIP4Address(_,R){let k=R;for(let z=0;z<4;z++)if(k=this.consumeDecimalUChar(_,k),z!==3){if(_[k]!==".")throw new Error("Invalid IP4 address.");k++}return k}consumeDecimalUChar(_,R){let k=R;for(let U=0;U<3&&d(_[k]);U++,k++);if(k-R==0)throw new Error("Invalid decimal uchar.");let z=parseInt(_.slice(R,k));if(z>=0&&z<=255)return k;throw new Error("Invalid decimal uchar")}consumeIP6Address(_,R){let k=this.consumeHexpart(_,R);return _[k]===":"&&(k+=1,k=this.consumeIP4Address(_,k)),k}consumeHexpart(_,R){let k=R;if(_[k]===":"&&_[k+1]===":"){k+=2;try{k=this.consumeHexseq(_,k)}catch{}return k}if(k=this.consumeHexseq(_,k),_[k]===":"&&_[k+1]===":"){k+=2;try{k=this.consumeHexseq(_,k)}catch{}return k}return k}consumeHexseq(_,R){let k=R;for(;k=this.consumeHex4(_,k),_[k]===":"&&_[k+1]!==":";)k+=1;return k}consumeHex4(_,R){let k=0;for(;k<4;k++)if(!((z=_[R+k])>="0"&&z<="9"||z>="a"&&z<="f"||z>="A"&&z<="F")){if(k===0)throw new Error("Invalid hex 4");break}var z;return R+k}consumeFQDN(_,R){let k=R;for(;d(_[k])||g(_[k])||_[k]==="-"||_[k]===".";)k+=1;if(k-R<4)throw new Error("Invalid FQDN");return k}consumeExtnAddr(_,R){return this.consumeOneOrMore(_,R,p)}consumeMulticastAddress(_,R,k){switch(k){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(_,R);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(_,R);default:try{return this.consumeFQDN(_,R)}catch{return this.consumeExtnAddr(_,R)}}}consumeIP6MulticastAddress(_,R){let k=this.consumeHexpart(_,R);return _[k]==="/"?this.consumeInteger(_,k+1):k}consumeIP4MulticastAddress(_,R){let k=R+3,z=_.slice(R,k),U=parseInt(z);if(U<224||U>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let q=0;q<3;q++){if(_[k]!==".")throw new Error("Invalid IP4 multicast address.");k+=1,k=this.consumeDecimalUChar(_,k)}return _[k]==="/"&&(k+=1),k=this.consumeTTL(_,k),_[k]==="/"&&(k=this.consumeInteger(_,k)),k}consumeInteger(_,R){if(!m(_[R]))throw new Error("Invalid integer.");for(R+=1;d(_[R]);)R+=1;return R}consumeTTL(_,R){if(_[R]==="0")return R+1;if(!m(_[R]))throw new Error("Invalid TTL.");R+=1;for(let k=0;k<2&&d(_[R]);k++)R+=1;return R}consumeToken(_,R){return this.consumeOneOrMore(_,R,f)}consumeTime(_,R){let k=R;if(_[k]==="0")return k+1;for(m(_[k])&&(k+=1);d(_[k]);)k++;if(k-R<10)throw new Error("Invalid time");return k}consumeAddress(_,R){return this.consumeTill(_,R,c)}consumeTypedTime(_,R){let k=R;return k=this.consumeOneOrMore(_,k,d),y(_[k])?k+1:k}consumeRepeatInterval(_,R){if(!m(_[R]))throw new Error("Invalid repeat interval");for(R+=1;d(_[R]);)R+=1;return y(_[R])&&(R+=1),R}consumePort(_,R){return this.consumeOneOrMore(_,R,d)}consume(_,R,k){for(let z=0;z<k.length;z++){if(R+z>=_.length)throw new Error("consume exceeding value length");if(_[R+z]!==k[z])throw new Error("consume ".concat(k," failed at ").concat(z))}return R+k.length}consumeTill(_,R,k){let z=R;for(;z<_.length&&(typeof k!="string"||_[z]!==k)&&(typeof k!="function"||!k(_[z]));)z++;return z}}class W extends j{constructor(){super(),L(this,"records",[]),L(this,"currentLine",0)}parse(_){let R=this.probeEOL(_);this.records=_.split(R).filter(bt=>!!li(bt).call(bt)).map(this.parseLine),this.currentLine=0;let k=this.parseVersion(),z=this.parseOrigin(),U=this.parseSessionName(),q=this.parseInformation(),oe=this.parseUri(),ue=this.parseEmail(),me=this.parsePhone(),De=this.parseConnection(),We=this.parseBandWidth(),Pe=this.parseTimeFields(),it=this.parseKey(),Rt=this.parseSessionAttribute(),Je=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:k,origin:z,sessionName:U,information:q,uri:oe,emails:ue,phones:me,connection:De,bandwidths:We,timeFields:Pe,key:it,attributes:Rt,mediaDescriptions:Je}}getCurrentRecord(){let _=this.records[this.currentLine];if(!_)throw new Error("Record doesn't exit.");return _}probeEOL(_){for(let R=0;R<_.length;R++)if(_[R]===a)return _[R-1]==="\r"?s:a;throw new Error("Invalid newline character.")}parseLine(_,R){if(_.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");let k=_[0];if(_[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:k,value:_.slice(2),line:R,cur:0}}parseSessionAttribute(){let _=new Y;for(;this.currentLine<this.records.length;){let R=this.getCurrentRecord();if(R.type!==l.ATTRIBUTE)break;let k={attField:this.extractOneOrMore(R,z=>f(z)&&z!==":"),_cur:0};R.value[R.cur]===":"&&(R.cur+=1,k.attValue=this.extractOneOrMore(R,v)),_.parse(k),this.currentLine++}return _.digest()}parseMediaAttributes(_){let R=new Z(_);for(;this.currentLine<this.records.length;){let k=this.getCurrentRecord();if(k.type!==l.ATTRIBUTE)break;let z={attField:this.extractOneOrMore(k,U=>f(U)&&U!==":"),_cur:0};k.value[k.cur]===":"&&(k.cur+=1,z.attValue=this.extractOneOrMore(k,v)),R.parse(z),this.currentLine++}return R.digest()}parseKey(){let _=this.getCurrentRecord();if(_.type===l.KEY){if(_.value==="prompt"||_.value==="clear:"||_.value==="base64:"||_.value==="uri:")return _.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){let _=this.getCurrentRecord();if(_.type===l.ZONE_ADJUSTMENTS){let R=[];for(;;)try{let k=this.extract(_,this.consumeTime);this.consumeSpaceForRecord(_);let z=!1;_.value[_.cur]==="-"&&(z=!0,_.cur+=1);let U=this.extract(_,this.consumeTypedTime);R.push({time:k,typedTime:U,back:z})}catch{break}if(R.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,R}return[]}parseRepeat(){let _=[];for(;;){let R=this.getCurrentRecord();if(R.type!==l.REPEAT)break;{let k=this.extract(R,this.consumeRepeatInterval),z=this.parseTypedTime(R);_.push({repeatInterval:k,typedTimes:z}),this.currentLine++}}return _}parseTypedTime(_){let R=[];for(;;)try{this.consumeSpaceForRecord(_),R.push(this.extract(_,this.consumeTypedTime))}catch{break}if(R.length===0)throw new Error("Invalid typed time.");return R}parseTime(){let _=this.getCurrentRecord(),R=this.extract(_,this.consumeTime);this.consumeSpaceForRecord(_);let k=this.extract(_,this.consumeTime);return this.currentLine++,{startTime:R,stopTime:k}}parseBandWidth(){let _=[];for(;this.currentLine<this.records.length;){let R=this.getCurrentRecord();if(R.type!==l.BANDWIDTH)break;{let k=this.extractOneOrMore(R,f);if(R.value[R.cur]!==":")throw new Error("Invalid bandwidth field.");R.cur++;let z=this.extractOneOrMore(R,d);_.push({bwtype:k,bandwidth:z}),this.currentLine++}}return _}parseVersion(){let _=this.getCurrentRecord();if(_.type!==l.VERSION)throw new Error("first sdp record must be version");let R=_.value.slice(0,this.consumeOneOrMore(_.value,0,d));if(R.length!==_.value.length)throw new Error('invalid proto version, "v='.concat(_.value,'"'));return this.currentLine++,R}parseOrigin(){let _=this.getCurrentRecord();if(_.type!==l.ORIGIN)throw new Error("second line of sdp must be origin");let R=this.extractOneOrMore(_,p);this.consumeSpaceForRecord(_);let k=this.extractOneOrMore(_,d);this.consumeSpaceForRecord(_);let z=this.extractOneOrMore(_,d);this.consumeSpaceForRecord(_);let U=this.extractOneOrMore(_,f);this.consumeSpaceForRecord(_);let q=this.extractOneOrMore(_,f);this.consumeSpaceForRecord(_);let oe=this.extract(_,this.consumeUnicastAddress);return this.currentLine++,{username:R,sessId:k,sessVersion:z,nettype:U,addrtype:q,unicastAddress:oe}}parseSessionName(){let _=this.getCurrentRecord();if(_.type===l.SESSION_NAME){let R=this.extract(_,this.consumeText);return this.currentLine++,R}}parseInformation(){let _=this.getCurrentRecord();if(_.type!==l.INFORMATION)return;let R=this.extract(_,this.consumeText);return this.currentLine++,R}parseUri(){let _=this.getCurrentRecord();if(_.type===l.URI)return this.currentLine++,_.value}parseEmail(){let _=[];for(;;){let R=this.getCurrentRecord();if(R.type!==l.EMAIL)break;_.push(R.value),this.currentLine++}return _}parsePhone(){let _=[];for(;;){let R=this.getCurrentRecord();if(R.type!==l.PHONE)break;_.push(R.value),this.currentLine++}return _}parseConnection(){let _=this.getCurrentRecord();if(_.type===l.CONNECTION){let R=this.extractOneOrMore(_,f);this.consumeSpaceForRecord(_);let k=this.extractOneOrMore(_,f);this.consumeSpaceForRecord(_);let z=this.extract(_,this.consumeAddress);return this.currentLine++,{nettype:R,addrtype:k,address:z}}}parseMedia(){let _=this.getCurrentRecord(),R=this.extract(_,this.consumeToken);this.consumeSpaceForRecord(_);let k=this.extract(_,this.consumePort);_.value[_.cur]==="/"&&(_.cur+=1,k+=this.extract(_,this.consumeInteger)),this.consumeSpaceForRecord(_);let z=[];for(z.push(this.extract(_,this.consumeToken));_.value[_.cur]==="/";)_.cur+=1,z.push(this.extract(_,this.consumeToken));if(z.length===0)throw new Error("Invalid proto");let U=this.parseFmt(_);return this.currentLine++,{mediaType:R,port:k,protos:z,fmts:U}}parseTimeFields(){let _=[];for(;this.getCurrentRecord().type===l.TIME;){let R=this.parseTime(),k=this.parseRepeat(),z=this.parseZone();_.push({time:R,repeats:k,zones:z})}return _}parseMediaDescription(){let _=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===l.MEDIA;){let R=this.parseMedia(),k=this.parseInformation(),z=this.parseConnections(),U=this.parseBandWidth(),q=this.parseKey(),oe=this.parseMediaAttributes(R);_.push({media:R,information:k,connections:z,bandwidths:U,key:q,attributes:oe})}return _}parseConnections(){let _=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===l.CONNECTION;)_.push(this.parseConnection());return _}parseFmt(_){let R=[];for(;;)try{this.consumeSpaceForRecord(_),R.push(this.extract(_,this.consumeToken))}catch{break}if(R.length===0)throw new Error("Invalid fmts");return R}extract(_,R){for(var k=arguments.length,z=new Array(k>2?k-2:0),U=2;U<k;U++)z[U-2]=arguments[U];let q=R.call(this,_.value,_.cur,...z),oe=_.value.slice(_.cur,q);return _.cur=q,oe}extractOneOrMore(_,R){let k=this.consumeOneOrMore(_.value,_.cur,R),z=_.value.slice(_.cur,k);return _.cur=k,z}consumeSpaceForRecord(_){if(_.value[_.cur]!==c)throw new Error("Invalid space at ".concat(_.cur,"."));_.cur+=1}}class V extends j{constructor(){super(...arguments),L(this,"attributes",void 0),L(this,"digested",!1)}extractOneOrMore(_,R,k){let z=this.consumeOneOrMore(_.attValue,_._cur,R),U=_.attValue.slice(_._cur,z),[q,oe]=k||[];if(typeof q=="number"&&U.length<q)throw new Error("error in length, should be more or equal than ".concat(q," characters."));if(typeof oe=="number"&&U.length>oe)throw new Error("error in length, should be less or equal than ".concat(oe," characters."));return _._cur=z,U}consumeAttributeSpace(_){if(_.attValue[_._cur]!==c)throw new Error("Invalid space at ".concat(_._cur,"."));_._cur+=1}extract(_,R){if(!_.attValue)throw new Error("Nothing to extract from attValue.");for(var k=arguments.length,z=new Array(k>2?k-2:0),U=2;U<k;U++)z[U-2]=arguments[U];let q=R.call(this,_.attValue,_._cur,...z),oe=_.attValue.slice(_._cur,q);return _._cur=q,oe}atEnd(_){if(!_.attValue)throw new Error;return _._cur>=_.attValue.length}peekChar(_){if(!_.attValue)throw new Error;return _.attValue[_._cur]}peek(_,R){if(!_.attValue)throw new Error;for(let k=0;k<R.length;k++)if(R[k]!==_.attValue[_._cur+k])return!1;return!0}parseIceUfrag(_){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(_,E,[4,256])}parseIcePwd(_){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(_,E,[22,256])}parseIceOptions(_){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");let R=[];for(;!this.atEnd(_);){R.push(this.extractOneOrMore(_,E));try{this.consumeAttributeSpace(_)}catch(k){if(this.atEnd(_))break;throw k}}this.attributes.iceOptions=R}parseFingerprint(_){let R=this.extract(_,this.consumeToken);this.consumeAttributeSpace(_);let k=this.extract(_,this.consumeTill);this.attributes.fingerprints.push({hashFunction:R,fingerprint:k})}parseExtmap(_){let R=this.extractOneOrMore(_,d),k;this.peekChar(_)==="/"&&(this.extract(_,this.consume,"/"),k=this.extract(_,this.consumeToken)),this.consumeAttributeSpace(_);let z=this.extract(_,this.consumeTill,c),U=O(O({entry:parseInt(R,10)},k&&{direction:k}),{},{extensionName:z});this.peekChar(_)===c&&(this.consumeAttributeSpace(_),U.extensionAttributes=this.extract(_,this.consumeTill)),this.attributes.extmaps.push(U)}parseSetup(_){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");let R=this.extract(_,this.consumeTill);if(R!=="active"&&R!=="passive"&&R!=="actpass"&&R!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=R}}class Y extends V{constructor(){super(...arguments),L(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(_){if(this.digested)throw new Error("already digested");try{switch(_.attField){case"group":this.parseGroup(_);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(_);break;case"ice-pwd":this.parseIcePwd(_);break;case"ice-options":this.parseIceOptions(_);break;case"fingerprint":this.parseFingerprint(_);break;case"setup":this.parseSetup(_);break;case"tls-id":this.parseTlsId(_);break;case"identity":this.parseIdentity(_);break;case"extmap":this.parseExtmap(_);break;case"msid-semantic":this.parseMsidSemantic(_);break;default:_.ignored=!0,this.attributes.unrecognized.push(_)}}catch(R){throw console.error("parsing session attribute ".concat(_.attField,' error, "a=').concat(_.attField,":").concat(_.attValue,'"')),R}if(!_.ignored&&_.attValue&&!this.atEnd(_))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(_){let R=this.extract(_,this.consumeToken),k=[];for(;!this.atEnd(_)&&this.peekChar(_)===c;)this.consumeAttributeSpace(_),k.push(this.extract(_,this.consumeToken));this.attributes.groups.push({semantic:R,identificationTag:k})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(_){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(_,w)}parseIdentity(_){let R=this.extractOneOrMore(_,S),k=[];for(;!this.atEnd(_)&&this.peekChar(_)===c;){this.consumeAttributeSpace(_);let z=this.extract(_,this.consumeToken);this.extract(_,this.consume,"=");let U=this.extractOneOrMore(_,q=>q!==c&&v(q));k.push({name:z,value:U})}this.attributes.identities.push({assertionValue:R,extensions:k})}parseMsidSemantic(_){this.peekChar(_)===c&&this.consumeAttributeSpace(_);let R={semantic:this.extract(_,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(_)}catch{break}if(this.peekChar(_)==="*"){this.extract(_,this.consume,"*"),R.applyForAll=!0;break}{let k=this.extract(_,this.consumeTill,c);R.identifierList.push(k)}}this.attributes.msidSemantic=R}}class Z extends V{constructor(_){super(),L(this,"attributes",void 0),_.protos.indexOf("RTP")!==-1||_.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(_){if(this.digested)throw new Error("already digested");try{switch(_.attField){case"extmap":this.parseExtmap(_);break;case"setup":this.parseSetup(_);break;case"ice-ufrag":this.parseIceUfrag(_);break;case"ice-pwd":this.parseIcePwd(_);break;case"ice-options":this.parseIceOptions(_);break;case"candidate":this.parseCandidate(_);break;case"remote-candidate":this.parseRemoteCandidate(_);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(_);break;case"rtpmap":this.parseRtpmap(_);break;case"ptime":this.parsePtime(_);break;case"maxptime":this.parseMaxPtime(_);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(_);break;case"ssrc":this.parseSSRC(_);break;case"fmtp":this.parseFmtp(_);break;case"rtcp-fb":this.parseRtcpFb(_);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(_);break;case"mid":this.parseMid(_);break;case"msid":this.parseMsid(_);break;case"imageattr":this.parseImageAttr(_);break;case"rid":this.parseRid(_);break;case"simulcast":this.parseSimulcast(_);break;case"sctp-port":this.parseSctpPort(_);break;case"max-message-size":this.parseMaxMessageSize(_);break;case"ssrc-group":this.parseSSRCGroup(_);break;default:_.ignored=!0,this.attributes.unrecognized.push(_)}}catch(R){throw console.error("parsing media attribute ".concat(_.attField,' error, "a=').concat(_.attField,":").concat(_.attValue,'"')),R}if(!_.ignored&&_.attValue&&!this.atEnd(_))throw new Error("attribute parsing error")}parseCandidate(_){let R=this.extractOneOrMore(_,E,[1,32]);this.consumeAttributeSpace(_);let k=this.extractOneOrMore(_,d,[1,5]);this.consumeAttributeSpace(_);let z=this.extract(_,this.consumeToken);this.consumeAttributeSpace(_);let U=this.extractOneOrMore(_,d,[1,10]);this.consumeAttributeSpace(_);let q=this.extract(_,this.consumeAddress);this.consumeAttributeSpace(_);let oe=this.extract(_,this.consumePort);this.consumeAttributeSpace(_),this.extract(_,this.consume,"typ"),this.consumeAttributeSpace(_);let ue={foundation:R,componentId:k,transport:z,priority:U,connectionAddress:q,port:oe,type:this.extract(_,this.consumeToken),extension:{}};for(this.peek(_," raddr")&&(this.extract(_,this.consume," raddr"),this.consumeAttributeSpace(_),ue.relAddr=this.extract(_,this.consumeAddress)),this.peek(_," rport")&&(this.extract(_,this.consume," rport"),this.consumeAttributeSpace(_),ue.relPort=this.extract(_,this.consumePort));this.peekChar(_)===c;){this.consumeAttributeSpace(_);let me=this.extract(_,this.consumeToken);this.consumeAttributeSpace(_),ue.extension[me]=this.extractOneOrMore(_,u)}this.attributes.candidates.push(ue)}parseRemoteCandidate(_){let R=[];for(;;){let k=this.extractOneOrMore(_,d,[1,5]);this.consumeAttributeSpace(_);let z=this.extract(_,this.consumeAddress);this.consumeAttributeSpace(_);let U=this.extract(_,this.consumePort);R.push({componentId:k,connectionAddress:z,port:U});try{this.consumeAttributeSpace(_)}catch{break}}this.attributes.remoteCandidatesList.push(R)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(_){let R=this.extract(_,this.consumeToken);this.consumeAttributeSpace(_);let k=this.extract(_,this.consumeTill,"/");this.extract(_,this.consume,"/");let z={encodingName:k,clockRate:this.extractOneOrMore(_,d)};this.atEnd(_)||this.peekChar(_)!=="/"||(this.extract(_,this.consume,"/"),z.encodingParameters=parseInt(this.extract(_,this.consumeTill),10));let U=this.attributes.payloads.find(q=>q.payloadType===parseInt(R,10));U?U.rtpMap=z:this.attributes.payloads.push({payloadType:parseInt(R,10),rtpMap:z,rtcpFeedbacks:[]})}parsePtime(_){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(_,this.consumeTill)}parseMaxPtime(_){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(_,this.consumeTill)}parseDirection(_){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=_.attField}parseSSRC(_){let R=this.extractOneOrMore(_,d);this.consumeAttributeSpace(_);let k=this.extract(_,this.consumeTill,":"),z;this.peekChar(_)===":"&&(this.extract(_,this.consume,":"),z=this.extract(_,this.consumeTill));let U=this.attributes.ssrcs.find(q=>q.ssrcId===parseInt(R,10));U?U.attributes[k]=z:this.attributes.ssrcs.push({ssrcId:parseInt(R,10),attributes:{[k]:z}})}parseFmtp(_){let R=this.extract(_,this.consumeTill,c);this.consumeAttributeSpace(_);let k=this.extract(_,this.consumeTill),z={};k.split(";").forEach(q=>{let[oe,ue]=q.split("=");oe=li(oe).call(oe);let me=typeof ue=="string"?li(ue).call(ue):null;typeof oe=="string"&&oe.length>0&&(z[oe]=me)});let U=this.attributes.payloads.find(q=>q.payloadType===parseInt(R,10));U?U.fmtp={parameters:z}:this.attributes.payloads.push({payloadType:parseInt(R,10),rtcpFeedbacks:[],fmtp:{parameters:z}})}parseFmtParameters(_){let R={},k=this.extract(_,this.consumeTill,"=");_._cur++;let z=this.extract(_,this.consumeTill,";");for(R[k]=z;_.attValue[_._cur]===";";){let U=this.extract(_,this.consumeTill,"=");_._cur++;let q=this.extract(_,this.consumeTill,";");R[U]=q}return R}parseRtcpFb(_){let R="";R=this.peekChar(_)==="*"?this.extract(_,this.consume,"*"):this.extract(_,this.consumeTill,c),this.consumeAttributeSpace(_);let k=this.extract(_,this.consumeTill,c),z;if(k==="trr-int")z={type:k,interval:this.extract(_,this.consumeTill)};else{let U={type:k};this.peekChar(_)===c&&(this.consumeAttributeSpace(_),U.parameter=this.extract(_,this.consumeToken),this.peekChar(_)===c&&(U.additional=this.extract(_,this.consumeTill))),z=U}if(R==="*")this.attributes.rtcpFeedbackWildcards.push(z);else{let U=this.attributes.payloads.find(q=>q.payloadType===parseInt(R,10));U?U.rtcpFeedbacks.push(z):this.attributes.payloads.push({payloadType:parseInt(R,10),rtcpFeedbacks:[z]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(_){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");let R={port:this.extract(_,this.consumePort)};this.peekChar(_)===c&&(this.consumeAttributeSpace(_),R.netType=this.extractOneOrMore(_,f),this.consumeAttributeSpace(_),R.addressType=this.extractOneOrMore(_,f),this.consumeAttributeSpace(_),R.address=this.extract(_,this.consumeAddress)),this.attributes.rtcp=R}parseMsid(_){let R={id:this.extractOneOrMore(_,f,[1,64])};this.peekChar(_)===c&&(this.consumeAttributeSpace(_),R.appdata=this.extractOneOrMore(_,f,[1,64])),this.attributes.msids.push(R)}parseImageAttr(_){this.attributes.imageattr.push(_.attValue)}parseRid(_){let R=this.extractOneOrMore(_,z=>g(z)||d(z)||z==="_"||z==="-");this.consumeAttributeSpace(_);let k={id:R,direction:this.extract(_,this.consumeToken),params:[]};if(this.peekChar(_)===c){if(this.consumeAttributeSpace(_),this.peek(_,"pt=")){this.extract(_,this.consume,"pt=");let z=[];for(;;){let U=this.extract(_,this.consumeToken);z.push(U);try{this.extract(_,this.consume,",")}catch{break}}k.payloads=z,this.peekChar(_)===c&&this.extract(_,this.consume,c)}for(;;){let z=this.extract(_,this.consumeToken);switch(z){case"depend":{let U={type:z,rids:this.extract(_,this.consume,"=").split(",")};k.params.push(U);break}default:{let U={type:z};this.peekChar(_)==="="&&(this.extract(_,this.consume,"="),U.val=this.extract(_,this.consumeTill,";")),k.params.push(U)}}try{this.extract(_,this.consume,";")}catch{break}}}this.attributes.rids.push(k)}parseSimulcast(_){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=_.attValue,this.extract(_,this.consumeTill)}parseSctpPort(_){this.attributes.sctpPort=this.extractOneOrMore(_,d,[1,5])}parseMaxMessageSize(_){this.attributes.maxMessageSize=this.extractOneOrMore(_,d,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(_){this.attributes.mid=this.extract(_,this.consumeToken)}parseSSRCGroup(_){let R=this.extract(_,this.consumeToken),k=[];for(;;)try{this.consumeAttributeSpace(_);let z=this.extract(_,this.consumeInteger);k.push(parseInt(z,10))}catch{break}this.attributes.ssrcGroups.push({semantic:R,ssrcIds:k})}}function te(P,_,R){return _ in P?Object.defineProperty(P,_,{value:R,enumerable:!0,configurable:!0,writable:!0}):P[_]=R,P}class H{constructor(){te(this,"eol",s)}print(_,R){let k="";return R&&(this.eol=R),k+=this.printVersion(_.version),k+=this.printOrigin(_.origin),k+=this.printSessionName(_.sessionName),k+=this.printInformation(_.information),k+=this.printUri(_.uri),k+=this.printEmail(_.emails),k+=this.printPhone(_.phones),k+=this.printConnection(_.connection),k+=this.printBandwidth(_.bandwidths),k+=this.printTimeFields(_.timeFields),k+=this.printKey(_.key),k+=this.printSessionAttributes(_.attributes),k+=this.printMediaDescription(_.mediaDescriptions),k}printVersion(_){return"v=".concat(_).concat(this.eol)}printOrigin(_){return"o=".concat(_.username," ").concat(_.sessId," ").concat(_.sessVersion," ").concat(_.nettype," ").concat(_.addrtype," ").concat(_.unicastAddress).concat(this.eol)}printSessionName(_){return _?"s=".concat(_).concat(this.eol):""}printInformation(_){return _?"i=".concat(_).concat(this.eol):""}printUri(_){return _?"u=".concat(_).concat(this.eol):""}printEmail(_){let R="";for(let k of _)R+="e=".concat(k).concat(this.eol);return R}printPhone(_){let R="";for(let k of _)R+="e=".concat(k).concat(this.eol);return R}printConnection(_){return _?"c=".concat(_.nettype," ").concat(_.addrtype," ").concat(_.address).concat(this.eol):""}printBandwidth(_){let R="";for(let k of _)R+="b=".concat(k.bwtype,":").concat(k.bandwidth).concat(this.eol);return R}printTimeFields(_){let R="";for(let k of _){R+="t=".concat(k.time.startTime," ").concat(k.time.startTime).concat(this.eol);for(let z of k.repeats)R+="r=".concat(z.repeatInterval," ").concat(z.typedTimes.join(" ")).concat(this.eol);k.zoneAdjustments&&(R+="z=",R+="z=".concat(k.zoneAdjustments.map(z=>"".concat(z.time," ").concat(z.back?"-":""," ").concat(z.typedTime)).join(" ")).concat(this.eol),R+=this.eol)}return R}printKey(_){return _?"k=".concat(_).concat(this.eol):""}printAttributes(_){let R="";for(let k of _)R+="a=".concat(k.attField).concat(k.attValue?":".concat(k.attValue):"").concat(this.eol);return R}printMediaDescription(_){let R="";for(let k of _)R+=this.printMedia(k.media),R+=this.printInformation(k.information),R+=this.printConnections(k.connections),R+=this.printBandwidth(k.bandwidths),R+=this.printKey(k.key),R+=this.printMediaAttributes(k);return R}printConnections(_){let R="";for(let k of _)R+=this.printConnection(k);return R}printMedia(_){return"m=".concat(_.mediaType," ").concat(_.port," ").concat(_.protos.join("/")," ").concat(_.fmts.join(" ")).concat(this.eol)}printSessionAttributes(_){return new K(this.eol).print(_)}printMediaAttributes(_){return new A(this.eol).print(_)}}class ${constructor(_){te(this,"eol",void 0),this.eol=_}printIceUfrag(_){return _===void 0?"":"a=ice-ufrag:".concat(_).concat(this.eol)}printIcePwd(_){return _===void 0?"":"a=ice-pwd:".concat(_).concat(this.eol)}printIceOptions(_){return _===void 0?"":"a=ice-options:".concat(_.join(c)).concat(this.eol)}printFingerprints(_){return _.length>0?_.map(R=>"a=fingerprint:".concat(R.hashFunction).concat(c).concat(R.fingerprint)).join(this.eol)+this.eol:""}printExtmap(_){return _.map(R=>"a=extmap:".concat(R.entry).concat(R.direction?"/".concat(R.direction):"").concat(c).concat(R.extensionName).concat(R.extensionAttributes?"".concat(c).concat(R.extensionAttributes):"").concat(this.eol)).join("")}printSetup(_){return _===void 0?"":"a=setup:".concat(_).concat(this.eol)}printUnrecognized(_){return _.map(R=>"a=".concat(R.attField).concat(R.attValue?":".concat(R.attValue):"").concat(this.eol)).join("")}}class K extends ${print(_){let R="";return R+=this.printGroups(_.groups),R+=this.printMsidSemantic(_.msidSemantic),R+=this.printIceLite(_.iceLite),R+=this.printIceUfrag(_.iceUfrag),R+=this.printIcePwd(_.icePwd),R+=this.printIceOptions(_.iceOptions),R+=this.printFingerprints(_.fingerprints),R+=this.printSetup(_.setup),R+=this.printTlsId(_.tlsId),R+=this.printIdentity(_.identities),R+=this.printExtmap(_.extmaps),R+=this.printUnrecognized(_.unrecognized),R}printGroups(_){let R="";return _.length>0&&(R+=_.map(k=>"a=group:".concat(k.semantic).concat(k.identificationTag.map(z=>"".concat(c).concat(z)).join("")).concat(this.eol)).join("")),R}printIceLite(_){return _===void 0?"":"a=ice-lite"+this.eol}printTlsId(_){return _?"a=tls-id:".concat(_).concat(this.eol):""}printIdentity(_){return _.length===0?"":_.map(R=>"a=identity:".concat(R.assertionValue).concat(R.extensions.map(k=>"".concat(c).concat(k.name).concat(k.value?"=".concat(k.value):"")))).join(this.eol)+this.eol}printMsidSemantic(_){if(!_)return"";let R="a=msid-semantic:".concat(_.semantic);return _.applyForAll?R+="".concat(c,"*"):_.identifierList.length>0&&(R+=_.identifierList.map(k=>"".concat(c).concat(k))),R+this.eol}}class A extends ${print(_){let R=_.attributes,k="";return k+=this.printRTCP(R.rtcp),k+=this.printIceUfrag(R.iceUfrag),k+=this.printIcePwd(R.icePwd),k+=this.printIceOptions(R.iceOptions),k+=this.printCandidates(R.candidates),k+=this.printRemoteCandidatesList(R.remoteCandidatesList),k+=this.printEndOfCandidates(R.endOfCandidates),k+=this.printFingerprints(R.fingerprints),k+=this.printSetup(R.setup),k+=this.printMid(R.mid),k+=this.printExtmap(R.extmaps),k+=this.printRTPRelated(R),k+=this.printPtime(R.ptime),k+=this.printMaxPtime(R.maxPtime),k+=this.printDirection(R.direction),k+=this.printSSRCGroups(R.ssrcGroups),k+=this.printSSRC(R.ssrcs),k+=this.printRTCPMux(R.rtcpMux),k+=this.printRTCPMuxOnly(R.rtcpMuxOnly),k+=this.printRTCPRsize(R.rtcpRsize),k+=this.printMSId(R.msids),k+=this.printImageattr(R.imageattr),k+=this.printRid(R.rids),k+=this.printSimulcast(R.simulcast),k+=this.printSCTPPort(R.sctpPort),k+=this.printMaxMessageSize(R.maxMessageSize),k+=this.printUnrecognized(R.unrecognized),k}printCandidates(_){return _.map(R=>"a=candidate:".concat(R.foundation).concat(c).concat(R.componentId).concat(c).concat(R.transport).concat(c).concat(R.priority).concat(c).concat(R.connectionAddress).concat(c).concat(R.port).concat(c,"typ").concat(c).concat(R.type).concat(R.relAddr?"".concat(c,"raddr").concat(c).concat(R.relAddr):"").concat(R.relPort?"".concat(c,"rport").concat(c).concat(R.relPort):"").concat(Object.keys(R.extension).map(k=>"".concat(c).concat(k).concat(c).concat(R.extension[k])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(_){return _.map(R=>"a=remote-candidates:".concat(R.join(c)).concat(this.eol)).join("")}printEndOfCandidates(_){return _===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(_){if(!_.payloads)return"";let R=_.payloads,k="";k+=_.rtcpFeedbackWildcards.map(z=>this.printRTCPFeedback("*",z)).join("");for(let z of R)k+=this.printRtpMap(z.payloadType,z.rtpMap),k+=this.printFmtp(z.payloadType,z.fmtp),k+=z.rtcpFeedbacks.map(U=>this.printRTCPFeedback(z.payloadType,U)).join("");return k}printFmtp(_,R){if(!R)return"";let k=Object.keys(R.parameters);return k.length===1&&R.parameters[k[0]]===null?"a=fmtp:".concat(_).concat(c).concat(k[0]).concat(this.eol):"a=fmtp:".concat(_).concat(c).concat(Object.keys(R.parameters).map(z=>"".concat(z,"=").concat(R.parameters[z])).join(";")).concat(this.eol)}printRtpMap(_,R){return R?"a=rtpmap:".concat(_).concat(c).concat(R.encodingName,"/").concat(R.clockRate).concat(R.encodingParameters?"/".concat(R.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(_,R){let k="a=rtcp-fb:".concat(_).concat(c),z=R;return z.type==="trr-int"?k+="ttr-int".concat(c).concat(z.interval):(k+="".concat(z.type),z.parameter&&(k+="".concat(c).concat(z.parameter),z.additional&&(k+="".concat(c).concat(z.additional)))),k+this.eol}printPtime(_){return _===void 0?"":"a=ptime:".concat(_).concat(this.eol)}printMaxPtime(_){return _===void 0?"":"a=maxptime:".concat(_).concat(this.eol)}printDirection(_){return _===void 0?"":"a=".concat(_).concat(this.eol)}printSSRC(_){return _.map(R=>Object.keys(R.attributes).map(k=>"a=ssrc:".concat(R.ssrcId.toString(10)).concat(c).concat(k).concat(R.attributes[k]?":".concat(R.attributes[k]):"").concat(this.eol)).join("")).join("")}printRTCPMux(_){return _===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(_){return _===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(_){return _===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(_){if(_===void 0)return"";let R="a=rtcp:".concat(_.port);return _.netType&&(R+="".concat(c).concat(_.netType)),_.addressType&&(R+="".concat(c).concat(_.addressType)),_.address&&(R+="".concat(c).concat(_.address)),R+this.eol}printMSId(_){return _.map(R=>"a=msid:".concat(R.id).concat(R.appdata?"".concat(c).concat(R.appdata):"").concat(this.eol)).join("")}printImageattr(_){return _.map(R=>"a=imageattr:".concat(R).concat(this.eol)).join("")}printRid(_){return _.map(R=>{let k="a=rid:".concat(R.id).concat(c).concat(R.direction);return R.payloads&&(k+="".concat(c,"pt=").concat(R.payloads.join(","))),R.params.length>0&&(k+="".concat(c).concat(R.params.map(z=>z.type==="depend"?"depend=".concat(z.rids.join(",")):"".concat(z.type,"=").concat(z.val)).join(";"))),k+this.eol}).join("")}printSimulcast(_){return _===void 0?"":"a=simulcast:".concat(_).concat(this.eol)}printSCTPPort(_){return _===void 0?"":"a=sctp-port:".concat(_).concat(this.eol)}printMaxMessageSize(_){return _===void 0?"":"a=max-message-size:".concat(_).concat(this.eol)}printMid(_){return _===void 0?"":"a=mid:".concat(_).concat(this.eol)}printSSRCGroups(_){return _.map(R=>"a=ssrc-group:".concat(R.semantic).concat(R.ssrcIds.map(k=>"".concat(c).concat(k.toString(10))).join("")).concat(this.eol)).join("")}}function N(P){return new W().parse(P)}function F(P,_){return new H().print(P,_)}}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var o in i)r.o(i,o)&&!r.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:i[o]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(8)})();var wn=YQ.exports;function ZN(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D("SVC_MODE");if(D("ENABLE_SVC"))return function(t){return t in BN}(e)?e:BN.L1T3}function vB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function EB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vB(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,{filterRTX:i,filterVideoFec:o,filterAudioFec:a,filterAudioCodec:s,filterVideoCodec:c}=t,{useXR:l}=r,d=[],u=[],p=[],f=[],m=!1,g=!1;if(wn.parse(e).mediaDescriptions.forEach(v=>{n&&n!==v.attributes.direction||(v.media.mediaType!=="video"||m||(u=v.attributes.payloads,f=v.attributes.extmaps,m=!0),v.media.mediaType!=="audio"||g||(d=v.attributes.payloads,p=v.attributes.extmaps,g=!0))}),!f||u.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!p||d.length===0)throw new Error("Cannot get audio capabilities from SDP.");if(u.forEach(v=>{var E;(E=v.rtpMap)!==null&&E!==void 0&&E.clockRate&&(v.rtpMap.clockRate=parseInt(v.rtpMap.clockRate)),l&&v.rtcpFeedbacks.push({type:"rrtr"})}),d.forEach(v=>{var E;(E=v.rtpMap)!==null&&E!==void 0&&E.clockRate&&(v.rtpMap.clockRate=parseInt(v.rtpMap.clockRate)),l&&v.rtcpFeedbacks.push({type:"rrtr"})}),i&&(d=d.filter(v=>{var E;return((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())!=="rtx"}),u=u.filter(v=>{var E;return((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())!=="rtx"})),o&&(u=u.filter(v=>{var E;return!/(red)|(ulpfec)|(flexfec)/i.test(((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName)||"")})),a&&(d=d.filter(v=>{var E;return!/(red)|(ulpfec)|(flexfec)/i.test(((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName)||"")})),s&&(s==null?void 0:s.length)>0&&(d=d.filter(v=>{var E;return pe(s).call(s,((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())||"")})),c&&(c==null?void 0:c.length)>0){let v=u.filter(E=>{var w;return pe(c).call(c,((w=E.rtpMap)===null||w===void 0?void 0:w.encodingName.toLowerCase())||"")});u=v.concat(i?[]:t2(v,u))}let y=D("UNSUPPORTED_VIDEO_CODEC");return y&&y.length>0&&(u=u.filter(v=>!(v.rtpMap&&pe(y).call(y,v.rtpMap.encodingName.toLowerCase())))),{audioCodecs:d,videoCodecs:u,audioExtensions:p,videoExtensions:f}}function ad(e){let t=wn.parse(e),r,n;for(let i of t.mediaDescriptions){if(!r){let o=i.attributes.iceUfrag,a=i.attributes.icePwd;if(!o||!a)throw new Error("Cannot get iceUfrag or icePwd from SDP.");r={iceUfrag:o,icePwd:a}}if(!n){let o=i.attributes.fingerprints;o.length>0&&(n={fingerprints:o})}}if(!n&&t.attributes.fingerprints.length>0&&(n={fingerprints:t.attributes.fingerprints}),!n||!r)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:r,dtlsParameters:n}}function XQ(e,t){let r=[],n=e.attributes.ssrcGroups.filter(a=>a.semantic==="FID"),i=e.attributes.ssrcGroups.find(a=>a.semantic==="SIM"),o=e.attributes.ssrcs;if(i)i.ssrcIds.forEach(a=>{var s;let c=(s=n.find(l=>l.ssrcIds[0]===a))===null||s===void 0?void 0:s.ssrcIds[1];r.push({ssrcId:a,rtx:t?c:void 0})});else if(n.length>0){let a=n[0].ssrcIds[0],s=n[0].ssrcIds[1];r.push({ssrcId:a,rtx:t?s:void 0})}else{if(o.length===0)throw new Error("No ssrcs found on local media description.");r.push({ssrcId:o[0].ssrcId})}return r}function _B(e,t,r){let{cname:n}=e,i;t?i=JQ(t):(i=e.iceParameters.candidates.map(d=>({foundation:d.foundation,componentId:"1",transport:d.protocol,priority:d.priority.toString(),connectionAddress:d.ip,port:d.port.toString(),type:d.type,extension:{}})),b.debug("Using candidates from gateway."));let o={fingerprints:e.dtlsParameters.fingerprints.map(d=>({hashFunction:d.algorithm,fingerprint:d.fingerprint}))},a={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd},s;switch(e.dtlsParameters.role){case"server":s="passive";break;case"client":s="active";break;case"auto":s="actpass"}let c=dw(e.rtpCapabilities),l=[];return Array.isArray(r)&&r.length>0&&r.forEach(d=>{l.push({kind:Se.VIDEO,ssrcId:d.v,rtx:d.v_rtx,mslabel:"".concat(d.v,"_").concat(d.a)},{kind:Se.AUDIO,ssrcId:d.a,mslabel:"".concat(d.v,"_").concat(d.a)})}),{dtlsParameters:o,iceParameters:a,candidates:i,rtpCapabilities:c,setup:s,cname:n,preSSRCs:l}}function JQ(e){let t=[];return e.ip&&typeof e.port=="number"&&(t=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],b.debug("Using remote candidate from AP ".concat(e.ip,":").concat(e.port)),e.ip6&&(t.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip6,port:e.port.toString(),type:"host",extension:{}}),b.debug("Using IPV6 remote candidate from AP ".concat(e.ip6,":").concat(e.port)))),t}function fu(e,t,r){let n=[],i=[];return e.forEach(o=>{let{ssrcId:a,rtx:s}=o,c=qt(8,"track-"),l={ssrcId:a,attributes:EB({label:c,mslabel:r=r||qt(10,""),msid:"".concat(r," ").concat(c)},t&&{cname:t})};if(n.push(l),s!==void 0){let d={ssrcId:s,attributes:EB({label:c,mslabel:r,msid:"".concat(r," ").concat(c)},t&&{cname:t})};n.push(d),i.push({semantic:"FID",ssrcIds:[a,s]})}}),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map(o=>{let{ssrcId:a}=o;return a})}),{ssrcs:n,ssrcGroups:i}}function Df(e,t){t instanceof vr&&e.attributes.payloads.forEach(r=>{var n;let i=(n=r.rtpMap)===null||n===void 0?void 0:n.encodingName.toLowerCase();if(!i||["opus","pcmu","pcma","g722"].indexOf(i)===-1)return;r.fmtp||(r.fmtp={parameters:{}}),r.fmtp.parameters.minptime="10",r.fmtp.parameters.useinbandfec="1";let o=t._encoderConfig;o&&i!=="pcmu"&&i!=="pcma"&&i!=="g722"&&(o.bitrate&&!_r()&&(r.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*o.bitrate))),o.sampleRate&&(r.fmtp.parameters.maxplaybackrate="".concat(o.sampleRate),r.fmtp.parameters["sprop-maxcapturerate"]="".concat(o.sampleRate)),o.stereo&&(r.fmtp.parameters.stereo="1",r.fmtp.parameters["sprop-stereo"]="1"))})}function ZD(e){let t=e.attributes.unrecognized.findIndex(r=>r.attField==="x-google-flag"&&r.attValue==="conference");t!==-1&&e.attributes.unrecognized.splice(t,1)}function e2(e,t){var r;if(!(t instanceof Qt&&t._encoderConfig&&t._hints.indexOf(nr.SCREEN_TRACK)===-1))return;let n=t._encoderConfig;_t().supportMinBitrate&&n.bitrateMin&&e.attributes.payloads.forEach(i=>{var o,a;pe(o=["h264","h265","vp8","vp9","av1"]).call(o,((a=i.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase())||"")&&(i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters["x-google-min-bitrate"]="".concat(n.bitrateMin))}),_t().supportMinBitrate&&!pe(r=t._hints).call(r,nr.LOW_STREAM)&&n.bitrateMax&&e.attributes.payloads.forEach(i=>{var o,a;pe(o=["h264","h265","vp8","vp9","av1"]).call(o,((a=i.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase())||"")&&(i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters["x-google-start-bitrate"]="".concat(D("X_GOOGLE_START_BITRATE")||Math.floor(n.bitrateMax)))})}function QQ(e){if(e.media.mediaType!=="video")return;let t=vt();if(t.name!==Ot.SAFARI&&t.os!==sn.IOS)return;let r=e.attributes.extmaps.findIndex(n=>/video-orientation/g.test(n.extensionName));r!==-1&&e.attributes.extmaps.splice(r,1)}function lw(e,t,r){if(!t)return;let n,i;if(e.media.mediaType==="video"?(n=r.videoExtensions,i=r.videoCodecs):(n=r.audioExtensions,i=r.audioCodecs),t.twcc===!0){let o=n.find(a=>a.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");o&&(e.attributes.extmaps.find(a=>a.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||e.attributes.extmaps.push({entry:o.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(a,s){return s.filter(c=>!!a.find(l=>l.payloadType===c.payloadType&&!!l.rtcpFeedbacks.find(d=>d.type==="transport-cc")))}(i,e.attributes.payloads).forEach(a=>{a.rtcpFeedbacks.find(s=>s.type==="transport-cc")||a.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(t.twcc===!1){let o=e.attributes.extmaps.findIndex(a=>a.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");o!==-1&&e.attributes.extmaps.splice(o,1),e.attributes.payloads.forEach(a=>{let s=a.rtcpFeedbacks.findIndex(c=>c.type==="transport-cc");s!==-1&&a.rtcpFeedbacks.splice(s,1)})}if(t.remb===!0){let o=n.find(a=>a.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");o&&(e.attributes.extmaps.find(a=>a.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||e.attributes.extmaps.push({entry:o.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(a,s){return s.filter(c=>!!a.find(l=>l.payloadType===c.payloadType&&!!l.rtcpFeedbacks.find(d=>d.type==="goog-remb")))}(i,e.attributes.payloads).forEach(a=>{a.rtcpFeedbacks.find(s=>s.type==="goog-remb")||a.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(t.remb===!1){let o=e.attributes.extmaps.findIndex(a=>a.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");o!==-1&&e.attributes.extmaps.splice(o,1),e.attributes.payloads.forEach(a=>{let s=a.rtcpFeedbacks.findIndex(c=>c.type==="goog-remb");s!==-1&&a.rtcpFeedbacks.splice(s,1)})}}function ZQ(e,t,r){if(_r()||e.media.mediaType!=="video"||!(t instanceof Qt)||r!=="vp9"&&r!=="vp8"||r==="vp8"&&!D("SIMULCAST")||r==="vp9"&&D("ENABLE_SVC")||t._scalabilityMode===void 0||t._scalabilityMode.numSpatialLayers<=1)return;let n=r==="vp8"?2:t._scalabilityMode.numSpatialLayers,i=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find(s=>s.semantic==="FID"&&s.ssrcIds[0]===i.ssrcId),a={semantic:"SIM",ssrcIds:[i.ssrcId]};for(let s=1;s<n;s++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+s,attributes:Pr(i.attributes)}),a.ssrcIds.push(i.ssrcId+s),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+s,attributes:Pr(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+s,o.ssrcIds[1]+s]}));e.attributes.ssrcGroups.unshift(a)}async function eZ(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new RTCPeerConnection;r.addTransceiver("video",{direction:"sendonly"}),r.addTransceiver("audio",{direction:"sendonly"}),r.addTransceiver("video",{direction:"recvonly"}),r.addTransceiver("audio",{direction:"recvonly"});let n=(await r.createOffer()).sdp,{send:i,recv:o,sendrecv:a}=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0,d=q0(l,s,c,"sendonly"),u=q0(l,s,c,"recvonly"),p={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},m={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Ya(d,u,"videoExtensions",p,f,m),Ya(d,u,"videoCodecs",p,f,m),Ya(d,u,"audioExtensions",p,f,m),Ya(d,u,"audioCodecs",p,f,m),D("RAISE_H264_BASELINE_PRIORITY")){let g=m.videoCodecs.findIndex(y=>{var v,E;return((v=y.rtpMap)===null||v===void 0?void 0:v.encodingName.toLocaleLowerCase())==="h264"&&((E=y.fmtp)===null||E===void 0?void 0:E.parameters["profile-level-id"])==="42001f"});if(g!==-1){let y=m.videoCodecs.findIndex(v=>{var E;return((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName.toLocaleLowerCase())==="h264"});if(y<g){b.debug("raising H264 baseline profile priority");let v=m.videoCodecs[g];m.videoCodecs.splice(g,1),m.videoCodecs.splice(y,0,v)}y!==-1&&(f.videoCodecs=f.videoCodecs.filter(v=>{var E,w;return!(((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName.toLocaleLowerCase())==="h264"&&((w=v.fmtp)===null||w===void 0?void 0:w.parameters["profile-level-id"])!=="42001f")})),y!==-1&&D("FILTER_SEND_H264_BASELINE")&&(p.videoCodecs=p.videoCodecs.filter(v=>{var E,w;return!(((E=v.rtpMap)===null||E===void 0?void 0:E.encodingName.toLocaleLowerCase())==="h264"&&((w=v.fmtp)===null||w===void 0?void 0:w.parameters["profile-level-id"])!=="42001f")}))}}return{send:p,recv:f,sendrecv:m}}(e,t,n);try{r.close()}catch{}return{send:i,recv:o,sendrecv:a}}function bB(){let e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=q0(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"recvonly"),r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Ya(e,t,"videoExtensions",r,n,i),Ya(e,t,"videoCodecs",r,n,i),Ya(e,t,"audioExtensions",r,n,i),Ya(e,t,"audioCodecs",r,n,i),D("RAISE_H264_BASELINE_PRIORITY")){let o=i.videoCodecs.findIndex(a=>a.rtpMap&&a.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&a.fmtp&&a.fmtp.parameters["profile-level-id"]==="42001f");if(o!==-1){let a=i.videoCodecs.findIndex(s=>s.rtpMap&&s.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(a<o){b.debug("raising H264 baseline profile priority");let s=i.videoCodecs[o];i.videoCodecs.splice(o,1),i.videoCodecs.splice(a,0,s)}a!==-1&&(n.videoCodecs=n.videoCodecs.filter(s=>!(s.rtpMap&&s.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&s.fmtp&&s.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:r,recv:n,sendrecv:i}}function Ya(e,t,r,n,i,o){if(r==="videoExtensions"||r==="audioExtensions"){let a=[];return e[r].forEach(s=>{t[r].some((c,l)=>{if(s.entry===c.entry&&s.extensionName===c.extensionName)return a.push(l),!0})?o[r].push(s):n[r].push(s)}),void t[r].forEach((s,c)=>{a.indexOf(c)===-1&&i[r].push(s)})}if(r==="videoCodecs"||r==="audioCodecs"){let a=[];return e[r].forEach(s=>{t[r].some((c,l)=>{if(s.payloadType===c.payloadType&&JSON.stringify(s)===JSON.stringify(c))return a.push(l),!0})?o[r].push(s):n[r].push(s)}),void t[r].forEach((s,c)=>{a.indexOf(c)===-1&&i[r].push(s)})}}function dw(e){let{send:t,recv:r,sendrecv:n}=e;if(!n){if(!t||!r)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:r}}let i,o;return t?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...t.audioCodecs,...n.audioCodecs],i.videoCodecs=[...t.videoCodecs,...n.videoCodecs],i.audioExtensions=[...t.audioExtensions,...n.audioExtensions],i.videoExtensions=[...t.videoExtensions,...n.videoExtensions]):i=n,r?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...r.audioCodecs,...n.audioCodecs],o.videoCodecs=[...r.videoCodecs,...n.videoCodecs],o.audioExtensions=[...r.audioExtensions,...n.audioExtensions],o.videoExtensions=[...r.videoExtensions,...n.videoExtensions]):o=n,{send:i,recv:o}}function Lf(e){e.media.mediaType==="audio"&&e.attributes.payloads.filter(t=>{var r;return((r=t.rtpMap)===null||r===void 0?void 0:r.encodingName.toLowerCase())==="opus"}).forEach(t=>{t.fmtp||(t.fmtp={parameters:{}}),t.fmtp.parameters.stereo="1",t.fmtp.parameters["sprop-stereo"]="1"})}function zg(e,t,r,n){let i=[];if(e===Se.VIDEO){if(D("H264_PROFILE_LEVEL_ID")&&n==="h264"&&(i=t.videoCodecs.filter(o=>{var a;return pe(a=o.rtpMap&&o.rtpMap.encodingName.toLowerCase()||"").call(a,n)&&o&&o.fmtp&&o.fmtp.parameters["profile-level-id"]===D("H264_PROFILE_LEVEL_ID")})),!Array.isArray(i)||i.length===0){let o=[],a=[],s=[],c=[];if(r.videoCodecs.forEach(l=>{let d=l.rtpMap&&l.rtpMap.encodingName.toLowerCase()||"";pe(d).call(d,n)?o.push(l):pe(d).call(d,"vp9")?a.push(l):pe(d).call(d,"vp8")?s.push(l):pe(d).call(d,"h264")&&c.push(l)}),o.length===0){let l="";a.length!==0?(o=a,l="vp9"):s.length!==0?(o=s,l="vp8"):c.length!==0&&(o=c,l="h264"),b.warning("codec ".concat(n," not included in rtpCapabilities, fallback to default payloads: ").concat(l))}o.length!==0&&(i=t.videoCodecs.filter(l=>o.some(d=>d.payloadType===l.payloadType)))}if(i.length===0&&(b.warning("codec ".concat(n," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),i=t.videoCodecs),D("USE_PUB_RTX")||D("USE_SUB_RTX")){let o=t2(i,t.videoCodecs);i=[...i,...o]}}else i=t.audioCodecs.filter(o=>{var a;return pe(a=o.rtpMap&&o.rtpMap.encodingName.toLowerCase()||"").call(a,n)}),i.length===0&&(b.warning("codec ".concat(n," not included in rtpCapabilities, fallback to opus")),i=t.audioCodecs.filter(o=>{var a;return pe(a=o.rtpMap&&o.rtpMap.encodingName.toLowerCase()||"").call(a,"opus")}));return i}function t2(e,t){let r=e.map(n=>n.payloadType.toString());return t.filter(n=>n.rtpMap&&n.rtpMap.encodingName==="rtx"&&n.fmtp&&n.fmtp.parameters.apt&&pe(r).call(r,n.fmtp&&n.fmtp.parameters.apt))}async function _E(e,t,r){let n=t.toString(),i=rZ(n,"offer","remote","exchangeSDP");await e.setRemoteDescription({type:"offer",sdp:n});let o=await e.createAnswer();if(!o.sdp)throw new Error("cannot get answer sdp");let a=o.sdp;a=tZ(a,r||{}),i==null||i(a||""),await e.setLocalDescription({type:"answer",sdp:a})}function tZ(e,t,r){let n=wn.parse(e),{useXR:i}=t;return n.mediaDescriptions.forEach(o=>{var a;o.attributes.mid&&(Array.isArray(r)&&!pe(r).call(r,o.attributes.mid)||(o.media.mediaType==="audio"&&Lf(o),i&&pe(a=["audio","video"]).call(a,o.media.mediaType)&&o.attributes.payloads.forEach(s=>{s.rtcpFeedbacks.findIndex(c=>c.type==="rrtr")===-1&&s.rtcpFeedbacks.push({type:"rrtr"})})))}),wn.print(n)}function rZ(e,t,r,n){if(D("SDP_LOGGING"))return b.upload("exchanging ".concat(r," ").concat(t," SDP during P2PConnection.").concat(n,`
`),e),t==="offer"?i=>{rZ(i,"answer",r==="local"?"remote":"local",n)}:void 0}function Xs(e,t){return typeof D(e)===t?D(e):void 0}function wB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wB(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var DI=new Map,RMe=class extends fr{get state(){return this._state}set state(e){if(e===this._state)return;let t=this._state;this._state=e,e==="DISCONNECTED"&&this._disconnectedReason?this.emit(An.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(An.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){b.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),C(this,"store",void 0),C(this,"joinInfo",void 0),C(this,"key",void 0),C(this,"ntpOffset",0),C(this,"signal",void 0),C(this,"role",void 0),C(this,"inChannelInfo",{joinAt:null,duration:0}),C(this,"spec",void 0),C(this,"_state","DISCONNECTED"),C(this,"_statsCollector",void 0),C(this,"_disconnectedReason",void 0),C(this,"isSignalRecover",!1),C(this,"hasChangeBGPAddress",!1),C(this,"trafficStatsInterval",void 0),C(this,"networkQualityInterval",void 0),C(this,"_joinGatewayStartTime",0),C(this,"_signalTimeout",!1),C(this,"_clientRoleOptions",void 0),C(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?new yB(kl(kl({},t),{},{retryConfig:t.websocketRetryConfig}),e):new X2e(kl(kl({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,r){this.store.joinGatewayStart(),e.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);let n=Date.now(),i=DI.get(e.cname);if(i||(i=new Map,DI.set(e.cname,i)),this._isProactiveJoin=!0,i.has(e.uid)){let c=new G(I.UID_CONFLICT);throw be.joinGateway(e.sid,{lts:n,succ:!1,ec:c.code,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:"0",preload:e.preload}),this._isProactiveJoin=!1,c}i.set(e.uid,!0),this.joinInfo=e,this.key=t;let o=0;this.joinGatewayStartTime=n;let a=e.proxyServer;try{b.debug("[".concat(this.store.clientId,"] use websocket join uid ").concat(o));let c=e.gatewayAddrs.map(l=>{let{address:d}=l,[u,p]=d.split(":"),f={host:u,port:p};return e.proxyServer&&(f.proxy=e.proxyServer),f});o=(await this.signal.init(c,r)).uid,b.debug("[".concat(this.store.clientId,"] websocket join uid ").concat(o," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(c){var s;throw b.error("[".concat(this.store.clientId,"] User join failed"),c.toString()),be.joinGateway(e.sid,{lts:n,succ:!1,ec:((s=c.data)===null||s===void 0?void 0:s.desc)||c.code,errorMsg:c.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!a,signalChannel:"0",preload:e.preload}),this._isProactiveJoin=!1,i.delete(e.uid),this.signal.close(),c}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),b.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(c=>{b.warning("[".concat(this.store.clientId,"] get traffic stats error"),c.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(An.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(An.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(An.NETWORK_QUALITY,{uplinkNetworkQuality:mF(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:mF(this._statsCollector.trafficStats.B_dnq)}):this.emit(An.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),o}async leave(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){t!==Mt.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==Kt.CONNECTED||await function(r,n){return n===1/0?r:de.race([r,KDe(n)])}(this.signal.request(Me.LEAVE,void 0,!0),3e3)}catch(r){b.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),r)}this.signal.close(t),t!==Mt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));let n={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:D("PUB_EXTEND"),twcc:!!D("PUBLISH_TWCC"),rtx:!!D("USE_PUB_RTX")};try{return(await this.signal.request(Me.PUBLISH,n,!0))._message}catch(i){if(r&&i.data&&i.data.code===Ae.ERR_PUBLISH_REQUEST_INVALID)return b.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),i.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw i}}async publishDataChannel(e,t,r){var n;if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));let i={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:(n=t.maxRetransmits)!==null&&n!==void 0?n:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(Me.PUBLISH_DATASTREAM,i,!0)}catch(o){if(r&&o.data&&o.data.code===Ae.ERR_PUBLISH_REQUEST_INVALID)return b.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),o.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw o}}async unpublish(e,t){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Me.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(r){b.warning("[".concat(this.store.clientId,"] unpublish warning: "),r)}}async unpublishDataChannel(e){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await de.all(e.map(t=>this.signal.request(Me.UNPUBLISH_DATASTREAM,{channel_id:t},!0)))}catch(t){b.warning("unpublish datachannels warning: ",t)}}async presubscribe(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));let n={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!D("SUBSCRIBE_TWCC"),rtx:!!D("USE_SUB_RTX")||void 0,extend:D("SUB_EXTEND"),svc:Array.isArray(D("SVC"))&&D("SVC").length!==0?D("SVC"):void 0};try{return await this.signal.request(Me.PRE_SUBSCRIBE,n,!0)}catch(i){if(r&&i.data&&i.data.code===Ae.ERR_SUBSCRIBE_REQUEST_INVALID)return b.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),i.toString()),this.presubscribe(e,t,!1);throw i}}async subscribe(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));let n={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!D("SUBSCRIBE_TWCC"),rtx:!!D("USE_SUB_RTX"),extend:D("SUB_EXTEND"),ssrcId:t.ssrcId,svc:Array.isArray(D("SVC"))&&D("SVC").length!==0?D("SVC"):void 0};try{return(await this.signal.request(Me.SUBSCRIBE,n,!0))._message}catch(i){if(r&&i.data&&i.data.code===Ae.ERR_SUBSCRIBE_REQUEST_INVALID)return b.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),i.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw i}}async subscribeDataChannel(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));let n={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(Me.SUBSCRIBE_DATASTREAM,n,!0)}catch(i){if(r&&i.data&&i.data.code===Ae.ERR_SUBSCRIBE_REQUEST_INVALID)return b.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),i.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw i}}async subscribeAll(e,t){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));let r={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!D("USE_SUB_RTX"),twcc:!!D("SUBSCRIBE_TWCC"),svc:Array.isArray(D("SVC"))&&D("SVC").length!==0?D("SVC"):void 0};try{return await this.signal.request(Me.SUBSCRIBE_STREAMS,r,!0)}catch(n){if(t&&n.data&&n.data.code===Ae.ERR_SUBSCRIBE_REQUEST_INVALID)return b.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),n.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw n}}async setVideoProfile(e){let t=function(r){if(!(r.bitrateMax&&r.bitrateMin&&r.frameRate&&r.height&&r.width))return;let n=r.frameRate,i=r.width,o=r.height,a=!0;return typeof n!="number"&&(n=n.exact||n.ideal||n.max||n.min||0,n||(a=!1)),typeof i!="number"&&(i=i.exact||i.ideal||i.max||i.min||0,i||(a=!1)),typeof o!="number"&&(o=o.exact||o.ideal||o.max||o.min||0,n||(a=!1)),a?{stream_type:0,width:i,height:o,fps:n,start_bps:1e3*r.bitrateMax,min_bps:1e3*r.bitrateMin,target_bps:1e3*r.bitrateMax}:void 0}(e);if(t)return this.signal.request(Me.SET_VIDEO_PROFILE,t);b.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(Me.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(r){b.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),r)}}async unsubscribeDataChannel(e,t){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await de.all(e.map(r=>this.signal.request(Me.UNSUBSCRIBE_DATASTREAM,{stream_id:r,uid:t},!0)))}catch(r){b.warning("unsubscribeDataChannel warning: ",r)}}async massUnsubscribe(e){try{await this.signal.request(Me.UNSUBSCRIBE_STREAMS,e,!0)}catch(t){b.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),t)}}async reconnectPC(e){let{iceParameters:t,dtlsParameters:r,rtpCapabilities:n}=e;return{gatewayEstablishParams:await this.signal.request(Me.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:r,rtpCapabilities:n}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(Me.GATEWAY_INFO)}async renewToken(e){await this.signal.request(Me.RENEW_TOKEN,e),this.key=e.token}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),this.state!=="CONNECTED")return void(this.role=e);let r,n=0;e==="audience"?this._clientRoleOptions&&this._clientRoleOptions.delay?(r=this._clientRoleOptions.delay,n=1):n=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:n=0,await this.signal.request(Me.SET_CLIENT_ROLE,{role:e,level:n,delay:r,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(Me.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(Me.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(Me.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(Me.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(Me.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,r){if(this.signal instanceof yB)return this.signal.sendExtensionMessage(e,t,r)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),kl({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Me.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){let e=DI.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;let e=function(t){let r;return r=t.startsWith("dc")?t.match(/(dc\:\/\/)?([^:]+):(\d+)/):t.match(/(wss\:\/\/)?([^:]+):(\d+)/),r?{username:Nn.username,password:Nn.password,turnServerURL:r[2],tcpport:parseInt(r[3])+30,udpport:parseInt(r[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(kl(kl({},Nn),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;let e=await this.signal.request(Me.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),e.ntp_offset!=null&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach(t=>{let r=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(n=>n.peer_uid===t.peer_uid);r&&r.B_st!==t.B_st&&aT(()=>{this.emit(An.STREAM_TYPE_CHANGE,t.peer_uid,t.B_st)})}),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new G(I.UNEXPECTED_ERROR,"can not generate join message, no join info");let t=Object.assign({},this.joinInfo.apResponse),r=D("REPORT_APP_SCENARIO");if(typeof r!="string")try{r=JSON.stringify(r)}catch{r=void 0}r&&r.length>128&&(r=void 0);let n=!(_r()||zJ(87)||FF())&&typeof D("ENABLE_PRE_SUB")=="boolean"&&D("ENABLE_PRE_SUB"),i=!FF()&&Xs("ENABLE_PREALLOC_PC","boolean"),o=kl({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:aa,browser:navigator.userAgent,process_id:D("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:D("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:r,attributes:{userAttributes:{enablePublishedUserList:D("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:D("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof D("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?D("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof D("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?D("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof D("ENABLE_USER_LICENSE_CHECK")=="boolean"?D("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:D("USE_PUB_RTX")===!0||D("USE_SUB_RTX")===!0||void 0,disableFEC:D("DISABLE_FEC"),enableNTPReport:!!D("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!D("ENABLE_INSTANT_VIDEO")||void 0,enableFulllinkAvSync:!!D("ENABLE_FULL_LINK_AV_SYNC")||void 0,enableDataStream2:Xs("ENABLE_DATASTREAM_2","boolean"),enableAutFeedback:!!D("ENABLE_AUT_FEEDBACK")||void 0,rtm2Flag:typeof this.joinInfo.rtmFlag=="number"?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!D("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:Xs("USE_XR","boolean"),enableLossbasedBwe:Xs("ENABLE_LOSSBASED_BWE","boolean"),enableAutCC:!!D("ENABLE_AUT_CC")||void 0,enableCCFallback:Xs("ENABLE_CC_FALLBACK","boolean"),enablePreallocPC:i,preSubNum:n?Xs("PRE_SUB_NUM","number"):void 0,enablePubTWCC:Xs("PUBLISH_TWCC","boolean"),enableSubTWCC:Xs("SUBSCRIBE_TWCC","boolean"),enablePubRTX:Xs("USE_PUB_RTX","boolean"),enableSubRTX:Xs("USE_SUB_RTX","boolean"),enableSubSVC:D("ENABLE_SVC")?D("ENABLE_SVC_DEFAULT_CODECS"):Array.isArray(D("SVC"))&&D("SVC").length!==0?D("SVC"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(o.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(o.aes_mode=this.joinInfo.aesmode,D("ENCRYPT_AES")?(o.aes_secret=this.joinInfo.aespassword,o.aes_encrypt=!0):o.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(o.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(o.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),this.joinInfo.defaultVideoStream!==void 0&&(o.default_video_stream=this.joinInfo.defaultVideoStream),o}getRejoinMessage(){if(!this.joinInfo)throw new G(I.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(je.WS_RECONNECT_WAITTING_FINISH,e=>{var t;pe(t=["tryNext","recover"]).call(t,e)&&this.joinInfo&&be.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(je.WS_RECONNECT_CREATE_CONNECTION,e=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(je.WS_RECONNECTING,e=>{this.joinInfo&&be.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||Pn.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",be.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:this.spec.mode==="live"?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:this.role==="audience"?2:1,buildFormat:2}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(je.WS_CLOSED,e=>{let t;switch(e){case Mt.LEAVE:t=Pn.LEAVE;break;case Mt.UID_BANNED:case Mt.IP_BANNED:case Mt.CHANNEL_BANNED:case Mt.SERVER_ERROR:t=Pn.SERVER_ERROR;break;case Mt.FALLBACK:t=Pn.FALLBACK;break;case Mt.LICENSE_MISSING:case Mt.LICENSE_EXPIRED:case Mt.LICENSE_MINUTES_EXCEEDED:case Mt.LICENSE_PERIOD_INVALID:case Mt.LICENSE_MULTIPLE_SDK_SERVICE:case Mt.LICENSE_ILLEGAL:case Mt.TOKEN_EXPIRE:t=e;break;default:t=Pn.NETWORK_ERROR}b.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(t||"undefined -> "+Pn.NETWORK_ERROR)),this.joinInfo&&be.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===Mt.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==Mt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(je.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(b.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),be.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){let e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void b.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));Ft("EVENT_REPORT_DOMAIN",e[1]),Ft("EVENT_REPORT_BACKUP_DOMAIN",e[1]),Ft("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}}),this.signal.on(lt.ON_UPLINK_STATS,e=>{this._statsCollector.updateUplinkStats(e)}),this.signal.on(je.REQUEST_RECOVER,(e,t,r)=>{if(!this.joinInfo)return r(new G(I.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Ln(this,An.REQUEST_NEW_GATEWAY_LIST).then(t).catch(r)}),this.signal.on(je.REQUEST_JOIN_INFO,async e=>{var t;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));let{iceParameters:r,dtlsParameters:n,rtpCapabilities:i}=await Ln(this,An.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(t=this.joinInfo)===null||t===void 0?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:r,dtlsParameters:n,rtpCapabilities:i,version:"2"}}))}),this.signal.on(je.REQUEST_REJOIN_INFO,e=>{e(this.getRejoinMessage())}),this.signal.on(je.REPORT_JOIN_GATEWAY,(e,t)=>{if(!this.joinInfo)return;let r,n="";var i;e instanceof G?(r=((i=e.data)===null||i===void 0?void 0:i.desc)||e.code,n=e.message):r=e,be.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:r,errorMsg:n,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1}),this.signal.on(je.IS_P2P_DISCONNECTED,e=>{e(H0(this,An.IS_P2P_DISCONNECTED))}),this.signal.on(je.DISCONNECT_P2P,()=>{this.emit(An.DISCONNECT_P2P)}),this.signal.on(je.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(je.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(je.JOIN_RESPONSE,e=>{let t=this.getCurrentGatewayAddress();this.emit(An.JOIN_RESPONSE,e,t)}),this.signal.on(je.PRE_CONNECT_PC,async()=>{if(this.joinInfo){this.updateTurnConfigFromSignal();let e=this.getCurrentGatewayAddress(),t=D("FINGERPRINT")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(e&&t){let r=JQ(e);this.emit(An.PRE_CONNECT_PC,{candidates:r,fingerprint:t})}}})}async tryUnsubBeforeResub(e,t){try{await this.signal.request(Me.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(r){throw b.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),r),r}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(Me.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(r){throw b.warning("unsubscribe datachannel warning",r),r}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(Me.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(r){throw b.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),r),r}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(Me.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(r){throw b.warning("unpublish datastream warning: ",r),r}}async tryMassUnsubBeforeResub(e){let t={users:e.map(r=>({stream_id:r.stream_id,stream_type:r.stream_type}))};try{await this.signal.request(Me.UNSUBSCRIBE_STREAMS,t,!0)}catch(r){throw b.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),r),r}}async muteLocal(e,t){let r={action:e.find(n=>n.stream_type===Nt.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(Me.CONTROL,r,!0,!0)}catch(n){throw b.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),n),n}}async unmuteLocal(e,t){let r={action:e.find(n=>n.stream_type===Nt.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(Me.CONTROL,r,!0,!0)}catch(n){throw b.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),n),n}}async muteRemote(e,t){let r={action:e===Se.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(Me.CONTROL,r,!0,!0)}catch(n){throw b.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),n),n}}async unmuteRemote(e,t){let r={action:e===Se.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(Me.CONTROL,r,!0,!0)}catch(n){throw b.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),n),n}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){let t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(Me.RESTART_ICE,t,!0)}catch(r){throw b.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),r),r}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,Pn.P2P_FAILED)}getCurrentGatewayAddress(){var e,t;if(!D("GATEWAY_WSS_ADDRESS"))return D("USE_CANDIDATE_FROM_AP_DETAIL")&&(e=this.joinInfo)!==null&&e!==void 0&&e.apGatewayAddress?(b.debug("[".concat(this.store.clientId,"] use candidate from ap detail, ").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):(t=this.joinInfo)!==null&&t!==void 0&&t.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(Me.SET_PARAMETER,{enablePublishAudioFilter:e})}},bE=0,LI=0;function Vs(e,t,r,n){return new de((i,o)=>{t.timeout=t.timeout||D("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!r?(t.data=JSON.stringify(t.data),bE+=lc(t.data)):r&&(t.data.size?bE+=t.data.size:t.data instanceof FormData?bE+=nQ(t.data):bE+=lc(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,Ui.request(t).then(a=>{typeof a.data=="string"?LI+=lc(a.data):a.data instanceof ArrayBuffer||a.data instanceof Uint8Array?LI+=a.data.byteLength:LI+=lc(JSON.stringify(a.data)),n&&i({data:a.data,headers:a.headers}),i(a.data)}).catch(a=>{Ui.isCancel(a)?o(new G(I.OPERATION_ABORTED,"cancel token canceled")):a.code==="ECONNABORTED"?o(new G(I.NETWORK_TIMEOUT,a.message)):a.response?o(new G(I.NETWORK_RESPONSE_ERROR,a.response.status)):o(new G(I.NETWORK_ERROR,a.message))})})}(function(){var e;function t(A){var N=0;return function(){return N<A.length?{done:!1,value:A[N++]}:{done:!0}}}var r=typeof Object.defineProperties=="function"?Object.defineProperty:function(A,N,F){return A==Array.prototype||A==Object.prototype||(A[N]=F.value),A},n,i=function(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yp=="object"&&Yp];for(var N=0;N<A.length;++N){var F=A[N];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}(this);function o(A,N){if(N)e:{var F=i;A=A.split(".");for(var P=0;P<A.length-1;P++){var _=A[P];if(!(_ in F))break e;F=F[_]}(N=N(P=F[A=A[A.length-1]]))!=P&&N!=null&&r(F,A,{configurable:!0,writable:!0,value:N})}}function a(A){return(A={next:A})[Symbol.iterator]=function(){return this},A}function s(A){var N=typeof Symbol<"u"&&Symbol.iterator&&A[Symbol.iterator];return N?N.call(A):{next:t(A)}}if(o("Symbol",function(A){function N(_,R){this.A=_,r(this,"description",{configurable:!0,writable:!0,value:R})}if(A)return A;N.prototype.toString=function(){return this.A};var F="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",P=0;return function _(R){if(this instanceof _)throw new TypeError("Symbol is not a constructor");return new N(F+(R||"")+"_"+P++,R)}}),o("Symbol.iterator",function(A){if(A)return A;A=Symbol("Symbol.iterator");for(var N="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),F=0;F<N.length;F++){var P=i[N[F]];typeof P=="function"&&typeof P.prototype[A]!="function"&&r(P.prototype,A,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return A}),typeof Object.setPrototypeOf=="function")n=Object.setPrototypeOf;else{var c;e:{var l={};try{l.__proto__={a:!0},c=l.a;break e}catch{}c=!1}n=c?function(A,N){if(A.__proto__=N,A.__proto__!==N)throw new TypeError(A+" is not extensible");return A}:null}var d=n;function u(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(A){if(A.m)throw new TypeError("Generator is already running");A.m=!0}function f(A,N){return A.h=3,{value:N}}function m(A){this.g=new u,this.G=A}function g(A,N,F,P){try{var _=N.call(A.g.j,F);if(!(_ instanceof Object))throw new TypeError("Iterator result "+_+" is not an object");if(!_.done)return A.g.m=!1,_;var R=_.value}catch(k){return A.g.j=null,A.g.s(k),y(A)}return A.g.j=null,P.call(A.g,R),y(A)}function y(A){for(;A.g.h;)try{var N=A.G(A.g);if(N)return A.g.m=!1,{value:N.value,done:!1}}catch(F){A.g.v=void 0,A.g.s(F)}if(A.g.m=!1,A.g.l){if(N=A.g.l,A.g.l=null,N.F)throw N.D;return{value:N.return,done:!0}}return{value:void 0,done:!0}}function v(A){this.next=function(N){return A.o(N)},this.throw=function(N){return A.s(N)},this.return=function(N){return function(F,P){p(F.g);var _=F.g.j;return _?g(F,"return"in _?_.return:function(R){return{value:R,done:!0}},P,F.g.return):(F.g.return(P),y(F))}(A,N)},this[Symbol.iterator]=function(){return this}}function E(A,N){return N=new v(new m(N)),d&&A.prototype&&d(N,A.prototype),N}if(u.prototype.o=function(A){this.v=A},u.prototype.s=function(A){this.l={D:A,F:!0},this.h=this.C||this.u},u.prototype.return=function(A){this.l={return:A},this.h=this.u},m.prototype.o=function(A){return p(this.g),this.g.j?g(this,this.g.j.next,A,this.g.o):(this.g.o(A),y(this))},m.prototype.s=function(A){return p(this.g),this.g.j?g(this,this.g.j.throw,A,this.g.o):(this.g.s(A),y(this))},o("Array.prototype.entries",function(A){return A||function(){return function(N,F){N instanceof String&&(N+="");var P=0,_=!1,R={next:function(){if(!_&&P<N.length){var k=P++;return{value:F(k,N[k]),done:!1}}return _=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}(this,function(N,F){return[N,F]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var w=function(A,N){for(var F=0;F<A.length;F++)N(A[F])},S=function(A){return A.replace(/\r?\n|\r/g,`\r
`)},x=function(A,N,F){return N instanceof Blob?(F=F!==void 0?F+"":typeof N.name=="string"?N.name:"blob",N.name===F&&Object.prototype.toString.call(N)!=="[object Blob]"||(N=new File([N],F)),[String(A),N]):[String(A),String(N)]},O=function(A,N){if(A.length<N)throw new TypeError(N+" argument required, but only "+A.length+" present.")},L=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,j=L.FormData,W=L.XMLHttpRequest&&L.XMLHttpRequest.prototype.send,V=L.Request&&L.fetch,Y=L.navigator&&L.navigator.sendBeacon,Z=L.Element&&L.Element.prototype,te=L.Symbol&&Symbol.toStringTag;te&&(Blob.prototype[te]||(Blob.prototype[te]="Blob"),"File"in L&&!File.prototype[te]&&(File.prototype[te]="File"));try{new File([],"")}catch{L.File=function(A,N,F){return A=new Blob(A,F||{}),Object.defineProperties(A,{name:{value:N},lastModified:{value:+(F&&F.lastModified!==void 0?new Date(F.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),te&&Object.defineProperty(A,te,{value:"File"}),A}}var H=function(A){return A.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},$=function(A){this.i=[];var N=this;A&&w(A.elements,function(F){if(F.name&&!F.disabled&&F.type!=="submit"&&F.type!=="button"&&!F.matches("form fieldset[disabled] *"))if(F.type==="file"){var P=F.files&&F.files.length?F.files:[new File([],"",{type:"application/octet-stream"})];w(P,function(_){N.append(F.name,_)})}else F.type==="select-multiple"||F.type==="select-one"?w(F.options,function(_){!_.disabled&&_.selected&&N.append(F.name,_.value)}):F.type==="checkbox"||F.type==="radio"?F.checked&&N.append(F.name,F.value):(P=F.type==="textarea"?S(F.value):F.value,N.append(F.name,P))})};if((e=$.prototype).append=function(A,N,F){O(arguments,2),this.i.push(x(A,N,F))},e.delete=function(A){O(arguments,1);var N=[];A=String(A),w(this.i,function(F){F[0]!==A&&N.push(F)}),this.i=N},e.entries=function A(){var N,F=this;return E(A,function(P){if(P.h==1&&(N=0),P.h!=3)return N<F.i.length?P=f(P,F.i[N]):(P.h=0,P=void 0),P;N++,P.h=2})},e.forEach=function(A,N){O(arguments,1);for(var F=s(this),P=F.next();!P.done;P=F.next()){var _=s(P.value);P=_.next().value,_=_.next().value,A.call(N,_,P,this)}},e.get=function(A){O(arguments,1);var N=this.i;A=String(A);for(var F=0;F<N.length;F++)if(N[F][0]===A)return N[F][1];return null},e.getAll=function(A){O(arguments,1);var N=[];return A=String(A),w(this.i,function(F){F[0]===A&&N.push(F[1])}),N},e.has=function(A){O(arguments,1),A=String(A);for(var N=0;N<this.i.length;N++)if(this.i[N][0]===A)return!0;return!1},e.keys=function A(){var N,F,P,_,R=this;return E(A,function(k){if(k.h==1&&(N=s(R),F=N.next()),k.h!=3)return F.done?void(k.h=0):(P=F.value,_=s(P),f(k,_.next().value));F=N.next(),k.h=2})},e.set=function(A,N,F){O(arguments,2),A=String(A);var P=[],_=x(A,N,F),R=!0;w(this.i,function(k){k[0]===A?R&&(R=!P.push(_)):P.push(k)}),R&&P.push(_),this.i=P},e.values=function A(){var N,F,P,_,R=this;return E(A,function(k){if(k.h==1&&(N=s(R),F=N.next()),k.h!=3)return F.done?void(k.h=0):(P=F.value,(_=s(P)).next(),f(k,_.next().value));F=N.next(),k.h=2})},$.prototype._asNative=function(){for(var A=new j,N=s(this),F=N.next();!F.done;F=N.next()){var P=s(F.value);F=P.next().value,P=P.next().value,A.append(F,P)}return A},$.prototype._blob=function(){var A="----formdata-polyfill-"+Math.random(),N=[],F="--"+A+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(P,_){return typeof P=="string"?N.push(F+H(S(_))+`"\r
\r
`+S(P)+`\r
`):N.push(F+H(S(_))+'"; filename="'+H(P.name)+`"\r
Content-Type: `+(P.type||"application/octet-stream")+`\r
\r
`,P,`\r
`)}),N.push("--"+A+"--"),new Blob(N,{type:"multipart/form-data; boundary="+A})},$.prototype[Symbol.iterator]=function(){return this.entries()},$.prototype.toString=function(){return"[object FormData]"},Z&&!Z.matches&&(Z.matches=Z.matchesSelector||Z.mozMatchesSelector||Z.msMatchesSelector||Z.oMatchesSelector||Z.webkitMatchesSelector||function(A){for(var N=(A=(this.document||this.ownerDocument).querySelectorAll(A)).length;0<=--N&&A.item(N)!==this;);return-1<N}),te&&($.prototype[te]="FormData"),W){var K=L.XMLHttpRequest.prototype.setRequestHeader;L.XMLHttpRequest.prototype.setRequestHeader=function(A,N){K.call(this,A,N),A.toLowerCase()==="content-type"&&(this.B=!0)},L.XMLHttpRequest.prototype.send=function(A){A instanceof $?(A=A._blob(),this.B||this.setRequestHeader("Content-Type",A.type),W.call(this,A)):W.call(this,A)}}V&&(L.fetch=function(A,N){return N&&N.body&&N.body instanceof $&&(N.body=N.body._blob()),V.call(this,A,N)}),Y&&(L.navigator.sendBeacon=function(A,N){return N instanceof $&&(N=N._asNative()),Y.call(this,A,N)}),L.FormData=$}})();var Y0=()=>{let e=D("AREAS");return e.length===0&&e.push(Tt.GLOBAL),Ps(e).call(e,(t,r,n)=>{let i=nZ(r);return i?n===0?i:"".concat(t,",").concat(i):t},"")},nZ=e=>e===Tt.OVERSEA?"".concat(Vn.ASIA,",").concat(Vn.EUROPE,",").concat(Vn.AFRICA,",").concat(Vn.NORTH_AMERICA,",").concat(Vn.SOUTH_AMERICA,",").concat(Vn.OCEANIA):Vn[e],IMe=e=>{let t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map(r=>{let n=uT[r],i=Object.keys(n);i&&i.map(o=>{o!=="CODE"&&(t[o]=t[o].concat(n[o]))})}),t},T_={GLOBAL:{ASIA:[Tt.CHINA,Tt.JAPAN,Tt.INDIA,Tt.KOREA,Tt.HKMC],EUROPE:[],NORTH_AMERICA:[Tt.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},wE=Object.keys(T_[Tt.GLOBAL]),MI=[Tt.CHINA,Tt.NORTH_AMERICA,Tt.EUROPE,Tt.ASIA,Tt.JAPAN,Tt.INDIA,Tt.OCEANIA,Tt.SOUTH_AMERICA,Tt.AFRICA,Tt.KOREA,Tt.HKMC,Tt.US],xMe=function(e,t){let r=[];if(pe(e).call(e,Tt.GLOBAL)){let o=[Tt.GLOBAL,Tt.OVERSEA],a=Object.keys(uT);if(t===Tt.GLOBAL)throw new G(I.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===Tt.CHINA)r=[Tt.OVERSEA];else if(i=t,pe(wE).call(wE,i)){let s=(n=t,T_[Tt.GLOBAL][n]||[]),c=[...o,t,...s];r=a.filter(l=>!pe(c).call(c,l))}else if(function(s){let c=!1;return wE.forEach(l=>{var d;pe(d=T_[Tt.GLOBAL][l]).call(d,s)&&(c=!0)}),c}(t)){let s=function(l){let d;return wE.forEach(u=>{var p;pe(p=T_[Tt.GLOBAL][u]).call(p,l)&&(d=u)}),d}(t),c=[...o,s,t];r=a.filter(l=>!pe(c).call(c,l))}else r=e;r=function(s){let c=[];return MI.forEach(l=>{pe(s).call(s,l)&&c.push(l)}),c.concat(s.filter(l=>!pe(MI).call(MI,l)))}(r)}else r=e;var n,i;return r};function SB(e){var t,r;if(!e&&pe(t=D("AREAS")).call(t,Tt.EXTENSIONS))return b.debug("update area from ap : reset"),void r2(n2e,!0);if(!pe(r=D("AREAS")).call(r,Tt.GLOBAL)||!e)return;let n=uT.EXTENSIONS;n&&(n={CODE:nZ(Tt.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},b.debug("update area from ap success: ".concat(e,",config is "),n),Ft("AREAS",[Tt.EXTENSIONS],!0),Object.keys(n).map(i=>{i==="LOG_UPLOAD_SERVER"||i==="EVENT_REPORT_DOMAIN"||i==="EVENT_REPORT_BACKUP_DOMAIN"||i==="PROXY_SERVER_TYPE3"?Ft(i,n[i][0]):Ft(i,n[i])}))}function r2(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=be.reportApiInvoke(null,{name:zr.SET_AREA,options:e,tag:Er.TRACER});try{let n=[];if(typeof e=="string"&&(n=[e]),Array.isArray(e)&&(e.forEach(o=>{if(!pe(cF).call(cF,o))throw new G(I.INVALID_PARAMS,"invalid area code")}),n=e),Object.prototype.toString.call(e)==="[object Object]"){let{areaCode:o,excludedArea:a}=e;if(!o)throw new G(I.INVALID_PARAMS,"area code is needed");let s=o;typeof o=="string"&&(s=[o]),n=a?xMe(s,a):s}if(!t){if(nd.AREAS){let o=new G(I.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return r.onError(o),void b.warning("setArea is prohibited because of config-distribute")}if(pe(n).call(n,Tt.GLOBAL)&&D("AREAS")===Tt.EXTENSIONS){let o=new G(I.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return r.onError(o),void b.warning("setArea is prohibited because of ap extensions")}}Ft("AREAS",n,t);let i=IMe(n);Object.keys(i).map(o=>{o==="LOG_UPLOAD_SERVER"||o==="EVENT_REPORT_DOMAIN"||o==="EVENT_REPORT_BACKUP_DOMAIN"||o==="PROXY_SERVER_TYPE3"?Ft(o,i[o][0]):Ft(o,i[o])}),b.debug("set area success:",n.join(","))}catch(n){throw r.onError(n),n}r.onSuccess()}function TB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TB(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var jI=1;function AMe(e,t,r,n,i){jI+=1;let o={sid:r.sid,command:"convergeAllocateEdge",uid:"666",appId:r.appId,ts:Math.floor(Date.now()/1e3),seq:jI,requestId:jI,version:aa,cname:r.cname},a={service_name:t,json_body:JSON.stringify(o)},s,c,l=e[0];return Fs(async()=>{s=Date.now();let d=await Vs(l,{data:a,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Date.now()-s,d.code!==0){let f=new G(I.UNEXPECTED_RESPONSE,"live streaming ap error, code"+d.code,{retry:!0,responseTime:c});throw b.error(f.toString()),f}let u=JSON.parse(d.json_body);if(u.code!==200){let f=new G(I.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(u.code,", reason: ").concat(u.reason),{code:u.code,responseTime:c});throw b.error(f.toString()),f}if(!u.servers||u.servers.length===0){let f=new G(I.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:u.code,responseTime:c});throw b.error(f.toString()),f}let p=function(f,m){return{addressList:f.servers.map(g=>"wss://".concat(g.address.replace(/\./g,"-"),".").concat(D("WORKER_DOMAIN"),":").concat(g.wss,"?serviceName=").concat(encodeURIComponent(m))),workerToken:f.workerToken,vid:f.vid}}(u,t);return D("LIVE_STREAMING_ADDRESS")&&(p.addressList=D("LIVE_STREAMING_ADDRESS")instanceof Array?D("LIVE_STREAMING_ADDRESS"):[D("LIVE_STREAMING_ADDRESS")]),eO(eO({},p),{},{responseTime:c})},(d,u)=>(be.apworkerEvent(r.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(d.addressList),firstSuccess:u===0,responseTime:c,serverIp:e[u%e.length]}),!1),(d,u)=>(be.apworkerEvent(r.sid,{success:!1,sc:d.data&&d.data.code||200,serviceName:t,responseTime:c,serverIp:e[u%e.length]}),!!(d.code!==I.OPERATION_ABORTED&&d.code!==I.UNEXPECTED_RESPONSE||d.data&&d.data.retry)&&(l=e[(u+1)%e.length],!0)),i)}var UI=1;function CB(e,t,r,n){let{url:i,areaCode:o}=e,{clientId:a,sid:s}=t,c=Date.now(),l,[d,u]=i2(t,o,[Dr.CHOOSE_SERVER]),p=Lr.networkState;return Fs(async()=>{p&&Lr.networkState===co.OFFLINE&&Lr.onlineWaiter&&await de.race([Lr.onlineWaiter,Tn(n&&n.maxRetryTimeout||Vr.maxRetryTimeout)]),p=Lr.networkState;let{data:f,headers:m}=await Vs(i,{data:d,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l=m.http3==="1"?1:-1,be.reportResourceTiming(i,s),iZ(f,i,t,c,[Dr.CHOOSE_SERVER],l);let g=K0(f,Dr.CHOOSE_SERVER);return n2(g),GD(g,i)},f=>(f&&be.joinChooseServer(s,{lts:c,succ:!0,csAddr:i,opid:u,serverList:f.gatewayAddrs.map(m=>m.address),ec:null,cid:f.cid.toString(),uid:f.uid.toString(),csIp:f.csIp,unilbsServerIds:[Dr.CHOOSE_SERVER].toString(),isHttp3:l}),!1),f=>f.code!==I.OPERATION_ABORTED&&(f.code===I.CAN_NOT_GET_GATEWAY_SERVER?f.data.retry:(be.joinChooseServer(s,{lts:c,succ:!1,csAddr:i,serverList:null,opid:u,ec:f.code,csIp:f.data&&f.data.csIp,unilbsServerIds:[Dr.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:p}),isHttp3:l}),b.warning("[".concat(a||"sid-".concat(s.slice(0,6)),"] Choose server network error, retry"),f),!0)),n)}function RB(e,t,r,n){let i,{url:o,areaCode:a,serviceIds:s}=e,c=Date.now(),[l,d]=i2(t,a,s),u;return Fs(async()=>{u&&Lr.networkState===co.OFFLINE&&Lr.onlineWaiter&&await de.race([Lr.onlineWaiter,Tn(n&&n.maxRetryTimeout||Vr.maxRetryTimeout)]),u=Lr.networkState;let{data:p,headers:f}=await Vs(o,{data:l,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);i=f.http3==="1"?1:-1,be.reportResourceTiming(o,t.sid),iZ(p,o,t,c,s,i);let m=K0(p,Dr.CHOOSE_SERVER),g=K0(p,t.cloudProxyServer==="proxy5"?Dr.CLOUD_PROXY_5:t.cloudProxyServer==="proxy3"||t.cloudProxyServer==="proxy4"?Dr.CLOUD_PROXY:Dr.CLOUD_PROXY_FALLBACK);return n2(m),{gatewayInfo:GD(m,o),proxyInfo:g,url:o}},p=>(p.gatewayInfo&&be.joinChooseServer(t.sid,{lts:c,succ:!0,csAddr:o,serverList:p.gatewayInfo.gatewayAddrs.map(f=>f.address),ec:null,opid:d,cid:p.gatewayInfo.cid.toString(),uid:p.gatewayInfo.uid.toString(),csIp:p.gatewayInfo.csIp,unilbsServerIds:s.toString(),isHttp3:i}),p.proxyInfo&&be.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:o,turnServerAddrList:p.proxyInfo.addresses.map(f=>f.ip).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:s.toString()}),!1),p=>p.code!==I.OPERATION_ABORTED&&(p.code===I.CAN_NOT_GET_GATEWAY_SERVER?p.data.retry:(be.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:p.code,eventType:t.cloudProxyServer,unilbsServerIds:s.toString(),extend:JSON.stringify({networkState:u})}),b.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),p),!0)),n)}var iZ=(e,t,r,n,i,o)=>{let{sid:a,clientId:s,cloudProxyServer:c}=r,l=[],d=u=>{u.flag===4096?be.joinChooseServer(a,{lts:n,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:u.error.message,csIp:u.error.data&&u.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:o}):u.flag!==1048576&&u.flag!==4194304&&u.flag!==4194310||be.joinWebProxyAP(a,{lts:n,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:u.error.code,eventType:c,unilbsServerIds:i.toString()})};if(e.response_body.forEach(u=>{let p=u.buffer.code;if(u.uri===23&&p===0&&!u.buffer.edges_services)if(u.buffer.flag===4194310)b.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),u.buffer.edges_services=[];else{let f={error:new G(I.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:u.buffer.flag};l.push(f),d(f)}if(p!==0){let f=Of(p),m={error:new G(I.CAN_NOT_GET_GATEWAY_SERVER,f.desc,{desc:f.desc,retry:f.retry,csIp:e.detail[502]}),flag:u.buffer.flag};u.buffer.flag===4194310?b.warning(m.error.toString()):l.push(m),d(m)}}),l.length)throw b.warning("[".concat(s||"sid-".concat(a.slice(0,6)),"] multi unilbs ").concat(t," failed, ").concat(l.map(u=>"flag: ".concat(u.flag,", message: ").concat(u.error.message,", retry: ").concat(u.error.data.retry)).join(" | "))),new G(I.CAN_NOT_GET_GATEWAY_SERVER,l.map(u=>"flag: ".concat(u.flag,", message: ").concat(u.error.message)).join(" | "),{retry:!!l.find(u=>u.error.data.retry),csIp:e.detail[502],desc:[...new Set(l.map(u=>{var p;return u==null||(p=u.error)===null||p===void 0||(p=p.data)===null||p===void 0?void 0:p.desc}).filter(u=>!!u))]})},n2=e=>{var t,r,n,i;if(e.addresses&&e.addresses.length===0&&e.code===0)throw new G(I.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(D("AP_AREA")&&((n=e.detail)!==null&&n!==void 0&&n[23]&&typeof((i=e.detail)===null||i===void 0?void 0:i[23])=="string"?SB(e.detail[23].toLowerCase()):SB()),(t=e.detail)!==null&&t!==void 0&&t[19]&&typeof((r=e.detail)===null||r===void 0?void 0:r[19])=="string"){let a=e.detail[19],s=a==null?void 0:a.split(";");for(let c=0;c<s.length;c++){var o;let l=li(o=s[c]).call(o);e.addresses[c]&&s&&(e.addresses[c].fingerprint=l)}}if(D("GATEWAY_ADDRESS")&&D("GATEWAY_ADDRESS").length>0){b.debug("assign gateway address to",D("GATEWAY_ADDRESS"));let a=D("GATEWAY_ADDRESS").map(s=>{var c,l;let d=(c=(l=e.addresses.find(u=>u.ip===s.ip&&u.port===s.port))===null||l===void 0?void 0:l.fingerprint)!==null&&c!==void 0?c:"";return{ip:s.ip,port:s.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:d}});e.addresses=a}},NMe=(e,t)=>{if(e.response_body&&e.response_body.length){let r=e.response_body[0];if(r.buffer.code!==0){let n=Of(r.buffer.code);throw new G(I.UPDATE_TICKET_FAILED,"[".concat(r.buffer.code,"]: ").concat(n.desc),{retry:n.retry})}return r.buffer.ticket}throw b.debug("update ticket request received ap response without response body:",t),new G(I.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},i2=(e,t,r)=>{let n=Math.floor(Math.random()*1e12),i={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:eO({6:e.stringUid,11:t,12:D("USE_NEW_TOKEN")?"1":void 0,22:t},e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:r,uid:e.uid||0}}]};i.request_bodies.forEach(a=>{e.multiIP&&e.multiIP.gateway_ip&&(a.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))});let o=new FormData;return o.append("request",JSON.stringify(i)),[o,n]},OMe=(e,t)=>{let r=Math.floor(Math.random()*1e12),n={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map(o=>({ip:o.ip,port:o.port}))}}]},i=new FormData;return i.append("request",JSON.stringify(n)),[i,r]},rf=0;function gm(e){return de.all(e.map(t=>t.then(r=>{throw r},r=>r))).then(t=>{throw t},t=>t)}var X0=async e=>{let{fragementLength:t,referenceList:r,asyncMapHandler:n,allFailedhandler:i,promisesCollector:o}=e,a=0,s=t,c,l=0,d=async()=>{let u=(()=>{let p=a*s,f=p+s;return r.slice(p,f).map(n)})();o&&o.push(...u);try{c=await gm(u)}catch(p){if(l+=s,a++,!(l>=r.length))return void await d();i(p)}u.forEach(p=>p.cancel())};return await d(),c},oZ=async e=>{let{referenceList:t,asyncMapHandler:r,closeFn:n}=e,i=t.length,o=0,a=async()=>{let s=r(t.shift());try{return await s}catch(c){if(o++,o>=i||n!=null&&n(c))throw c;return a()}};return a()};async function tO(e,t,r,n){return{gatewayInfo:await async function(i,o,a,s){let c=null,l=[],d=async()=>{let p=D("WEBCS_DOMAIN").slice(0,D("AJAX_REQUEST_CONCURRENT")).map(g=>({url:i.proxyServer?"https://".concat(i.proxyServer,"/ap/?url=").concat(g+"/api/v2/transpond/webrtc?v=2"):"https://".concat(g,"/api/v2/transpond/webrtc?v=2"),areaCode:Y0()})),f=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:p.map(g=>g.url)}),m=await X0({fragementLength:D("FRAGEMENT_LENGTH"),referenceList:p,asyncMapHandler:g=>(b.debug("[".concat(i.clientId,"] Connect to choose_server:"),g.url),CB(g,i,o,a)),allFailedhandler:g=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:g},f),g[0]},promisesCollector:l});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},f),m},u=async()=>{if(await Tn(1e3),c!==null)return c;let p=D("WEBCS_DOMAIN_BACKUP_LIST").map(g=>({url:i.proxyServer?"https://".concat(i.proxyServer,"/ap/?url=").concat(g+"/api/v2/transpond/webrtc?v=2"):"https://".concat(g,"/api/v2/transpond/webrtc?v=2"),areaCode:Y0()})),f=s.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:p.map(g=>g.url)}),m=await X0({fragementLength:D("FRAGEMENT_LENGTH"),referenceList:p,asyncMapHandler:g=>(b.debug("[".concat(i.clientId,"] Connect to backup choose_server:"),g.url),CB(g,i,o,a)),allFailedhandler:g=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:g},f),g[0]},promisesCollector:l});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},f),m};try{return c=await gm([d(),u()]),l.length&&l.forEach(p=>p.cancel&&typeof p.cancel=="function"&&p.cancel()),c}catch(p){throw p[0]}}(e,t,r,n)}}async function IB(e,t,r,n,i){let o=e.cloudProxyServer;if(o==="disabled"){if(e.useLocalAccessPoint)return await tO(e,t,r,i);if(D("JOIN_WITH_FALLBACK_MEDIA_PROXY")){let{gatewayInfo:p,proxyInfo:f}=await AB(e,t,r,i);if(e.turnServer&&e.turnServer.mode!=="auto")return{gatewayInfo:p};let m=f.map(g=>({turnServerURL:g.address,tcpport:g.tcpport||Nn.tcpport,udpport:g.udpport||Nn.udpport,username:g.username||Nn.username,password:g.password||Nn.password,forceturn:!1,security:!0}));if(i.useP2P){var a;let g=(a=e.uid)!==null&&a!==void 0?a:p.uid,y="glb:".concat(g.toString()),v=await UN(y),E=f.map(w=>({turnServerURL:w.address,tcpport:w.tcpport||Nn.tcpport,udpport:w.udpport||Nn.udpport,username:y,password:v,forceturn:!1,security:!0}));m.push(...E)}return e.turnServer={mode:"manual",servers:m},{gatewayInfo:p}}return await tO(e,t,r,i)}let{proxyInfo:s,gatewayInfo:c}=await AB(e,t,r,i),l={gatewayInfo:c},d=s.map(p=>({turnServerURL:p.address,tcpport:o==="proxy3"?void 0:p.tcpport?p.tcpport:Nn.tcpport,udpport:o==="proxy4"?void 0:p.udpport?p.udpport:Nn.udpport,username:p.username||Nn.username,password:p.password||Nn.password,forceturn:o!=="proxy4",security:o==="proxy5"}));if(i.useP2P){var u;let p=(u=e.uid)!==null&&u!==void 0?u:c.uid,f="glb:".concat(p.toString()),m=await UN(f),g=s.map(y=>({turnServerURL:y.address,tcpport:o==="proxy3"?void 0:y.tcpport||Nn.tcpport,udpport:o==="proxy4"?void 0:y.udpport||Nn.udpport,username:f,password:m,forceturn:o!=="proxy4",security:o==="proxy5"}));d.push(...g)}return e.turnServer={mode:"manual",servers:d},b.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(o)),l}async function aZ(e,t,r,n,i){let o=D("ACCOUNT_REGISTER").slice(0,D("AJAX_REQUEST_CONCURRENT")),a=[];a=t.proxyServer?o.map(c=>"https://".concat(t.proxyServer,"/ap/?url=").concat(c+"/api/v1")):o.map(c=>"https://".concat(c,"/api/v1"));let s=i==null?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:a});try{let c=await async function(l,d,u,p,f){let m=Date.now(),g={sid:u.sid,opid:10,appid:u.appId,string_uid:d},y=l[0],v=await Fs(()=>Vs(y+"".concat(y.indexOf("?")===-1?"?":"&","action=stringuid"),{data:g,cancelToken:p,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(E,w)=>{if(E.code===0){if(E.uid<=0||E.uid>=Math.pow(2,32))throw b.error("Invalid Uint Uid ".concat(d," => ").concat(E.uid),E),be.reqUserAccount(g.sid,{lts:m,success:!1,serverAddr:y,stringUid:g.string_uid,uid:E.uid,errorCode:I.INVALID_UINT_UID_FROM_STRING_UID,extend:g}),new G(I.INVALID_UINT_UID_FROM_STRING_UID);return be.reqUserAccount(g.sid,{lts:m,success:!0,serverAddr:y,stringUid:g.string_uid,uid:E.uid,errorCode:null,extend:g}),!1}let S=Of(E.code);return S.retry&&(y=l[(w+1)%l.length]),be.reqUserAccount(g.sid,{lts:m,success:!1,serverAddr:y,stringUid:g.string_uid,uid:E.uid,errorCode:S.desc,extend:g}),S.retry},(E,w)=>E.code!==I.OPERATION_ABORTED&&(be.reqUserAccount(g.sid,{lts:m,success:!1,serverAddr:y,stringUid:g.string_uid,uid:null,errorCode:E.code,extend:g}),y=l[(w+1)%l.length],!0),f);if(v.code!==0){let E=Of(v.code);throw new G(I.UNEXPECTED_RESPONSE,E.desc)}return v}(a,e,t,r,n);return i==null||i.recordJoinChannelService({status:"success",endTs:Date.now()},s),c.uid}catch(c){throw i==null||i.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[c]},s),c}}async function kMe(e,t,r){let n=D("ACCOUNT_REGISTER"),i=[];i=t.proxyServer?n.map(o=>"https://".concat(t.proxyServer,"/ap/?url=").concat(o+"/api/v1")):n.map(o=>"https://".concat(o,"/api/v1"));try{return await oZ({referenceList:i,asyncMapHandler:o=>async function(a,s,c,l){let d=Date.now(),u={sid:c.sid,opid:10,appid:c.appId,string_uid:s};try{let p=await Vs(a+"".concat(a.indexOf("?")===-1?"?":"&","action=stringuid"),{data:u,cancelToken:l,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(p.code!==0){let f=Of(p.code);throw new G(I.UNEXPECTED_RESPONSE,"preload sua error:".concat(f.desc),f)}if(p.uid<=0||p.uid>=Math.pow(2,32))throw new G(I.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:d,url:a,req:u,uid:p.uid,elapse:Date.now()-d}}catch(p){throw p}}(o,e,t,r),closeFn:o=>o.code===I.OPERATION_ABORTED||o.code===I.UNEXPECTED_RESPONSE&&!o.data.retry})}catch(o){throw o}}async function PMe(e,t,r){let n=D("CDS_AP").slice(0,D("AJAX_REQUEST_CONCURRENT")).map(c=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(c+"/api/v1"):"https://".concat(c,"/api/v1?action=config")),i=n.map(c=>function(l,d,u,p){let f=vt(),m={flag:64,cipher_method:0,features:{device:f.name,system:f.os,system_general:navigator.userAgent,vendor:d.appId,version:aa,cname:d.cname,sid:d.sid,session_id:d.sid,detail:"",proxyServer:d.proxyServer}};return Fs(()=>Vs(l,{data:m,timeout:1e3,cancelToken:u,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,g=>g.code!==I.OPERATION_ABORTED,p)}(c,e,t,r)),o=null,a=null,s={};try{o=await gm(i)}catch(c){if(c.code===I.OPERATION_ABORTED)throw c;a=c}if(i.forEach(c=>c.cancel()),be.reportApiInvoke(e.sid,{name:zr.REQUEST_CONFIG_DISTRIBUTE,options:{error:a,res:o}}).onSuccess(),o&&o.test_tags)try{s=function(c){if(!c.test_tags)return{};let l=c.test_tags,d=Object.keys(l),u={};return d.forEach(p=>{var f;let m=li(f=p.slice(4)).call(f),g=JSON.parse(l[p])[1];u[m]=g}),u}(o)}catch{}return s}async function xB(e,t){let r=D("WEBCS_DOMAIN").concat(D("WEBCS_DOMAIN_BACKUP_LIST")).map(n=>({url:"https://".concat(n,"/api/v2/transpond/webrtc?v=2"),areaCode:Y0(),serviceIds:[Dr.CHOOSE_SERVER,Dr.CLOUD_PROXY_FALLBACK]}));try{return await oZ({referenceList:r,asyncMapHandler:n=>async function(i,o,a){let s,{url:c,areaCode:l,serviceIds:d}=i,u=Date.now(),[p,f]=i2(o,l,d),m=Lr.networkState;try{m&&Lr.networkState===co.OFFLINE&&Lr.onlineWaiter&&await de.race([Lr.onlineWaiter,Tn(Vr.maxRetryTimeout)]),m=Lr.networkState;let{data:g,headers:y}=await Vs(c,{data:p,cancelToken:a,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);s=y.http3==="1"?1:-1,(w=>{let S=[];if(w.response_body.forEach(x=>{let O=x.buffer.code;if(x.uri===23&&O===0&&!x.buffer.edges_services)if(x.buffer.flag===4194310)x.buffer.edges_services=[];else{let L={error:new G(I.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:w.detail[502]}),flag:x.buffer.flag};S.push(L)}if(O!==0){let L=Of(O),j={error:new G(I.CAN_NOT_GET_GATEWAY_SERVER,L.desc,{desc:L.desc,retry:L.retry,csIp:w.detail[502]}),flag:x.buffer.flag};x.buffer.flag===4194310?b.warning(j.error.toString()):S.push(j)}}),S.length)throw new G(I.CAN_NOT_GET_GATEWAY_SERVER,S.map(x=>"flag: ".concat(x.flag,", message: ").concat(x.error.message)).join(" | "),{retry:!!S.find(x=>x.error.data.retry),csIp:w.detail[502],desc:[...new Set(S.map(x=>{var O;return x==null||(O=x.error)===null||O===void 0||(O=O.data)===null||O===void 0?void 0:O.desc}).filter(x=>!!x))]})})(g);let v=K0(g,Dr.CHOOSE_SERVER),E=K0(g,Dr.CLOUD_PROXY_FALLBACK);return n2(v),{gatewayInfo:GD(v,c),proxyInfo:E,opid:f,requestTime:u,url:c,isHttp3:s,elapse:Date.now()-u}}catch(g){throw g}}(n,e,t),closeFn:n=>n.code===I.OPERATION_ABORTED||n.code===I.CAN_NOT_GET_GATEWAY_SERVER&&!n.data.retry})}catch(n){throw n}}async function AB(e,t,r,n){let i=D("PROXY_SERVER_TYPE3"),o=(f,m,g)=>{let y=g||i;return Array.isArray(y)&&(y=m%2==0?i[1]:i[0]),"https://".concat(y,"/ap/?url=").concat(f)},a=null,s=[],c=async()=>{let f=D("WEBCS_DOMAIN").slice(0,D("AJAX_REQUEST_CONCURRENT")).map((y,v)=>{let E;return E=e.cloudProxyServer==="disabled"&&e.proxyServer?o("".concat(y,"/api/v2/transpond/webrtc?v=2"),v,e.proxyServer):e.cloudProxyServer==="disabled"||e.cloudProxyServer==="fallback"?"https://".concat(y,"/api/v2/transpond/webrtc?v=2"):o("".concat(y,"/api/v2/transpond/webrtc?v=2"),v),{url:E,areaCode:Y0(),serviceIds:[Dr.CHOOSE_SERVER,e.cloudProxyServer==="proxy5"?Dr.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?Dr.CLOUD_PROXY:Dr.CLOUD_PROXY_FALLBACK]}}),m=n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:f.map(y=>y.url)}),g=await X0({fragementLength:D("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:y=>(b.debug("[".concat(e.clientId,"] Connect to choose_server:"),y.url),RB(y,e,t,r)),allFailedhandler:y=>{throw n.recordJoinChannelService({endTs:Date.now(),status:"error",errors:y},m),y[0]},promisesCollector:s});return n.recordJoinChannelService({endTs:Date.now(),status:"success"},m),g},l=async()=>{if(await Tn(1e3),a!==null)return a;let f=D("WEBCS_DOMAIN_BACKUP_LIST").map((y,v)=>{let E;return E=e.cloudProxyServer==="disabled"&&e.proxyServer?o("".concat(y,"/api/v2/transpond/webrtc?v=2"),v,e.proxyServer):e.cloudProxyServer==="disabled"||e.cloudProxyServer==="fallback"?"https://".concat(y,"/api/v2/transpond/webrtc?v=2"):o("".concat(y,"/api/v2/transpond/webrtc?v=2"),v),{url:E,areaCode:Y0(),serviceIds:[Dr.CHOOSE_SERVER,e.cloudProxyServer==="proxy5"?Dr.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?Dr.CLOUD_PROXY:Dr.CLOUD_PROXY_FALLBACK]}}),m=n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:f.map(y=>y.url)}),g=await X0({fragementLength:D("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:y=>(b.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),y.url),RB(y,e,t,r)),allFailedhandler:y=>{throw n.recordJoinChannelService({endTs:Date.now(),status:"error",errors:y},m),y[0]},promisesCollector:s});return n.recordJoinChannelService({endTs:Date.now(),status:"success"},m),g},d,u,p;try{({gatewayInfo:d,proxyInfo:u,url:p}=await gm([c(),l()]))}catch(f){throw f[0]}if(s.length&&s.forEach(f=>f.cancel&&typeof f.cancel=="function"&&f.cancel()),!d||!u)throw new G(I.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=p,e.cloudProxyServer!=="disabled"&&Array.isArray(i)&&p){let f=/^https?:\/\/(.+?)(\/.*)?$/.exec(p)[1];pe(i).call(i,f)&&(e.proxyServer=f,b.setProxyServer(f),be.setProxyServer(f))}return a={gatewayInfo:d,proxyInfo:await mQ(u,d.uid)},a}async function DMe(e,t,r){let n=D("UAP_AP").slice(0,D("AJAX_REQUEST_CONCURRENT")).map(o=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(o+"/api/v1?action=uap"):"https://".concat(o,"/api/v1?action=uap")),i=n.map(o=>function(a,s,c,l){let d={command:"convergeAllocateEdge",sid:s.sid,appId:s.appId,token:s.token,ts:Date.now(),version:aa,cname:s.cname,uid:s.uid.toString(),requestId:UI,seq:UI};UI+=1;let u={service_name:"tele_channel",json_body:JSON.stringify(d)};return Fs(async()=>{let p=await Vs(a,{data:u,cancelToken:c,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(p.code!==0){let m=new G(I.UNEXPECTED_RESPONSE,"cross channel ap error, code"+p.code,{retry:!0});throw b.error(m.toString()),m}let f=JSON.parse(p.json_body);if(f.code!==200){let m=new G(I.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(f.code,", reason: ").concat(f.reason));throw b.error(m.toString()),m}if(!f.servers||f.servers.length===0){let m=new G(I.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw b.error(m.toString()),m}return{vid:f.vid,workerToken:f.workerToken,addressList:(D("CHANNEL_MEDIA_RELAY_SERVERS")||f.servers).map(m=>"wss://".concat(m.address.replace(/\./g,"-"),".").concat(D("WORKER_DOMAIN"),":").concat(m.wss))}},void 0,p=>!!(p.code!==I.OPERATION_ABORTED&&p.code!==I.UNEXPECTED_RESPONSE||p.data&&p.data.retry),l)}(o,e,t,r));try{let o=await gm(i);return i.forEach(a=>a.cancel()),o}catch(o){throw o[0]}}async function LMe(e,t,r){let n=null,i=[],o=async a=>{let s=D(a?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(c=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(c+"/api/v2/transpond/webrtc?v=2"):"https://".concat(c,"/api/v2/transpond/webrtc?v=2"));return a&&(await Tn(1e3),n!==null)?n:await X0({fragementLength:D("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:c=>(b.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(a?"backup":""," choose_server:"),c),function(l,d,u,p){let[f]=OMe(d,[Dr.CHOOSE_SERVER]),m=Lr.networkState;return Fs(async()=>{m&&Lr.networkState===co.OFFLINE&&Lr.onlineWaiter&&await de.race([Lr.onlineWaiter,Tn(p&&p.maxRetryTimeout||Vr.maxRetryTimeout)]),m=Lr.networkState;let g=await Vs(l,{data:f,cancelToken:u,headers:{"Content-Type":"multipart/form-data;"}},!0);return NMe(g,l)},()=>!1,g=>g.code!==I.OPERATION_ABORTED&&(g.code===I.UPDATE_TICKET_FAILED?g.data.retry:(b.warning("[".concat(d.clientId,"] update ticket network error, retry"),g),!0)),p)}(c,e,t,r)),allFailedhandler:c=>{throw c[0]},promisesCollector:i})};try{return n=await gm([o(!1),o(!0)]),i.length&&i.forEach(a=>a.cancel&&typeof a.cancel=="function"&&a.cancel()),n}catch(a){throw a[0]}}function NB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function OB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NB(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var MMe=class extends fr{get isSuccess(){return!!this.configs}constructor(){super(),C(this,"configs",void 0),C(this,"joinInfo",void 0),C(this,"cancelToken",void 0),C(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),C(this,"interval",void 0),C(this,"mutex",new zn("config-distribute")),C(this,"mutableParamsRead",!1)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),D("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},D("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,be.reportApiInvoke(null,{options:void 0,name:zr.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Er.TRACER}).onSuccess(JSON.stringify(nd))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void b.debug("[config-distribute] get config distribute interrupted have no joininfo");let e,t=await this.mutex.lock();try{e=await PMe(this.joinInfo,this.cancelToken,this.retryConfig),b.debug("[config-distribute] get config distribute",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(r){let n=new G(I.NETWORK_RESPONSE_ERROR,r);b.warning("[config-distribute] ".concat(n.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&t.uplink.max_bitrate!==void 0&&t.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(HN.UPDATE_BITRATE_LIMIT,e):this.emit(HN.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&OB({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;let r=Gy(t=Object.keys(e).filter(i=>/^webrtc_ng_global_parameter/.test(i))).call(t);for(let i=0;i<r.length;i++)for(let o=r.length-1;o>i;o--){let a=r[o];if(typeof e[a].__priority=="number"){let s=e[a].__priority,c=r[o-1];if(typeof e[c].__priority=="number"){if(!(s>e[c].__priority))continue;{let l=a;r[o]=r[o-1],r[o-1]=l}}else{let l=a;r[o]=r[o-1],r[o-1]=l}}}let n={};r.forEach(i=>{let o=e[i],a=o.__expires;Object.keys(o).forEach(s=>{s==="__priority"||s==="__expires"||Object.prototype.hasOwnProperty.call(n,s)||(n[s]=OB({value:o[s]},a&&{expires:a}))})});try{(function(a){try{let s=Date.now();Object.keys(a).forEach(c=>{switch(c){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":case"ENABLE_AG_ADAPTATION":case"FORCE_AG_HIGH_FRAMERATE":case"FORCE_SUPPORT_AG_ADAPTATION":case"ENCODER_CONFIG_LIMIT":case"CAMERA_CAPTURE_CONFIG":case"ENABLE_PRELOAD":if(Object.prototype.hasOwnProperty.call(xr,c)){let{value:l,expires:d}=a[c];if(d&&d<=s)return;nd[c]=l,xr[c]=l,b.debug("Update global parameters from config distribute",c,l)}}})}catch(s){b.error("Error update config immediately: ".concat(a),s.message)}})(n);let i=JSON.stringify(n),o=window.btoa(i);window.localStorage.setItem("websdk_ng_global_parameter",o),b.debug("Caching global parameters ".concat(i))}catch(i){b.error("Error caching global parameters:",i.message)}}},jMe=class extends fr{constructor(){super(...arguments),C(this,"resultStorage",new Map)}setLocalAudioStats(e,t,r){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(r,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(r,t))}setLocalVideoStats(e,t,r){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(r,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(r,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(r))}setRemoteAudioStats(e,t){let r=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",r,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){let r=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",r,this.checkVideoDecode(t))}record(e,t,r){if(D("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});let n=this.resultStorage.get(e);if(n&&(n.result.push(r),n.result.length>=5)){var i;let o=pe(i=n.result).call(i,!0);n.isPrevNormal&&!o&&this.emit("exception",kB[e],e,t),!n.isPrevNormal&&o&&this.emit("exception",kB[e]+2e3,e+"_RECOVER",t),n.isPrevNormal=o,n.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&e.receiveLevel===0)}checkAudioInputLevel(e,t){return t instanceof an&&!t.isActive||!!t.muted||e.sendVolumeLevel!==0}checkFramerateInput(e,t){let r=null;t._encoderConfig&&t._encoderConfig.frameRate&&(r=uo(t._encoderConfig.frameRate));let n=e.captureFrameRate;return!r||!n||!(r>10&&n<5||r<10&&r>=5&&n<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||e.sendBitrate!==0}checkSendAudioBitrate(e,t){return t instanceof an&&!t.isActive||!!t.muted||e.sendBitrate!==0}checkVideoDecode(e){return e.receiveBitrate===0||e.decodeFrameRate!==0}},kB={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},Hn=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){let r=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(r.length>0){let n=r[r.length-1];return Math.round(performance.now()-n.startTime)}return 0}measureFromPublishStart(e,t){let r=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(r.length>0){let n=r[r.length-1];return Math.round(performance.now()-n.startTime)}return 0}};function o2(e,t){this.v=e,this.k=t}function St(e){return new o2(e,0)}var UMe=lX,FMe=Ic;Yt({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var e=FMe.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var VMe=Ic,BMe=um;Yt({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=VMe.f(this),r=BMe(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}});var rO=Nr(UMe),sZ=hm.f("asyncIterator"),$Me=Nr(sZ);function vg(e){var t,r;function n(o,a){try{var s=e[o](a),c=s.value,l=c instanceof o2;rO.resolve(l?c.v:c).then(function(d){if(l){var u=o==="return"?"return":"next";if(!c.k||d.done)return n(u,d);d=e[u](d).value}i(s.done?"return":"normal",d)},function(d){n("throw",d)})}catch(d){i("throw",d)}}function i(o,a){switch(o){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(o,a){return new rO(function(s,c){var l={key:o,arg:a,resolve:s,reject:c,next:null};r?r=r.next=l:(t=r=l,n(o,a))})},typeof e.return!="function"&&(this.return=void 0)}function xs(e){return function(){return new vg(e.apply(this,arguments))}}vg.prototype[typeof Op=="function"&&$Me||"@@asyncIterator"]=function(){return this},vg.prototype.next=function(e){return this._invoke("next",e)},vg.prototype.throw=function(e){return this._invoke("throw",e)},vg.prototype.return=function(e){return this._invoke("return",e)};var PB=Nr(Us.Object.getOwnPropertySymbols),HMe=Yt,WMe=iD.indexOf,GMe=HS,nO=L0([].indexOf),DB=!!nO&&1/nO([1],1,-0)<0;HMe({target:"Array",proto:!0,forced:DB||!GMe("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return DB?nO(this,e,t)||0:WMe(this,e,t)}});var zMe=ss("Array").indexOf,KMe=Ii,qMe=zMe,FI=Array.prototype,YMe=function(e){var t=e.indexOf;return e===FI||KMe(FI,e)&&t===FI.indexOf?qMe:t},LB=Nr(YMe);function XMe(e,t){if(e==null)return{};var r,n,i=function(a,s){if(a==null)return{};var c,l,d={},u=lQ(a);for(l=0;l<u.length;l++)c=u[l],LB(s).call(s,c)>=0||(d[c]=a[c]);return d}(e,t);if(PB){var o=PB(e);for(n=0;n<o.length;n++)r=o[n],LB(t).call(t,r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ga(e){if(Array.isArray(e))return e.map(r=>r);if(!MB(e))return e;let t={};for(let r in e){let n=e[r];MB(n)||Array.isArray(n)?t[r]=Ga(n):t[r]=n}return t}function MB(e){return!(typeof e!="object"||Array.isArray(e)||!e)}var VI=class{constructor(e){C(this,"input",[]),C(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}},_c={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},J0={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:_c,remoteCandidate:_c}},cZ={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0},lZ={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},dZ={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},uZ={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function jB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function UB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jB(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var a2=class{constructor(e,t){C(this,"onFirstVideoReceived",void 0),C(this,"onFirstVideoDecoded",void 0),C(this,"onFirstAudioReceived",void 0),C(this,"onFirstVideoDecodedTimeout",void 0),C(this,"onFirstAudioDecoded",void 0),C(this,"onSelectedLocalCandidateChanged",void 0),C(this,"onSelectedRemoteCandidateChanged",void 0),C(this,"videoIsReady",!1),C(this,"videoIsReady2",{}),C(this,"pc",void 0),C(this,"options",void 0),C(this,"intervalTimer",void 0),C(this,"stats",Ga(J0)),C(this,"isFirstVideoReceived",{}),C(this,"isFirstVideoDecoded",{}),C(this,"isFirstAudioReceived",{}),C(this,"isFirstAudioDecoded",{}),C(this,"isFirstVideoDecodedTimeout",{}),C(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new de(e=>{e({local:UB({},_c),remote:UB({},_c)})})}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);let t=this.lossRateWindowStats.length,r=["videoSend","audioSend","videoRecv","audioRecv"],n=0,i=0,o=0,a=0;for(let s of r)e[s].forEach((c,l)=>{if(!this.lossRateWindowStats[t-1][s][l]||!this.lossRateWindowStats[0][s][l])return;let d=this.lossRateWindowStats[t-1][s][l].packets-this.lossRateWindowStats[0][s][l].packets,u=this.lossRateWindowStats[t-1][s][l].packetsLost-this.lossRateWindowStats[0][s][l].packetsLost;s==="videoSend"||s==="audioSend"?(n+=d,o+=u):(i+=d,a+=u),Number.isNaN(d)||Number.isNaN(d)?c.packetLostRate=0:c.packetLostRate=d<=0||u<=0?0:u/(d+u)});e.sendPacketLossRate=n<=0||o<=0?0:o/(n+o),e.recvPacketLossRate=i<=0||a<=0?0:a/(i+a)}};function FB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function JMe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FB(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var QMe=class extends a2{constructor(){super(...arguments),C(this,"_stats",J0),C(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){let e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=Ga(J0);let r=t.filter(i=>i.type==="ssrc");this.processSSRCStats(r);let n=t.find(i=>i.type==="VideoBwe");n&&this.processBandwidthStats(n),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach(t=>{var r;let n=pe(r=t.id).call(r,"send");switch("".concat(t.mediaType,"_").concat(n?"send":"recv")){case"video_send":{let i=Ga(lZ);i.codec=t.googCodecName,i.adaptionChangeReason="none",t.googCpuLimitedResolution&&(i.adaptionChangeReason="cpu"),t.googBandwidthLimitedResolution&&(i.adaptionChangeReason="bandwidth"),i.avgEncodeMs=Number(t.googAvgEncodeMs),i.inputFrame={width:Number(t.googFrameWidthInput)||Number(t.googFrameWidthSent),height:Number(t.googFrameHeightInput)||Number(t.googFrameHeightSent),frameRate:Number(t.googFrameRateInput)},i.sentFrame={width:Number(t.googFrameWidthSent),height:Number(t.googFrameHeightSent),frameRate:Number(t.googFrameRateInput)},i.firsCount=Number(t.googFirReceived),i.nacksCount=Number(t.googNacksReceived),i.plisCount=Number(t.googPlisReceived),i.frameCount=Number(t.framesEncoded),i.bytes=Number(t.bytesSent),i.packets=Number(t.packetsSent),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.rttMs=Number(t.googRtt||0),this._stats.videoSend.push(i),this._stats.rtt=i.rttMs;break}case"video_recv":{let i=Ga(cZ),o=this.lastDecodeVideoReceiverStats.get(Number(t.ssrc));if(i.codec=t.googCodecName,i.targetDelayMs=Number(t.googTargetDelayMs),i.renderDelayMs=Number(t.googRenderDelayMs),i.currentDelayMs=Number(t.googCurrentDelayMs),i.minPlayoutDelayMs=Number(t.googMinPlayoutDelayMs),i.decodeMs=Number(t.googDecodeMs),i.maxDecodeMs=Number(t.googMaxDecodeMs),i.receivedFrame={width:Number(t.googFrameWidthReceived),height:Number(t.googFrameHeightReceived),frameRate:Number(t.googFrameRateReceived)},i.decodedFrame={width:Number(t.googFrameWidthReceived),height:Number(t.googFrameHeightReceived),frameRate:Number(t.googFrameRateDecoded)},i.decodeFrameRate=Number(t.googFrameRateDecoded),i.outputFrame={width:Number(t.googFrameWidthReceived),height:Number(t.googFrameHeightReceived),frameRate:Number(t.googFrameRateOutput)},i.jitterBufferMs=Number(t.googJitterBufferMs),i.firsCount=Number(t.googFirsSent),i.nacksCount=Number(t.googNacksSent),i.plisCount=Number(t.googPlisSent),i.framesDecodeCount=Number(t.framesDecoded),i.bytes=Number(t.bytesReceived),i.packets=Number(t.packetsReceived),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.packets>0&&!this.isFirstVideoReceived[i.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(i.ssrc),this.isFirstVideoReceived[i.ssrc]=!0),i.framesDecodeCount>0&&!this.isFirstVideoDecoded[i.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(i.ssrc,i.decodedFrame.width,i.decodedFrame.height),this.isFirstVideoDecoded[i.ssrc]=!0),o){let a=o.stats,s=Date.now()-o.lts;i.framesDecodeFreezeTime=a.framesDecodeFreezeTime,i.framesDecodeInterval=a.framesDecodeInterval,i.framesDecodeCount>a.framesDecodeCount&&this.isFirstVideoDecoded[i.ssrc]?(o.lts=Date.now(),i.framesDecodeInterval=s,i.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(t.ssrc,10))?i.framesDecodeFreezeTime+=i.framesDecodeInterval:this.setVideoIsReady2(parseInt(t.ssrc,10),!0))):i.framesDecodeCount<o.stats.framesDecodeCount&&(i.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(i.ssrc,{stats:JMe({},i),lts:Date.now()}),this._stats.videoRecv.push(i);break}case"audio_recv":{let i=Ga(uZ);i.codec=t.googCodecName,i.outputLevel=Math.abs(Number(t.audioOutputLevel))/32767,i.decodingCNG=Number(t.googDecodingCNG),i.decodingCTN=Number(t.googDecodingCTN),i.decodingCTSG=Number(t.googDecodingCTSG),i.decodingNormal=Number(t.googDecodingNormal),i.decodingPLC=Number(t.googDecodingPLC),i.decodingPLCCNG=Number(t.googDecodingPLCCNG),i.expandRate=Number(t.googExpandRate),i.accelerateRate=Number(t.googAccelerateRate),i.preemptiveExpandRate=Number(t.googPreemptiveExpandRate),i.secondaryDecodedRate=Number(t.googSecondaryDecodedRate),i.speechExpandRate=Number(t.googSpeechExpandRate),i.preferredJitterBufferMs=Number(t.googPreferredJitterBufferMs),i.jitterBufferMs=Number(t.googJitterBufferMs),i.jitterMs=Number(t.googJitterReceived),i.bytes=Number(t.bytesReceived),i.packets=Number(t.packetsReceived),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.receivedFrames=Number(t.googDecodingCTN)||Number(t.packetsReceived),i.droppedFrames=Number(t.googDecodingPLC)+Number(t.googDecodingPLCCNG)||Number(t.packetsLost),i.receivedFrames>0&&!this.isFirstAudioReceived[i.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(i.ssrc),this.isFirstAudioReceived[i.ssrc]=!0),i.decodingNormal>0&&!this.isFirstAudioDecoded[i.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(i.ssrc),this.isFirstAudioDecoded[i.ssrc]=!0),this._stats.audioRecv.push(i);break}case"audio_send":{let i=Ga(dZ);i.codec=t.googCodecName,i.inputLevel=Math.abs(Number(t.audioInputLevel))/32767,i.aecReturnLoss=Number(t.googEchoCancellationReturnLoss||0),i.aecReturnLossEnhancement=Number(t.googEchoCancellationReturnLossEnhancement||0),i.residualEchoLikelihood=Number(t.googResidualEchoLikelihood||0),i.residualEchoLikelihoodRecentMax=Number(t.googResidualEchoLikelihoodRecentMax||0),i.bytes=Number(t.bytesSent),i.packets=Number(t.packetsSent),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.rttMs=Number(t.googRtt||0),this._stats.rtt=i.rttMs,this._stats.audioSend.push(i);break}}})}_getStats(){return new de((e,t)=>{this.pc.getStats(e,t)})}statsResponsesToObjects(e){let t=[];return e.result().forEach(r=>{let n={id:r.id,timestamp:r.timestamp.valueOf().toString(),type:r.type};r.names().forEach(i=>{n[i]=r.stat(i)}),t.push(n)}),t}};function VB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Zd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VB(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var BB=class extends a2{constructor(){super(...arguments),C(this,"_stats",J0),C(this,"report",void 0),C(this,"lastDecodeVideoReceiverStats",new Map),C(this,"lastVideoFramesRecv",new Map),C(this,"lastVideoFramesSent",new Map),C(this,"lastVideoFramesDecode",new Map),C(this,"lastVideoFramesOutput",new Map),C(this,"lastVideoJBDelay",new Map),C(this,"lastAudioJBDelay",new Map),C(this,"mediaBytesSent",new Map),C(this,"mediaBytesRetransmit",new Map),C(this,"mediaBytesTargetEncode",new Map),C(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=Ga(J0),this.report.forEach(e=>{switch(e.type){case vo.OUTBOUND:case vo.INBOUND:{let t=e.mediaType||e.kind,r=!t&&"frameWidth"in e,n=!t&&!("frameWidth"in e);e.type===vo.OUTBOUND?t==="audio"||n?this.processAudioOutboundStats(e):(t==="video"||r)&&this.processVideoOutboundStats(e):e.type===vo.INBOUND&&(t==="audio"||n?this.processAudioInboundStats(e):(t==="video"||r)&&this.processVideoInboundStats(e));break}case vo.TRANSPORT:{let t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case vo.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){let e=await this.pc.getStats(),t={local:Zd({},_c),remote:Zd({},_c)};return e.forEach(r=>{let n;if(r.type===vo.TRANSPORT&&(n=e.get(r.selectedCandidatePairId)),r.type===vo.CANDIDATE_PAIR&&r.selected&&(n=r),n){let i=(o,a)=>{o.type=a.type,o.id=a.id,a.address&&(o.address=a.address),a.candidateType&&(o.candidateType=a.candidateType),a.port&&(o.port=a.port),a.priority&&(o.priority=a.priority),a.protocol&&(o.protocol=a.protocol),a.relayProtocol&&(o.relayProtocol=a.relayProtocol)};if(n.localCandidateId){let o=e.get(n.localCandidateId);o&&i(t.local,o)}if(n.remoteCandidateId){let o=e.get(n.remoteCandidateId);o&&i(t.remote,o)}}}),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach(t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}),this._stats.audioSend.forEach(t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){let t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){let t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===vo.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===vo.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===vo.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(Zd({},t),Zd({},this.stats.selectedCandidatePair.localCandidate)),e.type===vo.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(Zd({},t),Zd({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find(r=>r.ssrc===e.ssrc);t||(t=Ga(uZ),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.packetsDiscarded=e.packetsDiscarded,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),typeof e.concealedSamples=="number"&&(t.concealedSamples=e.concealedSamples)}processVideoInboundStats(e){let t=this._stats.videoRecv.find(a=>a.ssrc===e.ssrc);t||(t=Ga(cZ),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.framesDroppedCount=e.framesDropped,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay,t.totalFreezesDuration=e.totalFreezesDuration;let r=this.lastDecodeVideoReceiverStats.get(t.ssrc),n=this.lastVideoFramesDecode.get(t.ssrc),i=this.lastVideoFramesOutput.get(t.ssrc),o=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){let a=t.decodedFrame?t.decodedFrame.width:0,s=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,a,s),this.isFirstVideoDecoded[t.ssrc]=!0}if(r){let a=r.stats,s=o-r.lts;t.framesDecodeFreezeTime=a.framesDecodeFreezeTime,t.framesDecodeInterval=a.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&s>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>a.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(r.lts=Date.now(),t.framesDecodeInterval=s,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<a.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(r.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-r.qpSum)/(e.framesDecoded-r.stats.framesDecodeCount))}n&&o-n.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-n.count)/((o-n.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:t.decodeFrameRate})):n?t.decodeFrameRate=n.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:0}),t.framesDroppedCount&&e.framesReceived&&(i&&o-i.lts>=800?(t.outputFrameRate=Math.round((e.framesReceived-t.framesDroppedCount-i.count)/((o-i.lts)/1e3)),this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:Math.max(t.outputFrameRate,0)})):i?t.outputFrameRate=i.rate:this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:0})),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:Zd({},t),lts:r?r.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find(n=>n.ssrc===e.ssrc);t||(t=Ga(lZ),this._stats.videoSend.push(t));let r=this.mediaBytesSent.get(e.ssrc);if(r)r.add(e.bytesSent);else{let n=new VI(10);n.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,n)}if(e.retransmittedBytesSent!==void 0){let n=this.mediaBytesRetransmit.get(e.ssrc);if(n)n.add(e.retransmittedBytesSent);else{let i=new VI(10);i.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,i)}}if(e.totalEncodedBytesTarget){let n=this.mediaBytesTargetEncode.get(e.ssrc);if(n)n.add(e.totalEncodedBytesTarget);else{let i=new VI(10);i.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,i)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){let n=this.lastEncoderMs.get(e.ssrc);if(!n||n.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{let i=e.framesEncoded-n.lastFrameCount,o=e.totalEncodeTime-n.lastEncoderTime;t.avgEncodeMs=1e3*o/i}}if(e.framesEncoded&&e.qpSum){let n=this.lastEncoderMs.get(e.ssrc);!n||n.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-n.lastQpSum)/(e.framesEncoded-n.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{let n=this.findRemoteStatsId(e.ssrc,vo.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find(r=>r.ssrc===e.ssrc);if(t||(t=Ga(dZ),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{let r=this.findRemoteStatsId(e.ssrc,vo.REMOTE_INBOUND);r&&this.processRemoteInboundStats(r,t)}}findRemoteStatsId(e,t){var r;let n=Array.from(ol(r=this.report).call(r)).find(i=>i.type===t&&i.ssrc===e);return n?n.id:null}processVideoMediaSource(e,t){let r=this.report.get(e);r&&r.width&&r.height&&r.framesPerSecond&&(t.inputFrame={width:r.width,height:r.height,frameRate:r.framesPerSecond})}processAudioMediaSource(e,t){let r=this.report.get(e);r&&(t.inputLevel=r.audioLevel)}processVideoTrackSenderStats(e,t,r){var n,i,o,a;let s=t?this.report.get(t):void 0,c=(n=s==null?void 0:s.framesSent)!==null&&n!==void 0?n:e.framesSent;if(typeof c!="number")return;let l=(i=s==null?void 0:s.frameWidth)!==null&&i!==void 0?i:e.frameWidth,d=(o=s==null?void 0:s.frameHeight)!==null&&o!==void 0?o:e.frameHeight,u=(a=s==null?void 0:s.framesPerSecond)!==null&&a!==void 0?a:e.framesPerSecond;if(typeof l=="number"&&typeof d=="number"||(l=0,d=0),u==null){let p=Date.now(),f=this.lastVideoFramesSent.get(r.ssrc);f&&p-f.lts>=800?(u=Math.round((c-f.count)/((p-f.lts)/1e3)),this.lastVideoFramesSent.set(r.ssrc,{count:c,lts:p,rate:u})):f?u=f.rate:this.lastVideoFramesSent.set(r.ssrc,{count:c,lts:p,rate:0})}r.sentFrame={width:l,height:d,frameRate:Math.max(0,u)}}processVideoTrackReceiverStats(e,t,r){var n,i,o,a,s;let c=t?this.report.get(t):void 0,l=(n=c==null?void 0:c.framesReceived)!==null&&n!==void 0?n:e.framesReceived,d=(i=c==null?void 0:c.frameWidth)!==null&&i!==void 0?i:e.frameWidth,u=(o=c==null?void 0:c.frameHeight)!==null&&o!==void 0?o:e.frameHeight,p=(a=c==null?void 0:c.jitterBufferDelay)!==null&&a!==void 0?a:e.jitterBufferDelay,f=(s=c==null?void 0:c.jitterBufferEmittedCount)!==null&&s!==void 0?s:e.jitterBufferEmittedCount;if(typeof l=="number"){let m=this.lastVideoFramesRecv.get(r.ssrc),g=Date.now();r.framesReceivedCount=l;let y=0;m&&g-m.lts>=800?(y=Math.round((l-m.count)/((g-m.lts)/1e3)),this.lastVideoFramesRecv.set(r.ssrc,{count:l,lts:g,rate:y})):m?y=m.rate:this.lastVideoFramesRecv.set(r.ssrc,{count:l,lts:g,rate:0}),r.receivedFrame={width:d||0,height:u||0,frameRate:y||0},r.decodedFrame={width:d||0,height:u||0,frameRate:r.decodeFrameRate||0},r.outputFrame={width:d||0,height:u||0,frameRate:r.outputFrameRate||r.decodeFrameRate||0}}if(p&&f){let m=this.lastVideoJBDelay.get(r.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0},g=m.jitterBufferMs,y=f-m.jitterBufferEmittedCount;y>0&&(g=1e3*(p-m.jitterBufferDelay)/y),r.jitterBufferMs=g,r.currentDelayMs=Math.round(g),this.lastVideoJBDelay.set(r.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:f,jitterBufferMs:r.currentDelayMs})}}processAudioTrackSenderStats(e,t,r){var n,i,o,a;let s=t?this.report.get(t):void 0,c=(n=(i=s==null?void 0:s.echoReturnLoss)!==null&&i!==void 0?i:e.echoReturnLoss)!==null&&n!==void 0?n:0,l=(o=(a=s==null?void 0:s.echoReturnLossEnhancement)!==null&&a!==void 0?a:e.echoReturnLossEnhancement)!==null&&o!==void 0?o:0;r.aecReturnLoss=c,r.aecReturnLossEnhancement=l}processAudioTrackReceiverStats(e,t,r){var n,i,o,a,s,c,l;let d=t?this.report.get(t):void 0,u=(n=d==null?void 0:d.removedSamplesForAcceleration)!==null&&n!==void 0?n:e.removedSamplesForAcceleration,p=(i=d==null?void 0:d.totalSamplesReceived)!==null&&i!==void 0?i:e.totalSamplesReceived,f=(o=d==null?void 0:d.jitterBufferDelay)!==null&&o!==void 0?o:e.jitterBufferDelay,m=(a=d==null?void 0:d.jitterBufferEmittedCount)!==null&&a!==void 0?a:e.jitterBufferEmittedCount,g=(s=d==null?void 0:d.audioLevel)!==null&&s!==void 0?s:e==null?void 0:e.audioLevel,y=(c=d==null?void 0:d.totalSamplesDuration)!==null&&c!==void 0?c:e==null?void 0:e.totalSamplesDuration,v=(l=d==null?void 0:d.concealedSamples)!==null&&l!==void 0?l:e.concealedSamples;if(u&&p&&(r.accelerateRate=u/p),f&&m){let w=this.lastAudioJBDelay.get(r.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0},S=w.jitterBufferMs,x=m-w.jitterBufferEmittedCount;x>0&&(S=1e3*(f-w.jitterBufferDelay)/x),r.jitterBufferMs=Math.round(S),this.lastAudioJBDelay.set(r.ssrc,{jitterBufferDelay:f,jitterBufferEmittedCount:m,jitterBufferMs:r.jitterBufferMs})}r.outputLevel=g;let E=1920;y&&p&&(E=p/y/50,r.receivedFrames=Math.round(p/E)),v&&(r.droppedFrames=Math.round(v/E))}processRemoteInboundStats(e,t){let r=this.report.get(e);r&&(t.packetsLost=r.packetsLost,r.roundTripTime&&(t.rttMs=1e3*r.roundTripTime),r.jitter&&(t.jitterMs=1e3*r.jitter),r.timestamp&&(t.timestamp=r.timestamp))}getCodecFromCodecStats(e){let t=this.report.get(e);if(!t)return"";let r=t.mimeType.match(/\/(.*)$/);return r&&r[1]?r[1]:""}updateSendBitrate(){let e=0,t=null,r=null;this.mediaBytesSent.forEach(i=>{e+=i.diffMean()}),this.mediaBytesRetransmit.forEach(i=>{t=t===null?i.diffMean():t+i.diffMean()}),this.mediaBytesTargetEncode.forEach(i=>{r=r===null?i.diffMean():r+i.diffMean()});let n=t!==null?e-t:e;this._stats.bitrate={actualEncoded:8*n/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},t!==null&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),r!==null&&(this._stats.bitrate.targetEncoded=8*r/(this.options.updateInterval/1e3))}},ZMe=class extends a2{updateStats(){return de.resolve()}};function s2(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4,o=function(){let a=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return a&&a[0]?Number(a[0].split("/")[1]):null}();return o?o<76?new QMe(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i}):new BB(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i}):function(a){if(!window.RTCStatsReport)return!1;let s=a.getStats();return!!(s instanceof de||function(c){return!!c&&(typeof c=="object"||typeof c=="function")&&typeof c.then=="function"}(s))}(e)?new BB(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i}):new ZMe(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i})}var $B=class{get localCapabilities(){return Pr(this._localCapabilities)}get rtpCapabilities(){return Pr(this._rtpCapabilities)}get candidates(){return Pr(this._candidates)}get iceParameters(){return Pr(this._iceParameters)}get dtlsParameters(){return Pr(this._dtlsParameters)}constructor(e){C(this,"sessionDesc",void 0),C(this,"_localCapabilities",void 0),C(this,"_rtpCapabilities",void 0),C(this,"_candidates",void 0),C(this,"_iceParameters",void 0),C(this,"_dtlsParameters",void 0),C(this,"setup",void 0),C(this,"currentMidIndex",void 0),C(this,"cname","o/i14u9pJrxRKAsu"),C(this,"firefoxSsrcMidMap",new Map),e=Pr(e);let{remoteIceParameters:t,remoteDtlsParameters:r,candidates:n,remoteRTPCapabilities:i,localCapabilities:o,direction:a,setup:s,videoCodec:c,audioCodec:l}=e,d;this.setup=s,d=a===Ei.RECEIVE_ONLY?wn.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`):wn.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`),this._rtpCapabilities=i,this._candidates=n,this._iceParameters=t,this._dtlsParameters=r,this._localCapabilities=o;let u=a===Ei.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,p=a===Ei.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,f=a===Ei.RECEIVE_ONLY?i.send.videoCodecs:zg(Se.VIDEO,u,p,c),m=a===Ei.RECEIVE_ONLY?i.send.audioCodecs:zg(Se.AUDIO,u,p,l);for(let g of d.mediaDescriptions)g.attributes.iceUfrag=t.iceUfrag,g.attributes.icePwd=t.icePwd,g.attributes.fingerprints=r.fingerprints,g.attributes.candidates=n,g.attributes.setup=this.setup,g.media.mediaType==="application"&&(g.attributes.sctpPort="5000"),g.media.mediaType==="video"&&(g.media.fmts=f.map(y=>y.payloadType.toString(10)),g.attributes.payloads=f,g.attributes.extmaps=u.videoExtensions),g.media.mediaType==="audio"&&(g.media.fmts=m.map(y=>y.payloadType.toString(10)),g.attributes.payloads=m,g.attributes.extmaps=u.audioExtensions,Lf(g));this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}toString(){return wn.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every(t=>this.hasMid(t)):this.sessionDesc.mediaDescriptions.some(t=>t.attributes.mid===e)}send(e,t,r,n,i){r=r.replace(/ /g,"-");let{ssrcs:o,ssrcGroups:a}=fu(t,this.cname,D("SYNC_GROUP")?r:void 0),s=this.findPreloadMediaDesc(o);if(s){if(_r()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,s.attributes.mid),i&&(i.twcc||i.remb)){let c=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(s,i),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{let c=this.findAvailableMediaIndex(e,o,n),l;return c===-1?(l=this.createOrRecycleSendMedia(e,o,a,"sendonly",n,i),this.updateBundleMids()):(l=Pr(this.sessionDesc.mediaDescriptions[c]),l.attributes.direction="sendonly",l.attributes.ssrcs=o,l.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(l,i)),_r()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,l.attributes.mid),{needExchangeSDP:!0,mid:l.attributes.mid}}}stopSending(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>r.attributes.mid&&e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach(r=>{r.attributes.ssrcs=[]}),this.updateBundleMids()}receive(e,t,r){let n=[];return e.forEach(i=>{let o=i._mediaStreamTrack.kind,a=this.findAvailableRecvMediaIndex(o),s,c=!1;a===-1?(c=!0,s=this.createOrRecycleRecvMedia(i,[],"recvonly",t,r),this.updateBundleMids()):(s=Pr(this.sessionDesc.mediaDescriptions[a]),s.attributes.direction="recvonly"),n.push({mid:s.attributes.mid,needCreateTransceiver:c})}),n}stopReceiving(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach(r=>{r.media.port="0",r.attributes.direction="inactive"}),this.updateBundleMids()}addRemoteCandidate(e){let{foundation:t,protocol:r,address:n,port:i,type:o,relatedAddress:a,relatedPort:s,priority:c}=new RTCIceCandidate(e),l={foundation:t??"",componentId:"1",transport:r??"",priority:c?c+"":"",connectionAddress:n??"",port:i?i+"":"",type:o?o+"":"",relAddr:a??"",relPort:s?s+"":"",extension:{}};this.candidates.some(d=>d.priority===l.priority&&d.connectionAddress===l.connectionAddress&&d.port===l.port)||(this._candidates.push(l),this.sessionDesc.mediaDescriptions.forEach(d=>{d.attributes.candidates=this.candidates}))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,r,n,i){let o=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,s=zg(o,a,this.localCapabilities.send,o===Se.AUDIO?i:n),c=o===Se.VIDEO?a.videoExtensions:a.audioExtensions,l="".concat(++this.currentMidIndex),d={media:{mediaType:o,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(p=>p.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};d=this.mungRecvMediaDsec(d,e);let u=this.findFirstClosedMedia(o);if(u){let p=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[p]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}muteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>pe(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="inactive"})}unmuteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>pe(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="recvonly"})}findAvailableMediaIndex(e,t,r){return this.sessionDesc.mediaDescriptions.findIndex(n=>{let i=n.media.mediaType===e&&n.media.port!=="0"&&(n.attributes.direction==="sendonly"||n.attributes.direction==="sendrecv")&&n.attributes.ssrcs.length===0;if(_r()){if(i){let o=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(o||n.attributes.mid!=="0"&&n.attributes.mid!=="1")||!(!o||o!==n.attributes.mid)}return!1}return i&&n.attributes.mid===r})}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex(t=>{let r=t.media.mediaType===e&&t.media.port!=="0"&&(t.attributes.direction==="recvonly"||t.attributes.direction==="sendrecv");return t.attributes.mid!=="0"&&t.attributes.mid!=="1"&&r})}predictReceivingMids(e){let t=[];for(let r=0;r<e;r++)t.push((this.currentMidIndex+r+1).toString(10));return t}restartICE(e){e=Pr(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd})}createOrRecycleSendMedia(e,t,r,n,i,o){let a=this.rtpCapabilities.send,s=e===Se.VIDEO?a.videoCodecs:a.audioCodecs,c=e===Se.VIDEO?a.videoExtensions:a.audioExtensions;_r()&&(i="".concat(++this.currentMidIndex));let l={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(u=>u.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:r,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:i}};l=this.mungSendMediaDesc(l,o);let d=this.findFirstClosedMedia(e);if(d){let u=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[u]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}mungRecvMediaDsec(e,t,r){let n=Pr(e);return ZD(n),Df(n,t),e2(n,t),QQ(n),lw(n,r,this.localCapabilities.send),n}mungSendMediaDesc(e,t){let r=Pr(e);return lw(r,t,this.localCapabilities.recv),Lf(r),r}updateRecvMedia(e,t){let r=this.sessionDesc.mediaDescriptions.findIndex(n=>n.attributes.mid===e);if(r!==-1){let n=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],t);this.sessionDesc.mediaDescriptions[r]=n}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>e.media.port!=="0").map(e=>e.attributes.mid)}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(t=>{var r;return((r=t.attributes)===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId)===e[0].ssrcId})}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(t=>_r()?t.media.port==="0"&&t.media.mediaType===e:t.media.port==="0")}},eje=["sdp"],Jt;function HB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HB(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var WB=(Jt=class lp extends uQ{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var t,r;return(t=(r=this.peerConnection.getReceivers()[0])===null||r===void 0||(r=r.transport)===null||r===void 0?void 0:r.state)!==null&&t!==void 0?t:null}get localCodecs(){return[]}set isInRestartIce(t){this._isInRestartIce=t}get isInRestartIce(){return this._isInRestartIce}constructor(t,r,n){super(t,r),C(this,"direction",void 0),C(this,"name",void 0),C(this,"store",void 0),C(this,"spec",void 0),C(this,"peerConnection",void 0),C(this,"initialOffer",void 0),C(this,"transport",void 0),C(this,"statsFilter",void 0),C(this,"localCandidateCount",0),C(this,"_isInRestartIce",!1),C(this,"mutex",new zn("P2PConnection-mutex")),C(this,"onLocalCandidate",void 0),C(this,"remoteSDP",void 0),C(this,"pendingCandidates",[]),C(this,"localCapabilities",void 0),C(this,"isReady",!1),C(this,"restartCnt",0),C(this,"curTurnServerIndex",0),this.store=r,this.spec=t,this.peerConnection=new RTCPeerConnection(lp.resolvePCConfiguration(t,r.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=n??Ei.SEND_ONLY,this.name=this.direction===Ei.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=s2(this.peerConnection,D("STATS_UPDATE_INTERVAL"),void 0,_r()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(t){try{let r=await eZ();if(this.localCapabilities=dw(r),t){let{sdp:n}=t,i=XMe(t,eje),o=function(){let d={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},u=q0(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"sendonly"),p={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},m={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Ya(u,d,"videoExtensions",p,f,m),Ya(u,d,"videoCodecs",p,f,m),Ya(u,d,"audioExtensions",p,f,m),Ya(u,d,"audioCodecs",p,f,m),D("RAISE_H264_BASELINE_PRIORITY")){let g=m.videoCodecs.findIndex(y=>y.rtpMap&&y.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&y.fmtp&&y.fmtp.parameters["profile-level-id"]==="42001f");if(g!==-1){let y=m.videoCodecs.findIndex(v=>v.rtpMap&&v.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(y<g){b.debug("raising H264 baseline profile priority");let v=m.videoCodecs[g];m.videoCodecs.splice(g,1),m.videoCodecs.splice(y,0,v)}y!==-1&&D("FILTER_SEND_H264_BASELINE")&&(p.videoCodecs=p.videoCodecs.filter(v=>!(v.rtpMap&&v.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&v.fmtp&&v.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:p,recv:f,sendrecv:m}}({},{},n);this.remoteSDP=new $B({remoteIceParameters:i.iceParameters,remoteDtlsParameters:i.dtlsParameters,candidates:[],remoteRTPCapabilities:o,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;let a=await this.peerConnection.createAnswer();if(!a.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");let s=ad(a.sdp);await this.peerConnection.setLocalDescription(a);let c=await bB({},{},a.sdp);this.localCapabilities=dw(c);let l=this.peerConnection.getTransceivers()[0];return l!=null&&l.receiver&&l.receiver.transport&&this.tryBindTransportEvents(l.receiver.transport),Pl(Pl({},s),{},{sdp:a.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});let n=await this.peerConnection.createOffer();if(!n.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let i=ad(n.sdp);return this.initialOffer=n,Pl(Pl({},i),{},{sdp:n.sdp})}}catch(r){throw new X(I.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);let{sdp:r,iceParameters:n,dtlsParameters:i}=t,o=await bB({},{},r);this.remoteSDP=new $B({remoteIceParameters:n,remoteDtlsParameters:i,candidates:[],remoteRTPCapabilities:o,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});let a=this.peerConnection.getTransceivers()[0];a!=null&&a.sender&&a.sender.transport&&this.tryBindTransportEvents(a.sender.transport)}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}}async addRemoteCandidate(t){try{t&&this.pendingCandidates.push(t),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach(r=>{this.peerConnection.addIceCandidate(r)}),this.pendingCandidates=[])}catch(r){throw new X(I.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(r.toString()))}}send(t,r,n){var i=this;return xs(function*(){let o=yield St(i.mutex.lock("From P2PConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let a=[],s=i.remoteSDP.receive(t,r,n);t.forEach((y,v)=>{if(s[v].needCreateTransceiver){let E=i.peerConnection.addTransceiver(y._mediaStreamTrack,{direction:"sendonly"});a.push(E),y._updateRtpTransceiver(E)}else{let E=i.peerConnection.getTransceivers().find(w=>w.mid===s[v].mid);if(!E)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(s[v].mid));a.push(E),y._updateRtpTransceiver(E)}}),_r()&&D("SIMULCAST")===!0&&(yield St(i.applySimulcastForFirefox(a,t)));let c=s.map(y=>y.mid),l=yield St(i.peerConnection.createOffer()),d=i.mungSendOfferSDP(l.sdp,t,c),u=wn.parse(d),p=c.map(y=>{let v=u.mediaDescriptions.find(E=>E.attributes.mid===y);if(!v)throw new Error("Cannot extract ssrc from mediaDescription.");return XQ(v,D("USE_PUB_RTX"))}),f=a.map((y,v)=>{let E=c[v];return{localSSRC:p[v],id:E}});yield St(i.peerConnection.setLocalDescription({type:"offer",sdp:d}));try{yield f}catch(y){let v=i.remoteSDP.toString();throw yield St(i.peerConnection.setLocalDescription({type:"offer",sdp:d})),yield St(i.peerConnection.setRemoteDescription({type:"answer",sdp:v})),yield St(i.stopSending(c,!0)),y}yield St(i.applySimulcastEncodings(a,t)),yield St(i.applySendEncodings(a,t));let m=i.remoteSDP.toString(),g=i.logSDPExchange(d,"offer","local","send");return g==null||g(m),yield St(i.setRemoteDescription({type:"answer",sdp:m})),a.map((y,v)=>{let E=c[v];return{localSSRC:p[v],id:E}})}catch(a){throw a instanceof X?a:new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(a.toString()))}finally{o()}})()}async stopSending(t,r){let n=r?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let i=this.peerConnection.getTransceivers().filter(c=>t.indexOf(c.mid)!==-1);if(i.length!==t.length)throw new Error("Transceivers' length (".concat(i.length,") doesn't match mids' length (").concat(t.length,") when trying to call P2PConnection.stopSending."));i.map(c=>{var l;c.direction="inactive",(l=c.stop)===null||l===void 0||l.call(c)});let o=await this.peerConnection.createOffer(),a=this.logSDPExchange(o.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(o),this.remoteSDP.stopReceiving(t);let s=this.remoteSDP.toString();a==null||a(s),await this.setRemoteDescription({type:"answer",sdp:s})}catch(i){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}finally{n&&n()}}async receive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{mid:o,needExchangeSDP:a}=this.remoteSDP.send(t,r,n,i);if(a){let c=this.remoteSDP.toString(),l=this.logSDPExchange(c,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:c});let d=await this.peerConnection.createAnswer(),u=this.mungReceiveAnswerSDP(d.sdp,o,t);l==null||l(u||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:u}),b.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP."))}else b.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," no need to exchange SDP."));let s=this.peerConnection.getTransceivers().find(c=>c.mid===o);if(!s||s.mid===null)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,mid:s.mid,transceiver:s}}catch(o){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async mockReceive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{mid:o,needExchangeSDP:a}=this.remoteSDP.send(t,r,n,i);if(a){let s=this.remoteSDP.toString(),c=this.logSDPExchange(s,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:s});let l=await this.peerConnection.createAnswer(),d=this.mungReceiveAnswerSDP(l.sdp,o,t);c==null||c(d||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:d}),b.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP."))}else b.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," no need to exchange SDP."))}catch(o){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===lu.Auto&&(this.store.p2pTransport=lu.SdRtn,_t().supportPCSetConfiguration&&this.peerConnection.setConfiguration(lp.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,_t().supportPCSetConfiguration&&this.peerConnection.setConfiguration(lp.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;let r=await this.peerConnection.createOffer({iceRestart:!0});if(!r.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let{iceParameters:n}=ad(r.sdp);return this.store.descriptionStart(),this.direction===Ei.SEND_ONLY&&await this.peerConnection.setLocalDescription(r),n}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===Ei.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});let r=await this.peerConnection.createAnswer();if(!r.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");let{iceParameters:n}=ad(r.sdp);return await this.peerConnection.setLocalDescription(r),n}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}close(){var t;this.peerConnection.close(),this.peerConnection.onicecandidate=null,(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[r],[t]);this.remoteSDP.updateRecvMedia(t,r);let o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),a==null||a(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new X(I.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(t,r){let n=this.peerConnection.getTransceivers().filter(i=>i.mid===t);n.length===1&&(this.isVP8Simulcast(r)?_r()||await this.applySimulcastEncodings(n,[r]):await this.applySendEncodings(n,[r]))}setStatsRemoteVideoIsReady(t,r){this.statsFilter.setVideoIsReady2(t,r)}async replaceTrack(t,r){let n=this.peerConnection.getTransceivers().find(i=>i.mid===r);n&&await n.sender.replaceTrack(t._mediaStreamTrack)}async getSelectedCandidatePair(){let t=this.peerConnection.getReceivers();if(t.length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair()){let r=t[0].transport.iceTransport,{local:n,remote:i}=r.getSelectedCandidatePair();return{local:Pl(Pl({},_c),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:Pl(Pl({},_c),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t,r;pe(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)&&(this.isReady=!1),(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;this.peerConnection.connectionState==="connected"&&(this.restartCnt=0),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=t=>{if(t.candidate){var r;t.candidate.candidate&&((r=this.onLocalCandidate)===null||r===void 0||r.call(this,t.candidate.toJSON())),this.localCandidateCount+=1}else b.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i={iceServers:[]};var o;return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(oT(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...lp.turnServerConfigToIceServers(t.turnServer.servers,r,n)),D("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...lp.turnServerConfigToIceServers(t.turnServer.serversFromGateway,r,n)),pe(o=[lu.Relay,lu.SdRtn]).call(o,r)&&(i.iceTransportPolicy="relay"),D("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),D("ENABLE_ENCODED_TRANSFORM")&&_t().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),b.debug("P2PConnection p2pTransport is ".concat(r)),i}static turnServerConfigToIceServers(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=[],o=t.filter(s=>s.tcpport);b.debug("P2PConnection turnServers is ".concat(o,", current index is ").concat(n));let a=o.length>n?o[n]:o[0];switch(r){case lu.SdRtn:let s=t.filter(l=>{var d;return pe(d=l.username).call(d,"glb:")&&l.turnServerURL==l.turnServerURL}),c=s.length>n?s[n]:s[0];c&&(i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turn:".concat(Mp(c.turnServerURL),":").concat(c.tcpport,"?transport=udp")}),i.push({username:c.username,credential:c.password,credentialType:"password",urls:"turns:".concat(Mp(c.turnServerURL),":").concat(c.tcpport,"?transport=tcp")}));break;case lu.Relay:a&&(i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=udp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(Mp(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}));break;default:a&&(i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=udp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(Mp(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"stun:".concat(a.turnServerURL,":").concat(a.tcpport)}))}return i}tryBindTransportEvents(t){if(t){this.transport=t,t.onstatechange=()=>{var n;t!=null&&t.state&&((n=this.onDTLSTransportStateChange)===null||n===void 0||n.call(this,t.state))},t.onerror=n=>{var i;(i=this.onDTLSTransportError)===null||i===void 0||i.call(this,"error"in n?n.error:n)};let r=t.iceTransport;r&&(r.onstatechange=()=>{let n=t==null?void 0:t.iceTransport.state;var i;n&&((i=this.onICETransportStateChange)===null||i===void 0||i.call(this,n))},r.getSelectedCandidatePair&&(r.onselectedcandidatepairchange=()=>{if(r.getSelectedCandidatePair()){let{local:n,remote:i}=r.getSelectedCandidatePair();b.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol}),", remote ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(t,r){var n;if(r||(r=this.peerConnection.getSenders().find(d=>d.track===t._mediaStreamTrack)),!r)return b.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(t))return b.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!_t().supportSetRtpSenderParameters)return b.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");let i={},o={};switch(t._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(t._encoderConfig){var a;let{bitrateMax:d,frameRate:u,scaleResolutionDownBy:p}=t._encoderConfig;d&&(o.maxBitrate=1e3*d),pe(a=t._hints).call(a,nr.LOW_STREAM)&&(u&&(o.maxFramerate=uo(u)),p&&p>=1&&(o.scaleResolutionDownBy=p))}if(D("DSCP_TYPE")&&Nd()){var s;let d=D("DSCP_TYPE");pe(s=["very-low","low","medium","high"]).call(s,d)&&(o.networkPriority=d)}let c=r.getParameters(),l=(n=c.encodings)===null||n===void 0?void 0:n[0];_r()&&!l&&(i.encodings=[o]),l&&Object.assign(l,o),Object.assign(c,i),b.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(c.encodings))),await r.setParameters(c)}async applySendEncodings(t,r){try{if(!_t().supportSetRtpSenderParameters||t.length!==r.length)return;for(let n=0;n<t.length;n++){let i=t[n],o=r[n];o instanceof Qt&&!this.isVP8Simulcast(o)&&await this.updateRtpSenderEncodings(o,i.sender)}}catch{b.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,r,n){let i=wn.parse(t);return r.forEach((o,a)=>{let s=n[a],c=i.mediaDescriptions.find(l=>l.attributes.mid===s);c&&(Df(c,o),ZQ(c,o,this.store.codec))}),wn.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var r;(r=this.onFirstAudioReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var r;(r=this.onFirstVideoReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var r;(r=this.onFirstAudioDecoded)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,r,n)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,r,n)},this.statsFilter.onSelectedLocalCandidateChanged=(t,r)=>{var n;(n=this.onSelectedLocalCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,r)=>{var n;(n=this.onSelectedRemoteCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onFirstVideoDecodedTimeout=t=>{var r;(r=this.onFirstVideoDecodedTimeout)===null||r===void 0||r.call(this,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(t,r){if(t.length===r.length)for(let c=0;c<t.length;c++){var n,i,o,a,s;let l=t[c],d=r[c];if(d instanceof Qt&&!pe(n=d._hints).call(n,nr.LOW_STREAM)&&(i=d._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((o=d._encoderConfig)===null||o===void 0?void 0:o.bitrateMax)>200&&(a=d._scalabilityMode)!==null&&a!==void 0&&a.numSpatialLayers&&((s=d._scalabilityMode)===null||s===void 0?void 0:s.numSpatialLayers)>1&&this.store.codec==="vp8"){let u={},p={high:1e3*(d._encoderConfig.bitrateMax-50),medium:5e4};u.encodings=[{rid:"m",active:!0,maxBitrate:p.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:p.high}];let f=l.sender.getParameters();await l.sender.setParameters(Object.assign(f,u))}}}async applySimulcastEncodings(t,r){if(!_r()&&t.length===r.length)for(let n=0;n<t.length;n++){let i=r[n];if(i instanceof Qt&&this.isVP8Simulcast(i)){let o=t[n],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];let c=o.sender.getParameters();await o.sender.setParameters(Object.assign(c,a))}}}isVP8Simulcast(t){var r,n,i,o,a;return!!(t instanceof Qt&&D("SIMULCAST")&&this.store.codec==="vp8"&&!pe(r=t._hints).call(r,nr.LOW_STREAM)&&(n=t._encoderConfig)!==null&&n!==void 0&&n.bitrateMax&&((i=t._encoderConfig)===null||i===void 0?void 0:i.bitrateMax)>200&&(o=t._scalabilityMode)!==null&&o!==void 0&&o.numSpatialLayers&&((a=t._scalabilityMode)===null||a===void 0?void 0:a.numSpatialLayers)>1)}logSDPExchange(t,r,n,i){if(D("SDP_LOGGING"))return b.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(r," SDP during P2PConnection.").concat(i,`
`),t),r==="offer"?o=>{this.logSDPExchange(o,"answer",n==="local"?"remote":"local",i)}:void 0}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(a=>{a.direction="inactive"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(t);let o=this.remoteSDP.toString();i==null||i(o),await this.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(r.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(async a=>{a.direction="sendonly"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(t);let o=this.remoteSDP.toString();i==null||i(o),await this.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(r.toString()))}}async getRemoteSSRC(t,r){var n,i;if(r=(n=r)!==null&&n!==void 0?n:(i=this.currentRemoteDescription)===null||i===void 0?void 0:i.sdp){var o;let a=(o=wn.parse(r).mediaDescriptions.find(s=>s.attributes.mid===t))===null||o===void 0?void 0:o.attributes.ssrcs;return a==null?void 0:a[0].ssrcId}}async setRemoteDescription(t){var r;await this.peerConnection.setRemoteDescription(t),pe(r=["connected","completed"]).call(r,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(t,r,n){let i=wn.parse(t),o=i.mediaDescriptions.find(a=>a.attributes.mid===r);return o&&n===Se.AUDIO&&o.media.mediaType==="audio"&&Lf(o),wn.print(i)}},ve(Jt.prototype,"establish",[Ma],Object.getOwnPropertyDescriptor(Jt.prototype,"establish"),Jt.prototype),ve(Jt.prototype,"connect",[Ma],Object.getOwnPropertyDescriptor(Jt.prototype,"connect"),Jt.prototype),ve(Jt.prototype,"receive",[Ma],Object.getOwnPropertyDescriptor(Jt.prototype,"receive"),Jt.prototype),ve(Jt.prototype,"mockReceive",[Ma],Object.getOwnPropertyDescriptor(Jt.prototype,"mockReceive"),Jt.prototype),ve(Jt.prototype,"stopReceiving",[Ma],Object.getOwnPropertyDescriptor(Jt.prototype,"stopReceiving"),Jt.prototype),ve(Jt.prototype,"restartICE",[Ma],Object.getOwnPropertyDescriptor(Jt.prototype,"restartICE"),Jt.prototype),ve(Jt.prototype,"close",[Ma],Object.getOwnPropertyDescriptor(Jt.prototype,"close"),Jt.prototype),ve(Jt.prototype,"updateEncoderConfig",[Ma],Object.getOwnPropertyDescriptor(Jt.prototype,"updateEncoderConfig"),Jt.prototype),ve(Jt.prototype,"updateSendParameters",[Ma],Object.getOwnPropertyDescriptor(Jt.prototype,"updateSendParameters"),Jt.prototype),ve(Jt.prototype,"replaceTrack",[Ma],Object.getOwnPropertyDescriptor(Jt.prototype,"replaceTrack"),Jt.prototype),ve(Jt.prototype,"muteLocal",[Ma],Object.getOwnPropertyDescriptor(Jt.prototype,"muteLocal"),Jt.prototype),ve(Jt.prototype,"unmuteLocal",[Ma],Object.getOwnPropertyDescriptor(Jt.prototype,"unmuteLocal"),Jt.prototype),Jt);function Ma(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,o=await i.lock("From P2PConnection.".concat(t));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await n.apply(this,s)}finally{o()}},r}function iO(e,t){let r=document.createElement("video"),n=document.createElement("canvas");r.setAttribute("style","display:none"),n.setAttribute("style","display:none"),r.setAttribute("muted",""),r.muted=!0,r.setAttribute("autoplay",""),r.autoplay=!0,r.setAttribute("playsinline",""),n.width=uo(t.width),n.height=uo(t.height);let i=uo(t.framerate||15);document.body.append(r),document.body.append(n);let o=e._mediaStreamTrack;r.srcObject=new MediaStream([o]),r.play();let a=n.getContext("2d");if(!a)throw new G(I.UNEXPECTED_ERROR,"can not get canvas context");let s=_t(),c=n.captureStream(s.supportRequestFrame?0:i).getVideoTracks()[0];c.canvas||(c.canvas=n),n.startCapture=()=>{if(!r)return n.stopCapture&&n.stopCapture();if(r.paused&&r.play(),r.videoHeight>2&&r.videoWidth>2){let d=r.videoWidth,u=r.videoHeight/d,p=n.width*u;Math.abs(p-n.height)>=2&&(b.debug("adjust low stream resolution","".concat(n.width,"x").concat(n.height," -> ").concat(n.width,"x").concat(p)),n.height=p)}a.drawImage(r,0,0,n.width,n.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,r.srcObject=new MediaStream([o]))},n.stopCapture=XD(()=>n.startCapture&&n.startCapture(),i);let l=c.stop;return c.stop=()=>{l.call(c),r&&(r.remove(),r.srcObject=null,r=null),n&&(n.width=0,n.remove(),n.stopCapture&&n.stopCapture(),n.startCapture=void 0,n.stopCapture=void 0,n=null),b.debug("clean low stream renderer")},c}var C_=function(e){return e[e.HEIGHT=2033]="HEIGHT",e[e.FRAME_RATE=2034]="FRAME_RATE",e[e.WIDTH=2035]="WIDTH",e}(C_||{}),rn=function(e){return e[e.FRAME_RATE=2002]="FRAME_RATE",e[e.WIDTH=2003]="WIDTH",e[e.HEIGHT=2004]="HEIGHT",e[e.PACKAGE_LOST=2005]="PACKAGE_LOST",e[e.AVG_ENCODE=2007]="AVG_ENCODE",e[e.NACKS=2009]="NACKS",e[e.PLIS=2010]="PLIS",e[e.FIRS=2011]="FIRS",e[e.BITRATE=2012]="BITRATE",e[e.PACKAGE_RATE=2031]="PACKAGE_RATE",e[e.ADAPTATION=2032]="ADAPTATION",e[e.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",e[e.BANDWIDTH=2061]="BANDWIDTH",e[e.RETRANSMIT=2062]="RETRANSMIT",e[e.TARGET_ENCODED=2064]="TARGET_ENCODED",e[e.TRANSMIT=2066]="TRANSMIT",e[e.FREEZE=2082]="FREEZE",e[e.DISABLED=2095]="DISABLED",e[e.PLAYER_STATUS=2128]="PLAYER_STATUS",e[e.QP_SUM=2143]="QP_SUM",e}(rn||{}),uu=function(e){return e[e.BITRATE=2069]="BITRATE",e[e.PACKAGE_LOST=2070]="PACKAGE_LOST",e[e.PACKAGE_RATE=2071]="PACKAGE_RATE",e[e.HEIGHT=2073]="HEIGHT",e[e.FRAME_RATE=2075]="FRAME_RATE",e[e.WIDTH=2077]="WIDTH",e}(uu||{}),Qn=function(e){return e[e.JITTER=-1]="JITTER",e[e.PACKAGE_LOST=2014]="PACKAGE_LOST",e[e.WIDTH=2018]="WIDTH",e[e.HEIGHT=2019]="HEIGHT",e[e.FRAME_RATE=2020]="FRAME_RATE",e[e.JITTER_BUFFER=2023]="JITTER_BUFFER",e[e.CURRENT_DELAY=2024]="CURRENT_DELAY",e[e.NACKS=2026]="NACKS",e[e.PLIS=2027]="PLIS",e[e.FIRS=2028]="FIRS",e[e.BITRATE=2029]="BITRATE",e[e.PACKAGE_RATE=2078]="PACKAGE_RATE",e[e.FREEZE=2084]="FREEZE",e[e.DISABLED=2101]="DISABLED",e[e.PLAYER_STATUS=2129]="PLAYER_STATUS",e[e.QP_SUM=2144]="QP_SUM",e[e.I_FRAME_DELAY=2149]="I_FRAME_DELAY",e}(Qn||{}),hu=function(e){return e[e.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",e[e.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",e[e.FRAME_RATE_OUTPUT=2155]="FRAME_RATE_OUTPUT",e[e.FREEZE_TIME=2109]="FREEZE_TIME",e[e.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER",e[e.FREEZE_DURATION=2156]="FREEZE_DURATION",e}(hu||{}),hZ=function(e){return e[e.PCM_LEVEL=2104]="PCM_LEVEL",e}(hZ||{}),Vl=function(e){return e[e.PACKAGE_LOST=-1]="PACKAGE_LOST",e[e.LEVEL=2038]="LEVEL",e[e.BITRATE=2039]="BITRATE",e[e.PACKAGE_RATE=2040]="PACKAGE_RATE",e[e.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",e[e.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",e[e.FREEZE=2081]="FREEZE",e[e.DISABLED=2096]="DISABLED",e}(Vl||{}),Ua=function(e){return e[e.BITRATE=2044]="BITRATE",e[e.PACKAGE_LOST=2045]="PACKAGE_LOST",e[e.PACKAGE_RATE=2046]="PACKAGE_RATE",e[e.CURRENT_DELAY=2047]="CURRENT_DELAY",e[e.JITTER_BUFFER=2054]="JITTER_BUFFER",e[e.JITTER=2055]="JITTER",e[e.FREEZE=2083]="FREEZE",e[e.DISABLED=2102]="DISABLED",e[e.PCM_LEVEL=2105]="PCM_LEVEL",e[e.PLAYER_STATUS=2130]="PLAYER_STATUS",e[e.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES",e}(Ua||{}),pZ=function(e){return e[e.FREEZE_TIME=-1]="FREEZE_TIME",e[e.LEVEL=2043]="LEVEL",e}(pZ||{}),ea=function(e){return e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE",e}(ea||{}),Mc=1e3,eu=3;function tt(e,t,r){r!=null&&Number.isFinite(r)&&(e[t]=Math.round(Math.max(0,r)))}function GB(e){let t={[ea.CONN_TYPE]:0,[ea.RTT]:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{let r=e.selectedCandidatePair.localCandidate.relayProtocol;r==="udp"&&(t[ea.CONN_TYPE]=1),r==="tcp"&&(t[ea.CONN_TYPE]=3),r==="tls"&&(t[ea.CONN_TYPE]=4);break}case"srflx":t[ea.CONN_TYPE]=2}return t}function zB(e){let t=0;switch(e){case"none":t=0;break;case"cpu":t=1;break;case"bandwidth":t=2;break;case"other":t=3}return t}var fZ=class extends fr{constructor(e){super(),C(this,"store",void 0),C(this,"uploadWRTCStatsTimer",void 0),C(this,"uploadOutboundDenoiserStatsTimer",void 0),C(this,"uploadExtStatsTimer",void 0),C(this,"uploadExtUsageStatsTimer",void 0),C(this,"uploadInboundExtStatsTimer",void 0),C(this,"requestStats",void 0),C(this,"requestTransportStats",void 0),C(this,"requestLocalMedia",void 0),C(this,"requestRemoteMedia",void 0),C(this,"requestAllTracks",void 0),C(this,"requestVideoIsReady",void 0),C(this,"requestUploadStats",void 0),C(this,"requestUpload",void 0),C(this,"uploadOutboundStarted",!1),C(this,"uploadInboundStarted",!1),C(this,"uploadTransportStarted",!1),C(this,"uploadExtensionUsageStarted",!1),C(this,"lastRecvStats",void 0),C(this,"lastSendStats",void 0),C(this,"lastFullRecvStats",void 0),C(this,"lastFullSendStats",void 0),C(this,"needUploadRenderFreezeTime",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;let t,r;if(this.uploadTransportStarted&&(t=this.requestStats(),this.store.useP2P&&(r=this.requestStats(!0))),!t&&this.uploadOutboundStarted&&(t=this.requestStats()),!r&&this.uploadInboundStarted&&(r=this.requestStats(!0)),t||r){let n={};if(this.uploadTransportStarted&&t){let i=this.getTransportStats(t,r,e);i&&(n.misc=[i])}if(this.uploadOutboundStarted&&t){let i=this.getOutboundStats(t,e?this.lastSendStats:this.lastFullSendStats,e);i&&(n.outbound=[i])}if(this.uploadInboundStarted&&r){let i=this.getInboundStats(r,e?this.lastRecvStats:this.lastFullRecvStats,e);i&&(n.inbound=i)}this.requestUploadStats(n)}this.lastRecvStats=r,this.lastSendStats=t,e||(this.lastFullRecvStats=r,this.lastFullSendStats=t)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let e=1;this.uploadWRTCStatsTimer=window.setInterval(()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(e!==eu),++e===eu+1&&(e=1)},Mc)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,r){if(!this.requestStats)return;if(r)return e.rtt==null?void 0:{addition:{[ea.RTT]:e.rtt,[ea.CONN_TYPE]:void 0}};let n=GB(e);if(this.store.useP2P){if(t){let i=GB(t);n[ea.CONN_TYPE]+=i[ea.CONN_TYPE]<<3}n[ea.CONN_TYPE]+=110}else n[ea.CONN_TYPE]+=100;return{addition:n}}getOutboundStats(e,t,r){if(!this.requestUploadStats||!this.requestLocalMedia)return;let n=this.requestLocalMedia();if(!n||n.length===0)return;let i,o,a;return n.forEach(s=>{let[c,{track:l,ssrcs:d}]=s;switch(c){case ie.LocalVideoLowTrack:case ie.LocalVideoTrack:if(c===ie.LocalVideoTrack){let u=function(m,g,y,v,E){let w=g.videoSend.find(W=>W.ssrc===m);if(!w)return;let S={},{sentFrame:x,inputFrame:O}=w;if(O&&x){let W=O.frameRate,V=x.frameRate;S[rn.FREEZE]=function(Y,Z){let te=!0;return te=!(Y<=5)&&(Y<=10?Z<3:Y<=20?Z<4:Z<5),te}(W,V)?1:0}if(tt(S,rn.QP_SUM,w.qpSumPerFrame),E)return S;switch(x&&(tt(S,rn.HEIGHT,x.height),tt(S,rn.WIDTH,x.width),tt(S,rn.FRAME_RATE,x.frameRate)),S[rn.DISABLED]=v._originMediaStreamTrack&&!v._originMediaStreamTrack.enabled||v._mediaStreamTrack&&!v._mediaStreamTrack.enabled?1:0,w.adaptionChangeReason){case"none":S[rn.ADAPTATION]=0;break;case"cpu":S[rn.ADAPTATION]=1;break;case"bandwidth":S[rn.ADAPTATION]=2;break;case"other":S[rn.ADAPTATION]=3}let L=0;w.adaptionChangeReason&&(L+=zB(w.adaptionChangeReason)),g.qualityLimitationReason&&(L+=zB(g.qualityLimitationReason)<<3),S[rn.ADAPTATION]=L,S[rn.PLAYER_STATUS]=NI[v._player?v._player.videoElementStatus:"uninit"],tt(S,rn.NACKS,w.nacksCount),tt(S,rn.PLIS,w.plisCount),tt(S,rn.FIRS,w.firsCount),tt(S,rn.AVG_ENCODE,w.avgEncodeMs);let j=y&&y.videoSend.find(W=>W.ssrc===m);if(j){let W=E?Mc:Mc*eu;j.timestamp&&w.timestamp&&(W=w.timestamp-j.timestamp),j.packets!=null&&w.packets!=null&&tt(S,rn.PACKAGE_RATE,1e3*(w.packets-j.packets)/W),w.packetsLost!=null&&j.packetsLost!=null&&tt(S,rn.PACKAGE_LOST,w.packetsLost-j.packetsLost),j.bytes!=null&&w.bytes!=null&&tt(S,rn.BITRATE,8*(w.bytes-j.bytes)/W)}return S}(d[0].ssrcId,e,t,l,r),p=r?null:function(m,g,y){let v=g.videoSend.find(L=>L.ssrc===m);if(!v)return null;let E={},w=v.inputFrame,S=w&&w.height||y&&y.videoHeight||0,x=w&&w.width||y&&y.videoWidth||0,O=w&&w.frameRate||0;return tt(E,C_.HEIGHT,S),tt(E,C_.WIDTH,x),tt(E,C_.FRAME_RATE,O),E}(d[0].ssrcId,e,l),f=r?null:function(m){let g={};return tt(g,rn.RETRANSMIT,m.bitrate.retransmit),tt(g,rn.TARGET_ENCODED,m.bitrate.targetEncoded),tt(g,rn.ACTUAL_ENCODED,m.bitrate.actualEncoded),tt(g,rn.TRANSMIT,m.bitrate.transmit),tt(g,rn.BANDWIDTH,m.sendBandwidth),g}(e);o=Object.assign({},u,p,f)}else a=r?void 0:function(u,p,f){let m=p.videoSend.find(v=>v.ssrc===u);if(!m)return;let g={},y=m.sentFrame;if(y&&(tt(g,uu.HEIGHT,y.height),tt(g,uu.WIDTH,y.width),tt(g,uu.FRAME_RATE,y.frameRate)),f){let v=f.videoSend.find(E=>E.ssrc===u);if(v){let E=Mc*eu;v.timestamp&&m.timestamp&&(E=m.timestamp-v.timestamp),v.packets!=null&&m.packets!=null&&tt(g,uu.PACKAGE_RATE,1e3*(m.packets-v.packets)/E),m.packetsLost!=null&&v.packetsLost!=null&&tt(g,uu.PACKAGE_LOST,m.packetsLost-v.packetsLost),v.bytes!=null&&m.bytes!=null&&tt(g,uu.BITRATE,8*(m.bytes-v.bytes)/E)}}return g}(d[0].ssrcId,e,t);break;case ie.LocalAudioTrack:i=r?void 0:function(u,p,f,m){let g=p.audioSend.find(S=>S.ssrc===u);if(!g)return;let y={};y[Vl.DISABLED]=m._originMediaStreamTrack&&!m._originMediaStreamTrack.enabled||m._mediaStreamTrack&&!m._mediaStreamTrack.enabled?1:0;let v=100*m._source.getAccurateVolumeLevel(),E=g.inputLevel;if(E!=null){let S=Math.ceil(50*Math.log10(100*E+1));tt(y,Vl.LEVEL,S)}tt(y,hZ.PCM_LEVEL,v),tt(y,Vl.AEC_RETURN_LOSS,g.aecReturnLoss),tt(y,Vl.AEC_RETURN_LOSS_ENH,g.aecReturnLossEnhancement),y[Vl.FREEZE]=0;let w=f&&f.audioSend.find(S=>S.ssrc===u);if(w){let S=Mc*eu;w.timestamp&&g.timestamp&&(S=g.timestamp-w.timestamp),w.bytes!=null&&g.bytes!=null&&tt(y,Vl.BITRATE,8*(g.bytes-w.bytes)/S),w.packets!=null&&g.packets!=null&&tt(y,Vl.PACKAGE_RATE,1e3*(g.packets-w.packets)/S)}return y}(d[0].ssrcId,e,t,l)}}),{high:o,low:a,audio:i}}getInboundStats(e,t,r){if(!this.requestRemoteMedia)return;let n=this.requestRemoteMedia()||[],i=[];return n.forEach(o=>{let[a,s]=o,c={peer:a.uid};if(s.has(Se.VIDEO)&&a.videoTrack){let l=a._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(a._videoSSRC)||!1,d=a.videoTrack?function(u,p,f,m,g,y,v){var E;let w=p.videoRecv.find(V=>V.ssrc===u);if(!w)return;let S={},{receivedFrame:x,outputFrame:O,decodeFrameRate:L}=w,j=f&&f.videoRecv.find(V=>V.ssrc===u);if(S[Qn.FREEZE]=g&&mZ.isRemoteVideoFreeze(m,w,j)?1:0,tt(S,hu.FRAME_RATE_DECODE,L),tt(S,Qn.QP_SUM,w.qpSumPerFrame),w.framesRateFirefox&&tt(S,Qn.FRAME_RATE,w.framesRateFirefox),x&&tt(S,Qn.FRAME_RATE,x.frameRate),j){let V=p.timestamp-f.timestamp||(v?Mc:eu*Mc);w.packetsLost!=null&&j.packetsLost!=null&&tt(S,Qn.PACKAGE_LOST,w.packetsLost-j.packetsLost),j.bytes!=null&&w.bytes!=null&&tt(S,Qn.BITRATE,8*(w.bytes-j.bytes)/V),j.packets!=null&&w.packets!=null&&tt(S,Qn.PACKAGE_RATE,1e3*(w.packets-j.packets)/V)}if(v)return S;x?(tt(S,Qn.HEIGHT,x.height),tt(S,Qn.WIDTH,x.width)):m&&(tt(S,Qn.HEIGHT,m._videoHeight||0),tt(S,Qn.WIDTH,m._videoWidth||0)),O&&tt(S,hu.FRAME_RATE_OUTPUT,O.frameRate);let W=(E=m._player)===null||E===void 0?void 0:E.rendFrameRate.toFixed(0);if(W&&tt(S,hu.FRAME_RATE_RENDER,+W),tt(S,Qn.JITTER_BUFFER,w.jitterBufferMs),tt(S,Qn.CURRENT_DELAY,w.currentDelayMs),tt(S,Qn.FIRS,w.firsCount),tt(S,Qn.NACKS,w.nacksCount),tt(S,Qn.PLIS,w.plisCount),m){S[Qn.DISABLED]=m._originMediaStreamTrack.enabled&&m._mediaStreamTrack.enabled?0:1;let V=m._player;if(V){let{freezeTimeCounterList:Y,renderFreezeAccTime:Z,videoElementStatus:te}=V;if(Y&&Y.length>0&&tt(S,hu.FREEZE_TIME,Y.splice(0,1)[0]),y&&Vc.visibility==="visible"&&te===si.PLAYING&&_t().supportRequestVideoFrameCallback){let H=Math.min(6e3,Z);V.renderFreezeAccTime=Math.max(0,Z-H),tt(S,hu.FREEZE_TIME_RENDER,H)}if(typeof w.totalFreezesDuration=="number"){let H=j&&j.totalFreezesDuration?w.totalFreezesDuration-j.totalFreezesDuration:w.totalFreezesDuration;tt(S,hu.FREEZE_DURATION,1e3*H)}}}if(S[Qn.PLAYER_STATUS]=NI[m._player?m._player.videoElementStatus:"uninit"],j&&w.totalInterFrameDelay!==void 0&&w.totalSquaredInterFrameDelay!==void 0&&j.totalInterFrameDelay!==void 0&&j.totalSquaredInterFrameDelay!==void 0){let V=w.totalInterFrameDelay-j.totalInterFrameDelay,Y=w.totalSquaredInterFrameDelay-j.totalSquaredInterFrameDelay,Z=w.framesDecodeCount-j.framesDecodeCount,te=V/Z*1e3,H=Math.round(1e3*Math.sqrt((Y-Math.pow(V,2)/Z)/Z));!isNaN(H)&&te+H>Math.max(3*te,te+150)&&(S[Qn.I_FRAME_DELAY]=H)}return S}(a._videoSSRC,e,t,a.videoTrack,l===!0,this.needUploadRenderFreezeTime,r):void 0;d&&(c.video=d)}if(s.has(Se.AUDIO)&&a.audioTrack){let l=a.audioTrack?function(d,u,p,f,m){let g=u.audioRecv.find(j=>j.ssrc===d);if(!g)return;let y={},v=p&&p.audioRecv.find(j=>j.ssrc===d),{receivedFrames:E,droppedFrames:w}=g;var S,x;if(tt(y,Ua.JITTER,g.jitterMs),E!=null&&w!=null&&(y[Ua.FREEZE]=(x=w,(S=E)===0||100*x/S>20?1:0)),v){let j=u.timestamp-p.timestamp||(m?Mc:Mc*eu);g.packets!=null&&v.packets!=null&&tt(y,Ua.PACKAGE_RATE,1e3*(g.packets-v.packets)/j),v.bytes!=null&&g.bytes!=null&&tt(y,Ua.BITRATE,8*(g.bytes-v.bytes)/j),g.packetsLost!=null&&v.packetsLost!=null&&tt(y,Ua.PACKAGE_LOST,g.packetsLost-v.packetsLost)}if(m)return y;let O=100*f._source.getAccurateVolumeLevel(),L=g.outputLevel;if(L!=null){let j=Math.ceil(50*Math.log10(100*L+1));tt(y,pZ.LEVEL,j)}if(tt(y,Ua.PCM_LEVEL,O),f&&(y[Ua.DISABLED]=f._originMediaStreamTrack.enabled&&f._mediaStreamTrack.enabled?0:1),tt(y,Ua.JITTER_BUFFER,g.jitterBufferMs),tt(y,Ua.CURRENT_DELAY,g.jitterBufferMs),y[Ua.PLAYER_STATUS]=NI[Di.getPlayerState(f.getTrackId())],v){let j=g.concealedSamples-v.concealedSamples;j>0&&tt(y,Ua.CONCEALED_SAMPLES,j)}return y}(a._audioSSRC,e,t,a.audioTrack,r):void 0;l&&(c.audio=l)}(c.video||c.audio)&&i.push(c)}),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,i}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval(()=>{if(!this.requestAllTracks||!this.requestUpload)return;let e=(this.requestAllTracks()||[]).find(t=>t instanceof sw);if(e&&e._external.getDenoiserStats){let t=e._external.getDenoiserStats();t&&this.requestUpload(W0.DENOISER_STATS,t)}},2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval(()=>{!this.requestAllTracks||!this.requestUpload||this.requestAllTracks().forEach(e=>{e.getProcessorStats().forEach(t=>{this.requestUpload&&this.requestUpload(t.type,t.stats)})})},2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval(()=>{!this.requestUpload||!this.requestRemoteMedia||(this.requestRemoteMedia()||[]).forEach(e=>{let[t,r]=e;r.has(Se.VIDEO)&&t.videoTrack&&t.videoTrack.getProcessorStats().forEach(n=>{this.requestUpload&&this.requestUpload(n.type,n.stats)}),r.has(Se.AUDIO)&&t.audioTrack&&t.audioTrack.getProcessorStats().forEach(n=>{this.requestUpload&&this.requestUpload(n.type,n.stats)})})},2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);let e=new Map;this.uploadExtUsageStatsTimer=window.setInterval(async()=>{let t=Date.now(),r={connectionInterval:D("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:t},n=[],i=this.requestAllTracks&&this.requestAllTracks()||[];for(let c of i)!c.muted&&c.enabled&&(n=n.concat(await c.getProcessorUsage()));let o=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(let[c,l]of o)l.has(Se.VIDEO)&&c.videoTrack&&(n=n.concat(await c.videoTrack.getProcessorUsage())),l.has(Se.AUDIO)&&c.audioTrack&&(n=n.concat(await c.audioTrack.getProcessorUsage()));if(n.length===0)return;r.details=function(c,l){let d={};for(let{id:m,value:g,level:y,direction:v}of c){var u;let E=(u=l.get(m))!==null&&u!==void 0?u:0,w=g===2?E+D("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:E;var p,f;l.set(m,w),d[m]?(g===2&&(d[m].value=g),y>d[m].level&&(d[m].level=y),v==="remote"&&(d[m].remoteUidCount+=1),d[m].totalTs=(p=l.get(m))!==null&&p!==void 0?p:0):d[m]={value:g,level:y,remoteUidCount:v==="local"?0:1,totalTs:(f=l.get(m))!==null&&f!==void 0?f:0}}return Object.keys(d).map(m=>{let{level:g,value:y,totalTs:v}=d[m];return{id:m,level:g,value:y,totalTs:v}})}(n,e);let a=Date.now(),s=a>t?a:t+1;this.requestUpload&&this.requestUpload(W0.EXTENSION_USAGE_STATS,{usageStats:r,sendTs:s})},D("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}},ql=class{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){C(this,"uid",void 0),C(this,"_uintid",void 0),C(this,"_trust_in_room_",!0),C(this,"_trust_audio_enabled_state_",!0),C(this,"_trust_video_enabled_state_",!0),C(this,"_trust_audio_mute_state_",!0),C(this,"_trust_video_mute_state_",!0),C(this,"_audio_muted_",!1),C(this,"_video_muted_",!1),C(this,"_audio_enabled_",!0),C(this,"_video_enabled_",!0),C(this,"_audio_added_",!1),C(this,"_video_added_",!1),C(this,"_is_pre_created",!1),C(this,"_video_pre_subscribed",!1),C(this,"_audio_pre_subscribed",!1),C(this,"_trust_video_stream_added_state_",!0),C(this,"_trust_audio_stream_added_state_",!0),C(this,"_audioTrack",void 0),C(this,"_videoTrack",void 0),C(this,"_dataChannels",[]),C(this,"_audioSSRC",void 0),C(this,"_videoSSRC",void 0),C(this,"_audioOrtc",void 0),C(this,"_videoOrtc",void 0),C(this,"_cname",void 0),C(this,"_rtxSsrcId",void 0),C(this,"_videoMid",void 0),C(this,"_audioMid",void 0),this.uid=e,this._uintid=t}},vs=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({});function tje(e,t){var r;let n;switch(t){case ie.LocalAudioTrack:n=Nt.Audio;break;case ie.LocalVideoTrack:n=pe(r=e._hints).call(r,nr.SCREEN_TRACK)?Nt.Screen:Nt.High;break;case ie.LocalVideoLowTrack:n=Nt.Low}return n}function oO(e){let t=_t();if(e.some(r=>r._bypassWebAudio))throw new X(I.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new X(I.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function BI(e,t){oO(e);let r=new an;return e.forEach(n=>r.addAudioTrack(n)),r}var KB,qB,YB,XB,JB,QB,ZB,e6,t6,r6,n6,or;function i6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function SE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i6(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var oo=(KB=ps(vs.SEND_ONLY),qB=ps(vs.SEND_ONLY),YB=ps(),XB=ps(vs.RECEIVE_ONLY),JB=ps(vs.RECEIVE_ONLY),QB=ps(vs.RECEIVE_ONLY),ZB=ps(vs.RECEIVE_ONLY),e6=ps(vs.RECEIVE_ONLY),t6=ps(vs.RECEIVE_ONLY),r6=ps(),n6=ps(vs.RECEIVE_ONLY),or=class extends fr{get state(){return this._state}set state(e){let t=this._state;this._state=e,this.emit(Oe.StateChange,t,this._state)}constructor(e,t){super(),C(this,"isPlanB",!1),C(this,"store",void 0),C(this,"statsUploader",void 0),C(this,"sendConnection",void 0),C(this,"recvConnection",void 0),C(this,"localTrackMap",new Map),C(this,"remoteUserMap",new Map),C(this,"localDataChannels",[]),C(this,"pendingLocalTracks",[]),C(this,"pendingRemoteTracks",[]),C(this,"statsCollector",void 0),C(this,"dtlsFailedCount",0),C(this,"sendMutex",new zn("P2PChannel2-send-mutex")),C(this,"recvMutex",new zn("P2PChannel2-recv-mutex")),C(this,"_state",At.Disconnected),C(this,"_restartStates",["disconnected","failed"]),C(this,"reconnectInterval",void 0),C(this,"uploadUnplinkStarted",!1),C(this,"uploadDownlinkStarted",!1),C(this,"uplinkStateUploadInterval",void 0),C(this,"downlinkStatsUploadInterval",void 0),C(this,"handleMuteLocalTrack",async(r,n,i)=>{let o=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==At.Connected)return void i(new X(I.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));let c=this.filterTobeMutedTracks(r);if(c.length===0)return void n();let l=c.find(f=>f[0]==="videoLowTrack");l&&l[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(c.map(f=>{let[,{id:m}]=f;return m}));let d=!1;var a,s;r.trackMediaType==="video"?d=!((a=this.localTrackMap.get(ie.LocalAudioTrack))===null||a===void 0||!a.track._muted):d=((s=this.localTrackMap.get(ie.LocalVideoTrack))===null||s===void 0?void 0:s.id)===void 0;let u=this.createMuteMessage(c);await Wt(this,Oe.RequestMuteLocal,u);let p=r.trackMediaType==="video"?id.MUTE_LOCAL_VIDEO:id.MUTE_LOCAL_AUDIO;await Wt(this,Oe.RequestP2PMuteLocal,{action:p,message:u,isMuteAll:d}),n()}catch(c){i(c)}finally{o()}}),C(this,"handleUnmuteLocalTrack",async(r,n,i)=>{let o=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==At.Connected)return void i(new X(I.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));let a=this.filterTobeUnmutedTracks(r);if(a.length===0)return void n();await this.sendConnection.unmuteLocal(a.map(l=>{let[,{id:d}]=l;return d}));let s=this.createUnmuteMessage(a),c=r.trackMediaType==="video"?id.UNMUTE_LOCAL_VIDEO:id.UNMUTE_LOCAL_AUDIO;await Wt(this,Oe.RequestP2PMuteLocal,{action:c,message:s}),n()}catch(a){i(a)}finally{o()}}),C(this,"handleUpdateVideoEncoder",async(r,n,i)=>{let o=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{let a=this.localTrackMap.get(ie.LocalVideoTrack);if(!this.sendConnection||!a||a.track!==r||this.state!==At.Connected)return void n();let{id:s,track:c}=a;s&&(await this.sendConnection.updateSendParameters(s,c),await this.sendConnection.updateEncoderConfig(s,c),this.emit(Oe.UpdateVideoEncoder,c)),n()}catch(a){i(a)}finally{o()}}),C(this,"handleUpdateVideoSendParameters",async(r,n,i)=>{let o=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{let a=this.localTrackMap.get(ie.LocalVideoTrack);if(!this.sendConnection||!a||a.track!==r||this.state!==At.Connected)return void n();let{id:s,track:c}=a;s&&await this.sendConnection.updateSendParameters(s,c),n()}catch(a){i(a)}finally{o()}}),C(this,"handleReplaceTrack",async(r,n,i,o)=>{let a;b.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(r.getTrackId(),"]")),typeof o=="boolean"&&o||(a=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var s;let l=Array.from(this.localTrackMap.entries()).find(d=>{let[,{track:u}]=d;return r===u});if(!this.sendConnection||!l||l[1].id===void 0||this.state!==At.Connected)return void n();if(await((s=this.sendConnection)===null||s===void 0?void 0:s.replaceTrack(r,l[1].id)),l[0]===ie.LocalVideoTrack&&_t().supportDualStreamEncoding){let d=this.localTrackMap.get(ie.LocalVideoLowTrack);if(d){let u=r._mediaStreamTrack.clone();d.track._originMediaStreamTrack.stop(),d.track._mediaStreamTrack=u,d.track._originMediaStreamTrack=u,await new de((p,f)=>{this.handleReplaceTrack(d.track,p,f,!0)})}}n()}catch(l){i(l)}finally{var c;(c=a)===null||c===void 0||c()}}),C(this,"handleGetLocalVideoStats",r=>{r(this.statsCollector.getLocalVideoTrackStats())}),C(this,"handleGetLocalAudioStats",r=>{r(this.statsCollector.getLocalAudioTrackStats())}),C(this,"handleGetRemoteVideoStats",r=>this.statsCollector.getRemoteVideoTrackStats(r.uid)[r.uid]),C(this,"handleGetRemoteAudioStats",r=>this.statsCollector.getRemoteAudioTrackStats(r.uid)[r.uid]),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new fZ(e),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval(()=>{[this.sendConnection,this.recvConnection].forEach(r=>{r&&(r.iceConnectionState!=="disconnected"&&r.iceConnectionState!=="failed"||this.handleDisconnect(r.direction))})},D("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new X(I.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e){throw new X(I.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let r;try{if(t){this.recvConnection&&(b.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),r=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new WB(e,this.store,Ei.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);let n=await this.recvConnection.establish(t);return{iceParameters:n.iceParameters,dtlsParameters:n.dtlsParameters,sdp:n.sdp}}{this.state=At.New,this.sendConnection&&(b.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),r=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new WB(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);let n=await this.sendConnection.establish();return{iceParameters:n.iceParameters,dtlsParameters:n.dtlsParameters,sdp:n.sdp}}}finally{r&&r()}}async p2pConnect(e){if(!this.sendConnection)throw new X(I.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=At.Connected}async addRemoteCandidate(e,t){if(t===Ei.RECEIVE_ONLY){if(!this.sendConnection)throw new X(I.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new X(I.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,r){var n=this;return xs(function*(){let i=yield St(n.sendMutex.lock("From P2PChannel.publish"));try{if(!n.sendConnection||n.state!==At.Connected){n.throwIfTrackTypeNotMatch(e);let l=e.filter(d=>n.pendingLocalTracks.indexOf(d)===-1);return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(l))}n.store.pubId=n.store.pubId+1,Hn.markPublishStart(n.store.clientId,n.store.pubId);let o=n.filterTobePublishedTracks(e,t,r);if(o.length===0)return void(yield St(n.tryToUnmuteAudio(e)));o.forEach(l=>{let{track:d,type:u}=l,p=Date.now();n.store.publish(d.getTrackId(),u===ie.LocalAudioTrack?"audio":"video",p)}),n.bindLocalTrackEvents(o);let a=yield St(n.sendConnection.send(o.map(l=>{let{track:d}=l;return d}),n.store.codec,n.store.audioCodec)),s=(yield St(a.next())).value,c=n.createGatewayPublishMessage(o,s);try{yield c}catch(l){throw a.throw(l),(l==null?void 0:l.code)===I.WS_ABORT&&o.forEach(d=>{let{track:u}=d;n.pendingLocalTracks.indexOf(u)===-1&&n.pendingLocalTracks.push(u)}),n.unbindLocalTrackEvents(o),l}yield St(a.next()),o.forEach(l=>{let{type:d}=l;n.statsCollector.addLocalStats(d)}),n.statsUploader.startUploadOutboundStats(),n.assignLocalTracks(o,s),o.forEach(l=>{let{track:d,type:u}=l,p=Date.now();n.store.publish(d.getTrackId(),u===ie.LocalAudioTrack?"audio":"video",void 0,p)}),n.startUploadUplinkState()}finally{i()}})()}async unpublish(e){if(!this.sendConnection||this.state!==At.Connected)return void(e.length===0?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter(i=>!pe(e).call(e,i)));let t=this.filterTobeUnpublishedTracks(e);if(t.length===0)return;let r=t.find(i=>i[0]==="videoLowTrack");r&&r[1].track.close();let n=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map(i=>{let[,{id:o}]=i;return o})),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map(i=>{let[o,{track:a}]=i;return{type:o,track:a}})),t.forEach(i=>{let[o]=i;this.statsCollector.removeLocalStats(o)}),this.localTrackMap.size===0&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===At.Connected)return r&&r[1].track.close(),n;e.forEach(i=>{let o=this.pendingLocalTracks.indexOf(i);o!==-1&&this.pendingLocalTracks.splice(o,1)})}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);let e=()=>{let t=[],r=[];Array.from(this.localTrackMap.entries()).forEach(n=>{let[i,{track:o,ssrcs:a}]=n,s={stream_type:tje(o,i),ssrcs:a};o._muted||!o._enabled?t.push(s):r.push(s)}),t.length>0&&t.forEach(n=>{Wt(this,Oe.RequestMuteLocal,[n])}),r.length>0&&r.forEach(n=>{Wt(this,Oe.RequestUnmuteLocal,[n])})};e(),this.uplinkStateUploadInterval=window.setInterval(()=>{e()},3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return xs(function*(){throw new X(I.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")})()}async republish(){this.pendingLocalTracks.length>0&&(b.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await Ln(this,Oe.RequestRePublish,this.pendingLocalTracks),this.emit(Oe.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new X(I.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,r,n){var i;if(!this.recvConnection)throw new X(I.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if((i=this.remoteUserMap.get(e))!==null&&i!==void 0&&i.has(t))return;let{track:o,mid:a,transceiver:s}=await this.recvConnection.receive(t,[{ssrcId:r}],String(e.uid),n);t===Se.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new tf(o,e.uid,e._uintid,this.store),b.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),s&&e._audioTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=r,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new ef(o,e.uid,e._uintid,this.store),b.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),s&&e._videoTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._videoTrack));let c=this.remoteUserMap.get(e);c?c.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();let l=this.pendingRemoteTracks.findIndex(d=>{let{user:u,kind:p}=d;return u.uid===e.uid&&t===p});l!==-1&&(this.pendingRemoteTracks.splice(l,1),this.emit(Oe.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,r,n){if(!this.recvConnection)throw new X(I.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:r}],String(e.uid),n)}async unsubscribe(e,t,r){let n=this.pendingRemoteTracks.filter(o=>{let{user:a,kind:s}=o;return t!==void 0?a.uid===e.uid&&t===s:a.uid===e.uid});if(n.forEach(o=>{let a=this.pendingRemoteTracks.indexOf(o);this.pendingRemoteTracks.splice(a,1)}),this.recvConnection||r||n.forEach(o=>{let{kind:a}=o;var s;if(a===Se.AUDIO)(s=e._audioTrack)===null||s===void 0||s._destroy(),e._audioTrack=void 0;else if(a===Se.VIDEO){var c;(c=e._videoTrack)===null||c===void 0||c._destroy(),e._videoTrack=void 0}}),!this.recvConnection)return;let i=this.filterTobeUnSubscribedTracks(e,t);i.length!==0&&(await this.recvConnection.stopReceiving(i.map(o=>{let[,{id:a}]=o;return a})),this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),i.forEach(o=>{let[a,{kind:s}]=o;var c,l;if(s===Se.VIDEO&&a._videoSSRC&&((c=this.recvConnection)===null||c===void 0||c.setStatsRemoteVideoIsReady(a._videoSSRC,!1)),s===Se.VIDEO)this.unbindRemoteTrackEvents(a._videoTrack),r||((l=a._videoTrack)===null||l===void 0||l._destroy(),a._videoTrack=void 0);else if(s===Se.AUDIO){var d;this.unbindRemoteTrackEvents(a._audioTrack),!r&&((d=a._audioTrack)===null||d===void 0||d._destroy(),a._audioTrack=void 0)}}),i.forEach(o=>{let[,{kind:a}]=o;Wt(this,Oe.RequestP2PMuteRemote,a)}))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let e=()=>Array.from(this.remoteUserMap.entries()).forEach(t=>{let[,r]=t;[Se.VIDEO,Se.AUDIO].forEach(n=>{r.has(n)?Wt(this,Oe.RequestP2PUnmuteRemote,n):Wt(this,Oe.RequestP2PMuteRemote,n)})});e(),this.downlinkStatsUploadInterval=window.setInterval(()=>{e()},3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new X(I.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new X(I.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new X(I.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new X(I.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;let r=this.remoteUserMap.get(e);if(!r)return void b.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!r.get(t))return void b.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));let n=t===Se.VIDEO?e._videoSSRC:e._audioSSRC;n!==void 0&&this.recvConnection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;let r=this.remoteUserMap.get(e);if(!r)return void b.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."));r.get(t)||b.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."))}getAllTracks(e){let t=this.localTrackMap.get(ie.LocalAudioTrack);if((t==null?void 0:t.track)instanceof an){let r=t.track;return Array.from(this.localTrackMap.entries()).filter(n=>{let[i]=n;return i!==ie.LocalAudioTrack}).filter(n=>{let[i]=n;return!(e&&i===ie.LocalVideoLowTrack)}).map(n=>{let[,{track:i}]=n;return i}).concat(r.trackList)}return Array.from(this.localTrackMap.entries()).filter(r=>{let[n]=r;return!(e&&n===ie.LocalVideoLowTrack)}).map(r=>{let[,{track:n}]=r;return n})}reportPublishEvent(e,t,r,n,i){if(e){let a=this.localTrackMap.get(ie.LocalAudioTrack),s=n?this.localTrackMap.get(ie.LocalVideoLowTrack):this.localTrackMap.get(ie.LocalVideoTrack);be.publish(this.store.sessionId,{eventElapse:Hn.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.track.getTrackLabel(),videoName:s==null?void 0:s.track.getTrackLabel(),screenshare:(s==null?void 0:s.track._hints.indexOf(nr.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;r||(r=[]);let a=r.find(c=>c instanceof vr),s=n?(o=this.localTrackMap.get(ie.LocalVideoTrack))===null||o===void 0?void 0:o.track:r.find(c=>c instanceof Qt);be.publish(this.store.sessionId,{eventElapse:Hn.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.getTrackLabel(),videoName:s==null?void 0:s.getTrackLabel(),screenshare:(s==null?void 0:s._hints.indexOf(nr.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,r,n){let i=n===Se.VIDEO?r._videoSSRC:r._audioSSRC;i&&be.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===Se.VIDEO,audio:n===Se.AUDIO,peerid:r.uid,subscribeRequestid:n===Se.VIDEO?r._videoSSRC:r._audioSSRC,p2pid:this.store.p2pId,eventElapse:Hn.measureFromSubscribeStart(this.store.clientId,i)})}reset(){b.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new zn("P2PChannel2-send-mutex"),this.sendMutex=new zn("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();let e=this.localTrackMap.get(ie.LocalAudioTrack);if((e==null?void 0:e.track)instanceof an){if(e.track.trackList.length>0){let t=e.track;e.track.trackList.forEach(r=>{t.removeAudioTrack(r)})}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=At.Disconnected}getStats(e){var t,r;return e?(r=this.recvConnection)===null||r===void 0?void 0:r.getStats():(t=this.sendConnection)===null||t===void 0?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return((t=this.recvConnection)===null||t===void 0?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){let e=this.localTrackMap.get(ie.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){let e=this.localTrackMap.get(ie.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){let t=this.localTrackMap.get(e);return t&&t.track instanceof Qt||t&&t.track instanceof vr?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}getRemoteMedia(e){var t;let r=Array.from(So(t=this.remoteUserMap).call(t)).find(n=>n.uid===e);return r?{audioTrack:r.audioTrack,audioSSRC:r._audioSSRC,videoTrack:r.videoTrack,videoSSRC:r._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(r=>{let[n]=r;return{uid:n.uid,level:n.audioTrack?100*n.audioTrack._source.getAccurateVolumeLevel():0}}),t=this.localTrackMap.get(ie.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Gy(e).call(e,(r,n)=>r.level-n.level),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(b.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=At.Reconnecting,D("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t]=e;var r;t._videoTrack&&t._videoTrack._player&&((r=t._videoTrack._player.getVideoElement())===null||r===void 0||r.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())}),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(e=>{var t;let[r,{track:n}]=e;switch(r){case ie.LocalVideoTrack:pe(t=n._hints).call(t,nr.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case ie.LocalAudioTrack:n instanceof an?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);case ie.LocalVideoLowTrack:}}),this.emit(Oe.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;Array.from(So(r).call(r)).forEach(n=>{this.setPendingRemoteMedia(t,n)}),this.emit(Oe.MediaReconnectStart,t.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),b.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(let r of this.pendingRemoteTracks){let{user:n,kind:i}=r;if((e instanceof ql?e.uid:e)===n.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let r,n;if(e===Ei.SEND_ONLY){if(!this.sendConnection)throw new X(I.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");r=await this.sendMutex.lock("From P2PChannel.restartICE"),n=this.sendConnection}else{if(!this.recvConnection)throw new X(I.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");r=await this.recvMutex.lock("From P2PChannel.restartICE"),n=this.recvConnection}try{if(t){let i=await n.restartICE(t);return n.isInRestartIce=!1,i}{let i=await n.restartICE();if(i){let o=await Ln(this,Oe.RequestP2PRestartICE,{direction:Ei.RECEIVE_ONLY,iceParameter:i});await n.restartICE(o),n.isInRestartIce=!1}}}finally{r()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;let e=this.sendConnection.getStats(),t=this.localTrackMap.get(ie.LocalVideoTrack),r=this.localTrackMap.get(ie.LocalAudioTrack),n=e.videoSend.find(f=>{var m;return f.ssrc===(t==null||(m=t.ssrcs)===null||m===void 0?void 0:m[0].ssrcId)}),i=e.audioSend.find(f=>{var m;return f.ssrc===(r==null||(m=r.ssrcs)===null||m===void 0?void 0:m[0].ssrcId)});if(!n||!i)return 1;let o=oa(this,Oe.NeedSignalRTT),a=n?n.rttMs:void 0,s=i?i.rttMs:void 0,c=a&&s?(a+s)/2:a||s,l=(c&&o?(c+o)/2:c||o)||0,d=100*e.sendPacketLossRate*.7/50+.3*l/1500,u=d<.17?1:d<.36?2:d<.59?3:d<.1?4:5,p=t==null?void 0:t.track;if(p&&p._encoderConfig&&p._hints.indexOf(nr.SCREEN_TRACK)===-1){let f=p._encoderConfig.bitrateMax,m=e.bitrate.actualEncoded;if(f&&m){let g=(1e3*f-m)/(1e3*f);return cQ[g<.15?0:g<.3?1:g<.45?2:g<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;let e=this.recvConnection.getStats(),t=0;return Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n]=r,i=n._audioSSRC,o=n._videoSSRC,a=e.audioRecv.find(m=>m.ssrc===i),s=e.videoRecv.find(m=>m.ssrc===o);if(!a&&!s)return void(t+=1);let c=oa(this,Oe.NeedSignalRTT),l=e.rtt,d=(l&&c?(l+c)/2:l||c)||0,u=a?a.jitterMs:void 0,p=e.recvPacketLossRate,f=.7*p*100/50+.3*d/1500;u&&(f=.6*p*100/50+.2*d/1500+.2*u/400),t+=f<.1?1:f<.17?2:f<.36?3:f<.59?4:5}),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new de((t,r)=>{this.handleMuteLocalTrack(e,t,r)})}filterTobePublishedTracks(e,t,r){let n=[],i=_t(),o=this.getAllTracks();e=Dp(e=e.filter(c=>o.indexOf(c)===-1));let a=!1,s=!1;for(let c of e){if(c instanceof Qt&&(this.localTrackMap.has(ie.LocalVideoTrack)||a?new X(I.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:c,type:ie.LocalVideoTrack}),a=!0),t)){let l=this.getLowVideoTrack(c,r);n.push({track:l,type:ie.LocalVideoLowTrack})}if(c instanceof vr){let l=this.localTrackMap.get(ie.LocalAudioTrack);if(l){if(!(l.track instanceof an))throw new X(I.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new X(I.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");l.track.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0)}else if(s){let d=n.find(u=>{let{type:p}=u;return p===ie.LocalAudioTrack});if(!(d.track instanceof an))throw new X(I.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new X(I.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");d.track.addAudioTrack(c)}else{if(!i.webAudioMediaStreamDest||c instanceof an||c._bypassWebAudio)n.push({track:c,type:ie.LocalAudioTrack});else{let d=new an;d.addAudioTrack(c),n.push({track:d,type:ie.LocalAudioTrack})}s=!0}}}return n}filterTobeUnpublishedTracks(e){let t=[],r=this.getAllTracks();e=Dp(e=e.filter(n=>r.indexOf(n)!==-1));for(let n of e){if(n instanceof vr){let i=this.localTrackMap.get(ie.LocalAudioTrack);if(!i)continue;i.track instanceof an?(i.track.removeAudioTrack(n),this.unbindLocalAudioTrackEvents(n),i.track.trackList.length===0&&(t.push([ie.LocalAudioTrack,i]),i.track.close())):t.push([ie.LocalAudioTrack,i])}if(n instanceof Qt){let i=this.localTrackMap.get(ie.LocalVideoTrack);if(!i)continue;t.push([ie.LocalVideoTrack,i]);let o=this.localTrackMap.get(ie.LocalVideoLowTrack);o&&t.push([ie.LocalVideoLowTrack,o])}}return t}bindLocalTrackEvents(e){e.forEach(t=>{let{track:r,type:n}=t;switch(n){case ie.LocalVideoTrack:r.addListener(fe.GET_STATS,this.handleGetLocalVideoStats),r.addListener(fe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(fe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(fe.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.addListener(fe.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.addListener(fe.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.addListener(fe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(fe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case ie.LocalAudioTrack:this.bindLocalAudioTrackEvents(r);case ie.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){e instanceof an?e.trackList.forEach(r=>{r.addListener(fe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(fe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(fe.GET_STATS,this.handleGetLocalAudioStats),r.addListener(fe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(fe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(fe.GET_STATS,this.handleGetLocalAudioStats),e.addListener(fe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(fe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(fe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(fe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(fe.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(t=>{let[r,{track:n}]=t;return{track:n,type:r}})),e.forEach(t=>{let{track:r,type:n}=t;switch(n){case ie.LocalVideoTrack:r.off(fe.GET_STATS,this.handleGetLocalVideoStats),r.off(fe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(fe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(fe.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.off(fe.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.off(fe.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.off(fe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(fe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case ie.LocalAudioTrack:this.unbindLocalAudioTrackEvents(r);case ie.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof an?e.trackList.forEach(t=>{t.off(fe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(fe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(fe.GET_STATS,this.handleGetLocalAudioStats),t.off(fe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(fe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(fe.GET_STATS,this.handleGetLocalAudioStats),e.off(fe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(fe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(fe.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(fe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(fe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof ef&&t.addListener(fe.GET_STATS,r=>{r(this.handleGetRemoteVideoStats(e))}),t instanceof tf&&t.addListener(fe.GET_STATS,r=>{r(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(fe.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;r.has(Se.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),r.has(Se.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)})}createGatewayPublishMessage(e,t){return e.map((r,n)=>{var i;let o,{track:a,type:s}=r;switch(s){case ie.LocalAudioTrack:o=Nt.Audio;break;case ie.LocalVideoTrack:o=pe(i=a._hints).call(i,nr.SCREEN_TRACK)?Nt.Screen:Nt.High;break;case ie.LocalVideoLowTrack:o=Nt.Low}return{kind:s===ie.LocalAudioTrack?Se.AUDIO:Se.VIDEO,stream_type:o,mid:t[n].id,ssrcs:t[n].localSSRC,isMuted:a.muted||!a.enabled}})}createGatewayUnpublishMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case ie.LocalVideoTrack:n=pe(r=o._hints).call(r,nr.SCREEN_TRACK)?Nt.Screen:Nt.High;break;case ie.LocalAudioTrack:n=Nt.Audio;break;case ie.LocalVideoLowTrack:n=Nt.Low}return{stream_type:n,ssrcs:a,mid:s}})}assignLocalTracks(e,t){e.forEach((r,n)=>{let{track:i,type:o}=r;this.localTrackMap.set(o,{track:i,id:t[n].id,ssrcs:t[n].localSSRC})})}withdrawLocalTracks(e){e.forEach(t=>{let[r]=t;this.localTrackMap.delete(r)})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var r;b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(Oe.PeerConnectionStateChange,t),t!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),t==="connected"&&(e.isInRestartIce=!1),pe(r=this._restartStates).call(r,t)&&!e.isInRestartIce&&(t==="disconnected"&&await Tn(800),e.iceConnectionState!=="disconnected"&&e.iceConnectionState!=="failed"||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=t=>{t!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(t,")")),be.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:t,tag:Er.TRACER}).onSuccess(),this.emit(Oe.IceConnectionStateChange,t)},e.onICETransportStateChange=t=>{b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(t,")"))},e.onDTLSTransportStateChange=t=>{b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(t,")"))},e.onDTLSTransportError=t=>{b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(t,")"))},e.onFirstAudioDecoded=t=>{var r;let n=Array.from(So(r=this.remoteUserMap).call(r)).find(o=>o._audioSSRC===t);var i;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),(i=n.audioTrack)===null||i===void 0||i.emit(Zp.FIRST_FRAME_DECODED),be.firstRemoteFrame(this.store.sessionId,vn.FIRST_AUDIO_DECODE,hr.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:Hn.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=t=>{var r;let n=Array.from(So(r=this.remoteUserMap).call(r)).find(i=>i._audioSSRC===t);n&&be.firstRemoteFrame(this.store.sessionId,vn.FIRST_AUDIO_RECEIVED,hr.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:Hn.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(t,r,n)=>{this.reportVideoFirstFrameDecoded(t,r,n)},e.onFirstVideoReceived=t=>{var r;let n=Array.from(So(r=this.remoteUserMap).call(r)).find(i=>i._videoSSRC===t);n&&be.firstRemoteFrame(this.store.sessionId,vn.FIRST_VIDEO_RECEIVED,hr.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:Hn.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(t,r)=>{let n=t.candidateType==="relay",i=r.candidateType==="relay";r.candidateType!=="unknown"&&n===i||this.emit(Oe.ConnectionTypeChange,n),b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(od(r))," -> ").concat(JSON.stringify(od(t)),")"))},e.onSelectedRemoteCandidateChanged=(t,r)=>{b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(od(r))," -> ").concat(JSON.stringify(od(t)),")"))},e.onFirstVideoDecodedTimeout=t=>{this.reportVideoFirstFrameDecoded(t,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(Oe.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){let t=e===Ei.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,b.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===Ei.SEND_ONLY?this.restartICE(e):Ln(this,Oe.RequestP2PRestartICE,{direction:Ei.SEND_ONLY}))}filterTobeMutedTracks(e){let t=[];if(this.getAllTracks().indexOf(e)===-1)return t;let r=this.localTrackMap.get(ie.LocalAudioTrack);if(e instanceof vr&&(r==null?void 0:r.track)instanceof an)return r.track.isActive||t.push([ie.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(n&&(t.push(n),n[0]===ie.LocalVideoTrack)){let i=this.localTrackMap.get(ie.LocalVideoLowTrack);i&&t.push([ie.LocalVideoLowTrack,i])}return t}filterTobeUnmutedTracks(e){let t=[],r=this.localTrackMap.get(ie.LocalAudioTrack);if(e instanceof vr&&(r==null?void 0:r.track)instanceof an)return r.track.isActive&&t.push([ie.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(n)if(n[0]===ie.LocalVideoTrack){t.push(n);let i=this.localTrackMap.get(ie.LocalVideoLowTrack);i&&t.push([ie.LocalVideoLowTrack,i])}else t.push(n);return t}createMuteMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case ie.LocalAudioTrack:n=Nt.Audio;break;case ie.LocalVideoTrack:n=pe(r=o._hints).call(r,nr.SCREEN_TRACK)?Nt.Screen:Nt.High;break;case ie.LocalVideoLowTrack:n=Nt.Low}return{stream_type:n,ssrcs:a,mid:s}})}createUnmuteMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case ie.LocalAudioTrack:n=Nt.Audio;break;case ie.LocalVideoTrack:n=pe(r=o._hints).call(r,nr.SCREEN_TRACK)?Nt.Screen:Nt.High;break;case ie.LocalVideoLowTrack:n=Nt.Low}return{stream_type:n,ssrcs:a,mid:s}})}filterTobeUnSubscribedTracks(e,t){let r=[],n=this.remoteUserMap.get(e);if(!n)return r;if(t){let i=n.get(t);if(!i)return r;r.push([e,{kind:t,id:i}])}else Array.from(n.entries()).forEach(i=>{let[o,a]=i;r.push([e,{kind:o,id:a}])});return r}createUnsubscribeMessage(e){let t=[];return e.forEach(r=>{let[n,{kind:i,id:o}]=r;switch(i){case Se.VIDEO:return void(n._videoSSRC&&t.push({stream_type:Se.VIDEO,ssrcId:n._videoSSRC}));case Se.AUDIO:return void(n._audioSSRC&&t.push({stream_type:Se.AUDIO,ssrcId:n._audioSSRC}))}}),t}withdrawRemoteTracks(e){e.forEach(t=>{let[r,{kind:n}]=t,i=this.remoteUserMap.get(r);i&&(i.delete(n),Array.from(i.entries()).length===0&&this.remoteUserMap.delete(r))})}async updateBitrateLimit(e){let t=this.localTrackMap.get(ie.LocalVideoTrack),r=this.localTrackMap.get(ie.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),r&&e.low_stream_uplink&&await r.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){let e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return e!=="connected"&&t!=="connected"}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof vr){let r=this.filterTobeUnmutedTracks(e[t]);if(r.length===0)continue;let n=this.createUnmuteMessage(r);return void await Wt(this,Oe.RequestUnmuteLocal,n)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter(e=>{let[,{ssrcs:t}]=e;return!!t}),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!((t=this.recvConnection)===null||t===void 0||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Oe.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(Oe.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Tn(FD(this.dtlsFailedCount,Vr)),this.emit(Oe.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(ie.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof Qt)}throwIfTrackTypeNotMatch(e){if(e.filter(t=>t instanceof Qt).length>1)throw new X(I.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(t=>t instanceof vr).length>1&&(e.some(t=>t instanceof vr&&t._bypassWebAudio)||!_t().webAudioMediaStreamDest))throw new X(I.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(let t of e){if(t instanceof Qt&&this.pendingLocalTracks.some(r=>r instanceof Qt))throw new X(I.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof vr&&this.pendingLocalTracks.some(r=>r instanceof vr)&&(!_t().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some(r=>r instanceof vr&&r._bypassWebAudio)))throw new X(I.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){let r=!D("DISABLE_DUAL_STREAM_USE_ENCODING")&&_t().supportDualStreamEncoding,n=SE(SE({},{width:160,height:120,framerate:15,bitrate:50}),t),i;i=r?e._mediaStreamTrack.clone():iO(e,n);let o=qt(8,"track-low-"),a=new Qt(i,SE(SE({},r&&{scaleResolutionDownBy:WN(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,o);return a.on(Vu.TRANSCEIVER_UPDATED,s=>{e._updateRtpTransceiver(s,Pf.LOW_STREAM)}),a._hints.push(nr.LOW_STREAM),e.addListener(fe.NEED_CLOSE,()=>{a.close()}),a}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,r,n){var i;let o=Array.from(So(i=this.remoteUserMap).call(i)).find(a=>a._videoSSRC===e);if(o){n||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());let a=this.store.keyMetrics,s=a.subscribe.find(c=>c.userId===o.uid&&c.type==="video");be.firstRemoteVideoDecode(this.store.sessionId,vn.FIRST_VIDEO_DECODE,hr.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:r,subscribeElapse:Hn.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:a.requestAPEnd||0,apStart:a.requestAPStart||0,joinGwEnd:a.joinGatewayEnd||0,joinGwStart:a.joinGatewayStart||0,pcEnd:a.peerConnectionEnd||0,pcStart:a.peerConnectionStart||0,subscriberEnd:(s==null?void 0:s.subscribeEnd)||0,subscriberStart:(s==null?void 0:s.subscribeStart)||0,videoAddNotify:(s==null?void 0:s.streamAdded)||0,state:n?1:0})}}async remoteMediaSsrcChanged(e,t,r){if(!this.recvConnection)return!1;let n=this.remoteUserMap.get(e);if(!n)return!1;let i=n.get(t);if(!i)return!1;let o=await this.recvConnection.getRemoteSSRC(i);return o!==void 0&&o!==r}isPreSubScribe(e){return!1}async publishDataChannel(e){throw new X(I.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new X(I.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new X(I.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new X(I.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new X(I.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new X(I.NOT_SUPPORTED)}async preConnect(e){throw new X(I.NOT_SUPPORTED)}getEstablishParams(){throw new X(I.NOT_SUPPORTED)}async reSubscribe(e){throw new X(I.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new X(I.NOT_SUPPORTED)}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(e=>{let[t,{track:r}]=e;t===ie.LocalVideoLowTrack?r._updateRtpTransceiver(void 0,Pf.LOW_STREAM):r._updateRtpTransceiver(void 0)})}},ve(or.prototype,"p2pConnect",[KB],Object.getOwnPropertyDescriptor(or.prototype,"p2pConnect"),or.prototype),ve(or.prototype,"unpublish",[qB],Object.getOwnPropertyDescriptor(or.prototype,"unpublish"),or.prototype),ve(or.prototype,"unpublishLowStream",[YB],Object.getOwnPropertyDescriptor(or.prototype,"unpublishLowStream"),or.prototype),ve(or.prototype,"subscribe",[XB],Object.getOwnPropertyDescriptor(or.prototype,"subscribe"),or.prototype),ve(or.prototype,"mockSubscribe",[JB],Object.getOwnPropertyDescriptor(or.prototype,"mockSubscribe"),or.prototype),ve(or.prototype,"unsubscribe",[QB],Object.getOwnPropertyDescriptor(or.prototype,"unsubscribe"),or.prototype),ve(or.prototype,"muteRemote",[ZB],Object.getOwnPropertyDescriptor(or.prototype,"muteRemote"),or.prototype),ve(or.prototype,"unmuteRemote",[e6],Object.getOwnPropertyDescriptor(or.prototype,"unmuteRemote"),or.prototype),ve(or.prototype,"hasRemoteMediaWithLock",[t6],Object.getOwnPropertyDescriptor(or.prototype,"hasRemoteMediaWithLock"),or.prototype),ve(or.prototype,"disconnectForReconnect",[r6],Object.getOwnPropertyDescriptor(or.prototype,"disconnectForReconnect"),or.prototype),ve(or.prototype,"remoteMediaSsrcChanged",[n6],Object.getOwnPropertyDescriptor(or.prototype,"remoteMediaSsrcChanged"),or.prototype),or);function ps(e){return function(t,r,n){let i=t[r];if(typeof i!="function")throw new Error("Cannot use mutex on object property.");return n.value=async function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];switch(e){case vs.SEND_ONLY:{let c=await this.sendMutex.lock("From P2PChannel2.".concat(r));try{return await i.apply(this,a)}finally{c()}}case vs.RECEIVE_ONLY:{let c=await this.recvMutex.lock("From P2PChannel2.".concat(r));try{return await i.apply(this,a)}finally{c()}}default:{let c=await this.sendMutex.lock("From P2PChannel2.".concat(r)),l=await this.recvMutex.lock("From P2PChannel2.".concat(r));try{return await i.apply(this,a)}finally{c(),l()}}}},n}}function o6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o6(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var mZ=class aO{constructor(t){C(this,"store",void 0),C(this,"onStatsException",void 0),C(this,"onUploadPublishDuration",void 0),C(this,"onStatsChanged",void 0),C(this,"localStats",new Map),C(this,"remoteStats",new Map),C(this,"updateStatsInterval",void 0),C(this,"trafficStats",void 0),C(this,"trafficStatsPeerList",[]),C(this,"uplinkStats",void 0),C(this,"exceptionMonitor",void 0),C(this,"p2pChannel",void 0),C(this,"scalabilityMode",BN.L1T1),C(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=t,this.exceptionMonitor=new jMe,this.exceptionMonitor.on("exception",(r,n,i)=>{this.onStatsException&&this.onStatsException(r,n,i)})}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(ie.LocalAudioTrack)||tu({},KN)}getLocalVideoTrackStats(){return this.localStats.get(ie.LocalVideoTrack)||tu({},qN)}getRemoteAudioTrackStats(t){let r=(o,a)=>{if(!this.trafficStats)return a;let s=this.trafficStats.peer_delay.find(c=>c.peer_uid===o);return s&&(a.publishDuration=s.B_ppad+(Date.now()-this.trafficStats.timestamp)),a},n={};if(t){var i;let o=(i=this.remoteStats.get(t))===null||i===void 0?void 0:i.audioStats;o&&(n[t]=r(t,o))}else Array.from(this.remoteStats.entries()).forEach(o=>{let[a,{audioStats:s}]=o;s&&(n[a]=r(a,s))});return n}getRemoteNetworkQualityStats(t){let r={};if(t){var n;let i=(n=this.remoteStats.get(t))===null||n===void 0?void 0:n.networkStats;i&&(r[t]=i)}else Array.from(this.remoteStats.entries()).forEach(i=>{let[o,{networkStats:a}]=i;a&&(r[o]=a)});return r}getRemoteVideoTrackStats(t){let r=(o,a)=>{if(!this.trafficStats)return a;let s=this.trafficStats.peer_delay.find(c=>c.peer_uid===o);return s&&(a.publishDuration=s.B_ppvd+(Date.now()-this.trafficStats.timestamp)),a},n={};if(t){var i;let o=(i=this.remoteStats.get(t))===null||i===void 0?void 0:i.videoStats;o&&(n[t]=r(t,o))}else Array.from(this.remoteStats.entries()).forEach(o=>{let[a,{videoStats:s}]=o;s&&(n[a]=r(a,s))});return n}getRTCStats(){let t=0,r=0,n=0,i=0,o=this.localStats.get(ie.LocalAudioTrack);o&&(t+=o.sendBytes,r+=o.sendBitrate);let a=this.localStats.get(ie.LocalVideoTrack);a&&(t+=a.sendBytes,r+=a.sendBitrate);let s=this.localStats.get(ie.LocalVideoLowTrack);s&&(t+=s.sendBytes,r+=s.sendBitrate),this.remoteStats.forEach(l=>{let{audioStats:d,videoStats:u}=l;d&&(n+=d.receiveBytes,i+=d.receiveBitrate),u&&(n+=u.receiveBytes,i+=u.receiveBitrate)});let c=1;return this.trafficStats&&(c+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:c,SendBitrate:r,SendBytes:t,RecvBytes:n,RecvBitrate:i,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(t){this.localStats.set(t,void 0)}removeLocalStats(t){t?this.localStats.delete(t):this.localStats.clear()}addRemoteStats(t){this.remoteStats.set(t,{})}removeRemoteStats(t){t?this.remoteStats.delete(t):this.remoteStats.clear()}addP2PChannel(t){this.p2pChannel=t}updateTrafficStats(t){t.peer_delay=t.peer_delay.filter(r=>r.B_ppad!==void 0||r.B_ppvd!==void 0),t.peer_delay.filter(r=>this.trafficStatsPeerList.indexOf(r.peer_uid)===-1).forEach(r=>{var n;let i=(n=this.p2pChannel)===null||n===void 0?void 0:n.getRemoteMedia(r.peer_uid),o=i!=null&&i.videoSSRC?Hn.measureFromSubscribeStart(this.store.clientId,i.videoSSRC):0,a=i!=null&&i.audioSSRC?Hn.measureFromSubscribeStart(this.store.clientId,i.audioSSRC):0;r.B_ppad!==void 0&&r.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(r.peer_uid,r.B_ppad,r.B_ppvd,o>a?o:a),this.trafficStatsPeerList.push(r.peer_uid))}),this.trafficStats=t}updateUplinkStats(t){this.uplinkStats&&this.uplinkStats.B_fir!==t.B_fir&&b.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(t.B_fir)),this.uplinkStats=t}static isRemoteVideoFreeze(t,r,n){if(!t)return!1;let i=!!n&&r.framesDecodeFreezeTime>n.framesDecodeFreezeTime,o=!n||r.framesDecodeCount>n.framesDecodeCount;return i||!o}static isRemoteAudioFreeze(t){return!!t&&t._isFreeze()}isLocalVideoFreeze(t){return!(!t.inputFrame||!t.sentFrame)&&t.inputFrame.frameRate>5&&t.sentFrame.frameRate<3}updateLocalStats(t){Array.from(this.localStats.entries()).forEach(r=>{let[n,i]=r;switch(n){case ie.LocalVideoTrack:case ie.LocalVideoLowTrack:{let a=i,s=tu({},qN),c=t.getStats(),l=t.getLocalMedia(n);if(c){let d=c.videoSend.find(u=>u.ssrc===(l==null?void 0:l.ssrcs[0].ssrcId));if(d){let u=t.getLocalVideoSize(),p=t.getEncoderConfig(ie.LocalVideoTrack);d.codec!=="H264"&&d.codec!=="H265"&&d.codec!=="VP8"&&d.codec!=="VP9"&&d.codec!=="AV1X"&&d.codec!=="AV1"||(s.codecType=d.codec),s.sendBytes=d.bytes,s.sendBitrate=a?8*Math.max(0,s.sendBytes-a.sendBytes):0,d.inputFrame?(s.captureFrameRate=d.inputFrame.frameRate,s.captureResolutionHeight=d.inputFrame.height,s.captureResolutionWidth=d.inputFrame.width):u&&(s.captureResolutionWidth=u.width,s.captureResolutionHeight=u.height),d.sentFrame?(s.sendFrameRate=d.sentFrame.frameRate,s.sendResolutionHeight=d.sentFrame.height,s.sendResolutionWidth=d.sentFrame.width):u&&(s.sendResolutionWidth=u.width,s.sendResolutionHeight=u.height),d.avgEncodeMs&&(s.encodeDelay=d.avgEncodeMs),p&&p.bitrateMax&&(s.targetSendBitrate=1e3*p.bitrateMax),s.sendPackets=d.packets,s.sendPacketsLost=d.packetsLost,s.sendJitterMs=d.jitterMs,s.sendRttMs=d.rttMs,s.totalDuration=a?a.totalDuration+1:1,s.totalFreezeTime=a?a.totalFreezeTime:0,this.isLocalVideoFreeze(d)&&(s.totalFreezeTime+=1),d.scalabilityMode&&this.scalabilityMode!==d.scalabilityMode&&(b.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(d.scalabilityMode)),this.scalabilityMode=d.scalabilityMode)}this.trafficStats&&(s.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var o;this.localStats.set(n,s),((a==null?void 0:a.sendResolutionWidth)!==s.sendResolutionWidth||(a==null?void 0:a.sendResolutionHeight)!==s.sendResolutionHeight)&&((o=this.onStatsChanged)===null||o===void 0||o.call(this,"resolution",{width:s.sendResolutionWidth,height:s.sendResolutionHeight})),s&&l&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,l.track,s);break}case ie.LocalAudioTrack:{let a=i,s=tu({},KN),c=t.getStats(),l=t.getLocalMedia(n);if(c){let d=c.audioSend.find(u=>u.ssrc===(l==null?void 0:l.ssrcs[0].ssrcId));if(d){if(d.codec!=="opus"&&d.codec!=="aac"&&d.codec!=="PCMU"&&d.codec!=="PCMA"&&d.codec!=="G722"||(s.codecType=d.codec),d.inputLevel)s.sendVolumeLevel=Math.round(32767*d.inputLevel);else{let u=t.getLocalAudioVolume();u&&(s.sendVolumeLevel=Math.round(32767*u))}s.sendBytes=d.bytes,s.sendPackets=d.packets,s.sendPacketsLost=d.packetsLost,s.sendJitterMs=d.jitterMs,s.sendRttMs=d.rttMs,s.sendBitrate=a?8*Math.max(0,s.sendBytes-a.sendBytes):0}}this.trafficStats&&(s.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(ie.LocalAudioTrack,s),s&&l&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,l.track,s);break}}})}updateRemoteStats(t){Array.from(this.remoteStats.entries()).forEach(r=>{var n,i;let[o,{videoStats:a,audioStats:s,videoPcStats:c}]=r,l=s,d=a,u=c,p=tu({},TQ),f=tu({},CQ),m=tu({},fMe),{audioTrack:g,videoTrack:y,audioSSRC:v,videoSSRC:E}=t.getRemoteMedia(o),w;w=t instanceof oo?t.getStats(!0):t.getStats();let S=(n=w)===null||n===void 0?void 0:n.audioRecv.find(L=>L.ssrc===v),x=(i=w)===null||i===void 0?void 0:i.videoRecv.find(L=>L.ssrc===E),O=this.trafficStats&&this.trafficStats.peer_delay.find(L=>L.peer_uid===o);if(S&&(S.codec!=="opus"&&S.codec!=="aac"&&S.codec!=="PCMU"&&S.codec!=="PCMA"&&S.codec!=="G722"||(p.codecType=S.codec),S.outputLevel?p.receiveLevel=Math.round(32767*S.outputLevel):g&&(p.receiveLevel=Math.round(32767*g.getVolumeLevel())),p.receiveBytes=S.bytes,p.receivePackets=S.packets,p.receivePacketsLost=S.packetsLost,p.receivePacketsDiscarded=S.packetsDiscarded,p.packetLossRate=p.receivePacketsLost/(p.receivePackets+p.receivePacketsLost),p.receiveBitrate=l?8*Math.max(0,p.receiveBytes-l.receiveBytes):0,p.totalDuration=l?l.totalDuration+1:1,p.totalFreezeTime=l?l.totalFreezeTime:0,p.freezeRate=p.totalFreezeTime/p.totalDuration,p.receiveDelay=S.jitterBufferMs,p.totalDuration>10&&aO.isRemoteAudioFreeze(g)&&(p.totalFreezeTime+=1)),x){x.codec!=="H264"&&x.codec!=="H265"&&x.codec!=="VP8"&&x.codec!=="VP9"&&x.codec!=="AV1X"&&x.codec!=="AV1"||(f.codecType=x.codec),f.receiveBytes=x.bytes,f.receiveBitrate=d?8*Math.max(0,f.receiveBytes-d.receiveBytes):0,f.decodeFrameRate=x.decodeFrameRate<0?0:x.decodeFrameRate,f.renderFrameRate=x.decodeFrameRate<0?0:x.decodeFrameRate,x.outputFrame&&(f.renderFrameRate=x.outputFrame.frameRate),x.receivedFrame?(f.receiveFrameRate=x.receivedFrame.frameRate,f.receiveResolutionHeight=x.receivedFrame.height,f.receiveResolutionWidth=x.receivedFrame.width):y&&(f.receiveResolutionHeight=y._videoHeight||0,f.receiveResolutionWidth=y._videoWidth||0),x.framesRateFirefox!==void 0&&(f.receiveFrameRate=Math.round(x.framesRateFirefox)),f.receivePackets=x.packets,f.receivePacketsLost=x.packetsLost,f.packetLossRate=f.receivePacketsLost/(f.receivePackets+f.receivePacketsLost),f.totalDuration=d?d.totalDuration+1:1,f.totalFreezeTime=d?d.totalFreezeTime:0,f.receiveDelay=x.jitterBufferMs||0;let L=!!E&&t.getRemoteVideoIsReady(E);y&&L&&aO.isRemoteVideoFreeze(y,x,u)&&(f.totalFreezeTime+=1),f.freezeRate=f.totalFreezeTime/f.totalDuration}O&&(p.end2EndDelay=O.B_ad,f.end2EndDelay=O.B_vd,p.transportDelay=O.B_ed,f.transportDelay=O.B_ed,p.currentPacketLossRate=O.B_ealr4/100,f.currentPacketLossRate=O.B_evlr4/100,m.uplinkNetworkQuality=O.B_punq?O.B_punq:0,m.downlinkNetworkQuality=O.B_pdnq?O.B_pdnq:0),this.remoteStats.set(o,{audioStats:p,videoStats:f,videoPcStats:x,networkStats:m}),g&&this.exceptionMonitor.setRemoteAudioStats(g,p),y&&this.exceptionMonitor.setRemoteVideoStats(y,f)})}},gZ=class{constructor(){C(this,"destChannelMediaInfos",new Map),C(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){sF(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){sF(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){lT(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}};function a6(e){if(!(e instanceof gZ))return new G(I.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();let t=e.getSrcChannelMediaInfo(),r=e.getDestChannelMediaInfo();if(!t)return new G(I.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(r.size===0)return new G(I.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}function s6(e){var t={},r=!1;function n(i,o){return r=!0,{done:!1,value:new o2(o=new rO(function(a){a(e[i](o))}),1)}}return t[Op!==void 0&&SJ||"@@iterator"]=function(){return this},t.next=function(i){return r?(r=!1,i):n("next",i)},typeof e.throw=="function"&&(t.throw=function(i){if(r)throw r=!1,i;return n("throw",i)}),typeof e.return=="function"&&(t.return=function(i){return r?(r=!1,i):n("return",i)}),t}var rje=Nr(sZ);function c6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function l6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c6(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Ht;function d6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function TE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d6(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var eg=(Ht=class Eg extends hQ{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map(t=>t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").filter(t=>{var r;return pe(r=Object.keys(cT)).call(r,t)}))]}constructor(t,r){super(t,r),C(this,"store",void 0),C(this,"peerConnection",void 0),C(this,"remoteSDP",void 0),C(this,"initialOffer",void 0),C(this,"statsFilter",void 0),C(this,"useRTX",!1),C(this,"localCapabilities",void 0),C(this,"localCandidateCount",0),C(this,"allCandidatesReceived",!1),C(this,"establishPromise",void 0),C(this,"mutex",new zn("P2PConnection-mutex")),this.store=r,this.peerConnection=new RTCPeerConnection(Eg.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=s2(this.peerConnection,D("STATS_UPDATE_INTERVAL"),void 0,_r()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{let t=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!t.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let r=ad(t.sdp),n=q0(t.sdp,{filterRTX:!this.useRTX,filterVideoFec:D("FILTER_VIDEO_FEC"),filterAudioFec:D("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=n,this.initialOffer=t,TE(TE({},r),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:n},offerSDP:t.sdp})}catch(t){throw new X(I.GET_LOCAL_CONNECTION_PARAMS_FAILED,t.toString())}}async updateRemoteConnect(){}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(n){C(this,"sessionDesc",void 0),C(this,"localCapabilities",void 0),C(this,"rtpCapabilities",void 0),C(this,"candidates",void 0),C(this,"iceParameters",void 0),C(this,"dtlsParameters",void 0),C(this,"setup",void 0),C(this,"currentMidIndex",void 0),C(this,"cname",void 0),n=Pr(n);let{iceParameters:i,dtlsParameters:o,candidates:a,rtpCapabilities:s,setup:c,localCapabilities:l,sdkCodec:d,cname:u}=n,p=wn.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=s,this.candidates=a,this.iceParameters=i,this.dtlsParameters=o,this.setup=c,this.localCapabilities=l,this.cname=u;for(let f=0;f<p.mediaDescriptions.length;f++){let m=p.mediaDescriptions[f];if(m.attributes.iceUfrag=i.iceUfrag,m.attributes.icePwd=i.icePwd,m.attributes.fingerprints=o.fingerprints,m.attributes.candidates=a,m.attributes.setup=c,m.media.mediaType==="video"){m.media.fmts=s.videoCodecs.map(y=>y.payloadType.toString(10));let g=s.videoCodecs.filter(y=>{var v,E;return(v=y.rtpMap)===null||v===void 0?void 0:pe(E=v.encodingName.toLowerCase()).call(E,d)});g.length===0&&(g=s.videoCodecs),m.attributes.payloads=g,m.attributes.extmaps=s.videoExtensions}m.media.mediaType==="audio"&&(m.media.fmts=s.audioCodecs.map(g=>g.payloadType.toString(10)),m.attributes.payloads=s.audioCodecs,m.attributes.extmaps=s.audioExtensions),p.mediaDescriptions[f]=this.mungMediaDesc(m)}this.sessionDesc=p,this.currentMidIndex=p.mediaDescriptions.length-1}toString(){return wn.print(this.sessionDesc)}send(n,i,o){let{ssrcs:a,ssrcGroups:s}=fu(i,this.cname),c=this.sessionDesc.mediaDescriptions.find(u=>n===Se.VIDEO?u.media.mediaType==="video":u.media.mediaType==="audio"),l=a[0].attributes.label,d=a[0].attributes.mslabel;return c.attributes.ssrcs=c.attributes.ssrcs.concat(a),c.attributes.ssrcGroups=c.attributes.ssrcGroups.concat(s),{id:l,mslabel:d}}batchSend(n){return n.map(i=>{let{kind:o,ssrcMsg:a}=i;return this.send(o,a,void 0)})}stopSending(n){this.sessionDesc.mediaDescriptions.forEach(i=>{let o=[],a=[],s=[];i.attributes.ssrcs.forEach(c=>{pe(n).call(n,c.attributes.label||"")?s.push(c):o.push(c)}),i.attributes.ssrcGroups.forEach(c=>{var l;pe(l=s.map(d=>d.ssrcId)).call(l,c.ssrcIds[0])||a.push(c)}),i.attributes.ssrcs=o,i.attributes.ssrcGroups=a})}mute(n){let i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(n){let i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}receive(n,i,o){n.forEach((a,s)=>{let c=a._mediaStreamTrack,l=this.sessionDesc.mediaDescriptions.findIndex(u=>u.attributes.mid===c.kind),d=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[l],a);this.sessionDesc.mediaDescriptions[l]=d})}stopReceiving(n){}updateCandidates(n){n===lo.TCP?this.candidates.forEach(i=>{this.candidates.findIndex(o=>o.transport==="tcp"&&o.connectionAddress===i.connectionAddress&&o.port===i.port)===-1&&this.candidates.push(l6(l6({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this.candidates=this.candidates.filter(i=>i.transport!=="tcp");for(let i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(n){n=Pr(n),this.iceParameters=n,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=n.iceUfrag,i.attributes.icePwd=n.icePwd})}predictReceivingMids(n){let i=[];for(let o=0;o<n;o++)i.push((this.currentMidIndex+o+1).toString(10));return i}mungRecvMediaDsec(n,i){let o=Pr(n);return Df(o,i),e2(o,i),o}updateRecvMedia(n,i){let o=this.sessionDesc.mediaDescriptions.findIndex(a=>a.attributes.mid===n);if(o!==-1){let a=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[o],i);this.sessionDesc.mediaDescriptions[o]=a}}bumpMid(n){this.currentMidIndex+=n}updateTrackLabel(n,i,o){let a=this.sessionDesc.mediaDescriptions.find(c=>n===Se.VIDEO?c.attributes.mid==="video":c.attributes.mid==="audio");if(a){let c=a.attributes.ssrcs.find(l=>l.attributes.label===i);var s;c&&(c.attributes.label=o,(s=c.attributes.msid)===null||s===void 0||s.replace(i,o))}}mungMediaDesc(n){let i=Pr(n);return ZD(i),function(o){let a=o.attributes.extmaps.find(s=>s.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");a&&o.attributes.extmaps.splice(o.attributes.extmaps.indexOf(a),1),o.attributes.payloads.forEach(s=>{let c=s.rtcpFeedbacks.findIndex(l=>l.type==="transport-cc");c!==-1&&s.rtcpFeedbacks.splice(c,1)})}(i),i}getSSRC(n){for(let i of this.sessionDesc.mediaDescriptions)for(let o of i.attributes.ssrcs)if(o.attributes.label===n)return[o]}}(TE(TE({},t),{},{rtpCapabilities:t.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));let r=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}}async updateRemoteRTPCapabilities(t,r){throw new X(I.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}getPreMedia(t){}send(t,r){var n=this;return xs(function*(){let i=yield St(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let o=t.map(p=>n.peerConnection.addTrack(p._mediaStreamTrack)),a=yield St(n.peerConnection.createOffer()),s=wn.parse(a.sdp),c=t.map(p=>{let f=p._mediaStreamTrack,m=s.mediaDescriptions.find(g=>g.attributes.mid===f.kind);if(!m)throw new Error("Cannot extract ssrc from mediaDescription.");return function(g,y,v){let E=g.attributes.ssrcs.filter(S=>S.attributes.label===y),w=g.attributes.ssrcGroups;if(E.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(w&&E.length>1){let S=w.find(x=>x.ssrcIds.indexOf(E[0].ssrcId)!==-1);return S?[{ssrcId:S.ssrcIds[0],rtx:v?S.ssrcIds[1]:void 0}]:[{ssrcId:E[0].ssrcId}]}return[{ssrcId:E[0].ssrcId}]}(m,f.id,n.useRTX)}),l;try{l=yield c}catch(p){throw o.forEach(f=>{Dn()&&f.replaceTrack(null),n.peerConnection.removeTrack(f)}),p}let d=n.mungSendOfferSDP(a.sdp,t);n.remoteSDP.receive(t,r,l);let u=n.remoteSDP.toString();return yield St(n.peerConnection.setLocalDescription({type:"offer",sdp:d})),yield St(n.applySendEncodings(o,t)),yield St(n.peerConnection.setRemoteDescription({type:"answer",sdp:u})),t.map((p,f)=>{let m=p._mediaStreamTrack.id;return{localSSRC:c[f],id:m}})}catch(o){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(o.toString()))}finally{i()}})()}async stopSending(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let r=this.peerConnection.getSenders().filter(o=>{var a;return t.indexOf(((a=o.track)===null||a===void 0?void 0:a.id)||"")!==-1});if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");r.map(o=>{Dn()&&o.replaceTrack(null),this.peerConnection.removeTrack(o)});let n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(t);let i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(r.toString()))}}async receive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{id:o,mslabel:a}=this.remoteSDP.send(t,r,i),s=new de((d,u)=>{let p=setTimeout(()=>{u(new Error("Cannot receive track, id: ".concat(o)))},1e4),f=m=>{let g=vt();if((g.name==="Safari"&&Number(g.version)===11||bi())&&m.track.id!==o&&m.streams[0].id===a){var y;let v=m.streams[0].getTracks()[0];return(y=this.remoteSDP)===null||y===void 0||y.updateTrackLabel(t,o,m.track.id),this.peerConnection.removeEventListener("track",f),clearTimeout(p),void d(v)}if(m.track.id===o)return this.peerConnection.removeEventListener("track",f),clearTimeout(p),void d(m.track)};this.peerConnection.addEventListener("track",f)}),c=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:c});let l=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(l),{track:await s,id:o}}catch(o){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(t);let r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}async muteRemote(t){}async unmuteRemote(t){}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let r=this.peerConnection.getSenders().filter(n=>{var i;return t.indexOf(((i=n.track)===null||i===void 0?void 0:i.id)||"")!==-1});if(r.length!==t.length)throw new Error("sender' length doesn't match mids' length.");r.map(n=>{if(Dn()&&n.track)n.track.enabled=!1;else{let i=n.getParameters();i.encodings.forEach(o=>o.active=!1),n.setParameters(i)}})}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(r.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let r=this.peerConnection.getSenders().filter(o=>{var a;return t.indexOf(((a=o.track)===null||a===void 0?void 0:a.id)||"")!==-1});if(r.length!==t.length)throw new Error("Senders' length doesn't match mids' length.");r.map(async o=>{if(Dn()&&o.track)o.track.enabled=!0;else{let a=o.getParameters();a.encodings.forEach(s=>s.active=!0),await o.setParameters(a)}});let n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);let i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(r.toString()))}}restartICE(t){var r=this;return xs(function*(){let n=yield St(r.mutex.lock("From P2PConnection.restartICE"));try{if(!r.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(_t().supportPCSetConfiguration){let c=r.peerConnection.getConfiguration(),l=t===lo.RELAY?"relay":"all";c.iceTransportPolicy!==l&&(b.debug("[".concat(r.store.clientId,"] restartICE change iceTransportPolicy from [").concat(c.iceTransportPolicy,"] to [").concat(l,"]")),c.iceTransportPolicy=l,r.peerConnection.setConfiguration(c))}else if(t===lo.RELAY)return;t!==lo.RELAY&&r.remoteSDP.updateCandidates(t);let i=yield St(r.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let o=ad(i.sdp),{remoteIceParameters:a}=yield o.iceParameters;r.remoteSDP.restartICE(a);let s=r.remoteSDP.toString();yield St(r.peerConnection.setLocalDescription(i)),yield St(r.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(i){b.warning("[".concat(r.store.clientId,"] restart ICE failed, abort operation"),i)}finally{n()}})()}close(){var t;this.peerConnection.close(),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[r]);this.remoteSDP.updateRecvMedia(r._mediaStreamTrack.kind,r);let o=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new X(I.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(t,r){let n=this.peerConnection.getSenders().filter(i=>{var o;return((o=i.track)===null||o===void 0?void 0:o.id)===t});n.length===1&&await this.applySendEncodings(n,[r])}setStatsRemoteVideoIsReady(t,r){this.statsFilter.setVideoIsReady2(t,r)}async replaceTrack(t,r){let n=this.peerConnection.getSenders().find(i=>{var o;return((o=i.track)===null||o===void 0?void 0:o.id)===r});n&&await n.replaceTrack(t._mediaStreamTrack)}createDataChannels(t,r){throw new X(I.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(t){throw new X(I.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t;(t=this.onICEConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=t=>{t.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,b.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,b.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},D("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){let r={iceServers:[],sdpSemantics:"plan-b"};return t.iceServers?r.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(oT(t.turnServer.servers)?r.iceServers=t.turnServer.servers:(r.iceServers&&r.iceServers.push(...Eg.turnServerConfigToIceServers(t.turnServer.servers)),D("USE_TURN_SERVER_OF_GATEWAY")&&r.iceServers&&t.turnServer.serversFromGateway&&r.iceServers.push(...Eg.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(n=>{n.forceturn&&(r.iceTransportPolicy="relay")}))),r}static turnServerConfigToIceServers(t){let r=[];return t.forEach(n=>{n.security?n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turns:".concat(n.turnServerURL,":").concat(n.tcpport,"?transport=tcp")}):(n.udpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.udpport,"?transport=udp")}),n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.tcpport,"?transport=tcp")}))}),r}async updateRtpSenderEncodings(t,r){var n;if(r||(r=this.peerConnection.getSenders().find(l=>{var d;return((d=l.track)===null||d===void 0?void 0:d.id)===t._mediaStreamTrack.id})),!r)return b.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(!_t().supportSetRtpSenderParameters)return b.warn("Browser not support set rtp-sender parameters");let i={},o={};if(t instanceof Qt)switch(t._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(D("DSCP_TYPE")&&Nd()){var a;let l=D("DSCP_TYPE");pe(a=["very-low","low","medium","high"]).call(a,l)&&(o.networkPriority=l)}let s=r.getParameters(),c=(n=s.encodings)===null||n===void 0?void 0:n[0];c&&Object.assign(c,o),Object.assign(s,i),b.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(s.encodings))),await r.setParameters(s)}async applySendEncodings(t,r){try{if(!_t().supportSetRtpSenderParameters||t.length!==r.length)return;for(let n=0;n<t.length;n++){let i=t[n],o=r[n];i&&o&&await this.updateRtpSenderEncodings(o,i)}}catch{b.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,r){let n=wn.parse(t);return r.forEach((i,o)=>{let a=i._mediaStreamTrack,s=n.mediaDescriptions.find(c=>c.attributes.mid===a.kind);s&&Df(s,i)}),wn.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var r;(r=this.onFirstAudioReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var r;(r=this.onFirstVideoReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var r;(r=this.onFirstAudioDecoded)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,r,n)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,r,n)},this.statsFilter.onSelectedLocalCandidateChanged=(t,r)=>{var n;(n=this.onSelectedLocalCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,r)=>{var n;(n=this.onSelectedRemoteCandidateChanged)===null||n===void 0||n.call(this,t,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");let r=this.remoteSDP.batchSend(t).map((o,a)=>{let{id:s,mslabel:c}=o,{kind:l}=t[a];return new de((d,u)=>{let p=setTimeout(()=>{u(new Error("Cannot receive track, id: ".concat(s)))},1e4),f=m=>{let g=vt();if(g.name==="Safari"&&Number(g.version)===11&&m.track.id!==s&&m.streams[0].id===c){var y;let v=m.streams[0].getTracks()[0];return(y=this.remoteSDP)===null||y===void 0||y.updateTrackLabel(l,s,m.track.id),this.peerConnection.removeEventListener("track",f),clearTimeout(p),void d({track:v,id:s})}if(m.track.id===s)return this.peerConnection.removeEventListener("track",f),clearTimeout(p),void d({track:m.track,id:s})};this.peerConnection.addEventListener("track",f)})}),n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});let i=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(i),await de.all(r)}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(r.toString()))}}async getRemoteSSRC(t){if(!this.remoteSDP)return;let r=this.remoteSDP.getSSRC(t);return r==null?void 0:r[0].ssrcId}setConfiguration(t){if(_t().supportPCSetConfiguration){let r=Eg.resolvePCConfiguration(t);this.peerConnection.setConfiguration(r)}}},ve(Ht.prototype,"connect",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"connect"),Ht.prototype),ve(Ht.prototype,"stopSending",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"stopSending"),Ht.prototype),ve(Ht.prototype,"receive",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"receive"),Ht.prototype),ve(Ht.prototype,"stopReceiving",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"stopReceiving"),Ht.prototype),ve(Ht.prototype,"muteRemote",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"muteRemote"),Ht.prototype),ve(Ht.prototype,"unmuteRemote",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"unmuteRemote"),Ht.prototype),ve(Ht.prototype,"muteLocal",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"muteLocal"),Ht.prototype),ve(Ht.prototype,"unmuteLocal",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"unmuteLocal"),Ht.prototype),ve(Ht.prototype,"close",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"close"),Ht.prototype),ve(Ht.prototype,"updateEncoderConfig",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"updateEncoderConfig"),Ht.prototype),ve(Ht.prototype,"updateSendParameters",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"updateSendParameters"),Ht.prototype),ve(Ht.prototype,"replaceTrack",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"replaceTrack"),Ht.prototype),ve(Ht.prototype,"getRemoteSSRC",[qo],Object.getOwnPropertyDescriptor(Ht.prototype,"getRemoteSSRC"),Ht.prototype),Ht);function qo(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,o=await i.lock("Locking from P2PConnection.".concat(t));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await n.apply(this,s)}finally{o()}},r}function u6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Dl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u6(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var tg="9",h6=4e4,nje=class{get localCapabilities(){return Pr(this._localCapabilities)}get rtpCapabilities(){return Pr(this._rtpCapabilities)}get candidates(){return Pr(this._candidates)}get iceParameters(){return Pr(this._iceParameters)}get dtlsParameters(){return Pr(this._dtlsParameters)}constructor(e){C(this,"sessionDesc",void 0),C(this,"_localCapabilities",void 0),C(this,"_rtpCapabilities",void 0),C(this,"_candidates",void 0),C(this,"_iceParameters",void 0),C(this,"_dtlsParameters",void 0),C(this,"setup",void 0),C(this,"currentMidIndex",void 0),C(this,"cname",void 0),C(this,"firefoxSsrcMidMap",new Map),e=Pr(e);let{iceParameters:t,dtlsParameters:r,candidates:n,rtpCapabilities:i,setup:o,localCapabilities:a,cname:s}=e;this._rtpCapabilities=i,this._candidates=n,this._iceParameters=t,this._dtlsParameters=r,this._localCapabilities=a,this.setup=o,this.cname=s,this.sessionDesc=this.updateRemoteRTPCapabilities(i),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}preloadRemoteMedia(e){let t=this.candidates,r=this.dtlsParameters,n=this.iceParameters,i=this.rtpCapabilities.send,o=this.sessionDesc.mediaDescriptions.length-1;for(let a=1;a<e;a++){let s=2*a+2e4,c=2*a+h6,{ssrcs:l,ssrcGroups:d}=fu([{ssrcId:s}],this.cname),{ssrcs:u,ssrcGroups:p}=fu([{ssrcId:c,rtx:D("USE_SUB_RTX")?c+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:tg,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map(f=>f.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:r.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:u,ssrcGroups:p,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:tg,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map(f=>f.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:r.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:d,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++o)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return wn.print(this.sessionDesc)}send(e,t,r,n){let{ssrcs:i,ssrcGroups:o}=fu(t,this.cname,D("SYNC_GROUP")?r:void 0),a=this.findPreloadMediaDesc(i);if(a){if(_r()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,a.attributes.mid),n&&(n.twcc||n.remb)){let s=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[s]=this.mungSendMediaDesc(a,n),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{let s=this.findAvailableMediaIndex(e,i),c;return s===-1||s===1&&(Dn()||function(){let l=vt();return!(l.name!==Ot.CHROME||!l.osVersion)&&Number(l.version)<=90}())||s===0&&D("USE_SUB_RTX")||U3()?(c=this.createOrRecycleSendMedia(e,i,o,"sendonly",n),this.updateBundleMids()):(c=Pr(this.sessionDesc.mediaDescriptions[s]),c.attributes.direction="sendonly",c.attributes.ssrcs=i,c.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[s]=this.mungSendMediaDesc(c,n)),_r()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,c.attributes.mid),{mid:c.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){let{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){let t=e.map(i=>{let{kind:o,ssrcMsg:a,mslabel:s}=i;return this.send(o,a,s)}),r=[],n=!1;return t.forEach(i=>{let{mid:o,needExchangeSDP:a}=i;a&&(n=!0),r.push(o)}),{mids:r,needExchangeSDP:n}}stopSending(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>r.attributes.mid&&e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach(r=>{r.attributes.mid==="0"||_r()||U3()?r.attributes.ssrcs=[]:(r.attributes.ssrcs=[],r.attributes.direction="inactive",r.media.port="0")}),this.updateBundleMids()}mute(e){let t=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){let t=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>pe(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="inactive"})}unmuteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>pe(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="recvonly"})}receive(e,t,r,n){e.forEach((i,o)=>{this.createOrRecycleRecvMedia(i,[],"recvonly",t,r,n[o])}),this.updateBundleMids()}stopReceiving(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach(r=>{r.media.port="0",r.attributes.direction="inactive"}),this.updateBundleMids()}updateRemoteRTPCapabilities(e){let t=this.sessionDesc||wn.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=e;let r=this.rtpCapabilities.send,n=this.localCapabilities.send;for(let i of t.mediaDescriptions){if(i.attributes.iceUfrag=this._iceParameters.iceUfrag,i.attributes.icePwd=this._iceParameters.icePwd,i.attributes.fingerprints=this._dtlsParameters.fingerprints,i.attributes.candidates=this._candidates,i.attributes.setup=this.setup,i.media.mediaType==="application"&&(i.attributes.sctpPort="5000"),i.media.mediaType==="video"){if(r.videoCodecs.length===0){let o=n.videoCodecs.filter(a=>{var s,c;return(s=a.rtpMap)===null||s===void 0?void 0:pe(c=s.encodingName.toLowerCase()).call(c,"vp8")})||[n.videoCodecs[0]];i.media.fmts=o.map(a=>a.payloadType.toString(10)),i.attributes.payloads=o,i.attributes.extmaps=[]}else if(i.media.fmts=r.videoCodecs.map(o=>o.payloadType.toString(10)),i.attributes.payloads=r.videoCodecs,i.attributes.extmaps=r.videoExtensions,D("PRELOAD_MEDIA_COUNT")>0){let{ssrcs:o,ssrcGroups:a}=fu([{ssrcId:h6,rtx:D("USE_SUB_RTX")?40001:void 0}],this.cname);i.attributes.ssrcs=o,i.attributes.ssrcGroups=a}}if(i.media.mediaType==="audio"){if(r.audioCodecs.length===0){let o=n.audioCodecs.filter(a=>{var s,c;return(s=a.rtpMap)===null||s===void 0?void 0:pe(c=s.encodingName.toLowerCase()).call(c,"opus")})||[n.audioCodecs[0]];i.media.fmts=o.map(a=>a.payloadType.toString(10)),i.attributes.payloads=o,i.attributes.extmaps=[]}else if(i.media.fmts=r.audioCodecs.map(o=>o.payloadType.toString(10)),i.attributes.payloads=r.audioCodecs,i.attributes.extmaps=r.audioExtensions,Lf(i),D("PRELOAD_MEDIA_COUNT")>0){let{ssrcs:o,ssrcGroups:a}=fu([{ssrcId:2e4}],this.cname);i.attributes.ssrcs=o,i.attributes.ssrcGroups=a}}}return this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1,this.sessionDesc}updateCandidates(e){let t=this._candidates.filter(r=>r.transport==="udp");if(e===lo.TCP){if(t.length===0)return;if(D("TCP_CANDIDATE_ONLY")){let r=this._candidates.filter(n=>n.transport==="tcp");t.forEach(n=>{r.findIndex(i=>i.connectionAddress===n.connectionAddress)===-1&&r.push(Dl(Dl({},n),{},{foundation:"tcpcandidate",priority:Number(n.priority)-1+"",transport:"tcp",port:Number(n.port)+90+""}))}),this._candidates=r}else{let r=[];t.forEach(n=>{r.push(Dl(Dl({},n),{},{foundation:"tcpcandidate",priority:Number(n.priority)-1+"",transport:"tcp",port:Number(n.port)+90+""}))}),this._candidates=[...t,...r]}}else if(e===lo.RELAY){if(t.length!==0)return;{let r=this._candidates.filter(n=>n.transport==="tcp");r.forEach(n=>{t.push(Dl(Dl({},n),{},{foundation:"udpcandidate",priority:Number(n.priority)+1+"",transport:"udp",port:Number(n.port)-90+""}))}),this._candidates=[...t,...r]}}else t.length===0?(this._candidates.filter(r=>r.transport==="tcp").forEach(r=>{t.push(Dl(Dl({},r),{},{foundation:"udpcandidate",priority:Number(r.priority)+1+"",transport:"udp",port:Number(r.port)-90+""}))}),this._candidates=t):this._candidates=this._candidates.filter(r=>r.transport!=="tcp");for(let r of this.sessionDesc.mediaDescriptions)r.attributes.candidates=this.candidates}restartICE(e){e=Pr(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd})}predictReceivingMids(e){let t=[];for(let r=0;r<e;r++)t.push((this.currentMidIndex+r+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex(r=>{let n=r.media.mediaType===e&&r.media.port!=="0"&&(r.attributes.direction==="sendonly"||r.attributes.direction==="sendrecv")&&r.attributes.ssrcs.length===0;if(_r()){if(n){let i=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(i||r.attributes.mid!=="0"&&r.attributes.mid!=="1")||!(!i||i!==r.attributes.mid)}return!1}return n})}createOrRecycleDataChannel(){for(let r of this.sessionDesc.mediaDescriptions)if(r.media.mediaType==="application")return{mediaDesc:r,needExchangeSDP:!1};this.currentMidIndex+=1;let e="".concat(this.currentMidIndex),t={media:{mediaType:"application",port:tg,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(e),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,r,n,i,o){let a=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,c=zg(a,s,this.localCapabilities.send,a===Se.VIDEO?n:i),l=a===Se.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;let d="".concat(this.currentMidIndex),u={media:{mediaType:a,port:tg,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map(f=>f.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(d)}};u=this.mungRecvMediaDsec(u,e,o);let p=this.findFirstClosedMedia(a);if(p){let f=this.sessionDesc.mediaDescriptions.indexOf(p);this.sessionDesc.mediaDescriptions[f]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}updateRemoteCodec(e,t,r){let n=[...new Set(this._rtpCapabilities.recv.videoCodecs.map(u=>u.rtpMap&&u.rtpMap.encodingName.toLowerCase()||"").filter(u=>{var p;return pe(p=Object.keys(cT)).call(p,u)}))],i=new Set(t);if(n.every(u=>i.has(u)))return b.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;let o=this._rtpCapabilities.recv.videoCodecs.filter(u=>t.some(p=>{var f;return pe(f=u.rtpMap&&u.rtpMap.encodingName.toLowerCase()||"").call(f,p)}));if(o.length===0)return b.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(n," codecs: ").concat(t)),!1;let a=[...new Set(o.map(u=>u.rtpMap&&u.rtpMap.encodingName.toLowerCase()||""))],s;if(b.debug("updateRemoteCodec, from ".concat(n," to ").concat(a)),e.length===0)s=this.sessionDesc.mediaDescriptions.filter(u=>u.media.mediaType==="video"&&u.attributes.direction==="recvonly");else if(s=this.sessionDesc.mediaDescriptions.filter(u=>u.attributes.mid&&pe(e).call(e,u.attributes.mid)&&u.attributes.direction==="recvonly"),s.length!==e.length)return b.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;if(D("USE_PUB_RTX")||D("USE_SUB_RTX")){let u=t2(o,this.rtpCapabilities.recv.videoCodecs);o.push(...u)}this._rtpCapabilities.recv.videoCodecs=o;let c=this.localCapabilities.send,l=this.rtpCapabilities.recv,d=zg(Se.VIDEO,l,c,r);return s.forEach(u=>{let p=d.map(f=>f.payloadType.toString(10));b.debug("updateRemoteCodec mid: ".concat(u.attributes.mid,", from ").concat(u.attributes.payloads," to ").concat(d)),u.attributes.payloads=d,u.media.fmts=p}),!0}createOrRecycleSendMedia(e,t,r,n,i){let o=this.rtpCapabilities.send,a=e===Se.VIDEO?o.videoCodecs:o.audioCodecs,s=e===Se.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;let c="".concat(this.currentMidIndex),l={media:{mediaType:e,port:tg,protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map(u=>u.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:r,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};l=this.mungSendMediaDesc(l,i);let d=this.findFirstClosedMedia(e);if(d){let u=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[u]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>e.media.port!=="0").map(e=>e.attributes.mid)}mungRecvMediaDsec(e,t,r){let n=Pr(e);return ZD(n),Df(n,t),e2(n,t),QQ(n),lw(n,r,this.localCapabilities.send),n}mungSendMediaDesc(e,t){let r=Pr(e);return lw(r,t,this.localCapabilities.recv),Lf(r),r}updateRecvMedia(e,t){let r=this.sessionDesc.mediaDescriptions.findIndex(n=>n.attributes.mid===e);if(r!==-1){let n=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],t);this.sessionDesc.mediaDescriptions[r]=n}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(t=>_r()?t.media.port==="0"&&t.media.mediaType===e:t.media.port==="0")}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(t=>{var r;return((r=t.attributes)===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId)===e[0].ssrcId})}getSSRC(e){var t;return(t=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e))===null||t===void 0?void 0:t.attributes.ssrcs}};function p6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Bc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p6(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Kg=function(e){return e.BANDWIDTH="bandwidth",e.CPU="cpu",e.NONE="none",e.OTHER="other",e}({}),nf=function(e){return e[e.DOWN=0]="DOWN",e[e.UP=1]="UP",e}(nf||{}),uw=new Map;function f6(e,t,r,n){let{scale:i}=e;if(i===0&&n===nf.UP||i>=t.length-1&&n===nf.DOWN)return e;let o=Bc(Bc({},e),{},{scale:n===nf.DOWN?++i:--i});switch(r){case"maintain-framerate":o=Bc(Bc({},o),t[i].motion);break;case"maintain-resolution":o=Bc(Bc({},o),t[i].detail);break;case"balanced":o=Bc(Bc({},o),t[i].balanced)}return o}function yZ(e,t){if(t){let r={overUse:0,underUse:0,adaptationList:vZ(t)};uw.set(e,r)}else uw.delete(e)}function vZ(e){let t=Bc({},e),{bitrateMax:r,frameRate:n,scaleResolutionDownBy:i,bitrateMin:o}=t,{MIN_FRAME_RATE:a,MAX_THRESHOLD_FRAMERATE:s,MAX_SCALE:c,BITRATE_MIN_THRESHOLD:l,BITRATE_MAX_THRESHOLD:d,BWE_SCALE_UP_THRESHOLD:u,BWE_SCALE_DOWN_THRESHOLD:p,PERF_SCALE_DOWN_THRESHOLD:f,PERF_SCALE_UP_THRESHOLD:m,BALANCE_BITRATE_FACTOR:g,BALANCE_FRAMERATE_FACTOR:y,BALANCE_RESOLUTION_FACTOR:v,MOTION_RESOLUTION_FACTOR:E,MOTION_BITRATE_FACTOR:w,DETAIL_FRAMERATE_FACTOR:S,DETAIL_BITRATE_FACTOR:x}=BD,O=Math.min(t.frameRate,s),L=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(p,1)*r),bwe_up:r,fps_down:Math.round(Math.pow(f,1)*O),fps_up:n},balanced:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:r,bitrateMin:o},motion:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:r,bitrateMin:o},detail:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:r,bitrateMin:o}}];for(let j=1;j<=c;j++){let W={bwe_up:Math.round(Math.pow(u,j)*r),bwe_down:Math.round(Math.pow(p,j+1)*r),fps_up:Math.round(Math.pow(m,j)*O),fps_down:Math.round(Math.pow(f,j+1)*O)},V={scaleResolutionDownBy:i/Math.pow(v,j),frameRate:Math.max(Math.round(Math.pow(y,j)*n),a),bitrateMax:Math.max(Math.round(Math.pow(g,j)*r),d),bitrateMin:Math.max(Math.round(Math.pow(g,j)*o),l)},Y={scaleResolutionDownBy:i/Math.pow(E,j),frameRate:n,bitrateMax:Math.max(Math.round(Math.pow(w,j)*r),d),bitrateMin:Math.max(Math.round(Math.pow(w,j)*o),l)},Z={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(S,j)*n),a),bitrateMax:Math.max(Math.round(Math.pow(x,j)*r),d),bitrateMin:Math.max(Math.round(Math.pow(x,j)*o),l)};L.push({scale:j,threshold:W,balanced:V,motion:Y,detail:Z})}return L}function ije(e,t,r,n,i,o){let a=uw.get(e)||{overUse:0,underUse:0,adaptationList:vZ(i)},{adaptationList:s}=a;uw.set(e,a);let{OVERUSE_TIMES_THRESHOLD:c,UNDERUSE_TIMES_THRESHOLD:l}=BD,{scale:d}=n,u,p;return typeof t=="number"&&t>0&&function(f,m,g,y){if(m>=g.length)return!1;let{threshold:{fps_down:v}}=g[m];return D("FORCE_AG_HIGH_FRAMERATE")&&y==="maintain-framerate"&&(v=g[0].threshold.fps_down),f<v}(t,d,s,o)&&(a.overUse++,p=Kg.CPU,a.overUse>c)||typeof r=="number"&&r>0&&function(f,m,g){if(m>=g.length)return!1;let{threshold:{bwe_down:y}}=g[m];return f<y}(r,d,s)&&(a.overUse++,p=Kg.BANDWIDTH,a.overUse>c)?(a.overUse=0,a.underUse=0,u=f6(n,s,o,nf.DOWN),[u,p]):(typeof t=="number"&&t>0&&typeof r=="number"&&r>0&&function(f,m,g,y){if(m===0)return;let{threshold:{fps_up:v}}=g[m];return D("FORCE_AG_HIGH_FRAMERATE")&&y==="maintain-framerate"&&(v=g[1].threshold.fps_up),f>v}(t,d,s,o)&&function(f,m,g){if(m===0)return;let{threshold:{bwe_up:y}}=g[m];return f>y}(r,d,s)&&(a.underUse++,a.underUse>l&&(a.overUse=0,a.underUse=0,u=f6(n,s,o,nf.UP),u.scale===0&&(p=Kg.NONE))),[u,p])}function m6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $I(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m6(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oje(e){var t;return!!D("ENABLE_AG_ADAPTATION")&&!!(e instanceof JN||pe(t=e._hints).call(t,nr.CUSTOM_TRACK))&&(!!D("FORCE_SUPPORT_AG_ADAPTATION")||!!(function(r){let n=vt();if(n.os!==sn.IOS||!n.osVersion)return!1;let i=n.osVersion.split(".");return Number(i[0])>=r}(14)&&qJ(17,4)||KJ(14)&&YJ(17,4)))}var hw=new Map;function CE(e,t){let r=hw.get(e);if(r){let{timer:n}=r;window.clearTimeout(n),hw.delete(e)}t.qualityLimitationReason=Kg.NONE,yZ(e)}var ft;function g6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Js(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g6(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var fs=(ft=class _g extends hQ{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var t,r;return(t=(r=this.peerConnection.getReceivers()[0])===null||r===void 0||(r=r.transport)===null||r===void 0?void 0:r.state)!==null&&t!==void 0?t:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map(t=>t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").filter(t=>{var r;return pe(r=Object.keys(cT)).call(r,t)}))]}constructor(t,r){super(t,r),C(this,"store",void 0),C(this,"peerConnection",void 0),C(this,"id",qt(5,"connection-")),C(this,"remoteSDP",void 0),C(this,"initialOffer",void 0),C(this,"transportEventReceiver",void 0),C(this,"statsFilter",void 0),C(this,"extension",{useXR:D("USE_XR")}),C(this,"localCapabilities",void 0),C(this,"remoteCodecs",void 0),C(this,"localCandidateCount",0),C(this,"allCandidatesReceived",!1),C(this,"isPreallocation",!1),C(this,"preSSRCMap",new Map),C(this,"dataStreamChannelMap",new Map),C(this,"establishPromise",void 0),C(this,"recoveredDataChannelIds",[]),C(this,"currentDataChannelId",1),C(this,"mutex",new zn("P2PConnection-mutex")),C(this,"qualityLimitationReason",Kg.NONE),this.store=r,this.peerConnection=new RTCPeerConnection(_g.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=s2(this.peerConnection,D("STATS_UPDATE_INTERVAL"),void 0,_r()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}getPreMedia(t){let r=this.preSSRCMap.get(t);if(r!==void 0){let n=this.peerConnection.getTransceivers().find(i=>i.mid===r);if(n)return{transceiver:n,track:n.receiver.track,id:r}}}async updateRemoteRTPCapabilities(t,r){if(this.remoteCodecs=r,!this.remoteSDP)return void b.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(r));if(this.remoteSDP.updateRemoteCodec(t,r,this.store.codec)){let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n);let o=this.remoteSDP.toString();i==null||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}else b.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.")}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});let t=await this.peerConnection.createOffer();if(!t.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let r=ad(t.sdp),n=await eZ({filterRTX:!D("USE_PUB_RTX")&&!D("USE_SUB_RTX"),filterVideoFec:D("FILTER_VIDEO_FEC"),filterAudioFec:D("FILTER_AUDIO_FEC"),filterVideoCodec:D("FILTER_VIDEO_CODEC")},this.extension);return this.localCapabilities=dw(n),this.initialOffer=t,Js(Js({},r),{},{rtpCapabilities:n,offerSDP:t.sdp})}catch(t){throw new X(I.GET_LOCAL_CONNECTION_PARAMS_FAILED,t.toString())}}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new nje(Js(Js({},t),{},{localCapabilities:this.localCapabilities})),t.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);let r=this.remoteSDP.toString(),n=tZ(this.initialOffer.sdp,this.extension),i=this.logSDPExchange(n||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),i==null||i(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r});let o=this.peerConnection.getTransceivers()[0];if(o!=null&&o.receiver&&this.tryBindTransportEvents(o.receiver),D("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia(D("PRELOAD_MEDIA_COUNT"));let s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});let c=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(c)}let{preSSRCs:a}=t;if(Array.isArray(a)&&a.length>0){let{mids:s}=this.remoteSDP.batchSend(a.map(c=>({kind:c.kind,ssrcMsg:[{ssrcId:c.ssrcId,rtx:c.rtx}],mslabel:c.mslabel})));s.forEach((c,l)=>{this.preSSRCMap.set(a[l].ssrcId,c)}),await _E(this.peerConnection,this.remoteSDP,this.extension),b.debug("[".concat(this.store.clientId,"] [P2PConnection] pre-batchReceive exchange SDP."))}}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}}async updateRemoteConnect(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateRemoteConnect before remote SDP created");let{rtpCapabilities:r}=t;this.remoteSDP.updateRemoteRTPCapabilities(r),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);let{preSSRCs:n}=t;if(Array.isArray(n)&&n.length>0){let{mids:i}=this.remoteSDP.batchSend(n.map(o=>Object.assign({},{kind:o.kind,ssrcMsg:[{ssrcId:o.ssrcId,rtx:o.rtx}],mslabel:o.mslabel})));i.forEach((o,a)=>{this.preSSRCMap.set(n[a].ssrcId,o)})}await _E(this.peerConnection,this.remoteSDP,this.extension),b.debug("[P2PConnection] updateRemoteRTPCapabilities by exchanging SDP.")}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.updateRemoteConnect failed; ".concat(r.toString()))}}send(t,r,n){var i=this;return xs(function*(){let o=yield St(i.mutex.lock("From P2PConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let a=[];t.forEach(g=>{let y=i.peerConnection.addTransceiver(g._mediaStreamTrack,{direction:"sendonly"});a.push(y),g._updateRtpTransceiver(y)}),_r()&&D("SIMULCAST")===!0&&(yield St(i.applySimulcastForFirefox(a,t)));let s=yield St(i.peerConnection.createOffer()),c=i.remoteSDP.predictReceivingMids(t.length),l=i.mungSendOfferSDP(s.sdp,t,c),d=wn.parse(l),u=c.map(g=>{let y=d.mediaDescriptions.find(v=>v.attributes.mid===g);if(!y)throw new Error("Cannot extract ssrc from mediaDescription.");return XQ(y,D("USE_PUB_RTX"))}),p;try{p=yield u}catch(g){p=[],i.remoteSDP.receive(t,r,n,p);let y=i.remoteSDP.toString();throw yield St(i.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield St(i.peerConnection.setRemoteDescription({type:"answer",sdp:y})),yield St(i.stopSending(c,!0)),g}i.remoteSDP.receive(t,r,n,p);let f=i.remoteSDP.toString(),m=i.logSDPExchange(l,"offer","local","send");return yield St(i.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield St(i.applySimulcastEncodings(a,t)),yield St(i.applySendEncodings(a,t)),m==null||m(f),yield St(i.peerConnection.setRemoteDescription({type:"answer",sdp:f})),a.map((g,y)=>{let v=c[y];return{localSSRC:u[y],id:v,transceiver:g}})}catch(a){throw a instanceof X?a:new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(a.toString()))}finally{o()}})()}async createDataChannels(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(t);if(n&&n.readyState==="open")b.debug("[P2PConnection] Channels are already available and can be reused directly.");else{let o=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if(typeof o!="number")throw new Error("create DataChannel error, because cannot get dc id");n=this.peerConnection.createDataChannel("datastream-channel",{id:o,negotiated:!0,ordered:!1,maxRetransmits:D("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(t,n)}r.forEach(o=>{o._updateOriginDataChannel(n)});let{needExchangeSDP:i}=this.remoteSDP.sendDataChannel();if(i){let o=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});let a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(a),b.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else b.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(n){throw n instanceof X?n:new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(n.toString()))}}async stopDataChannels(t){try{let r=this.dataStreamChannelMap.get(t);return r&&(r.id&&this.recoveredDataChannelIds.push(r.id),r.close()),void this.dataStreamChannelMap.delete(t)}catch(r){throw r instanceof X?r:new X(I.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(r.toString()))}}async stopSending(t,r){let n=r?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let i=this.peerConnection.getTransceivers().filter(c=>t.indexOf(c.mid)!==-1);if(i.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");i.map(c=>{var l;CE(this.id+c.mid,this),c.direction="inactive",(l=c.stop)===null||l===void 0||l.call(c)});let o=await this.peerConnection.createOffer(),a=this.logSDPExchange(o.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(o),this.remoteSDP.stopReceiving(t);let s=this.remoteSDP.toString();a==null||a(s),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s})}catch(i){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}finally{n&&n()}}async receive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{mid:o,needExchangeSDP:a}=this.remoteSDP.send(t,r,n,i);a&&(await _E(this.peerConnection,this.remoteSDP,this.extension),b.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP.")));let s=this.peerConnection.getTransceivers().find(c=>c.mid===o);if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:o,transceiver:s}}catch(o){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async batchReceive(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");let{mids:r,needExchangeSDP:n}=this.remoteSDP.batchSend(t);return n&&(await _E(this.peerConnection,this.remoteSDP,this.extension),b.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))),r.map(i=>{let o=this.peerConnection.getTransceivers().find(a=>a.mid===i);if(!o)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:o.receiver.track,id:i,transceiver:o}})}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(r.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");t.forEach(o=>{Array.from(this.preSSRCMap.entries()).some(a=>{let[s,c]=a;if(c===o)return this.preSSRCMap.delete(s),!0})}),this.remoteSDP.stopSending(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}async muteRemote(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(t," before remote SDP created."));this.remoteSDP.mute(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(r.toString()))}}async unmuteRemote(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(t," before remote SDP created."));this.remoteSDP.unmute(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(r.toString()))}}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(a=>{a.direction="inactive"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(t);let o=this.remoteSDP.toString();i==null||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(r.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(async(a,s)=>{a.direction="sendonly"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(t);let o=this.remoteSDP.toString();i==null||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new X(I.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(r.toString()))}}restartICE(t){var r=this;return xs(function*(){let n=yield St(r.mutex.lock("From P2PConnection.restartICE"));try{if(!r.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(_t().supportPCSetConfiguration){let l=r.peerConnection.getConfiguration(),d=t===lo.RELAY?"relay":"all";l.iceTransportPolicy!==d&&(b.debug("[".concat(r.store.clientId,"] restartICE change iceTransportPolicy from [").concat(l.iceTransportPolicy,"] to [").concat(d,"]")),l.iceTransportPolicy=d,r.peerConnection.setConfiguration(l))}else if(t===lo.RELAY)return;r.remoteSDP.updateCandidates(t);let i=yield St(r.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let o=ad(i.sdp),{remoteIceParameters:a}=yield o.iceParameters;r.remoteSDP.restartICE(a);let s=r.remoteSDP.toString(),c=r.logSDPExchange(i.sdp||"","offer","local","restartICE");r.store.descriptionStart(),yield St(r.peerConnection.setLocalDescription(i)),c==null||c(s),yield St(r.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(i){b.warning("[".concat(r.store.clientId,"] restart ICE failed, abort operation"),i)}finally{n()}})()}close(){var t;this.peerConnection.getTransceivers().forEach(r=>{CE(this.id+r.mid,this)}),this.preSSRCMap.clear(),this.peerConnection.close(),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return Js(Js({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[r],[t]);this.remoteSDP.updateRecvMedia(t,r);let o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),a==null||a(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new X(I.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(t,r){let n=this.peerConnection.getTransceivers().filter(i=>i.mid===t);n.length===1&&(this.isVP8Simulcast(r)?_r()||await this.applySimulcastEncodings(n,[r]):await this.applySendEncodings(n,[r]))}setStatsRemoteVideoIsReady(t,r){this.statsFilter.setVideoIsReady2(t,r)}async replaceTrack(t,r){let n=this.peerConnection.getTransceivers().find(i=>i.mid===r);n&&await n.sender.replaceTrack(t._mediaStreamTrack)}async getSelectedCandidatePair(){let t=this.peerConnection.getReceivers();if(t.length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair()){let r=t[0].transport.iceTransport,{local:n,remote:i}=r.getSelectedCandidatePair();return{local:Js(Js({},_c),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:Js(Js({},_c),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t;(t=this.onICEConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=t=>{t.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,b.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,b.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},D("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){let r={iceServers:[]};return t.iceServers?r.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(oT(t.turnServer.servers)?r.iceServers=t.turnServer.servers:(r.iceServers&&r.iceServers.push(..._g.turnServerConfigToIceServers(t.turnServer.servers)),D("USE_TURN_SERVER_OF_GATEWAY")&&r.iceServers&&t.turnServer.serversFromGateway&&r.iceServers.push(..._g.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),D("FORCE_TURN_TCP")?r.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(n=>{n.forceturn&&(r.iceTransportPolicy="relay")}))),D("ENABLE_ENCODED_TRANSFORM")&&_t().supportWebRTCEncodedTransform&&(r.encodedInsertableStreams=!0),r}static turnServerConfigToIceServers(t){let r=[];return t.forEach(n=>{n.security?n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turns:".concat(Mp(n.turnServerURL),":").concat(n.tcpport,"?transport=tcp")}):(n.udpport&&!D("FORCE_TURN_TCP")&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.udpport,"?transport=udp")}),n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.tcpport,"?transport=tcp")}))}),r}tryBindTransportEvents(t){let r=t.transport;if(r){this.transportEventReceiver=t,r.onstatechange=()=>{var i;r!=null&&r.state&&((i=this.onDTLSTransportStateChange)===null||i===void 0||i.call(this,r.state))},r.onerror=i=>{var o;(o=this.onDTLSTransportError)===null||o===void 0||o.call(this,"error"in i?i.error:i)};let n=r.iceTransport;n&&(n.onstatechange=()=>{let i=r==null?void 0:r.iceTransport.state;var o;i&&((o=this.onICETransportStateChange)===null||o===void 0||o.call(this,i))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){let{local:i,remote:o}=n.getSelectedCandidatePair();b.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol}),", remote ").concat(JSON.stringify({candidateType:o.type,protocol:o.protocol,address:o.address,port:o.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(t,r){var n,i;if(r||(r=this.peerConnection.getSenders().find(g=>g.track===t._mediaStreamTrack)),!r)return b.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(t))return b.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!_t().supportSetRtpSenderParameters)return b.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");let o={},a={};switch(t._optimizationMode){case"motion":o.degradationPreference="maintain-framerate";break;case"detail":o.degradationPreference="maintain-resolution";break;case"balanced":o.degradationPreference="balanced"}let s=function(g,y){return g.getTransceivers().find(v=>v.sender.track===y||v.receiver.track===y)}(this.peerConnection,t._mediaStreamTrack),c=EMe(t);if(oje(t)&&s&&r&&c&&this.getLocalVideoStats&&pe(n=["vp8","vp9"]).call(n,this.store.codec)){var l;let g=o.degradationPreference||(pe(l=t._hints).call(l,nr.CUSTOM_TRACK)?D("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");(function(y,v,E,w,S,x){if(CE(y,E),S(v),w!=="balanced"&&w!=="maintain-framerate"&&w!=="maintain-resolution")return;let O=-1;yZ(y,v);let L=window.setInterval(()=>{let W=hw.get(y);if(!D("ENABLE_AG_ADAPTATION")||!W)return CE(y,E),void S(v);let V=x();if(V.sendPackets>0&&V.OutgoingAvailableBandwidth>0){if(O===-1)return void(O=Date.now());if(Date.now()-O<1e3)return;let Y=V.sendFrameRate,Z=V.OutgoingAvailableBandwidth,[te,H]=ije(y,Y,Z,W.adaptationConfig,v,w);H&&(E.qualityLimitationReason=H),te&&W.adaptationConfig.scale!==te.scale&&(b.debug("[".concat(y,"] applyAdaptation: ").concat(E.qualityLimitationReason,`
           sendFps `).concat(Y,", bwe ").concat(Z,", switch from ").concat(W.adaptationConfig.scale," to ").concat(te.scale," ")),W.adaptationConfig=$I($I({},W.adaptationConfig),te),S(te))}},D("CHECK_LOCAL_STATS_INTERVAL")),j=$I({},v);hw.set(y,{timer:L,adaptationConfig:j,originConfig:v,adaptationFunc:S}),b.debug("[".concat(y,"] start adaptation, originConfig: ").concat(JSON.stringify(v),", degradationPreference: ").concat(w))})(this.id+s.mid,c,this,g,y=>{r&&this.updateAdaptation(r,y)},this.getLocalVideoStats.bind(this))}if(t._encoderConfig){var d;let{bitrateMax:g,frameRate:y,scaleResolutionDownBy:v}=t._encoderConfig;g&&(a.maxBitrate=1e3*g),(pe(d=t._hints).call(d,nr.LOW_STREAM)||t.isUseScaleResolutionDownBy)&&(y&&(a.maxFramerate=uo(y)),v&&v>=1&&(a.scaleResolutionDownBy=v))}let{maxFramerate:u}=D("ENCODER_CONFIG_LIMIT");if(u&&typeof u=="number"&&(a.maxFramerate=a.maxFramerate?Math.min(a.maxFramerate,u):u),D("DSCP_TYPE")&&Nd()){var p;let g=D("DSCP_TYPE");pe(p=["very-low","low","medium","high"]).call(p,g)&&(a.networkPriority=g)}let f=r.getParameters(),m=(i=f.encodings)===null||i===void 0?void 0:i[0];_r()&&!m&&(o.encodings=[a]),m&&Object.assign(m,a),Object.assign(f,o),b.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(f.encodings))),await r.setParameters(f),await async function(g,y,v){try{var E;if(!_t().supportSetRtpSenderParameters||!function(L){return L==="vp9"}(g)||!D("ENABLE_SVC"))return;let w={},S={},x=y.getParameters(),O=(E=x.encodings)===null||E===void 0?void 0:E[0];S.scalabilityMode=ZN(v),O&&Object.assign(O,S),Object.assign(x,w),await y.setParameters(x),b.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: ".concat(JSON.stringify(x.encodings)))}catch(w){b.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed",w)}}(this.store.codec,r,D("SVC_MODE"))}async updateAdaptation(t,r){var n,i;if(!t)return b.debug("[updateAdaptation] no rtpSender found");if(!_t().supportSetRtpSenderParameters)return b.debug("[updateAdaptation] Browser not support set rtp-sender parameters");let o={},{bitrateMax:a,frameRate:s,scaleResolutionDownBy:c}=r;a&&(o.maxBitrate=1e3*a),s&&(o.maxFramerate=uo(s)),c&&c>=1&&pe(n=["vp8","vp9"]).call(n,this.store.codec)&&(o.scaleResolutionDownBy=c);let l=t.getParameters(),d=(i=l.encodings)===null||i===void 0?void 0:i[0];d&&Object.assign(d,o),Object.assign(l,{});try{await t.setParameters(l),b.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(l.encodings)))}catch(u){!("transport"in t)||t.transport&&t.transport.state==="connected"?this.peerConnectionState!=="connected"?b.debug("[updateAdaptation] peerConnection not connected}"):b.debug("[updateAdaptation] updateRtpSenderEncodings failed",u):b.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(t,r){try{if(!_t().supportSetRtpSenderParameters||t.length!==r.length)return;for(let n=0;n<t.length;n++){let i=t[n],o=r[n];o instanceof Qt&&!this.isVP8Simulcast(o)&&await this.updateRtpSenderEncodings(o,i.sender)}}catch{b.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,r,n){let i=wn.parse(t);return r.forEach((o,a)=>{let s=n[a],c=i.mediaDescriptions.find(l=>l.attributes.mid===s);c&&(Df(c,o),ZQ(c,o,this.store.codec))}),wn.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var r;(r=this.onFirstAudioReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var r;(r=this.onFirstVideoReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var r;(r=this.onFirstAudioDecoded)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,r,n)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,r,n)},this.statsFilter.onSelectedLocalCandidateChanged=(t,r)=>{var n;(n=this.onSelectedLocalCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,r)=>{var n;(n=this.onSelectedRemoteCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onFirstVideoDecodedTimeout=t=>{var r;(r=this.onFirstVideoDecodedTimeout)===null||r===void 0||r.call(this,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(t,r){if(t.length===r.length)for(let c=0;c<t.length;c++){var n,i,o,a,s;let l=t[c],d=r[c];if(d instanceof Qt&&!pe(n=d._hints).call(n,nr.LOW_STREAM)&&(i=d._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((o=d._encoderConfig)===null||o===void 0?void 0:o.bitrateMax)>200&&(a=d._scalabilityMode)!==null&&a!==void 0&&a.numSpatialLayers&&((s=d._scalabilityMode)===null||s===void 0?void 0:s.numSpatialLayers)>1&&this.store.codec==="vp8"){let u={},p={high:1e3*(d._encoderConfig.bitrateMax-50),medium:5e4};u.encodings=[{rid:"m",active:!0,maxBitrate:p.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:p.high}];let f=l.sender.getParameters();await l.sender.setParameters(Object.assign(f,u))}}}async applySimulcastEncodings(t,r){if(!_r()&&t.length===r.length)for(let n=0;n<t.length;n++){let i=r[n];if(i instanceof Qt&&this.isVP8Simulcast(i)){let o=t[n],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];let c=o.sender.getParameters();await o.sender.setParameters(Object.assign(c,a))}}}isVP8Simulcast(t){var r,n,i,o,a;return!!(t instanceof Qt&&D("SIMULCAST")&&this.store.codec==="vp8"&&!pe(r=t._hints).call(r,nr.LOW_STREAM)&&(n=t._encoderConfig)!==null&&n!==void 0&&n.bitrateMax&&((i=t._encoderConfig)===null||i===void 0?void 0:i.bitrateMax)>200&&(o=t._scalabilityMode)!==null&&o!==void 0&&o.numSpatialLayers&&((a=t._scalabilityMode)===null||a===void 0?void 0:a.numSpatialLayers)>1)}logSDPExchange(t,r,n,i){if(D("SDP_LOGGING"))return b.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(r," SDP during P2PConnection.").concat(i,`
`),t),r==="offer"?o=>{this.logSDPExchange(o,"answer",n==="local"?"remote":"local",i)}:void 0}async getRemoteSSRC(t){if(!this.remoteSDP)return;let r=this.remoteSDP.getSSRC(t);return r&&r.length!==0?r[0].ssrcId:void 0}setConfiguration(t){if(_t().supportPCSetConfiguration){let r=_g.resolvePCConfiguration(t);this.peerConnection.setConfiguration(r)}}},ve(ft.prototype,"updateRemoteRTPCapabilities",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"updateRemoteRTPCapabilities"),ft.prototype),ve(ft.prototype,"connect",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"connect"),ft.prototype),ve(ft.prototype,"updateRemoteConnect",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"updateRemoteConnect"),ft.prototype),ve(ft.prototype,"createDataChannels",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"createDataChannels"),ft.prototype),ve(ft.prototype,"receive",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"receive"),ft.prototype),ve(ft.prototype,"batchReceive",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"batchReceive"),ft.prototype),ve(ft.prototype,"stopReceiving",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"stopReceiving"),ft.prototype),ve(ft.prototype,"muteRemote",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"muteRemote"),ft.prototype),ve(ft.prototype,"unmuteRemote",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"unmuteRemote"),ft.prototype),ve(ft.prototype,"muteLocal",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"muteLocal"),ft.prototype),ve(ft.prototype,"unmuteLocal",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"unmuteLocal"),ft.prototype),ve(ft.prototype,"close",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"close"),ft.prototype),ve(ft.prototype,"updateEncoderConfig",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"updateEncoderConfig"),ft.prototype),ve(ft.prototype,"updateSendParameters",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"updateSendParameters"),ft.prototype),ve(ft.prototype,"replaceTrack",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"replaceTrack"),ft.prototype),ve(ft.prototype,"updateAdaptation",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"updateAdaptation"),ft.prototype),ve(ft.prototype,"getRemoteSSRC",[Ai],Object.getOwnPropertyDescriptor(ft.prototype,"getRemoteSSRC"),ft.prototype),ft);function Ai(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,o=await i.lock("From P2PConnection.".concat(t));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await n.apply(this,s)}finally{o()}},r}var ot;function y6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y6(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v6(e){var t,r,n,i=2;for(typeof Symbol<"u"&&(r=rje,n=Symbol.iterator);i--;){if(r&&(t=e[r])!=null)return t.call(e);if(n&&(t=e[n])!=null)return new R_(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function R_(e){function t(r){if(Object(r)!==r)return de.reject(new TypeError(r+" is not an object."));var n=r.done;return de.resolve(r.value).then(function(i){return{value:i,done:n}})}return R_=function(r){this.s=r,this.n=r.next},R_.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(r){var n=this.s.return;return n===void 0?de.resolve({value:r,done:!0}):t(n.apply(this.s,arguments))},throw:function(r){var n=this.s.return;return n===void 0?de.reject(r):t(n.apply(this.s,arguments))}},new R_(e)}var RE=(ot=class extends fr{get state(){return this._state}set state(e){let t=this._state;this._state=e,this.emit(Oe.StateChange,t,this._state)}constructor(e,t){super(),C(this,"isPlanB",void 0),C(this,"store",void 0),C(this,"statsUploader",void 0),C(this,"connection",void 0),C(this,"localTrackMap",new Map),C(this,"remoteUserMap",new Map),C(this,"localDataChannels",[]),C(this,"remoteDataChannelMap",new Map),C(this,"pendingLocalTracks",[]),C(this,"pendingRemoteTracks",[]),C(this,"pendingLocalDataChannels",[]),C(this,"pendingRemoteDataChannels",[]),C(this,"statsCollector",void 0),C(this,"shouldForwardP2PCreation",void 0),C(this,"iceFailedCount",0),C(this,"dtlsFailedCount",0),C(this,"mutex",new zn("P2PChannel-mutex")),C(this,"_state",At.Disconnected),C(this,"_pcStatsUploadType",D("NEW_ICE_RESTART")?Dc.FIRST_CONNECTION:Dc.OLD_FIRST_CONNECTION),C(this,"_isInRestartIce",!1),C(this,"_isStartRestartIce",!1),C(this,"_restartStates",["disconnected","failed"]),C(this,"_restartTimer",void 0),C(this,"_isFirstConnected",!0),C(this,"handleMuteLocalTrack",async(r,n,i)=>{let o=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==At.Connected)return void i(new X(I.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));let a=this.filterTobeMutedTracks(r);if(a.length===0)return void n();let s=a.find(l=>l[0]==="videoLowTrack");s&&s[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(a.map(l=>{let[,{id:d}]=l;return d}));let c=this.createMuteMessage(a);await Wt(this,Oe.RequestMuteLocal,c),n()}catch(a){i(a)}finally{o()}}),C(this,"handleUnmuteLocalTrack",async(r,n,i)=>{let o=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==At.Connected)return void i(new X(I.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));let a=this.filterTobeUnmutedTracks(r);if(a.length===0)return void n();let s=a.find(l=>l[0]==="videoLowTrack");if(s){let l=s[1];if(l.track._originMediaStreamTrack.stop(),!D("DISABLE_DUAL_STREAM_USE_ENCODING")&&_t().supportDualStreamEncoding){let d=r._mediaStreamTrack.clone();l.track._mediaStreamTrack=d,l.track._originMediaStreamTrack=d}else{let d=iO(r,H0(this,Oe.RequestLowStreamParameter));l.track._mediaStreamTrack=d,l.track._originMediaStreamTrack=d}await new de((d,u)=>{this.handleReplaceTrack(l.track,d,u,!0)})}await this.connection.unmuteLocal(a.map(l=>{let[,{id:d}]=l;return d}));let c=this.createUnmuteMessage(a);await Wt(this,Oe.RequestUnmuteLocal,c),n()}catch(a){i(a)}finally{o()}}),C(this,"handleUpdateVideoEncoder",async(r,n,i)=>{let o=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{let a=this.localTrackMap.get(ie.LocalVideoTrack);if(!this.connection||!a||a.track!==r||this.state!==At.Connected)return void n();let{id:s,track:c}=a;await this.connection.updateSendParameters(s,c),await this.connection.updateEncoderConfig(s,c),this.emit(Oe.UpdateVideoEncoder,c),n()}catch(a){i(a)}finally{o()}}),C(this,"handleUpdateVideoSendParameters",async(r,n,i)=>{let o=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{let a=this.localTrackMap.get(ie.LocalVideoTrack);if(!this.connection||!a||a.track!==r||this.state!==At.Connected)return void n();let{id:s,track:c}=a;await this.connection.updateSendParameters(s,c),n()}catch(a){i(a)}finally{o()}}),C(this,"handleReplaceMixingTrack",async(r,n,i,o)=>{if(!this.connection||this.state!==At.Connected)return void n();let a=BI([r]),s;b.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(a.getTrackId(),"]")),typeof o=="boolean"&&o||(s=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(r,a),n()}catch(l){i(l)}finally{var c;(c=s)===null||c===void 0||c()}}),C(this,"handleReplaceTrack",async(r,n,i,o)=>{let a;b.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(r.getTrackId(),"]")),typeof o=="boolean"&&o||(a=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var s;let l=Array.from(this.localTrackMap.entries()).find(d=>{let[,{track:u}]=d;return r===u});if(!this.connection||!l||this.state!==At.Connected)return void n();if(await((s=this.connection)===null||s===void 0?void 0:s.replaceTrack(r,l[1].id)),this.isPlanB){let d=l[1];d.id=r._mediaStreamTrack.id,this.localTrackMap.set(l[0],d)}if(l[0]===ie.LocalVideoTrack&&!D("DISABLE_DUAL_STREAM_USE_ENCODING")&&_t().supportDualStreamEncoding){let d=this.localTrackMap.get(ie.LocalVideoLowTrack);if(d){let u=r._mediaStreamTrack.clone();d.track._originMediaStreamTrack.stop(),d.track._mediaStreamTrack=u,d.track._originMediaStreamTrack=u,await new de((p,f)=>{this.handleReplaceTrack(d.track,p,f,!0)})}}n()}catch(l){i(l)}finally{var c;(c=a)===null||c===void 0||c()}}),C(this,"handleGetRTCStats",r=>{r(this.statsCollector.getRTCStats())}),C(this,"handleGetLocalVideoStats",r=>{r(this.statsCollector.getLocalVideoTrackStats())}),C(this,"handleGetLocalAudioStats",r=>{r(this.statsCollector.getLocalAudioTrackStats())}),C(this,"handleGetRemoteVideoStats",r=>this.statsCollector.getRemoteVideoTrackStats(r.uid)[r.uid]),C(this,"handleGetRemoteAudioStats",r=>this.statsCollector.getRemoteAudioTrackStats(r.uid)[r.uid]),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new fZ(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!_t().supportUnifiedPlan||D("CHROME_FORCE_PLAN_B")&&Nd(),this.shouldForwardP2PCreation=D("FORWARD_P2P_CREATION")&&_t().supportPCSetConfiguration&&jD(),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new eg({},this.store):new fs({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e){var t;this.state=At.New;let r=this.shouldForwardP2PCreation&&((t=this.connection)===null||t===void 0?void 0:t.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!r||(r&&this.connection&&(b.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.isPlanB?new eg(e,this.store):new fs(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new X(I.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=D("NEW_ICE_RESTART")?Dc.FIRST_CONNECTION:Dc.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e){if(!this.connection)throw new X(I.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");D("ENABLE_PREALLOC_PC")&&this.state===At.Connected?await this.connection.updateRemoteConnect(e):(this.store.peerConnectionStart(),await this.connection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=At.Connected)}updateRemoteRTPCapabilities(e){let t=Array.from(this.localTrackMap.entries()).filter(i=>{var o;let[a]=i;return pe(o=[ie.LocalVideoLowTrack,ie.LocalVideoTrack]).call(o,a)}),r=t.map(i=>{let[,{id:o}]=i;return o}),n=t.map(i=>{let[o]=i;return o});if(this.connection instanceof fs){if(be.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(n),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!pe(e).call(e,this.store.codec)){let i=["vp9","vp8","h264"].find(o=>pe(e).call(e,o));i&&(this.store.codec=i,b.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(i,".")))}this.connection.updateRemoteRTPCapabilities(r,e)}}async getEstablishParams(){var e;if(this.connection instanceof fs&&this.connection.peerConnectionState!=="closed"&&pe(e=[At.New,At.Connected]).call(e,this.state))return this.connection.establishPromise}async publishDataChannel(e){if(!this.connection||this.state!==At.Connected){if(this.state===At.Disconnected)throw new X(I.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return e.forEach(r=>{var n;pe(n=this.pendingLocalDataChannels).call(n,r)||this.pendingLocalDataChannels.push(r)}),[]}let t=this.filterTobePublishedDataChannels(e);return t.length===0?[]:(t.forEach(r=>{let n=Date.now();this.store.publish(r.id.toString(),"datachannel",n)}),await this.connection.createDataChannels(this.store.uid,t),t.forEach(r=>{this.localDataChannels.push(r);let n=Date.now();this.store.publish(r.id+"","datachannel",void 0,n)}),e.map(r=>({streamId:r.id,ordered:r.ordered,maxRetransmits:r.maxRetransmits,metadata:r.metadata,channelId:r._originDataChannelId})))}publish(e,t,r){var n=this;return xs(function*(){let i=yield St(n.mutex.lock("From P2PChannel.publish"));try{if(!n.connection||n.state!==At.Connected){if(n.state===At.Disconnected)throw new X(I.UNEXPECTED_ERROR,"PeerConnection already disconnected.");n.throwIfTrackTypeNotMatch(e);let a=e.filter(s=>n.pendingLocalTracks.indexOf(s)===-1);return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(a))}n.store.pubId=n.store.pubId+1,Hn.markPublishStart(n.store.clientId,n.store.pubId);let o=n.filterTobePublishedTracks(e,t,r);if(o.length===0)return void(yield St(n.tryToUnmuteAudio(e)));yield*s6(v6(n.doPublish(n.connection,o)))}finally{i()}})()}doPublish(e,t){var r=this;return xs(function*(){t.forEach(u=>{let{track:p,type:f}=u,m=Date.now();r.store.publish(p.getTrackId(),f===ie.LocalAudioTrack?"audio":"video",m)}),r.bindLocalTrackEvents(t);let n=t.map(u=>{let{track:p}=u;return p}),i=yield St(e.send(t.map(u=>{let{track:p}=u;return p}),r.store.codec,r.store.audioCodec)),o=(yield St(i.next())).value,a=r.createGatewayPublishMessage(t,o),s;try{s=yield a}catch(u){throw i.throw(u),(u==null?void 0:u.code)===I.WS_ABORT&&t.forEach(p=>{let{track:f}=p;r.pendingLocalTracks.indexOf(f)===-1&&r.pendingLocalTracks.push(f)}),r.unbindLocalTrackEvents(t),u}let c=r.mapPubResToRemoteConfig(a,s),l=(yield St(i.next(c))).value,d=D("ENABLE_VIDEO_SEI");n.forEach(async u=>{let p=u.getRTCRtpTransceiver();p&&d&&(u.trackMediaType===Se.VIDEO?await CMe(p.sender,u):u.trackMediaType===Se.AUDIO&&await async function(f){if(!_t().supportWebRTCEncodedTransform)return void b.warning("browser not support audio encoded transform");if(yE.has(f)||!f.track)return;let m={track:f.track};if(vd()){if(!f.createEncodedStreams)return void b.warning("browser not support createEncodedStreams() API");let y=null;try{y=f.createEncodedStreams()}catch(E){return void b.error("create audio-encoded-streams error",E&&E.message)}let v=new TransformStream({transform(E,w){m.controller||(m.controller=w),f.track&&f.track.id!==m.track.id&&(b.debug("audio track changed: ".concat(m.track.id," => ").concat(f.track.id)),m.track.removeEventListener("ended",g),m.track=f.track,m.track.addEventListener("ended",g)),w.enqueue(E)}});y.readable.pipeThrough(v).pipeTo(y.writable)}else if(Dn()){if(typeof RTCRtpScriptTransform>"u")return void b.warning("browser not support RTCRtpScriptTransform");let y=S_(),v=new MessageChannel;await new de(w=>y.onmessage=S=>{S.data==="registered"&&w(void 0)});let E=new RTCRtpScriptTransform(y,{name:"tx",port:v.port2},[v.port2]);f.transform=E,await new de(w=>y.onmessage=S=>{S.data==="started"&&w(void 0)}),v.port1.onmessage=w=>{var S;w.data.transformed&&f.track&&((S=f.track)===null||S===void 0?void 0:S.id)!==m.track.id&&(b.debug("audio track changed: ".concat(m.track.id," => ").concat(f.track.id)),m.track.removeEventListener("ended",g),m.track=f.track,m.track.addEventListener("ended",g))},m.worker=y}function g(){if(f.track){if(this.id!==f.track.id)return;f.track.removeEventListener("ended",g)}let y=yE.get(f);if(y){yE.delete(f);try{var v,E;(v=y.controller)===null||v===void 0||v.terminate(),(E=y.worker)===null||E===void 0||E.terminate()}catch(w){b.warning(w&&w.message)}}}yE.set(f,m),f.track.addEventListener("ended",g)}(p.sender))}),t.forEach(u=>{let{type:p}=u;r.statsCollector.addLocalStats(p)}),r.assignLocalTracks(t,l),r.statsUploader.startUploadOutboundStats(),t.forEach(u=>{let{track:p,type:f}=u,m=Date.now();r.store.publish(p.getTrackId(),f===ie.LocalAudioTrack?"audio":"video",void 0,m)})})()}async updateVideoStreamParameter(e,t){let r=this.localTrackMap.get(t);if(!r)return;if(!(r.track instanceof Qt))return b.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof fs||this.connection instanceof eg))return b.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");let{track:n}=r,i=function(o,a){let s={};return o.height&&o.width&&(s.scaleResolutionDownBy=WN(o,a)),s.maxFramerate=o.framerate?uo(o.framerate):void 0,s.maxBitrate=o.bitrate?1e3*o.bitrate:void 0,s}(e,n);if(n._encoderConfig||(n._encoderConfig={}),t!==ie.LocalVideoLowTrack||!D("DISABLE_DUAL_STREAM_USE_ENCODING")&&_t().supportDualStreamEncoding)i.scaleResolutionDownBy!=null&&(n._encoderConfig.scaleResolutionDownBy=i.scaleResolutionDownBy);else{let o=n._originMediaStreamTrack;if(!o.canvas)return b.warn("[".concat(n.getTrackId(),"] no canvas on track"));(function(a,s){let c=a.canvas;s.width&&(c.width=uo(s.width)),s.height&&(c.height=uo(s.height)),s.framerate&&(c.stopCapture&&c.stopCapture(),c.stopCapture=XD(()=>{!c.startCapture&&c.stopCapture&&c.stopCapture(),c.startCapture&&c.startCapture()},uo(s.framerate)))})(o,e)}i.maxBitrate!=null&&(n._encoderConfig.bitrateMax=i.maxBitrate/1e3),i.maxFramerate!=null&&(n._encoderConfig.frameRate&&typeof n._encoderConfig.frameRate=="object"?n._encoderConfig.frameRate.max=i.maxFramerate:n._encoderConfig.frameRate={max:i.maxFramerate}),b.debug("[".concat(n.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(n._encoderConfig))),await this.connection.updateRtpSenderEncodings(n)}publishLowStream(e){var t=this;return xs(function*(){if(!t.connection||t.state!==At.Connected)return;let r=yield St(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{let i=t.localTrackMap.get(ie.LocalVideoTrack);if(!i)throw new X(I.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(ie.LocalVideoLowTrack))throw new X(I.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));let o=[{track:t.getLowVideoTrack(i.track,e),type:ie.LocalVideoLowTrack}];if(yield*s6(v6(t.doPublish(t.connection,o))),i.track.muted||!i.track.enabled){var n;let a=(n=t.localTrackMap.get(ie.LocalVideoLowTrack))===null||n===void 0?void 0:n.id;a!==void 0&&(yield St(t.connection.muteLocal([a])))}}finally{r()}})()}async republish(){this.pendingLocalTracks.length>0&&(b.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await Ln(this,Oe.RequestRePublish,this.pendingLocalTracks),this.emit(Oe.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(b.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await Ln(this,Oe.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let t=this.pendingRemoteTracks.length-1;t>=0;t--){let{user:r,kind:n}=this.pendingRemoteTracks[t];(n!==Se.AUDIO||r._audio_added_&&r._audioSSRC)&&(n!==Se.VIDEO||r._video_added_&&r._videoSSRC)||this.pendingRemoteTracks.splice(t,1)}if(e)await Ln(this,Oe.RequestReSubscribe,this.pendingRemoteTracks);else for(let{user:t,kind:r}of this.pendingRemoteTracks)await this.subscribe(t,r,r===Se.VIDEO?t._videoSSRC:t._audioSSRC);this.pendingRemoteTracks.forEach(t=>{let{user:r}=t;this.emit(Oe.MediaReconnectEnd,r.uid)}),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==At.Connected)return void e.forEach(n=>{let i=this.pendingLocalTracks.indexOf(n);i!==-1&&this.pendingLocalTracks.splice(i,1)});let t=this.filterTobeUnpublishedTracks(e);if(t.length===0)return;let r=t.find(n=>n[0]==="videoLowTrack");return r&&r[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==At.Connected)return void e.forEach(r=>{let n=this.pendingLocalDataChannels.indexOf(r);n!==-1&&this.pendingLocalDataChannels.splice(n,1)});let t=this.filterTobeUnpublishedDataChannels(e);return t.length!==0?(t.forEach(r=>{let n=this.localDataChannels.indexOf(r);n!==-1&&this.localDataChannels.splice(n,1)}),this.localDataChannels.length===0&&await this.connection.stopDataChannels(this.store.uid),t.map(r=>r.id)):void 0}async unpublishLowStream(){if(!this.connection||this.state!==At.Connected)return;let e=this.localTrackMap.get(ie.LocalVideoLowTrack);if(!e)return;e.track.close();let t=[[ie.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){let r=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map(n=>{let[,{id:i}]=n;return i})),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map(n=>{let[i,{track:o}]=n;return{type:i,track:o}})),t.forEach(n=>{let[i]=n;this.statsCollector.removeLocalStats(i)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadOutboundStats(),r}async subscribeDataChannel(e,t){if(!this.connection||this.state!==At.Connected)throw new X(I.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");let r=t.filter(n=>{var i;return!((i=this.remoteDataChannelMap.get(e))!==null&&i!==void 0&&i.get(n.id))});if(r.length!==0)return await this.connection.createDataChannels(e.uid,r),r.forEach(n=>{var i;this.remoteDataChannelMap.has(e)?(i=this.remoteDataChannelMap.get(e))===null||i===void 0||i.set(n.id,n):this.remoteDataChannelMap.set(e,new Map([[n.id,n]]));let o=this.pendingRemoteDataChannels.findIndex(a=>{let{user:s,id:c}=a;return s.uid===e.uid&&c===n.id});o!==-1&&this.pendingRemoteDataChannels.splice(o,1)}),r.map(n=>n.id)}async subscribe(e,t,r,n,i){var o;if(!this.connection||this.state!==At.Connected)throw new X(I.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((o=this.remoteUserMap.get(e))!==null&&o!==void 0&&o.has(t))return;let a,s,c,l=this.connection.getPreMedia(r);if(l)b.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] preSSRCMap has ssrcId: ").concat(r,", no need to send sub to gateway.")),c=l.transceiver,a=l.track,s=l.id;else if(i){let p=i.find(m=>{let{stream_type:g}=m;return g===t});if(!p)throw new X(I.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));let f=await this.connection.receive(t,p.ssrcs,String(e._uintid),p.attributes);this.connection instanceof fs&&(c=f.transceiver),a=f.track,s=f.id}else{let p=await this.connection.receive(t,[{ssrcId:r,rtx:n}],String(e._uintid),void 0);this.connection instanceof fs&&(c=p.transceiver),a=p.track,s=p.id}t===Se.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(a):(e._audioTrack=new tf(a,e.uid,e._uintid,this.store),b.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(a):(e._videoTrack=new ef(a,e.uid,e._uintid,this.store),b.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),D("ENABLE_VIDEO_SEI")&&c&&(t==Se.VIDEO?await async function(p){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!_t().supportWebRTCEncodedTransform)return void b.warning("browser not support video encoded transform");if(!p.track)return;if(Zm.has(p)){let y=Zm.get(p);return void(y&&(y.onSei=f.onSei))}let m={track:p.track,onSei:f.onSei};if(vd()){if(!p.createEncodedStreams)return void b.warning("browser not support createEncodedStreams() API");let y=null;try{y=p.createEncodedStreams()}catch(E){return void b.error("create video-encoded-streams error",E&&E.message)}let v=new TransformStream({transform(E,w){m.controller||(m.controller=w),p.track&&p.track.id!==m.track.id&&(b.debug("video track changed: ".concat(m.track.id," => ").concat(p.track.id)),m.track.removeEventListener("ended",g),m.track=p.track,m.track.addEventListener("ended",g));let S=function(x){let O=new DataView(x.data),L=0;for(;L+4<x.data.byteLength;){if(O.getUint8(L+0)===0&&O.getUint8(L+1)===0&&O.getUint8(L+2)===0&&O.getUint8(L+3)===1&&O.getUint8(L+4)===6){let j=L+6,W=0,V=0;for(;(V=O.getUint8(j++))===255;)W+=255;W+=V;let Y=TMe(x.data,j,W);return new Uint8Array(Y)}L++}return null}(E);S&&m.onSei&&m.onSei(S),w.enqueue(E)}});y.readable.pipeThrough(v).pipeTo(y.writable)}else if(Dn()){if(typeof RTCRtpScriptTransform>"u")return void b.warning("browser not support RTCRtpScriptTransform");let y=S_(),v=new MessageChannel;await new de(w=>y.onmessage=S=>{S.data==="registered"&&w(void 0)});let E=new RTCRtpScriptTransform(y,{name:"rx",port:v.port2},[v.port2]);p.transform=E,await new de(w=>y.onmessage=S=>{S.data==="started"&&w(void 0)}),v.port1.onmessage=w=>{var S;w.data.transformed&&p.track&&((S=p.track)===null||S===void 0?void 0:S.id)!==m.track.id?(b.debug("video track changed: ".concat(m.track.id," => ").concat(p.track.id)),m.track.removeEventListener("ended",g),m.track=p.track,m.track.addEventListener("ended",g)):w.data.sei&&m.onSei&&m.onSei(w.data.sei)},m.worker=y}function g(){if(p.track){if(this.id!==p.track.id)return;p.track.removeEventListener("ended",g)}(function(y){let v=Zm.get(y);if(v){Zm.delete(y);try{var E,w;(E=v.controller)===null||E===void 0||E.terminate(),(w=v.worker)===null||w===void 0||w.terminate()}catch(S){b.warning(S&&S.message)}}})(p)}Zm.set(p,m),p.track.addEventListener("ended",g)}(c.receiver,{onSei:p=>{var f;(f=e._videoTrack)===null||f===void 0||f._onSei(p)}}):t==Se.AUDIO&&await async function(p){if(!_t().supportWebRTCEncodedTransform)return void b.warning("browser not support audio encoded transform");if(vE.has(p))return;let f={track:p.track};if(vd()){if(!p.createEncodedStreams)return void b.warning("browser not support createEncodedStreams() API");let g=null;try{g=p.createEncodedStreams()}catch(v){return void b.error("create audio-encoded-streams error",v&&v.message)}let y=new TransformStream({transform(v,E){f.controller||(f.controller=E),p.track&&p.track.id!==f.track.id&&(b.debug("audio track changed: ".concat(f.track.id," => ").concat(p.track.id)),f.track.removeEventListener("ended",m),f.track=p.track,f.track.addEventListener("ended",m)),E.enqueue(v)}});g.readable.pipeThrough(y).pipeTo(g.writable)}else if(Dn()){if(typeof RTCRtpScriptTransform>"u")return void b.warning("browser not support RTCRtpScriptTransform");let g=S_(),y=new MessageChannel;await new de(E=>g.onmessage=w=>{w.data==="registered"&&E(void 0)});let v=new RTCRtpScriptTransform(g,{name:"rx",port:y.port2},[y.port2]);p.transform=v,await new de(E=>g.onmessage=w=>{w.data==="started"&&E(void 0)}),y.port1.onmessage=E=>{var w;E.data.transformed&&p.track&&((w=p.track)===null||w===void 0?void 0:w.id)!==f.track.id&&(b.debug("audio track changed: ".concat(f.track.id," => ").concat(p.track.id)),f.track.removeEventListener("ended",m),f.track=p.track,f.track.addEventListener("ended",m))},f.worker=g}function m(){p.track.removeEventListener("ended",m),function(g){let y=vE.get(g);if(y){vE.delete(g);try{var v,E;(v=y.controller)===null||v===void 0||v.terminate(),(E=y.worker)===null||E===void 0||E.terminate()}catch(w){b.warning(w&&w.message)}}}(p)}vE.set(p,f),p.track.addEventListener("ended",m)}(c.receiver));let d=this.remoteUserMap.get(e);d?d.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();let u=this.pendingRemoteTracks.findIndex(p=>{let{user:f,kind:m}=p;return f.uid===e.uid&&t===m});u!==-1&&(this.pendingRemoteTracks.splice(u,1),this.emit(Oe.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==At.Connected)throw new X(I.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter(i=>{var o;let{user:a,mediaType:s}=i;return!((o=this.remoteUserMap.get(a))!==null&&o!==void 0&&o.has(s))});let t=[],r=new Map;e.forEach(i=>{if(!this.connection)return;let o=this.connection.getPreMedia(i.ssrcId);o?r.set(i.ssrcId,o):t.push(i)});let n=await this.connection.batchReceive(t.map(i=>{let{user:o,mediaType:a,ssrcId:s,rtxSsrcId:c}=i;return{kind:a,ssrcMsg:[{ssrcId:s,rtx:c}],mslabel:String(o._uintid)}}));t.forEach((i,o)=>{r.set(i.ssrcId,n[o])}),e.forEach(i=>{let{user:o,mediaType:a,ssrcId:s}=i,c=r.get(s);if(!c)return void b.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] cannot find ").concat(o.uid," subscribe data,").concat(a,", ").concat(s));let{track:l,id:d,transceiver:u}=c;a===Se.AUDIO?(o._audioTrack?o._audioTrack._updateOriginMediaStreamTrack(l):(o._audioTrack=new tf(l,o.uid,o._uintid,this.store),b.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(o._audioTrack.getTrackId()))),u&&o._audioTrack._updateRtpTransceiver(u),this.bindRemoteTrackEvents(o,o._audioTrack)):(o._videoTrack?o._videoTrack._updateOriginMediaStreamTrack(l):(o._videoTrack=new ef(l,o.uid,o._uintid,this.store),b.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(o._videoTrack.getTrackId()))),u&&o._videoTrack._updateRtpTransceiver(u),this.bindRemoteTrackEvents(o,o._videoTrack));let p=this.remoteUserMap.get(o);p?p.set(a,d):this.remoteUserMap.set(o,new Map([[a,d]])),this.statsCollector.addRemoteStats(o.uid),this.statsUploader.startUploadInboundStats();let f=this.pendingRemoteTracks.findIndex(m=>{let{user:g,kind:y}=m;return g.uid===o.uid&&a===y});f!==-1&&(this.pendingRemoteTracks.splice(f,1),this.emit(Oe.MediaReconnectEnd,o.uid))})}async unsubscribe(e,t,r){let n=this.pendingRemoteTracks.filter(a=>{let{user:s,kind:c}=a;return t!==void 0?s.uid===e.uid&&t===c:s.uid===e.uid});if(n.forEach(a=>{let s=this.pendingRemoteTracks.indexOf(a);this.pendingRemoteTracks.splice(s,1)}),this.connection&&this.state===At.Connected||r||n.forEach(a=>{let{kind:s}=a;var c;if(s===Se.AUDIO)(c=e._audioTrack)===null||c===void 0||c._destroy(),e._audioTrack=void 0;else if(s===Se.VIDEO){var l;(l=e._videoTrack)===null||l===void 0||l._destroy(),e._videoTrack=void 0}}),!this.connection||this.state!==At.Connected)return;let i=this.filterTobeUnSubscribedTracks(e,t);if(i.length===0)return;await this.connection.stopReceiving(i.map(a=>{let[,{id:s}]=a;return s}));let o=this.createUnsubscribeMessage(i);return this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),i.forEach(a=>{let[s,{kind:c}]=a;var l,d;if(c===Se.VIDEO&&s._videoSSRC&&((l=this.connection)===null||l===void 0||l.setStatsRemoteVideoIsReady(s._videoSSRC,!1)),c===Se.VIDEO)this.unbindRemoteTrackEvents(s._videoTrack),r||((d=s._videoTrack)===null||d===void 0||d._destroy(),s._videoTrack=void 0);else if(c===Se.AUDIO){var u;this.unbindRemoteTrackEvents(s._audioTrack),!r&&((u=s._audioTrack)===null||u===void 0||u._destroy(),s._audioTrack=void 0)}}),o}async unsubscribeDataChannel(e,t){if(t.forEach(i=>{let o=this.pendingRemoteDataChannels.findIndex(a=>a.id===i.id);o!==-1&&this.pendingRemoteDataChannels.splice(o,1)}),!this.connection)return;let r=this.filterTobeUnSubscribedDataChannels(e,t);if(r.length===0)return;t.forEach(i=>{i._close()});let n=this.remoteDataChannelMap.get(e);return r.forEach(i=>{n&&n.delete(i.id)}),n&&n.size===0&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),r.map(i=>i.id)}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(let{user:i,mediaType:o}of e){let a=this.pendingRemoteTracks.filter(s=>{let{user:c,kind:l}=s;return o!==void 0?c.uid===i.uid&&o===l:c.uid===i.uid});a.forEach(s=>{let c=this.pendingRemoteTracks.indexOf(s);this.pendingRemoteTracks.splice(c,1)}),t=t.concat(a)}if(!this.connection||this.state!==At.Connected)return void t.forEach(i=>{let{user:o,kind:a}=i;var s;if(a===Se.AUDIO)(s=o._audioTrack)===null||s===void 0||s._destroy(),o._audioTrack=void 0;else if(a===Se.VIDEO){var c;(c=o._videoTrack)===null||c===void 0||c._destroy(),o._videoTrack=void 0}});let r=Ps(e).call(e,(i,o)=>{let{user:a,mediaType:s}=o,c=this.filterTobeUnSubscribedTracks(a,s);return i.concat(c)},[]);if(r.length===0)return;await this.connection.stopReceiving(r.map(i=>{let[,{id:o}]=i;return o}));let n=this.createUnsubscribeAllMessage(r);return this.withdrawRemoteTracks(r),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),r.forEach(i=>{let[o,{kind:a}]=i;var s,c;if(a===Se.VIDEO&&o._videoSSRC&&((s=this.connection)===null||s===void 0||s.setStatsRemoteVideoIsReady(o._videoSSRC,!1)),a===Se.VIDEO)this.unbindRemoteTrackEvents(o._videoTrack),(c=o._videoTrack)===null||c===void 0||c._destroy(),o._videoTrack=void 0;else if(a===Se.AUDIO){var l;this.unbindRemoteTrackEvents(o._audioTrack),(l=o._audioTrack)===null||l===void 0||l._destroy(),o._audioTrack=void 0}}),n}isPreSubScribe(e){return!this.connection||this.state!==At.Connected?!1:!!this.connection.getPreMedia(e)}async muteRemote(e,t){if(!this.connection)return;let r=this.remoteUserMap.get(e);if(!r)return void b.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!r.get(t))return void b.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));let n=t===Se.VIDEO?e._videoSSRC:e._audioSSRC;n!==void 0&&this.connection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;let r=this.remoteUserMap.get(e);if(!r)return void b.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."));r.get(t)||b.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."))}getAllTracks(e){let t=this.localTrackMap.get(ie.LocalAudioTrack);if((t==null?void 0:t.track)instanceof an){let r=t.track;return Array.from(this.localTrackMap.entries()).filter(n=>{let[i]=n;return i!==ie.LocalAudioTrack}).filter(n=>{let[i]=n;return!(e&&i===ie.LocalVideoLowTrack)}).map(n=>{let[,{track:i}]=n;return i}).concat(r.trackList)}return Array.from(this.localTrackMap.entries()).filter(r=>{let[n]=r;return!(e&&n===ie.LocalVideoLowTrack)}).map(r=>{let[,{track:n}]=r;return n})}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,r,n,i){if(e){let a=this.localTrackMap.get(ie.LocalAudioTrack),s=n?this.localTrackMap.get(ie.LocalVideoLowTrack):this.localTrackMap.get(ie.LocalVideoTrack);be.publish(this.store.sessionId,{eventElapse:Hn.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.track.getTrackLabel(),videoName:s==null?void 0:s.track.getTrackLabel(),screenshare:(s==null?void 0:s.track._hints.indexOf(nr.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;r||(r=[]);let a=r.find(c=>c instanceof vr),s=n?(o=this.localTrackMap.get(ie.LocalVideoTrack))===null||o===void 0?void 0:o.track:r.find(c=>c instanceof Qt);be.publish(this.store.sessionId,{eventElapse:Hn.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.getTrackLabel(),videoName:s==null?void 0:s.getTrackLabel(),screenshare:(s==null?void 0:s._hints.indexOf(nr.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,r,n){let i=n===Se.VIDEO?r._videoSSRC:r._audioSSRC;i&&be.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===Se.VIDEO,audio:n===Se.AUDIO,peerid:r.uid,subscribeRequestid:i,p2pid:this.store.p2pId,eventElapse:Hn.measureFromSubscribeStart(this.store.clientId,i),preSsrc:this.isPreSubScribe(i)})}reset(){b.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new zn("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new eg({},this.store):new fs({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();let e=this.localTrackMap.get(ie.LocalAudioTrack);if((e==null?void 0:e.track)instanceof an){if(e.track.trackList.length>0){let t=e.track;e.track.trackList.forEach(r=>{t.removeAudioTrack(r)})}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=At.Disconnected}getStats(){var e;return(e=this.connection)===null||e===void 0?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return((t=this.connection)===null||t===void 0?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){let e=this.localTrackMap.get(ie.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){let e=this.localTrackMap.get(ie.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){let t=this.localTrackMap.get(e);return t&&t.track instanceof Qt||t&&t.track instanceof vr?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}getRemoteMedia(e){var t;let r=Array.from(So(t=this.remoteUserMap).call(t)).find(n=>n.uid===e);return r?{audioTrack:r.audioTrack,audioSSRC:r._audioSSRC,videoTrack:r.videoTrack,videoSSRC:r._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(r=>{let[n]=r;return{uid:n.uid,level:n.audioTrack?100*n.audioTrack._source.getAccurateVolumeLevel():0}}),t=this.localTrackMap.get(ie.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Gy(e).call(e,(r,n)=>r.level-n.level),e}async disconnectForReconnect(){this.connection&&(b.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=At.Reconnecting,D("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t]=e;var r;t._videoTrack&&t._videoTrack._player&&((r=t._videoTrack._player.getVideoElement())===null||r===void 0||r.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new eg({},this.store):new fs({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(e=>{var t;let[r,{track:n}]=e;switch(r){case ie.LocalVideoTrack:pe(t=n._hints).call(t,nr.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case ie.LocalAudioTrack:n instanceof an?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);case ie.LocalVideoLowTrack:}}),this.emit(Oe.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;Array.from(So(r).call(r)).forEach(n=>{this.setPendingRemoteMedia(t,n)}),this.emit(Oe.MediaReconnectStart,t.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.localDataChannels.length!==0&&(this.localDataChannels.forEach(e=>{this.pendingLocalDataChannels.push(e)}),this.localDataChannels.length=0),this.remoteDataChannelMap.size!==0&&(Array.from(this.remoteDataChannelMap.entries()).forEach(e=>{let[t,r]=e;Array.from(So(r).call(r)).forEach(n=>{this.setPendingRemoteDataChannel(t,n)})}),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),b.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(let r of this.pendingRemoteDataChannels){let{user:n,id:i}=r;if((e instanceof ql?e.uid:e)===n.uid&&i===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(let r of this.pendingRemoteTracks){let{user:n,kind:i}=r;if((e instanceof ql?e.uid:e)===n.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return xs(function*(){if(!t.connection||t.state!==At.Connected)return;let r=yield St(t.mutex.lock("From P2PChannel.restartICE")),n;try{n=yield St(t.connection.restartICE(e));let o=yield St(n.next());if(o.done)return;let a=o.value,s=yield a;switch(t.reportPCDisconnectedOrFailed(e),e){case lo.TCP:t._pcStatsUploadType=Dc.TCP_RESTART;break;case lo.RELAY:t._pcStatsUploadType=Dc.RELAY_RESTART;break;default:t._pcStatsUploadType=Dc.OLD_RESTART}t._isInRestartIce=!0,n.next(s)}catch(o){var i;(i=n)===null||i===void 0||i.throw(o)}finally{r()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;let e=this.connection.getStats(),t=this.localTrackMap.get(ie.LocalVideoTrack),r=this.localTrackMap.get(ie.LocalAudioTrack),n=e.videoSend.find(f=>f.ssrc===(t==null?void 0:t.ssrcs[0].ssrcId)),i=e.audioSend.find(f=>f.ssrc===(r==null?void 0:r.ssrcs[0].ssrcId));if(!n||!i)return 1;let o=oa(this,Oe.NeedSignalRTT),a=n?n.rttMs:void 0,s=i?i.rttMs:void 0,c=a&&s?(a+s)/2:a||s,l=(c&&o?(c+o)/2:c||o)||0,d=100*e.sendPacketLossRate*.7/50+.3*l/1500,u=d<.17?1:d<.36?2:d<.59?3:d<.1?4:5,p=t==null?void 0:t.track;if(p&&p._encoderConfig&&p._hints.indexOf(nr.SCREEN_TRACK)===-1){let f=p._encoderConfig.bitrateMax,m=e.bitrate.actualEncoded;if(f&&m){let g=(1e3*f-m)/(1e3*f);return cQ[g<.15?0:g<.3?1:g<.45?2:g<.6?3:4][u]}}return u}getDownlinkNetworkQuality(){if(!this.connection)return 0;let e=this.connection.getStats(),t=0;return Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n]=r,i=n._audioSSRC,o=n._videoSSRC,a=e.audioRecv.find(m=>m.ssrc===i),s=e.videoRecv.find(m=>m.ssrc===o);if(!a&&!s)return void(t+=1);let c=oa(this,Oe.NeedSignalRTT),l=e.rtt,d=(l&&c?(l+c)/2:l||c)||0,u=a?a.jitterMs:void 0,p=e.recvPacketLossRate,f=.7*p*100/50+.3*d/1500;u&&(f=.6*p*100/50+.2*d/1500+.2*u/400),t+=f<.1?1:f<.17?2:f<.36?3:f<.59?4:5}),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new de((t,r)=>{this.handleMuteLocalTrack(e,t,r)})}async replaceTrack(e,t){var r;if(b.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==At.Connected)return;let n=Array.from(this.localTrackMap.entries()).find(o=>{let[,{track:a}]=o;return e===a});if(!n)return;let i=n[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:i}]),this.bindLocalTrackEvents([{track:t,type:i}]),n[1].track=t),await((r=this.connection)===null||r===void 0?void 0:r.replaceTrack(t,n[1].id)),this.isPlanB){let o=n[1];o.id=t._mediaStreamTrack.id,this.localTrackMap.set(i,o)}if(i===ie.LocalVideoTrack&&!D("DISABLE_DUAL_STREAM_USE_ENCODING")&&_t().supportDualStreamEncoding){let o=this.localTrackMap.get(ie.LocalVideoLowTrack);if(o){let a=e._mediaStreamTrack.clone();o.track._originMediaStreamTrack.stop(),o.track._mediaStreamTrack=a,o.track._originMediaStreamTrack=a,await new de((s,c)=>{this.handleReplaceTrack(o.track,s,c,!0)})}}}filterTobePublishedTracks(e,t,r){let n=[],i=this.getAllTracks();e=Dp(e=e.filter(c=>i.indexOf(c)===-1));let o,a=!1,s=this.localTrackMap.get(ie.LocalAudioTrack);for(let c of e){if(c instanceof Qt&&(this.localTrackMap.has(ie.LocalVideoTrack)||a?new X(I.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:c,type:ie.LocalVideoTrack}),a=!0),t)){let l=this.getLowVideoTrack(c,r);n.push({track:l,type:ie.LocalVideoLowTrack})}if(c instanceof vr)if(s){let l=s.track;if(l instanceof an)oO([c]),l.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0);else{let d=BI([l,c]);b.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(d.getTrackId(),"]")),this.replaceTrack(l,d)}}else o instanceof an?(oO([c]),o.addAudioTrack(c)):o||!c._useAudioElement&&_t().webAudioMediaStreamDest&&!c._bypassWebAudio?o=BI(o?[c,o]:[c]):o=c}return o&&(b.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(o.getTrackId(),"]")),n.push({track:o,type:ie.LocalAudioTrack})),n}filterTobeUnpublishedTracks(e){let t=[],r=this.getAllTracks();e=Dp(e=e.filter(n=>r.indexOf(n)!==-1));for(let n of e){if(n instanceof vr){let i=this.localTrackMap.get(ie.LocalAudioTrack);if(!i)continue;i.track instanceof an?(i.track.removeAudioTrack(n),this.unbindLocalAudioTrackEvents(n),i.track.trackList.length===0&&(t.push([ie.LocalAudioTrack,i]),i.track.close())):t.push([ie.LocalAudioTrack,i])}if(n instanceof Qt){let i=this.localTrackMap.get(ie.LocalVideoTrack);if(!i)continue;t.push([ie.LocalVideoTrack,i]);let o=this.localTrackMap.get(ie.LocalVideoLowTrack);o&&t.push([ie.LocalVideoLowTrack,o])}}return t}filterTobePublishedDataChannels(e){return e=(e=Dp(e)).filter(t=>this.localDataChannels.findIndex(r=>r.id===t.id)===-1)}filterTobeUnpublishedDataChannels(e){return e=(e=(e=Dp(e)).filter(t=>this.localDataChannels.indexOf(t)!==-1)).filter(t=>t._originDataChannel)}bindLocalTrackEvents(e){e.forEach(t=>{let{track:r,type:n}=t;switch(n){case ie.LocalVideoTrack:r.addListener(fe.GET_STATS,this.handleGetLocalVideoStats),r.addListener(fe.GET_RTC_STATS,this.handleGetRTCStats),r.addListener(fe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(fe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(fe.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.addListener(fe.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.addListener(fe.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.addListener(fe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(fe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case ie.LocalAudioTrack:this.bindLocalAudioTrackEvents(r);case ie.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){e instanceof an?e.trackList.forEach(r=>{r.addListener(fe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(fe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(fe.GET_STATS,this.handleGetLocalAudioStats),r.addListener(fe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(fe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(fe.GET_STATS,this.handleGetLocalAudioStats),e.addListener(fe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(fe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(fe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(fe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(fe.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(fe.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(t=>{let[r,{track:n}]=t;return{track:n,type:r}})),e.forEach(t=>{let{track:r,type:n}=t;switch(n){case ie.LocalVideoTrack:r.off(fe.GET_STATS,this.handleGetLocalVideoStats),r.off(fe.GET_RTC_STATS,this.handleGetRTCStats),r.off(fe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(fe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(fe.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.off(fe.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.off(fe.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.off(fe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(fe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case ie.LocalAudioTrack:this.unbindLocalAudioTrackEvents(r);case ie.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof an?e.trackList.forEach(t=>{t.off(fe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(fe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(fe.GET_STATS,this.handleGetLocalAudioStats),t.off(fe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(fe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(fe.GET_STATS,this.handleGetLocalAudioStats),e.off(fe.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(fe.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(fe.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(fe.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(fe.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(fe.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof ef&&t.addListener(fe.GET_STATS,r=>{r(this.handleGetRemoteVideoStats(e))}),t instanceof tf&&t.addListener(fe.GET_STATS,r=>{r(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(fe.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;r.has(Se.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),r.has(Se.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)})}createGatewayPublishMessage(e,t){return e.map((r,n)=>{var i;let o,a,{track:s,type:c}=r;switch(c){case ie.LocalAudioTrack:o=Nt.Audio,a={dtx:s instanceof sw&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case ie.LocalVideoTrack:o=pe(i=s._hints).call(i,nr.SCREEN_TRACK)?Nt.Screen:Nt.High,a=Qs(Qs({},fF(s)),{},{codec:this.store.codec,svc_mode:ZN()});break;case ie.LocalVideoLowTrack:o=Nt.Low,a=Qs(Qs({},fF(s)),{},{codec:this.store.codec,svc_mode:ZN()})}return{stream_type:o,attributes:a,ssrcs:t[n]}})}createGatewayUnpublishMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case ie.LocalVideoTrack:n=pe(r=o._hints).call(r,nr.SCREEN_TRACK)?Nt.Screen:Nt.High;break;case ie.LocalAudioTrack:n=Nt.Audio;break;case ie.LocalVideoLowTrack:n=Nt.Low}return{stream_type:n,ssrcs:a,mid:s}})}assignLocalTracks(e,t){e.forEach((r,n)=>{let{track:i,type:o}=r;this.localTrackMap.set(o,{track:i,id:t[n].id,ssrcs:t[n].localSSRC})})}withdrawLocalTracks(e){e.forEach(t=>{let[r]=t;this.localTrackMap.delete(r)})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(Oe.PeerConnectionStateChange,t),t!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),t==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),D("NEW_ICE_RESTART")){var r;if(pe(r=this._restartStates).call(r,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;let n=a=>{(e.iceConnectionState==="disconnected"||e.iceConnectionState==="checking"||e.iceConnectionState==="failed")&&(b.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(a)),oa(this,Oe.QueryClientConnectionState)==="CONNECTED"&&this.emit(Oe.RequestRestartICE,a))},i=()=>{e.iceConnectionState!=="disconnected"&&e.iceConnectionState!=="checking"&&e.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),b.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(Oe.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},o=D("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(D("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&_t().supportPCSetConfiguration)n(lo.RELAY),this._restartTimer=window.setTimeout(i,o);else if(_r())n(lo.UDP),this._restartTimer=window.setTimeout(i,4e3);else{if(n(lo.TCP),_t().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{n(lo.RELAY),this._restartTimer=window.setTimeout(i,o)},o));this._restartTimer=window.setTimeout(i,o)}},800))}}else{if(t==="disconnected"&&e.iceConnectionState==="disconnected")return setTimeout(()=>{e.iceConnectionState==="disconnected"&&D("ICE_RESTART")&&oa(this,Oe.QueryClientConnectionState)==="CONNECTED"&&this.emit(Oe.RequestRestartICE)},800),void setTimeout(()=>{e.peerConnectionState==="disconnected"&&(b.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(Oe.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);t==="failed"&&(b.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(Oe.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=t=>{t!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(t,")")),be.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:t,tag:Er.TRACER}).onSuccess(),this.emit(Oe.IceConnectionStateChange,t)},e.onICETransportStateChange=t=>{b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(t,")"))},e.onDTLSTransportStateChange=t=>{b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(t,")"))},e.onDTLSTransportError=t=>{b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(t,")"))},e.onFirstAudioDecoded=t=>{var r;let n=Array.from(So(r=this.remoteUserMap).call(r)).find(o=>o._audioSSRC===t);var i;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),(i=n.audioTrack)===null||i===void 0||i.emit(Zp.FIRST_FRAME_DECODED),be.firstRemoteFrame(this.store.sessionId,vn.FIRST_AUDIO_DECODE,hr.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:Hn.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=t=>{var r;let n=Array.from(So(r=this.remoteUserMap).call(r)).find(i=>i._audioSSRC===t);n&&be.firstRemoteFrame(this.store.sessionId,vn.FIRST_AUDIO_RECEIVED,hr.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:Hn.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(t,r,n)=>{this.reportVideoFirstFrameDecoded(t,r,n)},e.onFirstVideoReceived=t=>{var r;let n=Array.from(So(r=this.remoteUserMap).call(r)).find(i=>i._videoSSRC===t);n&&be.firstRemoteFrame(this.store.sessionId,vn.FIRST_VIDEO_RECEIVED,hr.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:Hn.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(t,r)=>{let n=t.candidateType==="relay",i=r.candidateType==="relay";r.candidateType!=="unknown"&&n===i||this.emit(Oe.ConnectionTypeChange,n),b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(od(r))," -> ").concat(JSON.stringify(od(t)),")"))},e.onSelectedRemoteCandidateChanged=(t,r)=>{b.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(od(r))," -> ").concat(JSON.stringify(od(t)),")"))},e.onFirstVideoDecodedTimeout=t=>{this.reportVideoFirstFrameDecoded(t,void 0,void 0,!0)},e.getLocalVideoStats=()=>{let t=this.statsCollector.getLocalVideoTrackStats(),r=this.statsCollector.getRTCStats();return Qs(Qs({},t),r)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.getLocalVideoStats=void 0}filterTobeMutedTracks(e){let t=[];if(this.getAllTracks().indexOf(e)===-1)return t;let r=this.localTrackMap.get(ie.LocalAudioTrack);if(e instanceof vr&&(r==null?void 0:r.track)instanceof an)return r.track.isActive||t.push([ie.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(n&&(t.push(n),n[0]===ie.LocalVideoTrack)){let i=this.localTrackMap.get(ie.LocalVideoLowTrack);i&&t.push([ie.LocalVideoLowTrack,i])}return t}filterTobeUnmutedTracks(e){let t=[],r=this.localTrackMap.get(ie.LocalAudioTrack);if(e instanceof vr&&(r==null?void 0:r.track)instanceof an)return r.track.isActive&&t.push([ie.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(n)if(n[0]===ie.LocalVideoTrack){t.push(n);let i=this.localTrackMap.get(ie.LocalVideoLowTrack);i&&t.push([ie.LocalVideoLowTrack,i])}else t.push(n);return t}createMuteMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case ie.LocalAudioTrack:n=Nt.Audio;break;case ie.LocalVideoTrack:n=pe(r=o._hints).call(r,nr.SCREEN_TRACK)?Nt.Screen:Nt.High;break;case ie.LocalVideoLowTrack:n=Nt.Low}return{stream_type:n,ssrcs:a,mid:s}})}createUnmuteMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case ie.LocalAudioTrack:n=Nt.Audio;break;case ie.LocalVideoTrack:n=pe(r=o._hints).call(r,nr.SCREEN_TRACK)?Nt.Screen:Nt.High;break;case ie.LocalVideoLowTrack:n=Nt.Low}return{stream_type:n,ssrcs:a,mid:s}})}filterTobeUnSubscribedTracks(e,t){let r=[],n=this.remoteUserMap.get(e);if(!n)return r;if(t){let i=n.get(t);if(!i)return r;r.push([e,{kind:t,id:i}])}else Array.from(n.entries()).forEach(i=>{let[o,a]=i;r.push([e,{kind:o,id:a}])});return r}filterTobeUnSubscribedDataChannels(e,t){let r=[];return t.forEach(n=>{var i;(i=this.remoteDataChannelMap.get(e))!==null&&i!==void 0&&i.has(n.id)&&r.push(n)}),r}createUnsubscribeMessage(e){let t=[];return e.forEach(r=>{let[n,{kind:i,id:o}]=r;switch(i){case Se.VIDEO:return void(n._videoSSRC&&t.push({stream_type:Se.VIDEO,ssrcId:n._videoSSRC}));case Se.AUDIO:return void(n._audioSSRC&&t.push({stream_type:Se.AUDIO,ssrcId:n._audioSSRC}))}}),t}createUnsubscribeAllMessage(e){let t=new Map;return e.forEach(r=>{let[n,{kind:i}]=r;if(t.has(n)){let o=t.get(n);i===Se.VIDEO?o|=nn.Video:o|=nn.Audio,t.set(n,o)}else i===Se.VIDEO?t.set(n,nn.Video):t.set(n,nn.Audio)}),{users:Array.from(t.entries()).map(r=>{let[n,i]=r;return{stream_id:n.uid,stream_type:i}})}}withdrawRemoteTracks(e){e.forEach(t=>{let[r,{kind:n}]=t,i=this.remoteUserMap.get(r);i&&(i.delete(n),Array.from(i.entries()).length===0&&this.remoteUserMap.delete(r))})}async updateBitrateLimit(e){let t=this.localTrackMap.get(ie.LocalVideoTrack),r=this.localTrackMap.get(ie.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),r&&e.low_stream_uplink&&await r.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(e,t){return e.map((r,n)=>{var i;let{stream_type:o}=r;return(i=t.find(a=>{let{stream_type:s}=a;return o===s}))===null||i===void 0?void 0:i.attributes})}async tryToUnmuteAudio(e){for(let r=0;r<e.length;r++)if(e[r]instanceof vr){var t;let n=this.filterTobeUnmutedTracks(e[r]);if(n.length===0)continue;await((t=this.connection)===null||t===void 0?void 0:t.unmuteLocal(n.map(o=>{let[,{id:a}]=o;return a})));let i=this.createUnmuteMessage(n);return void await Wt(this,Oe.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!((t=this.connection)===null||t===void 0||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Oe.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(Oe.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Tn(FD(this.dtlsFailedCount,Vr)),this.emit(Oe.RequestReconnect)}async reconnectP2P(){let e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await Ln(this,Oe.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(Oe.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(ie.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof Qt)}throwIfTrackTypeNotMatch(e){if(e.filter(t=>t instanceof Qt).length>1)throw new X(I.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(t=>t instanceof vr).length>1&&(e.some(t=>t instanceof vr&&t._bypassWebAudio)||!_t().webAudioMediaStreamDest))throw new X(I.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(let t of e){if(t instanceof Qt&&this.pendingLocalTracks.some(r=>r instanceof Qt))throw new X(I.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof vr&&this.pendingLocalTracks.some(r=>r instanceof vr)&&(!_t().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some(r=>r instanceof vr&&r._bypassWebAudio)))throw new X(I.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){let r=!D("DISABLE_DUAL_STREAM_USE_ENCODING")&&_t().supportDualStreamEncoding,n=Qs(Qs({},{width:160,height:120,framerate:15,bitrate:50}),t),i;i=r?e._mediaStreamTrack.clone():iO(e,n);let o=qt(8,"track-low-"),a=new Qt(i,Qs(Qs({},r&&{scaleResolutionDownBy:WN(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,o);return a.on(Vu.TRANSCEIVER_UPDATED,s=>{e._updateRtpTransceiver(s,Pf.LOW_STREAM)}),a._hints.push(nr.LOW_STREAM),e.on("sei-to-send",s=>{a.emit("sei-to-send",s)}),e.addListener(fe.NEED_CLOSE,()=>{a.close()}),a}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof fs){var i,o,a,s;let c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:l,dtlsTransportState:d,peerConnectionState:u}=this.connection,{local:p,remote:f}=await this.connection.getSelectedCandidatePair();be.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:l,dtlsstate:d,connectionstate:u,intSucc:t?1:2,error:n,selectedLocalCandidateProtocol:(i=p==null?void 0:p.protocol)!==null&&i!==void 0?i:"",selectedLocalCandidateType:(o=p.candidateType)!==null&&o!==void 0?o:"",selectedLocalCandidateAddress:"".concat(p.address,":").concat(p.port),selectedRemoteCandidateProtocol:(a=f.protocol)!==null&&a!==void 0?a:"",selectedRemoteCandidateType:(s=f.candidateType)!==null&&s!==void 0?s:"",selectedRemoteCandidateAddress:"".concat(f.address,":").concat(f.port),restartCnt:r,preallocation:this.connection.isPreallocation})}}reportVideoFirstFrameDecoded(e,t,r,n){var i;let o=Array.from(So(i=this.remoteUserMap).call(i)).find(a=>a._videoSSRC===e);if(o){n||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());let a=this.store.keyMetrics,s=a.subscribe.find(c=>c.userId===o.uid&&c.type==="video");be.firstRemoteVideoDecode(this.store.sessionId,vn.FIRST_VIDEO_DECODE,hr.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:r,subscribeElapse:Hn.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:a.requestAPEnd||0,apStart:a.requestAPStart||0,joinGwEnd:a.joinGatewayEnd||0,joinGwStart:a.joinGatewayStart||0,pcEnd:a.peerConnectionEnd||0,pcStart:a.peerConnectionStart||0,subscriberEnd:(s==null?void 0:s.subscribeEnd)||0,subscriberStart:(s==null?void 0:s.subscribeStart)||0,videoAddNotify:(s==null?void 0:s.streamAdded)||0,state:n?1:0,firstFrame:(s==null?void 0:s.firstFrame)||0})}}async remoteMediaSsrcChanged(e,t,r){if(!this.connection)return!1;let n=this.remoteUserMap.get(e);if(!n)return!1;let i=n.get(t);if(!i)return!1;let o=await this.connection.getRemoteSSRC(i);return o!==void 0&&o!==r}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(e=>{let[t,{track:r}]=e;t===ie.LocalVideoLowTrack?r._updateRtpTransceiver(void 0,Pf.LOW_STREAM):r._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof fs&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===Dc.TCP_RESTART&&e===lo.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,Dc.DISCONNECTED_OR_FAILED)))}},ve(ot.prototype,"startP2PConnection",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"startP2PConnection"),ot.prototype),ve(ot.prototype,"connect",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"connect"),ot.prototype),ve(ot.prototype,"updateRemoteRTPCapabilities",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"updateRemoteRTPCapabilities"),ot.prototype),ve(ot.prototype,"publishDataChannel",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"publishDataChannel"),ot.prototype),ve(ot.prototype,"unpublish",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"unpublish"),ot.prototype),ve(ot.prototype,"unpublishDataChannel",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"unpublishDataChannel"),ot.prototype),ve(ot.prototype,"unpublishLowStream",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"unpublishLowStream"),ot.prototype),ve(ot.prototype,"subscribeDataChannel",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"subscribeDataChannel"),ot.prototype),ve(ot.prototype,"subscribe",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"subscribe"),ot.prototype),ve(ot.prototype,"massSubscribe",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"massSubscribe"),ot.prototype),ve(ot.prototype,"unsubscribe",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"unsubscribe"),ot.prototype),ve(ot.prototype,"unsubscribeDataChannel",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"unsubscribeDataChannel"),ot.prototype),ve(ot.prototype,"massUnsubscribe",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"massUnsubscribe"),ot.prototype),ve(ot.prototype,"muteRemote",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"muteRemote"),ot.prototype),ve(ot.prototype,"unmuteRemote",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"unmuteRemote"),ot.prototype),ve(ot.prototype,"hasRemoteMediaWithLock",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"hasRemoteMediaWithLock"),ot.prototype),ve(ot.prototype,"disconnectForReconnect",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"disconnectForReconnect"),ot.prototype),ve(ot.prototype,"updateBitrateLimit",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"updateBitrateLimit"),ot.prototype),ve(ot.prototype,"remoteMediaSsrcChanged",[ii],Object.getOwnPropertyDescriptor(ot.prototype,"remoteMediaSsrcChanged"),ot.prototype),ot);function ii(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,o=await i.lock("From P2PChannel.".concat(t));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await n.apply(this,s)}finally{o()}},r}var EZ={};function rg(e){(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&b.debug("install service ".concat(e.name)),EZ[e.name]=e}function bg(e){let t=EZ[e];if(!t)throw new X(I.INVALID_OPERATION,"".concat(e," not found, please use AgoraRTC.use(").concat(e,"Service) to load it first"));return t}function E6(e,t){return bg("DataStream").create(e,t)}function _6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function b6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_6(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var aje=Date.now(),sje=20,sO=new Map,I_=new Map;async function _Z(e){let t=sO.get(e),r=Array.isArray(t)&&t[t.length-1],n=I_.get(e);if(!r)return void(n.isSyncing=!1);let i={uid:r.uid,payload:r.payload};n.firstRecvTs===0&&(n.firstRecvTs=r.recvTs,n.firstSendTs=r.sendTs);let o=r.sendTs-n.firstSendTs,a=o-(Date.now()-n.firstRecvTs);a>0&&(n.firstRecvTs=Date.now()-o);let s=r.mediaDelay+a;s<=0?(t.pop(),bZ(r.context,i),s=0):s=Math.min(s,sje),setTimeout(()=>t.length&&_Z(e),s)}function bZ(e,t){e.safeEmit(ht.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function cje(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return bZ(r,{uid:e.uid,payload:e.payload});let n="".concat(r.id,"-").concat(e.uid),i=sO.get(n)||[],o=i.findIndex(l=>e.sendTs>=l.sendTs),a=b6(b6({},e),{},{context:r,mediaDelay:t,recvTs:Date.now()});o===-1?i.push(a):i.splice(o,0,a),sO.set(n,i);let s=!1;var c;I_.has(n)?s=!((c=I_.get(n))===null||c===void 0||!c.isSyncing):I_.set(n,{isSyncing:s,firstRecvTs:0,firstSendTs:0}),s||_Z(n)}var lje=vt().name;function w6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function S6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w6(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var of="websdk_ng_cache_parameter",dje=D("MAX_PRELOAD_ASYNC_LENGTH"),uje=1e4,mu=new Map,gu=[],HI=null,WI=0,GI=0,IE=new Map,hje=function(e,t){let r=[],n=0,i=async()=>{let o=r.shift();o&&await o(),r.length>0&&n<t?i():n--};return async function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return new de(async(c,l)=>{r.push(async()=>{try{let d=await e(...a);c(d)}catch(d){l(d)}}),n<t&&(n++,i())})}}(wZ,dje),zI=Ui.CancelToken.source();async function wZ(e,t,r,n,i,o){try{if(!D("ENABLE_PRELOAD"))return;if(!_t().supportWebCrypto)return void Od(()=>{b.warn("Your browser does not support preloading, this feature  be run in a secure environment")},"preload_webcrypto_not_supported");if(!r&&r!==null)throw new X(I.INVALID_PARAMS,"Invalid token: ".concat(r,". If you don not use token, set it to null"));r&&En(r,"token",1,2047),En(e,"appid",1,2047),lT(t),n&&dT(n);let a=Lp();b.debug("preload channel ".concat(t,", uid is ").concat(n));let s={appId:e,cname:t,token:r||e,uid:typeof n!="string"?n:null,sid:a,proxyServer:i},c,l;typeof n=="string"?(s.stringUid=n,[l,c]=await de.all([kMe(n,{sid:a,appId:e},zI.token),xB(S6(S6({},s),{},{token:r||e,uid:0}),zI.token)]),s.uid=l.uid,c.gatewayInfo.uid=s.uid,c.gatewayInfo.res.uid=s.uid):(o&&(s.stringUid=o),c=await xB(s,zI.token));let d={sid:a,appId:e,cname:t,token:r||e,uid:s.stringUid||n,intUid:s.uid||c.gatewayInfo.uid,stringUid:s.stringUid,ts:Date.now(),sua:l,ap:c};await async function(u){let p;try{u.uid&&SZ({appId:u.appId,cname:u.cname,token:u.token,uid:u.uid,stringUid:u.stringUid});let f=RZ(u),m=await async function(y,v){try{let E=await window.crypto.subtle.importKey("raw",rQ(v),"AES-GCM",!1,["encrypt"]),w=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},E,Tu(window.btoa(JSON.stringify(y))));return Ed(new Uint8Array(w))}catch{return}}(u,u.token||u.appId);if(!m)return;p=CZ(of);let g=p?JSON.parse(p):[];g.push({[f]:m}),g.length>D("AP_CACHE_NUM")&&g.shift(),pw(of,JSON.stringify(g))}catch(f){b.warn("Error caching server parameters:",f.message),pw(of,"")}}(d),WI++}catch(a){throw GI++,function(s){HI||(HI=window.setTimeout(()=>{let l="";IE.forEach((d,u)=>{l+="".concat(u,": ").concat(d," ;")}),be.reportApiInvoke(null,{name:zr.PRELOAD,options:{success:WI,failed:GI,err:l}}).onError(s),WI=0,GI=0,IE.clear(),HI=null},uje));let c=IE.get(s.code)||0;IE.set(s.code,c+1)}(a),a}}async function T6(e){try{let t=SZ(e);if(!t||e.cloudProxyServer!=="disabled")return;let r=await async function(n,i){try{let o=await window.crypto.subtle.importKey("raw",rQ(i),"AES-GCM",!1,["decrypt"]),a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},o,Tu(n));return JSON.parse(window.atob(Ed(new Uint8Array(a))))}catch{return}}(t,e.token||e.appId);if(!r||!function(n,i){return n.cname===i.cname&&n.appId===i.appId&&n.token===i.token?i.stringUid?n.stringUid===i.stringUid:typeof i.uid=="number"?n.uid===i.uid:n.uid==i.uid:!1}(r,e))return;if(r&&Date.now()-r.ts<D("AP_CACHE_LIFETIME"))return r}catch(t){b.warn("Error get preloadInfo",t.message)}}function SZ(e){let t;try{if(t=CZ(of),!t)return;let r=JSON.parse(t),n=RZ(e),i=function(a,s){for(let c=a.length-1;c>=0;c--)if(s(a[c]))return c;return-1}(r,a=>n in a);if(i===-1)return;let o=r.splice(i,1)[0];return pw(of,JSON.stringify(r)),o[n]}catch(r){b.warn("Error delete preload info: ".concat(t),r.message),pw(of,"")}}function c2(e){if(e){let t=mu.get(e);t&&(window.clearTimeout(t),t=null,mu.delete(e)),pe(gu).call(gu,e)||e.cloudProxyServer!=="disabled"||gu.push(e)}if(mu.size<D("AP_CACHE_NUM")&&gu.length>0){let t=gu.shift();mu.set(t,window.setTimeout(async()=>{let{appId:r,cname:n,token:i,stringUid:o,uid:a,proxyServer:s}=t;try{await hje(r,n,i,a,s,o),mu.has(t)&&c2(t)}catch(c){b.warn("update preload failed",c.message),TZ(t)}},D("AP_UPDATE_INTERVAL")))}}function TZ(e){let t=gu.indexOf(e);t!==-1&&gu.splice(t,1);let r=mu.get(e);r&&(window.clearTimeout(r),r=null,mu.delete(e),c2())}function C6(e,t){let r=e.sua,n=e.ap;t&&r&&be.reqUserAccount(e.sid,{lts:r.requestTime,elapse:r.elapse,success:!0,serverAddr:r.url,stringUid:t,uid:e.intUid,errorCode:null,extend:r.req}),be.reportResourceTiming(e.ap.url,e.sid),be.joinWebProxyAP(e.sid,{lts:n.requestTime,elapse:n.elapse,sucess:1,apServerAddr:n.url,turnServerAddrList:n.proxyInfo.addresses.map(i=>i.ip).join(","),eventType:"disabled",unilbsServerIds:[Dr.CHOOSE_SERVER,Dr.CLOUD_PROXY_FALLBACK].toString()}),be.joinChooseServer(e.sid,{lts:n.requestTime,elapse:n.elapse,succ:!0,csAddr:n.url,opid:n.opid,serverList:n.gatewayInfo.gatewayAddrs.map(i=>i.address),ec:null,cid:n.gatewayInfo.cid.toString(),uid:n.gatewayInfo.uid.toString(),csIp:n.gatewayInfo.csIp,unilbsServerIds:[Dr.CHOOSE_SERVER].toString(),isHttp3:n.isHttp3})}function CZ(e){return window.atob(window.localStorage.getItem(e)||"")}function pw(e,t){window.localStorage.setItem(e,window.btoa(t))}function RZ(e){let t="".concat(e.appId,"_").concat(e.cname);return typeof e.uid=="string"&&(t+="_s_".concat(e.uid)),typeof e.uid=="number"&&(t+="_".concat(e.uid)),e.token&&(t+="_".concat(e.token)),iQ(t)}function pje(e){let t=function(){let r=gje.pop();return r?(r.offset=r.limit=0,r):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(r,n){let i=r.appId;i!==void 0&&(kr(n,10),Ll(n,i));let o=r.cid;o!==void 0&&(kr(n,16),kr(n,o));let a=r.cname;a!==void 0&&(kr(n,26),Ll(n,a));let s=r.deviceId;s!==void 0&&(kr(n,34),Ll(n,s));let c=r.elapse;c!==void 0&&(kr(n,40),Ml(n,c));let l=r.fileSize;l!==void 0&&(kr(n,48),Ml(n,rp(l)));let d=r.height;d!==void 0&&(kr(n,56),Ml(n,rp(d)));let u=r.jpg;u!==void 0&&(kr(n,66),kr(n,u.length),R6(n,u));let p=r.networkType;p!==void 0&&(kr(n,72),Ml(n,rp(p)));let f=r.osType;f!==void 0&&(kr(n,80),Ml(n,rp(f)));let m=r.requestId;m!==void 0&&(kr(n,90),Ll(n,m));let g=r.sdkVersion;g!==void 0&&(kr(n,98),Ll(n,g));let y=r.sequence;y!==void 0&&(kr(n,104),Ml(n,rp(y)));let v=r.sid;v!==void 0&&(kr(n,114),Ll(n,v));let E=r.timestamp;E!==void 0&&(kr(n,120),Ml(n,E));let w=r.uid;w!==void 0&&(kr(n,128),kr(n,w));let S=r.vid;S!==void 0&&(kr(n,136),kr(n,S));let x=r.width;x!==void 0&&(kr(n,144),Ml(n,rp(x)));let O=r.service;O!==void 0&&(kr(n,152),kr(n,O));let L=r.callbackData;L!==void 0&&(kr(n,162),kr(n,L.length),R6(n,L));let j=r.ticket;j!==void 0&&(kr(n,170),Ll(n,j));let W=r.vendorConfigs;W!==void 0&&(kr(n,178),Ll(n,W))}(e,t),function(r){let n=r.bytes,i=r.limit;return n.length===i?n:n.subarray(0,i)}(t)}function fje(e){return function(r){let n={};e:for(;!yje(r);){let i=wg(r);switch(i>>>3){case 0:break e;case 1:n.code=wg(r);break;case 2:n.msg=I6(r,wg(r));break;case 3:n.requestId=I6(r,wg(r));break;case 4:n.timestamp=vje(r,!1);break;default:mje(r,7&i)}}return n}({bytes:t=e,offset:0,limit:t.length});var t}function mje(e,t){switch(t){case 0:for(;128&Va(e););break;case 2:KI(e,wg(e));break;case 5:KI(e,4);break;case 1:KI(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function rp(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var gje=[];function KI(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function yje(e){return e.offset>=e.limit}function hT(e,t){let r=e.bytes,n=e.offset,i=e.limit,o=n+t;if(o>r.length){let a=new Uint8Array(2*o);a.set(r),e.bytes=a}return e.offset=o,o>i&&(e.limit=o),n}function IZ(e,t){let r=e.offset;if(r+t>e.limit)throw new Error("Read past limit");return e.offset+=t,r}function R6(e,t){let r=hT(e,t.length);e.bytes.set(t,r)}function I6(e,t){let r=IZ(e,t),n=String.fromCharCode,i=e.bytes,o="�",a="";for(let s=0;s<t;s++){let c,l,d,u,p=i[s+r];128&p?(224&p)==192?s+1>=t?a+=o:(c=i[s+r+1],(192&c)!=128?a+=o:(u=(31&p)<<6|63&c,u<128?a+=o:(a+=n(u),s++))):(240&p)==224?s+2>=t?a+=o:(c=i[s+r+1],l=i[s+r+2],(49344&(c|l<<8))!=32896?a+=o:(u=(15&p)<<12|(63&c)<<6|63&l,u<2048||u>=55296&&u<=57343?a+=o:(a+=n(u),s+=2))):(248&p)==240?s+3>=t?a+=o:(c=i[s+r+1],l=i[s+r+2],d=i[s+r+3],(12632256&(c|l<<8|d<<16))!=8421504?a+=o:(u=(7&p)<<18|(63&c)<<12|(63&l)<<6|63&d,u<65536||u>1114111?a+=o:(u-=65536,a+=n(55296+(u>>10),56320+(1023&u)),s+=3))):a+=o:a+=n(p)}return a}function Ll(e,t){let r=t.length,n=0;for(let a=0;a<r;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<r&&(s=(s<<10)+t.charCodeAt(++a)-56613888),n+=s<128?1:s<2048?2:s<65536?3:4}kr(e,n);let i=hT(e,n),o=e.bytes;for(let a=0;a<r;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<r&&(s=(s<<10)+t.charCodeAt(++a)-56613888),s<128?o[i++]=s:(s<2048?o[i++]=s>>6&31|192:(s<65536?o[i++]=s>>12&15|224:(o[i++]=s>>18&7|240,o[i++]=s>>12&63|128),o[i++]=s>>6&63|128),o[i++]=63&s|128)}}function Va(e){return e.bytes[IZ(e,1)]}function x6(e,t){let r=hT(e,1);e.bytes[r]=t}function wg(e){let t,r=0,n=0;do t=Va(e),r<32&&(n|=(127&t)<<r),r+=7;while(128&t);return n}function kr(e,t){for(t>>>=0;t>=128;)x6(e,127&t|128),t>>>=7;x6(e,t)}function vje(e,t){let r,n=0,i=0,o=0;return r=Va(e),n=127&r,128&r&&(r=Va(e),n|=(127&r)<<7,128&r&&(r=Va(e),n|=(127&r)<<14,128&r&&(r=Va(e),n|=(127&r)<<21,128&r&&(r=Va(e),i=127&r,128&r&&(r=Va(e),i|=(127&r)<<7,128&r&&(r=Va(e),i|=(127&r)<<14,128&r&&(r=Va(e),i|=(127&r)<<21,128&r&&(r=Va(e),o=127&r,128&r&&(r=Va(e),o|=(127&r)<<7))))))))),{low:n|i<<28,high:i>>>4|o<<24,unsigned:t}}function Ml(e,t){let r=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=i===0?n===0?r<16384?r<128?1:2:r<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:i<128?9:10,a=hT(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=o!==9?128|i:127&i;case 8:s[a+7]=o!==8?n>>>21|128:n>>>21&127;case 7:s[a+6]=o!==7?n>>>14|128:n>>>14&127;case 6:s[a+5]=o!==6?n>>>7|128:n>>>7&127;case 5:s[a+4]=o!==5?128|n:127&n;case 4:s[a+3]=o!==4?r>>>21|128:r>>>21&127;case 3:s[a+2]=o!==3?r>>>14|128:r>>>14&127;case 2:s[a+1]=o!==2?r>>>7|128:r>>>7&127;case 1:s[a]=o!==1?128|r:127&r}}var A6={},N6={},fw=4294967296,Eje=fw*fw,O6=Eje/2;xZ(0,!0);var k6=xZ(0),_je=Q0(0,-2147483648,!1),bje=Q0(-1,2147483647,!1);function xZ(e,t){let r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=N6[e],n)?n:(r=Q0(e,0,!0),i&&(N6[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=A6[e],n)?n:(r=Q0(e,e<0?-1:0,!1),i&&(A6[e]=r),r)}function Q0(e,t,r){return{low:0|e,high:0|t,unsigned:!!r}}function wje(e,t){if(isNaN(e))return k6;{if(e<=-O6)return _je;if(e+1>=O6)return bje}return e<0?k6:Q0(e%fw|0,e/fw|0,t)}function P6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var Sje=class AZ extends fr{get connectionState(){return this._connectionState}set connectionState(t){if(this._connectionState===t)return;let r=this._connectionState;this._connectionState=t,this.emit(ys.CONNECTION_STATE_CHANGE,t,r)}get quality(){return this._quality}set quality(t){this._quality=t>1?1:t<.1?.1:t,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(t){var r;super(),C(this,"name","AgoraRTCImageModeration"),C(this,"_connectionState",Yo.CONNECTING),C(this,"_sequence",0),C(this,"_moderationStartTime",void 0),C(this,"_workerConnection",void 0),C(this,"_workerMessageLengthLimit",void 0),C(this,"_qualityRatio",void 0),C(this,"_connectInfo",void 0),C(this,"_cancelTokenSource",Ui.CancelToken.source()),C(this,"_retryConfig",void 0),C(this,"_moderationInterval",void 0),C(this,"_moderationTimer",null),C(this,"_moderationMode",1),C(this,"_quality",1),C(this,"_qualityTimer",null),C(this,"_ticket",void 0),C(this,"_moderationIntervalMinimum",void 0),C(this,"_uploadFailedNum",0),C(this,"_uploadNum",0),C(this,"_uploadTimer",null),C(this,"_extraInfo",void 0),C(this,"_vendor",""),C(this,"_encoder",new TextEncoder),C(this,"_moderationId",void 0),C(this,"inspectImage",()=>{if(this.connectionState!==Yo.CONNECTED)throw new G(I.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===Yo.CONNECTED?this.requestToInspectImage():b.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=qt(5,"image-moderation-"),this._workerMessageLengthLimit=D("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=D("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(r=t.interval)!==null&&r!==void 0?r:1e3,t.extraInfo&&(this._extraInfo=this._encoder.encode(t.extraInfo)),t.vendor&&(this._vendor=t.vendor),this._qualityRatio=D("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new z0("worker-"+this._moderationId,Vr),this.on(ys.STATE_CHANGE,(n,i)=>{b.debug("[".concat(this._moderationId,"] Moderation operation :").concat(qh[n]," ").concat(i||""))}),this.handleWorkerEvents()}async init(t,r){this.emit(ys.STATE_CHANGE,qh.CONNECT_AP),this._connectInfo=t;let n=this._cancelTokenSource.token;return this._retryConfig=r,new de((i,o)=>{this.on(ys.CONNECTION_STATE_CHANGE,(a,s)=>{a===Yo.CONNECTED&&i()}),this.requestAP(t,n,r).then(a=>{this.connectWorker(a)}).catch(a=>{o(a)})})}updateConfig(t){var r;this._moderationInterval=(r=t.interval)!==null&&r!==void 0?r:1e3,t.extraInfo&&(this._extraInfo=this._encoder.encode(t.extraInfo)),t.vendor&&(this._vendor=t.vendor),b.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(t))),this.connectionState===Yo.CONNECTED&&this.inspectImage()}async requestAP(t,r,n){let i=D("WEBCS_DOMAIN").map(c=>"https://".concat(c,"/api/v1")),o=await function(c,l,d,u){let{appId:p,areaCode:f,cname:m,sid:g,token:y,uid:v}=l;rf++;let E="moderation_plugin",w={service_name:E,json_body:JSON.stringify({appId:p,areaCode:f,cname:m,command:"allocateEdge",requestId:rf,seq:rf,sid:g,appToken:y,ts:Date.now(),uid:v+""})},S,x,O=c[0];return Fs(async()=>{S=Date.now();let L=await Vs(O,{data:w,cancelToken:d,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(x=Date.now()-S,L.code!==0){let V=new G(I.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+L.code,{retry:!0,responseTime:x});throw b.error(V.toString()),V}let j=JSON.parse(L.json_body);if(j.code!==200){let V=new G(I.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(j.code,", reason: ").concat(j.reason),{code:j.code,responseTime:x});throw b.error(V.toString()),V}if(!j.servers||!Array.isArray(j.servers)||j.servers.length===0){let V=new G(I.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:j.code,responseTime:x});throw b.error(V.toString()),V}if(!j.servers.some(V=>!!V.wss)){let V=new G(I.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:j.code,responseTime:x});throw b.error(V.toString()),V}let W=D("IMAGE_MODERATION_WORKER_HOST");return{addressList:j.servers.map(V=>{let{address:Y,wss:Z}=V;if(Y&&Z)return"wss://".concat(Y.replace(/\./g,"-"),".").concat(W,":").concat(Z,"/moderation")}).filter(V=>!!V),workerToken:j.workerToken,vid:j.vid,ticket:j.appTicket,responseTime:x}},(L,j)=>(be.apworkerEvent(g,{success:!0,sc:200,serviceName:E,responseDetail:JSON.stringify(L.addressList),firstSuccess:j===0,responseTime:x,serverIp:c[j%c.length]}),!1),(L,j)=>(be.apworkerEvent(g,{success:!1,sc:L.data&&L.data.code||200,serviceName:E,responseTime:x,serverIp:c[j%c.length]}),!!(L.code!==I.OPERATION_ABORTED&&L.code!==I.UNEXPECTED_RESPONSE||L.data&&L.data.retry)&&(O=c[(j+1)%c.length],!0)),u)}(i,t,r,n);this.emit(ys.STATE_CHANGE,qh.AP_CONNECTED);let{addressList:a,ticket:s}=o;return this._ticket=s,a}async connectWorker(t){this.emit(ys.STATE_CHANGE,qh.CONNECT_WORKER),await this._workerConnection.init(t,1e4)}handleWorkerEvents(){this._workerConnection.on(Ve.CONNECTED,async()=>{this.emit(ys.STATE_CHANGE,qh.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=Yo.CONNECTED}),this._workerConnection.on(Ve.CLOSED,()=>{this.connectionState=Yo.CLOSED}),this._workerConnection.on(Ve.FAILED,()=>{this.connectionState=Yo.CLOSED}),this._workerConnection.on(Ve.RECONNECTING,()=>{this.connectionState=this.connectionState===Yo.CONNECTED?Yo.RECONNECTING:Yo.CONNECTING}),this._workerConnection.on(Ve.ON_MESSAGE,async t=>{if(t.data instanceof ArrayBuffer){let r=fje(new Uint8Array(t.data));D("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&b.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(r)),this._uploadNum++,r.code===void 0||r.code===0||(this._uploadFailedNum++,b.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(r.code,", msg is ").concat(r.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{be.reportApiInvoke(this._connectInfo.sid||null,{name:zr.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,r.code],tag:Er.TRACER}).onError(new G(I.IMAGE_MODERATION_UPLOAD_FAILED,r.msg)),this._uploadTimer=null},D("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else b.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(Ve.WILL_RECONNECT,(t,r,n)=>{t==="recover"&&n(t),n("tryNext")}),this._workerConnection.on(Ve.REQUEST_NEW_URLS,(t,r)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(t).catch(r)})}static intToLong(t){return{low:t|=0,high:t>>31,unsigned:t>=0}}async requestToInspectImage(){let t=oa(this,ys.CLIENT_LOCAL_VIDEO_TRACK),r={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(t){if(!t.isPlaying)return void(D("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&b.debug("Only the track being played can be inspected"));this._sequence++;let n=await this.generateRequestData(t,r);this._workerConnection.sendMessage(n,!0,!0)}else D("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&b.debug("Only the track being published can be inspected")}async generateRequestData(t,r){let{appId:n,cname:i,cid:o,vid:a,sid:s,uid:c}=r,l=Date.now(),d=await t.getCurrentFrameImage("image/jpeg",this.quality),u=await BQ(d,n,i),p=this._sequence+"-"+o+"-"+c+"-"+l+"-"+qt(12,""),f={appId:n,cid:o,cname:i,deviceId:"",elapse:AZ.intToLong(Number(l-this._moderationStartTime)),fileSize:d.buffer.byteLength,height:d.height,width:d.width,jpg:u,networkType:6,osType:7,requestId:p,sdkVersion:"4.22.0",sequence:this._sequence,sid:s,timestamp:wje(l),uid:c,vid:a,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};this._extraInfo===void 0&&delete f.callbackData;let m=pje(f);if(m.byteLength<this._workerMessageLengthLimit){if(D("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){let g=function(y){for(var v=1;v<arguments.length;v++){var E=arguments[v]!=null?arguments[v]:{};v%2?P6(Object(E),!0).forEach(function(w){C(y,w,E[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(E)):P6(Object(E)).forEach(function(w){Object.defineProperty(y,w,Object.getOwnPropertyDescriptor(E,w))})}return y}({},f);delete g.jpg,b.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(g))}return m}{let g=this.quality*this._qualityRatio;return this.quality=g,await this.generateRequestData(t,{appId:n,cname:i,cid:o,vid:a,sid:s,uid:c})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Ui.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=Yo.CLOSED,this.emit(ys.STATE_CHANGE,qh.CLOSED)}};function NZ(e){if(Vt(e.interval,"interval",1e3,1/0),e&&e.extraInfo&&e.extraInfo.length>1024)throw new G(I.INVALID_PARAMS,"config.extraInfo length cannot exceed 1024 bytes");if(e&&e.vendor&&e.vendor.length>1024)throw new G(I.INVALID_PARAMS,"config.vendor length cannot exceed 1024 bytes")}var Tje={name:"ImageModeration",create:function(e){let{config:t}=e;return NZ(t),new Sje(t)}},D6,L6,M6,j6,U6,F6,V6,B6,$6,H6,W6,G6,z6,K6,q6,Y6,X6,J6,Q6,Z6,e8,t8,r8,n8,i8,o8,a8,s8,c8,l8,d8,u8,h8,p8,f8,m8,g8,y8,v8,E8,he;function _8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_8(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}zn.setLogger(b);var Cje=(D6=Ne(),L6=Ne({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof Up))return[t];t=[t]}return t.map(r=>r?Object(r).toString():"null")}}),M6=Ne({argsMap:(e,t)=>(t||(t=[]),Array.isArray(t)||t.trackMediaType!==fm.DATA?(Array.isArray(t)||(t=[t]),t.map(r=>r.getTrackId())):[t.getChannelId()])}),j6=Ne({argsMap:(e,t,r,n)=>[typeof t=="object"?t.uid:t,r,n]}),U6=Ne({argsMap:(e,t,r)=>[t,r]}),F6=Ne({argsMap:(e,t)=>t.map(r=>{let{user:n,mediaType:i}=r;return[n==null?void 0:n.uid,i]})}),V6=Ne({argsMap:(e,t,r,n)=>[typeof t=="object"?t.uid:t,r,n]}),B6=Ne({argsMap:(e,t)=>t.map(r=>{let{user:n,mediaType:i}=r;return{uid:n==null?void 0:n.uid,mediaType:i}})}),$6=Ne(),H6=Ne(),W6=Ne(),G6=Ne(),z6=Ne(),K6=Ne(),q6=Ne(),Y6=Ne(),X6=Ne(),J6=Ne(),Q6=Ne(),Z6=Ne(),e8=Ne(),t8=Ne(),r8=Ne({argsMap:(e,t)=>[t]}),n8=Ne(),i8=Ne(),o8=Ne(),a8=Ne(),s8=Ne(),c8=Ne(),l8=Ne(),d8=Ne(),u8=Ne({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),h8=Ne(),p8=Ne(),f8=Ne(),m8=Ne(),g8=Ne(),y8=Ne(),v8=Ne({reportResult:!0}),E8=Ne(),he=class extends fr{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return((e=this._config)===null||e===void 0?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e){let t;if(super(),C(this,"store",void 0),C(this,"_uid",void 0),C(this,"_channelName",void 0),C(this,"_uintUid",void 0),C(this,"_users",[]),C(this,"_config",void 0),C(this,"_clientId",void 0),C(this,"_appId",void 0),C(this,"_sessionId",null),C(this,"_key",void 0),C(this,"_rtmConfig",{}),C(this,"_joinInfo",void 0),C(this,"_gateway",void 0),C(this,"_statsCollector",void 0),C(this,"_configDistribute",void 0),C(this,"_leaveMutex",new zn("client-leave")),C(this,"_publishMutex",new zn("client-publish")),C(this,"_renewTokenMutex",new zn("client-renewtoken")),C(this,"_subscribeMutex",new zn("client-subscribe")),C(this,"_encryptionMode","none"),C(this,"_encryptionSecret",null),C(this,"_encryptionSalt",null),C(this,"_encryptDataStream",!1),C(this,"_encryptDataStreamKey",null),C(this,"_encryptDataStreamIv",null),C(this,"_proxyServer",void 0),C(this,"_turnServer",{servers:[],mode:"auto"}),C(this,"_cloudProxyServerMode","disabled"),C(this,"_isDualStreamEnabled",!1),C(this,"_defaultStreamFallbackType",void 0),C(this,"_lowStreamParameter",void 0),C(this,"_streamFallbackTypeCacheMap",new Map),C(this,"_remoteStreamTypeCacheMap",new Map),C(this,"_axiosCancelSource",Ui.CancelToken.source()),C(this,"_audioVolumeIndicationInterval",void 0),C(this,"_networkQualityInterval",void 0),C(this,"_userOfflineTimeout",void 0),C(this,"_streamRemovedTimeout",void 0),C(this,"_liveTranscodeStreamingClient",void 0),C(this,"_liveRawStreamingClient",void 0),C(this,"_channelMediaRelayClient",void 0),C(this,"_networkQualitySensitivity","normal"),C(this,"_p2pChannel",void 0),C(this,"_useLocalAccessPoint",!1),C(this,"_setLocalAPVersion",void 0),C(this,"_joinAndNotLeaveYet",!1),C(this,"_numberOfJoinCount",0),C(this,"_remoteDefaultVideoStreamType",void 0),C(this,"_inspect",void 0),C(this,"_moderation",void 0),C(this,"_license",void 0),C(this,"_pendingPublishedUsers",[]),C(this,"ntpAlignErrorCount",0),C(this,"remoteInboundOffset",0),C(this,"_handleLocalTrackEnable",(r,n,i)=>{this.publish(r,!1).then(n).catch(i)}),C(this,"_handleLocalTrackDisable",(r,n,i)=>{this.unpublish(r).then(n).catch(i)}),C(this,"_handleUserOnline",r=>{if(D("BLOCK_LOCAL_CLIENT")&&Jd(r.uid,this.channelName))return void b.debug("[".concat(r.uid,"] will be ignored in local"));this.isStringUID&&typeof r.uid!="string"&&b.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));let n=this._users.find(i=>i.uid===r.uid);if(n)n._trust_in_room_=!0,n._is_pre_created&&(n._is_pre_created=!1,this.safeEmit(ht.USER_JOINED,n));else{let i=new ql(r.uid,r.uint_id||r.uid);this._users.push(i),b.debug("[".concat(this._clientId,"] user online"),r.uid),this.safeEmit(ht.USER_JOINED,i)}}),C(this,"_handleUserOffline",r=>{if(D("BLOCK_LOCAL_CLIENT")&&Jd(r.uid,this.channelName))return;let n=this._users.find(i=>i.uid===r.uid);n&&(this._handleRemoveStream(r),this._handleRemoveDataChannels(r),n._audio_pre_subscribed||n._video_pre_subscribed?n._is_pre_created=!0:nw(this._users,n),this._remoteStreamTypeCacheMap.delete(n.uid),this._streamFallbackTypeCacheMap.delete(n.uid),b.debug("[".concat(this._clientId,"] user offline"),r.uid,"reason:",r.reason),this.safeEmit(ht.USER_LEAVED,n,r.reason))}),C(this,"_handleAddAudioOrVideoStream",(r,n,i,o,a,s,c)=>{if(D("BLOCK_LOCAL_CLIENT")&&Jd(n,this.channelName))return;let l=this._users.find(u=>u.uid===n);if(!l)return void b.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));b.debug("[".concat(this._clientId,"] stream added with uid ").concat(n,", type ").concat(r)),this.store.subscribe(l.uid,r,void 0,void 0,void 0,Date.now());let d=r==="audio"?l.hasAudio:l.hasVideo;l._uintid||(l._uintid=a||n),r==="audio"?l._trust_audio_stream_added_state_=!0:l._trust_video_stream_added_state_=!0,r==="audio"?(l._audio_added_=!0,i!==void 0&&(l._audioSSRC=i),o!==void 0&&(l._cname=o),s&&(l._audioOrtc=s)):(l._video_added_=!0,i!==void 0&&(l._videoSSRC=i),o!==void 0&&(l._cname=o),c!==void 0&&(l._rtxSsrcId=c),s&&(l._videoOrtc=s)),(r==="audio"?l.hasAudio:l.hasVideo)&&!d&&(b.info("[".concat(this._clientId,"] remote user ").concat(l.uid," published ").concat(r)),this.safeEmit(ht.USER_PUBLISHED,l,r)),r==="video"?be.onGatewayStream(this._sessionId,vn.ON_ADD_VIDEO_STREAM,hr.ON_ADD_VIDEO_STREAM,{peer:a||n,ssrc:l._videoSSRC}):be.onGatewayStream(this._sessionId,vn.ON_ADD_AUDIO_STREAM,hr.ON_ADD_AUDIO_STREAM,{peer:a||n,ssrc:l._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(l,r,i).then(u=>{if(u&&(b.debug("[".concat(this._clientId,"] resubscribe ").concat(r," for user ").concat(l.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof RE))return this._p2pChannel.unsubscribe(l,r,!0).then(()=>this._subscribe(l,r,!0).catch(p=>{b.error("[".concat(this._clientId,"] resubscribe error"),p.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(l,r)&&(b.debug("[".concat(this._clientId,"] resubscribe ").concat(r," for user ").concat(l.uid," after reconnect.")),this._subscribe(l,r,!0).catch(u=>{b.error("[".concat(this._clientId,"] resubscribe error"),u.toString())}))}),C(this,"_handleRemoveStream",r=>{if(D("BLOCK_LOCAL_CLIENT")&&Jd(r.uid,this.channelName))return;let n=this._users.find(o=>o.uid===r.uid);if(!n)return void b.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));b.debug("[".concat(this._clientId,"] stream removed with uid ").concat(r.uid));let i=()=>{};n.hasAudio&&n.hasVideo?i=()=>{b.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished audio track")),this.safeEmit(ht.USER_UNPUBLISHED,n,"audio"),b.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished video track")),this.safeEmit(ht.USER_UNPUBLISHED,n,"video")}:n.hasVideo?i=()=>{b.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished video track")),this.safeEmit(ht.USER_UNPUBLISHED,n,"video")}:n.hasAudio&&(i=()=>{b.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished audio track")),this.safeEmit(ht.USER_UNPUBLISHED,n,"audio")}),n._video_pre_subscribed||n._audio_pre_subscribed||(n._trust_audio_stream_added_state_=!0,n._trust_video_stream_added_state_=!0,n._audio_added_=!1,n._video_added_=!1,this._p2pChannel instanceof RE&&this._p2pChannel.unsubscribe(n).then(o=>{if(o)return this._gateway.unsubscribe(o,n.uid)}),n._audioSSRC=void 0,n._videoSSRC=void 0,n._audioOrtc=void 0,n._videoOrtc=void 0,n._rtxSsrcId=void 0),be.onGatewayStream(this._sessionId,vn.ON_REMOVE_STREAM,hr.ON_REMOVE_STREAM,{peer:r.uint_id||r.uid}),i()}),C(this,"_handleSetStreamLocalEnable",(r,n,i)=>{if(D("BLOCK_LOCAL_CLIENT")&&Jd(n,this.channelName))return;let o=this._users.find(c=>c.uid===n);if(!o)return void b.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));b.debug("[".concat(this._clientId,"] local ").concat(r," ").concat(i?"enabled":"disabled"," with uid ").concat(n));let a=r==="audio"?o.hasAudio:o.hasVideo;if(r==="audio"){o._trust_audio_enabled_state_=!0;let c=o._audio_enabled_;if(o._audio_enabled_=i,o._audio_enabled_===c)return;{let l=o._audio_enabled_?"enable-local-audio":"disable-local-audio";b.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(n,", msg: ").concat(l)),this.safeEmit(ht.USER_INFO_UPDATED,n,l)}}else{o._trust_video_enabled_state_=!0;let c=o._video_enabled_;if(o._video_enabled_=i,o._video_enabled_===c)return;{let l=o._video_enabled_?"enable-local-video":"disable-local-video";b.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(n,", msg: ").concat(l)),this.safeEmit(ht.USER_INFO_UPDATED,n,l)}}let s=r==="audio"?o.hasAudio:o.hasVideo;return a!==s?!a&&s?(b.info("[".concat(this._clientId,"] remote user ").concat(n," published ").concat(r)),void this.safeEmit(ht.USER_PUBLISHED,o,r)):(r==="video"&&o._videoTrack&&o._videoTrack._destroy(),r==="audio"&&o._audioTrack,this._p2pChannel.muteRemote(o,r),b.info("[".concat(this._clientId,"] remote user ").concat(n," unpublished ").concat(r)),void this.safeEmit(ht.USER_UNPUBLISHED,o,r)):void 0}),C(this,"_handleMuteStream",(r,n,i)=>{if(D("BLOCK_LOCAL_CLIENT")&&Jd(r,this.channelName))return;b.debug("[".concat(this._clientId,"] receive mute message"),r,n,i);let o=this._users.find(c=>c.uid===r);if(!o)return void b.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(r));let a=n==="audio"?o.hasAudio:o.hasVideo;if(n==="audio"){o._trust_audio_mute_state_=!0;let c=o._audio_muted_;if(o._audio_muted_=i,o._audio_muted_===c)return;{let l=o._audio_muted_?"mute-audio":"unmute-audio";b.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(r,", msg: ").concat(l)),this.safeEmit(ht.USER_INFO_UPDATED,r,l)}}else{o._trust_video_mute_state_=!0;let c=o._video_muted_;if(o._video_muted_=i,o._video_muted_===c)return;{let l=o._video_muted_?"mute-video":"unmute-video";b.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(r,", msg: ").concat(l)),this.safeEmit(ht.USER_INFO_UPDATED,r,l)}}let s=n==="audio"?o.hasAudio:o.hasVideo;if(a!==s){if(!a&&s)return(n==="audio"?o._audioSSRC:o._videoSSRC)?(b.info("[".concat(this._clientId,"] remote user ").concat(r," published ").concat(n)),void this.safeEmit(ht.USER_PUBLISHED,o,n)):void b.warning("[".concat(this._clientId,"] remote user ").concat(r," receive ").concat(n," unmute message  before add stream message, ").concat(n," SSRC doesn't exist yet."));n==="video"&&o._videoTrack&&!o._video_pre_subscribed&&o._videoTrack._destroy(),n==="audio"&&o._audioTrack,this._p2pChannel.muteRemote(o,n),b.info("[".concat(this._clientId,"] remote user ").concat(r," unpublished ").concat(n)),this.safeEmit(ht.USER_UNPUBLISHED,o,n)}}),C(this,"_handleP2PLost",async r=>{b.debug("[".concat(this._clientId,"] receive p2p lost"),r),parseInt(r.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():b.warning("[".concat(this._clientId,"] P2PLost stream not found"),r)}),C(this,"_handleTokenWillExpire",()=>{b.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(ht.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),C(this,"_handleBeforeUnload",r=>{r.type==="beforeunload"&&r.returnValue!==void 0&&r.returnValue!==""||(this.leave(),b.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),C(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(ht.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});let r={downlinkNetworkQuality:0,uplinkNetworkQuality:0};r.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),r.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(ht.NETWORK_QUALITY,r)}),C(this,"_handleP2PAddAudioOrVideoStream",(r,n,i,o)=>{let a=this._users.find(c=>c.uid===n);if(!a)return void b.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));b.debug("[".concat(this._clientId,"] stream added with uid ").concat(n,", type ").concat(r)),this.store.subscribe(a.uid,r,void 0,void 0,void 0,Date.now());let s=r==="audio"?a.hasAudio:a.hasVideo;r==="audio"?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,r==="audio"?(a._audio_added_=!0,i!==void 0&&(a._audioSSRC=i),o!==void 0&&(a._audioMid=o)):(a._video_added_=!0,i!==void 0&&(a._videoSSRC=i),o!==void 0&&(a._videoMid=o)),(r==="audio"?a.hasAudio:a.hasVideo)&&!s&&(b.info("[".concat(this._clientId,"] remote user ").concat(a.uid," published ").concat(r)),this.safeEmit(ht.USER_PUBLISHED,a,r)),this._p2pChannel.hasPendingRemoteMedia(a,r)&&(b.debug("[".concat(this._clientId,"] resubscribe ").concat(r," for user ").concat(a.uid," after reconnect.")),this._subscribe(a,r,!0).catch(c=>{b.error("[".concat(this._clientId,"] resubscribe error"),c.toString())}))}),this._config=e,this._clientId=qt(5,"client-"),this.store=new XDe(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),b.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(aa," build: ").concat($D,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{H3(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(r){b.warning("[".concat(this._clientId,"] ").concat(r.toString()))}this._statsCollector=new mZ(this.store),this._statsCollector.onStatsException=(r,n,i)=>{b.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(r,", msg: ").concat(n,", uid: ").concat(i)),this.safeEmit(ht.EXCEPTION,{code:r,msg:n,uid:i})},this._statsCollector.onUploadPublishDuration=(r,n,i,o)=>{let a=this._users.find(s=>s.uid===r);a&&be.peerPublishStatus(this._sessionId,{subscribeElapse:o,audioPublishDuration:n,videoPublishDuration:i,peer:a._uintid})},this.store.useP2P=e.mode==="p2p",this._gateway=new RMe(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||Vr,httpRetryConfig:e.httpRetryConfig||Vr,forceWaitGatewayResponse:e.forceWaitGatewayResponse===void 0||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._configDistribute=new MMe,this.store.useP2P?(this._p2pChannel=new oo(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new RE(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,r,n,i){let o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],a=arguments.length>6&&arguments[6]!==void 0&&arguments[6];Ft("JOIN_GATEWAY_USE_443PORT_ONLY",o),Ft("JOIN_GATEWAY_USE_DUAL_DOMAIN",a);let s=this._gateway.signal.websocket;return s instanceof WD&&(s.use443PortOnly=o,s.tryDoubleDomain=a),async function(c,l,d){iE.get(c)||iE.set(c,[]),oE.get(c)||oE.set(c,l),zs.get(c)||zs.set(c,0);let u=iE.get(c),p=oE.get(c);if(!u||!p)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(zs.get(c)===p){let v=B0();u.push(v),await v.promise}zs.set(c,zs.get(c)+1);for(var f=arguments.length,m=new Array(f>3?f-3:0),g=3;g<f;g++)m[g-3]=arguments[g];let y=await d(...m);return zs.set(c,zs.get(c)-1),zs.get(c)===p-1&&u.length>0&&(u[0].resolve(),u.shift()),zs.get(c)===0&&(iE.set(c,[]),oE.set(c,0),zs.set(c,0)),y}("client.join",D("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,r,n,i)}async join(e,t,r,n,i){let o=++this._numberOfJoinCount;this.store.joinStart(),n&&(this.store.uid=n);let a=(sE||sE||(sE=(window.location.protocol.split(":")[0]||"").toUpperCase(),sE))==="HTTPS",s=X3()?window.isSecureContext:"Browser Not Support";(!X3()&&!a||!window.isSecureContext)&&b.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser"),this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),b.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),be.setAppId(e);try{if(!r&&r!==null)throw new G(I.INVALID_PARAMS,"Invalid token: ".concat(r,". If you don not use token, set it to null"));r&&En(r,"token",1,2047),En(e,"appid",1,2047),lT(t),n&&dT(n),i&&En(i,"optionalInfo",1,2047)}catch(g){throw be.reportApiInvoke(Lp(),{name:zr.JOIN,options:[e,t,r,n],states:{isHttps:a,isSecureContext:s},tag:Er.TRACER}).onError(g),g}if(this._leaveMutex.isLocked&&(b.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),b.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){let g=new G(I.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw be.reportApiInvoke(Lp(),{name:zr.JOIN,options:[e,t,r,n],states:{isHttps:a,isSecureContext:s},tag:Er.TRACER}).onError(g),g}this._gateway.state="CONNECTING";let c=await T6({appId:e,cname:t,uid:n,stringUid:typeof n=="string"?n:void 0,token:r||e,cloudProxyServer:this._cloudProxyServerMode});if(!this._joinAndNotLeaveYet)throw new G(I.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));let l=(c==null?void 0:c.sid)||Lp();b.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(o)),this._sessionId||(this._sessionId=l,this.store.sessionId=this._sessionId);let d=be.reportApiInvoke(l,{name:zr.JOIN,options:[e,t,r,n],states:{isHttps:a,isSecureContext:s},tag:Er.TRACER}),u=Es(Es({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:typeof n!="string"?n:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:r||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!c},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(u.setLocalAPVersion=this._setLocalAPVersion),typeof n=="string"&&(u.stringUid=n,this._uintUid?(u.uid=this._uintUid,this._uintUid=void 0):u.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(u.aesmode=this._encryptionMode,u.aespassword=await(async g=>{let y=function(S){let x=window.atob(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),O=new Uint8Array(new ArrayBuffer(x.length));for(let L=0;L<x.length;L+=1)O[L]=x.charCodeAt(L);return O}(),v=await window.crypto.subtle.importKey("spki",y,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),E=UD(g),w=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},v,E);return function(S){let x="";for(let O=0;O<S.length;O+=1)x+=String.fromCharCode(S[O]);return window.btoa(x)}(new Uint8Array(w))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new G(I.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(u.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&(this._encryptionMode==="aes-128-gcm2"||this._encryptionMode==="aes-256-gcm2"))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){let g=new TextEncoder,y=D("USE_PURE_ENCRYPTION_MASTER_KEY")?g.encode(u.appId+this._encryptionSecret+this._encryptionSecret):g.encode(u.appId+u.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(v,E,w){let S=await window.crypto.subtle.importKey("raw",E,"PBKDF2",!1,["deriveBits","deriveKey"]),x=v==="aes-128-gcm2"?128:256,O=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:Q3,hash:"SHA-256",salt:w},S,x+JDe);return new Uint8Array(O).subarray(x/8)}(this._encryptionMode,y,Tu(this._encryptionSalt)),this._encryptDataStreamKey=await async function(v,E,w){let S=await window.crypto.subtle.importKey("raw",E,"PBKDF2",!1,["deriveBits","deriveKey"]),x=v==="aes-128-gcm2"?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:Q3,hash:"SHA-256",salt:w},S,{name:"AES-GCM",length:x},!0,["encrypt","decrypt"])}(this._encryptionMode,y,Tu(this._encryptionSalt))}else s?b.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):b.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,b.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:u.stringUid});let p=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&p===this._sessionId&&be.joinChannelTimeout(this._sessionId,5)},5e3);try{var f;let g,y=u.cloudProxyServer;if(pe(f=["proxy3","proxy4","proxy5"]).call(f,y)){let x=D("PROXY_SERVER_TYPE3");Array.isArray(x)?u.proxyServer=x[0]:u.proxyServer=x}if(be.setProxyServer(u.proxyServer),b.setProxyServer(u.proxyServer),this.store.requestAPStart(),c){if(b.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(u.stringUid?", ".concat(u.stringUid," => ").concat(c.intUid):""," ")),u.stringUid&&!u.uid&&(u.uid=c.intUid),g={gatewayInfo:c.ap.gatewayInfo},D("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&u.turnServer.mode==="auto")if(c.ap.proxyInfo.addresses.length===0)b.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{let x=(await mQ(c.ap.proxyInfo,c.ap.gatewayInfo.uid)).map(O=>({turnServerURL:O.address,tcpport:O.tcpport||Nn.tcpport,udpport:O.udpport||Nn.udpport,username:O.username||Nn.username,password:O.password||Nn.password,forceturn:!1,security:!0}));u.turnServer={mode:"manual",servers:x}}C6(c,u.stringUid)}else{if(u.stringUid&&!u.uid){let x;[x,g]=await de.all([aZ(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||Vr,this.store),IB(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Vr,!0,this.store)]),b.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(u.stringUid," => ").concat(x)),u.uid=x,g.gatewayInfo.uid=x,g.gatewayInfo.res.uid=x}else g=await IB(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Vr,!0,this.store);if(!this._joinAndNotLeaveYet)throw new G(I.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(u,this._axiosCancelSource.token),this._configDistribute.on(HN.UPDATE_BITRATE_LIMIT,x=>{this._p2pChannel.updateBitrateLimit(x)})},0),this._key=r||e;let v=g.gatewayInfo,E=u.uid?u.uid:v.uid;this._joinInfo=Es(Es({},u),{},{cid:v.cid,uid:E,vid:v.vid,apResponse:v.res,apGatewayAddress:v.apGatewayAddress,uni_lbs_ip:v.uni_lbs_ip,gatewayAddrs:v.gatewayAddrs}),this.store.intUid=E;let w=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new G(I.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));d.onSuccess(w),this._appId=e,this._channelName=u.cname,this._uid=w,this.store.uid=w,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Dn()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()},0);let S=u.stringUid?"string uid: ".concat(u.stringUid,",uid: ").concat(u.uid):"uid: ".concat(this._uid);return b.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(S)),setTimeout(()=>{b.startUpload()},5e3),this.store.joinEnd(),m=this,pe(zl).call(zl,m)||zl.push(m),this._cloudProxyServerMode==="disabled"&&_t().supportWebCrypto&&D("ENABLE_PRELOAD")&&c2(this._joinInfo),w}catch(g){let y=Array.isArray(g)?g[0]:g;throw y&&y.code===I.OPERATION_ABORTED?b.warning("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),y):b.error("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),y),y.code!==I.OPERATION_ABORTED&&this._numberOfJoinCount===o&&(this._gateway.state="DISCONNECTED",this._reset()),d.onError(y),y}var m}_joinGateway(){if(!this._joinInfo||!this._key)throw new G(I.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!D("JOIN_WITH_FALLBACK_SIGNAL_PROXY")))}async leave(){b.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Dn()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(t){let r=zl.indexOf(t);r!==-1&&zl.splice(r,1)}(this),this._statsCollector.stopUpdateStats();let e=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return b.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave(this.connectionState!=="CONNECTED"),b.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!Array.isArray(e)){if(!(e instanceof Up))return this._publishDataChannel(e);e=[e]}if(e.length===0)throw new G(I.INVALID_PARAMS,"param list is empty");let r=e;if(this._gateway.role==="audience")throw new G(I.INVALID_OPERATION,"audience can not publish stream");for(let i of r){if(!(i instanceof Up))throw new G(I.INVALID_PARAMS,"parameter is not local track");if(!i._enabled&&t)throw new G(I.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()))}b.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(r.map(i=>"".concat(i.getTrackId()," "))));let n=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&r.forEach(i=>{let o=this._configDistribute.getBitrateLimit();i instanceof Qt&&o&&i.setBitrateLimit(o.uplink)});try{await this._publishHighStream(r),b.info("[".concat(this._clientId,"] Publish success, id ").concat(r.map(i=>"".concat(i.getTrackId()," "))))}catch(i){throw b.error("[".concat(this._clientId,"] publish error"),i.toString()),i}finally{n()}}async _publishDataChannel(e){Vt(e.id,"id",0,65535,!0),Yc(e.ordered,"ordered"),En(e.metadata,"metadata",0,512),b.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));let t=await this._publishMutex.lock();try{if(this._p2pChannel.getAllDataChannels().findIndex(i=>i.id===e.id)!==-1)throw new G(I.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||this._uid===void 0)throw new G(I.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&D("FORCE_TURN")&&!D("TURN_ENABLE_TCP")&&!D("TURN_ENABLE_UDP"))throw new G(I.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");let r=function(i){return E6(i,!1)}(e),n=await this._p2pChannel.publishDataChannel([r]);if(n.length>0){if(typeof r._originDataChannelId!="number")throw b.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new G(I.CREATE_DATACHANNEL_ERROR);try{await de.all(n.map(i=>this._uid&&this._gateway.publishDataChannel(this._uid,i,!0))),await r._waitTillOpen()}catch(i){if(i.code!==I.DISCONNECT_P2P)throw i}}return b.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(r.id)),r}catch(r){throw b.error("[".concat(this._clientId,"] publish datachannels error"),r.toString()),r}finally{t()}}async unpublish(e){if(!this._joinInfo||this._uid===void 0)throw new G(I.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof Up))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);b.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map(n=>"".concat(n.getTrackId()," "))," "));let r=await this._publishMutex.lock();try{if(this._p2pChannel instanceof oo){let n=await this._p2pChannel.unpublish(t);n&&await this._gateway.sendExtensionMessage(Rr.UNPUBLISH,{unpubMsg:n},!0)}else{let n=await this._p2pChannel.unpublish(t);n&&await this._gateway.unpublish(n,this._uid),b.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map(i=>"".concat(i.getTrackId()))))}}catch(n){throw b.error("[".concat(this._clientId,"] unpublish error"),n.toString()),n}finally{r&&r()}}async _unpublishDataChannel(e){e!==void 0&&e.length!==0||(e=this._p2pChannel.getAllDataChannels()),b.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map(r=>"".concat(r.id," "))," "));let t=await this._publishMutex.lock();try{let r=await this._p2pChannel.unpublishDataChannel(e);r&&await this._gateway.unpublishDataChannel(r),b.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map(n=>"".concat(n.id))))}catch(r){throw b.error("[".concat(this._clientId,"] unpublish dataChannel error"),r.toString()),r}finally{t&&t()}}async subscribe(e,t,r){if(!(e instanceof ql)){let n=this.remoteUsers.find(i=>i.uid===e);if(!n)throw new G(I.INVALID_REMOTE_USER,"user is not in the channel");e=n}return t==="datachannel"?this._subscribeDataChannel(e,r):this._subscribe(e,t)}async presubscribe(e,t){if(Jr(t,"mediaType",["audio","video"]),this._p2pChannel instanceof oo)throw new G(I.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new G(I.INVALID_OPERATION,"can't presub when not join");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));let r=t===Se.AUDIO,n=t===Se.VIDEO,i=await this._subscribeMutex.lock();try{let{ssrcId:o,ortc:a,rtxSsrcId:s,cname:c,uint_id:l}=await this._gateway.presubscribe(e,t,!0);if(o==null)throw new G(I.UNEXPECTED_RESPONSE,"no ssrc id");let d=this._users.find(p=>p.uid===e);d||(d=new ql(e,l||e),d._is_pre_created=!0,this._users.push(d)),c&&(d._cname=c),d._uintid||(d._uintid=l||e),r&&(d._audioSSRC=o,d._audio_pre_subscribed=!0,a&&(d._audioOrtc=a)),n&&(d._videoSSRC=o,d._video_pre_subscribed=!0,a&&(d._videoOrtc=a),s!=null&&(d._rtxSsrcId=s)),b.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(o)),await this._p2pChannel.subscribe(d,t,o,s,a);let u=r?d._audioTrack:d._videoTrack;if(!u)throw new G(I.UNEXPECTED_ERROR,"can not find remote track in user");return r&&(d._trust_audio_stream_added_state_=!0,d._audio_added_=!0),n&&(d._trust_video_stream_added_state_=!0,d._video_added_=!0),u}catch(o){throw b.error("[".concat(this._clientId,"] presub user ").concat(e," error"),o),o}finally{i()}}async _subscribeDataChannel(e,t){var r;if(Vt(t,"channelId",0,65535,!0),!this._joinInfo)throw new G(I.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find(a=>a===e))throw b.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new G(I.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&e._dataChannels.length===0)throw b.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new G(I.INVALID_REMOTE_USER,"user is not published");let n=(r=e._dataChannels)===null||r===void 0?void 0:r.find(a=>a.id===t);if(!n)throw b.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new G(I.REMOTE_USER_IS_NOT_PUBLISHED);let i=await this._subscribeMutex.lock();b.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{let a=await this._p2pChannel.subscribeDataChannel(e,[n]);if(a&&pe(a).call(a,n.id))try{var o;if(typeof n._originDataChannelId!="number")throw b.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new G(I.CREATE_DATACHANNEL_ERROR);let s={id:n.id,datachannelId:n._originDataChannelId,ordered:n.ordered,maxRetransmits:n.maxRetransmits,metadata:(o=n.metadata)!==null&&o!==void 0?o:""};await this._gateway.subscribeDataChannel(e.uid,s,!0),await n._waitTillOpen()}catch(s){if((s==null?void 0:s.code)!==I.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[n]),s;await this._p2pChannel.unsubscribeDataChannel(e,[n]),this._p2pChannel.setPendingRemoteDataChannel(e,n.id)}return b.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),n}finally{i()}}async _p2pSubscribe(e,t,r){if(Jr(t,"mediaType",["audio","video"]),!this._joinInfo)throw new G(I.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(i=>i===e)){let i=new G(I.INVALID_REMOTE_USER,"user is not in the channel");throw b.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),i}if(!e.hasAudio&&!e.hasVideo){let i=new G(I.INVALID_REMOTE_USER,"user is not published");throw b.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),i}if(!r&&(t==="audio"&&!e.hasAudio||t==="video"&&!e.hasVideo)){let i=new G(I.REMOTE_USER_IS_NOT_PUBLISHED);throw b.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),i}let n=await this._subscribeMutex.lock();b.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{let o=t==="audio"?e._audioSSRC:e._videoSSRC,a=t==="audio"?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof oo&&await this._p2pChannel.subscribe(e,t,o,a)}catch(o){throw o}b.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(o=>{b.warning("[".concat(this._clientId,"] auto set fallback failed"),o)});let i=t==="audio"?e._audioTrack:e._videoTrack;if(!i)throw new G(I.UNEXPECTED_ERROR,"can not find remote track in user object");return i}catch(i){throw b.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),i),i}finally{n()}}async _subscribe(e,t,r){if(this._p2pChannel instanceof oo)return this._p2pSubscribe(e,t);if(Jr(t,"mediaType",["audio","video"]),!this._joinInfo)throw new G(I.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(c=>c===e)){let c=new G(I.INVALID_REMOTE_USER,"user is not in the channel");throw b.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),c}if(!e.hasAudio&&!e.hasVideo){let c=new G(I.INVALID_REMOTE_USER,"user is not published");throw b.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),c}if(!(r||(t!=="audio"||e.hasAudio&&e._audioSSRC!==void 0)&&(t!=="video"||e.hasVideo&&e._videoSSRC!==void 0))){let c=new G(I.REMOTE_USER_IS_NOT_PUBLISHED);throw b.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),c}let n=t==="audio"?e._audioSSRC:e._videoSSRC,i=t==="audio"?e._audioOrtc:e._videoOrtc,o=t==="video"?e._rtxSsrcId:void 0,a={stream_type:t==="audio"?Se.AUDIO:Se.VIDEO,ssrcId:n},s=await this._subscribeMutex.lock();b.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{let l=t==="audio"?e._audioSSRC:e._videoSSRC;l!==void 0&&l!==n&&(n=l,i=t==="audio"?e._audioOrtc:e._videoOrtc,o=t==="video"?e._rtxSsrcId:void 0,a={stream_type:t==="audio"?Se.AUDIO:Se.VIDEO,ssrcId:n}),Hn.markSubscribeStart(this.store.clientId,n),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,n,o,i);try{this._p2pChannel.isPreSubScribe(n)||await this._gateway.subscribe(e.uid,a,!0)}catch(d){if((d==null?void 0:d.code)!==I.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),d;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(l){throw this._p2pChannel.reportSubscribeEvent(!1,l==null?void 0:l.code,e,t),l}b.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(l=>{b.warning("[".concat(this._clientId,"] auto set fallback failed"),l)});let c=t==="audio"?e._audioTrack:e._videoTrack;if(!c)throw new G(I.UNEXPECTED_ERROR,"can not find remote track in user object");return c}catch(c){throw b.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),c),c}finally{s()}}async massSubscribe(e){if(Hc(e,"subscribeList"),!this._joinInfo)throw new G(I.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));let t=Date.now(),r=new Map,n=await this._subscribeMutex.lock();b.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map(s=>{let{user:c,mediaType:l}=s;return"user: ".concat(c==null?void 0:c.uid,", mediaType: ").concat(l)}).join("; ")));let i=(e=[...e]).map(s=>{let{user:c,mediaType:l}=s;return{user:c,mediaType:l}}),o=await this._p2pChannel.globalLock();try{var a;for(let c=e.length-1;c>=0;c--){let l=e[c],{user:d,mediaType:u}=l;if(Jr(u,"mediaType",["audio","video"]),!d){let m=new G(I.INVALID_PARAMS,"user property does not exist in subscribeList item");throw b.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),m}if(!this._users.find(m=>m===d)){let m=new G(I.INVALID_REMOTE_USER,"user is not in the channel");b.error("[".concat(this._clientId,"] can not massSubscribe ").concat(d.uid,", this user is not in the channel")),i[c].error=m,e.splice(c,1);continue}if(u==="audio"&&(!d.hasAudio||d._audioSSRC===void 0)||u==="video"&&(!d.hasVideo||d._videoSSRC===void 0)){let m=new G(I.REMOTE_USER_IS_NOT_PUBLISHED);b.error("[".concat(this._clientId,"] can not subscribe ").concat(d.uid," with mediaType ").concat(u,", remote user is not published")),i[c].error=m,e.splice(c,1);continue}let p=nn.Video|nn.LwoVideo,f=r.get(d);if(f){if(u==="video"?f&p:f&nn.Audio){e.splice(c,1),b.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(d.uid,", mediaType:").concat(u," twice"));continue}r.set(d,f|(u==="video"?p:nn.Audio))}else r.set(d,u==="video"?p:nn.Audio)}for(let c=e.length-1;c>=0;c--){let l=e[c],{user:d,mediaType:u}=l,p=nn.Video|nn.LwoVideo;if(this._p2pChannel.hasRemoteMedia(d,u)){await this._p2pChannel.unmuteRemoteNoLock(d,u);let f=r.get(d);r.set(d,u==="video"?f^p:f^nn.Audio),e.splice(c,1)}}this.store.massSubscribe(e.map(c=>({userId:c.user.uid,type:c.mediaType})),t);let s=Ps(a=Array.from(r.entries())).call(a,(c,l)=>{let[d,u]=l;if(u===0)return c;let p={stream_id:d.uid,stream_type:u};return u&nn.Audio&&(p.audio_ssrc=d._audioSSRC),u&nn.Video&&(p.video_ssrc=d._videoSSRC),c.push(p),c},[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map(l=>{let{user:d,mediaType:u}=l;return{user:d,mediaType:u,ssrcId:u===Se.VIDEO?d._videoSSRC:d._audioSSRC,rtxSsrcId:u===Se.VIDEO?d._rtxSsrcId:void 0}}));let c=new Map;if(s=s.filter(l=>l.video_ssrc&&!this._p2pChannel.isPreSubScribe(l.video_ssrc)||l.audio_ssrc&&!this._p2pChannel.isPreSubScribe(l.audio_ssrc)||!l.video_ssrc&&!l.audio_ssrc),s.length>0){let l=await this._gateway.subscribeAll(s,!0);((l==null?void 0:l.users)||[]).forEach(d=>{let{stream_id:u,video_error_code:p,audio_error_code:f,error_code:m}=d;(p||f||m)&&c.set(u,{video_error_code:p,audio_error_code:f,error_code:m})})}if(Array.from(c.entries()).length>0){let l=[];Array.from(c.entries()).forEach(d=>{let[u,p]=d,f=this.remoteUsers.find(m=>m.uid===u);if(f){let m;p.error_code||p.video_error_code&&p.audio_error_code?m=void 0:p.video_error_code?m=Se.VIDEO:p.audio_error_code&&(m=Se.AUDIO),l.push({user:f,mediaType:m})}}),l.length>0&&await this._p2pChannel.massUnsubscribeNoLock(l)}for(let l of i){let d=c.get(l.user.uid);if(d){let u=d.error_code||l.mediaType==="audio"&&d.audio_error_code||l.mediaType==="video"&&d.video_error_code;if(u){let p=G0(u);b.error("user:".concat(l.user.uid," mediaType:").concat(l.mediaType," has massSubscribe error ").concat(p.desc)),l.error=new G(I.SUBSCRIBE_FAILED,"code ".concat(u,": ").concat(p.desc))}}l.error||(l.mediaType==="video"?l.track=l.user.videoTrack:l.track=l.user.audioTrack)}return this.store.massSubscribe(i.filter(l=>!l.error).map(l=>({userId:l.user.uid,type:l.mediaType})),void 0,Date.now()),i.forEach(l=>{var d;be.subscribe(this.store.sessionId,{succ:!!l.error,ec:((d=l.error)===null||d===void 0?void 0:d.code)||null,video:l.mediaType===Se.VIDEO,audio:l.mediaType===Se.AUDIO,peerid:l.user.uid,subscribeRequestid:l.mediaType===Se.VIDEO?l.user._videoSSRC:l.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t),preSsrc:this._p2pChannel.isPreSubScribe(l.user._videoSSRC)},!0)}),b.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map(l=>{let{user:d,mediaType:u}=l;return"user: ".concat(d==null?void 0:d.uid,", mediaType: ").concat(u)}).join("; "))),i}catch(c){throw await this._p2pChannel.massUnsubscribeNoLock(e),c}}finally{o(),n()}}async unsubscribe(e,t,r){if(!(e instanceof ql)){let i=this.remoteUsers.find(o=>o.uid===e);if(!i)throw new G(I.INVALID_REMOTE_USER,"user is not in the channel");e=i}if(t||this.store.useP2P){if(t==="datachannel")return this._unsubscribeDataChannel(e,r)}else await this._unsubscribeDataChannel(e,r);if(t&&Jr(t,"mediaType",["audio","video"]),!this._joinInfo)throw new G(I.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(i=>i===e)){let i=new G(I.INVALID_REMOTE_USER,"user is not in the channel");throw b.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),i}b.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));let n=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof oo)await this._p2pChannel.unsubscribe(e,t);else{let i=await this._p2pChannel.unsubscribe(e,t);i&&await this._gateway.unsubscribe(i,e.uid),t&&t!=="audio"||(e._audio_pre_subscribed=!1),t&&t!=="video"||(e._video_pre_subscribed=!1),e._is_pre_created&&nw(this._users,e),b.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(i){if(i.code===I.DISCONNECT_P2P)return void b.warning("disconnecting p2p, abort unsubscribe request.");throw b.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),i.toString()),i}finally{n()}}async _unsubscribeDataChannel(e,t){if(t&&Vt(t,"id",0,65535,!0),!this._joinInfo)throw new G(I.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find(n=>n===e)){let n=new G(I.INVALID_REMOTE_USER,"user is not in the channel");throw b.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),n}let r;if(typeof t=="number"){let n=e._dataChannels.find(i=>i.id===t);n&&(r=[n])}else r=e._dataChannels;if(r===void 0){let n=new G(I.REMOTE_USER_IS_NOT_PUBLISHED);throw b.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),n}b.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(r.map(n=>n.id)));try{let n=await this._p2pChannel.unsubscribeDataChannel(e,r);n&&await this._gateway.unsubscribeDataChannel(n,e.uid),b.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(n))}catch(n){if(n.code===I.DISCONNECT_P2P)return void b.warning("disconnecting p2p, abort unsubscribe request.");throw b.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),n.toString()),n}}async massUnsubscribe(e){if(Hc(e,"unsubscribeList"),!this._joinInfo)throw new G(I.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");b.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map(r=>{let{user:n,mediaType:i}=r;return"user: ".concat(n==null?void 0:n.uid,", mediaType: ").concat(i,";")}).join())),e=[...e];let t=new Map;for(let r=e.length-1;r>=0;r--){let{user:n,mediaType:i}=e[r];if(!n){let a=new G(I.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw b.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),a}if(Jr(i,"mediaType",["video","audio",void 0]),!this._users.find(a=>a===n)){b.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(n.uid,", user is not in the channel")),e.splice(r,1);continue}let o=nn.Video|nn.LwoVideo;if(t.has(n)){let a=t.get(n),s;switch(i){case"video":s=a&o;break;case"audio":s=a&nn.Audio;break;default:s=a&(nn.Audio|o)}if(s){b.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(n.uid,",mediaType:").concat(i," twice.")),e.splice(r,1);continue}i?i==="audio"?t.set(n,a|nn.Audio):i==="video"&&t.set(n,a|o):t.set(n,a|nn.Audio|o)}else i?i==="audio"?t.set(n,nn.Audio):i==="video"&&t.set(n,o):t.set(n,nn.Audio|o)}try{let r=await this._p2pChannel.massUnsubscribe(e);r&&await this._gateway.massUnsubscribe(r),b.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map(n=>{let{user:i,mediaType:o}=n;return"user: ".concat(i==null?void 0:i.uid,", mediaType: ").concat(o,";")}).join()))}catch(r){if(r.code===I.DISCONNECT_P2P)return void b.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw b.error("[".concat(this._clientId,"] massUnsubscribe error"),r.toString()),r}}async setLowStreamParameter(e){(function(r){if(!r)throw new X(I.INVALID_PARAMS);dr(r.width)||QR(r.width,"streamParameter.width"),dr(r.height)||QR(r.height,"streamParameter.height"),dr(r.framerate)||QR(r.framerate,"streamParameter.framerate"),dr(r.bitrate)||Vt(r.bitrate,"streamParameter.bitrate")})(e),(!e.width&&e.height||e.width&&!e.height)&&b.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),b.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));let t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,ie.LocalVideoLowTrack)}async enableDualStream(){if(!_t().supportDualStream)throw be.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new G(I.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new G(I.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw be.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,be.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),b.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new G(I.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(ie.LocalVideoLowTrack))try{let e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw be.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,be.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),b.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(r){Jr(r,"role",["audience","host"])}(e),t&&H3(t),this.mode==="rtc"||this.mode==="p2p")throw b.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new G(I.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&e==="host")throw new G(I.INVALID_OPERATION,"host mode can not set audience latency level");if(e==="audience"&&this._p2pChannel.hasLocalMedia())throw new G(I.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(e,t),this._config.role=e,b.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}getRemoteInboundOffset(){var e;let t=(e=this._p2pChannel.getStats())===null||e===void 0?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;let r=t.timestamp-Date.now();return Math.abs(r)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?r:0}getNtpWallTimeInMs(){return document.visibilityState==="visible"&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(En(e,"proxyServer"),!t){if(this.connectionState!=="DISCONNECTED")throw new G(I.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new G(I.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,be.setProxyServer(this._proxyServer),b.setProxyServer(this._proxyServer),b.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if(this.connectionState!=="DISCONNECTED")throw new G(I.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new G(I.INVALID_OPERATION,"You have already set the proxy")}if(oT(e))return this._turnServer={servers:e,mode:"original-manual"},void b.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map(r=>r.urls).join(","),"."));e.forEach(r=>tQ(r)),this._turnServer={servers:e,mode:"manual"},b.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if(this.connectionState!=="DISCONNECTED")throw new G(I.INVALID_OPERATION,"you should set license before join channel");if(En(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new G(I.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,b.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if(this.connectionState!=="DISCONNECTED")throw new G(I.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new G(I.INVALID_OPERATION,"You have already set the proxy");let t=[3,4,5],r;switch(e===void 0&&(e=3),e){case 1:case 2:throw new G(I.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:r="proxy3";break;case 4:r="proxy4";break;case 5:r="proxy5";break;default:throw new G(I.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=r,this.store.cloudProxyServerMode=r,b.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new G(I.INVALID_OPERATION,"Stop proxy server after leave channel");be.setProxyServer(),b.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",b.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new G(I.INVALID_PARAMS,"accessPoints is required.");Hc(e.accessPoints.serverList,"accessPoints.serverList"),En(e.accessPoints.domain,"accessPoints.domain");let t=(p,f)=>{Vt(p,f,0,65535,!0)},r=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),r=e.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new G(I.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");D("CLOSE_AFB_FOR_LOCAL_AP")&&(Ft("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),Ft("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));let n=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,o=e.accessPoints.serverList.map(p=>n.test(p)?"".concat(p.replace(/\./g,"-"),".").concat(i):p),a=o.map(p=>"".concat(p,":").concat(r));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Ft("WEBCS_DOMAIN",a),Ft("WEBCS_DOMAIN_BACKUP_LIST",a),Ft("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(Hc(e.report.hostname,"report.hostname"),Ft("EVENT_REPORT_DOMAIN",e.report.hostname[0]),Ft("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(Ft("EVENT_REPORT_DOMAIN",o[0]),Ft("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));let s=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),s=e.report.port),Ft("STATS_COLLECTOR_PORT",s),e.report?Ft("ENABLE_EVENT_REPORT",!0):Ft("ENABLE_EVENT_REPORT",!1);let c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(Hc(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=o[0];let l=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),l=e.log.port),Ft("LOG_UPLOAD_SERVER","".concat(c,":").concat(l));let d=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(Hc(e.cds.hostname,"cds.hostname"),d=e.cds.hostname):d=o;let u=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),u=e.cds.port),Ft("CDS_AP",d.map(p=>"".concat(p,":").concat(u))),e.cds?Ft("ENABLE_CONFIG_DISTRIBUTE",!0):Ft("ENABLE_CONFIG_DISTRIBUTE",!1),b.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(Hc(e,"serverList"),En(t,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new G(I.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");let r=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map(n=>r.test(n)?"".concat(n.replace(/\./g,"-"),".").concat(t):n),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Ft("WEBCS_DOMAIN",e),Ft("WEBCS_DOMAIN_BACKUP_LIST",e),Ft("GATEWAY_DOMAINS",[t]),Ft("EVENT_REPORT_DOMAIN",e[0]),Ft("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),Ft("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),b.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(Jr(e,"streamType",[0,1]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(t){throw b.error("[".concat(this._clientId,"] set default remote video stream type error"),t.toString()),t}else b.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){Jr(t,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout(()=>{let r=this._users.find(n=>n.uid===e);r&&r.videoTrack&&r.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(r){throw b.error("[".concat(this._clientId,"] set remote video stream type error"),r.toString()),r}b.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){Jr(t,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(r){throw b.error("[".concat(this._clientId,"] set stream fallback option"),r.toString()),r}b.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,r,n){(function(o){Jr(o,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])})(e),En(t,"secret");let i=["aes-128-gcm2","aes-256-gcm2"];if(pe(i).call(i,e)){if(!r||!(r instanceof Uint8Array&&r.length===32))throw new G(I.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(r)throw new G(I.INVALID_PARAMS,"current encrypt mode does not need salt");if(n){if(Yc(n,"encryptDataStream"),!pe(i).call(i,e))throw new G(I.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(t)||b.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=e,this._encryptionSecret=t,r&&(this._encryptionSalt=Ed(r))}async renewToken(e){if(En(e,"token",1,2047),!this._key||!this._joinInfo)throw new G(I.INVALID_OPERATION,"renewToken should not be called before user join");let t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);let r=await this._renewTokenMutex.lock();try{if(D("USE_NEW_TOKEN")){b.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));let n=await LMe(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Vr);b.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:n})}else b.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});b.debug("[".concat(this._clientId,"] renewToken success"))}catch(n){throw this._key=t,this._joinInfo.token=t,b.error("[".concat(this._clientId,"] renewToken failed"),n.toString()),n}finally{r()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?b.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{let e=this._p2pChannel.getAudioLevels();this.safeEmit(ht.VOLUME_INDICATOR,e)},D("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){let e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if(this.codec!=="h264")throw new G(I.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new G(I.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new G(I.LIVE_STREAMING_TASK_CONFLICT);let r=t?Zc.TRANSCODE:Zc.RAW;return this._createLiveStreamingClient(r).startLiveStreamingTask(e,r)}setLiveTranscoding(e){return this._createLiveStreamingClient(Zc.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){let t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(r=>r&&r.hasUrl(e));if(!t.length)throw new G(I.INVALID_PARAMS,"can not find live streaming url to stop");await de.all(t.map(r=>r&&r.stopLiveStreamingTask(e)))}async startChannelMediaRelay(e){a6(e),await this._createChannelMediaRelayClient().startChannelMediaRelay(e)}async updateChannelMediaRelay(e){a6(e),await this._createChannelMediaRelayClient().updateChannelMediaRelay(e)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new G(I.INVALID_OPERATION,"can not send data stream, not joined");if((typeof e=="string"||e instanceof Uint8Array)&&(e={payload:e}),typeof e.payload=="string"){let i=new TextEncoder;e.payload=i.encode(e.payload)}let n=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&pe(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(n=!0,e.payload=await async function(i,o,a){var s;let c=Ps(s=Array.from(a)).call(s,(g,y)=>g+y,0),l={serverTs:0,seq:QDe++,length:a.length,checkSum:c},d=new Uint8Array(Y3(c,2)),u=new ArrayBuffer(Kh),p=new DataView(u);p.setUint32(0,l.serverTs),p.setUint16(4,l.seq),p.setUint16(6,l.length),p.setUint16(8,l.checkSum);let f=16-a.length%16;a=G3(a,new Uint8Array(f));let m=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i,tagLength:J3,additionalData:d},o,a);return G3(new Uint8Array(u),new Uint8Array(m))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new G(I.INVALID_PARAMS,n?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(Me.DATA_STREAM,{payload:Ed(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-aje},!r)}sendMetadata(e){if(!this._joinInfo)throw new G(I.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new G(I.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Me.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Ed(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(e2e),!this._joinInfo)throw new G(I.INVALID_OPERATION,"can not send custom report, not joined");await be.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){Jr(t.spatialLayer,"spatialLayer",[0,1,2,3]),Jr(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(r){throw b.error("[".concat(this._clientId,"] pick SVC layer failed"),r.toString()),r}}async setRTMConfig(e){let{apRTM:t=!1,rtmFlag:r}=e;if(Yc(t,"apRTM"),Vt(r,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=r,b.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),(this.connectionState==="CONNECTED"||this.connectionState==="RECONNECTING")&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=r,this._gateway.setRTM2Flag(r)}_reset(){if(b.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Ui.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&TZ(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach(e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach(t=>t._close()),e._dataChannels.length=0)}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new zn("client-publish"),this._subscribeMutex=new zn("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(e,t){var r;let n=e||Lp();e?b.debug("[".concat(this._clientId,"] new Session ").concat(n)):b.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(n));let i=e?"":this._sessionId||"";this._sessionId=n,this.store.sessionId=n;let o={lts:new Date().getTime(),mode:this.mode,buildFormat:2,stringUid:(t==null?void 0:t.stringUid)||((r=this._joinInfo)===null||r===void 0?void 0:r.stringUid),channelProfile:this.mode==="live"?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:i,clientRole:this.role==="audience"?2:1};be.sessionInit(this._sessionId,Es({cname:t.channel,appid:t.appId},o)),this._joinInfo&&(this._joinInfo.sid=n),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=n)}async _publishHighStream(e){if(!this._joinInfo||this._uid===void 0)throw new G(I.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&D("FORCE_TURN")&&!D("TURN_ENABLE_TCP")&&!D("TURN_ENABLE_UDP"))throw new G(I.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");b.debug("[".concat(this._clientId,"] publish high stream"));try{let r=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof oo){let n=(await r.next()).value;if(n){try{await this._gateway.sendExtensionMessage(Rr.PUBLISH,n,!0)}catch(i){throw r.throw(i),i}await r.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{let n=(await r.next()).value;if(n){var t;let i;try{i=await this._gateway.publish(this._uid,n,!0)}catch(o){if(o.code!==I.DISCONNECT_P2P)throw r.throw(o),o}await r.next(((t=i)===null||t===void 0?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(let i of e)i instanceof Qt&&i._encoderConfig&&this._gateway.setVideoProfile(i._encoderConfig),!i.muted&&i.enabled||await this._p2pChannel.muteLocalTrack(i)}}catch(r){if(this._p2pChannel.reportPublishEvent(!1,r==null?void 0:r.code,e),(r==null?void 0:r.code)===I.WS_ABORT)return;throw r}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new G(I.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new G(I.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));b.debug("[".concat(this._clientId,"] publish low stream"));let e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{let r=await this._p2pChannel.publishLowStream(this._lowStreamParameter),n=(await r.next()).value;if(n){var t;let i;try{i=await this._gateway.publish(this._uid,n,!0)}catch(o){if(o.code!==I.DISCONNECT_P2P)throw r.throw(o),o}r.next(((t=i)===null||t===void 0?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(r){if(this._p2pChannel.reportPublishEvent(!1,r==null?void 0:r.code,void 0,!0),(r==null?void 0:r.code)===I.WS_ABORT)return;throw r}}_createLiveStreamingClient(e){let t=()=>{if(!this._joinInfo||!this._appId)return new G(I.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();let r=(n={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},bg("LiveStreaming").create(n));var n;return r.onLiveStreamError=(i,o)=>{be.reportApiInvoke(this._sessionId,{name:zr.ON_LIVE_STREAM_ERROR,options:[i,o],tag:Er.TRACER}).onSuccess(),this.safeEmit(ht.LIVE_STREAMING_ERROR,i,o)},r.onLiveStreamWarning=(i,o)=>{be.reportApiInvoke(this._sessionId,{name:zr.ON_LIVE_STREAM_WARNING,options:[i,o],tag:Er.TRACER}).onSuccess(),this.safeEmit(ht.LIVE_STREAMING_WARNING,i,o)},r.on($N.REQUEST_WORKER_MANAGER_LIST,(i,o,a)=>{if(!this._joinInfo)return a(new G(I.INVALID_OPERATION,"can not find join info to get worker manager"));(async function(s,c,l,d){let u=D("UAP_AP").slice(0,D("AJAX_REQUEST_CONCURRENT")).map(p=>c.proxyServer?"https://".concat(c.proxyServer,"/ap/?url=").concat(p+"/api/v1?action=uap"):"https://".concat(p,"/api/v1?action=uap"));return await AMe(u,s,c,l,d)})(i,this._joinInfo,this._axiosCancelSource.token,Vr).then(o).catch(a)}),r};return e===Zc.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||t(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||t(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo)return new G(I.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){let{sendResolutionWidth:t,sendResolutionHeight:r}=this.getLocalVideoStats(),n=(e={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:t,height:r}},bg("ChannelMediaRelay").create(e));n.on("state",i=>{i===Gi.RELAY_STATE_FAILURE&&n&&n.dispose(),this.safeEmit(ht.CHANNEL_MEDIA_RELAY_STATE,i)}),n.on("event",i=>{this.safeEmit(ht.CHANNEL_MEDIA_RELAY_EVENT,i)}),this._channelMediaRelayClient=n,this._statsCollector.onStatsChanged=(i,o)=>{var a;i==="resolution"&&((a=this._channelMediaRelayClient)===null||a===void 0||a.setVideoProfile(o))}}var e;return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){let{added:r,deleted:n}=e,i=[];if(t){let o=[];this._users.forEach(a=>{a._dataChannels.forEach(s=>{r.every(c=>c.uid!==a._uintid||c.stream_id!==s.id)&&o.push({uid:a._uintid,stream_id:s.id,ordered:s.ordered,max_retrans_times:s.maxRetransmits,metadata:s.metadata})})}),o.length>0&&this._handleUpdateDataChannel({added:[],deleted:o})}Array.isArray(r)&&r.length>0&&r.forEach(o=>{let{uid:a,stream_id:s,ordered:c,max_retrans_times:l,metadata:d}=o,u=this._users.find(p=>p._uintid===a);if(!u)return void b.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"));if(b.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(a)),pe(i).call(i,u)||i.push(u),u._uintid||(u._uintid=a),u._dataChannels.findIndex(p=>p.id===o.stream_id)===-1){let p={id:s,ordered:!!c,maxRetransmits:l,metadata:d},f=function(m){return E6(m,!0)}(p);u._dataChannels.push(f),b.info("[".concat(this._clientId,"] remote user ").concat(u.uid," published datachannel")),t||this.safeEmit(ht.USER_PUBLISHED,u,"datachannel",p)}this._p2pChannel.hasPendingRemoteDataChannel(u,o.stream_id)&&(b.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(u.uid," after reconnect.")),this._subscribeDataChannel(u,o.stream_id).catch(p=>{b.error("[".concat(this._clientId,"] resubscribe datachannel error"),p.toString())}))}),t&&(this.safeEmit(ht.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(n)&&n.length>0&&n.forEach(o=>{let{uid:a,stream_id:s}=o,c=this._users.find(d=>d._uintid===a);if(!c)return void b.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));let l=c._dataChannels.find(d=>d.id===o.stream_id);l&&(b.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(a)),this._p2pChannel.unsubscribeDataChannel(c,[l]).then(d=>{if(c._dataChannels=c._dataChannels.filter(u=>u!==l),d)return this._gateway.unsubscribeDataChannel(d,c.uid)}),b.info("[".concat(this._clientId,"] remote user ").concat(a," unpublished datachannel ,id:").concat(l.id)),this.safeEmit(ht.USER_UNPUBLISHED,c,"datachannel",l._config))})}_handleRemoveDataChannels(e){let t=this._users.find(r=>r.uid===e.uid);if(t){if(t._dataChannels!==void 0&&t._dataChannels.length>0){b.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));let r=()=>{b.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach(n=>{this.safeEmit(ht.USER_UNPUBLISHED,t,"datachannel",n._config)})};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then(n=>{if(n)return this._gateway.unsubscribeDataChannel(n,t.uid)}),r()}}else b.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(An.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(An.CONNECTION_STATE_CHANGE,(e,t,r)=>{var n;if(r===Mt.FALLBACK)return;let i=()=>{this.safeEmit(ht.CONNECTION_STATE_CHANGE,e,t,r)};if(be.reportApiInvoke(this._sessionId||((n=this._gateway.joinInfo)===null||n===void 0?void 0:n.sid)||null,{name:zr.CONNECTION_STATE_CHANGE,options:[e,t,r],tag:Er.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:r})),b.info("[".concat(this._clientId,"] connection state change: ").concat(t," -> ").concat(e)),e==="DISCONNECTED")return this._reset(),void i();if(e==="RECONNECTING")this._users.forEach(a=>{a._trust_in_room_=!1,a._trust_audio_enabled_state_=!1,a._trust_video_enabled_state_=!1,a._trust_audio_mute_state_=!1,a._trust_video_mute_state_=!1,a._trust_audio_stream_added_state_=!1,a._trust_video_stream_added_state_=!1,a._is_pre_created||(a._audio_pre_subscribed||(a._audioSSRC=void 0,a._audioOrtc=void 0),a._video_pre_subscribed||(a._videoSSRC=void 0,a._videoOrtc=void 0,a._rtxSsrcId=void 0),a._cname=void 0)}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(e==="CONNECTED"){var o;this._streamFallbackTypeCacheMap.forEach((a,s)=>{this._gateway.setStreamFallbackOption(s,a).catch(c=>{b.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),c)})}),this._remoteStreamTypeCacheMap.forEach((a,s)=>{this._gateway.setRemoteVideoStreamType(s,a).catch(c=>{b.warning("[".concat(this._clientId,"] auto set remote stream type failed"),c)})}),this._remoteDefaultVideoStreamType!==void 0&&((o=this._joinInfo)===null||o===void 0?void 0:o.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{b.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(a=>{b.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(a))}),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(a=>!a._trust_in_room_).forEach(a=>{b.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(a.uid)),this._handleUserOffline({uid:a.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(a=>{a._trust_audio_mute_state_||(b.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(a.uid)),this._handleMuteStream(a.uid,Se.AUDIO,!1)),a._trust_video_mute_state_||(b.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(a.uid)),this._handleMuteStream(a.uid,Se.VIDEO,!1)),a._trust_audio_enabled_state_||(b.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(a.uid)),this._handleSetStreamLocalEnable("audio",a.uid,!0)),a._trust_video_enabled_state_||(b.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(a.uid)),this._handleSetStreamLocalEnable("video",a.uid,!0)),a._trust_video_stream_added_state_||(b.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(a.uid)),this._handleResetAddStream(a,"video")),a._trust_audio_stream_added_state_||(b.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(a.uid)),this._handleResetAddStream(a,"audio")),a._video_added_||a._audio_added_||(b.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(a.uid)),this._handleRemoveStream({uid:a.uid,uint_id:a._uintid}))}))},1e3))}i()}),this._gateway.on(An.REQUEST_NEW_GATEWAY_LIST,async(e,t)=>{if(!this._joinInfo)return t(new G(I.UNEXPECTED_ERROR,"can not recover, no join info"));try{let r,n=await T6(Es(Es({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));n?(r=n.ap,C6(n),this._joinInfo.preload=!0):(r=await tO(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Vr,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=r.gatewayInfo.res,this._joinInfo.gatewayAddrs=r.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=r.gatewayInfo.uni_lbs_ip);let i=[];r.gatewayInfo.gatewayAddrs.forEach(o=>{let{address:a}=o,[s,c]=a.split(":");this._joinInfo&&this._joinInfo.proxyServer?i.push({proxy:this._joinInfo.proxyServer,host:s,port:c}):i.push({host:s,port:c})}),e(i)}catch(r){t(r)}}),this._gateway.on(An.NETWORK_QUALITY,e=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(ht.NETWORK_QUALITY,e)}),this._gateway.on(An.STREAM_TYPE_CHANGE,(e,t)=>{this.safeEmit(ht.STREAM_TYPE_CHANGED,e,t),be.reportApiInvoke(this._sessionId,{name:zr.STREAM_TYPE_CHANGE,options:[e,t],tag:Er.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))}),this._gateway.on(An.IS_P2P_DISCONNECTED,e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)}),this._gateway.on(An.REQUEST_P2P_CONNECTION_PARAMS,async(e,t,r)=>{try{let n=await this._p2pChannel.getEstablishParams();D("ENABLE_PREALLOC_PC")&&n||(n=await this._p2pChannel.startP2PConnection(e)),t(n)}catch(n){r(n)}}),this._gateway.on(An.JOIN_RESPONSE,(e,t)=>{if(this.store.useP2P)return;let r=_B(e.ortc,t,e.attributes.userAttributes.preSubSsrcs);this._p2pChannel.connect(r)}),this._gateway.on(An.PRE_CONNECT_PC,async e=>{let{candidates:t,fingerprint:r}=e;if(this._joinInfo&&t.length>0&&!this._p2pChannel.isPlanB){var n;await this._p2pChannel.startP2PConnection({turnServer:this._joinInfo.turnServer});let{cert:i,cid:o}=this._joinInfo.apResponse;await this._p2pChannel.connect({iceParameters:{iceUfrag:"".concat(o,"_").concat(i),icePwd:"".concat(o,"_").concat(i)},dtlsParameters:{fingerprints:[{hashFunction:"sha-256",fingerprint:(n=D("FINGERPRINT"))!==null&&n!==void 0?n:r}]},candidates:t,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:"active",cname:"o/i14u9pJrxRKAsu",preallocation:!0})}})}_handleGatewaySignalEvents(){this._gateway.signal.on(lt.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(lt.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(lt.ON_ADD_AUDIO_STREAM,e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc)),this._gateway.signal.on(lt.ON_ADD_VIDEO_STREAM,e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId)),this._gateway.signal.on(lt.ON_REMOTE_DATASTREAM_UPDATE,e=>{this._handleUpdateDataChannel(e)}),this._gateway.signal.on(lt.ON_REMOTE_FULL_DATASTREAM_INFO,e=>{this._handleUpdateDataChannel({added:e.datastreams||[],deleted:[]},!0)}),this._gateway.signal.on(lt.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(lt.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(lt.MUTE_AUDIO,e=>this._handleMuteStream(e.uid,Se.AUDIO,!0)),this._gateway.signal.on(lt.UNMUTE_AUDIO,e=>this._handleMuteStream(e.uid,Se.AUDIO,!1)),this._gateway.signal.on(lt.MUTE_VIDEO,e=>this._handleMuteStream(e.uid,Se.VIDEO,!0)),this._gateway.signal.on(lt.UNMUTE_VIDEO,e=>this._handleMuteStream(e.uid,Se.VIDEO,!1)),this._gateway.signal.on(lt.RECEIVE_METADATA,e=>{let t=Tu(e.metadata);this.safeEmit(ht.RECEIVE_METADATA,e.uid,t)}),this._gateway.signal.on(lt.ON_DATA_STREAM,async e=>{var t;if(!e)return;let r=Tu(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&pe(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<Kh)throw new G(I.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(Kh));r=await async function(i,o,a){let s=a.subarray(0,Kh),c=s.slice(8,Kh),l=(c[0]<<8)+c[1],d=(s[6]<<8)+s[7],u=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:i,tagLength:J3,additionalData:new Uint8Array(Y3(l,2))},o,a.subarray(Kh));return new Uint8Array(u).subarray(0,d)}(this._encryptDataStreamIv,this._encryptDataStreamKey,r)}let n=0;if(e.ordered||e.syncWithAudio){let i=this._p2pChannel.getStats(),o=this.remoteUsers.find(s=>s.uid===e.uid),a=i==null?void 0:i.audioRecv.find(s=>s.ssrc===(o==null?void 0:o._audioSSRC));n=a==null?void 0:a.jitterBufferMs}n==null&&(n=0),cje(Es(Es({},e),{},{payload:r}),n,{id:this._clientId,onStreamMessage:typeof this.onStreamMessage=="function"?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})}),this._gateway.signal.on(lt.ON_CRYPT_ERROR,()=>{Od(()=>{b.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(ht.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(lt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(lt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{b.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,Mt.TOKEN_EXPIRE),this.safeEmit(ht.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(lt.ON_STREAM_FALLBACK_UPDATE,e=>{b.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(ht.STREAM_FALLBACK,e.stream_id,e.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(lt.ON_PUBLISH_STREAM,e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),b.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))}),this._gateway.signal.on(lt.ENABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)}),this._gateway.signal.on(lt.DISABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)}),this._gateway.signal.on(je.REQUEST_TIMEOUT,(e,t)=>{if(this._joinInfo)switch(e){case Me.PUBLISH:{if(!t)return;let i=t.ortc;if(i){var r,n;let o=i.some(c=>{let{stream_type:l}=c;return l===Nt.Audio}),a=i.some(c=>{let{stream_type:l}=c;return l!==Nt.Audio}),s=i.some(c=>{let{stream_type:l}=c;return l===Nt.Screen||l===Nt.ScreenLow});t.state==="offer"&&be.publish(this._joinInfo.sid,{eventElapse:Hn.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:I.TIMEOUT,audio:o,video:a,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:s,audioName:o?(r=i.find(c=>{let{stream_type:l}=c;return l===Nt.Audio}))===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId.toString():void 0,videoName:a?(n=i.find(c=>{let{stream_type:l}=c;return l!==Nt.Audio}))===null||n===void 0||(n=n.ssrcs[0])===null||n===void 0?void 0:n.ssrcId.toString():void 0})}break}case Me.SUBSCRIBE:t&&be.subscribe(this._joinInfo.sid,{succ:!1,ec:I.TIMEOUT,audio:t.stream_type===Se.AUDIO,video:t.stream_type===Se.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:Hn.measureFromSubscribeStart(this.store.clientId,t.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(t.ssrcId)})}}),this._gateway.signal.on(lt.ON_P2P_OK,e=>{this.uid,this._uid}),this._gateway.signal.on(lt.ON_PUBLISHED_USER_LIST,e=>{if(e==null||!e.users)return;D("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter(n=>!Jd(n.string_id||n.stream_id,this.channelName)));let t=[],r=[];for(let n of e.users){let i=this._users.find(d=>d._uintid===n.stream_id);i?i._trust_in_room_=!0:(i=new ql(n.string_id||n.stream_id,n.stream_id),this._users.push(i),this.getListeners(ht.PUBLISHED_USER_LIST).length===0&&(b.debug("[".concat(this._clientId,"] user online"),n.stream_id),this.safeEmit(ht.USER_JOINED,i)));let o=nn.Audio&n.stream_type,a=(nn.Video|nn.LwoVideo)&n.stream_type,s=(65280&n.stream_type)!=0,c=o&&i.hasAudio,l=a&&i.hasVideo;a&&(i._trust_video_stream_added_state_=!0,i._video_added_=!0,i._videoSSRC=n.video_ssrc,i._rtxSsrcId=n.video_rtx),o&&(i._trust_audio_stream_added_state_=!0,i._audio_added_=!0,i._audioSSRC=n.audio_ssrc),o&&!c&&this.getListeners(ht.PUBLISHED_USER_LIST).length===0&&(b.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published audio")),this.safeEmit(ht.USER_PUBLISHED,i,"audio")),a&&!l&&this.getListeners(ht.PUBLISHED_USER_LIST).length===0&&(b.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published video")),this.safeEmit(ht.USER_PUBLISHED,i,"video")),(o&&!c||a&&!l||s)&&t.push(i),a&&this._p2pChannel.hasPendingRemoteMedia(i,"video")&&r.push({user:i,mediaType:"video"}),o&&this._p2pChannel.hasPendingRemoteMedia(i,"audio")&&r.push({user:i,mediaType:"audio"})}r.length>0&&(b.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(r.map(n=>"user: ".concat(n.user.uid,", mediaType: ").concat(n.mediaType)).join("; ")," ")),this.massSubscribe(r).catch(n=>{b.error("[".concat(this._clientId,"] mass resubscribe error"),n.toString())})),this.getListeners(ht.PUBLISHED_USER_LIST).length>0?D("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(b.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map(n=>n.uid).join(", "))),this.safeEmit(ht.PUBLISHED_USER_LIST,t)):b.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map(n=>n.uid).join(", ")))}),this._gateway.signal.on(lt.ON_RTP_CAPABILITY_CHANGE,e=>{let{video_codec:t}=e;this._p2pChannel instanceof RE&&this._p2pChannel.updateRemoteRTPCapabilities(t.map(r=>r.toLowerCase()).filter(r=>{var n;return pe(n=Object.keys(cT)).call(n,r)}))})}_handleP2PEvents(){this._gateway.signal.on(lt.ON_USER_OFFLINE,()=>{this._p2pChannel.disconnectForReconnect()}),this._gateway.signal.on(Rr.PUBLISH,(e,t,r)=>{let{uid:n}=e;e.forEach(i=>{let{kind:o,ssrcs:a,mid:s,isMuted:c}=i;this._handleP2PAddAudioOrVideoStream(o,n,a[0].ssrcId,s);let l=this._users.find(d=>d.uid===n);return l&&this._p2pChannel instanceof oo?this._p2pChannel.mockSubscribe(l,o,a[0].ssrcId,s).then(()=>{t()}).catch(r):t(),this._handleMuteStream(n,o,!!c)})}),this._gateway.signal.on(Rr.CALL,async(e,t,r)=>{if(this._p2pChannel instanceof oo)try{var n;t(await this._p2pChannel.startP2P({turnServer:(n=this._joinInfo)===null||n===void 0?void 0:n.turnServer},e))}catch(i){r(i)}}),this._gateway.signal.on(je.P2P_CONNECTION,async e=>{this._p2pChannel instanceof oo&&await this._p2pChannel.p2pConnect(e)}),this._gateway.signal.on(Rr.UNPUBLISH,async(e,t,r)=>{if(this._p2pChannel instanceof oo){let{unpubMsg:n,uid:i}=e,o=this._users.find(a=>a.uid===i);if(!o)return b.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i)),void t();try{n.forEach(async a=>{let{stream_type:s}=a,c=s===Nt.Audio?Se.AUDIO:Se.VIDEO;await this._p2pChannel.unsubscribe(o,c),this._handleMuteStream(i,c,!0)}),t()}catch(a){r(a)}}}),this._gateway.signal.on(Rr.CONTROL,async(e,t)=>{let{action:r}=e;switch(r){case id.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,Se.VIDEO,!0);break;case id.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,Se.AUDIO,!0);break;case id.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,Se.VIDEO,!1);break;case id.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,Se.AUDIO,!1)}}),this._gateway.signal.on(Rr.RESTART_ICE,async(e,t,r)=>{if(this._p2pChannel instanceof oo)try{let{direction:n,iceParameter:i}=e;n!==Ei.SEND_ONLY||i?t(await this._p2pChannel.restartICE(n,i)):(this._p2pChannel.handleDisconnect(n),t())}catch(n){r(n)}}),this._gateway.signal.on(Rr.CANDIDATE,e=>{if(this._p2pChannel instanceof oo){let{candidate:t,direction:r}=e;this._p2pChannel.addRemoteCandidate(t,r)}}),this._p2pChannel.on(Oe.RequestP2PRestartICE,async(e,t,r)=>{try{let{direction:n}=e;t(await this._gateway.sendExtensionMessage(Rr.RESTART_ICE,e,n===Ei.SEND_ONLY))}catch(n){r(n)}}),this._p2pChannel.on(Oe.LocalCandidate,e=>{this._gateway.sendExtensionMessage(Rr.CANDIDATE,JSON.stringify(e),!0)}),this._p2pChannel.on(Oe.RequestP2PMuteLocal,async(e,t,r)=>{try{await this._gateway.sendExtensionMessage(Rr.CONTROL,e,!0),t()}catch(n){r(n)}}),this._p2pChannel.on(Oe.RequestP2PUnmuteRemote,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===I.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Oe.RequestP2PMuteRemote,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===I.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Oe.StateChange,(e,t)=>{t===At.Connected&&this._p2pChannel.republish()})}_handleP2PChannelEvents(){this._p2pChannel.on(Oe.RequestMuteLocal,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===I.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Oe.RequestUnmuteLocal,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===I.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Oe.RequestRePublish,(e,t,r)=>{this.publish(e,!1).then(t).catch(r)}),this._p2pChannel.on(Oe.RequestRePublishDataChannel,(e,t,r)=>{de.all(e.map(async n=>{let i=await this._p2pChannel.publishDataChannel([n]);try{i.forEach(o=>{this._uid&&this._gateway.publishDataChannel(this._uid,o,!0)})}catch(o){if(o.code!==I.DISCONNECT_P2P)throw o}})).then(t).catch(r)}),this._p2pChannel.on(Oe.RequestReSubscribe,async(e,t,r)=>{try{for(let{user:n,kind:i}of e)i===Se.VIDEO?await this.subscribe(n,"video"):await this.subscribe(n,"audio");t()}catch(n){r(n)}}),this._p2pChannel.on(Oe.RequestUpload,(e,t)=>{this._gateway.upload(e,t)}),this._p2pChannel.on(Oe.RequestUploadStats,e=>{this._gateway.uploadWRTCStats(e)}),this._p2pChannel.on(Oe.MediaReconnectStart,e=>{this.safeEmit(ht.MEDIA_RECONNECT_START,e)}),this._p2pChannel.on(Oe.MediaReconnectEnd,e=>{this.safeEmit(ht.MEDIA_RECONNECT_END,e)}),this._p2pChannel.on(Oe.NeedSignalRTT,e=>{e(this._gateway.getSignalRTT())}),this._p2pChannel.on(Oe.RequestRestartICE,async e=>{if(this._p2pChannel instanceof oo)return;let t=await this._p2pChannel.restartICE(e),r=await t.next();if(r.done)return;let n=r.value,i;try{i=await this._gateway.restartICE({iceParameters:n})}catch(a){return void t.throw(a)}let{iceParameters:o}=function(a){let s=a.iceParameters;return{iceParameters:{iceUfrag:s.iceUfrag,icePwd:s.icePwd}}}(i);await t.next({remoteIceParameters:o})}),this._p2pChannel.on(Oe.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(Oe.RequestReconnectPC,async()=>{var e;let{iceParameters:t,dtlsParameters:r,rtpCapabilities:n}=await this._p2pChannel.startP2PConnection({turnServer:(e=this._joinInfo)===null||e===void 0?void 0:e.turnServer}),{gatewayEstablishParams:i,gatewayAddress:o}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:r,rtpCapabilities:n}),a=_B(i,o);await this._p2pChannel.connect(a),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(Oe.RequestUnpublishForReconnectPC,async(e,t,r)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(e,this._uid),t()):r()}),this._p2pChannel.on(Oe.P2PLost,()=>{this.safeEmit(ht.P2P_LOST,this.store.uid)}),this._p2pChannel.on(Oe.UpdateVideoEncoder,e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)}),this._p2pChannel.on(Oe.ConnectionTypeChange,e=>{this.safeEmit(ht.IS_USING_CLOUD_PROXY,e)}),this._p2pChannel.on(Oe.RequestLowStreamParameter,e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(Oe.QueryClientConnectionState,e=>{e(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if(!this._joinInfo||this.connectionState!=="CONNECTED")throw new G(I.INVALID_OPERATION,"[".concat(this._clientId,"] can not create content inspect, please join channel first"));if(this._inspect)throw new G(I.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));try{let r=(t={config:e},bg("ContentInspect").create(t));this._inspect=r,this.handleVideoInspectEvents(r);let{appId:n,cname:i,sid:o,token:a,uid:s,cid:c,vid:l}=this._joinInfo;await r.init({appId:n,areaCode:"",cname:i,sid:o,token:a,uid:s,cid:c,vid:l?Number(l):0},Vr)}catch(r){throw Array.isArray(r)?r[0]:r}var t}handleVideoInspectEvents(e){e.on(un.CONNECTION_STATE_CHANGE,(t,r)=>{if(this.safeEmit(ht.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,r),r===ja.CONNECTED){if(this.connectionState!=="CONNECTED")return void this.safeEmit(ht.CONTENT_INSPECT_ERROR,new G(I.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}}),e.on(un.INSPECT_RESULT,(t,r)=>{var n;if((r==null?void 0:r.code)===I.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return b.debug("Stop inspect content because that has left channel"),this==null||(n=this._inspect)===null||n===void 0||n.close(),void(this._inspect=void 0);this.safeEmit(ht.CONTENT_INSPECT_RESULT,t,r)}),e.on(un.CLIENT_LOCAL_VIDEO_TRACK,t=>{t(this.localTracks.filter(r=>r.trackMediaType==="video")[0])})}async disableContentInspect(){if(!this._inspect)throw new G(I.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(Yc(e,"enabled"),e){if(!t)throw new G(I.INVALID_PARAMS,"config is required");if(NZ(t),!this._joinInfo)throw new G(I.INVALID_OPERATION,"can not create image moderation, please join channel first");try{if(this._moderation)this._moderation.updateConfig(t);else{let n=(r={config:t},bg("ImageModeration").create(r));this._moderation=n,this.handleImageModerationEvents(n);let{appId:i,cname:o,sid:a,token:s,uid:c,cid:l,vid:d}=this._joinInfo;await n.init({appId:i,areaCode:"",cname:o,sid:a,token:s,uid:c,cid:l,vid:d?Number(d):0},Vr)}}catch(n){throw Array.isArray(n)?n[0]:n}}else{var r;if(!this._moderation)throw new G(I.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(n){throw Array.isArray(n)?n[0]:n}}}handleImageModerationEvents(e){e.on(ys.CONNECTION_STATE_CHANGE,(t,r)=>{if(this.safeEmit(ht.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,r),t===Yo.CONNECTED){if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new G(I.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}}),e.on(ys.CLIENT_LOCAL_VIDEO_TRACK,t=>{t(this.localTracks.filter(r=>r.trackMediaType==="video")[0])})}setP2PTransport(e){if(function(t){Jr(t,"transport",["default","auto","relay","sd-rtn"])}(e),this.mode!=="p2p")throw new G(I.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,b.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}getJoinChannelServiceRecords(){return b.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){Yc(e,"enabled"),Ft("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}},ve(he.prototype,"leave",[D6],Object.getOwnPropertyDescriptor(he.prototype,"leave"),he.prototype),ve(he.prototype,"publish",[L6],Object.getOwnPropertyDescriptor(he.prototype,"publish"),he.prototype),ve(he.prototype,"unpublish",[M6],Object.getOwnPropertyDescriptor(he.prototype,"unpublish"),he.prototype),ve(he.prototype,"subscribe",[j6],Object.getOwnPropertyDescriptor(he.prototype,"subscribe"),he.prototype),ve(he.prototype,"presubscribe",[U6],Object.getOwnPropertyDescriptor(he.prototype,"presubscribe"),he.prototype),ve(he.prototype,"massSubscribe",[F6],Object.getOwnPropertyDescriptor(he.prototype,"massSubscribe"),he.prototype),ve(he.prototype,"unsubscribe",[V6],Object.getOwnPropertyDescriptor(he.prototype,"unsubscribe"),he.prototype),ve(he.prototype,"massUnsubscribe",[B6],Object.getOwnPropertyDescriptor(he.prototype,"massUnsubscribe"),he.prototype),ve(he.prototype,"setLowStreamParameter",[$6],Object.getOwnPropertyDescriptor(he.prototype,"setLowStreamParameter"),he.prototype),ve(he.prototype,"enableDualStream",[H6],Object.getOwnPropertyDescriptor(he.prototype,"enableDualStream"),he.prototype),ve(he.prototype,"disableDualStream",[W6],Object.getOwnPropertyDescriptor(he.prototype,"disableDualStream"),he.prototype),ve(he.prototype,"setClientRole",[G6],Object.getOwnPropertyDescriptor(he.prototype,"setClientRole"),he.prototype),ve(he.prototype,"setProxyServer",[z6],Object.getOwnPropertyDescriptor(he.prototype,"setProxyServer"),he.prototype),ve(he.prototype,"setTurnServer",[K6],Object.getOwnPropertyDescriptor(he.prototype,"setTurnServer"),he.prototype),ve(he.prototype,"setLicense",[q6],Object.getOwnPropertyDescriptor(he.prototype,"setLicense"),he.prototype),ve(he.prototype,"startProxyServer",[Y6],Object.getOwnPropertyDescriptor(he.prototype,"startProxyServer"),he.prototype),ve(he.prototype,"stopProxyServer",[X6],Object.getOwnPropertyDescriptor(he.prototype,"stopProxyServer"),he.prototype),ve(he.prototype,"setLocalAccessPointsV2",[J6],Object.getOwnPropertyDescriptor(he.prototype,"setLocalAccessPointsV2"),he.prototype),ve(he.prototype,"setLocalAccessPoints",[Q6],Object.getOwnPropertyDescriptor(he.prototype,"setLocalAccessPoints"),he.prototype),ve(he.prototype,"setRemoteDefaultVideoStreamType",[Z6],Object.getOwnPropertyDescriptor(he.prototype,"setRemoteDefaultVideoStreamType"),he.prototype),ve(he.prototype,"setRemoteVideoStreamType",[e8],Object.getOwnPropertyDescriptor(he.prototype,"setRemoteVideoStreamType"),he.prototype),ve(he.prototype,"setStreamFallbackOption",[t8],Object.getOwnPropertyDescriptor(he.prototype,"setStreamFallbackOption"),he.prototype),ve(he.prototype,"setEncryptionConfig",[r8],Object.getOwnPropertyDescriptor(he.prototype,"setEncryptionConfig"),he.prototype),ve(he.prototype,"renewToken",[n8],Object.getOwnPropertyDescriptor(he.prototype,"renewToken"),he.prototype),ve(he.prototype,"enableAudioVolumeIndicator",[i8],Object.getOwnPropertyDescriptor(he.prototype,"enableAudioVolumeIndicator"),he.prototype),ve(he.prototype,"startLiveStreaming",[o8],Object.getOwnPropertyDescriptor(he.prototype,"startLiveStreaming"),he.prototype),ve(he.prototype,"setLiveTranscoding",[a8],Object.getOwnPropertyDescriptor(he.prototype,"setLiveTranscoding"),he.prototype),ve(he.prototype,"stopLiveStreaming",[s8],Object.getOwnPropertyDescriptor(he.prototype,"stopLiveStreaming"),he.prototype),ve(he.prototype,"startChannelMediaRelay",[c8],Object.getOwnPropertyDescriptor(he.prototype,"startChannelMediaRelay"),he.prototype),ve(he.prototype,"updateChannelMediaRelay",[l8],Object.getOwnPropertyDescriptor(he.prototype,"updateChannelMediaRelay"),he.prototype),ve(he.prototype,"stopChannelMediaRelay",[d8],Object.getOwnPropertyDescriptor(he.prototype,"stopChannelMediaRelay"),he.prototype),ve(he.prototype,"sendCustomReportMessage",[u8],Object.getOwnPropertyDescriptor(he.prototype,"sendCustomReportMessage"),he.prototype),ve(he.prototype,"pickSVCLayer",[h8],Object.getOwnPropertyDescriptor(he.prototype,"pickSVCLayer"),he.prototype),ve(he.prototype,"setRTMConfig",[p8],Object.getOwnPropertyDescriptor(he.prototype,"setRTMConfig"),he.prototype),ve(he.prototype,"enableContentInspect",[f8],Object.getOwnPropertyDescriptor(he.prototype,"enableContentInspect"),he.prototype),ve(he.prototype,"disableContentInspect",[m8],Object.getOwnPropertyDescriptor(he.prototype,"disableContentInspect"),he.prototype),ve(he.prototype,"setImageModeration",[g8],Object.getOwnPropertyDescriptor(he.prototype,"setImageModeration"),he.prototype),ve(he.prototype,"setP2PTransport",[y8],Object.getOwnPropertyDescriptor(he.prototype,"setP2PTransport"),he.prototype),ve(he.prototype,"getJoinChannelServiceRecords",[v8],Object.getOwnPropertyDescriptor(he.prototype,"getJoinChannelServiceRecords"),he.prototype),ve(he.prototype,"setPublishAudioFilterEnabled",[E8],Object.getOwnPropertyDescriptor(he.prototype,"setPublishAudioFilterEnabled"),he.prototype),he),OZ=class cO{constructor(t,r){C(this,"id",0),C(this,"element",void 0),C(this,"peerPair",void 0),C(this,"context",void 0),C(this,"audioPlayerElement",void 0),C(this,"audioTrack",void 0),cO.count+=1,this.id=cO.count,this.element=t,this.context=r}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=t=>{let r=document.createElement("audio");r.srcObject=new MediaStream([t.track]),r.play(),this.audioPlayerElement=r}}async switchSdp(){if(!this.peerPair)return;let t=async(n,i)=>{let o=i==="offer"?await n.createOffer():await n.createAnswer();return await n.setLocalDescription(o),n.iceGatheringState==="complete"?n.localDescription:new de(a=>{n.onicegatheringstatechange=()=>{n.iceGatheringState==="complete"&&a(n.localDescription)}})},r=async(n,i)=>await n.setRemoteDescription(i);try{let n=await t(this.peerPair[0],"offer");await r(this.peerPair[1],n);let i=await t(this.peerPair[1],"answer");await r(this.peerPair[0],i)}catch(n){throw new G(I.LOCAL_AEC_ERROR,n.toString()).print()}}async getTracksFromMediaElement(t){if(this.audioTrack)return this.audioTrack;let r;try{t instanceof HTMLVideoElement&&(t.captureStream?t.captureStream():t.mozCaptureStream()),r=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(t).connect(r)}catch(i){throw new G(I.LOCAL_AEC_ERROR,i.toString()).print()}if(!r)throw new G(I.LOCAL_AEC_ERROR,"no dest node when local aec").print();let n=r.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();let t=this.element,r=await this.getTracksFromMediaElement(t);this.peerPair&&this.peerPair[0].addTrack(r),await this.switchSdp()}close(){b.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(t=>{t.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}},b8,xE;C(OZ,"count",0);var Rje=window.AudioContext||window.webkitAudioContext,Ije=new(b8=Ne({report:be}),ve((xE=class{constructor(){C(this,"units",[]),C(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return b.debug("the system does not need to process local aec"),-1;this.context||(this.context=new Rje);let t=this.units.find(r=>r&&r.getElement()===e);return t||(t=new OZ(e,this.context),this.units.push(t)),t.startEchoCancellation(),b.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return vt().name!==Ot.SAFARI}}).prototype,"processExternalMediaAEC",[b8],Object.getOwnPropertyDescriptor(xE.prototype,"processExternalMediaAEC"),xE.prototype),xE);function w8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function S8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w8(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var qI=window||document;function kZ(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!qI)return;let r=yr._cspEventHandlerPointer;if(r&&t)return void console.error(r,t);let n=i=>{if(!(i&&i.blockedURI&&(yr.onSecurityPolicyViolation||yr.getListeners(oc.SECURITY_POLICY_VIOLATION).length>0)))return;let o=i.blockedURI;D("CSP_DETECTED_HOSTNAME_LIST").some(a=>pe(o).call(o,a))&&(yr.onSecurityPolicyViolation&&typeof yr.onSecurityPolicyViolation=="function"&&yr.onSecurityPolicyViolation(i),yr.getListeners(oc.SECURITY_POLICY_VIOLATION).length>0&&yr.safeEmit(oc.SECURITY_POLICY_VIOLATION,i))};r&&qI.removeEventListener("securitypolicyviolation",r),(t||e&&typeof e=="function"||yr.getListeners(oc.SECURITY_POLICY_VIOLATION).length>0)&&qI.addEventListener("securitypolicyviolation",n),yr._cspEventHandlerPointer=n}var xje=Ii,Aje=OJ,T8=RegExp.prototype,Nje=function(e){return e===T8||xje(T8,e)?Aje(e):e.flags},oi=Nr(Nje);function ym(e){let t=e.length;for(;--t>=0;)e[t]=0}var l2=256,PZ=286,qg=30,Yg=15,lO=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),x_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Oje=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),C8=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zc=new Array(576);ym(zc);var Xg=new Array(60);ym(Xg);var Z0=new Array(512);ym(Z0);var ey=new Array(256);ym(ey);var d2=new Array(29);ym(d2);var mw=new Array(qg);function YI(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var R8,I8,x8;function XI(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}ym(mw);var DZ=e=>e<256?Z0[e]:Z0[256+(e>>>7)],ty=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},xo=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,ty(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},ac=(e,t,r)=>{xo(e,r[2*t],r[2*t+1])},LZ=(e,t)=>{let r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0);return r>>>1},MZ=(e,t,r)=>{let n=new Array(16),i,o,a=0;for(i=1;i<=Yg;i++)a=a+r[i-1]<<1,n[i]=a;for(o=0;o<=t;o++){let s=e[2*o+1];s!==0&&(e[2*o]=LZ(n[s]++,s))}},jZ=e=>{let t;for(t=0;t<PZ;t++)e.dyn_ltree[2*t]=0;for(t=0;t<qg;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},UZ=e=>{e.bi_valid>8?ty(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},A8=(e,t,r,n)=>{let i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},JI=(e,t,r)=>{let n=e.heap[r],i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&A8(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!A8(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},N8=(e,t,r)=>{let n,i,o,a,s=0;if(e.sym_next!==0)do n=255&e.pending_buf[e.sym_buf+s++],n+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],n===0?ac(e,i,t):(o=ey[i],ac(e,o+l2+1,t),a=lO[o],a!==0&&(i-=d2[o],xo(e,i,a)),n--,o=DZ(n),ac(e,o,r),a=x_[o],a!==0&&(n-=mw[o],xo(e,n,a)));while(s<e.sym_next);ac(e,256,t)},QI=(e,t)=>{let r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,a,s,c,l=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<o;a++)r[2*a]!==0?(e.heap[++e.heap_len]=l=a,e.depth[a]=0):r[2*a+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,r[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=n[2*c+1]);for(t.max_code=l,a=e.heap_len>>1;a>=1;a--)JI(e,r,a);c=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],JI(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,r[2*c]=r[2*a]+r[2*s],e.depth[c]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,r[2*a+1]=r[2*s+1]=c,e.heap[1]=c++,JI(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((d,u)=>{let p=u.dyn_tree,f=u.max_code,m=u.stat_desc.static_tree,g=u.stat_desc.has_stree,y=u.stat_desc.extra_bits,v=u.stat_desc.extra_base,E=u.stat_desc.max_length,w,S,x,O,L,j,W=0;for(O=0;O<=Yg;O++)d.bl_count[O]=0;for(p[2*d.heap[d.heap_max]+1]=0,w=d.heap_max+1;w<573;w++)S=d.heap[w],O=p[2*p[2*S+1]+1]+1,O>E&&(O=E,W++),p[2*S+1]=O,S>f||(d.bl_count[O]++,L=0,S>=v&&(L=y[S-v]),j=p[2*S],d.opt_len+=j*(O+L),g&&(d.static_len+=j*(m[2*S+1]+L)));if(W!==0){do{for(O=E-1;d.bl_count[O]===0;)O--;d.bl_count[O]--,d.bl_count[O+1]+=2,d.bl_count[E]--,W-=2}while(W>0);for(O=E;O!==0;O--)for(S=d.bl_count[O];S!==0;)x=d.heap[--w],x>f||(p[2*x+1]!==O&&(d.opt_len+=(O-p[2*x+1])*p[2*x],p[2*x+1]=O),S--)}})(e,t),MZ(r,l,e.bl_count)},O8=(e,t,r)=>{let n,i,o=-1,a=t[1],s=0,c=7,l=4;for(a===0&&(c=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<c&&i===a||(s<l?e.bl_tree[2*i]+=s:i!==0?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,a===0?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4))},k8=(e,t,r)=>{let n,i,o=-1,a=t[1],s=0,c=7,l=4;for(a===0&&(c=138,l=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<c&&i===a)){if(s<l)do ac(e,i,e.bl_tree);while(--s!=0);else i!==0?(i!==o&&(ac(e,i,e.bl_tree),s--),ac(e,16,e.bl_tree),xo(e,s-3,2)):s<=10?(ac(e,17,e.bl_tree),xo(e,s-3,3)):(ac(e,18,e.bl_tree),xo(e,s-11,7));s=0,o=i,a===0?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4)}},P8=!1,FZ=(e,t,r,n)=>{xo(e,0+(n?1:0),3),UZ(e),ty(e,r),ty(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},kje=e=>{P8||((()=>{let t,r,n,i,o,a=new Array(16);for(n=0,i=0;i<28;i++)for(d2[i]=n,t=0;t<1<<lO[i];t++)ey[n++]=i;for(ey[n-1]=i,o=0,i=0;i<16;i++)for(mw[i]=o,t=0;t<1<<x_[i];t++)Z0[o++]=i;for(o>>=7;i<qg;i++)for(mw[i]=o<<7,t=0;t<1<<x_[i]-7;t++)Z0[256+o++]=i;for(r=0;r<=Yg;r++)a[r]=0;for(t=0;t<=143;)zc[2*t+1]=8,t++,a[8]++;for(;t<=255;)zc[2*t+1]=9,t++,a[9]++;for(;t<=279;)zc[2*t+1]=7,t++,a[7]++;for(;t<=287;)zc[2*t+1]=8,t++,a[8]++;for(MZ(zc,287,a),t=0;t<qg;t++)Xg[2*t+1]=5,Xg[2*t]=LZ(t,5);R8=new YI(zc,lO,257,PZ,Yg),I8=new YI(Xg,x_,0,qg,Yg),x8=new YI(new Array(0),Oje,0,19,7)})(),P8=!0),e.l_desc=new XI(e.dyn_ltree,R8),e.d_desc=new XI(e.dyn_dtree,I8),e.bl_desc=new XI(e.bl_tree,x8),e.bi_buf=0,e.bi_valid=0,jZ(e)},Pje=(e,t,r,n)=>{let i,o,a=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=(s=>{let c,l=4093624447;for(c=0;c<=31;c++,l>>>=1)if(1&l&&s.dyn_ltree[2*c]!==0)return 0;if(s.dyn_ltree[18]!==0||s.dyn_ltree[20]!==0||s.dyn_ltree[26]!==0)return 1;for(c=32;c<l2;c++)if(s.dyn_ltree[2*c]!==0)return 1;return 0})(e)),QI(e,e.l_desc),QI(e,e.d_desc),a=(s=>{let c;for(O8(s,s.dyn_ltree,s.l_desc.max_code),O8(s,s.dyn_dtree,s.d_desc.max_code),QI(s,s.bl_desc),c=18;c>=3&&s.bl_tree[2*C8[c]+1]===0;c--);return s.opt_len+=3*(c+1)+5+5+4,c})(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&t!==-1?FZ(e,t,r,n):e.strategy===4||o===i?(xo(e,2+(n?1:0),3),N8(e,zc,Xg)):(xo(e,4+(n?1:0),3),((s,c,l,d)=>{let u;for(xo(s,c-257,5),xo(s,l-1,5),xo(s,d-4,4),u=0;u<d;u++)xo(s,s.bl_tree[2*C8[u]+1],3);k8(s,s.dyn_ltree,c-1),k8(s,s.dyn_dtree,l-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),N8(e,e.dyn_ltree,e.dyn_dtree)),jZ(e),n&&UZ(e)},Dje=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(ey[r]+l2+1)]++,e.dyn_dtree[2*DZ(t)]++),e.sym_next===e.sym_end),Lje=e=>{xo(e,2,3),ac(e,256,zc),(t=>{t.bi_valid===16?(ty(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(e)},Mje={_tr_init:kje,_tr_stored_block:FZ,_tr_flush_block:Pje,_tr_tally:Dje,_tr_align:Lje},ry=(e,t,r,n)=>{let i=65535&e|0,o=e>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+t[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0},jje=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})()),gi=(e,t,r,n)=>{let i=jje,o=n+r;e^=-1;for(let a=n;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},oh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},vm={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Uje,_tr_stored_block:dO,_tr_flush_block:Fje,_tr_tally:_d,_tr_align:Vje}=Mje,{Z_NO_FLUSH:bd,Z_PARTIAL_FLUSH:Bje,Z_FULL_FLUSH:$je,Z_FINISH:za,Z_BLOCK:D8,Z_OK:ki,Z_STREAM_END:L8,Z_STREAM_ERROR:mc,Z_DATA_ERROR:Hje,Z_BUF_ERROR:ZI,Z_DEFAULT_COMPRESSION:Wje,Z_FILTERED:Gje,Z_HUFFMAN_ONLY:AE,Z_RLE:zje,Z_FIXED:Kje,Z_DEFAULT_STRATEGY:qje,Z_UNKNOWN:Yje,Z_DEFLATED:pT}=vm,uO=286,Xje=30,Jje=19,Qje=2*uO+1,Zje=15,Ru=258,gc=262,Mf=42,Iu=113,Sg=666,xu=(e,t)=>(e.msg=oh[t],t),M8=e=>2*e-(e>4?9:0),Yl=e=>{let t=e.length;for(;--t>=0;)e[t]=0},eUe=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=i?r-i:0;while(--t);t=i,n=t;do r=e.prev[--n],e.prev[n]=r>=i?r-i:0;while(--t)},wd=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,Qo=e=>{let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},ta=(e,t)=>{Fje(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Qo(e.strm)},wr=(e,t)=>{e.pending_buf[e.pending++]=t},ng=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},hO=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),e.state.wrap===1?e.adler=ry(e.adler,t,i,r):e.state.wrap===2&&(e.adler=gi(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},VZ=(e,t)=>{let r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-gc?e.strstart-(e.w_size-gc):0,l=e.window,d=e.w_mask,u=e.prev,p=e.strstart+Ru,f=l[o+a-1],m=l[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do if(r=t,l[r+a]===m&&l[r+a-1]===f&&l[r]===l[o]&&l[++r]===l[o+1]){o+=2,r++;do;while(l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&o<p);if(n=Ru-(p-o),o=p-Ru,n>a){if(e.match_start=t,a=n,n>=s)break;f=l[o+a-1],m=l[o+a]}}while((t=u[t&d])>c&&--i!=0);return a<=e.lookahead?a:e.lookahead},jf=e=>{let t=e.w_size,r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-gc)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),eUe(e),n+=t),e.strm.avail_in===0)break;if(r=hO(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=wd(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=wd(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<gc&&e.strm.avail_in!==0)},BZ=(e,t)=>{let r,n,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<o&&(r===0&&t!==za||t===bd||r!==n+e.strm.avail_in)))break;a=t===za&&r===n+e.strm.avail_in?1:0,dO(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,Qo(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(hO(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(a===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==bd&&t!==za&&e.strm.avail_in===0&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(hO(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,o=i>e.w_size?e.w_size:i,n=e.strstart-e.block_start,(n>=o||(n||t===za)&&t!==bd&&e.strm.avail_in===0&&n<=i)&&(r=n>i?i:n,a=t===za&&e.strm.avail_in===0&&r===n?1:0,dO(e,e.block_start,r,a),e.block_start+=r,Qo(e.strm)),a?3:1)},ex=(e,t)=>{let r,n;for(;;){if(e.lookahead<gc){if(jf(e),e.lookahead<gc&&t===bd)return 1;if(e.lookahead===0)break}if(r=0,e.lookahead>=3&&(e.ins_h=wd(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-gc&&(e.match_length=VZ(e,r)),e.match_length>=3)if(n=_d(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=wd(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=wd(e,e.ins_h,e.window[e.strstart+1]);else n=_d(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(ta(e,!1),e.strm.avail_out===0))return 1}return e.insert=e.strstart<2?e.strstart:2,t===za?(ta(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(ta(e,!1),e.strm.avail_out===0)?1:2},np=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<gc){if(jf(e),e.lookahead<gc&&t===bd)return 1;if(e.lookahead===0)break}if(r=0,e.lookahead>=3&&(e.ins_h=wd(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-gc&&(e.match_length=VZ(e,r),e.match_length<=5&&(e.strategy===Gje||e.match_length===3&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=_d(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=wd(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(ta(e,!1),e.strm.avail_out===0))return 1}else if(e.match_available){if(n=_d(e,0,e.window[e.strstart-1]),n&&ta(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=_d(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===za?(ta(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(ta(e,!1),e.strm.avail_out===0)?1:2};function Zs(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var Tg=[new Zs(0,0,0,0,BZ),new Zs(4,4,8,4,ex),new Zs(4,5,16,8,ex),new Zs(4,6,32,32,ex),new Zs(4,4,16,16,np),new Zs(8,16,32,32,np),new Zs(8,16,128,128,np),new Zs(8,32,128,256,np),new Zs(32,128,258,1024,np),new Zs(32,258,258,4096,np)];function tUe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pT,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*Qje),this.dyn_dtree=new Uint16Array(2*(2*Xje+1)),this.bl_tree=new Uint16Array(2*(2*Jje+1)),Yl(this.dyn_ltree),Yl(this.dyn_dtree),Yl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Zje+1),this.heap=new Uint16Array(2*uO+1),Yl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*uO+1),Yl(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var ny=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.status!==Mf&&t.status!==57&&t.status!==69&&t.status!==73&&t.status!==91&&t.status!==103&&t.status!==Iu&&t.status!==Sg?1:0},$Z=e=>{if(ny(e))return xu(e,mc);e.total_in=e.total_out=0,e.data_type=Yje;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?57:t.wrap?Mf:Iu,e.adler=t.wrap===2?0:1,t.last_flush=-2,Uje(t),ki},HZ=e=>{let t=$Z(e);return t===ki&&(r=>{r.window_size=2*r.w_size,Yl(r.head),r.max_lazy_match=Tg[r.level].max_lazy,r.good_match=Tg[r.level].good_length,r.nice_match=Tg[r.level].nice_length,r.max_chain_length=Tg[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0})(e.state),t},j8=(e,t,r,n,i,o)=>{if(!e)return mc;let a=1;if(t===Wje&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>9||r!==pT||n<8||n>15||t<0||t>9||o<0||o>Kje||n===8&&a!==1)return xu(e,mc);n===8&&(n=9);let s=new tUe;return e.state=s,s.strm=e,s.status=Mf,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=r,HZ(e)},rUe=(e,t)=>{if(ny(e)||t>D8||t<0)return e?xu(e,mc):mc;let r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===Sg&&t!==za)return xu(e,e.avail_out===0?ZI:mc);let n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(Qo(e),e.avail_out===0)return r.last_flush=-1,ki}else if(e.avail_in===0&&M8(t)<=M8(n)&&t!==za)return xu(e,ZI);if(r.status===Sg&&e.avail_in!==0)return xu(e,ZI);if(r.status===Mf&&r.wrap===0&&(r.status=Iu),r.status===Mf){let i=pT+(r.w_bits-8<<4)<<8,o=-1;if(o=r.strategy>=AE||r.level<2?0:r.level<6?1:r.level===6?2:3,i|=o<<6,r.strstart!==0&&(i|=32),i+=31-i%31,ng(r,i),r.strstart!==0&&(ng(r,e.adler>>>16),ng(r,65535&e.adler)),e.adler=1,r.status=Iu,Qo(e),r.pending!==0)return r.last_flush=-1,ki}if(r.status===57){if(e.adler=0,wr(r,31),wr(r,139),wr(r,8),r.gzhead)wr(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),wr(r,255&r.gzhead.time),wr(r,r.gzhead.time>>8&255),wr(r,r.gzhead.time>>16&255),wr(r,r.gzhead.time>>24&255),wr(r,r.level===9?2:r.strategy>=AE||r.level<2?4:0),wr(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(wr(r,255&r.gzhead.extra.length),wr(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=gi(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(wr(r,0),wr(r,0),wr(r,0),wr(r,0),wr(r,0),wr(r,r.level===9?2:r.strategy>=AE||r.level<2?4:0),wr(r,3),r.status=Iu,Qo(e),r.pending!==0)return r.last_flush=-1,ki}if(r.status===69){if(r.gzhead.extra){let i=r.pending,o=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+o>r.pending_buf_size;){let s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(e.adler=gi(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=s,Qo(e),r.pending!==0)return r.last_flush=-1,ki;i=0,o-=s}let a=new Uint8Array(r.gzhead.extra);r.pending_buf.set(a.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending+=o,r.gzhead.hcrc&&r.pending>i&&(e.adler=gi(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=73}if(r.status===73){if(r.gzhead.name){let i,o=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(e.adler=gi(e.adler,r.pending_buf,r.pending-o,o)),Qo(e),r.pending!==0)return r.last_flush=-1,ki;o=0}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,wr(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=gi(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=91}if(r.status===91){if(r.gzhead.comment){let i,o=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(e.adler=gi(e.adler,r.pending_buf,r.pending-o,o)),Qo(e),r.pending!==0)return r.last_flush=-1,ki;o=0}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,wr(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=gi(e.adler,r.pending_buf,r.pending-o,o))}r.status=103}if(r.status===103){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Qo(e),r.pending!==0))return r.last_flush=-1,ki;wr(r,255&e.adler),wr(r,e.adler>>8&255),e.adler=0}if(r.status=Iu,Qo(e),r.pending!==0)return r.last_flush=-1,ki}if(e.avail_in!==0||r.lookahead!==0||t!==bd&&r.status!==Sg){let i=r.level===0?BZ(r,t):r.strategy===AE?((o,a)=>{let s;for(;;){if(o.lookahead===0&&(jf(o),o.lookahead===0)){if(a===bd)return 1;break}if(o.match_length=0,s=_d(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,s&&(ta(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,a===za?(ta(o,!0),o.strm.avail_out===0?3:4):o.sym_next&&(ta(o,!1),o.strm.avail_out===0)?1:2})(r,t):r.strategy===zje?((o,a)=>{let s,c,l,d,u=o.window;for(;;){if(o.lookahead<=Ru){if(jf(o),o.lookahead<=Ru&&a===bd)return 1;if(o.lookahead===0)break}if(o.match_length=0,o.lookahead>=3&&o.strstart>0&&(l=o.strstart-1,c=u[l],c===u[++l]&&c===u[++l]&&c===u[++l])){d=o.strstart+Ru;do;while(c===u[++l]&&c===u[++l]&&c===u[++l]&&c===u[++l]&&c===u[++l]&&c===u[++l]&&c===u[++l]&&c===u[++l]&&l<d);o.match_length=Ru-(d-l),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(o.match_length>=3?(s=_d(o,1,o.match_length-3),o.lookahead-=o.match_length,o.strstart+=o.match_length,o.match_length=0):(s=_d(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),s&&(ta(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,a===za?(ta(o,!0),o.strm.avail_out===0?3:4):o.sym_next&&(ta(o,!1),o.strm.avail_out===0)?1:2})(r,t):Tg[r.level].func(r,t);if(i!==3&&i!==4||(r.status=Sg),i===1||i===3)return e.avail_out===0&&(r.last_flush=-1),ki;if(i===2&&(t===Bje?Vje(r):t!==D8&&(dO(r,0,0,!1),t===$je&&(Yl(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Qo(e),e.avail_out===0))return r.last_flush=-1,ki}return t!==za?ki:r.wrap<=0?L8:(r.wrap===2?(wr(r,255&e.adler),wr(r,e.adler>>8&255),wr(r,e.adler>>16&255),wr(r,e.adler>>24&255),wr(r,255&e.total_in),wr(r,e.total_in>>8&255),wr(r,e.total_in>>16&255),wr(r,e.total_in>>24&255)):(ng(r,e.adler>>>16),ng(r,65535&e.adler)),Qo(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?ki:L8)},nUe=(e,t)=>{let r=t.length;if(ny(e))return mc;let n=e.state,i=n.wrap;if(i===2||i===1&&n.status!==Mf||n.lookahead)return mc;if(i===1&&(e.adler=ry(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){i===0&&(Yl(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(t.subarray(r-n.w_size,r),0),t=c,r=n.w_size}let o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,jf(n);n.lookahead>=3;){let c=n.strstart,l=n.lookahead-2;do n.ins_h=wd(n,n.ins_h,n.window[c+3-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--l);n.strstart=c,n.lookahead=2,jf(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,n.wrap=i,ki},Jg={deflateInit:(e,t)=>j8(e,t,pT,15,8,qje),deflateInit2:j8,deflateReset:HZ,deflateResetKeep:$Z,deflateSetHeader:(e,t)=>ny(e)||e.state.wrap!==2?mc:(e.state.gzhead=t,ki),deflate:rUe,deflateEnd:e=>{if(ny(e))return mc;let t=e.state.status;return e.state=null,t===Iu?xu(e,Hje):ki},deflateSetDictionary:nUe,deflateInfo:"pako deflate (from Nodeca project)"},iUe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),fT={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(let n in r)iUe(r,n)&&(e[n]=r[n])}}return e},flattenChunks:e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;let r=new Uint8Array(t);for(let n=0,i=0,o=e.length;n<o;n++){let a=e[n];r.set(a,i),i+=a.length}return r}},WZ=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{WZ=!1}var iy=new Uint8Array(256);for(let e=0;e<256;e++)iy[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;iy[254]=iy[254]=1;var oy={string2buf:e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,o,a=e.length,s=0;for(i=0;i<a;i++)r=e.charCodeAt(i),(64512&r)==55296&&i+1<a&&(n=e.charCodeAt(i+1),(64512&n)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)r=e.charCodeAt(i),(64512&r)==55296&&i+1<a&&(n=e.charCodeAt(i+1),(64512&n)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|63&r):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},buf2string:(e,t)=>{let r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i,o=new Array(2*r);for(i=0,n=0;n<r;){let a=e[n++];if(a<128){o[i++]=a;continue}let s=iy[a];if(s>4)o[i++]=65533,n+=s-1;else{for(a&=s===2?31:s===3?15:7;s>1&&n<r;)a=a<<6|63&e[n++],s--;s>1?o[i++]=65533:a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|1023&a)}}return((a,s)=>{if(s<65534&&a.subarray&&WZ)return String.fromCharCode.apply(null,a.length===s?a:a.subarray(0,s));let c="";for(let l=0;l<s;l++)c+=String.fromCharCode(a[l]);return c})(o,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(192&e[r])==128;)r--;return r<0||r===0?t:r+iy[e[r]]>t?r:t}},GZ=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},zZ=Object.prototype.toString,{Z_NO_FLUSH:oUe,Z_SYNC_FLUSH:aUe,Z_FULL_FLUSH:sUe,Z_FINISH:cUe,Z_OK:gw,Z_STREAM_END:lUe,Z_DEFAULT_COMPRESSION:dUe,Z_DEFAULT_STRATEGY:uUe,Z_DEFLATED:hUe}=vm;function Qg(e){this.options=fT.assign({level:dUe,method:hUe,chunkSize:16384,windowBits:15,memLevel:8,strategy:uUe},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new GZ,this.strm.avail_out=0;let r=Jg.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==gw)throw new Error(oh[r]);if(t.header&&Jg.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(n=typeof t.dictionary=="string"?oy.string2buf(t.dictionary):zZ.call(t.dictionary)==="[object ArrayBuffer]"?new Uint8Array(t.dictionary):t.dictionary,r=Jg.deflateSetDictionary(this.strm,n),r!==gw)throw new Error(oh[r]);this._dict_set=!0}}function tx(e,t){let r=new Qg(t);if(r.push(e,!0),r.err)throw r.msg||oh[r.err];return r.result}Qg.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,i,o;if(this.ended)return!1;for(o=t===~~t?t:t===!0?cUe:oUe,typeof e=="string"?r.input=oy.string2buf(e):zZ.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===aUe||o===sUe)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=Jg.deflate(r,o),i===lUe)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Jg.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===gw;if(r.avail_out!==0){if(o>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(r.avail_in===0)break}else this.onData(r.output)}return!0},Qg.prototype.onData=function(e){this.chunks.push(e)},Qg.prototype.onEnd=function(e){e===gw&&(this.result=fT.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var pUe={Deflate:Qg,deflate:tx,deflateRaw:function(e,t){return(t=t||{}).raw=!0,tx(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,tx(e,t)},constants:vm},NE=16209,fUe=function(e,t){let r,n,i,o,a,s,c,l,d,u,p,f,m,g,y,v,E,w,S,x,O,L,j,W,V=e.state;r=e.next_in,j=e.input,n=r+(e.avail_in-5),i=e.next_out,W=e.output,o=i-(t-e.avail_out),a=i+(e.avail_out-257),s=V.dmax,c=V.wsize,l=V.whave,d=V.wnext,u=V.window,p=V.hold,f=V.bits,m=V.lencode,g=V.distcode,y=(1<<V.lenbits)-1,v=(1<<V.distbits)-1;e:do{f<15&&(p+=j[r++]<<f,f+=8,p+=j[r++]<<f,f+=8),E=m[p&y];t:for(;;){if(w=E>>>24,p>>>=w,f-=w,w=E>>>16&255,w===0)W[i++]=65535&E;else{if(!(16&w)){if(!(64&w)){E=m[(65535&E)+(p&(1<<w)-1)];continue t}if(32&w){V.mode=16191;break e}e.msg="invalid literal/length code",V.mode=NE;break e}S=65535&E,w&=15,w&&(f<w&&(p+=j[r++]<<f,f+=8),S+=p&(1<<w)-1,p>>>=w,f-=w),f<15&&(p+=j[r++]<<f,f+=8,p+=j[r++]<<f,f+=8),E=g[p&v];r:for(;;){if(w=E>>>24,p>>>=w,f-=w,w=E>>>16&255,!(16&w)){if(!(64&w)){E=g[(65535&E)+(p&(1<<w)-1)];continue r}e.msg="invalid distance code",V.mode=NE;break e}if(x=65535&E,w&=15,f<w&&(p+=j[r++]<<f,f+=8,f<w&&(p+=j[r++]<<f,f+=8)),x+=p&(1<<w)-1,x>s){e.msg="invalid distance too far back",V.mode=NE;break e}if(p>>>=w,f-=w,w=i-o,x>w){if(w=x-w,w>l&&V.sane){e.msg="invalid distance too far back",V.mode=NE;break e}if(O=0,L=u,d===0){if(O+=c-w,w<S){S-=w;do W[i++]=u[O++];while(--w);O=i-x,L=W}}else if(d<w){if(O+=c+d-w,w-=d,w<S){S-=w;do W[i++]=u[O++];while(--w);if(O=0,d<S){w=d,S-=w;do W[i++]=u[O++];while(--w);O=i-x,L=W}}}else if(O+=d-w,w<S){S-=w;do W[i++]=u[O++];while(--w);O=i-x,L=W}for(;S>2;)W[i++]=L[O++],W[i++]=L[O++],W[i++]=L[O++],S-=3;S&&(W[i++]=L[O++],S>1&&(W[i++]=L[O++]))}else{O=i-x;do W[i++]=W[O++],W[i++]=W[O++],W[i++]=W[O++],S-=3;while(S>2);S&&(W[i++]=W[O++],S>1&&(W[i++]=W[O++]))}break}}break}}while(r<n&&i<a);S=f>>3,r-=S,f-=S<<3,p&=(1<<f)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<a?a-i+257:257-(i-a),V.hold=p,V.bits=f},OE=15,mUe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gUe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),yUe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),vUe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Zg=(e,t,r,n,i,o,a,s)=>{let c=s.bits,l,d,u,p,f,m,g=0,y=0,v=0,E=0,w=0,S=0,x=0,O=0,L=0,j=0,W=null,V=new Uint16Array(16),Y=new Uint16Array(16),Z,te,H,$=null;for(g=0;g<=OE;g++)V[g]=0;for(y=0;y<n;y++)V[t[r+y]]++;for(w=c,E=OE;E>=1&&V[E]===0;E--);if(w>E&&(w=E),E===0)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(v=1;v<E&&V[v]===0;v++);for(w<v&&(w=v),O=1,g=1;g<=OE;g++)if(O<<=1,O-=V[g],O<0)return-1;if(O>0&&(e===0||E!==1))return-1;for(Y[1]=0,g=1;g<OE;g++)Y[g+1]=Y[g]+V[g];for(y=0;y<n;y++)t[r+y]!==0&&(a[Y[t[r+y]]++]=y);if(e===0?(W=$=a,m=20):e===1?(W=mUe,$=gUe,m=257):(W=yUe,$=vUe,m=0),j=0,y=0,g=v,f=o,S=w,x=0,u=-1,L=1<<w,p=L-1,e===1&&L>852||e===2&&L>592)return 1;for(;;){Z=g-x,a[y]+1<m?(te=0,H=a[y]):a[y]>=m?(te=$[a[y]-m],H=W[a[y]-m]):(te=96,H=0),l=1<<g-x,d=1<<S,v=d;do d-=l,i[f+(j>>x)+d]=Z<<24|te<<16|H|0;while(d!==0);for(l=1<<g-1;j&l;)l>>=1;if(l!==0?(j&=l-1,j+=l):j=0,y++,--V[g]==0){if(g===E)break;g=t[r+a[y]]}if(g>w&&(j&p)!==u){for(x===0&&(x=w),f+=v,S=g-x,O=1<<S;S+x<E&&(O-=V[S+x],!(O<=0));)S++,O<<=1;if(L+=1<<S,e===1&&L>852||e===2&&L>592)return 1;u=j&p,i[u]=w<<24|S<<16|f-o|0}}return j!==0&&(i[f+j]=g-x<<24|64<<16|0),s.bits=w,0},{Z_FINISH:U8,Z_BLOCK:EUe,Z_TREES:kE,Z_OK:Bu,Z_STREAM_END:_Ue,Z_NEED_DICT:bUe,Z_STREAM_ERROR:Ka,Z_DATA_ERROR:KZ,Z_MEM_ERROR:qZ,Z_BUF_ERROR:wUe,Z_DEFLATED:F8}=vm,mT=16180,yw=16190,jc=16191,rx=16192,nx=16194,PE=16199,DE=16200,ix=16206,dn=16209,V8=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function SUe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var $u=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<mT||t.mode>16211?1:0},YZ=e=>{if($u(e))return Ka;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=mT,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Bu},XZ=e=>{if($u(e))return Ka;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,YZ(e)},JZ=(e,t)=>{let r;if($u(e))return Ka;let n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Ka:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,XZ(e))},B8=(e,t)=>{if(!e)return Ka;let r=new SUe;e.state=r,r.strm=e,r.window=null,r.mode=mT;let n=JZ(e,t);return n!==Bu&&(e.state=null),n},ox,ax,$8=!0,TUe=e=>{if($8){ox=new Int32Array(512),ax=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Zg(1,e.lens,0,288,ox,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Zg(2,e.lens,0,32,ax,0,e.work,{bits:5}),$8=!1}e.lencode=ox,e.lenbits=9,e.distcode=ax,e.distbits=5},QZ=(e,t,r,n)=>{let i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},CUe=(e,t)=>{let r,n,i,o,a,s,c,l,d,u,p,f,m,g,y,v,E,w,S,x,O,L,j=0,W=new Uint8Array(4),V,Y,Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if($u(e)||!e.output||!e.input&&e.avail_in!==0)return Ka;r=e.state,r.mode===jc&&(r.mode=rx),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,l=r.hold,d=r.bits,u=s,p=c,L=Bu;e:for(;;)switch(r.mode){case mT:if(r.wrap===0){r.mode=rx;break}for(;d<16;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}if(2&r.wrap&&l===35615){r.wbits===0&&(r.wbits=15),r.check=0,W[0]=255&l,W[1]=l>>>8&255,r.check=gi(r.check,W,2,0),l=0,d=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",r.mode=dn;break}if((15&l)!==F8){e.msg="unknown compression method",r.mode=dn;break}if(l>>>=4,d-=4,O=8+(15&l),r.wbits===0&&(r.wbits=O),O>15||O>r.wbits){e.msg="invalid window size",r.mode=dn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&l?16189:jc,l=0,d=0;break;case 16181:for(;d<16;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}if(r.flags=l,(255&oi(r))!==F8){e.msg="unknown compression method",r.mode=dn;break}if(57344&oi(r)){e.msg="unknown header flags set",r.mode=dn;break}r.head&&(r.head.text=l>>8&1),512&oi(r)&&4&r.wrap&&(W[0]=255&l,W[1]=l>>>8&255,r.check=gi(r.check,W,2,0)),l=0,d=0,r.mode=16182;case 16182:for(;d<32;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}r.head&&(r.head.time=l),512&oi(r)&&4&r.wrap&&(W[0]=255&l,W[1]=l>>>8&255,W[2]=l>>>16&255,W[3]=l>>>24&255,r.check=gi(r.check,W,4,0)),l=0,d=0,r.mode=16183;case 16183:for(;d<16;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&oi(r)&&4&r.wrap&&(W[0]=255&l,W[1]=l>>>8&255,r.check=gi(r.check,W,2,0)),l=0,d=0,r.mode=16184;case 16184:if(1024&oi(r)){for(;d<16;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}r.length=l,r.head&&(r.head.extra_len=l),512&oi(r)&&4&r.wrap&&(W[0]=255&l,W[1]=l>>>8&255,r.check=gi(r.check,W,2,0)),l=0,d=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&oi(r)&&(f=r.length,f>s&&(f=s),f&&(r.head&&(O=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+f),O)),512&oi(r)&&4&r.wrap&&(r.check=gi(r.check,n,f,o)),s-=f,o+=f,r.length-=f),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&oi(r)){if(s===0)break e;f=0;do O=n[o+f++],r.head&&O&&r.length<65536&&(r.head.name+=String.fromCharCode(O));while(O&&f<s);if(512&oi(r)&&4&r.wrap&&(r.check=gi(r.check,n,f,o)),s-=f,o+=f,O)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&oi(r)){if(s===0)break e;f=0;do O=n[o+f++],r.head&&O&&r.length<65536&&(r.head.comment+=String.fromCharCode(O));while(O&&f<s);if(512&oi(r)&&4&r.wrap&&(r.check=gi(r.check,n,f,o)),s-=f,o+=f,O)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&oi(r)){for(;d<16;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}if(4&r.wrap&&l!==(65535&r.check)){e.msg="header crc mismatch",r.mode=dn;break}l=0,d=0}r.head&&(r.head.hcrc=oi(r)>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=jc;break;case 16189:for(;d<32;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}e.adler=r.check=V8(l),l=0,d=0,r.mode=yw;case yw:if(r.havedict===0)return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,r.hold=l,r.bits=d,bUe;e.adler=r.check=1,r.mode=jc;case jc:if(t===EUe||t===kE)break e;case rx:if(r.last){l>>>=7&d,d-=7&d,r.mode=ix;break}for(;d<3;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}switch(r.last=1&l,l>>>=1,d-=1,3&l){case 0:r.mode=16193;break;case 1:if(TUe(r),r.mode=PE,t===kE){l>>>=2,d-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=dn}l>>>=2,d-=2;break;case 16193:for(l>>>=7&d,d-=7&d;d<32;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=dn;break}if(r.length=65535&l,l=0,d=0,r.mode=nx,t===kE)break e;case nx:r.mode=16195;case 16195:if(f=r.length,f){if(f>s&&(f=s),f>c&&(f=c),f===0)break e;i.set(n.subarray(o,o+f),a),s-=f,o+=f,c-=f,a+=f,r.length-=f;break}r.mode=jc;break;case 16196:for(;d<14;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}if(r.nlen=257+(31&l),l>>>=5,d-=5,r.ndist=1+(31&l),l>>>=5,d-=5,r.ncode=4+(15&l),l>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=dn;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;d<3;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}r.lens[Z[r.have++]]=7&l,l>>>=3,d-=3}for(;r.have<19;)r.lens[Z[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,V={bits:r.lenbits},L=Zg(0,r.lens,0,19,r.lencode,0,r.work,V),r.lenbits=V.bits,L){e.msg="invalid code lengths set",r.mode=dn;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;j=r.lencode[l&(1<<r.lenbits)-1],y=j>>>24,v=j>>>16&255,E=65535&j,!(y<=d);){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}if(E<16)l>>>=y,d-=y,r.lens[r.have++]=E;else{if(E===16){for(Y=y+2;d<Y;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}if(l>>>=y,d-=y,r.have===0){e.msg="invalid bit length repeat",r.mode=dn;break}O=r.lens[r.have-1],f=3+(3&l),l>>>=2,d-=2}else if(E===17){for(Y=y+3;d<Y;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}l>>>=y,d-=y,O=0,f=3+(7&l),l>>>=3,d-=3}else{for(Y=y+7;d<Y;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}l>>>=y,d-=y,O=0,f=11+(127&l),l>>>=7,d-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=dn;break}for(;f--;)r.lens[r.have++]=O}}if(r.mode===dn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=dn;break}if(r.lenbits=9,V={bits:r.lenbits},L=Zg(1,r.lens,0,r.nlen,r.lencode,0,r.work,V),r.lenbits=V.bits,L){e.msg="invalid literal/lengths set",r.mode=dn;break}if(r.distbits=6,r.distcode=r.distdyn,V={bits:r.distbits},L=Zg(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,V),r.distbits=V.bits,L){e.msg="invalid distances set",r.mode=dn;break}if(r.mode=PE,t===kE)break e;case PE:r.mode=DE;case DE:if(s>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,r.hold=l,r.bits=d,fUe(e,p),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,l=r.hold,d=r.bits,r.mode===jc&&(r.back=-1);break}for(r.back=0;j=r.lencode[l&(1<<r.lenbits)-1],y=j>>>24,v=j>>>16&255,E=65535&j,!(y<=d);){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}if(v&&!(240&v)){for(w=y,S=v,x=E;j=r.lencode[x+((l&(1<<w+S)-1)>>w)],y=j>>>24,v=j>>>16&255,E=65535&j,!(w+y<=d);){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}l>>>=w,d-=w,r.back+=w}if(l>>>=y,d-=y,r.back+=y,r.length=E,v===0){r.mode=16205;break}if(32&v){r.back=-1,r.mode=jc;break}if(64&v){e.msg="invalid literal/length code",r.mode=dn;break}r.extra=15&v,r.mode=16201;case 16201:if(r.extra){for(Y=r.extra;d<Y;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;j=r.distcode[l&(1<<r.distbits)-1],y=j>>>24,v=j>>>16&255,E=65535&j,!(y<=d);){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}if(!(240&v)){for(w=y,S=v,x=E;j=r.distcode[x+((l&(1<<w+S)-1)>>w)],y=j>>>24,v=j>>>16&255,E=65535&j,!(w+y<=d);){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}l>>>=w,d-=w,r.back+=w}if(l>>>=y,d-=y,r.back+=y,64&v){e.msg="invalid distance code",r.mode=dn;break}r.offset=E,r.extra=15&v,r.mode=16203;case 16203:if(r.extra){for(Y=r.extra;d<Y;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=dn;break}r.mode=16204;case 16204:if(c===0)break e;if(f=p-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=dn;break}f>r.wnext?(f-=r.wnext,m=r.wsize-f):m=r.wnext-f,f>r.length&&(f=r.length),g=r.window}else g=i,m=a-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do i[a++]=g[m++];while(--f);r.length===0&&(r.mode=DE);break;case 16205:if(c===0)break e;i[a++]=r.length,c--,r.mode=DE;break;case ix:if(r.wrap){for(;d<32;){if(s===0)break e;s--,l|=n[o++]<<d,d+=8}if(p-=c,e.total_out+=p,r.total+=p,4&r.wrap&&p&&(e.adler=r.check=oi(r)?gi(r.check,i,p,a-p):ry(r.check,i,p,a-p)),p=c,4&r.wrap&&(oi(r)?l:V8(l))!==r.check){e.msg="incorrect data check",r.mode=dn;break}l=0,d=0}r.mode=16207;case 16207:if(r.wrap&&oi(r)){for(;d<32;){if(s===0)break e;s--,l+=n[o++]<<d,d+=8}if(4&r.wrap&&l!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=dn;break}l=0,d=0}r.mode=16208;case 16208:L=_Ue;break e;case dn:L=KZ;break e;case 16210:return qZ;default:return Ka}return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,r.hold=l,r.bits=d,(r.wsize||p!==e.avail_out&&r.mode<dn&&(r.mode<ix||t!==U8))&&QZ(e,e.output,e.next_out,p-e.avail_out),u-=e.avail_in,p-=e.avail_out,e.total_in+=u,e.total_out+=p,r.total+=p,4&r.wrap&&p&&(e.adler=r.check=oi(r)?gi(r.check,i,p,e.next_out-p):ry(r.check,i,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===jc?128:0)+(r.mode===PE||r.mode===nx?256:0),(u===0&&p===0||t===U8)&&L===Bu&&(L=wUe),L},Kc={inflateReset:XZ,inflateReset2:JZ,inflateResetKeep:YZ,inflateInit:e=>B8(e,15),inflateInit2:B8,inflate:CUe,inflateEnd:e=>{if($u(e))return Ka;let t=e.state;return t.window&&(t.window=null),e.state=null,Bu},inflateGetHeader:(e,t)=>{if($u(e))return Ka;let r=e.state;return 2&r.wrap?(r.head=t,t.done=!1,Bu):Ka},inflateSetDictionary:(e,t)=>{let r=t.length,n,i,o;return $u(e)?Ka:(n=e.state,n.wrap!==0&&n.mode!==yw?Ka:n.mode===yw&&(i=1,i=ry(i,t,r,0),i!==n.check)?KZ:(o=QZ(e,t,r,r),o?(n.mode=16210,qZ):(n.havedict=1,Bu)))},inflateInfo:"pako inflate (from Nodeca project)"},RUe=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},ZZ=Object.prototype.toString,{Z_NO_FLUSH:IUe,Z_FINISH:xUe,Z_OK:e0,Z_STREAM_END:sx,Z_NEED_DICT:cx,Z_STREAM_ERROR:AUe,Z_DATA_ERROR:H8,Z_MEM_ERROR:NUe}=vm;function t0(e){this.options=fT.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new GZ,this.strm.avail_out=0;let r=Kc.inflateInit2(this.strm,t.windowBits);if(r!==e0)throw new Error(oh[r]);if(this.header=new RUe,Kc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=oy.string2buf(t.dictionary):ZZ.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Kc.inflateSetDictionary(this.strm,t.dictionary),r!==e0)))throw new Error(oh[r])}function lx(e,t){let r=new t0(t);if(r.push(e),r.err)throw r.msg||oh[r.err];return r.result}t0.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,o,a,s;if(this.ended)return!1;for(a=t===~~t?t:t===!0?xUe:IUe,ZZ.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=Kc.inflate(r,a),o===cx&&i&&(o=Kc.inflateSetDictionary(r,i),o===e0?o=Kc.inflate(r,a):o===H8&&(o=cx));r.avail_in>0&&o===sx&&r.state.wrap>0&&e[r.next_in]!==0;)Kc.inflateReset(r),o=Kc.inflate(r,a);switch(o){case AUe:case H8:case cx:case NUe:return this.onEnd(o),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(r.avail_out===0||o===sx))if(this.options.to==="string"){let c=oy.utf8border(r.output,r.next_out),l=r.next_out-c,d=oy.buf2string(r.output,c);r.next_out=l,r.avail_out=n-l,l&&r.output.set(r.output.subarray(c,c+l),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(o!==e0||s!==0){if(o===sx)return o=Kc.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0},t0.prototype.onData=function(e){this.chunks.push(e)},t0.prototype.onEnd=function(e){e===e0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fT.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var OUe={Inflate:t0,inflate:lx,inflateRaw:function(e,t){return(t=t||{}).raw=!0,lx(e,t)},ungzip:lx,constants:vm},{Deflate:K4e,deflate:kUe,deflateRaw:q4e,gzip:Y4e}=pUe,{Inflate:X4e,inflate:PUe,inflateRaw:J4e,ungzip:Q4e}=OUe,DUe=kUe,LUe=PUe,e1=function(e){return e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE",e}(e1||{}),MUe=class{constructor(){C(this,"_sequence",0),C(this,"_startTime",Date.now()),C(this,"isUseOneByte",!0)}get startTime(){let e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){let t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){let a=new Uint8Array(4);a.set([1,0,0,0]);let s={id:0,length:4,data:a.buffer},c={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[s]};t.commonPacketHeader.extension=1,t.extension=c,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;D("SHOW_DATASTREAM2_LOG")&&b.debug("send data header: ".concat(JSON.stringify(t.commonPacketHeader)));let r=new ArrayBuffer(t.commonPacketHeader.length),n=new Uint8Array(r),i=new DataView(r),o=0;if(i.setUint16(o,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),o+=2,i.setUint32(o,t.commonPacketHeader.sequence,!0),o+=4,i.setUint16(o,t.commonStreamHeader,!0),o+=2,t.extension){let a=this.serializeExtension(t.extension);n.set(new Uint8Array(a),o),o+=a.byteLength}if(n.set(new Uint8Array(t.payload),o),o+=t.payload.byteLength,o!==t.commonPacketHeader.length)throw Error("serialize error!");return r}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);let t=new DataView(e),r=0,n=t.getUint16(r,!0);r+=2;let i={length:16383&n,reserved:(16384&n)>>14,extension:(32768&n)>>15,sequence:t.getUint16(r+2,!0)<<16|t.getUint16(r,!0)},o,a;if(r+=4,D("SHOW_DATASTREAM2_LOG")&&b.debug("receive data header: ".concat(JSON.stringify(i))),t.getUint16(r,!0),r+=2,i.extension){a=this.deserializeExtension(e.slice(r)),r+=2+a.length,o=e.slice(r);let s=!1;if(a.datas.length>0){let c=a.datas.find(l=>l.id===0);c&&(s=(1&new DataView(c.data).getUint32(0,!0))==1)}o=s?this.decompress(o):o}else o=e.slice(8);return o}serializeExtension(e){let{profile:t,length:r,datas:n}=e,i=new ArrayBuffer(r+2),o=new Uint8Array(i),a=new DataView(i),s=0;if(a.setUint8(s++,t),a.setUint8(s++,r),n.forEach(c=>{t?(a.setUint8(s++,c.id),a.setUint8(s++,c.length),o.set(new Uint8Array(c.data),s),s+=c.data.byteLength):(a.setUint8(s++,c.id|c.length<<4),o.set(new Uint8Array(c.data),s),s+=c.data.byteLength)}),s!==r+2)throw Error("serialize extension error, is ".concat(s,"!==").concat(r+2));return i}deserializeExtension(e){let t=new DataView(e),r=0,n=t.getUint8(r);r++;let i=t.getUint8(r);r++;let o=n===e1.TWO_BYTE,a=[],s=new DataView(e,2),c=0;for(;c<i;){let l=0,d=0,u=new ArrayBuffer(0);o?(l=s.getUint8(c),c++,d=s.getUint8(c),c++):(l=15&s.getUint8(c),d=s.getUint8(c)>>4,c++),d>0&&(u=s.buffer.slice(c+2,c+2+d),c+=u.byteLength),a.push({id:l,length:d,data:u})}if(c!==i)throw Error("parse error");return{profile:n,length:i,datas:a}}decompress(e){return LUe(new Uint8Array(e))}compress(e){return DUe(new Uint8Array(e))}},jUe={name:"DataStream",create:(e,t)=>{let r=t?new wMe(e):new SMe(e);return r.useDataStream(new MUe),r}},UUe=class extends fr{constructor(e,t,r){super(),C(this,"ws",void 0),C(this,"requestId",1),C(this,"heartBeatTimer",void 0),C(this,"joinInfo",void 0),C(this,"clientId",void 0),C(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),C(this,"onClose",n=>{this.emit("close"),this.dispose()}),C(this,"onMessage",n=>{let i=JSON.parse(n.data);if(!i||i.command!=="serverResponse"||!i.requestId)return i&&i.command==="serverStatus"&&i.serverStatus&&i.serverStatus.command?(this.emit("status",i.serverStatus),void this.emit(i.serverStatus.command,i.serverStatus)):void 0;this.emit("req_".concat(i.requestId),i)}),this.joinInfo=e,this.clientId=t,this.ws=new z0("cross-channel-".concat(this.clientId),r),this.ws.on(Ve.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Ve.CONNECTED,this.onOpen),this.ws.on(Ve.ON_MESSAGE,this.onMessage),this.ws.on(Ve.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(e){let t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new de((t,r)=>{let n=window.setTimeout(()=>{r(new G(I.TIMEOUT,"wait status timeout, status: ".concat(e)))},5e3);this.once(e,i=>{window.clearTimeout(n),i.state&&i.state!==0?r(new G(I.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)}),this.once("dispose",()=>{window.clearTimeout(n),r(new G(I.WS_ABORT))})})}async request(e){if(this.ws.state==="closed")throw new G(I.WS_DISCONNECT);let t=()=>new de((o,a)=>{this.ws.once(Ve.CLOSED,()=>a(new G(I.WS_ABORT))),this.ws.once(Ve.CONNECTED,o)});this.ws.state!=="connected"&&await t();let r=this.sendMessage(e),n=new de((o,a)=>{let s=()=>{a(new G(I.WS_ABORT))};this.ws.once(Ve.RECONNECTING,s),this.ws.once(Ve.CLOSED,s),this.once("req_".concat(r),o),Tn(3e3).then(()=>{this.removeAllListeners("req_".concat(r)),this.ws.off(Ve.RECONNECTING,s),this.ws.off(Ve.CLOSED,s),a(new G(I.TIMEOUT,"cross channel ws request timeout"))})}),i=await n;if(!i||i.code!==200)throw new G(I.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(i)));return i}async connect(e){this.ws.removeAllListeners(Ve.REQUEST_NEW_URLS),this.ws.on(Ve.REQUEST_NEW_URLS,t=>{t(e)}),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){let t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}},FUe=class extends fr{set state(e){e!==this._state&&(e!==Gi.RELAY_STATE_FAILURE&&(this.errorCode=sp.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,r,n,i){super(),C(this,"joinInfo",void 0),C(this,"sid",void 0),C(this,"clientId",void 0),C(this,"cancelToken",Ui.CancelToken.source()),C(this,"workerToken",void 0),C(this,"requestId",0),C(this,"signal",void 0),C(this,"prevChannelMediaConfig",void 0),C(this,"httpRetryConfig",void 0),C(this,"_resolution",void 0),C(this,"_state",Gi.RELAY_STATE_IDLE),C(this,"errorCode",sp.RELAY_OK),C(this,"onStatus",o=>{b.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(o))),o&&o.command&&(o.command==="onAudioPacketReceived"&&this.emit("event",Uc.PACKET_RECEIVED_AUDIO_FROM_SRC),o.command==="onVideoPacketReceived"&&this.emit("event",Uc.PACKET_RECEIVED_VIDEO_FROM_SRC),o.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=sp.SRC_TOKEN_EXPIRED,this.state=Gi.RELAY_STATE_FAILURE),o.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=sp.DEST_TOKEN_EXPIRED,this.state=Gi.RELAY_STATE_FAILURE))}),C(this,"onReconnect",async()=>{b.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",Uc.NETWORK_DISCONNECTED),this.state=Gi.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(o=>{this.state!==Gi.RELAY_STATE_IDLE&&(b.error("auto restart channel media relay failed",o.toString()),this.errorCode=sp.SERVER_CONNECTION_LOST,this.state=Gi.RELAY_STATE_FAILURE)})}),this.joinInfo=e,this.clientId=t,this.sid=Lp(),this.signal=new UUe(this.joinInfo,this.clientId,r),this.httpRetryConfig=n,this._resolution=i}async startChannelMediaRelay(e){if(this.state!==Gi.RELAY_STATE_IDLE)throw new G(I.INVALID_OPERATION);this.state=Gi.RELAY_STATE_CONNECTING,await this.connect(),b.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(t){throw t.data&&t.data.serverResponse&&t.data.serverResponse.command==="SetSourceChannel"?new G(I.CROSS_CHANNEL_FAILED_JOIN_SRC):t.data&&t.data.serverResponse&&t.serverResponse.command==="SetDestChannelStatus"?new G(I.CROSS_CHANNEL_FAILED_JOIN_DEST):t.data&&t.data.serverResponse&&t.serverResponse.command==="StartPacketTransfer"?new G(I.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):t}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==Gi.RELAY_STATE_RUNNING)throw new G(I.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==Gi.RELAY_STATE_RUNNING)throw new G(I.INVALID_OPERATION);let t=this.genMessage(fi.SetVideoProfile);await this.signal.request(t),b.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),b.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=Gi.RELAY_STATE_IDLE,this.dispose()}dispose(){b.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Ui.CancelToken.source(),this.state=Gi.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){let e=await DMe(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",Uc.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){let t=this.genMessage(fi.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),b.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));let r=this.genMessage(fi.SetSdkProfile,e);await this.signal.request(r),b.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));let n=this.genMessage(fi.SetSourceChannel,e);await this.signal.request(n),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",Uc.PACKET_JOINED_SRC_CHANNEL),b.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));let i=this.genMessage(fi.SetSourceUserId,e);await this.signal.request(i),b.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));let o=this.genMessage(fi.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",Uc.PACKET_JOINED_DEST_CHANNEL),b.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));let a=this.genMessage(fi.StartPacketTransfer,e);await this.signal.request(a),this.emit("event",Uc.PACKET_SENT_TO_DEST_CHANNEL),this.state=Gi.RELAY_STATE_RUNNING,b.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){let t=this.genMessage(fi.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",Uc.PACKET_UPDATE_DEST_CHANNEL),b.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){let e=this.genMessage(fi.StopPacketTransfer);await this.signal.request(e),b.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){let r=[],n=[],i=[];this.requestId+=1;let o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:aa,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};o.sdkVersion==="4.22.0"&&(o.sdkVersion="0.0.1");let a=null,s=null;switch(e){case fi.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case fi.SetSourceChannel:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new G(I.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceChannel",uid:"0",channelName:s.channelName,token:s.token||this.joinInfo.appId},o;case fi.SetSourceUserId:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new G(I.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceUserId",uid:s.uid+""},o;case fi.SetDestChannel:if(a=t&&t.getDestChannelMediaInfo(),!a)throw new G(I.UNEXPECTED_ERROR,"can not find dest config");return a.forEach(c=>{r.push(c.channelName),n.push(c.uid+""),i.push(c.token||this.joinInfo.appId)}),o.clientRequest={command:"SetDestChannel",channelName:r,uid:n,token:i},o;case fi.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case fi.Reconnect:return o.clientRequest={command:"Reconnect"},o;case fi.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case fi.UpdateDestChannel:if(a=t&&t.getDestChannelMediaInfo(),!a)throw new G(I.UNEXPECTED_ERROR,"can not find dest config");return a.forEach(c=>{r.push(c.channelName),n.push(c.uid+""),i.push(c.token||this.joinInfo.appId)}),o.clientRequest={command:"UpdateDestChannel",channelName:r,uid:n,token:i},o;case fi.SetVideoProfile:o.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return o}},VUe={name:"ChannelMediaRelay",create:function(e){return new FUe(e.joinInfo,e.clientId,e.websocketRetryConfig||Vr,e.httpRetryConfig||Vr,e.resolution)}};function W8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ig(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W8(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var BUe=class extends fr{constructor(e,t,r,n){super(),C(this,"spec",void 0),C(this,"token",void 0),C(this,"websocket",void 0),C(this,"pingpongTimer",void 0),C(this,"reconnectMode","retry"),C(this,"serviceMode",void 0),C(this,"reqId",0),C(this,"commandReqId",0),C(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),C(this,"handleWebSocketMessage",i=>{if(!i.data)return;let o=JSON.parse(i.data);o.requestId?this.emit("@".concat(o.requestId,"-").concat(o.sid),o):(be.workerEvent(this.spec.sid,{actionType:"status",serverCode:o.code,workerType:this.serviceMode===Zc.TRANSCODE?1:2}),this.emit(Kl.PUBLISH_STREAM_STATUS,o))}),this.spec=t,this.token=e,this.serviceMode=n,this.websocket=new z0("live-streaming",r),this.websocket.on(Ve.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Ve.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Ve.REQUEST_NEW_URLS,(i,o)=>{Ln(this,Kl.REQUEST_NEW_ADDRESS).then(i).catch(o)}),this.websocket.on(Ve.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(e){return this.websocket.init(e)}async request(e,t,r,n){this.reqId+=1,e==="request"&&(this.commandReqId+=1);let i=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new G(I.UNEXPECTED_ERROR);let a=ig({command:e,sdkVersion:aa==="4.22.0"?"0.0.1":aa,seq:o,requestId:o,allocate:r,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if(this.websocket.state==="closed")throw new G(I.WS_DISCONNECT);let s=()=>new de((u,p)=>{this.websocket.once(Ve.CLOSED,()=>p(new G(I.WS_ABORT))),this.websocket.once(Ve.CONNECTED,u)});this.websocket.state!=="connected"&&await s(),a.clientRequest&&(a.clientRequest.workerToken=this.token);let c=new de((u,p)=>{let f=()=>{p(new G(I.WS_ABORT))};this.websocket.once(Ve.RECONNECTING,f),this.websocket.once(Ve.CLOSED,f),this.once("@".concat(o,"-").concat(this.spec.sid),m=>{u(m)})});n&&be.workerEvent(this.spec.sid,ig(ig({},n),{},{requestId:i,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));let l=Date.now();this.websocket.sendMessage(a);let d=null;try{d=await c}catch(u){if(this.websocket.state==="closed")throw u;return await s(),await this.request(e,t,r)}return n&&be.workerEvent(this.spec.sid,ig(ig({},n),{},{requestId:i,actionType:"response",payload:JSON.stringify(d.serverResponse),serverCode:d.code,success:d.code===200,responseTime:Date.now()-l})),d.code!==200&&this.handleResponseError(d),d}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){let e=aa==="4.22.0"?"0.0.1":aa;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case Gr.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void b.warning("live stream response already exists stream");case Gr.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case Gr.LIVE_STREAM_RESPONSE_BAD_STREAM:case Gr.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new G(I.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case Gr.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(e.serverResponse.command==="UnpublishStream")return;throw new G(I.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Gr.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new G(I.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case Gr.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{let t=new G(I.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(Kl.WARNING,t,e.serverResponse.url)}case Gr.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{let t=new G(I.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(Kl.WARNING,t,e.serverResponse.url)}case Gr.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new G(I.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Gr.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new G(I.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case Gr.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{let t=new G(I.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(Kl.WARNING,t,e.serverResponse.url)}case Gr.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new G(I.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case Gr.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new G(I.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case Gr.LIVE_STREAM_RESPONSE_WORKER_LOST:case Gr.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(e.serverResponse.command==="UnpublishStream")return;throw new G(I.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Gr.ERROR_FAIL_SEND_MESSAGE:if(e.serverResponse.command==="UnpublishStream")return;if(e.serverResponse.command==="UpdateTranscoding"||e.serverResponse.command==="ControlStream")return new G(I.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new G(I.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Gr.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Gr.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Gr.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Gr.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new G(I.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(sT)},6e3)}};function G8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G8(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var $Ue=class extends fr{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vr,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vr;super(),C(this,"onLiveStreamWarning",void 0),C(this,"onLiveStreamError",void 0),C(this,"spec",void 0),C(this,"retryTimeout",1e4),C(this,"connection",void 0),C(this,"httpRetryConfig",void 0),C(this,"wsRetryConfig",void 0),C(this,"streamingTasks",new Map),C(this,"isStartingStreamingTask",!1),C(this,"taskMutex",new zn("live-streaming")),C(this,"cancelToken",Ui.CancelToken.source()),C(this,"transcodingConfig",void 0),C(this,"uapResponse",void 0),C(this,"lastTaskId",1),C(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=r,this.wsRetryConfig=t}async setTranscodingConfig(e){let t=Wi(Wi({},V2e),e);t.videoCodecProfile!==66&&t.videoCodecProfile!==77&&t.videoCodecProfile!==100&&(b.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map(o=>Wi(Wi(Wi({},F2e),o),{},{zOrder:o.zOrder?o.zOrder+1:1}))),function(o){dr(o.width)||Vt(o.width,"config.width",0,1e4),dr(o.height)||Vt(o.height,"config.height",0,1e4),dr(o.videoBitrate)||Vt(o.videoBitrate,"config.videoBitrate",1,1e6),dr(o.videoFrameRate)||Vt(o.videoFrameRate,"config.videoFrameRate"),dr(o.lowLatency)||Yc(o.lowLatency,"config.lowLatency"),dr(o.audioSampleRate)||Jr(o.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),dr(o.audioBitrate)||Vt(o.audioBitrate,"config.audioBitrate",1,128),dr(o.audioChannels)||Jr(o.audioChannels,"config.audioChannels",[1,2,3,4,5]),dr(o.videoGop)||Vt(o.videoGop,"config.videoGop"),dr(o.videoCodecProfile)||Jr(o.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),dr(o.userCount)||Vt(o.userCount,"config.userCount",0,17),dr(o.backgroundColor)||Vt(o.backgroundColor,"config.backgroundColor",0,16777215),dr(o.userConfigExtraInfo)||En(o.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),o.transcodingUsers&&!dr(o.transcodingUsers)&&(Hc(o.transcodingUsers,"config.transcodingUsers"),o.transcodingUsers.forEach((a,s)=>{dT(a.uid),dr(a.x)||Vt(a.x,"transcodingUser[".concat(s,"].x"),0,1e4),dr(a.y)||Vt(a.y,"transcodingUser[".concat(s,"].y"),0,1e4),dr(a.width)||Vt(a.width,"transcodingUser[".concat(s,"].width"),0,1e4),dr(a.height)||Vt(a.height,"transcodingUser[".concat(s,"].height"),0,1e4),dr(a.zOrder)||Vt(a.zOrder-1,"transcodingUser[".concat(s,"].zOrder"),0,100),dr(a.alpha)||Vt(a.alpha,"transcodingUser[".concat(s,"].alpha"),0,1,!1)})),dr(o.watermark)||cI(o.watermark,"watermark"),dr(o.backgroundImage)||cI(o.backgroundImage,"backgroundImage"),o.images&&!dr(o.images)&&(Hc(o.images,"config.images"),o.images.forEach((a,s)=>{cI(a,"images[".concat(s,"]"))}))}(t);let r=[];t.images&&r.push(...t.images.map(o=>Wi(Wi(Wi({},sI),o),{},{zOrder:255}))),t.backgroundImage&&(r.push(Wi(Wi(Wi({},sI),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(r.push(Wi(Wi(Wi({},sI),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=r,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map(o=>Wi({},o)),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);let n=(t.userConfigs||[]).map(o=>typeof o.uid=="number"?de.resolve(o.uid):aZ(o.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await de.all(n)).forEach((o,a)=>{t.userConfigs&&t.userConfigs[a]&&(t.userConfigs[a].uid=o)}),this.transcodingConfig=t,this.connection)try{var i;let o=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(ol(i=this.streamingTasks).call(i)).map(a=>a.taskId).join("#")});b.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(o.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(o){if(!o.data||!o.data.retry)throw o;o.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(a=>{b.warning("[".concat(this.spec.clientId,"] live streaming receive error"),o.toString(),"try to republish",a.url),this.startLiveStreamingTask(a.url,a.mode,o).then(()=>{b.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(a.url," success"))}).catch(s=>{b.error("[".concat(this.spec.clientId,"] live streaming republish failed"),a.url,s.toString()),this.onLiveStreamError&&this.onLiveStreamError(a.url,s)})})}}async startLiveStreamingTask(e,t,r){if(!this.transcodingConfig&&t===Zc.TRANSCODE)throw new G(I.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let n={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};b.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));let i=await this.taskMutex.lock();if(!this.connection&&r)return void i();if(this.streamingTasks.get(e)&&!r)return i(),new G(I.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(a){throw i(),a}switch(t){case Zc.TRANSCODE:n.transcodingConfig=Wi({},this.transcodingConfig)}this.uapResponse&&this.uapResponse.vid&&(n.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;let o=this.lastTaskId++;try{let a=new de((c,l)=>{Tn(this.retryTimeout).then(()=>{if(r)return l(r);let d=this.statusError.get(e);return d?(this.statusError.delete(e),l(d)):void 0})}),s=await de.race([this.connection.request("request",{clientRequest:n},!0,{url:e,command:"PublishStream",workerType:t===Zc.TRANSCODE?1:2,requestByUser:!r,tid:o.toString()}),a]);this.isStartingStreamingTask=!1,b.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(s.code)),this.streamingTasks.set(e,{clientRequest:n,mode:t,url:e,taskId:o}),i()}catch(a){if(i(),this.isStartingStreamingTask=!1,!a.data||!a.data.retry||r)throw a;return a.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,a)):await this.startLiveStreamingTask(e,t,a)}}stopLiveStreamingTask(e){return new de((t,r)=>{let n=this.streamingTasks.get(e);if(!n||!this.connection)return new G(I.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();let i=n.mode;n.abortTask=()=>{b.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:"UnpublishStream",url:n.url}},!1,{url:e,command:"UnPublishStream",workerType:i===Zc.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(o=>{b.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(o.code)),this.streamingTasks.delete(e),this.streamingTasks.size===0&&(this.connection&&this.connection.close(),this.connection=void 0),t()}).catch(r)})}resetAllTask(){var e;let t=Array.from(ol(e=this.streamingTasks).call(e));this.terminate();for(let r of t)this.startLiveStreamingTask(r.url,r.mode).catch(n=>{this.onLiveStreamError&&this.onLiveStreamError(r.url,n)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Ui.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new G(I.UNEXPECTED_ERROR,"live streaming connection has already connected");let t=await Ln(this,$N.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new BUe(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(Kl.WARNING,(r,n)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(n,r)),this.connection.on(Kl.PUBLISH_STREAM_STATUS,r=>this.handlePublishStreamServer(r)),this.connection.on(Kl.REQUEST_NEW_ADDRESS,(r,n)=>{if(!this.connection)return n(new G(I.UNEXPECTED_ERROR,"can not get new live streaming address list"));Ln(this,$N.REQUEST_WORKER_MANAGER_LIST,e).then(i=>{this.uapResponse=i,r(i.addressList)}).catch(n)}),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){let t=e.serverStatus&&e.serverStatus.url||"empty_url",r=this.streamingTasks.get(t),n=e.reason;switch(e.code){case Gr.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Gr.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Gr.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Gr.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{let o=new G(I.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(r)return b.error(o.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,o);if(!this.isStartingStreamingTask)return;this.statusError.set(t,o)}case Gr.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{let o=new G(I.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,n);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,o)}case Gr.LIVE_STREAM_RESPONSE_WORKER_LOST:case Gr.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var i;if(!this.connection)return;this.connection.tryNextAddress();let o=Array.from(ol(i=this.streamingTasks).call(i));for(let a of o)a.abortTask?a.abortTask():(b.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",a.url),this.startLiveStreamingTask(a.url,a.mode,new G(I.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then(()=>{b.debug("[".concat(this.spec.clientId,"] republish live stream success"),a.url)}).catch(s=>{b.error(s.toString()),this.onLiveStreamError&&this.onLiveStreamError(a.url,s)}));return}}}hasUrl(e){return this.streamingTasks.has(e)}},HUe={name:"LiveStreaming",create:function(e){return new $Ue(e.joinInfo,e.websocketRetryConfig||Vr,e.httpRetryConfig||Vr)}};function WUe(e){let t=z8();return function(r,n){let i=r.appId;i!==void 0&&(Lt(n,10),tc(n,i));let o=r.cid;o!==void 0&&(Lt(n,16),Lt(n,o));let a=r.cname;a!==void 0&&(Lt(n,26),tc(n,a));let s=r.deviceId;s!==void 0&&(Lt(n,34),tc(n,s));let c=r.elapse;c!==void 0&&(Lt(n,40),jl(n,c));let l=r.fileSize;l!==void 0&&(Lt(n,48),jl(n,ip(l)));let d=r.height;d!==void 0&&(Lt(n,56),jl(n,ip(d)));let u=r.jpg;u!==void 0&&(Lt(n,66),Lt(n,u.length),function(K,A){let N=Em(K,A.length);K.bytes.set(A,N)}(n,u));let p=r.networkType;p!==void 0&&(Lt(n,72),jl(n,ip(p)));let f=r.osType;f!==void 0&&(Lt(n,80),jl(n,ip(f)));let m=r.requestId;m!==void 0&&(Lt(n,90),tc(n,m));let g=r.sdkVersion;g!==void 0&&(Lt(n,98),tc(n,g));let y=r.sequence;y!==void 0&&(Lt(n,104),jl(n,ip(y)));let v=r.sid;v!==void 0&&(Lt(n,114),tc(n,v));let E=r.timestamp;E!==void 0&&(Lt(n,120),jl(n,E));let w=r.uid;w!==void 0&&(Lt(n,128),Lt(n,w));let S=r.vid;S!==void 0&&(Lt(n,136),Lt(n,S));let x=r.width;x!==void 0&&(Lt(n,144),jl(n,ip(x)));let O=r.service;O!==void 0&&(Lt(n,152),Lt(n,O));let L=r.callbackData;L!==void 0&&(Lt(n,162),tc(n,L));let j=r.jpgEncryption;j!==void 0&&(Lt(n,168),Lt(n,j));let W=r.requestType;W!==void 0&&(Lt(n,176),Lt(n,W));let V=r.scorePorn;V!==void 0&&(Lt(n,185),hx(n,V));let Y=r.scoreSexy;Y!==void 0&&(Lt(n,193),hx(n,Y));let Z=r.scoreNeutral;Z!==void 0&&(Lt(n,201),hx(n,Z));let te=r.scene;te!==void 0&&(Lt(n,208),Lt(n,te));let H=r.ossFilePrefix;H!==void 0&&(Lt(n,218),tc(n,H));let $=r.serviceVendor;if($!==void 0)for(let K of $){Lt(n,226);let A=z8();KUe(K,A),Lt(n,A.limit),JUe(n,A),XUe(A)}}(e,t),function(r){let n=r.bytes,i=r.limit;return n.length===i?n:n.subarray(0,i)}(t)}function GUe(e){return function(r){let n={};e:for(;!n1(r);){let i=sc(r);switch(i>>>3){case 0:break e;case 1:n.code=sc(r);break;case 2:n.msg=i1(r,sc(r));break;case 3:{let o=qUe(r);n.data=zUe(r),r.limit=o;break}default:t1(r,7&i)}}return n}({bytes:t=e,offset:0,limit:t.length});var t}function zUe(e){let t={};e:for(;!n1(e);){let r=sc(e);switch(r>>>3){case 0:break e;case 1:t.requestId=i1(e,sc(e));break;case 2:t.requestType=sc(e)>>>0;break;case 3:t.scorePorn=ux(e);break;case 4:t.scoreSexy=ux(e);break;case 5:t.scoreNeutral=ux(e);break;case 6:t.requestScene=sc(e)>>>0;break;case 7:t.scene=sc(e)>>>0;break;default:t1(e,7&r)}}return t}function KUe(e,t){let r=e.service;r!==void 0&&(Lt(t,8),Lt(t,r));let n=e.vendor;n!==void 0&&(Lt(t,16),Lt(t,n));let i=e.token;i!==void 0&&(Lt(t,26),tc(t,i));let o=e.callbackUrl;o!==void 0&&(Lt(t,34),tc(t,o))}function qUe(e){let t=sc(e),r=e.limit;return e.limit=e.offset+t,r}function t1(e,t){switch(t){case 0:for(;128&o1(e););break;case 2:dx(e,sc(e));break;case 5:dx(e,4);break;case 1:dx(e,8);break;default:throw new Error("Unimplemented type: "+t)}}var YUe=new Float32Array(1);new Uint8Array(YUe.buffer);var u2=new Float64Array(1),qi=new Uint8Array(u2.buffer);function ip(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var r1=[];function z8(){let e=r1.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function XUe(e){r1.push(e)}function dx(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function n1(e){return e.offset>=e.limit}function Em(e,t){let r=e.bytes,n=e.offset,i=e.limit,o=n+t;if(o>r.length){let a=new Uint8Array(2*o);a.set(r),e.bytes=a}return e.offset=o,o>i&&(e.limit=o),n}function h2(e,t){let r=e.offset;if(r+t>e.limit)throw new Error("Read past limit");return e.offset+=t,r}function i1(e,t){let r=h2(e,t),n=String.fromCharCode,i=e.bytes,o="�",a="";for(let s=0;s<t;s++){let c,l,d,u,p=i[s+r];128&p?(224&p)==192?s+1>=t?a+=o:(c=i[s+r+1],(192&c)!=128?a+=o:(u=(31&p)<<6|63&c,u<128?a+=o:(a+=n(u),s++))):(240&p)==224?s+2>=t?a+=o:(c=i[s+r+1],l=i[s+r+2],(49344&(c|l<<8))!=32896?a+=o:(u=(15&p)<<12|(63&c)<<6|63&l,u<2048||u>=55296&&u<=57343?a+=o:(a+=n(u),s+=2))):(248&p)==240?s+3>=t?a+=o:(c=i[s+r+1],l=i[s+r+2],d=i[s+r+3],(12632256&(c|l<<8|d<<16))!=8421504?a+=o:(u=(7&p)<<18|(63&c)<<12|(63&l)<<6|63&d,u<65536||u>1114111?a+=o:(u-=65536,a+=n(55296+(u>>10),56320+(1023&u)),s+=3))):a+=o:a+=n(p)}return a}function tc(e,t){let r=t.length,n=0;for(let a=0;a<r;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<r&&(s=(s<<10)+t.charCodeAt(++a)-56613888),n+=s<128?1:s<2048?2:s<65536?3:4}Lt(e,n);let i=Em(e,n),o=e.bytes;for(let a=0;a<r;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<r&&(s=(s<<10)+t.charCodeAt(++a)-56613888),s<128?o[i++]=s:(s<2048?o[i++]=s>>6&31|192:(s<65536?o[i++]=s>>12&15|224:(o[i++]=s>>18&7|240,o[i++]=s>>12&63|128),o[i++]=s>>6&63|128),o[i++]=63&s|128)}}function JUe(e,t){let r=Em(e,t.limit),n=e.bytes,i=t.bytes;for(let o=0,a=t.limit;o<a;o++)n[o+r]=i[o]}function o1(e){return e.bytes[h2(e,1)]}function K8(e,t){let r=Em(e,1);e.bytes[r]=t}function ux(e){let t=h2(e,8),r=e.bytes;return qi[0]=r[t++],qi[1]=r[t++],qi[2]=r[t++],qi[3]=r[t++],qi[4]=r[t++],qi[5]=r[t++],qi[6]=r[t++],qi[7]=r[t++],u2[0]}function hx(e,t){let r=Em(e,8),n=e.bytes;u2[0]=t,n[r++]=qi[0],n[r++]=qi[1],n[r++]=qi[2],n[r++]=qi[3],n[r++]=qi[4],n[r++]=qi[5],n[r++]=qi[6],n[r++]=qi[7]}function sc(e){let t,r=0,n=0;do t=o1(e),r<32&&(n|=(127&t)<<r),r+=7;while(128&t);return n}function Lt(e,t){for(t>>>=0;t>=128;)K8(e,127&t|128),t>>>=7;K8(e,t)}function jl(e,t){let r=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=i===0?n===0?r<16384?r<128?1:2:r<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:i<128?9:10,a=Em(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=o!==9?128|i:127&i;case 8:s[a+7]=o!==8?n>>>21|128:n>>>21&127;case 7:s[a+6]=o!==7?n>>>14|128:n>>>14&127;case 6:s[a+5]=o!==6?n>>>7|128:n>>>7&127;case 5:s[a+4]=o!==5?128|n:127&n;case 4:s[a+3]=o!==4?r>>>21|128:r>>>21&127;case 3:s[a+2]=o!==3?r>>>14|128:r>>>14&127;case 2:s[a+1]=o!==2?r>>>7|128:r>>>7&127;case 1:s[a]=o!==1?128|r:127&r}}function q8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var QUe=new Map([["moderation",1],["supervise",2]]);function Y8(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var ZUe=class extends fr{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;let t=this._connectionState;this._connectionState=e,this.emit(un.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=Ps(t=e.map(r=>QUe.get(r)||0)).call(t,(r,n)=>r+n),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(e){super(),C(this,"name","AgoraRTCVideoContentInspect"),C(this,"_connectionState",ja.CONNECTING),C(this,"_innerConnectionState",void 0),C(this,"sequence",0),C(this,"inspectStartTime",void 0),C(this,"workerManagerConnection",void 0),C(this,"workerConnection",void 0),C(this,"workerMessageLengthLimit",void 0),C(this,"inspectIntervalMinimum",void 0),C(this,"qualityRatio",void 0),C(this,"_connectInfo",void 0),C(this,"_cancelTokenSource",Ui.CancelToken.source()),C(this,"_retryConfig",void 0),C(this,"wmSequence",0),C(this,"inspectInterval",void 0),C(this,"inspectTimer",null),C(this,"ossFilePrefix",void 0),C(this,"extraInfo",void 0),C(this,"_inspectType",void 0),C(this,"_inspectMode",void 0),C(this,"_quality",1),C(this,"qualityTimer",null),C(this,"_inspectId",void 0),C(this,"_needWorkUrlOnly",!1),C(this,"inspectImage",()=>{if(this.connectionState!==ja.CONNECTED)throw new G(I.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===ja.CONNECTED?this.requestToInspectImage():b.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=qt(5,"inspect-"),this.workerMessageLengthLimit=D("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=D("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=D("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new z0("worker-manager-"+this._inspectId,Vr),this.on(un.STATE_CHANGE,(t,r)=>{this._innerConnectionState=t,b.debug("[".concat(this._inspectId,"] Inspect operation :").concat(Oa[t]," ").concat(r||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new z0("worker-"+this._inspectId,Vr),this.handleWorkerEvents()}async init(e,t){this.emit(un.STATE_CHANGE,Oa.CONNECT_AP),this._connectInfo=e;let r=this._cancelTokenSource.token;return this._retryConfig=t,new de((n,i)=>{this.on(un.CONNECTION_STATE_CHANGE,(o,a)=>{a===ja.CONNECTED&&n()}),this.requestAP(e,r,t).then(o=>{this.connectWorkerManager(o)}).catch(o=>{i(o)})})}async requestAP(e,t,r){let n=D("WEBCS_DOMAIN").map(a=>"https://".concat(a,"/api/v1")),i=await function(a,s,c,l){let{appId:d,areaCode:u,cname:p,sid:f,token:m,uid:g}=s;rf++;let y="image_moderation_api",v={service_name:y,json_body:JSON.stringify({appId:d,areaCode:u,cname:p,command:"allocateEdge",requestId:rf,seq:rf,sid:f,token:m,ts:Date.now(),uid:g+""})},E,w,S=a[0];return Fs(async()=>{E=Date.now();let x=await Vs(S,{data:v,cancelToken:c,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(w=Date.now()-E,x.code!==0){let W=new G(I.UNEXPECTED_RESPONSE,"image inspect ap error, code"+x.code,{retry:!0,responseTime:w});throw b.error(W.toString()),W}let O=JSON.parse(x.json_body);if(O.code!==200){let W=new G(I.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(O.code,", reason: ").concat(O.reason),{code:O.code,responseTime:w});throw b.error(W.toString()),W}if(!O.servers||!Array.isArray(O.servers)||O.servers.length===0){let W=new G(I.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:O.code,responseTime:w});throw b.error(W.toString()),W}let L=D("VIDEO_INSPECT_WORKER_MANAGER_HOST"),j=D("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:O.servers.map(W=>{let{address:V,wss:Y}=W;if(V&&Y)return"wss://".concat(V.replace(/\./g,"-"),".").concat(L,":").concat(j||Y)}).filter(W=>!!W),workerToken:O.workerToken,vid:O.vid,responseTime:w}},(x,O)=>(be.apworkerEvent(f,{success:!0,sc:200,serviceName:y,responseDetail:JSON.stringify(x.addressList),firstSuccess:O===0,responseTime:w,serverIp:a[O%a.length]}),!1),(x,O)=>(be.apworkerEvent(f,{success:!1,sc:x.data&&x.data.code||200,serviceName:y,responseTime:w,serverIp:a[O%a.length]}),!!(x.code!==I.OPERATION_ABORTED&&x.code!==I.UNEXPECTED_RESPONSE||x.data&&x.data.retry)&&(S=a[(O+1)%a.length],!0)),l)}(n,e,t,r);this.emit(un.STATE_CHANGE,Oa.AP_CONNECTED);let{addressList:o}=i;return this.wmSequence++,o}async connectWorkerManager(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=t,this.emit(un.STATE_CHANGE,Oa.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(Ve.CONNECTED,async()=>{this.emit(un.STATE_CHANGE,Oa.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.22.0",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(Ve.CLOSED,()=>{this._innerConnectionState<Oa.GET_WORKER_MANAGER_RESPONSE&&b.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(Ve.FAILED,()=>{this._innerConnectionState<Oa.GET_WORKER_MANAGER_RESPONSE&&b.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(Ve.RECONNECTING,()=>{this._innerConnectionState<Oa.GET_WORKER_MANAGER_RESPONSE&&b.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(Ve.ON_MESSAGE,async e=>{this.emit(un.STATE_CHANGE,Oa.GET_WORKER_MANAGER_RESPONSE);let t=this.workerManagerConnection.url;this.workerManagerConnection.close();let r=JSON.parse(e.data);if(r.code!==200)throw b.error("[".concat(this._inspectId,"] Unexpected code ").concat(r.code," from worker manager")),new G(I.UNEXPECTED_RESPONSE,"response code of worker is unexpected",r);if(!(r.serverResponse&&r.serverResponse.portWss&&t))throw b.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(r))),new G(I.UNEXPECTED_RESPONSE,"response content of worker is unexpected",r);{let n=D("VIDEO_INSPECT_WORKER_PORT")||r.serverResponse.portWss,i=t.replace(/:\d+\/?$/,":".concat(n));this.emit(un.STATE_CHANGE,Oa.CONNECT_WORKER,i),this._needWorkUrlOnly?this.emit(un.REQUEST_NEW_WORKER_URL,i):await this.connectWorker(i)}}),this.workerManagerConnection.on(Ve.WILL_RECONNECT,(e,t,r)=>{r(e)}),this.workerManagerConnection.on(Ve.REQUEST_NEW_URLS,(e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)})}handleWorkerEvents(){this.workerConnection.on(Ve.CONNECTED,async()=>{this.emit(un.STATE_CHANGE,Oa.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=ja.CONNECTED}),this.workerConnection.on(Ve.ON_MESSAGE,async e=>{if(e.data instanceof ArrayBuffer){let r=GUe(new Uint8Array(e.data));if(D("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&b.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(r)),r.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(un.INSPECT_RESULT,void 0,void 0);if(r.data&&r.data.scorePorn&&r.data.scoreSexy&&r.data.scoreNeutral){var t;let n={porn:r.data.scorePorn,sexy:r.data.scoreSexy,neutral:r.data.scoreNeutral},i=Ps(t=Object.keys(n)).call(t,(a,s)=>n[a]>n[s]?a:s,"porn"),o=Object.keys(n).find(a=>a===i);this.emit(un.INSPECT_RESULT,o)}else this.emit(un.INSPECT_RESULT,void 0,new G(I.UNEXPECTED_RESPONSE,r.code+"","There is an unexpected data on message"))}else this.emit(un.INSPECT_RESULT,void 0,new G(I.UNEXPECTED_RESPONSE,r.code+"",r.msg))}else b.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(un.INSPECT_RESULT,void 0,new G(I.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(Ve.CLOSED,()=>{this.connectionState=ja.CLOSED}),this.workerConnection.on(Ve.FAILED,()=>{this.connectionState=ja.CLOSED}),this.workerConnection.on(Ve.RECONNECTING,()=>{this.connectionState=this.connectionState===ja.CONNECTED?ja.RECONNECTING:ja.CONNECTING}),this.workerConnection.on(Ve.WILL_RECONNECT,(e,t,r)=>{e==="recover"&&r(e),r("tryNext")}),this.workerConnection.on(Ve.REQUEST_NEW_URLS,(e,t)=>{this.workerManagerConnection.close(),this.once(un.REQUEST_NEW_WORKER_URL,r=>{e([r])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r=>{this.connectWorkerManager(r,!0)}).catch(r=>{t(r)})})}async requestToInspectImage(){this.sequence++;let e=oa(this,un.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(un.INSPECT_RESULT,void 0,new G(I.INVALID_OPERATION,"Only the track being played can be inspected"));let r=await this.generateRequestData(e,t);this.workerConnection.sendMessage(r,!0,!0)}else this.emit(un.INSPECT_RESULT,void 0,new G(I.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:r,cname:n,cid:i,vid:o,sid:a,uid:s}=t,c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),d=await BQ(l,r,n),u=this.sequence+"-"+i+"-"+s+"-"+c+"-"+qt(12,""),p={appId:r,cid:i,cname:n,deviceId:"",elapse:Y8(Number(c-this.inspectStartTime)),fileSize:d.byteLength,jpgEncryption:2,height:l.height,width:l.width,jpg:d,networkType:6,osType:7,requestId:u,sdkVersion:"4.22.0",sequence:this.sequence,sid:a,timestamp:Y8(c),uid:s,vid:o,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete p.callbackData,this.ossFilePrefix===void 0&&delete p.ossFilePrefix;let f=WUe(p);if(f.byteLength<this.workerMessageLengthLimit){if(D("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){let m=function(g){for(var y=1;y<arguments.length;y++){var v=arguments[y]!=null?arguments[y]:{};y%2?q8(Object(v),!0).forEach(function(E){C(g,E,v[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(v)):q8(Object(v)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(v,E))})}return g}({},p);delete m.jpg,b.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(m))}return f}{let m=this.quality*this.qualityRatio;return this.quality=m,await this.generateRequestData(e,{appId:r,cname:n,cid:i,vid:o,sid:a,uid:s})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Ui.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=ja.CLOSED,this.emit(un.STATE_CHANGE,Oa.CLOSED)}},e5e={name:"ContentInspect",create:function(e){let{config:t}=e;return function(r){if(!r)throw new G(I.INVALID_PARAMS,"inspectConfig is necessary.");if(!r.inspectType||!Array.isArray(r.inspectType))throw new G(I.INVALID_PARAMS,"inspectConfig.inspectType is necessary and is an instance of Array.");{let n=[...new Set(r.inspectType)];n.forEach(i=>{var o;if(!pe(o=["supervise","moderation"]).call(o,i))throw new G(I.INVALID_PARAMS,"".concat(i," is not a valid inspect type."))}),r.inspectType=n}if(r&&r.extraInfo&&r.extraInfo.length>1024)throw new G(I.INVALID_PARAMS,"inspectConfig.extraInfo length cannot exceed 1024 bytes")}(t),new ZUe(t)}};Ft("PROCESS_ID","process-".concat(qt(8,""),"-").concat(qt(4,""),"-").concat(qt(4,""),"-").concat(qt(4,""),"-").concat(qt(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(t){return void b.error("Error loading sdk config",t.message)}if(e)try{let t=JSON.parse(window.atob(e)),r=Date.now();b.debug("Loading global parameters from cache",t),Object.keys(t).forEach(n=>{if(Object.prototype.hasOwnProperty.call(xr,n)){let{value:i,expires:o}=t[n];if(o&&o<=r)return;nd[n]=i,xr[n]=i}})}catch(t){b.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(nd.AREAS)&&nd.AREAS.length>0&&r2(nd.AREAS,!0);var X8=(e,t,r)=>{b.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),Ft(e,t,r)};rg(VUe,!1),rg(HUe,!1),rg(Tje,!1),rg(e5e,!1),rg(jUe,!1);var yr=function(e){let t=new fr,r=e,n={getListeners:t.getListeners.bind(t),on:(i,o)=>(function(a,s){a===oc.SECURITY_POLICY_VIOLATION&&kZ(s,!0)}(i,o),t.on.bind(t)(i,o)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return S8(S8({},r),n)}({__TRACK_LIST__:cp,VERSION:aa,BUILD:$D,ESM_BUNDLER:!1,ESM:!0,UMD:!1,DEV:!1,setParameter:X8,getParameter:D,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection,r=await async function(n){let i;return _t().supportUnifiedPlan?(n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"}),i=(await n.createOffer()).sdp):i=(await n.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,i}(t);if(!r)return e;t.close(),t=null,e=function(n){let i={video:[],audio:[]};return n.match(/ VP8/i)&&i.video.push("VP8"),n.match(/ VP9/i)&&i.video.push("VP9"),n.match(/ AV1/i)&&i.video.push("AV1"),n.match(/ H264/i)&&i.video.push("H264"),n.match(/ H265/i)&&i.video.push("H265"),n.match(/ opus/i)&&i.audio.push("OPUS"),n.match(/ PCMU/i)&&i.audio.push("PCMU"),n.match(/ PCMA/i)&&i.audio.push("PCMA"),n.match(/ G722/i)&&i.audio.push("G722"),i}(r)}catch(t){throw new G(I.CREATE_OFFER_FAILED,t.toString&&t.toString()).print()}return e},checkSystemRequirements:function(){let e=be.reportApiInvoke(null,{name:zr.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Er.TRACER}),t=!1;try{let o=window.RTCPeerConnection,a=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,s=window.WebSocket;t=!!(o&&a&&s),t&&jD()&&zJ(75)&&new o().close()}catch(o){return b.error("check system requirement failed: ",o),!1}let r=!1,n=vt();n.name===Ot.CHROME&&Number(n.version)>=58&&(Ss.engine.name!=="WebKit"||function(){let o=vt();if(rw()){if(o.os===sn.MAC_OS)return!0;if(o.os===sn.IOS){let a=Ss.os.version&&Ss.os.version.split(".");if(a&&Number(a[0])===14&&a[1]&&Number(a[1])>=3||a&&Number(a[0])>14)return!0}}return!1}())&&(r=!0),(n.name===Ot.FIREFOX&&Number(n.version)>=56||n.name===Ot.OPERA&&Number(n.version)>=45||n.name===Ot.SAFARI&&Number(n.version)>=11||n.name==="WebKit"&&(bi()||Ja())&&n.osVersion&&Number(n.osVersion.split(".")[0])>=11||XJ()||vt().name===Ot.QQ)&&(r=!0),b.debug("checkSystemRequirements, api:",t,"browser",r);let i=t&&r;return e.onSuccess(i),i},getDevices:function(e){return Oo.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return Oo.getRecordingDevices(e)},getCameras:function(e){return Oo.getCamerasDevices(e)},getElectronScreenSources:OQ,getPlaybackDevices:function(e){return Oo.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"},r=be.reportApiInvoke(null,{name:zr.CREATE_CLIENT,options:[t],tag:Er.TRACER});try{(function(n){Jr(n.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),Jr(n.mode,"config.mode",["rtc","live","p2p"]),n.audioCodec!==void 0&&Jr(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),n.proxyServer!==void 0&&En(n.proxyServer,"config.proxyServer",1,1e4),n.turnServer!==void 0&&tQ(n.turnServer),n.httpRetryConfig!==void 0&&$3(n.httpRetryConfig),n.websocketRetryConfig!==void 0&&$3(n.websocketRetryConfig)})(t)}catch(n){throw r.onError(n),n}return(qJ(16,0)||YJ(16,0))&&(t.codec==="vp9"&&(t.codec="vp8",b.debug("browser not support vp9, force use vp8")),Ft("UNSUPPORTED_VIDEO_CODEC",["vp9"])),t.audioCodec===void 0&&(t.audioCodec="opus"),r.onSuccess(),new Cje(Es(Es({forceWaitGatewayResponse:!0},t),{},{role:pe(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=D("CAMERA_CAPTURE_CONFIG"),r=be.reportApiInvoke(null,{tag:Er.TRACER,name:zr.CREATE_CAM_VIDEO_TRACK,options:[ar({},e),t]});t&&(e.encoderConfig=t);let n=aw(e),i=qt(8,"track-cam-"),o=null;b.info("start create camera video track with config",JSON.stringify(e),"trackId",i);try{o=(await Io({video:n},i)).getVideoTracks()[0]||null}catch(s){throw r.onError(s),s}if(!o){let s=new X(I.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(s),s.throw(b)}e.optimizationMode&&PI(i,o,e,dc(e.encoderConfig));let a=new JN(o,e,n,e.scalabiltyMode?gE(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i);return r.onSuccess(a.getTrackId()),b.info("create camera video success, trackId:",i),a},createCustomVideoTrack:function(e){let t=be.reportApiInvoke(null,{tag:Er.TRACER,name:zr.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),r=new Qt(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?gE(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,qt(8,"track-cus-"),[nr.CUSTOM_TRACK]);return t.onSuccess(r.getTrackId()),b.info("create custom video track success with config",e,"trackId",r.getTrackId()),r},createScreenVideoTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable",r=be.reportApiInvoke(null,{tag:Er.TRACER,name:zr.CREATE_SCREEN_VIDEO_TRACK,options:[ar({},e),t]});e.encoderConfig?typeof e.encoderConfig=="string"||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";let n=function(d){let u={};d.screenSourceType&&(u.mediaSource=d.screenSourceType),d.extensionId&&vd()&&(u.extensionId=d.extensionId);let{displaySurface:p,selfBrowserSurface:f,surfaceSwitching:m,systemAudio:g}=d;(LN(107)||M3(107)||j3(93))&&(p&&(Jr(p,"displaySurface",["browser","window","monitor"]),u.displaySurface=p),f?(Jr(f,"selfBrowserSurface",["exclude","include"]),u.selfBrowserSurface=f):u.selfBrowserSurface="include",m&&(Jr(m,"surfaceSwitching",["exclude","include"]),u.surfaceSwitching=m)),(LN(105)||M3(105)||j3(91))&&g&&(Jr(g,"systemAudio",["exclude","include"]),u.systemAudio=g),d.electronScreenSourceId&&(u.sourceId=d.electronScreenSourceId);let y=d.encoderConfig?AI(d.encoderConfig):null;return u.mandatory={chromeMediaSource:"desktop",maxWidth:y?y.width:void 0,maxHeight:y?y.height:void 0},y&&(y.frameRate&&(typeof y.frameRate=="number"?(u.mandatory.maxFrameRate=y.frameRate,u.mandatory.minFrameRate=y.frameRate):(u.mandatory.maxFrameRate=y.frameRate.max||y.frameRate.ideal||y.frameRate.exact||void 0,u.mandatory.minFrameRate=y.frameRate.min||y.frameRate.ideal||y.frameRate.exact||void 0),u.frameRate=y.frameRate),y.width&&(u.width=y.width),y.height&&(u.height=y.height)),u}(e),i=qt(8,"track-scr-v-"),o=null,a=null,s=_t();if(!s.supportShareAudio&&t==="enable"){let d=new X(I.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return r.onError(d),d.throw(b)}b.info("start create screen video track with config",e,"withAudio",t,"trackId",i);try{let d=await Io({screen:n,screenAudio:t==="auto"?s.supportShareAudio:t==="enable"},i);o=d.getVideoTracks()[0]||null,a=d.getAudioTracks()[0]||null}catch(d){throw r.onError(d),d}if(!o){let d=new X(I.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(d),d.throw(b)}if(!a&&t==="enable"){o&&o.stop();let d=new X(I.SHARE_AUDIO_NOT_ALLOWED);return r.onError(d),d.throw(b)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(PI(i,o,e,e.encoderConfig&&AI(e.encoderConfig)||void 0),e.encoderConfig&&typeof e.encoderConfig!="string"&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));let c=new Qt(o,e.encoderConfig?AI(e.encoderConfig):{},e.scalabiltyMode?gE(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i,[nr.SCREEN_TRACK]);if(!a)return r.onSuccess(c.getTrackId()),b.info("create screen video track success","video:",c.getTrackId()),c;let l=new vr(a,void 0,qt(8,"track-scr-a-"),!1);return r.onSuccess([c.getTrackId(),l.getTrackId()]),b.info("create screen video track success","video:",c.getTrackId(),"audio:",l.getTrackId()),[c,l]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=D("CAMERA_CAPTURE_CONFIG"),n=be.reportApiInvoke(null,{tag:Er.TRACER,name:zr.CREATE_MIC_AND_CAM_TRACKS,options:[e,t,r]});r&&(t.encoderConfig=r);let i=aw(t),o=HF(e),a=qt(8,"track-mic-"),s=qt(8,"track-cam-"),c=null,l=null;b.info("start create camera video track(".concat(s,") and microphone audio track(").concat(a,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{let p=await Io({audio:o,video:i},"".concat(a,"-").concat(s));c=p.getAudioTracks()[0],l=p.getVideoTracks()[0]}catch(p){throw n.onError(p),p}if(!c||!l){let p=new X(I.UNEXPECTED_ERROR,"can not find tracks in media stream");return n.onError(p),p.throw(b)}t.optimizationMode&&PI(s,l,t,dc(t.encoderConfig));let d=new sw(c,e,o,a),u=new JN(l,t,i,t.scalabiltyMode?gE(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,s);return n.onSuccess([d.getTrackId(),u.getTrackId()]),b.info("create camera video track(".concat(s,") and microphone audio track(").concat(a,") success")),[d,u]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=be.reportApiInvoke(null,{tag:Er.TRACER,name:zr.CREATE_MIC_AUDIO_TRACK,options:[e]}),r=HF(e),n=qt(8,"track-mic-"),i=null;b.info("start create microphone audio track with config",JSON.stringify(e),"trackId",n);try{i=(await Io({audio:r},n)).getAudioTracks()[0]||null}catch(a){throw t.onError(a),a}if(!i){let a=new X(I.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(a),a.throw(b)}let o=new sw(i,e,r,n);return t.onSuccess(o.getTrackId()),b.info("create microphone audio track success, trackId:",n),o},createCustomAudioTrack:function(e){let t=be.reportApiInvoke(null,{tag:Er.TRACER,name:zr.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),r=new vr(e.mediaStreamTrack,e.encoderConfig?ow(e.encoderConfig):{},qt(8,"track-cus-"),!1);return b.info("create custom audio track success with config",e,"trackId",r.getTrackId()),t.onSuccess(r.getTrackId()),r},createBufferSourceAudioTrack:async function(e){var t;let{cacheOnlineFile:r,encoderConfig:n}=e,{source:i}=e,o={source:i instanceof AudioBuffer?"AudioBuffer":i instanceof File?(t=File.name)!==null&&t!==void 0?t:"File":i,cacheOnlineFile:r,encoderConfig:n},a=be.reportApiInvoke(null,{tag:Er.TRACER,name:zr.CREATE_BUFFER_AUDIO_TRACK,options:[o]});if(D("DISABLE_WEBAUDIO"))throw new X(I.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");let s=qt(8,"track-buf-");b.info("start create buffer source audio track with config",JSON.stringify(o),"trackId",s);let c=i;if(!(i instanceof AudioBuffer))try{i=await async function(u,p){let f=null;if(typeof u=="string"){let g=IV.get(u);if(g)return b.debug("use cached audio resource: ",u),g;try{f=(await Fs(()=>Ui.get(u,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(y){throw new X(I.FETCH_AUDIO_FILE_FAILED,y.toString())}}else f=await new de((g,y)=>{let v=new FileReader;v.onload=E=>{E.target?g(E.target.result):y(new X(I.READ_LOCAL_AUDIO_FILE_ERROR))},v.onerror=()=>{y(new X(I.READ_LOCAL_AUDIO_FILE_ERROR))},v.readAsArrayBuffer(u)});let m=await function(g){let y=mm();return new de((v,E)=>{y.decodeAudioData(g,w=>{v(w)},w=>{E(new X(I.DECODE_AUDIO_FILE_FAILED,w.toString()))})})}(f);return typeof u=="string"&&p&&IV.set(u,m),m}(i,r)}catch(u){return a.onError(u),u.throw(b)}let l=new bMe(i),d=new _Me(c,l,n?ow(n):{},s);return b.info("create buffer source audio track success, trackId:",s),a.onSuccess(d.getTrackId()),d},setAppType:function(e){if(b.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw b.debug("Invalid appType"),new G(I.INVALID_PARAMS,"invalid app type",e);Ft("APP_TYPE",Math.floor(e))},setLogLevel:function(e){b.setLogLevel(e)},enableLogUpload:function(){D("USE_NEW_LOG")?Ft("UPLOAD_LOG",!0):b.enableLogUpload()},disableLogUpload:function(){D("USE_NEW_LOG")?Ft("UPLOAD_LOG",!1):b.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new gZ},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,r=be.reportApiInvoke(null,{tag:Er.TRACER,name:zr.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof vr||e instanceof tf)){let c=new G(I.INVALID_TRACK,"the parameter is not a audio track");return r.onError(c),c.throw()}t&&t<1e3&&(t=1e3);let n=e instanceof vr?e.getTrackLabel():"remote_track",i=e.getVolumeLevel(),o=i,a=i,s=Date.now();return new de(c=>{let l=setInterval(()=>{let d=e.getVolumeLevel();o=d>o?d:o,a=d<a?d:a;let u=o-a>1e-4,p=Date.now()-s;if(u||p>t){clearInterval(l);let f=u,m={duration:p,deviceLabel:n,maxVolumeLevel:o,result:f};b.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(m))),r.onSuccess(m),c(f)}},200)})},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,r=be.reportApiInvoke(null,{tag:Er.TRACER,name:zr.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof Qt||e instanceof ef)){let u=new G(I.INVALID_TRACK,"the parameter is not a video track");return r.onError(u),u.throw()}t&&t<1e3&&(t=1e3);let n=e instanceof Qt?e.getTrackLabel():"remote_track",i=e.getMediaStreamTrack(!0),o=document.createElement("video");o.style.width="1px",o.style.height="1px",o.setAttribute("muted",""),o.muted=!0,o.setAttribute("playsinline",""),o.controls=!1,(Dn()||rw())&&(o.style.opacity="0.01",o.style.position="fixed",o.style.left="0",o.style.top="0",document.body.appendChild(o)),o.srcObject=new MediaStream([i]),o.play();let a=document.createElement("canvas");a.width=160,a.height=120;let s=0,c=0;try{let u=Date.now();s=await function(p,f,m,g){let y,v=0,E=null;return new de((w,S)=>{function x(){v>g&&y&&(y(),w(v));let O=m.getContext("2d");if(!O){let W=new G(I.UNEXPECTED_ERROR,"can not get canvas 2d context.");return b.error(W.toString()),void S(W)}O.drawImage(p,0,0,160,120);let L=O.getImageData(0,0,m.width,m.height),j=Math.floor(L.data.length/3);if(E){for(let W=0;W<j;W+=3)if(L.data[W]!==E[W])return v+=1,void(E=L.data);E=L.data}else E=L.data}setTimeout(()=>{y&&(y(),w(v))},f),y=XD(()=>{x()},30)})}(o,t,a,4),c=Date.now()-u}catch(u){throw r.onError(u),u}lje===Ot.SAFARI&&(o.pause(),o.remove()),o.srcObject=null;let l=s>4,d={duration:c,changedPicNum:s,deviceLabel:n,result:l};return b.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(d))),r.onSuccess(d),l},setArea:r2,audioElementPlayCenter:Di,resumeAudioContext:function(){Di.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){Ije.processExternalMediaAEC(e)},registerExtensions:function(e){let t=D("PLUGIN_INFO")||[];e.forEach(r=>{"name"in r&&!pe(t).call(t,r.name)&&t.push(r.name);let n=r;n.__registered__=!0,n.logger.hookLog=b.extLog,n.reporter.hookApiInvoke=be.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach(i=>{n.parameters[i]=D(i)})}),X8("PLUGIN_INFO",t)},ChannelMediaRelayError:sp,ChannelMediaRelayEvent:Uc,ChannelMediaRelayState:Gi,RemoteStreamFallbackType:pMe,RemoteStreamType:hMe,ConnectionDisconnectedReason:Mt,AudienceLatencyLevelType:zDe,AREAS:Tt,preload:async function(e,t,r,n){return wZ(e,t,r,n)}});Object.defineProperties(yr,{onAudioAutoplayFailed:{get:()=>wo.onAudioAutoplayFailed,set:e=>{wo.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>wo.onAutoplayFailed,set:e=>{wo.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>yr._onSecurityPolicyViolation,set(e){yr._onSecurityPolicyViolation=e,kZ(e)}},__CLIENT_LIST__:{get:()=>D("SHOW_GLOBAL_CLIENT_LIST")?zl:[]}}),Oo.on(Cu.CAMERA_DEVICE_CHANGED,e=>{b.info("camera device changed",JSON.stringify(e)),yr.onCameraChanged&&yr.onCameraChanged(e),yr.safeEmit(oc.CAMERA_CHANGED,e)}),Oo.on(Cu.RECORDING_DEVICE_CHANGED,e=>{b.info("microphone device changed",JSON.stringify(e)),yr.onMicrophoneChanged&&yr.onMicrophoneChanged(e),yr.safeEmit(oc.MICROPHONE_CHANGED,e)}),Oo.on(Cu.PLAYOUT_DEVICE_CHANGED,e=>{b.debug("playout device changed",JSON.stringify(e)),yr.onPlaybackDeviceChanged&&yr.onPlaybackDeviceChanged(e),yr.safeEmit(oc.PLAYBACK_DEVICE_CHANGED,e)}),Di.onAutoplayFailed=()=>{b.info("detect audio element autoplay failed"),wo.onAudioAutoplayFailed&&wo.onAudioAutoplayFailed()},Ut.on("autoplay-failed",()=>{b.info("detect webaudio autoplay failed"),wo.onAudioAutoplayFailed&&wo.onAudioAutoplayFailed(),yr.safeEmit(oc.AUTOPLAY_FAILED)}),Ut.on(bn.STATE_CHANGE,(e,t)=>{b.info("audio context state changed: ".concat(t," => ").concat(e)),yr.onAudioContextStateChanged&&yr.onAudioContextStateChanged(e,t),yr.safeEmit(oc.AUDIO_CONTEXT_STATE_CHANGED,e,t)}),Lr.on(Pp.NETWORK_STATE_CHANGE,(e,t)=>{b.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))}),window&&(window.__ARTC__=yr);function Au(e,t,r){return e.on(t,r),()=>e.off(t,r)}function t5e(e){try{return e()}catch(t){console.error(t)}}function gT(e){return()=>e.forEach(t5e)}function r5e(e,t){let r=setTimeout(e,t);return()=>clearTimeout(r)}function p2(){let e,t,r;function n(){if(t){let l=t;t=void 0,l()}}async function i(){if(r){let l=r;r=void 0;try{await l()}catch(d){console.error(d)}}}async function o(l){e=!0,await i();try{r=await l()}catch(d){console.error(d)}e=!1,n()}async function a(){e=!0,await i(),e=!1,n()}function s(l){e?t=()=>o(l):o(l)}function c(){e?t=a:a()}return{run:s,dispose:c}}var a1=typeof document<"u"?T.useLayoutEffect:T.useEffect;function n5e(e){return e!=null&&typeof e.then=="function"}function Xy(){let e=T.useRef(!1);return T.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function i5e(){let e=Xy();function t(r,n){return new Promise(async(i,o)=>{try{let a=await r;e.current||i(a)}catch(a){e.current?n&&n(a):o(a)}})}return T.useCallback(t,[e])}function s1(e){let t=i5e(),[r,n]=T.useState();return a1(()=>{n5e(e)?t(e).then(n):n(e)},[e,t]),r}function yT(e,t){let r=T.useRef();T.useEffect(()=>{let{run:n,dispose:i}=r.current||(r.current=p2());return n(e),i},t)}function o5e(e,t){let r=e.split("."),n=t.split("."),i=Math.max(r.length,n.length);for(let o=0;o<i;o++){let a=parseInt(r[o]||"0"),s=parseInt(n[o]||"0");if(a>s)return 1;if(a<s)return-1}return 0}var c1=T.createContext(null);function a5e({client:e,children:t}){return h.jsx(c1.Provider,{value:e,children:t})}function s5e(e){return T.useContext(c1)}function Jy(e){let t=s5e();if(!t)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return t}T.createContext(null);function _m(e){let t=Jy(),[r,n]=T.useState(t?t.connectionState==="CONNECTED":!1);return T.useEffect(()=>{if(t){n(t.connectionState==="CONNECTED");let i;return gT([Au(t,"connection-state-change",o=>{i==null||i(),i=r5e(()=>n(o==="CONNECTED"),0)}),()=>i==null?void 0:i()])}else n(!1)},[t]),r}var ah=class extends Error{constructor(t,r){var e=(...SFe)=>(super(...SFe),xm(this,"rtcMethod"),xm(this,"rtcError"),xm(this,"name","AgoraRTCReactException"),this);e(typeof r=="string"?r:r.message),this.rtcMethod=t,this.rtcError=r}log(t){console[t](this)}};function c5e(e,t=!0,r){let n=Jy(),i=_m(),o=T.useRef(),[a,s]=T.useState(!1),[c,l]=T.useState(0),[d,u]=T.useState(null),p=Xy();return yT(async()=>{if(p.current||(u(null),l(0),s(!1)),t&&n){try{p.current||s(!0);let{appid:m,channel:g,token:y,uid:v}=typeof e=="function"?await e():e,E=await n.join(m,g,y,v);p.current||l(E)}catch(m){console.error(m),p.current||u(new ah("IAgoraRTCClient.join",m))}p.current||s(!1);let f=o.current||(o.current=p2());return gT([()=>{f.dispose()},()=>{f.run(()=>n.unpublish(n.localTracks))},()=>{for(let m of n.localTracks)m.isPlaying&&m.stop(),m.close();f.run(()=>n.leave())}])}},[t,r]),{data:c,isLoading:a,isConnected:i,error:d}}function l5e(e,t=!0,r){let n=Jy(),i=_m(),o=T.useRef([]),[a,s]=T.useState(!1),[c,l]=T.useState(null),d=Xy();return yT(async()=>{if(d.current||(s(!1),l(null)),!n||!i||!t)return;let u=e.filter(Boolean),p=g=>{let y=o5e(yr.VERSION,"4.18.2")>=0;return y||new ah("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),y?n.mode!=="live"||n.role!=="audience":!0},f=g=>o.current.some(y=>y&&y.getTrackId()===g.getTrackId()),m=g=>p()&&g.enabled&&t&&!f(g);for(let g=0;g<u.length;g++){let y=u[g];if(y&&m(y)){await n.unpublish(o.current.filter(v=>(v==null?void 0:v.trackMediaType)===y.trackMediaType));try{d.current||s(!0),await n.publish(y)}catch(v){console.error(v),d.current||l(new ah("IAgoraRTCClient.publish",v))}d.current||s(!1)}}o.current=u},[i,t,n,e]),{isLoading:a,error:c}}function d5e(e=!0,t={ANS:!0,AEC:!0},r){let n=_m(),[i,o]=T.useState(null),[a,s]=T.useState(!1),[c,l]=T.useState(null),d=Xy();return yT(async()=>{if(d.current||(s(!1),l(null)),n&&e&&!i){try{d.current||s(!0);let u=await yr.createMicrophoneAudioTrack(t);d.current||o(u)}catch(u){console.error(u),d.current||l(new ah("IAgoraRTC.createMicrophoneAudioTrack",u))}d.current||s(!1)}!n&&!d.current&&o(null)},[n,e]),{localMicrophoneTrack:i,isLoading:a,error:c}}function u5e(e=!0,t,r){let n=_m(),[i,o]=T.useState(null),[a,s]=T.useState(!1),[c,l]=T.useState(null),d=Xy();return yT(async()=>{if(d.current||(s(!1),l(null)),n&&e&&!i){try{d.current||s(!0);let u=await yr.createCameraVideoTrack(t);d.current||o(u)}catch(u){console.error(u),d.current||l(new ah("IAgoraRTC.createCameraVideoTrack",u))}d.current||s(!1)}!n&&!d.current&&o(null)},[n,e]),{localCameraTrack:i,isLoading:a,error:c}}function J8(e,t,r){let n=Jy(),i=t==="audio"?"audioTrack":"videoTrack",[o,a]=T.useState(e&&e[i]),s=_m(),c=T.useRef(),[l,d]=T.useState(!1),[u,p]=T.useState(null);return T.useEffect(()=>{if(!e||!s)return;let f=!1;f||p(null);let m=t==="audio"?"hasAudio":"hasVideo",g=e.uid,y=async(w,S)=>{if(w[i]&&n.remoteUsers.some(({uid:x})=>w.uid===x))try{f||d(!0),await n.unsubscribe(w,S)}catch(x){f||p(new ah("IAgoraRTCClient.unsubscribe",x)),console.error(x)}f||(a(void 0),d(!1))},v=async(w,S)=>{try{!w[i]&&n.remoteUsers.some(({uid:x})=>w.uid===x)&&(f||d(!0),await n.subscribe(w,S)),f||a(w[i])}catch(x){f||p(new ah("IAgoraRTCClient.subscribe",x)),console.error(x)}f||d(!1)},E=c.current||(c.current=p2());return!e[i]&&e[m]?E.run(()=>v(e,t)):a(e[i]),gT([()=>{f=!0,E.dispose()},Au(n,"user-published",(w,S)=>{w.uid===g&&S===t&&E.run(()=>v(w,t))}),Au(n,"user-unpublished",(w,S)=>{w.uid===g&&S===t&&E.run(()=>y(w,t))})])},[s,n,e,t,i]),{track:o,isLoading:l,error:u}}function h5e(e){let t=Jy(),[r,n]=T.useState(t?t.remoteUsers:[]);return T.useEffect(()=>{if(t){let i=()=>n(t.remoteUsers.slice());return gT([Au(t,"user-joined",i),Au(t,"user-left",i),Au(t,"user-published",i),Au(t,"user-unpublished",i)])}},[t]),r}var l1=T.createContext(void 0);function d1(e,t,r,n){let i=T.useContext(l1);T.useEffect(()=>{if(e)return n&&t?e.play(n,r||void 0):e.stop(),i?(i.onMount(e),()=>i.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,n,t,i,r])}function u1(e,t){let r=T.useContext(l1);a1(()=>{if(e)return t?e.play():e.stop(),r?(r.onMount(e),()=>r.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,t,r])}function p5e({track:e,play:t=!1,volume:r,disabled:n,muted:i,children:o}){let a=s1(e);return u1(a,t),T.useEffect(()=>{a&&r!=null&&a.setVolume(r)},[a,r]),T.useEffect(()=>{a&&n!=null&&a.setEnabled(!n).catch(console.warn)},[n,a]),T.useEffect(()=>{a&&i!=null&&a.setMuted(i).catch(console.warn)},[i,a]),o?h.jsx(h.Fragment,{children:o}):null}var h1={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},p1={width:"100%",height:"100%"},f2={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},vT=(e,t)=>T.useMemo(()=>({...e,...t}),[e,t]);function f5e({track:e,play:t,disabled:r,muted:n,style:i,videoPlayerConfig:o,...a}){let s=vT(p1,i),[c,l]=T.useState(null),d=s1(e);return d1(d,t,o,c),T.useEffect(()=>{d&&r!=null&&d.setEnabled(!r).catch(console.warn)},[r,d]),T.useEffect(()=>{d&&n!=null&&d.setMuted(n).catch(console.warn)},[n,d]),h.jsx("div",{...a,ref:l,style:s})}var m5e={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},g5e={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function f1({cover:e}){return h.jsx("div",{style:f2,children:typeof e=="string"?h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{...m5e,backgroundImage:`url(${e})`}}),h.jsx("img",{src:e,style:g5e})]}):e()})}function y5e({micOn:e,cameraOn:t,audioTrack:r,videoTrack:n,playAudio:i,playVideo:o,volume:a,cover:s,children:c,style:l,...d}){let u=vT(h1,l);return o=o??!!t,i=i??!!e,h.jsxs("div",{...d,style:u,children:[h.jsx(f5e,{disabled:!t,play:o,track:n}),h.jsx(p5e,{disabled:!e,play:i,track:r,volume:a}),s&&!t&&h.jsx(f1,{cover:s}),h.jsx("div",{style:f2,children:c})]})}function v5e({track:e,play:t=!1,playbackDeviceId:r,volume:n,children:i}){return u1(e,t),T.useEffect(()=>{e&&r!=null&&e.setPlaybackDevice(r).catch(console.warn)},[e,r]),T.useEffect(()=>{e&&n!=null&&e.setVolume(n)},[e,n]),i?h.jsx(h.Fragment,{children:i}):null}function E5e({track:e,play:t,style:r,videoPlayerConfig:n,...i}){let o=vT(p1,r),[a,s]=T.useState(null);return d1(e,t,n,a),h.jsx("div",{...i,ref:s,style:o})}function _5e({user:e,playVideo:t,playAudio:r,playbackDeviceId:n,volume:i,cover:o,style:a,children:s,videoPlayerConfig:c,...l}){let d=vT(h1,a),{track:u}=J8(e,"video"),{track:p}=J8(e,"audio");return t=t??(e==null?void 0:e.hasVideo),r=r??(e==null?void 0:e.hasAudio),h.jsxs("div",{...l,style:d,children:[h.jsx(E5e,{play:t,track:u,videoPlayerConfig:c}),h.jsx(v5e,{play:r,playbackDeviceId:n,track:p,volume:i}),o&&!t&&h.jsx(f1,{cover:o}),h.jsx("div",{style:f2,children:s})]})}var b5e=class{constructor(){xm(this,"appType",1001);yr.setAppType(this.appType)}};new b5e;var w5e=yr;const pO=w5e.createClient({mode:"rtc",codec:"vp8"});function S5e(){const e=new URLSearchParams(location.search),t=e.get("doctorId"),r=e.get("patientId");return h.jsxs("div",{className:"w-screen h-screen flex flex-col gap-2",children:[h.jsx("h1",{className:"w-full h-auto bg-blue-500 p-2 text-lg font-medium flex justify-center shadow-lg",children:"Consultation"}),h.jsx("div",{className:"flex flex-1 w-full p-2",children:h.jsx(a5e,{client:pO,children:h.jsx("div",{className:"w-full h-[80vh]",children:h.jsx(T5e,{doctorId:t,patientId:r})})})})]})}function T5e(e){const t="7b2118df626f4986907f6d989f14fa9d",r=_m(),[n,i]=T.useState(!0),[o,a]=T.useState(!0),[s,c]=T.useState(!0),{localMicrophoneTrack:l}=d5e(o),{localCameraTrack:d}=u5e(s),{doctorId:u,patientId:p}=e;c5e({appid:t,channel:`consulation_${u}_${p}`,token:null},n),l5e([l,d]),T.useEffect(()=>{pO.on("user-joined",m=>{console.log("userrr",m)}),pO.on("user-published",(m,g)=>{console.log("user published",m.uid,g)})},[]);const f=h5e();return h.jsx("div",{className:"w-full h-[88vh]  flex ",children:r&&h.jsxs("div",{className:"w-screen h-full flex gap-2 ",children:[h.jsxs("div",{className:"w-[80%] h-full grid grid-cols-1 ",children:[f.map((m,g)=>h.jsx("div",{className:"w-full h-full ",children:h.jsx(_5e,{user:m,className:"rounded-lg  "},g)},g)),h.jsx("div",{className:"h-full w-full px-5 py-2 flex flex-col justify-end",children:h.jsx(C5e,{setCameraOn:c,setMicOn:a,cameraOn:s,micOn:o,setCalling:i})})]}),h.jsx("div",{className:"w-[20%] h-full flex flex-col justify-end",children:h.jsx("div",{className:"w-full h-[30vh]",children:h.jsx(y5e,{cameraOn:s,micOn:o,videoTrack:d,audioTrack:l,className:"rounded-lg",children:h.jsx("samp",{className:"pr-2 flex justify-end text-white text-2xl",children:"you"})})})})]})})}function C5e(e){const{setMicOn:t,setCameraOn:r,micOn:n,cameraOn:i,setCalling:o}=e;return h.jsx("div",{className:"w-full h-[10vh] bg-white bg-opacity-20 rounded-lg  flex flex-between gap-2 ",children:h.jsxs("div",{className:"w-full h-full flex justify-center gap-4 p-4",children:[h.jsx("div",{className:`callButton ${n?"bg-red-500":"bg-white"}  w-[10%] h-full flex items-center justify-center`,onClick:a=>t(!n),children:h.jsx(Zbe,{})}),h.jsx("button",{className:`callButton ${i?"bg-red-500":"bg-white"}  w-[10%] h-full flex items-center justify-center`,onClick:a=>r(!i),children:h.jsx(Q_e,{})}),h.jsx("button",{type:"button",className:"callButton bg-red-500  w-[10%] h-full flex items-center justify-center",onClick:a=>o(s=>!s),children:h.jsx(Jbe,{})})]})})}function R5e(){const{firstName:e}=Ti(t=>t.patient);return h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:h.jsxs("div",{className:"doctor details flex flex-col gap-4",children:[h.jsxs("h1",{className:"w-[60%] h-[20vh] flex item-center p-2 rounded-lg bg-red-400 ",children:[`you have a meeting ${e}`,"  "]}),h.jsx("div",{className:"content w-full h-full flex"})]})})})}function I5e(){return h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full flex flex-col p-2",children:h.jsxs("div",{className:"meetingAlert w-full h-full flex flex-col gap-2",children:[h.jsx("h2",{className:"w-[80%] h-[8vh] text-lg font-medium flex items-center pl-10 bg-blue-500",children:"Notifications"}),h.jsx("div",{className:"alerts flex flex-col hap-2",children:h.jsx(R5e,{})})]})})})}at.extend(js);function x5e(e){var n,i,o,a,s,c;const{booking:t}=e,r=qr();return console.log("test date",at().add(2,"hour").isBefore(at(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))),h.jsx("div",{className:"w-full h-full ",children:h.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[h.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:h.jsx("img",{src:(n=t==null?void 0:t.patientId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),h.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[h.jsx("div",{className:"w-full h-auto",children:h.jsx("h4",{children:(i=t==null?void 0:t.patientId)==null?void 0:i.firstName})}),h.jsx("div",{className:"location w-full h-auto",children:h.jsxs("div",{className:"flex gap-4 items-start",children:[h.jsx(om,{}),h.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[h.jsx("span",{className:"flex items-center",children:(a=(o=t==null?void 0:t.patientId)==null?void 0:o.addressId)==null?void 0:a.place}),h.jsx("span",{className:"flex items-center",children:(c=(s=t==null?void 0:t.patientId)==null?void 0:s.addressId)==null?void 0:c.district})]})]})})]}),h.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[h.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[h.jsx(Dy,{}),h.jsx("span",{children:`Completed On ${t==null?void 0:t.slotDate} ${at(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),h.jsxs("div",{className:"w-full h-auto flex flex-between gap-4",children:[h.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:l=>r(`/doctor/bookings/prescription/${t.patientId.userId}/${t._id}`),children:"Add Prescription"}),h.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",onClick:l=>r(`/doctor/bookings/labtest/${t.patientId.userId}/${t._id}`),children:"Request Lab Tests"}),h.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",onClick:l=>r(`/doctor/bookings/medicine/${t.patientId._id}/${t._id}`),children:"Request Medicines"})]})]})]})})}function A5e(){const[e,t]=T.useState([]),r=async()=>{const n=await Qwe();t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-4 p-5",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[90%] h-[25vh]",children:h.jsx(x5e,{booking:n})},i))})})}const m2="https://hcompanion.onrender.com/api",g2=sessionStorage.getItem("token"),N5e=async({patientId:e})=>{var t,r,n;try{return(await Ee.post(`${m2}/doctor/patient/getDetails`,{patientId:e},{headers:{authorization:`bearer ${g2}`}})).data.patientDetails}catch(i){return console.log(i),((t=i==null?void 0:i.response)==null?void 0:t.status)=="500"&&((n=(r=i==null?void 0:i.response)==null?void 0:r.data)!=null&&n.errorServer)&&re.fire("Server Error","","error"),!1}},O5e=async({patientId:e,disease:t,prescription:r,bookingId:n})=>{var i,o,a;try{const s=await Ee.post(`${m2}/doctor/patient/prescription/add`,{patientId:e,disease:t,prescription:r,bookingId:n},{headers:{authorization:`bearer ${g2}`}});return!0}catch(s){return console.log(s),((i=s==null?void 0:s.response)==null?void 0:i.status)=="500"&&((a=(o=s==null?void 0:s.response)==null?void 0:o.data)!=null&&a.errorServer)&&re.fire("Server Error","","error"),!1}},k5e=async({bookingId:e})=>{var t,r,n;try{const i=await Ee.post(`${m2}/doctor/patient/prescription/onLoad/view`,{bookingId:e},{headers:{authorization:`bearer ${g2}`}});return console.log(i),i.data.prescription}catch(i){return console.log(i),((t=i==null?void 0:i.response)==null?void 0:t.status)=="500"&&((n=(r=i==null?void 0:i.response)==null?void 0:r.data)!=null&&n.errorServer)&&re.fire("Server Error","","error"),!1}};function P5e(){const[e,t]=T.useState(void 0),[r,n]=T.useState(void 0),{patientId:i,bookingId:o}=Hf(),a=Mn({initialValues:{disease:"",prescription:""},validationSchema:"",onSubmit:async(c,l)=>{await O5e({...c,patientId:r,bookingId:o})&&re.fire("Added Prescription","","success")}}),s=async()=>{const c=await N5e({patientId:i});n(c._id);const l=await k5e({bookingId:o});l&&(a.setFieldValue("disease",l.disease),a.setFieldValue("prescription",l.prescription)),t(c)};return T.useEffect(()=>{s()},[]),h.jsx("div",{className:"w-full h-full flex ",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:h.jsxs("div",{className:"patient profile w-full h-full flex flex-col gap-4",children:[h.jsxs("div",{className:"w-full h-[10vh] flex gap-10 items-center",children:[h.jsx("div",{className:"w-[5vw] h-[10vh] ",children:h.jsx("img",{src:e==null?void 0:e.profileImage,alt:"patientprofile",className:"w-full h-full rounded-full"})}),h.jsx("div",{className:"details w-full h-full flex flex-col justify-center ",children:h.jsx("h1",{className:"w-full h-[70%] pl-10 bg-blue-500 flex items-center text-lg font-medium",children:`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName}`})})]}),h.jsx("div",{className:"prescription w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex justify-center bg-black bg-opacity-30",children:h.jsxs("form",{onSubmit:a.handleSubmit,className:"w-[70%] h-full p-4 flex flex-col gap-5",children:[h.jsx("h1",{className:"w-full h-[5vh] pl-10 bg-orange-500 flex items-center text-lg font-medium",children:"Prescription"}),h.jsx(Ue,{variant:"filled",label:"disease",name:"disease",value:a.values.disease,onChange:a.handleChange,onBlur:a.handleBlur}),h.jsx("textarea",{rows:"10",placeholder:"Prescription",name:"prescription",value:a.values.prescription,onChange:a.handleChange,onBlur:a.handleBlur}),h.jsx("button",{className:"bg-orange-500 w-[50%] h-[7vh]",type:"submit",children:"Add"})]})})})]})})})}const m1="https://hcompanion.onrender.com/api",D5e=sessionStorage.getItem("token"),L5e=async()=>{try{const e=await Ee.get(`${m1}/patient/medicines/getAllMedicines`);return console.log(e),e.data.medicines}catch(e){console.log(e)}},M5e=async({patientId:e,pharmacyInventoryId:t,bookingId:r})=>{var n,i,o;try{const a=await Ee.post(`${m1}/doctor/patient/medicine/request`,{patientId:e,pharmacyInventoryId:t,bookingId:r},{headers:{Authorization:`bearer ${D5e}`}});return console.log(a),!0}catch(a){return console.log(a),((n=a==null?void 0:a.response)==null?void 0:n.status)=="500"&&((o=(i=a==null?void 0:a.response)==null?void 0:i.data)!=null&&o.errorServer)&&re.fire("Server Error","","error"),!1}};function j5e(e){const{medicine:t,patientId:r,bookingId:n}=e,i=async(o,a)=>{await M5e({patientId:r,bookingId:n,pharmacyInventoryId:a._id})&&re.fire("Requested Medicine","","success")};return h.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:h.jsxs("div",{className:"h-full w-full flex flex-col ",children:[h.jsx("div",{className:"w-full h-[50%] ",children:h.jsx("img",{src:t.medicineImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[h.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[h.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t.medicineId.medicineName}),h.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:h.jsx("div",{className:"price w-full h-[5vh]",children:h.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[h.jsx(im,{})," ",t.sellingPrice]})})})]}),h.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:h.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:o=>i(o,t),children:"Prescribe Medicine"})})]})]})})}function U5e(){qr();const{patientId:e,bookingId:t}=Hf(),[r,n]=T.useState([]),i=async()=>{const o=await L5e();o.length>0&&await n(o)};return T.useEffect(()=>{i()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"medicinesList w-full h-full flex flex px-20 py-5 ",children:h.jsx("div",{className:"w-full h-full p-4 grid grid-cols-3 justify-items-center gap-y-10 ",children:r&&r.length>0?r.map((o,a)=>h.jsx("div",{className:"w-auto h-[40vh] flex flex-col cursor-pointer hover:bg-slate-400 rounded-lg",children:h.jsx(j5e,{medicine:o,patientId:e,bookingId:t},o._id)},o._id)):h.jsx("span",{className:"text-lg font-medium",children:"No Medicines.....:)"})})})})}function F5e(e){const{order:t}=e,r=async(n,i)=>{const o=await YP({amount:t.doctorId.bookingPrice});if(o){const a=Wbe({order:o,medicineOrder:t});await new Razorpay(a).open()}};return h.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:h.jsxs("div",{className:"h-full w-full flex flex-col ",children:[h.jsx("div",{className:"w-full h-[50%] ",children:h.jsx("img",{src:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[h.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[h.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t.pharmacyInventoryId.medicineId.medicineName}),h.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:h.jsx("div",{className:"price w-full h-[5vh]",children:h.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[h.jsx(im,{})," ",t.pharmacyInventoryId.sellingPrice]})})})]}),h.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:h.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:n=>r(n,t.pharmacyInventoryId._id),children:"Order Medicine"})})]})]})})}function V5e(){const[e,t]=T.useState([]),r=async()=>{const n=await rbe();console.log(n),n&&t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-2",children:[h.jsx("h1",{className:"w-full h-[6vh] bg-blue-500 flex items-center pl-10",children:"Prescribed Medicines"}),h.jsx("div",{className:"w-full h-full flex gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>h.jsx("div",{className:"w-auto h-auto flex",children:h.jsx(F5e,{order:n})},i))})]})})}function B5e(){return h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[h.jsx(Sr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"requests",children:"Requests"}),h.jsx(Sr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"ordered",children:"Ordered"})]})})}function $5e(){return h.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[h.jsx("div",{className:"header w-full h-[5vh]",children:h.jsx(B5e,{})}),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx(Fi,{})})]})}function H5e(e){var r,n;const{order:t}=e;return h.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-xl rounded-lg border  ",children:h.jsxs("div",{className:"h-full w-full flex flex-col ",children:[h.jsx("div",{className:"w-full h-[50%] ",children:h.jsx("img",{src:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[h.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[h.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:(n=(r=t==null?void 0:t.pharmacyInventoryId)==null?void 0:r.medicineId)==null?void 0:n.medicineName}),h.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:h.jsx("div",{className:"price w-full h-[5vh]",children:h.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[h.jsx(im,{})," ",t.pharmacyInventoryId.sellingPrice]})})})]}),h.jsx("div",{className:"w-full h-[8vh] flex  px-2 py-1 mb-2 ",children:h.jsx("h2",{className:"text-md font-bold text-emerald-500 w-full p-5 bg-blue-100",children:(t==null?void 0:t.orderStatus)=="1"?"Pending Delivery":"Delivered"})})]})]})})}function W5e(){const[e,t]=T.useState([]),r=async()=>{const n=await ibe();console.log(n),n&&t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:h.jsx("div",{className:"w-full h-full grid grid-cols-3 gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>h.jsx("div",{className:"w-auto h-auto flex",children:h.jsx(H5e,{order:n})},i))})})})}function G5e(){return h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[h.jsx(Sr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"requested",children:"Received"}),h.jsx(Sr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"delivered",children:"Delivered"})]})})}function z5e(){return h.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[h.jsx("div",{className:"w-full h-[8vh] p-5",children:h.jsx(G5e,{})}),h.jsx("div",{className:"w-full h-full mt-5 pb-2",children:h.jsx(Fi,{})})]})}const y2="https://hcompanion.onrender.com/api",v2=sessionStorage.getItem("token"),K5e=async()=>{try{const e=await Ee.get(`${y2}/pharmacy/order/medicines/requests`,{headers:{Authorization:`bearer ${v2}`}});return console.log(e),e.data.medicines}catch(e){return console.log(e),!1}},q5e=async({pharmacyInventoryId:e})=>{try{const t=await Ee.post(`${y2}/pharmacy/order/medicines/deliver`,{pharmacyInventoryId:e},{headers:{Authorization:`bearer ${v2}`}});return!0}catch(t){return console.log(t),!1}},Y5e=async()=>{try{const e=await Ee.get(`${y2}/pharmacy/order/medicines/delivered`,{headers:{Authorization:`bearer ${v2}`}});return console.log("delivered Medicines",e),e.data.medicines}catch(e){return console.log(e),!1}};function X5e(e){const{order:t}=e,r=async n=>{await q5e({pharmacyInventoryId:t.pharmacyInventoryId})&&re.fire("Updated as Delivered","","success")};return h.jsx("div",{className:"w-full h-full flex flex-col shadow-xl rounded-lg border ",children:h.jsxs("div",{className:"h-full w-full flex gap-2 ",children:[h.jsx("div",{className:"w-[30%] h-full ",children:h.jsx("img",{src:t==null?void 0:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-full flex flex-1 flex-col gap-4 mt-2 p-1 ",children:[h.jsxs("div",{className:"w-full h-auto flex gap-10 items-center p-2 bg-blue-500",children:[h.jsx("div",{className:"w-[3vw] h-[6vh]",children:h.jsx("img",{src:t.patientId.profileImage,alt:"",className:"w-full h-full rounded-full"})}),h.jsxs("div",{className:"w-auto h-auto",children:[h.jsx("h2",{className:"text-lg font-medium",children:`${t.patientId.firstName} ${t.patientId.lastName}`}),h.jsx("h2",{})]})]}),h.jsx("div",{className:"content w-full h-[10vh] flex flex-col pl-4 gap-2  ",children:h.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t==null?void 0:t.pharmacyInventoryId.medicineId.medicineName})}),h.jsx("div",{className:"w-full h-[8vh] flex  px-2 py-1 mb-2 ",children:h.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:n=>r(),children:"Delivered"})})]})]})})}function J5e(){const[e,t]=T.useState([]),r=async()=>{const n=await K5e();n&&t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex p-2",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-5",children:h.jsx("div",{className:"orders w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full grid grid-cols-1",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[80%] h-[30vh]",children:h.jsx(X5e,{order:n})},i))})})})})}function Q5e(e){const{order:t}=e;return h.jsx("div",{className:"w-full h-full flex flex-col shadow-xl rounded-lg border ",children:h.jsxs("div",{className:"h-full w-full flex gap-2 ",children:[h.jsx("div",{className:"w-[30%] h-full ",children:h.jsx("img",{src:t==null?void 0:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-full flex flex-1 flex-col gap-4 mt-2 p-1 ",children:[h.jsxs("div",{className:"w-full h-auto flex gap-10 items-center p-2 bg-blue-500",children:[h.jsx("div",{className:"w-[3vw] h-[6vh]",children:h.jsx("img",{src:t.patientId.profileImage,alt:"",className:"w-full h-full rounded-full"})}),h.jsxs("div",{className:"w-auto h-auto",children:[h.jsx("h2",{className:"text-lg font-medium",children:`${t.patientId.firstName} ${t.patientId.lastName}`}),h.jsx("h2",{})]})]}),h.jsx("div",{className:"content w-full h-[10vh] flex flex-col pl-4 gap-2  ",children:h.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t==null?void 0:t.pharmacyInventoryId.medicineId.medicineName})}),h.jsx("div",{className:"w-full h-[8vh] flex  px-2 py-1 mb-2 ",children:h.jsx("h2",{className:"text-md font-bold text-emerald-500 w-full p-5 bg-blue-100",children:"Delivered"})})]})]})})}function Z5e(){const[e,t]=T.useState([]),r=async()=>{const n=await Y5e();n&&t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex p-2",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-5",children:h.jsx("div",{className:"orders w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full grid grid-cols-1",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[80%] h-[30vh]",children:h.jsx(Q5e,{order:n})},i))})})})})}const E2="https://hcompanion.onrender.com/api",_2=sessionStorage.getItem("token"),e4e=async()=>{var e,t,r;try{return(await Ee.get(`${E2}/doctor/patient/test/allTests`,{headers:{Authorization:`bearer ${_2}`}})).data.tests}catch(n){return console.log(n),((e=n==null?void 0:n.response)==null?void 0:e.status)=="500"&&((r=(t=n==null?void 0:n.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Server Error","","error"),!1}},t4e=async({testId:e})=>{try{const t=await Ee.post(`${E2}/doctor/patient/test/testDetails`,{testId:e},{headers:{Authorization:`bearer ${_2}`}});return console.log(t.data),t.data.testAndLabs}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?re.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):t.status=="401"?re.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&re.fire({icon:"warning",text:"Test can't be found at database"}),!1}},r4e=async({labTestId:e,patientId:t,bookingId:r})=>{var n,i;try{const o=await Ee.post(`${E2}/doctor/patient/test/request`,{labTestId:e,patientId:t,bookingId:r},{headers:{Authorization:`bearer ${_2}`}});return!0}catch(o){return console.log(o),o.status=="500"&&((i=(n=o==null?void 0:o.response)==null?void 0:n.data)!=null&&i.errorServer)?re.fire({icon:"error",text:"Server Issue"}):o.status=="400"&&o.response.data.invalidToken?re.fire({icon:"warning",text:"Log In"}):o.status=="401"?re.fire({icon:"warning",text:"Log In"}):o.status=="404"&&o.response.data.errorTestPresent?re.fire({icon:"warning",text:"Test can't be found at database"}):o.status=="404"&&o.response.data.errorTestOrdered&&re.fire({icon:"warning",text:"Test Already Ordered"}),!1}};function n4e(e){var o;const{test:t,patientId:r,bookingId:n}=e,i=async a=>{await r4e({labTestId:t._id,patientId:r,bookingId:n})&&re.fire("Requested Test for the patient","","success")};return h.jsx("div",{className:"flex w-full h-full ",children:h.jsxs("div",{className:"flex h-full w-[40vw] gap-6 bg-white  border rounded-lg p-4 shadow-lg",children:[h.jsx("div",{className:"image w-[20%] h-[90%]",children:h.jsx("img",{src:"/normalUser.png",alt:"image",className:"object-fit w-full h-full"})}),h.jsxs("div",{className:"details h-full w-full flex flex-1 flex-col gap-4 ",children:[h.jsx("h1",{children:(o=t==null?void 0:t.labId)==null?void 0:o.userId.username}),h.jsx("div",{className:"location"}),h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx(om,{}),h.jsx("span",{children:"Koovappally"})]}),h.jsxs("div",{className:"flex gap-2 w-full h-auto",children:[(t==null?void 0:t.atHome)&&h.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-orange-400 p-3 rounded-md flex gap-4 items-center",children:[h.jsx("span",{children:" Home Service"}),h.jsxs("span",{className:"flex gap-2 items-center",children:[h.jsx(Hb,{}),h.jsx("h6",{children:t==null?void 0:t.priceHome})]})]}),(t==null?void 0:t.atLab)&&h.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-blue-400 p-3 rounded-md flex gap-4 items-center",children:[h.jsx("span",{children:" Lab Service"}),h.jsxs("span",{className:"flex gap-2 items-center",children:[h.jsx(Hb,{}),h.jsx("h6",{children:t==null?void 0:t.priceLab})]})]}),h.jsx("button",{className:"w-[30%] text-white text-md font-medium bg-emerald-400 p-3 rounded-md flex gap-4 items-center",onClick:a=>i(),children:"Request Test"})]})]})]})})}function i4e(){const[e,t]=T.useState([]),[r,n]=T.useState(void 0),{patientId:i,bookingId:o,testId:a}=Hf();console.log("testId",a);const s=async()=>{const c=await t4e({testId:a});t(c),n(c[0].testId)};return T.useEffect(()=>{s()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"screen w-full h-full flex  gap-2 justify-between ",children:[h.jsxs("div",{className:"w-[56%] h-[80vh] flex gap-10 border p-4 shadow-lg items-center bg-emerald-400 bg-opacity-10 bg-blur-sm",children:[h.jsx("div",{className:"image h-[40vh] w-[70%]",children:h.jsx("img",{src:r==null?void 0:r.testImage,alt:"testImage",className:"w-full h-full object-fit"})}),h.jsxs("div",{className:"testDetails flex flex-col gap-2 w-full h-full justify-center",children:[h.jsxs("div",{className:"description w-full h-[10vh] border shadow-lg flex flex-col gap-2 px-1",children:[h.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Name"}),h.jsx("span",{className:"text-lg font-medium",children:r==null?void 0:r.testName.toUpperCase()})]}),h.jsxs("div",{className:"testDescription flex flex-col gap-2 border w-full h-[40vh] shadow-lg px-1",children:[h.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Description"}),h.jsx("span",{className:"h-[10vh] p-2",children:r==null?void 0:r.testDescription})]})]})]}),h.jsxs("div",{className:"laboratorys bg-black bg-opacity-10 p-3 flex flex-col gap-4 w-auto h-full border  ",children:[h.jsx("h2",{className:"text-lg text-white  font-medium flex justify-center bg-blue-500 py-2",children:"Labs where the service available"}),h.jsx("div",{className:"labs flex flex-col gap-4 h-full w-full overflow-y-auto",children:(e==null?void 0:e.length)>0&&e.map((c,l)=>h.jsx("div",{className:"w-full h-auto",children:h.jsx(n4e,{test:c,patientId:i,bookingId:o})},l))})]})]})})}function o4e(e){const{test:t,patientId:r,bookingId:n}=e;return h.jsx("div",{className:"flex w-auto h-auto border rounded-lg shadow-lg shadow-emerald-300 hover:bg-black hover:bg-opacity-10 py-5 px-3 cursor-pointer   ",children:h.jsxs("div",{className:"w-[30vw] h-auto flex flex-row gap-5 ",children:[h.jsx("div",{className:"image w-[50%] h-full flex justify-center items-center",children:h.jsx("img",{src:t==null?void 0:t.testImage,alt:"testImage",className:"object-cover w-full h-[70%]"})}),h.jsxs("div",{className:"w-full h-full content flex flex-col gap-5 bg-black bg-opacity-10 p-4",children:[h.jsx("h2",{className:"flex justify-center text-white bg-blue-500 py-3 font-medium",children:t==null?void 0:t.testName}),h.jsx("textarea",{name:"testDescription",id:"id_testDescripion",value:t==null?void 0:t.testDescription,rows:"10",className:"flex text-sm cursor-pointer border-0",disabled:!0})]})]})})}function a4e(){const[e,t]=T.useState([]),r=qr(),{patientId:n,bookingId:i}=Hf(),o=async()=>{const a=await e4e();t(a)};return T.useEffect(()=>{o()},[]),h.jsx("div",{className:"flex flex-col w-full h-full",children:h.jsx("div",{className:"w-full h-full grid grid-cols-2 gap-2 justify-items-start",children:(e==null?void 0:e.length)>0&&e.map((a,s)=>h.jsx("div",{className:"w-auto h-auto cursor-pointer",onClick:()=>r(`/doctor/bookings/labtest/testDetails/${n}/${i}/${a._id}`),children:h.jsx(o4e,{test:a,patientId:n,bookingId:i})},s))})})}function s4e(){return h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[h.jsx(Sr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"requests",children:"Requests"}),h.jsx(Sr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"ordered",children:"Ordered"})]})})}function c4e(){return h.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[h.jsx("div",{className:"header w-full h-[5vh]",children:h.jsx(s4e,{})}),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx(Fi,{})})]})}function l4e(e){var n,i,o,a,s,c,l,d,u,p,f,m;const{testOrder:t}=e;console.log(t);const r=async(g,y)=>{const v=await YP({amount:100});if(v){const E=Gbe({order:v,testOrder:t});await new Razorpay(E).open()}};return h.jsx("div",{className:"w-full h-full flex ",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[h.jsxs("div",{className:"w-full h-auto flex gap-2",children:[h.jsx("div",{className:"img w-[30%] h-full",children:h.jsx("img",{src:(i=(n=t==null?void 0:t.labTestId)==null?void 0:n.testId)==null?void 0:i.testImage,alt:"test image",className:"w-full h-full object-fit"})}),h.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[h.jsx("div",{className:"w-full h-auto flex ",children:h.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[h.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(a=(o=t==null?void 0:t.labTestId)==null?void 0:o.testId)==null?void 0:a.testName}),h.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),h.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[h.jsx("div",{className:"description w-[60%] bg-black bg-opacity-20 p-2",children:h.jsx("h2",{className:"w-full h--full",children:(c=(s=t==null?void 0:t.labTestId)==null?void 0:s.testId)==null?void 0:c.testDescription})}),h.jsxs("div",{className:"pharmacy w-[40%] flex flex-col gap-2 p-1",children:[h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((d=(l=t==null?void 0:t.labTestId)==null?void 0:l.labId)==null?void 0:d.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(p=(u=t==null?void 0:t.labTestId)==null?void 0:u.labId)==null?void 0:p.laboratoryName})]}),h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(DS,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:"koovappally"})]})}),h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((f=t==null?void 0:t.doctorId)==null?void 0:f.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`prescribed by the doctor ${(m=t==null?void 0:t.doctorId)==null?void 0:m.firstName}`})]})]})]})]})]}),h.jsx("div",{className:"w-full h-[5vh] flex gap-2",children:h.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",onClick:g=>r(g,t._id),children:"Order Test"})})]})})}function d4e(){const[e,t]=T.useState([]),r=async()=>{const n=await Ube();console.log(n),n&&await t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"requestedTests flex flex-col gap-4",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[90%] h-auto",children:h.jsx(l4e,{testOrder:n})},i))})})})}function u4e(){return h.jsx("div",{className:"w-full h-full flex",children:h.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[h.jsx(Sr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"test/ordered",children:"Received"}),h.jsx(Sr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"test/completed",children:"Serviced"})]})})}function h4e(){return h.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[h.jsx("div",{className:"w-full h-[8vh] p-5",children:h.jsx(u4e,{})}),h.jsx("div",{className:"w-full h-full mt-5 pb-2",children:h.jsx(Fi,{})})]})}function p4e(e){var n,i,o,a,s,c,l,d,u,p,f,m,g,y,v,E;const{testOrder:t}=e;console.log(t);const r=async(w,S)=>{await Nwe({testOrderId:S})&&re.fire("Successfully Updated as completed","","success")};return h.jsx("div",{className:"w-full h-full flex ",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[h.jsxs("div",{className:"w-full h-auto flex gap-2",children:[h.jsx("div",{className:"img w-[30%] h-full",children:h.jsx("img",{src:(i=(n=t==null?void 0:t.labTestId)==null?void 0:n.testId)==null?void 0:i.testImage,alt:"test image",className:"w-full h-full object-fit"})}),h.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[h.jsx("div",{className:"w-full h-auto flex ",children:h.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[h.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(a=(o=t==null?void 0:t.labTestId)==null?void 0:o.testId)==null?void 0:a.testName}),h.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),h.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[h.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:h.jsx("h2",{className:"w-full h--full",children:(c=(s=t==null?void 0:t.labTestId)==null?void 0:s.testId)==null?void 0:c.testDescription})}),h.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((d=(l=t==null?void 0:t.labTestId)==null?void 0:l.labId)==null?void 0:d.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(p=(u=t==null?void 0:t.labTestId)==null?void 0:u.labId)==null?void 0:p.laboratoryName})]}),h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((f=t==null?void 0:t.patientId)==null?void 0:f.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Ordered by ${(m=t==null?void 0:t.patientId)==null?void 0:m.firstName}`})]})]}),h.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(DS,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:(y=(g=t==null?void 0:t.patientId)==null?void 0:g.addressId)==null?void 0:y.place})]})}),h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(GP,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:(E=(v=t==null?void 0:t.patientId)==null?void 0:v.userId)==null?void 0:E.phone})]})})]})]})]})]}),h.jsxs("div",{className:"w-full h-[5vh] flex gap-2",children:[h.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",onClick:w=>r(w,t._id),children:"Completed"}),h.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",children:"Upload test Result"})]})]})})}function f4e(){const[e,t]=T.useState([]),r=async()=>{const n=await Awe();t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"orders w-full h-full flex flex-col gap-5 p-5",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[90%] h-auto",children:h.jsx(p4e,{testOrder:n})},i))})})})}function m4e(e){var a,s,c,l,d,u,p,f,m,g,y,v,E,w,S,x;const[t,r]=T.useState(!1),{testOrder:n}=e;console.log(n);const i=qr(),o=async()=>{await Kq({testOrderId:n._id})&&r(!0)};return T.useEffect(()=>{o()},[]),h.jsx("div",{className:"w-full h-full flex ",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[h.jsxs("div",{className:"w-full h-auto flex gap-2",children:[h.jsx("div",{className:"img w-[30%] h-full",children:h.jsx("img",{src:(s=(a=n==null?void 0:n.labTestId)==null?void 0:a.testId)==null?void 0:s.testImage,alt:"test image",className:"w-full h-full object-fit"})}),h.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[h.jsx("div",{className:"w-full h-auto flex ",children:h.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[h.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(l=(c=n==null?void 0:n.labTestId)==null?void 0:c.testId)==null?void 0:l.testName}),h.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${n==null?void 0:n.bookingId._id}`})]})}),h.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[h.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:h.jsx("h2",{className:"w-full h--full",children:(u=(d=n==null?void 0:n.labTestId)==null?void 0:d.testId)==null?void 0:u.testDescription})}),h.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((f=(p=n==null?void 0:n.labTestId)==null?void 0:p.labId)==null?void 0:f.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(g=(m=n==null?void 0:n.labTestId)==null?void 0:m.labId)==null?void 0:g.laboratoryName})]}),h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((y=n==null?void 0:n.patientId)==null?void 0:y.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Ordered by ${(v=n==null?void 0:n.patientId)==null?void 0:v.firstName}`})]})]}),h.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(DS,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:(w=(E=n==null?void 0:n.patientId)==null?void 0:E.addressId)==null?void 0:w.place})]})}),h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(GP,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:(x=(S=n==null?void 0:n.patientId)==null?void 0:S.userId)==null?void 0:x.phone})]})})]})]})]})]}),h.jsx("div",{className:"w-full h-[5vh] flex gap-2",children:h.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",onClick:O=>{var L;return i(`uploadResult?patientId=${n.patientId._id}&testOrderId=${n._id}&bookingId=${(L=n==null?void 0:n.bookingId)==null?void 0:L._id}&doctorId=${n.doctorId._id}`)},children:t?"View Uploaded result":"Upload test Result"})})]})})}function g4e(){const[e,t]=T.useState([]),r=async()=>{const n=await Owe();t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"orders w-full h-full flex flex-col gap-5 p-5",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[90%] h-auto",children:h.jsx(m4e,{testOrder:n})},i))})})})}function y4e(){var l,d;const e=qr(),t=new URLSearchParams(location.search),r=t.get("testOrderId"),n=t.get("patientId"),i=t.get("doctorId");console.log("doctorId",i);const[o,a]=T.useState(void 0),s=Mn({initialValues:{testResultDescription:""},validationSchema:Dwe,onSubmit:async(u,p)=>{await Pwe({...u,testOrderId:r,patientId:n,doctorId:i})&&(re.fire("Result uploaded successfully","","success"),e("/laboratory/order/test/completed"))}}),c=async()=>{const u=await kwe({testOrderId:r}),p=await Kq({testOrderId:r});p&&s.setFieldValue("testResultDescription",p.testResultDescription),a(u)};return T.useEffect(()=>{c()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-2 p-10",children:h.jsxs("form",{onSubmit:s.handleSubmit,className:"flex flex-col gap-10",children:[h.jsx("h1",{className:"w-full h-[8vh] p-2 flex items-center justify-center text-white text-lg font-bold bg-blue-500",children:`Test Result for the Request from ${(l=o==null?void 0:o.doctorId)==null?void 0:l.firstName} for ${(d=o==null?void 0:o.patientId)==null?void 0:d.firstName}`}),h.jsx("textarea",{rows:15,name:"testResultDescription",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.testResultDescription}),s.touched.testResultDescription&&s.errors.testResultDescription?h.jsx("span",{className:"text-red",children:s.errors.testResultDescription}):"",h.jsx("div",{className:"w-full h-[5vh] flex",children:h.jsx("button",{className:"w-full h-full flex items-center justify-center bg-orange-500",children:"Upload Result"})})]})})})}function v4e(e){var n,i,o,a,s,c,l;const{booking:t}=e;qr();const r=async(d,u,p,f)=>{d.preventDefault(),await re.fire({showCancelButton:!0,confirmButtonText:"Proceed Canceling",text:"Do you want to cancel the booking",icon:"question"}).then(async m=>{m.isConfirmed&&await Xq({startTime:u,slotDate:p,doctorId:f})&&(await re.fire("Canceled","Booking has been Canceled","success"),window.location.reload())})};return h.jsx("div",{className:"w-full h-full ",children:h.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[h.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:h.jsx("img",{src:(n=t==null?void 0:t.doctorId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),h.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[h.jsx("h4",{className:"text-sm font-medium opacity-40",children:"Cardiology"}),h.jsx("div",{className:"w-full h-auto",children:h.jsx("h4",{children:(o=(i=t==null?void 0:t.doctorId)==null?void 0:i.userId)==null?void 0:o.username})}),h.jsx("div",{className:"location w-full h-auto",children:h.jsxs("div",{className:"flex gap-4 items-start",children:[h.jsx(om,{}),h.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[h.jsx("span",{className:"flex items-center",children:(s=(a=t==null?void 0:t.doctorId)==null?void 0:a.addressId)==null?void 0:s.place}),h.jsx("span",{className:"flex items-center",children:(l=(c=t==null?void 0:t.doctorId)==null?void 0:c.addressId)==null?void 0:l.district})]})]})})]}),h.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[h.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[h.jsx(Dy,{}),h.jsx("span",{children:`${t==null?void 0:t.slotDate} ${at(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),h.jsxs("div",{className:"w-full h-auto flex gap-4",children:[h.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:d=>{var u;return r(d,t==null?void 0:t.startTime,t==null?void 0:t.slotDate,(u=t==null?void 0:t.doctorId)==null?void 0:u._id)},children:"Cancel"}),at().isAfter(at(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A"))&&at().isBefore(at(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))&&h.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:d=>window.open(`/patient/bookings/videoConsult?patientId=${t.patientId._id}&doctorId=${t.doctorId._id}`,"_blank"),children:"Join Meeting"})]})]})]})})}function E4e(){const[e,t]=T.useState([]),r=async()=>{const n=await zwe();await t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"flex w-full h-full",children:h.jsx("div",{className:"booked flex flex-col gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>h.jsx("div",{className:"w-[60vw] h-[25vh] ",children:h.jsx(v4e,{booking:n})},i))})})}var g1={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(vw,function(){return function(r,n,i){n.prototype.dayOfYear=function(o){var a=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return o==null?a:this.add(o-a,"day")}}})})(g1);var _4e=g1.exports;const y1=rs(_4e);at.extend(js);at.extend(y1);function b4e(e){var i,o,a,s,c,l,d,u,p,f,m,g,y,v,E,w;const{testOrder:t}=e,r=at(t==null?void 0:t.testDoneDate.split(" (")[0]).format("D MMM, dddd YYYY h:mm A"),n=qr();return h.jsx("div",{className:"w-full h-full flex ",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[h.jsxs("div",{className:"w-full h-auto flex gap-2",children:[h.jsx("div",{className:"img w-[30%] h-full",children:h.jsx("img",{src:(o=(i=t==null?void 0:t.labTestId)==null?void 0:i.testId)==null?void 0:o.testImage,alt:"test image",className:"w-full h-full object-fit"})}),h.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[h.jsx("div",{className:"w-full h-auto flex ",children:h.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[h.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(s=(a=t==null?void 0:t.labTestId)==null?void 0:a.testId)==null?void 0:s.testName}),h.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),h.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[h.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:h.jsx("h2",{className:"w-full h--full",children:(l=(c=t==null?void 0:t.labTestId)==null?void 0:c.testId)==null?void 0:l.testDescription})}),h.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((u=(d=t==null?void 0:t.labTestId)==null?void 0:d.labId)==null?void 0:u.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(f=(p=t==null?void 0:t.labTestId)==null?void 0:p.labId)==null?void 0:f.laboratoryName})]}),h.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[h.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:h.jsx("img",{src:((m=t==null?void 0:t.doctorId)==null?void 0:m.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),h.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Requested by ${(g=t==null?void 0:t.doctorId)==null?void 0:g.firstName}`})]})]}),h.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(DS,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:(v=(y=t==null?void 0:t.patientId)==null?void 0:y.addressId)==null?void 0:v.place})]})}),h.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:h.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[h.jsx(GP,{className:"w-[3vw]"}),h.jsx("h3",{className:"flex ",children:(w=(E=t==null?void 0:t.patientId)==null?void 0:E.userId)==null?void 0:w.phone})]})})]})]})]})]}),h.jsxs("div",{className:"w-full h-[5vh] flex gap-2",children:[(t==null?void 0:t.orderStatus)=="2"?h.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",onClick:S=>{var x;return n(`uploadResult?patientId=${t.patientId._id}&testOrderId=${t._id}&bookingId=${(x=t==null?void 0:t.bookingId)==null?void 0:x._id}&doctorId=${t.doctorId._id}`)},children:"View test Result"}):h.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",children:"need to be Completed"}),h.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",children:`ordered on ${r}`})]})]})})}function w4e(){const[e,t]=T.useState([]),r=async()=>{const n=await Vbe();console.log(n),n&&await t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"requestedTests flex flex-col gap-4",children:e.length>0&&e.map((n,i)=>h.jsx("div",{className:"w-[90%] h-auto",children:h.jsx(b4e,{testOrder:n})},i))})})})}function S4e(){const[e,t]=T.useState(),r=Mn({initialValues:{place:"",state:"",country:"",pincode:"",district:"",phone:""},validationSchema:dbe,onSubmit:async(i,o)=>{console.log("values",i),await Hve(i)&&re.fire("Profile has been Update","","success")}}),n=async()=>{const i=await $ve();r.setFieldValue("place",i._doc.place),r.setFieldValue("district",i._doc.district),r.setFieldValue("state",i._doc.state),r.setFieldValue("pincode",i._doc.pincode),r.setFieldValue("country",i._doc.country),r.setFieldValue("phone",i.phone),t(i)};return T.useEffect(()=>{n()},[]),h.jsx("div",{className:"screen w-full h-full flex flex-col p-10",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-4 justify-center pl-20  ",children:[h.jsx("h1",{className:"font-medium mb-2",children:"Address"}),h.jsxs("div",{className:"w-[60%] flex flex-col gap-2",children:[h.jsx(Ue,{variant:"filled",name:"place",label:"Place",className:"w-full ",value:r.values.place,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.place&&r.errors.place?{color:"error",helperText:r.errors.place}:{color:"success"}}),h.jsx(Ue,{variant:"filled",name:"state",label:"state",className:"w-full ",value:r.values.state,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.state&&r.errors.state?{color:"error",helperText:r.errors.state}:{color:"success"}}),h.jsx(Ue,{variant:"filled",name:"district",label:"district",className:"w-full ",value:r.values.pincode,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.district&&r.errors.district?{color:"error",helperText:r.errors.district}:{color:"success"}}),h.jsx(Ue,{variant:"filled",name:"country",label:"country",className:"w-full ",value:r.values.country,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.country&&r.errors.country?{color:"error",helperText:r.errors.country}:{color:"success"}}),h.jsx(Ue,{variant:"filled",name:"pincode",label:"pincode",className:"w-full ",value:r.values.pincode,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.pincode&&r.errors.pincode?{color:"error",helperText:r.errors.pincode}:{color:"success"}})]}),h.jsx("h1",{className:"mt-5 font-medium mb-2",children:"Phone Details"}),h.jsx("div",{className:"w-[60%] flex flex-col gap-2",children:h.jsx(Ue,{variant:"filled",name:"phone",label:"phone",className:"w-full ",value:r.values.phone,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.phone&&r.errors.phone?{color:"error",helperText:r.errors.phone}:{color:"success"}})}),h.jsx("button",{type:"button",onClick:r.handleSubmit,className:"w-[60%] h-[5vh] border font-medium rounded-[5%] bg-orange-500 p-2 ",children:"Save"})]})})}function T4e(){var l;const e=qr(),t=new URLSearchParams(location.search),r=t.get("testOrderId"),n=t.get("patientId"),i=t.get("doctorId");console.log("doctorId",i);const[o,a]=T.useState(void 0),s=Mn({initialValues:{testResultDescription:""},validationSchema:"",onSubmit:async(d,u)=>{await laboratory_uploadTestResultService({...d,testOrderId:r,patientId:n,doctorId:i})&&(re.fire("Result uploaded successfully","","success"),e("/laboratory/order/test/completed"))}}),c=async()=>{const d=await $be({testOrderId:r}),u=await Bbe({testOrderId:r});u&&s.setFieldValue("testResultDescription",u.testResultDescription),a(d)};return T.useEffect(()=>{c()},[]),h.jsx("div",{className:"w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-2 p-10",children:h.jsxs("form",{onSubmit:s.handleSubmit,className:"flex flex-col gap-10",children:[h.jsx("h1",{className:"w-full h-[8vh] p-2 flex items-center justify-center text-white text-lg font-bold bg-blue-500",children:`Test Result for ${(l=o==null?void 0:o.patientId)==null?void 0:l.firstName}`}),h.jsx("textarea",{rows:15,name:"testResultDescription",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.testResultDescription}),s.touched.testResultDescription&&s.errors.testResultDescription?h.jsx("span",{className:"text-red",children:s.errors.testResultDescription}):""]})})})}const v1="https://hcompanion.onrender.com/api",C4e=async()=>{var e,t,r;try{return(await Ee.get(`${v1}/patient/doctor/prescriptions`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.prescriptions}catch(n){return console.log(n),((e=n.response)==null?void 0:e.status)=="500"&&((r=(t=n.response)==null?void 0:t.data)!=null&&r.errorServer)&&re.fire("Server Error","","error"),!1}},R4e=async({bookingId:e})=>{var t,r,n;try{const i=await Ee.post(`${v1}/patient/doctor/prescription/details/booking`,{bookingId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("prescription details",i.data.prescription),i.data.prescription}catch(i){return console.log(i),((t=i.response)==null?void 0:t.status)=="500"&&((n=(r=i.response)==null?void 0:r.data)!=null&&n.errorServer)&&re.fire("Server Error","","error"),!1}};at.extend(js);at.extend(y1);function I4e(e){var i,o,a;const{prescription:t}=e,r=at(t==null?void 0:t.updatedAt).format("D MMM, dddd YYYY h:mm A"),n=qr();return h.jsx("div",{className:"w-full h-full flex flex-col shadow-xl rounded-lg border ",children:h.jsxs("div",{className:"h-full w-full flex gap-2 ",children:[h.jsx("div",{className:"w-[15%] h-full ",children:h.jsx("img",{src:(i=t==null?void 0:t.doctorId)==null?void 0:i.profileImage,className:"w-full h-full rounded-t-lg"})}),h.jsxs("div",{className:"content w-full h-full flex flex-1 flex-col gap-4 mt-2 p-1 ",children:[h.jsxs("div",{className:"w-full h-auto flex gap-10 items-center p-2 ",children:[h.jsxs("div",{className:"w-[30%] h-auto bg-black bg-opacity-20 flex items-center justify-center p-2",children:[h.jsx("h2",{className:"text-lg font-medium",children:`Doctor ${(o=t==null?void 0:t.doctorId)==null?void 0:o.firstName} ${(a=t==null?void 0:t.doctorId)==null?void 0:a.lastName}`}),h.jsx("h2",{})]}),h.jsx("div",{className:"w-full flex justify-end h-auto bg-black bg-opacity-20 p-2",children:h.jsx("h2",{className:"text-lg font-medium",children:`prescription on Date ${r}`})})]}),h.jsx("div",{className:"w-full h-[8vh] flex   py-1 mb-2 ",children:h.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:s=>{var c,l;return n(`/patient/profile/prescription/details/${(l=(c=t==null?void 0:t.patientId)==null?void 0:c.userId)==null?void 0:l._id}/${t==null?void 0:t.bookingId._id}`)},children:"View Prescription"})})]})]})})}function x4e(){const[e,t]=T.useState([]),r=async()=>{const n=await C4e();t(n)};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full flex flex-col p-4",children:h.jsx("div",{className:"prescriptions w-[90%] h-full flex flex-col gap-5",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>h.jsx("div",{className:"w-full h-auto",children:h.jsx(I4e,{prescription:n})},i))})})})}function A4e(){var d,u,p,f,m;const[e,t]=T.useState(void 0),[r,n]=T.useState(void 0),[i,o]=T.useState(void 0),{patientId:a,bookingId:s}=Hf(),c=Mn({initialValues:{disease:"",prescription:""},validationSchema:"",onSubmit:async(g,y)=>{}}),l=async()=>{const g=await aq({patientId:a});n(g._id);const y=await R4e({bookingId:s});o(y),y&&(c.setFieldValue("disease",y.disease),c.setFieldValue("prescription",y.prescription)),t(g)};return T.useEffect(()=>{l()},[]),h.jsx("div",{className:"w-full h-full flex ",children:h.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:h.jsxs("div",{className:"patient profile w-full h-full flex flex-col gap-4",children:[h.jsxs("div",{className:"w-full h-[10vh] flex gap-10 items-center",children:[h.jsx("div",{className:"w-[5vw] h-[10vh] ",children:h.jsx("img",{src:(d=i==null?void 0:i.doctorId)==null?void 0:d.profileImage,alt:"patientprofile",className:"w-full h-full rounded-full"})}),h.jsxs("div",{className:"details w-full h-full flex items-center  gap-10",children:[h.jsx("h1",{className:"w-full h-[70%] pl-10 bg-black bg-opacity-20 flex items-center text-lg font-medium",children:`Doctor ${(u=i==null?void 0:i.doctorId)==null?void 0:u.firstName} ${(p=i==null?void 0:i.doctorId)==null?void 0:p.lastName}`}),h.jsx("h1",{className:"w-full h-[70%] pl-10 bg-black bg-opacity-20 flex items-center text-lg font-medium",children:`Consulted on ${(f=i==null?void 0:i.bookingId)==null?void 0:f.slotDate} ${(m=i==null?void 0:i.bookingId)==null?void 0:m.startTime}`})]})]}),h.jsx("div",{className:"prescription w-full h-full flex",children:h.jsx("div",{className:"w-full h-full flex justify-center bg-black bg-opacity-30",children:h.jsxs("form",{onSubmit:c.handleSubmit,className:"w-[70%] h-full p-4 flex flex-col gap-5",children:[h.jsx("h1",{className:"w-full h-[5vh] pl-10 bg-orange-500 flex items-center text-lg font-medium",children:"Prescription"}),h.jsx(Ue,{variant:"filled",label:"disease",name:"disease",value:c.values.disease,onChange:c.handleChange,onBlur:c.handleBlur}),h.jsx("textarea",{rows:"10",placeholder:"Prescription",name:"prescription",value:c.values.prescription,onChange:c.handleChange,onBlur:c.handleBlur})]})})})]})})})}function N4e(){const[e,t]=T.useState(""),r=Mn({initialValues:{pharmacyName:"",ownerName:""},validationSchema:ui().shape({}),onSubmit:async(o,a)=>{console.log("values",o),await b_e(o)&&(re.fire({icon:"success",text:"The profile has been updated"}),i())}}),n=o=>{const a=o.target.files[0],s=new FileReader;s.onload=c=>{t(c.target.result),r.setFieldValue("profileImage",a)},s.readAsDataURL(o.target.files[0])},i=async()=>{const o=await Oq();r.setFieldValue("pharmacyName",o.pharmacyName),r.setFieldValue("ownerName",o.ownerName),t(o.profileImage)};return T.useEffect(()=>{i()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full flex flex-col items-center",children:h.jsxs("form",{className:"w-[50%] h-full flex flex-col gap-6 pt-10 ",children:[h.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[h.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),h.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:h.jsx("div",{className:"flex flex-col gap-1",children:h.jsx(Eh,{helperText:"Choose an Image",name:"profileImage",onChange:n})})})]}),h.jsx(Ue,{variant:"filled",label:"First Name",name:"firstName",value:r.values.pharmacyName,onChange:r.handleChange}),h.jsx(Ue,{variant:"filled",label:"Last Name",name:"lastName",value:r.values.ownerName,onChange:r.handleChange}),h.jsxs("button",{type:"button",onClick:r.handleSubmit,className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(_h,{}),"Save"]})]})})})}function O4e(){var r;const e=Mn({initialValues:{place:"",state:"",district:"",country:"",pincode:"",houseName:"",phone:""},validationSchema:ui().shape({}),onSubmit:async(n,i)=>{await S_e(n)&&t()}}),t=async()=>{const{phone:n,...i}=await w_e();console.log("temp contact",i._doc),e.setFieldValue("place",i._doc.place),e.setFieldValue("state",i._doc.state),e.setFieldValue("district",i._doc.district),e.setFieldValue("country",i._doc.country),e.setFieldValue("pincode",i._doc.pincode?i._doc.pincode:""),e.setFieldValue("houseName",i._doc.houseName),e.setFieldValue("phone",n)};return T.useEffect(()=>{t()},[]),h.jsx("div",{className:"w-full h-full",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-4 items-center pt-10",children:[h.jsx("div",{className:"w-[70%] ",children:h.jsx("h1",{className:"text-lg font-medium",children:"Address"})}),h.jsxs("form",{className:"w-[70%]  grid grid-cols-2 gap-4",children:[h.jsx(Ue,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:(r=e.values)==null?void 0:r.houseName}),h.jsx(Ue,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),h.jsx(Ue,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),h.jsx(Ue,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),h.jsx(Ue,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),h.jsx(Ue,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]}),h.jsxs("form",{className:"w-[70%] flex flex-col pt-10",children:[h.jsx("div",{children:h.jsx("h1",{className:"text-lg font-medium",children:"Contact Details"})}),h.jsx("div",{className:"w-[30%] flex flex-col gap-4 mt-5 ",children:h.jsx(Ue,{variant:"filled",label:"Phone",className:"font-bold",name:"phone",onChange:e.handleChange,value:e.values.phone})})]}),h.jsxs("button",{type:"button",onClick:e.handleSubmit,className:"w-[70%] text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(_h,{}),"Save"]})]})})}function k4e(){return h.jsxs("div",{className:"w-full h-[10vh] px-2 text-center font-bold flex justify-center items-center gap-2 ",children:[h.jsxs(Sr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/laboratory/profile/profileDetails ",children:[h.jsx(PS,{className:"h-full w-[5%]"}),h.jsx("span",{className:"flex flex-1",children:"Profile Details"})]}),h.jsxs(Sr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/laboratory/profile/contactDetails",children:[h.jsx(HP,{className:"h-full w-[5%]"}),h.jsx("span",{className:"flex flex-1",children:"Contact Details"})]}),h.jsxs(Sr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/laboratory/profile/passwordReset",children:[h.jsx(WP,{className:"h-full w-[5%]"}),h.jsx("span",{className:"flex flex-1",children:"Password Reset"})]})]})}function P4e(){return h.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[h.jsx(k4e,{}),h.jsx("div",{className:"w-full h-full mt-5 pb-2",children:h.jsx(Fi,{})})]})}function D4e(){const[e,t]=T.useState(""),r=Mn({initialValues:{laboratoryName:"",ownerName:"",profileImage:""},validationSchema:ui().shape({}),onSubmit:async(o,a)=>{console.log("values",o),await hwe(o)&&(re.fire({icon:"success",text:"The profile has been updated"}),i())}}),n=o=>{const a=o.target.files[0],s=new FileReader;s.onload=c=>{t(c.target.result),r.setFieldValue("profileImage",a)},s.readAsDataURL(o.target.files[0])},i=async()=>{const o=await pwe();r.setFieldValue("laboratoryName",o.laboratoryName),r.setFieldValue("ownerName",o.ownerName),t(o.profileImage)};return T.useEffect(()=>{i()},[]),h.jsx("div",{className:"w-full h-full flex flex-col",children:h.jsx("div",{className:"w-full h-full flex flex-col items-center",children:h.jsxs("form",{className:"w-[50%] h-full flex flex-col gap-6 pt-10 ",children:[h.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[h.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),h.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:h.jsx("div",{className:"flex flex-col gap-1",children:h.jsx(Eh,{helperText:"Choose an Image",name:"profileImage",onChange:n})})})]}),h.jsx(Ue,{variant:"filled",label:"First Name",name:"laboratoryName",value:r.values.laboratoryName,onChange:r.handleChange}),h.jsx(Ue,{variant:"filled",label:"Last Name",name:"ownerName",value:r.values.ownerName,onChange:r.handleChange}),h.jsxs("button",{type:"button",onClick:r.handleSubmit,className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(_h,{}),"Save"]})]})})})}function L4e(){var r;const e=Mn({initialValues:{place:"",state:"",district:"",country:"",pincode:"",houseName:"",phone:""},validationSchema:ui().shape({}),onSubmit:async(n,i)=>{await mwe(n)&&t()}}),t=async()=>{const{phone:n,...i}=await fwe();console.log("temp contact",i._doc),e.setFieldValue("place",i._doc.place),e.setFieldValue("state",i._doc.state),e.setFieldValue("district",i._doc.district),e.setFieldValue("country",i._doc.country),e.setFieldValue("pincode",i._doc.pincode?i._doc.pincode:""),e.setFieldValue("houseName",i._doc.houseName),e.setFieldValue("phone",n)};return T.useEffect(()=>{t()},[]),h.jsx("div",{className:"w-full h-full",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-4 items-center pt-10",children:[h.jsx("div",{className:"w-[70%] ",children:h.jsx("h1",{className:"text-lg font-medium",children:"Address"})}),h.jsxs("form",{className:"w-[70%]  grid grid-cols-2 gap-4",children:[h.jsx(Ue,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:(r=e.values)==null?void 0:r.houseName}),h.jsx(Ue,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),h.jsx(Ue,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),h.jsx(Ue,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),h.jsx(Ue,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),h.jsx(Ue,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]}),h.jsxs("form",{className:"w-[70%] flex flex-col pt-10",children:[h.jsx("div",{children:h.jsx("h1",{className:"text-lg font-medium",children:"Contact Details"})}),h.jsx("div",{className:"w-[30%] flex flex-col gap-4 mt-5 ",children:h.jsx(Ue,{variant:"filled",label:"Phone",className:"font-bold",name:"phone",onChange:e.handleChange,value:e.values.phone})})]}),h.jsxs("button",{type:"button",onClick:e.handleSubmit,className:"w-[70%] text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[h.jsx(_h,{}),"Save"]})]})})}const M4e="https://hcompanion.onrender.com/api",j4e=async({token:e})=>{try{const t=await Ee.get(`${M4e}/doctor/getBasicDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.userData}catch(t){return t.response.status=="401"&&re.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}};function U4e(){const e=qr(),t=vh();Ti(n=>n.user);const r=async()=>{if(sessionStorage.getItem("token")){const n=await j4e({token:sessionStorage.getItem("token")});n?t(po({username:n.username,email:n.email,role:n.role,isLoggedIn:!0})):po({})}};return T.useEffect(()=>{r()},[]),h.jsx("div",{className:"navBar w-full h-full flex flex-col",children:h.jsxs("div",{className:"w-full h-full flex flex-col gap-4 p-4 bg-emerald-400 bg-opacity-90 rounded-tr-[3%]  ",children:[h.jsxs("div",{className:"w-full h-[15vh] flex flex-row items-center gap-4  p-1  ",children:[h.jsx("img",{src:"normalUser.png",className:"rounded-full w-[4vw] h-[100%]"}),h.jsxs("div",{className:"h-full w-full pl-4 flex flex-1 flex-col justify-center gap-2 bg-white bg-opacity-40 rounded-lg ",children:[h.jsx("h2",{className:"text-lg font-bold",children:"Admin"}),h.jsx("span",{className:" font-sm",children:"admin"})]})]}),h.jsx("div",{className:"search w-full h-[5%]",children:h.jsx(Ue,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),h.jsxs("div",{className:"options h-full w-full mt-10 flex flex-col gap-4 font-medium text-white ",children:[h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/doctorHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{e("/doctor")},children:"Home"})]}),h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/doctorSlotSetting.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",id:"id_navSlot",onClick:()=>{e("/doctor/slot")},children:"Users"})]}),h.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[h.jsx("img",{src:"/icons/doctorBookings.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/bookings")},children:"Approvals"})]}),h.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[h.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),h.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),t(po({})),e("/")},children:"sign out"})]})]})]})})}function F4e(){return h.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[h.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:h.jsx(U4e,{})}),h.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:h.jsx(Fi,{})})]})}function V4e(){return h.jsx(h.Fragment,{children:h.jsx(ene,{children:h.jsxs(zre,{children:[h.jsx(Ye,{path:"/login",element:h.jsx(qve,{})}),h.jsx(Ye,{path:"/register",element:h.jsx(iEe,{})}),"//Patient",h.jsxs(Ye,{path:"/",element:h.jsx(v_e,{}),children:[h.jsx(Ye,{path:"/patient/medicines",element:h.jsx(obe,{})}),h.jsx(Ye,{path:"/patient/medicines/medicineDetails",element:h.jsx(abe,{})}),h.jsxs(Ye,{path:"/patient/profile",element:h.jsx(cbe,{}),children:[h.jsx(Ye,{index:!0,path:"/patient/profile/details",element:h.jsx(ube,{})}),h.jsx(Ye,{path:"/patient/profile/contactDetails",element:h.jsx(S4e,{})}),h.jsxs(Ye,{path:"/patient/profile/bookings",element:h.jsx(Wwe,{}),children:[h.jsx(Ye,{path:"/patient/profile/bookings/currentBookings",element:h.jsx(qwe,{})}),h.jsx(Ye,{path:"/patient/profile/bookings/pastBookings",element:h.jsx(E4e,{})})]}),h.jsxs(Ye,{path:"/patient/profile/medicine",element:h.jsx($5e,{}),children:[h.jsx(Ye,{path:"/patient/profile/medicine/requests",element:h.jsx(V5e,{})}),h.jsx(Ye,{path:"/patient/profile/medicine/ordered",element:h.jsx(W5e,{})})]}),h.jsxs(Ye,{path:"/patient/profile/test",element:h.jsx(c4e,{}),children:[h.jsx(Ye,{path:"/patient/profile/test/requests",element:h.jsx(d4e,{})}),h.jsx(Ye,{path:"/patient/profile/test/ordered",element:h.jsx(w4e,{})}),h.jsx(Ye,{path:"/patient/profile/test/ordered/uploadResult",element:h.jsx(T4e,{})})]}),h.jsx(Ye,{path:"/patient/profile/prescription",element:h.jsx(x4e,{})}),h.jsx(Ye,{path:"/patient/profile/prescription/details/:patientId/:bookingId",element:h.jsx(A4e,{})})]}),h.jsx(Ye,{path:"/patient/doctors",element:h.jsx(Nbe,{}),children:h.jsx(Ye,{path:"/patient/doctors/:doctorId",element:h.jsx(zbe,{})})}),"//test",h.jsx(Ye,{path:"/patient/tests",element:h.jsx(Vwe,{})}),h.jsx(Ye,{path:"/patient/tests/testDetails",element:h.jsx($we,{})}),h.jsx(Ye,{path:"/patient/treatmentPlan",element:h.jsx(qbe,{})}),h.jsx(Ye,{path:"/patient/alerts",element:h.jsx(I5e,{})})]}),"//video",h.jsx(Ye,{path:"/patient/bookings/videoConsult",element:h.jsx(S5e,{})}),"//pharmcacy",h.jsxs(Ye,{path:"/pharmacy",element:h.jsx(F_e,{}),children:[h.jsx(Ye,{path:"/pharmacy/home",element:h.jsx(dwe,{})}),h.jsx(Ye,{path:"/pharmacy/stock/addCategory",element:h.jsx(M_e,{})}),h.jsx(Ye,{path:"/pharmacy/stock/viewStocks",element:h.jsx(j_e,{})}),h.jsx(Ye,{path:"/pharmacy/stock/editStock",element:h.jsx(V_e,{})}),h.jsxs(Ye,{path:"/pharmacy/profile",element:h.jsx(J_e,{}),children:[h.jsx(Ye,{path:"/pharmacy/profile/profileDetails",element:h.jsx(N4e,{})}),h.jsx(Ye,{path:"/pharmacy/profile/contactDetails",element:h.jsx(O4e,{})}),h.jsx(Ye,{path:"/pharmacy/profile/passwordReset",element:h.jsx(gU,{})})]}),h.jsxs(Ye,{path:"/pharmacy/order",element:h.jsx(z5e,{}),children:[h.jsx(Ye,{path:"/pharmacy/order/requested",element:h.jsx(J5e,{})}),h.jsx(Ye,{path:"/pharmacy/order/delivered",element:h.jsx(Z5e,{})})]})]}),"//Doctor",h.jsxs(Ye,{path:"/doctor",element:h.jsx(Ebe,{}),children:[h.jsx(Ye,{path:"/doctor/slot",element:h.jsx(Cbe,{})}),h.jsxs(Ye,{path:"/doctor/profile",element:h.jsx(rwe,{}),children:[h.jsx(Ye,{path:"/doctor/profile/details",element:h.jsx(swe,{})}),h.jsx(Ye,{path:"/doctor/profile/contact",element:h.jsx(cwe,{})}),h.jsx(Ye,{path:"/doctor/profile/resetPassword",element:h.jsx(lwe,{})})]}),h.jsxs(Ye,{path:"/doctor/bookings",element:h.jsx(Xwe,{}),children:[h.jsx(Ye,{path:"/doctor/bookings/currentBookings",element:h.jsx(eSe,{})}),h.jsx(Ye,{path:"/doctor/bookings/pastCompletedBookings",element:h.jsx(A5e,{})}),h.jsx(Ye,{path:"/doctor/bookings/prescription/:patientId/:bookingId",element:h.jsx(P5e,{})}),h.jsx(Ye,{path:"/doctor/bookings/medicine/:patientId/:bookingId",element:h.jsx(U5e,{})}),h.jsx(Ye,{path:"/doctor/bookings/labtest/:patientId/:bookingId",element:h.jsx(a4e,{})}),h.jsx(Ye,{path:"/doctor/bookings/labtest/testDetails/:patientId/:bookingId/:testId",element:h.jsx(i4e,{})})]})]}),"//Laboratory",h.jsxs(Ye,{path:"/laboratory",element:h.jsx(_we,{}),children:[h.jsxs(Ye,{path:"/laboratory/testServices",element:h.jsx(wwe,{}),children:[h.jsx(Ye,{path:"/laboratory/testServices/addTest",element:h.jsx(Lwe,{})}),h.jsx(Ye,{path:"/laboratory/testServices/viewTests",element:h.jsx(Mwe,{})}),h.jsx(Ye,{path:"/laboratory/testServices/editTestDetails",element:h.jsx(Uwe,{})})]}),h.jsxs(Ye,{path:"/laboratory/order",element:h.jsx(h4e,{}),children:[h.jsx(Ye,{path:"/laboratory/order/test/ordered",element:h.jsx(f4e,{})}),h.jsx(Ye,{path:"/laboratory/order/test/completed",element:h.jsx(g4e,{})}),h.jsx(Ye,{path:"/laboratory/order/test/completed/uploadResult",element:h.jsx(y4e,{})})]}),h.jsxs(Ye,{path:"/laboratory/profile",element:h.jsx(P4e,{}),children:[h.jsx(Ye,{path:"/laboratory/profile/profileDetails",element:h.jsx(D4e,{})}),h.jsx(Ye,{path:"/laboratory/profile/contactDetails",element:h.jsx(L4e,{})}),h.jsx(Ye,{path:"/laboratory/profile/passwordReset",element:h.jsx(gU,{})})]})]}),"//Admin",h.jsx(Ye,{path:"/admin",element:h.jsx(F4e,{})})]})})})}const B4e={patient_meetingAlert:!1},$4e=Jf({name:"alert",initialState:B4e,reducers:{setAlert(e,t){e.patient_meetingAlert=t.payload.patient_meetingAlert}}}),H4e=$4e.reducer,W4e=jpe({reducer:{user:Xpe,patient:Fve,doctor:pbe,patient_alert:H4e,pharmacy:R_e,laboratory:vwe}});hH(document.getElementById("root")).render(h.jsx(T.StrictMode,{children:h.jsx(cpe,{store:W4e,children:h.jsx(V4e,{})})}))});export default G4e();
