var Aoe=Object.defineProperty;var Ooe=(e,t,r)=>t in e?Aoe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var koe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ey=(e,t,r)=>Ooe(e,typeof t!="symbol"?t+"":t,r);var tXe=koe((Ho,zo)=>{function Poe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function es(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function A9(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var O9={exports:{}},LT={},k9={exports:{}},lr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv=Symbol.for("react.element"),Doe=Symbol.for("react.portal"),Loe=Symbol.for("react.fragment"),joe=Symbol.for("react.strict_mode"),Moe=Symbol.for("react.profiler"),Uoe=Symbol.for("react.provider"),Foe=Symbol.for("react.context"),Voe=Symbol.for("react.forward_ref"),Boe=Symbol.for("react.suspense"),$oe=Symbol.for("react.memo"),Hoe=Symbol.for("react.lazy"),SU=Symbol.iterator;function zoe(e){return e===null||typeof e!="object"?null:(e=SU&&e[SU]||e["@@iterator"],typeof e=="function"?e:null)}var P9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D9=Object.assign,L9={};function ag(e,t,r){this.props=e,this.context=t,this.refs=L9,this.updater=r||P9}ag.prototype.isReactComponent={};ag.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ag.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function j9(){}j9.prototype=ag.prototype;function DD(e,t,r){this.props=e,this.context=t,this.refs=L9,this.updater=r||P9}var LD=DD.prototype=new j9;LD.constructor=DD;D9(LD,ag.prototype);LD.isPureReactComponent=!0;var TU=Array.isArray,M9=Object.prototype.hasOwnProperty,jD={current:null},U9={key:!0,ref:!0,__self:!0,__source:!0};function F9(e,t,r){var n,i={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)M9.call(t,n)&&!U9.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Zv,type:e,key:a,ref:o,props:i,_owner:jD.current}}function Goe(e,t){return{$$typeof:Zv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function MD(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zv}function Woe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var CU=/\/+/g;function gR(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Woe(""+e.key):t.toString(36)}function BE(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Zv:case Doe:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+gR(o,0):n,TU(i)?(r="",e!=null&&(r=e.replace(CU,"$&/")+"/"),BE(i,t,r,"",function(c){return c})):i!=null&&(MD(i)&&(i=Goe(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(CU,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",TU(e))for(var s=0;s<e.length;s++){a=e[s];var l=n+gR(a,s);o+=BE(a,t,r,l,i)}else if(l=zoe(e),typeof l=="function")for(e=l.call(e),s=0;!(a=e.next()).done;)a=a.value,l=n+gR(a,s++),o+=BE(a,t,r,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function sw(e,t,r){if(e==null)return e;var n=[],i=0;return BE(e,n,"","",function(a){return t.call(r,a,i++)}),n}function Koe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var za={current:null},$E={transition:null},qoe={ReactCurrentDispatcher:za,ReactCurrentBatchConfig:$E,ReactCurrentOwner:jD};function V9(){throw Error("act(...) is not supported in production builds of React.")}lr.Children={map:sw,forEach:function(e,t,r){sw(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return sw(e,function(){t++}),t},toArray:function(e){return sw(e,function(t){return t})||[]},only:function(e){if(!MD(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};lr.Component=ag;lr.Fragment=Loe;lr.Profiler=Moe;lr.PureComponent=DD;lr.StrictMode=joe;lr.Suspense=Boe;lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qoe;lr.act=V9;lr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=D9({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=jD.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)M9.call(t,l)&&!U9.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];n.children=s}return{$$typeof:Zv,type:e.type,key:i,ref:a,props:n,_owner:o}};lr.createContext=function(e){return e={$$typeof:Foe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Uoe,_context:e},e.Consumer=e};lr.createElement=F9;lr.createFactory=function(e){var t=F9.bind(null,e);return t.type=e,t};lr.createRef=function(){return{current:null}};lr.forwardRef=function(e){return{$$typeof:Voe,render:e}};lr.isValidElement=MD;lr.lazy=function(e){return{$$typeof:Hoe,_payload:{_status:-1,_result:e},_init:Koe}};lr.memo=function(e,t){return{$$typeof:$oe,type:e,compare:t===void 0?null:t}};lr.startTransition=function(e){var t=$E.transition;$E.transition={};try{e()}finally{$E.transition=t}};lr.unstable_act=V9;lr.useCallback=function(e,t){return za.current.useCallback(e,t)};lr.useContext=function(e){return za.current.useContext(e)};lr.useDebugValue=function(){};lr.useDeferredValue=function(e){return za.current.useDeferredValue(e)};lr.useEffect=function(e,t){return za.current.useEffect(e,t)};lr.useId=function(){return za.current.useId()};lr.useImperativeHandle=function(e,t,r){return za.current.useImperativeHandle(e,t,r)};lr.useInsertionEffect=function(e,t){return za.current.useInsertionEffect(e,t)};lr.useLayoutEffect=function(e,t){return za.current.useLayoutEffect(e,t)};lr.useMemo=function(e,t){return za.current.useMemo(e,t)};lr.useReducer=function(e,t,r){return za.current.useReducer(e,t,r)};lr.useRef=function(e){return za.current.useRef(e)};lr.useState=function(e){return za.current.useState(e)};lr.useSyncExternalStore=function(e,t,r){return za.current.useSyncExternalStore(e,t,r)};lr.useTransition=function(){return za.current.useTransition()};lr.version="18.3.1";k9.exports=lr;var T=k9.exports;const jr=es(T),B0=Poe({__proto__:null,default:jr},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yoe=T,Xoe=Symbol.for("react.element"),Joe=Symbol.for("react.fragment"),Qoe=Object.prototype.hasOwnProperty,Zoe=Yoe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ese={key:!0,ref:!0,__self:!0,__source:!0};function B9(e,t,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Qoe.call(t,n)&&!ese.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Xoe,type:e,key:a,ref:o,props:i,_owner:Zoe.current}}LT.Fragment=Joe;LT.jsx=B9;LT.jsxs=B9;O9.exports=LT;var d=O9.exports,$9={exports:{}},ts={},H9={exports:{}},z9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,H){var x=D.length;D.push(H);e:for(;0<x;){var w=x-1>>>1,O=D[w];if(0<i(O,H))D[w]=H,D[x]=O,x=w;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var H=D[0],x=D.pop();if(x!==H){D[0]=x;e:for(var w=0,O=D.length,C=O>>>1;w<C;){var q=2*(w+1)-1,F=D[q],J=q+1,se=D[J];if(0>i(F,x))J<O&&0>i(se,F)?(D[w]=se,D[J]=x,w=J):(D[w]=F,D[q]=x,w=q);else if(J<O&&0>i(se,x))D[w]=se,D[J]=x,w=J;else break e}}return H}function i(D,H){var x=D.sortIndex-H.sortIndex;return x!==0?x:D.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],c=[],u=1,h=null,f=3,p=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(D){for(var H=r(c);H!==null;){if(H.callback===null)n(c);else if(H.startTime<=D)n(c),H.sortIndex=H.expirationTime,t(l,H);else break;H=r(c)}}function S(D){if(g=!1,E(D),!m)if(r(l)!==null)m=!0,K(I);else{var H=r(c);H!==null&&P(S,H.startTime-D)}}function I(D,H){m=!1,g&&(g=!1,v(j),j=-1),p=!0;var x=f;try{for(E(H),h=r(l);h!==null&&(!(h.expirationTime>H)||D&&!V());){var w=h.callback;if(typeof w=="function"){h.callback=null,f=h.priorityLevel;var O=w(h.expirationTime<=H);H=e.unstable_now(),typeof O=="function"?h.callback=O:h===r(l)&&n(l),E(H)}else n(l);h=r(l)}if(h!==null)var C=!0;else{var q=r(c);q!==null&&P(S,q.startTime-H),C=!1}return C}finally{h=null,f=x,p=!1}}var N=!1,L=null,j=-1,z=5,A=-1;function V(){return!(e.unstable_now()-A<z)}function G(){if(L!==null){var D=e.unstable_now();A=D;var H=!0;try{H=L(!0,D)}finally{H?X():(N=!1,L=null)}}else N=!1}var X;if(typeof b=="function")X=function(){b(G)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,B=$.port2;$.port1.onmessage=G,X=function(){B.postMessage(null)}}else X=function(){y(G,0)};function K(D){L=D,N||(N=!0,X())}function P(D,H){j=y(function(){D(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,K(I))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(D){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var x=f;f=H;try{return D()}finally{f=x}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var x=f;f=D;try{return H()}finally{f=x}},e.unstable_scheduleCallback=function(D,H,x){var w=e.unstable_now();switch(typeof x=="object"&&x!==null?(x=x.delay,x=typeof x=="number"&&0<x?w+x:w):x=w,D){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=x+O,D={id:u++,callback:H,priorityLevel:D,startTime:x,expirationTime:O,sortIndex:-1},x>w?(D.sortIndex=x,t(c,D),r(l)===null&&D===r(c)&&(g?(v(j),j=-1):g=!0,P(S,x-w))):(D.sortIndex=O,t(l,D),m||p||(m=!0,K(I))),D},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(D){var H=f;return function(){var x=f;f=H;try{return D.apply(this,arguments)}finally{f=x}}}})(z9);H9.exports=z9;var tse=H9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rse=T,Yo=tse;function De(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var G9=new Set,$0={};function pf(e,t){Cm(e,t),Cm(e+"Capture",t)}function Cm(e,t){for($0[e]=t,e=0;e<t.length;e++)G9.add(t[e])}var Zc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mO=Object.prototype.hasOwnProperty,nse=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xU={},RU={};function ise(e){return mO.call(RU,e)?!0:mO.call(xU,e)?!1:nse.test(e)?RU[e]=!0:(xU[e]=!0,!1)}function ase(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ose(e,t,r,n){if(t===null||typeof t>"u"||ase(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ga(e,t,r,n,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var fa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fa[e]=new Ga(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fa[t]=new Ga(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fa[e]=new Ga(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fa[e]=new Ga(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fa[e]=new Ga(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fa[e]=new Ga(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fa[e]=new Ga(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fa[e]=new Ga(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fa[e]=new Ga(e,5,!1,e.toLowerCase(),null,!1,!1)});var UD=/[\-:]([a-z])/g;function FD(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(UD,FD);fa[t]=new Ga(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(UD,FD);fa[t]=new Ga(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(UD,FD);fa[t]=new Ga(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fa[e]=new Ga(e,1,!1,e.toLowerCase(),null,!1,!1)});fa.xlinkHref=new Ga("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fa[e]=new Ga(e,1,!1,e.toLowerCase(),null,!0,!0)});function VD(e,t,r,n){var i=fa.hasOwnProperty(t)?fa[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ose(t,r,i,n)&&(r=null),n||i===null?ise(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var uu=rse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lw=Symbol.for("react.element"),Cp=Symbol.for("react.portal"),xp=Symbol.for("react.fragment"),BD=Symbol.for("react.strict_mode"),gO=Symbol.for("react.profiler"),W9=Symbol.for("react.provider"),K9=Symbol.for("react.context"),$D=Symbol.for("react.forward_ref"),yO=Symbol.for("react.suspense"),vO=Symbol.for("react.suspense_list"),HD=Symbol.for("react.memo"),Mu=Symbol.for("react.lazy"),q9=Symbol.for("react.offscreen"),IU=Symbol.iterator;function ty(e){return e===null||typeof e!="object"?null:(e=IU&&e[IU]||e["@@iterator"],typeof e=="function"?e:null)}var Gn=Object.assign,yR;function jy(e){if(yR===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);yR=t&&t[1]||""}return`
`+yR+e}var vR=!1;function bR(e,t){if(!e||vR)return"";vR=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{vR=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?jy(e):""}function sse(e){switch(e.tag){case 5:return jy(e.type);case 16:return jy("Lazy");case 13:return jy("Suspense");case 19:return jy("SuspenseList");case 0:case 2:case 15:return e=bR(e.type,!1),e;case 11:return e=bR(e.type.render,!1),e;case 1:return e=bR(e.type,!0),e;default:return""}}function bO(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xp:return"Fragment";case Cp:return"Portal";case gO:return"Profiler";case BD:return"StrictMode";case yO:return"Suspense";case vO:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case K9:return(e.displayName||"Context")+".Consumer";case W9:return(e._context.displayName||"Context")+".Provider";case $D:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case HD:return t=e.displayName||null,t!==null?t:bO(e.type)||"Memo";case Mu:t=e._payload,e=e._init;try{return bO(e(t))}catch{}}return null}function lse(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bO(t);case 8:return t===BD?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _d(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Y9(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cse(e){var t=Y9(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cw(e){e._valueTracker||(e._valueTracker=cse(e))}function X9(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Y9(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function $_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wO(e,t){var r=t.checked;return Gn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function NU(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=_d(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function J9(e,t){t=t.checked,t!=null&&VD(e,"checked",t,!1)}function EO(e,t){J9(e,t);var r=_d(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_O(e,t.type,r):t.hasOwnProperty("defaultValue")&&_O(e,t.type,_d(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function AU(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function _O(e,t,r){(t!=="number"||$_(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var My=Array.isArray;function em(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+_d(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function SO(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(De(91));return Gn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function OU(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(De(92));if(My(r)){if(1<r.length)throw Error(De(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:_d(r)}}function Q9(e,t){var r=_d(t.value),n=_d(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function kU(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Z9(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function TO(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Z9(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uw,eW=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uw=uw||document.createElement("div"),uw.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uw.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function H0(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var i0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},use=["Webkit","ms","Moz","O"];Object.keys(i0).forEach(function(e){use.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),i0[t]=i0[e]})});function tW(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||i0.hasOwnProperty(e)&&i0[e]?(""+t).trim():t+"px"}function rW(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=tW(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var dse=Gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function CO(e,t){if(t){if(dse[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(De(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(De(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(De(61))}if(t.style!=null&&typeof t.style!="object")throw Error(De(62))}}function xO(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RO=null;function zD(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var IO=null,tm=null,rm=null;function PU(e){if(e=rb(e)){if(typeof IO!="function")throw Error(De(280));var t=e.stateNode;t&&(t=VT(t),IO(e.stateNode,e.type,t))}}function nW(e){tm?rm?rm.push(e):rm=[e]:tm=e}function iW(){if(tm){var e=tm,t=rm;if(rm=tm=null,PU(e),t)for(e=0;e<t.length;e++)PU(t[e])}}function aW(e,t){return e(t)}function oW(){}var wR=!1;function sW(e,t,r){if(wR)return e(t,r);wR=!0;try{return aW(e,t,r)}finally{wR=!1,(tm!==null||rm!==null)&&(oW(),iW())}}function z0(e,t){var r=e.stateNode;if(r===null)return null;var n=VT(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(De(231,t,typeof r));return r}var NO=!1;if(Zc)try{var ry={};Object.defineProperty(ry,"passive",{get:function(){NO=!0}}),window.addEventListener("test",ry,ry),window.removeEventListener("test",ry,ry)}catch{NO=!1}function hse(e,t,r,n,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var a0=!1,H_=null,z_=!1,AO=null,fse={onError:function(e){a0=!0,H_=e}};function pse(e,t,r,n,i,a,o,s,l){a0=!1,H_=null,hse.apply(fse,arguments)}function mse(e,t,r,n,i,a,o,s,l){if(pse.apply(this,arguments),a0){if(a0){var c=H_;a0=!1,H_=null}else throw Error(De(198));z_||(z_=!0,AO=c)}}function mf(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function lW(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function DU(e){if(mf(e)!==e)throw Error(De(188))}function gse(e){var t=e.alternate;if(!t){if(t=mf(e),t===null)throw Error(De(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return DU(i),e;if(a===n)return DU(i),t;a=a.sibling}throw Error(De(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o)throw Error(De(189))}}if(r.alternate!==n)throw Error(De(190))}if(r.tag!==3)throw Error(De(188));return r.stateNode.current===r?e:t}function cW(e){return e=gse(e),e!==null?uW(e):null}function uW(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uW(e);if(t!==null)return t;e=e.sibling}return null}var dW=Yo.unstable_scheduleCallback,LU=Yo.unstable_cancelCallback,yse=Yo.unstable_shouldYield,vse=Yo.unstable_requestPaint,pi=Yo.unstable_now,bse=Yo.unstable_getCurrentPriorityLevel,GD=Yo.unstable_ImmediatePriority,hW=Yo.unstable_UserBlockingPriority,G_=Yo.unstable_NormalPriority,wse=Yo.unstable_LowPriority,fW=Yo.unstable_IdlePriority,jT=null,ec=null;function Ese(e){if(ec&&typeof ec.onCommitFiberRoot=="function")try{ec.onCommitFiberRoot(jT,e,void 0,(e.current.flags&128)===128)}catch{}}var gl=Math.clz32?Math.clz32:Tse,_se=Math.log,Sse=Math.LN2;function Tse(e){return e>>>=0,e===0?32:31-(_se(e)/Sse|0)|0}var dw=64,hw=4194304;function Uy(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function W_(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var s=o&~i;s!==0?n=Uy(s):(a&=o,a!==0&&(n=Uy(a)))}else o=r&~i,o!==0?n=Uy(o):a!==0&&(n=Uy(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-gl(t),i=1<<r,n|=e[r],t&=~i;return n}function Cse(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xse(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-gl(a),s=1<<o,l=i[o];l===-1?(!(s&r)||s&n)&&(i[o]=Cse(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}function OO(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pW(){var e=dw;return dw<<=1,!(dw&4194240)&&(dw=64),e}function ER(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function eb(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gl(t),e[t]=r}function Rse(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-gl(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function WD(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-gl(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var qr=0;function mW(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gW,KD,yW,vW,bW,kO=!1,fw=[],id=null,ad=null,od=null,G0=new Map,W0=new Map,Bu=[],Ise="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jU(e,t){switch(e){case"focusin":case"focusout":id=null;break;case"dragenter":case"dragleave":ad=null;break;case"mouseover":case"mouseout":od=null;break;case"pointerover":case"pointerout":G0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":W0.delete(t.pointerId)}}function ny(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=rb(t),t!==null&&KD(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Nse(e,t,r,n,i){switch(t){case"focusin":return id=ny(id,e,t,r,n,i),!0;case"dragenter":return ad=ny(ad,e,t,r,n,i),!0;case"mouseover":return od=ny(od,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return G0.set(a,ny(G0.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,W0.set(a,ny(W0.get(a)||null,e,t,r,n,i)),!0}return!1}function wW(e){var t=wh(e.target);if(t!==null){var r=mf(t);if(r!==null){if(t=r.tag,t===13){if(t=lW(r),t!==null){e.blockedOn=t,bW(e.priority,function(){yW(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function HE(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=PO(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);RO=n,r.target.dispatchEvent(n),RO=null}else return t=rb(r),t!==null&&KD(t),e.blockedOn=r,!1;t.shift()}return!0}function MU(e,t,r){HE(e)&&r.delete(t)}function Ase(){kO=!1,id!==null&&HE(id)&&(id=null),ad!==null&&HE(ad)&&(ad=null),od!==null&&HE(od)&&(od=null),G0.forEach(MU),W0.forEach(MU)}function iy(e,t){e.blockedOn===t&&(e.blockedOn=null,kO||(kO=!0,Yo.unstable_scheduleCallback(Yo.unstable_NormalPriority,Ase)))}function K0(e){function t(i){return iy(i,e)}if(0<fw.length){iy(fw[0],e);for(var r=1;r<fw.length;r++){var n=fw[r];n.blockedOn===e&&(n.blockedOn=null)}}for(id!==null&&iy(id,e),ad!==null&&iy(ad,e),od!==null&&iy(od,e),G0.forEach(t),W0.forEach(t),r=0;r<Bu.length;r++)n=Bu[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Bu.length&&(r=Bu[0],r.blockedOn===null);)wW(r),r.blockedOn===null&&Bu.shift()}var nm=uu.ReactCurrentBatchConfig,K_=!0;function Ose(e,t,r,n){var i=qr,a=nm.transition;nm.transition=null;try{qr=1,qD(e,t,r,n)}finally{qr=i,nm.transition=a}}function kse(e,t,r,n){var i=qr,a=nm.transition;nm.transition=null;try{qr=4,qD(e,t,r,n)}finally{qr=i,nm.transition=a}}function qD(e,t,r,n){if(K_){var i=PO(e,t,r,n);if(i===null)OR(e,t,n,q_,r),jU(e,n);else if(Nse(i,e,t,r,n))n.stopPropagation();else if(jU(e,n),t&4&&-1<Ise.indexOf(e)){for(;i!==null;){var a=rb(i);if(a!==null&&gW(a),a=PO(e,t,r,n),a===null&&OR(e,t,n,q_,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else OR(e,t,n,null,r)}}var q_=null;function PO(e,t,r,n){if(q_=null,e=zD(n),e=wh(e),e!==null)if(t=mf(e),t===null)e=null;else if(r=t.tag,r===13){if(e=lW(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return q_=e,null}function EW(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bse()){case GD:return 1;case hW:return 4;case G_:case wse:return 16;case fW:return 536870912;default:return 16}default:return 16}}var Ku=null,YD=null,zE=null;function _W(){if(zE)return zE;var e,t=YD,r=t.length,n,i="value"in Ku?Ku.value:Ku.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[a-n];n++);return zE=i.slice(e,1<n?1-n:void 0)}function GE(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pw(){return!0}function UU(){return!1}function rs(e){function t(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?pw:UU,this.isPropagationStopped=UU,this}return Gn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pw)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pw)},persist:function(){},isPersistent:pw}),t}var og={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XD=rs(og),tb=Gn({},og,{view:0,detail:0}),Pse=rs(tb),_R,SR,ay,MT=Gn({},tb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:JD,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ay&&(ay&&e.type==="mousemove"?(_R=e.screenX-ay.screenX,SR=e.screenY-ay.screenY):SR=_R=0,ay=e),_R)},movementY:function(e){return"movementY"in e?e.movementY:SR}}),FU=rs(MT),Dse=Gn({},MT,{dataTransfer:0}),Lse=rs(Dse),jse=Gn({},tb,{relatedTarget:0}),TR=rs(jse),Mse=Gn({},og,{animationName:0,elapsedTime:0,pseudoElement:0}),Use=rs(Mse),Fse=Gn({},og,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vse=rs(Fse),Bse=Gn({},og,{data:0}),VU=rs(Bse),$se={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hse={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zse={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gse(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zse[e])?!!t[e]:!1}function JD(){return Gse}var Wse=Gn({},tb,{key:function(e){if(e.key){var t=$se[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=GE(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hse[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:JD,charCode:function(e){return e.type==="keypress"?GE(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?GE(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kse=rs(Wse),qse=Gn({},MT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),BU=rs(qse),Yse=Gn({},tb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:JD}),Xse=rs(Yse),Jse=Gn({},og,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qse=rs(Jse),Zse=Gn({},MT,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ele=rs(Zse),tle=[9,13,27,32],QD=Zc&&"CompositionEvent"in window,o0=null;Zc&&"documentMode"in document&&(o0=document.documentMode);var rle=Zc&&"TextEvent"in window&&!o0,SW=Zc&&(!QD||o0&&8<o0&&11>=o0),$U=" ",HU=!1;function TW(e,t){switch(e){case"keyup":return tle.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CW(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rp=!1;function nle(e,t){switch(e){case"compositionend":return CW(t);case"keypress":return t.which!==32?null:(HU=!0,$U);case"textInput":return e=t.data,e===$U&&HU?null:e;default:return null}}function ile(e,t){if(Rp)return e==="compositionend"||!QD&&TW(e,t)?(e=_W(),zE=YD=Ku=null,Rp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return SW&&t.locale!=="ko"?null:t.data;default:return null}}var ale={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zU(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ale[e.type]:t==="textarea"}function xW(e,t,r,n){nW(n),t=Y_(t,"onChange"),0<t.length&&(r=new XD("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var s0=null,q0=null;function ole(e){MW(e,0)}function UT(e){var t=Ap(e);if(X9(t))return e}function sle(e,t){if(e==="change")return t}var RW=!1;if(Zc){var CR;if(Zc){var xR="oninput"in document;if(!xR){var GU=document.createElement("div");GU.setAttribute("oninput","return;"),xR=typeof GU.oninput=="function"}CR=xR}else CR=!1;RW=CR&&(!document.documentMode||9<document.documentMode)}function WU(){s0&&(s0.detachEvent("onpropertychange",IW),q0=s0=null)}function IW(e){if(e.propertyName==="value"&&UT(q0)){var t=[];xW(t,q0,e,zD(e)),sW(ole,t)}}function lle(e,t,r){e==="focusin"?(WU(),s0=t,q0=r,s0.attachEvent("onpropertychange",IW)):e==="focusout"&&WU()}function cle(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return UT(q0)}function ule(e,t){if(e==="click")return UT(t)}function dle(e,t){if(e==="input"||e==="change")return UT(t)}function hle(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bl=typeof Object.is=="function"?Object.is:hle;function Y0(e,t){if(bl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!mO.call(t,i)||!bl(e[i],t[i]))return!1}return!0}function KU(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qU(e,t){var r=KU(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=KU(r)}}function NW(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?NW(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function AW(){for(var e=window,t=$_();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=$_(e.document)}return t}function ZD(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fle(e){var t=AW(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&NW(r.ownerDocument.documentElement,r)){if(n!==null&&ZD(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=qU(r,a);var o=qU(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ple=Zc&&"documentMode"in document&&11>=document.documentMode,Ip=null,DO=null,l0=null,LO=!1;function YU(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;LO||Ip==null||Ip!==$_(n)||(n=Ip,"selectionStart"in n&&ZD(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),l0&&Y0(l0,n)||(l0=n,n=Y_(DO,"onSelect"),0<n.length&&(t=new XD("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ip)))}function mw(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Np={animationend:mw("Animation","AnimationEnd"),animationiteration:mw("Animation","AnimationIteration"),animationstart:mw("Animation","AnimationStart"),transitionend:mw("Transition","TransitionEnd")},RR={},OW={};Zc&&(OW=document.createElement("div").style,"AnimationEvent"in window||(delete Np.animationend.animation,delete Np.animationiteration.animation,delete Np.animationstart.animation),"TransitionEvent"in window||delete Np.transitionend.transition);function FT(e){if(RR[e])return RR[e];if(!Np[e])return e;var t=Np[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in OW)return RR[e]=t[r];return e}var kW=FT("animationend"),PW=FT("animationiteration"),DW=FT("animationstart"),LW=FT("transitionend"),jW=new Map,XU="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pd(e,t){jW.set(e,t),pf(t,[e])}for(var IR=0;IR<XU.length;IR++){var NR=XU[IR],mle=NR.toLowerCase(),gle=NR[0].toUpperCase()+NR.slice(1);Pd(mle,"on"+gle)}Pd(kW,"onAnimationEnd");Pd(PW,"onAnimationIteration");Pd(DW,"onAnimationStart");Pd("dblclick","onDoubleClick");Pd("focusin","onFocus");Pd("focusout","onBlur");Pd(LW,"onTransitionEnd");Cm("onMouseEnter",["mouseout","mouseover"]);Cm("onMouseLeave",["mouseout","mouseover"]);Cm("onPointerEnter",["pointerout","pointerover"]);Cm("onPointerLeave",["pointerout","pointerover"]);pf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pf("onBeforeInput",["compositionend","keypress","textInput","paste"]);pf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yle=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fy));function JU(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,mse(n,t,void 0,e),e.currentTarget=null}function MW(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;JU(i,s,c),a=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;JU(i,s,c),a=l}}}if(z_)throw e=AO,z_=!1,AO=null,e}function vn(e,t){var r=t[VO];r===void 0&&(r=t[VO]=new Set);var n=e+"__bubble";r.has(n)||(UW(t,e,2,!1),r.add(n))}function AR(e,t,r){var n=0;t&&(n|=4),UW(r,e,n,t)}var gw="_reactListening"+Math.random().toString(36).slice(2);function X0(e){if(!e[gw]){e[gw]=!0,G9.forEach(function(r){r!=="selectionchange"&&(yle.has(r)||AR(r,!1,e),AR(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gw]||(t[gw]=!0,AR("selectionchange",!1,t))}}function UW(e,t,r,n){switch(EW(t)){case 1:var i=Ose;break;case 4:i=kse;break;default:i=qD}r=i.bind(null,t,r,e),i=void 0,!NO||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function OR(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=wh(s),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}s=s.parentNode}}n=n.return}sW(function(){var c=a,u=zD(r),h=[];e:{var f=jW.get(e);if(f!==void 0){var p=XD,m=e;switch(e){case"keypress":if(GE(r)===0)break e;case"keydown":case"keyup":p=Kse;break;case"focusin":m="focus",p=TR;break;case"focusout":m="blur",p=TR;break;case"beforeblur":case"afterblur":p=TR;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=FU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Lse;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Xse;break;case kW:case PW:case DW:p=Use;break;case LW:p=Qse;break;case"scroll":p=Pse;break;case"wheel":p=ele;break;case"copy":case"cut":case"paste":p=Vse;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=BU}var g=(t&4)!==0,y=!g&&e==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var b=c,E;b!==null;){E=b;var S=E.stateNode;if(E.tag===5&&S!==null&&(E=S,v!==null&&(S=z0(b,v),S!=null&&g.push(J0(b,S,E)))),y)break;b=b.return}0<g.length&&(f=new p(f,m,null,r,u),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==RO&&(m=r.relatedTarget||r.fromElement)&&(wh(m)||m[eu]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?wh(m):null,m!==null&&(y=mf(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=FU,S="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(g=BU,S="onPointerLeave",v="onPointerEnter",b="pointer"),y=p==null?f:Ap(p),E=m==null?f:Ap(m),f=new g(S,b+"leave",p,r,u),f.target=y,f.relatedTarget=E,S=null,wh(u)===c&&(g=new g(v,b+"enter",m,r,u),g.target=E,g.relatedTarget=y,S=g),y=S,p&&m)t:{for(g=p,v=m,b=0,E=g;E;E=Wf(E))b++;for(E=0,S=v;S;S=Wf(S))E++;for(;0<b-E;)g=Wf(g),b--;for(;0<E-b;)v=Wf(v),E--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=Wf(g),v=Wf(v)}g=null}else g=null;p!==null&&QU(h,f,p,g,!1),m!==null&&y!==null&&QU(h,y,m,g,!0)}}e:{if(f=c?Ap(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var I=sle;else if(zU(f))if(RW)I=dle;else{I=cle;var N=lle}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=ule);if(I&&(I=I(e,c))){xW(h,I,r,u);break e}N&&N(e,f,c),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&_O(f,"number",f.value)}switch(N=c?Ap(c):window,e){case"focusin":(zU(N)||N.contentEditable==="true")&&(Ip=N,DO=c,l0=null);break;case"focusout":l0=DO=Ip=null;break;case"mousedown":LO=!0;break;case"contextmenu":case"mouseup":case"dragend":LO=!1,YU(h,r,u);break;case"selectionchange":if(ple)break;case"keydown":case"keyup":YU(h,r,u)}var L;if(QD)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Rp?TW(e,r)&&(j="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(SW&&r.locale!=="ko"&&(Rp||j!=="onCompositionStart"?j==="onCompositionEnd"&&Rp&&(L=_W()):(Ku=u,YD="value"in Ku?Ku.value:Ku.textContent,Rp=!0)),N=Y_(c,j),0<N.length&&(j=new VU(j,e,null,r,u),h.push({event:j,listeners:N}),L?j.data=L:(L=CW(r),L!==null&&(j.data=L)))),(L=rle?nle(e,r):ile(e,r))&&(c=Y_(c,"onBeforeInput"),0<c.length&&(u=new VU("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:c}),u.data=L))}MW(h,t)})}function J0(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Y_(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=z0(e,r),a!=null&&n.unshift(J0(e,a,i)),a=z0(e,t),a!=null&&n.push(J0(e,a,i))),e=e.return}return n}function Wf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function QU(e,t,r,n,i){for(var a=t._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&c!==null&&(s=c,i?(l=z0(r,a),l!=null&&o.unshift(J0(r,l,s))):i||(l=z0(r,a),l!=null&&o.push(J0(r,l,s)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var vle=/\r\n?/g,ble=/\u0000|\uFFFD/g;function ZU(e){return(typeof e=="string"?e:""+e).replace(vle,`
`).replace(ble,"")}function yw(e,t,r){if(t=ZU(t),ZU(e)!==t&&r)throw Error(De(425))}function X_(){}var jO=null,MO=null;function UO(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var FO=typeof setTimeout=="function"?setTimeout:void 0,wle=typeof clearTimeout=="function"?clearTimeout:void 0,e5=typeof Promise=="function"?Promise:void 0,Ele=typeof queueMicrotask=="function"?queueMicrotask:typeof e5<"u"?function(e){return e5.resolve(null).then(e).catch(_le)}:FO;function _le(e){setTimeout(function(){throw e})}function kR(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),K0(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);K0(t)}function sd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function t5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var sg=Math.random().toString(36).slice(2),Wl="__reactFiber$"+sg,Q0="__reactProps$"+sg,eu="__reactContainer$"+sg,VO="__reactEvents$"+sg,Sle="__reactListeners$"+sg,Tle="__reactHandles$"+sg;function wh(e){var t=e[Wl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[eu]||r[Wl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=t5(e);e!==null;){if(r=e[Wl])return r;e=t5(e)}return t}e=r,r=e.parentNode}return null}function rb(e){return e=e[Wl]||e[eu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ap(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(De(33))}function VT(e){return e[Q0]||null}var BO=[],Op=-1;function Dd(e){return{current:e}}function Tn(e){0>Op||(e.current=BO[Op],BO[Op]=null,Op--)}function pn(e,t){Op++,BO[Op]=e.current,e.current=t}var Sd={},Na=Dd(Sd),co=Dd(!1),Kh=Sd;function xm(e,t){var r=e.type.contextTypes;if(!r)return Sd;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function uo(e){return e=e.childContextTypes,e!=null}function J_(){Tn(co),Tn(Na)}function r5(e,t,r){if(Na.current!==Sd)throw Error(De(168));pn(Na,t),pn(co,r)}function FW(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(De(108,lse(e)||"Unknown",i));return Gn({},r,n)}function Q_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sd,Kh=Na.current,pn(Na,e),pn(co,co.current),!0}function n5(e,t,r){var n=e.stateNode;if(!n)throw Error(De(169));r?(e=FW(e,t,Kh),n.__reactInternalMemoizedMergedChildContext=e,Tn(co),Tn(Na),pn(Na,e)):Tn(co),pn(co,r)}var jc=null,BT=!1,PR=!1;function VW(e){jc===null?jc=[e]:jc.push(e)}function Cle(e){BT=!0,VW(e)}function Ld(){if(!PR&&jc!==null){PR=!0;var e=0,t=qr;try{var r=jc;for(qr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}jc=null,BT=!1}catch(i){throw jc!==null&&(jc=jc.slice(e+1)),dW(GD,Ld),i}finally{qr=t,PR=!1}}return null}var kp=[],Pp=0,Z_=null,eS=0,Rs=[],Is=0,qh=null,Hc=1,zc="";function ih(e,t){kp[Pp++]=eS,kp[Pp++]=Z_,Z_=e,eS=t}function BW(e,t,r){Rs[Is++]=Hc,Rs[Is++]=zc,Rs[Is++]=qh,qh=e;var n=Hc;e=zc;var i=32-gl(n)-1;n&=~(1<<i),r+=1;var a=32-gl(t)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Hc=1<<32-gl(t)+i|r<<i|n,zc=a+e}else Hc=1<<a|r<<i|n,zc=e}function e2(e){e.return!==null&&(ih(e,1),BW(e,1,0))}function t2(e){for(;e===Z_;)Z_=kp[--Pp],kp[Pp]=null,eS=kp[--Pp],kp[Pp]=null;for(;e===qh;)qh=Rs[--Is],Rs[Is]=null,zc=Rs[--Is],Rs[Is]=null,Hc=Rs[--Is],Rs[Is]=null}var Go=null,Uo=null,On=!1,dl=null;function $W(e,t){var r=Ds(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function i5(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Go=e,Uo=sd(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Go=e,Uo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=qh!==null?{id:Hc,overflow:zc}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ds(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Go=e,Uo=null,!0):!1;default:return!1}}function $O(e){return(e.mode&1)!==0&&(e.flags&128)===0}function HO(e){if(On){var t=Uo;if(t){var r=t;if(!i5(e,t)){if($O(e))throw Error(De(418));t=sd(r.nextSibling);var n=Go;t&&i5(e,t)?$W(n,r):(e.flags=e.flags&-4097|2,On=!1,Go=e)}}else{if($O(e))throw Error(De(418));e.flags=e.flags&-4097|2,On=!1,Go=e}}}function a5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Go=e}function vw(e){if(e!==Go)return!1;if(!On)return a5(e),On=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!UO(e.type,e.memoizedProps)),t&&(t=Uo)){if($O(e))throw HW(),Error(De(418));for(;t;)$W(e,t),t=sd(t.nextSibling)}if(a5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(De(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Uo=sd(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Uo=null}}else Uo=Go?sd(e.stateNode.nextSibling):null;return!0}function HW(){for(var e=Uo;e;)e=sd(e.nextSibling)}function Rm(){Uo=Go=null,On=!1}function r2(e){dl===null?dl=[e]:dl.push(e)}var xle=uu.ReactCurrentBatchConfig;function oy(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(De(309));var n=r.stateNode}if(!n)throw Error(De(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(De(284));if(!r._owner)throw Error(De(290,e))}return e}function bw(e,t){throw e=Object.prototype.toString.call(t),Error(De(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function o5(e){var t=e._init;return t(e._payload)}function zW(e){function t(v,b){if(e){var E=v.deletions;E===null?(v.deletions=[b],v.flags|=16):E.push(b)}}function r(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=dd(v,b),v.index=0,v.sibling=null,v}function a(v,b,E){return v.index=E,e?(E=v.alternate,E!==null?(E=E.index,E<b?(v.flags|=2,b):E):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,b,E,S){return b===null||b.tag!==6?(b=VR(E,v.mode,S),b.return=v,b):(b=i(b,E),b.return=v,b)}function l(v,b,E,S){var I=E.type;return I===xp?u(v,b,E.props.children,S,E.key):b!==null&&(b.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Mu&&o5(I)===b.type)?(S=i(b,E.props),S.ref=oy(v,b,E),S.return=v,S):(S=QE(E.type,E.key,E.props,null,v.mode,S),S.ref=oy(v,b,E),S.return=v,S)}function c(v,b,E,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==E.containerInfo||b.stateNode.implementation!==E.implementation?(b=BR(E,v.mode,S),b.return=v,b):(b=i(b,E.children||[]),b.return=v,b)}function u(v,b,E,S,I){return b===null||b.tag!==7?(b=Dh(E,v.mode,S,I),b.return=v,b):(b=i(b,E),b.return=v,b)}function h(v,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return b=VR(""+b,v.mode,E),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case lw:return E=QE(b.type,b.key,b.props,null,v.mode,E),E.ref=oy(v,null,b),E.return=v,E;case Cp:return b=BR(b,v.mode,E),b.return=v,b;case Mu:var S=b._init;return h(v,S(b._payload),E)}if(My(b)||ty(b))return b=Dh(b,v.mode,E,null),b.return=v,b;bw(v,b)}return null}function f(v,b,E,S){var I=b!==null?b.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return I!==null?null:s(v,b,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case lw:return E.key===I?l(v,b,E,S):null;case Cp:return E.key===I?c(v,b,E,S):null;case Mu:return I=E._init,f(v,b,I(E._payload),S)}if(My(E)||ty(E))return I!==null?null:u(v,b,E,S,null);bw(v,E)}return null}function p(v,b,E,S,I){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(E)||null,s(b,v,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case lw:return v=v.get(S.key===null?E:S.key)||null,l(b,v,S,I);case Cp:return v=v.get(S.key===null?E:S.key)||null,c(b,v,S,I);case Mu:var N=S._init;return p(v,b,E,N(S._payload),I)}if(My(S)||ty(S))return v=v.get(E)||null,u(b,v,S,I,null);bw(b,S)}return null}function m(v,b,E,S){for(var I=null,N=null,L=b,j=b=0,z=null;L!==null&&j<E.length;j++){L.index>j?(z=L,L=null):z=L.sibling;var A=f(v,L,E[j],S);if(A===null){L===null&&(L=z);break}e&&L&&A.alternate===null&&t(v,L),b=a(A,b,j),N===null?I=A:N.sibling=A,N=A,L=z}if(j===E.length)return r(v,L),On&&ih(v,j),I;if(L===null){for(;j<E.length;j++)L=h(v,E[j],S),L!==null&&(b=a(L,b,j),N===null?I=L:N.sibling=L,N=L);return On&&ih(v,j),I}for(L=n(v,L);j<E.length;j++)z=p(L,v,j,E[j],S),z!==null&&(e&&z.alternate!==null&&L.delete(z.key===null?j:z.key),b=a(z,b,j),N===null?I=z:N.sibling=z,N=z);return e&&L.forEach(function(V){return t(v,V)}),On&&ih(v,j),I}function g(v,b,E,S){var I=ty(E);if(typeof I!="function")throw Error(De(150));if(E=I.call(E),E==null)throw Error(De(151));for(var N=I=null,L=b,j=b=0,z=null,A=E.next();L!==null&&!A.done;j++,A=E.next()){L.index>j?(z=L,L=null):z=L.sibling;var V=f(v,L,A.value,S);if(V===null){L===null&&(L=z);break}e&&L&&V.alternate===null&&t(v,L),b=a(V,b,j),N===null?I=V:N.sibling=V,N=V,L=z}if(A.done)return r(v,L),On&&ih(v,j),I;if(L===null){for(;!A.done;j++,A=E.next())A=h(v,A.value,S),A!==null&&(b=a(A,b,j),N===null?I=A:N.sibling=A,N=A);return On&&ih(v,j),I}for(L=n(v,L);!A.done;j++,A=E.next())A=p(L,v,j,A.value,S),A!==null&&(e&&A.alternate!==null&&L.delete(A.key===null?j:A.key),b=a(A,b,j),N===null?I=A:N.sibling=A,N=A);return e&&L.forEach(function(G){return t(v,G)}),On&&ih(v,j),I}function y(v,b,E,S){if(typeof E=="object"&&E!==null&&E.type===xp&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case lw:e:{for(var I=E.key,N=b;N!==null;){if(N.key===I){if(I=E.type,I===xp){if(N.tag===7){r(v,N.sibling),b=i(N,E.props.children),b.return=v,v=b;break e}}else if(N.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Mu&&o5(I)===N.type){r(v,N.sibling),b=i(N,E.props),b.ref=oy(v,N,E),b.return=v,v=b;break e}r(v,N);break}else t(v,N);N=N.sibling}E.type===xp?(b=Dh(E.props.children,v.mode,S,E.key),b.return=v,v=b):(S=QE(E.type,E.key,E.props,null,v.mode,S),S.ref=oy(v,b,E),S.return=v,v=S)}return o(v);case Cp:e:{for(N=E.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===E.containerInfo&&b.stateNode.implementation===E.implementation){r(v,b.sibling),b=i(b,E.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else t(v,b);b=b.sibling}b=BR(E,v.mode,S),b.return=v,v=b}return o(v);case Mu:return N=E._init,y(v,b,N(E._payload),S)}if(My(E))return m(v,b,E,S);if(ty(E))return g(v,b,E,S);bw(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,b!==null&&b.tag===6?(r(v,b.sibling),b=i(b,E),b.return=v,v=b):(r(v,b),b=VR(E,v.mode,S),b.return=v,v=b),o(v)):r(v,b)}return y}var Im=zW(!0),GW=zW(!1),tS=Dd(null),rS=null,Dp=null,n2=null;function i2(){n2=Dp=rS=null}function a2(e){var t=tS.current;Tn(tS),e._currentValue=t}function zO(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function im(e,t){rS=e,n2=Dp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(so=!0),e.firstContext=null)}function Us(e){var t=e._currentValue;if(n2!==e)if(e={context:e,memoizedValue:t,next:null},Dp===null){if(rS===null)throw Error(De(308));Dp=e,rS.dependencies={lanes:0,firstContext:e}}else Dp=Dp.next=e;return t}var Eh=null;function o2(e){Eh===null?Eh=[e]:Eh.push(e)}function WW(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,o2(t)):(r.next=i.next,i.next=r),t.interleaved=r,tu(e,n)}function tu(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Uu=!1;function s2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KW(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ld(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,_r&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,tu(e,r)}return i=n.interleaved,i===null?(t.next=t,o2(n)):(t.next=i.next,i.next=t),n.interleaved=t,tu(e,r)}function WE(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,WD(e,r)}}function s5(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function nS(e,t,r,n){var i=e.updateQueue;Uu=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,o===null?a=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(a!==null){var h=i.baseState;o=0,u=c=l=null,s=a;do{var f=s.lane,p=s.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,g=s;switch(f=t,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Gn({},h,f);break e;case 2:Uu=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Xh|=o,e.lanes=o,e.memoizedState=h}}function l5(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(De(191,i));i.call(n)}}}var nb={},tc=Dd(nb),Z0=Dd(nb),ev=Dd(nb);function _h(e){if(e===nb)throw Error(De(174));return e}function l2(e,t){switch(pn(ev,t),pn(Z0,e),pn(tc,nb),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:TO(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=TO(t,e)}Tn(tc),pn(tc,t)}function Nm(){Tn(tc),Tn(Z0),Tn(ev)}function qW(e){_h(ev.current);var t=_h(tc.current),r=TO(t,e.type);t!==r&&(pn(Z0,e),pn(tc,r))}function c2(e){Z0.current===e&&(Tn(tc),Tn(Z0))}var Vn=Dd(0);function iS(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var DR=[];function u2(){for(var e=0;e<DR.length;e++)DR[e]._workInProgressVersionPrimary=null;DR.length=0}var KE=uu.ReactCurrentDispatcher,LR=uu.ReactCurrentBatchConfig,Yh=0,Hn=null,Mi=null,qi=null,aS=!1,c0=!1,tv=0,Rle=0;function ya(){throw Error(De(321))}function d2(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!bl(e[r],t[r]))return!1;return!0}function h2(e,t,r,n,i,a){if(Yh=a,Hn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,KE.current=e===null||e.memoizedState===null?Ole:kle,e=r(n,i),c0){a=0;do{if(c0=!1,tv=0,25<=a)throw Error(De(301));a+=1,qi=Mi=null,t.updateQueue=null,KE.current=Ple,e=r(n,i)}while(c0)}if(KE.current=oS,t=Mi!==null&&Mi.next!==null,Yh=0,qi=Mi=Hn=null,aS=!1,t)throw Error(De(300));return e}function f2(){var e=tv!==0;return tv=0,e}function Fl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qi===null?Hn.memoizedState=qi=e:qi=qi.next=e,qi}function Fs(){if(Mi===null){var e=Hn.alternate;e=e!==null?e.memoizedState:null}else e=Mi.next;var t=qi===null?Hn.memoizedState:qi.next;if(t!==null)qi=t,Mi=e;else{if(e===null)throw Error(De(310));Mi=e,e={memoizedState:Mi.memoizedState,baseState:Mi.baseState,baseQueue:Mi.baseQueue,queue:Mi.queue,next:null},qi===null?Hn.memoizedState=qi=e:qi=qi.next=e}return qi}function rv(e,t){return typeof t=="function"?t(e):t}function jR(e){var t=Fs(),r=t.queue;if(r===null)throw Error(De(311));r.lastRenderedReducer=e;var n=Mi,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,l=null,c=a;do{var u=c.lane;if((Yh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=h,o=n):l=l.next=h,Hn.lanes|=u,Xh|=u}c=c.next}while(c!==null&&c!==a);l===null?o=n:l.next=s,bl(n,t.memoizedState)||(so=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,Hn.lanes|=a,Xh|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function MR(e){var t=Fs(),r=t.queue;if(r===null)throw Error(De(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);bl(a,t.memoizedState)||(so=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function YW(){}function XW(e,t){var r=Hn,n=Fs(),i=t(),a=!bl(n.memoizedState,i);if(a&&(n.memoizedState=i,so=!0),n=n.queue,p2(ZW.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||qi!==null&&qi.memoizedState.tag&1){if(r.flags|=2048,nv(9,QW.bind(null,r,n,i,t),void 0,null),ea===null)throw Error(De(349));Yh&30||JW(r,t,i)}return i}function JW(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Hn.updateQueue,t===null?(t={lastEffect:null,stores:null},Hn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function QW(e,t,r,n){t.value=r,t.getSnapshot=n,e1(t)&&t1(e)}function ZW(e,t,r){return r(function(){e1(t)&&t1(e)})}function e1(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!bl(e,r)}catch{return!0}}function t1(e){var t=tu(e,1);t!==null&&yl(t,e,1,-1)}function c5(e){var t=Fl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rv,lastRenderedState:e},t.queue=e,e=e.dispatch=Ale.bind(null,Hn,e),[t.memoizedState,e]}function nv(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Hn.updateQueue,t===null?(t={lastEffect:null,stores:null},Hn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function r1(){return Fs().memoizedState}function qE(e,t,r,n){var i=Fl();Hn.flags|=e,i.memoizedState=nv(1|t,r,void 0,n===void 0?null:n)}function $T(e,t,r,n){var i=Fs();n=n===void 0?null:n;var a=void 0;if(Mi!==null){var o=Mi.memoizedState;if(a=o.destroy,n!==null&&d2(n,o.deps)){i.memoizedState=nv(t,r,a,n);return}}Hn.flags|=e,i.memoizedState=nv(1|t,r,a,n)}function u5(e,t){return qE(8390656,8,e,t)}function p2(e,t){return $T(2048,8,e,t)}function n1(e,t){return $T(4,2,e,t)}function i1(e,t){return $T(4,4,e,t)}function a1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function o1(e,t,r){return r=r!=null?r.concat([e]):null,$T(4,4,a1.bind(null,t,e),r)}function m2(){}function s1(e,t){var r=Fs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&d2(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function l1(e,t){var r=Fs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&d2(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function c1(e,t,r){return Yh&21?(bl(r,t)||(r=pW(),Hn.lanes|=r,Xh|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,so=!0),e.memoizedState=r)}function Ile(e,t){var r=qr;qr=r!==0&&4>r?r:4,e(!0);var n=LR.transition;LR.transition={};try{e(!1),t()}finally{qr=r,LR.transition=n}}function u1(){return Fs().memoizedState}function Nle(e,t,r){var n=ud(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},d1(e))h1(t,r);else if(r=WW(e,t,r,n),r!==null){var i=Ha();yl(r,e,n,i),f1(r,t,n)}}function Ale(e,t,r){var n=ud(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(d1(e))h1(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,r);if(i.hasEagerState=!0,i.eagerState=s,bl(s,o)){var l=t.interleaved;l===null?(i.next=i,o2(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=WW(e,t,i,n),r!==null&&(i=Ha(),yl(r,e,n,i),f1(r,t,n))}}function d1(e){var t=e.alternate;return e===Hn||t!==null&&t===Hn}function h1(e,t){c0=aS=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function f1(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,WD(e,r)}}var oS={readContext:Us,useCallback:ya,useContext:ya,useEffect:ya,useImperativeHandle:ya,useInsertionEffect:ya,useLayoutEffect:ya,useMemo:ya,useReducer:ya,useRef:ya,useState:ya,useDebugValue:ya,useDeferredValue:ya,useTransition:ya,useMutableSource:ya,useSyncExternalStore:ya,useId:ya,unstable_isNewReconciler:!1},Ole={readContext:Us,useCallback:function(e,t){return Fl().memoizedState=[e,t===void 0?null:t],e},useContext:Us,useEffect:u5,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,qE(4194308,4,a1.bind(null,t,e),r)},useLayoutEffect:function(e,t){return qE(4194308,4,e,t)},useInsertionEffect:function(e,t){return qE(4,2,e,t)},useMemo:function(e,t){var r=Fl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Fl();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Nle.bind(null,Hn,e),[n.memoizedState,e]},useRef:function(e){var t=Fl();return e={current:e},t.memoizedState=e},useState:c5,useDebugValue:m2,useDeferredValue:function(e){return Fl().memoizedState=e},useTransition:function(){var e=c5(!1),t=e[0];return e=Ile.bind(null,e[1]),Fl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Hn,i=Fl();if(On){if(r===void 0)throw Error(De(407));r=r()}else{if(r=t(),ea===null)throw Error(De(349));Yh&30||JW(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,u5(ZW.bind(null,n,a,e),[e]),n.flags|=2048,nv(9,QW.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Fl(),t=ea.identifierPrefix;if(On){var r=zc,n=Hc;r=(n&~(1<<32-gl(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=tv++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Rle++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kle={readContext:Us,useCallback:s1,useContext:Us,useEffect:p2,useImperativeHandle:o1,useInsertionEffect:n1,useLayoutEffect:i1,useMemo:l1,useReducer:jR,useRef:r1,useState:function(){return jR(rv)},useDebugValue:m2,useDeferredValue:function(e){var t=Fs();return c1(t,Mi.memoizedState,e)},useTransition:function(){var e=jR(rv)[0],t=Fs().memoizedState;return[e,t]},useMutableSource:YW,useSyncExternalStore:XW,useId:u1,unstable_isNewReconciler:!1},Ple={readContext:Us,useCallback:s1,useContext:Us,useEffect:p2,useImperativeHandle:o1,useInsertionEffect:n1,useLayoutEffect:i1,useMemo:l1,useReducer:MR,useRef:r1,useState:function(){return MR(rv)},useDebugValue:m2,useDeferredValue:function(e){var t=Fs();return Mi===null?t.memoizedState=e:c1(t,Mi.memoizedState,e)},useTransition:function(){var e=MR(rv)[0],t=Fs().memoizedState;return[e,t]},useMutableSource:YW,useSyncExternalStore:XW,useId:u1,unstable_isNewReconciler:!1};function sl(e,t){if(e&&e.defaultProps){t=Gn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function GO(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Gn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var HT={isMounted:function(e){return(e=e._reactInternals)?mf(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ha(),i=ud(e),a=Kc(n,i);a.payload=t,r!=null&&(a.callback=r),t=ld(e,a,i),t!==null&&(yl(t,e,i,n),WE(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ha(),i=ud(e),a=Kc(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=ld(e,a,i),t!==null&&(yl(t,e,i,n),WE(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ha(),n=ud(e),i=Kc(r,n);i.tag=2,t!=null&&(i.callback=t),t=ld(e,i,n),t!==null&&(yl(t,e,n,r),WE(t,e,n))}};function d5(e,t,r,n,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!Y0(r,n)||!Y0(i,a):!0}function p1(e,t,r){var n=!1,i=Sd,a=t.contextType;return typeof a=="object"&&a!==null?a=Us(a):(i=uo(t)?Kh:Na.current,n=t.contextTypes,a=(n=n!=null)?xm(e,i):Sd),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=HT,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function h5(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&HT.enqueueReplaceState(t,t.state,null)}function WO(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},s2(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Us(a):(a=uo(t)?Kh:Na.current,i.context=xm(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(GO(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&HT.enqueueReplaceState(i,i.state,null),nS(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Am(e,t){try{var r="",n=t;do r+=sse(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function UR(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function KO(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Dle=typeof WeakMap=="function"?WeakMap:Map;function m1(e,t,r){r=Kc(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){lS||(lS=!0,nk=n),KO(e,t)},r}function g1(e,t,r){r=Kc(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){KO(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){KO(e,t),typeof n!="function"&&(cd===null?cd=new Set([this]):cd.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function f5(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Dle;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=qle.bind(null,e,t,r),t.then(e,e))}function p5(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function m5(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Kc(-1,1),t.tag=2,ld(r,t,1))),r.lanes|=1),e)}var Lle=uu.ReactCurrentOwner,so=!1;function Fa(e,t,r,n){t.child=e===null?GW(t,null,r,n):Im(t,e.child,r,n)}function g5(e,t,r,n,i){r=r.render;var a=t.ref;return im(t,i),n=h2(e,t,r,n,a,i),r=f2(),e!==null&&!so?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ru(e,t,i)):(On&&r&&e2(t),t.flags|=1,Fa(e,t,n,i),t.child)}function y5(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!S2(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,y1(e,t,a,n,i)):(e=QE(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Y0,r(o,n)&&e.ref===t.ref)return ru(e,t,i)}return t.flags|=1,e=dd(a,n),e.ref=t.ref,e.return=t,t.child=e}function y1(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(Y0(a,n)&&e.ref===t.ref)if(so=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(so=!0);else return t.lanes=e.lanes,ru(e,t,i)}return qO(e,t,r,n,i)}function v1(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(jp,Po),Po|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pn(jp,Po),Po|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,pn(jp,Po),Po|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,pn(jp,Po),Po|=n;return Fa(e,t,i,r),t.child}function b1(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function qO(e,t,r,n,i){var a=uo(r)?Kh:Na.current;return a=xm(t,a),im(t,i),r=h2(e,t,r,n,a,i),n=f2(),e!==null&&!so?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ru(e,t,i)):(On&&n&&e2(t),t.flags|=1,Fa(e,t,r,i),t.child)}function v5(e,t,r,n,i){if(uo(r)){var a=!0;Q_(t)}else a=!1;if(im(t,i),t.stateNode===null)YE(e,t),p1(t,r,n),WO(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Us(c):(c=uo(r)?Kh:Na.current,c=xm(t,c));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==c)&&h5(t,o,n,c),Uu=!1;var f=t.memoizedState;o.state=f,nS(t,n,o,i),l=t.memoizedState,s!==n||f!==l||co.current||Uu?(typeof u=="function"&&(GO(t,r,u,n),l=t.memoizedState),(s=Uu||d5(t,r,s,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,KW(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:sl(t.type,s),o.props=c,h=t.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Us(l):(l=uo(r)?Kh:Na.current,l=xm(t,l));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==h||f!==l)&&h5(t,o,n,l),Uu=!1,f=t.memoizedState,o.state=f,nS(t,n,o,i);var m=t.memoizedState;s!==h||f!==m||co.current||Uu?(typeof p=="function"&&(GO(t,r,p,n),m=t.memoizedState),(c=Uu||d5(t,r,c,n,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return YO(e,t,r,n,a,i)}function YO(e,t,r,n,i,a){b1(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&n5(t,r,!1),ru(e,t,a);n=t.stateNode,Lle.current=t;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Im(t,e.child,null,a),t.child=Im(t,null,s,a)):Fa(e,t,s,a),t.memoizedState=n.state,i&&n5(t,r,!0),t.child}function w1(e){var t=e.stateNode;t.pendingContext?r5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&r5(e,t.context,!1),l2(e,t.containerInfo)}function b5(e,t,r,n,i){return Rm(),r2(i),t.flags|=256,Fa(e,t,r,n),t.child}var XO={dehydrated:null,treeContext:null,retryLane:0};function JO(e){return{baseLanes:e,cachePool:null,transitions:null}}function E1(e,t,r){var n=t.pendingProps,i=Vn.current,a=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),pn(Vn,i&1),e===null)return HO(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=WT(o,n,0,null),e=Dh(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=JO(r),t.memoizedState=XO,e):g2(t,o));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return jle(e,t,o,n,s,i,r);if(a){a=n.fallback,o=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=dd(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=dd(s,a):(a=Dh(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?JO(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=XO,n}return a=e.child,e=a.sibling,n=dd(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function g2(e,t){return t=WT({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ww(e,t,r,n){return n!==null&&r2(n),Im(t,e.child,null,r),e=g2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jle(e,t,r,n,i,a,o){if(r)return t.flags&256?(t.flags&=-257,n=UR(Error(De(422))),ww(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=WT({mode:"visible",children:n.children},i,0,null),a=Dh(a,i,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Im(t,e.child,null,o),t.child.memoizedState=JO(o),t.memoizedState=XO,a);if(!(t.mode&1))return ww(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(De(419)),n=UR(a,n,void 0),ww(e,t,o,n)}if(s=(o&e.childLanes)!==0,so||s){if(n=ea,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,tu(e,i),yl(n,e,i,-1))}return _2(),n=UR(Error(De(421))),ww(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Yle.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Uo=sd(i.nextSibling),Go=t,On=!0,dl=null,e!==null&&(Rs[Is++]=Hc,Rs[Is++]=zc,Rs[Is++]=qh,Hc=e.id,zc=e.overflow,qh=t),t=g2(t,n.children),t.flags|=4096,t)}function w5(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),zO(e.return,t,r)}function FR(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function _1(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Fa(e,t,n.children,r),n=Vn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&w5(e,r,t);else if(e.tag===19)w5(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(pn(Vn,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&iS(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),FR(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&iS(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}FR(t,!0,r,null,a);break;case"together":FR(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function YE(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ru(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Xh|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(De(153));if(t.child!==null){for(e=t.child,r=dd(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=dd(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Mle(e,t,r){switch(t.tag){case 3:w1(t),Rm();break;case 5:qW(t);break;case 1:uo(t.type)&&Q_(t);break;case 4:l2(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;pn(tS,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(pn(Vn,Vn.current&1),t.flags|=128,null):r&t.child.childLanes?E1(e,t,r):(pn(Vn,Vn.current&1),e=ru(e,t,r),e!==null?e.sibling:null);pn(Vn,Vn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return _1(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pn(Vn,Vn.current),n)break;return null;case 22:case 23:return t.lanes=0,v1(e,t,r)}return ru(e,t,r)}var S1,QO,T1,C1;S1=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};QO=function(){};T1=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,_h(tc.current);var a=null;switch(r){case"input":i=wO(e,i),n=wO(e,n),a=[];break;case"select":i=Gn({},i,{value:void 0}),n=Gn({},n,{value:void 0}),a=[];break;case"textarea":i=SO(e,i),n=SO(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=X_)}CO(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($0.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(s=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(a||(a=[]),a.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($0.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&vn("scroll",e),a||s===l||(a=[])):(a=a||[]).push(c,l))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};C1=function(e,t,r,n){r!==n&&(t.flags|=4)};function sy(e,t){if(!On)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function va(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ule(e,t,r){var n=t.pendingProps;switch(t2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return va(t),null;case 1:return uo(t.type)&&J_(),va(t),null;case 3:return n=t.stateNode,Nm(),Tn(co),Tn(Na),u2(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(vw(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,dl!==null&&(ok(dl),dl=null))),QO(e,t),va(t),null;case 5:c2(t);var i=_h(ev.current);if(r=t.type,e!==null&&t.stateNode!=null)T1(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(De(166));return va(t),null}if(e=_h(tc.current),vw(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Wl]=t,n[Q0]=a,e=(t.mode&1)!==0,r){case"dialog":vn("cancel",n),vn("close",n);break;case"iframe":case"object":case"embed":vn("load",n);break;case"video":case"audio":for(i=0;i<Fy.length;i++)vn(Fy[i],n);break;case"source":vn("error",n);break;case"img":case"image":case"link":vn("error",n),vn("load",n);break;case"details":vn("toggle",n);break;case"input":NU(n,a),vn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},vn("invalid",n);break;case"textarea":OU(n,a),vn("invalid",n)}CO(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&yw(n.textContent,s,e),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&yw(n.textContent,s,e),i=["children",""+s]):$0.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&vn("scroll",n)}switch(r){case"input":cw(n),AU(n,a,!0);break;case"textarea":cw(n),kU(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=X_)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Z9(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Wl]=t,e[Q0]=n,S1(e,t,!1,!1),t.stateNode=e;e:{switch(o=xO(r,n),r){case"dialog":vn("cancel",e),vn("close",e),i=n;break;case"iframe":case"object":case"embed":vn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Fy.length;i++)vn(Fy[i],e);i=n;break;case"source":vn("error",e),i=n;break;case"img":case"image":case"link":vn("error",e),vn("load",e),i=n;break;case"details":vn("toggle",e),i=n;break;case"input":NU(e,n),i=wO(e,n),vn("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Gn({},n,{value:void 0}),vn("invalid",e);break;case"textarea":OU(e,n),i=SO(e,n),vn("invalid",e);break;default:i=n}CO(r,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?rW(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&eW(e,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&H0(e,l):typeof l=="number"&&H0(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&($0.hasOwnProperty(a)?l!=null&&a==="onScroll"&&vn("scroll",e):l!=null&&VD(e,a,l,o))}switch(r){case"input":cw(e),AU(e,n,!1);break;case"textarea":cw(e),kU(e);break;case"option":n.value!=null&&e.setAttribute("value",""+_d(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?em(e,!!n.multiple,a,!1):n.defaultValue!=null&&em(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=X_)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return va(t),null;case 6:if(e&&t.stateNode!=null)C1(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(De(166));if(r=_h(ev.current),_h(tc.current),vw(t)){if(n=t.stateNode,r=t.memoizedProps,n[Wl]=t,(a=n.nodeValue!==r)&&(e=Go,e!==null))switch(e.tag){case 3:yw(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yw(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Wl]=t,t.stateNode=n}return va(t),null;case 13:if(Tn(Vn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(On&&Uo!==null&&t.mode&1&&!(t.flags&128))HW(),Rm(),t.flags|=98560,a=!1;else if(a=vw(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(De(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(De(317));a[Wl]=t}else Rm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;va(t),a=!1}else dl!==null&&(ok(dl),dl=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Vn.current&1?Fi===0&&(Fi=3):_2())),t.updateQueue!==null&&(t.flags|=4),va(t),null);case 4:return Nm(),QO(e,t),e===null&&X0(t.stateNode.containerInfo),va(t),null;case 10:return a2(t.type._context),va(t),null;case 17:return uo(t.type)&&J_(),va(t),null;case 19:if(Tn(Vn),a=t.memoizedState,a===null)return va(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)sy(a,!1);else{if(Fi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=iS(e),o!==null){for(t.flags|=128,sy(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return pn(Vn,Vn.current&1|2),t.child}e=e.sibling}a.tail!==null&&pi()>Om&&(t.flags|=128,n=!0,sy(a,!1),t.lanes=4194304)}else{if(!n)if(e=iS(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),sy(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!On)return va(t),null}else 2*pi()-a.renderingStartTime>Om&&r!==1073741824&&(t.flags|=128,n=!0,sy(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=pi(),t.sibling=null,r=Vn.current,pn(Vn,n?r&1|2:r&1),t):(va(t),null);case 22:case 23:return E2(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Po&1073741824&&(va(t),t.subtreeFlags&6&&(t.flags|=8192)):va(t),null;case 24:return null;case 25:return null}throw Error(De(156,t.tag))}function Fle(e,t){switch(t2(t),t.tag){case 1:return uo(t.type)&&J_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nm(),Tn(co),Tn(Na),u2(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return c2(t),null;case 13:if(Tn(Vn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(De(340));Rm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Tn(Vn),null;case 4:return Nm(),null;case 10:return a2(t.type._context),null;case 22:case 23:return E2(),null;case 24:return null;default:return null}}var Ew=!1,Ca=!1,Vle=typeof WeakSet=="function"?WeakSet:Set,at=null;function Lp(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ti(e,t,n)}else r.current=null}function ZO(e,t,r){try{r()}catch(n){ti(e,t,n)}}var E5=!1;function Ble(e,t){if(jO=K_,e=AW(),ZD(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,c=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(s=o+i),h!==a||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++c===i&&(s=o),f===a&&++u===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(MO={focusedElem:e,selectionRange:r},K_=!1,at=t;at!==null;)if(t=at,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,at=e;else for(;at!==null;){t=at;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:sl(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(De(163))}}catch(S){ti(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,at=e;break}at=t.return}return m=E5,E5=!1,m}function u0(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&ZO(t,r,a)}i=i.next}while(i!==n)}}function zT(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ek(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function x1(e){var t=e.alternate;t!==null&&(e.alternate=null,x1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wl],delete t[Q0],delete t[VO],delete t[Sle],delete t[Tle])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function R1(e){return e.tag===5||e.tag===3||e.tag===4}function _5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||R1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tk(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=X_));else if(n!==4&&(e=e.child,e!==null))for(tk(e,t,r),e=e.sibling;e!==null;)tk(e,t,r),e=e.sibling}function rk(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(rk(e,t,r),e=e.sibling;e!==null;)rk(e,t,r),e=e.sibling}var oa=null,cl=!1;function wu(e,t,r){for(r=r.child;r!==null;)I1(e,t,r),r=r.sibling}function I1(e,t,r){if(ec&&typeof ec.onCommitFiberUnmount=="function")try{ec.onCommitFiberUnmount(jT,r)}catch{}switch(r.tag){case 5:Ca||Lp(r,t);case 6:var n=oa,i=cl;oa=null,wu(e,t,r),oa=n,cl=i,oa!==null&&(cl?(e=oa,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):oa.removeChild(r.stateNode));break;case 18:oa!==null&&(cl?(e=oa,r=r.stateNode,e.nodeType===8?kR(e.parentNode,r):e.nodeType===1&&kR(e,r),K0(e)):kR(oa,r.stateNode));break;case 4:n=oa,i=cl,oa=r.stateNode.containerInfo,cl=!0,wu(e,t,r),oa=n,cl=i;break;case 0:case 11:case 14:case 15:if(!Ca&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&ZO(r,t,o),i=i.next}while(i!==n)}wu(e,t,r);break;case 1:if(!Ca&&(Lp(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){ti(r,t,s)}wu(e,t,r);break;case 21:wu(e,t,r);break;case 22:r.mode&1?(Ca=(n=Ca)||r.memoizedState!==null,wu(e,t,r),Ca=n):wu(e,t,r);break;default:wu(e,t,r)}}function S5(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Vle),t.forEach(function(n){var i=Xle.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Js(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:oa=s.stateNode,cl=!1;break e;case 3:oa=s.stateNode.containerInfo,cl=!0;break e;case 4:oa=s.stateNode.containerInfo,cl=!0;break e}s=s.return}if(oa===null)throw Error(De(160));I1(a,o,i),oa=null,cl=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ti(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)N1(t,e),t=t.sibling}function N1(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Js(t,e),Il(e),n&4){try{u0(3,e,e.return),zT(3,e)}catch(g){ti(e,e.return,g)}try{u0(5,e,e.return)}catch(g){ti(e,e.return,g)}}break;case 1:Js(t,e),Il(e),n&512&&r!==null&&Lp(r,r.return);break;case 5:if(Js(t,e),Il(e),n&512&&r!==null&&Lp(r,r.return),e.flags&32){var i=e.stateNode;try{H0(i,"")}catch(g){ti(e,e.return,g)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&J9(i,a),xO(s,o);var c=xO(s,a);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?rW(i,h):u==="dangerouslySetInnerHTML"?eW(i,h):u==="children"?H0(i,h):VD(i,u,h,c)}switch(s){case"input":EO(i,a);break;case"textarea":Q9(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?em(i,!!a.multiple,p,!1):f!==!!a.multiple&&(a.defaultValue!=null?em(i,!!a.multiple,a.defaultValue,!0):em(i,!!a.multiple,a.multiple?[]:"",!1))}i[Q0]=a}catch(g){ti(e,e.return,g)}}break;case 6:if(Js(t,e),Il(e),n&4){if(e.stateNode===null)throw Error(De(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){ti(e,e.return,g)}}break;case 3:if(Js(t,e),Il(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{K0(t.containerInfo)}catch(g){ti(e,e.return,g)}break;case 4:Js(t,e),Il(e);break;case 13:Js(t,e),Il(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(b2=pi())),n&4&&S5(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Ca=(c=Ca)||u,Js(t,e),Ca=c):Js(t,e),Il(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(at=e,u=e.child;u!==null;){for(h=at=u;at!==null;){switch(f=at,p=f.child,f.tag){case 0:case 11:case 14:case 15:u0(4,f,f.return);break;case 1:Lp(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){ti(n,r,g)}}break;case 5:Lp(f,f.return);break;case 22:if(f.memoizedState!==null){C5(h);continue}}p!==null?(p.return=f,at=p):C5(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=tW("display",o))}catch(g){ti(e,e.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){ti(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Js(t,e),Il(e),n&4&&S5(e);break;case 21:break;default:Js(t,e),Il(e)}}function Il(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(R1(r)){var n=r;break e}r=r.return}throw Error(De(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(H0(i,""),n.flags&=-33);var a=_5(e);rk(e,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=_5(e);tk(e,s,o);break;default:throw Error(De(161))}}catch(l){ti(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $le(e,t,r){at=e,A1(e)}function A1(e,t,r){for(var n=(e.mode&1)!==0;at!==null;){var i=at,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Ew;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||Ca;s=Ew;var c=Ca;if(Ew=o,(Ca=l)&&!c)for(at=i;at!==null;)o=at,l=o.child,o.tag===22&&o.memoizedState!==null?x5(i):l!==null?(l.return=o,at=l):x5(i);for(;a!==null;)at=a,A1(a),a=a.sibling;at=i,Ew=s,Ca=c}T5(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,at=a):T5(e)}}function T5(e){for(;at!==null;){var t=at;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ca||zT(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ca)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:sl(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&l5(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}l5(t,o,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&K0(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(De(163))}Ca||t.flags&512&&ek(t)}catch(f){ti(t,t.return,f)}}if(t===e){at=null;break}if(r=t.sibling,r!==null){r.return=t.return,at=r;break}at=t.return}}function C5(e){for(;at!==null;){var t=at;if(t===e){at=null;break}var r=t.sibling;if(r!==null){r.return=t.return,at=r;break}at=t.return}}function x5(e){for(;at!==null;){var t=at;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{zT(4,t)}catch(l){ti(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){ti(t,i,l)}}var a=t.return;try{ek(t)}catch(l){ti(t,a,l)}break;case 5:var o=t.return;try{ek(t)}catch(l){ti(t,o,l)}}}catch(l){ti(t,t.return,l)}if(t===e){at=null;break}var s=t.sibling;if(s!==null){s.return=t.return,at=s;break}at=t.return}}var Hle=Math.ceil,sS=uu.ReactCurrentDispatcher,y2=uu.ReactCurrentOwner,js=uu.ReactCurrentBatchConfig,_r=0,ea=null,xi=null,ha=0,Po=0,jp=Dd(0),Fi=0,iv=null,Xh=0,GT=0,v2=0,d0=null,to=null,b2=0,Om=1/0,Dc=null,lS=!1,nk=null,cd=null,_w=!1,qu=null,cS=0,h0=0,ik=null,XE=-1,JE=0;function Ha(){return _r&6?pi():XE!==-1?XE:XE=pi()}function ud(e){return e.mode&1?_r&2&&ha!==0?ha&-ha:xle.transition!==null?(JE===0&&(JE=pW()),JE):(e=qr,e!==0||(e=window.event,e=e===void 0?16:EW(e.type)),e):1}function yl(e,t,r,n){if(50<h0)throw h0=0,ik=null,Error(De(185));eb(e,r,n),(!(_r&2)||e!==ea)&&(e===ea&&(!(_r&2)&&(GT|=r),Fi===4&&$u(e,ha)),ho(e,n),r===1&&_r===0&&!(t.mode&1)&&(Om=pi()+500,BT&&Ld()))}function ho(e,t){var r=e.callbackNode;xse(e,t);var n=W_(e,e===ea?ha:0);if(n===0)r!==null&&LU(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&LU(r),t===1)e.tag===0?Cle(R5.bind(null,e)):VW(R5.bind(null,e)),Ele(function(){!(_r&6)&&Ld()}),r=null;else{switch(mW(n)){case 1:r=GD;break;case 4:r=hW;break;case 16:r=G_;break;case 536870912:r=fW;break;default:r=G_}r=U1(r,O1.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function O1(e,t){if(XE=-1,JE=0,_r&6)throw Error(De(327));var r=e.callbackNode;if(am()&&e.callbackNode!==r)return null;var n=W_(e,e===ea?ha:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=uS(e,n);else{t=n;var i=_r;_r|=2;var a=P1();(ea!==e||ha!==t)&&(Dc=null,Om=pi()+500,Ph(e,t));do try{Wle();break}catch(s){k1(e,s)}while(!0);i2(),sS.current=a,_r=i,xi!==null?t=0:(ea=null,ha=0,t=Fi)}if(t!==0){if(t===2&&(i=OO(e),i!==0&&(n=i,t=ak(e,i))),t===1)throw r=iv,Ph(e,0),$u(e,n),ho(e,pi()),r;if(t===6)$u(e,n);else{if(i=e.current.alternate,!(n&30)&&!zle(i)&&(t=uS(e,n),t===2&&(a=OO(e),a!==0&&(n=a,t=ak(e,a))),t===1))throw r=iv,Ph(e,0),$u(e,n),ho(e,pi()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(De(345));case 2:ah(e,to,Dc);break;case 3:if($u(e,n),(n&130023424)===n&&(t=b2+500-pi(),10<t)){if(W_(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ha(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=FO(ah.bind(null,e,to,Dc),t);break}ah(e,to,Dc);break;case 4:if($u(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-gl(n);a=1<<o,o=t[o],o>i&&(i=o),n&=~a}if(n=i,n=pi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Hle(n/1960))-n,10<n){e.timeoutHandle=FO(ah.bind(null,e,to,Dc),n);break}ah(e,to,Dc);break;case 5:ah(e,to,Dc);break;default:throw Error(De(329))}}}return ho(e,pi()),e.callbackNode===r?O1.bind(null,e):null}function ak(e,t){var r=d0;return e.current.memoizedState.isDehydrated&&(Ph(e,t).flags|=256),e=uS(e,t),e!==2&&(t=to,to=r,t!==null&&ok(t)),e}function ok(e){to===null?to=e:to.push.apply(to,e)}function zle(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!bl(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $u(e,t){for(t&=~v2,t&=~GT,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-gl(t),n=1<<r;e[r]=-1,t&=~n}}function R5(e){if(_r&6)throw Error(De(327));am();var t=W_(e,0);if(!(t&1))return ho(e,pi()),null;var r=uS(e,t);if(e.tag!==0&&r===2){var n=OO(e);n!==0&&(t=n,r=ak(e,n))}if(r===1)throw r=iv,Ph(e,0),$u(e,t),ho(e,pi()),r;if(r===6)throw Error(De(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ah(e,to,Dc),ho(e,pi()),null}function w2(e,t){var r=_r;_r|=1;try{return e(t)}finally{_r=r,_r===0&&(Om=pi()+500,BT&&Ld())}}function Jh(e){qu!==null&&qu.tag===0&&!(_r&6)&&am();var t=_r;_r|=1;var r=js.transition,n=qr;try{if(js.transition=null,qr=1,e)return e()}finally{qr=n,js.transition=r,_r=t,!(_r&6)&&Ld()}}function E2(){Po=jp.current,Tn(jp)}function Ph(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,wle(r)),xi!==null)for(r=xi.return;r!==null;){var n=r;switch(t2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&J_();break;case 3:Nm(),Tn(co),Tn(Na),u2();break;case 5:c2(n);break;case 4:Nm();break;case 13:Tn(Vn);break;case 19:Tn(Vn);break;case 10:a2(n.type._context);break;case 22:case 23:E2()}r=r.return}if(ea=e,xi=e=dd(e.current,null),ha=Po=t,Fi=0,iv=null,v2=GT=Xh=0,to=d0=null,Eh!==null){for(t=0;t<Eh.length;t++)if(r=Eh[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}Eh=null}return e}function k1(e,t){do{var r=xi;try{if(i2(),KE.current=oS,aS){for(var n=Hn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}aS=!1}if(Yh=0,qi=Mi=Hn=null,c0=!1,tv=0,y2.current=null,r===null||r.return===null){Fi=1,iv=t,xi=null;break}e:{var a=e,o=r.return,s=r,l=t;if(t=ha,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=p5(o);if(p!==null){p.flags&=-257,m5(p,o,s,a,t),p.mode&1&&f5(a,c,t),t=p,l=c;var m=t.updateQueue;if(m===null){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}else{if(!(t&1)){f5(a,c,t),_2();break e}l=Error(De(426))}}else if(On&&s.mode&1){var y=p5(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),m5(y,o,s,a,t),r2(Am(l,s));break e}}a=l=Am(l,s),Fi!==4&&(Fi=2),d0===null?d0=[a]:d0.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=m1(a,l,t);s5(a,v);break e;case 1:s=l;var b=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(cd===null||!cd.has(E)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=g1(a,s,t);s5(a,S);break e}}a=a.return}while(a!==null)}L1(r)}catch(I){t=I,xi===r&&r!==null&&(xi=r=r.return);continue}break}while(!0)}function P1(){var e=sS.current;return sS.current=oS,e===null?oS:e}function _2(){(Fi===0||Fi===3||Fi===2)&&(Fi=4),ea===null||!(Xh&268435455)&&!(GT&268435455)||$u(ea,ha)}function uS(e,t){var r=_r;_r|=2;var n=P1();(ea!==e||ha!==t)&&(Dc=null,Ph(e,t));do try{Gle();break}catch(i){k1(e,i)}while(!0);if(i2(),_r=r,sS.current=n,xi!==null)throw Error(De(261));return ea=null,ha=0,Fi}function Gle(){for(;xi!==null;)D1(xi)}function Wle(){for(;xi!==null&&!yse();)D1(xi)}function D1(e){var t=M1(e.alternate,e,Po);e.memoizedProps=e.pendingProps,t===null?L1(e):xi=t,y2.current=null}function L1(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Fle(r,t),r!==null){r.flags&=32767,xi=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fi=6,xi=null;return}}else if(r=Ule(r,t,Po),r!==null){xi=r;return}if(t=t.sibling,t!==null){xi=t;return}xi=t=e}while(t!==null);Fi===0&&(Fi=5)}function ah(e,t,r){var n=qr,i=js.transition;try{js.transition=null,qr=1,Kle(e,t,r,n)}finally{js.transition=i,qr=n}return null}function Kle(e,t,r,n){do am();while(qu!==null);if(_r&6)throw Error(De(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(De(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(Rse(e,a),e===ea&&(xi=ea=null,ha=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||_w||(_w=!0,U1(G_,function(){return am(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=js.transition,js.transition=null;var o=qr;qr=1;var s=_r;_r|=4,y2.current=null,Ble(e,r),N1(r,e),fle(MO),K_=!!jO,MO=jO=null,e.current=r,$le(r),vse(),_r=s,qr=o,js.transition=a}else e.current=r;if(_w&&(_w=!1,qu=e,cS=i),a=e.pendingLanes,a===0&&(cd=null),Ese(r.stateNode),ho(e,pi()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(lS)throw lS=!1,e=nk,nk=null,e;return cS&1&&e.tag!==0&&am(),a=e.pendingLanes,a&1?e===ik?h0++:(h0=0,ik=e):h0=0,Ld(),null}function am(){if(qu!==null){var e=mW(cS),t=js.transition,r=qr;try{if(js.transition=null,qr=16>e?16:e,qu===null)var n=!1;else{if(e=qu,qu=null,cS=0,_r&6)throw Error(De(331));var i=_r;for(_r|=4,at=e.current;at!==null;){var a=at,o=a.child;if(at.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(at=c;at!==null;){var u=at;switch(u.tag){case 0:case 11:case 15:u0(8,u,a)}var h=u.child;if(h!==null)h.return=u,at=h;else for(;at!==null;){u=at;var f=u.sibling,p=u.return;if(x1(u),u===c){at=null;break}if(f!==null){f.return=p,at=f;break}at=p}}}var m=a.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}at=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,at=o;else e:for(;at!==null;){if(a=at,a.flags&2048)switch(a.tag){case 0:case 11:case 15:u0(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,at=v;break e}at=a.return}}var b=e.current;for(at=b;at!==null;){o=at;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,at=E;else e:for(o=b;at!==null;){if(s=at,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:zT(9,s)}}catch(I){ti(s,s.return,I)}if(s===o){at=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,at=S;break e}at=s.return}}if(_r=i,Ld(),ec&&typeof ec.onPostCommitFiberRoot=="function")try{ec.onPostCommitFiberRoot(jT,e)}catch{}n=!0}return n}finally{qr=r,js.transition=t}}return!1}function I5(e,t,r){t=Am(r,t),t=m1(e,t,1),e=ld(e,t,1),t=Ha(),e!==null&&(eb(e,1,t),ho(e,t))}function ti(e,t,r){if(e.tag===3)I5(e,e,r);else for(;t!==null;){if(t.tag===3){I5(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(cd===null||!cd.has(n))){e=Am(r,e),e=g1(t,e,1),t=ld(t,e,1),e=Ha(),t!==null&&(eb(t,1,e),ho(t,e));break}}t=t.return}}function qle(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ha(),e.pingedLanes|=e.suspendedLanes&r,ea===e&&(ha&r)===r&&(Fi===4||Fi===3&&(ha&130023424)===ha&&500>pi()-b2?Ph(e,0):v2|=r),ho(e,t)}function j1(e,t){t===0&&(e.mode&1?(t=hw,hw<<=1,!(hw&130023424)&&(hw=4194304)):t=1);var r=Ha();e=tu(e,t),e!==null&&(eb(e,t,r),ho(e,r))}function Yle(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),j1(e,r)}function Xle(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(De(314))}n!==null&&n.delete(t),j1(e,r)}var M1;M1=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||co.current)so=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return so=!1,Mle(e,t,r);so=!!(e.flags&131072)}else so=!1,On&&t.flags&1048576&&BW(t,eS,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;YE(e,t),e=t.pendingProps;var i=xm(t,Na.current);im(t,r),i=h2(null,t,n,e,i,r);var a=f2();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,uo(n)?(a=!0,Q_(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,s2(t),i.updater=HT,t.stateNode=i,i._reactInternals=t,WO(t,n,e,r),t=YO(null,t,n,!0,a,r)):(t.tag=0,On&&a&&e2(t),Fa(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(YE(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Qle(n),e=sl(n,e),i){case 0:t=qO(null,t,n,e,r);break e;case 1:t=v5(null,t,n,e,r);break e;case 11:t=g5(null,t,n,e,r);break e;case 14:t=y5(null,t,n,sl(n.type,e),r);break e}throw Error(De(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sl(n,i),qO(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sl(n,i),v5(e,t,n,i,r);case 3:e:{if(w1(t),e===null)throw Error(De(387));n=t.pendingProps,a=t.memoizedState,i=a.element,KW(e,t),nS(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Am(Error(De(423)),t),t=b5(e,t,n,r,i);break e}else if(n!==i){i=Am(Error(De(424)),t),t=b5(e,t,n,r,i);break e}else for(Uo=sd(t.stateNode.containerInfo.firstChild),Go=t,On=!0,dl=null,r=GW(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Rm(),n===i){t=ru(e,t,r);break e}Fa(e,t,n,r)}t=t.child}return t;case 5:return qW(t),e===null&&HO(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,UO(n,i)?o=null:a!==null&&UO(n,a)&&(t.flags|=32),b1(e,t),Fa(e,t,o,r),t.child;case 6:return e===null&&HO(t),null;case 13:return E1(e,t,r);case 4:return l2(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Im(t,null,n,r):Fa(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sl(n,i),g5(e,t,n,i,r);case 7:return Fa(e,t,t.pendingProps,r),t.child;case 8:return Fa(e,t,t.pendingProps.children,r),t.child;case 12:return Fa(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,pn(tS,n._currentValue),n._currentValue=o,a!==null)if(bl(a.value,o)){if(a.children===i.children&&!co.current){t=ru(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Kc(-1,r&-r),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),zO(a.return,r,t),s.lanes|=r;break}l=l.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(De(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),zO(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Fa(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,im(t,r),i=Us(i),n=n(i),t.flags|=1,Fa(e,t,n,r),t.child;case 14:return n=t.type,i=sl(n,t.pendingProps),i=sl(n.type,i),y5(e,t,n,i,r);case 15:return y1(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:sl(n,i),YE(e,t),t.tag=1,uo(n)?(e=!0,Q_(t)):e=!1,im(t,r),p1(t,n,i),WO(t,n,i,r),YO(null,t,n,!0,e,r);case 19:return _1(e,t,r);case 22:return v1(e,t,r)}throw Error(De(156,t.tag))};function U1(e,t){return dW(e,t)}function Jle(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(e,t,r,n){return new Jle(e,t,r,n)}function S2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qle(e){if(typeof e=="function")return S2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$D)return 11;if(e===HD)return 14}return 2}function dd(e,t){var r=e.alternate;return r===null?(r=Ds(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function QE(e,t,r,n,i,a){var o=2;if(n=e,typeof e=="function")S2(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case xp:return Dh(r.children,i,a,t);case BD:o=8,i|=8;break;case gO:return e=Ds(12,r,t,i|2),e.elementType=gO,e.lanes=a,e;case yO:return e=Ds(13,r,t,i),e.elementType=yO,e.lanes=a,e;case vO:return e=Ds(19,r,t,i),e.elementType=vO,e.lanes=a,e;case q9:return WT(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case W9:o=10;break e;case K9:o=9;break e;case $D:o=11;break e;case HD:o=14;break e;case Mu:o=16,n=null;break e}throw Error(De(130,e==null?e:typeof e,""))}return t=Ds(o,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function Dh(e,t,r,n){return e=Ds(7,e,n,t),e.lanes=r,e}function WT(e,t,r,n){return e=Ds(22,e,n,t),e.elementType=q9,e.lanes=r,e.stateNode={isHidden:!1},e}function VR(e,t,r){return e=Ds(6,e,null,t),e.lanes=r,e}function BR(e,t,r){return t=Ds(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zle(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ER(0),this.expirationTimes=ER(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ER(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function T2(e,t,r,n,i,a,o,s,l){return e=new Zle(e,t,r,s,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ds(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},s2(a),e}function ece(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cp,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function F1(e){if(!e)return Sd;e=e._reactInternals;e:{if(mf(e)!==e||e.tag!==1)throw Error(De(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(uo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(De(171))}if(e.tag===1){var r=e.type;if(uo(r))return FW(e,r,t)}return t}function V1(e,t,r,n,i,a,o,s,l){return e=T2(r,n,!0,e,i,a,o,s,l),e.context=F1(null),r=e.current,n=Ha(),i=ud(r),a=Kc(n,i),a.callback=t??null,ld(r,a,i),e.current.lanes=i,eb(e,i,n),ho(e,n),e}function KT(e,t,r,n){var i=t.current,a=Ha(),o=ud(i);return r=F1(r),t.context===null?t.context=r:t.pendingContext=r,t=Kc(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ld(i,t,o),e!==null&&(yl(e,i,o,a),WE(e,i,o)),o}function dS(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function N5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function C2(e,t){N5(e,t),(e=e.alternate)&&N5(e,t)}function tce(){return null}var B1=typeof reportError=="function"?reportError:function(e){console.error(e)};function x2(e){this._internalRoot=e}qT.prototype.render=x2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(De(409));KT(e,t,null,null)};qT.prototype.unmount=x2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jh(function(){KT(null,e,null,null)}),t[eu]=null}};function qT(e){this._internalRoot=e}qT.prototype.unstable_scheduleHydration=function(e){if(e){var t=vW();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Bu.length&&t!==0&&t<Bu[r].priority;r++);Bu.splice(r,0,e),r===0&&wW(e)}};function R2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function YT(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function A5(){}function rce(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var c=dS(o);a.call(c)}}var o=V1(t,n,e,0,null,!1,!1,"",A5);return e._reactRootContainer=o,e[eu]=o.current,X0(e.nodeType===8?e.parentNode:e),Jh(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var c=dS(l);s.call(c)}}var l=T2(e,0,!1,null,null,!1,!1,"",A5);return e._reactRootContainer=l,e[eu]=l.current,X0(e.nodeType===8?e.parentNode:e),Jh(function(){KT(t,l,r,n)}),l}function XT(e,t,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=dS(o);s.call(l)}}KT(t,o,e,i)}else o=rce(r,t,e,i,n);return dS(o)}gW=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Uy(t.pendingLanes);r!==0&&(WD(t,r|1),ho(t,pi()),!(_r&6)&&(Om=pi()+500,Ld()))}break;case 13:Jh(function(){var n=tu(e,1);if(n!==null){var i=Ha();yl(n,e,1,i)}}),C2(e,1)}};KD=function(e){if(e.tag===13){var t=tu(e,134217728);if(t!==null){var r=Ha();yl(t,e,134217728,r)}C2(e,134217728)}};yW=function(e){if(e.tag===13){var t=ud(e),r=tu(e,t);if(r!==null){var n=Ha();yl(r,e,t,n)}C2(e,t)}};vW=function(){return qr};bW=function(e,t){var r=qr;try{return qr=e,t()}finally{qr=r}};IO=function(e,t,r){switch(t){case"input":if(EO(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=VT(n);if(!i)throw Error(De(90));X9(n),EO(n,i)}}}break;case"textarea":Q9(e,r);break;case"select":t=r.value,t!=null&&em(e,!!r.multiple,t,!1)}};aW=w2;oW=Jh;var nce={usingClientEntryPoint:!1,Events:[rb,Ap,VT,nW,iW,w2]},ly={findFiberByHostInstance:wh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ice={bundleType:ly.bundleType,version:ly.version,rendererPackageName:ly.rendererPackageName,rendererConfig:ly.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:uu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cW(e),e===null?null:e.stateNode},findFiberByHostInstance:ly.findFiberByHostInstance||tce,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sw.isDisabled&&Sw.supportsFiber)try{jT=Sw.inject(ice),ec=Sw}catch{}}ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nce;ts.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R2(t))throw Error(De(200));return ece(e,t,null,r)};ts.createRoot=function(e,t){if(!R2(e))throw Error(De(299));var r=!1,n="",i=B1;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=T2(e,1,!1,null,null,r,!1,n,i),e[eu]=t.current,X0(e.nodeType===8?e.parentNode:e),new x2(t)};ts.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(De(188)):(e=Object.keys(e).join(","),Error(De(268,e)));return e=cW(t),e=e===null?null:e.stateNode,e};ts.flushSync=function(e){return Jh(e)};ts.hydrate=function(e,t,r){if(!YT(t))throw Error(De(200));return XT(null,e,t,!0,r)};ts.hydrateRoot=function(e,t,r){if(!R2(e))throw Error(De(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=B1;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=V1(t,null,e,1,r??null,i,!1,a,o),e[eu]=t.current,X0(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new qT(t)};ts.render=function(e,t,r){if(!YT(t))throw Error(De(200));return XT(null,e,t,!1,r)};ts.unmountComponentAtNode=function(e){if(!YT(e))throw Error(De(40));return e._reactRootContainer?(Jh(function(){XT(null,null,e,!1,function(){e._reactRootContainer=null,e[eu]=null})}),!0):!1};ts.unstable_batchedUpdates=w2;ts.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!YT(r))throw Error(De(200));if(e==null||e._reactInternals===void 0)throw Error(De(38));return XT(e,t,r,!1,n)};ts.version="18.3.1-next-f1338f8080-20240426";function $1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($1)}catch(e){console.error(e)}}$1(),$9.exports=ts;var JT=$9.exports,H1,O5=JT;H1=O5.createRoot,O5.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},av.apply(this,arguments)}var Yu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Yu||(Yu={}));const k5="popstate";function ace(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:o,hash:s}=n.location;return sk("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:hS(i)}return sce(t,r,null,e)}function Ri(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function z1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oce(){return Math.random().toString(36).substr(2,8)}function P5(e,t){return{usr:e.state,key:e.key,idx:t}}function sk(e,t,r,n){return r===void 0&&(r=null),av({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?lg(t):t,{state:r,key:t&&t.key||n||oce()})}function hS(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function lg(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function sce(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,s=Yu.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(av({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){s=Yu.Pop;let y=u(),v=y==null?null:y-c;c=y,l&&l({action:s,location:g.location,delta:v})}function f(y,v){s=Yu.Push;let b=sk(g.location,y,v);c=u()+1;let E=P5(b,c),S=g.createHref(b);try{o.pushState(E,"",S)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(S)}a&&l&&l({action:s,location:g.location,delta:1})}function p(y,v){s=Yu.Replace;let b=sk(g.location,y,v);c=u();let E=P5(b,c),S=g.createHref(b);o.replaceState(E,"",S),a&&l&&l({action:s,location:g.location,delta:0})}function m(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof y=="string"?y:hS(y);return b=b.replace(/ $/,"%20"),Ri(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let g={get action(){return s},get location(){return e(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(k5,h),l=y,()=>{i.removeEventListener(k5,h),l=null}},createHref(y){return t(i,y)},createURL:m,encodeLocation(y){let v=m(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(y){return o.go(y)}};return g}var D5;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(D5||(D5={}));function lce(e,t,r){return r===void 0&&(r="/"),cce(e,t,r,!1)}function cce(e,t,r,n){let i=typeof t=="string"?lg(t):t,a=I2(i.pathname||"/",r);if(a==null)return null;let o=G1(e);uce(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let c=Ece(a);s=bce(o[l],c,n)}return s}function G1(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(Ri(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=hd([n,l.relativePath]),u=r.concat(l);a.children&&a.children.length>0&&(Ri(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),G1(a.children,t,u,c)),!(a.path==null&&!a.index)&&t.push({path:c,score:yce(c,a.index),routesMeta:u})};return e.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of W1(a.path))i(a,o,l)}),t}function W1(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=W1(n.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function uce(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:vce(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const dce=/^:[\w-]+$/,hce=3,fce=2,pce=1,mce=10,gce=-2,L5=e=>e==="*";function yce(e,t){let r=e.split("/"),n=r.length;return r.some(L5)&&(n+=gce),t&&(n+=fce),r.filter(i=>!L5(i)).reduce((i,a)=>i+(dce.test(a)?hce:a===""?pce:mce),n)}function vce(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function bce(e,t,r){let{routesMeta:n}=e,i={},a="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],c=s===n.length-1,u=a==="/"?t:t.slice(a.length)||"/",h=j5({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=j5({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:hd([a,h.pathname]),pathnameBase:Cce(hd([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=hd([a,h.pathnameBase]))}return o}function j5(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=wce(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let g=s[h]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const m=s[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:e}}function wce(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),z1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Ece(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return z1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function I2(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function _ce(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?lg(e):e;return{pathname:r?r.startsWith("/")?r:Sce(r,t):t,search:xce(n),hash:Rce(i)}}function Sce(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function $R(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Tce(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function K1(e,t){let r=Tce(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function q1(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=lg(e):(i=av({},e),Ri(!i.pathname||!i.pathname.includes("?"),$R("?","pathname","search",i)),Ri(!i.pathname||!i.pathname.includes("#"),$R("#","pathname","hash",i)),Ri(!i.search||!i.search.includes("#"),$R("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}s=h>=0?t[h]:"/"}let l=_ce(i,s),c=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const hd=e=>e.join("/").replace(/\/\/+/g,"/"),Cce=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),xce=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Rce=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ice(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Y1=["post","put","patch","delete"];new Set(Y1);const Nce=["get",...Y1];new Set(Nce);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ov.apply(this,arguments)}const N2=T.createContext(null),Ace=T.createContext(null),gf=T.createContext(null),QT=T.createContext(null),du=T.createContext({outlet:null,matches:[],isDataRoute:!1}),X1=T.createContext(null);function Oce(e,t){let{relative:r}=t===void 0?{}:t;ib()||Ri(!1);let{basename:n,navigator:i}=T.useContext(gf),{hash:a,pathname:o,search:s}=Q1(e,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:hd([n,o])),i.createHref({pathname:l,search:s,hash:a})}function ib(){return T.useContext(QT)!=null}function cg(){return ib()||Ri(!1),T.useContext(QT).location}function J1(e){T.useContext(gf).static||T.useLayoutEffect(e)}function Zt(){let{isDataRoute:e}=T.useContext(du);return e?Wce():kce()}function kce(){ib()||Ri(!1);let e=T.useContext(N2),{basename:t,future:r,navigator:n}=T.useContext(gf),{matches:i}=T.useContext(du),{pathname:a}=cg(),o=JSON.stringify(K1(i,r.v7_relativeSplatPath)),s=T.useRef(!1);return J1(()=>{s.current=!0}),T.useCallback(function(c,u){if(u===void 0&&(u={}),!s.current)return;if(typeof c=="number"){n.go(c);return}let h=q1(c,JSON.parse(o),a,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:hd([t,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[t,n,o,a,e])}const Pce=T.createContext(null);function Dce(e){let t=T.useContext(du).outlet;return t&&T.createElement(Pce.Provider,{value:e},t)}function ug(){let{matches:e}=T.useContext(du),t=e[e.length-1];return t?t.params:{}}function Q1(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=T.useContext(gf),{matches:i}=T.useContext(du),{pathname:a}=cg(),o=JSON.stringify(K1(i,n.v7_relativeSplatPath));return T.useMemo(()=>q1(e,JSON.parse(o),a,r==="path"),[e,o,a,r])}function Lce(e,t){return jce(e,t)}function jce(e,t,r,n){ib()||Ri(!1);let{navigator:i}=T.useContext(gf),{matches:a}=T.useContext(du),o=a[a.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=cg(),u;if(t){var h;let y=typeof t=="string"?lg(t):t;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||Ri(!1),u=y}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=lce(e,{pathname:p}),g=Bce(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},s,y.params),pathname:hd([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:hd([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,r,n);return t&&g?T.createElement(QT.Provider,{value:{location:ov({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Yu.Pop}},g):g}function Mce(){let e=Gce(),t=Ice(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:i},r):null,null)}const Uce=T.createElement(Mce,null);class Fce extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?T.createElement(du.Provider,{value:this.props.routeContext},T.createElement(X1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Vce(e){let{routeContext:t,match:r,children:n}=e,i=T.useContext(N2);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(du.Provider,{value:t},n)}function Bce(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,s=(i=r)==null?void 0:i.errors;if(s!=null){let u=o.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);u>=0||Ri(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,m=!1,g=null,y=null;r&&(p=s&&h.route.id?s[h.route.id]:void 0,g=h.route.errorElement||Uce,l&&(c<0&&f===0?(m=!0,y=null):c===f&&(m=!0,y=h.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,f+1)),b=()=>{let E;return p?E=g:m?E=y:h.route.Component?E=T.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=u,T.createElement(Vce,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:r!=null},children:E})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(Fce,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var Z1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Z1||{}),fS=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fS||{});function $ce(e){let t=T.useContext(N2);return t||Ri(!1),t}function Hce(e){let t=T.useContext(Ace);return t||Ri(!1),t}function zce(e){let t=T.useContext(du);return t||Ri(!1),t}function eK(e){let t=zce(),r=t.matches[t.matches.length-1];return r.route.id||Ri(!1),r.route.id}function Gce(){var e;let t=T.useContext(X1),r=Hce(fS.UseRouteError),n=eK(fS.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Wce(){let{router:e}=$ce(Z1.UseNavigateStable),t=eK(fS.UseNavigateStable),r=T.useRef(!1);return J1(()=>{r.current=!0}),T.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,ov({fromRouteId:t},a)))},[e,t])}const M5={};function Kce(e,t){M5[t]||(M5[t]=!0,console.warn(t))}const U5=(e,t,r)=>Kce(e," React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+r+"."));function qce(e,t){e!=null&&e.v7_startTransition||U5("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&U5("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function oi(e){return Dce(e.context)}function ke(e){Ri(!1)}function Yce(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Yu.Pop,navigator:a,static:o=!1,future:s}=e;ib()&&Ri(!1);let l=t.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:l,navigator:a,static:o,future:ov({v7_relativeSplatPath:!1},s)}),[l,s,a,o]);typeof n=="string"&&(n=lg(n));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=T.useMemo(()=>{let y=I2(u,l);return y==null?null:{location:{pathname:y,search:h,hash:f,state:p,key:m},navigationType:i}},[l,u,h,f,p,m,i]);return g==null?null:T.createElement(gf.Provider,{value:c},T.createElement(QT.Provider,{children:r,value:g}))}function Xce(e){let{children:t,location:r}=e;return Lce(lk(t),r)}new Promise(()=>{});function lk(e,t){t===void 0&&(t=[]);let r=[];return T.Children.forEach(e,(n,i)=>{if(!T.isValidElement(n))return;let a=[...t,i];if(n.type===T.Fragment){r.push.apply(r,lk(n.props.children,a));return}n.type!==ke&&Ri(!1),!n.props.index||!n.props.children||Ri(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=lk(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ck(){return ck=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ck.apply(this,arguments)}function Jce(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Qce(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Zce(e,t){return e.button===0&&(!t||t==="_self")&&!Qce(e)}function pS(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function eue(e,t){let r=pS(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(a=>{r.append(i,a)})}),r}const tue=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rue="6";try{window.__reactRouterVersion=rue}catch{}const nue="startTransition",F5=B0[nue];function iue(e){let{basename:t,children:r,future:n,window:i}=e,a=T.useRef();a.current==null&&(a.current=ace({window:i,v5Compat:!0}));let o=a.current,[s,l]=T.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},u=T.useCallback(h=>{c&&F5?F5(()=>l(h)):l(h)},[l,c]);return T.useLayoutEffect(()=>o.listen(u),[o,u]),T.useEffect(()=>qce(n),[n]),T.createElement(Yce,{basename:t,children:r,location:s.location,navigationType:s.action,navigator:o,future:n})}const aue=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oue=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nr=T.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:s,target:l,to:c,preventScrollReset:u,viewTransition:h}=t,f=Jce(t,tue),{basename:p}=T.useContext(gf),m,g=!1;if(typeof c=="string"&&oue.test(c)&&(m=c,aue))try{let E=new URL(window.location.href),S=c.startsWith("//")?new URL(E.protocol+c):new URL(c),I=I2(S.pathname,p);S.origin===E.origin&&I!=null?c=I+S.search+S.hash:g=!0}catch{}let y=Oce(c,{relative:i}),v=sue(c,{replace:o,state:s,target:l,preventScrollReset:u,relative:i,viewTransition:h});function b(E){n&&n(E),E.defaultPrevented||v(E)}return T.createElement("a",ck({},f,{href:m||y,onClick:g||a?n:b,ref:r,target:l}))});var V5;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(V5||(V5={}));var B5;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(B5||(B5={}));function sue(e,t){let{target:r,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:s}=t===void 0?{}:t,l=Zt(),c=cg(),u=Q1(e,{relative:o});return T.useCallback(h=>{if(Zce(h,r)){h.preventDefault();let f=n!==void 0?n:hS(c)===hS(u);l(e,{replace:f,state:i,preventScrollReset:a,relative:o,viewTransition:s})}},[c,l,u,n,i,r,e,a,o,s])}function yf(e){let t=T.useRef(pS(e)),r=T.useRef(!1),n=cg(),i=T.useMemo(()=>eue(n.search,r.current?null:t.current),[n.search]),a=Zt(),o=T.useCallback((s,l)=>{const c=pS(typeof s=="function"?s(i):s);r.current=!0,a("?"+c,l)},[a,i]);return[i,o]}var lue=function(t){return cue(t)&&!uue(t)};function cue(e){return!!e&&typeof e=="object"}function uue(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||fue(e)}var due=typeof Symbol=="function"&&Symbol.for,hue=due?Symbol.for("react.element"):60103;function fue(e){return e.$$typeof===hue}function pue(e){return Array.isArray(e)?[]:{}}function mS(e,t){return t.clone!==!1&&t.isMergeableObject(e)?sv(pue(e),e,t):e}function mue(e,t,r){return e.concat(t).map(function(n){return mS(n,r)})}function gue(e,t,r){var n={};return r.isMergeableObject(e)&&Object.keys(e).forEach(function(i){n[i]=mS(e[i],r)}),Object.keys(t).forEach(function(i){!r.isMergeableObject(t[i])||!e[i]?n[i]=mS(t[i],r):n[i]=sv(e[i],t[i],r)}),n}function sv(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||mue,r.isMergeableObject=r.isMergeableObject||lue;var n=Array.isArray(t),i=Array.isArray(e),a=n===i;return a?n?r.arrayMerge(e,t,r):gue(e,t,r):mS(t,r)}sv.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return sv(n,i,r)},{})};var uk=sv,tK=typeof global=="object"&&global&&global.Object===Object&&global,yue=typeof self=="object"&&self&&self.Object===Object&&self,hc=tK||yue||Function("return this")(),Td=hc.Symbol,rK=Object.prototype,vue=rK.hasOwnProperty,bue=rK.toString,cy=Td?Td.toStringTag:void 0;function wue(e){var t=vue.call(e,cy),r=e[cy];try{e[cy]=void 0;var n=!0}catch{}var i=bue.call(e);return n&&(t?e[cy]=r:delete e[cy]),i}var Eue=Object.prototype,_ue=Eue.toString;function Sue(e){return _ue.call(e)}var Tue="[object Null]",Cue="[object Undefined]",$5=Td?Td.toStringTag:void 0;function vf(e){return e==null?e===void 0?Cue:Tue:$5&&$5 in Object(e)?wue(e):Sue(e)}function nK(e,t){return function(r){return e(t(r))}}var A2=nK(Object.getPrototypeOf,Object);function bf(e){return e!=null&&typeof e=="object"}var xue="[object Object]",Rue=Function.prototype,Iue=Object.prototype,iK=Rue.toString,Nue=Iue.hasOwnProperty,Aue=iK.call(Object);function H5(e){if(!bf(e)||vf(e)!=xue)return!1;var t=A2(e);if(t===null)return!0;var r=Nue.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&iK.call(r)==Aue}function Oue(){this.__data__=[],this.size=0}function aK(e,t){return e===t||e!==e&&t!==t}function ZT(e,t){for(var r=e.length;r--;)if(aK(e[r][0],t))return r;return-1}var kue=Array.prototype,Pue=kue.splice;function Due(e){var t=this.__data__,r=ZT(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Pue.call(t,r,1),--this.size,!0}function Lue(e){var t=this.__data__,r=ZT(t,e);return r<0?void 0:t[r][1]}function jue(e){return ZT(this.__data__,e)>-1}function Mue(e,t){var r=this.__data__,n=ZT(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function hu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}hu.prototype.clear=Oue;hu.prototype.delete=Due;hu.prototype.get=Lue;hu.prototype.has=jue;hu.prototype.set=Mue;function Uue(){this.__data__=new hu,this.size=0}function Fue(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Vue(e){return this.__data__.get(e)}function Bue(e){return this.__data__.has(e)}function ab(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $ue="[object AsyncFunction]",Hue="[object Function]",zue="[object GeneratorFunction]",Gue="[object Proxy]";function oK(e){if(!ab(e))return!1;var t=vf(e);return t==Hue||t==zue||t==$ue||t==Gue}var HR=hc["__core-js_shared__"],z5=function(){var e=/[^.]+$/.exec(HR&&HR.keys&&HR.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Wue(e){return!!z5&&z5 in e}var Kue=Function.prototype,que=Kue.toString;function wf(e){if(e!=null){try{return que.call(e)}catch{}try{return e+""}catch{}}return""}var Yue=/[\\^$.*+?()[\]{}|]/g,Xue=/^\[object .+?Constructor\]$/,Jue=Function.prototype,Que=Object.prototype,Zue=Jue.toString,ede=Que.hasOwnProperty,tde=RegExp("^"+Zue.call(ede).replace(Yue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rde(e){if(!ab(e)||Wue(e))return!1;var t=oK(e)?tde:Xue;return t.test(wf(e))}function nde(e,t){return e==null?void 0:e[t]}function Ef(e,t){var r=nde(e,t);return rde(r)?r:void 0}var lv=Ef(hc,"Map"),cv=Ef(Object,"create");function ide(){this.__data__=cv?cv(null):{},this.size=0}function ade(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ode="__lodash_hash_undefined__",sde=Object.prototype,lde=sde.hasOwnProperty;function cde(e){var t=this.__data__;if(cv){var r=t[e];return r===ode?void 0:r}return lde.call(t,e)?t[e]:void 0}var ude=Object.prototype,dde=ude.hasOwnProperty;function hde(e){var t=this.__data__;return cv?t[e]!==void 0:dde.call(t,e)}var fde="__lodash_hash_undefined__";function pde(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=cv&&t===void 0?fde:t,this}function Qh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Qh.prototype.clear=ide;Qh.prototype.delete=ade;Qh.prototype.get=cde;Qh.prototype.has=hde;Qh.prototype.set=pde;function mde(){this.size=0,this.__data__={hash:new Qh,map:new(lv||hu),string:new Qh}}function gde(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function eC(e,t){var r=e.__data__;return gde(t)?r[typeof t=="string"?"string":"hash"]:r.map}function yde(e){var t=eC(this,e).delete(e);return this.size-=t?1:0,t}function vde(e){return eC(this,e).get(e)}function bde(e){return eC(this,e).has(e)}function wde(e,t){var r=eC(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function jd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}jd.prototype.clear=mde;jd.prototype.delete=yde;jd.prototype.get=vde;jd.prototype.has=bde;jd.prototype.set=wde;var Ede=200;function _de(e,t){var r=this.__data__;if(r instanceof hu){var n=r.__data__;if(!lv||n.length<Ede-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new jd(n)}return r.set(e,t),this.size=r.size,this}function dg(e){var t=this.__data__=new hu(e);this.size=t.size}dg.prototype.clear=Uue;dg.prototype.delete=Fue;dg.prototype.get=Vue;dg.prototype.has=Bue;dg.prototype.set=_de;function Sde(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var G5=function(){try{var e=Ef(Object,"defineProperty");return e({},"",{}),e}catch{}}();function sK(e,t,r){t=="__proto__"&&G5?G5(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Tde=Object.prototype,Cde=Tde.hasOwnProperty;function lK(e,t,r){var n=e[t];(!(Cde.call(e,t)&&aK(n,r))||r===void 0&&!(t in e))&&sK(e,t,r)}function tC(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=void 0;l===void 0&&(l=e[s]),i?sK(r,s,l):lK(r,s,l)}return r}function xde(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Rde="[object Arguments]";function W5(e){return bf(e)&&vf(e)==Rde}var cK=Object.prototype,Ide=cK.hasOwnProperty,Nde=cK.propertyIsEnumerable,Ade=W5(function(){return arguments}())?W5:function(e){return bf(e)&&Ide.call(e,"callee")&&!Nde.call(e,"callee")},ob=Array.isArray;function Ode(){return!1}var uK=typeof Ho=="object"&&Ho&&!Ho.nodeType&&Ho,K5=uK&&typeof zo=="object"&&zo&&!zo.nodeType&&zo,kde=K5&&K5.exports===uK,q5=kde?hc.Buffer:void 0,Pde=q5?q5.isBuffer:void 0,dK=Pde||Ode,Dde=9007199254740991,Lde=/^(?:0|[1-9]\d*)$/;function jde(e,t){var r=typeof e;return t=t??Dde,!!t&&(r=="number"||r!="symbol"&&Lde.test(e))&&e>-1&&e%1==0&&e<t}var Mde=9007199254740991;function hK(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Mde}var Ude="[object Arguments]",Fde="[object Array]",Vde="[object Boolean]",Bde="[object Date]",$de="[object Error]",Hde="[object Function]",zde="[object Map]",Gde="[object Number]",Wde="[object Object]",Kde="[object RegExp]",qde="[object Set]",Yde="[object String]",Xde="[object WeakMap]",Jde="[object ArrayBuffer]",Qde="[object DataView]",Zde="[object Float32Array]",ehe="[object Float64Array]",the="[object Int8Array]",rhe="[object Int16Array]",nhe="[object Int32Array]",ihe="[object Uint8Array]",ahe="[object Uint8ClampedArray]",ohe="[object Uint16Array]",she="[object Uint32Array]",En={};En[Zde]=En[ehe]=En[the]=En[rhe]=En[nhe]=En[ihe]=En[ahe]=En[ohe]=En[she]=!0;En[Ude]=En[Fde]=En[Jde]=En[Vde]=En[Qde]=En[Bde]=En[$de]=En[Hde]=En[zde]=En[Gde]=En[Wde]=En[Kde]=En[qde]=En[Yde]=En[Xde]=!1;function lhe(e){return bf(e)&&hK(e.length)&&!!En[vf(e)]}function O2(e){return function(t){return e(t)}}var fK=typeof Ho=="object"&&Ho&&!Ho.nodeType&&Ho,f0=fK&&typeof zo=="object"&&zo&&!zo.nodeType&&zo,che=f0&&f0.exports===fK,zR=che&&tK.process,km=function(){try{var e=f0&&f0.require&&f0.require("util").types;return e||zR&&zR.binding&&zR.binding("util")}catch{}}(),Y5=km&&km.isTypedArray,uhe=Y5?O2(Y5):lhe,dhe=Object.prototype,hhe=dhe.hasOwnProperty;function pK(e,t){var r=ob(e),n=!r&&Ade(e),i=!r&&!n&&dK(e),a=!r&&!n&&!i&&uhe(e),o=r||n||i||a,s=o?xde(e.length,String):[],l=s.length;for(var c in e)(t||hhe.call(e,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||jde(c,l)))&&s.push(c);return s}var fhe=Object.prototype;function k2(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||fhe;return e===r}var phe=nK(Object.keys,Object),mhe=Object.prototype,ghe=mhe.hasOwnProperty;function yhe(e){if(!k2(e))return phe(e);var t=[];for(var r in Object(e))ghe.call(e,r)&&r!="constructor"&&t.push(r);return t}function mK(e){return e!=null&&hK(e.length)&&!oK(e)}function P2(e){return mK(e)?pK(e):yhe(e)}function vhe(e,t){return e&&tC(t,P2(t),e)}function bhe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var whe=Object.prototype,Ehe=whe.hasOwnProperty;function _he(e){if(!ab(e))return bhe(e);var t=k2(e),r=[];for(var n in e)n=="constructor"&&(t||!Ehe.call(e,n))||r.push(n);return r}function D2(e){return mK(e)?pK(e,!0):_he(e)}function She(e,t){return e&&tC(t,D2(t),e)}var gK=typeof Ho=="object"&&Ho&&!Ho.nodeType&&Ho,X5=gK&&typeof zo=="object"&&zo&&!zo.nodeType&&zo,The=X5&&X5.exports===gK,J5=The?hc.Buffer:void 0,Q5=J5?J5.allocUnsafe:void 0;function Che(e,t){if(t)return e.slice();var r=e.length,n=Q5?Q5(r):new e.constructor(r);return e.copy(n),n}function yK(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function xhe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}function vK(){return[]}var Rhe=Object.prototype,Ihe=Rhe.propertyIsEnumerable,Z5=Object.getOwnPropertySymbols,L2=Z5?function(e){return e==null?[]:(e=Object(e),xhe(Z5(e),function(t){return Ihe.call(e,t)}))}:vK;function Nhe(e,t){return tC(e,L2(e),t)}function bK(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var Ahe=Object.getOwnPropertySymbols,wK=Ahe?function(e){for(var t=[];e;)bK(t,L2(e)),e=A2(e);return t}:vK;function Ohe(e,t){return tC(e,wK(e),t)}function EK(e,t,r){var n=t(e);return ob(e)?n:bK(n,r(e))}function khe(e){return EK(e,P2,L2)}function Phe(e){return EK(e,D2,wK)}var dk=Ef(hc,"DataView"),hk=Ef(hc,"Promise"),fk=Ef(hc,"Set"),pk=Ef(hc,"WeakMap"),e4="[object Map]",Dhe="[object Object]",t4="[object Promise]",r4="[object Set]",n4="[object WeakMap]",i4="[object DataView]",Lhe=wf(dk),jhe=wf(lv),Mhe=wf(hk),Uhe=wf(fk),Fhe=wf(pk),Mc=vf;(dk&&Mc(new dk(new ArrayBuffer(1)))!=i4||lv&&Mc(new lv)!=e4||hk&&Mc(hk.resolve())!=t4||fk&&Mc(new fk)!=r4||pk&&Mc(new pk)!=n4)&&(Mc=function(e){var t=vf(e),r=t==Dhe?e.constructor:void 0,n=r?wf(r):"";if(n)switch(n){case Lhe:return i4;case jhe:return e4;case Mhe:return t4;case Uhe:return r4;case Fhe:return n4}return t});var Vhe=Object.prototype,Bhe=Vhe.hasOwnProperty;function $he(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Bhe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var a4=hc.Uint8Array;function j2(e){var t=new e.constructor(e.byteLength);return new a4(t).set(new a4(e)),t}function Hhe(e,t){var r=t?j2(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var zhe=/\w*$/;function Ghe(e){var t=new e.constructor(e.source,zhe.exec(e));return t.lastIndex=e.lastIndex,t}var o4=Td?Td.prototype:void 0,s4=o4?o4.valueOf:void 0;function Whe(e){return s4?Object(s4.call(e)):{}}function Khe(e,t){var r=t?j2(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var qhe="[object Boolean]",Yhe="[object Date]",Xhe="[object Map]",Jhe="[object Number]",Qhe="[object RegExp]",Zhe="[object Set]",efe="[object String]",tfe="[object Symbol]",rfe="[object ArrayBuffer]",nfe="[object DataView]",ife="[object Float32Array]",afe="[object Float64Array]",ofe="[object Int8Array]",sfe="[object Int16Array]",lfe="[object Int32Array]",cfe="[object Uint8Array]",ufe="[object Uint8ClampedArray]",dfe="[object Uint16Array]",hfe="[object Uint32Array]";function ffe(e,t,r){var n=e.constructor;switch(t){case rfe:return j2(e);case qhe:case Yhe:return new n(+e);case nfe:return Hhe(e,r);case ife:case afe:case ofe:case sfe:case lfe:case cfe:case ufe:case dfe:case hfe:return Khe(e,r);case Xhe:return new n;case Jhe:case efe:return new n(e);case Qhe:return Ghe(e);case Zhe:return new n;case tfe:return Whe(e)}}var l4=Object.create,pfe=function(){function e(){}return function(t){if(!ab(t))return{};if(l4)return l4(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function mfe(e){return typeof e.constructor=="function"&&!k2(e)?pfe(A2(e)):{}}var gfe="[object Map]";function yfe(e){return bf(e)&&Mc(e)==gfe}var c4=km&&km.isMap,vfe=c4?O2(c4):yfe,bfe="[object Set]";function wfe(e){return bf(e)&&Mc(e)==bfe}var u4=km&&km.isSet,Efe=u4?O2(u4):wfe,_fe=1,Sfe=2,Tfe=4,_K="[object Arguments]",Cfe="[object Array]",xfe="[object Boolean]",Rfe="[object Date]",Ife="[object Error]",SK="[object Function]",Nfe="[object GeneratorFunction]",Afe="[object Map]",Ofe="[object Number]",TK="[object Object]",kfe="[object RegExp]",Pfe="[object Set]",Dfe="[object String]",Lfe="[object Symbol]",jfe="[object WeakMap]",Mfe="[object ArrayBuffer]",Ufe="[object DataView]",Ffe="[object Float32Array]",Vfe="[object Float64Array]",Bfe="[object Int8Array]",$fe="[object Int16Array]",Hfe="[object Int32Array]",zfe="[object Uint8Array]",Gfe="[object Uint8ClampedArray]",Wfe="[object Uint16Array]",Kfe="[object Uint32Array]",dn={};dn[_K]=dn[Cfe]=dn[Mfe]=dn[Ufe]=dn[xfe]=dn[Rfe]=dn[Ffe]=dn[Vfe]=dn[Bfe]=dn[$fe]=dn[Hfe]=dn[Afe]=dn[Ofe]=dn[TK]=dn[kfe]=dn[Pfe]=dn[Dfe]=dn[Lfe]=dn[zfe]=dn[Gfe]=dn[Wfe]=dn[Kfe]=!0;dn[Ife]=dn[SK]=dn[jfe]=!1;function p0(e,t,r,n,i,a){var o,s=t&_fe,l=t&Sfe,c=t&Tfe;if(o!==void 0)return o;if(!ab(e))return e;var u=ob(e);if(u){if(o=$he(e),!s)return yK(e,o)}else{var h=Mc(e),f=h==SK||h==Nfe;if(dK(e))return Che(e,s);if(h==TK||h==_K||f&&!i){if(o=l||f?{}:mfe(e),!s)return l?Ohe(e,She(o,e)):Nhe(e,vhe(o,e))}else{if(!dn[h])return i?e:{};o=ffe(e,h,s)}}a||(a=new dg);var p=a.get(e);if(p)return p;a.set(e,o),Efe(e)?e.forEach(function(y){o.add(p0(y,t,r,y,e,a))}):vfe(e)&&e.forEach(function(y,v){o.set(v,p0(y,t,r,v,e,a))});var m=c?l?Phe:khe:l?D2:P2,g=u?void 0:m(e);return Sde(g||e,function(y,v){g&&(v=y,y=e[v]),lK(o,v,p0(y,t,r,v,e,a))}),o}var qfe=1,Yfe=4;function Tw(e){return p0(e,qfe|Yfe)}var d4=Array.isArray,h4=Object.keys,Xfe=Object.prototype.hasOwnProperty,Jfe=typeof Element<"u";function mk(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=d4(e),n=d4(t),i,a,o;if(r&&n){if(a=e.length,a!=t.length)return!1;for(i=a;i--!==0;)if(!mk(e[i],t[i]))return!1;return!0}if(r!=n)return!1;var s=e instanceof Date,l=t instanceof Date;if(s!=l)return!1;if(s&&l)return e.getTime()==t.getTime();var c=e instanceof RegExp,u=t instanceof RegExp;if(c!=u)return!1;if(c&&u)return e.toString()==t.toString();var h=h4(e);if(a=h.length,a!==h4(t).length)return!1;for(i=a;i--!==0;)if(!Xfe.call(t,h[i]))return!1;if(Jfe&&e instanceof Element&&t instanceof Element)return e===t;for(i=a;i--!==0;)if(o=h[i],!(o==="_owner"&&e.$$typeof)&&!mk(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}var Qfe=function(t,r){try{return mk(t,r)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||n.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}};const oh=es(Qfe);var Zfe=4;function f4(e){return p0(e,Zfe)}function CK(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var epe="[object Symbol]";function M2(e){return typeof e=="symbol"||bf(e)&&vf(e)==epe}var tpe="Expected a function";function U2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(tpe);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(U2.Cache||jd),r}U2.Cache=jd;var rpe=500;function npe(e){var t=U2(e,function(n){return r.size===rpe&&r.clear(),n}),r=t.cache;return t}var ipe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ape=/\\(\\)?/g,ope=npe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ipe,function(r,n,i,a){t.push(i?a.replace(ape,"$1"):n||r)}),t}),spe=1/0;function lpe(e){if(typeof e=="string"||M2(e))return e;var t=e+"";return t=="0"&&1/e==-spe?"-0":t}var cpe=1/0,p4=Td?Td.prototype:void 0,m4=p4?p4.toString:void 0;function xK(e){if(typeof e=="string")return e;if(ob(e))return CK(e,xK)+"";if(M2(e))return m4?m4.call(e):"";var t=e+"";return t=="0"&&1/e==-cpe?"-0":t}function upe(e){return e==null?"":xK(e)}function RK(e){return ob(e)?CK(e,lpe):M2(e)?[e]:yK(ope(upe(e)))}var IK={exports:{}},Xr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=typeof Symbol=="function"&&Symbol.for,F2=ra?Symbol.for("react.element"):60103,V2=ra?Symbol.for("react.portal"):60106,rC=ra?Symbol.for("react.fragment"):60107,nC=ra?Symbol.for("react.strict_mode"):60108,iC=ra?Symbol.for("react.profiler"):60114,aC=ra?Symbol.for("react.provider"):60109,oC=ra?Symbol.for("react.context"):60110,B2=ra?Symbol.for("react.async_mode"):60111,sC=ra?Symbol.for("react.concurrent_mode"):60111,lC=ra?Symbol.for("react.forward_ref"):60112,cC=ra?Symbol.for("react.suspense"):60113,dpe=ra?Symbol.for("react.suspense_list"):60120,uC=ra?Symbol.for("react.memo"):60115,dC=ra?Symbol.for("react.lazy"):60116,hpe=ra?Symbol.for("react.block"):60121,fpe=ra?Symbol.for("react.fundamental"):60117,ppe=ra?Symbol.for("react.responder"):60118,mpe=ra?Symbol.for("react.scope"):60119;function ns(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case F2:switch(e=e.type,e){case B2:case sC:case rC:case iC:case nC:case cC:return e;default:switch(e=e&&e.$$typeof,e){case oC:case lC:case dC:case uC:case aC:return e;default:return t}}case V2:return t}}}function NK(e){return ns(e)===sC}Xr.AsyncMode=B2;Xr.ConcurrentMode=sC;Xr.ContextConsumer=oC;Xr.ContextProvider=aC;Xr.Element=F2;Xr.ForwardRef=lC;Xr.Fragment=rC;Xr.Lazy=dC;Xr.Memo=uC;Xr.Portal=V2;Xr.Profiler=iC;Xr.StrictMode=nC;Xr.Suspense=cC;Xr.isAsyncMode=function(e){return NK(e)||ns(e)===B2};Xr.isConcurrentMode=NK;Xr.isContextConsumer=function(e){return ns(e)===oC};Xr.isContextProvider=function(e){return ns(e)===aC};Xr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===F2};Xr.isForwardRef=function(e){return ns(e)===lC};Xr.isFragment=function(e){return ns(e)===rC};Xr.isLazy=function(e){return ns(e)===dC};Xr.isMemo=function(e){return ns(e)===uC};Xr.isPortal=function(e){return ns(e)===V2};Xr.isProfiler=function(e){return ns(e)===iC};Xr.isStrictMode=function(e){return ns(e)===nC};Xr.isSuspense=function(e){return ns(e)===cC};Xr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===rC||e===sC||e===iC||e===nC||e===cC||e===dpe||typeof e=="object"&&e!==null&&(e.$$typeof===dC||e.$$typeof===uC||e.$$typeof===aC||e.$$typeof===oC||e.$$typeof===lC||e.$$typeof===fpe||e.$$typeof===ppe||e.$$typeof===mpe||e.$$typeof===hpe)};Xr.typeOf=ns;IK.exports=Xr;var $2=IK.exports,AK=$2,gpe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ype={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},OK={};OK[AK.ForwardRef]=gpe;OK[AK.Memo]=ype;function Wi(){return Wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wi.apply(this,arguments)}function kK(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var hC=T.createContext(void 0);hC.displayName="FormikContext";hC.Provider;hC.Consumer;function vpe(){var e=T.useContext(hC);return e}var rl=function(t){return typeof t=="function"},fC=function(t){return t!==null&&typeof t=="object"},bpe=function(t){return String(Math.floor(Number(t)))===t},GR=function(t){return Object.prototype.toString.call(t)==="[object String]"},WR=function(t){return fC(t)&&rl(t.then)};function Ao(e,t,r,n){n===void 0&&(n=0);for(var i=RK(t);e&&n<i.length;)e=e[i[n++]];return n!==i.length&&!e||e===void 0?r:e}function Lh(e,t,r){for(var n=f4(e),i=n,a=0,o=RK(t);a<o.length-1;a++){var s=o[a],l=Ao(e,o.slice(0,a+1));if(l&&(fC(l)||Array.isArray(l)))i=i[s]=f4(l);else{var c=o[a+1];i=i[s]=bpe(c)&&Number(c)>=0?[]:{}}}return(a===0?e:i)[o[a]]===r?e:(r===void 0?delete i[o[a]]:i[o[a]]=r,a===0&&r===void 0&&delete n[o[a]],n)}function PK(e,t,r,n){r===void 0&&(r=new WeakMap),n===void 0&&(n={});for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],s=e[o];fC(s)?r.get(s)||(r.set(s,!0),n[o]=Array.isArray(s)?[]:{},PK(s,t,r,n[o])):n[o]=t}return n}function wpe(e,t){switch(t.type){case"SET_VALUES":return Wi({},e,{values:t.payload});case"SET_TOUCHED":return Wi({},e,{touched:t.payload});case"SET_ERRORS":return oh(e.errors,t.payload)?e:Wi({},e,{errors:t.payload});case"SET_STATUS":return Wi({},e,{status:t.payload});case"SET_ISSUBMITTING":return Wi({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Wi({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return Wi({},e,{values:Lh(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Wi({},e,{touched:Lh(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Wi({},e,{errors:Lh(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Wi({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return Wi({},e,{touched:PK(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return Wi({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return Wi({},e,{isSubmitting:!1});default:return e}}var Xd={},Cw={};function Sr(e){var t=e.validateOnChange,r=t===void 0?!0:t,n=e.validateOnBlur,i=n===void 0?!0:n,a=e.validateOnMount,o=a===void 0?!1:a,s=e.isInitialValid,l=e.enableReinitialize,c=l===void 0?!1:l,u=e.onSubmit,h=kK(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),f=Wi({validateOnChange:r,validateOnBlur:i,validateOnMount:o,onSubmit:u},h),p=T.useRef(f.initialValues),m=T.useRef(f.initialErrors||Xd),g=T.useRef(f.initialTouched||Cw),y=T.useRef(f.initialStatus),v=T.useRef(!1),b=T.useRef({});T.useEffect(function(){return v.current=!0,function(){v.current=!1}},[]);var E=T.useState(0),S=E[1],I=T.useRef({values:Tw(f.initialValues),errors:Tw(f.initialErrors)||Xd,touched:Tw(f.initialTouched)||Cw,status:Tw(f.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),N=I.current,L=T.useCallback(function(Z){var Te=I.current;I.current=wpe(Te,Z),Te!==I.current&&S(function(Fe){return Fe+1})},[]),j=T.useCallback(function(Z,Te){return new Promise(function(Fe,He){var ne=f.validate(Z,Te);ne==null?Fe(Xd):WR(ne)?ne.then(function(pe){Fe(pe||Xd)},function(pe){He(pe)}):Fe(ne)})},[f.validate]),z=T.useCallback(function(Z,Te){var Fe=f.validationSchema,He=rl(Fe)?Fe(Te):Fe,ne=Te&&He.validateAt?He.validateAt(Te,Z):_pe(Z,He);return new Promise(function(pe,We){ne.then(function(){pe(Xd)},function(st){st.name==="ValidationError"?pe(Epe(st)):We(st)})})},[f.validationSchema]),A=T.useCallback(function(Z,Te){return new Promise(function(Fe){return Fe(b.current[Z].validate(Te))})},[]),V=T.useCallback(function(Z){var Te=Object.keys(b.current).filter(function(He){return rl(b.current[He].validate)}),Fe=Te.length>0?Te.map(function(He){return A(He,Ao(Z,He))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(Fe).then(function(He){return He.reduce(function(ne,pe,We){return pe==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||pe&&(ne=Lh(ne,Te[We],pe)),ne},{})})},[A]),G=T.useCallback(function(Z){return Promise.all([V(Z),f.validationSchema?z(Z):{},f.validate?j(Z):{}]).then(function(Te){var Fe=Te[0],He=Te[1],ne=Te[2],pe=uk.all([Fe,He,ne],{arrayMerge:Spe});return pe})},[f.validate,f.validationSchema,V,j,z]),X=hs(function(Z){return Z===void 0&&(Z=N.values),L({type:"SET_ISVALIDATING",payload:!0}),G(Z).then(function(Te){return v.current&&(L({type:"SET_ISVALIDATING",payload:!1}),L({type:"SET_ERRORS",payload:Te})),Te})});T.useEffect(function(){o&&v.current===!0&&oh(p.current,f.initialValues)&&X(p.current)},[o,X]);var $=T.useCallback(function(Z){var Te=Z&&Z.values?Z.values:p.current,Fe=Z&&Z.errors?Z.errors:m.current?m.current:f.initialErrors||{},He=Z&&Z.touched?Z.touched:g.current?g.current:f.initialTouched||{},ne=Z&&Z.status?Z.status:y.current?y.current:f.initialStatus;p.current=Te,m.current=Fe,g.current=He,y.current=ne;var pe=function(){L({type:"RESET_FORM",payload:{isSubmitting:!!Z&&!!Z.isSubmitting,errors:Fe,touched:He,status:ne,values:Te,isValidating:!!Z&&!!Z.isValidating,submitCount:Z&&Z.submitCount&&typeof Z.submitCount=="number"?Z.submitCount:0}})};if(f.onReset){var We=f.onReset(N.values,tt);WR(We)?We.then(pe):pe()}else pe()},[f.initialErrors,f.initialStatus,f.initialTouched,f.onReset]);T.useEffect(function(){v.current===!0&&!oh(p.current,f.initialValues)&&c&&(p.current=f.initialValues,$(),o&&X(p.current))},[c,f.initialValues,$,o,X]),T.useEffect(function(){c&&v.current===!0&&!oh(m.current,f.initialErrors)&&(m.current=f.initialErrors||Xd,L({type:"SET_ERRORS",payload:f.initialErrors||Xd}))},[c,f.initialErrors]),T.useEffect(function(){c&&v.current===!0&&!oh(g.current,f.initialTouched)&&(g.current=f.initialTouched||Cw,L({type:"SET_TOUCHED",payload:f.initialTouched||Cw}))},[c,f.initialTouched]),T.useEffect(function(){c&&v.current===!0&&!oh(y.current,f.initialStatus)&&(y.current=f.initialStatus,L({type:"SET_STATUS",payload:f.initialStatus}))},[c,f.initialStatus,f.initialTouched]);var B=hs(function(Z){if(b.current[Z]&&rl(b.current[Z].validate)){var Te=Ao(N.values,Z),Fe=b.current[Z].validate(Te);return WR(Fe)?(L({type:"SET_ISVALIDATING",payload:!0}),Fe.then(function(He){return He}).then(function(He){L({type:"SET_FIELD_ERROR",payload:{field:Z,value:He}}),L({type:"SET_ISVALIDATING",payload:!1})})):(L({type:"SET_FIELD_ERROR",payload:{field:Z,value:Fe}}),Promise.resolve(Fe))}else if(f.validationSchema)return L({type:"SET_ISVALIDATING",payload:!0}),z(N.values,Z).then(function(He){return He}).then(function(He){L({type:"SET_FIELD_ERROR",payload:{field:Z,value:Ao(He,Z)}}),L({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),K=T.useCallback(function(Z,Te){var Fe=Te.validate;b.current[Z]={validate:Fe}},[]),P=T.useCallback(function(Z){delete b.current[Z]},[]),D=hs(function(Z,Te){L({type:"SET_TOUCHED",payload:Z});var Fe=Te===void 0?i:Te;return Fe?X(N.values):Promise.resolve()}),H=T.useCallback(function(Z){L({type:"SET_ERRORS",payload:Z})},[]),x=hs(function(Z,Te){var Fe=rl(Z)?Z(N.values):Z;L({type:"SET_VALUES",payload:Fe});var He=Te===void 0?r:Te;return He?X(Fe):Promise.resolve()}),w=T.useCallback(function(Z,Te){L({type:"SET_FIELD_ERROR",payload:{field:Z,value:Te}})},[]),O=hs(function(Z,Te,Fe){L({type:"SET_FIELD_VALUE",payload:{field:Z,value:Te}});var He=Fe===void 0?r:Fe;return He?X(Lh(N.values,Z,Te)):Promise.resolve()}),C=T.useCallback(function(Z,Te){var Fe=Te,He=Z,ne;if(!GR(Z)){Z.persist&&Z.persist();var pe=Z.target?Z.target:Z.currentTarget,We=pe.type,st=pe.name,Yt=pe.id,Kn=pe.value,kn=pe.checked,Ii=pe.outerHTML,Pn=pe.options,Hi=pe.multiple;Fe=Te||st||Yt,He=/number|range/.test(We)?(ne=parseFloat(Kn),isNaN(ne)?"":ne):/checkbox/.test(We)?Cpe(Ao(N.values,Fe),kn,Kn):Pn&&Hi?Tpe(Pn):Kn}Fe&&O(Fe,He)},[O,N.values]),q=hs(function(Z){if(GR(Z))return function(Te){return C(Te,Z)};C(Z)}),F=hs(function(Z,Te,Fe){Te===void 0&&(Te=!0),L({type:"SET_FIELD_TOUCHED",payload:{field:Z,value:Te}});var He=Fe===void 0?i:Fe;return He?X(N.values):Promise.resolve()}),J=T.useCallback(function(Z,Te){Z.persist&&Z.persist();var Fe=Z.target,He=Fe.name,ne=Fe.id,pe=Fe.outerHTML,We=Te||He||ne;F(We,!0)},[F]),se=hs(function(Z){if(GR(Z))return function(Te){return J(Te,Z)};J(Z)}),he=T.useCallback(function(Z){rl(Z)?L({type:"SET_FORMIK_STATE",payload:Z}):L({type:"SET_FORMIK_STATE",payload:function(){return Z}})},[]),ge=T.useCallback(function(Z){L({type:"SET_STATUS",payload:Z})},[]),je=T.useCallback(function(Z){L({type:"SET_ISSUBMITTING",payload:Z})},[]),ze=hs(function(){return L({type:"SUBMIT_ATTEMPT"}),X().then(function(Z){var Te=Z instanceof Error,Fe=!Te&&Object.keys(Z).length===0;if(Fe){var He;try{if(He=Tt(),He===void 0)return}catch(ne){throw ne}return Promise.resolve(He).then(function(ne){return v.current&&L({type:"SUBMIT_SUCCESS"}),ne}).catch(function(ne){if(v.current)throw L({type:"SUBMIT_FAILURE"}),ne})}else if(v.current&&(L({type:"SUBMIT_FAILURE"}),Te))throw Z})}),Me=hs(function(Z){Z&&Z.preventDefault&&rl(Z.preventDefault)&&Z.preventDefault(),Z&&Z.stopPropagation&&rl(Z.stopPropagation)&&Z.stopPropagation(),ze().catch(function(Te){console.warn("Warning: An unhandled error was caught from submitForm()",Te)})}),tt={resetForm:$,validateForm:X,validateField:B,setErrors:H,setFieldError:w,setFieldTouched:F,setFieldValue:O,setStatus:ge,setSubmitting:je,setTouched:D,setValues:x,setFormikState:he,submitForm:ze},Tt=hs(function(){return u(N.values,tt)}),rt=hs(function(Z){Z&&Z.preventDefault&&rl(Z.preventDefault)&&Z.preventDefault(),Z&&Z.stopPropagation&&rl(Z.stopPropagation)&&Z.stopPropagation(),$()}),yt=T.useCallback(function(Z){return{value:Ao(N.values,Z),error:Ao(N.errors,Z),touched:!!Ao(N.touched,Z),initialValue:Ao(p.current,Z),initialTouched:!!Ao(g.current,Z),initialError:Ao(m.current,Z)}},[N.errors,N.touched,N.values]),Oe=T.useCallback(function(Z){return{setValue:function(Fe,He){return O(Z,Fe,He)},setTouched:function(Fe,He){return F(Z,Fe,He)},setError:function(Fe){return w(Z,Fe)}}},[O,F,w]),it=T.useCallback(function(Z){var Te=fC(Z),Fe=Te?Z.name:Z,He=Ao(N.values,Fe),ne={name:Fe,value:He,onChange:q,onBlur:se};if(Te){var pe=Z.type,We=Z.value,st=Z.as,Yt=Z.multiple;pe==="checkbox"?We===void 0?ne.checked=!!He:(ne.checked=!!(Array.isArray(He)&&~He.indexOf(We)),ne.value=We):pe==="radio"?(ne.checked=He===We,ne.value=We):st==="select"&&Yt&&(ne.value=ne.value||[],ne.multiple=!0)}return ne},[se,q,N.values]),Ge=T.useMemo(function(){return!oh(p.current,N.values)},[p.current,N.values]),Ze=T.useMemo(function(){return typeof s<"u"?Ge?N.errors&&Object.keys(N.errors).length===0:s!==!1&&rl(s)?s(f):s:N.errors&&Object.keys(N.errors).length===0},[s,Ge,N.errors,f]),Re=Wi({},N,{initialValues:p.current,initialErrors:m.current,initialTouched:g.current,initialStatus:y.current,handleBlur:se,handleChange:q,handleReset:rt,handleSubmit:Me,resetForm:$,setErrors:H,setFormikState:he,setFieldTouched:F,setFieldValue:O,setFieldError:w,setStatus:ge,setSubmitting:je,setTouched:D,setValues:x,submitForm:ze,validateForm:X,validateField:B,isValid:Ze,dirty:Ge,unregisterField:P,registerField:K,getFieldProps:it,getFieldMeta:yt,getFieldHelpers:Oe,validateOnBlur:i,validateOnChange:r,validateOnMount:o});return Re}function Epe(e){var t={};if(e.inner){if(e.inner.length===0)return Lh(t,e.path,e.message);for(var i=e.inner,r=Array.isArray(i),n=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(n>=i.length)break;a=i[n++]}else{if(n=i.next(),n.done)break;a=n.value}var o=a;Ao(t,o.path)||(t=Lh(t,o.path,o.message))}}return t}function _pe(e,t,r,n){r===void 0&&(r=!1);var i=gk(e);return t[r?"validateSync":"validate"](i,{abortEarly:!1,context:i})}function gk(e){var t=Array.isArray(e)?[]:{};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=String(r);Array.isArray(e[n])===!0?t[n]=e[n].map(function(i){return Array.isArray(i)===!0||H5(i)?gk(i):i!==""?i:void 0}):H5(e[n])?t[n]=gk(e[n]):t[n]=e[n]!==""?e[n]:void 0}return t}function Spe(e,t,r){var n=e.slice();return t.forEach(function(a,o){if(typeof n[o]>"u"){var s=r.clone!==!1,l=s&&r.isMergeableObject(a);n[o]=l?uk(Array.isArray(a)?[]:{},a,r):a}else r.isMergeableObject(a)?n[o]=uk(e[o],a,r):e.indexOf(a)===-1&&n.push(a)}),n}function Tpe(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function Cpe(e,t,r){if(typeof e=="boolean")return!!t;var n=[],i=!1,a=-1;if(Array.isArray(e))n=e,a=e.indexOf(r),i=a>=0;else if(!r||r=="true"||r=="false")return!!t;return t&&r&&!i?n.concat(r):i?n.slice(0,a).concat(n.slice(a+1)):n}var xpe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?T.useLayoutEffect:T.useEffect;function hs(e){var t=T.useRef(e);return xpe(function(){t.current=e}),T.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current.apply(void 0,n)},[])}var Rpe=T.forwardRef(function(e,t){var r=e.action,n=kK(e,["action"]),i=r??"#",a=vpe(),o=a.handleReset,s=a.handleSubmit;return T.createElement("form",Wi({onSubmit:s,ref:t,onReset:o,action:i},n))});Rpe.displayName="Form";function _f(e){this._maxSize=e,this.clear()}_f.prototype.clear=function(){this._size=0,this._values=Object.create(null)};_f.prototype.get=function(e){return this._values[e]};_f.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var Ipe=/[^.^\]^[]+|(?=\[\]|\.\.)/g,DK=/^\d+$/,Npe=/^\d/,Ape=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,Ope=/^\s*(['"]?)(.*?)(\1)\s*$/,H2=512,g4=new _f(H2),y4=new _f(H2),v4=new _f(H2),jh={Cache:_f,split:yk,normalizePath:KR,setter:function(e){var t=KR(e);return y4.get(e)||y4.set(e,function(n,i){for(var a=0,o=t.length,s=n;a<o-1;){var l=t[a];if(l==="__proto__"||l==="constructor"||l==="prototype")return n;s=s[t[a++]]}s[t[a]]=i})},getter:function(e,t){var r=KR(e);return v4.get(e)||v4.set(e,function(i){for(var a=0,o=r.length;a<o;)if(i!=null||!t)i=i[r[a++]];else return;return i})},join:function(e){return e.reduce(function(t,r){return t+(z2(r)||DK.test(r)?"["+r+"]":(t?".":"")+r)},"")},forEach:function(e,t,r){kpe(Array.isArray(e)?e:yk(e),t,r)}};function KR(e){return g4.get(e)||g4.set(e,yk(e).map(function(t){return t.replace(Ope,"$2")}))}function yk(e){return e.match(Ipe)||[""]}function kpe(e,t,r){var n=e.length,i,a,o,s;for(a=0;a<n;a++)i=e[a],i&&(Lpe(i)&&(i='"'+i+'"'),s=z2(i),o=!s&&/^\d+$/.test(i),t.call(r,i,s,o,a,e))}function z2(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function Ppe(e){return e.match(Npe)&&!e.match(DK)}function Dpe(e){return Ape.test(e)}function Lpe(e){return!z2(e)&&(Ppe(e)||Dpe(e))}const jpe=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,pC=e=>e.match(jpe)||[],mC=e=>e[0].toUpperCase()+e.slice(1),G2=(e,t)=>pC(e).join(t).toLowerCase(),LK=e=>pC(e).reduce((t,r)=>`${t}${t?r[0].toUpperCase()+r.slice(1).toLowerCase():r.toLowerCase()}`,""),Mpe=e=>mC(LK(e)),Upe=e=>G2(e,"_"),Fpe=e=>G2(e,"-"),Vpe=e=>mC(G2(e," ")),Bpe=e=>pC(e).map(mC).join(" ");var qR={words:pC,upperFirst:mC,camelCase:LK,pascalCase:Mpe,snakeCase:Upe,kebabCase:Fpe,sentenceCase:Vpe,titleCase:Bpe},W2={exports:{}};W2.exports=function(e){return jK($pe(e),e)};W2.exports.array=jK;function jK(e,t){var r=e.length,n=new Array(r),i={},a=r,o=Hpe(t),s=zpe(e);for(t.forEach(function(c){if(!s.has(c[0])||!s.has(c[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});a--;)i[a]||l(e[a],a,new Set);return n;function l(c,u,h){if(h.has(c)){var f;try{f=", node was:"+JSON.stringify(c)}catch{f=""}throw new Error("Cyclic dependency"+f)}if(!s.has(c))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(c));if(!i[u]){i[u]=!0;var p=o.get(c)||new Set;if(p=Array.from(p),u=p.length){h.add(c);do{var m=p[--u];l(m,s.get(m),h)}while(u);h.delete(c)}n[--r]=c}}}function $pe(e){for(var t=new Set,r=0,n=e.length;r<n;r++){var i=e[r];t.add(i[0]),t.add(i[1])}return Array.from(t)}function Hpe(e){for(var t=new Map,r=0,n=e.length;r<n;r++){var i=e[r];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}function zpe(e){for(var t=new Map,r=0,n=e.length;r<n;r++)t.set(e[r],r);return t}var Gpe=W2.exports;const Wpe=es(Gpe),Kpe=Object.prototype.toString,qpe=Error.prototype.toString,Ype=RegExp.prototype.toString,Xpe=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Jpe=/^Symbol\((.*)\)(.*)$/;function Qpe(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function b4(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const r=typeof e;if(r==="number")return Qpe(e);if(r==="string")return t?`"${e}"`:e;if(r==="function")return"[Function "+(e.name||"anonymous")+"]";if(r==="symbol")return Xpe.call(e).replace(Jpe,"Symbol($1)");const n=Kpe.call(e).slice(8,-1);return n==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):n==="Error"||e instanceof Error?"["+qpe.call(e)+"]":n==="RegExp"?Ype.call(e):null}function qc(e,t){let r=b4(e,t);return r!==null?r:JSON.stringify(e,function(n,i){let a=b4(this[n],t);return a!==null?a:i},2)}function MK(e){return e==null?[]:[].concat(e)}let UK,FK,VK,Zpe=/\$\{\s*(\w+)\s*\}/g;UK=Symbol.toStringTag;class w4{constructor(t,r,n,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[UK]="Error",this.name="ValidationError",this.value=r,this.path=n,this.type=i,this.errors=[],this.inner=[],MK(t).forEach(a=>{if(ro.isError(a)){this.errors.push(...a.errors);const o=a.inner.length?a.inner:[a];this.inner.push(...o)}else this.errors.push(a)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}FK=Symbol.hasInstance;VK=Symbol.toStringTag;class ro extends Error{static formatError(t,r){const n=r.label||r.path||"this";return r=Object.assign({},r,{path:n,originalPath:r.path}),typeof t=="string"?t.replace(Zpe,(i,a)=>qc(r[a])):typeof t=="function"?t(r):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,r,n,i,a){const o=new w4(t,r,n,i);if(a)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[VK]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,ro)}static[FK](t){return w4[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let $l={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:n})=>{const i=n!=null&&n!==r?` (cast from the value \`${qc(n,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${qc(r,!0)}\``+i:`${e} must match the configured type. The validated value was: \`${qc(r,!0)}\``+i}},Xa={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},eme={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},vk={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},bk={isValue:"${path} field must be ${value}"},ZE={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},e_={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},tme={notType:e=>{const{path:t,value:r,spec:n}=e,i=n.types.length;if(Array.isArray(r)){if(r.length<i)return`${t} tuple value has too few items, expected a length of ${i} but got ${r.length} for value: \`${qc(r,!0)}\``;if(r.length>i)return`${t} tuple value has too many items, expected a length of ${i} but got ${r.length} for value: \`${qc(r,!0)}\``}return ro.formatError($l.notType,e)}};Object.assign(Object.create(null),{mixed:$l,string:Xa,number:eme,date:vk,object:ZE,array:e_,boolean:bk,tuple:tme});const gC=e=>e&&e.__isYupSchema__;class gS{static fromOptions(t,r){if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:i,otherwise:a}=r,o=typeof n=="function"?n:(...s)=>s.every(l=>l===n);return new gS(t,(s,l)=>{var c;let u=o(...s)?i:a;return(c=u==null?void 0:u(l))!=null?c:l})}constructor(t,r){this.fn=void 0,this.refs=t,this.refs=t,this.fn=r}resolve(t,r){let n=this.refs.map(a=>a.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),i=this.fn(n,t,r);if(i===void 0||i===t)return t;if(!gC(i))throw new TypeError("conditions must return a schema object");return i.resolve(r)}}const xw={context:"$",value:"."};function BK(e,t){return new Md(e,t)}class Md{constructor(t,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===xw.context,this.isValue=this.key[0]===xw.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?xw.context:this.isValue?xw.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&jh.getter(this.path,!0),this.map=r.map}getValue(t,r,n){let i=this.isContext?n:this.isValue?t:r;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(t,r){return this.getValue(t,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}Md.prototype.__isYupRef=!0;const Gc=e=>e==null;function Kf(e){function t({value:r,path:n="",options:i,originalValue:a,schema:o},s,l){const{name:c,test:u,params:h,message:f,skipAbsent:p}=e;let{parent:m,context:g,abortEarly:y=o.spec.abortEarly,disableStackTrace:v=o.spec.disableStackTrace}=i;function b(V){return Md.isRef(V)?V.getValue(r,m,g):V}function E(V={}){const G=Object.assign({value:r,originalValue:a,label:o.spec.label,path:V.path||n,spec:o.spec,disableStackTrace:V.disableStackTrace||v},h,V.params);for(const $ of Object.keys(G))G[$]=b(G[$]);const X=new ro(ro.formatError(V.message||f,G),r,G.path,V.type||c,G.disableStackTrace);return X.params=G,X}const S=y?s:l;let I={path:n,parent:m,type:c,from:i.from,createError:E,resolve:b,options:i,originalValue:a,schema:o};const N=V=>{ro.isError(V)?S(V):V?l(null):S(E())},L=V=>{ro.isError(V)?S(V):s(V)};if(p&&Gc(r))return N(!0);let z;try{var A;if(z=u.call(I,r,I),typeof((A=z)==null?void 0:A.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${I.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(z).then(N,L)}}catch(V){L(V);return}N(z)}return t.OPTIONS=e,t}function rme(e,t,r,n=r){let i,a,o;return t?(jh.forEach(t,(s,l,c)=>{let u=l?s.slice(1,s.length-1):s;e=e.resolve({context:n,parent:i,value:r});let h=e.type==="tuple",f=c?parseInt(u,10):0;if(e.innerType||h){if(h&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(r&&f>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${s}, in the path: ${t}. because there is no value at that index. `);i=r,r=r&&r[f],e=h?e.spec.types[f]:e.innerType}if(!c){if(!e.fields||!e.fields[u])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${o} which is a type: "${e.type}")`);i=r,r=r&&r[u],e=e.fields[u]}a=u,o=l?"["+s+"]":"."+s}),{schema:e,parent:i,parentPath:a}):{parent:i,parentPath:t,schema:e}}class yS extends Set{describe(){const t=[];for(const r of this.values())t.push(Md.isRef(r)?r.describe():r);return t}resolveAll(t){let r=[];for(const n of this.values())r.push(t(n));return r}clone(){return new yS(this.values())}merge(t,r){const n=this.clone();return t.forEach(i=>n.add(i)),r.forEach(i=>n.delete(i)),n}}function Mp(e,t=new Map){if(gC(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let r;if(e instanceof Date)r=new Date(e.getTime()),t.set(e,r);else if(e instanceof RegExp)r=new RegExp(e),t.set(e,r);else if(Array.isArray(e)){r=new Array(e.length),t.set(e,r);for(let n=0;n<e.length;n++)r[n]=Mp(e[n],t)}else if(e instanceof Map){r=new Map,t.set(e,r);for(const[n,i]of e.entries())r.set(n,Mp(i,t))}else if(e instanceof Set){r=new Set,t.set(e,r);for(const n of e)r.add(Mp(n,t))}else if(e instanceof Object){r={},t.set(e,r);for(const[n,i]of Object.entries(e))r[n]=Mp(i,t)}else throw Error(`Unable to clone ${e}`);return r}let Xo=class{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new yS,this._blacklist=new yS,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError($l.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(r=>{r.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeCheck=this._typeCheck,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.internalTests=Object.assign({},this.internalTests),r.exclusiveTests=Object.assign({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=Mp(Object.assign({},this.spec,t)),r}label(t){let r=this.clone();return r.spec.label=t,r}meta(...t){if(t.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},t[0]),r}withMutation(t){let r=this._mutate;this._mutate=!0;let n=t(this);return this._mutate=r,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let r=this,n=t.clone();const i=Object.assign({},r.spec,n.spec);return n.spec=i,n.internalTests=Object.assign({},r.internalTests,n.internalTests),n._whitelist=r._whitelist.merge(t._whitelist,t._blacklist),n._blacklist=r._blacklist.merge(t._blacklist,t._whitelist),n.tests=r.tests,n.exclusiveTests=r.exclusiveTests,n.withMutation(a=>{t.tests.forEach(o=>{a.test(o.OPTIONS)})}),n.transforms=[...r.transforms,...n.transforms],n}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let r=this;if(r.conditions.length){let n=r.conditions;r=r.clone(),r.conditions=[],r=n.reduce((i,a)=>a.resolve(i,t),r),r=r.resolve(t)}return r}resolveOptions(t){var r,n,i,a;return Object.assign({},t,{from:t.from||[],strict:(r=t.strict)!=null?r:this.spec.strict,abortEarly:(n=t.abortEarly)!=null?n:this.spec.abortEarly,recursive:(i=t.recursive)!=null?i:this.spec.recursive,disableStackTrace:(a=t.disableStackTrace)!=null?a:this.spec.disableStackTrace})}cast(t,r={}){let n=this.resolve(Object.assign({value:t},r)),i=r.assert==="ignore-optionality",a=n._cast(t,r);if(r.assert!==!1&&!n.isType(a)){if(i&&Gc(a))return a;let o=qc(t),s=qc(a);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". 

attempted value: ${o} 
`+(s!==o?`result of cast: ${s}`:""))}return a}_cast(t,r){let n=t===void 0?t:this.transforms.reduce((i,a)=>a.call(this,i,t,this),t);return n===void 0&&(n=this.getDefault(r)),n}_validate(t,r={},n,i){let{path:a,originalValue:o=t,strict:s=this.spec.strict}=r,l=t;s||(l=this._cast(l,Object.assign({assert:!1},r)));let c=[];for(let u of Object.values(this.internalTests))u&&c.push(u);this.runTests({path:a,value:l,originalValue:o,options:r,tests:c},n,u=>{if(u.length)return i(u,l);this.runTests({path:a,value:l,originalValue:o,options:r,tests:this.tests},n,i)})}runTests(t,r,n){let i=!1,{tests:a,value:o,originalValue:s,path:l,options:c}=t,u=g=>{i||(i=!0,r(g,o))},h=g=>{i||(i=!0,n(g,o))},f=a.length,p=[];if(!f)return h([]);let m={value:o,originalValue:s,path:l,options:c,schema:this};for(let g=0;g<a.length;g++){const y=a[g];y(m,u,function(b){b&&(Array.isArray(b)?p.push(...b):p.push(b)),--f<=0&&h(p)})}}asNestedTest({key:t,index:r,parent:n,parentPath:i,originalParent:a,options:o}){const s=t??r;if(s==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof s=="number";let c=n[s];const u=Object.assign({},o,{strict:!0,parent:n,value:c,originalValue:a[s],key:void 0,[l?"index":"key"]:s,path:l||s.includes(".")?`${i||""}[${l?s:`"${s}"`}]`:(i?`${i}.`:"")+t});return(h,f,p)=>this.resolve(u)._validate(c,u,f,p)}validate(t,r){var n;let i=this.resolve(Object.assign({},r,{value:t})),a=(n=r==null?void 0:r.disableStackTrace)!=null?n:i.spec.disableStackTrace;return new Promise((o,s)=>i._validate(t,r,(l,c)=>{ro.isError(l)&&(l.value=c),s(l)},(l,c)=>{l.length?s(new ro(l,c,void 0,void 0,a)):o(c)}))}validateSync(t,r){var n;let i=this.resolve(Object.assign({},r,{value:t})),a,o=(n=r==null?void 0:r.disableStackTrace)!=null?n:i.spec.disableStackTrace;return i._validate(t,Object.assign({},r,{sync:!0}),(s,l)=>{throw ro.isError(s)&&(s.value=l),s},(s,l)=>{if(s.length)throw new ro(s,t,void 0,void 0,o);a=l}),a}isValid(t,r){return this.validate(t,r).then(()=>!0,n=>{if(ro.isError(n))return!1;throw n})}isValidSync(t,r){try{return this.validateSync(t,r),!0}catch(n){if(ro.isError(n))return!1;throw n}}_getDefault(t){let r=this.spec.default;return r==null?r:typeof r=="function"?r.call(this,t):Mp(r)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,r){const n=this.clone({nullable:t});return n.internalTests.nullable=Kf({message:r,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),n}optionality(t,r){const n=this.clone({optional:t});return n.internalTests.optionality=Kf({message:r,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),n}optional(){return this.optionality(!0)}defined(t=$l.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=$l.notNull){return this.nullability(!1,t)}required(t=$l.required){return this.clone().withMutation(r=>r.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let r=this.clone();return r.transforms.push(t),r}test(...t){let r;if(t.length===1?typeof t[0]=="function"?r={test:t[0]}:r=t[0]:t.length===2?r={name:t[0],test:t[1]}:r={name:t[0],message:t[1],test:t[2]},r.message===void 0&&(r.message=$l.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),i=Kf(r),a=r.exclusive||r.name&&n.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(n.exclusiveTests[r.name]=!!r.exclusive),n.tests=n.tests.filter(o=>!(o.OPTIONS.name===r.name&&(a||o.OPTIONS.test===i.OPTIONS.test))),n.tests.push(i),n}when(t,r){!Array.isArray(t)&&typeof t!="string"&&(r=t,t=".");let n=this.clone(),i=MK(t).map(a=>new Md(a));return i.forEach(a=>{a.isSibling&&n.deps.push(a.key)}),n.conditions.push(typeof r=="function"?new gS(i,r):gS.fromOptions(i,r)),n}typeError(t){let r=this.clone();return r.internalTests.typeError=Kf({message:t,name:"typeError",skipAbsent:!0,test(n){return this.schema._typeCheck(n)?!0:this.createError({params:{type:this.schema.type}})}}),r}oneOf(t,r=$l.oneOf){let n=this.clone();return t.forEach(i=>{n._whitelist.add(i),n._blacklist.delete(i)}),n.internalTests.whiteList=Kf({message:r,name:"oneOf",skipAbsent:!0,test(i){let a=this.schema._whitelist,o=a.resolveAll(this.resolve);return o.includes(i)?!0:this.createError({params:{values:Array.from(a).join(", "),resolved:o}})}}),n}notOneOf(t,r=$l.notOneOf){let n=this.clone();return t.forEach(i=>{n._blacklist.add(i),n._whitelist.delete(i)}),n.internalTests.blacklist=Kf({message:r,name:"notOneOf",test(i){let a=this.schema._blacklist,o=a.resolveAll(this.resolve);return o.includes(i)?this.createError({params:{values:Array.from(a).join(", "),resolved:o}}):!0}}),n}strip(t=!0){let r=this.clone();return r.spec.strip=t,r}describe(t){const r=(t?this.resolve(t):this).clone(),{label:n,meta:i,optional:a,nullable:o}=r.spec;return{meta:i,label:n,optional:a,nullable:o,default:r.getDefault(t),type:r.type,oneOf:r._whitelist.describe(),notOneOf:r._blacklist.describe(),tests:r.tests.map(l=>({name:l.OPTIONS.name,params:l.OPTIONS.params})).filter((l,c,u)=>u.findIndex(h=>h.name===l.name)===c)}}};Xo.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])Xo.prototype[`${e}At`]=function(t,r,n={}){const{parent:i,parentPath:a,schema:o}=rme(this,t,r,n.context);return o[e](i&&i[a],Object.assign({},n,{parent:i,path:t}))};for(const e of["equals","is"])Xo.prototype[e]=Xo.prototype.oneOf;for(const e of["not","nope"])Xo.prototype[e]=Xo.prototype.notOneOf;const nme=()=>!0;function $K(e){return new HK(e)}class HK extends Xo{constructor(t){super(typeof t=="function"?{type:"mixed",check:t}:Object.assign({type:"mixed",check:nme},t))}}$K.prototype=HK.prototype;function wk(){return new zK}class zK extends Xo{constructor(){super({type:"boolean",check(t){return t instanceof Boolean&&(t=t.valueOf()),typeof t=="boolean"}}),this.withMutation(()=>{this.transform((t,r,n)=>{if(n.spec.coerce&&!n.isType(t)){if(/^(true|1)$/i.test(String(t)))return!0;if(/^(false|0)$/i.test(String(t)))return!1}return t})})}isTrue(t=bk.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"true"},test(r){return Gc(r)||r===!0}})}isFalse(t=bk.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"false"},test(r){return Gc(r)||r===!1}})}default(t){return super.default(t)}defined(t){return super.defined(t)}optional(){return super.optional()}required(t){return super.required(t)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(t){return super.nonNullable(t)}strip(t){return super.strip(t)}}wk.prototype=zK.prototype;const ime=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function ame(e){const t=Ek(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let r=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(r=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(r=0-r)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+r,t.second,t.millisecond)}function Ek(e){var t,r;const n=ime.exec(e);return n?{year:Sc(n[1]),month:Sc(n[2],1)-1,day:Sc(n[3],1),hour:Sc(n[4]),minute:Sc(n[5]),second:Sc(n[6]),millisecond:n[7]?Sc(n[7].substring(0,3)):0,precision:(t=(r=n[7])==null?void 0:r.length)!=null?t:void 0,z:n[8]||void 0,plusMinus:n[9]||void 0,hourOffset:Sc(n[10]),minuteOffset:Sc(n[11])}:null}function Sc(e,t=0){return Number(e)||t}let ome=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,sme=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,lme=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,cme="^\\d{4}-\\d{2}-\\d{2}",ume="\\d{2}:\\d{2}:\\d{2}",dme="(([+-]\\d{2}(:?\\d{2})?)|Z)",hme=new RegExp(`${cme}T${ume}(\\.\\d+)?${dme}$`),fme=e=>Gc(e)||e===e.trim(),pme={}.toString();function Ut(){return new GK}class GK extends Xo{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,r,n)=>{if(!n.spec.coerce||n.isType(t)||Array.isArray(t))return t;const i=t!=null&&t.toString?t.toString():t;return i===pme?t:i})})}required(t){return super.required(t).withMutation(r=>r.test({message:t||$l.required,name:"required",skipAbsent:!0,test:n=>!!n.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(r=>r.OPTIONS.name!=="required"),t))}length(t,r=Xa.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(n){return n.length===this.resolve(t)}})}min(t,r=Xa.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(n){return n.length>=this.resolve(t)}})}max(t,r=Xa.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:t},skipAbsent:!0,test(n){return n.length<=this.resolve(t)}})}matches(t,r){let n=!1,i,a;return r&&(typeof r=="object"?{excludeEmptyString:n=!1,message:i,name:a}=r:i=r),this.test({name:a||"matches",message:i||Xa.matches,params:{regex:t},skipAbsent:!0,test:o=>o===""&&n||o.search(t)!==-1})}email(t=Xa.email){return this.matches(ome,{name:"email",message:t,excludeEmptyString:!0})}url(t=Xa.url){return this.matches(sme,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=Xa.uuid){return this.matches(lme,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let r="",n,i;return t&&(typeof t=="object"?{message:r="",allowOffset:n=!1,precision:i=void 0}=t:r=t),this.matches(hme,{name:"datetime",message:r||Xa.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||Xa.datetime_offset,params:{allowOffset:n},skipAbsent:!0,test:a=>{if(!a||n)return!0;const o=Ek(a);return o?!!o.z:!1}}).test({name:"datetime_precision",message:r||Xa.datetime_precision,params:{precision:i},skipAbsent:!0,test:a=>{if(!a||i==null)return!0;const o=Ek(a);return o?o.precision===i:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=Xa.trim){return this.transform(r=>r!=null?r.trim():r).test({message:t,name:"trim",test:fme})}lowercase(t=Xa.lowercase){return this.transform(r=>Gc(r)?r:r.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>Gc(r)||r===r.toLowerCase()})}uppercase(t=Xa.uppercase){return this.transform(r=>Gc(r)?r:r.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>Gc(r)||r===r.toUpperCase()})}}Ut.prototype=GK.prototype;let mme=new Date(""),gme=e=>Object.prototype.toString.call(e)==="[object Date]";class yC extends Xo{constructor(){super({type:"date",check(t){return gme(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,r,n)=>!n.spec.coerce||n.isType(t)||t===null?t:(t=ame(t),isNaN(t)?yC.INVALID_DATE:new Date(t)))})}prepareParam(t,r){let n;if(Md.isRef(t))n=t;else{let i=this.cast(t);if(!this._typeCheck(i))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);n=i}return n}min(t,r=vk.min){let n=this.prepareParam(t,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(i){return i>=this.resolve(n)}})}max(t,r=vk.max){let n=this.prepareParam(t,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(i){return i<=this.resolve(n)}})}}yC.INVALID_DATE=mme;yC.prototype;function yme(e,t=[]){let r=[],n=new Set,i=new Set(t.map(([o,s])=>`${o}-${s}`));function a(o,s){let l=jh.split(o)[0];n.add(l),i.has(`${s}-${l}`)||r.push([s,l])}for(const o of Object.keys(e)){let s=e[o];n.add(o),Md.isRef(s)&&s.isSibling?a(s.path,o):gC(s)&&"deps"in s&&s.deps.forEach(l=>a(l,o))}return Wpe.array(Array.from(n),r).reverse()}function E4(e,t){let r=1/0;return e.some((n,i)=>{var a;if((a=t.path)!=null&&a.includes(n))return r=i,!0}),r}function WK(e){return(t,r)=>E4(e,t)-E4(e,r)}const KK=(e,t,r)=>{if(typeof e!="string")return e;let n=e;try{n=JSON.parse(e)}catch{}return r.isType(n)?n:e};function t_(e){if("fields"in e){const t={};for(const[r,n]of Object.entries(e.fields))t[r]=t_(n);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=t_(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(t_)}):"optional"in e?e.optional():e}const vme=(e,t)=>{const r=[...jh.normalizePath(t)];if(r.length===1)return r[0]in e;let n=r.pop(),i=jh.getter(jh.join(r),!0)(e);return!!(i&&n in i)};let _4=e=>Object.prototype.toString.call(e)==="[object Object]";function S4(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(n=>r.indexOf(n)===-1)}const bme=WK([]);function Vi(e){return new qK(e)}class qK extends Xo{constructor(t){super({type:"object",check(r){return _4(r)||typeof r=="function"}}),this.fields=Object.create(null),this._sortErrors=bme,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,r={}){var n;let i=super._cast(t,r);if(i===void 0)return this.getDefault(r);if(!this._typeCheck(i))return i;let a=this.fields,o=(n=r.stripUnknown)!=null?n:this.spec.noUnknown,s=[].concat(this._nodes,Object.keys(i).filter(h=>!this._nodes.includes(h))),l={},c=Object.assign({},r,{parent:l,__validating:r.__validating||!1}),u=!1;for(const h of s){let f=a[h],p=h in i;if(f){let m,g=i[h];c.path=(r.path?`${r.path}.`:"")+h,f=f.resolve({value:g,context:r.context,parent:l});let y=f instanceof Xo?f.spec:void 0,v=y==null?void 0:y.strict;if(y!=null&&y.strip){u=u||h in i;continue}m=!r.__validating||!v?f.cast(i[h],c):i[h],m!==void 0&&(l[h]=m)}else p&&!o&&(l[h]=i[h]);(p!==h in l||l[h]!==i[h])&&(u=!0)}return u?l:i}_validate(t,r={},n,i){let{from:a=[],originalValue:o=t,recursive:s=this.spec.recursive}=r;r.from=[{schema:this,value:o},...a],r.__validating=!0,r.originalValue=o,super._validate(t,r,n,(l,c)=>{if(!s||!_4(c)){i(l,c);return}o=o||c;let u=[];for(let h of this._nodes){let f=this.fields[h];!f||Md.isRef(f)||u.push(f.asNestedTest({options:r,key:h,parent:c,parentPath:r.path,originalParent:o}))}this.runTests({tests:u,value:c,originalValue:o,options:r},n,h=>{i(h.sort(this._sortErrors).concat(l),c)})})}clone(t){const r=super.clone(t);return r.fields=Object.assign({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(t){let r=super.concat(t),n=r.fields;for(let[i,a]of Object.entries(this.fields)){const o=n[i];n[i]=o===void 0?a:o}return r.withMutation(i=>i.setFields(n,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let r={};return this._nodes.forEach(n=>{var i;const a=this.fields[n];let o=t;(i=o)!=null&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[n]})),r[n]=a&&"getDefault"in a?a.getDefault(o):void 0}),r}setFields(t,r){let n=this.clone();return n.fields=t,n._nodes=yme(t,r),n._sortErrors=WK(Object.keys(t)),r&&(n._excludedEdges=r),n}shape(t,r=[]){return this.clone().withMutation(n=>{let i=n._excludedEdges;return r.length&&(Array.isArray(r[0])||(r=[r]),i=[...n._excludedEdges,...r]),n.setFields(Object.assign(n.fields,t),i)})}partial(){const t={};for(const[r,n]of Object.entries(this.fields))t[r]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(t)}deepPartial(){return t_(this)}pick(t){const r={};for(const n of t)this.fields[n]&&(r[n]=this.fields[n]);return this.setFields(r,this._excludedEdges.filter(([n,i])=>t.includes(n)&&t.includes(i)))}omit(t){const r=[];for(const n of Object.keys(this.fields))t.includes(n)||r.push(n);return this.pick(r)}from(t,r,n){let i=jh.getter(t,!0);return this.transform(a=>{if(!a)return a;let o=a;return vme(a,t)&&(o=Object.assign({},a),n||delete o[t],o[r]=i(a)),o})}json(){return this.transform(KK)}exact(t){return this.test({name:"exact",exclusive:!0,message:t||ZE.exact,test(r){if(r==null)return!0;const n=S4(this.schema,r);return n.length===0||this.createError({params:{properties:n.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(t=!0,r=ZE.noUnknown){typeof t!="boolean"&&(r=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:r,test(i){if(i==null)return!0;const a=S4(this.schema,i);return!t||a.length===0||this.createError({params:{unknown:a.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,r=ZE.noUnknown){return this.noUnknown(!t,r)}transformKeys(t){return this.transform(r=>{if(!r)return r;const n={};for(const i of Object.keys(r))n[t(i)]=r[i];return n})}camelCase(){return this.transformKeys(qR.camelCase)}snakeCase(){return this.transformKeys(qR.snakeCase)}constantCase(){return this.transformKeys(t=>qR.snakeCase(t).toUpperCase())}describe(t){const r=(t?this.resolve(t):this).clone(),n=super.describe(t);n.fields={};for(const[a,o]of Object.entries(r.fields)){var i;let s=t;(i=s)!=null&&i.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[a]})),n.fields[a]=o.describe(s)}return n}}Vi.prototype=qK.prototype;function YK(e){return new XK(e)}class XK extends Xo{constructor(t){super({type:"array",spec:{types:t},check(r){return Array.isArray(r)}}),this.innerType=void 0,this.innerType=t}_cast(t,r){const n=super._cast(t,r);if(!this._typeCheck(n)||!this.innerType)return n;let i=!1;const a=n.map((o,s)=>{const l=this.innerType.cast(o,Object.assign({},r,{path:`${r.path||""}[${s}]`}));return l!==o&&(i=!0),l});return i?a:n}_validate(t,r={},n,i){var a;let o=this.innerType,s=(a=r.recursive)!=null?a:this.spec.recursive;r.originalValue!=null&&r.originalValue,super._validate(t,r,n,(l,c)=>{var u;if(!s||!o||!this._typeCheck(c)){i(l,c);return}let h=new Array(c.length);for(let p=0;p<c.length;p++){var f;h[p]=o.asNestedTest({options:r,index:p,parent:c,parentPath:r.path,originalParent:(f=r.originalValue)!=null?f:t})}this.runTests({value:c,tests:h,originalValue:(u=r.originalValue)!=null?u:t,options:r},n,p=>i(p.concat(l),c))})}clone(t){const r=super.clone(t);return r.innerType=this.innerType,r}json(){return this.transform(KK)}concat(t){let r=super.concat(t);return r.innerType=this.innerType,t.innerType&&(r.innerType=r.innerType?r.innerType.concat(t.innerType):t.innerType),r}of(t){let r=this.clone();if(!gC(t))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+qc(t));return r.innerType=t,r.spec=Object.assign({},r.spec,{types:t}),r}length(t,r=e_.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(n){return n.length===this.resolve(t)}})}min(t,r){return r=r||e_.min,this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(n){return n.length>=this.resolve(t)}})}max(t,r){return r=r||e_.max,this.test({message:r,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(n){return n.length<=this.resolve(t)}})}ensure(){return this.default(()=>[]).transform((t,r)=>this._typeCheck(t)?t:r==null?[]:[].concat(r))}compact(t){let r=t?(n,i,a)=>!t(n,i,a):n=>!!n;return this.transform(n=>n!=null?n.filter(r):n)}describe(t){const r=(t?this.resolve(t):this).clone(),n=super.describe(t);if(r.innerType){var i;let a=t;(i=a)!=null&&i.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[0]})),n.innerType=r.innerType.describe(a)}return n}}YK.prototype=XK.prototype;const wme=Vi().shape({username:Ut().required("shouldn't be left empty").min(5,"minimum of 5 letters"),password:Ut().required("Required").min(2,"shouldn't be less than 8")});function JK(e,t){return function(){return e.apply(t,arguments)}}const{toString:Eme}=Object.prototype,{getPrototypeOf:K2}=Object,vC=(e=>t=>{const r=Eme.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),El=e=>(e=e.toLowerCase(),t=>vC(t)===e),bC=e=>t=>typeof t===e,{isArray:hg}=Array,uv=bC("undefined");function _me(e){return e!==null&&!uv(e)&&e.constructor!==null&&!uv(e.constructor)&&Wo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const QK=El("ArrayBuffer");function Sme(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&QK(e.buffer),t}const Tme=bC("string"),Wo=bC("function"),ZK=bC("number"),wC=e=>e!==null&&typeof e=="object",Cme=e=>e===!0||e===!1,r_=e=>{if(vC(e)!=="object")return!1;const t=K2(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},xme=El("Date"),Rme=El("File"),Ime=El("Blob"),Nme=El("FileList"),Ame=e=>wC(e)&&Wo(e.pipe),Ome=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Wo(e.append)&&((t=vC(e))==="formdata"||t==="object"&&Wo(e.toString)&&e.toString()==="[object FormData]"))},kme=El("URLSearchParams"),[Pme,Dme,Lme,jme]=["ReadableStream","Request","Response","Headers"].map(El),Mme=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sb(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),hg(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const a=r?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let s;for(n=0;n<o;n++)s=a[n],t.call(null,e[s],s,e)}}function eq(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const Sh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tq=e=>!uv(e)&&e!==Sh;function _k(){const{caseless:e}=tq(this)&&this||{},t={},r=(n,i)=>{const a=e&&eq(t,i)||i;r_(t[a])&&r_(n)?t[a]=_k(t[a],n):r_(n)?t[a]=_k({},n):hg(n)?t[a]=n.slice():t[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&sb(arguments[n],r);return t}const Ume=(e,t,r,{allOwnKeys:n}={})=>(sb(t,(i,a)=>{r&&Wo(i)?e[a]=JK(i,r):e[a]=i},{allOwnKeys:n}),e),Fme=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Vme=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Bme=(e,t,r,n)=>{let i,a,o;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],(!n||n(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=r!==!1&&K2(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},$me=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Hme=e=>{if(!e)return null;if(hg(e))return e;let t=e.length;if(!ZK(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},zme=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&K2(Uint8Array)),Gme=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},Wme=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Kme=El("HTMLFormElement"),qme=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),T4=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Yme=El("RegExp"),rq=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};sb(r,(i,a)=>{let o;(o=t(i,a,e))!==!1&&(n[a]=o||i)}),Object.defineProperties(e,n)},Xme=e=>{rq(e,(t,r)=>{if(Wo(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Wo(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Jme=(e,t)=>{const r={},n=i=>{i.forEach(a=>{r[a]=!0})};return hg(e)?n(e):n(String(e).split(t)),r},Qme=()=>{},Zme=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,YR="abcdefghijklmnopqrstuvwxyz",C4="0123456789",nq={DIGIT:C4,ALPHA:YR,ALPHA_DIGIT:YR+YR.toUpperCase()+C4},ege=(e=16,t=nq.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function tge(e){return!!(e&&Wo(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const rge=e=>{const t=new Array(10),r=(n,i)=>{if(wC(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const a=hg(n)?[]:{};return sb(n,(o,s)=>{const l=r(o,i+1);!uv(l)&&(a[s]=l)}),t[i]=void 0,a}}return n};return r(e,0)},nge=El("AsyncFunction"),ige=e=>e&&(wC(e)||Wo(e))&&Wo(e.then)&&Wo(e.catch),iq=((e,t)=>e?setImmediate:t?((r,n)=>(Sh.addEventListener("message",({source:i,data:a})=>{i===Sh&&a===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Sh.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Wo(Sh.postMessage)),age=typeof queueMicrotask<"u"?queueMicrotask.bind(Sh):typeof process<"u"&&process.nextTick||iq,fe={isArray:hg,isArrayBuffer:QK,isBuffer:_me,isFormData:Ome,isArrayBufferView:Sme,isString:Tme,isNumber:ZK,isBoolean:Cme,isObject:wC,isPlainObject:r_,isReadableStream:Pme,isRequest:Dme,isResponse:Lme,isHeaders:jme,isUndefined:uv,isDate:xme,isFile:Rme,isBlob:Ime,isRegExp:Yme,isFunction:Wo,isStream:Ame,isURLSearchParams:kme,isTypedArray:zme,isFileList:Nme,forEach:sb,merge:_k,extend:Ume,trim:Mme,stripBOM:Fme,inherits:Vme,toFlatObject:Bme,kindOf:vC,kindOfTest:El,endsWith:$me,toArray:Hme,forEachEntry:Gme,matchAll:Wme,isHTMLForm:Kme,hasOwnProperty:T4,hasOwnProp:T4,reduceDescriptors:rq,freezeMethods:Xme,toObjectSet:Jme,toCamelCase:qme,noop:Qme,toFiniteNumber:Zme,findKey:eq,global:Sh,isContextDefined:tq,ALPHABET:nq,generateString:ege,isSpecCompliantForm:tge,toJSONObject:rge,isAsyncFn:nge,isThenable:ige,setImmediate:iq,asap:age};function qt(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}fe.inherits(qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.status}}});const aq=qt.prototype,oq={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{oq[e]={value:e}});Object.defineProperties(qt,oq);Object.defineProperty(aq,"isAxiosError",{value:!0});qt.from=(e,t,r,n,i,a)=>{const o=Object.create(aq);return fe.toFlatObject(e,o,function(l){return l!==Error.prototype},s=>s!=="isAxiosError"),qt.call(o,e.message,t,r,n,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const oge=null;function Sk(e){return fe.isPlainObject(e)||fe.isArray(e)}function sq(e){return fe.endsWith(e,"[]")?e.slice(0,-2):e}function x4(e,t,r){return e?e.concat(t).map(function(i,a){return i=sq(i),!r&&a?"["+i+"]":i}).join(r?".":""):t}function sge(e){return fe.isArray(e)&&!e.some(Sk)}const lge=fe.toFlatObject(fe,{},null,function(t){return/^is[A-Z]/.test(t)});function EC(e,t,r){if(!fe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=fe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!fe.isUndefined(y[g])});const n=r.metaTokens,i=r.visitor||u,a=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&fe.isSpecCompliantForm(t);if(!fe.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(fe.isDate(m))return m.toISOString();if(!l&&fe.isBlob(m))throw new qt("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(m)||fe.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,g,y){let v=m;if(m&&!y&&typeof m=="object"){if(fe.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(fe.isArray(m)&&sge(m)||(fe.isFileList(m)||fe.endsWith(g,"[]"))&&(v=fe.toArray(m)))return g=sq(g),v.forEach(function(E,S){!(fe.isUndefined(E)||E===null)&&t.append(o===!0?x4([g],S,a):o===null?g:g+"[]",c(E))}),!1}return Sk(m)?!0:(t.append(x4(y,g,a),c(m)),!1)}const h=[],f=Object.assign(lge,{defaultVisitor:u,convertValue:c,isVisitable:Sk});function p(m,g){if(!fe.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),fe.forEach(m,function(v,b){(!(fe.isUndefined(v)||v===null)&&i.call(t,v,fe.isString(b)?b.trim():b,g,f))===!0&&p(v,g?g.concat(b):[b])}),h.pop()}}if(!fe.isObject(e))throw new TypeError("data must be an object");return p(e),t}function R4(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function q2(e,t){this._pairs=[],e&&EC(e,this,t)}const lq=q2.prototype;lq.append=function(t,r){this._pairs.push([t,r])};lq.toString=function(t){const r=t?function(n){return t.call(this,n,R4)}:R4;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function cge(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cq(e,t,r){if(!t)return e;const n=r&&r.encode||cge;fe.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let a;if(i?a=i(t,r):a=fe.isURLSearchParams(t)?t.toString():new q2(t,r).toString(n),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class I4{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){fe.forEach(this.handlers,function(n){n!==null&&t(n)})}}const uq={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uge=typeof URLSearchParams<"u"?URLSearchParams:q2,dge=typeof FormData<"u"?FormData:null,hge=typeof Blob<"u"?Blob:null,fge={isBrowser:!0,classes:{URLSearchParams:uge,FormData:dge,Blob:hge},protocols:["http","https","file","blob","url","data"]},Y2=typeof window<"u"&&typeof document<"u",Tk=typeof navigator=="object"&&navigator||void 0,pge=Y2&&(!Tk||["ReactNative","NativeScript","NS"].indexOf(Tk.product)<0),mge=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gge=Y2&&window.location.href||"http://localhost",yge=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Y2,hasStandardBrowserEnv:pge,hasStandardBrowserWebWorkerEnv:mge,navigator:Tk,origin:gge},Symbol.toStringTag,{value:"Module"})),xa={...yge,...fge};function vge(e,t){return EC(e,new xa.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,a){return xa.isNode&&fe.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function bge(e){return fe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function wge(e){const t={},r=Object.keys(e);let n;const i=r.length;let a;for(n=0;n<i;n++)a=r[n],t[a]=e[a];return t}function dq(e){function t(r,n,i,a){let o=r[a++];if(o==="__proto__")return!0;const s=Number.isFinite(+o),l=a>=r.length;return o=!o&&fe.isArray(i)?i.length:o,l?(fe.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s):((!i[o]||!fe.isObject(i[o]))&&(i[o]=[]),t(r,n,i[o],a)&&fe.isArray(i[o])&&(i[o]=wge(i[o])),!s)}if(fe.isFormData(e)&&fe.isFunction(e.entries)){const r={};return fe.forEachEntry(e,(n,i)=>{t(bge(n),i,r,0)}),r}return null}function Ege(e,t,r){if(fe.isString(e))try{return(t||JSON.parse)(e),fe.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}const lb={transitional:uq,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=fe.isObject(t);if(a&&fe.isHTMLForm(t)&&(t=new FormData(t)),fe.isFormData(t))return i?JSON.stringify(dq(t)):t;if(fe.isArrayBuffer(t)||fe.isBuffer(t)||fe.isStream(t)||fe.isFile(t)||fe.isBlob(t)||fe.isReadableStream(t))return t;if(fe.isArrayBufferView(t))return t.buffer;if(fe.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return vge(t,this.formSerializer).toString();if((s=fe.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return EC(s?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),Ege(t)):t}],transformResponse:[function(t){const r=this.transitional||lb.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(fe.isResponse(t)||fe.isReadableStream(t))return t;if(t&&fe.isString(t)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(o)throw s.name==="SyntaxError"?qt.from(s,qt.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xa.classes.FormData,Blob:xa.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};fe.forEach(["delete","get","head","post","put","patch"],e=>{lb.headers[e]={}});const _ge=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sge=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||t[r]&&_ge[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},N4=Symbol("internals");function uy(e){return e&&String(e).trim().toLowerCase()}function n_(e){return e===!1||e==null?e:fe.isArray(e)?e.map(n_):String(e)}function Tge(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Cge=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function XR(e,t,r,n,i){if(fe.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!fe.isString(t)){if(fe.isString(n))return t.indexOf(n)!==-1;if(fe.isRegExp(n))return n.test(t)}}function xge(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Rge(e,t){const r=fe.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,a,o){return this[n].call(this,t,i,a,o)},configurable:!0})})}class fo{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function a(s,l,c){const u=uy(l);if(!u)throw new Error("header name must be a non-empty string");const h=fe.findKey(i,u);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=n_(s))}const o=(s,l)=>fe.forEach(s,(c,u)=>a(c,u,l));if(fe.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(fe.isString(t)&&(t=t.trim())&&!Cge(t))o(Sge(t),r);else if(fe.isHeaders(t))for(const[s,l]of t.entries())a(l,s,n);else t!=null&&a(r,t,n);return this}get(t,r){if(t=uy(t),t){const n=fe.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return Tge(i);if(fe.isFunction(r))return r.call(this,i,n);if(fe.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=uy(t),t){const n=fe.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||XR(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function a(o){if(o=uy(o),o){const s=fe.findKey(n,o);s&&(!r||XR(n,n[s],s,r))&&(delete n[s],i=!0)}}return fe.isArray(t)?t.forEach(a):a(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const a=r[n];(!t||XR(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const r=this,n={};return fe.forEach(this,(i,a)=>{const o=fe.findKey(n,a);if(o){r[o]=n_(i),delete r[a];return}const s=t?xge(a):String(a).trim();s!==a&&delete r[a],r[s]=n_(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return fe.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&fe.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[N4]=this[N4]={accessors:{}}).accessors,i=this.prototype;function a(o){const s=uy(o);n[s]||(Rge(i,o),n[s]=!0)}return fe.isArray(t)?t.forEach(a):a(t),this}}fo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);fe.reduceDescriptors(fo.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});fe.freezeMethods(fo);function JR(e,t){const r=this||lb,n=t||r,i=fo.from(n.headers);let a=n.data;return fe.forEach(e,function(s){a=s.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function hq(e){return!!(e&&e.__CANCEL__)}function fg(e,t,r){qt.call(this,e??"canceled",qt.ERR_CANCELED,t,r),this.name="CanceledError"}fe.inherits(fg,qt,{__CANCEL__:!0});function fq(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new qt("Request failed with status code "+r.status,[qt.ERR_BAD_REQUEST,qt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Ige(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Nge(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=n[a];o||(o=c),r[i]=l,n[i]=c;let h=a,f=0;for(;h!==i;)f+=r[h++],h=h%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-o<t)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function Age(e,t){let r=0,n=1e3/t,i,a;const o=(c,u=Date.now())=>{r=u,i=null,a&&(clearTimeout(a),a=null),e.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-r;h>=n?o(c,u):(i=c,a||(a=setTimeout(()=>{a=null,o(i)},n-h)))},()=>i&&o(i)]}const vS=(e,t,r=3)=>{let n=0;const i=Nge(50,250);return Age(a=>{const o=a.loaded,s=a.lengthComputable?a.total:void 0,l=o-n,c=i(l),u=o<=s;n=o;const h={loaded:o,total:s,progress:s?o/s:void 0,bytes:l,rate:c||void 0,estimated:c&&s&&u?(s-o)/c:void 0,event:a,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(h)},r)},A4=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},O4=e=>(...t)=>fe.asap(()=>e(...t)),Oge=xa.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,xa.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(xa.origin),xa.navigator&&/(msie|trident)/i.test(xa.navigator.userAgent)):()=>!0,kge=xa.hasStandardBrowserEnv?{write(e,t,r,n,i,a){const o=[e+"="+encodeURIComponent(t)];fe.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),fe.isString(n)&&o.push("path="+n),fe.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Pge(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Dge(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function pq(e,t){return e&&!Pge(t)?Dge(e,t):t}const k4=e=>e instanceof fo?{...e}:e;function Zh(e,t){t=t||{};const r={};function n(c,u,h,f){return fe.isPlainObject(c)&&fe.isPlainObject(u)?fe.merge.call({caseless:f},c,u):fe.isPlainObject(u)?fe.merge({},u):fe.isArray(u)?u.slice():u}function i(c,u,h,f){if(fe.isUndefined(u)){if(!fe.isUndefined(c))return n(void 0,c,h,f)}else return n(c,u,h,f)}function a(c,u){if(!fe.isUndefined(u))return n(void 0,u)}function o(c,u){if(fe.isUndefined(u)){if(!fe.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function s(c,u,h){if(h in t)return n(c,u);if(h in e)return n(void 0,c)}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(c,u,h)=>i(k4(c),k4(u),h,!0)};return fe.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=l[u]||i,f=h(e[u],t[u],u);fe.isUndefined(f)&&h!==s||(r[u]=f)}),r}const mq=e=>{const t=Zh({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:s}=t;t.headers=o=fo.from(o),t.url=cq(pq(t.baseURL,t.url),e.params,e.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let l;if(fe.isFormData(r)){if(xa.hasStandardBrowserEnv||xa.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(xa.hasStandardBrowserEnv&&(n&&fe.isFunction(n)&&(n=n(t)),n||n!==!1&&Oge(t.url))){const c=i&&a&&kge.read(a);c&&o.set(i,c)}return t},Lge=typeof XMLHttpRequest<"u",jge=Lge&&function(e){return new Promise(function(r,n){const i=mq(e);let a=i.data;const o=fo.from(i.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:c}=i,u,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function v(){if(!y)return;const E=fo.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),I={data:!s||s==="text"||s==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:E,config:e,request:y};fq(function(L){r(L),g()},function(L){n(L),g()},I),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(n(new qt("Request aborted",qt.ECONNABORTED,e,y)),y=null)},y.onerror=function(){n(new qt("Network Error",qt.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const I=i.transitional||uq;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),n(new qt(S,I.clarifyTimeoutError?qt.ETIMEDOUT:qt.ECONNABORTED,e,y)),y=null},a===void 0&&o.setContentType(null),"setRequestHeader"in y&&fe.forEach(o.toJSON(),function(S,I){y.setRequestHeader(I,S)}),fe.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),s&&s!=="json"&&(y.responseType=i.responseType),c&&([f,m]=vS(c,!0),y.addEventListener("progress",f)),l&&y.upload&&([h,p]=vS(l),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=E=>{y&&(n(!E||E.type?new fg(null,e,y):E),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const b=Ige(i.url);if(b&&xa.protocols.indexOf(b)===-1){n(new qt("Unsupported protocol "+b+":",qt.ERR_BAD_REQUEST,e));return}y.send(a||null)})},Mge=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const a=function(c){if(!i){i=!0,s();const u=c instanceof Error?c:this.reason;n.abort(u instanceof qt?u:new fg(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,a(new qt(`timeout ${t} of ms exceeded`,qt.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),e=null)};e.forEach(c=>c.addEventListener("abort",a));const{signal:l}=n;return l.unsubscribe=()=>fe.asap(s),l}},Uge=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},Fge=async function*(e,t){for await(const r of Vge(e))yield*Uge(r,t)},Vge=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},P4=(e,t,r,n)=>{const i=Fge(e,t);let a=0,o,s=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){s(),l.close();return}let h=u.byteLength;if(r){let f=a+=h;r(f)}l.enqueue(new Uint8Array(u))}catch(c){throw s(c),c}},cancel(l){return s(l),i.return()}},{highWaterMark:2})},_C=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",gq=_C&&typeof ReadableStream=="function",Bge=_C&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),yq=(e,...t)=>{try{return!!e(...t)}catch{return!1}},$ge=gq&&yq(()=>{let e=!1;const t=new Request(xa.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),D4=64*1024,Ck=gq&&yq(()=>fe.isReadableStream(new Response("").body)),bS={stream:Ck&&(e=>e.body)};_C&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!bS[t]&&(bS[t]=fe.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new qt(`Response type '${t}' is not supported`,qt.ERR_NOT_SUPPORT,n)})})})(new Response);const Hge=async e=>{if(e==null)return 0;if(fe.isBlob(e))return e.size;if(fe.isSpecCompliantForm(e))return(await new Request(xa.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(fe.isArrayBufferView(e)||fe.isArrayBuffer(e))return e.byteLength;if(fe.isURLSearchParams(e)&&(e=e+""),fe.isString(e))return(await Bge(e)).byteLength},zge=async(e,t)=>{const r=fe.toFiniteNumber(e.getContentLength());return r??Hge(t)},Gge=_C&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:a,timeout:o,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:f}=mq(e);c=c?(c+"").toLowerCase():"text";let p=Mge([i,a&&a.toAbortSignal()],o),m;const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let y;try{if(l&&$ge&&r!=="get"&&r!=="head"&&(y=await zge(u,n))!==0){let I=new Request(t,{method:"POST",body:n,duplex:"half"}),N;if(fe.isFormData(n)&&(N=I.headers.get("content-type"))&&u.setContentType(N),I.body){const[L,j]=A4(y,vS(O4(l)));n=P4(I.body,D4,L,j)}}fe.isString(h)||(h=h?"include":"omit");const v="credentials"in Request.prototype;m=new Request(t,{...f,signal:p,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:v?h:void 0});let b=await fetch(m);const E=Ck&&(c==="stream"||c==="response");if(Ck&&(s||E&&g)){const I={};["status","statusText","headers"].forEach(z=>{I[z]=b[z]});const N=fe.toFiniteNumber(b.headers.get("content-length")),[L,j]=s&&A4(N,vS(O4(s),!0))||[];b=new Response(P4(b.body,D4,L,()=>{j&&j(),g&&g()}),I)}c=c||"text";let S=await bS[fe.findKey(bS,c)||"text"](b,e);return!E&&g&&g(),await new Promise((I,N)=>{fq(I,N,{data:S,headers:fo.from(b.headers),status:b.status,statusText:b.statusText,config:e,request:m})})}catch(v){throw g&&g(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new qt("Network Error",qt.ERR_NETWORK,e,m),{cause:v.cause||v}):qt.from(v,v&&v.code,e,m)}}),xk={http:oge,xhr:jge,fetch:Gge};fe.forEach(xk,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const L4=e=>`- ${e}`,Wge=e=>fe.isFunction(e)||e===null||e===!1,vq={getAdapter:e=>{e=fe.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let a=0;a<t;a++){r=e[a];let o;if(n=r,!Wge(r)&&(n=xk[(o=String(r)).toLowerCase()],n===void 0))throw new qt(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+a]=n}if(!n){const a=Object.entries(i).map(([s,l])=>`adapter ${s} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?a.length>1?`since :
`+a.map(L4).join(`
`):" "+L4(a[0]):"as no adapter specified";throw new qt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:xk};function QR(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fg(null,e)}function j4(e){return QR(e),e.headers=fo.from(e.headers),e.data=JR.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vq.getAdapter(e.adapter||lb.adapter)(e).then(function(n){return QR(e),n.data=JR.call(e,e.transformResponse,n),n.headers=fo.from(n.headers),n},function(n){return hq(n)||(QR(e),n&&n.response&&(n.response.data=JR.call(e,e.transformResponse,n.response),n.response.headers=fo.from(n.response.headers))),Promise.reject(n)})}const bq="1.7.9",SC={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{SC[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const M4={};SC.transitional=function(t,r,n){function i(a,o){return"[Axios v"+bq+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return(a,o,s)=>{if(t===!1)throw new qt(i(o," has been removed"+(r?" in "+r:"")),qt.ERR_DEPRECATED);return r&&!M4[o]&&(M4[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,o,s):!0}};SC.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Kge(e,t,r){if(typeof e!="object")throw new qt("options must be an object",qt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const a=n[i],o=t[a];if(o){const s=e[a],l=s===void 0||o(s,a,e);if(l!==!0)throw new qt("option "+a+" must be "+l,qt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new qt("Unknown option "+a,qt.ERR_BAD_OPTION)}}const i_={assertOptions:Kge,validators:SC},Nl=i_.validators;class Mh{constructor(t){this.defaults=t,this.interceptors={request:new I4,response:new I4}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Zh(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&i_.assertOptions(n,{silentJSONParsing:Nl.transitional(Nl.boolean),forcedJSONParsing:Nl.transitional(Nl.boolean),clarifyTimeoutError:Nl.transitional(Nl.boolean)},!1),i!=null&&(fe.isFunction(i)?r.paramsSerializer={serialize:i}:i_.assertOptions(i,{encode:Nl.function,serialize:Nl.function},!0)),i_.assertOptions(r,{baseUrl:Nl.spelling("baseURL"),withXsrfToken:Nl.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=a&&fe.merge(a.common,a[r.method]);a&&fe.forEach(["delete","get","head","post","put","patch","common"],m=>{delete a[m]}),r.headers=fo.concat(o,a);const s=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,s.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,h=0,f;if(!l){const m=[j4.bind(this),void 0];for(m.unshift.apply(m,s),m.push.apply(m,c),f=m.length,u=Promise.resolve(r);h<f;)u=u.then(m[h++],m[h++]);return u}f=s.length;let p=r;for(h=0;h<f;){const m=s[h++],g=s[h++];try{p=m(p)}catch(y){g.call(this,y);break}}try{u=j4.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(t){t=Zh(this.defaults,t);const r=pq(t.baseURL,t.url);return cq(r,t.params,t.paramsSerializer)}}fe.forEach(["delete","get","head","options"],function(t){Mh.prototype[t]=function(r,n){return this.request(Zh(n||{},{method:t,url:r,data:(n||{}).data}))}});fe.forEach(["post","put","patch"],function(t){function r(n){return function(a,o,s){return this.request(Zh(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Mh.prototype[t]=r(),Mh.prototype[t+"Form"]=r(!0)});class X2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(s=>{n.subscribe(s),a=s}).then(i);return o.cancel=function(){n.unsubscribe(a)},o},t(function(a,o,s){n.reason||(n.reason=new fg(a,o,s),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new X2(function(i){t=i}),cancel:t}}}function qge(e){return function(r){return e.apply(null,r)}}function Yge(e){return fe.isObject(e)&&e.isAxiosError===!0}const Rk={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Rk).forEach(([e,t])=>{Rk[t]=e});function wq(e){const t=new Mh(e),r=JK(Mh.prototype.request,t);return fe.extend(r,Mh.prototype,t,{allOwnKeys:!0}),fe.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return wq(Zh(e,i))},r}const ce=wq(lb);ce.Axios=Mh;ce.CanceledError=fg;ce.CancelToken=X2;ce.isCancel=hq;ce.VERSION=bq;ce.toFormData=EC;ce.AxiosError=qt;ce.Cancel=ce.CanceledError;ce.all=function(t){return Promise.all(t)};ce.spread=qge;ce.isAxiosError=Yge;ce.mergeConfig=Zh;ce.AxiosHeaders=fo;ce.formToJSON=e=>dq(fe.isHTMLForm(e)?new FormData(e):e);ce.getAdapter=vq.getAdapter;ce.HttpStatusCode=Rk;ce.default=ce;/*!
* sweetalert2 v11.15.2
* Released under the MIT License.
*/function Eq(e,t,r){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function Xge(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function U4(e,t){return e.get(Eq(e,t))}function Jge(e,t,r){Xge(e,t),t.set(e,r)}function Qge(e,t,r){return e.set(Eq(e,t),r),r}const Zge=100,St={},eye=()=>{St.previousActiveElement instanceof HTMLElement?(St.previousActiveElement.focus(),St.previousActiveElement=null):document.body&&document.body.focus()},tye=e=>new Promise(t=>{if(!e)return t();const r=window.scrollX,n=window.scrollY;St.restoreFocusTimeout=setTimeout(()=>{eye(),t()},Zge),window.scrollTo(r,n)}),_q="swal2-",rye=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],ue=rye.reduce((e,t)=>(e[t]=_q+t,e),{}),nye=["success","warning","info","question","error"],wS=nye.reduce((e,t)=>(e[t]=_q+t,e),{}),Sq="SweetAlert2:",J2=e=>e.charAt(0).toUpperCase()+e.slice(1),wo=e=>{console.warn(`${Sq} ${typeof e=="object"?e.join(" "):e}`)},Sf=e=>{console.error(`${Sq} ${e}`)},F4=[],iye=e=>{F4.includes(e)||(F4.push(e),wo(e))},Tq=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;iye(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},TC=e=>typeof e=="function"?e():e,Q2=e=>e&&typeof e.toPromise=="function",cb=e=>Q2(e)?e.toPromise():Promise.resolve(e),Z2=e=>e&&Promise.resolve(e)===e,Eo=()=>document.body.querySelector(`.${ue.container}`),ub=e=>{const t=Eo();return t?t.querySelector(e):null},is=e=>ub(`.${e}`),Or=()=>is(ue.popup),pg=()=>is(ue.icon),aye=()=>is(ue["icon-content"]),Cq=()=>is(ue.title),eL=()=>is(ue["html-container"]),xq=()=>is(ue.image),tL=()=>is(ue["progress-steps"]),CC=()=>is(ue["validation-message"]),sc=()=>ub(`.${ue.actions} .${ue.confirm}`),mg=()=>ub(`.${ue.actions} .${ue.cancel}`),Tf=()=>ub(`.${ue.actions} .${ue.deny}`),oye=()=>is(ue["input-label"]),gg=()=>ub(`.${ue.loader}`),db=()=>is(ue.actions),Rq=()=>is(ue.footer),xC=()=>is(ue["timer-progress-bar"]),rL=()=>is(ue.close),sye=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,nL=()=>{const e=Or();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),r=Array.from(t).sort((a,o)=>{const s=parseInt(a.getAttribute("tabindex")||"0"),l=parseInt(o.getAttribute("tabindex")||"0");return s>l?1:s<l?-1:0}),n=e.querySelectorAll(sye),i=Array.from(n).filter(a=>a.getAttribute("tabindex")!=="-1");return[...new Set(r.concat(i))].filter(a=>po(a))},iL=()=>Yc(document.body,ue.shown)&&!Yc(document.body,ue["toast-shown"])&&!Yc(document.body,ue["no-backdrop"]),RC=()=>{const e=Or();return e?Yc(e,ue.toast):!1},lye=()=>{const e=Or();return e?e.hasAttribute("data-loading"):!1},as=(e,t)=>{if(e.textContent="",t){const n=new DOMParser().parseFromString(t,"text/html"),i=n.querySelector("head");i&&Array.from(i.childNodes).forEach(o=>{e.appendChild(o)});const a=n.querySelector("body");a&&Array.from(a.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?e.appendChild(o.cloneNode(!0)):e.appendChild(o)})}},Yc=(e,t)=>{if(!t)return!1;const r=t.split(/\s+/);for(let n=0;n<r.length;n++)if(!e.classList.contains(r[n]))return!1;return!0},cye=(e,t)=>{Array.from(e.classList).forEach(r=>{!Object.values(ue).includes(r)&&!Object.values(wS).includes(r)&&!Object.values(t.showClass||{}).includes(r)&&e.classList.remove(r)})},Jo=(e,t,r)=>{if(cye(e,t),!t.customClass)return;const n=t.customClass[r];if(n){if(typeof n!="string"&&!n.forEach){wo(`Invalid type of customClass.${r}! Expected string or iterable object, got "${typeof n}"`);return}vr(e,n)}},IC=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${ue.popup} > .${ue[t]}`);case"checkbox":return e.querySelector(`.${ue.popup} > .${ue.checkbox} input`);case"radio":return e.querySelector(`.${ue.popup} > .${ue.radio} input:checked`)||e.querySelector(`.${ue.popup} > .${ue.radio} input:first-child`);case"range":return e.querySelector(`.${ue.popup} > .${ue.range} input`);default:return e.querySelector(`.${ue.popup} > .${ue.input}`)}},Iq=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},Nq=(e,t,r)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(n=>{Array.isArray(e)?e.forEach(i=>{r?i.classList.add(n):i.classList.remove(n)}):r?e.classList.add(n):e.classList.remove(n)}))},vr=(e,t)=>{Nq(e,t,!0)},Vs=(e,t)=>{Nq(e,t,!1)},Xu=(e,t)=>{const r=Array.from(e.children);for(let n=0;n<r.length;n++){const i=r[n];if(i instanceof HTMLElement&&Yc(i,t))return i}},Uh=(e,t,r)=>{r===`${parseInt(r)}`&&(r=parseInt(r)),r||parseInt(r)===0?e.style.setProperty(t,typeof r=="number"?`${r}px`:r):e.style.removeProperty(t)},ta=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";e&&(e.style.display=t)},Aa=e=>{e&&(e.style.display="none")},aL=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";e&&new MutationObserver(()=>{hb(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},V4=(e,t,r,n)=>{const i=e.querySelector(t);i&&i.style.setProperty(r,n)},hb=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";t?ta(e,r):Aa(e)},po=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),uye=()=>!po(sc())&&!po(Tf())&&!po(mg()),B4=e=>e.scrollHeight>e.clientHeight,Aq=e=>{const t=window.getComputedStyle(e),r=parseFloat(t.getPropertyValue("animation-duration")||"0"),n=parseFloat(t.getPropertyValue("transition-duration")||"0");return r>0||n>0},oL=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=xC();r&&po(r)&&(t&&(r.style.transition="none",r.style.width="100%"),setTimeout(()=>{r.style.transition=`width ${e/1e3}s linear`,r.style.width="0%"},10))},dye=()=>{const e=xC();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const r=parseInt(window.getComputedStyle(e).width),n=t/r*100;e.style.width=`${n}%`},hye=()=>typeof window>"u"||typeof document>"u",fye=`
 <div aria-labelledby="${ue.title}" aria-describedby="${ue["html-container"]}" class="${ue.popup}" tabindex="-1">
   <button type="button" class="${ue.close}"></button>
   <ul class="${ue["progress-steps"]}"></ul>
   <div class="${ue.icon}"></div>
   <img class="${ue.image}" />
   <h2 class="${ue.title}" id="${ue.title}"></h2>
   <div class="${ue["html-container"]}" id="${ue["html-container"]}"></div>
   <input class="${ue.input}" id="${ue.input}" />
   <input type="file" class="${ue.file}" />
   <div class="${ue.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${ue.select}" id="${ue.select}"></select>
   <div class="${ue.radio}"></div>
   <label class="${ue.checkbox}">
     <input type="checkbox" id="${ue.checkbox}" />
     <span class="${ue.label}"></span>
   </label>
   <textarea class="${ue.textarea}" id="${ue.textarea}"></textarea>
   <div class="${ue["validation-message"]}" id="${ue["validation-message"]}"></div>
   <div class="${ue.actions}">
     <div class="${ue.loader}"></div>
     <button type="button" class="${ue.confirm}"></button>
     <button type="button" class="${ue.deny}"></button>
     <button type="button" class="${ue.cancel}"></button>
   </div>
   <div class="${ue.footer}"></div>
   <div class="${ue["timer-progress-bar-container"]}">
     <div class="${ue["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),pye=()=>{const e=Eo();return e?(e.remove(),Vs([document.documentElement,document.body],[ue["no-backdrop"],ue["toast-shown"],ue["has-column"]]),!0):!1},Jd=()=>{St.currentInstance.resetValidationMessage()},mye=()=>{const e=Or(),t=Xu(e,ue.input),r=Xu(e,ue.file),n=e.querySelector(`.${ue.range} input`),i=e.querySelector(`.${ue.range} output`),a=Xu(e,ue.select),o=e.querySelector(`.${ue.checkbox} input`),s=Xu(e,ue.textarea);t.oninput=Jd,r.onchange=Jd,a.onchange=Jd,o.onchange=Jd,s.oninput=Jd,n.oninput=()=>{Jd(),i.value=n.value},n.onchange=()=>{Jd(),i.value=n.value}},gye=e=>typeof e=="string"?document.querySelector(e):e,yye=e=>{const t=Or();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},vye=e=>{window.getComputedStyle(e).direction==="rtl"&&vr(Eo(),ue.rtl)},bye=e=>{const t=pye();if(hye()){Sf("SweetAlert2 requires document to initialize");return}const r=document.createElement("div");r.className=ue.container,t&&vr(r,ue["no-transition"]),as(r,fye);const n=gye(e.target);n.appendChild(r),yye(e),vye(n),mye()},sL=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?wye(e,t):e&&as(t,e)},wye=(e,t)=>{e.jquery?Eye(t,e):as(t,e.toString())},Eye=(e,t)=>{if(e.textContent="",0 in t)for(let r=0;r in t;r++)e.appendChild(t[r].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},_ye=(e,t)=>{const r=db(),n=gg();!r||!n||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?Aa(r):ta(r),Jo(r,t,"actions"),Sye(r,n,t),as(n,t.loaderHtml||""),Jo(n,t,"loader"))};function Sye(e,t,r){const n=sc(),i=Tf(),a=mg();!n||!i||!a||(ZR(n,"confirm",r),ZR(i,"deny",r),ZR(a,"cancel",r),Tye(n,i,a,r),r.reverseButtons&&(r.toast?(e.insertBefore(a,n),e.insertBefore(i,n)):(e.insertBefore(a,t),e.insertBefore(i,t),e.insertBefore(n,t))))}function Tye(e,t,r,n){if(!n.buttonsStyling){Vs([e,t,r],ue.styled);return}vr([e,t,r],ue.styled),n.confirmButtonColor&&(e.style.backgroundColor=n.confirmButtonColor,vr(e,ue["default-outline"])),n.denyButtonColor&&(t.style.backgroundColor=n.denyButtonColor,vr(t,ue["default-outline"])),n.cancelButtonColor&&(r.style.backgroundColor=n.cancelButtonColor,vr(r,ue["default-outline"]))}function ZR(e,t,r){const n=J2(t);hb(e,r[`show${n}Button`],"inline-block"),as(e,r[`${t}ButtonText`]||""),e.setAttribute("aria-label",r[`${t}ButtonAriaLabel`]||""),e.className=ue[t],Jo(e,r,`${t}Button`)}const Cye=(e,t)=>{const r=rL();r&&(as(r,t.closeButtonHtml||""),Jo(r,t,"closeButton"),hb(r,t.showCloseButton),r.setAttribute("aria-label",t.closeButtonAriaLabel||""))},xye=(e,t)=>{const r=Eo();r&&(Rye(r,t.backdrop),Iye(r,t.position),Nye(r,t.grow),Jo(r,t,"container"))};function Rye(e,t){typeof t=="string"?e.style.background=t:t||vr([document.documentElement,document.body],ue["no-backdrop"])}function Iye(e,t){t&&(t in ue?vr(e,ue[t]):(wo('The "position" parameter is not valid, defaulting to "center"'),vr(e,ue.center)))}function Nye(e,t){t&&vr(e,ue[`grow-${t}`])}var gn={innerParams:new WeakMap,domCache:new WeakMap};const Aye=["input","file","range","select","radio","checkbox","textarea"],Oye=(e,t)=>{const r=Or();if(!r)return;const n=gn.innerParams.get(e),i=!n||t.input!==n.input;Aye.forEach(a=>{const o=Xu(r,ue[a]);o&&(Dye(a,t.inputAttributes),o.className=ue[a],i&&Aa(o))}),t.input&&(i&&kye(t),Lye(t))},kye=e=>{if(!e.input)return;if(!di[e.input]){Sf(`Unexpected type of input! Expected ${Object.keys(di).join(" | ")}, got "${e.input}"`);return}const t=Oq(e.input);if(!t)return;const r=di[e.input](t,e);ta(t),e.inputAutoFocus&&setTimeout(()=>{Iq(r)})},Pye=e=>{for(let t=0;t<e.attributes.length;t++){const r=e.attributes[t].name;["id","type","value","style"].includes(r)||e.removeAttribute(r)}},Dye=(e,t)=>{const r=Or();if(!r)return;const n=IC(r,e);if(n){Pye(n);for(const i in t)n.setAttribute(i,t[i])}},Lye=e=>{if(!e.input)return;const t=Oq(e.input);t&&Jo(t,e,"input")},lL=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},fb=(e,t,r)=>{if(r.inputLabel){const n=document.createElement("label"),i=ue["input-label"];n.setAttribute("for",e.id),n.className=i,typeof r.customClass=="object"&&vr(n,r.customClass.inputLabel),n.innerText=r.inputLabel,t.insertAdjacentElement("beforebegin",n)}},Oq=e=>{const t=Or();if(t)return Xu(t,ue[e]||ue.input)},ES=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:Z2(t)||wo(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},di={};di.text=di.email=di.password=di.number=di.tel=di.url=di.search=di.date=di["datetime-local"]=di.time=di.week=di.month=(e,t)=>(ES(e,t.inputValue),fb(e,e,t),lL(e,t),e.type=t.input,e);di.file=(e,t)=>(fb(e,e,t),lL(e,t),e);di.range=(e,t)=>{const r=e.querySelector("input"),n=e.querySelector("output");return ES(r,t.inputValue),r.type=t.input,ES(n,t.inputValue),fb(r,e,t),e};di.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const r=document.createElement("option");as(r,t.inputPlaceholder),r.value="",r.disabled=!0,r.selected=!0,e.appendChild(r)}return fb(e,e,t),e};di.radio=e=>(e.textContent="",e);di.checkbox=(e,t)=>{const r=IC(Or(),"checkbox");r.value="1",r.checked=!!t.inputValue;const n=e.querySelector("span");return as(n,t.inputPlaceholder||t.inputLabel),r};di.textarea=(e,t)=>{ES(e,t.inputValue),lL(e,t),fb(e,e,t);const r=n=>parseInt(window.getComputedStyle(n).marginLeft)+parseInt(window.getComputedStyle(n).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(Or()).width),i=()=>{if(!document.body.contains(e))return;const a=e.offsetWidth+r(e);a>n?Or().style.width=`${a}px`:Uh(Or(),"width",t.width)};new MutationObserver(i).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const jye=(e,t)=>{const r=eL();r&&(aL(r),Jo(r,t,"htmlContainer"),t.html?(sL(t.html,r),ta(r,"block")):t.text?(r.textContent=t.text,ta(r,"block")):Aa(r),Oye(e,t))},Mye=(e,t)=>{const r=Rq();r&&(aL(r),hb(r,t.footer,"block"),t.footer&&sL(t.footer,r),Jo(r,t,"footer"))},Uye=(e,t)=>{const r=gn.innerParams.get(e),n=pg();if(n){if(r&&t.icon===r.icon){H4(n,t),$4(n,t);return}if(!t.icon&&!t.iconHtml){Aa(n);return}if(t.icon&&Object.keys(wS).indexOf(t.icon)===-1){Sf(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),Aa(n);return}ta(n),H4(n,t),$4(n,t),vr(n,t.showClass&&t.showClass.icon)}},$4=(e,t)=>{for(const[r,n]of Object.entries(wS))t.icon!==r&&Vs(e,n);vr(e,t.icon&&wS[t.icon]),$ye(e,t),Fye(),Jo(e,t,"icon")},Fye=()=>{const e=Or();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),r=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let n=0;n<r.length;n++)r[n].style.backgroundColor=t},Vye=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Bye=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,H4=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let r=e.innerHTML,n="";t.iconHtml?n=z4(t.iconHtml):t.icon==="success"?(n=Vye,r=r.replace(/ style=".*?"/g,"")):t.icon==="error"?n=Bye:t.icon&&(n=z4({question:"?",warning:"!",info:"i"}[t.icon])),r.trim()!==n.trim()&&as(e,n)},$ye=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const r of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])V4(e,r,"background-color",t.iconColor);V4(e,".swal2-success-ring","border-color",t.iconColor)}},z4=e=>`<div class="${ue["icon-content"]}">${e}</div>`,Hye=(e,t)=>{const r=xq();if(r){if(!t.imageUrl){Aa(r);return}ta(r,""),r.setAttribute("src",t.imageUrl),r.setAttribute("alt",t.imageAlt||""),Uh(r,"width",t.imageWidth),Uh(r,"height",t.imageHeight),r.className=ue.image,Jo(r,t,"image")}};let cL=!1,kq=0,Pq=0,Dq=0,Lq=0;const zye=e=>{e.addEventListener("mousedown",_S),document.body.addEventListener("mousemove",SS),e.addEventListener("mouseup",TS),e.addEventListener("touchstart",_S),document.body.addEventListener("touchmove",SS),e.addEventListener("touchend",TS)},Gye=e=>{e.removeEventListener("mousedown",_S),document.body.removeEventListener("mousemove",SS),e.removeEventListener("mouseup",TS),e.removeEventListener("touchstart",_S),document.body.removeEventListener("touchmove",SS),e.removeEventListener("touchend",TS)},_S=e=>{const t=Or();if(e.target===t||pg().contains(e.target)){cL=!0;const r=jq(e);kq=r.clientX,Pq=r.clientY,Dq=parseInt(t.style.insetInlineStart)||0,Lq=parseInt(t.style.insetBlockStart)||0,vr(t,"swal2-dragging")}},SS=e=>{const t=Or();if(cL){let{clientX:r,clientY:n}=jq(e);t.style.insetInlineStart=`${Dq+(r-kq)}px`,t.style.insetBlockStart=`${Lq+(n-Pq)}px`}},TS=()=>{const e=Or();cL=!1,Vs(e,"swal2-dragging")},jq=e=>{let t=0,r=0;return e.type.startsWith("mouse")?(t=e.clientX,r=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,r=e.touches[0].clientY),{clientX:t,clientY:r}},Wye=(e,t)=>{const r=Eo(),n=Or();if(!(!r||!n)){if(t.toast){Uh(r,"width",t.width),n.style.width="100%";const i=gg();i&&n.insertBefore(i,pg())}else Uh(n,"width",t.width);Uh(n,"padding",t.padding),t.color&&(n.style.color=t.color),t.background&&(n.style.background=t.background),Aa(CC()),Kye(n,t),t.draggable&&!t.toast?(vr(n,ue.draggable),zye(n)):(Vs(n,ue.draggable),Gye(n))}},Kye=(e,t)=>{const r=t.showClass||{};e.className=`${ue.popup} ${po(e)?r.popup:""}`,t.toast?(vr([document.documentElement,document.body],ue["toast-shown"]),vr(e,ue.toast)):vr(e,ue.modal),Jo(e,t,"popup"),typeof t.customClass=="string"&&vr(e,t.customClass),t.icon&&vr(e,ue[`icon-${t.icon}`])},qye=(e,t)=>{const r=tL();if(!r)return;const{progressSteps:n,currentProgressStep:i}=t;if(!n||n.length===0||i===void 0){Aa(r);return}ta(r),r.textContent="",i>=n.length&&wo("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),n.forEach((a,o)=>{const s=Yye(a);if(r.appendChild(s),o===i&&vr(s,ue["active-progress-step"]),o!==n.length-1){const l=Xye(t);r.appendChild(l)}})},Yye=e=>{const t=document.createElement("li");return vr(t,ue["progress-step"]),as(t,e),t},Xye=e=>{const t=document.createElement("li");return vr(t,ue["progress-step-line"]),e.progressStepsDistance&&Uh(t,"width",e.progressStepsDistance),t},Jye=(e,t)=>{const r=Cq();r&&(aL(r),hb(r,t.title||t.titleText,"block"),t.title&&sL(t.title,r),t.titleText&&(r.innerText=t.titleText),Jo(r,t,"title"))},Mq=(e,t)=>{Wye(e,t),xye(e,t),qye(e,t),Uye(e,t),Hye(e,t),Jye(e,t),Cye(e,t),jye(e,t),_ye(e,t),Mye(e,t);const r=Or();typeof t.didRender=="function"&&r&&t.didRender(r),St.eventEmitter.emit("didRender",r)},Qye=()=>po(Or()),Uq=()=>{var e;return(e=sc())===null||e===void 0?void 0:e.click()},Zye=()=>{var e;return(e=Tf())===null||e===void 0?void 0:e.click()},e0e=()=>{var e;return(e=mg())===null||e===void 0?void 0:e.click()},yg=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Fq=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},t0e=(e,t,r)=>{Fq(e),t.toast||(e.keydownHandler=n=>n0e(t,n,r),e.keydownTarget=t.keydownListenerCapture?window:Or(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},Ik=(e,t)=>{var r;const n=nL();if(n.length){e=e+t,e===n.length?e=0:e===-1&&(e=n.length-1),n[e].focus();return}(r=Or())===null||r===void 0||r.focus()},Vq=["ArrowRight","ArrowDown"],r0e=["ArrowLeft","ArrowUp"],n0e=(e,t,r)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?i0e(t,e):t.key==="Tab"?a0e(t):[...Vq,...r0e].includes(t.key)?o0e(t.key):t.key==="Escape"&&s0e(t,e,r)))},i0e=(e,t)=>{if(!TC(t.allowEnterKey))return;const r=IC(Or(),t.input);if(e.target&&r&&e.target instanceof HTMLElement&&e.target.outerHTML===r.outerHTML){if(["textarea","file"].includes(t.input))return;Uq(),e.preventDefault()}},a0e=e=>{const t=e.target,r=nL();let n=-1;for(let i=0;i<r.length;i++)if(t===r[i]){n=i;break}e.shiftKey?Ik(n,-1):Ik(n,1),e.stopPropagation(),e.preventDefault()},o0e=e=>{const t=db(),r=sc(),n=Tf(),i=mg();if(!t||!r||!n||!i)return;const a=[r,n,i];if(document.activeElement instanceof HTMLElement&&!a.includes(document.activeElement))return;const o=Vq.includes(e)?"nextElementSibling":"previousElementSibling";let s=document.activeElement;if(s){for(let l=0;l<t.children.length;l++){if(s=s[o],!s)return;if(s instanceof HTMLButtonElement&&po(s))break}s instanceof HTMLButtonElement&&s.focus()}},s0e=(e,t,r)=>{TC(t.allowEscapeKey)&&(e.preventDefault(),r(yg.esc))};var Pm={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const l0e=()=>{const e=Eo();Array.from(document.body.children).forEach(r=>{r.contains(e)||(r.hasAttribute("aria-hidden")&&r.setAttribute("data-previous-aria-hidden",r.getAttribute("aria-hidden")||""),r.setAttribute("aria-hidden","true"))})},Bq=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},$q=typeof window<"u"&&!!window.GestureEvent,c0e=()=>{if($q&&!Yc(document.body,ue.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,vr(document.body,ue.iosfix),u0e()}},u0e=()=>{const e=Eo();if(!e)return;let t;e.ontouchstart=r=>{t=d0e(r)},e.ontouchmove=r=>{t&&(r.preventDefault(),r.stopPropagation())}},d0e=e=>{const t=e.target,r=Eo(),n=eL();return!r||!n||h0e(e)||f0e(e)?!1:t===r||!B4(r)&&t instanceof HTMLElement&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(B4(n)&&n.contains(t))},h0e=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",f0e=e=>e.touches&&e.touches.length>1,p0e=()=>{if(Yc(document.body,ue.iosfix)){const e=parseInt(document.body.style.top,10);Vs(document.body,ue.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},m0e=()=>{const e=document.createElement("div");e.className=ue["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let om=null;const g0e=e=>{om===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(om=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${om+m0e()}px`)},y0e=()=>{om!==null&&(document.body.style.paddingRight=`${om}px`,om=null)};function Hq(e,t,r,n){RC()?G4(e,n):(tye(r).then(()=>G4(e,n)),Fq(St)),$q?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),iL()&&(y0e(),p0e(),Bq()),v0e()}function v0e(){Vs([document.documentElement,document.body],[ue.shown,ue["height-auto"],ue["no-backdrop"],ue["toast-shown"]])}function Ju(e){e=w0e(e);const t=Pm.swalPromiseResolve.get(this),r=b0e(this);this.isAwaitingPromise?e.isDismissed||(pb(this),t(e)):r&&t(e)}const b0e=e=>{const t=Or();if(!t)return!1;const r=gn.innerParams.get(e);if(!r||Yc(t,r.hideClass.popup))return!1;Vs(t,r.showClass.popup),vr(t,r.hideClass.popup);const n=Eo();return Vs(n,r.showClass.backdrop),vr(n,r.hideClass.backdrop),E0e(e,t,r),!0};function zq(e){const t=Pm.swalPromiseReject.get(this);pb(this),t&&t(e)}const pb=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,gn.innerParams.get(e)||e._destroy())},w0e=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),E0e=(e,t,r)=>{var n;const i=Eo(),a=Aq(t);typeof r.willClose=="function"&&r.willClose(t),(n=St.eventEmitter)===null||n===void 0||n.emit("willClose",t),a?_0e(e,t,i,r.returnFocus,r.didClose):Hq(e,i,r.returnFocus,r.didClose)},_0e=(e,t,r,n,i)=>{St.swalCloseEventFinishedCallback=Hq.bind(null,e,r,n,i);const a=function(o){if(o.target===t){var s;(s=St.swalCloseEventFinishedCallback)===null||s===void 0||s.call(St),delete St.swalCloseEventFinishedCallback,t.removeEventListener("animationend",a),t.removeEventListener("transitionend",a)}};t.addEventListener("animationend",a),t.addEventListener("transitionend",a)},G4=(e,t)=>{setTimeout(()=>{var r;typeof t=="function"&&t.bind(e.params)(),(r=St.eventEmitter)===null||r===void 0||r.emit("didClose"),e._destroy&&e._destroy()})},Dm=e=>{let t=Or();if(t||new Q,t=Or(),!t)return;const r=gg();RC()?Aa(pg()):S0e(t,e),ta(r),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},S0e=(e,t)=>{const r=db(),n=gg();!r||!n||(!t&&po(sc())&&(t=sc()),ta(r),t&&(Aa(t),n.setAttribute("data-button-to-replace",t.className),r.insertBefore(n,t)),vr([e,r],ue.loading))},T0e=(e,t)=>{t.input==="select"||t.input==="radio"?N0e(e,t):["text","email","number","tel","textarea"].some(r=>r===t.input)&&(Q2(t.inputValue)||Z2(t.inputValue))&&(Dm(sc()),A0e(e,t))},C0e=(e,t)=>{const r=e.getInput();if(!r)return null;switch(t.input){case"checkbox":return x0e(r);case"radio":return R0e(r);case"file":return I0e(r);default:return t.inputAutoTrim?r.value.trim():r.value}},x0e=e=>e.checked?1:0,R0e=e=>e.checked?e.value:null,I0e=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,N0e=(e,t)=>{const r=Or();if(!r)return;const n=i=>{t.input==="select"?O0e(r,CS(i),t):t.input==="radio"&&k0e(r,CS(i),t)};Q2(t.inputOptions)||Z2(t.inputOptions)?(Dm(sc()),cb(t.inputOptions).then(i=>{e.hideLoading(),n(i)})):typeof t.inputOptions=="object"?n(t.inputOptions):Sf(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},A0e=(e,t)=>{const r=e.getInput();r&&(Aa(r),cb(t.inputValue).then(n=>{r.value=t.input==="number"?`${parseFloat(n)||0}`:`${n}`,ta(r),r.focus(),e.hideLoading()}).catch(n=>{Sf(`Error in inputValue promise: ${n}`),r.value="",ta(r),r.focus(),e.hideLoading()}))};function O0e(e,t,r){const n=Xu(e,ue.select);if(!n)return;const i=(a,o,s)=>{const l=document.createElement("option");l.value=s,as(l,o),l.selected=Gq(s,r.inputValue),a.appendChild(l)};t.forEach(a=>{const o=a[0],s=a[1];if(Array.isArray(s)){const l=document.createElement("optgroup");l.label=o,l.disabled=!1,n.appendChild(l),s.forEach(c=>i(l,c[1],c[0]))}else i(n,s,o)}),n.focus()}function k0e(e,t,r){const n=Xu(e,ue.radio);if(!n)return;t.forEach(a=>{const o=a[0],s=a[1],l=document.createElement("input"),c=document.createElement("label");l.type="radio",l.name=ue.radio,l.value=o,Gq(o,r.inputValue)&&(l.checked=!0);const u=document.createElement("span");as(u,s),u.className=ue.label,c.appendChild(l),c.appendChild(u),n.appendChild(c)});const i=n.querySelectorAll("input");i.length&&i[0].focus()}const CS=e=>{const t=[];return e instanceof Map?e.forEach((r,n)=>{let i=r;typeof i=="object"&&(i=CS(i)),t.push([n,i])}):Object.keys(e).forEach(r=>{let n=e[r];typeof n=="object"&&(n=CS(n)),t.push([r,n])}),t},Gq=(e,t)=>!!t&&t.toString()===e.toString(),P0e=e=>{const t=gn.innerParams.get(e);e.disableButtons(),t.input?Wq(e,"confirm"):dL(e,!0)},D0e=e=>{const t=gn.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?Wq(e,"deny"):uL(e,!1)},L0e=(e,t)=>{e.disableButtons(),t(yg.cancel)},Wq=(e,t)=>{const r=gn.innerParams.get(e);if(!r.input){Sf(`The "input" parameter is needed to be set when using returnInputValueOn${J2(t)}`);return}const n=e.getInput(),i=C0e(e,r);r.inputValidator?j0e(e,i,t):n&&!n.checkValidity()?(e.enableButtons(),e.showValidationMessage(r.validationMessage||n.validationMessage)):t==="deny"?uL(e,i):dL(e,i)},j0e=(e,t,r)=>{const n=gn.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>cb(n.inputValidator(t,n.validationMessage))).then(a=>{e.enableButtons(),e.enableInput(),a?e.showValidationMessage(a):r==="deny"?uL(e,t):dL(e,t)})},uL=(e,t)=>{const r=gn.innerParams.get(e||void 0);r.showLoaderOnDeny&&Dm(Tf()),r.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>cb(r.preDeny(t,r.validationMessage))).then(i=>{i===!1?(e.hideLoading(),pb(e)):e.close({isDenied:!0,value:typeof i>"u"?t:i})}).catch(i=>Kq(e||void 0,i))):e.close({isDenied:!0,value:t})},W4=(e,t)=>{e.close({isConfirmed:!0,value:t})},Kq=(e,t)=>{e.rejectPromise(t)},dL=(e,t)=>{const r=gn.innerParams.get(e||void 0);r.showLoaderOnConfirm&&Dm(),r.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>cb(r.preConfirm(t,r.validationMessage))).then(i=>{po(CC())||i===!1?(e.hideLoading(),pb(e)):W4(e,typeof i>"u"?t:i)}).catch(i=>Kq(e||void 0,i))):W4(e,t)};function xS(){const e=gn.innerParams.get(this);if(!e)return;const t=gn.domCache.get(this);Aa(t.loader),RC()?e.icon&&ta(pg()):M0e(t),Vs([t.popup,t.actions],ue.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const M0e=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?ta(t[0],"inline-block"):uye()&&Aa(e.actions)};function qq(){const e=gn.innerParams.get(this),t=gn.domCache.get(this);return t?IC(t.popup,e.input):null}function Yq(e,t,r){const n=gn.domCache.get(e);t.forEach(i=>{n[i].disabled=r})}function Xq(e,t){const r=Or();if(!(!r||!e))if(e.type==="radio"){const n=r.querySelectorAll(`[name="${ue.radio}"]`);for(let i=0;i<n.length;i++)n[i].disabled=t}else e.disabled=t}function Jq(){Yq(this,["confirmButton","denyButton","cancelButton"],!1)}function Qq(){Yq(this,["confirmButton","denyButton","cancelButton"],!0)}function Zq(){Xq(this.getInput(),!1)}function eY(){Xq(this.getInput(),!0)}function tY(e){const t=gn.domCache.get(this),r=gn.innerParams.get(this);as(t.validationMessage,e),t.validationMessage.className=ue["validation-message"],r.customClass&&r.customClass.validationMessage&&vr(t.validationMessage,r.customClass.validationMessage),ta(t.validationMessage);const n=this.getInput();n&&(n.setAttribute("aria-invalid","true"),n.setAttribute("aria-describedby",ue["validation-message"]),Iq(n),vr(n,ue.inputerror))}function rY(){const e=gn.domCache.get(this);e.validationMessage&&Aa(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Vs(t,ue.inputerror))}const sm={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},U0e=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],F0e={allowEnterKey:void 0},V0e=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],nY=e=>Object.prototype.hasOwnProperty.call(sm,e),iY=e=>U0e.indexOf(e)!==-1,aY=e=>F0e[e],B0e=e=>{nY(e)||wo(`Unknown parameter "${e}"`)},$0e=e=>{V0e.includes(e)&&wo(`The parameter "${e}" is incompatible with toasts`)},H0e=e=>{const t=aY(e);t&&Tq(e,t)},z0e=e=>{e.backdrop===!1&&e.allowOutsideClick&&wo('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)B0e(t),e.toast&&$0e(t),H0e(t)};function oY(e){const t=Or(),r=gn.innerParams.get(this);if(!t||Yc(t,r.hideClass.popup)){wo("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const n=G0e(e),i=Object.assign({},r,n);Mq(this,i),gn.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const G0e=e=>{const t={};return Object.keys(e).forEach(r=>{iY(r)?t[r]=e[r]:wo(`Invalid parameter to update: ${r}`)}),t};function sY(){const e=gn.domCache.get(this),t=gn.innerParams.get(this);if(!t){lY(this);return}e.popup&&St.swalCloseEventFinishedCallback&&(St.swalCloseEventFinishedCallback(),delete St.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),St.eventEmitter.emit("didDestroy"),W0e(this)}const W0e=e=>{lY(e),delete e.params,delete St.keydownHandler,delete St.keydownTarget,delete St.currentInstance},lY=e=>{e.isAwaitingPromise?(eI(gn,e),e.isAwaitingPromise=!0):(eI(Pm,e),eI(gn,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},eI=(e,t)=>{for(const r in e)e[r].delete(t)};var K0e=Object.freeze({__proto__:null,_destroy:sY,close:Ju,closeModal:Ju,closePopup:Ju,closeToast:Ju,disableButtons:Qq,disableInput:eY,disableLoading:xS,enableButtons:Jq,enableInput:Zq,getInput:qq,handleAwaitingPromise:pb,hideLoading:xS,rejectPromise:zq,resetValidationMessage:rY,showValidationMessage:tY,update:oY});const q0e=(e,t,r)=>{e.toast?Y0e(e,t,r):(J0e(t),Q0e(t),Z0e(e,t,r))},Y0e=(e,t,r)=>{t.popup.onclick=()=>{e&&(X0e(e)||e.timer||e.input)||r(yg.close)}},X0e=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let RS=!1;const J0e=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(RS=!0)}}},Q0e=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(r){e.popup.onmouseup=()=>{},(r.target===e.popup||r.target instanceof HTMLElement&&e.popup.contains(r.target))&&(RS=!0)}}},Z0e=(e,t,r)=>{t.container.onclick=n=>{if(RS){RS=!1;return}n.target===t.container&&TC(e.allowOutsideClick)&&r(yg.backdrop)}},eve=e=>typeof e=="object"&&e.jquery,K4=e=>e instanceof Element||eve(e),tve=e=>{const t={};return typeof e[0]=="object"&&!K4(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((r,n)=>{const i=e[n];typeof i=="string"||K4(i)?t[r]=i:i!==void 0&&Sf(`Unexpected type of ${r}! Expected "string" or "Element", got ${typeof i}`)}),t};function rve(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new this(...t)}function nve(e){class t extends this{_main(n,i){return super._main(n,Object.assign({},e,i))}}return t}const ive=()=>St.timeout&&St.timeout.getTimerLeft(),cY=()=>{if(St.timeout)return dye(),St.timeout.stop()},uY=()=>{if(St.timeout){const e=St.timeout.start();return oL(e),e}},ave=()=>{const e=St.timeout;return e&&(e.running?cY():uY())},ove=e=>{if(St.timeout){const t=St.timeout.increase(e);return oL(t,!0),t}},sve=()=>!!(St.timeout&&St.timeout.isRunning());let q4=!1;const Nk={};function lve(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Nk[e]=this,q4||(document.body.addEventListener("click",cve),q4=!0)}const cve=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const r in Nk){const n=t.getAttribute(r);if(n){Nk[r].fire({template:n});return}}};class uve{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,r){const n=this._getHandlersByEventName(t);n.includes(r)||n.push(r)}once(t,r){var n=this;const i=function(){n.removeListener(t,i);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];r.apply(n,o)};this.on(t,i)}emit(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this._getHandlersByEventName(t).forEach(a=>{try{a.apply(this,n)}catch(o){console.error(o)}})}removeListener(t,r){const n=this._getHandlersByEventName(t),i=n.indexOf(r);i>-1&&n.splice(i,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}St.eventEmitter=new uve;const dve=(e,t)=>{St.eventEmitter.on(e,t)},hve=(e,t)=>{St.eventEmitter.once(e,t)},fve=(e,t)=>{if(!e){St.eventEmitter.reset();return}t?St.eventEmitter.removeListener(e,t):St.eventEmitter.removeAllListeners(e)};var pve=Object.freeze({__proto__:null,argsToParams:tve,bindClickHandler:lve,clickCancel:e0e,clickConfirm:Uq,clickDeny:Zye,enableLoading:Dm,fire:rve,getActions:db,getCancelButton:mg,getCloseButton:rL,getConfirmButton:sc,getContainer:Eo,getDenyButton:Tf,getFocusableElements:nL,getFooter:Rq,getHtmlContainer:eL,getIcon:pg,getIconContent:aye,getImage:xq,getInputLabel:oye,getLoader:gg,getPopup:Or,getProgressSteps:tL,getTimerLeft:ive,getTimerProgressBar:xC,getTitle:Cq,getValidationMessage:CC,increaseTimer:ove,isDeprecatedParameter:aY,isLoading:lye,isTimerRunning:sve,isUpdatableParameter:iY,isValidParameter:nY,isVisible:Qye,mixin:nve,off:fve,on:dve,once:hve,resumeTimer:uY,showLoading:Dm,stopTimer:cY,toggleTimer:ave});class mve{constructor(t,r){this.callback=t,this.remaining=r,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const r=this.running;return r&&this.stop(),this.remaining+=t,r&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const dY=["swal-title","swal-html","swal-footer"],gve=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const r=t.content;return Tve(r),Object.assign(yve(r),vve(r),bve(r),wve(r),Eve(r),_ve(r),Sve(r,dY))},yve=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(n=>{ef(n,["name","value"]);const i=n.getAttribute("name"),a=n.getAttribute("value");!i||!a||(typeof sm[i]=="boolean"?t[i]=a!=="false":typeof sm[i]=="object"?t[i]=JSON.parse(a):t[i]=a)}),t},vve=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(n=>{const i=n.getAttribute("name"),a=n.getAttribute("value");!i||!a||(t[i]=new Function(`return ${a}`)())}),t},bve=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(n=>{ef(n,["type","color","aria-label"]);const i=n.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(t[`${i}ButtonText`]=n.innerHTML,t[`show${J2(i)}Button`]=!0,n.hasAttribute("color")&&(t[`${i}ButtonColor`]=n.getAttribute("color")),n.hasAttribute("aria-label")&&(t[`${i}ButtonAriaLabel`]=n.getAttribute("aria-label")))}),t},wve=e=>{const t={},r=e.querySelector("swal-image");return r&&(ef(r,["src","width","height","alt"]),r.hasAttribute("src")&&(t.imageUrl=r.getAttribute("src")||void 0),r.hasAttribute("width")&&(t.imageWidth=r.getAttribute("width")||void 0),r.hasAttribute("height")&&(t.imageHeight=r.getAttribute("height")||void 0),r.hasAttribute("alt")&&(t.imageAlt=r.getAttribute("alt")||void 0)),t},Eve=e=>{const t={},r=e.querySelector("swal-icon");return r&&(ef(r,["type","color"]),r.hasAttribute("type")&&(t.icon=r.getAttribute("type")),r.hasAttribute("color")&&(t.iconColor=r.getAttribute("color")),t.iconHtml=r.innerHTML),t},_ve=e=>{const t={},r=e.querySelector("swal-input");r&&(ef(r,["type","label","placeholder","value"]),t.input=r.getAttribute("type")||"text",r.hasAttribute("label")&&(t.inputLabel=r.getAttribute("label")),r.hasAttribute("placeholder")&&(t.inputPlaceholder=r.getAttribute("placeholder")),r.hasAttribute("value")&&(t.inputValue=r.getAttribute("value")));const n=Array.from(e.querySelectorAll("swal-input-option"));return n.length&&(t.inputOptions={},n.forEach(i=>{ef(i,["value"]);const a=i.getAttribute("value");if(!a)return;const o=i.innerHTML;t.inputOptions[a]=o})),t},Sve=(e,t)=>{const r={};for(const n in t){const i=t[n],a=e.querySelector(i);a&&(ef(a,[]),r[i.replace(/^swal-/,"")]=a.innerHTML.trim())}return r},Tve=e=>{const t=dY.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(r=>{const n=r.tagName.toLowerCase();t.includes(n)||wo(`Unrecognized element <${n}>`)})},ef=(e,t)=>{Array.from(e.attributes).forEach(r=>{t.indexOf(r.name)===-1&&wo([`Unrecognized attribute "${r.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},hY=10,Cve=e=>{const t=Eo(),r=Or();typeof e.willOpen=="function"&&e.willOpen(r),St.eventEmitter.emit("willOpen",r);const i=window.getComputedStyle(document.body).overflowY;Ive(t,r,e),setTimeout(()=>{xve(t,r)},hY),iL()&&(Rve(t,e.scrollbarPadding,i),l0e()),!RC()&&!St.previousActiveElement&&(St.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(r)),St.eventEmitter.emit("didOpen",r),Vs(t,ue["no-transition"])},IS=e=>{const t=Or();if(e.target!==t)return;const r=Eo();t.removeEventListener("animationend",IS),t.removeEventListener("transitionend",IS),r.style.overflowY="auto"},xve=(e,t)=>{Aq(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",IS),t.addEventListener("transitionend",IS)):e.style.overflowY="auto"},Rve=(e,t,r)=>{c0e(),t&&r!=="hidden"&&g0e(r),setTimeout(()=>{e.scrollTop=0})},Ive=(e,t,r)=>{vr(e,r.showClass.backdrop),r.animation?(t.style.setProperty("opacity","0","important"),ta(t,"grid"),setTimeout(()=>{vr(t,r.showClass.popup),t.style.removeProperty("opacity")},hY)):ta(t,"grid"),vr([document.documentElement,document.body],ue.shown),r.heightAuto&&r.backdrop&&!r.toast&&vr([document.documentElement,document.body],ue["height-auto"])};var Y4={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function Nve(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=Y4.email),e.input==="url"&&(e.inputValidator=Y4.url))}function Ave(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(wo('Target parameter is not valid, defaulting to "body"'),e.target="body")}function Ove(e){Nve(e),e.showLoaderOnConfirm&&!e.preConfirm&&wo(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Ave(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),bye(e)}let Hl;var Rw=new WeakMap;class yi{constructor(){if(Jge(this,Rw,void 0),typeof window>"u")return;Hl=this;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const i=Object.freeze(this.constructor.argsToParams(r));this.params=i,this.isAwaitingPromise=!1,Qge(Rw,this,this._main(Hl.params))}_main(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(z0e(Object.assign({},r,t)),St.currentInstance){const a=Pm.swalPromiseResolve.get(St.currentInstance),{isAwaitingPromise:o}=St.currentInstance;St.currentInstance._destroy(),o||a({isDismissed:!0}),iL()&&Bq()}St.currentInstance=Hl;const n=Pve(t,r);Ove(n),Object.freeze(n),St.timeout&&(St.timeout.stop(),delete St.timeout),clearTimeout(St.restoreFocusTimeout);const i=Dve(Hl);return Mq(Hl,n),gn.innerParams.set(Hl,n),kve(Hl,i,n)}then(t){return U4(Rw,this).then(t)}finally(t){return U4(Rw,this).finally(t)}}const kve=(e,t,r)=>new Promise((n,i)=>{const a=o=>{e.close({isDismissed:!0,dismiss:o})};Pm.swalPromiseResolve.set(e,n),Pm.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{P0e(e)},t.denyButton.onclick=()=>{D0e(e)},t.cancelButton.onclick=()=>{L0e(e,a)},t.closeButton.onclick=()=>{a(yg.close)},q0e(r,t,a),t0e(St,r,a),T0e(e,r),Cve(r),Lve(St,r,a),jve(t,r),setTimeout(()=>{t.container.scrollTop=0})}),Pve=(e,t)=>{const r=gve(e),n=Object.assign({},sm,t,r,e);return n.showClass=Object.assign({},sm.showClass,n.showClass),n.hideClass=Object.assign({},sm.hideClass,n.hideClass),n.animation===!1&&(n.showClass={backdrop:"swal2-noanimation"},n.hideClass={}),n},Dve=e=>{const t={popup:Or(),container:Eo(),actions:db(),confirmButton:sc(),denyButton:Tf(),cancelButton:mg(),loader:gg(),closeButton:rL(),validationMessage:CC(),progressSteps:tL()};return gn.domCache.set(e,t),t},Lve=(e,t,r)=>{const n=xC();Aa(n),t.timer&&(e.timeout=new mve(()=>{r("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(ta(n),Jo(n,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&oL(t.timer)})))},jve=(e,t)=>{if(!t.toast){if(!TC(t.allowEnterKey)){Tq("allowEnterKey"),Fve();return}Mve(e)||Uve(e,t)||Ik(-1,1)}},Mve=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const r of t)if(r instanceof HTMLElement&&po(r))return r.focus(),!0;return!1},Uve=(e,t)=>t.focusDeny&&po(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&po(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&po(e.confirmButton)?(e.confirmButton.focus(),!0):!1,Fve=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const r=document.createElement("audio");r.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",r.loop=!0,document.body.appendChild(r),setTimeout(()=>{r.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}yi.prototype.disableButtons=Qq;yi.prototype.enableButtons=Jq;yi.prototype.getInput=qq;yi.prototype.disableInput=eY;yi.prototype.enableInput=Zq;yi.prototype.hideLoading=xS;yi.prototype.disableLoading=xS;yi.prototype.showValidationMessage=tY;yi.prototype.resetValidationMessage=rY;yi.prototype.close=Ju;yi.prototype.closePopup=Ju;yi.prototype.closeModal=Ju;yi.prototype.closeToast=Ju;yi.prototype.rejectPromise=zq;yi.prototype.update=oY;yi.prototype._destroy=sY;Object.assign(yi,pve);Object.keys(K0e).forEach(e=>{yi[e]=function(){return Hl&&Hl[e]?Hl[e](...arguments):null}});yi.DismissReason=yg;yi.version="11.15.2";const Q=yi;Q.default=Q;typeof document<"u"&&function(e,t){var r=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(r),r.styleSheet)r.styleSheet.disabled||(r.styleSheet.cssText=t);else try{r.innerHTML=t}catch{r.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');const Cf="https://hcompanion.onrender.com/api";async function Vve(e){try{const t=await ce.post(`${Cf}/user/login`,e);return await sessionStorage.setItem("token",t.data.jwtToken),t.data.userData}catch(t){return console.log(`error ${JSON.stringify(t)}`),t.response.status=="400"&&Q.fire({title:"Failed",icon:"error",text:"username or password is wrong"}),!1}}async function Bve(e){try{return(await ce.post(`${Cf}/user/createAccountGoogle`,e)).data.userData}catch(t){console.log(t)}}async function $ve(e){try{return(await ce.post(`${Cf}/user/loginUsingGoogle`,e)).data.userData}catch(t){console.log(t)}}async function Hve({email:e}){try{const t=await ce.post(`${Cf}/user/forgotPasswordOtp`,{email:e},{withCredentials:!0});return!0}catch(t){return console.log(t),!1}}async function zve({email:e,otp:t}){try{const r=await ce.post(`${Cf}/user/checkForgotPasswordOtp`,{email:e,otp:t},{withCredentials:!0});return console.log(r.data),!0}catch(r){return console.log(r),!1}}async function Gve({password:e,email:t}){try{const r=await ce.post(`${Cf}/user/forgotPassword/reset`,{email:t,password:e},{withCredentials:!0});return console.log(r.data),!0}catch(r){return console.log(r),!1}}async function Wve({email:e,password:t}){try{const r=await ce.post(`${Cf}/user/password/reset`,{password:t,email:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(r.data),!0}catch(r){return console.log(r),!1}}var fY={exports:{}},pY={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb=T;function Kve(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qve=typeof Object.is=="function"?Object.is:Kve,Yve=mb.useSyncExternalStore,Xve=mb.useRef,Jve=mb.useEffect,Qve=mb.useMemo,Zve=mb.useDebugValue;pY.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=Xve(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Qve(function(){function l(p){if(!c){if(c=!0,u=p,p=n(p),i!==void 0&&o.hasValue){var m=o.value;if(i(m,p))return h=m}return h=p}if(m=h,qve(u,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(u=p,m):(u=p,h=g)}var c=!1,u,h,f=r===void 0?null:r;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,r,n,i]);var s=Yve(e,a[0],a[1]);return Jve(function(){o.hasValue=!0,o.value=s},[s]),Zve(s),s};fY.exports=pY;var ebe=fY.exports;function tbe(e){e()}function rbe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){tbe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var X4={notify(){},get:()=>[]};function nbe(e,t){let r,n=X4,i=0,a=!1;function o(g){u();const y=n.subscribe(g);let v=!1;return()=>{v||(v=!0,y(),h())}}function s(){n.notify()}function l(){m.onStateChange&&m.onStateChange()}function c(){return a}function u(){i++,r||(r=e.subscribe(l),n=rbe())}function h(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=X4)}function f(){a||(a=!0,u())}function p(){a&&(a=!1,h())}const m={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>n};return m}var ibe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",abe=ibe(),obe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",sbe=obe(),lbe=()=>abe||sbe?T.useLayoutEffect:T.useEffect,cbe=lbe(),tI=Symbol.for("react-redux-context"),rI=typeof globalThis<"u"?globalThis:{};function ube(){if(!T.createContext)return{};const e=rI[tI]??(rI[tI]=new Map);let t=e.get(T.createContext);return t||(t=T.createContext(null),e.set(T.createContext,t)),t}var Cd=ube();function dbe(e){const{children:t,context:r,serverState:n,store:i}=e,a=T.useMemo(()=>{const l=nbe(i);return{store:i,subscription:l,getServerState:n?()=>n:void 0}},[i,n]),o=T.useMemo(()=>i.getState(),[i]);cbe(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,o]);const s=r||Cd;return T.createElement(s.Provider,{value:a},t)}var hbe=dbe;function hL(e=Cd){return function(){return T.useContext(e)}}var mY=hL();function gY(e=Cd){const t=e===Cd?mY:hL(e),r=()=>{const{store:n}=t();return n};return Object.assign(r,{withTypes:()=>r}),r}var fbe=gY();function pbe(e=Cd){const t=e===Cd?fbe:gY(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var fc=pbe(),mbe=(e,t)=>e===t;function gbe(e=Cd){const t=e===Cd?mY:hL(e),r=(n,i={})=>{const{equalityFn:a=mbe}=typeof i=="function"?{equalityFn:i}:i,o=t(),{store:s,subscription:l,getServerState:c}=o;T.useRef(!0);const u=T.useCallback({[n.name](f){return n(f)}}[n.name],[n]),h=ebe.useSyncExternalStoreWithSelector(l.addNestedSub,s.getState,c||s.getState,u,a);return T.useDebugValue(h),h};return Object.assign(r,{withTypes:()=>r}),r}var Yr=gbe();function aa(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ybe=typeof Symbol=="function"&&Symbol.observable||"@@observable",J4=ybe,nI=()=>Math.random().toString(36).substring(7).split("").join("."),vbe={INIT:`@@redux/INIT${nI()}`,REPLACE:`@@redux/REPLACE${nI()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${nI()}`},NS=vbe;function fL(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function yY(e,t,r){if(typeof e!="function")throw new Error(aa(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(aa(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(aa(1));return r(yY)(e,t)}let n=e,i=t,a=new Map,o=a,s=0,l=!1;function c(){o===a&&(o=new Map,a.forEach((y,v)=>{o.set(v,y)}))}function u(){if(l)throw new Error(aa(3));return i}function h(y){if(typeof y!="function")throw new Error(aa(4));if(l)throw new Error(aa(5));let v=!0;c();const b=s++;return o.set(b,y),function(){if(v){if(l)throw new Error(aa(6));v=!1,c(),o.delete(b),a=null}}}function f(y){if(!fL(y))throw new Error(aa(7));if(typeof y.type>"u")throw new Error(aa(8));if(typeof y.type!="string")throw new Error(aa(17));if(l)throw new Error(aa(9));try{l=!0,i=n(i,y)}finally{l=!1}return(a=o).forEach(b=>{b()}),y}function p(y){if(typeof y!="function")throw new Error(aa(10));n=y,f({type:NS.REPLACE})}function m(){const y=h;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(aa(11));function b(){const S=v;S.next&&S.next(u())}return b(),{unsubscribe:y(b)}},[J4](){return this}}}return f({type:NS.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:p,[J4]:m}}function bbe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:NS.INIT})>"u")throw new Error(aa(12));if(typeof r(void 0,{type:NS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(aa(13))})}function wbe(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const o=t[a];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let i;try{bbe(r)}catch(a){i=a}return function(o={},s){if(i)throw i;let l=!1;const c={};for(let u=0;u<n.length;u++){const h=n[u],f=r[h],p=o[h],m=f(p,s);if(typeof m>"u")throw s&&s.type,new Error(aa(14));c[h]=m,l=l||m!==p}return l=l||n.length!==Object.keys(o).length,l?c:o}}function AS(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Ebe(...e){return t=>(r,n)=>{const i=t(r,n);let a=()=>{throw new Error(aa(15))};const o={getState:i.getState,dispatch:(l,...c)=>a(l,...c)},s=e.map(l=>l(o));return a=AS(...s)(i.dispatch),{...i,dispatch:a}}}function _be(e){return fL(e)&&"type"in e&&typeof e.type=="string"}var vY=Symbol.for("immer-nothing"),Q4=Symbol.for("immer-draftable"),Qo=Symbol.for("immer-state");function fl(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Lm=Object.getPrototypeOf;function tf(e){return!!e&&!!e[Qo]}function nu(e){var t;return e?bY(e)||Array.isArray(e)||!!e[Q4]||!!((t=e.constructor)!=null&&t[Q4])||AC(e)||OC(e):!1}var Sbe=Object.prototype.constructor.toString();function bY(e){if(!e||typeof e!="object")return!1;const t=Lm(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Sbe}function OS(e,t){NC(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function NC(e){const t=e[Qo];return t?t.type_:Array.isArray(e)?1:AC(e)?2:OC(e)?3:0}function Ak(e,t){return NC(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function wY(e,t,r){const n=NC(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Tbe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function AC(e){return e instanceof Map}function OC(e){return e instanceof Set}function sh(e){return e.copy_||e.base_}function Ok(e,t){if(AC(e))return new Map(e);if(OC(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=bY(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Qo];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const o=i[a],s=n[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(Lm(e),n)}else{const n=Lm(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function pL(e,t=!1){return kC(e)||tf(e)||!nu(e)||(NC(e)>1&&(e.set=e.add=e.clear=e.delete=Cbe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>pL(n,!0))),e}function Cbe(){fl(2)}function kC(e){return Object.isFrozen(e)}var xbe={};function rf(e){const t=xbe[e];return t||fl(0,e),t}var dv;function EY(){return dv}function Rbe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Z4(e,t){t&&(rf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function kk(e){Pk(e),e.drafts_.forEach(Ibe),e.drafts_=null}function Pk(e){e===dv&&(dv=e.parent_)}function e3(e){return dv=Rbe(dv,e)}function Ibe(e){const t=e[Qo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function t3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Qo].modified_&&(kk(t),fl(4)),nu(e)&&(e=kS(t,e),t.parent_||PS(t,e)),t.patches_&&rf("Patches").generateReplacementPatches_(r[Qo].base_,e,t.patches_,t.inversePatches_)):e=kS(t,r,[]),kk(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==vY?e:void 0}function kS(e,t,r){if(kC(t))return t;const n=t[Qo];if(!n)return OS(t,(i,a)=>r3(e,n,t,i,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return PS(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let a=i,o=!1;n.type_===3&&(a=new Set(i),i.clear(),o=!0),OS(a,(s,l)=>r3(e,n,i,s,l,r,o)),PS(e,i,!1),r&&e.patches_&&rf("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function r3(e,t,r,n,i,a,o){if(tf(i)){const s=a&&t&&t.type_!==3&&!Ak(t.assigned_,n)?a.concat(n):void 0,l=kS(e,i,s);if(wY(r,n,l),tf(l))e.canAutoFreeze_=!1;else return}else o&&r.add(i);if(nu(i)&&!kC(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;kS(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&PS(e,i)}}function PS(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&pL(t,r)}function Nbe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:EY(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=mL;r&&(i=[n],a=hv);const{revoke:o,proxy:s}=Proxy.revocable(i,a);return n.draft_=s,n.revoke_=o,s}var mL={get(e,t){if(t===Qo)return e;const r=sh(e);if(!Ak(r,t))return Abe(e,r,t);const n=r[t];return e.finalized_||!nu(n)?n:n===iI(e.base_,t)?(aI(e),e.copy_[t]=Lk(n,e)):n},has(e,t){return t in sh(e)},ownKeys(e){return Reflect.ownKeys(sh(e))},set(e,t,r){const n=_Y(sh(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=iI(sh(e),t),a=i==null?void 0:i[Qo];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Tbe(r,i)&&(r!==void 0||Ak(e.base_,t)))return!0;aI(e),Dk(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return iI(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,aI(e),Dk(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=sh(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){fl(11)},getPrototypeOf(e){return Lm(e.base_)},setPrototypeOf(){fl(12)}},hv={};OS(mL,(e,t)=>{hv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});hv.deleteProperty=function(e,t){return hv.set.call(this,e,t,void 0)};hv.set=function(e,t,r){return mL.set.call(this,e[0],t,r,e[0])};function iI(e,t){const r=e[Qo];return(r?sh(r):e)[t]}function Abe(e,t,r){var i;const n=_Y(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function _Y(e,t){if(!(t in e))return;let r=Lm(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Lm(r)}}function Dk(e){e.modified_||(e.modified_=!0,e.parent_&&Dk(e.parent_))}function aI(e){e.copy_||(e.copy_=Ok(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Obe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const o=this;return function(l=a,...c){return o.produce(l,u=>r.call(this,u,...c))}}typeof r!="function"&&fl(6),n!==void 0&&typeof n!="function"&&fl(7);let i;if(nu(t)){const a=e3(this),o=Lk(t,void 0);let s=!0;try{i=r(o),s=!1}finally{s?kk(a):Pk(a)}return Z4(a,n),t3(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===vY&&(i=void 0),this.autoFreeze_&&pL(i,!0),n){const a=[],o=[];rf("Patches").generateReplacementPatches_(t,i,a,o),n(a,o)}return i}else fl(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,l=>t(l,...s));let n,i;return[this.produce(t,r,(o,s)=>{n=o,i=s}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){nu(e)||fl(8),tf(e)&&(e=kbe(e));const t=e3(this),r=Lk(e,void 0);return r[Qo].isManual_=!0,Pk(t),r}finishDraft(e,t){const r=e&&e[Qo];(!r||!r.isManual_)&&fl(9);const{scope_:n}=r;return Z4(n,t),t3(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=rf("Patches").applyPatches_;return tf(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Lk(e,t){const r=AC(e)?rf("MapSet").proxyMap_(e,t):OC(e)?rf("MapSet").proxySet_(e,t):Nbe(e,t);return(t?t.scope_:EY()).drafts_.push(r),r}function kbe(e){return tf(e)||fl(10,e),SY(e)}function SY(e){if(!nu(e)||kC(e))return e;const t=e[Qo];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ok(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Ok(e,!0);return OS(r,(n,i)=>{wY(r,n,SY(i))}),t&&(t.finalized_=!1),r}var Zo=new Obe,TY=Zo.produce;Zo.produceWithPatches.bind(Zo);Zo.setAutoFreeze.bind(Zo);Zo.setUseStrictShallowCopy.bind(Zo);Zo.applyPatches.bind(Zo);Zo.createDraft.bind(Zo);Zo.finishDraft.bind(Zo);function CY(e){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,e):i(a)}var Pbe=CY(),Dbe=CY,Lbe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?AS:AS.apply(null,arguments)};function n3(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(Xc(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>_be(n)&&n.type===e,r}var xY=class Vy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Vy.prototype)}static get[Symbol.species](){return Vy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Vy(...t[0].concat(this)):new Vy(...t.concat(this))}};function i3(e){return nu(e)?TY(e,()=>{}):e}function a3(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function jbe(e){return typeof e=="boolean"}var Mbe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let o=new xY;return r&&(jbe(r)?o.push(Pbe):o.push(Dbe(r.extraArgument))),o},Ube="RTK_autoBatch",o3=e=>t=>{setTimeout(t,e)},Fbe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,a=!1,o=!1;const s=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:o3(10):e.type==="callback"?e.queueNotification:o3(e.timeout),c=()=>{o=!1,a&&(a=!1,s.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>i&&u(),f=n.subscribe(h);return s.add(u),()=>{f(),s.delete(u)}},dispatch(u){var h;try{return i=!((h=u==null?void 0:u.meta)!=null&&h[Ube]),a=!i,a&&(o||(o=!0,l(c))),n.dispatch(u)}finally{i=!0}}})},Vbe=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new xY(e);return n&&i.push(Fbe(typeof n=="object"?n:void 0)),i};function Bbe(e){const t=Mbe(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{};let s;if(typeof r=="function")s=r;else if(fL(r))s=wbe(r);else throw new Error(Xc(1));let l;typeof n=="function"?l=n(t):l=t();let c=AS;i&&(c=Lbe({trace:!1,...typeof i=="object"&&i}));const u=Ebe(...l),h=Vbe(u);let f=typeof o=="function"?o(h):h();const p=c(...f);return yY(s,a,p)}function RY(e){const t={},r=[];let n;const i={addCase(a,o){const s=typeof a=="string"?a:a.type;if(!s)throw new Error(Xc(28));if(s in t)throw new Error(Xc(29));return t[s]=o,i},addMatcher(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase(a){return n=a,i}};return e(i),[t,r,n]}function $be(e){return typeof e=="function"}function Hbe(e,t){let[r,n,i]=RY(t),a;if($be(e))a=()=>i3(e());else{const s=i3(e);a=()=>s}function o(s=a(),l){let c=[r[l.type],...n.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,h)=>{if(h)if(tf(u)){const p=h(u,l);return p===void 0?u:p}else{if(nu(u))return TY(u,f=>h(f,l));{const f=h(u,l);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},s)}return o.getInitialState=a,o}var zbe=Symbol.for("rtk-slice-createasyncthunk");function Gbe(e,t){return`${e}/${t}`}function Wbe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[zbe];return function(i){const{name:a,reducerPath:o=a}=i;if(!a)throw new Error(Xc(11));typeof process<"u";const s=(typeof i.reducers=="function"?i.reducers(qbe()):i.reducers)||{},l=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(E,S){const I=typeof E=="string"?E:E.type;if(!I)throw new Error(Xc(12));if(I in c.sliceCaseReducersByType)throw new Error(Xc(13));return c.sliceCaseReducersByType[I]=S,u},addMatcher(E,S){return c.sliceMatchers.push({matcher:E,reducer:S}),u},exposeAction(E,S){return c.actionCreators[E]=S,u},exposeCaseReducer(E,S){return c.sliceCaseReducersByName[E]=S,u}};l.forEach(E=>{const S=s[E],I={reducerName:E,type:Gbe(a,E),createNotation:typeof i.reducers=="function"};Xbe(S)?Qbe(I,S,u,t):Ybe(I,S,u)});function h(){const[E={},S=[],I=void 0]=typeof i.extraReducers=="function"?RY(i.extraReducers):[i.extraReducers],N={...E,...c.sliceCaseReducersByType};return Hbe(i.initialState,L=>{for(let j in N)L.addCase(j,N[j]);for(let j of c.sliceMatchers)L.addMatcher(j.matcher,j.reducer);for(let j of S)L.addMatcher(j.matcher,j.reducer);I&&L.addDefaultCase(I)})}const f=E=>E,p=new Map;let m;function g(E,S){return m||(m=h()),m(E,S)}function y(){return m||(m=h()),m.getInitialState()}function v(E,S=!1){function I(L){let j=L[E];return typeof j>"u"&&S&&(j=y()),j}function N(L=f){const j=a3(p,S,()=>new WeakMap);return a3(j,L,()=>{const z={};for(const[A,V]of Object.entries(i.selectors??{}))z[A]=Kbe(V,L,y,S);return z})}return{reducerPath:E,getSelectors:N,get selectors(){return N(I)},selectSlice:I}}const b={name:a,reducer:g,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:y,...v(o),injectInto(E,{reducerPath:S,...I}={}){const N=S??o;return E.inject({reducerPath:N,reducer:g},I),{...b,...v(N,!0)}}};return b}}function Kbe(e,t,r,n){function i(a,...o){let s=t(a);return typeof s>"u"&&n&&(s=r()),e(s,...o)}return i.unwrapped=e,i}var vg=Wbe();function qbe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Ybe({type:e,reducerName:t,createNotation:r},n,i){let a,o;if("reducer"in n){if(r&&!Jbe(n))throw new Error(Xc(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?n3(e,o):n3(e))}function Xbe(e){return e._reducerDefinitionType==="asyncThunk"}function Jbe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Qbe({type:e,reducerName:t},r,n,i){if(!i)throw new Error(Xc(18));const{payloadCreator:a,fulfilled:o,pending:s,rejected:l,settled:c,options:u}=r,h=i(e,a,u);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),s&&n.addCase(h.pending,s),l&&n.addCase(h.rejected,l),c&&n.addMatcher(h.settled,c),n.exposeCaseReducer(t,{fulfilled:o||Iw,pending:s||Iw,rejected:l||Iw,settled:c||Iw})}function Iw(){}function Xc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Zbe={username:"",email:"",role:"",isLoggedIn:!1},IY=vg({name:"user",initialState:Zbe,reducers:{setUser(e,t){e.username=t.payload.username,e.email=t.payload.email,e.role=t.payload.role,e.isLoggedIn=t.payload.role}}}),{setUser:ai}=IY.actions,ewe=IY.reducer;var jk={exports:{}},nf={},NY={exports:{}},twe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rwe=twe,nwe=rwe;function AY(){}function OY(){}OY.resetWarningCache=AY;var iwe=function(){function e(n,i,a,o,s,l){if(l!==nwe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:OY,resetWarningCache:AY};return r.PropTypes=r,r};NY.exports=iwe();var kY=NY.exports,Mk={exports:{}},_l={},Uk={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var r="none",n="contents",i=/^(input|select|textarea|button|object|iframe)$/;function a(h,f){return f.getPropertyValue("overflow")!=="visible"||h.scrollWidth<=0&&h.scrollHeight<=0}function o(h){var f=h.offsetWidth<=0&&h.offsetHeight<=0;if(f&&!h.innerHTML)return!0;try{var p=window.getComputedStyle(h),m=p.getPropertyValue("display");return f?m!==n&&a(h,p):m===r}catch{return console.warn("Failed to inspect element style"),!1}}function s(h){for(var f=h,p=h.getRootNode&&h.getRootNode();f&&f!==document.body;){if(p&&f===p&&(f=p.host.parentNode),o(f))return!1;f=f.parentNode}return!0}function l(h,f){var p=h.nodeName.toLowerCase(),m=i.test(p)&&!h.disabled||p==="a"&&h.href||f;return m&&s(h)}function c(h){var f=h.getAttribute("tabindex");f===null&&(f=void 0);var p=isNaN(f);return(p||f>=0)&&l(h,!p)}function u(h){var f=[].slice.call(h.querySelectorAll("*"),0).reduce(function(p,m){return p.concat(m.shadowRoot?u(m.shadowRoot):[m])},[]);return f.filter(c)}e.exports=t.default})(Uk,Uk.exports);var PY=Uk.exports;Object.defineProperty(_l,"__esModule",{value:!0});_l.resetState=lwe;_l.log=cwe;_l.handleBlur=fv;_l.handleFocus=pv;_l.markForFocusLater=uwe;_l.returnFocus=dwe;_l.popWithoutFocus=hwe;_l.setupScopedFocus=fwe;_l.teardownScopedFocus=pwe;var awe=PY,owe=swe(awe);function swe(e){return e&&e.__esModule?e:{default:e}}var jm=[],Up=null,Fk=!1;function lwe(){jm=[]}function cwe(){}function fv(){Fk=!0}function pv(){if(Fk){if(Fk=!1,!Up)return;setTimeout(function(){if(!Up.contains(document.activeElement)){var e=(0,owe.default)(Up)[0]||Up;e.focus()}},0)}}function uwe(){jm.push(document.activeElement)}function dwe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=null;try{jm.length!==0&&(t=jm.pop(),t.focus({preventScroll:e}));return}catch{console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}}function hwe(){jm.length>0&&jm.pop()}function fwe(e){Up=e,window.addEventListener?(window.addEventListener("blur",fv,!1),document.addEventListener("focus",pv,!0)):(window.attachEvent("onBlur",fv),document.attachEvent("onFocus",pv))}function pwe(){Up=null,window.addEventListener?(window.removeEventListener("blur",fv),document.removeEventListener("focus",pv)):(window.detachEvent("onBlur",fv),document.detachEvent("onFocus",pv))}var Vk={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=PY,n=i(r);function i(s){return s&&s.__esModule?s:{default:s}}function a(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return s.activeElement.shadowRoot?a(s.activeElement.shadowRoot):s.activeElement}function o(s,l){var c=(0,n.default)(s);if(!c.length){l.preventDefault();return}var u=void 0,h=l.shiftKey,f=c[0],p=c[c.length-1],m=a();if(s===m){if(!h)return;u=p}if(p===m&&!h&&(u=f),f===m&&h&&(u=p),u){l.preventDefault(),u.focus();return}var g=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),y=g!=null&&g[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(y){var v=c.indexOf(m);if(v>-1&&(v+=h?-1:1),u=c[v],typeof u>"u"){l.preventDefault(),u=h?p:f,u.focus();return}l.preventDefault(),u.focus()}}e.exports=t.default})(Vk,Vk.exports);var mwe=Vk.exports,Sl={},gwe=function(){},ywe=gwe,vl={},DY={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(e){(function(){var t=!!(typeof window<"u"&&window.document&&window.document.createElement),r={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen};e.exports?e.exports=r:window.ExecutionEnvironment=r})()})(DY);var vwe=DY.exports;Object.defineProperty(vl,"__esModule",{value:!0});vl.canUseDOM=vl.SafeNodeList=vl.SafeHTMLCollection=void 0;var bwe=vwe,wwe=Ewe(bwe);function Ewe(e){return e&&e.__esModule?e:{default:e}}var PC=wwe.default,_we=PC.canUseDOM?window.HTMLElement:{};vl.SafeHTMLCollection=PC.canUseDOM?window.HTMLCollection:{};vl.SafeNodeList=PC.canUseDOM?window.NodeList:{};vl.canUseDOM=PC.canUseDOM;vl.default=_we;Object.defineProperty(Sl,"__esModule",{value:!0});Sl.resetState=Rwe;Sl.log=Iwe;Sl.assertNodeList=LY;Sl.setElement=Nwe;Sl.validateElement=gL;Sl.hide=Awe;Sl.show=Owe;Sl.documentNotReadyOrSSRTesting=kwe;var Swe=ywe,Twe=xwe(Swe),Cwe=vl;function xwe(e){return e&&e.__esModule?e:{default:e}}var xs=null;function Rwe(){xs&&(xs.removeAttribute?xs.removeAttribute("aria-hidden"):xs.length!=null?xs.forEach(function(e){return e.removeAttribute("aria-hidden")}):document.querySelectorAll(xs).forEach(function(e){return e.removeAttribute("aria-hidden")})),xs=null}function Iwe(){}function LY(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function Nwe(e){var t=e;if(typeof t=="string"&&Cwe.canUseDOM){var r=document.querySelectorAll(t);LY(r,t),t=r}return xs=t||xs,xs}function gL(e){var t=e||xs;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,Twe.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function Awe(e){var t=!0,r=!1,n=void 0;try{for(var i=gL(e)[Symbol.iterator](),a;!(t=(a=i.next()).done);t=!0){var o=a.value;o.setAttribute("aria-hidden","true")}}catch(s){r=!0,n=s}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}function Owe(e){var t=!0,r=!1,n=void 0;try{for(var i=gL(e)[Symbol.iterator](),a;!(t=(a=i.next()).done);t=!0){var o=a.value;o.removeAttribute("aria-hidden")}}catch(s){r=!0,n=s}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}function kwe(){xs=null}var bg={};Object.defineProperty(bg,"__esModule",{value:!0});bg.resetState=Pwe;bg.log=Dwe;var m0={},g0={};function s3(e,t){e.classList.remove(t)}function Pwe(){var e=document.getElementsByTagName("html")[0];for(var t in m0)s3(e,m0[t]);var r=document.body;for(var n in g0)s3(r,g0[n]);m0={},g0={}}function Dwe(){}var Lwe=function(t,r){return t[r]||(t[r]=0),t[r]+=1,r},jwe=function(t,r){return t[r]&&(t[r]-=1),r},Mwe=function(t,r,n){n.forEach(function(i){Lwe(r,i),t.add(i)})},Uwe=function(t,r,n){n.forEach(function(i){jwe(r,i),r[i]===0&&t.remove(i)})};bg.add=function(t,r){return Mwe(t.classList,t.nodeName.toLowerCase()=="html"?m0:g0,r.split(" "))};bg.remove=function(t,r){return Uwe(t.classList,t.nodeName.toLowerCase()=="html"?m0:g0,r.split(" "))};var wg={};Object.defineProperty(wg,"__esModule",{value:!0});wg.log=Vwe;wg.resetState=Bwe;function Fwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var jY=function e(){var t=this;Fwe(this,e),this.register=function(r){t.openInstances.indexOf(r)===-1&&(t.openInstances.push(r),t.emit("register"))},this.deregister=function(r){var n=t.openInstances.indexOf(r);n!==-1&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(r){t.subscribers.push(r)},this.emit=function(r){t.subscribers.forEach(function(n){return n(r,t.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},DS=new jY;function Vwe(){console.log("portalOpenInstances ----------"),console.log(DS.openInstances.length),DS.openInstances.forEach(function(e){return console.log(e)}),console.log("end portalOpenInstances ----------")}function Bwe(){DS=new jY}wg.default=DS;var yL={};Object.defineProperty(yL,"__esModule",{value:!0});yL.resetState=Gwe;yL.log=Wwe;var $we=wg,Hwe=zwe($we);function zwe(e){return e&&e.__esModule?e:{default:e}}var _a=void 0,ll=void 0,Fh=[];function Gwe(){for(var e=[_a,ll],t=0;t<e.length;t++){var r=e[t];r&&r.parentNode&&r.parentNode.removeChild(r)}_a=ll=null,Fh=[]}function Wwe(){console.log("bodyTrap ----------"),console.log(Fh.length);for(var e=[_a,ll],t=0;t<e.length;t++){var r=e[t],n=r||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")}function l3(){Fh.length!==0&&Fh[Fh.length-1].focusContent()}function Kwe(e,t){!_a&&!ll&&(_a=document.createElement("div"),_a.setAttribute("data-react-modal-body-trap",""),_a.style.position="absolute",_a.style.opacity="0",_a.setAttribute("tabindex","0"),_a.addEventListener("focus",l3),ll=_a.cloneNode(),ll.addEventListener("focus",l3)),Fh=t,Fh.length>0?(document.body.firstChild!==_a&&document.body.insertBefore(_a,document.body.firstChild),document.body.lastChild!==ll&&document.body.appendChild(ll)):(_a.parentElement&&_a.parentElement.removeChild(_a),ll.parentElement&&ll.parentElement.removeChild(ll))}Hwe.default.subscribe(Kwe);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function($){for(var B=1;B<arguments.length;B++){var K=arguments[B];for(var P in K)Object.prototype.hasOwnProperty.call(K,P)&&($[P]=K[P])}return $},n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},i=function(){function $(B,K){for(var P=0;P<K.length;P++){var D=K[P];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(B,D.key,D)}}return function(B,K,P){return K&&$(B.prototype,K),P&&$(B,P),B}}(),a=T,o=kY,s=I(o),l=_l,c=S(l),u=mwe,h=I(u),f=Sl,p=S(f),m=bg,g=S(m),y=vl,v=I(y),b=wg,E=I(b);function S($){if($&&$.__esModule)return $;var B={};if($!=null)for(var K in $)Object.prototype.hasOwnProperty.call($,K)&&(B[K]=$[K]);return B.default=$,B}function I($){return $&&$.__esModule?$:{default:$}}function N($,B){if(!($ instanceof B))throw new TypeError("Cannot call a class as a function")}function L($,B){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:$}function j($,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);$.prototype=Object.create(B&&B.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf($,B):$.__proto__=B)}var z={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},A=function(B){return B.code==="Tab"||B.keyCode===9},V=function(B){return B.code==="Escape"||B.keyCode===27},G=0,X=function($){j(B,$);function B(K){N(this,B);var P=L(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,K));return P.setOverlayRef=function(D){P.overlay=D,P.props.overlayRef&&P.props.overlayRef(D)},P.setContentRef=function(D){P.content=D,P.props.contentRef&&P.props.contentRef(D)},P.afterClose=function(){var D=P.props,H=D.appElement,x=D.ariaHideApp,w=D.htmlOpenClassName,O=D.bodyOpenClassName,C=D.parentSelector,q=C&&C().ownerDocument||document;O&&g.remove(q.body,O),w&&g.remove(q.getElementsByTagName("html")[0],w),x&&G>0&&(G-=1,G===0&&p.show(H)),P.props.shouldFocusAfterRender&&(P.props.shouldReturnFocusAfterClose?(c.returnFocus(P.props.preventScroll),c.teardownScopedFocus()):c.popWithoutFocus()),P.props.onAfterClose&&P.props.onAfterClose(),E.default.deregister(P)},P.open=function(){P.beforeOpen(),P.state.afterOpen&&P.state.beforeClose?(clearTimeout(P.closeTimer),P.setState({beforeClose:!1})):(P.props.shouldFocusAfterRender&&(c.setupScopedFocus(P.node),c.markForFocusLater()),P.setState({isOpen:!0},function(){P.openAnimationFrame=requestAnimationFrame(function(){P.setState({afterOpen:!0}),P.props.isOpen&&P.props.onAfterOpen&&P.props.onAfterOpen({overlayEl:P.overlay,contentEl:P.content})})}))},P.close=function(){P.props.closeTimeoutMS>0?P.closeWithTimeout():P.closeWithoutTimeout()},P.focusContent=function(){return P.content&&!P.contentHasFocus()&&P.content.focus({preventScroll:!0})},P.closeWithTimeout=function(){var D=Date.now()+P.props.closeTimeoutMS;P.setState({beforeClose:!0,closesAt:D},function(){P.closeTimer=setTimeout(P.closeWithoutTimeout,P.state.closesAt-Date.now())})},P.closeWithoutTimeout=function(){P.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},P.afterClose)},P.handleKeyDown=function(D){A(D)&&(0,h.default)(P.content,D),P.props.shouldCloseOnEsc&&V(D)&&(D.stopPropagation(),P.requestClose(D))},P.handleOverlayOnClick=function(D){P.shouldClose===null&&(P.shouldClose=!0),P.shouldClose&&P.props.shouldCloseOnOverlayClick&&(P.ownerHandlesClose()?P.requestClose(D):P.focusContent()),P.shouldClose=null},P.handleContentOnMouseUp=function(){P.shouldClose=!1},P.handleOverlayOnMouseDown=function(D){!P.props.shouldCloseOnOverlayClick&&D.target==P.overlay&&D.preventDefault()},P.handleContentOnClick=function(){P.shouldClose=!1},P.handleContentOnMouseDown=function(){P.shouldClose=!1},P.requestClose=function(D){return P.ownerHandlesClose()&&P.props.onRequestClose(D)},P.ownerHandlesClose=function(){return P.props.onRequestClose},P.shouldBeClosed=function(){return!P.state.isOpen&&!P.state.beforeClose},P.contentHasFocus=function(){return document.activeElement===P.content||P.content.contains(document.activeElement)},P.buildClassName=function(D,H){var x=(typeof H>"u"?"undefined":n(H))==="object"?H:{base:z[D],afterOpen:z[D]+"--after-open",beforeClose:z[D]+"--before-close"},w=x.base;return P.state.afterOpen&&(w=w+" "+x.afterOpen),P.state.beforeClose&&(w=w+" "+x.beforeClose),typeof H=="string"&&H?w+" "+H:w},P.attributesFromObject=function(D,H){return Object.keys(H).reduce(function(x,w){return x[D+"-"+w]=H[w],x},{})},P.state={afterOpen:!1,beforeClose:!1},P.shouldClose=null,P.moveFromContentToOverlay=null,P}return i(B,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(P,D){this.props.isOpen&&!P.isOpen?this.open():!this.props.isOpen&&P.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!D.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var P=this.props,D=P.appElement,H=P.ariaHideApp,x=P.htmlOpenClassName,w=P.bodyOpenClassName,O=P.parentSelector,C=O&&O().ownerDocument||document;w&&g.add(C.body,w),x&&g.add(C.getElementsByTagName("html")[0],x),H&&(G+=1,p.hide(D)),E.default.register(this)}},{key:"render",value:function(){var P=this.props,D=P.id,H=P.className,x=P.overlayClassName,w=P.defaultStyles,O=P.children,C=H?{}:w.content,q=x?{}:w.overlay;if(this.shouldBeClosed())return null;var F={ref:this.setOverlayRef,className:this.buildClassName("overlay",x),style:r({},q,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},J=r({id:D,ref:this.setContentRef,style:r({},C,this.props.style.content),className:this.buildClassName("content",H),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),se=this.props.contentElement(J,O);return this.props.overlayElement(F,se)}}]),B}(a.Component);X.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},X.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),parentSelector:s.default.func,bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(v.default),s.default.instanceOf(y.SafeHTMLCollection),s.default.instanceOf(y.SafeNodeList),s.default.arrayOf(s.default.instanceOf(v.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},t.default=X,e.exports=t.default})(Mk,Mk.exports);var qwe=Mk.exports;function MY(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function UY(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n??null}this.setState(t.bind(this))}function FY(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}MY.__suppressDeprecationWarning=!0;UY.__suppressDeprecationWarning=!0;FY.__suppressDeprecationWarning=!0;function Ywe(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,i=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?i="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),r!==null||n!==null||i!==null){var a=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+o+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=MY,t.componentWillReceiveProps=UY),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=FY;var s=t.componentDidUpdate;t.componentDidUpdate=function(c,u,h){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:h;s.call(this,c,u,f)}}return e}const Xwe=Object.freeze(Object.defineProperty({__proto__:null,polyfill:Ywe},Symbol.toStringTag,{value:"Module"})),Jwe=A9(Xwe);Object.defineProperty(nf,"__esModule",{value:!0});nf.bodyOpenClassName=nf.portalClassName=void 0;var c3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qwe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),VY=T,LS=gb(VY),Zwe=JT,jS=gb(Zwe),eEe=kY,Vt=gb(eEe),tEe=qwe,u3=gb(tEe),rEe=Sl,nEe=aEe(rEe),Qu=vl,d3=gb(Qu),iEe=Jwe;function aEe(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function gb(e){return e&&e.__esModule?e:{default:e}}function oEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h3(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function sEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var lEe=nf.portalClassName="ReactModalPortal",cEe=nf.bodyOpenClassName="ReactModal__Body--open",lh=Qu.canUseDOM&&jS.default.createPortal!==void 0,f3=function(t){return document.createElement(t)},p3=function(){return lh?jS.default.createPortal:jS.default.unstable_renderSubtreeIntoContainer};function Nw(e){return e()}var yb=function(e){sEe(t,e);function t(){var r,n,i,a;oEe(this,t);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return a=(n=(i=h3(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),i),i.removePortal=function(){!lh&&jS.default.unmountComponentAtNode(i.node);var c=Nw(i.props.parentSelector);c&&c.contains(i.node)?c.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(c){i.portal=c},i.renderPortal=function(c){var u=p3(),h=u(i,LS.default.createElement(u3.default,c3({defaultStyles:t.defaultStyles},c)),i.node);i.portalRef(h)},n),h3(i,a)}return Qwe(t,[{key:"componentDidMount",value:function(){if(Qu.canUseDOM){lh||(this.node=f3("div")),this.node.className=this.props.portalClassName;var n=Nw(this.props.parentSelector);n.appendChild(this.node),!lh&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(n){var i=Nw(n.parentSelector),a=Nw(this.props.parentSelector);return{prevParent:i,nextParent:a}}},{key:"componentDidUpdate",value:function(n,i,a){if(Qu.canUseDOM){var o=this.props,s=o.isOpen,l=o.portalClassName;n.portalClassName!==l&&(this.node.className=l);var c=a.prevParent,u=a.nextParent;u!==c&&(c.removeChild(this.node),u.appendChild(this.node)),!(!n.isOpen&&!s)&&!lh&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!Qu.canUseDOM||!this.node||!this.portal)){var n=this.portal.state,i=Date.now(),a=n.isOpen&&this.props.closeTimeoutMS&&(n.closesAt||i+this.props.closeTimeoutMS);a?(n.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,a-i)):this.removePortal()}}},{key:"render",value:function(){if(!Qu.canUseDOM||!lh)return null;!this.node&&lh&&(this.node=f3("div"));var n=p3();return n(LS.default.createElement(u3.default,c3({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(n){nEe.setElement(n)}}]),t}(VY.Component);yb.propTypes={isOpen:Vt.default.bool.isRequired,style:Vt.default.shape({content:Vt.default.object,overlay:Vt.default.object}),portalClassName:Vt.default.string,bodyOpenClassName:Vt.default.string,htmlOpenClassName:Vt.default.string,className:Vt.default.oneOfType([Vt.default.string,Vt.default.shape({base:Vt.default.string.isRequired,afterOpen:Vt.default.string.isRequired,beforeClose:Vt.default.string.isRequired})]),overlayClassName:Vt.default.oneOfType([Vt.default.string,Vt.default.shape({base:Vt.default.string.isRequired,afterOpen:Vt.default.string.isRequired,beforeClose:Vt.default.string.isRequired})]),appElement:Vt.default.oneOfType([Vt.default.instanceOf(d3.default),Vt.default.instanceOf(Qu.SafeHTMLCollection),Vt.default.instanceOf(Qu.SafeNodeList),Vt.default.arrayOf(Vt.default.instanceOf(d3.default))]),onAfterOpen:Vt.default.func,onRequestClose:Vt.default.func,closeTimeoutMS:Vt.default.number,ariaHideApp:Vt.default.bool,shouldFocusAfterRender:Vt.default.bool,shouldCloseOnOverlayClick:Vt.default.bool,shouldReturnFocusAfterClose:Vt.default.bool,preventScroll:Vt.default.bool,parentSelector:Vt.default.func,aria:Vt.default.object,data:Vt.default.object,role:Vt.default.string,contentLabel:Vt.default.string,shouldCloseOnEsc:Vt.default.bool,overlayRef:Vt.default.func,contentRef:Vt.default.func,id:Vt.default.string,overlayElement:Vt.default.func,contentElement:Vt.default.func};yb.defaultProps={isOpen:!1,portalClassName:lEe,bodyOpenClassName:cEe,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(t,r){return LS.default.createElement("div",t,r)},contentElement:function(t,r){return LS.default.createElement("div",t,r)}};yb.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,iEe.polyfill)(yb);nf.default=yb;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=nf,n=i(r);function i(a){return a&&a.__esModule?a:{default:a}}t.default=n.default,e.exports=t.default})(jk,jk.exports);var uEe=jk.exports;const DC=es(uEe),BY=Vi().shape({password:Ut().required("Enter password").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirmPassword:Ut().required("Enter confirmpassword").oneOf([BK("password"),null],"Should be matching with password field")}),$Y=e=>{try{const[t,r]=e.split("@");return`${t.slice(0,4)+"************"}@${r}`}catch(t){console.log(t)}};var HY={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},m3=jr.createContext&&jr.createContext(HY),dEe=["attr","size","title"];function hEe(e,t){if(e==null)return{};var r=fEe(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function MS(){return MS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MS.apply(this,arguments)}function g3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function US(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g3(Object(r),!0).forEach(function(n){pEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pEe(e,t,r){return t=mEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mEe(e){var t=gEe(e,"string");return typeof t=="symbol"?t:t+""}function gEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zY(e){return e&&e.map((t,r)=>jr.createElement(t.tag,US({key:r},t.attr),zY(t.child)))}function Bi(e){return t=>jr.createElement(yEe,MS({attr:US({},e.attr)},t),zY(e.child))}function yEe(e){var t=r=>{var{attr:n,size:i,title:a}=e,o=hEe(e,dEe),s=i||r.size||"1em",l;return r.className&&(l=r.className),e.className&&(l=(l?l+" ":"")+e.className),jr.createElement("svg",MS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:l,style:US(US({color:e.color||r.color},r.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&jr.createElement("title",null,a),e.children)};return m3!==void 0?jr.createElement(m3.Consumer,null,r=>t(r)):t(HY)}function vEe(e){return Bi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function bEe(e){return Bi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function wEe(e){return Bi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(e)}function GY(e){return Bi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function EEe(e){return Bi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(e)}function _Ee(e){return Bi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}function SEe(e){return Bi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},child:[]}]})(e)}function TEe(e){return Bi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function WY(e){return Bi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"},child:[]}]})(e)}function CEe(e){return Bi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"},child:[]}]})(e)}function KY(e){return Bi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"},child:[]}]})(e)}function xEe(e){return Bi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"},child:[]}]})(e)}function REe(e){return Bi({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"},child:[]}]})(e)}const vL="-";function IEe(e){const t=AEe(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;function i(o){const s=o.split(vL);return s[0]===""&&s.length!==1&&s.shift(),qY(s,t)||NEe(o)}function a(o,s){const l=r[o]||[];return s&&n[o]?[...l,...n[o]]:l}return{getClassGroupId:i,getConflictingClassGroupIds:a}}function qY(e,t){var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?qY(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(vL);return(o=t.validators.find(({validator:s})=>s(a)))==null?void 0:o.classGroupId}const y3=/^\[(.+)\]$/;function NEe(e){if(y3.test(e)){const t=y3.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function AEe(e){const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return kEe(Object.entries(e.classGroups),r).forEach(([a,o])=>{Bk(o,n,a,t)}),n}function Bk(e,t,r,n){e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:v3(t,i);a.classGroupId=r;return}if(typeof i=="function"){if(OEe(i)){Bk(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([a,o])=>{Bk(o,v3(t,a),r,n)})})}function v3(e,t){let r=e;return t.split(vL).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function OEe(e){return e.isThemeGetter}function kEe(e,t){return t?e.map(([r,n])=>{const i=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,s])=>[t+o,s])):a);return[r,i]}):e}function PEe(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;function i(a,o){r.set(a,o),t++,t>e&&(t=0,n=r,r=new Map)}return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return i(a,o),o},set(a,o){r.has(a)?r.set(a,o):i(a,o)}}}const YY="!";function DEe(e){const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],a=t.length;function o(s){const l=[];let c=0,u=0,h;for(let y=0;y<s.length;y++){let v=s[y];if(c===0){if(v===i&&(n||s.slice(y,y+a)===t)){l.push(s.slice(u,y)),u=y+a;continue}if(v==="/"){h=y;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?s:s.substring(u),p=f.startsWith(YY),m=p?f.substring(1):f,g=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}}return r?function(l){return r({className:l,parseClassName:o})}:o}function LEe(e){if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t}function jEe(e){return{cache:PEe(e.cacheSize),parseClassName:DEe(e),...IEe(e)}}const MEe=/\s+/;function UEe(e,t){const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,a=new Set;return e.trim().split(MEe).map(o=>{const{modifiers:s,hasImportantModifier:l,baseClassName:c,maybePostfixModifierPosition:u}=r(o);let h=!!u,f=n(h?c.substring(0,u):c);if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=n(c),!f)return{isTailwindClass:!1,originalClassName:o};h=!1}const p=LEe(s).join(":");return{isTailwindClass:!0,modifierId:l?p+YY:p,classGroupId:f,originalClassName:o,hasPostfixModifier:h}}).reverse().filter(o=>{if(!o.isTailwindClass)return!0;const{modifierId:s,classGroupId:l,hasPostfixModifier:c}=o,u=s+l;return a.has(u)?!1:(a.add(u),i(l,c).forEach(h=>a.add(s+h)),!0)}).reverse().map(o=>o.originalClassName).join(" ")}function FEe(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=XY(t))&&(n&&(n+=" "),n+=r);return n}function XY(e){if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=XY(e[n]))&&(r&&(r+=" "),r+=t);return r}function VEe(e,...t){let r,n,i,a=o;function o(l){const c=t.reduce((u,h)=>h(u),e());return r=jEe(c),n=r.cache.get,i=r.cache.set,a=s,s(l)}function s(l){const c=n(l);if(c)return c;const u=UEe(l,r);return i(l,u),u}return function(){return a(FEe.apply(null,arguments))}}function yn(e){const t=r=>r[e]||[];return t.isThemeGetter=!0,t}const JY=/^\[(?:([a-z-]+):)?(.+)\]$/i,BEe=/^\d+\/\d+$/,$Ee=new Set(["px","full","screen"]),HEe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zEe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,GEe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,WEe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,KEe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Tc(e){return Th(e)||$Ee.has(e)||BEe.test(e)}function Eu(e){return Eg(e,"length",t_e)}function Th(e){return!!e&&!Number.isNaN(Number(e))}function Aw(e){return Eg(e,"number",Th)}function dy(e){return!!e&&Number.isInteger(Number(e))}function qEe(e){return e.endsWith("%")&&Th(e.slice(0,-1))}function Xt(e){return JY.test(e)}function _u(e){return HEe.test(e)}const YEe=new Set(["length","size","percentage"]);function XEe(e){return Eg(e,YEe,QY)}function JEe(e){return Eg(e,"position",QY)}const QEe=new Set(["image","url"]);function ZEe(e){return Eg(e,QEe,n_e)}function e_e(e){return Eg(e,"",r_e)}function hy(){return!0}function Eg(e,t,r){const n=JY.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1}function t_e(e){return zEe.test(e)&&!GEe.test(e)}function QY(){return!1}function r_e(e){return WEe.test(e)}function n_e(e){return KEe.test(e)}function i_e(){const e=yn("colors"),t=yn("spacing"),r=yn("blur"),n=yn("brightness"),i=yn("borderColor"),a=yn("borderRadius"),o=yn("borderSpacing"),s=yn("borderWidth"),l=yn("contrast"),c=yn("grayscale"),u=yn("hueRotate"),h=yn("invert"),f=yn("gap"),p=yn("gradientColorStops"),m=yn("gradientColorStopPositions"),g=yn("inset"),y=yn("margin"),v=yn("opacity"),b=yn("padding"),E=yn("saturate"),S=yn("scale"),I=yn("sepia"),N=yn("skew"),L=yn("space"),j=yn("translate"),z=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",Xt,t],G=()=>[Xt,t],X=()=>["",Tc,Eu],$=()=>["auto",Th,Xt],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],P=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Xt],x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],w=()=>[Th,Aw],O=()=>[Th,Xt];return{cacheSize:500,separator:":",theme:{colors:[hy],spacing:[Tc,Eu],blur:["none","",_u,Xt],brightness:w(),borderColor:[e],borderRadius:["none","","full",_u,Xt],borderSpacing:G(),borderWidth:X(),contrast:w(),grayscale:H(),hueRotate:O(),invert:H(),gap:G(),gradientColorStops:[e],gradientColorStopPositions:[qEe,Eu],inset:V(),margin:V(),opacity:w(),padding:G(),saturate:w(),scale:w(),sepia:H(),skew:O(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",Xt]}],container:["container"],columns:[{columns:[_u]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),Xt]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",dy,Xt]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xt]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",dy,Xt]}],"grid-cols":[{"grid-cols":[hy]}],"col-start-end":[{col:["auto",{span:["full",dy,Xt]},Xt]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[hy]}],"row-start-end":[{row:["auto",{span:[dy,Xt]},Xt]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Xt,t]}],"min-w":[{"min-w":[Xt,t,"min","max","fit"]}],"max-w":[{"max-w":[Xt,t,"none","full","min","max","fit","prose",{screen:[_u]},_u]}],h:[{h:[Xt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Xt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Xt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Xt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",_u,Eu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Aw]}],"font-family":[{font:[hy]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xt]}],"line-clamp":[{"line-clamp":["none",Th,Aw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Tc,Xt]}],"list-image":[{"list-image":["none",Xt]}],"list-style-type":[{list:["none","disc","decimal",Xt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Tc,Eu]}],"underline-offset":[{"underline-offset":["auto",Tc,Xt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),JEe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",XEe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ZEe]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Tc,Xt]}],"outline-w":[{outline:[Tc,Eu]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Tc,Eu]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",_u,e_e]}],"shadow-color":[{shadow:[hy]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...P(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":P()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",_u,Xt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[E]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xt]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",Xt]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[dy,Xt]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Tc,Eu,Aw]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const le=VEe(i_e);function ch(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function mv(e){if(!ch(e))return e;const t={};for(const r in e)t[r]=mv(e[r]);return t}function Pe(e,t){if(ch(t)&&Object.keys(t).length===0)return mv({...e,...t});const r={...e,...t};if(ch(t)&&ch(e))for(const n in t)ch(t[n])&&n in e&&ch(e[n])?r[n]=Pe(e[n],t[n]):r[n]=ch(t[n])?mv(t[n]):t[n];return r}const a_e={root:{base:"divide-y divide-gray-200 border-gray-200 dark:divide-gray-700 dark:border-gray-700",flush:{off:"rounded-lg border",on:"border-b"}},content:{base:"p-5 first:rounded-t-lg last:rounded-b-lg dark:bg-gray-900"},title:{arrow:{base:"h-6 w-6 shrink-0",open:{off:"",on:"rotate-180"}},base:"flex w-full items-center justify-between p-5 text-left font-medium text-gray-500 first:rounded-t-lg last:rounded-b-lg dark:text-gray-400",flush:{off:"hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:hover:bg-gray-800 dark:focus:ring-gray-800",on:"bg-transparent dark:bg-transparent"},heading:"",open:{off:"",on:"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-white"}}},o_e={base:"flex flex-col gap-2 p-4 text-sm",borderAccent:"border-t-4",closeButton:{base:"-m-1.5 ml-auto inline-flex h-8 w-8 rounded-lg p-1.5 focus:ring-2",icon:"h-5 w-5",color:{info:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",gray:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white",failure:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",success:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",warning:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",red:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",green:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",yellow:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",blue:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",pink:"bg-pink-100 text-pink-500 hover:bg-pink-200 focus:ring-pink-400 dark:bg-pink-200 dark:text-pink-600 dark:hover:bg-pink-300",lime:"bg-lime-100 text-lime-500 hover:bg-lime-200 focus:ring-lime-400 dark:bg-lime-200 dark:text-lime-600 dark:hover:bg-lime-300",dark:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-200 dark:text-gray-600 dark:hover:bg-gray-300",indigo:"bg-indigo-100 text-indigo-500 hover:bg-indigo-200 focus:ring-indigo-400 dark:bg-indigo-200 dark:text-indigo-600 dark:hover:bg-indigo-300",purple:"bg-purple-100 text-purple-500 hover:bg-purple-200 focus:ring-purple-400 dark:bg-purple-200 dark:text-purple-600 dark:hover:bg-purple-300",teal:"bg-teal-100 text-teal-500 hover:bg-teal-200 focus:ring-teal-400 dark:bg-teal-200 dark:text-teal-600 dark:hover:bg-teal-300",light:"bg-gray-50 text-gray-500 hover:bg-gray-100 focus:ring-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:hover:text-white"}},color:{info:"border-cyan-500 bg-cyan-100 text-cyan-700 dark:bg-cyan-200 dark:text-cyan-800",gray:"border-gray-500 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",failure:"border-red-500 bg-red-100 text-red-700 dark:bg-red-200 dark:text-red-800",success:"border-green-500 bg-green-100 text-green-700 dark:bg-green-200 dark:text-green-800",warning:"border-yellow-500 bg-yellow-100 text-yellow-700 dark:bg-yellow-200 dark:text-yellow-800",red:"border-red-500 bg-red-100 text-red-700 dark:bg-red-200 dark:text-red-800",green:"border-green-500 bg-green-100 text-green-700 dark:bg-green-200 dark:text-green-800",yellow:"border-yellow-500 bg-yellow-100 text-yellow-700 dark:bg-yellow-200 dark:text-yellow-800",blue:"border-blue-500 bg-blue-100 text-blue-700 dark:bg-blue-200 dark:text-blue-800",cyan:"border-cyan-500 bg-cyan-100 text-cyan-700 dark:bg-cyan-200 dark:text-cyan-800",pink:"border-pink-500 bg-pink-100 text-pink-700 dark:bg-pink-200 dark:text-pink-800",lime:"border-lime-500 bg-lime-100 text-lime-700 dark:bg-lime-200 dark:text-lime-800",dark:"border-gray-600 bg-gray-800 text-gray-200 dark:bg-gray-900 dark:text-gray-300",indigo:"border-indigo-500 bg-indigo-100 text-indigo-700 dark:bg-indigo-200 dark:text-indigo-800",purple:"border-purple-500 bg-purple-100 text-purple-700 dark:bg-purple-200 dark:text-purple-800",teal:"border-teal-500 bg-teal-100 text-teal-700 dark:bg-teal-200 dark:text-teal-800",light:"border-gray-400 bg-gray-50 text-gray-600 dark:bg-gray-500 dark:text-gray-200"},icon:"mr-3 inline h-5 w-5 flex-shrink-0",rounded:"rounded-lg",wrapper:"flex items-center"},s_e={root:{base:"flex items-center justify-center space-x-4 rounded",bordered:"p-1 ring-2",rounded:"rounded-full",color:{dark:"ring-gray-800 dark:ring-gray-800",failure:"ring-red-500 dark:ring-red-700",gray:"ring-gray-500 dark:ring-gray-400",info:"ring-cyan-400 dark:ring-cyan-800",light:"ring-gray-300 dark:ring-gray-500",purple:"ring-purple-500 dark:ring-purple-600",success:"ring-green-500 dark:ring-green-500",warning:"ring-yellow-300 dark:ring-yellow-500",pink:"ring-pink-500 dark:ring-pink-500"},img:{base:"rounded",off:"relative overflow-hidden bg-gray-100 dark:bg-gray-600",on:"",placeholder:"absolute -bottom-1 h-auto w-auto text-gray-400"},size:{xs:"h-6 w-6",sm:"h-8 w-8",md:"h-10 w-10",lg:"h-20 w-20",xl:"h-36 w-36"},stacked:"ring-2 ring-gray-300 dark:ring-gray-500",statusPosition:{"bottom-left":"-bottom-1 -left-1","bottom-center":"-bottom-1","bottom-right":"-bottom-1 -right-1","top-left":"-left-1 -top-1","top-center":"-top-1","top-right":"-right-1 -top-1","center-right":"-right-1",center:"","center-left":"-left-1"},status:{away:"bg-yellow-400",base:"absolute h-3.5 w-3.5 rounded-full border-2 border-white dark:border-gray-800",busy:"bg-red-400",offline:"bg-gray-400",online:"bg-green-400"},initials:{text:"font-medium text-gray-600 dark:text-gray-300",base:"relative inline-flex items-center justify-center overflow-hidden bg-gray-100 dark:bg-gray-600"}},group:{base:"flex -space-x-4"},groupCounter:{base:"relative flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xs font-medium text-white ring-2 ring-gray-300 hover:bg-gray-600 dark:ring-gray-500"}},l_e={root:{base:"flex h-fit items-center gap-1 font-semibold",color:{info:"bg-cyan-100 text-cyan-800 group-hover:bg-cyan-200 dark:bg-cyan-200 dark:text-cyan-800 dark:group-hover:bg-cyan-300",gray:"bg-gray-100 text-gray-800 group-hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:group-hover:bg-gray-600",failure:"bg-red-100 text-red-800 group-hover:bg-red-200 dark:bg-red-200 dark:text-red-900 dark:group-hover:bg-red-300",success:"bg-green-100 text-green-800 group-hover:bg-green-200 dark:bg-green-200 dark:text-green-900 dark:group-hover:bg-green-300",warning:"bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 dark:bg-yellow-200 dark:text-yellow-900 dark:group-hover:bg-yellow-300",indigo:"bg-indigo-100 text-indigo-800 group-hover:bg-indigo-200 dark:bg-indigo-200 dark:text-indigo-900 dark:group-hover:bg-indigo-300",purple:"bg-purple-100 text-purple-800 group-hover:bg-purple-200 dark:bg-purple-200 dark:text-purple-900 dark:group-hover:bg-purple-300",pink:"bg-pink-100 text-pink-800 group-hover:bg-pink-200 dark:bg-pink-200 dark:text-pink-900 dark:group-hover:bg-pink-300",blue:"bg-blue-100 text-blue-800 group-hover:bg-blue-200 dark:bg-blue-200 dark:text-blue-900 dark:group-hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-800 group-hover:bg-cyan-200 dark:bg-cyan-200 dark:text-cyan-900 dark:group-hover:bg-cyan-300",dark:"bg-gray-600 text-gray-100 group-hover:bg-gray-500 dark:bg-gray-900 dark:text-gray-200 dark:group-hover:bg-gray-700",light:"bg-gray-200 text-gray-800 group-hover:bg-gray-300 dark:bg-gray-400 dark:text-gray-900 dark:group-hover:bg-gray-500",green:"bg-green-100 text-green-800 group-hover:bg-green-200 dark:bg-green-200 dark:text-green-900 dark:group-hover:bg-green-300",lime:"bg-lime-100 text-lime-800 group-hover:bg-lime-200 dark:bg-lime-200 dark:text-lime-900 dark:group-hover:bg-lime-300",red:"bg-red-100 text-red-800 group-hover:bg-red-200 dark:bg-red-200 dark:text-red-900 dark:group-hover:bg-red-300",teal:"bg-teal-100 text-teal-800 group-hover:bg-teal-200 dark:bg-teal-200 dark:text-teal-900 dark:group-hover:bg-teal-300",yellow:"bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 dark:bg-yellow-200 dark:text-yellow-900 dark:group-hover:bg-yellow-300"},href:"group",size:{xs:"p-1 text-xs",sm:"p-1.5 text-sm"}},icon:{off:"rounded px-2 py-0.5",on:"rounded-full p-1.5",size:{xs:"h-3 w-3",sm:"h-3.5 w-3.5"}}},c_e={root:{base:"text-xl font-semibold italic text-gray-900 dark:text-white"}},u_e={root:{base:"",list:"flex items-center"},item:{base:"group flex items-center",chevron:"mx-1 h-4 w-4 text-gray-400 group-first:hidden md:mx-2",href:{off:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",on:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},icon:"mr-2 h-4 w-4"}},d_e={base:"group relative flex items-stretch justify-center p-0.5 text-center font-medium transition-[color,background-color,border-color,text-decoration-color,fill,stroke,box-shadow] focus:z-10 focus:outline-none",fullSized:"w-full",color:{dark:"border border-transparent bg-gray-800 text-white focus:ring-4 focus:ring-gray-300 enabled:hover:bg-gray-900 dark:border-gray-700 dark:bg-gray-800 dark:focus:ring-gray-800 dark:enabled:hover:bg-gray-700",failure:"border border-transparent bg-red-700 text-white focus:ring-4 focus:ring-red-300 enabled:hover:bg-red-800 dark:bg-red-600 dark:focus:ring-red-900 dark:enabled:hover:bg-red-700",gray:":ring-cyan-700 border border-gray-200 bg-white text-gray-900 focus:text-cyan-700 focus:ring-4 enabled:hover:bg-gray-100 enabled:hover:text-cyan-700 dark:border-gray-600 dark:bg-transparent dark:text-gray-400 dark:enabled:hover:bg-gray-700 dark:enabled:hover:text-white",info:"border border-transparent bg-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-800 dark:bg-cyan-600 dark:focus:ring-cyan-800 dark:enabled:hover:bg-cyan-700",light:"border border-gray-300 bg-white text-gray-900 focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-600 dark:text-white dark:focus:ring-gray-700 dark:enabled:hover:border-gray-700 dark:enabled:hover:bg-gray-700",purple:"border border-transparent bg-purple-700 text-white focus:ring-4 focus:ring-purple-300 enabled:hover:bg-purple-800 dark:bg-purple-600 dark:focus:ring-purple-900 dark:enabled:hover:bg-purple-700",success:"border border-transparent bg-green-700 text-white focus:ring-4 focus:ring-green-300 enabled:hover:bg-green-800 dark:bg-green-600 dark:focus:ring-green-800 dark:enabled:hover:bg-green-700",warning:"border border-transparent bg-yellow-400 text-white focus:ring-4 focus:ring-yellow-300 enabled:hover:bg-yellow-500 dark:focus:ring-yellow-900",blue:"border border-transparent bg-blue-700 text-white focus:ring-4 focus:ring-blue-300 enabled:hover:bg-blue-800 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",cyan:"border border-cyan-300 bg-white text-cyan-900 focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-100 dark:border-cyan-600 dark:bg-cyan-600 dark:text-white dark:focus:ring-cyan-700 dark:enabled:hover:border-cyan-700 dark:enabled:hover:bg-cyan-700",green:"border border-green-300 bg-white text-green-900 focus:ring-4 focus:ring-green-300 enabled:hover:bg-green-100 dark:border-green-600 dark:bg-green-600 dark:text-white dark:focus:ring-green-700 dark:enabled:hover:border-green-700 dark:enabled:hover:bg-green-700",indigo:"border border-indigo-300 bg-white text-indigo-900 focus:ring-4 focus:ring-indigo-300 enabled:hover:bg-indigo-100 dark:border-indigo-600 dark:bg-indigo-600 dark:text-white dark:focus:ring-indigo-700 dark:enabled:hover:border-indigo-700 dark:enabled:hover:bg-indigo-700",lime:"border border-lime-300 bg-white text-lime-900 focus:ring-4 focus:ring-lime-300 enabled:hover:bg-lime-100 dark:border-lime-600 dark:bg-lime-600 dark:text-white dark:focus:ring-lime-700 dark:enabled:hover:border-lime-700 dark:enabled:hover:bg-lime-700",pink:"border border-pink-300 bg-white text-pink-900 focus:ring-4 focus:ring-pink-300 enabled:hover:bg-pink-100 dark:border-pink-600 dark:bg-pink-600 dark:text-white dark:focus:ring-pink-700 dark:enabled:hover:border-pink-700 dark:enabled:hover:bg-pink-700",red:"border border-red-300 bg-white text-red-900 focus:ring-4 focus:ring-red-300 enabled:hover:bg-red-100 dark:border-red-600 dark:bg-red-600 dark:text-white dark:focus:ring-red-700 dark:enabled:hover:border-red-700 dark:enabled:hover:bg-red-700",teal:"border border-teal-300 bg-white text-teal-900 focus:ring-4 focus:ring-teal-300 enabled:hover:bg-teal-100 dark:border-teal-600 dark:bg-teal-600 dark:text-white dark:focus:ring-teal-700 dark:enabled:hover:border-teal-700 dark:enabled:hover:bg-teal-700",yellow:"border border-yellow-300 bg-white text-yellow-900 focus:ring-4 focus:ring-yellow-300 enabled:hover:bg-yellow-100 dark:border-yellow-600 dark:bg-yellow-600 dark:text-white dark:focus:ring-yellow-700 dark:enabled:hover:border-yellow-700 dark:enabled:hover:bg-yellow-700"},disabled:"cursor-not-allowed opacity-50",isProcessing:"cursor-wait",spinnerSlot:"absolute top-0 flex h-full items-center",spinnerLeftPosition:{xs:"left-2",sm:"left-3",md:"left-4",lg:"left-5",xl:"left-6"},gradient:{cyan:"bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-br dark:focus:ring-cyan-800",failure:"bg-gradient-to-r from-red-400 via-red-500 to-red-600 text-white focus:ring-4 focus:ring-red-300 enabled:hover:bg-gradient-to-br dark:focus:ring-red-800",info:"bg-gradient-to-r from-cyan-500 via-cyan-600 to-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-br dark:focus:ring-cyan-800",lime:"bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 text-gray-900 focus:ring-4 focus:ring-lime-300 enabled:hover:bg-gradient-to-br dark:focus:ring-lime-800",pink:"bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 text-white focus:ring-4 focus:ring-pink-300 enabled:hover:bg-gradient-to-br dark:focus:ring-pink-800",purple:"bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 text-white focus:ring-4 focus:ring-purple-300 enabled:hover:bg-gradient-to-br dark:focus:ring-purple-800",success:"bg-gradient-to-r from-green-400 via-green-500 to-green-600 text-white focus:ring-4 focus:ring-green-300 enabled:hover:bg-gradient-to-br dark:focus:ring-green-800",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 text-white focus:ring-4 focus:ring-teal-300 enabled:hover:bg-gradient-to-br dark:focus:ring-teal-800"},gradientDuoTone:{cyanToBlue:"bg-gradient-to-r from-cyan-500 to-cyan-500 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-bl dark:focus:ring-cyan-800",greenToBlue:"bg-gradient-to-br from-green-400 to-cyan-600 text-white focus:ring-4 focus:ring-green-200 enabled:hover:bg-gradient-to-bl dark:focus:ring-green-800",pinkToOrange:"bg-gradient-to-br from-pink-500 to-orange-400 text-white focus:ring-4 focus:ring-pink-200 enabled:hover:bg-gradient-to-bl dark:focus:ring-pink-800",purpleToBlue:"bg-gradient-to-br from-purple-600 to-cyan-500 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-bl dark:focus:ring-cyan-800",purpleToPink:"bg-gradient-to-r from-purple-500 to-pink-500 text-white focus:ring-4 focus:ring-purple-200 enabled:hover:bg-gradient-to-l dark:focus:ring-purple-800",redToYellow:"bg-gradient-to-r from-red-200 via-red-300 to-yellow-200 text-gray-900 focus:ring-4 focus:ring-red-100 enabled:hover:bg-gradient-to-bl dark:focus:ring-red-400",tealToLime:"bg-gradient-to-r from-teal-200 to-lime-200 text-gray-900 focus:ring-4 focus:ring-lime-200 enabled:hover:bg-gradient-to-l enabled:hover:from-teal-200 enabled:hover:to-lime-200 enabled:hover:text-gray-900 dark:focus:ring-teal-700"},inner:{base:"flex items-stretch transition-all duration-200",position:{none:"",start:"rounded-r-none",middle:"rounded-none",end:"rounded-l-none"},outline:"border border-transparent",isProcessingPadding:{xs:"pl-8",sm:"pl-10",md:"pl-12",lg:"pl-16",xl:"pl-20"}},label:"ml-2 inline-flex h-4 w-4 items-center justify-center rounded-full bg-cyan-200 text-xs font-semibold text-cyan-800",outline:{color:{gray:"border border-gray-900 dark:border-white",default:"border-0",light:""},off:"",on:"flex w-full justify-center bg-white text-gray-900 transition-all duration-75 ease-in group-enabled:group-hover:bg-opacity-0 group-enabled:group-hover:text-inherit dark:bg-gray-900 dark:text-white",pill:{off:"rounded-md",on:"rounded-full"}},pill:{off:"rounded-lg",on:"rounded-full"},size:{xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base",xl:"px-6 py-3 text-base"}},h_e={base:"inline-flex",position:{none:"",start:"rounded-r-none focus:ring-2",middle:"rounded-none border-l-0 pl-0 focus:ring-2",end:"rounded-l-none border-l-0 pl-0 focus:ring-2"}},f_e={root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}},p_e={root:{base:"relative h-full w-full",leftControl:"absolute left-0 top-0 flex h-full items-center justify-center px-4 focus:outline-none",rightControl:"absolute right-0 top-0 flex h-full items-center justify-center px-4 focus:outline-none"},indicators:{active:{off:"bg-white/50 hover:bg-white dark:bg-gray-800/50 dark:hover:bg-gray-800",on:"bg-white dark:bg-gray-800"},base:"h-3 w-3 rounded-full",wrapper:"absolute bottom-5 left-1/2 flex -translate-x-1/2 space-x-3"},item:{base:"absolute left-1/2 top-1/2 block w-full -translate-x-1/2 -translate-y-1/2",wrapper:{off:"w-full flex-shrink-0 transform cursor-default snap-center",on:"w-full flex-shrink-0 transform cursor-grab snap-center"}},control:{base:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:outline-none group-focus:ring-4 group-focus:ring-white dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70 sm:h-10 sm:w-10",icon:"h-5 w-5 text-white dark:text-gray-800 sm:h-6 sm:w-6"},scrollContainer:{base:"flex h-full snap-mandatory overflow-y-hidden overflow-x-scroll scroll-smooth rounded-lg",snap:"snap-x"}},m_e={root:{base:"h-4 w-4 rounded border border-gray-300 bg-gray-100 focus:ring-2 dark:border-gray-600 dark:bg-gray-700",color:{default:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-gray-800 dark:focus:ring-cyan-600",dark:"text-gray-800 focus:ring-gray-800 dark:ring-offset-gray-800 dark:focus:ring-gray-800",failure:"text-red-900 focus:ring-red-900 dark:ring-offset-red-900 dark:focus:ring-red-900",gray:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",info:"text-cyan-800 focus:ring-cyan-800 dark:ring-offset-gray-800 dark:focus:ring-cyan-800",light:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",purple:"text-purple-600 focus:ring-purple-600 dark:ring-offset-purple-600 dark:focus:ring-purple-600",success:"text-green-800 focus:ring-green-800 dark:ring-offset-green-800 dark:focus:ring-green-800",warning:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400",blue:"text-blue-700 focus:ring-blue-600 dark:ring-offset-blue-700 dark:focus:ring-blue-700",cyan:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-cyan-600 dark:focus:ring-cyan-600",green:"text-green-600 focus:ring-green-600 dark:ring-offset-green-600 dark:focus:ring-green-600",indigo:"text-indigo-700 focus:ring-indigo-700 dark:ring-offset-indigo-700 dark:focus:ring-indigo-700",lime:"text-lime-700 focus:ring-lime-700 dark:ring-offset-lime-700 dark:focus:ring-lime-700",pink:"text-pink-600 focus:ring-pink-600 dark:ring-offset-pink-600 dark:focus:ring-pink-600",red:"text-red-600 focus:ring-red-600 dark:ring-offset-red-600 dark:focus:ring-red-600",teal:"text-teal-600 focus:ring-teal-600 dark:ring-offset-teal-600 dark:focus:ring-teal-600",yellow:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400"}}},g_e={button:{base:"inline-flex w-full items-center justify-center rounded-lg bg-blue-700 px-5 py-3 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",label:"text-center text-sm font-medium text-white sm:w-auto"},withIcon:{base:"absolute end-2 top-1/2 inline-flex -translate-y-1/2 items-center justify-center rounded-lg p-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800",icon:{defaultIcon:"h-4 w-4",successIcon:"h-4 w-4 text-blue-700 dark:text-blue-500"}},withIconText:{base:"absolute end-2.5 top-1/2 inline-flex -translate-y-1/2 items-center justify-center rounded-lg border border-gray-200 bg-white px-2.5 py-2 text-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700",icon:{defaultIcon:"me-1.5 h-3 w-3",successIcon:"me-1.5 h-3 w-3 text-blue-700 dark:text-blue-500"},label:{base:"inline-flex items-center",defaultText:"text-xs font-semibold",successText:"text-xs font-semibold text-blue-700 dark:text-blue-500"}}},y_e={root:{base:"rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700",icon:"h-5 w-5"}},v_e={root:{base:"relative"},popup:{root:{base:"absolute top-10 z-50 block pt-2",inline:"relative top-0 z-auto",inner:"inline-block rounded-lg bg-white p-4 shadow-lg dark:bg-gray-700"},header:{base:"",title:"px-2 py-3 text-center font-semibold text-gray-900 dark:text-white",selectors:{base:"mb-2 flex justify-between",button:{base:"rounded-lg bg-white px-5 py-2.5 text-sm font-semibold text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",prev:"",next:"",view:""}}},view:{base:"p-1"},footer:{base:"mt-2 flex space-x-2",button:{base:"w-full rounded-lg px-5 py-2 text-center text-sm font-medium focus:ring-4 focus:ring-cyan-300",today:"bg-cyan-700 text-white hover:bg-cyan-800 dark:bg-cyan-600 dark:hover:bg-cyan-700",clear:"border border-gray-300 bg-white text-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600"}}},views:{days:{header:{base:"mb-1 grid grid-cols-7",title:"h-6 text-center text-sm font-medium leading-6 text-gray-500 dark:text-gray-400"},items:{base:"grid w-64 grid-cols-7",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},months:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},years:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},decades:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}}}},b_e={root:{base:"fixed z-40 overflow-y-auto bg-white p-4 transition-transform dark:bg-gray-800",backdrop:"fixed inset-0 z-30 bg-gray-900/50 dark:bg-gray-900/80",edge:"bottom-16",position:{top:{on:"left-0 right-0 top-0 w-full transform-none",off:"left-0 right-0 top-0 w-full -translate-y-full"},right:{on:"right-0 top-0 h-screen w-80 transform-none",off:"right-0 top-0 h-screen w-80 translate-x-full"},bottom:{on:"bottom-0 left-0 right-0 w-full transform-none",off:"bottom-0 left-0 right-0 w-full translate-y-full"},left:{on:"left-0 top-0 h-screen w-80 transform-none",off:"left-0 top-0 h-screen w-80 -translate-x-full"}}},header:{inner:{closeButton:"absolute end-2.5 top-2.5 flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",closeIcon:"h-4 w-4",titleIcon:"me-2.5 h-4 w-4",titleText:"mb-4 inline-flex items-center text-base font-semibold text-gray-500 dark:text-gray-400"},collapsed:{on:"hidden",off:"block"}},items:{base:""}},Du={arrowIcon:"ml-2 h-4 w-4",content:"py-1 focus:outline-none",floating:{animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"z-10 w-fit divide-y divide-gray-100 rounded shadow focus:outline-none",content:"py-1 text-sm text-gray-700 dark:text-gray-200",divider:"my-1 h-px bg-gray-100 dark:bg-gray-600",header:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200",hidden:"invisible opacity-0",item:{container:"",base:"flex w-full cursor-pointer items-center justify-start px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:bg-gray-600 dark:focus:text-white",icon:"mr-2 h-4 w-4"},style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},target:"w-fit"},inlineWrapper:"flex items-center"},w_e={root:{base:"flex"},field:{base:"relative w-full",input:{base:"block w-full overflow-hidden rounded-lg border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"sm:text-xs",md:"text-sm",lg:"sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},E_e={input:{default:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-gray-300 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-gray-300 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"}},success:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-green-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:bg-gray-700 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-green-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:bg-gray-700 dark:text-white dark:focus:border-green-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-green-600 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none rounded-lg border border-green-600 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-green-600 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none border-0 border-b-2 border-green-600 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500"}},error:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-red-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:bg-gray-700 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-red-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:bg-gray-700 dark:text-white dark:focus:border-red-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-red-600 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none rounded-lg border border-red-600 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-red-600 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none border-0 border-b-2 border-red-600 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500"}}},label:{default:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"}},success:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-green-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-green-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-green-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-green-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-green-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-green-500"}},error:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-red-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-red-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-red-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-red-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-red-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-red-500"}}},helperText:{default:"mt-2 text-xs text-gray-600 dark:text-gray-400",success:"mt-2 text-xs text-green-600 dark:text-green-400",error:"mt-2 text-xs text-red-600 dark:text-red-400"}},__e={root:{base:"w-full rounded-lg bg-white shadow dark:bg-gray-800 md:flex md:items-center md:justify-between",container:"w-full p-6",bgDark:"bg-gray-800"},groupLink:{base:"flex flex-wrap text-sm text-gray-500 dark:text-white",link:{base:"me-4 last:mr-0 md:mr-6",href:"hover:underline"},col:"flex-col space-y-4"},icon:{base:"text-gray-500 dark:hover:text-white",size:"h-5 w-5"},title:{base:"mb-6 text-sm font-semibold uppercase text-gray-500 dark:text-white"},divider:{base:"my-6 w-full border-gray-200 dark:border-gray-700 sm:mx-auto lg:my-8"},copyright:{base:"text-sm text-gray-500 dark:text-gray-400 sm:text-center",href:"ml-1 hover:underline",span:"ml-1"},brand:{base:"mb-4 flex items-center sm:mb-0",img:"mr-3 h-8",span:"self-center whitespace-nowrap text-2xl font-semibold text-gray-800 dark:text-white"}},S_e={root:{base:"mt-2 text-sm",colors:{gray:"text-gray-500 dark:text-gray-400",info:"text-cyan-700 dark:text-cyan-800",success:"text-green-600 dark:text-green-500",failure:"text-red-600 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600"}}},T_e={root:{base:"my-8 h-px border-0 bg-gray-200 dark:bg-gray-700"},trimmed:{base:"mx-auto my-4 h-1 w-48 rounded border-0 bg-gray-100 dark:bg-gray-700 md:my-10"},icon:{base:"inline-flex w-full items-center justify-center",hrLine:"my-8 h-1 w-64 rounded border-0 bg-gray-200 dark:bg-gray-700",icon:{base:"absolute left-1/2 -translate-x-1/2 bg-white px-4 dark:bg-gray-900",icon:"h-4 w-4 text-gray-700 dark:text-gray-300"}},text:{base:"inline-flex w-full items-center justify-center",hrLine:"my-8 h-px w-64 border-0 bg-gray-200 dark:bg-gray-700",text:"absolute left-1/2 -translate-x-1/2 bg-white px-3 font-medium text-gray-900 dark:bg-gray-900 dark:text-white"},square:{base:"mx-auto my-8 h-8 w-8 rounded border-0 bg-gray-200 dark:bg-gray-700 md:my-12"}},C_e={root:{base:"rounded-lg border border-gray-200 bg-gray-100 px-2 py-1.5 text-xs font-semibold text-gray-800 dark:border-gray-500 dark:bg-gray-600 dark:text-gray-100",icon:"inline-block"}},x_e={root:{base:"text-sm font-medium",disabled:"opacity-50",colors:{default:"text-gray-900 dark:text-white",info:"text-cyan-500 dark:text-cyan-600",failure:"text-red-700 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600",success:"text-green-700 dark:text-green-500"}}},R_e={root:{base:"list-inside space-y-1 text-gray-500 dark:text-gray-400",ordered:{off:"list-disc",on:"list-decimal"},horizontal:"flex list-none flex-wrap items-center justify-center space-x-4 space-y-0",unstyled:"list-none",nested:"mt-2 ps-5"},item:{withIcon:{off:"",on:"flex items-center"},icon:"me-2 h-3.5 w-3.5 flex-shrink-0"}},I_e={root:{base:"list-none rounded-lg border border-gray-200 bg-white text-left text-sm font-medium text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},item:{base:"[&>*]:first:rounded-t-lg [&>*]:last:rounded-b-lg [&>*]:last:border-b-0",link:{base:"flex w-full items-center border-b border-gray-200 px-4 py-2 dark:border-gray-600",active:{off:"hover:bg-gray-100 hover:text-cyan-700 focus:text-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:text-white dark:focus:ring-gray-500",on:"bg-cyan-700 text-white dark:bg-gray-800"},disabled:{off:"",on:"cursor-not-allowed bg-gray-100 text-gray-900 hover:bg-gray-100 hover:text-gray-900 focus:text-gray-900"},href:{off:"",on:""},icon:"mr-2 h-4 w-4 fill-current"}}},a_={root:{base:"bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"block py-2 pl-3 pr-4 md:p-0",active:{on:"bg-cyan-700 text-white dark:text-white md:bg-transparent md:text-cyan-700",off:"border-b border-gray-100 text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-cyan-700 md:dark:hover:bg-transparent md:dark:hover:text-white"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},N_e={...a_,dropdown:{base:"",toggle:{...Du,floating:{...Du.floating,base:le(Du.floating.base,"mt-2 block"),content:le(Du.floating.content,"text-gray-500 dark:text-gray-400"),style:{...Du.floating.style,auto:le(Du.floating.style.auto,"text-gray-500 dark:text-gray-400")}},inlineWrapper:le(Du.inlineWrapper,"flex w-full items-center justify-between")}},dropdownToggle:{base:le(a_.link.base,a_.link.active.off,"flex w-full items-center justify-between")}},A_e={root:{base:"fixed inset-x-0 top-0 z-50 h-screen overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900 bg-opacity-50 dark:bg-opacity-80",off:"hidden"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},content:{base:"relative h-full w-full p-4 md:h-auto",inner:"relative flex max-h-[90dvh] flex-col rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"flex-1 overflow-auto p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t border-b p-5 dark:border-gray-600",popup:"border-b-0 p-2",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"}},O_e={base:"",layout:{table:{base:"text-sm text-gray-700 dark:text-gray-400",span:"font-semibold text-gray-900 dark:text-white"}},pages:{base:"xs:mt-0 mt-2 inline-flex items-center -space-x-px",showIcon:"inline-flex",previous:{base:"ml-0 rounded-l-lg border border-gray-300 bg-white px-3 py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",icon:"h-5 w-5"},next:{base:"rounded-r-lg border border-gray-300 bg-white px-3 py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",icon:"h-5 w-5"},selector:{base:"w-12 border border-gray-300 bg-white py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",active:"bg-cyan-50 text-cyan-600 hover:bg-cyan-100 hover:text-cyan-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white",disabled:"cursor-not-allowed opacity-50"}}},k_e={base:"absolute z-20 inline-block w-max max-w-[100vw] bg-white outline-none border border-gray-200 rounded-lg shadow-sm dark:border-gray-600 dark:bg-gray-800",content:"z-10 overflow-hidden rounded-[7px]",arrow:{base:"absolute h-2 w-2 z-0 rotate-45 mix-blend-lighten bg-white border border-gray-200 dark:border-gray-600 dark:bg-gray-800 dark:mix-blend-color",placement:"-4px"}},P_e={base:"w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",label:"mb-1 flex justify-between font-medium dark:text-white",bar:"space-x-2 rounded-full text-center font-medium leading-none text-cyan-300 dark:text-cyan-100",color:{dark:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600",red:"bg-red-600 dark:bg-red-500",green:"bg-green-600 dark:bg-green-500",yellow:"bg-yellow-400",indigo:"bg-indigo-600 dark:bg-indigo-500",purple:"bg-purple-600 dark:bg-purple-500",cyan:"bg-cyan-600",gray:"bg-gray-500",lime:"bg-lime-600",pink:"bg-pink-500",teal:"bg-teal-600"},size:{sm:"h-1.5",md:"h-2.5",lg:"h-4",xl:"h-6"}},D_e={root:{base:"h-4 w-4 border border-gray-300 text-cyan-600 focus:ring-2 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:bg-cyan-600 dark:focus:ring-cyan-600"}},L_e={root:{base:"flex"},field:{base:"relative w-full",input:{base:"w-full cursor-pointer appearance-none rounded-lg bg-gray-200 dark:bg-gray-700",sizes:{sm:"h-1",md:"h-2",lg:"h-3"}}}},j_e={root:{base:"flex items-center"},star:{empty:"text-gray-300 dark:text-gray-500",filled:"text-yellow-400",sizes:{sm:"h-5 w-5",md:"h-7 w-7",lg:"h-10 w-10"}}},M_e={base:"flex items-center",label:"text-sm font-medium text-cyan-600 dark:text-cyan-500",progress:{base:"mx-4 h-5 w-2/4 rounded bg-gray-200 dark:bg-gray-700",fill:"h-5 rounded bg-yellow-400",label:"text-sm font-medium text-cyan-600 dark:text-cyan-500"}},U_e={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},F_e={root:{base:"h-full",collapsed:{on:"w-16",off:"w-64"},inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-gray-50 px-3 py-4 dark:bg-gray-800"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:{base:"h-6 w-6 transition delay-0 ease-in-out",open:{on:"rotate-180",off:""}}},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg bg-gray-100 p-4 dark:bg-gray-700",color:{blue:"bg-cyan-50 dark:bg-cyan-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"flex-1 whitespace-nowrap px-3"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:"",listItem:""},items:{base:""},itemGroup:{base:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700"},logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},V_e={base:"inline animate-spin text-gray-200",color:{failure:"fill-red-600",gray:"fill-gray-600",info:"fill-cyan-600",pink:"fill-pink-600",purple:"fill-purple-600",success:"fill-green-500",warning:"fill-yellow-400"},light:{off:{base:"dark:text-gray-600",color:{failure:"",gray:"dark:fill-gray-300",info:"",pink:"",purple:"",success:"",warning:""}},on:{base:"",color:{failure:"",gray:"",info:"",pink:"",purple:"",success:"",warning:""}}},size:{xs:"h-3 w-3",sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-10 w-10"}},B_e={root:{base:"w-full text-left text-sm text-gray-500 dark:text-gray-400",shadow:"absolute left-0 top-0 -z-10 h-full w-full rounded-lg bg-white drop-shadow-md dark:bg-black",wrapper:"relative"},body:{base:"group/body",cell:{base:"px-6 py-4 group-first/body:group-first/row:first:rounded-tl-lg group-first/body:group-first/row:last:rounded-tr-lg group-last/body:group-last/row:first:rounded-bl-lg group-last/body:group-last/row:last:rounded-br-lg"}},head:{base:"group/head text-xs uppercase text-gray-700 dark:text-gray-400",cell:{base:"bg-gray-50 px-6 py-3 group-first/head:first:rounded-tl-lg group-first/head:last:rounded-tr-lg dark:bg-gray-700"}},row:{base:"group/row",hovered:"hover:bg-gray-50 dark:hover:bg-gray-600",striped:"odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700"}},$_e={base:"flex flex-col gap-2",tablist:{base:"flex text-center",variant:{default:"flex-wrap border-b border-gray-200 dark:border-gray-700",underline:"-mb-px flex-wrap border-b border-gray-200 dark:border-gray-700",pills:"flex-wrap space-x-2 text-sm font-medium text-gray-500 dark:text-gray-400",fullWidth:"grid w-full grid-flow-col divide-x divide-gray-200 rounded-none text-sm font-medium shadow dark:divide-gray-700 dark:text-gray-400"},tabitem:{base:"flex items-center justify-center rounded-t-lg p-4 text-sm font-medium first:ml-0 focus:outline-none focus:ring-4 focus:ring-cyan-300 disabled:cursor-not-allowed disabled:text-gray-400 disabled:dark:text-gray-500",variant:{default:{base:"rounded-t-lg",active:{on:"bg-gray-100 text-cyan-600 dark:bg-gray-800 dark:text-cyan-500",off:"text-gray-500 hover:bg-gray-50 hover:text-gray-600 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300"}},underline:{base:"rounded-t-lg",active:{on:"active rounded-t-lg border-b-2 border-cyan-600 text-cyan-600 dark:border-cyan-500 dark:text-cyan-500",off:"border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"}},pills:{base:"",active:{on:"rounded-lg bg-cyan-600 text-white",off:"rounded-lg hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-white"}},fullWidth:{base:"ml-0 flex w-full rounded-none first:ml-0",active:{on:"active rounded-none bg-gray-100 p-4 text-gray-900 dark:bg-gray-700 dark:text-white",off:"rounded-none bg-white hover:bg-gray-50 hover:text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-white"}}},icon:"mr-2 h-5 w-5"}},tabitemcontainer:{base:"",variant:{default:"",underline:"",pills:"",fullWidth:""}},tabpanel:"py-3"},H_e={base:"block w-full rounded-lg border text-sm disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}},z_e={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},G_e={root:{direction:{horizontal:"sm:flex",vertical:"relative border-l border-gray-200 dark:border-gray-700"}},item:{root:{horizontal:"relative mb-6 sm:mb-0",vertical:"mb-10 ml-6"},content:{root:{base:"",horizontal:"mt-3 sm:pr-8",vertical:""},body:{base:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400"},time:{base:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},title:{base:"text-lg font-semibold text-gray-900 dark:text-white"}},point:{horizontal:"flex items-center",line:"hidden h-0.5 w-full bg-gray-200 dark:bg-gray-700 sm:flex",marker:{base:{horizontal:"absolute -left-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700",vertical:"absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700"},icon:{base:"h-3 w-3 text-cyan-600 dark:text-cyan-300",wrapper:"absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-cyan-200 ring-8 ring-white dark:bg-cyan-900 dark:ring-gray-900"}},vertical:""}}},W_e={root:{base:"flex w-full max-w-xs items-center rounded-lg bg-white p-4 text-gray-500 shadow dark:bg-gray-800 dark:text-gray-400",closed:"opacity-0 ease-out"},toggle:{base:"-m-1.5 ml-auto inline-flex h-8 w-8 rounded-lg bg-white p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-900 focus:ring-2 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-500 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5 shrink-0"}},K_e={root:{base:"group flex rounded-lg focus:outline-none",active:{on:"cursor-pointer",off:"cursor-not-allowed opacity-50"},label:"ms-3 mt-0.5 text-start text-sm font-medium text-gray-900 dark:text-gray-300"},toggle:{base:"relative rounded-full border after:absolute after:rounded-full after:bg-white after:transition-all group-focus:ring-4 group-focus:ring-cyan-500/25",checked:{on:"after:translate-x-full after:border-white rtl:after:-translate-x-full",off:"border-gray-200 bg-gray-200 dark:border-gray-600 dark:bg-gray-700",color:{blue:"border-cyan-700 bg-cyan-700",dark:"bg-dark-700 border-dark-900",failure:"border-red-900 bg-red-700",gray:"border-gray-600 bg-gray-500",green:"border-green-700 bg-green-600",light:"bg-light-700 border-light-900",red:"border-red-900 bg-red-700",purple:"border-purple-900 bg-purple-700",success:"border-green-500 bg-green-500",yellow:"border-yellow-400 bg-yellow-400",warning:"border-yellow-600 bg-yellow-600",cyan:"border-cyan-500 bg-cyan-500",lime:"border-lime-400 bg-lime-400",indigo:"border-indigo-400 bg-indigo-400",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4",info:"border-cyan-600 bg-cyan-600",pink:"border-pink-600 bg-pink-600"}},sizes:{sm:"h-5 w-9 min-w-9 after:left-px after:top-px after:h-4 after:w-4 rtl:after:right-px",md:"h-6 w-11 min-w-11 after:left-px after:top-px after:h-5 after:w-5 rtl:after:right-px",lg:"h-7 w-14 min-w-14 after:left-1 after:top-0.5 after:h-6 after:w-6 rtl:after:right-1"}}},q_e={target:"w-fit",animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"absolute z-10 inline-block rounded-lg px-3 py-2 text-sm font-medium shadow-sm",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},content:"relative z-20"},Y_e={accordion:a_e,alert:o_e,avatar:s_e,badge:l_e,blockquote:c_e,breadcrumb:u_e,button:d_e,buttonGroup:h_e,card:f_e,carousel:p_e,checkbox:m_e,clipboard:g_e,datepicker:v_e,darkThemeToggle:y_e,drawer:b_e,dropdown:Du,fileInput:w_e,floatingLabel:E_e,footer:__e,helperText:S_e,hr:T_e,kbd:C_e,label:x_e,listGroup:I_e,list:R_e,megaMenu:N_e,modal:A_e,navbar:a_,pagination:O_e,popover:k_e,progress:P_e,radio:D_e,rangeSlider:L_e,rating:j_e,ratingAdvanced:M_e,select:U_e,textInput:z_e,textarea:H_e,toggleSwitch:K_e,sidebar:F_e,spinner:V_e,table:B_e,tabs:$_e,timeline:G_e,toast:W_e,tooltip:q_e},X_e={theme:mv(Y_e)};function ut(){return mv(X_e.theme)}const ZY=T.createContext(void 0);function eX(){const e=T.useContext(ZY);if(!e)throw new Error("useAccordionContext should be used within the AccordionPanelContext provider!");return e}const tX=({children:e,className:t,theme:r={},...n})=>{const{isOpen:i}=eX(),a=Pe(ut().accordion.content,r);return d.jsx("div",{className:le(a.base,t),"data-testid":"flowbite-accordion-content",hidden:!i,...n,children:e})},rX=({children:e,...t})=>{const{alwaysOpen:r}=t,[n,i]=T.useState(t.isOpen),a=r?{...t,isOpen:n,setOpen:()=>i(!n)}:t;return d.jsx(ZY.Provider,{value:a,children:e})},nX=({as:e="h2",children:t,className:r,theme:n={},...i})=>{const{arrowIcon:a,flush:o,isOpen:s,setOpen:l}=eX(),c=()=>typeof l<"u"&&l(),u=Pe(ut().accordion.title,n);return d.jsxs("button",{className:le(u.base,u.flush[o?"on":"off"],u.open[s?"on":"off"],r),onClick:c,type:"button",...i,children:[d.jsx(e,{className:u.heading,"data-testid":"flowbite-accordion-heading",children:t}),a&&d.jsx(a,{"aria-hidden":!0,className:le(u.arrow.base,u.arrow.open[s?"on":"off"]),"data-testid":"flowbite-accordion-arrow"})]})},iX=({alwaysOpen:e=!1,arrowIcon:t=GY,children:r,flush:n=!1,collapseAll:i=!1,className:a,theme:o={},...s})=>{const[l,c]=T.useState(i?-1:0),u=T.useMemo(()=>T.Children.map(r,(f,p)=>T.cloneElement(f,{alwaysOpen:e,arrowIcon:t,flush:n,isOpen:l===p,setOpen:()=>c(l===p?-1:p)})),[e,t,r,n,l]),h=Pe(ut().accordion.root,o);return d.jsx("div",{className:le(h.base,h.flush[n?"on":"off"],a),"data-testid":"flowbite-accordion",...s,children:u})};iX.displayName="Accordion";rX.displayName="Accordion.Panel";nX.displayName="Accordion.Title";tX.displayName="Accordion.Content";Object.assign(iX,{Panel:rX,Title:nX,Content:tX});const aX=({children:e,className:t,theme:r={},...n})=>{const i=Pe(ut().avatar.group,r);return d.jsx("div",{"data-testid":"avatar-group-element",className:le(i.base,t),...n,children:e})};aX.displayName="Avatar.Group";const oX=({className:e,href:t,theme:r={},total:n,...i})=>{const a=Pe(ut().avatar.groupCounter,r);return d.jsxs("a",{href:t,className:le(a.base,e),...i,children:["+",n]})};oX.displayName="Avatar.GroupCounter";const sX=({alt:e="",bordered:t=!1,children:r,className:n,color:i="light",img:a,placeholderInitials:o="",rounded:s=!1,size:l="md",stacked:c=!1,status:u,statusPosition:h="top-left",theme:f={},...p})=>{const m=Pe(ut().avatar,f),g=le(m.root.img.base,t&&m.root.bordered,t&&m.root.color[i],s&&m.root.rounded,c&&m.root.stacked,m.root.img.on,m.root.size[l]),y={className:le(g,m.root.img.on),"data-testid":"flowbite-avatar-img"};return d.jsxs("div",{className:le(m.root.base,n),"data-testid":"flowbite-avatar",...p,children:[d.jsxs("div",{className:"relative",children:[a?typeof a=="string"?d.jsx("img",{alt:e,src:a,...y}):a({alt:e,...y}):o?d.jsx("div",{className:le(m.root.img.off,m.root.initials.base,c&&m.root.stacked,t&&m.root.bordered,t&&m.root.color[i],m.root.size[l],s&&m.root.rounded),"data-testid":"flowbite-avatar-initials-placeholder",children:d.jsx("span",{className:le(m.root.initials.text),"data-testid":"flowbite-avatar-initials-placeholder-text",children:o})}):d.jsx("div",{className:le(g,m.root.img.off),"data-testid":"flowbite-avatar-img",children:d.jsx("svg",{className:m.root.img.placeholder,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),u&&d.jsx("span",{"data-testid":"flowbite-avatar-status",className:le(m.root.status.base,m.root.status[u],m.root.statusPosition[h])})]}),r&&d.jsx("div",{children:r})]})};sX.displayName="Avatar";Object.assign(sX,{Group:aX,Counter:oX});const lX=({children:e,color:t="info",href:r,icon:n,size:i="xs",className:a,theme:o={},...s})=>{const l=Pe(ut().badge,o),c=()=>d.jsxs("span",{className:le(l.root.base,l.root.color[t],l.root.size[i],l.icon[n?"on":"off"],a),"data-testid":"flowbite-badge",...s,children:[n&&d.jsx(n,{"aria-hidden":!0,className:l.icon.size[i],"data-testid":"flowbite-badge-icon"}),e&&d.jsx("span",{children:e})]});return r?d.jsx("a",{className:l.root.href,href:r,children:d.jsx(c,{})}):d.jsx(c,{})};lX.displayName="Badge";const cX=({className:e,color:t="info",light:r,size:n="md",theme:i={},...a})=>{const o=Pe(ut().spinner,i);return d.jsx("span",{role:"status",...a,children:d.jsxs("svg",{fill:"none",viewBox:"0 0 100 101",className:le(o.base,o.color[t],o.light[r?"on":"off"].base,o.light[r?"on":"off"].color[t],o.size[n],e),children:[d.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),d.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})})};cX.displayName="Spinner";const bL=T.forwardRef(({children:e,as:t,href:r,type:n="button",...i},a)=>{const o=t||(r?"a":"button");return T.createElement(o,{ref:a,href:r,type:n,...i},e)});bL.displayName="ButtonBaseComponent";const uX=(e,t,r)=>T.Children.map(e,(n,i)=>{if(T.isValidElement(n)){const a=n.type==wL?{positionInGroup:J_e(i,T.Children.count(e))}:{};return n.props.children?T.cloneElement(n,{...n.props,children:uX(n.props.children,t,r),...a}):T.cloneElement(n,{outline:t,pill:r,...a})}return n}),J_e=(e,t)=>e===0?"start":e===t-1?"end":"middle",dX=({children:e,className:t,outline:r,pill:n,theme:i={},...a})=>{const o=T.useMemo(()=>uX(e,r,n),[e,r,n]),s=Pe(ut().buttonGroup,i);return d.jsx("div",{className:le(s.base,t),role:"group",...a,children:o})};dX.displayName="Button.Group";const hX=T.forwardRef(({children:e,className:t,color:r="info",disabled:n,fullSized:i,isProcessing:a=!1,processingLabel:o="Loading...",processingSpinner:s,gradientDuoTone:l,gradientMonochrome:c,label:u,outline:h=!1,pill:f=!1,positionInGroup:p="none",size:m="md",theme:g={},...y},v)=>{const{buttonGroup:b,button:E}=ut(),S=Pe(E,g),I=y;return d.jsx(bL,{ref:v,disabled:n,className:le(S.base,n&&S.disabled,!l&&!c&&S.color[r],l&&!c&&S.gradientDuoTone[l],!l&&c&&S.gradient[c],h&&(S.outline.color[r]??S.outline.color.default),S.pill[f?"on":"off"],i&&S.fullSized,b.position[p],t),...I,children:d.jsx("span",{className:le(S.inner.base,S.outline[h?"on":"off"],S.outline.pill[h&&f?"on":"off"],S.size[m],h&&!S.outline.color[r]&&S.inner.outline,a&&S.isProcessing,a&&S.inner.isProcessingPadding[m],S.inner.position[p]),children:d.jsxs(d.Fragment,{children:[a&&d.jsx("span",{className:le(S.spinnerSlot,S.spinnerLeftPosition[m]),children:s||d.jsx(cX,{size:m})}),typeof e<"u"?e:d.jsx("span",{"data-testid":"flowbite-button-label",className:le(S.label),children:a?o:u})]})})})});hX.displayName="Button";const wL=Object.assign(hX,{Group:dX}),fX=({children:e,...t})=>{const r=n=>{const a=n.target.closest('[role="banner"]');a==null||a.remove()};return d.jsx(wL,{onClick:r,...t,children:e})};fX.displayName="Banner.CollapseButton";const pX=({children:e,...t})=>d.jsx("div",{"data-testid":"flowbite-banner",role:"banner",tabIndex:-1,...t,children:e});pX.displayName="Banner";Object.assign(pX,{CollapseButton:fX});const mX=T.forwardRef(({children:e,className:t,href:r,icon:n,theme:i={},...a},o)=>{const s=typeof r<"u",l=s?"a":"span",c=Pe(ut().breadcrumb.item,i);return d.jsxs("li",{className:le(c.base,t),...a,children:[d.jsx(KY,{"aria-hidden":!0,className:c.chevron,"data-testid":"flowbite-breadcrumb-separator"}),d.jsxs(l,{ref:o,className:c.href[s?"on":"off"],"data-testid":"flowbite-breadcrumb-item",href:r,children:[n&&d.jsx(n,{"aria-hidden":!0,className:c.icon}),e]})]})});mX.displayName="Breadcrumb.Item";const gX=({children:e,className:t,theme:r={},...n})=>{const i=Pe(ut().breadcrumb.root,r);return d.jsx("nav",{"aria-label":"Breadcrumb",className:le(i.base,t),...n,children:d.jsx("ol",{className:i.list,children:e})})};gX.displayName="Breadcrumb";Object.assign(gX,{Item:mX});var yX={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var a="",o=0;o<arguments.length;o++){var s=arguments[o];s&&(a=i(a,n(s)))}return a}function n(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var s in a)t.call(a,s)&&a[s]&&(o=i(o,s));return o}function i(a,o){return o?a?a+" "+o:a+o:a}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(yX);var Q_e=yX.exports;const Z_e=es(Q_e);var EL={exports:{}};function vX(e,t=100,r={}){if(typeof e!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof e}\`.`);if(t<0)throw new RangeError("`wait` must not be negative.");const{immediate:n}=typeof r=="boolean"?{immediate:r}:r;let i,a,o,s,l;function c(){const f=i,p=a;return i=void 0,a=void 0,l=e.apply(f,p),l}function u(){const f=Date.now()-s;f<t&&f>=0?o=setTimeout(u,t-f):(o=void 0,n||(l=c()))}const h=function(...f){if(i&&this!==i)throw new Error("Debounced method called with different contexts.");i=this,a=f,s=Date.now();const p=n&&!o;return o||(o=setTimeout(u,t)),p&&(l=c()),l};return h.clear=()=>{o&&(clearTimeout(o),o=void 0)},h.flush=()=>{o&&h.trigger()},h.trigger=()=>{l=c(),h.clear()},h}EL.exports.debounce=vX;EL.exports=vX;var eSe=EL.exports;const tSe=es(eSe);var rSe=Object.defineProperty,nSe=(e,t,r)=>t in e?rSe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Li=(e,t,r)=>nSe(e,typeof t!="symbol"?t+"":t,r);const iSe=300,aSe=0;class oSe extends T.PureComponent{constructor(t){super(t),Li(this,"container"),Li(this,"scrolling"),Li(this,"started"),Li(this,"pressed"),Li(this,"isMobile",!1),Li(this,"internal"),Li(this,"scrollLeft"),Li(this,"scrollTop"),Li(this,"clientX"),Li(this,"clientY"),Li(this,"onEndScroll",()=>{this.scrolling=!1,!this.pressed&&this.started&&this.processEnd()}),Li(this,"onScroll",()=>{const r=this.container.current;(r.scrollLeft!==this.scrollLeft||r.scrollTop!==this.scrollTop)&&(this.scrolling=!0,this.processScroll(),this.onEndScroll())}),Li(this,"onTouchStart",r=>{const{nativeMobileScroll:n}=this.props;if(this.isDraggable(r.target))if(this.internal=!0,n&&this.scrolling)this.pressed=!0;else{const i=r.touches[0];this.processClick(i.clientX,i.clientY),!n&&this.props.stopPropagation&&r.stopPropagation()}}),Li(this,"onTouchEnd",()=>{const{nativeMobileScroll:r}=this.props;this.pressed&&(this.started&&(!this.scrolling||!r)?this.processEnd():this.pressed=!1,this.forceUpdate())}),Li(this,"onTouchMove",r=>{const{nativeMobileScroll:n}=this.props;if(this.pressed&&(!n||!this.isMobile)){const i=r.touches[0];i&&this.processMove(i.clientX,i.clientY),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation()}}),Li(this,"onMouseDown",r=>{var n,i;this.isDraggable(r.target)&&this.isScrollable()&&(this.internal=!0,((i=(n=this.props)==null?void 0:n.buttons)==null?void 0:i.indexOf(r.button))!==-1&&(this.processClick(r.clientX,r.clientY),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation()))}),Li(this,"onMouseMove",r=>{this.pressed&&(this.processMove(r.clientX,r.clientY),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation())}),Li(this,"onMouseUp",r=>{this.pressed&&(this.started?this.processEnd():(this.internal=!1,this.pressed=!1,this.forceUpdate(),this.props.onClick&&this.props.onClick(r)),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation())}),this.container=jr.createRef(),this.onEndScroll=tSe(this.onEndScroll,iSe),this.scrolling=!1,this.started=!1,this.pressed=!1,this.internal=!1,this.getRef=this.getRef.bind(this)}componentDidMount(){const{nativeMobileScroll:t}=this.props,r=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),r.addEventListener("touchstart",this.onTouchStart,{passive:!1}),r.addEventListener("mousedown",this.onMouseDown,{passive:!1}),t&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())}componentWillUnmount(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)}getElement(){return this.container.current}isMobileDevice(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1}isDraggable(t){const r=this.props.ignoreElements;if(r){const n=t.closest(r);return n===null||n.contains(this.getElement())}else return!0}isScrollable(){const t=this.container.current;return t&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)}processClick(t,r){const n=this.container.current;this.scrollLeft=n==null?void 0:n.scrollLeft,this.scrollTop=n==null?void 0:n.scrollTop,this.clientX=t,this.clientY=r,this.pressed=!0}processStart(t=!0){const{onStartScroll:r}=this.props;this.started=!0,t&&document.body.classList.add("cursor-grab"),r&&r({external:!this.internal}),this.forceUpdate()}processScroll(){if(this.started){const{onScroll:t}=this.props;t&&t({external:!this.internal})}else this.processStart(!1)}processMove(t,r){const{horizontal:n,vertical:i,activationDistance:a,onScroll:o}=this.props,s=this.container.current;this.started?(n&&(s.scrollLeft-=t-this.clientX),i&&(s.scrollTop-=r-this.clientY),o&&o({external:!this.internal}),this.clientX=t,this.clientY=r,this.scrollLeft=s.scrollLeft,this.scrollTop=s.scrollTop):(n&&Math.abs(t-this.clientX)>a||i&&Math.abs(r-this.clientY)>a)&&(this.clientX=t,this.clientY=r,this.processStart())}processEnd(){const{onEndScroll:t}=this.props;this.container.current&&t&&t({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("cursor-grab"),this.forceUpdate()}getRef(t){[this.container,this.props.innerRef].forEach(r=>{r&&(typeof r=="function"?r(t):r.current=t)})}render(){const{children:t,draggingClassName:r,className:n,style:i,hideScrollbars:a}=this.props;return d.jsx("div",{className:Z_e(n,this.pressed&&r,{"!scroll-auto [&>*]:pointer-events-none [&>*]:cursor-grab":this.pressed,"overflow-auto":this.isMobile,"overflow-hidden !overflow-x-hidden [overflow:-moz-scrollbars-none] [scrollbar-width:none]":a,"[&::-webkit-scrollbar]:[-webkit-appearance:none !important] [&::-webkit-scrollbar]:!hidden [&::-webkit-scrollbar]:!h-0 [&::-webkit-scrollbar]:!w-0 [&::-webkit-scrollbar]:!bg-transparent":a}),style:i,ref:this.getRef,onScroll:this.onScroll,children:t})}}Li(oSe,"defaultProps",{nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},buttons:[aSe]});const sSe=T.forwardRef(({className:e,color:t="default",theme:r={},...n},i)=>{const a=Pe(ut().checkbox,r);return d.jsx("input",{ref:i,type:"checkbox",className:le(a.root.base,a.root.color[t],e),...n})});sSe.displayName="Checkbox";function LC(){return typeof window<"u"}function Ud(e){return bX(e)?(e.nodeName||"").toLowerCase():"#document"}function mo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function pc(e){var t;return(t=(bX(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function bX(e){return LC()?e instanceof Node||e instanceof mo(e).Node:!1}function ln(e){return LC()?e instanceof Element||e instanceof mo(e).Element:!1}function mi(e){return LC()?e instanceof HTMLElement||e instanceof mo(e).HTMLElement:!1}function $k(e){return!LC()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof mo(e).ShadowRoot}function vb(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=Bs(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function lSe(e){return["table","td","th"].includes(Ud(e))}function jC(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function _L(e){const t=SL(),r=ln(e)?Bs(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function cSe(e){let t=iu(e);for(;mi(t)&&!xd(t);){if(_L(t))return t;if(jC(t))return null;t=iu(t)}return null}function SL(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function xd(e){return["html","body","#document"].includes(Ud(e))}function Bs(e){return mo(e).getComputedStyle(e)}function MC(e){return ln(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function iu(e){if(Ud(e)==="html")return e;const t=e.assignedSlot||e.parentNode||$k(e)&&e.host||pc(e);return $k(t)?t.host:t}function wX(e){const t=iu(e);return xd(t)?e.ownerDocument?e.ownerDocument.body:e.body:mi(t)&&vb(t)?t:wX(t)}function fd(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=wX(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),o=mo(i);if(a){const s=Hk(o);return t.concat(o,o.visualViewport||[],vb(i)?i:[],s&&r?fd(s):[])}return t.concat(i,fd(i,[],r))}function Hk(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function hl(e){let t=e.activeElement;for(;((r=t)==null||(r=r.shadowRoot)==null?void 0:r.activeElement)!=null;){var r;t=t.shadowRoot.activeElement}return t}function hi(e,t){if(!e||!t)return!1;const r=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&$k(r)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function TL(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function EX(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:r,version:n}=t;return r+"/"+n}).join(" "):navigator.userAgent}function _X(e){return e.mozInputSource===0&&e.isTrusted?!0:zk()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function CL(e){return uSe()?!1:!zk()&&e.width===0&&e.height===0||zk()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function xL(){return/apple/i.test(navigator.vendor)}function zk(){const e=/android/i;return e.test(TL())||e.test(EX())}function SX(){return TL().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function uSe(){return EX().includes("jsdom/")}function gv(e,t){const r=["mouse","pen"];return t||r.push("",void 0),r.includes(e)}function dSe(e){return"nativeEvent"in e}function hSe(e){return e.matches("html,body")}function Yi(e){return(e==null?void 0:e.ownerDocument)||document}function oI(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const r=e;return r.target!=null&&t.contains(r.target)}function Vc(e){return"composedPath"in e?e.composedPath()[0]:e.target}const fSe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function RL(e){return mi(e)&&e.matches(fSe)}function la(e){e.preventDefault(),e.stopPropagation()}function TX(e){return e?e.getAttribute("role")==="combobox"&&RL(e):!1}const pSe=["top","right","bottom","left"],b3=["start","end"],w3=pSe.reduce((e,t)=>e.concat(t,t+"-"+b3[0],t+"-"+b3[1]),[]),Mm=Math.min,Vh=Math.max,FS=Math.round,Fp=Math.floor,rc=e=>({x:e,y:e}),mSe={left:"right",right:"left",bottom:"top",top:"bottom"},gSe={start:"end",end:"start"};function Gk(e,t,r){return Vh(e,Mm(t,r))}function _g(e,t){return typeof e=="function"?e(t):e}function au(e){return e.split("-")[0]}function nc(e){return e.split("-")[1]}function CX(e){return e==="x"?"y":"x"}function IL(e){return e==="y"?"height":"width"}function Um(e){return["top","bottom"].includes(au(e))?"y":"x"}function NL(e){return CX(Um(e))}function xX(e,t,r){r===void 0&&(r=!1);const n=nc(e),i=NL(e),a=IL(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=BS(o)),[o,BS(o)]}function ySe(e){const t=BS(e);return[VS(e),t,VS(t)]}function VS(e){return e.replace(/start|end/g,t=>gSe[t])}function vSe(e,t,r){const n=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?a:o;default:return[]}}function bSe(e,t,r,n){const i=nc(e);let a=vSe(au(e),r==="start",n);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(VS)))),a}function BS(e){return e.replace(/left|right|bottom|top/g,t=>mSe[t])}function wSe(e){return{top:0,right:0,bottom:0,left:0,...e}}function RX(e){return typeof e!="number"?wSe(e):{top:e,right:e,bottom:e,left:e}}function $S(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var ESe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],HS=ESe.join(","),IX=typeof Element>"u",Fm=IX?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,zS=!IX&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},GS=function e(t,r){var n;r===void 0&&(r=!0);var i=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),a=i===""||i==="true",o=a||r&&t&&e(t.parentNode);return o},_Se=function(t){var r,n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return n===""||n==="true"},SSe=function(t,r,n){if(GS(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(HS));return r&&Fm.call(t,HS)&&i.unshift(t),i=i.filter(n),i},TSe=function e(t,r,n){for(var i=[],a=Array.from(t);a.length;){var o=a.shift();if(!GS(o,!1))if(o.tagName==="SLOT"){var s=o.assignedElements(),l=s.length?s:o.children,c=e(l,!0,n);n.flatten?i.push.apply(i,c):i.push({scopeParent:o,candidates:c})}else{var u=Fm.call(o,HS);u&&n.filter(o)&&(r||!t.includes(o))&&i.push(o);var h=o.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(o),f=!GS(h,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(o));if(h&&f){var p=e(h===!0?o.children:h.children,!0,n);n.flatten?i.push.apply(i,p):i.push({scopeParent:o,candidates:p})}else a.unshift.apply(a,o.children)}}return i},NX=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},AX=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||_Se(t))&&!NX(t)?0:t.tabIndex},CSe=function(t,r){var n=AX(t);return n<0&&r&&!NX(t)?0:n},xSe=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},OX=function(t){return t.tagName==="INPUT"},RSe=function(t){return OX(t)&&t.type==="hidden"},ISe=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},NSe=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},ASe=function(t){if(!t.name)return!0;var r=t.form||zS(t),n=function(s){return r.querySelectorAll('input[type="radio"][name="'+s+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=n(window.CSS.escape(t.name));else try{i=n(t.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var a=NSe(i,t.form);return!a||a===t},OSe=function(t){return OX(t)&&t.type==="radio"},kSe=function(t){return OSe(t)&&!ASe(t)},PSe=function(t){var r,n=t&&zS(t),i=(r=n)===null||r===void 0?void 0:r.host,a=!1;if(n&&n!==t){var o,s,l;for(a=!!((o=i)!==null&&o!==void 0&&(s=o.ownerDocument)!==null&&s!==void 0&&s.contains(i)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!a&&i;){var c,u,h;n=zS(i),i=(c=n)===null||c===void 0?void 0:c.host,a=!!((u=i)!==null&&u!==void 0&&(h=u.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return a},E3=function(t){var r=t.getBoundingClientRect(),n=r.width,i=r.height;return n===0&&i===0},DSe=function(t,r){var n=r.displayCheck,i=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var a=Fm.call(t,"details>summary:first-of-type"),o=a?t.parentElement:t;if(Fm.call(o,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof i=="function"){for(var s=t;t;){var l=t.parentElement,c=zS(t);if(l&&!l.shadowRoot&&i(l)===!0)return E3(t);t.assignedSlot?t=t.assignedSlot:!l&&c!==t.ownerDocument?t=c.host:t=l}t=s}if(PSe(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return E3(t);return!1},LSe=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var i=r.children.item(n);if(i.tagName==="LEGEND")return Fm.call(r,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}r=r.parentElement}return!1},jSe=function(t,r){return!(r.disabled||GS(r)||RSe(r)||DSe(r,t)||ISe(r)||LSe(r))},Wk=function(t,r){return!(kSe(r)||AX(r)<0||!jSe(t,r))},MSe=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},USe=function e(t){var r=[],n=[];return t.forEach(function(i,a){var o=!!i.scopeParent,s=o?i.scopeParent:i,l=CSe(s,o),c=o?e(i.candidates):s;l===0?o?r.push.apply(r,c):r.push(s):n.push({documentOrder:a,tabIndex:l,item:i,isScope:o,content:c})}),n.sort(xSe).reduce(function(i,a){return a.isScope?i.push.apply(i,a.content):i.push(a.content),i},[]).concat(r)},yv=function(t,r){r=r||{};var n;return r.getShadowRoot?n=TSe([t],r.includeContainer,{filter:Wk.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:MSe}):n=SSe(t,r.includeContainer,Wk.bind(null,r)),USe(n)},FSe=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return Fm.call(t,HS)===!1?!1:Wk(r,t)};function _3(e,t,r){let{reference:n,floating:i}=e;const a=Um(t),o=NL(t),s=IL(o),l=au(t),c=a==="y",u=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,f=n[s]/2-i[s]/2;let p;switch(l){case"top":p={x:u,y:n.y-i.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-i.width,y:h};break;default:p={x:n.x,y:n.y}}switch(nc(t)){case"start":p[o]-=f*(r&&c?-1:1);break;case"end":p[o]+=f*(r&&c?-1:1);break}return p}const VSe=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=r,s=a.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:h}=_3(c,n,l),f=n,p={},m=0;for(let g=0;g<s.length;g++){const{name:y,fn:v}=s[g],{x:b,y:E,data:S,reset:I}=await v({x:u,y:h,initialPlacement:n,placement:f,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:e,floating:t}});u=b??u,h=E??h,p={...p,[y]:{...p[y],...S}},I&&m<=50&&(m++,typeof I=="object"&&(I.placement&&(f=I.placement),I.rects&&(c=I.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):I.rects),{x:u,y:h}=_3(c,f,l)),g=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:p}};async function AL(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:a,rects:o,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=_g(t,e),m=RX(p),y=s[f?h==="floating"?"reference":"floating":h],v=$S(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(y)))==null||r?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),b=h==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),S=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},I=$S(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:b,offsetParent:E,strategy:l}):b);return{top:(v.top-I.top+m.top)/S.y,bottom:(I.bottom-v.bottom+m.bottom)/S.y,left:(v.left-I.left+m.left)/S.x,right:(I.right-v.right+m.right)/S.x}}const BSe=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:a,platform:o,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=_g(e,t)||{};if(c==null)return{};const h=RX(u),f={x:r,y:n},p=NL(i),m=IL(p),g=await o.getDimensions(c),y=p==="y",v=y?"top":"left",b=y?"bottom":"right",E=y?"clientHeight":"clientWidth",S=a.reference[m]+a.reference[p]-f[p]-a.floating[m],I=f[p]-a.reference[p],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let L=N?N[E]:0;(!L||!await(o.isElement==null?void 0:o.isElement(N)))&&(L=s.floating[E]||a.floating[m]);const j=S/2-I/2,z=L/2-g[m]/2-1,A=Mm(h[v],z),V=Mm(h[b],z),G=A,X=L-g[m]-V,$=L/2-g[m]/2+j,B=Gk(G,$,X),K=!l.arrow&&nc(i)!=null&&$!==B&&a.reference[m]/2-($<G?A:V)-g[m]/2<0,P=K?$<G?$-G:$-X:0;return{[p]:f[p]+P,data:{[p]:B,centerOffset:$-B-P,...K&&{alignmentOffset:P}},reset:K}}});function $Se(e,t,r){return(e?[...r.filter(i=>nc(i)===e),...r.filter(i=>nc(i)!==e)]:r.filter(i=>au(i)===i)).filter(i=>e?nc(i)===e||(t?VS(i)!==i:!1):!0)}const HSe=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var r,n,i;const{rects:a,middlewareData:o,placement:s,platform:l,elements:c}=t,{crossAxis:u=!1,alignment:h,allowedPlacements:f=w3,autoAlignment:p=!0,...m}=_g(e,t),g=h!==void 0||f===w3?$Se(h||null,p,f):f,y=await AL(t,m),v=((r=o.autoPlacement)==null?void 0:r.index)||0,b=g[v];if(b==null)return{};const E=xX(b,a,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(s!==b)return{reset:{placement:g[0]}};const S=[y[au(b)],y[E[0]],y[E[1]]],I=[...((n=o.autoPlacement)==null?void 0:n.overflows)||[],{placement:b,overflows:S}],N=g[v+1];if(N)return{data:{index:v+1,overflows:I},reset:{placement:N}};const L=I.map(A=>{const V=nc(A.placement);return[A.placement,V&&u?A.overflows.slice(0,2).reduce((G,X)=>G+X,0):A.overflows[0],A.overflows]}).sort((A,V)=>A[1]-V[1]),z=((i=L.filter(A=>A[2].slice(0,nc(A[0])?2:3).every(V=>V<=0))[0])==null?void 0:i[0])||L[0][0];return z!==s?{data:{index:v+1,overflows:I},reset:{placement:z}}:{}}}},zSe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:a,rects:o,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=_g(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const v=au(i),b=Um(s),E=au(s)===s,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),I=f||(E||!g?[BS(s)]:ySe(s)),N=m!=="none";!f&&N&&I.push(...bSe(s,g,m,S));const L=[s,...I],j=await AL(t,y),z=[];let A=((n=a.flip)==null?void 0:n.overflows)||[];if(u&&z.push(j[v]),h){const $=xX(i,o,S);z.push(j[$[0]],j[$[1]])}if(A=[...A,{placement:i,overflows:z}],!z.every($=>$<=0)){var V,G;const $=(((V=a.flip)==null?void 0:V.index)||0)+1,B=L[$];if(B)return{data:{index:$,overflows:A},reset:{placement:B}};let K=(G=A.filter(P=>P.overflows[0]<=0).sort((P,D)=>P.overflows[1]-D.overflows[1])[0])==null?void 0:G.placement;if(!K)switch(p){case"bestFit":{var X;const P=(X=A.filter(D=>{if(N){const H=Um(D.placement);return H===b||H==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(H=>H>0).reduce((H,x)=>H+x,0)]).sort((D,H)=>D[1]-H[1])[0])==null?void 0:X[0];P&&(K=P);break}case"initialPlacement":K=s;break}if(i!==K)return{reset:{placement:K}}}return{}}}};async function GSe(e,t){const{placement:r,platform:n,elements:i}=e,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=au(r),s=nc(r),l=Um(r)==="y",c=["left","top"].includes(o)?-1:1,u=a&&l?-1:1,h=_g(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return s&&typeof m=="number"&&(p=s==="end"?m*-1:m),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const WSe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:a,placement:o,middlewareData:s}=t,l=await GSe(t,e);return o===((r=s.offset)==null?void 0:r.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:o}}}}},KSe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:y=>{let{x:v,y:b}=y;return{x:v,y:b}}},...l}=_g(e,t),c={x:r,y:n},u=await AL(t,l),h=Um(au(i)),f=CX(h);let p=c[f],m=c[h];if(a){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=p+u[y],E=p-u[v];p=Gk(b,p,E)}if(o){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",b=m+u[y],E=m-u[v];m=Gk(b,m,E)}const g=s.fn({...t,[f]:p,[h]:m});return{...g,data:{x:g.x-r,y:g.y-n}}}}};function kX(e){const t=Bs(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=mi(e),a=i?e.offsetWidth:r,o=i?e.offsetHeight:n,s=FS(r)!==a||FS(n)!==o;return s&&(r=a,n=o),{width:r,height:n,$:s}}function OL(e){return ln(e)?e:e.contextElement}function lm(e){const t=OL(e);if(!mi(t))return rc(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:a}=kX(t);let o=(a?FS(r.width):r.width)/n,s=(a?FS(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const qSe=rc(0);function PX(e){const t=mo(e);return!SL()||!t.visualViewport?qSe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function YSe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==mo(e)?!1:t}function af(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),a=OL(e);let o=rc(1);t&&(n?ln(n)&&(o=lm(n)):o=lm(e));const s=YSe(a,r,n)?PX(a):rc(0);let l=(i.left+s.x)/o.x,c=(i.top+s.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(a){const f=mo(a),p=n&&ln(n)?mo(n):n;let m=f,g=Hk(m);for(;g&&n&&p!==m;){const y=lm(g),v=g.getBoundingClientRect(),b=Bs(g),E=v.left+(g.clientLeft+parseFloat(b.paddingLeft))*y.x,S=v.top+(g.clientTop+parseFloat(b.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,h*=y.y,l+=E,c+=S,m=mo(g),g=Hk(m)}}return $S({width:u,height:h,x:l,y:c})}function kL(e,t){const r=MC(e).scrollLeft;return t?t.left+r:af(pc(e)).left+r}function DX(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-(r?0:kL(e,n)),a=n.top+t.scrollTop;return{x:i,y:a}}function XSe(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const a=i==="fixed",o=pc(n),s=t?jC(t.floating):!1;if(n===o||s&&a)return r;let l={scrollLeft:0,scrollTop:0},c=rc(1);const u=rc(0),h=mi(n);if((h||!h&&!a)&&((Ud(n)!=="body"||vb(o))&&(l=MC(n)),mi(n))){const p=af(n);c=lm(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const f=o&&!h&&!a?DX(o,l,!0):rc(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:r.y*c.y-l.scrollTop*c.y+u.y+f.y}}function JSe(e){return Array.from(e.getClientRects())}function QSe(e){const t=pc(e),r=MC(e),n=e.ownerDocument.body,i=Vh(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=Vh(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+kL(e);const s=-r.scrollTop;return Bs(n).direction==="rtl"&&(o+=Vh(t.clientWidth,n.clientWidth)-i),{width:i,height:a,x:o,y:s}}function ZSe(e,t){const r=mo(e),n=pc(e),i=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;const c=SL();(!c||c&&t==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s,y:l}}function eTe(e,t){const r=af(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,a=mi(e)?lm(e):rc(1),o=e.clientWidth*a.x,s=e.clientHeight*a.y,l=i*a.x,c=n*a.y;return{width:o,height:s,x:l,y:c}}function S3(e,t,r){let n;if(t==="viewport")n=ZSe(e,r);else if(t==="document")n=QSe(pc(e));else if(ln(t))n=eTe(t,r);else{const i=PX(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return $S(n)}function LX(e,t){const r=iu(e);return r===t||!ln(r)||xd(r)?!1:Bs(r).position==="fixed"||LX(r,t)}function tTe(e,t){const r=t.get(e);if(r)return r;let n=fd(e,[],!1).filter(s=>ln(s)&&Ud(s)!=="body"),i=null;const a=Bs(e).position==="fixed";let o=a?iu(e):e;for(;ln(o)&&!xd(o);){const s=Bs(o),l=_L(o);!l&&s.position==="fixed"&&(i=null),(a?!l&&!i:!l&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||vb(o)&&!l&&LX(e,o))?n=n.filter(u=>u!==o):i=s,o=iu(o)}return t.set(e,n),n}function rTe(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const o=[...r==="clippingAncestors"?jC(t)?[]:tTe(t,this._c):[].concat(r),n],s=o[0],l=o.reduce((c,u)=>{const h=S3(t,u,i);return c.top=Vh(h.top,c.top),c.right=Mm(h.right,c.right),c.bottom=Mm(h.bottom,c.bottom),c.left=Vh(h.left,c.left),c},S3(t,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function nTe(e){const{width:t,height:r}=kX(e);return{width:t,height:r}}function iTe(e,t,r){const n=mi(t),i=pc(t),a=r==="fixed",o=af(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const l=rc(0);if(n||!n&&!a)if((Ud(t)!=="body"||vb(i))&&(s=MC(t)),n){const f=af(t,!0,a,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else i&&(l.x=kL(i));const c=i&&!n&&!a?DX(i,s):rc(0),u=o.left+s.scrollLeft-l.x-c.x,h=o.top+s.scrollTop-l.y-c.y;return{x:u,y:h,width:o.width,height:o.height}}function sI(e){return Bs(e).position==="static"}function T3(e,t){if(!mi(e)||Bs(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return pc(e)===r&&(r=r.ownerDocument.body),r}function jX(e,t){const r=mo(e);if(jC(e))return r;if(!mi(e)){let i=iu(e);for(;i&&!xd(i);){if(ln(i)&&!sI(i))return i;i=iu(i)}return r}let n=T3(e,t);for(;n&&lSe(n)&&sI(n);)n=T3(n,t);return n&&xd(n)&&sI(n)&&!_L(n)?r:n||cSe(e)||r}const aTe=async function(e){const t=this.getOffsetParent||jX,r=this.getDimensions,n=await r(e.floating);return{reference:iTe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function oTe(e){return Bs(e).direction==="rtl"}const sTe={convertOffsetParentRelativeRectToViewportRelativeRect:XSe,getDocumentElement:pc,getClippingRect:rTe,getOffsetParent:jX,getElementRects:aTe,getClientRects:JSe,getDimensions:nTe,getScale:lm,isElement:ln,isRTL:oTe};function lTe(e,t){let r=null,n;const i=pc(e);function a(){var s;clearTimeout(n),(s=r)==null||s.disconnect(),r=null}function o(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),a();const{left:c,top:u,width:h,height:f}=e.getBoundingClientRect();if(s||t(),!h||!f)return;const p=Fp(u),m=Fp(i.clientWidth-(c+h)),g=Fp(i.clientHeight-(u+f)),y=Fp(c),b={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:Vh(0,Mm(1,l))||1};let E=!0;function S(I){const N=I[0].intersectionRatio;if(N!==l){if(!E)return o();N?o(!1,N):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E=!1}try{r=new IntersectionObserver(S,{...b,root:i.ownerDocument})}catch{r=new IntersectionObserver(S,b)}r.observe(e)}return o(!0),a}function MX(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=OL(e),u=i||a?[...c?fd(c):[],...fd(t)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",r,{passive:!0}),a&&v.addEventListener("resize",r)});const h=c&&s?lTe(c,r):null;let f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[b]=v;b&&b.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var E;(E=p)==null||E.observe(t)})),r()}),c&&!l&&p.observe(c),p.observe(t));let m,g=l?af(e):null;l&&y();function y(){const v=af(e);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&r(),g=v,m=requestAnimationFrame(y)}return r(),()=>{var v;u.forEach(b=>{i&&b.removeEventListener("scroll",r),a&&b.removeEventListener("resize",r)}),h==null||h(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const cTe=WSe,uTe=HSe,dTe=KSe,hTe=zSe,C3=BSe,fTe=(e,t,r)=>{const n=new Map,i={platform:sTe,...r},a={...i.platform,_c:n};return VSe(e,t,{...i,platform:a})};var o_=typeof document<"u"?T.useLayoutEffect:T.useEffect;function WS(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!WS(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const a=i[n];if(!(a==="_owner"&&e.$$typeof)&&!WS(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function UX(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function x3(e,t){const r=UX(e);return Math.round(t*r)/r}function lI(e){const t=T.useRef(e);return o_(()=>{t.current=e}),t}function pTe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:o}={},transform:s=!0,whileElementsMounted:l,open:c}=e,[u,h]=T.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=T.useState(n);WS(f,n)||p(n);const[m,g]=T.useState(null),[y,v]=T.useState(null),b=T.useCallback(D=>{D!==N.current&&(N.current=D,g(D))},[]),E=T.useCallback(D=>{D!==L.current&&(L.current=D,v(D))},[]),S=a||m,I=o||y,N=T.useRef(null),L=T.useRef(null),j=T.useRef(u),z=l!=null,A=lI(l),V=lI(i),G=lI(c),X=T.useCallback(()=>{if(!N.current||!L.current)return;const D={placement:t,strategy:r,middleware:f};V.current&&(D.platform=V.current),fTe(N.current,L.current,D).then(H=>{const x={...H,isPositioned:G.current!==!1};$.current&&!WS(j.current,x)&&(j.current=x,JT.flushSync(()=>{h(x)}))})},[f,t,r,V,G]);o_(()=>{c===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,h(D=>({...D,isPositioned:!1})))},[c]);const $=T.useRef(!1);o_(()=>($.current=!0,()=>{$.current=!1}),[]),o_(()=>{if(S&&(N.current=S),I&&(L.current=I),S&&I){if(A.current)return A.current(S,I,X);X()}},[S,I,X,A,z]);const B=T.useMemo(()=>({reference:N,floating:L,setReference:b,setFloating:E}),[b,E]),K=T.useMemo(()=>({reference:S,floating:I}),[S,I]),P=T.useMemo(()=>{const D={position:r,left:0,top:0};if(!K.floating)return D;const H=x3(K.floating,u.x),x=x3(K.floating,u.y);return s?{...D,transform:"translate("+H+"px, "+x+"px)",...UX(K.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:x}},[r,s,K.floating,u.x,u.y]);return T.useMemo(()=>({...u,update:X,refs:B,elements:K,floatingStyles:P}),[u,X,B,K,P])}const mTe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?C3({element:n.current,padding:i}).fn(r):{}:n?C3({element:n,padding:i}).fn(r):{}}}},gTe=(e,t)=>({...cTe(e),options:[e,t]}),yTe=(e,t)=>({...dTe(e),options:[e,t]}),vTe=(e,t)=>({...hTe(e),options:[e,t]}),bTe=(e,t)=>({...uTe(e),options:[e,t]}),wTe=(e,t)=>({...mTe(e),options:[e,t]});function FX(e){return T.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})},e)}const VX={...B0},ETe=VX.useInsertionEffect,_Te=ETe||(e=>e());function da(e){const t=T.useRef(()=>{});return _Te(()=>{t.current=e}),T.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current==null?void 0:t.current(...n)},[])}const PL="ArrowUp",bb="ArrowDown",Vm="ArrowLeft",Sg="ArrowRight";function Ow(e,t,r){return Math.floor(e/t)!==r}function y0(e,t){return t<0||t>=e.current.length}function cI(e,t){return Sa(e,{disabledIndices:t})}function R3(e,t){return Sa(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function Sa(e,t){let{startingIndex:r=-1,decrement:n=!1,disabledIndices:i,amount:a=1}=t===void 0?{}:t;const o=e.current;let s=r;do s+=n?-a:a;while(s>=0&&s<=o.length-1&&s_(o,s,i));return s}function STe(e,t){let{event:r,orientation:n,loop:i,cols:a,disabledIndices:o,minIndex:s,maxIndex:l,prevIndex:c,stopEvent:u=!1}=t,h=c;if(r.key===PL){if(u&&la(r),c===-1)h=l;else if(h=Sa(e,{startingIndex:h,amount:a,decrement:!0,disabledIndices:o}),i&&(c-a<s||h<0)){const f=c%a,p=l%a,m=l-(p-f);p===f?h=l:h=p>f?m:m-a}y0(e,h)&&(h=c)}if(r.key===bb&&(u&&la(r),c===-1?h=s:(h=Sa(e,{startingIndex:c,amount:a,disabledIndices:o}),i&&c+a>l&&(h=Sa(e,{startingIndex:c%a-a,amount:a,disabledIndices:o}))),y0(e,h)&&(h=c)),n==="both"){const f=Fp(c/a);r.key===Sg&&(u&&la(r),c%a!==a-1?(h=Sa(e,{startingIndex:c,disabledIndices:o}),i&&Ow(h,a,f)&&(h=Sa(e,{startingIndex:c-c%a-1,disabledIndices:o}))):i&&(h=Sa(e,{startingIndex:c-c%a-1,disabledIndices:o})),Ow(h,a,f)&&(h=c)),r.key===Vm&&(u&&la(r),c%a!==0?(h=Sa(e,{startingIndex:c,decrement:!0,disabledIndices:o}),i&&Ow(h,a,f)&&(h=Sa(e,{startingIndex:c+(a-c%a),decrement:!0,disabledIndices:o}))):i&&(h=Sa(e,{startingIndex:c+(a-c%a),decrement:!0,disabledIndices:o})),Ow(h,a,f)&&(h=c));const p=Fp(l/a)===f;y0(e,h)&&(i&&p?h=r.key===Vm?l:Sa(e,{startingIndex:c-c%a-1,disabledIndices:o}):h=c)}return h}function TTe(e,t,r){const n=[];let i=0;return e.forEach((a,o)=>{let{width:s,height:l}=a,c=!1;for(r&&(i=0);!c;){const u=[];for(let h=0;h<s;h++)for(let f=0;f<l;f++)u.push(i+h+f*t);i%t+s<=t&&u.every(h=>n[h]==null)?(u.forEach(h=>{n[h]=o}),c=!0):i++}}),[...n]}function CTe(e,t,r,n,i){if(e===-1)return-1;const a=r.indexOf(e),o=t[e];switch(i){case"tl":return a;case"tr":return o?a+o.width-1:a;case"bl":return o?a+(o.height-1)*n:a;case"br":return r.lastIndexOf(e)}}function xTe(e,t){return t.flatMap((r,n)=>e.includes(r)?[n]:[])}function s_(e,t,r){if(r)return r.includes(t);const n=e[t];return n==null||n.hasAttribute("disabled")||n.getAttribute("aria-disabled")==="true"}let I3=0;function Fu(e,t){t===void 0&&(t={});const{preventScroll:r=!1,cancelPrevious:n=!0,sync:i=!1}=t;n&&cancelAnimationFrame(I3);const a=()=>e==null?void 0:e.focus({preventScroll:r});i?a():I3=requestAnimationFrame(a)}var en=typeof document<"u"?T.useLayoutEffect:T.useEffect;function RTe(e,t){const r=e.compareDocumentPosition(t);return r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS?1:0}function ITe(e,t){if(e.size!==t.size)return!1;for(const[r,n]of e.entries())if(n!==t.get(r))return!1;return!0}const BX=T.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function NTe(e){const{children:t,elementsRef:r,labelsRef:n}=e,[i,a]=T.useState(()=>new Map),o=T.useCallback(l=>{a(c=>new Map(c).set(l,null))},[]),s=T.useCallback(l=>{a(c=>{const u=new Map(c);return u.delete(l),u})},[]);return en(()=>{const l=new Map(i);Array.from(l.keys()).sort(RTe).forEach((u,h)=>{l.set(u,h)}),ITe(i,l)||a(l)},[i]),T.createElement(BX.Provider,{value:T.useMemo(()=>({register:o,unregister:s,map:i,elementsRef:r,labelsRef:n}),[o,s,i,r,n])},t)}function ATe(e){e===void 0&&(e={});const{label:t}=e,{register:r,unregister:n,map:i,elementsRef:a,labelsRef:o}=T.useContext(BX),[s,l]=T.useState(null),c=T.useRef(null),u=T.useCallback(h=>{if(c.current=h,s!==null&&(a.current[s]=h,o)){var f;const p=t!==void 0;o.current[s]=p?t:(f=h==null?void 0:h.textContent)!=null?f:null}},[s,a,o,t]);return en(()=>{const h=c.current;if(h)return r(h),()=>{n(h)}},[r,n]),en(()=>{const h=c.current?i.get(c.current):null;h!=null&&l(h)},[i]),T.useMemo(()=>({ref:u,index:s??-1}),[s,u])}function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vv.apply(this,arguments)}let N3=!1,OTe=0;const A3=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+OTe++;function kTe(){const[e,t]=T.useState(()=>N3?A3():void 0);return en(()=>{e==null&&t(A3())},[]),T.useEffect(()=>{N3=!0},[]),e}const PTe=VX.useId,UC=PTe||kTe;function DTe(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(i=>i(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,((n=e.get(t))==null?void 0:n.filter(i=>i!==r))||[])}}}const LTe=T.createContext(null),jTe=T.createContext(null),FC=()=>{var e;return((e=T.useContext(LTe))==null?void 0:e.id)||null},wb=()=>T.useContext(jTe);function Rd(e){return"data-floating-ui-"+e}function jo(e){const t=T.useRef(e);return en(()=>{t.current=e}),t}const O3=Rd("safe-polygon");function uI(e,t,r){return r&&!gv(r)?0:typeof e=="number"?e:e==null?void 0:e[t]}function MTe(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,dataRef:i,events:a,elements:o}=e,{enabled:s=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:h=0,move:f=!0}=t,p=wb(),m=FC(),g=jo(c),y=jo(l),v=jo(r),b=T.useRef(),E=T.useRef(-1),S=T.useRef(),I=T.useRef(-1),N=T.useRef(!0),L=T.useRef(!1),j=T.useRef(()=>{}),z=T.useCallback(()=>{var B;const K=(B=i.current.openEvent)==null?void 0:B.type;return(K==null?void 0:K.includes("mouse"))&&K!=="mousedown"},[i]);T.useEffect(()=>{if(!s)return;function B(K){let{open:P}=K;P||(clearTimeout(E.current),clearTimeout(I.current),N.current=!0)}return a.on("openchange",B),()=>{a.off("openchange",B)}},[s,a]),T.useEffect(()=>{if(!s||!g.current||!r)return;function B(P){z()&&n(!1,P,"hover")}const K=Yi(o.floating).documentElement;return K.addEventListener("mouseleave",B),()=>{K.removeEventListener("mouseleave",B)}},[o.floating,r,n,s,g,z]);const A=T.useCallback(function(B,K,P){K===void 0&&(K=!0),P===void 0&&(P="hover");const D=uI(y.current,"close",b.current);D&&!S.current?(clearTimeout(E.current),E.current=window.setTimeout(()=>n(!1,B,P),D)):K&&(clearTimeout(E.current),n(!1,B,P))},[y,n]),V=da(()=>{j.current(),S.current=void 0}),G=da(()=>{if(L.current){const B=Yi(o.floating).body;B.style.pointerEvents="",B.removeAttribute(O3),L.current=!1}});T.useEffect(()=>{if(!s)return;function B(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function K(x){if(clearTimeout(E.current),N.current=!1,u&&!gv(b.current)||h>0&&!uI(y.current,"open"))return;const w=uI(y.current,"open",b.current);w?E.current=window.setTimeout(()=>{v.current||n(!0,x,"hover")},w):n(!0,x,"hover")}function P(x){if(B())return;j.current();const w=Yi(o.floating);if(clearTimeout(I.current),g.current&&i.current.floatingContext){r||clearTimeout(E.current),S.current=g.current({...i.current.floatingContext,tree:p,x:x.clientX,y:x.clientY,onClose(){G(),V(),A(x,!0,"safe-polygon")}});const C=S.current;w.addEventListener("mousemove",C),j.current=()=>{w.removeEventListener("mousemove",C)};return}(b.current==="touch"?!hi(o.floating,x.relatedTarget):!0)&&A(x)}function D(x){B()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:x.clientX,y:x.clientY,onClose(){G(),V(),A(x)}})(x))}if(ln(o.domReference)){var H;const x=o.domReference;return r&&x.addEventListener("mouseleave",D),(H=o.floating)==null||H.addEventListener("mouseleave",D),f&&x.addEventListener("mousemove",K,{once:!0}),x.addEventListener("mouseenter",K),x.addEventListener("mouseleave",P),()=>{var w;r&&x.removeEventListener("mouseleave",D),(w=o.floating)==null||w.removeEventListener("mouseleave",D),f&&x.removeEventListener("mousemove",K),x.removeEventListener("mouseenter",K),x.removeEventListener("mouseleave",P)}}},[o,s,e,u,h,f,A,V,G,n,r,v,p,y,g,i]),en(()=>{var B;if(s&&r&&(B=g.current)!=null&&B.__options.blockPointerEvents&&z()){const P=Yi(o.floating).body;P.setAttribute(O3,""),P.style.pointerEvents="none",L.current=!0;const D=o.floating;if(ln(o.domReference)&&D){var K;const H=o.domReference,x=p==null||(K=p.nodesRef.current.find(w=>w.id===m))==null||(K=K.context)==null?void 0:K.elements.floating;return x&&(x.style.pointerEvents=""),H.style.pointerEvents="auto",D.style.pointerEvents="auto",()=>{H.style.pointerEvents="",D.style.pointerEvents=""}}}},[s,r,m,o,p,g,z]),en(()=>{r||(b.current=void 0,V(),G())},[r,V,G]),T.useEffect(()=>()=>{V(),clearTimeout(E.current),clearTimeout(I.current),G()},[s,o.domReference,V,G]);const X=T.useMemo(()=>{function B(K){b.current=K.pointerType}return{onPointerDown:B,onPointerEnter:B,onMouseMove(K){const{nativeEvent:P}=K;function D(){!N.current&&!v.current&&n(!0,P,"hover")}u&&!gv(b.current)||r||h===0||(clearTimeout(I.current),b.current==="touch"?D():I.current=window.setTimeout(D,h))}}},[u,n,r,v,h]),$=T.useMemo(()=>({onMouseEnter(){clearTimeout(E.current)},onMouseLeave(B){A(B.nativeEvent,!1)}}),[A]);return T.useMemo(()=>s?{reference:X,floating:$}:{},[s,X,$])}function UTe(e,t){var r;let n=[],i=(r=e.find(a=>a.id===t))==null?void 0:r.parentId;for(;i;){const a=e.find(o=>o.id===i);i=a==null?void 0:a.parentId,a&&(n=n.concat(a))}return n}function Bh(e,t){let r=e.filter(i=>{var a;return i.parentId===t&&((a=i.context)==null?void 0:a.open)}),n=r;for(;n.length;)n=e.filter(i=>{var a;return(a=n)==null?void 0:a.some(o=>{var s;return i.parentId===o.id&&((s=i.context)==null?void 0:s.open)})}),r=r.concat(n);return r}function FTe(e,t){let r,n=-1;function i(a,o){o>n&&(r=a,n=o),Bh(e,a).forEach(l=>{i(l.id,o+1)})}return i(t,0),e.find(a=>a.id===r)}let qf=new WeakMap,kw=new WeakSet,Pw={},dI=0;const VTe=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,$X=e=>e&&(e.host||$X(e.parentNode)),BTe=(e,t)=>t.map(r=>{if(e.contains(r))return r;const n=$X(r);return e.contains(n)?n:null}).filter(r=>r!=null);function $Te(e,t,r,n){const i="data-floating-ui-inert",a=n?"inert":r?"aria-hidden":null,o=BTe(t,e),s=new Set,l=new Set(o),c=[];Pw[i]||(Pw[i]=new WeakMap);const u=Pw[i];o.forEach(h),f(t),s.clear();function h(p){!p||s.has(p)||(s.add(p),p.parentNode&&h(p.parentNode))}function f(p){!p||l.has(p)||[].forEach.call(p.children,m=>{if(Ud(m)!=="script")if(s.has(m))f(m);else{const g=a?m.getAttribute(a):null,y=g!==null&&g!=="false",v=(qf.get(m)||0)+1,b=(u.get(m)||0)+1;qf.set(m,v),u.set(m,b),c.push(m),v===1&&y&&kw.add(m),b===1&&m.setAttribute(i,""),!y&&a&&m.setAttribute(a,"true")}})}return dI++,()=>{c.forEach(p=>{const m=(qf.get(p)||0)-1,g=(u.get(p)||0)-1;qf.set(p,m),u.set(p,g),m||(!kw.has(p)&&a&&p.removeAttribute(a),kw.delete(p)),g||p.removeAttribute(i)}),dI--,dI||(qf=new WeakMap,qf=new WeakMap,kw=new WeakSet,Pw={})}}function k3(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);const n=Yi(e[0]).body;return $Te(e.concat(Array.from(n.querySelectorAll("[aria-live]"))),n,t,r)}const Bm=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function HX(e,t){const r=yv(e,Bm());t==="prev"&&r.reverse();const n=r.indexOf(hl(Yi(e)));return r.slice(n+1)[0]}function zX(){return HX(document.body,"next")}function GX(){return HX(document.body,"prev")}function v0(e,t){const r=t||e.currentTarget,n=e.relatedTarget;return!n||!hi(r,n)}function HTe(e){yv(e,Bm()).forEach(r=>{r.dataset.tabindex=r.getAttribute("tabindex")||"",r.setAttribute("tabindex","-1")})}function zTe(e){e.querySelectorAll("[data-tabindex]").forEach(r=>{const n=r.dataset.tabindex;delete r.dataset.tabindex,n?r.setAttribute("tabindex",n):r.removeAttribute("tabindex")})}function GTe(e,t,r){const n=e.indexOf(t);function i(o){const s=Rd("focus-guard");let l=n+(o?1:0),c=e[l];for(;c&&(!c.isConnected||c.hasAttribute(s)||hi(r,c));)o?l++:l--,c=e[l];return c}const a=i(!0);return a||i(!1)}const DL={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let WTe;function P3(e){e.key==="Tab"&&(e.target,clearTimeout(WTe))}const KS=T.forwardRef(function(t,r){const[n,i]=T.useState();en(()=>(xL()&&i("button"),document.addEventListener("keydown",P3),()=>{document.removeEventListener("keydown",P3)}),[]);const a={ref:r,tabIndex:0,role:n,"aria-hidden":n?void 0:!0,[Rd("focus-guard")]:"",style:DL};return T.createElement("span",vv({},t,a))}),WX=T.createContext(null),D3=Rd("portal");function KTe(e){e===void 0&&(e={});const{id:t,root:r}=e,n=UC(),i=KX(),[a,o]=T.useState(null),s=T.useRef(null);return en(()=>()=>{a==null||a.remove(),queueMicrotask(()=>{s.current=null})},[a]),en(()=>{if(!n||s.current)return;const l=t?document.getElementById(t):null;if(!l)return;const c=document.createElement("div");c.id=n,c.setAttribute(D3,""),l.appendChild(c),s.current=c,o(c)},[t,n]),en(()=>{if(!n||s.current)return;let l=r||(i==null?void 0:i.portalNode);l&&!ln(l)&&(l=l.current),l=l||document.body;let c=null;t&&(c=document.createElement("div"),c.id=t,l.appendChild(c));const u=document.createElement("div");u.id=n,u.setAttribute(D3,""),l=c||l,l.appendChild(u),s.current=u,o(u)},[t,r,n,i]),a}function qTe(e){const{children:t,id:r,root:n=null,preserveTabOrder:i=!0}=e,a=KTe({id:r,root:n}),[o,s]=T.useState(null),l=T.useRef(null),c=T.useRef(null),u=T.useRef(null),h=T.useRef(null),f=!!o&&!o.modal&&o.open&&i&&!!(n||a);return T.useEffect(()=>{if(!a||!i||o!=null&&o.modal)return;function p(m){a&&v0(m)&&(m.type==="focusin"?zTe:HTe)(a)}return a.addEventListener("focusin",p,!0),a.addEventListener("focusout",p,!0),()=>{a.removeEventListener("focusin",p,!0),a.removeEventListener("focusout",p,!0)}},[a,i,o==null?void 0:o.modal]),T.createElement(WX.Provider,{value:T.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:u,afterInsideRef:h,portalNode:a,setFocusManagerState:s}),[i,a])},f&&a&&T.createElement(KS,{"data-type":"outside",ref:l,onFocus:p=>{if(v0(p,a)){var m;(m=u.current)==null||m.focus()}else{const g=GX()||(o==null?void 0:o.refs.domReference.current);g==null||g.focus()}}}),f&&a&&T.createElement("span",{"aria-owns":a.id,style:DL}),a&&JT.createPortal(t,a),f&&a&&T.createElement(KS,{"data-type":"outside",ref:c,onFocus:p=>{if(v0(p,a)){var m;(m=h.current)==null||m.focus()}else{const g=zX()||(o==null?void 0:o.refs.domReference.current);g==null||g.focus(),o!=null&&o.closeOnFocusOut&&(o==null||o.onOpenChange(!1,p.nativeEvent))}}}))}const KX=()=>T.useContext(WX),L3=20;let uh=[];function hI(e){uh=uh.filter(r=>r.isConnected);let t=e;if(!(!t||Ud(t)==="body")){if(!FSe(t,Bm())){const r=yv(t,Bm())[0];r&&(t=r)}uh.push(t),uh.length>L3&&(uh=uh.slice(-L3))}}function j3(){return uh.slice().reverse().find(e=>e.isConnected)}const YTe=T.forwardRef(function(t,r){return T.createElement("button",vv({},t,{type:"button",ref:r,tabIndex:-1,style:DL}))});function qX(e){const{context:t,children:r,disabled:n=!1,order:i=["content"],guards:a=!0,initialFocus:o=0,returnFocus:s=!0,restoreFocus:l=!1,modal:c=!0,visuallyHiddenDismiss:u=!1,closeOnFocusOut:h=!0}=e,{open:f,refs:p,nodeId:m,onOpenChange:g,events:y,dataRef:v,floatingId:b,elements:{domReference:E,floating:S}}=t,I=typeof o=="number"&&o<0,N=TX(E)&&I,L=VTe()?a:!0,j=jo(i),z=jo(o),A=jo(s),V=wb(),G=KX(),X=T.useRef(null),$=T.useRef(null),B=T.useRef(!1),K=T.useRef(!1),P=T.useRef(-1),D=G!=null,H=S==null?void 0:S.firstElementChild,x=(H==null?void 0:H.id)===b?H:S,w=da(function(F){return F===void 0&&(F=x),F?yv(F,Bm()):[]}),O=da(F=>{const J=w(F);return j.current.map(se=>E&&se==="reference"?E:x&&se==="floating"?x:J).filter(Boolean).flat()});T.useEffect(()=>{if(n||!c)return;function F(se){if(se.key==="Tab"){hi(x,hl(Yi(x)))&&w().length===0&&!N&&la(se);const he=O(),ge=Vc(se);j.current[0]==="reference"&&ge===E&&(la(se),se.shiftKey?Fu(he[he.length-1]):Fu(he[1])),j.current[1]==="floating"&&ge===x&&se.shiftKey&&(la(se),Fu(he[0]))}}const J=Yi(x);return J.addEventListener("keydown",F),()=>{J.removeEventListener("keydown",F)}},[n,E,x,c,j,N,w,O]),T.useEffect(()=>{if(n||!S)return;function F(J){const se=Vc(J),ge=w().indexOf(se);ge!==-1&&(P.current=ge)}return S.addEventListener("focusin",F),()=>{S.removeEventListener("focusin",F)}},[n,S,w]),T.useEffect(()=>{if(n||!h)return;function F(){K.current=!0,setTimeout(()=>{K.current=!1})}function J(se){const he=se.relatedTarget;queueMicrotask(()=>{const ge=!(hi(E,he)||hi(S,he)||hi(he,S)||hi(G==null?void 0:G.portalNode,he)||he!=null&&he.hasAttribute(Rd("focus-guard"))||V&&(Bh(V.nodesRef.current,m).find(je=>{var ze,Me;return hi((ze=je.context)==null?void 0:ze.elements.floating,he)||hi((Me=je.context)==null?void 0:Me.elements.domReference,he)})||UTe(V.nodesRef.current,m).find(je=>{var ze,Me;return((ze=je.context)==null?void 0:ze.elements.floating)===he||((Me=je.context)==null?void 0:Me.elements.domReference)===he})));if(l&&ge&&hl(Yi(x))===Yi(x).body){mi(x)&&(x==null||x.focus());const je=P.current,ze=w(),Me=ze[je]||ze[ze.length-1]||x;mi(Me)&&Me.focus()}(N||!c)&&he&&ge&&!K.current&&he!==j3()&&(B.current=!0,g(!1,se))})}if(S&&mi(E))return E.addEventListener("focusout",J),E.addEventListener("pointerdown",F),S.addEventListener("focusout",J),()=>{E.removeEventListener("focusout",J),E.removeEventListener("pointerdown",F),S.removeEventListener("focusout",J)}},[n,E,S,x,c,m,V,G,g,h,l,w,N]),T.useEffect(()=>{var F;if(n)return;const J=Array.from((G==null||(F=G.portalNode)==null?void 0:F.querySelectorAll("["+Rd("portal")+"]"))||[]);if(S){const se=[S,...J,X.current,$.current,j.current.includes("reference")||N?E:null].filter(ge=>ge!=null),he=c||N?k3(se,L,!L):k3(se);return()=>{he()}}},[n,E,S,c,j,G,N,L]),en(()=>{if(n||!mi(x))return;const F=Yi(x),J=hl(F);queueMicrotask(()=>{const se=O(x),he=z.current,ge=(typeof he=="number"?se[he]:he.current)||x,je=hi(x,J);!I&&!je&&f&&Fu(ge,{preventScroll:ge===x})})},[n,f,x,I,O,z]),en(()=>{if(n||!x)return;let F=!1;const J=Yi(x),se=hl(J);let ge=v.current.openEvent;const je=p.domReference.current;hI(se);function ze(Me){let{open:tt,reason:Tt,event:rt,nested:yt}=Me;tt&&(ge=rt),Tt==="escape-key"&&p.domReference.current&&hI(p.domReference.current),Tt==="hover"&&rt.type==="mouseleave"&&(B.current=!0),Tt==="outside-press"&&(yt?(B.current=!1,F=!0):B.current=!(_X(rt)||CL(rt)))}return y.on("openchange",ze),()=>{y.off("openchange",ze);const Me=hl(J),tt=hi(S,Me)||V&&Bh(V.nodesRef.current,m).some(Oe=>{var it;return hi((it=Oe.context)==null?void 0:it.elements.floating,Me)});(tt||ge&&["click","mousedown"].includes(ge.type))&&p.domReference.current&&hI(p.domReference.current);const rt=je||se,yt=yv(Yi(rt).body,Bm());queueMicrotask(()=>{let Oe=j3();!Oe&&mi(rt)&&S&&(Oe=GTe(yt,rt,S)),A.current&&!B.current&&mi(Oe)&&(!(Oe!==Me&&Me!==J.body)||tt)&&Oe.focus({preventScroll:F})})}},[n,S,x,A,v,p,y,V,m]),en(()=>{if(!n&&G)return G.setFocusManagerState({modal:c,closeOnFocusOut:h,open:f,onOpenChange:g,refs:p}),()=>{G.setFocusManagerState(null)}},[n,G,c,f,g,p,h]),en(()=>{if(n||!x||typeof MutationObserver!="function"||I)return;const F=()=>{const se=x.getAttribute("tabindex"),he=w(),ge=hl(Yi(S)),je=he.indexOf(ge);je!==-1&&(P.current=je),j.current.includes("floating")||ge!==p.domReference.current&&he.length===0?se!=="0"&&x.setAttribute("tabindex","0"):se!=="-1"&&x.setAttribute("tabindex","-1")};F();const J=new MutationObserver(F);return J.observe(x,{childList:!0,subtree:!0,attributes:!0}),()=>{J.disconnect()}},[n,S,x,p,j,w,I]);function C(F){return n||!u||!c?null:T.createElement(YTe,{ref:F==="start"?X:$,onClick:J=>g(!1,J.nativeEvent)},typeof u=="string"?u:"Dismiss")}const q=!n&&L&&(c?!N:!0)&&(D||c);return T.createElement(T.Fragment,null,q&&T.createElement(KS,{"data-type":"inside",ref:G==null?void 0:G.beforeInsideRef,onFocus:F=>{if(c){const se=O();Fu(i[0]==="reference"?se[0]:se[se.length-1])}else if(G!=null&&G.preserveTabOrder&&G.portalNode)if(B.current=!1,v0(F,G.portalNode)){const se=zX()||E;se==null||se.focus()}else{var J;(J=G.beforeOutsideRef.current)==null||J.focus()}}}),!N&&C("start"),r,C("end"),q&&T.createElement(KS,{"data-type":"inside",ref:G==null?void 0:G.afterInsideRef,onFocus:F=>{if(c)Fu(O()[0]);else if(G!=null&&G.preserveTabOrder&&G.portalNode)if(h&&(B.current=!0),v0(F,G.portalNode)){const se=GX()||E;se==null||se.focus()}else{var J;(J=G.afterOutsideRef.current)==null||J.focus()}}}))}const fI=new Set,XTe=T.forwardRef(function(t,r){const{lockScroll:n=!1,...i}=t,a=UC();return en(()=>{if(!n)return;fI.add(a);const o=/iP(hone|ad|od)|iOS/.test(TL()),s=document.body.style,c=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",u=window.innerWidth-document.documentElement.clientWidth,h=s.left?parseFloat(s.left):window.scrollX,f=s.top?parseFloat(s.top):window.scrollY;if(s.overflow="hidden",u&&(s[c]=u+"px"),o){var p,m;const g=((p=window.visualViewport)==null?void 0:p.offsetLeft)||0,y=((m=window.visualViewport)==null?void 0:m.offsetTop)||0;Object.assign(s,{position:"fixed",top:-(f-Math.floor(y))+"px",left:-(h-Math.floor(g))+"px",right:"0"})}return()=>{fI.delete(a),fI.size===0&&(Object.assign(s,{overflow:"",[c]:""}),o&&(Object.assign(s,{position:"",top:"",left:"",right:""}),window.scrollTo(h,f)))}},[a,n]),T.createElement("div",vv({ref:r},i,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}}))});function M3(e){return mi(e.target)&&e.target.tagName==="BUTTON"}function U3(e){return RL(e)}function YX(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,dataRef:i,elements:{domReference:a}}=e,{enabled:o=!0,event:s="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:u=!0}=t,h=T.useRef(),f=T.useRef(!1),p=T.useMemo(()=>({onPointerDown(m){h.current=m.pointerType},onMouseDown(m){const g=h.current;m.button===0&&s!=="click"&&(gv(g,!0)&&c||(r&&l&&(!i.current.openEvent||i.current.openEvent.type==="mousedown")?n(!1,m.nativeEvent,"click"):(m.preventDefault(),n(!0,m.nativeEvent,"click"))))},onClick(m){const g=h.current;if(s==="mousedown"&&h.current){h.current=void 0;return}gv(g,!0)&&c||(r&&l&&(!i.current.openEvent||i.current.openEvent.type==="click")?n(!1,m.nativeEvent,"click"):n(!0,m.nativeEvent,"click"))},onKeyDown(m){h.current=void 0,!(m.defaultPrevented||!u||M3(m))&&(m.key===" "&&!U3(a)&&(m.preventDefault(),f.current=!0),m.key==="Enter"&&n(!(r&&l),m.nativeEvent,"click"))},onKeyUp(m){m.defaultPrevented||!u||M3(m)||U3(a)||m.key===" "&&f.current&&(f.current=!1,n(!(r&&l),m.nativeEvent,"click"))}}),[i,a,s,c,u,n,r,l]);return T.useMemo(()=>o?{reference:p}:{},[o,p])}const JTe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},QTe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},F3=e=>{var t,r;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(r=e==null?void 0:e.outsidePress)!=null?r:!0}};function XX(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,elements:i,dataRef:a}=e,{enabled:o=!0,escapeKey:s=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:h="pointerdown",ancestorScroll:f=!1,bubbles:p,capture:m}=t,g=wb(),y=da(typeof l=="function"?l:()=>!1),v=typeof l=="function"?y:l,b=T.useRef(!1),E=T.useRef(!1),{escapeKey:S,outsidePress:I}=F3(p),{escapeKey:N,outsidePress:L}=F3(m),j=da($=>{var B;if(!r||!o||!s||$.key!=="Escape")return;const K=(B=a.current.floatingContext)==null?void 0:B.nodeId,P=g?Bh(g.nodesRef.current,K):[];if(!S&&($.stopPropagation(),P.length>0)){let D=!0;if(P.forEach(H=>{var x;if((x=H.context)!=null&&x.open&&!H.context.dataRef.current.__escapeKeyBubbles){D=!1;return}}),!D)return}n(!1,dSe($)?$.nativeEvent:$,"escape-key")}),z=da($=>{var B;const K=()=>{var P;j($),(P=Vc($))==null||P.removeEventListener("keydown",K)};(B=Vc($))==null||B.addEventListener("keydown",K)}),A=da($=>{var B;const K=b.current;b.current=!1;const P=E.current;if(E.current=!1,c==="click"&&P||K||typeof v=="function"&&!v($))return;const D=Vc($),H="["+Rd("inert")+"]",x=Yi(i.floating).querySelectorAll(H);let w=ln(D)?D:null;for(;w&&!xd(w);){const F=iu(w);if(xd(F)||!ln(F))break;w=F}if(x.length&&ln(D)&&!hSe(D)&&!hi(D,i.floating)&&Array.from(x).every(F=>!hi(w,F)))return;if(mi(D)&&X){const F=D.clientWidth>0&&D.scrollWidth>D.clientWidth,J=D.clientHeight>0&&D.scrollHeight>D.clientHeight;let se=J&&$.offsetX>D.clientWidth;if(J&&Bs(D).direction==="rtl"&&(se=$.offsetX<=D.offsetWidth-D.clientWidth),se||F&&$.offsetY>D.clientHeight)return}const O=(B=a.current.floatingContext)==null?void 0:B.nodeId,C=g&&Bh(g.nodesRef.current,O).some(F=>{var J;return oI($,(J=F.context)==null?void 0:J.elements.floating)});if(oI($,i.floating)||oI($,i.domReference)||C)return;const q=g?Bh(g.nodesRef.current,O):[];if(q.length>0){let F=!0;if(q.forEach(J=>{var se;if((se=J.context)!=null&&se.open&&!J.context.dataRef.current.__outsidePressBubbles){F=!1;return}}),!F)return}n(!1,$,"outside-press")}),V=da($=>{var B;const K=()=>{var P;A($),(P=Vc($))==null||P.removeEventListener(c,K)};(B=Vc($))==null||B.addEventListener(c,K)});T.useEffect(()=>{if(!r||!o)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=I;function $(P){n(!1,P,"ancestor-scroll")}const B=Yi(i.floating);s&&B.addEventListener("keydown",N?z:j,N),v&&B.addEventListener(c,L?V:A,L);let K=[];return f&&(ln(i.domReference)&&(K=fd(i.domReference)),ln(i.floating)&&(K=K.concat(fd(i.floating))),!ln(i.reference)&&i.reference&&i.reference.contextElement&&(K=K.concat(fd(i.reference.contextElement)))),K=K.filter(P=>{var D;return P!==((D=B.defaultView)==null?void 0:D.visualViewport)}),K.forEach(P=>{P.addEventListener("scroll",$,{passive:!0})}),()=>{s&&B.removeEventListener("keydown",N?z:j,N),v&&B.removeEventListener(c,L?V:A,L),K.forEach(P=>{P.removeEventListener("scroll",$)})}},[a,i,s,v,c,r,n,f,o,S,I,j,N,z,A,L,V]),T.useEffect(()=>{b.current=!1},[v,c]);const G=T.useMemo(()=>({onKeyDown:j,[JTe[h]]:$=>{u&&n(!1,$.nativeEvent,"reference-press")}}),[j,n,u,h]),X=T.useMemo(()=>({onKeyDown:j,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[QTe[c]]:()=>{b.current=!0}}),[j,c]);return T.useMemo(()=>o?{reference:G,floating:X}:{},[o,G,X])}function ZTe(e){const{open:t=!1,onOpenChange:r,elements:n}=e,i=UC(),a=T.useRef({}),[o]=T.useState(()=>DTe()),s=FC()!=null,[l,c]=T.useState(n.reference),u=da((p,m,g)=>{a.current.openEvent=p?m:void 0,o.emit("openchange",{open:p,event:m,reason:g,nested:s}),r==null||r(p,m,g)}),h=T.useMemo(()=>({setPositionReference:c}),[]),f=T.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return T.useMemo(()=>({dataRef:a,open:t,onOpenChange:u,elements:f,events:o,floatingId:i,refs:h}),[t,u,f,o,i,h])}function JX(e){e===void 0&&(e={});const{nodeId:t}=e,r=ZTe({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,i=n.elements,[a,o]=T.useState(null),[s,l]=T.useState(null),u=(i==null?void 0:i.reference)||a,h=T.useRef(null),f=wb();en(()=>{u&&(h.current=u)},[u]);const p=pTe({...e,elements:{...i,...s&&{reference:s}}}),m=T.useCallback(E=>{const S=ln(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l(S),p.refs.setReference(S)},[p.refs]),g=T.useCallback(E=>{(ln(E)||E===null)&&(h.current=E,o(E)),(ln(p.refs.reference.current)||p.refs.reference.current===null||E!==null&&!ln(E))&&p.refs.setReference(E)},[p.refs]),y=T.useMemo(()=>({...p.refs,setReference:g,setPositionReference:m,domReference:h}),[p.refs,g,m]),v=T.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),b=T.useMemo(()=>({...p,...n,refs:y,elements:v,nodeId:t}),[p,y,v,t,n]);return en(()=>{n.dataRef.current.floatingContext=b;const E=f==null?void 0:f.nodesRef.current.find(S=>S.id===t);E&&(E.context=b)}),T.useMemo(()=>({...p,context:b,refs:y,elements:v}),[p,y,v,b])}function eCe(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,events:i,dataRef:a,elements:o}=e,{enabled:s=!0,visibleOnly:l=!0}=t,c=T.useRef(!1),u=T.useRef(),h=T.useRef(!0);T.useEffect(()=>{if(!s)return;const p=mo(o.domReference);function m(){!r&&mi(o.domReference)&&o.domReference===hl(Yi(o.domReference))&&(c.current=!0)}function g(){h.current=!0}return p.addEventListener("blur",m),p.addEventListener("keydown",g,!0),()=>{p.removeEventListener("blur",m),p.removeEventListener("keydown",g,!0)}},[o.domReference,r,s]),T.useEffect(()=>{if(!s)return;function p(m){let{reason:g}=m;(g==="reference-press"||g==="escape-key")&&(c.current=!0)}return i.on("openchange",p),()=>{i.off("openchange",p)}},[i,s]),T.useEffect(()=>()=>{clearTimeout(u.current)},[]);const f=T.useMemo(()=>({onPointerDown(p){CL(p.nativeEvent)||(h.current=!1)},onMouseLeave(){c.current=!1},onFocus(p){if(c.current)return;const m=Vc(p.nativeEvent);if(l&&ln(m))try{if(xL()&&SX())throw Error();if(!m.matches(":focus-visible"))return}catch{if(!h.current&&!RL(m))return}n(!0,p.nativeEvent,"focus")},onBlur(p){c.current=!1;const m=p.relatedTarget,g=p.nativeEvent,y=ln(m)&&m.hasAttribute(Rd("focus-guard"))&&m.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var v;const b=hl(o.domReference?o.domReference.ownerDocument:document);!m&&b===o.domReference||hi((v=a.current.floatingContext)==null?void 0:v.refs.floating.current,b)||hi(o.domReference,b)||y||n(!1,g,"focus")})}}),[a,o.domReference,n,l]);return T.useMemo(()=>s?{reference:f}:{},[s,f])}const V3="active",B3="selected";function pI(e,t,r){const n=new Map,i=r==="item";let a=e;if(i&&e){const{[V3]:o,[B3]:s,...l}=e;a=l}return{...r==="floating"&&{tabIndex:-1},...a,...t.map(o=>{const s=o?o[r]:null;return typeof s=="function"?e?s(e):null:s}).concat(e).reduce((o,s)=>(s&&Object.entries(s).forEach(l=>{let[c,u]=l;if(!(i&&[V3,B3].includes(c)))if(c.indexOf("on")===0){if(n.has(c)||n.set(c,[]),typeof u=="function"){var h;(h=n.get(c))==null||h.push(u),o[c]=function(){for(var f,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return(f=n.get(c))==null?void 0:f.map(y=>y(...m)).find(y=>y!==void 0)}}}else o[c]=u}),o),{})}}function QX(e){e===void 0&&(e=[]);const t=e.map(s=>s==null?void 0:s.reference),r=e.map(s=>s==null?void 0:s.floating),n=e.map(s=>s==null?void 0:s.item),i=T.useCallback(s=>pI(s,e,"reference"),t),a=T.useCallback(s=>pI(s,e,"floating"),r),o=T.useCallback(s=>pI(s,e,"item"),n);return T.useMemo(()=>({getReferenceProps:i,getFloatingProps:a,getItemProps:o}),[i,a,o])}let $3=!1;function VC(e,t,r){switch(e){case"vertical":return t;case"horizontal":return r;default:return t||r}}function H3(e,t){return VC(t,e===PL||e===bb,e===Vm||e===Sg)}function mI(e,t,r){return VC(t,e===bb,r?e===Vm:e===Sg)||e==="Enter"||e===" "||e===""}function tCe(e,t,r){return VC(t,r?e===Vm:e===Sg,e===bb)}function z3(e,t,r){return VC(t,r?e===Sg:e===Vm,e===PL)}function rCe(e,t){const{open:r,onOpenChange:n,elements:i}=e,{listRef:a,activeIndex:o,onNavigate:s=()=>{},enabled:l=!0,selectedIndex:c=null,allowEscape:u=!1,loop:h=!1,nested:f=!1,rtl:p=!1,virtual:m=!1,focusItemOnOpen:g="auto",focusItemOnHover:y=!0,openOnArrowKeyDown:v=!0,disabledIndices:b=void 0,orientation:E="vertical",cols:S=1,scrollItemIntoView:I=!0,virtualItemRef:N,itemSizes:L,dense:j=!1}=t,z=FC(),A=wb(),V=da(s),G=T.useRef(g),X=T.useRef(c??-1),$=T.useRef(null),B=T.useRef(!0),K=T.useRef(V),P=T.useRef(!!i.floating),D=T.useRef(r),H=T.useRef(!1),x=T.useRef(!1),w=jo(b),O=jo(r),C=jo(I),q=jo(i.floating),F=jo(c),[J,se]=T.useState(),[he,ge]=T.useState(),je=da(function(Oe,it,Ge){Ge===void 0&&(Ge=!1);function Ze(Z){m?(se(Z.id),A==null||A.events.emit("virtualfocus",Z),N&&(N.current=Z)):Fu(Z,{preventScroll:!0,sync:SX()&&xL()?$3||H.current:!1})}const Re=Oe.current[it.current];Re&&Ze(Re),requestAnimationFrame(()=>{const Z=Oe.current[it.current]||Re;if(!Z)return;Re||Ze(Z);const Te=C.current;Te&&Me&&(Ge||!B.current)&&(Z.scrollIntoView==null||Z.scrollIntoView(typeof Te=="boolean"?{block:"nearest",inline:"nearest"}:Te))})});en(()=>{document.createElement("div").focus({get preventScroll(){return $3=!0,!1}})},[]),en(()=>{l&&(r&&i.floating?G.current&&c!=null&&(x.current=!0,X.current=c,V(c)):P.current&&(X.current=-1,K.current(null)))},[l,r,i.floating,c,V]),en(()=>{if(l&&r&&i.floating)if(o==null){if(H.current=!1,F.current!=null)return;if(P.current&&(X.current=-1,je(a,X)),(!D.current||!P.current)&&G.current&&($.current!=null||G.current===!0&&$.current==null)){let Oe=0;const it=()=>{a.current[0]==null?(Oe<2&&(Oe?requestAnimationFrame:queueMicrotask)(it),Oe++):(X.current=$.current==null||mI($.current,E,p)||f?cI(a,w.current):R3(a,w.current),$.current=null,V(X.current))};it()}}else y0(a,o)||(X.current=o,je(a,X,x.current),x.current=!1)},[l,r,i.floating,o,F,f,a,E,p,V,je,w]),en(()=>{var Oe;if(!l||i.floating||!A||m||!P.current)return;const it=A.nodesRef.current,Ge=(Oe=it.find(Z=>Z.id===z))==null||(Oe=Oe.context)==null?void 0:Oe.elements.floating,Ze=hl(Yi(i.floating)),Re=it.some(Z=>Z.context&&hi(Z.context.elements.floating,Ze));Ge&&!Re&&B.current&&Ge.focus({preventScroll:!0})},[l,i.floating,A,z,m]),en(()=>{if(!l||!A||!m||z)return;function Oe(it){ge(it.id),N&&(N.current=it)}return A.events.on("virtualfocus",Oe),()=>{A.events.off("virtualfocus",Oe)}},[l,A,m,z,N]),en(()=>{K.current=V,P.current=!!i.floating}),en(()=>{r||($.current=null)},[r]),en(()=>{D.current=r},[r]);const ze=o!=null,Me=T.useMemo(()=>{function Oe(Ge){if(!r)return;const Ze=a.current.indexOf(Ge);Ze!==-1&&V(Ze)}return{onFocus(Ge){let{currentTarget:Ze}=Ge;Oe(Ze)},onClick:Ge=>{let{currentTarget:Ze}=Ge;return Ze.focus({preventScroll:!0})},...y&&{onMouseMove(Ge){let{currentTarget:Ze}=Ge;Oe(Ze)},onPointerLeave(Ge){let{pointerType:Ze}=Ge;!B.current||Ze==="touch"||(X.current=-1,je(a,X),V(null),m||Fu(q.current,{preventScroll:!0}))}}}},[r,q,je,y,a,V,m]),tt=da(Oe=>{if(B.current=!1,H.current=!0,!O.current&&Oe.currentTarget===q.current)return;if(f&&z3(Oe.key,E,p)){la(Oe),n(!1,Oe.nativeEvent,"list-navigation"),mi(i.domReference)&&!m&&i.domReference.focus();return}const it=X.current,Ge=cI(a,b),Ze=R3(a,b);if(Oe.key==="Home"&&(la(Oe),X.current=Ge,V(X.current)),Oe.key==="End"&&(la(Oe),X.current=Ze,V(X.current)),S>1){const Re=L||Array.from({length:a.current.length},()=>({width:1,height:1})),Z=TTe(Re,S,j),Te=Z.findIndex(He=>He!=null&&!s_(a.current,He,b)),Fe=Z.reduce((He,ne,pe)=>ne!=null&&!s_(a.current,ne,b)?pe:He,-1);if(X.current=Z[STe({current:Z.map(He=>He!=null?a.current[He]:null)},{event:Oe,orientation:E,loop:h,cols:S,disabledIndices:xTe([...b||a.current.map((He,ne)=>s_(a.current,ne)?ne:void 0),void 0],Z),minIndex:Te,maxIndex:Fe,prevIndex:CTe(X.current>Ze?Ge:X.current,Re,Z,S,Oe.key===bb?"bl":Oe.key===Sg?"tr":"tl"),stopEvent:!0})],V(X.current),E==="both")return}if(H3(Oe.key,E)){if(la(Oe),r&&!m&&hl(Oe.currentTarget.ownerDocument)===Oe.currentTarget){X.current=mI(Oe.key,E,p)?Ge:Ze,V(X.current);return}mI(Oe.key,E,p)?h?X.current=it>=Ze?u&&it!==a.current.length?-1:Ge:Sa(a,{startingIndex:it,disabledIndices:b}):X.current=Math.min(Ze,Sa(a,{startingIndex:it,disabledIndices:b})):h?X.current=it<=Ge?u&&it!==-1?a.current.length:Ze:Sa(a,{startingIndex:it,decrement:!0,disabledIndices:b}):X.current=Math.max(Ge,Sa(a,{startingIndex:it,decrement:!0,disabledIndices:b})),y0(a,X.current)?V(null):V(X.current)}}),Tt=T.useMemo(()=>m&&r&&ze&&{"aria-activedescendant":he||J},[m,r,ze,he,J]),rt=T.useMemo(()=>({"aria-orientation":E==="both"?void 0:E,...!TX(i.domReference)&&Tt,onKeyDown:tt,onPointerMove(){B.current=!0}}),[Tt,tt,i.domReference,E]),yt=T.useMemo(()=>{function Oe(Ge){g==="auto"&&_X(Ge.nativeEvent)&&(G.current=!0)}function it(Ge){G.current=g,g==="auto"&&CL(Ge.nativeEvent)&&(G.current=!0)}return{...Tt,onKeyDown(Ge){B.current=!1;const Ze=Ge.key.indexOf("Arrow")===0,Re=tCe(Ge.key,E,p),Z=z3(Ge.key,E,p),Te=H3(Ge.key,E),Fe=(f?Re:Te)||Ge.key==="Enter"||Ge.key.trim()==="";if(m&&r){const We=A==null?void 0:A.nodesRef.current.find(Yt=>Yt.parentId==null),st=A&&We?FTe(A.nodesRef.current,We.id):null;if(Ze&&st&&N){const Yt=new KeyboardEvent("keydown",{key:Ge.key,bubbles:!0});if(Re||Z){var He,ne;const Kn=((He=st.context)==null?void 0:He.elements.domReference)===Ge.currentTarget,kn=Z&&!Kn?(ne=st.context)==null?void 0:ne.elements.domReference:Re?a.current.find(Ii=>(Ii==null?void 0:Ii.id)===J):null;kn&&(la(Ge),kn.dispatchEvent(Yt),ge(void 0))}if(Te&&st.context&&st.context.open&&st.parentId&&Ge.currentTarget!==st.context.elements.domReference){var pe;la(Ge),(pe=st.context.elements.domReference)==null||pe.dispatchEvent(Yt);return}}return tt(Ge)}if(!(!r&&!v&&Ze)){if(Fe&&($.current=f&&Te?null:Ge.key),f){Re&&(la(Ge),r?(X.current=cI(a,w.current),V(X.current)):n(!0,Ge.nativeEvent,"list-navigation"));return}Te&&(c!=null&&(X.current=c),la(Ge),!r&&v?n(!0,Ge.nativeEvent,"list-navigation"):tt(Ge),r&&V(X.current))}},onFocus(){r&&!m&&V(null)},onPointerDown:it,onMouseDown:Oe,onClick:Oe}},[J,Tt,tt,w,g,a,f,V,n,r,v,E,p,c,A,m,N]);return T.useMemo(()=>l?{reference:yt,floating:rt,item:Me}:{},[l,yt,rt,Me])}const nCe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function ZX(e,t){var r;t===void 0&&(t={});const{open:n,floatingId:i}=e,{enabled:a=!0,role:o="dialog"}=t,s=(r=nCe.get(o))!=null?r:o,l=UC(),u=FC()!=null,h=T.useMemo(()=>s==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:n?i:void 0}:{"aria-expanded":n?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":n?i:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:l},...s==="menu"&&u&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[s,i,u,n,l,o]),f=T.useMemo(()=>{const m={id:i,...s&&{role:s}};return s==="tooltip"||o==="label"?m:{...m,...s==="menu"&&{"aria-labelledby":l}}},[s,i,l,o]),p=T.useCallback(m=>{let{active:g,selected:y}=m;const v={role:"option",...g&&{id:i+"-option"}};switch(o){case"select":return{...v,"aria-selected":g&&y};case"combobox":return{...v,...g&&{"aria-selected":!0}}}return{}},[i,o]);return T.useMemo(()=>a?{reference:h,floating:f,item:p}:{},[a,h,f,p])}function iCe(e,t){var r;const{open:n,dataRef:i}=e,{listRef:a,activeIndex:o,onMatch:s,onTypingChange:l,enabled:c=!0,findMatch:u=null,resetMs:h=750,ignoreKeys:f=[],selectedIndex:p=null}=t,m=T.useRef(),g=T.useRef(""),y=T.useRef((r=p??o)!=null?r:-1),v=T.useRef(null),b=da(s),E=da(l),S=jo(u),I=jo(f);en(()=>{n&&(clearTimeout(m.current),v.current=null,g.current="")},[n]),en(()=>{if(n&&g.current===""){var A;y.current=(A=p??o)!=null?A:-1}},[n,p,o]);const N=da(A=>{A?i.current.typing||(i.current.typing=A,E(A)):i.current.typing&&(i.current.typing=A,E(A))}),L=da(A=>{function V(K,P,D){const H=S.current?S.current(P,D):P.find(x=>(x==null?void 0:x.toLocaleLowerCase().indexOf(D.toLocaleLowerCase()))===0);return H?K.indexOf(H):-1}const G=a.current;if(g.current.length>0&&g.current[0]!==" "&&(V(G,G,g.current)===-1?N(!1):A.key===" "&&la(A)),G==null||I.current.includes(A.key)||A.key.length!==1||A.ctrlKey||A.metaKey||A.altKey)return;n&&A.key!==" "&&(la(A),N(!0)),G.every(K=>{var P,D;return K?((P=K[0])==null?void 0:P.toLocaleLowerCase())!==((D=K[1])==null?void 0:D.toLocaleLowerCase()):!0})&&g.current===A.key&&(g.current="",y.current=v.current),g.current+=A.key,clearTimeout(m.current),m.current=setTimeout(()=>{g.current="",y.current=v.current,N(!1)},h);const $=y.current,B=V(G,[...G.slice(($||0)+1),...G.slice(0,($||0)+1)],g.current);B!==-1?(b(B),v.current=B):A.key!==" "&&(g.current="",N(!1))}),j=T.useMemo(()=>({onKeyDown:L}),[L]),z=T.useMemo(()=>({onKeyDown:L,onKeyUp(A){A.key===" "&&N(!1)}}),[L,N]);return T.useMemo(()=>c?{reference:j,floating:z}:{},[c,j,z])}function G3(e,t){const[r,n]=e;let i=!1;const a=t.length;for(let o=0,s=a-1;o<a;s=o++){const[l,c]=t[o]||[0,0],[u,h]=t[s]||[0,0];c>=n!=h>=n&&r<=(u-l)*(n-c)/(h-c)+l&&(i=!i)}return i}function aCe(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function oCe(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:r=!1,requireIntent:n=!0}=e;let i,a=!1,o=null,s=null,l=performance.now();function c(h,f){const p=performance.now(),m=p-l;if(o===null||s===null||m===0)return o=h,s=f,l=p,null;const g=h-o,y=f-s,b=Math.sqrt(g*g+y*y)/m;return o=h,s=f,l=p,b}const u=h=>{let{x:f,y:p,placement:m,elements:g,onClose:y,nodeId:v,tree:b}=h;return function(S){function I(){clearTimeout(i),y()}if(clearTimeout(i),!g.domReference||!g.floating||m==null||f==null||p==null)return;const{clientX:N,clientY:L}=S,j=[N,L],z=Vc(S),A=S.type==="mouseleave",V=hi(g.floating,z),G=hi(g.domReference,z),X=g.domReference.getBoundingClientRect(),$=g.floating.getBoundingClientRect(),B=m.split("-")[0],K=f>$.right-$.width/2,P=p>$.bottom-$.height/2,D=aCe(j,X),H=$.width>X.width,x=$.height>X.height,w=(H?X:$).left,O=(H?X:$).right,C=(x?X:$).top,q=(x?X:$).bottom;if(V&&(a=!0,!A))return;if(G&&(a=!1),G&&!A){a=!0;return}if(A&&ln(S.relatedTarget)&&hi(g.floating,S.relatedTarget)||b&&Bh(b.nodesRef.current,v).some(se=>{let{context:he}=se;return he==null?void 0:he.open}))return;if(B==="top"&&p>=X.bottom-1||B==="bottom"&&p<=X.top+1||B==="left"&&f>=X.right-1||B==="right"&&f<=X.left+1)return I();let F=[];switch(B){case"top":F=[[w,X.top+1],[w,$.bottom-1],[O,$.bottom-1],[O,X.top+1]];break;case"bottom":F=[[w,$.top+1],[w,X.bottom-1],[O,X.bottom-1],[O,$.top+1]];break;case"left":F=[[$.right-1,q],[$.right-1,C],[X.left+1,C],[X.left+1,q]];break;case"right":F=[[X.right-1,q],[X.right-1,C],[$.left+1,C],[$.left+1,q]];break}function J(se){let[he,ge]=se;switch(B){case"top":{const je=[H?he+t/2:K?he+t*4:he-t*4,ge+t+1],ze=[H?he-t/2:K?he+t*4:he-t*4,ge+t+1],Me=[[$.left,K||H?$.bottom-t:$.top],[$.right,K?H?$.bottom-t:$.top:$.bottom-t]];return[je,ze,...Me]}case"bottom":{const je=[H?he+t/2:K?he+t*4:he-t*4,ge-t],ze=[H?he-t/2:K?he+t*4:he-t*4,ge-t],Me=[[$.left,K||H?$.top+t:$.bottom],[$.right,K?H?$.top+t:$.bottom:$.top+t]];return[je,ze,...Me]}case"left":{const je=[he+t+1,x?ge+t/2:P?ge+t*4:ge-t*4],ze=[he+t+1,x?ge-t/2:P?ge+t*4:ge-t*4];return[...[[P||x?$.right-t:$.left,$.top],[P?x?$.right-t:$.left:$.right-t,$.bottom]],je,ze]}case"right":{const je=[he-t,x?ge+t/2:P?ge+t*4:ge-t*4],ze=[he-t,x?ge-t/2:P?ge+t*4:ge-t*4],Me=[[P||x?$.left+t:$.right,$.top],[P?x?$.left+t:$.right:$.left+t,$.bottom]];return[je,ze,...Me]}}}if(!G3([N,L],F)){if(a&&!D)return I();if(!A&&n){const se=c(S.clientX,S.clientY);if(se!==null&&se<.1)return I()}G3([N,L],J([f,p]))?!a&&n&&(i=window.setTimeout(I,40)):I()}}};return u.__options={blockPointerEvents:r},u}const sCe=({arrowRef:e,placement:t})=>{const r=[];return r.push(gTe(8)),r.push(t==="auto"?bTe():vTe()),r.push(yTe({padding:8})),e!=null&&e.current&&r.push(wTe({element:e.current})),r},lCe=({placement:e})=>e==="auto"?void 0:e,cCe=({placement:e})=>({top:"bottom",right:"left",bottom:"top",left:"right"})[e.split("-")[0]],eJ=({open:e,arrowRef:t,placement:r="top",setOpen:n})=>JX({placement:lCe({placement:r}),open:e,onOpenChange:n,whileElementsMounted:MX,middleware:sCe({placement:r,arrowRef:t})}),tJ=({context:e,trigger:t,role:r="tooltip",interactions:n=[]})=>QX([YX(e,{enabled:t==="click"}),MTe(e,{enabled:t==="hover",handleClose:oCe()}),XX(e),ZX(e,{role:r}),...n]),uCe=({animation:e="duration-300",arrow:t=!0,children:r,className:n,content:i,placement:a="top",style:o="dark",theme:s,trigger:l="hover",minWidth:c,...u})=>{const h=T.useRef(null),[f,p]=T.useState(!1),m=eJ({open:f,placement:a,arrowRef:h,setOpen:p}),{context:g,middlewareData:{arrow:{x:y,y:v}={}},refs:b,strategy:E,update:S,x:I,y:N}=m,L=eCe(g),{getFloatingProps:j,getReferenceProps:z}=tJ({context:g,role:"tooltip",trigger:l,interactions:[L]});return T.useEffect(()=>{if(b.reference.current&&b.floating.current&&f)return MX(b.reference.current,b.floating.current,S)},[f,b.floating,b.reference,S]),d.jsxs(d.Fragment,{children:[d.jsx("div",{ref:b.setReference,className:s.target,"data-testid":"flowbite-tooltip-target",...z(),children:r}),d.jsxs("div",{ref:b.setFloating,"data-testid":"flowbite-tooltip",...j({className:le(s.base,e&&`${s.animation} ${e}`,!f&&s.hidden,s.style[o],n),style:{position:E,top:N??" ",left:I??" ",minWidth:c},...u}),children:[d.jsx("div",{className:s.content,children:i}),t&&d.jsx("div",{className:le(s.arrow.base,o==="dark"&&s.arrow.style.dark,o==="light"&&s.arrow.style.light,o==="auto"&&s.arrow.style.auto),"data-testid":"flowbite-tooltip-arrow",ref:h,style:{top:v??" ",left:y??" ",right:" ",bottom:" ",[cCe({placement:m.placement})]:s.arrow.placement},children:""})]})]})},BC=({animation:e="duration-300",arrow:t=!0,children:r,className:n,content:i,placement:a="top",style:o="dark",theme:s={},trigger:l="hover",...c})=>{const u=Pe(ut().tooltip,s);return d.jsx(uCe,{animation:e,arrow:t,content:i,placement:a,style:o,theme:u,trigger:l,className:n,...c,children:r})};BC.displayName="Tooltip";function rJ(e){return Bi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function nJ(e){return Bi({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM72 272a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm104-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H176c-8.8 0-16-7.2-16-16s7.2-16 16-16zM72 368a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm88 0c0-8.8 7.2-16 16-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H176c-8.8 0-16-7.2-16-16z"},child:[]}]})(e)}function dCe(e){return Bi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 296c0 66.3-53.7 120-120 120h-8c-17.7 0-32-14.3-32-32s14.3-32 32-32h8c30.9 0 56-25.1 56-56v-8H320c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h64c35.3 0 64 28.7 64 64v32 32 72zm-256 0c0 66.3-53.7 120-120 120H64c-17.7 0-32-14.3-32-32s14.3-32 32-32h8c30.9 0 56-25.1 56-56v-8H64c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h64c35.3 0 64 28.7 64 64v32 32 72z"},child:[]}]})(e)}const LL=(e,t)=>{var r;t(!0),(r=navigator==null?void 0:navigator.clipboard)==null||r.writeText(e).then(()=>{console.log("Copy Successfull")}).catch(n=>{console.error("Failed to Copy text: ",n),t(!1)}),setTimeout(()=>t(!1),4e3)},iJ=T.forwardRef(({valueToCopy:e,icon:t=nJ,theme:r={},className:n,...i},a)=>{const[o,s]=T.useState(!1),l=Pe(ut().clipboard.withIcon,r);return d.jsx("button",{className:le(l.base,n),onClick:()=>LL(e,s),...i,ref:a,children:o?d.jsx(rJ,{"aria-hidden":!0,className:l.icon.successIcon}):d.jsx(t,{"aria-hidden":!0,className:l.icon.defaultIcon})})}),aJ=T.forwardRef(({valueToCopy:e,icon:t=nJ,label:r="Copy",theme:n={},className:i,...a},o)=>{const[s,l]=T.useState(!1),c=Pe(ut().clipboard.withIconText,n);return d.jsx("button",{className:le(c.base,i),onClick:()=>LL(e,l),...a,ref:o,children:s?d.jsxs("span",{className:c.label.base,children:[d.jsx(rJ,{"aria-hidden":!0,className:c.icon.successIcon}),d.jsx("span",{className:c.label.successText,children:"Copied"})]}):d.jsxs("span",{className:c.label.base,children:[d.jsx(t,{"aria-hidden":!0,className:c.icon.defaultIcon}),d.jsx("span",{className:c.label.defaultText,children:r})]})})}),oJ=T.forwardRef(({className:e,valueToCopy:t,label:r,theme:n={},...i},a)=>{const[o,s]=T.useState(!1),l=Pe(ut().clipboard.button,n);return d.jsx(BC,{content:o?"Copied":"Copy to clipboard",className:"[&_*]:cursor-pointer",children:d.jsx("button",{className:le(l.base,e),onClick:()=>LL(t,s),...i,ref:a,children:d.jsx("span",{className:l.label,children:r})})})});oJ.displayName="Clipboard";iJ.displayName="Clipboard.WithIcon";aJ.displayName="Clipboard.WithIconText";Object.assign(oJ,{WithIcon:iJ,WithIconText:aJ});const Eb=({children:e,className:t,color:r="default",theme:n={},value:i,...a})=>{const o=Pe(ut().helperText,n);return d.jsx("p",{className:le(o.root.base,o.root.colors[r],t),...a,children:i??e??""})};Eb.displayName="HelperText";const sJ=T.forwardRef(({addon:e,className:t,color:r="gray",helperText:n,icon:i,rightIcon:a,shadow:o,sizing:s="md",theme:l={},type:c="text",...u},h)=>{const f=Pe(ut().textInput,l);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:le(f.base,t),children:[e&&d.jsx("span",{className:f.addon,children:e}),d.jsxs("div",{className:f.field.base,children:[i&&d.jsx("div",{className:f.field.icon.base,children:d.jsx(i,{className:f.field.icon.svg})}),a&&d.jsx("div",{"data-testid":"right-icon",className:f.field.rightIcon.base,children:d.jsx(a,{className:f.field.rightIcon.svg})}),d.jsx("input",{className:le(f.field.input.base,f.field.input.colors[r],f.field.input.sizes[s],f.field.input.withIcon[i?"on":"off"],f.field.input.withRightIcon[a?"on":"off"],f.field.input.withAddon[e?"on":"off"],f.field.input.withShadow[o?"on":"off"]),type:c,...u,ref:h})]})]}),n&&d.jsx(Eb,{color:r,children:n})]})});sJ.displayName="TextInput";const lJ=T.createContext(void 0);function $C(){const e=T.useContext(lJ);if(!e)throw new Error("useDatePickerContext should be used within the DatePickerContext provider!");return e}var An=(e=>(e[e.Days=0]="Days",e[e.Months=1]="Months",e[e.Years=2]="Years",e[e.Decades=3]="Decades",e))(An||{}),cJ=(e=>(e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e))(cJ||{});const $m=(e,t,r)=>{const n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();if(t&&r){const i=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),a=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();return n>=i&&n<=a}if(t){const i=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return n>=i}if(r){const i=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();return n<=i}return!0},bv=(e,t)=>(e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e.getTime()===t.getTime()),Dw=(e,t,r)=>($m(e,t,r)||(t&&e<t?e=t:r&&e>r&&(e=r)),e),hCe=(e,t)=>{const r=new Date(e.getFullYear(),e.getMonth(),1);let i=r.getDay()-t;return i<0&&(i+=7),jL(r,-i)},fCe=(e,t)=>{const r=[],n=new Date(0);n.setDate(n.getDate()-n.getDay()+t);const i=new Intl.DateTimeFormat(e,{weekday:"short"});for(let a=0;a<7;a++)r.push(i.format(jL(n,a)));return r},jL=(e,t)=>{const r=new Date(e);return r.setDate(r.getDate()+t),r},pCe=(e,t)=>{const r=new Date(e);return r.setMonth(r.getMonth()+t),r},Vp=(e,t)=>{const r=new Date(e);return r.setFullYear(r.getFullYear()+t),r},Bp=(e,t,r)=>{let n={day:"numeric",month:"long",year:"numeric"};return r&&(n=r),new Intl.DateTimeFormat(e,n).format(t)},$p=(e,t)=>{const r=e.getFullYear();return Math.floor(r/t)*t},mCe=(e,t)=>{const r=e.getFullYear(),n=t+9;return r>=t&&r<=n},gCe=({theme:e={}})=>{const{theme:t,weekStart:r,minDate:n,maxDate:i,viewDate:a,selectedDate:o,changeSelectedDate:s,language:l}=$C(),c=Pe(t.views.days,e),u=fCe(l,r),h=hCe(a,r);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:c.header.base,children:u.map((f,p)=>d.jsx("span",{className:c.header.title,children:f},p))}),d.jsx("div",{className:c.items.base,children:[...Array(42)].map((f,p)=>{const m=jL(h,p),g=Bp(l,m,{day:"numeric"}),y=o&&bv(o,m),v=!$m(m,n,i);return d.jsx("button",{disabled:v,type:"button",className:le(c.items.item.base,y&&c.items.item.selected,v&&c.items.item.disabled),onClick:()=>{v||s(m,!0)},children:g},p)})})]})},yCe=({theme:e={}})=>{const{theme:t,viewDate:r,selectedDate:n,minDate:i,maxDate:a,setViewDate:o,setView:s}=$C(),l=Pe(t.views.decades,e),c=$p(r,100);return d.jsx("div",{className:l.items.base,children:[...Array(12)].map((u,h)=>{const f=c-10+h*10;new Date(r.getTime()).setFullYear(f+r.getFullYear()%10);const m=new Date(f,0,1),g=Vp(m,9),y=n&&mCe(n,f),v=!$m(m,i,a)&&!$m(g,i,a);return d.jsx("button",{disabled:v,type:"button",className:le(l.items.item.base,y&&l.items.item.selected,v&&l.items.item.disabled),onClick:()=>{v||(n&&o(Vp(r,f-n.getFullYear())),s(An.Years))},children:f},h)})})},vCe=({theme:e={}})=>{const{theme:t,minDate:r,maxDate:n,selectedDate:i,viewDate:a,language:o,setViewDate:s,setView:l}=$C(),c=Pe(t.views.months,e);return d.jsx("div",{className:c.items.base,children:[...Array(12)].map((u,h)=>{const f=new Date;f.setMonth(h,1),f.setFullYear(a.getFullYear());const p=Bp(o,f,{month:"short"}),m=i&&bv(i,f),g=!$m(f,r,n);return d.jsx("button",{disabled:g,type:"button",className:le(c.items.item.base,m&&c.items.item.selected,g&&c.items.item.disabled),onClick:()=>{g||(s(f),l(An.Days))},children:p},h)})})},bCe=({theme:e={}})=>{const{theme:t,selectedDate:r,minDate:n,maxDate:i,viewDate:a,setViewDate:o,setView:s}=$C(),l=Pe(t.views.years,e);return d.jsx("div",{className:l.items.base,children:[...Array(12)].map((c,u)=>{const f=$p(a,10)+u,p=new Date(a.getTime());p.setFullYear(f);const m=r&&bv(r,p),g=!$m(p,n,i);return d.jsx("button",{disabled:g,type:"button",className:le(l.items.item.base,m&&l.items.item.selected,g&&l.items.item.disabled),onClick:()=>{g||(o(p),s(An.Months))},children:f},u)})})},wCe=({title:e,open:t,inline:r=!1,autoHide:n=!0,showClearButton:i=!0,labelClearButton:a="Clear",showTodayButton:o=!0,labelTodayButton:s="Today",defaultValue:l,minDate:c,maxDate:u,language:h="en",weekStart:f=cJ.Sunday,className:p,theme:m={},onChange:g,label:y,value:v,...b},E)=>{const S=Pe(ut().datepicker,m),I=l?Dw(l,c,u):null,N=T.useMemo(()=>l?Dw(l,c,u):new Date,[]),[L,j]=T.useState(t),[z,A]=T.useState(An.Days),[V,G]=T.useState(v??I),[X,$]=T.useState(v??N),B=T.useRef(null),K=T.useRef(null),P=(q,F)=>{G(q),(q===null||q)&&g&&g(q),n&&z===An.Days&&F==!0&&!r&&j(!1)},D=()=>{P(I,!0),l&&$(l)};T.useImperativeHandle(E,()=>({focus(){var q;(q=B.current)==null||q.focus()},clear(){D()}}));const H=q=>{switch(q){case An.Decades:return d.jsx(yCe,{theme:S.views.decades});case An.Years:return d.jsx(bCe,{theme:S.views.years});case An.Months:return d.jsx(vCe,{theme:S.views.months});case An.Days:default:return d.jsx(gCe,{theme:S.views.days})}},x=()=>{switch(z){case An.Days:return An.Months;case An.Months:return An.Years;case An.Years:return An.Decades}return z},w=()=>{switch(z){case An.Decades:return`${$p(X,100)-10} - ${$p(X,100)+100}`;case An.Years:return`${$p(X,10)} - ${$p(X,10)+11}`;case An.Months:return Bp(h,X,{year:"numeric"});case An.Days:default:return Bp(h,X,{month:"long",year:"numeric"})}},O=(q,F,J)=>{switch(q){case An.Days:return new Date(pCe(F,J));case An.Months:return new Date(Vp(F,J));case An.Years:return new Date(Vp(F,J*10));case An.Decades:return new Date(Vp(F,J*100));default:return new Date(Vp(F,J*10))}};T.useEffect(()=>{const q=F=>{var he,ge;const J=(he=K==null?void 0:K.current)==null?void 0:he.contains(F.target),se=(ge=B==null?void 0:B.current)==null?void 0:ge.contains(F.target);!J&&!se&&j(!1)};return document.addEventListener("mousedown",q),()=>{document.removeEventListener("mousedown",q)}},[B,K,j]),T.useEffect(()=>{const q=v&&Dw(new Date(v),c,u),F=V&&Dw(new Date(V),c,u);F&&q&&!bv(q,F)&&G(q),V==null&&G(I)},[v,G,$,V]);const C=v===null?y:Bp(h,V||new Date);return d.jsx(lJ.Provider,{value:{theme:S,language:h,minDate:c,maxDate:u,weekStart:f,isOpen:L,setIsOpen:j,view:z,setView:A,viewDate:X,setViewDate:$,selectedDate:V,setSelectedDate:G,changeSelectedDate:P},children:d.jsxs("div",{className:le(S.root.base,p),children:[!r&&d.jsx(sJ,{theme:S.root.input,icon:wEe,ref:B,onFocus:()=>{V&&!bv(X,V)&&$(V),j(!0)},value:C,readOnly:!0,defaultValue:I?Bp(h,I):y,...b}),(L||r)&&d.jsx("div",{ref:K,className:le(S.popup.root.base,r&&S.popup.root.inline),children:d.jsxs("div",{className:S.popup.root.inner,children:[d.jsxs("div",{className:S.popup.header.base,children:[e&&d.jsx("div",{className:S.popup.header.title,children:e}),d.jsxs("div",{className:S.popup.header.selectors.base,children:[d.jsx("button",{type:"button",className:le(S.popup.header.selectors.button.base,S.popup.header.selectors.button.prev),onClick:()=>$(O(z,X,-1)),children:d.jsx(vEe,{})}),d.jsx("button",{type:"button",className:le(S.popup.header.selectors.button.base,S.popup.header.selectors.button.view),onClick:()=>A(x()),children:w()}),d.jsx("button",{type:"button",className:le(S.popup.header.selectors.button.base,S.popup.header.selectors.button.next),onClick:()=>$(O(z,X,1)),children:d.jsx(bEe,{})})]})]}),d.jsx("div",{className:S.popup.view.base,children:H(z)}),(i||o)&&d.jsxs("div",{className:S.popup.footer.base,children:[o&&d.jsx("button",{type:"button",className:le(S.popup.footer.button.base,S.popup.footer.button.today),onClick:()=>{const q=new Date;P(q,!0),$(q)},children:s}),i&&d.jsx("button",{type:"button",className:le(S.popup.footer.button.base,S.popup.footer.button.clear),onClick:()=>{P(null,!0)},children:a})]})]})})]})})},ECe=T.forwardRef(wCe);ECe.displayName="Datepicker";const uJ=T.createContext(void 0);function dJ(){const e=T.useContext(uJ);if(!e)throw new Error("useDrawerContext should be used within the DrawerContext provider!");return e}function _Ce(e){return Bi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(e)}function SCe(e){return Bi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}const hJ=({children:e,className:t,closeIcon:r=SCe,theme:n={},title:i,titleIcon:a=_Ce,...o})=>{const s=T.useId(),{id:l,isOpen:c,onClose:u,theme:h}=dJ(),f=Pe(h.header,n);return d.jsxs("div",{className:t,...o,children:[d.jsxs("h5",{className:f.inner.titleText,id:l,children:[d.jsx(a,{"aria-hidden":!0,className:f.inner.titleIcon}),i]}),d.jsxs("button",{onClick:u,"data-testid":"close-drawer",className:f.inner.closeButton,children:[d.jsx(r,{"aria-hidden":!0,className:f.inner.closeIcon}),d.jsx("span",{className:"sr-only",children:"Close menu"})]}),d.jsx("span",{className:f.collapsed[c?"on":"off"],id:`flowbite-drawer-header-${s}`,children:e})]})};hJ.displayName="Drawer.Header";const fJ=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=dJ(),a=Pe(i.items,r);return d.jsx("div",{"data-testid":"flowbite-drawer-items",className:le(a.base,t),...n,children:e})};fJ.displayName="Drawer.Items";const pJ=({backdrop:e=!0,children:t,className:r,edge:n=!1,position:i="left",onClose:a,open:o=!1,theme:s={},...l})=>{const c=T.useId(),u=Pe(ut().drawer,s);return T.useEffect(()=>{const h=f=>{f.key==="Escape"&&o&&a&&a()};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[a,o]),d.jsxs(uJ.Provider,{value:{theme:u,onClose:a,isOpen:o,id:c},children:[d.jsx("div",{"aria-modal":!0,"aria-describedby":`drawer-dialog-${c}`,role:"dialog",tabIndex:-1,"data-testid":"flowbite-drawer",className:le(u.root.base,u.root.position[i][o?"on":"off"],n&&!o&&u.root.edge,r),...l,children:t}),o&&e&&d.jsx("div",{onClick:()=>a(),className:u.root.backdrop})]})};pJ.displayName="Drawer";Object.assign(pJ,{Header:hJ,Items:fJ});const mJ=T.createContext(void 0);function ML(){const e=T.useContext(mJ);if(!e)throw new Error("useDropdownContext should be used within the DropdownContext provider!");return e}const UL=({className:e,theme:t={},...r})=>{const{theme:n}=ML(),i=t.divider??n.floating.divider;return d.jsx("div",{className:le(i,e),...r})},gJ=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=ML(),a=r.header??i.floating.header;return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:le(a,t),...n,children:e}),d.jsx(UL,{})]})},yJ=T.forwardRef(({children:e,className:t,icon:r,onClick:n,theme:i={},...a},o)=>{const{ref:s,index:l}=ATe({label:typeof e=="string"?e:void 0}),c=FX([o,s]),{theme:u,activeIndex:h,dismissOnClick:f,getItemProps:p,handleSelect:m}=ML(),g=h===l,y=Pe(u.floating.item,i),v=a;return d.jsx("li",{role:"menuitem",className:y.container,children:d.jsxs(bL,{ref:c,className:le(y.base,t),...v,...p({onClick:()=>{n==null||n(),f&&m(null)}}),tabIndex:g?0:-1,children:[r&&d.jsx(r,{className:y.icon}),e]})})});yJ.displayName="DropdownItem";const TCe={top:xEe,right:KY,bottom:WY,left:CEe},CCe=({refs:e,children:t,inline:r,theme:n,disabled:i,setButtonWidth:a,getReferenceProps:o,renderTrigger:s,...l})=>{const c=e.reference,u=o();if(T.useEffect(()=>{c.current&&(a==null||a(c.current.clientWidth))},[c,a]),s){const h=s(n);return T.cloneElement(h,{ref:e.setReference,disabled:i,...u,...h.props})}return r?d.jsx("button",{type:"button",ref:e.setReference,className:n==null?void 0:n.inlineWrapper,disabled:i,...u,children:t}):d.jsx(wL,{...l,disabled:i,type:"button",ref:e.setReference,...u,children:t})},vJ=({children:e,className:t,dismissOnClick:r=!0,theme:n={},enableTypeAhead:i=!0,renderTrigger:a,...o})=>{const[s,l]=T.useState(!1),[c,u]=T.useState(null),[h,f]=T.useState(null),[p,m]=T.useState(void 0),g=T.useRef([]),y=T.useRef([]),v=Pe(ut().dropdown,n),b=o,E=o["data-testid"]||"flowbite-dropdown-target",{placement:S=o.inline?"bottom-start":"bottom",trigger:I="click",label:N,inline:L,arrowIcon:j=!0,...z}=b,A=T.useCallback(w=>{f(w),l(!1)},[]),V=T.useCallback(w=>{s?u(w):A(w)},[s,A]),{context:G,floatingStyles:X,refs:$}=eJ({open:s,setOpen:l,placement:S}),B=rCe(G,{listRef:g,activeIndex:c,selectedIndex:h,onNavigate:u}),K=iCe(G,{listRef:y,activeIndex:c,selectedIndex:h,onMatch:V,enabled:i}),{getReferenceProps:P,getFloatingProps:D,getItemProps:H}=tJ({context:G,role:"menu",trigger:I,interactions:[B,K]}),x=T.useMemo(()=>{const[w]=S.split("-");return TCe[w]??WY},[S]);return d.jsxs(mJ.Provider,{value:{theme:v,activeIndex:c,dismissOnClick:r,getItemProps:H,handleSelect:A},children:[d.jsxs(CCe,{...z,refs:$,inline:L,theme:v,"data-testid":E,className:le(v.floating.target,z.className),setButtonWidth:m,getReferenceProps:P,renderTrigger:a,children:[N,j&&d.jsx(x,{className:v.arrowIcon})]}),s&&d.jsx(qX,{context:G,modal:!1,children:d.jsx("div",{ref:$.setFloating,style:{...X,minWidth:p},"data-testid":"flowbite-dropdown","aria-expanded":s,...D({className:le(v.floating.base,v.floating.animation,"duration-100",!s&&v.floating.hidden,v.floating.style.auto,t)}),children:d.jsx(NTe,{elementsRef:g,labelsRef:y,children:d.jsx("ul",{className:v.content,tabIndex:-1,children:e})})})})]})};vJ.displayName="Dropdown";gJ.displayName="Dropdown.Header";UL.displayName="Dropdown.Divider";const xCe=Object.assign(vJ,{Item:yJ,Header:gJ,Divider:UL}),Ra=T.forwardRef(({className:e,color:t="gray",helperText:r,sizing:n="md",theme:i={},...a},o)=>{const s=Pe(ut().fileInput,i);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:le(s.root.base,e),children:d.jsx("div",{className:s.field.base,children:d.jsx("input",{className:le(s.field.input.base,s.field.input.colors[t],s.field.input.sizes[n]),...a,type:"file",ref:o})})}),r&&d.jsx(Eb,{color:t,children:r})]})});Ra.displayName="FileInput";const ie=T.forwardRef(({label:e,helperText:t,color:r="default",sizing:n="md",variant:i,disabled:a=!1,theme:o={},className:s,...l},c)=>{const u=T.useId(),h=Pe(ut().floatingLabel,o);return d.jsxs("div",{children:[d.jsxs("div",{className:le("relative",i==="standard"?"z-0":""),children:[d.jsx("input",{type:"text",id:l.id?l.id:"floatingLabel"+u,"aria-describedby":"outlined_success_help",className:le(h.input[r][i][n],s),placeholder:" ","data-testid":"floating-label",disabled:a,...l,ref:c}),d.jsx("label",{htmlFor:l.id?l.id:"floatingLabel"+u,className:le(h.label[r][i][n],s),children:e})]}),d.jsx("p",{id:"outlined_helper_text"+u,className:le(h.helperText[r],s),children:t})]})});ie.displayName="FloatingLabel";const bJ=({alt:e,className:t,children:r,href:n,name:i,src:a,theme:o={},...s})=>{const l=Pe(ut().footer.brand,o);return d.jsx("div",{children:n?d.jsxs("a",{"data-testid":"flowbite-footer-brand",href:n,className:le(l.base,t),...s,children:[d.jsx("img",{alt:e,src:a,className:l.img}),d.jsx("span",{"data-testid":"flowbite-footer-brand-span",className:l.span,children:i}),r]}):d.jsx("img",{alt:e,"data-testid":"flowbite-footer-brand",src:a,className:le(l.img,t),...s})})},wJ=({by:e,className:t,href:r,theme:n={},year:i,...a})=>{const o=Pe(ut().footer.copyright,n);return d.jsxs("div",{"data-testid":"flowbite-footer-copyright",className:le(o.base,t),...a,children:[" ",i,r?d.jsx("a",{href:r,className:o.href,children:e}):d.jsx("span",{"data-testid":"flowbite-footer-copyright-span",className:o.span,children:e})]})},EJ=({className:e,theme:t={},...r})=>{const n=Pe(ut().footer.divider,t);return d.jsx("hr",{"data-testid":"footer-divider",className:le(n.base,e),...r})},_J=({ariaLabel:e,className:t,href:r,icon:n,theme:i={},...a})=>{const o=Pe(ut().footer.icon,i);return d.jsx("div",{children:r?d.jsx("a",{"aria-label":e,"data-testid":"flowbite-footer-icon",href:r,className:le(o.base,t),...a,children:d.jsx(n,{className:o.size})}):d.jsx(n,{"data-testid":"flowbite-footer-icon",className:o.size,...a})})},SJ=({as:e="a",children:t,className:r,href:n,theme:i={},...a})=>{const o=Pe(ut().footer.groupLink.link,i);return d.jsx("li",{className:le(o.base,r),children:d.jsx(e,{href:n,className:o.href,...a,children:t})})},TJ=({children:e,className:t,col:r=!1,theme:n={},...i})=>{const a=Pe(ut().footer.groupLink,n);return d.jsx("ul",{"data-testid":"footer-groupLink",className:le(a.base,r&&a.col,t),...i,children:e})},CJ=({as:e="h2",className:t,theme:r={},title:n,...i})=>{const a=Pe(ut().footer.title,r);return d.jsx(e,{"data-testid":"flowbite-footer-title",className:le(a.base,t),...i,children:n})},xJ=({bgDark:e=!1,children:t,className:r,container:n=!1,theme:i={},...a})=>{const o=Pe(ut().footer,i);return d.jsx("footer",{"data-testid":"flowbite-footer",className:le(o.root.base,e&&o.root.bgDark,n&&o.root.container,r),...a,children:t})};xJ.displayName="Footer";wJ.displayName="Footer.Copyright";SJ.displayName="Footer.Link";bJ.displayName="Footer.Brand";TJ.displayName="Footer.LinkGroup";_J.displayName="Footer.Icon";CJ.displayName="Footer.Title";EJ.displayName="Footer.Divider";Object.assign(xJ,{Copyright:wJ,Link:SJ,LinkGroup:TJ,Brand:bJ,Icon:_J,Title:CJ,Divider:EJ});const RJ=T.forwardRef(({theme:e={},icon:t=dCe,className:r,...n},i)=>{const a=Pe(ut().hr.icon,e);return d.jsxs("div",{className:a.base,children:[d.jsx("hr",{className:le(a.hrLine,r),role:"separator","data-testid":"flowbite-hr-icon",ref:i,...n}),d.jsx("div",{className:a.icon.base,children:d.jsx(t,{"aria-hidden":!0,className:a.icon.icon})})]})}),IJ=T.forwardRef(({theme:e={},className:t,...r},n)=>{const i=Pe(ut().hr.square,e);return d.jsx("hr",{className:le(i.base,t),role:"separator","data-testid":"flowbite-hr-square",ref:n,...r})}),NJ=T.forwardRef(({theme:e={},text:t,className:r,...n},i)=>{const a=Pe(ut().hr.text,e);return d.jsxs("div",{className:a.base,children:[d.jsx("hr",{className:le(a.hrLine,r),"data-testid":"flowbite-hr-text",role:"separator",ref:i,...n}),d.jsx("span",{className:a.text,children:t})]})}),AJ=T.forwardRef(({theme:e={},className:t,...r},n)=>{const i=Pe(ut().hr.trimmed,e);return d.jsx("hr",{className:le(i.base,t),role:"separator","data-testid":"flowbite-hr-trimmed",ref:n,...r})}),OJ=T.forwardRef(({theme:e={},className:t,...r},n)=>{const i=Pe(ut().hr.root,e);return d.jsx("hr",{className:le(i.base,t),role:"separator","data-testid":"flowbite-hr",ref:n,...r})});OJ.displayName="HR";AJ.displayName="HR.Trimmed";RJ.displayName="HR.Icon";NJ.displayName="HR.Text";IJ.displayName="HR.Square";Object.assign(OJ,{Trimmed:AJ,Icon:RJ,Text:NJ,Square:IJ});const kJ=({children:e,className:t,icon:r,theme:n={},...i})=>{const a=Pe(ut().list.item,n);return d.jsxs("li",{className:le(a.withIcon[r?"on":"off"],t),...i,children:[r&&d.jsx(r,{className:le(a.icon)}),e]})},PJ=({children:e,className:t,unstyled:r,nested:n,ordered:i,horizontal:a,theme:o={},...s})=>{const l=Pe(ut().list,o),c=i?"ol":"ul";return d.jsx(c,{className:le(l.root.base,l.root.ordered[i?"on":"off"],r&&l.root.unstyled,n&&l.root.nested,a&&l.root.horizontal,t),...s,children:e})};PJ.displayName="List";kJ.displayName="List.Item";Object.assign(PJ,{Item:kJ});const DJ=({active:e,children:t,className:r,href:n,icon:i,onClick:a,theme:o={},disabled:s,...l})=>{const c=Pe(ut().listGroup.item,o),u=typeof n<"u",h=u?"a":"button";return d.jsx("li",{className:le(c.base,r),children:d.jsxs(h,{href:n,onClick:a,type:u?void 0:"button",disabled:s,className:le(c.link.active[e?"on":"off"],c.link.disabled[s?"on":"off"],c.link.base,c.link.href[u?"on":"off"]),...l,children:[i&&d.jsx(i,{"aria-hidden":!0,"data-testid":"flowbite-list-group-item-icon",className:c.link.icon}),t]})})},LJ=({children:e,className:t,theme:r={},...n})=>{const i=Pe(ut().listGroup,r);return d.jsx("ul",{className:le(i.root.base,t),...n,children:e})};LJ.displayName="ListGroup";DJ.displayName="ListGroup.Item";Object.assign(LJ,{Item:DJ});const jJ=T.createContext(void 0);function HC(){const e=T.useContext(jJ);if(!e)throw new Error("useNavBarContext should be used within the NavbarContext provider!");return e}const MJ=({as:e="a",children:t,className:r,theme:n={},...i})=>{const{theme:a}=HC(),o=Pe(a.brand,n);return d.jsx(e,{className:le(o.base,r),...i,children:t})},UJ=({children:e,className:t,theme:r={},...n})=>{const{theme:i,isOpen:a}=HC(),o=Pe(i.collapse,r);return d.jsx("div",{"data-testid":"flowbite-navbar-collapse",className:le(o.base,o.hidden[a?"off":"on"],t),...n,children:d.jsx("ul",{className:o.list,children:e})})},FJ=({active:e,as:t="a",disabled:r,children:n,className:i,theme:a={},onClick:o,...s})=>{const{theme:l,setIsOpen:c}=HC(),u=Pe(l.link,a),h=f=>{c(!1),o==null||o(f)};return d.jsx("li",{children:d.jsx(t,{className:le(u.base,e&&u.active.on,!e&&!r&&u.active.off,u.disabled[r?"on":"off"],i),onClick:h,...s,children:n})})};function RCe(e){return Bi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(e)}const VJ=({barIcon:e=RCe,className:t,theme:r={},...n})=>{const{theme:i,isOpen:a,setIsOpen:o}=HC(),s=Pe(i.toggle,r),l=()=>{o(!a)};return d.jsxs("button",{"data-testid":"flowbite-navbar-toggle",onClick:l,className:le(s.base,t),...n,children:[d.jsx("span",{className:"sr-only",children:"Open main menu"}),d.jsx(e,{"aria-hidden":!0,className:s.icon})]})},BJ=({border:e,children:t,className:r,fluid:n=!1,menuOpen:i,rounded:a,theme:o={},...s})=>{const[l,c]=T.useState(i),u=Pe(ut().navbar,o);return d.jsx(jJ.Provider,{value:{theme:u,isOpen:l,setIsOpen:c},children:d.jsx("nav",{className:le(u.root.base,u.root.bordered[e?"on":"off"],u.root.rounded[a?"on":"off"],r),...s,children:d.jsx("div",{className:le(u.root.inner.base,u.root.inner.fluid[n?"on":"off"]),children:t})})})};BJ.displayName="Navbar";MJ.displayName="Navbar.Brand";UJ.displayName="Navbar.Collapse";FJ.displayName="Navbar.Link";VJ.displayName="Navbar.Toggle";const ICe=Object.assign(BJ,{Brand:MJ,Collapse:UJ,Link:FJ,Toggle:VJ}),$J=({children:e,className:t,theme:r={},toggle:n,...i})=>{const[a,o]=T.useState(void 0),s=Pe(ut().megaMenu.dropdown,r);if(n)return d.jsx(xCe,{inline:!0,label:n,placement:"bottom",theme:s.toggle,className:le(s.base,t),children:e});const l=T.useId(),c=T.useRef(null);return T.useEffect(()=>{var h;o((h=function(){var p;const f=(p=c.current)==null?void 0:p.closest("nav");return f==null?void 0:f.querySelector('[aria-haspopup="menu"]')}())==null?void 0:h.id)},[]),d.jsx("div",{"aria-labelledby":a,id:l,ref:c,role:"menu",className:le(s.base,t),...i,children:e})};$J.displayName="MegaMenu.Dropdown";const HJ=({children:e,className:t,theme:r={},...n})=>{const i=T.useId(),a=T.useRef(null),[o,s]=T.useState(void 0),[l,c]=T.useState(void 0),u=Pe(ut().megaMenu.dropdownToggle,r),h=function(){var m;const p=(m=a.current)==null?void 0:m.closest("nav");return p==null?void 0:p.querySelector('[role="menu"]')},f=function(){var p;(p=h())==null||p.classList.toggle("hidden"),c(!l)};return T.useEffect(()=>{const p=h(),m=p==null?void 0:p.classList.contains("hidden");s(p==null?void 0:p.id),c(!m)},[]),d.jsx("button",{"aria-controls":o,"aria-expanded":l,"aria-haspopup":"menu",id:i,onClick:f,ref:a,className:le(u.base,t),...n,children:e})};HJ.displayName="MegaMenu.DropdownToggle";const zJ=({children:e,theme:t={},...r})=>{const n=Pe(ut().megaMenu,t);return d.jsx(ICe,{fluid:!0,theme:n,...r,children:e})};Object.assign(zJ,{Dropdown:$J,DropdownToggle:HJ});zJ.displayName="MegaMenu";const GJ=T.createContext(void 0);function FL(){const e=T.useContext(GJ);if(!e)throw new Error("useModalContext should be used within the ModalContext provider!");return e}const WJ=({children:e,className:t,theme:r={},...n})=>{const{theme:i,popup:a}=FL(),o=Pe(i.body,r);return d.jsx("div",{className:le(o.base,a&&[o.popup],t),...n,children:e})},KJ=({children:e,className:t,theme:r={},...n})=>{const{theme:i,popup:a}=FL(),o=Pe(i.footer,r);return d.jsx("div",{className:le(o.base,!a&&o.popup,t),...n,children:e})},qJ=({as:e="h3",children:t,className:r,theme:n={},id:i,...a})=>{const o=T.useId(),s=i||o,{theme:l,popup:c,onClose:u,setHeaderId:h}=FL(),f=Pe(l.header,n);return T.useLayoutEffect(()=>(h(s),()=>h(void 0)),[s,h]),d.jsxs("div",{className:le(f.base,c&&f.popup,r),...a,children:[d.jsx(e,{id:s,className:f.title,children:t}),d.jsx("button",{"aria-label":"Close",className:f.close.base,type:"button",onClick:u,children:d.jsx(REe,{"aria-hidden":!0,className:f.close.icon})})]})},YJ=T.forwardRef(({children:e,className:t,dismissible:r=!1,onClose:n,popup:i,position:a="center",root:o,show:s,size:l="2xl",theme:c={},initialFocus:u,...h},f)=>{const[p,m]=T.useState(void 0),g=Pe(ut().modal,c),{context:y}=JX({open:s,onOpenChange:()=>n&&n()}),v=FX([y.refs.setFloating,f]),b=YX(y),E=XX(y,{outsidePressEvent:"mousedown",enabled:r}),S=ZX(y),{getFloatingProps:I}=QX([b,E,S]);return s?d.jsx(GJ.Provider,{value:{theme:g,popup:i,onClose:n,setHeaderId:m},children:d.jsx(qTe,{root:o,children:d.jsx(XTe,{lockScroll:!0,"data-testid":"modal-overlay",className:le(g.root.base,g.root.positions[a],s?g.root.show.on:g.root.show.off,t),...h,children:d.jsx(qX,{context:y,initialFocus:u,children:d.jsx("div",{ref:v,...I(h),"aria-labelledby":p,className:le(g.content.base,g.root.sizes[l]),children:d.jsx("div",{className:g.content.inner,children:e})})})})})}):null});YJ.displayName="Modal";qJ.displayName="Modal.Header";WJ.displayName="Modal.Body";KJ.displayName="Modal.Footer";const Lw=Object.assign(YJ,{Header:qJ,Body:WJ,Footer:KJ}),NCe=(e,t)=>e>=t?[]:[...Array(t-e+1).keys()].map(r=>r+e),VL=({active:e,children:t,className:r,onClick:n,theme:i={},...a})=>{const o=Pe(ut().pagination,i);return d.jsx("button",{type:"button",className:le(e&&o.pages.selector.active,r),onClick:n,...a,children:t})};VL.displayName="Pagination.Button";const Kk=({children:e,className:t,onClick:r,theme:n={},disabled:i=!1,...a})=>{const o=Pe(ut().pagination,n);return d.jsx("button",{type:"button",className:le(i&&o.pages.selector.disabled,t),disabled:i,onClick:r,...a,children:e})};Kk.displayName="Pagination.Navigation";const XJ=({className:e,currentPage:t,layout:r="pagination",nextLabel:n="Next",onPageChange:i,previousLabel:a="Previous",renderPaginationButton:o=h=>d.jsx(VL,{...h}),showIcons:s=!1,theme:l={},totalPages:c,...u})=>{const h=Pe(ut().pagination,l),f=Math.min(Math.max(r==="pagination"?t+2:t+4,5),c),p=Math.max(1,f-4),m=()=>{i(Math.min(t+1,c))},g=()=>{i(Math.max(t-1,1))};return d.jsxs("nav",{className:le(h.base,e),...u,children:[r==="table"&&d.jsxs("div",{className:h.layout.table.base,children:["Showing ",d.jsx("span",{className:h.layout.table.span,children:p})," to",d.jsx("span",{className:h.layout.table.span,children:f})," of",d.jsx("span",{className:h.layout.table.span,children:c})," Entries"]}),d.jsxs("ul",{className:h.pages.base,children:[d.jsx("li",{children:d.jsxs(Kk,{className:le(h.pages.previous.base,s&&h.pages.showIcon),onClick:g,disabled:t===1,children:[s&&d.jsx(EEe,{"aria-hidden":!0,className:h.pages.previous.icon}),a]})}),r==="pagination"&&NCe(p,f).map(y=>d.jsx("li",{"aria-current":y===t?"page":void 0,children:o({className:le(h.pages.selector.base,t===y&&h.pages.selector.active),active:y===t,onClick:()=>i(y),children:y})},y)),d.jsx("li",{children:d.jsxs(Kk,{className:le(h.pages.next.base,s&&h.pages.showIcon),onClick:m,disabled:t===c,children:[n,s&&d.jsx(_Ee,{"aria-hidden":!0,className:h.pages.next.icon})]})})]})]})};XJ.displayName="Pagination";Object.assign(XJ,{Button:VL});const ACe=T.forwardRef(({className:e,theme:t={},...r},n)=>{const i=Pe(ut().radio,t);return d.jsx("input",{ref:n,type:"radio",className:le(i.root.base,e),...r})});ACe.displayName="Radio";const OCe=T.forwardRef(({className:e,sizing:t="md",theme:r={},...n},i)=>{const a=Pe(ut().rangeSlider,r);return d.jsx(d.Fragment,{children:d.jsx("div",{"data-testid":"flowbite-range-slider",className:le(a.root.base,e),children:d.jsx("div",{className:a.field.base,children:d.jsx("input",{ref:i,type:"range",className:le(a.field.input.base,a.field.input.sizes[t]),...n})})})})});OCe.displayName="RangeSlider";const JJ=({children:e,className:t,percentFilled:r=0,theme:n={},...i})=>{const a=Pe(ut().ratingAdvanced,n);return d.jsxs("div",{className:le(a.base,t),...i,children:[d.jsx("span",{className:a.label,children:e}),d.jsx("div",{className:a.progress.base,children:d.jsx("div",{className:a.progress.fill,"data-testid":"flowbite-rating-fill",style:{width:`${r}%`}})}),d.jsx("span",{className:a.progress.label,children:`${r}%`})]})},QJ=T.createContext(void 0);function kCe(){const e=T.useContext(QJ);if(!e)throw new Error("useRatingContext should be used within the RatingContext provider!");return e}const ZJ=({className:e,filled:t=!0,starIcon:r=SEe,theme:n={},...i})=>{const{theme:a,size:o="sm"}=kCe(),s=Pe(a.star,n);return d.jsx(r,{"data-testid":"flowbite-rating-star",className:le(s.sizes[o],s[t?"filled":"empty"],e),...i})},eQ=({children:e,className:t,size:r="sm",theme:n={},...i})=>{const a=Pe(ut().rating,n);return d.jsx(QJ.Provider,{value:{theme:a,size:r},children:d.jsx("div",{className:le(a.root.base,t),...i,children:e})})};eQ.displayName="Rating";ZJ.displayName="Rating.Star";JJ.displayName="Rating.Advanced";Object.assign(eQ,{Star:ZJ,Advanced:JJ});const PCe=T.forwardRef(({addon:e,children:t,className:r,color:n="gray",helperText:i,icon:a,shadow:o,sizing:s="md",theme:l={},...c},u)=>{const h=Pe(ut().select,l);return d.jsxs("div",{className:le(h.base,r),children:[e&&d.jsx("span",{className:h.addon,children:e}),d.jsxs("div",{className:h.field.base,children:[a&&d.jsx("div",{className:h.field.icon.base,children:d.jsx(a,{className:h.field.icon.svg})}),d.jsx("select",{className:le(h.field.select.base,h.field.select.colors[n],h.field.select.sizes[s],h.field.select.withIcon[a?"on":"off"],h.field.select.withAddon[e?"on":"off"],h.field.select.withShadow[o?"on":"off"]),...c,ref:u,children:t}),i&&d.jsx(Eb,{color:n,children:i})]})]})});PCe.displayName="Select";const tQ=T.createContext(void 0);function Tg(){const e=T.useContext(tQ);if(!e)throw new Error("useSidebarContext should be used within the SidebarContext provider!");return e}const BL=T.createContext(void 0);function DCe(){const e=T.useContext(BL);if(!e)throw new Error("useSidebarItemContext should be used within the SidebarItemContext provider!");return e}const rQ=({children:e,className:t,icon:r,label:n,chevronIcon:i=GY,renderChevronIcon:a,open:o=!1,theme:s={},...l})=>{const c=T.useId(),[u,h]=T.useState(o),{theme:f,isCollapsed:p}=Tg(),m=Pe(f.collapse,s);T.useEffect(()=>h(o),[o]);const g=({children:y})=>d.jsx("li",{children:p&&!u?d.jsx(BC,{content:n,placement:"right",children:y}):y});return d.jsxs(g,{children:[d.jsxs("button",{id:`flowbite-sidebar-collapse-${c}`,onClick:()=>h(!u),title:n,type:"button",className:le(m.button,t),...l,children:[r&&d.jsx(r,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-collapse-icon",className:le(m.icon.base,m.icon.open[u?"on":"off"])}),p?d.jsx("span",{className:"sr-only",children:n}):d.jsxs(d.Fragment,{children:[d.jsx("span",{"data-testid":"flowbite-sidebar-collapse-label",className:m.label.base,children:n}),a?a(m,u):d.jsx(i,{"aria-hidden":!0,className:le(m.label.icon.base,m.label.icon.open[u?"on":"off"])})]})]}),d.jsx("ul",{"aria-labelledby":`flowbite-sidebar-collapse-${c}`,hidden:!u,className:m.list,children:d.jsx(BL.Provider,{value:{isInsideCollapse:!0},children:e})})]})};rQ.displayName="Sidebar.Collapse";const nQ=({children:e,color:t="info",className:r,theme:n={},...i})=>{const{theme:a,isCollapsed:o}=Tg(),s=Pe(a.cta,n);return d.jsx("div",{"data-testid":"sidebar-cta",hidden:o,className:le(s.base,s.color[t],r),...i,children:e})};nQ.displayName="Sidebar.CTA";const LCe=({id:e,theme:t,isCollapsed:r,tooltipChildren:n,children:i,...a})=>d.jsx("li",{...a,children:r?d.jsx(BC,{content:d.jsx(iQ,{id:e,theme:t,children:n}),placement:"right",children:i}):i}),iQ=({id:e,theme:t,children:r})=>d.jsx("span",{"data-testid":"flowbite-sidebar-item-content",id:`flowbite-sidebar-item-${e}`,className:le(t.content.base),children:r}),aQ=T.forwardRef(({active:e,as:t="a",children:r,className:n,icon:i,label:a,labelColor:o="info",theme:s={},...l},c)=>{var g,y,v,b;const u=T.useId(),{theme:h,isCollapsed:f}=Tg(),{isInsideCollapse:p}=DCe(),m=Pe(h.item,s);return d.jsx(LCe,{theme:m,className:m.listItem,id:u,isCollapsed:f,tooltipChildren:r,children:d.jsxs(t,{"aria-labelledby":`flowbite-sidebar-item-${u}`,ref:c,className:le(m.base,e&&m.active,!f&&p&&((g=m.collapsed)==null?void 0:g.insideCollapse),n),...l,children:[i&&d.jsx(i,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-item-icon",className:le((y=m.icon)==null?void 0:y.base,e&&((v=m.icon)==null?void 0:v.active))}),f&&!i&&d.jsx("span",{className:(b=m.collapsed)==null?void 0:b.noIcon,children:r.charAt(0).toLocaleUpperCase()??"?"}),!f&&d.jsx(iQ,{id:u,theme:m,children:r}),!f&&a&&d.jsx(lX,{color:o,"data-testid":"flowbite-sidebar-label",hidden:f,className:m.label,children:a})]})})});aQ.displayName="Sidebar.Item";const oQ=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=Tg(),a=Pe(i.itemGroup,r);return d.jsx("ul",{"data-testid":"flowbite-sidebar-item-group",className:le(a.base,t),...n,children:d.jsx(BL.Provider,{value:{isInsideCollapse:!1},children:e})})};oQ.displayName="Sidebar.ItemGroup";const sQ=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=Tg(),a=Pe(i.items,r);return d.jsx("div",{className:le(a.base,t),"data-testid":"flowbite-sidebar-items",...n,children:e})};sQ.displayName="Sidebar.Items";const lQ=({children:e,className:t,href:r,img:n,imgAlt:i="",theme:a={},...o})=>{const s=T.useId(),{theme:l,isCollapsed:c}=Tg(),u=Pe(l.logo,a);return d.jsxs("a",{"aria-labelledby":`flowbite-sidebar-logo-${s}`,href:r,className:le(u.base,t),...o,children:[d.jsx("img",{alt:i,src:n,className:u.img}),d.jsx("span",{className:u.collapsed[c?"on":"off"],id:`flowbite-sidebar-logo-${s}`,children:e})]})};lQ.displayName="Sidebar.Logo";const cQ=({children:e,as:t="nav",collapseBehavior:r="collapse",collapsed:n=!1,theme:i={},className:a,...o})=>{const s=Pe(ut().sidebar,i);return d.jsx(tQ.Provider,{value:{theme:s,isCollapsed:n},children:d.jsx(t,{"aria-label":"Sidebar",hidden:n&&r==="hide",className:le(s.root.base,s.root.collapsed[n?"on":"off"],a),...o,children:d.jsx("div",{className:s.root.inner,children:e})})})};cQ.displayName="Sidebar";Object.assign(cQ,{Collapse:rQ,CTA:nQ,Item:aQ,Items:sQ,ItemGroup:oQ,Logo:lQ});const uQ=T.createContext(void 0);function jCe(){const e=T.useContext(uQ);if(!e)throw new Error("useTableBodyContext should be used within the TableBodyContext provider!");return e}const dQ=T.createContext(void 0);function $L(){const e=T.useContext(dQ);if(!e)throw new Error("useTableContext should be used within the TableContext provider!");return e}const hQ=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:a}=$L(),o=Pe(a.body,r);return d.jsx(uQ.Provider,{value:{theme:o},children:d.jsx("tbody",{className:le(o.base,t),ref:i,...n,children:e})})});hQ.displayName="Table.Body";const fQ=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:a}=jCe(),o=Pe(a.cell,r);return d.jsx("td",{className:le(o.base,t),ref:i,...n,children:e})});fQ.displayName="Table.Cell";const pQ=T.createContext(void 0);function MCe(){const e=T.useContext(pQ);if(!e)throw new Error("useTableHeadContext should be used within the TableHeadContext provider!");return e}const mQ=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:a}=$L(),o=Pe(a.head,r);return d.jsx(pQ.Provider,{value:{theme:o},children:d.jsx("thead",{className:le(o.base,t),ref:i,...n,children:d.jsx("tr",{children:e})})})});mQ.displayName="Table.Head";const gQ=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:a}=MCe(),o=Pe(a.cell,r);return d.jsx("th",{className:le(o.base,t),ref:i,...n,children:e})});gQ.displayName="Table.HeadCell";const yQ=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:a,hoverable:o,striped:s}=$L(),l=Pe(a.row,r);return d.jsx("tr",{ref:i,"data-testid":"table-row-element",className:le(l.base,s&&l.striped,o&&l.hovered,t),...n,children:e})});yQ.displayName="Table.Row";const vQ=T.forwardRef(({children:e,className:t,striped:r,hoverable:n,theme:i={},...a},o)=>{const s=Pe(ut().table,i);return d.jsx("div",{"data-testid":"table-element",className:le(s.root.wrapper),children:d.jsxs(dQ.Provider,{value:{theme:s,striped:r,hoverable:n},children:[d.jsx("div",{className:le(s.root.shadow,t)}),d.jsx("table",{className:le(s.root.base,t),...a,ref:o,children:e})]})})});vQ.displayName="Table";const wr=Object.assign(vQ,{Head:mQ,Body:hQ,Row:yQ,Cell:fQ,HeadCell:gQ}),bQ=({children:e,className:t})=>d.jsx("div",{className:t,children:e});bQ.displayName="Tabs.Item";const wQ=T.forwardRef(({children:e,className:t,onActiveTabChange:r,variant:n="default",theme:i={},...a},o)=>{const s=Pe(ut().tabs,i),l=T.useId(),c=T.useMemo(()=>T.Children.map(T.Children.toArray(e),({props:S})=>S),[e]),u=T.useRef([]),[h,f]=T.useState(Math.max(0,c.findIndex(S=>S.active))),[p,m]=T.useState(-1),g=S=>{f(S),r&&r(S)},y=({target:S})=>{g(S),m(S)},v=({event:S,target:I})=>{S.key==="ArrowLeft"&&m(Math.max(0,p-1)),S.key==="ArrowRight"&&m(Math.min(c.length-1,p+1)),S.key==="Enter"&&(g(I),m(I))},b=s.tablist.tabitem.variant[n],E=s.tabitemcontainer.variant[n];return T.useEffect(()=>{var S;(S=u.current[p])==null||S.focus()},[p]),T.useImperativeHandle(o,()=>({setActiveTab:g})),d.jsxs("div",{className:le(s.base,t),children:[d.jsx("div",{"aria-label":"Tabs",role:"tablist",className:le(s.tablist.base,s.tablist.variant[n],t),...a,children:c.map((S,I)=>d.jsxs("button",{type:"button","aria-controls":`${l}-tabpanel-${I}`,"aria-selected":I===h,className:le(s.tablist.tabitem.base,b.base,I===h&&b.active.on,I!==h&&!S.disabled&&b.active.off),disabled:S.disabled,id:`${l}-tab-${I}`,onClick:()=>y({target:I}),onKeyDown:N=>v({event:N,target:I}),ref:N=>u.current[I]=N,role:"tab",tabIndex:I===p?0:-1,style:{zIndex:I===p?2:1},children:[S.icon&&d.jsx(S.icon,{className:s.tablist.tabitem.icon}),S.title]},I))}),d.jsx("div",{className:le(s.tabitemcontainer.base,E),children:c.map((S,I)=>d.jsx("div",{"aria-labelledby":`${l}-tab-${I}`,className:s.tabpanel,hidden:I!==h,id:`${l}-tabpanel-${I}`,role:"tabpanel",tabIndex:0,children:S.children},I))})]})});wQ.displayName="Tabs";Object.assign(wQ,{Item:bQ});const UCe=T.forwardRef(({className:e,color:t="gray",helperText:r,shadow:n,theme:i={},...a},o)=>{const s=Pe(ut().textarea,i);return d.jsxs(d.Fragment,{children:[d.jsx("textarea",{ref:o,className:le(s.base,s.colors[t],s.withShadow[n?"on":"off"],e),...a}),r&&d.jsx(Eb,{color:t,children:r})]})});UCe.displayName="Textarea";const EQ=T.createContext(void 0);function HL(){const e=T.useContext(EQ);if(!e)throw new Error("useTimelineContentContext should be used within the TimelineContentContext provider!");return e}const _Q=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=HL(),a=Pe(i.body,r);return d.jsx("div",{className:le(a.base,t),...n,children:e})},SQ=T.createContext(void 0);function zL(){const e=T.useContext(SQ);if(!e)throw new Error("useTimelineContext should be used within the TimelineContext provider!");return e}const TQ=T.createContext(void 0);function CQ(){const e=T.useContext(TQ);if(!e)throw new Error("useTimelineItemContext should be used within the TimelineItemContext provider!");return e}const xQ=({children:e,className:t,theme:r={},...n})=>{const{horizontal:i}=zL(),{theme:a}=CQ(),o=Pe(a.content,r);return d.jsx(EQ.Provider,{value:{theme:o},children:d.jsx("div",{"data-testid":"timeline-content",className:le(o.root.base,i?o.root.horizontal:o.root.vertical,t),...n,children:e})})},RQ=({children:e,className:t,theme:r={},...n})=>{const{theme:i,horizontal:a}=zL(),o=Pe(i.item,r);return d.jsx(TQ.Provider,{value:{theme:o},children:d.jsx("li",{"data-testid":"timeline-item",className:le(a&&o.root.horizontal,!a&&o.root.vertical,t),...n,children:e})})},IQ=({children:e,className:t,icon:r,theme:n={},...i})=>{const{horizontal:a}=zL(),{theme:o}=CQ(),s=Pe(o.point,n);return d.jsxs("div",{"data-testid":"timeline-point",className:le(a&&s.horizontal,!a&&s.vertical,t),...i,children:[e,r?d.jsx("span",{className:le(s.marker.icon.wrapper),children:d.jsx(r,{"aria-hidden":!0,className:le(s.marker.icon.base)})}):d.jsx("div",{className:le(a&&s.marker.base.horizontal,!a&&s.marker.base.vertical)}),a&&d.jsx("div",{className:le(s.line)})]})},NQ=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=HL(),a=Pe(i.time,r);return d.jsx("time",{className:le(a.base,t),...n,children:e})},AQ=({as:e="h3",children:t,className:r,theme:n={},...i})=>{const{theme:a}=HL(),o=Pe(a.title,n);return d.jsx(e,{className:le(o.base,r),...i,children:t})},OQ=({children:e,className:t,horizontal:r,theme:n={},...i})=>{const a=Pe(ut().timeline,n);return d.jsx(SQ.Provider,{value:{theme:a,horizontal:r},children:d.jsx("ol",{"data-testid":"timeline-component",className:le(r&&a.root.direction.horizontal,!r&&a.root.direction.vertical,t),...i,children:e})})};OQ.displayName="Timeline";RQ.displayName="Timeline.Item";IQ.displayName="Timeline.Point";xQ.displayName="Timeline.Content";NQ.displayName="Timeline.Time";AQ.displayName="Timeline.Title";_Q.displayName="Timeline.Body";Object.assign(OQ,{Item:RQ,Point:IQ,Content:xQ,Time:NQ,Title:AQ,Body:_Q});const kQ=T.createContext(void 0);function FCe(){const e=T.useContext(kQ);if(!e)throw new Error("useToastContext should be used within the ToastContext provider!");return e}const PQ=({className:e,onClick:t,theme:r={},xIcon:n=TEe,onDismiss:i,...a})=>{const{theme:o,duration:s,isClosed:l,isRemoved:c,setIsClosed:u,setIsRemoved:h}=FCe(),f=Pe(o.toggle,r),p=m=>{if(t&&t(m),i){i();return}u(!l),setTimeout(()=>h(!c),s)};return d.jsx("button",{"aria-label":"Close",onClick:p,type:"button",className:le(f.base,e),...a,children:d.jsx(n,{"aria-hidden":!0,className:f.icon})})},VCe={75:"duration-75",100:"duration-100",150:"duration-150",200:"duration-200",300:"duration-300",500:"duration-500",700:"duration-700",1e3:"duration-1000"},DQ=({children:e,className:t,duration:r=300,theme:n={},...i})=>{const[a,o]=T.useState(!1),[s,l]=T.useState(!1),c=Pe(ut().toast,n);return s?null:d.jsx(kQ.Provider,{value:{theme:c,duration:r,isClosed:a,isRemoved:s,setIsClosed:o,setIsRemoved:l},children:d.jsx("div",{"data-testid":"flowbite-toast",role:"alert",className:le(c.root.base,VCe[r],a&&c.root.closed,t),...i,children:e})})};DQ.displayName="Toast";PQ.displayName="Toast.Toggle";Object.assign(DQ,{Toggle:PQ});const BCe=T.forwardRef(({checked:e,className:t,color:r="blue",sizing:n="md",disabled:i,label:a,name:o,onChange:s,theme:l={},...c},u)=>{const h=T.useId(),f=Pe(ut().toggleSwitch,l),p=()=>s(!e),m=()=>{p()},g=y=>{y.code=="Enter"&&y.preventDefault()};return d.jsxs(d.Fragment,{children:[o&&e?d.jsx("input",{ref:u,checked:e,hidden:!0,name:o,readOnly:!0,type:"checkbox",className:"sr-only"}):null,d.jsxs("button",{"aria-checked":e,"aria-labelledby":`${h}-flowbite-toggleswitch-label`,disabled:i,id:`${h}-flowbite-toggleswitch`,onClick:m,onKeyDown:g,role:"switch",tabIndex:0,type:"button",className:le(f.root.base,f.root.active[i?"off":"on"],t),...c,children:[d.jsx("div",{"data-testid":"flowbite-toggleswitch-toggle",className:le(f.toggle.base,f.toggle.checked[e?"on":"off"],e&&f.toggle.checked.color[r],f.toggle.sizes[n])}),a!=null&&a.length?d.jsx("span",{"data-testid":"flowbite-toggleswitch-label",id:`${h}-flowbite-toggleswitch-label`,className:f.root.label,children:a}):null]})]})});BCe.displayName="ToggleSwitch";const $Ce={firstName:"",lastName:"",profileImage:"",weight:"",height:""},LQ=vg({name:"patient",initialState:$Ce,reducers:{setPatient(e,t){e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,e.profileImage=t.payload.profileImage,e.weight=t.payload.weight,e.height=t.payload.height}}}),{setPatient:gI}=LQ.actions,HCe=LQ.reducer,zCe="https://hcompanion.onrender.com/api",jQ=async({token:e})=>{try{const t=await ce.get(`${zCe}/patient/getBasicDetails`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.userData}catch(t){return console.log(t),t.response.status=="401"||t.response.status=="400",!1}},zC="https://hcompanion.onrender.com/api",MQ=sessionStorage.getItem("token"),GCe=async e=>{try{const t=await ce.post(`${zC}/patient/profile/updateDetails`,e,{headers:{"content-type":" multipart/form-data",Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(t),Q.fire({icon:"success",text:"Profile has been Updated"}),!0}catch(t){console.log(t)}},UQ=async()=>{try{const e=await ce.get(`${zC}/patient/profile/viewDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(e),e.data.patientDetails}catch(e){console.log(e),(e.response.status=e.response.data.invalidToken)&&Q.fire({icon:"warning",text:"Login to access profile"})}},WCe=async()=>{var e,t,r,n,i,a;try{return(await ce.get(`${zC}/patient/profile/getAddessAndPhone`,{headers:{Authorization:`bearer ${MQ}`}})).data.contactDetails}catch(o){return console.log(o),((e=o==null?void 0:o.response)==null?void 0:e.status)=="500"&&((r=(t=o==null?void 0:o.response)==null?void 0:t.data)!=null&&r.errorServer)&&Q.fire("Error at the Server","","error"),((n=o==null?void 0:o.response)==null?void 0:n.status)=="400"&&((a=(i=o==null?void 0:o.response)==null?void 0:i.data)!=null&&a.invalidToken)&&Q.fire("Log in","","error"),!1}},KCe=async e=>{var t,r,n,i,a,o;try{const s=await ce.post(`${zC}/patient/profile/updateAddessAndPhone`,e,{headers:{Authorization:`bearer ${MQ}`}});return!0}catch(s){return console.log(s),((t=s==null?void 0:s.response)==null?void 0:t.status)=="500"&&((n=(r=s==null?void 0:s.response)==null?void 0:r.data)!=null&&n.errorServer)&&Q.fire("Error at the Server","","error"),((i=s==null?void 0:s.response)==null?void 0:i.status)=="400"&&((o=(a=s==null?void 0:s.response)==null?void 0:a.data)!=null&&o.invalidToken)&&Q.fire("Log in","","error"),!1}};var FQ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Ed,function(){var r=1e3,n=6e4,i=36e5,a="millisecond",o="second",s="minute",l="hour",c="day",u="week",h="month",f="quarter",p="year",m="date",g="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var B=["th","st","nd","rd"],K=$%100;return"["+$+(B[(K-20)%10]||B[K]||B[0])+"]"}},E=function($,B,K){var P=String($);return!P||P.length>=B?$:""+Array(B+1-P.length).join(K)+$},S={s:E,z:function($){var B=-$.utcOffset(),K=Math.abs(B),P=Math.floor(K/60),D=K%60;return(B<=0?"+":"-")+E(P,2,"0")+":"+E(D,2,"0")},m:function $(B,K){if(B.date()<K.date())return-$(K,B);var P=12*(K.year()-B.year())+(K.month()-B.month()),D=B.clone().add(P,h),H=K-D<0,x=B.clone().add(P+(H?-1:1),h);return+(-(P+(K-D)/(H?D-x:x-D))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:h,y:p,w:u,d:c,D:m,h:l,m:s,s:o,ms:a,Q:f}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},I="en",N={};N[I]=b;var L="$isDayjsObject",j=function($){return $ instanceof G||!(!$||!$[L])},z=function $(B,K,P){var D;if(!B)return I;if(typeof B=="string"){var H=B.toLowerCase();N[H]&&(D=H),K&&(N[H]=K,D=H);var x=B.split("-");if(!D&&x.length>1)return $(x[0])}else{var w=B.name;N[w]=B,D=w}return!P&&D&&(I=D),D||!P&&I},A=function($,B){if(j($))return $.clone();var K=typeof B=="object"?B:{};return K.date=$,K.args=arguments,new G(K)},V=S;V.l=z,V.i=j,V.w=function($,B){return A($,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var G=function(){function $(K){this.$L=z(K.locale,null,!0),this.parse(K),this.$x=this.$x||K.x||{},this[L]=!0}var B=$.prototype;return B.parse=function(K){this.$d=function(P){var D=P.date,H=P.utc;if(D===null)return new Date(NaN);if(V.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var x=D.match(y);if(x){var w=x[2]-1||0,O=(x[7]||"0").substring(0,3);return H?new Date(Date.UTC(x[1],w,x[3]||1,x[4]||0,x[5]||0,x[6]||0,O)):new Date(x[1],w,x[3]||1,x[4]||0,x[5]||0,x[6]||0,O)}}return new Date(D)}(K),this.init()},B.init=function(){var K=this.$d;this.$y=K.getFullYear(),this.$M=K.getMonth(),this.$D=K.getDate(),this.$W=K.getDay(),this.$H=K.getHours(),this.$m=K.getMinutes(),this.$s=K.getSeconds(),this.$ms=K.getMilliseconds()},B.$utils=function(){return V},B.isValid=function(){return this.$d.toString()!==g},B.isSame=function(K,P){var D=A(K);return this.startOf(P)<=D&&D<=this.endOf(P)},B.isAfter=function(K,P){return A(K)<this.startOf(P)},B.isBefore=function(K,P){return this.endOf(P)<A(K)},B.$g=function(K,P,D){return V.u(K)?this[P]:this.set(D,K)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(K,P){var D=this,H=!!V.u(P)||P,x=V.p(K),w=function(ge,je){var ze=V.w(D.$u?Date.UTC(D.$y,je,ge):new Date(D.$y,je,ge),D);return H?ze:ze.endOf(c)},O=function(ge,je){return V.w(D.toDate()[ge].apply(D.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(je)),D)},C=this.$W,q=this.$M,F=this.$D,J="set"+(this.$u?"UTC":"");switch(x){case p:return H?w(1,0):w(31,11);case h:return H?w(1,q):w(0,q+1);case u:var se=this.$locale().weekStart||0,he=(C<se?C+7:C)-se;return w(H?F-he:F+(6-he),q);case c:case m:return O(J+"Hours",0);case l:return O(J+"Minutes",1);case s:return O(J+"Seconds",2);case o:return O(J+"Milliseconds",3);default:return this.clone()}},B.endOf=function(K){return this.startOf(K,!1)},B.$set=function(K,P){var D,H=V.p(K),x="set"+(this.$u?"UTC":""),w=(D={},D[c]=x+"Date",D[m]=x+"Date",D[h]=x+"Month",D[p]=x+"FullYear",D[l]=x+"Hours",D[s]=x+"Minutes",D[o]=x+"Seconds",D[a]=x+"Milliseconds",D)[H],O=H===c?this.$D+(P-this.$W):P;if(H===h||H===p){var C=this.clone().set(m,1);C.$d[w](O),C.init(),this.$d=C.set(m,Math.min(this.$D,C.daysInMonth())).$d}else w&&this.$d[w](O);return this.init(),this},B.set=function(K,P){return this.clone().$set(K,P)},B.get=function(K){return this[V.p(K)]()},B.add=function(K,P){var D,H=this;K=Number(K);var x=V.p(P),w=function(q){var F=A(H);return V.w(F.date(F.date()+Math.round(q*K)),H)};if(x===h)return this.set(h,this.$M+K);if(x===p)return this.set(p,this.$y+K);if(x===c)return w(1);if(x===u)return w(7);var O=(D={},D[s]=n,D[l]=i,D[o]=r,D)[x]||1,C=this.$d.getTime()+K*O;return V.w(C,this)},B.subtract=function(K,P){return this.add(-1*K,P)},B.format=function(K){var P=this,D=this.$locale();if(!this.isValid())return D.invalidDate||g;var H=K||"YYYY-MM-DDTHH:mm:ssZ",x=V.z(this),w=this.$H,O=this.$m,C=this.$M,q=D.weekdays,F=D.months,J=D.meridiem,se=function(je,ze,Me,tt){return je&&(je[ze]||je(P,H))||Me[ze].slice(0,tt)},he=function(je){return V.s(w%12||12,je,"0")},ge=J||function(je,ze,Me){var tt=je<12?"AM":"PM";return Me?tt.toLowerCase():tt};return H.replace(v,function(je,ze){return ze||function(Me){switch(Me){case"YY":return String(P.$y).slice(-2);case"YYYY":return V.s(P.$y,4,"0");case"M":return C+1;case"MM":return V.s(C+1,2,"0");case"MMM":return se(D.monthsShort,C,F,3);case"MMMM":return se(F,C);case"D":return P.$D;case"DD":return V.s(P.$D,2,"0");case"d":return String(P.$W);case"dd":return se(D.weekdaysMin,P.$W,q,2);case"ddd":return se(D.weekdaysShort,P.$W,q,3);case"dddd":return q[P.$W];case"H":return String(w);case"HH":return V.s(w,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return ge(w,O,!0);case"A":return ge(w,O,!1);case"m":return String(O);case"mm":return V.s(O,2,"0");case"s":return String(P.$s);case"ss":return V.s(P.$s,2,"0");case"SSS":return V.s(P.$ms,3,"0");case"Z":return x}return null}(je)||x.replace(":","")})},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(K,P,D){var H,x=this,w=V.p(P),O=A(K),C=(O.utcOffset()-this.utcOffset())*n,q=this-O,F=function(){return V.m(x,O)};switch(w){case p:H=F()/12;break;case h:H=F();break;case f:H=F()/3;break;case u:H=(q-C)/6048e5;break;case c:H=(q-C)/864e5;break;case l:H=q/i;break;case s:H=q/n;break;case o:H=q/r;break;default:H=q}return D?H:V.a(H)},B.daysInMonth=function(){return this.endOf(h).$D},B.$locale=function(){return N[this.$L]},B.locale=function(K,P){if(!K)return this.$L;var D=this.clone(),H=z(K,P,!0);return H&&(D.$L=H),D},B.clone=function(){return V.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},$}(),X=G.prototype;return A.prototype=X,[["$ms",a],["$s",o],["$m",s],["$H",l],["$W",c],["$M",h],["$y",p],["$D",m]].forEach(function($){X[$[1]]=function(B){return this.$g(B,$[0],$[1])}}),A.extend=function($,B){return $.$i||($(B,G,A),$.$i=!0),A},A.locale=z,A.isDayjs=j,A.unix=function($){return A(1e3*$)},A.en=N[I],A.Ls=N,A.p={},A})})(FQ);var qCe=FQ.exports;const nt=es(qCe);var VQ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Ed,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,a=/\d\d/,o=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,l={},c=function(y){return(y=+y)+(y>68?1900:2e3)},u=function(y){return function(v){this[y]=+v}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var b=v.match(/([+-]|\d\d)/g),E=60*b[1]+(+b[2]||0);return E===0?0:b[0]==="+"?-E:E}(y)}],f=function(y){var v=l[y];return v&&(v.indexOf?v:v.s.concat(v.f))},p=function(y,v){var b,E=l.meridiem;if(E){for(var S=1;S<=24;S+=1)if(y.indexOf(E(S,0,v))>-1){b=S>12;break}}else b=y===(v?"pm":"PM");return b},m={A:[s,function(y){this.afternoon=p(y,!1)}],a:[s,function(y){this.afternoon=p(y,!0)}],Q:[i,function(y){this.month=3*(y-1)+1}],S:[i,function(y){this.milliseconds=100*+y}],SS:[a,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[o,u("seconds")],ss:[o,u("seconds")],m:[o,u("minutes")],mm:[o,u("minutes")],H:[o,u("hours")],h:[o,u("hours")],HH:[o,u("hours")],hh:[o,u("hours")],D:[o,u("day")],DD:[a,u("day")],Do:[s,function(y){var v=l.ordinal,b=y.match(/\d+/);if(this.day=b[0],v)for(var E=1;E<=31;E+=1)v(E).replace(/\[|\]/g,"")===y&&(this.day=E)}],w:[o,u("week")],ww:[a,u("week")],M:[o,u("month")],MM:[a,u("month")],MMM:[s,function(y){var v=f("months"),b=(f("monthsShort")||v.map(function(E){return E.slice(0,3)})).indexOf(y)+1;if(b<1)throw new Error;this.month=b%12||b}],MMMM:[s,function(y){var v=f("months").indexOf(y)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,u("year")],YY:[a,function(y){this.year=c(y)}],YYYY:[/\d{4}/,u("year")],Z:h,ZZ:h};function g(y){var v,b;v=y,b=l&&l.formats;for(var E=(y=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(A,V,G){var X=G&&G.toUpperCase();return V||b[G]||r[G]||b[X].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function($,B,K){return B||K.slice(1)})})).match(n),S=E.length,I=0;I<S;I+=1){var N=E[I],L=m[N],j=L&&L[0],z=L&&L[1];E[I]=z?{regex:j,parser:z}:N.replace(/^\[|\]$/g,"")}return function(A){for(var V={},G=0,X=0;G<S;G+=1){var $=E[G];if(typeof $=="string")X+=$.length;else{var B=$.regex,K=$.parser,P=A.slice(X),D=B.exec(P)[0];K.call(V,D),A=A.replace(D,"")}}return function(H){var x=H.afternoon;if(x!==void 0){var w=H.hours;x?w<12&&(H.hours+=12):w===12&&(H.hours=0),delete H.afternoon}}(V),V}}return function(y,v,b){b.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(c=y.parseTwoDigitYear);var E=v.prototype,S=E.parse;E.parse=function(I){var N=I.date,L=I.utc,j=I.args;this.$u=L;var z=j[1];if(typeof z=="string"){var A=j[2]===!0,V=j[3]===!0,G=A||V,X=j[2];V&&(X=j[2]),l=this.$locale(),!A&&X&&(l=b.Ls[X]),this.$d=function(P,D,H,x){try{if(["x","X"].indexOf(D)>-1)return new Date((D==="X"?1e3:1)*P);var w=g(D)(P),O=w.year,C=w.month,q=w.day,F=w.hours,J=w.minutes,se=w.seconds,he=w.milliseconds,ge=w.zone,je=w.week,ze=new Date,Me=q||(O||C?1:ze.getDate()),tt=O||ze.getFullYear(),Tt=0;O&&!C||(Tt=C>0?C-1:ze.getMonth());var rt,yt=F||0,Oe=J||0,it=se||0,Ge=he||0;return ge?new Date(Date.UTC(tt,Tt,Me,yt,Oe,it,Ge+60*ge.offset*1e3)):H?new Date(Date.UTC(tt,Tt,Me,yt,Oe,it,Ge)):(rt=new Date(tt,Tt,Me,yt,Oe,it,Ge),je&&(rt=x(rt).week(je).toDate()),rt)}catch{return new Date("")}}(N,z,L,b),this.init(),X&&X!==!0&&(this.$L=this.locale(X).$L),G&&N!=this.format(z)&&(this.$d=new Date("")),l={}}else if(z instanceof Array)for(var $=z.length,B=1;B<=$;B+=1){j[1]=z[B-1];var K=b.apply(this,j);if(K.isValid()){this.$d=K.$d,this.$L=K.$L,this.init();break}B===$&&(this.$d=new Date(""))}else S.call(this,I)}}})})(VQ);var YCe=VQ.exports;const $i=es(YCe);nt.extend($i);const XCe="wss://hcompanion.onrender.com";var jw;const JCe=async({userId:e})=>{jw=new WebSocket(XCe),jw.onopen=()=>{console.log("connected to websocket"),jw.send(JSON.stringify({type:"register",clientId:e}))},jw.onmessage=t=>{const r=JSON.parse(t==null?void 0:t.data);if(r.type=="meetingReminder"){const n=nt(`${r.booking.startTime}`,"H:mm A").diff(nt(),"minutes");console.log("diff",n),n<=60&&n>0&&(console.log("i'm here"),Q.fire(`Meeting in ${Math.abs(n)} minutes`,"","warning"))}}};function GL(){const e=fc(),{username:t,email:r,role:n,isLoggedIn:i}=Yr(l=>l.user),a=Yr(l=>l.patient);Yr(l=>l.patient_alert),console.log(t);const o=async()=>{if(sessionStorage.getItem("token")){const l=await jQ({token:sessionStorage.getItem("token")});if(l){const c=await UQ();await JCe({userId:l._id}),e(ai({username:l.username,email:l.email,role:l.role,isLoggedIn:!0})),e(gI({firstName:c.firstName,lastName:c.lastName,profileImage:c.profileImage,weight:c.weight,height:c.height,profileImage:c.profileImage}))}else ai({}),gI({})}};T.useEffect(()=>{o()},[]);const s=Zt();return d.jsx("div",{className:"w-full h-[12vh]",children:d.jsxs("div",{className:"w-full h-[12vh] flex flex-row items-center mx-2 p-2 gap-4",children:[d.jsx("div",{className:"logo w-44 flex justify-center items-center  ",children:d.jsx("img",{src:"/logo.png",alt:""})}),d.jsx("div",{className:"items w-[50%] h-full",children:d.jsxs("div",{className:"w-full h-full flex flex-row gap-4 items-center p-5 ml-10 ",children:[d.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/home"),children:"Home"}),d.jsx("button",{className:"font-medium text-lg p-2 ",id:"id_navDoctors",onClick:()=>s("/patient/doctors"),children:"Find Doctors"}),d.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/medicines"),children:"Medicines"}),d.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/tests"),children:"tests"}),d.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/treatmentPlan"),children:"Treatment Plan"}),!1]})}),d.jsx("div",{className:"search w-[25%] h-full flex justify-center items-center",children:d.jsxs("div",{className:"w-full h-[70%] rounded-lg flex flex-row gap-2 ",children:[d.jsx("input",{type:"text",placeholder:"search",className:"border w-full h-full rounded-lg"}),d.jsx("div",{className:"h-full flex justify-center items-center bg-blue-200 p-2 rounded-lg",children:d.jsx("img",{src:"/icons/search.png",alt:"search icon",className:"h-[2em] w-10 mr-2 opacity-40 cursor-pointer"})})]})}),i?d.jsxs("div",{className:"loggedIn h-full flex justify-end w-[18%] gap-8 px-2 mr-2",children:[d.jsxs("div",{className:"h-full flex flex-col gap-2",children:[d.jsx("span",{className:"font-bold",children:`Hi, ${a.firstName}`}),d.jsx("button",{className:"p-2 border rounded-lg bg-emerald-500 p-2 font-bold ",onClick:()=>{sessionStorage.removeItem("token"),e(ai({})),e(gI({}))},children:"log out"})]}),d.jsx("img",{src:a.profileImage,alt:"",className:"h-[100%] w-[28%] rounded-[50%] cursor-pointer",onClick:()=>{s("/patient/profile")}})]}):d.jsx("button",{type:"button",className:"h-[80%] ml-4 border rounded-[5%] bg-orange-500 p-2 font-bold ",id:"id_loginNav",onClick:()=>{s("/login")},children:"login / sign up"})]})})}DC.setAppElement("#root");function QCe(){const e=fc();Yr(l=>l.user);const[t,r]=T.useState(!1),[n,i]=T.useState("jjjjjjjj"),a=Zt(),o=Sr({initialValues:{username:"",password:""},validationSchema:wme,onSubmit:async(l,c)=>{const u=await Vve(l);if(u){if(await Q.fire({title:"Successfull",icon:"success",text:"you have been successfully logged in"}),await e(ai({username:u.username,role:u.role,email:u.email,isLoggedIn:!0})),u.role=="2")return a("/pharmacy/home");if(u.role=="1")return a("/doctor");if(u.role=="3")return a("/laboratory");if(u.role=="4")return a("/admin");a("/")}}});T.useEffect(()=>{google.accounts.id.initialize({client_id:"981653324698-i9aagns1rnmvcudlrt3bmj87v802e737.apps.googleusercontent.com",callback:async c=>{const u=await $ve({googleToken:c.credential});if(!u)await ZCe(c);else{if(await Q.fire({title:"Successfull",icon:"success",text:"you have been successfully logged in"}),e(ai({username:u.username,role:u.role,email:u.email})),u.role=="2")return a("/pharmacy/home");if(u.role=="3")return a("/laboratory/home");a("/")}}}),google.accounts.id.renderButton(document.getElementById("id_google"),{theme:"filled_blue",size:"large",width:350,type:"standard"})},[]);const s=async()=>{try{const{value:l}=await Q.fire({title:"forgot password",input:"email",showCancelButton:!0,inputLabel:"Enter email"});console.log(l),await i(l);const c=await Hve({email:l});if(l&&c){const{value:u}=await Q.fire({title:"Enter Otp",input:"number",showCancelButton:!0,inputLabel:"Enter Otp"});u&&await zve({email:l,otp:u})&&await r(!0)}}catch(l){console.log(`error at handle forgot password ${l}`)}};return d.jsxs("div",{className:"homePage w-full h-full",children:[d.jsx("div",{className:"header w-full h-[12vh] shadow-lg bg-white",children:d.jsx(GL,{})}),d.jsxs("div",{className:"flex flex-row w-screen h-screen",children:[t&&d.jsx(exe,{email:n,isOtpChecked:t,setisForgotPasswordChecked:r}),d.jsx("div",{className:"w-[40%] ",children:d.jsx("img",{src:"logo.png",alt:""})}),d.jsxs("div",{className:"w-[60%] mainContainer h-[90vh] mt-1  flex flex-col justify-start items-center text-emerald-300 gap-10 bg-sky-300 rounded-l-[5%]",children:[d.jsxs("form",{onSubmit:o.handleSubmit,className:"border w-[50%] rounded-[5%] p-20 flex flex-col gap-4 bg-white  border-emerald-300 shadow-lg shadow-emerald-500 mt-10",children:[d.jsx("div",{className:"flex justify-center",children:d.jsx("h1",{className:"text-4xl text-bold text-emerald-500 ",children:"LOGIN"})}),d.jsxs("div",{className:"flex flex-col gap-4 text-black",children:[d.jsx("input",{type:"text",name:"username",id:"id_username",onChange:o.handleChange,onBlur:o.handleBlur,className:"border p-2 rounded-lg text-center",placeholder:"email/username"}),d.jsx("p",{className:"text-red-500",children:o.touched.username&&o.errors.username&&o.errors.username}),d.jsx("input",{type:"password",name:"password",id:"id_password",onChange:o.handleChange,onBlur:o.handleBlur,className:"border p-2 rounded-lg text-center",placeholder:"password"}),d.jsx("p",{className:"text-red-500",children:o.touched.password&&o.errors.password&&o.errors.password})]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx("button",{id:"id_loginButton",className:"w-[full] h-[50%] border rounded-[5%] bg-orange-500 p-2",type:"submit",children:"login"}),d.jsxs("div",{className:"flex flex-row gap-10 h-[50%] justify-center",children:[d.jsx("h2",{className:"text-blue-400",children:"don't have account...?"}),d.jsx("button",{type:"button",onClick:()=>{a("/register")},children:"sign up"})]}),d.jsx("button",{type:"button",onClick:s,className:"w-[full] h-[50%] border rounded-[5%] bg-blue-500 p-2",children:"forgot password"})]})]}),d.jsx("div",{className:"",children:d.jsx("button",{id:"id_google"})})]})]})]})}const ZCe=async e=>{const{value:t}=await Q.fire({input:"select",showCancelButton:!0,inputPlaceholder:"select role to proceed",title:"Role",inputOptions:{0:"patient",1:"doctor",2:"pharmacy",3:"laboratory"}});t&&await Bve({googleToken:e.credential,role:t})&&Q.fire({title:"Account Creation Successfull",icon:"success",text:"Account has been created"})};function exe(e){const[t,r]=T.useState(!1),n=async()=>r(!1),i=Sr({initialValues:{password:"",confirmPassword:""},validationSchema:BY,onSubmit:async(a,o)=>{await Gve({password:a.password,email:e.email})&&Q.fire({icon:"success",html:"<b>Password has been reset</b>"}).then(async()=>{await n(),await e.setisForgotPasswordChecked(!1)})}});return T.useState(()=>{e.isOtpChecked&&r(!0),console.log("hiiiii")},[]),d.jsx("div",{className:"fixed w-screen h-screen",children:d.jsxs(DC,{isOpen:t,onRequestClose:n,overlayClassName:"fixed bg-black bg-opacity-50 inset-0 flex justify-center items-center",className:"bg-white opacity-100 mx-w-[60vw] flex flex-col gap-10 p-10 rounded-lg justify-center items-center",children:[d.jsx("h1",{className:"text-center font-bold",children:"Verification"}),d.jsxs("h3",{children:["Otp has been generated and sent to the email ",$Y(e.email)]}),d.jsxs("form",{onSubmit:i.handleSubmit,className:"w-full flex flex-col gap-10 justify-center items-center",children:[d.jsxs("div",{className:"flex flex-col gap-10 w-full",children:[d.jsx(ie,{name:"password",type:"password",variant:"filled",label:"Enter the password",onChange:i.handleChange,onBlur:i.handleBlur,className:"w-[40vw]",...i.touched.password&&(i.errors.password?{color:"error",helperText:`${i.errors.password}`}:{color:"success"})}),d.jsx(ie,{name:"confirmPassword",type:"password",variant:"filled",label:"Enter the confirm password",onChange:i.handleChange,onBlur:i.handleBlur,className:"w-[40vw]",...i.touched.confirmPassword&&(i.errors.confirmPassword?{color:"error",helperText:`${i.errors.confirmPassword}`}:{color:"success"})})]}),d.jsx("button",{type:"submit",className:"w-full border rounded-[5%] bg-orange-500 p-2",children:"Submit"})]})]})})}const txe=Vi().shape({username:Ut().required("Username is Required"),email:Ut().email("Provide valid email").required("Email is reuired"),password:Ut().required("Password is required").min(8,"must contain atleast 8 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirmPassword:Ut().required("confirm password is required").oneOf([BK("password"),null],"Password and Confirm password are not matching"),phone:Ut().matches(/^[1-9][0-9]{9}$/,"Must be a valid number").required("Phone number is required"),role:Ut().required("Required")}),_b="https://hcompanion.onrender.com/api";async function rxe({otp:e,email:t}){try{const r=await ce.post(`${_b}/user/register/createPatient`,{otp:e,email:t},{withCredentials:!0});return console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&Q.fire("Otp has been expired"),console.log(r)}}async function nxe({otp:e,email:t}){try{const r=await ce.post(`${_b}/user/register/createDoctor`,{otp:e,email:t},{withCredentials:!0});return console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&Q.fire("Otp has been expired"),console.log(r)}}async function ixe({otp:e,email:t}){try{const r=await ce.post(`${_b}/user/register/createPharmacy`,{otp:e,email:t},{withCredentials:!0});return console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&Q.fire("Otp has been expired"),console.log(r)}}async function axe({otp:e,email:t}){try{console.log("entered Laboratory");const r=await ce.post(`${_b}/user/register/createLaboratory`,{otp:e,email:t},{withCredentials:!0});return await console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&Q.fire("Otp has been expired"),console.log(r)}}async function oxe(e){try{const t=await ce.post(`${_b}/user/register/otp`,e,{withCredentials:!0});return console.log(t.data),t.data.info}catch(t){t.response.status=="401"?Q.fire("User Already exist"):t.response.status=="404"?Q.fire({icon:"error",title:"Mail couldn't be send",text:"Some error occured while sending otp to mail"}):Q.fire({icon:"error",title:"Server Issue",text:"Some error Occurered in the server side , please try again..!"})}}const sxe=Vi().shape({email:Ut().required("email required"),otp:Ut().matches(/^[0-9]{6}$/,"Must be valid").required("Otp required")});DC.setAppElement("#root");function lxe(){const[e,t]=T.useState(!1),[r,n]=T.useState(!1),i=Sr({initialValues:{username:"",email:"",password:"",confirmPassword:"",phone:"",role:""},validationSchema:txe,onSubmit:async(a,o)=>{await oxe(a)&&await t(!0)}});return T.useEffect(()=>{r&&((async()=>await i.reset)(),n(!1))},[r]),d.jsxs("div",{className:"homePage w-full h-full",children:[d.jsx("div",{className:"header w-full h-[12vh] shadow-lg",children:d.jsx(GL,{})}),d.jsx("div",{className:"page flex w-screen h-screen",children:d.jsxs("div",{className:"flex flex-row w-screen gap-[30vh] m-10",children:[e&&d.jsx(cxe,{isOtpGenerated:!0,setisOtpGenerated:t,email:i.values.email,role:i.values.role,setIsCreated:n}),d.jsx("div",{className:"w-[40%] ",children:d.jsx("img",{src:"logo.png",alt:""})}),d.jsxs("form",{onSubmit:i.handleSubmit,className:"registerDiv w-[40%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("div",{className:"flex items-center  justify-center",children:d.jsx("h2",{className:"text-4xl  text-emerald-500 ",children:"Sign Up"})}),d.jsxs("div",{className:"flex flex-row gap-4",children:[d.jsxs("select",{name:"role",onChange:i.handleChange,onBlur:i.handleBlur,id:"id_role",className:"font-bold text-black rounded-lg",children:[d.jsx("option",{className:"",children:"Select a role"}),d.jsx("option",{value:"0",children:"Patient"}),d.jsx("option",{value:"1",children:"Doctor"}),d.jsx("option",{value:"2",children:"Pharmacy"}),d.jsx("option",{value:"3",children:"Laboratory"}),d.jsx("option",{value:"4",children:"Admin"})]}),d.jsx("span",{className:"text-red-500",children:i.touched.role&&i.errors.role&&`* ${i.errors.role}`})]}),d.jsxs("div",{className:"inputSec flex flex-col gap-5",children:[d.jsx(ie,{name:"username",onChange:i.handleChange,variant:"filled",label:"username",onBlur:i.handleBlur,...i.touched.username&&(i.errors.username?{color:"error",helperText:`${i.errors.username}`}:{color:"success"})}),d.jsx(ie,{name:"email",onChange:i.handleChange,variant:"filled",label:"email",onBlur:i.handleBlur,...i.touched.email&&(i.errors.email?{color:"error",helperText:`${i.errors.email}`}:{color:"success"})}),d.jsx(ie,{name:"password",type:"password",onChange:i.handleChange,variant:"filled",label:"Password",onBlur:i.handleBlur,...i.touched.password&&(i.errors.password?{color:"error",helperText:`${i.errors.password}`}:{color:"success"})}),d.jsx(ie,{name:"confirmPassword",type:"password",variant:"filled",onChange:i.handleChange,label:"Confirm Password",onBlur:i.handleBlur,...i.touched.confirmPassword&&(i.errors.confirmPassword?{color:"error",helperText:`${i.errors.confirmPassword}`}:{color:"success"})}),d.jsx(ie,{name:"phone",variant:"filled",onChange:i.handleChange,label:"phone",onBlur:i.handleBlur,...i.touched.phone&&(i.errors.phone?{color:"error",helperText:`${i.errors.phone}`}:{color:"success"})})]}),d.jsx("button",{type:"submit",className:"w-[full] border rounded-[5%] bg-orange-500 p-2 ",children:"sign up"})]})]})})]})}function cxe(e){const[t,r]=T.useState(!1),n=Zt(),i=()=>{r(!1),e.setisOtpGenerated(!1)},a=Sr({initialValues:{email:e.email,otp:""},validationSchema:sxe,onSubmit:async(o,s)=>{var l;e.role=="0"?l=await rxe(o):e.role=="1"?l=await nxe(o):e.role=="2"?l=await ixe(o):e.role=="3"&&(l=await axe(o)),l&&(i(),Q.fire({title:"Registeration Successfull",text:"You have successfully Registered",icon:"success"}).then(()=>{n("/login")}))}});return T.useEffect(()=>{e.isOtpGenerated&&r(!0)},[]),d.jsx("div",{className:"fixed w-screen h-screen",children:d.jsxs(DC,{isOpen:t,onRequestClose:i,overlayClassName:"fixed bg-black bg-opacity-50 inset-0 flex justify-center items-center",className:"bg-white opacity-100 mx-w-[60vw] flex flex-col gap-10 p-10 rounded-lg justify-center items-center ",children:[d.jsx("h1",{className:"text-center font-bold",children:"Verification"}),d.jsxs("h3",{children:["Otp has been generated and sent to the email ",$Y(e.email)]}),d.jsxs("form",{onSubmit:a.handleSubmit,className:"w-full flex flex-col gap-10 justify-center items-center",children:[d.jsx("div",{className:"flex flex-row gap-10 w-full",children:d.jsx(ie,{name:"otp",variant:"filled",label:"Enter Otp",onChange:a.handleChange,onBlur:a.handleBlur,className:"w-[40vw]",...a.touched.otp&&(a.errors.otp?{color:"error",helperText:`${a.errors.otp}`}:{color:"success"})})}),d.jsx("button",{type:"submit",className:"w-full border rounded-[5%] bg-orange-500 p-2",children:"Submit"})]})]})})}var uxe={exports:{}},yI={exports:{}},Mr={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var vI,W3;function dxe(){if(W3)return vI;W3=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function i(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var o={},s=0;s<10;s++)o["_"+String.fromCharCode(s)]=s;var l=Object.getOwnPropertyNames(o).map(function(u){return o[u]});if(l.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(u){c[u]=u}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return vI=i()?Object.assign:function(a,o){for(var s,l=n(a),c,u=1;u<arguments.length;u++){s=Object(arguments[u]);for(var h in s)t.call(s,h)&&(l[h]=s[h]);if(e){c=e(s);for(var f=0;f<c.length;f++)r.call(s,c[f])&&(l[c[f]]=s[c[f]])}}return l},vI}/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K3;function hxe(){if(K3)return Mr;K3=1;var e=dxe(),t=typeof Symbol=="function"&&Symbol.for,r=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,a=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,s=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.forward_ref"):60112,u=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.memo"):60115,f=t?Symbol.for("react.lazy"):60116,p=typeof Symbol=="function"&&Symbol.iterator;function m(F){for(var J="https://reactjs.org/docs/error-decoder.html?invariant="+F,se=1;se<arguments.length;se++)J+="&args[]="+encodeURIComponent(arguments[se]);return"Minified React error #"+F+"; visit "+J+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function v(F,J,se){this.props=F,this.context=J,this.refs=y,this.updater=se||g}v.prototype.isReactComponent={},v.prototype.setState=function(F,J){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error(m(85));this.updater.enqueueSetState(this,F,J,"setState")},v.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function b(){}b.prototype=v.prototype;function E(F,J,se){this.props=F,this.context=J,this.refs=y,this.updater=se||g}var S=E.prototype=new b;S.constructor=E,e(S,v.prototype),S.isPureReactComponent=!0;var I={current:null},N=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function j(F,J,se){var he,ge={},je=null,ze=null;if(J!=null)for(he in J.ref!==void 0&&(ze=J.ref),J.key!==void 0&&(je=""+J.key),J)N.call(J,he)&&!L.hasOwnProperty(he)&&(ge[he]=J[he]);var Me=arguments.length-2;if(Me===1)ge.children=se;else if(1<Me){for(var tt=Array(Me),Tt=0;Tt<Me;Tt++)tt[Tt]=arguments[Tt+2];ge.children=tt}if(F&&F.defaultProps)for(he in Me=F.defaultProps,Me)ge[he]===void 0&&(ge[he]=Me[he]);return{$$typeof:r,type:F,key:je,ref:ze,props:ge,_owner:I.current}}function z(F,J){return{$$typeof:r,type:F.type,key:J,ref:F.ref,props:F.props,_owner:F._owner}}function A(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function V(F){var J={"=":"=0",":":"=2"};return"$"+(""+F).replace(/[=:]/g,function(se){return J[se]})}var G=/\/+/g,X=[];function $(F,J,se,he){if(X.length){var ge=X.pop();return ge.result=F,ge.keyPrefix=J,ge.func=se,ge.context=he,ge.count=0,ge}return{result:F,keyPrefix:J,func:se,context:he,count:0}}function B(F){F.result=null,F.keyPrefix=null,F.func=null,F.context=null,F.count=0,10>X.length&&X.push(F)}function K(F,J,se,he){var ge=typeof F;(ge==="undefined"||ge==="boolean")&&(F=null);var je=!1;if(F===null)je=!0;else switch(ge){case"string":case"number":je=!0;break;case"object":switch(F.$$typeof){case r:case n:je=!0}}if(je)return se(he,F,J===""?"."+D(F,0):J),1;if(je=0,J=J===""?".":J+":",Array.isArray(F))for(var ze=0;ze<F.length;ze++){ge=F[ze];var Me=J+D(ge,ze);je+=K(ge,Me,se,he)}else if(F===null||typeof F!="object"?Me=null:(Me=p&&F[p]||F["@@iterator"],Me=typeof Me=="function"?Me:null),typeof Me=="function")for(F=Me.call(F),ze=0;!(ge=F.next()).done;)ge=ge.value,Me=J+D(ge,ze++),je+=K(ge,Me,se,he);else if(ge==="object")throw se=""+F,Error(m(31,se==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":se,""));return je}function P(F,J,se){return F==null?0:K(F,"",J,se)}function D(F,J){return typeof F=="object"&&F!==null&&F.key!=null?V(F.key):J.toString(36)}function H(F,J){F.func.call(F.context,J,F.count++)}function x(F,J,se){var he=F.result,ge=F.keyPrefix;F=F.func.call(F.context,J,F.count++),Array.isArray(F)?w(F,he,se,function(je){return je}):F!=null&&(A(F)&&(F=z(F,ge+(!F.key||J&&J.key===F.key?"":(""+F.key).replace(G,"$&/")+"/")+se)),he.push(F))}function w(F,J,se,he,ge){var je="";se!=null&&(je=(""+se).replace(G,"$&/")+"/"),J=$(J,je,he,ge),P(F,x,J),B(J)}var O={current:null};function C(){var F=O.current;if(F===null)throw Error(m(321));return F}var q={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:I,IsSomeRendererActing:{current:!1},assign:e};return Mr.Children={map:function(F,J,se){if(F==null)return F;var he=[];return w(F,he,null,J,se),he},forEach:function(F,J,se){if(F==null)return F;J=$(null,null,J,se),P(F,H,J),B(J)},count:function(F){return P(F,function(){return null},null)},toArray:function(F){var J=[];return w(F,J,null,function(se){return se}),J},only:function(F){if(!A(F))throw Error(m(143));return F}},Mr.Component=v,Mr.Fragment=i,Mr.Profiler=o,Mr.PureComponent=E,Mr.StrictMode=a,Mr.Suspense=u,Mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Mr.cloneElement=function(F,J,se){if(F==null)throw Error(m(267,F));var he=e({},F.props),ge=F.key,je=F.ref,ze=F._owner;if(J!=null){if(J.ref!==void 0&&(je=J.ref,ze=I.current),J.key!==void 0&&(ge=""+J.key),F.type&&F.type.defaultProps)var Me=F.type.defaultProps;for(tt in J)N.call(J,tt)&&!L.hasOwnProperty(tt)&&(he[tt]=J[tt]===void 0&&Me!==void 0?Me[tt]:J[tt])}var tt=arguments.length-2;if(tt===1)he.children=se;else if(1<tt){Me=Array(tt);for(var Tt=0;Tt<tt;Tt++)Me[Tt]=arguments[Tt+2];he.children=Me}return{$$typeof:r,type:F.type,key:ge,ref:je,props:he,_owner:ze}},Mr.createContext=function(F,J){return J===void 0&&(J=null),F={$$typeof:l,_calculateChangedBits:J,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider={$$typeof:s,_context:F},F.Consumer=F},Mr.createElement=j,Mr.createFactory=function(F){var J=j.bind(null,F);return J.type=F,J},Mr.createRef=function(){return{current:null}},Mr.forwardRef=function(F){return{$$typeof:c,render:F}},Mr.isValidElement=A,Mr.lazy=function(F){return{$$typeof:f,_ctor:F,_status:-1,_result:null}},Mr.memo=function(F,J){return{$$typeof:h,type:F,compare:J===void 0?null:J}},Mr.useCallback=function(F,J){return C().useCallback(F,J)},Mr.useContext=function(F,J){return C().useContext(F,J)},Mr.useDebugValue=function(){},Mr.useEffect=function(F,J){return C().useEffect(F,J)},Mr.useImperativeHandle=function(F,J,se){return C().useImperativeHandle(F,J,se)},Mr.useLayoutEffect=function(F,J){return C().useLayoutEffect(F,J)},Mr.useMemo=function(F,J){return C().useMemo(F,J)},Mr.useReducer=function(F,J,se){return C().useReducer(F,J,se)},Mr.useRef=function(F){return C().useRef(F)},Mr.useState=function(F){return C().useState(F)},Mr.version="16.14.0",Mr}var q3;function fxe(){return q3||(q3=1,yI.exports=hxe()),yI.exports}var BQ={exports:{}};(function(e,t){(function(r){e.exports=r(null)})(function r(n){var i=/^\0+/g,a=/[\0\r\f]/g,o=/: */g,s=/zoo|gra/,l=/([,: ])(transform)/g,c=/,+\s*(?![^(]*[)])/g,u=/ +\s*(?![^(]*[)])/g,h=/ *[\0] */g,f=/,\r+?/g,p=/([\t\r\n ])*\f?&/g,m=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,g=/\W+/g,y=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,b=/:(read-only)/g,E=/\s+(?=[{\];=:>])/g,S=/([[}=:>])\s+/g,I=/(\{[^{]+?);(?=\})/g,N=/\s{2,}/g,L=/([^\(])(:+) */g,j=/[svh]\w+-[tblr]{2}/,z=/\(\s*(.*)\s*\)/g,A=/([\s\S]*?);/g,V=/-self|flex-/g,G=/[^]*?(:[rp][el]a[\w-]+)[^]*/,X=/stretch|:\s*\w+\-(?:conte|avail)/,$=/([^-])(image-set\()/,B="-webkit-",K="-moz-",P="-ms-",D=59,H=125,x=123,w=40,O=41,C=91,q=93,F=10,J=13,se=9,he=64,ge=32,je=38,ze=45,Me=95,tt=42,Tt=44,rt=58,yt=39,Oe=34,it=47,Ge=62,Ze=43,Re=126,Z=0,Te=12,Fe=11,He=107,ne=109,pe=115,We=112,st=111,Yt=105,Kn=99,kn=100,Ii=112,Pn=1,Hi=1,Cn=0,Ni=1,Dn=1,Kg=1,Qb=0,Ec=0,Wd=0,Lf=[],qg=[],cs=0,jf=null,oR=-2,Zb=-1,sR=0,ew=1,tw=2,lR=3,Yg=0,mu=1,Mf="",Xs="",Kd="";function Uf(Pt,ft,dt,Ht,Je){for(var Cr,de,cr=0,ar=0,xn=0,er=0,qn=0,Qr=0,ur=0,Ai=0,ma=0,Rl=0,ga=0,To=0,qd=0,us=0,fr=0,wi=0,_c=0,vu=0,Hr=0,It=dt.length,rn=It-1,Ei="",Ft="",U="",W="",re="",Ae="";fr<It;){if(ur=dt.charCodeAt(fr),fr===rn&&ar+er+xn+cr!==0&&(ar!==0&&(ur=ar===it?F:it),er=xn=cr=0,It++,rn++),ar+er+xn+cr===0){if(fr===rn&&(wi>0&&(Ft=Ft.replace(a,"")),Ft.trim().length>0)){switch(ur){case ge:case se:case D:case J:case F:break;default:Ft+=dt.charAt(fr)}ur=D}if(_c===1)switch(ur){case x:case H:case D:case Oe:case yt:case w:case O:case Tt:_c=0;case se:case J:case F:case ge:break;default:for(_c=0,Hr=fr,qn=ur,fr--,ur=D;Hr<It;)switch(dt.charCodeAt(Hr++)){case F:case J:case D:++fr,ur=qn,Hr=It;break;case rt:wi>0&&(++fr,ur=qn);case x:Hr=It}}switch(ur){case x:for(qn=(Ft=Ft.trim()).charCodeAt(0),ga=1,Hr=++fr;fr<It;){switch(ur=dt.charCodeAt(fr)){case x:ga++;break;case H:ga--;break;case it:switch(Qr=dt.charCodeAt(fr+1)){case tt:case it:fr=iw(Qr,fr,rn,dt)}break;case C:ur++;case w:ur++;case Oe:case yt:for(;fr++<rn&&dt.charCodeAt(fr)!==ur;);}if(ga===0)break;fr++}switch(U=dt.substring(Hr,fr),qn===Z&&(qn=(Ft=Ft.replace(i,"").trim()).charCodeAt(0)),qn){case he:switch(wi>0&&(Ft=Ft.replace(a,"")),Qr=Ft.charCodeAt(1)){case kn:case ne:case pe:case ze:Cr=ft;break;default:Cr=Lf}if(Hr=(U=Uf(ft,Cr,U,Qr,Je+1)).length,Wd>0&&Hr===0&&(Hr=Ft.length),cs>0&&(Cr=Xg(Lf,Ft,vu),de=gu(lR,U,Cr,ft,Hi,Pn,Hr,Qr,Je,Ht),Ft=Cr.join(""),de!==void 0&&(Hr=(U=de.trim()).length)===0&&(Qr=0,U="")),Hr>0)switch(Qr){case pe:Ft=Ft.replace(z,nw);case kn:case ne:case ze:U=Ft+"{"+U+"}";break;case He:U=(Ft=Ft.replace(y,"$1 $2"+(mu>0?Mf:"")))+"{"+U+"}",Dn===1||Dn===2&&Vf("@"+U,3)?U="@"+B+U+"@"+U:U="@"+U;break;default:U=Ft+U,Ht===Ii&&(W+=U,U="")}else U="";break;default:U=Uf(ft,Xg(ft,Ft,vu),U,Ht,Je+1)}re+=U,To=0,_c=0,us=0,wi=0,vu=0,qd=0,Ft="",U="",ur=dt.charCodeAt(++fr);break;case H:case D:if((Hr=(Ft=(wi>0?Ft.replace(a,""):Ft).trim()).length)>1)switch(us===0&&((qn=Ft.charCodeAt(0))===ze||qn>96&&qn<123)&&(Hr=(Ft=Ft.replace(" ",":")).length),cs>0&&(de=gu(ew,Ft,ft,Pt,Hi,Pn,W.length,Ht,Je,Ht))!==void 0&&(Hr=(Ft=de.trim()).length)===0&&(Ft="\0\0"),qn=Ft.charCodeAt(0),Qr=Ft.charCodeAt(1),qn){case Z:break;case he:if(Qr===Yt||Qr===Kn){Ae+=Ft+dt.charAt(fr);break}default:if(Ft.charCodeAt(Hr-1)===rt)break;W+=Ff(Ft,qn,Qr,Ft.charCodeAt(2))}To=0,_c=0,us=0,wi=0,vu=0,Ft="",ur=dt.charCodeAt(++fr)}}switch(ur){case J:case F:if(ar+er+xn+cr+Ec===0)switch(Rl){case O:case yt:case Oe:case he:case Re:case Ge:case tt:case Ze:case it:case ze:case rt:case Tt:case D:case x:case H:break;default:us>0&&(_c=1)}ar===it?ar=0:Ni+To===0&&Ht!==He&&Ft.length>0&&(wi=1,Ft+="\0"),cs*Yg>0&&gu(sR,Ft,ft,Pt,Hi,Pn,W.length,Ht,Je,Ht),Pn=1,Hi++;break;case D:case H:if(ar+er+xn+cr===0){Pn++;break}default:switch(Pn++,Ei=dt.charAt(fr),ur){case se:case ge:if(er+cr+ar===0)switch(Ai){case Tt:case rt:case se:case ge:Ei="";break;default:ur!==ge&&(Ei=" ")}break;case Z:Ei="\\0";break;case Te:Ei="\\f";break;case Fe:Ei="\\v";break;case je:er+ar+cr===0&&Ni>0&&(vu=1,wi=1,Ei="\f"+Ei);break;case 108:if(er+ar+cr+Cn===0&&us>0)switch(fr-us){case 2:Ai===We&&dt.charCodeAt(fr-3)===rt&&(Cn=Ai);case 8:ma===st&&(Cn=ma)}break;case rt:er+ar+cr===0&&(us=fr);break;case Tt:ar+xn+er+cr===0&&(wi=1,Ei+="\r");break;case Oe:case yt:ar===0&&(er=er===ur?0:er===0?ur:er);break;case C:er+ar+xn===0&&cr++;break;case q:er+ar+xn===0&&cr--;break;case O:er+ar+cr===0&&xn--;break;case w:if(er+ar+cr===0){if(To===0)switch(2*Ai+3*ma){case 533:break;default:ga=0,To=1}xn++}break;case he:ar+xn+er+cr+us+qd===0&&(qd=1);break;case tt:case it:if(er+cr+xn>0)break;switch(ar){case 0:switch(2*ur+3*dt.charCodeAt(fr+1)){case 235:ar=it;break;case 220:Hr=fr,ar=tt}break;case tt:ur===it&&Ai===tt&&Hr+2!==fr&&(dt.charCodeAt(Hr+2)===33&&(W+=dt.substring(Hr,fr+1)),Ei="",ar=0)}}if(ar===0){if(Ni+er+cr+qd===0&&Ht!==He&&ur!==D)switch(ur){case Tt:case Re:case Ge:case Ze:case O:case w:if(To===0){switch(Ai){case se:case ge:case F:case J:Ei+="\0";break;default:Ei="\0"+Ei+(ur===Tt?"":"\0")}wi=1}else switch(ur){case w:us+7===fr&&Ai===108&&(us=0),To=++ga;break;case O:(To=--ga)==0&&(wi=1,Ei+="\0")}break;case se:case ge:switch(Ai){case Z:case x:case H:case D:case Tt:case Te:case se:case ge:case F:case J:break;default:To===0&&(wi=1,Ei+="\0")}}Ft+=Ei,ur!==ge&&ur!==se&&(Rl=ur)}}ma=Ai,Ai=ur,fr++}if(Hr=W.length,Wd>0&&Hr===0&&re.length===0&&ft[0].length!==0&&(Ht!==ne||ft.length===1&&(Ni>0?Xs:Kd)===ft[0])&&(Hr=ft.join(",").length+2),Hr>0){if(Cr=Ni===0&&Ht!==He?function(Qe){for(var _e,ae,ot=0,Dt=Qe.length,Ie=Array(Dt);ot<Dt;++ot){for(var $e=Qe[ot].split(h),Ye="",et=0,gt=0,kt=0,xt=0,Ln=$e.length;et<Ln;++et)if(!((gt=(ae=$e[et]).length)===0&&Ln>1)){if(kt=Ye.charCodeAt(Ye.length-1),xt=ae.charCodeAt(0),_e="",et!==0)switch(kt){case tt:case Re:case Ge:case Ze:case ge:case w:break;default:_e=" "}switch(xt){case je:ae=_e+Xs;case Re:case Ge:case Ze:case ge:case O:case w:break;case C:ae=_e+ae+Xs;break;case rt:switch(2*ae.charCodeAt(1)+3*ae.charCodeAt(2)){case 530:if(Kg>0){ae=_e+ae.substring(8,gt-1);break}default:(et<1||$e[et-1].length<1)&&(ae=_e+Xs+ae)}break;case Tt:_e="";default:gt>1&&ae.indexOf(":")>0?ae=_e+ae.replace(L,"$1"+Xs+"$2"):ae=_e+ae+Xs}Ye+=ae}Ie[ot]=Ye.replace(a,"").trim()}return Ie}(ft):ft,cs>0&&(de=gu(tw,W,Cr,Pt,Hi,Pn,Hr,Ht,Je,Ht))!==void 0&&(W=de).length===0)return Ae+W+re;if(W=Cr.join(",")+"{"+W+"}",Dn*Cn!=0){switch(Dn===2&&!Vf(W,2)&&(Cn=0),Cn){case st:W=W.replace(b,":"+K+"$1")+W;break;case We:W=W.replace(v,"::"+B+"input-$1")+W.replace(v,"::"+K+"$1")+W.replace(v,":"+P+"input-$1")+W}Cn=0}}return Ae+W+re}function Xg(Pt,ft,dt){var Ht=ft.trim().split(f),Je=Ht,Cr=Ht.length,de=Pt.length;switch(de){case 0:case 1:for(var cr=0,ar=de===0?"":Pt[0]+" ";cr<Cr;++cr)Je[cr]=rw(ar,Je[cr],dt,de).trim();break;default:cr=0;var xn=0;for(Je=[];cr<Cr;++cr)for(var er=0;er<de;++er)Je[xn++]=rw(Pt[er]+" ",Ht[cr],dt,de).trim()}return Je}function rw(Pt,ft,dt,Ht){var Je=ft,Cr=Je.charCodeAt(0);switch(Cr<33&&(Cr=(Je=Je.trim()).charCodeAt(0)),Cr){case je:switch(Ni+Ht){case 0:case 1:if(Pt.trim().length===0)break;default:return Je.replace(p,"$1"+Pt.trim())}break;case rt:switch(Je.charCodeAt(1)){case 103:if(Kg>0&&Ni>0)return Je.replace(m,"$1").replace(p,"$1"+Kd);break;default:return Pt.trim()+Je.replace(p,"$1"+Pt.trim())}default:if(dt*Ni>0&&Je.indexOf("\f")>0)return Je.replace(p,(Pt.charCodeAt(0)===rt?"":"$1")+Pt.trim())}return Pt+Je}function Ff(Pt,ft,dt,Ht){var Je,Cr=0,de=Pt+";",cr=2*ft+3*dt+4*Ht;if(cr===944)return function(ar){var xn=ar.length,er=ar.indexOf(":",9)+1,qn=ar.substring(0,er).trim(),Qr=ar.substring(er,xn-1).trim();switch(ar.charCodeAt(9)*mu){case 0:break;case ze:if(ar.charCodeAt(10)!==110)break;default:for(var ur=Qr.split((Qr="",c)),Ai=0,er=0,xn=ur.length;Ai<xn;er=0,++Ai){for(var ma=ur[Ai],Rl=ma.split(u);ma=Rl[er];){var ga=ma.charCodeAt(0);if(mu===1&&(ga>he&&ga<90||ga>96&&ga<123||ga===Me||ga===ze&&ma.charCodeAt(1)!==ze))switch(isNaN(parseFloat(ma))+(ma.indexOf("(")!==-1)){case 1:switch(ma){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:ma+=Mf}}Rl[er++]=ma}Qr+=(Ai===0?"":",")+Rl.join(" ")}}return Qr=qn+Qr+";",Dn===1||Dn===2&&Vf(Qr,1)?B+Qr+Qr:Qr}(de);if(Dn===0||Dn===2&&!Vf(de,1))return de;switch(cr){case 1015:return de.charCodeAt(10)===97?B+de+de:de;case 951:return de.charCodeAt(3)===116?B+de+de:de;case 963:return de.charCodeAt(5)===110?B+de+de:de;case 1009:if(de.charCodeAt(4)!==100)break;case 969:case 942:return B+de+de;case 978:return B+de+K+de+de;case 1019:case 983:return B+de+K+de+P+de+de;case 883:return de.charCodeAt(8)===ze?B+de+de:de.indexOf("image-set(",11)>0?de.replace($,"$1"+B+"$2")+de:de;case 932:if(de.charCodeAt(4)===ze)switch(de.charCodeAt(5)){case 103:return B+"box-"+de.replace("-grow","")+B+de+P+de.replace("grow","positive")+de;case 115:return B+de+P+de.replace("shrink","negative")+de;case 98:return B+de+P+de.replace("basis","preferred-size")+de}return B+de+P+de+de;case 964:return B+de+P+"flex-"+de+de;case 1023:if(de.charCodeAt(8)!==99)break;return Je=de.substring(de.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),B+"box-pack"+Je+B+de+P+"flex-pack"+Je+de;case 1005:return s.test(de)?de.replace(o,":"+B)+de.replace(o,":"+K)+de:de;case 1e3:switch(Cr=(Je=de.substring(13).trim()).indexOf("-")+1,Je.charCodeAt(0)+Je.charCodeAt(Cr)){case 226:Je=de.replace(j,"tb");break;case 232:Je=de.replace(j,"tb-rl");break;case 220:Je=de.replace(j,"lr");break;default:return de}return B+de+P+Je+de;case 1017:if(de.indexOf("sticky",9)===-1)return de;case 975:switch(Cr=(de=Pt).length-10,cr=(Je=(de.charCodeAt(Cr)===33?de.substring(0,Cr):de).substring(Pt.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|Je.charCodeAt(7))){case 203:if(Je.charCodeAt(8)<111)break;case 115:de=de.replace(Je,B+Je)+";"+de;break;case 207:case 102:de=de.replace(Je,B+(cr>102?"inline-":"")+"box")+";"+de.replace(Je,B+Je)+";"+de.replace(Je,P+Je+"box")+";"+de}return de+";";case 938:if(de.charCodeAt(5)===ze)switch(de.charCodeAt(6)){case 105:return Je=de.replace("-items",""),B+de+B+"box-"+Je+P+"flex-"+Je+de;case 115:return B+de+P+"flex-item-"+de.replace(V,"")+de;default:return B+de+P+"flex-line-pack"+de.replace("align-content","").replace(V,"")+de}break;case 973:case 989:if(de.charCodeAt(3)!==ze||de.charCodeAt(4)===122)break;case 931:case 953:if(X.test(Pt)===!0)return(Je=Pt.substring(Pt.indexOf(":")+1)).charCodeAt(0)===115?Ff(Pt.replace("stretch","fill-available"),ft,dt,Ht).replace(":fill-available",":stretch"):de.replace(Je,B+Je)+de.replace(Je,K+Je.replace("fill-",""))+de;break;case 962:if(de=B+de+(de.charCodeAt(5)===102?P+de:"")+de,dt+Ht===211&&de.charCodeAt(13)===105&&de.indexOf("transform",10)>0)return de.substring(0,de.indexOf(";",27)+1).replace(l,"$1"+B+"$2")+de}return de}function Vf(Pt,ft){var dt=Pt.indexOf(ft===1?":":"{"),Ht=Pt.substring(0,ft!==3?dt:10),Je=Pt.substring(dt+1,Pt.length-1);return jf(ft!==2?Ht:Ht.replace(G,"$1"),Je,ft)}function nw(Pt,ft){var dt=Ff(ft,ft.charCodeAt(0),ft.charCodeAt(1),ft.charCodeAt(2));return dt!==ft+";"?dt.replace(A," or ($1)").substring(4):"("+ft+")"}function gu(Pt,ft,dt,Ht,Je,Cr,de,cr,ar,xn){for(var er,qn=0,Qr=ft;qn<cs;++qn)switch(er=qg[qn].call(yu,Pt,Qr,dt,Ht,Je,Cr,de,cr,ar,xn)){case void 0:case!1:case!0:case null:break;default:Qr=er}if(Qr!==ft)return Qr}function iw(Pt,ft,dt,Ht){for(var Je=ft+1;Je<dt;++Je)switch(Ht.charCodeAt(Je)){case it:if(Pt===tt&&Ht.charCodeAt(Je-1)===tt&&ft+2!==Je)return Je+1;break;case F:if(Pt===it)return Je+1}return Je}function Bf(Pt){for(var ft in Pt){var dt=Pt[ft];switch(ft){case"keyframe":mu=0|dt;break;case"global":Kg=0|dt;break;case"cascade":Ni=0|dt;break;case"compress":Qb=0|dt;break;case"semicolon":Ec=0|dt;break;case"preserve":Wd=0|dt;break;case"prefix":jf=null,dt?typeof dt!="function"?Dn=1:(Dn=2,jf=dt):Dn=0}}return Bf}function yu(Pt,ft){if(this!==void 0&&this.constructor===yu)return r(Pt);var dt=Pt,Ht=dt.charCodeAt(0);Ht<33&&(Ht=(dt=dt.trim()).charCodeAt(0)),mu>0&&(Mf=dt.replace(g,Ht===C?"":"-")),Ht=1,Ni===1?Kd=dt:Xs=dt;var Je,Cr=[Kd];cs>0&&(Je=gu(Zb,ft,Cr,Cr,Hi,Pn,0,0,0,0))!==void 0&&typeof Je=="string"&&(ft=Je);var de=Uf(Lf,Cr,ft,0,0);return cs>0&&(Je=gu(oR,de,Cr,Cr,Hi,Pn,de.length,0,0,0))!==void 0&&typeof(de=Je)!="string"&&(Ht=0),Mf="",Kd="",Xs="",Cn=0,Hi=1,Pn=1,Qb*Ht==0?de:de.replace(a,"").replace(E,"").replace(S,"$1").replace(I,"$1").replace(N," ")}return yu.use=function Pt(ft){switch(ft){case void 0:case null:cs=qg.length=0;break;default:if(typeof ft=="function")qg[cs++]=ft;else if(typeof ft=="object")for(var dt=0,Ht=ft.length;dt<Ht;++dt)Pt(ft[dt]);else Yg=0|!!ft}return Pt},yu.set=Bf,n!==void 0&&Bf(n),yu})})(BQ);var pxe=BQ.exports;const $Q=es(pxe);var HQ={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function(r){var n="/*|*/",i=n+"}";function a(o){if(o)try{r(o+"}")}catch{}}return function(s,l,c,u,h,f,p,m,g,y){switch(s){case 1:if(g===0&&l.charCodeAt(0)===64)return r(l+";"),"";break;case 2:if(m===0)return l+n;break;case 3:switch(m){case 102:case 112:return r(c[0]+l),"";default:return l+(y===0?n:"")}case-2:l.split(i).forEach(a)}}}})})(HQ);var mxe=HQ.exports;const gxe=es(mxe);var yxe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Y3=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function vxe(e,t){return!!(e===t||Y3(e)&&Y3(t))}function bxe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!vxe(e[r],t[r]))return!1;return!0}function zQ(e,t){t===void 0&&(t=bxe);var r,n=[],i,a=!1;function o(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return a&&r===this&&t(s,n)||(i=e.apply(this,s),a=!0,r=this,n=s),i}return o}function wxe(e){var t={};return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Exe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,_xe=wxe(function(e){return Exe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function WL(e){return Object.prototype.toString.call(e).slice(8,-1)}function By(e){return WL(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function X3(e){return WL(e)==="Array"}function J3(e){return WL(e)==="Symbol"}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Q3(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function Z3(e,t,r,n){var i=n.propertyIsEnumerable(t)?"enumerable":"nonenumerable";i==="enumerable"&&(e[t]=r),i==="nonenumerable"&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}function GQ(e,t,r){if(!By(t))return r&&X3(r)&&r.forEach(function(c){t=c(e,t)}),t;var n={};if(By(e)){var i=Object.getOwnPropertyNames(e),a=Object.getOwnPropertySymbols(e);n=Q3(i,a).reduce(function(c,u){var h=e[u];return(!J3(u)&&!Object.getOwnPropertyNames(t).includes(u)||J3(u)&&!Object.getOwnPropertySymbols(t).includes(u))&&Z3(c,u,h,e),c},{})}var o=Object.getOwnPropertyNames(t),s=Object.getOwnPropertySymbols(t),l=Q3(o,s).reduce(function(c,u){var h=t[u],f=By(e)?e[u]:void 0;return r&&X3(r)&&r.forEach(function(p){h=p(f,h)}),f!==void 0&&By(h)&&(h=GQ(f,h,r)),Z3(c,u,h,t),c},n);return l}function Sxe(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=null,i=e;return By(e)&&e.extensions&&Object.keys(e).length===1&&(i={},n=e.extensions),t.reduce(function(a,o){return GQ(a,o,n)},i)}var qS={},eF=function(e,t){for(var r=[e[0]],n=0,i=t.length;n<i;n+=1)r.push(t[n],e[n+1]);return r},WQ=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Txe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sb=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Cxe=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},Hm=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},KL=function(e){return(typeof e>"u"?"undefined":WQ(e))==="object"&&e.constructor===Object},YS=Object.freeze([]),b0=Object.freeze({});function ou(e){return typeof e=="function"}function qL(e){return e.displayName||e.name||"Component"}function xxe(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)}function Tb(e){return e&&typeof e.styledComponentId=="string"}var wv=typeof process<"u"&&(qS.REACT_APP_SC_ATTR||qS.SC_ATTR)||"data-styled",GC="data-styled-version",Rxe="data-styled-streamed",of=typeof window<"u"&&"HTMLElement"in window,KQ=typeof SC_DISABLE_SPEEDY=="boolean"&&SC_DISABLE_SPEEDY||typeof process<"u"&&(qS.REACT_APP_SC_DISABLE_SPEEDY||qS.SC_DISABLE_SPEEDY)||!1,Ixe={},lc=function(e){Sb(t,e);function t(r){mc(this,t);for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var o,o=Hm(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+r+" for more information."+(i.length>0?" Additional arguments: "+i.join(", "):"")));return Hm(o)}return t}(Error),Nxe=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,Axe=function(e){var t=""+(e||""),r=[];return t.replace(Nxe,function(n,i,a){return r.push({componentId:i,matchIndex:a}),n}),r.map(function(n,i){var a=n.componentId,o=n.matchIndex,s=r[i+1],l=s?t.slice(o,s.matchIndex):t.slice(o);return{componentId:a,cssFromDOM:l}})},Oxe=/^\s*\/\/.*$/gm,qQ=new $Q({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),YQ=new $Q({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),qk=[],XQ=function(t){if(t===-2){var r=qk;return qk=[],r}},JQ=gxe(function(e){qk.push(e)}),QQ=void 0,cm=void 0,ZQ=void 0,kxe=function(t,r,n){return r>0&&n.slice(0,r).indexOf(cm)!==-1&&n.slice(r-cm.length,r)!==cm?"."+QQ:t},Pxe=function(t,r,n){t===2&&n.length&&n[0].lastIndexOf(cm)>0&&(n[0]=n[0].replace(ZQ,kxe))};YQ.use([Pxe,JQ,XQ]);qQ.use([JQ,XQ]);var Dxe=function(t){return qQ("",t)};function YL(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"&",i=e.join("").replace(Oxe,""),a=t&&r?r+" "+t+" { "+i+" }":i;return QQ=n,cm=t,ZQ=new RegExp("\\"+cm+"\\b","g"),YQ(r||!t?"":t,a)}var XL=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},JL=function(t,r,n){if(n){var i=t[r]||(t[r]=Object.create(null));i[n]=!0}},XS=function(t,r){t[r]=Object.create(null)},QL=function(t){return function(r,n){return t[r]!==void 0&&t[r][n]}},eZ=function(t){var r="";for(var n in t)r+=Object.keys(t[n]).join(" ")+" ";return r.trim()},Lxe=function(t){var r=Object.create(null);for(var n in t)r[n]=go({},t[n]);return r},bI=function(t){if(t.sheet)return t.sheet;for(var r=t.ownerDocument.styleSheets.length,n=0;n<r;n+=1){var i=t.ownerDocument.styleSheets[n];if(i.ownerNode===t)return i}throw new lc(10)},jxe=function(t,r,n){if(!r)return!1;var i=t.cssRules.length;try{t.insertRule(r,n<=i?n:i)}catch{return!1}return!0},Mxe=function(t,r,n){for(var i=r-n,a=r;a>i;a-=1)t.deleteRule(a)},ZL=function(t){return`
/* sc-component-id: `+t+` */
`},wI=function(t,r){for(var n=0,i=0;i<=r;i+=1)n+=t[i];return n},Uxe=function(t,r,n){var i=document;t?i=t.ownerDocument:r&&(i=r.ownerDocument);var a=i.createElement("style");a.setAttribute(wv,""),a.setAttribute(GC,"4.4.1");var o=XL();if(o&&a.setAttribute("nonce",o),a.appendChild(i.createTextNode("")),t&&!r)t.appendChild(a);else{if(!r||!t||!r.parentNode)throw new lc(6);r.parentNode.insertBefore(a,n?r:r.nextSibling)}return a},ej=function(t,r){return function(n){var i=XL(),a=[i&&'nonce="'+i+'"',wv+'="'+eZ(r)+'"',GC+'="4.4.1"',n],o=a.filter(Boolean).join(" ");return"<style "+o+">"+t()+"</style>"}},tj=function(t,r){return function(){var n,i=(n={},n[wv]=eZ(r),n[GC]="4.4.1",n),a=XL();return a&&(i.nonce=a),jr.createElement("style",go({},i,{dangerouslySetInnerHTML:{__html:t()}}))}},rj=function(t){return function(){return Object.keys(t)}},Fxe=function(t,r){var n=Object.create(null),i=Object.create(null),a=[],o=r!==void 0,s=!1,l=function(p){var m=i[p];return m!==void 0?m:(i[p]=a.length,a.push(0),XS(n,p),i[p])},c=function(p,m,g){for(var y=l(p),v=bI(t),b=wI(a,y),E=0,S=[],I=m.length,N=0;N<I;N+=1){var L=m[N],j=o;j&&L.indexOf("@import")!==-1?S.push(L):jxe(v,L,b+E)&&(j=!1,E+=1)}o&&S.length>0&&(s=!0,r().insertRules(p+"-import",S)),a[y]+=E,JL(n,p,g)},u=function(p){var m=i[p];if(m!==void 0&&t.isConnected!==!1){var g=a[m],y=bI(t),v=wI(a,m)-1;Mxe(y,v,g),a[m]=0,XS(n,p),o&&s&&r().removeRules(p+"-import")}},h=function(){var p=bI(t),m=p.cssRules,g="";for(var y in i){g+=ZL(y);for(var v=i[y],b=wI(a,v),E=a[v],S=b-E;S<b;S+=1){var I=m[S];I!==void 0&&(g+=I.cssText)}}return g};return{clone:function(){throw new lc(5)},css:h,getIds:rj(i),hasNameForId:QL(n),insertMarker:l,insertRules:c,removeRules:u,sealed:!1,styleTag:t,toElement:tj(h,n),toHTML:ej(h,n)}},tF=function(t,r){return t.createTextNode(ZL(r))},Vxe=function(t,r){var n=Object.create(null),i=Object.create(null),a=r!==void 0,o=!1,s=function(f){var p=i[f];return p!==void 0?p:(i[f]=tF(t.ownerDocument,f),t.appendChild(i[f]),n[f]=Object.create(null),i[f])},l=function(f,p,m){for(var g=s(f),y=[],v=p.length,b=0;b<v;b+=1){var E=p[b],S=a;if(S&&E.indexOf("@import")!==-1)y.push(E);else{S=!1;var I=b===v-1?"":" ";g.appendData(""+E+I)}}JL(n,f,m),a&&y.length>0&&(o=!0,r().insertRules(f+"-import",y))},c=function(f){var p=i[f];if(p!==void 0){var m=tF(t.ownerDocument,f);t.replaceChild(m,p),i[f]=m,XS(n,f),a&&o&&r().removeRules(f+"-import")}},u=function(){var f="";for(var p in i)f+=i[p].data;return f};return{clone:function(){throw new lc(5)},css:u,getIds:rj(i),hasNameForId:QL(n),insertMarker:s,insertRules:l,removeRules:c,sealed:!1,styleTag:t,toElement:tj(u,n),toHTML:ej(u,n)}},Bxe=function e(t,r){var n=t===void 0?Object.create(null):t,i=r===void 0?Object.create(null):r,a=function(f){var p=i[f];return p!==void 0?p:i[f]=[""]},o=function(f,p,m){var g=a(f);g[0]+=p.join(" "),JL(n,f,m)},s=function(f){var p=i[f];p!==void 0&&(p[0]="",XS(n,f))},l=function(){var f="";for(var p in i){var m=i[p][0];m&&(f+=ZL(p)+m)}return f},c=function(){var f=Lxe(n),p=Object.create(null);for(var m in i)p[m]=[i[m][0]];return e(f,p)},u={clone:c,css:l,getIds:rj(i),hasNameForId:QL(n),insertMarker:a,insertRules:o,removeRules:s,sealed:!1,styleTag:null,toElement:tj(l,n),toHTML:ej(l,n)};return u},rF=function(t,r,n,i,a){if(of&&!n){var o=Uxe(t,r,i);return KQ?Vxe(o,a):Fxe(o,a)}return Bxe()},$xe=function(t,r,n){for(var i=0,a=n.length;i<a;i+=1){var o=n[i],s=o.componentId,l=o.cssFromDOM,c=Dxe(l);t.insertRules(s,c)}for(var u=0,h=r.length;u<h;u+=1){var f=r[u];f.parentNode&&f.parentNode.removeChild(f)}},Hxe=/\s+/,JS=void 0;of?JS=KQ?40:1e3:JS=-1;var nF=0,EI=void 0,su=function(){function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:of?document.head:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;mc(this,e),this.getImportRuleTag=function(){var i=t.importRuleTag;if(i!==void 0)return i;var a=t.tags[0],o=!0;return t.importRuleTag=rF(t.target,a?a.styleTag:null,t.forceServer,o)},nF+=1,this.id=nF,this.forceServer=n,this.target=n?null:r,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!of||this.forceServer)return this;var r=[],n=[],i=!1,a=document.querySelectorAll("style["+wv+"]["+GC+'="4.4.1"]'),o=a.length;if(!o)return this;for(var s=0;s<o;s+=1){var l=a[s];i||(i=!!l.getAttribute(Rxe));for(var c=(l.getAttribute(wv)||"").trim().split(Hxe),u=c.length,h=0,f;h<u;h+=1)f=c[h],this.rehydratedNames[f]=!0;n.push.apply(n,Axe(l.textContent)),r.push(l)}var p=n.length;if(!p)return this;var m=this.makeTag(null);$xe(m,r,n),this.capacity=Math.max(1,JS-p),this.tags.push(m);for(var g=0;g<p;g+=1)this.tagMap[n[g].componentId]=m;return this},e.reset=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;EI=new e(void 0,r).rehydrate()},e.prototype.clone=function(){var r=new e(this.target,this.forceServer);return this.clones.push(r),r.tags=this.tags.map(function(n){for(var i=n.getIds(),a=n.clone(),o=0;o<i.length;o+=1)r.tagMap[i[o]]=a;return a}),r.rehydratedNames=go({},this.rehydratedNames),r.deferred=go({},this.deferred),r},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach(function(r){r.sealed=!0})},e.prototype.makeTag=function(r){var n=r?r.styleTag:null,i=!1;return rF(this.target,n,this.forceServer,i,this.getImportRuleTag)},e.prototype.getTagForId=function(r){var n=this.tagMap[r];if(n!==void 0&&!n.sealed)return n;var i=this.tags[this.tags.length-1];return this.capacity-=1,this.capacity===0&&(this.capacity=JS,i=this.makeTag(i),this.tags.push(i)),this.tagMap[r]=i},e.prototype.hasId=function(r){return this.tagMap[r]!==void 0},e.prototype.hasNameForId=function(r,n){if(this.ignoreRehydratedNames[r]===void 0&&this.rehydratedNames[n])return!0;var i=this.tagMap[r];return i!==void 0&&i.hasNameForId(r,n)},e.prototype.deferredInject=function(r,n){if(this.tagMap[r]===void 0){for(var i=this.clones,a=0;a<i.length;a+=1)i[a].deferredInject(r,n);this.getTagForId(r).insertMarker(r),this.deferred[r]=n}},e.prototype.inject=function(r,n,i){for(var a=this.clones,o=0;o<a.length;o+=1)a[o].inject(r,n,i);var s=this.getTagForId(r);if(this.deferred[r]!==void 0){var l=this.deferred[r].concat(n);s.insertRules(r,l,i),this.deferred[r]=void 0}else s.insertRules(r,n,i)},e.prototype.remove=function(r){var n=this.tagMap[r];if(n!==void 0){for(var i=this.clones,a=0;a<i.length;a+=1)i[a].remove(r);n.removeRules(r),this.ignoreRehydratedNames[r]=!0,this.deferred[r]=void 0}},e.prototype.toHTML=function(){return this.tags.map(function(r){return r.toHTML()}).join("")},e.prototype.toReactElements=function(){var r=this.id;return this.tags.map(function(n,i){var a="sc-"+r+"-"+i;return T.cloneElement(n.toElement(),{key:a})})},Txe(e,null,[{key:"master",get:function(){return EI||(EI=new e().rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),tZ=function(){function e(t,r){var n=this;mc(this,e),this.inject=function(i){i.hasNameForId(n.id,n.name)||i.inject(n.id,n.rules,n.name)},this.toString=function(){throw new lc(12,String(n.name))},this.name=t,this.rules=r,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),zxe=/([A-Z])/g,Gxe=/^ms-/;function iF(e){return e.replace(zxe,"-$1").toLowerCase().replace(Gxe,"-ms-")}function Wxe(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!(e in yxe)?t+"px":String(t).trim()}var rZ=function(t){return t==null||t===!1||t===""},Kxe=function e(t,r){var n=[],i=Object.keys(t);return i.forEach(function(a){if(!rZ(t[a])){if(KL(t[a]))return n.push.apply(n,e(t[a],a)),n;if(ou(t[a]))return n.push(iF(a)+":",t[a],";"),n;n.push(iF(a)+": "+Wxe(a,t[a])+";")}return n}),r?[r+" {"].concat(n,["}"]):n};function zm(e,t,r){if(Array.isArray(e)){for(var n=[],i=0,a=e.length,o;i<a;i+=1)o=zm(e[i],t,r),o!==null&&(Array.isArray(o)?n.push.apply(n,o):n.push(o));return n}if(rZ(e))return null;if(Tb(e))return"."+e.styledComponentId;if(ou(e))if(xxe(e)&&t){var s=e(t);return zm(s,t,r)}else return e;return e instanceof tZ?r?(e.inject(r),e.getName()):e:KL(e)?Kxe(e):e.toString()}function WC(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ou(e)||KL(e)?zm(eF(YS,[e].concat(r))):zm(eF(e,r))}function Yk(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b0;if(!$2.isValidElementType(t))throw new lc(1,String(t));var n=function(){return e(t,r,WC.apply(void 0,arguments))};return n.withConfig=function(i){return Yk(e,t,go({},r,i))},n.attrs=function(i){return Yk(e,t,go({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},n}function nj(e){for(var t=e.length|0,r=t|0,n=0,i;t>=4;)i=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>24,i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16)^i,t-=4,++n;switch(t){case 3:r^=(e.charCodeAt(n+2)&255)<<16;case 2:r^=(e.charCodeAt(n+1)&255)<<8;case 1:r^=e.charCodeAt(n)&255,r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16)}return r^=r>>>13,r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16),(r^r>>>15)>>>0}var Mw=52,aF=function(t){return String.fromCharCode(t+(t>25?39:97))};function nZ(e){var t="",r=void 0;for(r=e;r>Mw;r=Math.floor(r/Mw))t=aF(r%Mw)+t;return aF(r%Mw)+t}function qxe(e){for(var t in e)if(ou(e[t]))return!0;return!1}function ij(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(Array.isArray(n)&&!ij(n,t))return!1;if(ou(n)&&!Tb(n))return!1}return!t.some(function(i){return ou(i)||qxe(i)})}var oF=function(t){return nZ(nj(t))},sF=function(){function e(t,r,n){mc(this,e),this.rules=t,this.isStatic=ij(t,r),this.componentId=n,su.master.hasId(n)||su.master.deferredInject(n,[])}return e.prototype.generateAndInjectStyles=function(r,n){var i=this.isStatic,a=this.componentId,o=this.lastClassName;if(of&&i&&typeof o=="string"&&n.hasNameForId(a,o))return o;var s=zm(this.rules,r,n),l=oF(this.componentId+s.join(""));return n.hasNameForId(a,l)||n.inject(this.componentId,YL(s,"."+l,void 0,a),l),this.lastClassName=l,l},e.generateName=function(r){return oF(r)},e}(),aj=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b0,n=r?e.theme===r.theme:!1,i=e.theme&&!n?e.theme:t||r.theme;return i},Yxe=/[[\].#*$><+~=|^:(),"'`-]+/g,Xxe=/(^-|-$)/g;function Xk(e){return e.replace(Yxe,"-").replace(Xxe,"")}function QS(e){return typeof e=="string"&&!0}function Jxe(e){return QS(e)?"styled."+e:"Styled("+qL(e)+")"}var _I,lF={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},Qxe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},cF=(_I={},_I[$2.ForwardRef]={$$typeof:!0,render:!0},_I),Zxe=Object.defineProperty,eRe=Object.getOwnPropertyNames,uF=Object.getOwnPropertySymbols,tRe=uF===void 0?function(){return[]}:uF,rRe=Object.getOwnPropertyDescriptor,nRe=Object.getPrototypeOf,iRe=Object.prototype,aRe=Array.prototype;function oj(e,t,r){if(typeof t!="string"){var n=nRe(t);n&&n!==iRe&&oj(e,n,r);for(var i=aRe.concat(eRe(t),tRe(t)),a=cF[e.$$typeof]||lF,o=cF[t.$$typeof]||lF,s=i.length,l=void 0,c=void 0;s--;)if(c=i[s],!Qxe[c]&&!(r&&r[c])&&!(o&&o[c])&&!(a&&a[c])&&(l=rRe(t,c),l))try{Zxe(e,c,l)}catch{}return e}return e}function oRe(e){return!!(e&&e.prototype&&e.prototype.isReactComponent)}var ZS=T.createContext(),KC=ZS.Consumer,sRe=function(e){Sb(t,e);function t(r){mc(this,t);var n=Hm(this,e.call(this,r));return n.getContext=zQ(n.getContext.bind(n)),n.renderInner=n.renderInner.bind(n),n}return t.prototype.render=function(){return this.props.children?jr.createElement(ZS.Consumer,null,this.renderInner):null},t.prototype.renderInner=function(n){var i=this.getContext(this.props.theme,n);return jr.createElement(ZS.Provider,{value:i},this.props.children)},t.prototype.getTheme=function(n,i){if(ou(n)){var a=n(i);return a}if(n===null||Array.isArray(n)||(typeof n>"u"?"undefined":WQ(n))!=="object")throw new lc(8);return go({},i,n)},t.prototype.getContext=function(n,i){return this.getTheme(n,i)},t}(T.Component),lRe=function(){function e(){mc(this,e),this.masterSheet=su.master,this.instance=this.masterSheet.clone(),this.sealed=!1}return e.prototype.seal=function(){if(!this.sealed){var r=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(r,1),this.sealed=!0}},e.prototype.collectStyles=function(r){if(this.sealed)throw new lc(2);return jr.createElement(iZ,{sheet:this.instance},r)},e.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(r){throw new lc(3)},e}(),sj=T.createContext(),lj=sj.Consumer,iZ=function(e){Sb(t,e);function t(r){mc(this,t);var n=Hm(this,e.call(this,r));return n.getContext=zQ(n.getContext),n}return t.prototype.getContext=function(n,i){if(n)return n;if(i)return new su(i);throw new lc(4)},t.prototype.render=function(){var n=this.props,i=n.children,a=n.sheet,o=n.target;return jr.createElement(sj.Provider,{value:this.getContext(a,o)},i)},t}(T.Component),dF={};function cRe(e,t,r){var n=typeof t!="string"?"sc":Xk(t),i=(dF[n]||0)+1;dF[n]=i;var a=n+"-"+e.generateName(n+i);return r?r+"-"+a:a}var uRe=function(e){Sb(t,e);function t(){mc(this,t);var r=Hm(this,e.call(this));return r.attrs={},r.renderOuter=r.renderOuter.bind(r),r.renderInner=r.renderInner.bind(r),r}return t.prototype.render=function(){return jr.createElement(lj,null,this.renderOuter)},t.prototype.renderOuter=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:su.master;return this.styleSheet=n,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():jr.createElement(KC,null,this.renderInner)},t.prototype.renderInner=function(n){var i=this.props.forwardedComponent,a=i.componentStyle,o=i.defaultProps;i.displayName;var s=i.foldedComponentIds,l=i.styledComponentId,c=i.target,u=void 0;a.isStatic?u=this.generateAndInjectStyles(b0,this.props):u=this.generateAndInjectStyles(aj(this.props,n,o)||b0,this.props);var h=this.props.as||this.attrs.as||c,f=QS(h),p={},m=go({},this.props,this.attrs),g=void 0;for(g in m)g==="forwardedComponent"||g==="as"||(g==="forwardedRef"?p.ref=m[g]:g==="forwardedAs"?p.as=m[g]:(!f||_xe(g))&&(p[g]=m[g]));return this.props.style&&this.attrs.style&&(p.style=go({},this.attrs.style,this.props.style)),p.className=Array.prototype.concat(s,l,u!==l?u:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),T.createElement(h,p)},t.prototype.buildExecutionContext=function(n,i,a){var o=this,s=go({},i,{theme:n});return a.length&&(this.attrs={},a.forEach(function(l){var c=l,u=!1,h=void 0,f=void 0;ou(c)&&(c=c(s),u=!0);for(f in c)h=c[f],u||ou(h)&&!oRe(h)&&!Tb(h)&&(h=h(s)),o.attrs[f]=h,s[f]=h})),s},t.prototype.generateAndInjectStyles=function(n,i){var a=i.forwardedComponent,o=a.attrs,s=a.componentStyle;if(a.warnTooManyClasses,s.isStatic&&!o.length)return s.generateAndInjectStyles(b0,this.styleSheet);var l=s.generateAndInjectStyles(this.buildExecutionContext(n,i,o),this.styleSheet);return l},t}(T.Component);function aZ(e,t,r){var n=Tb(e),i=!QS(e),a=t.displayName,o=a===void 0?Jxe(e):a,s=t.componentId,l=s===void 0?cRe(sF,t.displayName,t.parentComponentId):s,c=t.ParentComponent,u=c===void 0?uRe:c,h=t.attrs,f=h===void 0?YS:h,p=t.displayName&&t.componentId?Xk(t.displayName)+"-"+t.componentId:t.componentId||l,m=n&&e.attrs?Array.prototype.concat(e.attrs,f).filter(Boolean):f,g=new sF(n?e.componentStyle.rules.concat(r):r,m,p),y=void 0,v=function(E,S){return jr.createElement(u,go({},E,{forwardedComponent:y,forwardedRef:S}))};return v.displayName=o,y=jr.forwardRef(v),y.displayName=o,y.attrs=m,y.componentStyle=g,y.foldedComponentIds=n?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):YS,y.styledComponentId=p,y.target=n?e.target:e,y.withComponent=function(E){var S=t.componentId,I=Cxe(t,["componentId"]),N=S&&S+"-"+(QS(E)?E:Xk(qL(E))),L=go({},I,{attrs:m,componentId:N,ParentComponent:u});return aZ(E,L,r)},Object.defineProperty(y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(E){this._foldedDefaultProps=n?Sxe(e.defaultProps,E):E}}),y.toString=function(){return"."+y.styledComponentId},i&&oj(y,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),y}var dRe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Jk=function(t){return Yk(aZ,t)};dRe.forEach(function(e){Jk[e]=Jk(e)});var hRe=function(){function e(t,r){mc(this,e),this.rules=t,this.componentId=r,this.isStatic=ij(t,YS),su.master.hasId(r)||su.master.deferredInject(r,[])}return e.prototype.createStyles=function(r,n){var i=zm(this.rules,r,n),a=YL(i,"");n.inject(this.componentId,a)},e.prototype.removeStyles=function(r){var n=this.componentId;r.hasId(n)&&r.remove(n)},e.prototype.renderStyles=function(r,n){this.removeStyles(n),this.createStyles(r,n)},e}();of&&(window.scCGSHMRCache={});function fRe(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=WC.apply(void 0,[e].concat(r)),a="sc-global-"+nj(JSON.stringify(i)),o=new hRe(i,a),s=function(l){Sb(c,l);function c(u){mc(this,c);var h=Hm(this,l.call(this,u)),f=h.constructor,p=f.globalStyle,m=f.styledComponentId;return of&&(window.scCGSHMRCache[m]=(window.scCGSHMRCache[m]||0)+1),h.state={globalStyle:p,styledComponentId:m},h}return c.prototype.componentWillUnmount=function(){window.scCGSHMRCache[this.state.styledComponentId]&&(window.scCGSHMRCache[this.state.styledComponentId]-=1),window.scCGSHMRCache[this.state.styledComponentId]===0&&this.state.globalStyle.removeStyles(this.styleSheet)},c.prototype.render=function(){var h=this;return jr.createElement(lj,null,function(f){h.styleSheet=f||su.master;var p=h.state.globalStyle;return p.isStatic?(p.renderStyles(Ixe,h.styleSheet),null):jr.createElement(KC,null,function(m){var g=h.constructor.defaultProps,y=go({},h.props);return typeof m<"u"&&(y.theme=aj(h.props,m,g)),p.renderStyles(y,h.styleSheet),null})})},c}(jr.Component);return s.globalStyle=o,s.styledComponentId=a,s}var pRe=function(t){return t.replace(/\s|\\n/g,"")};function mRe(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=WC.apply(void 0,[e].concat(r)),a=nZ(nj(pRe(JSON.stringify(i))));return new tZ(a,YL(i,a,"@keyframes"))}var gRe=function(e){var t=jr.forwardRef(function(r,n){return jr.createElement(KC,null,function(i){var a=e.defaultProps,o=aj(r,i,a);return jr.createElement(e,go({},r,{theme:o,ref:n}))})});return oj(t,e),t.displayName="WithTheme("+qL(e)+")",t},yRe={StyleSheet:su};const vRe=Object.freeze(Object.defineProperty({__proto__:null,ServerStyleSheet:lRe,StyleSheetConsumer:lj,StyleSheetContext:sj,StyleSheetManager:iZ,ThemeConsumer:KC,ThemeContext:ZS,ThemeProvider:sRe,__DO_NOT_USE_OR_YOU_WILL_BE_HAUNTED_BY_SPOOKY_GHOSTS:yRe,createGlobalStyle:fRe,css:WC,default:Jk,isStyledComponent:Tb,keyframes:mRe,withTheme:gRe},Symbol.toStringTag,{value:"Module"})),bRe=A9(vRe);(function(e,t){(function(r,n){e.exports=n(fxe(),bRe)})(typeof self<"u"?self:Ed,function(r,n){return function(i){var a={};function o(s){if(a[s])return a[s].exports;var l=a[s]={i:s,l:!1,exports:{}};return i[s].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=a,o.d=function(s,l,c){o.o(s,l)||Object.defineProperty(s,l,{enumerable:!0,get:c})},o.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.t=function(s,l){if(1&l&&(s=o(s)),8&l||4&l&&typeof s=="object"&&s&&s.__esModule)return s;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:s}),2&l&&typeof s!="string")for(var u in s)o.d(c,u,(function(h){return s[h]}).bind(null,u));return c},o.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(l,"a",l),l},o.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},o.p="dist/",o(o.s=9)}([function(i,a,o){i.exports=o(5)()},function(i,a){i.exports=r},function(i,a){i.exports=n},function(i,a){var o=function(s,l){return{parse:function(p,m){var g=JSON.parse(p,f).map(h),y=g[0],v=m||c,b=typeof y=="object"&&y?function E(S,I,N,L){return Object.keys(N).reduce(function(j,z){var A=j[z];if(A instanceof s){var V=S[A];typeof V!="object"||I.has(V)?j[z]=L.call(j,z,V):(I.add(V),j[z]=L.call(j,z,E(S,I,V,L)))}else j[z]=L.call(j,z,A);return j},N)}(g,new Set,y,v):y;return v.call({"":b},"",b)},stringify:function(p,m,g){for(var y,v=new Map,b=[],E=[],S=m&&typeof m==typeof b?function(L,j){if(L===""||-1<m.indexOf(L))return j}:m||c,I=+u(v,b,S.call({"":p},"",p)),N=function(L,j){if(y)return y=!y,j;var z=S.call(this,L,j);switch(typeof z){case"object":if(z===null)return z;case l:return v.get(z)||u(v,b,z)}return z};I<b.length;I++)y=!0,E[I]=JSON.stringify(b[I],N,g);return"["+E.join(",")+"]"}};function c(p,m){return m}function u(p,m,g){var y=s(m.push(g)-1);return p.set(g,y),y}function h(p){return p instanceof s?s(p):p}function f(p,m){return typeof m===l?new s(m):m}}(String,"string");i.exports=o},function(i,a,o){i.exports=function(s,l){var c=["abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ","0123456789","~!@#$%^&()_+-={}[];',"],u="";(l=l||"aA0").split("").forEach(function(f){isNaN(parseInt(f))?/[a-z]/.test(f)?u+=c[0]:/[A-Z]/.test(f)?u+=c[1]:u+=c[3]:u+=c[2]}),s=s||30;for(var h="";s--;)h+=u.charAt(Math.floor(Math.random()*u.length));return h}},function(i,a,o){var s=o(6),l=o(7),c=o(8);i.exports=function(){function u(p,m,g,y,v,b){b!==c&&l(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function h(){return u}u.isRequired=u;var f={array:u,bool:u,func:u,number:u,object:u,string:u,symbol:u,any:u,arrayOf:h,element:u,instanceOf:h,node:u,objectOf:h,oneOf:h,oneOfType:h,shape:h,exact:h};return f.checkPropTypes=s,f.PropTypes=f,f}},function(i,a,o){function s(c){return function(){return c}}var l=function(){};l.thatReturns=s,l.thatReturnsFalse=s(!1),l.thatReturnsTrue=s(!0),l.thatReturnsNull=s(null),l.thatReturnsThis=function(){return this},l.thatReturnsArgument=function(c){return c},i.exports=l},function(i,a,o){i.exports=function(s,l,c,u,h,f,p,m){if(!s){var g;if(l===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var y=[c,u,h,f,p,m],v=0;(g=new Error(l.replace(/%s/g,function(){return y[v++]}))).name="Invariant Violation"}throw g.framesToPop=1,g}}},function(i,a,o){i.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(i,a,o){o.r(a);var s=o(1),l=o.n(s),c=o(0),u=o.n(c),h=o(4),f=o.n(h),p=o(2),m=o.n(p),g=function(U){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,re=function(Ae){Ae=Ae.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(_e,ae,ot,Dt){return ae+ae+ot+ot+Dt+Dt});var Qe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Ae);return Qe?{r:parseInt(Qe[1],16),g:parseInt(Qe[2],16),b:parseInt(Qe[3],16)}:null}(U);return"rgba(".concat(re.r,", ").concat(re.g,", ").concat(re.b,", ").concat(W,")")};function y(){var U=S([`
  0% { box-shadow: 0 0 0 0 `,`; }
  70% { box-shadow: 0 0 0 10px `,`; }
  100% { box-shadow: 0 0 0 0 `,`; }
`]);return y=function(){return U},U}function v(){var U=S([`
  25% { transform: rotate(-1deg); }
  100% { transform: rotate(1deg); }
`]);return v=function(){return U},U}function b(){var U=S([`
  100% { transform: scale(1); }
`]);return b=function(){return U},U}function E(){var U=S([`
  0% { opacity: .2; }
  20% { opacity: 1; }
  100% { opacity: .2; }
`]);return E=function(){return U},U}function S(U,W){return W||(W=U.slice(0)),Object.freeze(Object.defineProperties(U,{raw:{value:Object.freeze(W)}}))}var I=Object(p.keyframes)(E()),N=Object(p.keyframes)(b()),L=Object(p.keyframes)(v());function j(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  animation: `,` 1.4s infinite both;
  animation-delay: `,`;
`]);return j=function(){return U},U}var z=m.a.span(j(),I,function(U){return U.delay}),A=function(){return l.a.createElement("span",{className:"rsc-loading"},l.a.createElement(z,{delay:"0s"},"."),l.a.createElement(z,{delay:".2s"},"."),l.a.createElement(z,{delay:".4s"},"."))};function V(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  background: #fff;
  border-radius: 5px;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
  display: flex;
  justify-content: center;
  margin: 0 6px 10px 6px;
  padding: 16px;
`]);return V=function(){return U},U}var G=m.a.div(V());function X(U){return(X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(U)}function $(U,W){for(var re=0;re<W.length;re++){var Ae=W[re];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(U,Ae.key,Ae)}}function B(U){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||Object.getPrototypeOf(W)})(U)}function K(U,W){return(K=Object.setPrototypeOf||function(re,Ae){return re.__proto__=Ae,re})(U,W)}function P(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function D(U,W,re){return W in U?Object.defineProperty(U,W,{value:re,enumerable:!0,configurable:!0,writable:!0}):U[W]=re,U}var H=function(U){function W(){var Qe,_e,ae,ot;(function(Ye,et){if(!(Ye instanceof et))throw new TypeError("Cannot call a class as a function")})(this,W);for(var Dt=arguments.length,Ie=new Array(Dt),$e=0;$e<Dt;$e++)Ie[$e]=arguments[$e];return ae=this,ot=(Qe=B(W)).call.apply(Qe,[this].concat(Ie)),_e=!ot||X(ot)!=="object"&&typeof ot!="function"?P(ae):ot,D(P(P(_e)),"state",{loading:!0}),D(P(P(_e)),"renderComponent",function(){var Ye=_e.props,et=Ye.step,gt=Ye.steps,kt=Ye.previousStep,xt=Ye.triggerNextStep,Ln=et.component;return l.a.cloneElement(Ln,{step:et,steps:gt,previousStep:kt,triggerNextStep:xt})}),_e}var re,Ae;return function(Qe,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");Qe.prototype=Object.create(_e&&_e.prototype,{constructor:{value:Qe,writable:!0,configurable:!0}}),_e&&K(Qe,_e)}(W,s.Component),re=W,(Ae=[{key:"componentDidMount",value:function(){var Qe=this,_e=this.props,ae=_e.speak,ot=_e.step,Dt=_e.previousValue,Ie=_e.triggerNextStep,$e=ot.delay,Ye=ot.waitAction;setTimeout(function(){Qe.setState({loading:!1},function(){Ye||ot.rendered||Ie(),ae(ot,Dt)})},$e)}},{key:"render",value:function(){var Qe=this.state.loading,_e=this.props.style;return l.a.createElement(G,{className:"rsc-cs",style:_e},Qe?l.a.createElement(A,null):this.renderComponent())}}])&&$(re.prototype,Ae),W}();H.propTypes={previousStep:u.a.objectOf(u.a.any).isRequired,previousValue:u.a.oneOfType([u.a.string,u.a.bool,u.a.number,u.a.object,u.a.array]),speak:u.a.func,step:u.a.objectOf(u.a.any).isRequired,steps:u.a.objectOf(u.a.any).isRequired,style:u.a.objectOf(u.a.any).isRequired,triggerNextStep:u.a.func.isRequired},H.defaultProps={previousValue:"",speak:function(){}};var x=H;function w(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  animation: `,` 0.3s ease forwards;
  cursor: pointer;
  display: inline-block;
  margin: 2px;
  transform: scale(0);
`]);return w=function(){return U},U}var O=m.a.li(w(),N),C={background:"#f5f8fb",fontFamily:"monospace",headerBgColor:"#6e48aa",headerFontColor:"#fff",headerFontSize:"16px",botBubbleColor:"#6E48AA",botFontColor:"#fff",userBubbleColor:"#fff",userFontColor:"#4a4a4a"};function q(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  background: `,`;
  border: 0;
  border-radius: 22px;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
  color: `,`;
  display: inline-block;
  font-size: 14px;
  padding: 12px;

  &:hover {
    opacity: 0.7;
  }
  &:active,
  &:hover:focus {
    outline:none;
  }
`]);return q=function(){return U},U}var F=m.a.button(q(),function(U){return U.theme.botBubbleColor},function(U){return U.theme.botFontColor});F.defaultProps={theme:C};var J=F;function se(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  margin: 2px 0 12px 0;
  padding: 0 6px;
`]);return se=function(){return U},U}var he=m.a.ul(se());function ge(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([""]);return ge=function(){return U},U}var je=m.a.div(ge());function ze(U){return(ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(U)}function Me(U,W){for(var re=0;re<W.length;re++){var Ae=W[re];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(U,Ae.key,Ae)}}function tt(U){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||Object.getPrototypeOf(W)})(U)}function Tt(U,W){return(Tt=Object.setPrototypeOf||function(re,Ae){return re.__proto__=Ae,re})(U,W)}function rt(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function yt(U,W,re){return W in U?Object.defineProperty(U,W,{value:re,enumerable:!0,configurable:!0,writable:!0}):U[W]=re,U}var Oe=function(U){function W(){var Qe,_e,ae,ot;(function(Ye,et){if(!(Ye instanceof et))throw new TypeError("Cannot call a class as a function")})(this,W);for(var Dt=arguments.length,Ie=new Array(Dt),$e=0;$e<Dt;$e++)Ie[$e]=arguments[$e];return ae=this,ot=(Qe=tt(W)).call.apply(Qe,[this].concat(Ie)),_e=!ot||ze(ot)!=="object"&&typeof ot!="function"?rt(ae):ot,yt(rt(rt(_e)),"onOptionClick",function(Ye){var et=Ye.value;(0,_e.props.triggerNextStep)({value:et})}),yt(rt(rt(_e)),"renderOption",function(Ye){var et=_e.props,gt=et.bubbleOptionStyle,kt=et.step.user,xt=Ye.value,Ln=Ye.label;return l.a.createElement(O,{key:xt,className:"rsc-os-option"},l.a.createElement(J,{className:"rsc-os-option-element",style:gt,user:kt,onClick:function(){return _e.onOptionClick({value:xt})}},Ln))}),_e}var re,Ae;return function(Qe,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");Qe.prototype=Object.create(_e&&_e.prototype,{constructor:{value:Qe,writable:!0,configurable:!0}}),_e&&Tt(Qe,_e)}(W,s.Component),re=W,(Ae=[{key:"render",value:function(){var Qe=this.props.step.options;return l.a.createElement(je,{className:"rsc-os"},l.a.createElement(he,{className:"rsc-os-options"},Object.keys(Qe).map(function(_e){return Qe[_e]}).map(this.renderOption)))}}])&&Me(re.prototype,Ae),W}();Oe.propTypes={bubbleOptionStyle:u.a.objectOf(u.a.any).isRequired,step:u.a.objectOf(u.a.any).isRequired,triggerNextStep:u.a.func.isRequired};var it=Oe;function Ge(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  animation: `,` 0.3s ease forwards;
  background: `,`;
  border-radius: `,`;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
  color: `,`;
  display: inline-block;
  font-size: 14px;
  max-width: 50%;
  margin: `,`;
  overflow: hidden;
  position: relative;
  padding: 12px;
  transform: scale(0);
  transform-origin: `,`;
`]);return Ge=function(){return U},U}var Ze=m.a.div(Ge(),N,function(U){return U.user?U.theme.userBubbleColor:U.theme.botBubbleColor},function(U){var W=U.isFirst,re=U.isLast,Ae=U.user;return W||re?!W&&re?Ae?"18px 0 18px 18px":"0 18px 18px 18px":U.user?"18px 18px 0 18px":"18px 18px 18px 0":Ae?"18px 0 0 18px":"0 18px 18px 0px"},function(U){return U.user?U.theme.userFontColor:U.theme.botFontColor},function(U){var W=U.isFirst,re=U.showAvatar,Ae=U.user;return!W&&re?Ae?"-8px 46px 10px 0":"-8px 0 10px 46px":W||re?"0 0 10px 0":Ae?"-8px 0px 10px 0":"-8px 0 10px 0px"},function(U){var W=U.isFirst,re=U.user;return W?re?"bottom right":"bottom left":re?"top right":"top left"});Ze.defaultProps={theme:C};var Re=Ze;function Z(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  animation: `,` 0.3s ease forwards;
  border-radius: `,`;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
  height: 40px;
  min-width: 40px;
  padding: 3px;
  transform: scale(0);
  transform-origin: `,`;
  width: 40;
`]);return Z=function(){return U},U}var Te=m.a.img(Z(),N,function(U){return U.user?"50% 50% 50% 0":"50% 50% 0 50%"},function(U){return U.user?"bottom left":"bottom right"});function Fe(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  display: inline-block;
  order: `,`;
  padding: 6px;
`]);return Fe=function(){return U},U}var He=m.a.div(Fe(),function(U){return U.user?"1":"0"});function ne(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  align-items: flex-end;
  display: flex;
  justify-content: `,`;
`]);return ne=function(){return U},U}var pe=m.a.div(ne(),function(U){return U.user?"flex-end":"flex-start"});function We(U){return(We=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(U)}function st(U,W){for(var re=0;re<W.length;re++){var Ae=W[re];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(U,Ae.key,Ae)}}function Yt(U){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||Object.getPrototypeOf(W)})(U)}function Kn(U,W){return(Kn=Object.setPrototypeOf||function(re,Ae){return re.__proto__=Ae,re})(U,W)}function kn(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function Ii(U,W,re){return W in U?Object.defineProperty(U,W,{value:re,enumerable:!0,configurable:!0,writable:!0}):U[W]=re,U}var Pn=function(U){function W(){var Qe,_e,ae,ot;(function(Ye,et){if(!(Ye instanceof et))throw new TypeError("Cannot call a class as a function")})(this,W);for(var Dt=arguments.length,Ie=new Array(Dt),$e=0;$e<Dt;$e++)Ie[$e]=arguments[$e];return ae=this,ot=(Qe=Yt(W)).call.apply(Qe,[this].concat(Ie)),_e=!ot||We(ot)!=="object"&&typeof ot!="function"?kn(ae):ot,Ii(kn(kn(_e)),"state",{loading:!0}),Ii(kn(kn(_e)),"getMessage",function(){var Ye=_e.props,et=Ye.previousValue,gt=Ye.step.message;return gt?gt.replace(/{previousValue}/g,et):""}),Ii(kn(kn(_e)),"renderMessage",function(){var Ye=_e.props,et=Ye.step,gt=Ye.steps,kt=Ye.previousStep,xt=Ye.triggerNextStep,Ln=et.component;return Ln?l.a.cloneElement(Ln,{step:et,steps:gt,previousStep:kt,triggerNextStep:xt}):_e.getMessage()}),_e}var re,Ae;return function(Qe,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");Qe.prototype=Object.create(_e&&_e.prototype,{constructor:{value:Qe,writable:!0,configurable:!0}}),_e&&Kn(Qe,_e)}(W,s.Component),re=W,(Ae=[{key:"componentDidMount",value:function(){var Qe=this,_e=this.props,ae=_e.step,ot=_e.speak,Dt=_e.previousValue,Ie=_e.triggerNextStep,$e=ae.component,Ye=ae.delay,et=ae.waitAction,gt=$e&&et;setTimeout(function(){Qe.setState({loading:!1},function(){gt||ae.rendered||Ie(),ot(ae,Dt)})},Ye)}},{key:"render",value:function(){var Qe=this.props,_e=Qe.step,ae=Qe.isFirst,ot=Qe.isLast,Dt=Qe.avatarStyle,Ie=Qe.bubbleStyle,$e=Qe.hideBotAvatar,Ye=Qe.hideUserAvatar,et=this.state.loading,gt=_e.avatar,kt=_e.user,xt=kt?!Ye:!$e;return l.a.createElement(pe,{className:"rsc-ts ".concat(kt?"rsc-ts-user":"rsc-ts-bot"),user:kt},l.a.createElement(He,{className:"rsc-ts-image-container",user:kt},ae&&xt&&l.a.createElement(Te,{className:"rsc-ts-image",style:Dt,showAvatar:xt,user:kt,src:gt,alt:"avatar"})),l.a.createElement(Re,{className:"rsc-ts-bubble",style:Ie,user:kt,showAvatar:xt,isFirst:ae,isLast:ot},et?l.a.createElement(A,null):this.renderMessage()))}}])&&st(re.prototype,Ae),W}();Pn.propTypes={avatarStyle:u.a.objectOf(u.a.any).isRequired,isFirst:u.a.bool.isRequired,isLast:u.a.bool.isRequired,bubbleStyle:u.a.objectOf(u.a.any).isRequired,hideBotAvatar:u.a.bool.isRequired,hideUserAvatar:u.a.bool.isRequired,previousStep:u.a.objectOf(u.a.any),previousValue:u.a.oneOfType([u.a.string,u.a.bool,u.a.number,u.a.object,u.a.array]),speak:u.a.func,step:u.a.objectOf(u.a.any).isRequired,steps:u.a.objectOf(u.a.any),triggerNextStep:u.a.func.isRequired},Pn.defaultProps={previousStep:{},previousValue:"",speak:function(){},steps:{}};var Hi=Pn,Cn=[{key:"id",types:["string","number"],required:!0},{key:"user",types:["boolean"],required:!0},{key:"trigger",types:["string","number","function"],required:!1},{key:"validator",types:["function"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Ni=[{key:"id",types:["string","number"],required:!0},{key:"message",types:["string","function"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Dn=[{key:"id",types:["string","number"],required:!0},{key:"options",types:["object"],required:!0},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Kg=[{key:"id",types:["string","number"],required:!0},{key:"component",types:["any"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"replace",types:["boolean"],required:!1},{key:"waitAction",types:["boolean"],required:!1},{key:"asMessage",types:["boolean"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Qb=[{key:"id",types:["string","number"],required:!0},{key:"update",types:["string","number"],required:!0},{key:"trigger",types:["string","number","function"],required:!0},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Ec=o(3);function Wd(U){return(Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(U)}var Lf={parse:function(U){var W=[];if(U.user)W=Cn;else if(U.message)W=Ni;else if(U.options)W=Dn;else if(U.component)W=Kg;else{if(!U.update)throw new Error("The step ".concat(Object(Ec.stringify)(U)," is invalid"));W=Qb}for(var re=0,Ae=W.length;re<Ae;re+=1){var Qe=W[re],_e=Qe.key,ae=Qe.types,ot=Qe.required;if(!U[_e]&&ot)throw new Error("Key '".concat(_e,"' is required in step ").concat(Object(Ec.stringify)(U)));if(U[_e]&&ae[0]!=="any"&&ae.indexOf(Wd(U[_e]))<0)throw new Error("The type of '".concat(_e,"' value must be ").concat(ae.join(" or ")," instead of ").concat(Wd(U[_e])))}var Dt=W.map(function(Ie){return Ie.key});for(var _e in U)Dt.indexOf(_e)<0&&(console.error("Invalid key '".concat(_e,"' in step '").concat(U.id,"'")),delete U[_e]);return U},checkInvalidIds:function(U){for(var W in U){var re=U[W],Ae=U[W].trigger;if(typeof Ae!="function"){if(re.options)for(var Qe=re.options.filter(function(Dt){return typeof Dt.trigger!="function"}).map(function(Dt){return Dt.trigger}),_e=0,ae=Qe.length;_e<ae;_e+=1){var ot=Qe[_e];if(ot&&!U[ot])throw new Error("The id '".concat(ot,"' triggered by option ").concat(_e+1," in step '").concat(U[W].id,"' does not exist"))}else if(Ae&&!U[Ae])throw new Error("The id '".concat(Ae,"' triggered by step '").concat(U[W].id,"' does not exist"))}}}},qg=function(U,W){var re=Object(Ec.parse)(Object(Ec.stringify)(W));for(var Ae in re)for(var Qe=0,_e=re[Ae].length;Qe<_e;Qe+=1)re[Ae][Qe].component&&(re[Ae][Qe].component=re[Ae][Qe].id);localStorage.setItem(U,Object(Ec.stringify)(re))};function cs(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  background: `,`;
  border-radius: 10px;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);
  font-family: `,`;
  overflow: hidden;
  position: `,`;
  bottom: `,`;
  top: `,`;
  right: `,`;
  left: `,`;
  width: `,`;
  height: `,`;
  z-index: 999;
  transform: `,`;
  transform-origin: `,`;
  transition: transform 0.3s ease;

  @media screen and (max-width: 568px) {
    border-radius: `,`;
    bottom: 0 !important;
    left: initial !important;
    height: 100%;
    right: 0 !important;
    top: initial !important;
    width: 100%;
  }
`]);return cs=function(){return U},U}var jf=m.a.div(cs(),function(U){return U.theme.background},function(U){return U.theme.fontFamily},function(U){return U.floating?"fixed":"relative"},function(U){var W=U.floating,re=U.floatingStyle;return W?re.bottom||"32px":"initial"},function(U){var W=U.floating,re=U.floatingStyle;return W&&re.top||"initial"},function(U){var W=U.floating,re=U.floatingStyle;return W?re.right||"32px":"initial"},function(U){var W=U.floating,re=U.floatingStyle;return W&&re.left||"initial"},function(U){return U.width},function(U){return U.height},function(U){return U.opened?"scale(1)":"scale(0)"},function(U){return U.floatingStyle.transformOrigin||"bottom right"},function(U){return U.floating?"0":""});jf.defaultProps={theme:C};var oR=jf;function Zb(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  height: calc(`," - ",`);
  overflow-y: scroll;
  margin-top: 2px;
  padding-top: 6px;

  @media screen and (max-width: 568px) {
    height: `,`;
  }
`]);return Zb=function(){return U},U}var sR=m.a.div(Zb(),function(U){return U.height},function(U){return U.hideInput?"56px":"112px"},function(U){return U.floating?"calc(100% - 112px)":""});function ew(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  align-items: center;
  background: `,`;
  color: `,`;
  display: flex;
  fill: `,`;
  height: 56px;
  justify-content: space-between;
  padding: 0 10px;
`]);return ew=function(){return U},U}var tw=m.a.div(ew(),function(U){return U.theme.headerBgColor},function(U){return U.theme.headerFontColor},function(U){return U.theme.headerFontColor});tw.defaultProps={theme:C};var lR=tw;function Yg(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  margin: 0;
  font-size: `,`;
`]);return Yg=function(){return U},U}var mu=m.a.h2(Yg(),function(U){return U.theme.headerFontSize});mu.defaultProps={theme:C};var Mf=mu;function Xs(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  cursor: pointer;
`]);return Xs=function(){return U},U}var Kd=m.a.a(Xs());function Uf(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  align-items: center;
  cursor: pointer;
  background: `,`;
  bottom: 32px;
  border-radius: 100%;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);
  display: flex;
  fill: `,`;
  height: 56px;
  justify-content: center;
  position: fixed;
  right: 32px;
  transform: `,`;
  transition: transform 0.3s ease;
  width: 56px;
  z-index: 999;
`]);return Uf=function(){return U},U}var Xg=m.a.a(Uf(),function(U){return U.theme.headerBgColor},function(U){return U.theme.headerFontColor},function(U){return U.opened?"scale(0)":"scale(1)"});Xg.defaultProps={theme:{headerBgColor:"#6e48aa",headerFontColor:"#fff"}};var rw=Xg;function Ff(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  height: 24px;
  width: 24px;
`]);return Ff=function(){return U},U}var Vf=m.a.img(Ff());function nw(){var U=function(W,re){return re||(re=W.slice(0)),Object.freeze(Object.defineProperties(W,{raw:{value:Object.freeze(re)}}))}([`
  position: relative;
`]);return nw=function(){return U},U}var gu=m.a.div(nw());function iw(){var U=yu([`
          `,` .2s ease
        `]);return iw=function(){return U},U}function Bf(){var U=yu([`
  animation: `,`;
  border: 0;
  border-radius: 0;
  border-bottom-left-radius: 10px;
  border-bottom-right-radius: 10px;
  border-top: `,`;
  box-shadow: `,`;
  box-sizing: border-box;
  color: `,`;
  font-size: 16px;
  opacity: `,`;
  outline: none;
  padding: `,`;
  width: 100%;
  -webkit-appearance: none;

  &:disabled {
    background: #fff;
  }

  @media screen and (max-width: 568px) {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
`]);return Bf=function(){return U},U}function yu(U,W){return W||(W=U.slice(0)),Object.freeze(Object.defineProperties(U,{raw:{value:Object.freeze(W)}}))}var Pt=m.a.input(Bf(),function(U){return U.invalid?Object(p.css)(iw(),L):""},function(U){return U.invalid?"0":"1px solid #eee"},function(U){return U.invalid?"inset 0 0 2px #E53935":"none"},function(U){return U.invalid?"#E53935":""},function(U){return U.disabled&&!U.invalid?".5":"1"},function(U){return U.hasButton?"16px 52px 16px 10px":"16px 10px"},function(U){return U.floating?"0":"10px"},function(U){return U.floating?"0":"10px"});function ft(){var U=Ht([`
            `,` 2s ease infinite
          `]);return ft=function(){return U},U}function dt(){var U=Ht([`
  background-color: transparent;
  border: 0;
  border-bottom-right-radius: 10px;
  box-shadow: none;
  cursor: `,`;
  fill: `,`;
  opacity: `,`;
  outline: none;
  padding: 14px 16px 12px 16px;
  position: absolute;
  right: 0;
  top: 0;
  &:before {
    content: '';
    position: absolute;
    width: 23px;
    height: 23px;
    border-radius: 50%;
    animation: `,`;
  }
  &:not(:disabled):hover {
    opacity: 0.7;
  }
`]);return dt=function(){return U},U}function Ht(U,W){return W||(W=U.slice(0)),Object.freeze(Object.defineProperties(U,{raw:{value:Object.freeze(W)}}))}var Je=m.a.button(dt(),function(U){return U.disabled?"default":"pointer"},function(U){var W=U.speaking,re=U.invalid,Ae=U.theme;return W?Ae.headerBgColor:re?"#E53935":"#4a4a4a"},function(U){return U.disabled&&!U.invalid?".5":"1"},function(U){var W,re=U.theme;return U.speaking?Object(p.css)(ft(),(W=re.headerBgColor,Object(p.keyframes)(y(),g(W,.4),g(W,0),g(W,0)))):""});Je.defaultProps={theme:C};var Cr=Je;function de(){return(de=Object.assign||function(U){for(var W=1;W<arguments.length;W++){var re=arguments[W];for(var Ae in re)Object.prototype.hasOwnProperty.call(re,Ae)&&(U[Ae]=re[Ae])}return U}).apply(this,arguments)}function cr(U,W){for(var re=0;re<W.length;re++){var Ae=W[re];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(U,Ae.key,Ae)}}function ar(U,W,re){return W&&cr(U.prototype,W),re&&cr(U,re),U}var xn=null,er=function(){},qn=function(){function U(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:er,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:er,Ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:er,Qe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"en";return function(_e,ae){if(!(_e instanceof ae))throw new TypeError("Cannot call a class as a function")}(this,U),xn||(xn=this),this.state={inputValue:"",lang:Qe,onChange:W,onEnd:re,onStop:Ae},this.onResult=this.onResult.bind(this),this.onEnd=this.onEnd.bind(this),this.setup(),xn}return ar(U,null,[{key:"isSupported",value:function(){return"webkitSpeechRecognition"in window}}]),ar(U,[{key:"onChange",value:function(W){var re=this.state.onChange;this.setState({inputValue:W}),re(W)}},{key:"onFinal",value:function(W){this.setState({inputValue:W}),this.recognition.stop()}},{key:"onEnd",value:function(){var W=this.state,re=W.onStop,Ae=W.onEnd,Qe=W.force;this.setState({speaking:!1}),Qe?re():Ae()}},{key:"onResult",value:function(W){for(var re="",Ae="",Qe=W.resultIndex;Qe<W.results.length;Qe+=1)W.results[Qe].isFinal?(Ae+=W.results[Qe][0].transcript,this.onFinal(Ae)):(re+=W.results[Qe][0].transcript,this.onChange(re))}},{key:"setState",value:function(W){this.state=de({},this.state,W)}},{key:"setup",value:function(){if(!U.isSupported())return this;var W=window.webkitSpeechRecognition;return this.recognition=new W,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang=this.state.lang,this.recognition.onresult=this.onResult,this.recognition.onend=this.onEnd,this}},{key:"setLang",value:function(W){return this.setState({lang:W}),this.setup(),this}},{key:"speak",value:function(){return U.isSupported()?(this.state.speaking?(this.setState({force:!0}),this.recognition.stop()):(this.recognition.start(),this.setState({speaking:!0,inputValue:""})),this):this}}]),U}(),Qr=function(){return l.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),l.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},ur=function(){return l.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),l.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},Ai=function(U){var W=U.size;return l.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:W,height:W,viewBox:"0 0 500 500"},l.a.createElement("g",null,l.a.createElement("g",null,l.a.createElement("polygon",{points:"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75"}))))};Ai.propTypes={size:u.a.number},Ai.defaultProps={size:20};var ma=Ai,Rl=function(U){var W=U.size;return l.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:W,height:W,viewBox:"0 0 400 400"},l.a.createElement("g",null,l.a.createElement("path",{d:"M290.991,240.991c0,26.392-21.602,47.999-48.002,47.999h-11.529c-26.4,0-48.002-21.607-48.002-47.999V104.002   c0-26.4,21.602-48.004,48.002-48.004h11.529c26.4,0,48.002,21.604,48.002,48.004V240.991z"}),l.a.createElement("path",{d:"M342.381,209.85h-8.961c-4.932,0-8.961,4.034-8.961,8.961v8.008c0,50.26-37.109,91.001-87.361,91.001   c-50.26,0-87.109-40.741-87.109-91.001v-8.008c0-4.927-4.029-8.961-8.961-8.961h-8.961c-4.924,0-8.961,4.034-8.961,8.961v8.008   c0,58.862,40.229,107.625,96.07,116.362v36.966h-34.412c-4.932,0-8.961,4.039-8.961,8.971v17.922c0,4.923,4.029,8.961,8.961,8.961   h104.688c4.926,0,8.961-4.038,8.961-8.961v-17.922c0-4.932-4.035-8.971-8.961-8.971h-34.43v-36.966   c55.889-8.729,96.32-57.5,96.32-116.362v-8.008C351.342,213.884,347.303,209.85,342.381,209.85z"})))};Rl.propTypes={size:u.a.number},Rl.defaultProps={size:20};var ga=Rl,To=function(){return/iphone|ipod|android|ie|blackberry|fennec/i.test(navigator.userAgent)},qd=function(U){return typeof U=="string"},us=function(U){return function(W,re){var Ae=U.lang,Qe=U.voice,_e=U.enable,ae=W.user;if(window.SpeechSynthesisUtterance&&window.speechSynthesis&&!ae&&_e){var ot=function(Ie){var $e=Ie.message,Ye=Ie.metadata,et=Ye===void 0?{}:Ye;return qd(et.speak)?et.speak:qd($e)?$e:""}(W),Dt=new window.SpeechSynthesisUtterance;Dt.text=ot.replace(/{previousValue}/g,re),Dt.lang=Ae,Dt.voice=Qe,window.speechSynthesis.speak(Dt)}}};function fr(U){return(fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(U)}function wi(){return(wi=Object.assign||function(U){for(var W=1;W<arguments.length;W++){var re=arguments[W];for(var Ae in re)Object.prototype.hasOwnProperty.call(re,Ae)&&(U[Ae]=re[Ae])}return U}).apply(this,arguments)}function _c(U,W){for(var re=0;re<W.length;re++){var Ae=W[re];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(U,Ae.key,Ae)}}function vu(U){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||Object.getPrototypeOf(W)})(U)}function Hr(U,W){return(Hr=Object.setPrototypeOf||function(re,Ae){return re.__proto__=Ae,re})(U,W)}function It(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function rn(U,W,re){return W in U?Object.defineProperty(U,W,{value:re,enumerable:!0,configurable:!0,writable:!0}):U[W]=re,U}var Ei=function(U){function W(_e){var ae,ot,Dt;return function(Ie,$e){if(!(Ie instanceof $e))throw new TypeError("Cannot call a class as a function")}(this,W),ot=this,Dt=vu(W).call(this,_e),ae=!Dt||fr(Dt)!=="object"&&typeof Dt!="function"?It(ot):Dt,rn(It(It(ae)),"onNodeInserted",function(Ie){var $e=Ie.currentTarget;ae.props.enableSmoothScroll&&ae.supportsScrollBehavior?$e.scroll({top:$e.scrollHeight,left:0,behavior:"smooth"}):$e.scrollTop=$e.scrollHeight}),rn(It(It(ae)),"onResize",function(){ae.content.scrollTop=ae.content.scrollHeight}),rn(It(It(ae)),"onRecognitionChange",function(Ie){ae.setState({inputValue:Ie})}),rn(It(It(ae)),"onRecognitionEnd",function(){ae.setState({speaking:!1}),ae.handleSubmitButton()}),rn(It(It(ae)),"onRecognitionStop",function(){ae.setState({speaking:!1})}),rn(It(It(ae)),"onValueChange",function(Ie){ae.setState({inputValue:Ie.target.value})}),rn(It(It(ae)),"getTriggeredStep",function(Ie,$e){var Ye=ae.generateRenderedStepsById();return typeof Ie=="function"?Ie({value:$e,steps:Ye}):Ie}),rn(It(It(ae)),"getStepMessage",function(Ie){var $e=ae.state.previousSteps,Ye=$e.length>0?$e.length-1:0,et=ae.generateRenderedStepsById(),gt=$e[Ye].value;return typeof Ie=="function"?Ie({previousValue:gt,steps:et}):Ie}),rn(It(It(ae)),"generateRenderedStepsById",function(){for(var Ie=ae.state.previousSteps,$e={},Ye=0,et=Ie.length;Ye<et;Ye+=1){var gt=Ie[Ye],kt=gt.id,xt=gt.message,Ln=gt.value,xr=gt.metadata;$e[kt]={id:kt,message:xt,value:Ln,metadata:xr}}return $e}),rn(It(It(ae)),"triggerNextStep",function(Ie){var $e=ae.props.enableMobileAutoFocus,Ye=ae.state,et=Ye.defaultUserSettings,gt=Ye.previousSteps,kt=Ye.renderedSteps,xt=Ye.steps,Ln=ae.state,xr=Ln.currentStep,Pa=Ln.previousStep,Co=xr.end;if(Ie&&Ie.value&&(xr.value=Ie.value),Ie&&Ie.hideInput&&(xr.hideInput=Ie.hideInput),Ie&&Ie.trigger&&(xr.trigger=ae.getTriggeredStep(Ie.trigger,Ie.value)),Co)ae.handleEnd();else if(xr.options&&Ie){var Oi=xr.options.filter(function(Qg){return Qg.value===Ie.value})[0],ds=ae.getTriggeredStep(Oi.trigger,xr.value);delete xr.options,xr=wi({},xr,Oi,et,{user:!0,message:Oi.label,trigger:ds}),kt.pop(),gt.pop(),kt.push(xr),gt.push(xr),ae.setState({currentStep:xr,renderedSteps:kt,previousSteps:gt})}else if(xr.trigger){xr.replace&&kt.pop();var jn=wi({},xt[ae.getTriggeredStep(xr.trigger,xr.value)]);if(jn.message)jn.message=ae.getStepMessage(jn.message);else if(jn.update){var Da=jn;if((jn=wi({},xt[Da.update])).options)for(var La=0,$f=jn.options.length;La<$f;La+=1)jn.options[La].trigger=Da.trigger;else jn.trigger=Da.trigger}jn.key=f()(24),Pa=xr,xr=jn,ae.setState({renderedSteps:kt,currentStep:xr,previousStep:Pa},function(){jn.user?ae.setState({disabled:!1},function(){!$e&&To()||ae.input&&ae.input.focus()}):(kt.push(jn),gt.push(jn),ae.setState({renderedSteps:kt,previousSteps:gt}))})}var Hf=ae.props,bu=Hf.cache,Jg=Hf.cacheName;bu&&setTimeout(function(){qg(Jg,{currentStep:xr,previousStep:Pa,previousSteps:gt,renderedSteps:kt})},300)}),rn(It(It(ae)),"handleEnd",function(){var Ie=ae.props.handleEnd;if(Ie){for(var $e=ae.state.previousSteps,Ye=$e.map(function(Oi){return{id:Oi.id,message:Oi.message,value:Oi.value,metadata:Oi.metadata}}),et=[],gt=0,kt=$e.length;gt<kt;gt+=1){var xt=$e[gt],Ln=xt.id,xr=xt.message,Pa=xt.value,Co=xt.metadata;et[Ln]={id:Ln,message:xr,value:Pa,metadata:Co}}Ie({renderedSteps:Ye,steps:et,values:$e.filter(function(Oi){return Oi.value}).map(function(Oi){return Oi.value})})}}),rn(It(It(ae)),"isInputValueEmpty",function(){var Ie=ae.state.inputValue;return!Ie||Ie.length===0}),rn(It(It(ae)),"isLastPosition",function(Ie){var $e=ae.state.renderedSteps,Ye=$e.length,et=$e.map(function(kt){return kt.key}).indexOf(Ie.key);if(Ye<=1||et+1===Ye)return!0;var gt=$e[et+1];return!gt.message&&!gt.asMessage||Ie.user!==gt.user}),rn(It(It(ae)),"isFirstPosition",function(Ie){var $e=ae.state.renderedSteps,Ye=$e.map(function(gt){return gt.key}).indexOf(Ie.key);if(Ye===0)return!0;var et=$e[Ye-1];return!et.message&&!et.asMessage||Ie.user!==et.user}),rn(It(It(ae)),"handleKeyPress",function(Ie){Ie.key==="Enter"&&ae.submitUserMessage()}),rn(It(It(ae)),"handleSubmitButton",function(){var Ie=ae.state,$e=Ie.speaking,Ye=Ie.recognitionEnable;if((ae.isInputValueEmpty()||$e)&&Ye)return ae.recognition.speak(),void($e||ae.setState({speaking:!0}));ae.submitUserMessage()}),rn(It(It(ae)),"submitUserMessage",function(){var Ie=ae.state,$e=Ie.defaultUserSettings,Ye=Ie.inputValue,et=Ie.previousSteps,gt=Ie.renderedSteps,kt=ae.state.currentStep;kt.validator&&ae.checkInvalidInput()||(kt=wi({},$e,kt,{message:Ye,value:Ye}),gt.push(kt),et.push(kt),ae.setState({currentStep:kt,renderedSteps:gt,previousSteps:et,disabled:!0,inputValue:""},function(){ae.input&&ae.input.blur()}))}),rn(It(It(ae)),"checkInvalidInput",function(){var Ie=ae.props.enableMobileAutoFocus,$e=ae.state,Ye=$e.currentStep,et=$e.inputValue,gt=Ye.validator(et),kt=et;return(typeof gt!="boolean"||!gt)&&(ae.setState({inputValue:gt.toString(),inputInvalid:!0,disabled:!0},function(){setTimeout(function(){ae.setState({inputValue:kt,inputInvalid:!1,disabled:!1},function(){!Ie&&To()||ae.input&&ae.input.focus()})},2e3)}),!0)}),rn(It(It(ae)),"toggleChatBot",function(Ie){var $e=ae.props.toggleFloating;$e?$e({opened:Ie}):ae.setState({opened:Ie})}),rn(It(It(ae)),"renderStep",function(Ie,$e){var Ye=ae.state.renderedSteps,et=ae.props,gt=et.avatarStyle,kt=et.bubbleStyle,xt=et.bubbleOptionStyle,Ln=et.customStyle,xr=et.hideBotAvatar,Pa=et.hideUserAvatar,Co=et.speechSynthesis,Oi=Ie.options,ds=Ie.component,jn=Ie.asMessage,Da=ae.generateRenderedStepsById(),La=$e>0?Ye[$e-1]:{};return ds&&!jn?l.a.createElement(x,{key:$e,speak:ae.speak,step:Ie,steps:Da,style:Ln,previousStep:La,previousValue:La.value,triggerNextStep:ae.triggerNextStep}):Oi?l.a.createElement(it,{key:$e,step:Ie,speak:ae.speak,previousValue:La.value,triggerNextStep:ae.triggerNextStep,bubbleOptionStyle:xt}):l.a.createElement(Hi,{key:$e,step:Ie,steps:Da,speak:ae.speak,previousStep:La,previousValue:La.value,triggerNextStep:ae.triggerNextStep,avatarStyle:gt,bubbleStyle:kt,hideBotAvatar:xr,hideUserAvatar:Pa,speechSynthesis:Co,isFirst:ae.isFirstPosition(Ie),isLast:ae.isLastPosition(Ie)})}),ae.content=null,ae.input=null,ae.supportsScrollBehavior=!1,ae.setContentRef=function(Ie){ae.content=Ie},ae.setInputRef=function(Ie){ae.input=Ie},ae.state={renderedSteps:[],previousSteps:[],currentStep:{},previousStep:{},steps:{},disabled:!0,opened:_e.opened||!_e.floating,inputValue:"",inputInvalid:!1,speaking:!1,recognitionEnable:_e.recognitionEnable&&qn.isSupported(),defaultUserSettings:{}},ae.speak=us(_e.speechSynthesis),ae}var re,Ae,Qe;return function(_e,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(ae&&ae.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),ae&&Hr(_e,ae)}(W,s.Component),re=W,Qe=[{key:"getDerivedStateFromProps",value:function(_e,ae){var ot=_e.opened;return _e.toggleFloating!==void 0&&ot!==void 0&&ot!==ae.opened?function(Dt){for(var Ie=1;Ie<arguments.length;Ie++){var $e=arguments[Ie]!=null?arguments[Ie]:{},Ye=Object.keys($e);typeof Object.getOwnPropertySymbols=="function"&&(Ye=Ye.concat(Object.getOwnPropertySymbols($e).filter(function(et){return Object.getOwnPropertyDescriptor($e,et).enumerable}))),Ye.forEach(function(et){rn(Dt,et,$e[et])})}return Dt}({},ae,{opened:ot}):ae}}],(Ae=[{key:"componentDidMount",value:function(){for(var _e=this,ae=this.props.steps,ot=this.props,Dt=ot.botDelay,Ie=ot.botAvatar,$e=ot.cache,Ye=ot.cacheName,et=ot.customDelay,gt=ot.enableMobileAutoFocus,kt=ot.userAvatar,xt={},Ln={delay:Dt,avatar:Ie},xr={delay:ot.userDelay,avatar:kt,hideInput:!1},Pa={delay:et},Co=0,Oi=ae.length;Co<Oi;Co+=1){var ds=ae[Co],jn={};ds.user?jn=xr:ds.message||ds.asMessage?jn=Ln:ds.component&&(jn=Pa),xt[ds.id]=wi({},jn,Lf.parse(ds))}Lf.checkInvalidIds(xt);var Da=ae[0];if(Da.message){var La=Da.message;Da.message=typeof La=="function"?La():La,xt[Da.id].message=Da.message}var $f=this.state.recognitionEnable,Hf=this.props.recognitionLang;$f&&(this.recognition=new qn(this.onRecognitionChange,this.onRecognitionEnd,this.onRecognitionStop,Hf)),this.supportsScrollBehavior="scrollBehavior"in document.documentElement.style,this.content&&(this.content.addEventListener("DOMNodeInserted",this.onNodeInserted),window.addEventListener("resize",this.onResize));var bu=function(zf,aw){var Zg=zf.cacheName,dR=zf.cache,hR=zf.firstStep,Yd=zf.steps,fR=hR,Soe=[Yd[fR.id]],Toe=[Yd[fR.id]],bU=localStorage.getItem(Zg);if(dR&&bU)try{var Ka=Object(Ec.parse)(bU),wU=Ka.renderedSteps[Ka.renderedSteps.length-1];if(!wU||!wU.end){for(var Gf=0,Coe=Ka.renderedSteps.length;Gf<Coe;Gf+=1){var EU=Ka.renderedSteps[Gf];if(Ka.renderedSteps[Gf].delay=0,Ka.renderedSteps[Gf].rendered=!0,EU.component){var xoe=EU.id;Ka.renderedSteps[Gf].component=Yd[xoe].component}}var pR=Ka.currentStep,Roe=pR.trigger,Ioe=pR.end,mR=pR.options,_U=Ka.currentStep.id;if(mR&&delete Ka.currentStep.rendered,!Roe&&!Ioe)if(mR)for(var ow=0;ow<mR.length;ow+=1)Ka.currentStep.options[ow].trigger=Yd[_U].options[ow].trigger;else Ka.currentStep.trigger=Yd[_U].trigger;return Ka.currentStep.user&&aw(),Ka}localStorage.removeItem(Zg)}catch(Noe){console.info("Unable to parse cache named:".concat(Zg,`. 
The cache where probably created with an older version of react-simple-chatbot.
`),Noe)}return{currentStep:fR,previousStep:{},previousSteps:Toe,renderedSteps:Soe}}({cacheName:Ye,cache:$e,firstStep:Da,steps:xt},function(){_e.setState({disabled:!1},function(){!gt&&To()||_e.input&&_e.input.focus()})}),Jg=bu.currentStep,Qg=bu.previousStep,cR=bu.previousSteps,uR=bu.renderedSteps;this.setState({currentStep:Jg,defaultUserSettings:xr,previousStep:Qg,previousSteps:cR,renderedSteps:uR,steps:xt})}},{key:"componentWillUnmount",value:function(){this.content&&(this.content.removeEventListener("DOMNodeInserted",this.onNodeInserted),window.removeEventListener("resize",this.onResize))}},{key:"render",value:function(){var _e=this,ae=this.state,ot=ae.currentStep,Dt=ae.disabled,Ie=ae.inputInvalid,$e=ae.inputValue,Ye=ae.opened,et=ae.renderedSteps,gt=ae.speaking,kt=ae.recognitionEnable,xt=this.props,Ln=xt.className,xr=xt.contentStyle,Pa=xt.floating,Co=xt.floatingIcon,Oi=xt.floatingStyle,ds=xt.footerStyle,jn=xt.headerComponent,Da=xt.headerTitle,La=xt.hideHeader,$f=xt.hideSubmitButton,Hf=xt.inputStyle,bu=xt.placeholder,Jg=xt.inputAttributes,Qg=xt.recognitionPlaceholder,cR=xt.style,uR=xt.submitButtonStyle,zf=xt.width,aw=xt.height,Zg=jn||l.a.createElement(lR,{className:"rsc-header"},l.a.createElement(Mf,{className:"rsc-header-title"},Da),Pa&&l.a.createElement(Kd,{className:"rsc-header-close-button",onClick:function(){return _e.toggleChatBot(!1)}},l.a.createElement(ur,null))),dR=(this.isInputValueEmpty()||gt)&&kt?l.a.createElement(ga,null):l.a.createElement(ma,null),hR=gt?Qg:ot.placeholder||bu,Yd=ot.inputAttributes||Jg;return l.a.createElement("div",{className:"rsc ".concat(Ln)},Pa&&l.a.createElement(rw,{className:"rsc-float-button",style:Oi,opened:Ye,onClick:function(){return _e.toggleChatBot(!0)}},typeof Co=="string"?l.a.createElement(Vf,{src:Co}):Co),l.a.createElement(oR,{className:"rsc-container",floating:Pa,floatingStyle:Oi,opened:Ye,style:cR,width:zf,height:aw},!La&&Zg,l.a.createElement(sR,{className:"rsc-content",ref:this.setContentRef,floating:Pa,style:xr,height:aw,hideInput:ot.hideInput},et.map(this.renderStep)),l.a.createElement(gu,{className:"rsc-footer",style:ds},!ot.hideInput&&l.a.createElement(Pt,wi({type:"textarea",style:Hf,ref:this.setInputRef,className:"rsc-input",placeholder:Ie?"":hR,onKeyPress:this.handleKeyPress,onChange:this.onValueChange,value:$e,floating:Pa,invalid:Ie,disabled:Dt,hasButton:!$f},Yd)),!ot.hideInput&&!$f&&l.a.createElement(Cr,{className:"rsc-submit-button",style:uR,onClick:this.handleSubmitButton,invalid:Ie,disabled:Dt,speaking:gt},dR))))}}])&&_c(re.prototype,Ae),Qe&&_c(re,Qe),W}();Ei.propTypes={avatarStyle:u.a.objectOf(u.a.any),botAvatar:u.a.string,botDelay:u.a.number,bubbleOptionStyle:u.a.objectOf(u.a.any),bubbleStyle:u.a.objectOf(u.a.any),cache:u.a.bool,cacheName:u.a.string,className:u.a.string,contentStyle:u.a.objectOf(u.a.any),customDelay:u.a.number,customStyle:u.a.objectOf(u.a.any),enableMobileAutoFocus:u.a.bool,enableSmoothScroll:u.a.bool,floating:u.a.bool,floatingIcon:u.a.oneOfType([u.a.string,u.a.element]),floatingStyle:u.a.objectOf(u.a.any),footerStyle:u.a.objectOf(u.a.any),handleEnd:u.a.func,headerComponent:u.a.element,headerTitle:u.a.string,height:u.a.string,hideBotAvatar:u.a.bool,hideHeader:u.a.bool,hideSubmitButton:u.a.bool,hideUserAvatar:u.a.bool,inputAttributes:u.a.objectOf(u.a.any),inputStyle:u.a.objectOf(u.a.any),opened:u.a.bool,toggleFloating:u.a.func,placeholder:u.a.string,recognitionEnable:u.a.bool,recognitionLang:u.a.string,recognitionPlaceholder:u.a.string,speechSynthesis:u.a.shape({enable:u.a.bool,lang:u.a.string,voice:typeof window<"u"?u.a.instanceOf(window.SpeechSynthesisVoice):u.a.any}),steps:u.a.arrayOf(u.a.object).isRequired,style:u.a.objectOf(u.a.any),submitButtonStyle:u.a.objectOf(u.a.any),userAvatar:u.a.string,userDelay:u.a.number,width:u.a.string},Ei.defaultProps={avatarStyle:{},botDelay:1e3,bubbleOptionStyle:{},bubbleStyle:{},cache:!1,cacheName:"rsc_cache",className:"",contentStyle:{},customStyle:{},customDelay:1e3,enableMobileAutoFocus:!1,enableSmoothScroll:!1,floating:!1,floatingIcon:l.a.createElement(Qr,null),floatingStyle:{},footerStyle:{},handleEnd:void 0,headerComponent:void 0,headerTitle:"Chat",height:"520px",hideBotAvatar:!1,hideHeader:!1,hideSubmitButton:!1,hideUserAvatar:!1,inputStyle:{},opened:void 0,placeholder:"Type the message ...",inputAttributes:{},recognitionEnable:!1,recognitionLang:"en",recognitionPlaceholder:"Listening ...",speechSynthesis:{enable:!1,lang:"en",voice:null},style:{},submitButtonStyle:{},toggleFloating:void 0,userDelay:1e3,width:"350px",botAvatar:"data:image/svg+xml,%3csvg version='1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3e%3cpath d='M303 70a47 47 0 1 0-70 40v84h46v-84c14-8 24-23 24-40z' fill='%2393c7ef'/%3e%3cpath d='M256 23v171h23v-84a47 47 0 0 0-23-87z' fill='%235a8bb0'/%3e%3cpath fill='%2393c7ef' d='M0 240h248v124H0z'/%3e%3cpath fill='%235a8bb0' d='M264 240h248v124H264z'/%3e%3cpath fill='%2393c7ef' d='M186 365h140v124H186z'/%3e%3cpath fill='%235a8bb0' d='M256 365h70v124h-70z'/%3e%3cpath fill='%23cce9f9' d='M47 163h419v279H47z'/%3e%3cpath fill='%2393c7ef' d='M256 163h209v279H256z'/%3e%3cpath d='M194 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%233c5d76'/%3e%3cpath d='M380 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%231e2e3b'/%3e%3cpath d='M186 349a70 70 0 1 0 140 0H186z' fill='%233c5d76'/%3e%3cpath d='M256 349v70c39 0 70-31 70-70h-70z' fill='%231e2e3b'/%3e%3c/svg%3e",userAvatar:"data:image/svg+xml,%3csvg viewBox='-208.5 21 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle cx='-158.5' cy='71' fill='%23F5EEE5' r='50'/%3e%3cdefs%3e%3ccircle cx='-158.5' cy='71' id='a' r='50'/%3e%3c/defs%3e%3cclipPath id='b'%3e%3cuse overflow='visible' xlink:href='%23a'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23b)' d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' fill='%23E6C19C'/%3e%3cg clip-path='url(%23b)'%3e%3cdefs%3e%3cpath d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' id='c'/%3e%3c/defs%3e%3cclipPath id='d'%3e%3cuse overflow='visible' xlink:href='%23c'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23d)' d='M-158.5 100.1c12.7 0 23-18.6 23-34.4 0-16.2-10.3-24.7-23-24.7s-23 8.5-23 24.7c0 15.8 10.3 34.4 23 34.4z' fill='%23D4B08C'/%3e%3c/g%3e%3cpath d='M-158.5 96c12.7 0 23-16.3 23-31 0-15.1-10.3-23-23-23s-23 7.9-23 23c0 14.7 10.3 31 23 31z' fill='%23F2CEA5'/%3e%3c/svg%3e"};var Ft=Ei;o.d(a,"Loading",function(){return A}),a.default=Ft}])})})(uxe);function wRe(){return T.useState(!1),d.jsxs("div",{className:"homePage w-full h-full",id:"id_patientDashboard",children:[d.jsx("div",{className:"header bg-white w-full h-[12vh] shadow-lg ",children:d.jsx(GL,{})}),d.jsx("div",{className:"w-full h-full p-4 ",children:d.jsx(oi,{})})]})}const ERe="https://hcompanion.onrender.com/api",oZ=async({token:e})=>{try{const t=await ce.get(`${ERe}/pharmacy/getBasicDetails`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.userData}catch(t){t.response.status=="401"&&Q.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t)}},Cg="https://hcompanion.onrender.com/api",_Re=async e=>{try{const t=await ce.post(`${Cg}/pharmacy/profile/updateDetails`,{updateDetails:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},cj=async()=>{try{return(await ce.get(`${Cg}/pharmacy/profile/getProfileDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.details}catch(e){return console.log(e),!1}},SRe=async()=>{try{return(await ce.get(`${Cg}/pharmacy/profile/getContactDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.contactDetails}catch(e){return console.log(e),!1}},TRe=async e=>{try{const t=await ce.post(`${Cg}/pharmacy/profile/updateContactDetails`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return Q.fire({icon:"success",text:"Contact Details Have been Updated"}),!0}catch(t){return console.log(t),!1}},CRe=async e=>{try{const t=await ce.post(`${Cg}/pharmacy/approval/form/submit`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},xRe=async()=>{try{return(await ce.get(`${Cg}/pharmacy/approval/viewDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.pharmacyDetails}catch(e){return console.log(e),!1}},RRe={pharmacyName:"",ownerName:"",profileImage:""},sZ=vg({name:"pharmacy",initialState:RRe,reducers:{setPharmacy(e,t){e.pharmacyName=t.payload.pharmacyName,e.ownerName=t.payload.ownerName,e.profileImage=t.payload.profileImage}}}),{setPharmacy:lZ}=sZ.actions,IRe=sZ.reducer;function NRe(){const e=fc(),{username:t,email:r,role:n,isLoggedIn:i}=Yr(u=>u.user),{pharmacyName:a,ownerName:o,profileImage:s}=Yr(u=>u.pharmacy),l=Zt(),c=async()=>{if(sessionStorage.getItem("token")){const u=await oZ({token:sessionStorage.getItem("token")});if(u){const h=await cj();(h==null?void 0:h.approvalStatus)=="0"?l("/pharmacy/approval/form"):(h==null?void 0:h.approvalStatus)=="1"&&l("/pharmacy/approval/submitted"),e(ai({username:u.username,email:u.email,role:u.role,isLoggedIn:!0})),e(lZ({pharmacyName:h.pharmacyName,ownerName:h.ownerName,profileImage:h.profileImage}))}}};return T.useEffect(()=>{c()},[]),d.jsx("div",{className:"navbarParent h-full w-full ",children:d.jsxs("div",{className:"navbar w-full h-full flex flex-col rounded-tr-[3%] bg-blue-600 bg-opacity-90 p-4 gap-10 ",children:[d.jsxs("div",{className:"w-full h-[8vh] flex justify-start items-center gap-4 ",children:[d.jsx("img",{src:"/icons/arrowBack.png",alt:"",className:"h-[5vh] w-[] p-2 ml-2 bg-white  rounded-lg"}),d.jsx("h2",{className:"text-white text-sm",children:"Minimize"}),d.jsx("div",{className:"flex-1 h-full flex justify-end items-center",children:d.jsx("img",{src:"/logo.png",alt:"",className:"w-[7vw] h-[7vh] bg-white mr-4"})})]}),d.jsxs("div",{className:"profile h-[12%] flex flex-row justify-start gap-4",children:[d.jsx("div",{className:"profileImage w-auto h-full flex ",children:d.jsx("img",{src:s,alt:"image",className:"h-full w-[5vw] rounded-full "})}),d.jsxs("div",{className:"details flex-1 flex flex-col justify-center bg-white bg-opacity-10 p-2 rounded-lg gap-2 ",children:[d.jsx("span",{children:d.jsx("h2",{className:"text-white text-lg font-bold",children:a||t})}),d.jsx("span",{children:d.jsx("h2",{className:"text-white text-sm",children:"pharmacy"})})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(ie,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"home w-full text-white h-[80%] flex flex-col gap-4 border-slate-50",children:[d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/pharmacyHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{l("/pharmacy/home")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/stock.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",id:"id_navMedicineStock",onClick:()=>{l("/pharmacy/stock/viewStocks")},children:"Medicine Stock"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/pharmacyOrder.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{l("/pharmacy/order")},children:"Orders"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{l("/pharmacy/profile")},children:"Profile"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),e(ai({})),l("/")},children:"sign out"})]})]})]})})}function cZ(){const e=Zt();return d.jsxs("div",{className:"w-full h-[12vh] py-2 flex flex-row justify-end gap-20  px-10 ",children:[d.jsx("div",{className:"w-[15%] h-full",children:d.jsx("button",{className:"w-full h-full p-4 font-bold rounded-sm flex items-center  bg-green-400  drop-shadow-xl",onClick:()=>{e("/pharmacy/stock/addCategory")},children:"Add New Stock"})}),d.jsx("div",{className:"w-[15%] h-full",children:d.jsx("button",{className:"w-full h-full p-4 font-bold rounded-sm flex items-center  bg-orange-500  drop-shadow-xl",id:"id_btnViewStock",onClick:()=>{e("/pharmacy/stock/viewStocks")},children:"View Stock"})})]})}const ARe=async()=>{try{const e=await ce.get("https://rxnav.nlm.nih.gov/REST/allconcepts.json?tty=SCD+GPCK+SBD+BPCK");return console.log(e.data.minConceptGroup.minConcept[0]),e.data.minConceptGroup.minConcept}catch(e){console.log(e)}},ORe=Vi().shape({medicineName:Ut().required("Required"),description:Ut().required("required"),costPrice:Ut(),sellingPrice:Ut().required("required"),medicineType:Ut().required("required"),medicineImage:$K().required("required")}),kRe=Vi().shape({medicineName:Ut().required("Required"),description:Ut().required("required"),costPrice:Ut().required("required"),sellingPrice:Ut().required("required"),medicineType:Ut().required("required")}),Cb="https://hcompanion.onrender.com/api",PRe=async e=>{try{const t=await ce.post(`${Cb}/pharmacy/medicine/add`,e,{headers:{"Content-Type":"multipart/form-data",authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),Q.fire({icon:"success",text:"Successfully Added"}),t.data.medicineDetails}catch(t){console.log(t),t.response.status=="500"&&Q.fire({icon:"error",text:"Encountered an Error on the backend"})}},DRe=async()=>{try{const e=await ce.get(`${Cb}/pharmacy/medicine/viewStocks`,{headers:{"Content-Type":"multipart/form-data",authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(e.data),e.data.medicines}catch(e){console.log(e),e.response.status=="500"&&Q.fire({icon:"error",text:"Encountered an Error on the backend"})}},LRe=async({inventoryId:e})=>{try{const t=await ce.post(`${Cb}/pharmacy/medicine/deleteStock`,{inventoryId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),Q.fire({icon:"success",text:"Medicine has been Deleted"}),!0}catch(t){console.log(t),t.response.status=="400"&&Q.fire({icon:"error",text:"Medicine Not Found"}),t.response.status=="500"&&Q.fire({icon:"error",text:"Encountered an Error on the backend"})}},jRe=async({inventoryId:e})=>{try{console.log(e);const t=await ce.post(`${Cb}/pharmacy/medicine/viewDetails`,{inventoryId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.medicine}catch(t){console.log(t),t.response.status=="500"&&Q.fire({icon:"error",text:"Encountered an Error on the backend"})}},MRe=async({medicine:e})=>{try{await console.log(e);const t=await ce.post(`${Cb}/pharmacy/medicine/updateStock`,e,{headers:{"Content-Type":"multipart/form-data",authorization:`Bearer ${sessionStorage.getItem("token")}`}});return Q.fire({icon:"success",text:"Medicine has been Updated"}),console.log(t.data),t.data.updated}catch(t){console.log(t)}};function URe(){const[e,t]=T.useState([]),r=Zt(),n=Sr({initialValues:{medicineName:"",description:"",costPrice:"",sellingPrice:"",medicineType:"",medicineImage:""},validationSchema:ORe,onSubmit:async(o,s)=>{console.log(`values ${JSON.stringify(o)}`),await PRe(o)&&r("/pharmacy/home")}}),i=async()=>{const o=await ARe();console.log(`${JSON.stringify(o)}`),await t(o)},a=(o,s)=>{try{const l=o.target.files[0];n.setFieldValue("medicineImage",l)}catch(l){console.log(l)}};return T.useEffect(()=>{i()},[]),console.log(n.errors),d.jsx("div",{className:"screen w-full h-full flex flex-row",children:d.jsx("div",{style:{backgroundImage:"url('/icons/pharmacyBg.jpg')",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},className:"w-full h-full flex flex-1 flex-col gap-4",children:d.jsxs("div",{className:"w-full h-full overflow-y-scroll pt-4 flex flex-1 flex-col gap-4 bg-black bg-opacity-70",children:[d.jsx(cZ,{}),d.jsx("div",{className:"addForm flex justify-center w-full h-[100%] mt-10 mb-[5vh]",children:d.jsxs("form",{onSubmit:n.handleSubmit,className:"w-[40%] h-[100%] p-4 flex flex-col gap-6 border shadow-xl bg-white",children:[d.jsx("span",{children:d.jsx("h1",{className:"font-bold text-xl text-emerald-500",children:"New Medicine"})}),d.jsx(ie,{list:"medicines",variant:"filled",name:"medicineName",placeholder:"medicine name",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.medicineName&&(n.errors.medicineName?{color:"error",helperText:`${n.errors.medicineName}`}:{color:"success"})}),d.jsx("div",{children:d.jsx("datalist",{id:"medicines",children:e&&e.length>0?e.map((o,s)=>d.jsx("option",{value:o.name},s)):d.jsx("option",{value:"No Medicines Available"})})}),d.jsx(ie,{variant:"filled",name:"medicineType",placeholder:"medicineType",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.medicineType&&(n.errors.medicineType?{color:"error",helperText:`${n.errors.medicineType}`}:{color:"success"})}),d.jsx(ie,{variant:"filled",name:"description",placeholder:"description",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.description&&(n.errors.description?{color:"error",helperText:`${n.errors.description}`}:{color:"success"})}),d.jsx(ie,{variant:"filled",name:"costPrice",placeholder:"cost price",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.costPrice&&(n.errors.costPrice?{color:"error",helperText:`${n.errors.costPrice}`}:{color:"success"})}),d.jsx(ie,{variant:"filled",name:"sellingPrice",placeholder:"selling price",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.sellingPrice&&(n.errors.sellingPrice?{color:"error",helperText:`${n.errors.sellingPrice}`}:{color:"success"})}),d.jsx("div",{children:d.jsx(Ra,{id:"id_medicineImage",accept:"image/jpeg, image/png",name:"medicineImage",helperText:"Upload Image",onChange:a,onBlur:n.handleBlur,...n.touched.medicineImage&&(n.errors.medicineImage?{color:"error",helperText:`${n.errors.medicineImage}`}:{color:"success"})})}),d.jsx("button",{type:"submit",className:"w-[full] h-[10%] border rounded-[5%] bg-orange-500 p-2 font-bold",children:"Add Medicine to the Inventory"})]})})]})})})}function FRe(){const[e,t]=T.useState([]),r=async()=>{const n=await DRe();await t(n)};return T.useEffect(()=>{r()},[]),d.jsxs("div",{className:"stockViewScreen w-full h-full p-2 flex flex-col gap-10 overflow-y-scroll",children:[d.jsx(cZ,{}),d.jsxs("div",{className:"w-full h-full mt-20 flex flex-col gap-2",children:[d.jsx("div",{className:"heading w-full  ml-20 mb-10  text-lg text-emerald-400 font-bold flex",children:d.jsx("h2",{children:"Medicine Stocks"})}),e&&e.length>0?d.jsx(VRe,{medicines:e}):d.jsx("span",{className:"w-full h-[70%] mb-10 text-xl font-bold flex flex-1 justify-center items-center ",children:"No medicine Stock.....!!!"})]})]})}function VRe(e){const t=Zt(),r=async(i,a)=>{console.log(a),await LRe({inventoryId:a}),t("/pharmacy/stock/viewStocks")},{medicines:n}=e;return d.jsx("div",{className:"w-full h-full mb-10 flex flex-1 justify-center ",children:d.jsxs(wr,{hoverable:!0,className:"w-full gap-x-10 ",children:[d.jsxs(wr.Head,{className:"gap-x-72",children:[d.jsx(wr.HeadCell,{children:"Medicine Name"}),d.jsx(wr.HeadCell,{children:"Description"}),d.jsx(wr.HeadCell,{children:"Type"}),d.jsx(wr.HeadCell,{children:"Stock"}),d.jsx(wr.HeadCell,{children:"cost price"}),d.jsx(wr.HeadCell,{children:"selling price"}),d.jsx(wr.HeadCell,{children:"Image"}),d.jsx(wr.HeadCell,{}),d.jsx(wr.HeadCell,{})]}),d.jsx(wr.Body,{className:"font-bold",children:n.map((i,a)=>d.jsxs(wr.Row,{className:"border-b-4",id:`id_${a}`,children:[d.jsx(wr.Cell,{children:i.medicineId.medicineName}),d.jsx(wr.Cell,{children:i.medicineId.description}),d.jsx(wr.Cell,{children:i.medicineId.medicineType}),d.jsx(wr.Cell,{children:i.stock}),d.jsx(wr.Cell,{children:i.costPrice}),d.jsx(wr.Cell,{children:i.sellingPrice}),d.jsx(wr.Cell,{children:d.jsx("img",{className:"h-14",src:i.medicineImage,alt:"productImage"})}),d.jsx(wr.Cell,{children:d.jsx("img",{className:"h-8 cursor-pointer",src:"/icons/editIcon.png",alt:"editIcon",id:`id_navEdit_${a}`,onClick:()=>{t("/pharmacy/stock/editStock",{state:{inventoryId:i._id}})}})}),d.jsx(wr.Cell,{children:d.jsx("img",{className:"h-8 cursor-pointer opacity-70",src:"/icons/deleteIcon.png",alt:"editIcon",id:`id_btnDelete_${a}`,onClick:o=>{r(o,i._id)}})})]},i._id))})]})})}function BRe(){return d.jsxs("div",{className:"screen w-screen h-screen flex flex-row",children:[d.jsx("div",{className:"fixed header w-[21%] h-[100vh] ",children:d.jsx(NRe,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4 overflow-y-auto",children:d.jsx(oi,{})})]})}function $Re(){const[e,t]=T.useState(void 0),[r,n]=T.useState(void 0),i=Sr({initialValues:{medicineName:"",description:"",costPrice:"",stock:"",sellingPrice:"",medicineType:"",medicineImage:""},validationSchema:kRe,onSubmit:async(u,h)=>{await MRe({medicine:{...u,inventoryId:o}}),await s()}}),a=cg(),{inventoryId:o}=a.state,s=async()=>{const u=await jRe({inventoryId:o});console.log(`temp ${JSON.stringify(u)}`),i.setFieldValue("medicineName",u.medicineId.medicineName),i.setFieldValue("description",u.medicineId.description),i.setFieldValue("medicineType",u.medicineId.medicineType),i.setFieldValue("costPrice",u.costPrice),i.setFieldValue("sellingPrice",u.sellingPrice),i.setFieldValue("medicineImage",u.medicineImage),i.setFieldValue("stock",u.stock),await t(u)},l=async u=>{const h=u.target.files[0],f=new FileReader(h);f.onload=p=>{const m=p.target.result;n(m),i.setFieldValue("medicineImage",h)},f.readAsDataURL(h)},c=u=>{console.log(parseFloat(u.target.value)+1);const h=(100+parseFloat(u.target.value))/100*parseFloat(i.values.costPrice);i.setFieldValue("sellingPrice",h.toFixed(2))};return T.useEffect(()=>{s()},[]),d.jsxs("div",{className:"w-full h-full overflow-y-auto pl-4 pt-5",children:[d.jsx("div",{className:"w-full h-[10%] text-center",children:d.jsx("h2",{className:"text-[5vh] text-emerald-400 font-bold",children:"Medicine Details"})}),d.jsxs("div",{className:"w-full h-full mt-10 flex justify-center gap-10",children:[d.jsxs("form",{onSubmit:i.handleSubmit,className:"w-[50%] flex flex-col gap-5 font-bold",children:[d.jsx(ie,{variant:"filled",name:"medicineName",label:"Medicine Name",value:i.values.medicineName,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.medicineName&&(i.errors.medicineName?{color:"error",helperText:`${i.errors.medicineName}`}:{color:"success"})}),d.jsx(ie,{variant:"filled",name:"description",label:"Description",value:i.values.description,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.description&&(i.errors.description?{color:"error",helperText:`${i.errors.description}`}:{color:"success"})}),d.jsx(ie,{variant:"filled",name:"MedicineType",label:"Medicine Type",value:i.values.medicineType,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.medicineType&&(i.errors.medicineType?{color:"error",helperText:`${i.errors.medicineType}`}:{color:"success"})}),d.jsx(ie,{variant:"filled",name:"stock",label:"Stock",type:"number",value:i.values.stock,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.stock&&(i.errors.stock?{color:"error",helperText:`${i.errors.stock}`}:{color:"success"})}),d.jsx(ie,{variant:"filled",name:"margin",label:"Margin %",onChange:c}),d.jsx(ie,{variant:"filled",name:"costPrice",label:"Cost Price",value:i.values.costPrice,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.costPrice&&(i.errors.costPrice?{color:"error",helperText:`${i.errors.costPrice}`}:{color:"success"})}),d.jsx(ie,{variant:"filled",name:"sellingPrice",label:"Selling Price",value:i.values.sellingPrice,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.sellingPrice&&(i.errors.sellingPrice?{color:"error",helperText:`${i.errors.sellingPrice}`}:{color:"success"})}),d.jsx("button",{type:"submit",className:"w-[full] h-[5vh] border rounded-[5%] bg-orange-500 p-2",children:"Save Details"})]}),d.jsxs("div",{className:"medicineImage w-[30%] flex flex-col gap-10 h-[60%]",children:[d.jsx("img",{src:r||i.values.medicineImage,alt:"medicineImage",className:"h-[70%] w-[70%] shadow-2xl"}),d.jsx("div",{children:d.jsx(Ra,{helperText:"upload image",id:"id_medicineImage",name:"medicineImage",onChange:l,onBlur:i.handleBlur,...i.touched.medicineImage&&(i.errors.medicineImage?{color:"error",helperText:`${i.errors.medicineImage}`}:{color:"success"})})})]})]})]})}var uZ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hF=jr.createContext&&jr.createContext(uZ),HRe=["attr","size","title"];function zRe(e,t){if(e==null)return{};var r=GRe(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function eT(){return eT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eT.apply(this,arguments)}function fF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fF(Object(r),!0).forEach(function(n){WRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WRe(e,t,r){return t=KRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KRe(e){var t=qRe(e,"string");return typeof t=="symbol"?t:t+""}function qRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dZ(e){return e&&e.map((t,r)=>jr.createElement(t.tag,tT({key:r},t.attr),dZ(t.child)))}function Wn(e){return t=>jr.createElement(YRe,eT({attr:tT({},e.attr)},t),dZ(e.child))}function YRe(e){var t=r=>{var{attr:n,size:i,title:a}=e,o=zRe(e,HRe),s=i||r.size||"1em",l;return r.className&&(l=r.className),e.className&&(l=(l?l+" ":"")+e.className),jr.createElement("svg",eT({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:l,style:tT(tT({color:e.color||r.color},r.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&jr.createElement("title",null,a),e.children)};return hF!==void 0?jr.createElement(hF.Consumer,null,r=>t(r)):t(uZ)}function qC(e){return Wn({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.5 0h-12c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h12c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM13 14h-11v-12h11v12zM4 9h7v1h-7zM4 11h7v1h-7zM5 4.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5zM7.5 6h-2c-0.825 0-1.5 0.45-1.5 1v1h5v-1c0-0.55-0.675-1-1.5-1z"},child:[]}]})(e)}function XRe(e){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function hZ(e){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"},child:[]}]})(e)}function JRe(e){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"},child:[]}]})(e)}function uj(e){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.5 4.5c-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .65.73.45.75.45C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.41.21.75-.19.75-.45V6c-1.49-1.12-3.63-1.5-5.5-1.5zm3.5 14c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"},child:[]}]})(e)}function fZ(e){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(e)}function dj(e){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16ZM11 14V16H13V14H11ZM7 14V16H9V14H7ZM15 14V16H17V14H15Z"},child:[]}]})(e)}function QRe(){return d.jsxs("div",{className:"w-full h-[10vh] px-2 text-center font-bold flex justify-center items-center gap-2 ",children:[d.jsxs(nr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/pharmacy/profile/profileDetails ",children:[d.jsx(qC,{className:"h-full w-[5%]"}),d.jsx("span",{className:"flex flex-1",children:"Profile Details"})]}),d.jsxs(nr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/pharmacy/profile/contactDetails",children:[d.jsx(uj,{className:"h-full w-[5%]"}),d.jsx("span",{className:"flex flex-1",children:"Contact Details"})]}),d.jsxs(nr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/pharmacy/profile/passwordReset",children:[d.jsx(dj,{className:"h-full w-[5%]"}),d.jsx("span",{className:"flex flex-1",children:"Password Reset"})]})]})}function ZRe(){return d.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[d.jsx(QRe,{}),d.jsx("div",{className:"w-full h-full mt-5 pb-2",children:d.jsx(oi,{})})]})}function YC(e){return Wn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(e)}function xg(e){return Wn({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M308 96c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v44.748c0 6.627 5.373 12 12 12h85.28c27.308 0 48.261 9.958 60.97 27.252H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h158.757c-6.217 36.086-32.961 58.632-74.757 58.632H12c-6.627 0-12 5.373-12 12v53.012c0 3.349 1.4 6.546 3.861 8.818l165.052 152.356a12.001 12.001 0 0 0 8.139 3.182h82.562c10.924 0 16.166-13.408 8.139-20.818L116.871 319.906c76.499-2.34 131.144-53.395 138.318-127.906H308c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-58.69c-3.486-11.541-8.28-22.246-14.252-32H308z"},child:[]}]})(e)}function xf(e){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(e)}function eIe(e){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Video_On"},child:[{tag:"path",attr:{d:"M21.05,5.05a1.433,1.433,0,0,0-1.48.08L16.25,7.37V6.56a2.5,2.5,0,0,0-2.5-2.5H4.69a2.5,2.5,0,0,0-2.5,2.5V17.44a2.5,2.5,0,0,0,2.5,2.5h9.06a2.5,2.5,0,0,0,2.5-2.5v-.81l3.32,2.24a1.5,1.5,0,0,0,.81.24,1.414,1.414,0,0,0,1.43-1.43V6.32A1.437,1.437,0,0,0,21.05,5.05Zm-5.8,12.39a1.5,1.5,0,0,1-1.5,1.5H4.69a1.5,1.5,0,0,1-1.5-1.5V6.56a1.5,1.5,0,0,1,1.5-1.5h9.06a1.5,1.5,0,0,1,1.5,1.5Zm5.56.24a.415.415,0,0,1-.23.38.425.425,0,0,1-.45-.02l-3.88-2.62V8.58l3.88-2.62a.425.425,0,0,1,.45-.02.415.415,0,0,1,.23.38Z"},child:[]}]}]})(e)}function pZ({username:e}){const{email:t}=Yr(n=>n.user),r=Sr({initialValues:{password:"",confirmPassword:""},validationSchema:BY,onSubmit:async(n,i)=>{await Wve({password:n.password,email:t})&&(await Q.fire({icon:"success",text:"Password has been reset"}),window.location.reload())}});return d.jsx("div",{className:"w-full h-full",children:d.jsxs("form",{onSubmit:r.handleSubmit,className:"w-full h-full flex flex-col gap-6",children:[d.jsx(ie,{variant:"filled",label:"New Password",type:"password",name:"password",onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.password&&(r.errors.password?{color:"error",helperText:`${r.errors.password}`}:{color:"success"})}),d.jsx(ie,{variant:"filled",label:"Confirm Password",type:"password",name:"confirmPassword",onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.confirmPassword&&(r.errors.confirmPassword?{color:"error",helperText:`${r.errors.confirmPassword}`}:{color:"success"})}),d.jsxs("button",{type:"submit",className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(xf,{}),"Save"]})]})})}function pF(){return d.jsx("div",{className:"w-full h-full flex flex-col pt-[15vh] items-center",children:d.jsxs("div",{className:"resetPassword w-[40%] h-fit flex flex-col gap-6 border shadow-lg p-5 ",children:[d.jsx("h1",{className:"text-lg font-medium",children:"Reset Password"}),d.jsx(pZ,{})]})})}function tIe(e){const{medicine:t}=e;return console.log(`medicine ${JSON.stringify(t)}`),d.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:d.jsxs("div",{className:"h-full w-full flex flex-col ",children:[d.jsx("div",{className:"w-full h-[50%] ",children:d.jsx("img",{src:t.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[d.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t.medicineId.medicineName}),d.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:d.jsx("div",{className:"price w-full h-[5vh]",children:d.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[d.jsx(xg,{})," ",t.sellingPrice]})})})]}),d.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",children:"Order Medicine"})})]})]})})}const xb="https://hcompanion.onrender.com/api",hj=sessionStorage.getItem("token"),rIe=async()=>{try{const e=await ce.get(`${xb}/patient/medicines/getAllMedicines`);return console.log(e),e.data.medicines}catch(e){console.log(e)}},nIe=async({inventoryId:e})=>{try{const t=await ce.post(`${xb}/patient/medicines/getMedicineDetails`,{inventoryId:e});return console.log(t),t.data.medicine}catch(t){console.log(t)}},iIe=async()=>{try{return(await ce.get(`${xb}/patient/doctor/medicine/requests`,{headers:{Authorization:`bearer ${hj}`}})).data.medicines}catch(e){return console.log(e),!1}},aIe=async({razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,doctorId:n,order:i,pharmacyId:a,pharmacyInventoryId:o})=>{try{const s=await ce.post(`${xb}/patient/doctors/medicine/requests/order`,{razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,doctorId:n,order:i,pharmacyId:a,pharmacyInventoryId:o},{headers:{Authorization:`bearer ${hj}`}});return!0}catch(s){return console.log(s),!1}},oIe=async()=>{try{return(await ce.get(`${xb}/patient/doctors/medicine/requests/ordered`,{headers:{Authorization:`bearer ${hj}`}})).data.medicines}catch(e){return console.log(e),!1}};function sIe(){const e=Zt(),[t,r]=T.useState([]),n=async()=>{const a=await rIe();a.length>0&&await r(a)},i=async(a,o)=>{e({pathname:"/patient/medicines/medicineDetails",search:`?${pS({inventoryId:encodeURIComponent(o)})}`})};return T.useEffect(()=>{n()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"medicinesList w-full h-full flex flex px-20 py-5 ",children:d.jsx("div",{className:"w-full h-full p-4 grid grid-cols-4 justify-items-center gap-y-10 ",children:t&&t.length>0?t.map((a,o)=>d.jsx("div",{className:"w-auto h-auto flex flex-col cursor-pointer hover:bg-slate-400 rounded-lg",onClick:s=>i(s,a._id),children:d.jsx(tIe,{medicine:a},a._id)},a._id)):d.jsx("span",{className:"text-lg font-medium",children:"No Medicines.....:)"})})})})}function lIe(){const[e,t]=T.useState(void 0),[r,n]=yf(),i=async()=>{const a=await nIe({inventoryId:decodeURIComponent(r.get("inventoryId"))});t(a)};return T.useEffect(()=>{i()},[r]),d.jsx("div",{className:"w-full h-screen flex flex-col",children:d.jsxs("div",{className:"content w-full h-full grid grid-cols-2 justify-items-center gap-8  ",children:[d.jsx("div",{className:"image w-full h-[70vh] mt-2 flex justify-center ml-10   ",children:d.jsx("img",{src:e&&e.medicineImage,alt:"Medicine Image",className:"h-full w-[70%]"})}),d.jsxs("div",{className:"w-full h-full pl-4 grid grid-cols-1 gap-y-4 place-content-center ",children:[d.jsx("div",{className:"",children:d.jsx("pre",{className:"opacity-50 text-medium font-medium",children:`By pharmacy ${e&&e.pharmacyId.userId.username}`})}),d.jsx("h1",{className:"font-sm text-[6vh] text-emerald-400 ",children:e&&e.medicineId.medicineName}),d.jsx("div",{className:"price w-full h-[10vh] ",children:d.jsxs("span",{className:"w-full h-full text-2xl font-medium flex items-center gap-4",children:[d.jsx(xg,{})," ",e&&e.sellingPrice]})}),d.jsxs("div",{className:"description w-full h-full text-black opacity-60 flex  gap-2 ",children:[d.jsx("h1",{children:"Description : "}),d.jsx("span",{className:"",children:e&&e.medicineId.description})]}),d.jsx("div",{className:"w-full h-[10vh] flex  py-1 mb-2 pr-[40%]",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",children:"Order Medicine"})})]})]})})}function cIe(e){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 2H6a2 2 0 0 0-2 2v3H2v2h2v2H2v2h2v2H2v2h2v3a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm-8 2.999c1.648 0 3 1.351 3 3A3.012 3.012 0 0 1 13 11c-1.647 0-3-1.353-3-3.001 0-1.649 1.353-3 3-3zM19 18H7v-.75c0-2.219 2.705-4.5 6-4.5s6 2.281 6 4.5V18z"},child:[]}]})(e)}function rT(e){return Wn({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M0 64C0 46.3 14.3 32 32 32l64 0 16 0 176 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-56.2 0c9.6 14.4 16.7 30.6 20.7 48l35.6 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-35.6 0c-13.2 58.3-61.9 103.2-122.2 110.9L274.6 422c14.4 10.3 17.7 30.3 7.4 44.6s-30.3 17.7-44.6 7.4L13.4 314C2.1 306-2.7 291.5 1.5 278.2S18.1 256 32 256l80 0c32.8 0 61-19.7 73.3-48L32 208c-17.7 0-32-14.3-32-32s14.3-32 32-32l153.3 0C173 115.7 144.8 96 112 96L96 96 32 96C14.3 96 0 81.7 0 64z"},child:[]}]})(e)}function Rb(e){return Wn({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"},child:[]}]})(e)}function Uw(e){return Wn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-96 55.2C54 332.9 0 401.3 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7c0-81-54-149.4-128-171.1l0 50.8c27.6 7.1 48 32.2 48 62l0 40c0 8.8-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16s7.2-16 16-16l0-24c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 24c8.8 0 16 7.2 16 16s-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16l0-40c0-29.8 20.4-54.9 48-62l0-57.1c-6-.6-12.1-.9-18.3-.9l-91.4 0c-6.2 0-12.3 .3-18.3 .9l0 65.4c23.1 6.9 40 28.3 40 53.7c0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.4 16.9-46.8 40-53.7l0-59.1zM144 448a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"},child:[]}]})(e)}function uIe(){return d.jsxs("div",{className:"screen w-full h-full flex flex-row gap-4",children:[d.jsxs("div",{className:"sideOptions w-[18%] p-4 h-full grid grid-cols-1 gap-6 border shadow-lg shadow-emerald-300",children:[d.jsxs(nr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/details",children:[d.jsx(qC,{className:"w-[3vw] h-[3vh]"}),"Personal Details",d.jsx("span",{})," "]}),d.jsxs(nr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/contactDetails",children:[d.jsx(cIe,{className:"w-[3vw] h-[3vh]"}),"Contact Details",d.jsx("span",{})]}),d.jsxs(nr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/bookings",children:[d.jsx(Uw,{className:"w-[3vw] h-[3vh]"}),"Booking Details",d.jsx("span",{})]}),d.jsxs(nr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/medicine",children:[d.jsx(Uw,{className:"w-[3vw] h-[3vh]"}),"Medicines",d.jsx("span",{})]}),d.jsxs(nr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/test",children:[d.jsx(Uw,{className:"w-[3vw] h-[3vh]"}),"Lab Tests",d.jsx("span",{})]}),d.jsxs(nr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/prescription",children:[d.jsx(Uw,{className:"w-[3vw] h-[3vh]"}),"Prescriptions",d.jsx("span",{})]})]}),d.jsx("div",{className:"content w-[60%] flex flex-1 flex-col overflow-y-auto",children:d.jsx(oi,{})})]})}const dIe=Vi().shape({firstName:Ut(),lastName:Ut(),bloodGroup:Ut().matches(/^(A|B|AB|O)[+-]$/,"Not a valid Blood Group"),weight:Ut().matches(/^[1-9][0-9]{0,5}(\.[0-9]{1,2})?$/,"Valid weight"),height:Ut().matches(/^[1-9][0-9]{0,5}(\.[0-9]{1,2})?$/,"Valid height")}),hIe=Vi().shape({place:Ut(),state:Ut(),country:Ut(),pincode:Ut().matches(/[1-9][0-9]{5}$/,"Valid Number"),district:Ut(),phone:YK().of(Ut().matches(/^[1-9][0-9]{9}$/,"not valid number"))});Vi().shape({password:Ut(),confirmPassword:Ut()});function fIe(){T.useState(void 0);const[e,t]=T.useState(void 0),r=Sr({initialValues:{firstName:"",lastName:"",bloodGroup:"",weight:"",height:"",profileImage:""},validationSchema:dIe,onSubmit:async(a,o)=>{console.log(a),await GCe(a)&&i()}}),n=a=>{const o=a.target.files[0],s=new FileReader;s.onload=l=>{const c=l.target.result;t(c),r.setFieldValue("profileImage",o)},s.readAsDataURL(o)},i=async()=>{const a=await UQ();console.log(`temp ${JSON.stringify(a)}`),a&&(await r.setFieldValue("firstName",a.firstName),r.setFieldValue("lastName",a.lastName),r.setFieldValue("bloodGroup",a.bloodGroup),r.setFieldValue("weight",a.weight),r.setFieldValue("height",a.height),r.setFieldValue("profileImage",a.profileImage))};return T.useEffect(()=>{i()},[]),console.log(r.values),d.jsxs("form",{onSubmit:r.handleSubmit,className:"screen w-full h-full mt-5 flex flex-col gap-4",children:[d.jsxs("div",{className:"image w-full h-auto flex gap-4 justify-start pl-[20vw]",children:[d.jsx("img",{src:e||r.values.profileImage,className:"rounded-full w-[20vh] h-[20vh]"}),d.jsx("div",{className:"w-full h-auto flex flex-1 items-center ",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{id:"id_profileImage",name:"profileImage",helperText:"upload image",onChange:n,onBlur:r.handleBlur,...r.touched.profileImage&&(r.errors.profileImage?{color:"error",helperText:`${r.errors.profileImage}`}:{color:"success"})})})})]}),d.jsx("div",{className:"w-full h-full mt-10 flex justify-center  ",children:d.jsxs("div",{className:"w-[60%] h-full flex flex-col gap-4",children:[d.jsxs("div",{className:"w-full  grid grid-cols-2 gap-2 ",children:[d.jsx(ie,{variant:"filled",name:"firstName",label:"First Name",value:r.values.firstName,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.firstName&&(r.errors.firstName?{color:"error",helperText:`${r.errors.firstName}`}:{color:"success"})}),d.jsx(ie,{variant:"filled",name:"lastName",label:"Last Name",value:r.values.lastName,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.lastName&&(r.errors.lastName?{color:"error",helperText:`${r.errors.lastName}`}:{color:"success"})})]}),d.jsx(ie,{variant:"filled",name:"bloodGroup",label:"Blood Group",className:"w-full ",value:r.values.bloodGroup,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.bloodGroup&&(r.errors.bloodGroup?{color:"error",helperText:`${r.errors.bloodGroup}`}:{color:"success"})}),d.jsx(ie,{variant:"filled",name:"weight",label:"weight",className:"w-full ",value:r.values.weight,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.weight&&(r.errors.weight?{color:"error",helperText:`${r.errors.weight}`}:{color:"success"})}),d.jsx(ie,{variant:"filled",name:"height",label:"height",className:"w-full ",value:r.values.height,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.height&&(r.errors.height?{color:"error",helperText:`${r.errors.height}`}:{color:"success"})}),d.jsx("button",{type:"submit",className:"w-[full] h-[5vh] border font-medium rounded-[5%] bg-orange-500 p-2 ",children:"Save"})]})})]})}const pIe={firstName:"",lastName:"",profileImage:"",weight:"",height:""},mZ=vg({name:"doctor",initialState:pIe,reducers:{setDoctor(e,t){e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,e.profileImage=t.payload.profileImage,e.weight=t.payload.weight,e.height=t.payload.height}}}),{setDoctor:um}=mZ.actions,mIe=mZ.reducer,gZ="https://hcompanion.onrender.com/api",yZ=async({token:e})=>{try{const t=await ce.get(`${gZ}/doctor/getBasicDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.userData}catch(t){return t.response.status=="401"&&Q.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}},vZ=async({token:e})=>{try{const t=await ce.get(`${gZ}/doctor/profile/viewDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.doctorDetails}catch(t){return console.log(t),t.response.status=="401"&&Q.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),!1}};nt.extend($i);const gIe="wss://hcompanion.onrender.com",yIe=async({userId:e})=>{const t=new WebSocket(gIe);t.onopen=()=>{console.log("connected to websocket"),t.send(JSON.stringify({type:"register",clientId:e}))},t.onmessage=r=>{const n=JSON.parse(r==null?void 0:r.data);if(n.type=="meetingReminder"){const i=nt().diff(nt(`${n.booking.startTime}`,"H:mm A"),"minutes");Math.abs(i)<=60&&Q.fire(`Meeting in ${Math.abs(i)} minutes`,"","warning")}}};function vIe(){const e=Zt(),t=fc(),{username:r,email:n,role:i,isLoggedIn:a}=Yr(l=>l.user),o=Yr(l=>l.doctor),s=async()=>{if(sessionStorage.getItem("token")){const l=await yZ({token:sessionStorage.getItem("token")});if(l){const c=await vZ({token:sessionStorage.getItem("token")});(c==null?void 0:c.approvalStatus)=="0"?e("/doctor/approval/form"):(c==null?void 0:c.approvalStatus)=="1"&&e("/doctor/approval/submitted"),await yIe({userId:l._id}),console.log(c),t(ai({username:l.username,email:l.email,role:l.role,isLoggedIn:!0})),t(um({firstName:c.firstName,lastName:c.lastName,profileImage:c.profileImage,weight:c.weight,height:c.height,profileImage:c.profileImage}))}else ai({}),um({})}};return console.log(o),T.useEffect(()=>{s()},[]),d.jsx("div",{className:"navBar w-full h-full flex flex-col",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 p-4 bg-slate-800 bg-opacity-90 rounded-tr-[3%]  ",children:[d.jsxs("div",{className:"w-full h-[15vh] flex flex-row items-center gap-4  p-1  ",children:[d.jsx("img",{src:o.profileImage,className:"rounded-full w-[4vw] h-[100%]"}),d.jsxs("div",{className:"h-full w-full pl-4 flex flex-1 flex-col justify-center gap-2 bg-white bg-opacity-40 rounded-lg ",children:[d.jsx("h2",{className:"text-lg font-bold",children:o&&o.firstName?o.firstName:r}),d.jsx("span",{className:" font-sm",children:"Doctor"})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(ie,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"options h-full w-full mt-10 flex flex-col gap-4 font-medium text-white ",children:[d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/home")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorSlotSetting.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",id:"id_navSlot",onClick:()=>{e("/doctor/slot")},children:"Slot"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorBookings.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/bookings")},children:"Bookings"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/profile")},children:"Profile"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),t(ai({})),t(um({})),e("/")},children:"sign out"})]})]})]})})}function bIe(){return d.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[d.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:d.jsx(vIe,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:d.jsx(oi,{})})]})}nt.extend($i);const wIe=nt(),$y=[];for(var SI=0;SI<=5;SI++)$y.push(wIe.add(SI,"day").format("D MMM, dddd YYYY").toString());nt.extend($i);nt();const EIe=["9:00 AM","11:00 AM","1:00 PM","3:00 PM","5:00 PM","7:00 PM"],fj="https://hcompanion.onrender.com/api",_Ie=sessionStorage.getItem("token"),SIe=async({startTime:e,slotDate:t})=>{try{const r=await ce.post(`${fj}/doctor/slot/add`,{startTime:e,slotDate:t},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(r.data),r.data.addedSlot&&Q.fire({icon:"success",text:"Added Slot"}),r.data.addedSlot}catch(r){return console.log(`error ${r}`),!1}},mF=async({slotDate:e})=>{var t;try{console.log("token in slot",_Ie);const r=await ce.post(`${fj}/doctor/slot/viewSlots`,{slotDate:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(r.data),r.data.slots}catch(r){return console.log(r),((t=r.response)==null?void 0:t.status)=="401"&&Q.fire({html:`<b>${r.response.data.message}</b>`,title:"Session Out"}),r.response.status=="400"&&r.response.data.invalidToken&&Q.fire({html:`<b>${r.response.status.message}</b>`,title:"Session Out"}),!1}},TIe=async({bookingId:e})=>{try{const t=await ce.post(`${fj}/doctor/slot/removeSlot`,{bookingId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),Q.fire({icon:"success",text:"Removed the Slot"}),!0}catch(t){return console.log(`error ${t}`),!1}};nt.extend($i);function CIe(){const[e,t]=T.useState(void 0),[r,n]=T.useState([]);Yr(o=>o.doctor);const i=async()=>{await t($y[0]);const o=await mF({slotDate:$y[0]});console.log(o),await n(o)},a=async o=>{await t(o);const s=await mF({slotDate:o});console.log(s),await n(s)};return T.useEffect(()=>{t($y[0]),i()},[]),d.jsx("div",{className:"w-full h-full flex p-4",children:d.jsxs("div",{className:"w-full h-full flex flex-row gap-8",children:[d.jsxs("div",{className:"w-[20%] h-auto p-4 flex flex-col gap-2 border shadow-lg shadow-emerald-400 bg-black bg-opacity-30 rounded-2xl ",children:[d.jsx("h1",{className:"font-bold",children:"Dates"}),d.jsx("div",{className:"dates w-full h-[10%] grid grid-cols-1 justify-items-start gap-4 ",children:$y.map((o,s)=>d.jsx("button",{className:"p-2 w-full h-full font-medium bg-emerald-400 bg-opacity-50 border flex justify-start pl-5 ",id:`id_slotDate_${s}`,onClick:()=>a(o),children:o},s))})]}),d.jsxs("div",{className:"w-[80%] h-full bg-black bg-opacity-30 rounded-xl  pt-10 pl-8 pr-5 flex flex-col overflow-y-scroll",children:[d.jsxs("h2",{className:"font-bold flex flex-row justify-evenly",children:["Slots ",d.jsx("span",{children:e||"date"})]}),d.jsx("div",{className:"w-full mt-10 gap-4 flex flex-col  p-8 ",children:EIe.map((o,s)=>d.jsx("div",{className:"w-auto h-auto bg-white rounded-lg",children:nt().isBefore(nt(nt(`${e} ${nt(o,"h:mm A").format("H:mm A")}`,"D MMM, dddd YYYY H:mm A").format("D MMM, dddd YYYY H:mm A"),"D MMM, dddd YYYY H:mm A"))&&(r&&r.length>0&&r.some(l=>l.startTime==nt(o,"h:mm A").format("H:mm A").toString())?r.find(l=>l.startTime==nt(o,"h:mm A").format("H:mm A").toString()).bookedStatus==1?d.jsx(RIe,{time:o,onLoad:i,timeIndex:s,slot:r.find(l=>l.startTime==nt(o,"h:mm A").format("H:mm A").toString())}):d.jsx(IIe,{timeIndex:s,time:o,slot:r.find(l=>l.startTime==nt(o,"h:mm A").format("H:mm A").toString()),onLoad:i}):d.jsx(xIe,{timeIndex:s,time:o,selectedDate:e,onLoad:i}))},s))})]})]})})}function xIe(e){const{timeIndex:t}=e,r=async()=>{console.log(`slot date ${e.slotDate}`),await SIe({slotDate:e.selectedDate,startTime:nt(e.time,"h:mm A").format("H:mm A").toString()})&&e.onLoad()};return d.jsxs("div",{className:"w-full h-[15vh] p-4 flex flex-row gap-2 border rounded-lg shadow-lg",children:[d.jsx("div",{className:"w-[20%] flex items-center justify-center border shadow-md",children:d.jsx("span",{className:"text-emerald-400 font-medium text-lg",children:e.time})}),d.jsx("div",{className:"flex flex-1 flex-row gap-10 items-center pl-10 border shadow-md",children:d.jsx("button",{className:"w-[30%] h-[60%] bg-green-400 font-medium border ",id:`id_btnaddslot_${t}`,onClick:r,children:"Add"})})]})}function RIe(e){return d.jsxs("div",{className:"w-full h-[20vh] p-4 bg-red-400 bg-opacity-50 flex flex-row gap-2 border rounded-lg shadow-lg",children:[d.jsx("div",{className:"w-[20%] flex items-center justify-center  shadow-md",children:d.jsx("span",{className:"text-emerald-400 font-medium text-lg",children:e.time})}),d.jsxs("div",{className:"w-full h-full flex flex-1 flex-row gap-10 items-center pl-10 py-2 shadow-md",children:[d.jsx("button",{className:"w-[30%] h-[60%] bg-red-400 font-medium border ",children:"Reschedule"}),d.jsxs("div",{className:"w-full h-full grid grid-cols-1 justify-items-center pt-2 gap-2 ",children:[d.jsx("button",{className:"w-[70%] h-full bg-green-400 font-medium ",children:"View Booking Details "}),d.jsx("span",{className:"w-[70%] h-full  text-center bg-blue-500 flex justify-center items-center text-white font-medium text-md",children:e.slot.patientId.firstName})]})]})]})}function IIe(e){const{timeIndex:t}=e,r=async()=>{await TIe({bookingId:e.slot._id})&&e.onLoad()};return d.jsxs("div",{className:"w-full h-[15vh] p-4 bg-orange-400 bg-opacity-50 flex flex-row gap-2 border rounded-lg shadow-lg",children:[d.jsx("div",{className:"w-[20%] flex items-center justify-center border shadow-md",children:d.jsx("span",{className:"text-emerald-400 font-medium text-lg",children:e.time})}),d.jsx("div",{className:"flex flex-1 flex-row items-center pl-10 border shadow-md",children:d.jsx("button",{className:"w-[30%] h-[60%] bg-red-400 font-medium border ",id:`id_btnRemoveSlot_${t}`,onClick:r,children:"Remove"})})]})}function bZ(e){var r;const t=Zt();return d.jsxs("div",{className:"w-auto h-[25vh] flex flex-row gap-1 hover:bg-blue-400 hover:bg-opacity-40 border shadow-xl p-2 rounded-lg",children:[d.jsx("div",{className:"w-[30%] h-full flex gap-4 ",children:d.jsx("img",{src:e.doctor.profileImage,className:"w-full h-full rounded-md"})}),d.jsxs("div",{className:"details w-full h-full pl-2 pt-5 flex flex-row  gap-4 ",children:[d.jsxs("div",{className:"w-[50%] h-full pl-10 pt-1 flex flex-col  gap-4",children:[d.jsx("div",{className:" w-auto",children:d.jsx("span",{className:"text-sm font-medium opacity-40",children:(r=e==null?void 0:e.doctor)==null?void 0:r.specialization})}),d.jsx("span",{className:"text-xl font-medium",children:`Dr. ${`${e.doctor.firstName} ${e.doctor.lastName}`||e.doctor.userId.username}`}),d.jsx("span",{className:"font-sm opacity-60",children:"16 years of experience"})]}),d.jsxs("div",{className:"w-[50%] h-full pb-8 flex flex-col gap-10 justify-end pr-5",children:[d.jsxs("span",{className:"text-lg font-bold opacity-80 flex justify-end items-center gap-2",children:[d.jsx("span",{className:"font-medium ",children:"consultation fee"}),d.jsx(xg,{}),d.jsx("span",{children:e.doctor.bookingPrice})]}),d.jsxs("div",{className:"flex gap-4 w-full h-[5vh]",children:[d.jsx("button",{className:"w-full h-[5vh] font-medium border rounded-[5%] bg-orange-500 p-2 hover:bg-opacity-50 text-sm",onClick:()=>t(`/patient/doctors/${e.doctor._id}`),children:"Book Consult"}),d.jsx("button",{className:"w-full h-[5vh] font-medium  text-sm border rounded-[5%] bg-orange-500 p-2 hover:bg-opacity-50",onClick:n=>t(`/patient/reviews?doctorId=${e.doctor._id}`),children:"View Comments"})]})]})]})]})}const pj="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const NIe=async()=>{try{const e=await ce.get(`${pj}/patient/doctors/allDoctors`);return console.log(e.data),e.data.doctors}catch(e){return console.log(e),e.response.status=="401"&&Q.fire({html:`<b>${e.response.status.message}</b>`,title:"Session Out"}),!1}},gF=async({slotDate:e,doctorId:t})=>{try{const r=await ce.post(`${pj}/patient/doctors/freeSlots`,{slotDate:e,doctorId:t});return console.log(r.data),r.data.slots}catch(r){return console.log(r),!1}},wZ=async({doctorId:e})=>{try{const t=await ce.post(`${pj}/patient/doctors/doctorDetails`,{doctorId:e});return console.log(t.data),t.data.doctor}catch(t){return console.log(t),!1}};function AIe(){Zt();const[e,t]=T.useState([]),r=async()=>{const n=await NIe();await t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-screen flex flex-col",children:d.jsxs("div",{className:"w-full h-full flex flex-row gap-10 pl-10",children:[d.jsx("div",{className:"w-[60%] h-full flex flex-1 flex-col flex-1 gap-10",children:e&&e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-auto h-auto cursor-pointer ",id:`id_doctor_${i}`,children:d.jsx(bZ,{doctor:n})},i))}),d.jsx("div",{className:"w-[40%] h-full flex ",children:d.jsx(oi,{})})]})})}nt.extend($i);const OIe=nt(),EZ=[];for(var TI=0;TI<=5;TI++)EZ.push(OIe.add(TI,"day").format("D MMM, dddd YYYY").toString());function Ib(e){return Wn({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M960 95.888l-256.224.001V32.113c0-17.68-14.32-32-32-32s-32 14.32-32 32v63.76h-256v-63.76c0-17.68-14.32-32-32-32s-32 14.32-32 32v63.76H64c-35.344 0-64 28.656-64 64v800c0 35.343 28.656 64 64 64h896c35.344 0 64-28.657 64-64v-800c0-35.329-28.656-63.985-64-63.985zm0 863.985H64v-800h255.776v32.24c0 17.679 14.32 32 32 32s32-14.321 32-32v-32.224h256v32.24c0 17.68 14.32 32 32 32s32-14.32 32-32v-32.24H960v799.984zM736 511.888h64c17.664 0 32-14.336 32-32v-64c0-17.664-14.336-32-32-32h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32zm0 255.984h64c17.664 0 32-14.32 32-32v-64c0-17.664-14.336-32-32-32h-64c-17.664 0-32 14.336-32 32v64c0 17.696 14.336 32 32 32zm-192-128h-64c-17.664 0-32 14.336-32 32v64c0 17.68 14.336 32 32 32h64c17.664 0 32-14.32 32-32v-64c0-17.648-14.336-32-32-32zm0-255.984h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32h64c17.664 0 32-14.336 32-32v-64c0-17.68-14.336-32-32-32zm-256 0h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32h64c17.664 0 32-14.336 32-32v-64c0-17.68-14.336-32-32-32zm0 255.984h-64c-17.664 0-32 14.336-32 32v64c0 17.68 14.336 32 32 32h64c17.664 0 32-14.32 32-32v-64c0-17.648-14.336-32-32-32z"},child:[]}]})(e)}function kIe(e){return Wn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M8 13C7.44772 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11C8.55228 11 9 11.4477 9 12C9 12.5523 8.55228 13 8 13Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M8 17C7.44772 17 7 16.5523 7 16C7 15.4477 7.44772 15 8 15C8.55228 15 9 15.4477 9 16C9 16.5523 8.55228 17 8 17Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M11 16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M16 17C15.4477 17 15 16.5523 15 16C15 15.4477 15.4477 15 16 15C16.5523 15 17 15.4477 17 16C17 16.5523 16.5523 17 16 17Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M11 12C11 12.5523 11.4477 13 12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M16 13C15.4477 13 15 12.5523 15 12C15 11.4477 15.4477 11 16 11C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9H16C16.5523 9 17 8.55228 17 8C17 7.44772 16.5523 7 16 7H8Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M6 3C4.34315 3 3 4.34315 3 6V18C3 19.6569 4.34315 21 6 21H18C19.6569 21 21 19.6569 21 18V6C21 4.34315 19.6569 3 18 3H6ZM18 5H6C5.44772 5 5 5.44772 5 6V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V6C19 5.44772 18.5523 5 18 5Z",fill:"currentColor"},child:[]}]})(e)}const _Z="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const mj=async({amount:e})=>{try{return(await ce.post(`${_Z}/patient/doctors/slots/payment/createOrder`,{amount:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.order}catch(t){return console.log(t),(t.response.status="401")?Q.fire({icon:"error",text:"Login for booking"}):(t.response.status=invalidToken)&&Q.fire({icon:"error",text:"Login for booking"}),!1}},PIe=async({razorpay_payment_id:e,razorpay_order_id:t,razorpay_signature:r,order:n,doctorId:i,slotDetails:a})=>{try{const o=sessionStorage.getItem("token"),s=await ce.post(`${_Z}/patient/doctors/slots/payment/paymentVerification`,{razorpay_payment_id:e,razorpay_order_id:t,razorpay_signature:r,order:n,doctorId:i,slotDetails:a},{headers:{Authorization:`bearer ${o}`}});return!0}catch(o){return console.log(o),(o.response.status="401")?Q.fire({icon:"error",text:"Login for booking"}):(o.response.status=invalidToken)?Q.fire({icon:"error",text:"Login Again"}):(o.response.status="500")&&Q.fire({icon:"error",text:"Server issue please try later"}),!1}},DIe=Vi().shape({amount:Ut().matches(/^[1-9][0-9]{0,5}(\.[0-9]{1,2})?$/,"Invalid amount")}),Rf="https://hcompanion.onrender.com/api",LIe=sessionStorage.getItem("token"),jIe=async()=>{try{return(await ce.get(`${Rf}/patient/tests/getAllTestAvailable`)).data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):e.status=="401"?Q.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorTestPresent&&Q.fire({icon:"warning",text:"Test can't be found at database"}),!1}},MIe=async({testId:e})=>{try{const t=await ce.post(`${Rf}/patient/tests/testDetails`,{testId:e});return console.log(t.data),t.data.testAndLabs}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):t.status=="401"?Q.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&Q.fire({icon:"warning",text:"Test can't be found at database"}),!1}},UIe=async()=>{try{const e=await ce.get(`${Rf}/patient/doctor/test/requests`,{headers:{Authorization:`bearer ${LIe}`}});return console.log(e.data),e.data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):e.status=="401"?Q.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorNoPatient&&Q.fire({icon:"warning",text:"Patient Can't be found"}),!1}},FIe=async({razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,order:n,labId:i,testOrderId:a})=>{try{const o=await ce.post(`${Rf}/patient/doctor/test/requests/order`,{razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,order:n,labId:i,testOrderId:a},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return!0}catch(o){return console.log(o),o.status=="500"&&o.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):o.status=="400"&&o.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):o.status=="401"?Q.fire({icon:"warning",text:"Log In"}):o.status=="404"&&o.response.data.errorNoPatient&&Q.fire({icon:"warning",text:"Patient Can't be found"}),!1}},VIe=async()=>{try{const e=await ce.get(`${Rf}/patient/doctor/test/requests/ordered`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("ordered tests",e.data.orders),e.data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):e.status=="401"?Q.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorNoPatient&&Q.fire({icon:"warning",text:"Patient Can't be found"}),!1}},BIe=async({testOrderId:e})=>{try{const t=await ce.post(`${Rf}/patient/doctor/test/requests/complete/result`,{testOrderId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.result}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):t.status=="401"?Q.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&Q.fire({icon:"warning",text:"Test can't be found at database"}),!1}},$Ie=async({testOrderId:e})=>{try{return(await ce.post(`${Rf}/patient/doctor/test/requests/completed/orderDetails`,{testOrderId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.order}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):t.status=="401"?Q.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&Q.fire({icon:"error",text:"Issue at the Database"}),!1}},gj=void 0,HIe=(e,t)=>{const{order:r,patient:n,user:i,doctor:a}=e;return{key:gj,amount:e.amount*1e3,currency:"INR",name:"Health Companion",description:"Book Patient",image:"/logo.png",order_id:e.order.id,handler:async function(o){console.log("enterd payment handler"),await PIe({razorpay_order_id:o.razorpay_order_id,razorpay_payment_id:o.razorpay_payment_id,razorpay_signature:o.razorpay_signature,doctorId:a._id,order:r,slotDetails:t})?Q.fire({icon:"success",text:"The slot has been booked"}):Q.fire({icon:"error",text:"The slot has been booked"})},prefill:{name:e.patient.firstName,email:e.user.email,contact:e.user.phone||"7902249173","card[number]":"4111 1111 1111 1111","card[expiry]":"12/30","card[cvv]":"123"},notes:{address:"Health Companion Office"},theme:{color:"#3399cc"}}},zIe=(e,t)=>{var i,a,o,s;const{order:r,medicineOrder:n}=e;return{key:gj,amount:e.amount*1e3,currency:"INR",name:"Health Companion",description:"Book Medicine",image:"/logo.png",order_id:e.order.id,handler:async function(l){await aIe({razorpay_order_id:l.razorpay_order_id,razorpay_payment_id:l.razorpay_payment_id,razorpay_signature:l.razorpay_signature,doctorId:n.pharmacyInventoryId.la,order:r,pharmacyId:n.pharmacyInventoryId.pharmacyId._id,pharmacyInventoryId:n.pharmacyInventoryId._id})&&Q.fire("Medicine has been ordere","","success")},prefill:{name:n.patientId.firstName,email:(a=(i=n==null?void 0:n.patientId)==null?void 0:i.userId)==null?void 0:a.email,contact:(s=(o=n==null?void 0:n.patientId)==null?void 0:o.userId)==null?void 0:s.phone},notes:{address:"Health Companion Office"},theme:{color:"#3399cc"}}},GIe=(e,t)=>{var i,a,o,s;const{order:r,testOrder:n}=e;return{key:gj,amount:e.amount*1e3,currency:"INR",name:"Health Companion",description:"Book Test",image:"/logo.png",order_id:e.order.id,handler:async function(l){await FIe({razorpay_order_id:l.razorpay_order_id,razorpay_payment_id:l.razorpay_payment_id,razorpay_signature:l.razorpay_signature,labId:n.labTestId.labId._id,order:r,testOrderId:n._id})&&Q.fire("Test has been ordered","","success")},prefill:{name:n.patientId.firstName,email:(a=(i=n==null?void 0:n.patientId)==null?void 0:i.userId)==null?void 0:a.email,contact:(s=(o=n==null?void 0:n.patientId)==null?void 0:o.userId)==null?void 0:s.phone},notes:{address:"Health Companion Office"},theme:{color:"#3399cc"}}};nt.extend($i);function WIe(){const[e,t]=T.useState(nt().format("D MMM, dddd YYYY").toString()),[r,n]=T.useState(void 0),[i,a]=T.useState(void 0),[o,s]=T.useState([]),[l,c]=T.useState(void 0),[u,h]=T.useState(!1),{doctorId:f}=ug();Yr(y=>y.patient),fc();const p=async()=>{const y=await wZ({doctorId:f});await c(y);const v=nt().format("D MMM, dddd YYYY").toString();t(v);const b=await gF({slotDate:v,doctorId:f});s(b)};T.useEffect(()=>{p()},[f]);const m=async y=>{const v=JSON.parse(y.target.value);console.log(`slot ${JSON.stringify(v)}`),await a(v),await n(nt(v.startTime,"H:mm A").format("h:mm A").toString()),await h(!u)},g=async y=>{y=nt(y,"D ,ddd").format("D MMM, dddd YYYY").toString(),t(y);const v=await gF({slotDate:y,doctorId:f});s(v)};return d.jsxs("div",{className:"w-full h-full",children:[u&&d.jsx(KIe,{openModal:u,setOpenModal:h,time:r,slotDate:e,selectedSlot:i,doctor:l,slotTime:r}),d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 pt-5 overflow-y-scroll pr-2 ",children:[d.jsxs("div",{className:"w-full h-auto px-8 bg-black bg-opacity-20 flex flex-col gap-4 border py-5 rounded-tl-xl shadow-xl",children:[d.jsxs("div",{className:"date w-full h-[10vh] bg-blue-500 rounded-md  flex gap-6 items-center",children:[d.jsx(Ib,{className:"h-full w-[6vh]  p-2"}),d.jsx("h2",{className:"text-white font-medium ",children:"Dates"}),d.jsxs("div",{className:"flex flex-1 gap-5 justify-end w-full h-full items-center pr-5",children:[d.jsx("span",{className:"text-white text-md font-medium",children:l&&l.userId.username}),d.jsx("img",{src:l&&l.profileImage,alt:"profile",className:"w-[3vw] h-[7vh] rounded-full"})]})]}),d.jsx("div",{className:"w-full h-auto flex ",children:d.jsx("div",{className:"w-full h-auto grid grid-cols-3 justify-items-center gap-4 p-1",children:EZ.map((y,v)=>d.jsx("button",{className:"w-[10vw] h-[8vh] font-medium text-white bg-slate-700 bg-opacity-70 border shadow-md rounded-lg p-6",id:`id_slotDate_${v}`,onClick:()=>g(y),children:nt(y,"D MMM, dddd YYYY").format("DD ,ddd").toString()},v))})})]}),d.jsxs("div",{className:"w-full h-full bg-black bg-opacity-20 flex flex-col gap-10 mt-5 p-5 border shadow-lg rounded-lg",children:[d.jsxs("div",{className:"w-full h-[10vh] bg-orange-500 text-white flex items-center gap-4 justify-evenly  rounded-md pl-2",children:[d.jsx(hZ,{className:"w-[5vw] h-[5vh]"}),d.jsx("h2",{className:"text-lg font-medium",children:e&&e})]}),d.jsx("div",{className:"w-full h-full grid grid-cols-3 justify-items-center content-start",children:o&&o.length>0&&o.map((y,v)=>d.jsx("button",{value:JSON.stringify(y),className:"w-auto h-auto border p-6 rounded-lg bg-green-400 font-medium shadow-lg",id:`id_slotTime_${v}`,onClick:m,children:nt(y.startTime,"H:mm A").format("h:mm A").toString()},v))})]})]})]})}function KIe(e){const{setOpenModal:t,openModal:r,doctor:n,time:i,slotDate:a,selectedSlot:o}=e,s=Yr(u=>u.patient),l=Yr(u=>u.user),c=Sr({initialValues:{amount:500,patientdDescription:"",slotId:o._id},validationSchema:DIe,onSubmit:async(u,h)=>{const f=await mj({amount:n.bookingPrice});if(await console.log("order",f),f){const p=await HIe({order:f,patient:s,user:l,doctor:n},u);try{const m=new Razorpay(p);console.log("reached before razor pay"),await m.open()}catch(m){console.log("error during payment",m)}}t(!1)}});return T.useEffect(()=>{c.setFieldValue("slotId",o._id),c.setFieldValue("amount",n.bookingPrice)},[]),d.jsx("div",{children:d.jsxs(Lw,{show:r,onClose:()=>t(!1),children:[d.jsx(Lw.Header,{children:"Slot Details"}),d.jsxs(Lw.Body,{className:"h-auto flex flex-col gap-4",children:[d.jsx("div",{className:"w-full h-[15vh] flex justify-end pr-5",children:d.jsxs("div",{className:"flex gap-5 items-center",children:[d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("span",{className:"text-lg font-medium",children:n&&n.userId.username}),d.jsx("span",{className:"text-sm font-medium opacity-50",children:"Cardiology"})]}),d.jsx("img",{src:n.profileImage,alt:"profile",className:"h-[9vh] w-[4vw] rounded-full"})]})}),d.jsxs("div",{className:"flex gap-4 h-auto items-center bg-blue-500 p-2 text-white",children:[d.jsx(kIe,{className:"h-full w-[3vw]"}),d.jsx("span",{className:"text-xl font-medium h-auto",children:e.slotDate})]}),d.jsxs("div",{className:"flex gap-4 h-auto items-center bg-orange-500 p-2 text-white",children:[d.jsx(hZ,{className:"h-full w-[3vw]"}),d.jsx("span",{className:"text-md font-medium h-auto",children:e.slotTime})]}),d.jsxs("div",{className:"h-[50vh]  w-full flex flex-col gap-2",children:[d.jsx("h2",{className:"font-medium opacity-40",children:"Description (Optional)"}),d.jsx("textarea",{name:"description",onChange:u=>{c.setFieldValue("patientDescription",u.target.value)},id:"id_description",placeholder:"Write down a short description on the purpose of the booking",className:"flex flex-1  "})]})]}),d.jsxs(Lw.Footer,{className:"gap-x-5 w-full flex flex-row",children:[d.jsx("button",{type:"submit",onClick:c.handleSubmit,className:"w-[40%] border rounded-[5%] bg-orange-500 p-2",id:"id_btnBookSlot",children:"Book"}),d.jsx("button",{type:"button",className:"w-[40%] border rounded-[5%] bg-red-500 p-2",onClick:()=>t(!1),children:"cancel"})]})]})})}sessionStorage.getItem("token");const SZ=async({diseaseName:e})=>{try{const t=await ce.post("http://localhost:8000/predict",{"Medical Condition":e.toLowerCase(),"Blood Type":"O+",Gender:"Male"});return console.log(t.data),t.data.doctor}catch(t){console.log(t)}},qIe=async({diseaseName:e})=>{try{const t=await ce.post("http://localhost:9000/predictMedicine",{disease:"asthma",symptoms:"high cholesterol",gender:"male"});return console.log("medicines",t.data),t.data.recommended_medicines}catch(t){console.log(t)}},YIe=async({medicineId:e})=>{try{return(await ce.post("http://localhost:5000/api/patient/treatmentPlan/medicineDetails",{medicineId:e})).data.medicine}catch(t){console.log(t)}};var yF;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(yF||(yF={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vF;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(vF||(vF={}));var bF;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(bF||(bF={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=["user","model","function","system"];var EF;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(EF||(EF={}));var _F;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(_F||(_F={}));var SF;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(SF||(SF={}));var TF;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(TF||(TF={}));var w0;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(w0||(w0={}));var CF;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(CF||(CF={}));var xF;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(xF||(xF={}));var RF;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(RF||(RF={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Yf extends Ia{constructor(t,r){super(t),this.response=r}}class TZ extends Ia{constructor(t,r,n,i){super(t),this.status=r,this.statusText=n,this.errorDetails=i}}class pd extends Ia{}class CZ extends Ia{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XIe="https://generativelanguage.googleapis.com",JIe="v1beta",QIe="0.24.0",ZIe="genai-js";var sf;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(sf||(sf={}));class eNe{constructor(t,r,n,i,a){this.model=t,this.task=r,this.apiKey=n,this.stream=i,this.requestOptions=a}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||JIe;let a=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||XIe}/${n}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function tNe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${ZIe}/${QIe}`),t.join(" ")}async function rNe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",tNe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(i){throw new pd(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${i.message}`)}for(const[i,a]of n.entries()){if(i==="x-goog-api-key")throw new pd(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new pd(`Header name ${i} can only be set using the apiClient field`);r.append(i,a)}}return r}async function nNe(e,t,r,n,i,a){const o=new eNe(e,t,r,n,a);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},sNe(a)),{method:"POST",headers:await rNe(o),body:i})}}async function Nb(e,t,r,n,i,a={},o=fetch){const{url:s,fetchOptions:l}=await nNe(e,t,r,n,i,a);return iNe(s,l,o)}async function iNe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(i){aNe(i,e)}return n.ok||await oNe(n,e),n}function aNe(e,t){let r=e;throw r.name==="AbortError"?(r=new CZ(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof TZ||e instanceof pd||(r=new Ia(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function oNe(e,t){let r="",n;try{const i=await e.json();r=i.error.message,i.error.details&&(r+=` ${JSON.stringify(i.error.details)}`,n=i.error.details)}catch{}throw new TZ(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function sNe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),l_(e.candidates[0]))throw new Yf(`${Vu(e)}`,e);return lNe(e)}else if(e.promptFeedback)throw new Yf(`Text not available. ${Vu(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),l_(e.candidates[0]))throw new Yf(`${Vu(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),IF(e)[0]}else if(e.promptFeedback)throw new Yf(`Function call not available. ${Vu(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),l_(e.candidates[0]))throw new Yf(`${Vu(e)}`,e);return IF(e)}else if(e.promptFeedback)throw new Yf(`Function call not available. ${Vu(e)}`,e)},e}function lNe(e){var t,r,n,i;const a=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(i=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)o.text&&a.push(o.text),o.executableCode&&a.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&a.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function IF(e){var t,r,n,i;const a=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(i=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)o.functionCall&&a.push(o.functionCall);if(a.length>0)return a}const cNe=[w0.RECITATION,w0.SAFETY,w0.LANGUAGE];function l_(e){return!!e.finishReason&&cNe.includes(e.finishReason)}function Vu(e){var t,r,n;let i="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)i+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(i+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const a=e.candidates[0];l_(a)&&(i+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(i+=`: ${a.finishMessage}`))}return i}function Ev(e){return this instanceof Ev?(this.v=e,this):new Ev(e)}function uNe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){n[f]&&(i[f]=function(p){return new Promise(function(m,g){a.push([f,p,m,g])>1||s(f,p)})})}function s(f,p){try{l(n[f](p))}catch(m){h(a[0][3],m)}}function l(f){f.value instanceof Ev?Promise.resolve(f.value.v).then(c,u):h(a[0][2],f)}function c(f){s("next",f)}function u(f){s("throw",f)}function h(f,p){f(p),a.shift(),a.length&&s(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function dNe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=pNe(t),[n,i]=r.tee();return{stream:fNe(n),response:hNe(i)}}async function hNe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:i}=await r.read();if(n)return yj(mNe(t));t.push(i)}}function fNe(e){return uNe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:i}=yield Ev(r.read());if(i)break;yield yield Ev(yj(n))}})}function pNe(e){const t=e.getReader();return new ReadableStream({start(n){let i="";return a();function a(){return t.read().then(({value:o,done:s})=>{if(s){if(i.trim()){n.error(new Ia("Failed to parse stream"));return}n.close();return}i+=o;let l=i.match(NF),c;for(;l;){try{c=JSON.parse(l[1])}catch{n.error(new Ia(`Error parsing JSON response: "${l[1]}"`));return}n.enqueue(c),i=i.substring(l[0].length),l=i.match(NF)}return a()}).catch(o=>{let s=o;throw s.stack=o.stack,s.name==="AbortError"?s=new CZ("Request aborted when reading from the stream"):s=new Ia("Error reading from the stream"),s})}}})}function mNe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let i=0;for(const a of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[i]||(r.candidates[i]={index:i}),r.candidates[i].citationMetadata=a.citationMetadata,r.candidates[i].groundingMetadata=a.groundingMetadata,r.candidates[i].finishReason=a.finishReason,r.candidates[i].finishMessage=a.finishMessage,r.candidates[i].safetyRatings=a.safetyRatings,a.content&&a.content.parts){r.candidates[i].content||(r.candidates[i].content={role:a.content.role||"user",parts:[]});const o={};for(const s of a.content.parts)s.text&&(o.text=s.text),s.functionCall&&(o.functionCall=s.functionCall),s.executableCode&&(o.executableCode=s.executableCode),s.codeExecutionResult&&(o.codeExecutionResult=s.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),r.candidates[i].content.parts.push(o)}i++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xZ(e,t,r,n){const i=await Nb(t,sf.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return dNe(i)}async function RZ(e,t,r,n){const a=await(await Nb(t,sf.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:yj(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IZ(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function _v(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return gNe(t)}function gNe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,i=!1;for(const a of e)"functionResponse"in a?(r.parts.push(a),i=!0):(t.parts.push(a),n=!0);if(n&&i)throw new Ia("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!i)throw new Ia("No content is provided for sending chat message.");return n?t:r}function yNe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const i=e.generateContentRequest!=null;if(e.contents){if(i)throw new pd("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(i)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const a=_v(e);n.contents=[a]}return{generateContentRequest:n}}function AF(e){let t;return e.contents?t=e:t={contents:[_v(e)]},e.systemInstruction&&(t.systemInstruction=IZ(e.systemInstruction)),t}function vNe(e){return typeof e=="string"||Array.isArray(e)?{content:_v(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],bNe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function wNe(e){let t=!1;for(const r of e){const{role:n,parts:i}=r;if(!t&&n!=="user")throw new Ia(`First content should be with role 'user', got ${n}`);if(!wF.includes(n))throw new Ia(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(wF)}`);if(!Array.isArray(i))throw new Ia("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new Ia("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const s of i)for(const l of OF)l in s&&(a[l]+=1);const o=bNe[n];for(const s of OF)if(!o.includes(s)&&a[s]>0)throw new Ia(`Content with role '${n}' can't contain '${s}' part`);t=!0}}function kF(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF="SILENT_ERROR";class ENe{constructor(t,r,n,i={}){this.model=r,this.params=n,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(wNe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,i,a,o,s,l;await this._sendPromise;const c=_v(t),u={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),r);let f;return this._sendPromise=this._sendPromise.then(()=>RZ(this._apiKey,this.model,u,h)).then(p=>{var m;if(kF(p.response)){this._history.push(c);const g=Object.assign({parts:[],role:"model"},(m=p.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(g)}else{const g=Vu(p.response);g&&console.warn(`sendMessage() was unsuccessful. ${g}. Inspect response object for details.`)}f=p}),await this._sendPromise,f}async sendMessageStream(t,r={}){var n,i,a,o,s,l;await this._sendPromise;const c=_v(t),u={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),r),f=xZ(this._apiKey,this.model,u,h);return this._sendPromise=this._sendPromise.then(()=>f).catch(p=>{throw new Error(PF)}).then(p=>p.response).then(p=>{if(kF(p)){this._history.push(c);const m=Object.assign({},p.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{const m=Vu(p);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(p=>{p.message!==PF&&console.error(p)}),f}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Ne(e,t,r,n){return(await Nb(t,sf.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SNe(e,t,r,n){return(await Nb(t,sf.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function TNe(e,t,r,n){const i=r.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await Nb(t,sf.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=IZ(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const i=AF(t),a=Object.assign(Object.assign({},this._requestOptions),r);return RZ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),a)}async generateContentStream(t,r={}){var n;const i=AF(t),a=Object.assign(Object.assign({},this._requestOptions),r);return xZ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),a)}startChat(t){var r;return new ENe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=yNe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),r);return _Ne(this.apiKey,this.model,n,i)}async embedContent(t,r={}){const n=vNe(t),i=Object.assign(Object.assign({},this._requestOptions),r);return SNe(this.apiKey,this.model,n,i)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return TNe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CNe{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Ia("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new DF(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new pd("Cached content must contain a `name` field.");if(!t.model)throw new pd("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const o of i)if(r!=null&&r[o]&&t[o]&&(r==null?void 0:r[o])!==t[o]){if(o==="model"){const s=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(s===l)continue}throw new pd(`Different value for "${o}" specified in modelParams (${r[o]}) and cachedContent (${t[o]})`)}const a=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new DF(this.apiKey,a,n)}}function xNe(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const RNe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,INe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,NNe={};function LF(e,t){return(NNe.jsx?INe:RNe).test(e)}const ANe=/[ \t\n\f\r]/g;function ONe(e){return typeof e=="object"?e.type==="text"?jF(e.value):!1:jF(e)}function jF(e){return e.replace(ANe,"")===""}class Ab{constructor(t,r,n){this.normal=r,this.property=t,n&&(this.space=n)}}Ab.prototype.normal={};Ab.prototype.property={};Ab.prototype.space=void 0;function NZ(e,t){const r={},n={};for(const i of e)Object.assign(r,i.property),Object.assign(n,i.normal);return new Ab(r,n,t)}function Qk(e){return e.toLowerCase()}class _o{constructor(t,r){this.attribute=r,this.property=t}}_o.prototype.attribute="";_o.prototype.booleanish=!1;_o.prototype.boolean=!1;_o.prototype.commaOrSpaceSeparated=!1;_o.prototype.commaSeparated=!1;_o.prototype.defined=!1;_o.prototype.mustUseProperty=!1;_o.prototype.number=!1;_o.prototype.overloadedBoolean=!1;_o.prototype.property="";_o.prototype.spaceSeparated=!1;_o.prototype.space=void 0;let kNe=0;const Gt=If(),Ti=If(),AZ=If(),Le=If(),hn=If(),dm=If(),Io=If();function If(){return 2**++kNe}const Zk=Object.freeze(Object.defineProperty({__proto__:null,boolean:Gt,booleanish:Ti,commaOrSpaceSeparated:Io,commaSeparated:dm,number:Le,overloadedBoolean:AZ,spaceSeparated:hn},Symbol.toStringTag,{value:"Module"})),CI=Object.keys(Zk);class vj extends _o{constructor(t,r,n,i){let a=-1;if(super(t,r),MF(this,"space",i),typeof n=="number")for(;++a<CI.length;){const o=CI[a];MF(this,CI[a],(n&Zk[o])===Zk[o])}}}vj.prototype.defined=!0;function MF(e,t,r){r&&(e[t]=r)}function Rg(e){const t={},r={};for(const[n,i]of Object.entries(e.properties)){const a=new vj(n,e.transform(e.attributes||{},n),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(a.mustUseProperty=!0),t[n]=a,r[Qk(n)]=n,r[Qk(a.attribute)]=n}return new Ab(t,r,e.space)}const OZ=Rg({properties:{ariaActiveDescendant:null,ariaAtomic:Ti,ariaAutoComplete:null,ariaBusy:Ti,ariaChecked:Ti,ariaColCount:Le,ariaColIndex:Le,ariaColSpan:Le,ariaControls:hn,ariaCurrent:null,ariaDescribedBy:hn,ariaDetails:null,ariaDisabled:Ti,ariaDropEffect:hn,ariaErrorMessage:null,ariaExpanded:Ti,ariaFlowTo:hn,ariaGrabbed:Ti,ariaHasPopup:null,ariaHidden:Ti,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:hn,ariaLevel:Le,ariaLive:null,ariaModal:Ti,ariaMultiLine:Ti,ariaMultiSelectable:Ti,ariaOrientation:null,ariaOwns:hn,ariaPlaceholder:null,ariaPosInSet:Le,ariaPressed:Ti,ariaReadOnly:Ti,ariaRelevant:null,ariaRequired:Ti,ariaRoleDescription:hn,ariaRowCount:Le,ariaRowIndex:Le,ariaRowSpan:Le,ariaSelected:Ti,ariaSetSize:Le,ariaSort:null,ariaValueMax:Le,ariaValueMin:Le,ariaValueNow:Le,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function kZ(e,t){return t in e?e[t]:t}function PZ(e,t){return kZ(e,t.toLowerCase())}const PNe=Rg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:dm,acceptCharset:hn,accessKey:hn,action:null,allow:null,allowFullScreen:Gt,allowPaymentRequest:Gt,allowUserMedia:Gt,alt:null,as:null,async:Gt,autoCapitalize:null,autoComplete:hn,autoFocus:Gt,autoPlay:Gt,blocking:hn,capture:null,charSet:null,checked:Gt,cite:null,className:hn,cols:Le,colSpan:null,content:null,contentEditable:Ti,controls:Gt,controlsList:hn,coords:Le|dm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Gt,defer:Gt,dir:null,dirName:null,disabled:Gt,download:AZ,draggable:Ti,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Gt,formTarget:null,headers:hn,height:Le,hidden:Gt,high:Le,href:null,hrefLang:null,htmlFor:hn,httpEquiv:hn,id:null,imageSizes:null,imageSrcSet:null,inert:Gt,inputMode:null,integrity:null,is:null,isMap:Gt,itemId:null,itemProp:hn,itemRef:hn,itemScope:Gt,itemType:hn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Gt,low:Le,manifest:null,max:null,maxLength:Le,media:null,method:null,min:null,minLength:Le,multiple:Gt,muted:Gt,name:null,nonce:null,noModule:Gt,noValidate:Gt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Gt,optimum:Le,pattern:null,ping:hn,placeholder:null,playsInline:Gt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Gt,referrerPolicy:null,rel:hn,required:Gt,reversed:Gt,rows:Le,rowSpan:Le,sandbox:hn,scope:null,scoped:Gt,seamless:Gt,selected:Gt,shadowRootClonable:Gt,shadowRootDelegatesFocus:Gt,shadowRootMode:null,shape:null,size:Le,sizes:null,slot:null,span:Le,spellCheck:Ti,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Le,step:null,style:null,tabIndex:Le,target:null,title:null,translate:null,type:null,typeMustMatch:Gt,useMap:null,value:Ti,width:Le,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:hn,axis:null,background:null,bgColor:null,border:Le,borderColor:null,bottomMargin:Le,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Gt,declare:Gt,event:null,face:null,frame:null,frameBorder:null,hSpace:Le,leftMargin:Le,link:null,longDesc:null,lowSrc:null,marginHeight:Le,marginWidth:Le,noResize:Gt,noHref:Gt,noShade:Gt,noWrap:Gt,object:null,profile:null,prompt:null,rev:null,rightMargin:Le,rules:null,scheme:null,scrolling:Ti,standby:null,summary:null,text:null,topMargin:Le,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Le,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Gt,disableRemotePlayback:Gt,prefix:null,property:null,results:Le,security:null,unselectable:null},space:"html",transform:PZ}),DNe=Rg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Io,accentHeight:Le,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Le,amplitude:Le,arabicForm:null,ascent:Le,attributeName:null,attributeType:null,azimuth:Le,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Le,by:null,calcMode:null,capHeight:Le,className:hn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Le,diffuseConstant:Le,direction:null,display:null,dur:null,divisor:Le,dominantBaseline:null,download:Gt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Le,enableBackground:null,end:null,event:null,exponent:Le,externalResourcesRequired:null,fill:null,fillOpacity:Le,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:dm,g2:dm,glyphName:dm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Le,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Le,horizOriginX:Le,horizOriginY:Le,id:null,ideographic:Le,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Le,k:Le,k1:Le,k2:Le,k3:Le,k4:Le,kernelMatrix:Io,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Le,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Le,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Le,overlineThickness:Le,paintOrder:null,panose1:null,path:null,pathLength:Le,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:hn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Le,pointsAtY:Le,pointsAtZ:Le,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Io,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Io,rev:Io,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Io,requiredFeatures:Io,requiredFonts:Io,requiredFormats:Io,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Le,specularExponent:Le,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Le,strikethroughThickness:Le,string:null,stroke:null,strokeDashArray:Io,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Le,strokeOpacity:Le,strokeWidth:null,style:null,surfaceScale:Le,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Io,tabIndex:Le,tableValues:null,target:null,targetX:Le,targetY:Le,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Io,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Le,underlineThickness:Le,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Le,values:null,vAlphabetic:Le,vMathematical:Le,vectorEffect:null,vHanging:Le,vIdeographic:Le,version:null,vertAdvY:Le,vertOriginX:Le,vertOriginY:Le,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Le,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:kZ}),DZ=Rg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),LZ=Rg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:PZ}),jZ=Rg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),LNe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},jNe=/[A-Z]/g,UF=/-[a-z]/g,MNe=/^data[-\w.:]+$/i;function UNe(e,t){const r=Qk(t);let n=t,i=_o;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&MNe.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(UF,VNe);n="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!UF.test(a)){let o=a.replace(jNe,FNe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=vj}return new i(n,t)}function FNe(e){return"-"+e.toLowerCase()}function VNe(e){return e.charAt(1).toUpperCase()}const BNe=NZ([OZ,PNe,DZ,LZ,jZ],"html"),bj=NZ([OZ,DNe,DZ,LZ,jZ],"svg");function $Ne(e){return e.join(" ").trim()}var wj={},FF=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,HNe=/\n/g,zNe=/^\s*/,GNe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,WNe=/^:\s*/,KNe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,qNe=/^[;\s]*/,YNe=/^\s+|\s+$/g,XNe=`
`,VF="/",BF="*",mh="",JNe="comment",QNe="declaration",ZNe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,n=1;function i(m){var g=m.match(HNe);g&&(r+=g.length);var y=m.lastIndexOf(XNe);n=~y?m.length-y:n+m.length}function a(){var m={line:r,column:n};return function(g){return g.position=new o(m),c(),g}}function o(m){this.start=m,this.end={line:r,column:n},this.source=t.source}o.prototype.content=e;function s(m){var g=new Error(t.source+":"+r+":"+n+": "+m);if(g.reason=m,g.filename=t.source,g.line=r,g.column=n,g.source=e,!t.silent)throw g}function l(m){var g=m.exec(e);if(g){var y=g[0];return i(y),e=e.slice(y.length),g}}function c(){l(zNe)}function u(m){var g;for(m=m||[];g=h();)g!==!1&&m.push(g);return m}function h(){var m=a();if(!(VF!=e.charAt(0)||BF!=e.charAt(1))){for(var g=2;mh!=e.charAt(g)&&(BF!=e.charAt(g)||VF!=e.charAt(g+1));)++g;if(g+=2,mh===e.charAt(g-1))return s("End of comment missing");var y=e.slice(2,g-2);return n+=2,i(y),e=e.slice(g),n+=2,m({type:JNe,comment:y})}}function f(){var m=a(),g=l(GNe);if(g){if(h(),!l(WNe))return s("property missing ':'");var y=l(KNe),v=m({type:QNe,property:$F(g[0].replace(FF,mh)),value:y?$F(y[0].replace(FF,mh)):mh});return l(qNe),v}}function p(){var m=[];u(m);for(var g;g=f();)g!==!1&&(m.push(g),u(m));return m}return c(),p()};function $F(e){return e?e.replace(YNe,mh):mh}var eAe=Ed&&Ed.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wj,"__esModule",{value:!0});wj.default=rAe;var tAe=eAe(ZNe);function rAe(e,t){var r=null;if(!e||typeof e!="string")return r;var n=(0,tAe.default)(e),i=typeof t=="function";return n.forEach(function(a){if(a.type==="declaration"){var o=a.property,s=a.value;i?t(o,s,a):s&&(r=r||{},r[o]=s)}}),r}var XC={};Object.defineProperty(XC,"__esModule",{value:!0});XC.camelCase=void 0;var nAe=/^--[a-zA-Z0-9_-]+$/,iAe=/-([a-z])/g,aAe=/^[^-]+$/,oAe=/^-(webkit|moz|ms|o|khtml)-/,sAe=/^-(ms)-/,lAe=function(e){return!e||aAe.test(e)||nAe.test(e)},cAe=function(e,t){return t.toUpperCase()},HF=function(e,t){return"".concat(t,"-")},uAe=function(e,t){return t===void 0&&(t={}),lAe(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(sAe,HF):e=e.replace(oAe,HF),e.replace(iAe,cAe))};XC.camelCase=uAe;var dAe=Ed&&Ed.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},hAe=dAe(wj),fAe=XC;function eP(e,t){var r={};return!e||typeof e!="string"||(0,hAe.default)(e,function(n,i){n&&i&&(r[(0,fAe.camelCase)(n,t)]=i)}),r}eP.default=eP;var pAe=eP;const mAe=es(pAe),MZ=UZ("end"),Ej=UZ("start");function UZ(e){return t;function t(r){const n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function gAe(e){const t=Ej(e),r=MZ(e);if(t&&r)return{start:t,end:r}}function E0(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?zF(e.position):"start"in e||"end"in e?zF(e):"line"in e||"column"in e?tP(e):""}function tP(e){return GF(e&&e.line)+":"+GF(e&&e.column)}function zF(e){return tP(e&&e.start)+"-"+tP(e&&e.end)}function GF(e){return e&&typeof e=="number"?e:1}class Oa extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let i="",a={},o=!1;if(r&&("line"in r&&"column"in r?a={place:r}:"start"in r&&"end"in r?a={place:r}:"type"in r?a={ancestors:[r],place:r.position}:a={...r}),typeof t=="string"?i=t:!a.cause&&t&&(o=!0,i=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof n=="string"){const l=n.indexOf(":");l===-1?a.ruleId=n:(a.source=n.slice(0,l),a.ruleId=n.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){const l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}const s=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=s?s.line:void 0,this.name=E0(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}Oa.prototype.file="";Oa.prototype.name="";Oa.prototype.reason="";Oa.prototype.message="";Oa.prototype.stack="";Oa.prototype.column=void 0;Oa.prototype.line=void 0;Oa.prototype.ancestors=void 0;Oa.prototype.cause=void 0;Oa.prototype.fatal=void 0;Oa.prototype.place=void 0;Oa.prototype.ruleId=void 0;Oa.prototype.source=void 0;const _j={}.hasOwnProperty,yAe=new Map,vAe=/[A-Z]/g,bAe=new Set(["table","tbody","thead","tfoot","tr"]),wAe=new Set(["td","th"]),FZ="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function EAe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=NAe(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=IAe(r,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?bj:BNe,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=VZ(i,e,void 0);return a&&typeof a!="string"?a:i.create(e,i.Fragment,{children:a||void 0},void 0)}function VZ(e,t,r){if(t.type==="element")return _Ae(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return SAe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return CAe(e,t,r);if(t.type==="mdxjsEsm")return TAe(e,t);if(t.type==="root")return xAe(e,t,r);if(t.type==="text")return RAe(e,t)}function _Ae(e,t,r){const n=e.schema;let i=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(i=bj,e.schema=i),e.ancestors.push(t);const a=$Z(e,t.tagName,!1),o=AAe(e,t);let s=Tj(e,t);return bAe.has(t.tagName)&&(s=s.filter(function(l){return typeof l=="string"?!ONe(l):!0})),BZ(e,o,a,t),Sj(o,s),e.ancestors.pop(),e.schema=n,e.create(t,a,o,r)}function SAe(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}Sv(e,t.position)}function TAe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Sv(e,t.position)}function CAe(e,t,r){const n=e.schema;let i=n;t.name==="svg"&&n.space==="html"&&(i=bj,e.schema=i),e.ancestors.push(t);const a=t.name===null?e.Fragment:$Z(e,t.name,!0),o=OAe(e,t),s=Tj(e,t);return BZ(e,o,a,t),Sj(o,s),e.ancestors.pop(),e.schema=n,e.create(t,a,o,r)}function xAe(e,t,r){const n={};return Sj(n,Tj(e,t)),e.create(t,e.Fragment,n,r)}function RAe(e,t){return t.value}function BZ(e,t,r,n){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=n)}function Sj(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function IAe(e,t,r){return n;function n(i,a,o,s){const c=Array.isArray(o.children)?r:t;return s?c(a,o,s):c(a,o)}}function NAe(e,t){return r;function r(n,i,a,o){const s=Array.isArray(a.children),l=Ej(n);return t(i,a,o,s,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function AAe(e,t){const r={};let n,i;for(i in t.properties)if(i!=="children"&&_j.call(t.properties,i)){const a=kAe(e,i,t.properties[i]);if(a){const[o,s]=a;e.tableCellAlignToStyle&&o==="align"&&typeof s=="string"&&wAe.has(t.tagName)?n=s:r[o]=s}}if(n){const a=r.style||(r.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function OAe(e,t){const r={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&e.evaluater){const a=n.data.estree.body[0];a.type;const o=a.expression;o.type;const s=o.properties[0];s.type,Object.assign(r,e.evaluater.evaluateExpression(s.argument))}else Sv(e,t.position);else{const i=n.name;let a;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&e.evaluater){const s=n.value.data.estree.body[0];s.type,a=e.evaluater.evaluateExpression(s.expression)}else Sv(e,t.position);else a=n.value===null?!0:n.value;r[i]=a}return r}function Tj(e,t){const r=[];let n=-1;const i=e.passKeys?new Map:yAe;for(;++n<t.children.length;){const a=t.children[n];let o;if(e.passKeys){const l=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const s=VZ(e,a,o);s!==void 0&&r.push(s)}return r}function kAe(e,t,r){const n=UNe(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?xNe(r):$Ne(r)),n.property==="style"){let i=typeof r=="object"?r:PAe(e,String(r));return e.stylePropertyNameCase==="css"&&(i=DAe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&n.space?LNe[n.property]||n.property:n.attribute,r]}}function PAe(e,t){try{return mAe(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const n=r,i=new Oa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=FZ+"#cannot-parse-style-attribute",i}}function $Z(e,t,r){let n;if(!r)n={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let a=-1,o;for(;++a<i.length;){const s=LF(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};o=o?{type:"MemberExpression",object:o,property:s,computed:!!(a&&s.type==="Literal"),optional:!1}:s}n=o}else n=LF(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const i=n.value;return _j.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(n);Sv(e)}function Sv(e,t){const r=new Oa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=FZ+"#cannot-handle-mdx-estrees-without-createevaluater",r}function DAe(e){const t={};let r;for(r in e)_j.call(e,r)&&(t[LAe(r)]=e[r]);return t}function LAe(e){let t=e.replace(vAe,jAe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function jAe(e){return"-"+e.toLowerCase()}const xI={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},MAe={};function UAe(e,t){const r=MAe,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,i=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return HZ(e,n,i)}function HZ(e,t,r){if(FAe(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return WF(e.children,t,r)}return Array.isArray(e)?WF(e,t,r):""}function WF(e,t,r){const n=[];let i=-1;for(;++i<e.length;)n[i]=HZ(e[i],t,r);return n.join("")}function FAe(e){return!!(e&&typeof e=="object")}const KF=document.createElement("i");function Cj(e){const t="&"+e+";";KF.innerHTML=t;const r=KF.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function cc(e,t,r,n){const i=e.length;let a=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,r=r>0?r:0,n.length<1e4)o=Array.from(n),o.unshift(t,r),e.splice(...o);else for(r&&e.splice(t,r);a<n.length;)o=n.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function Ns(e,t){return e.length>0?(cc(e,e.length,0,t),e):t}const qF={}.hasOwnProperty;function VAe(e){const t={};let r=-1;for(;++r<e.length;)BAe(t,e[r]);return t}function BAe(e,t){let r;for(r in t){const i=(qF.call(e,r)?e[r]:void 0)||(e[r]={}),a=t[r];let o;if(a)for(o in a){qF.call(i,o)||(i[o]=[]);const s=a[o];$Ae(i[o],Array.isArray(s)?s:s?[s]:[])}}}function $Ae(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);cc(e,0,0,n)}function zZ(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function hm(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Kl=Fd(/[A-Za-z]/),Fo=Fd(/[\dA-Za-z]/),HAe=Fd(/[#-'*+\--9=?A-Z^-~]/);function rP(e){return e!==null&&(e<32||e===127)}const nP=Fd(/\d/),zAe=Fd(/[\dA-Fa-f]/),GAe=Fd(/[!-/:-@[-`{-~]/);function Ot(e){return e!==null&&e<-2}function yo(e){return e!==null&&(e<0||e===32)}function Lr(e){return e===-2||e===-1||e===32}const WAe=Fd(new RegExp("\\p{P}|\\p{S}","u")),KAe=Fd(/\s/);function Fd(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function Ig(e){const t=[];let r=-1,n=0,i=0;for(;++r<e.length;){const a=e.charCodeAt(r);let o="";if(a===37&&Fo(e.charCodeAt(r+1))&&Fo(e.charCodeAt(r+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const s=e.charCodeAt(r+1);a<56320&&s>56319&&s<57344?(o=String.fromCharCode(a,s),i=1):o=""}else o=String.fromCharCode(a);o&&(t.push(e.slice(n,r),encodeURIComponent(o)),n=r+i+1,o=""),i&&(r+=i,i=0)}return t.join("")+e.slice(n)}function mn(e,t,r,n){const i=n?n-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(l){return Lr(l)?(e.enter(r),s(l)):t(l)}function s(l){return Lr(l)&&a++<i?(e.consume(l),s):(e.exit(r),t(l))}}const qAe={tokenize:YAe};function YAe(e){const t=e.attempt(this.parser.constructs.contentInitial,n,i);let r;return t;function n(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),mn(e,t,"linePrefix")}function i(s){return e.enter("paragraph"),a(s)}function a(s){const l=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=l),r=l,o(s)}function o(s){if(s===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(s);return}return Ot(s)?(e.consume(s),e.exit("chunkText"),a):(e.consume(s),o)}}const XAe={tokenize:JAe},YF={tokenize:QAe};function JAe(e){const t=this,r=[];let n=0,i,a,o;return s;function s(E){if(n<r.length){const S=r[n];return t.containerState=S[1],e.attempt(S[0].continuation,l,c)(E)}return c(E)}function l(E){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const S=t.events.length;let I=S,N;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){N=t.events[I][1].end;break}v(n);let L=S;for(;L<t.events.length;)t.events[L][1].end={...N},L++;return cc(t.events,I+1,0,t.events.slice(S)),t.events.length=L,c(E)}return s(E)}function c(E){if(n===r.length){if(!i)return f(E);if(i.currentConstruct&&i.currentConstruct.concrete)return m(E);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(YF,u,h)(E)}function u(E){return i&&b(),v(n),f(E)}function h(E){return t.parser.lazy[t.now().line]=n!==r.length,o=t.now().offset,m(E)}function f(E){return t.containerState={},e.attempt(YF,p,m)(E)}function p(E){return n++,r.push([t.currentConstruct,t.containerState]),f(E)}function m(E){if(E===null){i&&b(),v(0),e.consume(E);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),g(E)}function g(E){if(E===null){y(e.exit("chunkFlow"),!0),v(0),e.consume(E);return}return Ot(E)?(e.consume(E),y(e.exit("chunkFlow")),n=0,t.interrupt=void 0,s):(e.consume(E),g)}function y(E,S){const I=t.sliceStream(E);if(S&&I.push(null),E.previous=a,a&&(a.next=E),a=E,i.defineSkip(E.start),i.write(I),t.parser.lazy[E.start.line]){let N=i.events.length;for(;N--;)if(i.events[N][1].start.offset<o&&(!i.events[N][1].end||i.events[N][1].end.offset>o))return;const L=t.events.length;let j=L,z,A;for(;j--;)if(t.events[j][0]==="exit"&&t.events[j][1].type==="chunkFlow"){if(z){A=t.events[j][1].end;break}z=!0}for(v(n),N=L;N<t.events.length;)t.events[N][1].end={...A},N++;cc(t.events,j+1,0,t.events.slice(L)),t.events.length=N}}function v(E){let S=r.length;for(;S-- >E;){const I=r[S];t.containerState=I[1],I[0].exit.call(t,e)}r.length=E}function b(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function QAe(e,t,r){return mn(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function XF(e){if(e===null||yo(e)||KAe(e))return 1;if(WAe(e))return 2}function xj(e,t,r){const n=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!n.includes(a)&&(t=a(t,r),n.push(a))}return t}const iP={name:"attention",resolveAll:ZAe,tokenize:eOe};function ZAe(e,t){let r=-1,n,i,a,o,s,l,c,u;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;l=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const h={...e[n][1].end},f={...e[r][1].start};JF(h,-l),JF(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...e[n][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:f},a={type:l>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...s.end}},e[n][1].end={...o.start},e[r][1].start={...s.end},c=[],e[n][1].end.offset-e[n][1].start.offset&&(c=Ns(c,[["enter",e[n][1],t],["exit",e[n][1],t]])),c=Ns(c,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",a,t]]),c=Ns(c,xj(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),c=Ns(c,[["exit",a,t],["enter",s,t],["exit",s,t],["exit",i,t]]),e[r][1].end.offset-e[r][1].start.offset?(u=2,c=Ns(c,[["enter",e[r][1],t],["exit",e[r][1],t]])):u=0,cc(e,n-1,r-n+3,c),r=n+c.length-u-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function eOe(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,i=XF(n);let a;return o;function o(l){return a=l,e.enter("attentionSequence"),s(l)}function s(l){if(l===a)return e.consume(l),s;const c=e.exit("attentionSequence"),u=XF(l),h=!u||u===2&&i||r.includes(l),f=!i||i===2&&u||r.includes(n);return c._open=!!(a===42?h:h&&(i||!f)),c._close=!!(a===42?f:f&&(u||!h)),t(l)}}function JF(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const tOe={name:"autolink",tokenize:rOe};function rOe(e,t,r){let n=0;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(p){return Kl(p)?(e.consume(p),o):p===64?r(p):c(p)}function o(p){return p===43||p===45||p===46||Fo(p)?(n=1,s(p)):c(p)}function s(p){return p===58?(e.consume(p),n=0,l):(p===43||p===45||p===46||Fo(p))&&n++<32?(e.consume(p),s):(n=0,c(p))}function l(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||rP(p)?r(p):(e.consume(p),l)}function c(p){return p===64?(e.consume(p),u):HAe(p)?(e.consume(p),c):r(p)}function u(p){return Fo(p)?h(p):r(p)}function h(p){return p===46?(e.consume(p),n=0,u):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):f(p)}function f(p){if((p===45||Fo(p))&&n++<63){const m=p===45?f:h;return e.consume(p),m}return r(p)}}const JC={partial:!0,tokenize:nOe};function nOe(e,t,r){return n;function n(a){return Lr(a)?mn(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||Ot(a)?t(a):r(a)}}const GZ={continuation:{tokenize:aOe},exit:oOe,name:"blockQuote",tokenize:iOe};function iOe(e,t,r){const n=this;return i;function i(o){if(o===62){const s=n.containerState;return s.open||(e.enter("blockQuote",{_container:!0}),s.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return r(o)}function a(o){return Lr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function aOe(e,t,r){const n=this;return i;function i(o){return Lr(o)?mn(e,a,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(GZ,t,r)(o)}}function oOe(e){e.exit("blockQuote")}const WZ={name:"characterEscape",tokenize:sOe};function sOe(e,t,r){return n;function n(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return GAe(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(a)}}const KZ={name:"characterReference",tokenize:lOe};function lOe(e,t,r){const n=this;let i=0,a,o;return s;function s(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),l}function l(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),a=31,o=Fo,u(h))}function c(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=zAe,u):(e.enter("characterReferenceValue"),a=7,o=nP,u(h))}function u(h){if(h===59&&i){const f=e.exit("characterReferenceValue");return o===Fo&&!Cj(n.sliceSerialize(f))?r(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&i++<a?(e.consume(h),u):r(h)}}const QF={partial:!0,tokenize:uOe},ZF={concrete:!0,name:"codeFenced",tokenize:cOe};function cOe(e,t,r){const n=this,i={partial:!0,tokenize:I};let a=0,o=0,s;return l;function l(N){return c(N)}function c(N){const L=n.events[n.events.length-1];return a=L&&L[1].type==="linePrefix"?L[2].sliceSerialize(L[1],!0).length:0,s=N,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(N)}function u(N){return N===s?(o++,e.consume(N),u):o<3?r(N):(e.exit("codeFencedFenceSequence"),Lr(N)?mn(e,h,"whitespace")(N):h(N))}function h(N){return N===null||Ot(N)?(e.exit("codeFencedFence"),n.interrupt?t(N):e.check(QF,g,S)(N)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(N))}function f(N){return N===null||Ot(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(N)):Lr(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),mn(e,p,"whitespace")(N)):N===96&&N===s?r(N):(e.consume(N),f)}function p(N){return N===null||Ot(N)?h(N):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(N))}function m(N){return N===null||Ot(N)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(N)):N===96&&N===s?r(N):(e.consume(N),m)}function g(N){return e.attempt(i,S,y)(N)}function y(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),v}function v(N){return a>0&&Lr(N)?mn(e,b,"linePrefix",a+1)(N):b(N)}function b(N){return N===null||Ot(N)?e.check(QF,g,S)(N):(e.enter("codeFlowValue"),E(N))}function E(N){return N===null||Ot(N)?(e.exit("codeFlowValue"),b(N)):(e.consume(N),E)}function S(N){return e.exit("codeFenced"),t(N)}function I(N,L,j){let z=0;return A;function A(B){return N.enter("lineEnding"),N.consume(B),N.exit("lineEnding"),V}function V(B){return N.enter("codeFencedFence"),Lr(B)?mn(N,G,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):G(B)}function G(B){return B===s?(N.enter("codeFencedFenceSequence"),X(B)):j(B)}function X(B){return B===s?(z++,N.consume(B),X):z>=o?(N.exit("codeFencedFenceSequence"),Lr(B)?mn(N,$,"whitespace")(B):$(B)):j(B)}function $(B){return B===null||Ot(B)?(N.exit("codeFencedFence"),L(B)):j(B)}}}function uOe(e,t,r){const n=this;return i;function i(o){return o===null?r(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}const RI={name:"codeIndented",tokenize:hOe},dOe={partial:!0,tokenize:fOe};function hOe(e,t,r){const n=this;return i;function i(c){return e.enter("codeIndented"),mn(e,a,"linePrefix",5)(c)}function a(c){const u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):r(c)}function o(c){return c===null?l(c):Ot(c)?e.attempt(dOe,o,l)(c):(e.enter("codeFlowValue"),s(c))}function s(c){return c===null||Ot(c)?(e.exit("codeFlowValue"),o(c)):(e.consume(c),s)}function l(c){return e.exit("codeIndented"),t(c)}}function fOe(e,t,r){const n=this;return i;function i(o){return n.parser.lazy[n.now().line]?r(o):Ot(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):mn(e,a,"linePrefix",5)(o)}function a(o){const s=n.events[n.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(o):Ot(o)?i(o):r(o)}}const pOe={name:"codeText",previous:gOe,resolve:mOe,tokenize:yOe};function mOe(e){let t=e.length-4,r=3,n,i;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)i===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(i=n):(n===t||e[n][1].type==="lineEnding")&&(e[i][1].type="codeTextData",n!==i+2&&(e[i][1].end=e[n-1][1].end,e.splice(i+2,n-i-2),t-=n-i-2,n=i+2),i=void 0);return e}function gOe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function yOe(e,t,r){let n=0,i,a;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),s(h)}function s(h){return h===96?(e.consume(h),n++,s):(e.exit("codeTextSequence"),l(h))}function l(h){return h===null?r(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),l):h===96?(a=e.enter("codeTextSequence"),i=0,u(h)):Ot(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||Ot(h)?(e.exit("codeTextData"),l(h)):(e.consume(h),c)}function u(h){return h===96?(e.consume(h),i++,u):i===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(a.type="codeTextData",c(h))}}class vOe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){const i=r||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&fy(this.left,n),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),fy(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),fy(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);fy(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);fy(this.left,r.reverse())}}}function fy(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function qZ(e){const t={};let r=-1,n,i,a,o,s,l,c;const u=new vOe(e);for(;++r<u.length;){for(;r in t;)r=t[r];if(n=u.get(r),r&&n[1].type==="chunkFlow"&&u.get(r-1)[1].type==="listItemPrefix"&&(l=n[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,bOe(u,r)),r=t[r],c=!0);else if(n[1]._container){for(a=r,i=void 0;a--;)if(o=u.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(n[1].end={...u.get(i)[1].start},s=u.slice(i,r),s.unshift(n),u.splice(i,r-i+1,s))}}return cc(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function bOe(e,t){const r=e.get(t)[1],n=e.get(t)[2];let i=t-1;const a=[];let o=r._tokenizer;o||(o=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const s=o.events,l=[],c={};let u,h,f=-1,p=r,m=0,g=0;const y=[g];for(;p;){for(;e.get(++i)[1]!==p;);a.push(i),p._tokenizer||(u=n.sliceStream(p),p.next||u.push(null),h&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=r;++f<s.length;)s[f][0]==="exit"&&s[f-1][0]==="enter"&&s[f][1].type===s[f-1][1].type&&s[f][1].start.line!==s[f][1].end.line&&(g=f+1,y.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):y.pop(),f=y.length;f--;){const v=s.slice(y[f],y[f+1]),b=a.pop();l.push([b,b+v.length-1]),e.splice(b,2,v)}for(l.reverse(),f=-1;++f<l.length;)c[m+l[f][0]]=m+l[f][1],m+=l[f][1]-l[f][0]-1;return c}const wOe={resolve:_Oe,tokenize:SOe},EOe={partial:!0,tokenize:TOe};function _Oe(e){return qZ(e),e}function SOe(e,t){let r;return n;function n(s){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?a(s):Ot(s)?e.check(EOe,o,a)(s):(e.consume(s),i)}function a(s){return e.exit("chunkContent"),e.exit("content"),t(s)}function o(s){return e.consume(s),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,i}}function TOe(e,t,r){const n=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),mn(e,a,"linePrefix")}function a(o){if(o===null||Ot(o))return r(o);const s=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(o):e.interrupt(n.parser.constructs.flow,r,t)(o)}}function YZ(e,t,r,n,i,a,o,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(v){return v===60?(e.enter(n),e.enter(i),e.enter(a),e.consume(v),e.exit(a),f):v===null||v===32||v===41||rP(v)?r(v):(e.enter(n),e.enter(o),e.enter(s),e.enter("chunkString",{contentType:"string"}),g(v))}function f(v){return v===62?(e.enter(a),e.consume(v),e.exit(a),e.exit(i),e.exit(n),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===62?(e.exit("chunkString"),e.exit(s),f(v)):v===null||v===60||Ot(v)?r(v):(e.consume(v),v===92?m:p)}function m(v){return v===60||v===62||v===92?(e.consume(v),p):p(v)}function g(v){return!u&&(v===null||v===41||yo(v))?(e.exit("chunkString"),e.exit(s),e.exit(o),e.exit(n),t(v)):u<c&&v===40?(e.consume(v),u++,g):v===41?(e.consume(v),u--,g):v===null||v===32||v===40||rP(v)?r(v):(e.consume(v),v===92?y:g)}function y(v){return v===40||v===41||v===92?(e.consume(v),g):g(v)}}function XZ(e,t,r,n,i,a){const o=this;let s=0,l;return c;function c(p){return e.enter(n),e.enter(i),e.consume(p),e.exit(i),e.enter(a),u}function u(p){return s>999||p===null||p===91||p===93&&!l||p===94&&!s&&"_hiddenFootnoteSupport"in o.parser.constructs?r(p):p===93?(e.exit(a),e.enter(i),e.consume(p),e.exit(i),e.exit(n),t):Ot(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||Ot(p)||s++>999?(e.exit("chunkString"),u(p)):(e.consume(p),l||(l=!Lr(p)),p===92?f:h)}function f(p){return p===91||p===92||p===93?(e.consume(p),s++,h):h(p)}}function JZ(e,t,r,n,i,a){let o;return s;function s(f){return f===34||f===39||f===40?(e.enter(n),e.enter(i),e.consume(f),e.exit(i),o=f===40?41:f,l):r(f)}function l(f){return f===o?(e.enter(i),e.consume(f),e.exit(i),e.exit(n),t):(e.enter(a),c(f))}function c(f){return f===o?(e.exit(a),l(o)):f===null?r(f):Ot(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),mn(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||Ot(f)?(e.exit("chunkString"),c(f)):(e.consume(f),f===92?h:u)}function h(f){return f===o||f===92?(e.consume(f),u):u(f)}}function _0(e,t){let r;return n;function n(i){return Ot(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),r=!0,n):Lr(i)?mn(e,n,r?"linePrefix":"lineSuffix")(i):t(i)}}const COe={name:"definition",tokenize:ROe},xOe={partial:!0,tokenize:IOe};function ROe(e,t,r){const n=this;let i;return a;function a(p){return e.enter("definition"),o(p)}function o(p){return XZ.call(n,e,s,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function s(p){return i=hm(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),l):r(p)}function l(p){return yo(p)?_0(e,c)(p):c(p)}function c(p){return YZ(e,u,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return e.attempt(xOe,h,h)(p)}function h(p){return Lr(p)?mn(e,f,"whitespace")(p):f(p)}function f(p){return p===null||Ot(p)?(e.exit("definition"),n.parser.defined.push(i),t(p)):r(p)}}function IOe(e,t,r){return n;function n(s){return yo(s)?_0(e,i)(s):r(s)}function i(s){return JZ(e,a,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function a(s){return Lr(s)?mn(e,o,"whitespace")(s):o(s)}function o(s){return s===null||Ot(s)?t(s):r(s)}}const NOe={name:"hardBreakEscape",tokenize:AOe};function AOe(e,t,r){return n;function n(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return Ot(a)?(e.exit("hardBreakEscape"),t(a)):r(a)}}const OOe={name:"headingAtx",resolve:kOe,tokenize:POe};function kOe(e,t){let r=e.length-2,n=3,i,a;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(i={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},a={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},cc(e,n,r-n+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}function POe(e,t,r){let n=0;return i;function i(u){return e.enter("atxHeading"),a(u)}function a(u){return e.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&n++<6?(e.consume(u),o):u===null||yo(u)?(e.exit("atxHeadingSequence"),s(u)):r(u)}function s(u){return u===35?(e.enter("atxHeadingSequence"),l(u)):u===null||Ot(u)?(e.exit("atxHeading"),t(u)):Lr(u)?mn(e,s,"whitespace")(u):(e.enter("atxHeadingText"),c(u))}function l(u){return u===35?(e.consume(u),l):(e.exit("atxHeadingSequence"),s(u))}function c(u){return u===null||u===35||yo(u)?(e.exit("atxHeadingText"),s(u)):(e.consume(u),c)}}const DOe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],eV=["pre","script","style","textarea"],LOe={concrete:!0,name:"htmlFlow",resolveTo:UOe,tokenize:FOe},jOe={partial:!0,tokenize:BOe},MOe={partial:!0,tokenize:VOe};function UOe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function FOe(e,t,r){const n=this;let i,a,o,s,l;return c;function c(C){return u(C)}function u(C){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(C),h}function h(C){return C===33?(e.consume(C),f):C===47?(e.consume(C),a=!0,g):C===63?(e.consume(C),i=3,n.interrupt?t:x):Kl(C)?(e.consume(C),o=String.fromCharCode(C),y):r(C)}function f(C){return C===45?(e.consume(C),i=2,p):C===91?(e.consume(C),i=5,s=0,m):Kl(C)?(e.consume(C),i=4,n.interrupt?t:x):r(C)}function p(C){return C===45?(e.consume(C),n.interrupt?t:x):r(C)}function m(C){const q="CDATA[";return C===q.charCodeAt(s++)?(e.consume(C),s===q.length?n.interrupt?t:G:m):r(C)}function g(C){return Kl(C)?(e.consume(C),o=String.fromCharCode(C),y):r(C)}function y(C){if(C===null||C===47||C===62||yo(C)){const q=C===47,F=o.toLowerCase();return!q&&!a&&eV.includes(F)?(i=1,n.interrupt?t(C):G(C)):DOe.includes(o.toLowerCase())?(i=6,q?(e.consume(C),v):n.interrupt?t(C):G(C)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(C):a?b(C):E(C))}return C===45||Fo(C)?(e.consume(C),o+=String.fromCharCode(C),y):r(C)}function v(C){return C===62?(e.consume(C),n.interrupt?t:G):r(C)}function b(C){return Lr(C)?(e.consume(C),b):A(C)}function E(C){return C===47?(e.consume(C),A):C===58||C===95||Kl(C)?(e.consume(C),S):Lr(C)?(e.consume(C),E):A(C)}function S(C){return C===45||C===46||C===58||C===95||Fo(C)?(e.consume(C),S):I(C)}function I(C){return C===61?(e.consume(C),N):Lr(C)?(e.consume(C),I):E(C)}function N(C){return C===null||C===60||C===61||C===62||C===96?r(C):C===34||C===39?(e.consume(C),l=C,L):Lr(C)?(e.consume(C),N):j(C)}function L(C){return C===l?(e.consume(C),l=null,z):C===null||Ot(C)?r(C):(e.consume(C),L)}function j(C){return C===null||C===34||C===39||C===47||C===60||C===61||C===62||C===96||yo(C)?I(C):(e.consume(C),j)}function z(C){return C===47||C===62||Lr(C)?E(C):r(C)}function A(C){return C===62?(e.consume(C),V):r(C)}function V(C){return C===null||Ot(C)?G(C):Lr(C)?(e.consume(C),V):r(C)}function G(C){return C===45&&i===2?(e.consume(C),K):C===60&&i===1?(e.consume(C),P):C===62&&i===4?(e.consume(C),w):C===63&&i===3?(e.consume(C),x):C===93&&i===5?(e.consume(C),H):Ot(C)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(jOe,O,X)(C)):C===null||Ot(C)?(e.exit("htmlFlowData"),X(C)):(e.consume(C),G)}function X(C){return e.check(MOe,$,O)(C)}function $(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),B}function B(C){return C===null||Ot(C)?X(C):(e.enter("htmlFlowData"),G(C))}function K(C){return C===45?(e.consume(C),x):G(C)}function P(C){return C===47?(e.consume(C),o="",D):G(C)}function D(C){if(C===62){const q=o.toLowerCase();return eV.includes(q)?(e.consume(C),w):G(C)}return Kl(C)&&o.length<8?(e.consume(C),o+=String.fromCharCode(C),D):G(C)}function H(C){return C===93?(e.consume(C),x):G(C)}function x(C){return C===62?(e.consume(C),w):C===45&&i===2?(e.consume(C),x):G(C)}function w(C){return C===null||Ot(C)?(e.exit("htmlFlowData"),O(C)):(e.consume(C),w)}function O(C){return e.exit("htmlFlow"),t(C)}}function VOe(e,t,r){const n=this;return i;function i(o){return Ot(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):r(o)}function a(o){return n.parser.lazy[n.now().line]?r(o):t(o)}}function BOe(e,t,r){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(JC,t,r)}}const $Oe={name:"htmlText",tokenize:HOe};function HOe(e,t,r){const n=this;let i,a,o;return s;function s(x){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(x),l}function l(x){return x===33?(e.consume(x),c):x===47?(e.consume(x),I):x===63?(e.consume(x),E):Kl(x)?(e.consume(x),j):r(x)}function c(x){return x===45?(e.consume(x),u):x===91?(e.consume(x),a=0,m):Kl(x)?(e.consume(x),b):r(x)}function u(x){return x===45?(e.consume(x),p):r(x)}function h(x){return x===null?r(x):x===45?(e.consume(x),f):Ot(x)?(o=h,P(x)):(e.consume(x),h)}function f(x){return x===45?(e.consume(x),p):h(x)}function p(x){return x===62?K(x):x===45?f(x):h(x)}function m(x){const w="CDATA[";return x===w.charCodeAt(a++)?(e.consume(x),a===w.length?g:m):r(x)}function g(x){return x===null?r(x):x===93?(e.consume(x),y):Ot(x)?(o=g,P(x)):(e.consume(x),g)}function y(x){return x===93?(e.consume(x),v):g(x)}function v(x){return x===62?K(x):x===93?(e.consume(x),v):g(x)}function b(x){return x===null||x===62?K(x):Ot(x)?(o=b,P(x)):(e.consume(x),b)}function E(x){return x===null?r(x):x===63?(e.consume(x),S):Ot(x)?(o=E,P(x)):(e.consume(x),E)}function S(x){return x===62?K(x):E(x)}function I(x){return Kl(x)?(e.consume(x),N):r(x)}function N(x){return x===45||Fo(x)?(e.consume(x),N):L(x)}function L(x){return Ot(x)?(o=L,P(x)):Lr(x)?(e.consume(x),L):K(x)}function j(x){return x===45||Fo(x)?(e.consume(x),j):x===47||x===62||yo(x)?z(x):r(x)}function z(x){return x===47?(e.consume(x),K):x===58||x===95||Kl(x)?(e.consume(x),A):Ot(x)?(o=z,P(x)):Lr(x)?(e.consume(x),z):K(x)}function A(x){return x===45||x===46||x===58||x===95||Fo(x)?(e.consume(x),A):V(x)}function V(x){return x===61?(e.consume(x),G):Ot(x)?(o=V,P(x)):Lr(x)?(e.consume(x),V):z(x)}function G(x){return x===null||x===60||x===61||x===62||x===96?r(x):x===34||x===39?(e.consume(x),i=x,X):Ot(x)?(o=G,P(x)):Lr(x)?(e.consume(x),G):(e.consume(x),$)}function X(x){return x===i?(e.consume(x),i=void 0,B):x===null?r(x):Ot(x)?(o=X,P(x)):(e.consume(x),X)}function $(x){return x===null||x===34||x===39||x===60||x===61||x===96?r(x):x===47||x===62||yo(x)?z(x):(e.consume(x),$)}function B(x){return x===47||x===62||yo(x)?z(x):r(x)}function K(x){return x===62?(e.consume(x),e.exit("htmlTextData"),e.exit("htmlText"),t):r(x)}function P(x){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),D}function D(x){return Lr(x)?mn(e,H,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(x):H(x)}function H(x){return e.enter("htmlTextData"),o(x)}}const Rj={name:"labelEnd",resolveAll:KOe,resolveTo:qOe,tokenize:YOe},zOe={tokenize:XOe},GOe={tokenize:JOe},WOe={tokenize:QOe};function KOe(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const i=n.type==="labelImage"?4:2;n.type="data",t+=i}}return e.length!==r.length&&cc(e,0,e.length,r),e}function qOe(e,t){let r=e.length,n=0,i,a,o,s;for(;r--;)if(i=e[r][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[r][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[r][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=r,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(o=r);const l={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},u={type:"labelText",start:{...e[a+n+2][1].end},end:{...e[o-2][1].start}};return s=[["enter",l,t],["enter",c,t]],s=Ns(s,e.slice(a+1,a+n+3)),s=Ns(s,[["enter",u,t]]),s=Ns(s,xj(t.parser.constructs.insideSpan.null,e.slice(a+n+4,o-3),t)),s=Ns(s,[["exit",u,t],e[o-2],e[o-1],["exit",c,t]]),s=Ns(s,e.slice(o+1)),s=Ns(s,[["exit",l,t]]),cc(e,a,e.length,s),e}function YOe(e,t,r){const n=this;let i=n.events.length,a,o;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){a=n.events[i][1];break}return s;function s(f){return a?a._inactive?h(f):(o=n.parser.defined.includes(hm(n.sliceSerialize({start:a.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),l):r(f)}function l(f){return f===40?e.attempt(zOe,u,o?u:h)(f):f===91?e.attempt(GOe,u,o?c:h)(f):o?u(f):h(f)}function c(f){return e.attempt(WOe,u,h)(f)}function u(f){return t(f)}function h(f){return a._balanced=!0,r(f)}}function XOe(e,t,r){return n;function n(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),i}function i(h){return yo(h)?_0(e,a)(h):a(h)}function a(h){return h===41?u(h):YZ(e,o,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return yo(h)?_0(e,l)(h):u(h)}function s(h){return r(h)}function l(h){return h===34||h===39||h===40?JZ(e,c,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return yo(h)?_0(e,u)(h):u(h)}function u(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):r(h)}}function JOe(e,t,r){const n=this;return i;function i(s){return XZ.call(n,e,a,o,"reference","referenceMarker","referenceString")(s)}function a(s){return n.parser.defined.includes(hm(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(s):r(s)}function o(s){return r(s)}}function QOe(e,t,r){return n;function n(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):r(a)}}const ZOe={name:"labelStartImage",resolveAll:Rj.resolveAll,tokenize:eke};function eke(e,t,r){const n=this;return i;function i(s){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(s),e.exit("labelImageMarker"),a}function a(s){return s===91?(e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelImage"),o):r(s)}function o(s){return s===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(s):t(s)}}const tke={name:"labelStartLink",resolveAll:Rj.resolveAll,tokenize:rke};function rke(e,t,r){const n=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(o):t(o)}}const II={name:"lineEnding",tokenize:nke};function nke(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),mn(e,t,"linePrefix")}}const c_={name:"thematicBreak",tokenize:ike};function ike(e,t,r){let n=0,i;return a;function a(c){return e.enter("thematicBreak"),o(c)}function o(c){return i=c,s(c)}function s(c){return c===i?(e.enter("thematicBreakSequence"),l(c)):n>=3&&(c===null||Ot(c))?(e.exit("thematicBreak"),t(c)):r(c)}function l(c){return c===i?(e.consume(c),n++,l):(e.exit("thematicBreakSequence"),Lr(c)?mn(e,s,"whitespace")(c):s(c))}}const Ja={continuation:{tokenize:lke},exit:uke,name:"list",tokenize:ske},ake={partial:!0,tokenize:dke},oke={partial:!0,tokenize:cke};function ske(e,t,r){const n=this,i=n.events[n.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return s;function s(p){const m=n.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!n.containerState.marker||p===n.containerState.marker:nP(p)){if(n.containerState.type||(n.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(c_,r,c)(p):c(p);if(!n.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(p)}return r(p)}function l(p){return nP(p)&&++o<10?(e.consume(p),l):(!n.interrupt||o<2)&&(n.containerState.marker?p===n.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),c(p)):r(p)}function c(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||p,e.check(JC,n.interrupt?r:u,e.attempt(ake,f,h))}function u(p){return n.containerState.initialBlankLine=!0,a++,f(p)}function h(p){return Lr(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),f):r(p)}function f(p){return n.containerState.size=a+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function lke(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(JC,i,a);function i(s){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,mn(e,t,"listItemIndent",n.containerState.size+1)(s)}function a(s){return n.containerState.furtherBlankLines||!Lr(s)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,o(s)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(oke,t,o)(s))}function o(s){return n.containerState._closeFlow=!0,n.interrupt=void 0,mn(e,e.attempt(Ja,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function cke(e,t,r){const n=this;return mn(e,i,"listItemIndent",n.containerState.size+1);function i(a){const o=n.events[n.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===n.containerState.size?t(a):r(a)}}function uke(e){e.exit(this.containerState.type)}function dke(e,t,r){const n=this;return mn(e,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=n.events[n.events.length-1];return!Lr(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):r(a)}}const tV={name:"setextUnderline",resolveTo:hke,tokenize:fke};function hke(e,t){let r=e.length,n,i,a;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(i=r)}else e[r][1].type==="content"&&e.splice(r,1),!a&&e[r][1].type==="definition"&&(a=r);const o={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",o,t]),e.splice(a+1,0,["exit",e[n][1],t]),e[n][1].end={...e[a][1].end}):e[n][1]=o,e.push(["exit",o,t]),e}function fke(e,t,r){const n=this;let i;return a;function a(c){let u=n.events.length,h;for(;u--;)if(n.events[u][1].type!=="lineEnding"&&n.events[u][1].type!=="linePrefix"&&n.events[u][1].type!=="content"){h=n.events[u][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||h)?(e.enter("setextHeadingLine"),i=c,o(c)):r(c)}function o(c){return e.enter("setextHeadingLineSequence"),s(c)}function s(c){return c===i?(e.consume(c),s):(e.exit("setextHeadingLineSequence"),Lr(c)?mn(e,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Ot(c)?(e.exit("setextHeadingLine"),t(c)):r(c)}}const pke={tokenize:mke};function mke(e){const t=this,r=e.attempt(JC,n,e.attempt(this.parser.constructs.flowInitial,i,mn(e,e.attempt(this.parser.constructs.flow,i,e.attempt(wOe,i)),"linePrefix")));return r;function n(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const gke={resolveAll:ZZ()},yke=QZ("string"),vke=QZ("text");function QZ(e){return{resolveAll:ZZ(e==="text"?bke:void 0),tokenize:t};function t(r){const n=this,i=this.parser.constructs[e],a=r.attempt(i,o,s);return o;function o(u){return c(u)?a(u):s(u)}function s(u){if(u===null){r.consume(u);return}return r.enter("data"),r.consume(u),l}function l(u){return c(u)?(r.exit("data"),a(u)):(r.consume(u),l)}function c(u){if(u===null)return!0;const h=i[u];let f=-1;if(h)for(;++f<h.length;){const p=h[f];if(!p.previous||p.previous.call(n,n.previous))return!0}return!1}}}function ZZ(e){return t;function t(r,n){let i=-1,a;for(;++i<=r.length;)a===void 0?r[i]&&r[i][1].type==="data"&&(a=i,i++):(!r[i]||r[i][1].type!=="data")&&(i!==a+2&&(r[a][1].end=r[i-1][1].end,r.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(r,n):r}}function bke(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],i=t.sliceStream(n);let a=i.length,o=-1,s=0,l;for(;a--;){const c=i[a];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)s++,o--;if(o)break;o=-1}else if(c===-2)l=!0,s++;else if(c!==-1){a++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(s=0),s){const c={type:r===e.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:n.start._bufferIndex+o,_index:n.start._index+a,line:n.end.line,column:n.end.column-s,offset:n.end.offset-s},end:{...n.end}};n.end={...c.start},n.start.offset===n.end.offset?Object.assign(n,c):(e.splice(r,0,["enter",c,t],["exit",c,t]),r+=2)}r++}return e}const wke={42:Ja,43:Ja,45:Ja,48:Ja,49:Ja,50:Ja,51:Ja,52:Ja,53:Ja,54:Ja,55:Ja,56:Ja,57:Ja,62:GZ},Eke={91:COe},_ke={[-2]:RI,[-1]:RI,32:RI},Ske={35:OOe,42:c_,45:[tV,c_],60:LOe,61:tV,95:c_,96:ZF,126:ZF},Tke={38:KZ,92:WZ},Cke={[-5]:II,[-4]:II,[-3]:II,33:ZOe,38:KZ,42:iP,60:[tOe,$Oe],91:tke,92:[NOe,WZ],93:Rj,95:iP,96:pOe},xke={null:[iP,gke]},Rke={null:[42,95]},Ike={null:[]},Nke=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Rke,contentInitial:Eke,disable:Ike,document:wke,flow:Ske,flowInitial:_ke,insideSpan:xke,string:Tke,text:Cke},Symbol.toStringTag,{value:"Module"}));function Ake(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const i={},a=[];let o=[],s=[];const l={attempt:L(I),check:L(N),consume:b,enter:E,exit:S,interrupt:L(N,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:m,parser:e,previous:null,sliceSerialize:f,sliceStream:p,write:h};let u=t.tokenize.call(c,l);return t.resolveAll&&a.push(t),c;function h(V){return o=Ns(o,V),y(),o[o.length-1]!==null?[]:(j(t,0),c.events=xj(a,c.events,c),c.events)}function f(V,G){return kke(p(V),G)}function p(V){return Oke(o,V)}function m(){const{_bufferIndex:V,_index:G,line:X,column:$,offset:B}=n;return{_bufferIndex:V,_index:G,line:X,column:$,offset:B}}function g(V){i[V.line]=V.column,A()}function y(){let V;for(;n._index<o.length;){const G=o[n._index];if(typeof G=="string")for(V=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===V&&n._bufferIndex<G.length;)v(G.charCodeAt(n._bufferIndex));else v(G)}}function v(V){u=u(V)}function b(V){Ot(V)?(n.line++,n.column=1,n.offset+=V===-3?2:1,A()):V!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===o[n._index].length&&(n._bufferIndex=-1,n._index++)),c.previous=V}function E(V,G){const X=G||{};return X.type=V,X.start=m(),c.events.push(["enter",X,c]),s.push(X),X}function S(V){const G=s.pop();return G.end=m(),c.events.push(["exit",G,c]),G}function I(V,G){j(V,G.from)}function N(V,G){G.restore()}function L(V,G){return X;function X($,B,K){let P,D,H,x;return Array.isArray($)?O($):"tokenize"in $?O([$]):w($);function w(J){return se;function se(he){const ge=he!==null&&J[he],je=he!==null&&J.null,ze=[...Array.isArray(ge)?ge:ge?[ge]:[],...Array.isArray(je)?je:je?[je]:[]];return O(ze)(he)}}function O(J){return P=J,D=0,J.length===0?K:C(J[D])}function C(J){return se;function se(he){return x=z(),H=J,J.partial||(c.currentConstruct=J),J.name&&c.parser.constructs.disable.null.includes(J.name)?F():J.tokenize.call(G?Object.assign(Object.create(c),G):c,l,q,F)(he)}}function q(J){return V(H,x),B}function F(J){return x.restore(),++D<P.length?C(P[D]):K}}}function j(V,G){V.resolveAll&&!a.includes(V)&&a.push(V),V.resolve&&cc(c.events,G,c.events.length-G,V.resolve(c.events.slice(G),c)),V.resolveTo&&(c.events=V.resolveTo(c.events,c))}function z(){const V=m(),G=c.previous,X=c.currentConstruct,$=c.events.length,B=Array.from(s);return{from:$,restore:K};function K(){n=V,c.previous=G,c.currentConstruct=X,c.events.length=$,s=B,A()}}function A(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function Oke(e,t){const r=t.start._index,n=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;if(r===i)o=[e[r].slice(n,a)];else{if(o=e.slice(r,i),n>-1){const s=o[0];typeof s=="string"?o[0]=s.slice(n):o.shift()}a>0&&o.push(e[i].slice(0,a))}return o}function kke(e,t){let r=-1;const n=[];let i;for(;++r<e.length;){const a=e[r];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,n.push(o)}return n.join("")}function Pke(e){const n={constructs:VAe([Nke,...(e||{}).extensions||[]]),content:i(qAe),defined:[],document:i(XAe),flow:i(pke),lazy:{},string:i(yke),text:i(vke)};return n;function i(a){return o;function o(s){return Ake(n,a,s)}}}function Dke(e){for(;!qZ(e););return e}const rV=/[\0\t\n\r]/g;function Lke(){let e=1,t="",r=!0,n;return i;function i(a,o,s){const l=[];let c,u,h,f,p;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),h=0,t="",r&&(a.charCodeAt(0)===65279&&h++,r=void 0);h<a.length;){if(rV.lastIndex=h,c=rV.exec(a),f=c&&c.index!==void 0?c.index:a.length,p=a.charCodeAt(f),!c){t=a.slice(h);break}if(p===10&&h===f&&n)l.push(-3),n=void 0;else switch(n&&(l.push(-5),n=void 0),h<f&&(l.push(a.slice(h,f)),e+=f-h),p){case 0:{l.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,l.push(-2);e++<u;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:n=!0,e=1}h=f+1}return s&&(n&&l.push(-5),t&&l.push(t),l.push(null)),l}}const jke=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Mke(e){return e.replace(jke,Uke)}function Uke(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const i=r.charCodeAt(1),a=i===120||i===88;return zZ(r.slice(a?2:1),a?16:10)}return Cj(r)||e}const eee={}.hasOwnProperty;function Fke(e,t,r){return typeof t!="string"&&(r=t,t=void 0),Vke(r)(Dke(Pke(r).document().write(Lke()(e,t,!0))))}function Vke(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ge),autolinkProtocol:z,autolinkEmail:z,atxHeading:a(rt),blockQuote:a(je),characterEscape:z,characterReference:z,codeFenced:a(ze),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(ze,o),codeText:a(Me,o),codeTextData:z,data:z,codeFlowValue:z,definition:a(tt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(Tt),hardBreakEscape:a(yt),hardBreakTrailing:a(yt),htmlFlow:a(Oe,o),htmlFlowData:z,htmlText:a(Oe,o),htmlTextData:z,image:a(it),label:o,link:a(Ge),listItem:a(Re),listItemValue:f,listOrdered:a(Ze,h),listUnordered:a(Ze),paragraph:a(Z),reference:C,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(rt),strong:a(Te),thematicBreak:a(He)},exit:{atxHeading:l(),atxHeadingSequence:I,autolink:l(),autolinkEmail:ge,autolinkProtocol:he,blockQuote:l(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:F,characterReferenceMarkerNumeric:F,characterReferenceValue:J,characterReference:se,codeFenced:l(y),codeFencedFence:g,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:A,codeIndented:l(v),codeText:l(B),codeTextData:A,data:A,definition:l(),definitionDestinationString:S,definitionLabelString:b,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(G),hardBreakTrailing:l(G),htmlFlow:l(X),htmlFlowData:A,htmlText:l($),htmlTextData:A,image:l(P),label:H,labelText:D,lineEnding:V,link:l(K),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:q,resourceDestinationString:x,resourceTitleString:w,resource:O,setextHeading:l(j),setextHeadingLineSequence:L,setextHeadingText:N,strong:l(),thematicBreak:l()}};tee(t,(e||{}).mdastExtensions||[]);const r={};return n;function n(ne){let pe={type:"root",children:[]};const We={stack:[pe],tokenStack:[],config:t,enter:s,exit:c,buffer:o,resume:u,data:r},st=[];let Yt=-1;for(;++Yt<ne.length;)if(ne[Yt][1].type==="listOrdered"||ne[Yt][1].type==="listUnordered")if(ne[Yt][0]==="enter")st.push(Yt);else{const Kn=st.pop();Yt=i(ne,Kn,Yt)}for(Yt=-1;++Yt<ne.length;){const Kn=t[ne[Yt][0]];eee.call(Kn,ne[Yt][1].type)&&Kn[ne[Yt][1].type].call(Object.assign({sliceSerialize:ne[Yt][2].sliceSerialize},We),ne[Yt][1])}if(We.tokenStack.length>0){const Kn=We.tokenStack[We.tokenStack.length-1];(Kn[1]||nV).call(We,void 0,Kn[0])}for(pe.position={start:Su(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:Su(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},Yt=-1;++Yt<t.transforms.length;)pe=t.transforms[Yt](pe)||pe;return pe}function i(ne,pe,We){let st=pe-1,Yt=-1,Kn=!1,kn,Ii,Pn,Hi;for(;++st<=We;){const Cn=ne[st];switch(Cn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Cn[0]==="enter"?Yt++:Yt--,Hi=void 0;break}case"lineEndingBlank":{Cn[0]==="enter"&&(kn&&!Hi&&!Yt&&!Pn&&(Pn=st),Hi=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Hi=void 0}if(!Yt&&Cn[0]==="enter"&&Cn[1].type==="listItemPrefix"||Yt===-1&&Cn[0]==="exit"&&(Cn[1].type==="listUnordered"||Cn[1].type==="listOrdered")){if(kn){let Ni=st;for(Ii=void 0;Ni--;){const Dn=ne[Ni];if(Dn[1].type==="lineEnding"||Dn[1].type==="lineEndingBlank"){if(Dn[0]==="exit")continue;Ii&&(ne[Ii][1].type="lineEndingBlank",Kn=!0),Dn[1].type="lineEnding",Ii=Ni}else if(!(Dn[1].type==="linePrefix"||Dn[1].type==="blockQuotePrefix"||Dn[1].type==="blockQuotePrefixWhitespace"||Dn[1].type==="blockQuoteMarker"||Dn[1].type==="listItemIndent"))break}Pn&&(!Ii||Pn<Ii)&&(kn._spread=!0),kn.end=Object.assign({},Ii?ne[Ii][1].start:Cn[1].end),ne.splice(Ii||st,0,["exit",kn,Cn[2]]),st++,We++}if(Cn[1].type==="listItemPrefix"){const Ni={type:"listItem",_spread:!1,start:Object.assign({},Cn[1].start),end:void 0};kn=Ni,ne.splice(st,0,["enter",Ni,Cn[2]]),st++,We++,Pn=void 0,Hi=!0}}}return ne[pe][1]._spread=Kn,We}function a(ne,pe){return We;function We(st){s.call(this,ne(st),st),pe&&pe.call(this,st)}}function o(){this.stack.push({type:"fragment",children:[]})}function s(ne,pe,We){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([pe,We||void 0]),ne.position={start:Su(pe.start),end:void 0}}function l(ne){return pe;function pe(We){ne&&ne.call(this,We),c.call(this,We)}}function c(ne,pe){const We=this.stack.pop(),st=this.tokenStack.pop();if(st)st[0].type!==ne.type&&(pe?pe.call(this,ne,st[0]):(st[1]||nV).call(this,ne,st[0]));else throw new Error("Cannot close `"+ne.type+"` ("+E0({start:ne.start,end:ne.end})+"): its not open");We.position.end=Su(ne.end)}function u(){return UAe(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(ne){if(this.data.expectingFirstListItemValue){const pe=this.stack[this.stack.length-2];pe.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function p(){const ne=this.resume(),pe=this.stack[this.stack.length-1];pe.lang=ne}function m(){const ne=this.resume(),pe=this.stack[this.stack.length-1];pe.meta=ne}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const ne=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const ne=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ne.replace(/(\r?\n|\r)$/g,"")}function b(ne){const pe=this.resume(),We=this.stack[this.stack.length-1];We.label=pe,We.identifier=hm(this.sliceSerialize(ne)).toLowerCase()}function E(){const ne=this.resume(),pe=this.stack[this.stack.length-1];pe.title=ne}function S(){const ne=this.resume(),pe=this.stack[this.stack.length-1];pe.url=ne}function I(ne){const pe=this.stack[this.stack.length-1];if(!pe.depth){const We=this.sliceSerialize(ne).length;pe.depth=We}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function L(ne){const pe=this.stack[this.stack.length-1];pe.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function j(){this.data.setextHeadingSlurpLineEnding=void 0}function z(ne){const We=this.stack[this.stack.length-1].children;let st=We[We.length-1];(!st||st.type!=="text")&&(st=Fe(),st.position={start:Su(ne.start),end:void 0},We.push(st)),this.stack.push(st)}function A(ne){const pe=this.stack.pop();pe.value+=this.sliceSerialize(ne),pe.position.end=Su(ne.end)}function V(ne){const pe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const We=pe.children[pe.children.length-1];We.position.end=Su(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(pe.type)&&(z.call(this,ne),A.call(this,ne))}function G(){this.data.atHardBreak=!0}function X(){const ne=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ne}function $(){const ne=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ne}function B(){const ne=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ne}function K(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=pe,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function P(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=pe,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function D(ne){const pe=this.sliceSerialize(ne),We=this.stack[this.stack.length-2];We.label=Mke(pe),We.identifier=hm(pe).toLowerCase()}function H(){const ne=this.stack[this.stack.length-1],pe=this.resume(),We=this.stack[this.stack.length-1];if(this.data.inReference=!0,We.type==="link"){const st=ne.children;We.children=st}else We.alt=pe}function x(){const ne=this.resume(),pe=this.stack[this.stack.length-1];pe.url=ne}function w(){const ne=this.resume(),pe=this.stack[this.stack.length-1];pe.title=ne}function O(){this.data.inReference=void 0}function C(){this.data.referenceType="collapsed"}function q(ne){const pe=this.resume(),We=this.stack[this.stack.length-1];We.label=pe,We.identifier=hm(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function F(ne){this.data.characterReferenceType=ne.type}function J(ne){const pe=this.sliceSerialize(ne),We=this.data.characterReferenceType;let st;We?(st=zZ(pe,We==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):st=Cj(pe);const Yt=this.stack[this.stack.length-1];Yt.value+=st}function se(ne){const pe=this.stack.pop();pe.position.end=Su(ne.end)}function he(ne){A.call(this,ne);const pe=this.stack[this.stack.length-1];pe.url=this.sliceSerialize(ne)}function ge(ne){A.call(this,ne);const pe=this.stack[this.stack.length-1];pe.url="mailto:"+this.sliceSerialize(ne)}function je(){return{type:"blockquote",children:[]}}function ze(){return{type:"code",lang:null,meta:null,value:""}}function Me(){return{type:"inlineCode",value:""}}function tt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Tt(){return{type:"emphasis",children:[]}}function rt(){return{type:"heading",depth:0,children:[]}}function yt(){return{type:"break"}}function Oe(){return{type:"html",value:""}}function it(){return{type:"image",title:null,url:"",alt:null}}function Ge(){return{type:"link",title:null,url:"",children:[]}}function Ze(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function Re(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function Z(){return{type:"paragraph",children:[]}}function Te(){return{type:"strong",children:[]}}function Fe(){return{type:"text",value:""}}function He(){return{type:"thematicBreak"}}}function Su(e){return{line:e.line,column:e.column,offset:e.offset}}function tee(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?tee(e,n):Bke(e,n)}}function Bke(e,t){let r;for(r in t)if(eee.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function nV(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+E0({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+E0({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+E0({start:t.start,end:t.end})+") is still open")}function $ke(e){const t=this;t.parser=r;function r(n){return Fke(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Hke(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function zke(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function Gke(e,t){const r=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Wke(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Kke(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function qke(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),i=Ig(n.toLowerCase()),a=e.footnoteOrder.indexOf(n);let o,s=e.footnoteCounts.get(n);s===void 0?(s=0,e.footnoteOrder.push(n),o=e.footnoteOrder.length):o=a+1,s+=1,e.footnoteCounts.set(n,s);const l={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+i,id:r+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)}function Yke(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Xke(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function ree(e,t){const r=t.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const i=e.all(t),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=n:i.push({type:"text",value:n}),i}function Jke(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return ree(e,t);const i={src:Ig(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(i.title=n.title);const a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)}function Qke(e,t){const r={src:Ig(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function Zke(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function ePe(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return ree(e,t);const i={href:Ig(n.url||"")};n.title!==null&&n.title!==void 0&&(i.title=n.title);const a={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function tPe(e,t){const r={href:Ig(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rPe(e,t,r){const n=e.all(t),i=r?nPe(r):nee(t),a={},o=[];if(typeof t.checked=="boolean"){const u=n[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},n.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let s=-1;for(;++s<n.length;){const u=n[s];(i||s!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=n[n.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,c),e.applyData(t,c)}function nPe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=nee(r[n])}return t}function nee(e){const t=e.spread;return t??e.children.length>1}function iPe(e,t){const r={},n=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++i<n.length;){const o=n[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,a),e.applyData(t,a)}function aPe(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function oPe(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function sPe(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function lPe(e,t){const r=e.all(t),n=r.shift(),i=[];if(n){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],o),i.push(o)}if(r.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},s=Ej(t.children[1]),l=MZ(t.children[t.children.length-1]);s&&l&&(o.position={start:s,end:l}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)}function cPe(e,t,r){const n=r?r.children:void 0,a=(n?n.indexOf(t):1)===0?"th":"td",o=r&&r.type==="table"?r.align:void 0,s=o?o.length:t.children.length;let l=-1;const c=[];for(;++l<s;){const h=t.children[l],f={},p=o?o[l]:void 0;p&&(f.align=p);let m={type:"element",tagName:a,properties:f,children:[]};h&&(m.children=e.all(h),e.patch(h,m),m=e.applyData(h,m)),c.push(m)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,u),e.applyData(t,u)}function uPe(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const iV=9,aV=32;function dPe(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),i=0;const a=[];for(;n;)a.push(oV(t.slice(i,n.index),i>0,!0),n[0]),i=n.index+n[0].length,n=r.exec(t);return a.push(oV(t.slice(i),i>0,!1)),a.join("")}function oV(e,t,r){let n=0,i=e.length;if(t){let a=e.codePointAt(n);for(;a===iV||a===aV;)n++,a=e.codePointAt(n)}if(r){let a=e.codePointAt(i-1);for(;a===iV||a===aV;)i--,a=e.codePointAt(i-1)}return i>n?e.slice(n,i):""}function hPe(e,t){const r={type:"text",value:dPe(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function fPe(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const pPe={blockquote:Hke,break:zke,code:Gke,delete:Wke,emphasis:Kke,footnoteReference:qke,heading:Yke,html:Xke,imageReference:Jke,image:Qke,inlineCode:Zke,linkReference:ePe,link:tPe,listItem:rPe,list:iPe,paragraph:aPe,root:oPe,strong:sPe,table:lPe,tableCell:uPe,tableRow:cPe,text:hPe,thematicBreak:fPe,toml:Fw,yaml:Fw,definition:Fw,footnoteDefinition:Fw};function Fw(){}const iee=-1,QC=0,S0=1,nT=2,Ij=3,Nj=4,Aj=5,Oj=6,aee=7,oee=8,sV=typeof self=="object"?self:globalThis,mPe=(e,t)=>{const r=(i,a)=>(e.set(a,i),i),n=i=>{if(e.has(i))return e.get(i);const[a,o]=t[i];switch(a){case QC:case iee:return r(o,i);case S0:{const s=r([],i);for(const l of o)s.push(n(l));return s}case nT:{const s=r({},i);for(const[l,c]of o)s[n(l)]=n(c);return s}case Ij:return r(new Date(o),i);case Nj:{const{source:s,flags:l}=o;return r(new RegExp(s,l),i)}case Aj:{const s=r(new Map,i);for(const[l,c]of o)s.set(n(l),n(c));return s}case Oj:{const s=r(new Set,i);for(const l of o)s.add(n(l));return s}case aee:{const{name:s,message:l}=o;return r(new sV[s](l),i)}case oee:return r(BigInt(o),i);case"BigInt":return r(Object(BigInt(o)),i);case"ArrayBuffer":return r(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:s}=new Uint8Array(o);return r(new DataView(s),o)}}return r(new sV[a](o),i)};return n},lV=e=>mPe(new Map,e)(0),Xf="",{toString:gPe}={},{keys:yPe}=Object,py=e=>{const t=typeof e;if(t!=="object"||!e)return[QC,t];const r=gPe.call(e).slice(8,-1);switch(r){case"Array":return[S0,Xf];case"Object":return[nT,Xf];case"Date":return[Ij,Xf];case"RegExp":return[Nj,Xf];case"Map":return[Aj,Xf];case"Set":return[Oj,Xf];case"DataView":return[S0,r]}return r.includes("Array")?[S0,r]:r.includes("Error")?[aee,r]:[nT,r]},Vw=([e,t])=>e===QC&&(t==="function"||t==="symbol"),vPe=(e,t,r,n)=>{const i=(o,s)=>{const l=n.push(o)-1;return r.set(s,l),l},a=o=>{if(r.has(o))return r.get(o);let[s,l]=py(o);switch(s){case QC:{let u=o;switch(l){case"bigint":s=oee,u=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([iee],o)}return i([s,u],o)}case S0:{if(l){let f=o;return l==="DataView"?f=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(o)),i([l,[...f]],o)}const u=[],h=i([s,u],o);for(const f of o)u.push(a(f));return h}case nT:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const u=[],h=i([s,u],o);for(const f of yPe(o))(e||!Vw(py(o[f])))&&u.push([a(f),a(o[f])]);return h}case Ij:return i([s,o.toISOString()],o);case Nj:{const{source:u,flags:h}=o;return i([s,{source:u,flags:h}],o)}case Aj:{const u=[],h=i([s,u],o);for(const[f,p]of o)(e||!(Vw(py(f))||Vw(py(p))))&&u.push([a(f),a(p)]);return h}case Oj:{const u=[],h=i([s,u],o);for(const f of o)(e||!Vw(py(f)))&&u.push(a(f));return h}}const{message:c}=o;return i([s,{name:l,message:c}],o)};return a},cV=(e,{json:t,lossy:r}={})=>{const n=[];return vPe(!(t||r),!!t,new Map,n)(e),n},iT=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?lV(cV(e,t)):structuredClone(e):(e,t)=>lV(cV(e,t));function bPe(e,t){const r=[{type:"text",value:""}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function wPe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function EPe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||bPe,n=e.options.footnoteBackLabel||wPe,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[l]);if(!c)continue;const u=e.all(c),h=String(c.identifier).toUpperCase(),f=Ig(h.toLowerCase());let p=0;const m=[],g=e.footnoteCounts.get(h);for(;g!==void 0&&++p<=g;){m.length>0&&m.push({type:"text",value:" "});let b=typeof r=="string"?r:r(l,p);typeof b=="string"&&(b={type:"text",value:b}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(l,p),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const b=y.children[y.children.length-1];b&&b.type==="text"?b.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...m)}else u.push(...m);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(u,!0)};e.patch(c,v),s.push(v)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...iT(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:`
`}]}}const see=function(e){if(e==null)return CPe;if(typeof e=="function")return ZC(e);if(typeof e=="object")return Array.isArray(e)?_Pe(e):SPe(e);if(typeof e=="string")return TPe(e);throw new Error("Expected function, string, or object as test")};function _Pe(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=see(e[r]);return ZC(n);function n(...i){let a=-1;for(;++a<t.length;)if(t[a].apply(this,i))return!0;return!1}}function SPe(e){const t=e;return ZC(r);function r(n){const i=n;let a;for(a in e)if(i[a]!==t[a])return!1;return!0}}function TPe(e){return ZC(t);function t(r){return r&&r.type===e}}function ZC(e){return t;function t(r,n,i){return!!(xPe(r)&&e.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function CPe(){return!0}function xPe(e){return e!==null&&typeof e=="object"&&"type"in e}const lee=[],RPe=!0,uV=!1,IPe="skip";function NPe(e,t,r,n){let i;typeof t=="function"&&typeof r!="function"?(n=r,r=t):i=t;const a=see(i),o=n?-1:1;s(e,void 0,[])();function s(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=lee,m,g,y;if((!t||a(l,c,u[u.length-1]||void 0))&&(p=APe(r(l,u)),p[0]===uV))return p;if("children"in l&&l.children){const v=l;if(v.children&&p[0]!==IPe)for(g=(n?v.children.length:-1)+o,y=u.concat(v);g>-1&&g<v.children.length;){const b=v.children[g];if(m=s(b,g,y)(),m[0]===uV)return m;g=typeof m[1]=="number"?m[1]:g+o}}return p}}}function APe(e){return Array.isArray(e)?e:typeof e=="number"?[RPe,e]:e==null?lee:[e]}function cee(e,t,r,n){let i,a,o;typeof t=="function"&&typeof r!="function"?(a=void 0,o=t,i=r):(a=t,o=r,i=n),NPe(e,a,s,i);function s(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return o(l,h,u)}}const aP={}.hasOwnProperty,OPe={};function kPe(e,t){const r=t||OPe,n=new Map,i=new Map,a=new Map,o={...pPe,...r.handlers},s={all:c,applyData:DPe,definitionById:n,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:l,options:r,patch:PPe,wrap:jPe};return cee(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?n:i,f=String(u.identifier).toUpperCase();h.has(f)||h.set(f,u)}}),s;function l(u,h){const f=u.type,p=s.handlers[f];if(aP.call(s.handlers,f)&&p)return p(s,u,h);if(s.options.passThrough&&s.options.passThrough.includes(f)){if("children"in u){const{children:g,...y}=u,v=iT(y);return v.children=s.all(u),v}return iT(u)}return(s.options.unknownHandler||LPe)(s,u,h)}function c(u){const h=[];if("children"in u){const f=u.children;let p=-1;for(;++p<f.length;){const m=s.one(f[p],u);if(m){if(p&&f[p-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=dV(m.value)),!Array.isArray(m)&&m.type==="element")){const g=m.children[0];g&&g.type==="text"&&(g.value=dV(g.value))}Array.isArray(m)?h.push(...m):h.push(m)}}}return h}}function PPe(e,t){e.position&&(t.position=gAe(e))}function DPe(e,t){let r=t;if(e&&e.data){const n=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const o="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:o}}r.type==="element"&&a&&Object.assign(r.properties,iT(a)),"children"in r&&r.children&&i!==null&&i!==void 0&&(r.children=i)}return r}function LPe(e,t){const r=t.data||{},n="value"in t&&!(aP.call(r,"hProperties")||aP.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jPe(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function dV(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function hV(e,t){const r=kPe(e,t),n=r.one(e,void 0),i=EPe(r),a=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function MPe(e,t){return e&&"run"in e?async function(r,n){const i=hV(r,{file:n,...t});await e.run(i,n)}:function(r,n){return hV(r,{file:n,...e||t})}}function fV(e){if(e)throw e}var u_=Object.prototype.hasOwnProperty,uee=Object.prototype.toString,pV=Object.defineProperty,mV=Object.getOwnPropertyDescriptor,gV=function(t){return typeof Array.isArray=="function"?Array.isArray(t):uee.call(t)==="[object Array]"},yV=function(t){if(!t||uee.call(t)!=="[object Object]")return!1;var r=u_.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&u_.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var i;for(i in t);return typeof i>"u"||u_.call(t,i)},vV=function(t,r){pV&&r.name==="__proto__"?pV(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},bV=function(t,r){if(r==="__proto__")if(u_.call(t,r)){if(mV)return mV(t,r).value}else return;return t[r]},UPe=function e(){var t,r,n,i,a,o,s=arguments[0],l=1,c=arguments.length,u=!1;for(typeof s=="boolean"&&(u=s,s=arguments[1]||{},l=2),(s==null||typeof s!="object"&&typeof s!="function")&&(s={});l<c;++l)if(t=arguments[l],t!=null)for(r in t)n=bV(s,r),i=bV(t,r),s!==i&&(u&&i&&(yV(i)||(a=gV(i)))?(a?(a=!1,o=n&&gV(n)?n:[]):o=n&&yV(n)?n:{},vV(s,{name:r,newValue:e(u,o,i)})):typeof i<"u"&&vV(s,{name:r,newValue:i}));return s};const NI=es(UPe);function oP(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function FPe(){const e=[],t={run:r,use:n};return t;function r(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);s(null,...i);function s(l,...c){const u=e[++a];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?VPe(u,s)(...c):o(null,...c)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function VPe(e,t){let r;return n;function n(...o){const s=e.length>o.length;let l;s&&o.push(i);try{l=e.apply(this,o)}catch(c){const u=c;if(s&&r)throw u;return i(u)}s||(l&&l.then&&typeof l.then=="function"?l.then(a,i):l instanceof Error?i(l):a(l))}function i(o,...s){r||(r=!0,t(o,...s))}function a(o){i(null,o)}}const Vl={basename:BPe,dirname:$Pe,extname:HPe,join:zPe,sep:"/"};function BPe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ob(e);let r=0,n=-1,i=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){r=i+1;break}}else n<0&&(a=!0,n=i+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let o=-1,s=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){r=i+1;break}}else o<0&&(a=!0,o=i+1),s>-1&&(e.codePointAt(i)===t.codePointAt(s--)?s<0&&(n=i):(s=-1,n=o));return r===n?n=o:n<0&&(n=e.length),e.slice(r,n)}function $Pe(e){if(Ob(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function HPe(e){Ob(e);let t=e.length,r=-1,n=0,i=-1,a=0,o;for(;t--;){const s=e.codePointAt(t);if(s===47){if(o){n=t+1;break}continue}r<0&&(o=!0,r=t+1),s===46?i<0?i=t:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||r<0||a===0||a===1&&i===r-1&&i===n+1?"":e.slice(i,r)}function zPe(...e){let t=-1,r;for(;++t<e.length;)Ob(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":GPe(r)}function GPe(e){Ob(e);const t=e.codePointAt(0)===47;let r=WPe(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function WPe(e,t){let r="",n=0,i=-1,a=0,o=-1,s,l;for(;++o<=e.length;){if(o<e.length)s=e.codePointAt(o);else{if(s===47)break;s=47}if(s===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(l=r.lastIndexOf("/"),l!==r.length-1){l<0?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=o,a=0;continue}}else if(r.length>0){r="",n=0,i=o,a=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(i+1,o):r=e.slice(i+1,o),n=o-i-1;i=o,a=0}else s===46&&a>-1?a++:a=-1}return r}function Ob(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const KPe={cwd:qPe};function qPe(){return"/"}function sP(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function YPe(e){if(typeof e=="string")e=new URL(e);else if(!sP(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return XPe(e)}function XPe(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const n=t.codePointAt(r+2);if(n===70||n===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const AI=["history","path","basename","stem","extname","dirname"];class dee{constructor(t){let r;t?sP(t)?r={path:t}:typeof t=="string"||JPe(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":KPe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<AI.length;){const a=AI[n];a in r&&r[a]!==void 0&&r[a]!==null&&(this[a]=a==="history"?[...r[a]]:r[a])}let i;for(i in r)AI.includes(i)||(this[i]=r[i])}get basename(){return typeof this.path=="string"?Vl.basename(this.path):void 0}set basename(t){kI(t,"basename"),OI(t,"basename"),this.path=Vl.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Vl.dirname(this.path):void 0}set dirname(t){wV(this.basename,"dirname"),this.path=Vl.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Vl.extname(this.path):void 0}set extname(t){if(OI(t,"extname"),wV(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vl.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){sP(t)&&(t=YPe(t)),kI(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Vl.basename(this.path,this.extname):void 0}set stem(t){kI(t,"stem"),OI(t,"stem"),this.path=Vl.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){const i=this.message(t,r,n);throw i.fatal=!0,i}info(t,r,n){const i=this.message(t,r,n);return i.fatal=void 0,i}message(t,r,n){const i=new Oa(t,r,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function OI(e,t){if(e&&e.includes(Vl.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Vl.sep+"`")}function kI(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function wV(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function JPe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const QPe=function(e){const n=this.constructor.prototype,i=n[e],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,n),a},ZPe={}.hasOwnProperty;class kj extends QPe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=FPe()}copy(){const t=new kj;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];t.use(...n)}return t.data(NI(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(LI("data",this.frozen),this.namespace[t]=r,this):ZPe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(LI("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const i=r.call(t,...n);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=Bw(t),n=this.parser||this.Parser;return PI("parse",n),n(String(r),r)}process(t,r){const n=this;return this.freeze(),PI("process",this.parser||this.Parser),DI("process",this.compiler||this.Compiler),r?i(void 0,r):new Promise(i);function i(a,o){const s=Bw(t),l=n.parse(s);n.run(l,s,function(u,h,f){if(u||!h||!f)return c(u);const p=h,m=n.stringify(p,f);rDe(m)?f.value=m:f.result=m,c(u,f)});function c(u,h){u||!h?o(u):a?a(h):r(void 0,h)}}}processSync(t){let r=!1,n;return this.freeze(),PI("processSync",this.parser||this.Parser),DI("processSync",this.compiler||this.Compiler),this.process(t,i),_V("processSync","process",r),n;function i(a,o){r=!0,fV(a),n=o}}run(t,r,n){EV(t),this.freeze();const i=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?a(void 0,n):new Promise(a);function a(o,s){const l=Bw(r);i.run(t,l,c);function c(u,h,f){const p=h||t;u?s(u):o?o(p):n(void 0,p,f)}}}runSync(t,r){let n=!1,i;return this.run(t,r,a),_V("runSync","run",n),i;function a(o,s){fV(o),i=s,n=!0}}stringify(t,r){this.freeze();const n=Bw(r),i=this.compiler||this.Compiler;return DI("stringify",i),EV(t),i(t,n)}use(t,...r){const n=this.attachers,i=this.namespace;if(LI("use",this.frozen),t!=null)if(typeof t=="function")l(t,r);else if(typeof t=="object")Array.isArray(t)?s(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(c.plugins),c.settings&&(i.settings=NI(!0,i.settings,c.settings))}function s(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];a(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,f=-1;for(;++h<n.length;)if(n[h][0]===c){f=h;break}if(f===-1)n.push([c,...u]);else if(u.length>0){let[p,...m]=u;const g=n[f][1];oP(g)&&oP(p)&&(p=NI(!0,g,p)),n[f]=[c,p,...m]}}}}const eDe=new kj().freeze();function PI(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function DI(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function LI(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function EV(e){if(!oP(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function _V(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Bw(e){return tDe(e)?e:new dee(e)}function tDe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function rDe(e){return typeof e=="string"||nDe(e)}function nDe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const iDe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",SV=[],TV={allowDangerousHtml:!0},aDe=/^(https?|ircs?|mailto|xmpp)$/i,oDe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function sDe(e){const t=lDe(e),r=cDe(e);return uDe(t.runSync(t.parse(r),r),e)}function lDe(e){const t=e.rehypePlugins||SV,r=e.remarkPlugins||SV,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...TV}:TV;return eDe().use($ke).use(r).use(MPe,n).use(t)}function cDe(e){const t=e.children||"",r=new dee;return typeof t=="string"&&(r.value=t),r}function uDe(e,t){const r=t.allowedElements,n=t.allowElement,i=t.components,a=t.disallowedElements,o=t.skipHtml,s=t.unwrapDisallowed,l=t.urlTransform||dDe;for(const u of oDe)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+iDe+u.id,void 0);return cee(e,c),EAe(e,{Fragment:d.Fragment,components:i,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function c(u,h,f){if(u.type==="raw"&&f&&typeof h=="number")return o?f.children.splice(h,1):f.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let p;for(p in xI)if(Object.hasOwn(xI,p)&&Object.hasOwn(u.properties,p)){const m=u.properties[p],g=xI[p];(g===null||g.includes(u.tagName))&&(u.properties[p]=l(String(m||""),p,u))}}if(u.type==="element"){let p=r?!r.includes(u.tagName):a?a.includes(u.tagName):!1;if(!p&&n&&typeof h=="number"&&(p=!n(u,h,f)),p&&f&&typeof h=="number")return s&&u.children?f.children.splice(h,1,...u.children):f.children.splice(h,1),h}}}function dDe(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||r!==-1&&t>r||n!==-1&&t>n||aDe.test(e.slice(0,t))?e:""}function hDe(e){const{medicineId:t}=e,[r,n]=T.useState(void 0);console.log("medicineId",t);const i=async()=>{const a=await YIe({medicineId:t});console.log("medicine",a),n(a)};return T.useEffect(()=>{i()},[]),d.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:d.jsxs("div",{className:"h-full w-full flex flex-col ",children:[d.jsx("div",{className:"w-full h-[50%] ",children:d.jsx("img",{src:r==null?void 0:r.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[d.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:r==null?void 0:r.medicineName}),d.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:d.jsxs("div",{className:"price w-full h-[5vh] flex flex-col",children:[d.jsx("h1",{className:"w-full h-full flex gap-2 items-center text-sm opacity-50",children:"Description"}),d.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-md",children:[" ",r==null?void 0:r.description]})]})})]}),d.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",children:"Order Medicine"})})]})]})})}function fDe(){T.useState();const[e,t]=T.useState(void 0);T.useState(void 0);const r=async(n,i)=>{const a=await SZ({diseaseName:i});console.log("doctor",a),window.location.reload()};return d.jsx("div",{className:"w-full h-screen pt-10 flex flex-col",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-6",children:[d.jsx("div",{className:"header w-full h-[10%] flex justify-start",children:d.jsx("span",{className:"text-2xl font-medium",children:"Treatment Suggestion "})}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-5",children:[d.jsx("input",{type:"text",name:"disease",className:"w-[40%]",onChange:n=>t(n.target.value),placeholder:"type disease name"}),d.jsx("button",{className:"h-full w-[5vw] bg-orange-500 shadow-lg rounded-md",onClick:n=>r(n,e),children:"Search"})]}),d.jsxs("div",{className:"w-full h-auto border rounded-lg p-2 grid grid-cols-2 gap-4",children:[d.jsx("div",{className:"flex w-full h-auto bg-black bg-opacity-20",children:e&&d.jsx(pDe,{diseaseName:e})}),d.jsx("div",{className:"flex w-full h-auto bg-black bg-opacity-20 p-2",children:e&&d.jsx(mDe,{diseaseName:e})}),d.jsx("div",{className:"flex w-full h-auto bg-black bg-opacity-20 p-2",children:e&&d.jsx(gDe,{diseaseName:e})})]})]})})}function pDe(e){const{diseaseName:t}=e,[r,n]=T.useState(void 0),i=async()=>{const a=await SZ({diseaseName:t}),o=await wZ({doctorId:a});n(o)};return T.useEffect(()=>{i()},[]),T.useEffect(()=>{i()},[t]),d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-2",children:[d.jsx("h2",{className:"w-full h-auto p-3 flex justify-center bg-blue-500 text-lg text-white",children:"Suggested Doctors"}),d.jsx("div",{className:"suggestions w-full h-auto mt-3",children:r&&d.jsx(bZ,{doctor:r})})]})}function mDe(e){const t="AIzaSyBXEFxQGZZevsfg-BQhHu1H9bgMhfv39ig",n=new CNe(t).getGenerativeModel({model:"gemini-1.5-flash"}),{diseaseName:i}=e,[a,o]=T.useState(""),s=async()=>{const l=`As a doctor explain the precautions to be followed for a patient suffering from disease " ${i} " and present it in a professional structured way`,c=await n.generateContent(l);o(c.response.text())};return T.useEffect(()=>{s()},[]),T.useEffect(()=>{s()},[i]),d.jsxs("div",{className:"w-full h-auto flex flex-col gap-4 p-2",children:[d.jsx("div",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center",children:`Precautions for ${i}`}),d.jsx("div",{className:"w-full h-auto flex flex-col gap-2",children:d.jsx(sDe,{children:a})})]})}function gDe(e){const{diseaseName:t}=e,[r,n]=T.useState([]),i=async()=>{const a=await qIe({diseaseName:t});n(a)};return T.useEffect(()=>{i()},[]),T.useEffect(()=>{i()},[t]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full grid grid-cols-2 gap-4",children:(r==null?void 0:r.length)>0&&r.map((a,o)=>d.jsx("div",{className:"w-full h-auto",children:d.jsx(hDe,{medicineId:a})},o))})})}function yDe(e){return Wn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M363 277h-86v86h-42v-86h-86v-42h86v-86h42v86h86v42z"},child:[]},{tag:"path",attr:{d:"M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422c-44.3 0-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256c0-44.3 17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}function vDe(e){return Wn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M426.666 330.667a250.385 250.385 0 0 1-75.729-11.729c-7.469-2.136-16-1.073-21.332 5.333l-46.939 46.928c-60.802-30.928-109.864-80-140.802-140.803l46.939-46.927c5.332-5.333 7.462-13.864 5.332-21.333-8.537-24.531-12.802-50.136-12.802-76.803C181.333 73.604 171.734 64 160 64H85.333C73.599 64 64 73.604 64 85.333 64 285.864 226.136 448 426.666 448c11.73 0 21.334-9.604 21.334-21.333V352c0-11.729-9.604-21.333-21.334-21.333z"},child:[]}]})(e)}function bDe(e){return Wn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M113.5 281.2v85.3L256 448l142.5-81.5v-85.3L256 362.7l-142.5-81.5zM256 64L32 192l224 128 183.3-104.7v147.4H480V192L256 64z"},child:[]}]})(e)}function wDe(e){return Wn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 192v128h85.334L256 431.543V80.458L149.334 192H64z"},child:[]}]})(e)}function EDe(e){return Wn({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{strokeWidth:"2",d:"M15 19H2V1h16v4m0 0a5 5 0 110 10 5 5 0 010-10zm-3 9v8l3-2 3 2v-8M5 8h6m-6 3h5m-5 3h2M5 5h2"},child:[]}]})(e)}function _De(){return d.jsxs("div",{className:"w-full h-[10vh] px-2 text-center font-bold flex justify-center items-center gap-2 ",children:[d.jsxs(nr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/doctor/profile/details",children:[d.jsx(qC,{className:"h-[3vh] w-[2vw]"}),d.jsx("span",{className:"flex flex-1",children:"Profile Details"})]}),d.jsxs(nr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/doctor/profile/contact",children:[d.jsx(uj,{className:"h-[3vh] w-[2vw]"}),d.jsx("span",{className:"flex flex-1",children:"Contact Details"})]}),d.jsxs(nr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/doctor/profile/resetPassword",children:[d.jsx(dj,{className:"h-[3vh] w-[2vw]"}),d.jsx("span",{className:"flex flex-1",children:"Password Reset"})]}),d.jsxs(nr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"",children:[d.jsx(bDe,{className:"h-[3vh] w-[2vw]"}),d.jsx("span",{className:"flex flex-1",children:"Educational Details"})]}),d.jsxs(nr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"",children:[d.jsx(EDe,{className:"h-[3vh] w-[2vw]"}),d.jsx("span",{className:"flex flex-1",children:"Proof Documents"})]})]})}function SDe(){return d.jsxs("div",{className:"screen w-full h-full ",children:[d.jsx("div",{children:d.jsx(_De,{})}),d.jsx("div",{className:"content w-full h-full flex flex-1 flex-col",children:d.jsx(oi,{})})]})}const Ng="https://hcompanion.onrender.com/api",ex=sessionStorage.getItem("token"),TDe=async e=>{try{const t=await ce.post(`${Ng}/doctor/profile/updateDetails`,{updateDetails:e},{headers:{Authorization:`bearer ${ex}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},CDe=async()=>{try{return(await ce.get(`${Ng}/doctor/profile/viewDetails`,{headers:{Authorization:`bearer ${ex}`}})).data.doctorDetails}catch(e){return console.log(e),!1}},xDe=async()=>{try{const e=await ce.get(`${Ng}/doctor/profile/getContactDetails`,{headers:{Authorization:`bearer ${ex}`}});return console.log(e.data),e.data.contactDetails}catch(e){return console.log(e),!1}},RDe=async e=>{try{const t=await ce.post(`${Ng}/doctor/profile/updateContactDetails`,e,{headers:{Authorization:`bearer ${ex}`}});return console.log(t.data),Q.fire({icon:"success",text:"Contact Details Have been Updated"}),t.data.contactDetails}catch(t){return console.log(t),!1}},hee=async e=>{try{const t=await ce.post(`${Ng}/doctor/approval/form/submit`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},IDe=async()=>{try{return(await ce.get(`${Ng}/doctor/approval/viewDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.doctorDetails}catch(e){return console.log(e),!1}};function NDe(){const[e,t]=T.useState(""),r=Sr({initialValues:{firstName:"",lastName:"",age:"",bloodGroup:"",height:"",weight:"",profileImage:""},validationSchema:Vi().shape({}),onSubmit:async(a,o)=>{console.log("values",a),await TDe(a)&&(Q.fire({icon:"success",text:"The profile has been updated"}),i())}}),n=a=>{const o=a.target.files[0],s=new FileReader;s.onload=l=>{t(l.target.result),r.setFieldValue("profileImage",o)},s.readAsDataURL(a.target.files[0])},i=async()=>{const a=await CDe();r.setFieldValue("firstName",a.firstName),r.setFieldValue("lastName",a.lastName),r.setFieldValue("age",a.age),r.setFieldValue("bloodGroup",a.bloodGroup),r.setFieldValue("height",a.height),r.setFieldValue("weight",a.weight),r.setFieldValue("profileImage",a.profileImage),t(a.profileImage)};return T.useEffect(()=>{i()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full flex flex-col items-center",children:d.jsxs("form",{className:"w-[50%] h-full flex flex-col gap-6 pt-10 ",children:[d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{helperText:"Choose an Image",name:"profileImage",onChange:n})})})]}),d.jsx(ie,{variant:"filled",label:"First Name",name:"firstName",value:r.values.firstName,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Last Name",name:"lastName",value:r.values.lastName,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Age",name:"age",value:r.values.age,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Blood Group",name:"bloodGroup",value:r.values.bloodGroup,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Height",name:"height",value:r.values.height,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Weight",name:"weight",value:r.values.weight,onChange:r.handleChange}),d.jsxs("button",{type:"button",onClick:r.handleSubmit,className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(xf,{}),"Save"]})]})})})}function ADe(){const e=Sr({initialValues:{place:"",state:"",district:"",country:"",pincode:"",houseName:"",phone:""},validationSchema:Vi().shape({}),onSubmit:async(r,n)=>{await RDe(r)&&t()}}),t=async()=>{const{phone:r,...n}=await xDe();console.log("temp contact",n._doc),e.setFieldValue("place",n._doc.place),e.setFieldValue("state",n._doc.state),e.setFieldValue("district",n._doc.district),e.setFieldValue("country",n._doc.country),e.setFieldValue("pincode",n._doc.pincode?n._doc.pincode:""),e.setFieldValue("houseName",n._doc.houseName),e.setFieldValue("phone",r)};return T.useEffect(()=>{t()},[]),d.jsx("div",{className:"w-full h-full",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 items-center pt-10",children:[d.jsx("div",{className:"w-[70%] ",children:d.jsx("h1",{className:"text-lg font-medium",children:"Address"})}),d.jsxs("form",{className:"w-[70%]  grid grid-cols-2 gap-4",children:[d.jsx(ie,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:e.values.houseName}),d.jsx(ie,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),d.jsx(ie,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),d.jsx(ie,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),d.jsx(ie,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),d.jsx(ie,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]}),d.jsxs("form",{className:"w-[70%] flex flex-col pt-10",children:[d.jsx("div",{children:d.jsx("h1",{className:"text-lg font-medium",children:"Contact Details"})}),d.jsx("div",{className:"w-[30%] flex flex-col gap-4 mt-5 ",children:d.jsx(ie,{variant:"filled",label:"Phone",className:"font-bold",name:"phone",onChange:e.handleChange,value:e.values.phone})})]}),d.jsxs("button",{type:"button",onClick:e.handleSubmit,className:"w-[70%] text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(xf,{}),"Save"]})]})})}function ODe(){return d.jsx("div",{className:"w-full h-screen flex pt-[15vh] justify-center",children:d.jsxs("div",{className:"resetPassword w-[40%] h-fit flex flex-col gap-6 border shadow-lg p-5 ",children:[d.jsx("h1",{className:"text-lg font-medium",children:"Reset Password"}),d.jsx(pZ,{})]})})}function kDe(){const{username:e}=Yr(r=>r.user),{pharmacyName:t}=Yr(r=>r.pharmacy);return d.jsxs("div",{className:"w-full h-full flex flex-col",children:[d.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:d.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:d.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white p-10",children:[d.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome"}),d.jsx("span",{className:"text-[10vh] font-bold",children:t||e}),d.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Pharmacy offers you the best Management of the Medicines"})]})})}),d.jsx("div",{className:"stock w-full h-auto mt-5",children:d.jsx("div",{className:"w-full h-[100vh] flex gap-10",children:d.jsx("div",{className:"w-full h-auto flex justify-center",children:d.jsx("img",{src:"/normalUser.png",className:"rounded-full object-fit h-[20vh] w-[10vw]"})})})})]})}const Nf="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const fee=async()=>{try{const e=await ce.get(`${Nf}/laboratory/profile/getDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("lab details",e.data),e.data.laboratoryDetails}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?Q.fire({icon:"warning",text:"Your session is out.....please Log In"}):e.status=="401"&&Q.fire({icon:"warning",text:"Log In"}),!1}},PDe=async e=>{try{const t=await ce.post(`${Nf}/laboratory/profile/updateDetails`,{updateDetails:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},DDe=async()=>{try{const e=await ce.get(`${Nf}/laboratory/profile/getProfileDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("profile details",e.data),e.data.details}catch(e){return console.log(e),!1}},LDe=async()=>{try{return(await ce.get(`${Nf}/laboratory/profile/getContactDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.contactDetails}catch(e){return console.log(e),!1}},jDe=async e=>{try{const t=await ce.post(`${Nf}/laboratory/profile/updateContactDetails`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return Q.fire({icon:"success",text:"Contact Details Have been Updated"}),!0}catch(t){return console.log(t),!1}},MDe=async e=>{try{const t=await ce.post(`${Nf}/laboratory/approval/form/submit`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},UDe=async()=>{try{return(await ce.get(`${Nf}/laboratory/approval/viewDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.laboratoryDetails}catch(e){return console.log(e),!1}},FDe={laboratoryName:"",ownerName:"",profileImage:""},pee=vg({name:"laboratory",initialState:FDe,reducers:{setLaboratory(e,t){e.laboratoryName=t.payload.laboratoryName,e.ownerName=t.payload.ownerName,e.profileImage=t.payload.profileImage}}}),{setLaboratory:mee}=pee.actions,VDe=pee.reducer;function BDe(){const e=fc(),t=Zt(),{username:r,email:n}=Yr(l=>l.user),{laboratoryName:i,ownerName:a,profileImage:o}=Yr(l=>l.laboratory),s=async()=>{const l=await fee();l&&((l==null?void 0:l.approvalStatus)=="0"?t("/laboratory/approval/form"):(l==null?void 0:l.approvalStatus)=="1"&&t("/laboratory/approval/submitted"),e(ai({username:l.userId.username,email:l.userId.email,phone:l.userId.phone,role:l.userId.role,isLoggedIn:!0})),e(mee({laboratoryName:l.laboratoryName,ownerName:l.ownerName,profileImage:l.profileImage})))};return T.useEffect(()=>{s()},[]),d.jsx("div",{className:"navbarParent h-full w-full ",children:d.jsxs("div",{className:"navbar w-full h-full flex flex-col rounded-tr-[3%] bg-pink-600 bg-opacity-90 p-4 gap-10 ",children:[d.jsxs("div",{className:"w-full h-[8vh] flex justify-start items-center gap-4 ",children:[d.jsx("img",{src:"/icons/arrowBack.png",alt:"",className:"h-[5vh] w-[] p-2 ml-2 bg-white  rounded-lg"}),d.jsx("h2",{className:"text-white text-sm",children:"Minimize"}),d.jsx("div",{className:"flex-1 h-full flex justify-end items-center",children:d.jsx("img",{src:"/logo.png",alt:"",className:"w-[7vw] h-[7vh] bg-white mr-4"})})]}),d.jsxs("div",{className:"profile h-[12%] flex flex-row justify-start gap-4",children:[d.jsx("div",{className:"profileImage w-auto h-full flex ",children:d.jsx("img",{src:o,alt:"image",className:"h-full w-[5vw] rounded-full "})}),d.jsxs("div",{className:"details flex-1 flex flex-col justify-center bg-white bg-opacity-30 p-2 rounded-lg gap-2 ",children:[d.jsx("span",{children:d.jsx("h2",{className:"text-white text-lg font-bold",children:i||r})}),d.jsx("span",{children:d.jsx("h2",{className:"text-white text-sm",children:"Laboratory"})})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(ie,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"home w-full text-white h-[80%] flex flex-col gap-4 border-slate-50",children:[d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/laboratory_homeIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full cursor-pointer",onClick:()=>{t("/laboratory/home")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/laboratory_serviceIcon.jpg",alt:"laboratory services",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full cursor-pointer",onClick:()=>{t("/laboratory/testServices")},children:"Laboratory test Services"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/laboratory_testOrderIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{t("/laboratory/order")},children:"Test Orders"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{t("/laboratory/profile")},children:"Profile"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),e(ai({})),t("/")},children:"sign out"})]})]})]})})}function $De(){return d.jsxs("div",{className:"w-screen h-screen flex fex-col",children:[d.jsx("div",{className:"fixed header w-[21%] h-[100vh] ",children:d.jsx(BDe,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4 overflow-y-auto",children:d.jsx(oi,{})})]})}function HDe(){return d.jsxs("div",{className:"w-full h-auto p-5 flex flex-row gap-5 justify-start ",children:[d.jsxs(nr,{className:"w-auto h-auto p-3 flex flex-row gap-5 items-center border rounded-lg shadow-lg shadow-emerald-200",to:"/laboratory/testServices/addTest",children:[d.jsx(yDe,{className:"w-[2vw] h-[4vh]"}),d.jsx("span",{className:"font-medium",children:"New Test"})]}),d.jsxs(nr,{className:"w-auto h-auto p-3 flex flex-row gap-5 items-center border rounded-lg shadow-lg shadow-emerald-200",to:"/laboratory/testServices/viewTests",children:[d.jsx(JRe,{className:"w-[2vw] h-[4vh]"}),d.jsx("span",{className:"font-medium",children:"View Test Service"})]})]})}function zDe(){return d.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[d.jsx("div",{className:"w-full h-[10vh]",children:d.jsx(HDe,{})}),d.jsx("div",{className:"content w-full h-full flex flex-col overflow-y-auto ",children:d.jsx(oi,{})})]})}const $s="https://hcompanion.onrender.com/api",Hs=sessionStorage.getItem("token"),GDe=async({testName:e,testId:t,atLab:r,atHome:n,priceHome:i,priceLab:a})=>{try{const o=await ce.post(`${$s}/laboratory/test/addTest`,{testId:t,priceHome:i,priceLab:a,atHome:n,atLab:r},{headers:{Authorization:`bearer ${Hs}`}});return!0}catch(o){return console.log(o),o.status=="500"&&o.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):o.status=="400"&&o.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):o.status=="400"&&o.response.data.errorTestPresent?Q.fire({icon:"warning",text:"Test Already Present"}):o.status=="401"&&Q.fire({icon:"warning",text:"Log In"}),!1}},WDe=async()=>{try{return(await ce.get(`${$s}/laboratory/test/getTestsPresent`,{headers:{Authorization:`bearer ${Hs}`}})).data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):e.status=="401"&&Q.fire({icon:"warning",text:"Log In"}),!1}},KDe=async()=>{try{return(await ce.get(`${$s}/laboratory/test/getAddedTests`,{headers:{Authorization:`bearer ${Hs}`}})).data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):e.status=="401"&&Q.fire({icon:"warning",text:"Log In"}),!1}},qDe=async({testName:e,testId:t})=>{try{const r=await ce.post(`${$s}/laboratory/test/getAddedTestDetails`,{testName:e,testId:t},{headers:{Authorization:`bearer ${Hs}`}});return console.log(r.data),r.data.test}catch(r){return console.log(r),r.status=="500"&&r.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):r.status=="400"&&r.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):r.status=="401"?Q.fire({icon:"warning",text:"Log In"}):r.status=="404"&&r.response.data.errorTestPresent&&Q.fire({icon:"warning",text:"Test can't be found at database"}),!1}},YDe=async({testName:e,testId:t,atHome:r,atLab:n,priceHome:i,priceLab:a})=>{try{const o=await ce.post(`${$s}/laboratory/test/updateAddedTestDetails`,{testName:e,testId:t,atHome:r,atLab:n,priceHome:i,priceLab:a},{headers:{Authorization:`bearer ${Hs}`}});return console.log(o.data),!0}catch(o){return console.log(o),o.status=="500"&&o.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):o.status=="400"&&o.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):o.status=="401"?Q.fire({icon:"warning",text:"Log In"}):o.status=="400"&&o.response.data.errorDatabase&&Q.fire({icon:"error",text:"Issue at the Database"}),!1}},XDe=async({testName:e,testId:t})=>{try{const r=await ce.post(`${$s}/laboratory/test/deletedAddedTest`,{testName:e,testId:t},{headers:{Authorization:`bearer ${Hs}`}});return console.log(r.data),!0}catch(r){return console.log(r),r.status=="500"&&r.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):r.status=="400"&&r.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):r.status=="401"?Q.fire({icon:"warning",text:"Log In"}):r.status=="400"&&r.response.data.errorDatabase&&Q.fire({icon:"error",text:"Issue at the Database"}),!1}},JDe=async()=>{try{return(await ce.get(`${$s}/laboratory/order/test/getOrderedTests`,{headers:{Authorization:`bearer ${Hs}`}})).data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):e.status=="401"?Q.fire({icon:"warning",text:"Log In"}):e.status=="400"&&e.response.data.errorDatabase&&Q.fire({icon:"error",text:"Issue at the Database"}),!1}},QDe=async({testOrderId:e})=>{try{const t=await ce.post(`${$s}/laboratory/order/test/completeOrderedTest`,{testOrderId:e},{headers:{Authorization:`bearer ${Hs}`}});return!0}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):t.status=="401"?Q.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&Q.fire({icon:"error",text:"Issue at the Database"}),!1}},ZDe=async()=>{try{return(await ce.get(`${$s}/laboratory/order/test/getCompletedOrderedTest`,{headers:{Authorization:`bearer ${Hs}`}})).data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):e.status=="401"?Q.fire({icon:"warning",text:"Log In"}):e.status=="400"&&e.response.data.errorDatabase&&Q.fire({icon:"error",text:"Issue at the Database"}),!1}},e2e=async({testOrderId:e})=>{try{return(await ce.post(`${$s}/laboratory/order/test/completed/testDetails`,{testOrderId:e},{headers:{Authorization:`bearer ${Hs}`}})).data.order}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):t.status=="401"?Q.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&Q.fire({icon:"error",text:"Issue at the Database"}),!1}},t2e=async({testOrderId:e,testResultDescription:t,patientId:r,doctorId:n})=>{try{const i=await ce.post(`${$s}/laboratory/order/test/uploadResult`,{testOrderId:e,testResultDescription:t,patientId:r,doctorId:n},{headers:{Authorization:`bearer ${Hs}`}});return!0}catch(i){return console.log(i),i.status=="500"&&i.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):i.status=="400"&&i.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):i.status=="401"?Q.fire({icon:"warning",text:"Log In"}):i.status=="400"&&i.response.data.errorDatabase&&Q.fire({icon:"error",text:"Issue at the Database"}),!1}},gee=async({testOrderId:e})=>{try{return(await ce.post(`${$s}/laboratory/order/test/result/getDetails`,{testOrderId:e},{headers:{Authorization:`bearer ${Hs}`}})).data.result}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):t.status=="401"?Q.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&Q.fire({icon:"error",text:"Issue at the Database"}),!1}},yee=Vi().shape({testId:Ut().required("choose right category"),atHome:wk().required(),atLab:wk().required(),priceHome:Ut().when("atHome",{is:!0,then:()=>Ut().required().matches(/^(0|[1-9]\d*)(\.\d{1,2})?$/,"Not a number"),otherwise:()=>Ut()}),priceLab:Ut().when("atLab",{is:!0,then:()=>Ut().required().matches(/^(0|[1-9]\d*)(\.\d{1,2})?$/,"Not a number"),otherwise:()=>Ut()})}).test("atHome-or-atlab","Should choose any of them",e=>(console.log("jjjj",e),e?e.atHome||e.atLab:!1)),r2e=Vi().shape({testResultDescription:Ut().required("Shouldn't be left empty")});function n2e(){const[e,t]=T.useState({}),[r,n]=T.useState([]),[i,a]=T.useState(void 0),o=Sr({initialValues:{testId:"",priceHome:"",priceLab:"",atHome:!1,atLab:!1},validationSchema:yee,onSubmit:async(u,h)=>{await GDe(u)&&Q.fire({icon:"success",text:"Test Service has been added"})}}),s=async u=>{const h=r==null?void 0:r.find(f=>f.testName==u.target.value);a(h),h?await o.setFieldValue("testId",h._id):await o.setFieldValue("testId",""),o.setFieldTouched("testId",!0)},l=async u=>{await t({...e,[u.target.name]:!e[u.target.name]}),u.target.name=="home"?(await o.setFieldValue("atHome",!o.values.atHome),o.setFieldTouched("atHome",!0)):u.target.name=="lab"&&(await o.setFieldValue("atLab",!o.values.atLab),o.setFieldTouched("atLab",!0))},c=async()=>{const u=await WDe();await n(u)};return T.useEffect(()=>{c()},[]),T.useEffect(()=>{const u=[];Object.keys(e).forEach(h=>{e[h]&&u.push(h)}),o.setFieldValue("testType",u)},[e]),console.log("values",o.values),console.log("errors",o.errors),d.jsx("div",{className:"w-full h-full flex flex-col items-center ",children:d.jsxs("form",{onSubmit:o.handleSubmit,className:"w-[80%] h-full flex flex-col gap-5 pt-20 px-5",children:[d.jsx("h1",{className:"font-bold text-emerald-400 text-2xl",children:"Test"}),d.jsxs("div",{className:"w-full h-auto flex flex-row gap-5 ",children:[d.jsxs("div",{className:"w-[60%] h-full flex flex-col gap-5",children:[d.jsx(ie,{list:"tests",name:"testName",variant:"filled",label:"Test Type",onChange:s,onBlur:u=>o.setFieldTouched("testId",!0),...o.touched.testId&&(o.errors.testId?{color:"error",helperText:`${o.errors.testId}`}:{color:"success"})}),d.jsx("div",{children:d.jsx("datalist",{id:"tests",children:r&&r.map((u,h)=>d.jsx("option",{value:u.testName},h))})}),d.jsx("textarea",{label:" Test Description",rows:"10",value:i&&i.testDescription,placeholder:"Test Description"}),d.jsxs("div",{className:"options w-full h-auto flex flex-col gap-10 ",children:[d.jsx("h1",{className:"text-md font-medium",children:"Test Service Options"}),d.jsxs("div",{className:"flex flex-1 gap-10 w-full",children:[d.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("input",{type:"checkbox",id:"id_chkhome",name:"home",value:"home",onChange:l,checked:o.va}),d.jsx("span",{children:"Home"})]}),e.home&&d.jsx(ie,{variant:"filled",label:"Price at Home",name:"priceHome",onChange:o.handleChange,onBlur:o.handleBlur,...o.touched.priceHome&&(o.errors.priceHome?{color:"error",helperText:`${o.errors.priceHome}`}:{color:"success"})})]}),d.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("input",{type:"checkbox",id:"id_lab",name:"lab",value:"lab",onChange:l}),d.jsx("span",{children:"Lab"})]}),e.lab&&d.jsx(ie,{variant:"filled",label:"Price at Lab",name:"priceLab",onChange:o.handleChange,onBlur:o.handleBlur,...o.touched.priceLab&&(o.errors.priceLab?{color:"error",helperText:`${o.errors.priceLab}`}:{color:"success"})})]})]})]}),d.jsx("button",{type:"submit",className:"w-[full] h-[5vh] border rounded-[5%] bg-orange-500 p-2 mb-5",children:"Add Test"})]}),d.jsx("div",{className:"w-[30%] h-[40vh] flex flex-col",children:d.jsx("img",{src:i&&i.testImage,className:"h-full w-full object-fit",alt:"testImage"})})]})]})})}function i2e(){return d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full",children:d.jsx(a2e,{})})})}function a2e(e){const t=Zt(),[r,n]=T.useState(),i=["Test Name","image","on Home","on Clinic","Edit","Delete"],a=async()=>{const s=await KDe();n(s)};T.useEffect(()=>{a()},[]);const o=async(s,l)=>{Q.fire({showCancelButton:!0,title:"Do you want to delete",text:"please click yes to proceed",confirmButtonText:"Delete"}).then(async c=>{c.isConfirmed&&await XDe({testId:l==null?void 0:l.testId})&&(Q.fire("Deleted","","success"),a())})};return d.jsx("div",{className:"w-auto h-auto px-10 py-5",children:d.jsxs(wr,{hoverable:!0,children:[d.jsx(wr.Head,{children:i.map((s,l)=>d.jsx(wr.HeadCell,{children:s},l))}),d.jsx(wr.Body,{className:"font-bold text-black",children:r&&r.map((s,l)=>d.jsxs(wr.Row,{className:"border border-b-black",children:[d.jsx(wr.Cell,{children:s.testId.testName}),d.jsx(wr.Cell,{children:d.jsx("img",{src:s.testId.testImage,className:"w-[3vw] h-[4vh] object-fit"})}),d.jsx(wr.Cell,{children:s.atHome?s.priceHome:"not available"}),d.jsx(wr.Cell,{children:s.atLab?s.priceLab:"not available"}),d.jsx(wr.Cell,{className:"cursor-pointer",children:d.jsx(fZ,{onClick:()=>t(`/laboratory/testServices/editTestDetails/?testName=${s.testId.testName}&testId=${s.testId._id}`)})}),d.jsx(wr.Cell,{className:"cursor-pointer",children:d.jsx(XRe,{onClick:c=>o(c,s)})})]},l))})]})})}function o2e(){var c,u,h;const[e,t]=yf(),[r,n]=T.useState(void 0),[i,a]=T.useState({}),o=Sr({initialValues:{testId:e.get("testId"),priceHome:"",priceLab:"",atHome:!1,atLab:!1},validationSchema:yee,onSubmit:async(f,p)=>{await YDe({...f,testName:e.get("testId")})&&(Q.fire({icon:"success",text:"Test Service has been updated"}),await l())}}),s=async f=>{await a({...i,[f.target.name]:!i[f.target.name]}),f.target.name=="home"?(await o.setFieldValue("atHome",!o.values.atHome),o.setFieldTouched("atHome",!0)):f.target.name=="lab"&&(await o.setFieldValue("atLab",!o.values.atLab),o.setFieldTouched("atLab",!0))},l=async()=>{const f=await qDe({testName:e.get("testName"),testId:e.get("testId")});n(f),o.setFieldValue("atHome",f.atHome),o.setFieldValue("atLab",f.atLab),o.setFieldValue("priceHome",f.priceHome),o.setFieldValue("priceLab",f.priceLab)};return T.useEffect(()=>{l()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsxs("form",{onSubmit:o.handleSubmit,className:"w-full h-full flex  gap-4 px-6 py-20 justify-center",children:[d.jsxs("div",{className:"detail w-[60%] h-auto flex flex-col gap-6 shadow-lg shadow-pink-500 p-4",children:[d.jsx("h1",{className:"w-full font-medium text-2xl text-emerald-400 flex justify-center ",children:"Update Test"}),d.jsx(ie,{variant:"filled",label:"Test Name",value:(c=r==null?void 0:r.testId)==null?void 0:c.testName}),d.jsx("textarea",{variant:"filled",rows:"20",label:"Test Description",value:(u=r==null?void 0:r.testId)==null?void 0:u.testDescription}),d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("input",{type:"checkbox",id:"id_chkhome",name:"home",value:"home",onChange:s,checked:o.values.atHome}),d.jsx("span",{children:"Home"})]}),o.values.atHome&&d.jsx(ie,{variant:"filled",label:"Price at Home",name:"priceHome",value:o.values.priceHome,onChange:o.handleChange,onBlur:o.handleBlur,...o.touched.priceHome&&(o.errors.priceHome?{color:"error",helperText:o.errors.priceHome}:{color:"success"})})]}),d.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("input",{type:"checkbox",id:"id_lab",name:"lab",value:"lab",onChange:s,checked:o.values.atLab}),d.jsx("span",{children:"Lab"})]}),o.values.atLab&&d.jsx(ie,{variant:"filled",label:"Price at Lab",name:"priceLab",value:o.values.priceLab,onChange:o.handleChange,onBlur:o.handleBlur,...o.touched.priceLab&&(o.errors.priceLab?{color:"error",helperText:o.errors.priceLab}:{color:"success"})})]})]}),d.jsxs("button",{type:"submit",className:"w-[full] h-[5vh] border rounded-[5%] bg-orange-500 p-2 mb-5 flex gap-2 items-center justify-center",children:[d.jsx(fZ,{}),"Update Test"]})]}),d.jsx("div",{className:"testImage flex  w-[20vw] h-full pt-20",children:d.jsx("img",{src:(h=r==null?void 0:r.testId)==null?void 0:h.testImage,alt:"test image",className:"mt-5 object-fit h-[40vh] w-[20vw]"})})]})})}function s2e(e){const{test:t}=e;return d.jsx("div",{className:"flex w-auto h-auto border rounded-lg shadow-lg shadow-emerald-300 hover:bg-black hover:bg-opacity-10 py-5 px-3 cursor-pointer   ",children:d.jsxs("div",{className:"w-[30vw] h-auto flex flex-row gap-5 ",children:[d.jsx("div",{className:"image w-[50%] h-full flex justify-center items-center",children:d.jsx("img",{src:t==null?void 0:t.testImage,alt:"testImage",className:"object-cover w-full h-[70%]"})}),d.jsxs("div",{className:"w-full h-full content flex flex-col gap-5 bg-black bg-opacity-10 p-4",children:[d.jsx("h2",{className:"flex justify-center text-white bg-blue-500 py-3 font-medium",children:t==null?void 0:t.testName}),d.jsx("textarea",{name:"testDescription",id:"id_testDescripion",value:t==null?void 0:t.testDescription,rows:"10",className:"flex text-sm cursor-pointer border-0",disabled:!0})]})]})})}function l2e(){const[e,t]=T.useState([]),r=Zt(),n=async()=>{const i=await jIe();t(i)};return T.useEffect(()=>{n()},[]),d.jsx("div",{className:"flex flex-col w-full h-full",children:d.jsx("div",{className:"w-full h-full grid grid-cols-3 gap-4 justify-items-start",children:(e==null?void 0:e.length)>0&&e.map((i,a)=>d.jsx("div",{className:"w-auto h-auto cursor-pointer",onClick:()=>r(`/patient/tests/testDetails/?testId=${i._id}&testName=${i.testName}`),children:d.jsx(s2e,{test:i})},a))})})}function os(e){return Wn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"circle",attr:{cx:"256",cy:"192",r:"32"},child:[]},{tag:"path",attr:{d:"M256 32c-88.22 0-160 68.65-160 153 0 40.17 18.31 93.59 54.42 158.78 29 52.34 62.55 99.67 80 123.22a31.75 31.75 0 0 0 51.22 0c17.42-23.55 51-70.88 80-123.22C397.69 278.61 416 225.19 416 185c0-84.35-71.78-153-160-153zm0 224a64 64 0 1 1 64-64 64.07 64.07 0 0 1-64 64z"},child:[]}]})(e)}function c2e(e){var r;const{test:t}=e;return d.jsx("div",{className:"flex w-full h-full ",children:d.jsxs("div",{className:"flex h-full w-[40vw] gap-6 bg-white  border rounded-lg p-4 shadow-lg",children:[d.jsx("div",{className:"image w-[20%] h-[90%]",children:d.jsx("img",{src:"/normalUser.png",alt:"image",className:"object-fit w-full h-full"})}),d.jsxs("div",{className:"details h-full w-full flex flex-1 flex-col gap-4 ",children:[d.jsx("h1",{children:(r=t==null?void 0:t.labId)==null?void 0:r.userId.username}),d.jsx("div",{className:"location"}),d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx(os,{}),d.jsx("span",{children:"Koovappally"})]}),d.jsxs("div",{className:"flex gap-2 w-full h-auto",children:[(t==null?void 0:t.atHome)&&d.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-orange-400 p-3 rounded-md flex gap-4 items-center",children:[d.jsx("span",{children:" Home Service"}),d.jsxs("span",{className:"flex gap-2 items-center",children:[d.jsx(rT,{}),d.jsx("h6",{children:t==null?void 0:t.priceHome})]})]}),(t==null?void 0:t.atLab)&&d.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-blue-400 p-3 rounded-md flex gap-4 items-center",children:[d.jsx("span",{children:" Lab Service"}),d.jsxs("span",{className:"flex gap-2 items-center",children:[d.jsx(rT,{}),d.jsx("h6",{children:t==null?void 0:t.priceLab})]})]})]})]})]})})}function u2e(){const[e,t]=T.useState([]),[r,n]=T.useState(void 0),i=new URLSearchParams(window.location.search),a=async()=>{const o=await MIe({testId:i.get("testId")});t(o),n(o[0].testId)};return T.useEffect(()=>{a()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"screen w-full h-full flex  gap-2 justify-between ",children:[d.jsxs("div",{className:"w-[50%] h-[80vh] flex gap-10 border p-4 shadow-lg items-center bg-emerald-400 bg-opacity-10 bg-blur-sm",children:[d.jsx("div",{className:"image h-[40vh] w-[70%]",children:d.jsx("img",{src:r==null?void 0:r.testImage,alt:"testImage",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"testDetails flex flex-col gap-2 w-full h-full justify-center",children:[d.jsxs("div",{className:"description w-full h-[10vh] border shadow-lg flex flex-col gap-2 px-1",children:[d.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Name"}),d.jsx("span",{className:"text-lg font-medium",children:r==null?void 0:r.testName.toUpperCase()})]}),d.jsxs("div",{className:"testDescription flex flex-col gap-2 border w-full h-[40vh] shadow-lg px-1",children:[d.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Description"}),d.jsx("span",{className:"h-[10vh] p-2",children:r==null?void 0:r.testDescription})]})]})]}),d.jsxs("div",{className:"laboratorys bg-black bg-opacity-10 p-3 flex flex-col gap-4 w-auto h-full border  ",children:[d.jsx("h2",{className:"text-lg text-white  font-medium flex justify-center bg-blue-500 py-2",children:"Labs where the service available"}),d.jsx("div",{className:"labs flex flex-col gap-4 h-full w-full overflow-y-auto",children:(e==null?void 0:e.length)>0&&e.map((o,s)=>d.jsx("div",{className:"w-full h-auto",children:d.jsx(c2e,{test:o})},s))})]})]})})}function d2e(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"currentBookings",children:"Booked"}),d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"pastBookings",children:"Past Bookings"})]})})}function h2e(){return d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[d.jsx("div",{className:"header w-full h-[5vh]",children:d.jsx(d2e,{})}),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx(oi,{})})]})}const Pj="https://hcompanion.onrender.com/api",vee=sessionStorage.getItem("token"),f2e=async()=>{var e,t,r;try{return(await ce.get(`${Pj}/patient/bookings/getAllCurrentBookings`,{headers:{Authorization:`bearer ${vee}`}})).data.bookings}catch(n){return console.log(n),((e=n.response)==null?void 0:e.status)=="500"&&((r=(t=n.response)==null?void 0:t.data)!=null&&r.errorServer)&&Q.fire("Server Error","","error"),!1}},bee=async({startTime:e,slotDate:t,doctorId:r})=>{var n,i,a;try{const o=await ce.post(`${Pj}/patient/bookings/cancelBooking`,{startTime:e,slotDate:t,doctorId:r},{headers:{Authorization:`bearer ${vee}`}});return console.log(o.data),!0}catch(o){return console.log(o),((n=o.response)==null?void 0:n.status)=="500"&&((a=(i=o.response)==null?void 0:i.data)!=null&&a.errorServer)&&Q.fire("Server Error","","error"),!1}},p2e=async()=>{var e,t,r;try{return(await ce.get(`${Pj}/patient/bookings/getPastBookings`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.bookings}catch(n){return console.log(n),((e=n.response)==null?void 0:e.status)=="500"&&((r=(t=n.response)==null?void 0:t.data)!=null&&r.errorServer)&&Q.fire("Server Error","","error"),!1}};function m2e(e){var n,i,a,o,s,l;const{booking:t}=e;Zt();const r=async(c,u,h,f)=>{c.preventDefault(),await Q.fire({showCancelButton:!0,confirmButtonText:"Proceed Canceling",text:"Do you want to cancel the booking",icon:"question"}).then(async p=>{p.isConfirmed&&await bee({startTime:u,slotDate:h,doctorId:f})&&(await Q.fire("Canceled","Booking has been Canceled","success"),window.location.reload())})};return d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:(n=t==null?void 0:t.doctorId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("h4",{className:"text-sm font-medium opacity-40",children:"Cardiology"}),d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{children:(i=t==null?void 0:t.doctorId)==null?void 0:i.firstName})}),d.jsx("div",{className:"location w-full h-auto",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(os,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:(o=(a=t==null?void 0:t.doctorId)==null?void 0:a.addressId)==null?void 0:o.place}),d.jsx("span",{className:"flex items-center",children:(l=(s=t==null?void 0:t.doctorId)==null?void 0:s.addressId)==null?void 0:l.district})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[d.jsx(Ib,{}),d.jsx("span",{children:`${t==null?void 0:t.slotDate} ${nt(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),d.jsxs("div",{className:"w-full h-auto flex gap-4",children:[d.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:c=>{var u;return r(c,t==null?void 0:t.startTime,t==null?void 0:t.slotDate,(u=t==null?void 0:t.doctorId)==null?void 0:u._id)},children:"Cancel"}),nt().isAfter(nt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A"))&&nt().isBefore(nt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))&&d.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:c=>window.open(`/patient/bookings/videoConsult?patientId=${t.patientId._id}&doctorId=${t.doctorId._id}`,"_blank"),children:"Join Meeting"})]})]})]})})}function g2e(){const[e,t]=T.useState([]),r=async()=>{const n=await f2e();await t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"flex w-full h-full",children:d.jsx("div",{className:"booked flex flex-col gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>d.jsx("div",{className:"w-[60vw] h-[25vh] ",children:d.jsx(m2e,{booking:n})},i))})})}function y2e(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"currentBookings",children:"Booked"}),d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"pastCompletedBookings",children:"Past Bookings"}),d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-orange-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"test/ordered",children:"Requested Test Results"})]})})}function v2e(){return d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsxs("div",{className:"screen w-full h-full flex flex-col gap-10 p-2",children:[d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx(y2e,{})}),d.jsx("div",{className:"w-full h-full p-2 flex flex-col",children:d.jsx(oi,{})})]})})}const wee="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const b2e=async()=>{var e,t,r;try{const n=await ce.get(`${wee}/doctor/bookings/getAllCurrentBookings`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(n.data),n.data.bookings}catch(n){return console.log(n),((e=n==null?void 0:n.response)==null?void 0:e.status)=="500"&&((r=(t=n==null?void 0:n.response)==null?void 0:t.data)!=null&&r.errorServer)&&Q.fire("Server Error","","error"),!1}},w2e=async()=>{var e,t,r;try{const n=await ce.get(`${wee}/doctor/bookings/getPastCompletedBookings`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(n.data),n.data.bookings}catch(n){return console.log(n),((e=n==null?void 0:n.response)==null?void 0:e.status)=="500"&&((r=(t=n==null?void 0:n.response)==null?void 0:t.data)!=null&&r.errorServer)&&Q.fire("Server Error","","error"),!1}};nt.extend($i);function E2e(e){var n,i,a,o,s,l;const{booking:t}=e;Zt(),console.log("test date",nt().add(2,"hour").isBefore(nt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour")));const r=async(c,u,h,f)=>{c.preventDefault(),await Q.fire({showCancelButton:!0,confirmButtonText:"Proceed Rescheduling",text:"Do you want to Reschedule the booking",icon:"question"}).then(async p=>{p.isConfirmed&&await patient_cancelBookingService({startTime:u,slotDate:h,doctorId:f})&&(await Q.fire("Canceled","Booking has been Canceled","success"),window.location.reload())})};return d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:(n=t==null?void 0:t.patientId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("h4",{className:"text-sm font-medium opacity-40",children:"Cardiology"}),d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{children:(i=t==null?void 0:t.patientId)==null?void 0:i.firstName})}),d.jsx("div",{className:"location w-full h-auto",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(os,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:(o=(a=t==null?void 0:t.patientId)==null?void 0:a.addressId)==null?void 0:o.place}),d.jsx("span",{className:"flex items-center",children:(l=(s=t==null?void 0:t.patientId)==null?void 0:s.addressId)==null?void 0:l.district})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[d.jsx(Ib,{}),d.jsx("span",{children:`${t==null?void 0:t.slotDate} ${nt(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),d.jsxs("div",{className:"w-full h-auto flex flex-between gap-4",children:[d.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:c=>{var u;return r(c,t==null?void 0:t.startTime,t==null?void 0:t.slotDate,(u=t==null?void 0:t.doctorId)==null?void 0:u._id)},children:"Reschedule"}),nt().isAfter(nt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A"))&&nt().isBefore(nt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))&&d.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:c=>window.open(`/patient/bookings/videoConsult?patientId=${t.patientId._id}&doctorId=${t.doctorId._id}`,"_blank"),children:"Join Meeting"})]})]})]})})}function _2e(){const[e,t]=T.useState([]),r=async()=>{const n=await b2e();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"bookings w-full h-full",children:(e==null?void 0:e.length)>0&&(e==null?void 0:e.map((n,i)=>d.jsx("div",{className:"w-[70%] h-[25vh]",children:d.jsx(E2e,{booking:n})},i)))})})})}/**
 * @license agora-rtc-react
 * @version 2.3.0
 *
 * Copyright (c) Agora, Inc.
 *
 * This source code is licensed under the MIT license.
 */function S2e(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in e)){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(e)}var fm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cn=function(e){try{return!!e()}catch{return!0}},tx=!cn(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Eee=tx,_ee=Function.prototype,lP=_ee.call,T2e=Eee&&_ee.bind.bind(lP,lP),tn=Eee?T2e:function(e){return function(){return lP.apply(e,arguments)}},na=tn({}.isPrototypeOf),$w=function(e){return e&&e.Math==Math&&e},si=$w(typeof globalThis=="object"&&globalThis)||$w(typeof window=="object"&&window)||$w(typeof self=="object"&&self)||$w(typeof fm=="object"&&fm)||function(){return this}()||fm||Function("return this")(),C2e=tx,See=Function.prototype,CV=See.apply,xV=See.call,Dj=typeof Reflect=="object"&&Reflect.apply||(C2e?xV.bind(CV):function(){return xV.apply(CV,arguments)}),Tee=tn,x2e=Tee({}.toString),R2e=Tee("".slice),gc=function(e){return R2e(x2e(e),8,-1)},I2e=gc,N2e=tn,Tv=function(e){if(I2e(e)==="Function")return N2e(e)},jI=typeof document=="object"&&document.all,rx={all:jI,IS_HTMLDDA:jI===void 0&&jI!==void 0},A2e=rx.all,li=rx.IS_HTMLDDA?function(e){return typeof e=="function"||e===A2e}:function(e){return typeof e=="function"},kb={},ss=!cn(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),O2e=tx,Hw=Function.prototype.call,ci=O2e?Hw.bind(Hw):function(){return Hw.apply(Hw,arguments)},nx={},Cee={}.propertyIsEnumerable,xee=Object.getOwnPropertyDescriptor,k2e=xee&&!Cee.call({1:2},1);nx.f=k2e?function(e){var t=xee(this,e);return!!t&&t.enumerable}:Cee;var Tu,d_,Vd=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},P2e=cn,D2e=gc,MI=Object,L2e=tn("".split),ix=P2e(function(){return!MI("z").propertyIsEnumerable(0)})?function(e){return D2e(e)=="String"?L2e(e,""):MI(e)}:MI,Ag=function(e){return e==null},j2e=Ag,M2e=TypeError,Og=function(e){if(j2e(e))throw M2e("Can't call method on "+e);return e},U2e=ix,F2e=Og,Bd=function(e){return U2e(F2e(e))},RV=li,V2e=rx.all,So=rx.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:RV(e)||e===V2e}:function(e){return typeof e=="object"?e!==null:RV(e)},Tl={},UI=Tl,FI=si,B2e=li,IV=function(e){return B2e(e)?e:void 0},Wa=function(e,t){return arguments.length<2?IV(UI[e])||IV(FI[e]):UI[e]&&UI[e][t]||FI[e]&&FI[e][t]},Af=typeof navigator<"u"&&String(navigator.userAgent)||"",Ree=si,VI=Af,NV=Ree.process,AV=Ree.Deno,OV=NV&&NV.versions||AV&&AV.version,kV=OV&&OV.v8;kV&&(d_=(Tu=kV.split("."))[0]>0&&Tu[0]<4?1:+(Tu[0]+Tu[1])),!d_&&VI&&(!(Tu=VI.match(/Edge\/(\d+)/))||Tu[1]>=74)&&(Tu=VI.match(/Chrome\/(\d+)/))&&(d_=+Tu[1]);var lf=d_,PV=lf,$2e=cn,H2e=si.String,kg=!!Object.getOwnPropertySymbols&&!$2e(function(){var e=Symbol();return!H2e(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&PV&&PV<41}),Iee=kg&&!Symbol.sham&&typeof Symbol.iterator=="symbol",z2e=Wa,G2e=li,W2e=na,K2e=Object,Pb=Iee?function(e){return typeof e=="symbol"}:function(e){var t=z2e("Symbol");return G2e(t)&&W2e(t.prototype,K2e(e))},q2e=String,Pg=function(e){try{return q2e(e)}catch{return"Object"}},Y2e=li,X2e=Pg,J2e=TypeError,zs=function(e){if(Y2e(e))return e;throw J2e(X2e(e)+" is not a function")},Q2e=zs,Z2e=Ag,ax=function(e,t){var r=e[t];return Z2e(r)?void 0:Q2e(r)},DV=ci,LV=li,jV=So,eLe=TypeError,Nee={exports:{}},MV=si,tLe=Object.defineProperty,rLe=function(e,t){try{tLe(MV,e,{value:t,configurable:!0,writable:!0})}catch{MV[e]=t}return t},UV="__core-js_shared__",Lj=si[UV]||rLe(UV,{}),FV=Lj;(Nee.exports=function(e,t){return FV[e]||(FV[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Dg=Nee.exports,nLe=Og,iLe=Object,yc=function(e){return iLe(nLe(e))},aLe=yc,oLe=tn({}.hasOwnProperty),vi=Object.hasOwn||function(e,t){return oLe(aLe(e),t)},sLe=tn,lLe=0,cLe=Math.random(),uLe=sLe(1 .toString),jj=function(e){return"Symbol("+(e===void 0?"":e)+")_"+uLe(++lLe+cLe,36)},dLe=Dg,VV=vi,hLe=jj,fLe=kg,pLe=Iee,Hp=si.Symbol,BI=dLe("wks"),mLe=pLe?Hp.for||Hp:Hp&&Hp.withoutSetter||hLe,Jr=function(e){return VV(BI,e)||(BI[e]=fLe&&VV(Hp,e)?Hp[e]:mLe("Symbol."+e)),BI[e]},gLe=ci,BV=So,$V=Pb,yLe=ax,vLe=function(e,t){var r,n;if(LV(r=e.toString)&&!jV(n=DV(r,e))||LV(r=e.valueOf)&&!jV(n=DV(r,e))||t!=="string")return n;throw eLe("Can't convert object to primitive value")},bLe=TypeError,wLe=Jr("toPrimitive"),ELe=function(e,t){if(!BV(e)||$V(e))return e;var r,n=yLe(e,wLe);if(n){if(r=gLe(n,e,t),!BV(r)||$V(r))return r;throw bLe("Can't convert object to primitive value")}return vLe(e,t)},_Le=Pb,ox=function(e){var t=ELe(e,"string");return _Le(t)?t:t+""},HV=So,cP=si.document,SLe=HV(cP)&&HV(cP.createElement),Mj=function(e){return SLe?cP.createElement(e):{}},TLe=Mj,Aee=!ss&&!cn(function(){return Object.defineProperty(TLe("div"),"a",{get:function(){return 7}}).a!=7}),CLe=ss,xLe=ci,RLe=nx,ILe=Vd,NLe=Bd,ALe=ox,OLe=vi,kLe=Aee,zV=Object.getOwnPropertyDescriptor;kb.f=CLe?zV:function(e,t){if(e=NLe(e),t=ALe(t),kLe)try{return zV(e,t)}catch{}if(OLe(e,t))return ILe(!xLe(RLe.f,e,t),e[t])};var PLe=cn,DLe=li,LLe=/#|\.prototype\./,Db=function(e,t){var r=MLe[jLe(e)];return r==FLe||r!=ULe&&(DLe(t)?PLe(t):!!t)},jLe=Db.normalize=function(e){return String(e).replace(LLe,".").toLowerCase()},MLe=Db.data={},ULe=Db.NATIVE="N",FLe=Db.POLYFILL="P",Oee=Db,VLe=zs,BLe=tx,$Le=Tv(Tv.bind),$d=function(e,t){return VLe(e),t===void 0?e:BLe?$Le(e,t):function(){return e.apply(t,arguments)}},Gs={},kee=ss&&cn(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),HLe=So,zLe=String,GLe=TypeError,ka=function(e){if(HLe(e))return e;throw GLe(zLe(e)+" is not an object")},WLe=ss,KLe=Aee,qLe=kee,zw=ka,GV=ox,YLe=TypeError,$I=Object.defineProperty,XLe=Object.getOwnPropertyDescriptor,HI="enumerable",zI="configurable",GI="writable";Gs.f=WLe?qLe?function(e,t,r){if(zw(e),t=GV(t),zw(r),typeof e=="function"&&t==="prototype"&&"value"in r&&GI in r&&!r[GI]){var n=XLe(e,t);n&&n[GI]&&(e[t]=r.value,r={configurable:zI in r?r[zI]:n[zI],enumerable:HI in r?r[HI]:n[HI],writable:!1})}return $I(e,t,r)}:$I:function(e,t,r){if(zw(e),t=GV(t),zw(r),KLe)try{return $I(e,t,r)}catch{}if("get"in r||"set"in r)throw YLe("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var JLe=Gs,QLe=Vd,Hd=ss?function(e,t,r){return JLe.f(e,t,QLe(1,r))}:function(e,t,r){return e[t]=r,e},Gw=si,ZLe=Dj,eje=Tv,tje=li,rje=kb.f,nje=Oee,Jf=Tl,ije=$d,Qf=Hd,WV=vi,aje=function(e){var t=function(r,n,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,n)}return new e(r,n,i)}return ZLe(e,this,arguments)};return t.prototype=e.prototype,t},ir=function(e,t){var r,n,i,a,o,s,l,c,u,h=e.target,f=e.global,p=e.stat,m=e.proto,g=f?Gw:p?Gw[h]:(Gw[h]||{}).prototype,y=f?Jf:Jf[h]||Qf(Jf,h,{})[h],v=y.prototype;for(a in t)n=!(r=nje(f?a:h+(p?".":"#")+a,e.forced))&&g&&WV(g,a),s=y[a],n&&(l=e.dontCallGetSet?(u=rje(g,a))&&u.value:g[a]),o=n&&l?l:t[a],n&&typeof s==typeof o||(c=e.bind&&n?ije(o,Gw):e.wrap&&n?aje(o):m&&tje(o)?eje(o):o,(e.sham||o&&o.sham||s&&s.sham)&&Qf(c,"sham",!0),Qf(y,a,c),m&&(WV(Jf,i=h+"Prototype")||Qf(Jf,i,{}),Qf(Jf[i],a,o),e.real&&v&&(r||!v[a])&&Qf(v,a,o)))},oje=Math.ceil,sje=Math.floor,lje=Math.trunc||function(e){var t=+e;return(t>0?sje:oje)(t)},cje=lje,Uj=function(e){var t=+e;return t!=t||t===0?0:cje(t)},uje=Uj,dje=Math.max,hje=Math.min,Fj=function(e,t){var r=uje(e);return r<0?dje(r+t,0):hje(r,t)},fje=Uj,pje=Math.min,Pee=function(e){return e>0?pje(fje(e),9007199254740991):0},mje=Pee,fu=function(e){return mje(e.length)},gje=Bd,yje=Fj,vje=fu,KV=function(e){return function(t,r,n){var i,a=gje(t),o=vje(a),s=yje(n,o);if(e&&r!=r){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((e||s in a)&&a[s]===r)return e||s||0;return!e&&-1}},Vj={includes:KV(!0),indexOf:KV(!1)},bje=Vj.includes;ir({target:"Array",proto:!0,forced:cn(function(){return!Array(1).includes()})},{includes:function(e){return bje(this,e,arguments.length>1?arguments[1]:void 0)}});var wje=Tl,Ws=function(e){return wje[e+"Prototype"]},Eje=Ws("Array").includes,_je=So,Sje=gc,Tje=Jr("match"),Dee=function(e){var t;return _je(e)&&((t=e[Tje])!==void 0?!!t:Sje(e)=="RegExp")},Cje=Dee,xje=TypeError,Lee={};Lee[Jr("toStringTag")]="z";var Bj=String(Lee)==="[object z]",Rje=Bj,Ije=li,h_=gc,Nje=Jr("toStringTag"),Aje=Object,Oje=h_(function(){return arguments}())=="Arguments",vc=Rje?h_:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=function(i,a){try{return i[a]}catch{}}(t=Aje(e),Nje))=="string"?r:Oje?h_(t):(n=h_(t))=="Object"&&Ije(t.callee)?"Arguments":n},kje=vc,Pje=String,ls=function(e){if(kje(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Pje(e)},Dje=Jr("match"),Lje=ir,jje=function(e){if(Cje(e))throw xje("The method doesn't accept regular expressions");return e},Mje=Og,qV=ls,Uje=function(e){var t=/./;try{"/./"[e](t)}catch{try{return t[Dje]=!1,"/./"[e](t)}catch{}}return!1},Fje=tn("".indexOf);Lje({target:"String",proto:!0,forced:!Uje("includes")},{includes:function(e){return!!~Fje(qV(Mje(this)),qV(jje(e)),arguments.length>1?arguments[1]:void 0)}});var Vje=Ws("String").includes,YV=na,Bje=Eje,$je=Vje,WI=Array.prototype,KI=String.prototype,Hje=function(e){var t=e.includes;return e===WI||YV(WI,e)&&t===WI.includes?Bje:typeof e=="string"||e===KI||YV(KI,e)&&t===KI.includes?$je:t},be=$r(Hje),zje=zs,Gje=yc,Wje=ix,Kje=fu,qje=TypeError,XV=function(e){return function(t,r,n,i){zje(r);var a=Gje(t),o=Wje(a),s=Kje(a),l=e?s-1:0,c=e?-1:1;if(n<2)for(;;){if(l in o){i=o[l],l+=c;break}if(l+=c,e?l<0:s<=l)throw qje("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=c)l in o&&(i=r(i,o[l],l,a));return i}},Yje={left:XV(!1),right:XV(!0)},Xje=cn,sx=function(e,t){var r=[][e];return!!r&&Xje(function(){r.call(null,t||function(){return 1},1)})},Lb=typeof process<"u"&&gc(process)=="process",Jje=Yje.left;ir({target:"Array",proto:!0,forced:!Lb&&lf>79&&lf<83||!sx("reduce")},{reduce:function(e){var t=arguments.length;return Jje(this,e,t,t>1?arguments[1]:void 0)}});var Qje=Ws("Array").reduce,Zje=na,eMe=Qje,qI=Array.prototype,tMe=function(e){var t=e.reduce;return e===qI||Zje(qI,e)&&t===qI.reduce?eMe:t},jee=tMe,wl=$r(jee),Mee=!0,Uee=!0;function Ww(e,t,r){let n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function Of(e,t,r){if(!e.RTCPeerConnection)return;let n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(o,s){if(o!==t)return i.apply(this,arguments);let l=c=>{let u=r(c);u&&(s.handleEvent?s.handleEvent(u):s(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(s,l),i.apply(this,[o,l])};let a=n.removeEventListener;n.removeEventListener=function(o,s){if(o!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(s))return a.apply(this,arguments);let l=this._eventMap[t].get(s);return this._eventMap[t].delete(s),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[o,l])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(o){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),o&&this.addEventListener(t,this["_on"+t]=o)},enumerable:!0,configurable:!0})}function rMe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Mee=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function nMe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Uee=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Fee(){if(typeof window=="object"){if(Mee)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function $j(e,t){Uee&&console.warn(e+" is deprecated, please use "+t+" instead.")}function JV(e){return Object.prototype.toString.call(e)==="[object Object]"}function Vee(e){var t;return JV(e)?wl(t=Object.keys(e)).call(t,function(r,n){let i=JV(e[n]),a=i?Vee(e[n]):e[n],o=i&&!Object.keys(a).length;return a===void 0||o?r:Object.assign(r,{[n]:a})},{}):e}function uP(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach(n=>{n.endsWith("Id")?uP(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach(i=>{uP(e,e.get(i),r)})}))}function QV(e,t,r){let n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;let a=[];return e.forEach(o=>{o.type==="track"&&o.trackIdentifier===t.id&&a.push(o)}),a.forEach(o=>{e.forEach(s=>{s.type===n&&s.trackId===o.id&&uP(e,s,i)})}),i}var iMe=jj,ZV=Dg("keys"),lx=function(e){return ZV[e]||(ZV[e]=iMe(e))},aMe=!cn(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),oMe=vi,sMe=li,lMe=yc,cMe=aMe,eB=lx("IE_PROTO"),dP=Object,uMe=dP.prototype,Hj=cMe?dP.getPrototypeOf:function(e){var t=lMe(e);if(oMe(t,eB))return t[eB];var r=t.constructor;return sMe(r)&&t instanceof r?r.prototype:t instanceof dP?uMe:null},dMe=tn,hMe=zs,fMe=li,pMe=String,mMe=TypeError,gMe=function(e,t,r){try{return dMe(hMe(Object.getOwnPropertyDescriptor(e,t)[r]))}catch{}},yMe=ka,vMe=function(e){if(typeof e=="object"||fMe(e))return e;throw mMe("Can't set "+pMe(e)+" as a prototype")},bMe=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=gMe(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch{}return function(n,i){return yMe(n),vMe(i),t?e(n,i):n.__proto__=i,n}}():void 0),cx={},ux={},YI=vi,wMe=Bd,EMe=Vj.indexOf,_Me=ux,tB=tn([].push),Bee=function(e,t){var r,n=wMe(e),i=0,a=[];for(r in n)!YI(_Me,r)&&YI(n,r)&&tB(a,r);for(;t.length>i;)YI(n,r=t[i++])&&(~EMe(a,r)||tB(a,r));return a},zj=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],SMe=Bee,TMe=zj.concat("length","prototype");cx.f=Object.getOwnPropertyNames||function(e){return SMe(e,TMe)};var jb={};jb.f=Object.getOwnPropertySymbols;var CMe=Wa,xMe=cx,RMe=jb,IMe=ka,NMe=tn([].concat),AMe=CMe("Reflect","ownKeys")||function(e){var t=xMe.f(IMe(e)),r=RMe.f;return r?NMe(t,r(e)):t},rB=vi,OMe=AMe,kMe=kb,PMe=Gs,Gj={},DMe=Bee,LMe=zj,dx=Object.keys||function(e){return DMe(e,LMe)},jMe=ss,MMe=kee,UMe=Gs,FMe=ka,VMe=Bd,BMe=dx;Gj.f=jMe&&!MMe?Object.defineProperties:function(e,t){FMe(e);for(var r,n=VMe(t),i=BMe(t),a=i.length,o=0;a>o;)UMe.f(e,r=i[o++],n[r]);return e};var Kw,$ee=Wa("document","documentElement"),$Me=ka,HMe=Gj,nB=zj,zMe=ux,GMe=$ee,WMe=Mj,hP="prototype",fP="script",Hee=lx("IE_PROTO"),XI=function(){},zee=function(e){return"<"+fP+">"+e+"</"+fP+">"},iB=function(e){e.write(zee("")),e.close();var t=e.parentWindow.Object;return e=null,t},f_=function(){try{Kw=new ActiveXObject("htmlfile")}catch{}var e,t,r;f_=typeof document<"u"?document.domain&&Kw?iB(Kw):(t=WMe("iframe"),r="java"+fP+":",t.style.display="none",GMe.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(zee("document.F=Object")),e.close(),e.F):iB(Kw);for(var n=nB.length;n--;)delete f_[hP][nB[n]];return f_()};zMe[Hee]=!0;var Mb=Object.create||function(e,t){var r;return e!==null?(XI[hP]=$Me(e),r=new XI,XI[hP]=null,r[Hee]=e):r=f_(),t===void 0?r:HMe.f(r,t)},KMe=So,qMe=Hd,Gee=Error,YMe=tn("".replace),XMe=String(Gee("zxcasd").stack),Wee=/\n\s*at [^:]*:[^\n]*/,JMe=Wee.test(XMe),QMe=Vd,ZMe=!cn(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",QMe(1,7)),e.stack!==7)}),eUe=Hd,tUe=function(e,t){if(JMe&&typeof e=="string"&&!Gee.prepareStackTrace)for(;t--;)e=YMe(e,Wee,"");return e},rUe=ZMe,aB=Error.captureStackTrace,kf={},nUe=kf,iUe=Jr("iterator"),aUe=Array.prototype,Kee=function(e){return e!==void 0&&(nUe.Array===e||aUe[iUe]===e)},oUe=vc,oB=ax,sUe=Ag,lUe=kf,cUe=Jr("iterator"),hx=function(e){if(!sUe(e))return oB(e,cUe)||oB(e,"@@iterator")||lUe[oUe(e)]},uUe=ci,dUe=zs,hUe=ka,fUe=Pg,pUe=hx,mUe=TypeError,Wj=function(e,t){var r=arguments.length<2?pUe(e):t;if(dUe(r))return hUe(uUe(r,e));throw mUe(fUe(e)+" is not iterable")},gUe=ci,sB=ka,yUe=ax,qee=function(e,t,r){var n,i;sB(e);try{if(!(n=yUe(e,"return"))){if(t==="throw")throw r;return r}n=gUe(n,e)}catch(a){i=!0,n=a}if(t==="throw")throw r;if(i)throw n;return sB(n),r},vUe=$d,bUe=ci,wUe=ka,EUe=Pg,_Ue=Kee,SUe=fu,lB=na,TUe=Wj,CUe=hx,cB=qee,xUe=TypeError,p_=function(e,t){this.stopped=e,this.result=t},uB=p_.prototype,Ub=function(e,t,r){var n,i,a,o,s,l,c,u=r&&r.that,h=!(!r||!r.AS_ENTRIES),f=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),m=!(!r||!r.INTERRUPTED),g=vUe(t,u),y=function(b){return n&&cB(n,"normal",b),new p_(!0,b)},v=function(b){return h?(wUe(b),m?g(b[0],b[1],y):g(b[0],b[1])):m?g(b,y):g(b)};if(f)n=e.iterator;else if(p)n=e;else{if(!(i=CUe(e)))throw xUe(EUe(e)+" is not iterable");if(_Ue(i)){for(a=0,o=SUe(e);o>a;a++)if((s=v(e[a]))&&lB(uB,s))return s;return new p_(!1)}n=TUe(e,i)}for(l=f?e.next:n.next;!(c=bUe(l,n)).done;){try{s=v(c.value)}catch(b){cB(n,"throw",b)}if(typeof s=="object"&&s&&lB(uB,s))return s}return new p_(!1)},RUe=ls,IUe=ir,NUe=na,AUe=Hj,aT=bMe,OUe=function(e,t,r){for(var n=OMe(t),i=PMe.f,a=kMe.f,o=0;o<n.length;o++){var s=n[o];rB(e,s)||r&&rB(r,s)||i(e,s,a(t,s))}},Yee=Mb,JI=Hd,QI=Vd,kUe=function(e,t){KMe(t)&&"cause"in t&&qMe(e,"cause",t.cause)},PUe=function(e,t,r,n){rUe&&(aB?aB(e,t):eUe(e,"stack",tUe(r,n)))},DUe=Ub,LUe=function(e,t){return e===void 0?arguments.length<2?"":t:RUe(e)},jUe=Jr("toStringTag"),oT=Error,MUe=[].push,Gm=function(e,t){var r,n=NUe(ZI,this);aT?r=aT(oT(),n?AUe(this):ZI):(r=n?this:Yee(ZI),JI(r,jUe,"Error")),t!==void 0&&JI(r,"message",LUe(t)),PUe(r,Gm,r.stack,1),arguments.length>2&&kUe(r,arguments[2]);var i=[];return DUe(e,MUe,{that:i}),JI(r,"errors",i),r};aT?aT(Gm,oT):OUe(Gm,oT,{name:!0});var ZI=Gm.prototype=Yee(oT.prototype,{constructor:QI(1,Gm),message:QI(1,""),name:QI(1,"AggregateError")});IUe({global:!0,constructor:!0,arity:2},{AggregateError:Gm});var sT,T0,lT,UUe=li,dB=si.WeakMap,FUe=UUe(dB)&&/native code/.test(String(dB)),Xee=si,VUe=So,BUe=Hd,eN=vi,tN=Lj,$Ue=lx,HUe=ux,hB="Object already initialized",pP=Xee.TypeError,zUe=Xee.WeakMap;FUe||tN.state?(Qs=tN.state||(tN.state=new zUe),Qs.get=Qs.get,Qs.has=Qs.has,Qs.set=Qs.set,sT=function(e,t){if(Qs.has(e))throw pP(hB);return t.facade=e,Qs.set(e,t),t},T0=function(e){return Qs.get(e)||{}},lT=function(e){return Qs.has(e)}):(Qd=$Ue("state"),HUe[Qd]=!0,sT=function(e,t){if(eN(e,Qd))throw pP(hB);return t.facade=e,BUe(e,Qd,t),t},T0=function(e){return eN(e,Qd)?e[Qd]:{}},lT=function(e){return eN(e,Qd)});var Qs,Qd,$h,fB,pB,Pf={set:sT,get:T0,has:lT,enforce:function(e){return lT(e)?T0(e):sT(e,{})},getterFor:function(e){return function(t){var r;if(!VUe(t)||(r=T0(t)).type!==e)throw pP("Incompatible receiver, "+e+" required");return r}}},mP=ss,GUe=vi,Jee=Function.prototype,WUe=mP&&Object.getOwnPropertyDescriptor,rN=GUe(Jee,"name"),Qee={EXISTS:rN,PROPER:rN&&(function(){}).name==="something",CONFIGURABLE:rN&&(!mP||mP&&WUe(Jee,"name").configurable)},KUe=Hd,zd=function(e,t,r,n){return n&&n.enumerable?e[t]=r:KUe(e,t,r),e},qUe=cn,YUe=li,XUe=So,JUe=Mb,mB=Hj,QUe=zd,gP=Jr("iterator"),Zee=!1;[].keys&&("next"in(pB=[].keys())?(fB=mB(mB(pB)))!==Object.prototype&&($h=fB):Zee=!0);var ZUe=!XUe($h)||qUe(function(){var e={};return $h[gP].call(e)!==e});YUe(($h=ZUe?{}:JUe($h))[gP])||QUe($h,gP,function(){return this});var ete={IteratorPrototype:$h,BUGGY_SAFARI_ITERATORS:Zee},e5e=vc,t5e=Bj?{}.toString:function(){return"[object "+e5e(this)+"]"},r5e=Bj,n5e=Gs.f,i5e=Hd,a5e=vi,o5e=t5e,gB=Jr("toStringTag"),Gd=function(e,t,r,n){if(e){var i=r?e:e.prototype;a5e(i,gB)||n5e(i,gB,{configurable:!0,value:t}),n&&!r5e&&i5e(i,"toString",o5e)}},s5e=ete.IteratorPrototype,l5e=Mb,c5e=Vd,u5e=Gd,d5e=kf,h5e=function(){return this},Kj=function(e,t,r,n){var i=t+" Iterator";return e.prototype=l5e(s5e,{next:c5e(+!n,r)}),u5e(e,i,!1,!0),d5e[i]=h5e,e},f5e=ir,p5e=ci,m5e=Qee,g5e=Kj,y5e=Hj,v5e=Gd,yB=zd,vB=kf,b5e=ete,w5e=m5e.PROPER,qw=b5e.BUGGY_SAFARI_ITERATORS,nN=Jr("iterator"),bB="keys",Yw="values",wB="entries",E5e=function(){return this},tte=function(e,t,r,n,i,a,o){g5e(r,t,n);var s,l,c,u=function(v){if(v===i&&g)return g;if(!qw&&v in p)return p[v];switch(v){case bB:case Yw:case wB:return function(){return new r(this,v)}}return function(){return new r(this)}},h=t+" Iterator",f=!1,p=e.prototype,m=p[nN]||p["@@iterator"]||i&&p[i],g=!qw&&m||u(i),y=t=="Array"&&p.entries||m;if(y&&(s=y5e(y.call(new e)))!==Object.prototype&&s.next&&(v5e(s,h,!0,!0),vB[h]=E5e),w5e&&i==Yw&&m&&m.name!==Yw&&(f=!0,g=function(){return p5e(m,this)}),i)if(l={values:u(Yw),keys:a?g:u(bB),entries:u(wB)},o)for(c in l)(qw||f||!(c in p))&&yB(p,c,l[c]);else f5e({target:t,proto:!0,forced:qw||f},l);return o&&p[nN]!==g&&yB(p,nN,g,{name:i}),vB[t]=g,l},qj=function(e,t){return{value:e,done:t}},_5e=Bd,EB=kf,rte=Pf;Gs.f;var S5e=tte,_B=qj,nte="Array Iterator",T5e=rte.set,C5e=rte.getterFor(nte);S5e(Array,"Array",function(e,t){T5e(this,{type:nte,target:_5e(e),index:0,kind:t})},function(){var e=C5e(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,_B(void 0,!0)):_B(r=="keys"?n:r=="values"?t[n]:[n,t[n]],!1)},"values"),EB.Arguments=EB.Array;var x5e=Gs,fx=function(e,t,r){return x5e.f(e,t,r)},R5e=Wa,I5e=fx,N5e=ss,SB=Jr("species"),A5e=na,O5e=TypeError,Yj=function(e,t){if(A5e(t,e))return e;throw O5e("Incorrect invocation")},k5e=li,yP=Lj,P5e=tn(Function.toString);k5e(yP.inspectSource)||(yP.inspectSource=function(e){return P5e(e)});var ite=yP.inspectSource,D5e=tn,L5e=cn,ate=li,j5e=vc,M5e=ite,ote=function(){},U5e=[],ste=Wa("Reflect","construct"),Xj=/^\s*(?:class|function)\b/,F5e=D5e(Xj.exec),V5e=!Xj.exec(ote),my=function(e){if(!ate(e))return!1;try{return ste(ote,U5e,e),!0}catch{return!1}},lte=function(e){if(!ate(e))return!1;switch(j5e(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return V5e||!!F5e(Xj,M5e(e))}catch{return!0}};lte.sham=!0;var Cv,Zf,TB,iN,px=!ste||L5e(function(){var e;return my(my.call)||!my(Object)||!my(function(){e=!0})||e})?lte:my,B5e=px,$5e=Pg,H5e=TypeError,CB=ka,z5e=function(e){if(B5e(e))return e;throw H5e($5e(e)+" is not a constructor")},G5e=Ag,W5e=Jr("species"),Jj=function(e,t){var r,n=CB(e).constructor;return n===void 0||G5e(r=CB(n)[W5e])?t:z5e(r)},Qj=tn([].slice),K5e=TypeError,mx=function(e,t){if(e<t)throw K5e("Not enough arguments");return e},cte=/(?:ipad|iphone|ipod).*applewebkit/i.test(Af),Vo=si,q5e=Dj,Y5e=$d,xB=li,X5e=vi,ute=cn,RB=$ee,J5e=Qj,IB=Mj,Q5e=mx,Z5e=cte,e4e=Lb,vP=Vo.setImmediate,bP=Vo.clearImmediate,t4e=Vo.process,aN=Vo.Dispatch,r4e=Vo.Function,NB=Vo.MessageChannel,n4e=Vo.String,oN=0,C0={},AB="onreadystatechange";ute(function(){Cv=Vo.location});var Zj=function(e){if(X5e(C0,e)){var t=C0[e];delete C0[e],t()}},sN=function(e){return function(){Zj(e)}},OB=function(e){Zj(e.data)},kB=function(e){Vo.postMessage(n4e(e),Cv.protocol+"//"+Cv.host)};vP&&bP||(vP=function(e){Q5e(arguments.length,1);var t=xB(e)?e:r4e(e),r=J5e(arguments,1);return C0[++oN]=function(){q5e(t,void 0,r)},Zf(oN),oN},bP=function(e){delete C0[e]},e4e?Zf=function(e){t4e.nextTick(sN(e))}:aN&&aN.now?Zf=function(e){aN.now(sN(e))}:NB&&!Z5e?(iN=(TB=new NB).port2,TB.port1.onmessage=OB,Zf=Y5e(iN.postMessage,iN)):Vo.addEventListener&&xB(Vo.postMessage)&&!Vo.importScripts&&Cv&&Cv.protocol!=="file:"&&!ute(kB)?(Zf=kB,Vo.addEventListener("message",OB,!1)):Zf=AB in IB("script")?function(e){RB.appendChild(IB("script"))[AB]=function(){RB.removeChild(this),Zj(e)}}:function(e){setTimeout(sN(e),0)});var dte={set:vP,clear:bP},hte=function(){this.head=null,this.tail=null};hte.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return(this.head=e.next)===null&&(this.tail=null),e.item}};var ep,lN,cN,uN,PB,fte=hte,i4e=/ipad|iphone|ipod/i.test(Af)&&typeof Pebble<"u",a4e=/web0s(?!.*chrome)/i.test(Af),cf=si,DB=$d,o4e=kb.f,dN=dte.set,s4e=fte,l4e=cte,c4e=i4e,u4e=a4e,hN=Lb,LB=cf.MutationObserver||cf.WebKitMutationObserver,jB=cf.document,MB=cf.process,Xw=cf.Promise,UB=o4e(cf,"queueMicrotask"),wP=UB&&UB.value;wP||(gy=new s4e,yy=function(){var e,t;for(hN&&(e=MB.domain)&&e.exit();t=gy.get();)try{t()}catch(r){throw gy.head&&ep(),r}e&&e.enter()},l4e||hN||u4e||!LB||!jB?!c4e&&Xw&&Xw.resolve?((uN=Xw.resolve(void 0)).constructor=Xw,PB=DB(uN.then,uN),ep=function(){PB(yy)}):hN?ep=function(){MB.nextTick(yy)}:(dN=DB(dN,cf),ep=function(){dN(yy)}):(lN=!0,cN=jB.createTextNode(""),new LB(yy).observe(cN,{characterData:!0}),ep=function(){cN.data=lN=!lN}),wP=function(e){gy.head||ep(),gy.add(e)});var gy,yy,d4e=wP,Lg=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}},uf=si.Promise,pte=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",h4e=!pte&&!Lb&&typeof window=="object"&&typeof document=="object",f4e=si,x0=uf,p4e=li,m4e=Oee,g4e=ite,y4e=Jr,v4e=h4e,b4e=pte,fN=lf,FB=x0&&x0.prototype,w4e=y4e("species"),mte=!1,gte=p4e(f4e.PromiseRejectionEvent),E4e=m4e("Promise",function(){var e=g4e(x0),t=e!==String(x0);if(!t&&fN===66||!FB.catch||!FB.finally)return!0;if(!fN||fN<51||!/native code/.test(e)){var r=new x0(function(i){i(1)}),n=function(i){i(function(){},function(){})};if((r.constructor={})[w4e]=n,!(mte=r.then(function(){})instanceof n))return!0}return!t&&(v4e||b4e)&&!gte}),Fb={CONSTRUCTOR:E4e,REJECTION_EVENT:gte,SUBCLASSING:mte},bc={},VB=zs,_4e=TypeError,S4e=function(e){var t,r;this.promise=new e(function(n,i){if(t!==void 0||r!==void 0)throw _4e("Bad Promise constructor");t=n,r=i}),this.resolve=VB(t),this.reject=VB(r)};bc.f=function(e){return new S4e(e)};var pN,BB,T4e=ir,cT=Lb,Id=si,Vb=ci,C4e=zd,x4e=Gd,R4e=function(e){var t=R5e(e);N5e&&t&&!t[SB]&&I5e(t,SB,{configurable:!0,get:function(){return this}})},I4e=zs,EP=li,N4e=So,A4e=Yj,O4e=Jj,yte=dte.set,eM=d4e,k4e=function(e,t){try{arguments.length==1?console.error(e):console.error(e,t)}catch{}},P4e=Lg,D4e=fte,vte=Pf,_P=uf,bte=Fb,wte=bc,m_="Promise",$B=bte.CONSTRUCTOR,L4e=bte.REJECTION_EVENT,mN=vte.getterFor(m_),j4e=vte.set,M4e=_P&&_P.prototype,vy=_P,gN=M4e,Ete=Id.TypeError,SP=Id.document,tM=Id.process,TP=wte.f,U4e=TP,F4e=!!(SP&&SP.createEvent&&Id.dispatchEvent),_te="unhandledrejection",Ste=function(e){var t;return!(!N4e(e)||!EP(t=e.then))&&t},Tte=function(e,t){var r,n,i,a=t.value,o=t.state==1,s=o?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{s?(o||(t.rejection===2&&B4e(t),t.rejection=1),s===!0?r=a:(u&&u.enter(),r=s(a),u&&(u.exit(),i=!0)),r===e.promise?c(Ete("Promise-chain cycle")):(n=Ste(r))?Vb(n,r,l,c):l(r)):c(a)}catch(h){u&&!i&&u.exit(),c(h)}},Cte=function(e,t){e.notified||(e.notified=!0,eM(function(){for(var r,n=e.reactions;r=n.get();)Tte(r,e);e.notified=!1,t&&!e.rejection&&V4e(e)}))},xte=function(e,t,r){var n,i;F4e?((n=SP.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),Id.dispatchEvent(n)):n={promise:t,reason:r},!L4e&&(i=Id["on"+e])?i(n):e===_te&&k4e("Unhandled promise rejection",r)},V4e=function(e){Vb(yte,Id,function(){var t,r=e.facade,n=e.value;if(HB(e)&&(t=P4e(function(){cT?tM.emit("unhandledRejection",n,r):xte(_te,r,n)}),e.rejection=cT||HB(e)?2:1,t.error))throw t.value})},HB=function(e){return e.rejection!==1&&!e.parent},B4e=function(e){Vb(yte,Id,function(){var t=e.facade;cT?tM.emit("rejectionHandled",t):xte("rejectionhandled",t,e.value)})},zp=function(e,t,r){return function(n){e(t,n,r)}},pm=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,Cte(e,!0))},CP=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw Ete("Promise can't be resolved itself");var n=Ste(t);n?eM(function(){var i={done:!1};try{Vb(n,t,zp(CP,i,e),zp(pm,i,e))}catch(a){pm(i,a,e)}}):(e.value=t,e.state=1,Cte(e,!1))}catch(i){pm({done:!1},i,e)}}};$B&&(gN=(vy=function(e){A4e(this,gN),I4e(e),Vb(pN,this);var t=mN(this);try{e(zp(CP,t),zp(pm,t))}catch(r){pm(t,r)}}).prototype,(pN=function(e){j4e(this,{type:m_,done:!1,notified:!1,parent:!1,reactions:new D4e,rejection:!1,state:0,value:void 0})}).prototype=C4e(gN,"then",function(e,t){var r=mN(this),n=TP(O4e(this,vy));return r.parent=!0,n.ok=!EP(e)||e,n.fail=EP(t)&&t,n.domain=cT?tM.domain:void 0,r.state==0?r.reactions.add(n):eM(function(){Tte(n,r)}),n.promise}),BB=function(){var e=new pN,t=mN(e);this.promise=e,this.resolve=zp(CP,t),this.reject=zp(pm,t)},wte.f=TP=function(e){return e===vy||e===void 0?new BB(e):U4e(e)}),T4e({global:!0,constructor:!0,wrap:!0,forced:$B},{Promise:vy}),x4e(vy,m_,!1,!0),R4e(m_);var Rte=Jr("iterator"),Ite=!1;try{zB=0,yN={next:function(){return{done:!!zB++}},return:function(){Ite=!0}},yN[Rte]=function(){return this},Array.from(yN,function(){throw 2})}catch{}var zB,yN,$4e=uf,H4e=function(e,t){if(!Ite)return!1;var r=!1;try{var n={};n[Rte]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch{}return r},gx=Fb.CONSTRUCTOR||!H4e(function(e){$4e.all(e).then(void 0,function(){})}),z4e=ci,G4e=zs,W4e=bc,K4e=Lg,q4e=Ub;ir({target:"Promise",stat:!0,forced:gx},{all:function(e){var t=this,r=W4e.f(t),n=r.resolve,i=r.reject,a=K4e(function(){var o=G4e(t.resolve),s=[],l=0,c=1;q4e(e,function(u){var h=l++,f=!1;c++,z4e(o,t,u).then(function(p){f||(f=!0,s[h]=p,--c||n(s))},i)}),--c||n(s)});return a.error&&i(a.value),r.promise}});var Y4e=ir,X4e=Fb.CONSTRUCTOR;uf&&uf.prototype,Y4e({target:"Promise",proto:!0,forced:X4e,real:!0},{catch:function(e){return this.then(void 0,e)}});var J4e=ci,Q4e=zs,Z4e=bc,e3e=Lg,t3e=Ub;ir({target:"Promise",stat:!0,forced:gx},{race:function(e){var t=this,r=Z4e.f(t),n=r.reject,i=e3e(function(){var a=Q4e(t.resolve);t3e(e,function(o){J4e(a,t,o).then(r.resolve,n)})});return i.error&&n(i.value),r.promise}});var r3e=ci,n3e=bc;ir({target:"Promise",stat:!0,forced:Fb.CONSTRUCTOR},{reject:function(e){var t=n3e.f(this);return r3e(t.reject,void 0,e),t.promise}});var i3e=ka,a3e=So,o3e=bc,Nte=function(e,t){if(i3e(e),a3e(t)&&t.constructor===e)return t;var r=o3e.f(e);return(0,r.resolve)(t),r.promise},s3e=ir,l3e=uf,c3e=Fb.CONSTRUCTOR,u3e=Nte,d3e=Wa("Promise"),h3e=!c3e;s3e({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return u3e(h3e&&this===d3e?l3e:this,e)}});var f3e=ci,p3e=zs,m3e=bc,g3e=Lg,y3e=Ub;ir({target:"Promise",stat:!0,forced:gx},{allSettled:function(e){var t=this,r=m3e.f(t),n=r.resolve,i=r.reject,a=g3e(function(){var o=p3e(t.resolve),s=[],l=0,c=1;y3e(e,function(u){var h=l++,f=!1;c++,f3e(o,t,u).then(function(p){f||(f=!0,s[h]={status:"fulfilled",value:p},--c||n(s))},function(p){f||(f=!0,s[h]={status:"rejected",reason:p},--c||n(s))})}),--c||n(s)});return a.error&&i(a.value),r.promise}});var v3e=ci,b3e=zs,w3e=Wa,E3e=bc,_3e=Lg,S3e=Ub,GB="No one promise resolved";ir({target:"Promise",stat:!0,forced:gx},{any:function(e){var t=this,r=w3e("AggregateError"),n=E3e.f(t),i=n.resolve,a=n.reject,o=_3e(function(){var s=b3e(t.resolve),l=[],c=0,u=1,h=!1;S3e(e,function(f){var p=c++,m=!1;u++,v3e(s,t,f).then(function(g){m||h||(h=!0,i(g))},function(g){m||h||(m=!0,l[p]=g,--u||a(new r(l,GB)))})}),--u||a(new r(l,GB))});return o.error&&a(o.value),n.promise}});var T3e=ir,xP=uf,C3e=cn,x3e=Wa,R3e=li,I3e=Jj,WB=Nte,N3e=xP&&xP.prototype;T3e({target:"Promise",proto:!0,real:!0,forced:!!xP&&C3e(function(){N3e.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=I3e(this,x3e("Promise")),r=R3e(e);return this.then(r?function(n){return WB(t,e()).then(function(){return n})}:e,r?function(n){return WB(t,e()).then(function(){throw n})}:e)}});var rM=tn,A3e=Uj,O3e=ls,k3e=Og,P3e=rM("".charAt),KB=rM("".charCodeAt),D3e=rM("".slice),qB=function(e){return function(t,r){var n,i,a=O3e(k3e(t)),o=A3e(r),s=a.length;return o<0||o>=s?e?"":void 0:(n=KB(a,o))<55296||n>56319||o+1===s||(i=KB(a,o+1))<56320||i>57343?e?P3e(a,o):n:e?D3e(a,o,o+2):i-56320+(n-55296<<10)+65536}},nM={codeAt:qB(!1),charAt:qB(!0)},L3e=nM.charAt,j3e=ls,Ate=Pf,M3e=tte,YB=qj,Ote="String Iterator",U3e=Ate.set,F3e=Ate.getterFor(Ote);M3e(String,"String",function(e){U3e(this,{type:Ote,string:j3e(e),index:0})},function(){var e,t=F3e(this),r=t.string,n=t.index;return n>=r.length?YB(void 0,!0):(e=L3e(r,n),t.index+=e.length,YB(e,!1))});var V3e=Tl.Promise,B3e={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},$3e=si,H3e=vc,z3e=Hd,XB=kf,JB=Jr("toStringTag");for(Qw in B3e)vN=$3e[Qw],Jw=vN&&vN.prototype,Jw&&H3e(Jw)!==JB&&z3e(Jw,JB,Qw),XB[Qw]=XB.Array;var vN,Jw,Qw,kte=V3e,ye=$r(kte),QB=Fee;function Pte(e,t){let r=e&&e.navigator;if(!r.mediaDevices)return;let n=function(o){if(typeof o!="object"||o.mandatory||o.optional)return o;let s={};return Object.keys(o).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;let c=typeof o[l]=="object"?o[l]:{ideal:o[l]};c.exact!==void 0&&typeof c.exact=="number"&&(c.min=c.max=c.exact);let u=function(h,f){return h?h+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(c.ideal!==void 0){s.optional=s.optional||[];let h={};typeof c.ideal=="number"?(h[u("min",l)]=c.ideal,s.optional.push(h),h={},h[u("max",l)]=c.ideal,s.optional.push(h)):(h[u("",l)]=c.ideal,s.optional.push(h))}c.exact!==void 0&&typeof c.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[u("",l)]=c.exact):["min","max"].forEach(h=>{c[h]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[u(h,l)]=c[h])})}),o.advanced&&(s.optional=(s.optional||[]).concat(o.advanced)),s},i=function(o,s){if(t.version>=61)return s(o);if((o=JSON.parse(JSON.stringify(o)))&&typeof o.audio=="object"){let l=function(c,u,h){u in c&&!(h in c)&&(c[h]=c[u],delete c[u])};l((o=JSON.parse(JSON.stringify(o))).audio,"autoGainControl","googAutoGainControl"),l(o.audio,"noiseSuppression","googNoiseSuppression"),o.audio=n(o.audio)}if(o&&typeof o.video=="object"){let l=o.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});let c=t.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||c)){let u;if(delete o.video.facingMode,l.exact==="environment"||l.ideal==="environment"?u=["back","rear"]:l.exact!=="user"&&l.ideal!=="user"||(u=["front"]),u)return r.mediaDevices.enumerateDevices().then(h=>{let f=(h=h.filter(p=>p.kind==="videoinput")).find(p=>u.some(m=>{var g;return be(g=p.label.toLowerCase()).call(g,m)}));return!f&&h.length&&be(u).call(u,"back")&&(f=h[h.length-1]),f&&(o.video.deviceId=l.exact?{exact:f.deviceId}:{ideal:f.deviceId}),o.video=n(o.video),QB("chrome: "+JSON.stringify(o)),s(o)})}o.video=n(o.video)}return QB("chrome: "+JSON.stringify(o)),s(o)},a=function(o){return t.version>=64?o:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[o.name]||o.name,message:o.message,constraint:o.constraint||o.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=(function(o,s,l){i(o,c=>{r.webkitGetUserMedia(c,s,u=>{l&&l(a(u))})})}).bind(r),r.mediaDevices.getUserMedia){let o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(s){return i(s,l=>o(l).then(c=>{if(l.audio&&!c.getAudioTracks().length||l.video&&!c.getVideoTracks().length)throw c.getTracks().forEach(u=>{u.stop()}),new DOMException("","NotFoundError");return c},c=>ye.reject(a(c))))}}}function Dte(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Lte(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(o=>o.track&&o.track.id===n.track.id):{track:n.track};let a=new Event("track");a.track=n.track,a.receiver=i,a.transceiver={receiver:i},a.streams=[r.stream],this.dispatchEvent(a)}),r.stream.getTracks().forEach(n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(o=>o.track&&o.track.id===n.id):{track:n};let a=new Event("track");a.track=n,a.receiver=i,a.transceiver={receiver:i},a.streams=[r.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Of(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function jte(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){let t=function(i,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=i.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};let i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,s){let l=i.apply(this,arguments);return l||(l=t(this,o),this._senders.push(l)),l};let a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){a.apply(this,arguments);let s=this._senders.indexOf(o);s!==-1&&this._senders.splice(s,1)}}let r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(a=>{this._senders.push(t(this,a))})};let n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(a=>{let o=this._senders.find(s=>s.track===a);o&&this._senders.splice(this._senders.indexOf(o),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){let t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){let r=t.apply(this,[]);return r.forEach(n=>n._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Mte(e){if(!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[r,n,i]=arguments;if(arguments.length>0&&typeof r=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof r!="function"))return t.apply(this,[]);let a=function(s){let l={};return s.result().forEach(c=>{let u={id:c.id,timestamp:c.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[c.type]||c.type};c.names().forEach(h=>{u[h]=c.stat(h)}),l[u.id]=u}),l},o=function(s){return new Map(Object.keys(s).map(l=>[l,s[l]]))};if(arguments.length>=2){let s=function(l){n(o(a(l)))};return t.apply(this,[s,r])}return new ye((s,l)=>{t.apply(this,[function(c){s(o(a(c)))},l])}).then(n,i)}}function Ute(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){let r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){let i=r.apply(this,[]);return i.forEach(a=>a._pc=this),i});let n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){let i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){let i=this;return this._pc.getStats().then(a=>QV(a,i.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){let r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){let n=r.apply(this,[]);return n.forEach(i=>i._pc=this),n}),Of(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){let n=this;return this._pc.getStats().then(i=>QV(i,n.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;let t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){let r=arguments[0],n,i,a;return this.getSenders().forEach(o=>{o.track===r&&(n?a=!0:n=o)}),this.getReceivers().forEach(o=>(o.track===r&&(i?a=!0:i=o),o.track===r)),a||n&&i?ye.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():i?i.getStats():ye.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Fte(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,o){if(!o)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};let s=t.apply(this,arguments);return this._shimmedLocalStreams[o.id]?this._shimmedLocalStreams[o.id].indexOf(s)===-1&&this._shimmedLocalStreams[o.id].push(s):this._shimmedLocalStreams[o.id]=[o,s],s};let r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(l=>{if(this.getSenders().find(c=>c.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});let o=this.getSenders();r.apply(this,arguments);let s=this.getSenders().filter(l=>o.indexOf(l)===-1);this._shimmedLocalStreams[a.id]=[a].concat(s)};let n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],n.apply(this,arguments)};let i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(o=>{let s=this._shimmedLocalStreams[o].indexOf(a);s!==-1&&this._shimmedLocalStreams[o].splice(s,1),this._shimmedLocalStreams[o].length===1&&delete this._shimmedLocalStreams[o]}),i.apply(this,arguments)}}function Vte(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Fte(e);let r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){let l=r.apply(this);return this._reverseStreams=this._reverseStreams||{},l.map(c=>this._reverseStreams[c.id])};let n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.getTracks().forEach(c=>{if(this.getSenders().find(u=>u.track===c))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[l.id]){let c=new e.MediaStream(l.getTracks());this._streams[l.id]=c,this._reverseStreams[c.id]=l,l=c}n.apply(this,[l])};let i=e.RTCPeerConnection.prototype.removeStream;function a(l,c){let u=c.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{let f=l._reverseStreams[h],p=l._streams[f.id];u=u.replace(new RegExp(p.id,"g"),f.id)}),new RTCSessionDescription({type:c.type,sdp:u})}e.RTCPeerConnection.prototype.removeStream=function(l){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[l.id]||l]),delete this._reverseStreams[this._streams[l.id]?this._streams[l.id].id:l.id],delete this._streams[l.id]},e.RTCPeerConnection.prototype.addTrack=function(l,c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");let u=[].slice.call(arguments,1);if(u.length!==1||!u[0].getTracks().find(f=>f===l))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(f=>f.track===l))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};let h=this._streams[c.id];if(h)h.addTrack(l),ye.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{let f=new e.MediaStream([l]);this._streams[c.id]=f,this._reverseStreams[f.id]=c,this.addStream(f)}return this.getSenders().find(f=>f.track===l)},["createOffer","createAnswer"].forEach(function(l){let c=e.RTCPeerConnection.prototype[l],u={[l](){let h=arguments;return arguments.length&&typeof arguments[0]=="function"?c.apply(this,[f=>{let p=a(this,f);h[0].apply(null,[p])},f=>{h[1]&&h[1].apply(null,f)},arguments[2]]):c.apply(this,arguments).then(f=>a(this,f))}};e.RTCPeerConnection.prototype[l]=u[l]});let o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(l,c){let u=c.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{let f=l._reverseStreams[h],p=l._streams[f.id];u=u.replace(new RegExp(f.id,"g"),p.id)}),new RTCSessionDescription({type:c.type,sdp:u})}(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};let s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){let l=s.get.apply(this);return l.type===""?l:a(this,l)}}),e.RTCPeerConnection.prototype.removeTrack=function(l){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!l._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(l._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let c;this._streams=this._streams||{},Object.keys(this._streams).forEach(u=>{this._streams[u].getTracks().find(h=>l.track===h)&&(c=this._streams[u])}),c&&(c.getTracks().length===1?this.removeStream(this._reverseStreams[c.id]):c.removeTrack(l.track),this.dispatchEvent(new Event("negotiationneeded")))}}function RP(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){let n=e.RTCPeerConnection.prototype[r],i={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=i[r]})}function Bte(e,t){Of(e,"negotiationneeded",r=>{let n=r.target;if(!(t.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")||n.signalingState==="stable")return r})}var ZB=Object.freeze({__proto__:null,fixNegotiationNeeded:Bte,shimAddTrackRemoveTrack:Vte,shimAddTrackRemoveTrackWithNative:Fte,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(typeof t=="function"?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(n=>{let i=r.video&&r.video.width,a=r.video&&r.video.height,o=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:o||3}},i&&(r.video.mandatory.maxWidth=i),a&&(r.video.mandatory.maxHeight=a),e.navigator.mediaDevices.getUserMedia(r)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:jte,shimGetStats:Mte,shimGetUserMedia:Pte,shimMediaStream:Dte,shimOnTrack:Lte,shimPeerConnection:RP,shimSenderReceiverGetStats:Ute});function $te(e,t){let r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(i,a,o){$j("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(i).then(a,o)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){let i=function(o,s,l){s in o&&!(l in o)&&(o[l]=o[s],delete o[s])},a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),a(o)},n&&n.prototype.getSettings){let o=n.prototype.getSettings;n.prototype.getSettings=function(){let s=o.apply(this,arguments);return i(s,"mozAutoGainControl","autoGainControl"),i(s,"mozNoiseSuppression","noiseSuppression"),s}}if(n&&n.prototype.applyConstraints){let o=n.prototype.applyConstraints;n.prototype.applyConstraints=function(s){return this.kind==="audio"&&typeof s=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s,"autoGainControl","mozAutoGainControl"),i(s,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[s])}}}}function Hte(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function IP(e,t){if(typeof e!="object"||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){let a=e.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=o[i]});let r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[i,a,o]=arguments;return n.apply(this,[i||null]).then(s=>{if(t.version<53&&!a)try{s.forEach(l=>{l.type=r[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;s.forEach((c,u)=>{s.set(u,Object.assign({},c,{type:r[c.type]||c.type}))})}return s}).then(a,o)}}function zte(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;let t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){let n=t.apply(this,[]);return n.forEach(i=>i._pc=this),n});let r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){let n=r.apply(this,arguments);return n._pc=this,n}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):ye.resolve(new Map)}}function Gte(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;let t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){let r=t.apply(this,[]);return r.forEach(n=>n._pc=this),r}),Of(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Wte(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(t){$j("removeStream","removeTrack"),this.getSenders().forEach(r=>{var n;r.track&&be(n=t.getTracks()).call(n,r.track)&&this.removeTrack(r)})})}function Kte(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function qte(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];let n=r.length>0;n&&r.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});let i=t.apply(this,arguments);if(n){let{sender:a}=i,o=a.getParameters();(!("encodings"in o)||o.encodings.length===1&&Object.keys(o.encodings[0]).length===0)&&(o.encodings=r,a.sendEncodings=r,this.setParametersPromises.push(a.setParameters(o).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return i})}function Yte(e){if(typeof e!="object"||!e.RTCRtpSender)return;let t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){let r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Xte(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?ye.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Jte(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?ye.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var e6=Object.freeze({__proto__:null,shimAddTransceiver:qte,shimCreateAnswer:Jte,shimCreateOffer:Xte,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){let n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,ye.reject(n)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})},shimGetParameters:Yte,shimGetUserMedia:$te,shimOnTrack:Hte,shimPeerConnection:IP,shimRTCDataChannel:Kte,shimReceiverGetStats:Gte,shimRemoveStream:Wte,shimSenderGetStats:zte});function Qte(e){if(typeof e=="object"&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){var n;this._localStreams||(this._localStreams=[]),be(n=this._localStreams).call(n,r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i&&i.forEach(o=>{var s;this._localStreams?be(s=this._localStreams).call(s,o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);let r=this._localStreams.indexOf(t);if(r===-1)return;this._localStreams.splice(r,1);let n=t.getTracks();this.getSenders().forEach(i=>{be(n).call(n,i.track)&&this.removeTrack(i)})})}}function Zte(e){if(typeof e=="object"&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(i=>{var a;if(this._remoteStreams||(this._remoteStreams=[]),be(a=this._remoteStreams).call(a,i))return;this._remoteStreams.push(i);let o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){let r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(i=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(i)>=0)return;r._remoteStreams.push(i);let a=new Event("addstream");a.stream=i,r.dispatchEvent(a)})}),t.apply(r,arguments)}}}function ere(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(l,c){let u=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[u]);return c?(h.then(l,c),ye.resolve()):h},t.createAnswer=function(l,c){let u=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[u]);return c?(h.then(l,c),ye.resolve()):h};let s=function(l,c,u){let h=i.apply(this,[l]);return u?(h.then(c,u),ye.resolve()):h};t.setLocalDescription=s,s=function(l,c,u){let h=a.apply(this,[l]);return u?(h.then(c,u),ye.resolve()):h},t.setRemoteDescription=s,s=function(l,c,u){let h=o.apply(this,[l]);return u?(h.then(c,u),ye.resolve()):h},t.addIceCandidate=s}function tre(e){let t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){let r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=i=>n(rre(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,n,i){t.mediaDevices.getUserMedia(r).then(n,i)}).bind(t))}function rre(e){return e&&e.video!==void 0?Object.assign({},e,{video:Vee(e.video)}):e}function nre(e){if(!e.RTCPeerConnection)return;let t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,n){if(r&&r.iceServers){let i=[];for(let a=0;a<r.iceServers.length;a++){let o=r.iceServers[a];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?($j("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,i.push(o)):i.push(r.iceServers[a])}r.iceServers=i}return new t(r,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function ire(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function are(e){let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){r.offerToReceiveAudio!==void 0&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);let n=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):r.offerToReceiveAudio!==!0||n||this.addTransceiver("audio",{direction:"recvonly"}),r.offerToReceiveVideo!==void 0&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);let i=this.getTransceivers().find(a=>a.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveVideo!==!0||i||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function ore(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var t6=Object.freeze({__proto__:null,shimAudioContext:ore,shimCallbacksAPI:ere,shimConstraints:rre,shimCreateOfferLegacy:are,shimGetUserMedia:tre,shimLocalStreamsAPI:Qte,shimRTCIceServerUrls:nre,shimRemoteStreamsAPI:Zte,shimTrackEventTransceiver:ire}),sre=`	
\v\f\r \u2028\u2029\uFEFF`,G3e=Og,W3e=ls,NP=sre,r6=tn("".replace),K3e=RegExp("^["+NP+"]+"),q3e=RegExp("(^|[^"+NP+"])["+NP+"]+$"),bN=function(e){return function(t){var r=W3e(G3e(t));return 1&e&&(r=r6(r,K3e,"")),2&e&&(r=r6(r,q3e,"$1")),r}},Y3e={start:bN(1),end:bN(2),trim:bN(3)},X3e=Qee.PROPER,J3e=cn,n6=sre,Q3e=Y3e.trim;ir({target:"String",proto:!0,forced:function(e){return J3e(function(){return!!n6[e]()||""[e]()!==""||X3e&&n6[e].name!==e})}("trim")},{trim:function(){return Q3e(this)}});var Z3e=Ws("String").trim,eFe=na,tFe=Z3e,wN=String.prototype,rFe=function(e){var t=e.trim;return typeof e=="string"||e===wN||eFe(wN,e)&&t===wN.trim?tFe:t},Ui=$r(rFe),lre={exports:{}};(function(e){let t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},t.splitSections=function(r){return r.split(`
m=`).map((n,i)=>(i>0?"m="+n:n).trim()+`\r
`)},t.getDescription=function(r){let n=t.splitSections(r);return n&&n[0]},t.getMediaSections=function(r){let n=t.splitSections(r);return n.shift(),n},t.matchPrefix=function(r,n){return t.splitLines(r).filter(i=>i.indexOf(n)===0)},t.parseCandidate=function(r){let n;n=r.indexOf("a=candidate:")===0?r.substring(12).split(" "):r.substring(10).split(" ");let i={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let a=8;a<n.length;a+=2)switch(n[a]){case"raddr":i.relatedAddress=n[a+1];break;case"rport":i.relatedPort=parseInt(n[a+1],10);break;case"tcptype":i.tcpType=n[a+1];break;case"ufrag":i.ufrag=n[a+1],i.usernameFragment=n[a+1];break;default:i[n[a]]===void 0&&(i[n[a]]=n[a+1])}return i},t.writeCandidate=function(r){let n=[];n.push(r.foundation);let i=r.component;i==="rtp"?n.push(1):i==="rtcp"?n.push(2):n.push(i),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);let a=r.type;return n.push("typ"),n.push(a),a!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},t.parseIceOptions=function(r){return r.substring(14).split(" ")},t.parseRtpMap=function(r){let n=r.substring(9).split(" "),i={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),i.name=n[0],i.clockRate=parseInt(n[1],10),i.channels=n.length===3?parseInt(n[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);let i=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(r){let n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},t.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},t.parseFmtp=function(r){let n={},i,a=r.substring(r.indexOf(" ")+1).split(";");for(let o=0;o<a.length;o++)i=a[o].trim().split("="),n[i[0].trim()]=i[1];return n},t.writeFmtp=function(r){let n="",i=r.payloadType;if(r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){let a=[];Object.keys(r.parameters).forEach(o=>{r.parameters[o]!==void 0?a.push(o+"="+r.parameters[o]):a.push(o)}),n+="a=fmtp:"+i+" "+a.join(";")+`\r
`}return n},t.parseRtcpFb=function(r){let n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},t.writeRtcpFb=function(r){let n="",i=r.payloadType;return r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(a=>{n+="a=rtcp-fb:"+i+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),n},t.parseSsrcMedia=function(r){let n=r.indexOf(" "),i={ssrc:parseInt(r.substring(7,n),10)},a=r.indexOf(":",n);return a>-1?(i.attribute=r.substring(n+1,a),i.value=r.substring(a+1)):i.attribute=r.substring(n+1),i},t.parseSsrcGroup=function(r){let n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(i=>parseInt(i,10))}},t.getMid=function(r){let n=t.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(r){let n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},t.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:t.matchPrefix(r+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(r,n){let i="a=setup:"+n+`\r
`;return r.fingerprints.forEach(a=>{i+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),i},t.parseCryptoLine=function(r){let n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},t.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?t.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;let n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},t.getCryptoParameters=function(r,n){return t.matchPrefix(r+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(r,n){let i=t.matchPrefix(r+n,"a=ice-ufrag:")[0],a=t.matchPrefix(r+n,"a=ice-pwd:")[0];return i&&a?{usernameFragment:i.substring(12),password:a.substring(10)}:null},t.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},t.parseRtpParameters=function(r){let n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(r)[0].split(" ");n.profile=i[2];for(let o=3;o<i.length;o++){let s=i[o],l=t.matchPrefix(r,"a=rtpmap:"+s+" ")[0];if(l){let c=t.parseRtpMap(l),u=t.matchPrefix(r,"a=fmtp:"+s+" ");switch(c.parameters=u.length?t.parseFmtp(u[0]):{},c.rtcpFeedback=t.matchPrefix(r,"a=rtcp-fb:"+s+" ").map(t.parseRtcpFb),n.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(c.name.toUpperCase())}}}t.matchPrefix(r,"a=extmap:").forEach(o=>{n.headerExtensions.push(t.parseExtmap(o))});let a=t.matchPrefix(r,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach(o=>{a.forEach(s=>{o.rtcpFeedback.find(l=>l.type===s.type&&l.parameter===s.parameter)||o.rtcpFeedback.push(s)})}),n},t.writeRtpDescription=function(r,n){let i="";i+="m="+r+" ",i+=n.codecs.length>0?"9":"0",i+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=n.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(o=>{i+=t.writeRtpMap(o),i+=t.writeFmtp(o),i+=t.writeRtcpFb(o)});let a=0;return n.codecs.forEach(o=>{o.maxptime>a&&(a=o.maxptime)}),a>0&&(i+="a=maxptime:"+a+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(o=>{i+=t.writeExtmap(o)}),i},t.parseRtpEncodingParameters=function(r){let n=[],i=t.parseRtpParameters(r),a=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=t.matchPrefix(r,"a=ssrc:").map(f=>t.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),l=s.length>0&&s[0].ssrc,c,u=t.matchPrefix(r,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===l&&(c=u[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let p={ssrc:l,codecPayloadType:parseInt(f.parameters.apt,10)};l&&c&&(p.rtx={ssrc:c}),n.push(p),a&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},n.push(p))}}),n.length===0&&l&&n.push({ssrc:l});let h=t.matchPrefix(r,"b=");return h.length&&(h=h[0].indexOf("b=TIAS:")===0?parseInt(h[0].substring(7),10):h[0].indexOf("b=AS:")===0?1e3*parseInt(h[0].substring(5),10)*.95-16e3:void 0,n.forEach(f=>{f.maxBitrate=h})),n},t.parseRtcpParameters=function(r){let n={},i=t.matchPrefix(r,"a=ssrc:").map(s=>t.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);let a=t.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=a.length>0,n.compound=a.length===0;let o=t.matchPrefix(r,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},t.parseMsid=function(r){let n,i=t.matchPrefix(r,"a=msid:");if(i.length===1)return n=i[0].substring(7).split(" "),{stream:n[0],track:n[1]};let a=t.matchPrefix(r,"a=ssrc:").map(o=>t.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");return a.length>0?(n=a[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(r){let n=t.parseMLine(r),i=t.matchPrefix(r,"a=max-message-size:"),a;i.length>0&&(a=parseInt(i[0].substring(19),10)),isNaN(a)&&(a=65536);let o=t.matchPrefix(r,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:a};let s=t.matchPrefix(r,"a=sctpmap:");if(s.length>0){let l=s[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:a}}},t.writeSctpDescription=function(r,n){let i=[];return i=r.protocol!=="DTLS/SCTP"?["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&i.push("a=max-message-size:"+n.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(r,n,i){let a,o=n!==void 0?n:2;return a=r||t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+a+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(r,n){let i=t.splitLines(r);for(let a=0;a<i.length;a++)switch(i[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[a].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(r){return t.splitLines(r)[0].split(" ")[0].substring(2)},t.isRejected=function(r){return r.split(" ",2)[1]==="0"},t.parseMLine=function(r){let n=t.splitLines(r)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(r){let n=t.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;let n=t.splitLines(r);for(let i=0;i<n.length;i++)if(n[i].length<2||n[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(lre);var cre=lre.exports,mm=$r(cre),nFe=S2e({__proto__:null,default:mm},[cre]);function g_(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;let t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&((r=JSON.parse(JSON.stringify(r))).candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){let n=new t(r),i=mm.parseCandidate(r.candidate),a=Object.assign(n,i);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Of(e,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new e.RTCIceCandidate(r.candidate),writable:"false"}),r))}function AP(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Of(e,"icecandidate",t=>{if(t.candidate){let r=mm.parseCandidate(t.candidate.candidate);r.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return t})}function y_(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});let r=function(s){if(!s||!s.sdp)return!1;let l=mm.splitSections(s.sdp);return l.shift(),l.some(c=>{let u=mm.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},n=function(s){let l=s.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;let c=parseInt(l[1],10);return c!=c?-1:c},i=function(s){let l=65536;return t.browser==="firefox"&&(l=t.version<57?s===-1?16384:2147483637:t.version<60?t.version===57?65535:65536:2147483637),l},a=function(s,l){let c=65536;t.browser==="firefox"&&t.version===57&&(c=65535);let u=mm.matchPrefix(s.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substr(19),10):t.browser==="firefox"&&l!==-1&&(c=2147483637),c},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){let{sdpSemantics:s}=this.getConfiguration();s==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){let s=n(arguments[0]),l=i(s),c=a(arguments[0],s),u;u=l===0&&c===0?Number.POSITIVE_INFINITY:l===0||c===0?Math.max(l,c):Math.min(l,c);let h={};Object.defineProperty(h,"maxMessageSize",{get:()=>u}),this._sctp=h}return o.apply(this,arguments)}}function v_(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(n,i){let a=n.send;n.send=function(){let o=arguments[0],s=o.length||o.size||o.byteLength;if(n.readyState==="open"&&i.sctp&&s>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return a.apply(n,arguments)}}let r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){let n=r.apply(this,arguments);return t(n,this),n},Of(e,"datachannel",n=>(t(n.channel,n.target),n))}function OP(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;let t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{let n=t[r];t[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{let a=i.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;let o=new Event("connectionstatechange",i);a.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function kP(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;let r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){let i=n.sdp.split(`
`).filter(a=>Ui(a).call(a)!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&n instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:n.type,sdp:i}):n.sdp=i}return r.apply(this,arguments)}}function b_(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;let r=e.RTCPeerConnection.prototype.addIceCandidate;r&&r.length!==0&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?ye.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),ye.resolve())})}function w_(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;let r=e.RTCPeerConnection.prototype.setLocalDescription;r&&r.length!==0&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let n=arguments[0]||{};if(typeof n!="object"||n.type&&n.sdp)return r.apply(this,arguments);if(n={type:n.type,sdp:n.sdp},!n.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":n.type="offer";break;default:n.type="answer"}return n.sdp||n.type!=="offer"&&n.type!=="answer"?r.apply(this,[n]):(n.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(i=>r.apply(this,[i]))})}var iFe=Object.freeze({__proto__:null,removeExtmapAllowMixed:kP,shimAddIceCandidateNullOrEmpty:b_,shimConnectionState:OP,shimMaxMessageSize:y_,shimParameterlessSetLocalDescription:w_,shimRTCIceCandidate:g_,shimRTCIceCandidateRelayProtocol:AP,shimSendThrowTypeError:v_});(function(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},r=Fee,n=function(a){let o={browser:null,version:null};if(a===void 0||!a.navigator)return o.browser="Not a browser.",o;let{navigator:s}=a;if(s.mozGetUserMedia)o.browser="firefox",o.version=Ww(s.userAgent,/Firefox\/(\d+)\./,1);else if(s.webkitGetUserMedia||a.isSecureContext===!1&&a.webkitRTCPeerConnection)o.browser="chrome",o.version=Ww(s.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!a.RTCPeerConnection||!s.userAgent.match(/AppleWebKit\/(\d+)\./))return o.browser="Not a supported browser.",o;o.browser="safari",o.version=Ww(s.userAgent,/AppleWebKit\/(\d+)\./,1),o.supportsUnifiedPlan=a.RTCRtpTransceiver&&"currentDirection"in a.RTCRtpTransceiver.prototype}return o}(e),i={browserDetails:n,commonShim:iFe,extractVersion:Ww,disableLog:rMe,disableWarnings:nMe,sdp:nFe};switch(n.browser){case"chrome":if(!ZB||!RP||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),i;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),i;r("adapter.js shimming chrome."),i.browserShim=ZB,b_(e,n),w_(e),Pte(e,n),Dte(e),RP(e,n),Lte(e),Vte(e,n),jte(e),Mte(e),Ute(e),Bte(e,n),g_(e),AP(e),OP(e),y_(e,n),v_(e),kP(e,n);break;case"firefox":if(!e6||!IP||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),i;r("adapter.js shimming firefox."),i.browserShim=e6,b_(e,n),w_(e),$te(e,n),IP(e,n),Hte(e),Wte(e),zte(e),Gte(e),Kte(e),qte(e),Yte(e),Xte(e),Jte(e),g_(e),OP(e),y_(e,n),v_(e);break;case"safari":if(!t6||!t.shimSafari)return r("Safari shim is not included in this adapter release."),i;r("adapter.js shimming safari."),i.browserShim=t6,b_(e,n),w_(e),nre(e),are(e),ere(e),Qte(e),Zte(e),ire(e),tre(e),ore(e),g_(e),AP(e),y_(e,n),v_(e),kP(e,n);break;default:r("Unsupported browser!")}})({window:typeof window>"u"?void 0:window});var aFe=Ws("Array").keys,oFe=vc,sFe=vi,lFe=na,cFe=aFe,EN=Array.prototype,uFe={DOMTokenList:!0,NodeList:!0},dFe=function(e){var t=e.keys;return e===EN||lFe(EN,e)&&t===EN.keys||sFe(uFe,oFe(e))?cFe:t},eo=$r(dFe),i6=Pg,hFe=TypeError,fFe=ox,pFe=Gs,mFe=Vd,yx=function(e,t,r){var n=fFe(t);n in e?pFe.f(e,n,mFe(0,r)):e[n]=r},a6=Fj,gFe=fu,yFe=yx,vFe=Array,bFe=Math.max,iM=function(e,t,r){for(var n=gFe(e),i=a6(t,n),a=a6(r===void 0?n:r,n),o=vFe(bFe(a-i,0)),s=0;i<a;i++,s++)yFe(o,s,e[i]);return o.length=s,o},o6=iM,wFe=Math.floor,PP=function(e,t){var r=e.length,n=wFe(r/2);return r<8?EFe(e,t):_Fe(e,PP(o6(e,0,n),t),PP(o6(e,n),t),t)},EFe=function(e,t){for(var r,n,i=e.length,a=1;a<i;){for(n=a,r=e[a];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==a++&&(e[n]=r)}return e},_Fe=function(e,t,r,n){for(var i=t.length,a=r.length,o=0,s=0;o<i||s<a;)e[o+s]=o<i&&s<a?n(t[o],r[s])<=0?t[o++]:r[s++]:o<i?t[o++]:r[s++];return e},ure=PP,s6=Af.match(/firefox\/(\d+)/i),SFe=!!s6&&+s6[1],TFe=/MSIE|Trident/.test(Af),l6=Af.match(/AppleWebKit\/(\d+)\./),CFe=!!l6&&+l6[1],xFe=ir,dre=tn,RFe=zs,IFe=yc,c6=fu,NFe=function(e,t){if(!delete e[t])throw hFe("Cannot delete property "+i6(t)+" of "+i6(e))},u6=ls,aM=cn,AFe=ure,OFe=sx,d6=SFe,kFe=TFe,h6=lf,f6=CFe,Zu=[],p6=dre(Zu.sort),PFe=dre(Zu.push),DFe=aM(function(){Zu.sort(void 0)}),LFe=aM(function(){Zu.sort(null)}),jFe=OFe("sort"),m6=!aM(function(){if(h6)return h6<70;if(!(d6&&d6>3)){if(kFe)return!0;if(f6)return f6<603;var e,t,r,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)Zu.push({k:t+n,v:r})}for(Zu.sort(function(a,o){return o.v-a.v}),n=0;n<Zu.length;n++)t=Zu[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return i!=="DGBEFHACIJK"}});xFe({target:"Array",proto:!0,forced:DFe||!LFe||!jFe||!m6},{sort:function(e){e!==void 0&&RFe(e);var t=IFe(this);if(m6)return e===void 0?p6(t):p6(t,e);var r,n,i=[],a=c6(t);for(n=0;n<a;n++)n in t&&PFe(i,t[n]);for(AFe(i,function(o){return function(s,l){return l===void 0?-1:s===void 0?1:o!==void 0?+o(s,l)||0:u6(s)>u6(l)?1:-1}}(e)),r=c6(i),n=0;n<r;)t[n]=i[n++];for(;n<a;)NFe(t,n++);return t}});var _N,SN,MFe=Ws("Array").sort,UFe=na,FFe=MFe,TN=Array.prototype,VFe=function(e){var t=e.sort;return e===TN||UFe(TN,e)&&t===TN.sort?FFe:t},Bb=$r(VFe),DP={exports:{}};_N=DP,SN=DP.exports,function(e,t){var r="function",n="undefined",i="object",a="string",o="major",s="model",l="name",c="type",u="vendor",h="version",f="architecture",p="console",m="mobile",g="tablet",y="smarttv",v="wearable",b="embedded",E="Amazon",S="Apple",I="ASUS",N="BlackBerry",L="Browser",j="Chrome",z="Firefox",A="Google",V="Huawei",G="LG",X="Microsoft",$="Motorola",B="Opera",K="Samsung",P="Sharp",D="Sony",H="Xiaomi",x="Zebra",w="Facebook",O="Chromium OS",C="Mac OS",q=function(rt){for(var yt={},Oe=0;Oe<rt.length;Oe++)yt[rt[Oe].toUpperCase()]=rt[Oe];return yt},F=function(rt,yt){return typeof rt===a&&J(yt).indexOf(J(rt))!==-1},J=function(rt){return rt.toLowerCase()},se=function(rt,yt){if(typeof rt===a)return rt=rt.replace(/^\s\s*/,""),typeof yt===n?rt:rt.substring(0,350)},he=function(rt,yt){for(var Oe,it,Ge,Ze,Re,Z,Te=0;Te<yt.length&&!Re;){var Fe=yt[Te],He=yt[Te+1];for(Oe=it=0;Oe<Fe.length&&!Re&&Fe[Oe];)if(Re=Fe[Oe++].exec(rt))for(Ge=0;Ge<He.length;Ge++)Z=Re[++it],typeof(Ze=He[Ge])===i&&Ze.length>0?Ze.length===2?typeof Ze[1]==r?this[Ze[0]]=Ze[1].call(this,Z):this[Ze[0]]=Ze[1]:Ze.length===3?typeof Ze[1]!==r||Ze[1].exec&&Ze[1].test?this[Ze[0]]=Z?Z.replace(Ze[1],Ze[2]):t:this[Ze[0]]=Z?Ze[1].call(this,Z,Ze[2]):t:Ze.length===4&&(this[Ze[0]]=Z?Ze[3].call(this,Z.replace(Ze[1],Ze[2])):t):this[Ze]=Z||t;Te+=2}},ge=function(rt,yt){for(var Oe in yt)if(typeof yt[Oe]===i&&yt[Oe].length>0){for(var it=0;it<yt[Oe].length;it++)if(F(yt[Oe][it],rt))return Oe==="?"?t:Oe}else if(F(yt[Oe],rt))return Oe==="?"?t:Oe;return rt},je={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ze={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,h],[/opios[\/ ]+([\w\.]+)/i],[h,[l,B+" Mini"]],[/\bopr\/([\w\.]+)/i],[h,[l,B]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[l,h],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[l,"UC"+L]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[h,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[h,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[l,"IE"]],[/yabrowser\/([\w\.]+)/i],[h,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+L],h],[/\bfocus\/([\w\.]+)/i],[h,[l,z+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[l,B+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[l,B+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[l,"MIUI "+L]],[/fxios\/([-\w\.]+)/i],[h,[l,z]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+L]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+L],h],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,h],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,w],h],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[l,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[l,j+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,j+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[l,"Android "+L]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[h,ge,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[l,z+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,h],[/(cobalt)\/([\w\.]+)/i],[l,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,J]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",J]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,J]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[s,[u,K],[c,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[s,[u,K],[c,m]],[/\((ip(?:hone|od)[\w ]*);/i],[s,[u,S],[c,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[s,[u,S],[c,g]],[/(macintosh);/i],[s,[u,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[s,[u,P],[c,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[s,[u,V],[c,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[s,[u,V],[c,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[s,/_/g," "],[u,H],[c,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[s,/_/g," "],[u,H],[c,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[s,[u,"OPPO"],[c,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[s,[u,"Vivo"],[c,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[s,[u,"Realme"],[c,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[s,[u,$],[c,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[s,[u,$],[c,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[s,[u,G],[c,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[s,[u,G],[c,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[s,[u,"Lenovo"],[c,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[s,/_/g," "],[u,"Nokia"],[c,m]],[/(pixel c)\b/i],[s,[u,A],[c,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[s,[u,A],[c,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[u,D],[c,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[s,"Xperia Tablet"],[u,D],[c,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[s,[u,"OnePlus"],[c,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[s,[u,E],[c,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[s,/(.+)/g,"Fire Phone $1"],[u,E],[c,m]],[/(playbook);[-\w\),; ]+(rim)/i],[s,u,[c,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[s,[u,N],[c,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[s,[u,I],[c,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[s,[u,I],[c,m]],[/(nexus 9)/i],[s,[u,"HTC"],[c,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[s,/_/g," "],[c,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[s,[u,"Acer"],[c,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[s,[u,"Meizu"],[c,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,s,[c,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,s,[c,g]],[/(surface duo)/i],[s,[u,X],[c,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[s,[u,"Fairphone"],[c,m]],[/(u304aa)/i],[s,[u,"AT&T"],[c,m]],[/\bsie-(\w*)/i],[s,[u,"Siemens"],[c,m]],[/\b(rct\w+) b/i],[s,[u,"RCA"],[c,g]],[/\b(venue[\d ]{2,7}) b/i],[s,[u,"Dell"],[c,g]],[/\b(q(?:mv|ta)\w+) b/i],[s,[u,"Verizon"],[c,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[s,[u,"Barnes & Noble"],[c,g]],[/\b(tm\d{3}\w+) b/i],[s,[u,"NuVision"],[c,g]],[/\b(k88) b/i],[s,[u,"ZTE"],[c,g]],[/\b(nx\d{3}j) b/i],[s,[u,"ZTE"],[c,m]],[/\b(gen\d{3}) b.+49h/i],[s,[u,"Swiss"],[c,m]],[/\b(zur\d{3}) b/i],[s,[u,"Swiss"],[c,g]],[/\b((zeki)?tb.*\b) b/i],[s,[u,"Zeki"],[c,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],s,[c,g]],[/\b(ns-?\w{0,9}) b/i],[s,[u,"Insignia"],[c,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[s,[u,"NextBook"],[c,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],s,[c,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],s,[c,m]],[/\b(ph-1) /i],[s,[u,"Essential"],[c,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[s,[u,"Envizen"],[c,g]],[/\b(trio[-\w\. ]+) b/i],[s,[u,"MachSpeed"],[c,g]],[/\btu_(1491) b/i],[s,[u,"Rotor"],[c,g]],[/(shield[\w ]+) b/i],[s,[u,"Nvidia"],[c,g]],[/(sprint) (\w+)/i],[u,s,[c,m]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[u,X],[c,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[s,[u,x],[c,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[s,[u,x],[c,m]],[/smart-tv.+(samsung)/i],[u,[c,y]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[u,K],[c,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,G],[c,y]],[/(apple) ?tv/i],[u,[s,S+" TV"],[c,y]],[/crkey/i],[[s,j+"cast"],[u,A],[c,y]],[/droid.+aft(\w)( bui|\))/i],[s,[u,E],[c,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[s,[u,P],[c,y]],[/(bravia[\w ]+)( bui|\))/i],[s,[u,D],[c,y]],[/(mitv-\w{5}) bui/i],[s,[u,H],[c,y]],[/Hbbtv.*(technisat) (.*);/i],[u,s,[c,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,se],[s,se],[c,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[c,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,s,[c,p]],[/droid.+; (shield) bui/i],[s,[u,"Nvidia"],[c,p]],[/(playstation [345portablevi]+)/i],[s,[u,D],[c,p]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[s,[u,X],[c,p]],[/((pebble))app/i],[u,s,[c,v]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[s,[u,S],[c,v]],[/droid.+; (glass) \d/i],[s,[u,A],[c,v]],[/droid.+; (wt63?0{2,3})\)/i],[s,[u,x],[c,v]],[/(quest( 2| pro)?)/i],[s,[u,w],[c,v]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[c,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[s,[c,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[s,[c,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[c,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[c,m]],[/(android[-\w\. ]{0,9});.+buil/i],[s,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[l,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,h],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[h,ge,je]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[h,ge,je]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,C],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,h],[/\(bb(10);/i],[h,[l,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[l,z+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[h,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[h,[l,j+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,O],h],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,h],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[l,h]]},Me=function(rt,yt){if(typeof rt===i&&(yt=rt,rt=t),!(this instanceof Me))return new Me(rt,yt).getResult();var Oe=typeof e!==n&&e.navigator?e.navigator:t,it=rt||(Oe&&Oe.userAgent?Oe.userAgent:""),Ge=Oe&&Oe.userAgentData?Oe.userAgentData:t,Ze=yt?function(Re,Z){var Te={};for(var Fe in Re)Z[Fe]&&Z[Fe].length%2==0?Te[Fe]=Z[Fe].concat(Re[Fe]):Te[Fe]=Re[Fe];return Te}(ze,yt):ze;return this.getBrowser=function(){var Re={};return Re[l]=t,Re[h]=t,he.call(Re,it,Ze.browser),Re[o]=function(Z){return typeof Z===a?Z.replace(/[^\d\.]/g,"").split(".")[0]:t}(Re[h]),Oe&&Oe.brave&&typeof Oe.brave.isBrave==r&&(Re[l]="Brave"),Re},this.getCPU=function(){var Re={};return Re[f]=t,he.call(Re,it,Ze.cpu),Re},this.getDevice=function(){var Re={};return Re[u]=t,Re[s]=t,Re[c]=t,he.call(Re,it,Ze.device),!Re[c]&&Ge&&Ge.mobile&&(Re[c]=m),Re[s]=="Macintosh"&&Oe&&typeof Oe.standalone!==n&&Oe.maxTouchPoints&&Oe.maxTouchPoints>2&&(Re[s]="iPad",Re[c]=g),Re},this.getEngine=function(){var Re={};return Re[l]=t,Re[h]=t,he.call(Re,it,Ze.engine),Re},this.getOS=function(){var Re={};return Re[l]=t,Re[h]=t,he.call(Re,it,Ze.os),!Re[l]&&Ge&&Ge.platform!="Unknown"&&(Re[l]=Ge.platform.replace(/chrome os/i,O).replace(/macos/i,C)),Re},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return it},this.setUA=function(Re){return it=typeof Re===a&&Re.length>350?se(Re,350):Re,this},this.setUA(it),this};Me.VERSION="0.7.34",Me.BROWSER=q([l,h,o]),Me.CPU=q([f]),Me.DEVICE=q([s,u,c,p,m,y,g,v,b]),Me.ENGINE=Me.OS=q([l,h]),_N.exports&&(SN=_N.exports=Me),SN.UAParser=Me;var tt=typeof e!==n&&(e.jQuery||e.Zepto);if(tt&&!tt.ua){var Tt=new Me;tt.ua=Tt.getResult(),tt.ua.get=function(){return Tt.getUA()},tt.ua.set=function(rt){Tt.setUA(rt);var yt=Tt.getResult();for(var Oe in yt)tt.ua[Oe]=yt[Oe]}}}(typeof window=="object"?window:fm);var BFe=$r(DP.exports),$Fe=vc,HFe=vi,zFe=Ag,GFe=kf,WFe=Jr("iterator"),KFe=Object,qFe=function(e){if(zFe(e))return!1;var t=KFe(e);return t[WFe]!==void 0||"@@iterator"in t||HFe(GFe,$Fe(t))},YFe=$r(qFe),CN=si;ir({global:!0,forced:CN.globalThis!==CN},{globalThis:CN});var g6=$r(si);function hre(e,t){return function(){return e.apply(t,arguments)}}var{toString:XFe}=Object.prototype,{getPrototypeOf:oM}=Object,uT=(xN=Object.create(null),e=>{let t=XFe.call(e);return xN[t]||(xN[t]=t.slice(8,-1).toLowerCase())}),xN,wc=e=>(e=e.toLowerCase(),t=>uT(t)===e),vx=e=>t=>typeof t===e,{isArray:wp}=Array,Hy=vx("undefined"),y6=wc("ArrayBuffer"),JFe=vx("string"),fs=vx("function"),v6=vx("number"),Zw=e=>e!==null&&typeof e=="object",eE=e=>{if(uT(e)!=="object")return!1;let t=oM(e);return!(t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.toStringTag in e||YFe(e))},QFe=wc("Date"),ZFe=wc("File"),eVe=wc("Blob"),tVe=wc("FileList"),rVe=wc("URLSearchParams");function zy(e,t){let r,n,{allOwnKeys:i=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e!=null)if(typeof e!="object"&&(e=[e]),wp(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{let a=i?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length,s;for(r=0;r<o;r++)s=a[r],t.call(null,e[s],s,e)}}function b6(e,t){t=t.toLowerCase();let r=Object.keys(e),n,i=r.length;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}var fre=g6!==void 0?g6:typeof self<"u"?self:typeof window<"u"?window:global,w6=e=>!Hy(e)&&e!==fre,nVe=(RN=typeof Uint8Array<"u"&&oM(Uint8Array),e=>RN&&e instanceof RN),RN,iVe=wc("HTMLFormElement"),E6=(e=>{let{hasOwnProperty:t}=e;return(r,n)=>t.call(r,n)})(Object.prototype),aVe=wc("RegExp"),_6=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};zy(r,(i,a)=>{let o;(o=t(i,a,e))!==!1&&(n[a]=o||i)}),Object.defineProperties(e,n)},IN="abcdefghijklmnopqrstuvwxyz",S6="0123456789",T6={DIGIT:S6,ALPHA:IN,ALPHA_DIGIT:IN+IN.toUpperCase()+S6},oVe=wc("AsyncFunction"),Ee={isArray:wp,isArrayBuffer:y6,isBuffer:function(e){return e!==null&&!Hy(e)&&e.constructor!==null&&!Hy(e.constructor)&&fs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||fs(e.append)&&((t=uT(e))==="formdata"||t==="object"&&fs(e.toString)&&e.toString()==="[object FormData]"))},isArrayBufferView:function(e){let t;return t=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&y6(e.buffer),t},isString:JFe,isNumber:v6,isBoolean:e=>e===!0||e===!1,isObject:Zw,isPlainObject:eE,isUndefined:Hy,isDate:QFe,isFile:ZFe,isBlob:eVe,isRegExp:aVe,isFunction:fs,isStream:e=>Zw(e)&&fs(e.pipe),isURLSearchParams:rVe,isTypedArray:nVe,isFileList:tVe,forEach:zy,merge:function e(){let{caseless:t}=w6(this)&&this||{},r={},n=(i,a)=>{let o=t&&b6(r,a)||a;eE(r[o])&&eE(i)?r[o]=e(r[o],i):eE(i)?r[o]=e({},i):wp(i)?r[o]=i.slice():r[o]=i};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&zy(arguments[i],n);return r},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return zy(t,(i,a)=>{r&&fs(i)?e[a]=hre(i,r):e[a]=i},{allOwnKeys:n}),e},trim:e=>Ui(e)?Ui(e).call(e):e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,a,o,s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],n&&!n(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=r!==!1&&oM(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:uT,kindOfTest:wc,endsWith:(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return n!==-1&&n===r},toArray:e=>{if(!e)return null;if(wp(e))return e;let t=e.length;if(!v6(t))return null;let r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{let r=(e&&e[Symbol.iterator]).call(e),n;for(;(n=r.next())&&!n.done;){let i=n.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let r,n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},isHTMLForm:iVe,hasOwnProperty:E6,hasOwnProp:E6,reduceDescriptors:_6,freezeMethods:e=>{_6(e,(t,r)=>{if(fs(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=e[r];fs(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{let r={},n=i=>{i.forEach(a=>{r[a]=!0})};return wp(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,n){return r.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:b6,global:fre,isContextDefined:w6,ALPHABET:T6,generateString:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T6.ALPHA_DIGIT,r="",{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r},isSpecCompliantForm:function(e){return!!(e&&fs(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])},toJSONObject:e=>{let t=new Array(10),r=(n,i)=>{if(Zw(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;let a=wp(n)?[]:{};return zy(n,(o,s)=>{let l=r(o,i+1);!Hy(l)&&(a[s]=l)}),t[i]=void 0,a}}return n};return r(e,0)},isAsyncFn:oVe,isThenable:e=>e&&(Zw(e)||fs(e))&&fs(e.then)&&fs(e.catch)};function yr(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}Ee.inherits(yr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ee.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var C6=yr.prototype,x6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{x6[e]={value:e}}),Object.defineProperties(yr,x6),Object.defineProperty(C6,"isAxiosError",{value:!0}),yr.from=(e,t,r,n,i,a)=>{let o=Object.create(C6);return Ee.toFlatObject(e,o,function(s){return s!==Error.prototype},s=>s!=="isAxiosError"),yr.call(o,e.message,t,r,n,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};function NN(e){return Ee.isPlainObject(e)||Ee.isArray(e)}function pre(e){return Ee.endsWith(e,"[]")?e.slice(0,-2):e}function R6(e,t,r){return e?e.concat(t).map(function(n,i){return n=pre(n),!r&&i?"["+n+"]":n}).join(r?".":""):t}var sVe=Ee.toFlatObject(Ee,{},null,function(e){return/^is[A-Z]/.test(e)});function dT(e,t,r){if(!Ee.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;let n=(r=Ee.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,p){return!Ee.isUndefined(p[f])})).metaTokens,i=r.visitor||c,a=r.dots,o=r.indexes,s=(r.Blob||typeof Blob<"u"&&Blob)&&Ee.isSpecCompliantForm(t);if(!Ee.isFunction(i))throw new TypeError("visitor must be a function");function l(f){if(f===null)return"";if(Ee.isDate(f))return f.toISOString();if(!s&&Ee.isBlob(f))throw new yr("Blob is not supported. Use a Buffer instead.");return Ee.isArrayBuffer(f)||Ee.isTypedArray(f)?s&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function c(f,p,m){let g=f;if(f&&!m&&typeof f=="object"){if(Ee.endsWith(p,"{}"))p=n?p:p.slice(0,-2),f=JSON.stringify(f);else if(Ee.isArray(f)&&function(y){return Ee.isArray(y)&&!y.some(NN)}(f)||(Ee.isFileList(f)||Ee.endsWith(p,"[]"))&&(g=Ee.toArray(f)))return p=pre(p),g.forEach(function(y,v){!Ee.isUndefined(y)&&y!==null&&t.append(o===!0?R6([p],v,a):o===null?p:p+"[]",l(y))}),!1}return!!NN(f)||(t.append(R6(m,p,a),l(f)),!1)}let u=[],h=Object.assign(sVe,{defaultVisitor:c,convertValue:l,isVisitable:NN});if(!Ee.isObject(e))throw new TypeError("data must be an object");return function f(p,m){if(!Ee.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));u.push(p),Ee.forEach(p,function(g,y){(!(Ee.isUndefined(g)||g===null)&&i.call(t,g,Ee.isString(y)?Ui(y).call(y):y,m,h))===!0&&f(g,m?m.concat(y):[y])}),u.pop()}}(e),t}function I6(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function sM(e,t){this._pairs=[],e&&dT(e,this,t)}var N6=sM.prototype;function lVe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mre(e,t,r){if(!t)return e;let n=r&&r.encode||lVe,i=r&&r.serialize,a;if(a=i?i(t,r):Ee.isURLSearchParams(t)?t.toString():new sM(t,r).toString(n),a){let o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}N6.append=function(e,t){this._pairs.push([e,t])},N6.toString=function(e){let t=e?function(r){return e.call(this,r,I6)}:I6;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};var A6=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ee.forEach(this.handlers,function(t){t!==null&&e(t)})}},gre={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},yre={exports:{}},cVe=ir,uVe=ss,O6=Gs.f;cVe({target:"Object",stat:!0,forced:Object.defineProperty!==O6,sham:!uVe},{defineProperty:O6});var vre=Tl.Object,dVe=yre.exports=function(e,t,r){return vre.defineProperty(e,t,r)};vre.defineProperty.sham&&(dVe.sham=!0);var bre=$r(yre.exports),hVe=gc,$b=Array.isArray||function(e){return hVe(e)=="Array"},fVe=TypeError,k6=$b,pVe=px,mVe=So,gVe=Jr("species"),P6=Array,yVe=function(e){var t;return k6(e)&&(t=e.constructor,(pVe(t)&&(t===P6||k6(t.prototype))||mVe(t)&&(t=t[gVe])===null)&&(t=void 0)),t===void 0?P6:t},wre=function(e,t){return new(yVe(e))(t===0?0:t)},vVe=cn,bVe=lf,wVe=Jr("species"),Ere=function(e){return bVe>=51||!vVe(function(){var t=[];return(t.constructor={})[wVe]=function(){return{foo:1}},t[e](Boolean).foo!==1})},EVe=ir,_Ve=cn,SVe=$b,TVe=So,CVe=yc,xVe=fu,D6=function(e){if(e>9007199254740991)throw fVe("Maximum allowed index exceeded");return e},L6=yx,RVe=wre,IVe=Ere,NVe=lf,_re=Jr("isConcatSpreadable"),AVe=NVe>=51||!_Ve(function(){var e=[];return e[_re]=!1,e.concat()[0]!==e}),OVe=function(e){if(!TVe(e))return!1;var t=e[_re];return t!==void 0?!!t:SVe(e)};EVe({target:"Array",proto:!0,arity:1,forced:!AVe||!IVe("concat")},{concat:function(e){var t,r,n,i,a,o=CVe(this),s=RVe(o,0),l=0;for(t=-1,n=arguments.length;t<n;t++)if(OVe(a=t===-1?o:arguments[t]))for(i=xVe(a),D6(l+i),r=0;r<i;r++,l++)r in a&&L6(s,l,a[r]);else D6(l+1),L6(s,l++,a);return s.length=l,s}});var Sre={},kVe=gc,PVe=Bd,j6=cx.f,DVe=iM,M6=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Sre.f=function(e){return M6&&kVe(e)=="Window"?function(t){try{return j6(t)}catch{return DVe(M6)}}(e):j6(PVe(e))};var jg={},LVe=Jr;jg.f=LVe;var U6=Tl,jVe=vi,MVe=jg,UVe=Gs.f,ei=function(e){var t=U6.Symbol||(U6.Symbol={});jVe(t,e)||UVe(t,e,{value:MVe.f(e)})},FVe=ci,VVe=Wa,BVe=Jr,$Ve=zd,Tre=function(){var e=VVe("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=BVe("toPrimitive");t&&!t[n]&&$Ve(t,n,function(i){return FVe(r,this)},{arity:1})},HVe=$d,zVe=ix,GVe=yc,WVe=fu,KVe=wre,F6=tn([].push),Cu=function(e){var t=e==1,r=e==2,n=e==3,i=e==4,a=e==6,o=e==7,s=e==5||a;return function(l,c,u,h){for(var f,p,m=GVe(l),g=zVe(m),y=HVe(c,u),v=WVe(g),b=0,E=h||KVe,S=t?E(l,v):r||o?E(l,0):void 0;v>b;b++)if((s||b in g)&&(p=y(f=g[b],b,m),e))if(t)S[b]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return b;case 2:F6(S,f)}else switch(e){case 4:return!1;case 7:F6(S,f)}return a?-1:n||i?i:S}},Cre={forEach:Cu(0),map:Cu(1),filter:Cu(2),some:Cu(3),every:Cu(4),find:Cu(5),findIndex:Cu(6),filterReject:Cu(7)},tE=ir,lM=si,cM=ci,qVe=tn,gm=ss,tp=kg,YVe=cn,Ji=vi,XVe=na,LP=ka,bx=Bd,uM=ox,JVe=ls,jP=Vd,xv=Mb,xre=dx,QVe=cx,Rre=Sre,ZVe=jb,Ire=kb,Nre=Gs,eBe=Gj,Are=nx,V6=zd,tBe=fx,dM=Dg,Ore=ux,B6=jj,rBe=Jr,nBe=jg,iBe=ei,aBe=Tre,oBe=Gd,kre=Pf,wx=Cre.forEach,no=lx("hidden"),hT="Symbol",Rv="prototype",sBe=kre.set,$6=kre.getterFor(hT),pl=Object[Rv],Gp=lM.Symbol,E_=Gp&&Gp[Rv],lBe=lM.TypeError,AN=lM.QObject,Pre=Ire.f,gh=Nre.f,Dre=Rre.f,cBe=Are.f,Lre=qVe([].push),lu=dM("symbols"),Hb=dM("op-symbols"),uBe=dM("wks"),ON=!AN||!AN[Rv]||!AN[Rv].findChild,MP=gm&&YVe(function(){return xv(gh({},"a",{get:function(){return gh(this,"a",{value:7}).a}})).a!=7})?function(e,t,r){var n=Pre(pl,t);n&&delete pl[t],gh(e,t,r),n&&e!==pl&&gh(pl,t,n)}:gh,kN=function(e,t){var r=lu[e]=xv(E_);return sBe(r,{type:hT,tag:e,description:t}),gm||(r.description=t),r},fT=function(e,t,r){e===pl&&fT(Hb,t,r),LP(e);var n=uM(t);return LP(r),Ji(lu,n)?(r.enumerable?(Ji(e,no)&&e[no][n]&&(e[no][n]=!1),r=xv(r,{enumerable:jP(0,!1)})):(Ji(e,no)||gh(e,no,jP(1,{})),e[no][n]=!0),MP(e,n,r)):gh(e,n,r)},PN=function(e,t){LP(e);var r=bx(t),n=xre(r).concat(Mre(r));return wx(n,function(i){gm&&!cM(jre,r,i)||fT(e,i,r[i])}),e},jre=function(e){var t=uM(e),r=cM(cBe,this,t);return!(this===pl&&Ji(lu,t)&&!Ji(Hb,t))&&(!(r||!Ji(this,t)||!Ji(lu,t)||Ji(this,no)&&this[no][t])||r)},H6=function(e,t){var r=bx(e),n=uM(t);if(r!==pl||!Ji(lu,n)||Ji(Hb,n)){var i=Pre(r,n);return!i||!Ji(lu,n)||Ji(r,no)&&r[no][n]||(i.enumerable=!0),i}},z6=function(e){var t=Dre(bx(e)),r=[];return wx(t,function(n){Ji(lu,n)||Ji(Ore,n)||Lre(r,n)}),r},Mre=function(e){var t=e===pl,r=Dre(t?Hb:bx(e)),n=[];return wx(r,function(i){!Ji(lu,i)||t&&!Ji(pl,i)||Lre(n,lu[i])}),n};tp||(V6(E_=(Gp=function(){if(XVe(E_,this))throw lBe("Symbol is not a constructor");var e=arguments.length&&arguments[0]!==void 0?JVe(arguments[0]):void 0,t=B6(e),r=function(n){this===pl&&cM(r,Hb,n),Ji(this,no)&&Ji(this[no],t)&&(this[no][t]=!1),MP(this,t,jP(1,n))};return gm&&ON&&MP(pl,t,{configurable:!0,set:r}),kN(t,e)})[Rv],"toString",function(){return $6(this).tag}),V6(Gp,"withoutSetter",function(e){return kN(B6(e),e)}),Are.f=jre,Nre.f=fT,eBe.f=PN,Ire.f=H6,QVe.f=Rre.f=z6,ZVe.f=Mre,nBe.f=function(e){return kN(rBe(e),e)},gm&&tBe(E_,"description",{configurable:!0,get:function(){return $6(this).description}})),tE({global:!0,constructor:!0,wrap:!0,forced:!tp,sham:!tp},{Symbol:Gp}),wx(xre(uBe),function(e){iBe(e)}),tE({target:hT,stat:!0,forced:!tp},{useSetter:function(){ON=!0},useSimple:function(){ON=!1}}),tE({target:"Object",stat:!0,forced:!tp,sham:!gm},{create:function(e,t){return t===void 0?xv(e):PN(xv(e),t)},defineProperty:fT,defineProperties:PN,getOwnPropertyDescriptor:H6}),tE({target:"Object",stat:!0,forced:!tp},{getOwnPropertyNames:z6}),aBe(),oBe(Gp,hT),Ore[no]=!0;var Ure=kg&&!!Symbol.for&&!!Symbol.keyFor,dBe=ir,hBe=Wa,fBe=vi,pBe=ls,Fre=Dg,mBe=Ure,DN=Fre("string-to-symbol-registry"),gBe=Fre("symbol-to-string-registry");dBe({target:"Symbol",stat:!0,forced:!mBe},{for:function(e){var t=pBe(e);if(fBe(DN,t))return DN[t];var r=hBe("Symbol")(t);return DN[t]=r,gBe[r]=t,r}});var yBe=ir,vBe=vi,bBe=Pb,wBe=Pg,EBe=Ure,G6=Dg("symbol-to-string-registry");yBe({target:"Symbol",stat:!0,forced:!EBe},{keyFor:function(e){if(!bBe(e))throw TypeError(wBe(e)+" is not a symbol");if(vBe(G6,e))return G6[e]}});var W6=$b,_Be=li,K6=gc,SBe=ls,q6=tn([].push),TBe=ir,Vre=Wa,Bre=Dj,CBe=ci,zb=tn,$re=cn,Y6=li,X6=Pb,Hre=Qj,xBe=function(e){if(_Be(e))return e;if(W6(e)){for(var t=e.length,r=[],n=0;n<t;n++){var i=e[n];typeof i=="string"?q6(r,i):typeof i!="number"&&K6(i)!="Number"&&K6(i)!="String"||q6(r,SBe(i))}var a=r.length,o=!0;return function(s,l){if(o)return o=!1,l;if(W6(this))return l;for(var c=0;c<a;c++)if(r[c]===s)return l}}},RBe=kg,IBe=String,md=Vre("JSON","stringify"),rE=zb(/./.exec),J6=zb("".charAt),NBe=zb("".charCodeAt),ABe=zb("".replace),OBe=zb(1 .toString),kBe=/[\uD800-\uDFFF]/g,Q6=/^[\uD800-\uDBFF]$/,Z6=/^[\uDC00-\uDFFF]$/,e$=!RBe||$re(function(){var e=Vre("Symbol")();return md([e])!="[null]"||md({a:e})!="{}"||md(Object(e))!="{}"}),t$=$re(function(){return md("\uDF06\uD834")!=='"\\udf06\\ud834"'||md("\uDEAD")!=='"\\udead"'}),PBe=function(e,t){var r=Hre(arguments),n=xBe(t);if(Y6(n)||e!==void 0&&!X6(e))return r[1]=function(i,a){if(Y6(n)&&(a=CBe(n,this,IBe(i),a)),!X6(a))return a},Bre(md,null,r)},DBe=function(e,t,r){var n=J6(r,t-1),i=J6(r,t+1);return rE(Q6,e)&&!rE(Z6,i)||rE(Z6,e)&&!rE(Q6,n)?"\\u"+OBe(NBe(e,0),16):e};md&&TBe({target:"JSON",stat:!0,arity:3,forced:e$||t$},{stringify:function(e,t,r){var n=Hre(arguments),i=Bre(e$?PBe:md,null,n);return t$&&typeof i=="string"?ABe(i,kBe,DBe):i}});var r$=jb,LBe=yc;ir({target:"Object",stat:!0,forced:!kg||cn(function(){r$.f(1)})},{getOwnPropertySymbols:function(e){var t=r$.f;return t?t(LBe(e)):[]}}),ei("asyncIterator"),ei("hasInstance"),ei("isConcatSpreadable"),ei("iterator"),ei("match"),ei("matchAll"),ei("replace"),ei("search"),ei("species"),ei("split");var jBe=Tre;ei("toPrimitive"),jBe();var MBe=Wa,UBe=Gd;ei("toStringTag"),UBe(MBe("Symbol"),"Symbol"),ei("unscopables"),Gd(si.JSON,"JSON",!0);var FBe=Tl.Symbol,VBe=Jr,BBe=Gs.f,n$=VBe("metadata"),i$=Function.prototype;i$[n$]===void 0&&BBe(i$,n$,{value:null}),ei("dispose"),ei("metadata");var $Be=FBe;ei("asyncDispose");var HBe=tn,hM=Wa("Symbol"),zBe=hM.keyFor,GBe=HBe(hM.prototype.valueOf),zre=hM.isRegisteredSymbol||function(e){try{return zBe(GBe(e))!==void 0}catch{return!1}};ir({target:"Symbol",stat:!0},{isRegisteredSymbol:zre});for(a$=Dg,jN=Wa,o$=tn,s$=Pb,l$=Jr,by=jN("Symbol"),UP=by.isWellKnownSymbol,FP=jN("Object","getOwnPropertyNames"),Gre=o$(by.prototype.valueOf),VP=a$("wks"),nE=0,MN=FP(by),c$=MN.length;nE<c$;nE++)try{LN=MN[nE],s$(by[LN])&&l$(LN)}catch{}var LN,a$,jN,o$,s$,l$,by,UP,FP,Gre,VP,nE,MN,c$,u$=function(e){if(UP&&UP(e))return!0;try{for(var t=Gre(e),r=0,n=FP(VP),i=n.length;r<i;r++)if(VP[n[r]]==t)return!0}catch{}return!1};ir({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:u$}),ei("matcher"),ei("observable"),ir({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:zre}),ir({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:u$}),ei("metadataKey"),ei("patternMatch"),ei("replaceAll");var Wp=$r($Be),Wre=$r(jg.f("iterator"));function R0(e){return R0=typeof Wp=="function"&&typeof Wre=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Wp=="function"&&t.constructor===Wp&&t!==Wp.prototype?"symbol":typeof t},R0(e)}var WBe=$r(jg.f("toPrimitive"));function KBe(e){var t=function(r,n){if(R0(r)!=="object"||r===null)return r;var i=r[WBe];if(i!==void 0){var a=i.call(r,n||"default");if(R0(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return R0(t)==="symbol"?t:String(t)}function R(e,t,r){return(t=KBe(t))in e?bre(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qBe=cn,YBe=Jr("iterator"),fM=!qBe(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2"),n="";return e.pathname="c%20d",t.forEach(function(i,a){t.delete("b"),n+=a+i}),r.delete("a",2),!e.toJSON||!r.has("a",1)||r.has("a",2)||!t.size&&!0||!t.sort||e.href!=="http://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[YBe]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||n!=="a1c3"||new URL("http://x",void 0).host!=="x"}),XBe=zd,UN=ir,Wm=si,iE=ci,uc=tn,Kp=ss,d$=fM,h$=zd,JBe=fx,QBe=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:XBe(e,n,t[n],r);return e},ZBe=Gd,e6e=Kj,pM=Pf,Kre=Yj,FN=li,t6e=vi,r6e=$d,n6e=vc,i6e=ka,qre=So,Ua=ls,a6e=Mb,f$=Vd,BP=Wj,o6e=hx,rp=mx,s6e=ure,l6e=Jr("iterator"),Iv="URLSearchParams",Yre=Iv+"Iterator",Xre=pM.set,Ss=pM.getterFor(Iv),c6e=pM.getterFor(Yre),u6e=Object.getOwnPropertyDescriptor,mM=function(e){if(!Kp)return Wm[e];var t=u6e(Wm,e);return t&&t.value},p$=mM("fetch"),pT=mM("Request"),I0=mM("Headers"),VN=pT&&pT.prototype,m$=I0&&I0.prototype,d6e=Wm.RegExp,h6e=Wm.TypeError,Jre=Wm.decodeURIComponent,f6e=Wm.encodeURIComponent,p6e=uc("".charAt),g$=uc([].join),Ch=uc([].push),$P=uc("".replace),m6e=uc([].shift),y$=uc([].splice),v$=uc("".split),g6e=uc("".slice),y6e=/\+/g,b$=Array(4),v6e=function(e){return b$[e-1]||(b$[e-1]=d6e("((?:%[\\da-f]{2}){"+e+"})","gi"))},b6e=function(e){try{return Jre(e)}catch{return e}},w$=function(e){var t=$P(e,y6e," "),r=4;try{return Jre(t)}catch{for(;r;)t=$P(t,v6e(r--),b6e);return t}},w6e=/[!'()~]|%20/g,E6e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},_6e=function(e){return E6e[e]},E$=function(e){return $P(f6e(e),w6e,_6e)},BN=e6e(function(e,t){Xre(this,{type:Yre,iterator:BP(Ss(e).entries),kind:t})},"Iterator",function(){var e=c6e(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value=t==="keys"?n.key:t==="values"?n.value:[n.key,n.value]),r},!0),Qre=function(e){this.entries=[],this.url=null,e!==void 0&&(qre(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?p6e(e,0)==="?"?g6e(e,1):e:Ua(e)))};Qre.prototype={type:Iv,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,i,a,o,s,l=o6e(e);if(l)for(r=(t=BP(e,l)).next;!(n=iE(r,t)).done;){if(a=(i=BP(i6e(n.value))).next,(o=iE(a,i)).done||(s=iE(a,i)).done||!iE(a,i).done)throw h6e("Expected sequence with length 2");Ch(this.entries,{key:Ua(o.value),value:Ua(s.value)})}else for(var c in e)t6e(e,c)&&Ch(this.entries,{key:c,value:Ua(e[c])})},parseQuery:function(e){if(e)for(var t,r,n=v$(e,"&"),i=0;i<n.length;)(t=n[i++]).length&&(r=v$(t,"="),Ch(this.entries,{key:w$(m6e(r)),value:w$(g$(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],Ch(r,E$(e.key)+"="+E$(e.value));return g$(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var mT=function(){Kre(this,Ep);var e=Xre(this,new Qre(arguments.length>0?arguments[0]:void 0));Kp||(this.size=e.entries.length)},Ep=mT.prototype;QBe(Ep,{append:function(e,t){var r=Ss(this);rp(arguments.length,2),Ch(r.entries,{key:Ua(e),value:Ua(t)}),Kp||this.length++,r.updateURL()},delete:function(e){for(var t=Ss(this),r=rp(arguments.length,1),n=t.entries,i=Ua(e),a=r<2?void 0:arguments[1],o=a===void 0?a:Ua(a),s=0;s<n.length;){var l=n[s];if(l.key!==i||o!==void 0&&l.value!==o)s++;else if(y$(n,s,1),o!==void 0)break}Kp||(this.size=n.length),t.updateURL()},get:function(e){var t=Ss(this).entries;rp(arguments.length,1);for(var r=Ua(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){var t=Ss(this).entries;rp(arguments.length,1);for(var r=Ua(e),n=[],i=0;i<t.length;i++)t[i].key===r&&Ch(n,t[i].value);return n},has:function(e){for(var t=Ss(this).entries,r=rp(arguments.length,1),n=Ua(e),i=r<2?void 0:arguments[1],a=i===void 0?i:Ua(i),o=0;o<t.length;){var s=t[o++];if(s.key===n&&(a===void 0||s.value===a))return!0}return!1},set:function(e,t){var r=Ss(this);rp(arguments.length,1);for(var n,i=r.entries,a=!1,o=Ua(e),s=Ua(t),l=0;l<i.length;l++)(n=i[l]).key===o&&(a?y$(i,l--,1):(a=!0,n.value=s));a||Ch(i,{key:o,value:s}),Kp||(this.size=i.length),r.updateURL()},sort:function(){var e=Ss(this);s6e(e.entries,function(t,r){return t.key>r.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,r=Ss(this).entries,n=r6e(e,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new BN(this,"keys")},values:function(){return new BN(this,"values")},entries:function(){return new BN(this,"entries")}},{enumerable:!0}),h$(Ep,l6e,Ep.entries,{name:"entries"}),h$(Ep,"toString",function(){return Ss(this).serialize()},{enumerable:!0}),Kp&&JBe(Ep,"size",{get:function(){return Ss(this).entries.length},configurable:!0,enumerable:!0}),ZBe(mT,Iv),UN({global:!0,constructor:!0,forced:!d$},{URLSearchParams:mT}),!d$&&FN(I0)&&(_$=uc(m$.has),S$=uc(m$.set),$N=function(e){if(qre(e)){var t,r=e.body;if(n6e(r)===Iv)return t=e.headers?new I0(e.headers):new I0,_$(t,"content-type")||S$(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),a6e(e,{body:f$(0,Ua(r)),headers:f$(0,t)})}return e},FN(p$)&&UN({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return p$(e,arguments.length>1?$N(arguments[1]):{})}}),FN(pT)&&(aE=function(e){return Kre(this,VN),new pT(e,arguments.length>1?$N(arguments[1]):{})},VN.constructor=aE,aE.prototype=VN,UN({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:aE})));var _$,S$,$N,aE,S6e={URLSearchParams:mT,getState:Ss},T$=$r(Tl.URLSearchParams),T6e={isBrowser:!0,classes:{URLSearchParams:T$!==void 0?T$:sM,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Zre=typeof window<"u"&&typeof document<"u",C6e=(C$=typeof navigator<"u"&&navigator.product,Zre&&["ReactNative","NativeScript","NS"].indexOf(C$)<0),C$,x6e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function";function x$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function R$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x$(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Jl=R$(R$({},Object.freeze({__proto__:null,hasBrowserEnv:Zre,hasStandardBrowserEnv:C6e,hasStandardBrowserWebWorkerEnv:x6e})),T6e),R6e=ka,I6e=ci,N6e=vi,A6e=na,O6e=function(){var e=R6e(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},I$=RegExp.prototype,ene=function(e){var t=e.flags;return t!==void 0||"flags"in I$||N6e(e,"flags")||!A6e(I$,e)?t:I6e(O6e,e)},k6e=nM.charAt,N$=ci,P6e=ka,D6e=li,L6e=gc,j6e=/./.exec,M6e=TypeError,U6e=ir,A$=ci,tne=Tv,F6e=Kj,oE=qj,O$=Og,rne=Pee,Nv=ls,V6e=ka,B6e=Ag,$6e=gc,H6e=Dee,nne=ene,z6e=ax,G6e=cn,W6e=Jj,K6e=function(e,t,r){return t+(r?k6e(e,t).length:1)},q6e=function(e,t){var r=e.exec;if(D6e(r)){var n=N$(r,e,t);return n!==null&&P6e(n),n}if(L6e(e)==="RegExp")return N$(j6e,e,t);throw M6e("RegExp#exec called on incompatible receiver")},ine=Pf,Y6e=Jr("matchAll"),ane="RegExp String",one=ane+" Iterator",X6e=ine.set,J6e=ine.getterFor(one),Q6e=TypeError,HP=tne("".indexOf),gT=tne("".matchAll),HN=!!gT&&!G6e(function(){gT("a",/./)}),Z6e=F6e(function(e,t,r,n){X6e(this,{type:one,regexp:e,string:t,global:r,unicode:n,done:!1})},ane,function(){var e=J6e(this);if(e.done)return oE(void 0,!0);var t=e.regexp,r=e.string,n=q6e(t,r);return n===null?(e.done=!0,oE(void 0,!0)):e.global?(Nv(n[0])===""&&(t.lastIndex=K6e(r,rne(t.lastIndex),e.unicode)),oE(n,!1)):(e.done=!0,oE(n,!1))}),k$=function(e){var t,r,n,i=V6e(this),a=Nv(e),o=W6e(i,RegExp),s=Nv(nne(i));return t=new o(o===RegExp?i.source:i,s),r=!!~HP(s,"g"),n=!!~HP(s,"u"),t.lastIndex=rne(i.lastIndex),new Z6e(t,a,r,n)};U6e({target:"String",proto:!0,forced:HN},{matchAll:function(e){var t,r,n,i,a=O$(this);if(B6e(e)){if(HN)return gT(a,e)}else{if(H6e(e)&&(t=Nv(O$(nne(e))),!~HP(t,"g")))throw Q6e("`.matchAll` does not allow non-global regexes");if(HN)return gT(a,e);if((n=z6e(e,Y6e))===void 0&&$6e(e)=="RegExp"&&(n=k$),n)return A$(n,e,a)}return r=Nv(a),i=new RegExp(e,"g"),A$(k$,i,r)}});var e$e=Ws("String").matchAll,t$e=na,r$e=e$e,zN=String.prototype,n$e=function(e){var t=e.matchAll;return typeof e=="string"||e===zN||t$e(zN,e)&&t===zN.matchAll?r$e:t},i$e=$r(n$e);function sne(e){function t(r,n,i,a){let o=r[a++];if(o==="__proto__")return!0;let s=Number.isFinite(+o),l=a>=r.length;return o=!o&&Ee.isArray(i)?i.length:o,l?(Ee.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s):(i[o]&&Ee.isObject(i[o])||(i[o]=[]),t(r,n,i[o],a)&&Ee.isArray(i[o])&&(i[o]=function(c){let u={},h=Object.keys(c),f,p=h.length,m;for(f=0;f<p;f++)m=h[f],u[m]=c[m];return u}(i[o])),!s)}if(Ee.isFormData(e)&&Ee.isFunction(e.entries)){let r={};return Ee.forEachEntry(e,(n,i)=>{t(function(a){return i$e(Ee).call(Ee,/\w+|\[(\w*)]/g,a).map(o=>o[0]==="[]"?"":o[1]||o[0])}(n),i,r,0)}),r}return null}var gM={transitional:gre,adapter:["xhr","http"],transformRequest:[function(e,t){let r=t.getContentType()||"",n=r.indexOf("application/json")>-1,i=Ee.isObject(e);if(i&&Ee.isHTMLForm(e)&&(e=new FormData(e)),Ee.isFormData(e))return n?JSON.stringify(sne(e)):e;if(Ee.isArrayBuffer(e)||Ee.isBuffer(e)||Ee.isStream(e)||Ee.isFile(e)||Ee.isBlob(e))return e;if(Ee.isArrayBufferView(e))return e.buffer;if(Ee.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(o,s){return dT(o,new Jl.classes.URLSearchParams,Object.assign({visitor:function(l,c,u,h){return Jl.isNode&&Ee.isBuffer(l)?(this.append(c,l.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)}},s))}(e,this.formSerializer).toString();if((a=Ee.isFileList(e))||r.indexOf("multipart/form-data")>-1){let o=this.env&&this.env.FormData;return dT(a?{"files[]":e}:e,o&&new o,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(o,s,l){if(Ee.isString(o))try{return(s||JSON.parse)(o),Ui(Ee).call(Ee,o)}catch(c){if(c.name!=="SyntaxError")throw c}return(0,JSON.stringify)(o)}(e)):e}],transformResponse:[function(e){let t=this.transitional||gM.transitional,r=t&&t.forcedJSONParsing,n=this.responseType==="json";if(e&&Ee.isString(e)&&(r&&!this.responseType||n)){let i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?yr.from(a,yr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jl.classes.FormData,Blob:Jl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ee.forEach(["delete","get","head","post","put","patch"],e=>{gM.headers[e]={}});var yM=gM,a$e=Ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),P$=Symbol("internals");function wy(e){var t;return e&&Ui(t=String(e)).call(t).toLowerCase()}function __(e){return e===!1||e==null?e:Ee.isArray(e)?e.map(__):String(e)}function GN(e,t,r,n,i){return Ee.isFunction(n)?n.call(this,t,r):(i&&(t=r),Ee.isString(t)?Ee.isString(n)?t.indexOf(n)!==-1:Ee.isRegExp(n)?n.test(t):void 0:void 0)}var S_=class{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function i(s,l,c){let u=wy(l);if(!u)throw new Error("header name must be a non-empty string");let h=Ee.findKey(n,u);(!h||n[h]===void 0||c===!0||c===void 0&&n[h]!==!1)&&(n[h||l]=__(s))}let a=(s,l)=>Ee.forEach(s,(c,u)=>i(c,u,l));var o;return Ee.isPlainObject(e)||e instanceof this.constructor?a(e,t):Ee.isString(e)&&(e=Ui(e).call(e))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(Ui(o=e).call(o))?a((s=>{let l={},c,u,h;return s&&s.split(`
`).forEach(function(f){var p,m;h=f.indexOf(":"),c=Ui(p=f.substring(0,h)).call(p).toLowerCase(),u=Ui(m=f.substring(h+1)).call(m),!c||l[c]&&a$e[c]||(c==="set-cookie"?l[c]?l[c].push(u):l[c]=[u]:l[c]=l[c]?l[c]+", "+u:u)}),l})(e),t):e!=null&&i(t,e,r),this}get(e,t){if(e=wy(e)){let r=Ee.findKey(this,e);if(r){let n=this[r];if(!t)return n;if(t===!0)return function(i){let a=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,s;for(;s=o.exec(i);)a[s[1]]=s[2];return a}(n);if(Ee.isFunction(t))return t.call(this,n,r);if(Ee.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=wy(e)){let r=Ee.findKey(this,e);return!(!r||this[r]===void 0||t&&!GN(0,this[r],r,t))}return!1}delete(e,t){let r=this,n=!1;function i(a){if(a=wy(a)){let o=Ee.findKey(r,a);!o||t&&!GN(0,r[o],o,t)||(delete r[o],n=!0)}}return Ee.isArray(e)?e.forEach(i):i(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let i=t[r];e&&!GN(0,this[i],i,e,!0)||(delete this[i],n=!0)}return n}normalize(e){let t=this,r={};return Ee.forEach(this,(n,i)=>{var a;let o=Ee.findKey(r,i);if(o)return t[o]=__(n),void delete t[i];let s=e?function(l){return Ui(l).call(l).toLowerCase().replace(/([a-z\d])(\w*)/g,(c,u,h)=>u.toUpperCase()+h)}(i):Ui(a=String(i)).call(a);s!==i&&delete t[i],t[s]=__(n),r[s]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){let t=Object.create(null);return Ee.forEach(this,(r,n)=>{r!=null&&r!==!1&&(t[n]=e&&Ee.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){let t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.forEach(a=>t.set(a)),t}static accessor(e){let t=(this[P$]=this[P$]={accessors:{}}).accessors,r=this.prototype;function n(i){let a=wy(i);t[a]||(function(o,s){let l=Ee.toCamelCase(" "+s);["get","set","has"].forEach(c=>{Object.defineProperty(o,c+l,{value:function(u,h,f){return this[c].call(this,s,u,h,f)},configurable:!0})})}(r,i),t[a]=!0)}return Ee.isArray(e)?e.forEach(n):n(e),this}};S_.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ee.reduceDescriptors(S_.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(i){this[n]=i}}}),Ee.freezeMethods(S_);var Jc=S_;function WN(e,t){let r=this||yM,n=t||r,i=Jc.from(n.headers),a=n.data;return Ee.forEach(e,function(o){a=o.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function lne(e){return!(!e||!e.__CANCEL__)}function Gb(e,t,r){yr.call(this,e??"canceled",yr.ERR_CANCELED,t,r),this.name="CanceledError"}Ee.inherits(Gb,yr,{__CANCEL__:!0});var o$e=Jl.hasStandardBrowserEnv?{write(e,t,r,n,i,a){let o=[e+"="+encodeURIComponent(t)];Ee.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Ee.isString(n)&&o.push("path="+n),Ee.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function cne(e,t){return e&&!function(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}(t)?function(r,n){return n?r.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):r}(e,t):t}var s$e=Jl.hasStandardBrowserEnv?function(){let e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),r;function n(i){let a=i;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=n(window.location.href),function(i){let a=Ee.isString(i)?n(i):i;return a.protocol===r.protocol&&a.host===r.host}}():function(){return!0};function D$(e,t){let r=0,n=function(i,a){i=i||10;let o=new Array(i),s=new Array(i),l,c=0,u=0;return a=a!==void 0?a:1e3,function(h){let f=Date.now(),p=s[u];l||(l=f),o[c]=h,s[c]=f;let m=u,g=0;for(;m!==c;)g+=o[m++],m%=i;if(c=(c+1)%i,c===u&&(u=(u+1)%i),f-l<a)return;let y=p&&f-p;return y?Math.round(1e3*g/y):void 0}}(50,250);return i=>{let a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-r,l=n(s);r=a;let c={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var l$e=typeof XMLHttpRequest<"u"&&function(e){return new ye(function(t,r){let n=e.data,i=Jc.from(e.headers).normalize(),a,o,{responseType:s,withXSRFToken:l}=e;function c(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}if(Ee.isFormData(n)){if(Jl.hasStandardBrowserEnv||Jl.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((o=i.getContentType())!==!1){let[m,...g]=o?o.split(";").map(y=>Ui(y).call(y)).filter(Boolean):[];i.setContentType([m||"multipart/form-data",...g].join("; "))}}let u=new XMLHttpRequest;if(e.auth){let m=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(m+":"+g))}let h=cne(e.baseURL,e.url);function f(){if(!u)return;let m=Jc.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());(function(g,y,v){let b=v.config.validateStatus;v.status&&b&&!b(v.status)?y(new yr("Request failed with status code "+v.status,[yr.ERR_BAD_REQUEST,yr.ERR_BAD_RESPONSE][Math.floor(v.status/100)-4],v.config,v.request,v)):g(v)})(function(g){t(g),c()},function(g){r(g),c()},{data:s&&s!=="text"&&s!=="json"?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:m,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),mre(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){u&&u.readyState===4&&(u.status!==0||u.responseURL&&u.responseURL.indexOf("file:")===0)&&setTimeout(f)},u.onabort=function(){u&&(r(new yr("Request aborted",yr.ECONNABORTED,e,u)),u=null)},u.onerror=function(){r(new yr("Network Error",yr.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let m=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",g=e.transitional||gre;e.timeoutErrorMessage&&(m=e.timeoutErrorMessage),r(new yr(m,g.clarifyTimeoutError?yr.ETIMEDOUT:yr.ECONNABORTED,e,u)),u=null},Jl.hasStandardBrowserEnv&&(l&&Ee.isFunction(l)&&(l=l(e)),l||l!==!1&&s$e(h))){let m=e.xsrfHeaderName&&e.xsrfCookieName&&o$e.read(e.xsrfCookieName);m&&i.set(e.xsrfHeaderName,m)}n===void 0&&i.setContentType(null),"setRequestHeader"in u&&Ee.forEach(i.toJSON(),function(m,g){u.setRequestHeader(g,m)}),Ee.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),s&&s!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",D$(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",D$(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=m=>{u&&(r(!m||m.type?new Gb(null,e,u):m),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));let p=function(m){let g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(m);return g&&g[1]||""}(h);p&&Jl.protocols.indexOf(p)===-1?r(new yr("Unsupported protocol "+p+":",yr.ERR_BAD_REQUEST,e)):u.send(n||null)})},zP={http:null,xhr:l$e};Ee.forEach(zP,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var L$=e=>"- ".concat(e),c$e=e=>Ee.isFunction(e)||e===null||e===!1,une={getAdapter:e=>{e=Ee.isArray(e)?e:[e];let{length:t}=e,r,n,i={};for(let a=0;a<t;a++){let o;if(r=e[a],n=r,!c$e(r)&&(n=zP[(o=String(r)).toLowerCase()],n===void 0))throw new yr("Unknown adapter '".concat(o,"'"));if(n)break;i[o||"#"+a]=n}if(!n){let a=Object.entries(i).map(o=>{let[s,l]=o;return"adapter ".concat(s," ")+(l===!1?"is not supported by the environment":"is not available in the build")});throw new yr("There is no suitable adapter to dispatch the request "+(t?a.length>1?`since :
`+a.map(L$).join(`
`):" "+L$(a[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n},adapters:zP};function KN(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Gb(null,e)}function j$(e){return KN(e),e.headers=Jc.from(e.headers),e.data=WN.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),une.getAdapter(e.adapter||yM.adapter)(e).then(function(t){return KN(e),t.data=WN.call(e,e.transformResponse,t),t.headers=Jc.from(t.headers),t},function(t){return lne(t)||(KN(e),t&&t.response&&(t.response.data=WN.call(e,e.transformResponse,t.response),t.response.headers=Jc.from(t.response.headers))),ye.reject(t)})}function M$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var U$=e=>e instanceof Jc?function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?M$(Object(n),!0).forEach(function(i){R(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}({},e):e;function Km(e,t){t=t||{};let r={};function n(c,u,h){return Ee.isPlainObject(c)&&Ee.isPlainObject(u)?Ee.merge.call({caseless:h},c,u):Ee.isPlainObject(u)?Ee.merge({},u):Ee.isArray(u)?u.slice():u}function i(c,u,h){return Ee.isUndefined(u)?Ee.isUndefined(c)?void 0:n(void 0,c,h):n(c,u,h)}function a(c,u){if(!Ee.isUndefined(u))return n(void 0,u)}function o(c,u){return Ee.isUndefined(u)?Ee.isUndefined(c)?void 0:n(void 0,c):n(void 0,u)}function s(c,u,h){return h in t?n(c,u):h in e?n(void 0,c):void 0}let l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(c,u)=>i(U$(c),U$(u),!0)};return Ee.forEach(Object.keys(Object.assign({},e,t)),function(c){let u=l[c]||i,h=u(e[c],t[c],c);Ee.isUndefined(h)&&u!==s||(r[c]=h)}),r}var dne="1.6.8",vM={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{vM[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var F$={};vM.transitional=function(e,t,r){function n(i,a){return"[Axios v"+dne+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,o)=>{if(e===!1)throw new yr(n(a," has been removed"+(t?" in "+t:"")),yr.ERR_DEPRECATED);return t&&!F$[a]&&(F$[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,a,o)}};var GP={assertOptions:function(e,t,r){if(typeof e!="object")throw new yr("options must be an object",yr.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),i=n.length;for(;i-- >0;){let a=n[i],o=t[a];if(o){let s=e[a],l=s===void 0||o(s,a,e);if(l!==!0)throw new yr("option "+a+" must be "+l,yr.ERR_BAD_OPTION_VALUE)}else if(r!==!0)throw new yr("Unknown option "+a,yr.ERR_BAD_OPTION)}},validators:vM},xu=GP.validators,T_=class{constructor(e){this.defaults=e,this.interceptors={request:new A6,response:new A6}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let n;Error.captureStackTrace?Error.captureStackTrace(n={}):n=new Error;let i=n.stack?n.stack.replace(/^.+\n/,""):"";r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}throw r}}_request(e,t){typeof e=="string"?(t=t||{}).url=e:t=e||{},t=Km(this.defaults,t);let{transitional:r,paramsSerializer:n,headers:i}=t;r!==void 0&&GP.assertOptions(r,{silentJSONParsing:xu.transitional(xu.boolean),forcedJSONParsing:xu.transitional(xu.boolean),clarifyTimeoutError:xu.transitional(xu.boolean)},!1),n!=null&&(Ee.isFunction(n)?t.paramsSerializer={serialize:n}:GP.assertOptions(n,{encode:xu.function,serialize:xu.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&Ee.merge(i.common,i[t.method]);i&&Ee.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),t.headers=Jc.concat(a,i);let o=[],s=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(t)===!1||(s=s&&p.synchronous,o.unshift(p.fulfilled,p.rejected))});let l=[],c;this.interceptors.response.forEach(function(p){l.push(p.fulfilled,p.rejected)});let u,h=0;if(!s){let p=[j$.bind(this),void 0];for(p.unshift.apply(p,o),p.push.apply(p,l),u=p.length,c=ye.resolve(t);h<u;)c=c.then(p[h++],p[h++]);return c}u=o.length;let f=t;for(h=0;h<u;){let p=o[h++],m=o[h++];try{f=p(f)}catch(g){m.call(this,g);break}}try{c=j$.call(this,f)}catch(p){return ye.reject(p)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return mre(cne((e=Km(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};Ee.forEach(["delete","get","head","options"],function(e){T_.prototype[e]=function(t,r){return this.request(Km(r||{},{method:e,url:t,data:(r||{}).data}))}}),Ee.forEach(["post","put","patch"],function(e){function t(r){return function(n,i,a){return this.request(Km(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}T_.prototype[e]=t(),T_.prototype[e+"Form"]=t(!0)});var C_=T_,u$e=class hne{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new ye(function(i){r=i});let n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a,o=new ye(s=>{n.subscribe(s),a=s}).then(i);return o.cancel=function(){n.unsubscribe(a)},o},t(function(i,a,o){n.reason||(n.reason=new Gb(i,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new hne(function(r){t=r}),cancel:t}}},d$e=u$e,WP={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(WP).forEach(e=>{let[t,r]=e;WP[r]=t});var h$e=WP,_i=function e(t){let r=new C_(t),n=hre(C_.prototype.request,r);return Ee.extend(n,C_.prototype,r,{allOwnKeys:!0}),Ee.extend(n,r,null,{allOwnKeys:!0}),n.create=function(i){return e(Km(t,i))},n}(yM);_i.Axios=C_,_i.CanceledError=Gb,_i.CancelToken=d$e,_i.isCancel=lne,_i.VERSION=dne,_i.toFormData=dT,_i.AxiosError=yr,_i.Cancel=_i.CanceledError,_i.all=function(e){return ye.all(e)},_i.spread=function(e){return function(t){return e.apply(null,t)}},_i.isAxiosError=function(e){return Ee.isObject(e)&&e.isAxiosError===!0},_i.mergeConfig=Km,_i.AxiosHeaders=Jc,_i.formToJSON=e=>sne(Ee.isHTMLForm(e)?new FormData(e):e),_i.getAdapter=une.getAdapter,_i.HttpStatusCode=h$e,_i.default=_i;var pa=_i,f$e=()=>{};function Av(){let e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:f$e};return e.promise=new ye((t,r)=>{e.resolve=n=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=n=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,r(n))}}),e}var sE=new Map,lE=new Map,Al=new Map,Sn=function(e){return e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot",e}({}),Mt=function(e){return e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger",e}({}),fne=new BFe,ul=fne.getResult(),qN=null;function Ct(e){if(!qN){ul=fne.getResult();let t=function(s){if(s.engine.name==="Blink"&&s.browser.name!=="WeChat")return Mt.CHROME;switch(s.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Mt.CHROME;case"Safari":case"Mobile Safari":return Mt.SAFARI;case"Edge":return Mt.EDGE;case"Firefox":return Mt.FIREFOX;case"QQ":case"QQBrowser":return Mt.QQ;case"Opera":return Mt.OPERA;case"WeChat":return Mt.WECHAT;default:return s.browser.name||""}}(ul),r=V$(ul),n=function(s){return s.os.name==="Windows"?s.os.version?s.os.name+" "+s.os.version:s.os.name:s.os.name||""}(ul),i=ul.os.version,a=V$(ul,!1),o=ul.device.type;if(!(t&&r&&n&&i))return{name:t,version:r,os:n,osVersion:i,browserVersion:a,deviceType:o};qN={name:t,version:r,os:n,osVersion:i,browserVersion:a,deviceType:o}}return qN}function V$(e){let t,r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return t=e.engine.name==="Blink"?e.engine.version||"":e.browser.version||"",r?t.split(".")[0]:t}function Ex(){return Ct().os}function B$(){let e=Ct();return"".concat(e.os," ").concat(e.osVersion)}function yT(){let e=Ct();return!!(ul.engine.name==="WebKit"&&e.os===Sn.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==Mt.SAFARI||Qi()&&e.name!==Mt.SAFARI)}function gd(){return Ct().name===Mt.CHROME}function ni(){return Ct().name===Mt.SAFARI}function pne(){return Ct().name===Mt.EDGE}function Ar(){return Ct().name===Mt.FIREFOX}function Qi(){return Ct().os===Sn.IOS}function KP(e){let t=Ct();return!(t.name!==Mt.CHROME||!t.osVersion)&&Number(t.version)>=e}function mne(e){let t=Ct();return!(t.name!==Mt.CHROME||!t.osVersion)&&Number(t.version)<e}function $$(e){let t=Ct();return!(t.name!==Mt.EDGE||!t.osVersion)&&Number(t.version)>=e}function gne(e){let t=Ct();return!(t.name!==Mt.SAFARI||!t.osVersion)&&Number(t.version)>=e}function yne(e,t,r){let n=Ct();if(n.os!==Sn.IOS||!n.osVersion)return!1;let i=n.osVersion.split(".");return t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e}function vne(e,t,r){let n=Ct();if(n.name!==Mt.SAFARI||!n.osVersion||!n.browserVersion)return!1;let i=n.browserVersion.split(".");return t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e}function H$(e){let t=Ct();return!(t.name!==Mt.OPERA||!t.osVersion)&&Number(t.version)>=e}function z$(){let e=Ct();if(e.os!==Sn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])<14||Number(t[0])===14&&Number(t[1])<=6}function qm(){let e=Ct();if(e.os!==Sn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])===15}function qP(){let e=Ct();if(e.os!==Sn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])===16}function G$(){let e=Ct();if(e.os!==Sn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])===15&&Number(t[1])>=1}function Ms(){return ni()&&navigator.maxTouchPoints>0}function bne(){return Ct().name===Mt.WECHAT}function wne(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function bM(){let e=Ex();return function(){let{deviceType:t}=Ct();return t==="mobile"||t==="tablet"}()||e===Sn.ANDROID||e===Sn.IOS||e===Sn.HARMONY_OS}function Nd(){let e=Ct();return e.name!==Mt.EDGE&&e.name!==Mt.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function _x(){return Ex()===Sn.ANDROID}function Ov(){let e=Ct();return _x()&&(e.name===Mt.CHROME||e.name===Mt.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function dr(e,t,r){return(t=function(n){var i=function(a,o){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var l=s.call(a,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(n);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W$(Object(r),!0).forEach(function(n){dr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var k=function(e){return e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",e}({}),ee=class extends Error{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;super(t),dr(this,"code",void 0),dr(this,"message",void 0),dr(this,"data",void 0),dr(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=r}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return e==="error"&&(t||console).error(this.toString()),e==="warning"&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function Bc(e,t){if(typeof e!="boolean")throw new ee(k.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function fn(e,t,r){if(!be(r).call(r,e))throw new ee(k.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(r)))}function Kt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4;if(e<r||e>n||(!(arguments.length>4&&arguments[4]!==void 0)||arguments[4])&&!function(i){return typeof i=="number"&&i%1==0}(e))throw new ee(k.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(r,", ").concat(n,"]. integer only"))}function YN(e,t){if(typeof e!="number"){if(!(e.min||e.max||e.ideal||e.exact))throw new ee(k.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));e.min!==void 0&&Kt(e.min,"".concat(t,".min"),0,1/0),e.max!==void 0&&Kt(e.max,"".concat(t,".max"),1,1/0),e.exact!==void 0&&Kt(e.exact,"".concat(t,".exact"),1,1/0),e.ideal!==void 0&&Kt(e.ideal,"".concat(t,".ideal"),1,1/0)}else Kt(e,t,1,1/0)}function Fn(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(e==null)throw new ee(k.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!Ene(e,r,n,i))throw new ee(k.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(r,",").concat(n,"].").concat(i?" ASCII characters only.":""))}function Lc(e,t){if(!Array.isArray(e))throw new ee(k.INVALID_PARAMS,"".concat(t," should be an array"))}function br(e){return e==null}function Ene(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof e=="string"&&e.length<=r&&e.length>=t&&(!n||function(i){if(typeof i!="string")return!1;for(let a=0;a<i.length;a+=1){let o=i.charCodeAt(a);if(o<0||o>255)return!1}return!0}(e))}var Gy=function(e){return e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE",e}(Gy||{}),YP=function(e){return e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",e}(YP||{}),_ne=new class{constructor(){dr(this,"_clientSize",null),dr(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),dr(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),dr(this,"getStyle",e=>window.getComputedStyle(e,null)),dr(this,"checkCssVisibleProperty",e=>{var t;let r=!0,n=this.getStyle(e),{display:i,visibility:a,opacity:o,filter:s}=n;return(i==="none"||be(t=["hidden","collapse"]).call(t,a)||Number(o)<.1)&&(r=!1),!!r&&(s&&s.split(" ").filter(l=>{var c;let u=l.split("(")[0];return be(c=["brightness","blur","opacity"]).call(c,u)}).map(l=>{let[c,u]=l.split(/\(|\)/);return[c,Number(u.match(/^[0-9\.]+/))]}).forEach(l=>{let[c,u]=l;switch(c){case"brightness":(u<.1||u>3)&&(r=!1);break;case"blur":u>3&&(r=!1);break;case"opacity":u<.1&&(r=!1)}}),r)}),dr(this,"checkPropertyUpToAllParentNodes",(e,t)=>{let r=!0,n=!0,i=o=>t(o),a=e;for(;a&&n;)i(a)||(r=!1,n=!1),a=a.parentElement,a||(n=!1);return r}),dr(this,"checkActualCssVisibleIncludeInherit",e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty)),dr(this,"getSizeAboutClient",e=>{let{width:t,height:r,left:n,right:i,top:a,bottom:o}=e.getBoundingClientRect(),s=this.getClientWidth(),l=this.getClientHeight();return{width:t,height:r,left:n,right:i,top:a,bottom:o,clientWidth:s,clientHeight:l,clientMin:Math.min(s,l)}}),dr(this,"checkActualSize",()=>{let{width:e,height:t,clientMin:r}=this._clientSize;return this.checkSizeIsVisible(e,t,r)}),dr(this,"elementFromPoint",(e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null),dr(this,"checkCoverForAPoint",(e,t,r)=>{let n=this.elementFromPoint(e,t);return n!==null&&n!==r}),dr(this,"getPointPositionList",()=>{let{width:e,height:t,left:r,top:n}=this._clientSize,i=e/6,a=t/6,o=[],s=10**6;for(let l=0;l<5;l++)for(let c=0;c<5;c++){let u=(r*s+(l===0?.1:l===4?(i*l*s-1e5)/s:i*l)*s)/s,h=(n*s+(c===0?.1:c===4?(a*c*s-1e5)/s:a*c)*s)/s;o.push({x:u,y:h})}return[...o]}),dr(this,"checkElementCover",e=>this.getPointPositionList().map(t=>this.checkCoverForAPoint(t.x,t.y,e)).filter(t=>!!t).length>6),dr(this,"checkSizeIsVisible",(e,t,r)=>(e>50||r/e<=10)&&(t>50||r/t<=10)),dr(this,"checkSizeOfPartInClient",()=>{let{left:e,right:t,top:r,bottom:n,clientHeight:i,clientWidth:a,clientMin:o}=this._clientSize,s,l,c,u;if(e<0)s=0;else{if(!(e<a))return!1;s=e}if(t<0)return!1;if(l=t<a?t:a,r<0)c=0;else{if(!(r<i))return!1;c=r}if(n<0)return!1;u=n<i?n:i;let h=l-s,f=u-c;return this.checkSizeIsVisible(h,f,o)}),dr(this,"returnHiddenResult",e=>(this._clientSize=null,{visible:!1,reason:e})),dr(this,"checkOneElementVisible",e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(Gy.COVERED);{let t=this.checkActualSize(),r=this.checkSizeOfPartInClient();return t&&!r?this.returnHiddenResult(Gy.POSITION):t?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(Gy.SIZE)}}return this.returnHiddenResult(Gy.STYLE)}return this.returnHiddenResult(YP.UNMOUNTED)}return this.returnHiddenResult(YP.INVALID_HTML_ELEMENT)}),dr(this,"checkElementIsMountedOnDom",e=>this.checkPropertyUpToAllParentNodes(e,t=>t.nodeName.toUpperCase()!=="HTML"?t.parentElement!==null:!!document.documentElement))}};function wM(e){return new TextEncoder().encode(e)}var K$=function(e,t){let r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r},XP=async e=>function(t,r){let n="";return new Uint8Array(t).forEach(i=>{n+=i.toString(r).padStart(2,"0")}),n}(await crypto.subtle.digest("SHA-256",wM(e)),16),Tr=class{constructor(){dr(this,"_events",{}),dr(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map(t=>t.listener):[]}on(e,t){this._events[e]||(this._events[e]=[]);let r=this._events[e];this._indexOfListener(r,t)===-1&&r.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);let r=this._events[e];this._indexOfListener(r,t)===-1&&r.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;let r=this._events[e],n=this._indexOfListener(r,t);n!==-1&&r.splice(n,1),this._events[e].length===0&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);let t=this._events[e].map(a=>a);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(let a=0;a<t.length;a+=1){let o=t[a];o.once&&this.off(e,o.listener),o.listener.apply(this,n||[])}}safeEmit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];[...this._events[e]||[]].forEach(i=>{i.once&&this.off(e,i.listener);try{i.listener.apply(this,r)}catch(a){console.error("safeEmit event:".concat(e," error ").concat(a==null?void 0:a.toString()))}})}_indexOfListener(e,t){let r=e.length;for(;r--;)if(e[r].listener===t)return r;return-1}},Ey=null;function Sne(){if(Ey)return Ey;if(window.electron)return Ey=window.electron;if(!window.require)return null;try{return Ey=window.require("electron"),Ey}catch{return null}}var sn=function(e){return e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.PRELOAD="PRELOAD",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload",e}({}),Nr=function(e){return e.TRACER="tracer",e}({});function q$(e){return Kt(e.timeout,"config.timeout",0,1e5),Kt(e.timeoutFactor,"config.timeoutFactor",0,100,!1),Kt(e.maxRetryCount,"config.maxRetryConfig",0,1/0),Kt(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}var p$e=function(e){return e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",e}({}),$t=function(e){return e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.FALLBACK="FALLBACK",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e}({});function Sx(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach(t=>{if(!t.urls)throw Error()})}catch{return!1}return!0}function Tne(e){return Fn(e.turnServerURL,"turnServerURL"),Fn(e.username,"username"),Fn(e.password,"password"),e.udpport&&Kt(e.udpport,"udpport",1,99999,!0),e.forceturn&&Bc(e.forceturn,"forceturn"),e.security&&Bc(e.security,"security"),e.tcpport&&Kt(e.tcpport,"tcpport",1,99999,!0),!0}function Y$(e){return e.level!==void 0&&fn(e.level,"level",[1,2,3]),e.delay!==void 0&&Kt(e.delay,"delay",0,3e3,!0),!0}var vt=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",e}({}),ri=function(e){return e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK",e}({}),Va=function(e){return e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({}),qp=function(e){return e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({});function ii(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return e.getListeners(t).length===0?ye.reject(new ee(k.UNEXPECTED_ERROR,"can not emit promise")):new ye((a,o)=>{e.emit(t,...n,a,o)})}function Qt(e,t){if(e.getListeners(t).length===0)return ye.resolve();for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return ii(e,t,...n)}function Bo(e,t){if(e.getListeners(t).length===0)return null;for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return kv(e,t,...n)}function kv(e,t){let r=null,n=null;for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];if(e.emit(t,...a,s=>{r=s},s=>{n=s}),n!==null)throw n;if(r===null)throw new ee(k.UNEXPECTED_ERROR,"handler is not sync");return r}var Kr=new class extends Tr{set networkState(e){this.emit(qp.NETWORK_STATE_CHANGE,e,this._networkState),e===Va.ONLINE?this.emit(qp.ONLINE):e===Va.OFFLINE&&(this.onlineWaiter=new ye(t=>{this.once(qp.ONLINE,()=>{this.onlineWaiter=void 0,t(Va.ONLINE)})}),this.emit(qp.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===Va.ONLINE}constructor(){super(),dr(this,"_moduleName","network-indicator"),dr(this,"_networkState",Va.ONLINE),dr(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=Va.ONLINE}),window.addEventListener("offline",()=>{this.networkState=Va.OFFLINE})}};function vT(e,t){let r=e.indexOf(t);r!==-1&&e.splice(r,1)}function Yp(e){let t=[];return e.forEach(r=>{t.indexOf(r)===-1&&t.push(r)}),t}function Tx(e){ye!==void 0?ye.resolve().then(e):setTimeout(e,0)}function Gr(e){return JSON.parse(JSON.stringify(e))}function xh(e){try{return Gr(e)}catch{return e}}var X$={};function Ad(e,t){X$[t]||(X$[t]=!0,e())}function Rh(e){let t=window.atob(e),r=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n+=1)r[n]=t.charCodeAt(n);return r}function yd(e){let t="";for(let r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return window.btoa(t)}function Cne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,r=new TextEncoder().encode(e);if(r.length>t)r=r.slice(0,t);else if(r.length<t){let n=new Uint8Array(t);n.set(r),r=n}return r}function J$(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=wl(t).call(t,(o,s)=>o+s.length,0),i=new Uint8Array(new ArrayBuffer(n)),a=0;return t.forEach(o=>{i.set(o,a),a+=o.length}),i}function Ql(e){return window.TextEncoder?new TextEncoder().encode(e).length:e.length}function xne(e){let t=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&e.realFormData&&(e=e.realFormData),e.forEach(r=>{t+=typeof r=="string"?Ql(r):r.size}),t+138}function m$e(e){let t=new ee(k.TIMEOUT,"timeout");return new ye((r,n)=>{window.setTimeout(()=>n(t),e)})}function zn(e){return new ye(t=>{window.setTimeout(t,e)})}function rr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0,r=Math.random().toString(16).substr(2,e).toLowerCase();return r.length===e?"".concat(t).concat(r):"".concat(t).concat(r)+rr(e-r.length,"")}function Xp(){return rr(32,"").toUpperCase()}var Cx=()=>{},Q$=new class{constructor(){dr(this,"fnMap",new Map)}throttleByKey(e,t,r,n){for(var i=arguments.length,a=new Array(i>4?i-4:0),o=4;o<i;o++)a[o-4]=arguments[o];if(this.fnMap.has(t)){let s=this.fnMap.get(t);if(s.threshold!==r){s.fn(...s.args),clearTimeout(s.timer);let l=window.setTimeout(()=>{let c=this.fnMap.get(t);c&&c.fn(...c.args),this.fnMap.delete(t)},r);this.fnMap.set(t,{fn:e,threshold:r,timer:l,args:a,skipFn:n})}else s.skipFn&&s.skipFn(...s.args),this.fnMap.set(t,Ce(Ce({},s),{},{fn:e,args:a,skipFn:n}))}else{let s=window.setTimeout(()=>{let l=this.fnMap.get(t);l&&l.fn(...l.args),this.fnMap.delete(t)},r);this.fnMap.set(t,{fn:e,threshold:r,timer:s,args:a,skipFn:n})}}},Z$=Q$.throttleByKey.bind(Q$);function e8(e){return typeof e=="object"&&e!==null&&!(e instanceof RegExp)}function JP(e,t){if(!e8(e)||!e8(t)||Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){let r=[...e];for(let n=0;n<t.length;n++)r[n]=JP(e[n],t[n]);return r}{let r=Ce({},e);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)?r[n]=JP(e[n],t[n]):r[n]=t[n]);return r}}function t8(e,t){let r=[0];if(r=new Array(t).fill(0),e===0)return r;let n=0;for(;e>0&&(r[n]=255&e,e>>=8,n++,n!==t););return r}function XN(e){return typeof e=="number"?e:e.exact||e.ideal||e.max||e.min||0}function Rne(e){let t="0123456789abcdef";function r(E){let S,I="";for(S=0;S<=3;S++)I+=t.charAt(E>>8*S+4&15)+t.charAt(E>>8*S&15);return I}function n(E,S){let I=(65535&E)+(65535&S);return(E>>16)+(S>>16)+(I>>16)<<16|65535&I}function i(E,S,I,N,L,j){return n(function(z,A){return z<<A|z>>>32-A}(n(n(S,E),n(N,j)),L),I)}function a(E,S,I,N,L,j,z){return i(S&I|~S&N,E,S,L,j,z)}function o(E,S,I,N,L,j,z){return i(S&N|I&~N,E,S,L,j,z)}function s(E,S,I,N,L,j,z){return i(S^I^N,E,S,L,j,z)}function l(E,S,I,N,L,j,z){return i(I^(S|~N),E,S,L,j,z)}let c=function(E){let S,I=1+(E.length+8>>6),N=new Array(16*I);for(S=0;S<16*I;S++)N[S]=0;for(S=0;S<E.length;S++)N[S>>2]|=E.charCodeAt(S)<<S%4*8;return N[S>>2]|=128<<S%4*8,N[16*I-2]=8*E.length,N}(e),u,h,f,p,m,g=1732584193,y=-271733879,v=-1732584194,b=271733878;for(u=0;u<c.length;u+=16)h=g,f=y,p=v,m=b,g=a(g,y,v,b,c[u+0],7,-680876936),b=a(b,g,y,v,c[u+1],12,-389564586),v=a(v,b,g,y,c[u+2],17,606105819),y=a(y,v,b,g,c[u+3],22,-1044525330),g=a(g,y,v,b,c[u+4],7,-176418897),b=a(b,g,y,v,c[u+5],12,1200080426),v=a(v,b,g,y,c[u+6],17,-1473231341),y=a(y,v,b,g,c[u+7],22,-45705983),g=a(g,y,v,b,c[u+8],7,1770035416),b=a(b,g,y,v,c[u+9],12,-1958414417),v=a(v,b,g,y,c[u+10],17,-42063),y=a(y,v,b,g,c[u+11],22,-1990404162),g=a(g,y,v,b,c[u+12],7,1804603682),b=a(b,g,y,v,c[u+13],12,-40341101),v=a(v,b,g,y,c[u+14],17,-1502002290),y=a(y,v,b,g,c[u+15],22,1236535329),g=o(g,y,v,b,c[u+1],5,-165796510),b=o(b,g,y,v,c[u+6],9,-1069501632),v=o(v,b,g,y,c[u+11],14,643717713),y=o(y,v,b,g,c[u+0],20,-373897302),g=o(g,y,v,b,c[u+5],5,-701558691),b=o(b,g,y,v,c[u+10],9,38016083),v=o(v,b,g,y,c[u+15],14,-660478335),y=o(y,v,b,g,c[u+4],20,-405537848),g=o(g,y,v,b,c[u+9],5,568446438),b=o(b,g,y,v,c[u+14],9,-1019803690),v=o(v,b,g,y,c[u+3],14,-187363961),y=o(y,v,b,g,c[u+8],20,1163531501),g=o(g,y,v,b,c[u+13],5,-1444681467),b=o(b,g,y,v,c[u+2],9,-51403784),v=o(v,b,g,y,c[u+7],14,1735328473),y=o(y,v,b,g,c[u+12],20,-1926607734),g=s(g,y,v,b,c[u+5],4,-378558),b=s(b,g,y,v,c[u+8],11,-2022574463),v=s(v,b,g,y,c[u+11],16,1839030562),y=s(y,v,b,g,c[u+14],23,-35309556),g=s(g,y,v,b,c[u+1],4,-1530992060),b=s(b,g,y,v,c[u+4],11,1272893353),v=s(v,b,g,y,c[u+7],16,-155497632),y=s(y,v,b,g,c[u+10],23,-1094730640),g=s(g,y,v,b,c[u+13],4,681279174),b=s(b,g,y,v,c[u+0],11,-358537222),v=s(v,b,g,y,c[u+3],16,-722521979),y=s(y,v,b,g,c[u+6],23,76029189),g=s(g,y,v,b,c[u+9],4,-640364487),b=s(b,g,y,v,c[u+12],11,-421815835),v=s(v,b,g,y,c[u+15],16,530742520),y=s(y,v,b,g,c[u+2],23,-995338651),g=l(g,y,v,b,c[u+0],6,-198630844),b=l(b,g,y,v,c[u+7],10,1126891415),v=l(v,b,g,y,c[u+14],15,-1416354905),y=l(y,v,b,g,c[u+5],21,-57434055),g=l(g,y,v,b,c[u+12],6,1700485571),b=l(b,g,y,v,c[u+3],10,-1894986606),v=l(v,b,g,y,c[u+10],15,-1051523),y=l(y,v,b,g,c[u+1],21,-2054922799),g=l(g,y,v,b,c[u+8],6,1873313359),b=l(b,g,y,v,c[u+15],10,-30611744),v=l(v,b,g,y,c[u+6],15,-1560198380),y=l(y,v,b,g,c[u+13],21,1309151649),g=l(g,y,v,b,c[u+4],6,-145523070),b=l(b,g,y,v,c[u+11],10,-1120210379),v=l(v,b,g,y,c[u+2],15,718787259),y=l(y,v,b,g,c[u+9],21,-343485551),g=n(g,h),y=n(y,f),v=n(v,p),b=n(b,m);return r(g)+r(y)+r(v)+r(b)}var g$e=1,cE=console,gi=class{static setLogger(e){cE=e}constructor(e){dr(this,"lockingPromise",ye.resolve()),dr(this,"locks",0),dr(this,"name",""),dr(this,"lockId",void 0),this.lockId=g$e++,e&&(this.name=e),cE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,cE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof e=="string"?e:""));let r=new ye(i=>{t=()=>{this.locks-=1,cE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof e=="string"?e:"")),i()}}),n=this.lockingPromise.then(()=>t);return this.lockingPromise=this.lockingPromise.then(()=>r),n}};function Ym(e,t){return function(r,n,i){let a=i.value;if(typeof a!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){let o=this[t];if(!o)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));let s=await o.lock("From ".concat(e,".").concat(n));try{for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return await a.apply(this,c)}finally{s()}},i}}var Zr={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function EM(e,t){let r=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,r)}function Cl(e,t,r,n){let i=Object.assign({},Zr,n),a=i.timeout,o=async()=>{await function(c){return new ye(u=>{window.setTimeout(u,c)})}(a),a*=i.timeoutFactor,a=Math.min(i.maxRetryTimeout,a)},s=!1,l=new ye(async(c,u)=>{t=t||(()=>!1),r=r||(()=>!0);for(let h=0;h<i.maxRetryCount;h+=1){if(s)return u(new ee(k.OPERATION_ABORTED));try{let f=await e();if(!t(f,h)||h+1===i.maxRetryCount)return c(f);await o()}catch(f){if(!r(f,h)||h+1===i.maxRetryCount)return u(f);await o()}}});return l.cancel=()=>s=!0,l}var Ine=class{constructor(e){dr(this,"input",[]),dr(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return this.input.length===0?0:wl(e=this.input).call(e,(t,r)=>t+r)/this.input.length}},uE,dE=0,JN=0;function QP(e,t,r,n){return new ye((i,a)=>{t.responseType=t.responseType||"json",t.data&&!r?(t.data=JSON.stringify(t.data),dE+=Ql(t.data)):r&&(t.data.size?dE+=t.data.size:t.data instanceof FormData?dE+=xne(t.data):dE+=Ql(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,pa.request(t).then(o=>{typeof o.data=="string"?JN+=Ql(o.data):o.data instanceof ArrayBuffer||o.data instanceof Uint8Array?JN+=o.data.byteLength:JN+=Ql(JSON.stringify(o.data)),i(o.data)}).catch(o=>{pa.isCancel(o)?a(new ee(k.OPERATION_ABORTED,"cancel token canceled")):o.code==="ECONNABORTED"?a(new ee(k.NETWORK_TIMEOUT,o.message)):o.response?a(new ee(k.NETWORK_RESPONSE_ERROR,o.response.status)):a(new ee(k.NETWORK_ERROR,o.message))})})}async function y$e(e,t){let r=new Blob([t.data],{type:"buffer"});return await QP(e,Ce(Ce({},t),{},{data:r,headers:{"Content-Type":"application/octet-stream"}}),!0)}var r8=()=>window.isSecureContext!==void 0,$o=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;let t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){let n=t[1],i=t[2];return"".concat(n,".").concat(i)}let r=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(r&&r[1]&&r[2]){let n=r[1],i=r[2];return"".concat(n,".").concat(100*(Number(i)+1))}return"4.0.0.999"}("4.22.0"),_M=function(){try{return JSON.parse("true")===!0}catch{return!0}}(),dh=function(e){return e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn",e}({}),SM={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},TM="v4.22.0-0-g8569241d-dirty(8/15/2024, 7:04:06 PM)",Vr=Ce(Ce({PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:SM,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,CUSTOM_ADAPTATION_DEFAULT_MODE:"",ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,ENABLE_PRELOAD:!0},{ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,USE_PUB_RTX:!0,USE_SUB_RTX:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_DATASTREAM_2:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,USE_XR:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,ENABLE_PREALLOC_PC:!1,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC:!1,ENABLE_SVC_DEFAULT_CODECS:["H264","VP8","VP9","AV1"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:2,ENABLE_PRE_SUB:!1,ENABLE_AUT_FEEDBACK:!1}),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1});function Wt(e,t,r){var n,i,a;be(n=Object.keys(Vr)).call(n,e)&&(!r&&be(i=Object.keys(ed)).call(i,e)||(Vr[e]=t,e==="ENABLE_VIDEO_SEI"&&t===!0&&(Vr.ENABLE_ENCODED_TRANSFORM=!0),e==="USE_NEW_NETWORK_CONFIG"&&t&&(a=!!t,Vr.USE_NEW_NETWORK_CONFIG=a,a&&(Vr.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],Vr.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],Vr.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],Vr.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],Vr.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",Vr.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",Vr.GATEWAY_DOMAINS=["edge.sd-rtn.com"])),e==="ENABLE_PRE_SUB"&&t&&(Vr.ENABLE_INSTANT_VIDEO=!0,Vr.ENABLE_PREALLOC_PC=!0),e==="ENABLE_SVC"&&t&&(Vr.ENABLE_AUT_CC=!0)))}function M(e){return Vr[e]}var ed={},pt=function(e){return e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",e}(pt||{}),v$e=class{constructor(e,t,r,n){dr(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:r,clientId:n,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useP2P:!1,p2pTransport:dh.Default}}dispatch(e){this.state=function(t,r){switch(r.type){case pt.SET_SESSION_ID:return Ce(Ce({},t),{},{sessionId:r.sessionId});case pt.SET_P2P_ID:return Ce(Ce({},t),{},{p2pId:r.p2pId});case pt.SET_UID:return Ce(Ce({},t),{},{uid:r.uid});case pt.SET_INT_UID:return Ce(Ce({},t),{},{intUid:r.intUid});case pt.SET_PUB_ID:return Ce(Ce({},t),{},{pubId:r.pubId});case pt.KEY_METRIC_CLIENT_CREATED:return Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{clientCreated:r.metric})});case pt.KEY_METRIC_JOIN_START:return Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{joinStart:r.metric})});case pt.AVOID_JOIN_START:return Ce(Ce({},t),{},{avoidJoinStart:r.avoidJoinStart});case pt.KEY_METRIC_JOIN_END:return Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{joinEnd:r.metric})});case pt.KEY_METRIC_REQUEST_AP_START:return Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{requestAPStart:r.metric})});case pt.KEY_METRIC_REQUEST_AP_END:return Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{requestAPEnd:r.metric})});case pt.KEY_METRIC_JOIN_GATEWAY_START:return Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{joinGatewayStart:r.metric})});case pt.KEY_METRIC_JOIN_GATEWAY_END:return Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{joinGatewayEnd:r.metric})});case pt.KEY_METRIC_PEER_CONNECTION_START:return Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{peerConnectionStart:r.metric})});case pt.KEY_METRIC_PEER_CONNECTION_END:return Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{peerConnectionEnd:r.metric})});case pt.KEY_METRIC_DESCRIPTION_START:return Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{descriptionStart:r.metric})});case pt.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{signalChannelOpen:r.metric})});case pt.KEY_METRIC_ICE_CONNECTION_END:return Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{iceConnectionEnd:r.metric})});case pt.KEY_METRIC_PUBLISH:{let n=t.keyMetrics.publish,i=n.findIndex(a=>a.trackId===r.metric.trackId);return i!==-1?(n[i]=Ce(Ce({},n[i]),r.metric),Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{publish:[...n]})})):Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{publish:[...t.keyMetrics.publish,r.metric]})})}case pt.KEY_METRIC_SUBSCRIBE:{let n=t.keyMetrics.subscribe,i=n.findIndex(a=>a.userId===r.metric.userId&&a.type===r.metric.type);return i!==-1?(n[i]=Ce(Ce({},n[i]),r.metric),Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{subscribe:[...n]})})):Ce(Ce({},t),{},{keyMetrics:Ce(Ce({},t.keyMetrics),{},{subscribe:[...t.keyMetrics.subscribe,r.metric]})})}case pt.SET_CLOUD_PROXY_SERVER_MODE:return t.cloudProxyServerMode=r.mode,t;case pt.RECORD_JOIN_CHANNEL_SERVICE:return typeof r.index!="number"?t.joinChannelServiceRecords=[...t.joinChannelServiceRecords,r.record]:(t.joinChannelServiceRecords[r.index]=Ce(Ce({},t.joinChannelServiceRecords[r.index]),r.record),t.joinChannelServiceRecords=[...t.joinChannelServiceRecords]),t;case pt.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return t.joinChannelServiceRecords=[],t;case pt.RESET_KEY_METRICS:return t.keyMetrics={publish:[],subscribe:[]},t;case pt.SET_USE_P2P:return Ce(Ce({},t),{},{useP2P:r.val});case pt.SET_TRANSPORT_TYPE:return Ce(Ce({},t),{},{p2pTransport:r.val});default:return t}}(this.state,e)}set sessionId(e){this.dispatch({type:pt.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:pt.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:pt.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:pt.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:pt.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:pt.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:pt.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(e){this.dispatch({type:pt.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:pt.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:pt.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:pt.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:pt.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:pt.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:pt.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:pt.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:pt.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:pt.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:pt.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:pt.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:pt.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:pt.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,r,n){this.dispatch({type:pt.KEY_METRIC_PUBLISH,metric:Ce(Ce({trackId:e,type:t},r&&{publishStart:r}),n&&{publishEnd:n})})}subscribe(e,t,r,n,i,a,o){this.dispatch({type:pt.KEY_METRIC_SUBSCRIBE,metric:Ce(Ce(Ce(Ce(Ce({userId:e,type:t},r&&{subscribeStart:r}),n&&{subscribeEnd:n}),i&&{firstFrame:i}),a&&{streamAdded:a}),o&&{firstDecoded:o})})}massSubscribe(e,t,r,n){e.forEach(i=>{this.dispatch({type:pt.KEY_METRIC_SUBSCRIBE,metric:Ce(Ce(Ce({userId:i.userId,type:i.type},t&&{subscribeStart:t}),r&&{subscribeEnd:r}),n&&{firstFrame:n})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){e.service==="gateway"&&Array.isArray(e.urls)&&(e.urls=e.urls.map(r=>r.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof t!="number"?(this.dispatch({type:pt.RECORD_JOIN_CHANNEL_SERVICE,record:Ce(Ce({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:pt.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:pt.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:pt.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:pt.AVOID_JOIN_START,avoidJoinStart:e})}},xx=function(e){return e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1",e}({});(function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"})({});var n8=128,b$e=96,i8=1e3,np=10,w$e=0;function Fr(e,t,r){return(t=function(n){var i=function(a,o){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var l=s.call(a,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(n);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a8(Object(r),!0).forEach(function(n){Fr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Nne=new class extends Tr{constructor(){super(...arguments),Fr(this,"currentUploadLogID",0)}reportLogUploadError(e){let{errorRange:t}=e;t[t.length-1]&&t[t.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=t[t.length-1],this.emit("REPORT_LOG_UPLOAD",e))}},E$e=class{constructor(e){Fr(this,"logger",void 0),Fr(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}};function QN(){let e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function o8(){let e=new Date,t=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return t?(t==null?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}var Oo={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},hE=Date.now(),_y=e=>{for(let t in Oo)if(Object.prototype.hasOwnProperty.call(Oo,t)&&Oo[t]===e)return t;return"DEFAULT"},_=new class{constructor(){Fr(this,"proxyServerURL",void 0),Fr(this,"logLevel",Oo.DEBUG),Fr(this,"uploadState","collecting"),Fr(this,"uploadLogWaitingList",[]),Fr(this,"uploadLogUploadingList",[]),Fr(this,"uploadErrorCount",0),Fr(this,"currentLogID",0),Fr(this,"url",void 0),Fr(this,"extLog",(e,t)=>{this.appendLogToWaitingList(e,...t)})}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[Oo.DEBUG].concat(t);this.log.apply(this,n)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[Oo.INFO].concat(t);this.log.apply(this,n)}warning(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[Oo.WARNING].concat(t);this.log.apply(this,n)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[Oo.ERROR].concat(t);this.log.apply(this,n)}upload(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[Oo.DEBUG].concat(t);this.uploadLog.apply(this,n)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){Wt("UPLOAD_LOG",!0)}disableLogUpload(){Wt("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new E$e(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(Date.now()-hE<100)return void setTimeout(()=>{this.log(...t)},Date.now()-hE);let n=Math.max(0,Math.min(4,t[0]));if(t[0]=QN()+" Agora-SDK [".concat(_y(n),"]:"),this.appendLogToWaitingList(n,...t),n<this.logLevel)return;let i=QN()+" %cAgora-SDK [".concat(_y(n),"]:"),a=[];if(!M("USE_NEW_LOG"))switch(n){case Oo.DEBUG:a=[i,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,a);break;case Oo.INFO:a=[i,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,a);break;case Oo.WARNING:a=[i,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,a);break;case Oo.ERROR:a=[i,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,a)}}uploadLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(Date.now()-hE<100)return void setTimeout(()=>{this.uploadLog(...t)},Date.now()-hE);let n=Math.max(0,Math.min(4,t[0]));t[0]=QN()+" Agora-SDK [".concat(_y(n),"]:"),this.appendLogToWaitingList(n,...t)}appendLogToWaitingList(e){if(!M("UPLOAD_LOG"))return;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Array.isArray(r[0])?r[0][0]=o8()+" Agora-SDK [".concat(_y(e),"]:"):r[0]=o8()+" Agora-SDK [".concat(_y(e),"]:");let i="";r.forEach(a=>{typeof a=="object"&&(a=JSON.stringify(a)),i+="".concat(a," ")}),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){let e=this.uploadLogUploadingList,t={sdk_version:$o,process_id:M("PROCESS_ID"),payload:JSON.stringify(e)};return Cl(async()=>{let r=await pa.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(M("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(M("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if(r.data!=="OK"){let n=new Error("unexpected upload log response");throw n.response=r,n}},()=>(this.uploadLogUploadingList=[],!1),r=>{let n={status:-1,message:r.message,errorRange:e.map(i=>i.log_item_id)};return r.response?(n.status=r.response.status,n.data=r.response.data,n.headers=r.response.headers):r.request&&(n.status=r.request.status),Nne.reportLogUploadError(n),!0},{timeout:M("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:M("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,M("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),M("UPLOAD_LOG_INTERVAL"))}).catch(e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),M("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),M("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},s8;function _$e(e){return Fn(e.reportId,"params.reportId",0,100,!1),Fn(e.category,"params.category",0,100,!1),Fn(e.event,"params.event",0,100,!1),Fn(e.label,"params.label",0,100,!1),Kt(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(s8={}).FREE="free",s8.UPLOADING="uploading",function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}({});var S$e={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},Un=function(e){return e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",e}({}),Er=function(e){return e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",e}({});(function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"})({});var T$e=function(e){return e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED",e}({}),CM=class Ane{constructor(){Fr(this,"baseInfoMap",new Map),Fr(this,"proxyServer",void 0),Fr(this,"eventUploadTimer",void 0),Fr(this,"setSessionIdTimer",void 0),Fr(this,"url",void 0),Fr(this,"backupUrl",void 0),Fr(this,"_appId",void 0),Fr(this,"keyEventUploadPendingItems",[]),Fr(this,"normalEventUploadPendingItems",[]),Fr(this,"apiInvokeUploadPendingItems",[]),Fr(this,"apiInvokeCount",0),Fr(this,"ltsList",[]),Fr(this,"lastSendNormalEventTime",Date.now()),Fr(this,"customReportCounterTimer",void 0),Fr(this,"customReportCount",0),Fr(this,"extApiInvoke",async t=>{for(let r of t){let n=lt(lt({},r),{},{sid:null,invokeId:++this.apiInvokeCount,tag:Nr.TRACER});this.sendApiInvoke(n)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),M("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),M("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(t){return this.baseInfoMap.get(t)}adjustSessionStartTime(t){if(!this.baseInfoMap.has(t)&&!this.baseInfoMap.get(t))return void _.error("adjust session ".concat(t," start time, sid is not exist or info is undefined"));let r=this.baseInfoMap.get(t),n=Date.now(),i=r.startTime;r.startTime=n,_.debug("rewrite session ".concat(t," startTime: ").concat(n," , ").concat(n-i,"ms")),this.baseInfoMap.set(t,r)}setAppId(t){this._appId=t}reportApiInvoke(t,r,n){r.timeout=r.timeout||6e4,r.reportResult=r.reportResult===void 0||r.reportResult;let i=Date.now();this.apiInvokeCount+=1;let a=this.apiInvokeCount,o=()=>({tag:r.tag,invokeId:a,sid:t,name:r.name,apiInvokeTime:i,options:r.options,states:r.states||null}),s=!!M("SHOW_REPORT_INVOKER_LOG");s&&_.info("".concat(r.name," start"),r.options);let l=!1;zn(r.timeout).then(()=>{l||(this.sendApiInvoke(lt(lt({},o()),{},{error:k.API_INVOKE_TIMEOUT,success:!1})),_.debug("".concat(r.name," timeout")))});let c=new ee(k.UNEXPECTED_ERROR,"".concat(r.name,": this api invoke is end"));return{onSuccess:u=>{let h=()=>{if(l)throw c;return l=!0,this.sendApiInvoke(lt(lt({},o()),{},{success:!0},r.reportResult&&{result:u})),s&&_.info("".concat(r.name," onSuccess")),u};return n?Z$(h,r.name+"Success",n,()=>l=!0):h()},onError:u=>{let h=()=>{if(l)throw u;l=!0,this.sendApiInvoke(lt(lt({},o()),{},{success:!1,error:u})),s&&_.info("".concat(r.name," onFailure"),u.toString())};return n?Z$(h,r.name+"Error",n,()=>l=!0):h()}}}sessionInit(t,r){if(this.baseInfoMap.has(t))return;let n=Date.now(),i=this.createBaseInfo(t,n);i.cname=r.cname;let a=Object.assign({},{willUploadConsoleLog:M("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:_M?"global":"oversea",areas:M("AREAS")&&M("AREAS").join(",")},r.extend),{stringUid:o,channelProfile:s,channelMode:l,isABTestSuccess:c,lsid:u,clientRole:h}=r,f=Date.now(),p=lt(lt({},i),{},{eventType:Un.SESSION_INIT,appid:r.appid,browser:navigator.userAgent,buildFormat:r.buildFormat,build:TM,lts:f,elapse:f-n,extend:JSON.stringify(a),mode:r.mode,process:M("PROCESS_ID"),appType:M("APP_TYPE"),success:!0,version:$o,stringUid:o,channelProfile:s,channelMode:l,isABTestSuccess:c,lsid:u,clientType:be(m=window.navigator.userAgent).call(m,"AgoraWebView")?42:20,clientRole:h,serviceId:M("PROCESS_ID"),extensionID:M("PLUGIN_INFO").join(",")||""});var m;this.send({type:Er.SESSION,data:p},!0)}joinChooseServer(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now(),o=lt(lt({},i),{},{eventType:Un.JOIN_CHOOSE_SERVER,lts:a,eventElapse:r.elapse||a-r.lts,chooseServerAddr:r.csAddr,errorCode:r.ec,elapse:a-n.startTime,success:r.succ,chooseServerAddrList:JSON.stringify(r.serverList),uid:r.uid?parseInt(r.uid):null,cid:r.cid?parseInt(r.cid):null,chooseServerIp:r.csIp||"",opid:r.opid,unilbsServerIds:r.unilbsServerIds,extend:r.extend||void 0,isHttp3:r.isHttp3});this.send({type:Er.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now(),o=lt(lt({},i),{},{eventType:Un.REQ_USER_ACCOUNT,lts:a,success:r.success,serverAddress:r.serverAddr,stringUid:r.stringUid,uid:r.uid,errorCode:r.errorCode,elapse:r.elapse||a-n.startTime,eventElapse:a-r.lts,extend:JSON.stringify(r.extend)});this.send({type:Er.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info;r.vid&&(i.vid=r.vid),i.uid=r.uid,i.cid=r.cid;let a=Date.now(),{firstSuccess:o,avoidJoinStartTime:s}=r,l=a-(o&&s?s:n.startTime),c=lt(lt({},i),{},{eventType:Un.JOIN_GATEWAY,lts:a,gatewayAddr:r.addr,success:r.succ,errorCode:r.ec,errorMsg:r.errorMsg||"",elapse:l,eventElapse:a-r.lts,firstSuccess:o,signalChannel:r.signalChannel,preload:r.preload?1:0});r.succ&&(n.lastJoinSuccessTime=a),this.send({type:Er.JOIN_GATEWAY,data:c},!0)}joinChannelTimeout(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=Date.now(),a=lt(lt({},n.info),{},{lts:i,timeout:r,elapse:i-n.startTime});this.send({type:Er.JOIN_CHANNEL_TIMEOUT,data:a},!0)}publish(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now(),o=lt(lt({},i),{},{eventType:Un.PUBLISH,lts:a,eventElapse:r.eventElapse,elapse:a-n.startTime,success:r.succ,errorCode:r.ec,videoName:r.videoName,audioName:r.audioName,screenName:r.screenName,screenshare:r.screenshare,audio:r.audio,video:r.video,p2pid:r.p2pid,publishRequestid:r.publishRequestid});this.send({type:Er.PUBLISH,data:o},!0)}subscribe(t,r,n){let i=this.baseInfoMap.get(t);if(!i)return;let a=i.info,o=Date.now(),s=lt(lt({},a),{},{eventType:Un.SUBSCRIBE,lts:o,eventElapse:r.eventElapse,elapse:o-i.startTime,success:r.succ,errorCode:r.ec,video:r.video,audio:r.audio,subscribeRequestid:r.subscribeRequestid,p2pid:r.p2pid,preSsrc:r.preSsrc?1:0},n&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof r.peerid=="string"?s.peerSuid=r.peerid:s.peer=r.peerid,this.send({type:Er.SUBSCRIBE,data:s},!0)}wsCompressorInit(t){var r;let n=[...eo(r=this.baseInfoMap).call(r)],i=n.length?n[0]:"UnableToGetSid",a=this.baseInfoMap.get(i);if(!a)return;let o=a.info,s=Date.now(),l=lt(lt({},o),{},{eventType:Un.WS_COMPRESSOR_INIT,lts:s,eventElapse:t.eventElapse,elapse:s-a.startTime,status:t.status?1:2});this.send({type:Er.WS_COMPRESSOR_INIT,data:l},!0)}firstRemoteVideoDecode(t,r,n,i){let a=this.baseInfoMap.get(t);if(!a)return;let o=a.info,s=Date.now(),l=lt(lt(lt({},o),i),{},{elapse:s-a.startTime,eventType:r,lts:s,firstDecodeFrame:Math.max((i.firstFrame||s)-a.startTime,0),apEnd:Math.max(i.apEnd-a.startTime,0),apStart:Math.max(i.apStart-a.startTime,0),joinGwEnd:Math.max(i.joinGwEnd-a.startTime,0),joinGwStart:Math.max(i.joinGwStart-a.startTime,0),pcEnd:Math.max(i.pcEnd-a.startTime,0),pcStart:Math.max(i.pcStart-a.startTime,0),subscriberEnd:Math.max(i.subscriberEnd-a.startTime,0),subscriberStart:Math.max(i.subscriberStart-a.startTime,0),videoAddNotify:Math.max(i.videoAddNotify-a.startTime,0)});this.send({type:n,data:l},!0)}firstRemoteFrame(t,r,n,i){let a=this.baseInfoMap.get(t);if(!a)return;let o=a.info,s=Date.now(),l=lt(lt(lt({},o),i),{},{elapse:s-a.startTime,eventType:r,lts:s});this.send({type:n,data:l},!0)}pcStats(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now(),o=lt(lt(lt({},i),r),{},{vid:i.vid===void 0?0:Number(i.vid),elapse:a-n.startTime,eventType:Un.PC_STATS,lts:a,preallocation:r.preallocation?1:0});this.send({type:Er.PC_STATS,data:o},!0)}updateRemoteRTPCapabilities(t,r){if(t){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now(),o=lt(lt(lt({},i),r),{},{vid:i.vid===void 0?0:Number(i.vid),eventType:Un.UPDATE_REMOTE_RTPCAPABILITIES,lts:a});this.send({type:Er.UPDATE_REMOTE_RTPCAPABILITIES,data:o},!0)}}onGatewayStream(t,r,n,i){let a=this.baseInfoMap.get(t);if(!a)return;let o=a.info,s=Date.now(),l=lt(lt(lt({},o),i),{},{eventType:r,lts:s});this.send({type:n,data:l},!0)}streamSwitch(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now(),o=lt(lt({},i),{},{eventType:Un.STREAM_SWITCH,lts:a,isDual:r.isdual,elapse:a-n.startTime,success:r.succ});this.send({type:Er.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now(),o=lt(lt({},i),{},{eventType:Un.REQUEST_PROXY_APPCENTER,lts:a,eventElapse:a-r.lts,elapse:a-n.startTime,APAddr:r.APAddr,workerManagerList:r.workerManagerList,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:Er.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now(),o=lt(lt({},i),{},{eventType:Un.REQUEST_PROXY_WORKER_MANAGER,lts:a,eventElapse:a-r.lts,elapse:a-n.startTime,workerManagerAddr:r.workerManagerAddr,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:Er.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(t){this.proxyServer=t,t?_.debug("reportProxyServerurl: ".concat(t)):_.debug("disable reportProxyServerurl: ".concat(t))}peerPublishStatus(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now(),o=lt(lt({},i),{},{subscribeElapse:r.subscribeElapse,peer:r.peer,peerPublishDuration:Math.max(r.audioPublishDuration,r.videoPublishDuration),audiotag:r.audioPublishDuration>0?1:-1,videotag:r.videoPublishDuration>0?1:-1,lts:a,elapse:a-n.startTime,joinChannelSuccessElapse:a-(n.lastJoinSuccessTime||a),peerPublishDurationVideo:r.videoPublishDuration,peerPublishDurationAudio:r.audioPublishDuration});this.send({type:Er.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now();(function(o,s,l){let c=o[s];if(!c||typeof c!="string")return[o];o[s]="";let u=Ql(JSON.stringify(o)),h=0,f=[],p=0;for(let m=0;m<c.length;m++)p+=c.charCodeAt(m)<=127?1:3,p<=l-u||(f[f.length]=Ce(Ce({},o),{},{[s]:c.substring(h,m)}),h=m,p=c.charCodeAt(m)<=127?1:3);return h!==c.length-1&&(f[f.length]=Ce(Ce({},o),{},{[s]:c.substring(h)})),f})(lt(lt(lt({},i),r),{},{elapse:a-n.startTime,lts:a,productType:"WebRTC"}),"payload",1300).forEach(o=>this.send({type:Er.WORKER_EVENT,data:o},!0))}apworkerEvent(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now(),o=lt(lt(lt({},i),r),{},{elapse:a-n.startTime,lts:a});this.send({type:Er.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now(),o=lt(lt(lt({},i),r),{},{elapse:a-n.startTime,lts:a,extend:r.extend||void 0});this.send({type:Er.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,a=Date.now(),o=lt(lt(lt({},i),r),{},{elapse:a-n.startTime,lts:a});this.send({type:Er.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(t,r){if(this.customReportCount+=r.length,this.customReportCount>M("CUSTOM_REPORT_LIMIT"))throw new ee(k.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));let n=Date.now(),i=r.map(a=>({type:Er.USER_ANALYTICS,data:lt(lt({sid:t},a),{},{lts:n})}));try{M("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(i):await this.postDataToStatsCollector(i)}catch(a){throw _.error("send custom report message failed",a.toString()),new ee(k.CUSTOM_REPORT_SEND_FAILED,a.message)}}sendApiInvoke(t){let r=M("NOT_REPORT_EVENT");if(t.tag&&be(r)&&be(r).call(r,t.tag))return!1;if(t.sid===null)return this.apiInvokeUploadPendingItems.push(t),!1;let n=this.baseInfoMap.get(t.sid);if(!n)return this.apiInvokeUploadPendingItems.push(t),!1;let{cname:i,uid:a,cid:o}=n.info,s;if(t.lts=t.lts||Date.now(),t.error)if(t.error instanceof ee){let{code:c,message:u}=t.error;s=c||u||t.error.toString()}else s=t.error.toString();let l={invokeId:t.invokeId,sid:t.sid,cname:i,cid:o,uid:a,lts:t.lts,success:t.success,elapse:t.lts-n.startTime,execElapse:t.lts-t.apiInvokeTime,apiName:t.name,options:t.options?JSON.stringify(t.options):void 0,execStates:t.states?JSON.stringify(t.states):void 0,execResult:t.result?JSON.stringify(t.result):void 0,errorCode:t.error?s:void 0,errorMsg:t.error?JSON.stringify(t.error):void 0};return this.send({type:Er.API_INVOKE,data:l},!1),!0}appendSessionId(){Ane.__CLIENT_LIST__.forEach(t=>{if(t._sessionId){let r=this.apiInvokeUploadPendingItems.length;for(let n=0;n<r;n++){let i=this.apiInvokeUploadPendingItems.shift();i&&(i.sid=t._sessionId,this.sendApiInvoke(Object.assign({},i)))}}})}send(t,r){if(r)return this.keyEventUploadPendingItems.push(t),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(t),this.normalEventUploadPendingItems.length>M("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(t,r){let n=[],i=[];for(;t.length;){let o=t.shift();n.length<20?n.push(o):i.push(o)}t.push(...i);for(let o of[...n]){var a;this.ltsList.indexOf(o.data.lts)!==-1?(o.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(o.data.lts)):(this.ltsList.push(o.data.lts),Bb(a=this.ltsList).call(a,(s,l)=>s-l))}return r||(this.lastSendNormalEventTime=Date.now()),M("ENABLE_EVENT_REPORT")&&n.length&&(M("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((o=>s=>{M("EVENT_REPORT_RETRY")&&(r?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(o):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(o),this.normalEventUploadPendingItems.length>M("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-M("NORMAL_EVENT_QUEUE_CAPACITY")),_.warning("report: drop normal events"))))})(n)),t}async postDataToStatsCollector2(t){Kr.networkState===Va.OFFLINE&&await ye.race([Kr.onlineWaiter,zn(2*Zr.maxRetryTimeout)]);let r=a=>{let o=new Uint8Array;return a.forEach(s=>{let l=wM(JSON.stringify(s.data)),c=new ArrayBuffer(5),u=(f=>{let p=0;return Object.entries(Er).forEach(m=>{let[g,y]=m;y===f.type&&(p=T$e[g])}),p})(s),h=new DataView(c);h.setUint16(0,l.byteLength,!0),h.setUint8(2,255&u),h.setUint8(3,u>>>8&255),h.setUint8(4,u>>>16&255),o=K$(o,new Uint8Array(c)),o=K$(o,l)}),o},n="event",i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(M("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(n):"https://".concat(M("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(n);for(let a=0;a<2;a+=1){a===1&&(i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(M("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(n):"https://".concat(M("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(n));try{await QP(i,{timeout:1e4,data:r(t),headers:lt(lt({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(o){if(a===1)throw o;continue}return}}async postDataToStatsCollector(t){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:t.map(o=>JSON.stringify(o)),vid:(o=>{let s=o&&o.data.sid&&this.baseInfoMap.get(o.data.sid);return s&&s.info.vid&&+s.info.vid||0})(t[0])};Kr.networkState===Va.OFFLINE&&await ye.race([Kr.onlineWaiter,zn(2*Zr.maxRetryTimeout)]);let i=r?"/events/proto-raws":"/events/messages",a=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(M("EVENT_REPORT_DOMAIN"),"&p=").concat(M("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(M("EVENT_REPORT_DOMAIN"),":").concat(M("STATS_COLLECTOR_PORT")).concat(i));for(let o=0;o<2;o+=1){o===1&&(a=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(M("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(M("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(M("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(M("STATS_COLLECTOR_PORT")).concat(i)));try{r?await y$e(a,{timeout:1e4,data:n}):await QP(a,{timeout:1e4,data:n})}catch(s){if(o===1)throw s;continue}return}}createBaseInfo(t,r){let n=Object.assign({},S$e);return n.sid=t,this.baseInfoMap.set(t,{info:n,startTime:r}),n}reportResourceTiming(t,r){let n=performance.getEntriesByName(t),i=n[n.length-1];i&&this.reportApiInvoke(r,{name:"Client.resourceTiming",options:i,tag:Nr.TRACER}).onSuccess()}};function Ve(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(t,r,n){let i=n.value;if(typeof i=="function"){let a=e.className||t.__className__||(t.constructor.name==="AgoraRTCClient"?"Client":t.constructor.name);n.value=function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];let c=s;if(e.argsMap)try{c=e.argsMap(this,...s)}catch(h){_.warning(h),c=[]}try{JSON.stringify(c)}catch{_.warning("arguments for method ".concat(a,".").concat(String(r)," not serializable for apiInvoke.")),c=[]}let u=(e.report||xe).reportApiInvoke(this._sessionId||null,{name:"".concat(a,".").concat(String(r)),options:c,tag:Nr.TRACER,reportResult:e.reportResult},e.throttleTime);try{let h=i.apply(this,s);return h instanceof ye?h.then(f=>(u.onSuccess(e.reportResult&&f),f)).catch(f=>{throw u.onError(f),f}):(u.onSuccess(e.reportResult&&h),h)}catch(h){throw u.onError(h),h}}}return n}}Fr(CM,"__CLIENT_LIST__",[]);var xe=new CM;Nne.on("REPORT_LOG_UPLOAD",e=>{e.networkState=Kr.networkState,xe.reportApiInvoke(null,{name:"logUploadError",options:e,tag:Nr.TRACER}).onSuccess("logUploadError")});var C$e=["CHINA","GLOBAL"],Zn=function(){let e="us".concat("erna","me"),t="pa".concat("sswo","rd"),r=["t","s","t"];r.splice(1,0,"e");let n=r.join(""),i=[];for(let s=0;s<6;s++)i.push("1");let a=i.join(""),o={};return o[e]=n,o[t]=a,Object.assign(o,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=Zn,_M||(Vr.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Vr.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Vr.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Vr.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Vr.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Vr.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Vr.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Vr.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Vr.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Vr.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Vr.AREAS=["NORTH_AMERICA","OVERSEA"]);var One=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],Hu=[];function Zd(e,t){return!!t&&Hu.some(r=>r.uid===e&&r.channelName===t)}CM.__CLIENT_LIST__=Hu;var x$e=Cre.forEach,l8=sx("forEach")?[].forEach:function(e){return x$e(this,e,arguments.length>1?arguments[1]:void 0)};ir({target:"Array",proto:!0,forced:[].forEach!=l8},{forEach:l8});var R$e=Ws("Array").forEach,I$e=vc,N$e=vi,A$e=na,O$e=R$e,ZN=Array.prototype,k$e={DOMTokenList:!0,NodeList:!0},P$e=function(e){var t=e.forEach;return e===ZN||A$e(ZN,e)&&t===ZN.forEach||N$e(k$e,I$e(e))?O$e:t},D$e=$r(P$e),L$e=yc,c8=dx;ir({target:"Object",stat:!0,forced:cn(function(){c8(1)})},{keys:function(e){return c8(L$e(e))}});var kne=$r(Tl.Object.keys),j$e=$r(jee),M$e=ir,U$e=$b,F$e=tn([].reverse),u8=[1,2];M$e({target:"Array",proto:!0,forced:String(u8)===String(u8.reverse())},{reverse:function(){return U$e(this)&&(this.length=this.length),F$e(this)}});var V$e=Ws("Array").reverse,B$e=na,$$e=V$e,eA=Array.prototype,H$e=function(e){var t=e.reverse;return e===eA||B$e(eA,e)&&t===eA.reverse?$$e:t},Pne=H$e,z$e=$r(Pne),G$e=ir,d8=$b,W$e=px,K$e=So,h8=Fj,q$e=fu,Y$e=Bd,X$e=yx,J$e=Jr,Q$e=Qj,Z$e=Ere("slice"),e8e=J$e("species"),tA=Array,t8e=Math.max;G$e({target:"Array",proto:!0,forced:!Z$e},{slice:function(e,t){var r,n,i,a=Y$e(this),o=q$e(a),s=h8(e,o),l=h8(t===void 0?o:t,o);if(d8(a)&&(r=a.constructor,(W$e(r)&&(r===tA||d8(r.prototype))||K$e(r)&&(r=r[e8e])===null)&&(r=void 0),r===tA||r===void 0))return Q$e(a,s,l);for(n=new(r===void 0?tA:r)(t8e(l-s,0)),i=0;s<l;s++,i++)s in a&&X$e(n,i,a[s]);return n.length=i,n}});var r8e=Ws("Array").slice,n8e=na,i8e=r8e,rA=Array.prototype,a8e=function(e){var t=e.slice;return e===rA||n8e(rA,e)&&t===rA.slice?i8e:t},o8e=$r(a8e);function Se(e,t,r,n,i){var a,o,s,l={};return D$e(a=kne(n)).call(a,function(c){l[c]=n[c]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=j$e(o=z$e(s=o8e(r).call(r)).call(s)).call(o,function(c,u){return u(e,t,c)||c},l),i&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(i):void 0,l.initializer=void 0),l.initializer===void 0&&(bre(e,t,l),l=null),l}var ZP=function(e){return e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L1T3_KEY="L1T3_KEY",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY",e}({}),qa=function(e){return e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver",e}({}),x_=function(e){return e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",e}({}),nA=function(e){return e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR",e}({}),ps=function(e){return e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",e}({}),zi=function(e){return e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",e}({}),Ue=function(e){return e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",e}({}),tr=function(e){return e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed",e}({}),qe=function(e){return e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.PRE_CONNECT_PC="pre_connect_pc",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",e}({}),Ke=function(e){return e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag",e}({}),Pv=function(e){return e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats",e}({}),mt=function(e){return e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list",e}({}),Xi=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({}),Xe=function(e){return e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",e}({}),Y=class extends ee{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",arguments.length>2?arguments[2]:void 0),R(this,"name","AgoraRTCException")}print(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return super.print(e,_)}throw(){super.throw(_)}};function Rx(e){if(typeof e!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw _.error("Invalid Channel Name ".concat(e)),new Y(k.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function Ix(e){if(!function(t){return typeof t=="number"&&Math.floor(t)===t&&0<=t&&t<=4294967295}(e)&&!Ene(e,1,255))throw new Y(k.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");typeof e=="string"&&_.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}var Wc=function(e){return e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e}({}),s8e={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},iA={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function aA(e,t){Fn(e.url,"".concat(t,".url"),1,1e3,!1),br(e.x)||Kt(e.x,"".concat(t,".x"),0,1e4),br(e.y)||Kt(e.y,"".concat(t,".y"),0,1e4),br(e.width)||Kt(e.width,"".concat(t,".width"),0,1e4),br(e.height)||Kt(e.height,"".concat(t,".height"),0,1e4),br(e.zOrder)||Kt(e.zOrder,"".concat(t,".zOrder"),0,255),br(e.alpha)||Kt(e.alpha,"".concat(t,".alpha"),0,1,!1)}var l8e={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},zu=function(e){return e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address",e}({}),eD=function(e){return e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",e}({}),on=function(e){return e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",e}({});function f8(e){if(!e.channelName)throw new Y(k.INVALID_PARAMS,"invalid channelName in info");if(typeof e.uid!="number")throw new Y(k.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&Fn(e.token,"info.token",1,2047),Ix(e.uid),Rx(e.channelName),!0}var Gi=function(e){return e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile",e}({}),Ac=function(e){return e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",e}({}),Ea=function(e){return e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",e}({}),_p=function(e){return e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",e}({}),jt=function(e){return e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low",e}({}),Qn=function(e){return e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.PRE_CONNECT_PC="pre-connect_pc",e}({}),R_=function(e){return e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON",e}({}),wn=function(e){return e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7",e}({}),At=function(e){return e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS",e}({}),p8=[At.AFRICA,At.ASIA,At.CHINA,At.EUROPE,At.GLOBAL,At.INDIA,At.JAPAN,At.NORTH_AMERICA,At.OCEANIA,At.OVERSEA,At.SOUTH_AMERICA],ui=function(e){return e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL",e}({}),Nx={CHINA:{},ASIA:{CODE:ui.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:ui.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:ui.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:ui.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:ui.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:ui.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:ui.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:ui.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:ui.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:ui.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:ui.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:ui.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:ui.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};_M&&(Nx.CHINA={CODE:ui.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});var tD=function(e){return e.UPDATE_BITRATE_LIMIT="update_bitrate_limit",e}({}),Dne=class extends Tr{constructor(e,t){super(),R(this,"onICEConnectionStateChange",void 0),R(this,"onConnectionStateChange",void 0),R(this,"onDTLSTransportStateChange",void 0),R(this,"onDTLSTransportError",void 0),R(this,"onICETransportStateChange",void 0),R(this,"onFirstAudioReceived",void 0),R(this,"onFirstVideoReceived",void 0),R(this,"onFirstAudioDecoded",void 0),R(this,"onFirstVideoDecoded",void 0),R(this,"onFirstVideoDecodedTimeout",void 0),R(this,"onSelectedLocalCandidateChanged",void 0),R(this,"onSelectedRemoteCandidateChanged",void 0),R(this,"getLocalVideoStats",void 0)}},Lne=class extends Dne{constructor(e,t){super(e,t),R(this,"establishPromise",void 0)}},Ne=function(e){return e.VIDEO="video",e.AUDIO="audio",e}({}),Ba=function(e){return e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY",e}({}),Cc=function(e){return e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",e}({}),oe=function(e){return e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack",e}({}),Lt=function(e){return e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected",e}({}),Be=function(e){return e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE",e}({}),Es=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),ms=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),Nn=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),jne=function(e){return e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback",e.PRE_CONNECT_PC="transmitter:pre_connect_pc",e}({}),ql=function(e){return e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation",e}({}),No=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),il=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),ip=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),Ur=function(e){return e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check",e}({}),ap=function(e){return e.ABORT="abort",e}({}),td=function(e){return e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e}({}),c8e=function(e){return e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed",e}({}),u8e={[x_.ACCESS_POINT]:{[zi.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[zi.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[zi.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[zi.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[zi.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[zi.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[zi.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[zi.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[zi.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[zi.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[zi.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[zi.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[zi.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[zi.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[zi.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[zi.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[zi.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[zi.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[x_.UNILBS]:{[ps.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[ps.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[ps.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[ps.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[ps.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[ps.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[ps.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[ps.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[ps.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[ps.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[ps.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[ps.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[x_.STRING_UID_ALLOCATOR]:{[nA.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[nA.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[nA.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function Xm(e){let t=u8e[Math.floor(e/1e4)];if(!t)return{desc:"unknown error",retry:!1};let r=t[e%1e4];if(!r){if(Math.floor(e/1e4)===x_.ACCESS_POINT){let n=e%1e4;if(n.toString()[0]==="1")return{desc:e.toString(),retry:!1};if(n.toString()[0]==="2")return{desc:e.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return r}var d8e={[Ue.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Ue.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Ue.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Ue.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Ue.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Ue.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Ue.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Ue.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Ue.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Ue.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Ue.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Ue.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[Ue.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Ue.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Ue.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Ue.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Ue.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Ue.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Ue.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Ue.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Ue.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Ue.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Ue.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Ue.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Ue.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Ue.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Ue.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Ue.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Ue.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Ue.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Ue.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Ue.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Ue.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Ue.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Ue.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Ue.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Ue.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Ue.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Ue.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Ue.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Ue.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ue.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Ue.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Ue.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Ue.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Ue.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Ue.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Ue.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Ue.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Ue.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Ue.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Ue.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Ue.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Ue.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Ue.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Ue.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Ue.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[Ue.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[Ue.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[Ue.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[Ue.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[Ue.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[Ue.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function Dv(e){return d8e[e]||{desc:"UNKNOWN_ERROR_".concat(e),action:"failed"}}function m8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m8(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g8(e){return e.every(t=>t.readyState===WebSocket.CLOSED||t.readyState===WebSocket.CLOSING)}function y8(e,t){if(typeof e=="string")return e;let{proxy:r,host:n,port:i}=e;if(t){let a=M("JOIN_GATEWAY_FALLBACK_PORT")||443;return a===443?"wss://".concat(n,"/ws/?p=").concat(Number(i)+150):"wss://".concat(n,":").concat(a,"/ws/?p=").concat(Number(i)+150)}return r?"wss://".concat(r,"/ws/?h=").concat(n,"&p=").concat(i):"wss://".concat(n,":").concat(i)}var h8e=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,f8e=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,p8e=/wss:\/\/(.+):([0-9]+)\/?/,m8e=/wss:\/\/(.[^\/]+)\/?/,g8e=0,y8e=class{constructor(e,t){R(this,"id",0),R(this,"store",void 0),R(this,"recordIndex",void 0),R(this,"websockets",[]),R(this,"try443PortDuration",2e3),R(this,"forceCloseWSDuration",5e3),R(this,"try443PortTimeout",null),R(this,"forceCloseTimeout",null),R(this,"isTry443PortFailed",!1),R(this,"isNormalPortFailed",!1),R(this,"useDoubleDomain",!1),R(this,"useProxy",!1),R(this,"startTime",Date.now()),this.id=++g8e,this.try443PortDuration=M("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach(e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()}),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var e;let t=Date.now()-this.startTime;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];_.debug("[choose-best-ws ".concat((e=this.store)===null||e===void 0?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:"),...n)}createWebSocket(e,t,r){this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:r});let n=M("GATEWAY_DOMAINS"),i=Date.now(),a=[],o=n.find(c=>{var u;return be(u=e.host).call(u,c)});o||(this.useDoubleDomain=!1);let s=[];if(this.useDoubleDomain)n.forEach(c=>{s.push(y8(oA(oA({},e),{},{host:e.host.replace(o,c)}),t))});else{let c=oA({},e);if(t&&o){let u=n.find(h=>h!==o);u&&(c.host=c.host.replace(o,u))}s.push(y8(c,t))}try{s.forEach(c=>{let u=new WebSocket(c);u.binaryType="arraybuffer",a.push(u),this.logger("ws is connecting:",u.url)})}catch(c){if(this.logger("ws create failed"),a.forEach(u=>u.close()),a.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,r);if(!t&&Number(e.port)!==443)return this.createWebSocket(e,!0,r);throw new Y(k.WS_ERR,"init websocket failed! Error: ".concat(c.toString()))}let l=Av();return this.store&&this.store.recordJoinChannelService({urls:a.map(c=>c.url),service:"gateway"},this.recordIndex),a.forEach(c=>{c.onopen=()=>{this.logger("onopen: ws ".concat(c.url," open cost ").concat(Date.now()-i,"ms")),this.websockets.forEach(u=>{u!==c&&(u.onopen=null,u.onclose=null,u.onmessage=null,u.close(),this.logger("close backup websocket: ".concat(u.url)))}),this.websockets.length=0,l.resolve(c)},c.onclose=u=>{this.logger("onclose: ws ".concat(c.url," closed cost ").concat(Date.now()-i,"ms state: ").concat(c.readyState)),t?this.isTry443PortFailed=g8(a):this.isNormalPortFailed=g8(a),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),(t&&this.isTry443PortFailed||!t&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(u.reason)),l.reject({code:u.code,reason:R_.A_ROUND_WS_FAILED}))},c.onmessage=u=>this.logger("".concat(c.url," onmessage: ").concat(u.data))}),this.websockets.push(...a),r||(()=>{let c=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",l.isResolved),this.websockets.forEach(u=>u.readyState!==WebSocket.OPEN&&u.close())};if(t||this.useProxy)return this.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(c,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout(()=>{if(this.logger("2s timeout, isWebsocket created: ",l.isResolved),l.isResolved)return c();Ct().os===Sn.MAC_OS&&Ar()&&c(),this.createWebSocket(e,!0,!0).then(u=>l.resolve(u)).catch(u=>{this.isNormalPortFailed&&l.reject(u),this.logger("try 443 port to create ws failed")}),this.forceCloseTimeout=window.setTimeout(c,this.forceCloseWSDuration)},this.try443PortDuration)})(),l.promise}chooseBestWebsocket(e,t,r,n){return this.useDoubleDomain=!!t,typeof e=="string"&&(e=function(i){let a,o,s;return[,a,o,s]=i.match(h8e)||[],a||([,o,s]=i.match(f8e)||[]),o&&s||([,o,s]=i.match(p8e)||[]),o&&s||([,o]=i.match(m8e)||[]),o||_.warning("un-destructible url: ",i),{proxy:a,host:o,port:s||"443"}}(e)),this.recordIndex=n,this.useProxy=!!e.proxy,r&&this.useProxy&&(_.warn("cannot use 443 only when use proxy"),r=!1),this.createWebSocket(e,!!r,!1).finally(()=>this.clearTimeout())}};function v8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var Mne=class extends Tr{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;be(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,this._state==="reconnecting"?this.emit(Xe.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(Xe.CONNECTED):this._state==="closed"?this.emit(Xe.CLOSED):this._state==="failed"&&this.emit(Xe.FAILED))}resetReconnectCount(e){_.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],n=arguments.length>3&&arguments[3]!==void 0&&arguments[3],i=arguments.length>4&&arguments[4]!==void 0&&arguments[4],a=arguments.length>5?arguments[5]:void 0;super(),R(this,"connectionID",0),R(this,"currentURLIndex",0),R(this,"urls",[]),R(this,"_reconnectMode","tryNext"),R(this,"reconnectReason",void 0),R(this,"_initMutex",new gi("websocket")),R(this,"name",void 0),R(this,"_state","closed"),R(this,"reconnectInterrupter",void 0),R(this,"websocket",void 0),R(this,"retryConfig",void 0),R(this,"reconnectCount",0),R(this,"forceCloseTimeout",5e3),R(this,"onlineReconnectListener",void 0),R(this,"useCompress",void 0),R(this,"tryDoubleDomain",!1),R(this,"use443PortOnly",!1),R(this,"wsInflateLength",0),R(this,"wsDeflateLength",0),R(this,"closeEstablishingWs",()=>{}),R(this,"store",void 0),R(this,"joinGatewayRecordIndex",void 0),this.store=a,this.name=e,this.retryConfig=function(u){for(var h=1;h<arguments.length;h++){var f=arguments[h]!=null?arguments[h]:{};h%2?v8(Object(f),!0).forEach(function(p){R(u,p,f[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):v8(Object(f)).forEach(function(p){Object.defineProperty(u,p,Object.getOwnPropertyDescriptor(f,p))})}return u}({},t),this.useCompress=r,this.tryDoubleDomain=n,this.use443PortOnly=i;let{timeout:o,timeoutFactor:s}=t,l=Math.max(300,Math.floor(3*o/5)),c=Math.max(1.2,Math.floor(8*s)/10);Va.ONLINE&&(this.retryConfig.timeout=l,this.retryConfig.timeoutFactor=c),Kr.on(qp.NETWORK_STATE_CHANGE,(u,h)=>{u!==h&&(this.resetReconnectCount("network state change: ".concat(h," -> ").concat(u)),u===Va.ONLINE?(this.retryConfig.timeout=l,this.retryConfig.timeoutFactor=c):(this.retryConfig.timeout=o,this.retryConfig.timeoutFactor=s))})}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,r=await this._initMutex.lock();this.forceCloseTimeout=t,this.urls=e,this.state="connecting";try{let n=Av(),i=this.urls[this.currentURLIndex];M("ENABLE_PREALLOC_PC")&&this.emit(jne.PRE_CONNECT_PC),this.createWebSocketConnection(i).then(n.resolve).catch(n.reject),this.once(Xe.CLOSED,()=>{n.reject(new ee(k.WS_DISCONNECT))}),this.once(Xe.CONNECTED,n.resolve),await n.promise}catch{}finally{r()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;let r=this.websocket;t?setTimeout(()=>r.close(),500):r.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void _.warning("[".concat(this.name,"] can not reconnect, no websocket"));e!==void 0&&(this.reconnectMode=e),_.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinGatewayRecordIndex=="number"&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);let r=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),r&&r.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new ee(k.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(r){throw new ee(k.WS_ERR,"send websocket message error"+r.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){let e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;let r=Av();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;let n=c=>{var u;(u=this.store)===null||u===void 0||u.signalChannelOpen(),_.debug("[".concat(this.name,"] websocket opened:"),c),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),r.resolve()},i=async c=>{var u;if(_.debug("[".concat(this.name,"] websocket close ").concat((u=this.websocket)===null||u===void 0?void 0:u.url,", code: ").concat(c.code,", reason: ").concat(c.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)r.reject(new ee(k.WS_DISCONNECT,"websocket close: ".concat(c.code))),this.close();else{this.state==="connected"&&(this.reconnectReason=c.reason,this.state="reconnecting");let h=Bo(this,Xe.WILL_RECONNECT,this.reconnectMode,c.reason)||this.reconnectMode,f=await this.reconnectWithAction(h);if(this.state==="closed")return void _.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!f)return r.reject(new ee(k.WS_DISCONNECT,"websocket reconnect failed: ".concat(c.code))),this.close(!0);r.resolve()}},a=c=>{this.emit(Xe.ON_MESSAGE,c)},o=c=>{_.warn("[".concat(this.connectionID,"] ws open error ").concat(c))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),M("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=M("GATEWAY_WSS_ADDRESS")),_.debug("[".concat(this.name,"] start connect, url:"),e);let s=(t=this.store)===null||t===void 0?void 0:t.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var l;let c=await this.chooseBestWebsocketConnection(e);this.websocket=c,n&&n(this.websocket.url),this.websocket.onclose=i,this.websocket.onmessage=a,this.websocket.onerror=o,(l=this.store)===null||l===void 0||l.recordJoinChannelService({endTs:Date.now(),status:"success"},s),this.joinGatewayRecordIndex=s}catch(c){let u=this.state==="closed",h=c instanceof ee,f=h&&c.code===k.WS_ABORT,p=h&&c.code===k.WS_ERR,m=h?c.message:c&&(c.reason||c.toString());_.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(m)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:f?"aborted":"error",errors:[c]},s),u||p?(r.reject(u?new ee(k.WS_DISCONNECT,"websocket is closed: ".concat(m)):new ee(k.WS_ERR,"init websocket failed: ".concat(m))),p&&_.error("[".concat(this.name,"] init websocket failed: ").concat(m))):i&&i(c)}return r.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||this.urls.length===0||this.state==="closed")return!1;_.warning("[choose-best-ws] action: =>",e),this.onlineReconnectListener||Kr.isOnline||!Kr.onlineWaiter||(this.onlineReconnectListener=Kr.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let r=!0;if(this.reconnectInterrupter=()=>r=!1,t){let a=EM(this.reconnectCount,this.retryConfig);_.debug("[".concat(this.name,"] wait ").concat(a,"ms to reconnect websocket, mode: ").concat(e)),await ye.race([zn(a),this.onlineReconnectListener||new ye(()=>{})])}if(this._state==="closed"||!r)return!1;this.reconnectCount+=1;let n=async(a,o)=>{this.emit(Xe.RECONNECT_CREATE_CONNECTION,o),await this.createWebSocketConnection(a)};try{if(e==="retry")this.emit(Xe.RECONNECT_WAITTING_FINISH,e),await n(this.urls[this.currentURLIndex],e);else if(e==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);_.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit(Xe.RECONNECT_WAITTING_FINISH,e),await n(this.urls[this.currentURLIndex],e)}else e==="recover"&&(_.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(Xe.RECONNECT_WAITTING_FINISH,e),this.urls=await ii(this,Xe.REQUEST_NEW_URLS),this.currentURLIndex=0,await n(this.urls[this.currentURLIndex],e))}catch(a){var i;_.error("[".concat(this.name,"] reconnect failed ").concat(a&&a.toString()));let o=a==null||(i=a.data)===null||i===void 0?void 0:i.desc;return Array.isArray(o)&&be(o).call(o,"dynamic key expired")?(this.emit(Xe.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}},xM=class extends Mne{constructor(e,t){super(e,t,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){let r=Av(),n=function(a,o){return new y8e(a,o)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{_.debug("[choose-best-ws] close establishing websockets"),n.closeAllWebsockets(),r.reject(new ee(k.WS_ABORT,"choose best websocket aborted"))};let i=M("GATEWAY_DOMAINS");return _.debug("[choose-best-ws] currentDomain: ",e,", domains: ",i,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),n.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(r.resolve).catch(r.reject),r.promise.finally(()=>{this.closeEstablishingWs=void 0})}},Lv=class extends Mne{constructor(e,t){super(e,t,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new ye((r,n)=>{let i=!1,a=[];this.closeEstablishingWs=()=>{_.debug("[choose-best-ws] close establishing websockets"),a.forEach(p=>{p.onclose=null,p.onopen=null,p.onmessage=null,p.close()}),n(new ee(k.WS_ABORT,"choose best websocket aborted"))};let o=M("GATEWAY_DOMAINS"),s,l=e.indexOf("?h="),c=o.find(p=>l!==-1?be(e).call(e,p,l):be(e).call(e,p));_.debug("[choose-best-ws] currentDomain: ",c,", domains: ",o);let u=!this.tryDoubleDomain||!c;if(!u&&c){var h;let p=Date.now();try{o.forEach(m=>{let g=l===-1?e.replace(c,m):e.substr(0,l)+e.substr(l).replace(c,m),y=new WebSocket(g);y.binaryType="arraybuffer",a.push(y),_.debug("[choose-best-ws] ws is connecting:",y.url)})}catch{for(_.debug("[choose-best-ws] ws create failed, fallback to single url"),a.forEach(m=>m.close());a.length;)a.pop();u=!0}(h=this.store)===null||h===void 0||h.recordJoinChannelService({urls:a.map(m=>m.url),service:"gateway"},t),a.forEach(m=>{m.onopen=()=>{if(i)return;let g=Date.now()-p;_.debug("[choose-best-ws] ws open cost ".concat(g,"ms")),a.filter(y=>y!==m).forEach(y=>{_.debug("[choose-best-ws]close backup websocket: ".concat(y.url)),y.close()}),i=!0,r(m)},m.onclose=g=>{s=g,!i&&(a.find(y=>!(y.readyState===WebSocket.CLOSED||y.readyState===WebSocket.CLOSING))||(_.debug("[choose-best-ws] all websocket is closed"),i=!0,n(s)))},m.onmessage=g=>{_.debug("[choose-best-ws]".concat(m.url," onmessage: ").concat(g.data))}}),zn(this.forceCloseTimeout).then(()=>{a.forEach(m=>{m.readyState!==WebSocket.OPEN&&m.close()})})}if(u){var f;let p;_.debug("[choose-best-ws] use single url: ",e),(f=this.store)===null||f===void 0||f.recordJoinChannelService({urls:[e],service:"gateway"},t);try{p=new WebSocket(e),a.push(p),p.binaryType="arraybuffer"}catch(m){let g=new ee(k.WS_ERR,"init websocket failed! Error: ".concat(m.toString()));return _.error("[".concat(this.name,"]").concat(g)),void n(g)}p.onopen=()=>{r(p)},p.onclose=m=>{n(m)},p.onmessage=m=>{_.debug("[choose-best-ws]".concat(p.url," onmessage: ").concat(m.data))},zn(this.forceCloseTimeout).then(()=>{p&&p.readyState!==WebSocket.OPEN&&p.close()})}}).then(r=>(this.closeEstablishingWs=void 0,r)).catch(r=>{throw this.closeEstablishingWs=void 0,r})}},v8e=class extends Tr{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===tr.CONNECTED?this.emit(qe.WS_CONNECTED):e===tr.RECONNECTING?this.emit(qe.WS_RECONNECTING,this._websocketReconnectReason):e===tr.CLOSED&&this.emit(qe.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),R(this,"_disconnectedReason",void 0),R(this,"_websocketReconnectReason",void 0),R(this,"_connectionState",tr.CLOSED),R(this,"reconnectToken",void 0),R(this,"websocket",void 0),R(this,"openConnectionTime",void 0),R(this,"clientId",void 0),R(this,"lastMsgTime",Date.now()),R(this,"uploadCache",[]),R(this,"uploadCacheInterval",void 0),R(this,"rttRolling",new Ine(5)),R(this,"pingpongTimer",void 0),R(this,"wsInflateDataTimer",void 0),R(this,"pingpongTimeoutCount",0),R(this,"joinResponse",void 0),R(this,"multiIpOption",void 0),R(this,"initError",void 0),R(this,"spec",void 0),R(this,"store",void 0),R(this,"onWebsocketMessage",r=>{if(r.data instanceof ArrayBuffer)return void this.emit(qe.ON_BINARY_DATA,r.data);let n=JSON.parse(r.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(n,"_id")){let i="res-@".concat(n._id);this.emit(i,n._result,n._message)}else if(Object.prototype.hasOwnProperty.call(n,"_type")){if(this.emit(n._type,n._message),n._type===mt.ON_NOTIFICATION&&this.handleNotification(n._message),n._type===mt.ON_USER_BANNED)switch(n._message.error_code){case 14:this.close($t.UID_BANNED);break;case 15:this.close($t.IP_BANNED);break;case 16:this.close($t.CHANNEL_BANNED)}if(n._type===mt.ON_USER_LICENSE_BANNED)switch(n._message.error_code){case Ue.ERR_LICENSE_MISSING:this.close($t.LICENSE_MISSING);break;case Ue.ERR_LICENSE_EXPIRED:this.close($t.LICENSE_EXPIRED);break;case Ue.ERR_LICENSE_MINUTES_EXCEEDED:this.close($t.LICENSE_MINUTES_EXCEEDED);break;case Ue.ERR_LICENSE_PERIOD_INVALID:this.close($t.LICENSE_PERIOD_INVALID);break;case Ue.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close($t.LICENSE_MULTIPLE_SDK_SERVICE);break;case Ue.ERR_LICENSE_ILLEGAL:this.close($t.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new xM("gateway-".concat(this.clientId),this.spec.retryConfig,!0,M("JOIN_GATEWAY_USE_DUAL_DOMAIN"),M("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===tr.CONNECTED&&this.reconnect("retry",ri.OFFLINE)})}async request(e,t,r,n){let i=rr(6,""),a={_id:i,_type:e,_message:t},o=this.websocket.connectionID,s=()=>new ye((p,m)=>{if(this.connectionState===tr.CONNECTED)return p();let g=()=>{this.off(qe.WS_CLOSED,y),p()},y=()=>{this.off(qe.WS_CONNECTED,g),m(new Y(k.WS_ABORT))};this.once(qe.WS_CONNECTED,g),this.once(qe.WS_CLOSED,y),e!==Ke.PUBLISH&&e!==Ke.PUBLISH_DATASTREAM&&e!==Ke.SUBSCRIBE&&e!==Ke.SUBSCRIBE_DATASTREAM&&e!==Ke.UNSUBSCRIBE&&e!==Ke.UNSUBSCRIBE_DATASTREAM&&e!==Ke.UNPUBLISH&&e!==Ke.UNPUBLISH_DATASTREAM&&e!==Ke.CONTROL&&e!==Ke.RESTART_ICE||this.once(qe.DISCONNECT_P2P,()=>{m(new Y(k.DISCONNECT_P2P))}),e!==Ke.PUBLISH&&e!==Ke.RESTART_ICE||this.once(qe.ABORT_P2P_EXECUTION,()=>{m(new Y(k.DISCONNECT_P2P))})});if(this.connectionState!==tr.CONNECTING&&this.connectionState!==tr.RECONNECTING||e===Ke.JOIN||e===Ke.REJOIN||await s(),this.websocket.sendMessage(a,!0),n)return;let l=new ye((p,m)=>{let g=!1,y=(b,E)=>{g=!0,p({isSuccess:b==="success",message:E||{}}),this.off(qe.WS_CLOSED,v),this.off(qe.WS_RECONNECTING,v),this.emit(qe.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),y);let v=()=>{m(new Y(k.WS_ABORT,"type: ".concat(e))),this.off(qe.WS_CLOSED,v),this.off(qe.WS_RECONNECTING,v),this.off("res-@".concat(i),y)};this.once(qe.WS_CLOSED,v),this.once(qe.WS_RECONNECTING,v),zn(M("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==o||g||(_.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(qe.REQUEST_TIMEOUT,e,t))})}),c=null;try{c=await l}catch(p){if(this.connectionState===tr.CLOSED||e===Ke.LEAVE)throw new Y(k.WS_ABORT);return!this.spec.forceWaitGatewayResponse||r?p.throw():e===Ke.JOIN||e===Ke.REJOIN?null:(await s(),await this.request(e,t))}if(c.isSuccess)return c.message;let u=Number(c.message.error_code||c.message.code),h=Dv(u),f=new Y(k.UNEXPECTED_RESPONSE,"".concat(h.desc,": ").concat(c.message.error_str),{code:u,data:c.message,desc:h.desc});return h.action==="success"?c.message:(_.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(h.desc,", action: ").concat(h.action)),u===Ue.ERR_TOO_MANY_BROADCASTERS?((e===Ke.JOIN||e===Ke.REJOIN)&&(this.initError=f,this.close()),f.throw()):h.action==="failed"?f.throw():h.action==="quit"?(this.initError=f,this.close(),f.throw()):(u===Ue.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=c.message.option,_.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",ri.MULTI_IP)):this.reconnect(h.action,ri.SERVER_ERROR),e===Ke.JOIN||e===Ke.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new ye(r=>{let n=i=>{(!t||t(i))&&(this.off(e,n),r(i))};this.on(e,n)})}uploadWRTCStats(e){if(!this.store.sessionId)return void _.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));let t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(Pv.WRTC_STATS,t)}upload(e,t){let r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch{let n=M("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>n&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==tr.CONNECTED)return;let i=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(i._type,i._message)},M("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){let r={_type:e,_message:t};this.websocket.sendMessage(r)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new ye((r,n)=>{this.once(qe.WS_CONNECTED,()=>r(this.joinResponse)),this.once(qe.WS_CLOSED,()=>n(this.initError||new Y(k.WS_ABORT))),this.connectionState=tr.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||$t.LEAVE,this.connectionState=tr.CLOSED,_.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(qe.ABORT_P2P_EXECUTION);let e=await ii(this,qe.REQUEST_JOIN_INFO),t=await this.request(Ke.JOIN,e);if(!t)return this.emit(qe.REPORT_JOIN_GATEWAY,R_.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(qe.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=tr.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new Y(k.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");let e=kv(this,qe.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;let t=await this.request(Ke.REJOIN,e);return!!t&&(this.connectionState=tr.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach(r=>{this.emit(mt.ON_USER_ONLINE,{uid:r.uid}),r.audio&&this.emit(mt.ON_ADD_AUDIO_STREAM,{uid:r.uid,uint_id:r.uint_id,audio:!0,ssrcId:r.audio_ssrc}),r.video&&this.emit(mt.ON_ADD_VIDEO_STREAM,{uid:r.uid,uint_id:r.uint_id,video:!0,ssrcId:r.video_ssrc}),r.audio_mute?this.emit(mt.MUTE_AUDIO,{uid:r.uid}):this.emit(mt.UNMUTE_AUDIO,{uid:r.uid}),r.video_mute?this.emit(mt.MUTE_VIDEO,{uid:r.uid}):this.emit(mt.UNMUTE_VIDEO,{uid:r.uid}),r.audio_enable_local?this.emit(mt.ENABLE_LOCAL_AUDIO,{uid:r.uid}):this.emit(mt.DISABLE_LOCAL_AUDIO,{uid:r.uid}),r.video_enable_local?this.emit(mt.ENABLE_LOCAL_VIDEO,{uid:r.uid}):this.emit(mt.DISABLE_LOCAL_VIDEO,{uid:r.uid}),r.audio||r.video||this.emit(mt.ON_REMOVE_STREAM,{uid:r.uid,uint_id:r.uint_id})}),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){_.debug("[".concat(this.clientId,"] receive notification: "),e);let t=Dv(e.code);if(t.action!=="success"){if(t.action!=="failed")return t.action==="quit"?(t.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close($t.UID_BANNED),void this.close()):void this.reconnect(t.action,ri.SERVER_ERROR);_.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;let e=M("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(_.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>M("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",ri.TIMEOUT):this.request(Ke.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;let r=Date.now()-t;this.rttRolling.add(r),M("REPORT_STATS")&&this.send(Ke.PING_BACK,{pingpongElapse:r})}).catch(r=>{})}handleWsInflateData(){let{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();e!==0&&t!==0&&this.upload(Pv.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(Xe.RECONNECT_WAITTING_FINISH,e=>{this.emit(qe.WS_RECONNECT_WAITTING_FINISH,e)}),this.websocket.on(Xe.RECONNECT_CREATE_CONNECTION,e=>{this.emit(qe.WS_RECONNECT_CREATE_CONNECTION,e)}),this.websocket.on(Xe.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Xe.CLOSED,()=>{this.connectionState=tr.CLOSED}),this.websocket.on(Xe.FAILED,()=>{this._disconnectedReason=$t.NETWORK_ERROR,this.connectionState=tr.CLOSED}),this.websocket.on(Xe.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===tr.CONNECTED?this.connectionState=tr.RECONNECTING:this.connectionState=tr.CONNECTING}),this.websocket.on(Xe.WILL_RECONNECT,(e,t,r)=>{let n=kv(this,qe.IS_P2P_DISCONNECTED),i=n||e!=="retry";n&&e==="retry"&&(_.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e="tryNext",t=R_.P2P_DISCONNECTED),i&&(_.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(e)),this.emit(qe.REPORT_JOIN_GATEWAY,t||R_.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(qe.DISCONNECT_P2P)),r(e)}),this.websocket.on(Xe.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(e=>{_.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",ri.SERVER_ERROR)}):this.join().catch(e=>{if(this.emit(qe.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof Y){if(e.code===k.UNEXPECTED_RESPONSE&&e.data.code===Ue.ERR_NO_AUTHORIZED)return this.initError=new Y(k.CAN_NOT_GET_GATEWAY_SERVER,"AgoraRTCError CAN_NOT_GET_GATEWAY_SERVER: dynamic key expired"),_.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",ri.SERVER_ERROR);_.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",ri.SERVER_ERROR):(this.initError=e,this.close())}})}),this.websocket.on(Xe.REQUEST_NEW_URLS,(e,t)=>{ii(this,qe.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)}),this.websocket.on(Xe.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(mt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(jne.PRE_CONNECT_PC,()=>{this.emit(qe.PRE_CONNECT_PC)})}},Wr=function(e){return e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",e}({});function b8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b8(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jp(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(M("TURN_DOMAIN")):(_.info("Unidentified as ip: ".concat(e,", use as host")),e)}function RM(e,t){e.addresses||(e.addresses=[]);let r=function(s,l){if(M("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return s.map(h=>{let{ip:f,port:p}=h;return{address:"".concat(f,":").concat(p)}});let c=M("GATEWAY_DOMAINS"),u=c[1]&&be(l).call(l,c[1])?1:0;return s.map(h=>{let{domain_prefix:f,port:p,ip:m}=h;if(f)return{address:"".concat(f,".").concat(c[u++%c.length],":").concat(p)};let g=/^[\.\:\d]+$/.test(m),y=g?"".concat(m.replace(/[^\d]/g,"-"),".").concat(c[u++%c.length],":").concat(p):"".concat(m,":").concat(p);return g||_.info("Unidentified as ip: ".concat(m,", use as host")),{ip:m,port:p,address:y}})}(e.addresses,t),n=Array.isArray(e.detail)&&e.detail[18];if(n&&typeof n=="string"){let s=n.split(";");for(let l=0;l<s.length;l++){var i;let c=Ui(i=s[l]).call(i);r[l]&&c&&(r[l].ip6=c)}}let a=e.detail&&e.detail.candidate,o;if(a){let[s,l]=a.split(":");s&&l&&(o={port:Number(l),ip:s,address:"".concat(s,":").concat(l)})}return{gatewayAddrs:r,apGatewayAddress:o,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function $a(e){return typeof e=="number"?e:e.exact||e.ideal||e.max||e.min||0}function w8(e){let t=e._encoderConfig;if(!t)return{};let r={resolution:t.width&&t.height?"".concat($a(t.width),"x").concat($a(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return typeof t.frameRate=="number"?(r.maxFrameRate=t.frameRate,r.minFrameRate=t.frameRate):t.frameRate&&(r.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,r.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),r}function E8(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function jv(e,t){let r,n,i;switch(t){case Wr.CHOOSE_SERVER:n=4096,i="choose server";break;case Wr.CLOUD_PROXY:n=1048576,i="proxy";break;case Wr.CLOUD_PROXY_5:n=4194304,i="proxy5";break;case Wr.CLOUD_PROXY_FALLBACK:n=4194310,i="proxy fallback";break;default:throw new Y(k.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach(a=>{a.buffer&&a.buffer.flag===n&&(r={code:a.buffer.code,addresses:(a.buffer.edges_services||[]).map(o=>fE(fE({},o),{},{ticket:a.buffer.cert})),server_ts:e.enter_ts,uid:a.buffer.uid,cid:a.buffer.cid,cname:a.buffer.cname,detail:fE(fE({},a.buffer.detail),e.detail),flag:a.buffer.flag,opid:e.opid,cert:a.buffer.cert})}),!r)throw new Y(k.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return r}async function Une(e,t){return await ye.all(e.addresses.map(async r=>({address:Jp(r.ip),tcpport:r.port,udpport:r.port,username:t&&M("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():Zn.username,password:t&&M("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await XP(t.toString()):Zn.password})))}function rD(e,t){let r=t.getMediaStreamTrack(!0).getSettings(),n=t.videoHeight||r.height,i=t.videoWidth||r.width;return n&&i?Math.max(Math.min(n,i)/Math.min($a(e.height),$a(e.width)),1):(_.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function rd(e){let{candidateType:t,relayProtocol:r,type:n,address:i,port:a,protocol:o}=e;return n==="local-candidate"?{candidateType:t,relayProtocol:r,protocol:o}:{candidateType:t,relayProtocol:r,address:i,port:a,protocol:o}}var gs,b8e=$r(Pne),w8e=Ws("Array").values,E8e=vc,_8e=vi,S8e=na,T8e=w8e,sA=Array.prototype,C8e={DOMTokenList:!0,NodeList:!0},x8e=function(e){var t=e.values;return e===sA||S8e(sA,e)&&t===sA.values||_8e(C8e,E8e(e))?T8e:t},Qc=$r(x8e),_8=ss,R8e=tn,I8e=ci,N8e=cn,lA=dx,A8e=jb,O8e=nx,k8e=yc,P8e=ix,op=Object.assign,S8=Object.defineProperty,D8e=R8e([].concat),L8e=!op||N8e(function(){if(_8&&op({b:1},op(S8({},"a",{enumerable:!0,get:function(){S8(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(i){t[i]=i}),op({},e)[r]!=7||lA(op({},t)).join("")!=n})?function(e,t){for(var r=k8e(e),n=arguments.length,i=1,a=A8e.f,o=O8e.f;n>i;)for(var s,l=P8e(arguments[i++]),c=a?D8e(lA(l),a(l)):lA(l),u=c.length,h=0;u>h;)s=c[h++],_8&&!I8e(o,l,s)||(r[s]=l[s]);return r}:op,j8e=ka,M8e=qee,U8e=$d,F8e=ci,V8e=yc,B8e=function(e,t,r,n){try{return n?t(j8e(r)[0],r[1]):t(r)}catch(i){M8e(e,"throw",i)}},$8e=Kee,H8e=px,z8e=fu,T8=yx,G8e=Wj,W8e=hx,C8=Array,Df=tn,cA=2147483647,K8e=/[^\0-\u007E]/,Fne=/[.\u3002\uFF0E\uFF61]/g,x8="Overflow: input needs wider integers to process",R8=RangeError,q8e=Df(Fne.exec),Qp=Math.floor,uA=String.fromCharCode,I8=Df("".charCodeAt),Vne=Df([].join),Lu=Df([].push),Y8e=Df("".replace),X8e=Df("".split),J8e=Df("".toLowerCase),N8=function(e){return e+22+75*(e<26)},Q8e=function(e,t,r){var n=0;for(e=r?Qp(e/700):e>>1,e+=Qp(e/t);e>455;)e=Qp(e/35),n+=36;return Qp(n+36*e/(e+38))},Z8e=function(e){var t=[];e=function(v){for(var b=[],E=0,S=v.length;E<S;){var I=I8(v,E++);if(I>=55296&&I<=56319&&E<S){var N=I8(v,E++);(64512&N)==56320?Lu(b,((1023&I)<<10)+(1023&N)+65536):(Lu(b,I),E--)}else Lu(b,I)}return b}(e);var r,n,i=e.length,a=128,o=0,s=72;for(r=0;r<e.length;r++)(n=e[r])<128&&Lu(t,uA(n));var l=t.length,c=l;for(l&&Lu(t,"-");c<i;){var u=cA;for(r=0;r<e.length;r++)(n=e[r])>=a&&n<u&&(u=n);var h=c+1;if(u-a>Qp((cA-o)/h))throw R8(x8);for(o+=(u-a)*h,a=u,r=0;r<e.length;r++){if((n=e[r])<a&&++o>cA)throw R8(x8);if(n==a){for(var f=o,p=36;;){var m=p<=s?1:p>=s+26?26:p-s;if(f<m)break;var g=f-m,y=36-m;Lu(t,uA(N8(m+g%y))),f=Qp(g/y),p+=36}Lu(t,uA(N8(f))),s=Q8e(o,h,c==l),o=0,c++}}o++,a++}return Vne(t,"")},e7e=ir,IM=ss,t7e=fM,NM=si,A8=$d,Ks=tn,pE=zd,ys=fx,r7e=Yj,nD=vi,AM=L8e,sp=function(e){var t=V8e(e),r=H8e(this),n=arguments.length,i=n>1?arguments[1]:void 0,a=i!==void 0;a&&(i=U8e(i,n>2?arguments[2]:void 0));var o,s,l,c,u,h,f=W8e(t),p=0;if(!f||this===C8&&$8e(f))for(o=z8e(t),s=r?new this(o):C8(o);o>p;p++)h=a?i(t[p],p):t[p],T8(s,p,h);else for(u=(c=G8e(t,f)).next,s=r?new this:[];!(l=F8e(u,c)).done;p++)h=a?B8e(c,i,[l.value,p],!0):l.value,T8(s,p,h);return s.length=p,s},Zs=iM,n7e=nM.codeAt,i7e=function(e){var t,r,n=[],i=X8e(Y8e(J8e(e),Fne,"."),".");for(t=0;t<i.length;t++)r=i[t],Lu(n,q8e(K8e,r)?"xn--"+Z8e(r):r);return Vne(n,".")},Oc=ls,a7e=Gd,o7e=mx,Bne=S6e,$ne=Pf,s7e=$ne.set,bT=$ne.getterFor("URL"),l7e=Bne.URLSearchParams,c7e=Bne.getState,Sy=NM.URL,iD=NM.TypeError,mE=NM.parseInt,u7e=Math.floor,O8=Math.pow,Cs=Ks("".charAt),nl=Ks(/./.exec),Wy=Ks([].join),d7e=Ks(1 .toString),h7e=Ks([].pop),lp=Ks([].push),dA=Ks("".replace),f7e=Ks([].shift),p7e=Ks("".split),Ky=Ks("".slice),I_=Ks("".toLowerCase),m7e=Ks([].unshift),hA="Invalid scheme",Ty="Invalid host",k8="Invalid port",Hne=/[a-z]/i,g7e=/[\d+-.a-z]/i,fA=/\d/,y7e=/^0x/i,v7e=/^[0-7]+$/,b7e=/^\d+$/,P8=/^[\da-f]+$/i,w7e=/[\0\t\n\r #%/:<>?@[\\\]^|]/,E7e=/[\0\t\n\r #/:<>?@[\\\]^|]/,_7e=/^[\u0000-\u0020]+/,S7e=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,T7e=/[\t\n\r]/g,Cy=function(e){var t,r,n,i;if(typeof e=="number"){for(t=[],r=0;r<4;r++)m7e(t,e%256),e=u7e(e/256);return Wy(t,".")}if(typeof e=="object"){for(t="",n=function(a){for(var o=null,s=1,l=null,c=0,u=0;u<8;u++)a[u]!==0?(c>s&&(o=l,s=c),l=null,c=0):(l===null&&(l=u),++c);return c>s&&(o=l,s=c),o}(e),r=0;r<8;r++)i&&e[r]===0||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=d7e(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},N_={},zne=AM({},N_,{" ":1,'"':1,"<":1,">":1,"`":1}),Gne=AM({},zne,{"#":1,"?":1,"{":1,"}":1}),pA=AM({},Gne,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ru=function(e,t){var r=n7e(e,0);return r>32&&r<127&&!nD(t,e)?e:encodeURIComponent(e)},gE={ftp:21,file:null,http:80,https:443,ws:80,wss:443},qy=function(e,t){var r;return e.length==2&&nl(Hne,Cs(e,0))&&((r=Cs(e,1))==":"||!t&&r=="|")},D8=function(e){var t;return e.length>1&&qy(Ky(e,0,2))&&(e.length==2||(t=Cs(e,2))==="/"||t==="\\"||t==="?"||t==="#")},C7e=function(e){return e==="."||I_(e)==="%2e"},mA={},L8={},gA={},j8={},M8={},yA={},U8={},F8={},yE={},vE={},vA={},bA={},wA={},EA={},V8={},_A={},cp={},Ol={},B8={},eh={},xc={},OM=function(e,t,r){var n,i,a,o=Oc(e);if(t){if(i=this.parse(o))throw iD(i);this.searchParams=null}else{if(r!==void 0&&(n=new OM(r,!0)),i=this.parse(o,null,n))throw iD(i);(a=c7e(new l7e)).bindURL(this),this.searchParams=a}};OM.prototype={type:"URL",parse:function(e,t,r){var n,i,a,o,s,l=this,c=t||mA,u=0,h="",f=!1,p=!1,m=!1;for(e=Oc(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=dA(e,_7e,""),e=dA(e,S7e,"$1")),e=dA(e,T7e,""),n=sp(e);u<=n.length;){switch(i=n[u],c){case mA:if(!i||!nl(Hne,i)){if(t)return hA;c=gA;continue}h+=I_(i),c=L8;break;case L8:if(i&&(nl(g7e,i)||i=="+"||i=="-"||i=="."))h+=I_(i);else{if(i!=":"){if(t)return hA;h="",c=gA,u=0;continue}if(t&&(l.isSpecial()!=nD(gE,h)||h=="file"&&(l.includesCredentials()||l.port!==null)||l.scheme=="file"&&!l.host))return;if(l.scheme=h,t)return void(l.isSpecial()&&gE[l.scheme]==l.port&&(l.port=null));h="",l.scheme=="file"?c=EA:l.isSpecial()&&r&&r.scheme==l.scheme?c=j8:l.isSpecial()?c=F8:n[u+1]=="/"?(c=M8,u++):(l.cannotBeABaseURL=!0,lp(l.path,""),c=B8)}break;case gA:if(!r||r.cannotBeABaseURL&&i!="#")return hA;if(r.cannotBeABaseURL&&i=="#"){l.scheme=r.scheme,l.path=Zs(r.path),l.query=r.query,l.fragment="",l.cannotBeABaseURL=!0,c=xc;break}c=r.scheme=="file"?EA:yA;continue;case j8:if(i!="/"||n[u+1]!="/"){c=yA;continue}c=yE,u++;break;case M8:if(i=="/"){c=vE;break}c=Ol;continue;case yA:if(l.scheme=r.scheme,i==gs)l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=Zs(r.path),l.query=r.query;else if(i=="/"||i=="\\"&&l.isSpecial())c=U8;else if(i=="?")l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=Zs(r.path),l.query="",c=eh;else{if(i!="#"){l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=Zs(r.path),l.path.length--,c=Ol;continue}l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=Zs(r.path),l.query=r.query,l.fragment="",c=xc}break;case U8:if(!l.isSpecial()||i!="/"&&i!="\\"){if(i!="/"){l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,c=Ol;continue}c=vE}else c=yE;break;case F8:if(c=yE,i!="/"||Cs(h,u+1)!="/")continue;u++;break;case yE:if(i!="/"&&i!="\\"){c=vE;continue}break;case vE:if(i=="@"){f&&(h="%40"+h),f=!0,a=sp(h);for(var g=0;g<a.length;g++){var y=a[g];if(y!=":"||m){var v=Ru(y,pA);m?l.password+=v:l.username+=v}else m=!0}h=""}else if(i==gs||i=="/"||i=="?"||i=="#"||i=="\\"&&l.isSpecial()){if(f&&h=="")return"Invalid authority";u-=sp(h).length+1,h="",c=vA}else h+=i;break;case vA:case bA:if(t&&l.scheme=="file"){c=_A;continue}if(i!=":"||p){if(i==gs||i=="/"||i=="?"||i=="#"||i=="\\"&&l.isSpecial()){if(l.isSpecial()&&h=="")return Ty;if(t&&h==""&&(l.includesCredentials()||l.port!==null))return;if(o=l.parseHost(h))return o;if(h="",c=cp,t)return;continue}i=="["?p=!0:i=="]"&&(p=!1),h+=i}else{if(h=="")return Ty;if(o=l.parseHost(h))return o;if(h="",c=wA,t==bA)return}break;case wA:if(!nl(fA,i)){if(i==gs||i=="/"||i=="?"||i=="#"||i=="\\"&&l.isSpecial()||t){if(h!=""){var b=mE(h,10);if(b>65535)return k8;l.port=l.isSpecial()&&b===gE[l.scheme]?null:b,h=""}if(t)return;c=cp;continue}return k8}h+=i;break;case EA:if(l.scheme="file",i=="/"||i=="\\")c=V8;else{if(!r||r.scheme!="file"){c=Ol;continue}if(i==gs)l.host=r.host,l.path=Zs(r.path),l.query=r.query;else if(i=="?")l.host=r.host,l.path=Zs(r.path),l.query="",c=eh;else{if(i!="#"){D8(Wy(Zs(n,u),""))||(l.host=r.host,l.path=Zs(r.path),l.shortenPath()),c=Ol;continue}l.host=r.host,l.path=Zs(r.path),l.query=r.query,l.fragment="",c=xc}}break;case V8:if(i=="/"||i=="\\"){c=_A;break}r&&r.scheme=="file"&&!D8(Wy(Zs(n,u),""))&&(qy(r.path[0],!0)?lp(l.path,r.path[0]):l.host=r.host),c=Ol;continue;case _A:if(i==gs||i=="/"||i=="\\"||i=="?"||i=="#"){if(!t&&qy(h))c=Ol;else if(h==""){if(l.host="",t)return;c=cp}else{if(o=l.parseHost(h))return o;if(l.host=="localhost"&&(l.host=""),t)return;h="",c=cp}continue}h+=i;break;case cp:if(l.isSpecial()){if(c=Ol,i!="/"&&i!="\\")continue}else if(t||i!="?")if(t||i!="#"){if(i!=gs&&(c=Ol,i!="/"))continue}else l.fragment="",c=xc;else l.query="",c=eh;break;case Ol:if(i==gs||i=="/"||i=="\\"&&l.isSpecial()||!t&&(i=="?"||i=="#")){if((s=I_(s=h))===".."||s==="%2e."||s===".%2e"||s==="%2e%2e"?(l.shortenPath(),i=="/"||i=="\\"&&l.isSpecial()||lp(l.path,"")):C7e(h)?i=="/"||i=="\\"&&l.isSpecial()||lp(l.path,""):(l.scheme=="file"&&!l.path.length&&qy(h)&&(l.host&&(l.host=""),h=Cs(h,0)+":"),lp(l.path,h)),h="",l.scheme=="file"&&(i==gs||i=="?"||i=="#"))for(;l.path.length>1&&l.path[0]==="";)f7e(l.path);i=="?"?(l.query="",c=eh):i=="#"&&(l.fragment="",c=xc)}else h+=Ru(i,Gne);break;case B8:i=="?"?(l.query="",c=eh):i=="#"?(l.fragment="",c=xc):i!=gs&&(l.path[0]+=Ru(i,N_));break;case eh:t||i!="#"?i!=gs&&(i=="'"&&l.isSpecial()?l.query+="%27":l.query+=i=="#"?"%23":Ru(i,N_)):(l.fragment="",c=xc);break;case xc:i!=gs&&(l.fragment+=Ru(i,zne))}u++}},parseHost:function(e){var t,r,n;if(Cs(e,0)=="["){if(Cs(e,e.length-1)!="]"||(t=function(i){var a,o,s,l,c,u,h,f=[0,0,0,0,0,0,0,0],p=0,m=null,g=0,y=function(){return Cs(i,g)};if(y()==":"){if(Cs(i,1)!=":")return;g+=2,m=++p}for(;y();){if(p==8)return;if(y()!=":"){for(a=o=0;o<4&&nl(P8,y());)a=16*a+mE(y(),16),g++,o++;if(y()=="."){if(o==0||(g-=o,p>6))return;for(s=0;y();){if(l=null,s>0){if(!(y()=="."&&s<4))return;g++}if(!nl(fA,y()))return;for(;nl(fA,y());){if(c=mE(y(),10),l===null)l=c;else{if(l==0)return;l=10*l+c}if(l>255)return;g++}f[p]=256*f[p]+l,++s!=2&&s!=4||p++}if(s!=4)return;break}if(y()==":"){if(g++,!y())return}else if(y())return;f[p++]=a}else{if(m!==null)return;g++,m=++p}}if(m!==null)for(u=p-m,p=7;p!=0&&u>0;)h=f[p],f[p--]=f[m+u-1],f[m+--u]=h;else if(p!=8)return;return f}(Ky(e,1,-1)),!t))return Ty;this.host=t}else if(this.isSpecial()){if(e=i7e(e),nl(w7e,e)||(t=function(i){var a,o,s,l,c,u,h,f=p7e(i,".");if(f.length&&f[f.length-1]==""&&f.length--,(a=f.length)>4)return i;for(o=[],s=0;s<a;s++){if((l=f[s])=="")return i;if(c=10,l.length>1&&Cs(l,0)=="0"&&(c=nl(y7e,l)?16:8,l=Ky(l,c==8?1:2)),l==="")u=0;else{if(!nl(c==10?b7e:c==8?v7e:P8,l))return i;u=mE(l,c)}lp(o,u)}for(s=0;s<a;s++)if(u=o[s],s==a-1){if(u>=O8(256,5-a))return null}else if(u>255)return null;for(h=h7e(o),s=0;s<o.length;s++)h+=o[s]*O8(256,3-s);return h}(e),t===null))return Ty;this.host=t}else{if(nl(E7e,e))return Ty;for(t="",r=sp(e),n=0;n<r.length;n++)t+=Ru(r[n],N_);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return nD(gE,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||this.scheme=="file"&&t==1&&qy(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,i=e.host,a=e.port,o=e.path,s=e.query,l=e.fragment,c=t+":";return i!==null?(c+="//",e.includesCredentials()&&(c+=r+(n?":"+n:"")+"@"),c+=Cy(i),a!==null&&(c+=":"+a)):t=="file"&&(c+="//"),c+=e.cannotBeABaseURL?o[0]:o.length?"/"+Wy(o,"/"):"",s!==null&&(c+="?"+s),l!==null&&(c+="#"+l),c},setHref:function(e){var t=this.parse(e);if(t)throw iD(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e=="blob")try{return new Jm(e.path[0]).origin}catch{return"null"}return e!="file"&&this.isSpecial()?e+"://"+Cy(this.host)+(t!==null?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Oc(e)+":",mA)},getUsername:function(){return this.username},setUsername:function(e){var t=sp(Oc(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Ru(t[r],pA)}},getPassword:function(){return this.password},setPassword:function(e){var t=sp(Oc(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Ru(t[r],pA)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?Cy(e):Cy(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,vA)},getHostname:function(){var e=this.host;return e===null?"":Cy(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,bA)},getPort:function(){var e=this.port;return e===null?"":Oc(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||((e=Oc(e))==""?this.port=null:this.parse(e,wA))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Wy(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,cp))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){(e=Oc(e))==""?this.query=null:(Cs(e,0)=="?"&&(e=Ky(e,1)),this.query="",this.parse(e,eh)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){(e=Oc(e))!=""?(Cs(e,0)=="#"&&(e=Ky(e,1)),this.fragment="",this.parse(e,xc)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Jm=function(e){var t=r7e(this,ja),r=o7e(arguments.length,1)>1?arguments[1]:void 0,n=s7e(t,new OM(e,!1,r));IM||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},ja=Jm.prototype,vs=function(e,t){return{get:function(){return bT(this)[e]()},set:t&&function(r){return bT(this)[t](r)},configurable:!0,enumerable:!0}};IM&&(ys(ja,"href",vs("serialize","setHref")),ys(ja,"origin",vs("getOrigin")),ys(ja,"protocol",vs("getProtocol","setProtocol")),ys(ja,"username",vs("getUsername","setUsername")),ys(ja,"password",vs("getPassword","setPassword")),ys(ja,"host",vs("getHost","setHost")),ys(ja,"hostname",vs("getHostname","setHostname")),ys(ja,"port",vs("getPort","setPort")),ys(ja,"pathname",vs("getPathname","setPathname")),ys(ja,"search",vs("getSearch","setSearch")),ys(ja,"searchParams",vs("getSearchParams")),ys(ja,"hash",vs("getHash","setHash"))),pE(ja,"toJSON",function(){return bT(this).serialize()},{enumerable:!0}),pE(ja,"toString",function(){return bT(this).serialize()},{enumerable:!0}),Sy&&(SA=Sy.createObjectURL,TA=Sy.revokeObjectURL,SA&&pE(Jm,"createObjectURL",A8(SA,Sy)),TA&&pE(Jm,"revokeObjectURL",A8(TA,Sy)));var SA,TA;a7e(Jm,"URL"),e7e({global:!0,constructor:!0,forced:!t7e,sham:!IM},{URL:Jm});var x7e=ir,R7e=cn,I7e=mx,$8=ls,N7e=fM,H8=Wa("URL");x7e({target:"URL",stat:!0,forced:!(N7e&&R7e(function(){H8.canParse()}))},{canParse:function(e){var t=I7e(arguments.length,1),r=$8(e),n=t<2||arguments[1]===void 0?void 0:$8(arguments[1]);try{return!!new H8(r,n)}catch{return!1}}});var z8=$r(Tl.URL),Mn={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function Rt(){return Mn}function Wne(){return"setSinkId"in HTMLAudioElement.prototype&&(!M("RESTRICTION_SET_PLAYBACK_DEVICE")||(gd()||pne())&&!bM())}function G8(){return!Mn.supportUnifiedPlan||M("CHROME_FORCE_PLAN_B")&&Nd()}var Bn=function(e){return e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change",e}({});function up(e,t,r){return{sampleRate:e,stereo:t,bitrate:r}}function Et(e,t,r,n,i){return{width:e,height:t,frameRate:r,bitrateMin:n,bitrateMax:i}}function bs(e,t,r,n,i){return{width:{max:e},height:{max:t},frameRate:r,bitrateMin:n,bitrateMax:i}}function CA(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}var A7e={"90p":Et(160,90),"90p_1":Et(160,90),"120p":Et(160,120,15,30,65),"120p_1":Et(160,120,15,30,65),"120p_3":Et(120,120,15,30,50),"120p_4":Et(212,120),"180p":Et(320,180,15,30,140),"180p_1":Et(320,180,15,30,140),"180p_3":Et(180,180,15,30,100),"180p_4":Et(240,180,15,30,120),"240p":Et(320,240,15,40,200),"240p_1":Et(320,240,15,40,200),"240p_3":Et(240,240,15,40,140),"240p_4":Et(424,240,15,40,220),"360p":Et(640,360,15,80,400),"360p_1":Et(640,360,15,80,400),"360p_3":Et(360,360,15,80,260),"360p_4":Et(640,360,30,80,600),"360p_6":Et(360,360,30,80,400),"360p_7":Et(480,360,15,80,320),"360p_8":Et(480,360,30,80,490),"360p_9":Et(640,360,15,80,800),"360p_10":Et(640,360,24,80,800),"360p_11":Et(640,360,24,80,1e3),"480p":Et(640,480,15,100,500),"480p_1":Et(640,480,15,100,500),"480p_2":Et(640,480,30,100,1e3),"480p_3":Et(480,480,15,100,400),"480p_4":Et(640,480,30,100,750),"480p_6":Et(480,480,30,100,600),"480p_8":Et(848,480,15,100,610),"480p_9":Et(848,480,30,100,930),"480p_10":Et(640,480,10,100,400),"720p":Et(1280,720,15,120,1130),"720p_auto":Et(1280,720,30,900,3e3),"720p_1":Et(1280,720,15,120,1130),"720p_2":Et(1280,720,30,120,2e3),"720p_3":Et(1280,720,30,120,1710),"720p_5":Et(960,720,15,120,910),"720p_6":Et(960,720,30,120,1380),"1080p":Et(1920,1080,15,120,2080),"1080p_1":Et(1920,1080,15,120,2080),"1080p_2":Et(1920,1080,30,120,3e3),"1080p_3":Et(1920,1080,30,120,3150),"1080p_5":Et(1920,1080,60,120,4780),"1440p":Et(2560,1440,30,120,4850),"1440p_1":Et(2560,1440,30,120,4850),"1440p_2":Et(2560,1440,60,120,7350),"4k":Et(3840,2160,30,120,8910),"4k_1":Et(3840,2160,30,120,8910),"4k_3":Et(3840,2160,60,120,13500)},O7e={"480p":bs(640,480,5),"480p_1":bs(640,480,5),"480p_2":bs(640,480,30),"480p_3":bs(640,480,15),"720p":bs(1280,720,5),"720p_auto":Et(1280,720,30,900,3e3),"720p_1":bs(1280,720,5),"720p_2":bs(1280,720,30),"720p_3":bs(1280,720,15),"1080p":bs(1920,1080,5),"1080p_1":bs(1920,1080,5),"1080p_2":bs(1920,1080,30),"1080p_3":bs(1920,1080,15)},k7e={"1SL1TL":CA(1,1),"3SL3TL":CA(3,3),"2SL3TL":CA(2,3)};function Zl(e){return e||(e="480p_1"),typeof e=="string"?Object.assign({},A7e[e]):e}function xA(e){return typeof e=="string"?Object.assign({},O7e[e]):e}function bE(e){return typeof e=="string"?Object.assign({},k7e[e]):e}var P7e={speech_low_quality:up(16e3,!1),speech_standard:up(32e3,!1,18),music_standard:up(48e3,!1),standard_stereo:up(48e3,!0,56),high_quality:up(48e3,!1,128),high_quality_stereo:up(48e3,!0,192)};function wT(e){return typeof e=="string"?Object.assign({},P7e[e]):e}var Sp=[];function W8(e){return fn(e,"mediaSource",["screen","window","application"]),!0}var we=function(e){return e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track",e}({}),hr=function(e){return e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream",e}({}),Qm=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),D7e=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),L7e=function(e){return e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY",e}({}),Hh=function(e){return e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received",e.TRACK_UPDATED="track-updated",e}({}),Mg=function(e){return e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed",e}({}),ym=function(e){return e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed",e}({}),Ug=function(e){return e.AUDIO="audio",e.VIDEO="video",e.DATA="data",e}({}),oo=function(e){return e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source",e}({});(function(e){e.UPDATE_TRACK_SOURCE="update-track-source"})({});var aD={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},oD={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},Kne={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},j7e={uplinkNetworkQuality:0,downlinkNetworkQuality:0},qne={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},Zi=function(e){return e.ON_TRACK="on_track",e.ON_NODE="on_node",e}({}),vo=function(e){return e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints",e}({}),xy=function(e){return e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND",e}({}),Ih=function(e){return e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",e}({}),ji=function(e){return e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata",e}({}),kl=function(e){return e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen",e}({}),RA={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370},A_=function(e){return e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error",e}({});function _t(e,t,r,n,i){var a,o,s={};return Object.keys(n).forEach(function(l){s[l]=n[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=wl(a=b8e(o=r.slice()).call(o)).call(a,function(l,c){return c(e,t,l)||l},s),i&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}function te(e,t,r){return(t=function(n){var i=function(a,o){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var l=s.call(a,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(n);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K8(Object(r),!0).forEach(function(n){te(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Yne=class extends Tr{set _mediaStreamTrack(e){e!==this.mediaStreamTrack&&(this.safeEmit(Hh.TRACK_UPDATED,e),this.mediaStreamTrack=e)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(e,t){super(),te(this,"trackMediaType",void 0),te(this,"_ID",void 0),te(this,"_rtpTransceiver",void 0),te(this,"_lowRtpTransceiver",void 0),te(this,"_hints",[]),te(this,"_isClosed",!1),te(this,"_originMediaStreamTrack",void 0),te(this,"mediaStreamTrack",void 0),te(this,"_external",{}),this._ID=t||rr(8,"track-"),this._originMediaStreamTrack=e,this.mediaStreamTrack=e,function(r){be(Sp).call(Sp,r)||Sp.push(r)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){return e||Ad(()=>{var t;xe.reportApiInvoke(null,{name:sn.GET_MEDIA_STREAM_TRACK,options:[],tag:Nr.TRACER}).onSuccess(((t=this._mediaStreamTrack)===null||t===void 0?void 0:t.label)||"")},this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===Qm.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){let t=Sp.indexOf(e);t!==-1&&Sp.splice(t,1)}(this),this.emit(Mg.CLOSED),this.removeAllListeners(Hh.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===Qm.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(Hh.TRANSCEIVER_UPDATED,e,t)}},Zp=class extends Yne{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),te(this,"_enabled",!0),te(this,"_muted",!1),te(this,"_isExternalTrack",!1),te(this,"_isClosed",!1),te(this,"_enabledMutex",void 0),te(this,"processor",void 0),te(this,"_processorContext",void 0),te(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new gi("".concat(this.getTrackId())),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return(e=(t=this._originMediaStreamTrack)===null||t===void 0?void 0:t.label)!==null&&e!==void 0?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,_.debug("[".concat(this.getTrackId(),"] close")),this.emit(we.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=r,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Qt(this,we.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){_.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Mg.TRACK_ENDED)}stateCheck(e,t){if(_.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),Bc(t,e),this._enabled&&this._muted&&e==="enabled"&&t===!1)throw new ee(k.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",_);if(!this._enabled&&!this._muted&&e==="muted"&&t===!0)throw new ee(k.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",_)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():ye.resolve([])}},q8=window.AudioContext||window.webkitAudioContext,Qa=null,zt=new class extends Tr{constructor(){super(...arguments),te(this,"prevState",void 0),te(this,"curState",void 0),te(this,"currentTime",void 0),te(this,"currentTimeStuckAt",void 0),te(this,"interruptDetectorTrack",void 0),te(this,"onLocalAudioTrackMute",()=>{_.info("ios15-interruption-start"),this.emit(Bn.IOS_15_16_INTERRUPTION_START)}),te(this,"onLocalAudioTrackUnmute",async()=>{_.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?_.info("ios15-interruption-end-canceled"):(Qa&&await Qa.suspend(),this.emit(Bn.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(e){_.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){_.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function Fg(){if(!Qa){if(function(){if(!q8)return void _.error("your browser is not support web audio");_.info("create audio context");let e=mr({},M("WEBAUDIO_INIT_OPTIONS"));_.debug("audio context init option:",JSON.stringify(e)),Qa=new q8(e),zt.curState=Qa.state,Qa.onstatechange=()=>{zt.prevState=zt.curState,zt.curState=Qa?Qa.state:void 0;let{prevState:t,curState:r}=zt,n=r==="running",i=r==="interrupted",a=t==="running",o=t==="suspended",s=t==="interrupted",l=Ct().osVersion;(Qi()||Ms())&&a&&i&&(_.info("ios".concat(l,"-interruption-start")),zt.emit(Bn.IOS_INTERRUPTION_START)),(Qi()||Ms())&&(o||s)&&n&&(_.info("ios".concat(l,"-interruption-end")),zt.emit(Bn.IOS_INTERRUPTION_END)),t!==r&&zt.emit(Bn.STATE_CHANGE,r,t)},setInterval(()=>{var t;let r=(t=Qa)===null||t===void 0?void 0:t.currentTime;zt.currentTime!==r?(zt.currentTimeStuckAt&&(_.debug("AudioContext current time resume at ".concat(r)),zt.currentTimeStuckAt=void 0),zt.currentTime=r):(r!==zt.currentTimeStuckAt&&(xe.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:r},tag:Nr.TRACER}).onSuccess(),_.warning("AudioContext current time stuck at ".concat(r))),zt.currentTimeStuckAt=r)},5e3),async function(t){let r=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"],n,i=!1,a=!1,o=!1;function s(g){t.state==="running"?l(!1):Qi()||Ms()?t.state==="suspended"&&(l(!0),g&&t.resume().then(c,c)):t.state!=="closed"&&(l(!0),g&&t.resume().then(c,c))}function l(g){if(i!==g){i=g;for(let y=0,v=r;y<v.length;y+=1){let b=v[y];g?window.addEventListener(b,u,{capture:!0,passive:!0}):window.removeEventListener(b,u,{capture:!0,passive:!0})}}}function c(){s(!1)}function u(){s(!0)}function h(g){if(!o)if(n.paused)if(g){let y;f(!1),o=!0;try{y=n.play(),y?y.then(p,p):(n.addEventListener("playing",p),n.addEventListener("abort",p),n.addEventListener("error",p))}catch{p()}}else f(!0);else f(!1)}function f(g){if(a!==g){a=g;for(let y=0,v=r;y<v.length;y++){let b=v[y];g?window.addEventListener(b,m,{capture:!0,passive:!0}):window.removeEventListener(b,m,{capture:!0,passive:!0})}}}function p(){n.removeEventListener("playing",p),n.removeEventListener("abort",p),n.removeEventListener("error",p),o=!1,h(!1)}function m(){h(!0)}if(Qi()){let g=t.createMediaStreamDestination(),y=document.createElement("div");y.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=y.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=g.stream,h(!0)}zt.on(Bn.STATE_CHANGE,function(){s(!0)}),s(!1)}(Qa)}(),!Qa)throw new ee(k.NOT_SUPPORTED,"can not create audio context");return Qa}return Qa}function hh(e){if(function(){if(IA!==null)return IA;let n=Fg(),i=n.createBufferSource(),a=n.createGain(),o=n.createGain();i.connect(a),i.connect(o),i.disconnect(a);let s=!1;try{i.disconnect(a)}catch{s=!0}return i.disconnect(),IA=s,s}())return;let t=e.connect,r=e.disconnect;e.connect=(n,i,a)=>{var o;return e._inputNodes||(e._inputNodes=[]),be(o=e._inputNodes).call(o,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,i,a)):t.call(e,n,i)),e},e.disconnect=(n,i,a)=>{r.call(e),n?vT(e._inputNodes,n):e._inputNodes=[];for(let o of e._inputNodes)t.call(e,o)}}var IA=null;function kM(e,t){let r=!1,n=1/t;if(M("DISABLE_WEBAUDIO")){let i=window.setInterval(()=>{r?window.clearInterval(i):e(performance.now()/1e3)},1e3*n)}else{let i=Fg(),a=i.createGain();a.gain.value=0,a.connect(i.destination);let o=()=>{if(r)return void(a=null);let s=i.createOscillator();s.onended=o,s.connect(a),s.start(0),s.stop(i.currentTime+n),e(i.currentTime)};o()}return()=>{r=!0}}var Xne=class{constructor(){te(this,"context",void 0),te(this,"analyserNode",void 0),te(this,"sourceNode",void 0),this.context=Fg(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=e,e==null||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||Qi()||Ms()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;let e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{let r=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(r);for(let n=0;n<e.length;++n)e[n]=r[n]/128-1}let t=wl(e).call(e,(r,n)=>r+n*n,0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;(e=this.sourceNode)===null||e===void 0||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(t=this.sourceNode)===null||t===void 0||t.connect(this.analyserNode)}catch{_.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}},Jne=class extends Tr{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var r;(r=this.sourceNode)===null||r===void 0||r.disconnect(this.outputNode)}catch{}(t=this._processedNode)===null||t===void 0||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),te(this,"outputNode",void 0),te(this,"outputTrack",void 0),te(this,"isPlayed",!1),te(this,"sourceNode",void 0),te(this,"context",void 0),te(this,"audioBufferNode",void 0),te(this,"destNode",void 0),te(this,"audioOutputLevel",0),te(this,"volumeLevelAnalyser",void 0),te(this,"_processedNode",void 0),te(this,"playNode",void 0),te(this,"isDestroyed",!1),te(this,"onNoAudioInput",void 0),te(this,"isNoAudioInput",!1),te(this,"_noAudioInputCount",0),this.context=Fg(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),hh(this.outputNode),this.volumeLevelAnalyser=new Xne}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=t=>{this.emit(oo.ON_AUDIO_BUFFER,function(r){for(let n=0;n<r.outputBuffer.numberOfChannels;n+=1){let i=r.outputBuffer.getChannelData(n);for(let a=0;a<i.length;a+=1)i[a]=0}return r.inputBuffer}(t))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Rt().webAudioMediaStreamDest)throw new ee(k.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){this.context.state!=="running"&&Tx(()=>{zt.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Qi()||Ms()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();let t=this.volumeLevelAnalyser.getAnalyserNode(),r;t.getFloatTimeDomainData?(r=new Float32Array(t.fftSize),t.getFloatTimeDomainData(r)):(r=new Uint8Array(t.fftSize),t.getByteTimeDomainData(r));let n=!1;for(let i=0;i<r.length;i++)r[i]!==0&&(n=!0);return n?(this.isNoAudioInput=!1,!0):(await zn(200),await this.checkHasAudioInput(e?e+1:1)&&n)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;(e=this.processedNode)===null||e===void 0||e.disconnect(),(t=this.sourceNode)===null||t===void 0||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?(e=this.processedNode)===null||e===void 0||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}},Qne=class extends Jne{get isFreeze(){return!1}constructor(e,t,r){var n;if(super(),te(this,"sourceNode",void 0),te(this,"track",void 0),te(this,"clonedTrack",void 0),te(this,"audioElement",void 0),te(this,"isCurrentTrackCloned",!1),te(this,"isRemoteTrack",!1),te(this,"originVolumeLevelAnalyser",void 0),te(this,"rebuildWebAudio",async()=>{if(_.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void _.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>_.info("resume success")),_.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();let o=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?o.stop():this.isCurrentTrackCloned=!0;let s=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(s),hh(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();let l=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(l,this.context.currentTime),hh(this.outputNode),this.emit(oo.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=s,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),e.kind!=="audio")throw new ee(k.UNEXPECTED_ERROR);this.track=e;let i=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(i),hh(this.sourceNode),r){let o=r.clone();o.enabled=!0,this.clonedTrack=o,_.debug("create an unmuted track ".concat(o.id," from the original track ").concat(r.id," to get the volume"));let s=this.context.createMediaStreamSource(new MediaStream([o]));hh(s),this.originVolumeLevelAnalyser=new Xne,this.originVolumeLevelAnalyser.updateSource(s)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=i;let a=Ct();t&&a.os===Sn.IOS&&Number((n=a.osVersion)===null||n===void 0?void 0:n.split(".")[0])<15&&(zt.on(Bn.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(o=>{o||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;let t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),hh(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(oo.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),zt.off("state-change",this.rebuildWebAudio),(e=this.originVolumeLevelAnalyser)===null||e===void 0||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){let t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),_.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));let r=this.context.createMediaStreamSource(new MediaStream([t]));hh(r),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(r)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}};async function Zne(e,t,r){let n=(a,o)=>a?typeof a!="number"?a.max||a.exact||a.ideal||a.min||o:a:o,i={audio:!!r&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:n(t.height,1080),maxWidth:n(t.width,1920)}}};return t.frameRate&&typeof t.frameRate!="number"?(i.video.mandatory.maxFrameRate=t.frameRate.max,i.video.mandatory.minFrameRate=t.frameRate.min):typeof t.frameRate=="number"&&(i.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(i)}async function M7e(e,t){let r=await eie(e.mediaSource),{sourceId:n,audio:i}=await function(a){let o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new ye((s,l)=>{let c=document.createElement("div");c.innerText="share screen",c.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");let u=document.createElement("div");u.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");let h=document.createElement("div");h.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",h.setAttribute("style","height: 12%;");let f=document.createElement("div");f.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");let p=document.createElement("div");p.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");let m=document.createElement("button");m.innerHTML="cancel",m.setAttribute("style","width: 85px;"),m.onclick=()=>{document.body.removeChild(v);let b=new Error("NotAllowedError");b.name="NotAllowedError",l(b)};let g=o,y=document.createElement("div");if(o){let b=document.createElement("input");b.setAttribute("type","checkbox");let E=document.createElement("span");b.setAttribute("style","margin-right: 6px;"),E.innerText="Share audio",b.checked=g,b.onchange=()=>{g=b.checked},y.appendChild(b),y.appendChild(E)}p.appendChild(y),p.appendChild(m),u.appendChild(h),u.appendChild(f),u.appendChild(p);let v=document.createElement("div");v.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),v.appendChild(c),v.appendChild(u),document.body.appendChild(v),a.map(b=>{if(b.id){let E=document.createElement("div");E.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let S=b.thumbnail;try{let{width:I}=S.getSize();I>1920&&(S=S.resize({width:1920}))}catch(I){throw I&&I.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),I}E.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+S.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+b.name.replace(/[\u00A0-\u9999<>\&]/g,function(I){return"&#"+I.charCodeAt(0)+";"})+"</span>",E.onclick=()=>{document.body.removeChild(v),s({sourceId:b.id,audio:g})},f.appendChild(E)}})})}(r,t);return await Zne(n,e,i)}async function eie(e){let t=["window","screen"];e!=="application"&&e!=="window"||(t=["window"]),e==="screen"&&(t=["screen"]);let r=Sne();if(!r)throw console.error("failed to fetch electron, please mount it to window"),new ee(k.ELECTRON_IS_NULL);let n=null;try{var i;n=((i=r.desktopCapturer)===null||i===void 0?void 0:i.getSources({types:t}))||r.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch{n=null}n&&n.then||(n=new ye((a,o)=>{r.desktopCapturer.getSources({types:t},(s,l)=>{s?o(s):a(l)})}));try{return await n}catch(a){throw new ee(k.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,a.toString())}}var sD=new gi("safari"),tie=!1,rie=!1;async function io(e,t){let r=0,n=null;for(;r<2;)try{n=await U7e(e,t,r>0);break}catch(i){if(i instanceof ee)throw _.error("[".concat(t,"] ").concat(i.toString())),i;let a=O_(i.name||i.code||i,i.message);if(a.code===k.MEDIA_OPTION_INVALID){_.debug("[".concat(t,"] detect media option invalid, retry")),r+=1,await zn(500);continue}throw _.error("[".concat(t,"] ").concat(a.toString())),a}if(!n)throw new ee(k.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return n}async function U7e(e,t,r){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new ee(k.NOT_SUPPORTED,"can not find getUserMedia");r&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));let n=Rt(),i=new MediaStream;if(e.audioSource&&i.addTrack(e.audioSource),e.videoSource&&i.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return _.debug("Using Video Source/ Audio Source"),i;if(e.screen)if(Sne())e.screen.sourceId?dp(i,await Zne(e.screen.sourceId,e.screen,e.screenAudio)):dp(i,await M7e(e.screen,e.screenAudio));else if(gd()&&e.screen.extensionId&&e.screen.mandatory){if(!n.getStreamFromExtension)throw new ee(k.NOT_SUPPORTED,"This browser does not support screen sharing");_.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));let f=await(o=e.screen.extensionId,s=t,new ye((p,m)=>{try{chrome.runtime.sendMessage(o,{getStream:!0},g=>{if(!g||!g.streamId)return _.error("[".concat(s,"] No response from Chrome Plugin. Plugin not installed properly"),g),void m(new ee(k.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));p(g.streamId)})}catch(g){_.error("[".concat(s,"] AgoraRTC screensharing plugin is not accessible(").concat(o,")"),g.toString()),m(new ee(k.CHROME_PLUGIN_NOT_INSTALL))}}));e.screen.mandatory.chromeMediaSourceId=f,dp(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(n.getDisplayMedia){var a;e.screen.mediaSource&&W8(e.screen.mediaSource);let f={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:(a=e.screen.displaySurface)!==null&&a!==void 0?a:e.screen.mediaSource==="screen"?"monitor":e.screen.mediaSource},{selfBrowserSurface:p,surfaceSwitching:m,systemAudio:g}=e.screen,y={selfBrowserSurface:p,surfaceSwitching:m,systemAudio:g};!p&&delete y.selfBrowserSurface,!m&&delete y.surfaceSwitching,!g&&delete y.systemAudio,_.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:f,audio:!!e.screenAudio,controls:y})),dp(i,await navigator.mediaDevices.getDisplayMedia(mr({video:f,audio:!!e.screenAudio},y)))}else{if(!Ar())throw _.error("[".concat(t,"] This browser does not support screenSharing")),new ee(k.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&W8(e.screen.mediaSource);let f={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};_.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(f))),dp(i,await navigator.mediaDevices.getUserMedia(f))}}var o,s;if(!e.video&&!e.audio)return i;let l={video:e.video,audio:e.audio},c=M("MEDIA_DEVICE_CONSTRAINTS");if(c)try{typeof c=="string"&&(c=JSON.parse(c)),l=JP(l,c)}catch{}_.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(l)),Ct();let u,h=null;(ni()||Qi()||yT())&&(h=await sD.lock());try{u=await navigator.mediaDevices.getUserMedia(l)}catch(f){throw h&&h(),f}return l.audio&&(tie=!0),l.video&&(rie=!0),dp(i,u),h&&h(),i}function O_(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new ee(k.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new ee(k.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new ee(k.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new ee(k.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new ee(k.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new ee(k.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return _.error("getUserMedia unexpected error",e),new ee(k.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function dp(e,t){let r=e.getVideoTracks()[0],n=e.getAudioTracks()[0],i=t.getVideoTracks()[0],a=t.getAudioTracks()[0];a&&(n&&e.removeTrack(n),e.addTrack(a)),i&&(r&&e.removeTrack(r),e.addTrack(i))}var lo=new class extends Tr{get state(){return this._state}set state(e){e!==this._state&&(this.emit(Ih.STATE_CHANGE,e),this._state=e)}constructor(){super(),te(this,"_state",xy.IDLE),te(this,"isAccessMicrophonePermission",!1),te(this,"isAccessCameraPermission",!1),te(this,"lastAccessMicrophonePermission",!1),te(this,"lastAccessCameraPermission",!1),te(this,"checkdeviceMatched",!1),te(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(M("ENUMERATE_DEVICES_INTERVAL")||(_x()||Ex()===Sn.HARMONY_OS)&&Nd())&&this.updateDevicesInfo()},M("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(e=>_.error(e.toString()))}async enumerateDevices(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new ee(k.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();let n=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(n),a=!this.isAccessMicrophonePermission&&e,o=!this.isAccessCameraPermission&&t;i.audio&&(a=!1),i.video&&(o=!1);let s=null,l=null,c=null;if(!r&&(a||o)){if(sD.isLocked&&(_.debug("[device manager] wait GUM lock"),(await sD.lock())(),_.debug("[device manager] GUM unlock")),tie&&(a=!1,this.isAccessMicrophonePermission=!0),rie&&(o=!1,this.isAccessCameraPermission=!0),_.debug("[device manager] check media device permissions",e,t,a,o),a&&o){try{c=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(u){let h=O_(u.name||u.code||u,u.message);if(h.code===k.PERMISSION_DENIED)throw h;_.warning("getUserMedia failed in getDevices",h)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(a){try{s=await navigator.mediaDevices.getUserMedia({audio:e})}catch(u){let h=O_(u.name||u.code||u,u.message);if(h.code===k.PERMISSION_DENIED)throw h;_.warning("getUserMedia failed in getDevices",h)}this.isAccessMicrophonePermission=!0}else if(o){try{l=await navigator.mediaDevices.getUserMedia({video:t})}catch(u){let h=O_(u.name||u.code||u,u.message);if(h.code===k.PERMISSION_DENIED)throw h;_.warning("getUserMedia failed in getDevices",h)}this.isAccessCameraPermission=!0}_.debug("[device manager] mic permission",e,"cam permission",t)}try{let u=await navigator.mediaDevices.enumerateDevices();return s&&s.getTracks().forEach(h=>h.stop()),l&&l.getTracks().forEach(h=>h.stop()),c&&c.getTracks().forEach(h=>h.stop()),s=null,l=null,c=null,u}catch(u){return s&&s.getTracks().forEach(h=>h.stop()),l&&l.getTracks().forEach(h=>h.stop()),c&&c.getTracks().forEach(h=>h.stop()),s=null,l=null,c=null,new ee(k.ENUMERATE_DEVICES_FAILED,u.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(t=>t.kind==="audioinput")}async getCamerasDevices(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter(t=>t.kind==="videoinput")}async getSpeakers(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(t=>t.kind==="audiooutput")}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach(r=>{r.device.label===e&&(t=r.device.deviceId)}),t}async getDeviceById(e){let t=(await this.enumerateDevices(!0,!0,!0)).find(r=>r.deviceId===e);if(!t)throw new ee(k.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=xy.INITING;try{await this.updateDevicesInfo(),this.state=xy.INITEND}catch(e){throw _.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=xy.IDLE,(typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1")||new ee(k.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){let e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),r=[];if(e[0]&&e[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;let i=e.find(o=>o.kind==="audioinput"&&o.deviceId==="default"),a=e.find(o=>o.kind==="audiooutput"&&o.deviceId==="default");i&&a?a.groupId===i.groupId?_.debug("[device-check] default input ".concat(i.label," and output ").concat(a.label," is the same group")):_.warning("[device-check] default input ".concat(i.label," and output ").concat(a.label," is not the same group")):_.debug("[device-check] default input or output not found")}let n=this.checkMediaDeviceInfoIsOk(e);if(e.forEach(i=>{if(!i.deviceId)return;let a=this.deviceInfoMap.get("".concat(i.kind,"_").concat(i.deviceId));if((a?a.state:"INACTIVE")!=="ACTIVE"){let o={initAt:t,updateAt:t,device:i,state:"ACTIVE"};this.deviceInfoMap.set("".concat(i.kind,"_").concat(i.deviceId),o),r.push(o)}a&&(a.updateAt=t)}),this.deviceInfoMap.forEach((i,a)=>{i.state==="ACTIVE"&&i.updateAt!==t&&(i.state="INACTIVE",r.push(i))}),this.state!==xy.INITEND)return n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));r.forEach(i=>{switch(i.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Ih.RECORDING_DEVICE_CHANGED,i);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(Ih.CAMERA_DEVICE_CHANGED,i);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Ih.PLAYOUT_DEVICE_CHANGED,i)}}),n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){let t=e.filter(i=>i.kind==="audioinput"),r=e.filter(i=>i.kind==="videoinput"),n={audio:!1,video:!1};for(let i of t)if(i.label&&i.deviceId){n.audio=!0;break}for(let i of r)if(i.label&&i.deviceId){n.video=!0;break}return n}},NA=!1,Za=new class extends Tr{constructor(){super(...arguments),te(this,"onAutoplayFailed",void 0),te(this,"onAudioAutoplayFailed",void 0)}};function nie(){if(Ct(),!NA){let e=t=>{t.preventDefault(),NA=!1,Ov()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};NA=!0,Ov()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),_.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Za.onAutoplayFailed?Za.onAutoplayFailed():Za.onAudioAutoplayFailed?_.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):_.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),Za.emit("autoplay-failed")}}function iie(e,t,r,n){if(!e)return;let i=xe.getBaseInfoBySessionId(e);if(!i)return;let a=i.info,o=Date.now(),s=mr(mr({},a),{},{vid:a.vid===void 0?0:Number(a.vid),lts:o,elapse:o-i.startTime,cbRegistered:Za.onAutoplayFailed||Za.onAudioAutoplayFailed?1:-1,errorMsg:r,mediaType:t,trackId:n,extend:void 0});xe.send({type:Er.AUTOPLAY_FAILED,data:s},!0)}var F7e=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],ca=new class{constructor(){te(this,"onAutoplayFailed",void 0),te(this,"elementMap",new Map),te(this,"elementStateMap",new Map),te(this,"elementsNeedToResume",[]),te(this,"sinkIdMap",new Map),te(this,"autoResumeAfterInterruption",e=>{Array.from(this.elementMap.entries()).forEach(t=>{let[r,n]=t,i=this.elementStateMap.get(r),a=n.srcObject.getAudioTracks()[0],o=a&&a.readyState;if(_.debug("resume after interrupted, ele: ".concat(i," audio: ").concat(o," ").concat(e)),o==="live"){if(e)return n.pause(),void n.play();if(zt.curState==="running")return qm()?(n.pause(),void n.play()):void(i&&i==="paused"&&n.play())}})}),te(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(e=>{let[t,r]=e,n=r.srcObject.getAudioTracks()[0];n&&n.readyState==="live"&&(_.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),r.pause(),r.play())})}),this.autoResumeAudioElement(),zt.on(Bn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),zt.on(Bn.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),zt.on(Bn.STATE_CHANGE,()=>{Qi()&&zt.prevState==="suspended"&&zt.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(e,t){let r=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),r)try{await r.setSinkId(t)}catch(n){throw new ee(k.PERMISSION_DENIED,"can not set sink id: "+n.toString())}}play(e,t,r,n){if(this.elementMap.has(t))return;let i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,ji.INIT),this.setVolume(t,r);let a=this.sinkIdMap.get(t);if(a)try{i.setSinkId(a).catch(s=>{_.warning("[".concat(t,"] set sink id failed"),s.toString())})}catch(s){_.warning("[".concat(t,"] set sink id failed"),s.toString())}let o=i.play();o&&o.then&&o.catch(s=>{n&&iie(n,"audio",s.message,t),_.warning("audio element play warning",s.toString()),this.elementMap.has(t)&&s.name==="NotAllowedError"&&(_.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),Tx(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),nie()}))})}updateTrack(e,t){let r=this.elementMap.get(e);r&&(r.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&this.elementStateMap.get(e)==="playing"}setVolume(e,t){let r=this.elementMap.get(e);r&&(t=Math.max(0,Math.min(100,t)),r.volume=t/100)}stop(e){let t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;let r=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(r,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){F7e.forEach(r=>{t.addEventListener(r,n=>{let i=this.elementStateMap.get(e),a=n.type==="pause"?"paused":n.type;if(_.debug("[".concat(e,"] audio-element-status change ").concat(i," => ").concat(a)),n.type==="error"){let o=t==null?void 0:t.error;o&&_.error("[".concat(e,"] media error, code: ").concat(o.code,", message: ").concat(o.message))}this.elementStateMap.set(e,a)})})}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){let e=()=>{this.elementsNeedToResume.forEach(t=>{t.play().then(r=>{_.debug("Auto resume audio element success")}).catch(r=>{_.warning("Auto resume audio element failed!",r)})}),this.elementsNeedToResume=[]};new ye(t=>{document.body?t():window.addEventListener("load",()=>t())}).then(()=>{Ov()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))})}};function Br(){return function(e,t,r){let n=r.value;return typeof n=="function"&&(r.value=function(){this._isClosed&&new ee(k.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",_);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];let s=n.apply(this,a);return s instanceof ye?new ye((l,c)=>{s.then(l).catch(c)}):s}),r}}var aie=class extends Tr{constructor(e){super(),te(this,"name","VideoProcessorDestination"),te(this,"ID","0"),te(this,"_source",void 0),te(this,"videoContext",void 0),te(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new ee(k.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new ee(k.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(Zi.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(Zi.ON_TRACK,void 0)}},oie=class extends Tr{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),te(this,"constraintsMap",new Map),te(this,"statsRegistry",[]),te(this,"usageRegistry",[]),te(this,"trackId",void 0),te(this,"direction",void 0),te(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await ii(this,vo.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var r;return _.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Qt(this,vo.REQUEST_UPDATE_CONSTRAINTS,Array.from(Qc(r=this.constraintsMap).call(r)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return _.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),Qt(this,vo.REQUEST_UPDATE_CONSTRAINTS,Array.from(Qc(t=this.constraintsMap).call(t)))}registerStats(e,t,r){this.statsRegistry.find(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t)||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:r})}unregisterStats(e,t){let r=this.statsRegistry.findIndex(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t);r!==-1&&this.statsRegistry.splice(r,1)}gatherStats(){let e=[];for(let{processorID:t,processorName:r,type:n,cb:i}of this.statsRegistry)try{let a=i();e.push({processorID:t,processorName:r,type:n,stats:a})}catch(a){_.error(new ee(k.UNEXPECTED_ERROR,a.message))}return e}registerUsage(e,t){this.usageRegistry.find(r=>r.processorID===e.ID&&r.processorName===e.name)||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){let t=this.usageRegistry.findIndex(r=>r.processorID===e.ID&&r.processorName===e.name);t!==-1&&this.usageRegistry.splice(t,1)}async gatherUsage(){let e=[];if(!this.chained)return[];for(let{cb:t}of this.usageRegistry)try{let r=t();r instanceof ye&&(r=await r),e.push(mr(mr({},r),{},{direction:this.direction}))}catch(r){_.error("gather extension usage error",r)}return e}getDirection(){return this.direction}},sie=class extends Tr{constructor(e){super(),te(this,"name","AudioProcessorDestination"),te(this,"ID","0"),te(this,"inputTrack",void 0),te(this,"inputNode",void 0),te(this,"audioProcessorContext",void 0),te(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new ee(k.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new ee(k.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(Zi.ON_TRACK,void 0),this.emit(Zi.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(Zi.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(Zi.ON_NODE,this.inputNode))}},lie=class extends Tr{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,r){super(),te(this,"constraintsMap",new Map),te(this,"statsRegistry",[]),te(this,"audioContext",void 0),te(this,"trackId",void 0),te(this,"direction",void 0),te(this,"usageRegistry",[]),te(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=r}async getConstraints(){return ii(this,vo.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var r;return _.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Qt(this,vo.REQUEST_UPDATE_CONSTRAINTS,Array.from(Qc(r=this.constraintsMap).call(r)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),Qt(this,vo.REQUEST_UPDATE_CONSTRAINTS,Array.from(Qc(t=this.constraintsMap).call(t)))}registerStats(e,t,r){this.statsRegistry.find(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t)||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:r})}unregisterStats(e,t){let r=this.statsRegistry.findIndex(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t);r!==-1&&this.statsRegistry.splice(r,1)}gatherStats(){let e=[];for(let{processorID:t,processorName:r,type:n,cb:i}of this.statsRegistry)try{let a=i();e.push({processorID:t,processorName:r,type:n,stats:a})}catch(a){_.error(new ee(k.UNEXPECTED_ERROR,a.message))}return e}registerUsage(e,t){this.usageRegistry.find(r=>r.processorID===e.ID&&r.processorName===e.name)||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){let t=this.usageRegistry.findIndex(r=>r.processorID===e.ID&&r.processorName===e.name);t!==-1&&this.usageRegistry.splice(t,1)}async gatherUsage(){let e=[];if(!this.chained)return[];for(let{cb:t}of this.usageRegistry)try{let r=t();r instanceof ye&&(r=await r),e.push(mr(mr({},r),{},{direction:this.direction}))}catch(r){_.error("gather extension usage error",r)}return e}getDirection(){return this.direction}},lD=class extends Tr{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),te(this,"context",void 0),te(this,"processSourceNode",void 0),te(this,"outputTrack",void 0),te(this,"processedNode",void 0),te(this,"clonedTrack",void 0),te(this,"outputNode",void 0),this.outputNode=new V7e}setVolume(){}createOutputTrack(){throw new ee(k.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}},V7e=class{disconnect(){}connect(){}};function cie(e){return new ye((t,r)=>{let n=!1,i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);let a=Qi()?"canplay":"playing";i.addEventListener(a,()=>{let o=i.videoWidth,s=i.videoHeight;!o&&Ar()||(n=!0,i.srcObject=null,i.remove(),t([o,s]))}),i.srcObject=new MediaStream([e]),i.play().catch(Cx),setTimeout(()=>{n||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))},4e3)})}function ET(e){let t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});let r=Zl(e.encoderConfig);return r.width!=null&&(t.width=r.width),r.height!=null&&(t.height=r.height),!wne()&&r.frameRate&&(t.frameRate=r.frameRate),pne()&&typeof t.frameRate=="object"&&(t.frameRate.max=60),Ar()&&(t.frameRate={ideal:30,max:30}),t}function Y8(e){let t={};if(wne()||(e.AGC!==void 0&&(t.autoGainControl=e.AGC),e.AEC!==void 0&&(t.echoCancellation=e.AEC),e.ANS!==void 0&&(t.noiseSuppression=e.ANS,gd()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){let r=wT(e.encoderConfig);t.channelCount=r.stereo?2:1,t.sampleRate=r.sampleRate,t.sampleSize=r.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),_x()&&(t.sampleRate=void 0),t}var B7e=e=>{let t=e._encoderConfig;if(!t)return;let{frameRate:r,width:n,height:i}=e.getMediaStreamTrackSettings(),{frameRate:a=r,width:o=n,height:s=i}=t;if(!a||!o||!s)return;o=XN(o),s=XN(s),a=XN(a);let{max:l,min:c}=function(p,m,g){let y=200*Math.pow(g/15,.6)*Math.pow(p*m/640/360,.75);return{min:Math.floor(y),max:Math.floor(4*y)}}(o,s,a),{bitrateMax:u,bitrateMin:h}=t||{};u||_.debug("calculate bitrate: [w: ".concat(o,", h: ").concat(s,", fps: ").concat(a,"] => [brMax: ").concat(u,", brMin: ").concat(h,"]"));let{maxFramerate:f}=M("ENCODER_CONFIG_LIMIT");return f&&typeof f=="number"&&(a=Math.min(a,f)),{frameRate:a,bitrateMax:u||l,bitrateMin:h||c,scaleResolutionDownBy:1,scale:0}},uie=async(e,t,r)=>await(async(n,i,a)=>{let o=function(c){let u=[];for(let h=0;h<c.length;h+=2)u.push(parseInt(c.slice(h,h+2),16));return Uint8Array.from(u)}(Rne(""+i+a)).slice(0,16),s=o.slice(0,12),l=await window.crypto.subtle.importKey("raw",o,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:s},l,n))})(e.buffer,t,r),PM=e=>{let t=document.createElement("canvas");return t.width=2,t.height=2,new ye((r,n)=>{t.toBlob(async i=>{if(t.remove(),i){let a=await die(i);r({buffer:a,width:t.width,height:t.height})}else n(new ee(k.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},e,1)})},die=async e=>{let t=await e.arrayBuffer();return new Uint8Array(t)},X8,J8,Q8,Z8,e7,t7,r7,n7,i7,a7,o7,s7,l7,c7,u7,d7,h7,f7,gr,p7,m7,g7,y7,v7,b7,Pl,w7,E7,_7,S7,T7,C7,x7,R7,I7,N7,A7,O7,k7,Yn,Ir=(X8=Ve({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),J8=Ve({argsMap:(e,t)=>[e.getTrackId(),t]}),Q8=Br(),Z8=Ym("LocalAudioTrack","_enabledMutex"),e7=Ve({argsMap:(e,t)=>[e.getTrackId(),t]}),t7=Br(),r7=Ym("LocalAudioTrack","_enabledMutex"),n7=Ve({argsMap:(e,t)=>[e.getTrackId(),t]}),i7=Br(),a7=Br(),o7=Br(),s7=Ve({argsMap:e=>[e.getTrackId()]}),l7=Br(),c7=Ve({argsMap:e=>[e.getTrackId()]}),u7=Br(),d7=Ve({argsMap:e=>[e.getTrackId()]}),h7=Ve({argsMap:(e,t)=>[e.getTrackId(),t.name]}),f7=Ve({argsMap:e=>[e.getTrackId()]}),_t((gr=class extends Zp{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?ca.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,r,n){super(e,r),te(this,"trackMediaType",Ug.AUDIO),te(this,"_encoderConfig",void 0),te(this,"_trackSource",void 0),te(this,"_enabled",!0),te(this,"_volume",100),te(this,"_useAudioElement",!0),te(this,"_bypassWebAudio",!1),te(this,"processor",void 0),te(this,"_processorContext",void 0),te(this,"_processorDestination",void 0),te(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!n,this._trackSource=new lD,M("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),M("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),ni()&&!Qa?setTimeout(()=>this.initWebAudio()):this.initWebAudio()}setVolume(e){Kt(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&ca.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void _.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));let t=this._source.createOutputTrack();this._mediaStreamTrack!==t&&(this._mediaStreamTrack=t,Qt(this,we.NEED_REPLACE_TRACK,this).then(()=>{_.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(r=>{_.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),r)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!Wne())throw new ee(k.NOT_SUPPORTED,"your browser does not support setting the audio output device");await ca.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,r){return this._setEnabled(e,t,r)}async _setEnabled(e,t,r){if(!r){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(_.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{r||(this._enabled=!0),await Qt(this,we.NEED_ENABLE_TRACK,this),_.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(n){throw r||(this._enabled=!1),_.error("[".concat(this.getTrackId(),"] setEnabled to true error"),n.toString()),n}}else{this._originMediaStreamTrack.enabled=!1,r||(this._enabled=!1);try{await Qt(this,we.NEED_DISABLE_TRACK,this)}catch(n){throw r||(this._enabled=!0),_.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,_.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await Qt(this,we.NEED_MUTE_TRACK,this):await Qt(this,we.NEED_UNMUTE_TRACK,this))}getStats(){return Ad(()=>{_.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Bo(this,we.GET_STATS)||mr({},aD)}setAudioFrameCallback(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!e)return this._source.removeAllListeners(oo.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(oo.ON_AUDIO_BUFFER),this._source.on(oo.ON_AUDIO_BUFFER,r=>e(r))}play(){_.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(_.debug("[".concat(this.getTrackId(),"] start audio playback in element")),ca.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){_.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?ca.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];_.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&ca.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Qt(this,we.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return ye.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new ee(k.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new ee(k.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;let t=this.processor;(e=this._source.processSourceNode)===null||e===void 0||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(Zi.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(t),await Qt(this,we.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Qt(this,we.NEED_REPLACE_TRACK,this))}),e.on(Zi.ON_NODE,t=>{this._source.processedNode=t})}unbindProcessorDestinationEvents(e){e.removeAllListeners(Zi.ON_TRACK),e.removeAllListeners(Zi.ON_NODE)}bindProcessorContextEvents(e){e.on(vo.REQUEST_CONSTRAINTS,async t=>{t(this._originMediaStreamTrack.getSettings())})}unbindProcessorContextEvents(e){e.removeAllListeners(vo.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof lD&&(this._trackSource=new Qne(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){let e=new lie(this._source.context,this.getTrackId(),"local"),t=new sie(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(oo.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})}),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(ca.stop(this.getTrackId()),this._source.play()),Qt(this,we.NEED_REPLACE_MIXING_TRACK,this).then(()=>{_.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))}).catch(r=>{_.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),r)})),{processorContext:e,processorDestination:t}}}).prototype,"setVolume",[X8],Object.getOwnPropertyDescriptor(gr.prototype,"setVolume"),gr.prototype),_t(gr.prototype,"setPlaybackDevice",[J8,Q8],Object.getOwnPropertyDescriptor(gr.prototype,"setPlaybackDevice"),gr.prototype),_t(gr.prototype,"setEnabled",[Z8,e7,t7],Object.getOwnPropertyDescriptor(gr.prototype,"setEnabled"),gr.prototype),_t(gr.prototype,"setMuted",[r7,n7,i7],Object.getOwnPropertyDescriptor(gr.prototype,"setMuted"),gr.prototype),_t(gr.prototype,"getStats",[a7],Object.getOwnPropertyDescriptor(gr.prototype,"getStats"),gr.prototype),_t(gr.prototype,"setAudioFrameCallback",[o7],Object.getOwnPropertyDescriptor(gr.prototype,"setAudioFrameCallback"),gr.prototype),_t(gr.prototype,"play",[s7,l7],Object.getOwnPropertyDescriptor(gr.prototype,"play"),gr.prototype),_t(gr.prototype,"stop",[c7,u7],Object.getOwnPropertyDescriptor(gr.prototype,"stop"),gr.prototype),_t(gr.prototype,"close",[d7],Object.getOwnPropertyDescriptor(gr.prototype,"close"),gr.prototype),_t(gr.prototype,"pipe",[h7],Object.getOwnPropertyDescriptor(gr.prototype,"pipe"),gr.prototype),_t(gr.prototype,"unpipe",[f7],Object.getOwnPropertyDescriptor(gr.prototype,"unpipe"),gr.prototype),gr),_T=(p7=Ve({argsMap:(e,t)=>[e.getTrackId(),t]}),m7=Br(),g7=Ym("MicrophoneAudioTrack","_enabledMutex"),y7=Ve({argsMap:(e,t,r)=>[e.getTrackId(),t,r]}),v7=Br(),b7=Ve({argsMap:e=>[e.getTrackId()]}),_t((Pl=class extends Ir{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,r,n){super(e,t.encoderConfig?wT(t.encoderConfig):{},n,M("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),te(this,"_config",void 0),te(this,"_deviceName","default"),te(this,"_constraints",void 0),te(this,"_originalConstraints",void 0),te(this,"_enabled",!0),this._config=t,this._constraints=r,this._originalConstraints=r,this._deviceName=e.label,typeof t.bypassWebAudio=="boolean"&&(this._bypassWebAudio=t.bypassWebAudio),(qm()||qP())&&zt.bindInterruptDetectorTrack(this)}async setDevice(e){if(_.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{let t=await lo.getDeviceById(e),r={};r.audio=mr({},this._constraints),r.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let n=null;try{n=await io(r,this.getTrackId())}catch(i){throw _.error("[".concat(this.getTrackId(),"] setDevice failed"),i.toString()),n=await io({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),i}await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(t){throw _.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}else try{let t=await lo.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(t){throw _.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}_.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,r){if(t)return _.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!r){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(_.info("[".concat(this.getTrackId(),"] start setEnabled"),e),M("AUTO_RESET_AUDIO_ROUTE")&&(Qi()||Ms())){let o=navigator.audioSession;o&&(e||(o.type="playback"),o.type="auto")}if(!e){var n;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(n=this._source.clonedTrack)===null||n===void 0||n.stop(),r||(this._enabled=!1);try{await Qt(this,we.NEED_DISABLE_TRACK,this)}catch(o){throw _.error("[".concat(this.getTrackId(),"] setEnabled false failed"),o.toString()),o}return}let i=mr({},this._constraints),a=lo.searchDeviceIdByName(this._deviceName);a&&!i.deviceId&&(i.deviceId=a);try{r||(this._enabled=!0);let o=await io({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(o.getAudioTracks()[0],!1),await Qt(this,we.NEED_ENABLE_TRACK,this)}catch(o){throw r||(this._enabled=!1),_.error("[".concat(this.getTrackId(),"] setEnabled true failed"),o.toString()),o}_.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(qm()||qP())&&zt.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Qi()||Ms())&&this._enabled&&!this._isClosed&&zt.duringInterruption){let e=async()=>{zt.off(Bn.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(_.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};zt.on(Bn.IOS_INTERRUPTION_END,e)}else _.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Mg.TRACK_ENDED)}async renewMediaStreamTrack(e){let t=e||this._constraints,r=lo.searchDeviceIdByName(this._deviceName);if(r&&!t.deviceId&&(t.deviceId=r),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();let n=await io({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(vo.REQUEST_UPDATE_CONSTRAINTS,async(t,r,n)=>{try{let i=Object.assign({},this._originalConstraints,...t);await this.renewMediaStreamTrack(i),r()}catch(i){n(i)}})}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(vo.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[p7,m7],Object.getOwnPropertyDescriptor(Pl.prototype,"setDevice"),Pl.prototype),_t(Pl.prototype,"setEnabled",[g7,y7,v7],Object.getOwnPropertyDescriptor(Pl.prototype,"setEnabled"),Pl.prototype),_t(Pl.prototype,"close",[b7],Object.getOwnPropertyDescriptor(Pl.prototype,"close"),Pl.prototype),Pl),$7e=(w7=Ve({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),E7=Br(),_7=Ve({argsMap:e=>[e.getTrackId()]}),S7=Br(),T7=Ve({argsMap:e=>[e.getTrackId()]}),C7=Br(),x7=Ve({argsMap:e=>[e.getTrackId()]}),R7=Br(),I7=Ve({argsMap:e=>[e.getTrackId()]}),N7=Br(),A7=Ve({argsMap:e=>[e.getTrackId()]}),O7=Ve({argsMap:e=>[e.getTrackId()]}),k7=Br(),_t((Yn=class extends Ir{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,r,n){super(t.createOutputTrack(),r,n),te(this,"source",void 0),te(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(oo.AUDIO_SOURCE_STATE_CHANGE,i=>{this.safeEmit(Mg.SOURCE_STATE_CHANGE,i)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){Kt(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}).prototype,"startProcessAudioBuffer",[w7,E7],Object.getOwnPropertyDescriptor(Yn.prototype,"startProcessAudioBuffer"),Yn.prototype),_t(Yn.prototype,"pauseProcessAudioBuffer",[_7,S7],Object.getOwnPropertyDescriptor(Yn.prototype,"pauseProcessAudioBuffer"),Yn.prototype),_t(Yn.prototype,"seekAudioBuffer",[T7,C7],Object.getOwnPropertyDescriptor(Yn.prototype,"seekAudioBuffer"),Yn.prototype),_t(Yn.prototype,"resumeProcessAudioBuffer",[x7,R7],Object.getOwnPropertyDescriptor(Yn.prototype,"resumeProcessAudioBuffer"),Yn.prototype),_t(Yn.prototype,"stopProcessAudioBuffer",[I7,N7],Object.getOwnPropertyDescriptor(Yn.prototype,"stopProcessAudioBuffer"),Yn.prototype),_t(Yn.prototype,"close",[A7],Object.getOwnPropertyDescriptor(Yn.prototype,"close"),Yn.prototype),_t(Yn.prototype,"setAudioBufferPlaybackSpeed",[O7,k7],Object.getOwnPropertyDescriptor(Yn.prototype,"setAudioBufferPlaybackSpeed"),Yn.prototype),Yn),_n=class hie extends Ir{get __className__(){return"MixingAudioTrack"}get isActive(){for(let t of this.trackList)if(t._enabled&&!t._isClosed&&!t.muted)return!0;return!1}constructor(){let t=Fg().createMediaStreamDestination();super(t.stream.getAudioTracks()[0],void 0,rr(8,"track-mix-")),te(this,"trackList",void 0),te(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=t,this.trackList=[]}hasAudioTrack(t){return this.trackList.indexOf(t)!==-1}addAudioTrack(t){this.trackList.indexOf(t)===-1?(_.debug("add ".concat(t.getTrackId()," to mixing track")),t._source.outputNode.connect(this.destNode),this.trackList.push(t),this.updateEncoderConfig()):_.debug("track ".concat(t.getTrackId()," is already added"))}removeAudioTrack(t){if(this.trackList.indexOf(t)!==-1){_.debug("remove ".concat(t.getTrackId()," from mixing track"));try{t._source.outputNode.disconnect(this.destNode)}catch{}vT(this.trackList,t),this.updateEncoderConfig()}}updateEncoderConfig(){let t={};this.trackList.forEach(r=>{r._encoderConfig&&((r._encoderConfig.bitrate||0)>(t.bitrate||0)&&(t.bitrate=r._encoderConfig.bitrate),(r._encoderConfig.sampleRate||0)>(t.sampleRate||0)&&(t.sampleRate=r._encoderConfig.sampleRate),(r._encoderConfig.sampleSize||0)>(t.sampleSize||0)&&(t.sampleSize=r._encoderConfig.sampleSize),r._encoderConfig.stereo&&(t.stereo=!0))}),this._encoderConfig=t}_updateRtpTransceiver(t){this._rtpTransceiver!==t&&(this._rtpTransceiver=t,this.trackList.forEach(r=>{r instanceof hie?r.emit(Hh.TRANSCEIVER_UPDATED,t):r._updateRtpTransceiver(t)}))}},H7e=class extends Jne{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(oo.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),te(this,"audioBuffer",void 0),te(this,"sourceNode",void 0),te(this,"startPlayTime",0),te(this,"startPlayOffset",0),te(this,"pausePlayTime",0),te(this,"options",void 0),te(this,"currentLoopCount",0),te(this,"currentPlaybackSpeed",100),te(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){this.currentState==="stopped"?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):_.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=e,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){let e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}},P7=new Map,DM=class{get rendFrameRate(){if(this.renderStats&&this.renderStats.curTs!==this.renderStats.lastTs){let e=this.renderStats.curTs-this.renderStats.lastTs,t=(this.renderStats.renderNum-this.renderStats.lastRenderNum)/e;return this.renderStats.lastRenderNum=this.renderStats.renderNum,this.renderStats.lastTs=this.renderStats.curTs,t}return 0}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(_.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(this._videoState=e,(t=this.onVideoStateChanged)===null||t===void 0||t.call(this,this.videoState))}constructor(e){te(this,"trackId",void 0),te(this,"config",void 0),te(this,"onFirstVideoFrameDecoded",void 0),te(this,"onVideoStateChanged",void 0),te(this,"freezeTimeCounterList",[]),te(this,"renderFreezeAccTime",0),te(this,"isKeepLastFrame",!1),te(this,"timeUpdatedCount",0),te(this,"freezeTime",0),te(this,"playbackTime",0),te(this,"lastTimeUpdatedTime",0),te(this,"autoplayFailed",!1),te(this,"videoTrack",void 0),te(this,"videoElement",void 0),te(this,"cacheVideoElement",void 0),te(this,"renderStats",void 0),te(this,"_videoState",kl.VideoStateStopped),te(this,"videoElementCheckInterval",void 0),te(this,"videoElementFreezeTimeout",void 0),te(this,"_videoElementStatus",ji.NONE),te(this,"isGettingVideoDimensions",!1),te(this,"startGetVideoDimensions",()=>{let t=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return _.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(t,500)};!this.isGettingVideoDimensions&&t()}),te(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&zt.curState==="running"&&(_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(B$())),G$()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),te(this,"handleVideoEvents",t=>{switch(t.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=ji.PLAYING;break;case"loadeddata":if(this.videoState=kl.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=ji.CANPLAY;break;case"stalled":this.videoElementStatus=ji.STALLED;break;case"suspend":this.videoElementStatus=ji.SUSPEND;break;case"pause":this.videoElementStatus=ji.PAUSED,Qi()||Ms()||ni()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(_.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=ji.WAITING;break;case"abort":this.videoElementStatus=ji.ABORT;break;case"ended":this.videoElementStatus=ji.ENDED;break;case"emptied":this.videoElementStatus=ji.EMPTIED;break;case"error":{let r=this.videoElement.error;r?(this.videoElementStatus=ji.ERROR,_.error("[".concat(this.trackId,"] media error: ").concat(r.message," (").concat(r.code,")"))):_.debug("[".concat(this.trackId,"] media not been an error."));break}case"timeupdate":{let r=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=r);let n=r-this.lastTimeUpdatedTime,i=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=r,kc.lastVisibleTime<kc.lastHiddenTime||i<kc.lastHiddenTime||i<kc.lastVisibleTime)return;for(n>M("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=n),this.playbackTime+=n;this.playbackTime>=6e3;){this.playbackTime-=6e3;let a=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(a),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),te(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(_.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(B$())),G$()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),zt.on(Bn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),zt.on(Bn.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return(e=this.videoElement.parentElement)!==null&&e!==void 0?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){let t=this.videoElement.play();t&&t.catch&&t.catch(n=>{e&&iie(e,"video",n.message,this.trackId),n.name==="NotAllowedError"?(_.warning("detected video element autoplay failed",n),this.autoplayFailed=!0,this.handleAutoPlayFailed()):_.warning("[".concat(this.trackId,"] play warning: "),n)});let r=Ct();if((r.name==="Safari"&&Number(r.version)===15||qm())&&t&&t.then){let n=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(n).catch(n)}}getCurrentFrame(){let e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;let t=e.getContext("2d");if(!t)return _.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);let r=t.getImageData(0,0,e.width,e.height);return e.remove(),r}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;let n=r.getContext("2d");return n?(n.drawImage(this.videoElement,0,0,r.width,r.height),new ye((i,a)=>{r.toBlob(async o=>{if(r.remove(),o){let s=await die(o);i({buffer:s,width:r.width,height:r.height})}else a(new ee(k.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},e,t<0?.1:t>1?1:t)})):await PM(e)}destroy(){this.renderStats=void 0,zt.off(Bn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),zt.off(Bn.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=kl.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=ji.INIT,!this.videoElementCheckInterval&&(D7.forEach(i=>{this.videoElement.addEventListener(i,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(i){return i!==document.body&&document.body.contains(i)})(this.videoElement)||(this.videoElementStatus=ji.DESTROYED)},1e3),M("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let i,a=()=>{document.visibilityState==="visible"&&(document.removeEventListener("visibilitychange",a),this.videoElementFreezeTimeout=window.setTimeout(o,M("VIDEO_FREEZE_DURATION")))},o=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===kl.VideoStateDecoding&&(document.visibilityState==="visible"?this.videoState=kl.VideoStateFrozen:document.addEventListener("visibilitychange",a))},s=(l,c)=>{if(this.videoElementStatus===ji.PLAYING){if(this.renderStats?(this.renderStats.renderNum++,this.renderStats.curTs=c.mediaTime):this.renderStats={lastTs:c.mediaTime,curTs:c.mediaTime,lastRenderNum:0,renderNum:0},i){let f=c.presentationTime-i.presentationTime;this.videoState===kl.VideoStateStarting&&(this.videoState=kl.VideoStateDecoding),this.videoState===kl.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(o,M("VIDEO_FREEZE_DURATION"))),f<M("VIDEO_FREEZE_DURATION")&&this.videoState===kl.VideoStateFrozen&&(this.videoState=kl.VideoStateDecoding),f>M("VIDEO_FREEZE_DURATION")&&kc.lastVisibleTime>=kc.lastHiddenTime&&i.timestamp>kc.lastVisibleTime&&i.timestamp>kc.lastHiddenTime&&(this.renderFreezeAccTime+=f)}i=mr(mr({},c),{},{timestamp:l})}var u,h;M("ENABLE_VIDEO_FRAME_CALLBACK")&&((u=(h=this.videoElement).requestVideoFrameCallback)===null||u===void 0||u.call(h,s))};(e=(t=this.videoElement).requestVideoFrameCallback)===null||e===void 0||e.call(t,s)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),_x()&&!M("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");let r=Ct();r.name==="Safari"&&Number(r.version)===15||qm()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Ar()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Ar()&&this.videoElement.load());let n=this.videoElement.play();n!==void 0&&n.catch(i=>{_.debug("[".concat(this.trackId,"] playback interrupted"),i.toString())})}resetVideoElement(){D7.forEach(e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=ji.NONE}handleAutoPlayFailed(){let e=t=>{t.preventDefault(),this.videoElement.play().then(()=>{_.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(r=>{_.error(r)}),this.autoplayFailed=!1,Ov()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};Ov()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),nie()}},D7=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"],fie=class extends DM{constructor(e){super(e),te(this,"container",void 0),te(this,"slot",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;let t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;(t=this.container)!==null&&t!==void 0&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return(e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(t=this.container)!==null&&t!==void 0&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,r):await PM(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",M("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||(e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var e;if((e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var e;(e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}},L7,j7,M7,U7,F7,V7,B7,$7,H7,z7,G7,W7,K7,q7,Y7,X7,J7,Q7,Z7,eH,tH,rH,nH,iH,bt,aH,oH,sH,lH,cH,uH,dH,hH,Ya,sr=(L7=Ve({argsMap:(e,t,r)=>[e.getTrackId(),typeof t=="string"?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",r]}),j7=Br(),M7=Ve({argsMap:e=>[e.getTrackId()]}),U7=Ym("LocalVideoTrack","_enabledMutex"),F7=Ve({argsMap:(e,t)=>[e.getTrackId(),t]}),V7=Br(),B7=Ym("LocalVideoTrack","_enabledMutex"),$7=Ve({argsMap:(e,t)=>[e.getTrackId(),t]}),H7=Br(),z7=Ve({argsMap:(e,t)=>[e.getTrackId(),t]}),G7=Br(),W7=Br(),K7=Ve({argsMap:(e,t,r)=>[e.getTrackId(),t,r]}),q7=Br(),Y7=Br(),X7=Br(),J7=Br(),Q7=Br(),Z7=Br(),eH=Br(),tH=Ve({argsMap:(e,t)=>[e.getTrackId(),t.name]}),rH=Ve({argsMap:e=>[e.getTrackId()]}),nH=Ve({argsMap:e=>[e.getTrackId()]}),iH=Ve({argsMap:(e,t,r)=>[e.getTrackId(),t.label,r]}),bt=class pie extends Zp{get videoHeight(){if(ni()){let{height:t}=this._mediaStreamTrack.getSettings();return this._videoHeight=t,this._videoHeight}return this._videoHeight}get videoWidth(){if(ni()){let{width:t}=this._mediaStreamTrack.getSettings();return this._videoWidth=t,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==ji.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(t){this._processorContext=t}get __className__(){return"LocalVideoTrack"}constructor(t,r,n,i,a,o){if(super(t,a),te(this,"trackMediaType",Ug.VIDEO),te(this,"_player",void 0),te(this,"isUseScaleResolutionDownBy",!1),te(this,"_videoVisibleTimer",null),te(this,"_previousVideoVisibleStatus",void 0),te(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),te(this,"_encoderConfig",void 0),te(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),te(this,"_optimizationMode",void 0),te(this,"_videoHeight",void 0),te(this,"_videoWidth",void 0),te(this,"_forceBitrateLimit",void 0),te(this,"_enabled",!0),te(this,"_processorDestination",void 0),te(this,"_processorContext",void 0),ni()){let{width:s,height:l}=t.getSettings();this._videoWidth=s,this._videoHeight=l}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=r,this._scalabilityMode=n,this._optimizationMode=i,this._hints=o||[],this._hints.indexOf(hr.SCREEN_TRACK)===-1)this.updateBitrateFromProfile();else if(function(s,l,c){let u=Ct();return!(u.name!==s||!u.osVersion)&&Number(u.version)===l}(Mt.CHROME,115)&&Ex().indexOf("Windows")!==-1){let s=function(l,c){if("VideoFrame"in window&&"TransformStream"in window&&Rt().supportWebRTCInsertableStream){let u=new MediaStreamTrackProcessor(l),h=new MediaStreamTrackGenerator({kind:"video"}),f,p,m=Date.now(),g=()=>{y&&(clearInterval(y),y=void 0),f&&(f.close(),f=void 0),l.stop(),p=void 0,h.removeEventListener("ended",g)},y=window.setInterval(()=>{if(p&&f&&Date.now()-m>1e3)try{h.readyState==="live"?p.enqueue(f.clone()):g()}catch{g()}},1e3),v=new TransformStream({transform:(b,E)=>{h.readyState==="live"?(p=E,m=Date.now(),f===void 0?(f=b,E.enqueue(b.clone())):(E.enqueue(f),f=b)):b.close()}});return h.addEventListener("ended",g),u.readable.pipeThrough(v).pipeTo(h.writable),h}}(t);s&&(_.info("local screen video track begin to inject frame"),this._mediaStreamTrack=s)}r&&this._hints.indexOf(hr.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(r),this._processorContext=new oie(this.getTrackId(),"local"),this._processorDestination=new aie(this.processorContext),this.bindProcessorDestinationEvents()}play(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string"){let i=document.getElementById(t);i?t=i:(_.warning("[".concat(this.getTrackId(),'] can not find "#').concat(t,'" element, use document.body')),t=document.body)}_.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(r));let n=mr(mr(mr({},this._getDefaultPlayerConfig()),r),{},{trackId:this.getTrackId(),element:t});this._player?this._player.updateConfig(n):(t instanceof HTMLVideoElement?this._player=new DM(n):this._player=new fie(n),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{let i=this.getVideoElementVisibleStatus();this.safeEmit(Mg.VIDEO_ELEMENT_VISIBLE_STATUS,i)}catch{}},M("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,_.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(t,r){if(!r){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(_.info("[".concat(this.getTrackId(),"] start setEnabled"),t),!t){this._originMediaStreamTrack.enabled=!1;try{await Qt(this,we.NEED_DISABLE_TRACK,this)}catch(n){throw _.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}return r||(this._enabled=!1),void _.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Qt(this,we.NEED_ENABLE_TRACK,this)}catch(n){throw _.error("[".concat(this.getTrackId(),"] setEnabled to true error"),n.toString()),n}_.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}async setMuted(t){t!==this._muted&&(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,_.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),t?await Qt(this,we.NEED_MUTE_TRACK,this):await Qt(this,we.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(t,r){if(!this._enabled)throw new ee(k.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(t=Zl(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),t.width||t.height||t.frameRate){let n=ET({encoderConfig:t});(ni()||Qi()||Ms())&&(n.deviceId=void 0),_.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(n));try{await this._originMediaStreamTrack.applyConstraints(n),this.updateMediaStreamTrackResolution()}catch(i){let a=new ee(k.UNEXPECTED_ERROR,i.toString());throw _.error("[".concat(this.getTrackId(),"] applyConstraints error"),a.toString()),a}}this._encoderConfig=t,this._hints.indexOf(hr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Qt(this,we.NEED_UPDATE_VIDEO_ENCODER,this)}catch(n){return n.throw(_)}}getStats(){return Ad(()=>{_.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Bo(this,we.GET_STATS)||mr({},oD)}async setBeautyEffect(t){_.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(t,r):await PM(t)}async setBitrateLimit(t){if(_.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(t))),t){this._forceBitrateLimit=t,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<t.max_bitrate?this._encoderConfig.bitrateMax:t.max_bitrate:this._encoderConfig.bitrateMax=t.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=t.min_bitrate);try{await Qt(this,we.NEED_UPDATE_VIDEO_ENCODER,this)}catch(r){return r.throw(_)}}}async setOptimizationMode(t){if(t!=="motion"&&t!=="detail"&&t!=="balanced")return void _.error(k.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");let r=this._optimizationMode;try{this._optimizationMode=t,await Qt(this,we.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(n){throw this._optimizationMode=r,_.error("[".concat(this.getTrackId(),"] set optimization mode failed"),n.toString()),n}_.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(t,")"))}setScalabiltyMode(t){if(t.numSpatialLayers===1&&t.numTemporalLayers!==1)return _.error(k.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=t,_.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(t,")"))}updateMediaStreamTrackResolution(){cie(this._originMediaStreamTrack).then(t=>{let[r,n]=t;this._videoHeight=n,this._videoWidth=r}).catch(Cx)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(t){if(!this._enabled)throw new ee(k.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");_.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(t)),t=Zl(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),this._encoderConfig=t,this._hints.indexOf(hr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Qt(this,we.NEED_UPDATE_VIDEO_ENCODER,this)}catch(r){return r.throw(_)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;let{width:t,height:r,frameRate:n}=this.getMediaStreamTrackSettings();if(!t||!r||!n)return;let{bitrateMax:i,bitrateMin:a}=this._encoderConfig;if(a==null||i==null){let{max:o,min:s}=function(l,c,u,h,f){let p=M("BITRATE_ADAPTER_TYPE");if(p==="DEFAULT_BITRATE")return{min:h,max:f};if(f===void 0){var m;let y=Math.floor(200*Math.pow(u/15,.6)*Math.pow(l*c/640/360,.75));f=p==="STANDARD_BITRATE"?4*y:2*y,h=(m=h)!==null&&m!==void 0?m:y}else{var g;h=(g=h)!==null&&g!==void 0?g:Math.floor(f/10)}return{min:h,max:f}}(t,r,n,a,i);this._encoderConfig.bitrateMin=s,this._encoderConfig.bitrateMax=o,_.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(t,", h: ").concat(r,", fps: ").concat(n,"] => [brMax: ").concat(o,", brMin: ").concat(s,"]"))}}getVideoElementVisibleStatus(){try{var t,r;let n=this==null||(t=this._player)===null||t===void 0?void 0:t.getContainerElement(),i={track:this,element:this==null||(r=this._player)===null||r===void 0?void 0:r.getVideoElement(),slot:n==null?void 0:n.parentElement},{element:a,slot:o}=i;if(this.isPlaying&&a instanceof HTMLVideoElement&&o instanceof HTMLElement){let s=_ne.checkOneElementVisible(a),l=Object.assign({},s);if(l.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=l.visible;let c=xe.reportApiInvoke(null,{tag:Nr.TRACER,name:sn.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});l.visible?c.onSuccess("Video is visible"):c.onSuccess("Invisible because of ".concat(l.reason))}return l}return}catch(n){throw new ee(k.GET_VIDEO_ELEMENT_VISIBLE_ERROR,n.message)}}async renewMediaStreamTrack(t){}pipe(t){if(this.processor===t)return t;if(t._source)throw new ee(k.INVALID_OPERATION,"Processor ".concat(t.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=t,this.processor._source=this,t.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),t}unpipe(){if(!this.processor)return;let t=this.processor;this.processor._source=void 0,this.processor=void 0,t.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(t){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this._encoderConfig;t&&(n=mr(mr({},n),Zl(t))),n=xh(n);let i=rr(8,"track-video-cloned-"),a=new pie(r?this._mediaStreamTrack.clone():this._mediaStreamTrack,n,xh(this._scalabilityMode),this._optimizationMode,i,xh(this._hints));return t&&n&&a.setEncoderConfiguration(n),_.debug("clone video track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(r)),a}async replaceTrack(t,r){if(!(t instanceof MediaStreamTrack))throw new ee(k.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(t.kind!=="video")throw new ee(k.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(t,r,!0),this.updateMediaStreamTrackResolution()}sendSeiData(t){if(Ad(()=>{xe.reportApiInvoke(null,{name:sn.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:Nr.TRACER}).onSuccess("")},this._mediaStreamTrack.id||this.getTrackId()),!M("ENABLE_VIDEO_SEI")||!M("ENABLE_ENCODED_TRANSFORM"))return void _.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(t instanceof Uint8Array==0)return new ee(k.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();let r=this.getRTCRtpTransceiver();if(!r)return void _.warning("Video track is not published, SEI can not be send");let n=r.sender.getParameters();if(n.codecs.length===0)return;let i=n.codecs[0].mimeType.toLocaleLowerCase();i==="video/h264"?this.safeEmit("sei-to-send",t):_.warning("SEI is not supported by ".concat(i))}bindProcessorDestinationEvents(){this.processorDestination.on(Zi.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(),await Qt(this,we.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Qt(this,we.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Zi.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(vo.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(vo.REQUEST_CONSTRAINTS)}},_t(bt.prototype,"play",[L7,j7],Object.getOwnPropertyDescriptor(bt.prototype,"play"),bt.prototype),_t(bt.prototype,"stop",[M7],Object.getOwnPropertyDescriptor(bt.prototype,"stop"),bt.prototype),_t(bt.prototype,"setEnabled",[U7,F7,V7],Object.getOwnPropertyDescriptor(bt.prototype,"setEnabled"),bt.prototype),_t(bt.prototype,"setMuted",[B7,$7,H7],Object.getOwnPropertyDescriptor(bt.prototype,"setMuted"),bt.prototype),_t(bt.prototype,"setEncoderConfiguration",[z7,G7],Object.getOwnPropertyDescriptor(bt.prototype,"setEncoderConfiguration"),bt.prototype),_t(bt.prototype,"getStats",[W7],Object.getOwnPropertyDescriptor(bt.prototype,"getStats"),bt.prototype),_t(bt.prototype,"setBeautyEffect",[K7,q7],Object.getOwnPropertyDescriptor(bt.prototype,"setBeautyEffect"),bt.prototype),_t(bt.prototype,"getCurrentFrameData",[Y7],Object.getOwnPropertyDescriptor(bt.prototype,"getCurrentFrameData"),bt.prototype),_t(bt.prototype,"getCurrentFrameImage",[X7],Object.getOwnPropertyDescriptor(bt.prototype,"getCurrentFrameImage"),bt.prototype),_t(bt.prototype,"setBitrateLimit",[J7],Object.getOwnPropertyDescriptor(bt.prototype,"setBitrateLimit"),bt.prototype),_t(bt.prototype,"setOptimizationMode",[Q7],Object.getOwnPropertyDescriptor(bt.prototype,"setOptimizationMode"),bt.prototype),_t(bt.prototype,"setScalabiltyMode",[Z7],Object.getOwnPropertyDescriptor(bt.prototype,"setScalabiltyMode"),bt.prototype),_t(bt.prototype,"updateMediaStreamTrackResolution",[eH],Object.getOwnPropertyDescriptor(bt.prototype,"updateMediaStreamTrackResolution"),bt.prototype),_t(bt.prototype,"pipe",[tH],Object.getOwnPropertyDescriptor(bt.prototype,"pipe"),bt.prototype),_t(bt.prototype,"unpipe",[rH],Object.getOwnPropertyDescriptor(bt.prototype,"unpipe"),bt.prototype),_t(bt.prototype,"close",[nH],Object.getOwnPropertyDescriptor(bt.prototype,"close"),bt.prototype),_t(bt.prototype,"replaceTrack",[iH],Object.getOwnPropertyDescriptor(bt.prototype,"replaceTrack"),bt.prototype),bt),cD=(aH=Ve({argsMap:(e,t)=>[e.getTrackId(),t]}),oH=Br(),sH=Ym("CameraVideoTrack","_enabledMutex"),lH=Ve({argsMap:(e,t)=>[e.getTrackId(),t]}),cH=Br(),uH=Ve({argsMap:(e,t)=>[e.getTrackId(),t]}),dH=Br(),hH=Ve({argsMap:e=>[e.getTrackId()]}),Ya=class mie extends sr{get __className__(){return"CameraVideoTrack"}constructor(t,r,n,i,a,o){super(t,Zl(r.encoderConfig),i,a,o),te(this,"_config",void 0),te(this,"_originalConstraints",void 0),te(this,"_constraints",void 0),te(this,"_enabled",!0),te(this,"_deviceName","default"),te(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(qm()||qP())&&!function(){let s=Ct();if(s.os!==Sn.IOS||!s.osVersion)return!1;let l=s.osVersion.split(".");return Number(l[0])===15&&Number(l[1])>=2}()&&bne()&&this._enabled&&!this._isClosed&&(_.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=r,this._originalConstraints=n,this._constraints=n,this._deviceName=t.label,this._encoderConfig=Zl(this._config.encoderConfig),zt.on(Bn.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),zt.on(Bn.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(t){return typeof t=="string"?this._setDeviceById(t):t.deviceId?this._setDeviceById(t.deviceId):t.facingMode?this._setDeviceByFacingModel(t.facingMode):void 0}async _setDeviceById(t){if(_.info("[".concat(this.getTrackId(),"] set device to ").concat(t)),this._enabled)try{let r=await lo.getDeviceById(t),n={};n.video=mr({},this._constraints),n.video.deviceId={exact:t},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let i=null;try{i=await io(n,this.getTrackId())}catch(a){throw _.error("[".concat(this.getTrackId(),"] setDevice failed"),a.toString()),i=await io({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),a}await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=r.label,this._config.cameraId=t,this._constraints.deviceId={exact:t}}catch(r){throw _.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{let r=await lo.getDeviceById(t);this._deviceName=r.label,this._config.cameraId=t,this._constraints.deviceId={exact:t}}catch(r){throw _.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}_.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(t){_.info("[".concat(this.getTrackId(),"] set facingMode ").concat(t));let r={video:mr(mr({},this._constraints),{},{deviceId:void 0,facingMode:{exact:t}})};if(this._enabled){this._originMediaStreamTrack.stop();let n=null;try{n=await io(r,this.getTrackId())}catch(i){throw _.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),i.toString()),n=await io({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),i}await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=t,this._config.cameraId=void 0,this._constraints=mr({},r.video),_.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(t,r){if(!r){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(_.info("[".concat(this.getTrackId(),"] start setEnabled"),t),t){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{let n=await io({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1)}await Qt(this,we.NEED_ENABLE_TRACK,this)}catch(n){throw _.error("[".concat(this.getTrackId(),"] setEnabled true error"),n.toString()),n}this.updateMediaStreamTrackResolution(),_.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),r||(this._enabled=!1);try{await Qt(this,we.NEED_DISABLE_TRACK,this)}catch(n){throw _.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}_.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(t,r){if(!this._enabled)throw new ee(k.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");t=Zl(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate||t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate||t.bitrateMin);let n=Gr(this._config);n.encoderConfig=t;let i=ET(n);(ni()||Qi()||Ms())&&(i.deviceId=void 0),_.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(i));try{await this._originMediaStreamTrack.applyConstraints(i),this.updateMediaStreamTrackResolution()}catch(a){let o=new ee(k.UNEXPECTED_ERROR,a.toString());throw _.error("[".concat(this.getTrackId(),"] applyConstraints error"),o.toString()),o}this._config=n,this._constraints=i,this._originalConstraints=i,this._encoderConfig=t,this._hints.indexOf(hr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Qt(this,we.NEED_UPDATE_VIDEO_ENCODER,this)}catch(a){return a.throw(_)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Qi()||Ms())&&this._enabled&&!this._isClosed&&zt.duringInterruption){let t=async()=>{zt.off(Bn.IOS_INTERRUPTION_END,t),this._enabled&&!this._isClosed&&(_.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};zt.on(Bn.IOS_INTERRUPTION_END,t)}else _.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Mg.TRACK_ENDED)}async renewMediaStreamTrack(t){let r=t||this._constraints,n=lo.searchDeviceIdByName(this._deviceName);if(n&&!r.deviceId&&(r.deviceId={exact:n}),this._enabled){let i=await io({video:r},this.getTrackId());this._constraints=r,await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),zt.off(Bn.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),zt.off(Bn.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(t){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this._encoderConfig;t&&(n=mr(mr({},n),Zl(t))),n=xh(n);let i=rr(8,"track-cam-cloned-"),a=new mie(r?this._mediaStreamTrack.clone():this._mediaStreamTrack,xh(mr(mr({},this._config),{},{encoderConfig:n})),xh(this._constraints),xh(this._scalabilityMode),this._optimizationMode,i);return t&&n&&a.setEncoderConfiguration(n),_.debug("clone track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(r)),a}bindProcessorContextEvents(){this.processorContext.on(vo.REQUEST_UPDATE_CONSTRAINTS,async(t,r,n)=>{try{let i=Object.assign({},this._originalConstraints,...t);await this.renewMediaStreamTrack(i),r()}catch(i){n(i)}}),this.processorContext.on(vo.REQUEST_CONSTRAINTS,async t=>{t(this._originMediaStreamTrack.getSettings())})}},_t(Ya.prototype,"setDevice",[aH,oH],Object.getOwnPropertyDescriptor(Ya.prototype,"setDevice"),Ya.prototype),_t(Ya.prototype,"setEnabled",[sH,lH,cH],Object.getOwnPropertyDescriptor(Ya.prototype,"setEnabled"),Ya.prototype),_t(Ya.prototype,"setEncoderConfiguration",[uH,dH],Object.getOwnPropertyDescriptor(Ya.prototype,"setEncoderConfiguration"),Ya.prototype),_t(Ya.prototype,"close",[hH],Object.getOwnPropertyDescriptor(Ya.prototype,"close"),Ya.prototype),Ya);function AA(e,t,r,n){r.optimizationMode&&(n&&n.width&&n.height?(r.encoderConfig=mr(mr({},n),{},{bitrateMin:n.bitrateMin,bitrateMax:n.bitrateMax}),r.optimizationMode!=="motion"&&r.optimizationMode!=="detail"||(t.contentHint=r.optimizationMode,t.contentHint===r.optimizationMode?_.debug("[".concat(e,"] set content hint to"),r.optimizationMode):_.debug("[".concat(e,"] set content hint failed")))):_.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var fH,pH,mH,gH,xo,yH,vH,bH,wH,EH,_H,ki,gie=class extends Yne{getUserId(){return this._userId}constructor(e,t,r,n){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(n.clientId,"_").concat(rr(5,""))),te(this,"_userId",void 0),te(this,"_uintId",void 0),te(this,"_isDestroyed",!1),te(this,"store",void 0),te(this,"processor",void 0),te(this,"processorContext",void 0),this._userId=t,this._uintId=r,this.store=n}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,_.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}},vm=(fH=Ve({argsMap:(e,t,r)=>[e.getTrackId(),typeof t=="string"?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",r]}),pH=Ve({argsMap:e=>[e.getTrackId()]}),mH=Ve({argsMap:(e,t)=>[e.getTrackId(),t.name]}),gH=Ve({argsMap:e=>[e.getTrackId()]}),_t((xo=class extends gie{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==ji.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,r,n){super(e,t,r,n),te(this,"_videoVisibleTimer",null),te(this,"_previousVideoVisibleStatus",void 0),te(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),te(this,"trackMediaType",Ug.VIDEO),te(this,"_videoWidth",void 0),te(this,"_videoHeight",void 0),te(this,"_player",void 0),te(this,"processorDestination",void 0),te(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new oie(this.getTrackId(),"remote"),this.processorDestination=new aie(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Ad(()=>{_.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Bo(this,we.GET_STATS)||mr({},qne)}play(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="string"){let n=document.getElementById(e);n?e=n:(_.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}_.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));let r=mr(mr({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(r):(e instanceof HTMLVideoElement?this._player=new DM(r):this._player=new fie(r),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(ym.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=n=>{this.safeEmit(ym.VIDEO_STATE_CHANGED,n)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{let n=this.getVideoElementVisibleStatus();this.safeEmit(ym.VIDEO_ELEMENT_VISIBLE_STATUS,n)}catch{}},M("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,_.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){cie(this._originMediaStreamTrack).then(e=>{let[t,r]=e;this._videoHeight=r,this._videoWidth=t}).catch(Cx)}_updatePlayerSource(){_.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;let r=this==null||(e=this._player)===null||e===void 0?void 0:e.getContainerElement(),n={track:this,element:this==null||(t=this._player)===null||t===void 0?void 0:t.getVideoElement(),slot:r==null?void 0:r.parentElement},{element:i,slot:a}=n;if(this.isPlaying&&i instanceof HTMLVideoElement&&a instanceof HTMLElement){let o=_ne.checkOneElementVisible(i),s=Object.assign({},o);if(s.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=s.visible;let l=xe.reportApiInvoke(null,{tag:Nr.TRACER,name:sn.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});s.visible?l.onSuccess("Video is visible"):l.onSuccess("Invisible because of ".concat(s.reason))}return s}return}catch(r){throw new ee(k.GET_VIDEO_ELEMENT_VISIBLE_ERROR,r.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new ee(k.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;let e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Zi.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Zi.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(Hh.SEI_RECEIVED,e)}}).prototype,"play",[fH],Object.getOwnPropertyDescriptor(xo.prototype,"play"),xo.prototype),_t(xo.prototype,"stop",[pH],Object.getOwnPropertyDescriptor(xo.prototype,"stop"),xo.prototype),_t(xo.prototype,"pipe",[mH],Object.getOwnPropertyDescriptor(xo.prototype,"pipe"),xo.prototype),_t(xo.prototype,"unpipe",[gH],Object.getOwnPropertyDescriptor(xo.prototype,"unpipe"),xo.prototype),xo),bm=(yH=Ve({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),vH=Ve({argsMap:(e,t)=>[e.getTrackId(),t]}),bH=Ve({argsMap:e=>[e.getTrackId()]}),wH=Ve({argsMap:e=>[e.getTrackId()]}),EH=Ve({argsMap:(e,t)=>[e.getTrackId(),t.name]}),_H=Ve({argsMap:e=>[e.getTrackId()]}),_t((ki=class extends gie{get isPlaying(){return this._useAudioElement?ca.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,r,n){super(e,t,r,n),te(this,"trackMediaType",Ug.AUDIO),te(this,"_source",void 0),te(this,"_useAudioElement",!0),te(this,"_volume",100),te(this,"processorContext",void 0),te(this,"processorDestination",void 0),te(this,"_played",!1),te(this,"_bypassWebAudio",!1),M("DISABLE_WEBAUDIO")?(this._source=new lD,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new Qne(e,!0),M("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(oo.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(ym.FIRST_FRAME_DECODED)}),this.processorContext=new lie(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new sie(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(oo.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!e)return this._source.removeAllListeners(oo.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(oo.ON_AUDIO_BUFFER),this._source.on(oo.ON_AUDIO_BUFFER,r=>e(r))}setVolume(e){this._volume=e,this._useAudioElement?ca.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!Wne())throw new ee(k.NOT_SUPPORTED,"your browser does not support setting the audio output device");await ca.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Ad(()=>{_.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Bo(this,we.GET_STATS)||mr({},Kne)}play(){_.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(_.debug("[".concat(this.getTrackId(),"] use audio element to play")),ca.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){_.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?ca.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];_.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&ca.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new ee(k.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new ee(k.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new ee(k.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;let t=this.processor;(e=this._source.processSourceNode)===null||e===void 0||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Zi.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(Zi.ON_NODE,e=>{this._source.processedNode=e;let t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Zi.ON_TRACK),this.processorDestination.removeAllListeners(Zi.ON_NODE)}}).prototype,"setVolume",[yH],Object.getOwnPropertyDescriptor(ki.prototype,"setVolume"),ki.prototype),_t(ki.prototype,"setPlaybackDevice",[vH],Object.getOwnPropertyDescriptor(ki.prototype,"setPlaybackDevice"),ki.prototype),_t(ki.prototype,"play",[bH],Object.getOwnPropertyDescriptor(ki.prototype,"play"),ki.prototype),_t(ki.prototype,"stop",[wH],Object.getOwnPropertyDescriptor(ki.prototype,"stop"),ki.prototype),_t(ki.prototype,"pipe",[EH],Object.getOwnPropertyDescriptor(ki.prototype,"pipe"),ki.prototype),_t(ki.prototype,"unpipe",[_H],Object.getOwnPropertyDescriptor(ki.prototype,"unpipe"),ki.prototype),ki),kc=new class extends Tr{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),te(this,"_lastHiddenTime",0),te(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),_.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}},yie=class extends Tr{constructor(e,t){super(),te(this,"trackMediaType",Ug.DATA),te(this,"_version",1),te(this,"_type",3),te(this,"_config",void 0),te(this,"_originDataChannel",void 0),te(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),te(this,"_dataStreamPacketHandler",{serialize:r=>r,deserialize:r=>r}),te(this,"_datachannelEventMap",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader()}useDataStream(e){this._dataStreamPacketHandler=e}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return M("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var e,t;return(e=(t=this._originDataChannel)===null||t===void 0?void 0:t.readyState)!==null&&e!==void 0?e:"connecting"}get _originDataChannelId(){var e,t;return(e=(t=this._originDataChannel)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new ye((e,t)=>{if(this._originDataChannel){this._originDataChannel.readyState==="open"&&e();let r=setTimeout(()=>{var n;t(new ee(k.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat((n=this._originDataChannel)===null||n===void 0?void 0:n.id)))},1e4);this._originDataChannel.onopen=()=>{clearTimeout(r),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(r),new ee(k.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new ee(k.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))})}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){let e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[A_.OPEN,A_.CLOSE,A_.ERROR].forEach(t=>{let r=()=>{this.emit(t)};this._datachannelEventMap.set(t,r),e.addEventListener(t,r)})}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach(t=>{let[r,n]=t;e.removeEventListener(r,n)}),this._datachannelEventMap.clear()}},z7e=class extends yie{constructor(e){super(e),te(this,"_messageListener",void 0),this._messageListener=t=>{if(t.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);let r=t.data.slice(0,this._dataStreamPacketHeader.byteLength),n=new DataView(r).getUint8(3);if(n!==this.id)return void(M("SHOW_DATASTREAM2_LOG")&&_.debug("invalid datachannel id: ".concat(n," !== ").concat(this.id)));let i=t.data.slice(this._dataStreamPacketHeader.byteLength);i=this._dataStreamPacketHandler.deserialize(i),this.emit(A_.MESSAGE,i)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}},G7e=class extends yie{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);let r=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);r.set(new Uint8Array(this._dataStreamPacketHeader),0),r.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(r.buffer)}}};function k_(){let e=new Blob([atob("ZnVuY3Rpb24gZShlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLGE9W10sbz0wO2Zvcig7YS5sZW5ndGg8bjspbyszPG4mJjA9PT1yW29dJiYwPT09cltvKzFdJiYzPT09cltvKzJdJiYoMD09PXJbbyszXXx8MT09PXJbbyszXXx8Mj09PXJbbyszXXx8Mz09PXJbbyszXSk/KGEucHVzaChyW29dLHJbbysxXSxyW28rM10pLG8rPTQpOihhLnB1c2gocltvXSksbysrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9ZnVuY3Rpb24gdChlLHQpe2NvbnN0IG49ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmxlbmd0aDtsZXQgbj1bXSxyPTA7Zm9yKDtyPHQ7KXIrMjx0JiYwPT09ZVtyXSYmMD09PWVbcisxXSYmKDA9PT1lW3IrMl18fDE9PT1lW3IrMl18fDI9PT1lW3IrMl18fDM9PT1lW3IrMl0pPyhuLnB1c2goZVtyXSxlW3IrMV0sMyxlW3IrMl0pLHIrPTMpOihuLnB1c2goZVtyXSkscisrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9KHQpLHI9bi5sZW5ndGgsYT1NYXRoLmZsb29yKHIvMjU1KSxvPXIlMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNithKzErcitlLmJ5dGVMZW5ndGgpO3NbMF09MCxzWzFdPTAsc1syXT0wLHNbM109MSxzWzRdPTYsc1s1XT0xMDE7bGV0IGk9MDtmb3IoO2k8YTspc1s2K2ldPTI1NSxpKys7cmV0dXJuIHNbNitpXT1vLGkrKyxzLnNldChuLDYraSkscy5zZXQobmV3IFVpbnQ4QXJyYXkoZSksNitpK3IpLHMuYnVmZmVyfW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+LTEmJi0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJDaHJvbWUiKSYmKHNlbGYub25ydGN0cmFuc2Zvcm09bj0+e2NvbnN0IHI9bi50cmFuc2Zvcm1lcjtsZXQgYT1bXTtyLm9wdGlvbnMucG9ydC5vbm1lc3NhZ2U9ZT0+e2UuZGF0YS5zZWkmJmEucHVzaChlLmRhdGEuc2VpKX0sc2VsZi5wb3N0TWVzc2FnZSgic3RhcnRlZCIpO2NvbnN0IG89ci5yZWFkYWJsZS5nZXRSZWFkZXIoKSxzPXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7InJ4Ij09PXIub3B0aW9ucy5uYW1lP2Z1bmN0aW9uIHQobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgdD1mdW5jdGlvbih0KXtjb25zdCBuPW5ldyBEYXRhVmlldyh0LmRhdGEpO2xldCByPTA7Zm9yKDtyKzQ8dC5kYXRhLmJ5dGVMZW5ndGg7KXtpZigwPT09bi5nZXRVaW50OChyKzApJiYwPT09bi5nZXRVaW50OChyKzEpJiYwPT09bi5nZXRVaW50OChyKzIpJiYxPT09bi5nZXRVaW50OChyKzMpJiY2PT09bi5nZXRVaW50OChyKzQpKXtsZXQgYT1yKzYsbz0wLHM9MDtmb3IoOzI1NT09PShzPW4uZ2V0VWludDgoYSsrKSk7KW8rPTI1NTtvKz1zO2NvbnN0IGk9ZSh0LmRhdGEsYSxvKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoaSl9cisrfXJldHVybiBudWxsfShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1hLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout(()=>z8.revokeObjectURL(e),0),new Worker(z8.createObjectURL(e))}var wE=new Map,EE=new Map;function W7e(e,t,r){let n=new Uint8Array(e,t,r),i=[],a=0;for(;i.length<r;)a+3<r&&n[a]===0&&n[a+1]===0&&n[a+2]===3&&(n[a+3]===0||n[a+3]===1||n[a+3]===2||n[a+3]===3)?(i.push(n[a],n[a+1],n[a+3]),a+=4):(i.push(n[a]),a++);return new Uint8Array(i)}var _E=new Map;async function K7e(e,t){if(!Rt().supportWebRTCEncodedTransform)return void _.warning("browser not support video encoded transform");if(_E.has(e)||!e.track)return;let r={track:e.track};if(gd()){if(!e.createEncodedStreams)return void _.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(s){return void _.error("create video-encoded-streams error",s&&s.message)}let a=[];t.on("sei-to-send",s=>{a.push(s)});let o=new TransformStream({transform(s,l){r.controller||(r.controller=l),e.track&&e.track.id!==r.track.id&&(_.debug("video track changed: ".concat(r.track.id," => ").concat(e.track.id)),r.track.removeEventListener("ended",n),r.track=e.track,r.track.addEventListener("ended",n));let c=a.shift();c&&(s.data=function(u,h){let f=function(b){let E=b.length,S=[],I=0;for(;I<E;)I+2<E&&b[I]===0&&b[I+1]===0&&(b[I+2]===0||b[I+2]===1||b[I+2]===2||b[I+2]===3)?(S.push(b[I],b[I+1],3,b[I+2]),I+=3):(S.push(b[I]),I++);return new Uint8Array(S)}(h),p=f.length,m=Math.floor(p/255),g=p%255,y=new Uint8Array(6+m+1+p+u.byteLength);y[0]=0,y[1]=0,y[2]=0,y[3]=1,y[4]=6,y[5]=101;let v=0;for(;v<m;)y[6+v]=255,v++;return y[6+v]=g,v++,y.set(f,6+v),y.set(new Uint8Array(u),6+v+p),y.buffer}(s.data,c)),l.enqueue(s)}});i.readable.pipeThrough(o).pipeTo(i.writable)}else{if(!ni())return;{if(typeof RTCRtpScriptTransform>"u")return void _.warning("browser not support RTCRtpScriptTransform");let i=k_(),a=new MessageChannel;await new ye(s=>i.onmessage=l=>{l.data==="registered"&&s(void 0)});let o=new RTCRtpScriptTransform(i,{name:"tx",port:a.port2},[a.port2]);e.transform=o,await new ye(s=>i.onmessage=l=>{l.data==="started"&&s(void 0)}),t.on("sei-to-send",s=>{a.port1.postMessage({sei:s})}),a.port1.onmessage=s=>{var l;s.data.transformed&&e.track&&((l=e.track)===null||l===void 0?void 0:l.id)!==r.track.id&&(_.debug("video track changed: ".concat(r.track.id," => ").concat(e.track.id)),r.track.removeEventListener("ended",n),r.track=e.track,r.track.addEventListener("ended",n))},r.worker=i}}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",n)}let i=_E.get(e);if(i){_E.delete(e);try{var a,o;(a=i.controller)===null||a===void 0||a.terminate(),(o=i.worker)===null||o===void 0||o.terminate()}catch(s){_.warning(s&&s.message)}}}_E.set(e,r),e.track.addEventListener("ended",n)}var Ry=new Map;(function(){let e=Ct();Mn.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),Mn.getStreamFromExtension=e.name===Mt.CHROME&&Number(e.version)>34,Mn.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t=new RTCPeerConnection,r=!1;try{t.addTransceiver("audio"),r=!0}catch{}return t.close(),r}(),Mn.supportMinBitrate=e.name===Mt.CHROME||e.name===Mt.EDGE,Mn.supportSetRtpSenderParameters=function(){let t=Ct();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Nd()||!(!ni()&&!yT())||t.name===Mt.FIREFOX&&Number(t.version)>=64)}(),e.name===Mt.SAFARI&&(Number(e.version)>=14?Mn.supportDualStream=!0:Mn.supportDualStream=!1),Mn.webAudioMediaStreamDest=function(){let t=Ct();return!(t.name===Mt.SAFARI&&Number(t.version)<12)}(),Mn.supportReplaceTrack=!!window.RTCRtpSender&&typeof RTCRtpSender.prototype.replaceTrack=="function",Mn.supportWebGL=typeof WebGLRenderingContext<"u",Mn.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Nd()||(Mn.webAudioWithAEC=!0),Mn.supportShareAudio=function(){let t=Ct();return(t.os===Sn.WIN_10||t.os===Sn.WIN_81||t.os===Sn.WIN_7||t.os===Sn.LINUX||t.os===Sn.MAC_OS||t.os===Sn.CHROMIUM_OS)&&t.name===Mt.CHROME&&Number(t.version)>=74}(),Mn.supportDataChannel=!!(KP(76)||function(t){let r=Ct();return!(r.name!==Mt.FIREFOX||!r.osVersion)&&Number(r.version)>=t}(68)||gne(14)),Mn.supportPCSetConfiguration=function(){let t=window.RTCPeerConnection;return!Ar()&&!!t&&t.prototype.setConfiguration instanceof Function}(),Mn.supportWebRTCEncodedTransform=function(){let t=Ct();return t.name==="Chrome"&&Number(t.version)>=86||t.name==="Safari"&&Number(t.version)>=15}(),Mn.supportWebRTCInsertableStream=function(){let t=Ct();return(t.name===Mt.CHROME||t.name===Mt.EDGE)&&Number(t.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),Mn.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,Mn.supportWebCrypto=typeof window<"u"&&window.crypto!==void 0&&window.crypto.subtle!==void 0,Tx(()=>{Mn.supportDualStreamEncoding=function(){let t=Ct();return!!M("DISABLE_WEBAUDIO")||t.name==="Safari"&&Number(t.version)>=14||!!(t.name==="Chrome"&&/Windows/i.test(t.os||"")&&Number(t.version)>=100&&M("CHROME_DUAL_STREAM_USE_ENCODING"))}(),_.info("browser compatibility",JSON.stringify(Mn),JSON.stringify(e))})})();var ST=class uD extends Tr{constructor(t,r){super(),R(this,"signal",void 0),R(this,"token",void 0),R(this,"tokenTimeout",void 0),R(this,"tokenInterval",void 0),R(this,"_sequence",0),R(this,"userMap",new Map),R(this,"encoder",new TextEncoder),this.signal=t,this.token=r;let n=()=>{this.signal.connectionState===tr.CONNECTED&&this.check(),this.userMap.size===0?this.tokenInterval=window.setTimeout(n,1e3):this.tokenInterval=window.setTimeout(n,3*M("P2P_TOKEN_INTERVAL"))};n()}async send(t,r,n,i,a){var o,s,l;if(this.userMap.size===0)return;let c=Array.from(Qc(o=this.userMap).call(o))[0].token;typeof r!="string"&&(r=JSON.stringify(r)),i=(s=i)!==null&&s!==void 0?s:rr(6,""),a=(l=a)!==null&&l!==void 0?l:this._sequence++;let u={_id:i,_type:t,_seq:a,_message:r,token:"".concat(this.token,"_").concat(c)};M("SHOW_P2P_LOG")&&_.debug("send message",u,"noNeedResponse : ".concat(n)),this.splitMessage(JSON.stringify(u)).forEach(f=>{this.signal.request(Ke.DATA_STREAM,{payload:yd(this.encoder.encode(f))})});let h=new ye((f,p)=>{let m=window.setTimeout(()=>{this.off("res-@".concat(i,"_ack"),g),this.off("res-@".concat(i),v),this.off(ap.ABORT,y),_.debug("[external-signal] request timeout, type: ".concat(t,", requestId: ").concat(i)),this.userMap.size===0?p(new ee(k.INVALID_REMOTE_USER)):p(new ee(k.TIMEOUT))},M("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),g=()=>{m&&window.clearTimeout(m),this.off(ap.ABORT,y),n&&f()},y=()=>{m&&window.clearTimeout(m),this.off("res-@".concat(i,"_ack"),g),this.off("res-@".concat(i),v),p(new ee(k.EXTERNAL_SIGNAL_ABORT,"type: ".concat(t,", requestId: ").concat(i)))};this.once(ap.ABORT,y),this.once("res-@".concat(i,"_ack"),g);let v=(E,S)=>{b=!0,m&&window.clearTimeout(m),this.off("res-@".concat(i,"_ack"),g),this.off(ap.ABORT,y),E==="success"?f(S):p(new ee(k.P2P_MESSAGE_FAILED,"request ".concat(t," failed, requestId: ").concat(i)))},b=!1;n||(this.once("res-@".concat(i),v),zn(M("SIGNAL_REQUEST_TIMEOUT")).then(()=>{b||_.warning("external_signal request timeout, type: ".concat(t,", requestId: ").concat(i,", ").concat(u))}))});try{return await h}catch(f){if(f.code===k.TIMEOUT)return await this.send(t,r,n,i,a);throw f}}onMessage(t){var r;let{_uid:n}=t,i,a=this.userMap.get(n);if(a)i=a.splitMessageMap;else{if(this.userMap.size>0||!("_type"in t)||t._type!==Ur.CHECK)return;let{token:c}=t;i=new Map,a={uid:n,isStart:!0,token:c,splitMessageMap:i,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(n,a),this.signal.emit(mt.ON_USER_ONLINE,{uid:n}),this.handleUserOnline()}if("id"in t&&"total"in t){var o;let{id:c,total:u}=t,h=(o=i.get(c))!==null&&o!==void 0?o:[];if(h.push(t),i.has(c)||i.set(c,h),h.length!==u)return;{let f=Bb(h).call(h,(p,m)=>p.index-m.index).map(p=>p.payload).join("");i.delete(c),(t=JSON.parse(f))._uid=n}}let{_type:s,token:l}=t;if(be(r=[Ur.ACK,Ur.CHECK]).call(r,s))return s===Ur.CHECK&&this.handleCheckToken(a,l),void this.receiveMessage(t);l==="".concat(a.token,"_").concat(this.token)?this.handleReceivedMessage(t):_.debug('Receive unexpected message", '.concat(l,", cur_token: ").concat(a.token,"_").concat(this.token),t)}check(){let t={_id:rr(6,""),token:this.token,_type:Ur.CHECK};M("SHOW_P2P_LOG")&&_.debug("send message",t),this.signal.request(Ke.DATA_STREAM,{payload:yd(this.encoder.encode(JSON.stringify(t)))})}ack(t){let r={_id:t,_type:Ur.ACK,token:this.token};M("SHOW_P2P_LOG")&&_.debug("send message",r),this.signal.request(Ke.DATA_STREAM,{payload:yd(this.encoder.encode(JSON.stringify(r)))})}response(t,r,n){this.send(Ur.RESPONSE,JSON.stringify({success:!n,message:r}),!0,t)}handleReceivedMessage(t){let r=()=>{this.userMap.forEach(c=>{let{receivedMessagesMap:u,nextExpectedSequenceNumber:h}=c;for(;u.has(h);){let f=u.get(h);u.delete(h),this.receiveMessage(f),c.nextExpectedSequenceNumber++}})};if(!t)return void r();let{_uid:n,_seq:i}=t,a=this.userMap.get(n),{receivedMessagesMap:o,isStart:s,nextExpectedSequenceNumber:l}=a;if(i<l)return this.ack(t._id),void _.debug("[external-signal] receive old message, seq: ".concat(i,", ").concat(t._message));o.set(i,t),s&&i===l&&(this.receiveMessage(t),o.delete(l),a.nextExpectedSequenceNumber++,r())}receiveMessage(t){let{_id:r,_type:n,_message:i,_uid:a}=t;if(M("SHOW_P2P_LOG")&&_.debug("receive message",t),r){let o;switch(t._type!==Ur.ACK&&(i&&(o=JSON.parse(i)),this.ack(t._id)),t._type){case Ur.CANDIDATE:case Ur.CONTROL:this.signal.emit(n,o,a);break;case Ur.PUBLISH:case Ur.UNPUBLISH:case Ur.RESTART_ICE:case Ur.CALL:o.uid=a,ii(this.signal,n,o).then(s=>{this.response(t._id,s)}).catch(()=>{this.response(t._id,void 0,!0)});break;case Ur.ACK:this.getListeners("res-@".concat(r,"_ack")).length>0&&this.emit("res-@".concat(r,"_ack"));break;case Ur.RESPONSE:{let{success:s,message:l}=o;this.emit("res-@".concat(r),s?"success":"failed",l);break}}}}splitMessage(t){if(t.length<uD.MAX_MESSAGE_SIZE)return[t];let r=[],{remoteToken:n}=JSON.parse(t),i=rr(6,""),a=0,o=800,s=Math.ceil(t.length/o);for(;t.length>0;){a++;let l={id:i,index:a,total:s,payload:t.slice(0,o),token:"".concat(this.token,"_").concat(n)};JSON.stringify(l).length>uD.MAX_MESSAGE_SIZE?o-=50:(r.push(l),t=t.slice(o))}return r.map(l=>JSON.stringify(l))}handleCheckToken(t,r){return t.token!==r?(_.debug("token changed, from ".concat(t.token," to ").concat(r)),this.reset(t.uid,r),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout(()=>{_.debug("token timeout, ".concat(r)),this.reset(t.uid)},M("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){let t=await ii(this.signal,Ur.CALL,void 0),r=await this.send(Ur.CALL,t);this.signal.emit(qe.P2P_CONNECTION,r,!0)}async reset(t,r){let n=this.userMap.get(t);n&&(this.emit(ap.ABORT),this.signal.emit(mt.ON_USER_OFFLINE,{uid:n.uid,reason:c8e.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),r||(_.debug("change local token from ".concat(r," to ").concat(r)),this.token=rr(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(ap.ABORT)}};R(ST,"MAX_SIZE",1),R(ST,"MAX_MESSAGE_SIZE",1024);var SH=class extends Tr{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===tr.CONNECTED?this.emit(qe.WS_CONNECTED):e===tr.RECONNECTING?this.emit(qe.WS_RECONNECTING,this._websocketReconnectReason):e===tr.CLOSED&&this.emit(qe.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),R(this,"_disconnectedReason",void 0),R(this,"_websocketReconnectReason",void 0),R(this,"_connectionState",tr.CLOSED),R(this,"reconnectToken",void 0),R(this,"p2pToken",void 0),R(this,"websocket",void 0),R(this,"openConnectionTime",void 0),R(this,"clientId",void 0),R(this,"lastMsgTime",Date.now()),R(this,"uploadCache",[]),R(this,"uploadCacheInterval",void 0),R(this,"rttRolling",new Ine(5)),R(this,"pingpongTimer",void 0),R(this,"pingpongTimeoutCount",0),R(this,"joinResponse",void 0),R(this,"multiIpOption",void 0),R(this,"initError",void 0),R(this,"spec",void 0),R(this,"store",void 0),R(this,"_external_signal",void 0),R(this,"onWebsocketMessage",r=>{if(r.data instanceof ArrayBuffer)return void this.emit(qe.ON_BINARY_DATA,r.data);let n=JSON.parse(r.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(n,"_id")){let i="res-@".concat(n._id);this.emit(i,n._result,n._message)}else if(Object.prototype.hasOwnProperty.call(n,"_type")){switch(n._type){case mt.ON_DATA_STREAM:return void this.handleDataStream(n._message);case mt.MUTE_AUDIO:case mt.MUTE_VIDEO:case mt.ON_P2P_LOST:case mt.ON_USER_ONLINE:return;case mt.ON_USER_OFFLINE:let{uid:i}=n._message;return _.debug("[".concat(this.clientId,"] user-offline uid: ").concat(i)),void this._external_signal.reset(i)}if(this.emit(n._type,n._message),n._type===mt.ON_NOTIFICATION&&this.handleNotification(n._message),n._type===mt.ON_USER_BANNED)switch(n._message.error_code){case 14:this.close($t.UID_BANNED);break;case 15:this.close($t.IP_BANNED);break;case 16:this.close($t.CHANNEL_BANNED)}if(n._type===mt.ON_USER_LICENSE_BANNED)switch(n._message.error_code){case Ue.ERR_LICENSE_MISSING:this.close($t.LICENSE_MISSING);break;case Ue.ERR_LICENSE_EXPIRED:this.close($t.LICENSE_EXPIRED);break;case Ue.ERR_LICENSE_MINUTES_EXCEEDED:this.close($t.LICENSE_MINUTES_EXCEEDED);break;case Ue.ERR_LICENSE_PERIOD_INVALID:this.close($t.LICENSE_PERIOD_INVALID);break;case Ue.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close($t.LICENSE_MULTIPLE_SDK_SERVICE);break;case Ue.ERR_LICENSE_ILLEGAL:this.close($t.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new xM("gateway-".concat(this.clientId),this.spec.retryConfig,!0,M("JOIN_GATEWAY_USE_DUAL_DOMAIN"),M("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===tr.CONNECTED&&this.reconnect("retry",ri.OFFLINE)}),this.p2pToken=rr(6,""),this._external_signal=new ST(this,this.p2pToken)}async request(e,t,r,n){let i=rr(6,""),a={_id:i,_type:e,_message:t},o=this.websocket.connectionID,s=()=>new ye((p,m)=>{if(this.connectionState===tr.CONNECTED)return p();let g=()=>{this.off(qe.WS_CLOSED,y),p()},y=()=>{this.off(qe.WS_CONNECTED,g),m(new ee(k.WS_ABORT))};this.once(qe.WS_CONNECTED,g),this.once(qe.WS_CLOSED,y)});if(this.connectionState!==tr.CONNECTING&&this.connectionState!==tr.RECONNECTING||e===Ke.JOIN||e===Ke.REJOIN||await s(),this.websocket.sendMessage(a,!0),n)return;let l=new ye((p,m)=>{let g=!1,y=(b,E)=>{g=!0,p({isSuccess:b==="success",message:E||{}}),this.off(qe.WS_CLOSED,v),this.off(qe.WS_RECONNECTING,v),this.emit(qe.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),y);let v=()=>{m(new ee(k.WS_ABORT,"type: ".concat(e))),this.off(qe.WS_CLOSED,v),this.off(qe.WS_RECONNECTING,v),this.off("res-@".concat(i),y)};this.once(qe.WS_CLOSED,v),this.once(qe.WS_RECONNECTING,v),zn(M("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==o||g||(_.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(qe.REQUEST_TIMEOUT,e,t))})}),c=null;try{c=await l}catch(p){if(this.connectionState===tr.CLOSED||e===Ke.LEAVE)throw new ee(k.WS_ABORT);return!this.spec.forceWaitGatewayResponse||r?p.throw():e===Ke.JOIN||e===Ke.REJOIN?null:(await s(),await this.request(e,t))}if(c.isSuccess)return c.message;let u=Number(c.message.error_code||c.message.code),h=Dv(u),f=new ee(k.UNEXPECTED_RESPONSE,"".concat(h.desc,": ").concat(c.message.error_str),{code:u,data:c.message,desc:h.desc});return h.action==="success"?c.message:(_.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(h.desc,", action: ").concat(h.action)),u===Ue.ERR_TOO_MANY_BROADCASTERS?((e===Ke.JOIN||e===Ke.REJOIN)&&(this.initError=f,this.close()),f.throw()):h.action==="failed"?f.throw():h.action==="quit"?(this.initError=f,this.close(),f.throw()):(u===Ue.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=c.message.option,_.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",ri.MULTI_IP)):this.reconnect(h.action,ri.SERVER_ERROR),e===Ke.JOIN||e===Ke.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new ye(r=>{let n=i=>{(!t||t(i))&&(this.off(e,n),r(i))};this.on(e,n)})}uploadWRTCStats(e){if(!this.store.sessionId)return void _.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));let t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(Pv.WRTC_STATS,t)}upload(e,t){let r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch{let n=M("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>n&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==tr.CONNECTED)return;let i=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(i._type,i._message)},M("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){let r={_type:e,_message:t};this.websocket.sendMessage(r)}async sendExtensionMessage(e,t,r){return await this._external_signal.send(e,t,r)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new ye((t,r)=>{this.once(qe.WS_CONNECTED,()=>t(this.joinResponse)),this.once(qe.WS_CLOSED,()=>r(this.initError||new ee(k.WS_ABORT))),this.connectionState=tr.CONNECTING,this.websocket.init(e).catch(r)})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||$t.LEAVE,this.connectionState=tr.CLOSED,_.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),this.p2pToken=rr(6,""),this._external_signal.clear(),this._external_signal=new ST(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(qe.ABORT_P2P_EXECUTION);let e=await ii(this,qe.REQUEST_JOIN_INFO),t=await this.request(Ke.JOIN,e);if(!t)return this.emit(qe.REPORT_JOIN_GATEWAY,k.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(qe.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=tr.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;let r=Rh(e.payload),n=new TextDecoder().decode(r),i=JSON.parse(n);"total"in i&&"id"in i||be(t=Object.values(Ur)).call(t,i._type)?(i._uid=e.uid,this._external_signal.onMessage(i)):this.emit(mt.ON_DATA_STREAM,e)}catch{this.emit(mt.ON_DATA_STREAM,e)}}handleNotification(e){_.debug("[".concat(this.clientId,"] receive notification: "),e);let t=Dv(e.code);if(t.action!=="success"){if(t.action!=="failed")return t.action==="quit"?(t.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close($t.UID_BANNED),void this.close()):void this.reconnect(t.action,ri.SERVER_ERROR);_.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;let e=M("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(_.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>M("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",ri.TIMEOUT):this.request(Ke.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;let r=Date.now()-t;this.rttRolling.add(r),M("REPORT_STATS")&&this.send(Ke.PING_BACK,{pingpongElapse:r})}).catch(r=>{})}handleWebsocketEvents(){this.websocket.on(Xe.RECONNECT_WAITTING_FINISH,e=>{this.emit(qe.WS_RECONNECT_WAITTING_FINISH,e)}),this.websocket.on(Xe.RECONNECT_CREATE_CONNECTION,e=>{this.emit(qe.WS_RECONNECT_CREATE_CONNECTION,e)}),this.websocket.on(Xe.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Xe.CLOSED,()=>{this.connectionState=tr.CLOSED}),this.websocket.on(Xe.FAILED,()=>{this._disconnectedReason=$t.NETWORK_ERROR,this.connectionState=tr.CLOSED}),this.websocket.on(Xe.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===tr.CONNECTED?this.connectionState=tr.RECONNECTING:this.connectionState=tr.CONNECTING}),this.websocket.on(Xe.WILL_RECONNECT,(e,t,r)=>{e!=="retry"?(_.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0):_.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),r(e)}),this.websocket.on(Xe.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.join().catch(e=>{if(this.emit(qe.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof ee&&e.code===k.UNEXPECTED_RESPONSE&&e.data.code===Ue.ERR_NO_AUTHORIZED)return _.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",ri.SERVER_ERROR);_.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",ri.SERVER_ERROR):(this.initError=e,this.close())})}),this.websocket.on(Xe.REQUEST_NEW_URLS,(e,t)=>{ii(this,qe.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)}),this.websocket.on(Xe.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(mt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}},vie={exports:{}};vie.exports=(()=>{var e={8:(n,i,a)=>{a.r(i),a.d(i,{Parser:()=>z,Printer:()=>$,parse:()=>D,print:()=>H});let o=`
`,s="".concat("\r").concat(o),l=" ",c;function u(x){return x>="0"&&x<="9"}function h(x){return x>="!"&&x<="~"}function f(x){return h(x)||x>=""&&x<=""}function p(x){return x==="!"||x>="#"&&x<="'"||x>="*"&&x<="+"||x>="-"&&x<="."||x>="0"&&x<="9"||x>="A"&&x<="Z"||x>="^"&&x<="~"}function m(x){return x>="1"&&x<="9"}function g(x){return x>="A"&&x<="Z"||x>="a"&&x<="z"}function y(x){return x==="d"||x==="h"||x==="m"||x==="s"}function v(x){return x>""&&x<"	"||x>"\v"&&x<"\f"||x>""&&x<""}function b(x){return g(x)||u(x)||x==="+"||x==="/"}function E(x){return u(x)||g(x)||x==="+"||x==="/"||x==="-"||x==="_"}function S(x){return g(x)||u(x)||x==="+"||x==="/"}function I(x,w){var O=Object.keys(x);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(x);w&&(C=C.filter(function(q){return Object.getOwnPropertyDescriptor(x,q).enumerable})),O.push.apply(O,C)}return O}function N(x){for(var w=1;w<arguments.length;w++){var O=arguments[w]!=null?arguments[w]:{};w%2?I(Object(O),!0).forEach(function(C){L(x,C,O[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(O)):I(Object(O)).forEach(function(C){Object.defineProperty(x,C,Object.getOwnPropertyDescriptor(O,C))})}return x}function L(x,w,O){return w in x?Object.defineProperty(x,w,{value:O,enumerable:!0,configurable:!0,writable:!0}):x[w]=O,x}(function(x){x.VERSION="v",x.ORIGIN="o",x.SESSION_NAME="s",x.INFORMATION="i",x.URI="u",x.EMAIL="e",x.PHONE="p",x.CONNECTION="c",x.BANDWIDTH="b",x.TIME="t",x.REPEAT="r",x.ZONE_ADJUSTMENTS="z",x.KEY="k",x.ATTRIBUTE="a",x.MEDIA="m"})(c||(c={}));class j{consumeText(w,O){let C=O;for(;C<w.length;){let q=w[C];if(q==="\0"||q==="\r"||q===o)break;C+=1}if(C-O==0)throw new Error("Invalid text, at ".concat(w));return C}consumeUnicastAddress(w,O,C){return this.consumeTill(w,O,l)}consumeOneOrMore(w,O,C){let q=O;for(;C(w[q]);)q++;if(q-O==0)throw new Error("Invalid rule at ".concat(O,"."));return q}consumeSpace(w,O){if(w[O]===l)return O+1;throw new Error("Invalid space at ".concat(O,"."))}consumeIP4Address(w,O){let C=O;for(let q=0;q<4;q++)if(C=this.consumeDecimalUChar(w,C),q!==3){if(w[C]!==".")throw new Error("Invalid IP4 address.");C++}return C}consumeDecimalUChar(w,O){let C=O;for(let F=0;F<3&&u(w[C]);F++,C++);if(C-O==0)throw new Error("Invalid decimal uchar.");let q=parseInt(w.slice(O,C));if(q>=0&&q<=255)return C;throw new Error("Invalid decimal uchar")}consumeIP6Address(w,O){let C=this.consumeHexpart(w,O);return w[C]===":"&&(C+=1,C=this.consumeIP4Address(w,C)),C}consumeHexpart(w,O){let C=O;if(w[C]===":"&&w[C+1]===":"){C+=2;try{C=this.consumeHexseq(w,C)}catch{}return C}if(C=this.consumeHexseq(w,C),w[C]===":"&&w[C+1]===":"){C+=2;try{C=this.consumeHexseq(w,C)}catch{}return C}return C}consumeHexseq(w,O){let C=O;for(;C=this.consumeHex4(w,C),w[C]===":"&&w[C+1]!==":";)C+=1;return C}consumeHex4(w,O){let C=0;for(;C<4;C++)if(!((q=w[O+C])>="0"&&q<="9"||q>="a"&&q<="f"||q>="A"&&q<="F")){if(C===0)throw new Error("Invalid hex 4");break}var q;return O+C}consumeFQDN(w,O){let C=O;for(;u(w[C])||g(w[C])||w[C]==="-"||w[C]===".";)C+=1;if(C-O<4)throw new Error("Invalid FQDN");return C}consumeExtnAddr(w,O){return this.consumeOneOrMore(w,O,f)}consumeMulticastAddress(w,O,C){switch(C){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(w,O);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(w,O);default:try{return this.consumeFQDN(w,O)}catch{return this.consumeExtnAddr(w,O)}}}consumeIP6MulticastAddress(w,O){let C=this.consumeHexpart(w,O);return w[C]==="/"?this.consumeInteger(w,C+1):C}consumeIP4MulticastAddress(w,O){let C=O+3,q=w.slice(O,C),F=parseInt(q);if(F<224||F>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let J=0;J<3;J++){if(w[C]!==".")throw new Error("Invalid IP4 multicast address.");C+=1,C=this.consumeDecimalUChar(w,C)}return w[C]==="/"&&(C+=1),C=this.consumeTTL(w,C),w[C]==="/"&&(C=this.consumeInteger(w,C)),C}consumeInteger(w,O){if(!m(w[O]))throw new Error("Invalid integer.");for(O+=1;u(w[O]);)O+=1;return O}consumeTTL(w,O){if(w[O]==="0")return O+1;if(!m(w[O]))throw new Error("Invalid TTL.");O+=1;for(let C=0;C<2&&u(w[O]);C++)O+=1;return O}consumeToken(w,O){return this.consumeOneOrMore(w,O,p)}consumeTime(w,O){let C=O;if(w[C]==="0")return C+1;for(m(w[C])&&(C+=1);u(w[C]);)C++;if(C-O<10)throw new Error("Invalid time");return C}consumeAddress(w,O){return this.consumeTill(w,O,l)}consumeTypedTime(w,O){let C=O;return C=this.consumeOneOrMore(w,C,u),y(w[C])?C+1:C}consumeRepeatInterval(w,O){if(!m(w[O]))throw new Error("Invalid repeat interval");for(O+=1;u(w[O]);)O+=1;return y(w[O])&&(O+=1),O}consumePort(w,O){return this.consumeOneOrMore(w,O,u)}consume(w,O,C){for(let q=0;q<C.length;q++){if(O+q>=w.length)throw new Error("consume exceeding value length");if(w[O+q]!==C[q])throw new Error("consume ".concat(C," failed at ").concat(q))}return O+C.length}consumeTill(w,O,C){let q=O;for(;q<w.length&&(typeof C!="string"||w[q]!==C)&&(typeof C!="function"||!C(w[q]));)q++;return q}}class z extends j{constructor(){super(),L(this,"records",[]),L(this,"currentLine",0)}parse(w){let O=this.probeEOL(w);this.records=w.split(O).filter(yt=>!!Ui(yt).call(yt)).map(this.parseLine),this.currentLine=0;let C=this.parseVersion(),q=this.parseOrigin(),F=this.parseSessionName(),J=this.parseInformation(),se=this.parseUri(),he=this.parseEmail(),ge=this.parsePhone(),je=this.parseConnection(),ze=this.parseBandWidth(),Me=this.parseTimeFields(),tt=this.parseKey(),Tt=this.parseSessionAttribute(),rt=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:C,origin:q,sessionName:F,information:J,uri:se,emails:he,phones:ge,connection:je,bandwidths:ze,timeFields:Me,key:tt,attributes:Tt,mediaDescriptions:rt}}getCurrentRecord(){let w=this.records[this.currentLine];if(!w)throw new Error("Record doesn't exit.");return w}probeEOL(w){for(let O=0;O<w.length;O++)if(w[O]===o)return w[O-1]==="\r"?s:o;throw new Error("Invalid newline character.")}parseLine(w,O){if(w.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");let C=w[0];if(w[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:C,value:w.slice(2),line:O,cur:0}}parseSessionAttribute(){let w=new V;for(;this.currentLine<this.records.length;){let O=this.getCurrentRecord();if(O.type!==c.ATTRIBUTE)break;let C={attField:this.extractOneOrMore(O,q=>p(q)&&q!==":"),_cur:0};O.value[O.cur]===":"&&(O.cur+=1,C.attValue=this.extractOneOrMore(O,v)),w.parse(C),this.currentLine++}return w.digest()}parseMediaAttributes(w){let O=new G(w);for(;this.currentLine<this.records.length;){let C=this.getCurrentRecord();if(C.type!==c.ATTRIBUTE)break;let q={attField:this.extractOneOrMore(C,F=>p(F)&&F!==":"),_cur:0};C.value[C.cur]===":"&&(C.cur+=1,q.attValue=this.extractOneOrMore(C,v)),O.parse(q),this.currentLine++}return O.digest()}parseKey(){let w=this.getCurrentRecord();if(w.type===c.KEY){if(w.value==="prompt"||w.value==="clear:"||w.value==="base64:"||w.value==="uri:")return w.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){let w=this.getCurrentRecord();if(w.type===c.ZONE_ADJUSTMENTS){let O=[];for(;;)try{let C=this.extract(w,this.consumeTime);this.consumeSpaceForRecord(w);let q=!1;w.value[w.cur]==="-"&&(q=!0,w.cur+=1);let F=this.extract(w,this.consumeTypedTime);O.push({time:C,typedTime:F,back:q})}catch{break}if(O.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,O}return[]}parseRepeat(){let w=[];for(;;){let O=this.getCurrentRecord();if(O.type!==c.REPEAT)break;{let C=this.extract(O,this.consumeRepeatInterval),q=this.parseTypedTime(O);w.push({repeatInterval:C,typedTimes:q}),this.currentLine++}}return w}parseTypedTime(w){let O=[];for(;;)try{this.consumeSpaceForRecord(w),O.push(this.extract(w,this.consumeTypedTime))}catch{break}if(O.length===0)throw new Error("Invalid typed time.");return O}parseTime(){let w=this.getCurrentRecord(),O=this.extract(w,this.consumeTime);this.consumeSpaceForRecord(w);let C=this.extract(w,this.consumeTime);return this.currentLine++,{startTime:O,stopTime:C}}parseBandWidth(){let w=[];for(;this.currentLine<this.records.length;){let O=this.getCurrentRecord();if(O.type!==c.BANDWIDTH)break;{let C=this.extractOneOrMore(O,p);if(O.value[O.cur]!==":")throw new Error("Invalid bandwidth field.");O.cur++;let q=this.extractOneOrMore(O,u);w.push({bwtype:C,bandwidth:q}),this.currentLine++}}return w}parseVersion(){let w=this.getCurrentRecord();if(w.type!==c.VERSION)throw new Error("first sdp record must be version");let O=w.value.slice(0,this.consumeOneOrMore(w.value,0,u));if(O.length!==w.value.length)throw new Error('invalid proto version, "v='.concat(w.value,'"'));return this.currentLine++,O}parseOrigin(){let w=this.getCurrentRecord();if(w.type!==c.ORIGIN)throw new Error("second line of sdp must be origin");let O=this.extractOneOrMore(w,f);this.consumeSpaceForRecord(w);let C=this.extractOneOrMore(w,u);this.consumeSpaceForRecord(w);let q=this.extractOneOrMore(w,u);this.consumeSpaceForRecord(w);let F=this.extractOneOrMore(w,p);this.consumeSpaceForRecord(w);let J=this.extractOneOrMore(w,p);this.consumeSpaceForRecord(w);let se=this.extract(w,this.consumeUnicastAddress);return this.currentLine++,{username:O,sessId:C,sessVersion:q,nettype:F,addrtype:J,unicastAddress:se}}parseSessionName(){let w=this.getCurrentRecord();if(w.type===c.SESSION_NAME){let O=this.extract(w,this.consumeText);return this.currentLine++,O}}parseInformation(){let w=this.getCurrentRecord();if(w.type!==c.INFORMATION)return;let O=this.extract(w,this.consumeText);return this.currentLine++,O}parseUri(){let w=this.getCurrentRecord();if(w.type===c.URI)return this.currentLine++,w.value}parseEmail(){let w=[];for(;;){let O=this.getCurrentRecord();if(O.type!==c.EMAIL)break;w.push(O.value),this.currentLine++}return w}parsePhone(){let w=[];for(;;){let O=this.getCurrentRecord();if(O.type!==c.PHONE)break;w.push(O.value),this.currentLine++}return w}parseConnection(){let w=this.getCurrentRecord();if(w.type===c.CONNECTION){let O=this.extractOneOrMore(w,p);this.consumeSpaceForRecord(w);let C=this.extractOneOrMore(w,p);this.consumeSpaceForRecord(w);let q=this.extract(w,this.consumeAddress);return this.currentLine++,{nettype:O,addrtype:C,address:q}}}parseMedia(){let w=this.getCurrentRecord(),O=this.extract(w,this.consumeToken);this.consumeSpaceForRecord(w);let C=this.extract(w,this.consumePort);w.value[w.cur]==="/"&&(w.cur+=1,C+=this.extract(w,this.consumeInteger)),this.consumeSpaceForRecord(w);let q=[];for(q.push(this.extract(w,this.consumeToken));w.value[w.cur]==="/";)w.cur+=1,q.push(this.extract(w,this.consumeToken));if(q.length===0)throw new Error("Invalid proto");let F=this.parseFmt(w);return this.currentLine++,{mediaType:O,port:C,protos:q,fmts:F}}parseTimeFields(){let w=[];for(;this.getCurrentRecord().type===c.TIME;){let O=this.parseTime(),C=this.parseRepeat(),q=this.parseZone();w.push({time:O,repeats:C,zones:q})}return w}parseMediaDescription(){let w=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===c.MEDIA;){let O=this.parseMedia(),C=this.parseInformation(),q=this.parseConnections(),F=this.parseBandWidth(),J=this.parseKey(),se=this.parseMediaAttributes(O);w.push({media:O,information:C,connections:q,bandwidths:F,key:J,attributes:se})}return w}parseConnections(){let w=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===c.CONNECTION;)w.push(this.parseConnection());return w}parseFmt(w){let O=[];for(;;)try{this.consumeSpaceForRecord(w),O.push(this.extract(w,this.consumeToken))}catch{break}if(O.length===0)throw new Error("Invalid fmts");return O}extract(w,O){for(var C=arguments.length,q=new Array(C>2?C-2:0),F=2;F<C;F++)q[F-2]=arguments[F];let J=O.call(this,w.value,w.cur,...q),se=w.value.slice(w.cur,J);return w.cur=J,se}extractOneOrMore(w,O){let C=this.consumeOneOrMore(w.value,w.cur,O),q=w.value.slice(w.cur,C);return w.cur=C,q}consumeSpaceForRecord(w){if(w.value[w.cur]!==l)throw new Error("Invalid space at ".concat(w.cur,"."));w.cur+=1}}class A extends j{constructor(){super(...arguments),L(this,"attributes",void 0),L(this,"digested",!1)}extractOneOrMore(w,O,C){let q=this.consumeOneOrMore(w.attValue,w._cur,O),F=w.attValue.slice(w._cur,q),[J,se]=C||[];if(typeof J=="number"&&F.length<J)throw new Error("error in length, should be more or equal than ".concat(J," characters."));if(typeof se=="number"&&F.length>se)throw new Error("error in length, should be less or equal than ".concat(se," characters."));return w._cur=q,F}consumeAttributeSpace(w){if(w.attValue[w._cur]!==l)throw new Error("Invalid space at ".concat(w._cur,"."));w._cur+=1}extract(w,O){if(!w.attValue)throw new Error("Nothing to extract from attValue.");for(var C=arguments.length,q=new Array(C>2?C-2:0),F=2;F<C;F++)q[F-2]=arguments[F];let J=O.call(this,w.attValue,w._cur,...q),se=w.attValue.slice(w._cur,J);return w._cur=J,se}atEnd(w){if(!w.attValue)throw new Error;return w._cur>=w.attValue.length}peekChar(w){if(!w.attValue)throw new Error;return w.attValue[w._cur]}peek(w,O){if(!w.attValue)throw new Error;for(let C=0;C<O.length;C++)if(O[C]!==w.attValue[w._cur+C])return!1;return!0}parseIceUfrag(w){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(w,b,[4,256])}parseIcePwd(w){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(w,b,[22,256])}parseIceOptions(w){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");let O=[];for(;!this.atEnd(w);){O.push(this.extractOneOrMore(w,b));try{this.consumeAttributeSpace(w)}catch(C){if(this.atEnd(w))break;throw C}}this.attributes.iceOptions=O}parseFingerprint(w){let O=this.extract(w,this.consumeToken);this.consumeAttributeSpace(w);let C=this.extract(w,this.consumeTill);this.attributes.fingerprints.push({hashFunction:O,fingerprint:C})}parseExtmap(w){let O=this.extractOneOrMore(w,u),C;this.peekChar(w)==="/"&&(this.extract(w,this.consume,"/"),C=this.extract(w,this.consumeToken)),this.consumeAttributeSpace(w);let q=this.extract(w,this.consumeTill,l),F=N(N({entry:parseInt(O,10)},C&&{direction:C}),{},{extensionName:q});this.peekChar(w)===l&&(this.consumeAttributeSpace(w),F.extensionAttributes=this.extract(w,this.consumeTill)),this.attributes.extmaps.push(F)}parseSetup(w){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");let O=this.extract(w,this.consumeTill);if(O!=="active"&&O!=="passive"&&O!=="actpass"&&O!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=O}}class V extends A{constructor(){super(...arguments),L(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(w){if(this.digested)throw new Error("already digested");try{switch(w.attField){case"group":this.parseGroup(w);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(w);break;case"ice-pwd":this.parseIcePwd(w);break;case"ice-options":this.parseIceOptions(w);break;case"fingerprint":this.parseFingerprint(w);break;case"setup":this.parseSetup(w);break;case"tls-id":this.parseTlsId(w);break;case"identity":this.parseIdentity(w);break;case"extmap":this.parseExtmap(w);break;case"msid-semantic":this.parseMsidSemantic(w);break;default:w.ignored=!0,this.attributes.unrecognized.push(w)}}catch(O){throw console.error("parsing session attribute ".concat(w.attField,' error, "a=').concat(w.attField,":").concat(w.attValue,'"')),O}if(!w.ignored&&w.attValue&&!this.atEnd(w))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(w){let O=this.extract(w,this.consumeToken),C=[];for(;!this.atEnd(w)&&this.peekChar(w)===l;)this.consumeAttributeSpace(w),C.push(this.extract(w,this.consumeToken));this.attributes.groups.push({semantic:O,identificationTag:C})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(w){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(w,E)}parseIdentity(w){let O=this.extractOneOrMore(w,S),C=[];for(;!this.atEnd(w)&&this.peekChar(w)===l;){this.consumeAttributeSpace(w);let q=this.extract(w,this.consumeToken);this.extract(w,this.consume,"=");let F=this.extractOneOrMore(w,J=>J!==l&&v(J));C.push({name:q,value:F})}this.attributes.identities.push({assertionValue:O,extensions:C})}parseMsidSemantic(w){this.peekChar(w)===l&&this.consumeAttributeSpace(w);let O={semantic:this.extract(w,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(w)}catch{break}if(this.peekChar(w)==="*"){this.extract(w,this.consume,"*"),O.applyForAll=!0;break}{let C=this.extract(w,this.consumeTill,l);O.identifierList.push(C)}}this.attributes.msidSemantic=O}}class G extends A{constructor(w){super(),L(this,"attributes",void 0),w.protos.indexOf("RTP")!==-1||w.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(w){if(this.digested)throw new Error("already digested");try{switch(w.attField){case"extmap":this.parseExtmap(w);break;case"setup":this.parseSetup(w);break;case"ice-ufrag":this.parseIceUfrag(w);break;case"ice-pwd":this.parseIcePwd(w);break;case"ice-options":this.parseIceOptions(w);break;case"candidate":this.parseCandidate(w);break;case"remote-candidate":this.parseRemoteCandidate(w);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(w);break;case"rtpmap":this.parseRtpmap(w);break;case"ptime":this.parsePtime(w);break;case"maxptime":this.parseMaxPtime(w);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(w);break;case"ssrc":this.parseSSRC(w);break;case"fmtp":this.parseFmtp(w);break;case"rtcp-fb":this.parseRtcpFb(w);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(w);break;case"mid":this.parseMid(w);break;case"msid":this.parseMsid(w);break;case"imageattr":this.parseImageAttr(w);break;case"rid":this.parseRid(w);break;case"simulcast":this.parseSimulcast(w);break;case"sctp-port":this.parseSctpPort(w);break;case"max-message-size":this.parseMaxMessageSize(w);break;case"ssrc-group":this.parseSSRCGroup(w);break;default:w.ignored=!0,this.attributes.unrecognized.push(w)}}catch(O){throw console.error("parsing media attribute ".concat(w.attField,' error, "a=').concat(w.attField,":").concat(w.attValue,'"')),O}if(!w.ignored&&w.attValue&&!this.atEnd(w))throw new Error("attribute parsing error")}parseCandidate(w){let O=this.extractOneOrMore(w,b,[1,32]);this.consumeAttributeSpace(w);let C=this.extractOneOrMore(w,u,[1,5]);this.consumeAttributeSpace(w);let q=this.extract(w,this.consumeToken);this.consumeAttributeSpace(w);let F=this.extractOneOrMore(w,u,[1,10]);this.consumeAttributeSpace(w);let J=this.extract(w,this.consumeAddress);this.consumeAttributeSpace(w);let se=this.extract(w,this.consumePort);this.consumeAttributeSpace(w),this.extract(w,this.consume,"typ"),this.consumeAttributeSpace(w);let he={foundation:O,componentId:C,transport:q,priority:F,connectionAddress:J,port:se,type:this.extract(w,this.consumeToken),extension:{}};for(this.peek(w," raddr")&&(this.extract(w,this.consume," raddr"),this.consumeAttributeSpace(w),he.relAddr=this.extract(w,this.consumeAddress)),this.peek(w," rport")&&(this.extract(w,this.consume," rport"),this.consumeAttributeSpace(w),he.relPort=this.extract(w,this.consumePort));this.peekChar(w)===l;){this.consumeAttributeSpace(w);let ge=this.extract(w,this.consumeToken);this.consumeAttributeSpace(w),he.extension[ge]=this.extractOneOrMore(w,h)}this.attributes.candidates.push(he)}parseRemoteCandidate(w){let O=[];for(;;){let C=this.extractOneOrMore(w,u,[1,5]);this.consumeAttributeSpace(w);let q=this.extract(w,this.consumeAddress);this.consumeAttributeSpace(w);let F=this.extract(w,this.consumePort);O.push({componentId:C,connectionAddress:q,port:F});try{this.consumeAttributeSpace(w)}catch{break}}this.attributes.remoteCandidatesList.push(O)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(w){let O=this.extract(w,this.consumeToken);this.consumeAttributeSpace(w);let C=this.extract(w,this.consumeTill,"/");this.extract(w,this.consume,"/");let q={encodingName:C,clockRate:this.extractOneOrMore(w,u)};this.atEnd(w)||this.peekChar(w)!=="/"||(this.extract(w,this.consume,"/"),q.encodingParameters=parseInt(this.extract(w,this.consumeTill),10));let F=this.attributes.payloads.find(J=>J.payloadType===parseInt(O,10));F?F.rtpMap=q:this.attributes.payloads.push({payloadType:parseInt(O,10),rtpMap:q,rtcpFeedbacks:[]})}parsePtime(w){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(w,this.consumeTill)}parseMaxPtime(w){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(w,this.consumeTill)}parseDirection(w){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=w.attField}parseSSRC(w){let O=this.extractOneOrMore(w,u);this.consumeAttributeSpace(w);let C=this.extract(w,this.consumeTill,":"),q;this.peekChar(w)===":"&&(this.extract(w,this.consume,":"),q=this.extract(w,this.consumeTill));let F=this.attributes.ssrcs.find(J=>J.ssrcId===parseInt(O,10));F?F.attributes[C]=q:this.attributes.ssrcs.push({ssrcId:parseInt(O,10),attributes:{[C]:q}})}parseFmtp(w){let O=this.extract(w,this.consumeTill,l);this.consumeAttributeSpace(w);let C=this.extract(w,this.consumeTill),q={};C.split(";").forEach(J=>{let[se,he]=J.split("=");se=Ui(se).call(se);let ge=typeof he=="string"?Ui(he).call(he):null;typeof se=="string"&&se.length>0&&(q[se]=ge)});let F=this.attributes.payloads.find(J=>J.payloadType===parseInt(O,10));F?F.fmtp={parameters:q}:this.attributes.payloads.push({payloadType:parseInt(O,10),rtcpFeedbacks:[],fmtp:{parameters:q}})}parseFmtParameters(w){let O={},C=this.extract(w,this.consumeTill,"=");w._cur++;let q=this.extract(w,this.consumeTill,";");for(O[C]=q;w.attValue[w._cur]===";";){let F=this.extract(w,this.consumeTill,"=");w._cur++;let J=this.extract(w,this.consumeTill,";");O[F]=J}return O}parseRtcpFb(w){let O="";O=this.peekChar(w)==="*"?this.extract(w,this.consume,"*"):this.extract(w,this.consumeTill,l),this.consumeAttributeSpace(w);let C=this.extract(w,this.consumeTill,l),q;if(C==="trr-int")q={type:C,interval:this.extract(w,this.consumeTill)};else{let F={type:C};this.peekChar(w)===l&&(this.consumeAttributeSpace(w),F.parameter=this.extract(w,this.consumeToken),this.peekChar(w)===l&&(F.additional=this.extract(w,this.consumeTill))),q=F}if(O==="*")this.attributes.rtcpFeedbackWildcards.push(q);else{let F=this.attributes.payloads.find(J=>J.payloadType===parseInt(O,10));F?F.rtcpFeedbacks.push(q):this.attributes.payloads.push({payloadType:parseInt(O,10),rtcpFeedbacks:[q]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(w){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");let O={port:this.extract(w,this.consumePort)};this.peekChar(w)===l&&(this.consumeAttributeSpace(w),O.netType=this.extractOneOrMore(w,p),this.consumeAttributeSpace(w),O.addressType=this.extractOneOrMore(w,p),this.consumeAttributeSpace(w),O.address=this.extract(w,this.consumeAddress)),this.attributes.rtcp=O}parseMsid(w){let O={id:this.extractOneOrMore(w,p,[1,64])};this.peekChar(w)===l&&(this.consumeAttributeSpace(w),O.appdata=this.extractOneOrMore(w,p,[1,64])),this.attributes.msids.push(O)}parseImageAttr(w){this.attributes.imageattr.push(w.attValue)}parseRid(w){let O=this.extractOneOrMore(w,q=>g(q)||u(q)||q==="_"||q==="-");this.consumeAttributeSpace(w);let C={id:O,direction:this.extract(w,this.consumeToken),params:[]};if(this.peekChar(w)===l){if(this.consumeAttributeSpace(w),this.peek(w,"pt=")){this.extract(w,this.consume,"pt=");let q=[];for(;;){let F=this.extract(w,this.consumeToken);q.push(F);try{this.extract(w,this.consume,",")}catch{break}}C.payloads=q,this.peekChar(w)===l&&this.extract(w,this.consume,l)}for(;;){let q=this.extract(w,this.consumeToken);switch(q){case"depend":{let F={type:q,rids:this.extract(w,this.consume,"=").split(",")};C.params.push(F);break}default:{let F={type:q};this.peekChar(w)==="="&&(this.extract(w,this.consume,"="),F.val=this.extract(w,this.consumeTill,";")),C.params.push(F)}}try{this.extract(w,this.consume,";")}catch{break}}}this.attributes.rids.push(C)}parseSimulcast(w){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=w.attValue,this.extract(w,this.consumeTill)}parseSctpPort(w){this.attributes.sctpPort=this.extractOneOrMore(w,u,[1,5])}parseMaxMessageSize(w){this.attributes.maxMessageSize=this.extractOneOrMore(w,u,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(w){this.attributes.mid=this.extract(w,this.consumeToken)}parseSSRCGroup(w){let O=this.extract(w,this.consumeToken),C=[];for(;;)try{this.consumeAttributeSpace(w);let q=this.extract(w,this.consumeInteger);C.push(parseInt(q,10))}catch{break}this.attributes.ssrcGroups.push({semantic:O,ssrcIds:C})}}function X(x,w,O){return w in x?Object.defineProperty(x,w,{value:O,enumerable:!0,configurable:!0,writable:!0}):x[w]=O,x}class ${constructor(){X(this,"eol",s)}print(w,O){let C="";return O&&(this.eol=O),C+=this.printVersion(w.version),C+=this.printOrigin(w.origin),C+=this.printSessionName(w.sessionName),C+=this.printInformation(w.information),C+=this.printUri(w.uri),C+=this.printEmail(w.emails),C+=this.printPhone(w.phones),C+=this.printConnection(w.connection),C+=this.printBandwidth(w.bandwidths),C+=this.printTimeFields(w.timeFields),C+=this.printKey(w.key),C+=this.printSessionAttributes(w.attributes),C+=this.printMediaDescription(w.mediaDescriptions),C}printVersion(w){return"v=".concat(w).concat(this.eol)}printOrigin(w){return"o=".concat(w.username," ").concat(w.sessId," ").concat(w.sessVersion," ").concat(w.nettype," ").concat(w.addrtype," ").concat(w.unicastAddress).concat(this.eol)}printSessionName(w){return w?"s=".concat(w).concat(this.eol):""}printInformation(w){return w?"i=".concat(w).concat(this.eol):""}printUri(w){return w?"u=".concat(w).concat(this.eol):""}printEmail(w){let O="";for(let C of w)O+="e=".concat(C).concat(this.eol);return O}printPhone(w){let O="";for(let C of w)O+="e=".concat(C).concat(this.eol);return O}printConnection(w){return w?"c=".concat(w.nettype," ").concat(w.addrtype," ").concat(w.address).concat(this.eol):""}printBandwidth(w){let O="";for(let C of w)O+="b=".concat(C.bwtype,":").concat(C.bandwidth).concat(this.eol);return O}printTimeFields(w){let O="";for(let C of w){O+="t=".concat(C.time.startTime," ").concat(C.time.startTime).concat(this.eol);for(let q of C.repeats)O+="r=".concat(q.repeatInterval," ").concat(q.typedTimes.join(" ")).concat(this.eol);C.zoneAdjustments&&(O+="z=",O+="z=".concat(C.zoneAdjustments.map(q=>"".concat(q.time," ").concat(q.back?"-":""," ").concat(q.typedTime)).join(" ")).concat(this.eol),O+=this.eol)}return O}printKey(w){return w?"k=".concat(w).concat(this.eol):""}printAttributes(w){let O="";for(let C of w)O+="a=".concat(C.attField).concat(C.attValue?":".concat(C.attValue):"").concat(this.eol);return O}printMediaDescription(w){let O="";for(let C of w)O+=this.printMedia(C.media),O+=this.printInformation(C.information),O+=this.printConnections(C.connections),O+=this.printBandwidth(C.bandwidths),O+=this.printKey(C.key),O+=this.printMediaAttributes(C);return O}printConnections(w){let O="";for(let C of w)O+=this.printConnection(C);return O}printMedia(w){return"m=".concat(w.mediaType," ").concat(w.port," ").concat(w.protos.join("/")," ").concat(w.fmts.join(" ")).concat(this.eol)}printSessionAttributes(w){return new K(this.eol).print(w)}printMediaAttributes(w){return new P(this.eol).print(w)}}class B{constructor(w){X(this,"eol",void 0),this.eol=w}printIceUfrag(w){return w===void 0?"":"a=ice-ufrag:".concat(w).concat(this.eol)}printIcePwd(w){return w===void 0?"":"a=ice-pwd:".concat(w).concat(this.eol)}printIceOptions(w){return w===void 0?"":"a=ice-options:".concat(w.join(l)).concat(this.eol)}printFingerprints(w){return w.length>0?w.map(O=>"a=fingerprint:".concat(O.hashFunction).concat(l).concat(O.fingerprint)).join(this.eol)+this.eol:""}printExtmap(w){return w.map(O=>"a=extmap:".concat(O.entry).concat(O.direction?"/".concat(O.direction):"").concat(l).concat(O.extensionName).concat(O.extensionAttributes?"".concat(l).concat(O.extensionAttributes):"").concat(this.eol)).join("")}printSetup(w){return w===void 0?"":"a=setup:".concat(w).concat(this.eol)}printUnrecognized(w){return w.map(O=>"a=".concat(O.attField).concat(O.attValue?":".concat(O.attValue):"").concat(this.eol)).join("")}}class K extends B{print(w){let O="";return O+=this.printGroups(w.groups),O+=this.printMsidSemantic(w.msidSemantic),O+=this.printIceLite(w.iceLite),O+=this.printIceUfrag(w.iceUfrag),O+=this.printIcePwd(w.icePwd),O+=this.printIceOptions(w.iceOptions),O+=this.printFingerprints(w.fingerprints),O+=this.printSetup(w.setup),O+=this.printTlsId(w.tlsId),O+=this.printIdentity(w.identities),O+=this.printExtmap(w.extmaps),O+=this.printUnrecognized(w.unrecognized),O}printGroups(w){let O="";return w.length>0&&(O+=w.map(C=>"a=group:".concat(C.semantic).concat(C.identificationTag.map(q=>"".concat(l).concat(q)).join("")).concat(this.eol)).join("")),O}printIceLite(w){return w===void 0?"":"a=ice-lite"+this.eol}printTlsId(w){return w?"a=tls-id:".concat(w).concat(this.eol):""}printIdentity(w){return w.length===0?"":w.map(O=>"a=identity:".concat(O.assertionValue).concat(O.extensions.map(C=>"".concat(l).concat(C.name).concat(C.value?"=".concat(C.value):"")))).join(this.eol)+this.eol}printMsidSemantic(w){if(!w)return"";let O="a=msid-semantic:".concat(w.semantic);return w.applyForAll?O+="".concat(l,"*"):w.identifierList.length>0&&(O+=w.identifierList.map(C=>"".concat(l).concat(C))),O+this.eol}}class P extends B{print(w){let O=w.attributes,C="";return C+=this.printRTCP(O.rtcp),C+=this.printIceUfrag(O.iceUfrag),C+=this.printIcePwd(O.icePwd),C+=this.printIceOptions(O.iceOptions),C+=this.printCandidates(O.candidates),C+=this.printRemoteCandidatesList(O.remoteCandidatesList),C+=this.printEndOfCandidates(O.endOfCandidates),C+=this.printFingerprints(O.fingerprints),C+=this.printSetup(O.setup),C+=this.printMid(O.mid),C+=this.printExtmap(O.extmaps),C+=this.printRTPRelated(O),C+=this.printPtime(O.ptime),C+=this.printMaxPtime(O.maxPtime),C+=this.printDirection(O.direction),C+=this.printSSRCGroups(O.ssrcGroups),C+=this.printSSRC(O.ssrcs),C+=this.printRTCPMux(O.rtcpMux),C+=this.printRTCPMuxOnly(O.rtcpMuxOnly),C+=this.printRTCPRsize(O.rtcpRsize),C+=this.printMSId(O.msids),C+=this.printImageattr(O.imageattr),C+=this.printRid(O.rids),C+=this.printSimulcast(O.simulcast),C+=this.printSCTPPort(O.sctpPort),C+=this.printMaxMessageSize(O.maxMessageSize),C+=this.printUnrecognized(O.unrecognized),C}printCandidates(w){return w.map(O=>"a=candidate:".concat(O.foundation).concat(l).concat(O.componentId).concat(l).concat(O.transport).concat(l).concat(O.priority).concat(l).concat(O.connectionAddress).concat(l).concat(O.port).concat(l,"typ").concat(l).concat(O.type).concat(O.relAddr?"".concat(l,"raddr").concat(l).concat(O.relAddr):"").concat(O.relPort?"".concat(l,"rport").concat(l).concat(O.relPort):"").concat(Object.keys(O.extension).map(C=>"".concat(l).concat(C).concat(l).concat(O.extension[C])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(w){return w.map(O=>"a=remote-candidates:".concat(O.join(l)).concat(this.eol)).join("")}printEndOfCandidates(w){return w===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(w){if(!w.payloads)return"";let O=w.payloads,C="";C+=w.rtcpFeedbackWildcards.map(q=>this.printRTCPFeedback("*",q)).join("");for(let q of O)C+=this.printRtpMap(q.payloadType,q.rtpMap),C+=this.printFmtp(q.payloadType,q.fmtp),C+=q.rtcpFeedbacks.map(F=>this.printRTCPFeedback(q.payloadType,F)).join("");return C}printFmtp(w,O){if(!O)return"";let C=Object.keys(O.parameters);return C.length===1&&O.parameters[C[0]]===null?"a=fmtp:".concat(w).concat(l).concat(C[0]).concat(this.eol):"a=fmtp:".concat(w).concat(l).concat(Object.keys(O.parameters).map(q=>"".concat(q,"=").concat(O.parameters[q])).join(";")).concat(this.eol)}printRtpMap(w,O){return O?"a=rtpmap:".concat(w).concat(l).concat(O.encodingName,"/").concat(O.clockRate).concat(O.encodingParameters?"/".concat(O.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(w,O){let C="a=rtcp-fb:".concat(w).concat(l),q=O;return q.type==="trr-int"?C+="ttr-int".concat(l).concat(q.interval):(C+="".concat(q.type),q.parameter&&(C+="".concat(l).concat(q.parameter),q.additional&&(C+="".concat(l).concat(q.additional)))),C+this.eol}printPtime(w){return w===void 0?"":"a=ptime:".concat(w).concat(this.eol)}printMaxPtime(w){return w===void 0?"":"a=maxptime:".concat(w).concat(this.eol)}printDirection(w){return w===void 0?"":"a=".concat(w).concat(this.eol)}printSSRC(w){return w.map(O=>Object.keys(O.attributes).map(C=>"a=ssrc:".concat(O.ssrcId.toString(10)).concat(l).concat(C).concat(O.attributes[C]?":".concat(O.attributes[C]):"").concat(this.eol)).join("")).join("")}printRTCPMux(w){return w===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(w){return w===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(w){return w===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(w){if(w===void 0)return"";let O="a=rtcp:".concat(w.port);return w.netType&&(O+="".concat(l).concat(w.netType)),w.addressType&&(O+="".concat(l).concat(w.addressType)),w.address&&(O+="".concat(l).concat(w.address)),O+this.eol}printMSId(w){return w.map(O=>"a=msid:".concat(O.id).concat(O.appdata?"".concat(l).concat(O.appdata):"").concat(this.eol)).join("")}printImageattr(w){return w.map(O=>"a=imageattr:".concat(O).concat(this.eol)).join("")}printRid(w){return w.map(O=>{let C="a=rid:".concat(O.id).concat(l).concat(O.direction);return O.payloads&&(C+="".concat(l,"pt=").concat(O.payloads.join(","))),O.params.length>0&&(C+="".concat(l).concat(O.params.map(q=>q.type==="depend"?"depend=".concat(q.rids.join(",")):"".concat(q.type,"=").concat(q.val)).join(";"))),C+this.eol}).join("")}printSimulcast(w){return w===void 0?"":"a=simulcast:".concat(w).concat(this.eol)}printSCTPPort(w){return w===void 0?"":"a=sctp-port:".concat(w).concat(this.eol)}printMaxMessageSize(w){return w===void 0?"":"a=max-message-size:".concat(w).concat(this.eol)}printMid(w){return w===void 0?"":"a=mid:".concat(w).concat(this.eol)}printSSRCGroups(w){return w.map(O=>"a=ssrc-group:".concat(O.semantic).concat(O.ssrcIds.map(C=>"".concat(l).concat(C.toString(10))).join("")).concat(this.eol)).join("")}}function D(x){return new z().parse(x)}function H(x,w){return new $().print(x,w)}}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var a in i)r.o(i,a)&&!r.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:i[a]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(8)})();var $n=vie.exports;function dD(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M("SVC_MODE");if(M("ENABLE_SVC"))return function(t){return t in ZP}(e)?e:ZP.L1T3}function TH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function CH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mv(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,{filterRTX:i,filterVideoFec:a,filterAudioFec:o,filterAudioCodec:s,filterVideoCodec:l}=t,{useXR:c}=r,u=[],h=[],f=[],p=[],m=!1,g=!1;if($n.parse(e).mediaDescriptions.forEach(v=>{n&&n!==v.attributes.direction||(v.media.mediaType!=="video"||m||(h=v.attributes.payloads,p=v.attributes.extmaps,m=!0),v.media.mediaType!=="audio"||g||(u=v.attributes.payloads,f=v.attributes.extmaps,g=!0))}),!p||h.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!f||u.length===0)throw new Error("Cannot get audio capabilities from SDP.");if(h.forEach(v=>{var b;(b=v.rtpMap)!==null&&b!==void 0&&b.clockRate&&(v.rtpMap.clockRate=parseInt(v.rtpMap.clockRate)),c&&v.rtcpFeedbacks.push({type:"rrtr"})}),u.forEach(v=>{var b;(b=v.rtpMap)!==null&&b!==void 0&&b.clockRate&&(v.rtpMap.clockRate=parseInt(v.rtpMap.clockRate)),c&&v.rtcpFeedbacks.push({type:"rrtr"})}),i&&(u=u.filter(v=>{var b;return((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName.toLowerCase())!=="rtx"}),h=h.filter(v=>{var b;return((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName.toLowerCase())!=="rtx"})),a&&(h=h.filter(v=>{var b;return!/(red)|(ulpfec)|(flexfec)/i.test(((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName)||"")})),o&&(u=u.filter(v=>{var b;return!/(red)|(ulpfec)|(flexfec)/i.test(((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName)||"")})),s&&(s==null?void 0:s.length)>0&&(u=u.filter(v=>{var b;return be(s).call(s,((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName.toLowerCase())||"")})),l&&(l==null?void 0:l.length)>0){let v=h.filter(b=>{var E;return be(l).call(l,((E=b.rtpMap)===null||E===void 0?void 0:E.encodingName.toLowerCase())||"")});h=v.concat(i?[]:MM(v,h))}let y=M("UNSUPPORTED_VIDEO_CODEC");return y&&y.length>0&&(h=h.filter(v=>!(v.rtpMap&&be(y).call(y,v.rtpMap.encodingName.toLowerCase())))),{audioCodecs:u,videoCodecs:h,audioExtensions:f,videoExtensions:p}}function nd(e){let t=$n.parse(e),r,n;for(let i of t.mediaDescriptions){if(!r){let a=i.attributes.iceUfrag,o=i.attributes.icePwd;if(!a||!o)throw new Error("Cannot get iceUfrag or icePwd from SDP.");r={iceUfrag:a,icePwd:o}}if(!n){let a=i.attributes.fingerprints;a.length>0&&(n={fingerprints:a})}}if(!n&&t.attributes.fingerprints.length>0&&(n={fingerprints:t.attributes.fingerprints}),!n||!r)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:r,dtlsParameters:n}}function bie(e,t){let r=[],n=e.attributes.ssrcGroups.filter(o=>o.semantic==="FID"),i=e.attributes.ssrcGroups.find(o=>o.semantic==="SIM"),a=e.attributes.ssrcs;if(i)i.ssrcIds.forEach(o=>{var s;let l=(s=n.find(c=>c.ssrcIds[0]===o))===null||s===void 0?void 0:s.ssrcIds[1];r.push({ssrcId:o,rtx:t?l:void 0})});else if(n.length>0){let o=n[0].ssrcIds[0],s=n[0].ssrcIds[1];r.push({ssrcId:o,rtx:t?s:void 0})}else{if(a.length===0)throw new Error("No ssrcs found on local media description.");r.push({ssrcId:a[0].ssrcId})}return r}function xH(e,t,r){let{cname:n}=e,i;t?i=wie(t):(i=e.iceParameters.candidates.map(u=>({foundation:u.foundation,componentId:"1",transport:u.protocol,priority:u.priority.toString(),connectionAddress:u.ip,port:u.port.toString(),type:u.type,extension:{}})),_.debug("Using candidates from gateway."));let a={fingerprints:e.dtlsParameters.fingerprints.map(u=>({hashFunction:u.algorithm,fingerprint:u.fingerprint}))},o={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd},s;switch(e.dtlsParameters.role){case"server":s="passive";break;case"client":s="active";break;case"auto":s="actpass"}let l=CT(e.rtpCapabilities),c=[];return Array.isArray(r)&&r.length>0&&r.forEach(u=>{c.push({kind:Ne.VIDEO,ssrcId:u.v,rtx:u.v_rtx,mslabel:"".concat(u.v,"_").concat(u.a)},{kind:Ne.AUDIO,ssrcId:u.a,mslabel:"".concat(u.v,"_").concat(u.a)})}),{dtlsParameters:a,iceParameters:o,candidates:i,rtpCapabilities:l,setup:s,cname:n,preSSRCs:c}}function wie(e){let t=[];return e.ip&&typeof e.port=="number"&&(t=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],_.debug("Using remote candidate from AP ".concat(e.ip,":").concat(e.port)),e.ip6&&(t.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip6,port:e.port.toString(),type:"host",extension:{}}),_.debug("Using IPV6 remote candidate from AP ".concat(e.ip6,":").concat(e.port)))),t}function yh(e,t,r){let n=[],i=[];return e.forEach(a=>{let{ssrcId:o,rtx:s}=a,l=rr(8,"track-"),c={ssrcId:o,attributes:CH({label:l,mslabel:r=r||rr(10,""),msid:"".concat(r," ").concat(l)},t&&{cname:t})};if(n.push(c),s!==void 0){let u={ssrcId:s,attributes:CH({label:l,mslabel:r,msid:"".concat(r," ").concat(l)},t&&{cname:t})};n.push(u),i.push({semantic:"FID",ssrcIds:[o,s]})}}),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map(a=>{let{ssrcId:o}=a;return o})}),{ssrcs:n,ssrcGroups:i}}function Zm(e,t){t instanceof Ir&&e.attributes.payloads.forEach(r=>{var n;let i=(n=r.rtpMap)===null||n===void 0?void 0:n.encodingName.toLowerCase();if(!i||["opus","pcmu","pcma","g722"].indexOf(i)===-1)return;r.fmtp||(r.fmtp={parameters:{}}),r.fmtp.parameters.minptime="10",r.fmtp.parameters.useinbandfec="1";let a=t._encoderConfig;a&&i!=="pcmu"&&i!=="pcma"&&i!=="g722"&&(a.bitrate&&!Ar()&&(r.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*a.bitrate))),a.sampleRate&&(r.fmtp.parameters.maxplaybackrate="".concat(a.sampleRate),r.fmtp.parameters["sprop-maxcapturerate"]="".concat(a.sampleRate)),a.stereo&&(r.fmtp.parameters.stereo="1",r.fmtp.parameters["sprop-stereo"]="1"))})}function LM(e){let t=e.attributes.unrecognized.findIndex(r=>r.attField==="x-google-flag"&&r.attValue==="conference");t!==-1&&e.attributes.unrecognized.splice(t,1)}function jM(e,t){var r;if(!(t instanceof sr&&t._encoderConfig&&t._hints.indexOf(hr.SCREEN_TRACK)===-1))return;let n=t._encoderConfig;Rt().supportMinBitrate&&n.bitrateMin&&e.attributes.payloads.forEach(i=>{var a,o;be(a=["h264","h265","vp8","vp9","av1"]).call(a,((o=i.rtpMap)===null||o===void 0?void 0:o.encodingName.toLowerCase())||"")&&(i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters["x-google-min-bitrate"]="".concat(n.bitrateMin))}),Rt().supportMinBitrate&&!be(r=t._hints).call(r,hr.LOW_STREAM)&&n.bitrateMax&&e.attributes.payloads.forEach(i=>{var a,o;be(a=["h264","h265","vp8","vp9","av1"]).call(a,((o=i.rtpMap)===null||o===void 0?void 0:o.encodingName.toLowerCase())||"")&&(i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters["x-google-start-bitrate"]="".concat(M("X_GOOGLE_START_BITRATE")||Math.floor(n.bitrateMax)))})}function Eie(e){if(e.media.mediaType!=="video")return;let t=Ct();if(t.name!==Mt.SAFARI&&t.os!==Sn.IOS)return;let r=e.attributes.extmaps.findIndex(n=>/video-orientation/g.test(n.extensionName));r!==-1&&e.attributes.extmaps.splice(r,1)}function TT(e,t,r){if(!t)return;let n,i;if(e.media.mediaType==="video"?(n=r.videoExtensions,i=r.videoCodecs):(n=r.audioExtensions,i=r.audioCodecs),t.twcc===!0){let a=n.find(o=>o.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");a&&(e.attributes.extmaps.find(o=>o.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||e.attributes.extmaps.push({entry:a.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(o,s){return s.filter(l=>!!o.find(c=>c.payloadType===l.payloadType&&!!c.rtcpFeedbacks.find(u=>u.type==="transport-cc")))}(i,e.attributes.payloads).forEach(o=>{o.rtcpFeedbacks.find(s=>s.type==="transport-cc")||o.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(t.twcc===!1){let a=e.attributes.extmaps.findIndex(o=>o.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");a!==-1&&e.attributes.extmaps.splice(a,1),e.attributes.payloads.forEach(o=>{let s=o.rtcpFeedbacks.findIndex(l=>l.type==="transport-cc");s!==-1&&o.rtcpFeedbacks.splice(s,1)})}if(t.remb===!0){let a=n.find(o=>o.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");a&&(e.attributes.extmaps.find(o=>o.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||e.attributes.extmaps.push({entry:a.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(o,s){return s.filter(l=>!!o.find(c=>c.payloadType===l.payloadType&&!!c.rtcpFeedbacks.find(u=>u.type==="goog-remb")))}(i,e.attributes.payloads).forEach(o=>{o.rtcpFeedbacks.find(s=>s.type==="goog-remb")||o.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(t.remb===!1){let a=e.attributes.extmaps.findIndex(o=>o.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");a!==-1&&e.attributes.extmaps.splice(a,1),e.attributes.payloads.forEach(o=>{let s=o.rtcpFeedbacks.findIndex(l=>l.type==="goog-remb");s!==-1&&o.rtcpFeedbacks.splice(s,1)})}}function _ie(e,t,r){if(Ar()||e.media.mediaType!=="video"||!(t instanceof sr)||r!=="vp9"&&r!=="vp8"||r==="vp8"&&!M("SIMULCAST")||r==="vp9"&&M("ENABLE_SVC")||t._scalabilityMode===void 0||t._scalabilityMode.numSpatialLayers<=1)return;let n=r==="vp8"?2:t._scalabilityMode.numSpatialLayers,i=e.attributes.ssrcs[0],a=e.attributes.ssrcGroups.find(s=>s.semantic==="FID"&&s.ssrcIds[0]===i.ssrcId),o={semantic:"SIM",ssrcIds:[i.ssrcId]};for(let s=1;s<n;s++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+s,attributes:Gr(i.attributes)}),o.ssrcIds.push(i.ssrcId+s),a&&(e.attributes.ssrcs.push({ssrcId:a.ssrcIds[1]+s,attributes:Gr(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+s,a.ssrcIds[1]+s]}));e.attributes.ssrcGroups.unshift(o)}async function Sie(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new RTCPeerConnection;r.addTransceiver("video",{direction:"sendonly"}),r.addTransceiver("audio",{direction:"sendonly"}),r.addTransceiver("video",{direction:"recvonly"}),r.addTransceiver("audio",{direction:"recvonly"});let n=(await r.createOffer()).sdp,{send:i,recv:a,sendrecv:o}=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0,u=Mv(c,s,l,"sendonly"),h=Mv(c,s,l,"recvonly"),f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},p={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},m={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Ls(u,h,"videoExtensions",f,p,m),Ls(u,h,"videoCodecs",f,p,m),Ls(u,h,"audioExtensions",f,p,m),Ls(u,h,"audioCodecs",f,p,m),M("RAISE_H264_BASELINE_PRIORITY")){let g=m.videoCodecs.findIndex(y=>{var v,b;return((v=y.rtpMap)===null||v===void 0?void 0:v.encodingName.toLocaleLowerCase())==="h264"&&((b=y.fmtp)===null||b===void 0?void 0:b.parameters["profile-level-id"])==="42001f"});if(g!==-1){let y=m.videoCodecs.findIndex(v=>{var b;return((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName.toLocaleLowerCase())==="h264"});if(y<g){_.debug("raising H264 baseline profile priority");let v=m.videoCodecs[g];m.videoCodecs.splice(g,1),m.videoCodecs.splice(y,0,v)}y!==-1&&(p.videoCodecs=p.videoCodecs.filter(v=>{var b,E;return!(((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName.toLocaleLowerCase())==="h264"&&((E=v.fmtp)===null||E===void 0?void 0:E.parameters["profile-level-id"])!=="42001f")})),y!==-1&&M("FILTER_SEND_H264_BASELINE")&&(f.videoCodecs=f.videoCodecs.filter(v=>{var b,E;return!(((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName.toLocaleLowerCase())==="h264"&&((E=v.fmtp)===null||E===void 0?void 0:E.parameters["profile-level-id"])!=="42001f")}))}}return{send:f,recv:p,sendrecv:m}}(e,t,n);try{r.close()}catch{}return{send:i,recv:a,sendrecv:o}}function RH(){let e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=Mv(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"recvonly"),r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Ls(e,t,"videoExtensions",r,n,i),Ls(e,t,"videoCodecs",r,n,i),Ls(e,t,"audioExtensions",r,n,i),Ls(e,t,"audioCodecs",r,n,i),M("RAISE_H264_BASELINE_PRIORITY")){let a=i.videoCodecs.findIndex(o=>o.rtpMap&&o.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&o.fmtp&&o.fmtp.parameters["profile-level-id"]==="42001f");if(a!==-1){let o=i.videoCodecs.findIndex(s=>s.rtpMap&&s.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(o<a){_.debug("raising H264 baseline profile priority");let s=i.videoCodecs[a];i.videoCodecs.splice(a,1),i.videoCodecs.splice(o,0,s)}o!==-1&&(n.videoCodecs=n.videoCodecs.filter(s=>!(s.rtpMap&&s.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&s.fmtp&&s.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:r,recv:n,sendrecv:i}}function Ls(e,t,r,n,i,a){if(r==="videoExtensions"||r==="audioExtensions"){let o=[];return e[r].forEach(s=>{t[r].some((l,c)=>{if(s.entry===l.entry&&s.extensionName===l.extensionName)return o.push(c),!0})?a[r].push(s):n[r].push(s)}),void t[r].forEach((s,l)=>{o.indexOf(l)===-1&&i[r].push(s)})}if(r==="videoCodecs"||r==="audioCodecs"){let o=[];return e[r].forEach(s=>{t[r].some((l,c)=>{if(s.payloadType===l.payloadType&&JSON.stringify(s)===JSON.stringify(l))return o.push(c),!0})?a[r].push(s):n[r].push(s)}),void t[r].forEach((s,l)=>{o.indexOf(l)===-1&&i[r].push(s)})}}function CT(e){let{send:t,recv:r,sendrecv:n}=e;if(!n){if(!t||!r)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:r}}let i,a;return t?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...t.audioCodecs,...n.audioCodecs],i.videoCodecs=[...t.videoCodecs,...n.videoCodecs],i.audioExtensions=[...t.audioExtensions,...n.audioExtensions],i.videoExtensions=[...t.videoExtensions,...n.videoExtensions]):i=n,r?(a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a.audioCodecs=[...r.audioCodecs,...n.audioCodecs],a.videoCodecs=[...r.videoCodecs,...n.videoCodecs],a.audioExtensions=[...r.audioExtensions,...n.audioExtensions],a.videoExtensions=[...r.videoExtensions,...n.videoExtensions]):a=n,{send:i,recv:a}}function eg(e){e.media.mediaType==="audio"&&e.attributes.payloads.filter(t=>{var r;return((r=t.rtpMap)===null||r===void 0?void 0:r.encodingName.toLowerCase())==="opus"}).forEach(t=>{t.fmtp||(t.fmtp={parameters:{}}),t.fmtp.parameters.stereo="1",t.fmtp.parameters["sprop-stereo"]="1"})}function N0(e,t,r,n){let i=[];if(e===Ne.VIDEO){if(M("H264_PROFILE_LEVEL_ID")&&n==="h264"&&(i=t.videoCodecs.filter(a=>{var o;return be(o=a.rtpMap&&a.rtpMap.encodingName.toLowerCase()||"").call(o,n)&&a&&a.fmtp&&a.fmtp.parameters["profile-level-id"]===M("H264_PROFILE_LEVEL_ID")})),!Array.isArray(i)||i.length===0){let a=[],o=[],s=[],l=[];if(r.videoCodecs.forEach(c=>{let u=c.rtpMap&&c.rtpMap.encodingName.toLowerCase()||"";be(u).call(u,n)?a.push(c):be(u).call(u,"vp9")?o.push(c):be(u).call(u,"vp8")?s.push(c):be(u).call(u,"h264")&&l.push(c)}),a.length===0){let c="";o.length!==0?(a=o,c="vp9"):s.length!==0?(a=s,c="vp8"):l.length!==0&&(a=l,c="h264"),_.warning("codec ".concat(n," not included in rtpCapabilities, fallback to default payloads: ").concat(c))}a.length!==0&&(i=t.videoCodecs.filter(c=>a.some(u=>u.payloadType===c.payloadType)))}if(i.length===0&&(_.warning("codec ".concat(n," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),i=t.videoCodecs),M("USE_PUB_RTX")||M("USE_SUB_RTX")){let a=MM(i,t.videoCodecs);i=[...i,...a]}}else i=t.audioCodecs.filter(a=>{var o;return be(o=a.rtpMap&&a.rtpMap.encodingName.toLowerCase()||"").call(o,n)}),i.length===0&&(_.warning("codec ".concat(n," not included in rtpCapabilities, fallback to opus")),i=t.audioCodecs.filter(a=>{var o;return be(o=a.rtpMap&&a.rtpMap.encodingName.toLowerCase()||"").call(o,"opus")}));return i}function MM(e,t){let r=e.map(n=>n.payloadType.toString());return t.filter(n=>n.rtpMap&&n.rtpMap.encodingName==="rtx"&&n.fmtp&&n.fmtp.parameters.apt&&be(r).call(r,n.fmtp&&n.fmtp.parameters.apt))}async function SE(e,t,r){let n=t.toString(),i=Cie(n,"offer","remote","exchangeSDP");await e.setRemoteDescription({type:"offer",sdp:n});let a=await e.createAnswer();if(!a.sdp)throw new Error("cannot get answer sdp");let o=a.sdp;o=Tie(o,r||{}),i==null||i(o||""),await e.setLocalDescription({type:"answer",sdp:o})}function Tie(e,t,r){let n=$n.parse(e),{useXR:i}=t;return n.mediaDescriptions.forEach(a=>{var o;a.attributes.mid&&(Array.isArray(r)&&!be(r).call(r,a.attributes.mid)||(a.media.mediaType==="audio"&&eg(a),i&&be(o=["audio","video"]).call(o,a.media.mediaType)&&a.attributes.payloads.forEach(s=>{s.rtcpFeedbacks.findIndex(l=>l.type==="rrtr")===-1&&s.rtcpFeedbacks.push({type:"rrtr"})})))}),$n.print(n)}function Cie(e,t,r,n){if(M("SDP_LOGGING"))return _.upload("exchanging ".concat(r," ").concat(t," SDP during P2PConnection.").concat(n,`
`),e),t==="offer"?i=>{Cie(i,"answer",r==="local"?"remote":"local",n)}:void 0}function Dl(e,t){return typeof M(e)===t?M(e):void 0}function IH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Iu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var OA=new Map,q7e=class extends Tr{get state(){return this._state}set state(e){if(e===this._state)return;let t=this._state;this._state=e,e==="DISCONNECTED"&&this._disconnectedReason?this.emit(Qn.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(Qn.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){_.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),R(this,"store",void 0),R(this,"joinInfo",void 0),R(this,"key",void 0),R(this,"ntpOffset",0),R(this,"signal",void 0),R(this,"role",void 0),R(this,"inChannelInfo",{joinAt:null,duration:0}),R(this,"spec",void 0),R(this,"_state","DISCONNECTED"),R(this,"_statsCollector",void 0),R(this,"_disconnectedReason",void 0),R(this,"isSignalRecover",!1),R(this,"hasChangeBGPAddress",!1),R(this,"trafficStatsInterval",void 0),R(this,"networkQualityInterval",void 0),R(this,"_joinGatewayStartTime",0),R(this,"_signalTimeout",!1),R(this,"_clientRoleOptions",void 0),R(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?new SH(Iu(Iu({},t),{},{retryConfig:t.websocketRetryConfig}),e):new v8e(Iu(Iu({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,r){this.store.joinGatewayStart(),e.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);let n=Date.now(),i=OA.get(e.cname);if(i||(i=new Map,OA.set(e.cname,i)),this._isProactiveJoin=!0,i.has(e.uid)){let l=new Y(k.UID_CONFLICT);throw xe.joinGateway(e.sid,{lts:n,succ:!1,ec:l.code,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:"0",preload:e.preload}),this._isProactiveJoin=!1,l}i.set(e.uid,!0),this.joinInfo=e,this.key=t;let a=0;this.joinGatewayStartTime=n;let o=e.proxyServer;try{_.debug("[".concat(this.store.clientId,"] use websocket join uid ").concat(a));let l=e.gatewayAddrs.map(c=>{let{address:u}=c,[h,f]=u.split(":"),p={host:h,port:f};return e.proxyServer&&(p.proxy=e.proxyServer),p});a=(await this.signal.init(l,r)).uid,_.debug("[".concat(this.store.clientId,"] websocket join uid ").concat(a," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(l){var s;throw _.error("[".concat(this.store.clientId,"] User join failed"),l.toString()),xe.joinGateway(e.sid,{lts:n,succ:!1,ec:((s=l.data)===null||s===void 0?void 0:s.desc)||l.code,errorMsg:l.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!o,signalChannel:"0",preload:e.preload}),this._isProactiveJoin=!1,i.delete(e.uid),this.signal.close(),l}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),_.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(l=>{_.warning("[".concat(this.store.clientId,"] get traffic stats error"),l.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(Qn.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(Qn.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(Qn.NETWORK_QUALITY,{uplinkNetworkQuality:E8(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:E8(this._statsCollector.trafficStats.B_dnq)}):this.emit(Qn.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),a}async leave(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){t!==$t.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==tr.CONNECTED||await function(r,n){return n===1/0?r:ye.race([r,m$e(n)])}(this.signal.request(Ke.LEAVE,void 0,!0),3e3)}catch(r){_.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),r)}this.signal.close(t),t!==$t.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));let n={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:M("PUB_EXTEND"),twcc:!!M("PUBLISH_TWCC"),rtx:!!M("USE_PUB_RTX")};try{return(await this.signal.request(Ke.PUBLISH,n,!0))._message}catch(i){if(r&&i.data&&i.data.code===Ue.ERR_PUBLISH_REQUEST_INVALID)return _.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),i.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw i}}async publishDataChannel(e,t,r){var n;if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));let i={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:(n=t.maxRetransmits)!==null&&n!==void 0?n:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(Ke.PUBLISH_DATASTREAM,i,!0)}catch(a){if(r&&a.data&&a.data.code===Ue.ERR_PUBLISH_REQUEST_INVALID)return _.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),a.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw a}}async unpublish(e,t){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Ke.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(r){_.warning("[".concat(this.store.clientId,"] unpublish warning: "),r)}}async unpublishDataChannel(e){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await ye.all(e.map(t=>this.signal.request(Ke.UNPUBLISH_DATASTREAM,{channel_id:t},!0)))}catch(t){_.warning("unpublish datachannels warning: ",t)}}async presubscribe(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));let n={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!M("SUBSCRIBE_TWCC"),rtx:!!M("USE_SUB_RTX")||void 0,extend:M("SUB_EXTEND"),svc:Array.isArray(M("SVC"))&&M("SVC").length!==0?M("SVC"):void 0};try{return await this.signal.request(Ke.PRE_SUBSCRIBE,n,!0)}catch(i){if(r&&i.data&&i.data.code===Ue.ERR_SUBSCRIBE_REQUEST_INVALID)return _.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),i.toString()),this.presubscribe(e,t,!1);throw i}}async subscribe(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));let n={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!M("SUBSCRIBE_TWCC"),rtx:!!M("USE_SUB_RTX"),extend:M("SUB_EXTEND"),ssrcId:t.ssrcId,svc:Array.isArray(M("SVC"))&&M("SVC").length!==0?M("SVC"):void 0};try{return(await this.signal.request(Ke.SUBSCRIBE,n,!0))._message}catch(i){if(r&&i.data&&i.data.code===Ue.ERR_SUBSCRIBE_REQUEST_INVALID)return _.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),i.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw i}}async subscribeDataChannel(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));let n={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(Ke.SUBSCRIBE_DATASTREAM,n,!0)}catch(i){if(r&&i.data&&i.data.code===Ue.ERR_SUBSCRIBE_REQUEST_INVALID)return _.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),i.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw i}}async subscribeAll(e,t){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));let r={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!M("USE_SUB_RTX"),twcc:!!M("SUBSCRIBE_TWCC"),svc:Array.isArray(M("SVC"))&&M("SVC").length!==0?M("SVC"):void 0};try{return await this.signal.request(Ke.SUBSCRIBE_STREAMS,r,!0)}catch(n){if(t&&n.data&&n.data.code===Ue.ERR_SUBSCRIBE_REQUEST_INVALID)return _.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),n.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw n}}async setVideoProfile(e){let t=function(r){if(!(r.bitrateMax&&r.bitrateMin&&r.frameRate&&r.height&&r.width))return;let n=r.frameRate,i=r.width,a=r.height,o=!0;return typeof n!="number"&&(n=n.exact||n.ideal||n.max||n.min||0,n||(o=!1)),typeof i!="number"&&(i=i.exact||i.ideal||i.max||i.min||0,i||(o=!1)),typeof a!="number"&&(a=a.exact||a.ideal||a.max||a.min||0,n||(o=!1)),o?{stream_type:0,width:i,height:a,fps:n,start_bps:1e3*r.bitrateMax,min_bps:1e3*r.bitrateMin,target_bps:1e3*r.bitrateMax}:void 0}(e);if(t)return this.signal.request(Ke.SET_VIDEO_PROFILE,t);_.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(Ke.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(r){_.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),r)}}async unsubscribeDataChannel(e,t){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await ye.all(e.map(r=>this.signal.request(Ke.UNSUBSCRIBE_DATASTREAM,{stream_id:r,uid:t},!0)))}catch(r){_.warning("unsubscribeDataChannel warning: ",r)}}async massUnsubscribe(e){try{await this.signal.request(Ke.UNSUBSCRIBE_STREAMS,e,!0)}catch(t){_.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),t)}}async reconnectPC(e){let{iceParameters:t,dtlsParameters:r,rtpCapabilities:n}=e;return{gatewayEstablishParams:await this.signal.request(Ke.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:r,rtpCapabilities:n}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(Ke.GATEWAY_INFO)}async renewToken(e){await this.signal.request(Ke.RENEW_TOKEN,e),this.key=e.token}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),this.state!=="CONNECTED")return void(this.role=e);let r,n=0;e==="audience"?this._clientRoleOptions&&this._clientRoleOptions.delay?(r=this._clientRoleOptions.delay,n=1):n=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:n=0,await this.signal.request(Ke.SET_CLIENT_ROLE,{role:e,level:n,delay:r,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(Ke.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(Ke.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(Ke.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(Ke.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(Ke.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,r){if(this.signal instanceof SH)return this.signal.sendExtensionMessage(e,t,r)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Iu({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Ke.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){let e=OA.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;let e=function(t){let r;return r=t.startsWith("dc")?t.match(/(dc\:\/\/)?([^:]+):(\d+)/):t.match(/(wss\:\/\/)?([^:]+):(\d+)/),r?{username:Zn.username,password:Zn.password,turnServerURL:r[2],tcpport:parseInt(r[3])+30,udpport:parseInt(r[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(Iu(Iu({},Zn),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;let e=await this.signal.request(Ke.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),e.ntp_offset!=null&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach(t=>{let r=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(n=>n.peer_uid===t.peer_uid);r&&r.B_st!==t.B_st&&Tx(()=>{this.emit(Qn.STREAM_TYPE_CHANGE,t.peer_uid,t.B_st)})}),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new Y(k.UNEXPECTED_ERROR,"can not generate join message, no join info");let t=Object.assign({},this.joinInfo.apResponse),r=M("REPORT_APP_SCENARIO");if(typeof r!="string")try{r=JSON.stringify(r)}catch{r=void 0}r&&r.length>128&&(r=void 0);let n=!(Ar()||mne(87)||G8())&&typeof M("ENABLE_PRE_SUB")=="boolean"&&M("ENABLE_PRE_SUB"),i=!G8()&&Dl("ENABLE_PREALLOC_PC","boolean"),a=Iu({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:$o,browser:navigator.userAgent,process_id:M("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:M("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:r,attributes:{userAttributes:{enablePublishedUserList:M("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:M("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof M("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?M("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof M("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?M("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof M("ENABLE_USER_LICENSE_CHECK")=="boolean"?M("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:M("USE_PUB_RTX")===!0||M("USE_SUB_RTX")===!0||void 0,disableFEC:M("DISABLE_FEC"),enableNTPReport:!!M("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!M("ENABLE_INSTANT_VIDEO")||void 0,enableFulllinkAvSync:!!M("ENABLE_FULL_LINK_AV_SYNC")||void 0,enableDataStream2:Dl("ENABLE_DATASTREAM_2","boolean"),enableAutFeedback:!!M("ENABLE_AUT_FEEDBACK")||void 0,rtm2Flag:typeof this.joinInfo.rtmFlag=="number"?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!M("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:Dl("USE_XR","boolean"),enableLossbasedBwe:Dl("ENABLE_LOSSBASED_BWE","boolean"),enableAutCC:!!M("ENABLE_AUT_CC")||void 0,enableCCFallback:Dl("ENABLE_CC_FALLBACK","boolean"),enablePreallocPC:i,preSubNum:n?Dl("PRE_SUB_NUM","number"):void 0,enablePubTWCC:Dl("PUBLISH_TWCC","boolean"),enableSubTWCC:Dl("SUBSCRIBE_TWCC","boolean"),enablePubRTX:Dl("USE_PUB_RTX","boolean"),enableSubRTX:Dl("USE_SUB_RTX","boolean"),enableSubSVC:M("ENABLE_SVC")?M("ENABLE_SVC_DEFAULT_CODECS"):Array.isArray(M("SVC"))&&M("SVC").length!==0?M("SVC"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(a.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(a.aes_mode=this.joinInfo.aesmode,M("ENCRYPT_AES")?(a.aes_secret=this.joinInfo.aespassword,a.aes_encrypt=!0):a.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(a.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(a.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),this.joinInfo.defaultVideoStream!==void 0&&(a.default_video_stream=this.joinInfo.defaultVideoStream),a}getRejoinMessage(){if(!this.joinInfo)throw new Y(k.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(qe.WS_RECONNECT_WAITTING_FINISH,e=>{var t;be(t=["tryNext","recover"]).call(t,e)&&this.joinInfo&&xe.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(qe.WS_RECONNECT_CREATE_CONNECTION,e=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(qe.WS_RECONNECTING,e=>{this.joinInfo&&xe.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||ri.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",xe.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:this.spec.mode==="live"?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:this.role==="audience"?2:1,buildFormat:2}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(qe.WS_CLOSED,e=>{let t;switch(e){case $t.LEAVE:t=ri.LEAVE;break;case $t.UID_BANNED:case $t.IP_BANNED:case $t.CHANNEL_BANNED:case $t.SERVER_ERROR:t=ri.SERVER_ERROR;break;case $t.FALLBACK:t=ri.FALLBACK;break;case $t.LICENSE_MISSING:case $t.LICENSE_EXPIRED:case $t.LICENSE_MINUTES_EXCEEDED:case $t.LICENSE_PERIOD_INVALID:case $t.LICENSE_MULTIPLE_SDK_SERVICE:case $t.LICENSE_ILLEGAL:case $t.TOKEN_EXPIRE:t=e;break;default:t=ri.NETWORK_ERROR}_.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(t||"undefined -> "+ri.NETWORK_ERROR)),this.joinInfo&&xe.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===$t.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==$t.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(qe.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(_.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),xe.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){let e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void _.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));Wt("EVENT_REPORT_DOMAIN",e[1]),Wt("EVENT_REPORT_BACKUP_DOMAIN",e[1]),Wt("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}}),this.signal.on(mt.ON_UPLINK_STATS,e=>{this._statsCollector.updateUplinkStats(e)}),this.signal.on(qe.REQUEST_RECOVER,(e,t,r)=>{if(!this.joinInfo)return r(new Y(k.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,ii(this,Qn.REQUEST_NEW_GATEWAY_LIST).then(t).catch(r)}),this.signal.on(qe.REQUEST_JOIN_INFO,async e=>{var t;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));let{iceParameters:r,dtlsParameters:n,rtpCapabilities:i}=await ii(this,Qn.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(t=this.joinInfo)===null||t===void 0?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:r,dtlsParameters:n,rtpCapabilities:i,version:"2"}}))}),this.signal.on(qe.REQUEST_REJOIN_INFO,e=>{e(this.getRejoinMessage())}),this.signal.on(qe.REPORT_JOIN_GATEWAY,(e,t)=>{if(!this.joinInfo)return;let r,n="";var i;e instanceof Y?(r=((i=e.data)===null||i===void 0?void 0:i.desc)||e.code,n=e.message):r=e,xe.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:r,errorMsg:n,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1}),this.signal.on(qe.IS_P2P_DISCONNECTED,e=>{e(kv(this,Qn.IS_P2P_DISCONNECTED))}),this.signal.on(qe.DISCONNECT_P2P,()=>{this.emit(Qn.DISCONNECT_P2P)}),this.signal.on(qe.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(qe.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(qe.JOIN_RESPONSE,e=>{let t=this.getCurrentGatewayAddress();this.emit(Qn.JOIN_RESPONSE,e,t)}),this.signal.on(qe.PRE_CONNECT_PC,async()=>{if(this.joinInfo){this.updateTurnConfigFromSignal();let e=this.getCurrentGatewayAddress(),t=M("FINGERPRINT")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(e&&t){let r=wie(e);this.emit(Qn.PRE_CONNECT_PC,{candidates:r,fingerprint:t})}}})}async tryUnsubBeforeResub(e,t){try{await this.signal.request(Ke.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(r){throw _.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),r),r}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(Ke.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(r){throw _.warning("unsubscribe datachannel warning",r),r}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(Ke.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(r){throw _.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),r),r}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(Ke.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(r){throw _.warning("unpublish datastream warning: ",r),r}}async tryMassUnsubBeforeResub(e){let t={users:e.map(r=>({stream_id:r.stream_id,stream_type:r.stream_type}))};try{await this.signal.request(Ke.UNSUBSCRIBE_STREAMS,t,!0)}catch(r){throw _.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),r),r}}async muteLocal(e,t){let r={action:e.find(n=>n.stream_type===jt.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(Ke.CONTROL,r,!0,!0)}catch(n){throw _.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),n),n}}async unmuteLocal(e,t){let r={action:e.find(n=>n.stream_type===jt.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(Ke.CONTROL,r,!0,!0)}catch(n){throw _.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),n),n}}async muteRemote(e,t){let r={action:e===Ne.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(Ke.CONTROL,r,!0,!0)}catch(n){throw _.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),n),n}}async unmuteRemote(e,t){let r={action:e===Ne.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(Ke.CONTROL,r,!0,!0)}catch(n){throw _.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),n),n}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){let t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(Ke.RESTART_ICE,t,!0)}catch(r){throw _.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),r),r}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,ri.P2P_FAILED)}getCurrentGatewayAddress(){var e,t;if(!M("GATEWAY_WSS_ADDRESS"))return M("USE_CANDIDATE_FROM_AP_DETAIL")&&(e=this.joinInfo)!==null&&e!==void 0&&e.apGatewayAddress?(_.debug("[".concat(this.store.clientId,"] use candidate from ap detail, ").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):(t=this.joinInfo)!==null&&t!==void 0&&t.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(Ke.SET_PARAMETER,{enablePublishAudioFilter:e})}},TE=0,kA=0;function xl(e,t,r,n){return new ye((i,a)=>{t.timeout=t.timeout||M("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!r?(t.data=JSON.stringify(t.data),TE+=Ql(t.data)):r&&(t.data.size?TE+=t.data.size:t.data instanceof FormData?TE+=xne(t.data):TE+=Ql(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,pa.request(t).then(o=>{typeof o.data=="string"?kA+=Ql(o.data):o.data instanceof ArrayBuffer||o.data instanceof Uint8Array?kA+=o.data.byteLength:kA+=Ql(JSON.stringify(o.data)),n&&i({data:o.data,headers:o.headers}),i(o.data)}).catch(o=>{pa.isCancel(o)?a(new Y(k.OPERATION_ABORTED,"cancel token canceled")):o.code==="ECONNABORTED"?a(new Y(k.NETWORK_TIMEOUT,o.message)):o.response?a(new Y(k.NETWORK_RESPONSE_ERROR,o.response.status)):a(new Y(k.NETWORK_ERROR,o.message))})})}(function(){var e;function t(P){var D=0;return function(){return D<P.length?{done:!1,value:P[D++]}:{done:!0}}}var r=typeof Object.defineProperties=="function"?Object.defineProperty:function(P,D,H){return P==Array.prototype||P==Object.prototype||(P[D]=H.value),P},n,i=function(P){P=[typeof globalThis=="object"&&globalThis,P,typeof window=="object"&&window,typeof self=="object"&&self,typeof fm=="object"&&fm];for(var D=0;D<P.length;++D){var H=P[D];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}(this);function a(P,D){if(D)e:{var H=i;P=P.split(".");for(var x=0;x<P.length-1;x++){var w=P[x];if(!(w in H))break e;H=H[w]}(D=D(x=H[P=P[P.length-1]]))!=x&&D!=null&&r(H,P,{configurable:!0,writable:!0,value:D})}}function o(P){return(P={next:P})[Symbol.iterator]=function(){return this},P}function s(P){var D=typeof Symbol<"u"&&Symbol.iterator&&P[Symbol.iterator];return D?D.call(P):{next:t(P)}}if(a("Symbol",function(P){function D(w,O){this.A=w,r(this,"description",{configurable:!0,writable:!0,value:O})}if(P)return P;D.prototype.toString=function(){return this.A};var H="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",x=0;return function w(O){if(this instanceof w)throw new TypeError("Symbol is not a constructor");return new D(H+(O||"")+"_"+x++,O)}}),a("Symbol.iterator",function(P){if(P)return P;P=Symbol("Symbol.iterator");for(var D="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),H=0;H<D.length;H++){var x=i[D[H]];typeof x=="function"&&typeof x.prototype[P]!="function"&&r(x.prototype,P,{configurable:!0,writable:!0,value:function(){return o(t(this))}})}return P}),typeof Object.setPrototypeOf=="function")n=Object.setPrototypeOf;else{var l;e:{var c={};try{c.__proto__={a:!0},l=c.a;break e}catch{}l=!1}n=l?function(P,D){if(P.__proto__=D,P.__proto__!==D)throw new TypeError(P+" is not extensible");return P}:null}var u=n;function h(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function f(P){if(P.m)throw new TypeError("Generator is already running");P.m=!0}function p(P,D){return P.h=3,{value:D}}function m(P){this.g=new h,this.G=P}function g(P,D,H,x){try{var w=D.call(P.g.j,H);if(!(w instanceof Object))throw new TypeError("Iterator result "+w+" is not an object");if(!w.done)return P.g.m=!1,w;var O=w.value}catch(C){return P.g.j=null,P.g.s(C),y(P)}return P.g.j=null,x.call(P.g,O),y(P)}function y(P){for(;P.g.h;)try{var D=P.G(P.g);if(D)return P.g.m=!1,{value:D.value,done:!1}}catch(H){P.g.v=void 0,P.g.s(H)}if(P.g.m=!1,P.g.l){if(D=P.g.l,P.g.l=null,D.F)throw D.D;return{value:D.return,done:!0}}return{value:void 0,done:!0}}function v(P){this.next=function(D){return P.o(D)},this.throw=function(D){return P.s(D)},this.return=function(D){return function(H,x){f(H.g);var w=H.g.j;return w?g(H,"return"in w?w.return:function(O){return{value:O,done:!0}},x,H.g.return):(H.g.return(x),y(H))}(P,D)},this[Symbol.iterator]=function(){return this}}function b(P,D){return D=new v(new m(D)),u&&P.prototype&&u(D,P.prototype),D}if(h.prototype.o=function(P){this.v=P},h.prototype.s=function(P){this.l={D:P,F:!0},this.h=this.C||this.u},h.prototype.return=function(P){this.l={return:P},this.h=this.u},m.prototype.o=function(P){return f(this.g),this.g.j?g(this,this.g.j.next,P,this.g.o):(this.g.o(P),y(this))},m.prototype.s=function(P){return f(this.g),this.g.j?g(this,this.g.j.throw,P,this.g.o):(this.g.s(P),y(this))},a("Array.prototype.entries",function(P){return P||function(){return function(D,H){D instanceof String&&(D+="");var x=0,w=!1,O={next:function(){if(!w&&x<D.length){var C=x++;return{value:H(C,D[C]),done:!1}}return w=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}(this,function(D,H){return[D,H]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var E=function(P,D){for(var H=0;H<P.length;H++)D(P[H])},S=function(P){return P.replace(/\r?\n|\r/g,`\r
`)},I=function(P,D,H){return D instanceof Blob?(H=H!==void 0?H+"":typeof D.name=="string"?D.name:"blob",D.name===H&&Object.prototype.toString.call(D)!=="[object Blob]"||(D=new File([D],H)),[String(P),D]):[String(P),String(D)]},N=function(P,D){if(P.length<D)throw new TypeError(D+" argument required, but only "+P.length+" present.")},L=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,j=L.FormData,z=L.XMLHttpRequest&&L.XMLHttpRequest.prototype.send,A=L.Request&&L.fetch,V=L.navigator&&L.navigator.sendBeacon,G=L.Element&&L.Element.prototype,X=L.Symbol&&Symbol.toStringTag;X&&(Blob.prototype[X]||(Blob.prototype[X]="Blob"),"File"in L&&!File.prototype[X]&&(File.prototype[X]="File"));try{new File([],"")}catch{L.File=function(P,D,H){return P=new Blob(P,H||{}),Object.defineProperties(P,{name:{value:D},lastModified:{value:+(H&&H.lastModified!==void 0?new Date(H.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),X&&Object.defineProperty(P,X,{value:"File"}),P}}var $=function(P){return P.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},B=function(P){this.i=[];var D=this;P&&E(P.elements,function(H){if(H.name&&!H.disabled&&H.type!=="submit"&&H.type!=="button"&&!H.matches("form fieldset[disabled] *"))if(H.type==="file"){var x=H.files&&H.files.length?H.files:[new File([],"",{type:"application/octet-stream"})];E(x,function(w){D.append(H.name,w)})}else H.type==="select-multiple"||H.type==="select-one"?E(H.options,function(w){!w.disabled&&w.selected&&D.append(H.name,w.value)}):H.type==="checkbox"||H.type==="radio"?H.checked&&D.append(H.name,H.value):(x=H.type==="textarea"?S(H.value):H.value,D.append(H.name,x))})};if((e=B.prototype).append=function(P,D,H){N(arguments,2),this.i.push(I(P,D,H))},e.delete=function(P){N(arguments,1);var D=[];P=String(P),E(this.i,function(H){H[0]!==P&&D.push(H)}),this.i=D},e.entries=function P(){var D,H=this;return b(P,function(x){if(x.h==1&&(D=0),x.h!=3)return D<H.i.length?x=p(x,H.i[D]):(x.h=0,x=void 0),x;D++,x.h=2})},e.forEach=function(P,D){N(arguments,1);for(var H=s(this),x=H.next();!x.done;x=H.next()){var w=s(x.value);x=w.next().value,w=w.next().value,P.call(D,w,x,this)}},e.get=function(P){N(arguments,1);var D=this.i;P=String(P);for(var H=0;H<D.length;H++)if(D[H][0]===P)return D[H][1];return null},e.getAll=function(P){N(arguments,1);var D=[];return P=String(P),E(this.i,function(H){H[0]===P&&D.push(H[1])}),D},e.has=function(P){N(arguments,1),P=String(P);for(var D=0;D<this.i.length;D++)if(this.i[D][0]===P)return!0;return!1},e.keys=function P(){var D,H,x,w,O=this;return b(P,function(C){if(C.h==1&&(D=s(O),H=D.next()),C.h!=3)return H.done?void(C.h=0):(x=H.value,w=s(x),p(C,w.next().value));H=D.next(),C.h=2})},e.set=function(P,D,H){N(arguments,2),P=String(P);var x=[],w=I(P,D,H),O=!0;E(this.i,function(C){C[0]===P?O&&(O=!x.push(w)):x.push(C)}),O&&x.push(w),this.i=x},e.values=function P(){var D,H,x,w,O=this;return b(P,function(C){if(C.h==1&&(D=s(O),H=D.next()),C.h!=3)return H.done?void(C.h=0):(x=H.value,(w=s(x)).next(),p(C,w.next().value));H=D.next(),C.h=2})},B.prototype._asNative=function(){for(var P=new j,D=s(this),H=D.next();!H.done;H=D.next()){var x=s(H.value);H=x.next().value,x=x.next().value,P.append(H,x)}return P},B.prototype._blob=function(){var P="----formdata-polyfill-"+Math.random(),D=[],H="--"+P+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(x,w){return typeof x=="string"?D.push(H+$(S(w))+`"\r
\r
`+S(x)+`\r
`):D.push(H+$(S(w))+'"; filename="'+$(x.name)+`"\r
Content-Type: `+(x.type||"application/octet-stream")+`\r
\r
`,x,`\r
`)}),D.push("--"+P+"--"),new Blob(D,{type:"multipart/form-data; boundary="+P})},B.prototype[Symbol.iterator]=function(){return this.entries()},B.prototype.toString=function(){return"[object FormData]"},G&&!G.matches&&(G.matches=G.matchesSelector||G.mozMatchesSelector||G.msMatchesSelector||G.oMatchesSelector||G.webkitMatchesSelector||function(P){for(var D=(P=(this.document||this.ownerDocument).querySelectorAll(P)).length;0<=--D&&P.item(D)!==this;);return-1<D}),X&&(B.prototype[X]="FormData"),z){var K=L.XMLHttpRequest.prototype.setRequestHeader;L.XMLHttpRequest.prototype.setRequestHeader=function(P,D){K.call(this,P,D),P.toLowerCase()==="content-type"&&(this.B=!0)},L.XMLHttpRequest.prototype.send=function(P){P instanceof B?(P=P._blob(),this.B||this.setRequestHeader("Content-Type",P.type),z.call(this,P)):z.call(this,P)}}A&&(L.fetch=function(P,D){return D&&D.body&&D.body instanceof B&&(D.body=D.body._blob()),A.call(this,P,D)}),V&&(L.navigator.sendBeacon=function(P,D){return D instanceof B&&(D=D._asNative()),V.call(this,P,D)}),L.FormData=B}})();var Uv=()=>{let e=M("AREAS");return e.length===0&&e.push(At.GLOBAL),wl(e).call(e,(t,r,n)=>{let i=xie(r);return i?n===0?i:"".concat(t,",").concat(i):t},"")},xie=e=>e===At.OVERSEA?"".concat(ui.ASIA,",").concat(ui.EUROPE,",").concat(ui.AFRICA,",").concat(ui.NORTH_AMERICA,",").concat(ui.SOUTH_AMERICA,",").concat(ui.OCEANIA):ui[e],Y7e=e=>{let t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map(r=>{let n=Nx[r],i=Object.keys(n);i&&i.map(a=>{a!=="CODE"&&(t[a]=t[a].concat(n[a]))})}),t},P_={GLOBAL:{ASIA:[At.CHINA,At.JAPAN,At.INDIA,At.KOREA,At.HKMC],EUROPE:[],NORTH_AMERICA:[At.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},CE=Object.keys(P_[At.GLOBAL]),PA=[At.CHINA,At.NORTH_AMERICA,At.EUROPE,At.ASIA,At.JAPAN,At.INDIA,At.OCEANIA,At.SOUTH_AMERICA,At.AFRICA,At.KOREA,At.HKMC,At.US],X7e=function(e,t){let r=[];if(be(e).call(e,At.GLOBAL)){let a=[At.GLOBAL,At.OVERSEA],o=Object.keys(Nx);if(t===At.GLOBAL)throw new Y(k.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===At.CHINA)r=[At.OVERSEA];else if(i=t,be(CE).call(CE,i)){let s=(n=t,P_[At.GLOBAL][n]||[]),l=[...a,t,...s];r=o.filter(c=>!be(l).call(l,c))}else if(function(s){let l=!1;return CE.forEach(c=>{var u;be(u=P_[At.GLOBAL][c]).call(u,s)&&(l=!0)}),l}(t)){let s=function(c){let u;return CE.forEach(h=>{var f;be(f=P_[At.GLOBAL][h]).call(f,c)&&(u=h)}),u}(t),l=[...a,s,t];r=o.filter(c=>!be(l).call(l,c))}else r=e;r=function(s){let l=[];return PA.forEach(c=>{be(s).call(s,c)&&l.push(c)}),l.concat(s.filter(c=>!be(PA).call(PA,c)))}(r)}else r=e;var n,i;return r};function NH(e){var t,r;if(!e&&be(t=M("AREAS")).call(t,At.EXTENSIONS))return _.debug("update area from ap : reset"),void UM(C$e,!0);if(!be(r=M("AREAS")).call(r,At.GLOBAL)||!e)return;let n=Nx.EXTENSIONS;n&&(n={CODE:xie(At.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},_.debug("update area from ap success: ".concat(e,",config is "),n),Wt("AREAS",[At.EXTENSIONS],!0),Object.keys(n).map(i=>{i==="LOG_UPLOAD_SERVER"||i==="EVENT_REPORT_DOMAIN"||i==="EVENT_REPORT_BACKUP_DOMAIN"||i==="PROXY_SERVER_TYPE3"?Wt(i,n[i][0]):Wt(i,n[i])}))}function UM(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=xe.reportApiInvoke(null,{name:sn.SET_AREA,options:e,tag:Nr.TRACER});try{let n=[];if(typeof e=="string"&&(n=[e]),Array.isArray(e)&&(e.forEach(a=>{if(!be(p8).call(p8,a))throw new Y(k.INVALID_PARAMS,"invalid area code")}),n=e),Object.prototype.toString.call(e)==="[object Object]"){let{areaCode:a,excludedArea:o}=e;if(!a)throw new Y(k.INVALID_PARAMS,"area code is needed");let s=a;typeof a=="string"&&(s=[a]),n=o?X7e(s,o):s}if(!t){if(ed.AREAS){let a=new Y(k.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return r.onError(a),void _.warning("setArea is prohibited because of config-distribute")}if(be(n).call(n,At.GLOBAL)&&M("AREAS")===At.EXTENSIONS){let a=new Y(k.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return r.onError(a),void _.warning("setArea is prohibited because of ap extensions")}}Wt("AREAS",n,t);let i=Y7e(n);Object.keys(i).map(a=>{a==="LOG_UPLOAD_SERVER"||a==="EVENT_REPORT_DOMAIN"||a==="EVENT_REPORT_BACKUP_DOMAIN"||a==="PROXY_SERVER_TYPE3"?Wt(a,i[a][0]):Wt(a,i[a])}),_.debug("set area success:",n.join(","))}catch(n){throw r.onError(n),n}r.onSuccess()}function AH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var DA=1;function J7e(e,t,r,n,i){DA+=1;let a={sid:r.sid,command:"convergeAllocateEdge",uid:"666",appId:r.appId,ts:Math.floor(Date.now()/1e3),seq:DA,requestId:DA,version:$o,cname:r.cname},o={service_name:t,json_body:JSON.stringify(a)},s,l,c=e[0];return Cl(async()=>{s=Date.now();let u=await xl(c,{data:o,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(l=Date.now()-s,u.code!==0){let p=new Y(k.UNEXPECTED_RESPONSE,"live streaming ap error, code"+u.code,{retry:!0,responseTime:l});throw _.error(p.toString()),p}let h=JSON.parse(u.json_body);if(h.code!==200){let p=new Y(k.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(h.code,", reason: ").concat(h.reason),{code:h.code,responseTime:l});throw _.error(p.toString()),p}if(!h.servers||h.servers.length===0){let p=new Y(k.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:h.code,responseTime:l});throw _.error(p.toString()),p}let f=function(p,m){return{addressList:p.servers.map(g=>"wss://".concat(g.address.replace(/\./g,"-"),".").concat(M("WORKER_DOMAIN"),":").concat(g.wss,"?serviceName=").concat(encodeURIComponent(m))),workerToken:p.workerToken,vid:p.vid}}(h,t);return M("LIVE_STREAMING_ADDRESS")&&(f.addressList=M("LIVE_STREAMING_ADDRESS")instanceof Array?M("LIVE_STREAMING_ADDRESS"):[M("LIVE_STREAMING_ADDRESS")]),hD(hD({},f),{},{responseTime:l})},(u,h)=>(xe.apworkerEvent(r.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(u.addressList),firstSuccess:h===0,responseTime:l,serverIp:e[h%e.length]}),!1),(u,h)=>(xe.apworkerEvent(r.sid,{success:!1,sc:u.data&&u.data.code||200,serviceName:t,responseTime:l,serverIp:e[h%e.length]}),!!(u.code!==k.OPERATION_ABORTED&&u.code!==k.UNEXPECTED_RESPONSE||u.data&&u.data.retry)&&(c=e[(h+1)%e.length],!0)),i)}var LA=1;function OH(e,t,r,n){let{url:i,areaCode:a}=e,{clientId:o,sid:s}=t,l=Date.now(),c,[u,h]=VM(t,a,[Wr.CHOOSE_SERVER]),f=Kr.networkState;return Cl(async()=>{f&&Kr.networkState===Va.OFFLINE&&Kr.onlineWaiter&&await ye.race([Kr.onlineWaiter,zn(n&&n.maxRetryTimeout||Zr.maxRetryTimeout)]),f=Kr.networkState;let{data:p,headers:m}=await xl(i,{data:u,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);c=m.http3==="1"?1:-1,xe.reportResourceTiming(i,s),Rie(p,i,t,l,[Wr.CHOOSE_SERVER],c);let g=jv(p,Wr.CHOOSE_SERVER);return FM(g),RM(g,i)},p=>(p&&xe.joinChooseServer(s,{lts:l,succ:!0,csAddr:i,opid:h,serverList:p.gatewayAddrs.map(m=>m.address),ec:null,cid:p.cid.toString(),uid:p.uid.toString(),csIp:p.csIp,unilbsServerIds:[Wr.CHOOSE_SERVER].toString(),isHttp3:c}),!1),p=>p.code!==k.OPERATION_ABORTED&&(p.code===k.CAN_NOT_GET_GATEWAY_SERVER?p.data.retry:(xe.joinChooseServer(s,{lts:l,succ:!1,csAddr:i,serverList:null,opid:h,ec:p.code,csIp:p.data&&p.data.csIp,unilbsServerIds:[Wr.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:f}),isHttp3:c}),_.warning("[".concat(o||"sid-".concat(s.slice(0,6)),"] Choose server network error, retry"),p),!0)),n)}function kH(e,t,r,n){let i,{url:a,areaCode:o,serviceIds:s}=e,l=Date.now(),[c,u]=VM(t,o,s),h;return Cl(async()=>{h&&Kr.networkState===Va.OFFLINE&&Kr.onlineWaiter&&await ye.race([Kr.onlineWaiter,zn(n&&n.maxRetryTimeout||Zr.maxRetryTimeout)]),h=Kr.networkState;let{data:f,headers:p}=await xl(a,{data:c,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);i=p.http3==="1"?1:-1,xe.reportResourceTiming(a,t.sid),Rie(f,a,t,l,s,i);let m=jv(f,Wr.CHOOSE_SERVER),g=jv(f,t.cloudProxyServer==="proxy5"?Wr.CLOUD_PROXY_5:t.cloudProxyServer==="proxy3"||t.cloudProxyServer==="proxy4"?Wr.CLOUD_PROXY:Wr.CLOUD_PROXY_FALLBACK);return FM(m),{gatewayInfo:RM(m,a),proxyInfo:g,url:a}},f=>(f.gatewayInfo&&xe.joinChooseServer(t.sid,{lts:l,succ:!0,csAddr:a,serverList:f.gatewayInfo.gatewayAddrs.map(p=>p.address),ec:null,opid:u,cid:f.gatewayInfo.cid.toString(),uid:f.gatewayInfo.uid.toString(),csIp:f.gatewayInfo.csIp,unilbsServerIds:s.toString(),isHttp3:i}),f.proxyInfo&&xe.joinWebProxyAP(t.sid,{lts:l,sucess:1,apServerAddr:a,turnServerAddrList:f.proxyInfo.addresses.map(p=>p.ip).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:s.toString()}),!1),f=>f.code!==k.OPERATION_ABORTED&&(f.code===k.CAN_NOT_GET_GATEWAY_SERVER?f.data.retry:(xe.joinWebProxyAP(t.sid,{lts:l,sucess:0,apServerAddr:a,turnServerAddrList:null,errorCode:f.code,eventType:t.cloudProxyServer,unilbsServerIds:s.toString(),extend:JSON.stringify({networkState:h})}),_.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),f),!0)),n)}var Rie=(e,t,r,n,i,a)=>{let{sid:o,clientId:s,cloudProxyServer:l}=r,c=[],u=h=>{h.flag===4096?xe.joinChooseServer(o,{lts:n,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:h.error.message,csIp:h.error.data&&h.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:a}):h.flag!==1048576&&h.flag!==4194304&&h.flag!==4194310||xe.joinWebProxyAP(o,{lts:n,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:h.error.code,eventType:l,unilbsServerIds:i.toString()})};if(e.response_body.forEach(h=>{let f=h.buffer.code;if(h.uri===23&&f===0&&!h.buffer.edges_services)if(h.buffer.flag===4194310)_.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),h.buffer.edges_services=[];else{let p={error:new Y(k.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:h.buffer.flag};c.push(p),u(p)}if(f!==0){let p=Xm(f),m={error:new Y(k.CAN_NOT_GET_GATEWAY_SERVER,p.desc,{desc:p.desc,retry:p.retry,csIp:e.detail[502]}),flag:h.buffer.flag};h.buffer.flag===4194310?_.warning(m.error.toString()):c.push(m),u(m)}}),c.length)throw _.warning("[".concat(s||"sid-".concat(o.slice(0,6)),"] multi unilbs ").concat(t," failed, ").concat(c.map(h=>"flag: ".concat(h.flag,", message: ").concat(h.error.message,", retry: ").concat(h.error.data.retry)).join(" | "))),new Y(k.CAN_NOT_GET_GATEWAY_SERVER,c.map(h=>"flag: ".concat(h.flag,", message: ").concat(h.error.message)).join(" | "),{retry:!!c.find(h=>h.error.data.retry),csIp:e.detail[502],desc:[...new Set(c.map(h=>{var f;return h==null||(f=h.error)===null||f===void 0||(f=f.data)===null||f===void 0?void 0:f.desc}).filter(h=>!!h))]})},FM=e=>{var t,r,n,i;if(e.addresses&&e.addresses.length===0&&e.code===0)throw new Y(k.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(M("AP_AREA")&&((n=e.detail)!==null&&n!==void 0&&n[23]&&typeof((i=e.detail)===null||i===void 0?void 0:i[23])=="string"?NH(e.detail[23].toLowerCase()):NH()),(t=e.detail)!==null&&t!==void 0&&t[19]&&typeof((r=e.detail)===null||r===void 0?void 0:r[19])=="string"){let o=e.detail[19],s=o==null?void 0:o.split(";");for(let l=0;l<s.length;l++){var a;let c=Ui(a=s[l]).call(a);e.addresses[l]&&s&&(e.addresses[l].fingerprint=c)}}if(M("GATEWAY_ADDRESS")&&M("GATEWAY_ADDRESS").length>0){_.debug("assign gateway address to",M("GATEWAY_ADDRESS"));let o=M("GATEWAY_ADDRESS").map(s=>{var l,c;let u=(l=(c=e.addresses.find(h=>h.ip===s.ip&&h.port===s.port))===null||c===void 0?void 0:c.fingerprint)!==null&&l!==void 0?l:"";return{ip:s.ip,port:s.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:u}});e.addresses=o}},Q7e=(e,t)=>{if(e.response_body&&e.response_body.length){let r=e.response_body[0];if(r.buffer.code!==0){let n=Xm(r.buffer.code);throw new Y(k.UPDATE_TICKET_FAILED,"[".concat(r.buffer.code,"]: ").concat(n.desc),{retry:n.retry})}return r.buffer.ticket}throw _.debug("update ticket request received ap response without response body:",t),new Y(k.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},VM=(e,t,r)=>{let n=Math.floor(Math.random()*1e12),i={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:hD({6:e.stringUid,11:t,12:M("USE_NEW_TOKEN")?"1":void 0,22:t},e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:r,uid:e.uid||0}}]};i.request_bodies.forEach(o=>{e.multiIP&&e.multiIP.gateway_ip&&(o.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))});let a=new FormData;return a.append("request",JSON.stringify(i)),[a,n]},Z7e=(e,t)=>{let r=Math.floor(Math.random()*1e12),n={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map(a=>({ip:a.ip,port:a.port}))}}]},i=new FormData;return i.append("request",JSON.stringify(n)),[i,r]},wm=0;function Vg(e){return ye.all(e.map(t=>t.then(r=>{throw r},r=>r))).then(t=>{throw t},t=>t)}var Fv=async e=>{let{fragementLength:t,referenceList:r,asyncMapHandler:n,allFailedhandler:i,promisesCollector:a}=e,o=0,s=t,l,c=0,u=async()=>{let h=(()=>{let f=o*s,p=f+s;return r.slice(f,p).map(n)})();a&&a.push(...h);try{l=await Vg(h)}catch(f){if(c+=s,o++,!(c>=r.length))return void await u();i(f)}h.forEach(f=>f.cancel())};return await u(),l},Iie=async e=>{let{referenceList:t,asyncMapHandler:r,closeFn:n}=e,i=t.length,a=0,o=async()=>{let s=r(t.shift());try{return await s}catch(l){if(a++,a>=i||n!=null&&n(l))throw l;return o()}};return o()};async function fD(e,t,r,n){return{gatewayInfo:await async function(i,a,o,s){let l=null,c=[],u=async()=>{let f=M("WEBCS_DOMAIN").slice(0,M("AJAX_REQUEST_CONCURRENT")).map(g=>({url:i.proxyServer?"https://".concat(i.proxyServer,"/ap/?url=").concat(g+"/api/v2/transpond/webrtc?v=2"):"https://".concat(g,"/api/v2/transpond/webrtc?v=2"),areaCode:Uv()})),p=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:f.map(g=>g.url)}),m=await Fv({fragementLength:M("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:g=>(_.debug("[".concat(i.clientId,"] Connect to choose_server:"),g.url),OH(g,i,a,o)),allFailedhandler:g=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:g},p),g[0]},promisesCollector:c});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},p),m},h=async()=>{if(await zn(1e3),l!==null)return l;let f=M("WEBCS_DOMAIN_BACKUP_LIST").map(g=>({url:i.proxyServer?"https://".concat(i.proxyServer,"/ap/?url=").concat(g+"/api/v2/transpond/webrtc?v=2"):"https://".concat(g,"/api/v2/transpond/webrtc?v=2"),areaCode:Uv()})),p=s.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:f.map(g=>g.url)}),m=await Fv({fragementLength:M("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:g=>(_.debug("[".concat(i.clientId,"] Connect to backup choose_server:"),g.url),OH(g,i,a,o)),allFailedhandler:g=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:g},p),g[0]},promisesCollector:c});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},p),m};try{return l=await Vg([u(),h()]),c.length&&c.forEach(f=>f.cancel&&typeof f.cancel=="function"&&f.cancel()),l}catch(f){throw f[0]}}(e,t,r,n)}}async function PH(e,t,r,n,i){let a=e.cloudProxyServer;if(a==="disabled"){if(e.useLocalAccessPoint)return await fD(e,t,r,i);if(M("JOIN_WITH_FALLBACK_MEDIA_PROXY")){let{gatewayInfo:f,proxyInfo:p}=await LH(e,t,r,i);if(e.turnServer&&e.turnServer.mode!=="auto")return{gatewayInfo:f};let m=p.map(g=>({turnServerURL:g.address,tcpport:g.tcpport||Zn.tcpport,udpport:g.udpport||Zn.udpport,username:g.username||Zn.username,password:g.password||Zn.password,forceturn:!1,security:!0}));if(i.useP2P){var o;let g=(o=e.uid)!==null&&o!==void 0?o:f.uid,y="glb:".concat(g.toString()),v=await XP(y),b=p.map(E=>({turnServerURL:E.address,tcpport:E.tcpport||Zn.tcpport,udpport:E.udpport||Zn.udpport,username:y,password:v,forceturn:!1,security:!0}));m.push(...b)}return e.turnServer={mode:"manual",servers:m},{gatewayInfo:f}}return await fD(e,t,r,i)}let{proxyInfo:s,gatewayInfo:l}=await LH(e,t,r,i),c={gatewayInfo:l},u=s.map(f=>({turnServerURL:f.address,tcpport:a==="proxy3"?void 0:f.tcpport?f.tcpport:Zn.tcpport,udpport:a==="proxy4"?void 0:f.udpport?f.udpport:Zn.udpport,username:f.username||Zn.username,password:f.password||Zn.password,forceturn:a!=="proxy4",security:a==="proxy5"}));if(i.useP2P){var h;let f=(h=e.uid)!==null&&h!==void 0?h:l.uid,p="glb:".concat(f.toString()),m=await XP(p),g=s.map(y=>({turnServerURL:y.address,tcpport:a==="proxy3"?void 0:y.tcpport||Zn.tcpport,udpport:a==="proxy4"?void 0:y.udpport||Zn.udpport,username:p,password:m,forceturn:a!=="proxy4",security:a==="proxy5"}));u.push(...g)}return e.turnServer={mode:"manual",servers:u},_.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(a)),c}async function Nie(e,t,r,n,i){let a=M("ACCOUNT_REGISTER").slice(0,M("AJAX_REQUEST_CONCURRENT")),o=[];o=t.proxyServer?a.map(l=>"https://".concat(t.proxyServer,"/ap/?url=").concat(l+"/api/v1")):a.map(l=>"https://".concat(l,"/api/v1"));let s=i==null?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:o});try{let l=await async function(c,u,h,f,p){let m=Date.now(),g={sid:h.sid,opid:10,appid:h.appId,string_uid:u},y=c[0],v=await Cl(()=>xl(y+"".concat(y.indexOf("?")===-1?"?":"&","action=stringuid"),{data:g,cancelToken:f,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(b,E)=>{if(b.code===0){if(b.uid<=0||b.uid>=Math.pow(2,32))throw _.error("Invalid Uint Uid ".concat(u," => ").concat(b.uid),b),xe.reqUserAccount(g.sid,{lts:m,success:!1,serverAddr:y,stringUid:g.string_uid,uid:b.uid,errorCode:k.INVALID_UINT_UID_FROM_STRING_UID,extend:g}),new Y(k.INVALID_UINT_UID_FROM_STRING_UID);return xe.reqUserAccount(g.sid,{lts:m,success:!0,serverAddr:y,stringUid:g.string_uid,uid:b.uid,errorCode:null,extend:g}),!1}let S=Xm(b.code);return S.retry&&(y=c[(E+1)%c.length]),xe.reqUserAccount(g.sid,{lts:m,success:!1,serverAddr:y,stringUid:g.string_uid,uid:b.uid,errorCode:S.desc,extend:g}),S.retry},(b,E)=>b.code!==k.OPERATION_ABORTED&&(xe.reqUserAccount(g.sid,{lts:m,success:!1,serverAddr:y,stringUid:g.string_uid,uid:null,errorCode:b.code,extend:g}),y=c[(E+1)%c.length],!0),p);if(v.code!==0){let b=Xm(v.code);throw new Y(k.UNEXPECTED_RESPONSE,b.desc)}return v}(o,e,t,r,n);return i==null||i.recordJoinChannelService({status:"success",endTs:Date.now()},s),l.uid}catch(l){throw i==null||i.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[l]},s),l}}async function eHe(e,t,r){let n=M("ACCOUNT_REGISTER"),i=[];i=t.proxyServer?n.map(a=>"https://".concat(t.proxyServer,"/ap/?url=").concat(a+"/api/v1")):n.map(a=>"https://".concat(a,"/api/v1"));try{return await Iie({referenceList:i,asyncMapHandler:a=>async function(o,s,l,c){let u=Date.now(),h={sid:l.sid,opid:10,appid:l.appId,string_uid:s};try{let f=await xl(o+"".concat(o.indexOf("?")===-1?"?":"&","action=stringuid"),{data:h,cancelToken:c,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(f.code!==0){let p=Xm(f.code);throw new Y(k.UNEXPECTED_RESPONSE,"preload sua error:".concat(p.desc),p)}if(f.uid<=0||f.uid>=Math.pow(2,32))throw new Y(k.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:u,url:o,req:h,uid:f.uid,elapse:Date.now()-u}}catch(f){throw f}}(a,e,t,r),closeFn:a=>a.code===k.OPERATION_ABORTED||a.code===k.UNEXPECTED_RESPONSE&&!a.data.retry})}catch(a){throw a}}async function tHe(e,t,r){let n=M("CDS_AP").slice(0,M("AJAX_REQUEST_CONCURRENT")).map(l=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(l+"/api/v1"):"https://".concat(l,"/api/v1?action=config")),i=n.map(l=>function(c,u,h,f){let p=Ct(),m={flag:64,cipher_method:0,features:{device:p.name,system:p.os,system_general:navigator.userAgent,vendor:u.appId,version:$o,cname:u.cname,sid:u.sid,session_id:u.sid,detail:"",proxyServer:u.proxyServer}};return Cl(()=>xl(c,{data:m,timeout:1e3,cancelToken:h,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,g=>g.code!==k.OPERATION_ABORTED,f)}(l,e,t,r)),a=null,o=null,s={};try{a=await Vg(i)}catch(l){if(l.code===k.OPERATION_ABORTED)throw l;o=l}if(i.forEach(l=>l.cancel()),xe.reportApiInvoke(e.sid,{name:sn.REQUEST_CONFIG_DISTRIBUTE,options:{error:o,res:a}}).onSuccess(),a&&a.test_tags)try{s=function(l){if(!l.test_tags)return{};let c=l.test_tags,u=Object.keys(c),h={};return u.forEach(f=>{var p;let m=Ui(p=f.slice(4)).call(p),g=JSON.parse(c[f])[1];h[m]=g}),h}(a)}catch{}return s}async function DH(e,t){let r=M("WEBCS_DOMAIN").concat(M("WEBCS_DOMAIN_BACKUP_LIST")).map(n=>({url:"https://".concat(n,"/api/v2/transpond/webrtc?v=2"),areaCode:Uv(),serviceIds:[Wr.CHOOSE_SERVER,Wr.CLOUD_PROXY_FALLBACK]}));try{return await Iie({referenceList:r,asyncMapHandler:n=>async function(i,a,o){let s,{url:l,areaCode:c,serviceIds:u}=i,h=Date.now(),[f,p]=VM(a,c,u),m=Kr.networkState;try{m&&Kr.networkState===Va.OFFLINE&&Kr.onlineWaiter&&await ye.race([Kr.onlineWaiter,zn(Zr.maxRetryTimeout)]),m=Kr.networkState;let{data:g,headers:y}=await xl(l,{data:f,cancelToken:o,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);s=y.http3==="1"?1:-1,(E=>{let S=[];if(E.response_body.forEach(I=>{let N=I.buffer.code;if(I.uri===23&&N===0&&!I.buffer.edges_services)if(I.buffer.flag===4194310)I.buffer.edges_services=[];else{let L={error:new Y(k.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:E.detail[502]}),flag:I.buffer.flag};S.push(L)}if(N!==0){let L=Xm(N),j={error:new Y(k.CAN_NOT_GET_GATEWAY_SERVER,L.desc,{desc:L.desc,retry:L.retry,csIp:E.detail[502]}),flag:I.buffer.flag};I.buffer.flag===4194310?_.warning(j.error.toString()):S.push(j)}}),S.length)throw new Y(k.CAN_NOT_GET_GATEWAY_SERVER,S.map(I=>"flag: ".concat(I.flag,", message: ").concat(I.error.message)).join(" | "),{retry:!!S.find(I=>I.error.data.retry),csIp:E.detail[502],desc:[...new Set(S.map(I=>{var N;return I==null||(N=I.error)===null||N===void 0||(N=N.data)===null||N===void 0?void 0:N.desc}).filter(I=>!!I))]})})(g);let v=jv(g,Wr.CHOOSE_SERVER),b=jv(g,Wr.CLOUD_PROXY_FALLBACK);return FM(v),{gatewayInfo:RM(v,l),proxyInfo:b,opid:p,requestTime:h,url:l,isHttp3:s,elapse:Date.now()-h}}catch(g){throw g}}(n,e,t),closeFn:n=>n.code===k.OPERATION_ABORTED||n.code===k.CAN_NOT_GET_GATEWAY_SERVER&&!n.data.retry})}catch(n){throw n}}async function LH(e,t,r,n){let i=M("PROXY_SERVER_TYPE3"),a=(p,m,g)=>{let y=g||i;return Array.isArray(y)&&(y=m%2==0?i[1]:i[0]),"https://".concat(y,"/ap/?url=").concat(p)},o=null,s=[],l=async()=>{let p=M("WEBCS_DOMAIN").slice(0,M("AJAX_REQUEST_CONCURRENT")).map((y,v)=>{let b;return b=e.cloudProxyServer==="disabled"&&e.proxyServer?a("".concat(y,"/api/v2/transpond/webrtc?v=2"),v,e.proxyServer):e.cloudProxyServer==="disabled"||e.cloudProxyServer==="fallback"?"https://".concat(y,"/api/v2/transpond/webrtc?v=2"):a("".concat(y,"/api/v2/transpond/webrtc?v=2"),v),{url:b,areaCode:Uv(),serviceIds:[Wr.CHOOSE_SERVER,e.cloudProxyServer==="proxy5"?Wr.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?Wr.CLOUD_PROXY:Wr.CLOUD_PROXY_FALLBACK]}}),m=n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:p.map(y=>y.url)}),g=await Fv({fragementLength:M("FRAGEMENT_LENGTH"),referenceList:p,asyncMapHandler:y=>(_.debug("[".concat(e.clientId,"] Connect to choose_server:"),y.url),kH(y,e,t,r)),allFailedhandler:y=>{throw n.recordJoinChannelService({endTs:Date.now(),status:"error",errors:y},m),y[0]},promisesCollector:s});return n.recordJoinChannelService({endTs:Date.now(),status:"success"},m),g},c=async()=>{if(await zn(1e3),o!==null)return o;let p=M("WEBCS_DOMAIN_BACKUP_LIST").map((y,v)=>{let b;return b=e.cloudProxyServer==="disabled"&&e.proxyServer?a("".concat(y,"/api/v2/transpond/webrtc?v=2"),v,e.proxyServer):e.cloudProxyServer==="disabled"||e.cloudProxyServer==="fallback"?"https://".concat(y,"/api/v2/transpond/webrtc?v=2"):a("".concat(y,"/api/v2/transpond/webrtc?v=2"),v),{url:b,areaCode:Uv(),serviceIds:[Wr.CHOOSE_SERVER,e.cloudProxyServer==="proxy5"?Wr.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?Wr.CLOUD_PROXY:Wr.CLOUD_PROXY_FALLBACK]}}),m=n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:p.map(y=>y.url)}),g=await Fv({fragementLength:M("FRAGEMENT_LENGTH"),referenceList:p,asyncMapHandler:y=>(_.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),y.url),kH(y,e,t,r)),allFailedhandler:y=>{throw n.recordJoinChannelService({endTs:Date.now(),status:"error",errors:y},m),y[0]},promisesCollector:s});return n.recordJoinChannelService({endTs:Date.now(),status:"success"},m),g},u,h,f;try{({gatewayInfo:u,proxyInfo:h,url:f}=await Vg([l(),c()]))}catch(p){throw p[0]}if(s.length&&s.forEach(p=>p.cancel&&typeof p.cancel=="function"&&p.cancel()),!u||!h)throw new Y(k.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=f,e.cloudProxyServer!=="disabled"&&Array.isArray(i)&&f){let p=/^https?:\/\/(.+?)(\/.*)?$/.exec(f)[1];be(i).call(i,p)&&(e.proxyServer=p,_.setProxyServer(p),xe.setProxyServer(p))}return o={gatewayInfo:u,proxyInfo:await Une(h,u.uid)},o}async function rHe(e,t,r){let n=M("UAP_AP").slice(0,M("AJAX_REQUEST_CONCURRENT")).map(a=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(a+"/api/v1?action=uap"):"https://".concat(a,"/api/v1?action=uap")),i=n.map(a=>function(o,s,l,c){let u={command:"convergeAllocateEdge",sid:s.sid,appId:s.appId,token:s.token,ts:Date.now(),version:$o,cname:s.cname,uid:s.uid.toString(),requestId:LA,seq:LA};LA+=1;let h={service_name:"tele_channel",json_body:JSON.stringify(u)};return Cl(async()=>{let f=await xl(o,{data:h,cancelToken:l,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(f.code!==0){let m=new Y(k.UNEXPECTED_RESPONSE,"cross channel ap error, code"+f.code,{retry:!0});throw _.error(m.toString()),m}let p=JSON.parse(f.json_body);if(p.code!==200){let m=new Y(k.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(p.code,", reason: ").concat(p.reason));throw _.error(m.toString()),m}if(!p.servers||p.servers.length===0){let m=new Y(k.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw _.error(m.toString()),m}return{vid:p.vid,workerToken:p.workerToken,addressList:(M("CHANNEL_MEDIA_RELAY_SERVERS")||p.servers).map(m=>"wss://".concat(m.address.replace(/\./g,"-"),".").concat(M("WORKER_DOMAIN"),":").concat(m.wss))}},void 0,f=>!!(f.code!==k.OPERATION_ABORTED&&f.code!==k.UNEXPECTED_RESPONSE||f.data&&f.data.retry),c)}(a,e,t,r));try{let a=await Vg(i);return i.forEach(o=>o.cancel()),a}catch(a){throw a[0]}}async function nHe(e,t,r){let n=null,i=[],a=async o=>{let s=M(o?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(l=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(l+"/api/v2/transpond/webrtc?v=2"):"https://".concat(l,"/api/v2/transpond/webrtc?v=2"));return o&&(await zn(1e3),n!==null)?n:await Fv({fragementLength:M("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:l=>(_.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(o?"backup":""," choose_server:"),l),function(c,u,h,f){let[p]=Z7e(u,[Wr.CHOOSE_SERVER]),m=Kr.networkState;return Cl(async()=>{m&&Kr.networkState===Va.OFFLINE&&Kr.onlineWaiter&&await ye.race([Kr.onlineWaiter,zn(f&&f.maxRetryTimeout||Zr.maxRetryTimeout)]),m=Kr.networkState;let g=await xl(c,{data:p,cancelToken:h,headers:{"Content-Type":"multipart/form-data;"}},!0);return Q7e(g,c)},()=>!1,g=>g.code!==k.OPERATION_ABORTED&&(g.code===k.UPDATE_TICKET_FAILED?g.data.retry:(_.warning("[".concat(u.clientId,"] update ticket network error, retry"),g),!0)),f)}(l,e,t,r)),allFailedhandler:l=>{throw l[0]},promisesCollector:i})};try{return n=await Vg([a(!1),a(!0)]),i.length&&i.forEach(o=>o.cancel&&typeof o.cancel=="function"&&o.cancel()),n}catch(o){throw o[0]}}function jH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function MH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var iHe=class extends Tr{get isSuccess(){return!!this.configs}constructor(){super(),R(this,"configs",void 0),R(this,"joinInfo",void 0),R(this,"cancelToken",void 0),R(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),R(this,"interval",void 0),R(this,"mutex",new gi("config-distribute")),R(this,"mutableParamsRead",!1)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),M("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},M("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,xe.reportApiInvoke(null,{options:void 0,name:sn.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Nr.TRACER}).onSuccess(JSON.stringify(ed))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void _.debug("[config-distribute] get config distribute interrupted have no joininfo");let e,t=await this.mutex.lock();try{e=await tHe(this.joinInfo,this.cancelToken,this.retryConfig),_.debug("[config-distribute] get config distribute",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(r){let n=new Y(k.NETWORK_RESPONSE_ERROR,r);_.warning("[config-distribute] ".concat(n.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&t.uplink.max_bitrate!==void 0&&t.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(tD.UPDATE_BITRATE_LIMIT,e):this.emit(tD.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&MH({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;let r=Bb(t=Object.keys(e).filter(i=>/^webrtc_ng_global_parameter/.test(i))).call(t);for(let i=0;i<r.length;i++)for(let a=r.length-1;a>i;a--){let o=r[a];if(typeof e[o].__priority=="number"){let s=e[o].__priority,l=r[a-1];if(typeof e[l].__priority=="number"){if(!(s>e[l].__priority))continue;{let c=o;r[a]=r[a-1],r[a-1]=c}}else{let c=o;r[a]=r[a-1],r[a-1]=c}}}let n={};r.forEach(i=>{let a=e[i],o=a.__expires;Object.keys(a).forEach(s=>{s==="__priority"||s==="__expires"||Object.prototype.hasOwnProperty.call(n,s)||(n[s]=MH({value:a[s]},o&&{expires:o}))})});try{(function(o){try{let s=Date.now();Object.keys(o).forEach(l=>{switch(l){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":case"ENABLE_AG_ADAPTATION":case"FORCE_AG_HIGH_FRAMERATE":case"FORCE_SUPPORT_AG_ADAPTATION":case"ENCODER_CONFIG_LIMIT":case"CAMERA_CAPTURE_CONFIG":case"ENABLE_PRELOAD":if(Object.prototype.hasOwnProperty.call(Vr,l)){let{value:c,expires:u}=o[l];if(u&&u<=s)return;ed[l]=c,Vr[l]=c,_.debug("Update global parameters from config distribute",l,c)}}})}catch(s){_.error("Error update config immediately: ".concat(o),s.message)}})(n);let i=JSON.stringify(n),a=window.btoa(i);window.localStorage.setItem("websdk_ng_global_parameter",a),_.debug("Caching global parameters ".concat(i))}catch(i){_.error("Error caching global parameters:",i.message)}}},aHe=class extends Tr{constructor(){super(...arguments),R(this,"resultStorage",new Map)}setLocalAudioStats(e,t,r){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(r,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(r,t))}setLocalVideoStats(e,t,r){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(r,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(r,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(r))}setRemoteAudioStats(e,t){let r=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",r,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){let r=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",r,this.checkVideoDecode(t))}record(e,t,r){if(M("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});let n=this.resultStorage.get(e);if(n&&(n.result.push(r),n.result.length>=5)){var i;let a=be(i=n.result).call(i,!0);n.isPrevNormal&&!a&&this.emit("exception",UH[e],e,t),!n.isPrevNormal&&a&&this.emit("exception",UH[e]+2e3,e+"_RECOVER",t),n.isPrevNormal=a,n.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&e.receiveLevel===0)}checkAudioInputLevel(e,t){return t instanceof _n&&!t.isActive||!!t.muted||e.sendVolumeLevel!==0}checkFramerateInput(e,t){let r=null;t._encoderConfig&&t._encoderConfig.frameRate&&(r=$a(t._encoderConfig.frameRate));let n=e.captureFrameRate;return!r||!n||!(r>10&&n<5||r<10&&r>=5&&n<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||e.sendBitrate!==0}checkSendAudioBitrate(e,t){return t instanceof _n&&!t.isActive||!!t.muted||e.sendBitrate!==0}checkVideoDecode(e){return e.receiveBitrate===0||e.decodeFrameRate!==0}},UH={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},fi=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){let r=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(r.length>0){let n=r[r.length-1];return Math.round(performance.now()-n.startTime)}return 0}measureFromPublishStart(e,t){let r=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(r.length>0){let n=r[r.length-1];return Math.round(performance.now()-n.startTime)}return 0}};function BM(e,t){this.v=e,this.k=t}function Nt(e){return new BM(e,0)}var oHe=kte,sHe=bc;ir({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var e=sHe.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var lHe=bc,cHe=Lg;ir({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=lHe.f(this),r=cHe(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}});var pD=$r(oHe),Aie=jg.f("asyncIterator"),uHe=$r(Aie);function Yy(e){var t,r;function n(a,o){try{var s=e[a](o),l=s.value,c=l instanceof BM;pD.resolve(c?l.v:l).then(function(u){if(c){var h=a==="return"?"return":"next";if(!l.k||u.done)return n(h,u);u=e[h](u).value}i(s.done?"return":"normal",u)},function(u){n("throw",u)})}catch(u){i("throw",u)}}function i(a,o){switch(a){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(a,o){return new pD(function(s,l){var c={key:a,arg:o,resolve:s,reject:l,next:null};r?r=r.next=c:(t=r=c,n(a,o))})},typeof e.return!="function"&&(this.return=void 0)}function ml(e){return function(){return new Yy(e.apply(this,arguments))}}Yy.prototype[typeof Wp=="function"&&uHe||"@@asyncIterator"]=function(){return this},Yy.prototype.next=function(e){return this._invoke("next",e)},Yy.prototype.throw=function(e){return this._invoke("throw",e)},Yy.prototype.return=function(e){return this._invoke("return",e)};var FH=$r(Tl.Object.getOwnPropertySymbols),dHe=ir,hHe=Vj.indexOf,fHe=sx,mD=Tv([].indexOf),VH=!!mD&&1/mD([1],1,-0)<0;dHe({target:"Array",proto:!0,forced:VH||!fHe("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return VH?mD(this,e,t)||0:hHe(this,e,t)}});var pHe=Ws("Array").indexOf,mHe=na,gHe=pHe,jA=Array.prototype,yHe=function(e){var t=e.indexOf;return e===jA||mHe(jA,e)&&t===jA.indexOf?gHe:t},BH=$r(yHe);function vHe(e,t){if(e==null)return{};var r,n,i=function(o,s){if(o==null)return{};var l,c,u={},h=kne(o);for(c=0;c<h.length;c++)l=h[c],BH(s).call(s,l)>=0||(u[l]=o[l]);return u}(e,t);if(FH){var a=FH(e);for(n=0;n<a.length;n++)r=a[n],BH(t).call(t,r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Os(e){if(Array.isArray(e))return e.map(r=>r);if(!$H(e))return e;let t={};for(let r in e){let n=e[r];$H(n)||Array.isArray(n)?t[r]=Os(n):t[r]=n}return t}function $H(e){return!(typeof e!="object"||Array.isArray(e)||!e)}var MA=class{constructor(e){R(this,"input",[]),R(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}},dc={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},Vv={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:dc,remoteCandidate:dc}},Oie={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0},kie={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},Pie={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},Die={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function HH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var $M=class{constructor(e,t){R(this,"onFirstVideoReceived",void 0),R(this,"onFirstVideoDecoded",void 0),R(this,"onFirstAudioReceived",void 0),R(this,"onFirstVideoDecodedTimeout",void 0),R(this,"onFirstAudioDecoded",void 0),R(this,"onSelectedLocalCandidateChanged",void 0),R(this,"onSelectedRemoteCandidateChanged",void 0),R(this,"videoIsReady",!1),R(this,"videoIsReady2",{}),R(this,"pc",void 0),R(this,"options",void 0),R(this,"intervalTimer",void 0),R(this,"stats",Os(Vv)),R(this,"isFirstVideoReceived",{}),R(this,"isFirstVideoDecoded",{}),R(this,"isFirstAudioReceived",{}),R(this,"isFirstAudioDecoded",{}),R(this,"isFirstVideoDecodedTimeout",{}),R(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new ye(e=>{e({local:zH({},dc),remote:zH({},dc)})})}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);let t=this.lossRateWindowStats.length,r=["videoSend","audioSend","videoRecv","audioRecv"],n=0,i=0,a=0,o=0;for(let s of r)e[s].forEach((l,c)=>{if(!this.lossRateWindowStats[t-1][s][c]||!this.lossRateWindowStats[0][s][c])return;let u=this.lossRateWindowStats[t-1][s][c].packets-this.lossRateWindowStats[0][s][c].packets,h=this.lossRateWindowStats[t-1][s][c].packetsLost-this.lossRateWindowStats[0][s][c].packetsLost;s==="videoSend"||s==="audioSend"?(n+=u,a+=h):(i+=u,o+=h),Number.isNaN(u)||Number.isNaN(u)?l.packetLostRate=0:l.packetLostRate=u<=0||h<=0?0:h/(u+h)});e.sendPacketLossRate=n<=0||a<=0?0:a/(n+a),e.recvPacketLossRate=i<=0||o<=0?0:o/(i+o)}};function GH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bHe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var wHe=class extends $M{constructor(){super(...arguments),R(this,"_stats",Vv),R(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){let e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=Os(Vv);let r=t.filter(i=>i.type==="ssrc");this.processSSRCStats(r);let n=t.find(i=>i.type==="VideoBwe");n&&this.processBandwidthStats(n),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach(t=>{var r;let n=be(r=t.id).call(r,"send");switch("".concat(t.mediaType,"_").concat(n?"send":"recv")){case"video_send":{let i=Os(kie);i.codec=t.googCodecName,i.adaptionChangeReason="none",t.googCpuLimitedResolution&&(i.adaptionChangeReason="cpu"),t.googBandwidthLimitedResolution&&(i.adaptionChangeReason="bandwidth"),i.avgEncodeMs=Number(t.googAvgEncodeMs),i.inputFrame={width:Number(t.googFrameWidthInput)||Number(t.googFrameWidthSent),height:Number(t.googFrameHeightInput)||Number(t.googFrameHeightSent),frameRate:Number(t.googFrameRateInput)},i.sentFrame={width:Number(t.googFrameWidthSent),height:Number(t.googFrameHeightSent),frameRate:Number(t.googFrameRateInput)},i.firsCount=Number(t.googFirReceived),i.nacksCount=Number(t.googNacksReceived),i.plisCount=Number(t.googPlisReceived),i.frameCount=Number(t.framesEncoded),i.bytes=Number(t.bytesSent),i.packets=Number(t.packetsSent),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.rttMs=Number(t.googRtt||0),this._stats.videoSend.push(i),this._stats.rtt=i.rttMs;break}case"video_recv":{let i=Os(Oie),a=this.lastDecodeVideoReceiverStats.get(Number(t.ssrc));if(i.codec=t.googCodecName,i.targetDelayMs=Number(t.googTargetDelayMs),i.renderDelayMs=Number(t.googRenderDelayMs),i.currentDelayMs=Number(t.googCurrentDelayMs),i.minPlayoutDelayMs=Number(t.googMinPlayoutDelayMs),i.decodeMs=Number(t.googDecodeMs),i.maxDecodeMs=Number(t.googMaxDecodeMs),i.receivedFrame={width:Number(t.googFrameWidthReceived),height:Number(t.googFrameHeightReceived),frameRate:Number(t.googFrameRateReceived)},i.decodedFrame={width:Number(t.googFrameWidthReceived),height:Number(t.googFrameHeightReceived),frameRate:Number(t.googFrameRateDecoded)},i.decodeFrameRate=Number(t.googFrameRateDecoded),i.outputFrame={width:Number(t.googFrameWidthReceived),height:Number(t.googFrameHeightReceived),frameRate:Number(t.googFrameRateOutput)},i.jitterBufferMs=Number(t.googJitterBufferMs),i.firsCount=Number(t.googFirsSent),i.nacksCount=Number(t.googNacksSent),i.plisCount=Number(t.googPlisSent),i.framesDecodeCount=Number(t.framesDecoded),i.bytes=Number(t.bytesReceived),i.packets=Number(t.packetsReceived),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.packets>0&&!this.isFirstVideoReceived[i.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(i.ssrc),this.isFirstVideoReceived[i.ssrc]=!0),i.framesDecodeCount>0&&!this.isFirstVideoDecoded[i.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(i.ssrc,i.decodedFrame.width,i.decodedFrame.height),this.isFirstVideoDecoded[i.ssrc]=!0),a){let o=a.stats,s=Date.now()-a.lts;i.framesDecodeFreezeTime=o.framesDecodeFreezeTime,i.framesDecodeInterval=o.framesDecodeInterval,i.framesDecodeCount>o.framesDecodeCount&&this.isFirstVideoDecoded[i.ssrc]?(a.lts=Date.now(),i.framesDecodeInterval=s,i.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(t.ssrc,10))?i.framesDecodeFreezeTime+=i.framesDecodeInterval:this.setVideoIsReady2(parseInt(t.ssrc,10),!0))):i.framesDecodeCount<a.stats.framesDecodeCount&&(i.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(i.ssrc,{stats:bHe({},i),lts:Date.now()}),this._stats.videoRecv.push(i);break}case"audio_recv":{let i=Os(Die);i.codec=t.googCodecName,i.outputLevel=Math.abs(Number(t.audioOutputLevel))/32767,i.decodingCNG=Number(t.googDecodingCNG),i.decodingCTN=Number(t.googDecodingCTN),i.decodingCTSG=Number(t.googDecodingCTSG),i.decodingNormal=Number(t.googDecodingNormal),i.decodingPLC=Number(t.googDecodingPLC),i.decodingPLCCNG=Number(t.googDecodingPLCCNG),i.expandRate=Number(t.googExpandRate),i.accelerateRate=Number(t.googAccelerateRate),i.preemptiveExpandRate=Number(t.googPreemptiveExpandRate),i.secondaryDecodedRate=Number(t.googSecondaryDecodedRate),i.speechExpandRate=Number(t.googSpeechExpandRate),i.preferredJitterBufferMs=Number(t.googPreferredJitterBufferMs),i.jitterBufferMs=Number(t.googJitterBufferMs),i.jitterMs=Number(t.googJitterReceived),i.bytes=Number(t.bytesReceived),i.packets=Number(t.packetsReceived),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.receivedFrames=Number(t.googDecodingCTN)||Number(t.packetsReceived),i.droppedFrames=Number(t.googDecodingPLC)+Number(t.googDecodingPLCCNG)||Number(t.packetsLost),i.receivedFrames>0&&!this.isFirstAudioReceived[i.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(i.ssrc),this.isFirstAudioReceived[i.ssrc]=!0),i.decodingNormal>0&&!this.isFirstAudioDecoded[i.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(i.ssrc),this.isFirstAudioDecoded[i.ssrc]=!0),this._stats.audioRecv.push(i);break}case"audio_send":{let i=Os(Pie);i.codec=t.googCodecName,i.inputLevel=Math.abs(Number(t.audioInputLevel))/32767,i.aecReturnLoss=Number(t.googEchoCancellationReturnLoss||0),i.aecReturnLossEnhancement=Number(t.googEchoCancellationReturnLossEnhancement||0),i.residualEchoLikelihood=Number(t.googResidualEchoLikelihood||0),i.residualEchoLikelihoodRecentMax=Number(t.googResidualEchoLikelihoodRecentMax||0),i.bytes=Number(t.bytesSent),i.packets=Number(t.packetsSent),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.rttMs=Number(t.googRtt||0),this._stats.rtt=i.rttMs,this._stats.audioSend.push(i);break}}})}_getStats(){return new ye((e,t)=>{this.pc.getStats(e,t)})}statsResponsesToObjects(e){let t=[];return e.result().forEach(r=>{let n={id:r.id,timestamp:r.timestamp.valueOf().toString(),type:r.type};r.names().forEach(i=>{n[i]=r.stat(i)}),t.push(n)}),t}};function WH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function th(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var KH=class extends $M{constructor(){super(...arguments),R(this,"_stats",Vv),R(this,"report",void 0),R(this,"lastDecodeVideoReceiverStats",new Map),R(this,"lastVideoFramesRecv",new Map),R(this,"lastVideoFramesSent",new Map),R(this,"lastVideoFramesDecode",new Map),R(this,"lastVideoFramesOutput",new Map),R(this,"lastVideoJBDelay",new Map),R(this,"lastAudioJBDelay",new Map),R(this,"mediaBytesSent",new Map),R(this,"mediaBytesRetransmit",new Map),R(this,"mediaBytesTargetEncode",new Map),R(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=Os(Vv),this.report.forEach(e=>{switch(e.type){case qa.OUTBOUND:case qa.INBOUND:{let t=e.mediaType||e.kind,r=!t&&"frameWidth"in e,n=!t&&!("frameWidth"in e);e.type===qa.OUTBOUND?t==="audio"||n?this.processAudioOutboundStats(e):(t==="video"||r)&&this.processVideoOutboundStats(e):e.type===qa.INBOUND&&(t==="audio"||n?this.processAudioInboundStats(e):(t==="video"||r)&&this.processVideoInboundStats(e));break}case qa.TRANSPORT:{let t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case qa.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){let e=await this.pc.getStats(),t={local:th({},dc),remote:th({},dc)};return e.forEach(r=>{let n;if(r.type===qa.TRANSPORT&&(n=e.get(r.selectedCandidatePairId)),r.type===qa.CANDIDATE_PAIR&&r.selected&&(n=r),n){let i=(a,o)=>{a.type=o.type,a.id=o.id,o.address&&(a.address=o.address),o.candidateType&&(a.candidateType=o.candidateType),o.port&&(a.port=o.port),o.priority&&(a.priority=o.priority),o.protocol&&(a.protocol=o.protocol),o.relayProtocol&&(a.relayProtocol=o.relayProtocol)};if(n.localCandidateId){let a=e.get(n.localCandidateId);a&&i(t.local,a)}if(n.remoteCandidateId){let a=e.get(n.remoteCandidateId);a&&i(t.remote,a)}}}),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach(t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}),this._stats.audioSend.forEach(t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){let t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){let t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===qa.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===qa.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===qa.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(th({},t),th({},this.stats.selectedCandidatePair.localCandidate)),e.type===qa.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(th({},t),th({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find(r=>r.ssrc===e.ssrc);t||(t=Os(Die),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.packetsDiscarded=e.packetsDiscarded,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),typeof e.concealedSamples=="number"&&(t.concealedSamples=e.concealedSamples)}processVideoInboundStats(e){let t=this._stats.videoRecv.find(o=>o.ssrc===e.ssrc);t||(t=Os(Oie),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.framesDroppedCount=e.framesDropped,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay,t.totalFreezesDuration=e.totalFreezesDuration;let r=this.lastDecodeVideoReceiverStats.get(t.ssrc),n=this.lastVideoFramesDecode.get(t.ssrc),i=this.lastVideoFramesOutput.get(t.ssrc),a=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){let o=t.decodedFrame?t.decodedFrame.width:0,s=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,o,s),this.isFirstVideoDecoded[t.ssrc]=!0}if(r){let o=r.stats,s=a-r.lts;t.framesDecodeFreezeTime=o.framesDecodeFreezeTime,t.framesDecodeInterval=o.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&s>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>o.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(r.lts=Date.now(),t.framesDecodeInterval=s,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<o.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(r.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-r.qpSum)/(e.framesDecoded-r.stats.framesDecodeCount))}n&&a-n.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-n.count)/((a-n.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:a,rate:t.decodeFrameRate})):n?t.decodeFrameRate=n.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:a,rate:0}),t.framesDroppedCount&&e.framesReceived&&(i&&a-i.lts>=800?(t.outputFrameRate=Math.round((e.framesReceived-t.framesDroppedCount-i.count)/((a-i.lts)/1e3)),this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:a,rate:Math.max(t.outputFrameRate,0)})):i?t.outputFrameRate=i.rate:this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:a,rate:0})),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:th({},t),lts:r?r.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find(n=>n.ssrc===e.ssrc);t||(t=Os(kie),this._stats.videoSend.push(t));let r=this.mediaBytesSent.get(e.ssrc);if(r)r.add(e.bytesSent);else{let n=new MA(10);n.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,n)}if(e.retransmittedBytesSent!==void 0){let n=this.mediaBytesRetransmit.get(e.ssrc);if(n)n.add(e.retransmittedBytesSent);else{let i=new MA(10);i.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,i)}}if(e.totalEncodedBytesTarget){let n=this.mediaBytesTargetEncode.get(e.ssrc);if(n)n.add(e.totalEncodedBytesTarget);else{let i=new MA(10);i.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,i)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){let n=this.lastEncoderMs.get(e.ssrc);if(!n||n.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{let i=e.framesEncoded-n.lastFrameCount,a=e.totalEncodeTime-n.lastEncoderTime;t.avgEncodeMs=1e3*a/i}}if(e.framesEncoded&&e.qpSum){let n=this.lastEncoderMs.get(e.ssrc);!n||n.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-n.lastQpSum)/(e.framesEncoded-n.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{let n=this.findRemoteStatsId(e.ssrc,qa.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find(r=>r.ssrc===e.ssrc);if(t||(t=Os(Pie),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{let r=this.findRemoteStatsId(e.ssrc,qa.REMOTE_INBOUND);r&&this.processRemoteInboundStats(r,t)}}findRemoteStatsId(e,t){var r;let n=Array.from(Qc(r=this.report).call(r)).find(i=>i.type===t&&i.ssrc===e);return n?n.id:null}processVideoMediaSource(e,t){let r=this.report.get(e);r&&r.width&&r.height&&r.framesPerSecond&&(t.inputFrame={width:r.width,height:r.height,frameRate:r.framesPerSecond})}processAudioMediaSource(e,t){let r=this.report.get(e);r&&(t.inputLevel=r.audioLevel)}processVideoTrackSenderStats(e,t,r){var n,i,a,o;let s=t?this.report.get(t):void 0,l=(n=s==null?void 0:s.framesSent)!==null&&n!==void 0?n:e.framesSent;if(typeof l!="number")return;let c=(i=s==null?void 0:s.frameWidth)!==null&&i!==void 0?i:e.frameWidth,u=(a=s==null?void 0:s.frameHeight)!==null&&a!==void 0?a:e.frameHeight,h=(o=s==null?void 0:s.framesPerSecond)!==null&&o!==void 0?o:e.framesPerSecond;if(typeof c=="number"&&typeof u=="number"||(c=0,u=0),h==null){let f=Date.now(),p=this.lastVideoFramesSent.get(r.ssrc);p&&f-p.lts>=800?(h=Math.round((l-p.count)/((f-p.lts)/1e3)),this.lastVideoFramesSent.set(r.ssrc,{count:l,lts:f,rate:h})):p?h=p.rate:this.lastVideoFramesSent.set(r.ssrc,{count:l,lts:f,rate:0})}r.sentFrame={width:c,height:u,frameRate:Math.max(0,h)}}processVideoTrackReceiverStats(e,t,r){var n,i,a,o,s;let l=t?this.report.get(t):void 0,c=(n=l==null?void 0:l.framesReceived)!==null&&n!==void 0?n:e.framesReceived,u=(i=l==null?void 0:l.frameWidth)!==null&&i!==void 0?i:e.frameWidth,h=(a=l==null?void 0:l.frameHeight)!==null&&a!==void 0?a:e.frameHeight,f=(o=l==null?void 0:l.jitterBufferDelay)!==null&&o!==void 0?o:e.jitterBufferDelay,p=(s=l==null?void 0:l.jitterBufferEmittedCount)!==null&&s!==void 0?s:e.jitterBufferEmittedCount;if(typeof c=="number"){let m=this.lastVideoFramesRecv.get(r.ssrc),g=Date.now();r.framesReceivedCount=c;let y=0;m&&g-m.lts>=800?(y=Math.round((c-m.count)/((g-m.lts)/1e3)),this.lastVideoFramesRecv.set(r.ssrc,{count:c,lts:g,rate:y})):m?y=m.rate:this.lastVideoFramesRecv.set(r.ssrc,{count:c,lts:g,rate:0}),r.receivedFrame={width:u||0,height:h||0,frameRate:y||0},r.decodedFrame={width:u||0,height:h||0,frameRate:r.decodeFrameRate||0},r.outputFrame={width:u||0,height:h||0,frameRate:r.outputFrameRate||r.decodeFrameRate||0}}if(f&&p){let m=this.lastVideoJBDelay.get(r.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0},g=m.jitterBufferMs,y=p-m.jitterBufferEmittedCount;y>0&&(g=1e3*(f-m.jitterBufferDelay)/y),r.jitterBufferMs=g,r.currentDelayMs=Math.round(g),this.lastVideoJBDelay.set(r.ssrc,{jitterBufferDelay:f,jitterBufferEmittedCount:p,jitterBufferMs:r.currentDelayMs})}}processAudioTrackSenderStats(e,t,r){var n,i,a,o;let s=t?this.report.get(t):void 0,l=(n=(i=s==null?void 0:s.echoReturnLoss)!==null&&i!==void 0?i:e.echoReturnLoss)!==null&&n!==void 0?n:0,c=(a=(o=s==null?void 0:s.echoReturnLossEnhancement)!==null&&o!==void 0?o:e.echoReturnLossEnhancement)!==null&&a!==void 0?a:0;r.aecReturnLoss=l,r.aecReturnLossEnhancement=c}processAudioTrackReceiverStats(e,t,r){var n,i,a,o,s,l,c;let u=t?this.report.get(t):void 0,h=(n=u==null?void 0:u.removedSamplesForAcceleration)!==null&&n!==void 0?n:e.removedSamplesForAcceleration,f=(i=u==null?void 0:u.totalSamplesReceived)!==null&&i!==void 0?i:e.totalSamplesReceived,p=(a=u==null?void 0:u.jitterBufferDelay)!==null&&a!==void 0?a:e.jitterBufferDelay,m=(o=u==null?void 0:u.jitterBufferEmittedCount)!==null&&o!==void 0?o:e.jitterBufferEmittedCount,g=(s=u==null?void 0:u.audioLevel)!==null&&s!==void 0?s:e==null?void 0:e.audioLevel,y=(l=u==null?void 0:u.totalSamplesDuration)!==null&&l!==void 0?l:e==null?void 0:e.totalSamplesDuration,v=(c=u==null?void 0:u.concealedSamples)!==null&&c!==void 0?c:e.concealedSamples;if(h&&f&&(r.accelerateRate=h/f),p&&m){let E=this.lastAudioJBDelay.get(r.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0},S=E.jitterBufferMs,I=m-E.jitterBufferEmittedCount;I>0&&(S=1e3*(p-E.jitterBufferDelay)/I),r.jitterBufferMs=Math.round(S),this.lastAudioJBDelay.set(r.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:m,jitterBufferMs:r.jitterBufferMs})}r.outputLevel=g;let b=1920;y&&f&&(b=f/y/50,r.receivedFrames=Math.round(f/b)),v&&(r.droppedFrames=Math.round(v/b))}processRemoteInboundStats(e,t){let r=this.report.get(e);r&&(t.packetsLost=r.packetsLost,r.roundTripTime&&(t.rttMs=1e3*r.roundTripTime),r.jitter&&(t.jitterMs=1e3*r.jitter),r.timestamp&&(t.timestamp=r.timestamp))}getCodecFromCodecStats(e){let t=this.report.get(e);if(!t)return"";let r=t.mimeType.match(/\/(.*)$/);return r&&r[1]?r[1]:""}updateSendBitrate(){let e=0,t=null,r=null;this.mediaBytesSent.forEach(i=>{e+=i.diffMean()}),this.mediaBytesRetransmit.forEach(i=>{t=t===null?i.diffMean():t+i.diffMean()}),this.mediaBytesTargetEncode.forEach(i=>{r=r===null?i.diffMean():r+i.diffMean()});let n=t!==null?e-t:e;this._stats.bitrate={actualEncoded:8*n/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},t!==null&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),r!==null&&(this._stats.bitrate.targetEncoded=8*r/(this.options.updateInterval/1e3))}},EHe=class extends $M{updateStats(){return ye.resolve()}};function HM(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4,a=function(){let o=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return o&&o[0]?Number(o[0].split("/")[1]):null}();return a?a<76?new wHe(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i}):new KH(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i}):function(o){if(!window.RTCStatsReport)return!1;let s=o.getStats();return!!(s instanceof ye||function(l){return!!l&&(typeof l=="object"||typeof l=="function")&&typeof l.then=="function"}(s))}(e)?new KH(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i}):new EHe(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i})}var qH=class{get localCapabilities(){return Gr(this._localCapabilities)}get rtpCapabilities(){return Gr(this._rtpCapabilities)}get candidates(){return Gr(this._candidates)}get iceParameters(){return Gr(this._iceParameters)}get dtlsParameters(){return Gr(this._dtlsParameters)}constructor(e){R(this,"sessionDesc",void 0),R(this,"_localCapabilities",void 0),R(this,"_rtpCapabilities",void 0),R(this,"_candidates",void 0),R(this,"_iceParameters",void 0),R(this,"_dtlsParameters",void 0),R(this,"setup",void 0),R(this,"currentMidIndex",void 0),R(this,"cname","o/i14u9pJrxRKAsu"),R(this,"firefoxSsrcMidMap",new Map),e=Gr(e);let{remoteIceParameters:t,remoteDtlsParameters:r,candidates:n,remoteRTPCapabilities:i,localCapabilities:a,direction:o,setup:s,videoCodec:l,audioCodec:c}=e,u;this.setup=s,u=o===Xi.RECEIVE_ONLY?$n.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`):$n.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`),this._rtpCapabilities=i,this._candidates=n,this._iceParameters=t,this._dtlsParameters=r,this._localCapabilities=a;let h=o===Xi.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,f=o===Xi.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,p=o===Xi.RECEIVE_ONLY?i.send.videoCodecs:N0(Ne.VIDEO,h,f,l),m=o===Xi.RECEIVE_ONLY?i.send.audioCodecs:N0(Ne.AUDIO,h,f,c);for(let g of u.mediaDescriptions)g.attributes.iceUfrag=t.iceUfrag,g.attributes.icePwd=t.icePwd,g.attributes.fingerprints=r.fingerprints,g.attributes.candidates=n,g.attributes.setup=this.setup,g.media.mediaType==="application"&&(g.attributes.sctpPort="5000"),g.media.mediaType==="video"&&(g.media.fmts=p.map(y=>y.payloadType.toString(10)),g.attributes.payloads=p,g.attributes.extmaps=h.videoExtensions),g.media.mediaType==="audio"&&(g.media.fmts=m.map(y=>y.payloadType.toString(10)),g.attributes.payloads=m,g.attributes.extmaps=h.audioExtensions,eg(g));this.sessionDesc=u,this.currentMidIndex=u.mediaDescriptions.length-1}toString(){return $n.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every(t=>this.hasMid(t)):this.sessionDesc.mediaDescriptions.some(t=>t.attributes.mid===e)}send(e,t,r,n,i){r=r.replace(/ /g,"-");let{ssrcs:a,ssrcGroups:o}=yh(t,this.cname,M("SYNC_GROUP")?r:void 0),s=this.findPreloadMediaDesc(a);if(s){if(Ar()&&this.firefoxSsrcMidMap.set(a[0].ssrcId,s.attributes.mid),i&&(i.twcc||i.remb)){let l=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[l]=this.mungSendMediaDesc(s,i),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{let l=this.findAvailableMediaIndex(e,a,n),c;return l===-1?(c=this.createOrRecycleSendMedia(e,a,o,"sendonly",n,i),this.updateBundleMids()):(c=Gr(this.sessionDesc.mediaDescriptions[l]),c.attributes.direction="sendonly",c.attributes.ssrcs=a,c.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[l]=this.mungSendMediaDesc(c,i)),Ar()&&this.firefoxSsrcMidMap.set(a[0].ssrcId,c.attributes.mid),{needExchangeSDP:!0,mid:c.attributes.mid}}}stopSending(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>r.attributes.mid&&e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach(r=>{r.attributes.ssrcs=[]}),this.updateBundleMids()}receive(e,t,r){let n=[];return e.forEach(i=>{let a=i._mediaStreamTrack.kind,o=this.findAvailableRecvMediaIndex(a),s,l=!1;o===-1?(l=!0,s=this.createOrRecycleRecvMedia(i,[],"recvonly",t,r),this.updateBundleMids()):(s=Gr(this.sessionDesc.mediaDescriptions[o]),s.attributes.direction="recvonly"),n.push({mid:s.attributes.mid,needCreateTransceiver:l})}),n}stopReceiving(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach(r=>{r.media.port="0",r.attributes.direction="inactive"}),this.updateBundleMids()}addRemoteCandidate(e){let{foundation:t,protocol:r,address:n,port:i,type:a,relatedAddress:o,relatedPort:s,priority:l}=new RTCIceCandidate(e),c={foundation:t??"",componentId:"1",transport:r??"",priority:l?l+"":"",connectionAddress:n??"",port:i?i+"":"",type:a?a+"":"",relAddr:o??"",relPort:s?s+"":"",extension:{}};this.candidates.some(u=>u.priority===c.priority&&u.connectionAddress===c.connectionAddress&&u.port===c.port)||(this._candidates.push(c),this.sessionDesc.mediaDescriptions.forEach(u=>{u.attributes.candidates=this.candidates}))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,r,n,i){let a=e._mediaStreamTrack.kind,o=this.rtpCapabilities.recv,s=N0(a,o,this.localCapabilities.send,a===Ne.AUDIO?i:n),l=a===Ne.VIDEO?o.videoExtensions:o.audioExtensions,c="".concat(++this.currentMidIndex),u={media:{mediaType:a,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(f=>f.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};u=this.mungRecvMediaDsec(u,e);let h=this.findFirstClosedMedia(a);if(h){let f=this.sessionDesc.mediaDescriptions.indexOf(h);this.sessionDesc.mediaDescriptions[f]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}muteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>be(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="inactive"})}unmuteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>be(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="recvonly"})}findAvailableMediaIndex(e,t,r){return this.sessionDesc.mediaDescriptions.findIndex(n=>{let i=n.media.mediaType===e&&n.media.port!=="0"&&(n.attributes.direction==="sendonly"||n.attributes.direction==="sendrecv")&&n.attributes.ssrcs.length===0;if(Ar()){if(i){let a=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(a||n.attributes.mid!=="0"&&n.attributes.mid!=="1")||!(!a||a!==n.attributes.mid)}return!1}return i&&n.attributes.mid===r})}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex(t=>{let r=t.media.mediaType===e&&t.media.port!=="0"&&(t.attributes.direction==="recvonly"||t.attributes.direction==="sendrecv");return t.attributes.mid!=="0"&&t.attributes.mid!=="1"&&r})}predictReceivingMids(e){let t=[];for(let r=0;r<e;r++)t.push((this.currentMidIndex+r+1).toString(10));return t}restartICE(e){e=Gr(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd})}createOrRecycleSendMedia(e,t,r,n,i,a){let o=this.rtpCapabilities.send,s=e===Ne.VIDEO?o.videoCodecs:o.audioCodecs,l=e===Ne.VIDEO?o.videoExtensions:o.audioExtensions;Ar()&&(i="".concat(++this.currentMidIndex));let c={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(h=>h.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:r,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:i}};c=this.mungSendMediaDesc(c,a);let u=this.findFirstClosedMedia(e);if(u){let h=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[h]=c}else this.sessionDesc.mediaDescriptions.push(c);return c}mungRecvMediaDsec(e,t,r){let n=Gr(e);return LM(n),Zm(n,t),jM(n,t),Eie(n),TT(n,r,this.localCapabilities.send),n}mungSendMediaDesc(e,t){let r=Gr(e);return TT(r,t,this.localCapabilities.recv),eg(r),r}updateRecvMedia(e,t){let r=this.sessionDesc.mediaDescriptions.findIndex(n=>n.attributes.mid===e);if(r!==-1){let n=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],t);this.sessionDesc.mediaDescriptions[r]=n}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>e.media.port!=="0").map(e=>e.attributes.mid)}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(t=>{var r;return((r=t.attributes)===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId)===e[0].ssrcId})}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(t=>Ar()?t.media.port==="0"&&t.media.mediaType===e:t.media.port==="0")}},_He=["sdp"],or;function YH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var XH=(or=class Tp extends Dne{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var t,r;return(t=(r=this.peerConnection.getReceivers()[0])===null||r===void 0||(r=r.transport)===null||r===void 0?void 0:r.state)!==null&&t!==void 0?t:null}get localCodecs(){return[]}set isInRestartIce(t){this._isInRestartIce=t}get isInRestartIce(){return this._isInRestartIce}constructor(t,r,n){super(t,r),R(this,"direction",void 0),R(this,"name",void 0),R(this,"store",void 0),R(this,"spec",void 0),R(this,"peerConnection",void 0),R(this,"initialOffer",void 0),R(this,"transport",void 0),R(this,"statsFilter",void 0),R(this,"localCandidateCount",0),R(this,"_isInRestartIce",!1),R(this,"mutex",new gi("P2PConnection-mutex")),R(this,"onLocalCandidate",void 0),R(this,"remoteSDP",void 0),R(this,"pendingCandidates",[]),R(this,"localCapabilities",void 0),R(this,"isReady",!1),R(this,"restartCnt",0),R(this,"curTurnServerIndex",0),this.store=r,this.spec=t,this.peerConnection=new RTCPeerConnection(Tp.resolvePCConfiguration(t,r.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=n??Xi.SEND_ONLY,this.name=this.direction===Xi.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=HM(this.peerConnection,M("STATS_UPDATE_INTERVAL"),void 0,Ar()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(t){try{let r=await Sie();if(this.localCapabilities=CT(r),t){let{sdp:n}=t,i=vHe(t,_He),a=function(){let u={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},h=Mv(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"sendonly"),f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},p={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},m={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Ls(h,u,"videoExtensions",f,p,m),Ls(h,u,"videoCodecs",f,p,m),Ls(h,u,"audioExtensions",f,p,m),Ls(h,u,"audioCodecs",f,p,m),M("RAISE_H264_BASELINE_PRIORITY")){let g=m.videoCodecs.findIndex(y=>y.rtpMap&&y.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&y.fmtp&&y.fmtp.parameters["profile-level-id"]==="42001f");if(g!==-1){let y=m.videoCodecs.findIndex(v=>v.rtpMap&&v.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(y<g){_.debug("raising H264 baseline profile priority");let v=m.videoCodecs[g];m.videoCodecs.splice(g,1),m.videoCodecs.splice(y,0,v)}y!==-1&&M("FILTER_SEND_H264_BASELINE")&&(f.videoCodecs=f.videoCodecs.filter(v=>!(v.rtpMap&&v.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&v.fmtp&&v.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:f,recv:p,sendrecv:m}}({},{},n);this.remoteSDP=new qH({remoteIceParameters:i.iceParameters,remoteDtlsParameters:i.dtlsParameters,candidates:[],remoteRTPCapabilities:a,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;let o=await this.peerConnection.createAnswer();if(!o.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");let s=nd(o.sdp);await this.peerConnection.setLocalDescription(o);let l=await RH({},{},o.sdp);this.localCapabilities=CT(l);let c=this.peerConnection.getTransceivers()[0];return c!=null&&c.receiver&&c.receiver.transport&&this.tryBindTransportEvents(c.receiver.transport),Nu(Nu({},s),{},{sdp:o.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});let n=await this.peerConnection.createOffer();if(!n.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let i=nd(n.sdp);return this.initialOffer=n,Nu(Nu({},i),{},{sdp:n.sdp})}}catch(r){throw new ee(k.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);let{sdp:r,iceParameters:n,dtlsParameters:i}=t,a=await RH({},{},r);this.remoteSDP=new qH({remoteIceParameters:n,remoteDtlsParameters:i,candidates:[],remoteRTPCapabilities:a,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});let o=this.peerConnection.getTransceivers()[0];o!=null&&o.sender&&o.sender.transport&&this.tryBindTransportEvents(o.sender.transport)}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}}async addRemoteCandidate(t){try{t&&this.pendingCandidates.push(t),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach(r=>{this.peerConnection.addIceCandidate(r)}),this.pendingCandidates=[])}catch(r){throw new ee(k.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(r.toString()))}}send(t,r,n){var i=this;return ml(function*(){let a=yield Nt(i.mutex.lock("From P2PConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let o=[],s=i.remoteSDP.receive(t,r,n);t.forEach((y,v)=>{if(s[v].needCreateTransceiver){let b=i.peerConnection.addTransceiver(y._mediaStreamTrack,{direction:"sendonly"});o.push(b),y._updateRtpTransceiver(b)}else{let b=i.peerConnection.getTransceivers().find(E=>E.mid===s[v].mid);if(!b)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(s[v].mid));o.push(b),y._updateRtpTransceiver(b)}}),Ar()&&M("SIMULCAST")===!0&&(yield Nt(i.applySimulcastForFirefox(o,t)));let l=s.map(y=>y.mid),c=yield Nt(i.peerConnection.createOffer()),u=i.mungSendOfferSDP(c.sdp,t,l),h=$n.parse(u),f=l.map(y=>{let v=h.mediaDescriptions.find(b=>b.attributes.mid===y);if(!v)throw new Error("Cannot extract ssrc from mediaDescription.");return bie(v,M("USE_PUB_RTX"))}),p=o.map((y,v)=>{let b=l[v];return{localSSRC:f[v],id:b}});yield Nt(i.peerConnection.setLocalDescription({type:"offer",sdp:u}));try{yield p}catch(y){let v=i.remoteSDP.toString();throw yield Nt(i.peerConnection.setLocalDescription({type:"offer",sdp:u})),yield Nt(i.peerConnection.setRemoteDescription({type:"answer",sdp:v})),yield Nt(i.stopSending(l,!0)),y}yield Nt(i.applySimulcastEncodings(o,t)),yield Nt(i.applySendEncodings(o,t));let m=i.remoteSDP.toString(),g=i.logSDPExchange(u,"offer","local","send");return g==null||g(m),yield Nt(i.setRemoteDescription({type:"answer",sdp:m})),o.map((y,v)=>{let b=l[v];return{localSSRC:f[v],id:b}})}catch(o){throw o instanceof ee?o:new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(o.toString()))}finally{a()}})()}async stopSending(t,r){let n=r?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let i=this.peerConnection.getTransceivers().filter(l=>t.indexOf(l.mid)!==-1);if(i.length!==t.length)throw new Error("Transceivers' length (".concat(i.length,") doesn't match mids' length (").concat(t.length,") when trying to call P2PConnection.stopSending."));i.map(l=>{var c;l.direction="inactive",(c=l.stop)===null||c===void 0||c.call(l)});let a=await this.peerConnection.createOffer(),o=this.logSDPExchange(a.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(a),this.remoteSDP.stopReceiving(t);let s=this.remoteSDP.toString();o==null||o(s),await this.setRemoteDescription({type:"answer",sdp:s})}catch(i){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}finally{n&&n()}}async receive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{mid:a,needExchangeSDP:o}=this.remoteSDP.send(t,r,n,i);if(o){let l=this.remoteSDP.toString(),c=this.logSDPExchange(l,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:l});let u=await this.peerConnection.createAnswer(),h=this.mungReceiveAnswerSDP(u.sdp,a,t);c==null||c(h||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:h}),_.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP."))}else _.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," no need to exchange SDP."));let s=this.peerConnection.getTransceivers().find(l=>l.mid===a);if(!s||s.mid===null)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,mid:s.mid,transceiver:s}}catch(a){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(a.toString()))}}async mockReceive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{mid:a,needExchangeSDP:o}=this.remoteSDP.send(t,r,n,i);if(o){let s=this.remoteSDP.toString(),l=this.logSDPExchange(s,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:s});let c=await this.peerConnection.createAnswer(),u=this.mungReceiveAnswerSDP(c.sdp,a,t);l==null||l(u||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:u}),_.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP."))}else _.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," no need to exchange SDP."))}catch(a){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(a.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===dh.Auto&&(this.store.p2pTransport=dh.SdRtn,Rt().supportPCSetConfiguration&&this.peerConnection.setConfiguration(Tp.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,Rt().supportPCSetConfiguration&&this.peerConnection.setConfiguration(Tp.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;let r=await this.peerConnection.createOffer({iceRestart:!0});if(!r.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let{iceParameters:n}=nd(r.sdp);return this.store.descriptionStart(),this.direction===Xi.SEND_ONLY&&await this.peerConnection.setLocalDescription(r),n}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===Xi.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});let r=await this.peerConnection.createAnswer();if(!r.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");let{iceParameters:n}=nd(r.sdp);return await this.peerConnection.setLocalDescription(r),n}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}close(){var t;this.peerConnection.close(),this.peerConnection.onicecandidate=null,(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[r],[t]);this.remoteSDP.updateRecvMedia(t,r);let a=this.remoteSDP.toString(),o=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),o==null||o(a),await this.peerConnection.setRemoteDescription({type:"answer",sdp:a})}catch(n){throw new ee(k.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(t,r){let n=this.peerConnection.getTransceivers().filter(i=>i.mid===t);n.length===1&&(this.isVP8Simulcast(r)?Ar()||await this.applySimulcastEncodings(n,[r]):await this.applySendEncodings(n,[r]))}setStatsRemoteVideoIsReady(t,r){this.statsFilter.setVideoIsReady2(t,r)}async replaceTrack(t,r){let n=this.peerConnection.getTransceivers().find(i=>i.mid===r);n&&await n.sender.replaceTrack(t._mediaStreamTrack)}async getSelectedCandidatePair(){let t=this.peerConnection.getReceivers();if(t.length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair()){let r=t[0].transport.iceTransport,{local:n,remote:i}=r.getSelectedCandidatePair();return{local:Nu(Nu({},dc),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:Nu(Nu({},dc),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t,r;be(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)&&(this.isReady=!1),(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;this.peerConnection.connectionState==="connected"&&(this.restartCnt=0),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=t=>{if(t.candidate){var r;t.candidate.candidate&&((r=this.onLocalCandidate)===null||r===void 0||r.call(this,t.candidate.toJSON())),this.localCandidateCount+=1}else _.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i={iceServers:[]};var a;return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(Sx(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...Tp.turnServerConfigToIceServers(t.turnServer.servers,r,n)),M("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...Tp.turnServerConfigToIceServers(t.turnServer.serversFromGateway,r,n)),be(a=[dh.Relay,dh.SdRtn]).call(a,r)&&(i.iceTransportPolicy="relay"),M("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(o=>{o.forceturn&&(i.iceTransportPolicy="relay")}))),M("ENABLE_ENCODED_TRANSFORM")&&Rt().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),_.debug("P2PConnection p2pTransport is ".concat(r)),i}static turnServerConfigToIceServers(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=[],a=t.filter(s=>s.tcpport);_.debug("P2PConnection turnServers is ".concat(a,", current index is ").concat(n));let o=a.length>n?a[n]:a[0];switch(r){case dh.SdRtn:let s=t.filter(c=>{var u;return be(u=c.username).call(u,"glb:")&&c.turnServerURL==c.turnServerURL}),l=s.length>n?s[n]:s[0];l&&(i.push({username:l.username,credential:l.password,credentialType:"password",urls:"turn:".concat(Jp(l.turnServerURL),":").concat(l.tcpport,"?transport=udp")}),i.push({username:l.username,credential:l.password,credentialType:"password",urls:"turns:".concat(Jp(l.turnServerURL),":").concat(l.tcpport,"?transport=tcp")}));break;case dh.Relay:o&&(i.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(o.turnServerURL,":").concat(o.tcpport,"?transport=udp")}),i.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(Jp(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}));break;default:o&&(i.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(o.turnServerURL,":").concat(o.tcpport,"?transport=udp")}),i.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(Jp(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}),i.push({username:o.username,credential:o.password,credentialType:"password",urls:"stun:".concat(o.turnServerURL,":").concat(o.tcpport)}))}return i}tryBindTransportEvents(t){if(t){this.transport=t,t.onstatechange=()=>{var n;t!=null&&t.state&&((n=this.onDTLSTransportStateChange)===null||n===void 0||n.call(this,t.state))},t.onerror=n=>{var i;(i=this.onDTLSTransportError)===null||i===void 0||i.call(this,"error"in n?n.error:n)};let r=t.iceTransport;r&&(r.onstatechange=()=>{let n=t==null?void 0:t.iceTransport.state;var i;n&&((i=this.onICETransportStateChange)===null||i===void 0||i.call(this,n))},r.getSelectedCandidatePair&&(r.onselectedcandidatepairchange=()=>{if(r.getSelectedCandidatePair()){let{local:n,remote:i}=r.getSelectedCandidatePair();_.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol}),", remote ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(t,r){var n;if(r||(r=this.peerConnection.getSenders().find(u=>u.track===t._mediaStreamTrack)),!r)return _.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(t))return _.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!Rt().supportSetRtpSenderParameters)return _.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");let i={},a={};switch(t._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(t._encoderConfig){var o;let{bitrateMax:u,frameRate:h,scaleResolutionDownBy:f}=t._encoderConfig;u&&(a.maxBitrate=1e3*u),be(o=t._hints).call(o,hr.LOW_STREAM)&&(h&&(a.maxFramerate=$a(h)),f&&f>=1&&(a.scaleResolutionDownBy=f))}if(M("DSCP_TYPE")&&Nd()){var s;let u=M("DSCP_TYPE");be(s=["very-low","low","medium","high"]).call(s,u)&&(a.networkPriority=u)}let l=r.getParameters(),c=(n=l.encodings)===null||n===void 0?void 0:n[0];Ar()&&!c&&(i.encodings=[a]),c&&Object.assign(c,a),Object.assign(l,i),_.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(l.encodings))),await r.setParameters(l)}async applySendEncodings(t,r){try{if(!Rt().supportSetRtpSenderParameters||t.length!==r.length)return;for(let n=0;n<t.length;n++){let i=t[n],a=r[n];a instanceof sr&&!this.isVP8Simulcast(a)&&await this.updateRtpSenderEncodings(a,i.sender)}}catch{_.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,r,n){let i=$n.parse(t);return r.forEach((a,o)=>{let s=n[o],l=i.mediaDescriptions.find(c=>c.attributes.mid===s);l&&(Zm(l,a),_ie(l,a,this.store.codec))}),$n.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var r;(r=this.onFirstAudioReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var r;(r=this.onFirstVideoReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var r;(r=this.onFirstAudioDecoded)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,r,n)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,r,n)},this.statsFilter.onSelectedLocalCandidateChanged=(t,r)=>{var n;(n=this.onSelectedLocalCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,r)=>{var n;(n=this.onSelectedRemoteCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onFirstVideoDecodedTimeout=t=>{var r;(r=this.onFirstVideoDecodedTimeout)===null||r===void 0||r.call(this,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(t,r){if(t.length===r.length)for(let l=0;l<t.length;l++){var n,i,a,o,s;let c=t[l],u=r[l];if(u instanceof sr&&!be(n=u._hints).call(n,hr.LOW_STREAM)&&(i=u._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((a=u._encoderConfig)===null||a===void 0?void 0:a.bitrateMax)>200&&(o=u._scalabilityMode)!==null&&o!==void 0&&o.numSpatialLayers&&((s=u._scalabilityMode)===null||s===void 0?void 0:s.numSpatialLayers)>1&&this.store.codec==="vp8"){let h={},f={high:1e3*(u._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{rid:"m",active:!0,maxBitrate:f.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:f.high}];let p=c.sender.getParameters();await c.sender.setParameters(Object.assign(p,h))}}}async applySimulcastEncodings(t,r){if(!Ar()&&t.length===r.length)for(let n=0;n<t.length;n++){let i=r[n];if(i instanceof sr&&this.isVP8Simulcast(i)){let a=t[n],o={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};o.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];let l=a.sender.getParameters();await a.sender.setParameters(Object.assign(l,o))}}}isVP8Simulcast(t){var r,n,i,a,o;return!!(t instanceof sr&&M("SIMULCAST")&&this.store.codec==="vp8"&&!be(r=t._hints).call(r,hr.LOW_STREAM)&&(n=t._encoderConfig)!==null&&n!==void 0&&n.bitrateMax&&((i=t._encoderConfig)===null||i===void 0?void 0:i.bitrateMax)>200&&(a=t._scalabilityMode)!==null&&a!==void 0&&a.numSpatialLayers&&((o=t._scalabilityMode)===null||o===void 0?void 0:o.numSpatialLayers)>1)}logSDPExchange(t,r,n,i){if(M("SDP_LOGGING"))return _.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(r," SDP during P2PConnection.").concat(i,`
`),t),r==="offer"?a=>{this.logSDPExchange(a,"answer",n==="local"?"remote":"local",i)}:void 0}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(o=>o.mid&&t.indexOf(o.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(o=>{o.direction="inactive"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(t);let a=this.remoteSDP.toString();i==null||i(a),await this.setRemoteDescription({type:"answer",sdp:a})}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(r.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(o=>o.mid&&t.indexOf(o.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(async o=>{o.direction="sendonly"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(t);let a=this.remoteSDP.toString();i==null||i(a),await this.setRemoteDescription({type:"answer",sdp:a})}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(r.toString()))}}async getRemoteSSRC(t,r){var n,i;if(r=(n=r)!==null&&n!==void 0?n:(i=this.currentRemoteDescription)===null||i===void 0?void 0:i.sdp){var a;let o=(a=$n.parse(r).mediaDescriptions.find(s=>s.attributes.mid===t))===null||a===void 0?void 0:a.attributes.ssrcs;return o==null?void 0:o[0].ssrcId}}async setRemoteDescription(t){var r;await this.peerConnection.setRemoteDescription(t),be(r=["connected","completed"]).call(r,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(t,r,n){let i=$n.parse(t),a=i.mediaDescriptions.find(o=>o.attributes.mid===r);return a&&n===Ne.AUDIO&&a.media.mediaType==="audio"&&eg(a),$n.print(i)}},Se(or.prototype,"establish",[ws],Object.getOwnPropertyDescriptor(or.prototype,"establish"),or.prototype),Se(or.prototype,"connect",[ws],Object.getOwnPropertyDescriptor(or.prototype,"connect"),or.prototype),Se(or.prototype,"receive",[ws],Object.getOwnPropertyDescriptor(or.prototype,"receive"),or.prototype),Se(or.prototype,"mockReceive",[ws],Object.getOwnPropertyDescriptor(or.prototype,"mockReceive"),or.prototype),Se(or.prototype,"stopReceiving",[ws],Object.getOwnPropertyDescriptor(or.prototype,"stopReceiving"),or.prototype),Se(or.prototype,"restartICE",[ws],Object.getOwnPropertyDescriptor(or.prototype,"restartICE"),or.prototype),Se(or.prototype,"close",[ws],Object.getOwnPropertyDescriptor(or.prototype,"close"),or.prototype),Se(or.prototype,"updateEncoderConfig",[ws],Object.getOwnPropertyDescriptor(or.prototype,"updateEncoderConfig"),or.prototype),Se(or.prototype,"updateSendParameters",[ws],Object.getOwnPropertyDescriptor(or.prototype,"updateSendParameters"),or.prototype),Se(or.prototype,"replaceTrack",[ws],Object.getOwnPropertyDescriptor(or.prototype,"replaceTrack"),or.prototype),Se(or.prototype,"muteLocal",[ws],Object.getOwnPropertyDescriptor(or.prototype,"muteLocal"),or.prototype),Se(or.prototype,"unmuteLocal",[ws],Object.getOwnPropertyDescriptor(or.prototype,"unmuteLocal"),or.prototype),or);function ws(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,a=await i.lock("From P2PConnection.".concat(t));try{for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return await n.apply(this,s)}finally{a()}},r}function gD(e,t){let r=document.createElement("video"),n=document.createElement("canvas");r.setAttribute("style","display:none"),n.setAttribute("style","display:none"),r.setAttribute("muted",""),r.muted=!0,r.setAttribute("autoplay",""),r.autoplay=!0,r.setAttribute("playsinline",""),n.width=$a(t.width),n.height=$a(t.height);let i=$a(t.framerate||15);document.body.append(r),document.body.append(n);let a=e._mediaStreamTrack;r.srcObject=new MediaStream([a]),r.play();let o=n.getContext("2d");if(!o)throw new Y(k.UNEXPECTED_ERROR,"can not get canvas context");let s=Rt(),l=n.captureStream(s.supportRequestFrame?0:i).getVideoTracks()[0];l.canvas||(l.canvas=n),n.startCapture=()=>{if(!r)return n.stopCapture&&n.stopCapture();if(r.paused&&r.play(),r.videoHeight>2&&r.videoWidth>2){let u=r.videoWidth,h=r.videoHeight/u,f=n.width*h;Math.abs(f-n.height)>=2&&(_.debug("adjust low stream resolution","".concat(n.width,"x").concat(n.height," -> ").concat(n.width,"x").concat(f)),n.height=f)}o.drawImage(r,0,0,n.width,n.height),l.requestFrame&&l.requestFrame(),a!==e._mediaStreamTrack&&(a=e._mediaStreamTrack,r.srcObject=new MediaStream([a]))},n.stopCapture=kM(()=>n.startCapture&&n.startCapture(),i);let c=l.stop;return l.stop=()=>{c.call(l),r&&(r.remove(),r.srcObject=null,r=null),n&&(n.width=0,n.remove(),n.stopCapture&&n.stopCapture(),n.startCapture=void 0,n.stopCapture=void 0,n=null),_.debug("clean low stream renderer")},l}var D_=function(e){return e[e.HEIGHT=2033]="HEIGHT",e[e.FRAME_RATE=2034]="FRAME_RATE",e[e.WIDTH=2035]="WIDTH",e}(D_||{}),bn=function(e){return e[e.FRAME_RATE=2002]="FRAME_RATE",e[e.WIDTH=2003]="WIDTH",e[e.HEIGHT=2004]="HEIGHT",e[e.PACKAGE_LOST=2005]="PACKAGE_LOST",e[e.AVG_ENCODE=2007]="AVG_ENCODE",e[e.NACKS=2009]="NACKS",e[e.PLIS=2010]="PLIS",e[e.FIRS=2011]="FIRS",e[e.BITRATE=2012]="BITRATE",e[e.PACKAGE_RATE=2031]="PACKAGE_RATE",e[e.ADAPTATION=2032]="ADAPTATION",e[e.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",e[e.BANDWIDTH=2061]="BANDWIDTH",e[e.RETRANSMIT=2062]="RETRANSMIT",e[e.TARGET_ENCODED=2064]="TARGET_ENCODED",e[e.TRANSMIT=2066]="TRANSMIT",e[e.FREEZE=2082]="FREEZE",e[e.DISABLED=2095]="DISABLED",e[e.PLAYER_STATUS=2128]="PLAYER_STATUS",e[e.QP_SUM=2143]="QP_SUM",e}(bn||{}),fh=function(e){return e[e.BITRATE=2069]="BITRATE",e[e.PACKAGE_LOST=2070]="PACKAGE_LOST",e[e.PACKAGE_RATE=2071]="PACKAGE_RATE",e[e.HEIGHT=2073]="HEIGHT",e[e.FRAME_RATE=2075]="FRAME_RATE",e[e.WIDTH=2077]="WIDTH",e}(fh||{}),Si=function(e){return e[e.JITTER=-1]="JITTER",e[e.PACKAGE_LOST=2014]="PACKAGE_LOST",e[e.WIDTH=2018]="WIDTH",e[e.HEIGHT=2019]="HEIGHT",e[e.FRAME_RATE=2020]="FRAME_RATE",e[e.JITTER_BUFFER=2023]="JITTER_BUFFER",e[e.CURRENT_DELAY=2024]="CURRENT_DELAY",e[e.NACKS=2026]="NACKS",e[e.PLIS=2027]="PLIS",e[e.FIRS=2028]="FIRS",e[e.BITRATE=2029]="BITRATE",e[e.PACKAGE_RATE=2078]="PACKAGE_RATE",e[e.FREEZE=2084]="FREEZE",e[e.DISABLED=2101]="DISABLED",e[e.PLAYER_STATUS=2129]="PLAYER_STATUS",e[e.QP_SUM=2144]="QP_SUM",e[e.I_FRAME_DELAY=2149]="I_FRAME_DELAY",e}(Si||{}),ph=function(e){return e[e.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",e[e.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",e[e.FRAME_RATE_OUTPUT=2155]="FRAME_RATE_OUTPUT",e[e.FREEZE_TIME=2109]="FREEZE_TIME",e[e.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER",e[e.FREEZE_DURATION=2156]="FREEZE_DURATION",e}(ph||{}),Lie=function(e){return e[e.PCM_LEVEL=2104]="PCM_LEVEL",e}(Lie||{}),ju=function(e){return e[e.PACKAGE_LOST=-1]="PACKAGE_LOST",e[e.LEVEL=2038]="LEVEL",e[e.BITRATE=2039]="BITRATE",e[e.PACKAGE_RATE=2040]="PACKAGE_RATE",e[e.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",e[e.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",e[e.FREEZE=2081]="FREEZE",e[e.DISABLED=2096]="DISABLED",e}(ju||{}),_s=function(e){return e[e.BITRATE=2044]="BITRATE",e[e.PACKAGE_LOST=2045]="PACKAGE_LOST",e[e.PACKAGE_RATE=2046]="PACKAGE_RATE",e[e.CURRENT_DELAY=2047]="CURRENT_DELAY",e[e.JITTER_BUFFER=2054]="JITTER_BUFFER",e[e.JITTER=2055]="JITTER",e[e.FREEZE=2083]="FREEZE",e[e.DISABLED=2102]="DISABLED",e[e.PCM_LEVEL=2105]="PCM_LEVEL",e[e.PLAYER_STATUS=2130]="PLAYER_STATUS",e[e.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES",e}(_s||{}),jie=function(e){return e[e.FREEZE_TIME=-1]="FREEZE_TIME",e[e.LEVEL=2043]="LEVEL",e}(jie||{}),Do=function(e){return e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE",e}(Do||{}),Rc=1e3,rh=3;function ct(e,t,r){r!=null&&Number.isFinite(r)&&(e[t]=Math.round(Math.max(0,r)))}function JH(e){let t={[Do.CONN_TYPE]:0,[Do.RTT]:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{let r=e.selectedCandidatePair.localCandidate.relayProtocol;r==="udp"&&(t[Do.CONN_TYPE]=1),r==="tcp"&&(t[Do.CONN_TYPE]=3),r==="tls"&&(t[Do.CONN_TYPE]=4);break}case"srflx":t[Do.CONN_TYPE]=2}return t}function QH(e){let t=0;switch(e){case"none":t=0;break;case"cpu":t=1;break;case"bandwidth":t=2;break;case"other":t=3}return t}var Mie=class extends Tr{constructor(e){super(),R(this,"store",void 0),R(this,"uploadWRTCStatsTimer",void 0),R(this,"uploadOutboundDenoiserStatsTimer",void 0),R(this,"uploadExtStatsTimer",void 0),R(this,"uploadExtUsageStatsTimer",void 0),R(this,"uploadInboundExtStatsTimer",void 0),R(this,"requestStats",void 0),R(this,"requestTransportStats",void 0),R(this,"requestLocalMedia",void 0),R(this,"requestRemoteMedia",void 0),R(this,"requestAllTracks",void 0),R(this,"requestVideoIsReady",void 0),R(this,"requestUploadStats",void 0),R(this,"requestUpload",void 0),R(this,"uploadOutboundStarted",!1),R(this,"uploadInboundStarted",!1),R(this,"uploadTransportStarted",!1),R(this,"uploadExtensionUsageStarted",!1),R(this,"lastRecvStats",void 0),R(this,"lastSendStats",void 0),R(this,"lastFullRecvStats",void 0),R(this,"lastFullSendStats",void 0),R(this,"needUploadRenderFreezeTime",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;let t,r;if(this.uploadTransportStarted&&(t=this.requestStats(),this.store.useP2P&&(r=this.requestStats(!0))),!t&&this.uploadOutboundStarted&&(t=this.requestStats()),!r&&this.uploadInboundStarted&&(r=this.requestStats(!0)),t||r){let n={};if(this.uploadTransportStarted&&t){let i=this.getTransportStats(t,r,e);i&&(n.misc=[i])}if(this.uploadOutboundStarted&&t){let i=this.getOutboundStats(t,e?this.lastSendStats:this.lastFullSendStats,e);i&&(n.outbound=[i])}if(this.uploadInboundStarted&&r){let i=this.getInboundStats(r,e?this.lastRecvStats:this.lastFullRecvStats,e);i&&(n.inbound=i)}this.requestUploadStats(n)}this.lastRecvStats=r,this.lastSendStats=t,e||(this.lastFullRecvStats=r,this.lastFullSendStats=t)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let e=1;this.uploadWRTCStatsTimer=window.setInterval(()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(e!==rh),++e===rh+1&&(e=1)},Rc)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,r){if(!this.requestStats)return;if(r)return e.rtt==null?void 0:{addition:{[Do.RTT]:e.rtt,[Do.CONN_TYPE]:void 0}};let n=JH(e);if(this.store.useP2P){if(t){let i=JH(t);n[Do.CONN_TYPE]+=i[Do.CONN_TYPE]<<3}n[Do.CONN_TYPE]+=110}else n[Do.CONN_TYPE]+=100;return{addition:n}}getOutboundStats(e,t,r){if(!this.requestUploadStats||!this.requestLocalMedia)return;let n=this.requestLocalMedia();if(!n||n.length===0)return;let i,a,o;return n.forEach(s=>{let[l,{track:c,ssrcs:u}]=s;switch(l){case oe.LocalVideoLowTrack:case oe.LocalVideoTrack:if(l===oe.LocalVideoTrack){let h=function(m,g,y,v,b){let E=g.videoSend.find(z=>z.ssrc===m);if(!E)return;let S={},{sentFrame:I,inputFrame:N}=E;if(N&&I){let z=N.frameRate,A=I.frameRate;S[bn.FREEZE]=function(V,G){let X=!0;return X=!(V<=5)&&(V<=10?G<3:V<=20?G<4:G<5),X}(z,A)?1:0}if(ct(S,bn.QP_SUM,E.qpSumPerFrame),b)return S;switch(I&&(ct(S,bn.HEIGHT,I.height),ct(S,bn.WIDTH,I.width),ct(S,bn.FRAME_RATE,I.frameRate)),S[bn.DISABLED]=v._originMediaStreamTrack&&!v._originMediaStreamTrack.enabled||v._mediaStreamTrack&&!v._mediaStreamTrack.enabled?1:0,E.adaptionChangeReason){case"none":S[bn.ADAPTATION]=0;break;case"cpu":S[bn.ADAPTATION]=1;break;case"bandwidth":S[bn.ADAPTATION]=2;break;case"other":S[bn.ADAPTATION]=3}let L=0;E.adaptionChangeReason&&(L+=QH(E.adaptionChangeReason)),g.qualityLimitationReason&&(L+=QH(g.qualityLimitationReason)<<3),S[bn.ADAPTATION]=L,S[bn.PLAYER_STATUS]=RA[v._player?v._player.videoElementStatus:"uninit"],ct(S,bn.NACKS,E.nacksCount),ct(S,bn.PLIS,E.plisCount),ct(S,bn.FIRS,E.firsCount),ct(S,bn.AVG_ENCODE,E.avgEncodeMs);let j=y&&y.videoSend.find(z=>z.ssrc===m);if(j){let z=b?Rc:Rc*rh;j.timestamp&&E.timestamp&&(z=E.timestamp-j.timestamp),j.packets!=null&&E.packets!=null&&ct(S,bn.PACKAGE_RATE,1e3*(E.packets-j.packets)/z),E.packetsLost!=null&&j.packetsLost!=null&&ct(S,bn.PACKAGE_LOST,E.packetsLost-j.packetsLost),j.bytes!=null&&E.bytes!=null&&ct(S,bn.BITRATE,8*(E.bytes-j.bytes)/z)}return S}(u[0].ssrcId,e,t,c,r),f=r?null:function(m,g,y){let v=g.videoSend.find(L=>L.ssrc===m);if(!v)return null;let b={},E=v.inputFrame,S=E&&E.height||y&&y.videoHeight||0,I=E&&E.width||y&&y.videoWidth||0,N=E&&E.frameRate||0;return ct(b,D_.HEIGHT,S),ct(b,D_.WIDTH,I),ct(b,D_.FRAME_RATE,N),b}(u[0].ssrcId,e,c),p=r?null:function(m){let g={};return ct(g,bn.RETRANSMIT,m.bitrate.retransmit),ct(g,bn.TARGET_ENCODED,m.bitrate.targetEncoded),ct(g,bn.ACTUAL_ENCODED,m.bitrate.actualEncoded),ct(g,bn.TRANSMIT,m.bitrate.transmit),ct(g,bn.BANDWIDTH,m.sendBandwidth),g}(e);a=Object.assign({},h,f,p)}else o=r?void 0:function(h,f,p){let m=f.videoSend.find(v=>v.ssrc===h);if(!m)return;let g={},y=m.sentFrame;if(y&&(ct(g,fh.HEIGHT,y.height),ct(g,fh.WIDTH,y.width),ct(g,fh.FRAME_RATE,y.frameRate)),p){let v=p.videoSend.find(b=>b.ssrc===h);if(v){let b=Rc*rh;v.timestamp&&m.timestamp&&(b=m.timestamp-v.timestamp),v.packets!=null&&m.packets!=null&&ct(g,fh.PACKAGE_RATE,1e3*(m.packets-v.packets)/b),m.packetsLost!=null&&v.packetsLost!=null&&ct(g,fh.PACKAGE_LOST,m.packetsLost-v.packetsLost),v.bytes!=null&&m.bytes!=null&&ct(g,fh.BITRATE,8*(m.bytes-v.bytes)/b)}}return g}(u[0].ssrcId,e,t);break;case oe.LocalAudioTrack:i=r?void 0:function(h,f,p,m){let g=f.audioSend.find(S=>S.ssrc===h);if(!g)return;let y={};y[ju.DISABLED]=m._originMediaStreamTrack&&!m._originMediaStreamTrack.enabled||m._mediaStreamTrack&&!m._mediaStreamTrack.enabled?1:0;let v=100*m._source.getAccurateVolumeLevel(),b=g.inputLevel;if(b!=null){let S=Math.ceil(50*Math.log10(100*b+1));ct(y,ju.LEVEL,S)}ct(y,Lie.PCM_LEVEL,v),ct(y,ju.AEC_RETURN_LOSS,g.aecReturnLoss),ct(y,ju.AEC_RETURN_LOSS_ENH,g.aecReturnLossEnhancement),y[ju.FREEZE]=0;let E=p&&p.audioSend.find(S=>S.ssrc===h);if(E){let S=Rc*rh;E.timestamp&&g.timestamp&&(S=g.timestamp-E.timestamp),E.bytes!=null&&g.bytes!=null&&ct(y,ju.BITRATE,8*(g.bytes-E.bytes)/S),E.packets!=null&&g.packets!=null&&ct(y,ju.PACKAGE_RATE,1e3*(g.packets-E.packets)/S)}return y}(u[0].ssrcId,e,t,c)}}),{high:a,low:o,audio:i}}getInboundStats(e,t,r){if(!this.requestRemoteMedia)return;let n=this.requestRemoteMedia()||[],i=[];return n.forEach(a=>{let[o,s]=a,l={peer:o.uid};if(s.has(Ne.VIDEO)&&o.videoTrack){let c=o._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(o._videoSSRC)||!1,u=o.videoTrack?function(h,f,p,m,g,y,v){var b;let E=f.videoRecv.find(A=>A.ssrc===h);if(!E)return;let S={},{receivedFrame:I,outputFrame:N,decodeFrameRate:L}=E,j=p&&p.videoRecv.find(A=>A.ssrc===h);if(S[Si.FREEZE]=g&&Uie.isRemoteVideoFreeze(m,E,j)?1:0,ct(S,ph.FRAME_RATE_DECODE,L),ct(S,Si.QP_SUM,E.qpSumPerFrame),E.framesRateFirefox&&ct(S,Si.FRAME_RATE,E.framesRateFirefox),I&&ct(S,Si.FRAME_RATE,I.frameRate),j){let A=f.timestamp-p.timestamp||(v?Rc:rh*Rc);E.packetsLost!=null&&j.packetsLost!=null&&ct(S,Si.PACKAGE_LOST,E.packetsLost-j.packetsLost),j.bytes!=null&&E.bytes!=null&&ct(S,Si.BITRATE,8*(E.bytes-j.bytes)/A),j.packets!=null&&E.packets!=null&&ct(S,Si.PACKAGE_RATE,1e3*(E.packets-j.packets)/A)}if(v)return S;I?(ct(S,Si.HEIGHT,I.height),ct(S,Si.WIDTH,I.width)):m&&(ct(S,Si.HEIGHT,m._videoHeight||0),ct(S,Si.WIDTH,m._videoWidth||0)),N&&ct(S,ph.FRAME_RATE_OUTPUT,N.frameRate);let z=(b=m._player)===null||b===void 0?void 0:b.rendFrameRate.toFixed(0);if(z&&ct(S,ph.FRAME_RATE_RENDER,+z),ct(S,Si.JITTER_BUFFER,E.jitterBufferMs),ct(S,Si.CURRENT_DELAY,E.currentDelayMs),ct(S,Si.FIRS,E.firsCount),ct(S,Si.NACKS,E.nacksCount),ct(S,Si.PLIS,E.plisCount),m){S[Si.DISABLED]=m._originMediaStreamTrack.enabled&&m._mediaStreamTrack.enabled?0:1;let A=m._player;if(A){let{freezeTimeCounterList:V,renderFreezeAccTime:G,videoElementStatus:X}=A;if(V&&V.length>0&&ct(S,ph.FREEZE_TIME,V.splice(0,1)[0]),y&&kc.visibility==="visible"&&X===ji.PLAYING&&Rt().supportRequestVideoFrameCallback){let $=Math.min(6e3,G);A.renderFreezeAccTime=Math.max(0,G-$),ct(S,ph.FREEZE_TIME_RENDER,$)}if(typeof E.totalFreezesDuration=="number"){let $=j&&j.totalFreezesDuration?E.totalFreezesDuration-j.totalFreezesDuration:E.totalFreezesDuration;ct(S,ph.FREEZE_DURATION,1e3*$)}}}if(S[Si.PLAYER_STATUS]=RA[m._player?m._player.videoElementStatus:"uninit"],j&&E.totalInterFrameDelay!==void 0&&E.totalSquaredInterFrameDelay!==void 0&&j.totalInterFrameDelay!==void 0&&j.totalSquaredInterFrameDelay!==void 0){let A=E.totalInterFrameDelay-j.totalInterFrameDelay,V=E.totalSquaredInterFrameDelay-j.totalSquaredInterFrameDelay,G=E.framesDecodeCount-j.framesDecodeCount,X=A/G*1e3,$=Math.round(1e3*Math.sqrt((V-Math.pow(A,2)/G)/G));!isNaN($)&&X+$>Math.max(3*X,X+150)&&(S[Si.I_FRAME_DELAY]=$)}return S}(o._videoSSRC,e,t,o.videoTrack,c===!0,this.needUploadRenderFreezeTime,r):void 0;u&&(l.video=u)}if(s.has(Ne.AUDIO)&&o.audioTrack){let c=o.audioTrack?function(u,h,f,p,m){let g=h.audioRecv.find(j=>j.ssrc===u);if(!g)return;let y={},v=f&&f.audioRecv.find(j=>j.ssrc===u),{receivedFrames:b,droppedFrames:E}=g;var S,I;if(ct(y,_s.JITTER,g.jitterMs),b!=null&&E!=null&&(y[_s.FREEZE]=(I=E,(S=b)===0||100*I/S>20?1:0)),v){let j=h.timestamp-f.timestamp||(m?Rc:Rc*rh);g.packets!=null&&v.packets!=null&&ct(y,_s.PACKAGE_RATE,1e3*(g.packets-v.packets)/j),v.bytes!=null&&g.bytes!=null&&ct(y,_s.BITRATE,8*(g.bytes-v.bytes)/j),g.packetsLost!=null&&v.packetsLost!=null&&ct(y,_s.PACKAGE_LOST,g.packetsLost-v.packetsLost)}if(m)return y;let N=100*p._source.getAccurateVolumeLevel(),L=g.outputLevel;if(L!=null){let j=Math.ceil(50*Math.log10(100*L+1));ct(y,jie.LEVEL,j)}if(ct(y,_s.PCM_LEVEL,N),p&&(y[_s.DISABLED]=p._originMediaStreamTrack.enabled&&p._mediaStreamTrack.enabled?0:1),ct(y,_s.JITTER_BUFFER,g.jitterBufferMs),ct(y,_s.CURRENT_DELAY,g.jitterBufferMs),y[_s.PLAYER_STATUS]=RA[ca.getPlayerState(p.getTrackId())],v){let j=g.concealedSamples-v.concealedSamples;j>0&&ct(y,_s.CONCEALED_SAMPLES,j)}return y}(o._audioSSRC,e,t,o.audioTrack,r):void 0;c&&(l.audio=c)}(l.video||l.audio)&&i.push(l)}),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,i}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval(()=>{if(!this.requestAllTracks||!this.requestUpload)return;let e=(this.requestAllTracks()||[]).find(t=>t instanceof _T);if(e&&e._external.getDenoiserStats){let t=e._external.getDenoiserStats();t&&this.requestUpload(Pv.DENOISER_STATS,t)}},2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval(()=>{!this.requestAllTracks||!this.requestUpload||this.requestAllTracks().forEach(e=>{e.getProcessorStats().forEach(t=>{this.requestUpload&&this.requestUpload(t.type,t.stats)})})},2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval(()=>{!this.requestUpload||!this.requestRemoteMedia||(this.requestRemoteMedia()||[]).forEach(e=>{let[t,r]=e;r.has(Ne.VIDEO)&&t.videoTrack&&t.videoTrack.getProcessorStats().forEach(n=>{this.requestUpload&&this.requestUpload(n.type,n.stats)}),r.has(Ne.AUDIO)&&t.audioTrack&&t.audioTrack.getProcessorStats().forEach(n=>{this.requestUpload&&this.requestUpload(n.type,n.stats)})})},2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);let e=new Map;this.uploadExtUsageStatsTimer=window.setInterval(async()=>{let t=Date.now(),r={connectionInterval:M("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:t},n=[],i=this.requestAllTracks&&this.requestAllTracks()||[];for(let l of i)!l.muted&&l.enabled&&(n=n.concat(await l.getProcessorUsage()));let a=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(let[l,c]of a)c.has(Ne.VIDEO)&&l.videoTrack&&(n=n.concat(await l.videoTrack.getProcessorUsage())),c.has(Ne.AUDIO)&&l.audioTrack&&(n=n.concat(await l.audioTrack.getProcessorUsage()));if(n.length===0)return;r.details=function(l,c){let u={};for(let{id:m,value:g,level:y,direction:v}of l){var h;let b=(h=c.get(m))!==null&&h!==void 0?h:0,E=g===2?b+M("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:b;var f,p;c.set(m,E),u[m]?(g===2&&(u[m].value=g),y>u[m].level&&(u[m].level=y),v==="remote"&&(u[m].remoteUidCount+=1),u[m].totalTs=(f=c.get(m))!==null&&f!==void 0?f:0):u[m]={value:g,level:y,remoteUidCount:v==="local"?0:1,totalTs:(p=c.get(m))!==null&&p!==void 0?p:0}}return Object.keys(u).map(m=>{let{level:g,value:y,totalTs:v}=u[m];return{id:m,level:g,value:y,totalTs:v}})}(n,e);let o=Date.now(),s=o>t?o:t+1;this.requestUpload&&this.requestUpload(Pv.EXTENSION_USAGE_STATS,{usageStats:r,sendTs:s})},M("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}},Gu=class{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){R(this,"uid",void 0),R(this,"_uintid",void 0),R(this,"_trust_in_room_",!0),R(this,"_trust_audio_enabled_state_",!0),R(this,"_trust_video_enabled_state_",!0),R(this,"_trust_audio_mute_state_",!0),R(this,"_trust_video_mute_state_",!0),R(this,"_audio_muted_",!1),R(this,"_video_muted_",!1),R(this,"_audio_enabled_",!0),R(this,"_video_enabled_",!0),R(this,"_audio_added_",!1),R(this,"_video_added_",!1),R(this,"_is_pre_created",!1),R(this,"_video_pre_subscribed",!1),R(this,"_audio_pre_subscribed",!1),R(this,"_trust_video_stream_added_state_",!0),R(this,"_trust_audio_stream_added_state_",!0),R(this,"_audioTrack",void 0),R(this,"_videoTrack",void 0),R(this,"_dataChannels",[]),R(this,"_audioSSRC",void 0),R(this,"_videoSSRC",void 0),R(this,"_audioOrtc",void 0),R(this,"_videoOrtc",void 0),R(this,"_cname",void 0),R(this,"_rtxSsrcId",void 0),R(this,"_videoMid",void 0),R(this,"_audioMid",void 0),this.uid=e,this._uintid=t}},al=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({});function SHe(e,t){var r;let n;switch(t){case oe.LocalAudioTrack:n=jt.Audio;break;case oe.LocalVideoTrack:n=be(r=e._hints).call(r,hr.SCREEN_TRACK)?jt.Screen:jt.High;break;case oe.LocalVideoLowTrack:n=jt.Low}return n}function yD(e){let t=Rt();if(e.some(r=>r._bypassWebAudio))throw new ee(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new ee(k.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function UA(e,t){yD(e);let r=new _n;return e.forEach(n=>r.addAudioTrack(n)),r}var ZH,ez,tz,rz,nz,iz,az,oz,sz,lz,cz,pr;function uz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uz(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Ma=(ZH=el(al.SEND_ONLY),ez=el(al.SEND_ONLY),tz=el(),rz=el(al.RECEIVE_ONLY),nz=el(al.RECEIVE_ONLY),iz=el(al.RECEIVE_ONLY),az=el(al.RECEIVE_ONLY),oz=el(al.RECEIVE_ONLY),sz=el(al.RECEIVE_ONLY),lz=el(),cz=el(al.RECEIVE_ONLY),pr=class extends Tr{get state(){return this._state}set state(e){let t=this._state;this._state=e,this.emit(Be.StateChange,t,this._state)}constructor(e,t){super(),R(this,"isPlanB",!1),R(this,"store",void 0),R(this,"statsUploader",void 0),R(this,"sendConnection",void 0),R(this,"recvConnection",void 0),R(this,"localTrackMap",new Map),R(this,"remoteUserMap",new Map),R(this,"localDataChannels",[]),R(this,"pendingLocalTracks",[]),R(this,"pendingRemoteTracks",[]),R(this,"statsCollector",void 0),R(this,"dtlsFailedCount",0),R(this,"sendMutex",new gi("P2PChannel2-send-mutex")),R(this,"recvMutex",new gi("P2PChannel2-recv-mutex")),R(this,"_state",Lt.Disconnected),R(this,"_restartStates",["disconnected","failed"]),R(this,"reconnectInterval",void 0),R(this,"uploadUnplinkStarted",!1),R(this,"uploadDownlinkStarted",!1),R(this,"uplinkStateUploadInterval",void 0),R(this,"downlinkStatsUploadInterval",void 0),R(this,"handleMuteLocalTrack",async(r,n,i)=>{let a=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==Lt.Connected)return void i(new ee(k.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));let l=this.filterTobeMutedTracks(r);if(l.length===0)return void n();let c=l.find(p=>p[0]==="videoLowTrack");c&&c[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(l.map(p=>{let[,{id:m}]=p;return m}));let u=!1;var o,s;r.trackMediaType==="video"?u=!((o=this.localTrackMap.get(oe.LocalAudioTrack))===null||o===void 0||!o.track._muted):u=((s=this.localTrackMap.get(oe.LocalVideoTrack))===null||s===void 0?void 0:s.id)===void 0;let h=this.createMuteMessage(l);await Qt(this,Be.RequestMuteLocal,h);let f=r.trackMediaType==="video"?td.MUTE_LOCAL_VIDEO:td.MUTE_LOCAL_AUDIO;await Qt(this,Be.RequestP2PMuteLocal,{action:f,message:h,isMuteAll:u}),n()}catch(l){i(l)}finally{a()}}),R(this,"handleUnmuteLocalTrack",async(r,n,i)=>{let a=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==Lt.Connected)return void i(new ee(k.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));let o=this.filterTobeUnmutedTracks(r);if(o.length===0)return void n();await this.sendConnection.unmuteLocal(o.map(c=>{let[,{id:u}]=c;return u}));let s=this.createUnmuteMessage(o),l=r.trackMediaType==="video"?td.UNMUTE_LOCAL_VIDEO:td.UNMUTE_LOCAL_AUDIO;await Qt(this,Be.RequestP2PMuteLocal,{action:l,message:s}),n()}catch(o){i(o)}finally{a()}}),R(this,"handleUpdateVideoEncoder",async(r,n,i)=>{let a=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{let o=this.localTrackMap.get(oe.LocalVideoTrack);if(!this.sendConnection||!o||o.track!==r||this.state!==Lt.Connected)return void n();let{id:s,track:l}=o;s&&(await this.sendConnection.updateSendParameters(s,l),await this.sendConnection.updateEncoderConfig(s,l),this.emit(Be.UpdateVideoEncoder,l)),n()}catch(o){i(o)}finally{a()}}),R(this,"handleUpdateVideoSendParameters",async(r,n,i)=>{let a=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{let o=this.localTrackMap.get(oe.LocalVideoTrack);if(!this.sendConnection||!o||o.track!==r||this.state!==Lt.Connected)return void n();let{id:s,track:l}=o;s&&await this.sendConnection.updateSendParameters(s,l),n()}catch(o){i(o)}finally{a()}}),R(this,"handleReplaceTrack",async(r,n,i,a)=>{let o;_.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(r.getTrackId(),"]")),typeof a=="boolean"&&a||(o=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var s;let c=Array.from(this.localTrackMap.entries()).find(u=>{let[,{track:h}]=u;return r===h});if(!this.sendConnection||!c||c[1].id===void 0||this.state!==Lt.Connected)return void n();if(await((s=this.sendConnection)===null||s===void 0?void 0:s.replaceTrack(r,c[1].id)),c[0]===oe.LocalVideoTrack&&Rt().supportDualStreamEncoding){let u=this.localTrackMap.get(oe.LocalVideoLowTrack);if(u){let h=r._mediaStreamTrack.clone();u.track._originMediaStreamTrack.stop(),u.track._mediaStreamTrack=h,u.track._originMediaStreamTrack=h,await new ye((f,p)=>{this.handleReplaceTrack(u.track,f,p,!0)})}}n()}catch(c){i(c)}finally{var l;(l=o)===null||l===void 0||l()}}),R(this,"handleGetLocalVideoStats",r=>{r(this.statsCollector.getLocalVideoTrackStats())}),R(this,"handleGetLocalAudioStats",r=>{r(this.statsCollector.getLocalAudioTrackStats())}),R(this,"handleGetRemoteVideoStats",r=>this.statsCollector.getRemoteVideoTrackStats(r.uid)[r.uid]),R(this,"handleGetRemoteAudioStats",r=>this.statsCollector.getRemoteAudioTrackStats(r.uid)[r.uid]),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new Mie(e),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval(()=>{[this.sendConnection,this.recvConnection].forEach(r=>{r&&(r.iceConnectionState!=="disconnected"&&r.iceConnectionState!=="failed"||this.handleDisconnect(r.direction))})},M("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new ee(k.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e){throw new ee(k.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let r;try{if(t){this.recvConnection&&(_.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),r=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new XH(e,this.store,Xi.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);let n=await this.recvConnection.establish(t);return{iceParameters:n.iceParameters,dtlsParameters:n.dtlsParameters,sdp:n.sdp}}{this.state=Lt.New,this.sendConnection&&(_.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),r=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new XH(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);let n=await this.sendConnection.establish();return{iceParameters:n.iceParameters,dtlsParameters:n.dtlsParameters,sdp:n.sdp}}}finally{r&&r()}}async p2pConnect(e){if(!this.sendConnection)throw new ee(k.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Lt.Connected}async addRemoteCandidate(e,t){if(t===Xi.RECEIVE_ONLY){if(!this.sendConnection)throw new ee(k.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new ee(k.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,r){var n=this;return ml(function*(){let i=yield Nt(n.sendMutex.lock("From P2PChannel.publish"));try{if(!n.sendConnection||n.state!==Lt.Connected){n.throwIfTrackTypeNotMatch(e);let c=e.filter(u=>n.pendingLocalTracks.indexOf(u)===-1);return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(c))}n.store.pubId=n.store.pubId+1,fi.markPublishStart(n.store.clientId,n.store.pubId);let a=n.filterTobePublishedTracks(e,t,r);if(a.length===0)return void(yield Nt(n.tryToUnmuteAudio(e)));a.forEach(c=>{let{track:u,type:h}=c,f=Date.now();n.store.publish(u.getTrackId(),h===oe.LocalAudioTrack?"audio":"video",f)}),n.bindLocalTrackEvents(a);let o=yield Nt(n.sendConnection.send(a.map(c=>{let{track:u}=c;return u}),n.store.codec,n.store.audioCodec)),s=(yield Nt(o.next())).value,l=n.createGatewayPublishMessage(a,s);try{yield l}catch(c){throw o.throw(c),(c==null?void 0:c.code)===k.WS_ABORT&&a.forEach(u=>{let{track:h}=u;n.pendingLocalTracks.indexOf(h)===-1&&n.pendingLocalTracks.push(h)}),n.unbindLocalTrackEvents(a),c}yield Nt(o.next()),a.forEach(c=>{let{type:u}=c;n.statsCollector.addLocalStats(u)}),n.statsUploader.startUploadOutboundStats(),n.assignLocalTracks(a,s),a.forEach(c=>{let{track:u,type:h}=c,f=Date.now();n.store.publish(u.getTrackId(),h===oe.LocalAudioTrack?"audio":"video",void 0,f)}),n.startUploadUplinkState()}finally{i()}})()}async unpublish(e){if(!this.sendConnection||this.state!==Lt.Connected)return void(e.length===0?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter(i=>!be(e).call(e,i)));let t=this.filterTobeUnpublishedTracks(e);if(t.length===0)return;let r=t.find(i=>i[0]==="videoLowTrack");r&&r[1].track.close();let n=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map(i=>{let[,{id:a}]=i;return a})),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map(i=>{let[a,{track:o}]=i;return{type:a,track:o}})),t.forEach(i=>{let[a]=i;this.statsCollector.removeLocalStats(a)}),this.localTrackMap.size===0&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===Lt.Connected)return r&&r[1].track.close(),n;e.forEach(i=>{let a=this.pendingLocalTracks.indexOf(i);a!==-1&&this.pendingLocalTracks.splice(a,1)})}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);let e=()=>{let t=[],r=[];Array.from(this.localTrackMap.entries()).forEach(n=>{let[i,{track:a,ssrcs:o}]=n,s={stream_type:SHe(a,i),ssrcs:o};a._muted||!a._enabled?t.push(s):r.push(s)}),t.length>0&&t.forEach(n=>{Qt(this,Be.RequestMuteLocal,[n])}),r.length>0&&r.forEach(n=>{Qt(this,Be.RequestUnmuteLocal,[n])})};e(),this.uplinkStateUploadInterval=window.setInterval(()=>{e()},3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return ml(function*(){throw new ee(k.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")})()}async republish(){this.pendingLocalTracks.length>0&&(_.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await ii(this,Be.RequestRePublish,this.pendingLocalTracks),this.emit(Be.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new ee(k.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,r,n){var i;if(!this.recvConnection)throw new ee(k.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if((i=this.remoteUserMap.get(e))!==null&&i!==void 0&&i.has(t))return;let{track:a,mid:o,transceiver:s}=await this.recvConnection.receive(t,[{ssrcId:r}],String(e.uid),n);t===Ne.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(a):(e._audioTrack=new bm(a,e.uid,e._uintid,this.store),_.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),s&&e._audioTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=r,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(a):(e._videoTrack=new vm(a,e.uid,e._uintid,this.store),_.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),s&&e._videoTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._videoTrack));let l=this.remoteUserMap.get(e);l?l.set(t,o):this.remoteUserMap.set(e,new Map([[t,o]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();let c=this.pendingRemoteTracks.findIndex(u=>{let{user:h,kind:f}=u;return h.uid===e.uid&&t===f});c!==-1&&(this.pendingRemoteTracks.splice(c,1),this.emit(Be.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,r,n){if(!this.recvConnection)throw new ee(k.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:r}],String(e.uid),n)}async unsubscribe(e,t,r){let n=this.pendingRemoteTracks.filter(a=>{let{user:o,kind:s}=a;return t!==void 0?o.uid===e.uid&&t===s:o.uid===e.uid});if(n.forEach(a=>{let o=this.pendingRemoteTracks.indexOf(a);this.pendingRemoteTracks.splice(o,1)}),this.recvConnection||r||n.forEach(a=>{let{kind:o}=a;var s;if(o===Ne.AUDIO)(s=e._audioTrack)===null||s===void 0||s._destroy(),e._audioTrack=void 0;else if(o===Ne.VIDEO){var l;(l=e._videoTrack)===null||l===void 0||l._destroy(),e._videoTrack=void 0}}),!this.recvConnection)return;let i=this.filterTobeUnSubscribedTracks(e,t);i.length!==0&&(await this.recvConnection.stopReceiving(i.map(a=>{let[,{id:o}]=a;return o})),this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),i.forEach(a=>{let[o,{kind:s}]=a;var l,c;if(s===Ne.VIDEO&&o._videoSSRC&&((l=this.recvConnection)===null||l===void 0||l.setStatsRemoteVideoIsReady(o._videoSSRC,!1)),s===Ne.VIDEO)this.unbindRemoteTrackEvents(o._videoTrack),r||((c=o._videoTrack)===null||c===void 0||c._destroy(),o._videoTrack=void 0);else if(s===Ne.AUDIO){var u;this.unbindRemoteTrackEvents(o._audioTrack),!r&&((u=o._audioTrack)===null||u===void 0||u._destroy(),o._audioTrack=void 0)}}),i.forEach(a=>{let[,{kind:o}]=a;Qt(this,Be.RequestP2PMuteRemote,o)}))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let e=()=>Array.from(this.remoteUserMap.entries()).forEach(t=>{let[,r]=t;[Ne.VIDEO,Ne.AUDIO].forEach(n=>{r.has(n)?Qt(this,Be.RequestP2PUnmuteRemote,n):Qt(this,Be.RequestP2PMuteRemote,n)})});e(),this.downlinkStatsUploadInterval=window.setInterval(()=>{e()},3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new ee(k.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new ee(k.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new ee(k.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new ee(k.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;let r=this.remoteUserMap.get(e);if(!r)return void _.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!r.get(t))return void _.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));let n=t===Ne.VIDEO?e._videoSSRC:e._audioSSRC;n!==void 0&&this.recvConnection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;let r=this.remoteUserMap.get(e);if(!r)return void _.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."));r.get(t)||_.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."))}getAllTracks(e){let t=this.localTrackMap.get(oe.LocalAudioTrack);if((t==null?void 0:t.track)instanceof _n){let r=t.track;return Array.from(this.localTrackMap.entries()).filter(n=>{let[i]=n;return i!==oe.LocalAudioTrack}).filter(n=>{let[i]=n;return!(e&&i===oe.LocalVideoLowTrack)}).map(n=>{let[,{track:i}]=n;return i}).concat(r.trackList)}return Array.from(this.localTrackMap.entries()).filter(r=>{let[n]=r;return!(e&&n===oe.LocalVideoLowTrack)}).map(r=>{let[,{track:n}]=r;return n})}reportPublishEvent(e,t,r,n,i){if(e){let o=this.localTrackMap.get(oe.LocalAudioTrack),s=n?this.localTrackMap.get(oe.LocalVideoLowTrack):this.localTrackMap.get(oe.LocalVideoTrack);xe.publish(this.store.sessionId,{eventElapse:fi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:o==null?void 0:o.track.getTrackLabel(),videoName:s==null?void 0:s.track.getTrackLabel(),screenshare:(s==null?void 0:s.track._hints.indexOf(hr.SCREEN_TRACK))!==-1,audio:!!o,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var a;r||(r=[]);let o=r.find(l=>l instanceof Ir),s=n?(a=this.localTrackMap.get(oe.LocalVideoTrack))===null||a===void 0?void 0:a.track:r.find(l=>l instanceof sr);xe.publish(this.store.sessionId,{eventElapse:fi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:o==null?void 0:o.getTrackLabel(),videoName:s==null?void 0:s.getTrackLabel(),screenshare:(s==null?void 0:s._hints.indexOf(hr.SCREEN_TRACK))!==-1,audio:!!o,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,r,n){let i=n===Ne.VIDEO?r._videoSSRC:r._audioSSRC;i&&xe.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===Ne.VIDEO,audio:n===Ne.AUDIO,peerid:r.uid,subscribeRequestid:n===Ne.VIDEO?r._videoSSRC:r._audioSSRC,p2pid:this.store.p2pId,eventElapse:fi.measureFromSubscribeStart(this.store.clientId,i)})}reset(){_.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new gi("P2PChannel2-send-mutex"),this.sendMutex=new gi("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();let e=this.localTrackMap.get(oe.LocalAudioTrack);if((e==null?void 0:e.track)instanceof _n){if(e.track.trackList.length>0){let t=e.track;e.track.trackList.forEach(r=>{t.removeAudioTrack(r)})}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=Lt.Disconnected}getStats(e){var t,r;return e?(r=this.recvConnection)===null||r===void 0?void 0:r.getStats():(t=this.sendConnection)===null||t===void 0?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return((t=this.recvConnection)===null||t===void 0?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){let e=this.localTrackMap.get(oe.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){let e=this.localTrackMap.get(oe.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){let t=this.localTrackMap.get(e);return t&&t.track instanceof sr||t&&t.track instanceof Ir?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}getRemoteMedia(e){var t;let r=Array.from(eo(t=this.remoteUserMap).call(t)).find(n=>n.uid===e);return r?{audioTrack:r.audioTrack,audioSSRC:r._audioSSRC,videoTrack:r.videoTrack,videoSSRC:r._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(r=>{let[n]=r;return{uid:n.uid,level:n.audioTrack?100*n.audioTrack._source.getAccurateVolumeLevel():0}}),t=this.localTrackMap.get(oe.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Bb(e).call(e,(r,n)=>r.level-n.level),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(_.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=Lt.Reconnecting,M("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t]=e;var r;t._videoTrack&&t._videoTrack._player&&((r=t._videoTrack._player.getVideoElement())===null||r===void 0||r.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())}),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(e=>{var t;let[r,{track:n}]=e;switch(r){case oe.LocalVideoTrack:be(t=n._hints).call(t,hr.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case oe.LocalAudioTrack:n instanceof _n?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);case oe.LocalVideoLowTrack:}}),this.emit(Be.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;Array.from(eo(r).call(r)).forEach(n=>{this.setPendingRemoteMedia(t,n)}),this.emit(Be.MediaReconnectStart,t.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),_.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(let r of this.pendingRemoteTracks){let{user:n,kind:i}=r;if((e instanceof Gu?e.uid:e)===n.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let r,n;if(e===Xi.SEND_ONLY){if(!this.sendConnection)throw new ee(k.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");r=await this.sendMutex.lock("From P2PChannel.restartICE"),n=this.sendConnection}else{if(!this.recvConnection)throw new ee(k.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");r=await this.recvMutex.lock("From P2PChannel.restartICE"),n=this.recvConnection}try{if(t){let i=await n.restartICE(t);return n.isInRestartIce=!1,i}{let i=await n.restartICE();if(i){let a=await ii(this,Be.RequestP2PRestartICE,{direction:Xi.RECEIVE_ONLY,iceParameter:i});await n.restartICE(a),n.isInRestartIce=!1}}}finally{r()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;let e=this.sendConnection.getStats(),t=this.localTrackMap.get(oe.LocalVideoTrack),r=this.localTrackMap.get(oe.LocalAudioTrack),n=e.videoSend.find(p=>{var m;return p.ssrc===(t==null||(m=t.ssrcs)===null||m===void 0?void 0:m[0].ssrcId)}),i=e.audioSend.find(p=>{var m;return p.ssrc===(r==null||(m=r.ssrcs)===null||m===void 0?void 0:m[0].ssrcId)});if(!n||!i)return 1;let a=Bo(this,Be.NeedSignalRTT),o=n?n.rttMs:void 0,s=i?i.rttMs:void 0,l=o&&s?(o+s)/2:o||s,c=(l&&a?(l+a)/2:l||a)||0,u=100*e.sendPacketLossRate*.7/50+.3*c/1500,h=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,f=t==null?void 0:t.track;if(f&&f._encoderConfig&&f._hints.indexOf(hr.SCREEN_TRACK)===-1){let p=f._encoderConfig.bitrateMax,m=e.bitrate.actualEncoded;if(p&&m){let g=(1e3*p-m)/(1e3*p);return One[g<.15?0:g<.3?1:g<.45?2:g<.6?3:4][h]}}return h}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;let e=this.recvConnection.getStats(),t=0;return Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n]=r,i=n._audioSSRC,a=n._videoSSRC,o=e.audioRecv.find(m=>m.ssrc===i),s=e.videoRecv.find(m=>m.ssrc===a);if(!o&&!s)return void(t+=1);let l=Bo(this,Be.NeedSignalRTT),c=e.rtt,u=(c&&l?(c+l)/2:c||l)||0,h=o?o.jitterMs:void 0,f=e.recvPacketLossRate,p=.7*f*100/50+.3*u/1500;h&&(p=.6*f*100/50+.2*u/1500+.2*h/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5}),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new ye((t,r)=>{this.handleMuteLocalTrack(e,t,r)})}filterTobePublishedTracks(e,t,r){let n=[],i=Rt(),a=this.getAllTracks();e=Yp(e=e.filter(l=>a.indexOf(l)===-1));let o=!1,s=!1;for(let l of e){if(l instanceof sr&&(this.localTrackMap.has(oe.LocalVideoTrack)||o?new ee(k.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:l,type:oe.LocalVideoTrack}),o=!0),t)){let c=this.getLowVideoTrack(l,r);n.push({track:c,type:oe.LocalVideoLowTrack})}if(l instanceof Ir){let c=this.localTrackMap.get(oe.LocalAudioTrack);if(c){if(!(c.track instanceof _n))throw new ee(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(l._bypassWebAudio)throw new ee(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");c.track.addAudioTrack(l),this.bindLocalAudioTrackEvents(l,!0)}else if(s){let u=n.find(h=>{let{type:f}=h;return f===oe.LocalAudioTrack});if(!(u.track instanceof _n))throw new ee(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(l._bypassWebAudio)throw new ee(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");u.track.addAudioTrack(l)}else{if(!i.webAudioMediaStreamDest||l instanceof _n||l._bypassWebAudio)n.push({track:l,type:oe.LocalAudioTrack});else{let u=new _n;u.addAudioTrack(l),n.push({track:u,type:oe.LocalAudioTrack})}s=!0}}}return n}filterTobeUnpublishedTracks(e){let t=[],r=this.getAllTracks();e=Yp(e=e.filter(n=>r.indexOf(n)!==-1));for(let n of e){if(n instanceof Ir){let i=this.localTrackMap.get(oe.LocalAudioTrack);if(!i)continue;i.track instanceof _n?(i.track.removeAudioTrack(n),this.unbindLocalAudioTrackEvents(n),i.track.trackList.length===0&&(t.push([oe.LocalAudioTrack,i]),i.track.close())):t.push([oe.LocalAudioTrack,i])}if(n instanceof sr){let i=this.localTrackMap.get(oe.LocalVideoTrack);if(!i)continue;t.push([oe.LocalVideoTrack,i]);let a=this.localTrackMap.get(oe.LocalVideoLowTrack);a&&t.push([oe.LocalVideoLowTrack,a])}}return t}bindLocalTrackEvents(e){e.forEach(t=>{let{track:r,type:n}=t;switch(n){case oe.LocalVideoTrack:r.addListener(we.GET_STATS,this.handleGetLocalVideoStats),r.addListener(we.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(we.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(we.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.addListener(we.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.addListener(we.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.addListener(we.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(we.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case oe.LocalAudioTrack:this.bindLocalAudioTrackEvents(r);case oe.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){e instanceof _n?e.trackList.forEach(r=>{r.addListener(we.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(we.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(we.GET_STATS,this.handleGetLocalAudioStats),r.addListener(we.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(we.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(we.GET_STATS,this.handleGetLocalAudioStats),e.addListener(we.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(we.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(we.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(we.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(we.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(t=>{let[r,{track:n}]=t;return{track:n,type:r}})),e.forEach(t=>{let{track:r,type:n}=t;switch(n){case oe.LocalVideoTrack:r.off(we.GET_STATS,this.handleGetLocalVideoStats),r.off(we.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(we.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(we.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.off(we.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.off(we.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.off(we.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(we.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case oe.LocalAudioTrack:this.unbindLocalAudioTrackEvents(r);case oe.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof _n?e.trackList.forEach(t=>{t.off(we.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(we.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(we.GET_STATS,this.handleGetLocalAudioStats),t.off(we.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(we.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(we.GET_STATS,this.handleGetLocalAudioStats),e.off(we.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(we.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(we.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(we.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(we.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof vm&&t.addListener(we.GET_STATS,r=>{r(this.handleGetRemoteVideoStats(e))}),t instanceof bm&&t.addListener(we.GET_STATS,r=>{r(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(we.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;r.has(Ne.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),r.has(Ne.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)})}createGatewayPublishMessage(e,t){return e.map((r,n)=>{var i;let a,{track:o,type:s}=r;switch(s){case oe.LocalAudioTrack:a=jt.Audio;break;case oe.LocalVideoTrack:a=be(i=o._hints).call(i,hr.SCREEN_TRACK)?jt.Screen:jt.High;break;case oe.LocalVideoLowTrack:a=jt.Low}return{kind:s===oe.LocalAudioTrack?Ne.AUDIO:Ne.VIDEO,stream_type:a,mid:t[n].id,ssrcs:t[n].localSSRC,isMuted:o.muted||!o.enabled}})}createGatewayUnpublishMessage(e){return e.map(t=>{var r;let n,[i,{track:a,ssrcs:o,id:s}]=t;switch(i){case oe.LocalVideoTrack:n=be(r=a._hints).call(r,hr.SCREEN_TRACK)?jt.Screen:jt.High;break;case oe.LocalAudioTrack:n=jt.Audio;break;case oe.LocalVideoLowTrack:n=jt.Low}return{stream_type:n,ssrcs:o,mid:s}})}assignLocalTracks(e,t){e.forEach((r,n)=>{let{track:i,type:a}=r;this.localTrackMap.set(a,{track:i,id:t[n].id,ssrcs:t[n].localSSRC})})}withdrawLocalTracks(e){e.forEach(t=>{let[r]=t;this.localTrackMap.delete(r)})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var r;_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(Be.PeerConnectionStateChange,t),t!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),t==="connected"&&(e.isInRestartIce=!1),be(r=this._restartStates).call(r,t)&&!e.isInRestartIce&&(t==="disconnected"&&await zn(800),e.iceConnectionState!=="disconnected"&&e.iceConnectionState!=="failed"||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=t=>{t!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(t,")")),xe.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:t,tag:Nr.TRACER}).onSuccess(),this.emit(Be.IceConnectionStateChange,t)},e.onICETransportStateChange=t=>{_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(t,")"))},e.onDTLSTransportStateChange=t=>{_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(t,")"))},e.onDTLSTransportError=t=>{_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(t,")"))},e.onFirstAudioDecoded=t=>{var r;let n=Array.from(eo(r=this.remoteUserMap).call(r)).find(a=>a._audioSSRC===t);var i;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),(i=n.audioTrack)===null||i===void 0||i.emit(ym.FIRST_FRAME_DECODED),xe.firstRemoteFrame(this.store.sessionId,Un.FIRST_AUDIO_DECODE,Er.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:fi.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=t=>{var r;let n=Array.from(eo(r=this.remoteUserMap).call(r)).find(i=>i._audioSSRC===t);n&&xe.firstRemoteFrame(this.store.sessionId,Un.FIRST_AUDIO_RECEIVED,Er.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:fi.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(t,r,n)=>{this.reportVideoFirstFrameDecoded(t,r,n)},e.onFirstVideoReceived=t=>{var r;let n=Array.from(eo(r=this.remoteUserMap).call(r)).find(i=>i._videoSSRC===t);n&&xe.firstRemoteFrame(this.store.sessionId,Un.FIRST_VIDEO_RECEIVED,Er.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:fi.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(t,r)=>{let n=t.candidateType==="relay",i=r.candidateType==="relay";r.candidateType!=="unknown"&&n===i||this.emit(Be.ConnectionTypeChange,n),_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(rd(r))," -> ").concat(JSON.stringify(rd(t)),")"))},e.onSelectedRemoteCandidateChanged=(t,r)=>{_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(rd(r))," -> ").concat(JSON.stringify(rd(t)),")"))},e.onFirstVideoDecodedTimeout=t=>{this.reportVideoFirstFrameDecoded(t,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(Be.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){let t=e===Xi.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,_.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===Xi.SEND_ONLY?this.restartICE(e):ii(this,Be.RequestP2PRestartICE,{direction:Xi.SEND_ONLY}))}filterTobeMutedTracks(e){let t=[];if(this.getAllTracks().indexOf(e)===-1)return t;let r=this.localTrackMap.get(oe.LocalAudioTrack);if(e instanceof Ir&&(r==null?void 0:r.track)instanceof _n)return r.track.isActive||t.push([oe.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:a}]=i;return e===a});if(n&&(t.push(n),n[0]===oe.LocalVideoTrack)){let i=this.localTrackMap.get(oe.LocalVideoLowTrack);i&&t.push([oe.LocalVideoLowTrack,i])}return t}filterTobeUnmutedTracks(e){let t=[],r=this.localTrackMap.get(oe.LocalAudioTrack);if(e instanceof Ir&&(r==null?void 0:r.track)instanceof _n)return r.track.isActive&&t.push([oe.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:a}]=i;return e===a});if(n)if(n[0]===oe.LocalVideoTrack){t.push(n);let i=this.localTrackMap.get(oe.LocalVideoLowTrack);i&&t.push([oe.LocalVideoLowTrack,i])}else t.push(n);return t}createMuteMessage(e){return e.map(t=>{var r;let n,[i,{track:a,ssrcs:o,id:s}]=t;switch(i){case oe.LocalAudioTrack:n=jt.Audio;break;case oe.LocalVideoTrack:n=be(r=a._hints).call(r,hr.SCREEN_TRACK)?jt.Screen:jt.High;break;case oe.LocalVideoLowTrack:n=jt.Low}return{stream_type:n,ssrcs:o,mid:s}})}createUnmuteMessage(e){return e.map(t=>{var r;let n,[i,{track:a,ssrcs:o,id:s}]=t;switch(i){case oe.LocalAudioTrack:n=jt.Audio;break;case oe.LocalVideoTrack:n=be(r=a._hints).call(r,hr.SCREEN_TRACK)?jt.Screen:jt.High;break;case oe.LocalVideoLowTrack:n=jt.Low}return{stream_type:n,ssrcs:o,mid:s}})}filterTobeUnSubscribedTracks(e,t){let r=[],n=this.remoteUserMap.get(e);if(!n)return r;if(t){let i=n.get(t);if(!i)return r;r.push([e,{kind:t,id:i}])}else Array.from(n.entries()).forEach(i=>{let[a,o]=i;r.push([e,{kind:a,id:o}])});return r}createUnsubscribeMessage(e){let t=[];return e.forEach(r=>{let[n,{kind:i,id:a}]=r;switch(i){case Ne.VIDEO:return void(n._videoSSRC&&t.push({stream_type:Ne.VIDEO,ssrcId:n._videoSSRC}));case Ne.AUDIO:return void(n._audioSSRC&&t.push({stream_type:Ne.AUDIO,ssrcId:n._audioSSRC}))}}),t}withdrawRemoteTracks(e){e.forEach(t=>{let[r,{kind:n}]=t,i=this.remoteUserMap.get(r);i&&(i.delete(n),Array.from(i.entries()).length===0&&this.remoteUserMap.delete(r))})}async updateBitrateLimit(e){let t=this.localTrackMap.get(oe.LocalVideoTrack),r=this.localTrackMap.get(oe.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),r&&e.low_stream_uplink&&await r.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){let e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return e!=="connected"&&t!=="connected"}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof Ir){let r=this.filterTobeUnmutedTracks(e[t]);if(r.length===0)continue;let n=this.createUnmuteMessage(r);return void await Qt(this,Be.RequestUnmuteLocal,n)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter(e=>{let[,{ssrcs:t}]=e;return!!t}),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!((t=this.recvConnection)===null||t===void 0||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Be.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(Be.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await zn(EM(this.dtlsFailedCount,Zr)),this.emit(Be.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(oe.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof sr)}throwIfTrackTypeNotMatch(e){if(e.filter(t=>t instanceof sr).length>1)throw new ee(k.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(t=>t instanceof Ir).length>1&&(e.some(t=>t instanceof Ir&&t._bypassWebAudio)||!Rt().webAudioMediaStreamDest))throw new ee(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(let t of e){if(t instanceof sr&&this.pendingLocalTracks.some(r=>r instanceof sr))throw new ee(k.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof Ir&&this.pendingLocalTracks.some(r=>r instanceof Ir)&&(!Rt().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some(r=>r instanceof Ir&&r._bypassWebAudio)))throw new ee(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){let r=!M("DISABLE_DUAL_STREAM_USE_ENCODING")&&Rt().supportDualStreamEncoding,n=xE(xE({},{width:160,height:120,framerate:15,bitrate:50}),t),i;i=r?e._mediaStreamTrack.clone():gD(e,n);let a=rr(8,"track-low-"),o=new sr(i,xE(xE({},r&&{scaleResolutionDownBy:rD(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,a);return o.on(Hh.TRANSCEIVER_UPDATED,s=>{e._updateRtpTransceiver(s,Qm.LOW_STREAM)}),o._hints.push(hr.LOW_STREAM),e.addListener(we.NEED_CLOSE,()=>{o.close()}),o}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,r,n){var i;let a=Array.from(eo(i=this.remoteUserMap).call(i)).find(o=>o._videoSSRC===e);if(a){n||this.store.subscribe(a.uid,"video",void 0,void 0,void 0,void 0,Date.now());let o=this.store.keyMetrics,s=o.subscribe.find(l=>l.userId===a.uid&&l.type==="video");xe.firstRemoteVideoDecode(this.store.sessionId,Un.FIRST_VIDEO_DECODE,Er.FIRST_VIDEO_DECODE,{peer:a._uintid,videowidth:t,videoheight:r,subscribeElapse:fi.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:o.requestAPEnd||0,apStart:o.requestAPStart||0,joinGwEnd:o.joinGatewayEnd||0,joinGwStart:o.joinGatewayStart||0,pcEnd:o.peerConnectionEnd||0,pcStart:o.peerConnectionStart||0,subscriberEnd:(s==null?void 0:s.subscribeEnd)||0,subscriberStart:(s==null?void 0:s.subscribeStart)||0,videoAddNotify:(s==null?void 0:s.streamAdded)||0,state:n?1:0})}}async remoteMediaSsrcChanged(e,t,r){if(!this.recvConnection)return!1;let n=this.remoteUserMap.get(e);if(!n)return!1;let i=n.get(t);if(!i)return!1;let a=await this.recvConnection.getRemoteSSRC(i);return a!==void 0&&a!==r}isPreSubScribe(e){return!1}async publishDataChannel(e){throw new ee(k.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new ee(k.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new ee(k.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new ee(k.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new ee(k.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new ee(k.NOT_SUPPORTED)}async preConnect(e){throw new ee(k.NOT_SUPPORTED)}getEstablishParams(){throw new ee(k.NOT_SUPPORTED)}async reSubscribe(e){throw new ee(k.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new ee(k.NOT_SUPPORTED)}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(e=>{let[t,{track:r}]=e;t===oe.LocalVideoLowTrack?r._updateRtpTransceiver(void 0,Qm.LOW_STREAM):r._updateRtpTransceiver(void 0)})}},Se(pr.prototype,"p2pConnect",[ZH],Object.getOwnPropertyDescriptor(pr.prototype,"p2pConnect"),pr.prototype),Se(pr.prototype,"unpublish",[ez],Object.getOwnPropertyDescriptor(pr.prototype,"unpublish"),pr.prototype),Se(pr.prototype,"unpublishLowStream",[tz],Object.getOwnPropertyDescriptor(pr.prototype,"unpublishLowStream"),pr.prototype),Se(pr.prototype,"subscribe",[rz],Object.getOwnPropertyDescriptor(pr.prototype,"subscribe"),pr.prototype),Se(pr.prototype,"mockSubscribe",[nz],Object.getOwnPropertyDescriptor(pr.prototype,"mockSubscribe"),pr.prototype),Se(pr.prototype,"unsubscribe",[iz],Object.getOwnPropertyDescriptor(pr.prototype,"unsubscribe"),pr.prototype),Se(pr.prototype,"muteRemote",[az],Object.getOwnPropertyDescriptor(pr.prototype,"muteRemote"),pr.prototype),Se(pr.prototype,"unmuteRemote",[oz],Object.getOwnPropertyDescriptor(pr.prototype,"unmuteRemote"),pr.prototype),Se(pr.prototype,"hasRemoteMediaWithLock",[sz],Object.getOwnPropertyDescriptor(pr.prototype,"hasRemoteMediaWithLock"),pr.prototype),Se(pr.prototype,"disconnectForReconnect",[lz],Object.getOwnPropertyDescriptor(pr.prototype,"disconnectForReconnect"),pr.prototype),Se(pr.prototype,"remoteMediaSsrcChanged",[cz],Object.getOwnPropertyDescriptor(pr.prototype,"remoteMediaSsrcChanged"),pr.prototype),pr);function el(e){return function(t,r,n){let i=t[r];if(typeof i!="function")throw new Error("Cannot use mutex on object property.");return n.value=async function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];switch(e){case al.SEND_ONLY:{let l=await this.sendMutex.lock("From P2PChannel2.".concat(r));try{return await i.apply(this,o)}finally{l()}}case al.RECEIVE_ONLY:{let l=await this.recvMutex.lock("From P2PChannel2.".concat(r));try{return await i.apply(this,o)}finally{l()}}default:{let l=await this.sendMutex.lock("From P2PChannel2.".concat(r)),c=await this.recvMutex.lock("From P2PChannel2.".concat(r));try{return await i.apply(this,o)}finally{l(),c()}}}},n}}function dz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dz(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Uie=class vD{constructor(t){R(this,"store",void 0),R(this,"onStatsException",void 0),R(this,"onUploadPublishDuration",void 0),R(this,"onStatsChanged",void 0),R(this,"localStats",new Map),R(this,"remoteStats",new Map),R(this,"updateStatsInterval",void 0),R(this,"trafficStats",void 0),R(this,"trafficStatsPeerList",[]),R(this,"uplinkStats",void 0),R(this,"exceptionMonitor",void 0),R(this,"p2pChannel",void 0),R(this,"scalabilityMode",ZP.L1T1),R(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=t,this.exceptionMonitor=new aHe,this.exceptionMonitor.on("exception",(r,n,i)=>{this.onStatsException&&this.onStatsException(r,n,i)})}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(oe.LocalAudioTrack)||nh({},aD)}getLocalVideoTrackStats(){return this.localStats.get(oe.LocalVideoTrack)||nh({},oD)}getRemoteAudioTrackStats(t){let r=(a,o)=>{if(!this.trafficStats)return o;let s=this.trafficStats.peer_delay.find(l=>l.peer_uid===a);return s&&(o.publishDuration=s.B_ppad+(Date.now()-this.trafficStats.timestamp)),o},n={};if(t){var i;let a=(i=this.remoteStats.get(t))===null||i===void 0?void 0:i.audioStats;a&&(n[t]=r(t,a))}else Array.from(this.remoteStats.entries()).forEach(a=>{let[o,{audioStats:s}]=a;s&&(n[o]=r(o,s))});return n}getRemoteNetworkQualityStats(t){let r={};if(t){var n;let i=(n=this.remoteStats.get(t))===null||n===void 0?void 0:n.networkStats;i&&(r[t]=i)}else Array.from(this.remoteStats.entries()).forEach(i=>{let[a,{networkStats:o}]=i;o&&(r[a]=o)});return r}getRemoteVideoTrackStats(t){let r=(a,o)=>{if(!this.trafficStats)return o;let s=this.trafficStats.peer_delay.find(l=>l.peer_uid===a);return s&&(o.publishDuration=s.B_ppvd+(Date.now()-this.trafficStats.timestamp)),o},n={};if(t){var i;let a=(i=this.remoteStats.get(t))===null||i===void 0?void 0:i.videoStats;a&&(n[t]=r(t,a))}else Array.from(this.remoteStats.entries()).forEach(a=>{let[o,{videoStats:s}]=a;s&&(n[o]=r(o,s))});return n}getRTCStats(){let t=0,r=0,n=0,i=0,a=this.localStats.get(oe.LocalAudioTrack);a&&(t+=a.sendBytes,r+=a.sendBitrate);let o=this.localStats.get(oe.LocalVideoTrack);o&&(t+=o.sendBytes,r+=o.sendBitrate);let s=this.localStats.get(oe.LocalVideoLowTrack);s&&(t+=s.sendBytes,r+=s.sendBitrate),this.remoteStats.forEach(c=>{let{audioStats:u,videoStats:h}=c;u&&(n+=u.receiveBytes,i+=u.receiveBitrate),h&&(n+=h.receiveBytes,i+=h.receiveBitrate)});let l=1;return this.trafficStats&&(l+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:l,SendBitrate:r,SendBytes:t,RecvBytes:n,RecvBitrate:i,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(t){this.localStats.set(t,void 0)}removeLocalStats(t){t?this.localStats.delete(t):this.localStats.clear()}addRemoteStats(t){this.remoteStats.set(t,{})}removeRemoteStats(t){t?this.remoteStats.delete(t):this.remoteStats.clear()}addP2PChannel(t){this.p2pChannel=t}updateTrafficStats(t){t.peer_delay=t.peer_delay.filter(r=>r.B_ppad!==void 0||r.B_ppvd!==void 0),t.peer_delay.filter(r=>this.trafficStatsPeerList.indexOf(r.peer_uid)===-1).forEach(r=>{var n;let i=(n=this.p2pChannel)===null||n===void 0?void 0:n.getRemoteMedia(r.peer_uid),a=i!=null&&i.videoSSRC?fi.measureFromSubscribeStart(this.store.clientId,i.videoSSRC):0,o=i!=null&&i.audioSSRC?fi.measureFromSubscribeStart(this.store.clientId,i.audioSSRC):0;r.B_ppad!==void 0&&r.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(r.peer_uid,r.B_ppad,r.B_ppvd,a>o?a:o),this.trafficStatsPeerList.push(r.peer_uid))}),this.trafficStats=t}updateUplinkStats(t){this.uplinkStats&&this.uplinkStats.B_fir!==t.B_fir&&_.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(t.B_fir)),this.uplinkStats=t}static isRemoteVideoFreeze(t,r,n){if(!t)return!1;let i=!!n&&r.framesDecodeFreezeTime>n.framesDecodeFreezeTime,a=!n||r.framesDecodeCount>n.framesDecodeCount;return i||!a}static isRemoteAudioFreeze(t){return!!t&&t._isFreeze()}isLocalVideoFreeze(t){return!(!t.inputFrame||!t.sentFrame)&&t.inputFrame.frameRate>5&&t.sentFrame.frameRate<3}updateLocalStats(t){Array.from(this.localStats.entries()).forEach(r=>{let[n,i]=r;switch(n){case oe.LocalVideoTrack:case oe.LocalVideoLowTrack:{let o=i,s=nh({},oD),l=t.getStats(),c=t.getLocalMedia(n);if(l){let u=l.videoSend.find(h=>h.ssrc===(c==null?void 0:c.ssrcs[0].ssrcId));if(u){let h=t.getLocalVideoSize(),f=t.getEncoderConfig(oe.LocalVideoTrack);u.codec!=="H264"&&u.codec!=="H265"&&u.codec!=="VP8"&&u.codec!=="VP9"&&u.codec!=="AV1X"&&u.codec!=="AV1"||(s.codecType=u.codec),s.sendBytes=u.bytes,s.sendBitrate=o?8*Math.max(0,s.sendBytes-o.sendBytes):0,u.inputFrame?(s.captureFrameRate=u.inputFrame.frameRate,s.captureResolutionHeight=u.inputFrame.height,s.captureResolutionWidth=u.inputFrame.width):h&&(s.captureResolutionWidth=h.width,s.captureResolutionHeight=h.height),u.sentFrame?(s.sendFrameRate=u.sentFrame.frameRate,s.sendResolutionHeight=u.sentFrame.height,s.sendResolutionWidth=u.sentFrame.width):h&&(s.sendResolutionWidth=h.width,s.sendResolutionHeight=h.height),u.avgEncodeMs&&(s.encodeDelay=u.avgEncodeMs),f&&f.bitrateMax&&(s.targetSendBitrate=1e3*f.bitrateMax),s.sendPackets=u.packets,s.sendPacketsLost=u.packetsLost,s.sendJitterMs=u.jitterMs,s.sendRttMs=u.rttMs,s.totalDuration=o?o.totalDuration+1:1,s.totalFreezeTime=o?o.totalFreezeTime:0,this.isLocalVideoFreeze(u)&&(s.totalFreezeTime+=1),u.scalabilityMode&&this.scalabilityMode!==u.scalabilityMode&&(_.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(u.scalabilityMode)),this.scalabilityMode=u.scalabilityMode)}this.trafficStats&&(s.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var a;this.localStats.set(n,s),((o==null?void 0:o.sendResolutionWidth)!==s.sendResolutionWidth||(o==null?void 0:o.sendResolutionHeight)!==s.sendResolutionHeight)&&((a=this.onStatsChanged)===null||a===void 0||a.call(this,"resolution",{width:s.sendResolutionWidth,height:s.sendResolutionHeight})),s&&c&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,c.track,s);break}case oe.LocalAudioTrack:{let o=i,s=nh({},aD),l=t.getStats(),c=t.getLocalMedia(n);if(l){let u=l.audioSend.find(h=>h.ssrc===(c==null?void 0:c.ssrcs[0].ssrcId));if(u){if(u.codec!=="opus"&&u.codec!=="aac"&&u.codec!=="PCMU"&&u.codec!=="PCMA"&&u.codec!=="G722"||(s.codecType=u.codec),u.inputLevel)s.sendVolumeLevel=Math.round(32767*u.inputLevel);else{let h=t.getLocalAudioVolume();h&&(s.sendVolumeLevel=Math.round(32767*h))}s.sendBytes=u.bytes,s.sendPackets=u.packets,s.sendPacketsLost=u.packetsLost,s.sendJitterMs=u.jitterMs,s.sendRttMs=u.rttMs,s.sendBitrate=o?8*Math.max(0,s.sendBytes-o.sendBytes):0}}this.trafficStats&&(s.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(oe.LocalAudioTrack,s),s&&c&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,c.track,s);break}}})}updateRemoteStats(t){Array.from(this.remoteStats.entries()).forEach(r=>{var n,i;let[a,{videoStats:o,audioStats:s,videoPcStats:l}]=r,c=s,u=o,h=l,f=nh({},Kne),p=nh({},qne),m=nh({},j7e),{audioTrack:g,videoTrack:y,audioSSRC:v,videoSSRC:b}=t.getRemoteMedia(a),E;E=t instanceof Ma?t.getStats(!0):t.getStats();let S=(n=E)===null||n===void 0?void 0:n.audioRecv.find(L=>L.ssrc===v),I=(i=E)===null||i===void 0?void 0:i.videoRecv.find(L=>L.ssrc===b),N=this.trafficStats&&this.trafficStats.peer_delay.find(L=>L.peer_uid===a);if(S&&(S.codec!=="opus"&&S.codec!=="aac"&&S.codec!=="PCMU"&&S.codec!=="PCMA"&&S.codec!=="G722"||(f.codecType=S.codec),S.outputLevel?f.receiveLevel=Math.round(32767*S.outputLevel):g&&(f.receiveLevel=Math.round(32767*g.getVolumeLevel())),f.receiveBytes=S.bytes,f.receivePackets=S.packets,f.receivePacketsLost=S.packetsLost,f.receivePacketsDiscarded=S.packetsDiscarded,f.packetLossRate=f.receivePacketsLost/(f.receivePackets+f.receivePacketsLost),f.receiveBitrate=c?8*Math.max(0,f.receiveBytes-c.receiveBytes):0,f.totalDuration=c?c.totalDuration+1:1,f.totalFreezeTime=c?c.totalFreezeTime:0,f.freezeRate=f.totalFreezeTime/f.totalDuration,f.receiveDelay=S.jitterBufferMs,f.totalDuration>10&&vD.isRemoteAudioFreeze(g)&&(f.totalFreezeTime+=1)),I){I.codec!=="H264"&&I.codec!=="H265"&&I.codec!=="VP8"&&I.codec!=="VP9"&&I.codec!=="AV1X"&&I.codec!=="AV1"||(p.codecType=I.codec),p.receiveBytes=I.bytes,p.receiveBitrate=u?8*Math.max(0,p.receiveBytes-u.receiveBytes):0,p.decodeFrameRate=I.decodeFrameRate<0?0:I.decodeFrameRate,p.renderFrameRate=I.decodeFrameRate<0?0:I.decodeFrameRate,I.outputFrame&&(p.renderFrameRate=I.outputFrame.frameRate),I.receivedFrame?(p.receiveFrameRate=I.receivedFrame.frameRate,p.receiveResolutionHeight=I.receivedFrame.height,p.receiveResolutionWidth=I.receivedFrame.width):y&&(p.receiveResolutionHeight=y._videoHeight||0,p.receiveResolutionWidth=y._videoWidth||0),I.framesRateFirefox!==void 0&&(p.receiveFrameRate=Math.round(I.framesRateFirefox)),p.receivePackets=I.packets,p.receivePacketsLost=I.packetsLost,p.packetLossRate=p.receivePacketsLost/(p.receivePackets+p.receivePacketsLost),p.totalDuration=u?u.totalDuration+1:1,p.totalFreezeTime=u?u.totalFreezeTime:0,p.receiveDelay=I.jitterBufferMs||0;let L=!!b&&t.getRemoteVideoIsReady(b);y&&L&&vD.isRemoteVideoFreeze(y,I,h)&&(p.totalFreezeTime+=1),p.freezeRate=p.totalFreezeTime/p.totalDuration}N&&(f.end2EndDelay=N.B_ad,p.end2EndDelay=N.B_vd,f.transportDelay=N.B_ed,p.transportDelay=N.B_ed,f.currentPacketLossRate=N.B_ealr4/100,p.currentPacketLossRate=N.B_evlr4/100,m.uplinkNetworkQuality=N.B_punq?N.B_punq:0,m.downlinkNetworkQuality=N.B_pdnq?N.B_pdnq:0),this.remoteStats.set(a,{audioStats:f,videoStats:p,videoPcStats:I,networkStats:m}),g&&this.exceptionMonitor.setRemoteAudioStats(g,f),y&&this.exceptionMonitor.setRemoteVideoStats(y,p)})}},Fie=class{constructor(){R(this,"destChannelMediaInfos",new Map),R(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){f8(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){f8(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){Rx(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}};function hz(e){if(!(e instanceof Fie))return new Y(k.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();let t=e.getSrcChannelMediaInfo(),r=e.getDestChannelMediaInfo();if(!t)return new Y(k.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(r.size===0)return new Y(k.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}function fz(e){var t={},r=!1;function n(i,a){return r=!0,{done:!1,value:new BM(a=new pD(function(o){o(e[i](a))}),1)}}return t[Wp!==void 0&&Wre||"@@iterator"]=function(){return this},t.next=function(i){return r?(r=!1,i):n("next",i)},typeof e.throw=="function"&&(t.throw=function(i){if(r)throw r=!1,i;return n("throw",i)}),typeof e.return=="function"&&(t.return=function(i){return r?(r=!1,i):n("return",i)}),t}var THe=$r(Aie);function pz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pz(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Jt;function gz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function RE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gz(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Iy=(Jt=class Xy extends Lne{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map(t=>t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").filter(t=>{var r;return be(r=Object.keys(xx)).call(r,t)}))]}constructor(t,r){super(t,r),R(this,"store",void 0),R(this,"peerConnection",void 0),R(this,"remoteSDP",void 0),R(this,"initialOffer",void 0),R(this,"statsFilter",void 0),R(this,"useRTX",!1),R(this,"localCapabilities",void 0),R(this,"localCandidateCount",0),R(this,"allCandidatesReceived",!1),R(this,"establishPromise",void 0),R(this,"mutex",new gi("P2PConnection-mutex")),this.store=r,this.peerConnection=new RTCPeerConnection(Xy.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=HM(this.peerConnection,M("STATS_UPDATE_INTERVAL"),void 0,Ar()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{let t=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!t.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let r=nd(t.sdp),n=Mv(t.sdp,{filterRTX:!this.useRTX,filterVideoFec:M("FILTER_VIDEO_FEC"),filterAudioFec:M("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=n,this.initialOffer=t,RE(RE({},r),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:n},offerSDP:t.sdp})}catch(t){throw new ee(k.GET_LOCAL_CONNECTION_PARAMS_FAILED,t.toString())}}async updateRemoteConnect(){}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(n){R(this,"sessionDesc",void 0),R(this,"localCapabilities",void 0),R(this,"rtpCapabilities",void 0),R(this,"candidates",void 0),R(this,"iceParameters",void 0),R(this,"dtlsParameters",void 0),R(this,"setup",void 0),R(this,"currentMidIndex",void 0),R(this,"cname",void 0),n=Gr(n);let{iceParameters:i,dtlsParameters:a,candidates:o,rtpCapabilities:s,setup:l,localCapabilities:c,sdkCodec:u,cname:h}=n,f=$n.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=s,this.candidates=o,this.iceParameters=i,this.dtlsParameters=a,this.setup=l,this.localCapabilities=c,this.cname=h;for(let p=0;p<f.mediaDescriptions.length;p++){let m=f.mediaDescriptions[p];if(m.attributes.iceUfrag=i.iceUfrag,m.attributes.icePwd=i.icePwd,m.attributes.fingerprints=a.fingerprints,m.attributes.candidates=o,m.attributes.setup=l,m.media.mediaType==="video"){m.media.fmts=s.videoCodecs.map(y=>y.payloadType.toString(10));let g=s.videoCodecs.filter(y=>{var v,b;return(v=y.rtpMap)===null||v===void 0?void 0:be(b=v.encodingName.toLowerCase()).call(b,u)});g.length===0&&(g=s.videoCodecs),m.attributes.payloads=g,m.attributes.extmaps=s.videoExtensions}m.media.mediaType==="audio"&&(m.media.fmts=s.audioCodecs.map(g=>g.payloadType.toString(10)),m.attributes.payloads=s.audioCodecs,m.attributes.extmaps=s.audioExtensions),f.mediaDescriptions[p]=this.mungMediaDesc(m)}this.sessionDesc=f,this.currentMidIndex=f.mediaDescriptions.length-1}toString(){return $n.print(this.sessionDesc)}send(n,i,a){let{ssrcs:o,ssrcGroups:s}=yh(i,this.cname),l=this.sessionDesc.mediaDescriptions.find(h=>n===Ne.VIDEO?h.media.mediaType==="video":h.media.mediaType==="audio"),c=o[0].attributes.label,u=o[0].attributes.mslabel;return l.attributes.ssrcs=l.attributes.ssrcs.concat(o),l.attributes.ssrcGroups=l.attributes.ssrcGroups.concat(s),{id:c,mslabel:u}}batchSend(n){return n.map(i=>{let{kind:a,ssrcMsg:o}=i;return this.send(a,o,void 0)})}stopSending(n){this.sessionDesc.mediaDescriptions.forEach(i=>{let a=[],o=[],s=[];i.attributes.ssrcs.forEach(l=>{be(n).call(n,l.attributes.label||"")?s.push(l):a.push(l)}),i.attributes.ssrcGroups.forEach(l=>{var c;be(c=s.map(u=>u.ssrcId)).call(c,l.ssrcIds[0])||o.push(l)}),i.attributes.ssrcs=a,i.attributes.ssrcGroups=o})}mute(n){let i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(n){let i=this.sessionDesc.mediaDescriptions.find(a=>a.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}receive(n,i,a){n.forEach((o,s)=>{let l=o._mediaStreamTrack,c=this.sessionDesc.mediaDescriptions.findIndex(h=>h.attributes.mid===l.kind),u=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[c],o);this.sessionDesc.mediaDescriptions[c]=u})}stopReceiving(n){}updateCandidates(n){n===Ba.TCP?this.candidates.forEach(i=>{this.candidates.findIndex(a=>a.transport==="tcp"&&a.connectionAddress===i.connectionAddress&&a.port===i.port)===-1&&this.candidates.push(mz(mz({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this.candidates=this.candidates.filter(i=>i.transport!=="tcp");for(let i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(n){n=Gr(n),this.iceParameters=n,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=n.iceUfrag,i.attributes.icePwd=n.icePwd})}predictReceivingMids(n){let i=[];for(let a=0;a<n;a++)i.push((this.currentMidIndex+a+1).toString(10));return i}mungRecvMediaDsec(n,i){let a=Gr(n);return Zm(a,i),jM(a,i),a}updateRecvMedia(n,i){let a=this.sessionDesc.mediaDescriptions.findIndex(o=>o.attributes.mid===n);if(a!==-1){let o=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[a],i);this.sessionDesc.mediaDescriptions[a]=o}}bumpMid(n){this.currentMidIndex+=n}updateTrackLabel(n,i,a){let o=this.sessionDesc.mediaDescriptions.find(l=>n===Ne.VIDEO?l.attributes.mid==="video":l.attributes.mid==="audio");if(o){let l=o.attributes.ssrcs.find(c=>c.attributes.label===i);var s;l&&(l.attributes.label=a,(s=l.attributes.msid)===null||s===void 0||s.replace(i,a))}}mungMediaDesc(n){let i=Gr(n);return LM(i),function(a){let o=a.attributes.extmaps.find(s=>s.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");o&&a.attributes.extmaps.splice(a.attributes.extmaps.indexOf(o),1),a.attributes.payloads.forEach(s=>{let l=s.rtcpFeedbacks.findIndex(c=>c.type==="transport-cc");l!==-1&&s.rtcpFeedbacks.splice(l,1)})}(i),i}getSSRC(n){for(let i of this.sessionDesc.mediaDescriptions)for(let a of i.attributes.ssrcs)if(a.attributes.label===n)return[a]}}(RE(RE({},t),{},{rtpCapabilities:t.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));let r=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}}async updateRemoteRTPCapabilities(t,r){throw new ee(k.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}getPreMedia(t){}send(t,r){var n=this;return ml(function*(){let i=yield Nt(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let a=t.map(f=>n.peerConnection.addTrack(f._mediaStreamTrack)),o=yield Nt(n.peerConnection.createOffer()),s=$n.parse(o.sdp),l=t.map(f=>{let p=f._mediaStreamTrack,m=s.mediaDescriptions.find(g=>g.attributes.mid===p.kind);if(!m)throw new Error("Cannot extract ssrc from mediaDescription.");return function(g,y,v){let b=g.attributes.ssrcs.filter(S=>S.attributes.label===y),E=g.attributes.ssrcGroups;if(b.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(E&&b.length>1){let S=E.find(I=>I.ssrcIds.indexOf(b[0].ssrcId)!==-1);return S?[{ssrcId:S.ssrcIds[0],rtx:v?S.ssrcIds[1]:void 0}]:[{ssrcId:b[0].ssrcId}]}return[{ssrcId:b[0].ssrcId}]}(m,p.id,n.useRTX)}),c;try{c=yield l}catch(f){throw a.forEach(p=>{ni()&&p.replaceTrack(null),n.peerConnection.removeTrack(p)}),f}let u=n.mungSendOfferSDP(o.sdp,t);n.remoteSDP.receive(t,r,c);let h=n.remoteSDP.toString();return yield Nt(n.peerConnection.setLocalDescription({type:"offer",sdp:u})),yield Nt(n.applySendEncodings(a,t)),yield Nt(n.peerConnection.setRemoteDescription({type:"answer",sdp:h})),t.map((f,p)=>{let m=f._mediaStreamTrack.id;return{localSSRC:l[p],id:m}})}catch(a){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(a.toString()))}finally{i()}})()}async stopSending(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let r=this.peerConnection.getSenders().filter(a=>{var o;return t.indexOf(((o=a.track)===null||o===void 0?void 0:o.id)||"")!==-1});if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");r.map(a=>{ni()&&a.replaceTrack(null),this.peerConnection.removeTrack(a)});let n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(t);let i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(r.toString()))}}async receive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{id:a,mslabel:o}=this.remoteSDP.send(t,r,i),s=new ye((u,h)=>{let f=setTimeout(()=>{h(new Error("Cannot receive track, id: ".concat(a)))},1e4),p=m=>{let g=Ct();if((g.name==="Safari"&&Number(g.version)===11||Qi())&&m.track.id!==a&&m.streams[0].id===o){var y;let v=m.streams[0].getTracks()[0];return(y=this.remoteSDP)===null||y===void 0||y.updateTrackLabel(t,a,m.track.id),this.peerConnection.removeEventListener("track",p),clearTimeout(f),void u(v)}if(m.track.id===a)return this.peerConnection.removeEventListener("track",p),clearTimeout(f),void u(m.track)};this.peerConnection.addEventListener("track",p)}),l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});let c=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(c),{track:await s,id:a}}catch(a){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(a.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(t);let r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}async muteRemote(t){}async unmuteRemote(t){}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let r=this.peerConnection.getSenders().filter(n=>{var i;return t.indexOf(((i=n.track)===null||i===void 0?void 0:i.id)||"")!==-1});if(r.length!==t.length)throw new Error("sender' length doesn't match mids' length.");r.map(n=>{if(ni()&&n.track)n.track.enabled=!1;else{let i=n.getParameters();i.encodings.forEach(a=>a.active=!1),n.setParameters(i)}})}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(r.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let r=this.peerConnection.getSenders().filter(a=>{var o;return t.indexOf(((o=a.track)===null||o===void 0?void 0:o.id)||"")!==-1});if(r.length!==t.length)throw new Error("Senders' length doesn't match mids' length.");r.map(async a=>{if(ni()&&a.track)a.track.enabled=!0;else{let o=a.getParameters();o.encodings.forEach(s=>s.active=!0),await a.setParameters(o)}});let n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);let i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(r.toString()))}}restartICE(t){var r=this;return ml(function*(){let n=yield Nt(r.mutex.lock("From P2PConnection.restartICE"));try{if(!r.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Rt().supportPCSetConfiguration){let l=r.peerConnection.getConfiguration(),c=t===Ba.RELAY?"relay":"all";l.iceTransportPolicy!==c&&(_.debug("[".concat(r.store.clientId,"] restartICE change iceTransportPolicy from [").concat(l.iceTransportPolicy,"] to [").concat(c,"]")),l.iceTransportPolicy=c,r.peerConnection.setConfiguration(l))}else if(t===Ba.RELAY)return;t!==Ba.RELAY&&r.remoteSDP.updateCandidates(t);let i=yield Nt(r.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let a=nd(i.sdp),{remoteIceParameters:o}=yield a.iceParameters;r.remoteSDP.restartICE(o);let s=r.remoteSDP.toString();yield Nt(r.peerConnection.setLocalDescription(i)),yield Nt(r.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(i){_.warning("[".concat(r.store.clientId,"] restart ICE failed, abort operation"),i)}finally{n()}})()}close(){var t;this.peerConnection.close(),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[r]);this.remoteSDP.updateRecvMedia(r._mediaStreamTrack.kind,r);let a=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:a})}catch(n){throw new ee(k.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(t,r){let n=this.peerConnection.getSenders().filter(i=>{var a;return((a=i.track)===null||a===void 0?void 0:a.id)===t});n.length===1&&await this.applySendEncodings(n,[r])}setStatsRemoteVideoIsReady(t,r){this.statsFilter.setVideoIsReady2(t,r)}async replaceTrack(t,r){let n=this.peerConnection.getSenders().find(i=>{var a;return((a=i.track)===null||a===void 0?void 0:a.id)===r});n&&await n.replaceTrack(t._mediaStreamTrack)}createDataChannels(t,r){throw new ee(k.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(t){throw new ee(k.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t;(t=this.onICEConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=t=>{t.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,_.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,_.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},M("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){let r={iceServers:[],sdpSemantics:"plan-b"};return t.iceServers?r.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(Sx(t.turnServer.servers)?r.iceServers=t.turnServer.servers:(r.iceServers&&r.iceServers.push(...Xy.turnServerConfigToIceServers(t.turnServer.servers)),M("USE_TURN_SERVER_OF_GATEWAY")&&r.iceServers&&t.turnServer.serversFromGateway&&r.iceServers.push(...Xy.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(n=>{n.forceturn&&(r.iceTransportPolicy="relay")}))),r}static turnServerConfigToIceServers(t){let r=[];return t.forEach(n=>{n.security?n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turns:".concat(n.turnServerURL,":").concat(n.tcpport,"?transport=tcp")}):(n.udpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.udpport,"?transport=udp")}),n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.tcpport,"?transport=tcp")}))}),r}async updateRtpSenderEncodings(t,r){var n;if(r||(r=this.peerConnection.getSenders().find(c=>{var u;return((u=c.track)===null||u===void 0?void 0:u.id)===t._mediaStreamTrack.id})),!r)return _.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(!Rt().supportSetRtpSenderParameters)return _.warn("Browser not support set rtp-sender parameters");let i={},a={};if(t instanceof sr)switch(t._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(M("DSCP_TYPE")&&Nd()){var o;let c=M("DSCP_TYPE");be(o=["very-low","low","medium","high"]).call(o,c)&&(a.networkPriority=c)}let s=r.getParameters(),l=(n=s.encodings)===null||n===void 0?void 0:n[0];l&&Object.assign(l,a),Object.assign(s,i),_.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(s.encodings))),await r.setParameters(s)}async applySendEncodings(t,r){try{if(!Rt().supportSetRtpSenderParameters||t.length!==r.length)return;for(let n=0;n<t.length;n++){let i=t[n],a=r[n];i&&a&&await this.updateRtpSenderEncodings(a,i)}}catch{_.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,r){let n=$n.parse(t);return r.forEach((i,a)=>{let o=i._mediaStreamTrack,s=n.mediaDescriptions.find(l=>l.attributes.mid===o.kind);s&&Zm(s,i)}),$n.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var r;(r=this.onFirstAudioReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var r;(r=this.onFirstVideoReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var r;(r=this.onFirstAudioDecoded)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,r,n)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,r,n)},this.statsFilter.onSelectedLocalCandidateChanged=(t,r)=>{var n;(n=this.onSelectedLocalCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,r)=>{var n;(n=this.onSelectedRemoteCandidateChanged)===null||n===void 0||n.call(this,t,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");let r=this.remoteSDP.batchSend(t).map((a,o)=>{let{id:s,mslabel:l}=a,{kind:c}=t[o];return new ye((u,h)=>{let f=setTimeout(()=>{h(new Error("Cannot receive track, id: ".concat(s)))},1e4),p=m=>{let g=Ct();if(g.name==="Safari"&&Number(g.version)===11&&m.track.id!==s&&m.streams[0].id===l){var y;let v=m.streams[0].getTracks()[0];return(y=this.remoteSDP)===null||y===void 0||y.updateTrackLabel(c,s,m.track.id),this.peerConnection.removeEventListener("track",p),clearTimeout(f),void u({track:v,id:s})}if(m.track.id===s)return this.peerConnection.removeEventListener("track",p),clearTimeout(f),void u({track:m.track,id:s})};this.peerConnection.addEventListener("track",p)})}),n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});let i=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(i),await ye.all(r)}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(r.toString()))}}async getRemoteSSRC(t){if(!this.remoteSDP)return;let r=this.remoteSDP.getSSRC(t);return r==null?void 0:r[0].ssrcId}setConfiguration(t){if(Rt().supportPCSetConfiguration){let r=Xy.resolvePCConfiguration(t);this.peerConnection.setConfiguration(r)}}},Se(Jt.prototype,"connect",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"connect"),Jt.prototype),Se(Jt.prototype,"stopSending",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"stopSending"),Jt.prototype),Se(Jt.prototype,"receive",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"receive"),Jt.prototype),Se(Jt.prototype,"stopReceiving",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"stopReceiving"),Jt.prototype),Se(Jt.prototype,"muteRemote",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"muteRemote"),Jt.prototype),Se(Jt.prototype,"unmuteRemote",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"unmuteRemote"),Jt.prototype),Se(Jt.prototype,"muteLocal",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"muteLocal"),Jt.prototype),Se(Jt.prototype,"unmuteLocal",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"unmuteLocal"),Jt.prototype),Se(Jt.prototype,"close",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"close"),Jt.prototype),Se(Jt.prototype,"updateEncoderConfig",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"updateEncoderConfig"),Jt.prototype),Se(Jt.prototype,"updateSendParameters",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"updateSendParameters"),Jt.prototype),Se(Jt.prototype,"replaceTrack",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"replaceTrack"),Jt.prototype),Se(Jt.prototype,"getRemoteSSRC",[Ro],Object.getOwnPropertyDescriptor(Jt.prototype,"getRemoteSSRC"),Jt.prototype),Jt);function Ro(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,a=await i.lock("Locking from P2PConnection.".concat(t));try{for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return await n.apply(this,s)}finally{a()}},r}function yz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Au(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yz(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Ny="9",vz=4e4,CHe=class{get localCapabilities(){return Gr(this._localCapabilities)}get rtpCapabilities(){return Gr(this._rtpCapabilities)}get candidates(){return Gr(this._candidates)}get iceParameters(){return Gr(this._iceParameters)}get dtlsParameters(){return Gr(this._dtlsParameters)}constructor(e){R(this,"sessionDesc",void 0),R(this,"_localCapabilities",void 0),R(this,"_rtpCapabilities",void 0),R(this,"_candidates",void 0),R(this,"_iceParameters",void 0),R(this,"_dtlsParameters",void 0),R(this,"setup",void 0),R(this,"currentMidIndex",void 0),R(this,"cname",void 0),R(this,"firefoxSsrcMidMap",new Map),e=Gr(e);let{iceParameters:t,dtlsParameters:r,candidates:n,rtpCapabilities:i,setup:a,localCapabilities:o,cname:s}=e;this._rtpCapabilities=i,this._candidates=n,this._iceParameters=t,this._dtlsParameters=r,this._localCapabilities=o,this.setup=a,this.cname=s,this.sessionDesc=this.updateRemoteRTPCapabilities(i),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}preloadRemoteMedia(e){let t=this.candidates,r=this.dtlsParameters,n=this.iceParameters,i=this.rtpCapabilities.send,a=this.sessionDesc.mediaDescriptions.length-1;for(let o=1;o<e;o++){let s=2*o+2e4,l=2*o+vz,{ssrcs:c,ssrcGroups:u}=yh([{ssrcId:s}],this.cname),{ssrcs:h,ssrcGroups:f}=yh([{ssrcId:l,rtx:M("USE_SUB_RTX")?l+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:Ny,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map(p=>p.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:r.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:h,ssrcGroups:f,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++a)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:Ny,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map(p=>p.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:r.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++a)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return $n.print(this.sessionDesc)}send(e,t,r,n){let{ssrcs:i,ssrcGroups:a}=yh(t,this.cname,M("SYNC_GROUP")?r:void 0),o=this.findPreloadMediaDesc(i);if(o){if(Ar()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,o.attributes.mid),n&&(n.twcc||n.remb)){let s=this.sessionDesc.mediaDescriptions.indexOf(o);return this.sessionDesc.mediaDescriptions[s]=this.mungSendMediaDesc(o,n),{mid:o.attributes.mid,needExchangeSDP:!0}}return{mid:o.attributes.mid,needExchangeSDP:!1}}{let s=this.findAvailableMediaIndex(e,i),l;return s===-1||s===1&&(ni()||function(){let c=Ct();return!(c.name!==Mt.CHROME||!c.osVersion)&&Number(c.version)<=90}())||s===0&&M("USE_SUB_RTX")||z$()?(l=this.createOrRecycleSendMedia(e,i,a,"sendonly",n),this.updateBundleMids()):(l=Gr(this.sessionDesc.mediaDescriptions[s]),l.attributes.direction="sendonly",l.attributes.ssrcs=i,l.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[s]=this.mungSendMediaDesc(l,n)),Ar()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,l.attributes.mid),{mid:l.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){let{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){let t=e.map(i=>{let{kind:a,ssrcMsg:o,mslabel:s}=i;return this.send(a,o,s)}),r=[],n=!1;return t.forEach(i=>{let{mid:a,needExchangeSDP:o}=i;o&&(n=!0),r.push(a)}),{mids:r,needExchangeSDP:n}}stopSending(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>r.attributes.mid&&e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach(r=>{r.attributes.mid==="0"||Ar()||z$()?r.attributes.ssrcs=[]:(r.attributes.ssrcs=[],r.attributes.direction="inactive",r.media.port="0")}),this.updateBundleMids()}mute(e){let t=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){let t=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>be(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="inactive"})}unmuteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>be(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="recvonly"})}receive(e,t,r,n){e.forEach((i,a)=>{this.createOrRecycleRecvMedia(i,[],"recvonly",t,r,n[a])}),this.updateBundleMids()}stopReceiving(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach(r=>{r.media.port="0",r.attributes.direction="inactive"}),this.updateBundleMids()}updateRemoteRTPCapabilities(e){let t=this.sessionDesc||$n.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=e;let r=this.rtpCapabilities.send,n=this.localCapabilities.send;for(let i of t.mediaDescriptions){if(i.attributes.iceUfrag=this._iceParameters.iceUfrag,i.attributes.icePwd=this._iceParameters.icePwd,i.attributes.fingerprints=this._dtlsParameters.fingerprints,i.attributes.candidates=this._candidates,i.attributes.setup=this.setup,i.media.mediaType==="application"&&(i.attributes.sctpPort="5000"),i.media.mediaType==="video"){if(r.videoCodecs.length===0){let a=n.videoCodecs.filter(o=>{var s,l;return(s=o.rtpMap)===null||s===void 0?void 0:be(l=s.encodingName.toLowerCase()).call(l,"vp8")})||[n.videoCodecs[0]];i.media.fmts=a.map(o=>o.payloadType.toString(10)),i.attributes.payloads=a,i.attributes.extmaps=[]}else if(i.media.fmts=r.videoCodecs.map(a=>a.payloadType.toString(10)),i.attributes.payloads=r.videoCodecs,i.attributes.extmaps=r.videoExtensions,M("PRELOAD_MEDIA_COUNT")>0){let{ssrcs:a,ssrcGroups:o}=yh([{ssrcId:vz,rtx:M("USE_SUB_RTX")?40001:void 0}],this.cname);i.attributes.ssrcs=a,i.attributes.ssrcGroups=o}}if(i.media.mediaType==="audio"){if(r.audioCodecs.length===0){let a=n.audioCodecs.filter(o=>{var s,l;return(s=o.rtpMap)===null||s===void 0?void 0:be(l=s.encodingName.toLowerCase()).call(l,"opus")})||[n.audioCodecs[0]];i.media.fmts=a.map(o=>o.payloadType.toString(10)),i.attributes.payloads=a,i.attributes.extmaps=[]}else if(i.media.fmts=r.audioCodecs.map(a=>a.payloadType.toString(10)),i.attributes.payloads=r.audioCodecs,i.attributes.extmaps=r.audioExtensions,eg(i),M("PRELOAD_MEDIA_COUNT")>0){let{ssrcs:a,ssrcGroups:o}=yh([{ssrcId:2e4}],this.cname);i.attributes.ssrcs=a,i.attributes.ssrcGroups=o}}}return this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1,this.sessionDesc}updateCandidates(e){let t=this._candidates.filter(r=>r.transport==="udp");if(e===Ba.TCP){if(t.length===0)return;if(M("TCP_CANDIDATE_ONLY")){let r=this._candidates.filter(n=>n.transport==="tcp");t.forEach(n=>{r.findIndex(i=>i.connectionAddress===n.connectionAddress)===-1&&r.push(Au(Au({},n),{},{foundation:"tcpcandidate",priority:Number(n.priority)-1+"",transport:"tcp",port:Number(n.port)+90+""}))}),this._candidates=r}else{let r=[];t.forEach(n=>{r.push(Au(Au({},n),{},{foundation:"tcpcandidate",priority:Number(n.priority)-1+"",transport:"tcp",port:Number(n.port)+90+""}))}),this._candidates=[...t,...r]}}else if(e===Ba.RELAY){if(t.length!==0)return;{let r=this._candidates.filter(n=>n.transport==="tcp");r.forEach(n=>{t.push(Au(Au({},n),{},{foundation:"udpcandidate",priority:Number(n.priority)+1+"",transport:"udp",port:Number(n.port)-90+""}))}),this._candidates=[...t,...r]}}else t.length===0?(this._candidates.filter(r=>r.transport==="tcp").forEach(r=>{t.push(Au(Au({},r),{},{foundation:"udpcandidate",priority:Number(r.priority)+1+"",transport:"udp",port:Number(r.port)-90+""}))}),this._candidates=t):this._candidates=this._candidates.filter(r=>r.transport!=="tcp");for(let r of this.sessionDesc.mediaDescriptions)r.attributes.candidates=this.candidates}restartICE(e){e=Gr(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd})}predictReceivingMids(e){let t=[];for(let r=0;r<e;r++)t.push((this.currentMidIndex+r+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex(r=>{let n=r.media.mediaType===e&&r.media.port!=="0"&&(r.attributes.direction==="sendonly"||r.attributes.direction==="sendrecv")&&r.attributes.ssrcs.length===0;if(Ar()){if(n){let i=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(i||r.attributes.mid!=="0"&&r.attributes.mid!=="1")||!(!i||i!==r.attributes.mid)}return!1}return n})}createOrRecycleDataChannel(){for(let r of this.sessionDesc.mediaDescriptions)if(r.media.mediaType==="application")return{mediaDesc:r,needExchangeSDP:!1};this.currentMidIndex+=1;let e="".concat(this.currentMidIndex),t={media:{mediaType:"application",port:Ny,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(e),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,r,n,i,a){let o=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,l=N0(o,s,this.localCapabilities.send,o===Ne.VIDEO?n:i),c=o===Ne.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;let u="".concat(this.currentMidIndex),h={media:{mediaType:o,port:Ny,protos:["UDP","TLS","RTP","SAVPF"],fmts:l.map(p=>p.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:l,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(u)}};h=this.mungRecvMediaDsec(h,e,a);let f=this.findFirstClosedMedia(o);if(f){let p=this.sessionDesc.mediaDescriptions.indexOf(f);this.sessionDesc.mediaDescriptions[p]=h}else this.sessionDesc.mediaDescriptions.push(h);return h}updateRemoteCodec(e,t,r){let n=[...new Set(this._rtpCapabilities.recv.videoCodecs.map(h=>h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||"").filter(h=>{var f;return be(f=Object.keys(xx)).call(f,h)}))],i=new Set(t);if(n.every(h=>i.has(h)))return _.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;let a=this._rtpCapabilities.recv.videoCodecs.filter(h=>t.some(f=>{var p;return be(p=h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||"").call(p,f)}));if(a.length===0)return _.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(n," codecs: ").concat(t)),!1;let o=[...new Set(a.map(h=>h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||""))],s;if(_.debug("updateRemoteCodec, from ".concat(n," to ").concat(o)),e.length===0)s=this.sessionDesc.mediaDescriptions.filter(h=>h.media.mediaType==="video"&&h.attributes.direction==="recvonly");else if(s=this.sessionDesc.mediaDescriptions.filter(h=>h.attributes.mid&&be(e).call(e,h.attributes.mid)&&h.attributes.direction==="recvonly"),s.length!==e.length)return _.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;if(M("USE_PUB_RTX")||M("USE_SUB_RTX")){let h=MM(a,this.rtpCapabilities.recv.videoCodecs);a.push(...h)}this._rtpCapabilities.recv.videoCodecs=a;let l=this.localCapabilities.send,c=this.rtpCapabilities.recv,u=N0(Ne.VIDEO,c,l,r);return s.forEach(h=>{let f=u.map(p=>p.payloadType.toString(10));_.debug("updateRemoteCodec mid: ".concat(h.attributes.mid,", from ").concat(h.attributes.payloads," to ").concat(u)),h.attributes.payloads=u,h.media.fmts=f}),!0}createOrRecycleSendMedia(e,t,r,n,i){let a=this.rtpCapabilities.send,o=e===Ne.VIDEO?a.videoCodecs:a.audioCodecs,s=e===Ne.VIDEO?a.videoExtensions:a.audioExtensions;this.currentMidIndex+=1;let l="".concat(this.currentMidIndex),c={media:{mediaType:e,port:Ny,protos:["UDP","TLS","RTP","SAVPF"],fmts:o.map(h=>h.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:r,rtcpFeedbackWildcards:[],payloads:o,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};c=this.mungSendMediaDesc(c,i);let u=this.findFirstClosedMedia(e);if(u){let h=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[h]=c}else this.sessionDesc.mediaDescriptions.push(c);return c}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>e.media.port!=="0").map(e=>e.attributes.mid)}mungRecvMediaDsec(e,t,r){let n=Gr(e);return LM(n),Zm(n,t),jM(n,t),Eie(n),TT(n,r,this.localCapabilities.send),n}mungSendMediaDesc(e,t){let r=Gr(e);return TT(r,t,this.localCapabilities.recv),eg(r),r}updateRecvMedia(e,t){let r=this.sessionDesc.mediaDescriptions.findIndex(n=>n.attributes.mid===e);if(r!==-1){let n=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],t);this.sessionDesc.mediaDescriptions[r]=n}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(t=>Ar()?t.media.port==="0"&&t.media.mediaType===e:t.media.port==="0")}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(t=>{var r;return((r=t.attributes)===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId)===e[0].ssrcId})}getSSRC(e){var t;return(t=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e))===null||t===void 0?void 0:t.attributes.ssrcs}};function bz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bz(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var A0=function(e){return e.BANDWIDTH="bandwidth",e.CPU="cpu",e.NONE="none",e.OTHER="other",e}({}),Em=function(e){return e[e.DOWN=0]="DOWN",e[e.UP=1]="UP",e}(Em||{}),xT=new Map;function wz(e,t,r,n){let{scale:i}=e;if(i===0&&n===Em.UP||i>=t.length-1&&n===Em.DOWN)return e;let a=Pc(Pc({},e),{},{scale:n===Em.DOWN?++i:--i});switch(r){case"maintain-framerate":a=Pc(Pc({},a),t[i].motion);break;case"maintain-resolution":a=Pc(Pc({},a),t[i].detail);break;case"balanced":a=Pc(Pc({},a),t[i].balanced)}return a}function Vie(e,t){if(t){let r={overUse:0,underUse:0,adaptationList:Bie(t)};xT.set(e,r)}else xT.delete(e)}function Bie(e){let t=Pc({},e),{bitrateMax:r,frameRate:n,scaleResolutionDownBy:i,bitrateMin:a}=t,{MIN_FRAME_RATE:o,MAX_THRESHOLD_FRAMERATE:s,MAX_SCALE:l,BITRATE_MIN_THRESHOLD:c,BITRATE_MAX_THRESHOLD:u,BWE_SCALE_UP_THRESHOLD:h,BWE_SCALE_DOWN_THRESHOLD:f,PERF_SCALE_DOWN_THRESHOLD:p,PERF_SCALE_UP_THRESHOLD:m,BALANCE_BITRATE_FACTOR:g,BALANCE_FRAMERATE_FACTOR:y,BALANCE_RESOLUTION_FACTOR:v,MOTION_RESOLUTION_FACTOR:b,MOTION_BITRATE_FACTOR:E,DETAIL_FRAMERATE_FACTOR:S,DETAIL_BITRATE_FACTOR:I}=SM,N=Math.min(t.frameRate,s),L=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(f,1)*r),bwe_up:r,fps_down:Math.round(Math.pow(p,1)*N),fps_up:n},balanced:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:r,bitrateMin:a},motion:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:r,bitrateMin:a},detail:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:r,bitrateMin:a}}];for(let j=1;j<=l;j++){let z={bwe_up:Math.round(Math.pow(h,j)*r),bwe_down:Math.round(Math.pow(f,j+1)*r),fps_up:Math.round(Math.pow(m,j)*N),fps_down:Math.round(Math.pow(p,j+1)*N)},A={scaleResolutionDownBy:i/Math.pow(v,j),frameRate:Math.max(Math.round(Math.pow(y,j)*n),o),bitrateMax:Math.max(Math.round(Math.pow(g,j)*r),u),bitrateMin:Math.max(Math.round(Math.pow(g,j)*a),c)},V={scaleResolutionDownBy:i/Math.pow(b,j),frameRate:n,bitrateMax:Math.max(Math.round(Math.pow(E,j)*r),u),bitrateMin:Math.max(Math.round(Math.pow(E,j)*a),c)},G={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(S,j)*n),o),bitrateMax:Math.max(Math.round(Math.pow(I,j)*r),u),bitrateMin:Math.max(Math.round(Math.pow(I,j)*a),c)};L.push({scale:j,threshold:z,balanced:A,motion:V,detail:G})}return L}function xHe(e,t,r,n,i,a){let o=xT.get(e)||{overUse:0,underUse:0,adaptationList:Bie(i)},{adaptationList:s}=o;xT.set(e,o);let{OVERUSE_TIMES_THRESHOLD:l,UNDERUSE_TIMES_THRESHOLD:c}=SM,{scale:u}=n,h,f;return typeof t=="number"&&t>0&&function(p,m,g,y){if(m>=g.length)return!1;let{threshold:{fps_down:v}}=g[m];return M("FORCE_AG_HIGH_FRAMERATE")&&y==="maintain-framerate"&&(v=g[0].threshold.fps_down),p<v}(t,u,s,a)&&(o.overUse++,f=A0.CPU,o.overUse>l)||typeof r=="number"&&r>0&&function(p,m,g){if(m>=g.length)return!1;let{threshold:{bwe_down:y}}=g[m];return p<y}(r,u,s)&&(o.overUse++,f=A0.BANDWIDTH,o.overUse>l)?(o.overUse=0,o.underUse=0,h=wz(n,s,a,Em.DOWN),[h,f]):(typeof t=="number"&&t>0&&typeof r=="number"&&r>0&&function(p,m,g,y){if(m===0)return;let{threshold:{fps_up:v}}=g[m];return M("FORCE_AG_HIGH_FRAMERATE")&&y==="maintain-framerate"&&(v=g[1].threshold.fps_up),p>v}(t,u,s,a)&&function(p,m,g){if(m===0)return;let{threshold:{bwe_up:y}}=g[m];return p>y}(r,u,s)&&(o.underUse++,o.underUse>c&&(o.overUse=0,o.underUse=0,h=wz(n,s,a,Em.UP),h.scale===0&&(f=A0.NONE))),[h,f])}function Ez(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function FA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ez(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ez(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RHe(e){var t;return!!M("ENABLE_AG_ADAPTATION")&&!!(e instanceof cD||be(t=e._hints).call(t,hr.CUSTOM_TRACK))&&(!!M("FORCE_SUPPORT_AG_ADAPTATION")||!!(function(r){let n=Ct();if(n.os!==Sn.IOS||!n.osVersion)return!1;let i=n.osVersion.split(".");return Number(i[0])>=r}(14)&&yne(17,4)||gne(14)&&vne(17,4)))}var RT=new Map;function IE(e,t){let r=RT.get(e);if(r){let{timer:n}=r;window.clearTimeout(n),RT.delete(e)}t.qualityLimitationReason=A0.NONE,Vie(e)}var wt;function _z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ll(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_z(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_z(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var tl=(wt=class Jy extends Lne{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var t,r;return(t=(r=this.peerConnection.getReceivers()[0])===null||r===void 0||(r=r.transport)===null||r===void 0?void 0:r.state)!==null&&t!==void 0?t:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map(t=>t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").filter(t=>{var r;return be(r=Object.keys(xx)).call(r,t)}))]}constructor(t,r){super(t,r),R(this,"store",void 0),R(this,"peerConnection",void 0),R(this,"id",rr(5,"connection-")),R(this,"remoteSDP",void 0),R(this,"initialOffer",void 0),R(this,"transportEventReceiver",void 0),R(this,"statsFilter",void 0),R(this,"extension",{useXR:M("USE_XR")}),R(this,"localCapabilities",void 0),R(this,"remoteCodecs",void 0),R(this,"localCandidateCount",0),R(this,"allCandidatesReceived",!1),R(this,"isPreallocation",!1),R(this,"preSSRCMap",new Map),R(this,"dataStreamChannelMap",new Map),R(this,"establishPromise",void 0),R(this,"recoveredDataChannelIds",[]),R(this,"currentDataChannelId",1),R(this,"mutex",new gi("P2PConnection-mutex")),R(this,"qualityLimitationReason",A0.NONE),this.store=r,this.peerConnection=new RTCPeerConnection(Jy.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=HM(this.peerConnection,M("STATS_UPDATE_INTERVAL"),void 0,Ar()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}getPreMedia(t){let r=this.preSSRCMap.get(t);if(r!==void 0){let n=this.peerConnection.getTransceivers().find(i=>i.mid===r);if(n)return{transceiver:n,track:n.receiver.track,id:r}}}async updateRemoteRTPCapabilities(t,r){if(this.remoteCodecs=r,!this.remoteSDP)return void _.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(r));if(this.remoteSDP.updateRemoteCodec(t,r,this.store.codec)){let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n);let a=this.remoteSDP.toString();i==null||i(a),await this.peerConnection.setRemoteDescription({type:"answer",sdp:a})}else _.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.")}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});let t=await this.peerConnection.createOffer();if(!t.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let r=nd(t.sdp),n=await Sie({filterRTX:!M("USE_PUB_RTX")&&!M("USE_SUB_RTX"),filterVideoFec:M("FILTER_VIDEO_FEC"),filterAudioFec:M("FILTER_AUDIO_FEC"),filterVideoCodec:M("FILTER_VIDEO_CODEC")},this.extension);return this.localCapabilities=CT(n),this.initialOffer=t,Ll(Ll({},r),{},{rtpCapabilities:n,offerSDP:t.sdp})}catch(t){throw new ee(k.GET_LOCAL_CONNECTION_PARAMS_FAILED,t.toString())}}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new CHe(Ll(Ll({},t),{},{localCapabilities:this.localCapabilities})),t.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);let r=this.remoteSDP.toString(),n=Tie(this.initialOffer.sdp,this.extension),i=this.logSDPExchange(n||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),i==null||i(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r});let a=this.peerConnection.getTransceivers()[0];if(a!=null&&a.receiver&&this.tryBindTransportEvents(a.receiver),M("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia(M("PRELOAD_MEDIA_COUNT"));let s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});let l=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(l)}let{preSSRCs:o}=t;if(Array.isArray(o)&&o.length>0){let{mids:s}=this.remoteSDP.batchSend(o.map(l=>({kind:l.kind,ssrcMsg:[{ssrcId:l.ssrcId,rtx:l.rtx}],mslabel:l.mslabel})));s.forEach((l,c)=>{this.preSSRCMap.set(o[c].ssrcId,l)}),await SE(this.peerConnection,this.remoteSDP,this.extension),_.debug("[".concat(this.store.clientId,"] [P2PConnection] pre-batchReceive exchange SDP."))}}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}}async updateRemoteConnect(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateRemoteConnect before remote SDP created");let{rtpCapabilities:r}=t;this.remoteSDP.updateRemoteRTPCapabilities(r),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);let{preSSRCs:n}=t;if(Array.isArray(n)&&n.length>0){let{mids:i}=this.remoteSDP.batchSend(n.map(a=>Object.assign({},{kind:a.kind,ssrcMsg:[{ssrcId:a.ssrcId,rtx:a.rtx}],mslabel:a.mslabel})));i.forEach((a,o)=>{this.preSSRCMap.set(n[o].ssrcId,a)})}await SE(this.peerConnection,this.remoteSDP,this.extension),_.debug("[P2PConnection] updateRemoteRTPCapabilities by exchanging SDP.")}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.updateRemoteConnect failed; ".concat(r.toString()))}}send(t,r,n){var i=this;return ml(function*(){let a=yield Nt(i.mutex.lock("From P2PConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let o=[];t.forEach(g=>{let y=i.peerConnection.addTransceiver(g._mediaStreamTrack,{direction:"sendonly"});o.push(y),g._updateRtpTransceiver(y)}),Ar()&&M("SIMULCAST")===!0&&(yield Nt(i.applySimulcastForFirefox(o,t)));let s=yield Nt(i.peerConnection.createOffer()),l=i.remoteSDP.predictReceivingMids(t.length),c=i.mungSendOfferSDP(s.sdp,t,l),u=$n.parse(c),h=l.map(g=>{let y=u.mediaDescriptions.find(v=>v.attributes.mid===g);if(!y)throw new Error("Cannot extract ssrc from mediaDescription.");return bie(y,M("USE_PUB_RTX"))}),f;try{f=yield h}catch(g){f=[],i.remoteSDP.receive(t,r,n,f);let y=i.remoteSDP.toString();throw yield Nt(i.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield Nt(i.peerConnection.setRemoteDescription({type:"answer",sdp:y})),yield Nt(i.stopSending(l,!0)),g}i.remoteSDP.receive(t,r,n,f);let p=i.remoteSDP.toString(),m=i.logSDPExchange(c,"offer","local","send");return yield Nt(i.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield Nt(i.applySimulcastEncodings(o,t)),yield Nt(i.applySendEncodings(o,t)),m==null||m(p),yield Nt(i.peerConnection.setRemoteDescription({type:"answer",sdp:p})),o.map((g,y)=>{let v=l[y];return{localSSRC:h[y],id:v,transceiver:g}})}catch(o){throw o instanceof ee?o:new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(o.toString()))}finally{a()}})()}async createDataChannels(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(t);if(n&&n.readyState==="open")_.debug("[P2PConnection] Channels are already available and can be reused directly.");else{let a=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if(typeof a!="number")throw new Error("create DataChannel error, because cannot get dc id");n=this.peerConnection.createDataChannel("datastream-channel",{id:a,negotiated:!0,ordered:!1,maxRetransmits:M("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(t,n)}r.forEach(a=>{a._updateOriginDataChannel(n)});let{needExchangeSDP:i}=this.remoteSDP.sendDataChannel();if(i){let a=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:a});let o=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(o),_.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else _.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(n){throw n instanceof ee?n:new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(n.toString()))}}async stopDataChannels(t){try{let r=this.dataStreamChannelMap.get(t);return r&&(r.id&&this.recoveredDataChannelIds.push(r.id),r.close()),void this.dataStreamChannelMap.delete(t)}catch(r){throw r instanceof ee?r:new ee(k.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(r.toString()))}}async stopSending(t,r){let n=r?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let i=this.peerConnection.getTransceivers().filter(l=>t.indexOf(l.mid)!==-1);if(i.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");i.map(l=>{var c;IE(this.id+l.mid,this),l.direction="inactive",(c=l.stop)===null||c===void 0||c.call(l)});let a=await this.peerConnection.createOffer(),o=this.logSDPExchange(a.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(a),this.remoteSDP.stopReceiving(t);let s=this.remoteSDP.toString();o==null||o(s),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s})}catch(i){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}finally{n&&n()}}async receive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{mid:a,needExchangeSDP:o}=this.remoteSDP.send(t,r,n,i);o&&(await SE(this.peerConnection,this.remoteSDP,this.extension),_.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP.")));let s=this.peerConnection.getTransceivers().find(l=>l.mid===a);if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:a,transceiver:s}}catch(a){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(a.toString()))}}async batchReceive(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");let{mids:r,needExchangeSDP:n}=this.remoteSDP.batchSend(t);return n&&(await SE(this.peerConnection,this.remoteSDP,this.extension),_.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))),r.map(i=>{let a=this.peerConnection.getTransceivers().find(o=>o.mid===i);if(!a)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:a.receiver.track,id:i,transceiver:a}})}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(r.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");t.forEach(a=>{Array.from(this.preSSRCMap.entries()).some(o=>{let[s,l]=o;if(l===a)return this.preSSRCMap.delete(s),!0})}),this.remoteSDP.stopSending(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}async muteRemote(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(t," before remote SDP created."));this.remoteSDP.mute(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(r.toString()))}}async unmuteRemote(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(t," before remote SDP created."));this.remoteSDP.unmute(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(r.toString()))}}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(o=>o.mid&&t.indexOf(o.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(o=>{o.direction="inactive"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(t);let a=this.remoteSDP.toString();i==null||i(a),await this.peerConnection.setRemoteDescription({type:"answer",sdp:a})}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(r.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(o=>o.mid&&t.indexOf(o.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(async(o,s)=>{o.direction="sendonly"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(t);let a=this.remoteSDP.toString();i==null||i(a),await this.peerConnection.setRemoteDescription({type:"answer",sdp:a})}catch(r){throw new ee(k.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(r.toString()))}}restartICE(t){var r=this;return ml(function*(){let n=yield Nt(r.mutex.lock("From P2PConnection.restartICE"));try{if(!r.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Rt().supportPCSetConfiguration){let c=r.peerConnection.getConfiguration(),u=t===Ba.RELAY?"relay":"all";c.iceTransportPolicy!==u&&(_.debug("[".concat(r.store.clientId,"] restartICE change iceTransportPolicy from [").concat(c.iceTransportPolicy,"] to [").concat(u,"]")),c.iceTransportPolicy=u,r.peerConnection.setConfiguration(c))}else if(t===Ba.RELAY)return;r.remoteSDP.updateCandidates(t);let i=yield Nt(r.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let a=nd(i.sdp),{remoteIceParameters:o}=yield a.iceParameters;r.remoteSDP.restartICE(o);let s=r.remoteSDP.toString(),l=r.logSDPExchange(i.sdp||"","offer","local","restartICE");r.store.descriptionStart(),yield Nt(r.peerConnection.setLocalDescription(i)),l==null||l(s),yield Nt(r.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(i){_.warning("[".concat(r.store.clientId,"] restart ICE failed, abort operation"),i)}finally{n()}})()}close(){var t;this.peerConnection.getTransceivers().forEach(r=>{IE(this.id+r.mid,this)}),this.preSSRCMap.clear(),this.peerConnection.close(),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return Ll(Ll({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[r],[t]);this.remoteSDP.updateRecvMedia(t,r);let a=this.remoteSDP.toString(),o=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),o==null||o(a),await this.peerConnection.setRemoteDescription({type:"answer",sdp:a})}catch(n){throw new ee(k.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(t,r){let n=this.peerConnection.getTransceivers().filter(i=>i.mid===t);n.length===1&&(this.isVP8Simulcast(r)?Ar()||await this.applySimulcastEncodings(n,[r]):await this.applySendEncodings(n,[r]))}setStatsRemoteVideoIsReady(t,r){this.statsFilter.setVideoIsReady2(t,r)}async replaceTrack(t,r){let n=this.peerConnection.getTransceivers().find(i=>i.mid===r);n&&await n.sender.replaceTrack(t._mediaStreamTrack)}async getSelectedCandidatePair(){let t=this.peerConnection.getReceivers();if(t.length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair()){let r=t[0].transport.iceTransport,{local:n,remote:i}=r.getSelectedCandidatePair();return{local:Ll(Ll({},dc),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:Ll(Ll({},dc),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t;(t=this.onICEConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=t=>{t.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,_.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,_.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},M("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){let r={iceServers:[]};return t.iceServers?r.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(Sx(t.turnServer.servers)?r.iceServers=t.turnServer.servers:(r.iceServers&&r.iceServers.push(...Jy.turnServerConfigToIceServers(t.turnServer.servers)),M("USE_TURN_SERVER_OF_GATEWAY")&&r.iceServers&&t.turnServer.serversFromGateway&&r.iceServers.push(...Jy.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),M("FORCE_TURN_TCP")?r.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(n=>{n.forceturn&&(r.iceTransportPolicy="relay")}))),M("ENABLE_ENCODED_TRANSFORM")&&Rt().supportWebRTCEncodedTransform&&(r.encodedInsertableStreams=!0),r}static turnServerConfigToIceServers(t){let r=[];return t.forEach(n=>{n.security?n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turns:".concat(Jp(n.turnServerURL),":").concat(n.tcpport,"?transport=tcp")}):(n.udpport&&!M("FORCE_TURN_TCP")&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.udpport,"?transport=udp")}),n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.tcpport,"?transport=tcp")}))}),r}tryBindTransportEvents(t){let r=t.transport;if(r){this.transportEventReceiver=t,r.onstatechange=()=>{var i;r!=null&&r.state&&((i=this.onDTLSTransportStateChange)===null||i===void 0||i.call(this,r.state))},r.onerror=i=>{var a;(a=this.onDTLSTransportError)===null||a===void 0||a.call(this,"error"in i?i.error:i)};let n=r.iceTransport;n&&(n.onstatechange=()=>{let i=r==null?void 0:r.iceTransport.state;var a;i&&((a=this.onICETransportStateChange)===null||a===void 0||a.call(this,i))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){let{local:i,remote:a}=n.getSelectedCandidatePair();_.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol}),", remote ").concat(JSON.stringify({candidateType:a.type,protocol:a.protocol,address:a.address,port:a.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(t,r){var n,i;if(r||(r=this.peerConnection.getSenders().find(g=>g.track===t._mediaStreamTrack)),!r)return _.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(t))return _.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!Rt().supportSetRtpSenderParameters)return _.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");let a={},o={};switch(t._optimizationMode){case"motion":a.degradationPreference="maintain-framerate";break;case"detail":a.degradationPreference="maintain-resolution";break;case"balanced":a.degradationPreference="balanced"}let s=function(g,y){return g.getTransceivers().find(v=>v.sender.track===y||v.receiver.track===y)}(this.peerConnection,t._mediaStreamTrack),l=B7e(t);if(RHe(t)&&s&&r&&l&&this.getLocalVideoStats&&be(n=["vp8","vp9"]).call(n,this.store.codec)){var c;let g=a.degradationPreference||(be(c=t._hints).call(c,hr.CUSTOM_TRACK)?M("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");(function(y,v,b,E,S,I){if(IE(y,b),S(v),E!=="balanced"&&E!=="maintain-framerate"&&E!=="maintain-resolution")return;let N=-1;Vie(y,v);let L=window.setInterval(()=>{let z=RT.get(y);if(!M("ENABLE_AG_ADAPTATION")||!z)return IE(y,b),void S(v);let A=I();if(A.sendPackets>0&&A.OutgoingAvailableBandwidth>0){if(N===-1)return void(N=Date.now());if(Date.now()-N<1e3)return;let V=A.sendFrameRate,G=A.OutgoingAvailableBandwidth,[X,$]=xHe(y,V,G,z.adaptationConfig,v,E);$&&(b.qualityLimitationReason=$),X&&z.adaptationConfig.scale!==X.scale&&(_.debug("[".concat(y,"] applyAdaptation: ").concat(b.qualityLimitationReason,`
           sendFps `).concat(V,", bwe ").concat(G,", switch from ").concat(z.adaptationConfig.scale," to ").concat(X.scale," ")),z.adaptationConfig=FA(FA({},z.adaptationConfig),X),S(X))}},M("CHECK_LOCAL_STATS_INTERVAL")),j=FA({},v);RT.set(y,{timer:L,adaptationConfig:j,originConfig:v,adaptationFunc:S}),_.debug("[".concat(y,"] start adaptation, originConfig: ").concat(JSON.stringify(v),", degradationPreference: ").concat(E))})(this.id+s.mid,l,this,g,y=>{r&&this.updateAdaptation(r,y)},this.getLocalVideoStats.bind(this))}if(t._encoderConfig){var u;let{bitrateMax:g,frameRate:y,scaleResolutionDownBy:v}=t._encoderConfig;g&&(o.maxBitrate=1e3*g),(be(u=t._hints).call(u,hr.LOW_STREAM)||t.isUseScaleResolutionDownBy)&&(y&&(o.maxFramerate=$a(y)),v&&v>=1&&(o.scaleResolutionDownBy=v))}let{maxFramerate:h}=M("ENCODER_CONFIG_LIMIT");if(h&&typeof h=="number"&&(o.maxFramerate=o.maxFramerate?Math.min(o.maxFramerate,h):h),M("DSCP_TYPE")&&Nd()){var f;let g=M("DSCP_TYPE");be(f=["very-low","low","medium","high"]).call(f,g)&&(o.networkPriority=g)}let p=r.getParameters(),m=(i=p.encodings)===null||i===void 0?void 0:i[0];Ar()&&!m&&(a.encodings=[o]),m&&Object.assign(m,o),Object.assign(p,a),_.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(p.encodings))),await r.setParameters(p),await async function(g,y,v){try{var b;if(!Rt().supportSetRtpSenderParameters||!function(L){return L==="vp9"}(g)||!M("ENABLE_SVC"))return;let E={},S={},I=y.getParameters(),N=(b=I.encodings)===null||b===void 0?void 0:b[0];S.scalabilityMode=dD(v),N&&Object.assign(N,S),Object.assign(I,E),await y.setParameters(I),_.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: ".concat(JSON.stringify(I.encodings)))}catch(E){_.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed",E)}}(this.store.codec,r,M("SVC_MODE"))}async updateAdaptation(t,r){var n,i;if(!t)return _.debug("[updateAdaptation] no rtpSender found");if(!Rt().supportSetRtpSenderParameters)return _.debug("[updateAdaptation] Browser not support set rtp-sender parameters");let a={},{bitrateMax:o,frameRate:s,scaleResolutionDownBy:l}=r;o&&(a.maxBitrate=1e3*o),s&&(a.maxFramerate=$a(s)),l&&l>=1&&be(n=["vp8","vp9"]).call(n,this.store.codec)&&(a.scaleResolutionDownBy=l);let c=t.getParameters(),u=(i=c.encodings)===null||i===void 0?void 0:i[0];u&&Object.assign(u,a),Object.assign(c,{});try{await t.setParameters(c),_.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(c.encodings)))}catch(h){!("transport"in t)||t.transport&&t.transport.state==="connected"?this.peerConnectionState!=="connected"?_.debug("[updateAdaptation] peerConnection not connected}"):_.debug("[updateAdaptation] updateRtpSenderEncodings failed",h):_.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(t,r){try{if(!Rt().supportSetRtpSenderParameters||t.length!==r.length)return;for(let n=0;n<t.length;n++){let i=t[n],a=r[n];a instanceof sr&&!this.isVP8Simulcast(a)&&await this.updateRtpSenderEncodings(a,i.sender)}}catch{_.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,r,n){let i=$n.parse(t);return r.forEach((a,o)=>{let s=n[o],l=i.mediaDescriptions.find(c=>c.attributes.mid===s);l&&(Zm(l,a),_ie(l,a,this.store.codec))}),$n.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var r;(r=this.onFirstAudioReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var r;(r=this.onFirstVideoReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var r;(r=this.onFirstAudioDecoded)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,r,n)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,r,n)},this.statsFilter.onSelectedLocalCandidateChanged=(t,r)=>{var n;(n=this.onSelectedLocalCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,r)=>{var n;(n=this.onSelectedRemoteCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onFirstVideoDecodedTimeout=t=>{var r;(r=this.onFirstVideoDecodedTimeout)===null||r===void 0||r.call(this,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(t,r){if(t.length===r.length)for(let l=0;l<t.length;l++){var n,i,a,o,s;let c=t[l],u=r[l];if(u instanceof sr&&!be(n=u._hints).call(n,hr.LOW_STREAM)&&(i=u._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((a=u._encoderConfig)===null||a===void 0?void 0:a.bitrateMax)>200&&(o=u._scalabilityMode)!==null&&o!==void 0&&o.numSpatialLayers&&((s=u._scalabilityMode)===null||s===void 0?void 0:s.numSpatialLayers)>1&&this.store.codec==="vp8"){let h={},f={high:1e3*(u._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{rid:"m",active:!0,maxBitrate:f.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:f.high}];let p=c.sender.getParameters();await c.sender.setParameters(Object.assign(p,h))}}}async applySimulcastEncodings(t,r){if(!Ar()&&t.length===r.length)for(let n=0;n<t.length;n++){let i=r[n];if(i instanceof sr&&this.isVP8Simulcast(i)){let a=t[n],o={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};o.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];let l=a.sender.getParameters();await a.sender.setParameters(Object.assign(l,o))}}}isVP8Simulcast(t){var r,n,i,a,o;return!!(t instanceof sr&&M("SIMULCAST")&&this.store.codec==="vp8"&&!be(r=t._hints).call(r,hr.LOW_STREAM)&&(n=t._encoderConfig)!==null&&n!==void 0&&n.bitrateMax&&((i=t._encoderConfig)===null||i===void 0?void 0:i.bitrateMax)>200&&(a=t._scalabilityMode)!==null&&a!==void 0&&a.numSpatialLayers&&((o=t._scalabilityMode)===null||o===void 0?void 0:o.numSpatialLayers)>1)}logSDPExchange(t,r,n,i){if(M("SDP_LOGGING"))return _.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(r," SDP during P2PConnection.").concat(i,`
`),t),r==="offer"?a=>{this.logSDPExchange(a,"answer",n==="local"?"remote":"local",i)}:void 0}async getRemoteSSRC(t){if(!this.remoteSDP)return;let r=this.remoteSDP.getSSRC(t);return r&&r.length!==0?r[0].ssrcId:void 0}setConfiguration(t){if(Rt().supportPCSetConfiguration){let r=Jy.resolvePCConfiguration(t);this.peerConnection.setConfiguration(r)}}},Se(wt.prototype,"updateRemoteRTPCapabilities",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"updateRemoteRTPCapabilities"),wt.prototype),Se(wt.prototype,"connect",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"connect"),wt.prototype),Se(wt.prototype,"updateRemoteConnect",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"updateRemoteConnect"),wt.prototype),Se(wt.prototype,"createDataChannels",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"createDataChannels"),wt.prototype),Se(wt.prototype,"receive",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"receive"),wt.prototype),Se(wt.prototype,"batchReceive",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"batchReceive"),wt.prototype),Se(wt.prototype,"stopReceiving",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"stopReceiving"),wt.prototype),Se(wt.prototype,"muteRemote",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"muteRemote"),wt.prototype),Se(wt.prototype,"unmuteRemote",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"unmuteRemote"),wt.prototype),Se(wt.prototype,"muteLocal",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"muteLocal"),wt.prototype),Se(wt.prototype,"unmuteLocal",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"unmuteLocal"),wt.prototype),Se(wt.prototype,"close",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"close"),wt.prototype),Se(wt.prototype,"updateEncoderConfig",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"updateEncoderConfig"),wt.prototype),Se(wt.prototype,"updateSendParameters",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"updateSendParameters"),wt.prototype),Se(wt.prototype,"replaceTrack",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"replaceTrack"),wt.prototype),Se(wt.prototype,"updateAdaptation",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"updateAdaptation"),wt.prototype),Se(wt.prototype,"getRemoteSSRC",[ia],Object.getOwnPropertyDescriptor(wt.prototype,"getRemoteSSRC"),wt.prototype),wt);function ia(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,a=await i.lock("From P2PConnection.".concat(t));try{for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return await n.apply(this,s)}finally{a()}},r}var ht;function Sz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sz(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tz(e){var t,r,n,i=2;for(typeof Symbol<"u"&&(r=THe,n=Symbol.iterator);i--;){if(r&&(t=e[r])!=null)return t.call(e);if(n&&(t=e[n])!=null)return new L_(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function L_(e){function t(r){if(Object(r)!==r)return ye.reject(new TypeError(r+" is not an object."));var n=r.done;return ye.resolve(r.value).then(function(i){return{value:i,done:n}})}return L_=function(r){this.s=r,this.n=r.next},L_.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(r){var n=this.s.return;return n===void 0?ye.resolve({value:r,done:!0}):t(n.apply(this.s,arguments))},throw:function(r){var n=this.s.return;return n===void 0?ye.reject(r):t(n.apply(this.s,arguments))}},new L_(e)}var NE=(ht=class extends Tr{get state(){return this._state}set state(e){let t=this._state;this._state=e,this.emit(Be.StateChange,t,this._state)}constructor(e,t){super(),R(this,"isPlanB",void 0),R(this,"store",void 0),R(this,"statsUploader",void 0),R(this,"connection",void 0),R(this,"localTrackMap",new Map),R(this,"remoteUserMap",new Map),R(this,"localDataChannels",[]),R(this,"remoteDataChannelMap",new Map),R(this,"pendingLocalTracks",[]),R(this,"pendingRemoteTracks",[]),R(this,"pendingLocalDataChannels",[]),R(this,"pendingRemoteDataChannels",[]),R(this,"statsCollector",void 0),R(this,"shouldForwardP2PCreation",void 0),R(this,"iceFailedCount",0),R(this,"dtlsFailedCount",0),R(this,"mutex",new gi("P2PChannel-mutex")),R(this,"_state",Lt.Disconnected),R(this,"_pcStatsUploadType",M("NEW_ICE_RESTART")?Cc.FIRST_CONNECTION:Cc.OLD_FIRST_CONNECTION),R(this,"_isInRestartIce",!1),R(this,"_isStartRestartIce",!1),R(this,"_restartStates",["disconnected","failed"]),R(this,"_restartTimer",void 0),R(this,"_isFirstConnected",!0),R(this,"handleMuteLocalTrack",async(r,n,i)=>{let a=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==Lt.Connected)return void i(new ee(k.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));let o=this.filterTobeMutedTracks(r);if(o.length===0)return void n();let s=o.find(c=>c[0]==="videoLowTrack");s&&s[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(o.map(c=>{let[,{id:u}]=c;return u}));let l=this.createMuteMessage(o);await Qt(this,Be.RequestMuteLocal,l),n()}catch(o){i(o)}finally{a()}}),R(this,"handleUnmuteLocalTrack",async(r,n,i)=>{let a=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==Lt.Connected)return void i(new ee(k.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));let o=this.filterTobeUnmutedTracks(r);if(o.length===0)return void n();let s=o.find(c=>c[0]==="videoLowTrack");if(s){let c=s[1];if(c.track._originMediaStreamTrack.stop(),!M("DISABLE_DUAL_STREAM_USE_ENCODING")&&Rt().supportDualStreamEncoding){let u=r._mediaStreamTrack.clone();c.track._mediaStreamTrack=u,c.track._originMediaStreamTrack=u}else{let u=gD(r,kv(this,Be.RequestLowStreamParameter));c.track._mediaStreamTrack=u,c.track._originMediaStreamTrack=u}await new ye((u,h)=>{this.handleReplaceTrack(c.track,u,h,!0)})}await this.connection.unmuteLocal(o.map(c=>{let[,{id:u}]=c;return u}));let l=this.createUnmuteMessage(o);await Qt(this,Be.RequestUnmuteLocal,l),n()}catch(o){i(o)}finally{a()}}),R(this,"handleUpdateVideoEncoder",async(r,n,i)=>{let a=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{let o=this.localTrackMap.get(oe.LocalVideoTrack);if(!this.connection||!o||o.track!==r||this.state!==Lt.Connected)return void n();let{id:s,track:l}=o;await this.connection.updateSendParameters(s,l),await this.connection.updateEncoderConfig(s,l),this.emit(Be.UpdateVideoEncoder,l),n()}catch(o){i(o)}finally{a()}}),R(this,"handleUpdateVideoSendParameters",async(r,n,i)=>{let a=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{let o=this.localTrackMap.get(oe.LocalVideoTrack);if(!this.connection||!o||o.track!==r||this.state!==Lt.Connected)return void n();let{id:s,track:l}=o;await this.connection.updateSendParameters(s,l),n()}catch(o){i(o)}finally{a()}}),R(this,"handleReplaceMixingTrack",async(r,n,i,a)=>{if(!this.connection||this.state!==Lt.Connected)return void n();let o=UA([r]),s;_.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(o.getTrackId(),"]")),typeof a=="boolean"&&a||(s=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(r,o),n()}catch(c){i(c)}finally{var l;(l=s)===null||l===void 0||l()}}),R(this,"handleReplaceTrack",async(r,n,i,a)=>{let o;_.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(r.getTrackId(),"]")),typeof a=="boolean"&&a||(o=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var s;let c=Array.from(this.localTrackMap.entries()).find(u=>{let[,{track:h}]=u;return r===h});if(!this.connection||!c||this.state!==Lt.Connected)return void n();if(await((s=this.connection)===null||s===void 0?void 0:s.replaceTrack(r,c[1].id)),this.isPlanB){let u=c[1];u.id=r._mediaStreamTrack.id,this.localTrackMap.set(c[0],u)}if(c[0]===oe.LocalVideoTrack&&!M("DISABLE_DUAL_STREAM_USE_ENCODING")&&Rt().supportDualStreamEncoding){let u=this.localTrackMap.get(oe.LocalVideoLowTrack);if(u){let h=r._mediaStreamTrack.clone();u.track._originMediaStreamTrack.stop(),u.track._mediaStreamTrack=h,u.track._originMediaStreamTrack=h,await new ye((f,p)=>{this.handleReplaceTrack(u.track,f,p,!0)})}}n()}catch(c){i(c)}finally{var l;(l=o)===null||l===void 0||l()}}),R(this,"handleGetRTCStats",r=>{r(this.statsCollector.getRTCStats())}),R(this,"handleGetLocalVideoStats",r=>{r(this.statsCollector.getLocalVideoTrackStats())}),R(this,"handleGetLocalAudioStats",r=>{r(this.statsCollector.getLocalAudioTrackStats())}),R(this,"handleGetRemoteVideoStats",r=>this.statsCollector.getRemoteVideoTrackStats(r.uid)[r.uid]),R(this,"handleGetRemoteAudioStats",r=>this.statsCollector.getRemoteAudioTrackStats(r.uid)[r.uid]),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new Mie(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!Rt().supportUnifiedPlan||M("CHROME_FORCE_PLAN_B")&&Nd(),this.shouldForwardP2PCreation=M("FORWARD_P2P_CREATION")&&Rt().supportPCSetConfiguration&&bM(),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new Iy({},this.store):new tl({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e){var t;this.state=Lt.New;let r=this.shouldForwardP2PCreation&&((t=this.connection)===null||t===void 0?void 0:t.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!r||(r&&this.connection&&(_.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.isPlanB?new Iy(e,this.store):new tl(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new ee(k.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=M("NEW_ICE_RESTART")?Cc.FIRST_CONNECTION:Cc.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e){if(!this.connection)throw new ee(k.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");M("ENABLE_PREALLOC_PC")&&this.state===Lt.Connected?await this.connection.updateRemoteConnect(e):(this.store.peerConnectionStart(),await this.connection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Lt.Connected)}updateRemoteRTPCapabilities(e){let t=Array.from(this.localTrackMap.entries()).filter(i=>{var a;let[o]=i;return be(a=[oe.LocalVideoLowTrack,oe.LocalVideoTrack]).call(a,o)}),r=t.map(i=>{let[,{id:a}]=i;return a}),n=t.map(i=>{let[a]=i;return a});if(this.connection instanceof tl){if(xe.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(n),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!be(e).call(e,this.store.codec)){let i=["vp9","vp8","h264"].find(a=>be(e).call(e,a));i&&(this.store.codec=i,_.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(i,".")))}this.connection.updateRemoteRTPCapabilities(r,e)}}async getEstablishParams(){var e;if(this.connection instanceof tl&&this.connection.peerConnectionState!=="closed"&&be(e=[Lt.New,Lt.Connected]).call(e,this.state))return this.connection.establishPromise}async publishDataChannel(e){if(!this.connection||this.state!==Lt.Connected){if(this.state===Lt.Disconnected)throw new ee(k.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return e.forEach(r=>{var n;be(n=this.pendingLocalDataChannels).call(n,r)||this.pendingLocalDataChannels.push(r)}),[]}let t=this.filterTobePublishedDataChannels(e);return t.length===0?[]:(t.forEach(r=>{let n=Date.now();this.store.publish(r.id.toString(),"datachannel",n)}),await this.connection.createDataChannels(this.store.uid,t),t.forEach(r=>{this.localDataChannels.push(r);let n=Date.now();this.store.publish(r.id+"","datachannel",void 0,n)}),e.map(r=>({streamId:r.id,ordered:r.ordered,maxRetransmits:r.maxRetransmits,metadata:r.metadata,channelId:r._originDataChannelId})))}publish(e,t,r){var n=this;return ml(function*(){let i=yield Nt(n.mutex.lock("From P2PChannel.publish"));try{if(!n.connection||n.state!==Lt.Connected){if(n.state===Lt.Disconnected)throw new ee(k.UNEXPECTED_ERROR,"PeerConnection already disconnected.");n.throwIfTrackTypeNotMatch(e);let o=e.filter(s=>n.pendingLocalTracks.indexOf(s)===-1);return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(o))}n.store.pubId=n.store.pubId+1,fi.markPublishStart(n.store.clientId,n.store.pubId);let a=n.filterTobePublishedTracks(e,t,r);if(a.length===0)return void(yield Nt(n.tryToUnmuteAudio(e)));yield*fz(Tz(n.doPublish(n.connection,a)))}finally{i()}})()}doPublish(e,t){var r=this;return ml(function*(){t.forEach(h=>{let{track:f,type:p}=h,m=Date.now();r.store.publish(f.getTrackId(),p===oe.LocalAudioTrack?"audio":"video",m)}),r.bindLocalTrackEvents(t);let n=t.map(h=>{let{track:f}=h;return f}),i=yield Nt(e.send(t.map(h=>{let{track:f}=h;return f}),r.store.codec,r.store.audioCodec)),a=(yield Nt(i.next())).value,o=r.createGatewayPublishMessage(t,a),s;try{s=yield o}catch(h){throw i.throw(h),(h==null?void 0:h.code)===k.WS_ABORT&&t.forEach(f=>{let{track:p}=f;r.pendingLocalTracks.indexOf(p)===-1&&r.pendingLocalTracks.push(p)}),r.unbindLocalTrackEvents(t),h}let l=r.mapPubResToRemoteConfig(o,s),c=(yield Nt(i.next(l))).value,u=M("ENABLE_VIDEO_SEI");n.forEach(async h=>{let f=h.getRTCRtpTransceiver();f&&u&&(h.trackMediaType===Ne.VIDEO?await K7e(f.sender,h):h.trackMediaType===Ne.AUDIO&&await async function(p){if(!Rt().supportWebRTCEncodedTransform)return void _.warning("browser not support audio encoded transform");if(wE.has(p)||!p.track)return;let m={track:p.track};if(gd()){if(!p.createEncodedStreams)return void _.warning("browser not support createEncodedStreams() API");let y=null;try{y=p.createEncodedStreams()}catch(b){return void _.error("create audio-encoded-streams error",b&&b.message)}let v=new TransformStream({transform(b,E){m.controller||(m.controller=E),p.track&&p.track.id!==m.track.id&&(_.debug("audio track changed: ".concat(m.track.id," => ").concat(p.track.id)),m.track.removeEventListener("ended",g),m.track=p.track,m.track.addEventListener("ended",g)),E.enqueue(b)}});y.readable.pipeThrough(v).pipeTo(y.writable)}else if(ni()){if(typeof RTCRtpScriptTransform>"u")return void _.warning("browser not support RTCRtpScriptTransform");let y=k_(),v=new MessageChannel;await new ye(E=>y.onmessage=S=>{S.data==="registered"&&E(void 0)});let b=new RTCRtpScriptTransform(y,{name:"tx",port:v.port2},[v.port2]);p.transform=b,await new ye(E=>y.onmessage=S=>{S.data==="started"&&E(void 0)}),v.port1.onmessage=E=>{var S;E.data.transformed&&p.track&&((S=p.track)===null||S===void 0?void 0:S.id)!==m.track.id&&(_.debug("audio track changed: ".concat(m.track.id," => ").concat(p.track.id)),m.track.removeEventListener("ended",g),m.track=p.track,m.track.addEventListener("ended",g))},m.worker=y}function g(){if(p.track){if(this.id!==p.track.id)return;p.track.removeEventListener("ended",g)}let y=wE.get(p);if(y){wE.delete(p);try{var v,b;(v=y.controller)===null||v===void 0||v.terminate(),(b=y.worker)===null||b===void 0||b.terminate()}catch(E){_.warning(E&&E.message)}}}wE.set(p,m),p.track.addEventListener("ended",g)}(f.sender))}),t.forEach(h=>{let{type:f}=h;r.statsCollector.addLocalStats(f)}),r.assignLocalTracks(t,c),r.statsUploader.startUploadOutboundStats(),t.forEach(h=>{let{track:f,type:p}=h,m=Date.now();r.store.publish(f.getTrackId(),p===oe.LocalAudioTrack?"audio":"video",void 0,m)})})()}async updateVideoStreamParameter(e,t){let r=this.localTrackMap.get(t);if(!r)return;if(!(r.track instanceof sr))return _.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof tl||this.connection instanceof Iy))return _.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");let{track:n}=r,i=function(a,o){let s={};return a.height&&a.width&&(s.scaleResolutionDownBy=rD(a,o)),s.maxFramerate=a.framerate?$a(a.framerate):void 0,s.maxBitrate=a.bitrate?1e3*a.bitrate:void 0,s}(e,n);if(n._encoderConfig||(n._encoderConfig={}),t!==oe.LocalVideoLowTrack||!M("DISABLE_DUAL_STREAM_USE_ENCODING")&&Rt().supportDualStreamEncoding)i.scaleResolutionDownBy!=null&&(n._encoderConfig.scaleResolutionDownBy=i.scaleResolutionDownBy);else{let a=n._originMediaStreamTrack;if(!a.canvas)return _.warn("[".concat(n.getTrackId(),"] no canvas on track"));(function(o,s){let l=o.canvas;s.width&&(l.width=$a(s.width)),s.height&&(l.height=$a(s.height)),s.framerate&&(l.stopCapture&&l.stopCapture(),l.stopCapture=kM(()=>{!l.startCapture&&l.stopCapture&&l.stopCapture(),l.startCapture&&l.startCapture()},$a(s.framerate)))})(a,e)}i.maxBitrate!=null&&(n._encoderConfig.bitrateMax=i.maxBitrate/1e3),i.maxFramerate!=null&&(n._encoderConfig.frameRate&&typeof n._encoderConfig.frameRate=="object"?n._encoderConfig.frameRate.max=i.maxFramerate:n._encoderConfig.frameRate={max:i.maxFramerate}),_.debug("[".concat(n.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(n._encoderConfig))),await this.connection.updateRtpSenderEncodings(n)}publishLowStream(e){var t=this;return ml(function*(){if(!t.connection||t.state!==Lt.Connected)return;let r=yield Nt(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{let i=t.localTrackMap.get(oe.LocalVideoTrack);if(!i)throw new ee(k.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(oe.LocalVideoLowTrack))throw new ee(k.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));let a=[{track:t.getLowVideoTrack(i.track,e),type:oe.LocalVideoLowTrack}];if(yield*fz(Tz(t.doPublish(t.connection,a))),i.track.muted||!i.track.enabled){var n;let o=(n=t.localTrackMap.get(oe.LocalVideoLowTrack))===null||n===void 0?void 0:n.id;o!==void 0&&(yield Nt(t.connection.muteLocal([o])))}}finally{r()}})()}async republish(){this.pendingLocalTracks.length>0&&(_.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await ii(this,Be.RequestRePublish,this.pendingLocalTracks),this.emit(Be.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(_.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await ii(this,Be.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let t=this.pendingRemoteTracks.length-1;t>=0;t--){let{user:r,kind:n}=this.pendingRemoteTracks[t];(n!==Ne.AUDIO||r._audio_added_&&r._audioSSRC)&&(n!==Ne.VIDEO||r._video_added_&&r._videoSSRC)||this.pendingRemoteTracks.splice(t,1)}if(e)await ii(this,Be.RequestReSubscribe,this.pendingRemoteTracks);else for(let{user:t,kind:r}of this.pendingRemoteTracks)await this.subscribe(t,r,r===Ne.VIDEO?t._videoSSRC:t._audioSSRC);this.pendingRemoteTracks.forEach(t=>{let{user:r}=t;this.emit(Be.MediaReconnectEnd,r.uid)}),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==Lt.Connected)return void e.forEach(n=>{let i=this.pendingLocalTracks.indexOf(n);i!==-1&&this.pendingLocalTracks.splice(i,1)});let t=this.filterTobeUnpublishedTracks(e);if(t.length===0)return;let r=t.find(n=>n[0]==="videoLowTrack");return r&&r[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==Lt.Connected)return void e.forEach(r=>{let n=this.pendingLocalDataChannels.indexOf(r);n!==-1&&this.pendingLocalDataChannels.splice(n,1)});let t=this.filterTobeUnpublishedDataChannels(e);return t.length!==0?(t.forEach(r=>{let n=this.localDataChannels.indexOf(r);n!==-1&&this.localDataChannels.splice(n,1)}),this.localDataChannels.length===0&&await this.connection.stopDataChannels(this.store.uid),t.map(r=>r.id)):void 0}async unpublishLowStream(){if(!this.connection||this.state!==Lt.Connected)return;let e=this.localTrackMap.get(oe.LocalVideoLowTrack);if(!e)return;e.track.close();let t=[[oe.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){let r=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map(n=>{let[,{id:i}]=n;return i})),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map(n=>{let[i,{track:a}]=n;return{type:i,track:a}})),t.forEach(n=>{let[i]=n;this.statsCollector.removeLocalStats(i)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadOutboundStats(),r}async subscribeDataChannel(e,t){if(!this.connection||this.state!==Lt.Connected)throw new ee(k.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");let r=t.filter(n=>{var i;return!((i=this.remoteDataChannelMap.get(e))!==null&&i!==void 0&&i.get(n.id))});if(r.length!==0)return await this.connection.createDataChannels(e.uid,r),r.forEach(n=>{var i;this.remoteDataChannelMap.has(e)?(i=this.remoteDataChannelMap.get(e))===null||i===void 0||i.set(n.id,n):this.remoteDataChannelMap.set(e,new Map([[n.id,n]]));let a=this.pendingRemoteDataChannels.findIndex(o=>{let{user:s,id:l}=o;return s.uid===e.uid&&l===n.id});a!==-1&&this.pendingRemoteDataChannels.splice(a,1)}),r.map(n=>n.id)}async subscribe(e,t,r,n,i){var a;if(!this.connection||this.state!==Lt.Connected)throw new ee(k.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((a=this.remoteUserMap.get(e))!==null&&a!==void 0&&a.has(t))return;let o,s,l,c=this.connection.getPreMedia(r);if(c)_.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] preSSRCMap has ssrcId: ").concat(r,", no need to send sub to gateway.")),l=c.transceiver,o=c.track,s=c.id;else if(i){let f=i.find(m=>{let{stream_type:g}=m;return g===t});if(!f)throw new ee(k.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));let p=await this.connection.receive(t,f.ssrcs,String(e._uintid),f.attributes);this.connection instanceof tl&&(l=p.transceiver),o=p.track,s=p.id}else{let f=await this.connection.receive(t,[{ssrcId:r,rtx:n}],String(e._uintid),void 0);this.connection instanceof tl&&(l=f.transceiver),o=f.track,s=f.id}t===Ne.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new bm(o,e.uid,e._uintid,this.store),_.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),l&&e._audioTrack._updateRtpTransceiver(l),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new vm(o,e.uid,e._uintid,this.store),_.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),l&&e._videoTrack._updateRtpTransceiver(l),this.bindRemoteTrackEvents(e,e._videoTrack)),M("ENABLE_VIDEO_SEI")&&l&&(t==Ne.VIDEO?await async function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Rt().supportWebRTCEncodedTransform)return void _.warning("browser not support video encoded transform");if(!f.track)return;if(Ry.has(f)){let y=Ry.get(f);return void(y&&(y.onSei=p.onSei))}let m={track:f.track,onSei:p.onSei};if(gd()){if(!f.createEncodedStreams)return void _.warning("browser not support createEncodedStreams() API");let y=null;try{y=f.createEncodedStreams()}catch(b){return void _.error("create video-encoded-streams error",b&&b.message)}let v=new TransformStream({transform(b,E){m.controller||(m.controller=E),f.track&&f.track.id!==m.track.id&&(_.debug("video track changed: ".concat(m.track.id," => ").concat(f.track.id)),m.track.removeEventListener("ended",g),m.track=f.track,m.track.addEventListener("ended",g));let S=function(I){let N=new DataView(I.data),L=0;for(;L+4<I.data.byteLength;){if(N.getUint8(L+0)===0&&N.getUint8(L+1)===0&&N.getUint8(L+2)===0&&N.getUint8(L+3)===1&&N.getUint8(L+4)===6){let j=L+6,z=0,A=0;for(;(A=N.getUint8(j++))===255;)z+=255;z+=A;let V=W7e(I.data,j,z);return new Uint8Array(V)}L++}return null}(b);S&&m.onSei&&m.onSei(S),E.enqueue(b)}});y.readable.pipeThrough(v).pipeTo(y.writable)}else if(ni()){if(typeof RTCRtpScriptTransform>"u")return void _.warning("browser not support RTCRtpScriptTransform");let y=k_(),v=new MessageChannel;await new ye(E=>y.onmessage=S=>{S.data==="registered"&&E(void 0)});let b=new RTCRtpScriptTransform(y,{name:"rx",port:v.port2},[v.port2]);f.transform=b,await new ye(E=>y.onmessage=S=>{S.data==="started"&&E(void 0)}),v.port1.onmessage=E=>{var S;E.data.transformed&&f.track&&((S=f.track)===null||S===void 0?void 0:S.id)!==m.track.id?(_.debug("video track changed: ".concat(m.track.id," => ").concat(f.track.id)),m.track.removeEventListener("ended",g),m.track=f.track,m.track.addEventListener("ended",g)):E.data.sei&&m.onSei&&m.onSei(E.data.sei)},m.worker=y}function g(){if(f.track){if(this.id!==f.track.id)return;f.track.removeEventListener("ended",g)}(function(y){let v=Ry.get(y);if(v){Ry.delete(y);try{var b,E;(b=v.controller)===null||b===void 0||b.terminate(),(E=v.worker)===null||E===void 0||E.terminate()}catch(S){_.warning(S&&S.message)}}})(f)}Ry.set(f,m),f.track.addEventListener("ended",g)}(l.receiver,{onSei:f=>{var p;(p=e._videoTrack)===null||p===void 0||p._onSei(f)}}):t==Ne.AUDIO&&await async function(f){if(!Rt().supportWebRTCEncodedTransform)return void _.warning("browser not support audio encoded transform");if(EE.has(f))return;let p={track:f.track};if(gd()){if(!f.createEncodedStreams)return void _.warning("browser not support createEncodedStreams() API");let g=null;try{g=f.createEncodedStreams()}catch(v){return void _.error("create audio-encoded-streams error",v&&v.message)}let y=new TransformStream({transform(v,b){p.controller||(p.controller=b),f.track&&f.track.id!==p.track.id&&(_.debug("audio track changed: ".concat(p.track.id," => ").concat(f.track.id)),p.track.removeEventListener("ended",m),p.track=f.track,p.track.addEventListener("ended",m)),b.enqueue(v)}});g.readable.pipeThrough(y).pipeTo(g.writable)}else if(ni()){if(typeof RTCRtpScriptTransform>"u")return void _.warning("browser not support RTCRtpScriptTransform");let g=k_(),y=new MessageChannel;await new ye(b=>g.onmessage=E=>{E.data==="registered"&&b(void 0)});let v=new RTCRtpScriptTransform(g,{name:"rx",port:y.port2},[y.port2]);f.transform=v,await new ye(b=>g.onmessage=E=>{E.data==="started"&&b(void 0)}),y.port1.onmessage=b=>{var E;b.data.transformed&&f.track&&((E=f.track)===null||E===void 0?void 0:E.id)!==p.track.id&&(_.debug("audio track changed: ".concat(p.track.id," => ").concat(f.track.id)),p.track.removeEventListener("ended",m),p.track=f.track,p.track.addEventListener("ended",m))},p.worker=g}function m(){f.track.removeEventListener("ended",m),function(g){let y=EE.get(g);if(y){EE.delete(g);try{var v,b;(v=y.controller)===null||v===void 0||v.terminate(),(b=y.worker)===null||b===void 0||b.terminate()}catch(E){_.warning(E&&E.message)}}}(f)}EE.set(f,p),f.track.addEventListener("ended",m)}(l.receiver));let u=this.remoteUserMap.get(e);u?u.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();let h=this.pendingRemoteTracks.findIndex(f=>{let{user:p,kind:m}=f;return p.uid===e.uid&&t===m});h!==-1&&(this.pendingRemoteTracks.splice(h,1),this.emit(Be.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==Lt.Connected)throw new ee(k.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter(i=>{var a;let{user:o,mediaType:s}=i;return!((a=this.remoteUserMap.get(o))!==null&&a!==void 0&&a.has(s))});let t=[],r=new Map;e.forEach(i=>{if(!this.connection)return;let a=this.connection.getPreMedia(i.ssrcId);a?r.set(i.ssrcId,a):t.push(i)});let n=await this.connection.batchReceive(t.map(i=>{let{user:a,mediaType:o,ssrcId:s,rtxSsrcId:l}=i;return{kind:o,ssrcMsg:[{ssrcId:s,rtx:l}],mslabel:String(a._uintid)}}));t.forEach((i,a)=>{r.set(i.ssrcId,n[a])}),e.forEach(i=>{let{user:a,mediaType:o,ssrcId:s}=i,l=r.get(s);if(!l)return void _.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] cannot find ").concat(a.uid," subscribe data,").concat(o,", ").concat(s));let{track:c,id:u,transceiver:h}=l;o===Ne.AUDIO?(a._audioTrack?a._audioTrack._updateOriginMediaStreamTrack(c):(a._audioTrack=new bm(c,a.uid,a._uintid,this.store),_.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(a._audioTrack.getTrackId()))),h&&a._audioTrack._updateRtpTransceiver(h),this.bindRemoteTrackEvents(a,a._audioTrack)):(a._videoTrack?a._videoTrack._updateOriginMediaStreamTrack(c):(a._videoTrack=new vm(c,a.uid,a._uintid,this.store),_.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(a._videoTrack.getTrackId()))),h&&a._videoTrack._updateRtpTransceiver(h),this.bindRemoteTrackEvents(a,a._videoTrack));let f=this.remoteUserMap.get(a);f?f.set(o,u):this.remoteUserMap.set(a,new Map([[o,u]])),this.statsCollector.addRemoteStats(a.uid),this.statsUploader.startUploadInboundStats();let p=this.pendingRemoteTracks.findIndex(m=>{let{user:g,kind:y}=m;return g.uid===a.uid&&o===y});p!==-1&&(this.pendingRemoteTracks.splice(p,1),this.emit(Be.MediaReconnectEnd,a.uid))})}async unsubscribe(e,t,r){let n=this.pendingRemoteTracks.filter(o=>{let{user:s,kind:l}=o;return t!==void 0?s.uid===e.uid&&t===l:s.uid===e.uid});if(n.forEach(o=>{let s=this.pendingRemoteTracks.indexOf(o);this.pendingRemoteTracks.splice(s,1)}),this.connection&&this.state===Lt.Connected||r||n.forEach(o=>{let{kind:s}=o;var l;if(s===Ne.AUDIO)(l=e._audioTrack)===null||l===void 0||l._destroy(),e._audioTrack=void 0;else if(s===Ne.VIDEO){var c;(c=e._videoTrack)===null||c===void 0||c._destroy(),e._videoTrack=void 0}}),!this.connection||this.state!==Lt.Connected)return;let i=this.filterTobeUnSubscribedTracks(e,t);if(i.length===0)return;await this.connection.stopReceiving(i.map(o=>{let[,{id:s}]=o;return s}));let a=this.createUnsubscribeMessage(i);return this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),i.forEach(o=>{let[s,{kind:l}]=o;var c,u;if(l===Ne.VIDEO&&s._videoSSRC&&((c=this.connection)===null||c===void 0||c.setStatsRemoteVideoIsReady(s._videoSSRC,!1)),l===Ne.VIDEO)this.unbindRemoteTrackEvents(s._videoTrack),r||((u=s._videoTrack)===null||u===void 0||u._destroy(),s._videoTrack=void 0);else if(l===Ne.AUDIO){var h;this.unbindRemoteTrackEvents(s._audioTrack),!r&&((h=s._audioTrack)===null||h===void 0||h._destroy(),s._audioTrack=void 0)}}),a}async unsubscribeDataChannel(e,t){if(t.forEach(i=>{let a=this.pendingRemoteDataChannels.findIndex(o=>o.id===i.id);a!==-1&&this.pendingRemoteDataChannels.splice(a,1)}),!this.connection)return;let r=this.filterTobeUnSubscribedDataChannels(e,t);if(r.length===0)return;t.forEach(i=>{i._close()});let n=this.remoteDataChannelMap.get(e);return r.forEach(i=>{n&&n.delete(i.id)}),n&&n.size===0&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),r.map(i=>i.id)}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(let{user:i,mediaType:a}of e){let o=this.pendingRemoteTracks.filter(s=>{let{user:l,kind:c}=s;return a!==void 0?l.uid===i.uid&&a===c:l.uid===i.uid});o.forEach(s=>{let l=this.pendingRemoteTracks.indexOf(s);this.pendingRemoteTracks.splice(l,1)}),t=t.concat(o)}if(!this.connection||this.state!==Lt.Connected)return void t.forEach(i=>{let{user:a,kind:o}=i;var s;if(o===Ne.AUDIO)(s=a._audioTrack)===null||s===void 0||s._destroy(),a._audioTrack=void 0;else if(o===Ne.VIDEO){var l;(l=a._videoTrack)===null||l===void 0||l._destroy(),a._videoTrack=void 0}});let r=wl(e).call(e,(i,a)=>{let{user:o,mediaType:s}=a,l=this.filterTobeUnSubscribedTracks(o,s);return i.concat(l)},[]);if(r.length===0)return;await this.connection.stopReceiving(r.map(i=>{let[,{id:a}]=i;return a}));let n=this.createUnsubscribeAllMessage(r);return this.withdrawRemoteTracks(r),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),r.forEach(i=>{let[a,{kind:o}]=i;var s,l;if(o===Ne.VIDEO&&a._videoSSRC&&((s=this.connection)===null||s===void 0||s.setStatsRemoteVideoIsReady(a._videoSSRC,!1)),o===Ne.VIDEO)this.unbindRemoteTrackEvents(a._videoTrack),(l=a._videoTrack)===null||l===void 0||l._destroy(),a._videoTrack=void 0;else if(o===Ne.AUDIO){var c;this.unbindRemoteTrackEvents(a._audioTrack),(c=a._audioTrack)===null||c===void 0||c._destroy(),a._audioTrack=void 0}}),n}isPreSubScribe(e){return!this.connection||this.state!==Lt.Connected?!1:!!this.connection.getPreMedia(e)}async muteRemote(e,t){if(!this.connection)return;let r=this.remoteUserMap.get(e);if(!r)return void _.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!r.get(t))return void _.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));let n=t===Ne.VIDEO?e._videoSSRC:e._audioSSRC;n!==void 0&&this.connection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;let r=this.remoteUserMap.get(e);if(!r)return void _.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."));r.get(t)||_.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."))}getAllTracks(e){let t=this.localTrackMap.get(oe.LocalAudioTrack);if((t==null?void 0:t.track)instanceof _n){let r=t.track;return Array.from(this.localTrackMap.entries()).filter(n=>{let[i]=n;return i!==oe.LocalAudioTrack}).filter(n=>{let[i]=n;return!(e&&i===oe.LocalVideoLowTrack)}).map(n=>{let[,{track:i}]=n;return i}).concat(r.trackList)}return Array.from(this.localTrackMap.entries()).filter(r=>{let[n]=r;return!(e&&n===oe.LocalVideoLowTrack)}).map(r=>{let[,{track:n}]=r;return n})}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,r,n,i){if(e){let o=this.localTrackMap.get(oe.LocalAudioTrack),s=n?this.localTrackMap.get(oe.LocalVideoLowTrack):this.localTrackMap.get(oe.LocalVideoTrack);xe.publish(this.store.sessionId,{eventElapse:fi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:o==null?void 0:o.track.getTrackLabel(),videoName:s==null?void 0:s.track.getTrackLabel(),screenshare:(s==null?void 0:s.track._hints.indexOf(hr.SCREEN_TRACK))!==-1,audio:!!o,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var a;r||(r=[]);let o=r.find(l=>l instanceof Ir),s=n?(a=this.localTrackMap.get(oe.LocalVideoTrack))===null||a===void 0?void 0:a.track:r.find(l=>l instanceof sr);xe.publish(this.store.sessionId,{eventElapse:fi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:o==null?void 0:o.getTrackLabel(),videoName:s==null?void 0:s.getTrackLabel(),screenshare:(s==null?void 0:s._hints.indexOf(hr.SCREEN_TRACK))!==-1,audio:!!o,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,r,n){let i=n===Ne.VIDEO?r._videoSSRC:r._audioSSRC;i&&xe.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===Ne.VIDEO,audio:n===Ne.AUDIO,peerid:r.uid,subscribeRequestid:i,p2pid:this.store.p2pId,eventElapse:fi.measureFromSubscribeStart(this.store.clientId,i),preSsrc:this.isPreSubScribe(i)})}reset(){_.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new gi("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new Iy({},this.store):new tl({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();let e=this.localTrackMap.get(oe.LocalAudioTrack);if((e==null?void 0:e.track)instanceof _n){if(e.track.trackList.length>0){let t=e.track;e.track.trackList.forEach(r=>{t.removeAudioTrack(r)})}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=Lt.Disconnected}getStats(){var e;return(e=this.connection)===null||e===void 0?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return((t=this.connection)===null||t===void 0?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){let e=this.localTrackMap.get(oe.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){let e=this.localTrackMap.get(oe.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){let t=this.localTrackMap.get(e);return t&&t.track instanceof sr||t&&t.track instanceof Ir?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}getRemoteMedia(e){var t;let r=Array.from(eo(t=this.remoteUserMap).call(t)).find(n=>n.uid===e);return r?{audioTrack:r.audioTrack,audioSSRC:r._audioSSRC,videoTrack:r.videoTrack,videoSSRC:r._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(r=>{let[n]=r;return{uid:n.uid,level:n.audioTrack?100*n.audioTrack._source.getAccurateVolumeLevel():0}}),t=this.localTrackMap.get(oe.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Bb(e).call(e,(r,n)=>r.level-n.level),e}async disconnectForReconnect(){this.connection&&(_.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=Lt.Reconnecting,M("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t]=e;var r;t._videoTrack&&t._videoTrack._player&&((r=t._videoTrack._player.getVideoElement())===null||r===void 0||r.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new Iy({},this.store):new tl({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(e=>{var t;let[r,{track:n}]=e;switch(r){case oe.LocalVideoTrack:be(t=n._hints).call(t,hr.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case oe.LocalAudioTrack:n instanceof _n?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);case oe.LocalVideoLowTrack:}}),this.emit(Be.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;Array.from(eo(r).call(r)).forEach(n=>{this.setPendingRemoteMedia(t,n)}),this.emit(Be.MediaReconnectStart,t.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.localDataChannels.length!==0&&(this.localDataChannels.forEach(e=>{this.pendingLocalDataChannels.push(e)}),this.localDataChannels.length=0),this.remoteDataChannelMap.size!==0&&(Array.from(this.remoteDataChannelMap.entries()).forEach(e=>{let[t,r]=e;Array.from(eo(r).call(r)).forEach(n=>{this.setPendingRemoteDataChannel(t,n)})}),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),_.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(let r of this.pendingRemoteDataChannels){let{user:n,id:i}=r;if((e instanceof Gu?e.uid:e)===n.uid&&i===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(let r of this.pendingRemoteTracks){let{user:n,kind:i}=r;if((e instanceof Gu?e.uid:e)===n.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return ml(function*(){if(!t.connection||t.state!==Lt.Connected)return;let r=yield Nt(t.mutex.lock("From P2PChannel.restartICE")),n;try{n=yield Nt(t.connection.restartICE(e));let a=yield Nt(n.next());if(a.done)return;let o=a.value,s=yield o;switch(t.reportPCDisconnectedOrFailed(e),e){case Ba.TCP:t._pcStatsUploadType=Cc.TCP_RESTART;break;case Ba.RELAY:t._pcStatsUploadType=Cc.RELAY_RESTART;break;default:t._pcStatsUploadType=Cc.OLD_RESTART}t._isInRestartIce=!0,n.next(s)}catch(a){var i;(i=n)===null||i===void 0||i.throw(a)}finally{r()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;let e=this.connection.getStats(),t=this.localTrackMap.get(oe.LocalVideoTrack),r=this.localTrackMap.get(oe.LocalAudioTrack),n=e.videoSend.find(p=>p.ssrc===(t==null?void 0:t.ssrcs[0].ssrcId)),i=e.audioSend.find(p=>p.ssrc===(r==null?void 0:r.ssrcs[0].ssrcId));if(!n||!i)return 1;let a=Bo(this,Be.NeedSignalRTT),o=n?n.rttMs:void 0,s=i?i.rttMs:void 0,l=o&&s?(o+s)/2:o||s,c=(l&&a?(l+a)/2:l||a)||0,u=100*e.sendPacketLossRate*.7/50+.3*c/1500,h=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,f=t==null?void 0:t.track;if(f&&f._encoderConfig&&f._hints.indexOf(hr.SCREEN_TRACK)===-1){let p=f._encoderConfig.bitrateMax,m=e.bitrate.actualEncoded;if(p&&m){let g=(1e3*p-m)/(1e3*p);return One[g<.15?0:g<.3?1:g<.45?2:g<.6?3:4][h]}}return h}getDownlinkNetworkQuality(){if(!this.connection)return 0;let e=this.connection.getStats(),t=0;return Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n]=r,i=n._audioSSRC,a=n._videoSSRC,o=e.audioRecv.find(m=>m.ssrc===i),s=e.videoRecv.find(m=>m.ssrc===a);if(!o&&!s)return void(t+=1);let l=Bo(this,Be.NeedSignalRTT),c=e.rtt,u=(c&&l?(c+l)/2:c||l)||0,h=o?o.jitterMs:void 0,f=e.recvPacketLossRate,p=.7*f*100/50+.3*u/1500;h&&(p=.6*f*100/50+.2*u/1500+.2*h/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5}),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new ye((t,r)=>{this.handleMuteLocalTrack(e,t,r)})}async replaceTrack(e,t){var r;if(_.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==Lt.Connected)return;let n=Array.from(this.localTrackMap.entries()).find(a=>{let[,{track:o}]=a;return e===o});if(!n)return;let i=n[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:i}]),this.bindLocalTrackEvents([{track:t,type:i}]),n[1].track=t),await((r=this.connection)===null||r===void 0?void 0:r.replaceTrack(t,n[1].id)),this.isPlanB){let a=n[1];a.id=t._mediaStreamTrack.id,this.localTrackMap.set(i,a)}if(i===oe.LocalVideoTrack&&!M("DISABLE_DUAL_STREAM_USE_ENCODING")&&Rt().supportDualStreamEncoding){let a=this.localTrackMap.get(oe.LocalVideoLowTrack);if(a){let o=e._mediaStreamTrack.clone();a.track._originMediaStreamTrack.stop(),a.track._mediaStreamTrack=o,a.track._originMediaStreamTrack=o,await new ye((s,l)=>{this.handleReplaceTrack(a.track,s,l,!0)})}}}filterTobePublishedTracks(e,t,r){let n=[],i=this.getAllTracks();e=Yp(e=e.filter(l=>i.indexOf(l)===-1));let a,o=!1,s=this.localTrackMap.get(oe.LocalAudioTrack);for(let l of e){if(l instanceof sr&&(this.localTrackMap.has(oe.LocalVideoTrack)||o?new ee(k.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:l,type:oe.LocalVideoTrack}),o=!0),t)){let c=this.getLowVideoTrack(l,r);n.push({track:c,type:oe.LocalVideoLowTrack})}if(l instanceof Ir)if(s){let c=s.track;if(c instanceof _n)yD([l]),c.addAudioTrack(l),this.bindLocalAudioTrackEvents(l,!0);else{let u=UA([c,l]);_.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(u.getTrackId(),"]")),this.replaceTrack(c,u)}}else a instanceof _n?(yD([l]),a.addAudioTrack(l)):a||!l._useAudioElement&&Rt().webAudioMediaStreamDest&&!l._bypassWebAudio?a=UA(a?[l,a]:[l]):a=l}return a&&(_.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(a.getTrackId(),"]")),n.push({track:a,type:oe.LocalAudioTrack})),n}filterTobeUnpublishedTracks(e){let t=[],r=this.getAllTracks();e=Yp(e=e.filter(n=>r.indexOf(n)!==-1));for(let n of e){if(n instanceof Ir){let i=this.localTrackMap.get(oe.LocalAudioTrack);if(!i)continue;i.track instanceof _n?(i.track.removeAudioTrack(n),this.unbindLocalAudioTrackEvents(n),i.track.trackList.length===0&&(t.push([oe.LocalAudioTrack,i]),i.track.close())):t.push([oe.LocalAudioTrack,i])}if(n instanceof sr){let i=this.localTrackMap.get(oe.LocalVideoTrack);if(!i)continue;t.push([oe.LocalVideoTrack,i]);let a=this.localTrackMap.get(oe.LocalVideoLowTrack);a&&t.push([oe.LocalVideoLowTrack,a])}}return t}filterTobePublishedDataChannels(e){return e=(e=Yp(e)).filter(t=>this.localDataChannels.findIndex(r=>r.id===t.id)===-1)}filterTobeUnpublishedDataChannels(e){return e=(e=(e=Yp(e)).filter(t=>this.localDataChannels.indexOf(t)!==-1)).filter(t=>t._originDataChannel)}bindLocalTrackEvents(e){e.forEach(t=>{let{track:r,type:n}=t;switch(n){case oe.LocalVideoTrack:r.addListener(we.GET_STATS,this.handleGetLocalVideoStats),r.addListener(we.GET_RTC_STATS,this.handleGetRTCStats),r.addListener(we.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(we.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(we.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.addListener(we.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.addListener(we.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.addListener(we.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(we.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case oe.LocalAudioTrack:this.bindLocalAudioTrackEvents(r);case oe.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){e instanceof _n?e.trackList.forEach(r=>{r.addListener(we.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(we.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(we.GET_STATS,this.handleGetLocalAudioStats),r.addListener(we.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(we.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(we.GET_STATS,this.handleGetLocalAudioStats),e.addListener(we.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(we.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(we.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(we.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(we.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(we.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(t=>{let[r,{track:n}]=t;return{track:n,type:r}})),e.forEach(t=>{let{track:r,type:n}=t;switch(n){case oe.LocalVideoTrack:r.off(we.GET_STATS,this.handleGetLocalVideoStats),r.off(we.GET_RTC_STATS,this.handleGetRTCStats),r.off(we.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(we.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(we.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.off(we.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.off(we.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.off(we.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(we.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case oe.LocalAudioTrack:this.unbindLocalAudioTrackEvents(r);case oe.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof _n?e.trackList.forEach(t=>{t.off(we.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(we.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(we.GET_STATS,this.handleGetLocalAudioStats),t.off(we.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(we.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(we.GET_STATS,this.handleGetLocalAudioStats),e.off(we.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(we.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(we.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(we.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(we.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(we.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof vm&&t.addListener(we.GET_STATS,r=>{r(this.handleGetRemoteVideoStats(e))}),t instanceof bm&&t.addListener(we.GET_STATS,r=>{r(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(we.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;r.has(Ne.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),r.has(Ne.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)})}createGatewayPublishMessage(e,t){return e.map((r,n)=>{var i;let a,o,{track:s,type:l}=r;switch(l){case oe.LocalAudioTrack:a=jt.Audio,o={dtx:s instanceof _T&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case oe.LocalVideoTrack:a=be(i=s._hints).call(i,hr.SCREEN_TRACK)?jt.Screen:jt.High,o=jl(jl({},w8(s)),{},{codec:this.store.codec,svc_mode:dD()});break;case oe.LocalVideoLowTrack:a=jt.Low,o=jl(jl({},w8(s)),{},{codec:this.store.codec,svc_mode:dD()})}return{stream_type:a,attributes:o,ssrcs:t[n]}})}createGatewayUnpublishMessage(e){return e.map(t=>{var r;let n,[i,{track:a,ssrcs:o,id:s}]=t;switch(i){case oe.LocalVideoTrack:n=be(r=a._hints).call(r,hr.SCREEN_TRACK)?jt.Screen:jt.High;break;case oe.LocalAudioTrack:n=jt.Audio;break;case oe.LocalVideoLowTrack:n=jt.Low}return{stream_type:n,ssrcs:o,mid:s}})}assignLocalTracks(e,t){e.forEach((r,n)=>{let{track:i,type:a}=r;this.localTrackMap.set(a,{track:i,id:t[n].id,ssrcs:t[n].localSSRC})})}withdrawLocalTracks(e){e.forEach(t=>{let[r]=t;this.localTrackMap.delete(r)})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(Be.PeerConnectionStateChange,t),t!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),t==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),M("NEW_ICE_RESTART")){var r;if(be(r=this._restartStates).call(r,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;let n=o=>{(e.iceConnectionState==="disconnected"||e.iceConnectionState==="checking"||e.iceConnectionState==="failed")&&(_.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(o)),Bo(this,Be.QueryClientConnectionState)==="CONNECTED"&&this.emit(Be.RequestRestartICE,o))},i=()=>{e.iceConnectionState!=="disconnected"&&e.iceConnectionState!=="checking"&&e.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),_.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(Be.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},a=M("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(M("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&Rt().supportPCSetConfiguration)n(Ba.RELAY),this._restartTimer=window.setTimeout(i,a);else if(Ar())n(Ba.UDP),this._restartTimer=window.setTimeout(i,4e3);else{if(n(Ba.TCP),Rt().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{n(Ba.RELAY),this._restartTimer=window.setTimeout(i,a)},a));this._restartTimer=window.setTimeout(i,a)}},800))}}else{if(t==="disconnected"&&e.iceConnectionState==="disconnected")return setTimeout(()=>{e.iceConnectionState==="disconnected"&&M("ICE_RESTART")&&Bo(this,Be.QueryClientConnectionState)==="CONNECTED"&&this.emit(Be.RequestRestartICE)},800),void setTimeout(()=>{e.peerConnectionState==="disconnected"&&(_.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(Be.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);t==="failed"&&(_.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(Be.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=t=>{t!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(t,")")),xe.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:t,tag:Nr.TRACER}).onSuccess(),this.emit(Be.IceConnectionStateChange,t)},e.onICETransportStateChange=t=>{_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(t,")"))},e.onDTLSTransportStateChange=t=>{_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(t,")"))},e.onDTLSTransportError=t=>{_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(t,")"))},e.onFirstAudioDecoded=t=>{var r;let n=Array.from(eo(r=this.remoteUserMap).call(r)).find(a=>a._audioSSRC===t);var i;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),(i=n.audioTrack)===null||i===void 0||i.emit(ym.FIRST_FRAME_DECODED),xe.firstRemoteFrame(this.store.sessionId,Un.FIRST_AUDIO_DECODE,Er.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:fi.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=t=>{var r;let n=Array.from(eo(r=this.remoteUserMap).call(r)).find(i=>i._audioSSRC===t);n&&xe.firstRemoteFrame(this.store.sessionId,Un.FIRST_AUDIO_RECEIVED,Er.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:fi.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(t,r,n)=>{this.reportVideoFirstFrameDecoded(t,r,n)},e.onFirstVideoReceived=t=>{var r;let n=Array.from(eo(r=this.remoteUserMap).call(r)).find(i=>i._videoSSRC===t);n&&xe.firstRemoteFrame(this.store.sessionId,Un.FIRST_VIDEO_RECEIVED,Er.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:fi.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(t,r)=>{let n=t.candidateType==="relay",i=r.candidateType==="relay";r.candidateType!=="unknown"&&n===i||this.emit(Be.ConnectionTypeChange,n),_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(rd(r))," -> ").concat(JSON.stringify(rd(t)),")"))},e.onSelectedRemoteCandidateChanged=(t,r)=>{_.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(rd(r))," -> ").concat(JSON.stringify(rd(t)),")"))},e.onFirstVideoDecodedTimeout=t=>{this.reportVideoFirstFrameDecoded(t,void 0,void 0,!0)},e.getLocalVideoStats=()=>{let t=this.statsCollector.getLocalVideoTrackStats(),r=this.statsCollector.getRTCStats();return jl(jl({},t),r)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.getLocalVideoStats=void 0}filterTobeMutedTracks(e){let t=[];if(this.getAllTracks().indexOf(e)===-1)return t;let r=this.localTrackMap.get(oe.LocalAudioTrack);if(e instanceof Ir&&(r==null?void 0:r.track)instanceof _n)return r.track.isActive||t.push([oe.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:a}]=i;return e===a});if(n&&(t.push(n),n[0]===oe.LocalVideoTrack)){let i=this.localTrackMap.get(oe.LocalVideoLowTrack);i&&t.push([oe.LocalVideoLowTrack,i])}return t}filterTobeUnmutedTracks(e){let t=[],r=this.localTrackMap.get(oe.LocalAudioTrack);if(e instanceof Ir&&(r==null?void 0:r.track)instanceof _n)return r.track.isActive&&t.push([oe.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:a}]=i;return e===a});if(n)if(n[0]===oe.LocalVideoTrack){t.push(n);let i=this.localTrackMap.get(oe.LocalVideoLowTrack);i&&t.push([oe.LocalVideoLowTrack,i])}else t.push(n);return t}createMuteMessage(e){return e.map(t=>{var r;let n,[i,{track:a,ssrcs:o,id:s}]=t;switch(i){case oe.LocalAudioTrack:n=jt.Audio;break;case oe.LocalVideoTrack:n=be(r=a._hints).call(r,hr.SCREEN_TRACK)?jt.Screen:jt.High;break;case oe.LocalVideoLowTrack:n=jt.Low}return{stream_type:n,ssrcs:o,mid:s}})}createUnmuteMessage(e){return e.map(t=>{var r;let n,[i,{track:a,ssrcs:o,id:s}]=t;switch(i){case oe.LocalAudioTrack:n=jt.Audio;break;case oe.LocalVideoTrack:n=be(r=a._hints).call(r,hr.SCREEN_TRACK)?jt.Screen:jt.High;break;case oe.LocalVideoLowTrack:n=jt.Low}return{stream_type:n,ssrcs:o,mid:s}})}filterTobeUnSubscribedTracks(e,t){let r=[],n=this.remoteUserMap.get(e);if(!n)return r;if(t){let i=n.get(t);if(!i)return r;r.push([e,{kind:t,id:i}])}else Array.from(n.entries()).forEach(i=>{let[a,o]=i;r.push([e,{kind:a,id:o}])});return r}filterTobeUnSubscribedDataChannels(e,t){let r=[];return t.forEach(n=>{var i;(i=this.remoteDataChannelMap.get(e))!==null&&i!==void 0&&i.has(n.id)&&r.push(n)}),r}createUnsubscribeMessage(e){let t=[];return e.forEach(r=>{let[n,{kind:i,id:a}]=r;switch(i){case Ne.VIDEO:return void(n._videoSSRC&&t.push({stream_type:Ne.VIDEO,ssrcId:n._videoSSRC}));case Ne.AUDIO:return void(n._audioSSRC&&t.push({stream_type:Ne.AUDIO,ssrcId:n._audioSSRC}))}}),t}createUnsubscribeAllMessage(e){let t=new Map;return e.forEach(r=>{let[n,{kind:i}]=r;if(t.has(n)){let a=t.get(n);i===Ne.VIDEO?a|=wn.Video:a|=wn.Audio,t.set(n,a)}else i===Ne.VIDEO?t.set(n,wn.Video):t.set(n,wn.Audio)}),{users:Array.from(t.entries()).map(r=>{let[n,i]=r;return{stream_id:n.uid,stream_type:i}})}}withdrawRemoteTracks(e){e.forEach(t=>{let[r,{kind:n}]=t,i=this.remoteUserMap.get(r);i&&(i.delete(n),Array.from(i.entries()).length===0&&this.remoteUserMap.delete(r))})}async updateBitrateLimit(e){let t=this.localTrackMap.get(oe.LocalVideoTrack),r=this.localTrackMap.get(oe.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),r&&e.low_stream_uplink&&await r.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(e,t){return e.map((r,n)=>{var i;let{stream_type:a}=r;return(i=t.find(o=>{let{stream_type:s}=o;return a===s}))===null||i===void 0?void 0:i.attributes})}async tryToUnmuteAudio(e){for(let r=0;r<e.length;r++)if(e[r]instanceof Ir){var t;let n=this.filterTobeUnmutedTracks(e[r]);if(n.length===0)continue;await((t=this.connection)===null||t===void 0?void 0:t.unmuteLocal(n.map(a=>{let[,{id:o}]=a;return o})));let i=this.createUnmuteMessage(n);return void await Qt(this,Be.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!((t=this.connection)===null||t===void 0||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Be.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(Be.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await zn(EM(this.dtlsFailedCount,Zr)),this.emit(Be.RequestReconnect)}async reconnectP2P(){let e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await ii(this,Be.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(Be.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(oe.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof sr)}throwIfTrackTypeNotMatch(e){if(e.filter(t=>t instanceof sr).length>1)throw new ee(k.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(t=>t instanceof Ir).length>1&&(e.some(t=>t instanceof Ir&&t._bypassWebAudio)||!Rt().webAudioMediaStreamDest))throw new ee(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(let t of e){if(t instanceof sr&&this.pendingLocalTracks.some(r=>r instanceof sr))throw new ee(k.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof Ir&&this.pendingLocalTracks.some(r=>r instanceof Ir)&&(!Rt().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some(r=>r instanceof Ir&&r._bypassWebAudio)))throw new ee(k.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){let r=!M("DISABLE_DUAL_STREAM_USE_ENCODING")&&Rt().supportDualStreamEncoding,n=jl(jl({},{width:160,height:120,framerate:15,bitrate:50}),t),i;i=r?e._mediaStreamTrack.clone():gD(e,n);let a=rr(8,"track-low-"),o=new sr(i,jl(jl({},r&&{scaleResolutionDownBy:rD(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,a);return o.on(Hh.TRANSCEIVER_UPDATED,s=>{e._updateRtpTransceiver(s,Qm.LOW_STREAM)}),o._hints.push(hr.LOW_STREAM),e.on("sei-to-send",s=>{o.emit("sei-to-send",s)}),e.addListener(we.NEED_CLOSE,()=>{o.close()}),o}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof tl){var i,a,o,s;let l=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:c,dtlsTransportState:u,peerConnectionState:h}=this.connection,{local:f,remote:p}=await this.connection.getSelectedCandidatePair();xe.pcStats(this.store.sessionId,{startTime:l,eventElapse:e-l||0,iceconnectionsate:c,dtlsstate:u,connectionstate:h,intSucc:t?1:2,error:n,selectedLocalCandidateProtocol:(i=f==null?void 0:f.protocol)!==null&&i!==void 0?i:"",selectedLocalCandidateType:(a=f.candidateType)!==null&&a!==void 0?a:"",selectedLocalCandidateAddress:"".concat(f.address,":").concat(f.port),selectedRemoteCandidateProtocol:(o=p.protocol)!==null&&o!==void 0?o:"",selectedRemoteCandidateType:(s=p.candidateType)!==null&&s!==void 0?s:"",selectedRemoteCandidateAddress:"".concat(p.address,":").concat(p.port),restartCnt:r,preallocation:this.connection.isPreallocation})}}reportVideoFirstFrameDecoded(e,t,r,n){var i;let a=Array.from(eo(i=this.remoteUserMap).call(i)).find(o=>o._videoSSRC===e);if(a){n||this.store.subscribe(a.uid,"video",void 0,void 0,void 0,void 0,Date.now());let o=this.store.keyMetrics,s=o.subscribe.find(l=>l.userId===a.uid&&l.type==="video");xe.firstRemoteVideoDecode(this.store.sessionId,Un.FIRST_VIDEO_DECODE,Er.FIRST_VIDEO_DECODE,{peer:a._uintid,videowidth:t,videoheight:r,subscribeElapse:fi.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:o.requestAPEnd||0,apStart:o.requestAPStart||0,joinGwEnd:o.joinGatewayEnd||0,joinGwStart:o.joinGatewayStart||0,pcEnd:o.peerConnectionEnd||0,pcStart:o.peerConnectionStart||0,subscriberEnd:(s==null?void 0:s.subscribeEnd)||0,subscriberStart:(s==null?void 0:s.subscribeStart)||0,videoAddNotify:(s==null?void 0:s.streamAdded)||0,state:n?1:0,firstFrame:(s==null?void 0:s.firstFrame)||0})}}async remoteMediaSsrcChanged(e,t,r){if(!this.connection)return!1;let n=this.remoteUserMap.get(e);if(!n)return!1;let i=n.get(t);if(!i)return!1;let a=await this.connection.getRemoteSSRC(i);return a!==void 0&&a!==r}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(e=>{let[t,{track:r}]=e;t===oe.LocalVideoLowTrack?r._updateRtpTransceiver(void 0,Qm.LOW_STREAM):r._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof tl&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===Cc.TCP_RESTART&&e===Ba.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,Cc.DISCONNECTED_OR_FAILED)))}},Se(ht.prototype,"startP2PConnection",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"startP2PConnection"),ht.prototype),Se(ht.prototype,"connect",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"connect"),ht.prototype),Se(ht.prototype,"updateRemoteRTPCapabilities",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"updateRemoteRTPCapabilities"),ht.prototype),Se(ht.prototype,"publishDataChannel",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"publishDataChannel"),ht.prototype),Se(ht.prototype,"unpublish",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"unpublish"),ht.prototype),Se(ht.prototype,"unpublishDataChannel",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"unpublishDataChannel"),ht.prototype),Se(ht.prototype,"unpublishLowStream",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"unpublishLowStream"),ht.prototype),Se(ht.prototype,"subscribeDataChannel",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"subscribeDataChannel"),ht.prototype),Se(ht.prototype,"subscribe",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"subscribe"),ht.prototype),Se(ht.prototype,"massSubscribe",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"massSubscribe"),ht.prototype),Se(ht.prototype,"unsubscribe",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"unsubscribe"),ht.prototype),Se(ht.prototype,"unsubscribeDataChannel",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"unsubscribeDataChannel"),ht.prototype),Se(ht.prototype,"massUnsubscribe",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"massUnsubscribe"),ht.prototype),Se(ht.prototype,"muteRemote",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"muteRemote"),ht.prototype),Se(ht.prototype,"unmuteRemote",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"unmuteRemote"),ht.prototype),Se(ht.prototype,"hasRemoteMediaWithLock",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"hasRemoteMediaWithLock"),ht.prototype),Se(ht.prototype,"disconnectForReconnect",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"disconnectForReconnect"),ht.prototype),Se(ht.prototype,"updateBitrateLimit",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"updateBitrateLimit"),ht.prototype),Se(ht.prototype,"remoteMediaSsrcChanged",[Pi],Object.getOwnPropertyDescriptor(ht.prototype,"remoteMediaSsrcChanged"),ht.prototype),ht);function Pi(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,a=await i.lock("From P2PChannel.".concat(t));try{for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return await n.apply(this,s)}finally{a()}},r}var $ie={};function Ay(e){(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&_.debug("install service ".concat(e.name)),$ie[e.name]=e}function Qy(e){let t=$ie[e];if(!t)throw new ee(k.INVALID_OPERATION,"".concat(e," not found, please use AgoraRTC.use(").concat(e,"Service) to load it first"));return t}function Cz(e,t){return Qy("DataStream").create(e,t)}function xz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xz(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var IHe=Date.now(),NHe=20,bD=new Map,j_=new Map;async function Hie(e){let t=bD.get(e),r=Array.isArray(t)&&t[t.length-1],n=j_.get(e);if(!r)return void(n.isSyncing=!1);let i={uid:r.uid,payload:r.payload};n.firstRecvTs===0&&(n.firstRecvTs=r.recvTs,n.firstSendTs=r.sendTs);let a=r.sendTs-n.firstSendTs,o=a-(Date.now()-n.firstRecvTs);o>0&&(n.firstRecvTs=Date.now()-a);let s=r.mediaDelay+o;s<=0?(t.pop(),zie(r.context,i),s=0):s=Math.min(s,NHe),setTimeout(()=>t.length&&Hie(e),s)}function zie(e,t){e.safeEmit(vt.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function AHe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return zie(r,{uid:e.uid,payload:e.payload});let n="".concat(r.id,"-").concat(e.uid),i=bD.get(n)||[],a=i.findIndex(c=>e.sendTs>=c.sendTs),o=Rz(Rz({},e),{},{context:r,mediaDelay:t,recvTs:Date.now()});a===-1?i.push(o):i.splice(a,0,o),bD.set(n,i);let s=!1;var l;j_.has(n)?s=!((l=j_.get(n))===null||l===void 0||!l.isSyncing):j_.set(n,{isSyncing:s,firstRecvTs:0,firstSendTs:0}),s||Hie(n)}var OHe=Ct().name;function Iz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iz(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var _m="websdk_ng_cache_parameter",kHe=M("MAX_PRELOAD_ASYNC_LENGTH"),PHe=1e4,vh=new Map,bh=[],VA=null,BA=0,$A=0,AE=new Map,DHe=function(e,t){let r=[],n=0,i=async()=>{let a=r.shift();a&&await a(),r.length>0&&n<t?i():n--};return async function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return new ye(async(l,c)=>{r.push(async()=>{try{let u=await e(...o);l(u)}catch(u){c(u)}}),n<t&&(n++,i())})}}(Gie,kHe),HA=pa.CancelToken.source();async function Gie(e,t,r,n,i,a){try{if(!M("ENABLE_PRELOAD"))return;if(!Rt().supportWebCrypto)return void Ad(()=>{_.warn("Your browser does not support preloading, this feature  be run in a secure environment")},"preload_webcrypto_not_supported");if(!r&&r!==null)throw new ee(k.INVALID_PARAMS,"Invalid token: ".concat(r,". If you don not use token, set it to null"));r&&Fn(r,"token",1,2047),Fn(e,"appid",1,2047),Rx(t),n&&Ix(n);let o=Xp();_.debug("preload channel ".concat(t,", uid is ").concat(n));let s={appId:e,cname:t,token:r||e,uid:typeof n!="string"?n:null,sid:o,proxyServer:i},l,c;typeof n=="string"?(s.stringUid=n,[c,l]=await ye.all([eHe(n,{sid:o,appId:e},HA.token),DH(Nz(Nz({},s),{},{token:r||e,uid:0}),HA.token)]),s.uid=c.uid,l.gatewayInfo.uid=s.uid,l.gatewayInfo.res.uid=s.uid):(a&&(s.stringUid=a),l=await DH(s,HA.token));let u={sid:o,appId:e,cname:t,token:r||e,uid:s.stringUid||n,intUid:s.uid||l.gatewayInfo.uid,stringUid:s.stringUid,ts:Date.now(),sua:c,ap:l};await async function(h){let f;try{h.uid&&Wie({appId:h.appId,cname:h.cname,token:h.token,uid:h.uid,stringUid:h.stringUid});let p=Yie(h),m=await async function(y,v){try{let b=await window.crypto.subtle.importKey("raw",Cne(v),"AES-GCM",!1,["encrypt"]),E=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},b,Rh(window.btoa(JSON.stringify(y))));return yd(new Uint8Array(E))}catch{return}}(h,h.token||h.appId);if(!m)return;f=qie(_m);let g=f?JSON.parse(f):[];g.push({[p]:m}),g.length>M("AP_CACHE_NUM")&&g.shift(),IT(_m,JSON.stringify(g))}catch(p){_.warn("Error caching server parameters:",p.message),IT(_m,"")}}(u),BA++}catch(o){throw $A++,function(s){VA||(VA=window.setTimeout(()=>{let c="";AE.forEach((u,h)=>{c+="".concat(h,": ").concat(u," ;")}),xe.reportApiInvoke(null,{name:sn.PRELOAD,options:{success:BA,failed:$A,err:c}}).onError(s),BA=0,$A=0,AE.clear(),VA=null},PHe));let l=AE.get(s.code)||0;AE.set(s.code,l+1)}(o),o}}async function Az(e){try{let t=Wie(e);if(!t||e.cloudProxyServer!=="disabled")return;let r=await async function(n,i){try{let a=await window.crypto.subtle.importKey("raw",Cne(i),"AES-GCM",!1,["decrypt"]),o=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},a,Rh(n));return JSON.parse(window.atob(yd(new Uint8Array(o))))}catch{return}}(t,e.token||e.appId);if(!r||!function(n,i){return n.cname===i.cname&&n.appId===i.appId&&n.token===i.token?i.stringUid?n.stringUid===i.stringUid:typeof i.uid=="number"?n.uid===i.uid:n.uid==i.uid:!1}(r,e))return;if(r&&Date.now()-r.ts<M("AP_CACHE_LIFETIME"))return r}catch(t){_.warn("Error get preloadInfo",t.message)}}function Wie(e){let t;try{if(t=qie(_m),!t)return;let r=JSON.parse(t),n=Yie(e),i=function(o,s){for(let l=o.length-1;l>=0;l--)if(s(o[l]))return l;return-1}(r,o=>n in o);if(i===-1)return;let a=r.splice(i,1)[0];return IT(_m,JSON.stringify(r)),a[n]}catch(r){_.warn("Error delete preload info: ".concat(t),r.message),IT(_m,"")}}function zM(e){if(e){let t=vh.get(e);t&&(window.clearTimeout(t),t=null,vh.delete(e)),be(bh).call(bh,e)||e.cloudProxyServer!=="disabled"||bh.push(e)}if(vh.size<M("AP_CACHE_NUM")&&bh.length>0){let t=bh.shift();vh.set(t,window.setTimeout(async()=>{let{appId:r,cname:n,token:i,stringUid:a,uid:o,proxyServer:s}=t;try{await DHe(r,n,i,o,s,a),vh.has(t)&&zM(t)}catch(l){_.warn("update preload failed",l.message),Kie(t)}},M("AP_UPDATE_INTERVAL")))}}function Kie(e){let t=bh.indexOf(e);t!==-1&&bh.splice(t,1);let r=vh.get(e);r&&(window.clearTimeout(r),r=null,vh.delete(e),zM())}function Oz(e,t){let r=e.sua,n=e.ap;t&&r&&xe.reqUserAccount(e.sid,{lts:r.requestTime,elapse:r.elapse,success:!0,serverAddr:r.url,stringUid:t,uid:e.intUid,errorCode:null,extend:r.req}),xe.reportResourceTiming(e.ap.url,e.sid),xe.joinWebProxyAP(e.sid,{lts:n.requestTime,elapse:n.elapse,sucess:1,apServerAddr:n.url,turnServerAddrList:n.proxyInfo.addresses.map(i=>i.ip).join(","),eventType:"disabled",unilbsServerIds:[Wr.CHOOSE_SERVER,Wr.CLOUD_PROXY_FALLBACK].toString()}),xe.joinChooseServer(e.sid,{lts:n.requestTime,elapse:n.elapse,succ:!0,csAddr:n.url,opid:n.opid,serverList:n.gatewayInfo.gatewayAddrs.map(i=>i.address),ec:null,cid:n.gatewayInfo.cid.toString(),uid:n.gatewayInfo.uid.toString(),csIp:n.gatewayInfo.csIp,unilbsServerIds:[Wr.CHOOSE_SERVER].toString(),isHttp3:n.isHttp3})}function qie(e){return window.atob(window.localStorage.getItem(e)||"")}function IT(e,t){window.localStorage.setItem(e,window.btoa(t))}function Yie(e){let t="".concat(e.appId,"_").concat(e.cname);return typeof e.uid=="string"&&(t+="_s_".concat(e.uid)),typeof e.uid=="number"&&(t+="_".concat(e.uid)),e.token&&(t+="_".concat(e.token)),Rne(t)}function LHe(e){let t=function(){let r=UHe.pop();return r?(r.offset=r.limit=0,r):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(r,n){let i=r.appId;i!==void 0&&(zr(n,10),Ou(n,i));let a=r.cid;a!==void 0&&(zr(n,16),zr(n,a));let o=r.cname;o!==void 0&&(zr(n,26),Ou(n,o));let s=r.deviceId;s!==void 0&&(zr(n,34),Ou(n,s));let l=r.elapse;l!==void 0&&(zr(n,40),ku(n,l));let c=r.fileSize;c!==void 0&&(zr(n,48),ku(n,hp(c)));let u=r.height;u!==void 0&&(zr(n,56),ku(n,hp(u)));let h=r.jpg;h!==void 0&&(zr(n,66),zr(n,h.length),kz(n,h));let f=r.networkType;f!==void 0&&(zr(n,72),ku(n,hp(f)));let p=r.osType;p!==void 0&&(zr(n,80),ku(n,hp(p)));let m=r.requestId;m!==void 0&&(zr(n,90),Ou(n,m));let g=r.sdkVersion;g!==void 0&&(zr(n,98),Ou(n,g));let y=r.sequence;y!==void 0&&(zr(n,104),ku(n,hp(y)));let v=r.sid;v!==void 0&&(zr(n,114),Ou(n,v));let b=r.timestamp;b!==void 0&&(zr(n,120),ku(n,b));let E=r.uid;E!==void 0&&(zr(n,128),zr(n,E));let S=r.vid;S!==void 0&&(zr(n,136),zr(n,S));let I=r.width;I!==void 0&&(zr(n,144),ku(n,hp(I)));let N=r.service;N!==void 0&&(zr(n,152),zr(n,N));let L=r.callbackData;L!==void 0&&(zr(n,162),zr(n,L.length),kz(n,L));let j=r.ticket;j!==void 0&&(zr(n,170),Ou(n,j));let z=r.vendorConfigs;z!==void 0&&(zr(n,178),Ou(n,z))}(e,t),function(r){let n=r.bytes,i=r.limit;return n.length===i?n:n.subarray(0,i)}(t)}function jHe(e){return function(r){let n={};e:for(;!FHe(r);){let i=Zy(r);switch(i>>>3){case 0:break e;case 1:n.code=Zy(r);break;case 2:n.msg=Pz(r,Zy(r));break;case 3:n.requestId=Pz(r,Zy(r));break;case 4:n.timestamp=VHe(r,!1);break;default:MHe(r,7&i)}}return n}({bytes:t=e,offset:0,limit:t.length});var t}function MHe(e,t){switch(t){case 0:for(;128&Ts(e););break;case 2:zA(e,Zy(e));break;case 5:zA(e,4);break;case 1:zA(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function hp(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var UHe=[];function zA(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function FHe(e){return e.offset>=e.limit}function Ax(e,t){let r=e.bytes,n=e.offset,i=e.limit,a=n+t;if(a>r.length){let o=new Uint8Array(2*a);o.set(r),e.bytes=o}return e.offset=a,a>i&&(e.limit=a),n}function Xie(e,t){let r=e.offset;if(r+t>e.limit)throw new Error("Read past limit");return e.offset+=t,r}function kz(e,t){let r=Ax(e,t.length);e.bytes.set(t,r)}function Pz(e,t){let r=Xie(e,t),n=String.fromCharCode,i=e.bytes,a="",o="";for(let s=0;s<t;s++){let l,c,u,h,f=i[s+r];128&f?(224&f)==192?s+1>=t?o+=a:(l=i[s+r+1],(192&l)!=128?o+=a:(h=(31&f)<<6|63&l,h<128?o+=a:(o+=n(h),s++))):(240&f)==224?s+2>=t?o+=a:(l=i[s+r+1],c=i[s+r+2],(49344&(l|c<<8))!=32896?o+=a:(h=(15&f)<<12|(63&l)<<6|63&c,h<2048||h>=55296&&h<=57343?o+=a:(o+=n(h),s+=2))):(248&f)==240?s+3>=t?o+=a:(l=i[s+r+1],c=i[s+r+2],u=i[s+r+3],(12632256&(l|c<<8|u<<16))!=8421504?o+=a:(h=(7&f)<<18|(63&l)<<12|(63&c)<<6|63&u,h<65536||h>1114111?o+=a:(h-=65536,o+=n(55296+(h>>10),56320+(1023&h)),s+=3))):o+=a:o+=n(f)}return o}function Ou(e,t){let r=t.length,n=0;for(let o=0;o<r;o++){let s=t.charCodeAt(o);s>=55296&&s<=56319&&o+1<r&&(s=(s<<10)+t.charCodeAt(++o)-56613888),n+=s<128?1:s<2048?2:s<65536?3:4}zr(e,n);let i=Ax(e,n),a=e.bytes;for(let o=0;o<r;o++){let s=t.charCodeAt(o);s>=55296&&s<=56319&&o+1<r&&(s=(s<<10)+t.charCodeAt(++o)-56613888),s<128?a[i++]=s:(s<2048?a[i++]=s>>6&31|192:(s<65536?a[i++]=s>>12&15|224:(a[i++]=s>>18&7|240,a[i++]=s>>12&63|128),a[i++]=s>>6&63|128),a[i++]=63&s|128)}}function Ts(e){return e.bytes[Xie(e,1)]}function Dz(e,t){let r=Ax(e,1);e.bytes[r]=t}function Zy(e){let t,r=0,n=0;do t=Ts(e),r<32&&(n|=(127&t)<<r),r+=7;while(128&t);return n}function zr(e,t){for(t>>>=0;t>=128;)Dz(e,127&t|128),t>>>=7;Dz(e,t)}function VHe(e,t){let r,n=0,i=0,a=0;return r=Ts(e),n=127&r,128&r&&(r=Ts(e),n|=(127&r)<<7,128&r&&(r=Ts(e),n|=(127&r)<<14,128&r&&(r=Ts(e),n|=(127&r)<<21,128&r&&(r=Ts(e),i=127&r,128&r&&(r=Ts(e),i|=(127&r)<<7,128&r&&(r=Ts(e),i|=(127&r)<<14,128&r&&(r=Ts(e),i|=(127&r)<<21,128&r&&(r=Ts(e),a=127&r,128&r&&(r=Ts(e),a|=(127&r)<<7))))))))),{low:n|i<<28,high:i>>>4|a<<24,unsigned:t}}function ku(e,t){let r=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,a=i===0?n===0?r<16384?r<128?1:2:r<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:i<128?9:10,o=Ax(e,a),s=e.bytes;switch(a){case 10:s[o+9]=i>>>7&1;case 9:s[o+8]=a!==9?128|i:127&i;case 8:s[o+7]=a!==8?n>>>21|128:n>>>21&127;case 7:s[o+6]=a!==7?n>>>14|128:n>>>14&127;case 6:s[o+5]=a!==6?n>>>7|128:n>>>7&127;case 5:s[o+4]=a!==5?128|n:127&n;case 4:s[o+3]=a!==4?r>>>21|128:r>>>21&127;case 3:s[o+2]=a!==3?r>>>14|128:r>>>14&127;case 2:s[o+1]=a!==2?r>>>7|128:r>>>7&127;case 1:s[o]=a!==1?128|r:127&r}}var Lz={},jz={},NT=4294967296,BHe=NT*NT,Mz=BHe/2;Jie(0,!0);var Uz=Jie(0),$He=Bv(0,-2147483648,!1),HHe=Bv(-1,2147483647,!1);function Jie(e,t){let r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=jz[e],n)?n:(r=Bv(e,0,!0),i&&(jz[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=Lz[e],n)?n:(r=Bv(e,e<0?-1:0,!1),i&&(Lz[e]=r),r)}function Bv(e,t,r){return{low:0|e,high:0|t,unsigned:!!r}}function zHe(e,t){if(isNaN(e))return Uz;{if(e<=-Mz)return $He;if(e+1>=Mz)return HHe}return e<0?Uz:Bv(e%NT|0,e/NT|0,t)}function Fz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var GHe=class Qie extends Tr{get connectionState(){return this._connectionState}set connectionState(t){if(this._connectionState===t)return;let r=this._connectionState;this._connectionState=t,this.emit(il.CONNECTION_STATE_CHANGE,t,r)}get quality(){return this._quality}set quality(t){this._quality=t>1?1:t<.1?.1:t,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(t){var r;super(),R(this,"name","AgoraRTCImageModeration"),R(this,"_connectionState",No.CONNECTING),R(this,"_sequence",0),R(this,"_moderationStartTime",void 0),R(this,"_workerConnection",void 0),R(this,"_workerMessageLengthLimit",void 0),R(this,"_qualityRatio",void 0),R(this,"_connectInfo",void 0),R(this,"_cancelTokenSource",pa.CancelToken.source()),R(this,"_retryConfig",void 0),R(this,"_moderationInterval",void 0),R(this,"_moderationTimer",null),R(this,"_moderationMode",1),R(this,"_quality",1),R(this,"_qualityTimer",null),R(this,"_ticket",void 0),R(this,"_moderationIntervalMinimum",void 0),R(this,"_uploadFailedNum",0),R(this,"_uploadNum",0),R(this,"_uploadTimer",null),R(this,"_extraInfo",void 0),R(this,"_vendor",""),R(this,"_encoder",new TextEncoder),R(this,"_moderationId",void 0),R(this,"inspectImage",()=>{if(this.connectionState!==No.CONNECTED)throw new Y(k.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===No.CONNECTED?this.requestToInspectImage():_.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=rr(5,"image-moderation-"),this._workerMessageLengthLimit=M("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=M("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(r=t.interval)!==null&&r!==void 0?r:1e3,t.extraInfo&&(this._extraInfo=this._encoder.encode(t.extraInfo)),t.vendor&&(this._vendor=t.vendor),this._qualityRatio=M("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new Lv("worker-"+this._moderationId,Zr),this.on(il.STATE_CHANGE,(n,i)=>{_.debug("[".concat(this._moderationId,"] Moderation operation :").concat(ip[n]," ").concat(i||""))}),this.handleWorkerEvents()}async init(t,r){this.emit(il.STATE_CHANGE,ip.CONNECT_AP),this._connectInfo=t;let n=this._cancelTokenSource.token;return this._retryConfig=r,new ye((i,a)=>{this.on(il.CONNECTION_STATE_CHANGE,(o,s)=>{o===No.CONNECTED&&i()}),this.requestAP(t,n,r).then(o=>{this.connectWorker(o)}).catch(o=>{a(o)})})}updateConfig(t){var r;this._moderationInterval=(r=t.interval)!==null&&r!==void 0?r:1e3,t.extraInfo&&(this._extraInfo=this._encoder.encode(t.extraInfo)),t.vendor&&(this._vendor=t.vendor),_.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(t))),this.connectionState===No.CONNECTED&&this.inspectImage()}async requestAP(t,r,n){let i=M("WEBCS_DOMAIN").map(l=>"https://".concat(l,"/api/v1")),a=await function(l,c,u,h){let{appId:f,areaCode:p,cname:m,sid:g,token:y,uid:v}=c;wm++;let b="moderation_plugin",E={service_name:b,json_body:JSON.stringify({appId:f,areaCode:p,cname:m,command:"allocateEdge",requestId:wm,seq:wm,sid:g,appToken:y,ts:Date.now(),uid:v+""})},S,I,N=l[0];return Cl(async()=>{S=Date.now();let L=await xl(N,{data:E,cancelToken:u,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(I=Date.now()-S,L.code!==0){let A=new Y(k.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+L.code,{retry:!0,responseTime:I});throw _.error(A.toString()),A}let j=JSON.parse(L.json_body);if(j.code!==200){let A=new Y(k.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(j.code,", reason: ").concat(j.reason),{code:j.code,responseTime:I});throw _.error(A.toString()),A}if(!j.servers||!Array.isArray(j.servers)||j.servers.length===0){let A=new Y(k.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:j.code,responseTime:I});throw _.error(A.toString()),A}if(!j.servers.some(A=>!!A.wss)){let A=new Y(k.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:j.code,responseTime:I});throw _.error(A.toString()),A}let z=M("IMAGE_MODERATION_WORKER_HOST");return{addressList:j.servers.map(A=>{let{address:V,wss:G}=A;if(V&&G)return"wss://".concat(V.replace(/\./g,"-"),".").concat(z,":").concat(G,"/moderation")}).filter(A=>!!A),workerToken:j.workerToken,vid:j.vid,ticket:j.appTicket,responseTime:I}},(L,j)=>(xe.apworkerEvent(g,{success:!0,sc:200,serviceName:b,responseDetail:JSON.stringify(L.addressList),firstSuccess:j===0,responseTime:I,serverIp:l[j%l.length]}),!1),(L,j)=>(xe.apworkerEvent(g,{success:!1,sc:L.data&&L.data.code||200,serviceName:b,responseTime:I,serverIp:l[j%l.length]}),!!(L.code!==k.OPERATION_ABORTED&&L.code!==k.UNEXPECTED_RESPONSE||L.data&&L.data.retry)&&(N=l[(j+1)%l.length],!0)),h)}(i,t,r,n);this.emit(il.STATE_CHANGE,ip.AP_CONNECTED);let{addressList:o,ticket:s}=a;return this._ticket=s,o}async connectWorker(t){this.emit(il.STATE_CHANGE,ip.CONNECT_WORKER),await this._workerConnection.init(t,1e4)}handleWorkerEvents(){this._workerConnection.on(Xe.CONNECTED,async()=>{this.emit(il.STATE_CHANGE,ip.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=No.CONNECTED}),this._workerConnection.on(Xe.CLOSED,()=>{this.connectionState=No.CLOSED}),this._workerConnection.on(Xe.FAILED,()=>{this.connectionState=No.CLOSED}),this._workerConnection.on(Xe.RECONNECTING,()=>{this.connectionState=this.connectionState===No.CONNECTED?No.RECONNECTING:No.CONNECTING}),this._workerConnection.on(Xe.ON_MESSAGE,async t=>{if(t.data instanceof ArrayBuffer){let r=jHe(new Uint8Array(t.data));M("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&_.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(r)),this._uploadNum++,r.code===void 0||r.code===0||(this._uploadFailedNum++,_.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(r.code,", msg is ").concat(r.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{xe.reportApiInvoke(this._connectInfo.sid||null,{name:sn.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,r.code],tag:Nr.TRACER}).onError(new Y(k.IMAGE_MODERATION_UPLOAD_FAILED,r.msg)),this._uploadTimer=null},M("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else _.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(Xe.WILL_RECONNECT,(t,r,n)=>{t==="recover"&&n(t),n("tryNext")}),this._workerConnection.on(Xe.REQUEST_NEW_URLS,(t,r)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(t).catch(r)})}static intToLong(t){return{low:t|=0,high:t>>31,unsigned:t>=0}}async requestToInspectImage(){let t=Bo(this,il.CLIENT_LOCAL_VIDEO_TRACK),r={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(t){if(!t.isPlaying)return void(M("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&_.debug("Only the track being played can be inspected"));this._sequence++;let n=await this.generateRequestData(t,r);this._workerConnection.sendMessage(n,!0,!0)}else M("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&_.debug("Only the track being published can be inspected")}async generateRequestData(t,r){let{appId:n,cname:i,cid:a,vid:o,sid:s,uid:l}=r,c=Date.now(),u=await t.getCurrentFrameImage("image/jpeg",this.quality),h=await uie(u,n,i),f=this._sequence+"-"+a+"-"+l+"-"+c+"-"+rr(12,""),p={appId:n,cid:a,cname:i,deviceId:"",elapse:Qie.intToLong(Number(c-this._moderationStartTime)),fileSize:u.buffer.byteLength,height:u.height,width:u.width,jpg:h,networkType:6,osType:7,requestId:f,sdkVersion:"4.22.0",sequence:this._sequence,sid:s,timestamp:zHe(c),uid:l,vid:o,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};this._extraInfo===void 0&&delete p.callbackData;let m=LHe(p);if(m.byteLength<this._workerMessageLengthLimit){if(M("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){let g=function(y){for(var v=1;v<arguments.length;v++){var b=arguments[v]!=null?arguments[v]:{};v%2?Fz(Object(b),!0).forEach(function(E){R(y,E,b[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(b)):Fz(Object(b)).forEach(function(E){Object.defineProperty(y,E,Object.getOwnPropertyDescriptor(b,E))})}return y}({},p);delete g.jpg,_.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(g))}return m}{let g=this.quality*this._qualityRatio;return this.quality=g,await this.generateRequestData(t,{appId:n,cname:i,cid:a,vid:o,sid:s,uid:l})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=pa.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=No.CLOSED,this.emit(il.STATE_CHANGE,ip.CLOSED)}};function Zie(e){if(Kt(e.interval,"interval",1e3,1/0),e&&e.extraInfo&&e.extraInfo.length>1024)throw new Y(k.INVALID_PARAMS,"config.extraInfo length cannot exceed 1024 bytes");if(e&&e.vendor&&e.vendor.length>1024)throw new Y(k.INVALID_PARAMS,"config.vendor length cannot exceed 1024 bytes")}var WHe={name:"ImageModeration",create:function(e){let{config:t}=e;return Zie(t),new GHe(t)}},Vz,Bz,$z,Hz,zz,Gz,Wz,Kz,qz,Yz,Xz,Jz,Qz,Zz,eG,tG,rG,nG,iG,aG,oG,sG,lG,cG,uG,dG,hG,fG,pG,mG,gG,yG,vG,bG,wG,EG,_G,SG,TG,CG,ve;function xG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xG(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}gi.setLogger(_);var KHe=(Vz=Ve(),Bz=Ve({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof Zp))return[t];t=[t]}return t.map(r=>r?Object(r).toString():"null")}}),$z=Ve({argsMap:(e,t)=>(t||(t=[]),Array.isArray(t)||t.trackMediaType!==Ug.DATA?(Array.isArray(t)||(t=[t]),t.map(r=>r.getTrackId())):[t.getChannelId()])}),Hz=Ve({argsMap:(e,t,r,n)=>[typeof t=="object"?t.uid:t,r,n]}),zz=Ve({argsMap:(e,t,r)=>[t,r]}),Gz=Ve({argsMap:(e,t)=>t.map(r=>{let{user:n,mediaType:i}=r;return[n==null?void 0:n.uid,i]})}),Wz=Ve({argsMap:(e,t,r,n)=>[typeof t=="object"?t.uid:t,r,n]}),Kz=Ve({argsMap:(e,t)=>t.map(r=>{let{user:n,mediaType:i}=r;return{uid:n==null?void 0:n.uid,mediaType:i}})}),qz=Ve(),Yz=Ve(),Xz=Ve(),Jz=Ve(),Qz=Ve(),Zz=Ve(),eG=Ve(),tG=Ve(),rG=Ve(),nG=Ve(),iG=Ve(),aG=Ve(),oG=Ve(),sG=Ve(),lG=Ve({argsMap:(e,t)=>[t]}),cG=Ve(),uG=Ve(),dG=Ve(),hG=Ve(),fG=Ve(),pG=Ve(),mG=Ve(),gG=Ve(),yG=Ve({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),vG=Ve(),bG=Ve(),wG=Ve(),EG=Ve(),_G=Ve(),SG=Ve(),TG=Ve({reportResult:!0}),CG=Ve(),ve=class extends Tr{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return((e=this._config)===null||e===void 0?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e){let t;if(super(),R(this,"store",void 0),R(this,"_uid",void 0),R(this,"_channelName",void 0),R(this,"_uintUid",void 0),R(this,"_users",[]),R(this,"_config",void 0),R(this,"_clientId",void 0),R(this,"_appId",void 0),R(this,"_sessionId",null),R(this,"_key",void 0),R(this,"_rtmConfig",{}),R(this,"_joinInfo",void 0),R(this,"_gateway",void 0),R(this,"_statsCollector",void 0),R(this,"_configDistribute",void 0),R(this,"_leaveMutex",new gi("client-leave")),R(this,"_publishMutex",new gi("client-publish")),R(this,"_renewTokenMutex",new gi("client-renewtoken")),R(this,"_subscribeMutex",new gi("client-subscribe")),R(this,"_encryptionMode","none"),R(this,"_encryptionSecret",null),R(this,"_encryptionSalt",null),R(this,"_encryptDataStream",!1),R(this,"_encryptDataStreamKey",null),R(this,"_encryptDataStreamIv",null),R(this,"_proxyServer",void 0),R(this,"_turnServer",{servers:[],mode:"auto"}),R(this,"_cloudProxyServerMode","disabled"),R(this,"_isDualStreamEnabled",!1),R(this,"_defaultStreamFallbackType",void 0),R(this,"_lowStreamParameter",void 0),R(this,"_streamFallbackTypeCacheMap",new Map),R(this,"_remoteStreamTypeCacheMap",new Map),R(this,"_axiosCancelSource",pa.CancelToken.source()),R(this,"_audioVolumeIndicationInterval",void 0),R(this,"_networkQualityInterval",void 0),R(this,"_userOfflineTimeout",void 0),R(this,"_streamRemovedTimeout",void 0),R(this,"_liveTranscodeStreamingClient",void 0),R(this,"_liveRawStreamingClient",void 0),R(this,"_channelMediaRelayClient",void 0),R(this,"_networkQualitySensitivity","normal"),R(this,"_p2pChannel",void 0),R(this,"_useLocalAccessPoint",!1),R(this,"_setLocalAPVersion",void 0),R(this,"_joinAndNotLeaveYet",!1),R(this,"_numberOfJoinCount",0),R(this,"_remoteDefaultVideoStreamType",void 0),R(this,"_inspect",void 0),R(this,"_moderation",void 0),R(this,"_license",void 0),R(this,"_pendingPublishedUsers",[]),R(this,"ntpAlignErrorCount",0),R(this,"remoteInboundOffset",0),R(this,"_handleLocalTrackEnable",(r,n,i)=>{this.publish(r,!1).then(n).catch(i)}),R(this,"_handleLocalTrackDisable",(r,n,i)=>{this.unpublish(r).then(n).catch(i)}),R(this,"_handleUserOnline",r=>{if(M("BLOCK_LOCAL_CLIENT")&&Zd(r.uid,this.channelName))return void _.debug("[".concat(r.uid,"] will be ignored in local"));this.isStringUID&&typeof r.uid!="string"&&_.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));let n=this._users.find(i=>i.uid===r.uid);if(n)n._trust_in_room_=!0,n._is_pre_created&&(n._is_pre_created=!1,this.safeEmit(vt.USER_JOINED,n));else{let i=new Gu(r.uid,r.uint_id||r.uid);this._users.push(i),_.debug("[".concat(this._clientId,"] user online"),r.uid),this.safeEmit(vt.USER_JOINED,i)}}),R(this,"_handleUserOffline",r=>{if(M("BLOCK_LOCAL_CLIENT")&&Zd(r.uid,this.channelName))return;let n=this._users.find(i=>i.uid===r.uid);n&&(this._handleRemoveStream(r),this._handleRemoveDataChannels(r),n._audio_pre_subscribed||n._video_pre_subscribed?n._is_pre_created=!0:vT(this._users,n),this._remoteStreamTypeCacheMap.delete(n.uid),this._streamFallbackTypeCacheMap.delete(n.uid),_.debug("[".concat(this._clientId,"] user offline"),r.uid,"reason:",r.reason),this.safeEmit(vt.USER_LEAVED,n,r.reason))}),R(this,"_handleAddAudioOrVideoStream",(r,n,i,a,o,s,l)=>{if(M("BLOCK_LOCAL_CLIENT")&&Zd(n,this.channelName))return;let c=this._users.find(h=>h.uid===n);if(!c)return void _.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));_.debug("[".concat(this._clientId,"] stream added with uid ").concat(n,", type ").concat(r)),this.store.subscribe(c.uid,r,void 0,void 0,void 0,Date.now());let u=r==="audio"?c.hasAudio:c.hasVideo;c._uintid||(c._uintid=o||n),r==="audio"?c._trust_audio_stream_added_state_=!0:c._trust_video_stream_added_state_=!0,r==="audio"?(c._audio_added_=!0,i!==void 0&&(c._audioSSRC=i),a!==void 0&&(c._cname=a),s&&(c._audioOrtc=s)):(c._video_added_=!0,i!==void 0&&(c._videoSSRC=i),a!==void 0&&(c._cname=a),l!==void 0&&(c._rtxSsrcId=l),s&&(c._videoOrtc=s)),(r==="audio"?c.hasAudio:c.hasVideo)&&!u&&(_.info("[".concat(this._clientId,"] remote user ").concat(c.uid," published ").concat(r)),this.safeEmit(vt.USER_PUBLISHED,c,r)),r==="video"?xe.onGatewayStream(this._sessionId,Un.ON_ADD_VIDEO_STREAM,Er.ON_ADD_VIDEO_STREAM,{peer:o||n,ssrc:c._videoSSRC}):xe.onGatewayStream(this._sessionId,Un.ON_ADD_AUDIO_STREAM,Er.ON_ADD_AUDIO_STREAM,{peer:o||n,ssrc:c._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(c,r,i).then(h=>{if(h&&(_.debug("[".concat(this._clientId,"] resubscribe ").concat(r," for user ").concat(c.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof NE))return this._p2pChannel.unsubscribe(c,r,!0).then(()=>this._subscribe(c,r,!0).catch(f=>{_.error("[".concat(this._clientId,"] resubscribe error"),f.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(c,r)&&(_.debug("[".concat(this._clientId,"] resubscribe ").concat(r," for user ").concat(c.uid," after reconnect.")),this._subscribe(c,r,!0).catch(h=>{_.error("[".concat(this._clientId,"] resubscribe error"),h.toString())}))}),R(this,"_handleRemoveStream",r=>{if(M("BLOCK_LOCAL_CLIENT")&&Zd(r.uid,this.channelName))return;let n=this._users.find(a=>a.uid===r.uid);if(!n)return void _.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));_.debug("[".concat(this._clientId,"] stream removed with uid ").concat(r.uid));let i=()=>{};n.hasAudio&&n.hasVideo?i=()=>{_.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished audio track")),this.safeEmit(vt.USER_UNPUBLISHED,n,"audio"),_.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished video track")),this.safeEmit(vt.USER_UNPUBLISHED,n,"video")}:n.hasVideo?i=()=>{_.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished video track")),this.safeEmit(vt.USER_UNPUBLISHED,n,"video")}:n.hasAudio&&(i=()=>{_.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished audio track")),this.safeEmit(vt.USER_UNPUBLISHED,n,"audio")}),n._video_pre_subscribed||n._audio_pre_subscribed||(n._trust_audio_stream_added_state_=!0,n._trust_video_stream_added_state_=!0,n._audio_added_=!1,n._video_added_=!1,this._p2pChannel instanceof NE&&this._p2pChannel.unsubscribe(n).then(a=>{if(a)return this._gateway.unsubscribe(a,n.uid)}),n._audioSSRC=void 0,n._videoSSRC=void 0,n._audioOrtc=void 0,n._videoOrtc=void 0,n._rtxSsrcId=void 0),xe.onGatewayStream(this._sessionId,Un.ON_REMOVE_STREAM,Er.ON_REMOVE_STREAM,{peer:r.uint_id||r.uid}),i()}),R(this,"_handleSetStreamLocalEnable",(r,n,i)=>{if(M("BLOCK_LOCAL_CLIENT")&&Zd(n,this.channelName))return;let a=this._users.find(l=>l.uid===n);if(!a)return void _.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));_.debug("[".concat(this._clientId,"] local ").concat(r," ").concat(i?"enabled":"disabled"," with uid ").concat(n));let o=r==="audio"?a.hasAudio:a.hasVideo;if(r==="audio"){a._trust_audio_enabled_state_=!0;let l=a._audio_enabled_;if(a._audio_enabled_=i,a._audio_enabled_===l)return;{let c=a._audio_enabled_?"enable-local-audio":"disable-local-audio";_.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(n,", msg: ").concat(c)),this.safeEmit(vt.USER_INFO_UPDATED,n,c)}}else{a._trust_video_enabled_state_=!0;let l=a._video_enabled_;if(a._video_enabled_=i,a._video_enabled_===l)return;{let c=a._video_enabled_?"enable-local-video":"disable-local-video";_.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(n,", msg: ").concat(c)),this.safeEmit(vt.USER_INFO_UPDATED,n,c)}}let s=r==="audio"?a.hasAudio:a.hasVideo;return o!==s?!o&&s?(_.info("[".concat(this._clientId,"] remote user ").concat(n," published ").concat(r)),void this.safeEmit(vt.USER_PUBLISHED,a,r)):(r==="video"&&a._videoTrack&&a._videoTrack._destroy(),r==="audio"&&a._audioTrack,this._p2pChannel.muteRemote(a,r),_.info("[".concat(this._clientId,"] remote user ").concat(n," unpublished ").concat(r)),void this.safeEmit(vt.USER_UNPUBLISHED,a,r)):void 0}),R(this,"_handleMuteStream",(r,n,i)=>{if(M("BLOCK_LOCAL_CLIENT")&&Zd(r,this.channelName))return;_.debug("[".concat(this._clientId,"] receive mute message"),r,n,i);let a=this._users.find(l=>l.uid===r);if(!a)return void _.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(r));let o=n==="audio"?a.hasAudio:a.hasVideo;if(n==="audio"){a._trust_audio_mute_state_=!0;let l=a._audio_muted_;if(a._audio_muted_=i,a._audio_muted_===l)return;{let c=a._audio_muted_?"mute-audio":"unmute-audio";_.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(r,", msg: ").concat(c)),this.safeEmit(vt.USER_INFO_UPDATED,r,c)}}else{a._trust_video_mute_state_=!0;let l=a._video_muted_;if(a._video_muted_=i,a._video_muted_===l)return;{let c=a._video_muted_?"mute-video":"unmute-video";_.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(r,", msg: ").concat(c)),this.safeEmit(vt.USER_INFO_UPDATED,r,c)}}let s=n==="audio"?a.hasAudio:a.hasVideo;if(o!==s){if(!o&&s)return(n==="audio"?a._audioSSRC:a._videoSSRC)?(_.info("[".concat(this._clientId,"] remote user ").concat(r," published ").concat(n)),void this.safeEmit(vt.USER_PUBLISHED,a,n)):void _.warning("[".concat(this._clientId,"] remote user ").concat(r," receive ").concat(n," unmute message  before add stream message, ").concat(n," SSRC doesn't exist yet."));n==="video"&&a._videoTrack&&!a._video_pre_subscribed&&a._videoTrack._destroy(),n==="audio"&&a._audioTrack,this._p2pChannel.muteRemote(a,n),_.info("[".concat(this._clientId,"] remote user ").concat(r," unpublished ").concat(n)),this.safeEmit(vt.USER_UNPUBLISHED,a,n)}}),R(this,"_handleP2PLost",async r=>{_.debug("[".concat(this._clientId,"] receive p2p lost"),r),parseInt(r.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():_.warning("[".concat(this._clientId,"] P2PLost stream not found"),r)}),R(this,"_handleTokenWillExpire",()=>{_.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(vt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),R(this,"_handleBeforeUnload",r=>{r.type==="beforeunload"&&r.returnValue!==void 0&&r.returnValue!==""||(this.leave(),_.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),R(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(vt.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});let r={downlinkNetworkQuality:0,uplinkNetworkQuality:0};r.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),r.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(vt.NETWORK_QUALITY,r)}),R(this,"_handleP2PAddAudioOrVideoStream",(r,n,i,a)=>{let o=this._users.find(l=>l.uid===n);if(!o)return void _.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));_.debug("[".concat(this._clientId,"] stream added with uid ").concat(n,", type ").concat(r)),this.store.subscribe(o.uid,r,void 0,void 0,void 0,Date.now());let s=r==="audio"?o.hasAudio:o.hasVideo;r==="audio"?o._trust_audio_stream_added_state_=!0:o._trust_video_stream_added_state_=!0,r==="audio"?(o._audio_added_=!0,i!==void 0&&(o._audioSSRC=i),a!==void 0&&(o._audioMid=a)):(o._video_added_=!0,i!==void 0&&(o._videoSSRC=i),a!==void 0&&(o._videoMid=a)),(r==="audio"?o.hasAudio:o.hasVideo)&&!s&&(_.info("[".concat(this._clientId,"] remote user ").concat(o.uid," published ").concat(r)),this.safeEmit(vt.USER_PUBLISHED,o,r)),this._p2pChannel.hasPendingRemoteMedia(o,r)&&(_.debug("[".concat(this._clientId,"] resubscribe ").concat(r," for user ").concat(o.uid," after reconnect.")),this._subscribe(o,r,!0).catch(l=>{_.error("[".concat(this._clientId,"] resubscribe error"),l.toString())}))}),this._config=e,this._clientId=rr(5,"client-"),this.store=new v$e(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),_.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat($o," build: ").concat(TM,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{Y$(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(r){_.warning("[".concat(this._clientId,"] ").concat(r.toString()))}this._statsCollector=new Uie(this.store),this._statsCollector.onStatsException=(r,n,i)=>{_.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(r,", msg: ").concat(n,", uid: ").concat(i)),this.safeEmit(vt.EXCEPTION,{code:r,msg:n,uid:i})},this._statsCollector.onUploadPublishDuration=(r,n,i,a)=>{let o=this._users.find(s=>s.uid===r);o&&xe.peerPublishStatus(this._sessionId,{subscribeElapse:a,audioPublishDuration:n,videoPublishDuration:i,peer:o._uintid})},this.store.useP2P=e.mode==="p2p",this._gateway=new q7e(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||Zr,httpRetryConfig:e.httpRetryConfig||Zr,forceWaitGatewayResponse:e.forceWaitGatewayResponse===void 0||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._configDistribute=new iHe,this.store.useP2P?(this._p2pChannel=new Ma(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new NE(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,r,n,i){let a=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],o=arguments.length>6&&arguments[6]!==void 0&&arguments[6];Wt("JOIN_GATEWAY_USE_443PORT_ONLY",a),Wt("JOIN_GATEWAY_USE_DUAL_DOMAIN",o);let s=this._gateway.signal.websocket;return s instanceof xM&&(s.use443PortOnly=a,s.tryDoubleDomain=o),async function(l,c,u){sE.get(l)||sE.set(l,[]),lE.get(l)||lE.set(l,c),Al.get(l)||Al.set(l,0);let h=sE.get(l),f=lE.get(l);if(!h||!f)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(Al.get(l)===f){let v=Av();h.push(v),await v.promise}Al.set(l,Al.get(l)+1);for(var p=arguments.length,m=new Array(p>3?p-3:0),g=3;g<p;g++)m[g-3]=arguments[g];let y=await u(...m);return Al.set(l,Al.get(l)-1),Al.get(l)===f-1&&h.length>0&&(h[0].resolve(),h.shift()),Al.get(l)===0&&(sE.set(l,[]),lE.set(l,0),Al.set(l,0)),y}("client.join",M("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,r,n,i)}async join(e,t,r,n,i){let a=++this._numberOfJoinCount;this.store.joinStart(),n&&(this.store.uid=n);let o=(uE||uE||(uE=(window.location.protocol.split(":")[0]||"").toUpperCase(),uE))==="HTTPS",s=r8()?window.isSecureContext:"Browser Not Support";(!r8()&&!o||!window.isSecureContext)&&_.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser"),this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),_.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),xe.setAppId(e);try{if(!r&&r!==null)throw new Y(k.INVALID_PARAMS,"Invalid token: ".concat(r,". If you don not use token, set it to null"));r&&Fn(r,"token",1,2047),Fn(e,"appid",1,2047),Rx(t),n&&Ix(n),i&&Fn(i,"optionalInfo",1,2047)}catch(g){throw xe.reportApiInvoke(Xp(),{name:sn.JOIN,options:[e,t,r,n],states:{isHttps:o,isSecureContext:s},tag:Nr.TRACER}).onError(g),g}if(this._leaveMutex.isLocked&&(_.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),_.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){let g=new Y(k.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw xe.reportApiInvoke(Xp(),{name:sn.JOIN,options:[e,t,r,n],states:{isHttps:o,isSecureContext:s},tag:Nr.TRACER}).onError(g),g}this._gateway.state="CONNECTING";let l=await Az({appId:e,cname:t,uid:n,stringUid:typeof n=="string"?n:void 0,token:r||e,cloudProxyServer:this._cloudProxyServerMode});if(!this._joinAndNotLeaveYet)throw new Y(k.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));let c=(l==null?void 0:l.sid)||Xp();_.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(a)),this._sessionId||(this._sessionId=c,this.store.sessionId=this._sessionId);let u=xe.reportApiInvoke(c,{name:sn.JOIN,options:[e,t,r,n],states:{isHttps:o,isSecureContext:s},tag:Nr.TRACER}),h=ol(ol({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:typeof n!="string"?n:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:r||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!l},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(h.setLocalAPVersion=this._setLocalAPVersion),typeof n=="string"&&(h.stringUid=n,this._uintUid?(h.uid=this._uintUid,this._uintUid=void 0):h.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(h.aesmode=this._encryptionMode,h.aespassword=await(async g=>{let y=function(S){let I=window.atob(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),N=new Uint8Array(new ArrayBuffer(I.length));for(let L=0;L<I.length;L+=1)N[L]=I.charCodeAt(L);return N}(),v=await window.crypto.subtle.importKey("spki",y,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),b=wM(g),E=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},v,b);return function(S){let I="";for(let N=0;N<S.length;N+=1)I+=String.fromCharCode(S[N]);return window.btoa(I)}(new Uint8Array(E))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new Y(k.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(h.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&(this._encryptionMode==="aes-128-gcm2"||this._encryptionMode==="aes-256-gcm2"))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){let g=new TextEncoder,y=M("USE_PURE_ENCRYPTION_MASTER_KEY")?g.encode(h.appId+this._encryptionSecret+this._encryptionSecret):g.encode(h.appId+h.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(v,b,E){let S=await window.crypto.subtle.importKey("raw",b,"PBKDF2",!1,["deriveBits","deriveKey"]),I=v==="aes-128-gcm2"?128:256,N=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:i8,hash:"SHA-256",salt:E},S,I+b$e);return new Uint8Array(N).subarray(I/8)}(this._encryptionMode,y,Rh(this._encryptionSalt)),this._encryptDataStreamKey=await async function(v,b,E){let S=await window.crypto.subtle.importKey("raw",b,"PBKDF2",!1,["deriveBits","deriveKey"]),I=v==="aes-128-gcm2"?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:i8,hash:"SHA-256",salt:E},S,{name:"AES-GCM",length:I},!0,["encrypt","decrypt"])}(this._encryptionMode,y,Rh(this._encryptionSalt))}else s?_.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):_.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,_.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:h.stringUid});let f=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&f===this._sessionId&&xe.joinChannelTimeout(this._sessionId,5)},5e3);try{var p;let g,y=h.cloudProxyServer;if(be(p=["proxy3","proxy4","proxy5"]).call(p,y)){let I=M("PROXY_SERVER_TYPE3");Array.isArray(I)?h.proxyServer=I[0]:h.proxyServer=I}if(xe.setProxyServer(h.proxyServer),_.setProxyServer(h.proxyServer),this.store.requestAPStart(),l){if(_.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(h.stringUid?", ".concat(h.stringUid," => ").concat(l.intUid):""," ")),h.stringUid&&!h.uid&&(h.uid=l.intUid),g={gatewayInfo:l.ap.gatewayInfo},M("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&h.turnServer.mode==="auto")if(l.ap.proxyInfo.addresses.length===0)_.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{let I=(await Une(l.ap.proxyInfo,l.ap.gatewayInfo.uid)).map(N=>({turnServerURL:N.address,tcpport:N.tcpport||Zn.tcpport,udpport:N.udpport||Zn.udpport,username:N.username||Zn.username,password:N.password||Zn.password,forceturn:!1,security:!0}));h.turnServer={mode:"manual",servers:I}}Oz(l,h.stringUid)}else{if(h.stringUid&&!h.uid){let I;[I,g]=await ye.all([Nie(h.stringUid,h,this._axiosCancelSource.token,this._config.httpRetryConfig||Zr,this.store),PH(h,this._axiosCancelSource.token,this._config.httpRetryConfig||Zr,!0,this.store)]),_.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(h.stringUid," => ").concat(I)),h.uid=I,g.gatewayInfo.uid=I,g.gatewayInfo.res.uid=I}else g=await PH(h,this._axiosCancelSource.token,this._config.httpRetryConfig||Zr,!0,this.store);if(!this._joinAndNotLeaveYet)throw new Y(k.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(h,this._axiosCancelSource.token),this._configDistribute.on(tD.UPDATE_BITRATE_LIMIT,I=>{this._p2pChannel.updateBitrateLimit(I)})},0),this._key=r||e;let v=g.gatewayInfo,b=h.uid?h.uid:v.uid;this._joinInfo=ol(ol({},h),{},{cid:v.cid,uid:b,vid:v.vid,apResponse:v.res,apGatewayAddress:v.apGatewayAddress,uni_lbs_ip:v.uni_lbs_ip,gatewayAddrs:v.gatewayAddrs}),this.store.intUid=b;let E=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new Y(k.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));u.onSuccess(E),this._appId=e,this._channelName=h.cname,this._uid=E,this.store.uid=E,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(ni()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()},0);let S=h.stringUid?"string uid: ".concat(h.stringUid,",uid: ").concat(h.uid):"uid: ".concat(this._uid);return _.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(S)),setTimeout(()=>{_.startUpload()},5e3),this.store.joinEnd(),m=this,be(Hu).call(Hu,m)||Hu.push(m),this._cloudProxyServerMode==="disabled"&&Rt().supportWebCrypto&&M("ENABLE_PRELOAD")&&zM(this._joinInfo),E}catch(g){let y=Array.isArray(g)?g[0]:g;throw y&&y.code===k.OPERATION_ABORTED?_.warning("[".concat(this._clientId,"] join number: ").concat(a,", Joining channel failed, rollback"),y):_.error("[".concat(this._clientId,"] join number: ").concat(a,", Joining channel failed, rollback"),y),y.code!==k.OPERATION_ABORTED&&this._numberOfJoinCount===a&&(this._gateway.state="DISCONNECTED",this._reset()),u.onError(y),y}var m}_joinGateway(){if(!this._joinInfo||!this._key)throw new Y(k.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!M("JOIN_WITH_FALLBACK_SIGNAL_PROXY")))}async leave(){_.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(ni()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(t){let r=Hu.indexOf(t);r!==-1&&Hu.splice(r,1)}(this),this._statsCollector.stopUpdateStats();let e=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return _.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave(this.connectionState!=="CONNECTED"),_.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!Array.isArray(e)){if(!(e instanceof Zp))return this._publishDataChannel(e);e=[e]}if(e.length===0)throw new Y(k.INVALID_PARAMS,"param list is empty");let r=e;if(this._gateway.role==="audience")throw new Y(k.INVALID_OPERATION,"audience can not publish stream");for(let i of r){if(!(i instanceof Zp))throw new Y(k.INVALID_PARAMS,"parameter is not local track");if(!i._enabled&&t)throw new Y(k.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()))}_.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(r.map(i=>"".concat(i.getTrackId()," "))));let n=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&r.forEach(i=>{let a=this._configDistribute.getBitrateLimit();i instanceof sr&&a&&i.setBitrateLimit(a.uplink)});try{await this._publishHighStream(r),_.info("[".concat(this._clientId,"] Publish success, id ").concat(r.map(i=>"".concat(i.getTrackId()," "))))}catch(i){throw _.error("[".concat(this._clientId,"] publish error"),i.toString()),i}finally{n()}}async _publishDataChannel(e){Kt(e.id,"id",0,65535,!0),Bc(e.ordered,"ordered"),Fn(e.metadata,"metadata",0,512),_.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));let t=await this._publishMutex.lock();try{if(this._p2pChannel.getAllDataChannels().findIndex(i=>i.id===e.id)!==-1)throw new Y(k.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||this._uid===void 0)throw new Y(k.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&M("FORCE_TURN")&&!M("TURN_ENABLE_TCP")&&!M("TURN_ENABLE_UDP"))throw new Y(k.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");let r=function(i){return Cz(i,!1)}(e),n=await this._p2pChannel.publishDataChannel([r]);if(n.length>0){if(typeof r._originDataChannelId!="number")throw _.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new Y(k.CREATE_DATACHANNEL_ERROR);try{await ye.all(n.map(i=>this._uid&&this._gateway.publishDataChannel(this._uid,i,!0))),await r._waitTillOpen()}catch(i){if(i.code!==k.DISCONNECT_P2P)throw i}}return _.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(r.id)),r}catch(r){throw _.error("[".concat(this._clientId,"] publish datachannels error"),r.toString()),r}finally{t()}}async unpublish(e){if(!this._joinInfo||this._uid===void 0)throw new Y(k.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof Zp))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);_.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map(n=>"".concat(n.getTrackId()," "))," "));let r=await this._publishMutex.lock();try{if(this._p2pChannel instanceof Ma){let n=await this._p2pChannel.unpublish(t);n&&await this._gateway.sendExtensionMessage(Ur.UNPUBLISH,{unpubMsg:n},!0)}else{let n=await this._p2pChannel.unpublish(t);n&&await this._gateway.unpublish(n,this._uid),_.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map(i=>"".concat(i.getTrackId()))))}}catch(n){throw _.error("[".concat(this._clientId,"] unpublish error"),n.toString()),n}finally{r&&r()}}async _unpublishDataChannel(e){e!==void 0&&e.length!==0||(e=this._p2pChannel.getAllDataChannels()),_.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map(r=>"".concat(r.id," "))," "));let t=await this._publishMutex.lock();try{let r=await this._p2pChannel.unpublishDataChannel(e);r&&await this._gateway.unpublishDataChannel(r),_.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map(n=>"".concat(n.id))))}catch(r){throw _.error("[".concat(this._clientId,"] unpublish dataChannel error"),r.toString()),r}finally{t&&t()}}async subscribe(e,t,r){if(!(e instanceof Gu)){let n=this.remoteUsers.find(i=>i.uid===e);if(!n)throw new Y(k.INVALID_REMOTE_USER,"user is not in the channel");e=n}return t==="datachannel"?this._subscribeDataChannel(e,r):this._subscribe(e,t)}async presubscribe(e,t){if(fn(t,"mediaType",["audio","video"]),this._p2pChannel instanceof Ma)throw new Y(k.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new Y(k.INVALID_OPERATION,"can't presub when not join");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));let r=t===Ne.AUDIO,n=t===Ne.VIDEO,i=await this._subscribeMutex.lock();try{let{ssrcId:a,ortc:o,rtxSsrcId:s,cname:l,uint_id:c}=await this._gateway.presubscribe(e,t,!0);if(a==null)throw new Y(k.UNEXPECTED_RESPONSE,"no ssrc id");let u=this._users.find(f=>f.uid===e);u||(u=new Gu(e,c||e),u._is_pre_created=!0,this._users.push(u)),l&&(u._cname=l),u._uintid||(u._uintid=c||e),r&&(u._audioSSRC=a,u._audio_pre_subscribed=!0,o&&(u._audioOrtc=o)),n&&(u._videoSSRC=a,u._video_pre_subscribed=!0,o&&(u._videoOrtc=o),s!=null&&(u._rtxSsrcId=s)),_.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(a)),await this._p2pChannel.subscribe(u,t,a,s,o);let h=r?u._audioTrack:u._videoTrack;if(!h)throw new Y(k.UNEXPECTED_ERROR,"can not find remote track in user");return r&&(u._trust_audio_stream_added_state_=!0,u._audio_added_=!0),n&&(u._trust_video_stream_added_state_=!0,u._video_added_=!0),h}catch(a){throw _.error("[".concat(this._clientId,"] presub user ").concat(e," error"),a),a}finally{i()}}async _subscribeDataChannel(e,t){var r;if(Kt(t,"channelId",0,65535,!0),!this._joinInfo)throw new Y(k.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find(o=>o===e))throw _.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new Y(k.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&e._dataChannels.length===0)throw _.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new Y(k.INVALID_REMOTE_USER,"user is not published");let n=(r=e._dataChannels)===null||r===void 0?void 0:r.find(o=>o.id===t);if(!n)throw _.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new Y(k.REMOTE_USER_IS_NOT_PUBLISHED);let i=await this._subscribeMutex.lock();_.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{let o=await this._p2pChannel.subscribeDataChannel(e,[n]);if(o&&be(o).call(o,n.id))try{var a;if(typeof n._originDataChannelId!="number")throw _.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new Y(k.CREATE_DATACHANNEL_ERROR);let s={id:n.id,datachannelId:n._originDataChannelId,ordered:n.ordered,maxRetransmits:n.maxRetransmits,metadata:(a=n.metadata)!==null&&a!==void 0?a:""};await this._gateway.subscribeDataChannel(e.uid,s,!0),await n._waitTillOpen()}catch(s){if((s==null?void 0:s.code)!==k.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[n]),s;await this._p2pChannel.unsubscribeDataChannel(e,[n]),this._p2pChannel.setPendingRemoteDataChannel(e,n.id)}return _.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),n}finally{i()}}async _p2pSubscribe(e,t,r){if(fn(t,"mediaType",["audio","video"]),!this._joinInfo)throw new Y(k.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(i=>i===e)){let i=new Y(k.INVALID_REMOTE_USER,"user is not in the channel");throw _.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),i}if(!e.hasAudio&&!e.hasVideo){let i=new Y(k.INVALID_REMOTE_USER,"user is not published");throw _.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),i}if(!r&&(t==="audio"&&!e.hasAudio||t==="video"&&!e.hasVideo)){let i=new Y(k.REMOTE_USER_IS_NOT_PUBLISHED);throw _.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),i}let n=await this._subscribeMutex.lock();_.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{let a=t==="audio"?e._audioSSRC:e._videoSSRC,o=t==="audio"?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof Ma&&await this._p2pChannel.subscribe(e,t,a,o)}catch(a){throw a}_.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(a=>{_.warning("[".concat(this._clientId,"] auto set fallback failed"),a)});let i=t==="audio"?e._audioTrack:e._videoTrack;if(!i)throw new Y(k.UNEXPECTED_ERROR,"can not find remote track in user object");return i}catch(i){throw _.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),i),i}finally{n()}}async _subscribe(e,t,r){if(this._p2pChannel instanceof Ma)return this._p2pSubscribe(e,t);if(fn(t,"mediaType",["audio","video"]),!this._joinInfo)throw new Y(k.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(l=>l===e)){let l=new Y(k.INVALID_REMOTE_USER,"user is not in the channel");throw _.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),l}if(!e.hasAudio&&!e.hasVideo){let l=new Y(k.INVALID_REMOTE_USER,"user is not published");throw _.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),l}if(!(r||(t!=="audio"||e.hasAudio&&e._audioSSRC!==void 0)&&(t!=="video"||e.hasVideo&&e._videoSSRC!==void 0))){let l=new Y(k.REMOTE_USER_IS_NOT_PUBLISHED);throw _.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),l}let n=t==="audio"?e._audioSSRC:e._videoSSRC,i=t==="audio"?e._audioOrtc:e._videoOrtc,a=t==="video"?e._rtxSsrcId:void 0,o={stream_type:t==="audio"?Ne.AUDIO:Ne.VIDEO,ssrcId:n},s=await this._subscribeMutex.lock();_.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{let c=t==="audio"?e._audioSSRC:e._videoSSRC;c!==void 0&&c!==n&&(n=c,i=t==="audio"?e._audioOrtc:e._videoOrtc,a=t==="video"?e._rtxSsrcId:void 0,o={stream_type:t==="audio"?Ne.AUDIO:Ne.VIDEO,ssrcId:n}),fi.markSubscribeStart(this.store.clientId,n),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,n,a,i);try{this._p2pChannel.isPreSubScribe(n)||await this._gateway.subscribe(e.uid,o,!0)}catch(u){if((u==null?void 0:u.code)!==k.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),u;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(c){throw this._p2pChannel.reportSubscribeEvent(!1,c==null?void 0:c.code,e,t),c}_.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(c=>{_.warning("[".concat(this._clientId,"] auto set fallback failed"),c)});let l=t==="audio"?e._audioTrack:e._videoTrack;if(!l)throw new Y(k.UNEXPECTED_ERROR,"can not find remote track in user object");return l}catch(l){throw _.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),l),l}finally{s()}}async massSubscribe(e){if(Lc(e,"subscribeList"),!this._joinInfo)throw new Y(k.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));let t=Date.now(),r=new Map,n=await this._subscribeMutex.lock();_.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map(s=>{let{user:l,mediaType:c}=s;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(c)}).join("; ")));let i=(e=[...e]).map(s=>{let{user:l,mediaType:c}=s;return{user:l,mediaType:c}}),a=await this._p2pChannel.globalLock();try{var o;for(let l=e.length-1;l>=0;l--){let c=e[l],{user:u,mediaType:h}=c;if(fn(h,"mediaType",["audio","video"]),!u){let m=new Y(k.INVALID_PARAMS,"user property does not exist in subscribeList item");throw _.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),m}if(!this._users.find(m=>m===u)){let m=new Y(k.INVALID_REMOTE_USER,"user is not in the channel");_.error("[".concat(this._clientId,"] can not massSubscribe ").concat(u.uid,", this user is not in the channel")),i[l].error=m,e.splice(l,1);continue}if(h==="audio"&&(!u.hasAudio||u._audioSSRC===void 0)||h==="video"&&(!u.hasVideo||u._videoSSRC===void 0)){let m=new Y(k.REMOTE_USER_IS_NOT_PUBLISHED);_.error("[".concat(this._clientId,"] can not subscribe ").concat(u.uid," with mediaType ").concat(h,", remote user is not published")),i[l].error=m,e.splice(l,1);continue}let f=wn.Video|wn.LwoVideo,p=r.get(u);if(p){if(h==="video"?p&f:p&wn.Audio){e.splice(l,1),_.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(u.uid,", mediaType:").concat(h," twice"));continue}r.set(u,p|(h==="video"?f:wn.Audio))}else r.set(u,h==="video"?f:wn.Audio)}for(let l=e.length-1;l>=0;l--){let c=e[l],{user:u,mediaType:h}=c,f=wn.Video|wn.LwoVideo;if(this._p2pChannel.hasRemoteMedia(u,h)){await this._p2pChannel.unmuteRemoteNoLock(u,h);let p=r.get(u);r.set(u,h==="video"?p^f:p^wn.Audio),e.splice(l,1)}}this.store.massSubscribe(e.map(l=>({userId:l.user.uid,type:l.mediaType})),t);let s=wl(o=Array.from(r.entries())).call(o,(l,c)=>{let[u,h]=c;if(h===0)return l;let f={stream_id:u.uid,stream_type:h};return h&wn.Audio&&(f.audio_ssrc=u._audioSSRC),h&wn.Video&&(f.video_ssrc=u._videoSSRC),l.push(f),l},[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map(c=>{let{user:u,mediaType:h}=c;return{user:u,mediaType:h,ssrcId:h===Ne.VIDEO?u._videoSSRC:u._audioSSRC,rtxSsrcId:h===Ne.VIDEO?u._rtxSsrcId:void 0}}));let l=new Map;if(s=s.filter(c=>c.video_ssrc&&!this._p2pChannel.isPreSubScribe(c.video_ssrc)||c.audio_ssrc&&!this._p2pChannel.isPreSubScribe(c.audio_ssrc)||!c.video_ssrc&&!c.audio_ssrc),s.length>0){let c=await this._gateway.subscribeAll(s,!0);((c==null?void 0:c.users)||[]).forEach(u=>{let{stream_id:h,video_error_code:f,audio_error_code:p,error_code:m}=u;(f||p||m)&&l.set(h,{video_error_code:f,audio_error_code:p,error_code:m})})}if(Array.from(l.entries()).length>0){let c=[];Array.from(l.entries()).forEach(u=>{let[h,f]=u,p=this.remoteUsers.find(m=>m.uid===h);if(p){let m;f.error_code||f.video_error_code&&f.audio_error_code?m=void 0:f.video_error_code?m=Ne.VIDEO:f.audio_error_code&&(m=Ne.AUDIO),c.push({user:p,mediaType:m})}}),c.length>0&&await this._p2pChannel.massUnsubscribeNoLock(c)}for(let c of i){let u=l.get(c.user.uid);if(u){let h=u.error_code||c.mediaType==="audio"&&u.audio_error_code||c.mediaType==="video"&&u.video_error_code;if(h){let f=Dv(h);_.error("user:".concat(c.user.uid," mediaType:").concat(c.mediaType," has massSubscribe error ").concat(f.desc)),c.error=new Y(k.SUBSCRIBE_FAILED,"code ".concat(h,": ").concat(f.desc))}}c.error||(c.mediaType==="video"?c.track=c.user.videoTrack:c.track=c.user.audioTrack)}return this.store.massSubscribe(i.filter(c=>!c.error).map(c=>({userId:c.user.uid,type:c.mediaType})),void 0,Date.now()),i.forEach(c=>{var u;xe.subscribe(this.store.sessionId,{succ:!!c.error,ec:((u=c.error)===null||u===void 0?void 0:u.code)||null,video:c.mediaType===Ne.VIDEO,audio:c.mediaType===Ne.AUDIO,peerid:c.user.uid,subscribeRequestid:c.mediaType===Ne.VIDEO?c.user._videoSSRC:c.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t),preSsrc:this._p2pChannel.isPreSubScribe(c.user._videoSSRC)},!0)}),_.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map(c=>{let{user:u,mediaType:h}=c;return"user: ".concat(u==null?void 0:u.uid,", mediaType: ").concat(h)}).join("; "))),i}catch(l){throw await this._p2pChannel.massUnsubscribeNoLock(e),l}}finally{a(),n()}}async unsubscribe(e,t,r){if(!(e instanceof Gu)){let i=this.remoteUsers.find(a=>a.uid===e);if(!i)throw new Y(k.INVALID_REMOTE_USER,"user is not in the channel");e=i}if(t||this.store.useP2P){if(t==="datachannel")return this._unsubscribeDataChannel(e,r)}else await this._unsubscribeDataChannel(e,r);if(t&&fn(t,"mediaType",["audio","video"]),!this._joinInfo)throw new Y(k.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(i=>i===e)){let i=new Y(k.INVALID_REMOTE_USER,"user is not in the channel");throw _.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),i}_.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));let n=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof Ma)await this._p2pChannel.unsubscribe(e,t);else{let i=await this._p2pChannel.unsubscribe(e,t);i&&await this._gateway.unsubscribe(i,e.uid),t&&t!=="audio"||(e._audio_pre_subscribed=!1),t&&t!=="video"||(e._video_pre_subscribed=!1),e._is_pre_created&&vT(this._users,e),_.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(i){if(i.code===k.DISCONNECT_P2P)return void _.warning("disconnecting p2p, abort unsubscribe request.");throw _.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),i.toString()),i}finally{n()}}async _unsubscribeDataChannel(e,t){if(t&&Kt(t,"id",0,65535,!0),!this._joinInfo)throw new Y(k.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find(n=>n===e)){let n=new Y(k.INVALID_REMOTE_USER,"user is not in the channel");throw _.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),n}let r;if(typeof t=="number"){let n=e._dataChannels.find(i=>i.id===t);n&&(r=[n])}else r=e._dataChannels;if(r===void 0){let n=new Y(k.REMOTE_USER_IS_NOT_PUBLISHED);throw _.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),n}_.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(r.map(n=>n.id)));try{let n=await this._p2pChannel.unsubscribeDataChannel(e,r);n&&await this._gateway.unsubscribeDataChannel(n,e.uid),_.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(n))}catch(n){if(n.code===k.DISCONNECT_P2P)return void _.warning("disconnecting p2p, abort unsubscribe request.");throw _.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),n.toString()),n}}async massUnsubscribe(e){if(Lc(e,"unsubscribeList"),!this._joinInfo)throw new Y(k.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");_.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map(r=>{let{user:n,mediaType:i}=r;return"user: ".concat(n==null?void 0:n.uid,", mediaType: ").concat(i,";")}).join())),e=[...e];let t=new Map;for(let r=e.length-1;r>=0;r--){let{user:n,mediaType:i}=e[r];if(!n){let o=new Y(k.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw _.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),o}if(fn(i,"mediaType",["video","audio",void 0]),!this._users.find(o=>o===n)){_.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(n.uid,", user is not in the channel")),e.splice(r,1);continue}let a=wn.Video|wn.LwoVideo;if(t.has(n)){let o=t.get(n),s;switch(i){case"video":s=o&a;break;case"audio":s=o&wn.Audio;break;default:s=o&(wn.Audio|a)}if(s){_.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(n.uid,",mediaType:").concat(i," twice.")),e.splice(r,1);continue}i?i==="audio"?t.set(n,o|wn.Audio):i==="video"&&t.set(n,o|a):t.set(n,o|wn.Audio|a)}else i?i==="audio"?t.set(n,wn.Audio):i==="video"&&t.set(n,a):t.set(n,wn.Audio|a)}try{let r=await this._p2pChannel.massUnsubscribe(e);r&&await this._gateway.massUnsubscribe(r),_.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map(n=>{let{user:i,mediaType:a}=n;return"user: ".concat(i==null?void 0:i.uid,", mediaType: ").concat(a,";")}).join()))}catch(r){if(r.code===k.DISCONNECT_P2P)return void _.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw _.error("[".concat(this._clientId,"] massUnsubscribe error"),r.toString()),r}}async setLowStreamParameter(e){(function(r){if(!r)throw new ee(k.INVALID_PARAMS);br(r.width)||YN(r.width,"streamParameter.width"),br(r.height)||YN(r.height,"streamParameter.height"),br(r.framerate)||YN(r.framerate,"streamParameter.framerate"),br(r.bitrate)||Kt(r.bitrate,"streamParameter.bitrate")})(e),(!e.width&&e.height||e.width&&!e.height)&&_.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),_.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));let t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,oe.LocalVideoLowTrack)}async enableDualStream(){if(!Rt().supportDualStream)throw xe.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new Y(k.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new Y(k.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw xe.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,xe.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),_.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new Y(k.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(oe.LocalVideoLowTrack))try{let e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw xe.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,xe.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),_.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(r){fn(r,"role",["audience","host"])}(e),t&&Y$(t),this.mode==="rtc"||this.mode==="p2p")throw _.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new Y(k.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&e==="host")throw new Y(k.INVALID_OPERATION,"host mode can not set audience latency level");if(e==="audience"&&this._p2pChannel.hasLocalMedia())throw new Y(k.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(e,t),this._config.role=e,_.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}getRemoteInboundOffset(){var e;let t=(e=this._p2pChannel.getStats())===null||e===void 0?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;let r=t.timestamp-Date.now();return Math.abs(r)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?r:0}getNtpWallTimeInMs(){return document.visibilityState==="visible"&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(Fn(e,"proxyServer"),!t){if(this.connectionState!=="DISCONNECTED")throw new Y(k.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Y(k.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,xe.setProxyServer(this._proxyServer),_.setProxyServer(this._proxyServer),_.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if(this.connectionState!=="DISCONNECTED")throw new Y(k.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Y(k.INVALID_OPERATION,"You have already set the proxy")}if(Sx(e))return this._turnServer={servers:e,mode:"original-manual"},void _.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map(r=>r.urls).join(","),"."));e.forEach(r=>Tne(r)),this._turnServer={servers:e,mode:"manual"},_.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if(this.connectionState!=="DISCONNECTED")throw new Y(k.INVALID_OPERATION,"you should set license before join channel");if(Fn(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new Y(k.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,_.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if(this.connectionState!=="DISCONNECTED")throw new Y(k.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new Y(k.INVALID_OPERATION,"You have already set the proxy");let t=[3,4,5],r;switch(e===void 0&&(e=3),e){case 1:case 2:throw new Y(k.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:r="proxy3";break;case 4:r="proxy4";break;case 5:r="proxy5";break;default:throw new Y(k.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=r,this.store.cloudProxyServerMode=r,_.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new Y(k.INVALID_OPERATION,"Stop proxy server after leave channel");xe.setProxyServer(),_.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",_.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new Y(k.INVALID_PARAMS,"accessPoints is required.");Lc(e.accessPoints.serverList,"accessPoints.serverList"),Fn(e.accessPoints.domain,"accessPoints.domain");let t=(f,p)=>{Kt(f,p,0,65535,!0)},r=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),r=e.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Y(k.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");M("CLOSE_AFB_FOR_LOCAL_AP")&&(Wt("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),Wt("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));let n=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,a=e.accessPoints.serverList.map(f=>n.test(f)?"".concat(f.replace(/\./g,"-"),".").concat(i):f),o=a.map(f=>"".concat(f,":").concat(r));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Wt("WEBCS_DOMAIN",o),Wt("WEBCS_DOMAIN_BACKUP_LIST",o),Wt("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(Lc(e.report.hostname,"report.hostname"),Wt("EVENT_REPORT_DOMAIN",e.report.hostname[0]),Wt("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(Wt("EVENT_REPORT_DOMAIN",a[0]),Wt("EVENT_REPORT_BACKUP_DOMAIN",a[1]||a[0]));let s=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),s=e.report.port),Wt("STATS_COLLECTOR_PORT",s),e.report?Wt("ENABLE_EVENT_REPORT",!0):Wt("ENABLE_EVENT_REPORT",!1);let l="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(Lc(e.log.hostname,"log.hostname"),l=e.log.hostname[0]):l=a[0];let c=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),c=e.log.port),Wt("LOG_UPLOAD_SERVER","".concat(l,":").concat(c));let u=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(Lc(e.cds.hostname,"cds.hostname"),u=e.cds.hostname):u=a;let h=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),h=e.cds.port),Wt("CDS_AP",u.map(f=>"".concat(f,":").concat(h))),e.cds?Wt("ENABLE_CONFIG_DISTRIBUTE",!0):Wt("ENABLE_CONFIG_DISTRIBUTE",!1),_.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(Lc(e,"serverList"),Fn(t,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Y(k.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");let r=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map(n=>r.test(n)?"".concat(n.replace(/\./g,"-"),".").concat(t):n),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Wt("WEBCS_DOMAIN",e),Wt("WEBCS_DOMAIN_BACKUP_LIST",e),Wt("GATEWAY_DOMAINS",[t]),Wt("EVENT_REPORT_DOMAIN",e[0]),Wt("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),Wt("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),_.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(fn(e,"streamType",[0,1]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(t){throw _.error("[".concat(this._clientId,"] set default remote video stream type error"),t.toString()),t}else _.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){fn(t,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout(()=>{let r=this._users.find(n=>n.uid===e);r&&r.videoTrack&&r.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(r){throw _.error("[".concat(this._clientId,"] set remote video stream type error"),r.toString()),r}_.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){fn(t,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(r){throw _.error("[".concat(this._clientId,"] set stream fallback option"),r.toString()),r}_.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,r,n){(function(a){fn(a,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])})(e),Fn(t,"secret");let i=["aes-128-gcm2","aes-256-gcm2"];if(be(i).call(i,e)){if(!r||!(r instanceof Uint8Array&&r.length===32))throw new Y(k.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(r)throw new Y(k.INVALID_PARAMS,"current encrypt mode does not need salt");if(n){if(Bc(n,"encryptDataStream"),!be(i).call(i,e))throw new Y(k.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(t)||_.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=e,this._encryptionSecret=t,r&&(this._encryptionSalt=yd(r))}async renewToken(e){if(Fn(e,"token",1,2047),!this._key||!this._joinInfo)throw new Y(k.INVALID_OPERATION,"renewToken should not be called before user join");let t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);let r=await this._renewTokenMutex.lock();try{if(M("USE_NEW_TOKEN")){_.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));let n=await nHe(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Zr);_.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:n})}else _.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});_.debug("[".concat(this._clientId,"] renewToken success"))}catch(n){throw this._key=t,this._joinInfo.token=t,_.error("[".concat(this._clientId,"] renewToken failed"),n.toString()),n}finally{r()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?_.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{let e=this._p2pChannel.getAudioLevels();this.safeEmit(vt.VOLUME_INDICATOR,e)},M("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){let e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if(this.codec!=="h264")throw new Y(k.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new Y(k.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new Y(k.LIVE_STREAMING_TASK_CONFLICT);let r=t?Wc.TRANSCODE:Wc.RAW;return this._createLiveStreamingClient(r).startLiveStreamingTask(e,r)}setLiveTranscoding(e){return this._createLiveStreamingClient(Wc.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){let t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(r=>r&&r.hasUrl(e));if(!t.length)throw new Y(k.INVALID_PARAMS,"can not find live streaming url to stop");await ye.all(t.map(r=>r&&r.stopLiveStreamingTask(e)))}async startChannelMediaRelay(e){hz(e),await this._createChannelMediaRelayClient().startChannelMediaRelay(e)}async updateChannelMediaRelay(e){hz(e),await this._createChannelMediaRelayClient().updateChannelMediaRelay(e)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new Y(k.INVALID_OPERATION,"can not send data stream, not joined");if((typeof e=="string"||e instanceof Uint8Array)&&(e={payload:e}),typeof e.payload=="string"){let i=new TextEncoder;e.payload=i.encode(e.payload)}let n=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&be(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(n=!0,e.payload=await async function(i,a,o){var s;let l=wl(s=Array.from(o)).call(s,(g,y)=>g+y,0),c={serverTs:0,seq:w$e++,length:o.length,checkSum:l},u=new Uint8Array(t8(l,2)),h=new ArrayBuffer(np),f=new DataView(h);f.setUint32(0,c.serverTs),f.setUint16(4,c.seq),f.setUint16(6,c.length),f.setUint16(8,c.checkSum);let p=16-o.length%16;o=J$(o,new Uint8Array(p));let m=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i,tagLength:n8,additionalData:u},a,o);return J$(new Uint8Array(h),new Uint8Array(m))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new Y(k.INVALID_PARAMS,n?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(Ke.DATA_STREAM,{payload:yd(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-IHe},!r)}sendMetadata(e){if(!this._joinInfo)throw new Y(k.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new Y(k.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Ke.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:yd(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(_$e),!this._joinInfo)throw new Y(k.INVALID_OPERATION,"can not send custom report, not joined");await xe.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){fn(t.spatialLayer,"spatialLayer",[0,1,2,3]),fn(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(r){throw _.error("[".concat(this._clientId,"] pick SVC layer failed"),r.toString()),r}}async setRTMConfig(e){let{apRTM:t=!1,rtmFlag:r}=e;if(Bc(t,"apRTM"),Kt(r,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=r,_.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),(this.connectionState==="CONNECTED"||this.connectionState==="RECONNECTING")&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=r,this._gateway.setRTM2Flag(r)}_reset(){if(_.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=pa.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&Kie(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach(e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach(t=>t._close()),e._dataChannels.length=0)}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new gi("client-publish"),this._subscribeMutex=new gi("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(e,t){var r;let n=e||Xp();e?_.debug("[".concat(this._clientId,"] new Session ").concat(n)):_.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(n));let i=e?"":this._sessionId||"";this._sessionId=n,this.store.sessionId=n;let a={lts:new Date().getTime(),mode:this.mode,buildFormat:2,stringUid:(t==null?void 0:t.stringUid)||((r=this._joinInfo)===null||r===void 0?void 0:r.stringUid),channelProfile:this.mode==="live"?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:i,clientRole:this.role==="audience"?2:1};xe.sessionInit(this._sessionId,ol({cname:t.channel,appid:t.appId},a)),this._joinInfo&&(this._joinInfo.sid=n),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=n)}async _publishHighStream(e){if(!this._joinInfo||this._uid===void 0)throw new Y(k.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&M("FORCE_TURN")&&!M("TURN_ENABLE_TCP")&&!M("TURN_ENABLE_UDP"))throw new Y(k.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");_.debug("[".concat(this._clientId,"] publish high stream"));try{let r=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof Ma){let n=(await r.next()).value;if(n){try{await this._gateway.sendExtensionMessage(Ur.PUBLISH,n,!0)}catch(i){throw r.throw(i),i}await r.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{let n=(await r.next()).value;if(n){var t;let i;try{i=await this._gateway.publish(this._uid,n,!0)}catch(a){if(a.code!==k.DISCONNECT_P2P)throw r.throw(a),a}await r.next(((t=i)===null||t===void 0?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(let i of e)i instanceof sr&&i._encoderConfig&&this._gateway.setVideoProfile(i._encoderConfig),!i.muted&&i.enabled||await this._p2pChannel.muteLocalTrack(i)}}catch(r){if(this._p2pChannel.reportPublishEvent(!1,r==null?void 0:r.code,e),(r==null?void 0:r.code)===k.WS_ABORT)return;throw r}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new Y(k.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Y(k.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));_.debug("[".concat(this._clientId,"] publish low stream"));let e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{let r=await this._p2pChannel.publishLowStream(this._lowStreamParameter),n=(await r.next()).value;if(n){var t;let i;try{i=await this._gateway.publish(this._uid,n,!0)}catch(a){if(a.code!==k.DISCONNECT_P2P)throw r.throw(a),a}r.next(((t=i)===null||t===void 0?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(r){if(this._p2pChannel.reportPublishEvent(!1,r==null?void 0:r.code,void 0,!0),(r==null?void 0:r.code)===k.WS_ABORT)return;throw r}}_createLiveStreamingClient(e){let t=()=>{if(!this._joinInfo||!this._appId)return new Y(k.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();let r=(n={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},Qy("LiveStreaming").create(n));var n;return r.onLiveStreamError=(i,a)=>{xe.reportApiInvoke(this._sessionId,{name:sn.ON_LIVE_STREAM_ERROR,options:[i,a],tag:Nr.TRACER}).onSuccess(),this.safeEmit(vt.LIVE_STREAMING_ERROR,i,a)},r.onLiveStreamWarning=(i,a)=>{xe.reportApiInvoke(this._sessionId,{name:sn.ON_LIVE_STREAM_WARNING,options:[i,a],tag:Nr.TRACER}).onSuccess(),this.safeEmit(vt.LIVE_STREAMING_WARNING,i,a)},r.on(eD.REQUEST_WORKER_MANAGER_LIST,(i,a,o)=>{if(!this._joinInfo)return o(new Y(k.INVALID_OPERATION,"can not find join info to get worker manager"));(async function(s,l,c,u){let h=M("UAP_AP").slice(0,M("AJAX_REQUEST_CONCURRENT")).map(f=>l.proxyServer?"https://".concat(l.proxyServer,"/ap/?url=").concat(f+"/api/v1?action=uap"):"https://".concat(f,"/api/v1?action=uap"));return await J7e(h,s,l,c,u)})(i,this._joinInfo,this._axiosCancelSource.token,Zr).then(a).catch(o)}),r};return e===Wc.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||t(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||t(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo)return new Y(k.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){let{sendResolutionWidth:t,sendResolutionHeight:r}=this.getLocalVideoStats(),n=(e={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:t,height:r}},Qy("ChannelMediaRelay").create(e));n.on("state",i=>{i===Ea.RELAY_STATE_FAILURE&&n&&n.dispose(),this.safeEmit(vt.CHANNEL_MEDIA_RELAY_STATE,i)}),n.on("event",i=>{this.safeEmit(vt.CHANNEL_MEDIA_RELAY_EVENT,i)}),this._channelMediaRelayClient=n,this._statsCollector.onStatsChanged=(i,a)=>{var o;i==="resolution"&&((o=this._channelMediaRelayClient)===null||o===void 0||o.setVideoProfile(a))}}var e;return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){let{added:r,deleted:n}=e,i=[];if(t){let a=[];this._users.forEach(o=>{o._dataChannels.forEach(s=>{r.every(l=>l.uid!==o._uintid||l.stream_id!==s.id)&&a.push({uid:o._uintid,stream_id:s.id,ordered:s.ordered,max_retrans_times:s.maxRetransmits,metadata:s.metadata})})}),a.length>0&&this._handleUpdateDataChannel({added:[],deleted:a})}Array.isArray(r)&&r.length>0&&r.forEach(a=>{let{uid:o,stream_id:s,ordered:l,max_retrans_times:c,metadata:u}=a,h=this._users.find(f=>f._uintid===o);if(!h)return void _.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"));if(_.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(o)),be(i).call(i,h)||i.push(h),h._uintid||(h._uintid=o),h._dataChannels.findIndex(f=>f.id===a.stream_id)===-1){let f={id:s,ordered:!!l,maxRetransmits:c,metadata:u},p=function(m){return Cz(m,!0)}(f);h._dataChannels.push(p),_.info("[".concat(this._clientId,"] remote user ").concat(h.uid," published datachannel")),t||this.safeEmit(vt.USER_PUBLISHED,h,"datachannel",f)}this._p2pChannel.hasPendingRemoteDataChannel(h,a.stream_id)&&(_.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(h.uid," after reconnect.")),this._subscribeDataChannel(h,a.stream_id).catch(f=>{_.error("[".concat(this._clientId,"] resubscribe datachannel error"),f.toString())}))}),t&&(this.safeEmit(vt.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(n)&&n.length>0&&n.forEach(a=>{let{uid:o,stream_id:s}=a,l=this._users.find(u=>u._uintid===o);if(!l)return void _.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));let c=l._dataChannels.find(u=>u.id===a.stream_id);c&&(_.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(o)),this._p2pChannel.unsubscribeDataChannel(l,[c]).then(u=>{if(l._dataChannels=l._dataChannels.filter(h=>h!==c),u)return this._gateway.unsubscribeDataChannel(u,l.uid)}),_.info("[".concat(this._clientId,"] remote user ").concat(o," unpublished datachannel ,id:").concat(c.id)),this.safeEmit(vt.USER_UNPUBLISHED,l,"datachannel",c._config))})}_handleRemoveDataChannels(e){let t=this._users.find(r=>r.uid===e.uid);if(t){if(t._dataChannels!==void 0&&t._dataChannels.length>0){_.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));let r=()=>{_.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach(n=>{this.safeEmit(vt.USER_UNPUBLISHED,t,"datachannel",n._config)})};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then(n=>{if(n)return this._gateway.unsubscribeDataChannel(n,t.uid)}),r()}}else _.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(Qn.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(Qn.CONNECTION_STATE_CHANGE,(e,t,r)=>{var n;if(r===$t.FALLBACK)return;let i=()=>{this.safeEmit(vt.CONNECTION_STATE_CHANGE,e,t,r)};if(xe.reportApiInvoke(this._sessionId||((n=this._gateway.joinInfo)===null||n===void 0?void 0:n.sid)||null,{name:sn.CONNECTION_STATE_CHANGE,options:[e,t,r],tag:Nr.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:r})),_.info("[".concat(this._clientId,"] connection state change: ").concat(t," -> ").concat(e)),e==="DISCONNECTED")return this._reset(),void i();if(e==="RECONNECTING")this._users.forEach(o=>{o._trust_in_room_=!1,o._trust_audio_enabled_state_=!1,o._trust_video_enabled_state_=!1,o._trust_audio_mute_state_=!1,o._trust_video_mute_state_=!1,o._trust_audio_stream_added_state_=!1,o._trust_video_stream_added_state_=!1,o._is_pre_created||(o._audio_pre_subscribed||(o._audioSSRC=void 0,o._audioOrtc=void 0),o._video_pre_subscribed||(o._videoSSRC=void 0,o._videoOrtc=void 0,o._rtxSsrcId=void 0),o._cname=void 0)}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(e==="CONNECTED"){var a;this._streamFallbackTypeCacheMap.forEach((o,s)=>{this._gateway.setStreamFallbackOption(s,o).catch(l=>{_.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),l)})}),this._remoteStreamTypeCacheMap.forEach((o,s)=>{this._gateway.setRemoteVideoStreamType(s,o).catch(l=>{_.warning("[".concat(this._clientId,"] auto set remote stream type failed"),l)})}),this._remoteDefaultVideoStreamType!==void 0&&((a=this._joinInfo)===null||a===void 0?void 0:a.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{_.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(o=>{_.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(o))}),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(o=>!o._trust_in_room_).forEach(o=>{_.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(o.uid)),this._handleUserOffline({uid:o.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(o=>{o._trust_audio_mute_state_||(_.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(o.uid)),this._handleMuteStream(o.uid,Ne.AUDIO,!1)),o._trust_video_mute_state_||(_.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(o.uid)),this._handleMuteStream(o.uid,Ne.VIDEO,!1)),o._trust_audio_enabled_state_||(_.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(o.uid)),this._handleSetStreamLocalEnable("audio",o.uid,!0)),o._trust_video_enabled_state_||(_.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(o.uid)),this._handleSetStreamLocalEnable("video",o.uid,!0)),o._trust_video_stream_added_state_||(_.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(o.uid)),this._handleResetAddStream(o,"video")),o._trust_audio_stream_added_state_||(_.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(o.uid)),this._handleResetAddStream(o,"audio")),o._video_added_||o._audio_added_||(_.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(o.uid)),this._handleRemoveStream({uid:o.uid,uint_id:o._uintid}))}))},1e3))}i()}),this._gateway.on(Qn.REQUEST_NEW_GATEWAY_LIST,async(e,t)=>{if(!this._joinInfo)return t(new Y(k.UNEXPECTED_ERROR,"can not recover, no join info"));try{let r,n=await Az(ol(ol({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));n?(r=n.ap,Oz(n),this._joinInfo.preload=!0):(r=await fD(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Zr,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=r.gatewayInfo.res,this._joinInfo.gatewayAddrs=r.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=r.gatewayInfo.uni_lbs_ip);let i=[];r.gatewayInfo.gatewayAddrs.forEach(a=>{let{address:o}=a,[s,l]=o.split(":");this._joinInfo&&this._joinInfo.proxyServer?i.push({proxy:this._joinInfo.proxyServer,host:s,port:l}):i.push({host:s,port:l})}),e(i)}catch(r){t(r)}}),this._gateway.on(Qn.NETWORK_QUALITY,e=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(vt.NETWORK_QUALITY,e)}),this._gateway.on(Qn.STREAM_TYPE_CHANGE,(e,t)=>{this.safeEmit(vt.STREAM_TYPE_CHANGED,e,t),xe.reportApiInvoke(this._sessionId,{name:sn.STREAM_TYPE_CHANGE,options:[e,t],tag:Nr.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))}),this._gateway.on(Qn.IS_P2P_DISCONNECTED,e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)}),this._gateway.on(Qn.REQUEST_P2P_CONNECTION_PARAMS,async(e,t,r)=>{try{let n=await this._p2pChannel.getEstablishParams();M("ENABLE_PREALLOC_PC")&&n||(n=await this._p2pChannel.startP2PConnection(e)),t(n)}catch(n){r(n)}}),this._gateway.on(Qn.JOIN_RESPONSE,(e,t)=>{if(this.store.useP2P)return;let r=xH(e.ortc,t,e.attributes.userAttributes.preSubSsrcs);this._p2pChannel.connect(r)}),this._gateway.on(Qn.PRE_CONNECT_PC,async e=>{let{candidates:t,fingerprint:r}=e;if(this._joinInfo&&t.length>0&&!this._p2pChannel.isPlanB){var n;await this._p2pChannel.startP2PConnection({turnServer:this._joinInfo.turnServer});let{cert:i,cid:a}=this._joinInfo.apResponse;await this._p2pChannel.connect({iceParameters:{iceUfrag:"".concat(a,"_").concat(i),icePwd:"".concat(a,"_").concat(i)},dtlsParameters:{fingerprints:[{hashFunction:"sha-256",fingerprint:(n=M("FINGERPRINT"))!==null&&n!==void 0?n:r}]},candidates:t,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:"active",cname:"o/i14u9pJrxRKAsu",preallocation:!0})}})}_handleGatewaySignalEvents(){this._gateway.signal.on(mt.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(mt.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(mt.ON_ADD_AUDIO_STREAM,e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc)),this._gateway.signal.on(mt.ON_ADD_VIDEO_STREAM,e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId)),this._gateway.signal.on(mt.ON_REMOTE_DATASTREAM_UPDATE,e=>{this._handleUpdateDataChannel(e)}),this._gateway.signal.on(mt.ON_REMOTE_FULL_DATASTREAM_INFO,e=>{this._handleUpdateDataChannel({added:e.datastreams||[],deleted:[]},!0)}),this._gateway.signal.on(mt.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(mt.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(mt.MUTE_AUDIO,e=>this._handleMuteStream(e.uid,Ne.AUDIO,!0)),this._gateway.signal.on(mt.UNMUTE_AUDIO,e=>this._handleMuteStream(e.uid,Ne.AUDIO,!1)),this._gateway.signal.on(mt.MUTE_VIDEO,e=>this._handleMuteStream(e.uid,Ne.VIDEO,!0)),this._gateway.signal.on(mt.UNMUTE_VIDEO,e=>this._handleMuteStream(e.uid,Ne.VIDEO,!1)),this._gateway.signal.on(mt.RECEIVE_METADATA,e=>{let t=Rh(e.metadata);this.safeEmit(vt.RECEIVE_METADATA,e.uid,t)}),this._gateway.signal.on(mt.ON_DATA_STREAM,async e=>{var t;if(!e)return;let r=Rh(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&be(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<np)throw new Y(k.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(np));r=await async function(i,a,o){let s=o.subarray(0,np),l=s.slice(8,np),c=(l[0]<<8)+l[1],u=(s[6]<<8)+s[7],h=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:i,tagLength:n8,additionalData:new Uint8Array(t8(c,2))},a,o.subarray(np));return new Uint8Array(h).subarray(0,u)}(this._encryptDataStreamIv,this._encryptDataStreamKey,r)}let n=0;if(e.ordered||e.syncWithAudio){let i=this._p2pChannel.getStats(),a=this.remoteUsers.find(s=>s.uid===e.uid),o=i==null?void 0:i.audioRecv.find(s=>s.ssrc===(a==null?void 0:a._audioSSRC));n=o==null?void 0:o.jitterBufferMs}n==null&&(n=0),AHe(ol(ol({},e),{},{payload:r}),n,{id:this._clientId,onStreamMessage:typeof this.onStreamMessage=="function"?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})}),this._gateway.signal.on(mt.ON_CRYPT_ERROR,()=>{Ad(()=>{_.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(vt.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(mt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(mt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{_.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,$t.TOKEN_EXPIRE),this.safeEmit(vt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(mt.ON_STREAM_FALLBACK_UPDATE,e=>{_.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(vt.STREAM_FALLBACK,e.stream_id,e.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(mt.ON_PUBLISH_STREAM,e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),_.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))}),this._gateway.signal.on(mt.ENABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)}),this._gateway.signal.on(mt.DISABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)}),this._gateway.signal.on(qe.REQUEST_TIMEOUT,(e,t)=>{if(this._joinInfo)switch(e){case Ke.PUBLISH:{if(!t)return;let i=t.ortc;if(i){var r,n;let a=i.some(l=>{let{stream_type:c}=l;return c===jt.Audio}),o=i.some(l=>{let{stream_type:c}=l;return c!==jt.Audio}),s=i.some(l=>{let{stream_type:c}=l;return c===jt.Screen||c===jt.ScreenLow});t.state==="offer"&&xe.publish(this._joinInfo.sid,{eventElapse:fi.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:k.TIMEOUT,audio:a,video:o,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:s,audioName:a?(r=i.find(l=>{let{stream_type:c}=l;return c===jt.Audio}))===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId.toString():void 0,videoName:o?(n=i.find(l=>{let{stream_type:c}=l;return c!==jt.Audio}))===null||n===void 0||(n=n.ssrcs[0])===null||n===void 0?void 0:n.ssrcId.toString():void 0})}break}case Ke.SUBSCRIBE:t&&xe.subscribe(this._joinInfo.sid,{succ:!1,ec:k.TIMEOUT,audio:t.stream_type===Ne.AUDIO,video:t.stream_type===Ne.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:fi.measureFromSubscribeStart(this.store.clientId,t.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(t.ssrcId)})}}),this._gateway.signal.on(mt.ON_P2P_OK,e=>{this.uid,this._uid}),this._gateway.signal.on(mt.ON_PUBLISHED_USER_LIST,e=>{if(e==null||!e.users)return;M("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter(n=>!Zd(n.string_id||n.stream_id,this.channelName)));let t=[],r=[];for(let n of e.users){let i=this._users.find(u=>u._uintid===n.stream_id);i?i._trust_in_room_=!0:(i=new Gu(n.string_id||n.stream_id,n.stream_id),this._users.push(i),this.getListeners(vt.PUBLISHED_USER_LIST).length===0&&(_.debug("[".concat(this._clientId,"] user online"),n.stream_id),this.safeEmit(vt.USER_JOINED,i)));let a=wn.Audio&n.stream_type,o=(wn.Video|wn.LwoVideo)&n.stream_type,s=(65280&n.stream_type)!=0,l=a&&i.hasAudio,c=o&&i.hasVideo;o&&(i._trust_video_stream_added_state_=!0,i._video_added_=!0,i._videoSSRC=n.video_ssrc,i._rtxSsrcId=n.video_rtx),a&&(i._trust_audio_stream_added_state_=!0,i._audio_added_=!0,i._audioSSRC=n.audio_ssrc),a&&!l&&this.getListeners(vt.PUBLISHED_USER_LIST).length===0&&(_.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published audio")),this.safeEmit(vt.USER_PUBLISHED,i,"audio")),o&&!c&&this.getListeners(vt.PUBLISHED_USER_LIST).length===0&&(_.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published video")),this.safeEmit(vt.USER_PUBLISHED,i,"video")),(a&&!l||o&&!c||s)&&t.push(i),o&&this._p2pChannel.hasPendingRemoteMedia(i,"video")&&r.push({user:i,mediaType:"video"}),a&&this._p2pChannel.hasPendingRemoteMedia(i,"audio")&&r.push({user:i,mediaType:"audio"})}r.length>0&&(_.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(r.map(n=>"user: ".concat(n.user.uid,", mediaType: ").concat(n.mediaType)).join("; ")," ")),this.massSubscribe(r).catch(n=>{_.error("[".concat(this._clientId,"] mass resubscribe error"),n.toString())})),this.getListeners(vt.PUBLISHED_USER_LIST).length>0?M("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(_.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map(n=>n.uid).join(", "))),this.safeEmit(vt.PUBLISHED_USER_LIST,t)):_.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map(n=>n.uid).join(", ")))}),this._gateway.signal.on(mt.ON_RTP_CAPABILITY_CHANGE,e=>{let{video_codec:t}=e;this._p2pChannel instanceof NE&&this._p2pChannel.updateRemoteRTPCapabilities(t.map(r=>r.toLowerCase()).filter(r=>{var n;return be(n=Object.keys(xx)).call(n,r)}))})}_handleP2PEvents(){this._gateway.signal.on(mt.ON_USER_OFFLINE,()=>{this._p2pChannel.disconnectForReconnect()}),this._gateway.signal.on(Ur.PUBLISH,(e,t,r)=>{let{uid:n}=e;e.forEach(i=>{let{kind:a,ssrcs:o,mid:s,isMuted:l}=i;this._handleP2PAddAudioOrVideoStream(a,n,o[0].ssrcId,s);let c=this._users.find(u=>u.uid===n);return c&&this._p2pChannel instanceof Ma?this._p2pChannel.mockSubscribe(c,a,o[0].ssrcId,s).then(()=>{t()}).catch(r):t(),this._handleMuteStream(n,a,!!l)})}),this._gateway.signal.on(Ur.CALL,async(e,t,r)=>{if(this._p2pChannel instanceof Ma)try{var n;t(await this._p2pChannel.startP2P({turnServer:(n=this._joinInfo)===null||n===void 0?void 0:n.turnServer},e))}catch(i){r(i)}}),this._gateway.signal.on(qe.P2P_CONNECTION,async e=>{this._p2pChannel instanceof Ma&&await this._p2pChannel.p2pConnect(e)}),this._gateway.signal.on(Ur.UNPUBLISH,async(e,t,r)=>{if(this._p2pChannel instanceof Ma){let{unpubMsg:n,uid:i}=e,a=this._users.find(o=>o.uid===i);if(!a)return _.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i)),void t();try{n.forEach(async o=>{let{stream_type:s}=o,l=s===jt.Audio?Ne.AUDIO:Ne.VIDEO;await this._p2pChannel.unsubscribe(a,l),this._handleMuteStream(i,l,!0)}),t()}catch(o){r(o)}}}),this._gateway.signal.on(Ur.CONTROL,async(e,t)=>{let{action:r}=e;switch(r){case td.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,Ne.VIDEO,!0);break;case td.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,Ne.AUDIO,!0);break;case td.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,Ne.VIDEO,!1);break;case td.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,Ne.AUDIO,!1)}}),this._gateway.signal.on(Ur.RESTART_ICE,async(e,t,r)=>{if(this._p2pChannel instanceof Ma)try{let{direction:n,iceParameter:i}=e;n!==Xi.SEND_ONLY||i?t(await this._p2pChannel.restartICE(n,i)):(this._p2pChannel.handleDisconnect(n),t())}catch(n){r(n)}}),this._gateway.signal.on(Ur.CANDIDATE,e=>{if(this._p2pChannel instanceof Ma){let{candidate:t,direction:r}=e;this._p2pChannel.addRemoteCandidate(t,r)}}),this._p2pChannel.on(Be.RequestP2PRestartICE,async(e,t,r)=>{try{let{direction:n}=e;t(await this._gateway.sendExtensionMessage(Ur.RESTART_ICE,e,n===Xi.SEND_ONLY))}catch(n){r(n)}}),this._p2pChannel.on(Be.LocalCandidate,e=>{this._gateway.sendExtensionMessage(Ur.CANDIDATE,JSON.stringify(e),!0)}),this._p2pChannel.on(Be.RequestP2PMuteLocal,async(e,t,r)=>{try{await this._gateway.sendExtensionMessage(Ur.CONTROL,e,!0),t()}catch(n){r(n)}}),this._p2pChannel.on(Be.RequestP2PUnmuteRemote,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===k.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Be.RequestP2PMuteRemote,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===k.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Be.StateChange,(e,t)=>{t===Lt.Connected&&this._p2pChannel.republish()})}_handleP2PChannelEvents(){this._p2pChannel.on(Be.RequestMuteLocal,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===k.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Be.RequestUnmuteLocal,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===k.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Be.RequestRePublish,(e,t,r)=>{this.publish(e,!1).then(t).catch(r)}),this._p2pChannel.on(Be.RequestRePublishDataChannel,(e,t,r)=>{ye.all(e.map(async n=>{let i=await this._p2pChannel.publishDataChannel([n]);try{i.forEach(a=>{this._uid&&this._gateway.publishDataChannel(this._uid,a,!0)})}catch(a){if(a.code!==k.DISCONNECT_P2P)throw a}})).then(t).catch(r)}),this._p2pChannel.on(Be.RequestReSubscribe,async(e,t,r)=>{try{for(let{user:n,kind:i}of e)i===Ne.VIDEO?await this.subscribe(n,"video"):await this.subscribe(n,"audio");t()}catch(n){r(n)}}),this._p2pChannel.on(Be.RequestUpload,(e,t)=>{this._gateway.upload(e,t)}),this._p2pChannel.on(Be.RequestUploadStats,e=>{this._gateway.uploadWRTCStats(e)}),this._p2pChannel.on(Be.MediaReconnectStart,e=>{this.safeEmit(vt.MEDIA_RECONNECT_START,e)}),this._p2pChannel.on(Be.MediaReconnectEnd,e=>{this.safeEmit(vt.MEDIA_RECONNECT_END,e)}),this._p2pChannel.on(Be.NeedSignalRTT,e=>{e(this._gateway.getSignalRTT())}),this._p2pChannel.on(Be.RequestRestartICE,async e=>{if(this._p2pChannel instanceof Ma)return;let t=await this._p2pChannel.restartICE(e),r=await t.next();if(r.done)return;let n=r.value,i;try{i=await this._gateway.restartICE({iceParameters:n})}catch(o){return void t.throw(o)}let{iceParameters:a}=function(o){let s=o.iceParameters;return{iceParameters:{iceUfrag:s.iceUfrag,icePwd:s.icePwd}}}(i);await t.next({remoteIceParameters:a})}),this._p2pChannel.on(Be.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(Be.RequestReconnectPC,async()=>{var e;let{iceParameters:t,dtlsParameters:r,rtpCapabilities:n}=await this._p2pChannel.startP2PConnection({turnServer:(e=this._joinInfo)===null||e===void 0?void 0:e.turnServer}),{gatewayEstablishParams:i,gatewayAddress:a}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:r,rtpCapabilities:n}),o=xH(i,a);await this._p2pChannel.connect(o),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(Be.RequestUnpublishForReconnectPC,async(e,t,r)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(e,this._uid),t()):r()}),this._p2pChannel.on(Be.P2PLost,()=>{this.safeEmit(vt.P2P_LOST,this.store.uid)}),this._p2pChannel.on(Be.UpdateVideoEncoder,e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)}),this._p2pChannel.on(Be.ConnectionTypeChange,e=>{this.safeEmit(vt.IS_USING_CLOUD_PROXY,e)}),this._p2pChannel.on(Be.RequestLowStreamParameter,e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(Be.QueryClientConnectionState,e=>{e(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if(!this._joinInfo||this.connectionState!=="CONNECTED")throw new Y(k.INVALID_OPERATION,"[".concat(this._clientId,"] can not create content inspect, please join channel first"));if(this._inspect)throw new Y(k.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));try{let r=(t={config:e},Qy("ContentInspect").create(t));this._inspect=r,this.handleVideoInspectEvents(r);let{appId:n,cname:i,sid:a,token:o,uid:s,cid:l,vid:c}=this._joinInfo;await r.init({appId:n,areaCode:"",cname:i,sid:a,token:o,uid:s,cid:l,vid:c?Number(c):0},Zr)}catch(r){throw Array.isArray(r)?r[0]:r}var t}handleVideoInspectEvents(e){e.on(Nn.CONNECTION_STATE_CHANGE,(t,r)=>{if(this.safeEmit(vt.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,r),r===Es.CONNECTED){if(this.connectionState!=="CONNECTED")return void this.safeEmit(vt.CONTENT_INSPECT_ERROR,new Y(k.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}}),e.on(Nn.INSPECT_RESULT,(t,r)=>{var n;if((r==null?void 0:r.code)===k.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return _.debug("Stop inspect content because that has left channel"),this==null||(n=this._inspect)===null||n===void 0||n.close(),void(this._inspect=void 0);this.safeEmit(vt.CONTENT_INSPECT_RESULT,t,r)}),e.on(Nn.CLIENT_LOCAL_VIDEO_TRACK,t=>{t(this.localTracks.filter(r=>r.trackMediaType==="video")[0])})}async disableContentInspect(){if(!this._inspect)throw new Y(k.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(Bc(e,"enabled"),e){if(!t)throw new Y(k.INVALID_PARAMS,"config is required");if(Zie(t),!this._joinInfo)throw new Y(k.INVALID_OPERATION,"can not create image moderation, please join channel first");try{if(this._moderation)this._moderation.updateConfig(t);else{let n=(r={config:t},Qy("ImageModeration").create(r));this._moderation=n,this.handleImageModerationEvents(n);let{appId:i,cname:a,sid:o,token:s,uid:l,cid:c,vid:u}=this._joinInfo;await n.init({appId:i,areaCode:"",cname:a,sid:o,token:s,uid:l,cid:c,vid:u?Number(u):0},Zr)}}catch(n){throw Array.isArray(n)?n[0]:n}}else{var r;if(!this._moderation)throw new Y(k.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(n){throw Array.isArray(n)?n[0]:n}}}handleImageModerationEvents(e){e.on(il.CONNECTION_STATE_CHANGE,(t,r)=>{if(this.safeEmit(vt.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,r),t===No.CONNECTED){if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new Y(k.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}}),e.on(il.CLIENT_LOCAL_VIDEO_TRACK,t=>{t(this.localTracks.filter(r=>r.trackMediaType==="video")[0])})}setP2PTransport(e){if(function(t){fn(t,"transport",["default","auto","relay","sd-rtn"])}(e),this.mode!=="p2p")throw new Y(k.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,_.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}getJoinChannelServiceRecords(){return _.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){Bc(e,"enabled"),Wt("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}},Se(ve.prototype,"leave",[Vz],Object.getOwnPropertyDescriptor(ve.prototype,"leave"),ve.prototype),Se(ve.prototype,"publish",[Bz],Object.getOwnPropertyDescriptor(ve.prototype,"publish"),ve.prototype),Se(ve.prototype,"unpublish",[$z],Object.getOwnPropertyDescriptor(ve.prototype,"unpublish"),ve.prototype),Se(ve.prototype,"subscribe",[Hz],Object.getOwnPropertyDescriptor(ve.prototype,"subscribe"),ve.prototype),Se(ve.prototype,"presubscribe",[zz],Object.getOwnPropertyDescriptor(ve.prototype,"presubscribe"),ve.prototype),Se(ve.prototype,"massSubscribe",[Gz],Object.getOwnPropertyDescriptor(ve.prototype,"massSubscribe"),ve.prototype),Se(ve.prototype,"unsubscribe",[Wz],Object.getOwnPropertyDescriptor(ve.prototype,"unsubscribe"),ve.prototype),Se(ve.prototype,"massUnsubscribe",[Kz],Object.getOwnPropertyDescriptor(ve.prototype,"massUnsubscribe"),ve.prototype),Se(ve.prototype,"setLowStreamParameter",[qz],Object.getOwnPropertyDescriptor(ve.prototype,"setLowStreamParameter"),ve.prototype),Se(ve.prototype,"enableDualStream",[Yz],Object.getOwnPropertyDescriptor(ve.prototype,"enableDualStream"),ve.prototype),Se(ve.prototype,"disableDualStream",[Xz],Object.getOwnPropertyDescriptor(ve.prototype,"disableDualStream"),ve.prototype),Se(ve.prototype,"setClientRole",[Jz],Object.getOwnPropertyDescriptor(ve.prototype,"setClientRole"),ve.prototype),Se(ve.prototype,"setProxyServer",[Qz],Object.getOwnPropertyDescriptor(ve.prototype,"setProxyServer"),ve.prototype),Se(ve.prototype,"setTurnServer",[Zz],Object.getOwnPropertyDescriptor(ve.prototype,"setTurnServer"),ve.prototype),Se(ve.prototype,"setLicense",[eG],Object.getOwnPropertyDescriptor(ve.prototype,"setLicense"),ve.prototype),Se(ve.prototype,"startProxyServer",[tG],Object.getOwnPropertyDescriptor(ve.prototype,"startProxyServer"),ve.prototype),Se(ve.prototype,"stopProxyServer",[rG],Object.getOwnPropertyDescriptor(ve.prototype,"stopProxyServer"),ve.prototype),Se(ve.prototype,"setLocalAccessPointsV2",[nG],Object.getOwnPropertyDescriptor(ve.prototype,"setLocalAccessPointsV2"),ve.prototype),Se(ve.prototype,"setLocalAccessPoints",[iG],Object.getOwnPropertyDescriptor(ve.prototype,"setLocalAccessPoints"),ve.prototype),Se(ve.prototype,"setRemoteDefaultVideoStreamType",[aG],Object.getOwnPropertyDescriptor(ve.prototype,"setRemoteDefaultVideoStreamType"),ve.prototype),Se(ve.prototype,"setRemoteVideoStreamType",[oG],Object.getOwnPropertyDescriptor(ve.prototype,"setRemoteVideoStreamType"),ve.prototype),Se(ve.prototype,"setStreamFallbackOption",[sG],Object.getOwnPropertyDescriptor(ve.prototype,"setStreamFallbackOption"),ve.prototype),Se(ve.prototype,"setEncryptionConfig",[lG],Object.getOwnPropertyDescriptor(ve.prototype,"setEncryptionConfig"),ve.prototype),Se(ve.prototype,"renewToken",[cG],Object.getOwnPropertyDescriptor(ve.prototype,"renewToken"),ve.prototype),Se(ve.prototype,"enableAudioVolumeIndicator",[uG],Object.getOwnPropertyDescriptor(ve.prototype,"enableAudioVolumeIndicator"),ve.prototype),Se(ve.prototype,"startLiveStreaming",[dG],Object.getOwnPropertyDescriptor(ve.prototype,"startLiveStreaming"),ve.prototype),Se(ve.prototype,"setLiveTranscoding",[hG],Object.getOwnPropertyDescriptor(ve.prototype,"setLiveTranscoding"),ve.prototype),Se(ve.prototype,"stopLiveStreaming",[fG],Object.getOwnPropertyDescriptor(ve.prototype,"stopLiveStreaming"),ve.prototype),Se(ve.prototype,"startChannelMediaRelay",[pG],Object.getOwnPropertyDescriptor(ve.prototype,"startChannelMediaRelay"),ve.prototype),Se(ve.prototype,"updateChannelMediaRelay",[mG],Object.getOwnPropertyDescriptor(ve.prototype,"updateChannelMediaRelay"),ve.prototype),Se(ve.prototype,"stopChannelMediaRelay",[gG],Object.getOwnPropertyDescriptor(ve.prototype,"stopChannelMediaRelay"),ve.prototype),Se(ve.prototype,"sendCustomReportMessage",[yG],Object.getOwnPropertyDescriptor(ve.prototype,"sendCustomReportMessage"),ve.prototype),Se(ve.prototype,"pickSVCLayer",[vG],Object.getOwnPropertyDescriptor(ve.prototype,"pickSVCLayer"),ve.prototype),Se(ve.prototype,"setRTMConfig",[bG],Object.getOwnPropertyDescriptor(ve.prototype,"setRTMConfig"),ve.prototype),Se(ve.prototype,"enableContentInspect",[wG],Object.getOwnPropertyDescriptor(ve.prototype,"enableContentInspect"),ve.prototype),Se(ve.prototype,"disableContentInspect",[EG],Object.getOwnPropertyDescriptor(ve.prototype,"disableContentInspect"),ve.prototype),Se(ve.prototype,"setImageModeration",[_G],Object.getOwnPropertyDescriptor(ve.prototype,"setImageModeration"),ve.prototype),Se(ve.prototype,"setP2PTransport",[SG],Object.getOwnPropertyDescriptor(ve.prototype,"setP2PTransport"),ve.prototype),Se(ve.prototype,"getJoinChannelServiceRecords",[TG],Object.getOwnPropertyDescriptor(ve.prototype,"getJoinChannelServiceRecords"),ve.prototype),Se(ve.prototype,"setPublishAudioFilterEnabled",[CG],Object.getOwnPropertyDescriptor(ve.prototype,"setPublishAudioFilterEnabled"),ve.prototype),ve),eae=class wD{constructor(t,r){R(this,"id",0),R(this,"element",void 0),R(this,"peerPair",void 0),R(this,"context",void 0),R(this,"audioPlayerElement",void 0),R(this,"audioTrack",void 0),wD.count+=1,this.id=wD.count,this.element=t,this.context=r}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=t=>{let r=document.createElement("audio");r.srcObject=new MediaStream([t.track]),r.play(),this.audioPlayerElement=r}}async switchSdp(){if(!this.peerPair)return;let t=async(n,i)=>{let a=i==="offer"?await n.createOffer():await n.createAnswer();return await n.setLocalDescription(a),n.iceGatheringState==="complete"?n.localDescription:new ye(o=>{n.onicegatheringstatechange=()=>{n.iceGatheringState==="complete"&&o(n.localDescription)}})},r=async(n,i)=>await n.setRemoteDescription(i);try{let n=await t(this.peerPair[0],"offer");await r(this.peerPair[1],n);let i=await t(this.peerPair[1],"answer");await r(this.peerPair[0],i)}catch(n){throw new Y(k.LOCAL_AEC_ERROR,n.toString()).print()}}async getTracksFromMediaElement(t){if(this.audioTrack)return this.audioTrack;let r;try{t instanceof HTMLVideoElement&&(t.captureStream?t.captureStream():t.mozCaptureStream()),r=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(t).connect(r)}catch(i){throw new Y(k.LOCAL_AEC_ERROR,i.toString()).print()}if(!r)throw new Y(k.LOCAL_AEC_ERROR,"no dest node when local aec").print();let n=r.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();let t=this.element,r=await this.getTracksFromMediaElement(t);this.peerPair&&this.peerPair[0].addTrack(r),await this.switchSdp()}close(){_.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(t=>{t.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}},RG,OE;R(eae,"count",0);var qHe=window.AudioContext||window.webkitAudioContext,YHe=new(RG=Ve({report:xe}),Se((OE=class{constructor(){R(this,"units",[]),R(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return _.debug("the system does not need to process local aec"),-1;this.context||(this.context=new qHe);let t=this.units.find(r=>r&&r.getElement()===e);return t||(t=new eae(e,this.context),this.units.push(t)),t.startEchoCancellation(),_.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return Ct().name!==Mt.SAFARI}}).prototype,"processExternalMediaAEC",[RG],Object.getOwnPropertyDescriptor(OE.prototype,"processExternalMediaAEC"),OE.prototype),OE);function IG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function NG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IG(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var GA=window||document;function tae(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!GA)return;let r=Rr._cspEventHandlerPointer;if(r&&t)return void console.error(r,t);let n=i=>{if(!(i&&i.blockedURI&&(Rr.onSecurityPolicyViolation||Rr.getListeners(ql.SECURITY_POLICY_VIOLATION).length>0)))return;let a=i.blockedURI;M("CSP_DETECTED_HOSTNAME_LIST").some(o=>be(a).call(a,o))&&(Rr.onSecurityPolicyViolation&&typeof Rr.onSecurityPolicyViolation=="function"&&Rr.onSecurityPolicyViolation(i),Rr.getListeners(ql.SECURITY_POLICY_VIOLATION).length>0&&Rr.safeEmit(ql.SECURITY_POLICY_VIOLATION,i))};r&&GA.removeEventListener("securitypolicyviolation",r),(t||e&&typeof e=="function"||Rr.getListeners(ql.SECURITY_POLICY_VIOLATION).length>0)&&GA.addEventListener("securitypolicyviolation",n),Rr._cspEventHandlerPointer=n}var XHe=na,JHe=ene,AG=RegExp.prototype,QHe=function(e){return e===AG||XHe(AG,e)?JHe(e):e.flags},Di=$r(QHe);function Bg(e){let t=e.length;for(;--t>=0;)e[t]=0}var GM=256,rae=286,O0=30,k0=15,ED=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),M_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ZHe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),OG=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Uc=new Array(576);Bg(Uc);var P0=new Array(60);Bg(P0);var $v=new Array(512);Bg($v);var Hv=new Array(256);Bg(Hv);var WM=new Array(29);Bg(WM);var AT=new Array(O0);function WA(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var kG,PG,DG;function KA(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Bg(AT);var nae=e=>e<256?$v[e]:$v[256+(e>>>7)],zv=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ao=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,zv(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},Yl=(e,t,r)=>{ao(e,r[2*t],r[2*t+1])},iae=(e,t)=>{let r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0);return r>>>1},aae=(e,t,r)=>{let n=new Array(16),i,a,o=0;for(i=1;i<=k0;i++)o=o+r[i-1]<<1,n[i]=o;for(a=0;a<=t;a++){let s=e[2*a+1];s!==0&&(e[2*a]=iae(n[s]++,s))}},oae=e=>{let t;for(t=0;t<rae;t++)e.dyn_ltree[2*t]=0;for(t=0;t<O0;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},sae=e=>{e.bi_valid>8?zv(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},LG=(e,t,r,n)=>{let i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]},qA=(e,t,r)=>{let n=e.heap[r],i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&LG(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!LG(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},jG=(e,t,r)=>{let n,i,a,o,s=0;if(e.sym_next!==0)do n=255&e.pending_buf[e.sym_buf+s++],n+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],n===0?Yl(e,i,t):(a=Hv[i],Yl(e,a+GM+1,t),o=ED[a],o!==0&&(i-=WM[a],ao(e,i,o)),n--,a=nae(n),Yl(e,a,r),o=M_[a],o!==0&&(n-=AT[a],ao(e,n,o)));while(s<e.sym_next);Yl(e,256,t)},YA=(e,t)=>{let r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems,o,s,l,c=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<a;o++)r[2*o]!==0?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):r[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,r[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=n[2*l+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)qA(e,r,o);l=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],qA(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,r[2*l]=r[2*o]+r[2*s],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,r[2*o+1]=r[2*s+1]=l,e.heap[1]=l++,qA(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((u,h)=>{let f=h.dyn_tree,p=h.max_code,m=h.stat_desc.static_tree,g=h.stat_desc.has_stree,y=h.stat_desc.extra_bits,v=h.stat_desc.extra_base,b=h.stat_desc.max_length,E,S,I,N,L,j,z=0;for(N=0;N<=k0;N++)u.bl_count[N]=0;for(f[2*u.heap[u.heap_max]+1]=0,E=u.heap_max+1;E<573;E++)S=u.heap[E],N=f[2*f[2*S+1]+1]+1,N>b&&(N=b,z++),f[2*S+1]=N,S>p||(u.bl_count[N]++,L=0,S>=v&&(L=y[S-v]),j=f[2*S],u.opt_len+=j*(N+L),g&&(u.static_len+=j*(m[2*S+1]+L)));if(z!==0){do{for(N=b-1;u.bl_count[N]===0;)N--;u.bl_count[N]--,u.bl_count[N+1]+=2,u.bl_count[b]--,z-=2}while(z>0);for(N=b;N!==0;N--)for(S=u.bl_count[N];S!==0;)I=u.heap[--E],I>p||(f[2*I+1]!==N&&(u.opt_len+=(N-f[2*I+1])*f[2*I],f[2*I+1]=N),S--)}})(e,t),aae(r,c,e.bl_count)},MG=(e,t,r)=>{let n,i,a=-1,o=t[1],s=0,l=7,c=4;for(o===0&&(l=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++s<l&&i===o||(s<c?e.bl_tree[2*i]+=s:i!==0?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,o===0?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))},UG=(e,t,r)=>{let n,i,a=-1,o=t[1],s=0,l=7,c=4;for(o===0&&(l=138,c=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++s<l&&i===o)){if(s<c)do Yl(e,i,e.bl_tree);while(--s!=0);else i!==0?(i!==a&&(Yl(e,i,e.bl_tree),s--),Yl(e,16,e.bl_tree),ao(e,s-3,2)):s<=10?(Yl(e,17,e.bl_tree),ao(e,s-3,3)):(Yl(e,18,e.bl_tree),ao(e,s-11,7));s=0,a=i,o===0?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}},FG=!1,lae=(e,t,r,n)=>{ao(e,0+(n?1:0),3),sae(e),zv(e,r),zv(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},eze=e=>{FG||((()=>{let t,r,n,i,a,o=new Array(16);for(n=0,i=0;i<28;i++)for(WM[i]=n,t=0;t<1<<ED[i];t++)Hv[n++]=i;for(Hv[n-1]=i,a=0,i=0;i<16;i++)for(AT[i]=a,t=0;t<1<<M_[i];t++)$v[a++]=i;for(a>>=7;i<O0;i++)for(AT[i]=a<<7,t=0;t<1<<M_[i]-7;t++)$v[256+a++]=i;for(r=0;r<=k0;r++)o[r]=0;for(t=0;t<=143;)Uc[2*t+1]=8,t++,o[8]++;for(;t<=255;)Uc[2*t+1]=9,t++,o[9]++;for(;t<=279;)Uc[2*t+1]=7,t++,o[7]++;for(;t<=287;)Uc[2*t+1]=8,t++,o[8]++;for(aae(Uc,287,o),t=0;t<O0;t++)P0[2*t+1]=5,P0[2*t]=iae(t,5);kG=new WA(Uc,ED,257,rae,k0),PG=new WA(P0,M_,0,O0,k0),DG=new WA(new Array(0),ZHe,0,19,7)})(),FG=!0),e.l_desc=new KA(e.dyn_ltree,kG),e.d_desc=new KA(e.dyn_dtree,PG),e.bl_desc=new KA(e.bl_tree,DG),e.bi_buf=0,e.bi_valid=0,oae(e)},tze=(e,t,r,n)=>{let i,a,o=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=(s=>{let l,c=4093624447;for(l=0;l<=31;l++,c>>>=1)if(1&c&&s.dyn_ltree[2*l]!==0)return 0;if(s.dyn_ltree[18]!==0||s.dyn_ltree[20]!==0||s.dyn_ltree[26]!==0)return 1;for(l=32;l<GM;l++)if(s.dyn_ltree[2*l]!==0)return 1;return 0})(e)),YA(e,e.l_desc),YA(e,e.d_desc),o=(s=>{let l;for(MG(s,s.dyn_ltree,s.l_desc.max_code),MG(s,s.dyn_dtree,s.d_desc.max_code),YA(s,s.bl_desc),l=18;l>=3&&s.bl_tree[2*OG[l]+1]===0;l--);return s.opt_len+=3*(l+1)+5+5+4,l})(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=r+5,r+4<=i&&t!==-1?lae(e,t,r,n):e.strategy===4||a===i?(ao(e,2+(n?1:0),3),jG(e,Uc,P0)):(ao(e,4+(n?1:0),3),((s,l,c,u)=>{let h;for(ao(s,l-257,5),ao(s,c-1,5),ao(s,u-4,4),h=0;h<u;h++)ao(s,s.bl_tree[2*OG[h]+1],3);UG(s,s.dyn_ltree,l-1),UG(s,s.dyn_dtree,c-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),jG(e,e.dyn_ltree,e.dyn_dtree)),oae(e),n&&sae(e)},rze=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(Hv[r]+GM+1)]++,e.dyn_dtree[2*nae(t)]++),e.sym_next===e.sym_end),nze=e=>{ao(e,2,3),Yl(e,256,Uc),(t=>{t.bi_valid===16?(zv(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(e)},ize={_tr_init:eze,_tr_stored_block:lae,_tr_flush_block:tze,_tr_tally:rze,_tr_align:nze},Gv=(e,t,r,n)=>{let i=65535&e|0,a=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+t[n++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0},aze=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})()),Ki=(e,t,r,n)=>{let i=aze,a=n+r;e^=-1;for(let o=n;o<a;o++)e=e>>>8^i[255&(e^t[o])];return-1^e},df={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},$g={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:oze,_tr_stored_block:_D,_tr_flush_block:sze,_tr_tally:vd,_tr_align:lze}=ize,{Z_NO_FLUSH:bd,Z_PARTIAL_FLUSH:cze,Z_FULL_FLUSH:uze,Z_FINISH:ks,Z_BLOCK:VG,Z_OK:sa,Z_STREAM_END:BG,Z_STREAM_ERROR:ic,Z_DATA_ERROR:dze,Z_BUF_ERROR:XA,Z_DEFAULT_COMPRESSION:hze,Z_FILTERED:fze,Z_HUFFMAN_ONLY:kE,Z_RLE:pze,Z_FIXED:mze,Z_DEFAULT_STRATEGY:gze,Z_UNKNOWN:yze,Z_DEFLATED:Ox}=$g,SD=286,vze=30,bze=19,wze=2*SD+1,Eze=15,Nh=258,ac=262,tg=42,Ah=113,e0=666,Oh=(e,t)=>(e.msg=df[t],t),$G=e=>2*e-(e>4?9:0),Wu=e=>{let t=e.length;for(;--t>=0;)e[t]=0},_ze=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=i?r-i:0;while(--t);t=i,n=t;do r=e.prev[--n],e.prev[n]=r>=i?r-i:0;while(--t)},wd=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,ko=e=>{let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},Lo=(e,t)=>{sze(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ko(e.strm)},kr=(e,t)=>{e.pending_buf[e.pending++]=t},Oy=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},TD=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),e.state.wrap===1?e.adler=Gv(e.adler,t,i,r):e.state.wrap===2&&(e.adler=Ki(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},cae=(e,t)=>{let r,n,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-ac?e.strstart-(e.w_size-ac):0,c=e.window,u=e.w_mask,h=e.prev,f=e.strstart+Nh,p=c[a+o-1],m=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do if(r=t,c[r+o]===m&&c[r+o-1]===p&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do;while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<f);if(n=Nh-(f-a),a=f-Nh,n>o){if(e.match_start=t,o=n,n>=s)break;p=c[a+o-1],m=c[a+o]}}while((t=h[t&u])>l&&--i!=0);return o<=e.lookahead?o:e.lookahead},rg=e=>{let t=e.w_size,r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ac)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),_ze(e),n+=t),e.strm.avail_in===0)break;if(r=TD(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=wd(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=wd(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ac&&e.strm.avail_in!==0)},uae=(e,t)=>{let r,n,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<a&&(r===0&&t!==ks||t===bd||r!==n+e.strm.avail_in)))break;o=t===ks&&r===n+e.strm.avail_in?1:0,_D(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,ko(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(TD(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(o===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==bd&&t!==ks&&e.strm.avail_in===0&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(TD(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,n=e.strstart-e.block_start,(n>=a||(n||t===ks)&&t!==bd&&e.strm.avail_in===0&&n<=i)&&(r=n>i?i:n,o=t===ks&&e.strm.avail_in===0&&r===n?1:0,_D(e,e.block_start,r,o),e.block_start+=r,ko(e.strm)),o?3:1)},JA=(e,t)=>{let r,n;for(;;){if(e.lookahead<ac){if(rg(e),e.lookahead<ac&&t===bd)return 1;if(e.lookahead===0)break}if(r=0,e.lookahead>=3&&(e.ins_h=wd(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-ac&&(e.match_length=cae(e,r)),e.match_length>=3)if(n=vd(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=wd(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=wd(e,e.ins_h,e.window[e.strstart+1]);else n=vd(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Lo(e,!1),e.strm.avail_out===0))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ks?(Lo(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(Lo(e,!1),e.strm.avail_out===0)?1:2},fp=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<ac){if(rg(e),e.lookahead<ac&&t===bd)return 1;if(e.lookahead===0)break}if(r=0,e.lookahead>=3&&(e.ins_h=wd(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ac&&(e.match_length=cae(e,r),e.match_length<=5&&(e.strategy===fze||e.match_length===3&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=vd(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=wd(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(Lo(e,!1),e.strm.avail_out===0))return 1}else if(e.match_available){if(n=vd(e,0,e.window[e.strstart-1]),n&&Lo(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=vd(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ks?(Lo(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(Lo(e,!1),e.strm.avail_out===0)?1:2};function Ml(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var t0=[new Ml(0,0,0,0,uae),new Ml(4,4,8,4,JA),new Ml(4,5,16,8,JA),new Ml(4,6,32,32,JA),new Ml(4,4,16,16,fp),new Ml(8,16,32,32,fp),new Ml(8,16,128,128,fp),new Ml(8,32,128,256,fp),new Ml(32,128,258,1024,fp),new Ml(32,258,258,4096,fp)];function Sze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ox,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*wze),this.dyn_dtree=new Uint16Array(2*(2*vze+1)),this.bl_tree=new Uint16Array(2*(2*bze+1)),Wu(this.dyn_ltree),Wu(this.dyn_dtree),Wu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Eze+1),this.heap=new Uint16Array(2*SD+1),Wu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*SD+1),Wu(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Wv=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.status!==tg&&t.status!==57&&t.status!==69&&t.status!==73&&t.status!==91&&t.status!==103&&t.status!==Ah&&t.status!==e0?1:0},dae=e=>{if(Wv(e))return Oh(e,ic);e.total_in=e.total_out=0,e.data_type=yze;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?57:t.wrap?tg:Ah,e.adler=t.wrap===2?0:1,t.last_flush=-2,oze(t),sa},hae=e=>{let t=dae(e);return t===sa&&(r=>{r.window_size=2*r.w_size,Wu(r.head),r.max_lazy_match=t0[r.level].max_lazy,r.good_match=t0[r.level].good_length,r.nice_match=t0[r.level].nice_length,r.max_chain_length=t0[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0})(e.state),t},HG=(e,t,r,n,i,a)=>{if(!e)return ic;let o=1;if(t===hze&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>9||r!==Ox||n<8||n>15||t<0||t>9||a<0||a>mze||n===8&&o!==1)return Oh(e,ic);n===8&&(n=9);let s=new Sze;return e.state=s,s.strm=e,s.status=tg,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=r,hae(e)},Tze=(e,t)=>{if(Wv(e)||t>VG||t<0)return e?Oh(e,ic):ic;let r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===e0&&t!==ks)return Oh(e,e.avail_out===0?XA:ic);let n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(ko(e),e.avail_out===0)return r.last_flush=-1,sa}else if(e.avail_in===0&&$G(t)<=$G(n)&&t!==ks)return Oh(e,XA);if(r.status===e0&&e.avail_in!==0)return Oh(e,XA);if(r.status===tg&&r.wrap===0&&(r.status=Ah),r.status===tg){let i=Ox+(r.w_bits-8<<4)<<8,a=-1;if(a=r.strategy>=kE||r.level<2?0:r.level<6?1:r.level===6?2:3,i|=a<<6,r.strstart!==0&&(i|=32),i+=31-i%31,Oy(r,i),r.strstart!==0&&(Oy(r,e.adler>>>16),Oy(r,65535&e.adler)),e.adler=1,r.status=Ah,ko(e),r.pending!==0)return r.last_flush=-1,sa}if(r.status===57){if(e.adler=0,kr(r,31),kr(r,139),kr(r,8),r.gzhead)kr(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),kr(r,255&r.gzhead.time),kr(r,r.gzhead.time>>8&255),kr(r,r.gzhead.time>>16&255),kr(r,r.gzhead.time>>24&255),kr(r,r.level===9?2:r.strategy>=kE||r.level<2?4:0),kr(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(kr(r,255&r.gzhead.extra.length),kr(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Ki(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(kr(r,0),kr(r,0),kr(r,0),kr(r,0),kr(r,0),kr(r,r.level===9?2:r.strategy>=kE||r.level<2?4:0),kr(r,3),r.status=Ah,ko(e),r.pending!==0)return r.last_flush=-1,sa}if(r.status===69){if(r.gzhead.extra){let i=r.pending,a=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+a>r.pending_buf_size;){let s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(e.adler=Ki(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=s,ko(e),r.pending!==0)return r.last_flush=-1,sa;i=0,a-=s}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending+=a,r.gzhead.hcrc&&r.pending>i&&(e.adler=Ki(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=73}if(r.status===73){if(r.gzhead.name){let i,a=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=Ki(e.adler,r.pending_buf,r.pending-a,a)),ko(e),r.pending!==0)return r.last_flush=-1,sa;a=0}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,kr(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=Ki(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=91}if(r.status===91){if(r.gzhead.comment){let i,a=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=Ki(e.adler,r.pending_buf,r.pending-a,a)),ko(e),r.pending!==0)return r.last_flush=-1,sa;a=0}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,kr(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=Ki(e.adler,r.pending_buf,r.pending-a,a))}r.status=103}if(r.status===103){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(ko(e),r.pending!==0))return r.last_flush=-1,sa;kr(r,255&e.adler),kr(r,e.adler>>8&255),e.adler=0}if(r.status=Ah,ko(e),r.pending!==0)return r.last_flush=-1,sa}if(e.avail_in!==0||r.lookahead!==0||t!==bd&&r.status!==e0){let i=r.level===0?uae(r,t):r.strategy===kE?((a,o)=>{let s;for(;;){if(a.lookahead===0&&(rg(a),a.lookahead===0)){if(o===bd)return 1;break}if(a.match_length=0,s=vd(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,s&&(Lo(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,o===ks?(Lo(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(Lo(a,!1),a.strm.avail_out===0)?1:2})(r,t):r.strategy===pze?((a,o)=>{let s,l,c,u,h=a.window;for(;;){if(a.lookahead<=Nh){if(rg(a),a.lookahead<=Nh&&o===bd)return 1;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=3&&a.strstart>0&&(c=a.strstart-1,l=h[c],l===h[++c]&&l===h[++c]&&l===h[++c])){u=a.strstart+Nh;do;while(l===h[++c]&&l===h[++c]&&l===h[++c]&&l===h[++c]&&l===h[++c]&&l===h[++c]&&l===h[++c]&&l===h[++c]&&c<u);a.match_length=Nh-(u-c),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=3?(s=vd(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(s=vd(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),s&&(Lo(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,o===ks?(Lo(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(Lo(a,!1),a.strm.avail_out===0)?1:2})(r,t):t0[r.level].func(r,t);if(i!==3&&i!==4||(r.status=e0),i===1||i===3)return e.avail_out===0&&(r.last_flush=-1),sa;if(i===2&&(t===cze?lze(r):t!==VG&&(_D(r,0,0,!1),t===uze&&(Wu(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),ko(e),e.avail_out===0))return r.last_flush=-1,sa}return t!==ks?sa:r.wrap<=0?BG:(r.wrap===2?(kr(r,255&e.adler),kr(r,e.adler>>8&255),kr(r,e.adler>>16&255),kr(r,e.adler>>24&255),kr(r,255&e.total_in),kr(r,e.total_in>>8&255),kr(r,e.total_in>>16&255),kr(r,e.total_in>>24&255)):(Oy(r,e.adler>>>16),Oy(r,65535&e.adler)),ko(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?sa:BG)},Cze=(e,t)=>{let r=t.length;if(Wv(e))return ic;let n=e.state,i=n.wrap;if(i===2||i===1&&n.status!==tg||n.lookahead)return ic;if(i===1&&(e.adler=Gv(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){i===0&&(Wu(n.head),n.strstart=0,n.block_start=0,n.insert=0);let l=new Uint8Array(n.w_size);l.set(t.subarray(r-n.w_size,r),0),t=l,r=n.w_size}let a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,rg(n);n.lookahead>=3;){let l=n.strstart,c=n.lookahead-2;do n.ins_h=wd(n,n.ins_h,n.window[l+3-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--c);n.strstart=l,n.lookahead=2,rg(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,n.wrap=i,sa},D0={deflateInit:(e,t)=>HG(e,t,Ox,15,8,gze),deflateInit2:HG,deflateReset:hae,deflateResetKeep:dae,deflateSetHeader:(e,t)=>Wv(e)||e.state.wrap!==2?ic:(e.state.gzhead=t,sa),deflate:Tze,deflateEnd:e=>{if(Wv(e))return ic;let t=e.state.status;return e.state=null,t===Ah?Oh(e,dze):sa},deflateSetDictionary:Cze,deflateInfo:"pako deflate (from Nodeca project)"},xze=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),kx={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(let n in r)xze(r,n)&&(e[n]=r[n])}}return e},flattenChunks:e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;let r=new Uint8Array(t);for(let n=0,i=0,a=e.length;n<a;n++){let o=e[n];r.set(o,i),i+=o.length}return r}},fae=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{fae=!1}var Kv=new Uint8Array(256);for(let e=0;e<256;e++)Kv[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Kv[254]=Kv[254]=1;var qv={string2buf:e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,a,o=e.length,s=0;for(i=0;i<o;i++)r=e.charCodeAt(i),(64512&r)==55296&&i+1<o&&(n=e.charCodeAt(i+1),(64512&n)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)r=e.charCodeAt(i),(64512&r)==55296&&i+1<o&&(n=e.charCodeAt(i+1),(64512&n)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},buf2string:(e,t)=>{let r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i,a=new Array(2*r);for(i=0,n=0;n<r;){let o=e[n++];if(o<128){a[i++]=o;continue}let s=Kv[o];if(s>4)a[i++]=65533,n+=s-1;else{for(o&=s===2?31:s===3?15:7;s>1&&n<r;)o=o<<6|63&e[n++],s--;s>1?a[i++]=65533:o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|1023&o)}}return((o,s)=>{if(s<65534&&o.subarray&&fae)return String.fromCharCode.apply(null,o.length===s?o:o.subarray(0,s));let l="";for(let c=0;c<s;c++)l+=String.fromCharCode(o[c]);return l})(a,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(192&e[r])==128;)r--;return r<0||r===0?t:r+Kv[e[r]]>t?r:t}},pae=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},mae=Object.prototype.toString,{Z_NO_FLUSH:Rze,Z_SYNC_FLUSH:Ize,Z_FULL_FLUSH:Nze,Z_FINISH:Aze,Z_OK:OT,Z_STREAM_END:Oze,Z_DEFAULT_COMPRESSION:kze,Z_DEFAULT_STRATEGY:Pze,Z_DEFLATED:Dze}=$g;function L0(e){this.options=kx.assign({level:kze,method:Dze,chunkSize:16384,windowBits:15,memLevel:8,strategy:Pze},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new pae,this.strm.avail_out=0;let r=D0.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==OT)throw new Error(df[r]);if(t.header&&D0.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(n=typeof t.dictionary=="string"?qv.string2buf(t.dictionary):mae.call(t.dictionary)==="[object ArrayBuffer]"?new Uint8Array(t.dictionary):t.dictionary,r=D0.deflateSetDictionary(this.strm,n),r!==OT)throw new Error(df[r]);this._dict_set=!0}}function QA(e,t){let r=new L0(t);if(r.push(e,!0),r.err)throw r.msg||df[r.err];return r.result}L0.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,i,a;if(this.ended)return!1;for(a=t===~~t?t:t===!0?Aze:Rze,typeof e=="string"?r.input=qv.string2buf(e):mae.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(a===Ize||a===Nze)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=D0.deflate(r,a),i===Oze)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=D0.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===OT;if(r.avail_out!==0){if(a>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(r.avail_in===0)break}else this.onData(r.output)}return!0},L0.prototype.onData=function(e){this.chunks.push(e)},L0.prototype.onEnd=function(e){e===OT&&(this.result=kx.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Lze={Deflate:L0,deflate:QA,deflateRaw:function(e,t){return(t=t||{}).raw=!0,QA(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,QA(e,t)},constants:$g},PE=16209,jze=function(e,t){let r,n,i,a,o,s,l,c,u,h,f,p,m,g,y,v,b,E,S,I,N,L,j,z,A=e.state;r=e.next_in,j=e.input,n=r+(e.avail_in-5),i=e.next_out,z=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=A.dmax,l=A.wsize,c=A.whave,u=A.wnext,h=A.window,f=A.hold,p=A.bits,m=A.lencode,g=A.distcode,y=(1<<A.lenbits)-1,v=(1<<A.distbits)-1;e:do{p<15&&(f+=j[r++]<<p,p+=8,f+=j[r++]<<p,p+=8),b=m[f&y];t:for(;;){if(E=b>>>24,f>>>=E,p-=E,E=b>>>16&255,E===0)z[i++]=65535&b;else{if(!(16&E)){if(!(64&E)){b=m[(65535&b)+(f&(1<<E)-1)];continue t}if(32&E){A.mode=16191;break e}e.msg="invalid literal/length code",A.mode=PE;break e}S=65535&b,E&=15,E&&(p<E&&(f+=j[r++]<<p,p+=8),S+=f&(1<<E)-1,f>>>=E,p-=E),p<15&&(f+=j[r++]<<p,p+=8,f+=j[r++]<<p,p+=8),b=g[f&v];r:for(;;){if(E=b>>>24,f>>>=E,p-=E,E=b>>>16&255,!(16&E)){if(!(64&E)){b=g[(65535&b)+(f&(1<<E)-1)];continue r}e.msg="invalid distance code",A.mode=PE;break e}if(I=65535&b,E&=15,p<E&&(f+=j[r++]<<p,p+=8,p<E&&(f+=j[r++]<<p,p+=8)),I+=f&(1<<E)-1,I>s){e.msg="invalid distance too far back",A.mode=PE;break e}if(f>>>=E,p-=E,E=i-a,I>E){if(E=I-E,E>c&&A.sane){e.msg="invalid distance too far back",A.mode=PE;break e}if(N=0,L=h,u===0){if(N+=l-E,E<S){S-=E;do z[i++]=h[N++];while(--E);N=i-I,L=z}}else if(u<E){if(N+=l+u-E,E-=u,E<S){S-=E;do z[i++]=h[N++];while(--E);if(N=0,u<S){E=u,S-=E;do z[i++]=h[N++];while(--E);N=i-I,L=z}}}else if(N+=u-E,E<S){S-=E;do z[i++]=h[N++];while(--E);N=i-I,L=z}for(;S>2;)z[i++]=L[N++],z[i++]=L[N++],z[i++]=L[N++],S-=3;S&&(z[i++]=L[N++],S>1&&(z[i++]=L[N++]))}else{N=i-I;do z[i++]=z[N++],z[i++]=z[N++],z[i++]=z[N++],S-=3;while(S>2);S&&(z[i++]=z[N++],S>1&&(z[i++]=z[N++]))}break}}break}}while(r<n&&i<o);S=p>>3,r-=S,p-=S<<3,f&=(1<<p)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<o?o-i+257:257-(i-o),A.hold=f,A.bits=p},DE=15,Mze=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Uze=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Fze=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Vze=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),j0=(e,t,r,n,i,a,o,s)=>{let l=s.bits,c,u,h,f,p,m,g=0,y=0,v=0,b=0,E=0,S=0,I=0,N=0,L=0,j=0,z=null,A=new Uint16Array(16),V=new Uint16Array(16),G,X,$,B=null;for(g=0;g<=DE;g++)A[g]=0;for(y=0;y<n;y++)A[t[r+y]]++;for(E=l,b=DE;b>=1&&A[b]===0;b--);if(E>b&&(E=b),b===0)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(v=1;v<b&&A[v]===0;v++);for(E<v&&(E=v),N=1,g=1;g<=DE;g++)if(N<<=1,N-=A[g],N<0)return-1;if(N>0&&(e===0||b!==1))return-1;for(V[1]=0,g=1;g<DE;g++)V[g+1]=V[g]+A[g];for(y=0;y<n;y++)t[r+y]!==0&&(o[V[t[r+y]]++]=y);if(e===0?(z=B=o,m=20):e===1?(z=Mze,B=Uze,m=257):(z=Fze,B=Vze,m=0),j=0,y=0,g=v,p=a,S=E,I=0,h=-1,L=1<<E,f=L-1,e===1&&L>852||e===2&&L>592)return 1;for(;;){G=g-I,o[y]+1<m?(X=0,$=o[y]):o[y]>=m?(X=B[o[y]-m],$=z[o[y]-m]):(X=96,$=0),c=1<<g-I,u=1<<S,v=u;do u-=c,i[p+(j>>I)+u]=G<<24|X<<16|$|0;while(u!==0);for(c=1<<g-1;j&c;)c>>=1;if(c!==0?(j&=c-1,j+=c):j=0,y++,--A[g]==0){if(g===b)break;g=t[r+o[y]]}if(g>E&&(j&f)!==h){for(I===0&&(I=E),p+=v,S=g-I,N=1<<S;S+I<b&&(N-=A[S+I],!(N<=0));)S++,N<<=1;if(L+=1<<S,e===1&&L>852||e===2&&L>592)return 1;h=j&f,i[h]=E<<24|S<<16|p-a|0}}return j!==0&&(i[p+j]=g-I<<24|64<<16|0),s.bits=E,0},{Z_FINISH:zG,Z_BLOCK:Bze,Z_TREES:LE,Z_OK:zh,Z_STREAM_END:$ze,Z_NEED_DICT:Hze,Z_STREAM_ERROR:Ps,Z_DATA_ERROR:gae,Z_MEM_ERROR:yae,Z_BUF_ERROR:zze,Z_DEFLATED:GG}=$g,Px=16180,kT=16190,Ic=16191,ZA=16192,eO=16194,jE=16199,ME=16200,tO=16206,Rn=16209,WG=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Gze(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Gh=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<Px||t.mode>16211?1:0},vae=e=>{if(Gh(e))return Ps;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Px,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,zh},bae=e=>{if(Gh(e))return Ps;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,vae(e)},wae=(e,t)=>{let r;if(Gh(e))return Ps;let n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Ps:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,bae(e))},KG=(e,t)=>{if(!e)return Ps;let r=new Gze;e.state=r,r.strm=e,r.window=null,r.mode=Px;let n=wae(e,t);return n!==zh&&(e.state=null),n},rO,nO,qG=!0,Wze=e=>{if(qG){rO=new Int32Array(512),nO=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(j0(1,e.lens,0,288,rO,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;j0(2,e.lens,0,32,nO,0,e.work,{bits:5}),qG=!1}e.lencode=rO,e.lenbits=9,e.distcode=nO,e.distbits=5},Eae=(e,t,r,n)=>{let i,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),(n-=i)?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},Kze=(e,t)=>{let r,n,i,a,o,s,l,c,u,h,f,p,m,g,y,v,b,E,S,I,N,L,j=0,z=new Uint8Array(4),A,V,G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Gh(e)||!e.output||!e.input&&e.avail_in!==0)return Ps;r=e.state,r.mode===Ic&&(r.mode=ZA),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,c=r.hold,u=r.bits,h=s,f=l,L=zh;e:for(;;)switch(r.mode){case Px:if(r.wrap===0){r.mode=ZA;break}for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(2&r.wrap&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,z[0]=255&c,z[1]=c>>>8&255,r.check=Ki(r.check,z,2,0),c=0,u=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=Rn;break}if((15&c)!==GG){e.msg="unknown compression method",r.mode=Rn;break}if(c>>>=4,u-=4,N=8+(15&c),r.wbits===0&&(r.wbits=N),N>15||N>r.wbits){e.msg="invalid window size",r.mode=Rn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&c?16189:Ic,c=0,u=0;break;case 16181:for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(r.flags=c,(255&Di(r))!==GG){e.msg="unknown compression method",r.mode=Rn;break}if(57344&Di(r)){e.msg="unknown header flags set",r.mode=Rn;break}r.head&&(r.head.text=c>>8&1),512&Di(r)&&4&r.wrap&&(z[0]=255&c,z[1]=c>>>8&255,r.check=Ki(r.check,z,2,0)),c=0,u=0,r.mode=16182;case 16182:for(;u<32;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}r.head&&(r.head.time=c),512&Di(r)&&4&r.wrap&&(z[0]=255&c,z[1]=c>>>8&255,z[2]=c>>>16&255,z[3]=c>>>24&255,r.check=Ki(r.check,z,4,0)),c=0,u=0,r.mode=16183;case 16183:for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&Di(r)&&4&r.wrap&&(z[0]=255&c,z[1]=c>>>8&255,r.check=Ki(r.check,z,2,0)),c=0,u=0,r.mode=16184;case 16184:if(1024&Di(r)){for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),512&Di(r)&&4&r.wrap&&(z[0]=255&c,z[1]=c>>>8&255,r.check=Ki(r.check,z,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&Di(r)&&(p=r.length,p>s&&(p=s),p&&(r.head&&(N=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+p),N)),512&Di(r)&&4&r.wrap&&(r.check=Ki(r.check,n,p,a)),s-=p,a+=p,r.length-=p),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&Di(r)){if(s===0)break e;p=0;do N=n[a+p++],r.head&&N&&r.length<65536&&(r.head.name+=String.fromCharCode(N));while(N&&p<s);if(512&Di(r)&&4&r.wrap&&(r.check=Ki(r.check,n,p,a)),s-=p,a+=p,N)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&Di(r)){if(s===0)break e;p=0;do N=n[a+p++],r.head&&N&&r.length<65536&&(r.head.comment+=String.fromCharCode(N));while(N&&p<s);if(512&Di(r)&&4&r.wrap&&(r.check=Ki(r.check,n,p,a)),s-=p,a+=p,N)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&Di(r)){for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(4&r.wrap&&c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Rn;break}c=0,u=0}r.head&&(r.head.hcrc=Di(r)>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Ic;break;case 16189:for(;u<32;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.adler=r.check=WG(c),c=0,u=0,r.mode=kT;case kT:if(r.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=u,Hze;e.adler=r.check=1,r.mode=Ic;case Ic:if(t===Bze||t===LE)break e;case ZA:if(r.last){c>>>=7&u,u-=7&u,r.mode=tO;break}for(;u<3;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}switch(r.last=1&c,c>>>=1,u-=1,3&c){case 0:r.mode=16193;break;case 1:if(Wze(r),r.mode=jE,t===LE){c>>>=2,u-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=Rn}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Rn;break}if(r.length=65535&c,c=0,u=0,r.mode=eO,t===LE)break e;case eO:r.mode=16195;case 16195:if(p=r.length,p){if(p>s&&(p=s),p>l&&(p=l),p===0)break e;i.set(n.subarray(a,a+p),o),s-=p,a+=p,l-=p,o+=p,r.length-=p;break}r.mode=Ic;break;case 16196:for(;u<14;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(r.nlen=257+(31&c),c>>>=5,u-=5,r.ndist=1+(31&c),c>>>=5,u-=5,r.ncode=4+(15&c),c>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Rn;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;u<3;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}r.lens[G[r.have++]]=7&c,c>>>=3,u-=3}for(;r.have<19;)r.lens[G[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,A={bits:r.lenbits},L=j0(0,r.lens,0,19,r.lencode,0,r.work,A),r.lenbits=A.bits,L){e.msg="invalid code lengths set",r.mode=Rn;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;j=r.lencode[c&(1<<r.lenbits)-1],y=j>>>24,v=j>>>16&255,b=65535&j,!(y<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(b<16)c>>>=y,u-=y,r.lens[r.have++]=b;else{if(b===16){for(V=y+2;u<V;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(c>>>=y,u-=y,r.have===0){e.msg="invalid bit length repeat",r.mode=Rn;break}N=r.lens[r.have-1],p=3+(3&c),c>>>=2,u-=2}else if(b===17){for(V=y+3;u<V;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}c>>>=y,u-=y,N=0,p=3+(7&c),c>>>=3,u-=3}else{for(V=y+7;u<V;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}c>>>=y,u-=y,N=0,p=11+(127&c),c>>>=7,u-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Rn;break}for(;p--;)r.lens[r.have++]=N}}if(r.mode===Rn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Rn;break}if(r.lenbits=9,A={bits:r.lenbits},L=j0(1,r.lens,0,r.nlen,r.lencode,0,r.work,A),r.lenbits=A.bits,L){e.msg="invalid literal/lengths set",r.mode=Rn;break}if(r.distbits=6,r.distcode=r.distdyn,A={bits:r.distbits},L=j0(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,A),r.distbits=A.bits,L){e.msg="invalid distances set",r.mode=Rn;break}if(r.mode=jE,t===LE)break e;case jE:r.mode=ME;case ME:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=u,jze(e,f),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,c=r.hold,u=r.bits,r.mode===Ic&&(r.back=-1);break}for(r.back=0;j=r.lencode[c&(1<<r.lenbits)-1],y=j>>>24,v=j>>>16&255,b=65535&j,!(y<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(v&&!(240&v)){for(E=y,S=v,I=b;j=r.lencode[I+((c&(1<<E+S)-1)>>E)],y=j>>>24,v=j>>>16&255,b=65535&j,!(E+y<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}c>>>=E,u-=E,r.back+=E}if(c>>>=y,u-=y,r.back+=y,r.length=b,v===0){r.mode=16205;break}if(32&v){r.back=-1,r.mode=Ic;break}if(64&v){e.msg="invalid literal/length code",r.mode=Rn;break}r.extra=15&v,r.mode=16201;case 16201:if(r.extra){for(V=r.extra;u<V;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;j=r.distcode[c&(1<<r.distbits)-1],y=j>>>24,v=j>>>16&255,b=65535&j,!(y<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(!(240&v)){for(E=y,S=v,I=b;j=r.distcode[I+((c&(1<<E+S)-1)>>E)],y=j>>>24,v=j>>>16&255,b=65535&j,!(E+y<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}c>>>=E,u-=E,r.back+=E}if(c>>>=y,u-=y,r.back+=y,64&v){e.msg="invalid distance code",r.mode=Rn;break}r.offset=b,r.extra=15&v,r.mode=16203;case 16203:if(r.extra){for(V=r.extra;u<V;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Rn;break}r.mode=16204;case 16204:if(l===0)break e;if(p=f-l,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Rn;break}p>r.wnext?(p-=r.wnext,m=r.wsize-p):m=r.wnext-p,p>r.length&&(p=r.length),g=r.window}else g=i,m=o-r.offset,p=r.length;p>l&&(p=l),l-=p,r.length-=p;do i[o++]=g[m++];while(--p);r.length===0&&(r.mode=ME);break;case 16205:if(l===0)break e;i[o++]=r.length,l--,r.mode=ME;break;case tO:if(r.wrap){for(;u<32;){if(s===0)break e;s--,c|=n[a++]<<u,u+=8}if(f-=l,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=Di(r)?Ki(r.check,i,f,o-f):Gv(r.check,i,f,o-f)),f=l,4&r.wrap&&(Di(r)?c:WG(c))!==r.check){e.msg="incorrect data check",r.mode=Rn;break}c=0,u=0}r.mode=16207;case 16207:if(r.wrap&&Di(r)){for(;u<32;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(4&r.wrap&&c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Rn;break}c=0,u=0}r.mode=16208;case 16208:L=$ze;break e;case Rn:L=gae;break e;case 16210:return yae;default:return Ps}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=u,(r.wsize||f!==e.avail_out&&r.mode<Rn&&(r.mode<tO||t!==zG))&&Eae(e,e.output,e.next_out,f-e.avail_out),h-=e.avail_in,f-=e.avail_out,e.total_in+=h,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=Di(r)?Ki(r.check,i,f,e.next_out-f):Gv(r.check,i,f,e.next_out-f)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Ic?128:0)+(r.mode===jE||r.mode===eO?256:0),(h===0&&f===0||t===zG)&&L===zh&&(L=zze),L},Fc={inflateReset:bae,inflateReset2:wae,inflateResetKeep:vae,inflateInit:e=>KG(e,15),inflateInit2:KG,inflate:Kze,inflateEnd:e=>{if(Gh(e))return Ps;let t=e.state;return t.window&&(t.window=null),e.state=null,zh},inflateGetHeader:(e,t)=>{if(Gh(e))return Ps;let r=e.state;return 2&r.wrap?(r.head=t,t.done=!1,zh):Ps},inflateSetDictionary:(e,t)=>{let r=t.length,n,i,a;return Gh(e)?Ps:(n=e.state,n.wrap!==0&&n.mode!==kT?Ps:n.mode===kT&&(i=1,i=Gv(i,t,r,0),i!==n.check)?gae:(a=Eae(e,t,r,r),a?(n.mode=16210,yae):(n.havedict=1,zh)))},inflateInfo:"pako inflate (from Nodeca project)"},qze=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},_ae=Object.prototype.toString,{Z_NO_FLUSH:Yze,Z_FINISH:Xze,Z_OK:M0,Z_STREAM_END:iO,Z_NEED_DICT:aO,Z_STREAM_ERROR:Jze,Z_DATA_ERROR:YG,Z_MEM_ERROR:Qze}=$g;function U0(e){this.options=kx.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new pae,this.strm.avail_out=0;let r=Fc.inflateInit2(this.strm,t.windowBits);if(r!==M0)throw new Error(df[r]);if(this.header=new qze,Fc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=qv.string2buf(t.dictionary):_ae.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Fc.inflateSetDictionary(this.strm,t.dictionary),r!==M0)))throw new Error(df[r])}function oO(e,t){let r=new U0(t);if(r.push(e),r.err)throw r.msg||df[r.err];return r.result}U0.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,a,o,s;if(this.ended)return!1;for(o=t===~~t?t:t===!0?Xze:Yze,_ae.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=Fc.inflate(r,o),a===aO&&i&&(a=Fc.inflateSetDictionary(r,i),a===M0?a=Fc.inflate(r,o):a===YG&&(a=aO));r.avail_in>0&&a===iO&&r.state.wrap>0&&e[r.next_in]!==0;)Fc.inflateReset(r),a=Fc.inflate(r,o);switch(a){case Jze:case YG:case aO:case Qze:return this.onEnd(a),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(r.avail_out===0||a===iO))if(this.options.to==="string"){let l=qv.utf8border(r.output,r.next_out),c=r.next_out-l,u=qv.buf2string(r.output,l);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(l,l+c),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(a!==M0||s!==0){if(a===iO)return a=Fc.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0},U0.prototype.onData=function(e){this.chunks.push(e)},U0.prototype.onEnd=function(e){e===M0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=kx.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Zze={Inflate:U0,inflate:oO,inflateRaw:function(e,t){return(t=t||{}).raw=!0,oO(e,t)},ungzip:oO,constants:$g},{Deflate:iXe,deflate:eGe,deflateRaw:aXe,gzip:oXe}=Lze,{Inflate:sXe,inflate:tGe,inflateRaw:lXe,ungzip:cXe}=Zze,rGe=eGe,nGe=tGe,Sae=function(e){return e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE",e}(Sae||{}),iGe=class{constructor(){R(this,"_sequence",0),R(this,"_startTime",Date.now()),R(this,"isUseOneByte",!0)}get startTime(){let e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){let t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){let o=new Uint8Array(4);o.set([1,0,0,0]);let s={id:0,length:4,data:o.buffer},l={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[s]};t.commonPacketHeader.extension=1,t.extension=l,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;M("SHOW_DATASTREAM2_LOG")&&_.debug("send data header: ".concat(JSON.stringify(t.commonPacketHeader)));let r=new ArrayBuffer(t.commonPacketHeader.length),n=new Uint8Array(r),i=new DataView(r),a=0;if(i.setUint16(a,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),a+=2,i.setUint32(a,t.commonPacketHeader.sequence,!0),a+=4,i.setUint16(a,t.commonStreamHeader,!0),a+=2,t.extension){let o=this.serializeExtension(t.extension);n.set(new Uint8Array(o),a),a+=o.byteLength}if(n.set(new Uint8Array(t.payload),a),a+=t.payload.byteLength,a!==t.commonPacketHeader.length)throw Error("serialize error!");return r}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);let t=new DataView(e),r=0,n=t.getUint16(r,!0);r+=2;let i={length:16383&n,reserved:(16384&n)>>14,extension:(32768&n)>>15,sequence:t.getUint16(r+2,!0)<<16|t.getUint16(r,!0)},a,o;if(r+=4,M("SHOW_DATASTREAM2_LOG")&&_.debug("receive data header: ".concat(JSON.stringify(i))),t.getUint16(r,!0),r+=2,i.extension){o=this.deserializeExtension(e.slice(r)),r+=2+o.length,a=e.slice(r);let s=!1;if(o.datas.length>0){let l=o.datas.find(c=>c.id===0);l&&(s=(1&new DataView(l.data).getUint32(0,!0))==1)}a=s?this.decompress(a):a}else a=e.slice(8);return a}serializeExtension(e){let{profile:t,length:r,datas:n}=e,i=new ArrayBuffer(r+2),a=new Uint8Array(i),o=new DataView(i),s=0;if(o.setUint8(s++,t),o.setUint8(s++,r),n.forEach(l=>{t?(o.setUint8(s++,l.id),o.setUint8(s++,l.length),a.set(new Uint8Array(l.data),s),s+=l.data.byteLength):(o.setUint8(s++,l.id|l.length<<4),a.set(new Uint8Array(l.data),s),s+=l.data.byteLength)}),s!==r+2)throw Error("serialize extension error, is ".concat(s,"!==").concat(r+2));return i}deserializeExtension(e){let t=new DataView(e),r=0,n=t.getUint8(r);r++;let i=t.getUint8(r);r++;let a=n===Sae.TWO_BYTE,o=[],s=new DataView(e,2),l=0;for(;l<i;){let c=0,u=0,h=new ArrayBuffer(0);a?(c=s.getUint8(l),l++,u=s.getUint8(l),l++):(c=15&s.getUint8(l),u=s.getUint8(l)>>4,l++),u>0&&(h=s.buffer.slice(l+2,l+2+u),l+=h.byteLength),o.push({id:c,length:u,data:h})}if(l!==i)throw Error("parse error");return{profile:n,length:i,datas:o}}decompress(e){return nGe(new Uint8Array(e))}compress(e){return rGe(new Uint8Array(e))}},aGe={name:"DataStream",create:(e,t)=>{let r=t?new z7e(e):new G7e(e);return r.useDataStream(new iGe),r}},oGe=class extends Tr{constructor(e,t,r){super(),R(this,"ws",void 0),R(this,"requestId",1),R(this,"heartBeatTimer",void 0),R(this,"joinInfo",void 0),R(this,"clientId",void 0),R(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),R(this,"onClose",n=>{this.emit("close"),this.dispose()}),R(this,"onMessage",n=>{let i=JSON.parse(n.data);if(!i||i.command!=="serverResponse"||!i.requestId)return i&&i.command==="serverStatus"&&i.serverStatus&&i.serverStatus.command?(this.emit("status",i.serverStatus),void this.emit(i.serverStatus.command,i.serverStatus)):void 0;this.emit("req_".concat(i.requestId),i)}),this.joinInfo=e,this.clientId=t,this.ws=new Lv("cross-channel-".concat(this.clientId),r),this.ws.on(Xe.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Xe.CONNECTED,this.onOpen),this.ws.on(Xe.ON_MESSAGE,this.onMessage),this.ws.on(Xe.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(e){let t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new ye((t,r)=>{let n=window.setTimeout(()=>{r(new Y(k.TIMEOUT,"wait status timeout, status: ".concat(e)))},5e3);this.once(e,i=>{window.clearTimeout(n),i.state&&i.state!==0?r(new Y(k.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)}),this.once("dispose",()=>{window.clearTimeout(n),r(new Y(k.WS_ABORT))})})}async request(e){if(this.ws.state==="closed")throw new Y(k.WS_DISCONNECT);let t=()=>new ye((a,o)=>{this.ws.once(Xe.CLOSED,()=>o(new Y(k.WS_ABORT))),this.ws.once(Xe.CONNECTED,a)});this.ws.state!=="connected"&&await t();let r=this.sendMessage(e),n=new ye((a,o)=>{let s=()=>{o(new Y(k.WS_ABORT))};this.ws.once(Xe.RECONNECTING,s),this.ws.once(Xe.CLOSED,s),this.once("req_".concat(r),a),zn(3e3).then(()=>{this.removeAllListeners("req_".concat(r)),this.ws.off(Xe.RECONNECTING,s),this.ws.off(Xe.CLOSED,s),o(new Y(k.TIMEOUT,"cross channel ws request timeout"))})}),i=await n;if(!i||i.code!==200)throw new Y(k.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(i)));return i}async connect(e){this.ws.removeAllListeners(Xe.REQUEST_NEW_URLS),this.ws.on(Xe.REQUEST_NEW_URLS,t=>{t(e)}),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){let t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}},sGe=class extends Tr{set state(e){e!==this._state&&(e!==Ea.RELAY_STATE_FAILURE&&(this.errorCode=_p.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,r,n,i){super(),R(this,"joinInfo",void 0),R(this,"sid",void 0),R(this,"clientId",void 0),R(this,"cancelToken",pa.CancelToken.source()),R(this,"workerToken",void 0),R(this,"requestId",0),R(this,"signal",void 0),R(this,"prevChannelMediaConfig",void 0),R(this,"httpRetryConfig",void 0),R(this,"_resolution",void 0),R(this,"_state",Ea.RELAY_STATE_IDLE),R(this,"errorCode",_p.RELAY_OK),R(this,"onStatus",a=>{_.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(a))),a&&a.command&&(a.command==="onAudioPacketReceived"&&this.emit("event",Ac.PACKET_RECEIVED_AUDIO_FROM_SRC),a.command==="onVideoPacketReceived"&&this.emit("event",Ac.PACKET_RECEIVED_VIDEO_FROM_SRC),a.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=_p.SRC_TOKEN_EXPIRED,this.state=Ea.RELAY_STATE_FAILURE),a.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=_p.DEST_TOKEN_EXPIRED,this.state=Ea.RELAY_STATE_FAILURE))}),R(this,"onReconnect",async()=>{_.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",Ac.NETWORK_DISCONNECTED),this.state=Ea.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(a=>{this.state!==Ea.RELAY_STATE_IDLE&&(_.error("auto restart channel media relay failed",a.toString()),this.errorCode=_p.SERVER_CONNECTION_LOST,this.state=Ea.RELAY_STATE_FAILURE)})}),this.joinInfo=e,this.clientId=t,this.sid=Xp(),this.signal=new oGe(this.joinInfo,this.clientId,r),this.httpRetryConfig=n,this._resolution=i}async startChannelMediaRelay(e){if(this.state!==Ea.RELAY_STATE_IDLE)throw new Y(k.INVALID_OPERATION);this.state=Ea.RELAY_STATE_CONNECTING,await this.connect(),_.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(t){throw t.data&&t.data.serverResponse&&t.data.serverResponse.command==="SetSourceChannel"?new Y(k.CROSS_CHANNEL_FAILED_JOIN_SRC):t.data&&t.data.serverResponse&&t.serverResponse.command==="SetDestChannelStatus"?new Y(k.CROSS_CHANNEL_FAILED_JOIN_DEST):t.data&&t.data.serverResponse&&t.serverResponse.command==="StartPacketTransfer"?new Y(k.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):t}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==Ea.RELAY_STATE_RUNNING)throw new Y(k.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==Ea.RELAY_STATE_RUNNING)throw new Y(k.INVALID_OPERATION);let t=this.genMessage(Gi.SetVideoProfile);await this.signal.request(t),_.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),_.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=Ea.RELAY_STATE_IDLE,this.dispose()}dispose(){_.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=pa.CancelToken.source(),this.state=Ea.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){let e=await rHe(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",Ac.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){let t=this.genMessage(Gi.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),_.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));let r=this.genMessage(Gi.SetSdkProfile,e);await this.signal.request(r),_.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));let n=this.genMessage(Gi.SetSourceChannel,e);await this.signal.request(n),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",Ac.PACKET_JOINED_SRC_CHANNEL),_.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));let i=this.genMessage(Gi.SetSourceUserId,e);await this.signal.request(i),_.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));let a=this.genMessage(Gi.SetDestChannel,e);await this.signal.request(a),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",Ac.PACKET_JOINED_DEST_CHANNEL),_.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));let o=this.genMessage(Gi.StartPacketTransfer,e);await this.signal.request(o),this.emit("event",Ac.PACKET_SENT_TO_DEST_CHANNEL),this.state=Ea.RELAY_STATE_RUNNING,_.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){let t=this.genMessage(Gi.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",Ac.PACKET_UPDATE_DEST_CHANNEL),_.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){let e=this.genMessage(Gi.StopPacketTransfer);await this.signal.request(e),_.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){let r=[],n=[],i=[];this.requestId+=1;let a={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:$o,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};a.sdkVersion==="4.22.0"&&(a.sdkVersion="0.0.1");let o=null,s=null;switch(e){case Gi.SetSdkProfile:return a.clientRequest={command:"SetSdkProfile",type:"multi_channel"},a;case Gi.SetSourceChannel:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new Y(k.UNEXPECTED_ERROR,"can not find source config");return a.clientRequest={command:"SetSourceChannel",uid:"0",channelName:s.channelName,token:s.token||this.joinInfo.appId},a;case Gi.SetSourceUserId:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new Y(k.UNEXPECTED_ERROR,"can not find source config");return a.clientRequest={command:"SetSourceUserId",uid:s.uid+""},a;case Gi.SetDestChannel:if(o=t&&t.getDestChannelMediaInfo(),!o)throw new Y(k.UNEXPECTED_ERROR,"can not find dest config");return o.forEach(l=>{r.push(l.channelName),n.push(l.uid+""),i.push(l.token||this.joinInfo.appId)}),a.clientRequest={command:"SetDestChannel",channelName:r,uid:n,token:i},a;case Gi.StartPacketTransfer:return a.clientRequest={command:"StartPacketTransfer"},a;case Gi.Reconnect:return a.clientRequest={command:"Reconnect"},a;case Gi.StopPacketTransfer:return a.clientRequest={command:"StopPacketTransfer"},a;case Gi.UpdateDestChannel:if(o=t&&t.getDestChannelMediaInfo(),!o)throw new Y(k.UNEXPECTED_ERROR,"can not find dest config");return o.forEach(l=>{r.push(l.channelName),n.push(l.uid+""),i.push(l.token||this.joinInfo.appId)}),a.clientRequest={command:"UpdateDestChannel",channelName:r,uid:n,token:i},a;case Gi.SetVideoProfile:a.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return a}},lGe={name:"ChannelMediaRelay",create:function(e){return new sGe(e.joinInfo,e.clientId,e.websocketRetryConfig||Zr,e.httpRetryConfig||Zr,e.resolution)}};function XG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ky(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XG(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var cGe=class extends Tr{constructor(e,t,r,n){super(),R(this,"spec",void 0),R(this,"token",void 0),R(this,"websocket",void 0),R(this,"pingpongTimer",void 0),R(this,"reconnectMode","retry"),R(this,"serviceMode",void 0),R(this,"reqId",0),R(this,"commandReqId",0),R(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),R(this,"handleWebSocketMessage",i=>{if(!i.data)return;let a=JSON.parse(i.data);a.requestId?this.emit("@".concat(a.requestId,"-").concat(a.sid),a):(xe.workerEvent(this.spec.sid,{actionType:"status",serverCode:a.code,workerType:this.serviceMode===Wc.TRANSCODE?1:2}),this.emit(zu.PUBLISH_STREAM_STATUS,a))}),this.spec=t,this.token=e,this.serviceMode=n,this.websocket=new Lv("live-streaming",r),this.websocket.on(Xe.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Xe.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Xe.REQUEST_NEW_URLS,(i,a)=>{ii(this,zu.REQUEST_NEW_ADDRESS).then(i).catch(a)}),this.websocket.on(Xe.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(e){return this.websocket.init(e)}async request(e,t,r,n){this.reqId+=1,e==="request"&&(this.commandReqId+=1);let i=this.commandReqId,a=this.reqId;if(!a||!this.websocket)throw new Y(k.UNEXPECTED_ERROR);let o=ky({command:e,sdkVersion:$o==="4.22.0"?"0.0.1":$o,seq:a,requestId:a,allocate:r,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if(this.websocket.state==="closed")throw new Y(k.WS_DISCONNECT);let s=()=>new ye((h,f)=>{this.websocket.once(Xe.CLOSED,()=>f(new Y(k.WS_ABORT))),this.websocket.once(Xe.CONNECTED,h)});this.websocket.state!=="connected"&&await s(),o.clientRequest&&(o.clientRequest.workerToken=this.token);let l=new ye((h,f)=>{let p=()=>{f(new Y(k.WS_ABORT))};this.websocket.once(Xe.RECONNECTING,p),this.websocket.once(Xe.CLOSED,p),this.once("@".concat(a,"-").concat(this.spec.sid),m=>{h(m)})});n&&xe.workerEvent(this.spec.sid,ky(ky({},n),{},{requestId:i,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));let c=Date.now();this.websocket.sendMessage(o);let u=null;try{u=await l}catch(h){if(this.websocket.state==="closed")throw h;return await s(),await this.request(e,t,r)}return n&&xe.workerEvent(this.spec.sid,ky(ky({},n),{},{requestId:i,actionType:"response",payload:JSON.stringify(u.serverResponse),serverCode:u.code,success:u.code===200,responseTime:Date.now()-c})),u.code!==200&&this.handleResponseError(u),u}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){let e=$o==="4.22.0"?"0.0.1":$o;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case on.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void _.warning("live stream response already exists stream");case on.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case on.LIVE_STREAM_RESPONSE_BAD_STREAM:case on.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Y(k.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case on.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(e.serverResponse.command==="UnpublishStream")return;throw new Y(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case on.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Y(k.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case on.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{let t=new Y(k.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(zu.WARNING,t,e.serverResponse.url)}case on.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{let t=new Y(k.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(zu.WARNING,t,e.serverResponse.url)}case on.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Y(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case on.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Y(k.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case on.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{let t=new Y(k.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(zu.WARNING,t,e.serverResponse.url)}case on.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Y(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case on.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Y(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case on.LIVE_STREAM_RESPONSE_WORKER_LOST:case on.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(e.serverResponse.command==="UnpublishStream")return;throw new Y(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case on.ERROR_FAIL_SEND_MESSAGE:if(e.serverResponse.command==="UnpublishStream")return;if(e.serverResponse.command==="UpdateTranscoding"||e.serverResponse.command==="ControlStream")return new Y(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new Y(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case on.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case on.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case on.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case on.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Y(k.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(Cx)},6e3)}};function JG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ba(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JG(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var uGe=class extends Tr{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zr,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Zr;super(),R(this,"onLiveStreamWarning",void 0),R(this,"onLiveStreamError",void 0),R(this,"spec",void 0),R(this,"retryTimeout",1e4),R(this,"connection",void 0),R(this,"httpRetryConfig",void 0),R(this,"wsRetryConfig",void 0),R(this,"streamingTasks",new Map),R(this,"isStartingStreamingTask",!1),R(this,"taskMutex",new gi("live-streaming")),R(this,"cancelToken",pa.CancelToken.source()),R(this,"transcodingConfig",void 0),R(this,"uapResponse",void 0),R(this,"lastTaskId",1),R(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=r,this.wsRetryConfig=t}async setTranscodingConfig(e){let t=ba(ba({},l8e),e);t.videoCodecProfile!==66&&t.videoCodecProfile!==77&&t.videoCodecProfile!==100&&(_.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map(a=>ba(ba(ba({},s8e),a),{},{zOrder:a.zOrder?a.zOrder+1:1}))),function(a){br(a.width)||Kt(a.width,"config.width",0,1e4),br(a.height)||Kt(a.height,"config.height",0,1e4),br(a.videoBitrate)||Kt(a.videoBitrate,"config.videoBitrate",1,1e6),br(a.videoFrameRate)||Kt(a.videoFrameRate,"config.videoFrameRate"),br(a.lowLatency)||Bc(a.lowLatency,"config.lowLatency"),br(a.audioSampleRate)||fn(a.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),br(a.audioBitrate)||Kt(a.audioBitrate,"config.audioBitrate",1,128),br(a.audioChannels)||fn(a.audioChannels,"config.audioChannels",[1,2,3,4,5]),br(a.videoGop)||Kt(a.videoGop,"config.videoGop"),br(a.videoCodecProfile)||fn(a.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),br(a.userCount)||Kt(a.userCount,"config.userCount",0,17),br(a.backgroundColor)||Kt(a.backgroundColor,"config.backgroundColor",0,16777215),br(a.userConfigExtraInfo)||Fn(a.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),a.transcodingUsers&&!br(a.transcodingUsers)&&(Lc(a.transcodingUsers,"config.transcodingUsers"),a.transcodingUsers.forEach((o,s)=>{Ix(o.uid),br(o.x)||Kt(o.x,"transcodingUser[".concat(s,"].x"),0,1e4),br(o.y)||Kt(o.y,"transcodingUser[".concat(s,"].y"),0,1e4),br(o.width)||Kt(o.width,"transcodingUser[".concat(s,"].width"),0,1e4),br(o.height)||Kt(o.height,"transcodingUser[".concat(s,"].height"),0,1e4),br(o.zOrder)||Kt(o.zOrder-1,"transcodingUser[".concat(s,"].zOrder"),0,100),br(o.alpha)||Kt(o.alpha,"transcodingUser[".concat(s,"].alpha"),0,1,!1)})),br(a.watermark)||aA(a.watermark,"watermark"),br(a.backgroundImage)||aA(a.backgroundImage,"backgroundImage"),a.images&&!br(a.images)&&(Lc(a.images,"config.images"),a.images.forEach((o,s)=>{aA(o,"images[".concat(s,"]"))}))}(t);let r=[];t.images&&r.push(...t.images.map(a=>ba(ba(ba({},iA),a),{},{zOrder:255}))),t.backgroundImage&&(r.push(ba(ba(ba({},iA),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(r.push(ba(ba(ba({},iA),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=r,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map(a=>ba({},a)),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);let n=(t.userConfigs||[]).map(a=>typeof a.uid=="number"?ye.resolve(a.uid):Nie(a.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await ye.all(n)).forEach((a,o)=>{t.userConfigs&&t.userConfigs[o]&&(t.userConfigs[o].uid=a)}),this.transcodingConfig=t,this.connection)try{var i;let a=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Qc(i=this.streamingTasks).call(i)).map(o=>o.taskId).join("#")});_.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(a.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(a){if(!a.data||!a.data.retry)throw a;a.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(o=>{_.warning("[".concat(this.spec.clientId,"] live streaming receive error"),a.toString(),"try to republish",o.url),this.startLiveStreamingTask(o.url,o.mode,a).then(()=>{_.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(o.url," success"))}).catch(s=>{_.error("[".concat(this.spec.clientId,"] live streaming republish failed"),o.url,s.toString()),this.onLiveStreamError&&this.onLiveStreamError(o.url,s)})})}}async startLiveStreamingTask(e,t,r){if(!this.transcodingConfig&&t===Wc.TRANSCODE)throw new Y(k.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let n={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};_.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));let i=await this.taskMutex.lock();if(!this.connection&&r)return void i();if(this.streamingTasks.get(e)&&!r)return i(),new Y(k.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(o){throw i(),o}switch(t){case Wc.TRANSCODE:n.transcodingConfig=ba({},this.transcodingConfig)}this.uapResponse&&this.uapResponse.vid&&(n.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;let a=this.lastTaskId++;try{let o=new ye((l,c)=>{zn(this.retryTimeout).then(()=>{if(r)return c(r);let u=this.statusError.get(e);return u?(this.statusError.delete(e),c(u)):void 0})}),s=await ye.race([this.connection.request("request",{clientRequest:n},!0,{url:e,command:"PublishStream",workerType:t===Wc.TRANSCODE?1:2,requestByUser:!r,tid:a.toString()}),o]);this.isStartingStreamingTask=!1,_.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(s.code)),this.streamingTasks.set(e,{clientRequest:n,mode:t,url:e,taskId:a}),i()}catch(o){if(i(),this.isStartingStreamingTask=!1,!o.data||!o.data.retry||r)throw o;return o.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,o)):await this.startLiveStreamingTask(e,t,o)}}stopLiveStreamingTask(e){return new ye((t,r)=>{let n=this.streamingTasks.get(e);if(!n||!this.connection)return new Y(k.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();let i=n.mode;n.abortTask=()=>{_.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:"UnpublishStream",url:n.url}},!1,{url:e,command:"UnPublishStream",workerType:i===Wc.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(a=>{_.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(a.code)),this.streamingTasks.delete(e),this.streamingTasks.size===0&&(this.connection&&this.connection.close(),this.connection=void 0),t()}).catch(r)})}resetAllTask(){var e;let t=Array.from(Qc(e=this.streamingTasks).call(e));this.terminate();for(let r of t)this.startLiveStreamingTask(r.url,r.mode).catch(n=>{this.onLiveStreamError&&this.onLiveStreamError(r.url,n)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=pa.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new Y(k.UNEXPECTED_ERROR,"live streaming connection has already connected");let t=await ii(this,eD.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new cGe(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(zu.WARNING,(r,n)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(n,r)),this.connection.on(zu.PUBLISH_STREAM_STATUS,r=>this.handlePublishStreamServer(r)),this.connection.on(zu.REQUEST_NEW_ADDRESS,(r,n)=>{if(!this.connection)return n(new Y(k.UNEXPECTED_ERROR,"can not get new live streaming address list"));ii(this,eD.REQUEST_WORKER_MANAGER_LIST,e).then(i=>{this.uapResponse=i,r(i.addressList)}).catch(n)}),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){let t=e.serverStatus&&e.serverStatus.url||"empty_url",r=this.streamingTasks.get(t),n=e.reason;switch(e.code){case on.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case on.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case on.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case on.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{let a=new Y(k.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(r)return _.error(a.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,a);if(!this.isStartingStreamingTask)return;this.statusError.set(t,a)}case on.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{let a=new Y(k.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,n);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,a)}case on.LIVE_STREAM_RESPONSE_WORKER_LOST:case on.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var i;if(!this.connection)return;this.connection.tryNextAddress();let a=Array.from(Qc(i=this.streamingTasks).call(i));for(let o of a)o.abortTask?o.abortTask():(_.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",o.url),this.startLiveStreamingTask(o.url,o.mode,new Y(k.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then(()=>{_.debug("[".concat(this.spec.clientId,"] republish live stream success"),o.url)}).catch(s=>{_.error(s.toString()),this.onLiveStreamError&&this.onLiveStreamError(o.url,s)}));return}}}hasUrl(e){return this.streamingTasks.has(e)}},dGe={name:"LiveStreaming",create:function(e){return new uGe(e.joinInfo,e.websocketRetryConfig||Zr,e.httpRetryConfig||Zr)}};function hGe(e){let t=QG();return function(r,n){let i=r.appId;i!==void 0&&(Bt(n,10),Bl(n,i));let a=r.cid;a!==void 0&&(Bt(n,16),Bt(n,a));let o=r.cname;o!==void 0&&(Bt(n,26),Bl(n,o));let s=r.deviceId;s!==void 0&&(Bt(n,34),Bl(n,s));let l=r.elapse;l!==void 0&&(Bt(n,40),Pu(n,l));let c=r.fileSize;c!==void 0&&(Bt(n,48),Pu(n,pp(c)));let u=r.height;u!==void 0&&(Bt(n,56),Pu(n,pp(u)));let h=r.jpg;h!==void 0&&(Bt(n,66),Bt(n,h.length),function(K,P){let D=Hg(K,P.length);K.bytes.set(P,D)}(n,h));let f=r.networkType;f!==void 0&&(Bt(n,72),Pu(n,pp(f)));let p=r.osType;p!==void 0&&(Bt(n,80),Pu(n,pp(p)));let m=r.requestId;m!==void 0&&(Bt(n,90),Bl(n,m));let g=r.sdkVersion;g!==void 0&&(Bt(n,98),Bl(n,g));let y=r.sequence;y!==void 0&&(Bt(n,104),Pu(n,pp(y)));let v=r.sid;v!==void 0&&(Bt(n,114),Bl(n,v));let b=r.timestamp;b!==void 0&&(Bt(n,120),Pu(n,b));let E=r.uid;E!==void 0&&(Bt(n,128),Bt(n,E));let S=r.vid;S!==void 0&&(Bt(n,136),Bt(n,S));let I=r.width;I!==void 0&&(Bt(n,144),Pu(n,pp(I)));let N=r.service;N!==void 0&&(Bt(n,152),Bt(n,N));let L=r.callbackData;L!==void 0&&(Bt(n,162),Bl(n,L));let j=r.jpgEncryption;j!==void 0&&(Bt(n,168),Bt(n,j));let z=r.requestType;z!==void 0&&(Bt(n,176),Bt(n,z));let A=r.scorePorn;A!==void 0&&(Bt(n,185),cO(n,A));let V=r.scoreSexy;V!==void 0&&(Bt(n,193),cO(n,V));let G=r.scoreNeutral;G!==void 0&&(Bt(n,201),cO(n,G));let X=r.scene;X!==void 0&&(Bt(n,208),Bt(n,X));let $=r.ossFilePrefix;$!==void 0&&(Bt(n,218),Bl(n,$));let B=r.serviceVendor;if(B!==void 0)for(let K of B){Bt(n,226);let P=QG();mGe(K,P),Bt(n,P.limit),bGe(n,P),vGe(P)}}(e,t),function(r){let n=r.bytes,i=r.limit;return n.length===i?n:n.subarray(0,i)}(t)}function fGe(e){return function(r){let n={};e:for(;!xae(r);){let i=Xl(r);switch(i>>>3){case 0:break e;case 1:n.code=Xl(r);break;case 2:n.msg=Rae(r,Xl(r));break;case 3:{let a=gGe(r);n.data=pGe(r),r.limit=a;break}default:Tae(r,7&i)}}return n}({bytes:t=e,offset:0,limit:t.length});var t}function pGe(e){let t={};e:for(;!xae(e);){let r=Xl(e);switch(r>>>3){case 0:break e;case 1:t.requestId=Rae(e,Xl(e));break;case 2:t.requestType=Xl(e)>>>0;break;case 3:t.scorePorn=lO(e);break;case 4:t.scoreSexy=lO(e);break;case 5:t.scoreNeutral=lO(e);break;case 6:t.requestScene=Xl(e)>>>0;break;case 7:t.scene=Xl(e)>>>0;break;default:Tae(e,7&r)}}return t}function mGe(e,t){let r=e.service;r!==void 0&&(Bt(t,8),Bt(t,r));let n=e.vendor;n!==void 0&&(Bt(t,16),Bt(t,n));let i=e.token;i!==void 0&&(Bt(t,26),Bl(t,i));let a=e.callbackUrl;a!==void 0&&(Bt(t,34),Bl(t,a))}function gGe(e){let t=Xl(e),r=e.limit;return e.limit=e.offset+t,r}function Tae(e,t){switch(t){case 0:for(;128&Iae(e););break;case 2:sO(e,Xl(e));break;case 5:sO(e,4);break;case 1:sO(e,8);break;default:throw new Error("Unimplemented type: "+t)}}var yGe=new Float32Array(1);new Uint8Array(yGe.buffer);var KM=new Float64Array(1),Ta=new Uint8Array(KM.buffer);function pp(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var Cae=[];function QG(){let e=Cae.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function vGe(e){Cae.push(e)}function sO(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function xae(e){return e.offset>=e.limit}function Hg(e,t){let r=e.bytes,n=e.offset,i=e.limit,a=n+t;if(a>r.length){let o=new Uint8Array(2*a);o.set(r),e.bytes=o}return e.offset=a,a>i&&(e.limit=a),n}function qM(e,t){let r=e.offset;if(r+t>e.limit)throw new Error("Read past limit");return e.offset+=t,r}function Rae(e,t){let r=qM(e,t),n=String.fromCharCode,i=e.bytes,a="",o="";for(let s=0;s<t;s++){let l,c,u,h,f=i[s+r];128&f?(224&f)==192?s+1>=t?o+=a:(l=i[s+r+1],(192&l)!=128?o+=a:(h=(31&f)<<6|63&l,h<128?o+=a:(o+=n(h),s++))):(240&f)==224?s+2>=t?o+=a:(l=i[s+r+1],c=i[s+r+2],(49344&(l|c<<8))!=32896?o+=a:(h=(15&f)<<12|(63&l)<<6|63&c,h<2048||h>=55296&&h<=57343?o+=a:(o+=n(h),s+=2))):(248&f)==240?s+3>=t?o+=a:(l=i[s+r+1],c=i[s+r+2],u=i[s+r+3],(12632256&(l|c<<8|u<<16))!=8421504?o+=a:(h=(7&f)<<18|(63&l)<<12|(63&c)<<6|63&u,h<65536||h>1114111?o+=a:(h-=65536,o+=n(55296+(h>>10),56320+(1023&h)),s+=3))):o+=a:o+=n(f)}return o}function Bl(e,t){let r=t.length,n=0;for(let o=0;o<r;o++){let s=t.charCodeAt(o);s>=55296&&s<=56319&&o+1<r&&(s=(s<<10)+t.charCodeAt(++o)-56613888),n+=s<128?1:s<2048?2:s<65536?3:4}Bt(e,n);let i=Hg(e,n),a=e.bytes;for(let o=0;o<r;o++){let s=t.charCodeAt(o);s>=55296&&s<=56319&&o+1<r&&(s=(s<<10)+t.charCodeAt(++o)-56613888),s<128?a[i++]=s:(s<2048?a[i++]=s>>6&31|192:(s<65536?a[i++]=s>>12&15|224:(a[i++]=s>>18&7|240,a[i++]=s>>12&63|128),a[i++]=s>>6&63|128),a[i++]=63&s|128)}}function bGe(e,t){let r=Hg(e,t.limit),n=e.bytes,i=t.bytes;for(let a=0,o=t.limit;a<o;a++)n[a+r]=i[a]}function Iae(e){return e.bytes[qM(e,1)]}function ZG(e,t){let r=Hg(e,1);e.bytes[r]=t}function lO(e){let t=qM(e,8),r=e.bytes;return Ta[0]=r[t++],Ta[1]=r[t++],Ta[2]=r[t++],Ta[3]=r[t++],Ta[4]=r[t++],Ta[5]=r[t++],Ta[6]=r[t++],Ta[7]=r[t++],KM[0]}function cO(e,t){let r=Hg(e,8),n=e.bytes;KM[0]=t,n[r++]=Ta[0],n[r++]=Ta[1],n[r++]=Ta[2],n[r++]=Ta[3],n[r++]=Ta[4],n[r++]=Ta[5],n[r++]=Ta[6],n[r++]=Ta[7]}function Xl(e){let t,r=0,n=0;do t=Iae(e),r<32&&(n|=(127&t)<<r),r+=7;while(128&t);return n}function Bt(e,t){for(t>>>=0;t>=128;)ZG(e,127&t|128),t>>>=7;ZG(e,t)}function Pu(e,t){let r=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,a=i===0?n===0?r<16384?r<128?1:2:r<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:i<128?9:10,o=Hg(e,a),s=e.bytes;switch(a){case 10:s[o+9]=i>>>7&1;case 9:s[o+8]=a!==9?128|i:127&i;case 8:s[o+7]=a!==8?n>>>21|128:n>>>21&127;case 7:s[o+6]=a!==7?n>>>14|128:n>>>14&127;case 6:s[o+5]=a!==6?n>>>7|128:n>>>7&127;case 5:s[o+4]=a!==5?128|n:127&n;case 4:s[o+3]=a!==4?r>>>21|128:r>>>21&127;case 3:s[o+2]=a!==3?r>>>14|128:r>>>14&127;case 2:s[o+1]=a!==2?r>>>7|128:r>>>7&127;case 1:s[o]=a!==1?128|r:127&r}}function e9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var wGe=new Map([["moderation",1],["supervise",2]]);function t9(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var EGe=class extends Tr{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;let t=this._connectionState;this._connectionState=e,this.emit(Nn.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=wl(t=e.map(r=>wGe.get(r)||0)).call(t,(r,n)=>r+n),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(e){super(),R(this,"name","AgoraRTCVideoContentInspect"),R(this,"_connectionState",Es.CONNECTING),R(this,"_innerConnectionState",void 0),R(this,"sequence",0),R(this,"inspectStartTime",void 0),R(this,"workerManagerConnection",void 0),R(this,"workerConnection",void 0),R(this,"workerMessageLengthLimit",void 0),R(this,"inspectIntervalMinimum",void 0),R(this,"qualityRatio",void 0),R(this,"_connectInfo",void 0),R(this,"_cancelTokenSource",pa.CancelToken.source()),R(this,"_retryConfig",void 0),R(this,"wmSequence",0),R(this,"inspectInterval",void 0),R(this,"inspectTimer",null),R(this,"ossFilePrefix",void 0),R(this,"extraInfo",void 0),R(this,"_inspectType",void 0),R(this,"_inspectMode",void 0),R(this,"_quality",1),R(this,"qualityTimer",null),R(this,"_inspectId",void 0),R(this,"_needWorkUrlOnly",!1),R(this,"inspectImage",()=>{if(this.connectionState!==Es.CONNECTED)throw new Y(k.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===Es.CONNECTED?this.requestToInspectImage():_.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=rr(5,"inspect-"),this.workerMessageLengthLimit=M("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=M("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=M("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new Lv("worker-manager-"+this._inspectId,Zr),this.on(Nn.STATE_CHANGE,(t,r)=>{this._innerConnectionState=t,_.debug("[".concat(this._inspectId,"] Inspect operation :").concat(ms[t]," ").concat(r||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new Lv("worker-"+this._inspectId,Zr),this.handleWorkerEvents()}async init(e,t){this.emit(Nn.STATE_CHANGE,ms.CONNECT_AP),this._connectInfo=e;let r=this._cancelTokenSource.token;return this._retryConfig=t,new ye((n,i)=>{this.on(Nn.CONNECTION_STATE_CHANGE,(a,o)=>{o===Es.CONNECTED&&n()}),this.requestAP(e,r,t).then(a=>{this.connectWorkerManager(a)}).catch(a=>{i(a)})})}async requestAP(e,t,r){let n=M("WEBCS_DOMAIN").map(o=>"https://".concat(o,"/api/v1")),i=await function(o,s,l,c){let{appId:u,areaCode:h,cname:f,sid:p,token:m,uid:g}=s;wm++;let y="image_moderation_api",v={service_name:y,json_body:JSON.stringify({appId:u,areaCode:h,cname:f,command:"allocateEdge",requestId:wm,seq:wm,sid:p,token:m,ts:Date.now(),uid:g+""})},b,E,S=o[0];return Cl(async()=>{b=Date.now();let I=await xl(S,{data:v,cancelToken:l,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(E=Date.now()-b,I.code!==0){let z=new Y(k.UNEXPECTED_RESPONSE,"image inspect ap error, code"+I.code,{retry:!0,responseTime:E});throw _.error(z.toString()),z}let N=JSON.parse(I.json_body);if(N.code!==200){let z=new Y(k.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(N.code,", reason: ").concat(N.reason),{code:N.code,responseTime:E});throw _.error(z.toString()),z}if(!N.servers||!Array.isArray(N.servers)||N.servers.length===0){let z=new Y(k.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:N.code,responseTime:E});throw _.error(z.toString()),z}let L=M("VIDEO_INSPECT_WORKER_MANAGER_HOST"),j=M("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:N.servers.map(z=>{let{address:A,wss:V}=z;if(A&&V)return"wss://".concat(A.replace(/\./g,"-"),".").concat(L,":").concat(j||V)}).filter(z=>!!z),workerToken:N.workerToken,vid:N.vid,responseTime:E}},(I,N)=>(xe.apworkerEvent(p,{success:!0,sc:200,serviceName:y,responseDetail:JSON.stringify(I.addressList),firstSuccess:N===0,responseTime:E,serverIp:o[N%o.length]}),!1),(I,N)=>(xe.apworkerEvent(p,{success:!1,sc:I.data&&I.data.code||200,serviceName:y,responseTime:E,serverIp:o[N%o.length]}),!!(I.code!==k.OPERATION_ABORTED&&I.code!==k.UNEXPECTED_RESPONSE||I.data&&I.data.retry)&&(S=o[(N+1)%o.length],!0)),c)}(n,e,t,r);this.emit(Nn.STATE_CHANGE,ms.AP_CONNECTED);let{addressList:a}=i;return this.wmSequence++,a}async connectWorkerManager(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=t,this.emit(Nn.STATE_CHANGE,ms.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(Xe.CONNECTED,async()=>{this.emit(Nn.STATE_CHANGE,ms.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.22.0",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(Xe.CLOSED,()=>{this._innerConnectionState<ms.GET_WORKER_MANAGER_RESPONSE&&_.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(Xe.FAILED,()=>{this._innerConnectionState<ms.GET_WORKER_MANAGER_RESPONSE&&_.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(Xe.RECONNECTING,()=>{this._innerConnectionState<ms.GET_WORKER_MANAGER_RESPONSE&&_.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(Xe.ON_MESSAGE,async e=>{this.emit(Nn.STATE_CHANGE,ms.GET_WORKER_MANAGER_RESPONSE);let t=this.workerManagerConnection.url;this.workerManagerConnection.close();let r=JSON.parse(e.data);if(r.code!==200)throw _.error("[".concat(this._inspectId,"] Unexpected code ").concat(r.code," from worker manager")),new Y(k.UNEXPECTED_RESPONSE,"response code of worker is unexpected",r);if(!(r.serverResponse&&r.serverResponse.portWss&&t))throw _.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(r))),new Y(k.UNEXPECTED_RESPONSE,"response content of worker is unexpected",r);{let n=M("VIDEO_INSPECT_WORKER_PORT")||r.serverResponse.portWss,i=t.replace(/:\d+\/?$/,":".concat(n));this.emit(Nn.STATE_CHANGE,ms.CONNECT_WORKER,i),this._needWorkUrlOnly?this.emit(Nn.REQUEST_NEW_WORKER_URL,i):await this.connectWorker(i)}}),this.workerManagerConnection.on(Xe.WILL_RECONNECT,(e,t,r)=>{r(e)}),this.workerManagerConnection.on(Xe.REQUEST_NEW_URLS,(e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)})}handleWorkerEvents(){this.workerConnection.on(Xe.CONNECTED,async()=>{this.emit(Nn.STATE_CHANGE,ms.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=Es.CONNECTED}),this.workerConnection.on(Xe.ON_MESSAGE,async e=>{if(e.data instanceof ArrayBuffer){let r=fGe(new Uint8Array(e.data));if(M("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&_.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(r)),r.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(Nn.INSPECT_RESULT,void 0,void 0);if(r.data&&r.data.scorePorn&&r.data.scoreSexy&&r.data.scoreNeutral){var t;let n={porn:r.data.scorePorn,sexy:r.data.scoreSexy,neutral:r.data.scoreNeutral},i=wl(t=Object.keys(n)).call(t,(o,s)=>n[o]>n[s]?o:s,"porn"),a=Object.keys(n).find(o=>o===i);this.emit(Nn.INSPECT_RESULT,a)}else this.emit(Nn.INSPECT_RESULT,void 0,new Y(k.UNEXPECTED_RESPONSE,r.code+"","There is an unexpected data on message"))}else this.emit(Nn.INSPECT_RESULT,void 0,new Y(k.UNEXPECTED_RESPONSE,r.code+"",r.msg))}else _.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(Nn.INSPECT_RESULT,void 0,new Y(k.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(Xe.CLOSED,()=>{this.connectionState=Es.CLOSED}),this.workerConnection.on(Xe.FAILED,()=>{this.connectionState=Es.CLOSED}),this.workerConnection.on(Xe.RECONNECTING,()=>{this.connectionState=this.connectionState===Es.CONNECTED?Es.RECONNECTING:Es.CONNECTING}),this.workerConnection.on(Xe.WILL_RECONNECT,(e,t,r)=>{e==="recover"&&r(e),r("tryNext")}),this.workerConnection.on(Xe.REQUEST_NEW_URLS,(e,t)=>{this.workerManagerConnection.close(),this.once(Nn.REQUEST_NEW_WORKER_URL,r=>{e([r])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r=>{this.connectWorkerManager(r,!0)}).catch(r=>{t(r)})})}async requestToInspectImage(){this.sequence++;let e=Bo(this,Nn.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(Nn.INSPECT_RESULT,void 0,new Y(k.INVALID_OPERATION,"Only the track being played can be inspected"));let r=await this.generateRequestData(e,t);this.workerConnection.sendMessage(r,!0,!0)}else this.emit(Nn.INSPECT_RESULT,void 0,new Y(k.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:r,cname:n,cid:i,vid:a,sid:o,uid:s}=t,l=Date.now(),c=await e.getCurrentFrameImage("image/jpeg",this.quality),u=await uie(c,r,n),h=this.sequence+"-"+i+"-"+s+"-"+l+"-"+rr(12,""),f={appId:r,cid:i,cname:n,deviceId:"",elapse:t9(Number(l-this.inspectStartTime)),fileSize:u.byteLength,jpgEncryption:2,height:c.height,width:c.width,jpg:u,networkType:6,osType:7,requestId:h,sdkVersion:"4.22.0",sequence:this.sequence,sid:o,timestamp:t9(l),uid:s,vid:a,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete f.callbackData,this.ossFilePrefix===void 0&&delete f.ossFilePrefix;let p=hGe(f);if(p.byteLength<this.workerMessageLengthLimit){if(M("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){let m=function(g){for(var y=1;y<arguments.length;y++){var v=arguments[y]!=null?arguments[y]:{};y%2?e9(Object(v),!0).forEach(function(b){R(g,b,v[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(v)):e9(Object(v)).forEach(function(b){Object.defineProperty(g,b,Object.getOwnPropertyDescriptor(v,b))})}return g}({},f);delete m.jpg,_.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(m))}return p}{let m=this.quality*this.qualityRatio;return this.quality=m,await this.generateRequestData(e,{appId:r,cname:n,cid:i,vid:a,sid:o,uid:s})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=pa.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=Es.CLOSED,this.emit(Nn.STATE_CHANGE,ms.CLOSED)}},_Ge={name:"ContentInspect",create:function(e){let{config:t}=e;return function(r){if(!r)throw new Y(k.INVALID_PARAMS,"inspectConfig is necessary.");if(!r.inspectType||!Array.isArray(r.inspectType))throw new Y(k.INVALID_PARAMS,"inspectConfig.inspectType is necessary and is an instance of Array.");{let n=[...new Set(r.inspectType)];n.forEach(i=>{var a;if(!be(a=["supervise","moderation"]).call(a,i))throw new Y(k.INVALID_PARAMS,"".concat(i," is not a valid inspect type."))}),r.inspectType=n}if(r&&r.extraInfo&&r.extraInfo.length>1024)throw new Y(k.INVALID_PARAMS,"inspectConfig.extraInfo length cannot exceed 1024 bytes")}(t),new EGe(t)}};Wt("PROCESS_ID","process-".concat(rr(8,""),"-").concat(rr(4,""),"-").concat(rr(4,""),"-").concat(rr(4,""),"-").concat(rr(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(t){return void _.error("Error loading sdk config",t.message)}if(e)try{let t=JSON.parse(window.atob(e)),r=Date.now();_.debug("Loading global parameters from cache",t),Object.keys(t).forEach(n=>{if(Object.prototype.hasOwnProperty.call(Vr,n)){let{value:i,expires:a}=t[n];if(a&&a<=r)return;ed[n]=i,Vr[n]=i}})}catch(t){_.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(ed.AREAS)&&ed.AREAS.length>0&&UM(ed.AREAS,!0);var r9=(e,t,r)=>{_.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),Wt(e,t,r)};Ay(lGe,!1),Ay(dGe,!1),Ay(WHe,!1),Ay(_Ge,!1),Ay(aGe,!1);var Rr=function(e){let t=new Tr,r=e,n={getListeners:t.getListeners.bind(t),on:(i,a)=>(function(o,s){o===ql.SECURITY_POLICY_VIOLATION&&tae(s,!0)}(i,a),t.on.bind(t)(i,a)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return NG(NG({},r),n)}({__TRACK_LIST__:Sp,VERSION:$o,BUILD:TM,ESM_BUNDLER:!1,ESM:!0,UMD:!1,DEV:!1,setParameter:r9,getParameter:M,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection,r=await async function(n){let i;return Rt().supportUnifiedPlan?(n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"}),i=(await n.createOffer()).sdp):i=(await n.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,i}(t);if(!r)return e;t.close(),t=null,e=function(n){let i={video:[],audio:[]};return n.match(/ VP8/i)&&i.video.push("VP8"),n.match(/ VP9/i)&&i.video.push("VP9"),n.match(/ AV1/i)&&i.video.push("AV1"),n.match(/ H264/i)&&i.video.push("H264"),n.match(/ H265/i)&&i.video.push("H265"),n.match(/ opus/i)&&i.audio.push("OPUS"),n.match(/ PCMU/i)&&i.audio.push("PCMU"),n.match(/ PCMA/i)&&i.audio.push("PCMA"),n.match(/ G722/i)&&i.audio.push("G722"),i}(r)}catch(t){throw new Y(k.CREATE_OFFER_FAILED,t.toString&&t.toString()).print()}return e},checkSystemRequirements:function(){let e=xe.reportApiInvoke(null,{name:sn.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Nr.TRACER}),t=!1;try{let a=window.RTCPeerConnection,o=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,s=window.WebSocket;t=!!(a&&o&&s),t&&bM()&&mne(75)&&new a().close()}catch(a){return _.error("check system requirement failed: ",a),!1}let r=!1,n=Ct();n.name===Mt.CHROME&&Number(n.version)>=58&&(ul.engine.name!=="WebKit"||function(){let a=Ct();if(yT()){if(a.os===Sn.MAC_OS)return!0;if(a.os===Sn.IOS){let o=ul.os.version&&ul.os.version.split(".");if(o&&Number(o[0])===14&&o[1]&&Number(o[1])>=3||o&&Number(o[0])>14)return!0}}return!1}())&&(r=!0),(n.name===Mt.FIREFOX&&Number(n.version)>=56||n.name===Mt.OPERA&&Number(n.version)>=45||n.name===Mt.SAFARI&&Number(n.version)>=11||n.name==="WebKit"&&(Qi()||Ms())&&n.osVersion&&Number(n.osVersion.split(".")[0])>=11||bne()||Ct().name===Mt.QQ)&&(r=!0),_.debug("checkSystemRequirements, api:",t,"browser",r);let i=t&&r;return e.onSuccess(i),i},getDevices:function(e){return lo.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return lo.getRecordingDevices(e)},getCameras:function(e){return lo.getCamerasDevices(e)},getElectronScreenSources:eie,getPlaybackDevices:function(e){return lo.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"},r=xe.reportApiInvoke(null,{name:sn.CREATE_CLIENT,options:[t],tag:Nr.TRACER});try{(function(n){fn(n.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),fn(n.mode,"config.mode",["rtc","live","p2p"]),n.audioCodec!==void 0&&fn(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),n.proxyServer!==void 0&&Fn(n.proxyServer,"config.proxyServer",1,1e4),n.turnServer!==void 0&&Tne(n.turnServer),n.httpRetryConfig!==void 0&&q$(n.httpRetryConfig),n.websocketRetryConfig!==void 0&&q$(n.websocketRetryConfig)})(t)}catch(n){throw r.onError(n),n}return(yne(16,0)||vne(16,0))&&(t.codec==="vp9"&&(t.codec="vp8",_.debug("browser not support vp9, force use vp8")),Wt("UNSUPPORTED_VIDEO_CODEC",["vp9"])),t.audioCodec===void 0&&(t.audioCodec="opus"),r.onSuccess(),new KHe(ol(ol({forceWaitGatewayResponse:!0},t),{},{role:be(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=M("CAMERA_CAPTURE_CONFIG"),r=xe.reportApiInvoke(null,{tag:Nr.TRACER,name:sn.CREATE_CAM_VIDEO_TRACK,options:[mr({},e),t]});t&&(e.encoderConfig=t);let n=ET(e),i=rr(8,"track-cam-"),a=null;_.info("start create camera video track with config",JSON.stringify(e),"trackId",i);try{a=(await io({video:n},i)).getVideoTracks()[0]||null}catch(s){throw r.onError(s),s}if(!a){let s=new ee(k.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(s),s.throw(_)}e.optimizationMode&&AA(i,a,e,Zl(e.encoderConfig));let o=new cD(a,e,n,e.scalabiltyMode?bE(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i);return r.onSuccess(o.getTrackId()),_.info("create camera video success, trackId:",i),o},createCustomVideoTrack:function(e){let t=xe.reportApiInvoke(null,{tag:Nr.TRACER,name:sn.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),r=new sr(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?bE(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,rr(8,"track-cus-"),[hr.CUSTOM_TRACK]);return t.onSuccess(r.getTrackId()),_.info("create custom video track success with config",e,"trackId",r.getTrackId()),r},createScreenVideoTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable",r=xe.reportApiInvoke(null,{tag:Nr.TRACER,name:sn.CREATE_SCREEN_VIDEO_TRACK,options:[mr({},e),t]});e.encoderConfig?typeof e.encoderConfig=="string"||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";let n=function(u){let h={};u.screenSourceType&&(h.mediaSource=u.screenSourceType),u.extensionId&&gd()&&(h.extensionId=u.extensionId);let{displaySurface:f,selfBrowserSurface:p,surfaceSwitching:m,systemAudio:g}=u;(KP(107)||$$(107)||H$(93))&&(f&&(fn(f,"displaySurface",["browser","window","monitor"]),h.displaySurface=f),p?(fn(p,"selfBrowserSurface",["exclude","include"]),h.selfBrowserSurface=p):h.selfBrowserSurface="include",m&&(fn(m,"surfaceSwitching",["exclude","include"]),h.surfaceSwitching=m)),(KP(105)||$$(105)||H$(91))&&g&&(fn(g,"systemAudio",["exclude","include"]),h.systemAudio=g),u.electronScreenSourceId&&(h.sourceId=u.electronScreenSourceId);let y=u.encoderConfig?xA(u.encoderConfig):null;return h.mandatory={chromeMediaSource:"desktop",maxWidth:y?y.width:void 0,maxHeight:y?y.height:void 0},y&&(y.frameRate&&(typeof y.frameRate=="number"?(h.mandatory.maxFrameRate=y.frameRate,h.mandatory.minFrameRate=y.frameRate):(h.mandatory.maxFrameRate=y.frameRate.max||y.frameRate.ideal||y.frameRate.exact||void 0,h.mandatory.minFrameRate=y.frameRate.min||y.frameRate.ideal||y.frameRate.exact||void 0),h.frameRate=y.frameRate),y.width&&(h.width=y.width),y.height&&(h.height=y.height)),h}(e),i=rr(8,"track-scr-v-"),a=null,o=null,s=Rt();if(!s.supportShareAudio&&t==="enable"){let u=new ee(k.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return r.onError(u),u.throw(_)}_.info("start create screen video track with config",e,"withAudio",t,"trackId",i);try{let u=await io({screen:n,screenAudio:t==="auto"?s.supportShareAudio:t==="enable"},i);a=u.getVideoTracks()[0]||null,o=u.getAudioTracks()[0]||null}catch(u){throw r.onError(u),u}if(!a){let u=new ee(k.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(u),u.throw(_)}if(!o&&t==="enable"){a&&a.stop();let u=new ee(k.SHARE_AUDIO_NOT_ALLOWED);return r.onError(u),u.throw(_)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(AA(i,a,e,e.encoderConfig&&xA(e.encoderConfig)||void 0),e.encoderConfig&&typeof e.encoderConfig!="string"&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));let l=new sr(a,e.encoderConfig?xA(e.encoderConfig):{},e.scalabiltyMode?bE(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i,[hr.SCREEN_TRACK]);if(!o)return r.onSuccess(l.getTrackId()),_.info("create screen video track success","video:",l.getTrackId()),l;let c=new Ir(o,void 0,rr(8,"track-scr-a-"),!1);return r.onSuccess([l.getTrackId(),c.getTrackId()]),_.info("create screen video track success","video:",l.getTrackId(),"audio:",c.getTrackId()),[l,c]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=M("CAMERA_CAPTURE_CONFIG"),n=xe.reportApiInvoke(null,{tag:Nr.TRACER,name:sn.CREATE_MIC_AND_CAM_TRACKS,options:[e,t,r]});r&&(t.encoderConfig=r);let i=ET(t),a=Y8(e),o=rr(8,"track-mic-"),s=rr(8,"track-cam-"),l=null,c=null;_.info("start create camera video track(".concat(s,") and microphone audio track(").concat(o,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{let f=await io({audio:a,video:i},"".concat(o,"-").concat(s));l=f.getAudioTracks()[0],c=f.getVideoTracks()[0]}catch(f){throw n.onError(f),f}if(!l||!c){let f=new ee(k.UNEXPECTED_ERROR,"can not find tracks in media stream");return n.onError(f),f.throw(_)}t.optimizationMode&&AA(s,c,t,Zl(t.encoderConfig));let u=new _T(l,e,a,o),h=new cD(c,t,i,t.scalabiltyMode?bE(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,s);return n.onSuccess([u.getTrackId(),h.getTrackId()]),_.info("create camera video track(".concat(s,") and microphone audio track(").concat(o,") success")),[u,h]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=xe.reportApiInvoke(null,{tag:Nr.TRACER,name:sn.CREATE_MIC_AUDIO_TRACK,options:[e]}),r=Y8(e),n=rr(8,"track-mic-"),i=null;_.info("start create microphone audio track with config",JSON.stringify(e),"trackId",n);try{i=(await io({audio:r},n)).getAudioTracks()[0]||null}catch(o){throw t.onError(o),o}if(!i){let o=new ee(k.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(o),o.throw(_)}let a=new _T(i,e,r,n);return t.onSuccess(a.getTrackId()),_.info("create microphone audio track success, trackId:",n),a},createCustomAudioTrack:function(e){let t=xe.reportApiInvoke(null,{tag:Nr.TRACER,name:sn.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),r=new Ir(e.mediaStreamTrack,e.encoderConfig?wT(e.encoderConfig):{},rr(8,"track-cus-"),!1);return _.info("create custom audio track success with config",e,"trackId",r.getTrackId()),t.onSuccess(r.getTrackId()),r},createBufferSourceAudioTrack:async function(e){var t;let{cacheOnlineFile:r,encoderConfig:n}=e,{source:i}=e,a={source:i instanceof AudioBuffer?"AudioBuffer":i instanceof File?(t=File.name)!==null&&t!==void 0?t:"File":i,cacheOnlineFile:r,encoderConfig:n},o=xe.reportApiInvoke(null,{tag:Nr.TRACER,name:sn.CREATE_BUFFER_AUDIO_TRACK,options:[a]});if(M("DISABLE_WEBAUDIO"))throw new ee(k.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");let s=rr(8,"track-buf-");_.info("start create buffer source audio track with config",JSON.stringify(a),"trackId",s);let l=i;if(!(i instanceof AudioBuffer))try{i=await async function(h,f){let p=null;if(typeof h=="string"){let g=P7.get(h);if(g)return _.debug("use cached audio resource: ",h),g;try{p=(await Cl(()=>pa.get(h,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(y){throw new ee(k.FETCH_AUDIO_FILE_FAILED,y.toString())}}else p=await new ye((g,y)=>{let v=new FileReader;v.onload=b=>{b.target?g(b.target.result):y(new ee(k.READ_LOCAL_AUDIO_FILE_ERROR))},v.onerror=()=>{y(new ee(k.READ_LOCAL_AUDIO_FILE_ERROR))},v.readAsArrayBuffer(h)});let m=await function(g){let y=Fg();return new ye((v,b)=>{y.decodeAudioData(g,E=>{v(E)},E=>{b(new ee(k.DECODE_AUDIO_FILE_FAILED,E.toString()))})})}(p);return typeof h=="string"&&f&&P7.set(h,m),m}(i,r)}catch(h){return o.onError(h),h.throw(_)}let c=new H7e(i),u=new $7e(l,c,n?wT(n):{},s);return _.info("create buffer source audio track success, trackId:",s),o.onSuccess(u.getTrackId()),u},setAppType:function(e){if(_.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw _.debug("Invalid appType"),new Y(k.INVALID_PARAMS,"invalid app type",e);Wt("APP_TYPE",Math.floor(e))},setLogLevel:function(e){_.setLogLevel(e)},enableLogUpload:function(){M("USE_NEW_LOG")?Wt("UPLOAD_LOG",!0):_.enableLogUpload()},disableLogUpload:function(){M("USE_NEW_LOG")?Wt("UPLOAD_LOG",!1):_.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new Fie},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,r=xe.reportApiInvoke(null,{tag:Nr.TRACER,name:sn.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof Ir||e instanceof bm)){let l=new Y(k.INVALID_TRACK,"the parameter is not a audio track");return r.onError(l),l.throw()}t&&t<1e3&&(t=1e3);let n=e instanceof Ir?e.getTrackLabel():"remote_track",i=e.getVolumeLevel(),a=i,o=i,s=Date.now();return new ye(l=>{let c=setInterval(()=>{let u=e.getVolumeLevel();a=u>a?u:a,o=u<o?u:o;let h=a-o>1e-4,f=Date.now()-s;if(h||f>t){clearInterval(c);let p=h,m={duration:f,deviceLabel:n,maxVolumeLevel:a,result:p};_.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(m))),r.onSuccess(m),l(p)}},200)})},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,r=xe.reportApiInvoke(null,{tag:Nr.TRACER,name:sn.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof sr||e instanceof vm)){let h=new Y(k.INVALID_TRACK,"the parameter is not a video track");return r.onError(h),h.throw()}t&&t<1e3&&(t=1e3);let n=e instanceof sr?e.getTrackLabel():"remote_track",i=e.getMediaStreamTrack(!0),a=document.createElement("video");a.style.width="1px",a.style.height="1px",a.setAttribute("muted",""),a.muted=!0,a.setAttribute("playsinline",""),a.controls=!1,(ni()||yT())&&(a.style.opacity="0.01",a.style.position="fixed",a.style.left="0",a.style.top="0",document.body.appendChild(a)),a.srcObject=new MediaStream([i]),a.play();let o=document.createElement("canvas");o.width=160,o.height=120;let s=0,l=0;try{let h=Date.now();s=await function(f,p,m,g){let y,v=0,b=null;return new ye((E,S)=>{function I(){v>g&&y&&(y(),E(v));let N=m.getContext("2d");if(!N){let z=new Y(k.UNEXPECTED_ERROR,"can not get canvas 2d context.");return _.error(z.toString()),void S(z)}N.drawImage(f,0,0,160,120);let L=N.getImageData(0,0,m.width,m.height),j=Math.floor(L.data.length/3);if(b){for(let z=0;z<j;z+=3)if(L.data[z]!==b[z])return v+=1,void(b=L.data);b=L.data}else b=L.data}setTimeout(()=>{y&&(y(),E(v))},p),y=kM(()=>{I()},30)})}(a,t,o,4),l=Date.now()-h}catch(h){throw r.onError(h),h}OHe===Mt.SAFARI&&(a.pause(),a.remove()),a.srcObject=null;let c=s>4,u={duration:l,changedPicNum:s,deviceLabel:n,result:c};return _.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(u))),r.onSuccess(u),c},setArea:UM,audioElementPlayCenter:ca,resumeAudioContext:function(){ca.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){YHe.processExternalMediaAEC(e)},registerExtensions:function(e){let t=M("PLUGIN_INFO")||[];e.forEach(r=>{"name"in r&&!be(t).call(t,r.name)&&t.push(r.name);let n=r;n.__registered__=!0,n.logger.hookLog=_.extLog,n.reporter.hookApiInvoke=xe.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach(i=>{n.parameters[i]=M(i)})}),r9("PLUGIN_INFO",t)},ChannelMediaRelayError:_p,ChannelMediaRelayEvent:Ac,ChannelMediaRelayState:Ea,RemoteStreamFallbackType:L7e,RemoteStreamType:D7e,ConnectionDisconnectedReason:$t,AudienceLatencyLevelType:p$e,AREAS:At,preload:async function(e,t,r,n){return Gie(e,t,r,n)}});Object.defineProperties(Rr,{onAudioAutoplayFailed:{get:()=>Za.onAudioAutoplayFailed,set:e=>{Za.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>Za.onAutoplayFailed,set:e=>{Za.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>Rr._onSecurityPolicyViolation,set(e){Rr._onSecurityPolicyViolation=e,tae(e)}},__CLIENT_LIST__:{get:()=>M("SHOW_GLOBAL_CLIENT_LIST")?Hu:[]}}),lo.on(Ih.CAMERA_DEVICE_CHANGED,e=>{_.info("camera device changed",JSON.stringify(e)),Rr.onCameraChanged&&Rr.onCameraChanged(e),Rr.safeEmit(ql.CAMERA_CHANGED,e)}),lo.on(Ih.RECORDING_DEVICE_CHANGED,e=>{_.info("microphone device changed",JSON.stringify(e)),Rr.onMicrophoneChanged&&Rr.onMicrophoneChanged(e),Rr.safeEmit(ql.MICROPHONE_CHANGED,e)}),lo.on(Ih.PLAYOUT_DEVICE_CHANGED,e=>{_.debug("playout device changed",JSON.stringify(e)),Rr.onPlaybackDeviceChanged&&Rr.onPlaybackDeviceChanged(e),Rr.safeEmit(ql.PLAYBACK_DEVICE_CHANGED,e)}),ca.onAutoplayFailed=()=>{_.info("detect audio element autoplay failed"),Za.onAudioAutoplayFailed&&Za.onAudioAutoplayFailed()},zt.on("autoplay-failed",()=>{_.info("detect webaudio autoplay failed"),Za.onAudioAutoplayFailed&&Za.onAudioAutoplayFailed(),Rr.safeEmit(ql.AUTOPLAY_FAILED)}),zt.on(Bn.STATE_CHANGE,(e,t)=>{_.info("audio context state changed: ".concat(t," => ").concat(e)),Rr.onAudioContextStateChanged&&Rr.onAudioContextStateChanged(e,t),Rr.safeEmit(ql.AUDIO_CONTEXT_STATE_CHANGED,e,t)}),Kr.on(qp.NETWORK_STATE_CHANGE,(e,t)=>{_.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))}),window&&(window.__ARTC__=Rr);function kh(e,t,r){return e.on(t,r),()=>e.off(t,r)}function SGe(e){try{return e()}catch(t){console.error(t)}}function Dx(e){return()=>e.forEach(SGe)}function TGe(e,t){let r=setTimeout(e,t);return()=>clearTimeout(r)}function YM(){let e,t,r;function n(){if(t){let c=t;t=void 0,c()}}async function i(){if(r){let c=r;r=void 0;try{await c()}catch(u){console.error(u)}}}async function a(c){e=!0,await i();try{r=await c()}catch(u){console.error(u)}e=!1,n()}async function o(){e=!0,await i(),e=!1,n()}function s(c){e?t=()=>a(c):a(c)}function l(){e?t=o:o()}return{run:s,dispose:l}}var Nae=typeof document<"u"?T.useLayoutEffect:T.useEffect;function CGe(e){return e!=null&&typeof e.then=="function"}function Wb(){let e=T.useRef(!1);return T.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function xGe(){let e=Wb();function t(r,n){return new Promise(async(i,a)=>{try{let o=await r;e.current||i(o)}catch(o){e.current?n&&n(o):a(o)}})}return T.useCallback(t,[e])}function Aae(e){let t=xGe(),[r,n]=T.useState();return Nae(()=>{CGe(e)?t(e).then(n):n(e)},[e,t]),r}function Lx(e,t){let r=T.useRef();T.useEffect(()=>{let{run:n,dispose:i}=r.current||(r.current=YM());return n(e),i},t)}function RGe(e,t){let r=e.split("."),n=t.split("."),i=Math.max(r.length,n.length);for(let a=0;a<i;a++){let o=parseInt(r[a]||"0"),s=parseInt(n[a]||"0");if(o>s)return 1;if(o<s)return-1}return 0}var Oae=T.createContext(null);function IGe({client:e,children:t}){return d.jsx(Oae.Provider,{value:e,children:t})}function NGe(e){return T.useContext(Oae)}function Kb(e){let t=NGe();if(!t)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return t}T.createContext(null);function zg(e){let t=Kb(),[r,n]=T.useState(t?t.connectionState==="CONNECTED":!1);return T.useEffect(()=>{if(t){n(t.connectionState==="CONNECTED");let i;return Dx([kh(t,"connection-state-change",a=>{i==null||i(),i=TGe(()=>n(a==="CONNECTED"),0)}),()=>i==null?void 0:i()])}else n(!1)},[t]),r}var hf=class extends Error{constructor(t,r){var e=(...DJe)=>(super(...DJe),ey(this,"rtcMethod"),ey(this,"rtcError"),ey(this,"name","AgoraRTCReactException"),this);e(typeof r=="string"?r:r.message),this.rtcMethod=t,this.rtcError=r}log(t){console[t](this)}};function AGe(e,t=!0,r){let n=Kb(),i=zg(),a=T.useRef(),[o,s]=T.useState(!1),[l,c]=T.useState(0),[u,h]=T.useState(null),f=Wb();return Lx(async()=>{if(f.current||(h(null),c(0),s(!1)),t&&n){try{f.current||s(!0);let{appid:m,channel:g,token:y,uid:v}=typeof e=="function"?await e():e,b=await n.join(m,g,y,v);f.current||c(b)}catch(m){console.error(m),f.current||h(new hf("IAgoraRTCClient.join",m))}f.current||s(!1);let p=a.current||(a.current=YM());return Dx([()=>{p.dispose()},()=>{p.run(()=>n.unpublish(n.localTracks))},()=>{for(let m of n.localTracks)m.isPlaying&&m.stop(),m.close();p.run(()=>n.leave())}])}},[t,r]),{data:l,isLoading:o,isConnected:i,error:u}}function OGe(e,t=!0,r){let n=Kb(),i=zg(),a=T.useRef([]),[o,s]=T.useState(!1),[l,c]=T.useState(null),u=Wb();return Lx(async()=>{if(u.current||(s(!1),c(null)),!n||!i||!t)return;let h=e.filter(Boolean),f=g=>{let y=RGe(Rr.VERSION,"4.18.2")>=0;return y||new hf("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),y?n.mode!=="live"||n.role!=="audience":!0},p=g=>a.current.some(y=>y&&y.getTrackId()===g.getTrackId()),m=g=>f()&&g.enabled&&t&&!p(g);for(let g=0;g<h.length;g++){let y=h[g];if(y&&m(y)){await n.unpublish(a.current.filter(v=>(v==null?void 0:v.trackMediaType)===y.trackMediaType));try{u.current||s(!0),await n.publish(y)}catch(v){console.error(v),u.current||c(new hf("IAgoraRTCClient.publish",v))}u.current||s(!1)}}a.current=h},[i,t,n,e]),{isLoading:o,error:l}}function kGe(e=!0,t={ANS:!0,AEC:!0},r){let n=zg(),[i,a]=T.useState(null),[o,s]=T.useState(!1),[l,c]=T.useState(null),u=Wb();return Lx(async()=>{if(u.current||(s(!1),c(null)),n&&e&&!i){try{u.current||s(!0);let h=await Rr.createMicrophoneAudioTrack(t);u.current||a(h)}catch(h){console.error(h),u.current||c(new hf("IAgoraRTC.createMicrophoneAudioTrack",h))}u.current||s(!1)}!n&&!u.current&&a(null)},[n,e]),{localMicrophoneTrack:i,isLoading:o,error:l}}function PGe(e=!0,t,r){let n=zg(),[i,a]=T.useState(null),[o,s]=T.useState(!1),[l,c]=T.useState(null),u=Wb();return Lx(async()=>{if(u.current||(s(!1),c(null)),n&&e&&!i){try{u.current||s(!0);let h=await Rr.createCameraVideoTrack(t);u.current||a(h)}catch(h){console.error(h),u.current||c(new hf("IAgoraRTC.createCameraVideoTrack",h))}u.current||s(!1)}!n&&!u.current&&a(null)},[n,e]),{localCameraTrack:i,isLoading:o,error:l}}function n9(e,t,r){let n=Kb(),i=t==="audio"?"audioTrack":"videoTrack",[a,o]=T.useState(e&&e[i]),s=zg(),l=T.useRef(),[c,u]=T.useState(!1),[h,f]=T.useState(null);return T.useEffect(()=>{if(!e||!s)return;let p=!1;p||f(null);let m=t==="audio"?"hasAudio":"hasVideo",g=e.uid,y=async(E,S)=>{if(E[i]&&n.remoteUsers.some(({uid:I})=>E.uid===I))try{p||u(!0),await n.unsubscribe(E,S)}catch(I){p||f(new hf("IAgoraRTCClient.unsubscribe",I)),console.error(I)}p||(o(void 0),u(!1))},v=async(E,S)=>{try{!E[i]&&n.remoteUsers.some(({uid:I})=>E.uid===I)&&(p||u(!0),await n.subscribe(E,S)),p||o(E[i])}catch(I){p||f(new hf("IAgoraRTCClient.subscribe",I)),console.error(I)}p||u(!1)},b=l.current||(l.current=YM());return!e[i]&&e[m]?b.run(()=>v(e,t)):o(e[i]),Dx([()=>{p=!0,b.dispose()},kh(n,"user-published",(E,S)=>{E.uid===g&&S===t&&b.run(()=>v(E,t))}),kh(n,"user-unpublished",(E,S)=>{E.uid===g&&S===t&&b.run(()=>y(E,t))})])},[s,n,e,t,i]),{track:a,isLoading:c,error:h}}function DGe(e){let t=Kb(),[r,n]=T.useState(t?t.remoteUsers:[]);return T.useEffect(()=>{if(t){let i=()=>n(t.remoteUsers.slice());return Dx([kh(t,"user-joined",i),kh(t,"user-left",i),kh(t,"user-published",i),kh(t,"user-unpublished",i)])}},[t]),r}var kae=T.createContext(void 0);function Pae(e,t,r,n){let i=T.useContext(kae);T.useEffect(()=>{if(e)return n&&t?e.play(n,r||void 0):e.stop(),i?(i.onMount(e),()=>i.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,n,t,i,r])}function Dae(e,t){let r=T.useContext(kae);Nae(()=>{if(e)return t?e.play():e.stop(),r?(r.onMount(e),()=>r.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,t,r])}function LGe({track:e,play:t=!1,volume:r,disabled:n,muted:i,children:a}){let o=Aae(e);return Dae(o,t),T.useEffect(()=>{o&&r!=null&&o.setVolume(r)},[o,r]),T.useEffect(()=>{o&&n!=null&&o.setEnabled(!n).catch(console.warn)},[n,o]),T.useEffect(()=>{o&&i!=null&&o.setMuted(i).catch(console.warn)},[i,o]),a?d.jsx(d.Fragment,{children:a}):null}var Lae={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},jae={width:"100%",height:"100%"},XM={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},jx=(e,t)=>T.useMemo(()=>({...e,...t}),[e,t]);function jGe({track:e,play:t,disabled:r,muted:n,style:i,videoPlayerConfig:a,...o}){let s=jx(jae,i),[l,c]=T.useState(null),u=Aae(e);return Pae(u,t,a,l),T.useEffect(()=>{u&&r!=null&&u.setEnabled(!r).catch(console.warn)},[r,u]),T.useEffect(()=>{u&&n!=null&&u.setMuted(n).catch(console.warn)},[n,u]),d.jsx("div",{...o,ref:c,style:s})}var MGe={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},UGe={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function Mae({cover:e}){return d.jsx("div",{style:XM,children:typeof e=="string"?d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{...MGe,backgroundImage:`url(${e})`}}),d.jsx("img",{src:e,style:UGe})]}):e()})}function FGe({micOn:e,cameraOn:t,audioTrack:r,videoTrack:n,playAudio:i,playVideo:a,volume:o,cover:s,children:l,style:c,...u}){let h=jx(Lae,c);return a=a??!!t,i=i??!!e,d.jsxs("div",{...u,style:h,children:[d.jsx(jGe,{disabled:!t,play:a,track:n}),d.jsx(LGe,{disabled:!e,play:i,track:r,volume:o}),s&&!t&&d.jsx(Mae,{cover:s}),d.jsx("div",{style:XM,children:l})]})}function VGe({track:e,play:t=!1,playbackDeviceId:r,volume:n,children:i}){return Dae(e,t),T.useEffect(()=>{e&&r!=null&&e.setPlaybackDevice(r).catch(console.warn)},[e,r]),T.useEffect(()=>{e&&n!=null&&e.setVolume(n)},[e,n]),i?d.jsx(d.Fragment,{children:i}):null}function BGe({track:e,play:t,style:r,videoPlayerConfig:n,...i}){let a=jx(jae,r),[o,s]=T.useState(null);return Pae(e,t,n,o),d.jsx("div",{...i,ref:s,style:a})}function $Ge({user:e,playVideo:t,playAudio:r,playbackDeviceId:n,volume:i,cover:a,style:o,children:s,videoPlayerConfig:l,...c}){let u=jx(Lae,o),{track:h}=n9(e,"video"),{track:f}=n9(e,"audio");return t=t??(e==null?void 0:e.hasVideo),r=r??(e==null?void 0:e.hasAudio),d.jsxs("div",{...c,style:u,children:[d.jsx(BGe,{play:t,track:h,videoPlayerConfig:l}),d.jsx(VGe,{play:r,playbackDeviceId:n,track:f,volume:i}),a&&!t&&d.jsx(Mae,{cover:a}),d.jsx("div",{style:XM,children:s})]})}var HGe=class{constructor(){ey(this,"appType",1001);Rr.setAppType(this.appType)}};new HGe;var zGe=Rr;const CD=zGe.createClient({mode:"rtc",codec:"vp8"});function GGe(){const e=new URLSearchParams(location.search),t=e.get("doctorId"),r=e.get("patientId");return d.jsxs("div",{className:"w-screen h-screen flex flex-col gap-2",children:[d.jsx("h1",{className:"w-full h-auto bg-blue-500 p-2 text-lg font-medium flex justify-center shadow-lg",children:"Consultation"}),d.jsx("div",{className:"flex flex-1 w-full p-2",children:d.jsx(IGe,{client:CD,children:d.jsx("div",{className:"w-full h-[80vh]",children:d.jsx(WGe,{doctorId:t,patientId:r})})})})]})}function WGe(e){const t="7b2118df626f4986907f6d989f14fa9d",r=zg(),[n,i]=T.useState(!0),[a,o]=T.useState(!0),[s,l]=T.useState(!0),{localMicrophoneTrack:c}=kGe(a),{localCameraTrack:u}=PGe(s),{doctorId:h,patientId:f}=e;AGe({appid:t,channel:`consulation_${h}_${f}`,token:null},n),OGe([c,u]),T.useEffect(()=>{CD.on("user-joined",m=>{console.log("userrr",m)}),CD.on("user-published",(m,g)=>{console.log("user published",m.uid,g)})},[]);const p=DGe();return d.jsx("div",{className:"w-full h-[88vh]  flex ",children:r&&d.jsxs("div",{className:"w-screen h-full flex gap-2 ",children:[d.jsxs("div",{className:"w-[80%] h-auto grid grid-cols-1 ",children:[p.map((m,g)=>d.jsx("div",{className:"w-full h-[80vh] ",children:d.jsx($Ge,{user:m,className:"rounded-lg  "},g)},g)),d.jsx("div",{className:"h-full w-full px-5 py-2 flex flex-col justify-end",children:d.jsx(KGe,{setCameraOn:l,setMicOn:o,cameraOn:s,micOn:a,setCalling:i})})]}),d.jsx("div",{className:"w-[20%] h-full flex flex-col justify-end",children:d.jsx("div",{className:"w-full h-[30vh]",children:d.jsx(FGe,{cameraOn:s,micOn:a,videoTrack:u,audioTrack:c,className:"rounded-lg",children:d.jsx("samp",{className:"pr-2 flex justify-end text-white text-2xl",children:"you"})})})})]})})}function KGe(e){const{setMicOn:t,setCameraOn:r,micOn:n,cameraOn:i,setCalling:a}=e;return d.jsx("div",{className:"w-full h-[10vh] bg-white bg-opacity-20 rounded-lg  flex flex-between gap-2 ",children:d.jsxs("div",{className:"w-full h-full flex justify-center gap-4 p-4",children:[d.jsx("div",{className:`callButton ${n?"bg-red-500":"bg-white"}  w-[10%] h-full flex items-center justify-center`,onClick:o=>t(!n),children:d.jsx(wDe,{})}),d.jsx("button",{className:`callButton ${i?"bg-red-500":"bg-white"}  w-[10%] h-full flex items-center justify-center`,onClick:o=>r(!i),children:d.jsx(eIe,{})}),d.jsx("button",{type:"button",className:"callButton bg-red-500  w-[10%] h-full flex items-center justify-center",onClick:o=>a(s=>!s),children:d.jsx(vDe,{})})]})})}function qGe(){const{firstName:e}=Yr(t=>t.patient);return d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:d.jsxs("div",{className:"doctor details flex flex-col gap-4",children:[d.jsxs("h1",{className:"w-[60%] h-[20vh] flex item-center p-2 rounded-lg bg-red-400 ",children:[`you have a meeting ${e}`,"  "]}),d.jsx("div",{className:"content w-full h-full flex"})]})})})}function YGe(){return d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full flex flex-col p-2",children:d.jsxs("div",{className:"meetingAlert w-full h-full flex flex-col gap-2",children:[d.jsx("h2",{className:"w-[80%] h-[8vh] text-lg font-medium flex items-center pl-10 bg-blue-500",children:"Notifications"}),d.jsx("div",{className:"alerts flex flex-col hap-2",children:d.jsx(qGe,{})})]})})})}nt.extend($i);function XGe(e){var n,i,a,o,s,l;const{booking:t}=e,r=Zt();return console.log("test date",nt().add(2,"hour").isBefore(nt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))),d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:(n=t==null?void 0:t.patientId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{children:(i=t==null?void 0:t.patientId)==null?void 0:i.firstName})}),d.jsx("div",{className:"location w-full h-auto",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(os,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:(o=(a=t==null?void 0:t.patientId)==null?void 0:a.addressId)==null?void 0:o.place}),d.jsx("span",{className:"flex items-center",children:(l=(s=t==null?void 0:t.patientId)==null?void 0:s.addressId)==null?void 0:l.district})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[d.jsx(Ib,{}),d.jsx("span",{children:`Completed On ${t==null?void 0:t.slotDate} ${nt(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),d.jsxs("div",{className:"w-full h-auto flex flex-between gap-4",children:[d.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:c=>r(`/doctor/bookings/prescription/${t.patientId.userId}/${t._id}`),children:"Add Prescription"}),d.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",onClick:c=>r(`/doctor/bookings/labtest/${t.patientId.userId}/${t._id}`),children:"Request Lab Tests"}),d.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",onClick:c=>r(`/doctor/bookings/medicine/${t.patientId._id}/${t._id}`),children:"Request Medicines"})]})]})]})})}function JGe(){const[e,t]=T.useState([]),r=async()=>{const n=await w2e();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-4 p-5",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[90%] h-[25vh]",children:d.jsx(XGe,{booking:n})},i))})})}const JM="https://hcompanion.onrender.com/api",QM=sessionStorage.getItem("token"),QGe=async({patientId:e})=>{var t,r,n;try{return(await ce.post(`${JM}/doctor/patient/getDetails`,{patientId:e},{headers:{authorization:`bearer ${QM}`}})).data.patientDetails}catch(i){return console.log(i),((t=i==null?void 0:i.response)==null?void 0:t.status)=="500"&&((n=(r=i==null?void 0:i.response)==null?void 0:r.data)!=null&&n.errorServer)&&Q.fire("Server Error","","error"),!1}},ZGe=async({patientId:e,disease:t,prescription:r,bookingId:n})=>{var i,a,o;try{const s=await ce.post(`${JM}/doctor/patient/prescription/add`,{patientId:e,disease:t,prescription:r,bookingId:n},{headers:{authorization:`bearer ${QM}`}});return!0}catch(s){return console.log(s),((i=s==null?void 0:s.response)==null?void 0:i.status)=="500"&&((o=(a=s==null?void 0:s.response)==null?void 0:a.data)!=null&&o.errorServer)&&Q.fire("Server Error","","error"),!1}},e9e=async({bookingId:e})=>{var t,r,n;try{const i=await ce.post(`${JM}/doctor/patient/prescription/onLoad/view`,{bookingId:e},{headers:{authorization:`bearer ${QM}`}});return console.log(i),i.data.prescription}catch(i){return console.log(i),((t=i==null?void 0:i.response)==null?void 0:t.status)=="500"&&((n=(r=i==null?void 0:i.response)==null?void 0:r.data)!=null&&n.errorServer)&&Q.fire("Server Error","","error"),!1}};function t9e(){const[e,t]=T.useState(void 0),[r,n]=T.useState(void 0),{patientId:i,bookingId:a}=ug(),o=Sr({initialValues:{disease:"",prescription:""},validationSchema:"",onSubmit:async(l,c)=>{await ZGe({...l,patientId:r,bookingId:a})&&Q.fire("Added Prescription","","success")}}),s=async()=>{const l=await QGe({patientId:i});n(l._id);const c=await e9e({bookingId:a});c&&(o.setFieldValue("disease",c.disease),o.setFieldValue("prescription",c.prescription)),t(l)};return T.useEffect(()=>{s()},[]),d.jsx("div",{className:"w-full h-full flex ",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:d.jsxs("div",{className:"patient profile w-full h-full flex flex-col gap-4",children:[d.jsxs("div",{className:"w-full h-[10vh] flex gap-10 items-center",children:[d.jsx("div",{className:"w-[5vw] h-[10vh] ",children:d.jsx("img",{src:e==null?void 0:e.profileImage,alt:"patientprofile",className:"w-full h-full rounded-full"})}),d.jsx("div",{className:"details w-full h-full flex flex-col justify-center ",children:d.jsx("h1",{className:"w-full h-[70%] pl-10 bg-blue-500 flex items-center text-lg font-medium",children:`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName}`})})]}),d.jsx("div",{className:"prescription w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex justify-center bg-black bg-opacity-30",children:d.jsxs("form",{onSubmit:o.handleSubmit,className:"w-[70%] h-full p-4 flex flex-col gap-5",children:[d.jsx("h1",{className:"w-full h-[5vh] pl-10 bg-orange-500 flex items-center text-lg font-medium",children:"Prescription"}),d.jsx(ie,{variant:"filled",label:"disease",name:"disease",value:o.values.disease,onChange:o.handleChange,onBlur:o.handleBlur}),d.jsx("textarea",{rows:"10",placeholder:"Prescription",name:"prescription",value:o.values.prescription,onChange:o.handleChange,onBlur:o.handleBlur}),d.jsx("button",{className:"bg-orange-500 w-[50%] h-[7vh]",type:"submit",children:"Add"})]})})})]})})})}const Uae="https://hcompanion.onrender.com/api",r9e=sessionStorage.getItem("token"),n9e=async()=>{try{const e=await ce.get(`${Uae}/patient/medicines/getAllMedicines`);return console.log(e),e.data.medicines}catch(e){console.log(e)}},i9e=async({patientId:e,pharmacyInventoryId:t,bookingId:r})=>{var n,i,a;try{const o=await ce.post(`${Uae}/doctor/patient/medicine/request`,{patientId:e,pharmacyInventoryId:t,bookingId:r},{headers:{Authorization:`bearer ${r9e}`}});return console.log(o),!0}catch(o){return console.log(o),((n=o==null?void 0:o.response)==null?void 0:n.status)=="500"&&((a=(i=o==null?void 0:o.response)==null?void 0:i.data)!=null&&a.errorServer)&&Q.fire("Server Error","","error"),!1}};function a9e(e){const{medicine:t,patientId:r,bookingId:n}=e,i=async(a,o)=>{await i9e({patientId:r,bookingId:n,pharmacyInventoryId:o._id})&&Q.fire("Requested Medicine","","success")};return d.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:d.jsxs("div",{className:"h-full w-full flex flex-col ",children:[d.jsx("div",{className:"w-full h-[50%] ",children:d.jsx("img",{src:t.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[d.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t.medicineId.medicineName}),d.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:d.jsx("div",{className:"price w-full h-[5vh]",children:d.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[d.jsx(xg,{})," ",t.sellingPrice]})})})]}),d.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:a=>i(a,t),children:"Prescribe Medicine"})})]})]})})}function o9e(){Zt();const{patientId:e,bookingId:t}=ug(),[r,n]=T.useState([]),i=async()=>{const a=await n9e();a.length>0&&await n(a)};return T.useEffect(()=>{i()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"medicinesList w-full h-full flex flex px-20 py-5 ",children:d.jsx("div",{className:"w-full h-full p-4 grid grid-cols-3 justify-items-center gap-y-10 ",children:r&&r.length>0?r.map((a,o)=>d.jsx("div",{className:"w-auto h-[40vh] flex flex-col cursor-pointer hover:bg-slate-400 rounded-lg",children:d.jsx(a9e,{medicine:a,patientId:e,bookingId:t},a._id)},a._id)):d.jsx("span",{className:"text-lg font-medium",children:"No Medicines.....:)"})})})})}function s9e(e){const{order:t}=e,r=async(n,i)=>{const a=await mj({amount:t.doctorId.bookingPrice});if(a){const o=zIe({order:a,medicineOrder:t});await new Razorpay(o).open()}};return d.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:d.jsxs("div",{className:"h-full w-full flex flex-col ",children:[d.jsx("div",{className:"w-full h-[50%] ",children:d.jsx("img",{src:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[d.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t.pharmacyInventoryId.medicineId.medicineName}),d.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:d.jsx("div",{className:"price w-full h-[5vh]",children:d.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[d.jsx(xg,{})," ",t.pharmacyInventoryId.sellingPrice]})})})]}),d.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:n=>r(n,t.pharmacyInventoryId._id),children:"Order Medicine"})})]})]})})}function l9e(){const[e,t]=T.useState([]),r=async()=>{const n=await iIe();console.log(n),n&&t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-2",children:[d.jsx("h1",{className:"w-full h-[6vh] bg-blue-500 flex items-center pl-10",children:"Prescribed Medicines"}),d.jsx("div",{className:"w-full h-full flex gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>d.jsx("div",{className:"w-auto h-auto flex",children:d.jsx(s9e,{order:n})},i))})]})})}function c9e(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"requests",children:"Requests"}),d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"ordered",children:"Ordered"})]})})}function u9e(){return d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[d.jsx("div",{className:"header w-full h-[5vh]",children:d.jsx(c9e,{})}),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx(oi,{})})]})}function d9e(e){var r,n;const{order:t}=e;return d.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-xl rounded-lg border  ",children:d.jsxs("div",{className:"h-full w-full flex flex-col ",children:[d.jsx("div",{className:"w-full h-[50%] ",children:d.jsx("img",{src:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[d.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:(n=(r=t==null?void 0:t.pharmacyInventoryId)==null?void 0:r.medicineId)==null?void 0:n.medicineName}),d.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:d.jsx("div",{className:"price w-full h-[5vh]",children:d.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[d.jsx(xg,{})," ",t.pharmacyInventoryId.sellingPrice]})})})]}),d.jsx("div",{className:"w-full h-[8vh] flex  px-2 py-1 mb-2 ",children:d.jsx("h2",{className:"text-md font-bold text-emerald-500 w-full p-5 bg-blue-100",children:(t==null?void 0:t.orderStatus)=="1"?"Pending Delivery":"Delivered"})})]})]})})}function h9e(){const[e,t]=T.useState([]),r=async()=>{const n=await oIe();console.log(n),n&&t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:d.jsx("div",{className:"w-full h-full grid grid-cols-3 gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>d.jsx("div",{className:"w-auto h-auto flex",children:d.jsx(d9e,{order:n})},i))})})})}function f9e(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"requested",children:"Received"}),d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"delivered",children:"Delivered"})]})})}function p9e(){return d.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[d.jsx("div",{className:"w-full h-[8vh] p-5",children:d.jsx(f9e,{})}),d.jsx("div",{className:"w-full h-full mt-5 pb-2",children:d.jsx(oi,{})})]})}const ZM="https://hcompanion.onrender.com/api",eU=sessionStorage.getItem("token"),m9e=async()=>{try{const e=await ce.get(`${ZM}/pharmacy/order/medicines/requests`,{headers:{Authorization:`bearer ${eU}`}});return console.log(e),e.data.medicines}catch(e){return console.log(e),!1}},g9e=async({pharmacyInventoryId:e})=>{try{const t=await ce.post(`${ZM}/pharmacy/order/medicines/deliver`,{pharmacyInventoryId:e},{headers:{Authorization:`bearer ${eU}`}});return!0}catch(t){return console.log(t),!1}},y9e=async()=>{try{const e=await ce.get(`${ZM}/pharmacy/order/medicines/delivered`,{headers:{Authorization:`bearer ${eU}`}});return console.log("delivered Medicines",e),e.data.medicines}catch(e){return console.log(e),!1}};function v9e(e){const{order:t}=e,r=async n=>{await g9e({pharmacyInventoryId:t.pharmacyInventoryId})&&Q.fire("Updated as Delivered","","success")};return d.jsx("div",{className:"w-full h-full flex flex-col shadow-xl rounded-lg border ",children:d.jsxs("div",{className:"h-full w-full flex gap-2 ",children:[d.jsx("div",{className:"w-[30%] h-full ",children:d.jsx("img",{src:t==null?void 0:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-full flex flex-1 flex-col gap-4 mt-2 p-1 ",children:[d.jsxs("div",{className:"w-full h-auto flex gap-10 items-center p-2 bg-blue-500",children:[d.jsx("div",{className:"w-[3vw] h-[6vh]",children:d.jsx("img",{src:t.patientId.profileImage,alt:"",className:"w-full h-full rounded-full"})}),d.jsxs("div",{className:"w-auto h-auto",children:[d.jsx("h2",{className:"text-lg font-medium",children:`${t.patientId.firstName} ${t.patientId.lastName}`}),d.jsx("h2",{})]})]}),d.jsx("div",{className:"content w-full h-[10vh] flex flex-col pl-4 gap-2  ",children:d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t==null?void 0:t.pharmacyInventoryId.medicineId.medicineName})}),d.jsx("div",{className:"w-full h-[8vh] flex  px-2 py-1 mb-2 ",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:n=>r(),children:"Delivered"})})]})]})})}function b9e(){const[e,t]=T.useState([]),r=async()=>{const n=await m9e();n&&t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex p-2",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-5",children:d.jsx("div",{className:"orders w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full grid grid-cols-1",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[80%] h-[30vh]",children:d.jsx(v9e,{order:n})},i))})})})})}function w9e(e){const{order:t}=e;return d.jsx("div",{className:"w-full h-full flex flex-col shadow-xl rounded-lg border ",children:d.jsxs("div",{className:"h-full w-full flex gap-2 ",children:[d.jsx("div",{className:"w-[30%] h-full ",children:d.jsx("img",{src:t==null?void 0:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-full flex flex-1 flex-col gap-4 mt-2 p-1 ",children:[d.jsxs("div",{className:"w-full h-auto flex gap-10 items-center p-2 bg-blue-500",children:[d.jsx("div",{className:"w-[3vw] h-[6vh]",children:d.jsx("img",{src:t.patientId.profileImage,alt:"",className:"w-full h-full rounded-full"})}),d.jsxs("div",{className:"w-auto h-auto",children:[d.jsx("h2",{className:"text-lg font-medium",children:`${t.patientId.firstName} ${t.patientId.lastName}`}),d.jsx("h2",{})]})]}),d.jsx("div",{className:"content w-full h-[10vh] flex flex-col pl-4 gap-2  ",children:d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t==null?void 0:t.pharmacyInventoryId.medicineId.medicineName})}),d.jsx("div",{className:"w-full h-[8vh] flex  px-2 py-1 mb-2 ",children:d.jsx("h2",{className:"text-md font-bold text-emerald-500 w-full p-5 bg-blue-100",children:"Delivered"})})]})]})})}function E9e(){const[e,t]=T.useState([]),r=async()=>{const n=await y9e();n&&t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex p-2",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-5",children:d.jsx("div",{className:"orders w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full grid grid-cols-1",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[80%] h-[30vh]",children:d.jsx(w9e,{order:n})},i))})})})})}const Gg="https://hcompanion.onrender.com/api",tU=sessionStorage.getItem("token"),_9e=async()=>{var e,t,r;try{return(await ce.get(`${Gg}/doctor/patient/test/allTests`,{headers:{Authorization:`bearer ${tU}`}})).data.tests}catch(n){return console.log(n),((e=n==null?void 0:n.response)==null?void 0:e.status)=="500"&&((r=(t=n==null?void 0:n.response)==null?void 0:t.data)!=null&&r.errorServer)&&Q.fire("Server Error","","error"),!1}},S9e=async({testId:e})=>{try{const t=await ce.post(`${Gg}/doctor/patient/test/testDetails`,{testId:e},{headers:{Authorization:`bearer ${tU}`}});return console.log(t.data),t.data.testAndLabs}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):t.status=="401"?Q.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&Q.fire({icon:"warning",text:"Test can't be found at database"}),!1}},T9e=async({labTestId:e,patientId:t,bookingId:r})=>{var n,i;try{const a=await ce.post(`${Gg}/doctor/patient/test/request`,{labTestId:e,patientId:t,bookingId:r},{headers:{Authorization:`bearer ${tU}`}});return!0}catch(a){return console.log(a),a.status=="500"&&((i=(n=a==null?void 0:a.response)==null?void 0:n.data)!=null&&i.errorServer)?Q.fire({icon:"error",text:"Server Issue"}):a.status=="400"&&a.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):a.status=="401"?Q.fire({icon:"warning",text:"Log In"}):a.status=="404"&&a.response.data.errorTestPresent?Q.fire({icon:"warning",text:"Test can't be found at database"}):a.status=="404"&&a.response.data.errorTestOrdered&&Q.fire({icon:"warning",text:"Test Already Ordered"}),!1}},C9e=async()=>{try{const e=await ce.get(`${Gg}/doctor/patient/test/getOrderedTests`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("ordered tests",e.data.orders),e.data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):e.status=="401"?Q.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorNoPatient&&Q.fire({icon:"warning",text:"Patient Can't be found"}),!1}},x9e=async({testOrderId:e})=>{try{return(await ce.post(`${Gg}/doctor/patient/test/completed/details`,{testOrderId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.order}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):t.status=="401"?Q.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&Q.fire({icon:"error",text:"Issue at the Database"}),!1}},R9e=async({testOrderId:e})=>{try{const t=await ce.post(`${Gg}/doctor/patient/test/completed/result`,{testOrderId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.result}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?Q.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?Q.fire({icon:"warning",text:"Log In"}):t.status=="401"?Q.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&Q.fire({icon:"warning",text:"Test can't be found at database"}),!1}};function I9e(e){var a;const{test:t,patientId:r,bookingId:n}=e,i=async o=>{await T9e({labTestId:t._id,patientId:r,bookingId:n})&&Q.fire("Requested Test for the patient","","success")};return d.jsx("div",{className:"flex w-full h-full ",children:d.jsxs("div",{className:"flex h-full w-[40vw] gap-6 bg-white  border rounded-lg p-4 shadow-lg",children:[d.jsx("div",{className:"image w-[20%] h-[90%]",children:d.jsx("img",{src:"/normalUser.png",alt:"image",className:"object-fit w-full h-full"})}),d.jsxs("div",{className:"details h-full w-full flex flex-1 flex-col gap-4 ",children:[d.jsx("h1",{children:(a=t==null?void 0:t.labId)==null?void 0:a.userId.username}),d.jsx("div",{className:"location"}),d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx(os,{}),d.jsx("span",{children:"Koovappally"})]}),d.jsxs("div",{className:"flex gap-2 w-full h-auto",children:[(t==null?void 0:t.atHome)&&d.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-orange-400 p-3 rounded-md flex gap-4 items-center",children:[d.jsx("span",{children:" Home Service"}),d.jsxs("span",{className:"flex gap-2 items-center",children:[d.jsx(rT,{}),d.jsx("h6",{children:t==null?void 0:t.priceHome})]})]}),(t==null?void 0:t.atLab)&&d.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-blue-400 p-3 rounded-md flex gap-4 items-center",children:[d.jsx("span",{children:" Lab Service"}),d.jsxs("span",{className:"flex gap-2 items-center",children:[d.jsx(rT,{}),d.jsx("h6",{children:t==null?void 0:t.priceLab})]})]}),d.jsx("button",{className:"w-[30%] text-white text-md font-medium bg-emerald-400 p-3 rounded-md flex gap-4 items-center",onClick:o=>i(),children:"Request Test"})]})]})]})})}function N9e(){const[e,t]=T.useState([]),[r,n]=T.useState(void 0),{patientId:i,bookingId:a,testId:o}=ug();console.log("testId",o);const s=async()=>{const l=await S9e({testId:o});t(l),n(l[0].testId)};return T.useEffect(()=>{s()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"screen w-full h-full flex  gap-2 justify-between ",children:[d.jsxs("div",{className:"w-[56%] h-[80vh] flex gap-10 border p-4 shadow-lg items-center bg-emerald-400 bg-opacity-10 bg-blur-sm",children:[d.jsx("div",{className:"image h-[40vh] w-[70%]",children:d.jsx("img",{src:r==null?void 0:r.testImage,alt:"testImage",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"testDetails flex flex-col gap-2 w-full h-full justify-center",children:[d.jsxs("div",{className:"description w-full h-[10vh] border shadow-lg flex flex-col gap-2 px-1",children:[d.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Name"}),d.jsx("span",{className:"text-lg font-medium",children:r==null?void 0:r.testName.toUpperCase()})]}),d.jsxs("div",{className:"testDescription flex flex-col gap-2 border w-full h-[40vh] shadow-lg px-1",children:[d.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Description"}),d.jsx("span",{className:"h-[10vh] p-2",children:r==null?void 0:r.testDescription})]})]})]}),d.jsxs("div",{className:"laboratorys bg-black bg-opacity-10 p-3 flex flex-col gap-4 w-auto h-full border  ",children:[d.jsx("h2",{className:"text-lg text-white  font-medium flex justify-center bg-blue-500 py-2",children:"Labs where the service available"}),d.jsx("div",{className:"labs flex flex-col gap-4 h-full w-full overflow-y-auto",children:(e==null?void 0:e.length)>0&&e.map((l,c)=>d.jsx("div",{className:"w-full h-auto",children:d.jsx(I9e,{test:l,patientId:i,bookingId:a})},c))})]})]})})}function A9e(e){const{test:t,patientId:r,bookingId:n}=e;return d.jsx("div",{className:"flex w-auto h-auto border rounded-lg shadow-lg shadow-emerald-300 hover:bg-black hover:bg-opacity-10 py-5 px-3 cursor-pointer   ",children:d.jsxs("div",{className:"w-[30vw] h-auto flex flex-row gap-5 ",children:[d.jsx("div",{className:"image w-[50%] h-full flex justify-center items-center",children:d.jsx("img",{src:t==null?void 0:t.testImage,alt:"testImage",className:"object-cover w-full h-[70%]"})}),d.jsxs("div",{className:"w-full h-full content flex flex-col gap-5 bg-black bg-opacity-10 p-4",children:[d.jsx("h2",{className:"flex justify-center text-white bg-blue-500 py-3 font-medium",children:t==null?void 0:t.testName}),d.jsx("textarea",{name:"testDescription",id:"id_testDescripion",value:t==null?void 0:t.testDescription,rows:"10",className:"flex text-sm cursor-pointer border-0",disabled:!0})]})]})})}function O9e(){const[e,t]=T.useState([]),r=Zt(),{patientId:n,bookingId:i}=ug(),a=async()=>{const o=await _9e();t(o)};return T.useEffect(()=>{a()},[]),d.jsx("div",{className:"flex flex-col w-full h-full",children:d.jsx("div",{className:"w-full h-full grid grid-cols-2 gap-2 justify-items-start",children:(e==null?void 0:e.length)>0&&e.map((o,s)=>d.jsx("div",{className:"w-auto h-auto cursor-pointer",onClick:()=>r(`/doctor/bookings/labtest/testDetails/${n}/${i}/${o._id}`),children:d.jsx(A9e,{test:o,patientId:n,bookingId:i})},s))})})}function k9e(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"requests",children:"Requests"}),d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"ordered",children:"Ordered"})]})})}function P9e(){return d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[d.jsx("div",{className:"header w-full h-[5vh]",children:d.jsx(k9e,{})}),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx(oi,{})})]})}function D9e(e){var n,i,a,o,s,l,c,u,h,f,p,m;const{testOrder:t}=e;console.log(t);const r=async(g,y)=>{const v=await mj({amount:100});if(v){const b=GIe({order:v,testOrder:t});await new Razorpay(b).open()}};return d.jsx("div",{className:"w-full h-full flex ",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("div",{className:"img w-[30%] h-full",children:d.jsx("img",{src:(i=(n=t==null?void 0:t.labTestId)==null?void 0:n.testId)==null?void 0:i.testImage,alt:"test image",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[d.jsx("div",{className:"w-full h-auto flex ",children:d.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[d.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(o=(a=t==null?void 0:t.labTestId)==null?void 0:a.testId)==null?void 0:o.testName}),d.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),d.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[d.jsx("div",{className:"description w-[60%] bg-black bg-opacity-20 p-2",children:d.jsx("h2",{className:"w-full h--full",children:(l=(s=t==null?void 0:t.labTestId)==null?void 0:s.testId)==null?void 0:l.testDescription})}),d.jsxs("div",{className:"pharmacy w-[40%] flex flex-col gap-2 p-1",children:[d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((u=(c=t==null?void 0:t.labTestId)==null?void 0:c.labId)==null?void 0:u.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(f=(h=t==null?void 0:t.labTestId)==null?void 0:h.labId)==null?void 0:f.laboratoryName})]}),d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(Rb,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:"koovappally"})]})}),d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((p=t==null?void 0:t.doctorId)==null?void 0:p.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`prescribed by the doctor ${(m=t==null?void 0:t.doctorId)==null?void 0:m.firstName}`})]})]})]})]})]}),d.jsx("div",{className:"w-full h-[5vh] flex gap-2",children:d.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",onClick:g=>r(g,t._id),children:"Order Test"})})]})})}function L9e(){const[e,t]=T.useState([]),r=async()=>{const n=await UIe();console.log(n),n&&await t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"requestedTests flex flex-col gap-4",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[90%] h-auto",children:d.jsx(D9e,{testOrder:n})},i))})})})}function j9e(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"test/ordered",children:"Received"}),d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"test/completed",children:"Serviced"})]})})}function M9e(){return d.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[d.jsx("div",{className:"w-full h-[8vh] p-5",children:d.jsx(j9e,{})}),d.jsx("div",{className:"w-full h-full mt-5 pb-2",children:d.jsx(oi,{})})]})}function U9e(e){var n,i,a,o,s,l,c,u,h,f,p,m,g,y,v,b;const{testOrder:t}=e;console.log(t);const r=async(E,S)=>{await QDe({testOrderId:S})&&Q.fire("Successfully Updated as completed","","success")};return d.jsx("div",{className:"w-full h-full flex ",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("div",{className:"img w-[30%] h-full",children:d.jsx("img",{src:(i=(n=t==null?void 0:t.labTestId)==null?void 0:n.testId)==null?void 0:i.testImage,alt:"test image",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[d.jsx("div",{className:"w-full h-auto flex ",children:d.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[d.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(o=(a=t==null?void 0:t.labTestId)==null?void 0:a.testId)==null?void 0:o.testName}),d.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),d.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[d.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:d.jsx("h2",{className:"w-full h--full",children:(l=(s=t==null?void 0:t.labTestId)==null?void 0:s.testId)==null?void 0:l.testDescription})}),d.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((u=(c=t==null?void 0:t.labTestId)==null?void 0:c.labId)==null?void 0:u.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(f=(h=t==null?void 0:t.labTestId)==null?void 0:h.labId)==null?void 0:f.laboratoryName})]}),d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((p=t==null?void 0:t.patientId)==null?void 0:p.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Ordered by ${(m=t==null?void 0:t.patientId)==null?void 0:m.firstName}`})]})]}),d.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(Rb,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(y=(g=t==null?void 0:t.patientId)==null?void 0:g.addressId)==null?void 0:y.place})]})}),d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(YC,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(b=(v=t==null?void 0:t.patientId)==null?void 0:v.userId)==null?void 0:b.phone})]})})]})]})]})]}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-2",children:[d.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",onClick:E=>r(E,t._id),children:"Completed"}),d.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",children:"Upload test Result"})]})]})})}function F9e(){const[e,t]=T.useState([]),r=async()=>{const n=await JDe();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"orders w-full h-full flex flex-col gap-5 p-5",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[90%] h-auto",children:d.jsx(U9e,{testOrder:n})},i))})})})}function V9e(e){var o,s,l,c,u,h,f,p,m,g,y,v,b,E,S,I;const[t,r]=T.useState(!1),{testOrder:n}=e;console.log(n);const i=Zt(),a=async()=>{await gee({testOrderId:n._id})&&r(!0)};return T.useEffect(()=>{a()},[]),d.jsx("div",{className:"w-full h-full flex ",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("div",{className:"img w-[30%] h-full",children:d.jsx("img",{src:(s=(o=n==null?void 0:n.labTestId)==null?void 0:o.testId)==null?void 0:s.testImage,alt:"test image",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[d.jsx("div",{className:"w-full h-auto flex ",children:d.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[d.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(c=(l=n==null?void 0:n.labTestId)==null?void 0:l.testId)==null?void 0:c.testName}),d.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${n==null?void 0:n.bookingId._id}`})]})}),d.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[d.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:d.jsx("h2",{className:"w-full h--full",children:(h=(u=n==null?void 0:n.labTestId)==null?void 0:u.testId)==null?void 0:h.testDescription})}),d.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((p=(f=n==null?void 0:n.labTestId)==null?void 0:f.labId)==null?void 0:p.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(g=(m=n==null?void 0:n.labTestId)==null?void 0:m.labId)==null?void 0:g.laboratoryName})]}),d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((y=n==null?void 0:n.patientId)==null?void 0:y.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Ordered by ${(v=n==null?void 0:n.patientId)==null?void 0:v.firstName}`})]})]}),d.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(Rb,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(E=(b=n==null?void 0:n.patientId)==null?void 0:b.addressId)==null?void 0:E.place})]})}),d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(YC,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(I=(S=n==null?void 0:n.patientId)==null?void 0:S.userId)==null?void 0:I.phone})]})})]})]})]})]}),d.jsx("div",{className:"w-full h-[5vh] flex gap-2",children:d.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",onClick:N=>{var L;return i(`uploadResult?patientId=${n.patientId._id}&testOrderId=${n._id}&bookingId=${(L=n==null?void 0:n.bookingId)==null?void 0:L._id}&doctorId=${n.doctorId._id}`)},children:t?"View Uploaded result":"Upload test Result"})})]})})}function B9e(){const[e,t]=T.useState([]),r=async()=>{const n=await ZDe();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"orders w-full h-full flex flex-col gap-5 p-5",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[90%] h-auto",children:d.jsx(V9e,{testOrder:n})},i))})})})}function $9e(){var c,u;const e=Zt(),t=new URLSearchParams(location.search),r=t.get("testOrderId"),n=t.get("patientId"),i=t.get("doctorId");console.log("doctorId",i);const[a,o]=T.useState(void 0),s=Sr({initialValues:{testResultDescription:""},validationSchema:r2e,onSubmit:async(h,f)=>{await t2e({...h,testOrderId:r,patientId:n,doctorId:i})&&(Q.fire("Result uploaded successfully","","success"),e("/laboratory/order/test/completed"))}}),l=async()=>{const h=await e2e({testOrderId:r}),f=await gee({testOrderId:r});f&&s.setFieldValue("testResultDescription",f.testResultDescription),o(h)};return T.useEffect(()=>{l()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2 p-10",children:d.jsxs("form",{onSubmit:s.handleSubmit,className:"flex flex-col gap-10",children:[d.jsx("h1",{className:"w-full h-[8vh] p-2 flex items-center justify-center text-white text-lg font-bold bg-blue-500",children:`Test Result for the Request from ${(c=a==null?void 0:a.doctorId)==null?void 0:c.firstName} for ${(u=a==null?void 0:a.patientId)==null?void 0:u.firstName}`}),d.jsx("textarea",{rows:15,name:"testResultDescription",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.testResultDescription}),s.touched.testResultDescription&&s.errors.testResultDescription?d.jsx("span",{className:"text-red",children:s.errors.testResultDescription}):"",d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("button",{className:"w-full h-full flex items-center justify-center bg-orange-500",children:"Upload Result"})})]})})})}function H9e(e){var i,a,o,s,l,c;const{booking:t}=e,r=Zt(),n=async(u,h,f,p)=>{u.preventDefault(),await Q.fire({showCancelButton:!0,confirmButtonText:"Proceed Canceling",text:"Do you want to cancel the booking",icon:"question"}).then(async m=>{m.isConfirmed&&await bee({startTime:h,slotDate:f,doctorId:p})&&(await Q.fire("Canceled","Booking has been Canceled","success"),window.location.reload())})};return d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:(i=t==null?void 0:t.doctorId)==null?void 0:i.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("h4",{className:"text-sm font-medium opacity-40",children:"Cardiology"}),d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{children:(a=t==null?void 0:t.doctorId)==null?void 0:a.firstName})}),d.jsx("div",{className:"location w-full h-auto",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(os,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:(s=(o=t==null?void 0:t.doctorId)==null?void 0:o.addressId)==null?void 0:s.place}),d.jsx("span",{className:"flex items-center",children:(c=(l=t==null?void 0:t.doctorId)==null?void 0:l.addressId)==null?void 0:c.district})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[d.jsx(Ib,{}),d.jsx("span",{children:`${t==null?void 0:t.slotDate} ${nt(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),d.jsxs("div",{className:"w-full h-auto flex gap-4",children:[d.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:u=>{var h;return n(u,t==null?void 0:t.startTime,t==null?void 0:t.slotDate,(h=t==null?void 0:t.doctorId)==null?void 0:h._id)},children:"Cancel"}),nt().isAfter(nt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A"))&&nt().isBefore(nt(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))&&d.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:u=>window.open(`/patient/bookings/videoConsult?patientId=${t.patientId._id}&doctorId=${t.doctorId._id}`,"_blank"),children:"Join Meeting"}),d.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:u=>{var h;return r(`/patient/profile/bookings/review?doctorId=${(h=t==null?void 0:t.doctorId)==null?void 0:h._id}`)},children:"Add Review"})]})]})]})})}function z9e(){const[e,t]=T.useState([]),r=async()=>{const n=await p2e();await t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"flex w-full h-full",children:d.jsx("div",{className:"booked flex flex-col gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>d.jsx("div",{className:"w-[60vw] h-[25vh] ",children:d.jsx(H9e,{booking:n})},i))})})}var Fae={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Ed,function(){return function(r,n,i){n.prototype.dayOfYear=function(a){var o=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return a==null?o:this.add(a-o,"day")}}})})(Fae);var G9e=Fae.exports;const rU=es(G9e);nt.extend($i);nt.extend(rU);function W9e(e){var i,a,o,s,l,c,u,h,f,p,m,g,y,v,b,E;const{testOrder:t}=e,r=nt(t==null?void 0:t.testDoneDate.split(" (")[0]).format("D MMM, dddd YYYY h:mm A"),n=Zt();return d.jsx("div",{className:"w-full h-full flex ",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("div",{className:"img w-[30%] h-full",children:d.jsx("img",{src:(a=(i=t==null?void 0:t.labTestId)==null?void 0:i.testId)==null?void 0:a.testImage,alt:"test image",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[d.jsx("div",{className:"w-full h-auto flex ",children:d.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[d.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(s=(o=t==null?void 0:t.labTestId)==null?void 0:o.testId)==null?void 0:s.testName}),d.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),d.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[d.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:d.jsx("h2",{className:"w-full h--full",children:(c=(l=t==null?void 0:t.labTestId)==null?void 0:l.testId)==null?void 0:c.testDescription})}),d.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((h=(u=t==null?void 0:t.labTestId)==null?void 0:u.labId)==null?void 0:h.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(p=(f=t==null?void 0:t.labTestId)==null?void 0:f.labId)==null?void 0:p.laboratoryName})]}),d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((m=t==null?void 0:t.doctorId)==null?void 0:m.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Requested by ${(g=t==null?void 0:t.doctorId)==null?void 0:g.firstName}`})]})]}),d.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(Rb,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(v=(y=t==null?void 0:t.patientId)==null?void 0:y.addressId)==null?void 0:v.place})]})}),d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(YC,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(E=(b=t==null?void 0:t.patientId)==null?void 0:b.userId)==null?void 0:E.phone})]})})]})]})]})]}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-2",children:[(t==null?void 0:t.orderStatus)=="2"?d.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",onClick:S=>{var I;return n(`uploadResult?patientId=${t.patientId._id}&testOrderId=${t._id}&bookingId=${(I=t==null?void 0:t.bookingId)==null?void 0:I._id}&doctorId=${t.doctorId._id}`)},children:"View test Result"}):d.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",children:"need to be Completed"}),d.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",children:`ordered on ${r}`})]})]})})}function K9e(){const[e,t]=T.useState([]),r=async()=>{const n=await VIe();console.log(n),n&&await t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"requestedTests flex flex-col gap-4",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[90%] h-auto",children:d.jsx(W9e,{testOrder:n})},i))})})})}function q9e(){const[e,t]=T.useState(),r=Sr({initialValues:{place:"",state:"",country:"",pincode:"",district:"",phone:""},validationSchema:hIe,onSubmit:async(i,a)=>{console.log("values",i),await KCe(i)&&Q.fire("Profile has been Update","","success")}}),n=async()=>{const i=await WCe();r.setFieldValue("place",i._doc.place),r.setFieldValue("district",i._doc.district),r.setFieldValue("state",i._doc.state),r.setFieldValue("pincode",i._doc.pincode),r.setFieldValue("country",i._doc.country),r.setFieldValue("phone",i.phone),t(i)};return T.useEffect(()=>{n()},[]),d.jsx("div",{className:"screen w-full h-full flex flex-col p-10",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 justify-center pl-20  ",children:[d.jsx("h1",{className:"font-medium mb-2",children:"Address"}),d.jsxs("div",{className:"w-[60%] flex flex-col gap-2",children:[d.jsx(ie,{variant:"filled",name:"place",label:"Place",className:"w-full ",value:r.values.place,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.place&&r.errors.place?{color:"error",helperText:r.errors.place}:{color:"success"}}),d.jsx(ie,{variant:"filled",name:"state",label:"state",className:"w-full ",value:r.values.state,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.state&&r.errors.state?{color:"error",helperText:r.errors.state}:{color:"success"}}),d.jsx(ie,{variant:"filled",name:"district",label:"district",className:"w-full ",value:r.values.pincode,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.district&&r.errors.district?{color:"error",helperText:r.errors.district}:{color:"success"}}),d.jsx(ie,{variant:"filled",name:"country",label:"country",className:"w-full ",value:r.values.country,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.country&&r.errors.country?{color:"error",helperText:r.errors.country}:{color:"success"}}),d.jsx(ie,{variant:"filled",name:"pincode",label:"pincode",className:"w-full ",value:r.values.pincode,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.pincode&&r.errors.pincode?{color:"error",helperText:r.errors.pincode}:{color:"success"}})]}),d.jsx("h1",{className:"mt-5 font-medium mb-2",children:"Phone Details"}),d.jsx("div",{className:"w-[60%] flex flex-col gap-2",children:d.jsx(ie,{variant:"filled",name:"phone",label:"phone",className:"w-full ",value:r.values.phone,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.phone&&r.errors.phone?{color:"error",helperText:r.errors.phone}:{color:"success"}})}),d.jsx("button",{type:"button",onClick:r.handleSubmit,className:"w-[60%] h-[5vh] border font-medium rounded-[5%] bg-orange-500 p-2 ",children:"Save"})]})})}function Y9e(){var c;const e=Zt(),t=new URLSearchParams(location.search),r=t.get("testOrderId"),n=t.get("patientId"),i=t.get("doctorId");console.log("doctorId",i);const[a,o]=T.useState(void 0),s=Sr({initialValues:{testResultDescription:""},validationSchema:"",onSubmit:async(u,h)=>{await laboratory_uploadTestResultService({...u,testOrderId:r,patientId:n,doctorId:i})&&(Q.fire("Result uploaded successfully","","success"),e("/laboratory/order/test/completed"))}}),l=async()=>{const u=await $Ie({testOrderId:r}),h=await BIe({testOrderId:r});h&&s.setFieldValue("testResultDescription",h.testResultDescription),o(u)};return T.useEffect(()=>{l()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2 p-10",children:d.jsxs("form",{onSubmit:s.handleSubmit,className:"flex flex-col gap-10",children:[d.jsx("h1",{className:"w-full h-[8vh] p-2 flex items-center justify-center text-white text-lg font-bold bg-blue-500",children:`Test Result for ${(c=a==null?void 0:a.patientId)==null?void 0:c.firstName}`}),d.jsx("textarea",{rows:15,name:"testResultDescription",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.testResultDescription}),s.touched.testResultDescription&&s.errors.testResultDescription?d.jsx("span",{className:"text-red",children:s.errors.testResultDescription}):""]})})})}const Vae="https://hcompanion.onrender.com/api",X9e=async()=>{var e,t,r;try{return(await ce.get(`${Vae}/patient/doctor/prescriptions`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.prescriptions}catch(n){return console.log(n),((e=n.response)==null?void 0:e.status)=="500"&&((r=(t=n.response)==null?void 0:t.data)!=null&&r.errorServer)&&Q.fire("Server Error","","error"),!1}},J9e=async({bookingId:e})=>{var t,r,n;try{const i=await ce.post(`${Vae}/patient/doctor/prescription/details/booking`,{bookingId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("prescription details",i.data.prescription),i.data.prescription}catch(i){return console.log(i),((t=i.response)==null?void 0:t.status)=="500"&&((n=(r=i.response)==null?void 0:r.data)!=null&&n.errorServer)&&Q.fire("Server Error","","error"),!1}};nt.extend($i);nt.extend(rU);function Q9e(e){var i,a,o;const{prescription:t}=e,r=nt(t==null?void 0:t.updatedAt).format("D MMM, dddd YYYY h:mm A"),n=Zt();return d.jsx("div",{className:"w-full h-full flex flex-col shadow-xl rounded-lg border ",children:d.jsxs("div",{className:"h-full w-full flex gap-2 ",children:[d.jsx("div",{className:"w-[15%] h-full ",children:d.jsx("img",{src:(i=t==null?void 0:t.doctorId)==null?void 0:i.profileImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-full flex flex-1 flex-col gap-4 mt-2 p-1 ",children:[d.jsxs("div",{className:"w-full h-auto flex gap-10 items-center p-2 ",children:[d.jsxs("div",{className:"w-[30%] h-auto bg-black bg-opacity-20 flex items-center justify-center p-2",children:[d.jsx("h2",{className:"text-lg font-medium",children:`Doctor ${(a=t==null?void 0:t.doctorId)==null?void 0:a.firstName} ${(o=t==null?void 0:t.doctorId)==null?void 0:o.lastName}`}),d.jsx("h2",{})]}),d.jsx("div",{className:"w-full flex justify-end h-auto bg-black bg-opacity-20 p-2",children:d.jsx("h2",{className:"text-lg font-medium",children:`prescription on Date ${r}`})})]}),d.jsx("div",{className:"w-full h-[8vh] flex   py-1 mb-2 ",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:s=>{var l,c;return n(`/patient/profile/prescription/details/${(c=(l=t==null?void 0:t.patientId)==null?void 0:l.userId)==null?void 0:c._id}/${t==null?void 0:t.bookingId._id}`)},children:"View Prescription"})})]})]})})}function Z9e(){const[e,t]=T.useState([]),r=async()=>{const n=await X9e();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full flex flex-col p-4",children:d.jsx("div",{className:"prescriptions w-[90%] h-full flex flex-col gap-5",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>d.jsx("div",{className:"w-full h-auto",children:d.jsx(Q9e,{prescription:n})},i))})})})}function eWe(){var u,h,f,p,m;const[e,t]=T.useState(void 0),[r,n]=T.useState(void 0),[i,a]=T.useState(void 0),{patientId:o,bookingId:s}=ug(),l=Sr({initialValues:{disease:"",prescription:""},validationSchema:"",onSubmit:async(g,y)=>{}}),c=async()=>{const g=await jQ({patientId:o});n(g._id);const y=await J9e({bookingId:s});a(y),y&&(l.setFieldValue("disease",y.disease),l.setFieldValue("prescription",y.prescription)),t(g)};return T.useEffect(()=>{c()},[]),d.jsx("div",{className:"w-full h-full flex ",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:d.jsxs("div",{className:"patient profile w-full h-full flex flex-col gap-4",children:[d.jsxs("div",{className:"w-full h-[10vh] flex gap-10 items-center",children:[d.jsx("div",{className:"w-[5vw] h-[10vh] ",children:d.jsx("img",{src:(u=i==null?void 0:i.doctorId)==null?void 0:u.profileImage,alt:"patientprofile",className:"w-full h-full rounded-full"})}),d.jsxs("div",{className:"details w-full h-full flex items-center  gap-10",children:[d.jsx("h1",{className:"w-full h-[70%] pl-10 bg-black bg-opacity-20 flex items-center text-lg font-medium",children:`Doctor ${(h=i==null?void 0:i.doctorId)==null?void 0:h.firstName} ${(f=i==null?void 0:i.doctorId)==null?void 0:f.lastName}`}),d.jsx("h1",{className:"w-full h-[70%] pl-10 bg-black bg-opacity-20 flex items-center text-lg font-medium",children:`Consulted on ${(p=i==null?void 0:i.bookingId)==null?void 0:p.slotDate} ${(m=i==null?void 0:i.bookingId)==null?void 0:m.startTime}`})]})]}),d.jsx("div",{className:"prescription w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex justify-center bg-black bg-opacity-30",children:d.jsxs("form",{onSubmit:l.handleSubmit,className:"w-[70%] h-full p-4 flex flex-col gap-5",children:[d.jsx("h1",{className:"w-full h-[5vh] pl-10 bg-orange-500 flex items-center text-lg font-medium",children:"Prescription"}),d.jsx(ie,{variant:"filled",label:"disease",name:"disease",value:l.values.disease,onChange:l.handleChange,onBlur:l.handleBlur}),d.jsx("textarea",{rows:"10",placeholder:"Prescription",name:"prescription",value:l.values.prescription,onChange:l.handleChange,onBlur:l.handleBlur})]})})})]})})})}function tWe(){const[e,t]=T.useState(""),r=Sr({initialValues:{pharmacyName:"",ownerName:""},validationSchema:Vi().shape({}),onSubmit:async(a,o)=>{console.log("values",a),await _Re(a)&&(Q.fire({icon:"success",text:"The profile has been updated"}),i())}}),n=a=>{const o=a.target.files[0],s=new FileReader;s.onload=l=>{t(l.target.result),r.setFieldValue("profileImage",o)},s.readAsDataURL(a.target.files[0])},i=async()=>{const a=await cj();r.setFieldValue("pharmacyName",a.pharmacyName),r.setFieldValue("ownerName",a.ownerName),t(a.profileImage)};return T.useEffect(()=>{i()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full flex flex-col items-center",children:d.jsxs("form",{className:"w-[50%] h-full flex flex-col gap-6 pt-10 ",children:[d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{helperText:"Choose an Image",name:"profileImage",onChange:n})})})]}),d.jsx(ie,{variant:"filled",label:"First Name",name:"firstName",value:r.values.pharmacyName,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Last Name",name:"lastName",value:r.values.ownerName,onChange:r.handleChange}),d.jsxs("button",{type:"button",onClick:r.handleSubmit,className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(xf,{}),"Save"]})]})})})}function rWe(){var r;const e=Sr({initialValues:{place:"",state:"",district:"",country:"",pincode:"",houseName:"",phone:""},validationSchema:Vi().shape({}),onSubmit:async(n,i)=>{await TRe(n)&&t()}}),t=async()=>{const{phone:n,...i}=await SRe();console.log("temp contact",i._doc),e.setFieldValue("place",i._doc.place),e.setFieldValue("state",i._doc.state),e.setFieldValue("district",i._doc.district),e.setFieldValue("country",i._doc.country),e.setFieldValue("pincode",i._doc.pincode?i._doc.pincode:""),e.setFieldValue("houseName",i._doc.houseName),e.setFieldValue("phone",n)};return T.useEffect(()=>{t()},[]),d.jsx("div",{className:"w-full h-full",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 items-center pt-10",children:[d.jsx("div",{className:"w-[70%] ",children:d.jsx("h1",{className:"text-lg font-medium",children:"Address"})}),d.jsxs("form",{className:"w-[70%]  grid grid-cols-2 gap-4",children:[d.jsx(ie,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:(r=e.values)==null?void 0:r.houseName}),d.jsx(ie,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),d.jsx(ie,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),d.jsx(ie,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),d.jsx(ie,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),d.jsx(ie,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]}),d.jsxs("form",{className:"w-[70%] flex flex-col pt-10",children:[d.jsx("div",{children:d.jsx("h1",{className:"text-lg font-medium",children:"Contact Details"})}),d.jsx("div",{className:"w-[30%] flex flex-col gap-4 mt-5 ",children:d.jsx(ie,{variant:"filled",label:"Phone",className:"font-bold",name:"phone",onChange:e.handleChange,value:e.values.phone})})]}),d.jsxs("button",{type:"button",onClick:e.handleSubmit,className:"w-[70%] text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(xf,{}),"Save"]})]})})}function nWe(){return d.jsxs("div",{className:"w-full h-[10vh] px-2 text-center font-bold flex justify-center items-center gap-2 ",children:[d.jsxs(nr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/laboratory/profile/profileDetails ",children:[d.jsx(qC,{className:"h-full w-[5%]"}),d.jsx("span",{className:"flex flex-1",children:"Profile Details"})]}),d.jsxs(nr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/laboratory/profile/contactDetails",children:[d.jsx(uj,{className:"h-full w-[5%]"}),d.jsx("span",{className:"flex flex-1",children:"Contact Details"})]}),d.jsxs(nr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/laboratory/profile/passwordReset",children:[d.jsx(dj,{className:"h-full w-[5%]"}),d.jsx("span",{className:"flex flex-1",children:"Password Reset"})]})]})}function iWe(){return d.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[d.jsx(nWe,{}),d.jsx("div",{className:"w-full h-full mt-5 pb-2",children:d.jsx(oi,{})})]})}function aWe(){const[e,t]=T.useState(""),r=Sr({initialValues:{laboratoryName:"",ownerName:"",profileImage:""},validationSchema:Vi().shape({}),onSubmit:async(a,o)=>{console.log("values",a),await PDe(a)&&(Q.fire({icon:"success",text:"The profile has been updated"}),i())}}),n=a=>{const o=a.target.files[0],s=new FileReader;s.onload=l=>{t(l.target.result),r.setFieldValue("profileImage",o)},s.readAsDataURL(a.target.files[0])},i=async()=>{const a=await DDe();r.setFieldValue("laboratoryName",a.laboratoryName),r.setFieldValue("ownerName",a.ownerName),t(a.profileImage)};return T.useEffect(()=>{i()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full flex flex-col items-center",children:d.jsxs("form",{className:"w-[50%] h-full flex flex-col gap-6 pt-10 ",children:[d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{helperText:"Choose an Image",name:"profileImage",onChange:n})})})]}),d.jsx(ie,{variant:"filled",label:"First Name",name:"laboratoryName",value:r.values.laboratoryName,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Last Name",name:"ownerName",value:r.values.ownerName,onChange:r.handleChange}),d.jsxs("button",{type:"button",onClick:r.handleSubmit,className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(xf,{}),"Save"]})]})})})}function oWe(){var r;const e=Sr({initialValues:{place:"",state:"",district:"",country:"",pincode:"",houseName:"",phone:""},validationSchema:Vi().shape({}),onSubmit:async(n,i)=>{await jDe(n)&&t()}}),t=async()=>{const{phone:n,...i}=await LDe();console.log("temp contact",i._doc),e.setFieldValue("place",i._doc.place),e.setFieldValue("state",i._doc.state),e.setFieldValue("district",i._doc.district),e.setFieldValue("country",i._doc.country),e.setFieldValue("pincode",i._doc.pincode?i._doc.pincode:""),e.setFieldValue("houseName",i._doc.houseName),e.setFieldValue("phone",n)};return T.useEffect(()=>{t()},[]),d.jsx("div",{className:"w-full h-full",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 items-center pt-10",children:[d.jsx("div",{className:"w-[70%] ",children:d.jsx("h1",{className:"text-lg font-medium",children:"Address"})}),d.jsxs("form",{className:"w-[70%]  grid grid-cols-2 gap-4",children:[d.jsx(ie,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:(r=e.values)==null?void 0:r.houseName}),d.jsx(ie,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),d.jsx(ie,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),d.jsx(ie,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),d.jsx(ie,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),d.jsx(ie,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]}),d.jsxs("form",{className:"w-[70%] flex flex-col pt-10",children:[d.jsx("div",{children:d.jsx("h1",{className:"text-lg font-medium",children:"Contact Details"})}),d.jsx("div",{className:"w-[30%] flex flex-col gap-4 mt-5 ",children:d.jsx(ie,{variant:"filled",label:"Phone",className:"font-bold",name:"phone",onChange:e.handleChange,value:e.values.phone})})]}),d.jsxs("button",{type:"button",onClick:e.handleSubmit,className:"w-[70%] text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(xf,{}),"Save"]})]})})}const sWe="https://hcompanion.onrender.com/api",lWe=async({token:e})=>{try{const t=await ce.get(`${sWe}/doctor/getBasicDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.userData}catch(t){return t.response.status=="401"&&Q.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}};function cWe(){const e=Zt(),t=fc();Yr(n=>n.user);const r=async()=>{if(sessionStorage.getItem("token")){const n=await lWe({token:sessionStorage.getItem("token")});n?t(ai({username:n.username,email:n.email,role:n.role,isLoggedIn:!0})):ai({})}};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"navBar w-full h-full flex flex-col",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 p-4 bg-emerald-400 bg-opacity-90 rounded-tr-[3%]  ",children:[d.jsxs("div",{className:"w-full h-[15vh] flex flex-row items-center gap-4  p-1  ",children:[d.jsx("img",{src:"normalUser.png",className:"rounded-full w-[4vw] h-[100%]"}),d.jsxs("div",{className:"h-full w-full pl-4 flex flex-1 flex-col justify-center gap-2 bg-white bg-opacity-40 rounded-lg ",children:[d.jsx("h2",{className:"text-lg font-bold",children:"Admin"}),d.jsx("span",{className:" font-sm",children:"admin"})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(ie,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"options h-full w-full mt-10 flex flex-col gap-4 font-medium text-white ",children:[d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorSlotSetting.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",id:"id_navSlot",onClick:()=>{e("/admin/users")},children:"Users"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorBookings.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/admin/approval")},children:"Approvals"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),t(ai({})),e("/patient/home")},children:"sign out"})]})]})]})})}function uWe(){return d.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[d.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:d.jsx(cWe,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:d.jsx(oi,{})})]})}function dWe(){const{username:e}=Yr(t=>t.user);return d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:d.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:d.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white ",children:[d.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome"}),d.jsx("span",{className:"text-[10vh] font-bold",children:e||" "}),d.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Offers you best doctor consultations"})]})})})})}function hWe(){const{username:e}=Yr(t=>t.user);return d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:d.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:d.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white p-10 ",children:[d.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome Doctor"}),d.jsx("span",{className:"text-[10vh] font-bold",children:e}),d.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Offers you best doctor consultations"})]})})})})}function fWe(){const{username:e}=Yr(r=>r.user),{laboratoryName:t}=Yr(r=>r.laboratory);return d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:d.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:d.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white p-10 ",children:[d.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome"}),d.jsx("span",{className:"text-[10vh] font-bold",children:t||e}),d.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Laboratory Management"})]})})})})}function pWe(){const e=Zt(),t=fc(),{username:r,email:n,role:i,isLoggedIn:a}=Yr(l=>l.user),o=Yr(l=>l.doctor),s=async()=>{if(sessionStorage.getItem("token")){const l=await yZ({token:sessionStorage.getItem("token")});if(l){const c=await vZ({token:sessionStorage.getItem("token")});console.log(c),t(ai({username:l.username,email:l.email,role:l.role,isLoggedIn:!0})),t(um({firstName:c.firstName,lastName:c.lastName,profileImage:c.profileImage,weight:c.weight,height:c.height,profileImage:c.profileImage}))}else ai({}),um({})}};return console.log(o),T.useEffect(()=>{s()},[]),d.jsx("div",{className:"navBar w-full h-full flex flex-col",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 p-4 bg-slate-800 bg-opacity-90 rounded-tr-[3%]  ",children:[d.jsxs("div",{className:"w-full h-[15vh] flex flex-row items-center gap-4  p-1  ",children:[d.jsx("img",{src:o.profileImage,className:"rounded-full w-[4vw] h-[100%]"}),d.jsxs("div",{className:"h-full w-full pl-4 flex flex-1 flex-col justify-center gap-2 bg-white bg-opacity-40 rounded-lg ",children:[d.jsx("h2",{className:"text-lg font-bold",children:o&&o.firstName?o.firstName:r}),d.jsx("span",{className:" font-sm",children:"Doctor"})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(ie,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"options h-full w-full mt-10 flex flex-col gap-4 font-medium text-white ",children:[d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/home")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorSlotSetting.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",id:"id_navSlot",onClick:()=>{e("/doctor/slot")},children:"Slot"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorBookings.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/bookings")},children:"Bookings"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/profile")},children:"Profile"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),t(ai({})),t(um({})),e("/")},children:"sign out"})]})]})]})})}function mWe(){return d.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[d.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:d.jsx(pWe,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:d.jsx(oi,{})})]})}function gWe(){const[e,t]=T.useState(""),r=Sr({initialValues:{firstName:"",lastName:"",category:"",height:"",weight:"",place:"",state:"",district:"",country:"",pincode:"",profileImage:"",bloodGroup:"",age:"",license:"",specialization:"",tenInstitutionName:"",twelfthInstitutionName:"",collegeInstitutionName:"",tenCertificate:"",twelfthCertificate:"",collegeCertificate:""},validationSchema:"",onSubmit:async(a,o)=>{await hee(a)&&Q.fire("Form Submitted Successfully","","success")}}),n=(a,o)=>{const s=a.target.files[0],l=new FileReader;l.onload=c=>{t(c.target.result),r.setFieldValue(o,s)},l.readAsDataURL(a.target.files[0])},i=(a,o)=>{const s=a.target.files[0],l=new FileReader;l.onload=c=>{r.setFieldValue(o,s)},l.readAsDataURL(a.target.files[0])};return console.log(r.values),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{onSubmit:r.handleSubmit,className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Approval Form"}),d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{helperText:"Choose an Image",name:"profileImage",onChange:a=>n(a,a.target.name)})})})]}),d.jsx(ie,{variant:"filled",label:"First Name",name:"firstName",value:r.values.firstName,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Last Name",name:"lastName",value:r.values.lastName,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Age",name:"age",value:r.values.age,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Blood Group",name:"bloodGroup",value:r.values.bloodGroup,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Height",name:"height",value:r.values.height,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Weight",name:"weight",value:r.values.weight,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Category",name:"category",value:r.values.category,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Specialization",name:"specialization",value:r.values.specialization,onChange:r.handleChange}),d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{helperText:"Choose an file",name:"license",onChange:a=>i(a,a.target.name)})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(ie,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:r.handleChange,value:r.values.houseName}),d.jsx(ie,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:r.handleChange,value:r.values.place}),d.jsx(ie,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:r.handleChange,value:r.values.district}),d.jsx(ie,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:r.handleChange,value:r.values.state}),d.jsx(ie,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:r.handleChange,value:r.values.country}),d.jsx(ie,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:r.handleChange,value:r.values.pincode})]})}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Educational Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-5",children:[d.jsx(ie,{variant:"filled",label:"Ten Institution Name ",className:"font-bold flex ",name:"tenInstitutionName",onChange:r.handleChange,value:r.values.tenInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{helperText:"Choose an ten certificate",name:"tenCertificate",onChange:a=>i(a,a.target.name)})})})}),d.jsx(ie,{variant:"filled",label:"Twelfth Institution Name ",className:"font-bold flex ",name:"twelfthInstitutionName",onChange:r.handleChange,value:r.values.twelfthInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{helperText:"Choose an twelfth certificate",name:"twelfthCertificate",onChange:a=>i(a,a.target.name)})})})}),d.jsx(ie,{variant:"filled",label:"College Institution Name ",className:"font-bold flex ",name:"collegeInstitutionName",onChange:r.handleChange,value:r.values.collegeInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{helperText:"Choose an college certificate",name:"collegeCertificate",onChange:a=>i(a,a.target.name)})})})})]})}),d.jsx("button",{type:"submit",className:"w-full h-[5vh] p-2 bg-orange-500",children:"submit"})]})})})}function yWe(){T.useState("");const e=Sr({initialValues:{firstName:"",lastName:"",category:"",height:"",weight:"",place:"",state:"",district:"",country:"",pincode:"",profileImage:"",bloodGroup:"",age:"",license:"",specialization:"",tenInstitutionName:"",twelfthInstitutionName:"",collegeInstitutionName:"",tenCertificate:"",twelfthCertificate:"",collegeCertificate:""},validationSchema:"",onSubmit:async(r,n)=>{await hee(r)&&Q.fire("Form Submitted Successfully","","success")}}),t=async()=>{const r=await IDe();r&&(e.setFieldValue("firstName",r.firstName),e.setFieldValue("lastName",r.lastName),e.setFieldValue("weight",r.weight),e.setFieldValue("height",r.height),e.setFieldValue("age",r.age),e.setFieldValue("license",r.license),e.setFieldValue("bloodGroup",r.bloodGroup),e.setFieldValue("profileImage",r.profileImage),e.setFieldValue("bloodGroup",r.bloodGroup),e.setFieldValue("place",r.addressId.place),e.setFieldValue("district",r.addressId.district),e.setFieldValue("country",r.addressId.country),e.setFieldValue("pincode",r.addressId.pincode),e.setFieldValue("category",r.category),e.setFieldValue("specialization",r.specialization),e.setFieldValue("tenInstitutionName",r.educationId.tenInstutionName),e.setFieldValue("twelfthInstitutionName",r.educationId.twelfthInstutionName),e.setFieldValue("collegeInstitutionName",r.educationId.collegeInstutionName),e.setFieldValue("tenCertificate",r.educationId.tenCertificate),e.setFieldValue("twelfthCertificate",r.educationId.twelfthCertificate),e.setFieldValue("collegeCertificate",r.educationId.collegeCertificate))};return T.useEffect(()=>{t()},[]),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Form has been submitted to Admin"}),d.jsx("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:d.jsx("img",{src:e.values.profileImage||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"})}),d.jsx(ie,{variant:"filled",label:"First Name",name:"firstName",value:e.values.firstName,onChange:e.handleChange}),d.jsx(ie,{variant:"filled",label:"Last Name",name:"lastName",value:e.values.lastName,onChange:e.handleChange}),d.jsx(ie,{variant:"filled",label:"Age",name:"age",value:e.values.age,onChange:e.handleChange}),d.jsx(ie,{variant:"filled",label:"Blood Group",name:"bloodGroup",value:e.values.bloodGroup,onChange:e.handleChange}),d.jsx(ie,{variant:"filled",label:"Height",name:"height",value:e.values.height,onChange:e.handleChange}),d.jsx(ie,{variant:"filled",label:"Weight",name:"weight",value:e.values.weight,onChange:e.handleChange}),d.jsx(ie,{variant:"filled",label:"Category",name:"category",value:e.values.category,onChange:e.handleChange}),d.jsx(ie,{variant:"filled",label:"Specialization",name:"specialization",value:e.values.specialization,onChange:e.handleChange}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-4 justify-center items-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:e.values.license,download:"licence.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download license"})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(ie,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:e.values.houseName}),d.jsx(ie,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),d.jsx(ie,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),d.jsx(ie,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),d.jsx(ie,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),d.jsx(ie,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]})}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Educational Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-5",children:[d.jsx(ie,{variant:"filled",label:"Ten Institution Name ",className:"font-bold flex ",name:"tenInstitutionName",onChange:e.handleChange,value:e.values.tenInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:e.values.tenCertificate,download:"tenCertificate.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download tenth Certificate"})})})}),d.jsx(ie,{variant:"filled",label:"Twelfth Institution Name ",className:"font-bold flex ",name:"twelfthInstitutionName",onChange:e.handleChange,value:e.values.twelfthInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:e.values.twelfthCertificate,download:"twelfthCertificate.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download twelfth Certificate"})})})}),d.jsx(ie,{variant:"filled",label:"College Institution Name ",className:"font-bold flex ",name:"collegeInstitutionName",onChange:e.handleChange,value:e.values.collegeInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:e.values.collegeCertificate,download:"collegeCertificate.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download college Certificate"})})})})]})})]})})})}function vWe(){const e=fc(),{username:t,email:r,role:n,isLoggedIn:i}=Yr(u=>u.user),{pharmacyName:a,ownerName:o,profileImage:s}=Yr(u=>u.pharmacy),l=Zt(),c=async()=>{if(sessionStorage.getItem("token")&&!i){const u=await oZ({token:sessionStorage.getItem("token")});if(u){const h=await cj();e(ai({username:u.username,email:u.email,role:u.role,isLoggedIn:!0})),e(lZ({pharmacyName:h.pharmacyName,ownerName:h.ownerName,profileImage:h.profileImage}))}}};return T.useEffect(()=>{c()},[]),d.jsx("div",{className:"navbarParent h-full w-full ",children:d.jsxs("div",{className:"navbar w-full h-full flex flex-col rounded-tr-[3%] bg-blue-600 bg-opacity-90 p-4 gap-10 ",children:[d.jsxs("div",{className:"w-full h-[8vh] flex justify-start items-center gap-4 ",children:[d.jsx("img",{src:"/icons/arrowBack.png",alt:"",className:"h-[5vh] w-[] p-2 ml-2 bg-white  rounded-lg"}),d.jsx("h2",{className:"text-white text-sm",children:"Minimize"}),d.jsx("div",{className:"flex-1 h-full flex justify-end items-center",children:d.jsx("img",{src:"/logo.png",alt:"",className:"w-[7vw] h-[7vh] bg-white mr-4"})})]}),d.jsxs("div",{className:"profile h-[12%] flex flex-row justify-start gap-4",children:[d.jsx("div",{className:"profileImage w-auto h-full flex ",children:d.jsx("img",{src:s,alt:"image",className:"h-full w-[5vw] rounded-full "})}),d.jsxs("div",{className:"details flex-1 flex flex-col justify-center bg-white bg-opacity-10 p-2 rounded-lg gap-2 ",children:[d.jsx("span",{children:d.jsx("h2",{className:"text-white text-lg font-bold",children:a||t})}),d.jsx("span",{children:d.jsx("h2",{className:"text-white text-sm",children:"pharmacy"})})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(ie,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"home w-full text-white h-[80%] flex flex-col gap-4 border-slate-50",children:[d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/pharmacyHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{l("/pharmacy/home")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/stock.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",id:"id_navMedicineStock",onClick:()=>{l("/pharmacy/stock/viewStocks")},children:"Medicine Stock"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/pharmacyOrder.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{l("/pharmacy/order")},children:"Orders"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{l("/pharmacy/profile")},children:"Profile"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),e(ai({})),l("/")},children:"sign out"})]})]})]})})}function bWe(){return d.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[d.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:d.jsx(vWe,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:d.jsx(oi,{})})]})}function wWe(){const[e,t]=T.useState(""),r=Sr({initialValues:{pharmacyName:"",ownerName:"",profileImage:"",houseName:"",license:"",place:"",state:"",district:"",country:"",pincode:""},validationSchema:"",onSubmit:async(a,o)=>{await CRe(a)&&Q.fire("Form Submitted Successfully","","success")}}),n=(a,o)=>{const s=a.target.files[0],l=new FileReader;l.onload=c=>{t(c.target.result),r.setFieldValue(o,s)},l.readAsDataURL(a.target.files[0])},i=(a,o)=>{const s=a.target.files[0],l=new FileReader;l.onload=c=>{r.setFieldValue(o,s)},l.readAsDataURL(a.target.files[0])};return console.log(r.values),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{onSubmit:r.handleSubmit,className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Approval Form"}),d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{helperText:"Choose an Image",name:"profileImage",onChange:a=>n(a,a.target.name)})})})]}),d.jsx(ie,{variant:"filled",label:"Pharmacy Name",name:"pharmacyName",value:r.values.pharmacyName,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Owner Name",name:"ownerName",value:r.values.ownerName,onChange:r.handleChange}),d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{helperText:"Choose an file",name:"license",onChange:a=>i(a,a.target.name)})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(ie,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:r.handleChange,value:r.values.houseName}),d.jsx(ie,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:r.handleChange,value:r.values.place}),d.jsx(ie,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:r.handleChange,value:r.values.district}),d.jsx(ie,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:r.handleChange,value:r.values.state}),d.jsx(ie,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:r.handleChange,value:r.values.country}),d.jsx(ie,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:r.handleChange,value:r.values.pincode})]})}),d.jsx("button",{type:"submit",className:"w-full h-[5vh] p-2 bg-orange-500",children:"submit"})]})})})}function EWe(){T.useState("");const e=Sr({initialValues:{pharmacyName:"",ownerName:"",profileImage:"",houseName:"",license:"",place:"",state:"",district:"",country:"",pincode:""},validationSchema:"",onSubmit:async(r,n)=>{await doctor_approval_updateProfileDetailsService(r)&&Q.fire("Form Submitted Successfully","","success")}}),t=async()=>{const r=await xRe();r&&(e.setFieldValue("pharmacyName",r.pharmacyName),e.setFieldValue("ownerName",r.ownerName),e.setFieldValue("license",r.license),e.setFieldValue("profileImage",r.profileImage),e.setFieldValue("place",r.addressId.place),e.setFieldValue("district",r.addressId.district),e.setFieldValue("country",r.addressId.country),e.setFieldValue("pincode",r.addressId.pincode))};return T.useEffect(()=>{t()},[]),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Form has been submitted to Admin"}),d.jsx("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:d.jsx("img",{src:e.values.profileImage||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"})}),d.jsx(ie,{variant:"filled",label:"Pharmacy Name",name:"pharmacyName",value:e.values.pharmacyName,onChange:e.handleChange}),d.jsx(ie,{variant:"filled",label:"Owner Name",name:"ownerName",value:e.values.ownerName,onChange:e.handleChange}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-4 justify-center items-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:e.values.license,download:"licence.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download license"})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(ie,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:e.values.houseName}),d.jsx(ie,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),d.jsx(ie,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),d.jsx(ie,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),d.jsx(ie,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),d.jsx(ie,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]})})]})})})}function _We(){const e=fc(),t=Zt(),{username:r,email:n}=Yr(l=>l.user),{laboratoryName:i,ownerName:a,profileImage:o}=Yr(l=>l.laboratory),s=async()=>{const l=await fee();l&&(e(ai({username:l.userId.username,email:l.userId.email,phone:l.userId.phone,role:l.userId.role,isLoggedIn:!0})),e(mee({laboratoryName:l.laboratoryName,ownerName:l.ownerName,profileImage:l.profileImage})))};return T.useEffect(()=>{s()},[]),d.jsx("div",{className:"navbarParent h-full w-full ",children:d.jsxs("div",{className:"navbar w-full h-full flex flex-col rounded-tr-[3%] bg-pink-600 bg-opacity-90 p-4 gap-10 ",children:[d.jsxs("div",{className:"w-full h-[8vh] flex justify-start items-center gap-4 ",children:[d.jsx("img",{src:"/icons/arrowBack.png",alt:"",className:"h-[5vh] w-[] p-2 ml-2 bg-white  rounded-lg"}),d.jsx("h2",{className:"text-white text-sm",children:"Minimize"}),d.jsx("div",{className:"flex-1 h-full flex justify-end items-center",children:d.jsx("img",{src:"/logo.png",alt:"",className:"w-[7vw] h-[7vh] bg-white mr-4"})})]}),d.jsxs("div",{className:"profile h-[12%] flex flex-row justify-start gap-4",children:[d.jsx("div",{className:"profileImage w-auto h-full flex ",children:d.jsx("img",{src:o,alt:"image",className:"h-full w-[5vw] rounded-full "})}),d.jsxs("div",{className:"details flex-1 flex flex-col justify-center bg-white bg-opacity-30 p-2 rounded-lg gap-2 ",children:[d.jsx("span",{children:d.jsx("h2",{className:"text-white text-lg font-bold",children:i||r})}),d.jsx("span",{children:d.jsx("h2",{className:"text-white text-sm",children:"Laboratory"})})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(ie,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"home w-full text-white h-[80%] flex flex-col gap-4 border-slate-50",children:[d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/laboratory_homeIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full cursor-pointer",onClick:()=>{t("/laboratory/home")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/laboratory_serviceIcon.jpg",alt:"laboratory services",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full cursor-pointer",onClick:()=>{t("/laboratory/testServices")},children:"Laboratory test Services"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/laboratory_testOrderIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{t("/laboratory/order")},children:"Test Orders"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{t("/laboratory/profile")},children:"Profile"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),e(ai({})),t("/")},children:"sign out"})]})]})]})})}function SWe(){return d.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[d.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:d.jsx(_We,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:d.jsx(oi,{})})]})}function TWe(){const[e,t]=T.useState(""),r=Sr({initialValues:{laboratoryName:"",ownerName:"",profileImage:"",houseName:"",license:"",place:"",state:"",district:"",country:"",pincode:""},validationSchema:"",onSubmit:async(a,o)=>{await MDe(a)&&Q.fire("Form Submitted Successfully","","success")}}),n=(a,o)=>{const s=a.target.files[0],l=new FileReader;l.onload=c=>{t(c.target.result),r.setFieldValue(o,s)},l.readAsDataURL(a.target.files[0])},i=(a,o)=>{const s=a.target.files[0],l=new FileReader;l.onload=c=>{r.setFieldValue(o,s)},l.readAsDataURL(a.target.files[0])};return console.log(r.values),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{onSubmit:r.handleSubmit,className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Approval Form"}),d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{helperText:"Choose an Image",name:"profileImage",onChange:a=>n(a,a.target.name)})})})]}),d.jsx(ie,{variant:"filled",label:"Laboratory Name",name:"laboratoryName",value:r.values.laboratoryName,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Owner Name",name:"ownerName",value:r.values.ownerName,onChange:r.handleChange}),d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(Ra,{helperText:"Choose an file",name:"license",onChange:a=>i(a,a.target.name)})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(ie,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:r.handleChange,value:r.values.houseName}),d.jsx(ie,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:r.handleChange,value:r.values.place}),d.jsx(ie,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:r.handleChange,value:r.values.district}),d.jsx(ie,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:r.handleChange,value:r.values.state}),d.jsx(ie,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:r.handleChange,value:r.values.country}),d.jsx(ie,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:r.handleChange,value:r.values.pincode})]})}),d.jsx("button",{type:"submit",className:"w-full h-[5vh] p-2 bg-orange-500",children:"submit"})]})})})}function CWe(){var r;T.useState("");const e=Sr({initialValues:{pharmacyName:"",ownerName:"",profileImage:"",houseName:"",license:"",place:"",state:"",district:"",country:"",pincode:""},validationSchema:"",onSubmit:async(n,i)=>{}}),t=async()=>{const n=await UDe();n&&(e.setFieldValue("laboratoryName",n.laboratoryName),e.setFieldValue("ownerName",n.ownerName),e.setFieldValue("license",n.license),e.setFieldValue("profileImage",n.profileImage),e.setFieldValue("place",n.addressId.place),e.setFieldValue("district",n.addressId.district),e.setFieldValue("country",n.addressId.country),e.setFieldValue("pincode",n.addressId.pincode))};return T.useEffect(()=>{t()},[]),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Form has been submitted to Admin"}),d.jsx("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:d.jsx("img",{src:e.values.profileImage||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"})}),d.jsx(ie,{variant:"filled",label:"Laboratory Name",name:"pharmacyName",value:e.values.laboratoryName,onChange:e.handleChange}),d.jsx(ie,{variant:"filled",label:"Owner Name",name:"ownerName",value:e.values.ownerName,onChange:e.handleChange}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-4 justify-center items-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:e.values.license,download:"licence.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download license"})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(ie,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:(r=e.values)==null?void 0:r.houseName}),d.jsx(ie,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),d.jsx(ie,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),d.jsx(ie,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),d.jsx(ie,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),d.jsx(ie,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]})})]})})})}nt.extend($i);nt.extend(rU);function xWe(e){var i,a,o,s,l,c,u,h,f,p,m,g,y,v,b,E;const{testOrder:t}=e,r=nt(t==null?void 0:t.testDoneDate.split(" (")[0]).format("D MMM, dddd YYYY h:mm A"),n=Zt();return d.jsx("div",{className:"w-full h-full flex ",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("div",{className:"img w-[30%] h-full",children:d.jsx("img",{src:(a=(i=t==null?void 0:t.labTestId)==null?void 0:i.testId)==null?void 0:a.testImage,alt:"test image",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[d.jsx("div",{className:"w-full h-auto flex ",children:d.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[d.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(s=(o=t==null?void 0:t.labTestId)==null?void 0:o.testId)==null?void 0:s.testName}),d.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),d.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[d.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:d.jsx("h2",{className:"w-full h--full",children:(c=(l=t==null?void 0:t.labTestId)==null?void 0:l.testId)==null?void 0:c.testDescription})}),d.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((h=(u=t==null?void 0:t.labTestId)==null?void 0:u.labId)==null?void 0:h.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(p=(f=t==null?void 0:t.labTestId)==null?void 0:f.labId)==null?void 0:p.laboratoryName})]}),d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((m=t==null?void 0:t.doctorId)==null?void 0:m.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Requested by ${(g=t==null?void 0:t.doctorId)==null?void 0:g.firstName}`})]})]}),d.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(Rb,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(v=(y=t==null?void 0:t.patientId)==null?void 0:y.addressId)==null?void 0:v.place})]})}),d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(YC,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(E=(b=t==null?void 0:t.patientId)==null?void 0:b.userId)==null?void 0:E.phone})]})})]})]})]})]}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-2",children:[(t==null?void 0:t.orderStatus)=="2"?d.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",onClick:S=>{var I;return n(`/doctor/bookings/test/completed/details?patientId=${t.patientId._id}&testOrderId=${t._id}&bookingId=${(I=t==null?void 0:t.bookingId)==null?void 0:I._id}&doctorId=${t.doctorId._id}`)},children:"View test Result"}):d.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",children:"need to be Completed"}),d.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",children:`ordered on ${r}`})]})]})})}function RWe(){const[e,t]=T.useState([]),r=async()=>{const n=await C9e();console.log(n),n&&await t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"requestedTests flex flex-col gap-4",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[90%] h-auto",children:d.jsx(xWe,{testOrder:n})},i))})})})}function IWe(){var c;const e=Zt(),t=new URLSearchParams(location.search),r=t.get("testOrderId"),n=t.get("patientId"),i=t.get("doctorId");console.log("doctorId",i);const[a,o]=T.useState(void 0),s=Sr({initialValues:{testResultDescription:""},validationSchema:"",onSubmit:async(u,h)=>{await laboratory_uploadTestResultService({...u,testOrderId:r,patientId:n,doctorId:i})&&(Q.fire("Result uploaded successfully","","success"),e("/laboratory/order/test/completed"))}}),l=async()=>{const u=await x9e({testOrderId:r}),h=await R9e({testOrderId:r});h&&s.setFieldValue("testResultDescription",h.testResultDescription),o(u)};return T.useEffect(()=>{l()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2 p-10",children:d.jsxs("form",{className:"flex flex-col gap-10",children:[d.jsx("h1",{className:"w-full h-[8vh] p-2 flex items-center justify-center text-white text-lg font-bold bg-blue-500",children:`Test Result for ${(c=a==null?void 0:a.patientId)==null?void 0:c.firstName}`}),d.jsx("textarea",{rows:15,name:"testResultDescription",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.testResultDescription}),s.touched.testResultDescription&&s.errors.testResultDescription?d.jsx("span",{className:"text-red",children:s.errors.testResultDescription}):""]})})})}function NWe(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"/admin/users/patient",children:"Normal Users"}),d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"/admin/users/doctors",children:"Doctors"}),d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"/admin/users/pharmacy",children:"Pharmacy"}),d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"/admin/users/laboratory",children:"Laboratory"})]})})}function AWe(){return d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[d.jsx("div",{className:"header w-full h-[5vh] p-5",children:d.jsx(NWe,{})}),d.jsx("div",{className:"w-full h-full flex flex-col mt-5",children:d.jsx(oi,{})})]})}nt.extend($i);function OWe(e){var r,n,i;const{user:t}=e;return Zt(),d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:t==null?void 0:t.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{className:"flex justify-center w-full text-emerald-500",children:`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName}`})}),d.jsx("div",{className:"location w-full h-auto bg-black bg-opacity-20 p-2",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(os,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:`place : ${(r=t.addressId)==null?void 0:r.place}`}),d.jsx("span",{className:"flex items-center",children:`district : ${(n=t.addressId)==null?void 0:n.district}`}),d.jsx("span",{className:"flex items-center",children:`pincode : ${(i=t.addressId)==null?void 0:i.pincode}`})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsx("h1",{className:"w-full h-[5vh] p-4 bg-blue-500 flex justify-center items-center text-white ",children:"Normal User"}),d.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",children:"View Details"})]})]})})}const Mx="https://hcompanion.onrender.com/api",kWe=async()=>{try{return(await ce.get(`${Mx}/admin/getAllPatients`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}})).data.patients}catch(e){return e.response.status=="401"&&Q.fire({html:`<b>${e.response.status.message}</b>`,title:"Session Out"}),console.log(e),!1}},PWe=async()=>{try{return(await ce.get(`${Mx}/admin/getAllDoctors`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}})).data.doctors}catch(e){return e.response.status=="401"&&Q.fire({html:`<b>${e.response.status.message}</b>`,title:"Session Out"}),console.log(e),!1}},DWe=async()=>{try{return(await ce.get(`${Mx}/admin/getAllPharmacies`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}})).data.pharmacies}catch(e){return e.response.status=="401"&&Q.fire({html:`<b>${e.response.status.message}</b>`,title:"Session Out"}),console.log(e),!1}},LWe=async()=>{try{return(await ce.get(`${Mx}/admin/getAllLaboratories`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}})).data.laboratories}catch(e){return e.response.status=="401"&&Q.fire({html:`<b>${e.response.status.message}</b>`,title:"Session Out"}),console.log(e),!1}};function jWe(){const[e,t]=T.useState([]),r=async()=>{const n=await kWe();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 p-2",children:[d.jsx("h1",{className:"w-full h-[5vh] p-4 bg-blue-500 flex justify-center items-center ",children:"Normal Users Present"}),e.length>0&&e.map((n,i)=>d.jsx("div",{className:"h-auto w-[80%] ml-5 flex",children:d.jsx(OWe,{user:n})},i))]})})}nt.extend($i);function MWe(e){var r,n,i;const{user:t}=e;return Zt(),d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:t==null?void 0:t.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{className:"flex justify-center w-full text-emerald-500",children:`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName}`})}),d.jsx("div",{className:"location w-full h-auto bg-black bg-opacity-20 p-2",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(os,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:`place : ${(r=t.addressId)==null?void 0:r.place}`}),d.jsx("span",{className:"flex items-center",children:`district : ${(n=t.addressId)==null?void 0:n.district}`}),d.jsx("span",{className:"flex items-center",children:`pincode : ${(i=t.addressId)==null?void 0:i.pincode}`})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsx("h1",{className:"w-full h-[5vh] p-4 bg-blue-500 flex justify-center items-center text-white ",children:"Doctor"}),d.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",children:"View Details"})]})]})})}function UWe(){const[e,t]=T.useState([]),r=async()=>{const n=await PWe();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex ml-5",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 p-2",children:[d.jsx("h1",{className:"w-[50%] h-[5vh] p-4 bg-blue-500 flex justify-center items-center mt-10 ",children:"Doctors Present"}),e.length>0&&e.map((n,i)=>d.jsx("div",{className:"h-auto w-[80%] ml-5 flex",children:d.jsx(MWe,{user:n})},i))]})})}nt.extend($i);function FWe(e){var r,n,i;const{user:t}=e;return Zt(),d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:t==null?void 0:t.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{className:"flex justify-center w-full text-emerald-500",children:`${t==null?void 0:t.pharmacyName}`})}),d.jsx("div",{className:"w-full h-auto bg-black bg-opacity-20 p-2",children:d.jsx("h4",{className:"flex justify-center w-full text-black",children:`Owner : ${t==null?void 0:t.ownerName}`})}),d.jsx("div",{className:"location w-full h-auto bg-black bg-opacity-20 p-2",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(os,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:`place : ${(r=t.addressId)==null?void 0:r.place}`}),d.jsx("span",{className:"flex items-center",children:`district : ${(n=t.addressId)==null?void 0:n.district}`}),d.jsx("span",{className:"flex items-center",children:`pincode : ${(i=t.addressId)==null?void 0:i.pincode}`})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsx("h1",{className:"w-full h-[5vh] p-4 bg-blue-500 flex justify-center items-center text-white ",children:"Pharmacy"}),d.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",children:"View Details"})]})]})})}function VWe(){const[e,t]=T.useState([]),r=async()=>{const n=await DWe();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex ml-5",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 p-2 mt-10",children:[d.jsx("h1",{className:"w-[40%] h-[5vh] p-4 bg-blue-500 flex justify-center items-center ",children:"Pharmacies"}),e.length>0&&e.map((n,i)=>d.jsx("div",{className:"h-auto w-[80%] ml-5 flex",children:d.jsx(FWe,{user:n})},i))]})})}nt.extend($i);function BWe(e){var r,n,i;const{user:t}=e;return Zt(),d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:t==null?void 0:t.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{className:"flex justify-center w-full text-emerald-500",children:`${t==null?void 0:t.laboratoryName}`})}),d.jsx("div",{className:"w-full h-auto bg-black bg-opacity-20 p-2",children:d.jsx("h4",{className:"flex justify-center w-full text-black",children:`Owner : ${t==null?void 0:t.ownerName}`})}),d.jsx("div",{className:"location w-full h-auto bg-black bg-opacity-20 p-2",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(os,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:`place : ${(r=t.addressId)==null?void 0:r.place}`}),d.jsx("span",{className:"flex items-center",children:`district : ${(n=t.addressId)==null?void 0:n.district}`}),d.jsx("span",{className:"flex items-center",children:`pincode : ${(i=t.addressId)==null?void 0:i.pincode}`})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsx("h1",{className:"w-full h-[5vh] p-4 bg-blue-500 flex justify-center items-center text-white ",children:"Laboratory"}),d.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",children:"View Details"})]})]})})}function $We(){const[e,t]=T.useState([]),r=async()=>{const n=await LWe();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex ml-5",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 p-2 mt-10",children:[d.jsx("h1",{className:"w-[40%] h-[5vh] p-4 bg-blue-500 flex justify-center items-center ",children:"Pharmacies"}),e.length>0&&e.map((n,i)=>d.jsx("div",{className:"h-auto w-[80%] ml-5 flex",children:d.jsx(BWe,{user:n})},i))]})})}function HWe(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"/admin/approval/doctors",children:"Doctors"}),d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"/admin/approval/pharmacy",children:"Pharmacy"}),d.jsx(nr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"/admin/approval/laboratory",children:"Laboratory"})]})})}function zWe(){return d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[d.jsx("div",{className:"header w-full h-[5vh] p-5",children:d.jsx(HWe,{})}),d.jsx("div",{className:"w-full h-full flex flex-col mt-5",children:d.jsx(oi,{})})]})}nt.extend($i);function GWe(e){var n,i,a;const{user:t}=e,r=Zt();return d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:t==null?void 0:t.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{className:"flex justify-center w-full text-emerald-500",children:`${t==null?void 0:t.firstName} ${t==null?void 0:t.lastName}`})}),d.jsx("div",{className:"location w-full h-auto bg-black bg-opacity-20 p-2",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(os,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:`place : ${(n=t.addressId)==null?void 0:n.place}`}),d.jsx("span",{className:"flex items-center",children:`district : ${(i=t.addressId)==null?void 0:i.district}`}),d.jsx("span",{className:"flex items-center",children:`pincode : ${(a=t.addressId)==null?void 0:a.pincode}`})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsx("h1",{className:"w-full h-[5vh] p-4 bg-blue-500 flex justify-center items-center text-white ",children:"Doctor"}),d.jsxs("div",{className:" grid grid-cols-2 gap-2 ",children:[d.jsx("a",{href:t==null?void 0:t.license,className:"bg-black bg-opacity-5 p-2",download:"license.pdf",target:"_blank",rel:"noopener noreferrer",children:"License"}),d.jsx("a",{href:t==null?void 0:t.educationId.twelfthCertificate,className:"bg-black bg-opacity-5 p-2 ",download:"twelfthCertificate.pdf",target:"_blank",rel:"noopener noreferrer",children:"Twelfth  Certificate"}),d.jsx("a",{href:t==null?void 0:t.educationId.tenCertificate,className:"bg-black bg-opacity-5 p-2",download:"tenCertificate.pdf",target:"_blank",rel:"noopener noreferrer",children:"Ten  Certificate"}),d.jsx("a",{href:t==null?void 0:t.educationId.collegeCertificate,className:"bg-black bg-opacity-5 p-2",download:"collegeCertificate.pdf",target:"_blank",rel:"noopener noreferrer",children:"College  Certificate"})]}),d.jsx("div",{className:"w-full h-auto flex gap-2",children:d.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",onClick:o=>r(`/admin/approval/doctorDetails?doctorId=${t._id}`),children:"View Details"})})]})]})})}const pu="https://hcompanion.onrender.com/api",WWe=async()=>{try{return(await ce.get(`${pu}/admin/approval/getDoctorRequests`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}})).data.doctors}catch(e){return e.response.status=="401"&&Q.fire({html:`<b>${e.response.status.message}</b>`,title:"Session Out"}),console.log(e),!1}},KWe=async()=>{try{return(await ce.get(`${pu}/admin/approval/getLaboratoryRequests`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}})).data.laboratories}catch(e){return e.response.status=="401"&&Q.fire({html:`<b>${e.response.status.message}</b>`,title:"Session Out"}),console.log(e),!1}},qWe=async()=>{try{return(await ce.get(`${pu}/admin/approval/getPharmacyRequests`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}})).data.pharmacies}catch(e){return e.response.status=="401"&&Q.fire({html:`<b>${e.response.status.message}</b>`,title:"Session Out"}),console.log(e),!1}},YWe=async({doctorId:e})=>{try{return(await ce.post(`${pu}/admin/approval/getDoctorDetails`,{doctorId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}})).data.doctor}catch(t){return t.response.status=="401"&&Q.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}},XWe=async({doctorId:e})=>{try{const t=await ce.post(`${pu}/admin/approval/approveDoctor`,{doctorId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return!0}catch(t){return t.response.status=="401"&&Q.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}},JWe=async({pharmacyId:e})=>{try{const t=await ce.post(`${pu}/admin/approval/approvePharmacy`,{pharmacyId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return!0}catch(t){return t.response.status=="401"&&Q.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}},QWe=async({pharmacyId:e})=>{try{return(await ce.post(`${pu}/admin/approval/getPharmacyDetails`,{pharmacyId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}})).data.pharmacy}catch(t){return t.response.status=="401"&&Q.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}},ZWe=async({labId:e})=>{try{const t=await ce.post(`${pu}/admin/approval/approveLaboratory`,{labId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return!0}catch(t){return t.response.status=="401"&&Q.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}},e1e=async({labId:e})=>{try{const t=await ce.post(`${pu}/admin/approval/getLaboratoryDetails`,{labId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log("labdata",t.data),t.data.laboratory}catch(t){return t.response.status=="401"&&Q.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}};function t1e(){const[e,t]=T.useState([]),r=async()=>{const n=await WWe();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex ml-5",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 p-2",children:[d.jsx("h1",{className:"w-[50%] h-[5vh] p-4 bg-blue-500 flex justify-center items-center mt-10 ",children:"Doctors Approval Requests"}),e.length>0&&e.map((n,i)=>d.jsx("div",{className:"h-auto w-[80%] ml-5 flex",children:d.jsx(GWe,{user:n})},i))]})})}nt.extend($i);function r1e(e){var n,i,a;const{user:t}=e,r=Zt();return d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:t==null?void 0:t.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{className:"flex justify-center w-full text-emerald-500",children:`${t==null?void 0:t.laboratoryName}`})}),d.jsx("div",{className:"w-full h-auto bg-black bg-opacity-20 p-2",children:d.jsx("h4",{className:"flex justify-center w-full text-black",children:`Owner : ${t==null?void 0:t.ownerName}`})}),d.jsx("div",{className:"location w-full h-auto bg-black bg-opacity-20 p-2",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(os,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:`place : ${(n=t.addressId)==null?void 0:n.place}`}),d.jsx("span",{className:"flex items-center",children:`district : ${(i=t.addressId)==null?void 0:i.district}`}),d.jsx("span",{className:"flex items-center",children:`pincode : ${(a=t.addressId)==null?void 0:a.pincode}`})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsx("h1",{className:"w-full h-[5vh] p-4 bg-blue-500 flex justify-center items-center text-white ",children:"Laboratory"}),d.jsx("div",{className:" grid grid-cols-2 gap-2 ",children:d.jsx("a",{href:t==null?void 0:t.license,className:"bg-black bg-opacity-5 p-2",download:"license.pdf",target:"_blank",rel:"noopener noreferrer",children:"License"})}),d.jsx("div",{className:"w-full h-auto flex gap-2",children:d.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",onClick:o=>r(`/admin/approval/laboratoryDetails?labId=${t._id}`),children:"View Details"})})]})]})})}function n1e(){const[e,t]=T.useState([]),r=async()=>{const n=await KWe();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex ml-5",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 p-2 mt-10",children:[d.jsx("h1",{className:"w-[40%] h-[5vh] p-4 bg-blue-500 flex justify-center items-center ",children:"Pharmacies"}),e.length>0&&e.map((n,i)=>d.jsx("div",{className:"h-auto w-[80%] ml-5 flex",children:d.jsx(r1e,{user:n})},i))]})})}nt.extend($i);function i1e(e){var n,i,a;const{user:t}=e,r=Zt();return d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:t==null?void 0:t.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{className:"flex justify-center w-full text-emerald-500",children:`${t==null?void 0:t.pharmacyName}`})}),d.jsx("div",{className:"w-full h-auto bg-black bg-opacity-20 p-2",children:d.jsx("h4",{className:"flex justify-center w-full text-black",children:`Owner : ${t==null?void 0:t.ownerName}`})}),d.jsx("div",{className:"location w-full h-auto bg-black bg-opacity-20 p-2",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(os,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:`place : ${(n=t.addressId)==null?void 0:n.place}`}),d.jsx("span",{className:"flex items-center",children:`district : ${(i=t.addressId)==null?void 0:i.district}`}),d.jsx("span",{className:"flex items-center",children:`pincode : ${(a=t.addressId)==null?void 0:a.pincode}`})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsx("h1",{className:"w-full h-[5vh] p-4 bg-blue-500 flex justify-center items-center text-white ",children:"Pharmacy"}),d.jsx("div",{className:" grid grid-cols-2 gap-2 ",children:d.jsx("a",{href:t==null?void 0:t.license,className:"bg-black bg-opacity-5 p-2",download:"license.pdf",target:"_blank",rel:"noopener noreferrer",children:"License"})}),d.jsx("div",{className:"w-full h-auto flex gap-2",children:d.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",onClick:o=>r(`/admin/approval/pharmacyDetails?pharmacyId=${t._id}`),children:"View Details"})})]})]})})}function a1e(){const[e,t]=T.useState([]),r=async()=>{const n=await qWe();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex ml-5",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 p-2 mt-10",children:[d.jsx("h1",{className:"w-[40%] h-[5vh] p-4 bg-blue-500 flex justify-center items-center ",children:"Pharmacies"}),e.length>0&&e.map((n,i)=>d.jsx("div",{className:"h-auto w-[80%] ml-5 flex",children:d.jsx(i1e,{user:n})},i))]})})}function o1e(){const[e]=yf(),t=e.get("doctorId");T.useState("");const r=Sr({initialValues:{firstName:"",lastName:"",category:"",height:"",weight:"",place:"",state:"",district:"",country:"",pincode:"",profileImage:"",bloodGroup:"",age:"",license:"",specialization:"",tenInstitutionName:"",twelfthInstitutionName:"",collegeInstitutionName:"",tenCertificate:"",twelfthCertificate:"",collegeCertificate:""},validationSchema:"",onSubmit:async(a,o)=>{}}),n=async a=>{await XWe({doctorId:t})&&Q.fire("Approved","","success")},i=async()=>{const a=await YWe({doctorId:t});a&&(r.setFieldValue("firstName",a.firstName),r.setFieldValue("lastName",a.lastName),r.setFieldValue("weight",a.weight),r.setFieldValue("height",a.height),r.setFieldValue("age",a.age),r.setFieldValue("license",a.license),r.setFieldValue("bloodGroup",a.bloodGroup),r.setFieldValue("profileImage",a.profileImage),r.setFieldValue("bloodGroup",a.bloodGroup),r.setFieldValue("place",a.addressId.place),r.setFieldValue("district",a.addressId.district),r.setFieldValue("country",a.addressId.country),r.setFieldValue("pincode",a.addressId.pincode),r.setFieldValue("category",a.category),r.setFieldValue("specialization",a.specialization),r.setFieldValue("tenInstitutionName",a.educationId.tenInstutionName),r.setFieldValue("twelfthInstitutionName",a.educationId.twelfthInstutionName),r.setFieldValue("collegeInstitutionName",a.educationId.collegeInstutionName),r.setFieldValue("tenCertificate",a.educationId.tenCertificate),r.setFieldValue("twelfthCertificate",a.educationId.twelfthCertificate),r.setFieldValue("collegeCertificate",a.educationId.collegeCertificate))};return T.useEffect(()=>{i()},[]),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Form has been submitted to Admin"}),d.jsx("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:d.jsx("img",{src:r.values.profileImage||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"})}),d.jsx(ie,{variant:"filled",label:"First Name",name:"firstName",value:r.values.firstName,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Last Name",name:"lastName",value:r.values.lastName,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Age",name:"age",value:r.values.age,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Blood Group",name:"bloodGroup",value:r.values.bloodGroup,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Height",name:"height",value:r.values.height,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Weight",name:"weight",value:r.values.weight,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Category",name:"category",value:r.values.category,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Specialization",name:"specialization",value:r.values.specialization,onChange:r.handleChange}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-4 justify-center items-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:r.values.license,download:"licence.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download license"})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(ie,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:r.handleChange,value:r.values.houseName}),d.jsx(ie,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:r.handleChange,value:r.values.place}),d.jsx(ie,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:r.handleChange,value:r.values.district}),d.jsx(ie,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:r.handleChange,value:r.values.state}),d.jsx(ie,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:r.handleChange,value:r.values.country}),d.jsx(ie,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:r.handleChange,value:r.values.pincode})]})}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Educational Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-5",children:[d.jsx(ie,{variant:"filled",label:"Ten Institution Name ",className:"font-bold flex ",name:"tenInstitutionName",onChange:r.handleChange,value:r.values.tenInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:r.values.tenCertificate,download:"tenCertificate.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download tenth Certificate"})})})}),d.jsx(ie,{variant:"filled",label:"Twelfth Institution Name ",className:"font-bold flex ",name:"twelfthInstitutionName",onChange:r.handleChange,value:r.values.twelfthInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:r.values.twelfthCertificate,download:"twelfthCertificate.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download twelfth Certificate"})})})}),d.jsx(ie,{variant:"filled",label:"College Institution Name ",className:"font-bold flex ",name:"collegeInstitutionName",onChange:r.handleChange,value:r.values.collegeInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:r.values.collegeCertificate,download:"collegeCertificate.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download college Certificate"})})})})]})}),d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",children:"Reject"}),d.jsx("button",{type:"button",className:"cancel w-full h-auto p-2 bg-emerald-500 font-medium flex items-center justify-center",onClick:a=>n(),children:"Approve"})]})]})})})}function s1e(){const[e]=yf(),t=e.get("pharmacyId");T.useState("");const r=Sr({initialValues:{pharmacyName:"",ownerName:"",profileImage:"",houseName:"",license:"",place:"",state:"",district:"",country:"",pincode:""},validationSchema:"",onSubmit:async(a,o)=>{}}),n=async a=>{await JWe({pharmacyId:t})&&Q.fire("Approved","","success")},i=async()=>{const a=await QWe({pharmacyId:t});a&&(r.setFieldValue("pharmacyName",a.pharmacyName),r.setFieldValue("ownerName",a.ownerName),r.setFieldValue("license",a.license),r.setFieldValue("profileImage",a.profileImage),r.setFieldValue("place",a.addressId.place),r.setFieldValue("district",a.addressId.district),r.setFieldValue("country",a.addressId.country),r.setFieldValue("pincode",a.addressId.pincode))};return T.useEffect(()=>{i()},[]),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Form has been submitted to Admin"}),d.jsx("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:d.jsx("img",{src:r.values.profileImage||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"})}),d.jsx(ie,{variant:"filled",label:"Pharmacy Name",name:"pharmacyName",value:r.values.pharmacyName,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Owner Name",name:"ownerName",value:r.values.ownerName,onChange:r.handleChange}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-4 justify-center items-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:r.values.license,download:"licence.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download license"})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(ie,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:r.handleChange,value:r.values.houseName}),d.jsx(ie,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:r.handleChange,value:r.values.place}),d.jsx(ie,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:r.handleChange,value:r.values.district}),d.jsx(ie,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:r.handleChange,value:r.values.state}),d.jsx(ie,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:r.handleChange,value:r.values.country}),d.jsx(ie,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:r.handleChange,value:r.values.pincode})]})}),d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",children:"Reject"}),d.jsx("button",{type:"button",className:"cancel w-full h-auto p-2 bg-emerald-500 font-medium flex items-center justify-center",onClick:a=>n(),children:"Approve"})]})]})})})}function l1e(){var a;const[e]=yf(),t=e.get("labId");T.useState("");const r=Sr({initialValues:{pharmacyName:"",ownerName:"",profileImage:"",houseName:"",license:"",place:"",state:"",district:"",country:"",pincode:""},validationSchema:"",onSubmit:async(o,s)=>{}}),n=async o=>{await ZWe({labId:t})&&Q.fire("Approved","","success")},i=async()=>{var s;const o=await e1e({labId:t});o&&(r.setFieldValue("laboratoryName",o.laboratoryName),r.setFieldValue("ownerName",o.ownerName),r.setFieldValue("license",o.license),r.setFieldValue("profileImage",o.profileImage),r.setFieldValue("place",(s=o==null?void 0:o.addressId)==null?void 0:s.place),r.setFieldValue("district",o.addressId.district),r.setFieldValue("country",o.addressId.country),r.setFieldValue("pincode",o.addressId.pincode))};return T.useEffect(()=>{i()},[]),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Form has been submitted to Admin"}),d.jsx("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:d.jsx("img",{src:r.values.profileImage||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"})}),d.jsx(ie,{variant:"filled",label:"Laboratory Name",name:"pharmacyName",value:r.values.laboratoryName,onChange:r.handleChange}),d.jsx(ie,{variant:"filled",label:"Owner Name",name:"ownerName",value:r.values.ownerName,onChange:r.handleChange}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-4 justify-center items-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:r.values.license,download:"licence.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download license"})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(ie,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:r.handleChange,value:(a=r.values)==null?void 0:a.houseName}),d.jsx(ie,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:r.handleChange,value:r.values.place}),d.jsx(ie,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:r.handleChange,value:r.values.district}),d.jsx(ie,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:r.handleChange,value:r.values.state}),d.jsx(ie,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:r.handleChange,value:r.values.country}),d.jsx(ie,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:r.handleChange,value:r.values.pincode})]})}),d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",children:"Reject"}),d.jsx("button",{type:"button",className:"cancel w-full h-auto p-2 bg-emerald-500 font-medium flex items-center justify-center",onClick:o=>n(),children:"Approve"})]})]})})})}function Bae(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Bae(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Wh(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Bae(e))&&(n&&(n+=" "),n+=t);return n}function $ae(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const c1e={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Hae(e,t,r=void 0){const n={};for(const i in e){const a=e[i];let o="",s=!0;for(let l=0;l<a.length;l+=1){const c=a[l];c&&(o+=(s===!0?"":" ")+t(c),s=!1,r&&r[c]&&(o+=" "+r[c]))}n[i]=o}return n}const u1e=T.createContext(),d1e=()=>T.useContext(u1e)??!1;function i9(e){try{return e.matches(":focus-visible")}catch{}return!1}var zae={exports:{}},un={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nU=Symbol.for("react.transitional.element"),iU=Symbol.for("react.portal"),Ux=Symbol.for("react.fragment"),Fx=Symbol.for("react.strict_mode"),Vx=Symbol.for("react.profiler"),Bx=Symbol.for("react.consumer"),$x=Symbol.for("react.context"),Hx=Symbol.for("react.forward_ref"),zx=Symbol.for("react.suspense"),Gx=Symbol.for("react.suspense_list"),Wx=Symbol.for("react.memo"),Kx=Symbol.for("react.lazy"),h1e=Symbol.for("react.offscreen"),f1e=Symbol.for("react.client.reference");function qs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case nU:switch(e=e.type,e){case Ux:case Vx:case Fx:case zx:case Gx:return e;default:switch(e=e&&e.$$typeof,e){case $x:case Hx:case Kx:case Wx:return e;case Bx:return e;default:return t}}case iU:return t}}}un.ContextConsumer=Bx;un.ContextProvider=$x;un.Element=nU;un.ForwardRef=Hx;un.Fragment=Ux;un.Lazy=Kx;un.Memo=Wx;un.Portal=iU;un.Profiler=Vx;un.StrictMode=Fx;un.Suspense=zx;un.SuspenseList=Gx;un.isContextConsumer=function(e){return qs(e)===Bx};un.isContextProvider=function(e){return qs(e)===$x};un.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===nU};un.isForwardRef=function(e){return qs(e)===Hx};un.isFragment=function(e){return qs(e)===Ux};un.isLazy=function(e){return qs(e)===Kx};un.isMemo=function(e){return qs(e)===Wx};un.isPortal=function(e){return qs(e)===iU};un.isProfiler=function(e){return qs(e)===Vx};un.isStrictMode=function(e){return qs(e)===Fx};un.isSuspense=function(e){return qs(e)===zx};un.isSuspenseList=function(e){return qs(e)===Gx};un.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ux||e===Vx||e===Fx||e===zx||e===Gx||e===h1e||typeof e=="object"&&e!==null&&(e.$$typeof===Kx||e.$$typeof===Wx||e.$$typeof===$x||e.$$typeof===Bx||e.$$typeof===Hx||e.$$typeof===f1e||e.getModuleId!==void 0)};un.typeOf=qs;zae.exports=un;var Gae=zae.exports;function $c(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Wae(e){if(T.isValidElement(e)||Gae.isValidElementType(e)||!$c(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=Wae(e[r])}),t}function Ko(e,t,r={clone:!0}){const n=r.clone?{...e}:e;return $c(e)&&$c(t)&&Object.keys(t).forEach(i=>{T.isValidElement(t[i])||Gae.isValidElementType(t[i])?n[i]=t[i]:$c(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&$c(e[i])?n[i]=Ko(e[i],t[i],r):r.clone?n[i]=$c(t[i])?Wae(t[i]):t[i]:n[i]=t[i]}),n}function ff(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>r.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${r} for the full message.`}function Od(e){if(typeof e!="string")throw new Error(ff(7));return e.charAt(0).toUpperCase()+e.slice(1)}function p1e(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let a9=0;function m1e(e){const[t,r]=T.useState(e),n=e||t;return T.useEffect(()=>{t==null&&(a9+=1,r(`mui-${a9}`))},[t]),n}const g1e={...B0},o9=g1e.useId;function Kae(e){if(o9!==void 0){const t=o9();return e??t}return m1e(e)}function y1e({controlled:e,default:t,name:r,state:n="value"}){const{current:i}=T.useRef(e!==void 0),[a,o]=T.useState(t),s=i?e:a,l=T.useCallback(c=>{i||o(c)},[]);return[s,l]}function qae(...e){return T.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{p1e(r,t)})},e)}function xD(e,t){const r={...t};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=n;if(i==="components"||i==="slots")r[i]={...e[i],...r[i]};else if(i==="componentsProps"||i==="slotProps"){const a=e[i],o=t[i];if(!o)r[i]=a||{};else if(!a)r[i]=o;else{r[i]={...o};for(const s in a)if(Object.prototype.hasOwnProperty.call(a,s)){const l=s;r[i][l]=xD(a[l],o[l])}}}else r[i]===void 0&&(r[i]=e[i])}return r}const s9=e=>e,v1e=()=>{let e=s9;return{configure(t){e=t},generate(t){return e(t)},reset(){e=s9}}},b1e=v1e(),w1e={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function aU(e,t,r="Mui"){const n=w1e[t];return n?`${r}-${n}`:`${b1e.generate(e)}-${t}`}function Yae(e,t,r="Mui"){const n={};return t.forEach(i=>{n[i]=aU(e,i,r)}),n}function E1e(e){return typeof e=="string"}function _1e(e,t,r){return e===void 0||E1e(e)?t:{...t,ownerState:{...t.ownerState,...r}}}function S1e(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function l9(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function T1e(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:a}=e;if(!t){const p=Wh(r==null?void 0:r.className,a,i==null?void 0:i.className,n==null?void 0:n.className),m={...r==null?void 0:r.style,...i==null?void 0:i.style,...n==null?void 0:n.style},g={...r,...i,...n};return p.length>0&&(g.className=p),Object.keys(m).length>0&&(g.style=m),{props:g,internalRef:void 0}}const o=S1e({...i,...n}),s=l9(n),l=l9(i),c=t(o),u=Wh(c==null?void 0:c.className,r==null?void 0:r.className,a,i==null?void 0:i.className,n==null?void 0:n.className),h={...c==null?void 0:c.style,...r==null?void 0:r.style,...i==null?void 0:i.style,...n==null?void 0:n.style},f={...c,...r,...l,...s};return u.length>0&&(f.className=u),Object.keys(h).length>0&&(f.style=h),{props:f,internalRef:c.ref}}function C1e(e,t,r){return typeof e=="function"?e(t,r):e}function F0(e,t){return t?Ko(e,t,{clone:!1}):e}function x1e(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,i)=>{var o,s;const a=/min-width:\s*([0-9.]+)/;return+(((o=n.match(a))==null?void 0:o[1])||0)-+(((s=i.match(a))==null?void 0:s[1])||0)});return r.length?r.reduce((n,i)=>{const a=t[i];return delete n[i],n[i]=a,n},{...t}):t}function R1e(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function I1e(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,i]=r,a=Number.isNaN(+n)?n||0:+n;return e.containerQueries(i).up(a)}function N1e(e){const t=(a,o)=>a.replace("@media",o?`@container ${o}`:"@container");function r(a,o){a.up=(...s)=>t(e.breakpoints.up(...s),o),a.down=(...s)=>t(e.breakpoints.down(...s),o),a.between=(...s)=>t(e.breakpoints.between(...s),o),a.only=(...s)=>t(e.breakpoints.only(...s),o),a.not=(...s)=>{const l=t(e.breakpoints.not(...s),o);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const n={},i=a=>(r(n,a),n);return r(i),{...e,containerQueries:i}}const qx={xs:0,sm:600,md:900,lg:1200,xl:1536},c9={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${qx[e]}px)`},A1e={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:qx[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function cu(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const a=n.breakpoints||c9;return t.reduce((o,s,l)=>(o[a.up(a.keys[l])]=r(t[l]),o),{})}if(typeof t=="object"){const a=n.breakpoints||c9;return Object.keys(t).reduce((o,s)=>{if(R1e(a.keys,s)){const l=I1e(n.containerQueries?n:A1e,s);l&&(o[l]=r(t[s],s))}else if(Object.keys(a.values||qx).includes(s)){const l=a.up(s);o[l]=r(t[s],s)}else{const l=s;o[l]=t[l]}return o},{})}return r(t)}function O1e(e={}){var r;return((r=e.keys)==null?void 0:r.reduce((n,i)=>{const a=e.up(i);return n[a]={},n},{}))||{}}function k1e(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function Yx(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,a)=>i&&i[a]?i[a]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function PT(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=Yx(e,r)||n,t&&(i=t(i,n,e)),i}function bi(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,a=o=>{if(o[t]==null)return null;const s=o[t],l=o.theme,c=Yx(l,n)||{};return cu(o,s,h=>{let f=PT(c,i,h);return h===f&&typeof h=="string"&&(f=PT(c,i,`${t}${h==="default"?"":Od(h)}`,h)),r===!1?f:{[r]:f}})};return a.propTypes={},a.filterProps=[t],a}function P1e(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const D1e={m:"margin",p:"padding"},L1e={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},u9={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},j1e=P1e(e=>{if(e.length>2)if(u9[e])e=u9[e];else return[e];const[t,r]=e.split(""),n=D1e[t],i=L1e[r]||"";return Array.isArray(i)?i.map(a=>n+a):[n+i]}),oU=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],sU=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...oU,...sU];function qb(e,t,r,n){const i=Yx(e,t,!0)??r;return typeof i=="number"||typeof i=="string"?a=>typeof a=="string"?a:typeof i=="string"?i.startsWith("var(")&&a===0?0:i.startsWith("var(")&&a===1?i:`calc(${a} * ${i})`:i*a:Array.isArray(i)?a=>{if(typeof a=="string")return a;const o=Math.abs(a),s=i[o];return a>=0?s:typeof s=="number"?-s:typeof s=="string"&&s.startsWith("var(")?`calc(-1 * ${s})`:`-${s}`}:typeof i=="function"?i:()=>{}}function lU(e){return qb(e,"spacing",8)}function Yb(e,t){return typeof t=="string"||t==null?t:e(t)}function M1e(e,t){return r=>e.reduce((n,i)=>(n[i]=Yb(t,r),n),{})}function U1e(e,t,r,n){if(!t.includes(r))return null;const i=j1e(r),a=M1e(i,n),o=e[r];return cu(e,o,a)}function Xae(e,t){const r=lU(e.theme);return Object.keys(e).map(n=>U1e(e,t,n,r)).reduce(F0,{})}function Xn(e){return Xae(e,oU)}Xn.propTypes={};Xn.filterProps=oU;function Jn(e){return Xae(e,sU)}Jn.propTypes={};Jn.filterProps=sU;function Xx(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(a=>{n[a]=i}),n),{}),r=n=>Object.keys(n).reduce((i,a)=>t[a]?F0(i,t[a](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function As(e){return typeof e!="number"?e:`${e}px solid`}function Ys(e,t){return bi({prop:e,themeKey:"borders",transform:t})}const F1e=Ys("border",As),V1e=Ys("borderTop",As),B1e=Ys("borderRight",As),$1e=Ys("borderBottom",As),H1e=Ys("borderLeft",As),z1e=Ys("borderColor"),G1e=Ys("borderTopColor"),W1e=Ys("borderRightColor"),K1e=Ys("borderBottomColor"),q1e=Ys("borderLeftColor"),Y1e=Ys("outline",As),X1e=Ys("outlineColor"),Jx=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=qb(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:Yb(t,n)});return cu(e,e.borderRadius,r)}return null};Jx.propTypes={};Jx.filterProps=["borderRadius"];Xx(F1e,V1e,B1e,$1e,H1e,z1e,G1e,W1e,K1e,q1e,Jx,Y1e,X1e);const Qx=e=>{if(e.gap!==void 0&&e.gap!==null){const t=qb(e.theme,"spacing",8),r=n=>({gap:Yb(t,n)});return cu(e,e.gap,r)}return null};Qx.propTypes={};Qx.filterProps=["gap"];const Zx=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=qb(e.theme,"spacing",8),r=n=>({columnGap:Yb(t,n)});return cu(e,e.columnGap,r)}return null};Zx.propTypes={};Zx.filterProps=["columnGap"];const eR=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=qb(e.theme,"spacing",8),r=n=>({rowGap:Yb(t,n)});return cu(e,e.rowGap,r)}return null};eR.propTypes={};eR.filterProps=["rowGap"];const J1e=bi({prop:"gridColumn"}),Q1e=bi({prop:"gridRow"}),Z1e=bi({prop:"gridAutoFlow"}),eKe=bi({prop:"gridAutoColumns"}),tKe=bi({prop:"gridAutoRows"}),rKe=bi({prop:"gridTemplateColumns"}),nKe=bi({prop:"gridTemplateRows"}),iKe=bi({prop:"gridTemplateAreas"}),aKe=bi({prop:"gridArea"});Xx(Qx,Zx,eR,J1e,Q1e,Z1e,eKe,tKe,rKe,nKe,iKe,aKe);function Sm(e,t){return t==="grey"?t:e}const oKe=bi({prop:"color",themeKey:"palette",transform:Sm}),sKe=bi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Sm}),lKe=bi({prop:"backgroundColor",themeKey:"palette",transform:Sm});Xx(oKe,sKe,lKe);function Mo(e){return e<=1&&e!==0?`${e*100}%`:e}const cKe=bi({prop:"width",transform:Mo}),cU=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var i,a,o,s,l;const n=((o=(a=(i=e.theme)==null?void 0:i.breakpoints)==null?void 0:a.values)==null?void 0:o[r])||qx[r];return n?((l=(s=e.theme)==null?void 0:s.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Mo(r)}};return cu(e,e.maxWidth,t)}return null};cU.filterProps=["maxWidth"];const uKe=bi({prop:"minWidth",transform:Mo}),dKe=bi({prop:"height",transform:Mo}),hKe=bi({prop:"maxHeight",transform:Mo}),fKe=bi({prop:"minHeight",transform:Mo});bi({prop:"size",cssProperty:"width",transform:Mo});bi({prop:"size",cssProperty:"height",transform:Mo});const pKe=bi({prop:"boxSizing"});Xx(cKe,cU,uKe,dKe,hKe,fKe,pKe);const tR={border:{themeKey:"borders",transform:As},borderTop:{themeKey:"borders",transform:As},borderRight:{themeKey:"borders",transform:As},borderBottom:{themeKey:"borders",transform:As},borderLeft:{themeKey:"borders",transform:As},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:As},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Jx},color:{themeKey:"palette",transform:Sm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Sm},backgroundColor:{themeKey:"palette",transform:Sm},p:{style:Jn},pt:{style:Jn},pr:{style:Jn},pb:{style:Jn},pl:{style:Jn},px:{style:Jn},py:{style:Jn},padding:{style:Jn},paddingTop:{style:Jn},paddingRight:{style:Jn},paddingBottom:{style:Jn},paddingLeft:{style:Jn},paddingX:{style:Jn},paddingY:{style:Jn},paddingInline:{style:Jn},paddingInlineStart:{style:Jn},paddingInlineEnd:{style:Jn},paddingBlock:{style:Jn},paddingBlockStart:{style:Jn},paddingBlockEnd:{style:Jn},m:{style:Xn},mt:{style:Xn},mr:{style:Xn},mb:{style:Xn},ml:{style:Xn},mx:{style:Xn},my:{style:Xn},margin:{style:Xn},marginTop:{style:Xn},marginRight:{style:Xn},marginBottom:{style:Xn},marginLeft:{style:Xn},marginX:{style:Xn},marginY:{style:Xn},marginInline:{style:Xn},marginInlineStart:{style:Xn},marginInlineEnd:{style:Xn},marginBlock:{style:Xn},marginBlockStart:{style:Xn},marginBlockEnd:{style:Xn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Qx},rowGap:{style:eR},columnGap:{style:Zx},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Mo},maxWidth:{style:cU},minWidth:{transform:Mo},height:{transform:Mo},maxHeight:{transform:Mo},minHeight:{transform:Mo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function mKe(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function gKe(e,t){return typeof e=="function"?e(t):e}function yKe(){function e(r,n,i,a){const o={[r]:n,theme:i},s=a[r];if(!s)return{[r]:n};const{cssProperty:l=r,themeKey:c,transform:u,style:h}=s;if(n==null)return null;if(c==="typography"&&n==="inherit")return{[r]:n};const f=Yx(i,c)||{};return h?h(o):cu(o,n,m=>{let g=PT(f,u,m);return m===g&&typeof m=="string"&&(g=PT(f,u,`${r}${m==="default"?"":Od(m)}`,m)),l===!1?g:{[l]:g}})}function t(r){const{sx:n,theme:i={}}=r||{};if(!n)return null;const a=i.unstable_sxConfig??tR;function o(s){let l=s;if(typeof s=="function")l=s(i);else if(typeof s!="object")return s;if(!l)return null;const c=O1e(i.breakpoints),u=Object.keys(c);let h=c;return Object.keys(l).forEach(f=>{const p=gKe(l[f],i);if(p!=null)if(typeof p=="object")if(a[f])h=F0(h,e(f,p,i,a));else{const m=cu({theme:i},p,g=>({[f]:g}));mKe(m,p)?h[f]=t({sx:p,theme:i}):h=F0(h,m)}else h=F0(h,e(f,p,i,a))}),x1e(i,k1e(u,h))}return Array.isArray(n)?n.map(o):o(n)}return t}const ng=yKe();ng.filterProps=["sx"];function RD(){return RD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RD.apply(null,arguments)}var vKe=!1;function bKe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function wKe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var EKe=function(){function e(r){var n=this;this._insertTag=function(i){var a;n.tags.length===0?n.insertionPoint?a=n.insertionPoint.nextSibling:n.prepend?a=n.container.firstChild:a=n.before:a=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,a),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!vKe:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(wKe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=bKe(i);try{a.insertRule(n,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e}(),wa="-ms-",DT="-moz-",Pr="-webkit-",Jae="comm",uU="rule",dU="decl",_Ke="@import",Qae="@keyframes",SKe="@layer",TKe=Math.abs,rR=String.fromCharCode,CKe=Object.assign;function xKe(e,t){return ua(e,0)^45?(((t<<2^ua(e,0))<<2^ua(e,1))<<2^ua(e,2))<<2^ua(e,3):0}function Zae(e){return e.trim()}function RKe(e,t){return(e=t.exec(e))?e[0]:e}function Dr(e,t,r){return e.replace(t,r)}function ID(e,t){return e.indexOf(t)}function ua(e,t){return e.charCodeAt(t)|0}function Yv(e,t,r){return e.slice(t,r)}function zl(e){return e.length}function hU(e){return e.length}function UE(e,t){return t.push(e),e}function IKe(e,t){return e.map(t).join("")}var nR=1,ig=1,eoe=0,bo=0,Ci=0,Wg="";function iR(e,t,r,n,i,a,o){return{value:e,root:t,parent:r,type:n,props:i,children:a,line:nR,column:ig,length:o,return:""}}function Py(e,t){return CKe(iR("",null,null,"",null,null,0),e,{length:-e.length},t)}function NKe(){return Ci}function AKe(){return Ci=bo>0?ua(Wg,--bo):0,ig--,Ci===10&&(ig=1,nR--),Ci}function qo(){return Ci=bo<eoe?ua(Wg,bo++):0,ig++,Ci===10&&(ig=1,nR++),Ci}function oc(){return ua(Wg,bo)}function U_(){return bo}function Xb(e,t){return Yv(Wg,e,t)}function Xv(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function toe(e){return nR=ig=1,eoe=zl(Wg=e),bo=0,[]}function roe(e){return Wg="",e}function F_(e){return Zae(Xb(bo-1,ND(e===91?e+2:e===40?e+1:e)))}function OKe(e){for(;(Ci=oc())&&Ci<33;)qo();return Xv(e)>2||Xv(Ci)>3?"":" "}function kKe(e,t){for(;--t&&qo()&&!(Ci<48||Ci>102||Ci>57&&Ci<65||Ci>70&&Ci<97););return Xb(e,U_()+(t<6&&oc()==32&&qo()==32))}function ND(e){for(;qo();)switch(Ci){case e:return bo;case 34:case 39:e!==34&&e!==39&&ND(Ci);break;case 40:e===41&&ND(e);break;case 92:qo();break}return bo}function PKe(e,t){for(;qo()&&e+Ci!==57;)if(e+Ci===84&&oc()===47)break;return"/*"+Xb(t,bo-1)+"*"+rR(e===47?e:qo())}function DKe(e){for(;!Xv(oc());)qo();return Xb(e,bo)}function LKe(e){return roe(V_("",null,null,null,[""],e=toe(e),0,[0],e))}function V_(e,t,r,n,i,a,o,s,l){for(var c=0,u=0,h=o,f=0,p=0,m=0,g=1,y=1,v=1,b=0,E="",S=i,I=a,N=n,L=E;y;)switch(m=b,b=qo()){case 40:if(m!=108&&ua(L,h-1)==58){ID(L+=Dr(F_(b),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:L+=F_(b);break;case 9:case 10:case 13:case 32:L+=OKe(m);break;case 92:L+=kKe(U_()-1,7);continue;case 47:switch(oc()){case 42:case 47:UE(jKe(PKe(qo(),U_()),t,r),l);break;default:L+="/"}break;case 123*g:s[c++]=zl(L)*v;case 125*g:case 59:case 0:switch(b){case 0:case 125:y=0;case 59+u:v==-1&&(L=Dr(L,/\f/g,"")),p>0&&zl(L)-h&&UE(p>32?h9(L+";",n,r,h-1):h9(Dr(L," ","")+";",n,r,h-2),l);break;case 59:L+=";";default:if(UE(N=d9(L,t,r,c,u,i,s,E,S=[],I=[],h),a),b===123)if(u===0)V_(L,t,N,N,S,a,h,s,I);else switch(f===99&&ua(L,3)===110?100:f){case 100:case 108:case 109:case 115:V_(e,N,N,n&&UE(d9(e,N,N,0,0,i,s,E,i,S=[],h),I),i,I,h,s,n?S:I);break;default:V_(L,N,N,N,[""],I,0,s,I)}}c=u=p=0,g=v=1,E=L="",h=o;break;case 58:h=1+zl(L),p=m;default:if(g<1){if(b==123)--g;else if(b==125&&g++==0&&AKe()==125)continue}switch(L+=rR(b),b*g){case 38:v=u>0?1:(L+="\f",-1);break;case 44:s[c++]=(zl(L)-1)*v,v=1;break;case 64:oc()===45&&(L+=F_(qo())),f=oc(),u=h=zl(E=L+=DKe(U_())),b++;break;case 45:m===45&&zl(L)==2&&(g=0)}}return a}function d9(e,t,r,n,i,a,o,s,l,c,u){for(var h=i-1,f=i===0?a:[""],p=hU(f),m=0,g=0,y=0;m<n;++m)for(var v=0,b=Yv(e,h+1,h=TKe(g=o[m])),E=e;v<p;++v)(E=Zae(g>0?f[v]+" "+b:Dr(b,/&\f/g,f[v])))&&(l[y++]=E);return iR(e,t,r,i===0?uU:s,l,c,u)}function jKe(e,t,r){return iR(e,t,r,Jae,rR(NKe()),Yv(e,2,-2),0)}function h9(e,t,r,n){return iR(e,t,r,dU,Yv(e,0,n),Yv(e,n+1,-1),n)}function Tm(e,t){for(var r="",n=hU(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function MKe(e,t,r,n){switch(e.type){case SKe:if(e.children.length)break;case _Ke:case dU:return e.return=e.return||e.value;case Jae:return"";case Qae:return e.return=e.value+"{"+Tm(e.children,n)+"}";case uU:e.value=e.props.join(",")}return zl(r=Tm(e.children,n))?e.return=e.value+"{"+r+"}":""}function UKe(e){var t=hU(e);return function(r,n,i,a){for(var o="",s=0;s<t;s++)o+=e[s](r,n,i,a)||"";return o}}function FKe(e){return function(t){t.root||(t=t.return)&&e(t)}}var VKe=function(t,r,n){for(var i=0,a=0;i=a,a=oc(),i===38&&a===12&&(r[n]=1),!Xv(a);)qo();return Xb(t,bo)},BKe=function(t,r){var n=-1,i=44;do switch(Xv(i)){case 0:i===38&&oc()===12&&(r[n]=1),t[n]+=VKe(bo-1,r,n);break;case 2:t[n]+=F_(i);break;case 4:if(i===44){t[++n]=oc()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=rR(i)}while(i=qo());return t},$Ke=function(t,r){return roe(BKe(toe(t),r))},f9=new WeakMap,HKe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!f9.get(n))&&!i){f9.set(t,!0);for(var a=[],o=$Ke(r,a),s=n.props,l=0,c=0;l<o.length;l++)for(var u=0;u<s.length;u++,c++)t.props[c]=a[l]?o[l].replace(/&\f/g,s[u]):s[u]+" "+o[l]}}},zKe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function noe(e,t){switch(xKe(e,t)){case 5103:return Pr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Pr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Pr+e+DT+e+wa+e+e;case 6828:case 4268:return Pr+e+wa+e+e;case 6165:return Pr+e+wa+"flex-"+e+e;case 5187:return Pr+e+Dr(e,/(\w+).+(:[^]+)/,Pr+"box-$1$2"+wa+"flex-$1$2")+e;case 5443:return Pr+e+wa+"flex-item-"+Dr(e,/flex-|-self/,"")+e;case 4675:return Pr+e+wa+"flex-line-pack"+Dr(e,/align-content|flex-|-self/,"")+e;case 5548:return Pr+e+wa+Dr(e,"shrink","negative")+e;case 5292:return Pr+e+wa+Dr(e,"basis","preferred-size")+e;case 6060:return Pr+"box-"+Dr(e,"-grow","")+Pr+e+wa+Dr(e,"grow","positive")+e;case 4554:return Pr+Dr(e,/([^-])(transform)/g,"$1"+Pr+"$2")+e;case 6187:return Dr(Dr(Dr(e,/(zoom-|grab)/,Pr+"$1"),/(image-set)/,Pr+"$1"),e,"")+e;case 5495:case 3959:return Dr(e,/(image-set\([^]*)/,Pr+"$1$`$1");case 4968:return Dr(Dr(e,/(.+:)(flex-)?(.*)/,Pr+"box-pack:$3"+wa+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Pr+e+e;case 4095:case 3583:case 4068:case 2532:return Dr(e,/(.+)-inline(.+)/,Pr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(zl(e)-1-t>6)switch(ua(e,t+1)){case 109:if(ua(e,t+4)!==45)break;case 102:return Dr(e,/(.+:)(.+)-([^]+)/,"$1"+Pr+"$2-$3$1"+DT+(ua(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~ID(e,"stretch")?noe(Dr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ua(e,t+1)!==115)break;case 6444:switch(ua(e,zl(e)-3-(~ID(e,"!important")&&10))){case 107:return Dr(e,":",":"+Pr)+e;case 101:return Dr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Pr+(ua(e,14)===45?"inline-":"")+"box$3$1"+Pr+"$2$3$1"+wa+"$2box$3")+e}break;case 5936:switch(ua(e,t+11)){case 114:return Pr+e+wa+Dr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Pr+e+wa+Dr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Pr+e+wa+Dr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Pr+e+wa+e+e}return e}var GKe=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case dU:t.return=noe(t.value,t.length);break;case Qae:return Tm([Py(t,{value:Dr(t.value,"@","@"+Pr)})],i);case uU:if(t.length)return IKe(t.props,function(a){switch(RKe(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Tm([Py(t,{props:[Dr(a,/:(read-\w+)/,":"+DT+"$1")]})],i);case"::placeholder":return Tm([Py(t,{props:[Dr(a,/:(plac\w+)/,":"+Pr+"input-$1")]}),Py(t,{props:[Dr(a,/:(plac\w+)/,":"+DT+"$1")]}),Py(t,{props:[Dr(a,/:(plac\w+)/,wa+"input-$1")]})],i)}return""})}},WKe=[GKe],KKe=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(g){var y=g.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||WKe,a={},o,s=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(g){for(var y=g.getAttribute("data-emotion").split(" "),v=1;v<y.length;v++)a[y[v]]=!0;s.push(g)});var l,c=[HKe,zKe];{var u,h=[MKe,FKe(function(g){u.insert(g)})],f=UKe(c.concat(i,h)),p=function(y){return Tm(LKe(y),f)};l=function(y,v,b,E){u=b,p(y?y+"{"+v.styles+"}":v.styles),E&&(m.inserted[v.name]=!0)}}var m={key:r,sheet:new EKe({key:r,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:l};return m.sheet.hydrate(s),m},qKe=!0;function YKe(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var ioe=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||qKe===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},XKe=function(t,r,n){ioe(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var a=r;do t.insert(r===a?"."+i:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function JKe(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var QKe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function ZKe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var eqe=!1,tqe=/[A-Z]|^ms/g,rqe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,aoe=function(t){return t.charCodeAt(1)===45},p9=function(t){return t!=null&&typeof t!="boolean"},uO=ZKe(function(e){return aoe(e)?e:e.replace(tqe,"-$&").toLowerCase()}),m9=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(rqe,function(n,i,a){return Gl={name:i,styles:a,next:Gl},i})}return QKe[t]!==1&&!aoe(t)&&typeof r=="number"&&r!==0?r+"px":r},nqe="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Jv(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return Gl={name:i.name,styles:i.styles,next:Gl},i.name;var a=r;if(a.styles!==void 0){var o=a.next;if(o!==void 0)for(;o!==void 0;)Gl={name:o.name,styles:o.styles,next:Gl},o=o.next;var s=a.styles+";";return s}return iqe(e,t,r)}case"function":{if(e!==void 0){var l=Gl,c=r(e);return Gl=l,Jv(e,t,c)}break}}var u=r;if(t==null)return u;var h=t[u];return h!==void 0?h:u}function iqe(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=Jv(e,t,r[i])+";";else for(var a in r){var o=r[a];if(typeof o!="object"){var s=o;t!=null&&t[s]!==void 0?n+=a+"{"+t[s]+"}":p9(s)&&(n+=uO(a)+":"+m9(a,s)+";")}else{if(a==="NO_COMPONENT_SELECTOR"&&eqe)throw new Error(nqe);if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var l=0;l<o.length;l++)p9(o[l])&&(n+=uO(a)+":"+m9(a,o[l])+";");else{var c=Jv(e,t,o);switch(a){case"animation":case"animationName":{n+=uO(a)+":"+c+";";break}default:n+=a+"{"+c+"}"}}}}return n}var g9=/label:\s*([^\s;{]+)\s*(;|$)/g,Gl;function ooe(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";Gl=void 0;var a=e[0];if(a==null||a.raw===void 0)n=!1,i+=Jv(r,t,a);else{var o=a;i+=o[0]}for(var s=1;s<e.length;s++)if(i+=Jv(r,t,e[s]),n){var l=a;i+=l[s]}g9.lastIndex=0;for(var c="",u;(u=g9.exec(i))!==null;)c+="-"+u[1];var h=JKe(i)+c;return{name:h,styles:i,next:Gl}}var aqe=function(t){return t()},oqe=B0.useInsertionEffect?B0.useInsertionEffect:!1,sqe=oqe||aqe,soe=T.createContext(typeof HTMLElement<"u"?KKe({key:"css"}):null);soe.Provider;var lqe=function(t){return T.forwardRef(function(r,n){var i=T.useContext(soe);return t(r,i,n)})},cqe=T.createContext({});function uqe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var dqe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,hqe=uqe(function(e){return dqe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),fqe=!1,pqe=hqe,mqe=function(t){return t!=="theme"},y9=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?pqe:mqe},v9=function(t,r,n){var i;if(r){var a=r.shouldForwardProp;i=t.__emotion_forwardProp&&a?function(o){return t.__emotion_forwardProp(o)&&a(o)}:a}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},gqe=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return ioe(r,n,i),sqe(function(){return XKe(r,n,i)}),null},yqe=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,a,o;r!==void 0&&(a=r.label,o=r.target);var s=v9(t,r,n),l=s||y9(i),c=!l("as");return function(){var u=arguments,h=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(a!==void 0&&h.push("label:"+a+";"),u[0]==null||u[0].raw===void 0)h.push.apply(h,u);else{var f=u[0];h.push(f[0]);for(var p=u.length,m=1;m<p;m++)h.push(u[m],f[m])}var g=lqe(function(y,v,b){var E=c&&y.as||i,S="",I=[],N=y;if(y.theme==null){N={};for(var L in y)N[L]=y[L];N.theme=T.useContext(cqe)}typeof y.className=="string"?S=YKe(v.registered,I,y.className):y.className!=null&&(S=y.className+" ");var j=ooe(h.concat(I),v.registered,N);S+=v.key+"-"+j.name,o!==void 0&&(S+=" "+o);var z=c&&s===void 0?y9(E):l,A={};for(var V in y)c&&V==="as"||z(V)&&(A[V]=y[V]);return A.className=S,b&&(A.ref=b),T.createElement(T.Fragment,null,T.createElement(gqe,{cache:v,serialized:j,isStringTag:typeof E=="string"}),T.createElement(E,A))});return g.displayName=a!==void 0?a:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=i,g.__emotion_styles=h,g.__emotion_forwardProp=s,Object.defineProperty(g,"toString",{value:function(){return o===void 0&&fqe?"NO_COMPONENT_SELECTOR":"."+o}}),g.withComponent=function(y,v){var b=e(y,RD({},r,v,{shouldForwardProp:v9(g,v,!0)}));return b.apply(void 0,h)},g}},vqe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],AD=yqe.bind(null);vqe.forEach(function(e){AD[e]=AD(e)});function bqe(e,t){return AD(e,t)}function wqe(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const b9=[];function w9(e){return b9[0]=e,ooe(b9)}const Eqe=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>({...r,[n.key]:n.val}),{})};function _qe(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5,...i}=e,a=Eqe(t),o=Object.keys(a);function s(f){return`@media (min-width:${typeof t[f]=="number"?t[f]:f}${r})`}function l(f){return`@media (max-width:${(typeof t[f]=="number"?t[f]:f)-n/100}${r})`}function c(f,p){const m=o.indexOf(p);return`@media (min-width:${typeof t[f]=="number"?t[f]:f}${r}) and (max-width:${(m!==-1&&typeof t[o[m]]=="number"?t[o[m]]:p)-n/100}${r})`}function u(f){return o.indexOf(f)+1<o.length?c(f,o[o.indexOf(f)+1]):s(f)}function h(f){const p=o.indexOf(f);return p===0?s(o[1]):p===o.length-1?l(o[p]):c(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return{keys:o,values:a,up:s,down:l,between:c,only:u,not:h,unit:r,...i}}const Sqe={borderRadius:4};function loe(e=8,t=lU({spacing:e})){if(e.mui)return e;const r=(...n)=>(n.length===0?[1]:n).map(a=>{const o=t(a);return typeof o=="number"?`${o}px`:o}).join(" ");return r.mui=!0,r}function Tqe(e,t){var n;const r=this;if(r.vars){if(!((n=r.colorSchemes)!=null&&n[e])||typeof r.getColorSchemeSelector!="function")return{};let i=r.getColorSchemeSelector(e);return i==="&"?t:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:t})}return r.palette.mode===e?t:{}}function coe(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:a={},...o}=e,s=_qe(r),l=loe(i);let c=Ko({breakpoints:s,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:l,shape:{...Sqe,...a}},o);return c=N1e(c),c.applyStyles=Tqe,c=t.reduce((u,h)=>Ko(u,h),c),c.unstable_sxConfig={...tR,...o==null?void 0:o.unstable_sxConfig},c.unstable_sx=function(h){return ng({sx:h,theme:this})},c}function uoe(e){const{variants:t,...r}=e,n={variants:t,style:w9(r),isProcessed:!0};return n.style===r||t&&t.forEach(i=>{typeof i.style!="function"&&(i.style=w9(i.style))}),n}const Cqe=coe();function dO(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function xqe(e){return e?(t,r)=>r[e]:null}function Rqe(e,t,r){e.theme=Aqe(e.theme)?r:e.theme[t]||e.theme}function B_(e,t){const r=typeof t=="function"?t(e):t;if(Array.isArray(r))return r.flatMap(n=>B_(e,n));if(Array.isArray(r==null?void 0:r.variants)){let n;if(r.isProcessed)n=r.style;else{const{variants:i,...a}=r;n=a}return doe(e,r.variants,[n])}return r!=null&&r.isProcessed?r.style:r}function doe(e,t,r=[]){var i;let n;e:for(let a=0;a<t.length;a+=1){const o=t[a];if(typeof o.props=="function"){if(n??(n={...e,...e.ownerState,ownerState:e.ownerState}),!o.props(n))continue}else for(const s in o.props)if(e[s]!==o.props[s]&&((i=e.ownerState)==null?void 0:i[s])!==o.props[s])continue e;typeof o.style=="function"?(n??(n={...e,...e.ownerState,ownerState:e.ownerState}),r.push(o.style(n))):r.push(o.style)}return r}function Iqe(e={}){const{themeId:t,defaultTheme:r=Cqe,rootShouldForwardProp:n=dO,slotShouldForwardProp:i=dO}=e;function a(s){Rqe(s,t,r)}return(s,l={})=>{wqe(s,I=>I.filter(N=>N!==ng));const{name:c,slot:u,skipVariantsResolver:h,skipSx:f,overridesResolver:p=xqe(kqe(u)),...m}=l,g=h!==void 0?h:u&&u!=="Root"&&u!=="root"||!1,y=f||!1;let v=dO;u==="Root"||u==="root"?v=n:u?v=i:Oqe(s)&&(v=void 0);const b=bqe(s,{shouldForwardProp:v,label:Nqe(),...m}),E=I=>{if(typeof I=="function"&&I.__emotion_real!==I)return function(L){return B_(L,I)};if($c(I)){const N=uoe(I);return N.variants?function(j){return B_(j,N)}:N.style}return I},S=(...I)=>{const N=[],L=I.map(E),j=[];if(N.push(a),c&&p&&j.push(function(G){var K,P;const $=(P=(K=G.theme.components)==null?void 0:K[c])==null?void 0:P.styleOverrides;if(!$)return null;const B={};for(const D in $)B[D]=B_(G,$[D]);return p(G,B)}),c&&!g&&j.push(function(G){var B,K;const X=G.theme,$=(K=(B=X==null?void 0:X.components)==null?void 0:B[c])==null?void 0:K.variants;return $?doe(G,$):null}),y||j.push(ng),Array.isArray(L[0])){const V=L.shift(),G=new Array(N.length).fill(""),X=new Array(j.length).fill("");let $;$=[...G,...V,...X],$.raw=[...G,...V.raw,...X],N.unshift($)}const z=[...N,...L,...j],A=b(...z);return s.muiName&&(A.muiName=s.muiName),A};return b.withConfig&&(S.withConfig=b.withConfig),S}}function Nqe(e,t){return void 0}function Aqe(e){for(const t in e)return!1;return!0}function Oqe(e){return typeof e=="string"&&e.charCodeAt(0)>96}function kqe(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function fU(e,t=0,r=1){return $ae(e,t,r)}function Pqe(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function kd(e){if(e.type)return e;if(e.charAt(0)==="#")return kd(Pqe(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(ff(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(ff(10,i))}else n=n.split(",");return n=n.map(a=>parseFloat(a)),{type:r,values:n,colorSpace:i}}const Dqe=e=>{const t=kd(e);return t.values.slice(0,3).map((r,n)=>t.type.includes("hsl")&&n!==0?`${r}%`:r).join(" ")},r0=(e,t)=>{try{return Dqe(e)}catch{return e}};function aR(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((i,a)=>a<3?parseInt(i,10):i):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function hoe(e){e=kd(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,a=n*Math.min(i,1-i),o=(c,u=(c+r/30)%12)=>i-a*Math.max(Math.min(u-3,9-u,1),-1);let s="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(s+="a",l.push(t[3])),aR({type:s,values:l})}function OD(e){e=kd(e);let t=e.type==="hsl"||e.type==="hsla"?kd(hoe(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Lqe(e,t){const r=OD(e),n=OD(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function jqe(e,t){return e=kd(e),t=fU(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,aR(e)}function FE(e,t,r){try{return jqe(e,t)}catch{return e}}function pU(e,t){if(e=kd(e),t=fU(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return aR(e)}function nn(e,t,r){try{return pU(e,t)}catch{return e}}function mU(e,t){if(e=kd(e),t=fU(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return aR(e)}function an(e,t,r){try{return mU(e,t)}catch{return e}}function Mqe(e,t=.15){return OD(e)>.5?pU(e,t):mU(e,t)}function VE(e,t,r){try{return Mqe(e,t)}catch{return e}}const Uqe=T.createContext(void 0);function Fqe(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const i=t.components[r];return i.defaultProps?xD(i.defaultProps,n):!i.styleOverrides&&!i.variants?xD(i,n):n}function Vqe({props:e,name:t}){const r=T.useContext(Uqe);return Fqe({props:e,name:t,theme:{components:r}})}const E9={theme:void 0};function Bqe(e){let t,r;return function(i){let a=t;return(a===void 0||i.theme!==r)&&(E9.theme=i.theme,a=uoe(e(E9)),t=a,r=i.theme),a}}function $qe(e=""){function t(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${e?`${e}-`:""}${n}${t(...i)})`}const _9=(e,t,r,n=[])=>{let i=e;t.forEach((a,o)=>{o===t.length-1?Array.isArray(i)?i[Number(a)]=r:i&&typeof i=="object"&&(i[a]=r):i&&typeof i=="object"&&(i[a]||(i[a]=n.includes(a)?[]:{}),i=i[a])})},Hqe=(e,t,r)=>{function n(i,a=[],o=[]){Object.entries(i).forEach(([s,l])=>{(!r||r&&!r([...a,s]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?n(l,[...a,s],Array.isArray(l)?[...o,s]:o):t([...a,s],l,o))})}n(e)},zqe=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function hO(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},i={},a={},o={};return Hqe(e,(s,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!n||!n(s,l))){const u=`--${r?`${r}-`:""}${s.join("-")}`,h=zqe(s,l);Object.assign(i,{[u]:h}),_9(a,s,`var(${u})`,c),_9(o,s,`var(${u}, ${h})`,c)}},s=>s[0]==="vars"),{css:i,vars:a,varsWithDefaults:o}}function Gqe(e,t={}){const{getSelector:r=y,disableCssColorScheme:n,colorSchemeSelector:i}=t,{colorSchemes:a={},components:o,defaultColorScheme:s="light",...l}=e,{vars:c,css:u,varsWithDefaults:h}=hO(l,t);let f=h;const p={},{[s]:m,...g}=a;if(Object.entries(g||{}).forEach(([E,S])=>{const{vars:I,css:N,varsWithDefaults:L}=hO(S,t);f=Ko(f,L),p[E]={css:N,vars:I}}),m){const{css:E,vars:S,varsWithDefaults:I}=hO(m,t);f=Ko(f,I),p[s]={css:E,vars:S}}function y(E,S){var N,L;let I=i;if(i==="class"&&(I=".%s"),i==="data"&&(I="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(I=`[${i}="%s"]`),E){if(I==="media")return e.defaultColorScheme===E?":root":{[`@media (prefers-color-scheme: ${((L=(N=a[E])==null?void 0:N.palette)==null?void 0:L.mode)||E})`]:{":root":S}};if(I)return e.defaultColorScheme===E?`:root, ${I.replace("%s",String(E))}`:I.replace("%s",String(E))}return":root"}return{vars:f,generateThemeVars:()=>{let E={...c};return Object.entries(p).forEach(([,{vars:S}])=>{E=Ko(E,S)}),E},generateStyleSheets:()=>{var j,z;const E=[],S=e.defaultColorScheme||"light";function I(A,V){Object.keys(V).length&&E.push(typeof A=="string"?{[A]:{...V}}:A)}I(r(void 0,{...u}),u);const{[S]:N,...L}=p;if(N){const{css:A}=N,V=(z=(j=a[S])==null?void 0:j.palette)==null?void 0:z.mode,G=!n&&V?{colorScheme:V,...A}:{...A};I(r(S,{...G}),G)}return Object.entries(L).forEach(([A,{css:V}])=>{var $,B;const G=(B=($=a[A])==null?void 0:$.palette)==null?void 0:B.mode,X=!n&&G?{colorScheme:G,...V}:{...V};I(r(A,{...X}),X)}),E}}}function Wqe(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}const Qv={black:"#000",white:"#fff"},Kqe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},mp={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},gp={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Dy={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},yp={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},vp={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},bp={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function foe(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Qv.white,default:Qv.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const qqe=foe();function poe(){return{text:{primary:Qv.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Qv.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const S9=poe();function T9(e,t,r,n){const i=n.light||n,a=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=mU(e.main,i):t==="dark"&&(e.dark=pU(e.main,a)))}function Yqe(e="light"){return e==="dark"?{main:yp[200],light:yp[50],dark:yp[400]}:{main:yp[700],light:yp[400],dark:yp[800]}}function Xqe(e="light"){return e==="dark"?{main:mp[200],light:mp[50],dark:mp[400]}:{main:mp[500],light:mp[300],dark:mp[700]}}function Jqe(e="light"){return e==="dark"?{main:gp[500],light:gp[300],dark:gp[700]}:{main:gp[700],light:gp[400],dark:gp[800]}}function Qqe(e="light"){return e==="dark"?{main:vp[400],light:vp[300],dark:vp[700]}:{main:vp[700],light:vp[500],dark:vp[900]}}function Zqe(e="light"){return e==="dark"?{main:bp[400],light:bp[300],dark:bp[700]}:{main:bp[800],light:bp[500],dark:bp[900]}}function eYe(e="light"){return e==="dark"?{main:Dy[400],light:Dy[300],dark:Dy[700]}:{main:"#ed6c02",light:Dy[500],dark:Dy[900]}}function gU(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2,...i}=e,a=e.primary||Yqe(t),o=e.secondary||Xqe(t),s=e.error||Jqe(t),l=e.info||Qqe(t),c=e.success||Zqe(t),u=e.warning||eYe(t);function h(g){return Lqe(g,S9.text.primary)>=r?S9.text.primary:qqe.text.primary}const f=({color:g,name:y,mainShade:v=500,lightShade:b=300,darkShade:E=700})=>{if(g={...g},!g.main&&g[v]&&(g.main=g[v]),!g.hasOwnProperty("main"))throw new Error(ff(11,y?` (${y})`:"",v));if(typeof g.main!="string")throw new Error(ff(12,y?` (${y})`:"",JSON.stringify(g.main)));return T9(g,"light",b,n),T9(g,"dark",E,n),g.contrastText||(g.contrastText=h(g.main)),g};let p;return t==="light"?p=foe():t==="dark"&&(p=poe()),Ko({common:{...Qv},mode:t,primary:f({color:a,name:"primary"}),secondary:f({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:s,name:"error"}),warning:f({color:u,name:"warning"}),info:f({color:l,name:"info"}),success:f({color:c,name:"success"}),grey:Kqe,contrastThreshold:r,getContrastText:h,augmentColor:f,tonalOffset:n,...p},i)}function tYe(e){const t={};return Object.entries(e).forEach(n=>{const[i,a]=n;typeof a=="object"&&(t[i]=`${a.fontStyle?`${a.fontStyle} `:""}${a.fontVariant?`${a.fontVariant} `:""}${a.fontWeight?`${a.fontWeight} `:""}${a.fontStretch?`${a.fontStretch} `:""}${a.fontSize||""}${a.lineHeight?`/${a.lineHeight} `:""}${a.fontFamily||""}`)}),t}function rYe(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function nYe(e){return Math.round(e*1e5)/1e5}const C9={textTransform:"uppercase"},x9='"Roboto", "Helvetica", "Arial", sans-serif';function iYe(e,t){const{fontFamily:r=x9,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:a=400,fontWeightMedium:o=500,fontWeightBold:s=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...h}=typeof t=="function"?t(e):t,f=n/14,p=u||(y=>`${y/l*f}rem`),m=(y,v,b,E,S)=>({fontFamily:r,fontWeight:y,fontSize:p(v),lineHeight:b,...r===x9?{letterSpacing:`${nYe(E/v)}em`}:{},...S,...c}),g={h1:m(i,96,1.167,-1.5),h2:m(i,60,1.2,-.5),h3:m(a,48,1.167,0),h4:m(a,34,1.235,.25),h5:m(a,24,1.334,0),h6:m(o,20,1.6,.15),subtitle1:m(a,16,1.75,.15),subtitle2:m(o,14,1.57,.1),body1:m(a,16,1.5,.15),body2:m(a,14,1.43,.15),button:m(o,14,1.75,.4,C9),caption:m(a,12,1.66,.4),overline:m(a,12,2.66,1,C9),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ko({htmlFontSize:l,pxToRem:p,fontFamily:r,fontSize:n,fontWeightLight:i,fontWeightRegular:a,fontWeightMedium:o,fontWeightBold:s,...g},h,{clone:!1})}const aYe=.2,oYe=.14,sYe=.12;function In(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${aYe})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${oYe})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${sYe})`].join(",")}const lYe=["none",In(0,2,1,-1,0,1,1,0,0,1,3,0),In(0,3,1,-2,0,2,2,0,0,1,5,0),In(0,3,3,-2,0,3,4,0,0,1,8,0),In(0,2,4,-1,0,4,5,0,0,1,10,0),In(0,3,5,-1,0,5,8,0,0,1,14,0),In(0,3,5,-1,0,6,10,0,0,1,18,0),In(0,4,5,-2,0,7,10,1,0,2,16,1),In(0,5,5,-3,0,8,10,1,0,3,14,2),In(0,5,6,-3,0,9,12,1,0,3,16,2),In(0,6,6,-3,0,10,14,1,0,4,18,3),In(0,6,7,-4,0,11,15,1,0,4,20,3),In(0,7,8,-4,0,12,17,2,0,5,22,4),In(0,7,8,-4,0,13,19,2,0,5,24,4),In(0,7,9,-4,0,14,21,2,0,5,26,4),In(0,8,9,-5,0,15,22,2,0,6,28,5),In(0,8,10,-5,0,16,24,2,0,6,30,5),In(0,8,11,-5,0,17,26,2,0,6,32,5),In(0,9,11,-5,0,18,28,2,0,7,34,6),In(0,9,12,-6,0,19,29,2,0,7,36,6),In(0,10,13,-6,0,20,31,3,0,8,38,7),In(0,10,13,-6,0,21,33,3,0,8,40,7),In(0,10,14,-6,0,22,35,3,0,8,42,7),In(0,11,14,-7,0,23,36,3,0,9,44,8),In(0,11,15,-7,0,24,38,3,0,9,46,8)],cYe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},uYe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function R9(e){return`${Math.round(e)}ms`}function dYe(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function hYe(e){const t={...cYe,...e.easing},r={...uYe,...e.duration};return{getAutoHeightDuration:dYe,create:(i=["all"],a={})=>{const{duration:o=r.standard,easing:s=t.easeInOut,delay:l=0,...c}=a;return(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof o=="string"?o:R9(o)} ${s} ${typeof l=="string"?l:R9(l)}`).join(",")},...e,easing:t,duration:r}}const fYe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function pYe(e){return $c(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function moe(e={}){const t={...e};function r(n){const i=Object.entries(n);for(let a=0;a<i.length;a++){const[o,s]=i[a];!pYe(s)||o.startsWith("unstable_")?delete n[o]:$c(s)&&(n[o]={...s},r(n[o]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function kD(e={},...t){const{breakpoints:r,mixins:n={},spacing:i,palette:a={},transitions:o={},typography:s={},shape:l,...c}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(ff(20));const u=gU(a),h=coe(e);let f=Ko(h,{mixins:rYe(h.breakpoints,n),palette:u,shadows:lYe.slice(),typography:iYe(u,s),transitions:hYe(o),zIndex:{...fYe}});return f=Ko(f,c),f=t.reduce((p,m)=>Ko(p,m),f),f.unstable_sxConfig={...tR,...c==null?void 0:c.unstable_sxConfig},f.unstable_sx=function(m){return ng({sx:m,theme:this})},f.toRuntimeSource=moe,f}function mYe(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const gYe=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=mYe(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function goe(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function yoe(e){return e==="dark"?gYe:[]}function yYe(e){const{palette:t={mode:"light"},opacity:r,overlays:n,...i}=e,a=gU(t);return{palette:a,opacity:{...goe(a.mode),...r},overlays:n||yoe(a.mode),...i}}function vYe(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const bYe=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],wYe=e=>(t,r)=>{const n=e.rootSelector||":root",i=e.colorSchemeSelector;let a=i;if(i==="class"&&(a=".%s"),i==="data"&&(a="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(a=`[${i}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return bYe(e.cssVarPrefix).forEach(s=>{o[s]=r[s],delete r[s]}),a==="media"?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:o}}:a?{[a.replace("%s",t)]:o,[`${n}, ${a.replace("%s",t)}`]:r}:{[n]:{...r,...o}}}if(a&&a!=="media")return`${n}, ${a.replace("%s",String(t))}`}else if(t){if(a==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:r}};if(a)return a.replace("%s",String(t))}return n};function EYe(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function me(e,t,r){!e[t]&&r&&(e[t]=r)}function n0(e){return typeof e!="string"||!e.startsWith("hsl")?e:hoe(e)}function Nc(e,t){`${t}Channel`in e||(e[`${t}Channel`]=r0(n0(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function _Ye(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Ul=e=>{try{return e()}catch{}},SYe=(e="mui")=>$qe(e);function fO(e,t,r,n){if(!t)return;t=t===!0?{}:t;const i=n==="dark"?"dark":"light";if(!r){e[n]=yYe({...t,palette:{mode:i,...t==null?void 0:t.palette}});return}const{palette:a,...o}=kD({...r,palette:{mode:i,...t==null?void 0:t.palette}});return e[n]={...t,palette:a,opacity:{...goe(i),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||yoe(i)},o}function TYe(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:n,disableCssColorScheme:i=!1,cssVarPrefix:a="mui",shouldSkipGeneratingVar:o=vYe,colorSchemeSelector:s=r.light&&r.dark?"media":void 0,rootSelector:l=":root",...c}=e,u=Object.keys(r)[0],h=n||(r.light&&u!=="light"?"light":u),f=SYe(a),{[h]:p,light:m,dark:g,...y}=r,v={...y};let b=p;if((h==="dark"&&!("dark"in r)||h==="light"&&!("light"in r))&&(b=!0),!b)throw new Error(ff(21,h));const E=fO(v,b,c,h);m&&!v.light&&fO(v,m,void 0,"light"),g&&!v.dark&&fO(v,g,void 0,"dark");let S={defaultColorScheme:h,...E,cssVarPrefix:a,colorSchemeSelector:s,rootSelector:l,getCssVar:f,colorSchemes:v,font:{...tYe(E.typography),...E.font},spacing:_Ye(c.spacing)};Object.keys(S.colorSchemes).forEach(z=>{const A=S.colorSchemes[z].palette,V=G=>{const X=G.split("-"),$=X[1],B=X[2];return f(G,A[$][B])};if(A.mode==="light"&&(me(A.common,"background","#fff"),me(A.common,"onBackground","#000")),A.mode==="dark"&&(me(A.common,"background","#000"),me(A.common,"onBackground","#fff")),EYe(A,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),A.mode==="light"){me(A.Alert,"errorColor",nn(A.error.light,.6)),me(A.Alert,"infoColor",nn(A.info.light,.6)),me(A.Alert,"successColor",nn(A.success.light,.6)),me(A.Alert,"warningColor",nn(A.warning.light,.6)),me(A.Alert,"errorFilledBg",V("palette-error-main")),me(A.Alert,"infoFilledBg",V("palette-info-main")),me(A.Alert,"successFilledBg",V("palette-success-main")),me(A.Alert,"warningFilledBg",V("palette-warning-main")),me(A.Alert,"errorFilledColor",Ul(()=>A.getContrastText(A.error.main))),me(A.Alert,"infoFilledColor",Ul(()=>A.getContrastText(A.info.main))),me(A.Alert,"successFilledColor",Ul(()=>A.getContrastText(A.success.main))),me(A.Alert,"warningFilledColor",Ul(()=>A.getContrastText(A.warning.main))),me(A.Alert,"errorStandardBg",an(A.error.light,.9)),me(A.Alert,"infoStandardBg",an(A.info.light,.9)),me(A.Alert,"successStandardBg",an(A.success.light,.9)),me(A.Alert,"warningStandardBg",an(A.warning.light,.9)),me(A.Alert,"errorIconColor",V("palette-error-main")),me(A.Alert,"infoIconColor",V("palette-info-main")),me(A.Alert,"successIconColor",V("palette-success-main")),me(A.Alert,"warningIconColor",V("palette-warning-main")),me(A.AppBar,"defaultBg",V("palette-grey-100")),me(A.Avatar,"defaultBg",V("palette-grey-400")),me(A.Button,"inheritContainedBg",V("palette-grey-300")),me(A.Button,"inheritContainedHoverBg",V("palette-grey-A100")),me(A.Chip,"defaultBorder",V("palette-grey-400")),me(A.Chip,"defaultAvatarColor",V("palette-grey-700")),me(A.Chip,"defaultIconColor",V("palette-grey-700")),me(A.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),me(A.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),me(A.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),me(A.LinearProgress,"primaryBg",an(A.primary.main,.62)),me(A.LinearProgress,"secondaryBg",an(A.secondary.main,.62)),me(A.LinearProgress,"errorBg",an(A.error.main,.62)),me(A.LinearProgress,"infoBg",an(A.info.main,.62)),me(A.LinearProgress,"successBg",an(A.success.main,.62)),me(A.LinearProgress,"warningBg",an(A.warning.main,.62)),me(A.Skeleton,"bg",`rgba(${V("palette-text-primaryChannel")} / 0.11)`),me(A.Slider,"primaryTrack",an(A.primary.main,.62)),me(A.Slider,"secondaryTrack",an(A.secondary.main,.62)),me(A.Slider,"errorTrack",an(A.error.main,.62)),me(A.Slider,"infoTrack",an(A.info.main,.62)),me(A.Slider,"successTrack",an(A.success.main,.62)),me(A.Slider,"warningTrack",an(A.warning.main,.62));const G=VE(A.background.default,.8);me(A.SnackbarContent,"bg",G),me(A.SnackbarContent,"color",Ul(()=>A.getContrastText(G))),me(A.SpeedDialAction,"fabHoverBg",VE(A.background.paper,.15)),me(A.StepConnector,"border",V("palette-grey-400")),me(A.StepContent,"border",V("palette-grey-400")),me(A.Switch,"defaultColor",V("palette-common-white")),me(A.Switch,"defaultDisabledColor",V("palette-grey-100")),me(A.Switch,"primaryDisabledColor",an(A.primary.main,.62)),me(A.Switch,"secondaryDisabledColor",an(A.secondary.main,.62)),me(A.Switch,"errorDisabledColor",an(A.error.main,.62)),me(A.Switch,"infoDisabledColor",an(A.info.main,.62)),me(A.Switch,"successDisabledColor",an(A.success.main,.62)),me(A.Switch,"warningDisabledColor",an(A.warning.main,.62)),me(A.TableCell,"border",an(FE(A.divider,1),.88)),me(A.Tooltip,"bg",FE(A.grey[700],.92))}if(A.mode==="dark"){me(A.Alert,"errorColor",an(A.error.light,.6)),me(A.Alert,"infoColor",an(A.info.light,.6)),me(A.Alert,"successColor",an(A.success.light,.6)),me(A.Alert,"warningColor",an(A.warning.light,.6)),me(A.Alert,"errorFilledBg",V("palette-error-dark")),me(A.Alert,"infoFilledBg",V("palette-info-dark")),me(A.Alert,"successFilledBg",V("palette-success-dark")),me(A.Alert,"warningFilledBg",V("palette-warning-dark")),me(A.Alert,"errorFilledColor",Ul(()=>A.getContrastText(A.error.dark))),me(A.Alert,"infoFilledColor",Ul(()=>A.getContrastText(A.info.dark))),me(A.Alert,"successFilledColor",Ul(()=>A.getContrastText(A.success.dark))),me(A.Alert,"warningFilledColor",Ul(()=>A.getContrastText(A.warning.dark))),me(A.Alert,"errorStandardBg",nn(A.error.light,.9)),me(A.Alert,"infoStandardBg",nn(A.info.light,.9)),me(A.Alert,"successStandardBg",nn(A.success.light,.9)),me(A.Alert,"warningStandardBg",nn(A.warning.light,.9)),me(A.Alert,"errorIconColor",V("palette-error-main")),me(A.Alert,"infoIconColor",V("palette-info-main")),me(A.Alert,"successIconColor",V("palette-success-main")),me(A.Alert,"warningIconColor",V("palette-warning-main")),me(A.AppBar,"defaultBg",V("palette-grey-900")),me(A.AppBar,"darkBg",V("palette-background-paper")),me(A.AppBar,"darkColor",V("palette-text-primary")),me(A.Avatar,"defaultBg",V("palette-grey-600")),me(A.Button,"inheritContainedBg",V("palette-grey-800")),me(A.Button,"inheritContainedHoverBg",V("palette-grey-700")),me(A.Chip,"defaultBorder",V("palette-grey-700")),me(A.Chip,"defaultAvatarColor",V("palette-grey-300")),me(A.Chip,"defaultIconColor",V("palette-grey-300")),me(A.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),me(A.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),me(A.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),me(A.LinearProgress,"primaryBg",nn(A.primary.main,.5)),me(A.LinearProgress,"secondaryBg",nn(A.secondary.main,.5)),me(A.LinearProgress,"errorBg",nn(A.error.main,.5)),me(A.LinearProgress,"infoBg",nn(A.info.main,.5)),me(A.LinearProgress,"successBg",nn(A.success.main,.5)),me(A.LinearProgress,"warningBg",nn(A.warning.main,.5)),me(A.Skeleton,"bg",`rgba(${V("palette-text-primaryChannel")} / 0.13)`),me(A.Slider,"primaryTrack",nn(A.primary.main,.5)),me(A.Slider,"secondaryTrack",nn(A.secondary.main,.5)),me(A.Slider,"errorTrack",nn(A.error.main,.5)),me(A.Slider,"infoTrack",nn(A.info.main,.5)),me(A.Slider,"successTrack",nn(A.success.main,.5)),me(A.Slider,"warningTrack",nn(A.warning.main,.5));const G=VE(A.background.default,.98);me(A.SnackbarContent,"bg",G),me(A.SnackbarContent,"color",Ul(()=>A.getContrastText(G))),me(A.SpeedDialAction,"fabHoverBg",VE(A.background.paper,.15)),me(A.StepConnector,"border",V("palette-grey-600")),me(A.StepContent,"border",V("palette-grey-600")),me(A.Switch,"defaultColor",V("palette-grey-300")),me(A.Switch,"defaultDisabledColor",V("palette-grey-600")),me(A.Switch,"primaryDisabledColor",nn(A.primary.main,.55)),me(A.Switch,"secondaryDisabledColor",nn(A.secondary.main,.55)),me(A.Switch,"errorDisabledColor",nn(A.error.main,.55)),me(A.Switch,"infoDisabledColor",nn(A.info.main,.55)),me(A.Switch,"successDisabledColor",nn(A.success.main,.55)),me(A.Switch,"warningDisabledColor",nn(A.warning.main,.55)),me(A.TableCell,"border",nn(FE(A.divider,1),.68)),me(A.Tooltip,"bg",FE(A.grey[700],.92))}Nc(A.background,"default"),Nc(A.background,"paper"),Nc(A.common,"background"),Nc(A.common,"onBackground"),Nc(A,"divider"),Object.keys(A).forEach(G=>{const X=A[G];G!=="tonalOffset"&&X&&typeof X=="object"&&(X.main&&me(A[G],"mainChannel",r0(n0(X.main))),X.light&&me(A[G],"lightChannel",r0(n0(X.light))),X.dark&&me(A[G],"darkChannel",r0(n0(X.dark))),X.contrastText&&me(A[G],"contrastTextChannel",r0(n0(X.contrastText))),G==="text"&&(Nc(A[G],"primary"),Nc(A[G],"secondary")),G==="action"&&(X.active&&Nc(A[G],"active"),X.selected&&Nc(A[G],"selected")))})}),S=t.reduce((z,A)=>Ko(z,A),S);const I={prefix:a,disableCssColorScheme:i,shouldSkipGeneratingVar:o,getSelector:wYe(S)},{vars:N,generateThemeVars:L,generateStyleSheets:j}=Gqe(S,I);return S.vars=N,Object.entries(S.colorSchemes[S.defaultColorScheme]).forEach(([z,A])=>{S[z]=A}),S.generateThemeVars=L,S.generateStyleSheets=j,S.generateSpacing=function(){return loe(c.spacing,lU(this))},S.getColorSchemeSelector=Wqe(s),S.spacing=S.generateSpacing(),S.shouldSkipGeneratingVar=o,S.unstable_sxConfig={...tR,...c==null?void 0:c.unstable_sxConfig},S.unstable_sx=function(A){return ng({sx:A,theme:this})},S.toRuntimeSource=moe,S}function I9(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:gU({...r===!0?{}:r.palette,mode:t})})}function CYe(e={},...t){const{palette:r,cssVariables:n=!1,colorSchemes:i=r?void 0:{light:!0},defaultColorScheme:a=r==null?void 0:r.mode,...o}=e,s=a||"light",l=i==null?void 0:i[s],c={...i,...r?{[s]:{...typeof l!="boolean"&&l,palette:r}}:void 0};if(n===!1){if(!("colorSchemes"in e))return kD(e,...t);let u=r;"palette"in e||c[s]&&(c[s]!==!0?u=c[s].palette:s==="dark"&&(u={mode:"dark"}));const h=kD({...e,palette:u},...t);return h.defaultColorScheme=s,h.colorSchemes=c,h.palette.mode==="light"&&(h.colorSchemes.light={...c.light!==!0&&c.light,palette:h.palette},I9(h,"dark",c.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:h.palette},I9(h,"light",c.light)),h}return!r&&!("light"in c)&&s==="light"&&(c.light=!0),TYe({...o,colorSchemes:c,defaultColorScheme:s,...typeof n!="boolean"&&n},...t)}const xYe=CYe(),RYe="$$material";function voe(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const IYe=e=>voe(e)&&e!=="classes",Jb=Iqe({themeId:RYe,defaultTheme:xYe,rootShouldForwardProp:IYe}),yU=Bqe;function boe(e){return Vqe(e)}function NYe(e){return aU("MuiSvgIcon",e)}Yae("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const AYe=e=>{const{color:t,fontSize:r,classes:n}=e,i={root:["root",t!=="inherit"&&`color${Od(t)}`,`fontSize${Od(r)}`]};return Hae(i,NYe,n)},OYe=Jb("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${Od(r.color)}`],t[`fontSize${Od(r.fontSize)}`]]}})(yU(({theme:e})=>{var t,r,n,i,a,o,s,l,c,u,h,f,p,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(t=e.transitions)==null?void 0:t.create)==null?void 0:i.call(t,"fill",{duration:(n=(r=(e.vars??e).transitions)==null?void 0:r.duration)==null?void 0:n.shorter}),variants:[{props:g=>!g.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(a=e.typography)==null?void 0:a.pxToRem)==null?void 0:o.call(a,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(s=e.typography)==null?void 0:s.pxToRem)==null?void 0:l.call(s,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=e.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,g])=>g&&g.main).map(([g])=>{var y,v;return{props:{color:g},style:{color:(v=(y=(e.vars??e).palette)==null?void 0:y[g])==null?void 0:v.main}}}),{props:{color:"action"},style:{color:(f=(h=(e.vars??e).palette)==null?void 0:h.action)==null?void 0:f.active}},{props:{color:"disabled"},style:{color:(m=(p=(e.vars??e).palette)==null?void 0:p.action)==null?void 0:m.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),PD=T.forwardRef(function(t,r){const n=boe({props:t,name:"MuiSvgIcon"}),{children:i,className:a,color:o="inherit",component:s="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:f="0 0 24 24",...p}=n,m=T.isValidElement(i)&&i.type==="svg",g={...n,color:o,component:s,fontSize:l,instanceFontSize:t.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:m},y={};u||(y.viewBox=f);const v=AYe(g);return d.jsxs(OYe,{as:s,className:Wh(v.root,a),focusable:"false",color:c,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:r,...y,...p,...m&&i.props,ownerState:g,children:[m?i.props.children:i,h?d.jsx("title",{children:h}):null]})});PD.muiName="SvgIcon";function woe(e,t){function r(n,i){return d.jsx(PD,{"data-testid":void 0,ref:i,...n,children:e})}return r.muiName=PD.muiName,T.memo(T.forwardRef(r))}const kYe=woe(d.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),PYe=woe(d.jsx("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}));function DYe(e){return aU("MuiRating",e)}const Ly=Yae("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]);function V0(e,t){const{className:r,elementType:n,ownerState:i,externalForwardedProps:a,internalForwardedProps:o,shouldForwardComponentProp:s=!1,...l}=t,{component:c,slots:u={[e]:void 0},slotProps:h={[e]:void 0},...f}=a,p=u[e]||n,m=C1e(h[e],i),{props:{component:g,...y},internalRef:v}=T1e({className:r,...l,externalForwardedProps:e==="root"?f:void 0,externalSlotProps:m}),b=qae(v,m==null?void 0:m.ref,t.ref),E=e==="root"?g||c:g,S=_1e(p,{...e==="root"&&!c&&!u[e]&&o,...e!=="root"&&!u[e]&&o,...y,...E&&!s&&{as:E},...E&&s&&{component:E},ref:b},i);return[p,S]}function LYe(e){const t=e.toString().split(".")[1];return t?t.length:0}function pO(e,t){if(e==null)return e;const r=Math.round(e/t)*t;return Number(r.toFixed(LYe(t)))}const jYe=e=>{const{classes:t,size:r,readOnly:n,disabled:i,emptyValueFocused:a,focusVisible:o}=e,s={root:["root",`size${Od(r)}`,i&&"disabled",o&&"focusVisible",n&&"readOnly"],label:["label","pristine"],labelEmptyValue:[a&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return Hae(s,DYe,t)},MYe=Jb("span",{name:"MuiRating",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Ly.visuallyHidden}`]:t.visuallyHidden},t.root,t[`size${Od(r.size)}`],r.readOnly&&t.readOnly]}})(yU(({theme:e})=>({display:"inline-flex",position:"relative",fontSize:e.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",width:"min-content",WebkitTapHighlightColor:"transparent",[`&.${Ly.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Ly.focusVisible} .${Ly.iconActive}`]:{outline:"1px solid #999"},[`& .${Ly.visuallyHidden}`]:c1e,variants:[{props:{size:"small"},style:{fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{fontSize:e.typography.pxToRem(30)}},{props:({ownerState:t})=>t.readOnly,style:{pointerEvents:"none"}}]}))),Eoe=Jb("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:e},t)=>[t.label,e.emptyValueFocused&&t.labelEmptyValueActive]})({cursor:"inherit",variants:[{props:({ownerState:e})=>e.emptyValueFocused,style:{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"}}]}),UYe=Jb("span",{name:"MuiRating",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.iconEmpty&&t.iconEmpty,r.iconFilled&&t.iconFilled,r.iconHover&&t.iconHover,r.iconFocus&&t.iconFocus,r.iconActive&&t.iconActive]}})(yU(({theme:e})=>({display:"flex",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),pointerEvents:"none",variants:[{props:({ownerState:t})=>t.iconActive,style:{transform:"scale(1.2)"}},{props:({ownerState:t})=>t.iconEmpty,style:{color:(e.vars||e).palette.action.disabled}}]}))),FYe=Jb("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:e=>voe(e)&&e!=="iconActive",overridesResolver:(e,t)=>{const{iconActive:r}=e;return[t.decimal,r&&t.iconActive]}})({position:"relative",variants:[{props:({iconActive:e})=>e,style:{transform:"scale(1.2)"}}]});function VYe(e){const{value:t,...r}=e;return d.jsx("span",{...r})}function N9(e){const{classes:t,disabled:r,emptyIcon:n,focus:i,getLabelText:a,highlightSelectedOnly:o,hover:s,icon:l,IconContainerComponent:c,isActive:u,itemValue:h,labelProps:f,name:p,onBlur:m,onChange:g,onClick:y,onFocus:v,readOnly:b,ownerState:E,ratingValue:S,ratingValueRounded:I,slots:N={},slotProps:L={}}=e,j=o?h===S:h<=S,z=h<=s,A=h<=i,V=h===I,G=`${p}-${Kae()}`,X={slots:N,slotProps:L},[$,B]=V0("icon",{elementType:UYe,className:Wh(t.icon,j?t.iconFilled:t.iconEmpty,z&&t.iconHover,A&&t.iconFocus,u&&t.iconActive),externalForwardedProps:X,ownerState:{...E,iconEmpty:!j,iconFilled:j,iconHover:z,iconFocus:A,iconActive:u},additionalProps:{value:h},internalForwardedProps:{as:c}}),[K,P]=V0("label",{elementType:Eoe,externalForwardedProps:X,ownerState:{...E,emptyValueFocused:void 0},additionalProps:{style:f==null?void 0:f.style,htmlFor:G}}),D=d.jsx($,{...B,children:n&&!j?n:l});return b?d.jsx("span",{...f,children:D}):d.jsxs(T.Fragment,{children:[d.jsxs(K,{...P,children:[D,d.jsx("span",{className:t.visuallyHidden,children:a(h)})]}),d.jsx("input",{className:t.visuallyHidden,onFocus:v,onBlur:m,onChange:g,onClick:y,disabled:r,value:h,id:G,type:"radio",name:p,checked:V})]})}const BYe=d.jsx(kYe,{fontSize:"inherit"}),$Ye=d.jsx(PYe,{fontSize:"inherit"});function HYe(e){return`${e||"0"} Star${e!==1?"s":""}`}const _oe=T.forwardRef(function(t,r){const n=boe({name:"MuiRating",props:t}),{component:i="span",className:a,defaultValue:o=null,disabled:s=!1,emptyIcon:l=$Ye,emptyLabelText:c="Empty",getLabelText:u=HYe,highlightSelectedOnly:h=!1,icon:f=BYe,IconContainerComponent:p=VYe,max:m=5,name:g,onChange:y,onChangeActive:v,onMouseLeave:b,onMouseMove:E,precision:S=1,readOnly:I=!1,size:N="medium",value:L,slots:j={},slotProps:z={},...A}=n,V=Kae(g),[G,X]=y1e({controlled:L,default:o,name:"Rating"}),$=pO(G,S),B=d1e(),[{hover:K,focus:P},D]=T.useState({hover:-1,focus:-1});let H=$;K!==-1&&(H=K),P!==-1&&(H=P);const[x,w]=T.useState(!1),O=T.useRef(),C=qae(O,r),q=Re=>{E&&E(Re);const Z=O.current,{right:Te,left:Fe,width:He}=Z.getBoundingClientRect();let ne;B?ne=(Te-Re.clientX)/He:ne=(Re.clientX-Fe)/He;let pe=pO(m*ne+S/2,S);pe=$ae(pe,S,m),D(We=>We.hover===pe&&We.focus===pe?We:{hover:pe,focus:pe}),w(!1),v&&K!==pe&&v(Re,pe)},F=Re=>{b&&b(Re);const Z=-1;D({hover:Z,focus:Z}),v&&K!==Z&&v(Re,Z)},J=Re=>{let Z=Re.target.value===""?null:parseFloat(Re.target.value);K!==-1&&(Z=K),X(Z),y&&y(Re,Z)},se=Re=>{Re.clientX===0&&Re.clientY===0||(D({hover:-1,focus:-1}),X(null),y&&parseFloat(Re.target.value)===$&&y(Re,null))},he=Re=>{i9(Re.target)&&w(!0);const Z=parseFloat(Re.target.value);D(Te=>({hover:Te.hover,focus:Z}))},ge=Re=>{if(K!==-1)return;i9(Re.target)||w(!1);const Z=-1;D(Te=>({hover:Te.hover,focus:Z}))},[je,ze]=T.useState(!1),Me={...n,component:i,defaultValue:o,disabled:s,emptyIcon:l,emptyLabelText:c,emptyValueFocused:je,focusVisible:x,getLabelText:u,icon:f,IconContainerComponent:p,max:m,precision:S,readOnly:I,size:N},tt=jYe(Me),Tt={slots:j,slotProps:z},[rt,yt]=V0("root",{ref:C,className:Wh(tt.root,a),elementType:MYe,externalForwardedProps:{...Tt,...A,component:i},getSlotProps:Re=>({...Re,onMouseMove:Z=>{var Te;q(Z),(Te=Re.onMouseMove)==null||Te.call(Re,Z)},onMouseLeave:Z=>{var Te;F(Z),(Te=Re.onMouseLeave)==null||Te.call(Re,Z)}}),ownerState:Me,additionalProps:{role:I?"img":null,"aria-label":I?u(H):null}}),[Oe,it]=V0("label",{className:Wh(tt.label,tt.labelEmptyValue),elementType:Eoe,externalForwardedProps:Tt,ownerState:Me}),[Ge,Ze]=V0("decimal",{className:tt.decimal,elementType:FYe,externalForwardedProps:Tt,ownerState:Me});return d.jsxs(rt,{...yt,children:[Array.from(new Array(m)).map((Re,Z)=>{const Te=Z+1,Fe={classes:tt,disabled:s,emptyIcon:l,focus:P,getLabelText:u,highlightSelectedOnly:h,hover:K,icon:f,IconContainerComponent:p,name:V,onBlur:ge,onChange:J,onClick:se,onFocus:he,ratingValue:H,ratingValueRounded:$,readOnly:I,ownerState:Me,slots:j,slotProps:z},He=Te===Math.ceil(H)&&(K!==-1||P!==-1);if(S<1){const ne=Array.from(new Array(1/S));return T.createElement(Ge,{...Ze,key:Te,className:Wh(Ze.className,He&&tt.iconActive),iconActive:He},ne.map((pe,We)=>{const st=pO(Te-1+(We+1)*S,S);return d.jsx(N9,{...Fe,isActive:!1,itemValue:st,labelProps:{style:ne.length-1===We?{}:{width:st===H?`${(We+1)*S*100}%`:"0%",overflow:"hidden",position:"absolute"}}},st)}))}return d.jsx(N9,{...Fe,isActive:He,itemValue:Te},Te)}),!I&&!s&&d.jsxs(Oe,{...it,children:[d.jsx("input",{className:tt.visuallyHidden,value:"",id:`${V}-empty`,type:"radio",name:V,checked:$==null,onFocus:()=>ze(!0),onBlur:()=>ze(!1),onChange:J}),d.jsx("span",{className:tt.visuallyHidden,children:c})]})]})}),vU="https://hcompanion.onrender.com/api",zYe=async({doctorId:e,comment:t,rating:r})=>{var n,i,a;try{const o=await ce.post(`${vU}/patient/review/add`,{doctorId:e,comment:t,rating:r},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return!0}catch(o){return console.log(o),((n=o.response)==null?void 0:n.status)=="500"&&((a=(i=o.response)==null?void 0:i.data)!=null&&a.errorServer)&&Q.fire("Server Error","","error"),!1}},GYe=async({doctorId:e})=>{var t,r,n;try{return(await ce.post(`${vU}/patient/review/onLoad`,{doctorId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.review}catch(i){return console.log(i),((t=i.response)==null?void 0:t.status)=="500"&&((n=(r=i.response)==null?void 0:r.data)!=null&&n.errorServer)&&Q.fire("Server Error","","error"),!1}},WYe=async({doctorId:e})=>{var t,r,n;try{const i=await ce.post(`${vU}/patient/review/doctor/reviews`,{doctorId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(i.data),i.data.reviews}catch(i){return console.log(i),((t=i.response)==null?void 0:t.status)=="500"&&((n=(r=i.response)==null?void 0:r.data)!=null&&n.errorServer)&&Q.fire("Server Error","","error"),!1}};function KYe(e){const[t,r]=T.useState(2),[n,i]=T.useState(void 0),[a]=yf(),o=a.get("doctorId"),s=Sr({initialValues:{comment:"",rating:2},validationSchema:"",onSubmit:async(u,h)=>{await zYe({...u,doctorId:o})&&Q.fire("added review","","success")}}),l=async()=>{const u=await GYe({doctorId:o});s.setFieldValue("comment",u==null?void 0:u.comment),s.setFieldValue("rating",u==null?void 0:u.rating)};T.useEffect(()=>{l()},[]);const c=async()=>{console.log("kkkkk")};return d.jsxs("form",{onSubmit:s.handleSubmit,className:"w-full h-[70vh] flex flex-col gap-8 mt-10 ml-5",children:[d.jsxs("div",{className:"h-[50%] flex flex-col gap-4",children:[d.jsx("span",{className:"font-bold",children:"Add Comment"}),d.jsx("div",{className:"w-full  h-full",children:d.jsx("textarea",{name:"comment",id:"id_patientComment",className:"rounded w-full h-full",value:s.values.comment,onChange:s.handleChange,onBlur:s.handleBlur})}),d.jsx("span",{className:"font-bold text-md text-red-500",children:s.touched.patientComment&&s.errors.patientComment?s.errors.patientComment:""})]}),d.jsxs("div",{className:"h-[20%] w-full flex flex-row gap-4 font-bold",children:[d.jsx("span",{children:"Give a Rating"}),d.jsx("div",{children:d.jsx(_oe,{name:"simple-controlled",value:s.values.rating,onChange:(u,h)=>{r(h),s.setFieldValue("rating",h)}})}),d.jsx("span",{className:"font-bold text-md text-red-500",children:s.touched.rating&&s.errors.rating&&s.errors.rating})]}),n?d.jsx("button",{type:"button",className:"p-4 w-full bg-red-500 font-bold",onClick:c,children:"Edit"}):d.jsx("input",{type:"submit",value:"save",className:"p-4 w-full bg-red-500 font-bold"})]})}function qYe(e){const[t,r]=T.useState([]);T.useState(void 0);const[n]=yf(),i=n.get("doctorId"),a=async()=>{const o=await WYe({doctorId:i});r(o)};return T.useEffect(()=>{a()},[]),d.jsx("div",{className:"flex flex-col gap-4 ",children:t.length>0&&t.map((o,s)=>d.jsx(YYe,{doctor:o.doctorId,review:o},s))})}function YYe(e){return d.jsxs("div",{className:"border h-[40vh] w-[70%] flex flex-col gap-4 p-4 bg-emerald-300 rounded-lg",children:[d.jsxs("div",{className:"feed h-[20%] flex flex-row gap-6 items-center",children:[d.jsx("span",{children:d.jsx("img",{src:e.review.patientId.profileImage,alt:"",className:"h-[7vh] w-[7vh] rounded-full"})}),d.jsx("span",{children:`${e.review.patientId.firstName} ${e.review.patientId.lastName}  `})]}),d.jsx("div",{className:"w-full h-[60%]",children:d.jsx("textarea",{name:"patientComment",value:e.review.comment,id:"id_patientComment",className:"w-full rounded text-sm h-full "})}),d.jsxs("div",{className:"grid grid-cols-2 gap-1 mt-5 font-bold ",children:[d.jsx("span",{children:"Rating"}),d.jsx("span",{children:d.jsx(_oe,{name:"simple-controlled",value:e.review.rating})})]})]})}function XYe(){return d.jsx(d.Fragment,{children:d.jsx(iue,{children:d.jsxs(Xce,{children:[d.jsx(ke,{path:"/login",element:d.jsx(QCe,{})}),d.jsx(ke,{path:"/register",element:d.jsx(lxe,{})}),"//Patient",d.jsxs(ke,{path:"/",element:d.jsx(wRe,{}),children:[d.jsx(ke,{path:"patient/home",element:d.jsx(dWe,{})}),d.jsx(ke,{path:"/patient/medicines",element:d.jsx(sIe,{})}),d.jsx(ke,{path:"/patient/medicines/medicineDetails",element:d.jsx(lIe,{})}),d.jsxs(ke,{path:"/patient/profile",element:d.jsx(uIe,{}),children:[d.jsx(ke,{index:!0,path:"/patient/profile/details",element:d.jsx(fIe,{})}),d.jsx(ke,{path:"/patient/profile/contactDetails",element:d.jsx(q9e,{})}),d.jsxs(ke,{path:"/patient/profile/bookings",element:d.jsx(h2e,{}),children:[d.jsx(ke,{path:"/patient/profile/bookings/currentBookings",element:d.jsx(g2e,{})}),d.jsx(ke,{path:"/patient/profile/bookings/pastBookings",element:d.jsx(z9e,{})}),d.jsx(ke,{path:"/patient/profile/bookings/review",element:d.jsx(KYe,{})})]}),d.jsxs(ke,{path:"/patient/profile/medicine",element:d.jsx(u9e,{}),children:[d.jsx(ke,{path:"/patient/profile/medicine/requests",element:d.jsx(l9e,{})}),d.jsx(ke,{path:"/patient/profile/medicine/ordered",element:d.jsx(h9e,{})})]}),d.jsxs(ke,{path:"/patient/profile/test",element:d.jsx(P9e,{}),children:[d.jsx(ke,{path:"/patient/profile/test/requests",element:d.jsx(L9e,{})}),d.jsx(ke,{path:"/patient/profile/test/ordered",element:d.jsx(K9e,{})}),d.jsx(ke,{path:"/patient/profile/test/ordered/uploadResult",element:d.jsx(Y9e,{})})]}),d.jsx(ke,{path:"/patient/profile/prescription",element:d.jsx(Z9e,{})}),d.jsx(ke,{path:"/patient/profile/prescription/details/:patientId/:bookingId",element:d.jsx(eWe,{})})]}),d.jsx(ke,{path:"/patient/doctors",element:d.jsx(AIe,{}),children:d.jsx(ke,{path:"/patient/doctors/:doctorId",element:d.jsx(WIe,{})})}),"//test",d.jsx(ke,{path:"/patient/tests",element:d.jsx(l2e,{})}),d.jsx(ke,{path:"/patient/tests/testDetails",element:d.jsx(u2e,{})}),d.jsx(ke,{path:"/patient/treatmentPlan",element:d.jsx(fDe,{})}),d.jsx(ke,{path:"/patient/alerts",element:d.jsx(YGe,{})}),d.jsx(ke,{path:"/patient/reviews",element:d.jsx(qYe,{})})]}),"//video",d.jsx(ke,{path:"/patient/bookings/videoConsult",element:d.jsx(GGe,{})}),"//pharmcacy",d.jsxs(ke,{path:"/pharmacy",element:d.jsx(BRe,{}),children:[d.jsx(ke,{path:"/pharmacy/home",element:d.jsx(kDe,{})}),d.jsx(ke,{path:"/pharmacy/stock/addCategory",element:d.jsx(URe,{})}),d.jsx(ke,{path:"/pharmacy/stock/viewStocks",element:d.jsx(FRe,{})}),d.jsx(ke,{path:"/pharmacy/stock/editStock",element:d.jsx($Re,{})}),d.jsxs(ke,{path:"/pharmacy/profile",element:d.jsx(ZRe,{}),children:[d.jsx(ke,{path:"/pharmacy/profile/profileDetails",element:d.jsx(tWe,{})}),d.jsx(ke,{path:"/pharmacy/profile/contactDetails",element:d.jsx(rWe,{})}),d.jsx(ke,{path:"/pharmacy/profile/passwordReset",element:d.jsx(pF,{})})]}),d.jsxs(ke,{path:"/pharmacy/order",element:d.jsx(p9e,{}),children:[d.jsx(ke,{path:"/pharmacy/order/requested",element:d.jsx(b9e,{})}),d.jsx(ke,{path:"/pharmacy/order/delivered",element:d.jsx(E9e,{})})]})]}),d.jsxs(ke,{path:"/pharmacy/approval",element:d.jsx(bWe,{}),children:[d.jsx(ke,{path:"/pharmacy/approval/form",element:d.jsx(wWe,{})}),d.jsx(ke,{path:"/pharmacy/approval/submitted",element:d.jsx(EWe,{})})]}),"//Doctor",d.jsxs(ke,{path:"/doctor",element:d.jsx(bIe,{}),children:[d.jsx(ke,{path:"/doctor/slot",element:d.jsx(CIe,{})}),d.jsx(ke,{path:"/doctor/home",element:d.jsx(hWe,{})}),d.jsxs(ke,{path:"/doctor/profile",element:d.jsx(SDe,{}),children:[d.jsx(ke,{path:"/doctor/profile/details",element:d.jsx(NDe,{})}),d.jsx(ke,{path:"/doctor/profile/contact",element:d.jsx(ADe,{})}),d.jsx(ke,{path:"/doctor/profile/resetPassword",element:d.jsx(ODe,{})})]}),d.jsxs(ke,{path:"/doctor/bookings",element:d.jsx(v2e,{}),children:[d.jsx(ke,{path:"/doctor/bookings/currentBookings",element:d.jsx(_2e,{})}),d.jsx(ke,{path:"/doctor/bookings/pastCompletedBookings",element:d.jsx(JGe,{})}),d.jsx(ke,{path:"/doctor/bookings/prescription/:patientId/:bookingId",element:d.jsx(t9e,{})}),d.jsx(ke,{path:"/doctor/bookings/medicine/:patientId/:bookingId",element:d.jsx(o9e,{})}),d.jsx(ke,{path:"/doctor/bookings/labtest/:patientId/:bookingId",element:d.jsx(O9e,{})}),d.jsx(ke,{path:"/doctor/bookings/labtest/testDetails/:patientId/:bookingId/:testId",element:d.jsx(N9e,{})}),d.jsx(ke,{path:"/doctor/bookings/test/ordered",element:d.jsx(RWe,{})}),d.jsx(ke,{path:"/doctor/bookings/test/completed/details",element:d.jsx(IWe,{})})]})]}),d.jsxs(ke,{path:"/doctor/approval",element:d.jsx(mWe,{}),children:[d.jsx(ke,{path:"/doctor/approval/form",element:d.jsx(gWe,{})}),d.jsx(ke,{path:"/doctor/approval/submitted",element:d.jsx(yWe,{})})]}),"//Laboratory",d.jsxs(ke,{path:"/laboratory",element:d.jsx($De,{}),children:[d.jsx(ke,{path:"/laboratory/home",element:d.jsx(fWe,{})}),d.jsxs(ke,{path:"/laboratory/testServices",element:d.jsx(zDe,{}),children:[d.jsx(ke,{path:"/laboratory/testServices/addTest",element:d.jsx(n2e,{})}),d.jsx(ke,{path:"/laboratory/testServices/viewTests",element:d.jsx(i2e,{})}),d.jsx(ke,{path:"/laboratory/testServices/editTestDetails",element:d.jsx(o2e,{})})]}),d.jsxs(ke,{path:"/laboratory/order",element:d.jsx(M9e,{}),children:[d.jsx(ke,{path:"/laboratory/order/test/ordered",element:d.jsx(F9e,{})}),d.jsx(ke,{path:"/laboratory/order/test/completed",element:d.jsx(B9e,{})}),d.jsx(ke,{path:"/laboratory/order/test/completed/uploadResult",element:d.jsx($9e,{})})]}),d.jsxs(ke,{path:"/laboratory/profile",element:d.jsx(iWe,{}),children:[d.jsx(ke,{path:"/laboratory/profile/profileDetails",element:d.jsx(aWe,{})}),d.jsx(ke,{path:"/laboratory/profile/contactDetails",element:d.jsx(oWe,{})}),d.jsx(ke,{path:"/laboratory/profile/passwordReset",element:d.jsx(pF,{})})]})]}),d.jsxs(ke,{path:"/laboratory/approval",element:d.jsx(SWe,{}),children:[d.jsx(ke,{path:"/laboratory/approval/form",element:d.jsx(TWe,{})}),d.jsx(ke,{path:"/laboratory/approval/submitted",element:d.jsx(CWe,{})})]}),"//Admin",d.jsxs(ke,{path:"/admin",element:d.jsx(uWe,{}),children:[d.jsxs(ke,{path:"/admin/users",element:d.jsx(AWe,{}),children:[d.jsx(ke,{path:"/admin/users/patient",element:d.jsx(jWe,{})}),d.jsx(ke,{path:"/admin/users/doctors",element:d.jsx(UWe,{})}),d.jsx(ke,{path:"/admin/users/pharmacy",element:d.jsx(VWe,{})}),d.jsx(ke,{path:"/admin/users/laboratory",element:d.jsx($We,{})})]}),d.jsxs(ke,{path:"/admin/approval",element:d.jsx(zWe,{}),children:[d.jsx(ke,{path:"/admin/approval/doctors",element:d.jsx(t1e,{})}),d.jsx(ke,{path:"/admin/approval/pharmacy",element:d.jsx(a1e,{})}),d.jsx(ke,{path:"/admin/approval/laboratory",element:d.jsx(n1e,{})}),d.jsx(ke,{path:"/admin/approval/doctorDetails",element:d.jsx(o1e,{})}),d.jsx(ke,{path:"/admin/approval/pharmacyDetails",element:d.jsx(s1e,{})}),d.jsx(ke,{path:"/admin/approval/LaboratoryDetails",element:d.jsx(l1e,{})})]})]})]})})})}const JYe={patient_meetingAlert:!1},QYe=vg({name:"alert",initialState:JYe,reducers:{setAlert(e,t){e.patient_meetingAlert=t.payload.patient_meetingAlert}}}),ZYe=QYe.reducer,eXe=Bbe({reducer:{user:ewe,patient:HCe,doctor:mIe,patient_alert:ZYe,pharmacy:IRe,laboratory:VDe}});H1(document.getElementById("root")).render(d.jsx(T.StrictMode,{children:d.jsx(hbe,{store:eXe,children:d.jsx(XYe,{})})}))});export default tXe();
