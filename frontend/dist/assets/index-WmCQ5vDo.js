var fne=Object.defineProperty;var pne=(e,t,r)=>t in e?fne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var mne=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var dg=(e,t,r)=>pne(e,typeof t!="symbol"?t+"":t,r);var mze=mne((Ia,Na)=>{function gne(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function W7(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var K7={exports:{}},_S={},q7={exports:{}},or={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv=Symbol.for("react.element"),yne=Symbol.for("react.portal"),vne=Symbol.for("react.fragment"),bne=Symbol.for("react.strict_mode"),Ene=Symbol.for("react.profiler"),_ne=Symbol.for("react.provider"),wne=Symbol.for("react.context"),Sne=Symbol.for("react.forward_ref"),Tne=Symbol.for("react.suspense"),Cne=Symbol.for("react.memo"),xne=Symbol.for("react.lazy"),dM=Symbol.iterator;function Rne(e){return e===null||typeof e!="object"?null:(e=dM&&e[dM]||e["@@iterator"],typeof e=="function"?e:null)}var Y7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X7=Object.assign,J7={};function gm(e,t,r){this.props=e,this.context=t,this.refs=J7,this.updater=r||Y7}gm.prototype.isReactComponent={};gm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Q7(){}Q7.prototype=gm.prototype;function Uk(e,t,r){this.props=e,this.context=t,this.refs=J7,this.updater=r||Y7}var Fk=Uk.prototype=new Q7;Fk.constructor=Uk;X7(Fk,gm.prototype);Fk.isPureReactComponent=!0;var hM=Array.isArray,Z7=Object.prototype.hasOwnProperty,Vk={current:null},ez={key:!0,ref:!0,__self:!0,__source:!0};function tz(e,t,r){var n,i={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Z7.call(t,n)&&!ez.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Qv,type:e,key:o,ref:a,props:i,_owner:Vk.current}}function Ine(e,t){return{$$typeof:Qv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bk(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qv}function Nne(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var fM=/\/+/g;function PC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Nne(""+e.key):t.toString(36)}function PE(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Qv:case yne:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+PC(a,0):n,hM(i)?(r="",e!=null&&(r=e.replace(fM,"$&/")+"/"),PE(i,t,r,"",function(c){return c})):i!=null&&(Bk(i)&&(i=Ine(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(fM,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",hM(e))for(var s=0;s<e.length;s++){o=e[s];var l=n+PC(o,s);a+=PE(o,t,r,l,i)}else if(l=Rne(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=n+PC(o,s++),a+=PE(o,t,r,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function rb(e,t,r){if(e==null)return e;var n=[],i=0;return PE(e,n,"","",function(o){return t.call(r,o,i++)}),n}function Ane(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Oo={current:null},DE={transition:null},One={ReactCurrentDispatcher:Oo,ReactCurrentBatchConfig:DE,ReactCurrentOwner:Vk};function rz(){throw Error("act(...) is not supported in production builds of React.")}or.Children={map:rb,forEach:function(e,t,r){rb(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return rb(e,function(){t++}),t},toArray:function(e){return rb(e,function(t){return t})||[]},only:function(e){if(!Bk(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};or.Component=gm;or.Fragment=vne;or.Profiler=Ene;or.PureComponent=Uk;or.StrictMode=bne;or.Suspense=Tne;or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=One;or.act=rz;or.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=X7({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Vk.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)Z7.call(t,l)&&!ez.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];n.children=s}return{$$typeof:Qv,type:e.type,key:i,ref:o,props:n,_owner:a}};or.createContext=function(e){return e={$$typeof:wne,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_ne,_context:e},e.Consumer=e};or.createElement=tz;or.createFactory=function(e){var t=tz.bind(null,e);return t.type=e,t};or.createRef=function(){return{current:null}};or.forwardRef=function(e){return{$$typeof:Sne,render:e}};or.isValidElement=Bk;or.lazy=function(e){return{$$typeof:xne,_payload:{_status:-1,_result:e},_init:Ane}};or.memo=function(e,t){return{$$typeof:Cne,type:e,compare:t===void 0?null:t}};or.startTransition=function(e){var t=DE.transition;DE.transition={};try{e()}finally{DE.transition=t}};or.unstable_act=rz;or.useCallback=function(e,t){return Oo.current.useCallback(e,t)};or.useContext=function(e){return Oo.current.useContext(e)};or.useDebugValue=function(){};or.useDeferredValue=function(e){return Oo.current.useDeferredValue(e)};or.useEffect=function(e,t){return Oo.current.useEffect(e,t)};or.useId=function(){return Oo.current.useId()};or.useImperativeHandle=function(e,t,r){return Oo.current.useImperativeHandle(e,t,r)};or.useInsertionEffect=function(e,t){return Oo.current.useInsertionEffect(e,t)};or.useLayoutEffect=function(e,t){return Oo.current.useLayoutEffect(e,t)};or.useMemo=function(e,t){return Oo.current.useMemo(e,t)};or.useReducer=function(e,t,r){return Oo.current.useReducer(e,t,r)};or.useRef=function(e){return Oo.current.useRef(e)};or.useState=function(e){return Oo.current.useState(e)};or.useSyncExternalStore=function(e,t,r){return Oo.current.useSyncExternalStore(e,t,r)};or.useTransition=function(){return Oo.current.useTransition()};or.version="18.3.1";q7.exports=or;var T=q7.exports;const kr=oa(T),nz=gne({__proto__:null,default:kr},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kne=T,Pne=Symbol.for("react.element"),Dne=Symbol.for("react.fragment"),Lne=Object.prototype.hasOwnProperty,Mne=kne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jne={key:!0,ref:!0,__self:!0,__source:!0};function iz(e,t,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)Lne.call(t,n)&&!jne.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Pne,type:e,key:o,ref:a,props:i,_owner:Mne.current}}_S.Fragment=Dne;_S.jsx=iz;_S.jsxs=iz;K7.exports=_S;var d=K7.exports,oz={exports:{}},ja={},az={exports:{}},sz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,B){var x=P.length;P.push(B);e:for(;0<x;){var E=x-1>>>1,N=P[E];if(0<i(N,B))P[E]=B,P[x]=N,x=E;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var B=P[0],x=P.pop();if(x!==B){P[0]=x;e:for(var E=0,N=P.length,C=N>>>1;E<C;){var W=2*(E+1)-1,U=P[W],X=W+1,ae=P[X];if(0>i(U,x))X<N&&0>i(ae,U)?(P[E]=ae,P[X]=x,E=X):(P[E]=U,P[W]=x,E=W);else if(X<N&&0>i(ae,x))P[E]=ae,P[X]=x,E=X;else break e}}return B}function i(P,B){var x=P.sortIndex-B.sortIndex;return x!==0?x:P.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,h=null,f=3,p=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(P){for(var B=r(c);B!==null;){if(B.callback===null)n(c);else if(B.startTime<=P)n(c),B.sortIndex=B.expirationTime,t(l,B);else break;B=r(c)}}function S(P){if(g=!1,_(P),!m)if(r(l)!==null)m=!0,K(I);else{var B=r(c);B!==null&&k(S,B.startTime-P)}}function I(P,B){m=!1,g&&(g=!1,v(M),M=-1),p=!0;var x=f;try{for(_(B),h=r(l);h!==null&&(!(h.expirationTime>B)||P&&!G());){var E=h.callback;if(typeof E=="function"){h.callback=null,f=h.priorityLevel;var N=E(h.expirationTime<=B);B=e.unstable_now(),typeof N=="function"?h.callback=N:h===r(l)&&n(l),_(B)}else n(l);h=r(l)}if(h!==null)var C=!0;else{var W=r(c);W!==null&&k(S,W.startTime-B),C=!1}return C}finally{h=null,f=x,p=!1}}var A=!1,D=null,M=-1,H=5,V=-1;function G(){return!(e.unstable_now()-V<H)}function Y(){if(D!==null){var P=e.unstable_now();V=P;var B=!0;try{B=D(!0,P)}finally{B?Z():(A=!1,D=null)}}else A=!1}var Z;if(typeof b=="function")Z=function(){b(Y)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=Y,Z=function(){F.postMessage(null)}}else Z=function(){y(Y,0)};function K(P){D=P,A||(A=!0,Z())}function k(P,B){M=y(function(){P(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,K(I))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var x=f;f=B;try{return P()}finally{f=x}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var x=f;f=P;try{return B()}finally{f=x}},e.unstable_scheduleCallback=function(P,B,x){var E=e.unstable_now();switch(typeof x=="object"&&x!==null?(x=x.delay,x=typeof x=="number"&&0<x?E+x:E):x=E,P){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=x+N,P={id:u++,callback:B,priorityLevel:P,startTime:x,expirationTime:N,sortIndex:-1},x>E?(P.sortIndex=x,t(c,P),r(l)===null&&P===r(c)&&(g?(v(M),M=-1):g=!0,k(S,x-E))):(P.sortIndex=N,t(l,P),m||p||(m=!0,K(I))),P},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(P){var B=f;return function(){var x=f;f=B;try{return P.apply(this,arguments)}finally{f=x}}}})(sz);az.exports=sz;var Une=az.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fne=T,ka=Une;function Oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lz=new Set,Gy={};function Dh(e,t){Up(e,t),Up(e+"Capture",t)}function Up(e,t){for(Gy[e]=t,e=0;e<t.length;e++)lz.add(t[e])}var xc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),RN=Object.prototype.hasOwnProperty,Vne=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pM={},mM={};function Bne(e){return RN.call(mM,e)?!0:RN.call(pM,e)?!1:Vne.test(e)?mM[e]=!0:(pM[e]=!0,!1)}function $ne(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Hne(e,t,r,n){if(t===null||typeof t>"u"||$ne(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ko(e,t,r,n,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var eo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){eo[e]=new ko(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];eo[t]=new ko(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){eo[e]=new ko(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){eo[e]=new ko(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){eo[e]=new ko(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){eo[e]=new ko(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){eo[e]=new ko(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){eo[e]=new ko(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){eo[e]=new ko(e,5,!1,e.toLowerCase(),null,!1,!1)});var $k=/[\-:]([a-z])/g;function Hk(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($k,Hk);eo[t]=new ko(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($k,Hk);eo[t]=new ko(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($k,Hk);eo[t]=new ko(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){eo[e]=new ko(e,1,!1,e.toLowerCase(),null,!1,!1)});eo.xlinkHref=new ko("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){eo[e]=new ko(e,1,!1,e.toLowerCase(),null,!0,!0)});function zk(e,t,r,n){var i=eo.hasOwnProperty(t)?eo[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Hne(t,r,i,n)&&(r=null),n||i===null?Bne(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Mc=Fne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nb=Symbol.for("react.element"),Vf=Symbol.for("react.portal"),Bf=Symbol.for("react.fragment"),Gk=Symbol.for("react.strict_mode"),IN=Symbol.for("react.profiler"),cz=Symbol.for("react.provider"),uz=Symbol.for("react.context"),Wk=Symbol.for("react.forward_ref"),NN=Symbol.for("react.suspense"),AN=Symbol.for("react.suspense_list"),Kk=Symbol.for("react.memo"),lu=Symbol.for("react.lazy"),dz=Symbol.for("react.offscreen"),gM=Symbol.iterator;function hg(e){return e===null||typeof e!="object"?null:(e=gM&&e[gM]||e["@@iterator"],typeof e=="function"?e:null)}var Un=Object.assign,DC;function zg(e){if(DC===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);DC=t&&t[1]||""}return`
`+DC+e}var LC=!1;function MC(e,t){if(!e||LC)return"";LC=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{LC=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?zg(e):""}function zne(e){switch(e.tag){case 5:return zg(e.type);case 16:return zg("Lazy");case 13:return zg("Suspense");case 19:return zg("SuspenseList");case 0:case 2:case 15:return e=MC(e.type,!1),e;case 11:return e=MC(e.type.render,!1),e;case 1:return e=MC(e.type,!0),e;default:return""}}function ON(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bf:return"Fragment";case Vf:return"Portal";case IN:return"Profiler";case Gk:return"StrictMode";case NN:return"Suspense";case AN:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case uz:return(e.displayName||"Context")+".Consumer";case cz:return(e._context.displayName||"Context")+".Provider";case Wk:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Kk:return t=e.displayName||null,t!==null?t:ON(e.type)||"Memo";case lu:t=e._payload,e=e._init;try{return ON(e(t))}catch{}}return null}function Gne(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ON(t);case 8:return t===Gk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ku(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hz(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wne(e){var t=hz(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ib(e){e._valueTracker||(e._valueTracker=Wne(e))}function fz(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=hz(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function A_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function kN(e,t){var r=t.checked;return Un({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function yM(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ku(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function pz(e,t){t=t.checked,t!=null&&zk(e,"checked",t,!1)}function PN(e,t){pz(e,t);var r=Ku(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?DN(e,t.type,r):t.hasOwnProperty("defaultValue")&&DN(e,t.type,Ku(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vM(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function DN(e,t,r){(t!=="number"||A_(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Gg=Array.isArray;function mp(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ku(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function LN(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return Un({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function bM(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Oe(92));if(Gg(r)){if(1<r.length)throw Error(Oe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ku(r)}}function mz(e,t){var r=Ku(t.value),n=Ku(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function EM(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gz(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function MN(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gz(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ob,yz=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ob=ob||document.createElement("div"),ob.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ob.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wy(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var uy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kne=["Webkit","ms","Moz","O"];Object.keys(uy).forEach(function(e){Kne.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),uy[t]=uy[e]})});function vz(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||uy.hasOwnProperty(e)&&uy[e]?(""+t).trim():t+"px"}function bz(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=vz(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var qne=Un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jN(e,t){if(t){if(qne[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Oe(62))}}function UN(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var FN=null;function qk(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var VN=null,gp=null,yp=null;function _M(e){if(e=t0(e)){if(typeof VN!="function")throw Error(Oe(280));var t=e.stateNode;t&&(t=xS(t),VN(e.stateNode,e.type,t))}}function Ez(e){gp?yp?yp.push(e):yp=[e]:gp=e}function _z(){if(gp){var e=gp,t=yp;if(yp=gp=null,_M(e),t)for(e=0;e<t.length;e++)_M(t[e])}}function wz(e,t){return e(t)}function Sz(){}var jC=!1;function Tz(e,t,r){if(jC)return e(t,r);jC=!0;try{return wz(e,t,r)}finally{jC=!1,(gp!==null||yp!==null)&&(Sz(),_z())}}function Ky(e,t){var r=e.stateNode;if(r===null)return null;var n=xS(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Oe(231,t,typeof r));return r}var BN=!1;if(xc)try{var fg={};Object.defineProperty(fg,"passive",{get:function(){BN=!0}}),window.addEventListener("test",fg,fg),window.removeEventListener("test",fg,fg)}catch{BN=!1}function Yne(e,t,r,n,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var dy=!1,O_=null,k_=!1,$N=null,Xne={onError:function(e){dy=!0,O_=e}};function Jne(e,t,r,n,i,o,a,s,l){dy=!1,O_=null,Yne.apply(Xne,arguments)}function Qne(e,t,r,n,i,o,a,s,l){if(Jne.apply(this,arguments),dy){if(dy){var c=O_;dy=!1,O_=null}else throw Error(Oe(198));k_||(k_=!0,$N=c)}}function Lh(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Cz(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wM(e){if(Lh(e)!==e)throw Error(Oe(188))}function Zne(e){var t=e.alternate;if(!t){if(t=Lh(e),t===null)throw Error(Oe(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return wM(i),e;if(o===n)return wM(i),t;o=o.sibling}throw Error(Oe(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(Oe(189))}}if(r.alternate!==n)throw Error(Oe(190))}if(r.tag!==3)throw Error(Oe(188));return r.stateNode.current===r?e:t}function xz(e){return e=Zne(e),e!==null?Rz(e):null}function Rz(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Rz(e);if(t!==null)return t;e=e.sibling}return null}var Iz=ka.unstable_scheduleCallback,SM=ka.unstable_cancelCallback,eie=ka.unstable_shouldYield,tie=ka.unstable_requestPaint,ii=ka.unstable_now,rie=ka.unstable_getCurrentPriorityLevel,Yk=ka.unstable_ImmediatePriority,Nz=ka.unstable_UserBlockingPriority,P_=ka.unstable_NormalPriority,nie=ka.unstable_LowPriority,Az=ka.unstable_IdlePriority,wS=null,Al=null;function iie(e){if(Al&&typeof Al.onCommitFiberRoot=="function")try{Al.onCommitFiberRoot(wS,e,void 0,(e.current.flags&128)===128)}catch{}}var Ys=Math.clz32?Math.clz32:sie,oie=Math.log,aie=Math.LN2;function sie(e){return e>>>=0,e===0?32:31-(oie(e)/aie|0)|0}var ab=64,sb=4194304;function Wg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function D_(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=Wg(s):(o&=a,o!==0&&(n=Wg(o)))}else a=r&~i,a!==0?n=Wg(a):o!==0&&(n=Wg(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ys(t),i=1<<r,n|=e[r],t&=~i;return n}function lie(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cie(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Ys(o),s=1<<a,l=i[a];l===-1?(!(s&r)||s&n)&&(i[a]=lie(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function HN(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Oz(){var e=ab;return ab<<=1,!(ab&4194240)&&(ab=64),e}function UC(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Zv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ys(t),e[t]=r}function uie(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Ys(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function Xk(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ys(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var zr=0;function kz(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pz,Jk,Dz,Lz,Mz,zN=!1,lb=[],Nu=null,Au=null,Ou=null,qy=new Map,Yy=new Map,hu=[],die="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function TM(e,t){switch(e){case"focusin":case"focusout":Nu=null;break;case"dragenter":case"dragleave":Au=null;break;case"mouseover":case"mouseout":Ou=null;break;case"pointerover":case"pointerout":qy.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yy.delete(t.pointerId)}}function pg(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=t0(t),t!==null&&Jk(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function hie(e,t,r,n,i){switch(t){case"focusin":return Nu=pg(Nu,e,t,r,n,i),!0;case"dragenter":return Au=pg(Au,e,t,r,n,i),!0;case"mouseover":return Ou=pg(Ou,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return qy.set(o,pg(qy.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Yy.set(o,pg(Yy.get(o)||null,e,t,r,n,i)),!0}return!1}function jz(e){var t=Hd(e.target);if(t!==null){var r=Lh(t);if(r!==null){if(t=r.tag,t===13){if(t=Cz(r),t!==null){e.blockedOn=t,Mz(e.priority,function(){Dz(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function LE(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=GN(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);FN=n,r.target.dispatchEvent(n),FN=null}else return t=t0(r),t!==null&&Jk(t),e.blockedOn=r,!1;t.shift()}return!0}function CM(e,t,r){LE(e)&&r.delete(t)}function fie(){zN=!1,Nu!==null&&LE(Nu)&&(Nu=null),Au!==null&&LE(Au)&&(Au=null),Ou!==null&&LE(Ou)&&(Ou=null),qy.forEach(CM),Yy.forEach(CM)}function mg(e,t){e.blockedOn===t&&(e.blockedOn=null,zN||(zN=!0,ka.unstable_scheduleCallback(ka.unstable_NormalPriority,fie)))}function Xy(e){function t(i){return mg(i,e)}if(0<lb.length){mg(lb[0],e);for(var r=1;r<lb.length;r++){var n=lb[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Nu!==null&&mg(Nu,e),Au!==null&&mg(Au,e),Ou!==null&&mg(Ou,e),qy.forEach(t),Yy.forEach(t),r=0;r<hu.length;r++)n=hu[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<hu.length&&(r=hu[0],r.blockedOn===null);)jz(r),r.blockedOn===null&&hu.shift()}var vp=Mc.ReactCurrentBatchConfig,L_=!0;function pie(e,t,r,n){var i=zr,o=vp.transition;vp.transition=null;try{zr=1,Qk(e,t,r,n)}finally{zr=i,vp.transition=o}}function mie(e,t,r,n){var i=zr,o=vp.transition;vp.transition=null;try{zr=4,Qk(e,t,r,n)}finally{zr=i,vp.transition=o}}function Qk(e,t,r,n){if(L_){var i=GN(e,t,r,n);if(i===null)qC(e,t,n,M_,r),TM(e,n);else if(hie(i,e,t,r,n))n.stopPropagation();else if(TM(e,n),t&4&&-1<die.indexOf(e)){for(;i!==null;){var o=t0(i);if(o!==null&&Pz(o),o=GN(e,t,r,n),o===null&&qC(e,t,n,M_,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else qC(e,t,n,null,r)}}var M_=null;function GN(e,t,r,n){if(M_=null,e=qk(n),e=Hd(e),e!==null)if(t=Lh(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Cz(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return M_=e,null}function Uz(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rie()){case Yk:return 1;case Nz:return 4;case P_:case nie:return 16;case Az:return 536870912;default:return 16}default:return 16}}var vu=null,Zk=null,ME=null;function Fz(){if(ME)return ME;var e,t=Zk,r=t.length,n,i="value"in vu?vu.value:vu.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[o-n];n++);return ME=i.slice(e,1<n?1-n:void 0)}function jE(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cb(){return!0}function xM(){return!1}function Ua(e){function t(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?cb:xM,this.isPropagationStopped=xM,this}return Un(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=cb)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=cb)},persist:function(){},isPersistent:cb}),t}var ym={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eP=Ua(ym),e0=Un({},ym,{view:0,detail:0}),gie=Ua(e0),FC,VC,gg,SS=Un({},e0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tP,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gg&&(gg&&e.type==="mousemove"?(FC=e.screenX-gg.screenX,VC=e.screenY-gg.screenY):VC=FC=0,gg=e),FC)},movementY:function(e){return"movementY"in e?e.movementY:VC}}),RM=Ua(SS),yie=Un({},SS,{dataTransfer:0}),vie=Ua(yie),bie=Un({},e0,{relatedTarget:0}),BC=Ua(bie),Eie=Un({},ym,{animationName:0,elapsedTime:0,pseudoElement:0}),_ie=Ua(Eie),wie=Un({},ym,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sie=Ua(wie),Tie=Un({},ym,{data:0}),IM=Ua(Tie),Cie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iie(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Rie[e])?!!t[e]:!1}function tP(){return Iie}var Nie=Un({},e0,{key:function(e){if(e.key){var t=Cie[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=jE(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xie[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tP,charCode:function(e){return e.type==="keypress"?jE(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jE(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Aie=Ua(Nie),Oie=Un({},SS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),NM=Ua(Oie),kie=Un({},e0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tP}),Pie=Ua(kie),Die=Un({},ym,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lie=Ua(Die),Mie=Un({},SS,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jie=Ua(Mie),Uie=[9,13,27,32],rP=xc&&"CompositionEvent"in window,hy=null;xc&&"documentMode"in document&&(hy=document.documentMode);var Fie=xc&&"TextEvent"in window&&!hy,Vz=xc&&(!rP||hy&&8<hy&&11>=hy),AM=" ",OM=!1;function Bz(e,t){switch(e){case"keyup":return Uie.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $z(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $f=!1;function Vie(e,t){switch(e){case"compositionend":return $z(t);case"keypress":return t.which!==32?null:(OM=!0,AM);case"textInput":return e=t.data,e===AM&&OM?null:e;default:return null}}function Bie(e,t){if($f)return e==="compositionend"||!rP&&Bz(e,t)?(e=Fz(),ME=Zk=vu=null,$f=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vz&&t.locale!=="ko"?null:t.data;default:return null}}var $ie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$ie[e.type]:t==="textarea"}function Hz(e,t,r,n){Ez(n),t=j_(t,"onChange"),0<t.length&&(r=new eP("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var fy=null,Jy=null;function Hie(e){eG(e,0)}function TS(e){var t=Gf(e);if(fz(t))return e}function zie(e,t){if(e==="change")return t}var zz=!1;if(xc){var $C;if(xc){var HC="oninput"in document;if(!HC){var PM=document.createElement("div");PM.setAttribute("oninput","return;"),HC=typeof PM.oninput=="function"}$C=HC}else $C=!1;zz=$C&&(!document.documentMode||9<document.documentMode)}function DM(){fy&&(fy.detachEvent("onpropertychange",Gz),Jy=fy=null)}function Gz(e){if(e.propertyName==="value"&&TS(Jy)){var t=[];Hz(t,Jy,e,qk(e)),Tz(Hie,t)}}function Gie(e,t,r){e==="focusin"?(DM(),fy=t,Jy=r,fy.attachEvent("onpropertychange",Gz)):e==="focusout"&&DM()}function Wie(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return TS(Jy)}function Kie(e,t){if(e==="click")return TS(t)}function qie(e,t){if(e==="input"||e==="change")return TS(t)}function Yie(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qs=typeof Object.is=="function"?Object.is:Yie;function Qy(e,t){if(Qs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!RN.call(t,i)||!Qs(e[i],t[i]))return!1}return!0}function LM(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function MM(e,t){var r=LM(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=LM(r)}}function Wz(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wz(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Kz(){for(var e=window,t=A_();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=A_(e.document)}return t}function nP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xie(e){var t=Kz(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Wz(r.ownerDocument.documentElement,r)){if(n!==null&&nP(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=MM(r,o);var a=MM(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jie=xc&&"documentMode"in document&&11>=document.documentMode,Hf=null,WN=null,py=null,KN=!1;function jM(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;KN||Hf==null||Hf!==A_(n)||(n=Hf,"selectionStart"in n&&nP(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),py&&Qy(py,n)||(py=n,n=j_(WN,"onSelect"),0<n.length&&(t=new eP("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Hf)))}function ub(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var zf={animationend:ub("Animation","AnimationEnd"),animationiteration:ub("Animation","AnimationIteration"),animationstart:ub("Animation","AnimationStart"),transitionend:ub("Transition","TransitionEnd")},zC={},qz={};xc&&(qz=document.createElement("div").style,"AnimationEvent"in window||(delete zf.animationend.animation,delete zf.animationiteration.animation,delete zf.animationstart.animation),"TransitionEvent"in window||delete zf.transitionend.transition);function CS(e){if(zC[e])return zC[e];if(!zf[e])return e;var t=zf[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in qz)return zC[e]=t[r];return e}var Yz=CS("animationend"),Xz=CS("animationiteration"),Jz=CS("animationstart"),Qz=CS("transitionend"),Zz=new Map,UM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rd(e,t){Zz.set(e,t),Dh(t,[e])}for(var GC=0;GC<UM.length;GC++){var WC=UM[GC],Qie=WC.toLowerCase(),Zie=WC[0].toUpperCase()+WC.slice(1);rd(Qie,"on"+Zie)}rd(Yz,"onAnimationEnd");rd(Xz,"onAnimationIteration");rd(Jz,"onAnimationStart");rd("dblclick","onDoubleClick");rd("focusin","onFocus");rd("focusout","onBlur");rd(Qz,"onTransitionEnd");Up("onMouseEnter",["mouseout","mouseover"]);Up("onMouseLeave",["mouseout","mouseover"]);Up("onPointerEnter",["pointerout","pointerover"]);Up("onPointerLeave",["pointerout","pointerover"]);Dh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eoe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kg));function FM(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Qne(n,t,void 0,e),e.currentTarget=null}function eG(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;FM(i,s,c),o=l}else for(a=0;a<n.length;a++){if(s=n[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;FM(i,s,c),o=l}}}if(k_)throw e=$N,k_=!1,$N=null,e}function hn(e,t){var r=t[QN];r===void 0&&(r=t[QN]=new Set);var n=e+"__bubble";r.has(n)||(tG(t,e,2,!1),r.add(n))}function KC(e,t,r){var n=0;t&&(n|=4),tG(r,e,n,t)}var db="_reactListening"+Math.random().toString(36).slice(2);function Zy(e){if(!e[db]){e[db]=!0,lz.forEach(function(r){r!=="selectionchange"&&(eoe.has(r)||KC(r,!1,e),KC(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[db]||(t[db]=!0,KC("selectionchange",!1,t))}}function tG(e,t,r,n){switch(Uz(t)){case 1:var i=pie;break;case 4:i=mie;break;default:i=Qk}r=i.bind(null,t,r,e),i=void 0,!BN||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function qC(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Hd(s),a===null)return;if(l=a.tag,l===5||l===6){n=o=a;continue e}s=s.parentNode}}n=n.return}Tz(function(){var c=o,u=qk(r),h=[];e:{var f=Zz.get(e);if(f!==void 0){var p=eP,m=e;switch(e){case"keypress":if(jE(r)===0)break e;case"keydown":case"keyup":p=Aie;break;case"focusin":m="focus",p=BC;break;case"focusout":m="blur",p=BC;break;case"beforeblur":case"afterblur":p=BC;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=RM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=vie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Pie;break;case Yz:case Xz:case Jz:p=_ie;break;case Qz:p=Lie;break;case"scroll":p=gie;break;case"wheel":p=jie;break;case"copy":case"cut":case"paste":p=Sie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=NM}var g=(t&4)!==0,y=!g&&e==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var b=c,_;b!==null;){_=b;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,v!==null&&(S=Ky(b,v),S!=null&&g.push(ev(b,S,_)))),y)break;b=b.return}0<g.length&&(f=new p(f,m,null,r,u),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==FN&&(m=r.relatedTarget||r.fromElement)&&(Hd(m)||m[Rc]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Hd(m):null,m!==null&&(y=Lh(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=RM,S="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(g=NM,S="onPointerLeave",v="onPointerEnter",b="pointer"),y=p==null?f:Gf(p),_=m==null?f:Gf(m),f=new g(S,b+"leave",p,r,u),f.target=y,f.relatedTarget=_,S=null,Hd(u)===c&&(g=new g(v,b+"enter",m,r,u),g.target=_,g.relatedTarget=y,S=g),y=S,p&&m)t:{for(g=p,v=m,b=0,_=g;_;_=hf(_))b++;for(_=0,S=v;S;S=hf(S))_++;for(;0<b-_;)g=hf(g),b--;for(;0<_-b;)v=hf(v),_--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=hf(g),v=hf(v)}g=null}else g=null;p!==null&&VM(h,f,p,g,!1),m!==null&&y!==null&&VM(h,y,m,g,!0)}}e:{if(f=c?Gf(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var I=zie;else if(kM(f))if(zz)I=qie;else{I=Wie;var A=Gie}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=Kie);if(I&&(I=I(e,c))){Hz(h,I,r,u);break e}A&&A(e,f,c),e==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&DN(f,"number",f.value)}switch(A=c?Gf(c):window,e){case"focusin":(kM(A)||A.contentEditable==="true")&&(Hf=A,WN=c,py=null);break;case"focusout":py=WN=Hf=null;break;case"mousedown":KN=!0;break;case"contextmenu":case"mouseup":case"dragend":KN=!1,jM(h,r,u);break;case"selectionchange":if(Jie)break;case"keydown":case"keyup":jM(h,r,u)}var D;if(rP)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else $f?Bz(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(Vz&&r.locale!=="ko"&&($f||M!=="onCompositionStart"?M==="onCompositionEnd"&&$f&&(D=Fz()):(vu=u,Zk="value"in vu?vu.value:vu.textContent,$f=!0)),A=j_(c,M),0<A.length&&(M=new IM(M,e,null,r,u),h.push({event:M,listeners:A}),D?M.data=D:(D=$z(r),D!==null&&(M.data=D)))),(D=Fie?Vie(e,r):Bie(e,r))&&(c=j_(c,"onBeforeInput"),0<c.length&&(u=new IM("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:c}),u.data=D))}eG(h,t)})}function ev(e,t,r){return{instance:e,listener:t,currentTarget:r}}function j_(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ky(e,r),o!=null&&n.unshift(ev(e,o,i)),o=Ky(e,t),o!=null&&n.push(ev(e,o,i))),e=e.return}return n}function hf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function VM(e,t,r,n,i){for(var o=t._reactName,a=[];r!==null&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&c!==null&&(s=c,i?(l=Ky(r,o),l!=null&&a.unshift(ev(r,l,s))):i||(l=Ky(r,o),l!=null&&a.push(ev(r,l,s)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var toe=/\r\n?/g,roe=/\u0000|\uFFFD/g;function BM(e){return(typeof e=="string"?e:""+e).replace(toe,`
`).replace(roe,"")}function hb(e,t,r){if(t=BM(t),BM(e)!==t&&r)throw Error(Oe(425))}function U_(){}var qN=null,YN=null;function XN(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var JN=typeof setTimeout=="function"?setTimeout:void 0,noe=typeof clearTimeout=="function"?clearTimeout:void 0,$M=typeof Promise=="function"?Promise:void 0,ioe=typeof queueMicrotask=="function"?queueMicrotask:typeof $M<"u"?function(e){return $M.resolve(null).then(e).catch(ooe)}:JN;function ooe(e){setTimeout(function(){throw e})}function YC(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Xy(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Xy(t)}function ku(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function HM(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var vm=Math.random().toString(36).slice(2),wl="__reactFiber$"+vm,tv="__reactProps$"+vm,Rc="__reactContainer$"+vm,QN="__reactEvents$"+vm,aoe="__reactListeners$"+vm,soe="__reactHandles$"+vm;function Hd(e){var t=e[wl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Rc]||r[wl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=HM(e);e!==null;){if(r=e[wl])return r;e=HM(e)}return t}e=r,r=e.parentNode}return null}function t0(e){return e=e[wl]||e[Rc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Oe(33))}function xS(e){return e[tv]||null}var ZN=[],Wf=-1;function nd(e){return{current:e}}function vn(e){0>Wf||(e.current=ZN[Wf],ZN[Wf]=null,Wf--)}function ln(e,t){Wf++,ZN[Wf]=e.current,e.current=t}var qu={},go=nd(qu),Xo=nd(!1),mh=qu;function Fp(e,t){var r=e.type.contextTypes;if(!r)return qu;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Jo(e){return e=e.childContextTypes,e!=null}function F_(){vn(Xo),vn(go)}function zM(e,t,r){if(go.current!==qu)throw Error(Oe(168));ln(go,t),ln(Xo,r)}function rG(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Oe(108,Gne(e)||"Unknown",i));return Un({},r,n)}function V_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qu,mh=go.current,ln(go,e),ln(Xo,Xo.current),!0}function GM(e,t,r){var n=e.stateNode;if(!n)throw Error(Oe(169));r?(e=rG(e,t,mh),n.__reactInternalMemoizedMergedChildContext=e,vn(Xo),vn(go),ln(go,e)):vn(Xo),ln(Xo,r)}var uc=null,RS=!1,XC=!1;function nG(e){uc===null?uc=[e]:uc.push(e)}function loe(e){RS=!0,nG(e)}function id(){if(!XC&&uc!==null){XC=!0;var e=0,t=zr;try{var r=uc;for(zr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}uc=null,RS=!1}catch(i){throw uc!==null&&(uc=uc.slice(e+1)),Iz(Yk,id),i}finally{zr=t,XC=!1}}return null}var Kf=[],qf=0,B_=null,$_=0,ls=[],cs=0,gh=null,gc=1,yc="";function Rd(e,t){Kf[qf++]=$_,Kf[qf++]=B_,B_=e,$_=t}function iG(e,t,r){ls[cs++]=gc,ls[cs++]=yc,ls[cs++]=gh,gh=e;var n=gc;e=yc;var i=32-Ys(n)-1;n&=~(1<<i),r+=1;var o=32-Ys(t)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,gc=1<<32-Ys(t)+i|r<<i|n,yc=o+e}else gc=1<<o|r<<i|n,yc=e}function iP(e){e.return!==null&&(Rd(e,1),iG(e,1,0))}function oP(e){for(;e===B_;)B_=Kf[--qf],Kf[qf]=null,$_=Kf[--qf],Kf[qf]=null;for(;e===gh;)gh=ls[--cs],ls[cs]=null,yc=ls[--cs],ls[cs]=null,gc=ls[--cs],ls[cs]=null}var Aa=null,Sa=null,Tn=!1,zs=null;function oG(e,t){var r=ps(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function WM(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Aa=e,Sa=ku(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Aa=e,Sa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=gh!==null?{id:gc,overflow:yc}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ps(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Aa=e,Sa=null,!0):!1;default:return!1}}function eA(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tA(e){if(Tn){var t=Sa;if(t){var r=t;if(!WM(e,t)){if(eA(e))throw Error(Oe(418));t=ku(r.nextSibling);var n=Aa;t&&WM(e,t)?oG(n,r):(e.flags=e.flags&-4097|2,Tn=!1,Aa=e)}}else{if(eA(e))throw Error(Oe(418));e.flags=e.flags&-4097|2,Tn=!1,Aa=e}}}function KM(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Aa=e}function fb(e){if(e!==Aa)return!1;if(!Tn)return KM(e),Tn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!XN(e.type,e.memoizedProps)),t&&(t=Sa)){if(eA(e))throw aG(),Error(Oe(418));for(;t;)oG(e,t),t=ku(t.nextSibling)}if(KM(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Sa=ku(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Sa=null}}else Sa=Aa?ku(e.stateNode.nextSibling):null;return!0}function aG(){for(var e=Sa;e;)e=ku(e.nextSibling)}function Vp(){Sa=Aa=null,Tn=!1}function aP(e){zs===null?zs=[e]:zs.push(e)}var coe=Mc.ReactCurrentBatchConfig;function yg(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Oe(309));var n=r.stateNode}if(!n)throw Error(Oe(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(Oe(284));if(!r._owner)throw Error(Oe(290,e))}return e}function pb(e,t){throw e=Object.prototype.toString.call(t),Error(Oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qM(e){var t=e._init;return t(e._payload)}function sG(e){function t(v,b){if(e){var _=v.deletions;_===null?(v.deletions=[b],v.flags|=16):_.push(b)}}function r(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=Mu(v,b),v.index=0,v.sibling=null,v}function o(v,b,_){return v.index=_,e?(_=v.alternate,_!==null?(_=_.index,_<b?(v.flags|=2,b):_):(v.flags|=2,b)):(v.flags|=1048576,b)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,b,_,S){return b===null||b.tag!==6?(b=nx(_,v.mode,S),b.return=v,b):(b=i(b,_),b.return=v,b)}function l(v,b,_,S){var I=_.type;return I===Bf?u(v,b,_.props.children,S,_.key):b!==null&&(b.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===lu&&qM(I)===b.type)?(S=i(b,_.props),S.ref=yg(v,b,_),S.return=v,S):(S=zE(_.type,_.key,_.props,null,v.mode,S),S.ref=yg(v,b,_),S.return=v,S)}function c(v,b,_,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=ix(_,v.mode,S),b.return=v,b):(b=i(b,_.children||[]),b.return=v,b)}function u(v,b,_,S,I){return b===null||b.tag!==7?(b=nh(_,v.mode,S,I),b.return=v,b):(b=i(b,_),b.return=v,b)}function h(v,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=nx(""+b,v.mode,_),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nb:return _=zE(b.type,b.key,b.props,null,v.mode,_),_.ref=yg(v,null,b),_.return=v,_;case Vf:return b=ix(b,v.mode,_),b.return=v,b;case lu:var S=b._init;return h(v,S(b._payload),_)}if(Gg(b)||hg(b))return b=nh(b,v.mode,_,null),b.return=v,b;pb(v,b)}return null}function f(v,b,_,S){var I=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return I!==null?null:s(v,b,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case nb:return _.key===I?l(v,b,_,S):null;case Vf:return _.key===I?c(v,b,_,S):null;case lu:return I=_._init,f(v,b,I(_._payload),S)}if(Gg(_)||hg(_))return I!==null?null:u(v,b,_,S,null);pb(v,_)}return null}function p(v,b,_,S,I){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(_)||null,s(b,v,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case nb:return v=v.get(S.key===null?_:S.key)||null,l(b,v,S,I);case Vf:return v=v.get(S.key===null?_:S.key)||null,c(b,v,S,I);case lu:var A=S._init;return p(v,b,_,A(S._payload),I)}if(Gg(S)||hg(S))return v=v.get(_)||null,u(b,v,S,I,null);pb(b,S)}return null}function m(v,b,_,S){for(var I=null,A=null,D=b,M=b=0,H=null;D!==null&&M<_.length;M++){D.index>M?(H=D,D=null):H=D.sibling;var V=f(v,D,_[M],S);if(V===null){D===null&&(D=H);break}e&&D&&V.alternate===null&&t(v,D),b=o(V,b,M),A===null?I=V:A.sibling=V,A=V,D=H}if(M===_.length)return r(v,D),Tn&&Rd(v,M),I;if(D===null){for(;M<_.length;M++)D=h(v,_[M],S),D!==null&&(b=o(D,b,M),A===null?I=D:A.sibling=D,A=D);return Tn&&Rd(v,M),I}for(D=n(v,D);M<_.length;M++)H=p(D,v,M,_[M],S),H!==null&&(e&&H.alternate!==null&&D.delete(H.key===null?M:H.key),b=o(H,b,M),A===null?I=H:A.sibling=H,A=H);return e&&D.forEach(function(G){return t(v,G)}),Tn&&Rd(v,M),I}function g(v,b,_,S){var I=hg(_);if(typeof I!="function")throw Error(Oe(150));if(_=I.call(_),_==null)throw Error(Oe(151));for(var A=I=null,D=b,M=b=0,H=null,V=_.next();D!==null&&!V.done;M++,V=_.next()){D.index>M?(H=D,D=null):H=D.sibling;var G=f(v,D,V.value,S);if(G===null){D===null&&(D=H);break}e&&D&&G.alternate===null&&t(v,D),b=o(G,b,M),A===null?I=G:A.sibling=G,A=G,D=H}if(V.done)return r(v,D),Tn&&Rd(v,M),I;if(D===null){for(;!V.done;M++,V=_.next())V=h(v,V.value,S),V!==null&&(b=o(V,b,M),A===null?I=V:A.sibling=V,A=V);return Tn&&Rd(v,M),I}for(D=n(v,D);!V.done;M++,V=_.next())V=p(D,v,M,V.value,S),V!==null&&(e&&V.alternate!==null&&D.delete(V.key===null?M:V.key),b=o(V,b,M),A===null?I=V:A.sibling=V,A=V);return e&&D.forEach(function(Y){return t(v,Y)}),Tn&&Rd(v,M),I}function y(v,b,_,S){if(typeof _=="object"&&_!==null&&_.type===Bf&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case nb:e:{for(var I=_.key,A=b;A!==null;){if(A.key===I){if(I=_.type,I===Bf){if(A.tag===7){r(v,A.sibling),b=i(A,_.props.children),b.return=v,v=b;break e}}else if(A.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===lu&&qM(I)===A.type){r(v,A.sibling),b=i(A,_.props),b.ref=yg(v,A,_),b.return=v,v=b;break e}r(v,A);break}else t(v,A);A=A.sibling}_.type===Bf?(b=nh(_.props.children,v.mode,S,_.key),b.return=v,v=b):(S=zE(_.type,_.key,_.props,null,v.mode,S),S.ref=yg(v,b,_),S.return=v,v=S)}return a(v);case Vf:e:{for(A=_.key;b!==null;){if(b.key===A)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){r(v,b.sibling),b=i(b,_.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else t(v,b);b=b.sibling}b=ix(_,v.mode,S),b.return=v,v=b}return a(v);case lu:return A=_._init,y(v,b,A(_._payload),S)}if(Gg(_))return m(v,b,_,S);if(hg(_))return g(v,b,_,S);pb(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(r(v,b.sibling),b=i(b,_),b.return=v,v=b):(r(v,b),b=nx(_,v.mode,S),b.return=v,v=b),a(v)):r(v,b)}return y}var Bp=sG(!0),lG=sG(!1),H_=nd(null),z_=null,Yf=null,sP=null;function lP(){sP=Yf=z_=null}function cP(e){var t=H_.current;vn(H_),e._currentValue=t}function rA(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function bp(e,t){z_=e,sP=Yf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qo=!0),e.firstContext=null)}function vs(e){var t=e._currentValue;if(sP!==e)if(e={context:e,memoizedValue:t,next:null},Yf===null){if(z_===null)throw Error(Oe(308));Yf=e,z_.dependencies={lanes:0,firstContext:e}}else Yf=Yf.next=e;return t}var zd=null;function uP(e){zd===null?zd=[e]:zd.push(e)}function cG(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,uP(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ic(e,n)}function Ic(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var cu=!1;function dP(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uG(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ec(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pu(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,br&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ic(e,r)}return i=n.interleaved,i===null?(t.next=t,uP(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ic(e,r)}function UE(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Xk(e,r)}}function YM(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function G_(e,t,r,n){var i=e.updateQueue;cu=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(o!==null){var h=i.baseState;a=0,u=c=l=null,s=o;do{var f=s.lane,p=s.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,g=s;switch(f=t,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=Un({},h,f);break e;case 2:cu=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,a|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);vh|=a,e.lanes=a,e.memoizedState=h}}function XM(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Oe(191,i));i.call(n)}}}var r0={},Ol=nd(r0),rv=nd(r0),nv=nd(r0);function Gd(e){if(e===r0)throw Error(Oe(174));return e}function hP(e,t){switch(ln(nv,t),ln(rv,e),ln(Ol,r0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:MN(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=MN(t,e)}vn(Ol),ln(Ol,t)}function $p(){vn(Ol),vn(rv),vn(nv)}function dG(e){Gd(nv.current);var t=Gd(Ol.current),r=MN(t,e.type);t!==r&&(ln(rv,e),ln(Ol,r))}function fP(e){rv.current===e&&(vn(Ol),vn(rv))}var Pn=nd(0);function W_(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var JC=[];function pP(){for(var e=0;e<JC.length;e++)JC[e]._workInProgressVersionPrimary=null;JC.length=0}var FE=Mc.ReactCurrentDispatcher,QC=Mc.ReactCurrentBatchConfig,yh=0,Mn=null,xi=null,Mi=null,K_=!1,my=!1,iv=0,uoe=0;function io(){throw Error(Oe(321))}function mP(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Qs(e[r],t[r]))return!1;return!0}function gP(e,t,r,n,i,o){if(yh=o,Mn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,FE.current=e===null||e.memoizedState===null?poe:moe,e=r(n,i),my){o=0;do{if(my=!1,iv=0,25<=o)throw Error(Oe(301));o+=1,Mi=xi=null,t.updateQueue=null,FE.current=goe,e=r(n,i)}while(my)}if(FE.current=q_,t=xi!==null&&xi.next!==null,yh=0,Mi=xi=Mn=null,K_=!1,t)throw Error(Oe(300));return e}function yP(){var e=iv!==0;return iv=0,e}function yl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mi===null?Mn.memoizedState=Mi=e:Mi=Mi.next=e,Mi}function bs(){if(xi===null){var e=Mn.alternate;e=e!==null?e.memoizedState:null}else e=xi.next;var t=Mi===null?Mn.memoizedState:Mi.next;if(t!==null)Mi=t,xi=e;else{if(e===null)throw Error(Oe(310));xi=e,e={memoizedState:xi.memoizedState,baseState:xi.baseState,baseQueue:xi.baseQueue,queue:xi.queue,next:null},Mi===null?Mn.memoizedState=Mi=e:Mi=Mi.next=e}return Mi}function ov(e,t){return typeof t=="function"?t(e):t}function ZC(e){var t=bs(),r=t.queue;if(r===null)throw Error(Oe(311));r.lastRenderedReducer=e;var n=xi,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,l=null,c=o;do{var u=c.lane;if((yh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=h,a=n):l=l.next=h,Mn.lanes|=u,vh|=u}c=c.next}while(c!==null&&c!==o);l===null?a=n:l.next=s,Qs(n,t.memoizedState)||(qo=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,Mn.lanes|=o,vh|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ex(e){var t=bs(),r=t.queue;if(r===null)throw Error(Oe(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);Qs(o,t.memoizedState)||(qo=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function hG(){}function fG(e,t){var r=Mn,n=bs(),i=t(),o=!Qs(n.memoizedState,i);if(o&&(n.memoizedState=i,qo=!0),n=n.queue,vP(gG.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||Mi!==null&&Mi.memoizedState.tag&1){if(r.flags|=2048,av(9,mG.bind(null,r,n,i,t),void 0,null),$i===null)throw Error(Oe(349));yh&30||pG(r,t,i)}return i}function pG(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Mn.updateQueue,t===null?(t={lastEffect:null,stores:null},Mn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function mG(e,t,r,n){t.value=r,t.getSnapshot=n,yG(t)&&vG(e)}function gG(e,t,r){return r(function(){yG(t)&&vG(e)})}function yG(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Qs(e,r)}catch{return!0}}function vG(e){var t=Ic(e,1);t!==null&&Xs(t,e,1,-1)}function JM(e){var t=yl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ov,lastRenderedState:e},t.queue=e,e=e.dispatch=foe.bind(null,Mn,e),[t.memoizedState,e]}function av(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Mn.updateQueue,t===null?(t={lastEffect:null,stores:null},Mn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function bG(){return bs().memoizedState}function VE(e,t,r,n){var i=yl();Mn.flags|=e,i.memoizedState=av(1|t,r,void 0,n===void 0?null:n)}function IS(e,t,r,n){var i=bs();n=n===void 0?null:n;var o=void 0;if(xi!==null){var a=xi.memoizedState;if(o=a.destroy,n!==null&&mP(n,a.deps)){i.memoizedState=av(t,r,o,n);return}}Mn.flags|=e,i.memoizedState=av(1|t,r,o,n)}function QM(e,t){return VE(8390656,8,e,t)}function vP(e,t){return IS(2048,8,e,t)}function EG(e,t){return IS(4,2,e,t)}function _G(e,t){return IS(4,4,e,t)}function wG(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function SG(e,t,r){return r=r!=null?r.concat([e]):null,IS(4,4,wG.bind(null,t,e),r)}function bP(){}function TG(e,t){var r=bs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&mP(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function CG(e,t){var r=bs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&mP(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function xG(e,t,r){return yh&21?(Qs(r,t)||(r=Oz(),Mn.lanes|=r,vh|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qo=!0),e.memoizedState=r)}function doe(e,t){var r=zr;zr=r!==0&&4>r?r:4,e(!0);var n=QC.transition;QC.transition={};try{e(!1),t()}finally{zr=r,QC.transition=n}}function RG(){return bs().memoizedState}function hoe(e,t,r){var n=Lu(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},IG(e))NG(t,r);else if(r=cG(e,t,r,n),r!==null){var i=Ao();Xs(r,e,n,i),AG(r,t,n)}}function foe(e,t,r){var n=Lu(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(IG(e))NG(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,Qs(s,a)){var l=t.interleaved;l===null?(i.next=i,uP(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=cG(e,t,i,n),r!==null&&(i=Ao(),Xs(r,e,n,i),AG(r,t,n))}}function IG(e){var t=e.alternate;return e===Mn||t!==null&&t===Mn}function NG(e,t){my=K_=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function AG(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Xk(e,r)}}var q_={readContext:vs,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useInsertionEffect:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useSyncExternalStore:io,useId:io,unstable_isNewReconciler:!1},poe={readContext:vs,useCallback:function(e,t){return yl().memoizedState=[e,t===void 0?null:t],e},useContext:vs,useEffect:QM,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,VE(4194308,4,wG.bind(null,t,e),r)},useLayoutEffect:function(e,t){return VE(4194308,4,e,t)},useInsertionEffect:function(e,t){return VE(4,2,e,t)},useMemo:function(e,t){var r=yl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=yl();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=hoe.bind(null,Mn,e),[n.memoizedState,e]},useRef:function(e){var t=yl();return e={current:e},t.memoizedState=e},useState:JM,useDebugValue:bP,useDeferredValue:function(e){return yl().memoizedState=e},useTransition:function(){var e=JM(!1),t=e[0];return e=doe.bind(null,e[1]),yl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Mn,i=yl();if(Tn){if(r===void 0)throw Error(Oe(407));r=r()}else{if(r=t(),$i===null)throw Error(Oe(349));yh&30||pG(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,QM(gG.bind(null,n,o,e),[e]),n.flags|=2048,av(9,mG.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=yl(),t=$i.identifierPrefix;if(Tn){var r=yc,n=gc;r=(n&~(1<<32-Ys(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=iv++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=uoe++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},moe={readContext:vs,useCallback:TG,useContext:vs,useEffect:vP,useImperativeHandle:SG,useInsertionEffect:EG,useLayoutEffect:_G,useMemo:CG,useReducer:ZC,useRef:bG,useState:function(){return ZC(ov)},useDebugValue:bP,useDeferredValue:function(e){var t=bs();return xG(t,xi.memoizedState,e)},useTransition:function(){var e=ZC(ov)[0],t=bs().memoizedState;return[e,t]},useMutableSource:hG,useSyncExternalStore:fG,useId:RG,unstable_isNewReconciler:!1},goe={readContext:vs,useCallback:TG,useContext:vs,useEffect:vP,useImperativeHandle:SG,useInsertionEffect:EG,useLayoutEffect:_G,useMemo:CG,useReducer:ex,useRef:bG,useState:function(){return ex(ov)},useDebugValue:bP,useDeferredValue:function(e){var t=bs();return xi===null?t.memoizedState=e:xG(t,xi.memoizedState,e)},useTransition:function(){var e=ex(ov)[0],t=bs().memoizedState;return[e,t]},useMutableSource:hG,useSyncExternalStore:fG,useId:RG,unstable_isNewReconciler:!1};function Vs(e,t){if(e&&e.defaultProps){t=Un({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function nA(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Un({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var NS={isMounted:function(e){return(e=e._reactInternals)?Lh(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ao(),i=Lu(e),o=Ec(n,i);o.payload=t,r!=null&&(o.callback=r),t=Pu(e,o,i),t!==null&&(Xs(t,e,i,n),UE(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ao(),i=Lu(e),o=Ec(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Pu(e,o,i),t!==null&&(Xs(t,e,i,n),UE(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ao(),n=Lu(e),i=Ec(r,n);i.tag=2,t!=null&&(i.callback=t),t=Pu(e,i,n),t!==null&&(Xs(t,e,n,r),UE(t,e,n))}};function ZM(e,t,r,n,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!Qy(r,n)||!Qy(i,o):!0}function OG(e,t,r){var n=!1,i=qu,o=t.contextType;return typeof o=="object"&&o!==null?o=vs(o):(i=Jo(t)?mh:go.current,n=t.contextTypes,o=(n=n!=null)?Fp(e,i):qu),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=NS,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ej(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&NS.enqueueReplaceState(t,t.state,null)}function iA(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},dP(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=vs(o):(o=Jo(t)?mh:go.current,i.context=Fp(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(nA(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&NS.enqueueReplaceState(i,i.state,null),G_(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Hp(e,t){try{var r="",n=t;do r+=zne(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function tx(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function oA(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var yoe=typeof WeakMap=="function"?WeakMap:Map;function kG(e,t,r){r=Ec(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){X_||(X_=!0,mA=n),oA(e,t)},r}function PG(e,t,r){r=Ec(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){oA(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){oA(e,t),typeof n!="function"&&(Du===null?Du=new Set([this]):Du.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function tj(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new yoe;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Ooe.bind(null,e,t,r),t.then(e,e))}function rj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function nj(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ec(-1,1),t.tag=2,Pu(r,t,1))),r.lanes|=1),e)}var voe=Mc.ReactCurrentOwner,qo=!1;function xo(e,t,r,n){t.child=e===null?lG(t,null,r,n):Bp(t,e.child,r,n)}function ij(e,t,r,n,i){r=r.render;var o=t.ref;return bp(t,i),n=gP(e,t,r,n,o,i),r=yP(),e!==null&&!qo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Nc(e,t,i)):(Tn&&r&&iP(t),t.flags|=1,xo(e,t,n,i),t.child)}function oj(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!RP(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,DG(e,t,o,n,i)):(e=zE(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Qy,r(a,n)&&e.ref===t.ref)return Nc(e,t,i)}return t.flags|=1,e=Mu(o,n),e.ref=t.ref,e.return=t,t.child=e}function DG(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(Qy(o,n)&&e.ref===t.ref)if(qo=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(qo=!0);else return t.lanes=e.lanes,Nc(e,t,i)}return aA(e,t,r,n,i)}function LG(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ln(Jf,ba),ba|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ln(Jf,ba),ba|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,ln(Jf,ba),ba|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,ln(Jf,ba),ba|=n;return xo(e,t,i,r),t.child}function MG(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function aA(e,t,r,n,i){var o=Jo(r)?mh:go.current;return o=Fp(t,o),bp(t,i),r=gP(e,t,r,n,o,i),n=yP(),e!==null&&!qo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Nc(e,t,i)):(Tn&&n&&iP(t),t.flags|=1,xo(e,t,r,i),t.child)}function aj(e,t,r,n,i){if(Jo(r)){var o=!0;V_(t)}else o=!1;if(bp(t,i),t.stateNode===null)BE(e,t),OG(t,r,n),iA(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=vs(c):(c=Jo(r)?mh:go.current,c=Fp(t,c));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||l!==c)&&ej(t,a,n,c),cu=!1;var f=t.memoizedState;a.state=f,G_(t,n,a,i),l=t.memoizedState,s!==n||f!==l||Xo.current||cu?(typeof u=="function"&&(nA(t,r,u,n),l=t.memoizedState),(s=cu||ZM(t,r,s,n,f,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,uG(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Vs(t.type,s),a.props=c,h=t.pendingProps,f=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=vs(l):(l=Jo(r)?mh:go.current,l=Fp(t,l));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==h||f!==l)&&ej(t,a,n,l),cu=!1,f=t.memoizedState,a.state=f,G_(t,n,a,i);var m=t.memoizedState;s!==h||f!==m||Xo.current||cu?(typeof p=="function"&&(nA(t,r,p,n),m=t.memoizedState),(c=cu||ZM(t,r,c,n,f,m,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),a.props=n,a.state=m,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return sA(e,t,r,n,o,i)}function sA(e,t,r,n,i,o){MG(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&GM(t,r,!1),Nc(e,t,o);n=t.stateNode,voe.current=t;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Bp(t,e.child,null,o),t.child=Bp(t,null,s,o)):xo(e,t,s,o),t.memoizedState=n.state,i&&GM(t,r,!0),t.child}function jG(e){var t=e.stateNode;t.pendingContext?zM(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zM(e,t.context,!1),hP(e,t.containerInfo)}function sj(e,t,r,n,i){return Vp(),aP(i),t.flags|=256,xo(e,t,r,n),t.child}var lA={dehydrated:null,treeContext:null,retryLane:0};function cA(e){return{baseLanes:e,cachePool:null,transitions:null}}function UG(e,t,r){var n=t.pendingProps,i=Pn.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ln(Pn,i&1),e===null)return tA(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=kS(a,n,0,null),e=nh(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=cA(r),t.memoizedState=lA,e):EP(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return boe(e,t,a,n,s,i,r);if(o){o=n.fallback,a=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Mu(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Mu(s,o):(o=nh(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?cA(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=lA,n}return o=e.child,e=o.sibling,n=Mu(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function EP(e,t){return t=kS({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mb(e,t,r,n){return n!==null&&aP(n),Bp(t,e.child,null,r),e=EP(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function boe(e,t,r,n,i,o,a){if(r)return t.flags&256?(t.flags&=-257,n=tx(Error(Oe(422))),mb(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=kS({mode:"visible",children:n.children},i,0,null),o=nh(o,i,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Bp(t,e.child,null,a),t.child.memoizedState=cA(a),t.memoizedState=lA,o);if(!(t.mode&1))return mb(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(Oe(419)),n=tx(o,n,void 0),mb(e,t,a,n)}if(s=(a&e.childLanes)!==0,qo||s){if(n=$i,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ic(e,i),Xs(n,e,i,-1))}return xP(),n=tx(Error(Oe(421))),mb(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=koe.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Sa=ku(i.nextSibling),Aa=t,Tn=!0,zs=null,e!==null&&(ls[cs++]=gc,ls[cs++]=yc,ls[cs++]=gh,gc=e.id,yc=e.overflow,gh=t),t=EP(t,n.children),t.flags|=4096,t)}function lj(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),rA(e.return,t,r)}function rx(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function FG(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(xo(e,t,n.children,r),n=Pn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lj(e,r,t);else if(e.tag===19)lj(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ln(Pn,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&W_(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),rx(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&W_(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}rx(t,!0,r,null,o);break;case"together":rx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function BE(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nc(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vh|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Oe(153));if(t.child!==null){for(e=t.child,r=Mu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Mu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Eoe(e,t,r){switch(t.tag){case 3:jG(t),Vp();break;case 5:dG(t);break;case 1:Jo(t.type)&&V_(t);break;case 4:hP(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;ln(H_,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ln(Pn,Pn.current&1),t.flags|=128,null):r&t.child.childLanes?UG(e,t,r):(ln(Pn,Pn.current&1),e=Nc(e,t,r),e!==null?e.sibling:null);ln(Pn,Pn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return FG(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ln(Pn,Pn.current),n)break;return null;case 22:case 23:return t.lanes=0,LG(e,t,r)}return Nc(e,t,r)}var VG,uA,BG,$G;VG=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};uA=function(){};BG=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Gd(Ol.current);var o=null;switch(r){case"input":i=kN(e,i),n=kN(e,n),o=[];break;case"select":i=Un({},i,{value:void 0}),n=Un({},n,{value:void 0}),o=[];break;case"textarea":i=LN(e,i),n=LN(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=U_)}jN(r,n);var a;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Gy.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var l=n[c];if(s=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(o||(o=[]),o.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Gy.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&hn("scroll",e),o||s===l||(o=[])):(o=o||[]).push(c,l))}r&&(o=o||[]).push("style",r);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};$G=function(e,t,r,n){r!==n&&(t.flags|=4)};function vg(e,t){if(!Tn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function oo(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function _oe(e,t,r){var n=t.pendingProps;switch(oP(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oo(t),null;case 1:return Jo(t.type)&&F_(),oo(t),null;case 3:return n=t.stateNode,$p(),vn(Xo),vn(go),pP(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(fb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zs!==null&&(vA(zs),zs=null))),uA(e,t),oo(t),null;case 5:fP(t);var i=Gd(nv.current);if(r=t.type,e!==null&&t.stateNode!=null)BG(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Oe(166));return oo(t),null}if(e=Gd(Ol.current),fb(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[wl]=t,n[tv]=o,e=(t.mode&1)!==0,r){case"dialog":hn("cancel",n),hn("close",n);break;case"iframe":case"object":case"embed":hn("load",n);break;case"video":case"audio":for(i=0;i<Kg.length;i++)hn(Kg[i],n);break;case"source":hn("error",n);break;case"img":case"image":case"link":hn("error",n),hn("load",n);break;case"details":hn("toggle",n);break;case"input":yM(n,o),hn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},hn("invalid",n);break;case"textarea":bM(n,o),hn("invalid",n)}jN(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&hb(n.textContent,s,e),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&hb(n.textContent,s,e),i=["children",""+s]):Gy.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&hn("scroll",n)}switch(r){case"input":ib(n),vM(n,o,!0);break;case"textarea":ib(n),EM(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=U_)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gz(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[wl]=t,e[tv]=n,VG(e,t,!1,!1),t.stateNode=e;e:{switch(a=UN(r,n),r){case"dialog":hn("cancel",e),hn("close",e),i=n;break;case"iframe":case"object":case"embed":hn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Kg.length;i++)hn(Kg[i],e);i=n;break;case"source":hn("error",e),i=n;break;case"img":case"image":case"link":hn("error",e),hn("load",e),i=n;break;case"details":hn("toggle",e),i=n;break;case"input":yM(e,n),i=kN(e,n),hn("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Un({},n,{value:void 0}),hn("invalid",e);break;case"textarea":bM(e,n),i=LN(e,n),hn("invalid",e);break;default:i=n}jN(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?bz(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yz(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Wy(e,l):typeof l=="number"&&Wy(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Gy.hasOwnProperty(o)?l!=null&&o==="onScroll"&&hn("scroll",e):l!=null&&zk(e,o,l,a))}switch(r){case"input":ib(e),vM(e,n,!1);break;case"textarea":ib(e),EM(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ku(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?mp(e,!!n.multiple,o,!1):n.defaultValue!=null&&mp(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=U_)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return oo(t),null;case 6:if(e&&t.stateNode!=null)$G(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Oe(166));if(r=Gd(nv.current),Gd(Ol.current),fb(t)){if(n=t.stateNode,r=t.memoizedProps,n[wl]=t,(o=n.nodeValue!==r)&&(e=Aa,e!==null))switch(e.tag){case 3:hb(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hb(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[wl]=t,t.stateNode=n}return oo(t),null;case 13:if(vn(Pn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Tn&&Sa!==null&&t.mode&1&&!(t.flags&128))aG(),Vp(),t.flags|=98560,o=!1;else if(o=fb(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(Oe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Oe(317));o[wl]=t}else Vp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;oo(t),o=!1}else zs!==null&&(vA(zs),zs=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Pn.current&1?Ii===0&&(Ii=3):xP())),t.updateQueue!==null&&(t.flags|=4),oo(t),null);case 4:return $p(),uA(e,t),e===null&&Zy(t.stateNode.containerInfo),oo(t),null;case 10:return cP(t.type._context),oo(t),null;case 17:return Jo(t.type)&&F_(),oo(t),null;case 19:if(vn(Pn),o=t.memoizedState,o===null)return oo(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)vg(o,!1);else{if(Ii!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=W_(e),a!==null){for(t.flags|=128,vg(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ln(Pn,Pn.current&1|2),t.child}e=e.sibling}o.tail!==null&&ii()>zp&&(t.flags|=128,n=!0,vg(o,!1),t.lanes=4194304)}else{if(!n)if(e=W_(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),vg(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Tn)return oo(t),null}else 2*ii()-o.renderingStartTime>zp&&r!==1073741824&&(t.flags|=128,n=!0,vg(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ii(),t.sibling=null,r=Pn.current,ln(Pn,n?r&1|2:r&1),t):(oo(t),null);case 22:case 23:return CP(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ba&1073741824&&(oo(t),t.subtreeFlags&6&&(t.flags|=8192)):oo(t),null;case 24:return null;case 25:return null}throw Error(Oe(156,t.tag))}function woe(e,t){switch(oP(t),t.tag){case 1:return Jo(t.type)&&F_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $p(),vn(Xo),vn(go),pP(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return fP(t),null;case 13:if(vn(Pn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Oe(340));Vp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vn(Pn),null;case 4:return $p(),null;case 10:return cP(t.type._context),null;case 22:case 23:return CP(),null;case 24:return null;default:return null}}var gb=!1,ho=!1,Soe=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Xf(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Wn(e,t,n)}else r.current=null}function dA(e,t,r){try{r()}catch(n){Wn(e,t,n)}}var cj=!1;function Toe(e,t){if(qN=L_,e=Kz(),nP(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,l=-1,c=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(s=a+i),h!==o||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++c===i&&(s=a),f===o&&++u===n&&(l=a),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(YN={focusedElem:e,selectionRange:r},L_=!1,tt=t;tt!==null;)if(t=tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,tt=e;else for(;tt!==null;){t=tt;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Vs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(S){Wn(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,tt=e;break}tt=t.return}return m=cj,cj=!1,m}function gy(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&dA(t,r,o)}i=i.next}while(i!==n)}}function AS(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function hA(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function HG(e){var t=e.alternate;t!==null&&(e.alternate=null,HG(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wl],delete t[tv],delete t[QN],delete t[aoe],delete t[soe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zG(e){return e.tag===5||e.tag===3||e.tag===4}function uj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zG(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fA(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=U_));else if(n!==4&&(e=e.child,e!==null))for(fA(e,t,r),e=e.sibling;e!==null;)fA(e,t,r),e=e.sibling}function pA(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(pA(e,t,r),e=e.sibling;e!==null;)pA(e,t,r),e=e.sibling}var qi=null,$s=!1;function Gc(e,t,r){for(r=r.child;r!==null;)GG(e,t,r),r=r.sibling}function GG(e,t,r){if(Al&&typeof Al.onCommitFiberUnmount=="function")try{Al.onCommitFiberUnmount(wS,r)}catch{}switch(r.tag){case 5:ho||Xf(r,t);case 6:var n=qi,i=$s;qi=null,Gc(e,t,r),qi=n,$s=i,qi!==null&&($s?(e=qi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):qi.removeChild(r.stateNode));break;case 18:qi!==null&&($s?(e=qi,r=r.stateNode,e.nodeType===8?YC(e.parentNode,r):e.nodeType===1&&YC(e,r),Xy(e)):YC(qi,r.stateNode));break;case 4:n=qi,i=$s,qi=r.stateNode.containerInfo,$s=!0,Gc(e,t,r),qi=n,$s=i;break;case 0:case 11:case 14:case 15:if(!ho&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&dA(r,t,a),i=i.next}while(i!==n)}Gc(e,t,r);break;case 1:if(!ho&&(Xf(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Wn(r,t,s)}Gc(e,t,r);break;case 21:Gc(e,t,r);break;case 22:r.mode&1?(ho=(n=ho)||r.memoizedState!==null,Gc(e,t,r),ho=n):Gc(e,t,r);break;default:Gc(e,t,r)}}function dj(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Soe),t.forEach(function(n){var i=Poe.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function As(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:qi=s.stateNode,$s=!1;break e;case 3:qi=s.stateNode.containerInfo,$s=!0;break e;case 4:qi=s.stateNode.containerInfo,$s=!0;break e}s=s.return}if(qi===null)throw Error(Oe(160));GG(o,a,i),qi=null,$s=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Wn(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)WG(t,e),t=t.sibling}function WG(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(As(t,e),sl(e),n&4){try{gy(3,e,e.return),AS(3,e)}catch(g){Wn(e,e.return,g)}try{gy(5,e,e.return)}catch(g){Wn(e,e.return,g)}}break;case 1:As(t,e),sl(e),n&512&&r!==null&&Xf(r,r.return);break;case 5:if(As(t,e),sl(e),n&512&&r!==null&&Xf(r,r.return),e.flags&32){var i=e.stateNode;try{Wy(i,"")}catch(g){Wn(e,e.return,g)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&pz(i,o),UN(s,a);var c=UN(s,o);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];u==="style"?bz(i,h):u==="dangerouslySetInnerHTML"?yz(i,h):u==="children"?Wy(i,h):zk(i,u,h,c)}switch(s){case"input":PN(i,o);break;case"textarea":mz(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?mp(i,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?mp(i,!!o.multiple,o.defaultValue,!0):mp(i,!!o.multiple,o.multiple?[]:"",!1))}i[tv]=o}catch(g){Wn(e,e.return,g)}}break;case 6:if(As(t,e),sl(e),n&4){if(e.stateNode===null)throw Error(Oe(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Wn(e,e.return,g)}}break;case 3:if(As(t,e),sl(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Xy(t.containerInfo)}catch(g){Wn(e,e.return,g)}break;case 4:As(t,e),sl(e);break;case 13:As(t,e),sl(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(SP=ii())),n&4&&dj(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(ho=(c=ho)||u,As(t,e),ho=c):As(t,e),sl(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(tt=e,u=e.child;u!==null;){for(h=tt=u;tt!==null;){switch(f=tt,p=f.child,f.tag){case 0:case 11:case 14:case 15:gy(4,f,f.return);break;case 1:Xf(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Wn(n,r,g)}}break;case 5:Xf(f,f.return);break;case 22:if(f.memoizedState!==null){fj(h);continue}}p!==null?(p.return=f,tt=p):fj(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=vz("display",a))}catch(g){Wn(e,e.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Wn(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:As(t,e),sl(e),n&4&&dj(e);break;case 21:break;default:As(t,e),sl(e)}}function sl(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(zG(r)){var n=r;break e}r=r.return}throw Error(Oe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Wy(i,""),n.flags&=-33);var o=uj(e);pA(e,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=uj(e);fA(e,s,a);break;default:throw Error(Oe(161))}}catch(l){Wn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Coe(e,t,r){tt=e,KG(e)}function KG(e,t,r){for(var n=(e.mode&1)!==0;tt!==null;){var i=tt,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||gb;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||ho;s=gb;var c=ho;if(gb=a,(ho=l)&&!c)for(tt=i;tt!==null;)a=tt,l=a.child,a.tag===22&&a.memoizedState!==null?pj(i):l!==null?(l.return=a,tt=l):pj(i);for(;o!==null;)tt=o,KG(o),o=o.sibling;tt=i,gb=s,ho=c}hj(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,tt=o):hj(e)}}function hj(e){for(;tt!==null;){var t=tt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ho||AS(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ho)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Vs(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&XM(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}XM(t,a,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Xy(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}ho||t.flags&512&&hA(t)}catch(f){Wn(t,t.return,f)}}if(t===e){tt=null;break}if(r=t.sibling,r!==null){r.return=t.return,tt=r;break}tt=t.return}}function fj(e){for(;tt!==null;){var t=tt;if(t===e){tt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,tt=r;break}tt=t.return}}function pj(e){for(;tt!==null;){var t=tt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{AS(4,t)}catch(l){Wn(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){Wn(t,i,l)}}var o=t.return;try{hA(t)}catch(l){Wn(t,o,l)}break;case 5:var a=t.return;try{hA(t)}catch(l){Wn(t,a,l)}}}catch(l){Wn(t,t.return,l)}if(t===e){tt=null;break}var s=t.sibling;if(s!==null){s.return=t.return,tt=s;break}tt=t.return}}var xoe=Math.ceil,Y_=Mc.ReactCurrentDispatcher,_P=Mc.ReactCurrentOwner,gs=Mc.ReactCurrentBatchConfig,br=0,$i=null,pi=null,Zi=0,ba=0,Jf=nd(0),Ii=0,sv=null,vh=0,OS=0,wP=0,yy=null,$o=null,SP=0,zp=1/0,lc=null,X_=!1,mA=null,Du=null,yb=!1,bu=null,J_=0,vy=0,gA=null,$E=-1,HE=0;function Ao(){return br&6?ii():$E!==-1?$E:$E=ii()}function Lu(e){return e.mode&1?br&2&&Zi!==0?Zi&-Zi:coe.transition!==null?(HE===0&&(HE=Oz()),HE):(e=zr,e!==0||(e=window.event,e=e===void 0?16:Uz(e.type)),e):1}function Xs(e,t,r,n){if(50<vy)throw vy=0,gA=null,Error(Oe(185));Zv(e,r,n),(!(br&2)||e!==$i)&&(e===$i&&(!(br&2)&&(OS|=r),Ii===4&&fu(e,Zi)),Qo(e,n),r===1&&br===0&&!(t.mode&1)&&(zp=ii()+500,RS&&id()))}function Qo(e,t){var r=e.callbackNode;cie(e,t);var n=D_(e,e===$i?Zi:0);if(n===0)r!==null&&SM(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&SM(r),t===1)e.tag===0?loe(mj.bind(null,e)):nG(mj.bind(null,e)),ioe(function(){!(br&6)&&id()}),r=null;else{switch(kz(n)){case 1:r=Yk;break;case 4:r=Nz;break;case 16:r=P_;break;case 536870912:r=Az;break;default:r=P_}r=tW(r,qG.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function qG(e,t){if($E=-1,HE=0,br&6)throw Error(Oe(327));var r=e.callbackNode;if(Ep()&&e.callbackNode!==r)return null;var n=D_(e,e===$i?Zi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Q_(e,n);else{t=n;var i=br;br|=2;var o=XG();($i!==e||Zi!==t)&&(lc=null,zp=ii()+500,rh(e,t));do try{Noe();break}catch(s){YG(e,s)}while(!0);lP(),Y_.current=o,br=i,pi!==null?t=0:($i=null,Zi=0,t=Ii)}if(t!==0){if(t===2&&(i=HN(e),i!==0&&(n=i,t=yA(e,i))),t===1)throw r=sv,rh(e,0),fu(e,n),Qo(e,ii()),r;if(t===6)fu(e,n);else{if(i=e.current.alternate,!(n&30)&&!Roe(i)&&(t=Q_(e,n),t===2&&(o=HN(e),o!==0&&(n=o,t=yA(e,o))),t===1))throw r=sv,rh(e,0),fu(e,n),Qo(e,ii()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Oe(345));case 2:Id(e,$o,lc);break;case 3:if(fu(e,n),(n&130023424)===n&&(t=SP+500-ii(),10<t)){if(D_(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ao(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=JN(Id.bind(null,e,$o,lc),t);break}Id(e,$o,lc);break;case 4:if(fu(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-Ys(n);o=1<<a,a=t[a],a>i&&(i=a),n&=~o}if(n=i,n=ii()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xoe(n/1960))-n,10<n){e.timeoutHandle=JN(Id.bind(null,e,$o,lc),n);break}Id(e,$o,lc);break;case 5:Id(e,$o,lc);break;default:throw Error(Oe(329))}}}return Qo(e,ii()),e.callbackNode===r?qG.bind(null,e):null}function yA(e,t){var r=yy;return e.current.memoizedState.isDehydrated&&(rh(e,t).flags|=256),e=Q_(e,t),e!==2&&(t=$o,$o=r,t!==null&&vA(t)),e}function vA(e){$o===null?$o=e:$o.push.apply($o,e)}function Roe(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Qs(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fu(e,t){for(t&=~wP,t&=~OS,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ys(t),n=1<<r;e[r]=-1,t&=~n}}function mj(e){if(br&6)throw Error(Oe(327));Ep();var t=D_(e,0);if(!(t&1))return Qo(e,ii()),null;var r=Q_(e,t);if(e.tag!==0&&r===2){var n=HN(e);n!==0&&(t=n,r=yA(e,n))}if(r===1)throw r=sv,rh(e,0),fu(e,t),Qo(e,ii()),r;if(r===6)throw Error(Oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Id(e,$o,lc),Qo(e,ii()),null}function TP(e,t){var r=br;br|=1;try{return e(t)}finally{br=r,br===0&&(zp=ii()+500,RS&&id())}}function bh(e){bu!==null&&bu.tag===0&&!(br&6)&&Ep();var t=br;br|=1;var r=gs.transition,n=zr;try{if(gs.transition=null,zr=1,e)return e()}finally{zr=n,gs.transition=r,br=t,!(br&6)&&id()}}function CP(){ba=Jf.current,vn(Jf)}function rh(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,noe(r)),pi!==null)for(r=pi.return;r!==null;){var n=r;switch(oP(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&F_();break;case 3:$p(),vn(Xo),vn(go),pP();break;case 5:fP(n);break;case 4:$p();break;case 13:vn(Pn);break;case 19:vn(Pn);break;case 10:cP(n.type._context);break;case 22:case 23:CP()}r=r.return}if($i=e,pi=e=Mu(e.current,null),Zi=ba=t,Ii=0,sv=null,wP=OS=vh=0,$o=yy=null,zd!==null){for(t=0;t<zd.length;t++)if(r=zd[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}zd=null}return e}function YG(e,t){do{var r=pi;try{if(lP(),FE.current=q_,K_){for(var n=Mn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}K_=!1}if(yh=0,Mi=xi=Mn=null,my=!1,iv=0,_P.current=null,r===null||r.return===null){Ii=1,sv=t,pi=null;break}e:{var o=e,a=r.return,s=r,l=t;if(t=Zi,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=rj(a);if(p!==null){p.flags&=-257,nj(p,a,s,o,t),p.mode&1&&tj(o,c,t),t=p,l=c;var m=t.updateQueue;if(m===null){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}else{if(!(t&1)){tj(o,c,t),xP();break e}l=Error(Oe(426))}}else if(Tn&&s.mode&1){var y=rj(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),nj(y,a,s,o,t),aP(Hp(l,s));break e}}o=l=Hp(l,s),Ii!==4&&(Ii=2),yy===null?yy=[o]:yy.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=kG(o,l,t);YM(o,v);break e;case 1:s=l;var b=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Du===null||!Du.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=PG(o,s,t);YM(o,S);break e}}o=o.return}while(o!==null)}QG(r)}catch(I){t=I,pi===r&&r!==null&&(pi=r=r.return);continue}break}while(!0)}function XG(){var e=Y_.current;return Y_.current=q_,e===null?q_:e}function xP(){(Ii===0||Ii===3||Ii===2)&&(Ii=4),$i===null||!(vh&268435455)&&!(OS&268435455)||fu($i,Zi)}function Q_(e,t){var r=br;br|=2;var n=XG();($i!==e||Zi!==t)&&(lc=null,rh(e,t));do try{Ioe();break}catch(i){YG(e,i)}while(!0);if(lP(),br=r,Y_.current=n,pi!==null)throw Error(Oe(261));return $i=null,Zi=0,Ii}function Ioe(){for(;pi!==null;)JG(pi)}function Noe(){for(;pi!==null&&!eie();)JG(pi)}function JG(e){var t=eW(e.alternate,e,ba);e.memoizedProps=e.pendingProps,t===null?QG(e):pi=t,_P.current=null}function QG(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=woe(r,t),r!==null){r.flags&=32767,pi=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ii=6,pi=null;return}}else if(r=_oe(r,t,ba),r!==null){pi=r;return}if(t=t.sibling,t!==null){pi=t;return}pi=t=e}while(t!==null);Ii===0&&(Ii=5)}function Id(e,t,r){var n=zr,i=gs.transition;try{gs.transition=null,zr=1,Aoe(e,t,r,n)}finally{gs.transition=i,zr=n}return null}function Aoe(e,t,r,n){do Ep();while(bu!==null);if(br&6)throw Error(Oe(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Oe(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(uie(e,o),e===$i&&(pi=$i=null,Zi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||yb||(yb=!0,tW(P_,function(){return Ep(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=gs.transition,gs.transition=null;var a=zr;zr=1;var s=br;br|=4,_P.current=null,Toe(e,r),WG(r,e),Xie(YN),L_=!!qN,YN=qN=null,e.current=r,Coe(r),tie(),br=s,zr=a,gs.transition=o}else e.current=r;if(yb&&(yb=!1,bu=e,J_=i),o=e.pendingLanes,o===0&&(Du=null),iie(r.stateNode),Qo(e,ii()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(X_)throw X_=!1,e=mA,mA=null,e;return J_&1&&e.tag!==0&&Ep(),o=e.pendingLanes,o&1?e===gA?vy++:(vy=0,gA=e):vy=0,id(),null}function Ep(){if(bu!==null){var e=kz(J_),t=gs.transition,r=zr;try{if(gs.transition=null,zr=16>e?16:e,bu===null)var n=!1;else{if(e=bu,bu=null,J_=0,br&6)throw Error(Oe(331));var i=br;for(br|=4,tt=e.current;tt!==null;){var o=tt,a=o.child;if(tt.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(tt=c;tt!==null;){var u=tt;switch(u.tag){case 0:case 11:case 15:gy(8,u,o)}var h=u.child;if(h!==null)h.return=u,tt=h;else for(;tt!==null;){u=tt;var f=u.sibling,p=u.return;if(HG(u),u===c){tt=null;break}if(f!==null){f.return=p,tt=f;break}tt=p}}}var m=o.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}tt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,tt=a;else e:for(;tt!==null;){if(o=tt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gy(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,tt=v;break e}tt=o.return}}var b=e.current;for(tt=b;tt!==null;){a=tt;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,tt=_;else e:for(a=b;tt!==null;){if(s=tt,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:AS(9,s)}}catch(I){Wn(s,s.return,I)}if(s===a){tt=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,tt=S;break e}tt=s.return}}if(br=i,id(),Al&&typeof Al.onPostCommitFiberRoot=="function")try{Al.onPostCommitFiberRoot(wS,e)}catch{}n=!0}return n}finally{zr=r,gs.transition=t}}return!1}function gj(e,t,r){t=Hp(r,t),t=kG(e,t,1),e=Pu(e,t,1),t=Ao(),e!==null&&(Zv(e,1,t),Qo(e,t))}function Wn(e,t,r){if(e.tag===3)gj(e,e,r);else for(;t!==null;){if(t.tag===3){gj(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Du===null||!Du.has(n))){e=Hp(r,e),e=PG(t,e,1),t=Pu(t,e,1),e=Ao(),t!==null&&(Zv(t,1,e),Qo(t,e));break}}t=t.return}}function Ooe(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ao(),e.pingedLanes|=e.suspendedLanes&r,$i===e&&(Zi&r)===r&&(Ii===4||Ii===3&&(Zi&130023424)===Zi&&500>ii()-SP?rh(e,0):wP|=r),Qo(e,t)}function ZG(e,t){t===0&&(e.mode&1?(t=sb,sb<<=1,!(sb&130023424)&&(sb=4194304)):t=1);var r=Ao();e=Ic(e,t),e!==null&&(Zv(e,t,r),Qo(e,r))}function koe(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ZG(e,r)}function Poe(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Oe(314))}n!==null&&n.delete(t),ZG(e,r)}var eW;eW=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xo.current)qo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return qo=!1,Eoe(e,t,r);qo=!!(e.flags&131072)}else qo=!1,Tn&&t.flags&1048576&&iG(t,$_,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;BE(e,t),e=t.pendingProps;var i=Fp(t,go.current);bp(t,r),i=gP(null,t,n,e,i,r);var o=yP();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Jo(n)?(o=!0,V_(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dP(t),i.updater=NS,t.stateNode=i,i._reactInternals=t,iA(t,n,e,r),t=sA(null,t,n,!0,o,r)):(t.tag=0,Tn&&o&&iP(t),xo(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(BE(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Loe(n),e=Vs(n,e),i){case 0:t=aA(null,t,n,e,r);break e;case 1:t=aj(null,t,n,e,r);break e;case 11:t=ij(null,t,n,e,r);break e;case 14:t=oj(null,t,n,Vs(n.type,e),r);break e}throw Error(Oe(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Vs(n,i),aA(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Vs(n,i),aj(e,t,n,i,r);case 3:e:{if(jG(t),e===null)throw Error(Oe(387));n=t.pendingProps,o=t.memoizedState,i=o.element,uG(e,t),G_(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Hp(Error(Oe(423)),t),t=sj(e,t,n,r,i);break e}else if(n!==i){i=Hp(Error(Oe(424)),t),t=sj(e,t,n,r,i);break e}else for(Sa=ku(t.stateNode.containerInfo.firstChild),Aa=t,Tn=!0,zs=null,r=lG(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Vp(),n===i){t=Nc(e,t,r);break e}xo(e,t,n,r)}t=t.child}return t;case 5:return dG(t),e===null&&tA(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,XN(n,i)?a=null:o!==null&&XN(n,o)&&(t.flags|=32),MG(e,t),xo(e,t,a,r),t.child;case 6:return e===null&&tA(t),null;case 13:return UG(e,t,r);case 4:return hP(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Bp(t,null,n,r):xo(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Vs(n,i),ij(e,t,n,i,r);case 7:return xo(e,t,t.pendingProps,r),t.child;case 8:return xo(e,t,t.pendingProps.children,r),t.child;case 12:return xo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ln(H_,n._currentValue),n._currentValue=a,o!==null)if(Qs(o.value,a)){if(o.children===i.children&&!Xo.current){t=Nc(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=Ec(-1,r&-r),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),rA(o.return,r,t),s.lanes|=r;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Oe(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),rA(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}xo(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,bp(t,r),i=vs(i),n=n(i),t.flags|=1,xo(e,t,n,r),t.child;case 14:return n=t.type,i=Vs(n,t.pendingProps),i=Vs(n.type,i),oj(e,t,n,i,r);case 15:return DG(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Vs(n,i),BE(e,t),t.tag=1,Jo(n)?(e=!0,V_(t)):e=!1,bp(t,r),OG(t,n,i),iA(t,n,i,r),sA(null,t,n,!0,e,r);case 19:return FG(e,t,r);case 22:return LG(e,t,r)}throw Error(Oe(156,t.tag))};function tW(e,t){return Iz(e,t)}function Doe(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(e,t,r,n){return new Doe(e,t,r,n)}function RP(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Loe(e){if(typeof e=="function")return RP(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wk)return 11;if(e===Kk)return 14}return 2}function Mu(e,t){var r=e.alternate;return r===null?(r=ps(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function zE(e,t,r,n,i,o){var a=2;if(n=e,typeof e=="function")RP(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Bf:return nh(r.children,i,o,t);case Gk:a=8,i|=8;break;case IN:return e=ps(12,r,t,i|2),e.elementType=IN,e.lanes=o,e;case NN:return e=ps(13,r,t,i),e.elementType=NN,e.lanes=o,e;case AN:return e=ps(19,r,t,i),e.elementType=AN,e.lanes=o,e;case dz:return kS(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cz:a=10;break e;case uz:a=9;break e;case Wk:a=11;break e;case Kk:a=14;break e;case lu:a=16,n=null;break e}throw Error(Oe(130,e==null?e:typeof e,""))}return t=ps(a,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function nh(e,t,r,n){return e=ps(7,e,n,t),e.lanes=r,e}function kS(e,t,r,n){return e=ps(22,e,n,t),e.elementType=dz,e.lanes=r,e.stateNode={isHidden:!1},e}function nx(e,t,r){return e=ps(6,e,null,t),e.lanes=r,e}function ix(e,t,r){return t=ps(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Moe(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=UC(0),this.expirationTimes=UC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=UC(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function IP(e,t,r,n,i,o,a,s,l){return e=new Moe(e,t,r,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ps(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},dP(o),e}function joe(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vf,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function rW(e){if(!e)return qu;e=e._reactInternals;e:{if(Lh(e)!==e||e.tag!==1)throw Error(Oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Jo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Oe(171))}if(e.tag===1){var r=e.type;if(Jo(r))return rG(e,r,t)}return t}function nW(e,t,r,n,i,o,a,s,l){return e=IP(r,n,!0,e,i,o,a,s,l),e.context=rW(null),r=e.current,n=Ao(),i=Lu(r),o=Ec(n,i),o.callback=t??null,Pu(r,o,i),e.current.lanes=i,Zv(e,i,n),Qo(e,n),e}function PS(e,t,r,n){var i=t.current,o=Ao(),a=Lu(i);return r=rW(r),t.context===null?t.context=r:t.pendingContext=r,t=Ec(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Pu(i,t,a),e!==null&&(Xs(e,i,a,o),UE(e,i,a)),a}function Z_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yj(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function NP(e,t){yj(e,t),(e=e.alternate)&&yj(e,t)}function Uoe(){return null}var iW=typeof reportError=="function"?reportError:function(e){console.error(e)};function AP(e){this._internalRoot=e}DS.prototype.render=AP.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Oe(409));PS(e,t,null,null)};DS.prototype.unmount=AP.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bh(function(){PS(null,e,null,null)}),t[Rc]=null}};function DS(e){this._internalRoot=e}DS.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lz();e={blockedOn:null,target:e,priority:t};for(var r=0;r<hu.length&&t!==0&&t<hu[r].priority;r++);hu.splice(r,0,e),r===0&&jz(e)}};function OP(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function LS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vj(){}function Foe(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var c=Z_(a);o.call(c)}}var a=nW(t,n,e,0,null,!1,!1,"",vj);return e._reactRootContainer=a,e[Rc]=a.current,Zy(e.nodeType===8?e.parentNode:e),bh(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var c=Z_(l);s.call(c)}}var l=IP(e,0,!1,null,null,!1,!1,"",vj);return e._reactRootContainer=l,e[Rc]=l.current,Zy(e.nodeType===8?e.parentNode:e),bh(function(){PS(t,l,r,n)}),l}function MS(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=Z_(a);s.call(l)}}PS(t,a,e,i)}else a=Foe(r,t,e,i,n);return Z_(a)}Pz=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Wg(t.pendingLanes);r!==0&&(Xk(t,r|1),Qo(t,ii()),!(br&6)&&(zp=ii()+500,id()))}break;case 13:bh(function(){var n=Ic(e,1);if(n!==null){var i=Ao();Xs(n,e,1,i)}}),NP(e,1)}};Jk=function(e){if(e.tag===13){var t=Ic(e,134217728);if(t!==null){var r=Ao();Xs(t,e,134217728,r)}NP(e,134217728)}};Dz=function(e){if(e.tag===13){var t=Lu(e),r=Ic(e,t);if(r!==null){var n=Ao();Xs(r,e,t,n)}NP(e,t)}};Lz=function(){return zr};Mz=function(e,t){var r=zr;try{return zr=e,t()}finally{zr=r}};VN=function(e,t,r){switch(t){case"input":if(PN(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=xS(n);if(!i)throw Error(Oe(90));fz(n),PN(n,i)}}}break;case"textarea":mz(e,r);break;case"select":t=r.value,t!=null&&mp(e,!!r.multiple,t,!1)}};wz=TP;Sz=bh;var Voe={usingClientEntryPoint:!1,Events:[t0,Gf,xS,Ez,_z,TP]},bg={findFiberByHostInstance:Hd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Boe={bundleType:bg.bundleType,version:bg.version,rendererPackageName:bg.rendererPackageName,rendererConfig:bg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xz(e),e===null?null:e.stateNode},findFiberByHostInstance:bg.findFiberByHostInstance||Uoe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vb.isDisabled&&vb.supportsFiber)try{wS=vb.inject(Boe),Al=vb}catch{}}ja.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Voe;ja.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OP(t))throw Error(Oe(200));return joe(e,t,null,r)};ja.createRoot=function(e,t){if(!OP(e))throw Error(Oe(299));var r=!1,n="",i=iW;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=IP(e,1,!1,null,null,r,!1,n,i),e[Rc]=t.current,Zy(e.nodeType===8?e.parentNode:e),new AP(t)};ja.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Oe(188)):(e=Object.keys(e).join(","),Error(Oe(268,e)));return e=xz(t),e=e===null?null:e.stateNode,e};ja.flushSync=function(e){return bh(e)};ja.hydrate=function(e,t,r){if(!LS(t))throw Error(Oe(200));return MS(null,e,t,!0,r)};ja.hydrateRoot=function(e,t,r){if(!OP(e))throw Error(Oe(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=iW;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=nW(t,null,e,1,r??null,i,!1,o,a),e[Rc]=t.current,Zy(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new DS(t)};ja.render=function(e,t,r){if(!LS(t))throw Error(Oe(200));return MS(null,e,t,!1,r)};ja.unmountComponentAtNode=function(e){if(!LS(e))throw Error(Oe(40));return e._reactRootContainer?(bh(function(){MS(null,null,e,!1,function(){e._reactRootContainer=null,e[Rc]=null})}),!0):!1};ja.unstable_batchedUpdates=TP;ja.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!LS(r))throw Error(Oe(200));if(e==null||e._reactInternals===void 0)throw Error(Oe(38));return MS(e,t,r,!1,n)};ja.version="18.3.1-next-f1338f8080-20240426";function oW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oW)}catch(e){console.error(e)}}oW(),oz.exports=ja;var jS=oz.exports,aW,bj=jS;aW=bj.createRoot,bj.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lv.apply(this,arguments)}var Eu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Eu||(Eu={}));const Ej="popstate";function $oe(e){e===void 0&&(e={});function t(n,i){let{pathname:o,search:a,hash:s}=n.location;return bA("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:ew(i)}return zoe(t,r,null,e)}function mi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function sW(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hoe(){return Math.random().toString(36).substr(2,8)}function _j(e,t){return{usr:e.state,key:e.key,idx:t}}function bA(e,t,r,n){return r===void 0&&(r=null),lv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?bm(t):t,{state:r,key:t&&t.key||n||Hoe()})}function ew(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function bm(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function zoe(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s=Eu.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(lv({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function h(){s=Eu.Pop;let y=u(),v=y==null?null:y-c;c=y,l&&l({action:s,location:g.location,delta:v})}function f(y,v){s=Eu.Push;let b=bA(g.location,y,v);c=u()+1;let _=_j(b,c),S=g.createHref(b);try{a.pushState(_,"",S)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(S)}o&&l&&l({action:s,location:g.location,delta:1})}function p(y,v){s=Eu.Replace;let b=bA(g.location,y,v);c=u();let _=_j(b,c),S=g.createHref(b);a.replaceState(_,"",S),o&&l&&l({action:s,location:g.location,delta:0})}function m(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof y=="string"?y:ew(y);return b=b.replace(/ $/,"%20"),mi(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let g={get action(){return s},get location(){return e(i,a)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Ej,h),l=y,()=>{i.removeEventListener(Ej,h),l=null}},createHref(y){return t(i,y)},createURL:m,encodeLocation(y){let v=m(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(y){return a.go(y)}};return g}var wj;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(wj||(wj={}));function Goe(e,t,r){return r===void 0&&(r="/"),Woe(e,t,r,!1)}function Woe(e,t,r,n){let i=typeof t=="string"?bm(t):t,o=kP(i.pathname||"/",r);if(o==null)return null;let a=lW(e);Koe(a);let s=null;for(let l=0;s==null&&l<a.length;++l){let c=iae(o);s=rae(a[l],c,n)}return s}function lW(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,a,s)=>{let l={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(mi(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=ju([n,l.relativePath]),u=r.concat(l);o.children&&o.children.length>0&&(mi(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),lW(o.children,t,u,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:eae(c,o.index),routesMeta:u})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let l of cW(o.path))i(o,a,l)}),t}function cW(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=cW(n.join("/")),s=[];return s.push(...a.map(l=>l===""?o:[o,l].join("/"))),i&&s.push(...a),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function Koe(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:tae(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const qoe=/^:[\w-]+$/,Yoe=3,Xoe=2,Joe=1,Qoe=10,Zoe=-2,Sj=e=>e==="*";function eae(e,t){let r=e.split("/"),n=r.length;return r.some(Sj)&&(n+=Zoe),t&&(n+=Xoe),r.filter(i=>!Sj(i)).reduce((i,o)=>i+(qoe.test(o)?Yoe:o===""?Joe:Qoe),n)}function tae(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function rae(e,t,r){let{routesMeta:n}=e,i={},o="/",a=[];for(let s=0;s<n.length;++s){let l=n[s],c=s===n.length-1,u=o==="/"?t:t.slice(o.length)||"/",h=Tj({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=Tj({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:ju([o,h.pathname]),pathnameBase:lae(ju([o,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(o=ju([o,h.pathnameBase]))}return a}function Tj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=nae(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let g=s[h]||"";a=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const m=s[h];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:e}}function nae(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),sW(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function iae(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return sW(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function kP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function oae(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?bm(e):e;return{pathname:r?r.startsWith("/")?r:aae(r,t):t,search:cae(n),hash:uae(i)}}function aae(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function ox(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sae(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function uW(e,t){let r=sae(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function dW(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=bm(e):(i=lv({},e),mi(!i.pathname||!i.pathname.includes("?"),ox("?","pathname","search",i)),mi(!i.pathname||!i.pathname.includes("#"),ox("#","pathname","hash",i)),mi(!i.search||!i.search.includes("#"),ox("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=r;else{let h=t.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}s=h>=0?t[h]:"/"}let l=oae(i,s),c=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ju=e=>e.join("/").replace(/\/\/+/g,"/"),lae=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),cae=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,uae=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dae(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const hW=["post","put","patch","delete"];new Set(hW);const hae=["get",...hW];new Set(hae);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cv(){return cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cv.apply(this,arguments)}const PP=T.createContext(null),fae=T.createContext(null),Mh=T.createContext(null),US=T.createContext(null),jc=T.createContext({outlet:null,matches:[],isDataRoute:!1}),fW=T.createContext(null);function pae(e,t){let{relative:r}=t===void 0?{}:t;n0()||mi(!1);let{basename:n,navigator:i}=T.useContext(Mh),{hash:o,pathname:a,search:s}=mW(e,{relative:r}),l=a;return n!=="/"&&(l=a==="/"?n:ju([n,a])),i.createHref({pathname:l,search:s,hash:o})}function n0(){return T.useContext(US)!=null}function Em(){return n0()||mi(!1),T.useContext(US).location}function pW(e){T.useContext(Mh).static||T.useLayoutEffect(e)}function Er(){let{isDataRoute:e}=T.useContext(jc);return e?Nae():mae()}function mae(){n0()||mi(!1);let e=T.useContext(PP),{basename:t,future:r,navigator:n}=T.useContext(Mh),{matches:i}=T.useContext(jc),{pathname:o}=Em(),a=JSON.stringify(uW(i,r.v7_relativeSplatPath)),s=T.useRef(!1);return pW(()=>{s.current=!0}),T.useCallback(function(c,u){if(u===void 0&&(u={}),!s.current)return;if(typeof c=="number"){n.go(c);return}let h=dW(c,JSON.parse(a),o,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:ju([t,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[t,n,a,o,e])}const gae=T.createContext(null);function yae(e){let t=T.useContext(jc).outlet;return t&&T.createElement(gae.Provider,{value:e},t)}function _m(){let{matches:e}=T.useContext(jc),t=e[e.length-1];return t?t.params:{}}function mW(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=T.useContext(Mh),{matches:i}=T.useContext(jc),{pathname:o}=Em(),a=JSON.stringify(uW(i,n.v7_relativeSplatPath));return T.useMemo(()=>dW(e,JSON.parse(a),o,r==="path"),[e,a,o,r])}function vae(e,t){return bae(e,t)}function bae(e,t,r,n){n0()||mi(!1);let{navigator:i}=T.useContext(Mh),{matches:o}=T.useContext(jc),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Em(),u;if(t){var h;let y=typeof t=="string"?bm(t):t;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||mi(!1),u=y}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=Goe(e,{pathname:p}),g=Tae(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},s,y.params),pathname:ju([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:ju([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,r,n);return t&&g?T.createElement(US.Provider,{value:{location:cv({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Eu.Pop}},g):g}function Eae(){let e=Iae(),t=dae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:i},r):null,null)}const _ae=T.createElement(Eae,null);class wae extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?T.createElement(jc.Provider,{value:this.props.routeContext},T.createElement(fW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Sae(e){let{routeContext:t,match:r,children:n}=e,i=T.useContext(PP);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(jc.Provider,{value:t},n)}function Tae(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,s=(i=r)==null?void 0:i.errors;if(s!=null){let u=a.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);u>=0||mi(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let h=a[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=r,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,h,f)=>{let p,m=!1,g=null,y=null;r&&(p=s&&h.route.id?s[h.route.id]:void 0,g=h.route.errorElement||_ae,l&&(c<0&&f===0?(m=!0,y=null):c===f&&(m=!0,y=h.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,f+1)),b=()=>{let _;return p?_=g:m?_=y:h.route.Component?_=T.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=u,T.createElement(Sae,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:r!=null},children:_})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(wae,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var gW=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(gW||{}),tw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(tw||{});function Cae(e){let t=T.useContext(PP);return t||mi(!1),t}function xae(e){let t=T.useContext(fae);return t||mi(!1),t}function Rae(e){let t=T.useContext(jc);return t||mi(!1),t}function yW(e){let t=Rae(),r=t.matches[t.matches.length-1];return r.route.id||mi(!1),r.route.id}function Iae(){var e;let t=T.useContext(fW),r=xae(tw.UseRouteError),n=yW(tw.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Nae(){let{router:e}=Cae(gW.UseNavigateStable),t=yW(tw.UseNavigateStable),r=T.useRef(!1);return pW(()=>{r.current=!0}),T.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,cv({fromRouteId:t},o)))},[e,t])}const Cj={};function Aae(e,t){Cj[t]||(Cj[t]=!0,console.warn(t))}const xj=(e,t,r)=>Aae(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+r+"."));function Oae(e,t){e!=null&&e.v7_startTransition||xj("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&xj("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function gi(e){return yae(e.context)}function Ve(e){mi(!1)}function kae(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Eu.Pop,navigator:o,static:a=!1,future:s}=e;n0()&&mi(!1);let l=t.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:l,navigator:o,static:a,future:cv({v7_relativeSplatPath:!1},s)}),[l,s,o,a]);typeof n=="string"&&(n=bm(n));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:m="default"}=n,g=T.useMemo(()=>{let y=kP(u,l);return y==null?null:{location:{pathname:y,search:h,hash:f,state:p,key:m},navigationType:i}},[l,u,h,f,p,m,i]);return g==null?null:T.createElement(Mh.Provider,{value:c},T.createElement(US.Provider,{children:r,value:g}))}function Pae(e){let{children:t,location:r}=e;return vae(EA(t),r)}new Promise(()=>{});function EA(e,t){t===void 0&&(t=[]);let r=[];return T.Children.forEach(e,(n,i)=>{if(!T.isValidElement(n))return;let o=[...t,i];if(n.type===T.Fragment){r.push.apply(r,EA(n.props.children,o));return}n.type!==Ve&&mi(!1),!n.props.index||!n.props.children||mi(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=EA(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _A(){return _A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_A.apply(this,arguments)}function Dae(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Lae(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Mae(e,t){return e.button===0&&(!t||t==="_self")&&!Lae(e)}function rw(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function jae(e,t){let r=rw(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(o=>{r.append(i,o)})}),r}const Uae=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Fae="6";try{window.__reactRouterVersion=Fae}catch{}const Vae="startTransition",Rj=nz[Vae];function Bae(e){let{basename:t,children:r,future:n,window:i}=e,o=T.useRef();o.current==null&&(o.current=$oe({window:i,v5Compat:!0}));let a=o.current,[s,l]=T.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},u=T.useCallback(h=>{c&&Rj?Rj(()=>l(h)):l(h)},[l,c]);return T.useLayoutEffect(()=>a.listen(u),[a,u]),T.useEffect(()=>Oae(n),[n]),T.createElement(kae,{basename:t,children:r,location:s.location,navigationType:s.action,navigator:a,future:n})}const $ae=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Hae=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rr=T.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:o,replace:a,state:s,target:l,to:c,preventScrollReset:u,viewTransition:h}=t,f=Dae(t,Uae),{basename:p}=T.useContext(Mh),m,g=!1;if(typeof c=="string"&&Hae.test(c)&&(m=c,$ae))try{let _=new URL(window.location.href),S=c.startsWith("//")?new URL(_.protocol+c):new URL(c),I=kP(S.pathname,p);S.origin===_.origin&&I!=null?c=I+S.search+S.hash:g=!0}catch{}let y=pae(c,{relative:i}),v=zae(c,{replace:a,state:s,target:l,preventScrollReset:u,relative:i,viewTransition:h});function b(_){n&&n(_),_.defaultPrevented||v(_)}return T.createElement("a",_A({},f,{href:m||y,onClick:g||o?n:b,ref:r,target:l}))});var Ij;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ij||(Ij={}));var Nj;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Nj||(Nj={}));function zae(e,t){let{target:r,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:s}=t===void 0?{}:t,l=Er(),c=Em(),u=mW(e,{relative:a});return T.useCallback(h=>{if(Mae(h,r)){h.preventDefault();let f=n!==void 0?n:ew(c)===ew(u);l(e,{replace:f,state:i,preventScrollReset:o,relative:a,viewTransition:s})}},[c,l,u,n,i,r,e,o,a,s])}function vW(e){let t=T.useRef(rw(e)),r=T.useRef(!1),n=Em(),i=T.useMemo(()=>jae(n.search,r.current?null:t.current),[n.search]),o=Er(),a=T.useCallback((s,l)=>{const c=rw(typeof s=="function"?s(i):s);r.current=!0,o("?"+c,l)},[o,i]);return[i,a]}var Gae=function(t){return Wae(t)&&!Kae(t)};function Wae(e){return!!e&&typeof e=="object"}function Kae(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||Xae(e)}var qae=typeof Symbol=="function"&&Symbol.for,Yae=qae?Symbol.for("react.element"):60103;function Xae(e){return e.$$typeof===Yae}function Jae(e){return Array.isArray(e)?[]:{}}function nw(e,t){return t.clone!==!1&&t.isMergeableObject(e)?uv(Jae(e),e,t):e}function Qae(e,t,r){return e.concat(t).map(function(n){return nw(n,r)})}function Zae(e,t,r){var n={};return r.isMergeableObject(e)&&Object.keys(e).forEach(function(i){n[i]=nw(e[i],r)}),Object.keys(t).forEach(function(i){!r.isMergeableObject(t[i])||!e[i]?n[i]=nw(t[i],r):n[i]=uv(e[i],t[i],r)}),n}function uv(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||Qae,r.isMergeableObject=r.isMergeableObject||Gae;var n=Array.isArray(t),i=Array.isArray(e),o=n===i;return o?n?r.arrayMerge(e,t,r):Zae(e,t,r):nw(t,r)}uv.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return uv(n,i,r)},{})};var wA=uv,bW=typeof global=="object"&&global&&global.Object===Object&&global,ese=typeof self=="object"&&self&&self.Object===Object&&self,Bl=bW||ese||Function("return this")(),Yu=Bl.Symbol,EW=Object.prototype,tse=EW.hasOwnProperty,rse=EW.toString,Eg=Yu?Yu.toStringTag:void 0;function nse(e){var t=tse.call(e,Eg),r=e[Eg];try{e[Eg]=void 0;var n=!0}catch{}var i=rse.call(e);return n&&(t?e[Eg]=r:delete e[Eg]),i}var ise=Object.prototype,ose=ise.toString;function ase(e){return ose.call(e)}var sse="[object Null]",lse="[object Undefined]",Aj=Yu?Yu.toStringTag:void 0;function jh(e){return e==null?e===void 0?lse:sse:Aj&&Aj in Object(e)?nse(e):ase(e)}function _W(e,t){return function(r){return e(t(r))}}var DP=_W(Object.getPrototypeOf,Object);function Uh(e){return e!=null&&typeof e=="object"}var cse="[object Object]",use=Function.prototype,dse=Object.prototype,wW=use.toString,hse=dse.hasOwnProperty,fse=wW.call(Object);function Oj(e){if(!Uh(e)||jh(e)!=cse)return!1;var t=DP(e);if(t===null)return!0;var r=hse.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&wW.call(r)==fse}function pse(){this.__data__=[],this.size=0}function SW(e,t){return e===t||e!==e&&t!==t}function FS(e,t){for(var r=e.length;r--;)if(SW(e[r][0],t))return r;return-1}var mse=Array.prototype,gse=mse.splice;function yse(e){var t=this.__data__,r=FS(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():gse.call(t,r,1),--this.size,!0}function vse(e){var t=this.__data__,r=FS(t,e);return r<0?void 0:t[r][1]}function bse(e){return FS(this.__data__,e)>-1}function Ese(e,t){var r=this.__data__,n=FS(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Uc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Uc.prototype.clear=pse;Uc.prototype.delete=yse;Uc.prototype.get=vse;Uc.prototype.has=bse;Uc.prototype.set=Ese;function _se(){this.__data__=new Uc,this.size=0}function wse(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Sse(e){return this.__data__.get(e)}function Tse(e){return this.__data__.has(e)}function i0(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Cse="[object AsyncFunction]",xse="[object Function]",Rse="[object GeneratorFunction]",Ise="[object Proxy]";function TW(e){if(!i0(e))return!1;var t=jh(e);return t==xse||t==Rse||t==Cse||t==Ise}var ax=Bl["__core-js_shared__"],kj=function(){var e=/[^.]+$/.exec(ax&&ax.keys&&ax.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Nse(e){return!!kj&&kj in e}var Ase=Function.prototype,Ose=Ase.toString;function Fh(e){if(e!=null){try{return Ose.call(e)}catch{}try{return e+""}catch{}}return""}var kse=/[\\^$.*+?()[\]{}|]/g,Pse=/^\[object .+?Constructor\]$/,Dse=Function.prototype,Lse=Object.prototype,Mse=Dse.toString,jse=Lse.hasOwnProperty,Use=RegExp("^"+Mse.call(jse).replace(kse,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fse(e){if(!i0(e)||Nse(e))return!1;var t=TW(e)?Use:Pse;return t.test(Fh(e))}function Vse(e,t){return e==null?void 0:e[t]}function Vh(e,t){var r=Vse(e,t);return Fse(r)?r:void 0}var dv=Vh(Bl,"Map"),hv=Vh(Object,"create");function Bse(){this.__data__=hv?hv(null):{},this.size=0}function $se(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Hse="__lodash_hash_undefined__",zse=Object.prototype,Gse=zse.hasOwnProperty;function Wse(e){var t=this.__data__;if(hv){var r=t[e];return r===Hse?void 0:r}return Gse.call(t,e)?t[e]:void 0}var Kse=Object.prototype,qse=Kse.hasOwnProperty;function Yse(e){var t=this.__data__;return hv?t[e]!==void 0:qse.call(t,e)}var Xse="__lodash_hash_undefined__";function Jse(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=hv&&t===void 0?Xse:t,this}function Eh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Eh.prototype.clear=Bse;Eh.prototype.delete=$se;Eh.prototype.get=Wse;Eh.prototype.has=Yse;Eh.prototype.set=Jse;function Qse(){this.size=0,this.__data__={hash:new Eh,map:new(dv||Uc),string:new Eh}}function Zse(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function VS(e,t){var r=e.__data__;return Zse(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ele(e){var t=VS(this,e).delete(e);return this.size-=t?1:0,t}function tle(e){return VS(this,e).get(e)}function rle(e){return VS(this,e).has(e)}function nle(e,t){var r=VS(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function od(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}od.prototype.clear=Qse;od.prototype.delete=ele;od.prototype.get=tle;od.prototype.has=rle;od.prototype.set=nle;var ile=200;function ole(e,t){var r=this.__data__;if(r instanceof Uc){var n=r.__data__;if(!dv||n.length<ile-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new od(n)}return r.set(e,t),this.size=r.size,this}function wm(e){var t=this.__data__=new Uc(e);this.size=t.size}wm.prototype.clear=_se;wm.prototype.delete=wse;wm.prototype.get=Sse;wm.prototype.has=Tse;wm.prototype.set=ole;function ale(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Pj=function(){try{var e=Vh(Object,"defineProperty");return e({},"",{}),e}catch{}}();function CW(e,t,r){t=="__proto__"&&Pj?Pj(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var sle=Object.prototype,lle=sle.hasOwnProperty;function xW(e,t,r){var n=e[t];(!(lle.call(e,t)&&SW(n,r))||r===void 0&&!(t in e))&&CW(e,t,r)}function BS(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=void 0;l===void 0&&(l=e[s]),i?CW(r,s,l):xW(r,s,l)}return r}function cle(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var ule="[object Arguments]";function Dj(e){return Uh(e)&&jh(e)==ule}var RW=Object.prototype,dle=RW.hasOwnProperty,hle=RW.propertyIsEnumerable,fle=Dj(function(){return arguments}())?Dj:function(e){return Uh(e)&&dle.call(e,"callee")&&!hle.call(e,"callee")},o0=Array.isArray;function ple(){return!1}var IW=typeof Ia=="object"&&Ia&&!Ia.nodeType&&Ia,Lj=IW&&typeof Na=="object"&&Na&&!Na.nodeType&&Na,mle=Lj&&Lj.exports===IW,Mj=mle?Bl.Buffer:void 0,gle=Mj?Mj.isBuffer:void 0,NW=gle||ple,yle=9007199254740991,vle=/^(?:0|[1-9]\d*)$/;function ble(e,t){var r=typeof e;return t=t??yle,!!t&&(r=="number"||r!="symbol"&&vle.test(e))&&e>-1&&e%1==0&&e<t}var Ele=9007199254740991;function AW(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ele}var _le="[object Arguments]",wle="[object Array]",Sle="[object Boolean]",Tle="[object Date]",Cle="[object Error]",xle="[object Function]",Rle="[object Map]",Ile="[object Number]",Nle="[object Object]",Ale="[object RegExp]",Ole="[object Set]",kle="[object String]",Ple="[object WeakMap]",Dle="[object ArrayBuffer]",Lle="[object DataView]",Mle="[object Float32Array]",jle="[object Float64Array]",Ule="[object Int8Array]",Fle="[object Int16Array]",Vle="[object Int32Array]",Ble="[object Uint8Array]",$le="[object Uint8ClampedArray]",Hle="[object Uint16Array]",zle="[object Uint32Array]",mn={};mn[Mle]=mn[jle]=mn[Ule]=mn[Fle]=mn[Vle]=mn[Ble]=mn[$le]=mn[Hle]=mn[zle]=!0;mn[_le]=mn[wle]=mn[Dle]=mn[Sle]=mn[Lle]=mn[Tle]=mn[Cle]=mn[xle]=mn[Rle]=mn[Ile]=mn[Nle]=mn[Ale]=mn[Ole]=mn[kle]=mn[Ple]=!1;function Gle(e){return Uh(e)&&AW(e.length)&&!!mn[jh(e)]}function LP(e){return function(t){return e(t)}}var OW=typeof Ia=="object"&&Ia&&!Ia.nodeType&&Ia,by=OW&&typeof Na=="object"&&Na&&!Na.nodeType&&Na,Wle=by&&by.exports===OW,sx=Wle&&bW.process,Gp=function(){try{var e=by&&by.require&&by.require("util").types;return e||sx&&sx.binding&&sx.binding("util")}catch{}}(),jj=Gp&&Gp.isTypedArray,Kle=jj?LP(jj):Gle,qle=Object.prototype,Yle=qle.hasOwnProperty;function kW(e,t){var r=o0(e),n=!r&&fle(e),i=!r&&!n&&NW(e),o=!r&&!n&&!i&&Kle(e),a=r||n||i||o,s=a?cle(e.length,String):[],l=s.length;for(var c in e)(t||Yle.call(e,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ble(c,l)))&&s.push(c);return s}var Xle=Object.prototype;function MP(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Xle;return e===r}var Jle=_W(Object.keys,Object),Qle=Object.prototype,Zle=Qle.hasOwnProperty;function ece(e){if(!MP(e))return Jle(e);var t=[];for(var r in Object(e))Zle.call(e,r)&&r!="constructor"&&t.push(r);return t}function PW(e){return e!=null&&AW(e.length)&&!TW(e)}function jP(e){return PW(e)?kW(e):ece(e)}function tce(e,t){return e&&BS(t,jP(t),e)}function rce(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var nce=Object.prototype,ice=nce.hasOwnProperty;function oce(e){if(!i0(e))return rce(e);var t=MP(e),r=[];for(var n in e)n=="constructor"&&(t||!ice.call(e,n))||r.push(n);return r}function UP(e){return PW(e)?kW(e,!0):oce(e)}function ace(e,t){return e&&BS(t,UP(t),e)}var DW=typeof Ia=="object"&&Ia&&!Ia.nodeType&&Ia,Uj=DW&&typeof Na=="object"&&Na&&!Na.nodeType&&Na,sce=Uj&&Uj.exports===DW,Fj=sce?Bl.Buffer:void 0,Vj=Fj?Fj.allocUnsafe:void 0;function lce(e,t){if(t)return e.slice();var r=e.length,n=Vj?Vj(r):new e.constructor(r);return e.copy(n),n}function LW(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function cce(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}function MW(){return[]}var uce=Object.prototype,dce=uce.propertyIsEnumerable,Bj=Object.getOwnPropertySymbols,FP=Bj?function(e){return e==null?[]:(e=Object(e),cce(Bj(e),function(t){return dce.call(e,t)}))}:MW;function hce(e,t){return BS(e,FP(e),t)}function jW(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var fce=Object.getOwnPropertySymbols,UW=fce?function(e){for(var t=[];e;)jW(t,FP(e)),e=DP(e);return t}:MW;function pce(e,t){return BS(e,UW(e),t)}function FW(e,t,r){var n=t(e);return o0(e)?n:jW(n,r(e))}function mce(e){return FW(e,jP,FP)}function gce(e){return FW(e,UP,UW)}var SA=Vh(Bl,"DataView"),TA=Vh(Bl,"Promise"),CA=Vh(Bl,"Set"),xA=Vh(Bl,"WeakMap"),$j="[object Map]",yce="[object Object]",Hj="[object Promise]",zj="[object Set]",Gj="[object WeakMap]",Wj="[object DataView]",vce=Fh(SA),bce=Fh(dv),Ece=Fh(TA),_ce=Fh(CA),wce=Fh(xA),dc=jh;(SA&&dc(new SA(new ArrayBuffer(1)))!=Wj||dv&&dc(new dv)!=$j||TA&&dc(TA.resolve())!=Hj||CA&&dc(new CA)!=zj||xA&&dc(new xA)!=Gj)&&(dc=function(e){var t=jh(e),r=t==yce?e.constructor:void 0,n=r?Fh(r):"";if(n)switch(n){case vce:return Wj;case bce:return $j;case Ece:return Hj;case _ce:return zj;case wce:return Gj}return t});var Sce=Object.prototype,Tce=Sce.hasOwnProperty;function Cce(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Tce.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Kj=Bl.Uint8Array;function VP(e){var t=new e.constructor(e.byteLength);return new Kj(t).set(new Kj(e)),t}function xce(e,t){var r=t?VP(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Rce=/\w*$/;function Ice(e){var t=new e.constructor(e.source,Rce.exec(e));return t.lastIndex=e.lastIndex,t}var qj=Yu?Yu.prototype:void 0,Yj=qj?qj.valueOf:void 0;function Nce(e){return Yj?Object(Yj.call(e)):{}}function Ace(e,t){var r=t?VP(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Oce="[object Boolean]",kce="[object Date]",Pce="[object Map]",Dce="[object Number]",Lce="[object RegExp]",Mce="[object Set]",jce="[object String]",Uce="[object Symbol]",Fce="[object ArrayBuffer]",Vce="[object DataView]",Bce="[object Float32Array]",$ce="[object Float64Array]",Hce="[object Int8Array]",zce="[object Int16Array]",Gce="[object Int32Array]",Wce="[object Uint8Array]",Kce="[object Uint8ClampedArray]",qce="[object Uint16Array]",Yce="[object Uint32Array]";function Xce(e,t,r){var n=e.constructor;switch(t){case Fce:return VP(e);case Oce:case kce:return new n(+e);case Vce:return xce(e,r);case Bce:case $ce:case Hce:case zce:case Gce:case Wce:case Kce:case qce:case Yce:return Ace(e,r);case Pce:return new n;case Dce:case jce:return new n(e);case Lce:return Ice(e);case Mce:return new n;case Uce:return Nce(e)}}var Xj=Object.create,Jce=function(){function e(){}return function(t){if(!i0(t))return{};if(Xj)return Xj(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Qce(e){return typeof e.constructor=="function"&&!MP(e)?Jce(DP(e)):{}}var Zce="[object Map]";function eue(e){return Uh(e)&&dc(e)==Zce}var Jj=Gp&&Gp.isMap,tue=Jj?LP(Jj):eue,rue="[object Set]";function nue(e){return Uh(e)&&dc(e)==rue}var Qj=Gp&&Gp.isSet,iue=Qj?LP(Qj):nue,oue=1,aue=2,sue=4,VW="[object Arguments]",lue="[object Array]",cue="[object Boolean]",uue="[object Date]",due="[object Error]",BW="[object Function]",hue="[object GeneratorFunction]",fue="[object Map]",pue="[object Number]",$W="[object Object]",mue="[object RegExp]",gue="[object Set]",yue="[object String]",vue="[object Symbol]",bue="[object WeakMap]",Eue="[object ArrayBuffer]",_ue="[object DataView]",wue="[object Float32Array]",Sue="[object Float64Array]",Tue="[object Int8Array]",Cue="[object Int16Array]",xue="[object Int32Array]",Rue="[object Uint8Array]",Iue="[object Uint8ClampedArray]",Nue="[object Uint16Array]",Aue="[object Uint32Array]",on={};on[VW]=on[lue]=on[Eue]=on[_ue]=on[cue]=on[uue]=on[wue]=on[Sue]=on[Tue]=on[Cue]=on[xue]=on[fue]=on[pue]=on[$W]=on[mue]=on[gue]=on[yue]=on[vue]=on[Rue]=on[Iue]=on[Nue]=on[Aue]=!0;on[due]=on[BW]=on[bue]=!1;function Ey(e,t,r,n,i,o){var a,s=t&oue,l=t&aue,c=t&sue;if(a!==void 0)return a;if(!i0(e))return e;var u=o0(e);if(u){if(a=Cce(e),!s)return LW(e,a)}else{var h=dc(e),f=h==BW||h==hue;if(NW(e))return lce(e,s);if(h==$W||h==VW||f&&!i){if(a=l||f?{}:Qce(e),!s)return l?pce(e,ace(a,e)):hce(e,tce(a,e))}else{if(!on[h])return i?e:{};a=Xce(e,h,s)}}o||(o=new wm);var p=o.get(e);if(p)return p;o.set(e,a),iue(e)?e.forEach(function(y){a.add(Ey(y,t,r,y,e,o))}):tue(e)&&e.forEach(function(y,v){a.set(v,Ey(y,t,r,v,e,o))});var m=c?l?gce:mce:l?UP:jP,g=u?void 0:m(e);return ale(g||e,function(y,v){g&&(v=y,y=e[v]),xW(a,v,Ey(y,t,r,v,e,o))}),a}var Oue=1,kue=4;function bb(e){return Ey(e,Oue|kue)}var Zj=Array.isArray,eU=Object.keys,Pue=Object.prototype.hasOwnProperty,Due=typeof Element<"u";function RA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Zj(e),n=Zj(t),i,o,a;if(r&&n){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!RA(e[i],t[i]))return!1;return!0}if(r!=n)return!1;var s=e instanceof Date,l=t instanceof Date;if(s!=l)return!1;if(s&&l)return e.getTime()==t.getTime();var c=e instanceof RegExp,u=t instanceof RegExp;if(c!=u)return!1;if(c&&u)return e.toString()==t.toString();var h=eU(e);if(o=h.length,o!==eU(t).length)return!1;for(i=o;i--!==0;)if(!Pue.call(t,h[i]))return!1;if(Due&&e instanceof Element&&t instanceof Element)return e===t;for(i=o;i--!==0;)if(a=h[i],!(a==="_owner"&&e.$$typeof)&&!RA(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}var Lue=function(t,r){try{return RA(t,r)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||n.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}};const Nd=oa(Lue);var Mue=4;function tU(e){return Ey(e,Mue)}function HW(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var jue="[object Symbol]";function BP(e){return typeof e=="symbol"||Uh(e)&&jh(e)==jue}var Uue="Expected a function";function $P(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Uue);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new($P.Cache||od),r}$P.Cache=od;var Fue=500;function Vue(e){var t=$P(e,function(n){return r.size===Fue&&r.clear(),n}),r=t.cache;return t}var Bue=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$ue=/\\(\\)?/g,Hue=Vue(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Bue,function(r,n,i,o){t.push(i?o.replace($ue,"$1"):n||r)}),t}),zue=1/0;function Gue(e){if(typeof e=="string"||BP(e))return e;var t=e+"";return t=="0"&&1/e==-zue?"-0":t}var Wue=1/0,rU=Yu?Yu.prototype:void 0,nU=rU?rU.toString:void 0;function zW(e){if(typeof e=="string")return e;if(o0(e))return HW(e,zW)+"";if(BP(e))return nU?nU.call(e):"";var t=e+"";return t=="0"&&1/e==-Wue?"-0":t}function Kue(e){return e==null?"":zW(e)}function GW(e){return o0(e)?HW(e,Gue):BP(e)?[e]:LW(Hue(Kue(e)))}var WW={exports:{}},Gr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zi=typeof Symbol=="function"&&Symbol.for,HP=zi?Symbol.for("react.element"):60103,zP=zi?Symbol.for("react.portal"):60106,$S=zi?Symbol.for("react.fragment"):60107,HS=zi?Symbol.for("react.strict_mode"):60108,zS=zi?Symbol.for("react.profiler"):60114,GS=zi?Symbol.for("react.provider"):60109,WS=zi?Symbol.for("react.context"):60110,GP=zi?Symbol.for("react.async_mode"):60111,KS=zi?Symbol.for("react.concurrent_mode"):60111,qS=zi?Symbol.for("react.forward_ref"):60112,YS=zi?Symbol.for("react.suspense"):60113,que=zi?Symbol.for("react.suspense_list"):60120,XS=zi?Symbol.for("react.memo"):60115,JS=zi?Symbol.for("react.lazy"):60116,Yue=zi?Symbol.for("react.block"):60121,Xue=zi?Symbol.for("react.fundamental"):60117,Jue=zi?Symbol.for("react.responder"):60118,Que=zi?Symbol.for("react.scope"):60119;function Fa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case HP:switch(e=e.type,e){case GP:case KS:case $S:case zS:case HS:case YS:return e;default:switch(e=e&&e.$$typeof,e){case WS:case qS:case JS:case XS:case GS:return e;default:return t}}case zP:return t}}}function KW(e){return Fa(e)===KS}Gr.AsyncMode=GP;Gr.ConcurrentMode=KS;Gr.ContextConsumer=WS;Gr.ContextProvider=GS;Gr.Element=HP;Gr.ForwardRef=qS;Gr.Fragment=$S;Gr.Lazy=JS;Gr.Memo=XS;Gr.Portal=zP;Gr.Profiler=zS;Gr.StrictMode=HS;Gr.Suspense=YS;Gr.isAsyncMode=function(e){return KW(e)||Fa(e)===GP};Gr.isConcurrentMode=KW;Gr.isContextConsumer=function(e){return Fa(e)===WS};Gr.isContextProvider=function(e){return Fa(e)===GS};Gr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===HP};Gr.isForwardRef=function(e){return Fa(e)===qS};Gr.isFragment=function(e){return Fa(e)===$S};Gr.isLazy=function(e){return Fa(e)===JS};Gr.isMemo=function(e){return Fa(e)===XS};Gr.isPortal=function(e){return Fa(e)===zP};Gr.isProfiler=function(e){return Fa(e)===zS};Gr.isStrictMode=function(e){return Fa(e)===HS};Gr.isSuspense=function(e){return Fa(e)===YS};Gr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===$S||e===KS||e===zS||e===HS||e===YS||e===que||typeof e=="object"&&e!==null&&(e.$$typeof===JS||e.$$typeof===XS||e.$$typeof===GS||e.$$typeof===WS||e.$$typeof===qS||e.$$typeof===Xue||e.$$typeof===Jue||e.$$typeof===Que||e.$$typeof===Yue)};Gr.typeOf=Fa;WW.exports=Gr;var WP=WW.exports,qW=WP,Zue={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ede={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},YW={};YW[qW.ForwardRef]=Zue;YW[qW.Memo]=ede;function Di(){return Di=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Di.apply(this,arguments)}function XW(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var QS=T.createContext(void 0);QS.displayName="FormikContext";QS.Provider;QS.Consumer;function tde(){var e=T.useContext(QS);return e}var Ls=function(t){return typeof t=="function"},ZS=function(t){return t!==null&&typeof t=="object"},rde=function(t){return String(Math.floor(Number(t)))===t},lx=function(t){return Object.prototype.toString.call(t)==="[object String]"},cx=function(t){return ZS(t)&&Ls(t.then)};function ga(e,t,r,n){n===void 0&&(n=0);for(var i=GW(t);e&&n<i.length;)e=e[i[n++]];return n!==i.length&&!e||e===void 0?r:e}function ih(e,t,r){for(var n=tU(e),i=n,o=0,a=GW(t);o<a.length-1;o++){var s=a[o],l=ga(e,a.slice(0,o+1));if(l&&(ZS(l)||Array.isArray(l)))i=i[s]=tU(l);else{var c=a[o+1];i=i[s]=rde(c)&&Number(c)>=0?[]:{}}}return(o===0?e:i)[a[o]]===r?e:(r===void 0?delete i[a[o]]:i[a[o]]=r,o===0&&r===void 0&&delete n[a[o]],n)}function JW(e,t,r,n){r===void 0&&(r=new WeakMap),n===void 0&&(n={});for(var i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=e[a];ZS(s)?r.get(s)||(r.set(s,!0),n[a]=Array.isArray(s)?[]:{},JW(s,t,r,n[a])):n[a]=t}return n}function nde(e,t){switch(t.type){case"SET_VALUES":return Di({},e,{values:t.payload});case"SET_TOUCHED":return Di({},e,{touched:t.payload});case"SET_ERRORS":return Nd(e.errors,t.payload)?e:Di({},e,{errors:t.payload});case"SET_STATUS":return Di({},e,{status:t.payload});case"SET_ISSUBMITTING":return Di({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Di({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return Di({},e,{values:ih(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Di({},e,{touched:ih(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Di({},e,{errors:ih(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Di({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return Di({},e,{touched:JW(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return Di({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return Di({},e,{isSubmitting:!1});default:return e}}var bd={},Eb={};function Wr(e){var t=e.validateOnChange,r=t===void 0?!0:t,n=e.validateOnBlur,i=n===void 0?!0:n,o=e.validateOnMount,a=o===void 0?!1:o,s=e.isInitialValid,l=e.enableReinitialize,c=l===void 0?!1:l,u=e.onSubmit,h=XW(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),f=Di({validateOnChange:r,validateOnBlur:i,validateOnMount:a,onSubmit:u},h),p=T.useRef(f.initialValues),m=T.useRef(f.initialErrors||bd),g=T.useRef(f.initialTouched||Eb),y=T.useRef(f.initialStatus),v=T.useRef(!1),b=T.useRef({});T.useEffect(function(){return v.current=!0,function(){v.current=!1}},[]);var _=T.useState(0),S=_[1],I=T.useRef({values:bb(f.initialValues),errors:bb(f.initialErrors)||bd,touched:bb(f.initialTouched)||Eb,status:bb(f.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),A=I.current,D=T.useCallback(function(re){var Ae=I.current;I.current=nde(Ae,re),Ae!==I.current&&S(function(Fe){return Fe+1})},[]),M=T.useCallback(function(re,Ae){return new Promise(function(Fe,We){var ne=f.validate(re,Ae);ne==null?Fe(bd):cx(ne)?ne.then(function(ye){Fe(ye||bd)},function(ye){We(ye)}):Fe(ne)})},[f.validate]),H=T.useCallback(function(re,Ae){var Fe=f.validationSchema,We=Ls(Fe)?Fe(Ae):Fe,ne=Ae&&We.validateAt?We.validateAt(Ae,re):ode(re,We);return new Promise(function(ye,Je){ne.then(function(){ye(bd)},function(ut){ut.name==="ValidationError"?ye(ide(ut)):Je(ut)})})},[f.validationSchema]),V=T.useCallback(function(re,Ae){return new Promise(function(Fe){return Fe(b.current[re].validate(Ae))})},[]),G=T.useCallback(function(re){var Ae=Object.keys(b.current).filter(function(We){return Ls(b.current[We].validate)}),Fe=Ae.length>0?Ae.map(function(We){return V(We,ga(re,We))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(Fe).then(function(We){return We.reduce(function(ne,ye,Je){return ye==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||ye&&(ne=ih(ne,Ae[Je],ye)),ne},{})})},[V]),Y=T.useCallback(function(re){return Promise.all([G(re),f.validationSchema?H(re):{},f.validate?M(re):{}]).then(function(Ae){var Fe=Ae[0],We=Ae[1],ne=Ae[2],ye=wA.all([Fe,We,ne],{arrayMerge:ade});return ye})},[f.validate,f.validationSchema,G,M,H]),Z=Ka(function(re){return re===void 0&&(re=A.values),D({type:"SET_ISVALIDATING",payload:!0}),Y(re).then(function(Ae){return v.current&&(D({type:"SET_ISVALIDATING",payload:!1}),D({type:"SET_ERRORS",payload:Ae})),Ae})});T.useEffect(function(){a&&v.current===!0&&Nd(p.current,f.initialValues)&&Z(p.current)},[a,Z]);var $=T.useCallback(function(re){var Ae=re&&re.values?re.values:p.current,Fe=re&&re.errors?re.errors:m.current?m.current:f.initialErrors||{},We=re&&re.touched?re.touched:g.current?g.current:f.initialTouched||{},ne=re&&re.status?re.status:y.current?y.current:f.initialStatus;p.current=Ae,m.current=Fe,g.current=We,y.current=ne;var ye=function(){D({type:"RESET_FORM",payload:{isSubmitting:!!re&&!!re.isSubmitting,errors:Fe,touched:We,status:ne,values:Ae,isValidating:!!re&&!!re.isValidating,submitCount:re&&re.submitCount&&typeof re.submitCount=="number"?re.submitCount:0}})};if(f.onReset){var Je=f.onReset(A.values,ot);cx(Je)?Je.then(ye):ye()}else ye()},[f.initialErrors,f.initialStatus,f.initialTouched,f.onReset]);T.useEffect(function(){v.current===!0&&!Nd(p.current,f.initialValues)&&c&&(p.current=f.initialValues,$(),a&&Z(p.current))},[c,f.initialValues,$,a,Z]),T.useEffect(function(){c&&v.current===!0&&!Nd(m.current,f.initialErrors)&&(m.current=f.initialErrors||bd,D({type:"SET_ERRORS",payload:f.initialErrors||bd}))},[c,f.initialErrors]),T.useEffect(function(){c&&v.current===!0&&!Nd(g.current,f.initialTouched)&&(g.current=f.initialTouched||Eb,D({type:"SET_TOUCHED",payload:f.initialTouched||Eb}))},[c,f.initialTouched]),T.useEffect(function(){c&&v.current===!0&&!Nd(y.current,f.initialStatus)&&(y.current=f.initialStatus,D({type:"SET_STATUS",payload:f.initialStatus}))},[c,f.initialStatus,f.initialTouched]);var F=Ka(function(re){if(b.current[re]&&Ls(b.current[re].validate)){var Ae=ga(A.values,re),Fe=b.current[re].validate(Ae);return cx(Fe)?(D({type:"SET_ISVALIDATING",payload:!0}),Fe.then(function(We){return We}).then(function(We){D({type:"SET_FIELD_ERROR",payload:{field:re,value:We}}),D({type:"SET_ISVALIDATING",payload:!1})})):(D({type:"SET_FIELD_ERROR",payload:{field:re,value:Fe}}),Promise.resolve(Fe))}else if(f.validationSchema)return D({type:"SET_ISVALIDATING",payload:!0}),H(A.values,re).then(function(We){return We}).then(function(We){D({type:"SET_FIELD_ERROR",payload:{field:re,value:ga(We,re)}}),D({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),K=T.useCallback(function(re,Ae){var Fe=Ae.validate;b.current[re]={validate:Fe}},[]),k=T.useCallback(function(re){delete b.current[re]},[]),P=Ka(function(re,Ae){D({type:"SET_TOUCHED",payload:re});var Fe=Ae===void 0?i:Ae;return Fe?Z(A.values):Promise.resolve()}),B=T.useCallback(function(re){D({type:"SET_ERRORS",payload:re})},[]),x=Ka(function(re,Ae){var Fe=Ls(re)?re(A.values):re;D({type:"SET_VALUES",payload:Fe});var We=Ae===void 0?r:Ae;return We?Z(Fe):Promise.resolve()}),E=T.useCallback(function(re,Ae){D({type:"SET_FIELD_ERROR",payload:{field:re,value:Ae}})},[]),N=Ka(function(re,Ae,Fe){D({type:"SET_FIELD_VALUE",payload:{field:re,value:Ae}});var We=Fe===void 0?r:Fe;return We?Z(ih(A.values,re,Ae)):Promise.resolve()}),C=T.useCallback(function(re,Ae){var Fe=Ae,We=re,ne;if(!lx(re)){re.persist&&re.persist();var ye=re.target?re.target:re.currentTarget,Je=ye.type,ut=ye.name,qt=ye.id,Vn=ye.value,Cn=ye.checked,yi=ye.outerHTML,xn=ye.options,Oi=ye.multiple;Fe=Ae||ut||qt,We=/number|range/.test(Je)?(ne=parseFloat(Vn),isNaN(ne)?"":ne):/checkbox/.test(Je)?lde(ga(A.values,Fe),Cn,Vn):xn&&Oi?sde(xn):Vn}Fe&&N(Fe,We)},[N,A.values]),W=Ka(function(re){if(lx(re))return function(Ae){return C(Ae,re)};C(re)}),U=Ka(function(re,Ae,Fe){Ae===void 0&&(Ae=!0),D({type:"SET_FIELD_TOUCHED",payload:{field:re,value:Ae}});var We=Fe===void 0?i:Fe;return We?Z(A.values):Promise.resolve()}),X=T.useCallback(function(re,Ae){re.persist&&re.persist();var Fe=re.target,We=Fe.name,ne=Fe.id,ye=Fe.outerHTML,Je=Ae||We||ne;U(Je,!0)},[U]),ae=Ka(function(re){if(lx(re))return function(Ae){return X(Ae,re)};X(re)}),he=T.useCallback(function(re){Ls(re)?D({type:"SET_FORMIK_STATE",payload:re}):D({type:"SET_FORMIK_STATE",payload:function(){return re}})},[]),pe=T.useCallback(function(re){D({type:"SET_STATUS",payload:re})},[]),Pe=T.useCallback(function(re){D({type:"SET_ISSUBMITTING",payload:re})},[]),$e=Ka(function(){return D({type:"SUBMIT_ATTEMPT"}),Z().then(function(re){var Ae=re instanceof Error,Fe=!Ae&&Object.keys(re).length===0;if(Fe){var We;try{if(We=Nt(),We===void 0)return}catch(ne){throw ne}return Promise.resolve(We).then(function(ne){return v.current&&D({type:"SUBMIT_SUCCESS"}),ne}).catch(function(ne){if(v.current)throw D({type:"SUBMIT_FAILURE"}),ne})}else if(v.current&&(D({type:"SUBMIT_FAILURE"}),Ae))throw re})}),je=Ka(function(re){re&&re.preventDefault&&Ls(re.preventDefault)&&re.preventDefault(),re&&re.stopPropagation&&Ls(re.stopPropagation)&&re.stopPropagation(),$e().catch(function(Ae){console.warn("Warning: An unhandled error was caught from submitForm()",Ae)})}),ot={resetForm:$,validateForm:Z,validateField:F,setErrors:B,setFieldError:E,setFieldTouched:U,setFieldValue:N,setStatus:pe,setSubmitting:Pe,setTouched:P,setValues:x,setFormikState:he,submitForm:$e},Nt=Ka(function(){return u(A.values,ot)}),et=Ka(function(re){re&&re.preventDefault&&Ls(re.preventDefault)&&re.preventDefault(),re&&re.stopPropagation&&Ls(re.stopPropagation)&&re.stopPropagation(),$()}),bt=T.useCallback(function(re){return{value:ga(A.values,re),error:ga(A.errors,re),touched:!!ga(A.touched,re),initialValue:ga(p.current,re),initialTouched:!!ga(g.current,re),initialError:ga(m.current,re)}},[A.errors,A.touched,A.values]),Ie=T.useCallback(function(re){return{setValue:function(Fe,We){return N(re,Fe,We)},setTouched:function(Fe,We){return U(re,Fe,We)},setError:function(Fe){return E(re,Fe)}}},[N,U,E]),rt=T.useCallback(function(re){var Ae=ZS(re),Fe=Ae?re.name:re,We=ga(A.values,Fe),ne={name:Fe,value:We,onChange:W,onBlur:ae};if(Ae){var ye=re.type,Je=re.value,ut=re.as,qt=re.multiple;ye==="checkbox"?Je===void 0?ne.checked=!!We:(ne.checked=!!(Array.isArray(We)&&~We.indexOf(Je)),ne.value=Je):ye==="radio"?(ne.checked=We===Je,ne.value=Je):ut==="select"&&qt&&(ne.value=ne.value||[],ne.multiple=!0)}return ne},[ae,W,A.values]),He=T.useMemo(function(){return!Nd(p.current,A.values)},[p.current,A.values]),Ze=T.useMemo(function(){return typeof s<"u"?He?A.errors&&Object.keys(A.errors).length===0:s!==!1&&Ls(s)?s(f):s:A.errors&&Object.keys(A.errors).length===0},[s,He,A.errors,f]),qe=Di({},A,{initialValues:p.current,initialErrors:m.current,initialTouched:g.current,initialStatus:y.current,handleBlur:ae,handleChange:W,handleReset:et,handleSubmit:je,resetForm:$,setErrors:B,setFormikState:he,setFieldTouched:U,setFieldValue:N,setFieldError:E,setStatus:pe,setSubmitting:Pe,setTouched:P,setValues:x,submitForm:$e,validateForm:Z,validateField:F,isValid:Ze,dirty:He,unregisterField:k,registerField:K,getFieldProps:rt,getFieldMeta:bt,getFieldHelpers:Ie,validateOnBlur:i,validateOnChange:r,validateOnMount:a});return qe}function ide(e){var t={};if(e.inner){if(e.inner.length===0)return ih(t,e.path,e.message);for(var i=e.inner,r=Array.isArray(i),n=0,i=r?i:i[Symbol.iterator]();;){var o;if(r){if(n>=i.length)break;o=i[n++]}else{if(n=i.next(),n.done)break;o=n.value}var a=o;ga(t,a.path)||(t=ih(t,a.path,a.message))}}return t}function ode(e,t,r,n){r===void 0&&(r=!1);var i=IA(e);return t[r?"validateSync":"validate"](i,{abortEarly:!1,context:i})}function IA(e){var t=Array.isArray(e)?[]:{};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=String(r);Array.isArray(e[n])===!0?t[n]=e[n].map(function(i){return Array.isArray(i)===!0||Oj(i)?IA(i):i!==""?i:void 0}):Oj(e[n])?t[n]=IA(e[n]):t[n]=e[n]!==""?e[n]:void 0}return t}function ade(e,t,r){var n=e.slice();return t.forEach(function(o,a){if(typeof n[a]>"u"){var s=r.clone!==!1,l=s&&r.isMergeableObject(o);n[a]=l?wA(Array.isArray(o)?[]:{},o,r):o}else r.isMergeableObject(o)?n[a]=wA(e[a],o,r):e.indexOf(o)===-1&&n.push(o)}),n}function sde(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function lde(e,t,r){if(typeof e=="boolean")return!!t;var n=[],i=!1,o=-1;if(Array.isArray(e))n=e,o=e.indexOf(r),i=o>=0;else if(!r||r=="true"||r=="false")return!!t;return t&&r&&!i?n.concat(r):i?n.slice(0,o).concat(n.slice(o+1)):n}var cde=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?T.useLayoutEffect:T.useEffect;function Ka(e){var t=T.useRef(e);return cde(function(){t.current=e}),T.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current.apply(void 0,n)},[])}var ude=T.forwardRef(function(e,t){var r=e.action,n=XW(e,["action"]),i=r??"#",o=tde(),a=o.handleReset,s=o.handleSubmit;return T.createElement("form",Di({onSubmit:s,ref:t,onReset:a,action:i},n))});ude.displayName="Form";function Bh(e){this._maxSize=e,this.clear()}Bh.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Bh.prototype.get=function(e){return this._values[e]};Bh.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var dde=/[^.^\]^[]+|(?=\[\]|\.\.)/g,QW=/^\d+$/,hde=/^\d/,fde=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,pde=/^\s*(['"]?)(.*?)(\1)\s*$/,KP=512,iU=new Bh(KP),oU=new Bh(KP),aU=new Bh(KP),oh={Cache:Bh,split:NA,normalizePath:ux,setter:function(e){var t=ux(e);return oU.get(e)||oU.set(e,function(n,i){for(var o=0,a=t.length,s=n;o<a-1;){var l=t[o];if(l==="__proto__"||l==="constructor"||l==="prototype")return n;s=s[t[o++]]}s[t[o]]=i})},getter:function(e,t){var r=ux(e);return aU.get(e)||aU.set(e,function(i){for(var o=0,a=r.length;o<a;)if(i!=null||!t)i=i[r[o++]];else return;return i})},join:function(e){return e.reduce(function(t,r){return t+(qP(r)||QW.test(r)?"["+r+"]":(t?".":"")+r)},"")},forEach:function(e,t,r){mde(Array.isArray(e)?e:NA(e),t,r)}};function ux(e){return iU.get(e)||iU.set(e,NA(e).map(function(t){return t.replace(pde,"$2")}))}function NA(e){return e.match(dde)||[""]}function mde(e,t,r){var n=e.length,i,o,a,s;for(o=0;o<n;o++)i=e[o],i&&(vde(i)&&(i='"'+i+'"'),s=qP(i),a=!s&&/^\d+$/.test(i),t.call(r,i,s,a,o,e))}function qP(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function gde(e){return e.match(hde)&&!e.match(QW)}function yde(e){return fde.test(e)}function vde(e){return!qP(e)&&(gde(e)||yde(e))}const bde=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,eT=e=>e.match(bde)||[],tT=e=>e[0].toUpperCase()+e.slice(1),YP=(e,t)=>eT(e).join(t).toLowerCase(),ZW=e=>eT(e).reduce((t,r)=>`${t}${t?r[0].toUpperCase()+r.slice(1).toLowerCase():r.toLowerCase()}`,""),Ede=e=>tT(ZW(e)),_de=e=>YP(e,"_"),wde=e=>YP(e,"-"),Sde=e=>tT(YP(e," ")),Tde=e=>eT(e).map(tT).join(" ");var dx={words:eT,upperFirst:tT,camelCase:ZW,pascalCase:Ede,snakeCase:_de,kebabCase:wde,sentenceCase:Sde,titleCase:Tde},XP={exports:{}};XP.exports=function(e){return e9(Cde(e),e)};XP.exports.array=e9;function e9(e,t){var r=e.length,n=new Array(r),i={},o=r,a=xde(t),s=Rde(e);for(t.forEach(function(c){if(!s.has(c[0])||!s.has(c[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});o--;)i[o]||l(e[o],o,new Set);return n;function l(c,u,h){if(h.has(c)){var f;try{f=", node was:"+JSON.stringify(c)}catch{f=""}throw new Error("Cyclic dependency"+f)}if(!s.has(c))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(c));if(!i[u]){i[u]=!0;var p=a.get(c)||new Set;if(p=Array.from(p),u=p.length){h.add(c);do{var m=p[--u];l(m,s.get(m),h)}while(u);h.delete(c)}n[--r]=c}}}function Cde(e){for(var t=new Set,r=0,n=e.length;r<n;r++){var i=e[r];t.add(i[0]),t.add(i[1])}return Array.from(t)}function xde(e){for(var t=new Map,r=0,n=e.length;r<n;r++){var i=e[r];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}function Rde(e){for(var t=new Map,r=0,n=e.length;r<n;r++)t.set(e[r],r);return t}var Ide=XP.exports;const Nde=oa(Ide),Ade=Object.prototype.toString,Ode=Error.prototype.toString,kde=RegExp.prototype.toString,Pde=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Dde=/^Symbol\((.*)\)(.*)$/;function Lde(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function sU(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const r=typeof e;if(r==="number")return Lde(e);if(r==="string")return t?`"${e}"`:e;if(r==="function")return"[Function "+(e.name||"anonymous")+"]";if(r==="symbol")return Pde.call(e).replace(Dde,"Symbol($1)");const n=Ade.call(e).slice(8,-1);return n==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):n==="Error"||e instanceof Error?"["+Ode.call(e)+"]":n==="RegExp"?kde.call(e):null}function _c(e,t){let r=sU(e,t);return r!==null?r:JSON.stringify(e,function(n,i){let o=sU(this[n],t);return o!==null?o:i},2)}function t9(e){return e==null?[]:[].concat(e)}let r9,n9,i9,Mde=/\$\{\s*(\w+)\s*\}/g;r9=Symbol.toStringTag;class lU{constructor(t,r,n,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[r9]="Error",this.name="ValidationError",this.value=r,this.path=n,this.type=i,this.errors=[],this.inner=[],t9(t).forEach(o=>{if(Ho.isError(o)){this.errors.push(...o.errors);const a=o.inner.length?o.inner:[o];this.inner.push(...a)}else this.errors.push(o)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}n9=Symbol.hasInstance;i9=Symbol.toStringTag;class Ho extends Error{static formatError(t,r){const n=r.label||r.path||"this";return r=Object.assign({},r,{path:n,originalPath:r.path}),typeof t=="string"?t.replace(Mde,(i,o)=>_c(r[o])):typeof t=="function"?t(r):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,r,n,i,o){const a=new lU(t,r,n,i);if(o)return a;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[i9]="Error",this.name=a.name,this.message=a.message,this.type=a.type,this.value=a.value,this.path=a.path,this.errors=a.errors,this.inner=a.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Ho)}static[n9](t){return lU[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let El={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:n})=>{const i=n!=null&&n!==r?` (cast from the value \`${_c(n,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${_c(r,!0)}\``+i:`${e} must match the configured type. The validated value was: \`${_c(r,!0)}\``+i}},jo={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},jde={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},AA={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},OA={isValue:"${path} field must be ${value}"},GE={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},WE={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},Ude={notType:e=>{const{path:t,value:r,spec:n}=e,i=n.types.length;if(Array.isArray(r)){if(r.length<i)return`${t} tuple value has too few items, expected a length of ${i} but got ${r.length} for value: \`${_c(r,!0)}\``;if(r.length>i)return`${t} tuple value has too many items, expected a length of ${i} but got ${r.length} for value: \`${_c(r,!0)}\``}return Ho.formatError(El.notType,e)}};Object.assign(Object.create(null),{mixed:El,string:jo,number:jde,date:AA,object:GE,array:WE,boolean:OA,tuple:Ude});const rT=e=>e&&e.__isYupSchema__;class iw{static fromOptions(t,r){if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:i,otherwise:o}=r,a=typeof n=="function"?n:(...s)=>s.every(l=>l===n);return new iw(t,(s,l)=>{var c;let u=a(...s)?i:o;return(c=u==null?void 0:u(l))!=null?c:l})}constructor(t,r){this.fn=void 0,this.refs=t,this.refs=t,this.fn=r}resolve(t,r){let n=this.refs.map(o=>o.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),i=this.fn(n,t,r);if(i===void 0||i===t)return t;if(!rT(i))throw new TypeError("conditions must return a schema object");return i.resolve(r)}}const _b={context:"$",value:"."};function o9(e,t){return new ad(e,t)}class ad{constructor(t,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===_b.context,this.isValue=this.key[0]===_b.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?_b.context:this.isValue?_b.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&oh.getter(this.path,!0),this.map=r.map}getValue(t,r,n){let i=this.isContext?n:this.isValue?t:r;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(t,r){return this.getValue(t,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}ad.prototype.__isYupRef=!0;const vc=e=>e==null;function ff(e){function t({value:r,path:n="",options:i,originalValue:o,schema:a},s,l){const{name:c,test:u,params:h,message:f,skipAbsent:p}=e;let{parent:m,context:g,abortEarly:y=a.spec.abortEarly,disableStackTrace:v=a.spec.disableStackTrace}=i;function b(G){return ad.isRef(G)?G.getValue(r,m,g):G}function _(G={}){const Y=Object.assign({value:r,originalValue:o,label:a.spec.label,path:G.path||n,spec:a.spec,disableStackTrace:G.disableStackTrace||v},h,G.params);for(const $ of Object.keys(Y))Y[$]=b(Y[$]);const Z=new Ho(Ho.formatError(G.message||f,Y),r,Y.path,G.type||c,Y.disableStackTrace);return Z.params=Y,Z}const S=y?s:l;let I={path:n,parent:m,type:c,from:i.from,createError:_,resolve:b,options:i,originalValue:o,schema:a};const A=G=>{Ho.isError(G)?S(G):G?l(null):S(_())},D=G=>{Ho.isError(G)?S(G):s(G)};if(p&&vc(r))return A(!0);let H;try{var V;if(H=u.call(I,r,I),typeof((V=H)==null?void 0:V.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${I.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(H).then(A,D)}}catch(G){D(G);return}A(H)}return t.OPTIONS=e,t}function Fde(e,t,r,n=r){let i,o,a;return t?(oh.forEach(t,(s,l,c)=>{let u=l?s.slice(1,s.length-1):s;e=e.resolve({context:n,parent:i,value:r});let h=e.type==="tuple",f=c?parseInt(u,10):0;if(e.innerType||h){if(h&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${a}" must contain an index to the tuple element, e.g. "${a}[0]"`);if(r&&f>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${s}, in the path: ${t}. because there is no value at that index. `);i=r,r=r&&r[f],e=h?e.spec.types[f]:e.innerType}if(!c){if(!e.fields||!e.fields[u])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${a} which is a type: "${e.type}")`);i=r,r=r&&r[u],e=e.fields[u]}o=u,a=l?"["+s+"]":"."+s}),{schema:e,parent:i,parentPath:o}):{parent:i,parentPath:t,schema:e}}class ow extends Set{describe(){const t=[];for(const r of this.values())t.push(ad.isRef(r)?r.describe():r);return t}resolveAll(t){let r=[];for(const n of this.values())r.push(t(n));return r}clone(){return new ow(this.values())}merge(t,r){const n=this.clone();return t.forEach(i=>n.add(i)),r.forEach(i=>n.delete(i)),n}}function Qf(e,t=new Map){if(rT(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let r;if(e instanceof Date)r=new Date(e.getTime()),t.set(e,r);else if(e instanceof RegExp)r=new RegExp(e),t.set(e,r);else if(Array.isArray(e)){r=new Array(e.length),t.set(e,r);for(let n=0;n<e.length;n++)r[n]=Qf(e[n],t)}else if(e instanceof Map){r=new Map,t.set(e,r);for(const[n,i]of e.entries())r.set(n,Qf(i,t))}else if(e instanceof Set){r=new Set,t.set(e,r);for(const n of e)r.add(Qf(n,t))}else if(e instanceof Object){r={},t.set(e,r);for(const[n,i]of Object.entries(e))r[n]=Qf(i,t)}else throw Error(`Unable to clone ${e}`);return r}let Pa=class{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new ow,this._blacklist=new ow,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(El.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(r=>{r.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeCheck=this._typeCheck,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.internalTests=Object.assign({},this.internalTests),r.exclusiveTests=Object.assign({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=Qf(Object.assign({},this.spec,t)),r}label(t){let r=this.clone();return r.spec.label=t,r}meta(...t){if(t.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},t[0]),r}withMutation(t){let r=this._mutate;this._mutate=!0;let n=t(this);return this._mutate=r,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let r=this,n=t.clone();const i=Object.assign({},r.spec,n.spec);return n.spec=i,n.internalTests=Object.assign({},r.internalTests,n.internalTests),n._whitelist=r._whitelist.merge(t._whitelist,t._blacklist),n._blacklist=r._blacklist.merge(t._blacklist,t._whitelist),n.tests=r.tests,n.exclusiveTests=r.exclusiveTests,n.withMutation(o=>{t.tests.forEach(a=>{o.test(a.OPTIONS)})}),n.transforms=[...r.transforms,...n.transforms],n}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let r=this;if(r.conditions.length){let n=r.conditions;r=r.clone(),r.conditions=[],r=n.reduce((i,o)=>o.resolve(i,t),r),r=r.resolve(t)}return r}resolveOptions(t){var r,n,i,o;return Object.assign({},t,{from:t.from||[],strict:(r=t.strict)!=null?r:this.spec.strict,abortEarly:(n=t.abortEarly)!=null?n:this.spec.abortEarly,recursive:(i=t.recursive)!=null?i:this.spec.recursive,disableStackTrace:(o=t.disableStackTrace)!=null?o:this.spec.disableStackTrace})}cast(t,r={}){let n=this.resolve(Object.assign({value:t},r)),i=r.assert==="ignore-optionality",o=n._cast(t,r);if(r.assert!==!1&&!n.isType(o)){if(i&&vc(o))return o;let a=_c(t),s=_c(o);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". 

attempted value: ${a} 
`+(s!==a?`result of cast: ${s}`:""))}return o}_cast(t,r){let n=t===void 0?t:this.transforms.reduce((i,o)=>o.call(this,i,t,this),t);return n===void 0&&(n=this.getDefault(r)),n}_validate(t,r={},n,i){let{path:o,originalValue:a=t,strict:s=this.spec.strict}=r,l=t;s||(l=this._cast(l,Object.assign({assert:!1},r)));let c=[];for(let u of Object.values(this.internalTests))u&&c.push(u);this.runTests({path:o,value:l,originalValue:a,options:r,tests:c},n,u=>{if(u.length)return i(u,l);this.runTests({path:o,value:l,originalValue:a,options:r,tests:this.tests},n,i)})}runTests(t,r,n){let i=!1,{tests:o,value:a,originalValue:s,path:l,options:c}=t,u=g=>{i||(i=!0,r(g,a))},h=g=>{i||(i=!0,n(g,a))},f=o.length,p=[];if(!f)return h([]);let m={value:a,originalValue:s,path:l,options:c,schema:this};for(let g=0;g<o.length;g++){const y=o[g];y(m,u,function(b){b&&(Array.isArray(b)?p.push(...b):p.push(b)),--f<=0&&h(p)})}}asNestedTest({key:t,index:r,parent:n,parentPath:i,originalParent:o,options:a}){const s=t??r;if(s==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof s=="number";let c=n[s];const u=Object.assign({},a,{strict:!0,parent:n,value:c,originalValue:o[s],key:void 0,[l?"index":"key"]:s,path:l||s.includes(".")?`${i||""}[${l?s:`"${s}"`}]`:(i?`${i}.`:"")+t});return(h,f,p)=>this.resolve(u)._validate(c,u,f,p)}validate(t,r){var n;let i=this.resolve(Object.assign({},r,{value:t})),o=(n=r==null?void 0:r.disableStackTrace)!=null?n:i.spec.disableStackTrace;return new Promise((a,s)=>i._validate(t,r,(l,c)=>{Ho.isError(l)&&(l.value=c),s(l)},(l,c)=>{l.length?s(new Ho(l,c,void 0,void 0,o)):a(c)}))}validateSync(t,r){var n;let i=this.resolve(Object.assign({},r,{value:t})),o,a=(n=r==null?void 0:r.disableStackTrace)!=null?n:i.spec.disableStackTrace;return i._validate(t,Object.assign({},r,{sync:!0}),(s,l)=>{throw Ho.isError(s)&&(s.value=l),s},(s,l)=>{if(s.length)throw new Ho(s,t,void 0,void 0,a);o=l}),o}isValid(t,r){return this.validate(t,r).then(()=>!0,n=>{if(Ho.isError(n))return!1;throw n})}isValidSync(t,r){try{return this.validateSync(t,r),!0}catch(n){if(Ho.isError(n))return!1;throw n}}_getDefault(t){let r=this.spec.default;return r==null?r:typeof r=="function"?r.call(this,t):Qf(r)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,r){const n=this.clone({nullable:t});return n.internalTests.nullable=ff({message:r,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),n}optionality(t,r){const n=this.clone({optional:t});return n.internalTests.optionality=ff({message:r,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),n}optional(){return this.optionality(!0)}defined(t=El.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=El.notNull){return this.nullability(!1,t)}required(t=El.required){return this.clone().withMutation(r=>r.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let r=this.clone();return r.transforms.push(t),r}test(...t){let r;if(t.length===1?typeof t[0]=="function"?r={test:t[0]}:r=t[0]:t.length===2?r={name:t[0],test:t[1]}:r={name:t[0],message:t[1],test:t[2]},r.message===void 0&&(r.message=El.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),i=ff(r),o=r.exclusive||r.name&&n.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(n.exclusiveTests[r.name]=!!r.exclusive),n.tests=n.tests.filter(a=>!(a.OPTIONS.name===r.name&&(o||a.OPTIONS.test===i.OPTIONS.test))),n.tests.push(i),n}when(t,r){!Array.isArray(t)&&typeof t!="string"&&(r=t,t=".");let n=this.clone(),i=t9(t).map(o=>new ad(o));return i.forEach(o=>{o.isSibling&&n.deps.push(o.key)}),n.conditions.push(typeof r=="function"?new iw(i,r):iw.fromOptions(i,r)),n}typeError(t){let r=this.clone();return r.internalTests.typeError=ff({message:t,name:"typeError",skipAbsent:!0,test(n){return this.schema._typeCheck(n)?!0:this.createError({params:{type:this.schema.type}})}}),r}oneOf(t,r=El.oneOf){let n=this.clone();return t.forEach(i=>{n._whitelist.add(i),n._blacklist.delete(i)}),n.internalTests.whiteList=ff({message:r,name:"oneOf",skipAbsent:!0,test(i){let o=this.schema._whitelist,a=o.resolveAll(this.resolve);return a.includes(i)?!0:this.createError({params:{values:Array.from(o).join(", "),resolved:a}})}}),n}notOneOf(t,r=El.notOneOf){let n=this.clone();return t.forEach(i=>{n._blacklist.add(i),n._whitelist.delete(i)}),n.internalTests.blacklist=ff({message:r,name:"notOneOf",test(i){let o=this.schema._blacklist,a=o.resolveAll(this.resolve);return a.includes(i)?this.createError({params:{values:Array.from(o).join(", "),resolved:a}}):!0}}),n}strip(t=!0){let r=this.clone();return r.spec.strip=t,r}describe(t){const r=(t?this.resolve(t):this).clone(),{label:n,meta:i,optional:o,nullable:a}=r.spec;return{meta:i,label:n,optional:o,nullable:a,default:r.getDefault(t),type:r.type,oneOf:r._whitelist.describe(),notOneOf:r._blacklist.describe(),tests:r.tests.map(l=>({name:l.OPTIONS.name,params:l.OPTIONS.params})).filter((l,c,u)=>u.findIndex(h=>h.name===l.name)===c)}}};Pa.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])Pa.prototype[`${e}At`]=function(t,r,n={}){const{parent:i,parentPath:o,schema:a}=Fde(this,t,r,n.context);return a[e](i&&i[o],Object.assign({},n,{parent:i,path:t}))};for(const e of["equals","is"])Pa.prototype[e]=Pa.prototype.oneOf;for(const e of["not","nope"])Pa.prototype[e]=Pa.prototype.notOneOf;const Vde=()=>!0;function a9(e){return new s9(e)}class s9 extends Pa{constructor(t){super(typeof t=="function"?{type:"mixed",check:t}:Object.assign({type:"mixed",check:Vde},t))}}a9.prototype=s9.prototype;function kA(){return new l9}class l9 extends Pa{constructor(){super({type:"boolean",check(t){return t instanceof Boolean&&(t=t.valueOf()),typeof t=="boolean"}}),this.withMutation(()=>{this.transform((t,r,n)=>{if(n.spec.coerce&&!n.isType(t)){if(/^(true|1)$/i.test(String(t)))return!0;if(/^(false|0)$/i.test(String(t)))return!1}return t})})}isTrue(t=OA.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"true"},test(r){return vc(r)||r===!0}})}isFalse(t=OA.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"false"},test(r){return vc(r)||r===!1}})}default(t){return super.default(t)}defined(t){return super.defined(t)}optional(){return super.optional()}required(t){return super.required(t)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(t){return super.nonNullable(t)}strip(t){return super.strip(t)}}kA.prototype=l9.prototype;const Bde=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function $de(e){const t=PA(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let r=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(r=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(r=0-r)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+r,t.second,t.millisecond)}function PA(e){var t,r;const n=Bde.exec(e);return n?{year:Ql(n[1]),month:Ql(n[2],1)-1,day:Ql(n[3],1),hour:Ql(n[4]),minute:Ql(n[5]),second:Ql(n[6]),millisecond:n[7]?Ql(n[7].substring(0,3)):0,precision:(t=(r=n[7])==null?void 0:r.length)!=null?t:void 0,z:n[8]||void 0,plusMinus:n[9]||void 0,hourOffset:Ql(n[10]),minuteOffset:Ql(n[11])}:null}function Ql(e,t=0){return Number(e)||t}let Hde=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,zde=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Gde=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Wde="^\\d{4}-\\d{2}-\\d{2}",Kde="\\d{2}:\\d{2}:\\d{2}",qde="(([+-]\\d{2}(:?\\d{2})?)|Z)",Yde=new RegExp(`${Wde}T${Kde}(\\.\\d+)?${qde}$`),Xde=e=>vc(e)||e===e.trim(),Jde={}.toString();function jt(){return new c9}class c9 extends Pa{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,r,n)=>{if(!n.spec.coerce||n.isType(t)||Array.isArray(t))return t;const i=t!=null&&t.toString?t.toString():t;return i===Jde?t:i})})}required(t){return super.required(t).withMutation(r=>r.test({message:t||El.required,name:"required",skipAbsent:!0,test:n=>!!n.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(r=>r.OPTIONS.name!=="required"),t))}length(t,r=jo.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(n){return n.length===this.resolve(t)}})}min(t,r=jo.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(n){return n.length>=this.resolve(t)}})}max(t,r=jo.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:t},skipAbsent:!0,test(n){return n.length<=this.resolve(t)}})}matches(t,r){let n=!1,i,o;return r&&(typeof r=="object"?{excludeEmptyString:n=!1,message:i,name:o}=r:i=r),this.test({name:o||"matches",message:i||jo.matches,params:{regex:t},skipAbsent:!0,test:a=>a===""&&n||a.search(t)!==-1})}email(t=jo.email){return this.matches(Hde,{name:"email",message:t,excludeEmptyString:!0})}url(t=jo.url){return this.matches(zde,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=jo.uuid){return this.matches(Gde,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let r="",n,i;return t&&(typeof t=="object"?{message:r="",allowOffset:n=!1,precision:i=void 0}=t:r=t),this.matches(Yde,{name:"datetime",message:r||jo.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||jo.datetime_offset,params:{allowOffset:n},skipAbsent:!0,test:o=>{if(!o||n)return!0;const a=PA(o);return a?!!a.z:!1}}).test({name:"datetime_precision",message:r||jo.datetime_precision,params:{precision:i},skipAbsent:!0,test:o=>{if(!o||i==null)return!0;const a=PA(o);return a?a.precision===i:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=jo.trim){return this.transform(r=>r!=null?r.trim():r).test({message:t,name:"trim",test:Xde})}lowercase(t=jo.lowercase){return this.transform(r=>vc(r)?r:r.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>vc(r)||r===r.toLowerCase()})}uppercase(t=jo.uppercase){return this.transform(r=>vc(r)?r:r.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>vc(r)||r===r.toUpperCase()})}}jt.prototype=c9.prototype;let Qde=new Date(""),Zde=e=>Object.prototype.toString.call(e)==="[object Date]";class nT extends Pa{constructor(){super({type:"date",check(t){return Zde(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,r,n)=>!n.spec.coerce||n.isType(t)||t===null?t:(t=$de(t),isNaN(t)?nT.INVALID_DATE:new Date(t)))})}prepareParam(t,r){let n;if(ad.isRef(t))n=t;else{let i=this.cast(t);if(!this._typeCheck(i))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);n=i}return n}min(t,r=AA.min){let n=this.prepareParam(t,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(i){return i>=this.resolve(n)}})}max(t,r=AA.max){let n=this.prepareParam(t,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(i){return i<=this.resolve(n)}})}}nT.INVALID_DATE=Qde;nT.prototype;function ehe(e,t=[]){let r=[],n=new Set,i=new Set(t.map(([a,s])=>`${a}-${s}`));function o(a,s){let l=oh.split(a)[0];n.add(l),i.has(`${s}-${l}`)||r.push([s,l])}for(const a of Object.keys(e)){let s=e[a];n.add(a),ad.isRef(s)&&s.isSibling?o(s.path,a):rT(s)&&"deps"in s&&s.deps.forEach(l=>o(l,a))}return Nde.array(Array.from(n),r).reverse()}function cU(e,t){let r=1/0;return e.some((n,i)=>{var o;if((o=t.path)!=null&&o.includes(n))return r=i,!0}),r}function u9(e){return(t,r)=>cU(e,t)-cU(e,r)}const d9=(e,t,r)=>{if(typeof e!="string")return e;let n=e;try{n=JSON.parse(e)}catch{}return r.isType(n)?n:e};function KE(e){if("fields"in e){const t={};for(const[r,n]of Object.entries(e.fields))t[r]=KE(n);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=KE(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(KE)}):"optional"in e?e.optional():e}const the=(e,t)=>{const r=[...oh.normalizePath(t)];if(r.length===1)return r[0]in e;let n=r.pop(),i=oh.getter(oh.join(r),!0)(e);return!!(i&&n in i)};let uU=e=>Object.prototype.toString.call(e)==="[object Object]";function dU(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(n=>r.indexOf(n)===-1)}const rhe=u9([]);function Ni(e){return new h9(e)}class h9 extends Pa{constructor(t){super({type:"object",check(r){return uU(r)||typeof r=="function"}}),this.fields=Object.create(null),this._sortErrors=rhe,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,r={}){var n;let i=super._cast(t,r);if(i===void 0)return this.getDefault(r);if(!this._typeCheck(i))return i;let o=this.fields,a=(n=r.stripUnknown)!=null?n:this.spec.noUnknown,s=[].concat(this._nodes,Object.keys(i).filter(h=>!this._nodes.includes(h))),l={},c=Object.assign({},r,{parent:l,__validating:r.__validating||!1}),u=!1;for(const h of s){let f=o[h],p=h in i;if(f){let m,g=i[h];c.path=(r.path?`${r.path}.`:"")+h,f=f.resolve({value:g,context:r.context,parent:l});let y=f instanceof Pa?f.spec:void 0,v=y==null?void 0:y.strict;if(y!=null&&y.strip){u=u||h in i;continue}m=!r.__validating||!v?f.cast(i[h],c):i[h],m!==void 0&&(l[h]=m)}else p&&!a&&(l[h]=i[h]);(p!==h in l||l[h]!==i[h])&&(u=!0)}return u?l:i}_validate(t,r={},n,i){let{from:o=[],originalValue:a=t,recursive:s=this.spec.recursive}=r;r.from=[{schema:this,value:a},...o],r.__validating=!0,r.originalValue=a,super._validate(t,r,n,(l,c)=>{if(!s||!uU(c)){i(l,c);return}a=a||c;let u=[];for(let h of this._nodes){let f=this.fields[h];!f||ad.isRef(f)||u.push(f.asNestedTest({options:r,key:h,parent:c,parentPath:r.path,originalParent:a}))}this.runTests({tests:u,value:c,originalValue:a,options:r},n,h=>{i(h.sort(this._sortErrors).concat(l),c)})})}clone(t){const r=super.clone(t);return r.fields=Object.assign({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(t){let r=super.concat(t),n=r.fields;for(let[i,o]of Object.entries(this.fields)){const a=n[i];n[i]=a===void 0?o:a}return r.withMutation(i=>i.setFields(n,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let r={};return this._nodes.forEach(n=>{var i;const o=this.fields[n];let a=t;(i=a)!=null&&i.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[n]})),r[n]=o&&"getDefault"in o?o.getDefault(a):void 0}),r}setFields(t,r){let n=this.clone();return n.fields=t,n._nodes=ehe(t,r),n._sortErrors=u9(Object.keys(t)),r&&(n._excludedEdges=r),n}shape(t,r=[]){return this.clone().withMutation(n=>{let i=n._excludedEdges;return r.length&&(Array.isArray(r[0])||(r=[r]),i=[...n._excludedEdges,...r]),n.setFields(Object.assign(n.fields,t),i)})}partial(){const t={};for(const[r,n]of Object.entries(this.fields))t[r]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(t)}deepPartial(){return KE(this)}pick(t){const r={};for(const n of t)this.fields[n]&&(r[n]=this.fields[n]);return this.setFields(r,this._excludedEdges.filter(([n,i])=>t.includes(n)&&t.includes(i)))}omit(t){const r=[];for(const n of Object.keys(this.fields))t.includes(n)||r.push(n);return this.pick(r)}from(t,r,n){let i=oh.getter(t,!0);return this.transform(o=>{if(!o)return o;let a=o;return the(o,t)&&(a=Object.assign({},o),n||delete a[t],a[r]=i(o)),a})}json(){return this.transform(d9)}exact(t){return this.test({name:"exact",exclusive:!0,message:t||GE.exact,test(r){if(r==null)return!0;const n=dU(this.schema,r);return n.length===0||this.createError({params:{properties:n.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(t=!0,r=GE.noUnknown){typeof t!="boolean"&&(r=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:r,test(i){if(i==null)return!0;const o=dU(this.schema,i);return!t||o.length===0||this.createError({params:{unknown:o.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,r=GE.noUnknown){return this.noUnknown(!t,r)}transformKeys(t){return this.transform(r=>{if(!r)return r;const n={};for(const i of Object.keys(r))n[t(i)]=r[i];return n})}camelCase(){return this.transformKeys(dx.camelCase)}snakeCase(){return this.transformKeys(dx.snakeCase)}constantCase(){return this.transformKeys(t=>dx.snakeCase(t).toUpperCase())}describe(t){const r=(t?this.resolve(t):this).clone(),n=super.describe(t);n.fields={};for(const[o,a]of Object.entries(r.fields)){var i;let s=t;(i=s)!=null&&i.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[o]})),n.fields[o]=a.describe(s)}return n}}Ni.prototype=h9.prototype;function f9(e){return new p9(e)}class p9 extends Pa{constructor(t){super({type:"array",spec:{types:t},check(r){return Array.isArray(r)}}),this.innerType=void 0,this.innerType=t}_cast(t,r){const n=super._cast(t,r);if(!this._typeCheck(n)||!this.innerType)return n;let i=!1;const o=n.map((a,s)=>{const l=this.innerType.cast(a,Object.assign({},r,{path:`${r.path||""}[${s}]`}));return l!==a&&(i=!0),l});return i?o:n}_validate(t,r={},n,i){var o;let a=this.innerType,s=(o=r.recursive)!=null?o:this.spec.recursive;r.originalValue!=null&&r.originalValue,super._validate(t,r,n,(l,c)=>{var u;if(!s||!a||!this._typeCheck(c)){i(l,c);return}let h=new Array(c.length);for(let p=0;p<c.length;p++){var f;h[p]=a.asNestedTest({options:r,index:p,parent:c,parentPath:r.path,originalParent:(f=r.originalValue)!=null?f:t})}this.runTests({value:c,tests:h,originalValue:(u=r.originalValue)!=null?u:t,options:r},n,p=>i(p.concat(l),c))})}clone(t){const r=super.clone(t);return r.innerType=this.innerType,r}json(){return this.transform(d9)}concat(t){let r=super.concat(t);return r.innerType=this.innerType,t.innerType&&(r.innerType=r.innerType?r.innerType.concat(t.innerType):t.innerType),r}of(t){let r=this.clone();if(!rT(t))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+_c(t));return r.innerType=t,r.spec=Object.assign({},r.spec,{types:t}),r}length(t,r=WE.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(n){return n.length===this.resolve(t)}})}min(t,r){return r=r||WE.min,this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(n){return n.length>=this.resolve(t)}})}max(t,r){return r=r||WE.max,this.test({message:r,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(n){return n.length<=this.resolve(t)}})}ensure(){return this.default(()=>[]).transform((t,r)=>this._typeCheck(t)?t:r==null?[]:[].concat(r))}compact(t){let r=t?(n,i,o)=>!t(n,i,o):n=>!!n;return this.transform(n=>n!=null?n.filter(r):n)}describe(t){const r=(t?this.resolve(t):this).clone(),n=super.describe(t);if(r.innerType){var i;let o=t;(i=o)!=null&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[0]})),n.innerType=r.innerType.describe(o)}return n}}f9.prototype=p9.prototype;const nhe=Ni().shape({username:jt().required("shouldn't be left empty").min(5,"minimum of 5 letters"),password:jt().required("Required").min(2,"shouldn't be less than 8")});function m9(e,t){return function(){return e.apply(t,arguments)}}const{toString:ihe}=Object.prototype,{getPrototypeOf:JP}=Object,iT=(e=>t=>{const r=ihe.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),el=e=>(e=e.toLowerCase(),t=>iT(t)===e),oT=e=>t=>typeof t===e,{isArray:Sm}=Array,fv=oT("undefined");function ohe(e){return e!==null&&!fv(e)&&e.constructor!==null&&!fv(e.constructor)&&Oa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const g9=el("ArrayBuffer");function ahe(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&g9(e.buffer),t}const she=oT("string"),Oa=oT("function"),y9=oT("number"),aT=e=>e!==null&&typeof e=="object",lhe=e=>e===!0||e===!1,qE=e=>{if(iT(e)!=="object")return!1;const t=JP(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},che=el("Date"),uhe=el("File"),dhe=el("Blob"),hhe=el("FileList"),fhe=e=>aT(e)&&Oa(e.pipe),phe=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Oa(e.append)&&((t=iT(e))==="formdata"||t==="object"&&Oa(e.toString)&&e.toString()==="[object FormData]"))},mhe=el("URLSearchParams"),[ghe,yhe,vhe,bhe]=["ReadableStream","Request","Response","Headers"].map(el),Ehe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function a0(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Sm(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let s;for(n=0;n<a;n++)s=o[n],t.call(null,e[s],s,e)}}function v9(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const Wd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,b9=e=>!fv(e)&&e!==Wd;function DA(){const{caseless:e}=b9(this)&&this||{},t={},r=(n,i)=>{const o=e&&v9(t,i)||i;qE(t[o])&&qE(n)?t[o]=DA(t[o],n):qE(n)?t[o]=DA({},n):Sm(n)?t[o]=n.slice():t[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&a0(arguments[n],r);return t}const _he=(e,t,r,{allOwnKeys:n}={})=>(a0(t,(i,o)=>{r&&Oa(i)?e[o]=m9(i,r):e[o]=i},{allOwnKeys:n}),e),whe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),She=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},The=(e,t,r,n)=>{let i,o,a;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],(!n||n(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=r!==!1&&JP(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Che=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},xhe=e=>{if(!e)return null;if(Sm(e))return e;let t=e.length;if(!y9(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Rhe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&JP(Uint8Array)),Ihe=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},Nhe=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Ahe=el("HTMLFormElement"),Ohe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),hU=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),khe=el("RegExp"),E9=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};a0(r,(i,o)=>{let a;(a=t(i,o,e))!==!1&&(n[o]=a||i)}),Object.defineProperties(e,n)},Phe=e=>{E9(e,(t,r)=>{if(Oa(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Oa(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Dhe=(e,t)=>{const r={},n=i=>{i.forEach(o=>{r[o]=!0})};return Sm(e)?n(e):n(String(e).split(t)),r},Lhe=()=>{},Mhe=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,hx="abcdefghijklmnopqrstuvwxyz",fU="0123456789",_9={DIGIT:fU,ALPHA:hx,ALPHA_DIGIT:hx+hx.toUpperCase()+fU},jhe=(e=16,t=_9.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function Uhe(e){return!!(e&&Oa(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Fhe=e=>{const t=new Array(10),r=(n,i)=>{if(aT(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const o=Sm(n)?[]:{};return a0(n,(a,s)=>{const l=r(a,i+1);!fv(l)&&(o[s]=l)}),t[i]=void 0,o}}return n};return r(e,0)},Vhe=el("AsyncFunction"),Bhe=e=>e&&(aT(e)||Oa(e))&&Oa(e.then)&&Oa(e.catch),w9=((e,t)=>e?setImmediate:t?((r,n)=>(Wd.addEventListener("message",({source:i,data:o})=>{i===Wd&&o===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Wd.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Oa(Wd.postMessage)),$he=typeof queueMicrotask<"u"?queueMicrotask.bind(Wd):typeof process<"u"&&process.nextTick||w9,de={isArray:Sm,isArrayBuffer:g9,isBuffer:ohe,isFormData:phe,isArrayBufferView:ahe,isString:she,isNumber:y9,isBoolean:lhe,isObject:aT,isPlainObject:qE,isReadableStream:ghe,isRequest:yhe,isResponse:vhe,isHeaders:bhe,isUndefined:fv,isDate:che,isFile:uhe,isBlob:dhe,isRegExp:khe,isFunction:Oa,isStream:fhe,isURLSearchParams:mhe,isTypedArray:Rhe,isFileList:hhe,forEach:a0,merge:DA,extend:_he,trim:Ehe,stripBOM:whe,inherits:She,toFlatObject:The,kindOf:iT,kindOfTest:el,endsWith:Che,toArray:xhe,forEachEntry:Ihe,matchAll:Nhe,isHTMLForm:Ahe,hasOwnProperty:hU,hasOwnProp:hU,reduceDescriptors:E9,freezeMethods:Phe,toObjectSet:Dhe,toCamelCase:Ohe,noop:Lhe,toFiniteNumber:Mhe,findKey:v9,global:Wd,isContextDefined:b9,ALPHABET:_9,generateString:jhe,isSpecCompliantForm:Uhe,toJSONObject:Fhe,isAsyncFn:Vhe,isThenable:Bhe,setImmediate:w9,asap:$he};function Kt(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}de.inherits(Kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:de.toJSONObject(this.config),code:this.code,status:this.status}}});const S9=Kt.prototype,T9={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{T9[e]={value:e}});Object.defineProperties(Kt,T9);Object.defineProperty(S9,"isAxiosError",{value:!0});Kt.from=(e,t,r,n,i,o)=>{const a=Object.create(S9);return de.toFlatObject(e,a,function(l){return l!==Error.prototype},s=>s!=="isAxiosError"),Kt.call(a,e.message,t,r,n,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const Hhe=null;function LA(e){return de.isPlainObject(e)||de.isArray(e)}function C9(e){return de.endsWith(e,"[]")?e.slice(0,-2):e}function pU(e,t,r){return e?e.concat(t).map(function(i,o){return i=C9(i),!r&&o?"["+i+"]":i}).join(r?".":""):t}function zhe(e){return de.isArray(e)&&!e.some(LA)}const Ghe=de.toFlatObject(de,{},null,function(t){return/^is[A-Z]/.test(t)});function sT(e,t,r){if(!de.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=de.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!de.isUndefined(y[g])});const n=r.metaTokens,i=r.visitor||u,o=r.dots,a=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&de.isSpecCompliantForm(t);if(!de.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(de.isDate(m))return m.toISOString();if(!l&&de.isBlob(m))throw new Kt("Blob is not supported. Use a Buffer instead.");return de.isArrayBuffer(m)||de.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,g,y){let v=m;if(m&&!y&&typeof m=="object"){if(de.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(de.isArray(m)&&zhe(m)||(de.isFileList(m)||de.endsWith(g,"[]"))&&(v=de.toArray(m)))return g=C9(g),v.forEach(function(_,S){!(de.isUndefined(_)||_===null)&&t.append(a===!0?pU([g],S,o):a===null?g:g+"[]",c(_))}),!1}return LA(m)?!0:(t.append(pU(y,g,o),c(m)),!1)}const h=[],f=Object.assign(Ghe,{defaultVisitor:u,convertValue:c,isVisitable:LA});function p(m,g){if(!de.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),de.forEach(m,function(v,b){(!(de.isUndefined(v)||v===null)&&i.call(t,v,de.isString(b)?b.trim():b,g,f))===!0&&p(v,g?g.concat(b):[b])}),h.pop()}}if(!de.isObject(e))throw new TypeError("data must be an object");return p(e),t}function mU(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function QP(e,t){this._pairs=[],e&&sT(e,this,t)}const x9=QP.prototype;x9.append=function(t,r){this._pairs.push([t,r])};x9.toString=function(t){const r=t?function(n){return t.call(this,n,mU)}:mU;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Whe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function R9(e,t,r){if(!t)return e;const n=r&&r.encode||Whe;de.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let o;if(i?o=i(t,r):o=de.isURLSearchParams(t)?t.toString():new QP(t,r).toString(n),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class gU{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){de.forEach(this.handlers,function(n){n!==null&&t(n)})}}const I9={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Khe=typeof URLSearchParams<"u"?URLSearchParams:QP,qhe=typeof FormData<"u"?FormData:null,Yhe=typeof Blob<"u"?Blob:null,Xhe={isBrowser:!0,classes:{URLSearchParams:Khe,FormData:qhe,Blob:Yhe},protocols:["http","https","file","blob","url","data"]},ZP=typeof window<"u"&&typeof document<"u",MA=typeof navigator=="object"&&navigator||void 0,Jhe=ZP&&(!MA||["ReactNative","NativeScript","NS"].indexOf(MA.product)<0),Qhe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Zhe=ZP&&window.location.href||"http://localhost",efe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ZP,hasStandardBrowserEnv:Jhe,hasStandardBrowserWebWorkerEnv:Qhe,navigator:MA,origin:Zhe},Symbol.toStringTag,{value:"Module"})),fo={...efe,...Xhe};function tfe(e,t){return sT(e,new fo.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,o){return fo.isNode&&de.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function rfe(e){return de.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function nfe(e){const t={},r=Object.keys(e);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}function N9(e){function t(r,n,i,o){let a=r[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),l=o>=r.length;return a=!a&&de.isArray(i)?i.length:a,l?(de.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!s):((!i[a]||!de.isObject(i[a]))&&(i[a]=[]),t(r,n,i[a],o)&&de.isArray(i[a])&&(i[a]=nfe(i[a])),!s)}if(de.isFormData(e)&&de.isFunction(e.entries)){const r={};return de.forEachEntry(e,(n,i)=>{t(rfe(n),i,r,0)}),r}return null}function ife(e,t,r){if(de.isString(e))try{return(t||JSON.parse)(e),de.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}const s0={transitional:I9,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,o=de.isObject(t);if(o&&de.isHTMLForm(t)&&(t=new FormData(t)),de.isFormData(t))return i?JSON.stringify(N9(t)):t;if(de.isArrayBuffer(t)||de.isBuffer(t)||de.isStream(t)||de.isFile(t)||de.isBlob(t)||de.isReadableStream(t))return t;if(de.isArrayBufferView(t))return t.buffer;if(de.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return tfe(t,this.formSerializer).toString();if((s=de.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return sT(s?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),ife(t)):t}],transformResponse:[function(t){const r=this.transitional||s0.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(de.isResponse(t)||de.isReadableStream(t))return t;if(t&&de.isString(t)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?Kt.from(s,Kt.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fo.classes.FormData,Blob:fo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};de.forEach(["delete","get","head","post","put","patch"],e=>{s0.headers[e]={}});const ofe=de.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),afe=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||t[r]&&ofe[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},yU=Symbol("internals");function _g(e){return e&&String(e).trim().toLowerCase()}function YE(e){return e===!1||e==null?e:de.isArray(e)?e.map(YE):String(e)}function sfe(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const lfe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function fx(e,t,r,n,i){if(de.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!de.isString(t)){if(de.isString(n))return t.indexOf(n)!==-1;if(de.isRegExp(n))return n.test(t)}}function cfe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function ufe(e,t){const r=de.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,o,a){return this[n].call(this,t,i,o,a)},configurable:!0})})}class Zo{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function o(s,l,c){const u=_g(l);if(!u)throw new Error("header name must be a non-empty string");const h=de.findKey(i,u);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=YE(s))}const a=(s,l)=>de.forEach(s,(c,u)=>o(c,u,l));if(de.isPlainObject(t)||t instanceof this.constructor)a(t,r);else if(de.isString(t)&&(t=t.trim())&&!lfe(t))a(afe(t),r);else if(de.isHeaders(t))for(const[s,l]of t.entries())o(l,s,n);else t!=null&&o(r,t,n);return this}get(t,r){if(t=_g(t),t){const n=de.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return sfe(i);if(de.isFunction(r))return r.call(this,i,n);if(de.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=_g(t),t){const n=de.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||fx(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function o(a){if(a=_g(a),a){const s=de.findKey(n,a);s&&(!r||fx(n,n[s],s,r))&&(delete n[s],i=!0)}}return de.isArray(t)?t.forEach(o):o(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const o=r[n];(!t||fx(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const r=this,n={};return de.forEach(this,(i,o)=>{const a=de.findKey(n,o);if(a){r[a]=YE(i),delete r[o];return}const s=t?cfe(o):String(o).trim();s!==o&&delete r[o],r[s]=YE(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return de.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&de.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[yU]=this[yU]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=_g(a);n[s]||(ufe(i,a),n[s]=!0)}return de.isArray(t)?t.forEach(o):o(t),this}}Zo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);de.reduceDescriptors(Zo.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});de.freezeMethods(Zo);function px(e,t){const r=this||s0,n=t||r,i=Zo.from(n.headers);let o=n.data;return de.forEach(e,function(s){o=s.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function A9(e){return!!(e&&e.__CANCEL__)}function Tm(e,t,r){Kt.call(this,e??"canceled",Kt.ERR_CANCELED,t,r),this.name="CanceledError"}de.inherits(Tm,Kt,{__CANCEL__:!0});function O9(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Kt("Request failed with status code "+r.status,[Kt.ERR_BAD_REQUEST,Kt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function dfe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function hfe(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,o=0,a;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=n[o];a||(a=c),r[i]=l,n[i]=c;let h=o,f=0;for(;h!==i;)f+=r[h++],h=h%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),c-a<t)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function ffe(e,t){let r=0,n=1e3/t,i,o;const a=(c,u=Date.now())=>{r=u,i=null,o&&(clearTimeout(o),o=null),e.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-r;h>=n?a(c,u):(i=c,o||(o=setTimeout(()=>{o=null,a(i)},n-h)))},()=>i&&a(i)]}const aw=(e,t,r=3)=>{let n=0;const i=hfe(50,250);return ffe(o=>{const a=o.loaded,s=o.lengthComputable?o.total:void 0,l=a-n,c=i(l),u=a<=s;n=a;const h={loaded:a,total:s,progress:s?a/s:void 0,bytes:l,rate:c||void 0,estimated:c&&s&&u?(s-a)/c:void 0,event:o,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(h)},r)},vU=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},bU=e=>(...t)=>de.asap(()=>e(...t)),pfe=fo.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,fo.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(fo.origin),fo.navigator&&/(msie|trident)/i.test(fo.navigator.userAgent)):()=>!0,mfe=fo.hasStandardBrowserEnv?{write(e,t,r,n,i,o){const a=[e+"="+encodeURIComponent(t)];de.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),de.isString(n)&&a.push("path="+n),de.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function gfe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function yfe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function k9(e,t){return e&&!gfe(t)?yfe(e,t):t}const EU=e=>e instanceof Zo?{...e}:e;function _h(e,t){t=t||{};const r={};function n(c,u,h,f){return de.isPlainObject(c)&&de.isPlainObject(u)?de.merge.call({caseless:f},c,u):de.isPlainObject(u)?de.merge({},u):de.isArray(u)?u.slice():u}function i(c,u,h,f){if(de.isUndefined(u)){if(!de.isUndefined(c))return n(void 0,c,h,f)}else return n(c,u,h,f)}function o(c,u){if(!de.isUndefined(u))return n(void 0,u)}function a(c,u){if(de.isUndefined(u)){if(!de.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function s(c,u,h){if(h in t)return n(c,u);if(h in e)return n(void 0,c)}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(c,u,h)=>i(EU(c),EU(u),h,!0)};return de.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=l[u]||i,f=h(e[u],t[u],u);de.isUndefined(f)&&h!==s||(r[u]=f)}),r}const P9=e=>{const t=_h({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:s}=t;t.headers=a=Zo.from(a),t.url=R9(k9(t.baseURL,t.url),e.params,e.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let l;if(de.isFormData(r)){if(fo.hasStandardBrowserEnv||fo.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...u].join("; "))}}if(fo.hasStandardBrowserEnv&&(n&&de.isFunction(n)&&(n=n(t)),n||n!==!1&&pfe(t.url))){const c=i&&o&&mfe.read(o);c&&a.set(i,c)}return t},vfe=typeof XMLHttpRequest<"u",bfe=vfe&&function(e){return new Promise(function(r,n){const i=P9(e);let o=i.data;const a=Zo.from(i.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:c}=i,u,h,f,p,m;function g(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function v(){if(!y)return;const _=Zo.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),I={data:!s||s==="text"||s==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:_,config:e,request:y};O9(function(D){r(D),g()},function(D){n(D),g()},I),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(n(new Kt("Request aborted",Kt.ECONNABORTED,e,y)),y=null)},y.onerror=function(){n(new Kt("Network Error",Kt.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const I=i.transitional||I9;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),n(new Kt(S,I.clarifyTimeoutError?Kt.ETIMEDOUT:Kt.ECONNABORTED,e,y)),y=null},o===void 0&&a.setContentType(null),"setRequestHeader"in y&&de.forEach(a.toJSON(),function(S,I){y.setRequestHeader(I,S)}),de.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),s&&s!=="json"&&(y.responseType=i.responseType),c&&([f,m]=aw(c,!0),y.addEventListener("progress",f)),l&&y.upload&&([h,p]=aw(l),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=_=>{y&&(n(!_||_.type?new Tm(null,e,y):_),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const b=dfe(i.url);if(b&&fo.protocols.indexOf(b)===-1){n(new Kt("Unsupported protocol "+b+":",Kt.ERR_BAD_REQUEST,e));return}y.send(o||null)})},Efe=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const o=function(c){if(!i){i=!0,s();const u=c instanceof Error?c:this.reason;n.abort(u instanceof Kt?u:new Tm(u instanceof Error?u.message:u))}};let a=t&&setTimeout(()=>{a=null,o(new Kt(`timeout ${t} of ms exceeded`,Kt.ETIMEDOUT))},t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),e=null)};e.forEach(c=>c.addEventListener("abort",o));const{signal:l}=n;return l.unsubscribe=()=>de.asap(s),l}},_fe=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},wfe=async function*(e,t){for await(const r of Sfe(e))yield*_fe(r,t)},Sfe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},_U=(e,t,r,n)=>{const i=wfe(e,t);let o=0,a,s=l=>{a||(a=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){s(),l.close();return}let h=u.byteLength;if(r){let f=o+=h;r(f)}l.enqueue(new Uint8Array(u))}catch(c){throw s(c),c}},cancel(l){return s(l),i.return()}},{highWaterMark:2})},lT=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",D9=lT&&typeof ReadableStream=="function",Tfe=lT&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),L9=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Cfe=D9&&L9(()=>{let e=!1;const t=new Request(fo.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),wU=64*1024,jA=D9&&L9(()=>de.isReadableStream(new Response("").body)),sw={stream:jA&&(e=>e.body)};lT&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!sw[t]&&(sw[t]=de.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new Kt(`Response type '${t}' is not supported`,Kt.ERR_NOT_SUPPORT,n)})})})(new Response);const xfe=async e=>{if(e==null)return 0;if(de.isBlob(e))return e.size;if(de.isSpecCompliantForm(e))return(await new Request(fo.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(de.isArrayBufferView(e)||de.isArrayBuffer(e))return e.byteLength;if(de.isURLSearchParams(e)&&(e=e+""),de.isString(e))return(await Tfe(e)).byteLength},Rfe=async(e,t)=>{const r=de.toFiniteNumber(e.getContentLength());return r??xfe(t)},Ife=lT&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:f}=P9(e);c=c?(c+"").toLowerCase():"text";let p=Efe([i,o&&o.toAbortSignal()],a),m;const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let y;try{if(l&&Cfe&&r!=="get"&&r!=="head"&&(y=await Rfe(u,n))!==0){let I=new Request(t,{method:"POST",body:n,duplex:"half"}),A;if(de.isFormData(n)&&(A=I.headers.get("content-type"))&&u.setContentType(A),I.body){const[D,M]=vU(y,aw(bU(l)));n=_U(I.body,wU,D,M)}}de.isString(h)||(h=h?"include":"omit");const v="credentials"in Request.prototype;m=new Request(t,{...f,signal:p,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:v?h:void 0});let b=await fetch(m);const _=jA&&(c==="stream"||c==="response");if(jA&&(s||_&&g)){const I={};["status","statusText","headers"].forEach(H=>{I[H]=b[H]});const A=de.toFiniteNumber(b.headers.get("content-length")),[D,M]=s&&vU(A,aw(bU(s),!0))||[];b=new Response(_U(b.body,wU,D,()=>{M&&M(),g&&g()}),I)}c=c||"text";let S=await sw[de.findKey(sw,c)||"text"](b,e);return!_&&g&&g(),await new Promise((I,A)=>{O9(I,A,{data:S,headers:Zo.from(b.headers),status:b.status,statusText:b.statusText,config:e,request:m})})}catch(v){throw g&&g(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new Kt("Network Error",Kt.ERR_NETWORK,e,m),{cause:v.cause||v}):Kt.from(v,v&&v.code,e,m)}}),UA={http:Hhe,xhr:bfe,fetch:Ife};de.forEach(UA,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const SU=e=>`- ${e}`,Nfe=e=>de.isFunction(e)||e===null||e===!1,M9={getAdapter:e=>{e=de.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let o=0;o<t;o++){r=e[o];let a;if(n=r,!Nfe(r)&&(n=UA[(a=String(r)).toLowerCase()],n===void 0))throw new Kt(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+o]=n}if(!n){const o=Object.entries(i).map(([s,l])=>`adapter ${s} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(SU).join(`
`):" "+SU(o[0]):"as no adapter specified";throw new Kt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:UA};function mx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Tm(null,e)}function TU(e){return mx(e),e.headers=Zo.from(e.headers),e.data=px.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),M9.getAdapter(e.adapter||s0.adapter)(e).then(function(n){return mx(e),n.data=px.call(e,e.transformResponse,n),n.headers=Zo.from(n.headers),n},function(n){return A9(n)||(mx(e),n&&n.response&&(n.response.data=px.call(e,e.transformResponse,n.response),n.response.headers=Zo.from(n.response.headers))),Promise.reject(n)})}const j9="1.7.9",cT={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{cT[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const CU={};cT.transitional=function(t,r,n){function i(o,a){return"[Axios v"+j9+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,s)=>{if(t===!1)throw new Kt(i(a," has been removed"+(r?" in "+r:"")),Kt.ERR_DEPRECATED);return r&&!CU[a]&&(CU[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,s):!0}};cT.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Afe(e,t,r){if(typeof e!="object")throw new Kt("options must be an object",Kt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],a=t[o];if(a){const s=e[o],l=s===void 0||a(s,o,e);if(l!==!0)throw new Kt("option "+o+" must be "+l,Kt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Kt("Unknown option "+o,Kt.ERR_BAD_OPTION)}}const XE={assertOptions:Afe,validators:cT},ll=XE.validators;class ah{constructor(t){this.defaults=t,this.interceptors={request:new gU,response:new gU}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=_h(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:o}=r;n!==void 0&&XE.assertOptions(n,{silentJSONParsing:ll.transitional(ll.boolean),forcedJSONParsing:ll.transitional(ll.boolean),clarifyTimeoutError:ll.transitional(ll.boolean)},!1),i!=null&&(de.isFunction(i)?r.paramsSerializer={serialize:i}:XE.assertOptions(i,{encode:ll.function,serialize:ll.function},!0)),XE.assertOptions(r,{baseUrl:ll.spelling("baseURL"),withXsrfToken:ll.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=o&&de.merge(o.common,o[r.method]);o&&de.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),r.headers=Zo.concat(a,o);const s=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,s.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,h=0,f;if(!l){const m=[TU.bind(this),void 0];for(m.unshift.apply(m,s),m.push.apply(m,c),f=m.length,u=Promise.resolve(r);h<f;)u=u.then(m[h++],m[h++]);return u}f=s.length;let p=r;for(h=0;h<f;){const m=s[h++],g=s[h++];try{p=m(p)}catch(y){g.call(this,y);break}}try{u=TU.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(t){t=_h(this.defaults,t);const r=k9(t.baseURL,t.url);return R9(r,t.params,t.paramsSerializer)}}de.forEach(["delete","get","head","options"],function(t){ah.prototype[t]=function(r,n){return this.request(_h(n||{},{method:t,url:r,data:(n||{}).data}))}});de.forEach(["post","put","patch"],function(t){function r(n){return function(o,a,s){return this.request(_h(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}ah.prototype[t]=r(),ah.prototype[t+"Form"]=r(!0)});class eD{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{n.subscribe(s),o=s}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},t(function(o,a,s){n.reason||(n.reason=new Tm(o,a,s),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new eD(function(i){t=i}),cancel:t}}}function Ofe(e){return function(r){return e.apply(null,r)}}function kfe(e){return de.isObject(e)&&e.isAxiosError===!0}const FA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(FA).forEach(([e,t])=>{FA[t]=e});function U9(e){const t=new ah(e),r=m9(ah.prototype.request,t);return de.extend(r,ah.prototype,t,{allOwnKeys:!0}),de.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return U9(_h(e,i))},r}const ve=U9(s0);ve.Axios=ah;ve.CanceledError=Tm;ve.CancelToken=eD;ve.isCancel=A9;ve.VERSION=j9;ve.toFormData=sT;ve.AxiosError=Kt;ve.Cancel=ve.CanceledError;ve.all=function(t){return Promise.all(t)};ve.spread=Ofe;ve.isAxiosError=kfe;ve.mergeConfig=_h;ve.AxiosHeaders=Zo;ve.formToJSON=e=>N9(de.isHTMLForm(e)?new FormData(e):e);ve.getAdapter=M9.getAdapter;ve.HttpStatusCode=FA;ve.default=ve;/*!
* sweetalert2 v11.15.2
* Released under the MIT License.
*/function F9(e,t,r){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function Pfe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xU(e,t){return e.get(F9(e,t))}function Dfe(e,t,r){Pfe(e,t),t.set(e,r)}function Lfe(e,t,r){return e.set(F9(e,t),r),r}const Mfe=100,wt={},jfe=()=>{wt.previousActiveElement instanceof HTMLElement?(wt.previousActiveElement.focus(),wt.previousActiveElement=null):document.body&&document.body.focus()},Ufe=e=>new Promise(t=>{if(!e)return t();const r=window.scrollX,n=window.scrollY;wt.restoreFocusTimeout=setTimeout(()=>{jfe(),t()},Mfe),window.scrollTo(r,n)}),V9="swal2-",Ffe=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],ce=Ffe.reduce((e,t)=>(e[t]=V9+t,e),{}),Vfe=["success","warning","info","question","error"],lw=Vfe.reduce((e,t)=>(e[t]=V9+t,e),{}),B9="SweetAlert2:",tD=e=>e.charAt(0).toUpperCase()+e.slice(1),aa=e=>{console.warn(`${B9} ${typeof e=="object"?e.join(" "):e}`)},$h=e=>{console.error(`${B9} ${e}`)},RU=[],Bfe=e=>{RU.includes(e)||(RU.push(e),aa(e))},$9=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Bfe(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},uT=e=>typeof e=="function"?e():e,rD=e=>e&&typeof e.toPromise=="function",l0=e=>rD(e)?e.toPromise():Promise.resolve(e),nD=e=>e&&Promise.resolve(e)===e,sa=()=>document.body.querySelector(`.${ce.container}`),c0=e=>{const t=sa();return t?t.querySelector(e):null},Va=e=>c0(`.${e}`),Nr=()=>Va(ce.popup),Cm=()=>Va(ce.icon),$fe=()=>Va(ce["icon-content"]),H9=()=>Va(ce.title),iD=()=>Va(ce["html-container"]),z9=()=>Va(ce.image),oD=()=>Va(ce["progress-steps"]),dT=()=>Va(ce["validation-message"]),Ml=()=>c0(`.${ce.actions} .${ce.confirm}`),xm=()=>c0(`.${ce.actions} .${ce.cancel}`),Hh=()=>c0(`.${ce.actions} .${ce.deny}`),Hfe=()=>Va(ce["input-label"]),Rm=()=>c0(`.${ce.loader}`),u0=()=>Va(ce.actions),G9=()=>Va(ce.footer),hT=()=>Va(ce["timer-progress-bar"]),aD=()=>Va(ce.close),zfe=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,sD=()=>{const e=Nr();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),r=Array.from(t).sort((o,a)=>{const s=parseInt(o.getAttribute("tabindex")||"0"),l=parseInt(a.getAttribute("tabindex")||"0");return s>l?1:s<l?-1:0}),n=e.querySelectorAll(zfe),i=Array.from(n).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(r.concat(i))].filter(o=>ea(o))},lD=()=>wc(document.body,ce.shown)&&!wc(document.body,ce["toast-shown"])&&!wc(document.body,ce["no-backdrop"]),fT=()=>{const e=Nr();return e?wc(e,ce.toast):!1},Gfe=()=>{const e=Nr();return e?e.hasAttribute("data-loading"):!1},Ba=(e,t)=>{if(e.textContent="",t){const n=new DOMParser().parseFromString(t,"text/html"),i=n.querySelector("head");i&&Array.from(i.childNodes).forEach(a=>{e.appendChild(a)});const o=n.querySelector("body");o&&Array.from(o.childNodes).forEach(a=>{a instanceof HTMLVideoElement||a instanceof HTMLAudioElement?e.appendChild(a.cloneNode(!0)):e.appendChild(a)})}},wc=(e,t)=>{if(!t)return!1;const r=t.split(/\s+/);for(let n=0;n<r.length;n++)if(!e.classList.contains(r[n]))return!1;return!0},Wfe=(e,t)=>{Array.from(e.classList).forEach(r=>{!Object.values(ce).includes(r)&&!Object.values(lw).includes(r)&&!Object.values(t.showClass||{}).includes(r)&&e.classList.remove(r)})},Da=(e,t,r)=>{if(Wfe(e,t),!t.customClass)return;const n=t.customClass[r];if(n){if(typeof n!="string"&&!n.forEach){aa(`Invalid type of customClass.${r}! Expected string or iterable object, got "${typeof n}"`);return}mr(e,n)}},pT=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${ce.popup} > .${ce[t]}`);case"checkbox":return e.querySelector(`.${ce.popup} > .${ce.checkbox} input`);case"radio":return e.querySelector(`.${ce.popup} > .${ce.radio} input:checked`)||e.querySelector(`.${ce.popup} > .${ce.radio} input:first-child`);case"range":return e.querySelector(`.${ce.popup} > .${ce.range} input`);default:return e.querySelector(`.${ce.popup} > .${ce.input}`)}},W9=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},K9=(e,t,r)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(n=>{Array.isArray(e)?e.forEach(i=>{r?i.classList.add(n):i.classList.remove(n)}):r?e.classList.add(n):e.classList.remove(n)}))},mr=(e,t)=>{K9(e,t,!0)},Es=(e,t)=>{K9(e,t,!1)},_u=(e,t)=>{const r=Array.from(e.children);for(let n=0;n<r.length;n++){const i=r[n];if(i instanceof HTMLElement&&wc(i,t))return i}},sh=(e,t,r)=>{r===`${parseInt(r)}`&&(r=parseInt(r)),r||parseInt(r)===0?e.style.setProperty(t,typeof r=="number"?`${r}px`:r):e.style.removeProperty(t)},Hi=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";e&&(e.style.display=t)},yo=e=>{e&&(e.style.display="none")},cD=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";e&&new MutationObserver(()=>{d0(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},IU=(e,t,r,n)=>{const i=e.querySelector(t);i&&i.style.setProperty(r,n)},d0=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";t?Hi(e,r):yo(e)},ea=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),Kfe=()=>!ea(Ml())&&!ea(Hh())&&!ea(xm()),NU=e=>e.scrollHeight>e.clientHeight,q9=e=>{const t=window.getComputedStyle(e),r=parseFloat(t.getPropertyValue("animation-duration")||"0"),n=parseFloat(t.getPropertyValue("transition-duration")||"0");return r>0||n>0},uD=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=hT();r&&ea(r)&&(t&&(r.style.transition="none",r.style.width="100%"),setTimeout(()=>{r.style.transition=`width ${e/1e3}s linear`,r.style.width="0%"},10))},qfe=()=>{const e=hT();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const r=parseInt(window.getComputedStyle(e).width),n=t/r*100;e.style.width=`${n}%`},Yfe=()=>typeof window>"u"||typeof document>"u",Xfe=`
 <div aria-labelledby="${ce.title}" aria-describedby="${ce["html-container"]}" class="${ce.popup}" tabindex="-1">
   <button type="button" class="${ce.close}"></button>
   <ul class="${ce["progress-steps"]}"></ul>
   <div class="${ce.icon}"></div>
   <img class="${ce.image}" />
   <h2 class="${ce.title}" id="${ce.title}"></h2>
   <div class="${ce["html-container"]}" id="${ce["html-container"]}"></div>
   <input class="${ce.input}" id="${ce.input}" />
   <input type="file" class="${ce.file}" />
   <div class="${ce.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${ce.select}" id="${ce.select}"></select>
   <div class="${ce.radio}"></div>
   <label class="${ce.checkbox}">
     <input type="checkbox" id="${ce.checkbox}" />
     <span class="${ce.label}"></span>
   </label>
   <textarea class="${ce.textarea}" id="${ce.textarea}"></textarea>
   <div class="${ce["validation-message"]}" id="${ce["validation-message"]}"></div>
   <div class="${ce.actions}">
     <div class="${ce.loader}"></div>
     <button type="button" class="${ce.confirm}"></button>
     <button type="button" class="${ce.deny}"></button>
     <button type="button" class="${ce.cancel}"></button>
   </div>
   <div class="${ce.footer}"></div>
   <div class="${ce["timer-progress-bar-container"]}">
     <div class="${ce["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Jfe=()=>{const e=sa();return e?(e.remove(),Es([document.documentElement,document.body],[ce["no-backdrop"],ce["toast-shown"],ce["has-column"]]),!0):!1},Ed=()=>{wt.currentInstance.resetValidationMessage()},Qfe=()=>{const e=Nr(),t=_u(e,ce.input),r=_u(e,ce.file),n=e.querySelector(`.${ce.range} input`),i=e.querySelector(`.${ce.range} output`),o=_u(e,ce.select),a=e.querySelector(`.${ce.checkbox} input`),s=_u(e,ce.textarea);t.oninput=Ed,r.onchange=Ed,o.onchange=Ed,a.onchange=Ed,s.oninput=Ed,n.oninput=()=>{Ed(),i.value=n.value},n.onchange=()=>{Ed(),i.value=n.value}},Zfe=e=>typeof e=="string"?document.querySelector(e):e,epe=e=>{const t=Nr();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},tpe=e=>{window.getComputedStyle(e).direction==="rtl"&&mr(sa(),ce.rtl)},rpe=e=>{const t=Jfe();if(Yfe()){$h("SweetAlert2 requires document to initialize");return}const r=document.createElement("div");r.className=ce.container,t&&mr(r,ce["no-transition"]),Ba(r,Xfe);const n=Zfe(e.target);n.appendChild(r),epe(e),tpe(n),Qfe()},dD=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?npe(e,t):e&&Ba(t,e)},npe=(e,t)=>{e.jquery?ipe(t,e):Ba(t,e.toString())},ipe=(e,t)=>{if(e.textContent="",0 in t)for(let r=0;r in t;r++)e.appendChild(t[r].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},ope=(e,t)=>{const r=u0(),n=Rm();!r||!n||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?yo(r):Hi(r),Da(r,t,"actions"),ape(r,n,t),Ba(n,t.loaderHtml||""),Da(n,t,"loader"))};function ape(e,t,r){const n=Ml(),i=Hh(),o=xm();!n||!i||!o||(gx(n,"confirm",r),gx(i,"deny",r),gx(o,"cancel",r),spe(n,i,o,r),r.reverseButtons&&(r.toast?(e.insertBefore(o,n),e.insertBefore(i,n)):(e.insertBefore(o,t),e.insertBefore(i,t),e.insertBefore(n,t))))}function spe(e,t,r,n){if(!n.buttonsStyling){Es([e,t,r],ce.styled);return}mr([e,t,r],ce.styled),n.confirmButtonColor&&(e.style.backgroundColor=n.confirmButtonColor,mr(e,ce["default-outline"])),n.denyButtonColor&&(t.style.backgroundColor=n.denyButtonColor,mr(t,ce["default-outline"])),n.cancelButtonColor&&(r.style.backgroundColor=n.cancelButtonColor,mr(r,ce["default-outline"]))}function gx(e,t,r){const n=tD(t);d0(e,r[`show${n}Button`],"inline-block"),Ba(e,r[`${t}ButtonText`]||""),e.setAttribute("aria-label",r[`${t}ButtonAriaLabel`]||""),e.className=ce[t],Da(e,r,`${t}Button`)}const lpe=(e,t)=>{const r=aD();r&&(Ba(r,t.closeButtonHtml||""),Da(r,t,"closeButton"),d0(r,t.showCloseButton),r.setAttribute("aria-label",t.closeButtonAriaLabel||""))},cpe=(e,t)=>{const r=sa();r&&(upe(r,t.backdrop),dpe(r,t.position),hpe(r,t.grow),Da(r,t,"container"))};function upe(e,t){typeof t=="string"?e.style.background=t:t||mr([document.documentElement,document.body],ce["no-backdrop"])}function dpe(e,t){t&&(t in ce?mr(e,ce[t]):(aa('The "position" parameter is not valid, defaulting to "center"'),mr(e,ce.center)))}function hpe(e,t){t&&mr(e,ce[`grow-${t}`])}var un={innerParams:new WeakMap,domCache:new WeakMap};const fpe=["input","file","range","select","radio","checkbox","textarea"],ppe=(e,t)=>{const r=Nr();if(!r)return;const n=un.innerParams.get(e),i=!n||t.input!==n.input;fpe.forEach(o=>{const a=_u(r,ce[o]);a&&(ype(o,t.inputAttributes),a.className=ce[o],i&&yo(a))}),t.input&&(i&&mpe(t),vpe(t))},mpe=e=>{if(!e.input)return;if(!ti[e.input]){$h(`Unexpected type of input! Expected ${Object.keys(ti).join(" | ")}, got "${e.input}"`);return}const t=Y9(e.input);if(!t)return;const r=ti[e.input](t,e);Hi(t),e.inputAutoFocus&&setTimeout(()=>{W9(r)})},gpe=e=>{for(let t=0;t<e.attributes.length;t++){const r=e.attributes[t].name;["id","type","value","style"].includes(r)||e.removeAttribute(r)}},ype=(e,t)=>{const r=Nr();if(!r)return;const n=pT(r,e);if(n){gpe(n);for(const i in t)n.setAttribute(i,t[i])}},vpe=e=>{if(!e.input)return;const t=Y9(e.input);t&&Da(t,e,"input")},hD=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},h0=(e,t,r)=>{if(r.inputLabel){const n=document.createElement("label"),i=ce["input-label"];n.setAttribute("for",e.id),n.className=i,typeof r.customClass=="object"&&mr(n,r.customClass.inputLabel),n.innerText=r.inputLabel,t.insertAdjacentElement("beforebegin",n)}},Y9=e=>{const t=Nr();if(t)return _u(t,ce[e]||ce.input)},cw=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:nD(t)||aa(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},ti={};ti.text=ti.email=ti.password=ti.number=ti.tel=ti.url=ti.search=ti.date=ti["datetime-local"]=ti.time=ti.week=ti.month=(e,t)=>(cw(e,t.inputValue),h0(e,e,t),hD(e,t),e.type=t.input,e);ti.file=(e,t)=>(h0(e,e,t),hD(e,t),e);ti.range=(e,t)=>{const r=e.querySelector("input"),n=e.querySelector("output");return cw(r,t.inputValue),r.type=t.input,cw(n,t.inputValue),h0(r,e,t),e};ti.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const r=document.createElement("option");Ba(r,t.inputPlaceholder),r.value="",r.disabled=!0,r.selected=!0,e.appendChild(r)}return h0(e,e,t),e};ti.radio=e=>(e.textContent="",e);ti.checkbox=(e,t)=>{const r=pT(Nr(),"checkbox");r.value="1",r.checked=!!t.inputValue;const n=e.querySelector("span");return Ba(n,t.inputPlaceholder||t.inputLabel),r};ti.textarea=(e,t)=>{cw(e,t.inputValue),hD(e,t),h0(e,e,t);const r=n=>parseInt(window.getComputedStyle(n).marginLeft)+parseInt(window.getComputedStyle(n).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(Nr()).width),i=()=>{if(!document.body.contains(e))return;const o=e.offsetWidth+r(e);o>n?Nr().style.width=`${o}px`:sh(Nr(),"width",t.width)};new MutationObserver(i).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const bpe=(e,t)=>{const r=iD();r&&(cD(r),Da(r,t,"htmlContainer"),t.html?(dD(t.html,r),Hi(r,"block")):t.text?(r.textContent=t.text,Hi(r,"block")):yo(r),ppe(e,t))},Epe=(e,t)=>{const r=G9();r&&(cD(r),d0(r,t.footer,"block"),t.footer&&dD(t.footer,r),Da(r,t,"footer"))},_pe=(e,t)=>{const r=un.innerParams.get(e),n=Cm();if(n){if(r&&t.icon===r.icon){OU(n,t),AU(n,t);return}if(!t.icon&&!t.iconHtml){yo(n);return}if(t.icon&&Object.keys(lw).indexOf(t.icon)===-1){$h(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),yo(n);return}Hi(n),OU(n,t),AU(n,t),mr(n,t.showClass&&t.showClass.icon)}},AU=(e,t)=>{for(const[r,n]of Object.entries(lw))t.icon!==r&&Es(e,n);mr(e,t.icon&&lw[t.icon]),Cpe(e,t),wpe(),Da(e,t,"icon")},wpe=()=>{const e=Nr();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),r=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let n=0;n<r.length;n++)r[n].style.backgroundColor=t},Spe=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Tpe=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,OU=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let r=e.innerHTML,n="";t.iconHtml?n=kU(t.iconHtml):t.icon==="success"?(n=Spe,r=r.replace(/ style=".*?"/g,"")):t.icon==="error"?n=Tpe:t.icon&&(n=kU({question:"?",warning:"!",info:"i"}[t.icon])),r.trim()!==n.trim()&&Ba(e,n)},Cpe=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const r of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])IU(e,r,"background-color",t.iconColor);IU(e,".swal2-success-ring","border-color",t.iconColor)}},kU=e=>`<div class="${ce["icon-content"]}">${e}</div>`,xpe=(e,t)=>{const r=z9();if(r){if(!t.imageUrl){yo(r);return}Hi(r,""),r.setAttribute("src",t.imageUrl),r.setAttribute("alt",t.imageAlt||""),sh(r,"width",t.imageWidth),sh(r,"height",t.imageHeight),r.className=ce.image,Da(r,t,"image")}};let fD=!1,X9=0,J9=0,Q9=0,Z9=0;const Rpe=e=>{e.addEventListener("mousedown",uw),document.body.addEventListener("mousemove",dw),e.addEventListener("mouseup",hw),e.addEventListener("touchstart",uw),document.body.addEventListener("touchmove",dw),e.addEventListener("touchend",hw)},Ipe=e=>{e.removeEventListener("mousedown",uw),document.body.removeEventListener("mousemove",dw),e.removeEventListener("mouseup",hw),e.removeEventListener("touchstart",uw),document.body.removeEventListener("touchmove",dw),e.removeEventListener("touchend",hw)},uw=e=>{const t=Nr();if(e.target===t||Cm().contains(e.target)){fD=!0;const r=eK(e);X9=r.clientX,J9=r.clientY,Q9=parseInt(t.style.insetInlineStart)||0,Z9=parseInt(t.style.insetBlockStart)||0,mr(t,"swal2-dragging")}},dw=e=>{const t=Nr();if(fD){let{clientX:r,clientY:n}=eK(e);t.style.insetInlineStart=`${Q9+(r-X9)}px`,t.style.insetBlockStart=`${Z9+(n-J9)}px`}},hw=()=>{const e=Nr();fD=!1,Es(e,"swal2-dragging")},eK=e=>{let t=0,r=0;return e.type.startsWith("mouse")?(t=e.clientX,r=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,r=e.touches[0].clientY),{clientX:t,clientY:r}},Npe=(e,t)=>{const r=sa(),n=Nr();if(!(!r||!n)){if(t.toast){sh(r,"width",t.width),n.style.width="100%";const i=Rm();i&&n.insertBefore(i,Cm())}else sh(n,"width",t.width);sh(n,"padding",t.padding),t.color&&(n.style.color=t.color),t.background&&(n.style.background=t.background),yo(dT()),Ape(n,t),t.draggable&&!t.toast?(mr(n,ce.draggable),Rpe(n)):(Es(n,ce.draggable),Ipe(n))}},Ape=(e,t)=>{const r=t.showClass||{};e.className=`${ce.popup} ${ea(e)?r.popup:""}`,t.toast?(mr([document.documentElement,document.body],ce["toast-shown"]),mr(e,ce.toast)):mr(e,ce.modal),Da(e,t,"popup"),typeof t.customClass=="string"&&mr(e,t.customClass),t.icon&&mr(e,ce[`icon-${t.icon}`])},Ope=(e,t)=>{const r=oD();if(!r)return;const{progressSteps:n,currentProgressStep:i}=t;if(!n||n.length===0||i===void 0){yo(r);return}Hi(r),r.textContent="",i>=n.length&&aa("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),n.forEach((o,a)=>{const s=kpe(o);if(r.appendChild(s),a===i&&mr(s,ce["active-progress-step"]),a!==n.length-1){const l=Ppe(t);r.appendChild(l)}})},kpe=e=>{const t=document.createElement("li");return mr(t,ce["progress-step"]),Ba(t,e),t},Ppe=e=>{const t=document.createElement("li");return mr(t,ce["progress-step-line"]),e.progressStepsDistance&&sh(t,"width",e.progressStepsDistance),t},Dpe=(e,t)=>{const r=H9();r&&(cD(r),d0(r,t.title||t.titleText,"block"),t.title&&dD(t.title,r),t.titleText&&(r.innerText=t.titleText),Da(r,t,"title"))},tK=(e,t)=>{Npe(e,t),cpe(e,t),Ope(e,t),_pe(e,t),xpe(e,t),Dpe(e,t),lpe(e,t),bpe(e,t),ope(e,t),Epe(e,t);const r=Nr();typeof t.didRender=="function"&&r&&t.didRender(r),wt.eventEmitter.emit("didRender",r)},Lpe=()=>ea(Nr()),rK=()=>{var e;return(e=Ml())===null||e===void 0?void 0:e.click()},Mpe=()=>{var e;return(e=Hh())===null||e===void 0?void 0:e.click()},jpe=()=>{var e;return(e=xm())===null||e===void 0?void 0:e.click()},Im=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),nK=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},Upe=(e,t,r)=>{nK(e),t.toast||(e.keydownHandler=n=>Vpe(t,n,r),e.keydownTarget=t.keydownListenerCapture?window:Nr(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},VA=(e,t)=>{var r;const n=sD();if(n.length){e=e+t,e===n.length?e=0:e===-1&&(e=n.length-1),n[e].focus();return}(r=Nr())===null||r===void 0||r.focus()},iK=["ArrowRight","ArrowDown"],Fpe=["ArrowLeft","ArrowUp"],Vpe=(e,t,r)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?Bpe(t,e):t.key==="Tab"?$pe(t):[...iK,...Fpe].includes(t.key)?Hpe(t.key):t.key==="Escape"&&zpe(t,e,r)))},Bpe=(e,t)=>{if(!uT(t.allowEnterKey))return;const r=pT(Nr(),t.input);if(e.target&&r&&e.target instanceof HTMLElement&&e.target.outerHTML===r.outerHTML){if(["textarea","file"].includes(t.input))return;rK(),e.preventDefault()}},$pe=e=>{const t=e.target,r=sD();let n=-1;for(let i=0;i<r.length;i++)if(t===r[i]){n=i;break}e.shiftKey?VA(n,-1):VA(n,1),e.stopPropagation(),e.preventDefault()},Hpe=e=>{const t=u0(),r=Ml(),n=Hh(),i=xm();if(!t||!r||!n||!i)return;const o=[r,n,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const a=iK.includes(e)?"nextElementSibling":"previousElementSibling";let s=document.activeElement;if(s){for(let l=0;l<t.children.length;l++){if(s=s[a],!s)return;if(s instanceof HTMLButtonElement&&ea(s))break}s instanceof HTMLButtonElement&&s.focus()}},zpe=(e,t,r)=>{uT(t.allowEscapeKey)&&(e.preventDefault(),r(Im.esc))};var Wp={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Gpe=()=>{const e=sa();Array.from(document.body.children).forEach(r=>{r.contains(e)||(r.hasAttribute("aria-hidden")&&r.setAttribute("data-previous-aria-hidden",r.getAttribute("aria-hidden")||""),r.setAttribute("aria-hidden","true"))})},oK=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},aK=typeof window<"u"&&!!window.GestureEvent,Wpe=()=>{if(aK&&!wc(document.body,ce.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,mr(document.body,ce.iosfix),Kpe()}},Kpe=()=>{const e=sa();if(!e)return;let t;e.ontouchstart=r=>{t=qpe(r)},e.ontouchmove=r=>{t&&(r.preventDefault(),r.stopPropagation())}},qpe=e=>{const t=e.target,r=sa(),n=iD();return!r||!n||Ype(e)||Xpe(e)?!1:t===r||!NU(r)&&t instanceof HTMLElement&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(NU(n)&&n.contains(t))},Ype=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",Xpe=e=>e.touches&&e.touches.length>1,Jpe=()=>{if(wc(document.body,ce.iosfix)){const e=parseInt(document.body.style.top,10);Es(document.body,ce.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},Qpe=()=>{const e=document.createElement("div");e.className=ce["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let _p=null;const Zpe=e=>{_p===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(_p=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${_p+Qpe()}px`)},eme=()=>{_p!==null&&(document.body.style.paddingRight=`${_p}px`,_p=null)};function sK(e,t,r,n){fT()?PU(e,n):(Ufe(r).then(()=>PU(e,n)),nK(wt)),aK?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),lD()&&(eme(),Jpe(),oK()),tme()}function tme(){Es([document.documentElement,document.body],[ce.shown,ce["height-auto"],ce["no-backdrop"],ce["toast-shown"]])}function wu(e){e=nme(e);const t=Wp.swalPromiseResolve.get(this),r=rme(this);this.isAwaitingPromise?e.isDismissed||(f0(this),t(e)):r&&t(e)}const rme=e=>{const t=Nr();if(!t)return!1;const r=un.innerParams.get(e);if(!r||wc(t,r.hideClass.popup))return!1;Es(t,r.showClass.popup),mr(t,r.hideClass.popup);const n=sa();return Es(n,r.showClass.backdrop),mr(n,r.hideClass.backdrop),ime(e,t,r),!0};function lK(e){const t=Wp.swalPromiseReject.get(this);f0(this),t&&t(e)}const f0=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,un.innerParams.get(e)||e._destroy())},nme=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),ime=(e,t,r)=>{var n;const i=sa(),o=q9(t);typeof r.willClose=="function"&&r.willClose(t),(n=wt.eventEmitter)===null||n===void 0||n.emit("willClose",t),o?ome(e,t,i,r.returnFocus,r.didClose):sK(e,i,r.returnFocus,r.didClose)},ome=(e,t,r,n,i)=>{wt.swalCloseEventFinishedCallback=sK.bind(null,e,r,n,i);const o=function(a){if(a.target===t){var s;(s=wt.swalCloseEventFinishedCallback)===null||s===void 0||s.call(wt),delete wt.swalCloseEventFinishedCallback,t.removeEventListener("animationend",o),t.removeEventListener("transitionend",o)}};t.addEventListener("animationend",o),t.addEventListener("transitionend",o)},PU=(e,t)=>{setTimeout(()=>{var r;typeof t=="function"&&t.bind(e.params)(),(r=wt.eventEmitter)===null||r===void 0||r.emit("didClose"),e._destroy&&e._destroy()})},Kp=e=>{let t=Nr();if(t||new te,t=Nr(),!t)return;const r=Rm();fT()?yo(Cm()):ame(t,e),Hi(r),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},ame=(e,t)=>{const r=u0(),n=Rm();!r||!n||(!t&&ea(Ml())&&(t=Ml()),Hi(r),t&&(yo(t),n.setAttribute("data-button-to-replace",t.className),r.insertBefore(n,t)),mr([e,r],ce.loading))},sme=(e,t)=>{t.input==="select"||t.input==="radio"?hme(e,t):["text","email","number","tel","textarea"].some(r=>r===t.input)&&(rD(t.inputValue)||nD(t.inputValue))&&(Kp(Ml()),fme(e,t))},lme=(e,t)=>{const r=e.getInput();if(!r)return null;switch(t.input){case"checkbox":return cme(r);case"radio":return ume(r);case"file":return dme(r);default:return t.inputAutoTrim?r.value.trim():r.value}},cme=e=>e.checked?1:0,ume=e=>e.checked?e.value:null,dme=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,hme=(e,t)=>{const r=Nr();if(!r)return;const n=i=>{t.input==="select"?pme(r,fw(i),t):t.input==="radio"&&mme(r,fw(i),t)};rD(t.inputOptions)||nD(t.inputOptions)?(Kp(Ml()),l0(t.inputOptions).then(i=>{e.hideLoading(),n(i)})):typeof t.inputOptions=="object"?n(t.inputOptions):$h(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},fme=(e,t)=>{const r=e.getInput();r&&(yo(r),l0(t.inputValue).then(n=>{r.value=t.input==="number"?`${parseFloat(n)||0}`:`${n}`,Hi(r),r.focus(),e.hideLoading()}).catch(n=>{$h(`Error in inputValue promise: ${n}`),r.value="",Hi(r),r.focus(),e.hideLoading()}))};function pme(e,t,r){const n=_u(e,ce.select);if(!n)return;const i=(o,a,s)=>{const l=document.createElement("option");l.value=s,Ba(l,a),l.selected=cK(s,r.inputValue),o.appendChild(l)};t.forEach(o=>{const a=o[0],s=o[1];if(Array.isArray(s)){const l=document.createElement("optgroup");l.label=a,l.disabled=!1,n.appendChild(l),s.forEach(c=>i(l,c[1],c[0]))}else i(n,s,a)}),n.focus()}function mme(e,t,r){const n=_u(e,ce.radio);if(!n)return;t.forEach(o=>{const a=o[0],s=o[1],l=document.createElement("input"),c=document.createElement("label");l.type="radio",l.name=ce.radio,l.value=a,cK(a,r.inputValue)&&(l.checked=!0);const u=document.createElement("span");Ba(u,s),u.className=ce.label,c.appendChild(l),c.appendChild(u),n.appendChild(c)});const i=n.querySelectorAll("input");i.length&&i[0].focus()}const fw=e=>{const t=[];return e instanceof Map?e.forEach((r,n)=>{let i=r;typeof i=="object"&&(i=fw(i)),t.push([n,i])}):Object.keys(e).forEach(r=>{let n=e[r];typeof n=="object"&&(n=fw(n)),t.push([r,n])}),t},cK=(e,t)=>!!t&&t.toString()===e.toString(),gme=e=>{const t=un.innerParams.get(e);e.disableButtons(),t.input?uK(e,"confirm"):mD(e,!0)},yme=e=>{const t=un.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?uK(e,"deny"):pD(e,!1)},vme=(e,t)=>{e.disableButtons(),t(Im.cancel)},uK=(e,t)=>{const r=un.innerParams.get(e);if(!r.input){$h(`The "input" parameter is needed to be set when using returnInputValueOn${tD(t)}`);return}const n=e.getInput(),i=lme(e,r);r.inputValidator?bme(e,i,t):n&&!n.checkValidity()?(e.enableButtons(),e.showValidationMessage(r.validationMessage||n.validationMessage)):t==="deny"?pD(e,i):mD(e,i)},bme=(e,t,r)=>{const n=un.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>l0(n.inputValidator(t,n.validationMessage))).then(o=>{e.enableButtons(),e.enableInput(),o?e.showValidationMessage(o):r==="deny"?pD(e,t):mD(e,t)})},pD=(e,t)=>{const r=un.innerParams.get(e||void 0);r.showLoaderOnDeny&&Kp(Hh()),r.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>l0(r.preDeny(t,r.validationMessage))).then(i=>{i===!1?(e.hideLoading(),f0(e)):e.close({isDenied:!0,value:typeof i>"u"?t:i})}).catch(i=>dK(e||void 0,i))):e.close({isDenied:!0,value:t})},DU=(e,t)=>{e.close({isConfirmed:!0,value:t})},dK=(e,t)=>{e.rejectPromise(t)},mD=(e,t)=>{const r=un.innerParams.get(e||void 0);r.showLoaderOnConfirm&&Kp(),r.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>l0(r.preConfirm(t,r.validationMessage))).then(i=>{ea(dT())||i===!1?(e.hideLoading(),f0(e)):DU(e,typeof i>"u"?t:i)}).catch(i=>dK(e||void 0,i))):DU(e,t)};function pw(){const e=un.innerParams.get(this);if(!e)return;const t=un.domCache.get(this);yo(t.loader),fT()?e.icon&&Hi(Cm()):Eme(t),Es([t.popup,t.actions],ce.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const Eme=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?Hi(t[0],"inline-block"):Kfe()&&yo(e.actions)};function hK(){const e=un.innerParams.get(this),t=un.domCache.get(this);return t?pT(t.popup,e.input):null}function fK(e,t,r){const n=un.domCache.get(e);t.forEach(i=>{n[i].disabled=r})}function pK(e,t){const r=Nr();if(!(!r||!e))if(e.type==="radio"){const n=r.querySelectorAll(`[name="${ce.radio}"]`);for(let i=0;i<n.length;i++)n[i].disabled=t}else e.disabled=t}function mK(){fK(this,["confirmButton","denyButton","cancelButton"],!1)}function gK(){fK(this,["confirmButton","denyButton","cancelButton"],!0)}function yK(){pK(this.getInput(),!1)}function vK(){pK(this.getInput(),!0)}function bK(e){const t=un.domCache.get(this),r=un.innerParams.get(this);Ba(t.validationMessage,e),t.validationMessage.className=ce["validation-message"],r.customClass&&r.customClass.validationMessage&&mr(t.validationMessage,r.customClass.validationMessage),Hi(t.validationMessage);const n=this.getInput();n&&(n.setAttribute("aria-invalid","true"),n.setAttribute("aria-describedby",ce["validation-message"]),W9(n),mr(n,ce.inputerror))}function EK(){const e=un.domCache.get(this);e.validationMessage&&yo(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Es(t,ce.inputerror))}const wp={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},_me=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],wme={allowEnterKey:void 0},Sme=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],_K=e=>Object.prototype.hasOwnProperty.call(wp,e),wK=e=>_me.indexOf(e)!==-1,SK=e=>wme[e],Tme=e=>{_K(e)||aa(`Unknown parameter "${e}"`)},Cme=e=>{Sme.includes(e)&&aa(`The parameter "${e}" is incompatible with toasts`)},xme=e=>{const t=SK(e);t&&$9(e,t)},Rme=e=>{e.backdrop===!1&&e.allowOutsideClick&&aa('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)Tme(t),e.toast&&Cme(t),xme(t)};function TK(e){const t=Nr(),r=un.innerParams.get(this);if(!t||wc(t,r.hideClass.popup)){aa("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const n=Ime(e),i=Object.assign({},r,n);tK(this,i),un.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const Ime=e=>{const t={};return Object.keys(e).forEach(r=>{wK(r)?t[r]=e[r]:aa(`Invalid parameter to update: ${r}`)}),t};function CK(){const e=un.domCache.get(this),t=un.innerParams.get(this);if(!t){xK(this);return}e.popup&&wt.swalCloseEventFinishedCallback&&(wt.swalCloseEventFinishedCallback(),delete wt.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),wt.eventEmitter.emit("didDestroy"),Nme(this)}const Nme=e=>{xK(e),delete e.params,delete wt.keydownHandler,delete wt.keydownTarget,delete wt.currentInstance},xK=e=>{e.isAwaitingPromise?(yx(un,e),e.isAwaitingPromise=!0):(yx(Wp,e),yx(un,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},yx=(e,t)=>{for(const r in e)e[r].delete(t)};var Ame=Object.freeze({__proto__:null,_destroy:CK,close:wu,closeModal:wu,closePopup:wu,closeToast:wu,disableButtons:gK,disableInput:vK,disableLoading:pw,enableButtons:mK,enableInput:yK,getInput:hK,handleAwaitingPromise:f0,hideLoading:pw,rejectPromise:lK,resetValidationMessage:EK,showValidationMessage:bK,update:TK});const Ome=(e,t,r)=>{e.toast?kme(e,t,r):(Dme(t),Lme(t),Mme(e,t,r))},kme=(e,t,r)=>{t.popup.onclick=()=>{e&&(Pme(e)||e.timer||e.input)||r(Im.close)}},Pme=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let mw=!1;const Dme=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(mw=!0)}}},Lme=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(r){e.popup.onmouseup=()=>{},(r.target===e.popup||r.target instanceof HTMLElement&&e.popup.contains(r.target))&&(mw=!0)}}},Mme=(e,t,r)=>{t.container.onclick=n=>{if(mw){mw=!1;return}n.target===t.container&&uT(e.allowOutsideClick)&&r(Im.backdrop)}},jme=e=>typeof e=="object"&&e.jquery,LU=e=>e instanceof Element||jme(e),Ume=e=>{const t={};return typeof e[0]=="object"&&!LU(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((r,n)=>{const i=e[n];typeof i=="string"||LU(i)?t[r]=i:i!==void 0&&$h(`Unexpected type of ${r}! Expected "string" or "Element", got ${typeof i}`)}),t};function Fme(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new this(...t)}function Vme(e){class t extends this{_main(n,i){return super._main(n,Object.assign({},e,i))}}return t}const Bme=()=>wt.timeout&&wt.timeout.getTimerLeft(),RK=()=>{if(wt.timeout)return qfe(),wt.timeout.stop()},IK=()=>{if(wt.timeout){const e=wt.timeout.start();return uD(e),e}},$me=()=>{const e=wt.timeout;return e&&(e.running?RK():IK())},Hme=e=>{if(wt.timeout){const t=wt.timeout.increase(e);return uD(t,!0),t}},zme=()=>!!(wt.timeout&&wt.timeout.isRunning());let MU=!1;const BA={};function Gme(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";BA[e]=this,MU||(document.body.addEventListener("click",Wme),MU=!0)}const Wme=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const r in BA){const n=t.getAttribute(r);if(n){BA[r].fire({template:n});return}}};class Kme{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,r){const n=this._getHandlersByEventName(t);n.includes(r)||n.push(r)}once(t,r){var n=this;const i=function(){n.removeListener(t,i);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];r.apply(n,a)};this.on(t,i)}emit(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this._getHandlersByEventName(t).forEach(o=>{try{o.apply(this,n)}catch(a){console.error(a)}})}removeListener(t,r){const n=this._getHandlersByEventName(t),i=n.indexOf(r);i>-1&&n.splice(i,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}wt.eventEmitter=new Kme;const qme=(e,t)=>{wt.eventEmitter.on(e,t)},Yme=(e,t)=>{wt.eventEmitter.once(e,t)},Xme=(e,t)=>{if(!e){wt.eventEmitter.reset();return}t?wt.eventEmitter.removeListener(e,t):wt.eventEmitter.removeAllListeners(e)};var Jme=Object.freeze({__proto__:null,argsToParams:Ume,bindClickHandler:Gme,clickCancel:jpe,clickConfirm:rK,clickDeny:Mpe,enableLoading:Kp,fire:Fme,getActions:u0,getCancelButton:xm,getCloseButton:aD,getConfirmButton:Ml,getContainer:sa,getDenyButton:Hh,getFocusableElements:sD,getFooter:G9,getHtmlContainer:iD,getIcon:Cm,getIconContent:$fe,getImage:z9,getInputLabel:Hfe,getLoader:Rm,getPopup:Nr,getProgressSteps:oD,getTimerLeft:Bme,getTimerProgressBar:hT,getTitle:H9,getValidationMessage:dT,increaseTimer:Hme,isDeprecatedParameter:SK,isLoading:Gfe,isTimerRunning:zme,isUpdatableParameter:wK,isValidParameter:_K,isVisible:Lpe,mixin:Vme,off:Xme,on:qme,once:Yme,resumeTimer:IK,showLoading:Kp,stopTimer:RK,toggleTimer:$me});class Qme{constructor(t,r){this.callback=t,this.remaining=r,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const r=this.running;return r&&this.stop(),this.remaining+=t,r&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const NK=["swal-title","swal-html","swal-footer"],Zme=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const r=t.content;return sge(r),Object.assign(ege(r),tge(r),rge(r),nge(r),ige(r),oge(r),age(r,NK))},ege=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(n=>{wh(n,["name","value"]);const i=n.getAttribute("name"),o=n.getAttribute("value");!i||!o||(typeof wp[i]=="boolean"?t[i]=o!=="false":typeof wp[i]=="object"?t[i]=JSON.parse(o):t[i]=o)}),t},tge=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(n=>{const i=n.getAttribute("name"),o=n.getAttribute("value");!i||!o||(t[i]=new Function(`return ${o}`)())}),t},rge=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(n=>{wh(n,["type","color","aria-label"]);const i=n.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(t[`${i}ButtonText`]=n.innerHTML,t[`show${tD(i)}Button`]=!0,n.hasAttribute("color")&&(t[`${i}ButtonColor`]=n.getAttribute("color")),n.hasAttribute("aria-label")&&(t[`${i}ButtonAriaLabel`]=n.getAttribute("aria-label")))}),t},nge=e=>{const t={},r=e.querySelector("swal-image");return r&&(wh(r,["src","width","height","alt"]),r.hasAttribute("src")&&(t.imageUrl=r.getAttribute("src")||void 0),r.hasAttribute("width")&&(t.imageWidth=r.getAttribute("width")||void 0),r.hasAttribute("height")&&(t.imageHeight=r.getAttribute("height")||void 0),r.hasAttribute("alt")&&(t.imageAlt=r.getAttribute("alt")||void 0)),t},ige=e=>{const t={},r=e.querySelector("swal-icon");return r&&(wh(r,["type","color"]),r.hasAttribute("type")&&(t.icon=r.getAttribute("type")),r.hasAttribute("color")&&(t.iconColor=r.getAttribute("color")),t.iconHtml=r.innerHTML),t},oge=e=>{const t={},r=e.querySelector("swal-input");r&&(wh(r,["type","label","placeholder","value"]),t.input=r.getAttribute("type")||"text",r.hasAttribute("label")&&(t.inputLabel=r.getAttribute("label")),r.hasAttribute("placeholder")&&(t.inputPlaceholder=r.getAttribute("placeholder")),r.hasAttribute("value")&&(t.inputValue=r.getAttribute("value")));const n=Array.from(e.querySelectorAll("swal-input-option"));return n.length&&(t.inputOptions={},n.forEach(i=>{wh(i,["value"]);const o=i.getAttribute("value");if(!o)return;const a=i.innerHTML;t.inputOptions[o]=a})),t},age=(e,t)=>{const r={};for(const n in t){const i=t[n],o=e.querySelector(i);o&&(wh(o,[]),r[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return r},sge=e=>{const t=NK.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(r=>{const n=r.tagName.toLowerCase();t.includes(n)||aa(`Unrecognized element <${n}>`)})},wh=(e,t)=>{Array.from(e.attributes).forEach(r=>{t.indexOf(r.name)===-1&&aa([`Unrecognized attribute "${r.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},AK=10,lge=e=>{const t=sa(),r=Nr();typeof e.willOpen=="function"&&e.willOpen(r),wt.eventEmitter.emit("willOpen",r);const i=window.getComputedStyle(document.body).overflowY;dge(t,r,e),setTimeout(()=>{cge(t,r)},AK),lD()&&(uge(t,e.scrollbarPadding,i),Gpe()),!fT()&&!wt.previousActiveElement&&(wt.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(r)),wt.eventEmitter.emit("didOpen",r),Es(t,ce["no-transition"])},gw=e=>{const t=Nr();if(e.target!==t)return;const r=sa();t.removeEventListener("animationend",gw),t.removeEventListener("transitionend",gw),r.style.overflowY="auto"},cge=(e,t)=>{q9(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",gw),t.addEventListener("transitionend",gw)):e.style.overflowY="auto"},uge=(e,t,r)=>{Wpe(),t&&r!=="hidden"&&Zpe(r),setTimeout(()=>{e.scrollTop=0})},dge=(e,t,r)=>{mr(e,r.showClass.backdrop),r.animation?(t.style.setProperty("opacity","0","important"),Hi(t,"grid"),setTimeout(()=>{mr(t,r.showClass.popup),t.style.removeProperty("opacity")},AK)):Hi(t,"grid"),mr([document.documentElement,document.body],ce.shown),r.heightAuto&&r.backdrop&&!r.toast&&mr([document.documentElement,document.body],ce["height-auto"])};var jU={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function hge(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=jU.email),e.input==="url"&&(e.inputValidator=jU.url))}function fge(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(aa('Target parameter is not valid, defaulting to "body"'),e.target="body")}function pge(e){hge(e),e.showLoaderOnConfirm&&!e.preConfirm&&aa(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),fge(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),rpe(e)}let _l;var wb=new WeakMap;class si{constructor(){if(Dfe(this,wb,void 0),typeof window>"u")return;_l=this;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const i=Object.freeze(this.constructor.argsToParams(r));this.params=i,this.isAwaitingPromise=!1,Lfe(wb,this,this._main(_l.params))}_main(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Rme(Object.assign({},r,t)),wt.currentInstance){const o=Wp.swalPromiseResolve.get(wt.currentInstance),{isAwaitingPromise:a}=wt.currentInstance;wt.currentInstance._destroy(),a||o({isDismissed:!0}),lD()&&oK()}wt.currentInstance=_l;const n=gge(t,r);pge(n),Object.freeze(n),wt.timeout&&(wt.timeout.stop(),delete wt.timeout),clearTimeout(wt.restoreFocusTimeout);const i=yge(_l);return tK(_l,n),un.innerParams.set(_l,n),mge(_l,i,n)}then(t){return xU(wb,this).then(t)}finally(t){return xU(wb,this).finally(t)}}const mge=(e,t,r)=>new Promise((n,i)=>{const o=a=>{e.close({isDismissed:!0,dismiss:a})};Wp.swalPromiseResolve.set(e,n),Wp.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{gme(e)},t.denyButton.onclick=()=>{yme(e)},t.cancelButton.onclick=()=>{vme(e,o)},t.closeButton.onclick=()=>{o(Im.close)},Ome(r,t,o),Upe(wt,r,o),sme(e,r),lge(r),vge(wt,r,o),bge(t,r),setTimeout(()=>{t.container.scrollTop=0})}),gge=(e,t)=>{const r=Zme(e),n=Object.assign({},wp,t,r,e);return n.showClass=Object.assign({},wp.showClass,n.showClass),n.hideClass=Object.assign({},wp.hideClass,n.hideClass),n.animation===!1&&(n.showClass={backdrop:"swal2-noanimation"},n.hideClass={}),n},yge=e=>{const t={popup:Nr(),container:sa(),actions:u0(),confirmButton:Ml(),denyButton:Hh(),cancelButton:xm(),loader:Rm(),closeButton:aD(),validationMessage:dT(),progressSteps:oD()};return un.domCache.set(e,t),t},vge=(e,t,r)=>{const n=hT();yo(n),t.timer&&(e.timeout=new Qme(()=>{r("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(Hi(n),Da(n,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&uD(t.timer)})))},bge=(e,t)=>{if(!t.toast){if(!uT(t.allowEnterKey)){$9("allowEnterKey"),wge();return}Ege(e)||_ge(e,t)||VA(-1,1)}},Ege=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const r of t)if(r instanceof HTMLElement&&ea(r))return r.focus(),!0;return!1},_ge=(e,t)=>t.focusDeny&&ea(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&ea(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&ea(e.confirmButton)?(e.confirmButton.focus(),!0):!1,wge=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const r=document.createElement("audio");r.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",r.loop=!0,document.body.appendChild(r),setTimeout(()=>{r.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}si.prototype.disableButtons=gK;si.prototype.enableButtons=mK;si.prototype.getInput=hK;si.prototype.disableInput=vK;si.prototype.enableInput=yK;si.prototype.hideLoading=pw;si.prototype.disableLoading=pw;si.prototype.showValidationMessage=bK;si.prototype.resetValidationMessage=EK;si.prototype.close=wu;si.prototype.closePopup=wu;si.prototype.closeModal=wu;si.prototype.closeToast=wu;si.prototype.rejectPromise=lK;si.prototype.update=TK;si.prototype._destroy=CK;Object.assign(si,Jme);Object.keys(Ame).forEach(e=>{si[e]=function(){return _l&&_l[e]?_l[e](...arguments):null}});si.DismissReason=Im;si.version="11.15.2";const te=si;te.default=te;typeof document<"u"&&function(e,t){var r=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(r),r.styleSheet)r.styleSheet.disabled||(r.styleSheet.cssText=t);else try{r.innerHTML=t}catch{r.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');const zh="https://hcompanion.onrender.com/api";async function Sge(e){try{const t=await ve.post(`${zh}/user/login`,e);return await sessionStorage.setItem("token",t.data.jwtToken),t.data.userData}catch(t){return console.log(`error ${JSON.stringify(t)}`),t.response.status=="400"&&te.fire({title:"Failed",icon:"error",text:"username or password is wrong"}),!1}}async function Tge(e){try{return(await ve.post(`${zh}/user/createAccountGoogle`,e)).data.userData}catch(t){console.log(t)}}async function Cge(e){try{return(await ve.post(`${zh}/user/loginUsingGoogle`,e)).data.userData}catch(t){console.log(t)}}async function xge({email:e}){try{const t=await ve.post(`${zh}/user/forgotPasswordOtp`,{email:e},{withCredentials:!0});return!0}catch(t){return console.log(t),!1}}async function Rge({email:e,otp:t}){try{const r=await ve.post(`${zh}/user/checkForgotPasswordOtp`,{email:e,otp:t},{withCredentials:!0});return console.log(r.data),!0}catch(r){return console.log(r),!1}}async function Ige({password:e,email:t}){try{const r=await ve.post(`${zh}/user/forgotPassword/reset`,{email:t,password:e},{withCredentials:!0});return console.log(r.data),!0}catch(r){return console.log(r),!1}}async function Nge({email:e,password:t}){try{const r=await ve.post(`${zh}/user/password/reset`,{password:t,email:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(r.data),!0}catch(r){return console.log(r),!1}}var OK={exports:{}},kK={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0=T;function Age(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oge=typeof Object.is=="function"?Object.is:Age,kge=p0.useSyncExternalStore,Pge=p0.useRef,Dge=p0.useEffect,Lge=p0.useMemo,Mge=p0.useDebugValue;kK.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var o=Pge(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=Lge(function(){function l(p){if(!c){if(c=!0,u=p,p=n(p),i!==void 0&&a.hasValue){var m=a.value;if(i(m,p))return h=m}return h=p}if(m=h,Oge(u,p))return m;var g=n(p);return i!==void 0&&i(m,g)?(u=p,m):(u=p,h=g)}var c=!1,u,h,f=r===void 0?null:r;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,r,n,i]);var s=kge(e,o[0],o[1]);return Dge(function(){a.hasValue=!0,a.value=s},[s]),Mge(s),s};OK.exports=kK;var jge=OK.exports;function Uge(e){e()}function Fge(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Uge(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var UU={notify(){},get:()=>[]};function Vge(e,t){let r,n=UU,i=0,o=!1;function a(g){u();const y=n.subscribe(g);let v=!1;return()=>{v||(v=!0,y(),h())}}function s(){n.notify()}function l(){m.onStateChange&&m.onStateChange()}function c(){return o}function u(){i++,r||(r=e.subscribe(l),n=Fge())}function h(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=UU)}function f(){o||(o=!0,u())}function p(){o&&(o=!1,h())}const m={addNestedSub:a,notifyNestedSubs:s,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>n};return m}var Bge=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$ge=Bge(),Hge=()=>typeof navigator<"u"&&navigator.product==="ReactNative",zge=Hge(),Gge=()=>$ge||zge?T.useLayoutEffect:T.useEffect,Wge=Gge(),vx=Symbol.for("react-redux-context"),bx=typeof globalThis<"u"?globalThis:{};function Kge(){if(!T.createContext)return{};const e=bx[vx]??(bx[vx]=new Map);let t=e.get(T.createContext);return t||(t=T.createContext(null),e.set(T.createContext,t)),t}var Xu=Kge();function qge(e){const{children:t,context:r,serverState:n,store:i}=e,o=T.useMemo(()=>{const l=Vge(i);return{store:i,subscription:l,getServerState:n?()=>n:void 0}},[i,n]),a=T.useMemo(()=>i.getState(),[i]);Wge(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const s=r||Xu;return T.createElement(s.Provider,{value:o},t)}var Yge=qge;function gD(e=Xu){return function(){return T.useContext(e)}}var PK=gD();function DK(e=Xu){const t=e===Xu?PK:gD(e),r=()=>{const{store:n}=t();return n};return Object.assign(r,{withTypes:()=>r}),r}var Xge=DK();function Jge(e=Xu){const t=e===Xu?Xge:DK(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var $l=Jge(),Qge=(e,t)=>e===t;function Zge(e=Xu){const t=e===Xu?PK:gD(e),r=(n,i={})=>{const{equalityFn:o=Qge}=typeof i=="function"?{equalityFn:i}:i,a=t(),{store:s,subscription:l,getServerState:c}=a;T.useRef(!0);const u=T.useCallback({[n.name](f){return n(f)}}[n.name],[n]),h=jge.useSyncExternalStoreWithSelector(l.addNestedSub,s.getState,c||s.getState,u,o);return T.useDebugValue(h),h};return Object.assign(r,{withTypes:()=>r}),r}var rn=Zge();function Ki(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var eye=typeof Symbol=="function"&&Symbol.observable||"@@observable",FU=eye,Ex=()=>Math.random().toString(36).substring(7).split("").join("."),tye={INIT:`@@redux/INIT${Ex()}`,REPLACE:`@@redux/REPLACE${Ex()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ex()}`},yw=tye;function yD(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function LK(e,t,r){if(typeof e!="function")throw new Error(Ki(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ki(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ki(1));return r(LK)(e,t)}let n=e,i=t,o=new Map,a=o,s=0,l=!1;function c(){a===o&&(a=new Map,o.forEach((y,v)=>{a.set(v,y)}))}function u(){if(l)throw new Error(Ki(3));return i}function h(y){if(typeof y!="function")throw new Error(Ki(4));if(l)throw new Error(Ki(5));let v=!0;c();const b=s++;return a.set(b,y),function(){if(v){if(l)throw new Error(Ki(6));v=!1,c(),a.delete(b),o=null}}}function f(y){if(!yD(y))throw new Error(Ki(7));if(typeof y.type>"u")throw new Error(Ki(8));if(typeof y.type!="string")throw new Error(Ki(17));if(l)throw new Error(Ki(9));try{l=!0,i=n(i,y)}finally{l=!1}return(o=a).forEach(b=>{b()}),y}function p(y){if(typeof y!="function")throw new Error(Ki(10));n=y,f({type:yw.REPLACE})}function m(){const y=h;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Ki(11));function b(){const S=v;S.next&&S.next(u())}return b(),{unsubscribe:y(b)}},[FU](){return this}}}return f({type:yw.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:p,[FU]:m}}function rye(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:yw.INIT})>"u")throw new Error(Ki(12));if(typeof r(void 0,{type:yw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ki(13))})}function nye(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const a=t[o];typeof e[a]=="function"&&(r[a]=e[a])}const n=Object.keys(r);let i;try{rye(r)}catch(o){i=o}return function(a={},s){if(i)throw i;let l=!1;const c={};for(let u=0;u<n.length;u++){const h=n[u],f=r[h],p=a[h],m=f(p,s);if(typeof m>"u")throw s&&s.type,new Error(Ki(14));c[h]=m,l=l||m!==p}return l=l||n.length!==Object.keys(a).length,l?c:a}}function vw(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function iye(...e){return t=>(r,n)=>{const i=t(r,n);let o=()=>{throw new Error(Ki(15))};const a={getState:i.getState,dispatch:(l,...c)=>o(l,...c)},s=e.map(l=>l(a));return o=vw(...s)(i.dispatch),{...i,dispatch:o}}}function oye(e){return yD(e)&&"type"in e&&typeof e.type=="string"}var MK=Symbol.for("immer-nothing"),VU=Symbol.for("immer-draftable"),La=Symbol.for("immer-state");function Ws(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var qp=Object.getPrototypeOf;function Sh(e){return!!e&&!!e[La]}function Ac(e){var t;return e?jK(e)||Array.isArray(e)||!!e[VU]||!!((t=e.constructor)!=null&&t[VU])||gT(e)||yT(e):!1}var aye=Object.prototype.constructor.toString();function jK(e){if(!e||typeof e!="object")return!1;const t=qp(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===aye}function bw(e,t){mT(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function mT(e){const t=e[La];return t?t.type_:Array.isArray(e)?1:gT(e)?2:yT(e)?3:0}function $A(e,t){return mT(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function UK(e,t,r){const n=mT(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function sye(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function gT(e){return e instanceof Map}function yT(e){return e instanceof Set}function Ad(e){return e.copy_||e.base_}function HA(e,t){if(gT(e))return new Map(e);if(yT(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=jK(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[La];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const a=i[o],s=n[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(qp(e),n)}else{const n=qp(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function vD(e,t=!1){return vT(e)||Sh(e)||!Ac(e)||(mT(e)>1&&(e.set=e.add=e.clear=e.delete=lye),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>vD(n,!0))),e}function lye(){Ws(2)}function vT(e){return Object.isFrozen(e)}var cye={};function Th(e){const t=cye[e];return t||Ws(0,e),t}var pv;function FK(){return pv}function uye(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function BU(e,t){t&&(Th("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function zA(e){GA(e),e.drafts_.forEach(dye),e.drafts_=null}function GA(e){e===pv&&(pv=e.parent_)}function $U(e){return pv=uye(pv,e)}function dye(e){const t=e[La];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function HU(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[La].modified_&&(zA(t),Ws(4)),Ac(e)&&(e=Ew(t,e),t.parent_||_w(t,e)),t.patches_&&Th("Patches").generateReplacementPatches_(r[La].base_,e,t.patches_,t.inversePatches_)):e=Ew(t,r,[]),zA(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==MK?e:void 0}function Ew(e,t,r){if(vT(t))return t;const n=t[La];if(!n)return bw(t,(i,o)=>zU(e,n,t,i,o,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return _w(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),bw(o,(s,l)=>zU(e,n,i,s,l,r,a)),_w(e,i,!1),r&&e.patches_&&Th("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function zU(e,t,r,n,i,o,a){if(Sh(i)){const s=o&&t&&t.type_!==3&&!$A(t.assigned_,n)?o.concat(n):void 0,l=Ew(e,i,s);if(UK(r,n,l),Sh(l))e.canAutoFreeze_=!1;else return}else a&&r.add(i);if(Ac(i)&&!vT(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ew(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&_w(e,i)}}function _w(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&vD(t,r)}function hye(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:FK(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=bD;r&&(i=[n],o=mv);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return n.draft_=s,n.revoke_=a,s}var bD={get(e,t){if(t===La)return e;const r=Ad(e);if(!$A(r,t))return fye(e,r,t);const n=r[t];return e.finalized_||!Ac(n)?n:n===_x(e.base_,t)?(wx(e),e.copy_[t]=KA(n,e)):n},has(e,t){return t in Ad(e)},ownKeys(e){return Reflect.ownKeys(Ad(e))},set(e,t,r){const n=VK(Ad(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=_x(Ad(e),t),o=i==null?void 0:i[La];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(sye(r,i)&&(r!==void 0||$A(e.base_,t)))return!0;wx(e),WA(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return _x(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,wx(e),WA(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ad(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Ws(11)},getPrototypeOf(e){return qp(e.base_)},setPrototypeOf(){Ws(12)}},mv={};bw(bD,(e,t)=>{mv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});mv.deleteProperty=function(e,t){return mv.set.call(this,e,t,void 0)};mv.set=function(e,t,r){return bD.set.call(this,e[0],t,r,e[0])};function _x(e,t){const r=e[La];return(r?Ad(r):e)[t]}function fye(e,t,r){var i;const n=VK(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function VK(e,t){if(!(t in e))return;let r=qp(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=qp(r)}}function WA(e){e.modified_||(e.modified_=!0,e.parent_&&WA(e.parent_))}function wx(e){e.copy_||(e.copy_=HA(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var pye=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const a=this;return function(l=o,...c){return a.produce(l,u=>r.call(this,u,...c))}}typeof r!="function"&&Ws(6),n!==void 0&&typeof n!="function"&&Ws(7);let i;if(Ac(t)){const o=$U(this),a=KA(t,void 0);let s=!0;try{i=r(a),s=!1}finally{s?zA(o):GA(o)}return BU(o,n),HU(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===MK&&(i=void 0),this.autoFreeze_&&vD(i,!0),n){const o=[],a=[];Th("Patches").generateReplacementPatches_(t,i,o,a),n(o,a)}return i}else Ws(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...s)=>this.produceWithPatches(a,l=>t(l,...s));let n,i;return[this.produce(t,r,(a,s)=>{n=a,i=s}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ac(e)||Ws(8),Sh(e)&&(e=mye(e));const t=$U(this),r=KA(e,void 0);return r[La].isManual_=!0,GA(t),r}finishDraft(e,t){const r=e&&e[La];(!r||!r.isManual_)&&Ws(9);const{scope_:n}=r;return BU(n,t),HU(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Th("Patches").applyPatches_;return Sh(e)?n(e,t):this.produce(e,i=>n(i,t))}};function KA(e,t){const r=gT(e)?Th("MapSet").proxyMap_(e,t):yT(e)?Th("MapSet").proxySet_(e,t):hye(e,t);return(t?t.scope_:FK()).drafts_.push(r),r}function mye(e){return Sh(e)||Ws(10,e),BK(e)}function BK(e){if(!Ac(e)||vT(e))return e;const t=e[La];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=HA(e,t.scope_.immer_.useStrictShallowCopy_)}else r=HA(e,!0);return bw(r,(n,i)=>{UK(r,n,BK(i))}),t&&(t.finalized_=!1),r}var Ma=new pye,$K=Ma.produce;Ma.produceWithPatches.bind(Ma);Ma.setAutoFreeze.bind(Ma);Ma.setUseStrictShallowCopy.bind(Ma);Ma.applyPatches.bind(Ma);Ma.createDraft.bind(Ma);Ma.finishDraft.bind(Ma);function HK(e){return({dispatch:r,getState:n})=>i=>o=>typeof o=="function"?o(r,n,e):i(o)}var gye=HK(),yye=HK,vye=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vw:vw.apply(null,arguments)};function GU(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(Sc(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>oye(n)&&n.type===e,r}var zK=class qg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,qg.prototype)}static get[Symbol.species](){return qg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new qg(...t[0].concat(this)):new qg(...t.concat(this))}};function WU(e){return Ac(e)?$K(e,()=>{}):e}function KU(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function bye(e){return typeof e=="boolean"}var Eye=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let a=new zK;return r&&(bye(r)?a.push(gye):a.push(yye(r.extraArgument))),a},_ye="RTK_autoBatch",qU=e=>t=>{setTimeout(t,e)},wye=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,o=!1,a=!1;const s=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:qU(10):e.type==="callback"?e.queueNotification:qU(e.timeout),c=()=>{a=!1,o&&(o=!1,s.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>i&&u(),f=n.subscribe(h);return s.add(u),()=>{f(),s.delete(u)}},dispatch(u){var h;try{return i=!((h=u==null?void 0:u.meta)!=null&&h[_ye]),o=!i,o&&(a||(a=!0,l(c))),n.dispatch(u)}finally{i=!0}}})},Sye=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new zK(e);return n&&i.push(wye(typeof n=="object"?n:void 0)),i};function Tye(e){const t=Eye(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:a=void 0}=e||{};let s;if(typeof r=="function")s=r;else if(yD(r))s=nye(r);else throw new Error(Sc(1));let l;typeof n=="function"?l=n(t):l=t();let c=vw;i&&(c=vye({trace:!1,...typeof i=="object"&&i}));const u=iye(...l),h=Sye(u);let f=typeof a=="function"?a(h):h();const p=c(...f);return LK(s,o,p)}function GK(e){const t={},r=[];let n;const i={addCase(o,a){const s=typeof o=="string"?o:o.type;if(!s)throw new Error(Sc(28));if(s in t)throw new Error(Sc(29));return t[s]=a,i},addMatcher(o,a){return r.push({matcher:o,reducer:a}),i},addDefaultCase(o){return n=o,i}};return e(i),[t,r,n]}function Cye(e){return typeof e=="function"}function xye(e,t){let[r,n,i]=GK(t),o;if(Cye(e))o=()=>WU(e());else{const s=WU(e);o=()=>s}function a(s=o(),l){let c=[r[l.type],...n.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,h)=>{if(h)if(Sh(u)){const p=h(u,l);return p===void 0?u:p}else{if(Ac(u))return $K(u,f=>h(f,l));{const f=h(u,l);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},s)}return a.getInitialState=o,a}var Rye=Symbol.for("rtk-slice-createasyncthunk");function Iye(e,t){return`${e}/${t}`}function Nye({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Rye];return function(i){const{name:o,reducerPath:a=o}=i;if(!o)throw new Error(Sc(11));typeof process<"u";const s=(typeof i.reducers=="function"?i.reducers(Oye()):i.reducers)||{},l=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(_,S){const I=typeof _=="string"?_:_.type;if(!I)throw new Error(Sc(12));if(I in c.sliceCaseReducersByType)throw new Error(Sc(13));return c.sliceCaseReducersByType[I]=S,u},addMatcher(_,S){return c.sliceMatchers.push({matcher:_,reducer:S}),u},exposeAction(_,S){return c.actionCreators[_]=S,u},exposeCaseReducer(_,S){return c.sliceCaseReducersByName[_]=S,u}};l.forEach(_=>{const S=s[_],I={reducerName:_,type:Iye(o,_),createNotation:typeof i.reducers=="function"};Pye(S)?Lye(I,S,u,t):kye(I,S,u)});function h(){const[_={},S=[],I=void 0]=typeof i.extraReducers=="function"?GK(i.extraReducers):[i.extraReducers],A={..._,...c.sliceCaseReducersByType};return xye(i.initialState,D=>{for(let M in A)D.addCase(M,A[M]);for(let M of c.sliceMatchers)D.addMatcher(M.matcher,M.reducer);for(let M of S)D.addMatcher(M.matcher,M.reducer);I&&D.addDefaultCase(I)})}const f=_=>_,p=new Map;let m;function g(_,S){return m||(m=h()),m(_,S)}function y(){return m||(m=h()),m.getInitialState()}function v(_,S=!1){function I(D){let M=D[_];return typeof M>"u"&&S&&(M=y()),M}function A(D=f){const M=KU(p,S,()=>new WeakMap);return KU(M,D,()=>{const H={};for(const[V,G]of Object.entries(i.selectors??{}))H[V]=Aye(G,D,y,S);return H})}return{reducerPath:_,getSelectors:A,get selectors(){return A(I)},selectSlice:I}}const b={name:o,reducer:g,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:y,...v(a),injectInto(_,{reducerPath:S,...I}={}){const A=S??a;return _.inject({reducerPath:A,reducer:g},I),{...b,...v(A,!0)}}};return b}}function Aye(e,t,r,n){function i(o,...a){let s=t(o);return typeof s>"u"&&n&&(s=r()),e(s,...a)}return i.unwrapped=e,i}var Nm=Nye();function Oye(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function kye({type:e,reducerName:t,createNotation:r},n,i){let o,a;if("reducer"in n){if(r&&!Dye(n))throw new Error(Sc(17));o=n.reducer,a=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,a?GU(e,a):GU(e))}function Pye(e){return e._reducerDefinitionType==="asyncThunk"}function Dye(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Lye({type:e,reducerName:t},r,n,i){if(!i)throw new Error(Sc(18));const{payloadCreator:o,fulfilled:a,pending:s,rejected:l,settled:c,options:u}=r,h=i(e,o,u);n.exposeAction(t,h),a&&n.addCase(h.fulfilled,a),s&&n.addCase(h.pending,s),l&&n.addCase(h.rejected,l),c&&n.addMatcher(h.settled,c),n.exposeCaseReducer(t,{fulfilled:a||Sb,pending:s||Sb,rejected:l||Sb,settled:c||Sb})}function Sb(){}function Sc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Mye={username:"",email:"",role:"",isLoggedIn:!1},WK=Nm({name:"user",initialState:Mye,reducers:{setUser(e,t){e.username=t.payload.username,e.email=t.payload.email,e.role=t.payload.role,e.isLoggedIn=t.payload.role}}}),{setUser:Xn}=WK.actions,jye=WK.reducer;var qA={exports:{}},Ch={},KK={exports:{}},Uye="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Fye=Uye,Vye=Fye;function qK(){}function YK(){}YK.resetWarningCache=qK;var Bye=function(){function e(n,i,o,a,s,l){if(l!==Vye){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:YK,resetWarningCache:qK};return r.PropTypes=r,r};KK.exports=Bye();var XK=KK.exports,YA={exports:{}},tl={},XA={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var r="none",n="contents",i=/^(input|select|textarea|button|object|iframe)$/;function o(h,f){return f.getPropertyValue("overflow")!=="visible"||h.scrollWidth<=0&&h.scrollHeight<=0}function a(h){var f=h.offsetWidth<=0&&h.offsetHeight<=0;if(f&&!h.innerHTML)return!0;try{var p=window.getComputedStyle(h),m=p.getPropertyValue("display");return f?m!==n&&o(h,p):m===r}catch{return console.warn("Failed to inspect element style"),!1}}function s(h){for(var f=h,p=h.getRootNode&&h.getRootNode();f&&f!==document.body;){if(p&&f===p&&(f=p.host.parentNode),a(f))return!1;f=f.parentNode}return!0}function l(h,f){var p=h.nodeName.toLowerCase(),m=i.test(p)&&!h.disabled||p==="a"&&h.href||f;return m&&s(h)}function c(h){var f=h.getAttribute("tabindex");f===null&&(f=void 0);var p=isNaN(f);return(p||f>=0)&&l(h,!p)}function u(h){var f=[].slice.call(h.querySelectorAll("*"),0).reduce(function(p,m){return p.concat(m.shadowRoot?u(m.shadowRoot):[m])},[]);return f.filter(c)}e.exports=t.default})(XA,XA.exports);var JK=XA.exports;Object.defineProperty(tl,"__esModule",{value:!0});tl.resetState=Gye;tl.log=Wye;tl.handleBlur=gv;tl.handleFocus=yv;tl.markForFocusLater=Kye;tl.returnFocus=qye;tl.popWithoutFocus=Yye;tl.setupScopedFocus=Xye;tl.teardownScopedFocus=Jye;var $ye=JK,Hye=zye($ye);function zye(e){return e&&e.__esModule?e:{default:e}}var Yp=[],Zf=null,JA=!1;function Gye(){Yp=[]}function Wye(){}function gv(){JA=!0}function yv(){if(JA){if(JA=!1,!Zf)return;setTimeout(function(){if(!Zf.contains(document.activeElement)){var e=(0,Hye.default)(Zf)[0]||Zf;e.focus()}},0)}}function Kye(){Yp.push(document.activeElement)}function qye(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=null;try{Yp.length!==0&&(t=Yp.pop(),t.focus({preventScroll:e}));return}catch{console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}}function Yye(){Yp.length>0&&Yp.pop()}function Xye(e){Zf=e,window.addEventListener?(window.addEventListener("blur",gv,!1),document.addEventListener("focus",yv,!0)):(window.attachEvent("onBlur",gv),document.attachEvent("onFocus",yv))}function Jye(){Zf=null,window.addEventListener?(window.removeEventListener("blur",gv),document.removeEventListener("focus",yv)):(window.detachEvent("onBlur",gv),document.detachEvent("onFocus",yv))}var QA={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=JK,n=i(r);function i(s){return s&&s.__esModule?s:{default:s}}function o(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return s.activeElement.shadowRoot?o(s.activeElement.shadowRoot):s.activeElement}function a(s,l){var c=(0,n.default)(s);if(!c.length){l.preventDefault();return}var u=void 0,h=l.shiftKey,f=c[0],p=c[c.length-1],m=o();if(s===m){if(!h)return;u=p}if(p===m&&!h&&(u=f),f===m&&h&&(u=p),u){l.preventDefault(),u.focus();return}var g=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),y=g!=null&&g[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(y){var v=c.indexOf(m);if(v>-1&&(v+=h?-1:1),u=c[v],typeof u>"u"){l.preventDefault(),u=h?p:f,u.focus();return}l.preventDefault(),u.focus()}}e.exports=t.default})(QA,QA.exports);var Qye=QA.exports,rl={},Zye=function(){},eve=Zye,Js={},QK={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(e){(function(){var t=!!(typeof window<"u"&&window.document&&window.document.createElement),r={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen};e.exports?e.exports=r:window.ExecutionEnvironment=r})()})(QK);var tve=QK.exports;Object.defineProperty(Js,"__esModule",{value:!0});Js.canUseDOM=Js.SafeNodeList=Js.SafeHTMLCollection=void 0;var rve=tve,nve=ive(rve);function ive(e){return e&&e.__esModule?e:{default:e}}var bT=nve.default,ove=bT.canUseDOM?window.HTMLElement:{};Js.SafeHTMLCollection=bT.canUseDOM?window.HTMLCollection:{};Js.SafeNodeList=bT.canUseDOM?window.NodeList:{};Js.canUseDOM=bT.canUseDOM;Js.default=ove;Object.defineProperty(rl,"__esModule",{value:!0});rl.resetState=uve;rl.log=dve;rl.assertNodeList=ZK;rl.setElement=hve;rl.validateElement=ED;rl.hide=fve;rl.show=pve;rl.documentNotReadyOrSSRTesting=mve;var ave=eve,sve=cve(ave),lve=Js;function cve(e){return e&&e.__esModule?e:{default:e}}var ss=null;function uve(){ss&&(ss.removeAttribute?ss.removeAttribute("aria-hidden"):ss.length!=null?ss.forEach(function(e){return e.removeAttribute("aria-hidden")}):document.querySelectorAll(ss).forEach(function(e){return e.removeAttribute("aria-hidden")})),ss=null}function dve(){}function ZK(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function hve(e){var t=e;if(typeof t=="string"&&lve.canUseDOM){var r=document.querySelectorAll(t);ZK(r,t),t=r}return ss=t||ss,ss}function ED(e){var t=e||ss;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,sve.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function fve(e){var t=!0,r=!1,n=void 0;try{for(var i=ED(e)[Symbol.iterator](),o;!(t=(o=i.next()).done);t=!0){var a=o.value;a.setAttribute("aria-hidden","true")}}catch(s){r=!0,n=s}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}function pve(e){var t=!0,r=!1,n=void 0;try{for(var i=ED(e)[Symbol.iterator](),o;!(t=(o=i.next()).done);t=!0){var a=o.value;a.removeAttribute("aria-hidden")}}catch(s){r=!0,n=s}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}function mve(){ss=null}var Am={};Object.defineProperty(Am,"__esModule",{value:!0});Am.resetState=gve;Am.log=yve;var _y={},wy={};function YU(e,t){e.classList.remove(t)}function gve(){var e=document.getElementsByTagName("html")[0];for(var t in _y)YU(e,_y[t]);var r=document.body;for(var n in wy)YU(r,wy[n]);_y={},wy={}}function yve(){}var vve=function(t,r){return t[r]||(t[r]=0),t[r]+=1,r},bve=function(t,r){return t[r]&&(t[r]-=1),r},Eve=function(t,r,n){n.forEach(function(i){vve(r,i),t.add(i)})},_ve=function(t,r,n){n.forEach(function(i){bve(r,i),r[i]===0&&t.remove(i)})};Am.add=function(t,r){return Eve(t.classList,t.nodeName.toLowerCase()=="html"?_y:wy,r.split(" "))};Am.remove=function(t,r){return _ve(t.classList,t.nodeName.toLowerCase()=="html"?_y:wy,r.split(" "))};var Om={};Object.defineProperty(Om,"__esModule",{value:!0});Om.log=Sve;Om.resetState=Tve;function wve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var eq=function e(){var t=this;wve(this,e),this.register=function(r){t.openInstances.indexOf(r)===-1&&(t.openInstances.push(r),t.emit("register"))},this.deregister=function(r){var n=t.openInstances.indexOf(r);n!==-1&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(r){t.subscribers.push(r)},this.emit=function(r){t.subscribers.forEach(function(n){return n(r,t.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},ww=new eq;function Sve(){console.log("portalOpenInstances ----------"),console.log(ww.openInstances.length),ww.openInstances.forEach(function(e){return console.log(e)}),console.log("end portalOpenInstances ----------")}function Tve(){ww=new eq}Om.default=ww;var _D={};Object.defineProperty(_D,"__esModule",{value:!0});_D.resetState=Ive;_D.log=Nve;var Cve=Om,xve=Rve(Cve);function Rve(e){return e&&e.__esModule?e:{default:e}}var lo=void 0,Bs=void 0,lh=[];function Ive(){for(var e=[lo,Bs],t=0;t<e.length;t++){var r=e[t];r&&r.parentNode&&r.parentNode.removeChild(r)}lo=Bs=null,lh=[]}function Nve(){console.log("bodyTrap ----------"),console.log(lh.length);for(var e=[lo,Bs],t=0;t<e.length;t++){var r=e[t],n=r||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")}function XU(){lh.length!==0&&lh[lh.length-1].focusContent()}function Ave(e,t){!lo&&!Bs&&(lo=document.createElement("div"),lo.setAttribute("data-react-modal-body-trap",""),lo.style.position="absolute",lo.style.opacity="0",lo.setAttribute("tabindex","0"),lo.addEventListener("focus",XU),Bs=lo.cloneNode(),Bs.addEventListener("focus",XU)),lh=t,lh.length>0?(document.body.firstChild!==lo&&document.body.insertBefore(lo,document.body.firstChild),document.body.lastChild!==Bs&&document.body.appendChild(Bs)):(lo.parentElement&&lo.parentElement.removeChild(lo),Bs.parentElement&&Bs.parentElement.removeChild(Bs))}xve.default.subscribe(Ave);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function($){for(var F=1;F<arguments.length;F++){var K=arguments[F];for(var k in K)Object.prototype.hasOwnProperty.call(K,k)&&($[k]=K[k])}return $},n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},i=function(){function $(F,K){for(var k=0;k<K.length;k++){var P=K[k];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(F,P.key,P)}}return function(F,K,k){return K&&$(F.prototype,K),k&&$(F,k),F}}(),o=T,a=XK,s=I(a),l=tl,c=S(l),u=Qye,h=I(u),f=rl,p=S(f),m=Am,g=S(m),y=Js,v=I(y),b=Om,_=I(b);function S($){if($&&$.__esModule)return $;var F={};if($!=null)for(var K in $)Object.prototype.hasOwnProperty.call($,K)&&(F[K]=$[K]);return F.default=$,F}function I($){return $&&$.__esModule?$:{default:$}}function A($,F){if(!($ instanceof F))throw new TypeError("Cannot call a class as a function")}function D($,F){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:$}function M($,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);$.prototype=Object.create(F&&F.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf($,F):$.__proto__=F)}var H={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},V=function(F){return F.code==="Tab"||F.keyCode===9},G=function(F){return F.code==="Escape"||F.keyCode===27},Y=0,Z=function($){M(F,$);function F(K){A(this,F);var k=D(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,K));return k.setOverlayRef=function(P){k.overlay=P,k.props.overlayRef&&k.props.overlayRef(P)},k.setContentRef=function(P){k.content=P,k.props.contentRef&&k.props.contentRef(P)},k.afterClose=function(){var P=k.props,B=P.appElement,x=P.ariaHideApp,E=P.htmlOpenClassName,N=P.bodyOpenClassName,C=P.parentSelector,W=C&&C().ownerDocument||document;N&&g.remove(W.body,N),E&&g.remove(W.getElementsByTagName("html")[0],E),x&&Y>0&&(Y-=1,Y===0&&p.show(B)),k.props.shouldFocusAfterRender&&(k.props.shouldReturnFocusAfterClose?(c.returnFocus(k.props.preventScroll),c.teardownScopedFocus()):c.popWithoutFocus()),k.props.onAfterClose&&k.props.onAfterClose(),_.default.deregister(k)},k.open=function(){k.beforeOpen(),k.state.afterOpen&&k.state.beforeClose?(clearTimeout(k.closeTimer),k.setState({beforeClose:!1})):(k.props.shouldFocusAfterRender&&(c.setupScopedFocus(k.node),c.markForFocusLater()),k.setState({isOpen:!0},function(){k.openAnimationFrame=requestAnimationFrame(function(){k.setState({afterOpen:!0}),k.props.isOpen&&k.props.onAfterOpen&&k.props.onAfterOpen({overlayEl:k.overlay,contentEl:k.content})})}))},k.close=function(){k.props.closeTimeoutMS>0?k.closeWithTimeout():k.closeWithoutTimeout()},k.focusContent=function(){return k.content&&!k.contentHasFocus()&&k.content.focus({preventScroll:!0})},k.closeWithTimeout=function(){var P=Date.now()+k.props.closeTimeoutMS;k.setState({beforeClose:!0,closesAt:P},function(){k.closeTimer=setTimeout(k.closeWithoutTimeout,k.state.closesAt-Date.now())})},k.closeWithoutTimeout=function(){k.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},k.afterClose)},k.handleKeyDown=function(P){V(P)&&(0,h.default)(k.content,P),k.props.shouldCloseOnEsc&&G(P)&&(P.stopPropagation(),k.requestClose(P))},k.handleOverlayOnClick=function(P){k.shouldClose===null&&(k.shouldClose=!0),k.shouldClose&&k.props.shouldCloseOnOverlayClick&&(k.ownerHandlesClose()?k.requestClose(P):k.focusContent()),k.shouldClose=null},k.handleContentOnMouseUp=function(){k.shouldClose=!1},k.handleOverlayOnMouseDown=function(P){!k.props.shouldCloseOnOverlayClick&&P.target==k.overlay&&P.preventDefault()},k.handleContentOnClick=function(){k.shouldClose=!1},k.handleContentOnMouseDown=function(){k.shouldClose=!1},k.requestClose=function(P){return k.ownerHandlesClose()&&k.props.onRequestClose(P)},k.ownerHandlesClose=function(){return k.props.onRequestClose},k.shouldBeClosed=function(){return!k.state.isOpen&&!k.state.beforeClose},k.contentHasFocus=function(){return document.activeElement===k.content||k.content.contains(document.activeElement)},k.buildClassName=function(P,B){var x=(typeof B>"u"?"undefined":n(B))==="object"?B:{base:H[P],afterOpen:H[P]+"--after-open",beforeClose:H[P]+"--before-close"},E=x.base;return k.state.afterOpen&&(E=E+" "+x.afterOpen),k.state.beforeClose&&(E=E+" "+x.beforeClose),typeof B=="string"&&B?E+" "+B:E},k.attributesFromObject=function(P,B){return Object.keys(B).reduce(function(x,E){return x[P+"-"+E]=B[E],x},{})},k.state={afterOpen:!1,beforeClose:!1},k.shouldClose=null,k.moveFromContentToOverlay=null,k}return i(F,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(k,P){this.props.isOpen&&!k.isOpen?this.open():!this.props.isOpen&&k.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!P.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var k=this.props,P=k.appElement,B=k.ariaHideApp,x=k.htmlOpenClassName,E=k.bodyOpenClassName,N=k.parentSelector,C=N&&N().ownerDocument||document;E&&g.add(C.body,E),x&&g.add(C.getElementsByTagName("html")[0],x),B&&(Y+=1,p.hide(P)),_.default.register(this)}},{key:"render",value:function(){var k=this.props,P=k.id,B=k.className,x=k.overlayClassName,E=k.defaultStyles,N=k.children,C=B?{}:E.content,W=x?{}:E.overlay;if(this.shouldBeClosed())return null;var U={ref:this.setOverlayRef,className:this.buildClassName("overlay",x),style:r({},W,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},X=r({id:P,ref:this.setContentRef,style:r({},C,this.props.style.content),className:this.buildClassName("content",B),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),ae=this.props.contentElement(X,N);return this.props.overlayElement(U,ae)}}]),F}(o.Component);Z.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},Z.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),parentSelector:s.default.func,bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(v.default),s.default.instanceOf(y.SafeHTMLCollection),s.default.instanceOf(y.SafeNodeList),s.default.arrayOf(s.default.instanceOf(v.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},t.default=Z,e.exports=t.default})(YA,YA.exports);var Ove=YA.exports;function tq(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function rq(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n??null}this.setState(t.bind(this))}function nq(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}tq.__suppressDeprecationWarning=!0;rq.__suppressDeprecationWarning=!0;nq.__suppressDeprecationWarning=!0;function kve(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,i=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?i="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),r!==null||n!==null||i!==null){var o=e.displayName||e.name,a=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+a+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=tq,t.componentWillReceiveProps=rq),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=nq;var s=t.componentDidUpdate;t.componentDidUpdate=function(c,u,h){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:h;s.call(this,c,u,f)}}return e}const Pve=Object.freeze(Object.defineProperty({__proto__:null,polyfill:kve},Symbol.toStringTag,{value:"Module"})),Dve=W7(Pve);Object.defineProperty(Ch,"__esModule",{value:!0});Ch.bodyOpenClassName=Ch.portalClassName=void 0;var JU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lve=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),iq=T,Sw=m0(iq),Mve=jS,Tw=m0(Mve),jve=XK,Ft=m0(jve),Uve=Ove,QU=m0(Uve),Fve=rl,Vve=$ve(Fve),Su=Js,ZU=m0(Su),Bve=Dve;function $ve(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function m0(e){return e&&e.__esModule?e:{default:e}}function Hve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function zve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Gve=Ch.portalClassName="ReactModalPortal",Wve=Ch.bodyOpenClassName="ReactModal__Body--open",Od=Su.canUseDOM&&Tw.default.createPortal!==void 0,t5=function(t){return document.createElement(t)},r5=function(){return Od?Tw.default.createPortal:Tw.default.unstable_renderSubtreeIntoContainer};function Tb(e){return e()}var g0=function(e){zve(t,e);function t(){var r,n,i,o;Hve(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return o=(n=(i=e5(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(s))),i),i.removePortal=function(){!Od&&Tw.default.unmountComponentAtNode(i.node);var c=Tb(i.props.parentSelector);c&&c.contains(i.node)?c.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(c){i.portal=c},i.renderPortal=function(c){var u=r5(),h=u(i,Sw.default.createElement(QU.default,JU({defaultStyles:t.defaultStyles},c)),i.node);i.portalRef(h)},n),e5(i,o)}return Lve(t,[{key:"componentDidMount",value:function(){if(Su.canUseDOM){Od||(this.node=t5("div")),this.node.className=this.props.portalClassName;var n=Tb(this.props.parentSelector);n.appendChild(this.node),!Od&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(n){var i=Tb(n.parentSelector),o=Tb(this.props.parentSelector);return{prevParent:i,nextParent:o}}},{key:"componentDidUpdate",value:function(n,i,o){if(Su.canUseDOM){var a=this.props,s=a.isOpen,l=a.portalClassName;n.portalClassName!==l&&(this.node.className=l);var c=o.prevParent,u=o.nextParent;u!==c&&(c.removeChild(this.node),u.appendChild(this.node)),!(!n.isOpen&&!s)&&!Od&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!Su.canUseDOM||!this.node||!this.portal)){var n=this.portal.state,i=Date.now(),o=n.isOpen&&this.props.closeTimeoutMS&&(n.closesAt||i+this.props.closeTimeoutMS);o?(n.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,o-i)):this.removePortal()}}},{key:"render",value:function(){if(!Su.canUseDOM||!Od)return null;!this.node&&Od&&(this.node=t5("div"));var n=r5();return n(Sw.default.createElement(QU.default,JU({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(n){Vve.setElement(n)}}]),t}(iq.Component);g0.propTypes={isOpen:Ft.default.bool.isRequired,style:Ft.default.shape({content:Ft.default.object,overlay:Ft.default.object}),portalClassName:Ft.default.string,bodyOpenClassName:Ft.default.string,htmlOpenClassName:Ft.default.string,className:Ft.default.oneOfType([Ft.default.string,Ft.default.shape({base:Ft.default.string.isRequired,afterOpen:Ft.default.string.isRequired,beforeClose:Ft.default.string.isRequired})]),overlayClassName:Ft.default.oneOfType([Ft.default.string,Ft.default.shape({base:Ft.default.string.isRequired,afterOpen:Ft.default.string.isRequired,beforeClose:Ft.default.string.isRequired})]),appElement:Ft.default.oneOfType([Ft.default.instanceOf(ZU.default),Ft.default.instanceOf(Su.SafeHTMLCollection),Ft.default.instanceOf(Su.SafeNodeList),Ft.default.arrayOf(Ft.default.instanceOf(ZU.default))]),onAfterOpen:Ft.default.func,onRequestClose:Ft.default.func,closeTimeoutMS:Ft.default.number,ariaHideApp:Ft.default.bool,shouldFocusAfterRender:Ft.default.bool,shouldCloseOnOverlayClick:Ft.default.bool,shouldReturnFocusAfterClose:Ft.default.bool,preventScroll:Ft.default.bool,parentSelector:Ft.default.func,aria:Ft.default.object,data:Ft.default.object,role:Ft.default.string,contentLabel:Ft.default.string,shouldCloseOnEsc:Ft.default.bool,overlayRef:Ft.default.func,contentRef:Ft.default.func,id:Ft.default.string,overlayElement:Ft.default.func,contentElement:Ft.default.func};g0.defaultProps={isOpen:!1,portalClassName:Gve,bodyOpenClassName:Wve,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(t,r){return Sw.default.createElement("div",t,r)},contentElement:function(t,r){return Sw.default.createElement("div",t,r)}};g0.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,Bve.polyfill)(g0);Ch.default=g0;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Ch,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}t.default=n.default,e.exports=t.default})(qA,qA.exports);var Kve=qA.exports;const ET=oa(Kve),oq=Ni().shape({password:jt().required("Enter password").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirmPassword:jt().required("Enter confirmpassword").oneOf([o9("password"),null],"Should be matching with password field")}),aq=e=>{try{const[t,r]=e.split("@");return`${t.slice(0,4)+"************"}@${r}`}catch(t){console.log(t)}};var sq={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n5=kr.createContext&&kr.createContext(sq),qve=["attr","size","title"];function Yve(e,t){if(e==null)return{};var r=Xve(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xve(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cw.apply(this,arguments)}function i5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i5(Object(r),!0).forEach(function(n){Jve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jve(e,t,r){return t=Qve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qve(e){var t=Zve(e,"string");return typeof t=="symbol"?t:t+""}function Zve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lq(e){return e&&e.map((t,r)=>kr.createElement(t.tag,xw({key:r},t.attr),lq(t.child)))}function Ai(e){return t=>kr.createElement(e0e,Cw({attr:xw({},e.attr)},t),lq(e.child))}function e0e(e){var t=r=>{var{attr:n,size:i,title:o}=e,a=Yve(e,qve),s=i||r.size||"1em",l;return r.className&&(l=r.className),e.className&&(l=(l?l+" ":"")+e.className),kr.createElement("svg",Cw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:l,style:xw(xw({color:e.color||r.color},r.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&kr.createElement("title",null,o),e.children)};return n5!==void 0?kr.createElement(n5.Consumer,null,r=>t(r)):t(sq)}function t0e(e){return Ai({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function r0e(e){return Ai({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function n0e(e){return Ai({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(e)}function cq(e){return Ai({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function i0e(e){return Ai({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(e)}function o0e(e){return Ai({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}function a0e(e){return Ai({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},child:[]}]})(e)}function s0e(e){return Ai({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function uq(e){return Ai({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"},child:[]}]})(e)}function l0e(e){return Ai({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"},child:[]}]})(e)}function dq(e){return Ai({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"},child:[]}]})(e)}function c0e(e){return Ai({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"},child:[]}]})(e)}function u0e(e){return Ai({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"},child:[]}]})(e)}const wD="-";function d0e(e){const t=f0e(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;function i(a){const s=a.split(wD);return s[0]===""&&s.length!==1&&s.shift(),hq(s,t)||h0e(a)}function o(a,s){const l=r[a]||[];return s&&n[a]?[...l,...n[a]]:l}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function hq(e,t){var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?hq(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(wD);return(a=t.validators.find(({validator:s})=>s(o)))==null?void 0:a.classGroupId}const o5=/^\[(.+)\]$/;function h0e(e){if(o5.test(e)){const t=o5.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function f0e(e){const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return m0e(Object.entries(e.classGroups),r).forEach(([o,a])=>{ZA(a,n,o,t)}),n}function ZA(e,t,r,n){e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:a5(t,i);o.classGroupId=r;return}if(typeof i=="function"){if(p0e(i)){ZA(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([o,a])=>{ZA(a,a5(t,o),r,n)})})}function a5(e,t){let r=e;return t.split(wD).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function p0e(e){return e.isThemeGetter}function m0e(e,t){return t?e.map(([r,n])=>{const i=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,s])=>[t+a,s])):o);return[r,i]}):e}function g0e(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;function i(o,a){r.set(o,a),t++,t>e&&(t=0,n=r,r=new Map)}return{get(o){let a=r.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return i(o,a),a},set(o,a){r.has(o)?r.set(o,a):i(o,a)}}}const fq="!";function y0e(e){const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],o=t.length;function a(s){const l=[];let c=0,u=0,h;for(let y=0;y<s.length;y++){let v=s[y];if(c===0){if(v===i&&(n||s.slice(y,y+o)===t)){l.push(s.slice(u,y)),u=y+o;continue}if(v==="/"){h=y;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?s:s.substring(u),p=f.startsWith(fq),m=p?f.substring(1):f,g=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}}return r?function(l){return r({className:l,parseClassName:a})}:a}function v0e(e){if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t}function b0e(e){return{cache:g0e(e.cacheSize),parseClassName:y0e(e),...d0e(e)}}const E0e=/\s+/;function _0e(e,t){const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,o=new Set;return e.trim().split(E0e).map(a=>{const{modifiers:s,hasImportantModifier:l,baseClassName:c,maybePostfixModifierPosition:u}=r(a);let h=!!u,f=n(h?c.substring(0,u):c);if(!f){if(!h)return{isTailwindClass:!1,originalClassName:a};if(f=n(c),!f)return{isTailwindClass:!1,originalClassName:a};h=!1}const p=v0e(s).join(":");return{isTailwindClass:!0,modifierId:l?p+fq:p,classGroupId:f,originalClassName:a,hasPostfixModifier:h}}).reverse().filter(a=>{if(!a.isTailwindClass)return!0;const{modifierId:s,classGroupId:l,hasPostfixModifier:c}=a,u=s+l;return o.has(u)?!1:(o.add(u),i(l,c).forEach(h=>o.add(s+h)),!0)}).reverse().map(a=>a.originalClassName).join(" ")}function w0e(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=pq(t))&&(n&&(n+=" "),n+=r);return n}function pq(e){if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=pq(e[n]))&&(r&&(r+=" "),r+=t);return r}function S0e(e,...t){let r,n,i,o=a;function a(l){const c=t.reduce((u,h)=>h(u),e());return r=b0e(c),n=r.cache.get,i=r.cache.set,o=s,s(l)}function s(l){const c=n(l);if(c)return c;const u=_0e(l,r);return i(l,u),u}return function(){return o(w0e.apply(null,arguments))}}function dn(e){const t=r=>r[e]||[];return t.isThemeGetter=!0,t}const mq=/^\[(?:([a-z-]+):)?(.+)\]$/i,T0e=/^\d+\/\d+$/,C0e=new Set(["px","full","screen"]),x0e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,R0e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,I0e=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,N0e=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,A0e=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Zl(e){return Kd(e)||C0e.has(e)||T0e.test(e)}function Wc(e){return km(e,"length",U0e)}function Kd(e){return!!e&&!Number.isNaN(Number(e))}function Cb(e){return km(e,"number",Kd)}function wg(e){return!!e&&Number.isInteger(Number(e))}function O0e(e){return e.endsWith("%")&&Kd(e.slice(0,-1))}function Yt(e){return mq.test(e)}function Kc(e){return x0e.test(e)}const k0e=new Set(["length","size","percentage"]);function P0e(e){return km(e,k0e,gq)}function D0e(e){return km(e,"position",gq)}const L0e=new Set(["image","url"]);function M0e(e){return km(e,L0e,V0e)}function j0e(e){return km(e,"",F0e)}function Sg(){return!0}function km(e,t,r){const n=mq.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1}function U0e(e){return R0e.test(e)&&!I0e.test(e)}function gq(){return!1}function F0e(e){return N0e.test(e)}function V0e(e){return A0e.test(e)}function B0e(){const e=dn("colors"),t=dn("spacing"),r=dn("blur"),n=dn("brightness"),i=dn("borderColor"),o=dn("borderRadius"),a=dn("borderSpacing"),s=dn("borderWidth"),l=dn("contrast"),c=dn("grayscale"),u=dn("hueRotate"),h=dn("invert"),f=dn("gap"),p=dn("gradientColorStops"),m=dn("gradientColorStopPositions"),g=dn("inset"),y=dn("margin"),v=dn("opacity"),b=dn("padding"),_=dn("saturate"),S=dn("scale"),I=dn("sepia"),A=dn("skew"),D=dn("space"),M=dn("translate"),H=()=>["auto","contain","none"],V=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto",Yt,t],Y=()=>[Yt,t],Z=()=>["",Zl,Wc],$=()=>["auto",Kd,Yt],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],k=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",Yt],x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],E=()=>[Kd,Cb],N=()=>[Kd,Yt];return{cacheSize:500,separator:":",theme:{colors:[Sg],spacing:[Zl,Wc],blur:["none","",Kc,Yt],brightness:E(),borderColor:[e],borderRadius:["none","","full",Kc,Yt],borderSpacing:Y(),borderWidth:Z(),contrast:E(),grayscale:B(),hueRotate:N(),invert:B(),gap:Y(),gradientColorStops:[e],gradientColorStopPositions:[O0e,Wc],inset:G(),margin:G(),opacity:E(),padding:Y(),saturate:E(),scale:E(),sepia:B(),skew:N(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",Yt]}],container:["container"],columns:[{columns:[Kc]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Yt]}],overflow:[{overflow:V()}],"overflow-x":[{"overflow-x":V()}],"overflow-y":[{"overflow-y":V()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wg,Yt]}],basis:[{basis:G()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Yt]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",wg,Yt]}],"grid-cols":[{"grid-cols":[Sg]}],"col-start-end":[{col:["auto",{span:["full",wg,Yt]},Yt]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Sg]}],"row-start-end":[{row:["auto",{span:[wg,Yt]},Yt]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Yt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Yt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Yt,t]}],"min-w":[{"min-w":[Yt,t,"min","max","fit"]}],"max-w":[{"max-w":[Yt,t,"none","full","min","max","fit","prose",{screen:[Kc]},Kc]}],h:[{h:[Yt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Yt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Yt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Yt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Kc,Wc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Cb]}],"font-family":[{font:[Sg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Yt]}],"line-clamp":[{"line-clamp":["none",Kd,Cb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zl,Yt]}],"list-image":[{"list-image":["none",Yt]}],"list-style-type":[{list:["none","disc","decimal",Yt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zl,Wc]}],"underline-offset":[{"underline-offset":["auto",Zl,Yt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),D0e]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",P0e]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},M0e]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Zl,Yt]}],"outline-w":[{outline:[Zl,Wc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Zl,Wc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Kc,j0e]}],"shadow-color":[{shadow:[Sg]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...k(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":k()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Kc,Yt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Yt]}],duration:[{duration:N()}],ease:[{ease:["linear","in","out","in-out",Yt]}],delay:[{delay:N()}],animate:[{animate:["none","spin","ping","pulse","bounce",Yt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[wg,Yt]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Yt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Yt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Yt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Zl,Wc,Cb]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const se=S0e(B0e);function kd(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function vv(e){if(!kd(e))return e;const t={};for(const r in e)t[r]=vv(e[r]);return t}function Ne(e,t){if(kd(t)&&Object.keys(t).length===0)return vv({...e,...t});const r={...e,...t};if(kd(t)&&kd(e))for(const n in t)kd(t[n])&&n in e&&kd(e[n])?r[n]=Ne(e[n],t[n]):r[n]=kd(t[n])?vv(t[n]):t[n];return r}const $0e={root:{base:"divide-y divide-gray-200 border-gray-200 dark:divide-gray-700 dark:border-gray-700",flush:{off:"rounded-lg border",on:"border-b"}},content:{base:"p-5 first:rounded-t-lg last:rounded-b-lg dark:bg-gray-900"},title:{arrow:{base:"h-6 w-6 shrink-0",open:{off:"",on:"rotate-180"}},base:"flex w-full items-center justify-between p-5 text-left font-medium text-gray-500 first:rounded-t-lg last:rounded-b-lg dark:text-gray-400",flush:{off:"hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:hover:bg-gray-800 dark:focus:ring-gray-800",on:"bg-transparent dark:bg-transparent"},heading:"",open:{off:"",on:"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-white"}}},H0e={base:"flex flex-col gap-2 p-4 text-sm",borderAccent:"border-t-4",closeButton:{base:"-m-1.5 ml-auto inline-flex h-8 w-8 rounded-lg p-1.5 focus:ring-2",icon:"h-5 w-5",color:{info:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",gray:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white",failure:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",success:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",warning:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",red:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",green:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",yellow:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",blue:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",pink:"bg-pink-100 text-pink-500 hover:bg-pink-200 focus:ring-pink-400 dark:bg-pink-200 dark:text-pink-600 dark:hover:bg-pink-300",lime:"bg-lime-100 text-lime-500 hover:bg-lime-200 focus:ring-lime-400 dark:bg-lime-200 dark:text-lime-600 dark:hover:bg-lime-300",dark:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-200 dark:text-gray-600 dark:hover:bg-gray-300",indigo:"bg-indigo-100 text-indigo-500 hover:bg-indigo-200 focus:ring-indigo-400 dark:bg-indigo-200 dark:text-indigo-600 dark:hover:bg-indigo-300",purple:"bg-purple-100 text-purple-500 hover:bg-purple-200 focus:ring-purple-400 dark:bg-purple-200 dark:text-purple-600 dark:hover:bg-purple-300",teal:"bg-teal-100 text-teal-500 hover:bg-teal-200 focus:ring-teal-400 dark:bg-teal-200 dark:text-teal-600 dark:hover:bg-teal-300",light:"bg-gray-50 text-gray-500 hover:bg-gray-100 focus:ring-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:hover:text-white"}},color:{info:"border-cyan-500 bg-cyan-100 text-cyan-700 dark:bg-cyan-200 dark:text-cyan-800",gray:"border-gray-500 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",failure:"border-red-500 bg-red-100 text-red-700 dark:bg-red-200 dark:text-red-800",success:"border-green-500 bg-green-100 text-green-700 dark:bg-green-200 dark:text-green-800",warning:"border-yellow-500 bg-yellow-100 text-yellow-700 dark:bg-yellow-200 dark:text-yellow-800",red:"border-red-500 bg-red-100 text-red-700 dark:bg-red-200 dark:text-red-800",green:"border-green-500 bg-green-100 text-green-700 dark:bg-green-200 dark:text-green-800",yellow:"border-yellow-500 bg-yellow-100 text-yellow-700 dark:bg-yellow-200 dark:text-yellow-800",blue:"border-blue-500 bg-blue-100 text-blue-700 dark:bg-blue-200 dark:text-blue-800",cyan:"border-cyan-500 bg-cyan-100 text-cyan-700 dark:bg-cyan-200 dark:text-cyan-800",pink:"border-pink-500 bg-pink-100 text-pink-700 dark:bg-pink-200 dark:text-pink-800",lime:"border-lime-500 bg-lime-100 text-lime-700 dark:bg-lime-200 dark:text-lime-800",dark:"border-gray-600 bg-gray-800 text-gray-200 dark:bg-gray-900 dark:text-gray-300",indigo:"border-indigo-500 bg-indigo-100 text-indigo-700 dark:bg-indigo-200 dark:text-indigo-800",purple:"border-purple-500 bg-purple-100 text-purple-700 dark:bg-purple-200 dark:text-purple-800",teal:"border-teal-500 bg-teal-100 text-teal-700 dark:bg-teal-200 dark:text-teal-800",light:"border-gray-400 bg-gray-50 text-gray-600 dark:bg-gray-500 dark:text-gray-200"},icon:"mr-3 inline h-5 w-5 flex-shrink-0",rounded:"rounded-lg",wrapper:"flex items-center"},z0e={root:{base:"flex items-center justify-center space-x-4 rounded",bordered:"p-1 ring-2",rounded:"rounded-full",color:{dark:"ring-gray-800 dark:ring-gray-800",failure:"ring-red-500 dark:ring-red-700",gray:"ring-gray-500 dark:ring-gray-400",info:"ring-cyan-400 dark:ring-cyan-800",light:"ring-gray-300 dark:ring-gray-500",purple:"ring-purple-500 dark:ring-purple-600",success:"ring-green-500 dark:ring-green-500",warning:"ring-yellow-300 dark:ring-yellow-500",pink:"ring-pink-500 dark:ring-pink-500"},img:{base:"rounded",off:"relative overflow-hidden bg-gray-100 dark:bg-gray-600",on:"",placeholder:"absolute -bottom-1 h-auto w-auto text-gray-400"},size:{xs:"h-6 w-6",sm:"h-8 w-8",md:"h-10 w-10",lg:"h-20 w-20",xl:"h-36 w-36"},stacked:"ring-2 ring-gray-300 dark:ring-gray-500",statusPosition:{"bottom-left":"-bottom-1 -left-1","bottom-center":"-bottom-1","bottom-right":"-bottom-1 -right-1","top-left":"-left-1 -top-1","top-center":"-top-1","top-right":"-right-1 -top-1","center-right":"-right-1",center:"","center-left":"-left-1"},status:{away:"bg-yellow-400",base:"absolute h-3.5 w-3.5 rounded-full border-2 border-white dark:border-gray-800",busy:"bg-red-400",offline:"bg-gray-400",online:"bg-green-400"},initials:{text:"font-medium text-gray-600 dark:text-gray-300",base:"relative inline-flex items-center justify-center overflow-hidden bg-gray-100 dark:bg-gray-600"}},group:{base:"flex -space-x-4"},groupCounter:{base:"relative flex h-10 w-10 items-center justify-center rounded-full bg-gray-700 text-xs font-medium text-white ring-2 ring-gray-300 hover:bg-gray-600 dark:ring-gray-500"}},G0e={root:{base:"flex h-fit items-center gap-1 font-semibold",color:{info:"bg-cyan-100 text-cyan-800 group-hover:bg-cyan-200 dark:bg-cyan-200 dark:text-cyan-800 dark:group-hover:bg-cyan-300",gray:"bg-gray-100 text-gray-800 group-hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:group-hover:bg-gray-600",failure:"bg-red-100 text-red-800 group-hover:bg-red-200 dark:bg-red-200 dark:text-red-900 dark:group-hover:bg-red-300",success:"bg-green-100 text-green-800 group-hover:bg-green-200 dark:bg-green-200 dark:text-green-900 dark:group-hover:bg-green-300",warning:"bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 dark:bg-yellow-200 dark:text-yellow-900 dark:group-hover:bg-yellow-300",indigo:"bg-indigo-100 text-indigo-800 group-hover:bg-indigo-200 dark:bg-indigo-200 dark:text-indigo-900 dark:group-hover:bg-indigo-300",purple:"bg-purple-100 text-purple-800 group-hover:bg-purple-200 dark:bg-purple-200 dark:text-purple-900 dark:group-hover:bg-purple-300",pink:"bg-pink-100 text-pink-800 group-hover:bg-pink-200 dark:bg-pink-200 dark:text-pink-900 dark:group-hover:bg-pink-300",blue:"bg-blue-100 text-blue-800 group-hover:bg-blue-200 dark:bg-blue-200 dark:text-blue-900 dark:group-hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-800 group-hover:bg-cyan-200 dark:bg-cyan-200 dark:text-cyan-900 dark:group-hover:bg-cyan-300",dark:"bg-gray-600 text-gray-100 group-hover:bg-gray-500 dark:bg-gray-900 dark:text-gray-200 dark:group-hover:bg-gray-700",light:"bg-gray-200 text-gray-800 group-hover:bg-gray-300 dark:bg-gray-400 dark:text-gray-900 dark:group-hover:bg-gray-500",green:"bg-green-100 text-green-800 group-hover:bg-green-200 dark:bg-green-200 dark:text-green-900 dark:group-hover:bg-green-300",lime:"bg-lime-100 text-lime-800 group-hover:bg-lime-200 dark:bg-lime-200 dark:text-lime-900 dark:group-hover:bg-lime-300",red:"bg-red-100 text-red-800 group-hover:bg-red-200 dark:bg-red-200 dark:text-red-900 dark:group-hover:bg-red-300",teal:"bg-teal-100 text-teal-800 group-hover:bg-teal-200 dark:bg-teal-200 dark:text-teal-900 dark:group-hover:bg-teal-300",yellow:"bg-yellow-100 text-yellow-800 group-hover:bg-yellow-200 dark:bg-yellow-200 dark:text-yellow-900 dark:group-hover:bg-yellow-300"},href:"group",size:{xs:"p-1 text-xs",sm:"p-1.5 text-sm"}},icon:{off:"rounded px-2 py-0.5",on:"rounded-full p-1.5",size:{xs:"h-3 w-3",sm:"h-3.5 w-3.5"}}},W0e={root:{base:"text-xl font-semibold italic text-gray-900 dark:text-white"}},K0e={root:{base:"",list:"flex items-center"},item:{base:"group flex items-center",chevron:"mx-1 h-4 w-4 text-gray-400 group-first:hidden md:mx-2",href:{off:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",on:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},icon:"mr-2 h-4 w-4"}},q0e={base:"group relative flex items-stretch justify-center p-0.5 text-center font-medium transition-[color,background-color,border-color,text-decoration-color,fill,stroke,box-shadow] focus:z-10 focus:outline-none",fullSized:"w-full",color:{dark:"border border-transparent bg-gray-800 text-white focus:ring-4 focus:ring-gray-300 enabled:hover:bg-gray-900 dark:border-gray-700 dark:bg-gray-800 dark:focus:ring-gray-800 dark:enabled:hover:bg-gray-700",failure:"border border-transparent bg-red-700 text-white focus:ring-4 focus:ring-red-300 enabled:hover:bg-red-800 dark:bg-red-600 dark:focus:ring-red-900 dark:enabled:hover:bg-red-700",gray:":ring-cyan-700 border border-gray-200 bg-white text-gray-900 focus:text-cyan-700 focus:ring-4 enabled:hover:bg-gray-100 enabled:hover:text-cyan-700 dark:border-gray-600 dark:bg-transparent dark:text-gray-400 dark:enabled:hover:bg-gray-700 dark:enabled:hover:text-white",info:"border border-transparent bg-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-800 dark:bg-cyan-600 dark:focus:ring-cyan-800 dark:enabled:hover:bg-cyan-700",light:"border border-gray-300 bg-white text-gray-900 focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-600 dark:text-white dark:focus:ring-gray-700 dark:enabled:hover:border-gray-700 dark:enabled:hover:bg-gray-700",purple:"border border-transparent bg-purple-700 text-white focus:ring-4 focus:ring-purple-300 enabled:hover:bg-purple-800 dark:bg-purple-600 dark:focus:ring-purple-900 dark:enabled:hover:bg-purple-700",success:"border border-transparent bg-green-700 text-white focus:ring-4 focus:ring-green-300 enabled:hover:bg-green-800 dark:bg-green-600 dark:focus:ring-green-800 dark:enabled:hover:bg-green-700",warning:"border border-transparent bg-yellow-400 text-white focus:ring-4 focus:ring-yellow-300 enabled:hover:bg-yellow-500 dark:focus:ring-yellow-900",blue:"border border-transparent bg-blue-700 text-white focus:ring-4 focus:ring-blue-300 enabled:hover:bg-blue-800 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",cyan:"border border-cyan-300 bg-white text-cyan-900 focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-cyan-100 dark:border-cyan-600 dark:bg-cyan-600 dark:text-white dark:focus:ring-cyan-700 dark:enabled:hover:border-cyan-700 dark:enabled:hover:bg-cyan-700",green:"border border-green-300 bg-white text-green-900 focus:ring-4 focus:ring-green-300 enabled:hover:bg-green-100 dark:border-green-600 dark:bg-green-600 dark:text-white dark:focus:ring-green-700 dark:enabled:hover:border-green-700 dark:enabled:hover:bg-green-700",indigo:"border border-indigo-300 bg-white text-indigo-900 focus:ring-4 focus:ring-indigo-300 enabled:hover:bg-indigo-100 dark:border-indigo-600 dark:bg-indigo-600 dark:text-white dark:focus:ring-indigo-700 dark:enabled:hover:border-indigo-700 dark:enabled:hover:bg-indigo-700",lime:"border border-lime-300 bg-white text-lime-900 focus:ring-4 focus:ring-lime-300 enabled:hover:bg-lime-100 dark:border-lime-600 dark:bg-lime-600 dark:text-white dark:focus:ring-lime-700 dark:enabled:hover:border-lime-700 dark:enabled:hover:bg-lime-700",pink:"border border-pink-300 bg-white text-pink-900 focus:ring-4 focus:ring-pink-300 enabled:hover:bg-pink-100 dark:border-pink-600 dark:bg-pink-600 dark:text-white dark:focus:ring-pink-700 dark:enabled:hover:border-pink-700 dark:enabled:hover:bg-pink-700",red:"border border-red-300 bg-white text-red-900 focus:ring-4 focus:ring-red-300 enabled:hover:bg-red-100 dark:border-red-600 dark:bg-red-600 dark:text-white dark:focus:ring-red-700 dark:enabled:hover:border-red-700 dark:enabled:hover:bg-red-700",teal:"border border-teal-300 bg-white text-teal-900 focus:ring-4 focus:ring-teal-300 enabled:hover:bg-teal-100 dark:border-teal-600 dark:bg-teal-600 dark:text-white dark:focus:ring-teal-700 dark:enabled:hover:border-teal-700 dark:enabled:hover:bg-teal-700",yellow:"border border-yellow-300 bg-white text-yellow-900 focus:ring-4 focus:ring-yellow-300 enabled:hover:bg-yellow-100 dark:border-yellow-600 dark:bg-yellow-600 dark:text-white dark:focus:ring-yellow-700 dark:enabled:hover:border-yellow-700 dark:enabled:hover:bg-yellow-700"},disabled:"cursor-not-allowed opacity-50",isProcessing:"cursor-wait",spinnerSlot:"absolute top-0 flex h-full items-center",spinnerLeftPosition:{xs:"left-2",sm:"left-3",md:"left-4",lg:"left-5",xl:"left-6"},gradient:{cyan:"bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-br dark:focus:ring-cyan-800",failure:"bg-gradient-to-r from-red-400 via-red-500 to-red-600 text-white focus:ring-4 focus:ring-red-300 enabled:hover:bg-gradient-to-br dark:focus:ring-red-800",info:"bg-gradient-to-r from-cyan-500 via-cyan-600 to-cyan-700 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-br dark:focus:ring-cyan-800",lime:"bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 text-gray-900 focus:ring-4 focus:ring-lime-300 enabled:hover:bg-gradient-to-br dark:focus:ring-lime-800",pink:"bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 text-white focus:ring-4 focus:ring-pink-300 enabled:hover:bg-gradient-to-br dark:focus:ring-pink-800",purple:"bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 text-white focus:ring-4 focus:ring-purple-300 enabled:hover:bg-gradient-to-br dark:focus:ring-purple-800",success:"bg-gradient-to-r from-green-400 via-green-500 to-green-600 text-white focus:ring-4 focus:ring-green-300 enabled:hover:bg-gradient-to-br dark:focus:ring-green-800",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 text-white focus:ring-4 focus:ring-teal-300 enabled:hover:bg-gradient-to-br dark:focus:ring-teal-800"},gradientDuoTone:{cyanToBlue:"bg-gradient-to-r from-cyan-500 to-cyan-500 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-bl dark:focus:ring-cyan-800",greenToBlue:"bg-gradient-to-br from-green-400 to-cyan-600 text-white focus:ring-4 focus:ring-green-200 enabled:hover:bg-gradient-to-bl dark:focus:ring-green-800",pinkToOrange:"bg-gradient-to-br from-pink-500 to-orange-400 text-white focus:ring-4 focus:ring-pink-200 enabled:hover:bg-gradient-to-bl dark:focus:ring-pink-800",purpleToBlue:"bg-gradient-to-br from-purple-600 to-cyan-500 text-white focus:ring-4 focus:ring-cyan-300 enabled:hover:bg-gradient-to-bl dark:focus:ring-cyan-800",purpleToPink:"bg-gradient-to-r from-purple-500 to-pink-500 text-white focus:ring-4 focus:ring-purple-200 enabled:hover:bg-gradient-to-l dark:focus:ring-purple-800",redToYellow:"bg-gradient-to-r from-red-200 via-red-300 to-yellow-200 text-gray-900 focus:ring-4 focus:ring-red-100 enabled:hover:bg-gradient-to-bl dark:focus:ring-red-400",tealToLime:"bg-gradient-to-r from-teal-200 to-lime-200 text-gray-900 focus:ring-4 focus:ring-lime-200 enabled:hover:bg-gradient-to-l enabled:hover:from-teal-200 enabled:hover:to-lime-200 enabled:hover:text-gray-900 dark:focus:ring-teal-700"},inner:{base:"flex items-stretch transition-all duration-200",position:{none:"",start:"rounded-r-none",middle:"rounded-none",end:"rounded-l-none"},outline:"border border-transparent",isProcessingPadding:{xs:"pl-8",sm:"pl-10",md:"pl-12",lg:"pl-16",xl:"pl-20"}},label:"ml-2 inline-flex h-4 w-4 items-center justify-center rounded-full bg-cyan-200 text-xs font-semibold text-cyan-800",outline:{color:{gray:"border border-gray-900 dark:border-white",default:"border-0",light:""},off:"",on:"flex w-full justify-center bg-white text-gray-900 transition-all duration-75 ease-in group-enabled:group-hover:bg-opacity-0 group-enabled:group-hover:text-inherit dark:bg-gray-900 dark:text-white",pill:{off:"rounded-md",on:"rounded-full"}},pill:{off:"rounded-lg",on:"rounded-full"},size:{xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base",xl:"px-6 py-3 text-base"}},Y0e={base:"inline-flex",position:{none:"",start:"rounded-r-none focus:ring-2",middle:"rounded-none border-l-0 pl-0 focus:ring-2",end:"rounded-l-none border-l-0 pl-0 focus:ring-2"}},X0e={root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}},J0e={root:{base:"relative h-full w-full",leftControl:"absolute left-0 top-0 flex h-full items-center justify-center px-4 focus:outline-none",rightControl:"absolute right-0 top-0 flex h-full items-center justify-center px-4 focus:outline-none"},indicators:{active:{off:"bg-white/50 hover:bg-white dark:bg-gray-800/50 dark:hover:bg-gray-800",on:"bg-white dark:bg-gray-800"},base:"h-3 w-3 rounded-full",wrapper:"absolute bottom-5 left-1/2 flex -translate-x-1/2 space-x-3"},item:{base:"absolute left-1/2 top-1/2 block w-full -translate-x-1/2 -translate-y-1/2",wrapper:{off:"w-full flex-shrink-0 transform cursor-default snap-center",on:"w-full flex-shrink-0 transform cursor-grab snap-center"}},control:{base:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:outline-none group-focus:ring-4 group-focus:ring-white dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70 sm:h-10 sm:w-10",icon:"h-5 w-5 text-white dark:text-gray-800 sm:h-6 sm:w-6"},scrollContainer:{base:"flex h-full snap-mandatory overflow-y-hidden overflow-x-scroll scroll-smooth rounded-lg",snap:"snap-x"}},Q0e={root:{base:"h-4 w-4 rounded border border-gray-300 bg-gray-100 focus:ring-2 dark:border-gray-600 dark:bg-gray-700",color:{default:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-gray-800 dark:focus:ring-cyan-600",dark:"text-gray-800 focus:ring-gray-800 dark:ring-offset-gray-800 dark:focus:ring-gray-800",failure:"text-red-900 focus:ring-red-900 dark:ring-offset-red-900 dark:focus:ring-red-900",gray:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",info:"text-cyan-800 focus:ring-cyan-800 dark:ring-offset-gray-800 dark:focus:ring-cyan-800",light:"text-gray-900 focus:ring-gray-900 dark:ring-offset-gray-900 dark:focus:ring-gray-900",purple:"text-purple-600 focus:ring-purple-600 dark:ring-offset-purple-600 dark:focus:ring-purple-600",success:"text-green-800 focus:ring-green-800 dark:ring-offset-green-800 dark:focus:ring-green-800",warning:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400",blue:"text-blue-700 focus:ring-blue-600 dark:ring-offset-blue-700 dark:focus:ring-blue-700",cyan:"text-cyan-600 focus:ring-cyan-600 dark:ring-offset-cyan-600 dark:focus:ring-cyan-600",green:"text-green-600 focus:ring-green-600 dark:ring-offset-green-600 dark:focus:ring-green-600",indigo:"text-indigo-700 focus:ring-indigo-700 dark:ring-offset-indigo-700 dark:focus:ring-indigo-700",lime:"text-lime-700 focus:ring-lime-700 dark:ring-offset-lime-700 dark:focus:ring-lime-700",pink:"text-pink-600 focus:ring-pink-600 dark:ring-offset-pink-600 dark:focus:ring-pink-600",red:"text-red-600 focus:ring-red-600 dark:ring-offset-red-600 dark:focus:ring-red-600",teal:"text-teal-600 focus:ring-teal-600 dark:ring-offset-teal-600 dark:focus:ring-teal-600",yellow:"text-yellow-400 focus:ring-yellow-400 dark:ring-offset-yellow-400 dark:focus:ring-yellow-400"}}},Z0e={button:{base:"inline-flex w-full items-center justify-center rounded-lg bg-blue-700 px-5 py-3 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",label:"text-center text-sm font-medium text-white sm:w-auto"},withIcon:{base:"absolute end-2 top-1/2 inline-flex -translate-y-1/2 items-center justify-center rounded-lg p-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800",icon:{defaultIcon:"h-4 w-4",successIcon:"h-4 w-4 text-blue-700 dark:text-blue-500"}},withIconText:{base:"absolute end-2.5 top-1/2 inline-flex -translate-y-1/2 items-center justify-center rounded-lg border border-gray-200 bg-white px-2.5 py-2 text-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700",icon:{defaultIcon:"me-1.5 h-3 w-3",successIcon:"me-1.5 h-3 w-3 text-blue-700 dark:text-blue-500"},label:{base:"inline-flex items-center",defaultText:"text-xs font-semibold",successText:"text-xs font-semibold text-blue-700 dark:text-blue-500"}}},ebe={root:{base:"rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700",icon:"h-5 w-5"}},tbe={root:{base:"relative"},popup:{root:{base:"absolute top-10 z-50 block pt-2",inline:"relative top-0 z-auto",inner:"inline-block rounded-lg bg-white p-4 shadow-lg dark:bg-gray-700"},header:{base:"",title:"px-2 py-3 text-center font-semibold text-gray-900 dark:text-white",selectors:{base:"mb-2 flex justify-between",button:{base:"rounded-lg bg-white px-5 py-2.5 text-sm font-semibold text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",prev:"",next:"",view:""}}},view:{base:"p-1"},footer:{base:"mt-2 flex space-x-2",button:{base:"w-full rounded-lg px-5 py-2 text-center text-sm font-medium focus:ring-4 focus:ring-cyan-300",today:"bg-cyan-700 text-white hover:bg-cyan-800 dark:bg-cyan-600 dark:hover:bg-cyan-700",clear:"border border-gray-300 bg-white text-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600"}}},views:{days:{header:{base:"mb-1 grid grid-cols-7",title:"h-6 text-center text-sm font-medium leading-6 text-gray-500 dark:text-gray-400"},items:{base:"grid w-64 grid-cols-7",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},months:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},years:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}},decades:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-cyan-700 text-white hover:bg-cyan-600",disabled:"text-gray-500"}}}}},rbe={root:{base:"fixed z-40 overflow-y-auto bg-white p-4 transition-transform dark:bg-gray-800",backdrop:"fixed inset-0 z-30 bg-gray-900/50 dark:bg-gray-900/80",edge:"bottom-16",position:{top:{on:"left-0 right-0 top-0 w-full transform-none",off:"left-0 right-0 top-0 w-full -translate-y-full"},right:{on:"right-0 top-0 h-screen w-80 transform-none",off:"right-0 top-0 h-screen w-80 translate-x-full"},bottom:{on:"bottom-0 left-0 right-0 w-full transform-none",off:"bottom-0 left-0 right-0 w-full translate-y-full"},left:{on:"left-0 top-0 h-screen w-80 transform-none",off:"left-0 top-0 h-screen w-80 -translate-x-full"}}},header:{inner:{closeButton:"absolute end-2.5 top-2.5 flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",closeIcon:"h-4 w-4",titleIcon:"me-2.5 h-4 w-4",titleText:"mb-4 inline-flex items-center text-base font-semibold text-gray-500 dark:text-gray-400"},collapsed:{on:"hidden",off:"block"}},items:{base:""}},ou={arrowIcon:"ml-2 h-4 w-4",content:"py-1 focus:outline-none",floating:{animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"z-10 w-fit divide-y divide-gray-100 rounded shadow focus:outline-none",content:"py-1 text-sm text-gray-700 dark:text-gray-200",divider:"my-1 h-px bg-gray-100 dark:bg-gray-600",header:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200",hidden:"invisible opacity-0",item:{container:"",base:"flex w-full cursor-pointer items-center justify-start px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:bg-gray-600 dark:focus:text-white",icon:"mr-2 h-4 w-4"},style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},target:"w-fit"},inlineWrapper:"flex items-center"},nbe={root:{base:"flex"},field:{base:"relative w-full",input:{base:"block w-full overflow-hidden rounded-lg border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"sm:text-xs",md:"text-sm",lg:"sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},ibe={input:{default:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-gray-300 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-gray-300 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:focus:border-blue-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",md:"peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"}},success:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-green-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:bg-gray-700 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-green-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:bg-gray-700 dark:text-white dark:focus:border-green-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-green-600 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none rounded-lg border border-green-600 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-green-600 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500",md:"peer block w-full appearance-none border-0 border-b-2 border-green-600 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-green-600 focus:outline-none focus:ring-0 dark:border-green-500 dark:text-white dark:focus:border-green-500"}},error:{filled:{sm:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-red-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:bg-gray-700 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none rounded-t-lg border-0 border-b-2 border-red-600 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:bg-gray-700 dark:text-white dark:focus:border-red-500"},outlined:{sm:"peer block w-full appearance-none rounded-lg border border-red-600 bg-transparent px-2.5 pb-2.5 pt-4 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none rounded-lg border border-red-600 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500"},standard:{sm:"peer block w-full appearance-none border-0 border-b-2 border-red-600 bg-transparent px-0 py-2.5 text-xs text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500",md:"peer block w-full appearance-none border-0 border-b-2 border-red-600 bg-transparent px-0 py-2.5 text-sm text-gray-900 focus:border-red-600 focus:outline-none focus:ring-0 dark:border-red-500 dark:text-white dark:focus:border-red-500"}}},label:{default:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"}},success:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-green-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-green-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-green-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-green-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-green-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-green-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-green-500"}},error:{filled:{sm:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-red-500",md:"absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75 dark:text-red-500"},outlined:{sm:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-red-500",md:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 dark:bg-gray-900 dark:text-red-500"},standard:{sm:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-xs text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-red-500",md:"absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 text-sm text-red-600 transition-transform duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 dark:text-red-500"}}},helperText:{default:"mt-2 text-xs text-gray-600 dark:text-gray-400",success:"mt-2 text-xs text-green-600 dark:text-green-400",error:"mt-2 text-xs text-red-600 dark:text-red-400"}},obe={root:{base:"w-full rounded-lg bg-white shadow dark:bg-gray-800 md:flex md:items-center md:justify-between",container:"w-full p-6",bgDark:"bg-gray-800"},groupLink:{base:"flex flex-wrap text-sm text-gray-500 dark:text-white",link:{base:"me-4 last:mr-0 md:mr-6",href:"hover:underline"},col:"flex-col space-y-4"},icon:{base:"text-gray-500 dark:hover:text-white",size:"h-5 w-5"},title:{base:"mb-6 text-sm font-semibold uppercase text-gray-500 dark:text-white"},divider:{base:"my-6 w-full border-gray-200 dark:border-gray-700 sm:mx-auto lg:my-8"},copyright:{base:"text-sm text-gray-500 dark:text-gray-400 sm:text-center",href:"ml-1 hover:underline",span:"ml-1"},brand:{base:"mb-4 flex items-center sm:mb-0",img:"mr-3 h-8",span:"self-center whitespace-nowrap text-2xl font-semibold text-gray-800 dark:text-white"}},abe={root:{base:"mt-2 text-sm",colors:{gray:"text-gray-500 dark:text-gray-400",info:"text-cyan-700 dark:text-cyan-800",success:"text-green-600 dark:text-green-500",failure:"text-red-600 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600"}}},sbe={root:{base:"my-8 h-px border-0 bg-gray-200 dark:bg-gray-700"},trimmed:{base:"mx-auto my-4 h-1 w-48 rounded border-0 bg-gray-100 dark:bg-gray-700 md:my-10"},icon:{base:"inline-flex w-full items-center justify-center",hrLine:"my-8 h-1 w-64 rounded border-0 bg-gray-200 dark:bg-gray-700",icon:{base:"absolute left-1/2 -translate-x-1/2 bg-white px-4 dark:bg-gray-900",icon:"h-4 w-4 text-gray-700 dark:text-gray-300"}},text:{base:"inline-flex w-full items-center justify-center",hrLine:"my-8 h-px w-64 border-0 bg-gray-200 dark:bg-gray-700",text:"absolute left-1/2 -translate-x-1/2 bg-white px-3 font-medium text-gray-900 dark:bg-gray-900 dark:text-white"},square:{base:"mx-auto my-8 h-8 w-8 rounded border-0 bg-gray-200 dark:bg-gray-700 md:my-12"}},lbe={root:{base:"rounded-lg border border-gray-200 bg-gray-100 px-2 py-1.5 text-xs font-semibold text-gray-800 dark:border-gray-500 dark:bg-gray-600 dark:text-gray-100",icon:"inline-block"}},cbe={root:{base:"text-sm font-medium",disabled:"opacity-50",colors:{default:"text-gray-900 dark:text-white",info:"text-cyan-500 dark:text-cyan-600",failure:"text-red-700 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600",success:"text-green-700 dark:text-green-500"}}},ube={root:{base:"list-inside space-y-1 text-gray-500 dark:text-gray-400",ordered:{off:"list-disc",on:"list-decimal"},horizontal:"flex list-none flex-wrap items-center justify-center space-x-4 space-y-0",unstyled:"list-none",nested:"mt-2 ps-5"},item:{withIcon:{off:"",on:"flex items-center"},icon:"me-2 h-3.5 w-3.5 flex-shrink-0"}},dbe={root:{base:"list-none rounded-lg border border-gray-200 bg-white text-left text-sm font-medium text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},item:{base:"[&>*]:first:rounded-t-lg [&>*]:last:rounded-b-lg [&>*]:last:border-b-0",link:{base:"flex w-full items-center border-b border-gray-200 px-4 py-2 dark:border-gray-600",active:{off:"hover:bg-gray-100 hover:text-cyan-700 focus:text-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:text-white dark:focus:ring-gray-500",on:"bg-cyan-700 text-white dark:bg-gray-800"},disabled:{off:"",on:"cursor-not-allowed bg-gray-100 text-gray-900 hover:bg-gray-100 hover:text-gray-900 focus:text-gray-900"},href:{off:"",on:""},icon:"mr-2 h-4 w-4 fill-current"}}},JE={root:{base:"bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"block py-2 pl-3 pr-4 md:p-0",active:{on:"bg-cyan-700 text-white dark:text-white md:bg-transparent md:text-cyan-700",off:"border-b border-gray-100 text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-cyan-700 md:dark:hover:bg-transparent md:dark:hover:text-white"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},hbe={...JE,dropdown:{base:"",toggle:{...ou,floating:{...ou.floating,base:se(ou.floating.base,"mt-2 block"),content:se(ou.floating.content,"text-gray-500 dark:text-gray-400"),style:{...ou.floating.style,auto:se(ou.floating.style.auto,"text-gray-500 dark:text-gray-400")}},inlineWrapper:se(ou.inlineWrapper,"flex w-full items-center justify-between")}},dropdownToggle:{base:se(JE.link.base,JE.link.active.off,"flex w-full items-center justify-between")}},fbe={root:{base:"fixed inset-x-0 top-0 z-50 h-screen overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900 bg-opacity-50 dark:bg-opacity-80",off:"hidden"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},content:{base:"relative h-full w-full p-4 md:h-auto",inner:"relative flex max-h-[90dvh] flex-col rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"flex-1 overflow-auto p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t border-b p-5 dark:border-gray-600",popup:"border-b-0 p-2",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"}},pbe={base:"",layout:{table:{base:"text-sm text-gray-700 dark:text-gray-400",span:"font-semibold text-gray-900 dark:text-white"}},pages:{base:"xs:mt-0 mt-2 inline-flex items-center -space-x-px",showIcon:"inline-flex",previous:{base:"ml-0 rounded-l-lg border border-gray-300 bg-white px-3 py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",icon:"h-5 w-5"},next:{base:"rounded-r-lg border border-gray-300 bg-white px-3 py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",icon:"h-5 w-5"},selector:{base:"w-12 border border-gray-300 bg-white py-2 leading-tight text-gray-500 enabled:hover:bg-gray-100 enabled:hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 enabled:dark:hover:bg-gray-700 enabled:dark:hover:text-white",active:"bg-cyan-50 text-cyan-600 hover:bg-cyan-100 hover:text-cyan-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white",disabled:"cursor-not-allowed opacity-50"}}},mbe={base:"absolute z-20 inline-block w-max max-w-[100vw] bg-white outline-none border border-gray-200 rounded-lg shadow-sm dark:border-gray-600 dark:bg-gray-800",content:"z-10 overflow-hidden rounded-[7px]",arrow:{base:"absolute h-2 w-2 z-0 rotate-45 mix-blend-lighten bg-white border border-gray-200 dark:border-gray-600 dark:bg-gray-800 dark:mix-blend-color",placement:"-4px"}},gbe={base:"w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",label:"mb-1 flex justify-between font-medium dark:text-white",bar:"space-x-2 rounded-full text-center font-medium leading-none text-cyan-300 dark:text-cyan-100",color:{dark:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600",red:"bg-red-600 dark:bg-red-500",green:"bg-green-600 dark:bg-green-500",yellow:"bg-yellow-400",indigo:"bg-indigo-600 dark:bg-indigo-500",purple:"bg-purple-600 dark:bg-purple-500",cyan:"bg-cyan-600",gray:"bg-gray-500",lime:"bg-lime-600",pink:"bg-pink-500",teal:"bg-teal-600"},size:{sm:"h-1.5",md:"h-2.5",lg:"h-4",xl:"h-6"}},ybe={root:{base:"h-4 w-4 border border-gray-300 text-cyan-600 focus:ring-2 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:bg-cyan-600 dark:focus:ring-cyan-600"}},vbe={root:{base:"flex"},field:{base:"relative w-full",input:{base:"w-full cursor-pointer appearance-none rounded-lg bg-gray-200 dark:bg-gray-700",sizes:{sm:"h-1",md:"h-2",lg:"h-3"}}}},bbe={root:{base:"flex items-center"},star:{empty:"text-gray-300 dark:text-gray-500",filled:"text-yellow-400",sizes:{sm:"h-5 w-5",md:"h-7 w-7",lg:"h-10 w-10"}}},Ebe={base:"flex items-center",label:"text-sm font-medium text-cyan-600 dark:text-cyan-500",progress:{base:"mx-4 h-5 w-2/4 rounded bg-gray-200 dark:bg-gray-700",fill:"h-5 rounded bg-yellow-400",label:"text-sm font-medium text-cyan-600 dark:text-cyan-500"}},_be={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},wbe={root:{base:"h-full",collapsed:{on:"w-16",off:"w-64"},inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-gray-50 px-3 py-4 dark:bg-gray-800"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:{base:"h-6 w-6 transition delay-0 ease-in-out",open:{on:"rotate-180",off:""}}},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg bg-gray-100 p-4 dark:bg-gray-700",color:{blue:"bg-cyan-50 dark:bg-cyan-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"flex-1 whitespace-nowrap px-3"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:"",listItem:""},items:{base:""},itemGroup:{base:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700"},logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},Sbe={base:"inline animate-spin text-gray-200",color:{failure:"fill-red-600",gray:"fill-gray-600",info:"fill-cyan-600",pink:"fill-pink-600",purple:"fill-purple-600",success:"fill-green-500",warning:"fill-yellow-400"},light:{off:{base:"dark:text-gray-600",color:{failure:"",gray:"dark:fill-gray-300",info:"",pink:"",purple:"",success:"",warning:""}},on:{base:"",color:{failure:"",gray:"",info:"",pink:"",purple:"",success:"",warning:""}}},size:{xs:"h-3 w-3",sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-10 w-10"}},Tbe={root:{base:"w-full text-left text-sm text-gray-500 dark:text-gray-400",shadow:"absolute left-0 top-0 -z-10 h-full w-full rounded-lg bg-white drop-shadow-md dark:bg-black",wrapper:"relative"},body:{base:"group/body",cell:{base:"px-6 py-4 group-first/body:group-first/row:first:rounded-tl-lg group-first/body:group-first/row:last:rounded-tr-lg group-last/body:group-last/row:first:rounded-bl-lg group-last/body:group-last/row:last:rounded-br-lg"}},head:{base:"group/head text-xs uppercase text-gray-700 dark:text-gray-400",cell:{base:"bg-gray-50 px-6 py-3 group-first/head:first:rounded-tl-lg group-first/head:last:rounded-tr-lg dark:bg-gray-700"}},row:{base:"group/row",hovered:"hover:bg-gray-50 dark:hover:bg-gray-600",striped:"odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700"}},Cbe={base:"flex flex-col gap-2",tablist:{base:"flex text-center",variant:{default:"flex-wrap border-b border-gray-200 dark:border-gray-700",underline:"-mb-px flex-wrap border-b border-gray-200 dark:border-gray-700",pills:"flex-wrap space-x-2 text-sm font-medium text-gray-500 dark:text-gray-400",fullWidth:"grid w-full grid-flow-col divide-x divide-gray-200 rounded-none text-sm font-medium shadow dark:divide-gray-700 dark:text-gray-400"},tabitem:{base:"flex items-center justify-center rounded-t-lg p-4 text-sm font-medium first:ml-0 focus:outline-none focus:ring-4 focus:ring-cyan-300 disabled:cursor-not-allowed disabled:text-gray-400 disabled:dark:text-gray-500",variant:{default:{base:"rounded-t-lg",active:{on:"bg-gray-100 text-cyan-600 dark:bg-gray-800 dark:text-cyan-500",off:"text-gray-500 hover:bg-gray-50 hover:text-gray-600 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300"}},underline:{base:"rounded-t-lg",active:{on:"active rounded-t-lg border-b-2 border-cyan-600 text-cyan-600 dark:border-cyan-500 dark:text-cyan-500",off:"border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"}},pills:{base:"",active:{on:"rounded-lg bg-cyan-600 text-white",off:"rounded-lg hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-white"}},fullWidth:{base:"ml-0 flex w-full rounded-none first:ml-0",active:{on:"active rounded-none bg-gray-100 p-4 text-gray-900 dark:bg-gray-700 dark:text-white",off:"rounded-none bg-white hover:bg-gray-50 hover:text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-white"}}},icon:"mr-2 h-5 w-5"}},tabitemcontainer:{base:"",variant:{default:"",underline:"",pills:"",fullWidth:""}},tabpanel:"py-3"},xbe={base:"block w-full rounded-lg border text-sm disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}},Rbe={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-cyan-500 focus:ring-cyan-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},Ibe={root:{direction:{horizontal:"sm:flex",vertical:"relative border-l border-gray-200 dark:border-gray-700"}},item:{root:{horizontal:"relative mb-6 sm:mb-0",vertical:"mb-10 ml-6"},content:{root:{base:"",horizontal:"mt-3 sm:pr-8",vertical:""},body:{base:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400"},time:{base:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},title:{base:"text-lg font-semibold text-gray-900 dark:text-white"}},point:{horizontal:"flex items-center",line:"hidden h-0.5 w-full bg-gray-200 dark:bg-gray-700 sm:flex",marker:{base:{horizontal:"absolute -left-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700",vertical:"absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700"},icon:{base:"h-3 w-3 text-cyan-600 dark:text-cyan-300",wrapper:"absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-cyan-200 ring-8 ring-white dark:bg-cyan-900 dark:ring-gray-900"}},vertical:""}}},Nbe={root:{base:"flex w-full max-w-xs items-center rounded-lg bg-white p-4 text-gray-500 shadow dark:bg-gray-800 dark:text-gray-400",closed:"opacity-0 ease-out"},toggle:{base:"-m-1.5 ml-auto inline-flex h-8 w-8 rounded-lg bg-white p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-900 focus:ring-2 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-500 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5 shrink-0"}},Abe={root:{base:"group flex rounded-lg focus:outline-none",active:{on:"cursor-pointer",off:"cursor-not-allowed opacity-50"},label:"ms-3 mt-0.5 text-start text-sm font-medium text-gray-900 dark:text-gray-300"},toggle:{base:"relative rounded-full border after:absolute after:rounded-full after:bg-white after:transition-all group-focus:ring-4 group-focus:ring-cyan-500/25",checked:{on:"after:translate-x-full after:border-white rtl:after:-translate-x-full",off:"border-gray-200 bg-gray-200 dark:border-gray-600 dark:bg-gray-700",color:{blue:"border-cyan-700 bg-cyan-700",dark:"bg-dark-700 border-dark-900",failure:"border-red-900 bg-red-700",gray:"border-gray-600 bg-gray-500",green:"border-green-700 bg-green-600",light:"bg-light-700 border-light-900",red:"border-red-900 bg-red-700",purple:"border-purple-900 bg-purple-700",success:"border-green-500 bg-green-500",yellow:"border-yellow-400 bg-yellow-400",warning:"border-yellow-600 bg-yellow-600",cyan:"border-cyan-500 bg-cyan-500",lime:"border-lime-400 bg-lime-400",indigo:"border-indigo-400 bg-indigo-400",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4",info:"border-cyan-600 bg-cyan-600",pink:"border-pink-600 bg-pink-600"}},sizes:{sm:"h-5 w-9 min-w-9 after:left-px after:top-px after:h-4 after:w-4 rtl:after:right-px",md:"h-6 w-11 min-w-11 after:left-px after:top-px after:h-5 after:w-5 rtl:after:right-px",lg:"h-7 w-14 min-w-14 after:left-1 after:top-0.5 after:h-6 after:w-6 rtl:after:right-1"}}},Obe={target:"w-fit",animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"absolute z-10 inline-block rounded-lg px-3 py-2 text-sm font-medium shadow-sm",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},content:"relative z-20"},kbe={accordion:$0e,alert:H0e,avatar:z0e,badge:G0e,blockquote:W0e,breadcrumb:K0e,button:q0e,buttonGroup:Y0e,card:X0e,carousel:J0e,checkbox:Q0e,clipboard:Z0e,datepicker:tbe,darkThemeToggle:ebe,drawer:rbe,dropdown:ou,fileInput:nbe,floatingLabel:ibe,footer:obe,helperText:abe,hr:sbe,kbd:lbe,label:cbe,listGroup:dbe,list:ube,megaMenu:hbe,modal:fbe,navbar:JE,pagination:pbe,popover:mbe,progress:gbe,radio:ybe,rangeSlider:vbe,rating:bbe,ratingAdvanced:Ebe,select:_be,textInput:Rbe,textarea:xbe,toggleSwitch:Abe,sidebar:wbe,spinner:Sbe,table:Tbe,tabs:Cbe,timeline:Ibe,toast:Nbe,tooltip:Obe},Pbe={theme:vv(kbe)};function st(){return vv(Pbe.theme)}const yq=T.createContext(void 0);function vq(){const e=T.useContext(yq);if(!e)throw new Error("useAccordionContext should be used within the AccordionPanelContext provider!");return e}const bq=({children:e,className:t,theme:r={},...n})=>{const{isOpen:i}=vq(),o=Ne(st().accordion.content,r);return d.jsx("div",{className:se(o.base,t),"data-testid":"flowbite-accordion-content",hidden:!i,...n,children:e})},Eq=({children:e,...t})=>{const{alwaysOpen:r}=t,[n,i]=T.useState(t.isOpen),o=r?{...t,isOpen:n,setOpen:()=>i(!n)}:t;return d.jsx(yq.Provider,{value:o,children:e})},_q=({as:e="h2",children:t,className:r,theme:n={},...i})=>{const{arrowIcon:o,flush:a,isOpen:s,setOpen:l}=vq(),c=()=>typeof l<"u"&&l(),u=Ne(st().accordion.title,n);return d.jsxs("button",{className:se(u.base,u.flush[a?"on":"off"],u.open[s?"on":"off"],r),onClick:c,type:"button",...i,children:[d.jsx(e,{className:u.heading,"data-testid":"flowbite-accordion-heading",children:t}),o&&d.jsx(o,{"aria-hidden":!0,className:se(u.arrow.base,u.arrow.open[s?"on":"off"]),"data-testid":"flowbite-accordion-arrow"})]})},wq=({alwaysOpen:e=!1,arrowIcon:t=cq,children:r,flush:n=!1,collapseAll:i=!1,className:o,theme:a={},...s})=>{const[l,c]=T.useState(i?-1:0),u=T.useMemo(()=>T.Children.map(r,(f,p)=>T.cloneElement(f,{alwaysOpen:e,arrowIcon:t,flush:n,isOpen:l===p,setOpen:()=>c(l===p?-1:p)})),[e,t,r,n,l]),h=Ne(st().accordion.root,a);return d.jsx("div",{className:se(h.base,h.flush[n?"on":"off"],o),"data-testid":"flowbite-accordion",...s,children:u})};wq.displayName="Accordion";Eq.displayName="Accordion.Panel";_q.displayName="Accordion.Title";bq.displayName="Accordion.Content";Object.assign(wq,{Panel:Eq,Title:_q,Content:bq});const Sq=({children:e,className:t,theme:r={},...n})=>{const i=Ne(st().avatar.group,r);return d.jsx("div",{"data-testid":"avatar-group-element",className:se(i.base,t),...n,children:e})};Sq.displayName="Avatar.Group";const Tq=({className:e,href:t,theme:r={},total:n,...i})=>{const o=Ne(st().avatar.groupCounter,r);return d.jsxs("a",{href:t,className:se(o.base,e),...i,children:["+",n]})};Tq.displayName="Avatar.GroupCounter";const Cq=({alt:e="",bordered:t=!1,children:r,className:n,color:i="light",img:o,placeholderInitials:a="",rounded:s=!1,size:l="md",stacked:c=!1,status:u,statusPosition:h="top-left",theme:f={},...p})=>{const m=Ne(st().avatar,f),g=se(m.root.img.base,t&&m.root.bordered,t&&m.root.color[i],s&&m.root.rounded,c&&m.root.stacked,m.root.img.on,m.root.size[l]),y={className:se(g,m.root.img.on),"data-testid":"flowbite-avatar-img"};return d.jsxs("div",{className:se(m.root.base,n),"data-testid":"flowbite-avatar",...p,children:[d.jsxs("div",{className:"relative",children:[o?typeof o=="string"?d.jsx("img",{alt:e,src:o,...y}):o({alt:e,...y}):a?d.jsx("div",{className:se(m.root.img.off,m.root.initials.base,c&&m.root.stacked,t&&m.root.bordered,t&&m.root.color[i],m.root.size[l],s&&m.root.rounded),"data-testid":"flowbite-avatar-initials-placeholder",children:d.jsx("span",{className:se(m.root.initials.text),"data-testid":"flowbite-avatar-initials-placeholder-text",children:a})}):d.jsx("div",{className:se(g,m.root.img.off),"data-testid":"flowbite-avatar-img",children:d.jsx("svg",{className:m.root.img.placeholder,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),u&&d.jsx("span",{"data-testid":"flowbite-avatar-status",className:se(m.root.status.base,m.root.status[u],m.root.statusPosition[h])})]}),r&&d.jsx("div",{children:r})]})};Cq.displayName="Avatar";Object.assign(Cq,{Group:Sq,Counter:Tq});const xq=({children:e,color:t="info",href:r,icon:n,size:i="xs",className:o,theme:a={},...s})=>{const l=Ne(st().badge,a),c=()=>d.jsxs("span",{className:se(l.root.base,l.root.color[t],l.root.size[i],l.icon[n?"on":"off"],o),"data-testid":"flowbite-badge",...s,children:[n&&d.jsx(n,{"aria-hidden":!0,className:l.icon.size[i],"data-testid":"flowbite-badge-icon"}),e&&d.jsx("span",{children:e})]});return r?d.jsx("a",{className:l.root.href,href:r,children:d.jsx(c,{})}):d.jsx(c,{})};xq.displayName="Badge";const Rq=({className:e,color:t="info",light:r,size:n="md",theme:i={},...o})=>{const a=Ne(st().spinner,i);return d.jsx("span",{role:"status",...o,children:d.jsxs("svg",{fill:"none",viewBox:"0 0 100 101",className:se(a.base,a.color[t],a.light[r?"on":"off"].base,a.light[r?"on":"off"].color[t],a.size[n],e),children:[d.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),d.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})})};Rq.displayName="Spinner";const SD=T.forwardRef(({children:e,as:t,href:r,type:n="button",...i},o)=>{const a=t||(r?"a":"button");return T.createElement(a,{ref:o,href:r,type:n,...i},e)});SD.displayName="ButtonBaseComponent";const Iq=(e,t,r)=>T.Children.map(e,(n,i)=>{if(T.isValidElement(n)){const o=n.type==TD?{positionInGroup:Dbe(i,T.Children.count(e))}:{};return n.props.children?T.cloneElement(n,{...n.props,children:Iq(n.props.children,t,r),...o}):T.cloneElement(n,{outline:t,pill:r,...o})}return n}),Dbe=(e,t)=>e===0?"start":e===t-1?"end":"middle",Nq=({children:e,className:t,outline:r,pill:n,theme:i={},...o})=>{const a=T.useMemo(()=>Iq(e,r,n),[e,r,n]),s=Ne(st().buttonGroup,i);return d.jsx("div",{className:se(s.base,t),role:"group",...o,children:a})};Nq.displayName="Button.Group";const Aq=T.forwardRef(({children:e,className:t,color:r="info",disabled:n,fullSized:i,isProcessing:o=!1,processingLabel:a="Loading...",processingSpinner:s,gradientDuoTone:l,gradientMonochrome:c,label:u,outline:h=!1,pill:f=!1,positionInGroup:p="none",size:m="md",theme:g={},...y},v)=>{const{buttonGroup:b,button:_}=st(),S=Ne(_,g),I=y;return d.jsx(SD,{ref:v,disabled:n,className:se(S.base,n&&S.disabled,!l&&!c&&S.color[r],l&&!c&&S.gradientDuoTone[l],!l&&c&&S.gradient[c],h&&(S.outline.color[r]??S.outline.color.default),S.pill[f?"on":"off"],i&&S.fullSized,b.position[p],t),...I,children:d.jsx("span",{className:se(S.inner.base,S.outline[h?"on":"off"],S.outline.pill[h&&f?"on":"off"],S.size[m],h&&!S.outline.color[r]&&S.inner.outline,o&&S.isProcessing,o&&S.inner.isProcessingPadding[m],S.inner.position[p]),children:d.jsxs(d.Fragment,{children:[o&&d.jsx("span",{className:se(S.spinnerSlot,S.spinnerLeftPosition[m]),children:s||d.jsx(Rq,{size:m})}),typeof e<"u"?e:d.jsx("span",{"data-testid":"flowbite-button-label",className:se(S.label),children:o?a:u})]})})})});Aq.displayName="Button";const TD=Object.assign(Aq,{Group:Nq}),Oq=({children:e,...t})=>{const r=n=>{const o=n.target.closest('[role="banner"]');o==null||o.remove()};return d.jsx(TD,{onClick:r,...t,children:e})};Oq.displayName="Banner.CollapseButton";const kq=({children:e,...t})=>d.jsx("div",{"data-testid":"flowbite-banner",role:"banner",tabIndex:-1,...t,children:e});kq.displayName="Banner";Object.assign(kq,{CollapseButton:Oq});const Pq=T.forwardRef(({children:e,className:t,href:r,icon:n,theme:i={},...o},a)=>{const s=typeof r<"u",l=s?"a":"span",c=Ne(st().breadcrumb.item,i);return d.jsxs("li",{className:se(c.base,t),...o,children:[d.jsx(dq,{"aria-hidden":!0,className:c.chevron,"data-testid":"flowbite-breadcrumb-separator"}),d.jsxs(l,{ref:a,className:c.href[s?"on":"off"],"data-testid":"flowbite-breadcrumb-item",href:r,children:[n&&d.jsx(n,{"aria-hidden":!0,className:c.icon}),e]})]})});Pq.displayName="Breadcrumb.Item";const Dq=({children:e,className:t,theme:r={},...n})=>{const i=Ne(st().breadcrumb.root,r);return d.jsx("nav",{"aria-label":"Breadcrumb",className:se(i.base,t),...n,children:d.jsx("ol",{className:i.list,children:e})})};Dq.displayName="Breadcrumb";Object.assign(Dq,{Item:Pq});var Lq={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,n(s)))}return o}function n(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return r.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)t.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Lq);var Lbe=Lq.exports;const Mbe=oa(Lbe);var CD={exports:{}};function Mq(e,t=100,r={}){if(typeof e!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof e}\`.`);if(t<0)throw new RangeError("`wait` must not be negative.");const{immediate:n}=typeof r=="boolean"?{immediate:r}:r;let i,o,a,s,l;function c(){const f=i,p=o;return i=void 0,o=void 0,l=e.apply(f,p),l}function u(){const f=Date.now()-s;f<t&&f>=0?a=setTimeout(u,t-f):(a=void 0,n||(l=c()))}const h=function(...f){if(i&&this!==i)throw new Error("Debounced method called with different contexts.");i=this,o=f,s=Date.now();const p=n&&!a;return a||(a=setTimeout(u,t)),p&&(l=c()),l};return h.clear=()=>{a&&(clearTimeout(a),a=void 0)},h.flush=()=>{a&&h.trigger()},h.trigger=()=>{l=c(),h.clear()},h}CD.exports.debounce=Mq;CD.exports=Mq;var jbe=CD.exports;const Ube=oa(jbe);var Fbe=Object.defineProperty,Vbe=(e,t,r)=>t in e?Fbe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ti=(e,t,r)=>Vbe(e,typeof t!="symbol"?t+"":t,r);const Bbe=300,$be=0;class Hbe extends T.PureComponent{constructor(t){super(t),Ti(this,"container"),Ti(this,"scrolling"),Ti(this,"started"),Ti(this,"pressed"),Ti(this,"isMobile",!1),Ti(this,"internal"),Ti(this,"scrollLeft"),Ti(this,"scrollTop"),Ti(this,"clientX"),Ti(this,"clientY"),Ti(this,"onEndScroll",()=>{this.scrolling=!1,!this.pressed&&this.started&&this.processEnd()}),Ti(this,"onScroll",()=>{const r=this.container.current;(r.scrollLeft!==this.scrollLeft||r.scrollTop!==this.scrollTop)&&(this.scrolling=!0,this.processScroll(),this.onEndScroll())}),Ti(this,"onTouchStart",r=>{const{nativeMobileScroll:n}=this.props;if(this.isDraggable(r.target))if(this.internal=!0,n&&this.scrolling)this.pressed=!0;else{const i=r.touches[0];this.processClick(i.clientX,i.clientY),!n&&this.props.stopPropagation&&r.stopPropagation()}}),Ti(this,"onTouchEnd",()=>{const{nativeMobileScroll:r}=this.props;this.pressed&&(this.started&&(!this.scrolling||!r)?this.processEnd():this.pressed=!1,this.forceUpdate())}),Ti(this,"onTouchMove",r=>{const{nativeMobileScroll:n}=this.props;if(this.pressed&&(!n||!this.isMobile)){const i=r.touches[0];i&&this.processMove(i.clientX,i.clientY),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation()}}),Ti(this,"onMouseDown",r=>{var n,i;this.isDraggable(r.target)&&this.isScrollable()&&(this.internal=!0,((i=(n=this.props)==null?void 0:n.buttons)==null?void 0:i.indexOf(r.button))!==-1&&(this.processClick(r.clientX,r.clientY),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation()))}),Ti(this,"onMouseMove",r=>{this.pressed&&(this.processMove(r.clientX,r.clientY),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation())}),Ti(this,"onMouseUp",r=>{this.pressed&&(this.started?this.processEnd():(this.internal=!1,this.pressed=!1,this.forceUpdate(),this.props.onClick&&this.props.onClick(r)),r.preventDefault(),this.props.stopPropagation&&r.stopPropagation())}),this.container=kr.createRef(),this.onEndScroll=Ube(this.onEndScroll,Bbe),this.scrolling=!1,this.started=!1,this.pressed=!1,this.internal=!1,this.getRef=this.getRef.bind(this)}componentDidMount(){const{nativeMobileScroll:t}=this.props,r=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),r.addEventListener("touchstart",this.onTouchStart,{passive:!1}),r.addEventListener("mousedown",this.onMouseDown,{passive:!1}),t&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())}componentWillUnmount(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)}getElement(){return this.container.current}isMobileDevice(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1}isDraggable(t){const r=this.props.ignoreElements;if(r){const n=t.closest(r);return n===null||n.contains(this.getElement())}else return!0}isScrollable(){const t=this.container.current;return t&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)}processClick(t,r){const n=this.container.current;this.scrollLeft=n==null?void 0:n.scrollLeft,this.scrollTop=n==null?void 0:n.scrollTop,this.clientX=t,this.clientY=r,this.pressed=!0}processStart(t=!0){const{onStartScroll:r}=this.props;this.started=!0,t&&document.body.classList.add("cursor-grab"),r&&r({external:!this.internal}),this.forceUpdate()}processScroll(){if(this.started){const{onScroll:t}=this.props;t&&t({external:!this.internal})}else this.processStart(!1)}processMove(t,r){const{horizontal:n,vertical:i,activationDistance:o,onScroll:a}=this.props,s=this.container.current;this.started?(n&&(s.scrollLeft-=t-this.clientX),i&&(s.scrollTop-=r-this.clientY),a&&a({external:!this.internal}),this.clientX=t,this.clientY=r,this.scrollLeft=s.scrollLeft,this.scrollTop=s.scrollTop):(n&&Math.abs(t-this.clientX)>o||i&&Math.abs(r-this.clientY)>o)&&(this.clientX=t,this.clientY=r,this.processStart())}processEnd(){const{onEndScroll:t}=this.props;this.container.current&&t&&t({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("cursor-grab"),this.forceUpdate()}getRef(t){[this.container,this.props.innerRef].forEach(r=>{r&&(typeof r=="function"?r(t):r.current=t)})}render(){const{children:t,draggingClassName:r,className:n,style:i,hideScrollbars:o}=this.props;return d.jsx("div",{className:Mbe(n,this.pressed&&r,{"!scroll-auto [&>*]:pointer-events-none [&>*]:cursor-grab":this.pressed,"overflow-auto":this.isMobile,"overflow-hidden !overflow-x-hidden [overflow:-moz-scrollbars-none] [scrollbar-width:none]":o,"[&::-webkit-scrollbar]:[-webkit-appearance:none !important] [&::-webkit-scrollbar]:!hidden [&::-webkit-scrollbar]:!h-0 [&::-webkit-scrollbar]:!w-0 [&::-webkit-scrollbar]:!bg-transparent":o}),style:i,ref:this.getRef,onScroll:this.onScroll,children:t})}}Ti(Hbe,"defaultProps",{nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},buttons:[$be]});const zbe=T.forwardRef(({className:e,color:t="default",theme:r={},...n},i)=>{const o=Ne(st().checkbox,r);return d.jsx("input",{ref:i,type:"checkbox",className:se(o.root.base,o.root.color[t],e),...n})});zbe.displayName="Checkbox";function _T(){return typeof window<"u"}function sd(e){return jq(e)?(e.nodeName||"").toLowerCase():"#document"}function ta(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Hl(e){var t;return(t=(jq(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function jq(e){return _T()?e instanceof Node||e instanceof ta(e).Node:!1}function tn(e){return _T()?e instanceof Element||e instanceof ta(e).Element:!1}function oi(e){return _T()?e instanceof HTMLElement||e instanceof ta(e).HTMLElement:!1}function eO(e){return!_T()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ta(e).ShadowRoot}function y0(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=_s(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function Gbe(e){return["table","td","th"].includes(sd(e))}function wT(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function xD(e){const t=RD(),r=tn(e)?_s(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function Wbe(e){let t=Oc(e);for(;oi(t)&&!Ju(t);){if(xD(t))return t;if(wT(t))return null;t=Oc(t)}return null}function RD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ju(e){return["html","body","#document"].includes(sd(e))}function _s(e){return ta(e).getComputedStyle(e)}function ST(e){return tn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Oc(e){if(sd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||eO(e)&&e.host||Hl(e);return eO(t)?t.host:t}function Uq(e){const t=Oc(e);return Ju(t)?e.ownerDocument?e.ownerDocument.body:e.body:oi(t)&&y0(t)?t:Uq(t)}function Uu(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=Uq(e),o=i===((n=e.ownerDocument)==null?void 0:n.body),a=ta(i);if(o){const s=tO(a);return t.concat(a,a.visualViewport||[],y0(i)?i:[],s&&r?Uu(s):[])}return t.concat(i,Uu(i,[],r))}function tO(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Gs(e){let t=e.activeElement;for(;((r=t)==null||(r=r.shadowRoot)==null?void 0:r.activeElement)!=null;){var r;t=t.shadowRoot.activeElement}return t}function ri(e,t){if(!e||!t)return!1;const r=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&eO(r)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function ID(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Fq(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:r,version:n}=t;return r+"/"+n}).join(" "):navigator.userAgent}function Vq(e){return e.mozInputSource===0&&e.isTrusted?!0:rO()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function ND(e){return Kbe()?!1:!rO()&&e.width===0&&e.height===0||rO()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function AD(){return/apple/i.test(navigator.vendor)}function rO(){const e=/android/i;return e.test(ID())||e.test(Fq())}function Bq(){return ID().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Kbe(){return Fq().includes("jsdom/")}function bv(e,t){const r=["mouse","pen"];return t||r.push("",void 0),r.includes(e)}function qbe(e){return"nativeEvent"in e}function Ybe(e){return e.matches("html,body")}function ji(e){return(e==null?void 0:e.ownerDocument)||document}function Sx(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const r=e;return r.target!=null&&t.contains(r.target)}function pc(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Xbe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function OD(e){return oi(e)&&e.matches(Xbe)}function Xi(e){e.preventDefault(),e.stopPropagation()}function $q(e){return e?e.getAttribute("role")==="combobox"&&OD(e):!1}const Jbe=["top","right","bottom","left"],s5=["start","end"],l5=Jbe.reduce((e,t)=>e.concat(t,t+"-"+s5[0],t+"-"+s5[1]),[]),Xp=Math.min,ch=Math.max,Rw=Math.round,ep=Math.floor,kl=e=>({x:e,y:e}),Qbe={left:"right",right:"left",bottom:"top",top:"bottom"},Zbe={start:"end",end:"start"};function nO(e,t,r){return ch(e,Xp(t,r))}function Pm(e,t){return typeof e=="function"?e(t):e}function kc(e){return e.split("-")[0]}function Pl(e){return e.split("-")[1]}function Hq(e){return e==="x"?"y":"x"}function kD(e){return e==="y"?"height":"width"}function Jp(e){return["top","bottom"].includes(kc(e))?"y":"x"}function PD(e){return Hq(Jp(e))}function zq(e,t,r){r===void 0&&(r=!1);const n=Pl(e),i=PD(e),o=kD(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Nw(a)),[a,Nw(a)]}function eEe(e){const t=Nw(e);return[Iw(e),t,Iw(t)]}function Iw(e){return e.replace(/start|end/g,t=>Zbe[t])}function tEe(e,t,r){const n=["left","right"],i=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?o:a;default:return[]}}function rEe(e,t,r,n){const i=Pl(e);let o=tEe(kc(e),r==="start",n);return i&&(o=o.map(a=>a+"-"+i),t&&(o=o.concat(o.map(Iw)))),o}function Nw(e){return e.replace(/left|right|bottom|top/g,t=>Qbe[t])}function nEe(e){return{top:0,right:0,bottom:0,left:0,...e}}function Gq(e){return typeof e!="number"?nEe(e):{top:e,right:e,bottom:e,left:e}}function Aw(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var iEe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ow=iEe.join(","),Wq=typeof Element>"u",Qp=Wq?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,kw=!Wq&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Pw=function e(t,r){var n;r===void 0&&(r=!0);var i=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),o=i===""||i==="true",a=o||r&&t&&e(t.parentNode);return a},oEe=function(t){var r,n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return n===""||n==="true"},aEe=function(t,r,n){if(Pw(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(Ow));return r&&Qp.call(t,Ow)&&i.unshift(t),i=i.filter(n),i},sEe=function e(t,r,n){for(var i=[],o=Array.from(t);o.length;){var a=o.shift();if(!Pw(a,!1))if(a.tagName==="SLOT"){var s=a.assignedElements(),l=s.length?s:a.children,c=e(l,!0,n);n.flatten?i.push.apply(i,c):i.push({scopeParent:a,candidates:c})}else{var u=Qp.call(a,Ow);u&&n.filter(a)&&(r||!t.includes(a))&&i.push(a);var h=a.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(a),f=!Pw(h,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(a));if(h&&f){var p=e(h===!0?a.children:h.children,!0,n);n.flatten?i.push.apply(i,p):i.push({scopeParent:a,candidates:p})}else o.unshift.apply(o,a.children)}}return i},Kq=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},qq=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||oEe(t))&&!Kq(t)?0:t.tabIndex},lEe=function(t,r){var n=qq(t);return n<0&&r&&!Kq(t)?0:n},cEe=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},Yq=function(t){return t.tagName==="INPUT"},uEe=function(t){return Yq(t)&&t.type==="hidden"},dEe=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},hEe=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},fEe=function(t){if(!t.name)return!0;var r=t.form||kw(t),n=function(s){return r.querySelectorAll('input[type="radio"][name="'+s+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=n(window.CSS.escape(t.name));else try{i=n(t.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var o=hEe(i,t.form);return!o||o===t},pEe=function(t){return Yq(t)&&t.type==="radio"},mEe=function(t){return pEe(t)&&!fEe(t)},gEe=function(t){var r,n=t&&kw(t),i=(r=n)===null||r===void 0?void 0:r.host,o=!1;if(n&&n!==t){var a,s,l;for(o=!!((a=i)!==null&&a!==void 0&&(s=a.ownerDocument)!==null&&s!==void 0&&s.contains(i)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!o&&i;){var c,u,h;n=kw(i),i=(c=n)===null||c===void 0?void 0:c.host,o=!!((u=i)!==null&&u!==void 0&&(h=u.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return o},c5=function(t){var r=t.getBoundingClientRect(),n=r.width,i=r.height;return n===0&&i===0},yEe=function(t,r){var n=r.displayCheck,i=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=Qp.call(t,"details>summary:first-of-type"),a=o?t.parentElement:t;if(Qp.call(a,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof i=="function"){for(var s=t;t;){var l=t.parentElement,c=kw(t);if(l&&!l.shadowRoot&&i(l)===!0)return c5(t);t.assignedSlot?t=t.assignedSlot:!l&&c!==t.ownerDocument?t=c.host:t=l}t=s}if(gEe(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return c5(t);return!1},vEe=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var i=r.children.item(n);if(i.tagName==="LEGEND")return Qp.call(r,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}r=r.parentElement}return!1},bEe=function(t,r){return!(r.disabled||Pw(r)||uEe(r)||yEe(r,t)||dEe(r)||vEe(r))},iO=function(t,r){return!(mEe(r)||qq(r)<0||!bEe(t,r))},EEe=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},_Ee=function e(t){var r=[],n=[];return t.forEach(function(i,o){var a=!!i.scopeParent,s=a?i.scopeParent:i,l=lEe(s,a),c=a?e(i.candidates):s;l===0?a?r.push.apply(r,c):r.push(s):n.push({documentOrder:o,tabIndex:l,item:i,isScope:a,content:c})}),n.sort(cEe).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(r)},Ev=function(t,r){r=r||{};var n;return r.getShadowRoot?n=sEe([t],r.includeContainer,{filter:iO.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:EEe}):n=aEe(t,r.includeContainer,iO.bind(null,r)),_Ee(n)},wEe=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return Qp.call(t,Ow)===!1?!1:iO(r,t)};function u5(e,t,r){let{reference:n,floating:i}=e;const o=Jp(t),a=PD(t),s=kD(a),l=kc(t),c=o==="y",u=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,f=n[s]/2-i[s]/2;let p;switch(l){case"top":p={x:u,y:n.y-i.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-i.width,y:h};break;default:p={x:n.x,y:n.y}}switch(Pl(t)){case"start":p[a]-=f*(r&&c?-1:1);break;case"end":p[a]+=f*(r&&c?-1:1);break}return p}const SEe=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:a}=r,s=o.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:h}=u5(c,n,l),f=n,p={},m=0;for(let g=0;g<s.length;g++){const{name:y,fn:v}=s[g],{x:b,y:_,data:S,reset:I}=await v({x:u,y:h,initialPlacement:n,placement:f,strategy:i,middlewareData:p,rects:c,platform:a,elements:{reference:e,floating:t}});u=b??u,h=_??h,p={...p,[y]:{...p[y],...S}},I&&m<=50&&(m++,typeof I=="object"&&(I.placement&&(f=I.placement),I.rects&&(c=I.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):I.rects),{x:u,y:h}=u5(c,f,l)),g=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:p}};async function DD(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:o,rects:a,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Pm(t,e),m=Gq(p),y=s[f?h==="floating"?"reference":"floating":h],v=Aw(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(y)))==null||r?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),b=h==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),S=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},I=Aw(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:b,offsetParent:_,strategy:l}):b);return{top:(v.top-I.top+m.top)/S.y,bottom:(I.bottom-v.bottom+m.bottom)/S.y,left:(v.left-I.left+m.left)/S.x,right:(I.right-v.right+m.right)/S.x}}const TEe=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:o,platform:a,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=Pm(e,t)||{};if(c==null)return{};const h=Gq(u),f={x:r,y:n},p=PD(i),m=kD(p),g=await a.getDimensions(c),y=p==="y",v=y?"top":"left",b=y?"bottom":"right",_=y?"clientHeight":"clientWidth",S=o.reference[m]+o.reference[p]-f[p]-o.floating[m],I=f[p]-o.reference[p],A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let D=A?A[_]:0;(!D||!await(a.isElement==null?void 0:a.isElement(A)))&&(D=s.floating[_]||o.floating[m]);const M=S/2-I/2,H=D/2-g[m]/2-1,V=Xp(h[v],H),G=Xp(h[b],H),Y=V,Z=D-g[m]-G,$=D/2-g[m]/2+M,F=nO(Y,$,Z),K=!l.arrow&&Pl(i)!=null&&$!==F&&o.reference[m]/2-($<Y?V:G)-g[m]/2<0,k=K?$<Y?$-Y:$-Z:0;return{[p]:f[p]+k,data:{[p]:F,centerOffset:$-F-k,...K&&{alignmentOffset:k}},reset:K}}});function CEe(e,t,r){return(e?[...r.filter(i=>Pl(i)===e),...r.filter(i=>Pl(i)!==e)]:r.filter(i=>kc(i)===i)).filter(i=>e?Pl(i)===e||(t?Iw(i)!==i:!1):!0)}const xEe=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var r,n,i;const{rects:o,middlewareData:a,placement:s,platform:l,elements:c}=t,{crossAxis:u=!1,alignment:h,allowedPlacements:f=l5,autoAlignment:p=!0,...m}=Pm(e,t),g=h!==void 0||f===l5?CEe(h||null,p,f):f,y=await DD(t,m),v=((r=a.autoPlacement)==null?void 0:r.index)||0,b=g[v];if(b==null)return{};const _=zq(b,o,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(s!==b)return{reset:{placement:g[0]}};const S=[y[kc(b)],y[_[0]],y[_[1]]],I=[...((n=a.autoPlacement)==null?void 0:n.overflows)||[],{placement:b,overflows:S}],A=g[v+1];if(A)return{data:{index:v+1,overflows:I},reset:{placement:A}};const D=I.map(V=>{const G=Pl(V.placement);return[V.placement,G&&u?V.overflows.slice(0,2).reduce((Y,Z)=>Y+Z,0):V.overflows[0],V.overflows]}).sort((V,G)=>V[1]-G[1]),H=((i=D.filter(V=>V[2].slice(0,Pl(V[0])?2:3).every(G=>G<=0))[0])==null?void 0:i[0])||D[0][0];return H!==s?{data:{index:v+1,overflows:I},reset:{placement:H}}:{}}}},REe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=Pm(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const v=kc(i),b=Jp(s),_=kc(s)===s,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),I=f||(_||!g?[Nw(s)]:eEe(s)),A=m!=="none";!f&&A&&I.push(...rEe(s,g,m,S));const D=[s,...I],M=await DD(t,y),H=[];let V=((n=o.flip)==null?void 0:n.overflows)||[];if(u&&H.push(M[v]),h){const $=zq(i,a,S);H.push(M[$[0]],M[$[1]])}if(V=[...V,{placement:i,overflows:H}],!H.every($=>$<=0)){var G,Y;const $=(((G=o.flip)==null?void 0:G.index)||0)+1,F=D[$];if(F)return{data:{index:$,overflows:V},reset:{placement:F}};let K=(Y=V.filter(k=>k.overflows[0]<=0).sort((k,P)=>k.overflows[1]-P.overflows[1])[0])==null?void 0:Y.placement;if(!K)switch(p){case"bestFit":{var Z;const k=(Z=V.filter(P=>{if(A){const B=Jp(P.placement);return B===b||B==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(B=>B>0).reduce((B,x)=>B+x,0)]).sort((P,B)=>P[1]-B[1])[0])==null?void 0:Z[0];k&&(K=k);break}case"initialPlacement":K=s;break}if(i!==K)return{reset:{placement:K}}}return{}}}};async function IEe(e,t){const{placement:r,platform:n,elements:i}=e,o=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=kc(r),s=Pl(r),l=Jp(r)==="y",c=["left","top"].includes(a)?-1:1,u=o&&l?-1:1,h=Pm(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return s&&typeof m=="number"&&(p=s==="end"?m*-1:m),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const NEe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:o,placement:a,middlewareData:s}=t,l=await IEe(t,e);return a===((r=s.offset)==null?void 0:r.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:a}}}}},AEe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:y=>{let{x:v,y:b}=y;return{x:v,y:b}}},...l}=Pm(e,t),c={x:r,y:n},u=await DD(t,l),h=Jp(kc(i)),f=Hq(h);let p=c[f],m=c[h];if(o){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=p+u[y],_=p-u[v];p=nO(b,p,_)}if(a){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",b=m+u[y],_=m-u[v];m=nO(b,m,_)}const g=s.fn({...t,[f]:p,[h]:m});return{...g,data:{x:g.x-r,y:g.y-n}}}}};function Xq(e){const t=_s(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=oi(e),o=i?e.offsetWidth:r,a=i?e.offsetHeight:n,s=Rw(r)!==o||Rw(n)!==a;return s&&(r=o,n=a),{width:r,height:n,$:s}}function LD(e){return tn(e)?e:e.contextElement}function Sp(e){const t=LD(e);if(!oi(t))return kl(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:o}=Xq(t);let a=(o?Rw(r.width):r.width)/n,s=(o?Rw(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const OEe=kl(0);function Jq(e){const t=ta(e);return!RD()||!t.visualViewport?OEe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function kEe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ta(e)?!1:t}function xh(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=LD(e);let a=kl(1);t&&(n?tn(n)&&(a=Sp(n)):a=Sp(e));const s=kEe(o,r,n)?Jq(o):kl(0);let l=(i.left+s.x)/a.x,c=(i.top+s.y)/a.y,u=i.width/a.x,h=i.height/a.y;if(o){const f=ta(o),p=n&&tn(n)?ta(n):n;let m=f,g=tO(m);for(;g&&n&&p!==m;){const y=Sp(g),v=g.getBoundingClientRect(),b=_s(g),_=v.left+(g.clientLeft+parseFloat(b.paddingLeft))*y.x,S=v.top+(g.clientTop+parseFloat(b.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,h*=y.y,l+=_,c+=S,m=ta(g),g=tO(m)}}return Aw({width:u,height:h,x:l,y:c})}function MD(e,t){const r=ST(e).scrollLeft;return t?t.left+r:xh(Hl(e)).left+r}function Qq(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-(r?0:MD(e,n)),o=n.top+t.scrollTop;return{x:i,y:o}}function PEe(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const o=i==="fixed",a=Hl(n),s=t?wT(t.floating):!1;if(n===a||s&&o)return r;let l={scrollLeft:0,scrollTop:0},c=kl(1);const u=kl(0),h=oi(n);if((h||!h&&!o)&&((sd(n)!=="body"||y0(a))&&(l=ST(n)),oi(n))){const p=xh(n);c=Sp(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const f=a&&!h&&!o?Qq(a,l,!0):kl(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:r.y*c.y-l.scrollTop*c.y+u.y+f.y}}function DEe(e){return Array.from(e.getClientRects())}function LEe(e){const t=Hl(e),r=ST(e),n=e.ownerDocument.body,i=ch(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=ch(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+MD(e);const s=-r.scrollTop;return _s(n).direction==="rtl"&&(a+=ch(t.clientWidth,n.clientWidth)-i),{width:i,height:o,x:a,y:s}}function MEe(e,t){const r=ta(e),n=Hl(e),i=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;const c=RD();(!c||c&&t==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s,y:l}}function jEe(e,t){const r=xh(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,o=oi(e)?Sp(e):kl(1),a=e.clientWidth*o.x,s=e.clientHeight*o.y,l=i*o.x,c=n*o.y;return{width:a,height:s,x:l,y:c}}function d5(e,t,r){let n;if(t==="viewport")n=MEe(e,r);else if(t==="document")n=LEe(Hl(e));else if(tn(t))n=jEe(t,r);else{const i=Jq(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Aw(n)}function Zq(e,t){const r=Oc(e);return r===t||!tn(r)||Ju(r)?!1:_s(r).position==="fixed"||Zq(r,t)}function UEe(e,t){const r=t.get(e);if(r)return r;let n=Uu(e,[],!1).filter(s=>tn(s)&&sd(s)!=="body"),i=null;const o=_s(e).position==="fixed";let a=o?Oc(e):e;for(;tn(a)&&!Ju(a);){const s=_s(a),l=xD(a);!l&&s.position==="fixed"&&(i=null),(o?!l&&!i:!l&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||y0(a)&&!l&&Zq(e,a))?n=n.filter(u=>u!==a):i=s,a=Oc(a)}return t.set(e,n),n}function FEe(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const a=[...r==="clippingAncestors"?wT(t)?[]:UEe(t,this._c):[].concat(r),n],s=a[0],l=a.reduce((c,u)=>{const h=d5(t,u,i);return c.top=ch(h.top,c.top),c.right=Xp(h.right,c.right),c.bottom=Xp(h.bottom,c.bottom),c.left=ch(h.left,c.left),c},d5(t,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function VEe(e){const{width:t,height:r}=Xq(e);return{width:t,height:r}}function BEe(e,t,r){const n=oi(t),i=Hl(t),o=r==="fixed",a=xh(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=kl(0);if(n||!n&&!o)if((sd(t)!=="body"||y0(i))&&(s=ST(t)),n){const f=xh(t,!0,o,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else i&&(l.x=MD(i));const c=i&&!n&&!o?Qq(i,s):kl(0),u=a.left+s.scrollLeft-l.x-c.x,h=a.top+s.scrollTop-l.y-c.y;return{x:u,y:h,width:a.width,height:a.height}}function Tx(e){return _s(e).position==="static"}function h5(e,t){if(!oi(e)||_s(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Hl(e)===r&&(r=r.ownerDocument.body),r}function eY(e,t){const r=ta(e);if(wT(e))return r;if(!oi(e)){let i=Oc(e);for(;i&&!Ju(i);){if(tn(i)&&!Tx(i))return i;i=Oc(i)}return r}let n=h5(e,t);for(;n&&Gbe(n)&&Tx(n);)n=h5(n,t);return n&&Ju(n)&&Tx(n)&&!xD(n)?r:n||Wbe(e)||r}const $Ee=async function(e){const t=this.getOffsetParent||eY,r=this.getDimensions,n=await r(e.floating);return{reference:BEe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function HEe(e){return _s(e).direction==="rtl"}const zEe={convertOffsetParentRelativeRectToViewportRelativeRect:PEe,getDocumentElement:Hl,getClippingRect:FEe,getOffsetParent:eY,getElementRects:$Ee,getClientRects:DEe,getDimensions:VEe,getScale:Sp,isElement:tn,isRTL:HEe};function GEe(e,t){let r=null,n;const i=Hl(e);function o(){var s;clearTimeout(n),(s=r)==null||s.disconnect(),r=null}function a(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),o();const{left:c,top:u,width:h,height:f}=e.getBoundingClientRect();if(s||t(),!h||!f)return;const p=ep(u),m=ep(i.clientWidth-(c+h)),g=ep(i.clientHeight-(u+f)),y=ep(c),b={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:ch(0,Xp(1,l))||1};let _=!0;function S(I){const A=I[0].intersectionRatio;if(A!==l){if(!_)return a();A?a(!1,A):n=setTimeout(()=>{a(!1,1e-7)},1e3)}_=!1}try{r=new IntersectionObserver(S,{...b,root:i.ownerDocument})}catch{r=new IntersectionObserver(S,b)}r.observe(e)}return a(!0),o}function tY(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=LD(e),u=i||o?[...c?Uu(c):[],...Uu(t)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",r,{passive:!0}),o&&v.addEventListener("resize",r)});const h=c&&s?GEe(c,r):null;let f=-1,p=null;a&&(p=new ResizeObserver(v=>{let[b]=v;b&&b.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),r()}),c&&!l&&p.observe(c),p.observe(t));let m,g=l?xh(e):null;l&&y();function y(){const v=xh(e);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&r(),g=v,m=requestAnimationFrame(y)}return r(),()=>{var v;u.forEach(b=>{i&&b.removeEventListener("scroll",r),o&&b.removeEventListener("resize",r)}),h==null||h(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const WEe=NEe,KEe=xEe,qEe=AEe,YEe=REe,f5=TEe,XEe=(e,t,r)=>{const n=new Map,i={platform:zEe,...r},o={...i.platform,_c:n};return SEe(e,t,{...i,platform:o})};var QE=typeof document<"u"?T.useLayoutEffect:T.useEffect;function Dw(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Dw(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const o=i[n];if(!(o==="_owner"&&e.$$typeof)&&!Dw(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function rY(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function p5(e,t){const r=rY(e);return Math.round(t*r)/r}function Cx(e){const t=T.useRef(e);return QE(()=>{t.current=e}),t}function JEe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:l,open:c}=e,[u,h]=T.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=T.useState(n);Dw(f,n)||p(n);const[m,g]=T.useState(null),[y,v]=T.useState(null),b=T.useCallback(P=>{P!==A.current&&(A.current=P,g(P))},[]),_=T.useCallback(P=>{P!==D.current&&(D.current=P,v(P))},[]),S=o||m,I=a||y,A=T.useRef(null),D=T.useRef(null),M=T.useRef(u),H=l!=null,V=Cx(l),G=Cx(i),Y=Cx(c),Z=T.useCallback(()=>{if(!A.current||!D.current)return;const P={placement:t,strategy:r,middleware:f};G.current&&(P.platform=G.current),XEe(A.current,D.current,P).then(B=>{const x={...B,isPositioned:Y.current!==!1};$.current&&!Dw(M.current,x)&&(M.current=x,jS.flushSync(()=>{h(x)}))})},[f,t,r,G,Y]);QE(()=>{c===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[c]);const $=T.useRef(!1);QE(()=>($.current=!0,()=>{$.current=!1}),[]),QE(()=>{if(S&&(A.current=S),I&&(D.current=I),S&&I){if(V.current)return V.current(S,I,Z);Z()}},[S,I,Z,V,H]);const F=T.useMemo(()=>({reference:A,floating:D,setReference:b,setFloating:_}),[b,_]),K=T.useMemo(()=>({reference:S,floating:I}),[S,I]),k=T.useMemo(()=>{const P={position:r,left:0,top:0};if(!K.floating)return P;const B=p5(K.floating,u.x),x=p5(K.floating,u.y);return s?{...P,transform:"translate("+B+"px, "+x+"px)",...rY(K.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:B,top:x}},[r,s,K.floating,u.x,u.y]);return T.useMemo(()=>({...u,update:Z,refs:F,elements:K,floatingStyles:k}),[u,Z,F,K,k])}const QEe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?f5({element:n.current,padding:i}).fn(r):{}:n?f5({element:n,padding:i}).fn(r):{}}}},ZEe=(e,t)=>({...WEe(e),options:[e,t]}),e_e=(e,t)=>({...qEe(e),options:[e,t]}),t_e=(e,t)=>({...YEe(e),options:[e,t]}),r_e=(e,t)=>({...KEe(e),options:[e,t]}),n_e=(e,t)=>({...QEe(e),options:[e,t]});function nY(e){return T.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})},e)}const iY={...nz},i_e=iY.useInsertionEffect,o_e=i_e||(e=>e());function Qi(e){const t=T.useRef(()=>{});return o_e(()=>{t.current=e}),T.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current==null?void 0:t.current(...n)},[])}const jD="ArrowUp",v0="ArrowDown",Zp="ArrowLeft",Dm="ArrowRight";function xb(e,t,r){return Math.floor(e/t)!==r}function Sy(e,t){return t<0||t>=e.current.length}function xx(e,t){return co(e,{disabledIndices:t})}function m5(e,t){return co(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function co(e,t){let{startingIndex:r=-1,decrement:n=!1,disabledIndices:i,amount:o=1}=t===void 0?{}:t;const a=e.current;let s=r;do s+=n?-o:o;while(s>=0&&s<=a.length-1&&ZE(a,s,i));return s}function a_e(e,t){let{event:r,orientation:n,loop:i,cols:o,disabledIndices:a,minIndex:s,maxIndex:l,prevIndex:c,stopEvent:u=!1}=t,h=c;if(r.key===jD){if(u&&Xi(r),c===-1)h=l;else if(h=co(e,{startingIndex:h,amount:o,decrement:!0,disabledIndices:a}),i&&(c-o<s||h<0)){const f=c%o,p=l%o,m=l-(p-f);p===f?h=l:h=p>f?m:m-o}Sy(e,h)&&(h=c)}if(r.key===v0&&(u&&Xi(r),c===-1?h=s:(h=co(e,{startingIndex:c,amount:o,disabledIndices:a}),i&&c+o>l&&(h=co(e,{startingIndex:c%o-o,amount:o,disabledIndices:a}))),Sy(e,h)&&(h=c)),n==="both"){const f=ep(c/o);r.key===Dm&&(u&&Xi(r),c%o!==o-1?(h=co(e,{startingIndex:c,disabledIndices:a}),i&&xb(h,o,f)&&(h=co(e,{startingIndex:c-c%o-1,disabledIndices:a}))):i&&(h=co(e,{startingIndex:c-c%o-1,disabledIndices:a})),xb(h,o,f)&&(h=c)),r.key===Zp&&(u&&Xi(r),c%o!==0?(h=co(e,{startingIndex:c,decrement:!0,disabledIndices:a}),i&&xb(h,o,f)&&(h=co(e,{startingIndex:c+(o-c%o),decrement:!0,disabledIndices:a}))):i&&(h=co(e,{startingIndex:c+(o-c%o),decrement:!0,disabledIndices:a})),xb(h,o,f)&&(h=c));const p=ep(l/o)===f;Sy(e,h)&&(i&&p?h=r.key===Zp?l:co(e,{startingIndex:c-c%o-1,disabledIndices:a}):h=c)}return h}function s_e(e,t,r){const n=[];let i=0;return e.forEach((o,a)=>{let{width:s,height:l}=o,c=!1;for(r&&(i=0);!c;){const u=[];for(let h=0;h<s;h++)for(let f=0;f<l;f++)u.push(i+h+f*t);i%t+s<=t&&u.every(h=>n[h]==null)?(u.forEach(h=>{n[h]=a}),c=!0):i++}}),[...n]}function l_e(e,t,r,n,i){if(e===-1)return-1;const o=r.indexOf(e),a=t[e];switch(i){case"tl":return o;case"tr":return a?o+a.width-1:o;case"bl":return a?o+(a.height-1)*n:o;case"br":return r.lastIndexOf(e)}}function c_e(e,t){return t.flatMap((r,n)=>e.includes(r)?[n]:[])}function ZE(e,t,r){if(r)return r.includes(t);const n=e[t];return n==null||n.hasAttribute("disabled")||n.getAttribute("aria-disabled")==="true"}let g5=0;function uu(e,t){t===void 0&&(t={});const{preventScroll:r=!1,cancelPrevious:n=!0,sync:i=!1}=t;n&&cancelAnimationFrame(g5);const o=()=>e==null?void 0:e.focus({preventScroll:r});i?o():g5=requestAnimationFrame(o)}var Xr=typeof document<"u"?T.useLayoutEffect:T.useEffect;function u_e(e,t){const r=e.compareDocumentPosition(t);return r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS?1:0}function d_e(e,t){if(e.size!==t.size)return!1;for(const[r,n]of e.entries())if(n!==t.get(r))return!1;return!0}const oY=T.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function h_e(e){const{children:t,elementsRef:r,labelsRef:n}=e,[i,o]=T.useState(()=>new Map),a=T.useCallback(l=>{o(c=>new Map(c).set(l,null))},[]),s=T.useCallback(l=>{o(c=>{const u=new Map(c);return u.delete(l),u})},[]);return Xr(()=>{const l=new Map(i);Array.from(l.keys()).sort(u_e).forEach((u,h)=>{l.set(u,h)}),d_e(i,l)||o(l)},[i]),T.createElement(oY.Provider,{value:T.useMemo(()=>({register:a,unregister:s,map:i,elementsRef:r,labelsRef:n}),[a,s,i,r,n])},t)}function f_e(e){e===void 0&&(e={});const{label:t}=e,{register:r,unregister:n,map:i,elementsRef:o,labelsRef:a}=T.useContext(oY),[s,l]=T.useState(null),c=T.useRef(null),u=T.useCallback(h=>{if(c.current=h,s!==null&&(o.current[s]=h,a)){var f;const p=t!==void 0;a.current[s]=p?t:(f=h==null?void 0:h.textContent)!=null?f:null}},[s,o,a,t]);return Xr(()=>{const h=c.current;if(h)return r(h),()=>{n(h)}},[r,n]),Xr(()=>{const h=c.current?i.get(c.current):null;h!=null&&l(h)},[i]),T.useMemo(()=>({ref:u,index:s??-1}),[s,u])}function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_v.apply(this,arguments)}let y5=!1,p_e=0;const v5=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+p_e++;function m_e(){const[e,t]=T.useState(()=>y5?v5():void 0);return Xr(()=>{e==null&&t(v5())},[]),T.useEffect(()=>{y5=!0},[]),e}const g_e=iY.useId,TT=g_e||m_e;function y_e(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(i=>i(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,((n=e.get(t))==null?void 0:n.filter(i=>i!==r))||[])}}}const v_e=T.createContext(null),b_e=T.createContext(null),CT=()=>{var e;return((e=T.useContext(v_e))==null?void 0:e.id)||null},b0=()=>T.useContext(b_e);function Qu(e){return"data-floating-ui-"+e}function wa(e){const t=T.useRef(e);return Xr(()=>{t.current=e}),t}const b5=Qu("safe-polygon");function Rx(e,t,r){return r&&!bv(r)?0:typeof e=="number"?e:e==null?void 0:e[t]}function E_e(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,dataRef:i,events:o,elements:a}=e,{enabled:s=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:h=0,move:f=!0}=t,p=b0(),m=CT(),g=wa(c),y=wa(l),v=wa(r),b=T.useRef(),_=T.useRef(-1),S=T.useRef(),I=T.useRef(-1),A=T.useRef(!0),D=T.useRef(!1),M=T.useRef(()=>{}),H=T.useCallback(()=>{var F;const K=(F=i.current.openEvent)==null?void 0:F.type;return(K==null?void 0:K.includes("mouse"))&&K!=="mousedown"},[i]);T.useEffect(()=>{if(!s)return;function F(K){let{open:k}=K;k||(clearTimeout(_.current),clearTimeout(I.current),A.current=!0)}return o.on("openchange",F),()=>{o.off("openchange",F)}},[s,o]),T.useEffect(()=>{if(!s||!g.current||!r)return;function F(k){H()&&n(!1,k,"hover")}const K=ji(a.floating).documentElement;return K.addEventListener("mouseleave",F),()=>{K.removeEventListener("mouseleave",F)}},[a.floating,r,n,s,g,H]);const V=T.useCallback(function(F,K,k){K===void 0&&(K=!0),k===void 0&&(k="hover");const P=Rx(y.current,"close",b.current);P&&!S.current?(clearTimeout(_.current),_.current=window.setTimeout(()=>n(!1,F,k),P)):K&&(clearTimeout(_.current),n(!1,F,k))},[y,n]),G=Qi(()=>{M.current(),S.current=void 0}),Y=Qi(()=>{if(D.current){const F=ji(a.floating).body;F.style.pointerEvents="",F.removeAttribute(b5),D.current=!1}});T.useEffect(()=>{if(!s)return;function F(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function K(x){if(clearTimeout(_.current),A.current=!1,u&&!bv(b.current)||h>0&&!Rx(y.current,"open"))return;const E=Rx(y.current,"open",b.current);E?_.current=window.setTimeout(()=>{v.current||n(!0,x,"hover")},E):n(!0,x,"hover")}function k(x){if(F())return;M.current();const E=ji(a.floating);if(clearTimeout(I.current),g.current&&i.current.floatingContext){r||clearTimeout(_.current),S.current=g.current({...i.current.floatingContext,tree:p,x:x.clientX,y:x.clientY,onClose(){Y(),G(),V(x,!0,"safe-polygon")}});const C=S.current;E.addEventListener("mousemove",C),M.current=()=>{E.removeEventListener("mousemove",C)};return}(b.current==="touch"?!ri(a.floating,x.relatedTarget):!0)&&V(x)}function P(x){F()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:x.clientX,y:x.clientY,onClose(){Y(),G(),V(x)}})(x))}if(tn(a.domReference)){var B;const x=a.domReference;return r&&x.addEventListener("mouseleave",P),(B=a.floating)==null||B.addEventListener("mouseleave",P),f&&x.addEventListener("mousemove",K,{once:!0}),x.addEventListener("mouseenter",K),x.addEventListener("mouseleave",k),()=>{var E;r&&x.removeEventListener("mouseleave",P),(E=a.floating)==null||E.removeEventListener("mouseleave",P),f&&x.removeEventListener("mousemove",K),x.removeEventListener("mouseenter",K),x.removeEventListener("mouseleave",k)}}},[a,s,e,u,h,f,V,G,Y,n,r,v,p,y,g,i]),Xr(()=>{var F;if(s&&r&&(F=g.current)!=null&&F.__options.blockPointerEvents&&H()){const k=ji(a.floating).body;k.setAttribute(b5,""),k.style.pointerEvents="none",D.current=!0;const P=a.floating;if(tn(a.domReference)&&P){var K;const B=a.domReference,x=p==null||(K=p.nodesRef.current.find(E=>E.id===m))==null||(K=K.context)==null?void 0:K.elements.floating;return x&&(x.style.pointerEvents=""),B.style.pointerEvents="auto",P.style.pointerEvents="auto",()=>{B.style.pointerEvents="",P.style.pointerEvents=""}}}},[s,r,m,a,p,g,H]),Xr(()=>{r||(b.current=void 0,G(),Y())},[r,G,Y]),T.useEffect(()=>()=>{G(),clearTimeout(_.current),clearTimeout(I.current),Y()},[s,a.domReference,G,Y]);const Z=T.useMemo(()=>{function F(K){b.current=K.pointerType}return{onPointerDown:F,onPointerEnter:F,onMouseMove(K){const{nativeEvent:k}=K;function P(){!A.current&&!v.current&&n(!0,k,"hover")}u&&!bv(b.current)||r||h===0||(clearTimeout(I.current),b.current==="touch"?P():I.current=window.setTimeout(P,h))}}},[u,n,r,v,h]),$=T.useMemo(()=>({onMouseEnter(){clearTimeout(_.current)},onMouseLeave(F){V(F.nativeEvent,!1)}}),[V]);return T.useMemo(()=>s?{reference:Z,floating:$}:{},[s,Z,$])}function __e(e,t){var r;let n=[],i=(r=e.find(o=>o.id===t))==null?void 0:r.parentId;for(;i;){const o=e.find(a=>a.id===i);i=o==null?void 0:o.parentId,o&&(n=n.concat(o))}return n}function uh(e,t){let r=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),n=r;for(;n.length;)n=e.filter(i=>{var o;return(o=n)==null?void 0:o.some(a=>{var s;return i.parentId===a.id&&((s=i.context)==null?void 0:s.open)})}),r=r.concat(n);return r}function w_e(e,t){let r,n=-1;function i(o,a){a>n&&(r=o,n=a),uh(e,o).forEach(l=>{i(l.id,a+1)})}return i(t,0),e.find(o=>o.id===r)}let pf=new WeakMap,Rb=new WeakSet,Ib={},Ix=0;const S_e=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,aY=e=>e&&(e.host||aY(e.parentNode)),T_e=(e,t)=>t.map(r=>{if(e.contains(r))return r;const n=aY(r);return e.contains(n)?n:null}).filter(r=>r!=null);function C_e(e,t,r,n){const i="data-floating-ui-inert",o=n?"inert":r?"aria-hidden":null,a=T_e(t,e),s=new Set,l=new Set(a),c=[];Ib[i]||(Ib[i]=new WeakMap);const u=Ib[i];a.forEach(h),f(t),s.clear();function h(p){!p||s.has(p)||(s.add(p),p.parentNode&&h(p.parentNode))}function f(p){!p||l.has(p)||[].forEach.call(p.children,m=>{if(sd(m)!=="script")if(s.has(m))f(m);else{const g=o?m.getAttribute(o):null,y=g!==null&&g!=="false",v=(pf.get(m)||0)+1,b=(u.get(m)||0)+1;pf.set(m,v),u.set(m,b),c.push(m),v===1&&y&&Rb.add(m),b===1&&m.setAttribute(i,""),!y&&o&&m.setAttribute(o,"true")}})}return Ix++,()=>{c.forEach(p=>{const m=(pf.get(p)||0)-1,g=(u.get(p)||0)-1;pf.set(p,m),u.set(p,g),m||(!Rb.has(p)&&o&&p.removeAttribute(o),Rb.delete(p)),g||p.removeAttribute(i)}),Ix--,Ix||(pf=new WeakMap,pf=new WeakMap,Rb=new WeakSet,Ib={})}}function E5(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);const n=ji(e[0]).body;return C_e(e.concat(Array.from(n.querySelectorAll("[aria-live]"))),n,t,r)}const em=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function sY(e,t){const r=Ev(e,em());t==="prev"&&r.reverse();const n=r.indexOf(Gs(ji(e)));return r.slice(n+1)[0]}function lY(){return sY(document.body,"next")}function cY(){return sY(document.body,"prev")}function Ty(e,t){const r=t||e.currentTarget,n=e.relatedTarget;return!n||!ri(r,n)}function x_e(e){Ev(e,em()).forEach(r=>{r.dataset.tabindex=r.getAttribute("tabindex")||"",r.setAttribute("tabindex","-1")})}function R_e(e){e.querySelectorAll("[data-tabindex]").forEach(r=>{const n=r.dataset.tabindex;delete r.dataset.tabindex,n?r.setAttribute("tabindex",n):r.removeAttribute("tabindex")})}function I_e(e,t,r){const n=e.indexOf(t);function i(a){const s=Qu("focus-guard");let l=n+(a?1:0),c=e[l];for(;c&&(!c.isConnected||c.hasAttribute(s)||ri(r,c));)a?l++:l--,c=e[l];return c}const o=i(!0);return o||i(!1)}const UD={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let N_e;function _5(e){e.key==="Tab"&&(e.target,clearTimeout(N_e))}const Lw=T.forwardRef(function(t,r){const[n,i]=T.useState();Xr(()=>(AD()&&i("button"),document.addEventListener("keydown",_5),()=>{document.removeEventListener("keydown",_5)}),[]);const o={ref:r,tabIndex:0,role:n,"aria-hidden":n?void 0:!0,[Qu("focus-guard")]:"",style:UD};return T.createElement("span",_v({},t,o))}),uY=T.createContext(null),w5=Qu("portal");function A_e(e){e===void 0&&(e={});const{id:t,root:r}=e,n=TT(),i=dY(),[o,a]=T.useState(null),s=T.useRef(null);return Xr(()=>()=>{o==null||o.remove(),queueMicrotask(()=>{s.current=null})},[o]),Xr(()=>{if(!n||s.current)return;const l=t?document.getElementById(t):null;if(!l)return;const c=document.createElement("div");c.id=n,c.setAttribute(w5,""),l.appendChild(c),s.current=c,a(c)},[t,n]),Xr(()=>{if(!n||s.current)return;let l=r||(i==null?void 0:i.portalNode);l&&!tn(l)&&(l=l.current),l=l||document.body;let c=null;t&&(c=document.createElement("div"),c.id=t,l.appendChild(c));const u=document.createElement("div");u.id=n,u.setAttribute(w5,""),l=c||l,l.appendChild(u),s.current=u,a(u)},[t,r,n,i]),o}function O_e(e){const{children:t,id:r,root:n=null,preserveTabOrder:i=!0}=e,o=A_e({id:r,root:n}),[a,s]=T.useState(null),l=T.useRef(null),c=T.useRef(null),u=T.useRef(null),h=T.useRef(null),f=!!a&&!a.modal&&a.open&&i&&!!(n||o);return T.useEffect(()=>{if(!o||!i||a!=null&&a.modal)return;function p(m){o&&Ty(m)&&(m.type==="focusin"?R_e:x_e)(o)}return o.addEventListener("focusin",p,!0),o.addEventListener("focusout",p,!0),()=>{o.removeEventListener("focusin",p,!0),o.removeEventListener("focusout",p,!0)}},[o,i,a==null?void 0:a.modal]),T.createElement(uY.Provider,{value:T.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:u,afterInsideRef:h,portalNode:o,setFocusManagerState:s}),[i,o])},f&&o&&T.createElement(Lw,{"data-type":"outside",ref:l,onFocus:p=>{if(Ty(p,o)){var m;(m=u.current)==null||m.focus()}else{const g=cY()||(a==null?void 0:a.refs.domReference.current);g==null||g.focus()}}}),f&&o&&T.createElement("span",{"aria-owns":o.id,style:UD}),o&&jS.createPortal(t,o),f&&o&&T.createElement(Lw,{"data-type":"outside",ref:c,onFocus:p=>{if(Ty(p,o)){var m;(m=h.current)==null||m.focus()}else{const g=lY()||(a==null?void 0:a.refs.domReference.current);g==null||g.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1,p.nativeEvent))}}}))}const dY=()=>T.useContext(uY),S5=20;let Pd=[];function Nx(e){Pd=Pd.filter(r=>r.isConnected);let t=e;if(!(!t||sd(t)==="body")){if(!wEe(t,em())){const r=Ev(t,em())[0];r&&(t=r)}Pd.push(t),Pd.length>S5&&(Pd=Pd.slice(-S5))}}function T5(){return Pd.slice().reverse().find(e=>e.isConnected)}const k_e=T.forwardRef(function(t,r){return T.createElement("button",_v({},t,{type:"button",ref:r,tabIndex:-1,style:UD}))});function hY(e){const{context:t,children:r,disabled:n=!1,order:i=["content"],guards:o=!0,initialFocus:a=0,returnFocus:s=!0,restoreFocus:l=!1,modal:c=!0,visuallyHiddenDismiss:u=!1,closeOnFocusOut:h=!0}=e,{open:f,refs:p,nodeId:m,onOpenChange:g,events:y,dataRef:v,floatingId:b,elements:{domReference:_,floating:S}}=t,I=typeof a=="number"&&a<0,A=$q(_)&&I,D=S_e()?o:!0,M=wa(i),H=wa(a),V=wa(s),G=b0(),Y=dY(),Z=T.useRef(null),$=T.useRef(null),F=T.useRef(!1),K=T.useRef(!1),k=T.useRef(-1),P=Y!=null,B=S==null?void 0:S.firstElementChild,x=(B==null?void 0:B.id)===b?B:S,E=Qi(function(U){return U===void 0&&(U=x),U?Ev(U,em()):[]}),N=Qi(U=>{const X=E(U);return M.current.map(ae=>_&&ae==="reference"?_:x&&ae==="floating"?x:X).filter(Boolean).flat()});T.useEffect(()=>{if(n||!c)return;function U(ae){if(ae.key==="Tab"){ri(x,Gs(ji(x)))&&E().length===0&&!A&&Xi(ae);const he=N(),pe=pc(ae);M.current[0]==="reference"&&pe===_&&(Xi(ae),ae.shiftKey?uu(he[he.length-1]):uu(he[1])),M.current[1]==="floating"&&pe===x&&ae.shiftKey&&(Xi(ae),uu(he[0]))}}const X=ji(x);return X.addEventListener("keydown",U),()=>{X.removeEventListener("keydown",U)}},[n,_,x,c,M,A,E,N]),T.useEffect(()=>{if(n||!S)return;function U(X){const ae=pc(X),pe=E().indexOf(ae);pe!==-1&&(k.current=pe)}return S.addEventListener("focusin",U),()=>{S.removeEventListener("focusin",U)}},[n,S,E]),T.useEffect(()=>{if(n||!h)return;function U(){K.current=!0,setTimeout(()=>{K.current=!1})}function X(ae){const he=ae.relatedTarget;queueMicrotask(()=>{const pe=!(ri(_,he)||ri(S,he)||ri(he,S)||ri(Y==null?void 0:Y.portalNode,he)||he!=null&&he.hasAttribute(Qu("focus-guard"))||G&&(uh(G.nodesRef.current,m).find(Pe=>{var $e,je;return ri(($e=Pe.context)==null?void 0:$e.elements.floating,he)||ri((je=Pe.context)==null?void 0:je.elements.domReference,he)})||__e(G.nodesRef.current,m).find(Pe=>{var $e,je;return(($e=Pe.context)==null?void 0:$e.elements.floating)===he||((je=Pe.context)==null?void 0:je.elements.domReference)===he})));if(l&&pe&&Gs(ji(x))===ji(x).body){oi(x)&&(x==null||x.focus());const Pe=k.current,$e=E(),je=$e[Pe]||$e[$e.length-1]||x;oi(je)&&je.focus()}(A||!c)&&he&&pe&&!K.current&&he!==T5()&&(F.current=!0,g(!1,ae))})}if(S&&oi(_))return _.addEventListener("focusout",X),_.addEventListener("pointerdown",U),S.addEventListener("focusout",X),()=>{_.removeEventListener("focusout",X),_.removeEventListener("pointerdown",U),S.removeEventListener("focusout",X)}},[n,_,S,x,c,m,G,Y,g,h,l,E,A]),T.useEffect(()=>{var U;if(n)return;const X=Array.from((Y==null||(U=Y.portalNode)==null?void 0:U.querySelectorAll("["+Qu("portal")+"]"))||[]);if(S){const ae=[S,...X,Z.current,$.current,M.current.includes("reference")||A?_:null].filter(pe=>pe!=null),he=c||A?E5(ae,D,!D):E5(ae);return()=>{he()}}},[n,_,S,c,M,Y,A,D]),Xr(()=>{if(n||!oi(x))return;const U=ji(x),X=Gs(U);queueMicrotask(()=>{const ae=N(x),he=H.current,pe=(typeof he=="number"?ae[he]:he.current)||x,Pe=ri(x,X);!I&&!Pe&&f&&uu(pe,{preventScroll:pe===x})})},[n,f,x,I,N,H]),Xr(()=>{if(n||!x)return;let U=!1;const X=ji(x),ae=Gs(X);let pe=v.current.openEvent;const Pe=p.domReference.current;Nx(ae);function $e(je){let{open:ot,reason:Nt,event:et,nested:bt}=je;ot&&(pe=et),Nt==="escape-key"&&p.domReference.current&&Nx(p.domReference.current),Nt==="hover"&&et.type==="mouseleave"&&(F.current=!0),Nt==="outside-press"&&(bt?(F.current=!1,U=!0):F.current=!(Vq(et)||ND(et)))}return y.on("openchange",$e),()=>{y.off("openchange",$e);const je=Gs(X),ot=ri(S,je)||G&&uh(G.nodesRef.current,m).some(Ie=>{var rt;return ri((rt=Ie.context)==null?void 0:rt.elements.floating,je)});(ot||pe&&["click","mousedown"].includes(pe.type))&&p.domReference.current&&Nx(p.domReference.current);const et=Pe||ae,bt=Ev(ji(et).body,em());queueMicrotask(()=>{let Ie=T5();!Ie&&oi(et)&&S&&(Ie=I_e(bt,et,S)),V.current&&!F.current&&oi(Ie)&&(!(Ie!==je&&je!==X.body)||ot)&&Ie.focus({preventScroll:U})})}},[n,S,x,V,v,p,y,G,m]),Xr(()=>{if(!n&&Y)return Y.setFocusManagerState({modal:c,closeOnFocusOut:h,open:f,onOpenChange:g,refs:p}),()=>{Y.setFocusManagerState(null)}},[n,Y,c,f,g,p,h]),Xr(()=>{if(n||!x||typeof MutationObserver!="function"||I)return;const U=()=>{const ae=x.getAttribute("tabindex"),he=E(),pe=Gs(ji(S)),Pe=he.indexOf(pe);Pe!==-1&&(k.current=Pe),M.current.includes("floating")||pe!==p.domReference.current&&he.length===0?ae!=="0"&&x.setAttribute("tabindex","0"):ae!=="-1"&&x.setAttribute("tabindex","-1")};U();const X=new MutationObserver(U);return X.observe(x,{childList:!0,subtree:!0,attributes:!0}),()=>{X.disconnect()}},[n,S,x,p,M,E,I]);function C(U){return n||!u||!c?null:T.createElement(k_e,{ref:U==="start"?Z:$,onClick:X=>g(!1,X.nativeEvent)},typeof u=="string"?u:"Dismiss")}const W=!n&&D&&(c?!A:!0)&&(P||c);return T.createElement(T.Fragment,null,W&&T.createElement(Lw,{"data-type":"inside",ref:Y==null?void 0:Y.beforeInsideRef,onFocus:U=>{if(c){const ae=N();uu(i[0]==="reference"?ae[0]:ae[ae.length-1])}else if(Y!=null&&Y.preserveTabOrder&&Y.portalNode)if(F.current=!1,Ty(U,Y.portalNode)){const ae=lY()||_;ae==null||ae.focus()}else{var X;(X=Y.beforeOutsideRef.current)==null||X.focus()}}}),!A&&C("start"),r,C("end"),W&&T.createElement(Lw,{"data-type":"inside",ref:Y==null?void 0:Y.afterInsideRef,onFocus:U=>{if(c)uu(N()[0]);else if(Y!=null&&Y.preserveTabOrder&&Y.portalNode)if(h&&(F.current=!0),Ty(U,Y.portalNode)){const ae=cY()||_;ae==null||ae.focus()}else{var X;(X=Y.afterOutsideRef.current)==null||X.focus()}}}))}const Ax=new Set,P_e=T.forwardRef(function(t,r){const{lockScroll:n=!1,...i}=t,o=TT();return Xr(()=>{if(!n)return;Ax.add(o);const a=/iP(hone|ad|od)|iOS/.test(ID()),s=document.body.style,c=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",u=window.innerWidth-document.documentElement.clientWidth,h=s.left?parseFloat(s.left):window.scrollX,f=s.top?parseFloat(s.top):window.scrollY;if(s.overflow="hidden",u&&(s[c]=u+"px"),a){var p,m;const g=((p=window.visualViewport)==null?void 0:p.offsetLeft)||0,y=((m=window.visualViewport)==null?void 0:m.offsetTop)||0;Object.assign(s,{position:"fixed",top:-(f-Math.floor(y))+"px",left:-(h-Math.floor(g))+"px",right:"0"})}return()=>{Ax.delete(o),Ax.size===0&&(Object.assign(s,{overflow:"",[c]:""}),a&&(Object.assign(s,{position:"",top:"",left:"",right:""}),window.scrollTo(h,f)))}},[o,n]),T.createElement("div",_v({ref:r},i,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}}))});function C5(e){return oi(e.target)&&e.target.tagName==="BUTTON"}function x5(e){return OD(e)}function fY(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,dataRef:i,elements:{domReference:o}}=e,{enabled:a=!0,event:s="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:u=!0}=t,h=T.useRef(),f=T.useRef(!1),p=T.useMemo(()=>({onPointerDown(m){h.current=m.pointerType},onMouseDown(m){const g=h.current;m.button===0&&s!=="click"&&(bv(g,!0)&&c||(r&&l&&(!i.current.openEvent||i.current.openEvent.type==="mousedown")?n(!1,m.nativeEvent,"click"):(m.preventDefault(),n(!0,m.nativeEvent,"click"))))},onClick(m){const g=h.current;if(s==="mousedown"&&h.current){h.current=void 0;return}bv(g,!0)&&c||(r&&l&&(!i.current.openEvent||i.current.openEvent.type==="click")?n(!1,m.nativeEvent,"click"):n(!0,m.nativeEvent,"click"))},onKeyDown(m){h.current=void 0,!(m.defaultPrevented||!u||C5(m))&&(m.key===" "&&!x5(o)&&(m.preventDefault(),f.current=!0),m.key==="Enter"&&n(!(r&&l),m.nativeEvent,"click"))},onKeyUp(m){m.defaultPrevented||!u||C5(m)||x5(o)||m.key===" "&&f.current&&(f.current=!1,n(!(r&&l),m.nativeEvent,"click"))}}),[i,o,s,c,u,n,r,l]);return T.useMemo(()=>a?{reference:p}:{},[a,p])}const D_e={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},L_e={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},R5=e=>{var t,r;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(r=e==null?void 0:e.outsidePress)!=null?r:!0}};function pY(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,elements:i,dataRef:o}=e,{enabled:a=!0,escapeKey:s=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:h="pointerdown",ancestorScroll:f=!1,bubbles:p,capture:m}=t,g=b0(),y=Qi(typeof l=="function"?l:()=>!1),v=typeof l=="function"?y:l,b=T.useRef(!1),_=T.useRef(!1),{escapeKey:S,outsidePress:I}=R5(p),{escapeKey:A,outsidePress:D}=R5(m),M=Qi($=>{var F;if(!r||!a||!s||$.key!=="Escape")return;const K=(F=o.current.floatingContext)==null?void 0:F.nodeId,k=g?uh(g.nodesRef.current,K):[];if(!S&&($.stopPropagation(),k.length>0)){let P=!0;if(k.forEach(B=>{var x;if((x=B.context)!=null&&x.open&&!B.context.dataRef.current.__escapeKeyBubbles){P=!1;return}}),!P)return}n(!1,qbe($)?$.nativeEvent:$,"escape-key")}),H=Qi($=>{var F;const K=()=>{var k;M($),(k=pc($))==null||k.removeEventListener("keydown",K)};(F=pc($))==null||F.addEventListener("keydown",K)}),V=Qi($=>{var F;const K=b.current;b.current=!1;const k=_.current;if(_.current=!1,c==="click"&&k||K||typeof v=="function"&&!v($))return;const P=pc($),B="["+Qu("inert")+"]",x=ji(i.floating).querySelectorAll(B);let E=tn(P)?P:null;for(;E&&!Ju(E);){const U=Oc(E);if(Ju(U)||!tn(U))break;E=U}if(x.length&&tn(P)&&!Ybe(P)&&!ri(P,i.floating)&&Array.from(x).every(U=>!ri(E,U)))return;if(oi(P)&&Z){const U=P.clientWidth>0&&P.scrollWidth>P.clientWidth,X=P.clientHeight>0&&P.scrollHeight>P.clientHeight;let ae=X&&$.offsetX>P.clientWidth;if(X&&_s(P).direction==="rtl"&&(ae=$.offsetX<=P.offsetWidth-P.clientWidth),ae||U&&$.offsetY>P.clientHeight)return}const N=(F=o.current.floatingContext)==null?void 0:F.nodeId,C=g&&uh(g.nodesRef.current,N).some(U=>{var X;return Sx($,(X=U.context)==null?void 0:X.elements.floating)});if(Sx($,i.floating)||Sx($,i.domReference)||C)return;const W=g?uh(g.nodesRef.current,N):[];if(W.length>0){let U=!0;if(W.forEach(X=>{var ae;if((ae=X.context)!=null&&ae.open&&!X.context.dataRef.current.__outsidePressBubbles){U=!1;return}}),!U)return}n(!1,$,"outside-press")}),G=Qi($=>{var F;const K=()=>{var k;V($),(k=pc($))==null||k.removeEventListener(c,K)};(F=pc($))==null||F.addEventListener(c,K)});T.useEffect(()=>{if(!r||!a)return;o.current.__escapeKeyBubbles=S,o.current.__outsidePressBubbles=I;function $(k){n(!1,k,"ancestor-scroll")}const F=ji(i.floating);s&&F.addEventListener("keydown",A?H:M,A),v&&F.addEventListener(c,D?G:V,D);let K=[];return f&&(tn(i.domReference)&&(K=Uu(i.domReference)),tn(i.floating)&&(K=K.concat(Uu(i.floating))),!tn(i.reference)&&i.reference&&i.reference.contextElement&&(K=K.concat(Uu(i.reference.contextElement)))),K=K.filter(k=>{var P;return k!==((P=F.defaultView)==null?void 0:P.visualViewport)}),K.forEach(k=>{k.addEventListener("scroll",$,{passive:!0})}),()=>{s&&F.removeEventListener("keydown",A?H:M,A),v&&F.removeEventListener(c,D?G:V,D),K.forEach(k=>{k.removeEventListener("scroll",$)})}},[o,i,s,v,c,r,n,f,a,S,I,M,A,H,V,D,G]),T.useEffect(()=>{b.current=!1},[v,c]);const Y=T.useMemo(()=>({onKeyDown:M,[D_e[h]]:$=>{u&&n(!1,$.nativeEvent,"reference-press")}}),[M,n,u,h]),Z=T.useMemo(()=>({onKeyDown:M,onMouseDown(){_.current=!0},onMouseUp(){_.current=!0},[L_e[c]]:()=>{b.current=!0}}),[M,c]);return T.useMemo(()=>a?{reference:Y,floating:Z}:{},[a,Y,Z])}function M_e(e){const{open:t=!1,onOpenChange:r,elements:n}=e,i=TT(),o=T.useRef({}),[a]=T.useState(()=>y_e()),s=CT()!=null,[l,c]=T.useState(n.reference),u=Qi((p,m,g)=>{o.current.openEvent=p?m:void 0,a.emit("openchange",{open:p,event:m,reason:g,nested:s}),r==null||r(p,m,g)}),h=T.useMemo(()=>({setPositionReference:c}),[]),f=T.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return T.useMemo(()=>({dataRef:o,open:t,onOpenChange:u,elements:f,events:a,floatingId:i,refs:h}),[t,u,f,a,i,h])}function mY(e){e===void 0&&(e={});const{nodeId:t}=e,r=M_e({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,i=n.elements,[o,a]=T.useState(null),[s,l]=T.useState(null),u=(i==null?void 0:i.reference)||o,h=T.useRef(null),f=b0();Xr(()=>{u&&(h.current=u)},[u]);const p=JEe({...e,elements:{...i,...s&&{reference:s}}}),m=T.useCallback(_=>{const S=tn(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;l(S),p.refs.setReference(S)},[p.refs]),g=T.useCallback(_=>{(tn(_)||_===null)&&(h.current=_,a(_)),(tn(p.refs.reference.current)||p.refs.reference.current===null||_!==null&&!tn(_))&&p.refs.setReference(_)},[p.refs]),y=T.useMemo(()=>({...p.refs,setReference:g,setPositionReference:m,domReference:h}),[p.refs,g,m]),v=T.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),b=T.useMemo(()=>({...p,...n,refs:y,elements:v,nodeId:t}),[p,y,v,t,n]);return Xr(()=>{n.dataRef.current.floatingContext=b;const _=f==null?void 0:f.nodesRef.current.find(S=>S.id===t);_&&(_.context=b)}),T.useMemo(()=>({...p,context:b,refs:y,elements:v}),[p,y,v,b])}function j_e(e,t){t===void 0&&(t={});const{open:r,onOpenChange:n,events:i,dataRef:o,elements:a}=e,{enabled:s=!0,visibleOnly:l=!0}=t,c=T.useRef(!1),u=T.useRef(),h=T.useRef(!0);T.useEffect(()=>{if(!s)return;const p=ta(a.domReference);function m(){!r&&oi(a.domReference)&&a.domReference===Gs(ji(a.domReference))&&(c.current=!0)}function g(){h.current=!0}return p.addEventListener("blur",m),p.addEventListener("keydown",g,!0),()=>{p.removeEventListener("blur",m),p.removeEventListener("keydown",g,!0)}},[a.domReference,r,s]),T.useEffect(()=>{if(!s)return;function p(m){let{reason:g}=m;(g==="reference-press"||g==="escape-key")&&(c.current=!0)}return i.on("openchange",p),()=>{i.off("openchange",p)}},[i,s]),T.useEffect(()=>()=>{clearTimeout(u.current)},[]);const f=T.useMemo(()=>({onPointerDown(p){ND(p.nativeEvent)||(h.current=!1)},onMouseLeave(){c.current=!1},onFocus(p){if(c.current)return;const m=pc(p.nativeEvent);if(l&&tn(m))try{if(AD()&&Bq())throw Error();if(!m.matches(":focus-visible"))return}catch{if(!h.current&&!OD(m))return}n(!0,p.nativeEvent,"focus")},onBlur(p){c.current=!1;const m=p.relatedTarget,g=p.nativeEvent,y=tn(m)&&m.hasAttribute(Qu("focus-guard"))&&m.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var v;const b=Gs(a.domReference?a.domReference.ownerDocument:document);!m&&b===a.domReference||ri((v=o.current.floatingContext)==null?void 0:v.refs.floating.current,b)||ri(a.domReference,b)||y||n(!1,g,"focus")})}}),[o,a.domReference,n,l]);return T.useMemo(()=>s?{reference:f}:{},[s,f])}const I5="active",N5="selected";function Ox(e,t,r){const n=new Map,i=r==="item";let o=e;if(i&&e){const{[I5]:a,[N5]:s,...l}=e;o=l}return{...r==="floating"&&{tabIndex:-1},...o,...t.map(a=>{const s=a?a[r]:null;return typeof s=="function"?e?s(e):null:s}).concat(e).reduce((a,s)=>(s&&Object.entries(s).forEach(l=>{let[c,u]=l;if(!(i&&[I5,N5].includes(c)))if(c.indexOf("on")===0){if(n.has(c)||n.set(c,[]),typeof u=="function"){var h;(h=n.get(c))==null||h.push(u),a[c]=function(){for(var f,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return(f=n.get(c))==null?void 0:f.map(y=>y(...m)).find(y=>y!==void 0)}}}else a[c]=u}),a),{})}}function gY(e){e===void 0&&(e=[]);const t=e.map(s=>s==null?void 0:s.reference),r=e.map(s=>s==null?void 0:s.floating),n=e.map(s=>s==null?void 0:s.item),i=T.useCallback(s=>Ox(s,e,"reference"),t),o=T.useCallback(s=>Ox(s,e,"floating"),r),a=T.useCallback(s=>Ox(s,e,"item"),n);return T.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:a}),[i,o,a])}let A5=!1;function xT(e,t,r){switch(e){case"vertical":return t;case"horizontal":return r;default:return t||r}}function O5(e,t){return xT(t,e===jD||e===v0,e===Zp||e===Dm)}function kx(e,t,r){return xT(t,e===v0,r?e===Zp:e===Dm)||e==="Enter"||e===" "||e===""}function U_e(e,t,r){return xT(t,r?e===Zp:e===Dm,e===v0)}function k5(e,t,r){return xT(t,r?e===Dm:e===Zp,e===jD)}function F_e(e,t){const{open:r,onOpenChange:n,elements:i}=e,{listRef:o,activeIndex:a,onNavigate:s=()=>{},enabled:l=!0,selectedIndex:c=null,allowEscape:u=!1,loop:h=!1,nested:f=!1,rtl:p=!1,virtual:m=!1,focusItemOnOpen:g="auto",focusItemOnHover:y=!0,openOnArrowKeyDown:v=!0,disabledIndices:b=void 0,orientation:_="vertical",cols:S=1,scrollItemIntoView:I=!0,virtualItemRef:A,itemSizes:D,dense:M=!1}=t,H=CT(),V=b0(),G=Qi(s),Y=T.useRef(g),Z=T.useRef(c??-1),$=T.useRef(null),F=T.useRef(!0),K=T.useRef(G),k=T.useRef(!!i.floating),P=T.useRef(r),B=T.useRef(!1),x=T.useRef(!1),E=wa(b),N=wa(r),C=wa(I),W=wa(i.floating),U=wa(c),[X,ae]=T.useState(),[he,pe]=T.useState(),Pe=Qi(function(Ie,rt,He){He===void 0&&(He=!1);function Ze(re){m?(ae(re.id),V==null||V.events.emit("virtualfocus",re),A&&(A.current=re)):uu(re,{preventScroll:!0,sync:Bq()&&AD()?A5||B.current:!1})}const qe=Ie.current[rt.current];qe&&Ze(qe),requestAnimationFrame(()=>{const re=Ie.current[rt.current]||qe;if(!re)return;qe||Ze(re);const Ae=C.current;Ae&&je&&(He||!F.current)&&(re.scrollIntoView==null||re.scrollIntoView(typeof Ae=="boolean"?{block:"nearest",inline:"nearest"}:Ae))})});Xr(()=>{document.createElement("div").focus({get preventScroll(){return A5=!0,!1}})},[]),Xr(()=>{l&&(r&&i.floating?Y.current&&c!=null&&(x.current=!0,Z.current=c,G(c)):k.current&&(Z.current=-1,K.current(null)))},[l,r,i.floating,c,G]),Xr(()=>{if(l&&r&&i.floating)if(a==null){if(B.current=!1,U.current!=null)return;if(k.current&&(Z.current=-1,Pe(o,Z)),(!P.current||!k.current)&&Y.current&&($.current!=null||Y.current===!0&&$.current==null)){let Ie=0;const rt=()=>{o.current[0]==null?(Ie<2&&(Ie?requestAnimationFrame:queueMicrotask)(rt),Ie++):(Z.current=$.current==null||kx($.current,_,p)||f?xx(o,E.current):m5(o,E.current),$.current=null,G(Z.current))};rt()}}else Sy(o,a)||(Z.current=a,Pe(o,Z,x.current),x.current=!1)},[l,r,i.floating,a,U,f,o,_,p,G,Pe,E]),Xr(()=>{var Ie;if(!l||i.floating||!V||m||!k.current)return;const rt=V.nodesRef.current,He=(Ie=rt.find(re=>re.id===H))==null||(Ie=Ie.context)==null?void 0:Ie.elements.floating,Ze=Gs(ji(i.floating)),qe=rt.some(re=>re.context&&ri(re.context.elements.floating,Ze));He&&!qe&&F.current&&He.focus({preventScroll:!0})},[l,i.floating,V,H,m]),Xr(()=>{if(!l||!V||!m||H)return;function Ie(rt){pe(rt.id),A&&(A.current=rt)}return V.events.on("virtualfocus",Ie),()=>{V.events.off("virtualfocus",Ie)}},[l,V,m,H,A]),Xr(()=>{K.current=G,k.current=!!i.floating}),Xr(()=>{r||($.current=null)},[r]),Xr(()=>{P.current=r},[r]);const $e=a!=null,je=T.useMemo(()=>{function Ie(He){if(!r)return;const Ze=o.current.indexOf(He);Ze!==-1&&G(Ze)}return{onFocus(He){let{currentTarget:Ze}=He;Ie(Ze)},onClick:He=>{let{currentTarget:Ze}=He;return Ze.focus({preventScroll:!0})},...y&&{onMouseMove(He){let{currentTarget:Ze}=He;Ie(Ze)},onPointerLeave(He){let{pointerType:Ze}=He;!F.current||Ze==="touch"||(Z.current=-1,Pe(o,Z),G(null),m||uu(W.current,{preventScroll:!0}))}}}},[r,W,Pe,y,o,G,m]),ot=Qi(Ie=>{if(F.current=!1,B.current=!0,!N.current&&Ie.currentTarget===W.current)return;if(f&&k5(Ie.key,_,p)){Xi(Ie),n(!1,Ie.nativeEvent,"list-navigation"),oi(i.domReference)&&!m&&i.domReference.focus();return}const rt=Z.current,He=xx(o,b),Ze=m5(o,b);if(Ie.key==="Home"&&(Xi(Ie),Z.current=He,G(Z.current)),Ie.key==="End"&&(Xi(Ie),Z.current=Ze,G(Z.current)),S>1){const qe=D||Array.from({length:o.current.length},()=>({width:1,height:1})),re=s_e(qe,S,M),Ae=re.findIndex(We=>We!=null&&!ZE(o.current,We,b)),Fe=re.reduce((We,ne,ye)=>ne!=null&&!ZE(o.current,ne,b)?ye:We,-1);if(Z.current=re[a_e({current:re.map(We=>We!=null?o.current[We]:null)},{event:Ie,orientation:_,loop:h,cols:S,disabledIndices:c_e([...b||o.current.map((We,ne)=>ZE(o.current,ne)?ne:void 0),void 0],re),minIndex:Ae,maxIndex:Fe,prevIndex:l_e(Z.current>Ze?He:Z.current,qe,re,S,Ie.key===v0?"bl":Ie.key===Dm?"tr":"tl"),stopEvent:!0})],G(Z.current),_==="both")return}if(O5(Ie.key,_)){if(Xi(Ie),r&&!m&&Gs(Ie.currentTarget.ownerDocument)===Ie.currentTarget){Z.current=kx(Ie.key,_,p)?He:Ze,G(Z.current);return}kx(Ie.key,_,p)?h?Z.current=rt>=Ze?u&&rt!==o.current.length?-1:He:co(o,{startingIndex:rt,disabledIndices:b}):Z.current=Math.min(Ze,co(o,{startingIndex:rt,disabledIndices:b})):h?Z.current=rt<=He?u&&rt!==-1?o.current.length:Ze:co(o,{startingIndex:rt,decrement:!0,disabledIndices:b}):Z.current=Math.max(He,co(o,{startingIndex:rt,decrement:!0,disabledIndices:b})),Sy(o,Z.current)?G(null):G(Z.current)}}),Nt=T.useMemo(()=>m&&r&&$e&&{"aria-activedescendant":he||X},[m,r,$e,he,X]),et=T.useMemo(()=>({"aria-orientation":_==="both"?void 0:_,...!$q(i.domReference)&&Nt,onKeyDown:ot,onPointerMove(){F.current=!0}}),[Nt,ot,i.domReference,_]),bt=T.useMemo(()=>{function Ie(He){g==="auto"&&Vq(He.nativeEvent)&&(Y.current=!0)}function rt(He){Y.current=g,g==="auto"&&ND(He.nativeEvent)&&(Y.current=!0)}return{...Nt,onKeyDown(He){F.current=!1;const Ze=He.key.indexOf("Arrow")===0,qe=U_e(He.key,_,p),re=k5(He.key,_,p),Ae=O5(He.key,_),Fe=(f?qe:Ae)||He.key==="Enter"||He.key.trim()==="";if(m&&r){const Je=V==null?void 0:V.nodesRef.current.find(qt=>qt.parentId==null),ut=V&&Je?w_e(V.nodesRef.current,Je.id):null;if(Ze&&ut&&A){const qt=new KeyboardEvent("keydown",{key:He.key,bubbles:!0});if(qe||re){var We,ne;const Vn=((We=ut.context)==null?void 0:We.elements.domReference)===He.currentTarget,Cn=re&&!Vn?(ne=ut.context)==null?void 0:ne.elements.domReference:qe?o.current.find(yi=>(yi==null?void 0:yi.id)===X):null;Cn&&(Xi(He),Cn.dispatchEvent(qt),pe(void 0))}if(Ae&&ut.context&&ut.context.open&&ut.parentId&&He.currentTarget!==ut.context.elements.domReference){var ye;Xi(He),(ye=ut.context.elements.domReference)==null||ye.dispatchEvent(qt);return}}return ot(He)}if(!(!r&&!v&&Ze)){if(Fe&&($.current=f&&Ae?null:He.key),f){qe&&(Xi(He),r?(Z.current=xx(o,E.current),G(Z.current)):n(!0,He.nativeEvent,"list-navigation"));return}Ae&&(c!=null&&(Z.current=c),Xi(He),!r&&v?n(!0,He.nativeEvent,"list-navigation"):ot(He),r&&G(Z.current))}},onFocus(){r&&!m&&G(null)},onPointerDown:rt,onMouseDown:Ie,onClick:Ie}},[X,Nt,ot,E,g,o,f,G,n,r,v,_,p,c,V,m,A]);return T.useMemo(()=>l?{reference:bt,floating:et,item:je}:{},[l,bt,et,je])}const V_e=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function yY(e,t){var r;t===void 0&&(t={});const{open:n,floatingId:i}=e,{enabled:o=!0,role:a="dialog"}=t,s=(r=V_e.get(a))!=null?r:a,l=TT(),u=CT()!=null,h=T.useMemo(()=>s==="tooltip"||a==="label"?{["aria-"+(a==="label"?"labelledby":"describedby")]:n?i:void 0}:{"aria-expanded":n?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":n?i:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:l},...s==="menu"&&u&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},[s,i,u,n,l,a]),f=T.useMemo(()=>{const m={id:i,...s&&{role:s}};return s==="tooltip"||a==="label"?m:{...m,...s==="menu"&&{"aria-labelledby":l}}},[s,i,l,a]),p=T.useCallback(m=>{let{active:g,selected:y}=m;const v={role:"option",...g&&{id:i+"-option"}};switch(a){case"select":return{...v,"aria-selected":g&&y};case"combobox":return{...v,...g&&{"aria-selected":!0}}}return{}},[i,a]);return T.useMemo(()=>o?{reference:h,floating:f,item:p}:{},[o,h,f,p])}function B_e(e,t){var r;const{open:n,dataRef:i}=e,{listRef:o,activeIndex:a,onMatch:s,onTypingChange:l,enabled:c=!0,findMatch:u=null,resetMs:h=750,ignoreKeys:f=[],selectedIndex:p=null}=t,m=T.useRef(),g=T.useRef(""),y=T.useRef((r=p??a)!=null?r:-1),v=T.useRef(null),b=Qi(s),_=Qi(l),S=wa(u),I=wa(f);Xr(()=>{n&&(clearTimeout(m.current),v.current=null,g.current="")},[n]),Xr(()=>{if(n&&g.current===""){var V;y.current=(V=p??a)!=null?V:-1}},[n,p,a]);const A=Qi(V=>{V?i.current.typing||(i.current.typing=V,_(V)):i.current.typing&&(i.current.typing=V,_(V))}),D=Qi(V=>{function G(K,k,P){const B=S.current?S.current(k,P):k.find(x=>(x==null?void 0:x.toLocaleLowerCase().indexOf(P.toLocaleLowerCase()))===0);return B?K.indexOf(B):-1}const Y=o.current;if(g.current.length>0&&g.current[0]!==" "&&(G(Y,Y,g.current)===-1?A(!1):V.key===" "&&Xi(V)),Y==null||I.current.includes(V.key)||V.key.length!==1||V.ctrlKey||V.metaKey||V.altKey)return;n&&V.key!==" "&&(Xi(V),A(!0)),Y.every(K=>{var k,P;return K?((k=K[0])==null?void 0:k.toLocaleLowerCase())!==((P=K[1])==null?void 0:P.toLocaleLowerCase()):!0})&&g.current===V.key&&(g.current="",y.current=v.current),g.current+=V.key,clearTimeout(m.current),m.current=setTimeout(()=>{g.current="",y.current=v.current,A(!1)},h);const $=y.current,F=G(Y,[...Y.slice(($||0)+1),...Y.slice(0,($||0)+1)],g.current);F!==-1?(b(F),v.current=F):V.key!==" "&&(g.current="",A(!1))}),M=T.useMemo(()=>({onKeyDown:D}),[D]),H=T.useMemo(()=>({onKeyDown:D,onKeyUp(V){V.key===" "&&A(!1)}}),[D,A]);return T.useMemo(()=>c?{reference:M,floating:H}:{},[c,M,H])}function P5(e,t){const[r,n]=e;let i=!1;const o=t.length;for(let a=0,s=o-1;a<o;s=a++){const[l,c]=t[a]||[0,0],[u,h]=t[s]||[0,0];c>=n!=h>=n&&r<=(u-l)*(n-c)/(h-c)+l&&(i=!i)}return i}function $_e(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function H_e(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:r=!1,requireIntent:n=!0}=e;let i,o=!1,a=null,s=null,l=performance.now();function c(h,f){const p=performance.now(),m=p-l;if(a===null||s===null||m===0)return a=h,s=f,l=p,null;const g=h-a,y=f-s,b=Math.sqrt(g*g+y*y)/m;return a=h,s=f,l=p,b}const u=h=>{let{x:f,y:p,placement:m,elements:g,onClose:y,nodeId:v,tree:b}=h;return function(S){function I(){clearTimeout(i),y()}if(clearTimeout(i),!g.domReference||!g.floating||m==null||f==null||p==null)return;const{clientX:A,clientY:D}=S,M=[A,D],H=pc(S),V=S.type==="mouseleave",G=ri(g.floating,H),Y=ri(g.domReference,H),Z=g.domReference.getBoundingClientRect(),$=g.floating.getBoundingClientRect(),F=m.split("-")[0],K=f>$.right-$.width/2,k=p>$.bottom-$.height/2,P=$_e(M,Z),B=$.width>Z.width,x=$.height>Z.height,E=(B?Z:$).left,N=(B?Z:$).right,C=(x?Z:$).top,W=(x?Z:$).bottom;if(G&&(o=!0,!V))return;if(Y&&(o=!1),Y&&!V){o=!0;return}if(V&&tn(S.relatedTarget)&&ri(g.floating,S.relatedTarget)||b&&uh(b.nodesRef.current,v).some(ae=>{let{context:he}=ae;return he==null?void 0:he.open}))return;if(F==="top"&&p>=Z.bottom-1||F==="bottom"&&p<=Z.top+1||F==="left"&&f>=Z.right-1||F==="right"&&f<=Z.left+1)return I();let U=[];switch(F){case"top":U=[[E,Z.top+1],[E,$.bottom-1],[N,$.bottom-1],[N,Z.top+1]];break;case"bottom":U=[[E,$.top+1],[E,Z.bottom-1],[N,Z.bottom-1],[N,$.top+1]];break;case"left":U=[[$.right-1,W],[$.right-1,C],[Z.left+1,C],[Z.left+1,W]];break;case"right":U=[[Z.right-1,W],[Z.right-1,C],[$.left+1,C],[$.left+1,W]];break}function X(ae){let[he,pe]=ae;switch(F){case"top":{const Pe=[B?he+t/2:K?he+t*4:he-t*4,pe+t+1],$e=[B?he-t/2:K?he+t*4:he-t*4,pe+t+1],je=[[$.left,K||B?$.bottom-t:$.top],[$.right,K?B?$.bottom-t:$.top:$.bottom-t]];return[Pe,$e,...je]}case"bottom":{const Pe=[B?he+t/2:K?he+t*4:he-t*4,pe-t],$e=[B?he-t/2:K?he+t*4:he-t*4,pe-t],je=[[$.left,K||B?$.top+t:$.bottom],[$.right,K?B?$.top+t:$.bottom:$.top+t]];return[Pe,$e,...je]}case"left":{const Pe=[he+t+1,x?pe+t/2:k?pe+t*4:pe-t*4],$e=[he+t+1,x?pe-t/2:k?pe+t*4:pe-t*4];return[...[[k||x?$.right-t:$.left,$.top],[k?x?$.right-t:$.left:$.right-t,$.bottom]],Pe,$e]}case"right":{const Pe=[he-t,x?pe+t/2:k?pe+t*4:pe-t*4],$e=[he-t,x?pe-t/2:k?pe+t*4:pe-t*4],je=[[k||x?$.left+t:$.right,$.top],[k?x?$.left+t:$.right:$.left+t,$.bottom]];return[Pe,$e,...je]}}}if(!P5([A,D],U)){if(o&&!P)return I();if(!V&&n){const ae=c(S.clientX,S.clientY);if(ae!==null&&ae<.1)return I()}P5([A,D],X([f,p]))?!o&&n&&(i=window.setTimeout(I,40)):I()}}};return u.__options={blockPointerEvents:r},u}const z_e=({arrowRef:e,placement:t})=>{const r=[];return r.push(ZEe(8)),r.push(t==="auto"?r_e():t_e()),r.push(e_e({padding:8})),e!=null&&e.current&&r.push(n_e({element:e.current})),r},G_e=({placement:e})=>e==="auto"?void 0:e,W_e=({placement:e})=>({top:"bottom",right:"left",bottom:"top",left:"right"})[e.split("-")[0]],vY=({open:e,arrowRef:t,placement:r="top",setOpen:n})=>mY({placement:G_e({placement:r}),open:e,onOpenChange:n,whileElementsMounted:tY,middleware:z_e({placement:r,arrowRef:t})}),bY=({context:e,trigger:t,role:r="tooltip",interactions:n=[]})=>gY([fY(e,{enabled:t==="click"}),E_e(e,{enabled:t==="hover",handleClose:H_e()}),pY(e),yY(e,{role:r}),...n]),K_e=({animation:e="duration-300",arrow:t=!0,children:r,className:n,content:i,placement:o="top",style:a="dark",theme:s,trigger:l="hover",minWidth:c,...u})=>{const h=T.useRef(null),[f,p]=T.useState(!1),m=vY({open:f,placement:o,arrowRef:h,setOpen:p}),{context:g,middlewareData:{arrow:{x:y,y:v}={}},refs:b,strategy:_,update:S,x:I,y:A}=m,D=j_e(g),{getFloatingProps:M,getReferenceProps:H}=bY({context:g,role:"tooltip",trigger:l,interactions:[D]});return T.useEffect(()=>{if(b.reference.current&&b.floating.current&&f)return tY(b.reference.current,b.floating.current,S)},[f,b.floating,b.reference,S]),d.jsxs(d.Fragment,{children:[d.jsx("div",{ref:b.setReference,className:s.target,"data-testid":"flowbite-tooltip-target",...H(),children:r}),d.jsxs("div",{ref:b.setFloating,"data-testid":"flowbite-tooltip",...M({className:se(s.base,e&&`${s.animation} ${e}`,!f&&s.hidden,s.style[a],n),style:{position:_,top:A??" ",left:I??" ",minWidth:c},...u}),children:[d.jsx("div",{className:s.content,children:i}),t&&d.jsx("div",{className:se(s.arrow.base,a==="dark"&&s.arrow.style.dark,a==="light"&&s.arrow.style.light,a==="auto"&&s.arrow.style.auto),"data-testid":"flowbite-tooltip-arrow",ref:h,style:{top:v??" ",left:y??" ",right:" ",bottom:" ",[W_e({placement:m.placement})]:s.arrow.placement},children:" "})]})]})},RT=({animation:e="duration-300",arrow:t=!0,children:r,className:n,content:i,placement:o="top",style:a="dark",theme:s={},trigger:l="hover",...c})=>{const u=Ne(st().tooltip,s);return d.jsx(K_e,{animation:e,arrow:t,content:i,placement:o,style:a,theme:u,trigger:l,className:n,...c,children:r})};RT.displayName="Tooltip";function EY(e){return Ai({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function _Y(e){return Ai({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM72 272a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm104-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H176c-8.8 0-16-7.2-16-16s7.2-16 16-16zM72 368a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm88 0c0-8.8 7.2-16 16-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H176c-8.8 0-16-7.2-16-16z"},child:[]}]})(e)}function q_e(e){return Ai({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 296c0 66.3-53.7 120-120 120h-8c-17.7 0-32-14.3-32-32s14.3-32 32-32h8c30.9 0 56-25.1 56-56v-8H320c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h64c35.3 0 64 28.7 64 64v32 32 72zm-256 0c0 66.3-53.7 120-120 120H64c-17.7 0-32-14.3-32-32s14.3-32 32-32h8c30.9 0 56-25.1 56-56v-8H64c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h64c35.3 0 64 28.7 64 64v32 32 72z"},child:[]}]})(e)}const FD=(e,t)=>{var r;t(!0),(r=navigator==null?void 0:navigator.clipboard)==null||r.writeText(e).then(()=>{console.log("Copy Successfull")}).catch(n=>{console.error("Failed to Copy text: ",n),t(!1)}),setTimeout(()=>t(!1),4e3)},wY=T.forwardRef(({valueToCopy:e,icon:t=_Y,theme:r={},className:n,...i},o)=>{const[a,s]=T.useState(!1),l=Ne(st().clipboard.withIcon,r);return d.jsx("button",{className:se(l.base,n),onClick:()=>FD(e,s),...i,ref:o,children:a?d.jsx(EY,{"aria-hidden":!0,className:l.icon.successIcon}):d.jsx(t,{"aria-hidden":!0,className:l.icon.defaultIcon})})}),SY=T.forwardRef(({valueToCopy:e,icon:t=_Y,label:r="Copy",theme:n={},className:i,...o},a)=>{const[s,l]=T.useState(!1),c=Ne(st().clipboard.withIconText,n);return d.jsx("button",{className:se(c.base,i),onClick:()=>FD(e,l),...o,ref:a,children:s?d.jsxs("span",{className:c.label.base,children:[d.jsx(EY,{"aria-hidden":!0,className:c.icon.successIcon}),d.jsx("span",{className:c.label.successText,children:"Copied"})]}):d.jsxs("span",{className:c.label.base,children:[d.jsx(t,{"aria-hidden":!0,className:c.icon.defaultIcon}),d.jsx("span",{className:c.label.defaultText,children:r})]})})}),TY=T.forwardRef(({className:e,valueToCopy:t,label:r,theme:n={},...i},o)=>{const[a,s]=T.useState(!1),l=Ne(st().clipboard.button,n);return d.jsx(RT,{content:a?"Copied":"Copy to clipboard",className:"[&_*]:cursor-pointer",children:d.jsx("button",{className:se(l.base,e),onClick:()=>FD(t,s),...i,ref:o,children:d.jsx("span",{className:l.label,children:r})})})});TY.displayName="Clipboard";wY.displayName="Clipboard.WithIcon";SY.displayName="Clipboard.WithIconText";Object.assign(TY,{WithIcon:wY,WithIconText:SY});const E0=({children:e,className:t,color:r="default",theme:n={},value:i,...o})=>{const a=Ne(st().helperText,n);return d.jsx("p",{className:se(a.root.base,a.root.colors[r],t),...o,children:i??e??""})};E0.displayName="HelperText";const CY=T.forwardRef(({addon:e,className:t,color:r="gray",helperText:n,icon:i,rightIcon:o,shadow:a,sizing:s="md",theme:l={},type:c="text",...u},h)=>{const f=Ne(st().textInput,l);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:se(f.base,t),children:[e&&d.jsx("span",{className:f.addon,children:e}),d.jsxs("div",{className:f.field.base,children:[i&&d.jsx("div",{className:f.field.icon.base,children:d.jsx(i,{className:f.field.icon.svg})}),o&&d.jsx("div",{"data-testid":"right-icon",className:f.field.rightIcon.base,children:d.jsx(o,{className:f.field.rightIcon.svg})}),d.jsx("input",{className:se(f.field.input.base,f.field.input.colors[r],f.field.input.sizes[s],f.field.input.withIcon[i?"on":"off"],f.field.input.withRightIcon[o?"on":"off"],f.field.input.withAddon[e?"on":"off"],f.field.input.withShadow[a?"on":"off"]),type:c,...u,ref:h})]})]}),n&&d.jsx(E0,{color:r,children:n})]})});CY.displayName="TextInput";const xY=T.createContext(void 0);function IT(){const e=T.useContext(xY);if(!e)throw new Error("useDatePickerContext should be used within the DatePickerContext provider!");return e}var Sn=(e=>(e[e.Days=0]="Days",e[e.Months=1]="Months",e[e.Years=2]="Years",e[e.Decades=3]="Decades",e))(Sn||{}),RY=(e=>(e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e))(RY||{});const tm=(e,t,r)=>{const n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();if(t&&r){const i=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),o=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();return n>=i&&n<=o}if(t){const i=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return n>=i}if(r){const i=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();return n<=i}return!0},wv=(e,t)=>(e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e.getTime()===t.getTime()),Nb=(e,t,r)=>(tm(e,t,r)||(t&&e<t?e=t:r&&e>r&&(e=r)),e),Y_e=(e,t)=>{const r=new Date(e.getFullYear(),e.getMonth(),1);let i=r.getDay()-t;return i<0&&(i+=7),VD(r,-i)},X_e=(e,t)=>{const r=[],n=new Date(0);n.setDate(n.getDate()-n.getDay()+t);const i=new Intl.DateTimeFormat(e,{weekday:"short"});for(let o=0;o<7;o++)r.push(i.format(VD(n,o)));return r},VD=(e,t)=>{const r=new Date(e);return r.setDate(r.getDate()+t),r},J_e=(e,t)=>{const r=new Date(e);return r.setMonth(r.getMonth()+t),r},tp=(e,t)=>{const r=new Date(e);return r.setFullYear(r.getFullYear()+t),r},rp=(e,t,r)=>{let n={day:"numeric",month:"long",year:"numeric"};return r&&(n=r),new Intl.DateTimeFormat(e,n).format(t)},np=(e,t)=>{const r=e.getFullYear();return Math.floor(r/t)*t},Q_e=(e,t)=>{const r=e.getFullYear(),n=t+9;return r>=t&&r<=n},Z_e=({theme:e={}})=>{const{theme:t,weekStart:r,minDate:n,maxDate:i,viewDate:o,selectedDate:a,changeSelectedDate:s,language:l}=IT(),c=Ne(t.views.days,e),u=X_e(l,r),h=Y_e(o,r);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:c.header.base,children:u.map((f,p)=>d.jsx("span",{className:c.header.title,children:f},p))}),d.jsx("div",{className:c.items.base,children:[...Array(42)].map((f,p)=>{const m=VD(h,p),g=rp(l,m,{day:"numeric"}),y=a&&wv(a,m),v=!tm(m,n,i);return d.jsx("button",{disabled:v,type:"button",className:se(c.items.item.base,y&&c.items.item.selected,v&&c.items.item.disabled),onClick:()=>{v||s(m,!0)},children:g},p)})})]})},ewe=({theme:e={}})=>{const{theme:t,viewDate:r,selectedDate:n,minDate:i,maxDate:o,setViewDate:a,setView:s}=IT(),l=Ne(t.views.decades,e),c=np(r,100);return d.jsx("div",{className:l.items.base,children:[...Array(12)].map((u,h)=>{const f=c-10+h*10;new Date(r.getTime()).setFullYear(f+r.getFullYear()%10);const m=new Date(f,0,1),g=tp(m,9),y=n&&Q_e(n,f),v=!tm(m,i,o)&&!tm(g,i,o);return d.jsx("button",{disabled:v,type:"button",className:se(l.items.item.base,y&&l.items.item.selected,v&&l.items.item.disabled),onClick:()=>{v||(n&&a(tp(r,f-n.getFullYear())),s(Sn.Years))},children:f},h)})})},twe=({theme:e={}})=>{const{theme:t,minDate:r,maxDate:n,selectedDate:i,viewDate:o,language:a,setViewDate:s,setView:l}=IT(),c=Ne(t.views.months,e);return d.jsx("div",{className:c.items.base,children:[...Array(12)].map((u,h)=>{const f=new Date;f.setMonth(h,1),f.setFullYear(o.getFullYear());const p=rp(a,f,{month:"short"}),m=i&&wv(i,f),g=!tm(f,r,n);return d.jsx("button",{disabled:g,type:"button",className:se(c.items.item.base,m&&c.items.item.selected,g&&c.items.item.disabled),onClick:()=>{g||(s(f),l(Sn.Days))},children:p},h)})})},rwe=({theme:e={}})=>{const{theme:t,selectedDate:r,minDate:n,maxDate:i,viewDate:o,setViewDate:a,setView:s}=IT(),l=Ne(t.views.years,e);return d.jsx("div",{className:l.items.base,children:[...Array(12)].map((c,u)=>{const f=np(o,10)+u,p=new Date(o.getTime());p.setFullYear(f);const m=r&&wv(r,p),g=!tm(p,n,i);return d.jsx("button",{disabled:g,type:"button",className:se(l.items.item.base,m&&l.items.item.selected,g&&l.items.item.disabled),onClick:()=>{g||(a(p),s(Sn.Months))},children:f},u)})})},nwe=({title:e,open:t,inline:r=!1,autoHide:n=!0,showClearButton:i=!0,labelClearButton:o="Clear",showTodayButton:a=!0,labelTodayButton:s="Today",defaultValue:l,minDate:c,maxDate:u,language:h="en",weekStart:f=RY.Sunday,className:p,theme:m={},onChange:g,label:y,value:v,...b},_)=>{const S=Ne(st().datepicker,m),I=l?Nb(l,c,u):null,A=T.useMemo(()=>l?Nb(l,c,u):new Date,[]),[D,M]=T.useState(t),[H,V]=T.useState(Sn.Days),[G,Y]=T.useState(v??I),[Z,$]=T.useState(v??A),F=T.useRef(null),K=T.useRef(null),k=(W,U)=>{Y(W),(W===null||W)&&g&&g(W),n&&H===Sn.Days&&U==!0&&!r&&M(!1)},P=()=>{k(I,!0),l&&$(l)};T.useImperativeHandle(_,()=>({focus(){var W;(W=F.current)==null||W.focus()},clear(){P()}}));const B=W=>{switch(W){case Sn.Decades:return d.jsx(ewe,{theme:S.views.decades});case Sn.Years:return d.jsx(rwe,{theme:S.views.years});case Sn.Months:return d.jsx(twe,{theme:S.views.months});case Sn.Days:default:return d.jsx(Z_e,{theme:S.views.days})}},x=()=>{switch(H){case Sn.Days:return Sn.Months;case Sn.Months:return Sn.Years;case Sn.Years:return Sn.Decades}return H},E=()=>{switch(H){case Sn.Decades:return`${np(Z,100)-10} - ${np(Z,100)+100}`;case Sn.Years:return`${np(Z,10)} - ${np(Z,10)+11}`;case Sn.Months:return rp(h,Z,{year:"numeric"});case Sn.Days:default:return rp(h,Z,{month:"long",year:"numeric"})}},N=(W,U,X)=>{switch(W){case Sn.Days:return new Date(J_e(U,X));case Sn.Months:return new Date(tp(U,X));case Sn.Years:return new Date(tp(U,X*10));case Sn.Decades:return new Date(tp(U,X*100));default:return new Date(tp(U,X*10))}};T.useEffect(()=>{const W=U=>{var he,pe;const X=(he=K==null?void 0:K.current)==null?void 0:he.contains(U.target),ae=(pe=F==null?void 0:F.current)==null?void 0:pe.contains(U.target);!X&&!ae&&M(!1)};return document.addEventListener("mousedown",W),()=>{document.removeEventListener("mousedown",W)}},[F,K,M]),T.useEffect(()=>{const W=v&&Nb(new Date(v),c,u),U=G&&Nb(new Date(G),c,u);U&&W&&!wv(W,U)&&Y(W),G==null&&Y(I)},[v,Y,$,G]);const C=v===null?y:rp(h,G||new Date);return d.jsx(xY.Provider,{value:{theme:S,language:h,minDate:c,maxDate:u,weekStart:f,isOpen:D,setIsOpen:M,view:H,setView:V,viewDate:Z,setViewDate:$,selectedDate:G,setSelectedDate:Y,changeSelectedDate:k},children:d.jsxs("div",{className:se(S.root.base,p),children:[!r&&d.jsx(CY,{theme:S.root.input,icon:n0e,ref:F,onFocus:()=>{G&&!wv(Z,G)&&$(G),M(!0)},value:C,readOnly:!0,defaultValue:I?rp(h,I):y,...b}),(D||r)&&d.jsx("div",{ref:K,className:se(S.popup.root.base,r&&S.popup.root.inline),children:d.jsxs("div",{className:S.popup.root.inner,children:[d.jsxs("div",{className:S.popup.header.base,children:[e&&d.jsx("div",{className:S.popup.header.title,children:e}),d.jsxs("div",{className:S.popup.header.selectors.base,children:[d.jsx("button",{type:"button",className:se(S.popup.header.selectors.button.base,S.popup.header.selectors.button.prev),onClick:()=>$(N(H,Z,-1)),children:d.jsx(t0e,{})}),d.jsx("button",{type:"button",className:se(S.popup.header.selectors.button.base,S.popup.header.selectors.button.view),onClick:()=>V(x()),children:E()}),d.jsx("button",{type:"button",className:se(S.popup.header.selectors.button.base,S.popup.header.selectors.button.next),onClick:()=>$(N(H,Z,1)),children:d.jsx(r0e,{})})]})]}),d.jsx("div",{className:S.popup.view.base,children:B(H)}),(i||a)&&d.jsxs("div",{className:S.popup.footer.base,children:[a&&d.jsx("button",{type:"button",className:se(S.popup.footer.button.base,S.popup.footer.button.today),onClick:()=>{const W=new Date;k(W,!0),$(W)},children:s}),i&&d.jsx("button",{type:"button",className:se(S.popup.footer.button.base,S.popup.footer.button.clear),onClick:()=>{k(null,!0)},children:o})]})]})})]})})},iwe=T.forwardRef(nwe);iwe.displayName="Datepicker";const IY=T.createContext(void 0);function NY(){const e=T.useContext(IY);if(!e)throw new Error("useDrawerContext should be used within the DrawerContext provider!");return e}function owe(e){return Ai({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(e)}function awe(e){return Ai({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}const AY=({children:e,className:t,closeIcon:r=awe,theme:n={},title:i,titleIcon:o=owe,...a})=>{const s=T.useId(),{id:l,isOpen:c,onClose:u,theme:h}=NY(),f=Ne(h.header,n);return d.jsxs("div",{className:t,...a,children:[d.jsxs("h5",{className:f.inner.titleText,id:l,children:[d.jsx(o,{"aria-hidden":!0,className:f.inner.titleIcon}),i]}),d.jsxs("button",{onClick:u,"data-testid":"close-drawer",className:f.inner.closeButton,children:[d.jsx(r,{"aria-hidden":!0,className:f.inner.closeIcon}),d.jsx("span",{className:"sr-only",children:"Close menu"})]}),d.jsx("span",{className:f.collapsed[c?"on":"off"],id:`flowbite-drawer-header-${s}`,children:e})]})};AY.displayName="Drawer.Header";const OY=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=NY(),o=Ne(i.items,r);return d.jsx("div",{"data-testid":"flowbite-drawer-items",className:se(o.base,t),...n,children:e})};OY.displayName="Drawer.Items";const kY=({backdrop:e=!0,children:t,className:r,edge:n=!1,position:i="left",onClose:o,open:a=!1,theme:s={},...l})=>{const c=T.useId(),u=Ne(st().drawer,s);return T.useEffect(()=>{const h=f=>{f.key==="Escape"&&a&&o&&o()};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[o,a]),d.jsxs(IY.Provider,{value:{theme:u,onClose:o,isOpen:a,id:c},children:[d.jsx("div",{"aria-modal":!0,"aria-describedby":`drawer-dialog-${c}`,role:"dialog",tabIndex:-1,"data-testid":"flowbite-drawer",className:se(u.root.base,u.root.position[i][a?"on":"off"],n&&!a&&u.root.edge,r),...l,children:t}),a&&e&&d.jsx("div",{onClick:()=>o(),className:u.root.backdrop})]})};kY.displayName="Drawer";Object.assign(kY,{Header:AY,Items:OY});const PY=T.createContext(void 0);function BD(){const e=T.useContext(PY);if(!e)throw new Error("useDropdownContext should be used within the DropdownContext provider!");return e}const $D=({className:e,theme:t={},...r})=>{const{theme:n}=BD(),i=t.divider??n.floating.divider;return d.jsx("div",{className:se(i,e),...r})},DY=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=BD(),o=r.header??i.floating.header;return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:se(o,t),...n,children:e}),d.jsx($D,{})]})},LY=T.forwardRef(({children:e,className:t,icon:r,onClick:n,theme:i={},...o},a)=>{const{ref:s,index:l}=f_e({label:typeof e=="string"?e:void 0}),c=nY([a,s]),{theme:u,activeIndex:h,dismissOnClick:f,getItemProps:p,handleSelect:m}=BD(),g=h===l,y=Ne(u.floating.item,i),v=o;return d.jsx("li",{role:"menuitem",className:y.container,children:d.jsxs(SD,{ref:c,className:se(y.base,t),...v,...p({onClick:()=>{n==null||n(),f&&m(null)}}),tabIndex:g?0:-1,children:[r&&d.jsx(r,{className:y.icon}),e]})})});LY.displayName="DropdownItem";const swe={top:c0e,right:dq,bottom:uq,left:l0e},lwe=({refs:e,children:t,inline:r,theme:n,disabled:i,setButtonWidth:o,getReferenceProps:a,renderTrigger:s,...l})=>{const c=e.reference,u=a();if(T.useEffect(()=>{c.current&&(o==null||o(c.current.clientWidth))},[c,o]),s){const h=s(n);return T.cloneElement(h,{ref:e.setReference,disabled:i,...u,...h.props})}return r?d.jsx("button",{type:"button",ref:e.setReference,className:n==null?void 0:n.inlineWrapper,disabled:i,...u,children:t}):d.jsx(TD,{...l,disabled:i,type:"button",ref:e.setReference,...u,children:t})},MY=({children:e,className:t,dismissOnClick:r=!0,theme:n={},enableTypeAhead:i=!0,renderTrigger:o,...a})=>{const[s,l]=T.useState(!1),[c,u]=T.useState(null),[h,f]=T.useState(null),[p,m]=T.useState(void 0),g=T.useRef([]),y=T.useRef([]),v=Ne(st().dropdown,n),b=a,_=a["data-testid"]||"flowbite-dropdown-target",{placement:S=a.inline?"bottom-start":"bottom",trigger:I="click",label:A,inline:D,arrowIcon:M=!0,...H}=b,V=T.useCallback(E=>{f(E),l(!1)},[]),G=T.useCallback(E=>{s?u(E):V(E)},[s,V]),{context:Y,floatingStyles:Z,refs:$}=vY({open:s,setOpen:l,placement:S}),F=F_e(Y,{listRef:g,activeIndex:c,selectedIndex:h,onNavigate:u}),K=B_e(Y,{listRef:y,activeIndex:c,selectedIndex:h,onMatch:G,enabled:i}),{getReferenceProps:k,getFloatingProps:P,getItemProps:B}=bY({context:Y,role:"menu",trigger:I,interactions:[F,K]}),x=T.useMemo(()=>{const[E]=S.split("-");return swe[E]??uq},[S]);return d.jsxs(PY.Provider,{value:{theme:v,activeIndex:c,dismissOnClick:r,getItemProps:B,handleSelect:V},children:[d.jsxs(lwe,{...H,refs:$,inline:D,theme:v,"data-testid":_,className:se(v.floating.target,H.className),setButtonWidth:m,getReferenceProps:k,renderTrigger:o,children:[A,M&&d.jsx(x,{className:v.arrowIcon})]}),s&&d.jsx(hY,{context:Y,modal:!1,children:d.jsx("div",{ref:$.setFloating,style:{...Z,minWidth:p},"data-testid":"flowbite-dropdown","aria-expanded":s,...P({className:se(v.floating.base,v.floating.animation,"duration-100",!s&&v.floating.hidden,v.floating.style.auto,t)}),children:d.jsx(h_e,{elementsRef:g,labelsRef:y,children:d.jsx("ul",{className:v.content,tabIndex:-1,children:e})})})})]})};MY.displayName="Dropdown";DY.displayName="Dropdown.Header";$D.displayName="Dropdown.Divider";const cwe=Object.assign(MY,{Item:LY,Header:DY,Divider:$D}),po=T.forwardRef(({className:e,color:t="gray",helperText:r,sizing:n="md",theme:i={},...o},a)=>{const s=Ne(st().fileInput,i);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:se(s.root.base,e),children:d.jsx("div",{className:s.field.base,children:d.jsx("input",{className:se(s.field.input.base,s.field.input.colors[t],s.field.input.sizes[n]),...o,type:"file",ref:a})})}),r&&d.jsx(E0,{color:t,children:r})]})});po.displayName="FileInput";const le=T.forwardRef(({label:e,helperText:t,color:r="default",sizing:n="md",variant:i,disabled:o=!1,theme:a={},className:s,...l},c)=>{const u=T.useId(),h=Ne(st().floatingLabel,a);return d.jsxs("div",{children:[d.jsxs("div",{className:se("relative",i==="standard"?"z-0":""),children:[d.jsx("input",{type:"text",id:l.id?l.id:"floatingLabel"+u,"aria-describedby":"outlined_success_help",className:se(h.input[r][i][n],s),placeholder:" ","data-testid":"floating-label",disabled:o,...l,ref:c}),d.jsx("label",{htmlFor:l.id?l.id:"floatingLabel"+u,className:se(h.label[r][i][n],s),children:e})]}),d.jsx("p",{id:"outlined_helper_text"+u,className:se(h.helperText[r],s),children:t})]})});le.displayName="FloatingLabel";const jY=({alt:e,className:t,children:r,href:n,name:i,src:o,theme:a={},...s})=>{const l=Ne(st().footer.brand,a);return d.jsx("div",{children:n?d.jsxs("a",{"data-testid":"flowbite-footer-brand",href:n,className:se(l.base,t),...s,children:[d.jsx("img",{alt:e,src:o,className:l.img}),d.jsx("span",{"data-testid":"flowbite-footer-brand-span",className:l.span,children:i}),r]}):d.jsx("img",{alt:e,"data-testid":"flowbite-footer-brand",src:o,className:se(l.img,t),...s})})},UY=({by:e,className:t,href:r,theme:n={},year:i,...o})=>{const a=Ne(st().footer.copyright,n);return d.jsxs("div",{"data-testid":"flowbite-footer-copyright",className:se(a.base,t),...o,children:["© ",i,r?d.jsx("a",{href:r,className:a.href,children:e}):d.jsx("span",{"data-testid":"flowbite-footer-copyright-span",className:a.span,children:e})]})},FY=({className:e,theme:t={},...r})=>{const n=Ne(st().footer.divider,t);return d.jsx("hr",{"data-testid":"footer-divider",className:se(n.base,e),...r})},VY=({ariaLabel:e,className:t,href:r,icon:n,theme:i={},...o})=>{const a=Ne(st().footer.icon,i);return d.jsx("div",{children:r?d.jsx("a",{"aria-label":e,"data-testid":"flowbite-footer-icon",href:r,className:se(a.base,t),...o,children:d.jsx(n,{className:a.size})}):d.jsx(n,{"data-testid":"flowbite-footer-icon",className:a.size,...o})})},BY=({as:e="a",children:t,className:r,href:n,theme:i={},...o})=>{const a=Ne(st().footer.groupLink.link,i);return d.jsx("li",{className:se(a.base,r),children:d.jsx(e,{href:n,className:a.href,...o,children:t})})},$Y=({children:e,className:t,col:r=!1,theme:n={},...i})=>{const o=Ne(st().footer.groupLink,n);return d.jsx("ul",{"data-testid":"footer-groupLink",className:se(o.base,r&&o.col,t),...i,children:e})},HY=({as:e="h2",className:t,theme:r={},title:n,...i})=>{const o=Ne(st().footer.title,r);return d.jsx(e,{"data-testid":"flowbite-footer-title",className:se(o.base,t),...i,children:n})},zY=({bgDark:e=!1,children:t,className:r,container:n=!1,theme:i={},...o})=>{const a=Ne(st().footer,i);return d.jsx("footer",{"data-testid":"flowbite-footer",className:se(a.root.base,e&&a.root.bgDark,n&&a.root.container,r),...o,children:t})};zY.displayName="Footer";UY.displayName="Footer.Copyright";BY.displayName="Footer.Link";jY.displayName="Footer.Brand";$Y.displayName="Footer.LinkGroup";VY.displayName="Footer.Icon";HY.displayName="Footer.Title";FY.displayName="Footer.Divider";Object.assign(zY,{Copyright:UY,Link:BY,LinkGroup:$Y,Brand:jY,Icon:VY,Title:HY,Divider:FY});const GY=T.forwardRef(({theme:e={},icon:t=q_e,className:r,...n},i)=>{const o=Ne(st().hr.icon,e);return d.jsxs("div",{className:o.base,children:[d.jsx("hr",{className:se(o.hrLine,r),role:"separator","data-testid":"flowbite-hr-icon",ref:i,...n}),d.jsx("div",{className:o.icon.base,children:d.jsx(t,{"aria-hidden":!0,className:o.icon.icon})})]})}),WY=T.forwardRef(({theme:e={},className:t,...r},n)=>{const i=Ne(st().hr.square,e);return d.jsx("hr",{className:se(i.base,t),role:"separator","data-testid":"flowbite-hr-square",ref:n,...r})}),KY=T.forwardRef(({theme:e={},text:t,className:r,...n},i)=>{const o=Ne(st().hr.text,e);return d.jsxs("div",{className:o.base,children:[d.jsx("hr",{className:se(o.hrLine,r),"data-testid":"flowbite-hr-text",role:"separator",ref:i,...n}),d.jsx("span",{className:o.text,children:t})]})}),qY=T.forwardRef(({theme:e={},className:t,...r},n)=>{const i=Ne(st().hr.trimmed,e);return d.jsx("hr",{className:se(i.base,t),role:"separator","data-testid":"flowbite-hr-trimmed",ref:n,...r})}),YY=T.forwardRef(({theme:e={},className:t,...r},n)=>{const i=Ne(st().hr.root,e);return d.jsx("hr",{className:se(i.base,t),role:"separator","data-testid":"flowbite-hr",ref:n,...r})});YY.displayName="HR";qY.displayName="HR.Trimmed";GY.displayName="HR.Icon";KY.displayName="HR.Text";WY.displayName="HR.Square";Object.assign(YY,{Trimmed:qY,Icon:GY,Text:KY,Square:WY});const XY=({children:e,className:t,icon:r,theme:n={},...i})=>{const o=Ne(st().list.item,n);return d.jsxs("li",{className:se(o.withIcon[r?"on":"off"],t),...i,children:[r&&d.jsx(r,{className:se(o.icon)}),e]})},JY=({children:e,className:t,unstyled:r,nested:n,ordered:i,horizontal:o,theme:a={},...s})=>{const l=Ne(st().list,a),c=i?"ol":"ul";return d.jsx(c,{className:se(l.root.base,l.root.ordered[i?"on":"off"],r&&l.root.unstyled,n&&l.root.nested,o&&l.root.horizontal,t),...s,children:e})};JY.displayName="List";XY.displayName="List.Item";Object.assign(JY,{Item:XY});const QY=({active:e,children:t,className:r,href:n,icon:i,onClick:o,theme:a={},disabled:s,...l})=>{const c=Ne(st().listGroup.item,a),u=typeof n<"u",h=u?"a":"button";return d.jsx("li",{className:se(c.base,r),children:d.jsxs(h,{href:n,onClick:o,type:u?void 0:"button",disabled:s,className:se(c.link.active[e?"on":"off"],c.link.disabled[s?"on":"off"],c.link.base,c.link.href[u?"on":"off"]),...l,children:[i&&d.jsx(i,{"aria-hidden":!0,"data-testid":"flowbite-list-group-item-icon",className:c.link.icon}),t]})})},ZY=({children:e,className:t,theme:r={},...n})=>{const i=Ne(st().listGroup,r);return d.jsx("ul",{className:se(i.root.base,t),...n,children:e})};ZY.displayName="ListGroup";QY.displayName="ListGroup.Item";Object.assign(ZY,{Item:QY});const eX=T.createContext(void 0);function NT(){const e=T.useContext(eX);if(!e)throw new Error("useNavBarContext should be used within the NavbarContext provider!");return e}const tX=({as:e="a",children:t,className:r,theme:n={},...i})=>{const{theme:o}=NT(),a=Ne(o.brand,n);return d.jsx(e,{className:se(a.base,r),...i,children:t})},rX=({children:e,className:t,theme:r={},...n})=>{const{theme:i,isOpen:o}=NT(),a=Ne(i.collapse,r);return d.jsx("div",{"data-testid":"flowbite-navbar-collapse",className:se(a.base,a.hidden[o?"off":"on"],t),...n,children:d.jsx("ul",{className:a.list,children:e})})},nX=({active:e,as:t="a",disabled:r,children:n,className:i,theme:o={},onClick:a,...s})=>{const{theme:l,setIsOpen:c}=NT(),u=Ne(l.link,o),h=f=>{c(!1),a==null||a(f)};return d.jsx("li",{children:d.jsx(t,{className:se(u.base,e&&u.active.on,!e&&!r&&u.active.off,u.disabled[r?"on":"off"],i),onClick:h,...s,children:n})})};function uwe(e){return Ai({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(e)}const iX=({barIcon:e=uwe,className:t,theme:r={},...n})=>{const{theme:i,isOpen:o,setIsOpen:a}=NT(),s=Ne(i.toggle,r),l=()=>{a(!o)};return d.jsxs("button",{"data-testid":"flowbite-navbar-toggle",onClick:l,className:se(s.base,t),...n,children:[d.jsx("span",{className:"sr-only",children:"Open main menu"}),d.jsx(e,{"aria-hidden":!0,className:s.icon})]})},oX=({border:e,children:t,className:r,fluid:n=!1,menuOpen:i,rounded:o,theme:a={},...s})=>{const[l,c]=T.useState(i),u=Ne(st().navbar,a);return d.jsx(eX.Provider,{value:{theme:u,isOpen:l,setIsOpen:c},children:d.jsx("nav",{className:se(u.root.base,u.root.bordered[e?"on":"off"],u.root.rounded[o?"on":"off"],r),...s,children:d.jsx("div",{className:se(u.root.inner.base,u.root.inner.fluid[n?"on":"off"]),children:t})})})};oX.displayName="Navbar";tX.displayName="Navbar.Brand";rX.displayName="Navbar.Collapse";nX.displayName="Navbar.Link";iX.displayName="Navbar.Toggle";const dwe=Object.assign(oX,{Brand:tX,Collapse:rX,Link:nX,Toggle:iX}),aX=({children:e,className:t,theme:r={},toggle:n,...i})=>{const[o,a]=T.useState(void 0),s=Ne(st().megaMenu.dropdown,r);if(n)return d.jsx(cwe,{inline:!0,label:n,placement:"bottom",theme:s.toggle,className:se(s.base,t),children:e});const l=T.useId(),c=T.useRef(null);return T.useEffect(()=>{var h;a((h=function(){var p;const f=(p=c.current)==null?void 0:p.closest("nav");return f==null?void 0:f.querySelector('[aria-haspopup="menu"]')}())==null?void 0:h.id)},[]),d.jsx("div",{"aria-labelledby":o,id:l,ref:c,role:"menu",className:se(s.base,t),...i,children:e})};aX.displayName="MegaMenu.Dropdown";const sX=({children:e,className:t,theme:r={},...n})=>{const i=T.useId(),o=T.useRef(null),[a,s]=T.useState(void 0),[l,c]=T.useState(void 0),u=Ne(st().megaMenu.dropdownToggle,r),h=function(){var m;const p=(m=o.current)==null?void 0:m.closest("nav");return p==null?void 0:p.querySelector('[role="menu"]')},f=function(){var p;(p=h())==null||p.classList.toggle("hidden"),c(!l)};return T.useEffect(()=>{const p=h(),m=p==null?void 0:p.classList.contains("hidden");s(p==null?void 0:p.id),c(!m)},[]),d.jsx("button",{"aria-controls":a,"aria-expanded":l,"aria-haspopup":"menu",id:i,onClick:f,ref:o,className:se(u.base,t),...n,children:e})};sX.displayName="MegaMenu.DropdownToggle";const lX=({children:e,theme:t={},...r})=>{const n=Ne(st().megaMenu,t);return d.jsx(dwe,{fluid:!0,theme:n,...r,children:e})};Object.assign(lX,{Dropdown:aX,DropdownToggle:sX});lX.displayName="MegaMenu";const cX=T.createContext(void 0);function HD(){const e=T.useContext(cX);if(!e)throw new Error("useModalContext should be used within the ModalContext provider!");return e}const uX=({children:e,className:t,theme:r={},...n})=>{const{theme:i,popup:o}=HD(),a=Ne(i.body,r);return d.jsx("div",{className:se(a.base,o&&[a.popup],t),...n,children:e})},dX=({children:e,className:t,theme:r={},...n})=>{const{theme:i,popup:o}=HD(),a=Ne(i.footer,r);return d.jsx("div",{className:se(a.base,!o&&a.popup,t),...n,children:e})},hX=({as:e="h3",children:t,className:r,theme:n={},id:i,...o})=>{const a=T.useId(),s=i||a,{theme:l,popup:c,onClose:u,setHeaderId:h}=HD(),f=Ne(l.header,n);return T.useLayoutEffect(()=>(h(s),()=>h(void 0)),[s,h]),d.jsxs("div",{className:se(f.base,c&&f.popup,r),...o,children:[d.jsx(e,{id:s,className:f.title,children:t}),d.jsx("button",{"aria-label":"Close",className:f.close.base,type:"button",onClick:u,children:d.jsx(u0e,{"aria-hidden":!0,className:f.close.icon})})]})},fX=T.forwardRef(({children:e,className:t,dismissible:r=!1,onClose:n,popup:i,position:o="center",root:a,show:s,size:l="2xl",theme:c={},initialFocus:u,...h},f)=>{const[p,m]=T.useState(void 0),g=Ne(st().modal,c),{context:y}=mY({open:s,onOpenChange:()=>n&&n()}),v=nY([y.refs.setFloating,f]),b=fY(y),_=pY(y,{outsidePressEvent:"mousedown",enabled:r}),S=yY(y),{getFloatingProps:I}=gY([b,_,S]);return s?d.jsx(cX.Provider,{value:{theme:g,popup:i,onClose:n,setHeaderId:m},children:d.jsx(O_e,{root:a,children:d.jsx(P_e,{lockScroll:!0,"data-testid":"modal-overlay",className:se(g.root.base,g.root.positions[o],s?g.root.show.on:g.root.show.off,t),...h,children:d.jsx(hY,{context:y,initialFocus:u,children:d.jsx("div",{ref:v,...I(h),"aria-labelledby":p,className:se(g.content.base,g.root.sizes[l]),children:d.jsx("div",{className:g.content.inner,children:e})})})})})}):null});fX.displayName="Modal";hX.displayName="Modal.Header";uX.displayName="Modal.Body";dX.displayName="Modal.Footer";const Ab=Object.assign(fX,{Header:hX,Body:uX,Footer:dX}),hwe=(e,t)=>e>=t?[]:[...Array(t-e+1).keys()].map(r=>r+e),zD=({active:e,children:t,className:r,onClick:n,theme:i={},...o})=>{const a=Ne(st().pagination,i);return d.jsx("button",{type:"button",className:se(e&&a.pages.selector.active,r),onClick:n,...o,children:t})};zD.displayName="Pagination.Button";const oO=({children:e,className:t,onClick:r,theme:n={},disabled:i=!1,...o})=>{const a=Ne(st().pagination,n);return d.jsx("button",{type:"button",className:se(i&&a.pages.selector.disabled,t),disabled:i,onClick:r,...o,children:e})};oO.displayName="Pagination.Navigation";const pX=({className:e,currentPage:t,layout:r="pagination",nextLabel:n="Next",onPageChange:i,previousLabel:o="Previous",renderPaginationButton:a=h=>d.jsx(zD,{...h}),showIcons:s=!1,theme:l={},totalPages:c,...u})=>{const h=Ne(st().pagination,l),f=Math.min(Math.max(r==="pagination"?t+2:t+4,5),c),p=Math.max(1,f-4),m=()=>{i(Math.min(t+1,c))},g=()=>{i(Math.max(t-1,1))};return d.jsxs("nav",{className:se(h.base,e),...u,children:[r==="table"&&d.jsxs("div",{className:h.layout.table.base,children:["Showing ",d.jsx("span",{className:h.layout.table.span,children:p})," to ",d.jsx("span",{className:h.layout.table.span,children:f})," of ",d.jsx("span",{className:h.layout.table.span,children:c})," Entries"]}),d.jsxs("ul",{className:h.pages.base,children:[d.jsx("li",{children:d.jsxs(oO,{className:se(h.pages.previous.base,s&&h.pages.showIcon),onClick:g,disabled:t===1,children:[s&&d.jsx(i0e,{"aria-hidden":!0,className:h.pages.previous.icon}),o]})}),r==="pagination"&&hwe(p,f).map(y=>d.jsx("li",{"aria-current":y===t?"page":void 0,children:a({className:se(h.pages.selector.base,t===y&&h.pages.selector.active),active:y===t,onClick:()=>i(y),children:y})},y)),d.jsx("li",{children:d.jsxs(oO,{className:se(h.pages.next.base,s&&h.pages.showIcon),onClick:m,disabled:t===c,children:[n,s&&d.jsx(o0e,{"aria-hidden":!0,className:h.pages.next.icon})]})})]})]})};pX.displayName="Pagination";Object.assign(pX,{Button:zD});const fwe=T.forwardRef(({className:e,theme:t={},...r},n)=>{const i=Ne(st().radio,t);return d.jsx("input",{ref:n,type:"radio",className:se(i.root.base,e),...r})});fwe.displayName="Radio";const pwe=T.forwardRef(({className:e,sizing:t="md",theme:r={},...n},i)=>{const o=Ne(st().rangeSlider,r);return d.jsx(d.Fragment,{children:d.jsx("div",{"data-testid":"flowbite-range-slider",className:se(o.root.base,e),children:d.jsx("div",{className:o.field.base,children:d.jsx("input",{ref:i,type:"range",className:se(o.field.input.base,o.field.input.sizes[t]),...n})})})})});pwe.displayName="RangeSlider";const mX=({children:e,className:t,percentFilled:r=0,theme:n={},...i})=>{const o=Ne(st().ratingAdvanced,n);return d.jsxs("div",{className:se(o.base,t),...i,children:[d.jsx("span",{className:o.label,children:e}),d.jsx("div",{className:o.progress.base,children:d.jsx("div",{className:o.progress.fill,"data-testid":"flowbite-rating-fill",style:{width:`${r}%`}})}),d.jsx("span",{className:o.progress.label,children:`${r}%`})]})},gX=T.createContext(void 0);function mwe(){const e=T.useContext(gX);if(!e)throw new Error("useRatingContext should be used within the RatingContext provider!");return e}const yX=({className:e,filled:t=!0,starIcon:r=a0e,theme:n={},...i})=>{const{theme:o,size:a="sm"}=mwe(),s=Ne(o.star,n);return d.jsx(r,{"data-testid":"flowbite-rating-star",className:se(s.sizes[a],s[t?"filled":"empty"],e),...i})},vX=({children:e,className:t,size:r="sm",theme:n={},...i})=>{const o=Ne(st().rating,n);return d.jsx(gX.Provider,{value:{theme:o,size:r},children:d.jsx("div",{className:se(o.root.base,t),...i,children:e})})};vX.displayName="Rating";yX.displayName="Rating.Star";mX.displayName="Rating.Advanced";Object.assign(vX,{Star:yX,Advanced:mX});const gwe=T.forwardRef(({addon:e,children:t,className:r,color:n="gray",helperText:i,icon:o,shadow:a,sizing:s="md",theme:l={},...c},u)=>{const h=Ne(st().select,l);return d.jsxs("div",{className:se(h.base,r),children:[e&&d.jsx("span",{className:h.addon,children:e}),d.jsxs("div",{className:h.field.base,children:[o&&d.jsx("div",{className:h.field.icon.base,children:d.jsx(o,{className:h.field.icon.svg})}),d.jsx("select",{className:se(h.field.select.base,h.field.select.colors[n],h.field.select.sizes[s],h.field.select.withIcon[o?"on":"off"],h.field.select.withAddon[e?"on":"off"],h.field.select.withShadow[a?"on":"off"]),...c,ref:u,children:t}),i&&d.jsx(E0,{color:n,children:i})]})]})});gwe.displayName="Select";const bX=T.createContext(void 0);function Lm(){const e=T.useContext(bX);if(!e)throw new Error("useSidebarContext should be used within the SidebarContext provider!");return e}const GD=T.createContext(void 0);function ywe(){const e=T.useContext(GD);if(!e)throw new Error("useSidebarItemContext should be used within the SidebarItemContext provider!");return e}const EX=({children:e,className:t,icon:r,label:n,chevronIcon:i=cq,renderChevronIcon:o,open:a=!1,theme:s={},...l})=>{const c=T.useId(),[u,h]=T.useState(a),{theme:f,isCollapsed:p}=Lm(),m=Ne(f.collapse,s);T.useEffect(()=>h(a),[a]);const g=({children:y})=>d.jsx("li",{children:p&&!u?d.jsx(RT,{content:n,placement:"right",children:y}):y});return d.jsxs(g,{children:[d.jsxs("button",{id:`flowbite-sidebar-collapse-${c}`,onClick:()=>h(!u),title:n,type:"button",className:se(m.button,t),...l,children:[r&&d.jsx(r,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-collapse-icon",className:se(m.icon.base,m.icon.open[u?"on":"off"])}),p?d.jsx("span",{className:"sr-only",children:n}):d.jsxs(d.Fragment,{children:[d.jsx("span",{"data-testid":"flowbite-sidebar-collapse-label",className:m.label.base,children:n}),o?o(m,u):d.jsx(i,{"aria-hidden":!0,className:se(m.label.icon.base,m.label.icon.open[u?"on":"off"])})]})]}),d.jsx("ul",{"aria-labelledby":`flowbite-sidebar-collapse-${c}`,hidden:!u,className:m.list,children:d.jsx(GD.Provider,{value:{isInsideCollapse:!0},children:e})})]})};EX.displayName="Sidebar.Collapse";const _X=({children:e,color:t="info",className:r,theme:n={},...i})=>{const{theme:o,isCollapsed:a}=Lm(),s=Ne(o.cta,n);return d.jsx("div",{"data-testid":"sidebar-cta",hidden:a,className:se(s.base,s.color[t],r),...i,children:e})};_X.displayName="Sidebar.CTA";const vwe=({id:e,theme:t,isCollapsed:r,tooltipChildren:n,children:i,...o})=>d.jsx("li",{...o,children:r?d.jsx(RT,{content:d.jsx(wX,{id:e,theme:t,children:n}),placement:"right",children:i}):i}),wX=({id:e,theme:t,children:r})=>d.jsx("span",{"data-testid":"flowbite-sidebar-item-content",id:`flowbite-sidebar-item-${e}`,className:se(t.content.base),children:r}),SX=T.forwardRef(({active:e,as:t="a",children:r,className:n,icon:i,label:o,labelColor:a="info",theme:s={},...l},c)=>{var g,y,v,b;const u=T.useId(),{theme:h,isCollapsed:f}=Lm(),{isInsideCollapse:p}=ywe(),m=Ne(h.item,s);return d.jsx(vwe,{theme:m,className:m.listItem,id:u,isCollapsed:f,tooltipChildren:r,children:d.jsxs(t,{"aria-labelledby":`flowbite-sidebar-item-${u}`,ref:c,className:se(m.base,e&&m.active,!f&&p&&((g=m.collapsed)==null?void 0:g.insideCollapse),n),...l,children:[i&&d.jsx(i,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-item-icon",className:se((y=m.icon)==null?void 0:y.base,e&&((v=m.icon)==null?void 0:v.active))}),f&&!i&&d.jsx("span",{className:(b=m.collapsed)==null?void 0:b.noIcon,children:r.charAt(0).toLocaleUpperCase()??"?"}),!f&&d.jsx(wX,{id:u,theme:m,children:r}),!f&&o&&d.jsx(xq,{color:a,"data-testid":"flowbite-sidebar-label",hidden:f,className:m.label,children:o})]})})});SX.displayName="Sidebar.Item";const TX=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=Lm(),o=Ne(i.itemGroup,r);return d.jsx("ul",{"data-testid":"flowbite-sidebar-item-group",className:se(o.base,t),...n,children:d.jsx(GD.Provider,{value:{isInsideCollapse:!1},children:e})})};TX.displayName="Sidebar.ItemGroup";const CX=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=Lm(),o=Ne(i.items,r);return d.jsx("div",{className:se(o.base,t),"data-testid":"flowbite-sidebar-items",...n,children:e})};CX.displayName="Sidebar.Items";const xX=({children:e,className:t,href:r,img:n,imgAlt:i="",theme:o={},...a})=>{const s=T.useId(),{theme:l,isCollapsed:c}=Lm(),u=Ne(l.logo,o);return d.jsxs("a",{"aria-labelledby":`flowbite-sidebar-logo-${s}`,href:r,className:se(u.base,t),...a,children:[d.jsx("img",{alt:i,src:n,className:u.img}),d.jsx("span",{className:u.collapsed[c?"on":"off"],id:`flowbite-sidebar-logo-${s}`,children:e})]})};xX.displayName="Sidebar.Logo";const RX=({children:e,as:t="nav",collapseBehavior:r="collapse",collapsed:n=!1,theme:i={},className:o,...a})=>{const s=Ne(st().sidebar,i);return d.jsx(bX.Provider,{value:{theme:s,isCollapsed:n},children:d.jsx(t,{"aria-label":"Sidebar",hidden:n&&r==="hide",className:se(s.root.base,s.root.collapsed[n?"on":"off"],o),...a,children:d.jsx("div",{className:s.root.inner,children:e})})})};RX.displayName="Sidebar";Object.assign(RX,{Collapse:EX,CTA:_X,Item:SX,Items:CX,ItemGroup:TX,Logo:xX});const IX=T.createContext(void 0);function bwe(){const e=T.useContext(IX);if(!e)throw new Error("useTableBodyContext should be used within the TableBodyContext provider!");return e}const NX=T.createContext(void 0);function WD(){const e=T.useContext(NX);if(!e)throw new Error("useTableContext should be used within the TableContext provider!");return e}const AX=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o}=WD(),a=Ne(o.body,r);return d.jsx(IX.Provider,{value:{theme:a},children:d.jsx("tbody",{className:se(a.base,t),ref:i,...n,children:e})})});AX.displayName="Table.Body";const OX=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o}=bwe(),a=Ne(o.cell,r);return d.jsx("td",{className:se(a.base,t),ref:i,...n,children:e})});OX.displayName="Table.Cell";const kX=T.createContext(void 0);function Ewe(){const e=T.useContext(kX);if(!e)throw new Error("useTableHeadContext should be used within the TableHeadContext provider!");return e}const PX=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o}=WD(),a=Ne(o.head,r);return d.jsx(kX.Provider,{value:{theme:a},children:d.jsx("thead",{className:se(a.base,t),ref:i,...n,children:d.jsx("tr",{children:e})})})});PX.displayName="Table.Head";const DX=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o}=Ewe(),a=Ne(o.cell,r);return d.jsx("th",{className:se(a.base,t),ref:i,...n,children:e})});DX.displayName="Table.HeadCell";const LX=T.forwardRef(({children:e,className:t,theme:r={},...n},i)=>{const{theme:o,hoverable:a,striped:s}=WD(),l=Ne(o.row,r);return d.jsx("tr",{ref:i,"data-testid":"table-row-element",className:se(l.base,s&&l.striped,a&&l.hovered,t),...n,children:e})});LX.displayName="Table.Row";const MX=T.forwardRef(({children:e,className:t,striped:r,hoverable:n,theme:i={},...o},a)=>{const s=Ne(st().table,i);return d.jsx("div",{"data-testid":"table-element",className:se(s.root.wrapper),children:d.jsxs(NX.Provider,{value:{theme:s,striped:r,hoverable:n},children:[d.jsx("div",{className:se(s.root.shadow,t)}),d.jsx("table",{className:se(s.root.base,t),...o,ref:a,children:e})]})})});MX.displayName="Table";const yr=Object.assign(MX,{Head:PX,Body:AX,Row:LX,Cell:OX,HeadCell:DX}),jX=({children:e,className:t})=>d.jsx("div",{className:t,children:e});jX.displayName="Tabs.Item";const UX=T.forwardRef(({children:e,className:t,onActiveTabChange:r,variant:n="default",theme:i={},...o},a)=>{const s=Ne(st().tabs,i),l=T.useId(),c=T.useMemo(()=>T.Children.map(T.Children.toArray(e),({props:S})=>S),[e]),u=T.useRef([]),[h,f]=T.useState(Math.max(0,c.findIndex(S=>S.active))),[p,m]=T.useState(-1),g=S=>{f(S),r&&r(S)},y=({target:S})=>{g(S),m(S)},v=({event:S,target:I})=>{S.key==="ArrowLeft"&&m(Math.max(0,p-1)),S.key==="ArrowRight"&&m(Math.min(c.length-1,p+1)),S.key==="Enter"&&(g(I),m(I))},b=s.tablist.tabitem.variant[n],_=s.tabitemcontainer.variant[n];return T.useEffect(()=>{var S;(S=u.current[p])==null||S.focus()},[p]),T.useImperativeHandle(a,()=>({setActiveTab:g})),d.jsxs("div",{className:se(s.base,t),children:[d.jsx("div",{"aria-label":"Tabs",role:"tablist",className:se(s.tablist.base,s.tablist.variant[n],t),...o,children:c.map((S,I)=>d.jsxs("button",{type:"button","aria-controls":`${l}-tabpanel-${I}`,"aria-selected":I===h,className:se(s.tablist.tabitem.base,b.base,I===h&&b.active.on,I!==h&&!S.disabled&&b.active.off),disabled:S.disabled,id:`${l}-tab-${I}`,onClick:()=>y({target:I}),onKeyDown:A=>v({event:A,target:I}),ref:A=>u.current[I]=A,role:"tab",tabIndex:I===p?0:-1,style:{zIndex:I===p?2:1},children:[S.icon&&d.jsx(S.icon,{className:s.tablist.tabitem.icon}),S.title]},I))}),d.jsx("div",{className:se(s.tabitemcontainer.base,_),children:c.map((S,I)=>d.jsx("div",{"aria-labelledby":`${l}-tab-${I}`,className:s.tabpanel,hidden:I!==h,id:`${l}-tabpanel-${I}`,role:"tabpanel",tabIndex:0,children:S.children},I))})]})});UX.displayName="Tabs";Object.assign(UX,{Item:jX});const _we=T.forwardRef(({className:e,color:t="gray",helperText:r,shadow:n,theme:i={},...o},a)=>{const s=Ne(st().textarea,i);return d.jsxs(d.Fragment,{children:[d.jsx("textarea",{ref:a,className:se(s.base,s.colors[t],s.withShadow[n?"on":"off"],e),...o}),r&&d.jsx(E0,{color:t,children:r})]})});_we.displayName="Textarea";const FX=T.createContext(void 0);function KD(){const e=T.useContext(FX);if(!e)throw new Error("useTimelineContentContext should be used within the TimelineContentContext provider!");return e}const VX=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=KD(),o=Ne(i.body,r);return d.jsx("div",{className:se(o.base,t),...n,children:e})},BX=T.createContext(void 0);function qD(){const e=T.useContext(BX);if(!e)throw new Error("useTimelineContext should be used within the TimelineContext provider!");return e}const $X=T.createContext(void 0);function HX(){const e=T.useContext($X);if(!e)throw new Error("useTimelineItemContext should be used within the TimelineItemContext provider!");return e}const zX=({children:e,className:t,theme:r={},...n})=>{const{horizontal:i}=qD(),{theme:o}=HX(),a=Ne(o.content,r);return d.jsx(FX.Provider,{value:{theme:a},children:d.jsx("div",{"data-testid":"timeline-content",className:se(a.root.base,i?a.root.horizontal:a.root.vertical,t),...n,children:e})})},GX=({children:e,className:t,theme:r={},...n})=>{const{theme:i,horizontal:o}=qD(),a=Ne(i.item,r);return d.jsx($X.Provider,{value:{theme:a},children:d.jsx("li",{"data-testid":"timeline-item",className:se(o&&a.root.horizontal,!o&&a.root.vertical,t),...n,children:e})})},WX=({children:e,className:t,icon:r,theme:n={},...i})=>{const{horizontal:o}=qD(),{theme:a}=HX(),s=Ne(a.point,n);return d.jsxs("div",{"data-testid":"timeline-point",className:se(o&&s.horizontal,!o&&s.vertical,t),...i,children:[e,r?d.jsx("span",{className:se(s.marker.icon.wrapper),children:d.jsx(r,{"aria-hidden":!0,className:se(s.marker.icon.base)})}):d.jsx("div",{className:se(o&&s.marker.base.horizontal,!o&&s.marker.base.vertical)}),o&&d.jsx("div",{className:se(s.line)})]})},KX=({children:e,className:t,theme:r={},...n})=>{const{theme:i}=KD(),o=Ne(i.time,r);return d.jsx("time",{className:se(o.base,t),...n,children:e})},qX=({as:e="h3",children:t,className:r,theme:n={},...i})=>{const{theme:o}=KD(),a=Ne(o.title,n);return d.jsx(e,{className:se(a.base,r),...i,children:t})},YX=({children:e,className:t,horizontal:r,theme:n={},...i})=>{const o=Ne(st().timeline,n);return d.jsx(BX.Provider,{value:{theme:o,horizontal:r},children:d.jsx("ol",{"data-testid":"timeline-component",className:se(r&&o.root.direction.horizontal,!r&&o.root.direction.vertical,t),...i,children:e})})};YX.displayName="Timeline";GX.displayName="Timeline.Item";WX.displayName="Timeline.Point";zX.displayName="Timeline.Content";KX.displayName="Timeline.Time";qX.displayName="Timeline.Title";VX.displayName="Timeline.Body";Object.assign(YX,{Item:GX,Point:WX,Content:zX,Time:KX,Title:qX,Body:VX});const XX=T.createContext(void 0);function wwe(){const e=T.useContext(XX);if(!e)throw new Error("useToastContext should be used within the ToastContext provider!");return e}const JX=({className:e,onClick:t,theme:r={},xIcon:n=s0e,onDismiss:i,...o})=>{const{theme:a,duration:s,isClosed:l,isRemoved:c,setIsClosed:u,setIsRemoved:h}=wwe(),f=Ne(a.toggle,r),p=m=>{if(t&&t(m),i){i();return}u(!l),setTimeout(()=>h(!c),s)};return d.jsx("button",{"aria-label":"Close",onClick:p,type:"button",className:se(f.base,e),...o,children:d.jsx(n,{"aria-hidden":!0,className:f.icon})})},Swe={75:"duration-75",100:"duration-100",150:"duration-150",200:"duration-200",300:"duration-300",500:"duration-500",700:"duration-700",1e3:"duration-1000"},QX=({children:e,className:t,duration:r=300,theme:n={},...i})=>{const[o,a]=T.useState(!1),[s,l]=T.useState(!1),c=Ne(st().toast,n);return s?null:d.jsx(XX.Provider,{value:{theme:c,duration:r,isClosed:o,isRemoved:s,setIsClosed:a,setIsRemoved:l},children:d.jsx("div",{"data-testid":"flowbite-toast",role:"alert",className:se(c.root.base,Swe[r],o&&c.root.closed,t),...i,children:e})})};QX.displayName="Toast";JX.displayName="Toast.Toggle";Object.assign(QX,{Toggle:JX});const Twe=T.forwardRef(({checked:e,className:t,color:r="blue",sizing:n="md",disabled:i,label:o,name:a,onChange:s,theme:l={},...c},u)=>{const h=T.useId(),f=Ne(st().toggleSwitch,l),p=()=>s(!e),m=()=>{p()},g=y=>{y.code=="Enter"&&y.preventDefault()};return d.jsxs(d.Fragment,{children:[a&&e?d.jsx("input",{ref:u,checked:e,hidden:!0,name:a,readOnly:!0,type:"checkbox",className:"sr-only"}):null,d.jsxs("button",{"aria-checked":e,"aria-labelledby":`${h}-flowbite-toggleswitch-label`,disabled:i,id:`${h}-flowbite-toggleswitch`,onClick:m,onKeyDown:g,role:"switch",tabIndex:0,type:"button",className:se(f.root.base,f.root.active[i?"off":"on"],t),...c,children:[d.jsx("div",{"data-testid":"flowbite-toggleswitch-toggle",className:se(f.toggle.base,f.toggle.checked[e?"on":"off"],e&&f.toggle.checked.color[r],f.toggle.sizes[n])}),o!=null&&o.length?d.jsx("span",{"data-testid":"flowbite-toggleswitch-label",id:`${h}-flowbite-toggleswitch-label`,className:f.root.label,children:o}):null]})]})});Twe.displayName="ToggleSwitch";const Cwe={firstName:"",lastName:"",profileImage:"",weight:"",height:""},ZX=Nm({name:"patient",initialState:Cwe,reducers:{setPatient(e,t){e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,e.profileImage=t.payload.profileImage,e.weight=t.payload.weight,e.height=t.payload.height}}}),{setPatient:Px}=ZX.actions,xwe=ZX.reducer,Rwe="https://hcompanion.onrender.com/api",eJ=async({token:e})=>{try{const t=await ve.get(`${Rwe}/patient/getBasicDetails`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.userData}catch(t){return console.log(t),t.response.status=="401"||t.response.status=="400",!1}},AT="https://hcompanion.onrender.com/api",tJ=sessionStorage.getItem("token"),Iwe=async e=>{try{const t=await ve.post(`${AT}/patient/profile/updateDetails`,e,{headers:{"content-type":" multipart/form-data",Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(t),te.fire({icon:"success",text:"Profile has been Updated"}),!0}catch(t){console.log(t)}},rJ=async()=>{try{const e=await ve.get(`${AT}/patient/profile/viewDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(e),e.data.patientDetails}catch(e){console.log(e),(e.response.status=e.response.data.invalidToken)&&te.fire({icon:"warning",text:"Login to access profile"})}},Nwe=async()=>{var e,t,r,n,i,o;try{return(await ve.get(`${AT}/patient/profile/getAddessAndPhone`,{headers:{Authorization:`bearer ${tJ}`}})).data.contactDetails}catch(a){return console.log(a),((e=a==null?void 0:a.response)==null?void 0:e.status)=="500"&&((r=(t=a==null?void 0:a.response)==null?void 0:t.data)!=null&&r.errorServer)&&te.fire("Error at the Server","","error"),((n=a==null?void 0:a.response)==null?void 0:n.status)=="400"&&((o=(i=a==null?void 0:a.response)==null?void 0:i.data)!=null&&o.invalidToken)&&te.fire("Log in","","error"),!1}},Awe=async e=>{var t,r,n,i,o,a;try{const s=await ve.post(`${AT}/patient/profile/updateAddessAndPhone`,e,{headers:{Authorization:`bearer ${tJ}`}});return!0}catch(s){return console.log(s),((t=s==null?void 0:s.response)==null?void 0:t.status)=="500"&&((n=(r=s==null?void 0:s.response)==null?void 0:r.data)!=null&&n.errorServer)&&te.fire("Error at the Server","","error"),((i=s==null?void 0:s.response)==null?void 0:i.status)=="400"&&((a=(o=s==null?void 0:s.response)==null?void 0:o.data)!=null&&a.invalidToken)&&te.fire("Log in","","error"),!1}};var nJ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Wu,function(){var r=1e3,n=6e4,i=36e5,o="millisecond",a="second",s="minute",l="hour",c="day",u="week",h="month",f="quarter",p="year",m="date",g="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],K=$%100;return"["+$+(F[(K-20)%10]||F[K]||F[0])+"]"}},_=function($,F,K){var k=String($);return!k||k.length>=F?$:""+Array(F+1-k.length).join(K)+$},S={s:_,z:function($){var F=-$.utcOffset(),K=Math.abs(F),k=Math.floor(K/60),P=K%60;return(F<=0?"+":"-")+_(k,2,"0")+":"+_(P,2,"0")},m:function $(F,K){if(F.date()<K.date())return-$(K,F);var k=12*(K.year()-F.year())+(K.month()-F.month()),P=F.clone().add(k,h),B=K-P<0,x=F.clone().add(k+(B?-1:1),h);return+(-(k+(K-P)/(B?P-x:x-P))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:h,y:p,w:u,d:c,D:m,h:l,m:s,s:a,ms:o,Q:f}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},I="en",A={};A[I]=b;var D="$isDayjsObject",M=function($){return $ instanceof Y||!(!$||!$[D])},H=function $(F,K,k){var P;if(!F)return I;if(typeof F=="string"){var B=F.toLowerCase();A[B]&&(P=B),K&&(A[B]=K,P=B);var x=F.split("-");if(!P&&x.length>1)return $(x[0])}else{var E=F.name;A[E]=F,P=E}return!k&&P&&(I=P),P||!k&&I},V=function($,F){if(M($))return $.clone();var K=typeof F=="object"?F:{};return K.date=$,K.args=arguments,new Y(K)},G=S;G.l=H,G.i=M,G.w=function($,F){return V($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var Y=function(){function $(K){this.$L=H(K.locale,null,!0),this.parse(K),this.$x=this.$x||K.x||{},this[D]=!0}var F=$.prototype;return F.parse=function(K){this.$d=function(k){var P=k.date,B=k.utc;if(P===null)return new Date(NaN);if(G.u(P))return new Date;if(P instanceof Date)return new Date(P);if(typeof P=="string"&&!/Z$/i.test(P)){var x=P.match(y);if(x){var E=x[2]-1||0,N=(x[7]||"0").substring(0,3);return B?new Date(Date.UTC(x[1],E,x[3]||1,x[4]||0,x[5]||0,x[6]||0,N)):new Date(x[1],E,x[3]||1,x[4]||0,x[5]||0,x[6]||0,N)}}return new Date(P)}(K),this.init()},F.init=function(){var K=this.$d;this.$y=K.getFullYear(),this.$M=K.getMonth(),this.$D=K.getDate(),this.$W=K.getDay(),this.$H=K.getHours(),this.$m=K.getMinutes(),this.$s=K.getSeconds(),this.$ms=K.getMilliseconds()},F.$utils=function(){return G},F.isValid=function(){return this.$d.toString()!==g},F.isSame=function(K,k){var P=V(K);return this.startOf(k)<=P&&P<=this.endOf(k)},F.isAfter=function(K,k){return V(K)<this.startOf(k)},F.isBefore=function(K,k){return this.endOf(k)<V(K)},F.$g=function(K,k,P){return G.u(K)?this[k]:this.set(P,K)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(K,k){var P=this,B=!!G.u(k)||k,x=G.p(K),E=function(pe,Pe){var $e=G.w(P.$u?Date.UTC(P.$y,Pe,pe):new Date(P.$y,Pe,pe),P);return B?$e:$e.endOf(c)},N=function(pe,Pe){return G.w(P.toDate()[pe].apply(P.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(Pe)),P)},C=this.$W,W=this.$M,U=this.$D,X="set"+(this.$u?"UTC":"");switch(x){case p:return B?E(1,0):E(31,11);case h:return B?E(1,W):E(0,W+1);case u:var ae=this.$locale().weekStart||0,he=(C<ae?C+7:C)-ae;return E(B?U-he:U+(6-he),W);case c:case m:return N(X+"Hours",0);case l:return N(X+"Minutes",1);case s:return N(X+"Seconds",2);case a:return N(X+"Milliseconds",3);default:return this.clone()}},F.endOf=function(K){return this.startOf(K,!1)},F.$set=function(K,k){var P,B=G.p(K),x="set"+(this.$u?"UTC":""),E=(P={},P[c]=x+"Date",P[m]=x+"Date",P[h]=x+"Month",P[p]=x+"FullYear",P[l]=x+"Hours",P[s]=x+"Minutes",P[a]=x+"Seconds",P[o]=x+"Milliseconds",P)[B],N=B===c?this.$D+(k-this.$W):k;if(B===h||B===p){var C=this.clone().set(m,1);C.$d[E](N),C.init(),this.$d=C.set(m,Math.min(this.$D,C.daysInMonth())).$d}else E&&this.$d[E](N);return this.init(),this},F.set=function(K,k){return this.clone().$set(K,k)},F.get=function(K){return this[G.p(K)]()},F.add=function(K,k){var P,B=this;K=Number(K);var x=G.p(k),E=function(W){var U=V(B);return G.w(U.date(U.date()+Math.round(W*K)),B)};if(x===h)return this.set(h,this.$M+K);if(x===p)return this.set(p,this.$y+K);if(x===c)return E(1);if(x===u)return E(7);var N=(P={},P[s]=n,P[l]=i,P[a]=r,P)[x]||1,C=this.$d.getTime()+K*N;return G.w(C,this)},F.subtract=function(K,k){return this.add(-1*K,k)},F.format=function(K){var k=this,P=this.$locale();if(!this.isValid())return P.invalidDate||g;var B=K||"YYYY-MM-DDTHH:mm:ssZ",x=G.z(this),E=this.$H,N=this.$m,C=this.$M,W=P.weekdays,U=P.months,X=P.meridiem,ae=function(Pe,$e,je,ot){return Pe&&(Pe[$e]||Pe(k,B))||je[$e].slice(0,ot)},he=function(Pe){return G.s(E%12||12,Pe,"0")},pe=X||function(Pe,$e,je){var ot=Pe<12?"AM":"PM";return je?ot.toLowerCase():ot};return B.replace(v,function(Pe,$e){return $e||function(je){switch(je){case"YY":return String(k.$y).slice(-2);case"YYYY":return G.s(k.$y,4,"0");case"M":return C+1;case"MM":return G.s(C+1,2,"0");case"MMM":return ae(P.monthsShort,C,U,3);case"MMMM":return ae(U,C);case"D":return k.$D;case"DD":return G.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return ae(P.weekdaysMin,k.$W,W,2);case"ddd":return ae(P.weekdaysShort,k.$W,W,3);case"dddd":return W[k.$W];case"H":return String(E);case"HH":return G.s(E,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return pe(E,N,!0);case"A":return pe(E,N,!1);case"m":return String(N);case"mm":return G.s(N,2,"0");case"s":return String(k.$s);case"ss":return G.s(k.$s,2,"0");case"SSS":return G.s(k.$ms,3,"0");case"Z":return x}return null}(Pe)||x.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(K,k,P){var B,x=this,E=G.p(k),N=V(K),C=(N.utcOffset()-this.utcOffset())*n,W=this-N,U=function(){return G.m(x,N)};switch(E){case p:B=U()/12;break;case h:B=U();break;case f:B=U()/3;break;case u:B=(W-C)/6048e5;break;case c:B=(W-C)/864e5;break;case l:B=W/i;break;case s:B=W/n;break;case a:B=W/r;break;default:B=W}return P?B:G.a(B)},F.daysInMonth=function(){return this.endOf(h).$D},F.$locale=function(){return A[this.$L]},F.locale=function(K,k){if(!K)return this.$L;var P=this.clone(),B=H(K,k,!0);return B&&(P.$L=B),P},F.clone=function(){return G.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),Z=Y.prototype;return V.prototype=Z,[["$ms",o],["$s",a],["$m",s],["$H",l],["$W",c],["$M",h],["$y",p],["$D",m]].forEach(function($){Z[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),V.extend=function($,F){return $.$i||($(F,Y,V),$.$i=!0),V},V.locale=H,V.isDayjs=M,V.unix=function($){return V(1e3*$)},V.en=A[I],V.Ls=A,V.p={},V})})(nJ);var Owe=nJ.exports;const ct=oa(Owe);var iJ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Wu,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,o=/\d\d/,a=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,l={},c=function(y){return(y=+y)+(y>68?1900:2e3)},u=function(y){return function(v){this[y]=+v}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var b=v.match(/([+-]|\d\d)/g),_=60*b[1]+(+b[2]||0);return _===0?0:b[0]==="+"?-_:_}(y)}],f=function(y){var v=l[y];return v&&(v.indexOf?v:v.s.concat(v.f))},p=function(y,v){var b,_=l.meridiem;if(_){for(var S=1;S<=24;S+=1)if(y.indexOf(_(S,0,v))>-1){b=S>12;break}}else b=y===(v?"pm":"PM");return b},m={A:[s,function(y){this.afternoon=p(y,!1)}],a:[s,function(y){this.afternoon=p(y,!0)}],Q:[i,function(y){this.month=3*(y-1)+1}],S:[i,function(y){this.milliseconds=100*+y}],SS:[o,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[a,u("seconds")],ss:[a,u("seconds")],m:[a,u("minutes")],mm:[a,u("minutes")],H:[a,u("hours")],h:[a,u("hours")],HH:[a,u("hours")],hh:[a,u("hours")],D:[a,u("day")],DD:[o,u("day")],Do:[s,function(y){var v=l.ordinal,b=y.match(/\d+/);if(this.day=b[0],v)for(var _=1;_<=31;_+=1)v(_).replace(/\[|\]/g,"")===y&&(this.day=_)}],w:[a,u("week")],ww:[o,u("week")],M:[a,u("month")],MM:[o,u("month")],MMM:[s,function(y){var v=f("months"),b=(f("monthsShort")||v.map(function(_){return _.slice(0,3)})).indexOf(y)+1;if(b<1)throw new Error;this.month=b%12||b}],MMMM:[s,function(y){var v=f("months").indexOf(y)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,u("year")],YY:[o,function(y){this.year=c(y)}],YYYY:[/\d{4}/,u("year")],Z:h,ZZ:h};function g(y){var v,b;v=y,b=l&&l.formats;for(var _=(y=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(V,G,Y){var Z=Y&&Y.toUpperCase();return G||b[Y]||r[Y]||b[Z].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function($,F,K){return F||K.slice(1)})})).match(n),S=_.length,I=0;I<S;I+=1){var A=_[I],D=m[A],M=D&&D[0],H=D&&D[1];_[I]=H?{regex:M,parser:H}:A.replace(/^\[|\]$/g,"")}return function(V){for(var G={},Y=0,Z=0;Y<S;Y+=1){var $=_[Y];if(typeof $=="string")Z+=$.length;else{var F=$.regex,K=$.parser,k=V.slice(Z),P=F.exec(k)[0];K.call(G,P),V=V.replace(P,"")}}return function(B){var x=B.afternoon;if(x!==void 0){var E=B.hours;x?E<12&&(B.hours+=12):E===12&&(B.hours=0),delete B.afternoon}}(G),G}}return function(y,v,b){b.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(c=y.parseTwoDigitYear);var _=v.prototype,S=_.parse;_.parse=function(I){var A=I.date,D=I.utc,M=I.args;this.$u=D;var H=M[1];if(typeof H=="string"){var V=M[2]===!0,G=M[3]===!0,Y=V||G,Z=M[2];G&&(Z=M[2]),l=this.$locale(),!V&&Z&&(l=b.Ls[Z]),this.$d=function(k,P,B,x){try{if(["x","X"].indexOf(P)>-1)return new Date((P==="X"?1e3:1)*k);var E=g(P)(k),N=E.year,C=E.month,W=E.day,U=E.hours,X=E.minutes,ae=E.seconds,he=E.milliseconds,pe=E.zone,Pe=E.week,$e=new Date,je=W||(N||C?1:$e.getDate()),ot=N||$e.getFullYear(),Nt=0;N&&!C||(Nt=C>0?C-1:$e.getMonth());var et,bt=U||0,Ie=X||0,rt=ae||0,He=he||0;return pe?new Date(Date.UTC(ot,Nt,je,bt,Ie,rt,He+60*pe.offset*1e3)):B?new Date(Date.UTC(ot,Nt,je,bt,Ie,rt,He)):(et=new Date(ot,Nt,je,bt,Ie,rt,He),Pe&&(et=x(et).week(Pe).toDate()),et)}catch{return new Date("")}}(A,H,D,b),this.init(),Z&&Z!==!0&&(this.$L=this.locale(Z).$L),Y&&A!=this.format(H)&&(this.$d=new Date("")),l={}}else if(H instanceof Array)for(var $=H.length,F=1;F<=$;F+=1){M[1]=H[F-1];var K=b.apply(this,M);if(K.isValid()){this.$d=K.$d,this.$L=K.$L,this.init();break}F===$&&(this.$d=new Date(""))}else S.call(this,I)}}})})(iJ);var kwe=iJ.exports;const ws=oa(kwe);ct.extend(ws);const Pwe="wss://hcompanion.onrender.com";var Ob;const Dwe=async({userId:e})=>{Ob=new WebSocket(Pwe),Ob.onopen=()=>{console.log("connected to websocket"),Ob.send(JSON.stringify({type:"register",clientId:e}))},Ob.onmessage=t=>{const r=JSON.parse(t==null?void 0:t.data);if(r.type=="meetingReminder"){const n=ct(`${r.booking.startTime}`,"H:mm A").diff(ct(),"minutes");console.log("diff",n),n<=60&&n>0&&(console.log("i'm here"),te.fire(`Meeting in ${Math.abs(n)} minutes`,"","warning"))}}};function YD(){const e=$l(),{username:t,email:r,role:n,isLoggedIn:i}=rn(l=>l.user),o=rn(l=>l.patient);rn(l=>l.patient_alert),console.log(t);const a=async()=>{if(sessionStorage.getItem("token")){const l=await eJ({token:sessionStorage.getItem("token")});if(l){const c=await rJ();await Dwe({userId:l._id}),e(Xn({username:l.username,email:l.email,role:l.role,isLoggedIn:!0})),e(Px({firstName:c.firstName,lastName:c.lastName,profileImage:c.profileImage,weight:c.weight,height:c.height,profileImage:c.profileImage}))}else Xn({}),Px({})}};T.useEffect(()=>{a()},[]);const s=Er();return d.jsx("div",{className:"w-full h-[12vh]",children:d.jsxs("div",{className:"w-full h-[12vh] flex flex-row items-center mx-2 p-2 gap-4",children:[d.jsx("div",{className:"logo w-44 flex justify-center items-center  ",children:d.jsx("img",{src:"/logo.png",alt:""})}),d.jsx("div",{className:"items w-[50%] h-full",children:d.jsxs("div",{className:"w-full h-full flex flex-row gap-4 items-center p-5 ml-10 ",children:[d.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/home"),children:"Home"}),d.jsx("button",{className:"font-medium text-lg p-2 ",id:"id_navDoctors",onClick:()=>s("/patient/doctors"),children:"Find Doctors"}),d.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/medicines"),children:"Medicines"}),d.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/tests"),children:"tests"}),d.jsx("button",{className:"font-medium text-lg p-2 ",onClick:()=>s("/patient/treatmentPlan"),children:"Treatment Plan"}),!1]})}),d.jsx("div",{className:"search w-[25%] h-full flex justify-center items-center",children:d.jsxs("div",{className:"w-full h-[70%] rounded-lg flex flex-row gap-2 ",children:[d.jsx("input",{type:"text",placeholder:"search",className:"border w-full h-full rounded-lg"}),d.jsx("div",{className:"h-full flex justify-center items-center bg-blue-200 p-2 rounded-lg",children:d.jsx("img",{src:"/icons/search.png",alt:"search icon",className:"h-[2em] w-10 mr-2 opacity-40 cursor-pointer"})})]})}),i?d.jsxs("div",{className:"loggedIn h-full flex justify-end w-[18%] gap-8 px-2 mr-2",children:[d.jsxs("div",{className:"h-full flex flex-col gap-2",children:[d.jsx("span",{className:"font-bold",children:`Hi, ${o.firstName}`}),d.jsx("button",{className:"p-2 border rounded-lg bg-emerald-500 p-2 font-bold ",onClick:()=>{sessionStorage.removeItem("token"),e(Xn({})),e(Px({}))},children:"log out"})]}),d.jsx("img",{src:o.profileImage,alt:"",className:"h-[100%] w-[28%] rounded-[50%] cursor-pointer",onClick:()=>{s("/patient/profile")}})]}):d.jsx("button",{type:"button",className:"h-[80%] ml-4 border rounded-[5%] bg-orange-500 p-2 font-bold ",id:"id_loginNav",onClick:()=>{s("/login")},children:"login / sign up"})]})})}ET.setAppElement("#root");function Lwe(){const e=$l();rn(l=>l.user);const[t,r]=T.useState(!1),[n,i]=T.useState("jjjjjjjj"),o=Er(),a=Wr({initialValues:{username:"",password:""},validationSchema:nhe,onSubmit:async(l,c)=>{const u=await Sge(l);if(u){if(await te.fire({title:"Successfull",icon:"success",text:"you have been successfully logged in"}),await e(Xn({username:u.username,role:u.role,email:u.email,isLoggedIn:!0})),u.role=="2")return o("/pharmacy/home");if(u.role=="1")return o("/doctor");if(u.role=="3")return o("/laboratory");if(u.role=="4")return o("/admin");o("/")}}});T.useEffect(()=>{google.accounts.id.initialize({client_id:"981653324698-i9aagns1rnmvcudlrt3bmj87v802e737.apps.googleusercontent.com",callback:async c=>{const u=await Cge({googleToken:c.credential});if(!u)await Mwe(c);else{if(await te.fire({title:"Successfull",icon:"success",text:"you have been successfully logged in"}),e(Xn({username:u.username,role:u.role,email:u.email})),u.role=="2")return o("/pharmacy/home");if(u.role=="3")return o("/laboratory/home");o("/")}}}),google.accounts.id.renderButton(document.getElementById("id_google"),{theme:"filled_blue",size:"large",width:350,type:"standard"})},[]);const s=async()=>{try{const{value:l}=await te.fire({title:"forgot password",input:"email",showCancelButton:!0,inputLabel:"Enter email"});console.log(l),await i(l);const c=await xge({email:l});if(l&&c){const{value:u}=await te.fire({title:"Enter Otp",input:"number",showCancelButton:!0,inputLabel:"Enter Otp"});u&&await Rge({email:l,otp:u})&&await r(!0)}}catch(l){console.log(`error at handle forgot password ${l}`)}};return d.jsxs("div",{className:"homePage w-full h-full",children:[d.jsx("div",{className:"header w-full h-[12vh] shadow-lg bg-white",children:d.jsx(YD,{})}),d.jsxs("div",{className:"flex flex-row w-screen h-screen",children:[t&&d.jsx(jwe,{email:n,isOtpChecked:t,setisForgotPasswordChecked:r}),d.jsx("div",{className:"w-[40%] ",children:d.jsx("img",{src:"logo.png",alt:""})}),d.jsxs("div",{className:"w-[60%] mainContainer h-[90vh] mt-1  flex flex-col justify-start items-center text-emerald-300 gap-10 bg-sky-300 rounded-l-[5%]",children:[d.jsxs("form",{onSubmit:a.handleSubmit,className:"border w-[50%] rounded-[5%] p-20 flex flex-col gap-4 bg-white  border-emerald-300 shadow-lg shadow-emerald-500 mt-10",children:[d.jsx("div",{className:"flex justify-center",children:d.jsx("h1",{className:"text-4xl text-bold text-emerald-500 ",children:"LOGIN"})}),d.jsxs("div",{className:"flex flex-col gap-4 text-black",children:[d.jsx("input",{type:"text",name:"username",id:"id_username",onChange:a.handleChange,onBlur:a.handleBlur,className:"border p-2 rounded-lg text-center",placeholder:"email/username"}),d.jsx("p",{className:"text-red-500",children:a.touched.username&&a.errors.username&&a.errors.username}),d.jsx("input",{type:"password",name:"password",id:"id_password",onChange:a.handleChange,onBlur:a.handleBlur,className:"border p-2 rounded-lg text-center",placeholder:"password"}),d.jsx("p",{className:"text-red-500",children:a.touched.password&&a.errors.password&&a.errors.password})]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx("button",{id:"id_loginButton",className:"w-[full] h-[50%] border rounded-[5%] bg-orange-500 p-2",type:"submit",children:"login"}),d.jsxs("div",{className:"flex flex-row gap-10 h-[50%] justify-center",children:[d.jsx("h2",{className:"text-blue-400",children:"don't have account...?"}),d.jsx("button",{type:"button",onClick:()=>{o("/register")},children:"sign up"})]}),d.jsx("button",{type:"button",onClick:s,className:"w-[full] h-[50%] border rounded-[5%] bg-blue-500 p-2",children:"forgot password"})]})]}),d.jsx("div",{className:"",children:d.jsx("button",{id:"id_google"})})]})]})]})}const Mwe=async e=>{const{value:t}=await te.fire({input:"select",showCancelButton:!0,inputPlaceholder:"select role to proceed",title:"Role",inputOptions:{0:"patient",1:"doctor",2:"pharmacy",3:"laboratory"}});t&&await Tge({googleToken:e.credential,role:t})&&te.fire({title:"Account Creation Successfull",icon:"success",text:"Account has been created"})};function jwe(e){const[t,r]=T.useState(!1),n=async()=>r(!1),i=Wr({initialValues:{password:"",confirmPassword:""},validationSchema:oq,onSubmit:async(o,a)=>{await Ige({password:o.password,email:e.email})&&te.fire({icon:"success",html:"<b>Password has been reset</b>"}).then(async()=>{await n(),await e.setisForgotPasswordChecked(!1)})}});return T.useState(()=>{e.isOtpChecked&&r(!0),console.log("hiiiii")},[]),d.jsx("div",{className:"fixed w-screen h-screen",children:d.jsxs(ET,{isOpen:t,onRequestClose:n,overlayClassName:"fixed bg-black bg-opacity-50 inset-0 flex justify-center items-center",className:"bg-white opacity-100 mx-w-[60vw] flex flex-col gap-10 p-10 rounded-lg justify-center items-center",children:[d.jsx("h1",{className:"text-center font-bold",children:"Verification"}),d.jsxs("h3",{children:["Otp has been generated and sent to the email ",aq(e.email)]}),d.jsxs("form",{onSubmit:i.handleSubmit,className:"w-full flex flex-col gap-10 justify-center items-center",children:[d.jsxs("div",{className:"flex flex-col gap-10 w-full",children:[d.jsx(le,{name:"password",type:"password",variant:"filled",label:"Enter the password",onChange:i.handleChange,onBlur:i.handleBlur,className:"w-[40vw]",...i.touched.password&&(i.errors.password?{color:"error",helperText:`${i.errors.password}`}:{color:"success"})}),d.jsx(le,{name:"confirmPassword",type:"password",variant:"filled",label:"Enter the confirm password",onChange:i.handleChange,onBlur:i.handleBlur,className:"w-[40vw]",...i.touched.confirmPassword&&(i.errors.confirmPassword?{color:"error",helperText:`${i.errors.confirmPassword}`}:{color:"success"})})]}),d.jsx("button",{type:"submit",className:"w-full border rounded-[5%] bg-orange-500 p-2",children:"Submit"})]})]})})}const Uwe=Ni().shape({username:jt().required("Username is Required"),email:jt().email("Provide valid email").required("Email is reuired"),password:jt().required("Password is required").min(8,"must contain atleast 8 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirmPassword:jt().required("confirm password is required").oneOf([o9("password"),null],"Password and Confirm password are not matching"),phone:jt().matches(/^[1-9][0-9]{9}$/,"Must be a valid number").required("Phone number is required"),role:jt().required("Required")}),_0="https://hcompanion.onrender.com/api";async function Fwe({otp:e,email:t}){try{const r=await ve.post(`${_0}/user/register/createPatient`,{otp:e,email:t},{withCredentials:!0});return console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&te.fire("Otp has been expired"),console.log(r)}}async function Vwe({otp:e,email:t}){try{const r=await ve.post(`${_0}/user/register/createDoctor`,{otp:e,email:t},{withCredentials:!0});return console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&te.fire("Otp has been expired"),console.log(r)}}async function Bwe({otp:e,email:t}){try{const r=await ve.post(`${_0}/user/register/createPharmacy`,{otp:e,email:t},{withCredentials:!0});return console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&te.fire("Otp has been expired"),console.log(r)}}async function $we({otp:e,email:t}){try{console.log("entered Laboratory");const r=await ve.post(`${_0}/user/register/createLaboratory`,{otp:e,email:t},{withCredentials:!0});return await console.log(r.data),r.data.CreationStatus}catch(r){r.response.status=="404"&&te.fire("Otp has been expired"),console.log(r)}}async function Hwe(e){try{const t=await ve.post(`${_0}/user/register/otp`,e,{withCredentials:!0});return console.log(t.data),t.data.info}catch(t){t.response.status=="401"?te.fire("User Already exist"):t.response.status=="404"?te.fire({icon:"error",title:"Mail couldn't be send",text:"Some error occured while sending otp to mail"}):te.fire({icon:"error",title:"Server Issue",text:"Some error Occurered in the server side , please try again..!"})}}const zwe=Ni().shape({email:jt().required("email required"),otp:jt().matches(/^[0-9]{6}$/,"Must be valid").required("Otp required")});ET.setAppElement("#root");function Gwe(){const[e,t]=T.useState(!1),[r,n]=T.useState(!1),i=Wr({initialValues:{username:"",email:"",password:"",confirmPassword:"",phone:"",role:""},validationSchema:Uwe,onSubmit:async(o,a)=>{await Hwe(o)&&await t(!0)}});return T.useEffect(()=>{r&&((async()=>await i.reset)(),n(!1))},[r]),d.jsxs("div",{className:"homePage w-full h-full",children:[d.jsx("div",{className:"header w-full h-[12vh] shadow-lg",children:d.jsx(YD,{})}),d.jsx("div",{className:"page flex w-screen h-screen",children:d.jsxs("div",{className:"flex flex-row w-screen gap-[30vh] m-10",children:[e&&d.jsx(Wwe,{isOtpGenerated:!0,setisOtpGenerated:t,email:i.values.email,role:i.values.role,setIsCreated:n}),d.jsx("div",{className:"w-[40%] ",children:d.jsx("img",{src:"logo.png",alt:""})}),d.jsxs("form",{onSubmit:i.handleSubmit,className:"registerDiv w-[40%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("div",{className:"flex items-center  justify-center",children:d.jsx("h2",{className:"text-4xl  text-emerald-500 ",children:"Sign Up"})}),d.jsxs("div",{className:"flex flex-row gap-4",children:[d.jsxs("select",{name:"role",onChange:i.handleChange,onBlur:i.handleBlur,id:"id_role",className:"font-bold text-black rounded-lg",children:[d.jsx("option",{className:"",children:"Select a role"}),d.jsx("option",{value:"0",children:"Patient"}),d.jsx("option",{value:"1",children:"Doctor"}),d.jsx("option",{value:"2",children:"Pharmacy"}),d.jsx("option",{value:"3",children:"Laboratory"}),d.jsx("option",{value:"4",children:"Admin"})]}),d.jsx("span",{className:"text-red-500",children:i.touched.role&&i.errors.role&&`* ${i.errors.role}`})]}),d.jsxs("div",{className:"inputSec flex flex-col gap-5",children:[d.jsx(le,{name:"username",onChange:i.handleChange,variant:"filled",label:"username",onBlur:i.handleBlur,...i.touched.username&&(i.errors.username?{color:"error",helperText:`${i.errors.username}`}:{color:"success"})}),d.jsx(le,{name:"email",onChange:i.handleChange,variant:"filled",label:"email",onBlur:i.handleBlur,...i.touched.email&&(i.errors.email?{color:"error",helperText:`${i.errors.email}`}:{color:"success"})}),d.jsx(le,{name:"password",type:"password",onChange:i.handleChange,variant:"filled",label:"Password",onBlur:i.handleBlur,...i.touched.password&&(i.errors.password?{color:"error",helperText:`${i.errors.password}`}:{color:"success"})}),d.jsx(le,{name:"confirmPassword",type:"password",variant:"filled",onChange:i.handleChange,label:"Confirm Password",onBlur:i.handleBlur,...i.touched.confirmPassword&&(i.errors.confirmPassword?{color:"error",helperText:`${i.errors.confirmPassword}`}:{color:"success"})}),d.jsx(le,{name:"phone",variant:"filled",onChange:i.handleChange,label:"phone",onBlur:i.handleBlur,...i.touched.phone&&(i.errors.phone?{color:"error",helperText:`${i.errors.phone}`}:{color:"success"})})]}),d.jsx("button",{type:"submit",className:"w-[full] border rounded-[5%] bg-orange-500 p-2 ",children:"sign up"})]})]})})]})}function Wwe(e){const[t,r]=T.useState(!1),n=Er(),i=()=>{r(!1),e.setisOtpGenerated(!1)},o=Wr({initialValues:{email:e.email,otp:""},validationSchema:zwe,onSubmit:async(a,s)=>{var l;e.role=="0"?l=await Fwe(a):e.role=="1"?l=await Vwe(a):e.role=="2"?l=await Bwe(a):e.role=="3"&&(l=await $we(a)),l&&(i(),te.fire({title:"Registeration Successfull",text:"You have successfully Registered",icon:"success"}).then(()=>{n("/login")}))}});return T.useEffect(()=>{e.isOtpGenerated&&r(!0)},[]),d.jsx("div",{className:"fixed w-screen h-screen",children:d.jsxs(ET,{isOpen:t,onRequestClose:i,overlayClassName:"fixed bg-black bg-opacity-50 inset-0 flex justify-center items-center",className:"bg-white opacity-100 mx-w-[60vw] flex flex-col gap-10 p-10 rounded-lg justify-center items-center ",children:[d.jsx("h1",{className:"text-center font-bold",children:"Verification"}),d.jsxs("h3",{children:["Otp has been generated and sent to the email ",aq(e.email)]}),d.jsxs("form",{onSubmit:o.handleSubmit,className:"w-full flex flex-col gap-10 justify-center items-center",children:[d.jsx("div",{className:"flex flex-row gap-10 w-full",children:d.jsx(le,{name:"otp",variant:"filled",label:"Enter Otp",onChange:o.handleChange,onBlur:o.handleBlur,className:"w-[40vw]",...o.touched.otp&&(o.errors.otp?{color:"error",helperText:`${o.errors.otp}`}:{color:"success"})})}),d.jsx("button",{type:"submit",className:"w-full border rounded-[5%] bg-orange-500 p-2",children:"Submit"})]})]})})}var oJ={exports:{}},Dx={exports:{}},Pr={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Lx,D5;function Kwe(){if(D5)return Lx;D5=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function i(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var a={},s=0;s<10;s++)a["_"+String.fromCharCode(s)]=s;var l=Object.getOwnPropertyNames(a).map(function(u){return a[u]});if(l.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(u){c[u]=u}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Lx=i()?Object.assign:function(o,a){for(var s,l=n(o),c,u=1;u<arguments.length;u++){s=Object(arguments[u]);for(var h in s)t.call(s,h)&&(l[h]=s[h]);if(e){c=e(s);for(var f=0;f<c.length;f++)r.call(s,c[f])&&(l[c[f]]=s[c[f]])}}return l},Lx}/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L5;function qwe(){if(L5)return Pr;L5=1;var e=Kwe(),t=typeof Symbol=="function"&&Symbol.for,r=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,o=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,s=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.forward_ref"):60112,u=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.memo"):60115,f=t?Symbol.for("react.lazy"):60116,p=typeof Symbol=="function"&&Symbol.iterator;function m(U){for(var X="https://reactjs.org/docs/error-decoder.html?invariant="+U,ae=1;ae<arguments.length;ae++)X+="&args[]="+encodeURIComponent(arguments[ae]);return"Minified React error #"+U+"; visit "+X+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function v(U,X,ae){this.props=U,this.context=X,this.refs=y,this.updater=ae||g}v.prototype.isReactComponent={},v.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error(m(85));this.updater.enqueueSetState(this,U,X,"setState")},v.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function b(){}b.prototype=v.prototype;function _(U,X,ae){this.props=U,this.context=X,this.refs=y,this.updater=ae||g}var S=_.prototype=new b;S.constructor=_,e(S,v.prototype),S.isPureReactComponent=!0;var I={current:null},A=Object.prototype.hasOwnProperty,D={key:!0,ref:!0,__self:!0,__source:!0};function M(U,X,ae){var he,pe={},Pe=null,$e=null;if(X!=null)for(he in X.ref!==void 0&&($e=X.ref),X.key!==void 0&&(Pe=""+X.key),X)A.call(X,he)&&!D.hasOwnProperty(he)&&(pe[he]=X[he]);var je=arguments.length-2;if(je===1)pe.children=ae;else if(1<je){for(var ot=Array(je),Nt=0;Nt<je;Nt++)ot[Nt]=arguments[Nt+2];pe.children=ot}if(U&&U.defaultProps)for(he in je=U.defaultProps,je)pe[he]===void 0&&(pe[he]=je[he]);return{$$typeof:r,type:U,key:Pe,ref:$e,props:pe,_owner:I.current}}function H(U,X){return{$$typeof:r,type:U.type,key:X,ref:U.ref,props:U.props,_owner:U._owner}}function V(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}function G(U){var X={"=":"=0",":":"=2"};return"$"+(""+U).replace(/[=:]/g,function(ae){return X[ae]})}var Y=/\/+/g,Z=[];function $(U,X,ae,he){if(Z.length){var pe=Z.pop();return pe.result=U,pe.keyPrefix=X,pe.func=ae,pe.context=he,pe.count=0,pe}return{result:U,keyPrefix:X,func:ae,context:he,count:0}}function F(U){U.result=null,U.keyPrefix=null,U.func=null,U.context=null,U.count=0,10>Z.length&&Z.push(U)}function K(U,X,ae,he){var pe=typeof U;(pe==="undefined"||pe==="boolean")&&(U=null);var Pe=!1;if(U===null)Pe=!0;else switch(pe){case"string":case"number":Pe=!0;break;case"object":switch(U.$$typeof){case r:case n:Pe=!0}}if(Pe)return ae(he,U,X===""?"."+P(U,0):X),1;if(Pe=0,X=X===""?".":X+":",Array.isArray(U))for(var $e=0;$e<U.length;$e++){pe=U[$e];var je=X+P(pe,$e);Pe+=K(pe,je,ae,he)}else if(U===null||typeof U!="object"?je=null:(je=p&&U[p]||U["@@iterator"],je=typeof je=="function"?je:null),typeof je=="function")for(U=je.call(U),$e=0;!(pe=U.next()).done;)pe=pe.value,je=X+P(pe,$e++),Pe+=K(pe,je,ae,he);else if(pe==="object")throw ae=""+U,Error(m(31,ae==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ae,""));return Pe}function k(U,X,ae){return U==null?0:K(U,"",X,ae)}function P(U,X){return typeof U=="object"&&U!==null&&U.key!=null?G(U.key):X.toString(36)}function B(U,X){U.func.call(U.context,X,U.count++)}function x(U,X,ae){var he=U.result,pe=U.keyPrefix;U=U.func.call(U.context,X,U.count++),Array.isArray(U)?E(U,he,ae,function(Pe){return Pe}):U!=null&&(V(U)&&(U=H(U,pe+(!U.key||X&&X.key===U.key?"":(""+U.key).replace(Y,"$&/")+"/")+ae)),he.push(U))}function E(U,X,ae,he,pe){var Pe="";ae!=null&&(Pe=(""+ae).replace(Y,"$&/")+"/"),X=$(X,Pe,he,pe),k(U,x,X),F(X)}var N={current:null};function C(){var U=N.current;if(U===null)throw Error(m(321));return U}var W={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:I,IsSomeRendererActing:{current:!1},assign:e};return Pr.Children={map:function(U,X,ae){if(U==null)return U;var he=[];return E(U,he,null,X,ae),he},forEach:function(U,X,ae){if(U==null)return U;X=$(null,null,X,ae),k(U,B,X),F(X)},count:function(U){return k(U,function(){return null},null)},toArray:function(U){var X=[];return E(U,X,null,function(ae){return ae}),X},only:function(U){if(!V(U))throw Error(m(143));return U}},Pr.Component=v,Pr.Fragment=i,Pr.Profiler=a,Pr.PureComponent=_,Pr.StrictMode=o,Pr.Suspense=u,Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,Pr.cloneElement=function(U,X,ae){if(U==null)throw Error(m(267,U));var he=e({},U.props),pe=U.key,Pe=U.ref,$e=U._owner;if(X!=null){if(X.ref!==void 0&&(Pe=X.ref,$e=I.current),X.key!==void 0&&(pe=""+X.key),U.type&&U.type.defaultProps)var je=U.type.defaultProps;for(ot in X)A.call(X,ot)&&!D.hasOwnProperty(ot)&&(he[ot]=X[ot]===void 0&&je!==void 0?je[ot]:X[ot])}var ot=arguments.length-2;if(ot===1)he.children=ae;else if(1<ot){je=Array(ot);for(var Nt=0;Nt<ot;Nt++)je[Nt]=arguments[Nt+2];he.children=je}return{$$typeof:r,type:U.type,key:pe,ref:Pe,props:he,_owner:$e}},Pr.createContext=function(U,X){return X===void 0&&(X=null),U={$$typeof:l,_calculateChangedBits:X,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider={$$typeof:s,_context:U},U.Consumer=U},Pr.createElement=M,Pr.createFactory=function(U){var X=M.bind(null,U);return X.type=U,X},Pr.createRef=function(){return{current:null}},Pr.forwardRef=function(U){return{$$typeof:c,render:U}},Pr.isValidElement=V,Pr.lazy=function(U){return{$$typeof:f,_ctor:U,_status:-1,_result:null}},Pr.memo=function(U,X){return{$$typeof:h,type:U,compare:X===void 0?null:X}},Pr.useCallback=function(U,X){return C().useCallback(U,X)},Pr.useContext=function(U,X){return C().useContext(U,X)},Pr.useDebugValue=function(){},Pr.useEffect=function(U,X){return C().useEffect(U,X)},Pr.useImperativeHandle=function(U,X,ae){return C().useImperativeHandle(U,X,ae)},Pr.useLayoutEffect=function(U,X){return C().useLayoutEffect(U,X)},Pr.useMemo=function(U,X){return C().useMemo(U,X)},Pr.useReducer=function(U,X,ae){return C().useReducer(U,X,ae)},Pr.useRef=function(U){return C().useRef(U)},Pr.useState=function(U){return C().useState(U)},Pr.version="16.14.0",Pr}var M5;function Ywe(){return M5||(M5=1,Dx.exports=qwe()),Dx.exports}var aJ={exports:{}};(function(e,t){(function(r){e.exports=r(null)})(function r(n){var i=/^\0+/g,o=/[\0\r\f]/g,a=/: */g,s=/zoo|gra/,l=/([,: ])(transform)/g,c=/,+\s*(?![^(]*[)])/g,u=/ +\s*(?![^(]*[)])/g,h=/ *[\0] */g,f=/,\r+?/g,p=/([\t\r\n ])*\f?&/g,m=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,g=/\W+/g,y=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,b=/:(read-only)/g,_=/\s+(?=[{\];=:>])/g,S=/([[}=:>])\s+/g,I=/(\{[^{]+?);(?=\})/g,A=/\s{2,}/g,D=/([^\(])(:+) */g,M=/[svh]\w+-[tblr]{2}/,H=/\(\s*(.*)\s*\)/g,V=/([\s\S]*?);/g,G=/-self|flex-/g,Y=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Z=/stretch|:\s*\w+\-(?:conte|avail)/,$=/([^-])(image-set\()/,F="-webkit-",K="-moz-",k="-ms-",P=59,B=125,x=123,E=40,N=41,C=91,W=93,U=10,X=13,ae=9,he=64,pe=32,Pe=38,$e=45,je=95,ot=42,Nt=44,et=58,bt=39,Ie=34,rt=47,He=62,Ze=43,qe=126,re=0,Ae=12,Fe=11,We=107,ne=109,ye=115,Je=112,ut=111,qt=105,Vn=99,Cn=100,yi=112,xn=1,Oi=1,bn=0,vi=1,Rn=1,ig=1,K0=0,Xl=0,md=0,ef=[],og=[],za=0,tf=null,SC=-2,q0=-1,TC=0,Y0=1,X0=2,CC=3,ag=0,Vc=1,rf="",Ns="",gd="";function nf(kt,ht,lt,$t,Ye){for(var wr,ue,ar=0,rr=0,En=0,Qt=0,Bn=0,qr=0,sr=0,bi=0,ro=0,al=0,no=0,ua=0,yd=0,Ga=0,ur=0,ci=0,Jl=0,Hc=0,Fr=0,xt=lt.length,Qr=xt-1,ui="",Ut="",j="",z="",ee="",Re="";ur<xt;){if(sr=lt.charCodeAt(ur),ur===Qr&&rr+Qt+En+ar!==0&&(rr!==0&&(sr=rr===rt?U:rt),Qt=En=ar=0,xt++,Qr++),rr+Qt+En+ar===0){if(ur===Qr&&(ci>0&&(Ut=Ut.replace(o,"")),Ut.trim().length>0)){switch(sr){case pe:case ae:case P:case X:case U:break;default:Ut+=lt.charAt(ur)}sr=P}if(Jl===1)switch(sr){case x:case B:case P:case Ie:case bt:case E:case N:case Nt:Jl=0;case ae:case X:case U:case pe:break;default:for(Jl=0,Fr=ur,Bn=sr,ur--,sr=P;Fr<xt;)switch(lt.charCodeAt(Fr++)){case U:case X:case P:++ur,sr=Bn,Fr=xt;break;case et:ci>0&&(++ur,sr=Bn);case x:Fr=xt}}switch(sr){case x:for(Bn=(Ut=Ut.trim()).charCodeAt(0),no=1,Fr=++ur;ur<xt;){switch(sr=lt.charCodeAt(ur)){case x:no++;break;case B:no--;break;case rt:switch(qr=lt.charCodeAt(ur+1)){case ot:case rt:ur=Z0(qr,ur,Qr,lt)}break;case C:sr++;case E:sr++;case Ie:case bt:for(;ur++<Qr&&lt.charCodeAt(ur)!==sr;);}if(no===0)break;ur++}switch(j=lt.substring(Fr,ur),Bn===re&&(Bn=(Ut=Ut.replace(i,"").trim()).charCodeAt(0)),Bn){case he:switch(ci>0&&(Ut=Ut.replace(o,"")),qr=Ut.charCodeAt(1)){case Cn:case ne:case ye:case $e:wr=ht;break;default:wr=ef}if(Fr=(j=nf(ht,wr,j,qr,Ye+1)).length,md>0&&Fr===0&&(Fr=Ut.length),za>0&&(wr=sg(ef,Ut,Hc),ue=Bc(CC,j,wr,ht,Oi,xn,Fr,qr,Ye,$t),Ut=wr.join(""),ue!==void 0&&(Fr=(j=ue.trim()).length)===0&&(qr=0,j="")),Fr>0)switch(qr){case ye:Ut=Ut.replace(H,Q0);case Cn:case ne:case $e:j=Ut+"{"+j+"}";break;case We:j=(Ut=Ut.replace(y,"$1 $2"+(Vc>0?rf:"")))+"{"+j+"}",Rn===1||Rn===2&&af("@"+j,3)?j="@"+F+j+"@"+j:j="@"+j;break;default:j=Ut+j,$t===yi&&(z+=j,j="")}else j="";break;default:j=nf(ht,sg(ht,Ut,Hc),j,$t,Ye+1)}ee+=j,ua=0,Jl=0,Ga=0,ci=0,Hc=0,yd=0,Ut="",j="",sr=lt.charCodeAt(++ur);break;case B:case P:if((Fr=(Ut=(ci>0?Ut.replace(o,""):Ut).trim()).length)>1)switch(Ga===0&&((Bn=Ut.charCodeAt(0))===$e||Bn>96&&Bn<123)&&(Fr=(Ut=Ut.replace(" ",":")).length),za>0&&(ue=Bc(Y0,Ut,ht,kt,Oi,xn,z.length,$t,Ye,$t))!==void 0&&(Fr=(Ut=ue.trim()).length)===0&&(Ut="\0\0"),Bn=Ut.charCodeAt(0),qr=Ut.charCodeAt(1),Bn){case re:break;case he:if(qr===qt||qr===Vn){Re+=Ut+lt.charAt(ur);break}default:if(Ut.charCodeAt(Fr-1)===et)break;z+=of(Ut,Bn,qr,Ut.charCodeAt(2))}ua=0,Jl=0,Ga=0,ci=0,Hc=0,Ut="",sr=lt.charCodeAt(++ur)}}switch(sr){case X:case U:if(rr+Qt+En+ar+Xl===0)switch(al){case N:case bt:case Ie:case he:case qe:case He:case ot:case Ze:case rt:case $e:case et:case Nt:case P:case x:case B:break;default:Ga>0&&(Jl=1)}rr===rt?rr=0:vi+ua===0&&$t!==We&&Ut.length>0&&(ci=1,Ut+="\0"),za*ag>0&&Bc(TC,Ut,ht,kt,Oi,xn,z.length,$t,Ye,$t),xn=1,Oi++;break;case P:case B:if(rr+Qt+En+ar===0){xn++;break}default:switch(xn++,ui=lt.charAt(ur),sr){case ae:case pe:if(Qt+ar+rr===0)switch(bi){case Nt:case et:case ae:case pe:ui="";break;default:sr!==pe&&(ui=" ")}break;case re:ui="\\0";break;case Ae:ui="\\f";break;case Fe:ui="\\v";break;case Pe:Qt+rr+ar===0&&vi>0&&(Hc=1,ci=1,ui="\f"+ui);break;case 108:if(Qt+rr+ar+bn===0&&Ga>0)switch(ur-Ga){case 2:bi===Je&&lt.charCodeAt(ur-3)===et&&(bn=bi);case 8:ro===ut&&(bn=ro)}break;case et:Qt+rr+ar===0&&(Ga=ur);break;case Nt:rr+En+Qt+ar===0&&(ci=1,ui+="\r");break;case Ie:case bt:rr===0&&(Qt=Qt===sr?0:Qt===0?sr:Qt);break;case C:Qt+rr+En===0&&ar++;break;case W:Qt+rr+En===0&&ar--;break;case N:Qt+rr+ar===0&&En--;break;case E:if(Qt+rr+ar===0){if(ua===0)switch(2*bi+3*ro){case 533:break;default:no=0,ua=1}En++}break;case he:rr+En+Qt+ar+Ga+yd===0&&(yd=1);break;case ot:case rt:if(Qt+ar+En>0)break;switch(rr){case 0:switch(2*sr+3*lt.charCodeAt(ur+1)){case 235:rr=rt;break;case 220:Fr=ur,rr=ot}break;case ot:sr===rt&&bi===ot&&Fr+2!==ur&&(lt.charCodeAt(Fr+2)===33&&(z+=lt.substring(Fr,ur+1)),ui="",rr=0)}}if(rr===0){if(vi+Qt+ar+yd===0&&$t!==We&&sr!==P)switch(sr){case Nt:case qe:case He:case Ze:case N:case E:if(ua===0){switch(bi){case ae:case pe:case U:case X:ui+="\0";break;default:ui="\0"+ui+(sr===Nt?"":"\0")}ci=1}else switch(sr){case E:Ga+7===ur&&bi===108&&(Ga=0),ua=++no;break;case N:(ua=--no)==0&&(ci=1,ui+="\0")}break;case ae:case pe:switch(bi){case re:case x:case B:case P:case Nt:case Ae:case ae:case pe:case U:case X:break;default:ua===0&&(ci=1,ui+="\0")}}Ut+=ui,sr!==pe&&sr!==ae&&(al=sr)}}ro=bi,bi=sr,ur++}if(Fr=z.length,md>0&&Fr===0&&ee.length===0&&ht[0].length!==0&&($t!==ne||ht.length===1&&(vi>0?Ns:gd)===ht[0])&&(Fr=ht.join(",").length+2),Fr>0){if(wr=vi===0&&$t!==We?function(Xe){for(var _e,ie,nt=0,Pt=Xe.length,Ce=Array(Pt);nt<Pt;++nt){for(var Ue=Xe[nt].split(h),Ge="",Qe=0,mt=0,Ot=0,Tt=0,In=Ue.length;Qe<In;++Qe)if(!((mt=(ie=Ue[Qe]).length)===0&&In>1)){if(Ot=Ge.charCodeAt(Ge.length-1),Tt=ie.charCodeAt(0),_e="",Qe!==0)switch(Ot){case ot:case qe:case He:case Ze:case pe:case E:break;default:_e=" "}switch(Tt){case Pe:ie=_e+Ns;case qe:case He:case Ze:case pe:case N:case E:break;case C:ie=_e+ie+Ns;break;case et:switch(2*ie.charCodeAt(1)+3*ie.charCodeAt(2)){case 530:if(ig>0){ie=_e+ie.substring(8,mt-1);break}default:(Qe<1||Ue[Qe-1].length<1)&&(ie=_e+Ns+ie)}break;case Nt:_e="";default:mt>1&&ie.indexOf(":")>0?ie=_e+ie.replace(D,"$1"+Ns+"$2"):ie=_e+ie+Ns}Ge+=ie}Ce[nt]=Ge.replace(o,"").trim()}return Ce}(ht):ht,za>0&&(ue=Bc(X0,z,wr,kt,Oi,xn,Fr,$t,Ye,$t))!==void 0&&(z=ue).length===0)return Re+z+ee;if(z=wr.join(",")+"{"+z+"}",Rn*bn!=0){switch(Rn===2&&!af(z,2)&&(bn=0),bn){case ut:z=z.replace(b,":"+K+"$1")+z;break;case Je:z=z.replace(v,"::"+F+"input-$1")+z.replace(v,"::"+K+"$1")+z.replace(v,":"+k+"input-$1")+z}bn=0}}return Re+z+ee}function sg(kt,ht,lt){var $t=ht.trim().split(f),Ye=$t,wr=$t.length,ue=kt.length;switch(ue){case 0:case 1:for(var ar=0,rr=ue===0?"":kt[0]+" ";ar<wr;++ar)Ye[ar]=J0(rr,Ye[ar],lt,ue).trim();break;default:ar=0;var En=0;for(Ye=[];ar<wr;++ar)for(var Qt=0;Qt<ue;++Qt)Ye[En++]=J0(kt[Qt]+" ",$t[ar],lt,ue).trim()}return Ye}function J0(kt,ht,lt,$t){var Ye=ht,wr=Ye.charCodeAt(0);switch(wr<33&&(wr=(Ye=Ye.trim()).charCodeAt(0)),wr){case Pe:switch(vi+$t){case 0:case 1:if(kt.trim().length===0)break;default:return Ye.replace(p,"$1"+kt.trim())}break;case et:switch(Ye.charCodeAt(1)){case 103:if(ig>0&&vi>0)return Ye.replace(m,"$1").replace(p,"$1"+gd);break;default:return kt.trim()+Ye.replace(p,"$1"+kt.trim())}default:if(lt*vi>0&&Ye.indexOf("\f")>0)return Ye.replace(p,(kt.charCodeAt(0)===et?"":"$1")+kt.trim())}return kt+Ye}function of(kt,ht,lt,$t){var Ye,wr=0,ue=kt+";",ar=2*ht+3*lt+4*$t;if(ar===944)return function(rr){var En=rr.length,Qt=rr.indexOf(":",9)+1,Bn=rr.substring(0,Qt).trim(),qr=rr.substring(Qt,En-1).trim();switch(rr.charCodeAt(9)*Vc){case 0:break;case $e:if(rr.charCodeAt(10)!==110)break;default:for(var sr=qr.split((qr="",c)),bi=0,Qt=0,En=sr.length;bi<En;Qt=0,++bi){for(var ro=sr[bi],al=ro.split(u);ro=al[Qt];){var no=ro.charCodeAt(0);if(Vc===1&&(no>he&&no<90||no>96&&no<123||no===je||no===$e&&ro.charCodeAt(1)!==$e))switch(isNaN(parseFloat(ro))+(ro.indexOf("(")!==-1)){case 1:switch(ro){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:ro+=rf}}al[Qt++]=ro}qr+=(bi===0?"":",")+al.join(" ")}}return qr=Bn+qr+";",Rn===1||Rn===2&&af(qr,1)?F+qr+qr:qr}(ue);if(Rn===0||Rn===2&&!af(ue,1))return ue;switch(ar){case 1015:return ue.charCodeAt(10)===97?F+ue+ue:ue;case 951:return ue.charCodeAt(3)===116?F+ue+ue:ue;case 963:return ue.charCodeAt(5)===110?F+ue+ue:ue;case 1009:if(ue.charCodeAt(4)!==100)break;case 969:case 942:return F+ue+ue;case 978:return F+ue+K+ue+ue;case 1019:case 983:return F+ue+K+ue+k+ue+ue;case 883:return ue.charCodeAt(8)===$e?F+ue+ue:ue.indexOf("image-set(",11)>0?ue.replace($,"$1"+F+"$2")+ue:ue;case 932:if(ue.charCodeAt(4)===$e)switch(ue.charCodeAt(5)){case 103:return F+"box-"+ue.replace("-grow","")+F+ue+k+ue.replace("grow","positive")+ue;case 115:return F+ue+k+ue.replace("shrink","negative")+ue;case 98:return F+ue+k+ue.replace("basis","preferred-size")+ue}return F+ue+k+ue+ue;case 964:return F+ue+k+"flex-"+ue+ue;case 1023:if(ue.charCodeAt(8)!==99)break;return Ye=ue.substring(ue.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),F+"box-pack"+Ye+F+ue+k+"flex-pack"+Ye+ue;case 1005:return s.test(ue)?ue.replace(a,":"+F)+ue.replace(a,":"+K)+ue:ue;case 1e3:switch(wr=(Ye=ue.substring(13).trim()).indexOf("-")+1,Ye.charCodeAt(0)+Ye.charCodeAt(wr)){case 226:Ye=ue.replace(M,"tb");break;case 232:Ye=ue.replace(M,"tb-rl");break;case 220:Ye=ue.replace(M,"lr");break;default:return ue}return F+ue+k+Ye+ue;case 1017:if(ue.indexOf("sticky",9)===-1)return ue;case 975:switch(wr=(ue=kt).length-10,ar=(Ye=(ue.charCodeAt(wr)===33?ue.substring(0,wr):ue).substring(kt.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|Ye.charCodeAt(7))){case 203:if(Ye.charCodeAt(8)<111)break;case 115:ue=ue.replace(Ye,F+Ye)+";"+ue;break;case 207:case 102:ue=ue.replace(Ye,F+(ar>102?"inline-":"")+"box")+";"+ue.replace(Ye,F+Ye)+";"+ue.replace(Ye,k+Ye+"box")+";"+ue}return ue+";";case 938:if(ue.charCodeAt(5)===$e)switch(ue.charCodeAt(6)){case 105:return Ye=ue.replace("-items",""),F+ue+F+"box-"+Ye+k+"flex-"+Ye+ue;case 115:return F+ue+k+"flex-item-"+ue.replace(G,"")+ue;default:return F+ue+k+"flex-line-pack"+ue.replace("align-content","").replace(G,"")+ue}break;case 973:case 989:if(ue.charCodeAt(3)!==$e||ue.charCodeAt(4)===122)break;case 931:case 953:if(Z.test(kt)===!0)return(Ye=kt.substring(kt.indexOf(":")+1)).charCodeAt(0)===115?of(kt.replace("stretch","fill-available"),ht,lt,$t).replace(":fill-available",":stretch"):ue.replace(Ye,F+Ye)+ue.replace(Ye,K+Ye.replace("fill-",""))+ue;break;case 962:if(ue=F+ue+(ue.charCodeAt(5)===102?k+ue:"")+ue,lt+$t===211&&ue.charCodeAt(13)===105&&ue.indexOf("transform",10)>0)return ue.substring(0,ue.indexOf(";",27)+1).replace(l,"$1"+F+"$2")+ue}return ue}function af(kt,ht){var lt=kt.indexOf(ht===1?":":"{"),$t=kt.substring(0,ht!==3?lt:10),Ye=kt.substring(lt+1,kt.length-1);return tf(ht!==2?$t:$t.replace(Y,"$1"),Ye,ht)}function Q0(kt,ht){var lt=of(ht,ht.charCodeAt(0),ht.charCodeAt(1),ht.charCodeAt(2));return lt!==ht+";"?lt.replace(V," or ($1)").substring(4):"("+ht+")"}function Bc(kt,ht,lt,$t,Ye,wr,ue,ar,rr,En){for(var Qt,Bn=0,qr=ht;Bn<za;++Bn)switch(Qt=og[Bn].call($c,kt,qr,lt,$t,Ye,wr,ue,ar,rr,En)){case void 0:case!1:case!0:case null:break;default:qr=Qt}if(qr!==ht)return qr}function Z0(kt,ht,lt,$t){for(var Ye=ht+1;Ye<lt;++Ye)switch($t.charCodeAt(Ye)){case rt:if(kt===ot&&$t.charCodeAt(Ye-1)===ot&&ht+2!==Ye)return Ye+1;break;case U:if(kt===rt)return Ye+1}return Ye}function sf(kt){for(var ht in kt){var lt=kt[ht];switch(ht){case"keyframe":Vc=0|lt;break;case"global":ig=0|lt;break;case"cascade":vi=0|lt;break;case"compress":K0=0|lt;break;case"semicolon":Xl=0|lt;break;case"preserve":md=0|lt;break;case"prefix":tf=null,lt?typeof lt!="function"?Rn=1:(Rn=2,tf=lt):Rn=0}}return sf}function $c(kt,ht){if(this!==void 0&&this.constructor===$c)return r(kt);var lt=kt,$t=lt.charCodeAt(0);$t<33&&($t=(lt=lt.trim()).charCodeAt(0)),Vc>0&&(rf=lt.replace(g,$t===C?"":"-")),$t=1,vi===1?gd=lt:Ns=lt;var Ye,wr=[gd];za>0&&(Ye=Bc(q0,ht,wr,wr,Oi,xn,0,0,0,0))!==void 0&&typeof Ye=="string"&&(ht=Ye);var ue=nf(ef,wr,ht,0,0);return za>0&&(Ye=Bc(SC,ue,wr,wr,Oi,xn,ue.length,0,0,0))!==void 0&&typeof(ue=Ye)!="string"&&($t=0),rf="",gd="",Ns="",bn=0,Oi=1,xn=1,K0*$t==0?ue:ue.replace(o,"").replace(_,"").replace(S,"$1").replace(I,"$1").replace(A," ")}return $c.use=function kt(ht){switch(ht){case void 0:case null:za=og.length=0;break;default:if(typeof ht=="function")og[za++]=ht;else if(typeof ht=="object")for(var lt=0,$t=ht.length;lt<$t;++lt)kt(ht[lt]);else ag=0|!!ht}return kt},$c.set=sf,n!==void 0&&sf(n),$c})})(aJ);var Xwe=aJ.exports;const sJ=oa(Xwe);var lJ={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function(r){var n="/*|*/",i=n+"}";function o(a){if(a)try{r(a+"}")}catch{}}return function(s,l,c,u,h,f,p,m,g,y){switch(s){case 1:if(g===0&&l.charCodeAt(0)===64)return r(l+";"),"";break;case 2:if(m===0)return l+n;break;case 3:switch(m){case 102:case 112:return r(c[0]+l),"";default:return l+(y===0?n:"")}case-2:l.split(i).forEach(o)}}}})})(lJ);var Jwe=lJ.exports;const Qwe=oa(Jwe);var Zwe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},j5=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function eSe(e,t){return!!(e===t||j5(e)&&j5(t))}function tSe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!eSe(e[r],t[r]))return!1;return!0}function cJ(e,t){t===void 0&&(t=tSe);var r,n=[],i,o=!1;function a(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return o&&r===this&&t(s,n)||(i=e.apply(this,s),o=!0,r=this,n=s),i}return a}function rSe(e){var t={};return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var nSe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,iSe=rSe(function(e){return nSe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function XD(e){return Object.prototype.toString.call(e).slice(8,-1)}function Yg(e){return XD(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function U5(e){return XD(e)==="Array"}function F5(e){return XD(e)==="Symbol"}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function V5(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function B5(e,t,r,n){var i=n.propertyIsEnumerable(t)?"enumerable":"nonenumerable";i==="enumerable"&&(e[t]=r),i==="nonenumerable"&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}function uJ(e,t,r){if(!Yg(t))return r&&U5(r)&&r.forEach(function(c){t=c(e,t)}),t;var n={};if(Yg(e)){var i=Object.getOwnPropertyNames(e),o=Object.getOwnPropertySymbols(e);n=V5(i,o).reduce(function(c,u){var h=e[u];return(!F5(u)&&!Object.getOwnPropertyNames(t).includes(u)||F5(u)&&!Object.getOwnPropertySymbols(t).includes(u))&&B5(c,u,h,e),c},{})}var a=Object.getOwnPropertyNames(t),s=Object.getOwnPropertySymbols(t),l=V5(a,s).reduce(function(c,u){var h=t[u],f=Yg(e)?e[u]:void 0;return r&&U5(r)&&r.forEach(function(p){h=p(f,h)}),f!==void 0&&Yg(h)&&(h=uJ(f,h,r)),B5(c,u,h,t),c},n);return l}function oSe(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=null,i=e;return Yg(e)&&e.extensions&&Object.keys(e).length===1&&(i={},n=e.extensions),t.reduce(function(o,a){return uJ(o,a,n)},i)}var Mw={},$5=function(e,t){for(var r=[e[0]],n=0,i=t.length;n<i;n+=1)r.push(t[n],e[n+1]);return r},dJ=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zl=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},aSe=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w0=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},sSe=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},rm=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},JD=function(e){return(typeof e>"u"?"undefined":dJ(e))==="object"&&e.constructor===Object},jw=Object.freeze([]),Cy=Object.freeze({});function Pc(e){return typeof e=="function"}function QD(e){return e.displayName||e.name||"Component"}function lSe(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)}function S0(e){return e&&typeof e.styledComponentId=="string"}var Sv=typeof process<"u"&&(Mw.REACT_APP_SC_ATTR||Mw.SC_ATTR)||"data-styled",OT="data-styled-version",cSe="data-styled-streamed",Rh=typeof window<"u"&&"HTMLElement"in window,hJ=typeof SC_DISABLE_SPEEDY=="boolean"&&SC_DISABLE_SPEEDY||typeof process<"u"&&(Mw.REACT_APP_SC_DISABLE_SPEEDY||Mw.SC_DISABLE_SPEEDY)||!1,uSe={},jl=function(e){w0(t,e);function t(r){zl(this,t);for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a,a=rm(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+r+" for more information."+(i.length>0?" Additional arguments: "+i.join(", "):"")));return rm(a)}return t}(Error),dSe=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,hSe=function(e){var t=""+(e||""),r=[];return t.replace(dSe,function(n,i,o){return r.push({componentId:i,matchIndex:o}),n}),r.map(function(n,i){var o=n.componentId,a=n.matchIndex,s=r[i+1],l=s?t.slice(a,s.matchIndex):t.slice(a);return{componentId:o,cssFromDOM:l}})},fSe=/^\s*\/\/.*$/gm,fJ=new sJ({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),pJ=new sJ({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),aO=[],mJ=function(t){if(t===-2){var r=aO;return aO=[],r}},gJ=Qwe(function(e){aO.push(e)}),yJ=void 0,Tp=void 0,vJ=void 0,pSe=function(t,r,n){return r>0&&n.slice(0,r).indexOf(Tp)!==-1&&n.slice(r-Tp.length,r)!==Tp?"."+yJ:t},mSe=function(t,r,n){t===2&&n.length&&n[0].lastIndexOf(Tp)>0&&(n[0]=n[0].replace(vJ,pSe))};pJ.use([mSe,gJ,mJ]);fJ.use([gJ,mJ]);var gSe=function(t){return fJ("",t)};function ZD(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"&",i=e.join("").replace(fSe,""),o=t&&r?r+" "+t+" { "+i+" }":i;return yJ=n,Tp=t,vJ=new RegExp("\\"+Tp+"\\b","g"),pJ(r||!t?"":t,o)}var e2=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},t2=function(t,r,n){if(n){var i=t[r]||(t[r]=Object.create(null));i[n]=!0}},Uw=function(t,r){t[r]=Object.create(null)},r2=function(t){return function(r,n){return t[r]!==void 0&&t[r][n]}},bJ=function(t){var r="";for(var n in t)r+=Object.keys(t[n]).join(" ")+" ";return r.trim()},ySe=function(t){var r=Object.create(null);for(var n in t)r[n]=ra({},t[n]);return r},Mx=function(t){if(t.sheet)return t.sheet;for(var r=t.ownerDocument.styleSheets.length,n=0;n<r;n+=1){var i=t.ownerDocument.styleSheets[n];if(i.ownerNode===t)return i}throw new jl(10)},vSe=function(t,r,n){if(!r)return!1;var i=t.cssRules.length;try{t.insertRule(r,n<=i?n:i)}catch{return!1}return!0},bSe=function(t,r,n){for(var i=r-n,o=r;o>i;o-=1)t.deleteRule(o)},n2=function(t){return`
/* sc-component-id: `+t+` */
`},jx=function(t,r){for(var n=0,i=0;i<=r;i+=1)n+=t[i];return n},ESe=function(t,r,n){var i=document;t?i=t.ownerDocument:r&&(i=r.ownerDocument);var o=i.createElement("style");o.setAttribute(Sv,""),o.setAttribute(OT,"4.4.1");var a=e2();if(a&&o.setAttribute("nonce",a),o.appendChild(i.createTextNode("")),t&&!r)t.appendChild(o);else{if(!r||!t||!r.parentNode)throw new jl(6);r.parentNode.insertBefore(o,n?r:r.nextSibling)}return o},i2=function(t,r){return function(n){var i=e2(),o=[i&&'nonce="'+i+'"',Sv+'="'+bJ(r)+'"',OT+'="4.4.1"',n],a=o.filter(Boolean).join(" ");return"<style "+a+">"+t()+"</style>"}},o2=function(t,r){return function(){var n,i=(n={},n[Sv]=bJ(r),n[OT]="4.4.1",n),o=e2();return o&&(i.nonce=o),kr.createElement("style",ra({},i,{dangerouslySetInnerHTML:{__html:t()}}))}},a2=function(t){return function(){return Object.keys(t)}},_Se=function(t,r){var n=Object.create(null),i=Object.create(null),o=[],a=r!==void 0,s=!1,l=function(p){var m=i[p];return m!==void 0?m:(i[p]=o.length,o.push(0),Uw(n,p),i[p])},c=function(p,m,g){for(var y=l(p),v=Mx(t),b=jx(o,y),_=0,S=[],I=m.length,A=0;A<I;A+=1){var D=m[A],M=a;M&&D.indexOf("@import")!==-1?S.push(D):vSe(v,D,b+_)&&(M=!1,_+=1)}a&&S.length>0&&(s=!0,r().insertRules(p+"-import",S)),o[y]+=_,t2(n,p,g)},u=function(p){var m=i[p];if(m!==void 0&&t.isConnected!==!1){var g=o[m],y=Mx(t),v=jx(o,m)-1;bSe(y,v,g),o[m]=0,Uw(n,p),a&&s&&r().removeRules(p+"-import")}},h=function(){var p=Mx(t),m=p.cssRules,g="";for(var y in i){g+=n2(y);for(var v=i[y],b=jx(o,v),_=o[v],S=b-_;S<b;S+=1){var I=m[S];I!==void 0&&(g+=I.cssText)}}return g};return{clone:function(){throw new jl(5)},css:h,getIds:a2(i),hasNameForId:r2(n),insertMarker:l,insertRules:c,removeRules:u,sealed:!1,styleTag:t,toElement:o2(h,n),toHTML:i2(h,n)}},H5=function(t,r){return t.createTextNode(n2(r))},wSe=function(t,r){var n=Object.create(null),i=Object.create(null),o=r!==void 0,a=!1,s=function(f){var p=i[f];return p!==void 0?p:(i[f]=H5(t.ownerDocument,f),t.appendChild(i[f]),n[f]=Object.create(null),i[f])},l=function(f,p,m){for(var g=s(f),y=[],v=p.length,b=0;b<v;b+=1){var _=p[b],S=o;if(S&&_.indexOf("@import")!==-1)y.push(_);else{S=!1;var I=b===v-1?"":" ";g.appendData(""+_+I)}}t2(n,f,m),o&&y.length>0&&(a=!0,r().insertRules(f+"-import",y))},c=function(f){var p=i[f];if(p!==void 0){var m=H5(t.ownerDocument,f);t.replaceChild(m,p),i[f]=m,Uw(n,f),o&&a&&r().removeRules(f+"-import")}},u=function(){var f="";for(var p in i)f+=i[p].data;return f};return{clone:function(){throw new jl(5)},css:u,getIds:a2(i),hasNameForId:r2(n),insertMarker:s,insertRules:l,removeRules:c,sealed:!1,styleTag:t,toElement:o2(u,n),toHTML:i2(u,n)}},SSe=function e(t,r){var n=t===void 0?Object.create(null):t,i=r===void 0?Object.create(null):r,o=function(f){var p=i[f];return p!==void 0?p:i[f]=[""]},a=function(f,p,m){var g=o(f);g[0]+=p.join(" "),t2(n,f,m)},s=function(f){var p=i[f];p!==void 0&&(p[0]="",Uw(n,f))},l=function(){var f="";for(var p in i){var m=i[p][0];m&&(f+=n2(p)+m)}return f},c=function(){var f=ySe(n),p=Object.create(null);for(var m in i)p[m]=[i[m][0]];return e(f,p)},u={clone:c,css:l,getIds:a2(i),hasNameForId:r2(n),insertMarker:o,insertRules:a,removeRules:s,sealed:!1,styleTag:null,toElement:o2(l,n),toHTML:i2(l,n)};return u},z5=function(t,r,n,i,o){if(Rh&&!n){var a=ESe(t,r,i);return hJ?wSe(a,o):_Se(a,o)}return SSe()},TSe=function(t,r,n){for(var i=0,o=n.length;i<o;i+=1){var a=n[i],s=a.componentId,l=a.cssFromDOM,c=gSe(l);t.insertRules(s,c)}for(var u=0,h=r.length;u<h;u+=1){var f=r[u];f.parentNode&&f.parentNode.removeChild(f)}},CSe=/\s+/,Fw=void 0;Rh?Fw=hJ?40:1e3:Fw=-1;var G5=0,Ux=void 0,Dc=function(){function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rh?document.head:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;zl(this,e),this.getImportRuleTag=function(){var i=t.importRuleTag;if(i!==void 0)return i;var o=t.tags[0],a=!0;return t.importRuleTag=z5(t.target,o?o.styleTag:null,t.forceServer,a)},G5+=1,this.id=G5,this.forceServer=n,this.target=n?null:r,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!Rh||this.forceServer)return this;var r=[],n=[],i=!1,o=document.querySelectorAll("style["+Sv+"]["+OT+'="4.4.1"]'),a=o.length;if(!a)return this;for(var s=0;s<a;s+=1){var l=o[s];i||(i=!!l.getAttribute(cSe));for(var c=(l.getAttribute(Sv)||"").trim().split(CSe),u=c.length,h=0,f;h<u;h+=1)f=c[h],this.rehydratedNames[f]=!0;n.push.apply(n,hSe(l.textContent)),r.push(l)}var p=n.length;if(!p)return this;var m=this.makeTag(null);TSe(m,r,n),this.capacity=Math.max(1,Fw-p),this.tags.push(m);for(var g=0;g<p;g+=1)this.tagMap[n[g].componentId]=m;return this},e.reset=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Ux=new e(void 0,r).rehydrate()},e.prototype.clone=function(){var r=new e(this.target,this.forceServer);return this.clones.push(r),r.tags=this.tags.map(function(n){for(var i=n.getIds(),o=n.clone(),a=0;a<i.length;a+=1)r.tagMap[i[a]]=o;return o}),r.rehydratedNames=ra({},this.rehydratedNames),r.deferred=ra({},this.deferred),r},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach(function(r){r.sealed=!0})},e.prototype.makeTag=function(r){var n=r?r.styleTag:null,i=!1;return z5(this.target,n,this.forceServer,i,this.getImportRuleTag)},e.prototype.getTagForId=function(r){var n=this.tagMap[r];if(n!==void 0&&!n.sealed)return n;var i=this.tags[this.tags.length-1];return this.capacity-=1,this.capacity===0&&(this.capacity=Fw,i=this.makeTag(i),this.tags.push(i)),this.tagMap[r]=i},e.prototype.hasId=function(r){return this.tagMap[r]!==void 0},e.prototype.hasNameForId=function(r,n){if(this.ignoreRehydratedNames[r]===void 0&&this.rehydratedNames[n])return!0;var i=this.tagMap[r];return i!==void 0&&i.hasNameForId(r,n)},e.prototype.deferredInject=function(r,n){if(this.tagMap[r]===void 0){for(var i=this.clones,o=0;o<i.length;o+=1)i[o].deferredInject(r,n);this.getTagForId(r).insertMarker(r),this.deferred[r]=n}},e.prototype.inject=function(r,n,i){for(var o=this.clones,a=0;a<o.length;a+=1)o[a].inject(r,n,i);var s=this.getTagForId(r);if(this.deferred[r]!==void 0){var l=this.deferred[r].concat(n);s.insertRules(r,l,i),this.deferred[r]=void 0}else s.insertRules(r,n,i)},e.prototype.remove=function(r){var n=this.tagMap[r];if(n!==void 0){for(var i=this.clones,o=0;o<i.length;o+=1)i[o].remove(r);n.removeRules(r),this.ignoreRehydratedNames[r]=!0,this.deferred[r]=void 0}},e.prototype.toHTML=function(){return this.tags.map(function(r){return r.toHTML()}).join("")},e.prototype.toReactElements=function(){var r=this.id;return this.tags.map(function(n,i){var o="sc-"+r+"-"+i;return T.cloneElement(n.toElement(),{key:o})})},aSe(e,null,[{key:"master",get:function(){return Ux||(Ux=new e().rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),EJ=function(){function e(t,r){var n=this;zl(this,e),this.inject=function(i){i.hasNameForId(n.id,n.name)||i.inject(n.id,n.rules,n.name)},this.toString=function(){throw new jl(12,String(n.name))},this.name=t,this.rules=r,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),xSe=/([A-Z])/g,RSe=/^ms-/;function W5(e){return e.replace(xSe,"-$1").toLowerCase().replace(RSe,"-ms-")}function ISe(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!(e in Zwe)?t+"px":String(t).trim()}var _J=function(t){return t==null||t===!1||t===""},NSe=function e(t,r){var n=[],i=Object.keys(t);return i.forEach(function(o){if(!_J(t[o])){if(JD(t[o]))return n.push.apply(n,e(t[o],o)),n;if(Pc(t[o]))return n.push(W5(o)+":",t[o],";"),n;n.push(W5(o)+": "+ISe(o,t[o])+";")}return n}),r?[r+" {"].concat(n,["}"]):n};function nm(e,t,r){if(Array.isArray(e)){for(var n=[],i=0,o=e.length,a;i<o;i+=1)a=nm(e[i],t,r),a!==null&&(Array.isArray(a)?n.push.apply(n,a):n.push(a));return n}if(_J(e))return null;if(S0(e))return"."+e.styledComponentId;if(Pc(e))if(lSe(e)&&t){var s=e(t);return nm(s,t,r)}else return e;return e instanceof EJ?r?(e.inject(r),e.getName()):e:JD(e)?NSe(e):e.toString()}function kT(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Pc(e)||JD(e)?nm($5(jw,[e].concat(r))):nm($5(e,r))}function sO(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Cy;if(!WP.isValidElementType(t))throw new jl(1,String(t));var n=function(){return e(t,r,kT.apply(void 0,arguments))};return n.withConfig=function(i){return sO(e,t,ra({},r,i))},n.attrs=function(i){return sO(e,t,ra({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},n}function s2(e){for(var t=e.length|0,r=t|0,n=0,i;t>=4;)i=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>24,i=1540483477*(i&65535)+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16)^i,t-=4,++n;switch(t){case 3:r^=(e.charCodeAt(n+2)&255)<<16;case 2:r^=(e.charCodeAt(n+1)&255)<<8;case 1:r^=e.charCodeAt(n)&255,r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16)}return r^=r>>>13,r=1540483477*(r&65535)+((1540483477*(r>>>16)&65535)<<16),(r^r>>>15)>>>0}var kb=52,K5=function(t){return String.fromCharCode(t+(t>25?39:97))};function wJ(e){var t="",r=void 0;for(r=e;r>kb;r=Math.floor(r/kb))t=K5(r%kb)+t;return K5(r%kb)+t}function ASe(e){for(var t in e)if(Pc(e[t]))return!0;return!1}function l2(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(Array.isArray(n)&&!l2(n,t))return!1;if(Pc(n)&&!S0(n))return!1}return!t.some(function(i){return Pc(i)||ASe(i)})}var q5=function(t){return wJ(s2(t))},Y5=function(){function e(t,r,n){zl(this,e),this.rules=t,this.isStatic=l2(t,r),this.componentId=n,Dc.master.hasId(n)||Dc.master.deferredInject(n,[])}return e.prototype.generateAndInjectStyles=function(r,n){var i=this.isStatic,o=this.componentId,a=this.lastClassName;if(Rh&&i&&typeof a=="string"&&n.hasNameForId(o,a))return a;var s=nm(this.rules,r,n),l=q5(this.componentId+s.join(""));return n.hasNameForId(o,l)||n.inject(this.componentId,ZD(s,"."+l,void 0,o),l),this.lastClassName=l,l},e.generateName=function(r){return q5(r)},e}(),c2=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Cy,n=r?e.theme===r.theme:!1,i=e.theme&&!n?e.theme:t||r.theme;return i},OSe=/[[\].#*$><+~=|^:(),"'`-]+/g,kSe=/(^-|-$)/g;function lO(e){return e.replace(OSe,"-").replace(kSe,"")}function Vw(e){return typeof e=="string"&&!0}function PSe(e){return Vw(e)?"styled."+e:"Styled("+QD(e)+")"}var Fx,X5={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},DSe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},J5=(Fx={},Fx[WP.ForwardRef]={$$typeof:!0,render:!0},Fx),LSe=Object.defineProperty,MSe=Object.getOwnPropertyNames,Q5=Object.getOwnPropertySymbols,jSe=Q5===void 0?function(){return[]}:Q5,USe=Object.getOwnPropertyDescriptor,FSe=Object.getPrototypeOf,VSe=Object.prototype,BSe=Array.prototype;function u2(e,t,r){if(typeof t!="string"){var n=FSe(t);n&&n!==VSe&&u2(e,n,r);for(var i=BSe.concat(MSe(t),jSe(t)),o=J5[e.$$typeof]||X5,a=J5[t.$$typeof]||X5,s=i.length,l=void 0,c=void 0;s--;)if(c=i[s],!DSe[c]&&!(r&&r[c])&&!(a&&a[c])&&!(o&&o[c])&&(l=USe(t,c),l))try{LSe(e,c,l)}catch{}return e}return e}function $Se(e){return!!(e&&e.prototype&&e.prototype.isReactComponent)}var Bw=T.createContext(),PT=Bw.Consumer,HSe=function(e){w0(t,e);function t(r){zl(this,t);var n=rm(this,e.call(this,r));return n.getContext=cJ(n.getContext.bind(n)),n.renderInner=n.renderInner.bind(n),n}return t.prototype.render=function(){return this.props.children?kr.createElement(Bw.Consumer,null,this.renderInner):null},t.prototype.renderInner=function(n){var i=this.getContext(this.props.theme,n);return kr.createElement(Bw.Provider,{value:i},this.props.children)},t.prototype.getTheme=function(n,i){if(Pc(n)){var o=n(i);return o}if(n===null||Array.isArray(n)||(typeof n>"u"?"undefined":dJ(n))!=="object")throw new jl(8);return ra({},i,n)},t.prototype.getContext=function(n,i){return this.getTheme(n,i)},t}(T.Component),zSe=function(){function e(){zl(this,e),this.masterSheet=Dc.master,this.instance=this.masterSheet.clone(),this.sealed=!1}return e.prototype.seal=function(){if(!this.sealed){var r=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(r,1),this.sealed=!0}},e.prototype.collectStyles=function(r){if(this.sealed)throw new jl(2);return kr.createElement(SJ,{sheet:this.instance},r)},e.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(r){throw new jl(3)},e}(),d2=T.createContext(),h2=d2.Consumer,SJ=function(e){w0(t,e);function t(r){zl(this,t);var n=rm(this,e.call(this,r));return n.getContext=cJ(n.getContext),n}return t.prototype.getContext=function(n,i){if(n)return n;if(i)return new Dc(i);throw new jl(4)},t.prototype.render=function(){var n=this.props,i=n.children,o=n.sheet,a=n.target;return kr.createElement(d2.Provider,{value:this.getContext(o,a)},i)},t}(T.Component),Z5={};function GSe(e,t,r){var n=typeof t!="string"?"sc":lO(t),i=(Z5[n]||0)+1;Z5[n]=i;var o=n+"-"+e.generateName(n+i);return r?r+"-"+o:o}var WSe=function(e){w0(t,e);function t(){zl(this,t);var r=rm(this,e.call(this));return r.attrs={},r.renderOuter=r.renderOuter.bind(r),r.renderInner=r.renderInner.bind(r),r}return t.prototype.render=function(){return kr.createElement(h2,null,this.renderOuter)},t.prototype.renderOuter=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dc.master;return this.styleSheet=n,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():kr.createElement(PT,null,this.renderInner)},t.prototype.renderInner=function(n){var i=this.props.forwardedComponent,o=i.componentStyle,a=i.defaultProps;i.displayName;var s=i.foldedComponentIds,l=i.styledComponentId,c=i.target,u=void 0;o.isStatic?u=this.generateAndInjectStyles(Cy,this.props):u=this.generateAndInjectStyles(c2(this.props,n,a)||Cy,this.props);var h=this.props.as||this.attrs.as||c,f=Vw(h),p={},m=ra({},this.props,this.attrs),g=void 0;for(g in m)g==="forwardedComponent"||g==="as"||(g==="forwardedRef"?p.ref=m[g]:g==="forwardedAs"?p.as=m[g]:(!f||iSe(g))&&(p[g]=m[g]));return this.props.style&&this.attrs.style&&(p.style=ra({},this.attrs.style,this.props.style)),p.className=Array.prototype.concat(s,l,u!==l?u:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),T.createElement(h,p)},t.prototype.buildExecutionContext=function(n,i,o){var a=this,s=ra({},i,{theme:n});return o.length&&(this.attrs={},o.forEach(function(l){var c=l,u=!1,h=void 0,f=void 0;Pc(c)&&(c=c(s),u=!0);for(f in c)h=c[f],u||Pc(h)&&!$Se(h)&&!S0(h)&&(h=h(s)),a.attrs[f]=h,s[f]=h})),s},t.prototype.generateAndInjectStyles=function(n,i){var o=i.forwardedComponent,a=o.attrs,s=o.componentStyle;if(o.warnTooManyClasses,s.isStatic&&!a.length)return s.generateAndInjectStyles(Cy,this.styleSheet);var l=s.generateAndInjectStyles(this.buildExecutionContext(n,i,a),this.styleSheet);return l},t}(T.Component);function TJ(e,t,r){var n=S0(e),i=!Vw(e),o=t.displayName,a=o===void 0?PSe(e):o,s=t.componentId,l=s===void 0?GSe(Y5,t.displayName,t.parentComponentId):s,c=t.ParentComponent,u=c===void 0?WSe:c,h=t.attrs,f=h===void 0?jw:h,p=t.displayName&&t.componentId?lO(t.displayName)+"-"+t.componentId:t.componentId||l,m=n&&e.attrs?Array.prototype.concat(e.attrs,f).filter(Boolean):f,g=new Y5(n?e.componentStyle.rules.concat(r):r,m,p),y=void 0,v=function(_,S){return kr.createElement(u,ra({},_,{forwardedComponent:y,forwardedRef:S}))};return v.displayName=a,y=kr.forwardRef(v),y.displayName=a,y.attrs=m,y.componentStyle=g,y.foldedComponentIds=n?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):jw,y.styledComponentId=p,y.target=n?e.target:e,y.withComponent=function(_){var S=t.componentId,I=sSe(t,["componentId"]),A=S&&S+"-"+(Vw(_)?_:lO(QD(_))),D=ra({},I,{attrs:m,componentId:A,ParentComponent:u});return TJ(_,D,r)},Object.defineProperty(y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(_){this._foldedDefaultProps=n?oSe(e.defaultProps,_):_}}),y.toString=function(){return"."+y.styledComponentId},i&&u2(y,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),y}var KSe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],cO=function(t){return sO(TJ,t)};KSe.forEach(function(e){cO[e]=cO(e)});var qSe=function(){function e(t,r){zl(this,e),this.rules=t,this.componentId=r,this.isStatic=l2(t,jw),Dc.master.hasId(r)||Dc.master.deferredInject(r,[])}return e.prototype.createStyles=function(r,n){var i=nm(this.rules,r,n),o=ZD(i,"");n.inject(this.componentId,o)},e.prototype.removeStyles=function(r){var n=this.componentId;r.hasId(n)&&r.remove(n)},e.prototype.renderStyles=function(r,n){this.removeStyles(n),this.createStyles(r,n)},e}();Rh&&(window.scCGSHMRCache={});function YSe(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=kT.apply(void 0,[e].concat(r)),o="sc-global-"+s2(JSON.stringify(i)),a=new qSe(i,o),s=function(l){w0(c,l);function c(u){zl(this,c);var h=rm(this,l.call(this,u)),f=h.constructor,p=f.globalStyle,m=f.styledComponentId;return Rh&&(window.scCGSHMRCache[m]=(window.scCGSHMRCache[m]||0)+1),h.state={globalStyle:p,styledComponentId:m},h}return c.prototype.componentWillUnmount=function(){window.scCGSHMRCache[this.state.styledComponentId]&&(window.scCGSHMRCache[this.state.styledComponentId]-=1),window.scCGSHMRCache[this.state.styledComponentId]===0&&this.state.globalStyle.removeStyles(this.styleSheet)},c.prototype.render=function(){var h=this;return kr.createElement(h2,null,function(f){h.styleSheet=f||Dc.master;var p=h.state.globalStyle;return p.isStatic?(p.renderStyles(uSe,h.styleSheet),null):kr.createElement(PT,null,function(m){var g=h.constructor.defaultProps,y=ra({},h.props);return typeof m<"u"&&(y.theme=c2(h.props,m,g)),p.renderStyles(y,h.styleSheet),null})})},c}(kr.Component);return s.globalStyle=a,s.styledComponentId=o,s}var XSe=function(t){return t.replace(/\s|\\n/g,"")};function JSe(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=kT.apply(void 0,[e].concat(r)),o=wJ(s2(XSe(JSON.stringify(i))));return new EJ(o,ZD(i,o,"@keyframes"))}var QSe=function(e){var t=kr.forwardRef(function(r,n){return kr.createElement(PT,null,function(i){var o=e.defaultProps,a=c2(r,i,o);return kr.createElement(e,ra({},r,{theme:a,ref:n}))})});return u2(t,e),t.displayName="WithTheme("+QD(e)+")",t},ZSe={StyleSheet:Dc};const eTe=Object.freeze(Object.defineProperty({__proto__:null,ServerStyleSheet:zSe,StyleSheetConsumer:h2,StyleSheetContext:d2,StyleSheetManager:SJ,ThemeConsumer:PT,ThemeContext:Bw,ThemeProvider:HSe,__DO_NOT_USE_OR_YOU_WILL_BE_HAUNTED_BY_SPOOKY_GHOSTS:ZSe,createGlobalStyle:YSe,css:kT,default:cO,isStyledComponent:S0,keyframes:JSe,withTheme:QSe},Symbol.toStringTag,{value:"Module"})),tTe=W7(eTe);(function(e,t){(function(r,n){e.exports=n(Ywe(),tTe)})(typeof self<"u"?self:Wu,function(r,n){return function(i){var o={};function a(s){if(o[s])return o[s].exports;var l=o[s]={i:s,l:!1,exports:{}};return i[s].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=i,a.c=o,a.d=function(s,l,c){a.o(s,l)||Object.defineProperty(s,l,{enumerable:!0,get:c})},a.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},a.t=function(s,l){if(1&l&&(s=a(s)),8&l||4&l&&typeof s=="object"&&s&&s.__esModule)return s;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:s}),2&l&&typeof s!="string")for(var u in s)a.d(c,u,(function(h){return s[h]}).bind(null,u));return c},a.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(l,"a",l),l},a.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},a.p="dist/",a(a.s=9)}([function(i,o,a){i.exports=a(5)()},function(i,o){i.exports=r},function(i,o){i.exports=n},function(i,o){var a=function(s,l){return{parse:function(p,m){var g=JSON.parse(p,f).map(h),y=g[0],v=m||c,b=typeof y=="object"&&y?function _(S,I,A,D){return Object.keys(A).reduce(function(M,H){var V=M[H];if(V instanceof s){var G=S[V];typeof G!="object"||I.has(G)?M[H]=D.call(M,H,G):(I.add(G),M[H]=D.call(M,H,_(S,I,G,D)))}else M[H]=D.call(M,H,V);return M},A)}(g,new Set,y,v):y;return v.call({"":b},"",b)},stringify:function(p,m,g){for(var y,v=new Map,b=[],_=[],S=m&&typeof m==typeof b?function(D,M){if(D===""||-1<m.indexOf(D))return M}:m||c,I=+u(v,b,S.call({"":p},"",p)),A=function(D,M){if(y)return y=!y,M;var H=S.call(this,D,M);switch(typeof H){case"object":if(H===null)return H;case l:return v.get(H)||u(v,b,H)}return H};I<b.length;I++)y=!0,_[I]=JSON.stringify(b[I],A,g);return"["+_.join(",")+"]"}};function c(p,m){return m}function u(p,m,g){var y=s(m.push(g)-1);return p.set(g,y),y}function h(p){return p instanceof s?s(p):p}function f(p,m){return typeof m===l?new s(m):m}}(String,"string");i.exports=a},function(i,o,a){i.exports=function(s,l){var c=["abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ","0123456789","~!@#$%^&()_+-={}[];',"],u="";(l=l||"aA0").split("").forEach(function(f){isNaN(parseInt(f))?/[a-z]/.test(f)?u+=c[0]:/[A-Z]/.test(f)?u+=c[1]:u+=c[3]:u+=c[2]}),s=s||30;for(var h="";s--;)h+=u.charAt(Math.floor(Math.random()*u.length));return h}},function(i,o,a){var s=a(6),l=a(7),c=a(8);i.exports=function(){function u(p,m,g,y,v,b){b!==c&&l(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function h(){return u}u.isRequired=u;var f={array:u,bool:u,func:u,number:u,object:u,string:u,symbol:u,any:u,arrayOf:h,element:u,instanceOf:h,node:u,objectOf:h,oneOf:h,oneOfType:h,shape:h,exact:h};return f.checkPropTypes=s,f.PropTypes=f,f}},function(i,o,a){function s(c){return function(){return c}}var l=function(){};l.thatReturns=s,l.thatReturnsFalse=s(!1),l.thatReturnsTrue=s(!0),l.thatReturnsNull=s(null),l.thatReturnsThis=function(){return this},l.thatReturnsArgument=function(c){return c},i.exports=l},function(i,o,a){i.exports=function(s,l,c,u,h,f,p,m){if(!s){var g;if(l===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var y=[c,u,h,f,p,m],v=0;(g=new Error(l.replace(/%s/g,function(){return y[v++]}))).name="Invariant Violation"}throw g.framesToPop=1,g}}},function(i,o,a){i.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(i,o,a){a.r(o);var s=a(1),l=a.n(s),c=a(0),u=a.n(c),h=a(4),f=a.n(h),p=a(2),m=a.n(p),g=function(j){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ee=function(Re){Re=Re.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(_e,ie,nt,Pt){return ie+ie+nt+nt+Pt+Pt});var Xe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Re);return Xe?{r:parseInt(Xe[1],16),g:parseInt(Xe[2],16),b:parseInt(Xe[3],16)}:null}(j);return"rgba(".concat(ee.r,", ").concat(ee.g,", ").concat(ee.b,", ").concat(z,")")};function y(){var j=S([`
  0% { box-shadow: 0 0 0 0 `,`; }
  70% { box-shadow: 0 0 0 10px `,`; }
  100% { box-shadow: 0 0 0 0 `,`; }
`]);return y=function(){return j},j}function v(){var j=S([`
  25% { transform: rotate(-1deg); }
  100% { transform: rotate(1deg); }
`]);return v=function(){return j},j}function b(){var j=S([`
  100% { transform: scale(1); }
`]);return b=function(){return j},j}function _(){var j=S([`
  0% { opacity: .2; }
  20% { opacity: 1; }
  100% { opacity: .2; }
`]);return _=function(){return j},j}function S(j,z){return z||(z=j.slice(0)),Object.freeze(Object.defineProperties(j,{raw:{value:Object.freeze(z)}}))}var I=Object(p.keyframes)(_()),A=Object(p.keyframes)(b()),D=Object(p.keyframes)(v());function M(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  animation: `,` 1.4s infinite both;
  animation-delay: `,`;
`]);return M=function(){return j},j}var H=m.a.span(M(),I,function(j){return j.delay}),V=function(){return l.a.createElement("span",{className:"rsc-loading"},l.a.createElement(H,{delay:"0s"},"."),l.a.createElement(H,{delay:".2s"},"."),l.a.createElement(H,{delay:".4s"},"."))};function G(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  background: #fff;
  border-radius: 5px;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
  display: flex;
  justify-content: center;
  margin: 0 6px 10px 6px;
  padding: 16px;
`]);return G=function(){return j},j}var Y=m.a.div(G());function Z(j){return(Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(j)}function $(j,z){for(var ee=0;ee<z.length;ee++){var Re=z[ee];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(j,Re.key,Re)}}function F(j){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(j)}function K(j,z){return(K=Object.setPrototypeOf||function(ee,Re){return ee.__proto__=Re,ee})(j,z)}function k(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function P(j,z,ee){return z in j?Object.defineProperty(j,z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):j[z]=ee,j}var B=function(j){function z(){var Xe,_e,ie,nt;(function(Ge,Qe){if(!(Ge instanceof Qe))throw new TypeError("Cannot call a class as a function")})(this,z);for(var Pt=arguments.length,Ce=new Array(Pt),Ue=0;Ue<Pt;Ue++)Ce[Ue]=arguments[Ue];return ie=this,nt=(Xe=F(z)).call.apply(Xe,[this].concat(Ce)),_e=!nt||Z(nt)!=="object"&&typeof nt!="function"?k(ie):nt,P(k(k(_e)),"state",{loading:!0}),P(k(k(_e)),"renderComponent",function(){var Ge=_e.props,Qe=Ge.step,mt=Ge.steps,Ot=Ge.previousStep,Tt=Ge.triggerNextStep,In=Qe.component;return l.a.cloneElement(In,{step:Qe,steps:mt,previousStep:Ot,triggerNextStep:Tt})}),_e}var ee,Re;return function(Xe,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");Xe.prototype=Object.create(_e&&_e.prototype,{constructor:{value:Xe,writable:!0,configurable:!0}}),_e&&K(Xe,_e)}(z,s.Component),ee=z,(Re=[{key:"componentDidMount",value:function(){var Xe=this,_e=this.props,ie=_e.speak,nt=_e.step,Pt=_e.previousValue,Ce=_e.triggerNextStep,Ue=nt.delay,Ge=nt.waitAction;setTimeout(function(){Xe.setState({loading:!1},function(){Ge||nt.rendered||Ce(),ie(nt,Pt)})},Ue)}},{key:"render",value:function(){var Xe=this.state.loading,_e=this.props.style;return l.a.createElement(Y,{className:"rsc-cs",style:_e},Xe?l.a.createElement(V,null):this.renderComponent())}}])&&$(ee.prototype,Re),z}();B.propTypes={previousStep:u.a.objectOf(u.a.any).isRequired,previousValue:u.a.oneOfType([u.a.string,u.a.bool,u.a.number,u.a.object,u.a.array]),speak:u.a.func,step:u.a.objectOf(u.a.any).isRequired,steps:u.a.objectOf(u.a.any).isRequired,style:u.a.objectOf(u.a.any).isRequired,triggerNextStep:u.a.func.isRequired},B.defaultProps={previousValue:"",speak:function(){}};var x=B;function E(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  animation: `,` 0.3s ease forwards;
  cursor: pointer;
  display: inline-block;
  margin: 2px;
  transform: scale(0);
`]);return E=function(){return j},j}var N=m.a.li(E(),A),C={background:"#f5f8fb",fontFamily:"monospace",headerBgColor:"#6e48aa",headerFontColor:"#fff",headerFontSize:"16px",botBubbleColor:"#6E48AA",botFontColor:"#fff",userBubbleColor:"#fff",userFontColor:"#4a4a4a"};function W(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  background: `,`;
  border: 0;
  border-radius: 22px;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
  color: `,`;
  display: inline-block;
  font-size: 14px;
  padding: 12px;

  &:hover {
    opacity: 0.7;
  }
  &:active,
  &:hover:focus {
    outline:none;
  }
`]);return W=function(){return j},j}var U=m.a.button(W(),function(j){return j.theme.botBubbleColor},function(j){return j.theme.botFontColor});U.defaultProps={theme:C};var X=U;function ae(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  margin: 2px 0 12px 0;
  padding: 0 6px;
`]);return ae=function(){return j},j}var he=m.a.ul(ae());function pe(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([""]);return pe=function(){return j},j}var Pe=m.a.div(pe());function $e(j){return($e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(j)}function je(j,z){for(var ee=0;ee<z.length;ee++){var Re=z[ee];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(j,Re.key,Re)}}function ot(j){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(j)}function Nt(j,z){return(Nt=Object.setPrototypeOf||function(ee,Re){return ee.__proto__=Re,ee})(j,z)}function et(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function bt(j,z,ee){return z in j?Object.defineProperty(j,z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):j[z]=ee,j}var Ie=function(j){function z(){var Xe,_e,ie,nt;(function(Ge,Qe){if(!(Ge instanceof Qe))throw new TypeError("Cannot call a class as a function")})(this,z);for(var Pt=arguments.length,Ce=new Array(Pt),Ue=0;Ue<Pt;Ue++)Ce[Ue]=arguments[Ue];return ie=this,nt=(Xe=ot(z)).call.apply(Xe,[this].concat(Ce)),_e=!nt||$e(nt)!=="object"&&typeof nt!="function"?et(ie):nt,bt(et(et(_e)),"onOptionClick",function(Ge){var Qe=Ge.value;(0,_e.props.triggerNextStep)({value:Qe})}),bt(et(et(_e)),"renderOption",function(Ge){var Qe=_e.props,mt=Qe.bubbleOptionStyle,Ot=Qe.step.user,Tt=Ge.value,In=Ge.label;return l.a.createElement(N,{key:Tt,className:"rsc-os-option"},l.a.createElement(X,{className:"rsc-os-option-element",style:mt,user:Ot,onClick:function(){return _e.onOptionClick({value:Tt})}},In))}),_e}var ee,Re;return function(Xe,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");Xe.prototype=Object.create(_e&&_e.prototype,{constructor:{value:Xe,writable:!0,configurable:!0}}),_e&&Nt(Xe,_e)}(z,s.Component),ee=z,(Re=[{key:"render",value:function(){var Xe=this.props.step.options;return l.a.createElement(Pe,{className:"rsc-os"},l.a.createElement(he,{className:"rsc-os-options"},Object.keys(Xe).map(function(_e){return Xe[_e]}).map(this.renderOption)))}}])&&je(ee.prototype,Re),z}();Ie.propTypes={bubbleOptionStyle:u.a.objectOf(u.a.any).isRequired,step:u.a.objectOf(u.a.any).isRequired,triggerNextStep:u.a.func.isRequired};var rt=Ie;function He(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  animation: `,` 0.3s ease forwards;
  background: `,`;
  border-radius: `,`;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
  color: `,`;
  display: inline-block;
  font-size: 14px;
  max-width: 50%;
  margin: `,`;
  overflow: hidden;
  position: relative;
  padding: 12px;
  transform: scale(0);
  transform-origin: `,`;
`]);return He=function(){return j},j}var Ze=m.a.div(He(),A,function(j){return j.user?j.theme.userBubbleColor:j.theme.botBubbleColor},function(j){var z=j.isFirst,ee=j.isLast,Re=j.user;return z||ee?!z&&ee?Re?"18px 0 18px 18px":"0 18px 18px 18px":j.user?"18px 18px 0 18px":"18px 18px 18px 0":Re?"18px 0 0 18px":"0 18px 18px 0px"},function(j){return j.user?j.theme.userFontColor:j.theme.botFontColor},function(j){var z=j.isFirst,ee=j.showAvatar,Re=j.user;return!z&&ee?Re?"-8px 46px 10px 0":"-8px 0 10px 46px":z||ee?"0 0 10px 0":Re?"-8px 0px 10px 0":"-8px 0 10px 0px"},function(j){var z=j.isFirst,ee=j.user;return z?ee?"bottom right":"bottom left":ee?"top right":"top left"});Ze.defaultProps={theme:C};var qe=Ze;function re(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  animation: `,` 0.3s ease forwards;
  border-radius: `,`;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
  height: 40px;
  min-width: 40px;
  padding: 3px;
  transform: scale(0);
  transform-origin: `,`;
  width: 40;
`]);return re=function(){return j},j}var Ae=m.a.img(re(),A,function(j){return j.user?"50% 50% 50% 0":"50% 50% 0 50%"},function(j){return j.user?"bottom left":"bottom right"});function Fe(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  display: inline-block;
  order: `,`;
  padding: 6px;
`]);return Fe=function(){return j},j}var We=m.a.div(Fe(),function(j){return j.user?"1":"0"});function ne(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  align-items: flex-end;
  display: flex;
  justify-content: `,`;
`]);return ne=function(){return j},j}var ye=m.a.div(ne(),function(j){return j.user?"flex-end":"flex-start"});function Je(j){return(Je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(j)}function ut(j,z){for(var ee=0;ee<z.length;ee++){var Re=z[ee];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(j,Re.key,Re)}}function qt(j){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(j)}function Vn(j,z){return(Vn=Object.setPrototypeOf||function(ee,Re){return ee.__proto__=Re,ee})(j,z)}function Cn(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function yi(j,z,ee){return z in j?Object.defineProperty(j,z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):j[z]=ee,j}var xn=function(j){function z(){var Xe,_e,ie,nt;(function(Ge,Qe){if(!(Ge instanceof Qe))throw new TypeError("Cannot call a class as a function")})(this,z);for(var Pt=arguments.length,Ce=new Array(Pt),Ue=0;Ue<Pt;Ue++)Ce[Ue]=arguments[Ue];return ie=this,nt=(Xe=qt(z)).call.apply(Xe,[this].concat(Ce)),_e=!nt||Je(nt)!=="object"&&typeof nt!="function"?Cn(ie):nt,yi(Cn(Cn(_e)),"state",{loading:!0}),yi(Cn(Cn(_e)),"getMessage",function(){var Ge=_e.props,Qe=Ge.previousValue,mt=Ge.step.message;return mt?mt.replace(/{previousValue}/g,Qe):""}),yi(Cn(Cn(_e)),"renderMessage",function(){var Ge=_e.props,Qe=Ge.step,mt=Ge.steps,Ot=Ge.previousStep,Tt=Ge.triggerNextStep,In=Qe.component;return In?l.a.cloneElement(In,{step:Qe,steps:mt,previousStep:Ot,triggerNextStep:Tt}):_e.getMessage()}),_e}var ee,Re;return function(Xe,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");Xe.prototype=Object.create(_e&&_e.prototype,{constructor:{value:Xe,writable:!0,configurable:!0}}),_e&&Vn(Xe,_e)}(z,s.Component),ee=z,(Re=[{key:"componentDidMount",value:function(){var Xe=this,_e=this.props,ie=_e.step,nt=_e.speak,Pt=_e.previousValue,Ce=_e.triggerNextStep,Ue=ie.component,Ge=ie.delay,Qe=ie.waitAction,mt=Ue&&Qe;setTimeout(function(){Xe.setState({loading:!1},function(){mt||ie.rendered||Ce(),nt(ie,Pt)})},Ge)}},{key:"render",value:function(){var Xe=this.props,_e=Xe.step,ie=Xe.isFirst,nt=Xe.isLast,Pt=Xe.avatarStyle,Ce=Xe.bubbleStyle,Ue=Xe.hideBotAvatar,Ge=Xe.hideUserAvatar,Qe=this.state.loading,mt=_e.avatar,Ot=_e.user,Tt=Ot?!Ge:!Ue;return l.a.createElement(ye,{className:"rsc-ts ".concat(Ot?"rsc-ts-user":"rsc-ts-bot"),user:Ot},l.a.createElement(We,{className:"rsc-ts-image-container",user:Ot},ie&&Tt&&l.a.createElement(Ae,{className:"rsc-ts-image",style:Pt,showAvatar:Tt,user:Ot,src:mt,alt:"avatar"})),l.a.createElement(qe,{className:"rsc-ts-bubble",style:Ce,user:Ot,showAvatar:Tt,isFirst:ie,isLast:nt},Qe?l.a.createElement(V,null):this.renderMessage()))}}])&&ut(ee.prototype,Re),z}();xn.propTypes={avatarStyle:u.a.objectOf(u.a.any).isRequired,isFirst:u.a.bool.isRequired,isLast:u.a.bool.isRequired,bubbleStyle:u.a.objectOf(u.a.any).isRequired,hideBotAvatar:u.a.bool.isRequired,hideUserAvatar:u.a.bool.isRequired,previousStep:u.a.objectOf(u.a.any),previousValue:u.a.oneOfType([u.a.string,u.a.bool,u.a.number,u.a.object,u.a.array]),speak:u.a.func,step:u.a.objectOf(u.a.any).isRequired,steps:u.a.objectOf(u.a.any),triggerNextStep:u.a.func.isRequired},xn.defaultProps={previousStep:{},previousValue:"",speak:function(){},steps:{}};var Oi=xn,bn=[{key:"id",types:["string","number"],required:!0},{key:"user",types:["boolean"],required:!0},{key:"trigger",types:["string","number","function"],required:!1},{key:"validator",types:["function"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],vi=[{key:"id",types:["string","number"],required:!0},{key:"message",types:["string","function"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Rn=[{key:"id",types:["string","number"],required:!0},{key:"options",types:["object"],required:!0},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],ig=[{key:"id",types:["string","number"],required:!0},{key:"component",types:["any"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"replace",types:["boolean"],required:!1},{key:"waitAction",types:["boolean"],required:!1},{key:"asMessage",types:["boolean"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],K0=[{key:"id",types:["string","number"],required:!0},{key:"update",types:["string","number"],required:!0},{key:"trigger",types:["string","number","function"],required:!0},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Xl=a(3);function md(j){return(md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(j)}var ef={parse:function(j){var z=[];if(j.user)z=bn;else if(j.message)z=vi;else if(j.options)z=Rn;else if(j.component)z=ig;else{if(!j.update)throw new Error("The step ".concat(Object(Xl.stringify)(j)," is invalid"));z=K0}for(var ee=0,Re=z.length;ee<Re;ee+=1){var Xe=z[ee],_e=Xe.key,ie=Xe.types,nt=Xe.required;if(!j[_e]&&nt)throw new Error("Key '".concat(_e,"' is required in step ").concat(Object(Xl.stringify)(j)));if(j[_e]&&ie[0]!=="any"&&ie.indexOf(md(j[_e]))<0)throw new Error("The type of '".concat(_e,"' value must be ").concat(ie.join(" or ")," instead of ").concat(md(j[_e])))}var Pt=z.map(function(Ce){return Ce.key});for(var _e in j)Pt.indexOf(_e)<0&&(console.error("Invalid key '".concat(_e,"' in step '").concat(j.id,"'")),delete j[_e]);return j},checkInvalidIds:function(j){for(var z in j){var ee=j[z],Re=j[z].trigger;if(typeof Re!="function"){if(ee.options)for(var Xe=ee.options.filter(function(Pt){return typeof Pt.trigger!="function"}).map(function(Pt){return Pt.trigger}),_e=0,ie=Xe.length;_e<ie;_e+=1){var nt=Xe[_e];if(nt&&!j[nt])throw new Error("The id '".concat(nt,"' triggered by option ").concat(_e+1," in step '").concat(j[z].id,"' does not exist"))}else if(Re&&!j[Re])throw new Error("The id '".concat(Re,"' triggered by step '").concat(j[z].id,"' does not exist"))}}}},og=function(j,z){var ee=Object(Xl.parse)(Object(Xl.stringify)(z));for(var Re in ee)for(var Xe=0,_e=ee[Re].length;Xe<_e;Xe+=1)ee[Re][Xe].component&&(ee[Re][Xe].component=ee[Re][Xe].id);localStorage.setItem(j,Object(Xl.stringify)(ee))};function za(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  background: `,`;
  border-radius: 10px;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);
  font-family: `,`;
  overflow: hidden;
  position: `,`;
  bottom: `,`;
  top: `,`;
  right: `,`;
  left: `,`;
  width: `,`;
  height: `,`;
  z-index: 999;
  transform: `,`;
  transform-origin: `,`;
  transition: transform 0.3s ease;

  @media screen and (max-width: 568px) {
    border-radius: `,`;
    bottom: 0 !important;
    left: initial !important;
    height: 100%;
    right: 0 !important;
    top: initial !important;
    width: 100%;
  }
`]);return za=function(){return j},j}var tf=m.a.div(za(),function(j){return j.theme.background},function(j){return j.theme.fontFamily},function(j){return j.floating?"fixed":"relative"},function(j){var z=j.floating,ee=j.floatingStyle;return z?ee.bottom||"32px":"initial"},function(j){var z=j.floating,ee=j.floatingStyle;return z&&ee.top||"initial"},function(j){var z=j.floating,ee=j.floatingStyle;return z?ee.right||"32px":"initial"},function(j){var z=j.floating,ee=j.floatingStyle;return z&&ee.left||"initial"},function(j){return j.width},function(j){return j.height},function(j){return j.opened?"scale(1)":"scale(0)"},function(j){return j.floatingStyle.transformOrigin||"bottom right"},function(j){return j.floating?"0":""});tf.defaultProps={theme:C};var SC=tf;function q0(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  height: calc(`," - ",`);
  overflow-y: scroll;
  margin-top: 2px;
  padding-top: 6px;

  @media screen and (max-width: 568px) {
    height: `,`;
  }
`]);return q0=function(){return j},j}var TC=m.a.div(q0(),function(j){return j.height},function(j){return j.hideInput?"56px":"112px"},function(j){return j.floating?"calc(100% - 112px)":""});function Y0(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  align-items: center;
  background: `,`;
  color: `,`;
  display: flex;
  fill: `,`;
  height: 56px;
  justify-content: space-between;
  padding: 0 10px;
`]);return Y0=function(){return j},j}var X0=m.a.div(Y0(),function(j){return j.theme.headerBgColor},function(j){return j.theme.headerFontColor},function(j){return j.theme.headerFontColor});X0.defaultProps={theme:C};var CC=X0;function ag(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  margin: 0;
  font-size: `,`;
`]);return ag=function(){return j},j}var Vc=m.a.h2(ag(),function(j){return j.theme.headerFontSize});Vc.defaultProps={theme:C};var rf=Vc;function Ns(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  cursor: pointer;
`]);return Ns=function(){return j},j}var gd=m.a.a(Ns());function nf(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  align-items: center;
  cursor: pointer;
  background: `,`;
  bottom: 32px;
  border-radius: 100%;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);
  display: flex;
  fill: `,`;
  height: 56px;
  justify-content: center;
  position: fixed;
  right: 32px;
  transform: `,`;
  transition: transform 0.3s ease;
  width: 56px;
  z-index: 999;
`]);return nf=function(){return j},j}var sg=m.a.a(nf(),function(j){return j.theme.headerBgColor},function(j){return j.theme.headerFontColor},function(j){return j.opened?"scale(0)":"scale(1)"});sg.defaultProps={theme:{headerBgColor:"#6e48aa",headerFontColor:"#fff"}};var J0=sg;function of(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  height: 24px;
  width: 24px;
`]);return of=function(){return j},j}var af=m.a.img(of());function Q0(){var j=function(z,ee){return ee||(ee=z.slice(0)),Object.freeze(Object.defineProperties(z,{raw:{value:Object.freeze(ee)}}))}([`
  position: relative;
`]);return Q0=function(){return j},j}var Bc=m.a.div(Q0());function Z0(){var j=$c([`
          `,` .2s ease
        `]);return Z0=function(){return j},j}function sf(){var j=$c([`
  animation: `,`;
  border: 0;
  border-radius: 0;
  border-bottom-left-radius: 10px;
  border-bottom-right-radius: 10px;
  border-top: `,`;
  box-shadow: `,`;
  box-sizing: border-box;
  color: `,`;
  font-size: 16px;
  opacity: `,`;
  outline: none;
  padding: `,`;
  width: 100%;
  -webkit-appearance: none;

  &:disabled {
    background: #fff;
  }

  @media screen and (max-width: 568px) {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
`]);return sf=function(){return j},j}function $c(j,z){return z||(z=j.slice(0)),Object.freeze(Object.defineProperties(j,{raw:{value:Object.freeze(z)}}))}var kt=m.a.input(sf(),function(j){return j.invalid?Object(p.css)(Z0(),D):""},function(j){return j.invalid?"0":"1px solid #eee"},function(j){return j.invalid?"inset 0 0 2px #E53935":"none"},function(j){return j.invalid?"#E53935":""},function(j){return j.disabled&&!j.invalid?".5":"1"},function(j){return j.hasButton?"16px 52px 16px 10px":"16px 10px"},function(j){return j.floating?"0":"10px"},function(j){return j.floating?"0":"10px"});function ht(){var j=$t([`
            `,` 2s ease infinite
          `]);return ht=function(){return j},j}function lt(){var j=$t([`
  background-color: transparent;
  border: 0;
  border-bottom-right-radius: 10px;
  box-shadow: none;
  cursor: `,`;
  fill: `,`;
  opacity: `,`;
  outline: none;
  padding: 14px 16px 12px 16px;
  position: absolute;
  right: 0;
  top: 0;
  &:before {
    content: '';
    position: absolute;
    width: 23px;
    height: 23px;
    border-radius: 50%;
    animation: `,`;
  }
  &:not(:disabled):hover {
    opacity: 0.7;
  }
`]);return lt=function(){return j},j}function $t(j,z){return z||(z=j.slice(0)),Object.freeze(Object.defineProperties(j,{raw:{value:Object.freeze(z)}}))}var Ye=m.a.button(lt(),function(j){return j.disabled?"default":"pointer"},function(j){var z=j.speaking,ee=j.invalid,Re=j.theme;return z?Re.headerBgColor:ee?"#E53935":"#4a4a4a"},function(j){return j.disabled&&!j.invalid?".5":"1"},function(j){var z,ee=j.theme;return j.speaking?Object(p.css)(ht(),(z=ee.headerBgColor,Object(p.keyframes)(y(),g(z,.4),g(z,0),g(z,0)))):""});Ye.defaultProps={theme:C};var wr=Ye;function ue(){return(ue=Object.assign||function(j){for(var z=1;z<arguments.length;z++){var ee=arguments[z];for(var Re in ee)Object.prototype.hasOwnProperty.call(ee,Re)&&(j[Re]=ee[Re])}return j}).apply(this,arguments)}function ar(j,z){for(var ee=0;ee<z.length;ee++){var Re=z[ee];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(j,Re.key,Re)}}function rr(j,z,ee){return z&&ar(j.prototype,z),ee&&ar(j,ee),j}var En=null,Qt=function(){},Bn=function(){function j(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qt,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qt,Re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qt,Xe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"en";return function(_e,ie){if(!(_e instanceof ie))throw new TypeError("Cannot call a class as a function")}(this,j),En||(En=this),this.state={inputValue:"",lang:Xe,onChange:z,onEnd:ee,onStop:Re},this.onResult=this.onResult.bind(this),this.onEnd=this.onEnd.bind(this),this.setup(),En}return rr(j,null,[{key:"isSupported",value:function(){return"webkitSpeechRecognition"in window}}]),rr(j,[{key:"onChange",value:function(z){var ee=this.state.onChange;this.setState({inputValue:z}),ee(z)}},{key:"onFinal",value:function(z){this.setState({inputValue:z}),this.recognition.stop()}},{key:"onEnd",value:function(){var z=this.state,ee=z.onStop,Re=z.onEnd,Xe=z.force;this.setState({speaking:!1}),Xe?ee():Re()}},{key:"onResult",value:function(z){for(var ee="",Re="",Xe=z.resultIndex;Xe<z.results.length;Xe+=1)z.results[Xe].isFinal?(Re+=z.results[Xe][0].transcript,this.onFinal(Re)):(ee+=z.results[Xe][0].transcript,this.onChange(ee))}},{key:"setState",value:function(z){this.state=ue({},this.state,z)}},{key:"setup",value:function(){if(!j.isSupported())return this;var z=window.webkitSpeechRecognition;return this.recognition=new z,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang=this.state.lang,this.recognition.onresult=this.onResult,this.recognition.onend=this.onEnd,this}},{key:"setLang",value:function(z){return this.setState({lang:z}),this.setup(),this}},{key:"speak",value:function(){return j.isSupported()?(this.state.speaking?(this.setState({force:!0}),this.recognition.stop()):(this.recognition.start(),this.setState({speaking:!0,inputValue:""})),this):this}}]),j}(),qr=function(){return l.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),l.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},sr=function(){return l.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),l.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},bi=function(j){var z=j.size;return l.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:z,height:z,viewBox:"0 0 500 500"},l.a.createElement("g",null,l.a.createElement("g",null,l.a.createElement("polygon",{points:"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75"}))))};bi.propTypes={size:u.a.number},bi.defaultProps={size:20};var ro=bi,al=function(j){var z=j.size;return l.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:z,height:z,viewBox:"0 0 400 400"},l.a.createElement("g",null,l.a.createElement("path",{d:"M290.991,240.991c0,26.392-21.602,47.999-48.002,47.999h-11.529c-26.4,0-48.002-21.607-48.002-47.999V104.002   c0-26.4,21.602-48.004,48.002-48.004h11.529c26.4,0,48.002,21.604,48.002,48.004V240.991z"}),l.a.createElement("path",{d:"M342.381,209.85h-8.961c-4.932,0-8.961,4.034-8.961,8.961v8.008c0,50.26-37.109,91.001-87.361,91.001   c-50.26,0-87.109-40.741-87.109-91.001v-8.008c0-4.927-4.029-8.961-8.961-8.961h-8.961c-4.924,0-8.961,4.034-8.961,8.961v8.008   c0,58.862,40.229,107.625,96.07,116.362v36.966h-34.412c-4.932,0-8.961,4.039-8.961,8.971v17.922c0,4.923,4.029,8.961,8.961,8.961   h104.688c4.926,0,8.961-4.038,8.961-8.961v-17.922c0-4.932-4.035-8.971-8.961-8.971h-34.43v-36.966   c55.889-8.729,96.32-57.5,96.32-116.362v-8.008C351.342,213.884,347.303,209.85,342.381,209.85z"})))};al.propTypes={size:u.a.number},al.defaultProps={size:20};var no=al,ua=function(){return/iphone|ipod|android|ie|blackberry|fennec/i.test(navigator.userAgent)},yd=function(j){return typeof j=="string"},Ga=function(j){return function(z,ee){var Re=j.lang,Xe=j.voice,_e=j.enable,ie=z.user;if(window.SpeechSynthesisUtterance&&window.speechSynthesis&&!ie&&_e){var nt=function(Ce){var Ue=Ce.message,Ge=Ce.metadata,Qe=Ge===void 0?{}:Ge;return yd(Qe.speak)?Qe.speak:yd(Ue)?Ue:""}(z),Pt=new window.SpeechSynthesisUtterance;Pt.text=nt.replace(/{previousValue}/g,ee),Pt.lang=Re,Pt.voice=Xe,window.speechSynthesis.speak(Pt)}}};function ur(j){return(ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(j)}function ci(){return(ci=Object.assign||function(j){for(var z=1;z<arguments.length;z++){var ee=arguments[z];for(var Re in ee)Object.prototype.hasOwnProperty.call(ee,Re)&&(j[Re]=ee[Re])}return j}).apply(this,arguments)}function Jl(j,z){for(var ee=0;ee<z.length;ee++){var Re=z[ee];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(j,Re.key,Re)}}function Hc(j){return(Hc=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(j)}function Fr(j,z){return(Fr=Object.setPrototypeOf||function(ee,Re){return ee.__proto__=Re,ee})(j,z)}function xt(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function Qr(j,z,ee){return z in j?Object.defineProperty(j,z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):j[z]=ee,j}var ui=function(j){function z(_e){var ie,nt,Pt;return function(Ce,Ue){if(!(Ce instanceof Ue))throw new TypeError("Cannot call a class as a function")}(this,z),nt=this,Pt=Hc(z).call(this,_e),ie=!Pt||ur(Pt)!=="object"&&typeof Pt!="function"?xt(nt):Pt,Qr(xt(xt(ie)),"onNodeInserted",function(Ce){var Ue=Ce.currentTarget;ie.props.enableSmoothScroll&&ie.supportsScrollBehavior?Ue.scroll({top:Ue.scrollHeight,left:0,behavior:"smooth"}):Ue.scrollTop=Ue.scrollHeight}),Qr(xt(xt(ie)),"onResize",function(){ie.content.scrollTop=ie.content.scrollHeight}),Qr(xt(xt(ie)),"onRecognitionChange",function(Ce){ie.setState({inputValue:Ce})}),Qr(xt(xt(ie)),"onRecognitionEnd",function(){ie.setState({speaking:!1}),ie.handleSubmitButton()}),Qr(xt(xt(ie)),"onRecognitionStop",function(){ie.setState({speaking:!1})}),Qr(xt(xt(ie)),"onValueChange",function(Ce){ie.setState({inputValue:Ce.target.value})}),Qr(xt(xt(ie)),"getTriggeredStep",function(Ce,Ue){var Ge=ie.generateRenderedStepsById();return typeof Ce=="function"?Ce({value:Ue,steps:Ge}):Ce}),Qr(xt(xt(ie)),"getStepMessage",function(Ce){var Ue=ie.state.previousSteps,Ge=Ue.length>0?Ue.length-1:0,Qe=ie.generateRenderedStepsById(),mt=Ue[Ge].value;return typeof Ce=="function"?Ce({previousValue:mt,steps:Qe}):Ce}),Qr(xt(xt(ie)),"generateRenderedStepsById",function(){for(var Ce=ie.state.previousSteps,Ue={},Ge=0,Qe=Ce.length;Ge<Qe;Ge+=1){var mt=Ce[Ge],Ot=mt.id,Tt=mt.message,In=mt.value,Sr=mt.metadata;Ue[Ot]={id:Ot,message:Tt,value:In,metadata:Sr}}return Ue}),Qr(xt(xt(ie)),"triggerNextStep",function(Ce){var Ue=ie.props.enableMobileAutoFocus,Ge=ie.state,Qe=Ge.defaultUserSettings,mt=Ge.previousSteps,Ot=Ge.renderedSteps,Tt=Ge.steps,In=ie.state,Sr=In.currentStep,Eo=In.previousStep,da=Sr.end;if(Ce&&Ce.value&&(Sr.value=Ce.value),Ce&&Ce.hideInput&&(Sr.hideInput=Ce.hideInput),Ce&&Ce.trigger&&(Sr.trigger=ie.getTriggeredStep(Ce.trigger,Ce.value)),da)ie.handleEnd();else if(Sr.options&&Ce){var Ei=Sr.options.filter(function(cg){return cg.value===Ce.value})[0],Wa=ie.getTriggeredStep(Ei.trigger,Sr.value);delete Sr.options,Sr=ci({},Sr,Ei,Qe,{user:!0,message:Ei.label,trigger:Wa}),Ot.pop(),mt.pop(),Ot.push(Sr),mt.push(Sr),ie.setState({currentStep:Sr,renderedSteps:Ot,previousSteps:mt})}else if(Sr.trigger){Sr.replace&&Ot.pop();var Nn=ci({},Tt[ie.getTriggeredStep(Sr.trigger,Sr.value)]);if(Nn.message)Nn.message=ie.getStepMessage(Nn.message);else if(Nn.update){var _o=Nn;if((Nn=ci({},Tt[_o.update])).options)for(var wo=0,lf=Nn.options.length;wo<lf;wo+=1)Nn.options[wo].trigger=_o.trigger;else Nn.trigger=_o.trigger}Nn.key=f()(24),Eo=Sr,Sr=Nn,ie.setState({renderedSteps:Ot,currentStep:Sr,previousStep:Eo},function(){Nn.user?ie.setState({disabled:!1},function(){!Ue&&ua()||ie.input&&ie.input.focus()}):(Ot.push(Nn),mt.push(Nn),ie.setState({renderedSteps:Ot,previousSteps:mt}))})}var cf=ie.props,zc=cf.cache,lg=cf.cacheName;zc&&setTimeout(function(){og(lg,{currentStep:Sr,previousStep:Eo,previousSteps:mt,renderedSteps:Ot})},300)}),Qr(xt(xt(ie)),"handleEnd",function(){var Ce=ie.props.handleEnd;if(Ce){for(var Ue=ie.state.previousSteps,Ge=Ue.map(function(Ei){return{id:Ei.id,message:Ei.message,value:Ei.value,metadata:Ei.metadata}}),Qe=[],mt=0,Ot=Ue.length;mt<Ot;mt+=1){var Tt=Ue[mt],In=Tt.id,Sr=Tt.message,Eo=Tt.value,da=Tt.metadata;Qe[In]={id:In,message:Sr,value:Eo,metadata:da}}Ce({renderedSteps:Ge,steps:Qe,values:Ue.filter(function(Ei){return Ei.value}).map(function(Ei){return Ei.value})})}}),Qr(xt(xt(ie)),"isInputValueEmpty",function(){var Ce=ie.state.inputValue;return!Ce||Ce.length===0}),Qr(xt(xt(ie)),"isLastPosition",function(Ce){var Ue=ie.state.renderedSteps,Ge=Ue.length,Qe=Ue.map(function(Ot){return Ot.key}).indexOf(Ce.key);if(Ge<=1||Qe+1===Ge)return!0;var mt=Ue[Qe+1];return!mt.message&&!mt.asMessage||Ce.user!==mt.user}),Qr(xt(xt(ie)),"isFirstPosition",function(Ce){var Ue=ie.state.renderedSteps,Ge=Ue.map(function(mt){return mt.key}).indexOf(Ce.key);if(Ge===0)return!0;var Qe=Ue[Ge-1];return!Qe.message&&!Qe.asMessage||Ce.user!==Qe.user}),Qr(xt(xt(ie)),"handleKeyPress",function(Ce){Ce.key==="Enter"&&ie.submitUserMessage()}),Qr(xt(xt(ie)),"handleSubmitButton",function(){var Ce=ie.state,Ue=Ce.speaking,Ge=Ce.recognitionEnable;if((ie.isInputValueEmpty()||Ue)&&Ge)return ie.recognition.speak(),void(Ue||ie.setState({speaking:!0}));ie.submitUserMessage()}),Qr(xt(xt(ie)),"submitUserMessage",function(){var Ce=ie.state,Ue=Ce.defaultUserSettings,Ge=Ce.inputValue,Qe=Ce.previousSteps,mt=Ce.renderedSteps,Ot=ie.state.currentStep;Ot.validator&&ie.checkInvalidInput()||(Ot=ci({},Ue,Ot,{message:Ge,value:Ge}),mt.push(Ot),Qe.push(Ot),ie.setState({currentStep:Ot,renderedSteps:mt,previousSteps:Qe,disabled:!0,inputValue:""},function(){ie.input&&ie.input.blur()}))}),Qr(xt(xt(ie)),"checkInvalidInput",function(){var Ce=ie.props.enableMobileAutoFocus,Ue=ie.state,Ge=Ue.currentStep,Qe=Ue.inputValue,mt=Ge.validator(Qe),Ot=Qe;return(typeof mt!="boolean"||!mt)&&(ie.setState({inputValue:mt.toString(),inputInvalid:!0,disabled:!0},function(){setTimeout(function(){ie.setState({inputValue:Ot,inputInvalid:!1,disabled:!1},function(){!Ce&&ua()||ie.input&&ie.input.focus()})},2e3)}),!0)}),Qr(xt(xt(ie)),"toggleChatBot",function(Ce){var Ue=ie.props.toggleFloating;Ue?Ue({opened:Ce}):ie.setState({opened:Ce})}),Qr(xt(xt(ie)),"renderStep",function(Ce,Ue){var Ge=ie.state.renderedSteps,Qe=ie.props,mt=Qe.avatarStyle,Ot=Qe.bubbleStyle,Tt=Qe.bubbleOptionStyle,In=Qe.customStyle,Sr=Qe.hideBotAvatar,Eo=Qe.hideUserAvatar,da=Qe.speechSynthesis,Ei=Ce.options,Wa=Ce.component,Nn=Ce.asMessage,_o=ie.generateRenderedStepsById(),wo=Ue>0?Ge[Ue-1]:{};return Wa&&!Nn?l.a.createElement(x,{key:Ue,speak:ie.speak,step:Ce,steps:_o,style:In,previousStep:wo,previousValue:wo.value,triggerNextStep:ie.triggerNextStep}):Ei?l.a.createElement(rt,{key:Ue,step:Ce,speak:ie.speak,previousValue:wo.value,triggerNextStep:ie.triggerNextStep,bubbleOptionStyle:Tt}):l.a.createElement(Oi,{key:Ue,step:Ce,steps:_o,speak:ie.speak,previousStep:wo,previousValue:wo.value,triggerNextStep:ie.triggerNextStep,avatarStyle:mt,bubbleStyle:Ot,hideBotAvatar:Sr,hideUserAvatar:Eo,speechSynthesis:da,isFirst:ie.isFirstPosition(Ce),isLast:ie.isLastPosition(Ce)})}),ie.content=null,ie.input=null,ie.supportsScrollBehavior=!1,ie.setContentRef=function(Ce){ie.content=Ce},ie.setInputRef=function(Ce){ie.input=Ce},ie.state={renderedSteps:[],previousSteps:[],currentStep:{},previousStep:{},steps:{},disabled:!0,opened:_e.opened||!_e.floating,inputValue:"",inputInvalid:!1,speaking:!1,recognitionEnable:_e.recognitionEnable&&Bn.isSupported(),defaultUserSettings:{}},ie.speak=Ga(_e.speechSynthesis),ie}var ee,Re,Xe;return function(_e,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(ie&&ie.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),ie&&Fr(_e,ie)}(z,s.Component),ee=z,Xe=[{key:"getDerivedStateFromProps",value:function(_e,ie){var nt=_e.opened;return _e.toggleFloating!==void 0&&nt!==void 0&&nt!==ie.opened?function(Pt){for(var Ce=1;Ce<arguments.length;Ce++){var Ue=arguments[Ce]!=null?arguments[Ce]:{},Ge=Object.keys(Ue);typeof Object.getOwnPropertySymbols=="function"&&(Ge=Ge.concat(Object.getOwnPropertySymbols(Ue).filter(function(Qe){return Object.getOwnPropertyDescriptor(Ue,Qe).enumerable}))),Ge.forEach(function(Qe){Qr(Pt,Qe,Ue[Qe])})}return Pt}({},ie,{opened:nt}):ie}}],(Re=[{key:"componentDidMount",value:function(){for(var _e=this,ie=this.props.steps,nt=this.props,Pt=nt.botDelay,Ce=nt.botAvatar,Ue=nt.cache,Ge=nt.cacheName,Qe=nt.customDelay,mt=nt.enableMobileAutoFocus,Ot=nt.userAvatar,Tt={},In={delay:Pt,avatar:Ce},Sr={delay:nt.userDelay,avatar:Ot,hideInput:!1},Eo={delay:Qe},da=0,Ei=ie.length;da<Ei;da+=1){var Wa=ie[da],Nn={};Wa.user?Nn=Sr:Wa.message||Wa.asMessage?Nn=In:Wa.component&&(Nn=Eo),Tt[Wa.id]=ci({},Nn,ef.parse(Wa))}ef.checkInvalidIds(Tt);var _o=ie[0];if(_o.message){var wo=_o.message;_o.message=typeof wo=="function"?wo():wo,Tt[_o.id].message=_o.message}var lf=this.state.recognitionEnable,cf=this.props.recognitionLang;lf&&(this.recognition=new Bn(this.onRecognitionChange,this.onRecognitionEnd,this.onRecognitionStop,cf)),this.supportsScrollBehavior="scrollBehavior"in document.documentElement.style,this.content&&(this.content.addEventListener("DOMNodeInserted",this.onNodeInserted),window.addEventListener("resize",this.onResize));var zc=function(uf,eb){var ug=uf.cacheName,IC=uf.cache,NC=uf.firstStep,vd=uf.steps,AC=NC,ane=[vd[AC.id]],sne=[vd[AC.id]],sM=localStorage.getItem(ug);if(IC&&sM)try{var Do=Object(Xl.parse)(sM),lM=Do.renderedSteps[Do.renderedSteps.length-1];if(!lM||!lM.end){for(var df=0,lne=Do.renderedSteps.length;df<lne;df+=1){var cM=Do.renderedSteps[df];if(Do.renderedSteps[df].delay=0,Do.renderedSteps[df].rendered=!0,cM.component){var cne=cM.id;Do.renderedSteps[df].component=vd[cne].component}}var OC=Do.currentStep,une=OC.trigger,dne=OC.end,kC=OC.options,uM=Do.currentStep.id;if(kC&&delete Do.currentStep.rendered,!une&&!dne)if(kC)for(var tb=0;tb<kC.length;tb+=1)Do.currentStep.options[tb].trigger=vd[uM].options[tb].trigger;else Do.currentStep.trigger=vd[uM].trigger;return Do.currentStep.user&&eb(),Do}localStorage.removeItem(ug)}catch(hne){console.info("Unable to parse cache named:".concat(ug,`. 
The cache where probably created with an older version of react-simple-chatbot.
`),hne)}return{currentStep:AC,previousStep:{},previousSteps:sne,renderedSteps:ane}}({cacheName:Ge,cache:Ue,firstStep:_o,steps:Tt},function(){_e.setState({disabled:!1},function(){!mt&&ua()||_e.input&&_e.input.focus()})}),lg=zc.currentStep,cg=zc.previousStep,xC=zc.previousSteps,RC=zc.renderedSteps;this.setState({currentStep:lg,defaultUserSettings:Sr,previousStep:cg,previousSteps:xC,renderedSteps:RC,steps:Tt})}},{key:"componentWillUnmount",value:function(){this.content&&(this.content.removeEventListener("DOMNodeInserted",this.onNodeInserted),window.removeEventListener("resize",this.onResize))}},{key:"render",value:function(){var _e=this,ie=this.state,nt=ie.currentStep,Pt=ie.disabled,Ce=ie.inputInvalid,Ue=ie.inputValue,Ge=ie.opened,Qe=ie.renderedSteps,mt=ie.speaking,Ot=ie.recognitionEnable,Tt=this.props,In=Tt.className,Sr=Tt.contentStyle,Eo=Tt.floating,da=Tt.floatingIcon,Ei=Tt.floatingStyle,Wa=Tt.footerStyle,Nn=Tt.headerComponent,_o=Tt.headerTitle,wo=Tt.hideHeader,lf=Tt.hideSubmitButton,cf=Tt.inputStyle,zc=Tt.placeholder,lg=Tt.inputAttributes,cg=Tt.recognitionPlaceholder,xC=Tt.style,RC=Tt.submitButtonStyle,uf=Tt.width,eb=Tt.height,ug=Nn||l.a.createElement(CC,{className:"rsc-header"},l.a.createElement(rf,{className:"rsc-header-title"},_o),Eo&&l.a.createElement(gd,{className:"rsc-header-close-button",onClick:function(){return _e.toggleChatBot(!1)}},l.a.createElement(sr,null))),IC=(this.isInputValueEmpty()||mt)&&Ot?l.a.createElement(no,null):l.a.createElement(ro,null),NC=mt?cg:nt.placeholder||zc,vd=nt.inputAttributes||lg;return l.a.createElement("div",{className:"rsc ".concat(In)},Eo&&l.a.createElement(J0,{className:"rsc-float-button",style:Ei,opened:Ge,onClick:function(){return _e.toggleChatBot(!0)}},typeof da=="string"?l.a.createElement(af,{src:da}):da),l.a.createElement(SC,{className:"rsc-container",floating:Eo,floatingStyle:Ei,opened:Ge,style:xC,width:uf,height:eb},!wo&&ug,l.a.createElement(TC,{className:"rsc-content",ref:this.setContentRef,floating:Eo,style:Sr,height:eb,hideInput:nt.hideInput},Qe.map(this.renderStep)),l.a.createElement(Bc,{className:"rsc-footer",style:Wa},!nt.hideInput&&l.a.createElement(kt,ci({type:"textarea",style:cf,ref:this.setInputRef,className:"rsc-input",placeholder:Ce?"":NC,onKeyPress:this.handleKeyPress,onChange:this.onValueChange,value:Ue,floating:Eo,invalid:Ce,disabled:Pt,hasButton:!lf},vd)),!nt.hideInput&&!lf&&l.a.createElement(wr,{className:"rsc-submit-button",style:RC,onClick:this.handleSubmitButton,invalid:Ce,disabled:Pt,speaking:mt},IC))))}}])&&Jl(ee.prototype,Re),Xe&&Jl(ee,Xe),z}();ui.propTypes={avatarStyle:u.a.objectOf(u.a.any),botAvatar:u.a.string,botDelay:u.a.number,bubbleOptionStyle:u.a.objectOf(u.a.any),bubbleStyle:u.a.objectOf(u.a.any),cache:u.a.bool,cacheName:u.a.string,className:u.a.string,contentStyle:u.a.objectOf(u.a.any),customDelay:u.a.number,customStyle:u.a.objectOf(u.a.any),enableMobileAutoFocus:u.a.bool,enableSmoothScroll:u.a.bool,floating:u.a.bool,floatingIcon:u.a.oneOfType([u.a.string,u.a.element]),floatingStyle:u.a.objectOf(u.a.any),footerStyle:u.a.objectOf(u.a.any),handleEnd:u.a.func,headerComponent:u.a.element,headerTitle:u.a.string,height:u.a.string,hideBotAvatar:u.a.bool,hideHeader:u.a.bool,hideSubmitButton:u.a.bool,hideUserAvatar:u.a.bool,inputAttributes:u.a.objectOf(u.a.any),inputStyle:u.a.objectOf(u.a.any),opened:u.a.bool,toggleFloating:u.a.func,placeholder:u.a.string,recognitionEnable:u.a.bool,recognitionLang:u.a.string,recognitionPlaceholder:u.a.string,speechSynthesis:u.a.shape({enable:u.a.bool,lang:u.a.string,voice:typeof window<"u"?u.a.instanceOf(window.SpeechSynthesisVoice):u.a.any}),steps:u.a.arrayOf(u.a.object).isRequired,style:u.a.objectOf(u.a.any),submitButtonStyle:u.a.objectOf(u.a.any),userAvatar:u.a.string,userDelay:u.a.number,width:u.a.string},ui.defaultProps={avatarStyle:{},botDelay:1e3,bubbleOptionStyle:{},bubbleStyle:{},cache:!1,cacheName:"rsc_cache",className:"",contentStyle:{},customStyle:{},customDelay:1e3,enableMobileAutoFocus:!1,enableSmoothScroll:!1,floating:!1,floatingIcon:l.a.createElement(qr,null),floatingStyle:{},footerStyle:{},handleEnd:void 0,headerComponent:void 0,headerTitle:"Chat",height:"520px",hideBotAvatar:!1,hideHeader:!1,hideSubmitButton:!1,hideUserAvatar:!1,inputStyle:{},opened:void 0,placeholder:"Type the message ...",inputAttributes:{},recognitionEnable:!1,recognitionLang:"en",recognitionPlaceholder:"Listening ...",speechSynthesis:{enable:!1,lang:"en",voice:null},style:{},submitButtonStyle:{},toggleFloating:void 0,userDelay:1e3,width:"350px",botAvatar:"data:image/svg+xml,%3csvg version='1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3e%3cpath d='M303 70a47 47 0 1 0-70 40v84h46v-84c14-8 24-23 24-40z' fill='%2393c7ef'/%3e%3cpath d='M256 23v171h23v-84a47 47 0 0 0-23-87z' fill='%235a8bb0'/%3e%3cpath fill='%2393c7ef' d='M0 240h248v124H0z'/%3e%3cpath fill='%235a8bb0' d='M264 240h248v124H264z'/%3e%3cpath fill='%2393c7ef' d='M186 365h140v124H186z'/%3e%3cpath fill='%235a8bb0' d='M256 365h70v124h-70z'/%3e%3cpath fill='%23cce9f9' d='M47 163h419v279H47z'/%3e%3cpath fill='%2393c7ef' d='M256 163h209v279H256z'/%3e%3cpath d='M194 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%233c5d76'/%3e%3cpath d='M380 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%231e2e3b'/%3e%3cpath d='M186 349a70 70 0 1 0 140 0H186z' fill='%233c5d76'/%3e%3cpath d='M256 349v70c39 0 70-31 70-70h-70z' fill='%231e2e3b'/%3e%3c/svg%3e",userAvatar:"data:image/svg+xml,%3csvg viewBox='-208.5 21 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle cx='-158.5' cy='71' fill='%23F5EEE5' r='50'/%3e%3cdefs%3e%3ccircle cx='-158.5' cy='71' id='a' r='50'/%3e%3c/defs%3e%3cclipPath id='b'%3e%3cuse overflow='visible' xlink:href='%23a'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23b)' d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' fill='%23E6C19C'/%3e%3cg clip-path='url(%23b)'%3e%3cdefs%3e%3cpath d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' id='c'/%3e%3c/defs%3e%3cclipPath id='d'%3e%3cuse overflow='visible' xlink:href='%23c'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23d)' d='M-158.5 100.1c12.7 0 23-18.6 23-34.4 0-16.2-10.3-24.7-23-24.7s-23 8.5-23 24.7c0 15.8 10.3 34.4 23 34.4z' fill='%23D4B08C'/%3e%3c/g%3e%3cpath d='M-158.5 96c12.7 0 23-16.3 23-31 0-15.1-10.3-23-23-23s-23 7.9-23 23c0 14.7 10.3 31 23 31z' fill='%23F2CEA5'/%3e%3c/svg%3e"};var Ut=ui;a.d(o,"Loading",function(){return V}),o.default=Ut}])})})(oJ);var rTe=oJ.exports;const nTe=oa(rTe);function iTe(){const e=[{id:"0",message:"Hey Geek!",trigger:"1"},{id:"1",message:"Please write your username",trigger:"2"},{id:"2",user:!0,trigger:"3"},{id:"3",message:" hi {previousValue}, how can I help you?",trigger:4},{id:"4",options:[{value:1,label:"View Courses"},{value:2,label:"Read Articles"}],end:!0}],t={botAvatar:"/logo.png"};return d.jsx("div",{children:d.jsx(nTe,{steps:e,...t})})}function oTe(){const[e,t]=T.useState(!1);return d.jsxs("div",{className:"homePage w-full h-full",id:"id_patientDashboard",children:[d.jsx("div",{className:"header bg-white w-full h-[12vh] shadow-lg ",children:d.jsx(YD,{})}),d.jsx("div",{className:"w-full h-full p-4 ",children:d.jsx(gi,{})}),d.jsx("div",{className:"chatBot fixed w-auto h-auto right-2 bottom-0",children:e?d.jsxs("div",{className:"flex gap-6 items-start ",children:[d.jsx("div",{children:d.jsx(iTe,{})}),d.jsx("button",{className:"px-6 py-3 bg-red-500 text-white font-medium rounded-tl-2xl",onClick:()=>t(!1),children:"Close"})]}):d.jsxs("div",{className:"relative w-auto h-[15vh]  right-10 bottom-0 flex flex-row gap-2",children:[d.jsx("img",{src:"/doctorBot.jpg",alt:"chatbot",className:" z-100 shadow-lg rounded-full w-[5vw] h-[10vh] cursor-pointer",onClick:()=>t(!0)}),d.jsx("span",{className:"h-[40%] p-2 rounded-tl-2xl  text-white font-medium bg-blue-500  ",children:"Hey, i'm an Ai Doctor..!!"})]})})]})}const aTe="https://hcompanion.onrender.com/api",CJ=async({token:e})=>{try{const t=await ve.get(`${aTe}/pharmacy/getBasicDetails`,{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.userData}catch(t){t.response.status=="401"&&te.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t)}},Mm="https://hcompanion.onrender.com/api",sTe=async e=>{try{const t=await ve.post(`${Mm}/pharmacy/profile/updateDetails`,{updateDetails:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},f2=async()=>{try{return(await ve.get(`${Mm}/pharmacy/profile/getProfileDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.details}catch(e){return console.log(e),!1}},lTe=async()=>{try{return(await ve.get(`${Mm}/pharmacy/profile/getContactDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.contactDetails}catch(e){return console.log(e),!1}},cTe=async e=>{try{const t=await ve.post(`${Mm}/pharmacy/profile/updateContactDetails`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return te.fire({icon:"success",text:"Contact Details Have been Updated"}),!0}catch(t){return console.log(t),!1}},uTe=async e=>{try{const t=await ve.post(`${Mm}/pharmacy/approval/form/submit`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},dTe=async()=>{try{return(await ve.get(`${Mm}/pharmacy/approval/viewDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.pharmacyDetails}catch(e){return console.log(e),!1}},hTe={pharmacyName:"",ownerName:"",profileImage:""},xJ=Nm({name:"pharmacy",initialState:hTe,reducers:{setPharmacy(e,t){e.pharmacyName=t.payload.pharmacyName,e.ownerName=t.payload.ownerName,e.profileImage=t.payload.profileImage}}}),{setPharmacy:RJ}=xJ.actions,fTe=xJ.reducer;function pTe(){const e=$l(),{username:t,email:r,role:n,isLoggedIn:i}=rn(u=>u.user),{pharmacyName:o,ownerName:a,profileImage:s}=rn(u=>u.pharmacy),l=Er(),c=async()=>{if(sessionStorage.getItem("token")){const u=await CJ({token:sessionStorage.getItem("token")});if(u){const h=await f2();(h==null?void 0:h.approvalStatus)=="0"?l("/pharmacy/approval/form"):(h==null?void 0:h.approvalStatus)=="1"&&l("/pharmacy/approval/submitted"),e(Xn({username:u.username,email:u.email,role:u.role,isLoggedIn:!0})),e(RJ({pharmacyName:h.pharmacyName,ownerName:h.ownerName,profileImage:h.profileImage}))}}};return T.useEffect(()=>{c()},[]),d.jsx("div",{className:"navbarParent h-full w-full ",children:d.jsxs("div",{className:"navbar w-full h-full flex flex-col rounded-tr-[3%] bg-blue-600 bg-opacity-90 p-4 gap-10 ",children:[d.jsxs("div",{className:"w-full h-[8vh] flex justify-start items-center gap-4 ",children:[d.jsx("img",{src:"/icons/arrowBack.png",alt:"",className:"h-[5vh] w-[] p-2 ml-2 bg-white  rounded-lg"}),d.jsx("h2",{className:"text-white text-sm",children:"Minimize"}),d.jsx("div",{className:"flex-1 h-full flex justify-end items-center",children:d.jsx("img",{src:"/logo.png",alt:"",className:"w-[7vw] h-[7vh] bg-white mr-4"})})]}),d.jsxs("div",{className:"profile h-[12%] flex flex-row justify-start gap-4",children:[d.jsx("div",{className:"profileImage w-auto h-full flex ",children:d.jsx("img",{src:s,alt:"image",className:"h-full w-[5vw] rounded-full "})}),d.jsxs("div",{className:"details flex-1 flex flex-col justify-center bg-white bg-opacity-10 p-2 rounded-lg gap-2 ",children:[d.jsx("span",{children:d.jsx("h2",{className:"text-white text-lg font-bold",children:o||t})}),d.jsx("span",{children:d.jsx("h2",{className:"text-white text-sm",children:"pharmacy"})})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(le,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"home w-full text-white h-[80%] flex flex-col gap-4 border-slate-50",children:[d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/pharmacyHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{l("/pharmacy/home")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/stock.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",id:"id_navMedicineStock",onClick:()=>{l("/pharmacy/stock/viewStocks")},children:"Medicine Stock"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/pharmacyOrder.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{l("/pharmacy/order")},children:"Orders"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{l("/pharmacy/profile")},children:"Profile"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),e(Xn({})),l("/")},children:"sign out"})]})]})]})})}function IJ(){const e=Er();return d.jsxs("div",{className:"w-full h-[12vh] py-2 flex flex-row justify-end gap-20  px-10 ",children:[d.jsx("div",{className:"w-[15%] h-full",children:d.jsx("button",{className:"w-full h-full p-4 font-bold rounded-sm flex items-center  bg-green-400  drop-shadow-xl",onClick:()=>{e("/pharmacy/stock/addCategory")},children:"Add New Stock"})}),d.jsx("div",{className:"w-[15%] h-full",children:d.jsx("button",{className:"w-full h-full p-4 font-bold rounded-sm flex items-center  bg-orange-500  drop-shadow-xl",id:"id_btnViewStock",onClick:()=>{e("/pharmacy/stock/viewStocks")},children:"View Stock"})})]})}const mTe=async()=>{try{const e=await ve.get("https://rxnav.nlm.nih.gov/REST/allconcepts.json?tty=SCD+GPCK+SBD+BPCK");return console.log(e.data.minConceptGroup.minConcept[0]),e.data.minConceptGroup.minConcept}catch(e){console.log(e)}},gTe=Ni().shape({medicineName:jt().required("Required"),description:jt().required("required"),costPrice:jt(),sellingPrice:jt().required("required"),medicineType:jt().required("required"),medicineImage:a9().required("required")}),yTe=Ni().shape({medicineName:jt().required("Required"),description:jt().required("required"),costPrice:jt().required("required"),sellingPrice:jt().required("required"),medicineType:jt().required("required")}),T0="https://hcompanion.onrender.com/api",vTe=async e=>{try{const t=await ve.post(`${T0}/pharmacy/medicine/add`,e,{headers:{"Content-Type":"multipart/form-data",authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),te.fire({icon:"success",text:"Successfully Added"}),t.data.medicineDetails}catch(t){console.log(t),t.response.status=="500"&&te.fire({icon:"error",text:"Encountered an Error on the backend"})}},bTe=async()=>{try{const e=await ve.get(`${T0}/pharmacy/medicine/viewStocks`,{headers:{"Content-Type":"multipart/form-data",authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(e.data),e.data.medicines}catch(e){console.log(e),e.response.status=="500"&&te.fire({icon:"error",text:"Encountered an Error on the backend"})}},ETe=async({inventoryId:e})=>{try{const t=await ve.post(`${T0}/pharmacy/medicine/deleteStock`,{inventoryId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),te.fire({icon:"success",text:"Medicine has been Deleted"}),!0}catch(t){console.log(t),t.response.status=="400"&&te.fire({icon:"error",text:"Medicine Not Found"}),t.response.status=="500"&&te.fire({icon:"error",text:"Encountered an Error on the backend"})}},_Te=async({inventoryId:e})=>{try{console.log(e);const t=await ve.post(`${T0}/pharmacy/medicine/viewDetails`,{inventoryId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.medicine}catch(t){console.log(t),t.response.status=="500"&&te.fire({icon:"error",text:"Encountered an Error on the backend"})}},wTe=async({medicine:e})=>{try{await console.log(e);const t=await ve.post(`${T0}/pharmacy/medicine/updateStock`,e,{headers:{"Content-Type":"multipart/form-data",authorization:`Bearer ${sessionStorage.getItem("token")}`}});return te.fire({icon:"success",text:"Medicine has been Updated"}),console.log(t.data),t.data.updated}catch(t){console.log(t)}};function STe(){const[e,t]=T.useState([]),r=Er(),n=Wr({initialValues:{medicineName:"",description:"",costPrice:"",sellingPrice:"",medicineType:"",medicineImage:""},validationSchema:gTe,onSubmit:async(a,s)=>{console.log(`values ${JSON.stringify(a)}`),await vTe(a)&&r("/pharmacy/home")}}),i=async()=>{const a=await mTe();console.log(`${JSON.stringify(a)}`),await t(a)},o=(a,s)=>{try{const l=a.target.files[0];n.setFieldValue("medicineImage",l)}catch(l){console.log(l)}};return T.useEffect(()=>{i()},[]),console.log(n.errors),d.jsx("div",{className:"screen w-full h-full flex flex-row",children:d.jsx("div",{style:{backgroundImage:"url('/icons/pharmacyBg.jpg')",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},className:"w-full h-full flex flex-1 flex-col gap-4",children:d.jsxs("div",{className:"w-full h-full overflow-y-scroll pt-4 flex flex-1 flex-col gap-4 bg-black bg-opacity-70",children:[d.jsx(IJ,{}),d.jsx("div",{className:"addForm flex justify-center w-full h-[100%] mt-10 mb-[5vh]",children:d.jsxs("form",{onSubmit:n.handleSubmit,className:"w-[40%] h-[100%] p-4 flex flex-col gap-6 border shadow-xl bg-white",children:[d.jsx("span",{children:d.jsx("h1",{className:"font-bold text-xl text-emerald-500",children:"New Medicine"})}),d.jsx(le,{list:"medicines",variant:"filled",name:"medicineName",placeholder:"medicine name",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.medicineName&&(n.errors.medicineName?{color:"error",helperText:`${n.errors.medicineName}`}:{color:"success"})}),d.jsx("div",{children:d.jsx("datalist",{id:"medicines",children:e&&e.length>0?e.map((a,s)=>d.jsx("option",{value:a.name},s)):d.jsx("option",{value:"No Medicines Available"})})}),d.jsx(le,{variant:"filled",name:"medicineType",placeholder:"medicineType",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.medicineType&&(n.errors.medicineType?{color:"error",helperText:`${n.errors.medicineType}`}:{color:"success"})}),d.jsx(le,{variant:"filled",name:"description",placeholder:"description",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.description&&(n.errors.description?{color:"error",helperText:`${n.errors.description}`}:{color:"success"})}),d.jsx(le,{variant:"filled",name:"costPrice",placeholder:"cost price",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.costPrice&&(n.errors.costPrice?{color:"error",helperText:`${n.errors.costPrice}`}:{color:"success"})}),d.jsx(le,{variant:"filled",name:"sellingPrice",placeholder:"selling price",onChange:n.handleChange,onBlur:n.handleBlur,...n.touched.sellingPrice&&(n.errors.sellingPrice?{color:"error",helperText:`${n.errors.sellingPrice}`}:{color:"success"})}),d.jsx("div",{children:d.jsx(po,{id:"id_medicineImage",accept:"image/jpeg, image/png",name:"medicineImage",helperText:"Upload Image",onChange:o,onBlur:n.handleBlur,...n.touched.medicineImage&&(n.errors.medicineImage?{color:"error",helperText:`${n.errors.medicineImage}`}:{color:"success"})})}),d.jsx("button",{type:"submit",className:"w-[full] h-[10%] border rounded-[5%] bg-orange-500 p-2 font-bold",children:"Add Medicine to the Inventory"})]})})]})})})}function TTe(){const[e,t]=T.useState([]),r=async()=>{const n=await bTe();await t(n)};return T.useEffect(()=>{r()},[]),d.jsxs("div",{className:"stockViewScreen w-full h-full p-2 flex flex-col gap-10 overflow-y-scroll",children:[d.jsx(IJ,{}),d.jsxs("div",{className:"w-full h-full mt-20 flex flex-col gap-2",children:[d.jsx("div",{className:"heading w-full  ml-20 mb-10  text-lg text-emerald-400 font-bold flex",children:d.jsx("h2",{children:"Medicine Stocks"})}),e&&e.length>0?d.jsx(CTe,{medicines:e}):d.jsx("span",{className:"w-full h-[70%] mb-10 text-xl font-bold flex flex-1 justify-center items-center ",children:"No medicine Stock.....!!!"})]})]})}function CTe(e){const t=Er(),r=async(i,o)=>{console.log(o),await ETe({inventoryId:o}),t("/pharmacy/stock/viewStocks")},{medicines:n}=e;return d.jsx("div",{className:"w-full h-full mb-10 flex flex-1 justify-center ",children:d.jsxs(yr,{hoverable:!0,className:"w-full gap-x-10 ",children:[d.jsxs(yr.Head,{className:"gap-x-72",children:[d.jsx(yr.HeadCell,{children:"Medicine Name"}),d.jsx(yr.HeadCell,{children:"Description"}),d.jsx(yr.HeadCell,{children:"Type"}),d.jsx(yr.HeadCell,{children:"Stock"}),d.jsx(yr.HeadCell,{children:"cost price"}),d.jsx(yr.HeadCell,{children:"selling price"}),d.jsx(yr.HeadCell,{children:"Image"}),d.jsx(yr.HeadCell,{}),d.jsx(yr.HeadCell,{})]}),d.jsx(yr.Body,{className:"font-bold",children:n.map((i,o)=>d.jsxs(yr.Row,{className:"border-b-4",id:`id_${o}`,children:[d.jsx(yr.Cell,{children:i.medicineId.medicineName}),d.jsx(yr.Cell,{children:i.medicineId.description}),d.jsx(yr.Cell,{children:i.medicineId.medicineType}),d.jsx(yr.Cell,{children:i.stock}),d.jsx(yr.Cell,{children:i.costPrice}),d.jsx(yr.Cell,{children:i.sellingPrice}),d.jsx(yr.Cell,{children:d.jsx("img",{className:"h-14",src:i.medicineImage,alt:"productImage"})}),d.jsx(yr.Cell,{children:d.jsx("img",{className:"h-8 cursor-pointer",src:"/icons/editIcon.png",alt:"editIcon",id:`id_navEdit_${o}`,onClick:()=>{t("/pharmacy/stock/editStock",{state:{inventoryId:i._id}})}})}),d.jsx(yr.Cell,{children:d.jsx("img",{className:"h-8 cursor-pointer opacity-70",src:"/icons/deleteIcon.png",alt:"editIcon",id:`id_btnDelete_${o}`,onClick:a=>{r(a,i._id)}})})]},i._id))})]})})}function xTe(){return d.jsxs("div",{className:"screen w-screen h-screen flex flex-row",children:[d.jsx("div",{className:"fixed header w-[21%] h-[100vh] ",children:d.jsx(pTe,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4 overflow-y-auto",children:d.jsx(gi,{})})]})}function RTe(){const[e,t]=T.useState(void 0),[r,n]=T.useState(void 0),i=Wr({initialValues:{medicineName:"",description:"",costPrice:"",stock:"",sellingPrice:"",medicineType:"",medicineImage:""},validationSchema:yTe,onSubmit:async(u,h)=>{await wTe({medicine:{...u,inventoryId:a}}),await s()}}),o=Em(),{inventoryId:a}=o.state,s=async()=>{const u=await _Te({inventoryId:a});console.log(`temp ${JSON.stringify(u)}`),i.setFieldValue("medicineName",u.medicineId.medicineName),i.setFieldValue("description",u.medicineId.description),i.setFieldValue("medicineType",u.medicineId.medicineType),i.setFieldValue("costPrice",u.costPrice),i.setFieldValue("sellingPrice",u.sellingPrice),i.setFieldValue("medicineImage",u.medicineImage),i.setFieldValue("stock",u.stock),await t(u)},l=async u=>{const h=u.target.files[0],f=new FileReader(h);f.onload=p=>{const m=p.target.result;n(m),i.setFieldValue("medicineImage",h)},f.readAsDataURL(h)},c=u=>{console.log(parseFloat(u.target.value)+1);const h=(100+parseFloat(u.target.value))/100*parseFloat(i.values.costPrice);i.setFieldValue("sellingPrice",h.toFixed(2))};return T.useEffect(()=>{s()},[]),d.jsxs("div",{className:"w-full h-full overflow-y-auto pl-4 pt-5",children:[d.jsx("div",{className:"w-full h-[10%] text-center",children:d.jsx("h2",{className:"text-[5vh] text-emerald-400 font-bold",children:"Medicine Details"})}),d.jsxs("div",{className:"w-full h-full mt-10 flex justify-center gap-10",children:[d.jsxs("form",{onSubmit:i.handleSubmit,className:"w-[50%] flex flex-col gap-5 font-bold",children:[d.jsx(le,{variant:"filled",name:"medicineName",label:"Medicine Name",value:i.values.medicineName,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.medicineName&&(i.errors.medicineName?{color:"error",helperText:`${i.errors.medicineName}`}:{color:"success"})}),d.jsx(le,{variant:"filled",name:"description",label:"Description",value:i.values.description,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.description&&(i.errors.description?{color:"error",helperText:`${i.errors.description}`}:{color:"success"})}),d.jsx(le,{variant:"filled",name:"MedicineType",label:"Medicine Type",value:i.values.medicineType,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.medicineType&&(i.errors.medicineType?{color:"error",helperText:`${i.errors.medicineType}`}:{color:"success"})}),d.jsx(le,{variant:"filled",name:"stock",label:"Stock",type:"number",value:i.values.stock,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.stock&&(i.errors.stock?{color:"error",helperText:`${i.errors.stock}`}:{color:"success"})}),d.jsx(le,{variant:"filled",name:"margin",label:"Margin %",onChange:c}),d.jsx(le,{variant:"filled",name:"costPrice",label:"Cost Price",value:i.values.costPrice,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.costPrice&&(i.errors.costPrice?{color:"error",helperText:`${i.errors.costPrice}`}:{color:"success"})}),d.jsx(le,{variant:"filled",name:"sellingPrice",label:"Selling Price",value:i.values.sellingPrice,onChange:i.handleChange,onBlur:i.handleBlur,...i.touched.sellingPrice&&(i.errors.sellingPrice?{color:"error",helperText:`${i.errors.sellingPrice}`}:{color:"success"})}),d.jsx("button",{type:"submit",className:"w-[full] h-[5vh] border rounded-[5%] bg-orange-500 p-2",children:"Save Details"})]}),d.jsxs("div",{className:"medicineImage w-[30%] flex flex-col gap-10 h-[60%]",children:[d.jsx("img",{src:r||i.values.medicineImage,alt:"medicineImage",className:"h-[70%] w-[70%] shadow-2xl"}),d.jsx("div",{children:d.jsx(po,{helperText:"upload image",id:"id_medicineImage",name:"medicineImage",onChange:l,onBlur:i.handleBlur,...i.touched.medicineImage&&(i.errors.medicineImage?{color:"error",helperText:`${i.errors.medicineImage}`}:{color:"success"})})})]})]})]})}var NJ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},e4=kr.createContext&&kr.createContext(NJ),ITe=["attr","size","title"];function NTe(e,t){if(e==null)return{};var r=ATe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ATe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $w(){return $w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$w.apply(this,arguments)}function t4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Hw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t4(Object(r),!0).forEach(function(n){OTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OTe(e,t,r){return t=kTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kTe(e){var t=PTe(e,"string");return typeof t=="symbol"?t:t+""}function PTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AJ(e){return e&&e.map((t,r)=>kr.createElement(t.tag,Hw({key:r},t.attr),AJ(t.child)))}function Fn(e){return t=>kr.createElement(DTe,$w({attr:Hw({},e.attr)},t),AJ(e.child))}function DTe(e){var t=r=>{var{attr:n,size:i,title:o}=e,a=NTe(e,ITe),s=i||r.size||"1em",l;return r.className&&(l=r.className),e.className&&(l=(l?l+" ":"")+e.className),kr.createElement("svg",$w({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:l,style:Hw(Hw({color:e.color||r.color},r.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&kr.createElement("title",null,o),e.children)};return e4!==void 0?kr.createElement(e4.Consumer,null,r=>t(r)):t(NJ)}function DT(e){return Fn({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.5 0h-12c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h12c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM13 14h-11v-12h11v12zM4 9h7v1h-7zM4 11h7v1h-7zM5 4.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5zM7.5 6h-2c-0.825 0-1.5 0.45-1.5 1v1h5v-1c0-0.55-0.675-1-1.5-1z"},child:[]}]})(e)}function LTe(e){return Fn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function OJ(e){return Fn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"},child:[]}]})(e)}function MTe(e){return Fn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"},child:[]}]})(e)}function p2(e){return Fn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.5 4.5c-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .65.73.45.75.45C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.41.21.75-.19.75-.45V6c-1.49-1.12-3.63-1.5-5.5-1.5zm3.5 14c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"},child:[]}]})(e)}function kJ(e){return Fn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(e)}function m2(e){return Fn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16ZM11 14V16H13V14H11ZM7 14V16H9V14H7ZM15 14V16H17V14H15Z"},child:[]}]})(e)}function jTe(){return d.jsxs("div",{className:"w-full h-[10vh] px-2 text-center font-bold flex justify-center items-center gap-2 ",children:[d.jsxs(Rr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/pharmacy/profile/profileDetails ",children:[d.jsx(DT,{className:"h-full w-[5%]"}),d.jsx("span",{className:"flex flex-1",children:"Profile Details"})]}),d.jsxs(Rr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/pharmacy/profile/contactDetails",children:[d.jsx(p2,{className:"h-full w-[5%]"}),d.jsx("span",{className:"flex flex-1",children:"Contact Details"})]}),d.jsxs(Rr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/pharmacy/profile/passwordReset",children:[d.jsx(m2,{className:"h-full w-[5%]"}),d.jsx("span",{className:"flex flex-1",children:"Password Reset"})]})]})}function UTe(){return d.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[d.jsx(jTe,{}),d.jsx("div",{className:"w-full h-full mt-5 pb-2",children:d.jsx(gi,{})})]})}function LT(e){return Fn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(e)}function jm(e){return Fn({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M308 96c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v44.748c0 6.627 5.373 12 12 12h85.28c27.308 0 48.261 9.958 60.97 27.252H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h158.757c-6.217 36.086-32.961 58.632-74.757 58.632H12c-6.627 0-12 5.373-12 12v53.012c0 3.349 1.4 6.546 3.861 8.818l165.052 152.356a12.001 12.001 0 0 0 8.139 3.182h82.562c10.924 0 16.166-13.408 8.139-20.818L116.871 319.906c76.499-2.34 131.144-53.395 138.318-127.906H308c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-58.69c-3.486-11.541-8.28-22.246-14.252-32H308z"},child:[]}]})(e)}function Gh(e){return Fn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(e)}function FTe(e){return Fn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Video_On"},child:[{tag:"path",attr:{d:"M21.05,5.05a1.433,1.433,0,0,0-1.48.08L16.25,7.37V6.56a2.5,2.5,0,0,0-2.5-2.5H4.69a2.5,2.5,0,0,0-2.5,2.5V17.44a2.5,2.5,0,0,0,2.5,2.5h9.06a2.5,2.5,0,0,0,2.5-2.5v-.81l3.32,2.24a1.5,1.5,0,0,0,.81.24,1.414,1.414,0,0,0,1.43-1.43V6.32A1.437,1.437,0,0,0,21.05,5.05Zm-5.8,12.39a1.5,1.5,0,0,1-1.5,1.5H4.69a1.5,1.5,0,0,1-1.5-1.5V6.56a1.5,1.5,0,0,1,1.5-1.5h9.06a1.5,1.5,0,0,1,1.5,1.5Zm5.56.24a.415.415,0,0,1-.23.38.425.425,0,0,1-.45-.02l-3.88-2.62V8.58l3.88-2.62a.425.425,0,0,1,.45-.02.415.415,0,0,1,.23.38Z"},child:[]}]}]})(e)}function PJ({username:e}){const{email:t}=rn(n=>n.user),r=Wr({initialValues:{password:"",confirmPassword:""},validationSchema:oq,onSubmit:async(n,i)=>{await Nge({password:n.password,email:t})&&(await te.fire({icon:"success",text:"Password has been reset"}),window.location.reload())}});return d.jsx("div",{className:"w-full h-full",children:d.jsxs("form",{onSubmit:r.handleSubmit,className:"w-full h-full flex flex-col gap-6",children:[d.jsx(le,{variant:"filled",label:"New Password",type:"password",name:"password",onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.password&&(r.errors.password?{color:"error",helperText:`${r.errors.password}`}:{color:"success"})}),d.jsx(le,{variant:"filled",label:"Confirm Password",type:"password",name:"confirmPassword",onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.confirmPassword&&(r.errors.confirmPassword?{color:"error",helperText:`${r.errors.confirmPassword}`}:{color:"success"})}),d.jsxs("button",{type:"submit",className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(Gh,{}),"Save"]})]})})}function r4(){return d.jsx("div",{className:"w-full h-full flex flex-col pt-[15vh] items-center",children:d.jsxs("div",{className:"resetPassword w-[40%] h-fit flex flex-col gap-6 border shadow-lg p-5 ",children:[d.jsx("h1",{className:"text-lg font-medium",children:"Reset Password"}),d.jsx(PJ,{})]})})}function VTe(e){const{medicine:t}=e;return console.log(`medicine ${JSON.stringify(t)}`),d.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:d.jsxs("div",{className:"h-full w-full flex flex-col ",children:[d.jsx("div",{className:"w-full h-[50%] ",children:d.jsx("img",{src:t.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[d.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t.medicineId.medicineName}),d.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:d.jsx("div",{className:"price w-full h-[5vh]",children:d.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[d.jsx(jm,{})," ",t.sellingPrice]})})})]}),d.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",children:"Order Medicine"})})]})]})})}const C0="https://hcompanion.onrender.com/api",g2=sessionStorage.getItem("token"),BTe=async()=>{try{const e=await ve.get(`${C0}/patient/medicines/getAllMedicines`);return console.log(e),e.data.medicines}catch(e){console.log(e)}},$Te=async({inventoryId:e})=>{try{const t=await ve.post(`${C0}/patient/medicines/getMedicineDetails`,{inventoryId:e});return console.log(t),t.data.medicine}catch(t){console.log(t)}},HTe=async()=>{try{return(await ve.get(`${C0}/patient/doctor/medicine/requests`,{headers:{Authorization:`bearer ${g2}`}})).data.medicines}catch(e){return console.log(e),!1}},zTe=async({razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,doctorId:n,order:i,pharmacyId:o,pharmacyInventoryId:a})=>{try{const s=await ve.post(`${C0}/patient/doctors/medicine/requests/order`,{razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,doctorId:n,order:i,pharmacyId:o,pharmacyInventoryId:a},{headers:{Authorization:`bearer ${g2}`}});return!0}catch(s){return console.log(s),!1}},GTe=async()=>{try{return(await ve.get(`${C0}/patient/doctors/medicine/requests/ordered`,{headers:{Authorization:`bearer ${g2}`}})).data.medicines}catch(e){return console.log(e),!1}};function WTe(){const e=Er(),[t,r]=T.useState([]),n=async()=>{const o=await BTe();o.length>0&&await r(o)},i=async(o,a)=>{e({pathname:"/patient/medicines/medicineDetails",search:`?${rw({inventoryId:encodeURIComponent(a)})}`})};return T.useEffect(()=>{n()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"medicinesList w-full h-full flex flex px-20 py-5 ",children:d.jsx("div",{className:"w-full h-full p-4 grid grid-cols-4 justify-items-center gap-y-10 ",children:t&&t.length>0?t.map((o,a)=>d.jsx("div",{className:"w-auto h-auto flex flex-col cursor-pointer hover:bg-slate-400 rounded-lg",onClick:s=>i(s,o._id),children:d.jsx(VTe,{medicine:o},o._id)},o._id)):d.jsx("span",{className:"text-lg font-medium",children:"No Medicines.....:)"})})})})}function KTe(){const[e,t]=T.useState(void 0),[r,n]=vW(),i=async()=>{const o=await $Te({inventoryId:decodeURIComponent(r.get("inventoryId"))});t(o)};return T.useEffect(()=>{i()},[r]),d.jsx("div",{className:"w-full h-screen flex flex-col",children:d.jsxs("div",{className:"content w-full h-full grid grid-cols-2 justify-items-center gap-8  ",children:[d.jsx("div",{className:"image w-full h-[70vh] mt-2 flex justify-center ml-10   ",children:d.jsx("img",{src:e&&e.medicineImage,alt:"Medicine Image",className:"h-full w-[70%]"})}),d.jsxs("div",{className:"w-full h-full pl-4 grid grid-cols-1 gap-y-4 place-content-center ",children:[d.jsx("div",{className:"",children:d.jsx("pre",{className:"opacity-50 text-medium font-medium",children:`By pharmacy ${e&&e.pharmacyId.userId.username}`})}),d.jsx("h1",{className:"font-sm text-[6vh] text-emerald-400 ",children:e&&e.medicineId.medicineName}),d.jsx("div",{className:"price w-full h-[10vh] ",children:d.jsxs("span",{className:"w-full h-full text-2xl font-medium flex items-center gap-4",children:[d.jsx(jm,{})," ",e&&e.sellingPrice]})}),d.jsxs("div",{className:"description w-full h-full text-black opacity-60 flex  gap-2 ",children:[d.jsx("h1",{children:"Description : "}),d.jsx("span",{className:"",children:e&&e.medicineId.description})]}),d.jsx("div",{className:"w-full h-[10vh] flex  py-1 mb-2 pr-[40%]",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",children:"Order Medicine"})})]})]})})}function qTe(e){return Fn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 2H6a2 2 0 0 0-2 2v3H2v2h2v2H2v2h2v2H2v2h2v3a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm-8 2.999c1.648 0 3 1.351 3 3A3.012 3.012 0 0 1 13 11c-1.647 0-3-1.353-3-3.001 0-1.649 1.353-3 3-3zM19 18H7v-.75c0-2.219 2.705-4.5 6-4.5s6 2.281 6 4.5V18z"},child:[]}]})(e)}function zw(e){return Fn({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M0 64C0 46.3 14.3 32 32 32l64 0 16 0 176 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-56.2 0c9.6 14.4 16.7 30.6 20.7 48l35.6 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-35.6 0c-13.2 58.3-61.9 103.2-122.2 110.9L274.6 422c14.4 10.3 17.7 30.3 7.4 44.6s-30.3 17.7-44.6 7.4L13.4 314C2.1 306-2.7 291.5 1.5 278.2S18.1 256 32 256l80 0c32.8 0 61-19.7 73.3-48L32 208c-17.7 0-32-14.3-32-32s14.3-32 32-32l153.3 0C173 115.7 144.8 96 112 96L96 96 32 96C14.3 96 0 81.7 0 64z"},child:[]}]})(e)}function x0(e){return Fn({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"},child:[]}]})(e)}function Pb(e){return Fn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-96 55.2C54 332.9 0 401.3 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7c0-81-54-149.4-128-171.1l0 50.8c27.6 7.1 48 32.2 48 62l0 40c0 8.8-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16s7.2-16 16-16l0-24c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 24c8.8 0 16 7.2 16 16s-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16l0-40c0-29.8 20.4-54.9 48-62l0-57.1c-6-.6-12.1-.9-18.3-.9l-91.4 0c-6.2 0-12.3 .3-18.3 .9l0 65.4c23.1 6.9 40 28.3 40 53.7c0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.4 16.9-46.8 40-53.7l0-59.1zM144 448a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"},child:[]}]})(e)}function YTe(){return d.jsxs("div",{className:"screen w-full h-full flex flex-row gap-4",children:[d.jsxs("div",{className:"sideOptions w-[18%] p-4 h-full grid grid-cols-1 gap-6 border shadow-lg shadow-emerald-300",children:[d.jsxs(Rr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/details",children:[d.jsx(DT,{className:"w-[3vw] h-[3vh]"}),"Personal Details",d.jsx("span",{})," "]}),d.jsxs(Rr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/contactDetails",children:[d.jsx(qTe,{className:"w-[3vw] h-[3vh]"}),"Contact Details",d.jsx("span",{})]}),d.jsxs(Rr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/bookings",children:[d.jsx(Pb,{className:"w-[3vw] h-[3vh]"}),"Booking Details",d.jsx("span",{})]}),d.jsxs(Rr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/medicine",children:[d.jsx(Pb,{className:"w-[3vw] h-[3vh]"}),"Medicines",d.jsx("span",{})]}),d.jsxs(Rr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/test",children:[d.jsx(Pb,{className:"w-[3vw] h-[3vh]"}),"Lab Tests",d.jsx("span",{})]}),d.jsxs(Rr,{className:"options p-4 font-medium bg-emerald-400 bg-opacity-20 flex items-center gap-2 border",to:"/patient/profile/prescription",children:[d.jsx(Pb,{className:"w-[3vw] h-[3vh]"}),"Prescriptions",d.jsx("span",{})]})]}),d.jsx("div",{className:"content w-[60%] flex flex-1 flex-col overflow-y-auto",children:d.jsx(gi,{})})]})}const XTe=Ni().shape({firstName:jt(),lastName:jt(),bloodGroup:jt().matches(/^(A|B|AB|O)[+-]$/,"Not a valid Blood Group"),weight:jt().matches(/^[1-9][0-9]{0,5}(\.[0-9]{1,2})?$/,"Valid weight"),height:jt().matches(/^[1-9][0-9]{0,5}(\.[0-9]{1,2})?$/,"Valid height")}),JTe=Ni().shape({place:jt(),state:jt(),country:jt(),pincode:jt().matches(/[1-9][0-9]{5}$/,"Valid Number"),district:jt(),phone:f9().of(jt().matches(/^[1-9][0-9]{9}$/,"not valid number"))});Ni().shape({password:jt(),confirmPassword:jt()});function QTe(){T.useState(void 0);const[e,t]=T.useState(void 0),r=Wr({initialValues:{firstName:"",lastName:"",bloodGroup:"",weight:"",height:"",profileImage:""},validationSchema:XTe,onSubmit:async(o,a)=>{console.log(o),await Iwe(o)&&i()}}),n=o=>{const a=o.target.files[0],s=new FileReader;s.onload=l=>{const c=l.target.result;t(c),r.setFieldValue("profileImage",a)},s.readAsDataURL(a)},i=async()=>{const o=await rJ();console.log(`temp ${JSON.stringify(o)}`),o&&(await r.setFieldValue("firstName",o.firstName),r.setFieldValue("lastName",o.lastName),r.setFieldValue("bloodGroup",o.bloodGroup),r.setFieldValue("weight",o.weight),r.setFieldValue("height",o.height),r.setFieldValue("profileImage",o.profileImage))};return T.useEffect(()=>{i()},[]),console.log(r.values),d.jsxs("form",{onSubmit:r.handleSubmit,className:"screen w-full h-full mt-5 flex flex-col gap-4",children:[d.jsxs("div",{className:"image w-full h-auto flex gap-4 justify-start pl-[20vw]",children:[d.jsx("img",{src:e||r.values.profileImage,className:"rounded-full w-[20vh] h-[20vh]"}),d.jsx("div",{className:"w-full h-auto flex flex-1 items-center ",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{id:"id_profileImage",name:"profileImage",helperText:"upload image",onChange:n,onBlur:r.handleBlur,...r.touched.profileImage&&(r.errors.profileImage?{color:"error",helperText:`${r.errors.profileImage}`}:{color:"success"})})})})]}),d.jsx("div",{className:"w-full h-full mt-10 flex justify-center  ",children:d.jsxs("div",{className:"w-[60%] h-full flex flex-col gap-4",children:[d.jsxs("div",{className:"w-full  grid grid-cols-2 gap-2 ",children:[d.jsx(le,{variant:"filled",name:"firstName",label:"First Name",value:r.values.firstName,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.firstName&&(r.errors.firstName?{color:"error",helperText:`${r.errors.firstName}`}:{color:"success"})}),d.jsx(le,{variant:"filled",name:"lastName",label:"Last Name",value:r.values.lastName,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.lastName&&(r.errors.lastName?{color:"error",helperText:`${r.errors.lastName}`}:{color:"success"})})]}),d.jsx(le,{variant:"filled",name:"bloodGroup",label:"Blood Group",className:"w-full ",value:r.values.bloodGroup,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.bloodGroup&&(r.errors.bloodGroup?{color:"error",helperText:`${r.errors.bloodGroup}`}:{color:"success"})}),d.jsx(le,{variant:"filled",name:"weight",label:"weight",className:"w-full ",value:r.values.weight,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.weight&&(r.errors.weight?{color:"error",helperText:`${r.errors.weight}`}:{color:"success"})}),d.jsx(le,{variant:"filled",name:"height",label:"height",className:"w-full ",value:r.values.height,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.height&&(r.errors.height?{color:"error",helperText:`${r.errors.height}`}:{color:"success"})}),d.jsx("button",{type:"submit",className:"w-[full] h-[5vh] border font-medium rounded-[5%] bg-orange-500 p-2 ",children:"Save"})]})})]})}const ZTe={firstName:"",lastName:"",profileImage:"",weight:"",height:""},DJ=Nm({name:"doctor",initialState:ZTe,reducers:{setDoctor(e,t){e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,e.profileImage=t.payload.profileImage,e.weight=t.payload.weight,e.height=t.payload.height}}}),{setDoctor:Cp}=DJ.actions,eCe=DJ.reducer,LJ="https://hcompanion.onrender.com/api",MJ=async({token:e})=>{try{const t=await ve.get(`${LJ}/doctor/getBasicDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.userData}catch(t){return t.response.status=="401"&&te.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}},jJ=async({token:e})=>{try{const t=await ve.get(`${LJ}/doctor/profile/viewDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.doctorDetails}catch(t){return console.log(t),t.response.status=="401"&&te.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),!1}};ct.extend(ws);const tCe="wss://hcompanion.onrender.com",rCe=async({userId:e})=>{const t=new WebSocket(tCe);t.onopen=()=>{console.log("connected to websocket"),t.send(JSON.stringify({type:"register",clientId:e}))},t.onmessage=r=>{const n=JSON.parse(r==null?void 0:r.data);if(n.type=="meetingReminder"){const i=ct().diff(ct(`${n.booking.startTime}`,"H:mm A"),"minutes");Math.abs(i)<=60&&te.fire(`Meeting in ${Math.abs(i)} minutes`,"","warning")}}};function nCe(){const e=Er(),t=$l(),{username:r,email:n,role:i,isLoggedIn:o}=rn(l=>l.user),a=rn(l=>l.doctor),s=async()=>{if(sessionStorage.getItem("token")){const l=await MJ({token:sessionStorage.getItem("token")});if(l){const c=await jJ({token:sessionStorage.getItem("token")});(c==null?void 0:c.approvalStatus)=="0"?e("/doctor/approval/form"):(c==null?void 0:c.approvalStatus)=="1"&&e("/doctor/approval/submitted"),await rCe({userId:l._id}),console.log(c),t(Xn({username:l.username,email:l.email,role:l.role,isLoggedIn:!0})),t(Cp({firstName:c.firstName,lastName:c.lastName,profileImage:c.profileImage,weight:c.weight,height:c.height,profileImage:c.profileImage}))}else Xn({}),Cp({})}};return console.log(a),T.useEffect(()=>{s()},[]),d.jsx("div",{className:"navBar w-full h-full flex flex-col",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 p-4 bg-slate-800 bg-opacity-90 rounded-tr-[3%]  ",children:[d.jsxs("div",{className:"w-full h-[15vh] flex flex-row items-center gap-4  p-1  ",children:[d.jsx("img",{src:a.profileImage,className:"rounded-full w-[4vw] h-[100%]"}),d.jsxs("div",{className:"h-full w-full pl-4 flex flex-1 flex-col justify-center gap-2 bg-white bg-opacity-40 rounded-lg ",children:[d.jsx("h2",{className:"text-lg font-bold",children:a&&a.firstName?a.firstName:r}),d.jsx("span",{className:" font-sm",children:"Doctor"})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(le,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"options h-full w-full mt-10 flex flex-col gap-4 font-medium text-white ",children:[d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/home")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorSlotSetting.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",id:"id_navSlot",onClick:()=>{e("/doctor/slot")},children:"Slot"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorBookings.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/bookings")},children:"Bookings"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/profile")},children:"Profile"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),t(Xn({})),t(Cp({})),e("/")},children:"sign out"})]})]})]})})}function iCe(){return d.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[d.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:d.jsx(nCe,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:d.jsx(gi,{})})]})}ct.extend(ws);const oCe=ct(),Xg=[];for(var Vx=0;Vx<=5;Vx++)Xg.push(oCe.add(Vx,"day").format("D MMM, dddd YYYY").toString());ct.extend(ws);ct();const aCe=["9:00 AM","11:00 AM","1:00 PM","3:00 PM","5:00 PM","7:00 PM"],y2="https://hcompanion.onrender.com/api",sCe=sessionStorage.getItem("token"),lCe=async({startTime:e,slotDate:t})=>{try{const r=await ve.post(`${y2}/doctor/slot/add`,{startTime:e,slotDate:t},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(r.data),r.data.addedSlot&&te.fire({icon:"success",text:"Added Slot"}),r.data.addedSlot}catch(r){return console.log(`error ${r}`),!1}},n4=async({slotDate:e})=>{var t;try{console.log("token in slot",sCe);const r=await ve.post(`${y2}/doctor/slot/viewSlots`,{slotDate:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(r.data),r.data.slots}catch(r){return console.log(r),((t=r.response)==null?void 0:t.status)=="401"&&te.fire({html:`<b>${r.response.data.message}</b>`,title:"Session Out"}),r.response.status=="400"&&r.response.data.invalidToken&&te.fire({html:`<b>${r.response.status.message}</b>`,title:"Session Out"}),!1}},cCe=async({bookingId:e})=>{try{const t=await ve.post(`${y2}/doctor/slot/removeSlot`,{bookingId:e},{headers:{authorization:`Bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),te.fire({icon:"success",text:"Removed the Slot"}),!0}catch(t){return console.log(`error ${t}`),!1}};ct.extend(ws);function uCe(){const[e,t]=T.useState(void 0),[r,n]=T.useState([]);rn(a=>a.doctor);const i=async()=>{await t(Xg[0]);const a=await n4({slotDate:Xg[0]});console.log(a),await n(a)},o=async a=>{await t(a);const s=await n4({slotDate:a});console.log(s),await n(s)};return T.useEffect(()=>{t(Xg[0]),i()},[]),d.jsx("div",{className:"w-full h-full flex p-4",children:d.jsxs("div",{className:"w-full h-full flex flex-row gap-8",children:[d.jsxs("div",{className:"w-[20%] h-auto p-4 flex flex-col gap-2 border shadow-lg shadow-emerald-400 bg-black bg-opacity-30 rounded-2xl ",children:[d.jsx("h1",{className:"font-bold",children:"Dates"}),d.jsx("div",{className:"dates w-full h-[10%] grid grid-cols-1 justify-items-start gap-4 ",children:Xg.map((a,s)=>d.jsx("button",{className:"p-2 w-full h-full font-medium bg-emerald-400 bg-opacity-50 border flex justify-start pl-5 ",id:`id_slotDate_${s}`,onClick:()=>o(a),children:a},s))})]}),d.jsxs("div",{className:"w-[80%] h-full bg-black bg-opacity-30 rounded-xl  pt-10 pl-8 pr-5 flex flex-col overflow-y-scroll",children:[d.jsxs("h2",{className:"font-bold flex flex-row justify-evenly",children:["Slots ",d.jsx("span",{children:e||"date"})]}),d.jsx("div",{className:"w-full mt-10 gap-4 flex flex-col  p-8 ",children:aCe.map((a,s)=>d.jsx("div",{className:"w-auto h-auto bg-white rounded-lg",children:ct().isBefore(ct(ct(`${e} ${ct(a,"h:mm A").format("H:mm A")}`,"D MMM, dddd YYYY H:mm A").format("D MMM, dddd YYYY H:mm A"),"D MMM, dddd YYYY H:mm A"))&&(r&&r.length>0&&r.some(l=>l.startTime==ct(a,"h:mm A").format("H:mm A").toString())?r.find(l=>l.startTime==ct(a,"h:mm A").format("H:mm A").toString()).bookedStatus==1?d.jsx(hCe,{time:a,onLoad:i,timeIndex:s,slot:r.find(l=>l.startTime==ct(a,"h:mm A").format("H:mm A").toString())}):d.jsx(fCe,{timeIndex:s,time:a,slot:r.find(l=>l.startTime==ct(a,"h:mm A").format("H:mm A").toString()),onLoad:i}):d.jsx(dCe,{timeIndex:s,time:a,selectedDate:e,onLoad:i}))},s))})]})]})})}function dCe(e){const{timeIndex:t}=e,r=async()=>{console.log(`slot date ${e.slotDate}`),await lCe({slotDate:e.selectedDate,startTime:ct(e.time,"h:mm A").format("H:mm A").toString()})&&e.onLoad()};return d.jsxs("div",{className:"w-full h-[15vh] p-4 flex flex-row gap-2 border rounded-lg shadow-lg",children:[d.jsx("div",{className:"w-[20%] flex items-center justify-center border shadow-md",children:d.jsx("span",{className:"text-emerald-400 font-medium text-lg",children:e.time})}),d.jsx("div",{className:"flex flex-1 flex-row gap-10 items-center pl-10 border shadow-md",children:d.jsx("button",{className:"w-[30%] h-[60%] bg-green-400 font-medium border ",id:`id_btnaddslot_${t}`,onClick:r,children:"Add"})})]})}function hCe(e){return d.jsxs("div",{className:"w-full h-[20vh] p-4 bg-red-400 bg-opacity-50 flex flex-row gap-2 border rounded-lg shadow-lg",children:[d.jsx("div",{className:"w-[20%] flex items-center justify-center  shadow-md",children:d.jsx("span",{className:"text-emerald-400 font-medium text-lg",children:e.time})}),d.jsxs("div",{className:"w-full h-full flex flex-1 flex-row gap-10 items-center pl-10 py-2 shadow-md",children:[d.jsx("button",{className:"w-[30%] h-[60%] bg-red-400 font-medium border ",children:"Reschedule"}),d.jsxs("div",{className:"w-full h-full grid grid-cols-1 justify-items-center pt-2 gap-2 ",children:[d.jsx("button",{className:"w-[70%] h-full bg-green-400 font-medium ",children:"View Booking Details "}),d.jsx("span",{className:"w-[70%] h-full  text-center bg-blue-500 flex justify-center items-center text-white font-medium text-md",children:e.slot.patientId.firstName})]})]})]})}function fCe(e){const{timeIndex:t}=e,r=async()=>{await cCe({bookingId:e.slot._id})&&e.onLoad()};return d.jsxs("div",{className:"w-full h-[15vh] p-4 bg-orange-400 bg-opacity-50 flex flex-row gap-2 border rounded-lg shadow-lg",children:[d.jsx("div",{className:"w-[20%] flex items-center justify-center border shadow-md",children:d.jsx("span",{className:"text-emerald-400 font-medium text-lg",children:e.time})}),d.jsx("div",{className:"flex flex-1 flex-row items-center pl-10 border shadow-md",children:d.jsx("button",{className:"w-[30%] h-[60%] bg-red-400 font-medium border ",id:`id_btnRemoveSlot_${t}`,onClick:r,children:"Remove"})})]})}function UJ(e){var n;const t=Er(),r=i=>{t(`/patient/doctors/${i}`)};return d.jsxs("div",{className:"w-auto h-[25vh] flex flex-row gap-1 hover:bg-blue-400 hover:bg-opacity-40 border shadow-xl p-2 rounded-lg",children:[d.jsx("div",{className:"w-[30%] h-full flex gap-4 ",children:d.jsx("img",{src:e.doctor.profileImage,className:"w-full h-full rounded-md"})}),d.jsxs("div",{className:"details w-full h-full pl-2 pt-5 flex flex-row  gap-4 ",children:[d.jsxs("div",{className:"w-[50%] h-full pl-10 pt-1 flex flex-col  gap-4",children:[d.jsx("div",{className:" w-auto",children:d.jsx("span",{className:"text-sm font-medium opacity-40",children:(n=e==null?void 0:e.doctor)==null?void 0:n.specialization})}),d.jsx("span",{className:"text-xl font-medium",children:`Dr. ${e.doctor.userId.username}`}),d.jsx("span",{className:"font-sm opacity-60",children:"16 years of experience"})]}),d.jsxs("div",{className:"w-[50%] h-full pb-8 flex flex-col gap-10 justify-end pr-5",children:[d.jsxs("span",{className:"text-lg font-bold opacity-80 flex justify-end items-center gap-2",children:[d.jsx("span",{className:"font-medium",children:"consultation fee"}),d.jsx(jm,{}),d.jsx("span",{children:e.doctor.bookingPrice})]}),d.jsx("button",{className:"w-full h-[5vh] font-medium border rounded-[5%] bg-orange-500 p-2 hover:bg-opacity-50",onClick:i=>r(e.doctor._id),children:"Book Consult"})]})]})]})}const v2="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const pCe=async()=>{try{const e=await ve.get(`${v2}/patient/doctors/allDoctors`);return console.log(e.data),e.data.doctors}catch(e){return console.log(e),e.response.status=="401"&&te.fire({html:`<b>${e.response.status.message}</b>`,title:"Session Out"}),!1}},i4=async({slotDate:e,doctorId:t})=>{try{const r=await ve.post(`${v2}/patient/doctors/freeSlots`,{slotDate:e,doctorId:t});return console.log(r.data),r.data.slots}catch(r){return console.log(r),!1}},FJ=async({doctorId:e})=>{try{const t=await ve.post(`${v2}/patient/doctors/doctorDetails`,{doctorId:e});return console.log(t.data),t.data.doctor}catch(t){return console.log(t),!1}};function mCe(){const e=Er(),[t,r]=T.useState([]),n=async()=>{const i=await pCe();await r(i)};return T.useEffect(()=>{n()},[]),d.jsx("div",{className:"w-full h-screen flex flex-col",children:d.jsxs("div",{className:"w-full h-full flex flex-row gap-10 pl-10",children:[d.jsx("div",{className:"w-[60%] h-full flex flex-1 flex-col flex-1 gap-10",children:t&&t.length>0&&t.map((i,o)=>d.jsx("div",{className:"w-auto h-auto cursor-pointer ",id:`id_doctor_${o}`,onClick:()=>e(`/patient/doctors/${i._id}`),children:d.jsx(UJ,{doctor:i})},o))}),d.jsx("div",{className:"w-[40%] h-full flex ",children:d.jsx(gi,{})})]})})}ct.extend(ws);const gCe=ct(),VJ=[];for(var Bx=0;Bx<=5;Bx++)VJ.push(gCe.add(Bx,"day").format("D MMM, dddd YYYY").toString());function R0(e){return Fn({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M960 95.888l-256.224.001V32.113c0-17.68-14.32-32-32-32s-32 14.32-32 32v63.76h-256v-63.76c0-17.68-14.32-32-32-32s-32 14.32-32 32v63.76H64c-35.344 0-64 28.656-64 64v800c0 35.343 28.656 64 64 64h896c35.344 0 64-28.657 64-64v-800c0-35.329-28.656-63.985-64-63.985zm0 863.985H64v-800h255.776v32.24c0 17.679 14.32 32 32 32s32-14.321 32-32v-32.224h256v32.24c0 17.68 14.32 32 32 32s32-14.32 32-32v-32.24H960v799.984zM736 511.888h64c17.664 0 32-14.336 32-32v-64c0-17.664-14.336-32-32-32h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32zm0 255.984h64c17.664 0 32-14.32 32-32v-64c0-17.664-14.336-32-32-32h-64c-17.664 0-32 14.336-32 32v64c0 17.696 14.336 32 32 32zm-192-128h-64c-17.664 0-32 14.336-32 32v64c0 17.68 14.336 32 32 32h64c17.664 0 32-14.32 32-32v-64c0-17.648-14.336-32-32-32zm0-255.984h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32h64c17.664 0 32-14.336 32-32v-64c0-17.68-14.336-32-32-32zm-256 0h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32h64c17.664 0 32-14.336 32-32v-64c0-17.68-14.336-32-32-32zm0 255.984h-64c-17.664 0-32 14.336-32 32v64c0 17.68 14.336 32 32 32h64c17.664 0 32-14.32 32-32v-64c0-17.648-14.336-32-32-32z"},child:[]}]})(e)}function yCe(e){return Fn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M8 13C7.44772 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11C8.55228 11 9 11.4477 9 12C9 12.5523 8.55228 13 8 13Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M8 17C7.44772 17 7 16.5523 7 16C7 15.4477 7.44772 15 8 15C8.55228 15 9 15.4477 9 16C9 16.5523 8.55228 17 8 17Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M11 16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M16 17C15.4477 17 15 16.5523 15 16C15 15.4477 15.4477 15 16 15C16.5523 15 17 15.4477 17 16C17 16.5523 16.5523 17 16 17Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M11 12C11 12.5523 11.4477 13 12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M16 13C15.4477 13 15 12.5523 15 12C15 11.4477 15.4477 11 16 11C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9H16C16.5523 9 17 8.55228 17 8C17 7.44772 16.5523 7 16 7H8Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M6 3C4.34315 3 3 4.34315 3 6V18C3 19.6569 4.34315 21 6 21H18C19.6569 21 21 19.6569 21 18V6C21 4.34315 19.6569 3 18 3H6ZM18 5H6C5.44772 5 5 5.44772 5 6V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V6C19 5.44772 18.5523 5 18 5Z",fill:"currentColor"},child:[]}]})(e)}const BJ="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const b2=async({amount:e})=>{try{return(await ve.post(`${BJ}/patient/doctors/slots/payment/createOrder`,{amount:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.order}catch(t){return console.log(t),(t.response.status="401")?te.fire({icon:"error",text:"Login for booking"}):(t.response.status=invalidToken)&&te.fire({icon:"error",text:"Login for booking"}),!1}},vCe=async({razorpay_payment_id:e,razorpay_order_id:t,razorpay_signature:r,order:n,doctorId:i,slotDetails:o})=>{try{const a=sessionStorage.getItem("token"),s=await ve.post(`${BJ}/patient/doctors/slots/payment/paymentVerification`,{razorpay_payment_id:e,razorpay_order_id:t,razorpay_signature:r,order:n,doctorId:i,slotDetails:o},{headers:{Authorization:`bearer ${a}`}});return!0}catch(a){return console.log(a),(a.response.status="401")?te.fire({icon:"error",text:"Login for booking"}):(a.response.status=invalidToken)?te.fire({icon:"error",text:"Login Again"}):(a.response.status="500")&&te.fire({icon:"error",text:"Server issue please try later"}),!1}},bCe=Ni().shape({amount:jt().matches(/^[1-9][0-9]{0,5}(\.[0-9]{1,2})?$/,"Invalid amount")}),Wh="https://hcompanion.onrender.com/api",ECe=sessionStorage.getItem("token"),_Ce=async()=>{try{return(await ve.get(`${Wh}/patient/tests/getAllTestAvailable`)).data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):e.status=="401"?te.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorTestPresent&&te.fire({icon:"warning",text:"Test can't be found at database"}),!1}},wCe=async({testId:e})=>{try{const t=await ve.post(`${Wh}/patient/tests/testDetails`,{testId:e});return console.log(t.data),t.data.testAndLabs}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):t.status=="401"?te.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&te.fire({icon:"warning",text:"Test can't be found at database"}),!1}},SCe=async()=>{try{const e=await ve.get(`${Wh}/patient/doctor/test/requests`,{headers:{Authorization:`bearer ${ECe}`}});return console.log(e.data),e.data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):e.status=="401"?te.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorNoPatient&&te.fire({icon:"warning",text:"Patient Can't be found"}),!1}},TCe=async({razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,order:n,labId:i,testOrderId:o})=>{try{const a=await ve.post(`${Wh}/patient/doctor/test/requests/order`,{razorpay_order_id:e,razorpay_payment_id:t,razorpay_signature:r,order:n,labId:i,testOrderId:o},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return!0}catch(a){return console.log(a),a.status=="500"&&a.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):a.status=="400"&&a.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):a.status=="401"?te.fire({icon:"warning",text:"Log In"}):a.status=="404"&&a.response.data.errorNoPatient&&te.fire({icon:"warning",text:"Patient Can't be found"}),!1}},CCe=async()=>{try{const e=await ve.get(`${Wh}/patient/doctor/test/requests/ordered`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("ordered tests",e.data.orders),e.data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):e.status=="401"?te.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorNoPatient&&te.fire({icon:"warning",text:"Patient Can't be found"}),!1}},xCe=async({testOrderId:e})=>{try{const t=await ve.post(`${Wh}/patient/doctor/test/requests/complete/result`,{testOrderId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.result}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):t.status=="401"?te.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&te.fire({icon:"warning",text:"Test can't be found at database"}),!1}},RCe=async({testOrderId:e})=>{try{return(await ve.post(`${Wh}/patient/doctor/test/requests/completed/orderDetails`,{testOrderId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.order}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):t.status=="401"?te.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&te.fire({icon:"error",text:"Issue at the Database"}),!1}},E2=void 0,ICe=(e,t)=>{const{order:r,patient:n,user:i,doctor:o}=e;return{key:E2,amount:e.amount*1e3,currency:"INR",name:"Health Companion",description:"Book Patient",image:"/logo.png",order_id:e.order.id,handler:async function(a){console.log("enterd payment handler"),await vCe({razorpay_order_id:a.razorpay_order_id,razorpay_payment_id:a.razorpay_payment_id,razorpay_signature:a.razorpay_signature,doctorId:o._id,order:r,slotDetails:t})?te.fire({icon:"success",text:"The slot has been booked"}):te.fire({icon:"error",text:"The slot has been booked"})},prefill:{name:e.patient.firstName,email:e.user.email,contact:e.user.phone||"7902249173","card[number]":"4111 1111 1111 1111","card[expiry]":"12/30","card[cvv]":"123"},notes:{address:"Health Companion Office"},theme:{color:"#3399cc"}}},NCe=(e,t)=>{var i,o,a,s;const{order:r,medicineOrder:n}=e;return{key:E2,amount:e.amount*1e3,currency:"INR",name:"Health Companion",description:"Book Medicine",image:"/logo.png",order_id:e.order.id,handler:async function(l){await zTe({razorpay_order_id:l.razorpay_order_id,razorpay_payment_id:l.razorpay_payment_id,razorpay_signature:l.razorpay_signature,doctorId:n.pharmacyInventoryId.la,order:r,pharmacyId:n.pharmacyInventoryId.pharmacyId._id,pharmacyInventoryId:n.pharmacyInventoryId._id})&&te.fire("Medicine has been ordere","","success")},prefill:{name:n.patientId.firstName,email:(o=(i=n==null?void 0:n.patientId)==null?void 0:i.userId)==null?void 0:o.email,contact:(s=(a=n==null?void 0:n.patientId)==null?void 0:a.userId)==null?void 0:s.phone},notes:{address:"Health Companion Office"},theme:{color:"#3399cc"}}},ACe=(e,t)=>{var i,o,a,s;const{order:r,testOrder:n}=e;return{key:E2,amount:e.amount*1e3,currency:"INR",name:"Health Companion",description:"Book Test",image:"/logo.png",order_id:e.order.id,handler:async function(l){await TCe({razorpay_order_id:l.razorpay_order_id,razorpay_payment_id:l.razorpay_payment_id,razorpay_signature:l.razorpay_signature,labId:n.labTestId.labId._id,order:r,testOrderId:n._id})&&te.fire("Test has been ordered","","success")},prefill:{name:n.patientId.firstName,email:(o=(i=n==null?void 0:n.patientId)==null?void 0:i.userId)==null?void 0:o.email,contact:(s=(a=n==null?void 0:n.patientId)==null?void 0:a.userId)==null?void 0:s.phone},notes:{address:"Health Companion Office"},theme:{color:"#3399cc"}}};ct.extend(ws);function OCe(){const[e,t]=T.useState(ct().format("D MMM, dddd YYYY").toString()),[r,n]=T.useState(void 0),[i,o]=T.useState(void 0),[a,s]=T.useState([]),[l,c]=T.useState(void 0),[u,h]=T.useState(!1),{doctorId:f}=_m();rn(y=>y.patient),$l();const p=async()=>{const y=await FJ({doctorId:f});await c(y);const v=ct().format("D MMM, dddd YYYY").toString();t(v);const b=await i4({slotDate:v,doctorId:f});s(b)};T.useEffect(()=>{p()},[f]);const m=async y=>{const v=JSON.parse(y.target.value);console.log(`slot ${JSON.stringify(v)}`),await o(v),await n(ct(v.startTime,"H:mm A").format("h:mm A").toString()),await h(!u)},g=async y=>{y=ct(y,"D ,ddd").format("D MMM, dddd YYYY").toString(),t(y);const v=await i4({slotDate:y,doctorId:f});s(v)};return d.jsxs("div",{className:"w-full h-full",children:[u&&d.jsx(kCe,{openModal:u,setOpenModal:h,time:r,slotDate:e,selectedSlot:i,doctor:l,slotTime:r}),d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 pt-5 overflow-y-scroll pr-2 ",children:[d.jsxs("div",{className:"w-full h-auto px-8 bg-black bg-opacity-20 flex flex-col gap-4 border py-5 rounded-tl-xl shadow-xl",children:[d.jsxs("div",{className:"date w-full h-[10vh] bg-blue-500 rounded-md  flex gap-6 items-center",children:[d.jsx(R0,{className:"h-full w-[6vh]  p-2"}),d.jsx("h2",{className:"text-white font-medium ",children:"Dates"}),d.jsxs("div",{className:"flex flex-1 gap-5 justify-end w-full h-full items-center pr-5",children:[d.jsx("span",{className:"text-white text-md font-medium",children:l&&l.userId.username}),d.jsx("img",{src:l&&l.profileImage,alt:"profile",className:"w-[3vw] h-[7vh] rounded-full"})]})]}),d.jsx("div",{className:"w-full h-auto flex ",children:d.jsx("div",{className:"w-full h-auto grid grid-cols-3 justify-items-center gap-4 p-1",children:VJ.map((y,v)=>d.jsx("button",{className:"w-[10vw] h-[8vh] font-medium text-white bg-slate-700 bg-opacity-70 border shadow-md rounded-lg p-6",id:`id_slotDate_${v}`,onClick:()=>g(y),children:ct(y,"D MMM, dddd YYYY").format("DD ,ddd").toString()},v))})})]}),d.jsxs("div",{className:"w-full h-full bg-black bg-opacity-20 flex flex-col gap-10 mt-5 p-5 border shadow-lg rounded-lg",children:[d.jsxs("div",{className:"w-full h-[10vh] bg-orange-500 text-white flex items-center gap-4 justify-evenly  rounded-md pl-2",children:[d.jsx(OJ,{className:"w-[5vw] h-[5vh]"}),d.jsx("h2",{className:"text-lg font-medium",children:e&&e})]}),d.jsx("div",{className:"w-full h-full grid grid-cols-3 justify-items-center content-start",children:a&&a.length>0&&a.map((y,v)=>d.jsx("button",{value:JSON.stringify(y),className:"w-auto h-auto border p-6 rounded-lg bg-green-400 font-medium shadow-lg",id:`id_slotTime_${v}`,onClick:m,children:ct(y.startTime,"H:mm A").format("h:mm A").toString()},v))})]})]})]})}function kCe(e){const{setOpenModal:t,openModal:r,doctor:n,time:i,slotDate:o,selectedSlot:a}=e,s=rn(u=>u.patient),l=rn(u=>u.user),c=Wr({initialValues:{amount:500,patientdDescription:"",slotId:a._id},validationSchema:bCe,onSubmit:async(u,h)=>{const f=await b2({amount:n.bookingPrice});if(await console.log("order",f),f){const p=await ICe({order:f,patient:s,user:l,doctor:n},u);try{const m=new Razorpay(p);console.log("reached before razor pay"),await m.open()}catch(m){console.log("error during payment",m)}}t(!1)}});return T.useEffect(()=>{c.setFieldValue("slotId",a._id),c.setFieldValue("amount",n.bookingPrice)},[]),d.jsx("div",{children:d.jsxs(Ab,{show:r,onClose:()=>t(!1),children:[d.jsx(Ab.Header,{children:"Slot Details"}),d.jsxs(Ab.Body,{className:"h-auto flex flex-col gap-4",children:[d.jsx("div",{className:"w-full h-[15vh] flex justify-end pr-5",children:d.jsxs("div",{className:"flex gap-5 items-center",children:[d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("span",{className:"text-lg font-medium",children:n&&n.userId.username}),d.jsx("span",{className:"text-sm font-medium opacity-50",children:"Cardiology"})]}),d.jsx("img",{src:n.profileImage,alt:"profile",className:"h-[9vh] w-[4vw] rounded-full"})]})}),d.jsxs("div",{className:"flex gap-4 h-auto items-center bg-blue-500 p-2 text-white",children:[d.jsx(yCe,{className:"h-full w-[3vw]"}),d.jsx("span",{className:"text-xl font-medium h-auto",children:e.slotDate})]}),d.jsxs("div",{className:"flex gap-4 h-auto items-center bg-orange-500 p-2 text-white",children:[d.jsx(OJ,{className:"h-full w-[3vw]"}),d.jsx("span",{className:"text-md font-medium h-auto",children:e.slotTime})]}),d.jsxs("div",{className:"h-[50vh]  w-full flex flex-col gap-2",children:[d.jsx("h2",{className:"font-medium opacity-40",children:"Description (Optional)"}),d.jsx("textarea",{name:"description",onChange:u=>{c.setFieldValue("patientDescription",u.target.value)},id:"id_description",placeholder:"Write down a short description on the purpose of the booking",className:"flex flex-1  "})]})]}),d.jsxs(Ab.Footer,{className:"gap-x-5 w-full flex flex-row",children:[d.jsx("button",{type:"submit",onClick:c.handleSubmit,className:"w-[40%] border rounded-[5%] bg-orange-500 p-2",id:"id_btnBookSlot",children:"Book"}),d.jsx("button",{type:"button",className:"w-[40%] border rounded-[5%] bg-red-500 p-2",onClick:()=>t(!1),children:"cancel"})]})]})})}sessionStorage.getItem("token");const $J=async({diseaseName:e})=>{try{const t=await ve.post("http://localhost:8000/predict",{"Medical Condition":e.toLowerCase(),"Blood Type":"O+",Gender:"Male"});return console.log(t.data),t.data.doctor}catch(t){console.log(t)}};var o4;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(o4||(o4={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a4;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(a4||(a4={}));var s4;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(s4||(s4={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=["user","model","function","system"];var c4;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(c4||(c4={}));var u4;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(u4||(u4={}));var d4;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(d4||(d4={}));var h4;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(h4||(h4={}));var xy;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(xy||(xy={}));var f4;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(f4||(f4={}));var p4;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(p4||(p4={}));var m4;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(m4||(m4={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class mf extends mo{constructor(t,r){super(t),this.response=r}}class HJ extends mo{constructor(t,r,n,i){super(t),this.status=r,this.statusText=n,this.errorDetails=i}}class Fu extends mo{}class zJ extends mo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PCe="https://generativelanguage.googleapis.com",DCe="v1beta",LCe="0.24.0",MCe="genai-js";var Ih;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ih||(Ih={}));class jCe{constructor(t,r,n,i,o){this.model=t,this.task=r,this.apiKey=n,this.stream=i,this.requestOptions=o}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||DCe;let o=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||PCe}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function UCe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${MCe}/${LCe}`),t.join(" ")}async function FCe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",UCe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(i){throw new Fu(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${i.message}`)}for(const[i,o]of n.entries()){if(i==="x-goog-api-key")throw new Fu(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Fu(`Header name ${i} can only be set using the apiClient field`);r.append(i,o)}}return r}async function VCe(e,t,r,n,i,o){const a=new jCe(e,t,r,n,o);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},zCe(o)),{method:"POST",headers:await FCe(a),body:i})}}async function I0(e,t,r,n,i,o={},a=fetch){const{url:s,fetchOptions:l}=await VCe(e,t,r,n,i,o);return BCe(s,l,a)}async function BCe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(i){$Ce(i,e)}return n.ok||await HCe(n,e),n}function $Ce(e,t){let r=e;throw r.name==="AbortError"?(r=new zJ(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof HJ||e instanceof Fu||(r=new mo(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function HCe(e,t){let r="",n;try{const i=await e.json();r=i.error.message,i.error.details&&(r+=` ${JSON.stringify(i.error.details)}`,n=i.error.details)}catch{}throw new HJ(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function zCe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),e_(e.candidates[0]))throw new mf(`${du(e)}`,e);return GCe(e)}else if(e.promptFeedback)throw new mf(`Text not available. ${du(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),e_(e.candidates[0]))throw new mf(`${du(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),g4(e)[0]}else if(e.promptFeedback)throw new mf(`Function call not available. ${du(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),e_(e.candidates[0]))throw new mf(`${du(e)}`,e);return g4(e)}else if(e.promptFeedback)throw new mf(`Function call not available. ${du(e)}`,e)},e}function GCe(e){var t,r,n,i;const o=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const a of(i=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)a.text&&o.push(a.text),a.executableCode&&o.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&o.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function g4(e){var t,r,n,i;const o=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const a of(i=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)a.functionCall&&o.push(a.functionCall);if(o.length>0)return o}const WCe=[xy.RECITATION,xy.SAFETY,xy.LANGUAGE];function e_(e){return!!e.finishReason&&WCe.includes(e.finishReason)}function du(e){var t,r,n;let i="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)i+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(i+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const o=e.candidates[0];e_(o)&&(i+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(i+=`: ${o.finishMessage}`))}return i}function Tv(e){return this instanceof Tv?(this.v=e,this):new Tv(e)}function KCe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(f){n[f]&&(i[f]=function(p){return new Promise(function(m,g){o.push([f,p,m,g])>1||s(f,p)})})}function s(f,p){try{l(n[f](p))}catch(m){h(o[0][3],m)}}function l(f){f.value instanceof Tv?Promise.resolve(f.value.v).then(c,u):h(o[0][2],f)}function c(f){s("next",f)}function u(f){s("throw",f)}function h(f,p){f(p),o.shift(),o.length&&s(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function qCe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=JCe(t),[n,i]=r.tee();return{stream:XCe(n),response:YCe(i)}}async function YCe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:i}=await r.read();if(n)return _2(QCe(t));t.push(i)}}function XCe(e){return KCe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:i}=yield Tv(r.read());if(i)break;yield yield Tv(_2(n))}})}function JCe(e){const t=e.getReader();return new ReadableStream({start(n){let i="";return o();function o(){return t.read().then(({value:a,done:s})=>{if(s){if(i.trim()){n.error(new mo("Failed to parse stream"));return}n.close();return}i+=a;let l=i.match(y4),c;for(;l;){try{c=JSON.parse(l[1])}catch{n.error(new mo(`Error parsing JSON response: "${l[1]}"`));return}n.enqueue(c),i=i.substring(l[0].length),l=i.match(y4)}return o()}).catch(a=>{let s=a;throw s.stack=a.stack,s.name==="AbortError"?s=new zJ("Request aborted when reading from the stream"):s=new mo("Error reading from the stream"),s})}}})}function QCe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let i=0;for(const o of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[i]||(r.candidates[i]={index:i}),r.candidates[i].citationMetadata=o.citationMetadata,r.candidates[i].groundingMetadata=o.groundingMetadata,r.candidates[i].finishReason=o.finishReason,r.candidates[i].finishMessage=o.finishMessage,r.candidates[i].safetyRatings=o.safetyRatings,o.content&&o.content.parts){r.candidates[i].content||(r.candidates[i].content={role:o.content.role||"user",parts:[]});const a={};for(const s of o.content.parts)s.text&&(a.text=s.text),s.functionCall&&(a.functionCall=s.functionCall),s.executableCode&&(a.executableCode=s.executableCode),s.codeExecutionResult&&(a.codeExecutionResult=s.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),r.candidates[i].content.parts.push(a)}i++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GJ(e,t,r,n){const i=await I0(t,Ih.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return qCe(i)}async function WJ(e,t,r,n){const o=await(await I0(t,Ih.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:_2(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KJ(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Cv(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return ZCe(t)}function ZCe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,i=!1;for(const o of e)"functionResponse"in o?(r.parts.push(o),i=!0):(t.parts.push(o),n=!0);if(n&&i)throw new mo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!i)throw new mo("No content is provided for sending chat message.");return n?t:r}function exe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const i=e.generateContentRequest!=null;if(e.contents){if(i)throw new Fu("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(i)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const o=Cv(e);n.contents=[o]}return{generateContentRequest:n}}function v4(e){let t;return e.contents?t=e:t={contents:[Cv(e)]},e.systemInstruction&&(t.systemInstruction=KJ(e.systemInstruction)),t}function txe(e){return typeof e=="string"||Array.isArray(e)?{content:Cv(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],rxe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function nxe(e){let t=!1;for(const r of e){const{role:n,parts:i}=r;if(!t&&n!=="user")throw new mo(`First content should be with role 'user', got ${n}`);if(!l4.includes(n))throw new mo(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(l4)}`);if(!Array.isArray(i))throw new mo("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new mo("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const s of i)for(const l of b4)l in s&&(o[l]+=1);const a=rxe[n];for(const s of b4)if(!a.includes(s)&&o[s]>0)throw new mo(`Content with role '${n}' can't contain '${s}' part`);t=!0}}function E4(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="SILENT_ERROR";class ixe{constructor(t,r,n,i={}){this.model=r,this.params=n,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(nxe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,i,o,a,s,l;await this._sendPromise;const c=Cv(t),u={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),r);let f;return this._sendPromise=this._sendPromise.then(()=>WJ(this._apiKey,this.model,u,h)).then(p=>{var m;if(E4(p.response)){this._history.push(c);const g=Object.assign({parts:[],role:"model"},(m=p.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(g)}else{const g=du(p.response);g&&console.warn(`sendMessage() was unsuccessful. ${g}. Inspect response object for details.`)}f=p}),await this._sendPromise,f}async sendMessageStream(t,r={}){var n,i,o,a,s,l;await this._sendPromise;const c=Cv(t),u={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),r),f=GJ(this._apiKey,this.model,u,h);return this._sendPromise=this._sendPromise.then(()=>f).catch(p=>{throw new Error(_4)}).then(p=>p.response).then(p=>{if(E4(p)){this._history.push(c);const m=Object.assign({},p.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{const m=du(p);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(p=>{p.message!==_4&&console.error(p)}),f}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oxe(e,t,r,n){return(await I0(t,Ih.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function axe(e,t,r,n){return(await I0(t,Ih.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function sxe(e,t,r,n){const i=r.requests.map(a=>Object.assign(Object.assign({},a),{model:t}));return(await I0(t,Ih.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=KJ(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const i=v4(t),o=Object.assign(Object.assign({},this._requestOptions),r);return WJ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),o)}async generateContentStream(t,r={}){var n;const i=v4(t),o=Object.assign(Object.assign({},this._requestOptions),r);return GJ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),o)}startChat(t){var r;return new ixe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=exe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),r);return oxe(this.apiKey,this.model,n,i)}async embedContent(t,r={}){const n=txe(t),i=Object.assign(Object.assign({},this._requestOptions),r);return axe(this.apiKey,this.model,n,i)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return sxe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lxe{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new mo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new w4(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new Fu("Cached content must contain a `name` field.");if(!t.model)throw new Fu("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const a of i)if(r!=null&&r[a]&&t[a]&&(r==null?void 0:r[a])!==t[a]){if(a==="model"){const s=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(s===l)continue}throw new Fu(`Different value for "${a}" specified in modelParams (${r[a]}) and cachedContent (${t[a]})`)}const o=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new w4(this.apiKey,o,n)}}function cxe(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const uxe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,dxe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,hxe={};function S4(e,t){return(hxe.jsx?dxe:uxe).test(e)}const fxe=/[ \t\n\f\r]/g;function pxe(e){return typeof e=="object"?e.type==="text"?T4(e.value):!1:T4(e)}function T4(e){return e.replace(fxe,"")===""}class N0{constructor(t,r,n){this.normal=r,this.property=t,n&&(this.space=n)}}N0.prototype.normal={};N0.prototype.property={};N0.prototype.space=void 0;function qJ(e,t){const r={},n={};for(const i of e)Object.assign(r,i.property),Object.assign(n,i.normal);return new N0(r,n,t)}function uO(e){return e.toLowerCase()}class la{constructor(t,r){this.attribute=r,this.property=t}}la.prototype.attribute="";la.prototype.booleanish=!1;la.prototype.boolean=!1;la.prototype.commaOrSpaceSeparated=!1;la.prototype.commaSeparated=!1;la.prototype.defined=!1;la.prototype.mustUseProperty=!1;la.prototype.number=!1;la.prototype.overloadedBoolean=!1;la.prototype.property="";la.prototype.spaceSeparated=!1;la.prototype.space=void 0;let mxe=0;const zt=Kh(),fi=Kh(),YJ=Kh(),ke=Kh(),an=Kh(),xp=Kh(),pa=Kh();function Kh(){return 2**++mxe}const dO=Object.freeze(Object.defineProperty({__proto__:null,boolean:zt,booleanish:fi,commaOrSpaceSeparated:pa,commaSeparated:xp,number:ke,overloadedBoolean:YJ,spaceSeparated:an},Symbol.toStringTag,{value:"Module"})),$x=Object.keys(dO);class w2 extends la{constructor(t,r,n,i){let o=-1;if(super(t,r),C4(this,"space",i),typeof n=="number")for(;++o<$x.length;){const a=$x[o];C4(this,$x[o],(n&dO[a])===dO[a])}}}w2.prototype.defined=!0;function C4(e,t,r){r&&(e[t]=r)}function Um(e){const t={},r={};for(const[n,i]of Object.entries(e.properties)){const o=new w2(n,e.transform(e.attributes||{},n),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(o.mustUseProperty=!0),t[n]=o,r[uO(n)]=n,r[uO(o.attribute)]=n}return new N0(t,r,e.space)}const XJ=Um({properties:{ariaActiveDescendant:null,ariaAtomic:fi,ariaAutoComplete:null,ariaBusy:fi,ariaChecked:fi,ariaColCount:ke,ariaColIndex:ke,ariaColSpan:ke,ariaControls:an,ariaCurrent:null,ariaDescribedBy:an,ariaDetails:null,ariaDisabled:fi,ariaDropEffect:an,ariaErrorMessage:null,ariaExpanded:fi,ariaFlowTo:an,ariaGrabbed:fi,ariaHasPopup:null,ariaHidden:fi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:an,ariaLevel:ke,ariaLive:null,ariaModal:fi,ariaMultiLine:fi,ariaMultiSelectable:fi,ariaOrientation:null,ariaOwns:an,ariaPlaceholder:null,ariaPosInSet:ke,ariaPressed:fi,ariaReadOnly:fi,ariaRelevant:null,ariaRequired:fi,ariaRoleDescription:an,ariaRowCount:ke,ariaRowIndex:ke,ariaRowSpan:ke,ariaSelected:fi,ariaSetSize:ke,ariaSort:null,ariaValueMax:ke,ariaValueMin:ke,ariaValueNow:ke,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function JJ(e,t){return t in e?e[t]:t}function QJ(e,t){return JJ(e,t.toLowerCase())}const gxe=Um({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:xp,acceptCharset:an,accessKey:an,action:null,allow:null,allowFullScreen:zt,allowPaymentRequest:zt,allowUserMedia:zt,alt:null,as:null,async:zt,autoCapitalize:null,autoComplete:an,autoFocus:zt,autoPlay:zt,blocking:an,capture:null,charSet:null,checked:zt,cite:null,className:an,cols:ke,colSpan:null,content:null,contentEditable:fi,controls:zt,controlsList:an,coords:ke|xp,crossOrigin:null,data:null,dateTime:null,decoding:null,default:zt,defer:zt,dir:null,dirName:null,disabled:zt,download:YJ,draggable:fi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:zt,formTarget:null,headers:an,height:ke,hidden:zt,high:ke,href:null,hrefLang:null,htmlFor:an,httpEquiv:an,id:null,imageSizes:null,imageSrcSet:null,inert:zt,inputMode:null,integrity:null,is:null,isMap:zt,itemId:null,itemProp:an,itemRef:an,itemScope:zt,itemType:an,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:zt,low:ke,manifest:null,max:null,maxLength:ke,media:null,method:null,min:null,minLength:ke,multiple:zt,muted:zt,name:null,nonce:null,noModule:zt,noValidate:zt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:zt,optimum:ke,pattern:null,ping:an,placeholder:null,playsInline:zt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:zt,referrerPolicy:null,rel:an,required:zt,reversed:zt,rows:ke,rowSpan:ke,sandbox:an,scope:null,scoped:zt,seamless:zt,selected:zt,shadowRootClonable:zt,shadowRootDelegatesFocus:zt,shadowRootMode:null,shape:null,size:ke,sizes:null,slot:null,span:ke,spellCheck:fi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ke,step:null,style:null,tabIndex:ke,target:null,title:null,translate:null,type:null,typeMustMatch:zt,useMap:null,value:fi,width:ke,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:an,axis:null,background:null,bgColor:null,border:ke,borderColor:null,bottomMargin:ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:zt,declare:zt,event:null,face:null,frame:null,frameBorder:null,hSpace:ke,leftMargin:ke,link:null,longDesc:null,lowSrc:null,marginHeight:ke,marginWidth:ke,noResize:zt,noHref:zt,noShade:zt,noWrap:zt,object:null,profile:null,prompt:null,rev:null,rightMargin:ke,rules:null,scheme:null,scrolling:fi,standby:null,summary:null,text:null,topMargin:ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:zt,disableRemotePlayback:zt,prefix:null,property:null,results:ke,security:null,unselectable:null},space:"html",transform:QJ}),yxe=Um({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:pa,accentHeight:ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ke,amplitude:ke,arabicForm:null,ascent:ke,attributeName:null,attributeType:null,azimuth:ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ke,by:null,calcMode:null,capHeight:ke,className:an,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ke,diffuseConstant:ke,direction:null,display:null,dur:null,divisor:ke,dominantBaseline:null,download:zt,dx:null,dy:null,edgeMode:null,editable:null,elevation:ke,enableBackground:null,end:null,event:null,exponent:ke,externalResourcesRequired:null,fill:null,fillOpacity:ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:xp,g2:xp,glyphName:xp,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ke,horizOriginX:ke,horizOriginY:ke,id:null,ideographic:ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ke,k:ke,k1:ke,k2:ke,k3:ke,k4:ke,kernelMatrix:pa,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ke,overlineThickness:ke,paintOrder:null,panose1:null,path:null,pathLength:ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:an,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ke,pointsAtY:ke,pointsAtZ:ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:pa,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:pa,rev:pa,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:pa,requiredFeatures:pa,requiredFonts:pa,requiredFormats:pa,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ke,specularExponent:ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ke,strikethroughThickness:ke,string:null,stroke:null,strokeDashArray:pa,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ke,strokeOpacity:ke,strokeWidth:null,style:null,surfaceScale:ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:pa,tabIndex:ke,tableValues:null,target:null,targetX:ke,targetY:ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:pa,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ke,underlineThickness:ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ke,values:null,vAlphabetic:ke,vMathematical:ke,vectorEffect:null,vHanging:ke,vIdeographic:ke,version:null,vertAdvY:ke,vertOriginX:ke,vertOriginY:ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:JJ}),ZJ=Um({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),e1=Um({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:QJ}),t1=Um({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),vxe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},bxe=/[A-Z]/g,x4=/-[a-z]/g,Exe=/^data[-\w.:]+$/i;function _xe(e,t){const r=uO(t);let n=t,i=la;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&Exe.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(x4,Sxe);n="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!x4.test(o)){let a=o.replace(bxe,wxe);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=w2}return new i(n,t)}function wxe(e){return"-"+e.toLowerCase()}function Sxe(e){return e.charAt(1).toUpperCase()}const Txe=qJ([XJ,gxe,ZJ,e1,t1],"html"),S2=qJ([XJ,yxe,ZJ,e1,t1],"svg");function Cxe(e){return e.join(" ").trim()}var T2={},R4=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,xxe=/\n/g,Rxe=/^\s*/,Ixe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Nxe=/^:\s*/,Axe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Oxe=/^[;\s]*/,kxe=/^\s+|\s+$/g,Pxe=`
`,I4="/",N4="*",Ud="",Dxe="comment",Lxe="declaration",Mxe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,n=1;function i(m){var g=m.match(xxe);g&&(r+=g.length);var y=m.lastIndexOf(Pxe);n=~y?m.length-y:n+m.length}function o(){var m={line:r,column:n};return function(g){return g.position=new a(m),c(),g}}function a(m){this.start=m,this.end={line:r,column:n},this.source=t.source}a.prototype.content=e;function s(m){var g=new Error(t.source+":"+r+":"+n+": "+m);if(g.reason=m,g.filename=t.source,g.line=r,g.column=n,g.source=e,!t.silent)throw g}function l(m){var g=m.exec(e);if(g){var y=g[0];return i(y),e=e.slice(y.length),g}}function c(){l(Rxe)}function u(m){var g;for(m=m||[];g=h();)g!==!1&&m.push(g);return m}function h(){var m=o();if(!(I4!=e.charAt(0)||N4!=e.charAt(1))){for(var g=2;Ud!=e.charAt(g)&&(N4!=e.charAt(g)||I4!=e.charAt(g+1));)++g;if(g+=2,Ud===e.charAt(g-1))return s("End of comment missing");var y=e.slice(2,g-2);return n+=2,i(y),e=e.slice(g),n+=2,m({type:Dxe,comment:y})}}function f(){var m=o(),g=l(Ixe);if(g){if(h(),!l(Nxe))return s("property missing ':'");var y=l(Axe),v=m({type:Lxe,property:A4(g[0].replace(R4,Ud)),value:y?A4(y[0].replace(R4,Ud)):Ud});return l(Oxe),v}}function p(){var m=[];u(m);for(var g;g=f();)g!==!1&&(m.push(g),u(m));return m}return c(),p()};function A4(e){return e?e.replace(kxe,Ud):Ud}var jxe=Wu&&Wu.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(T2,"__esModule",{value:!0});T2.default=Fxe;var Uxe=jxe(Mxe);function Fxe(e,t){var r=null;if(!e||typeof e!="string")return r;var n=(0,Uxe.default)(e),i=typeof t=="function";return n.forEach(function(o){if(o.type==="declaration"){var a=o.property,s=o.value;i?t(a,s,o):s&&(r=r||{},r[a]=s)}}),r}var MT={};Object.defineProperty(MT,"__esModule",{value:!0});MT.camelCase=void 0;var Vxe=/^--[a-zA-Z0-9_-]+$/,Bxe=/-([a-z])/g,$xe=/^[^-]+$/,Hxe=/^-(webkit|moz|ms|o|khtml)-/,zxe=/^-(ms)-/,Gxe=function(e){return!e||$xe.test(e)||Vxe.test(e)},Wxe=function(e,t){return t.toUpperCase()},O4=function(e,t){return"".concat(t,"-")},Kxe=function(e,t){return t===void 0&&(t={}),Gxe(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(zxe,O4):e=e.replace(Hxe,O4),e.replace(Bxe,Wxe))};MT.camelCase=Kxe;var qxe=Wu&&Wu.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Yxe=qxe(T2),Xxe=MT;function hO(e,t){var r={};return!e||typeof e!="string"||(0,Yxe.default)(e,function(n,i){n&&i&&(r[(0,Xxe.camelCase)(n,t)]=i)}),r}hO.default=hO;var Jxe=hO;const Qxe=oa(Jxe),r1=n1("end"),C2=n1("start");function n1(e){return t;function t(r){const n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function Zxe(e){const t=C2(e),r=r1(e);if(t&&r)return{start:t,end:r}}function Ry(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?k4(e.position):"start"in e||"end"in e?k4(e):"line"in e||"column"in e?fO(e):""}function fO(e){return P4(e&&e.line)+":"+P4(e&&e.column)}function k4(e){return fO(e&&e.start)+"-"+fO(e&&e.end)}function P4(e){return e&&typeof e=="number"?e:1}class vo extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let i="",o={},a=!1;if(r&&("line"in r&&"column"in r?o={place:r}:"start"in r&&"end"in r?o={place:r}:"type"in r?o={ancestors:[r],place:r.position}:o={...r}),typeof t=="string"?i=t:!o.cause&&t&&(a=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof n=="string"){const l=n.indexOf(":");l===-1?o.ruleId=n:(o.source=n.slice(0,l),o.ruleId=n.slice(l+1))}if(!o.place&&o.ancestors&&o.ancestors){const l=o.ancestors[o.ancestors.length-1];l&&(o.place=l.position)}const s=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=s?s.line:void 0,this.name=Ry(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=a&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}vo.prototype.file="";vo.prototype.name="";vo.prototype.reason="";vo.prototype.message="";vo.prototype.stack="";vo.prototype.column=void 0;vo.prototype.line=void 0;vo.prototype.ancestors=void 0;vo.prototype.cause=void 0;vo.prototype.fatal=void 0;vo.prototype.place=void 0;vo.prototype.ruleId=void 0;vo.prototype.source=void 0;const x2={}.hasOwnProperty,eRe=new Map,tRe=/[A-Z]/g,rRe=new Set(["table","tbody","thead","tfoot","tr"]),nRe=new Set(["td","th"]),i1="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function iRe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=hRe(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=dRe(r,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?S2:Txe,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=o1(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function o1(e,t,r){if(t.type==="element")return oRe(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return aRe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return lRe(e,t,r);if(t.type==="mdxjsEsm")return sRe(e,t);if(t.type==="root")return cRe(e,t,r);if(t.type==="text")return uRe(e,t)}function oRe(e,t,r){const n=e.schema;let i=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(i=S2,e.schema=i),e.ancestors.push(t);const o=s1(e,t.tagName,!1),a=fRe(e,t);let s=I2(e,t);return rRe.has(t.tagName)&&(s=s.filter(function(l){return typeof l=="string"?!pxe(l):!0})),a1(e,a,o,t),R2(a,s),e.ancestors.pop(),e.schema=n,e.create(t,o,a,r)}function aRe(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}xv(e,t.position)}function sRe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);xv(e,t.position)}function lRe(e,t,r){const n=e.schema;let i=n;t.name==="svg"&&n.space==="html"&&(i=S2,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:s1(e,t.name,!0),a=pRe(e,t),s=I2(e,t);return a1(e,a,o,t),R2(a,s),e.ancestors.pop(),e.schema=n,e.create(t,o,a,r)}function cRe(e,t,r){const n={};return R2(n,I2(e,t)),e.create(t,e.Fragment,n,r)}function uRe(e,t){return t.value}function a1(e,t,r,n){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=n)}function R2(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function dRe(e,t,r){return n;function n(i,o,a,s){const c=Array.isArray(a.children)?r:t;return s?c(o,a,s):c(o,a)}}function hRe(e,t){return r;function r(n,i,o,a){const s=Array.isArray(o.children),l=C2(n);return t(i,o,a,s,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function fRe(e,t){const r={};let n,i;for(i in t.properties)if(i!=="children"&&x2.call(t.properties,i)){const o=mRe(e,i,t.properties[i]);if(o){const[a,s]=o;e.tableCellAlignToStyle&&a==="align"&&typeof s=="string"&&nRe.has(t.tagName)?n=s:r[a]=s}}if(n){const o=r.style||(r.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function pRe(e,t){const r={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&e.evaluater){const o=n.data.estree.body[0];o.type;const a=o.expression;a.type;const s=a.properties[0];s.type,Object.assign(r,e.evaluater.evaluateExpression(s.argument))}else xv(e,t.position);else{const i=n.name;let o;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&e.evaluater){const s=n.value.data.estree.body[0];s.type,o=e.evaluater.evaluateExpression(s.expression)}else xv(e,t.position);else o=n.value===null?!0:n.value;r[i]=o}return r}function I2(e,t){const r=[];let n=-1;const i=e.passKeys?new Map:eRe;for(;++n<t.children.length;){const o=t.children[n];let a;if(e.passKeys){const l=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(l){const c=i.get(l)||0;a=l+"-"+c,i.set(l,c+1)}}const s=o1(e,o,a);s!==void 0&&r.push(s)}return r}function mRe(e,t,r){const n=_xe(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?cxe(r):Cxe(r)),n.property==="style"){let i=typeof r=="object"?r:gRe(e,String(r));return e.stylePropertyNameCase==="css"&&(i=yRe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&n.space?vxe[n.property]||n.property:n.attribute,r]}}function gRe(e,t){try{return Qxe(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const n=r,i=new vo("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=i1+"#cannot-parse-style-attribute",i}}function s1(e,t,r){let n;if(!r)n={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,a;for(;++o<i.length;){const s=S4(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};a=a?{type:"MemberExpression",object:a,property:s,computed:!!(o&&s.type==="Literal"),optional:!1}:s}n=a}else n=S4(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const i=n.value;return x2.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(n);xv(e)}function xv(e,t){const r=new vo("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=i1+"#cannot-handle-mdx-estrees-without-createevaluater",r}function yRe(e){const t={};let r;for(r in e)x2.call(e,r)&&(t[vRe(r)]=e[r]);return t}function vRe(e){let t=e.replace(tRe,bRe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function bRe(e){return"-"+e.toLowerCase()}const Hx={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},ERe={};function _Re(e,t){const r=ERe,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,i=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return l1(e,n,i)}function l1(e,t,r){if(wRe(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return D4(e.children,t,r)}return Array.isArray(e)?D4(e,t,r):""}function D4(e,t,r){const n=[];let i=-1;for(;++i<e.length;)n[i]=l1(e[i],t,r);return n.join("")}function wRe(e){return!!(e&&typeof e=="object")}const L4=document.createElement("i");function N2(e){const t="&"+e+";";L4.innerHTML=t;const r=L4.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Ul(e,t,r,n){const i=e.length;let o=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,r=r>0?r:0,n.length<1e4)a=Array.from(n),a.unshift(t,r),e.splice(...a);else for(r&&e.splice(t,r);o<n.length;)a=n.slice(o,o+1e4),a.unshift(t,0),e.splice(...a),o+=1e4,t+=1e4}function us(e,t){return e.length>0?(Ul(e,e.length,0,t),e):t}const M4={}.hasOwnProperty;function SRe(e){const t={};let r=-1;for(;++r<e.length;)TRe(t,e[r]);return t}function TRe(e,t){let r;for(r in t){const i=(M4.call(e,r)?e[r]:void 0)||(e[r]={}),o=t[r];let a;if(o)for(a in o){M4.call(i,a)||(i[a]=[]);const s=o[a];CRe(i[a],Array.isArray(s)?s:s?[s]:[])}}}function CRe(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);Ul(e,0,0,n)}function c1(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"�":String.fromCodePoint(r)}function Rp(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Sl=ld(/[A-Za-z]/),Ta=ld(/[\dA-Za-z]/),xRe=ld(/[#-'*+\--9=?A-Z^-~]/);function pO(e){return e!==null&&(e<32||e===127)}const mO=ld(/\d/),RRe=ld(/[\dA-Fa-f]/),IRe=ld(/[!-/:-@[-`{-~]/);function At(e){return e!==null&&e<-2}function na(e){return e!==null&&(e<0||e===32)}function Or(e){return e===-2||e===-1||e===32}const NRe=ld(new RegExp("\\p{P}|\\p{S}","u")),ARe=ld(/\s/);function ld(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function Fm(e){const t=[];let r=-1,n=0,i=0;for(;++r<e.length;){const o=e.charCodeAt(r);let a="";if(o===37&&Ta(e.charCodeAt(r+1))&&Ta(e.charCodeAt(r+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const s=e.charCodeAt(r+1);o<56320&&s>56319&&s<57344?(a=String.fromCharCode(o,s),i=1):a="�"}else a=String.fromCharCode(o);a&&(t.push(e.slice(n,r),encodeURIComponent(a)),n=r+i+1,a=""),i&&(r+=i,i=0)}return t.join("")+e.slice(n)}function cn(e,t,r,n){const i=n?n-1:Number.POSITIVE_INFINITY;let o=0;return a;function a(l){return Or(l)?(e.enter(r),s(l)):t(l)}function s(l){return Or(l)&&o++<i?(e.consume(l),s):(e.exit(r),t(l))}}const ORe={tokenize:kRe};function kRe(e){const t=e.attempt(this.parser.constructs.contentInitial,n,i);let r;return t;function n(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),cn(e,t,"linePrefix")}function i(s){return e.enter("paragraph"),o(s)}function o(s){const l=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=l),r=l,a(s)}function a(s){if(s===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(s);return}return At(s)?(e.consume(s),e.exit("chunkText"),o):(e.consume(s),a)}}const PRe={tokenize:DRe},j4={tokenize:LRe};function DRe(e){const t=this,r=[];let n=0,i,o,a;return s;function s(_){if(n<r.length){const S=r[n];return t.containerState=S[1],e.attempt(S[0].continuation,l,c)(_)}return c(_)}function l(_){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const S=t.events.length;let I=S,A;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){A=t.events[I][1].end;break}v(n);let D=S;for(;D<t.events.length;)t.events[D][1].end={...A},D++;return Ul(t.events,I+1,0,t.events.slice(S)),t.events.length=D,c(_)}return s(_)}function c(_){if(n===r.length){if(!i)return f(_);if(i.currentConstruct&&i.currentConstruct.concrete)return m(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(j4,u,h)(_)}function u(_){return i&&b(),v(n),f(_)}function h(_){return t.parser.lazy[t.now().line]=n!==r.length,a=t.now().offset,m(_)}function f(_){return t.containerState={},e.attempt(j4,p,m)(_)}function p(_){return n++,r.push([t.currentConstruct,t.containerState]),f(_)}function m(_){if(_===null){i&&b(),v(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),g(_)}function g(_){if(_===null){y(e.exit("chunkFlow"),!0),v(0),e.consume(_);return}return At(_)?(e.consume(_),y(e.exit("chunkFlow")),n=0,t.interrupt=void 0,s):(e.consume(_),g)}function y(_,S){const I=t.sliceStream(_);if(S&&I.push(null),_.previous=o,o&&(o.next=_),o=_,i.defineSkip(_.start),i.write(I),t.parser.lazy[_.start.line]){let A=i.events.length;for(;A--;)if(i.events[A][1].start.offset<a&&(!i.events[A][1].end||i.events[A][1].end.offset>a))return;const D=t.events.length;let M=D,H,V;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){if(H){V=t.events[M][1].end;break}H=!0}for(v(n),A=D;A<t.events.length;)t.events[A][1].end={...V},A++;Ul(t.events,M+1,0,t.events.slice(D)),t.events.length=A}}function v(_){let S=r.length;for(;S-- >_;){const I=r[S];t.containerState=I[1],I[0].exit.call(t,e)}r.length=_}function b(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function LRe(e,t,r){return cn(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function U4(e){if(e===null||na(e)||ARe(e))return 1;if(NRe(e))return 2}function A2(e,t,r){const n=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!n.includes(o)&&(t=o(t,r),n.push(o))}return t}const gO={name:"attention",resolveAll:MRe,tokenize:jRe};function MRe(e,t){let r=-1,n,i,o,a,s,l,c,u;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;l=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const h={...e[n][1].end},f={...e[r][1].start};F4(h,-l),F4(f,l),a={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...e[n][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:f},o={type:l>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},i={type:l>1?"strong":"emphasis",start:{...a.start},end:{...s.end}},e[n][1].end={...a.start},e[r][1].start={...s.end},c=[],e[n][1].end.offset-e[n][1].start.offset&&(c=us(c,[["enter",e[n][1],t],["exit",e[n][1],t]])),c=us(c,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",o,t]]),c=us(c,A2(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),c=us(c,[["exit",o,t],["enter",s,t],["exit",s,t],["exit",i,t]]),e[r][1].end.offset-e[r][1].start.offset?(u=2,c=us(c,[["enter",e[r][1],t],["exit",e[r][1],t]])):u=0,Ul(e,n-1,r-n+3,c),r=n+c.length-u-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function jRe(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,i=U4(n);let o;return a;function a(l){return o=l,e.enter("attentionSequence"),s(l)}function s(l){if(l===o)return e.consume(l),s;const c=e.exit("attentionSequence"),u=U4(l),h=!u||u===2&&i||r.includes(l),f=!i||i===2&&u||r.includes(n);return c._open=!!(o===42?h:h&&(i||!f)),c._close=!!(o===42?f:f&&(u||!h)),t(l)}}function F4(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const URe={name:"autolink",tokenize:FRe};function FRe(e,t,r){let n=0;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(p){return Sl(p)?(e.consume(p),a):p===64?r(p):c(p)}function a(p){return p===43||p===45||p===46||Ta(p)?(n=1,s(p)):c(p)}function s(p){return p===58?(e.consume(p),n=0,l):(p===43||p===45||p===46||Ta(p))&&n++<32?(e.consume(p),s):(n=0,c(p))}function l(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||pO(p)?r(p):(e.consume(p),l)}function c(p){return p===64?(e.consume(p),u):xRe(p)?(e.consume(p),c):r(p)}function u(p){return Ta(p)?h(p):r(p)}function h(p){return p===46?(e.consume(p),n=0,u):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):f(p)}function f(p){if((p===45||Ta(p))&&n++<63){const m=p===45?f:h;return e.consume(p),m}return r(p)}}const jT={partial:!0,tokenize:VRe};function VRe(e,t,r){return n;function n(o){return Or(o)?cn(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||At(o)?t(o):r(o)}}const u1={continuation:{tokenize:$Re},exit:HRe,name:"blockQuote",tokenize:BRe};function BRe(e,t,r){const n=this;return i;function i(a){if(a===62){const s=n.containerState;return s.open||(e.enter("blockQuote",{_container:!0}),s.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),o}return r(a)}function o(a){return Or(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function $Re(e,t,r){const n=this;return i;function i(a){return Or(a)?cn(e,o,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):o(a)}function o(a){return e.attempt(u1,t,r)(a)}}function HRe(e){e.exit("blockQuote")}const d1={name:"characterEscape",tokenize:zRe};function zRe(e,t,r){return n;function n(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return IRe(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(o)}}const h1={name:"characterReference",tokenize:GRe};function GRe(e,t,r){const n=this;let i=0,o,a;return s;function s(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),l}function l(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),o=31,a=Ta,u(h))}function c(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,a=RRe,u):(e.enter("characterReferenceValue"),o=7,a=mO,u(h))}function u(h){if(h===59&&i){const f=e.exit("characterReferenceValue");return a===Ta&&!N2(n.sliceSerialize(f))?r(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(h)&&i++<o?(e.consume(h),u):r(h)}}const V4={partial:!0,tokenize:KRe},B4={concrete:!0,name:"codeFenced",tokenize:WRe};function WRe(e,t,r){const n=this,i={partial:!0,tokenize:I};let o=0,a=0,s;return l;function l(A){return c(A)}function c(A){const D=n.events[n.events.length-1];return o=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,s=A,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(A)}function u(A){return A===s?(a++,e.consume(A),u):a<3?r(A):(e.exit("codeFencedFenceSequence"),Or(A)?cn(e,h,"whitespace")(A):h(A))}function h(A){return A===null||At(A)?(e.exit("codeFencedFence"),n.interrupt?t(A):e.check(V4,g,S)(A)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(A))}function f(A){return A===null||At(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(A)):Or(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),cn(e,p,"whitespace")(A)):A===96&&A===s?r(A):(e.consume(A),f)}function p(A){return A===null||At(A)?h(A):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(A))}function m(A){return A===null||At(A)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(A)):A===96&&A===s?r(A):(e.consume(A),m)}function g(A){return e.attempt(i,S,y)(A)}function y(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),v}function v(A){return o>0&&Or(A)?cn(e,b,"linePrefix",o+1)(A):b(A)}function b(A){return A===null||At(A)?e.check(V4,g,S)(A):(e.enter("codeFlowValue"),_(A))}function _(A){return A===null||At(A)?(e.exit("codeFlowValue"),b(A)):(e.consume(A),_)}function S(A){return e.exit("codeFenced"),t(A)}function I(A,D,M){let H=0;return V;function V(F){return A.enter("lineEnding"),A.consume(F),A.exit("lineEnding"),G}function G(F){return A.enter("codeFencedFence"),Or(F)?cn(A,Y,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):Y(F)}function Y(F){return F===s?(A.enter("codeFencedFenceSequence"),Z(F)):M(F)}function Z(F){return F===s?(H++,A.consume(F),Z):H>=a?(A.exit("codeFencedFenceSequence"),Or(F)?cn(A,$,"whitespace")(F):$(F)):M(F)}function $(F){return F===null||At(F)?(A.exit("codeFencedFence"),D(F)):M(F)}}}function KRe(e,t,r){const n=this;return i;function i(a){return a===null?r(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),o)}function o(a){return n.parser.lazy[n.now().line]?r(a):t(a)}}const zx={name:"codeIndented",tokenize:YRe},qRe={partial:!0,tokenize:XRe};function YRe(e,t,r){const n=this;return i;function i(c){return e.enter("codeIndented"),cn(e,o,"linePrefix",5)(c)}function o(c){const u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?a(c):r(c)}function a(c){return c===null?l(c):At(c)?e.attempt(qRe,a,l)(c):(e.enter("codeFlowValue"),s(c))}function s(c){return c===null||At(c)?(e.exit("codeFlowValue"),a(c)):(e.consume(c),s)}function l(c){return e.exit("codeIndented"),t(c)}}function XRe(e,t,r){const n=this;return i;function i(a){return n.parser.lazy[n.now().line]?r(a):At(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):cn(e,o,"linePrefix",5)(a)}function o(a){const s=n.events[n.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(a):At(a)?i(a):r(a)}}const JRe={name:"codeText",previous:ZRe,resolve:QRe,tokenize:eIe};function QRe(e){let t=e.length-4,r=3,n,i;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)i===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(i=n):(n===t||e[n][1].type==="lineEnding")&&(e[i][1].type="codeTextData",n!==i+2&&(e[i][1].end=e[n-1][1].end,e.splice(i+2,n-i-2),t-=n-i-2,n=i+2),i=void 0);return e}function ZRe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function eIe(e,t,r){let n=0,i,o;return a;function a(h){return e.enter("codeText"),e.enter("codeTextSequence"),s(h)}function s(h){return h===96?(e.consume(h),n++,s):(e.exit("codeTextSequence"),l(h))}function l(h){return h===null?r(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),l):h===96?(o=e.enter("codeTextSequence"),i=0,u(h)):At(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||At(h)?(e.exit("codeTextData"),l(h)):(e.consume(h),c)}function u(h){return h===96?(e.consume(h),i++,u):i===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(o.type="codeTextData",c(h))}}class tIe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){const i=r||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&Tg(this.left,n),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Tg(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Tg(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);Tg(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Tg(this.left,r.reverse())}}}function Tg(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function f1(e){const t={};let r=-1,n,i,o,a,s,l,c;const u=new tIe(e);for(;++r<u.length;){for(;r in t;)r=t[r];if(n=u.get(r),r&&n[1].type==="chunkFlow"&&u.get(r-1)[1].type==="listItemPrefix"&&(l=n[1]._tokenizer.events,o=0,o<l.length&&l[o][1].type==="lineEndingBlank"&&(o+=2),o<l.length&&l[o][1].type==="content"))for(;++o<l.length&&l[o][1].type!=="content";)l[o][1].type==="chunkText"&&(l[o][1]._isInFirstContentOfListItem=!0,o++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,rIe(u,r)),r=t[r],c=!0);else if(n[1]._container){for(o=r,i=void 0;o--;)if(a=u.get(o),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(n[1].end={...u.get(i)[1].start},s=u.slice(i,r),s.unshift(n),u.splice(i,r-i+1,s))}}return Ul(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function rIe(e,t){const r=e.get(t)[1],n=e.get(t)[2];let i=t-1;const o=[];let a=r._tokenizer;a||(a=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const s=a.events,l=[],c={};let u,h,f=-1,p=r,m=0,g=0;const y=[g];for(;p;){for(;e.get(++i)[1]!==p;);o.push(i),p._tokenizer||(u=n.sliceStream(p),p.next||u.push(null),h&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=r;++f<s.length;)s[f][0]==="exit"&&s[f-1][0]==="enter"&&s[f][1].type===s[f-1][1].type&&s[f][1].start.line!==s[f][1].end.line&&(g=f+1,y.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):y.pop(),f=y.length;f--;){const v=s.slice(y[f],y[f+1]),b=o.pop();l.push([b,b+v.length-1]),e.splice(b,2,v)}for(l.reverse(),f=-1;++f<l.length;)c[m+l[f][0]]=m+l[f][1],m+=l[f][1]-l[f][0]-1;return c}const nIe={resolve:oIe,tokenize:aIe},iIe={partial:!0,tokenize:sIe};function oIe(e){return f1(e),e}function aIe(e,t){let r;return n;function n(s){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?o(s):At(s)?e.check(iIe,a,o)(s):(e.consume(s),i)}function o(s){return e.exit("chunkContent"),e.exit("content"),t(s)}function a(s){return e.consume(s),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,i}}function sIe(e,t,r){const n=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),cn(e,o,"linePrefix")}function o(a){if(a===null||At(a))return r(a);const s=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(a):e.interrupt(n.parser.constructs.flow,r,t)(a)}}function p1(e,t,r,n,i,o,a,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(v){return v===60?(e.enter(n),e.enter(i),e.enter(o),e.consume(v),e.exit(o),f):v===null||v===32||v===41||pO(v)?r(v):(e.enter(n),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),g(v))}function f(v){return v===62?(e.enter(o),e.consume(v),e.exit(o),e.exit(i),e.exit(n),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===62?(e.exit("chunkString"),e.exit(s),f(v)):v===null||v===60||At(v)?r(v):(e.consume(v),v===92?m:p)}function m(v){return v===60||v===62||v===92?(e.consume(v),p):p(v)}function g(v){return!u&&(v===null||v===41||na(v))?(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(n),t(v)):u<c&&v===40?(e.consume(v),u++,g):v===41?(e.consume(v),u--,g):v===null||v===32||v===40||pO(v)?r(v):(e.consume(v),v===92?y:g)}function y(v){return v===40||v===41||v===92?(e.consume(v),g):g(v)}}function m1(e,t,r,n,i,o){const a=this;let s=0,l;return c;function c(p){return e.enter(n),e.enter(i),e.consume(p),e.exit(i),e.enter(o),u}function u(p){return s>999||p===null||p===91||p===93&&!l||p===94&&!s&&"_hiddenFootnoteSupport"in a.parser.constructs?r(p):p===93?(e.exit(o),e.enter(i),e.consume(p),e.exit(i),e.exit(n),t):At(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||At(p)||s++>999?(e.exit("chunkString"),u(p)):(e.consume(p),l||(l=!Or(p)),p===92?f:h)}function f(p){return p===91||p===92||p===93?(e.consume(p),s++,h):h(p)}}function g1(e,t,r,n,i,o){let a;return s;function s(f){return f===34||f===39||f===40?(e.enter(n),e.enter(i),e.consume(f),e.exit(i),a=f===40?41:f,l):r(f)}function l(f){return f===a?(e.enter(i),e.consume(f),e.exit(i),e.exit(n),t):(e.enter(o),c(f))}function c(f){return f===a?(e.exit(o),l(a)):f===null?r(f):At(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),cn(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===a||f===null||At(f)?(e.exit("chunkString"),c(f)):(e.consume(f),f===92?h:u)}function h(f){return f===a||f===92?(e.consume(f),u):u(f)}}function Iy(e,t){let r;return n;function n(i){return At(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),r=!0,n):Or(i)?cn(e,n,r?"linePrefix":"lineSuffix")(i):t(i)}}const lIe={name:"definition",tokenize:uIe},cIe={partial:!0,tokenize:dIe};function uIe(e,t,r){const n=this;let i;return o;function o(p){return e.enter("definition"),a(p)}function a(p){return m1.call(n,e,s,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function s(p){return i=Rp(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),l):r(p)}function l(p){return na(p)?Iy(e,c)(p):c(p)}function c(p){return p1(e,u,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return e.attempt(cIe,h,h)(p)}function h(p){return Or(p)?cn(e,f,"whitespace")(p):f(p)}function f(p){return p===null||At(p)?(e.exit("definition"),n.parser.defined.push(i),t(p)):r(p)}}function dIe(e,t,r){return n;function n(s){return na(s)?Iy(e,i)(s):r(s)}function i(s){return g1(e,o,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function o(s){return Or(s)?cn(e,a,"whitespace")(s):a(s)}function a(s){return s===null||At(s)?t(s):r(s)}}const hIe={name:"hardBreakEscape",tokenize:fIe};function fIe(e,t,r){return n;function n(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return At(o)?(e.exit("hardBreakEscape"),t(o)):r(o)}}const pIe={name:"headingAtx",resolve:mIe,tokenize:gIe};function mIe(e,t){let r=e.length-2,n=3,i,o;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(i={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},o={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},Ul(e,n,r-n+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function gIe(e,t,r){let n=0;return i;function i(u){return e.enter("atxHeading"),o(u)}function o(u){return e.enter("atxHeadingSequence"),a(u)}function a(u){return u===35&&n++<6?(e.consume(u),a):u===null||na(u)?(e.exit("atxHeadingSequence"),s(u)):r(u)}function s(u){return u===35?(e.enter("atxHeadingSequence"),l(u)):u===null||At(u)?(e.exit("atxHeading"),t(u)):Or(u)?cn(e,s,"whitespace")(u):(e.enter("atxHeadingText"),c(u))}function l(u){return u===35?(e.consume(u),l):(e.exit("atxHeadingSequence"),s(u))}function c(u){return u===null||u===35||na(u)?(e.exit("atxHeadingText"),s(u)):(e.consume(u),c)}}const yIe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$4=["pre","script","style","textarea"],vIe={concrete:!0,name:"htmlFlow",resolveTo:_Ie,tokenize:wIe},bIe={partial:!0,tokenize:TIe},EIe={partial:!0,tokenize:SIe};function _Ie(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function wIe(e,t,r){const n=this;let i,o,a,s,l;return c;function c(C){return u(C)}function u(C){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(C),h}function h(C){return C===33?(e.consume(C),f):C===47?(e.consume(C),o=!0,g):C===63?(e.consume(C),i=3,n.interrupt?t:x):Sl(C)?(e.consume(C),a=String.fromCharCode(C),y):r(C)}function f(C){return C===45?(e.consume(C),i=2,p):C===91?(e.consume(C),i=5,s=0,m):Sl(C)?(e.consume(C),i=4,n.interrupt?t:x):r(C)}function p(C){return C===45?(e.consume(C),n.interrupt?t:x):r(C)}function m(C){const W="CDATA[";return C===W.charCodeAt(s++)?(e.consume(C),s===W.length?n.interrupt?t:Y:m):r(C)}function g(C){return Sl(C)?(e.consume(C),a=String.fromCharCode(C),y):r(C)}function y(C){if(C===null||C===47||C===62||na(C)){const W=C===47,U=a.toLowerCase();return!W&&!o&&$4.includes(U)?(i=1,n.interrupt?t(C):Y(C)):yIe.includes(a.toLowerCase())?(i=6,W?(e.consume(C),v):n.interrupt?t(C):Y(C)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(C):o?b(C):_(C))}return C===45||Ta(C)?(e.consume(C),a+=String.fromCharCode(C),y):r(C)}function v(C){return C===62?(e.consume(C),n.interrupt?t:Y):r(C)}function b(C){return Or(C)?(e.consume(C),b):V(C)}function _(C){return C===47?(e.consume(C),V):C===58||C===95||Sl(C)?(e.consume(C),S):Or(C)?(e.consume(C),_):V(C)}function S(C){return C===45||C===46||C===58||C===95||Ta(C)?(e.consume(C),S):I(C)}function I(C){return C===61?(e.consume(C),A):Or(C)?(e.consume(C),I):_(C)}function A(C){return C===null||C===60||C===61||C===62||C===96?r(C):C===34||C===39?(e.consume(C),l=C,D):Or(C)?(e.consume(C),A):M(C)}function D(C){return C===l?(e.consume(C),l=null,H):C===null||At(C)?r(C):(e.consume(C),D)}function M(C){return C===null||C===34||C===39||C===47||C===60||C===61||C===62||C===96||na(C)?I(C):(e.consume(C),M)}function H(C){return C===47||C===62||Or(C)?_(C):r(C)}function V(C){return C===62?(e.consume(C),G):r(C)}function G(C){return C===null||At(C)?Y(C):Or(C)?(e.consume(C),G):r(C)}function Y(C){return C===45&&i===2?(e.consume(C),K):C===60&&i===1?(e.consume(C),k):C===62&&i===4?(e.consume(C),E):C===63&&i===3?(e.consume(C),x):C===93&&i===5?(e.consume(C),B):At(C)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(bIe,N,Z)(C)):C===null||At(C)?(e.exit("htmlFlowData"),Z(C)):(e.consume(C),Y)}function Z(C){return e.check(EIe,$,N)(C)}function $(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),F}function F(C){return C===null||At(C)?Z(C):(e.enter("htmlFlowData"),Y(C))}function K(C){return C===45?(e.consume(C),x):Y(C)}function k(C){return C===47?(e.consume(C),a="",P):Y(C)}function P(C){if(C===62){const W=a.toLowerCase();return $4.includes(W)?(e.consume(C),E):Y(C)}return Sl(C)&&a.length<8?(e.consume(C),a+=String.fromCharCode(C),P):Y(C)}function B(C){return C===93?(e.consume(C),x):Y(C)}function x(C){return C===62?(e.consume(C),E):C===45&&i===2?(e.consume(C),x):Y(C)}function E(C){return C===null||At(C)?(e.exit("htmlFlowData"),N(C)):(e.consume(C),E)}function N(C){return e.exit("htmlFlow"),t(C)}}function SIe(e,t,r){const n=this;return i;function i(a){return At(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),o):r(a)}function o(a){return n.parser.lazy[n.now().line]?r(a):t(a)}}function TIe(e,t,r){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(jT,t,r)}}const CIe={name:"htmlText",tokenize:xIe};function xIe(e,t,r){const n=this;let i,o,a;return s;function s(x){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(x),l}function l(x){return x===33?(e.consume(x),c):x===47?(e.consume(x),I):x===63?(e.consume(x),_):Sl(x)?(e.consume(x),M):r(x)}function c(x){return x===45?(e.consume(x),u):x===91?(e.consume(x),o=0,m):Sl(x)?(e.consume(x),b):r(x)}function u(x){return x===45?(e.consume(x),p):r(x)}function h(x){return x===null?r(x):x===45?(e.consume(x),f):At(x)?(a=h,k(x)):(e.consume(x),h)}function f(x){return x===45?(e.consume(x),p):h(x)}function p(x){return x===62?K(x):x===45?f(x):h(x)}function m(x){const E="CDATA[";return x===E.charCodeAt(o++)?(e.consume(x),o===E.length?g:m):r(x)}function g(x){return x===null?r(x):x===93?(e.consume(x),y):At(x)?(a=g,k(x)):(e.consume(x),g)}function y(x){return x===93?(e.consume(x),v):g(x)}function v(x){return x===62?K(x):x===93?(e.consume(x),v):g(x)}function b(x){return x===null||x===62?K(x):At(x)?(a=b,k(x)):(e.consume(x),b)}function _(x){return x===null?r(x):x===63?(e.consume(x),S):At(x)?(a=_,k(x)):(e.consume(x),_)}function S(x){return x===62?K(x):_(x)}function I(x){return Sl(x)?(e.consume(x),A):r(x)}function A(x){return x===45||Ta(x)?(e.consume(x),A):D(x)}function D(x){return At(x)?(a=D,k(x)):Or(x)?(e.consume(x),D):K(x)}function M(x){return x===45||Ta(x)?(e.consume(x),M):x===47||x===62||na(x)?H(x):r(x)}function H(x){return x===47?(e.consume(x),K):x===58||x===95||Sl(x)?(e.consume(x),V):At(x)?(a=H,k(x)):Or(x)?(e.consume(x),H):K(x)}function V(x){return x===45||x===46||x===58||x===95||Ta(x)?(e.consume(x),V):G(x)}function G(x){return x===61?(e.consume(x),Y):At(x)?(a=G,k(x)):Or(x)?(e.consume(x),G):H(x)}function Y(x){return x===null||x===60||x===61||x===62||x===96?r(x):x===34||x===39?(e.consume(x),i=x,Z):At(x)?(a=Y,k(x)):Or(x)?(e.consume(x),Y):(e.consume(x),$)}function Z(x){return x===i?(e.consume(x),i=void 0,F):x===null?r(x):At(x)?(a=Z,k(x)):(e.consume(x),Z)}function $(x){return x===null||x===34||x===39||x===60||x===61||x===96?r(x):x===47||x===62||na(x)?H(x):(e.consume(x),$)}function F(x){return x===47||x===62||na(x)?H(x):r(x)}function K(x){return x===62?(e.consume(x),e.exit("htmlTextData"),e.exit("htmlText"),t):r(x)}function k(x){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),P}function P(x){return Or(x)?cn(e,B,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(x):B(x)}function B(x){return e.enter("htmlTextData"),a(x)}}const O2={name:"labelEnd",resolveAll:AIe,resolveTo:OIe,tokenize:kIe},RIe={tokenize:PIe},IIe={tokenize:DIe},NIe={tokenize:LIe};function AIe(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const i=n.type==="labelImage"?4:2;n.type="data",t+=i}}return e.length!==r.length&&Ul(e,0,e.length,r),e}function OIe(e,t){let r=e.length,n=0,i,o,a,s;for(;r--;)if(i=e[r][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[r][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[r][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=r,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(a=r);const l={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[o][1].start},end:{...e[a][1].end}},u={type:"labelText",start:{...e[o+n+2][1].end},end:{...e[a-2][1].start}};return s=[["enter",l,t],["enter",c,t]],s=us(s,e.slice(o+1,o+n+3)),s=us(s,[["enter",u,t]]),s=us(s,A2(t.parser.constructs.insideSpan.null,e.slice(o+n+4,a-3),t)),s=us(s,[["exit",u,t],e[a-2],e[a-1],["exit",c,t]]),s=us(s,e.slice(a+1)),s=us(s,[["exit",l,t]]),Ul(e,o,e.length,s),e}function kIe(e,t,r){const n=this;let i=n.events.length,o,a;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){o=n.events[i][1];break}return s;function s(f){return o?o._inactive?h(f):(a=n.parser.defined.includes(Rp(n.sliceSerialize({start:o.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),l):r(f)}function l(f){return f===40?e.attempt(RIe,u,a?u:h)(f):f===91?e.attempt(IIe,u,a?c:h)(f):a?u(f):h(f)}function c(f){return e.attempt(NIe,u,h)(f)}function u(f){return t(f)}function h(f){return o._balanced=!0,r(f)}}function PIe(e,t,r){return n;function n(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),i}function i(h){return na(h)?Iy(e,o)(h):o(h)}function o(h){return h===41?u(h):p1(e,a,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return na(h)?Iy(e,l)(h):u(h)}function s(h){return r(h)}function l(h){return h===34||h===39||h===40?g1(e,c,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return na(h)?Iy(e,u)(h):u(h)}function u(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):r(h)}}function DIe(e,t,r){const n=this;return i;function i(s){return m1.call(n,e,o,a,"reference","referenceMarker","referenceString")(s)}function o(s){return n.parser.defined.includes(Rp(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(s):r(s)}function a(s){return r(s)}}function LIe(e,t,r){return n;function n(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):r(o)}}const MIe={name:"labelStartImage",resolveAll:O2.resolveAll,tokenize:jIe};function jIe(e,t,r){const n=this;return i;function i(s){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(s),e.exit("labelImageMarker"),o}function o(s){return s===91?(e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelImage"),a):r(s)}function a(s){return s===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(s):t(s)}}const UIe={name:"labelStartLink",resolveAll:O2.resolveAll,tokenize:FIe};function FIe(e,t,r){const n=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(a):t(a)}}const Gx={name:"lineEnding",tokenize:VIe};function VIe(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),cn(e,t,"linePrefix")}}const t_={name:"thematicBreak",tokenize:BIe};function BIe(e,t,r){let n=0,i;return o;function o(c){return e.enter("thematicBreak"),a(c)}function a(c){return i=c,s(c)}function s(c){return c===i?(e.enter("thematicBreakSequence"),l(c)):n>=3&&(c===null||At(c))?(e.exit("thematicBreak"),t(c)):r(c)}function l(c){return c===i?(e.consume(c),n++,l):(e.exit("thematicBreakSequence"),Or(c)?cn(e,s,"whitespace")(c):s(c))}}const Uo={continuation:{tokenize:GIe},exit:KIe,name:"list",tokenize:zIe},$Ie={partial:!0,tokenize:qIe},HIe={partial:!0,tokenize:WIe};function zIe(e,t,r){const n=this,i=n.events[n.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return s;function s(p){const m=n.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!n.containerState.marker||p===n.containerState.marker:mO(p)){if(n.containerState.type||(n.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(t_,r,c)(p):c(p);if(!n.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(p)}return r(p)}function l(p){return mO(p)&&++a<10?(e.consume(p),l):(!n.interrupt||a<2)&&(n.containerState.marker?p===n.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),c(p)):r(p)}function c(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||p,e.check(jT,n.interrupt?r:u,e.attempt($Ie,f,h))}function u(p){return n.containerState.initialBlankLine=!0,o++,f(p)}function h(p){return Or(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),f):r(p)}function f(p){return n.containerState.size=o+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function GIe(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(jT,i,o);function i(s){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,cn(e,t,"listItemIndent",n.containerState.size+1)(s)}function o(s){return n.containerState.furtherBlankLines||!Or(s)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,a(s)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(HIe,t,a)(s))}function a(s){return n.containerState._closeFlow=!0,n.interrupt=void 0,cn(e,e.attempt(Uo,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function WIe(e,t,r){const n=this;return cn(e,i,"listItemIndent",n.containerState.size+1);function i(o){const a=n.events[n.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===n.containerState.size?t(o):r(o)}}function KIe(e){e.exit(this.containerState.type)}function qIe(e,t,r){const n=this;return cn(e,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const a=n.events[n.events.length-1];return!Or(o)&&a&&a[1].type==="listItemPrefixWhitespace"?t(o):r(o)}}const H4={name:"setextUnderline",resolveTo:YIe,tokenize:XIe};function YIe(e,t){let r=e.length,n,i,o;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(i=r)}else e[r][1].type==="content"&&e.splice(r,1),!o&&e[r][1].type==="definition"&&(o=r);const a={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",a,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end={...e[o][1].end}):e[n][1]=a,e.push(["exit",a,t]),e}function XIe(e,t,r){const n=this;let i;return o;function o(c){let u=n.events.length,h;for(;u--;)if(n.events[u][1].type!=="lineEnding"&&n.events[u][1].type!=="linePrefix"&&n.events[u][1].type!=="content"){h=n.events[u][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||h)?(e.enter("setextHeadingLine"),i=c,a(c)):r(c)}function a(c){return e.enter("setextHeadingLineSequence"),s(c)}function s(c){return c===i?(e.consume(c),s):(e.exit("setextHeadingLineSequence"),Or(c)?cn(e,l,"lineSuffix")(c):l(c))}function l(c){return c===null||At(c)?(e.exit("setextHeadingLine"),t(c)):r(c)}}const JIe={tokenize:QIe};function QIe(e){const t=this,r=e.attempt(jT,n,e.attempt(this.parser.constructs.flowInitial,i,cn(e,e.attempt(this.parser.constructs.flow,i,e.attempt(nIe,i)),"linePrefix")));return r;function n(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const ZIe={resolveAll:v1()},eNe=y1("string"),tNe=y1("text");function y1(e){return{resolveAll:v1(e==="text"?rNe:void 0),tokenize:t};function t(r){const n=this,i=this.parser.constructs[e],o=r.attempt(i,a,s);return a;function a(u){return c(u)?o(u):s(u)}function s(u){if(u===null){r.consume(u);return}return r.enter("data"),r.consume(u),l}function l(u){return c(u)?(r.exit("data"),o(u)):(r.consume(u),l)}function c(u){if(u===null)return!0;const h=i[u];let f=-1;if(h)for(;++f<h.length;){const p=h[f];if(!p.previous||p.previous.call(n,n.previous))return!0}return!1}}}function v1(e){return t;function t(r,n){let i=-1,o;for(;++i<=r.length;)o===void 0?r[i]&&r[i][1].type==="data"&&(o=i,i++):(!r[i]||r[i][1].type!=="data")&&(i!==o+2&&(r[o][1].end=r[i-1][1].end,r.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(r,n):r}}function rNe(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],i=t.sliceStream(n);let o=i.length,a=-1,s=0,l;for(;o--;){const c=i[o];if(typeof c=="string"){for(a=c.length;c.charCodeAt(a-1)===32;)s++,a--;if(a)break;a=-1}else if(c===-2)l=!0,s++;else if(c!==-1){o++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(s=0),s){const c={type:r===e.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?a:n.start._bufferIndex+a,_index:n.start._index+o,line:n.end.line,column:n.end.column-s,offset:n.end.offset-s},end:{...n.end}};n.end={...c.start},n.start.offset===n.end.offset?Object.assign(n,c):(e.splice(r,0,["enter",c,t],["exit",c,t]),r+=2)}r++}return e}const nNe={42:Uo,43:Uo,45:Uo,48:Uo,49:Uo,50:Uo,51:Uo,52:Uo,53:Uo,54:Uo,55:Uo,56:Uo,57:Uo,62:u1},iNe={91:lIe},oNe={[-2]:zx,[-1]:zx,32:zx},aNe={35:pIe,42:t_,45:[H4,t_],60:vIe,61:H4,95:t_,96:B4,126:B4},sNe={38:h1,92:d1},lNe={[-5]:Gx,[-4]:Gx,[-3]:Gx,33:MIe,38:h1,42:gO,60:[URe,CIe],91:UIe,92:[hIe,d1],93:O2,95:gO,96:JRe},cNe={null:[gO,ZIe]},uNe={null:[42,95]},dNe={null:[]},hNe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:uNe,contentInitial:iNe,disable:dNe,document:nNe,flow:aNe,flowInitial:oNe,insideSpan:cNe,string:sNe,text:lNe},Symbol.toStringTag,{value:"Module"}));function fNe(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const i={},o=[];let a=[],s=[];const l={attempt:D(I),check:D(A),consume:b,enter:_,exit:S,interrupt:D(A,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:m,parser:e,previous:null,sliceSerialize:f,sliceStream:p,write:h};let u=t.tokenize.call(c,l);return t.resolveAll&&o.push(t),c;function h(G){return a=us(a,G),y(),a[a.length-1]!==null?[]:(M(t,0),c.events=A2(o,c.events,c),c.events)}function f(G,Y){return mNe(p(G),Y)}function p(G){return pNe(a,G)}function m(){const{_bufferIndex:G,_index:Y,line:Z,column:$,offset:F}=n;return{_bufferIndex:G,_index:Y,line:Z,column:$,offset:F}}function g(G){i[G.line]=G.column,V()}function y(){let G;for(;n._index<a.length;){const Y=a[n._index];if(typeof Y=="string")for(G=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===G&&n._bufferIndex<Y.length;)v(Y.charCodeAt(n._bufferIndex));else v(Y)}}function v(G){u=u(G)}function b(G){At(G)?(n.line++,n.column=1,n.offset+=G===-3?2:1,V()):G!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===a[n._index].length&&(n._bufferIndex=-1,n._index++)),c.previous=G}function _(G,Y){const Z=Y||{};return Z.type=G,Z.start=m(),c.events.push(["enter",Z,c]),s.push(Z),Z}function S(G){const Y=s.pop();return Y.end=m(),c.events.push(["exit",Y,c]),Y}function I(G,Y){M(G,Y.from)}function A(G,Y){Y.restore()}function D(G,Y){return Z;function Z($,F,K){let k,P,B,x;return Array.isArray($)?N($):"tokenize"in $?N([$]):E($);function E(X){return ae;function ae(he){const pe=he!==null&&X[he],Pe=he!==null&&X.null,$e=[...Array.isArray(pe)?pe:pe?[pe]:[],...Array.isArray(Pe)?Pe:Pe?[Pe]:[]];return N($e)(he)}}function N(X){return k=X,P=0,X.length===0?K:C(X[P])}function C(X){return ae;function ae(he){return x=H(),B=X,X.partial||(c.currentConstruct=X),X.name&&c.parser.constructs.disable.null.includes(X.name)?U():X.tokenize.call(Y?Object.assign(Object.create(c),Y):c,l,W,U)(he)}}function W(X){return G(B,x),F}function U(X){return x.restore(),++P<k.length?C(k[P]):K}}}function M(G,Y){G.resolveAll&&!o.includes(G)&&o.push(G),G.resolve&&Ul(c.events,Y,c.events.length-Y,G.resolve(c.events.slice(Y),c)),G.resolveTo&&(c.events=G.resolveTo(c.events,c))}function H(){const G=m(),Y=c.previous,Z=c.currentConstruct,$=c.events.length,F=Array.from(s);return{from:$,restore:K};function K(){n=G,c.previous=Y,c.currentConstruct=Z,c.events.length=$,s=F,V()}}function V(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function pNe(e,t){const r=t.start._index,n=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let a;if(r===i)a=[e[r].slice(n,o)];else{if(a=e.slice(r,i),n>-1){const s=a[0];typeof s=="string"?a[0]=s.slice(n):a.shift()}o>0&&a.push(e[i].slice(0,o))}return a}function mNe(e,t){let r=-1;const n=[];let i;for(;++r<e.length;){const o=e[r];let a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,n.push(a)}return n.join("")}function gNe(e){const n={constructs:SRe([hNe,...(e||{}).extensions||[]]),content:i(ORe),defined:[],document:i(PRe),flow:i(JIe),lazy:{},string:i(eNe),text:i(tNe)};return n;function i(o){return a;function a(s){return fNe(n,o,s)}}}function yNe(e){for(;!f1(e););return e}const z4=/[\0\t\n\r]/g;function vNe(){let e=1,t="",r=!0,n;return i;function i(o,a,s){const l=[];let c,u,h,f,p;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(a||void 0).decode(o)),h=0,t="",r&&(o.charCodeAt(0)===65279&&h++,r=void 0);h<o.length;){if(z4.lastIndex=h,c=z4.exec(o),f=c&&c.index!==void 0?c.index:o.length,p=o.charCodeAt(f),!c){t=o.slice(h);break}if(p===10&&h===f&&n)l.push(-3),n=void 0;else switch(n&&(l.push(-5),n=void 0),h<f&&(l.push(o.slice(h,f)),e+=f-h),p){case 0:{l.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,l.push(-2);e++<u;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:n=!0,e=1}h=f+1}return s&&(n&&l.push(-5),t&&l.push(t),l.push(null)),l}}const bNe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ENe(e){return e.replace(bNe,_Ne)}function _Ne(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const i=r.charCodeAt(1),o=i===120||i===88;return c1(r.slice(o?2:1),o?16:10)}return N2(r)||e}const b1={}.hasOwnProperty;function wNe(e,t,r){return typeof t!="string"&&(r=t,t=void 0),SNe(r)(yNe(gNe(r).document().write(vNe()(e,t,!0))))}function SNe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(He),autolinkProtocol:H,autolinkEmail:H,atxHeading:o(et),blockQuote:o(Pe),characterEscape:H,characterReference:H,codeFenced:o($e),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o($e,a),codeText:o(je,a),codeTextData:H,data:H,codeFlowValue:H,definition:o(ot),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(Nt),hardBreakEscape:o(bt),hardBreakTrailing:o(bt),htmlFlow:o(Ie,a),htmlFlowData:H,htmlText:o(Ie,a),htmlTextData:H,image:o(rt),label:a,link:o(He),listItem:o(qe),listItemValue:f,listOrdered:o(Ze,h),listUnordered:o(Ze),paragraph:o(re),reference:C,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(et),strong:o(Ae),thematicBreak:o(We)},exit:{atxHeading:l(),atxHeadingSequence:I,autolink:l(),autolinkEmail:pe,autolinkProtocol:he,blockQuote:l(),characterEscapeValue:V,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:X,characterReference:ae,codeFenced:l(y),codeFencedFence:g,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:V,codeIndented:l(v),codeText:l(F),codeTextData:V,data:V,definition:l(),definitionDestinationString:S,definitionLabelString:b,definitionTitleString:_,emphasis:l(),hardBreakEscape:l(Y),hardBreakTrailing:l(Y),htmlFlow:l(Z),htmlFlowData:V,htmlText:l($),htmlTextData:V,image:l(k),label:B,labelText:P,lineEnding:G,link:l(K),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:W,resourceDestinationString:x,resourceTitleString:E,resource:N,setextHeading:l(M),setextHeadingLineSequence:D,setextHeadingText:A,strong:l(),thematicBreak:l()}};E1(t,(e||{}).mdastExtensions||[]);const r={};return n;function n(ne){let ye={type:"root",children:[]};const Je={stack:[ye],tokenStack:[],config:t,enter:s,exit:c,buffer:a,resume:u,data:r},ut=[];let qt=-1;for(;++qt<ne.length;)if(ne[qt][1].type==="listOrdered"||ne[qt][1].type==="listUnordered")if(ne[qt][0]==="enter")ut.push(qt);else{const Vn=ut.pop();qt=i(ne,Vn,qt)}for(qt=-1;++qt<ne.length;){const Vn=t[ne[qt][0]];b1.call(Vn,ne[qt][1].type)&&Vn[ne[qt][1].type].call(Object.assign({sliceSerialize:ne[qt][2].sliceSerialize},Je),ne[qt][1])}if(Je.tokenStack.length>0){const Vn=Je.tokenStack[Je.tokenStack.length-1];(Vn[1]||G4).call(Je,void 0,Vn[0])}for(ye.position={start:qc(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:qc(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},qt=-1;++qt<t.transforms.length;)ye=t.transforms[qt](ye)||ye;return ye}function i(ne,ye,Je){let ut=ye-1,qt=-1,Vn=!1,Cn,yi,xn,Oi;for(;++ut<=Je;){const bn=ne[ut];switch(bn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{bn[0]==="enter"?qt++:qt--,Oi=void 0;break}case"lineEndingBlank":{bn[0]==="enter"&&(Cn&&!Oi&&!qt&&!xn&&(xn=ut),Oi=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Oi=void 0}if(!qt&&bn[0]==="enter"&&bn[1].type==="listItemPrefix"||qt===-1&&bn[0]==="exit"&&(bn[1].type==="listUnordered"||bn[1].type==="listOrdered")){if(Cn){let vi=ut;for(yi=void 0;vi--;){const Rn=ne[vi];if(Rn[1].type==="lineEnding"||Rn[1].type==="lineEndingBlank"){if(Rn[0]==="exit")continue;yi&&(ne[yi][1].type="lineEndingBlank",Vn=!0),Rn[1].type="lineEnding",yi=vi}else if(!(Rn[1].type==="linePrefix"||Rn[1].type==="blockQuotePrefix"||Rn[1].type==="blockQuotePrefixWhitespace"||Rn[1].type==="blockQuoteMarker"||Rn[1].type==="listItemIndent"))break}xn&&(!yi||xn<yi)&&(Cn._spread=!0),Cn.end=Object.assign({},yi?ne[yi][1].start:bn[1].end),ne.splice(yi||ut,0,["exit",Cn,bn[2]]),ut++,Je++}if(bn[1].type==="listItemPrefix"){const vi={type:"listItem",_spread:!1,start:Object.assign({},bn[1].start),end:void 0};Cn=vi,ne.splice(ut,0,["enter",vi,bn[2]]),ut++,Je++,xn=void 0,Oi=!0}}}return ne[ye][1]._spread=Vn,Je}function o(ne,ye){return Je;function Je(ut){s.call(this,ne(ut),ut),ye&&ye.call(this,ut)}}function a(){this.stack.push({type:"fragment",children:[]})}function s(ne,ye,Je){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([ye,Je||void 0]),ne.position={start:qc(ye.start),end:void 0}}function l(ne){return ye;function ye(Je){ne&&ne.call(this,Je),c.call(this,Je)}}function c(ne,ye){const Je=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==ne.type&&(ye?ye.call(this,ne,ut[0]):(ut[1]||G4).call(this,ne,ut[0]));else throw new Error("Cannot close `"+ne.type+"` ("+Ry({start:ne.start,end:ne.end})+"): it’s not open");Je.position.end=qc(ne.end)}function u(){return _Re(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(ne){if(this.data.expectingFirstListItemValue){const ye=this.stack[this.stack.length-2];ye.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function p(){const ne=this.resume(),ye=this.stack[this.stack.length-1];ye.lang=ne}function m(){const ne=this.resume(),ye=this.stack[this.stack.length-1];ye.meta=ne}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const ne=this.resume(),ye=this.stack[this.stack.length-1];ye.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const ne=this.resume(),ye=this.stack[this.stack.length-1];ye.value=ne.replace(/(\r?\n|\r)$/g,"")}function b(ne){const ye=this.resume(),Je=this.stack[this.stack.length-1];Je.label=ye,Je.identifier=Rp(this.sliceSerialize(ne)).toLowerCase()}function _(){const ne=this.resume(),ye=this.stack[this.stack.length-1];ye.title=ne}function S(){const ne=this.resume(),ye=this.stack[this.stack.length-1];ye.url=ne}function I(ne){const ye=this.stack[this.stack.length-1];if(!ye.depth){const Je=this.sliceSerialize(ne).length;ye.depth=Je}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function D(ne){const ye=this.stack[this.stack.length-1];ye.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function M(){this.data.setextHeadingSlurpLineEnding=void 0}function H(ne){const Je=this.stack[this.stack.length-1].children;let ut=Je[Je.length-1];(!ut||ut.type!=="text")&&(ut=Fe(),ut.position={start:qc(ne.start),end:void 0},Je.push(ut)),this.stack.push(ut)}function V(ne){const ye=this.stack.pop();ye.value+=this.sliceSerialize(ne),ye.position.end=qc(ne.end)}function G(ne){const ye=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Je=ye.children[ye.children.length-1];Je.position.end=qc(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ye.type)&&(H.call(this,ne),V.call(this,ne))}function Y(){this.data.atHardBreak=!0}function Z(){const ne=this.resume(),ye=this.stack[this.stack.length-1];ye.value=ne}function $(){const ne=this.resume(),ye=this.stack[this.stack.length-1];ye.value=ne}function F(){const ne=this.resume(),ye=this.stack[this.stack.length-1];ye.value=ne}function K(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=ye,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function k(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=ye,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function P(ne){const ye=this.sliceSerialize(ne),Je=this.stack[this.stack.length-2];Je.label=ENe(ye),Je.identifier=Rp(ye).toLowerCase()}function B(){const ne=this.stack[this.stack.length-1],ye=this.resume(),Je=this.stack[this.stack.length-1];if(this.data.inReference=!0,Je.type==="link"){const ut=ne.children;Je.children=ut}else Je.alt=ye}function x(){const ne=this.resume(),ye=this.stack[this.stack.length-1];ye.url=ne}function E(){const ne=this.resume(),ye=this.stack[this.stack.length-1];ye.title=ne}function N(){this.data.inReference=void 0}function C(){this.data.referenceType="collapsed"}function W(ne){const ye=this.resume(),Je=this.stack[this.stack.length-1];Je.label=ye,Je.identifier=Rp(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function U(ne){this.data.characterReferenceType=ne.type}function X(ne){const ye=this.sliceSerialize(ne),Je=this.data.characterReferenceType;let ut;Je?(ut=c1(ye,Je==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=N2(ye);const qt=this.stack[this.stack.length-1];qt.value+=ut}function ae(ne){const ye=this.stack.pop();ye.position.end=qc(ne.end)}function he(ne){V.call(this,ne);const ye=this.stack[this.stack.length-1];ye.url=this.sliceSerialize(ne)}function pe(ne){V.call(this,ne);const ye=this.stack[this.stack.length-1];ye.url="mailto:"+this.sliceSerialize(ne)}function Pe(){return{type:"blockquote",children:[]}}function $e(){return{type:"code",lang:null,meta:null,value:""}}function je(){return{type:"inlineCode",value:""}}function ot(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Nt(){return{type:"emphasis",children:[]}}function et(){return{type:"heading",depth:0,children:[]}}function bt(){return{type:"break"}}function Ie(){return{type:"html",value:""}}function rt(){return{type:"image",title:null,url:"",alt:null}}function He(){return{type:"link",title:null,url:"",children:[]}}function Ze(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function qe(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function re(){return{type:"paragraph",children:[]}}function Ae(){return{type:"strong",children:[]}}function Fe(){return{type:"text",value:""}}function We(){return{type:"thematicBreak"}}}function qc(e){return{line:e.line,column:e.column,offset:e.offset}}function E1(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?E1(e,n):TNe(e,n)}}function TNe(e,t){let r;for(r in t)if(b1.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function G4(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ry({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ry({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ry({start:t.start,end:t.end})+") is still open")}function CNe(e){const t=this;t.parser=r;function r(n){return wNe(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function xNe(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function RNe(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function INe(e,t){const r=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function NNe(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ANe(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ONe(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),i=Fm(n.toLowerCase()),o=e.footnoteOrder.indexOf(n);let a,s=e.footnoteCounts.get(n);s===void 0?(s=0,e.footnoteOrder.push(n),a=e.footnoteOrder.length):a=o+1,s+=1,e.footnoteCounts.set(n,s);const l={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+i,id:r+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)}function kNe(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function PNe(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function _1(e,t){const r=t.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=n:i.push({type:"text",value:n}),i}function DNe(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return _1(e,t);const i={src:Fm(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(i.title=n.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function LNe(e,t){const r={src:Fm(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function MNe(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function jNe(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return _1(e,t);const i={href:Fm(n.url||"")};n.title!==null&&n.title!==void 0&&(i.title=n.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function UNe(e,t){const r={href:Fm(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function FNe(e,t,r){const n=e.all(t),i=r?VNe(r):w1(t),o={},a=[];if(typeof t.checked=="boolean"){const u=n[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},n.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let s=-1;for(;++s<n.length;){const u=n[s];(i||s!==0||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?a.push(...u.children):a.push(u)}const l=n[n.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:o,children:a};return e.patch(t,c),e.applyData(t,c)}function VNe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=w1(r[n])}return t}function w1(e){const t=e.spread;return t??e.children.length>1}function BNe(e,t){const r={},n=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++i<n.length;){const a=n[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,o),e.applyData(t,o)}function $Ne(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function HNe(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function zNe(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function GNe(e,t){const r=e.all(t),n=r.shift(),i=[];if(n){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],a),i.push(a)}if(r.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},s=C2(t.children[1]),l=r1(t.children[t.children.length-1]);s&&l&&(a.position={start:s,end:l}),i.push(a)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function WNe(e,t,r){const n=r?r.children:void 0,o=(n?n.indexOf(t):1)===0?"th":"td",a=r&&r.type==="table"?r.align:void 0,s=a?a.length:t.children.length;let l=-1;const c=[];for(;++l<s;){const h=t.children[l],f={},p=a?a[l]:void 0;p&&(f.align=p);let m={type:"element",tagName:o,properties:f,children:[]};h&&(m.children=e.all(h),e.patch(h,m),m=e.applyData(h,m)),c.push(m)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,u),e.applyData(t,u)}function KNe(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const W4=9,K4=32;function qNe(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),i=0;const o=[];for(;n;)o.push(q4(t.slice(i,n.index),i>0,!0),n[0]),i=n.index+n[0].length,n=r.exec(t);return o.push(q4(t.slice(i),i>0,!1)),o.join("")}function q4(e,t,r){let n=0,i=e.length;if(t){let o=e.codePointAt(n);for(;o===W4||o===K4;)n++,o=e.codePointAt(n)}if(r){let o=e.codePointAt(i-1);for(;o===W4||o===K4;)i--,o=e.codePointAt(i-1)}return i>n?e.slice(n,i):""}function YNe(e,t){const r={type:"text",value:qNe(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function XNe(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const JNe={blockquote:xNe,break:RNe,code:INe,delete:NNe,emphasis:ANe,footnoteReference:ONe,heading:kNe,html:PNe,imageReference:DNe,image:LNe,inlineCode:MNe,linkReference:jNe,link:UNe,listItem:FNe,list:BNe,paragraph:$Ne,root:HNe,strong:zNe,table:GNe,tableCell:KNe,tableRow:WNe,text:YNe,thematicBreak:XNe,toml:Db,yaml:Db,definition:Db,footnoteDefinition:Db};function Db(){}const S1=-1,UT=0,Ny=1,Gw=2,k2=3,P2=4,D2=5,L2=6,T1=7,C1=8,Y4=typeof self=="object"?self:globalThis,QNe=(e,t)=>{const r=(i,o)=>(e.set(o,i),i),n=i=>{if(e.has(i))return e.get(i);const[o,a]=t[i];switch(o){case UT:case S1:return r(a,i);case Ny:{const s=r([],i);for(const l of a)s.push(n(l));return s}case Gw:{const s=r({},i);for(const[l,c]of a)s[n(l)]=n(c);return s}case k2:return r(new Date(a),i);case P2:{const{source:s,flags:l}=a;return r(new RegExp(s,l),i)}case D2:{const s=r(new Map,i);for(const[l,c]of a)s.set(n(l),n(c));return s}case L2:{const s=r(new Set,i);for(const l of a)s.add(n(l));return s}case T1:{const{name:s,message:l}=a;return r(new Y4[s](l),i)}case C1:return r(BigInt(a),i);case"BigInt":return r(Object(BigInt(a)),i);case"ArrayBuffer":return r(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:s}=new Uint8Array(a);return r(new DataView(s),a)}}return r(new Y4[o](a),i)};return n},X4=e=>QNe(new Map,e)(0),gf="",{toString:ZNe}={},{keys:eAe}=Object,Cg=e=>{const t=typeof e;if(t!=="object"||!e)return[UT,t];const r=ZNe.call(e).slice(8,-1);switch(r){case"Array":return[Ny,gf];case"Object":return[Gw,gf];case"Date":return[k2,gf];case"RegExp":return[P2,gf];case"Map":return[D2,gf];case"Set":return[L2,gf];case"DataView":return[Ny,r]}return r.includes("Array")?[Ny,r]:r.includes("Error")?[T1,r]:[Gw,r]},Lb=([e,t])=>e===UT&&(t==="function"||t==="symbol"),tAe=(e,t,r,n)=>{const i=(a,s)=>{const l=n.push(a)-1;return r.set(s,l),l},o=a=>{if(r.has(a))return r.get(a);let[s,l]=Cg(a);switch(s){case UT:{let u=a;switch(l){case"bigint":s=C1,u=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([S1],a)}return i([s,u],a)}case Ny:{if(l){let f=a;return l==="DataView"?f=new Uint8Array(a.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(a)),i([l,[...f]],a)}const u=[],h=i([s,u],a);for(const f of a)u.push(o(f));return h}case Gw:{if(l)switch(l){case"BigInt":return i([l,a.toString()],a);case"Boolean":case"Number":case"String":return i([l,a.valueOf()],a)}if(t&&"toJSON"in a)return o(a.toJSON());const u=[],h=i([s,u],a);for(const f of eAe(a))(e||!Lb(Cg(a[f])))&&u.push([o(f),o(a[f])]);return h}case k2:return i([s,a.toISOString()],a);case P2:{const{source:u,flags:h}=a;return i([s,{source:u,flags:h}],a)}case D2:{const u=[],h=i([s,u],a);for(const[f,p]of a)(e||!(Lb(Cg(f))||Lb(Cg(p))))&&u.push([o(f),o(p)]);return h}case L2:{const u=[],h=i([s,u],a);for(const f of a)(e||!Lb(Cg(f)))&&u.push(o(f));return h}}const{message:c}=a;return i([s,{name:l,message:c}],a)};return o},J4=(e,{json:t,lossy:r}={})=>{const n=[];return tAe(!(t||r),!!t,new Map,n)(e),n},Ww=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?X4(J4(e,t)):structuredClone(e):(e,t)=>X4(J4(e,t));function rAe(e,t){const r=[{type:"text",value:"↩"}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function nAe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function iAe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||rAe,n=e.options.footnoteBackLabel||nAe,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[l]);if(!c)continue;const u=e.all(c),h=String(c.identifier).toUpperCase(),f=Fm(h.toLowerCase());let p=0;const m=[],g=e.footnoteCounts.get(h);for(;g!==void 0&&++p<=g;){m.length>0&&m.push({type:"text",value:" "});let b=typeof r=="string"?r:r(l,p);typeof b=="string"&&(b={type:"text",value:b}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(l,p),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const b=y.children[y.children.length-1];b&&b.type==="text"?b.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...m)}else u.push(...m);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(u,!0)};e.patch(c,v),s.push(v)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Ww(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:`
`}]}}const x1=function(e){if(e==null)return lAe;if(typeof e=="function")return FT(e);if(typeof e=="object")return Array.isArray(e)?oAe(e):aAe(e);if(typeof e=="string")return sAe(e);throw new Error("Expected function, string, or object as test")};function oAe(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=x1(e[r]);return FT(n);function n(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function aAe(e){const t=e;return FT(r);function r(n){const i=n;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function sAe(e){return FT(t);function t(r){return r&&r.type===e}}function FT(e){return t;function t(r,n,i){return!!(cAe(r)&&e.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function lAe(){return!0}function cAe(e){return e!==null&&typeof e=="object"&&"type"in e}const R1=[],uAe=!0,Q4=!1,dAe="skip";function hAe(e,t,r,n){let i;typeof t=="function"&&typeof r!="function"?(n=r,r=t):i=t;const o=x1(i),a=n?-1:1;s(e,void 0,[])();function s(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=R1,m,g,y;if((!t||o(l,c,u[u.length-1]||void 0))&&(p=fAe(r(l,u)),p[0]===Q4))return p;if("children"in l&&l.children){const v=l;if(v.children&&p[0]!==dAe)for(g=(n?v.children.length:-1)+a,y=u.concat(v);g>-1&&g<v.children.length;){const b=v.children[g];if(m=s(b,g,y)(),m[0]===Q4)return m;g=typeof m[1]=="number"?m[1]:g+a}}return p}}}function fAe(e){return Array.isArray(e)?e:typeof e=="number"?[uAe,e]:e==null?R1:[e]}function I1(e,t,r,n){let i,o,a;typeof t=="function"&&typeof r!="function"?(o=void 0,a=t,i=r):(o=t,a=r,i=n),hAe(e,o,s,i);function s(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return a(l,h,u)}}const yO={}.hasOwnProperty,pAe={};function mAe(e,t){const r=t||pAe,n=new Map,i=new Map,o=new Map,a={...JNe,...r.handlers},s={all:c,applyData:yAe,definitionById:n,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:a,one:l,options:r,patch:gAe,wrap:bAe};return I1(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?n:i,f=String(u.identifier).toUpperCase();h.has(f)||h.set(f,u)}}),s;function l(u,h){const f=u.type,p=s.handlers[f];if(yO.call(s.handlers,f)&&p)return p(s,u,h);if(s.options.passThrough&&s.options.passThrough.includes(f)){if("children"in u){const{children:g,...y}=u,v=Ww(y);return v.children=s.all(u),v}return Ww(u)}return(s.options.unknownHandler||vAe)(s,u,h)}function c(u){const h=[];if("children"in u){const f=u.children;let p=-1;for(;++p<f.length;){const m=s.one(f[p],u);if(m){if(p&&f[p-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=Z4(m.value)),!Array.isArray(m)&&m.type==="element")){const g=m.children[0];g&&g.type==="text"&&(g.value=Z4(g.value))}Array.isArray(m)?h.push(...m):h.push(m)}}}return h}}function gAe(e,t){e.position&&(t.position=Zxe(e))}function yAe(e,t){let r=t;if(e&&e.data){const n=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const a="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:a}}r.type==="element"&&o&&Object.assign(r.properties,Ww(o)),"children"in r&&r.children&&i!==null&&i!==void 0&&(r.children=i)}return r}function vAe(e,t){const r=t.data||{},n="value"in t&&!(yO.call(r,"hProperties")||yO.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bAe(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function Z4(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function e3(e,t){const r=mAe(e,t),n=r.one(e,void 0),i=iAe(r),o=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function EAe(e,t){return e&&"run"in e?async function(r,n){const i=e3(r,{file:n,...t});await e.run(i,n)}:function(r,n){return e3(r,{file:n,...e||t})}}function t3(e){if(e)throw e}var r_=Object.prototype.hasOwnProperty,N1=Object.prototype.toString,r3=Object.defineProperty,n3=Object.getOwnPropertyDescriptor,i3=function(t){return typeof Array.isArray=="function"?Array.isArray(t):N1.call(t)==="[object Array]"},o3=function(t){if(!t||N1.call(t)!=="[object Object]")return!1;var r=r_.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&r_.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var i;for(i in t);return typeof i>"u"||r_.call(t,i)},a3=function(t,r){r3&&r.name==="__proto__"?r3(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},s3=function(t,r){if(r==="__proto__")if(r_.call(t,r)){if(n3)return n3(t,r).value}else return;return t[r]},_Ae=function e(){var t,r,n,i,o,a,s=arguments[0],l=1,c=arguments.length,u=!1;for(typeof s=="boolean"&&(u=s,s=arguments[1]||{},l=2),(s==null||typeof s!="object"&&typeof s!="function")&&(s={});l<c;++l)if(t=arguments[l],t!=null)for(r in t)n=s3(s,r),i=s3(t,r),s!==i&&(u&&i&&(o3(i)||(o=i3(i)))?(o?(o=!1,a=n&&i3(n)?n:[]):a=n&&o3(n)?n:{},a3(s,{name:r,newValue:e(u,a,i)})):typeof i<"u"&&a3(s,{name:r,newValue:i}));return s};const Wx=oa(_Ae);function vO(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function wAe(){const e=[],t={run:r,use:n};return t;function r(...i){let o=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);s(null,...i);function s(l,...c){const u=e[++o];let h=-1;if(l){a(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?SAe(u,s)(...c):a(null,...c)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function SAe(e,t){let r;return n;function n(...a){const s=e.length>a.length;let l;s&&a.push(i);try{l=e.apply(this,a)}catch(c){const u=c;if(s&&r)throw u;return i(u)}s||(l&&l.then&&typeof l.then=="function"?l.then(o,i):l instanceof Error?i(l):o(l))}function i(a,...s){r||(r=!0,t(a,...s))}function o(a){i(null,a)}}const vl={basename:TAe,dirname:CAe,extname:xAe,join:RAe,sep:"/"};function TAe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');A0(e);let r=0,n=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){r=i+1;break}}else n<0&&(o=!0,n=i+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let a=-1,s=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){r=i+1;break}}else a<0&&(o=!0,a=i+1),s>-1&&(e.codePointAt(i)===t.codePointAt(s--)?s<0&&(n=i):(s=-1,n=a));return r===n?n=a:n<0&&(n=e.length),e.slice(r,n)}function CAe(e){if(A0(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function xAe(e){A0(e);let t=e.length,r=-1,n=0,i=-1,o=0,a;for(;t--;){const s=e.codePointAt(t);if(s===47){if(a){n=t+1;break}continue}r<0&&(a=!0,r=t+1),s===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||r<0||o===0||o===1&&i===r-1&&i===n+1?"":e.slice(i,r)}function RAe(...e){let t=-1,r;for(;++t<e.length;)A0(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":IAe(r)}function IAe(e){A0(e);const t=e.codePointAt(0)===47;let r=NAe(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function NAe(e,t){let r="",n=0,i=-1,o=0,a=-1,s,l;for(;++a<=e.length;){if(a<e.length)s=e.codePointAt(a);else{if(s===47)break;s=47}if(s===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(l=r.lastIndexOf("/"),l!==r.length-1){l<0?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=a,o=0;continue}}else if(r.length>0){r="",n=0,i=a,o=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(i+1,a):r=e.slice(i+1,a),n=a-i-1;i=a,o=0}else s===46&&o>-1?o++:o=-1}return r}function A0(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const AAe={cwd:OAe};function OAe(){return"/"}function bO(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function kAe(e){if(typeof e=="string")e=new URL(e);else if(!bO(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return PAe(e)}function PAe(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const n=t.codePointAt(r+2);if(n===70||n===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Kx=["history","path","basename","stem","extname","dirname"];class A1{constructor(t){let r;t?bO(t)?r={path:t}:typeof t=="string"||DAe(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":AAe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<Kx.length;){const o=Kx[n];o in r&&r[o]!==void 0&&r[o]!==null&&(this[o]=o==="history"?[...r[o]]:r[o])}let i;for(i in r)Kx.includes(i)||(this[i]=r[i])}get basename(){return typeof this.path=="string"?vl.basename(this.path):void 0}set basename(t){Yx(t,"basename"),qx(t,"basename"),this.path=vl.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?vl.dirname(this.path):void 0}set dirname(t){l3(this.basename,"dirname"),this.path=vl.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?vl.extname(this.path):void 0}set extname(t){if(qx(t,"extname"),l3(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=vl.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){bO(t)&&(t=kAe(t)),Yx(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?vl.basename(this.path,this.extname):void 0}set stem(t){Yx(t,"stem"),qx(t,"stem"),this.path=vl.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){const i=this.message(t,r,n);throw i.fatal=!0,i}info(t,r,n){const i=this.message(t,r,n);return i.fatal=void 0,i}message(t,r,n){const i=new vo(t,r,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function qx(e,t){if(e&&e.includes(vl.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+vl.sep+"`")}function Yx(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function l3(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function DAe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const LAe=function(e){const n=this.constructor.prototype,i=n[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,n),o},MAe={}.hasOwnProperty;class M2 extends LAe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=wAe()}copy(){const t=new M2;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];t.use(...n)}return t.data(Wx(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(Qx("data",this.frozen),this.namespace[t]=r,this):MAe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Qx("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const i=r.call(t,...n);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=Mb(t),n=this.parser||this.Parser;return Xx("parse",n),n(String(r),r)}process(t,r){const n=this;return this.freeze(),Xx("process",this.parser||this.Parser),Jx("process",this.compiler||this.Compiler),r?i(void 0,r):new Promise(i);function i(o,a){const s=Mb(t),l=n.parse(s);n.run(l,s,function(u,h,f){if(u||!h||!f)return c(u);const p=h,m=n.stringify(p,f);FAe(m)?f.value=m:f.result=m,c(u,f)});function c(u,h){u||!h?a(u):o?o(h):r(void 0,h)}}}processSync(t){let r=!1,n;return this.freeze(),Xx("processSync",this.parser||this.Parser),Jx("processSync",this.compiler||this.Compiler),this.process(t,i),u3("processSync","process",r),n;function i(o,a){r=!0,t3(o),n=a}}run(t,r,n){c3(t),this.freeze();const i=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?o(void 0,n):new Promise(o);function o(a,s){const l=Mb(r);i.run(t,l,c);function c(u,h,f){const p=h||t;u?s(u):a?a(p):n(void 0,p,f)}}}runSync(t,r){let n=!1,i;return this.run(t,r,o),u3("runSync","run",n),i;function o(a,s){t3(a),i=s,n=!0}}stringify(t,r){this.freeze();const n=Mb(r),i=this.compiler||this.Compiler;return Jx("stringify",i),c3(t),i(t,n)}use(t,...r){const n=this.attachers,i=this.namespace;if(Qx("use",this.frozen),t!=null)if(typeof t=="function")l(t,r);else if(typeof t=="object")Array.isArray(t)?s(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else a(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function a(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(c.plugins),c.settings&&(i.settings=Wx(!0,i.settings,c.settings))}function s(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];o(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,f=-1;for(;++h<n.length;)if(n[h][0]===c){f=h;break}if(f===-1)n.push([c,...u]);else if(u.length>0){let[p,...m]=u;const g=n[f][1];vO(g)&&vO(p)&&(p=Wx(!0,g,p)),n[f]=[c,p,...m]}}}}const jAe=new M2().freeze();function Xx(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Jx(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Qx(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function c3(e){if(!vO(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function u3(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Mb(e){return UAe(e)?e:new A1(e)}function UAe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function FAe(e){return typeof e=="string"||VAe(e)}function VAe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const BAe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",d3=[],h3={allowDangerousHtml:!0},$Ae=/^(https?|ircs?|mailto|xmpp)$/i,HAe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function zAe(e){const t=GAe(e),r=WAe(e);return KAe(t.runSync(t.parse(r),r),e)}function GAe(e){const t=e.rehypePlugins||d3,r=e.remarkPlugins||d3,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...h3}:h3;return jAe().use(CNe).use(r).use(EAe,n).use(t)}function WAe(e){const t=e.children||"",r=new A1;return typeof t=="string"&&(r.value=t),r}function KAe(e,t){const r=t.allowedElements,n=t.allowElement,i=t.components,o=t.disallowedElements,a=t.skipHtml,s=t.unwrapDisallowed,l=t.urlTransform||qAe;for(const u of HAe)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+BAe+u.id,void 0);return I1(e,c),iRe(e,{Fragment:d.Fragment,components:i,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function c(u,h,f){if(u.type==="raw"&&f&&typeof h=="number")return a?f.children.splice(h,1):f.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let p;for(p in Hx)if(Object.hasOwn(Hx,p)&&Object.hasOwn(u.properties,p)){const m=u.properties[p],g=Hx[p];(g===null||g.includes(u.tagName))&&(u.properties[p]=l(String(m||""),p,u))}}if(u.type==="element"){let p=r?!r.includes(u.tagName):o?o.includes(u.tagName):!1;if(!p&&n&&typeof h=="number"&&(p=!n(u,h,f)),p&&f&&typeof h=="number")return s&&u.children?f.children.splice(h,1,...u.children):f.children.splice(h,1),h}}}function qAe(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||r!==-1&&t>r||n!==-1&&t>n||$Ae.test(e.slice(0,t))?e:""}function YAe(){T.useState();const[e,t]=T.useState(void 0);T.useState(void 0);const r=async(n,i)=>{const o=await $J({diseaseName:i});console.log("doctor",o),window.location.reload()};return d.jsx("div",{className:"w-full h-screen pt-10 flex flex-col",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-6",children:[d.jsx("div",{className:"header w-full h-[10%] flex justify-start",children:d.jsx("span",{className:"text-2xl font-medium",children:"Treatment Suggestion "})}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-5",children:[d.jsx("input",{type:"text",name:"disease",className:"w-[40%]",onChange:n=>t(n.target.value),placeholder:"type disease name"}),d.jsx("button",{className:"h-full w-[5vw] bg-orange-500 shadow-lg rounded-md",onClick:n=>r(n,e),children:"Search"})]}),d.jsxs("div",{className:"w-full h-auto border rounded-lg p-2 grid grid-cols-2 gap-4",children:[d.jsx("div",{className:"flex w-full h-auto bg-black bg-opacity-20",children:e&&d.jsx(XAe,{diseaseName:e})}),d.jsx("div",{className:"flex w-full h-auto bg-black bg-opacity-20 p-2",children:e&&d.jsx(JAe,{diseaseName:e})})]})]})})}function XAe(e){const{diseaseName:t}=e,[r,n]=T.useState(void 0),i=async()=>{const o=await $J({diseaseName:t}),a=await FJ({doctorId:o});n(a)};return T.useEffect(()=>{i()},[]),T.useEffect(()=>{i()},[t]),d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-2",children:[d.jsx("h2",{className:"w-full h-auto p-3 flex justify-center bg-blue-500 text-lg text-white",children:"Suggested Doctors"}),d.jsx("div",{className:"suggestions w-full h-auto mt-3",children:r&&d.jsx(UJ,{doctor:r})})]})}function JAe(e){const t="AIzaSyBXEFxQGZZevsfg-BQhHu1H9bgMhfv39ig",n=new lxe(t).getGenerativeModel({model:"gemini-1.5-flash"}),{diseaseName:i}=e,[o,a]=T.useState(""),s=async()=>{const l=`As a doctor explain the precautions to be followed for a patient suffering from disease " ${i} " and present it in a professional structured way`,c=await n.generateContent(l);a(c.response.text())};return T.useEffect(()=>{s()},[]),T.useEffect(()=>{s()},[i]),d.jsxs("div",{className:"w-full h-auto flex flex-col gap-4 p-2",children:[d.jsx("div",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center",children:`Precautions for ${i}`}),d.jsx("div",{className:"w-full h-auto flex flex-col",children:d.jsx(zAe,{children:o})})]})}function QAe(e){return Fn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M363 277h-86v86h-42v-86h-86v-42h86v-86h42v86h86v42z"},child:[]},{tag:"path",attr:{d:"M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422c-44.3 0-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256c0-44.3 17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}function ZAe(e){return Fn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M426.666 330.667a250.385 250.385 0 0 1-75.729-11.729c-7.469-2.136-16-1.073-21.332 5.333l-46.939 46.928c-60.802-30.928-109.864-80-140.802-140.803l46.939-46.927c5.332-5.333 7.462-13.864 5.332-21.333-8.537-24.531-12.802-50.136-12.802-76.803C181.333 73.604 171.734 64 160 64H85.333C73.599 64 64 73.604 64 85.333 64 285.864 226.136 448 426.666 448c11.73 0 21.334-9.604 21.334-21.333V352c0-11.729-9.604-21.333-21.334-21.333z"},child:[]}]})(e)}function eOe(e){return Fn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M113.5 281.2v85.3L256 448l142.5-81.5v-85.3L256 362.7l-142.5-81.5zM256 64L32 192l224 128 183.3-104.7v147.4H480V192L256 64z"},child:[]}]})(e)}function tOe(e){return Fn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 192v128h85.334L256 431.543V80.458L149.334 192H64z"},child:[]}]})(e)}function rOe(e){return Fn({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{strokeWidth:"2",d:"M15 19H2V1h16v4m0 0a5 5 0 110 10 5 5 0 010-10zm-3 9v8l3-2 3 2v-8M5 8h6m-6 3h5m-5 3h2M5 5h2"},child:[]}]})(e)}function nOe(){return d.jsxs("div",{className:"w-full h-[10vh] px-2 text-center font-bold flex justify-center items-center gap-2 ",children:[d.jsxs(Rr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/doctor/profile/details",children:[d.jsx(DT,{className:"h-[3vh] w-[2vw]"}),d.jsx("span",{className:"flex flex-1",children:"Profile Details"})]}),d.jsxs(Rr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/doctor/profile/contact",children:[d.jsx(p2,{className:"h-[3vh] w-[2vw]"}),d.jsx("span",{className:"flex flex-1",children:"Contact Details"})]}),d.jsxs(Rr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/doctor/profile/resetPassword",children:[d.jsx(m2,{className:"h-[3vh] w-[2vw]"}),d.jsx("span",{className:"flex flex-1",children:"Password Reset"})]}),d.jsxs(Rr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"",children:[d.jsx(eOe,{className:"h-[3vh] w-[2vw]"}),d.jsx("span",{className:"flex flex-1",children:"Educational Details"})]}),d.jsxs(Rr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"",children:[d.jsx(rOe,{className:"h-[3vh] w-[2vw]"}),d.jsx("span",{className:"flex flex-1",children:"Proof Documents"})]})]})}function iOe(){return d.jsxs("div",{className:"screen w-full h-full ",children:[d.jsx("div",{children:d.jsx(nOe,{})}),d.jsx("div",{className:"content w-full h-full flex flex-1 flex-col",children:d.jsx(gi,{})})]})}const Vm="https://hcompanion.onrender.com/api",VT=sessionStorage.getItem("token"),oOe=async e=>{try{const t=await ve.post(`${Vm}/doctor/profile/updateDetails`,{updateDetails:e},{headers:{Authorization:`bearer ${VT}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},aOe=async()=>{try{return(await ve.get(`${Vm}/doctor/profile/viewDetails`,{headers:{Authorization:`bearer ${VT}`}})).data.doctorDetails}catch(e){return console.log(e),!1}},sOe=async()=>{try{const e=await ve.get(`${Vm}/doctor/profile/getContactDetails`,{headers:{Authorization:`bearer ${VT}`}});return console.log(e.data),e.data.contactDetails}catch(e){return console.log(e),!1}},lOe=async e=>{try{const t=await ve.post(`${Vm}/doctor/profile/updateContactDetails`,e,{headers:{Authorization:`bearer ${VT}`}});return console.log(t.data),te.fire({icon:"success",text:"Contact Details Have been Updated"}),t.data.contactDetails}catch(t){return console.log(t),!1}},O1=async e=>{try{const t=await ve.post(`${Vm}/doctor/approval/form/submit`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},cOe=async()=>{try{return(await ve.get(`${Vm}/doctor/approval/viewDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.doctorDetails}catch(e){return console.log(e),!1}};function uOe(){const[e,t]=T.useState(""),r=Wr({initialValues:{firstName:"",lastName:"",age:"",bloodGroup:"",height:"",weight:"",profileImage:""},validationSchema:Ni().shape({}),onSubmit:async(o,a)=>{console.log("values",o),await oOe(o)&&(te.fire({icon:"success",text:"The profile has been updated"}),i())}}),n=o=>{const a=o.target.files[0],s=new FileReader;s.onload=l=>{t(l.target.result),r.setFieldValue("profileImage",a)},s.readAsDataURL(o.target.files[0])},i=async()=>{const o=await aOe();r.setFieldValue("firstName",o.firstName),r.setFieldValue("lastName",o.lastName),r.setFieldValue("age",o.age),r.setFieldValue("bloodGroup",o.bloodGroup),r.setFieldValue("height",o.height),r.setFieldValue("weight",o.weight),r.setFieldValue("profileImage",o.profileImage),t(o.profileImage)};return T.useEffect(()=>{i()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full flex flex-col items-center",children:d.jsxs("form",{className:"w-[50%] h-full flex flex-col gap-6 pt-10 ",children:[d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{helperText:"Choose an Image",name:"profileImage",onChange:n})})})]}),d.jsx(le,{variant:"filled",label:"First Name",name:"firstName",value:r.values.firstName,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Last Name",name:"lastName",value:r.values.lastName,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Age",name:"age",value:r.values.age,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Blood Group",name:"bloodGroup",value:r.values.bloodGroup,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Height",name:"height",value:r.values.height,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Weight",name:"weight",value:r.values.weight,onChange:r.handleChange}),d.jsxs("button",{type:"button",onClick:r.handleSubmit,className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(Gh,{}),"Save"]})]})})})}function dOe(){const e=Wr({initialValues:{place:"",state:"",district:"",country:"",pincode:"",houseName:"",phone:""},validationSchema:Ni().shape({}),onSubmit:async(r,n)=>{await lOe(r)&&t()}}),t=async()=>{const{phone:r,...n}=await sOe();console.log("temp contact",n._doc),e.setFieldValue("place",n._doc.place),e.setFieldValue("state",n._doc.state),e.setFieldValue("district",n._doc.district),e.setFieldValue("country",n._doc.country),e.setFieldValue("pincode",n._doc.pincode?n._doc.pincode:""),e.setFieldValue("houseName",n._doc.houseName),e.setFieldValue("phone",r)};return T.useEffect(()=>{t()},[]),d.jsx("div",{className:"w-full h-full",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 items-center pt-10",children:[d.jsx("div",{className:"w-[70%] ",children:d.jsx("h1",{className:"text-lg font-medium",children:"Address"})}),d.jsxs("form",{className:"w-[70%]  grid grid-cols-2 gap-4",children:[d.jsx(le,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:e.values.houseName}),d.jsx(le,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),d.jsx(le,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),d.jsx(le,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),d.jsx(le,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),d.jsx(le,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]}),d.jsxs("form",{className:"w-[70%] flex flex-col pt-10",children:[d.jsx("div",{children:d.jsx("h1",{className:"text-lg font-medium",children:"Contact Details"})}),d.jsx("div",{className:"w-[30%] flex flex-col gap-4 mt-5 ",children:d.jsx(le,{variant:"filled",label:"Phone",className:"font-bold",name:"phone",onChange:e.handleChange,value:e.values.phone})})]}),d.jsxs("button",{type:"button",onClick:e.handleSubmit,className:"w-[70%] text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(Gh,{}),"Save"]})]})})}function hOe(){return d.jsx("div",{className:"w-full h-screen flex pt-[15vh] justify-center",children:d.jsxs("div",{className:"resetPassword w-[40%] h-fit flex flex-col gap-6 border shadow-lg p-5 ",children:[d.jsx("h1",{className:"text-lg font-medium",children:"Reset Password"}),d.jsx(PJ,{})]})})}function fOe(){const{username:e}=rn(t=>t.user);return d.jsxs("div",{className:"w-full h-full flex flex-col",children:[d.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:d.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:d.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white p-10",children:[d.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome"}),d.jsx("span",{className:"text-[10vh] font-bold",children:e}),d.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Pharmacy offers you the best Management of the Medicines"})]})})}),d.jsx("div",{className:"stock w-full h-auto mt-5",children:d.jsx("div",{className:"w-full h-[100vh] flex gap-10",children:d.jsx("div",{className:"w-full h-auto flex justify-center",children:d.jsx("img",{src:"/normalUser.png",className:"rounded-full object-fit h-[20vh] w-[10vw]"})})})})]})}const qh="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const k1=async()=>{try{const e=await ve.get(`${qh}/laboratory/profile/getDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("lab details",e.data),e.data.laboratoryDetails}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?te.fire({icon:"warning",text:"Your session is out.....please Log In"}):e.status=="401"&&te.fire({icon:"warning",text:"Log In"}),!1}},pOe=async e=>{try{const t=await ve.post(`${qh}/laboratory/profile/updateDetails`,{updateDetails:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},mOe=async()=>{try{const e=await ve.get(`${qh}/laboratory/profile/getProfileDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("profile details",e.data),e.data.details}catch(e){return console.log(e),!1}},gOe=async()=>{try{return(await ve.get(`${qh}/laboratory/profile/getContactDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.contactDetails}catch(e){return console.log(e),!1}},yOe=async e=>{try{const t=await ve.post(`${qh}/laboratory/profile/updateContactDetails`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return te.fire({icon:"success",text:"Contact Details Have been Updated"}),!0}catch(t){return console.log(t),!1}},vOe=async e=>{try{const t=await ve.post(`${qh}/laboratory/approval/form/submit`,e,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});return!0}catch(t){return console.log(t),!1}},bOe=async()=>{try{return(await ve.get(`${qh}/laboratory/approval/viewDetails`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.laboratoryDetails}catch(e){return console.log(e),!1}},EOe={laboratoryName:"",ownerName:"",profileImage:""},P1=Nm({name:"laboratory",initialState:EOe,reducers:{setLaboratory(e,t){e.laboratoryName=t.payload.laboratoryName,e.ownerName=t.payload.ownerName,e.profileImage=t.payload.profileImage}}}),{setLaboratory:D1}=P1.actions,_Oe=P1.reducer;function wOe(){const e=$l(),t=Er(),{username:r,email:n}=rn(l=>l.user),{laboratoryName:i,ownerName:o,profileImage:a}=rn(l=>l.laboratory),s=async()=>{const l=await k1();l&&((l==null?void 0:l.approvalStatus)=="0"?t("/laboratory/approval/form"):(l==null?void 0:l.approvalStatus)=="1"&&t("/laboratory/approval/submitted"),e(Xn({username:l.userId.username,email:l.userId.email,phone:l.userId.phone,role:l.userId.role,isLoggedIn:!0})),e(D1({laboratoryName:l.laboratoryName,ownerName:l.ownerName,profileImage:l.profileImage})))};return T.useEffect(()=>{s()},[]),d.jsx("div",{className:"navbarParent h-full w-full ",children:d.jsxs("div",{className:"navbar w-full h-full flex flex-col rounded-tr-[3%] bg-pink-600 bg-opacity-90 p-4 gap-10 ",children:[d.jsxs("div",{className:"w-full h-[8vh] flex justify-start items-center gap-4 ",children:[d.jsx("img",{src:"/icons/arrowBack.png",alt:"",className:"h-[5vh] w-[] p-2 ml-2 bg-white  rounded-lg"}),d.jsx("h2",{className:"text-white text-sm",children:"Minimize"}),d.jsx("div",{className:"flex-1 h-full flex justify-end items-center",children:d.jsx("img",{src:"/logo.png",alt:"",className:"w-[7vw] h-[7vh] bg-white mr-4"})})]}),d.jsxs("div",{className:"profile h-[12%] flex flex-row justify-start gap-4",children:[d.jsx("div",{className:"profileImage w-auto h-full flex ",children:d.jsx("img",{src:a,alt:"image",className:"h-full w-[5vw] rounded-full "})}),d.jsxs("div",{className:"details flex-1 flex flex-col justify-center bg-white bg-opacity-30 p-2 rounded-lg gap-2 ",children:[d.jsx("span",{children:d.jsx("h2",{className:"text-white text-lg font-bold",children:i||r})}),d.jsx("span",{children:d.jsx("h2",{className:"text-white text-sm",children:"Laboratory"})})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(le,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"home w-full text-white h-[80%] flex flex-col gap-4 border-slate-50",children:[d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/laboratory_homeIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full cursor-pointer",onClick:()=>{t("/laboratory/home")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/laboratory_serviceIcon.jpg",alt:"laboratory services",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full cursor-pointer",onClick:()=>{t("/laboratory/testServices")},children:"Laboratory test Services"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/laboratory_testOrderIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{t("/laboratory/order")},children:"Test Orders"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{t("/laboratory/profile")},children:"Profile"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),e(Xn({})),t("/")},children:"sign out"})]})]})]})})}function SOe(){return d.jsxs("div",{className:"w-screen h-screen flex fex-col",children:[d.jsx("div",{className:"fixed header w-[21%] h-[100vh] ",children:d.jsx(wOe,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4 overflow-y-auto",children:d.jsx(gi,{})})]})}function TOe(){return d.jsxs("div",{className:"w-full h-auto p-5 flex flex-row gap-5 justify-start ",children:[d.jsxs(Rr,{className:"w-auto h-auto p-3 flex flex-row gap-5 items-center border rounded-lg shadow-lg shadow-emerald-200",to:"/laboratory/testServices/addTest",children:[d.jsx(QAe,{className:"w-[2vw] h-[4vh]"}),d.jsx("span",{className:"font-medium",children:"New Test"})]}),d.jsxs(Rr,{className:"w-auto h-auto p-3 flex flex-row gap-5 items-center border rounded-lg shadow-lg shadow-emerald-200",to:"/laboratory/testServices/viewTests",children:[d.jsx(MTe,{className:"w-[2vw] h-[4vh]"}),d.jsx("span",{className:"font-medium",children:"View Test Service"})]})]})}function COe(){return d.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[d.jsx("div",{className:"w-full h-[10vh]",children:d.jsx(TOe,{})}),d.jsx("div",{className:"content w-full h-full flex flex-col overflow-y-auto ",children:d.jsx(gi,{})})]})}const Ss="https://hcompanion.onrender.com/api",Ts=sessionStorage.getItem("token"),xOe=async({testName:e,testId:t,atLab:r,atHome:n,priceHome:i,priceLab:o})=>{try{const a=await ve.post(`${Ss}/laboratory/test/addTest`,{testId:t,priceHome:i,priceLab:o,atHome:n,atLab:r},{headers:{Authorization:`bearer ${Ts}`}});return!0}catch(a){return console.log(a),a.status=="500"&&a.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):a.status=="400"&&a.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):a.status=="400"&&a.response.data.errorTestPresent?te.fire({icon:"warning",text:"Test Already Present"}):a.status=="401"&&te.fire({icon:"warning",text:"Log In"}),!1}},ROe=async()=>{try{return(await ve.get(`${Ss}/laboratory/test/getTestsPresent`,{headers:{Authorization:`bearer ${Ts}`}})).data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):e.status=="401"&&te.fire({icon:"warning",text:"Log In"}),!1}},IOe=async()=>{try{return(await ve.get(`${Ss}/laboratory/test/getAddedTests`,{headers:{Authorization:`bearer ${Ts}`}})).data.tests}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):e.status=="401"&&te.fire({icon:"warning",text:"Log In"}),!1}},NOe=async({testName:e,testId:t})=>{try{const r=await ve.post(`${Ss}/laboratory/test/getAddedTestDetails`,{testName:e,testId:t},{headers:{Authorization:`bearer ${Ts}`}});return console.log(r.data),r.data.test}catch(r){return console.log(r),r.status=="500"&&r.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):r.status=="400"&&r.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):r.status=="401"?te.fire({icon:"warning",text:"Log In"}):r.status=="404"&&r.response.data.errorTestPresent&&te.fire({icon:"warning",text:"Test can't be found at database"}),!1}},AOe=async({testName:e,testId:t,atHome:r,atLab:n,priceHome:i,priceLab:o})=>{try{const a=await ve.post(`${Ss}/laboratory/test/updateAddedTestDetails`,{testName:e,testId:t,atHome:r,atLab:n,priceHome:i,priceLab:o},{headers:{Authorization:`bearer ${Ts}`}});return console.log(a.data),!0}catch(a){return console.log(a),a.status=="500"&&a.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):a.status=="400"&&a.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):a.status=="401"?te.fire({icon:"warning",text:"Log In"}):a.status=="400"&&a.response.data.errorDatabase&&te.fire({icon:"error",text:"Issue at the Database"}),!1}},OOe=async({testName:e,testId:t})=>{try{const r=await ve.post(`${Ss}/laboratory/test/deletedAddedTest`,{testName:e,testId:t},{headers:{Authorization:`bearer ${Ts}`}});return console.log(r.data),!0}catch(r){return console.log(r),r.status=="500"&&r.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):r.status=="400"&&r.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):r.status=="401"?te.fire({icon:"warning",text:"Log In"}):r.status=="400"&&r.response.data.errorDatabase&&te.fire({icon:"error",text:"Issue at the Database"}),!1}},kOe=async()=>{try{return(await ve.get(`${Ss}/laboratory/order/test/getOrderedTests`,{headers:{Authorization:`bearer ${Ts}`}})).data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):e.status=="401"?te.fire({icon:"warning",text:"Log In"}):e.status=="400"&&e.response.data.errorDatabase&&te.fire({icon:"error",text:"Issue at the Database"}),!1}},POe=async({testOrderId:e})=>{try{const t=await ve.post(`${Ss}/laboratory/order/test/completeOrderedTest`,{testOrderId:e},{headers:{Authorization:`bearer ${Ts}`}});return!0}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):t.status=="401"?te.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&te.fire({icon:"error",text:"Issue at the Database"}),!1}},DOe=async()=>{try{return(await ve.get(`${Ss}/laboratory/order/test/getCompletedOrderedTest`,{headers:{Authorization:`bearer ${Ts}`}})).data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):e.status=="401"?te.fire({icon:"warning",text:"Log In"}):e.status=="400"&&e.response.data.errorDatabase&&te.fire({icon:"error",text:"Issue at the Database"}),!1}},LOe=async({testOrderId:e})=>{try{return(await ve.post(`${Ss}/laboratory/order/test/completed/testDetails`,{testOrderId:e},{headers:{Authorization:`bearer ${Ts}`}})).data.order}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):t.status=="401"?te.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&te.fire({icon:"error",text:"Issue at the Database"}),!1}},MOe=async({testOrderId:e,testResultDescription:t,patientId:r,doctorId:n})=>{try{const i=await ve.post(`${Ss}/laboratory/order/test/uploadResult`,{testOrderId:e,testResultDescription:t,patientId:r,doctorId:n},{headers:{Authorization:`bearer ${Ts}`}});return!0}catch(i){return console.log(i),i.status=="500"&&i.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):i.status=="400"&&i.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):i.status=="401"?te.fire({icon:"warning",text:"Log In"}):i.status=="400"&&i.response.data.errorDatabase&&te.fire({icon:"error",text:"Issue at the Database"}),!1}},L1=async({testOrderId:e})=>{try{return(await ve.post(`${Ss}/laboratory/order/test/result/getDetails`,{testOrderId:e},{headers:{Authorization:`bearer ${Ts}`}})).data.result}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):t.status=="401"?te.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&te.fire({icon:"error",text:"Issue at the Database"}),!1}},M1=Ni().shape({testId:jt().required("choose right category"),atHome:kA().required(),atLab:kA().required(),priceHome:jt().when("atHome",{is:!0,then:()=>jt().required().matches(/^(0|[1-9]\d*)(\.\d{1,2})?$/,"Not a number"),otherwise:()=>jt()}),priceLab:jt().when("atLab",{is:!0,then:()=>jt().required().matches(/^(0|[1-9]\d*)(\.\d{1,2})?$/,"Not a number"),otherwise:()=>jt()})}).test("atHome-or-atlab","Should choose any of them",e=>(console.log("jjjj",e),e?e.atHome||e.atLab:!1)),jOe=Ni().shape({testResultDescription:jt().required("Shouldn't be left empty")});function UOe(){const[e,t]=T.useState({}),[r,n]=T.useState([]),[i,o]=T.useState(void 0),a=Wr({initialValues:{testId:"",priceHome:"",priceLab:"",atHome:!1,atLab:!1},validationSchema:M1,onSubmit:async(u,h)=>{await xOe(u)&&te.fire({icon:"success",text:"Test Service has been added"})}}),s=async u=>{const h=r==null?void 0:r.find(f=>f.testName==u.target.value);o(h),h?await a.setFieldValue("testId",h._id):await a.setFieldValue("testId",""),a.setFieldTouched("testId",!0)},l=async u=>{await t({...e,[u.target.name]:!e[u.target.name]}),u.target.name=="home"?(await a.setFieldValue("atHome",!a.values.atHome),a.setFieldTouched("atHome",!0)):u.target.name=="lab"&&(await a.setFieldValue("atLab",!a.values.atLab),a.setFieldTouched("atLab",!0))},c=async()=>{const u=await ROe();await n(u)};return T.useEffect(()=>{c()},[]),T.useEffect(()=>{const u=[];Object.keys(e).forEach(h=>{e[h]&&u.push(h)}),a.setFieldValue("testType",u)},[e]),console.log("values",a.values),console.log("errors",a.errors),d.jsx("div",{className:"w-full h-full flex flex-col items-center ",children:d.jsxs("form",{onSubmit:a.handleSubmit,className:"w-[80%] h-full flex flex-col gap-5 pt-20 px-5",children:[d.jsx("h1",{className:"font-bold text-emerald-400 text-2xl",children:"Test"}),d.jsxs("div",{className:"w-full h-auto flex flex-row gap-5 ",children:[d.jsxs("div",{className:"w-[60%] h-full flex flex-col gap-5",children:[d.jsx(le,{list:"tests",name:"testName",variant:"filled",label:"Test Type",onChange:s,onBlur:u=>a.setFieldTouched("testId",!0),...a.touched.testId&&(a.errors.testId?{color:"error",helperText:`${a.errors.testId}`}:{color:"success"})}),d.jsx("div",{children:d.jsx("datalist",{id:"tests",children:r&&r.map((u,h)=>d.jsx("option",{value:u.testName},h))})}),d.jsx("textarea",{label:" Test Description",rows:"10",value:i&&i.testDescription,placeholder:"Test Description"}),d.jsxs("div",{className:"options w-full h-auto flex flex-col gap-10 ",children:[d.jsx("h1",{className:"text-md font-medium",children:"Test Service Options"}),d.jsxs("div",{className:"flex flex-1 gap-10 w-full",children:[d.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("input",{type:"checkbox",id:"id_chkhome",name:"home",value:"home",onChange:l,checked:a.va}),d.jsx("span",{children:"Home"})]}),e.home&&d.jsx(le,{variant:"filled",label:"Price at Home",name:"priceHome",onChange:a.handleChange,onBlur:a.handleBlur,...a.touched.priceHome&&(a.errors.priceHome?{color:"error",helperText:`${a.errors.priceHome}`}:{color:"success"})})]}),d.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("input",{type:"checkbox",id:"id_lab",name:"lab",value:"lab",onChange:l}),d.jsx("span",{children:"Lab"})]}),e.lab&&d.jsx(le,{variant:"filled",label:"Price at Lab",name:"priceLab",onChange:a.handleChange,onBlur:a.handleBlur,...a.touched.priceLab&&(a.errors.priceLab?{color:"error",helperText:`${a.errors.priceLab}`}:{color:"success"})})]})]})]}),d.jsx("button",{type:"submit",className:"w-[full] h-[5vh] border rounded-[5%] bg-orange-500 p-2 mb-5",children:"Add Test"})]}),d.jsx("div",{className:"w-[30%] h-[40vh] flex flex-col",children:d.jsx("img",{src:i&&i.testImage,className:"h-full w-full object-fit",alt:"testImage"})})]})]})})}function FOe(){return d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full",children:d.jsx(VOe,{})})})}function VOe(e){const t=Er(),[r,n]=T.useState(),i=["Test Name","image","on Home","on Clinic","Edit","Delete"],o=async()=>{const s=await IOe();n(s)};T.useEffect(()=>{o()},[]);const a=async(s,l)=>{te.fire({showCancelButton:!0,title:"Do you want to delete",text:"please click yes to proceed",confirmButtonText:"Delete"}).then(async c=>{c.isConfirmed&&await OOe({testId:l==null?void 0:l.testId})&&(te.fire("Deleted","","success"),o())})};return d.jsx("div",{className:"w-auto h-auto px-10 py-5",children:d.jsxs(yr,{hoverable:!0,children:[d.jsx(yr.Head,{children:i.map((s,l)=>d.jsx(yr.HeadCell,{children:s},l))}),d.jsx(yr.Body,{className:"font-bold text-black",children:r&&r.map((s,l)=>d.jsxs(yr.Row,{className:"border border-b-black",children:[d.jsx(yr.Cell,{children:s.testId.testName}),d.jsx(yr.Cell,{children:d.jsx("img",{src:s.testId.testImage,className:"w-[3vw] h-[4vh] object-fit"})}),d.jsx(yr.Cell,{children:s.atHome?s.priceHome:"not available"}),d.jsx(yr.Cell,{children:s.atLab?s.priceLab:"not available"}),d.jsx(yr.Cell,{className:"cursor-pointer",children:d.jsx(kJ,{onClick:()=>t(`/laboratory/testServices/editTestDetails/?testName=${s.testId.testName}&testId=${s.testId._id}`)})}),d.jsx(yr.Cell,{className:"cursor-pointer",children:d.jsx(LTe,{onClick:c=>a(c,s)})})]},l))})]})})}function BOe(){var c,u,h;const[e,t]=vW(),[r,n]=T.useState(void 0),[i,o]=T.useState({}),a=Wr({initialValues:{testId:e.get("testId"),priceHome:"",priceLab:"",atHome:!1,atLab:!1},validationSchema:M1,onSubmit:async(f,p)=>{await AOe({...f,testName:e.get("testId")})&&(te.fire({icon:"success",text:"Test Service has been updated"}),await l())}}),s=async f=>{await o({...i,[f.target.name]:!i[f.target.name]}),f.target.name=="home"?(await a.setFieldValue("atHome",!a.values.atHome),a.setFieldTouched("atHome",!0)):f.target.name=="lab"&&(await a.setFieldValue("atLab",!a.values.atLab),a.setFieldTouched("atLab",!0))},l=async()=>{const f=await NOe({testName:e.get("testName"),testId:e.get("testId")});n(f),a.setFieldValue("atHome",f.atHome),a.setFieldValue("atLab",f.atLab),a.setFieldValue("priceHome",f.priceHome),a.setFieldValue("priceLab",f.priceLab)};return T.useEffect(()=>{l()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsxs("form",{onSubmit:a.handleSubmit,className:"w-full h-full flex  gap-4 px-6 py-20 justify-center",children:[d.jsxs("div",{className:"detail w-[60%] h-auto flex flex-col gap-6 shadow-lg shadow-pink-500 p-4",children:[d.jsx("h1",{className:"w-full font-medium text-2xl text-emerald-400 flex justify-center ",children:"Update Test"}),d.jsx(le,{variant:"filled",label:"Test Name",value:(c=r==null?void 0:r.testId)==null?void 0:c.testName}),d.jsx("textarea",{variant:"filled",rows:"20",label:"Test Description",value:(u=r==null?void 0:r.testId)==null?void 0:u.testDescription}),d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("input",{type:"checkbox",id:"id_chkhome",name:"home",value:"home",onChange:s,checked:a.values.atHome}),d.jsx("span",{children:"Home"})]}),a.values.atHome&&d.jsx(le,{variant:"filled",label:"Price at Home",name:"priceHome",value:a.values.priceHome,onChange:a.handleChange,onBlur:a.handleBlur,...a.touched.priceHome&&(a.errors.priceHome?{color:"error",helperText:a.errors.priceHome}:{color:"success"})})]}),d.jsxs("div",{className:"flex flex-col gap-5 w-[50%]",children:[d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("input",{type:"checkbox",id:"id_lab",name:"lab",value:"lab",onChange:s,checked:a.values.atLab}),d.jsx("span",{children:"Lab"})]}),a.values.atLab&&d.jsx(le,{variant:"filled",label:"Price at Lab",name:"priceLab",value:a.values.priceLab,onChange:a.handleChange,onBlur:a.handleBlur,...a.touched.priceLab&&(a.errors.priceLab?{color:"error",helperText:a.errors.priceLab}:{color:"success"})})]})]}),d.jsxs("button",{type:"submit",className:"w-[full] h-[5vh] border rounded-[5%] bg-orange-500 p-2 mb-5 flex gap-2 items-center justify-center",children:[d.jsx(kJ,{}),"Update Test"]})]}),d.jsx("div",{className:"testImage flex  w-[20vw] h-full pt-20",children:d.jsx("img",{src:(h=r==null?void 0:r.testId)==null?void 0:h.testImage,alt:"test image",className:"mt-5 object-fit h-[40vh] w-[20vw]"})})]})})}function $Oe(e){const{test:t}=e;return d.jsx("div",{className:"flex w-auto h-auto border rounded-lg shadow-lg shadow-emerald-300 hover:bg-black hover:bg-opacity-10 py-5 px-3 cursor-pointer   ",children:d.jsxs("div",{className:"w-[30vw] h-auto flex flex-row gap-5 ",children:[d.jsx("div",{className:"image w-[50%] h-full flex justify-center items-center",children:d.jsx("img",{src:t==null?void 0:t.testImage,alt:"testImage",className:"object-cover w-full h-[70%]"})}),d.jsxs("div",{className:"w-full h-full content flex flex-col gap-5 bg-black bg-opacity-10 p-4",children:[d.jsx("h2",{className:"flex justify-center text-white bg-blue-500 py-3 font-medium",children:t==null?void 0:t.testName}),d.jsx("textarea",{name:"testDescription",id:"id_testDescripion",value:t==null?void 0:t.testDescription,rows:"10",className:"flex text-sm cursor-pointer border-0",disabled:!0})]})]})})}function HOe(){const[e,t]=T.useState([]),r=Er(),n=async()=>{const i=await _Ce();t(i)};return T.useEffect(()=>{n()},[]),d.jsx("div",{className:"flex flex-col w-full h-full",children:d.jsx("div",{className:"w-full h-full grid grid-cols-3 gap-4 justify-items-start",children:(e==null?void 0:e.length)>0&&e.map((i,o)=>d.jsx("div",{className:"w-auto h-auto cursor-pointer",onClick:()=>r(`/patient/tests/testDetails/?testId=${i._id}&testName=${i.testName}`),children:d.jsx($Oe,{test:i})},o))})})}function Bm(e){return Fn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"circle",attr:{cx:"256",cy:"192",r:"32"},child:[]},{tag:"path",attr:{d:"M256 32c-88.22 0-160 68.65-160 153 0 40.17 18.31 93.59 54.42 158.78 29 52.34 62.55 99.67 80 123.22a31.75 31.75 0 0 0 51.22 0c17.42-23.55 51-70.88 80-123.22C397.69 278.61 416 225.19 416 185c0-84.35-71.78-153-160-153zm0 224a64 64 0 1 1 64-64 64.07 64.07 0 0 1-64 64z"},child:[]}]})(e)}function zOe(e){var r;const{test:t}=e;return d.jsx("div",{className:"flex w-full h-full ",children:d.jsxs("div",{className:"flex h-full w-[40vw] gap-6 bg-white  border rounded-lg p-4 shadow-lg",children:[d.jsx("div",{className:"image w-[20%] h-[90%]",children:d.jsx("img",{src:"/normalUser.png",alt:"image",className:"object-fit w-full h-full"})}),d.jsxs("div",{className:"details h-full w-full flex flex-1 flex-col gap-4 ",children:[d.jsx("h1",{children:(r=t==null?void 0:t.labId)==null?void 0:r.userId.username}),d.jsx("div",{className:"location"}),d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx(Bm,{}),d.jsx("span",{children:"Koovappally"})]}),d.jsxs("div",{className:"flex gap-2 w-full h-auto",children:[(t==null?void 0:t.atHome)&&d.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-orange-400 p-3 rounded-md flex gap-4 items-center",children:[d.jsx("span",{children:" Home Service"}),d.jsxs("span",{className:"flex gap-2 items-center",children:[d.jsx(zw,{}),d.jsx("h6",{children:t==null?void 0:t.priceHome})]})]}),(t==null?void 0:t.atLab)&&d.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-blue-400 p-3 rounded-md flex gap-4 items-center",children:[d.jsx("span",{children:" Lab Service"}),d.jsxs("span",{className:"flex gap-2 items-center",children:[d.jsx(zw,{}),d.jsx("h6",{children:t==null?void 0:t.priceLab})]})]})]})]})]})})}function GOe(){const[e,t]=T.useState([]),[r,n]=T.useState(void 0),i=new URLSearchParams(window.location.search),o=async()=>{const a=await wCe({testId:i.get("testId")});t(a),n(a[0].testId)};return T.useEffect(()=>{o()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"screen w-full h-full flex  gap-2 justify-between ",children:[d.jsxs("div",{className:"w-[50%] h-[80vh] flex gap-10 border p-4 shadow-lg items-center bg-emerald-400 bg-opacity-10 bg-blur-sm",children:[d.jsx("div",{className:"image h-[40vh] w-[70%]",children:d.jsx("img",{src:r==null?void 0:r.testImage,alt:"testImage",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"testDetails flex flex-col gap-2 w-full h-full justify-center",children:[d.jsxs("div",{className:"description w-full h-[10vh] border shadow-lg flex flex-col gap-2 px-1",children:[d.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Name"}),d.jsx("span",{className:"text-lg font-medium",children:r==null?void 0:r.testName.toUpperCase()})]}),d.jsxs("div",{className:"testDescription flex flex-col gap-2 border w-full h-[40vh] shadow-lg px-1",children:[d.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Description"}),d.jsx("span",{className:"h-[10vh] p-2",children:r==null?void 0:r.testDescription})]})]})]}),d.jsxs("div",{className:"laboratorys bg-black bg-opacity-10 p-3 flex flex-col gap-4 w-auto h-full border  ",children:[d.jsx("h2",{className:"text-lg text-white  font-medium flex justify-center bg-blue-500 py-2",children:"Labs where the service available"}),d.jsx("div",{className:"labs flex flex-col gap-4 h-full w-full overflow-y-auto",children:(e==null?void 0:e.length)>0&&e.map((a,s)=>d.jsx("div",{className:"w-full h-auto",children:d.jsx(zOe,{test:a})},s))})]})]})})}function WOe(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"currentBookings",children:"Booked"}),d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"pastBookings",children:"Past Bookings"})]})})}function KOe(){return d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[d.jsx("div",{className:"header w-full h-[5vh]",children:d.jsx(WOe,{})}),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx(gi,{})})]})}const j2="https://hcompanion.onrender.com/api",j1=sessionStorage.getItem("token"),qOe=async()=>{var e,t,r;try{return(await ve.get(`${j2}/patient/bookings/getAllCurrentBookings`,{headers:{Authorization:`bearer ${j1}`}})).data.bookings}catch(n){return console.log(n),((e=n.response)==null?void 0:e.status)=="500"&&((r=(t=n.response)==null?void 0:t.data)!=null&&r.errorServer)&&te.fire("Server Error","","error"),!1}},U1=async({startTime:e,slotDate:t,doctorId:r})=>{var n,i,o;try{const a=await ve.post(`${j2}/patient/bookings/cancelBooking`,{startTime:e,slotDate:t,doctorId:r},{headers:{Authorization:`bearer ${j1}`}});return console.log(a.data),!0}catch(a){return console.log(a),((n=a.response)==null?void 0:n.status)=="500"&&((o=(i=a.response)==null?void 0:i.data)!=null&&o.errorServer)&&te.fire("Server Error","","error"),!1}},YOe=async()=>{var e,t,r;try{return(await ve.get(`${j2}/patient/bookings/getPastBookings`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.bookings}catch(n){return console.log(n),((e=n.response)==null?void 0:e.status)=="500"&&((r=(t=n.response)==null?void 0:t.data)!=null&&r.errorServer)&&te.fire("Server Error","","error"),!1}};function XOe(e){var n,i,o,a,s,l,c;const{booking:t}=e;Er();const r=async(u,h,f,p)=>{u.preventDefault(),await te.fire({showCancelButton:!0,confirmButtonText:"Proceed Canceling",text:"Do you want to cancel the booking",icon:"question"}).then(async m=>{m.isConfirmed&&await U1({startTime:h,slotDate:f,doctorId:p})&&(await te.fire("Canceled","Booking has been Canceled","success"),window.location.reload())})};return d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:(n=t==null?void 0:t.doctorId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("h4",{className:"text-sm font-medium opacity-40",children:"Cardiology"}),d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{children:(o=(i=t==null?void 0:t.doctorId)==null?void 0:i.userId)==null?void 0:o.username})}),d.jsx("div",{className:"location w-full h-auto",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(Bm,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:(s=(a=t==null?void 0:t.doctorId)==null?void 0:a.addressId)==null?void 0:s.place}),d.jsx("span",{className:"flex items-center",children:(c=(l=t==null?void 0:t.doctorId)==null?void 0:l.addressId)==null?void 0:c.district})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[d.jsx(R0,{}),d.jsx("span",{children:`${t==null?void 0:t.slotDate} ${ct(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),d.jsxs("div",{className:"w-full h-auto flex gap-4",children:[d.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:u=>{var h;return r(u,t==null?void 0:t.startTime,t==null?void 0:t.slotDate,(h=t==null?void 0:t.doctorId)==null?void 0:h._id)},children:"Cancel"}),ct().isAfter(ct(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A"))&&ct().isBefore(ct(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))&&d.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:u=>window.open(`/patient/bookings/videoConsult?patientId=${t.patientId._id}&doctorId=${t.doctorId._id}`,"_blank"),children:"Join Meeting"})]})]})]})})}function JOe(){const[e,t]=T.useState([]),r=async()=>{const n=await qOe();await t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"flex w-full h-full",children:d.jsx("div",{className:"booked flex flex-col gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>d.jsx("div",{className:"w-[60vw] h-[25vh] ",children:d.jsx(XOe,{booking:n})},i))})})}function QOe(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"currentBookings",children:"Booked"}),d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"pastCompletedBookings",children:"Past Bookings"}),d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-orange-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"test/ordered",children:"Requested Test Results"})]})})}function ZOe(){return d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsxs("div",{className:"screen w-full h-full flex flex-col gap-10 p-2",children:[d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx(QOe,{})}),d.jsx("div",{className:"w-full h-full p-2 flex flex-col",children:d.jsx(gi,{})})]})})}const F1="https://hcompanion.onrender.com/api";sessionStorage.getItem("token");const eke=async()=>{var e,t,r;try{const n=await ve.get(`${F1}/doctor/bookings/getAllCurrentBookings`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(n.data),n.data.bookings}catch(n){return console.log(n),((e=n==null?void 0:n.response)==null?void 0:e.status)=="500"&&((r=(t=n==null?void 0:n.response)==null?void 0:t.data)!=null&&r.errorServer)&&te.fire("Server Error","","error"),!1}},tke=async()=>{var e,t,r;try{const n=await ve.get(`${F1}/doctor/bookings/getPastCompletedBookings`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(n.data),n.data.bookings}catch(n){return console.log(n),((e=n==null?void 0:n.response)==null?void 0:e.status)=="500"&&((r=(t=n==null?void 0:n.response)==null?void 0:t.data)!=null&&r.errorServer)&&te.fire("Server Error","","error"),!1}};ct.extend(ws);function rke(e){var n,i,o,a,s,l;const{booking:t}=e;Er(),console.log("test date",ct().add(2,"hour").isBefore(ct(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour")));const r=async(c,u,h,f)=>{c.preventDefault(),await te.fire({showCancelButton:!0,confirmButtonText:"Proceed Rescheduling",text:"Do you want to Reschedule the booking",icon:"question"}).then(async p=>{p.isConfirmed&&await patient_cancelBookingService({startTime:u,slotDate:h,doctorId:f})&&(await te.fire("Canceled","Booking has been Canceled","success"),window.location.reload())})};return d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:(n=t==null?void 0:t.patientId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("h4",{className:"text-sm font-medium opacity-40",children:"Cardiology"}),d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{children:(i=t==null?void 0:t.patientId)==null?void 0:i.firstName})}),d.jsx("div",{className:"location w-full h-auto",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(Bm,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:(a=(o=t==null?void 0:t.patientId)==null?void 0:o.addressId)==null?void 0:a.place}),d.jsx("span",{className:"flex items-center",children:(l=(s=t==null?void 0:t.patientId)==null?void 0:s.addressId)==null?void 0:l.district})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[d.jsx(R0,{}),d.jsx("span",{children:`${t==null?void 0:t.slotDate} ${ct(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),d.jsxs("div",{className:"w-full h-auto flex flex-between gap-4",children:[d.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:c=>{var u;return r(c,t==null?void 0:t.startTime,t==null?void 0:t.slotDate,(u=t==null?void 0:t.doctorId)==null?void 0:u._id)},children:"Reschedule"}),ct().isAfter(ct(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A"))&&ct().isBefore(ct(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))&&d.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:c=>window.open(`/patient/bookings/videoConsult?patientId=${t.patientId._id}&doctorId=${t.doctorId._id}`,"_blank"),children:"Join Meeting"})]})]})]})})}function nke(){const[e,t]=T.useState([]),r=async()=>{const n=await eke();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"bookings w-full h-full",children:(e==null?void 0:e.length)>0&&(e==null?void 0:e.map((n,i)=>d.jsx("div",{className:"w-[70%] h-[25vh]",children:d.jsx(rke,{booking:n})},i)))})})})}/**
 * @license agora-rtc-react
 * @version 2.3.0
 *
 * Copyright (c) Agora, Inc.
 *
 * This source code is licensed under the MIT license.
 */function ike(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in e)){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(e)}var Ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ur(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nn=function(e){try{return!!e()}catch{return!0}},BT=!nn(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),V1=BT,B1=Function.prototype,EO=B1.call,oke=V1&&B1.bind.bind(EO,EO),Jr=V1?oke:function(e){return function(){return EO.apply(e,arguments)}},Gi=Jr({}.isPrototypeOf),jb=function(e){return e&&e.Math==Math&&e},Jn=jb(typeof globalThis=="object"&&globalThis)||jb(typeof window=="object"&&window)||jb(typeof self=="object"&&self)||jb(typeof Ip=="object"&&Ip)||function(){return this}()||Ip||Function("return this")(),ake=BT,$1=Function.prototype,f3=$1.apply,p3=$1.call,U2=typeof Reflect=="object"&&Reflect.apply||(ake?p3.bind(f3):function(){return p3.apply(f3,arguments)}),H1=Jr,ske=H1({}.toString),lke=H1("".slice),Gl=function(e){return lke(ske(e),8,-1)},cke=Gl,uke=Jr,Rv=function(e){if(cke(e)==="Function")return uke(e)},Zx=typeof document=="object"&&document.all,$T={all:Zx,IS_HTMLDDA:Zx===void 0&&Zx!==void 0},dke=$T.all,Qn=$T.IS_HTMLDDA?function(e){return typeof e=="function"||e===dke}:function(e){return typeof e=="function"},O0={},$a=!nn(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),hke=BT,Ub=Function.prototype.call,Zn=hke?Ub.bind(Ub):function(){return Ub.apply(Ub,arguments)},HT={},z1={}.propertyIsEnumerable,G1=Object.getOwnPropertyDescriptor,fke=G1&&!z1.call({1:2},1);HT.f=fke?function(e){var t=G1(this,e);return!!t&&t.enumerable}:z1;var Yc,n_,cd=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},pke=nn,mke=Gl,eR=Object,gke=Jr("".split),zT=pke(function(){return!eR("z").propertyIsEnumerable(0)})?function(e){return mke(e)=="String"?gke(e,""):eR(e)}:eR,$m=function(e){return e==null},yke=$m,vke=TypeError,Hm=function(e){if(yke(e))throw vke("Can't call method on "+e);return e},bke=zT,Eke=Hm,ud=function(e){return bke(Eke(e))},m3=Qn,_ke=$T.all,ca=$T.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:m3(e)||e===_ke}:function(e){return typeof e=="object"?e!==null:m3(e)},nl={},tR=nl,rR=Jn,wke=Qn,g3=function(e){return wke(e)?e:void 0},Po=function(e,t){return arguments.length<2?g3(tR[e])||g3(rR[e]):tR[e]&&tR[e][t]||rR[e]&&rR[e][t]},Yh=typeof navigator<"u"&&String(navigator.userAgent)||"",W1=Jn,nR=Yh,y3=W1.process,v3=W1.Deno,b3=y3&&y3.versions||v3&&v3.version,E3=b3&&b3.v8;E3&&(n_=(Yc=E3.split("."))[0]>0&&Yc[0]<4?1:+(Yc[0]+Yc[1])),!n_&&nR&&(!(Yc=nR.match(/Edge\/(\d+)/))||Yc[1]>=74)&&(Yc=nR.match(/Chrome\/(\d+)/))&&(n_=+Yc[1]);var Nh=n_,_3=Nh,Ske=nn,Tke=Jn.String,zm=!!Object.getOwnPropertySymbols&&!Ske(function(){var e=Symbol();return!Tke(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&_3&&_3<41}),K1=zm&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Cke=Po,xke=Qn,Rke=Gi,Ike=Object,k0=K1?function(e){return typeof e=="symbol"}:function(e){var t=Cke("Symbol");return xke(t)&&Rke(t.prototype,Ike(e))},Nke=String,Gm=function(e){try{return Nke(e)}catch{return"Object"}},Ake=Qn,Oke=Gm,kke=TypeError,Cs=function(e){if(Ake(e))return e;throw kke(Oke(e)+" is not a function")},Pke=Cs,Dke=$m,GT=function(e,t){var r=e[t];return Dke(r)?void 0:Pke(r)},w3=Zn,S3=Qn,T3=ca,Lke=TypeError,q1={exports:{}},C3=Jn,Mke=Object.defineProperty,jke=function(e,t){try{Mke(C3,e,{value:t,configurable:!0,writable:!0})}catch{C3[e]=t}return t},x3="__core-js_shared__",F2=Jn[x3]||jke(x3,{}),R3=F2;(q1.exports=function(e,t){return R3[e]||(R3[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Wm=q1.exports,Uke=Hm,Fke=Object,Wl=function(e){return Fke(Uke(e))},Vke=Wl,Bke=Jr({}.hasOwnProperty),li=Object.hasOwn||function(e,t){return Bke(Vke(e),t)},$ke=Jr,Hke=0,zke=Math.random(),Gke=$ke(1 .toString),V2=function(e){return"Symbol("+(e===void 0?"":e)+")_"+Gke(++Hke+zke,36)},Wke=Wm,I3=li,Kke=V2,qke=zm,Yke=K1,ip=Jn.Symbol,iR=Wke("wks"),Xke=Yke?ip.for||ip:ip&&ip.withoutSetter||Kke,Kr=function(e){return I3(iR,e)||(iR[e]=qke&&I3(ip,e)?ip[e]:Xke("Symbol."+e)),iR[e]},Jke=Zn,N3=ca,A3=k0,Qke=GT,Zke=function(e,t){var r,n;if(S3(r=e.toString)&&!T3(n=w3(r,e))||S3(r=e.valueOf)&&!T3(n=w3(r,e))||t!=="string")return n;throw Lke("Can't convert object to primitive value")},ePe=TypeError,tPe=Kr("toPrimitive"),rPe=function(e,t){if(!N3(e)||A3(e))return e;var r,n=Qke(e,tPe);if(n){if(r=Jke(n,e,t),!N3(r)||A3(r))return r;throw ePe("Can't convert object to primitive value")}return Zke(e,t)},nPe=k0,WT=function(e){var t=rPe(e,"string");return nPe(t)?t:t+""},O3=ca,_O=Jn.document,iPe=O3(_O)&&O3(_O.createElement),B2=function(e){return iPe?_O.createElement(e):{}},oPe=B2,Y1=!$a&&!nn(function(){return Object.defineProperty(oPe("div"),"a",{get:function(){return 7}}).a!=7}),aPe=$a,sPe=Zn,lPe=HT,cPe=cd,uPe=ud,dPe=WT,hPe=li,fPe=Y1,k3=Object.getOwnPropertyDescriptor;O0.f=aPe?k3:function(e,t){if(e=uPe(e),t=dPe(t),fPe)try{return k3(e,t)}catch{}if(hPe(e,t))return cPe(!sPe(lPe.f,e,t),e[t])};var pPe=nn,mPe=Qn,gPe=/#|\.prototype\./,P0=function(e,t){var r=vPe[yPe(e)];return r==EPe||r!=bPe&&(mPe(t)?pPe(t):!!t)},yPe=P0.normalize=function(e){return String(e).replace(gPe,".").toLowerCase()},vPe=P0.data={},bPe=P0.NATIVE="N",EPe=P0.POLYFILL="P",X1=P0,_Pe=Cs,wPe=BT,SPe=Rv(Rv.bind),dd=function(e,t){return _Pe(e),t===void 0?e:wPe?SPe(e,t):function(){return e.apply(t,arguments)}},xs={},J1=$a&&nn(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),TPe=ca,CPe=String,xPe=TypeError,bo=function(e){if(TPe(e))return e;throw xPe(CPe(e)+" is not an object")},RPe=$a,IPe=Y1,NPe=J1,Fb=bo,P3=WT,APe=TypeError,oR=Object.defineProperty,OPe=Object.getOwnPropertyDescriptor,aR="enumerable",sR="configurable",lR="writable";xs.f=RPe?NPe?function(e,t,r){if(Fb(e),t=P3(t),Fb(r),typeof e=="function"&&t==="prototype"&&"value"in r&&lR in r&&!r[lR]){var n=OPe(e,t);n&&n[lR]&&(e[t]=r.value,r={configurable:sR in r?r[sR]:n[sR],enumerable:aR in r?r[aR]:n[aR],writable:!1})}return oR(e,t,r)}:oR:function(e,t,r){if(Fb(e),t=P3(t),Fb(r),IPe)try{return oR(e,t,r)}catch{}if("get"in r||"set"in r)throw APe("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var kPe=xs,PPe=cd,hd=$a?function(e,t,r){return kPe.f(e,t,PPe(1,r))}:function(e,t,r){return e[t]=r,e},Vb=Jn,DPe=U2,LPe=Rv,MPe=Qn,jPe=O0.f,UPe=X1,yf=nl,FPe=dd,vf=hd,D3=li,VPe=function(e){var t=function(r,n,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,n)}return new e(r,n,i)}return DPe(e,this,arguments)};return t.prototype=e.prototype,t},tr=function(e,t){var r,n,i,o,a,s,l,c,u,h=e.target,f=e.global,p=e.stat,m=e.proto,g=f?Vb:p?Vb[h]:(Vb[h]||{}).prototype,y=f?yf:yf[h]||vf(yf,h,{})[h],v=y.prototype;for(o in t)n=!(r=UPe(f?o:h+(p?".":"#")+o,e.forced))&&g&&D3(g,o),s=y[o],n&&(l=e.dontCallGetSet?(u=jPe(g,o))&&u.value:g[o]),a=n&&l?l:t[o],n&&typeof s==typeof a||(c=e.bind&&n?FPe(a,Vb):e.wrap&&n?VPe(a):m&&MPe(a)?LPe(a):a,(e.sham||a&&a.sham||s&&s.sham)&&vf(c,"sham",!0),vf(y,o,c),m&&(D3(yf,i=h+"Prototype")||vf(yf,i,{}),vf(yf[i],o,a),e.real&&v&&(r||!v[o])&&vf(v,o,a)))},BPe=Math.ceil,$Pe=Math.floor,HPe=Math.trunc||function(e){var t=+e;return(t>0?$Pe:BPe)(t)},zPe=HPe,$2=function(e){var t=+e;return t!=t||t===0?0:zPe(t)},GPe=$2,WPe=Math.max,KPe=Math.min,H2=function(e,t){var r=GPe(e);return r<0?WPe(r+t,0):KPe(r,t)},qPe=$2,YPe=Math.min,Q1=function(e){return e>0?YPe(qPe(e),9007199254740991):0},XPe=Q1,Fc=function(e){return XPe(e.length)},JPe=ud,QPe=H2,ZPe=Fc,L3=function(e){return function(t,r,n){var i,o=JPe(t),a=ZPe(o),s=QPe(n,a);if(e&&r!=r){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},z2={includes:L3(!0),indexOf:L3(!1)},eDe=z2.includes;tr({target:"Array",proto:!0,forced:nn(function(){return!Array(1).includes()})},{includes:function(e){return eDe(this,e,arguments.length>1?arguments[1]:void 0)}});var tDe=nl,Rs=function(e){return tDe[e+"Prototype"]},rDe=Rs("Array").includes,nDe=ca,iDe=Gl,oDe=Kr("match"),Z1=function(e){var t;return nDe(e)&&((t=e[oDe])!==void 0?!!t:iDe(e)=="RegExp")},aDe=Z1,sDe=TypeError,eQ={};eQ[Kr("toStringTag")]="z";var G2=String(eQ)==="[object z]",lDe=G2,cDe=Qn,i_=Gl,uDe=Kr("toStringTag"),dDe=Object,hDe=i_(function(){return arguments}())=="Arguments",Kl=lDe?i_:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=function(i,o){try{return i[o]}catch{}}(t=dDe(e),uDe))=="string"?r:hDe?i_(t):(n=i_(t))=="Object"&&cDe(t.callee)?"Arguments":n},fDe=Kl,pDe=String,Ha=function(e){if(fDe(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return pDe(e)},mDe=Kr("match"),gDe=tr,yDe=function(e){if(aDe(e))throw sDe("The method doesn't accept regular expressions");return e},vDe=Hm,M3=Ha,bDe=function(e){var t=/./;try{"/./"[e](t)}catch{try{return t[mDe]=!1,"/./"[e](t)}catch{}}return!1},EDe=Jr("".indexOf);gDe({target:"String",proto:!0,forced:!bDe("includes")},{includes:function(e){return!!~EDe(M3(vDe(this)),M3(yDe(e)),arguments.length>1?arguments[1]:void 0)}});var _De=Rs("String").includes,j3=Gi,wDe=rDe,SDe=_De,cR=Array.prototype,uR=String.prototype,TDe=function(e){var t=e.includes;return e===cR||j3(cR,e)&&t===cR.includes?wDe:typeof e=="string"||e===uR||j3(uR,e)&&t===uR.includes?SDe:t},ge=Ur(TDe),CDe=Cs,xDe=Wl,RDe=zT,IDe=Fc,NDe=TypeError,U3=function(e){return function(t,r,n,i){CDe(r);var o=xDe(t),a=RDe(o),s=IDe(o),l=e?s-1:0,c=e?-1:1;if(n<2)for(;;){if(l in a){i=a[l],l+=c;break}if(l+=c,e?l<0:s<=l)throw NDe("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=c)l in a&&(i=r(i,a[l],l,o));return i}},ADe={left:U3(!1),right:U3(!0)},ODe=nn,KT=function(e,t){var r=[][e];return!!r&&ODe(function(){r.call(null,t||function(){return 1},1)})},D0=typeof process<"u"&&Gl(process)=="process",kDe=ADe.left;tr({target:"Array",proto:!0,forced:!D0&&Nh>79&&Nh<83||!KT("reduce")},{reduce:function(e){var t=arguments.length;return kDe(this,e,t,t>1?arguments[1]:void 0)}});var PDe=Rs("Array").reduce,DDe=Gi,LDe=PDe,dR=Array.prototype,MDe=function(e){var t=e.reduce;return e===dR||DDe(dR,e)&&t===dR.reduce?LDe:t},tQ=MDe,Zs=Ur(tQ),rQ=!0,nQ=!0;function Bb(e,t,r){let n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function Xh(e,t,r){if(!e.RTCPeerConnection)return;let n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(a,s){if(a!==t)return i.apply(this,arguments);let l=c=>{let u=r(c);u&&(s.handleEvent?s.handleEvent(u):s(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(s,l),i.apply(this,[a,l])};let o=n.removeEventListener;n.removeEventListener=function(a,s){if(a!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(s))return o.apply(this,arguments);let l=this._eventMap[t].get(s);return this._eventMap[t].delete(s),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[a,l])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(a){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),a&&this.addEventListener(t,this["_on"+t]=a)},enumerable:!0,configurable:!0})}function jDe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(rQ=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function UDe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(nQ=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function iQ(){if(typeof window=="object"){if(rQ)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function W2(e,t){nQ&&console.warn(e+" is deprecated, please use "+t+" instead.")}function F3(e){return Object.prototype.toString.call(e)==="[object Object]"}function oQ(e){var t;return F3(e)?Zs(t=Object.keys(e)).call(t,function(r,n){let i=F3(e[n]),o=i?oQ(e[n]):e[n],a=i&&!Object.keys(o).length;return o===void 0||a?r:Object.assign(r,{[n]:o})},{}):e}function wO(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach(n=>{n.endsWith("Id")?wO(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach(i=>{wO(e,e.get(i),r)})}))}function V3(e,t,r){let n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;let o=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===t.id&&o.push(a)}),o.forEach(a=>{e.forEach(s=>{s.type===n&&s.trackId===a.id&&wO(e,s,i)})}),i}var FDe=V2,B3=Wm("keys"),qT=function(e){return B3[e]||(B3[e]=FDe(e))},VDe=!nn(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),BDe=li,$De=Qn,HDe=Wl,zDe=VDe,$3=qT("IE_PROTO"),SO=Object,GDe=SO.prototype,K2=zDe?SO.getPrototypeOf:function(e){var t=HDe(e);if(BDe(t,$3))return t[$3];var r=t.constructor;return $De(r)&&t instanceof r?r.prototype:t instanceof SO?GDe:null},WDe=Jr,KDe=Cs,qDe=Qn,YDe=String,XDe=TypeError,JDe=function(e,t,r){try{return WDe(KDe(Object.getOwnPropertyDescriptor(e,t)[r]))}catch{}},QDe=bo,ZDe=function(e){if(typeof e=="object"||qDe(e))return e;throw XDe("Can't set "+YDe(e)+" as a prototype")},e2e=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=JDe(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch{}return function(n,i){return QDe(n),ZDe(i),t?e(n,i):n.__proto__=i,n}}():void 0),YT={},XT={},hR=li,t2e=ud,r2e=z2.indexOf,n2e=XT,H3=Jr([].push),aQ=function(e,t){var r,n=t2e(e),i=0,o=[];for(r in n)!hR(n2e,r)&&hR(n,r)&&H3(o,r);for(;t.length>i;)hR(n,r=t[i++])&&(~r2e(o,r)||H3(o,r));return o},q2=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],i2e=aQ,o2e=q2.concat("length","prototype");YT.f=Object.getOwnPropertyNames||function(e){return i2e(e,o2e)};var L0={};L0.f=Object.getOwnPropertySymbols;var a2e=Po,s2e=YT,l2e=L0,c2e=bo,u2e=Jr([].concat),d2e=a2e("Reflect","ownKeys")||function(e){var t=s2e.f(c2e(e)),r=l2e.f;return r?u2e(t,r(e)):t},z3=li,h2e=d2e,f2e=O0,p2e=xs,Y2={},m2e=aQ,g2e=q2,JT=Object.keys||function(e){return m2e(e,g2e)},y2e=$a,v2e=J1,b2e=xs,E2e=bo,_2e=ud,w2e=JT;Y2.f=y2e&&!v2e?Object.defineProperties:function(e,t){E2e(e);for(var r,n=_2e(t),i=w2e(t),o=i.length,a=0;o>a;)b2e.f(e,r=i[a++],n[r]);return e};var $b,sQ=Po("document","documentElement"),S2e=bo,T2e=Y2,G3=q2,C2e=XT,x2e=sQ,R2e=B2,TO="prototype",CO="script",lQ=qT("IE_PROTO"),fR=function(){},cQ=function(e){return"<"+CO+">"+e+"</"+CO+">"},W3=function(e){e.write(cQ("")),e.close();var t=e.parentWindow.Object;return e=null,t},o_=function(){try{$b=new ActiveXObject("htmlfile")}catch{}var e,t,r;o_=typeof document<"u"?document.domain&&$b?W3($b):(t=R2e("iframe"),r="java"+CO+":",t.style.display="none",x2e.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(cQ("document.F=Object")),e.close(),e.F):W3($b);for(var n=G3.length;n--;)delete o_[TO][G3[n]];return o_()};C2e[lQ]=!0;var M0=Object.create||function(e,t){var r;return e!==null?(fR[TO]=S2e(e),r=new fR,fR[TO]=null,r[lQ]=e):r=o_(),t===void 0?r:T2e.f(r,t)},I2e=ca,N2e=hd,uQ=Error,A2e=Jr("".replace),O2e=String(uQ("zxcasd").stack),dQ=/\n\s*at [^:]*:[^\n]*/,k2e=dQ.test(O2e),P2e=cd,D2e=!nn(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",P2e(1,7)),e.stack!==7)}),L2e=hd,M2e=function(e,t){if(k2e&&typeof e=="string"&&!uQ.prepareStackTrace)for(;t--;)e=A2e(e,dQ,"");return e},j2e=D2e,K3=Error.captureStackTrace,Jh={},U2e=Jh,F2e=Kr("iterator"),V2e=Array.prototype,hQ=function(e){return e!==void 0&&(U2e.Array===e||V2e[F2e]===e)},B2e=Kl,q3=GT,$2e=$m,H2e=Jh,z2e=Kr("iterator"),QT=function(e){if(!$2e(e))return q3(e,z2e)||q3(e,"@@iterator")||H2e[B2e(e)]},G2e=Zn,W2e=Cs,K2e=bo,q2e=Gm,Y2e=QT,X2e=TypeError,X2=function(e,t){var r=arguments.length<2?Y2e(e):t;if(W2e(r))return K2e(G2e(r,e));throw X2e(q2e(e)+" is not iterable")},J2e=Zn,Y3=bo,Q2e=GT,fQ=function(e,t,r){var n,i;Y3(e);try{if(!(n=Q2e(e,"return"))){if(t==="throw")throw r;return r}n=J2e(n,e)}catch(o){i=!0,n=o}if(t==="throw")throw r;if(i)throw n;return Y3(n),r},Z2e=dd,eLe=Zn,tLe=bo,rLe=Gm,nLe=hQ,iLe=Fc,X3=Gi,oLe=X2,aLe=QT,J3=fQ,sLe=TypeError,a_=function(e,t){this.stopped=e,this.result=t},Q3=a_.prototype,j0=function(e,t,r){var n,i,o,a,s,l,c,u=r&&r.that,h=!(!r||!r.AS_ENTRIES),f=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),m=!(!r||!r.INTERRUPTED),g=Z2e(t,u),y=function(b){return n&&J3(n,"normal",b),new a_(!0,b)},v=function(b){return h?(tLe(b),m?g(b[0],b[1],y):g(b[0],b[1])):m?g(b,y):g(b)};if(f)n=e.iterator;else if(p)n=e;else{if(!(i=aLe(e)))throw sLe(rLe(e)+" is not iterable");if(nLe(i)){for(o=0,a=iLe(e);a>o;o++)if((s=v(e[o]))&&X3(Q3,s))return s;return new a_(!1)}n=oLe(e,i)}for(l=f?e.next:n.next;!(c=eLe(l,n)).done;){try{s=v(c.value)}catch(b){J3(n,"throw",b)}if(typeof s=="object"&&s&&X3(Q3,s))return s}return new a_(!1)},lLe=Ha,cLe=tr,uLe=Gi,dLe=K2,Kw=e2e,hLe=function(e,t,r){for(var n=h2e(t),i=p2e.f,o=f2e.f,a=0;a<n.length;a++){var s=n[a];z3(e,s)||r&&z3(r,s)||i(e,s,o(t,s))}},pQ=M0,pR=hd,mR=cd,fLe=function(e,t){I2e(t)&&"cause"in t&&N2e(e,"cause",t.cause)},pLe=function(e,t,r,n){j2e&&(K3?K3(e,t):L2e(e,"stack",M2e(r,n)))},mLe=j0,gLe=function(e,t){return e===void 0?arguments.length<2?"":t:lLe(e)},yLe=Kr("toStringTag"),qw=Error,vLe=[].push,im=function(e,t){var r,n=uLe(gR,this);Kw?r=Kw(qw(),n?dLe(this):gR):(r=n?this:pQ(gR),pR(r,yLe,"Error")),t!==void 0&&pR(r,"message",gLe(t)),pLe(r,im,r.stack,1),arguments.length>2&&fLe(r,arguments[2]);var i=[];return mLe(e,vLe,{that:i}),pR(r,"errors",i),r};Kw?Kw(im,qw):hLe(im,qw,{name:!0});var gR=im.prototype=pQ(qw.prototype,{constructor:mR(1,im),message:mR(1,""),name:mR(1,"AggregateError")});cLe({global:!0,constructor:!0,arity:2},{AggregateError:im});var Yw,Ay,Xw,bLe=Qn,Z3=Jn.WeakMap,ELe=bLe(Z3)&&/native code/.test(String(Z3)),mQ=Jn,_Le=ca,wLe=hd,yR=li,vR=F2,SLe=qT,TLe=XT,eF="Object already initialized",xO=mQ.TypeError,CLe=mQ.WeakMap;ELe||vR.state?(Os=vR.state||(vR.state=new CLe),Os.get=Os.get,Os.has=Os.has,Os.set=Os.set,Yw=function(e,t){if(Os.has(e))throw xO(eF);return t.facade=e,Os.set(e,t),t},Ay=function(e){return Os.get(e)||{}},Xw=function(e){return Os.has(e)}):(_d=SLe("state"),TLe[_d]=!0,Yw=function(e,t){if(yR(e,_d))throw xO(eF);return t.facade=e,wLe(e,_d,t),t},Ay=function(e){return yR(e,_d)?e[_d]:{}},Xw=function(e){return yR(e,_d)});var Os,_d,dh,tF,rF,Qh={set:Yw,get:Ay,has:Xw,enforce:function(e){return Xw(e)?Ay(e):Yw(e,{})},getterFor:function(e){return function(t){var r;if(!_Le(t)||(r=Ay(t)).type!==e)throw xO("Incompatible receiver, "+e+" required");return r}}},RO=$a,xLe=li,gQ=Function.prototype,RLe=RO&&Object.getOwnPropertyDescriptor,bR=xLe(gQ,"name"),yQ={EXISTS:bR,PROPER:bR&&(function(){}).name==="something",CONFIGURABLE:bR&&(!RO||RO&&RLe(gQ,"name").configurable)},ILe=hd,fd=function(e,t,r,n){return n&&n.enumerable?e[t]=r:ILe(e,t,r),e},NLe=nn,ALe=Qn,OLe=ca,kLe=M0,nF=K2,PLe=fd,IO=Kr("iterator"),vQ=!1;[].keys&&("next"in(rF=[].keys())?(tF=nF(nF(rF)))!==Object.prototype&&(dh=tF):vQ=!0);var DLe=!OLe(dh)||NLe(function(){var e={};return dh[IO].call(e)!==e});ALe((dh=DLe?{}:kLe(dh))[IO])||PLe(dh,IO,function(){return this});var bQ={IteratorPrototype:dh,BUGGY_SAFARI_ITERATORS:vQ},LLe=Kl,MLe=G2?{}.toString:function(){return"[object "+LLe(this)+"]"},jLe=G2,ULe=xs.f,FLe=hd,VLe=li,BLe=MLe,iF=Kr("toStringTag"),pd=function(e,t,r,n){if(e){var i=r?e:e.prototype;VLe(i,iF)||ULe(i,iF,{configurable:!0,value:t}),n&&!jLe&&FLe(i,"toString",BLe)}},$Le=bQ.IteratorPrototype,HLe=M0,zLe=cd,GLe=pd,WLe=Jh,KLe=function(){return this},J2=function(e,t,r,n){var i=t+" Iterator";return e.prototype=HLe($Le,{next:zLe(+!n,r)}),GLe(e,i,!1,!0),WLe[i]=KLe,e},qLe=tr,YLe=Zn,XLe=yQ,JLe=J2,QLe=K2,ZLe=pd,oF=fd,aF=Jh,eMe=bQ,tMe=XLe.PROPER,Hb=eMe.BUGGY_SAFARI_ITERATORS,ER=Kr("iterator"),sF="keys",zb="values",lF="entries",rMe=function(){return this},EQ=function(e,t,r,n,i,o,a){JLe(r,t,n);var s,l,c,u=function(v){if(v===i&&g)return g;if(!Hb&&v in p)return p[v];switch(v){case sF:case zb:case lF:return function(){return new r(this,v)}}return function(){return new r(this)}},h=t+" Iterator",f=!1,p=e.prototype,m=p[ER]||p["@@iterator"]||i&&p[i],g=!Hb&&m||u(i),y=t=="Array"&&p.entries||m;if(y&&(s=QLe(y.call(new e)))!==Object.prototype&&s.next&&(ZLe(s,h,!0,!0),aF[h]=rMe),tMe&&i==zb&&m&&m.name!==zb&&(f=!0,g=function(){return YLe(m,this)}),i)if(l={values:u(zb),keys:o?g:u(sF),entries:u(lF)},a)for(c in l)(Hb||f||!(c in p))&&oF(p,c,l[c]);else qLe({target:t,proto:!0,forced:Hb||f},l);return a&&p[ER]!==g&&oF(p,ER,g,{name:i}),aF[t]=g,l},Q2=function(e,t){return{value:e,done:t}},nMe=ud,cF=Jh,_Q=Qh;xs.f;var iMe=EQ,uF=Q2,wQ="Array Iterator",oMe=_Q.set,aMe=_Q.getterFor(wQ);iMe(Array,"Array",function(e,t){oMe(this,{type:wQ,target:nMe(e),index:0,kind:t})},function(){var e=aMe(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,uF(void 0,!0)):uF(r=="keys"?n:r=="values"?t[n]:[n,t[n]],!1)},"values"),cF.Arguments=cF.Array;var sMe=xs,ZT=function(e,t,r){return sMe.f(e,t,r)},lMe=Po,cMe=ZT,uMe=$a,dF=Kr("species"),dMe=Gi,hMe=TypeError,Z2=function(e,t){if(dMe(t,e))return e;throw hMe("Incorrect invocation")},fMe=Qn,NO=F2,pMe=Jr(Function.toString);fMe(NO.inspectSource)||(NO.inspectSource=function(e){return pMe(e)});var SQ=NO.inspectSource,mMe=Jr,gMe=nn,TQ=Qn,yMe=Kl,vMe=SQ,CQ=function(){},bMe=[],xQ=Po("Reflect","construct"),eL=/^\s*(?:class|function)\b/,EMe=mMe(eL.exec),_Me=!eL.exec(CQ),xg=function(e){if(!TQ(e))return!1;try{return xQ(CQ,bMe,e),!0}catch{return!1}},RQ=function(e){if(!TQ(e))return!1;switch(yMe(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return _Me||!!EMe(eL,vMe(e))}catch{return!0}};RQ.sham=!0;var Iv,bf,hF,_R,eC=!xQ||gMe(function(){var e;return xg(xg.call)||!xg(Object)||!xg(function(){e=!0})||e})?RQ:xg,wMe=eC,SMe=Gm,TMe=TypeError,fF=bo,CMe=function(e){if(wMe(e))return e;throw TMe(SMe(e)+" is not a constructor")},xMe=$m,RMe=Kr("species"),tL=function(e,t){var r,n=fF(e).constructor;return n===void 0||xMe(r=fF(n)[RMe])?t:CMe(r)},rL=Jr([].slice),IMe=TypeError,tC=function(e,t){if(e<t)throw IMe("Not enough arguments");return e},IQ=/(?:ipad|iphone|ipod).*applewebkit/i.test(Yh),Ca=Jn,NMe=U2,AMe=dd,pF=Qn,OMe=li,NQ=nn,mF=sQ,kMe=rL,gF=B2,PMe=tC,DMe=IQ,LMe=D0,AO=Ca.setImmediate,OO=Ca.clearImmediate,MMe=Ca.process,wR=Ca.Dispatch,jMe=Ca.Function,yF=Ca.MessageChannel,UMe=Ca.String,SR=0,Oy={},vF="onreadystatechange";NQ(function(){Iv=Ca.location});var nL=function(e){if(OMe(Oy,e)){var t=Oy[e];delete Oy[e],t()}},TR=function(e){return function(){nL(e)}},bF=function(e){nL(e.data)},EF=function(e){Ca.postMessage(UMe(e),Iv.protocol+"//"+Iv.host)};AO&&OO||(AO=function(e){PMe(arguments.length,1);var t=pF(e)?e:jMe(e),r=kMe(arguments,1);return Oy[++SR]=function(){NMe(t,void 0,r)},bf(SR),SR},OO=function(e){delete Oy[e]},LMe?bf=function(e){MMe.nextTick(TR(e))}:wR&&wR.now?bf=function(e){wR.now(TR(e))}:yF&&!DMe?(_R=(hF=new yF).port2,hF.port1.onmessage=bF,bf=AMe(_R.postMessage,_R)):Ca.addEventListener&&pF(Ca.postMessage)&&!Ca.importScripts&&Iv&&Iv.protocol!=="file:"&&!NQ(EF)?(bf=EF,Ca.addEventListener("message",bF,!1)):bf=vF in gF("script")?function(e){mF.appendChild(gF("script"))[vF]=function(){mF.removeChild(this),nL(e)}}:function(e){setTimeout(TR(e),0)});var AQ={set:AO,clear:OO},OQ=function(){this.head=null,this.tail=null};OQ.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return(this.head=e.next)===null&&(this.tail=null),e.item}};var Ef,CR,xR,RR,_F,kQ=OQ,FMe=/ipad|iphone|ipod/i.test(Yh)&&typeof Pebble<"u",VMe=/web0s(?!.*chrome)/i.test(Yh),Ah=Jn,wF=dd,BMe=O0.f,IR=AQ.set,$Me=kQ,HMe=IQ,zMe=FMe,GMe=VMe,NR=D0,SF=Ah.MutationObserver||Ah.WebKitMutationObserver,TF=Ah.document,CF=Ah.process,Gb=Ah.Promise,xF=BMe(Ah,"queueMicrotask"),kO=xF&&xF.value;kO||(Rg=new $Me,Ig=function(){var e,t;for(NR&&(e=CF.domain)&&e.exit();t=Rg.get();)try{t()}catch(r){throw Rg.head&&Ef(),r}e&&e.enter()},HMe||NR||GMe||!SF||!TF?!zMe&&Gb&&Gb.resolve?((RR=Gb.resolve(void 0)).constructor=Gb,_F=wF(RR.then,RR),Ef=function(){_F(Ig)}):NR?Ef=function(){CF.nextTick(Ig)}:(IR=wF(IR,Ah),Ef=function(){IR(Ig)}):(CR=!0,xR=TF.createTextNode(""),new SF(Ig).observe(xR,{characterData:!0}),Ef=function(){xR.data=CR=!CR}),kO=function(e){Rg.head||Ef(),Rg.add(e)});var Rg,Ig,WMe=kO,Km=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}},Oh=Jn.Promise,PQ=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",KMe=!PQ&&!D0&&typeof window=="object"&&typeof document=="object",qMe=Jn,ky=Oh,YMe=Qn,XMe=X1,JMe=SQ,QMe=Kr,ZMe=KMe,eje=PQ,AR=Nh,RF=ky&&ky.prototype,tje=QMe("species"),DQ=!1,LQ=YMe(qMe.PromiseRejectionEvent),rje=XMe("Promise",function(){var e=JMe(ky),t=e!==String(ky);if(!t&&AR===66||!RF.catch||!RF.finally)return!0;if(!AR||AR<51||!/native code/.test(e)){var r=new ky(function(i){i(1)}),n=function(i){i(function(){},function(){})};if((r.constructor={})[tje]=n,!(DQ=r.then(function(){})instanceof n))return!0}return!t&&(ZMe||eje)&&!LQ}),U0={CONSTRUCTOR:rje,REJECTION_EVENT:LQ,SUBCLASSING:DQ},ql={},IF=Cs,nje=TypeError,ije=function(e){var t,r;this.promise=new e(function(n,i){if(t!==void 0||r!==void 0)throw nje("Bad Promise constructor");t=n,r=i}),this.resolve=IF(t),this.reject=IF(r)};ql.f=function(e){return new ije(e)};var OR,NF,oje=tr,Jw=D0,Zu=Jn,F0=Zn,aje=fd,sje=pd,lje=function(e){var t=lMe(e);uMe&&t&&!t[dF]&&cMe(t,dF,{configurable:!0,get:function(){return this}})},cje=Cs,PO=Qn,uje=ca,dje=Z2,hje=tL,MQ=AQ.set,iL=WMe,fje=function(e,t){try{arguments.length==1?console.error(e):console.error(e,t)}catch{}},pje=Km,mje=kQ,jQ=Qh,DO=Oh,UQ=U0,FQ=ql,s_="Promise",AF=UQ.CONSTRUCTOR,gje=UQ.REJECTION_EVENT,kR=jQ.getterFor(s_),yje=jQ.set,vje=DO&&DO.prototype,Ng=DO,PR=vje,VQ=Zu.TypeError,LO=Zu.document,oL=Zu.process,MO=FQ.f,bje=MO,Eje=!!(LO&&LO.createEvent&&Zu.dispatchEvent),BQ="unhandledrejection",$Q=function(e){var t;return!(!uje(e)||!PO(t=e.then))&&t},HQ=function(e,t){var r,n,i,o=t.value,a=t.state==1,s=a?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{s?(a||(t.rejection===2&&wje(t),t.rejection=1),s===!0?r=o:(u&&u.enter(),r=s(o),u&&(u.exit(),i=!0)),r===e.promise?c(VQ("Promise-chain cycle")):(n=$Q(r))?F0(n,r,l,c):l(r)):c(o)}catch(h){u&&!i&&u.exit(),c(h)}},zQ=function(e,t){e.notified||(e.notified=!0,iL(function(){for(var r,n=e.reactions;r=n.get();)HQ(r,e);e.notified=!1,t&&!e.rejection&&_je(e)}))},GQ=function(e,t,r){var n,i;Eje?((n=LO.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),Zu.dispatchEvent(n)):n={promise:t,reason:r},!gje&&(i=Zu["on"+e])?i(n):e===BQ&&fje("Unhandled promise rejection",r)},_je=function(e){F0(MQ,Zu,function(){var t,r=e.facade,n=e.value;if(OF(e)&&(t=pje(function(){Jw?oL.emit("unhandledRejection",n,r):GQ(BQ,r,n)}),e.rejection=Jw||OF(e)?2:1,t.error))throw t.value})},OF=function(e){return e.rejection!==1&&!e.parent},wje=function(e){F0(MQ,Zu,function(){var t=e.facade;Jw?oL.emit("rejectionHandled",t):GQ("rejectionhandled",t,e.value)})},op=function(e,t,r){return function(n){e(t,n,r)}},Np=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,zQ(e,!0))},jO=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw VQ("Promise can't be resolved itself");var n=$Q(t);n?iL(function(){var i={done:!1};try{F0(n,t,op(jO,i,e),op(Np,i,e))}catch(o){Np(i,o,e)}}):(e.value=t,e.state=1,zQ(e,!1))}catch(i){Np({done:!1},i,e)}}};AF&&(PR=(Ng=function(e){dje(this,PR),cje(e),F0(OR,this);var t=kR(this);try{e(op(jO,t),op(Np,t))}catch(r){Np(t,r)}}).prototype,(OR=function(e){yje(this,{type:s_,done:!1,notified:!1,parent:!1,reactions:new mje,rejection:!1,state:0,value:void 0})}).prototype=aje(PR,"then",function(e,t){var r=kR(this),n=MO(hje(this,Ng));return r.parent=!0,n.ok=!PO(e)||e,n.fail=PO(t)&&t,n.domain=Jw?oL.domain:void 0,r.state==0?r.reactions.add(n):iL(function(){HQ(n,r)}),n.promise}),NF=function(){var e=new OR,t=kR(e);this.promise=e,this.resolve=op(jO,t),this.reject=op(Np,t)},FQ.f=MO=function(e){return e===Ng||e===void 0?new NF(e):bje(e)}),oje({global:!0,constructor:!0,wrap:!0,forced:AF},{Promise:Ng}),sje(Ng,s_,!1,!0),lje(s_);var WQ=Kr("iterator"),KQ=!1;try{kF=0,DR={next:function(){return{done:!!kF++}},return:function(){KQ=!0}},DR[WQ]=function(){return this},Array.from(DR,function(){throw 2})}catch{}var kF,DR,Sje=Oh,Tje=function(e,t){if(!KQ)return!1;var r=!1;try{var n={};n[WQ]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch{}return r},rC=U0.CONSTRUCTOR||!Tje(function(e){Sje.all(e).then(void 0,function(){})}),Cje=Zn,xje=Cs,Rje=ql,Ije=Km,Nje=j0;tr({target:"Promise",stat:!0,forced:rC},{all:function(e){var t=this,r=Rje.f(t),n=r.resolve,i=r.reject,o=Ije(function(){var a=xje(t.resolve),s=[],l=0,c=1;Nje(e,function(u){var h=l++,f=!1;c++,Cje(a,t,u).then(function(p){f||(f=!0,s[h]=p,--c||n(s))},i)}),--c||n(s)});return o.error&&i(o.value),r.promise}});var Aje=tr,Oje=U0.CONSTRUCTOR;Oh&&Oh.prototype,Aje({target:"Promise",proto:!0,forced:Oje,real:!0},{catch:function(e){return this.then(void 0,e)}});var kje=Zn,Pje=Cs,Dje=ql,Lje=Km,Mje=j0;tr({target:"Promise",stat:!0,forced:rC},{race:function(e){var t=this,r=Dje.f(t),n=r.reject,i=Lje(function(){var o=Pje(t.resolve);Mje(e,function(a){kje(o,t,a).then(r.resolve,n)})});return i.error&&n(i.value),r.promise}});var jje=Zn,Uje=ql;tr({target:"Promise",stat:!0,forced:U0.CONSTRUCTOR},{reject:function(e){var t=Uje.f(this);return jje(t.reject,void 0,e),t.promise}});var Fje=bo,Vje=ca,Bje=ql,qQ=function(e,t){if(Fje(e),Vje(t)&&t.constructor===e)return t;var r=Bje.f(e);return(0,r.resolve)(t),r.promise},$je=tr,Hje=Oh,zje=U0.CONSTRUCTOR,Gje=qQ,Wje=Po("Promise"),Kje=!zje;$je({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return Gje(Kje&&this===Wje?Hje:this,e)}});var qje=Zn,Yje=Cs,Xje=ql,Jje=Km,Qje=j0;tr({target:"Promise",stat:!0,forced:rC},{allSettled:function(e){var t=this,r=Xje.f(t),n=r.resolve,i=r.reject,o=Jje(function(){var a=Yje(t.resolve),s=[],l=0,c=1;Qje(e,function(u){var h=l++,f=!1;c++,qje(a,t,u).then(function(p){f||(f=!0,s[h]={status:"fulfilled",value:p},--c||n(s))},function(p){f||(f=!0,s[h]={status:"rejected",reason:p},--c||n(s))})}),--c||n(s)});return o.error&&i(o.value),r.promise}});var Zje=Zn,eUe=Cs,tUe=Po,rUe=ql,nUe=Km,iUe=j0,PF="No one promise resolved";tr({target:"Promise",stat:!0,forced:rC},{any:function(e){var t=this,r=tUe("AggregateError"),n=rUe.f(t),i=n.resolve,o=n.reject,a=nUe(function(){var s=eUe(t.resolve),l=[],c=0,u=1,h=!1;iUe(e,function(f){var p=c++,m=!1;u++,Zje(s,t,f).then(function(g){m||h||(h=!0,i(g))},function(g){m||h||(m=!0,l[p]=g,--u||o(new r(l,PF)))})}),--u||o(new r(l,PF))});return a.error&&o(a.value),n.promise}});var oUe=tr,UO=Oh,aUe=nn,sUe=Po,lUe=Qn,cUe=tL,DF=qQ,uUe=UO&&UO.prototype;oUe({target:"Promise",proto:!0,real:!0,forced:!!UO&&aUe(function(){uUe.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=cUe(this,sUe("Promise")),r=lUe(e);return this.then(r?function(n){return DF(t,e()).then(function(){return n})}:e,r?function(n){return DF(t,e()).then(function(){throw n})}:e)}});var aL=Jr,dUe=$2,hUe=Ha,fUe=Hm,pUe=aL("".charAt),LF=aL("".charCodeAt),mUe=aL("".slice),MF=function(e){return function(t,r){var n,i,o=hUe(fUe(t)),a=dUe(r),s=o.length;return a<0||a>=s?e?"":void 0:(n=LF(o,a))<55296||n>56319||a+1===s||(i=LF(o,a+1))<56320||i>57343?e?pUe(o,a):n:e?mUe(o,a,a+2):i-56320+(n-55296<<10)+65536}},sL={codeAt:MF(!1),charAt:MF(!0)},gUe=sL.charAt,yUe=Ha,YQ=Qh,vUe=EQ,jF=Q2,XQ="String Iterator",bUe=YQ.set,EUe=YQ.getterFor(XQ);vUe(String,"String",function(e){bUe(this,{type:XQ,string:yUe(e),index:0})},function(){var e,t=EUe(this),r=t.string,n=t.index;return n>=r.length?jF(void 0,!0):(e=gUe(r,n),t.index+=e.length,jF(e,!1))});var _Ue=nl.Promise,wUe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},SUe=Jn,TUe=Kl,CUe=hd,UF=Jh,FF=Kr("toStringTag");for(Kb in wUe)LR=SUe[Kb],Wb=LR&&LR.prototype,Wb&&TUe(Wb)!==FF&&CUe(Wb,FF,Kb),UF[Kb]=UF.Array;var LR,Wb,Kb,JQ=_Ue,fe=Ur(JQ),VF=iQ;function QQ(e,t){let r=e&&e.navigator;if(!r.mediaDevices)return;let n=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;let s={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;let c=typeof a[l]=="object"?a[l]:{ideal:a[l]};c.exact!==void 0&&typeof c.exact=="number"&&(c.min=c.max=c.exact);let u=function(h,f){return h?h+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(c.ideal!==void 0){s.optional=s.optional||[];let h={};typeof c.ideal=="number"?(h[u("min",l)]=c.ideal,s.optional.push(h),h={},h[u("max",l)]=c.ideal,s.optional.push(h)):(h[u("",l)]=c.ideal,s.optional.push(h))}c.exact!==void 0&&typeof c.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[u("",l)]=c.exact):["min","max"].forEach(h=>{c[h]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[u(h,l)]=c[h])})}),a.advanced&&(s.optional=(s.optional||[]).concat(a.advanced)),s},i=function(a,s){if(t.version>=61)return s(a);if((a=JSON.parse(JSON.stringify(a)))&&typeof a.audio=="object"){let l=function(c,u,h){u in c&&!(h in c)&&(c[h]=c[u],delete c[u])};l((a=JSON.parse(JSON.stringify(a))).audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=n(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});let c=t.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||c)){let u;if(delete a.video.facingMode,l.exact==="environment"||l.ideal==="environment"?u=["back","rear"]:l.exact!=="user"&&l.ideal!=="user"||(u=["front"]),u)return r.mediaDevices.enumerateDevices().then(h=>{let f=(h=h.filter(p=>p.kind==="videoinput")).find(p=>u.some(m=>{var g;return ge(g=p.label.toLowerCase()).call(g,m)}));return!f&&h.length&&ge(u).call(u,"back")&&(f=h[h.length-1]),f&&(a.video.deviceId=l.exact?{exact:f.deviceId}:{ideal:f.deviceId}),a.video=n(a.video),VF("chrome: "+JSON.stringify(a)),s(a)})}a.video=n(a.video)}return VF("chrome: "+JSON.stringify(a)),s(a)},o=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=(function(a,s,l){i(a,c=>{r.webkitGetUserMedia(c,s,u=>{l&&l(o(u))})})}).bind(r),r.mediaDevices.getUserMedia){let a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(s){return i(s,l=>a(l).then(c=>{if(l.audio&&!c.getAudioTracks().length||l.video&&!c.getVideoTracks().length)throw c.getTracks().forEach(u=>{u.stop()}),new DOMException("","NotFoundError");return c},c=>fe.reject(o(c))))}}}function ZQ(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function eZ(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===n.track.id):{track:n.track};let o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===n.id):{track:n};let o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Xh(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function tZ(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){let t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};let i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,s){let l=i.apply(this,arguments);return l||(l=t(this,a),this._senders.push(l)),l};let o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);let s=this._senders.indexOf(a);s!==-1&&this._senders.splice(s,1)}}let r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(o=>{this._senders.push(t(this,o))})};let n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(o=>{let a=this._senders.find(s=>s.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){let t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){let r=t.apply(this,[]);return r.forEach(n=>n._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function rZ(e){if(!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[r,n,i]=arguments;if(arguments.length>0&&typeof r=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof r!="function"))return t.apply(this,[]);let o=function(s){let l={};return s.result().forEach(c=>{let u={id:c.id,timestamp:c.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[c.type]||c.type};c.names().forEach(h=>{u[h]=c.stat(h)}),l[u.id]=u}),l},a=function(s){return new Map(Object.keys(s).map(l=>[l,s[l]]))};if(arguments.length>=2){let s=function(l){n(a(o(l)))};return t.apply(this,[s,r])}return new fe((s,l)=>{t.apply(this,[function(c){s(a(o(c)))},l])}).then(n,i)}}function nZ(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){let r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){let i=r.apply(this,[]);return i.forEach(o=>o._pc=this),i});let n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){let i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){let i=this;return this._pc.getStats().then(o=>V3(o,i.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){let r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){let n=r.apply(this,[]);return n.forEach(i=>i._pc=this),n}),Xh(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){let n=this;return this._pc.getStats().then(i=>V3(i,n.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;let t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){let r=arguments[0],n,i,o;return this.getSenders().forEach(a=>{a.track===r&&(n?o=!0:n=a)}),this.getReceivers().forEach(a=>(a.track===r&&(i?o=!0:i=a),a.track===r)),o||n&&i?fe.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():i?i.getStats():fe.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function iZ(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};let s=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(s)===-1&&this._shimmedLocalStreams[a.id].push(s):this._shimmedLocalStreams[a.id]=[a,s],s};let r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(l=>{if(this.getSenders().find(c=>c.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});let a=this.getSenders();r.apply(this,arguments);let s=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[o.id]=[o].concat(s)};let n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],n.apply(this,arguments)};let i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{let s=this._shimmedLocalStreams[a].indexOf(o);s!==-1&&this._shimmedLocalStreams[a].splice(s,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function oZ(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return iZ(e);let r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){let l=r.apply(this);return this._reverseStreams=this._reverseStreams||{},l.map(c=>this._reverseStreams[c.id])};let n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.getTracks().forEach(c=>{if(this.getSenders().find(u=>u.track===c))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[l.id]){let c=new e.MediaStream(l.getTracks());this._streams[l.id]=c,this._reverseStreams[c.id]=l,l=c}n.apply(this,[l])};let i=e.RTCPeerConnection.prototype.removeStream;function o(l,c){let u=c.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{let f=l._reverseStreams[h],p=l._streams[f.id];u=u.replace(new RegExp(p.id,"g"),f.id)}),new RTCSessionDescription({type:c.type,sdp:u})}e.RTCPeerConnection.prototype.removeStream=function(l){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[l.id]||l]),delete this._reverseStreams[this._streams[l.id]?this._streams[l.id].id:l.id],delete this._streams[l.id]},e.RTCPeerConnection.prototype.addTrack=function(l,c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");let u=[].slice.call(arguments,1);if(u.length!==1||!u[0].getTracks().find(f=>f===l))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(f=>f.track===l))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};let h=this._streams[c.id];if(h)h.addTrack(l),fe.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{let f=new e.MediaStream([l]);this._streams[c.id]=f,this._reverseStreams[f.id]=c,this.addStream(f)}return this.getSenders().find(f=>f.track===l)},["createOffer","createAnswer"].forEach(function(l){let c=e.RTCPeerConnection.prototype[l],u={[l](){let h=arguments;return arguments.length&&typeof arguments[0]=="function"?c.apply(this,[f=>{let p=o(this,f);h[0].apply(null,[p])},f=>{h[1]&&h[1].apply(null,f)},arguments[2]]):c.apply(this,arguments).then(f=>o(this,f))}};e.RTCPeerConnection.prototype[l]=u[l]});let a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(l,c){let u=c.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{let f=l._reverseStreams[h],p=l._streams[f.id];u=u.replace(new RegExp(f.id,"g"),p.id)}),new RTCSessionDescription({type:c.type,sdp:u})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};let s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){let l=s.get.apply(this);return l.type===""?l:o(this,l)}}),e.RTCPeerConnection.prototype.removeTrack=function(l){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!l._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(l._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let c;this._streams=this._streams||{},Object.keys(this._streams).forEach(u=>{this._streams[u].getTracks().find(h=>l.track===h)&&(c=this._streams[u])}),c&&(c.getTracks().length===1?this.removeStream(this._reverseStreams[c.id]):c.removeTrack(l.track),this.dispatchEvent(new Event("negotiationneeded")))}}function FO(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){let n=e.RTCPeerConnection.prototype[r],i={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=i[r]})}function aZ(e,t){Xh(e,"negotiationneeded",r=>{let n=r.target;if(!(t.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")||n.signalingState==="stable")return r})}var BF=Object.freeze({__proto__:null,fixNegotiationNeeded:aZ,shimAddTrackRemoveTrack:oZ,shimAddTrackRemoveTrackWithNative:iZ,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(typeof t=="function"?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(n=>{let i=r.video&&r.video.width,o=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:a||3}},i&&(r.video.mandatory.maxWidth=i),o&&(r.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(r)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:tZ,shimGetStats:rZ,shimGetUserMedia:QQ,shimMediaStream:ZQ,shimOnTrack:eZ,shimPeerConnection:FO,shimSenderReceiverGetStats:nZ});function sZ(e,t){let r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(i,o,a){W2("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(i).then(o,a)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){let i=function(a,s,l){s in a&&!(l in a)&&(a[l]=a[s],delete a[s])},o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a.audio,"autoGainControl","mozAutoGainControl"),i(a.audio,"noiseSuppression","mozNoiseSuppression")),o(a)},n&&n.prototype.getSettings){let a=n.prototype.getSettings;n.prototype.getSettings=function(){let s=a.apply(this,arguments);return i(s,"mozAutoGainControl","autoGainControl"),i(s,"mozNoiseSuppression","noiseSuppression"),s}}if(n&&n.prototype.applyConstraints){let a=n.prototype.applyConstraints;n.prototype.applyConstraints=function(s){return this.kind==="audio"&&typeof s=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s,"autoGainControl","mozAutoGainControl"),i(s,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[s])}}}}function lZ(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function VO(e,t){if(typeof e!="object"||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){let o=e.RTCPeerConnection.prototype[i],a={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=a[i]});let r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[i,o,a]=arguments;return n.apply(this,[i||null]).then(s=>{if(t.version<53&&!o)try{s.forEach(l=>{l.type=r[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;s.forEach((c,u)=>{s.set(u,Object.assign({},c,{type:r[c.type]||c.type}))})}return s}).then(o,a)}}function cZ(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;let t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){let n=t.apply(this,[]);return n.forEach(i=>i._pc=this),n});let r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){let n=r.apply(this,arguments);return n._pc=this,n}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):fe.resolve(new Map)}}function uZ(e){if(typeof e!="object"||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;let t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){let r=t.apply(this,[]);return r.forEach(n=>n._pc=this),r}),Xh(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function dZ(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(t){W2("removeStream","removeTrack"),this.getSenders().forEach(r=>{var n;r.track&&ge(n=t.getTracks()).call(n,r.track)&&this.removeTrack(r)})})}function hZ(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function fZ(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];let n=r.length>0;n&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});let i=t.apply(this,arguments);if(n){let{sender:o}=i,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return i})}function pZ(e){if(typeof e!="object"||!e.RTCRtpSender)return;let t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){let r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function mZ(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?fe.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function gZ(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?fe.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var $F=Object.freeze({__proto__:null,shimAddTransceiver:fZ,shimCreateAnswer:gZ,shimCreateOffer:mZ,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){let n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,fe.reject(n)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})},shimGetParameters:pZ,shimGetUserMedia:sZ,shimOnTrack:lZ,shimPeerConnection:VO,shimRTCDataChannel:hZ,shimReceiverGetStats:uZ,shimRemoveStream:dZ,shimSenderGetStats:cZ});function yZ(e){if(typeof e=="object"&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){var n;this._localStreams||(this._localStreams=[]),ge(n=this._localStreams).call(n,r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i&&i.forEach(a=>{var s;this._localStreams?ge(s=this._localStreams).call(s,a)||this._localStreams.push(a):this._localStreams=[a]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);let r=this._localStreams.indexOf(t);if(r===-1)return;this._localStreams.splice(r,1);let n=t.getTracks();this.getSenders().forEach(i=>{ge(n).call(n,i.track)&&this.removeTrack(i)})})}}function vZ(e){if(typeof e=="object"&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(i=>{var o;if(this._remoteStreams||(this._remoteStreams=[]),ge(o=this._remoteStreams).call(o,i))return;this._remoteStreams.push(i);let a=new Event("addstream");a.stream=i,this.dispatchEvent(a)})})}});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){let r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(i=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(i)>=0)return;r._remoteStreams.push(i);let o=new Event("addstream");o.stream=i,r.dispatchEvent(o)})}),t.apply(r,arguments)}}}function bZ(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(l,c){let u=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[u]);return c?(h.then(l,c),fe.resolve()):h},t.createAnswer=function(l,c){let u=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[u]);return c?(h.then(l,c),fe.resolve()):h};let s=function(l,c,u){let h=i.apply(this,[l]);return u?(h.then(c,u),fe.resolve()):h};t.setLocalDescription=s,s=function(l,c,u){let h=o.apply(this,[l]);return u?(h.then(c,u),fe.resolve()):h},t.setRemoteDescription=s,s=function(l,c,u){let h=a.apply(this,[l]);return u?(h.then(c,u),fe.resolve()):h},t.addIceCandidate=s}function EZ(e){let t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){let r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=i=>n(_Z(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,n,i){t.mediaDevices.getUserMedia(r).then(n,i)}).bind(t))}function _Z(e){return e&&e.video!==void 0?Object.assign({},e,{video:oQ(e.video)}):e}function wZ(e){if(!e.RTCPeerConnection)return;let t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,n){if(r&&r.iceServers){let i=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(W2("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,i.push(a)):i.push(r.iceServers[o])}r.iceServers=i}return new t(r,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function SZ(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function TZ(e){let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){r.offerToReceiveAudio!==void 0&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);let n=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):r.offerToReceiveAudio!==!0||n||this.addTransceiver("audio",{direction:"recvonly"}),r.offerToReceiveVideo!==void 0&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);let i=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveVideo!==!0||i||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function CZ(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var HF=Object.freeze({__proto__:null,shimAudioContext:CZ,shimCallbacksAPI:bZ,shimConstraints:_Z,shimCreateOfferLegacy:TZ,shimGetUserMedia:EZ,shimLocalStreamsAPI:yZ,shimRTCIceServerUrls:wZ,shimRemoteStreamsAPI:vZ,shimTrackEventTransceiver:SZ}),xZ=`	
\v\f\r                　\u2028\u2029\uFEFF`,xUe=Hm,RUe=Ha,BO=xZ,zF=Jr("".replace),IUe=RegExp("^["+BO+"]+"),NUe=RegExp("(^|[^"+BO+"])["+BO+"]+$"),MR=function(e){return function(t){var r=RUe(xUe(t));return 1&e&&(r=zF(r,IUe,"")),2&e&&(r=zF(r,NUe,"$1")),r}},AUe={start:MR(1),end:MR(2),trim:MR(3)},OUe=yQ.PROPER,kUe=nn,GF=xZ,PUe=AUe.trim;tr({target:"String",proto:!0,forced:function(e){return kUe(function(){return!!GF[e]()||"​᠎"[e]()!=="​᠎"||OUe&&GF[e].name!==e})}("trim")},{trim:function(){return PUe(this)}});var DUe=Rs("String").trim,LUe=Gi,MUe=DUe,jR=String.prototype,jUe=function(e){var t=e.trim;return typeof e=="string"||e===jR||LUe(jR,e)&&t===jR.trim?MUe:t},Ri=Ur(jUe),RZ={exports:{}};(function(e){let t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},t.splitSections=function(r){return r.split(`
m=`).map((n,i)=>(i>0?"m="+n:n).trim()+`\r
`)},t.getDescription=function(r){let n=t.splitSections(r);return n&&n[0]},t.getMediaSections=function(r){let n=t.splitSections(r);return n.shift(),n},t.matchPrefix=function(r,n){return t.splitLines(r).filter(i=>i.indexOf(n)===0)},t.parseCandidate=function(r){let n;n=r.indexOf("a=candidate:")===0?r.substring(12).split(" "):r.substring(10).split(" ");let i={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let o=8;o<n.length;o+=2)switch(n[o]){case"raddr":i.relatedAddress=n[o+1];break;case"rport":i.relatedPort=parseInt(n[o+1],10);break;case"tcptype":i.tcpType=n[o+1];break;case"ufrag":i.ufrag=n[o+1],i.usernameFragment=n[o+1];break;default:i[n[o]]===void 0&&(i[n[o]]=n[o+1])}return i},t.writeCandidate=function(r){let n=[];n.push(r.foundation);let i=r.component;i==="rtp"?n.push(1):i==="rtcp"?n.push(2):n.push(i),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);let o=r.type;return n.push("typ"),n.push(o),o!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},t.parseIceOptions=function(r){return r.substring(14).split(" ")},t.parseRtpMap=function(r){let n=r.substring(9).split(" "),i={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),i.name=n[0],i.clockRate=parseInt(n[1],10),i.channels=n.length===3?parseInt(n[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);let i=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(r){let n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},t.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},t.parseFmtp=function(r){let n={},i,o=r.substring(r.indexOf(" ")+1).split(";");for(let a=0;a<o.length;a++)i=o[a].trim().split("="),n[i[0].trim()]=i[1];return n},t.writeFmtp=function(r){let n="",i=r.payloadType;if(r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){let o=[];Object.keys(r.parameters).forEach(a=>{r.parameters[a]!==void 0?o.push(a+"="+r.parameters[a]):o.push(a)}),n+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return n},t.parseRtcpFb=function(r){let n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},t.writeRtcpFb=function(r){let n="",i=r.payloadType;return r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(o=>{n+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),n},t.parseSsrcMedia=function(r){let n=r.indexOf(" "),i={ssrc:parseInt(r.substring(7,n),10)},o=r.indexOf(":",n);return o>-1?(i.attribute=r.substring(n+1,o),i.value=r.substring(o+1)):i.attribute=r.substring(n+1),i},t.parseSsrcGroup=function(r){let n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(i=>parseInt(i,10))}},t.getMid=function(r){let n=t.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(r){let n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},t.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:t.matchPrefix(r+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(r,n){let i="a=setup:"+n+`\r
`;return r.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(r){let n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},t.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?t.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;let n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},t.getCryptoParameters=function(r,n){return t.matchPrefix(r+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(r,n){let i=t.matchPrefix(r+n,"a=ice-ufrag:")[0],o=t.matchPrefix(r+n,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},t.parseRtpParameters=function(r){let n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(r)[0].split(" ");n.profile=i[2];for(let a=3;a<i.length;a++){let s=i[a],l=t.matchPrefix(r,"a=rtpmap:"+s+" ")[0];if(l){let c=t.parseRtpMap(l),u=t.matchPrefix(r,"a=fmtp:"+s+" ");switch(c.parameters=u.length?t.parseFmtp(u[0]):{},c.rtcpFeedback=t.matchPrefix(r,"a=rtcp-fb:"+s+" ").map(t.parseRtcpFb),n.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(c.name.toUpperCase())}}}t.matchPrefix(r,"a=extmap:").forEach(a=>{n.headerExtensions.push(t.parseExtmap(a))});let o=t.matchPrefix(r,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach(a=>{o.forEach(s=>{a.rtcpFeedback.find(l=>l.type===s.type&&l.parameter===s.parameter)||a.rtcpFeedback.push(s)})}),n},t.writeRtpDescription=function(r,n){let i="";i+="m="+r+" ",i+=n.codecs.length>0?"9":"0",i+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=n.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(a=>{i+=t.writeRtpMap(a),i+=t.writeFmtp(a),i+=t.writeRtcpFb(a)});let o=0;return n.codecs.forEach(a=>{a.maxptime>o&&(o=a.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(a=>{i+=t.writeExtmap(a)}),i},t.parseRtpEncodingParameters=function(r){let n=[],i=t.parseRtpParameters(r),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=t.matchPrefix(r,"a=ssrc:").map(f=>t.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),l=s.length>0&&s[0].ssrc,c,u=t.matchPrefix(r,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===l&&(c=u[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let p={ssrc:l,codecPayloadType:parseInt(f.parameters.apt,10)};l&&c&&(p.rtx={ssrc:c}),n.push(p),o&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:l,mechanism:a?"red+ulpfec":"red"},n.push(p))}}),n.length===0&&l&&n.push({ssrc:l});let h=t.matchPrefix(r,"b=");return h.length&&(h=h[0].indexOf("b=TIAS:")===0?parseInt(h[0].substring(7),10):h[0].indexOf("b=AS:")===0?1e3*parseInt(h[0].substring(5),10)*.95-16e3:void 0,n.forEach(f=>{f.maxBitrate=h})),n},t.parseRtcpParameters=function(r){let n={},i=t.matchPrefix(r,"a=ssrc:").map(s=>t.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);let o=t.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=o.length===0;let a=t.matchPrefix(r,"a=rtcp-mux");return n.mux=a.length>0,n},t.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},t.parseMsid=function(r){let n,i=t.matchPrefix(r,"a=msid:");if(i.length===1)return n=i[0].substring(7).split(" "),{stream:n[0],track:n[1]};let o=t.matchPrefix(r,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");return o.length>0?(n=o[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(r){let n=t.parseMLine(r),i=t.matchPrefix(r,"a=max-message-size:"),o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);let a=t.matchPrefix(r,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:n.fmt,maxMessageSize:o};let s=t.matchPrefix(r,"a=sctpmap:");if(s.length>0){let l=s[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:o}}},t.writeSctpDescription=function(r,n){let i=[];return i=r.protocol!=="DTLS/SCTP"?["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&i.push("a=max-message-size:"+n.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(r,n,i){let o,a=n!==void 0?n:2;return o=r||t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(r,n){let i=t.splitLines(r);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(r){return t.splitLines(r)[0].split(" ")[0].substring(2)},t.isRejected=function(r){return r.split(" ",2)[1]==="0"},t.parseMLine=function(r){let n=t.splitLines(r)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(r){let n=t.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;let n=t.splitLines(r);for(let i=0;i<n.length;i++)if(n[i].length<2||n[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(RZ);var IZ=RZ.exports,Ap=Ur(IZ),UUe=ike({__proto__:null,default:Ap},[IZ]);function l_(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;let t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&((r=JSON.parse(JSON.stringify(r))).candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){let n=new t(r),i=Ap.parseCandidate(r.candidate),o=Object.assign(n,i);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Xh(e,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new e.RTCIceCandidate(r.candidate),writable:"false"}),r))}function $O(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Xh(e,"icecandidate",t=>{if(t.candidate){let r=Ap.parseCandidate(t.candidate.candidate);r.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return t})}function c_(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});let r=function(s){if(!s||!s.sdp)return!1;let l=Ap.splitSections(s.sdp);return l.shift(),l.some(c=>{let u=Ap.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},n=function(s){let l=s.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;let c=parseInt(l[1],10);return c!=c?-1:c},i=function(s){let l=65536;return t.browser==="firefox"&&(l=t.version<57?s===-1?16384:2147483637:t.version<60?t.version===57?65535:65536:2147483637),l},o=function(s,l){let c=65536;t.browser==="firefox"&&t.version===57&&(c=65535);let u=Ap.matchPrefix(s.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substr(19),10):t.browser==="firefox"&&l!==-1&&(c=2147483637),c},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){let{sdpSemantics:s}=this.getConfiguration();s==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){let s=n(arguments[0]),l=i(s),c=o(arguments[0],s),u;u=l===0&&c===0?Number.POSITIVE_INFINITY:l===0||c===0?Math.max(l,c):Math.min(l,c);let h={};Object.defineProperty(h,"maxMessageSize",{get:()=>u}),this._sctp=h}return a.apply(this,arguments)}}function u_(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(n,i){let o=n.send;n.send=function(){let a=arguments[0],s=a.length||a.size||a.byteLength;if(n.readyState==="open"&&i.sctp&&s>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(n,arguments)}}let r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){let n=r.apply(this,arguments);return t(n,this),n},Xh(e,"datachannel",n=>(t(n.channel,n.target),n))}function HO(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;let t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{let n=t[r];t[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{let o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;let a=new Event("connectionstatechange",i);o.dispatchEvent(a)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function zO(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;let r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){let i=n.sdp.split(`
`).filter(o=>Ri(o).call(o)!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&n instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:n.type,sdp:i}):n.sdp=i}return r.apply(this,arguments)}}function d_(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;let r=e.RTCPeerConnection.prototype.addIceCandidate;r&&r.length!==0&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?fe.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),fe.resolve())})}function h_(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;let r=e.RTCPeerConnection.prototype.setLocalDescription;r&&r.length!==0&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let n=arguments[0]||{};if(typeof n!="object"||n.type&&n.sdp)return r.apply(this,arguments);if(n={type:n.type,sdp:n.sdp},!n.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":n.type="offer";break;default:n.type="answer"}return n.sdp||n.type!=="offer"&&n.type!=="answer"?r.apply(this,[n]):(n.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(i=>r.apply(this,[i]))})}var FUe=Object.freeze({__proto__:null,removeExtmapAllowMixed:zO,shimAddIceCandidateNullOrEmpty:d_,shimConnectionState:HO,shimMaxMessageSize:c_,shimParameterlessSetLocalDescription:h_,shimRTCIceCandidate:l_,shimRTCIceCandidateRelayProtocol:$O,shimSendThrowTypeError:u_});(function(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},r=iQ,n=function(o){let a={browser:null,version:null};if(o===void 0||!o.navigator)return a.browser="Not a browser.",a;let{navigator:s}=o;if(s.mozGetUserMedia)a.browser="firefox",a.version=Bb(s.userAgent,/Firefox\/(\d+)\./,1);else if(s.webkitGetUserMedia||o.isSecureContext===!1&&o.webkitRTCPeerConnection)a.browser="chrome",a.version=Bb(s.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!o.RTCPeerConnection||!s.userAgent.match(/AppleWebKit\/(\d+)\./))return a.browser="Not a supported browser.",a;a.browser="safari",a.version=Bb(s.userAgent,/AppleWebKit\/(\d+)\./,1),a.supportsUnifiedPlan=o.RTCRtpTransceiver&&"currentDirection"in o.RTCRtpTransceiver.prototype}return a}(e),i={browserDetails:n,commonShim:FUe,extractVersion:Bb,disableLog:jDe,disableWarnings:UDe,sdp:UUe};switch(n.browser){case"chrome":if(!BF||!FO||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),i;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),i;r("adapter.js shimming chrome."),i.browserShim=BF,d_(e,n),h_(e),QQ(e,n),ZQ(e),FO(e,n),eZ(e),oZ(e,n),tZ(e),rZ(e),nZ(e),aZ(e,n),l_(e),$O(e),HO(e),c_(e,n),u_(e),zO(e,n);break;case"firefox":if(!$F||!VO||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),i;r("adapter.js shimming firefox."),i.browserShim=$F,d_(e,n),h_(e),sZ(e,n),VO(e,n),lZ(e),dZ(e),cZ(e),uZ(e),hZ(e),fZ(e),pZ(e),mZ(e),gZ(e),l_(e),HO(e),c_(e,n),u_(e);break;case"safari":if(!HF||!t.shimSafari)return r("Safari shim is not included in this adapter release."),i;r("adapter.js shimming safari."),i.browserShim=HF,d_(e,n),h_(e),wZ(e),TZ(e),bZ(e),yZ(e),vZ(e),SZ(e),EZ(e),CZ(e),l_(e),$O(e),c_(e,n),u_(e),zO(e,n);break;default:r("Unsupported browser!")}})({window:typeof window>"u"?void 0:window});var VUe=Rs("Array").keys,BUe=Kl,$Ue=li,HUe=Gi,zUe=VUe,UR=Array.prototype,GUe={DOMTokenList:!0,NodeList:!0},WUe=function(e){var t=e.keys;return e===UR||HUe(UR,e)&&t===UR.keys||$Ue(GUe,BUe(e))?zUe:t},Bo=Ur(WUe),WF=Gm,KUe=TypeError,qUe=WT,YUe=xs,XUe=cd,nC=function(e,t,r){var n=qUe(t);n in e?YUe.f(e,n,XUe(0,r)):e[n]=r},KF=H2,JUe=Fc,QUe=nC,ZUe=Array,e5e=Math.max,lL=function(e,t,r){for(var n=JUe(e),i=KF(t,n),o=KF(r===void 0?n:r,n),a=ZUe(e5e(o-i,0)),s=0;i<o;i++,s++)QUe(a,s,e[i]);return a.length=s,a},qF=lL,t5e=Math.floor,GO=function(e,t){var r=e.length,n=t5e(r/2);return r<8?r5e(e,t):n5e(e,GO(qF(e,0,n),t),GO(qF(e,n),t),t)},r5e=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},n5e=function(e,t,r,n){for(var i=t.length,o=r.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?n(t[a],r[s])<=0?t[a++]:r[s++]:a<i?t[a++]:r[s++];return e},NZ=GO,YF=Yh.match(/firefox\/(\d+)/i),i5e=!!YF&&+YF[1],o5e=/MSIE|Trident/.test(Yh),XF=Yh.match(/AppleWebKit\/(\d+)\./),a5e=!!XF&&+XF[1],s5e=tr,AZ=Jr,l5e=Cs,c5e=Wl,JF=Fc,u5e=function(e,t){if(!delete e[t])throw KUe("Cannot delete property "+WF(t)+" of "+WF(e))},QF=Ha,cL=nn,d5e=NZ,h5e=KT,ZF=i5e,f5e=o5e,eV=Nh,tV=a5e,Tu=[],rV=AZ(Tu.sort),p5e=AZ(Tu.push),m5e=cL(function(){Tu.sort(void 0)}),g5e=cL(function(){Tu.sort(null)}),y5e=h5e("sort"),nV=!cL(function(){if(eV)return eV<70;if(!(ZF&&ZF>3)){if(f5e)return!0;if(tV)return tV<603;var e,t,r,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)Tu.push({k:t+n,v:r})}for(Tu.sort(function(o,a){return a.v-o.v}),n=0;n<Tu.length;n++)t=Tu[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return i!=="DGBEFHACIJK"}});s5e({target:"Array",proto:!0,forced:m5e||!g5e||!y5e||!nV},{sort:function(e){e!==void 0&&l5e(e);var t=c5e(this);if(nV)return e===void 0?rV(t):rV(t,e);var r,n,i=[],o=JF(t);for(n=0;n<o;n++)n in t&&p5e(i,t[n]);for(d5e(i,function(a){return function(s,l){return l===void 0?-1:s===void 0?1:a!==void 0?+a(s,l)||0:QF(s)>QF(l)?1:-1}}(e)),r=JF(i),n=0;n<r;)t[n]=i[n++];for(;n<o;)u5e(t,n++);return t}});var FR,VR,v5e=Rs("Array").sort,b5e=Gi,E5e=v5e,BR=Array.prototype,_5e=function(e){var t=e.sort;return e===BR||b5e(BR,e)&&t===BR.sort?E5e:t},V0=Ur(_5e),WO={exports:{}};FR=WO,VR=WO.exports,function(e,t){var r="function",n="undefined",i="object",o="string",a="major",s="model",l="name",c="type",u="vendor",h="version",f="architecture",p="console",m="mobile",g="tablet",y="smarttv",v="wearable",b="embedded",_="Amazon",S="Apple",I="ASUS",A="BlackBerry",D="Browser",M="Chrome",H="Firefox",V="Google",G="Huawei",Y="LG",Z="Microsoft",$="Motorola",F="Opera",K="Samsung",k="Sharp",P="Sony",B="Xiaomi",x="Zebra",E="Facebook",N="Chromium OS",C="Mac OS",W=function(et){for(var bt={},Ie=0;Ie<et.length;Ie++)bt[et[Ie].toUpperCase()]=et[Ie];return bt},U=function(et,bt){return typeof et===o&&X(bt).indexOf(X(et))!==-1},X=function(et){return et.toLowerCase()},ae=function(et,bt){if(typeof et===o)return et=et.replace(/^\s\s*/,""),typeof bt===n?et:et.substring(0,350)},he=function(et,bt){for(var Ie,rt,He,Ze,qe,re,Ae=0;Ae<bt.length&&!qe;){var Fe=bt[Ae],We=bt[Ae+1];for(Ie=rt=0;Ie<Fe.length&&!qe&&Fe[Ie];)if(qe=Fe[Ie++].exec(et))for(He=0;He<We.length;He++)re=qe[++rt],typeof(Ze=We[He])===i&&Ze.length>0?Ze.length===2?typeof Ze[1]==r?this[Ze[0]]=Ze[1].call(this,re):this[Ze[0]]=Ze[1]:Ze.length===3?typeof Ze[1]!==r||Ze[1].exec&&Ze[1].test?this[Ze[0]]=re?re.replace(Ze[1],Ze[2]):t:this[Ze[0]]=re?Ze[1].call(this,re,Ze[2]):t:Ze.length===4&&(this[Ze[0]]=re?Ze[3].call(this,re.replace(Ze[1],Ze[2])):t):this[Ze]=re||t;Ae+=2}},pe=function(et,bt){for(var Ie in bt)if(typeof bt[Ie]===i&&bt[Ie].length>0){for(var rt=0;rt<bt[Ie].length;rt++)if(U(bt[Ie][rt],et))return Ie==="?"?t:Ie}else if(U(bt[Ie],et))return Ie==="?"?t:Ie;return et},Pe={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},$e={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,h],[/opios[\/ ]+([\w\.]+)/i],[h,[l,F+" Mini"]],[/\bopr\/([\w\.]+)/i],[h,[l,F]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[l,h],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[l,"UC"+D]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[h,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[h,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[l,"IE"]],[/yabrowser\/([\w\.]+)/i],[h,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+D],h],[/\bfocus\/([\w\.]+)/i],[h,[l,H+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[l,F+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[l,F+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[l,"MIUI "+D]],[/fxios\/([-\w\.]+)/i],[h,[l,H]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+D]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+D],h],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,h],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,E],h],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[l,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[l,M+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,M+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[l,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[h,pe,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[l,H+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,h],[/(cobalt)\/([\w\.]+)/i],[l,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,X]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",X]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,X]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[s,[u,K],[c,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[s,[u,K],[c,m]],[/\((ip(?:hone|od)[\w ]*);/i],[s,[u,S],[c,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[s,[u,S],[c,g]],[/(macintosh);/i],[s,[u,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[s,[u,k],[c,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[s,[u,G],[c,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[s,[u,G],[c,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[s,/_/g," "],[u,B],[c,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[s,/_/g," "],[u,B],[c,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[s,[u,"OPPO"],[c,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[s,[u,"Vivo"],[c,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[s,[u,"Realme"],[c,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[s,[u,$],[c,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[s,[u,$],[c,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[s,[u,Y],[c,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[s,[u,Y],[c,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[s,[u,"Lenovo"],[c,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[s,/_/g," "],[u,"Nokia"],[c,m]],[/(pixel c)\b/i],[s,[u,V],[c,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[s,[u,V],[c,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[u,P],[c,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[s,"Xperia Tablet"],[u,P],[c,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[s,[u,"OnePlus"],[c,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[s,[u,_],[c,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[s,/(.+)/g,"Fire Phone $1"],[u,_],[c,m]],[/(playbook);[-\w\),; ]+(rim)/i],[s,u,[c,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[s,[u,A],[c,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[s,[u,I],[c,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[s,[u,I],[c,m]],[/(nexus 9)/i],[s,[u,"HTC"],[c,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[s,/_/g," "],[c,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[s,[u,"Acer"],[c,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[s,[u,"Meizu"],[c,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,s,[c,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,s,[c,g]],[/(surface duo)/i],[s,[u,Z],[c,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[s,[u,"Fairphone"],[c,m]],[/(u304aa)/i],[s,[u,"AT&T"],[c,m]],[/\bsie-(\w*)/i],[s,[u,"Siemens"],[c,m]],[/\b(rct\w+) b/i],[s,[u,"RCA"],[c,g]],[/\b(venue[\d ]{2,7}) b/i],[s,[u,"Dell"],[c,g]],[/\b(q(?:mv|ta)\w+) b/i],[s,[u,"Verizon"],[c,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[s,[u,"Barnes & Noble"],[c,g]],[/\b(tm\d{3}\w+) b/i],[s,[u,"NuVision"],[c,g]],[/\b(k88) b/i],[s,[u,"ZTE"],[c,g]],[/\b(nx\d{3}j) b/i],[s,[u,"ZTE"],[c,m]],[/\b(gen\d{3}) b.+49h/i],[s,[u,"Swiss"],[c,m]],[/\b(zur\d{3}) b/i],[s,[u,"Swiss"],[c,g]],[/\b((zeki)?tb.*\b) b/i],[s,[u,"Zeki"],[c,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],s,[c,g]],[/\b(ns-?\w{0,9}) b/i],[s,[u,"Insignia"],[c,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[s,[u,"NextBook"],[c,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],s,[c,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],s,[c,m]],[/\b(ph-1) /i],[s,[u,"Essential"],[c,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[s,[u,"Envizen"],[c,g]],[/\b(trio[-\w\. ]+) b/i],[s,[u,"MachSpeed"],[c,g]],[/\btu_(1491) b/i],[s,[u,"Rotor"],[c,g]],[/(shield[\w ]+) b/i],[s,[u,"Nvidia"],[c,g]],[/(sprint) (\w+)/i],[u,s,[c,m]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[u,Z],[c,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[s,[u,x],[c,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[s,[u,x],[c,m]],[/smart-tv.+(samsung)/i],[u,[c,y]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[u,K],[c,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,Y],[c,y]],[/(apple) ?tv/i],[u,[s,S+" TV"],[c,y]],[/crkey/i],[[s,M+"cast"],[u,V],[c,y]],[/droid.+aft(\w)( bui|\))/i],[s,[u,_],[c,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[s,[u,k],[c,y]],[/(bravia[\w ]+)( bui|\))/i],[s,[u,P],[c,y]],[/(mitv-\w{5}) bui/i],[s,[u,B],[c,y]],[/Hbbtv.*(technisat) (.*);/i],[u,s,[c,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,ae],[s,ae],[c,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[c,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,s,[c,p]],[/droid.+; (shield) bui/i],[s,[u,"Nvidia"],[c,p]],[/(playstation [345portablevi]+)/i],[s,[u,P],[c,p]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[s,[u,Z],[c,p]],[/((pebble))app/i],[u,s,[c,v]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[s,[u,S],[c,v]],[/droid.+; (glass) \d/i],[s,[u,V],[c,v]],[/droid.+; (wt63?0{2,3})\)/i],[s,[u,x],[c,v]],[/(quest( 2| pro)?)/i],[s,[u,E],[c,v]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[c,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[s,[c,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[s,[c,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[c,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[c,m]],[/(android[-\w\. ]{0,9});.+buil/i],[s,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[l,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,h],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[h,pe,Pe]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[h,pe,Pe]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,C],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,h],[/\(bb(10);/i],[h,[l,A]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[l,H+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[h,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[h,[l,M+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,N],h],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,h],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[l,h]]},je=function(et,bt){if(typeof et===i&&(bt=et,et=t),!(this instanceof je))return new je(et,bt).getResult();var Ie=typeof e!==n&&e.navigator?e.navigator:t,rt=et||(Ie&&Ie.userAgent?Ie.userAgent:""),He=Ie&&Ie.userAgentData?Ie.userAgentData:t,Ze=bt?function(qe,re){var Ae={};for(var Fe in qe)re[Fe]&&re[Fe].length%2==0?Ae[Fe]=re[Fe].concat(qe[Fe]):Ae[Fe]=qe[Fe];return Ae}($e,bt):$e;return this.getBrowser=function(){var qe={};return qe[l]=t,qe[h]=t,he.call(qe,rt,Ze.browser),qe[a]=function(re){return typeof re===o?re.replace(/[^\d\.]/g,"").split(".")[0]:t}(qe[h]),Ie&&Ie.brave&&typeof Ie.brave.isBrave==r&&(qe[l]="Brave"),qe},this.getCPU=function(){var qe={};return qe[f]=t,he.call(qe,rt,Ze.cpu),qe},this.getDevice=function(){var qe={};return qe[u]=t,qe[s]=t,qe[c]=t,he.call(qe,rt,Ze.device),!qe[c]&&He&&He.mobile&&(qe[c]=m),qe[s]=="Macintosh"&&Ie&&typeof Ie.standalone!==n&&Ie.maxTouchPoints&&Ie.maxTouchPoints>2&&(qe[s]="iPad",qe[c]=g),qe},this.getEngine=function(){var qe={};return qe[l]=t,qe[h]=t,he.call(qe,rt,Ze.engine),qe},this.getOS=function(){var qe={};return qe[l]=t,qe[h]=t,he.call(qe,rt,Ze.os),!qe[l]&&He&&He.platform!="Unknown"&&(qe[l]=He.platform.replace(/chrome os/i,N).replace(/macos/i,C)),qe},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return rt},this.setUA=function(qe){return rt=typeof qe===o&&qe.length>350?ae(qe,350):qe,this},this.setUA(rt),this};je.VERSION="0.7.34",je.BROWSER=W([l,h,a]),je.CPU=W([f]),je.DEVICE=W([s,u,c,p,m,y,g,v,b]),je.ENGINE=je.OS=W([l,h]),FR.exports&&(VR=FR.exports=je),VR.UAParser=je;var ot=typeof e!==n&&(e.jQuery||e.Zepto);if(ot&&!ot.ua){var Nt=new je;ot.ua=Nt.getResult(),ot.ua.get=function(){return Nt.getUA()},ot.ua.set=function(et){Nt.setUA(et);var bt=Nt.getResult();for(var Ie in bt)ot.ua[Ie]=bt[Ie]}}}(typeof window=="object"?window:Ip);var w5e=Ur(WO.exports),S5e=Kl,T5e=li,C5e=$m,x5e=Jh,R5e=Kr("iterator"),I5e=Object,N5e=function(e){if(C5e(e))return!1;var t=I5e(e);return t[R5e]!==void 0||"@@iterator"in t||T5e(x5e,S5e(t))},A5e=Ur(N5e),$R=Jn;tr({global:!0,forced:$R.globalThis!==$R},{globalThis:$R});var iV=Ur(Jn);function OZ(e,t){return function(){return e.apply(t,arguments)}}var{toString:O5e}=Object.prototype,{getPrototypeOf:uL}=Object,Qw=(HR=Object.create(null),e=>{let t=O5e.call(e);return HR[t]||(HR[t]=t.slice(8,-1).toLowerCase())}),HR,Yl=e=>(e=e.toLowerCase(),t=>Qw(t)===e),iC=e=>t=>typeof t===e,{isArray:Lf}=Array,Jg=iC("undefined"),oV=Yl("ArrayBuffer"),k5e=iC("string"),qa=iC("function"),aV=iC("number"),qb=e=>e!==null&&typeof e=="object",Yb=e=>{if(Qw(e)!=="object")return!1;let t=uL(e);return!(t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.toStringTag in e||A5e(e))},P5e=Yl("Date"),D5e=Yl("File"),L5e=Yl("Blob"),M5e=Yl("FileList"),j5e=Yl("URLSearchParams");function Qg(e,t){let r,n,{allOwnKeys:i=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e!=null)if(typeof e!="object"&&(e=[e]),Lf(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{let o=i?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length,s;for(r=0;r<a;r++)s=o[r],t.call(null,e[s],s,e)}}function sV(e,t){t=t.toLowerCase();let r=Object.keys(e),n,i=r.length;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}var kZ=iV!==void 0?iV:typeof self<"u"?self:typeof window<"u"?window:global,lV=e=>!Jg(e)&&e!==kZ,U5e=(zR=typeof Uint8Array<"u"&&uL(Uint8Array),e=>zR&&e instanceof zR),zR,F5e=Yl("HTMLFormElement"),cV=(e=>{let{hasOwnProperty:t}=e;return(r,n)=>t.call(r,n)})(Object.prototype),V5e=Yl("RegExp"),uV=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};Qg(r,(i,o)=>{let a;(a=t(i,o,e))!==!1&&(n[o]=a||i)}),Object.defineProperties(e,n)},GR="abcdefghijklmnopqrstuvwxyz",dV="0123456789",hV={DIGIT:dV,ALPHA:GR,ALPHA_DIGIT:GR+GR.toUpperCase()+dV},B5e=Yl("AsyncFunction"),Ee={isArray:Lf,isArrayBuffer:oV,isBuffer:function(e){return e!==null&&!Jg(e)&&e.constructor!==null&&!Jg(e.constructor)&&qa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||qa(e.append)&&((t=Qw(e))==="formdata"||t==="object"&&qa(e.toString)&&e.toString()==="[object FormData]"))},isArrayBufferView:function(e){let t;return t=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&oV(e.buffer),t},isString:k5e,isNumber:aV,isBoolean:e=>e===!0||e===!1,isObject:qb,isPlainObject:Yb,isUndefined:Jg,isDate:P5e,isFile:D5e,isBlob:L5e,isRegExp:V5e,isFunction:qa,isStream:e=>qb(e)&&qa(e.pipe),isURLSearchParams:j5e,isTypedArray:U5e,isFileList:M5e,forEach:Qg,merge:function e(){let{caseless:t}=lV(this)&&this||{},r={},n=(i,o)=>{let a=t&&sV(r,o)||o;Yb(r[a])&&Yb(i)?r[a]=e(r[a],i):Yb(i)?r[a]=e({},i):Lf(i)?r[a]=i.slice():r[a]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Qg(arguments[i],n);return r},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Qg(t,(i,o)=>{r&&qa(i)?e[o]=OZ(i,r):e[o]=i},{allOwnKeys:n}),e},trim:e=>Ri(e)?Ri(e).call(e):e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,o,a,s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],n&&!n(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=r!==!1&&uL(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Qw,kindOfTest:Yl,endsWith:(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return n!==-1&&n===r},toArray:e=>{if(!e)return null;if(Lf(e))return e;let t=e.length;if(!aV(t))return null;let r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{let r=(e&&e[Symbol.iterator]).call(e),n;for(;(n=r.next())&&!n.done;){let i=n.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let r,n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},isHTMLForm:F5e,hasOwnProperty:cV,hasOwnProp:cV,reduceDescriptors:uV,freezeMethods:e=>{uV(e,(t,r)=>{if(qa(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=e[r];qa(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{let r={},n=i=>{i.forEach(o=>{r[o]=!0})};return Lf(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,n){return r.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:sV,global:kZ,isContextDefined:lV,ALPHABET:hV,generateString:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hV.ALPHA_DIGIT,r="",{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r},isSpecCompliantForm:function(e){return!!(e&&qa(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])},toJSONObject:e=>{let t=new Array(10),r=(n,i)=>{if(qb(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;let o=Lf(n)?[]:{};return Qg(n,(a,s)=>{let l=r(a,i+1);!Jg(l)&&(o[s]=l)}),t[i]=void 0,o}}return n};return r(e,0)},isAsyncFn:B5e,isThenable:e=>e&&(qb(e)||qa(e))&&qa(e.then)&&qa(e.catch)};function pr(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}Ee.inherits(pr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ee.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var fV=pr.prototype,pV={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{pV[e]={value:e}}),Object.defineProperties(pr,pV),Object.defineProperty(fV,"isAxiosError",{value:!0}),pr.from=(e,t,r,n,i,o)=>{let a=Object.create(fV);return Ee.toFlatObject(e,a,function(s){return s!==Error.prototype},s=>s!=="isAxiosError"),pr.call(a,e.message,t,r,n,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};function WR(e){return Ee.isPlainObject(e)||Ee.isArray(e)}function PZ(e){return Ee.endsWith(e,"[]")?e.slice(0,-2):e}function mV(e,t,r){return e?e.concat(t).map(function(n,i){return n=PZ(n),!r&&i?"["+n+"]":n}).join(r?".":""):t}var $5e=Ee.toFlatObject(Ee,{},null,function(e){return/^is[A-Z]/.test(e)});function Zw(e,t,r){if(!Ee.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;let n=(r=Ee.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,p){return!Ee.isUndefined(p[f])})).metaTokens,i=r.visitor||c,o=r.dots,a=r.indexes,s=(r.Blob||typeof Blob<"u"&&Blob)&&Ee.isSpecCompliantForm(t);if(!Ee.isFunction(i))throw new TypeError("visitor must be a function");function l(f){if(f===null)return"";if(Ee.isDate(f))return f.toISOString();if(!s&&Ee.isBlob(f))throw new pr("Blob is not supported. Use a Buffer instead.");return Ee.isArrayBuffer(f)||Ee.isTypedArray(f)?s&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function c(f,p,m){let g=f;if(f&&!m&&typeof f=="object"){if(Ee.endsWith(p,"{}"))p=n?p:p.slice(0,-2),f=JSON.stringify(f);else if(Ee.isArray(f)&&function(y){return Ee.isArray(y)&&!y.some(WR)}(f)||(Ee.isFileList(f)||Ee.endsWith(p,"[]"))&&(g=Ee.toArray(f)))return p=PZ(p),g.forEach(function(y,v){!Ee.isUndefined(y)&&y!==null&&t.append(a===!0?mV([p],v,o):a===null?p:p+"[]",l(y))}),!1}return!!WR(f)||(t.append(mV(m,p,o),l(f)),!1)}let u=[],h=Object.assign($5e,{defaultVisitor:c,convertValue:l,isVisitable:WR});if(!Ee.isObject(e))throw new TypeError("data must be an object");return function f(p,m){if(!Ee.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));u.push(p),Ee.forEach(p,function(g,y){(!(Ee.isUndefined(g)||g===null)&&i.call(t,g,Ee.isString(y)?Ri(y).call(y):y,m,h))===!0&&f(g,m?m.concat(y):[y])}),u.pop()}}(e),t}function gV(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function dL(e,t){this._pairs=[],e&&Zw(e,this,t)}var yV=dL.prototype;function H5e(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function DZ(e,t,r){if(!t)return e;let n=r&&r.encode||H5e,i=r&&r.serialize,o;if(o=i?i(t,r):Ee.isURLSearchParams(t)?t.toString():new dL(t,r).toString(n),o){let a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}yV.append=function(e,t){this._pairs.push([e,t])},yV.toString=function(e){let t=e?function(r){return e.call(this,r,gV)}:gV;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};var vV=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ee.forEach(this.handlers,function(t){t!==null&&e(t)})}},LZ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},MZ={exports:{}},z5e=tr,G5e=$a,bV=xs.f;z5e({target:"Object",stat:!0,forced:Object.defineProperty!==bV,sham:!G5e},{defineProperty:bV});var jZ=nl.Object,W5e=MZ.exports=function(e,t,r){return jZ.defineProperty(e,t,r)};jZ.defineProperty.sham&&(W5e.sham=!0);var UZ=Ur(MZ.exports),K5e=Gl,B0=Array.isArray||function(e){return K5e(e)=="Array"},q5e=TypeError,EV=B0,Y5e=eC,X5e=ca,J5e=Kr("species"),_V=Array,Q5e=function(e){var t;return EV(e)&&(t=e.constructor,(Y5e(t)&&(t===_V||EV(t.prototype))||X5e(t)&&(t=t[J5e])===null)&&(t=void 0)),t===void 0?_V:t},FZ=function(e,t){return new(Q5e(e))(t===0?0:t)},Z5e=nn,e4e=Nh,t4e=Kr("species"),VZ=function(e){return e4e>=51||!Z5e(function(){var t=[];return(t.constructor={})[t4e]=function(){return{foo:1}},t[e](Boolean).foo!==1})},r4e=tr,n4e=nn,i4e=B0,o4e=ca,a4e=Wl,s4e=Fc,wV=function(e){if(e>9007199254740991)throw q5e("Maximum allowed index exceeded");return e},SV=nC,l4e=FZ,c4e=VZ,u4e=Nh,BZ=Kr("isConcatSpreadable"),d4e=u4e>=51||!n4e(function(){var e=[];return e[BZ]=!1,e.concat()[0]!==e}),h4e=function(e){if(!o4e(e))return!1;var t=e[BZ];return t!==void 0?!!t:i4e(e)};r4e({target:"Array",proto:!0,arity:1,forced:!d4e||!c4e("concat")},{concat:function(e){var t,r,n,i,o,a=a4e(this),s=l4e(a,0),l=0;for(t=-1,n=arguments.length;t<n;t++)if(h4e(o=t===-1?a:arguments[t]))for(i=s4e(o),wV(l+i),r=0;r<i;r++,l++)r in o&&SV(s,l,o[r]);else wV(l+1),SV(s,l++,o);return s.length=l,s}});var $Z={},f4e=Gl,p4e=ud,TV=YT.f,m4e=lL,CV=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];$Z.f=function(e){return CV&&f4e(e)=="Window"?function(t){try{return TV(t)}catch{return m4e(CV)}}(e):TV(p4e(e))};var qm={},g4e=Kr;qm.f=g4e;var xV=nl,y4e=li,v4e=qm,b4e=xs.f,Gn=function(e){var t=xV.Symbol||(xV.Symbol={});y4e(t,e)||b4e(t,e,{value:v4e.f(e)})},E4e=Zn,_4e=Po,w4e=Kr,S4e=fd,HZ=function(){var e=_4e("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=w4e("toPrimitive");t&&!t[n]&&S4e(t,n,function(i){return E4e(r,this)},{arity:1})},T4e=dd,C4e=zT,x4e=Wl,R4e=Fc,I4e=FZ,RV=Jr([].push),Xc=function(e){var t=e==1,r=e==2,n=e==3,i=e==4,o=e==6,a=e==7,s=e==5||o;return function(l,c,u,h){for(var f,p,m=x4e(l),g=C4e(m),y=T4e(c,u),v=R4e(g),b=0,_=h||I4e,S=t?_(l,v):r||a?_(l,0):void 0;v>b;b++)if((s||b in g)&&(p=y(f=g[b],b,m),e))if(t)S[b]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return b;case 2:RV(S,f)}else switch(e){case 4:return!1;case 7:RV(S,f)}return o?-1:n||i?i:S}},zZ={forEach:Xc(0),map:Xc(1),filter:Xc(2),some:Xc(3),every:Xc(4),find:Xc(5),findIndex:Xc(6),filterReject:Xc(7)},Xb=tr,hL=Jn,fL=Zn,N4e=Jr,Op=$a,_f=zm,A4e=nn,Fi=li,O4e=Gi,KO=bo,oC=ud,pL=WT,k4e=Ha,qO=cd,Nv=M0,GZ=JT,P4e=YT,WZ=$Z,D4e=L0,KZ=O0,qZ=xs,L4e=Y2,YZ=HT,IV=fd,M4e=ZT,mL=Wm,XZ=XT,NV=V2,j4e=Kr,U4e=qm,F4e=Gn,V4e=HZ,B4e=pd,JZ=Qh,aC=zZ.forEach,zo=qT("hidden"),eS="Symbol",Av="prototype",$4e=JZ.set,AV=JZ.getterFor(eS),Ks=Object[Av],ap=hL.Symbol,f_=ap&&ap[Av],H4e=hL.TypeError,KR=hL.QObject,QZ=KZ.f,Fd=qZ.f,ZZ=WZ.f,z4e=YZ.f,eee=N4e([].push),Lc=mL("symbols"),$0=mL("op-symbols"),G4e=mL("wks"),qR=!KR||!KR[Av]||!KR[Av].findChild,YO=Op&&A4e(function(){return Nv(Fd({},"a",{get:function(){return Fd(this,"a",{value:7}).a}})).a!=7})?function(e,t,r){var n=QZ(Ks,t);n&&delete Ks[t],Fd(e,t,r),n&&e!==Ks&&Fd(Ks,t,n)}:Fd,YR=function(e,t){var r=Lc[e]=Nv(f_);return $4e(r,{type:eS,tag:e,description:t}),Op||(r.description=t),r},tS=function(e,t,r){e===Ks&&tS($0,t,r),KO(e);var n=pL(t);return KO(r),Fi(Lc,n)?(r.enumerable?(Fi(e,zo)&&e[zo][n]&&(e[zo][n]=!1),r=Nv(r,{enumerable:qO(0,!1)})):(Fi(e,zo)||Fd(e,zo,qO(1,{})),e[zo][n]=!0),YO(e,n,r)):Fd(e,n,r)},XR=function(e,t){KO(e);var r=oC(t),n=GZ(r).concat(ree(r));return aC(n,function(i){Op&&!fL(tee,r,i)||tS(e,i,r[i])}),e},tee=function(e){var t=pL(e),r=fL(z4e,this,t);return!(this===Ks&&Fi(Lc,t)&&!Fi($0,t))&&(!(r||!Fi(this,t)||!Fi(Lc,t)||Fi(this,zo)&&this[zo][t])||r)},OV=function(e,t){var r=oC(e),n=pL(t);if(r!==Ks||!Fi(Lc,n)||Fi($0,n)){var i=QZ(r,n);return!i||!Fi(Lc,n)||Fi(r,zo)&&r[zo][n]||(i.enumerable=!0),i}},kV=function(e){var t=ZZ(oC(e)),r=[];return aC(t,function(n){Fi(Lc,n)||Fi(XZ,n)||eee(r,n)}),r},ree=function(e){var t=e===Ks,r=ZZ(t?$0:oC(e)),n=[];return aC(r,function(i){!Fi(Lc,i)||t&&!Fi(Ks,i)||eee(n,Lc[i])}),n};_f||(IV(f_=(ap=function(){if(O4e(f_,this))throw H4e("Symbol is not a constructor");var e=arguments.length&&arguments[0]!==void 0?k4e(arguments[0]):void 0,t=NV(e),r=function(n){this===Ks&&fL(r,$0,n),Fi(this,zo)&&Fi(this[zo],t)&&(this[zo][t]=!1),YO(this,t,qO(1,n))};return Op&&qR&&YO(Ks,t,{configurable:!0,set:r}),YR(t,e)})[Av],"toString",function(){return AV(this).tag}),IV(ap,"withoutSetter",function(e){return YR(NV(e),e)}),YZ.f=tee,qZ.f=tS,L4e.f=XR,KZ.f=OV,P4e.f=WZ.f=kV,D4e.f=ree,U4e.f=function(e){return YR(j4e(e),e)},Op&&M4e(f_,"description",{configurable:!0,get:function(){return AV(this).description}})),Xb({global:!0,constructor:!0,wrap:!0,forced:!_f,sham:!_f},{Symbol:ap}),aC(GZ(G4e),function(e){F4e(e)}),Xb({target:eS,stat:!0,forced:!_f},{useSetter:function(){qR=!0},useSimple:function(){qR=!1}}),Xb({target:"Object",stat:!0,forced:!_f,sham:!Op},{create:function(e,t){return t===void 0?Nv(e):XR(Nv(e),t)},defineProperty:tS,defineProperties:XR,getOwnPropertyDescriptor:OV}),Xb({target:"Object",stat:!0,forced:!_f},{getOwnPropertyNames:kV}),V4e(),B4e(ap,eS),XZ[zo]=!0;var nee=zm&&!!Symbol.for&&!!Symbol.keyFor,W4e=tr,K4e=Po,q4e=li,Y4e=Ha,iee=Wm,X4e=nee,JR=iee("string-to-symbol-registry"),J4e=iee("symbol-to-string-registry");W4e({target:"Symbol",stat:!0,forced:!X4e},{for:function(e){var t=Y4e(e);if(q4e(JR,t))return JR[t];var r=K4e("Symbol")(t);return JR[t]=r,J4e[r]=t,r}});var Q4e=tr,Z4e=li,e3e=k0,t3e=Gm,r3e=nee,PV=Wm("symbol-to-string-registry");Q4e({target:"Symbol",stat:!0,forced:!r3e},{keyFor:function(e){if(!e3e(e))throw TypeError(t3e(e)+" is not a symbol");if(Z4e(PV,e))return PV[e]}});var DV=B0,n3e=Qn,LV=Gl,i3e=Ha,MV=Jr([].push),o3e=tr,oee=Po,aee=U2,a3e=Zn,H0=Jr,see=nn,jV=Qn,UV=k0,lee=rL,s3e=function(e){if(n3e(e))return e;if(DV(e)){for(var t=e.length,r=[],n=0;n<t;n++){var i=e[n];typeof i=="string"?MV(r,i):typeof i!="number"&&LV(i)!="Number"&&LV(i)!="String"||MV(r,i3e(i))}var o=r.length,a=!0;return function(s,l){if(a)return a=!1,l;if(DV(this))return l;for(var c=0;c<o;c++)if(r[c]===s)return l}}},l3e=zm,c3e=String,Vu=oee("JSON","stringify"),Jb=H0(/./.exec),FV=H0("".charAt),u3e=H0("".charCodeAt),d3e=H0("".replace),h3e=H0(1 .toString),f3e=/[\uD800-\uDFFF]/g,VV=/^[\uD800-\uDBFF]$/,BV=/^[\uDC00-\uDFFF]$/,$V=!l3e||see(function(){var e=oee("Symbol")();return Vu([e])!="[null]"||Vu({a:e})!="{}"||Vu(Object(e))!="{}"}),HV=see(function(){return Vu("\uDF06\uD834")!=='"\\udf06\\ud834"'||Vu("\uDEAD")!=='"\\udead"'}),p3e=function(e,t){var r=lee(arguments),n=s3e(t);if(jV(n)||e!==void 0&&!UV(e))return r[1]=function(i,o){if(jV(n)&&(o=a3e(n,this,c3e(i),o)),!UV(o))return o},aee(Vu,null,r)},m3e=function(e,t,r){var n=FV(r,t-1),i=FV(r,t+1);return Jb(VV,e)&&!Jb(BV,i)||Jb(BV,e)&&!Jb(VV,n)?"\\u"+h3e(u3e(e,0),16):e};Vu&&o3e({target:"JSON",stat:!0,arity:3,forced:$V||HV},{stringify:function(e,t,r){var n=lee(arguments),i=aee($V?p3e:Vu,null,n);return HV&&typeof i=="string"?d3e(i,f3e,m3e):i}});var zV=L0,g3e=Wl;tr({target:"Object",stat:!0,forced:!zm||nn(function(){zV.f(1)})},{getOwnPropertySymbols:function(e){var t=zV.f;return t?t(g3e(e)):[]}}),Gn("asyncIterator"),Gn("hasInstance"),Gn("isConcatSpreadable"),Gn("iterator"),Gn("match"),Gn("matchAll"),Gn("replace"),Gn("search"),Gn("species"),Gn("split");var y3e=HZ;Gn("toPrimitive"),y3e();var v3e=Po,b3e=pd;Gn("toStringTag"),b3e(v3e("Symbol"),"Symbol"),Gn("unscopables"),pd(Jn.JSON,"JSON",!0);var E3e=nl.Symbol,_3e=Kr,w3e=xs.f,GV=_3e("metadata"),WV=Function.prototype;WV[GV]===void 0&&w3e(WV,GV,{value:null}),Gn("dispose"),Gn("metadata");var S3e=E3e;Gn("asyncDispose");var T3e=Jr,gL=Po("Symbol"),C3e=gL.keyFor,x3e=T3e(gL.prototype.valueOf),cee=gL.isRegisteredSymbol||function(e){try{return C3e(x3e(e))!==void 0}catch{return!1}};tr({target:"Symbol",stat:!0},{isRegisteredSymbol:cee});for(KV=Wm,ZR=Po,qV=Jr,YV=k0,XV=Kr,Ag=ZR("Symbol"),XO=Ag.isWellKnownSymbol,JO=ZR("Object","getOwnPropertyNames"),uee=qV(Ag.prototype.valueOf),QO=KV("wks"),Qb=0,eI=JO(Ag),JV=eI.length;Qb<JV;Qb++)try{QR=eI[Qb],YV(Ag[QR])&&XV(QR)}catch{}var QR,KV,ZR,qV,YV,XV,Ag,XO,JO,uee,QO,Qb,eI,JV,QV=function(e){if(XO&&XO(e))return!0;try{for(var t=uee(e),r=0,n=JO(QO),i=n.length;r<i;r++)if(QO[n[r]]==t)return!0}catch{}return!1};tr({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:QV}),Gn("matcher"),Gn("observable"),tr({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:cee}),tr({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:QV}),Gn("metadataKey"),Gn("patternMatch"),Gn("replaceAll");var sp=Ur(S3e),dee=Ur(qm.f("iterator"));function Py(e){return Py=typeof sp=="function"&&typeof dee=="symbol"?function(t){return typeof t}:function(t){return t&&typeof sp=="function"&&t.constructor===sp&&t!==sp.prototype?"symbol":typeof t},Py(e)}var R3e=Ur(qm.f("toPrimitive"));function I3e(e){var t=function(r,n){if(Py(r)!=="object"||r===null)return r;var i=r[R3e];if(i!==void 0){var o=i.call(r,n||"default");if(Py(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Py(t)==="symbol"?t:String(t)}function R(e,t,r){return(t=I3e(t))in e?UZ(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N3e=nn,A3e=Kr("iterator"),yL=!N3e(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2"),n="";return e.pathname="c%20d",t.forEach(function(i,o){t.delete("b"),n+=o+i}),r.delete("a",2),!e.toJSON||!r.has("a",1)||r.has("a",2)||!t.size&&!0||!t.sort||e.href!=="http://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[A3e]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||n!=="a1c3"||new URL("http://x",void 0).host!=="x"}),O3e=fd,tI=tr,om=Jn,Zb=Zn,Fl=Jr,lp=$a,ZV=yL,eB=fd,k3e=ZT,P3e=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:O3e(e,n,t[n],r);return e},D3e=pd,L3e=J2,vL=Qh,hee=Z2,rI=Qn,M3e=li,j3e=dd,U3e=Kl,F3e=bo,fee=ca,Co=Ha,V3e=M0,tB=cd,ZO=X2,B3e=QT,wf=tC,$3e=NZ,H3e=Kr("iterator"),Ov="URLSearchParams",pee=Ov+"Iterator",mee=vL.set,is=vL.getterFor(Ov),z3e=vL.getterFor(pee),G3e=Object.getOwnPropertyDescriptor,bL=function(e){if(!lp)return om[e];var t=G3e(om,e);return t&&t.value},rB=bL("fetch"),rS=bL("Request"),Dy=bL("Headers"),nI=rS&&rS.prototype,nB=Dy&&Dy.prototype,W3e=om.RegExp,K3e=om.TypeError,gee=om.decodeURIComponent,q3e=om.encodeURIComponent,Y3e=Fl("".charAt),iB=Fl([].join),qd=Fl([].push),ek=Fl("".replace),X3e=Fl([].shift),oB=Fl([].splice),aB=Fl("".split),J3e=Fl("".slice),Q3e=/\+/g,sB=Array(4),Z3e=function(e){return sB[e-1]||(sB[e-1]=W3e("((?:%[\\da-f]{2}){"+e+"})","gi"))},eFe=function(e){try{return gee(e)}catch{return e}},lB=function(e){var t=ek(e,Q3e," "),r=4;try{return gee(t)}catch{for(;r;)t=ek(t,Z3e(r--),eFe);return t}},tFe=/[!'()~]|%20/g,rFe={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},nFe=function(e){return rFe[e]},cB=function(e){return ek(q3e(e),tFe,nFe)},iI=L3e(function(e,t){mee(this,{type:pee,iterator:ZO(is(e).entries),kind:t})},"Iterator",function(){var e=z3e(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value=t==="keys"?n.key:t==="values"?n.value:[n.key,n.value]),r},!0),yee=function(e){this.entries=[],this.url=null,e!==void 0&&(fee(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?Y3e(e,0)==="?"?J3e(e,1):e:Co(e)))};yee.prototype={type:Ov,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,i,o,a,s,l=B3e(e);if(l)for(r=(t=ZO(e,l)).next;!(n=Zb(r,t)).done;){if(o=(i=ZO(F3e(n.value))).next,(a=Zb(o,i)).done||(s=Zb(o,i)).done||!Zb(o,i).done)throw K3e("Expected sequence with length 2");qd(this.entries,{key:Co(a.value),value:Co(s.value)})}else for(var c in e)M3e(e,c)&&qd(this.entries,{key:c,value:Co(e[c])})},parseQuery:function(e){if(e)for(var t,r,n=aB(e,"&"),i=0;i<n.length;)(t=n[i++]).length&&(r=aB(t,"="),qd(this.entries,{key:lB(X3e(r)),value:lB(iB(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],qd(r,cB(e.key)+"="+cB(e.value));return iB(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var nS=function(){hee(this,Mf);var e=mee(this,new yee(arguments.length>0?arguments[0]:void 0));lp||(this.size=e.entries.length)},Mf=nS.prototype;P3e(Mf,{append:function(e,t){var r=is(this);wf(arguments.length,2),qd(r.entries,{key:Co(e),value:Co(t)}),lp||this.length++,r.updateURL()},delete:function(e){for(var t=is(this),r=wf(arguments.length,1),n=t.entries,i=Co(e),o=r<2?void 0:arguments[1],a=o===void 0?o:Co(o),s=0;s<n.length;){var l=n[s];if(l.key!==i||a!==void 0&&l.value!==a)s++;else if(oB(n,s,1),a!==void 0)break}lp||(this.size=n.length),t.updateURL()},get:function(e){var t=is(this).entries;wf(arguments.length,1);for(var r=Co(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){var t=is(this).entries;wf(arguments.length,1);for(var r=Co(e),n=[],i=0;i<t.length;i++)t[i].key===r&&qd(n,t[i].value);return n},has:function(e){for(var t=is(this).entries,r=wf(arguments.length,1),n=Co(e),i=r<2?void 0:arguments[1],o=i===void 0?i:Co(i),a=0;a<t.length;){var s=t[a++];if(s.key===n&&(o===void 0||s.value===o))return!0}return!1},set:function(e,t){var r=is(this);wf(arguments.length,1);for(var n,i=r.entries,o=!1,a=Co(e),s=Co(t),l=0;l<i.length;l++)(n=i[l]).key===a&&(o?oB(i,l--,1):(o=!0,n.value=s));o||qd(i,{key:a,value:s}),lp||(this.size=i.length),r.updateURL()},sort:function(){var e=is(this);$3e(e.entries,function(t,r){return t.key>r.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,r=is(this).entries,n=j3e(e,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new iI(this,"keys")},values:function(){return new iI(this,"values")},entries:function(){return new iI(this,"entries")}},{enumerable:!0}),eB(Mf,H3e,Mf.entries,{name:"entries"}),eB(Mf,"toString",function(){return is(this).serialize()},{enumerable:!0}),lp&&k3e(Mf,"size",{get:function(){return is(this).entries.length},configurable:!0,enumerable:!0}),D3e(nS,Ov),tI({global:!0,constructor:!0,forced:!ZV},{URLSearchParams:nS}),!ZV&&rI(Dy)&&(uB=Fl(nB.has),dB=Fl(nB.set),oI=function(e){if(fee(e)){var t,r=e.body;if(U3e(r)===Ov)return t=e.headers?new Dy(e.headers):new Dy,uB(t,"content-type")||dB(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),V3e(e,{body:tB(0,Co(r)),headers:tB(0,t)})}return e},rI(rB)&&tI({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return rB(e,arguments.length>1?oI(arguments[1]):{})}}),rI(rS)&&(eE=function(e){return hee(this,nI),new rS(e,arguments.length>1?oI(arguments[1]):{})},nI.constructor=eE,eE.prototype=nI,tI({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:eE})));var uB,dB,oI,eE,iFe={URLSearchParams:nS,getState:is},hB=Ur(nl.URLSearchParams),oFe={isBrowser:!0,classes:{URLSearchParams:hB!==void 0?hB:dL,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},vee=typeof window<"u"&&typeof document<"u",aFe=(fB=typeof navigator<"u"&&navigator.product,vee&&["ReactNative","NativeScript","NS"].indexOf(fB)<0),fB,sFe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function";function pB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pB(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Rl=mB(mB({},Object.freeze({__proto__:null,hasBrowserEnv:vee,hasStandardBrowserEnv:aFe,hasStandardBrowserWebWorkerEnv:sFe})),oFe),lFe=bo,cFe=Zn,uFe=li,dFe=Gi,hFe=function(){var e=lFe(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},gB=RegExp.prototype,bee=function(e){var t=e.flags;return t!==void 0||"flags"in gB||uFe(e,"flags")||!dFe(gB,e)?t:cFe(hFe,e)},fFe=sL.charAt,yB=Zn,pFe=bo,mFe=Qn,gFe=Gl,yFe=/./.exec,vFe=TypeError,bFe=tr,vB=Zn,Eee=Rv,EFe=J2,tE=Q2,bB=Hm,_ee=Q1,kv=Ha,_Fe=bo,wFe=$m,SFe=Gl,TFe=Z1,wee=bee,CFe=GT,xFe=nn,RFe=tL,IFe=function(e,t,r){return t+(r?fFe(e,t).length:1)},NFe=function(e,t){var r=e.exec;if(mFe(r)){var n=yB(r,e,t);return n!==null&&pFe(n),n}if(gFe(e)==="RegExp")return yB(yFe,e,t);throw vFe("RegExp#exec called on incompatible receiver")},See=Qh,AFe=Kr("matchAll"),Tee="RegExp String",Cee=Tee+" Iterator",OFe=See.set,kFe=See.getterFor(Cee),PFe=TypeError,tk=Eee("".indexOf),iS=Eee("".matchAll),aI=!!iS&&!xFe(function(){iS("a",/./)}),DFe=EFe(function(e,t,r,n){OFe(this,{type:Cee,regexp:e,string:t,global:r,unicode:n,done:!1})},Tee,function(){var e=kFe(this);if(e.done)return tE(void 0,!0);var t=e.regexp,r=e.string,n=NFe(t,r);return n===null?(e.done=!0,tE(void 0,!0)):e.global?(kv(n[0])===""&&(t.lastIndex=IFe(r,_ee(t.lastIndex),e.unicode)),tE(n,!1)):(e.done=!0,tE(n,!1))}),EB=function(e){var t,r,n,i=_Fe(this),o=kv(e),a=RFe(i,RegExp),s=kv(wee(i));return t=new a(a===RegExp?i.source:i,s),r=!!~tk(s,"g"),n=!!~tk(s,"u"),t.lastIndex=_ee(i.lastIndex),new DFe(t,o,r,n)};bFe({target:"String",proto:!0,forced:aI},{matchAll:function(e){var t,r,n,i,o=bB(this);if(wFe(e)){if(aI)return iS(o,e)}else{if(TFe(e)&&(t=kv(bB(wee(e))),!~tk(t,"g")))throw PFe("`.matchAll` does not allow non-global regexes");if(aI)return iS(o,e);if((n=CFe(e,AFe))===void 0&&SFe(e)=="RegExp"&&(n=EB),n)return vB(n,e,o)}return r=kv(o),i=new RegExp(e,"g"),vB(EB,i,r)}});var LFe=Rs("String").matchAll,MFe=Gi,jFe=LFe,sI=String.prototype,UFe=function(e){var t=e.matchAll;return typeof e=="string"||e===sI||MFe(sI,e)&&t===sI.matchAll?jFe:t},FFe=Ur(UFe);function xee(e){function t(r,n,i,o){let a=r[o++];if(a==="__proto__")return!0;let s=Number.isFinite(+a),l=o>=r.length;return a=!a&&Ee.isArray(i)?i.length:a,l?(Ee.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!s):(i[a]&&Ee.isObject(i[a])||(i[a]=[]),t(r,n,i[a],o)&&Ee.isArray(i[a])&&(i[a]=function(c){let u={},h=Object.keys(c),f,p=h.length,m;for(f=0;f<p;f++)m=h[f],u[m]=c[m];return u}(i[a])),!s)}if(Ee.isFormData(e)&&Ee.isFunction(e.entries)){let r={};return Ee.forEachEntry(e,(n,i)=>{t(function(o){return FFe(Ee).call(Ee,/\w+|\[(\w*)]/g,o).map(a=>a[0]==="[]"?"":a[1]||a[0])}(n),i,r,0)}),r}return null}var EL={transitional:LZ,adapter:["xhr","http"],transformRequest:[function(e,t){let r=t.getContentType()||"",n=r.indexOf("application/json")>-1,i=Ee.isObject(e);if(i&&Ee.isHTMLForm(e)&&(e=new FormData(e)),Ee.isFormData(e))return n?JSON.stringify(xee(e)):e;if(Ee.isArrayBuffer(e)||Ee.isBuffer(e)||Ee.isStream(e)||Ee.isFile(e)||Ee.isBlob(e))return e;if(Ee.isArrayBufferView(e))return e.buffer;if(Ee.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(a,s){return Zw(a,new Rl.classes.URLSearchParams,Object.assign({visitor:function(l,c,u,h){return Rl.isNode&&Ee.isBuffer(l)?(this.append(c,l.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)}},s))}(e,this.formSerializer).toString();if((o=Ee.isFileList(e))||r.indexOf("multipart/form-data")>-1){let a=this.env&&this.env.FormData;return Zw(o?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(a,s,l){if(Ee.isString(a))try{return(s||JSON.parse)(a),Ri(Ee).call(Ee,a)}catch(c){if(c.name!=="SyntaxError")throw c}return(0,JSON.stringify)(a)}(e)):e}],transformResponse:[function(e){let t=this.transitional||EL.transitional,r=t&&t.forcedJSONParsing,n=this.responseType==="json";if(e&&Ee.isString(e)&&(r&&!this.responseType||n)){let i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(o){if(i)throw o.name==="SyntaxError"?pr.from(o,pr.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rl.classes.FormData,Blob:Rl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ee.forEach(["delete","get","head","post","put","patch"],e=>{EL.headers[e]={}});var _L=EL,VFe=Ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_B=Symbol("internals");function Og(e){var t;return e&&Ri(t=String(e)).call(t).toLowerCase()}function p_(e){return e===!1||e==null?e:Ee.isArray(e)?e.map(p_):String(e)}function lI(e,t,r,n,i){return Ee.isFunction(n)?n.call(this,t,r):(i&&(t=r),Ee.isString(t)?Ee.isString(n)?t.indexOf(n)!==-1:Ee.isRegExp(n)?n.test(t):void 0:void 0)}var m_=class{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function i(s,l,c){let u=Og(l);if(!u)throw new Error("header name must be a non-empty string");let h=Ee.findKey(n,u);(!h||n[h]===void 0||c===!0||c===void 0&&n[h]!==!1)&&(n[h||l]=p_(s))}let o=(s,l)=>Ee.forEach(s,(c,u)=>i(c,u,l));var a;return Ee.isPlainObject(e)||e instanceof this.constructor?o(e,t):Ee.isString(e)&&(e=Ri(e).call(e))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(Ri(a=e).call(a))?o((s=>{let l={},c,u,h;return s&&s.split(`
`).forEach(function(f){var p,m;h=f.indexOf(":"),c=Ri(p=f.substring(0,h)).call(p).toLowerCase(),u=Ri(m=f.substring(h+1)).call(m),!c||l[c]&&VFe[c]||(c==="set-cookie"?l[c]?l[c].push(u):l[c]=[u]:l[c]=l[c]?l[c]+", "+u:u)}),l})(e),t):e!=null&&i(t,e,r),this}get(e,t){if(e=Og(e)){let r=Ee.findKey(this,e);if(r){let n=this[r];if(!t)return n;if(t===!0)return function(i){let o=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,s;for(;s=a.exec(i);)o[s[1]]=s[2];return o}(n);if(Ee.isFunction(t))return t.call(this,n,r);if(Ee.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Og(e)){let r=Ee.findKey(this,e);return!(!r||this[r]===void 0||t&&!lI(0,this[r],r,t))}return!1}delete(e,t){let r=this,n=!1;function i(o){if(o=Og(o)){let a=Ee.findKey(r,o);!a||t&&!lI(0,r[a],a,t)||(delete r[a],n=!0)}}return Ee.isArray(e)?e.forEach(i):i(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let i=t[r];e&&!lI(0,this[i],i,e,!0)||(delete this[i],n=!0)}return n}normalize(e){let t=this,r={};return Ee.forEach(this,(n,i)=>{var o;let a=Ee.findKey(r,i);if(a)return t[a]=p_(n),void delete t[i];let s=e?function(l){return Ri(l).call(l).toLowerCase().replace(/([a-z\d])(\w*)/g,(c,u,h)=>u.toUpperCase()+h)}(i):Ri(o=String(i)).call(o);s!==i&&delete t[i],t[s]=p_(n),r[s]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){let t=Object.create(null);return Ee.forEach(this,(r,n)=>{r!=null&&r!==!1&&(t[n]=e&&Ee.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){let t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.forEach(o=>t.set(o)),t}static accessor(e){let t=(this[_B]=this[_B]={accessors:{}}).accessors,r=this.prototype;function n(i){let o=Og(i);t[o]||(function(a,s){let l=Ee.toCamelCase(" "+s);["get","set","has"].forEach(c=>{Object.defineProperty(a,c+l,{value:function(u,h,f){return this[c].call(this,s,u,h,f)},configurable:!0})})}(r,i),t[o]=!0)}return Ee.isArray(e)?e.forEach(n):n(e),this}};m_.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ee.reduceDescriptors(m_.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(i){this[n]=i}}}),Ee.freezeMethods(m_);var Tc=m_;function cI(e,t){let r=this||_L,n=t||r,i=Tc.from(n.headers),o=n.data;return Ee.forEach(e,function(a){o=a.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function Ree(e){return!(!e||!e.__CANCEL__)}function z0(e,t,r){pr.call(this,e??"canceled",pr.ERR_CANCELED,t,r),this.name="CanceledError"}Ee.inherits(z0,pr,{__CANCEL__:!0});var BFe=Rl.hasStandardBrowserEnv?{write(e,t,r,n,i,o){let a=[e+"="+encodeURIComponent(t)];Ee.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),Ee.isString(n)&&a.push("path="+n),Ee.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Iee(e,t){return e&&!function(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}(t)?function(r,n){return n?r.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):r}(e,t):t}var $Fe=Rl.hasStandardBrowserEnv?function(){let e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),r;function n(i){let o=i;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=n(window.location.href),function(i){let o=Ee.isString(i)?n(i):i;return o.protocol===r.protocol&&o.host===r.host}}():function(){return!0};function wB(e,t){let r=0,n=function(i,o){i=i||10;let a=new Array(i),s=new Array(i),l,c=0,u=0;return o=o!==void 0?o:1e3,function(h){let f=Date.now(),p=s[u];l||(l=f),a[c]=h,s[c]=f;let m=u,g=0;for(;m!==c;)g+=a[m++],m%=i;if(c=(c+1)%i,c===u&&(u=(u+1)%i),f-l<o)return;let y=p&&f-p;return y?Math.round(1e3*g/y):void 0}}(50,250);return i=>{let o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-r,l=n(s);r=o;let c={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var HFe=typeof XMLHttpRequest<"u"&&function(e){return new fe(function(t,r){let n=e.data,i=Tc.from(e.headers).normalize(),o,a,{responseType:s,withXSRFToken:l}=e;function c(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if(Ee.isFormData(n)){if(Rl.hasStandardBrowserEnv||Rl.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((a=i.getContentType())!==!1){let[m,...g]=a?a.split(";").map(y=>Ri(y).call(y)).filter(Boolean):[];i.setContentType([m||"multipart/form-data",...g].join("; "))}}let u=new XMLHttpRequest;if(e.auth){let m=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(m+":"+g))}let h=Iee(e.baseURL,e.url);function f(){if(!u)return;let m=Tc.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());(function(g,y,v){let b=v.config.validateStatus;v.status&&b&&!b(v.status)?y(new pr("Request failed with status code "+v.status,[pr.ERR_BAD_REQUEST,pr.ERR_BAD_RESPONSE][Math.floor(v.status/100)-4],v.config,v.request,v)):g(v)})(function(g){t(g),c()},function(g){r(g),c()},{data:s&&s!=="text"&&s!=="json"?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:m,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),DZ(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){u&&u.readyState===4&&(u.status!==0||u.responseURL&&u.responseURL.indexOf("file:")===0)&&setTimeout(f)},u.onabort=function(){u&&(r(new pr("Request aborted",pr.ECONNABORTED,e,u)),u=null)},u.onerror=function(){r(new pr("Network Error",pr.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let m=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",g=e.transitional||LZ;e.timeoutErrorMessage&&(m=e.timeoutErrorMessage),r(new pr(m,g.clarifyTimeoutError?pr.ETIMEDOUT:pr.ECONNABORTED,e,u)),u=null},Rl.hasStandardBrowserEnv&&(l&&Ee.isFunction(l)&&(l=l(e)),l||l!==!1&&$Fe(h))){let m=e.xsrfHeaderName&&e.xsrfCookieName&&BFe.read(e.xsrfCookieName);m&&i.set(e.xsrfHeaderName,m)}n===void 0&&i.setContentType(null),"setRequestHeader"in u&&Ee.forEach(i.toJSON(),function(m,g){u.setRequestHeader(g,m)}),Ee.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),s&&s!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",wB(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",wB(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=m=>{u&&(r(!m||m.type?new z0(null,e,u):m),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));let p=function(m){let g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(m);return g&&g[1]||""}(h);p&&Rl.protocols.indexOf(p)===-1?r(new pr("Unsupported protocol "+p+":",pr.ERR_BAD_REQUEST,e)):u.send(n||null)})},rk={http:null,xhr:HFe};Ee.forEach(rk,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var SB=e=>"- ".concat(e),zFe=e=>Ee.isFunction(e)||e===null||e===!1,Nee={getAdapter:e=>{e=Ee.isArray(e)?e:[e];let{length:t}=e,r,n,i={};for(let o=0;o<t;o++){let a;if(r=e[o],n=r,!zFe(r)&&(n=rk[(a=String(r)).toLowerCase()],n===void 0))throw new pr("Unknown adapter '".concat(a,"'"));if(n)break;i[a||"#"+o]=n}if(!n){let o=Object.entries(i).map(a=>{let[s,l]=a;return"adapter ".concat(s," ")+(l===!1?"is not supported by the environment":"is not available in the build")});throw new pr("There is no suitable adapter to dispatch the request "+(t?o.length>1?`since :
`+o.map(SB).join(`
`):" "+SB(o[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n},adapters:rk};function uI(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new z0(null,e)}function TB(e){return uI(e),e.headers=Tc.from(e.headers),e.data=cI.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Nee.getAdapter(e.adapter||_L.adapter)(e).then(function(t){return uI(e),t.data=cI.call(e,e.transformResponse,t),t.headers=Tc.from(t.headers),t},function(t){return Ree(t)||(uI(e),t&&t.response&&(t.response.data=cI.call(e,e.transformResponse,t.response),t.response.headers=Tc.from(t.response.headers))),fe.reject(t)})}function CB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var xB=e=>e instanceof Tc?function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?CB(Object(n),!0).forEach(function(i){R(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CB(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}({},e):e;function am(e,t){t=t||{};let r={};function n(c,u,h){return Ee.isPlainObject(c)&&Ee.isPlainObject(u)?Ee.merge.call({caseless:h},c,u):Ee.isPlainObject(u)?Ee.merge({},u):Ee.isArray(u)?u.slice():u}function i(c,u,h){return Ee.isUndefined(u)?Ee.isUndefined(c)?void 0:n(void 0,c,h):n(c,u,h)}function o(c,u){if(!Ee.isUndefined(u))return n(void 0,u)}function a(c,u){return Ee.isUndefined(u)?Ee.isUndefined(c)?void 0:n(void 0,c):n(void 0,u)}function s(c,u,h){return h in t?n(c,u):h in e?n(void 0,c):void 0}let l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(c,u)=>i(xB(c),xB(u),!0)};return Ee.forEach(Object.keys(Object.assign({},e,t)),function(c){let u=l[c]||i,h=u(e[c],t[c],c);Ee.isUndefined(h)&&u!==s||(r[c]=h)}),r}var Aee="1.6.8",wL={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{wL[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var RB={};wL.transitional=function(e,t,r){function n(i,o){return"[Axios v"+Aee+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new pr(n(o," has been removed"+(t?" in "+t:"")),pr.ERR_DEPRECATED);return t&&!RB[o]&&(RB[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,o,a)}};var nk={assertOptions:function(e,t,r){if(typeof e!="object")throw new pr("options must be an object",pr.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),i=n.length;for(;i-- >0;){let o=n[i],a=t[o];if(a){let s=e[o],l=s===void 0||a(s,o,e);if(l!==!0)throw new pr("option "+o+" must be "+l,pr.ERR_BAD_OPTION_VALUE)}else if(r!==!0)throw new pr("Unknown option "+o,pr.ERR_BAD_OPTION)}},validators:wL},Jc=nk.validators,g_=class{constructor(e){this.defaults=e,this.interceptors={request:new vV,response:new vV}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let n;Error.captureStackTrace?Error.captureStackTrace(n={}):n=new Error;let i=n.stack?n.stack.replace(/^.+\n/,""):"";r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}throw r}}_request(e,t){typeof e=="string"?(t=t||{}).url=e:t=e||{},t=am(this.defaults,t);let{transitional:r,paramsSerializer:n,headers:i}=t;r!==void 0&&nk.assertOptions(r,{silentJSONParsing:Jc.transitional(Jc.boolean),forcedJSONParsing:Jc.transitional(Jc.boolean),clarifyTimeoutError:Jc.transitional(Jc.boolean)},!1),n!=null&&(Ee.isFunction(n)?t.paramsSerializer={serialize:n}:nk.assertOptions(n,{encode:Jc.function,serialize:Jc.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&Ee.merge(i.common,i[t.method]);i&&Ee.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),t.headers=Tc.concat(o,i);let a=[],s=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(t)===!1||(s=s&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});let l=[],c;this.interceptors.response.forEach(function(p){l.push(p.fulfilled,p.rejected)});let u,h=0;if(!s){let p=[TB.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,l),u=p.length,c=fe.resolve(t);h<u;)c=c.then(p[h++],p[h++]);return c}u=a.length;let f=t;for(h=0;h<u;){let p=a[h++],m=a[h++];try{f=p(f)}catch(g){m.call(this,g);break}}try{c=TB.call(this,f)}catch(p){return fe.reject(p)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return DZ(Iee((e=am(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};Ee.forEach(["delete","get","head","options"],function(e){g_.prototype[e]=function(t,r){return this.request(am(r||{},{method:e,url:t,data:(r||{}).data}))}}),Ee.forEach(["post","put","patch"],function(e){function t(r){return function(n,i,o){return this.request(am(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}g_.prototype[e]=t(),g_.prototype[e+"Form"]=t(!0)});var y_=g_,GFe=class Oee{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new fe(function(i){r=i});let n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o,a=new fe(s=>{n.subscribe(s),o=s}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},t(function(i,o,a){n.reason||(n.reason=new z0(i,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new Oee(function(r){t=r}),cancel:t}}},WFe=GFe,ik={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ik).forEach(e=>{let[t,r]=e;ik[r]=t});var KFe=ik,di=function e(t){let r=new y_(t),n=OZ(y_.prototype.request,r);return Ee.extend(n,y_.prototype,r,{allOwnKeys:!0}),Ee.extend(n,r,null,{allOwnKeys:!0}),n.create=function(i){return e(am(t,i))},n}(_L);di.Axios=y_,di.CanceledError=z0,di.CancelToken=WFe,di.isCancel=Ree,di.VERSION=Aee,di.toFormData=Zw,di.AxiosError=pr,di.Cancel=di.CanceledError,di.all=function(e){return fe.all(e)},di.spread=function(e){return function(t){return e.apply(null,t)}},di.isAxiosError=function(e){return Ee.isObject(e)&&e.isAxiosError===!0},di.mergeConfig=am,di.AxiosHeaders=Tc,di.formToJSON=e=>xee(Ee.isHTMLForm(e)?new FormData(e):e),di.getAdapter=Nee.getAdapter,di.HttpStatusCode=KFe,di.default=di;var to=di,qFe=()=>{};function Pv(){let e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:qFe};return e.promise=new fe((t,r)=>{e.resolve=n=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=n=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,r(n))}}),e}var rE=new Map,nE=new Map,cl=new Map,yn=function(e){return e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot",e}({}),Mt=function(e){return e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger",e}({}),kee=new w5e,Hs=kee.getResult(),dI=null;function St(e){if(!dI){Hs=kee.getResult();let t=function(s){if(s.engine.name==="Blink"&&s.browser.name!=="WeChat")return Mt.CHROME;switch(s.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Mt.CHROME;case"Safari":case"Mobile Safari":return Mt.SAFARI;case"Edge":return Mt.EDGE;case"Firefox":return Mt.FIREFOX;case"QQ":case"QQBrowser":return Mt.QQ;case"Opera":return Mt.OPERA;case"WeChat":return Mt.WECHAT;default:return s.browser.name||""}}(Hs),r=IB(Hs),n=function(s){return s.os.name==="Windows"?s.os.version?s.os.name+" "+s.os.version:s.os.name:s.os.name||""}(Hs),i=Hs.os.version,o=IB(Hs,!1),a=Hs.device.type;if(!(t&&r&&n&&i))return{name:t,version:r,os:n,osVersion:i,browserVersion:o,deviceType:a};dI={name:t,version:r,os:n,osVersion:i,browserVersion:o,deviceType:a}}return dI}function IB(e){let t,r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return t=e.engine.name==="Blink"?e.engine.version||"":e.browser.version||"",r?t.split(".")[0]:t}function sC(){return St().os}function NB(){let e=St();return"".concat(e.os," ").concat(e.osVersion)}function oS(){let e=St();return!!(Hs.engine.name==="WebKit"&&e.os===yn.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==Mt.SAFARI||Vi()&&e.name!==Mt.SAFARI)}function Bu(){return St().name===Mt.CHROME}function qn(){return St().name===Mt.SAFARI}function Pee(){return St().name===Mt.EDGE}function Ir(){return St().name===Mt.FIREFOX}function Vi(){return St().os===yn.IOS}function ok(e){let t=St();return!(t.name!==Mt.CHROME||!t.osVersion)&&Number(t.version)>=e}function Dee(e){let t=St();return!(t.name!==Mt.CHROME||!t.osVersion)&&Number(t.version)<e}function AB(e){let t=St();return!(t.name!==Mt.EDGE||!t.osVersion)&&Number(t.version)>=e}function Lee(e){let t=St();return!(t.name!==Mt.SAFARI||!t.osVersion)&&Number(t.version)>=e}function Mee(e,t,r){let n=St();if(n.os!==yn.IOS||!n.osVersion)return!1;let i=n.osVersion.split(".");return t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e}function jee(e,t,r){let n=St();if(n.name!==Mt.SAFARI||!n.osVersion||!n.browserVersion)return!1;let i=n.browserVersion.split(".");return t&&Number(i[0])===e&&Number(i[1])<t||Number(i[0])<e}function OB(e){let t=St();return!(t.name!==Mt.OPERA||!t.osVersion)&&Number(t.version)>=e}function kB(){let e=St();if(e.os!==yn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])<14||Number(t[0])===14&&Number(t[1])<=6}function sm(){let e=St();if(e.os!==yn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])===15}function ak(){let e=St();if(e.os!==yn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])===16}function PB(){let e=St();if(e.os!==yn.IOS||!e.osVersion)return!1;let t=e.osVersion.split(".");return Number(t[0])===15&&Number(t[1])>=1}function ys(){return qn()&&navigator.maxTouchPoints>0}function Uee(){return St().name===Mt.WECHAT}function Fee(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function SL(){let e=sC();return function(){let{deviceType:t}=St();return t==="mobile"||t==="tablet"}()||e===yn.ANDROID||e===yn.IOS||e===yn.HARMONY_OS}function ed(){let e=St();return e.name!==Mt.EDGE&&e.name!==Mt.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function lC(){return sC()===yn.ANDROID}function Dv(){let e=St();return lC()&&(e.name===Mt.CHROME||e.name===Mt.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function lr(e,t,r){return(t=function(n){var i=function(o,a){if(typeof o!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var l=s.call(o,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(n);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DB(Object(r),!0).forEach(function(n){lr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var O=function(e){return e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",e}({}),J=class extends Error{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;super(t),lr(this,"code",void 0),lr(this,"message",void 0),lr(this,"data",void 0),lr(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=r}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return e==="error"&&(t||console).error(this.toString()),e==="warning"&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function mc(e,t){if(typeof e!="boolean")throw new J(O.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function sn(e,t,r){if(!ge(r).call(r,e))throw new J(O.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(r)))}function Wt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4;if(e<r||e>n||(!(arguments.length>4&&arguments[4]!==void 0)||arguments[4])&&!function(i){return typeof i=="number"&&i%1==0}(e))throw new J(O.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(r,", ").concat(n,"]. integer only"))}function hI(e,t){if(typeof e!="number"){if(!(e.min||e.max||e.ideal||e.exact))throw new J(O.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));e.min!==void 0&&Wt(e.min,"".concat(t,".min"),0,1/0),e.max!==void 0&&Wt(e.max,"".concat(t,".max"),1,1/0),e.exact!==void 0&&Wt(e.exact,"".concat(t,".exact"),1,1/0),e.ideal!==void 0&&Wt(e.ideal,"".concat(t,".ideal"),1,1/0)}else Wt(e,t,1,1/0)}function kn(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(e==null)throw new J(O.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!Vee(e,r,n,i))throw new J(O.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(r,",").concat(n,"].").concat(i?" ASCII characters only.":""))}function cc(e,t){if(!Array.isArray(e))throw new J(O.INVALID_PARAMS,"".concat(t," should be an array"))}function gr(e){return e==null}function Vee(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof e=="string"&&e.length<=r&&e.length>=t&&(!n||function(i){if(typeof i!="string")return!1;for(let o=0;o<i.length;o+=1){let a=i.charCodeAt(o);if(a<0||a>255)return!1}return!0}(e))}var Zg=function(e){return e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE",e}(Zg||{}),sk=function(e){return e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",e}(sk||{}),Bee=new class{constructor(){lr(this,"_clientSize",null),lr(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),lr(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),lr(this,"getStyle",e=>window.getComputedStyle(e,null)),lr(this,"checkCssVisibleProperty",e=>{var t;let r=!0,n=this.getStyle(e),{display:i,visibility:o,opacity:a,filter:s}=n;return(i==="none"||ge(t=["hidden","collapse"]).call(t,o)||Number(a)<.1)&&(r=!1),!!r&&(s&&s.split(" ").filter(l=>{var c;let u=l.split("(")[0];return ge(c=["brightness","blur","opacity"]).call(c,u)}).map(l=>{let[c,u]=l.split(/\(|\)/);return[c,Number(u.match(/^[0-9\.]+/))]}).forEach(l=>{let[c,u]=l;switch(c){case"brightness":(u<.1||u>3)&&(r=!1);break;case"blur":u>3&&(r=!1);break;case"opacity":u<.1&&(r=!1)}}),r)}),lr(this,"checkPropertyUpToAllParentNodes",(e,t)=>{let r=!0,n=!0,i=a=>t(a),o=e;for(;o&&n;)i(o)||(r=!1,n=!1),o=o.parentElement,o||(n=!1);return r}),lr(this,"checkActualCssVisibleIncludeInherit",e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty)),lr(this,"getSizeAboutClient",e=>{let{width:t,height:r,left:n,right:i,top:o,bottom:a}=e.getBoundingClientRect(),s=this.getClientWidth(),l=this.getClientHeight();return{width:t,height:r,left:n,right:i,top:o,bottom:a,clientWidth:s,clientHeight:l,clientMin:Math.min(s,l)}}),lr(this,"checkActualSize",()=>{let{width:e,height:t,clientMin:r}=this._clientSize;return this.checkSizeIsVisible(e,t,r)}),lr(this,"elementFromPoint",(e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null),lr(this,"checkCoverForAPoint",(e,t,r)=>{let n=this.elementFromPoint(e,t);return n!==null&&n!==r}),lr(this,"getPointPositionList",()=>{let{width:e,height:t,left:r,top:n}=this._clientSize,i=e/6,o=t/6,a=[],s=10**6;for(let l=0;l<5;l++)for(let c=0;c<5;c++){let u=(r*s+(l===0?.1:l===4?(i*l*s-1e5)/s:i*l)*s)/s,h=(n*s+(c===0?.1:c===4?(o*c*s-1e5)/s:o*c)*s)/s;a.push({x:u,y:h})}return[...a]}),lr(this,"checkElementCover",e=>this.getPointPositionList().map(t=>this.checkCoverForAPoint(t.x,t.y,e)).filter(t=>!!t).length>6),lr(this,"checkSizeIsVisible",(e,t,r)=>(e>50||r/e<=10)&&(t>50||r/t<=10)),lr(this,"checkSizeOfPartInClient",()=>{let{left:e,right:t,top:r,bottom:n,clientHeight:i,clientWidth:o,clientMin:a}=this._clientSize,s,l,c,u;if(e<0)s=0;else{if(!(e<o))return!1;s=e}if(t<0)return!1;if(l=t<o?t:o,r<0)c=0;else{if(!(r<i))return!1;c=r}if(n<0)return!1;u=n<i?n:i;let h=l-s,f=u-c;return this.checkSizeIsVisible(h,f,a)}),lr(this,"returnHiddenResult",e=>(this._clientSize=null,{visible:!1,reason:e})),lr(this,"checkOneElementVisible",e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(Zg.COVERED);{let t=this.checkActualSize(),r=this.checkSizeOfPartInClient();return t&&!r?this.returnHiddenResult(Zg.POSITION):t?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(Zg.SIZE)}}return this.returnHiddenResult(Zg.STYLE)}return this.returnHiddenResult(sk.UNMOUNTED)}return this.returnHiddenResult(sk.INVALID_HTML_ELEMENT)}),lr(this,"checkElementIsMountedOnDom",e=>this.checkPropertyUpToAllParentNodes(e,t=>t.nodeName.toUpperCase()!=="HTML"?t.parentElement!==null:!!document.documentElement))}};function TL(e){return new TextEncoder().encode(e)}var LB=function(e,t){let r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r},lk=async e=>function(t,r){let n="";return new Uint8Array(t).forEach(i=>{n+=i.toString(r).padStart(2,"0")}),n}(await crypto.subtle.digest("SHA-256",TL(e)),16),_r=class{constructor(){lr(this,"_events",{}),lr(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map(t=>t.listener):[]}on(e,t){this._events[e]||(this._events[e]=[]);let r=this._events[e];this._indexOfListener(r,t)===-1&&r.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);let r=this._events[e];this._indexOfListener(r,t)===-1&&r.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;let r=this._events[e],n=this._indexOfListener(r,t);n!==-1&&r.splice(n,1),this._events[e].length===0&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);let t=this._events[e].map(o=>o);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(let o=0;o<t.length;o+=1){let a=t[o];a.once&&this.off(e,a.listener),a.listener.apply(this,n||[])}}safeEmit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];[...this._events[e]||[]].forEach(i=>{i.once&&this.off(e,i.listener);try{i.listener.apply(this,r)}catch(o){console.error("safeEmit event:".concat(e," error ").concat(o==null?void 0:o.toString()))}})}_indexOfListener(e,t){let r=e.length;for(;r--;)if(e[r].listener===t)return r;return-1}},kg=null;function $ee(){if(kg)return kg;if(window.electron)return kg=window.electron;if(!window.require)return null;try{return kg=window.require("electron"),kg}catch{return null}}var en=function(e){return e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.PRELOAD="PRELOAD",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload",e}({}),xr=function(e){return e.TRACER="tracer",e}({});function MB(e){return Wt(e.timeout,"config.timeout",0,1e5),Wt(e.timeoutFactor,"config.timeoutFactor",0,100,!1),Wt(e.maxRetryCount,"config.maxRetryConfig",0,1/0),Wt(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}var YFe=function(e){return e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",e}({}),Bt=function(e){return e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.FALLBACK="FALLBACK",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e}({});function cC(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach(t=>{if(!t.urls)throw Error()})}catch{return!1}return!0}function Hee(e){return kn(e.turnServerURL,"turnServerURL"),kn(e.username,"username"),kn(e.password,"password"),e.udpport&&Wt(e.udpport,"udpport",1,99999,!0),e.forceturn&&mc(e.forceturn,"forceturn"),e.security&&mc(e.security,"security"),e.tcpport&&Wt(e.tcpport,"tcpport",1,99999,!0),!0}function jB(e){return e.level!==void 0&&sn(e.level,"level",[1,2,3]),e.delay!==void 0&&Wt(e.delay,"delay",0,3e3,!0),!0}var gt=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",e}({}),Kn=function(e){return e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK",e}({}),Ro=function(e){return e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({}),cp=function(e){return e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({});function Yn(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return e.getListeners(t).length===0?fe.reject(new J(O.UNEXPECTED_ERROR,"can not emit promise")):new fe((o,a)=>{e.emit(t,...n,o,a)})}function Jt(e,t){if(e.getListeners(t).length===0)return fe.resolve();for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return Yn(e,t,...n)}function xa(e,t){if(e.getListeners(t).length===0)return null;for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return Lv(e,t,...n)}function Lv(e,t){let r=null,n=null;for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if(e.emit(t,...o,s=>{r=s},s=>{n=s}),n!==null)throw n;if(r===null)throw new J(O.UNEXPECTED_ERROR,"handler is not sync");return r}var Hr=new class extends _r{set networkState(e){this.emit(cp.NETWORK_STATE_CHANGE,e,this._networkState),e===Ro.ONLINE?this.emit(cp.ONLINE):e===Ro.OFFLINE&&(this.onlineWaiter=new fe(t=>{this.once(cp.ONLINE,()=>{this.onlineWaiter=void 0,t(Ro.ONLINE)})}),this.emit(cp.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===Ro.ONLINE}constructor(){super(),lr(this,"_moduleName","network-indicator"),lr(this,"_networkState",Ro.ONLINE),lr(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=Ro.ONLINE}),window.addEventListener("offline",()=>{this.networkState=Ro.OFFLINE})}};function aS(e,t){let r=e.indexOf(t);r!==-1&&e.splice(r,1)}function up(e){let t=[];return e.forEach(r=>{t.indexOf(r)===-1&&t.push(r)}),t}function uC(e){fe!==void 0?fe.resolve().then(e):setTimeout(e,0)}function Br(e){return JSON.parse(JSON.stringify(e))}function Yd(e){try{return Br(e)}catch{return e}}var UB={};function td(e,t){UB[t]||(UB[t]=!0,e())}function Xd(e){let t=window.atob(e),r=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n+=1)r[n]=t.charCodeAt(n);return r}function $u(e){let t="";for(let r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return window.btoa(t)}function zee(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,r=new TextEncoder().encode(e);if(r.length>t)r=r.slice(0,t);else if(r.length<t){let n=new Uint8Array(t);n.set(r),r=n}return r}function FB(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=Zs(t).call(t,(a,s)=>a+s.length,0),i=new Uint8Array(new ArrayBuffer(n)),o=0;return t.forEach(a=>{i.set(a,o),o+=a.length}),i}function Il(e){return window.TextEncoder?new TextEncoder().encode(e).length:e.length}function Gee(e){let t=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&e.realFormData&&(e=e.realFormData),e.forEach(r=>{t+=typeof r=="string"?Il(r):r.size}),t+138}function XFe(e){let t=new J(O.TIMEOUT,"timeout");return new fe((r,n)=>{window.setTimeout(()=>n(t),e)})}function jn(e){return new fe(t=>{window.setTimeout(t,e)})}function er(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0,r=Math.random().toString(16).substr(2,e).toLowerCase();return r.length===e?"".concat(t).concat(r):"".concat(t).concat(r)+er(e-r.length,"")}function dp(){return er(32,"").toUpperCase()}var dC=()=>{},VB=new class{constructor(){lr(this,"fnMap",new Map)}throttleByKey(e,t,r,n){for(var i=arguments.length,o=new Array(i>4?i-4:0),a=4;a<i;a++)o[a-4]=arguments[a];if(this.fnMap.has(t)){let s=this.fnMap.get(t);if(s.threshold!==r){s.fn(...s.args),clearTimeout(s.timer);let l=window.setTimeout(()=>{let c=this.fnMap.get(t);c&&c.fn(...c.args),this.fnMap.delete(t)},r);this.fnMap.set(t,{fn:e,threshold:r,timer:l,args:o,skipFn:n})}else s.skipFn&&s.skipFn(...s.args),this.fnMap.set(t,Se(Se({},s),{},{fn:e,args:o,skipFn:n}))}else{let s=window.setTimeout(()=>{let l=this.fnMap.get(t);l&&l.fn(...l.args),this.fnMap.delete(t)},r);this.fnMap.set(t,{fn:e,threshold:r,timer:s,args:o,skipFn:n})}}},BB=VB.throttleByKey.bind(VB);function $B(e){return typeof e=="object"&&e!==null&&!(e instanceof RegExp)}function ck(e,t){if(!$B(e)||!$B(t)||Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){let r=[...e];for(let n=0;n<t.length;n++)r[n]=ck(e[n],t[n]);return r}{let r=Se({},e);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)?r[n]=ck(e[n],t[n]):r[n]=t[n]);return r}}function HB(e,t){let r=[0];if(r=new Array(t).fill(0),e===0)return r;let n=0;for(;e>0&&(r[n]=255&e,e>>=8,n++,n!==t););return r}function fI(e){return typeof e=="number"?e:e.exact||e.ideal||e.max||e.min||0}function Wee(e){let t="0123456789abcdef";function r(_){let S,I="";for(S=0;S<=3;S++)I+=t.charAt(_>>8*S+4&15)+t.charAt(_>>8*S&15);return I}function n(_,S){let I=(65535&_)+(65535&S);return(_>>16)+(S>>16)+(I>>16)<<16|65535&I}function i(_,S,I,A,D,M){return n(function(H,V){return H<<V|H>>>32-V}(n(n(S,_),n(A,M)),D),I)}function o(_,S,I,A,D,M,H){return i(S&I|~S&A,_,S,D,M,H)}function a(_,S,I,A,D,M,H){return i(S&A|I&~A,_,S,D,M,H)}function s(_,S,I,A,D,M,H){return i(S^I^A,_,S,D,M,H)}function l(_,S,I,A,D,M,H){return i(I^(S|~A),_,S,D,M,H)}let c=function(_){let S,I=1+(_.length+8>>6),A=new Array(16*I);for(S=0;S<16*I;S++)A[S]=0;for(S=0;S<_.length;S++)A[S>>2]|=_.charCodeAt(S)<<S%4*8;return A[S>>2]|=128<<S%4*8,A[16*I-2]=8*_.length,A}(e),u,h,f,p,m,g=1732584193,y=-271733879,v=-1732584194,b=271733878;for(u=0;u<c.length;u+=16)h=g,f=y,p=v,m=b,g=o(g,y,v,b,c[u+0],7,-680876936),b=o(b,g,y,v,c[u+1],12,-389564586),v=o(v,b,g,y,c[u+2],17,606105819),y=o(y,v,b,g,c[u+3],22,-1044525330),g=o(g,y,v,b,c[u+4],7,-176418897),b=o(b,g,y,v,c[u+5],12,1200080426),v=o(v,b,g,y,c[u+6],17,-1473231341),y=o(y,v,b,g,c[u+7],22,-45705983),g=o(g,y,v,b,c[u+8],7,1770035416),b=o(b,g,y,v,c[u+9],12,-1958414417),v=o(v,b,g,y,c[u+10],17,-42063),y=o(y,v,b,g,c[u+11],22,-1990404162),g=o(g,y,v,b,c[u+12],7,1804603682),b=o(b,g,y,v,c[u+13],12,-40341101),v=o(v,b,g,y,c[u+14],17,-1502002290),y=o(y,v,b,g,c[u+15],22,1236535329),g=a(g,y,v,b,c[u+1],5,-165796510),b=a(b,g,y,v,c[u+6],9,-1069501632),v=a(v,b,g,y,c[u+11],14,643717713),y=a(y,v,b,g,c[u+0],20,-373897302),g=a(g,y,v,b,c[u+5],5,-701558691),b=a(b,g,y,v,c[u+10],9,38016083),v=a(v,b,g,y,c[u+15],14,-660478335),y=a(y,v,b,g,c[u+4],20,-405537848),g=a(g,y,v,b,c[u+9],5,568446438),b=a(b,g,y,v,c[u+14],9,-1019803690),v=a(v,b,g,y,c[u+3],14,-187363961),y=a(y,v,b,g,c[u+8],20,1163531501),g=a(g,y,v,b,c[u+13],5,-1444681467),b=a(b,g,y,v,c[u+2],9,-51403784),v=a(v,b,g,y,c[u+7],14,1735328473),y=a(y,v,b,g,c[u+12],20,-1926607734),g=s(g,y,v,b,c[u+5],4,-378558),b=s(b,g,y,v,c[u+8],11,-2022574463),v=s(v,b,g,y,c[u+11],16,1839030562),y=s(y,v,b,g,c[u+14],23,-35309556),g=s(g,y,v,b,c[u+1],4,-1530992060),b=s(b,g,y,v,c[u+4],11,1272893353),v=s(v,b,g,y,c[u+7],16,-155497632),y=s(y,v,b,g,c[u+10],23,-1094730640),g=s(g,y,v,b,c[u+13],4,681279174),b=s(b,g,y,v,c[u+0],11,-358537222),v=s(v,b,g,y,c[u+3],16,-722521979),y=s(y,v,b,g,c[u+6],23,76029189),g=s(g,y,v,b,c[u+9],4,-640364487),b=s(b,g,y,v,c[u+12],11,-421815835),v=s(v,b,g,y,c[u+15],16,530742520),y=s(y,v,b,g,c[u+2],23,-995338651),g=l(g,y,v,b,c[u+0],6,-198630844),b=l(b,g,y,v,c[u+7],10,1126891415),v=l(v,b,g,y,c[u+14],15,-1416354905),y=l(y,v,b,g,c[u+5],21,-57434055),g=l(g,y,v,b,c[u+12],6,1700485571),b=l(b,g,y,v,c[u+3],10,-1894986606),v=l(v,b,g,y,c[u+10],15,-1051523),y=l(y,v,b,g,c[u+1],21,-2054922799),g=l(g,y,v,b,c[u+8],6,1873313359),b=l(b,g,y,v,c[u+15],10,-30611744),v=l(v,b,g,y,c[u+6],15,-1560198380),y=l(y,v,b,g,c[u+13],21,1309151649),g=l(g,y,v,b,c[u+4],6,-145523070),b=l(b,g,y,v,c[u+11],10,-1120210379),v=l(v,b,g,y,c[u+2],15,718787259),y=l(y,v,b,g,c[u+9],21,-343485551),g=n(g,h),y=n(y,f),v=n(v,p),b=n(b,m);return r(g)+r(y)+r(v)+r(b)}var JFe=1,iE=console,ai=class{static setLogger(e){iE=e}constructor(e){lr(this,"lockingPromise",fe.resolve()),lr(this,"locks",0),lr(this,"name",""),lr(this,"lockId",void 0),this.lockId=JFe++,e&&(this.name=e),iE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,iE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof e=="string"?e:""));let r=new fe(i=>{t=()=>{this.locks-=1,iE.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof e=="string"?e:"")),i()}}),n=this.lockingPromise.then(()=>t);return this.lockingPromise=this.lockingPromise.then(()=>r),n}};function lm(e,t){return function(r,n,i){let o=i.value;if(typeof o!="function")throw new Error("Cannot use mutex on object property.");return i.value=async function(){let a=this[t];if(!a)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));let s=await a.lock("From ".concat(e,".").concat(n));try{for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return await o.apply(this,c)}finally{s()}},i}}var Yr={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function CL(e,t){let r=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,r)}function il(e,t,r,n){let i=Object.assign({},Yr,n),o=i.timeout,a=async()=>{await function(c){return new fe(u=>{window.setTimeout(u,c)})}(o),o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o)},s=!1,l=new fe(async(c,u)=>{t=t||(()=>!1),r=r||(()=>!0);for(let h=0;h<i.maxRetryCount;h+=1){if(s)return u(new J(O.OPERATION_ABORTED));try{let f=await e();if(!t(f,h)||h+1===i.maxRetryCount)return c(f);await a()}catch(f){if(!r(f,h)||h+1===i.maxRetryCount)return u(f);await a()}}});return l.cancel=()=>s=!0,l}var Kee=class{constructor(e){lr(this,"input",[]),lr(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return this.input.length===0?0:Zs(e=this.input).call(e,(t,r)=>t+r)/this.input.length}},oE,aE=0,pI=0;function uk(e,t,r,n){return new fe((i,o)=>{t.responseType=t.responseType||"json",t.data&&!r?(t.data=JSON.stringify(t.data),aE+=Il(t.data)):r&&(t.data.size?aE+=t.data.size:t.data instanceof FormData?aE+=Gee(t.data):aE+=Il(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,to.request(t).then(a=>{typeof a.data=="string"?pI+=Il(a.data):a.data instanceof ArrayBuffer||a.data instanceof Uint8Array?pI+=a.data.byteLength:pI+=Il(JSON.stringify(a.data)),i(a.data)}).catch(a=>{to.isCancel(a)?o(new J(O.OPERATION_ABORTED,"cancel token canceled")):a.code==="ECONNABORTED"?o(new J(O.NETWORK_TIMEOUT,a.message)):a.response?o(new J(O.NETWORK_RESPONSE_ERROR,a.response.status)):o(new J(O.NETWORK_ERROR,a.message))})})}async function QFe(e,t){let r=new Blob([t.data],{type:"buffer"});return await uk(e,Se(Se({},t),{},{data:r,headers:{"Content-Type":"application/octet-stream"}}),!0)}var zB=()=>window.isSecureContext!==void 0,Ra=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;let t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){let n=t[1],i=t[2];return"".concat(n,".").concat(i)}let r=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(r&&r[1]&&r[2]){let n=r[1],i=r[2];return"".concat(n,".").concat(100*(Number(i)+1))}return"4.0.0.999"}("4.22.0"),xL=function(){try{return JSON.parse("true")===!0}catch{return!0}}(),Dd=function(e){return e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn",e}({}),RL={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},IL="v4.22.0-0-g8569241d-dirty(8/15/2024, 7:04:06 PM)",Mr=Se(Se({PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:RL,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,CUSTOM_ADAPTATION_DEFAULT_MODE:"",ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,ENABLE_PRELOAD:!0},{ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,USE_PUB_RTX:!0,USE_SUB_RTX:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_DATASTREAM_2:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,USE_XR:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,ENABLE_PREALLOC_PC:!1,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC:!1,ENABLE_SVC_DEFAULT_CODECS:["H264","VP8","VP9","AV1"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:2,ENABLE_PRE_SUB:!1,ENABLE_AUT_FEEDBACK:!1}),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1});function Gt(e,t,r){var n,i,o;ge(n=Object.keys(Mr)).call(n,e)&&(!r&&ge(i=Object.keys(Cu)).call(i,e)||(Mr[e]=t,e==="ENABLE_VIDEO_SEI"&&t===!0&&(Mr.ENABLE_ENCODED_TRANSFORM=!0),e==="USE_NEW_NETWORK_CONFIG"&&t&&(o=!!t,Mr.USE_NEW_NETWORK_CONFIG=o,o&&(Mr.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],Mr.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],Mr.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],Mr.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],Mr.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",Mr.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",Mr.GATEWAY_DOMAINS=["edge.sd-rtn.com"])),e==="ENABLE_PRE_SUB"&&t&&(Mr.ENABLE_INSTANT_VIDEO=!0,Mr.ENABLE_PREALLOC_PC=!0),e==="ENABLE_SVC"&&t&&(Mr.ENABLE_AUT_CC=!0)))}function L(e){return Mr[e]}var Cu={},ft=function(e){return e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",e}(ft||{}),ZFe=class{constructor(e,t,r,n){lr(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:r,clientId:n,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useP2P:!1,p2pTransport:Dd.Default}}dispatch(e){this.state=function(t,r){switch(r.type){case ft.SET_SESSION_ID:return Se(Se({},t),{},{sessionId:r.sessionId});case ft.SET_P2P_ID:return Se(Se({},t),{},{p2pId:r.p2pId});case ft.SET_UID:return Se(Se({},t),{},{uid:r.uid});case ft.SET_INT_UID:return Se(Se({},t),{},{intUid:r.intUid});case ft.SET_PUB_ID:return Se(Se({},t),{},{pubId:r.pubId});case ft.KEY_METRIC_CLIENT_CREATED:return Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{clientCreated:r.metric})});case ft.KEY_METRIC_JOIN_START:return Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{joinStart:r.metric})});case ft.AVOID_JOIN_START:return Se(Se({},t),{},{avoidJoinStart:r.avoidJoinStart});case ft.KEY_METRIC_JOIN_END:return Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{joinEnd:r.metric})});case ft.KEY_METRIC_REQUEST_AP_START:return Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{requestAPStart:r.metric})});case ft.KEY_METRIC_REQUEST_AP_END:return Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{requestAPEnd:r.metric})});case ft.KEY_METRIC_JOIN_GATEWAY_START:return Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{joinGatewayStart:r.metric})});case ft.KEY_METRIC_JOIN_GATEWAY_END:return Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{joinGatewayEnd:r.metric})});case ft.KEY_METRIC_PEER_CONNECTION_START:return Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{peerConnectionStart:r.metric})});case ft.KEY_METRIC_PEER_CONNECTION_END:return Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{peerConnectionEnd:r.metric})});case ft.KEY_METRIC_DESCRIPTION_START:return Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{descriptionStart:r.metric})});case ft.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{signalChannelOpen:r.metric})});case ft.KEY_METRIC_ICE_CONNECTION_END:return Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{iceConnectionEnd:r.metric})});case ft.KEY_METRIC_PUBLISH:{let n=t.keyMetrics.publish,i=n.findIndex(o=>o.trackId===r.metric.trackId);return i!==-1?(n[i]=Se(Se({},n[i]),r.metric),Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{publish:[...n]})})):Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{publish:[...t.keyMetrics.publish,r.metric]})})}case ft.KEY_METRIC_SUBSCRIBE:{let n=t.keyMetrics.subscribe,i=n.findIndex(o=>o.userId===r.metric.userId&&o.type===r.metric.type);return i!==-1?(n[i]=Se(Se({},n[i]),r.metric),Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{subscribe:[...n]})})):Se(Se({},t),{},{keyMetrics:Se(Se({},t.keyMetrics),{},{subscribe:[...t.keyMetrics.subscribe,r.metric]})})}case ft.SET_CLOUD_PROXY_SERVER_MODE:return t.cloudProxyServerMode=r.mode,t;case ft.RECORD_JOIN_CHANNEL_SERVICE:return typeof r.index!="number"?t.joinChannelServiceRecords=[...t.joinChannelServiceRecords,r.record]:(t.joinChannelServiceRecords[r.index]=Se(Se({},t.joinChannelServiceRecords[r.index]),r.record),t.joinChannelServiceRecords=[...t.joinChannelServiceRecords]),t;case ft.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return t.joinChannelServiceRecords=[],t;case ft.RESET_KEY_METRICS:return t.keyMetrics={publish:[],subscribe:[]},t;case ft.SET_USE_P2P:return Se(Se({},t),{},{useP2P:r.val});case ft.SET_TRANSPORT_TYPE:return Se(Se({},t),{},{p2pTransport:r.val});default:return t}}(this.state,e)}set sessionId(e){this.dispatch({type:ft.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:ft.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:ft.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:ft.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:ft.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:ft.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:ft.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(e){this.dispatch({type:ft.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:ft.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:ft.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:ft.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:ft.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:ft.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:ft.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:ft.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:ft.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:ft.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:ft.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:ft.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:ft.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:ft.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,r,n){this.dispatch({type:ft.KEY_METRIC_PUBLISH,metric:Se(Se({trackId:e,type:t},r&&{publishStart:r}),n&&{publishEnd:n})})}subscribe(e,t,r,n,i,o,a){this.dispatch({type:ft.KEY_METRIC_SUBSCRIBE,metric:Se(Se(Se(Se(Se({userId:e,type:t},r&&{subscribeStart:r}),n&&{subscribeEnd:n}),i&&{firstFrame:i}),o&&{streamAdded:o}),a&&{firstDecoded:a})})}massSubscribe(e,t,r,n){e.forEach(i=>{this.dispatch({type:ft.KEY_METRIC_SUBSCRIBE,metric:Se(Se(Se({userId:i.userId,type:i.type},t&&{subscribeStart:t}),r&&{subscribeEnd:r}),n&&{firstFrame:n})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){e.service==="gateway"&&Array.isArray(e.urls)&&(e.urls=e.urls.map(r=>r.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof t!="number"?(this.dispatch({type:ft.RECORD_JOIN_CHANNEL_SERVICE,record:Se(Se({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:ft.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:ft.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:ft.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:ft.AVOID_JOIN_START,avoidJoinStart:e})}},hC=function(e){return e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1",e}({});(function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"})({});var GB=128,eVe=96,WB=1e3,Sf=10,tVe=0;function Lr(e,t,r){return(t=function(n){var i=function(o,a){if(typeof o!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var l=s.call(o,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(n);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KB(Object(r),!0).forEach(function(n){Lr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var qee=new class extends _r{constructor(){super(...arguments),Lr(this,"currentUploadLogID",0)}reportLogUploadError(e){let{errorRange:t}=e;t[t.length-1]&&t[t.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=t[t.length-1],this.emit("REPORT_LOG_UPLOAD",e))}},rVe=class{constructor(e){Lr(this,"logger",void 0),Lr(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}};function mI(){let e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function qB(){let e=new Date,t=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return t?(t==null?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}var ya={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},sE=Date.now(),Pg=e=>{for(let t in ya)if(Object.prototype.hasOwnProperty.call(ya,t)&&ya[t]===e)return t;return"DEFAULT"},w=new class{constructor(){Lr(this,"proxyServerURL",void 0),Lr(this,"logLevel",ya.DEBUG),Lr(this,"uploadState","collecting"),Lr(this,"uploadLogWaitingList",[]),Lr(this,"uploadLogUploadingList",[]),Lr(this,"uploadErrorCount",0),Lr(this,"currentLogID",0),Lr(this,"url",void 0),Lr(this,"extLog",(e,t)=>{this.appendLogToWaitingList(e,...t)})}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[ya.DEBUG].concat(t);this.log.apply(this,n)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[ya.INFO].concat(t);this.log.apply(this,n)}warning(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[ya.WARNING].concat(t);this.log.apply(this,n)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[ya.ERROR].concat(t);this.log.apply(this,n)}upload(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[ya.DEBUG].concat(t);this.uploadLog.apply(this,n)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){Gt("UPLOAD_LOG",!0)}disableLogUpload(){Gt("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new rVe(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(Date.now()-sE<100)return void setTimeout(()=>{this.log(...t)},Date.now()-sE);let n=Math.max(0,Math.min(4,t[0]));if(t[0]=mI()+" Agora-SDK [".concat(Pg(n),"]:"),this.appendLogToWaitingList(n,...t),n<this.logLevel)return;let i=mI()+" %cAgora-SDK [".concat(Pg(n),"]:"),o=[];if(!L("USE_NEW_LOG"))switch(n){case ya.DEBUG:o=[i,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,o);break;case ya.INFO:o=[i,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,o);break;case ya.WARNING:o=[i,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,o);break;case ya.ERROR:o=[i,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,o)}}uploadLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(Date.now()-sE<100)return void setTimeout(()=>{this.uploadLog(...t)},Date.now()-sE);let n=Math.max(0,Math.min(4,t[0]));t[0]=mI()+" Agora-SDK [".concat(Pg(n),"]:"),this.appendLogToWaitingList(n,...t)}appendLogToWaitingList(e){if(!L("UPLOAD_LOG"))return;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Array.isArray(r[0])?r[0][0]=qB()+" Agora-SDK [".concat(Pg(e),"]:"):r[0]=qB()+" Agora-SDK [".concat(Pg(e),"]:");let i="";r.forEach(o=>{typeof o=="object"&&(o=JSON.stringify(o)),i+="".concat(o," ")}),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){let e=this.uploadLogUploadingList,t={sdk_version:Ra,process_id:L("PROCESS_ID"),payload:JSON.stringify(e)};return il(async()=>{let r=await to.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(L("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(L("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if(r.data!=="OK"){let n=new Error("unexpected upload log response");throw n.response=r,n}},()=>(this.uploadLogUploadingList=[],!1),r=>{let n={status:-1,message:r.message,errorRange:e.map(i=>i.log_item_id)};return r.response?(n.status=r.response.status,n.data=r.response.data,n.headers=r.response.headers):r.request&&(n.status=r.request.status),qee.reportLogUploadError(n),!0},{timeout:L("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:L("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,L("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),L("UPLOAD_LOG_INTERVAL"))}).catch(e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),L("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),L("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}},YB;function nVe(e){return kn(e.reportId,"params.reportId",0,100,!1),kn(e.category,"params.category",0,100,!1),kn(e.event,"params.event",0,100,!1),kn(e.label,"params.label",0,100,!1),Wt(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(YB={}).FREE="free",YB.UPLOADING="uploading",function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}({});var iVe={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},On=function(e){return e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",e}({}),vr=function(e){return e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",e}({});(function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"})({});var oVe=function(e){return e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED",e}({}),NL=class Yee{constructor(){Lr(this,"baseInfoMap",new Map),Lr(this,"proxyServer",void 0),Lr(this,"eventUploadTimer",void 0),Lr(this,"setSessionIdTimer",void 0),Lr(this,"url",void 0),Lr(this,"backupUrl",void 0),Lr(this,"_appId",void 0),Lr(this,"keyEventUploadPendingItems",[]),Lr(this,"normalEventUploadPendingItems",[]),Lr(this,"apiInvokeUploadPendingItems",[]),Lr(this,"apiInvokeCount",0),Lr(this,"ltsList",[]),Lr(this,"lastSendNormalEventTime",Date.now()),Lr(this,"customReportCounterTimer",void 0),Lr(this,"customReportCount",0),Lr(this,"extApiInvoke",async t=>{for(let r of t){let n=it(it({},r),{},{sid:null,invokeId:++this.apiInvokeCount,tag:xr.TRACER});this.sendApiInvoke(n)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),L("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),L("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(t){return this.baseInfoMap.get(t)}adjustSessionStartTime(t){if(!this.baseInfoMap.has(t)&&!this.baseInfoMap.get(t))return void w.error("adjust session ".concat(t," start time, sid is not exist or info is undefined"));let r=this.baseInfoMap.get(t),n=Date.now(),i=r.startTime;r.startTime=n,w.debug("rewrite session ".concat(t," startTime: ").concat(n," , ").concat(n-i,"ms")),this.baseInfoMap.set(t,r)}setAppId(t){this._appId=t}reportApiInvoke(t,r,n){r.timeout=r.timeout||6e4,r.reportResult=r.reportResult===void 0||r.reportResult;let i=Date.now();this.apiInvokeCount+=1;let o=this.apiInvokeCount,a=()=>({tag:r.tag,invokeId:o,sid:t,name:r.name,apiInvokeTime:i,options:r.options,states:r.states||null}),s=!!L("SHOW_REPORT_INVOKER_LOG");s&&w.info("".concat(r.name," start"),r.options);let l=!1;jn(r.timeout).then(()=>{l||(this.sendApiInvoke(it(it({},a()),{},{error:O.API_INVOKE_TIMEOUT,success:!1})),w.debug("".concat(r.name," timeout")))});let c=new J(O.UNEXPECTED_ERROR,"".concat(r.name,": this api invoke is end"));return{onSuccess:u=>{let h=()=>{if(l)throw c;return l=!0,this.sendApiInvoke(it(it({},a()),{},{success:!0},r.reportResult&&{result:u})),s&&w.info("".concat(r.name," onSuccess")),u};return n?BB(h,r.name+"Success",n,()=>l=!0):h()},onError:u=>{let h=()=>{if(l)throw u;l=!0,this.sendApiInvoke(it(it({},a()),{},{success:!1,error:u})),s&&w.info("".concat(r.name," onFailure"),u.toString())};return n?BB(h,r.name+"Error",n,()=>l=!0):h()}}}sessionInit(t,r){if(this.baseInfoMap.has(t))return;let n=Date.now(),i=this.createBaseInfo(t,n);i.cname=r.cname;let o=Object.assign({},{willUploadConsoleLog:L("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:xL?"global":"oversea",areas:L("AREAS")&&L("AREAS").join(",")},r.extend),{stringUid:a,channelProfile:s,channelMode:l,isABTestSuccess:c,lsid:u,clientRole:h}=r,f=Date.now(),p=it(it({},i),{},{eventType:On.SESSION_INIT,appid:r.appid,browser:navigator.userAgent,buildFormat:r.buildFormat,build:IL,lts:f,elapse:f-n,extend:JSON.stringify(o),mode:r.mode,process:L("PROCESS_ID"),appType:L("APP_TYPE"),success:!0,version:Ra,stringUid:a,channelProfile:s,channelMode:l,isABTestSuccess:c,lsid:u,clientType:ge(m=window.navigator.userAgent).call(m,"AgoraWebView")?42:20,clientRole:h,serviceId:L("PROCESS_ID"),extensionID:L("PLUGIN_INFO").join(",")||""});var m;this.send({type:vr.SESSION,data:p},!0)}joinChooseServer(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{eventType:On.JOIN_CHOOSE_SERVER,lts:o,eventElapse:r.elapse||o-r.lts,chooseServerAddr:r.csAddr,errorCode:r.ec,elapse:o-n.startTime,success:r.succ,chooseServerAddrList:JSON.stringify(r.serverList),uid:r.uid?parseInt(r.uid):null,cid:r.cid?parseInt(r.cid):null,chooseServerIp:r.csIp||"",opid:r.opid,unilbsServerIds:r.unilbsServerIds,extend:r.extend||void 0,isHttp3:r.isHttp3});this.send({type:vr.JOIN_CHOOSE_SERVER,data:a},!0)}reqUserAccount(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{eventType:On.REQ_USER_ACCOUNT,lts:o,success:r.success,serverAddress:r.serverAddr,stringUid:r.stringUid,uid:r.uid,errorCode:r.errorCode,elapse:r.elapse||o-n.startTime,eventElapse:o-r.lts,extend:JSON.stringify(r.extend)});this.send({type:vr.REQ_USER_ACCOUNT,data:a},!0)}joinGateway(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info;r.vid&&(i.vid=r.vid),i.uid=r.uid,i.cid=r.cid;let o=Date.now(),{firstSuccess:a,avoidJoinStartTime:s}=r,l=o-(a&&s?s:n.startTime),c=it(it({},i),{},{eventType:On.JOIN_GATEWAY,lts:o,gatewayAddr:r.addr,success:r.succ,errorCode:r.ec,errorMsg:r.errorMsg||"",elapse:l,eventElapse:o-r.lts,firstSuccess:a,signalChannel:r.signalChannel,preload:r.preload?1:0});r.succ&&(n.lastJoinSuccessTime=o),this.send({type:vr.JOIN_GATEWAY,data:c},!0)}joinChannelTimeout(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=Date.now(),o=it(it({},n.info),{},{lts:i,timeout:r,elapse:i-n.startTime});this.send({type:vr.JOIN_CHANNEL_TIMEOUT,data:o},!0)}publish(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{eventType:On.PUBLISH,lts:o,eventElapse:r.eventElapse,elapse:o-n.startTime,success:r.succ,errorCode:r.ec,videoName:r.videoName,audioName:r.audioName,screenName:r.screenName,screenshare:r.screenshare,audio:r.audio,video:r.video,p2pid:r.p2pid,publishRequestid:r.publishRequestid});this.send({type:vr.PUBLISH,data:a},!0)}subscribe(t,r,n){let i=this.baseInfoMap.get(t);if(!i)return;let o=i.info,a=Date.now(),s=it(it({},o),{},{eventType:On.SUBSCRIBE,lts:a,eventElapse:r.eventElapse,elapse:a-i.startTime,success:r.succ,errorCode:r.ec,video:r.video,audio:r.audio,subscribeRequestid:r.subscribeRequestid,p2pid:r.p2pid,preSsrc:r.preSsrc?1:0},n&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof r.peerid=="string"?s.peerSuid=r.peerid:s.peer=r.peerid,this.send({type:vr.SUBSCRIBE,data:s},!0)}wsCompressorInit(t){var r;let n=[...Bo(r=this.baseInfoMap).call(r)],i=n.length?n[0]:"UnableToGetSid",o=this.baseInfoMap.get(i);if(!o)return;let a=o.info,s=Date.now(),l=it(it({},a),{},{eventType:On.WS_COMPRESSOR_INIT,lts:s,eventElapse:t.eventElapse,elapse:s-o.startTime,status:t.status?1:2});this.send({type:vr.WS_COMPRESSOR_INIT,data:l},!0)}firstRemoteVideoDecode(t,r,n,i){let o=this.baseInfoMap.get(t);if(!o)return;let a=o.info,s=Date.now(),l=it(it(it({},a),i),{},{elapse:s-o.startTime,eventType:r,lts:s,firstDecodeFrame:Math.max((i.firstFrame||s)-o.startTime,0),apEnd:Math.max(i.apEnd-o.startTime,0),apStart:Math.max(i.apStart-o.startTime,0),joinGwEnd:Math.max(i.joinGwEnd-o.startTime,0),joinGwStart:Math.max(i.joinGwStart-o.startTime,0),pcEnd:Math.max(i.pcEnd-o.startTime,0),pcStart:Math.max(i.pcStart-o.startTime,0),subscriberEnd:Math.max(i.subscriberEnd-o.startTime,0),subscriberStart:Math.max(i.subscriberStart-o.startTime,0),videoAddNotify:Math.max(i.videoAddNotify-o.startTime,0)});this.send({type:n,data:l},!0)}firstRemoteFrame(t,r,n,i){let o=this.baseInfoMap.get(t);if(!o)return;let a=o.info,s=Date.now(),l=it(it(it({},a),i),{},{elapse:s-o.startTime,eventType:r,lts:s});this.send({type:n,data:l},!0)}pcStats(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it(it({},i),r),{},{vid:i.vid===void 0?0:Number(i.vid),elapse:o-n.startTime,eventType:On.PC_STATS,lts:o,preallocation:r.preallocation?1:0});this.send({type:vr.PC_STATS,data:a},!0)}updateRemoteRTPCapabilities(t,r){if(t){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it(it({},i),r),{},{vid:i.vid===void 0?0:Number(i.vid),eventType:On.UPDATE_REMOTE_RTPCAPABILITIES,lts:o});this.send({type:vr.UPDATE_REMOTE_RTPCAPABILITIES,data:a},!0)}}onGatewayStream(t,r,n,i){let o=this.baseInfoMap.get(t);if(!o)return;let a=o.info,s=Date.now(),l=it(it(it({},a),i),{},{eventType:r,lts:s});this.send({type:n,data:l},!0)}streamSwitch(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{eventType:On.STREAM_SWITCH,lts:o,isDual:r.isdual,elapse:o-n.startTime,success:r.succ});this.send({type:vr.STREAM_SWITCH,data:a},!0)}requestProxyAppCenter(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{eventType:On.REQUEST_PROXY_APPCENTER,lts:o,eventElapse:o-r.lts,elapse:o-n.startTime,APAddr:r.APAddr,workerManagerList:r.workerManagerList,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:vr.REQUEST_PROXY_APPCENTER,data:a},!0)}requestProxyWorkerManager(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{eventType:On.REQUEST_PROXY_WORKER_MANAGER,lts:o,eventElapse:o-r.lts,elapse:o-n.startTime,workerManagerAddr:r.workerManagerAddr,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:vr.REQUEST_PROXY_WORKER_MANAGER,data:a},!0)}setProxyServer(t){this.proxyServer=t,t?w.debug("reportProxyServerurl: ".concat(t)):w.debug("disable reportProxyServerurl: ".concat(t))}peerPublishStatus(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it({},i),{},{subscribeElapse:r.subscribeElapse,peer:r.peer,peerPublishDuration:Math.max(r.audioPublishDuration,r.videoPublishDuration),audiotag:r.audioPublishDuration>0?1:-1,videotag:r.videoPublishDuration>0?1:-1,lts:o,elapse:o-n.startTime,joinChannelSuccessElapse:o-(n.lastJoinSuccessTime||o),peerPublishDurationVideo:r.videoPublishDuration,peerPublishDurationAudio:r.audioPublishDuration});this.send({type:vr.PEER_PUBLISH_STATUS,data:a},!0)}workerEvent(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now();(function(a,s,l){let c=a[s];if(!c||typeof c!="string")return[a];a[s]="";let u=Il(JSON.stringify(a)),h=0,f=[],p=0;for(let m=0;m<c.length;m++)p+=c.charCodeAt(m)<=127?1:3,p<=l-u||(f[f.length]=Se(Se({},a),{},{[s]:c.substring(h,m)}),h=m,p=c.charCodeAt(m)<=127?1:3);return h!==c.length-1&&(f[f.length]=Se(Se({},a),{},{[s]:c.substring(h)})),f})(it(it(it({},i),r),{},{elapse:o-n.startTime,lts:o,productType:"WebRTC"}),"payload",1300).forEach(a=>this.send({type:vr.WORKER_EVENT,data:a},!0))}apworkerEvent(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it(it({},i),r),{},{elapse:o-n.startTime,lts:o});this.send({type:vr.AP_WORKER_EVENT,data:a},!0)}joinWebProxyAP(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it(it({},i),r),{},{elapse:o-n.startTime,lts:o,extend:r.extend||void 0});this.send({type:vr.JOIN_WEB_PROXY_AP,data:a},!0)}WebSocketQuit(t,r){let n=this.baseInfoMap.get(t);if(!n)return;let i=n.info,o=Date.now(),a=it(it(it({},i),r),{},{elapse:o-n.startTime,lts:o});this.send({type:vr.WEBSOCKET_QUIT,data:a},!0)}async sendCustomReportMessage(t,r){if(this.customReportCount+=r.length,this.customReportCount>L("CUSTOM_REPORT_LIMIT"))throw new J(O.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));let n=Date.now(),i=r.map(o=>({type:vr.USER_ANALYTICS,data:it(it({sid:t},o),{},{lts:n})}));try{L("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(i):await this.postDataToStatsCollector(i)}catch(o){throw w.error("send custom report message failed",o.toString()),new J(O.CUSTOM_REPORT_SEND_FAILED,o.message)}}sendApiInvoke(t){let r=L("NOT_REPORT_EVENT");if(t.tag&&ge(r)&&ge(r).call(r,t.tag))return!1;if(t.sid===null)return this.apiInvokeUploadPendingItems.push(t),!1;let n=this.baseInfoMap.get(t.sid);if(!n)return this.apiInvokeUploadPendingItems.push(t),!1;let{cname:i,uid:o,cid:a}=n.info,s;if(t.lts=t.lts||Date.now(),t.error)if(t.error instanceof J){let{code:c,message:u}=t.error;s=c||u||t.error.toString()}else s=t.error.toString();let l={invokeId:t.invokeId,sid:t.sid,cname:i,cid:a,uid:o,lts:t.lts,success:t.success,elapse:t.lts-n.startTime,execElapse:t.lts-t.apiInvokeTime,apiName:t.name,options:t.options?JSON.stringify(t.options):void 0,execStates:t.states?JSON.stringify(t.states):void 0,execResult:t.result?JSON.stringify(t.result):void 0,errorCode:t.error?s:void 0,errorMsg:t.error?JSON.stringify(t.error):void 0};return this.send({type:vr.API_INVOKE,data:l},!1),!0}appendSessionId(){Yee.__CLIENT_LIST__.forEach(t=>{if(t._sessionId){let r=this.apiInvokeUploadPendingItems.length;for(let n=0;n<r;n++){let i=this.apiInvokeUploadPendingItems.shift();i&&(i.sid=t._sessionId,this.sendApiInvoke(Object.assign({},i)))}}})}send(t,r){if(r)return this.keyEventUploadPendingItems.push(t),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(t),this.normalEventUploadPendingItems.length>L("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(t,r){let n=[],i=[];for(;t.length;){let a=t.shift();n.length<20?n.push(a):i.push(a)}t.push(...i);for(let a of[...n]){var o;this.ltsList.indexOf(a.data.lts)!==-1?(a.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(a.data.lts)):(this.ltsList.push(a.data.lts),V0(o=this.ltsList).call(o,(s,l)=>s-l))}return r||(this.lastSendNormalEventTime=Date.now()),L("ENABLE_EVENT_REPORT")&&n.length&&(L("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((a=>s=>{L("EVENT_REPORT_RETRY")&&(r?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(a):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(a),this.normalEventUploadPendingItems.length>L("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-L("NORMAL_EVENT_QUEUE_CAPACITY")),w.warning("report: drop normal events"))))})(n)),t}async postDataToStatsCollector2(t){Hr.networkState===Ro.OFFLINE&&await fe.race([Hr.onlineWaiter,jn(2*Yr.maxRetryTimeout)]);let r=o=>{let a=new Uint8Array;return o.forEach(s=>{let l=TL(JSON.stringify(s.data)),c=new ArrayBuffer(5),u=(f=>{let p=0;return Object.entries(vr).forEach(m=>{let[g,y]=m;y===f.type&&(p=oVe[g])}),p})(s),h=new DataView(c);h.setUint16(0,l.byteLength,!0),h.setUint8(2,255&u),h.setUint8(3,u>>>8&255),h.setUint8(4,u>>>16&255),a=LB(a,new Uint8Array(c)),a=LB(a,l)}),a},n="event",i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(L("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(n):"https://".concat(L("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(n);for(let o=0;o<2;o+=1){o===1&&(i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(L("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(n):"https://".concat(L("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(n));try{await uk(i,{timeout:1e4,data:r(t),headers:it(it({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(a){if(o===1)throw a;continue}return}}async postDataToStatsCollector(t){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:t.map(a=>JSON.stringify(a)),vid:(a=>{let s=a&&a.data.sid&&this.baseInfoMap.get(a.data.sid);return s&&s.info.vid&&+s.info.vid||0})(t[0])};Hr.networkState===Ro.OFFLINE&&await fe.race([Hr.onlineWaiter,jn(2*Yr.maxRetryTimeout)]);let i=r?"/events/proto-raws":"/events/messages",o=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(L("EVENT_REPORT_DOMAIN"),"&p=").concat(L("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(L("EVENT_REPORT_DOMAIN"),":").concat(L("STATS_COLLECTOR_PORT")).concat(i));for(let a=0;a<2;a+=1){a===1&&(o=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(L("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(L("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(L("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(L("STATS_COLLECTOR_PORT")).concat(i)));try{r?await QFe(o,{timeout:1e4,data:n}):await uk(o,{timeout:1e4,data:n})}catch(s){if(a===1)throw s;continue}return}}createBaseInfo(t,r){let n=Object.assign({},iVe);return n.sid=t,this.baseInfoMap.set(t,{info:n,startTime:r}),n}reportResourceTiming(t,r){let n=performance.getEntriesByName(t),i=n[n.length-1];i&&this.reportApiInvoke(r,{name:"Client.resourceTiming",options:i,tag:xr.TRACER}).onSuccess()}};function Le(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(t,r,n){let i=n.value;if(typeof i=="function"){let o=e.className||t.__className__||(t.constructor.name==="AgoraRTCClient"?"Client":t.constructor.name);n.value=function(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];let c=s;if(e.argsMap)try{c=e.argsMap(this,...s)}catch(h){w.warning(h),c=[]}try{JSON.stringify(c)}catch{w.warning("arguments for method ".concat(o,".").concat(String(r)," not serializable for apiInvoke.")),c=[]}let u=(e.report||Te).reportApiInvoke(this._sessionId||null,{name:"".concat(o,".").concat(String(r)),options:c,tag:xr.TRACER,reportResult:e.reportResult},e.throttleTime);try{let h=i.apply(this,s);return h instanceof fe?h.then(f=>(u.onSuccess(e.reportResult&&f),f)).catch(f=>{throw u.onError(f),f}):(u.onSuccess(e.reportResult&&h),h)}catch(h){throw u.onError(h),h}}}return n}}Lr(NL,"__CLIENT_LIST__",[]);var Te=new NL;qee.on("REPORT_LOG_UPLOAD",e=>{e.networkState=Hr.networkState,Te.reportApiInvoke(null,{name:"logUploadError",options:e,tag:xr.TRACER}).onSuccess("logUploadError")});var aVe=["CHINA","GLOBAL"],zn=function(){let e="us".concat("erna","me"),t="pa".concat("sswo","rd"),r=["t","s","t"];r.splice(1,0,"e");let n=r.join(""),i=[];for(let s=0;s<6;s++)i.push("1");let o=i.join(""),a={};return a[e]=n,a[t]=o,Object.assign(a,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=zn,xL||(Mr.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Mr.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Mr.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Mr.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Mr.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Mr.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Mr.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Mr.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Mr.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Mr.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Mr.AREAS=["NORTH_AMERICA","OVERSEA"]);var Xee=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],pu=[];function wd(e,t){return!!t&&pu.some(r=>r.uid===e&&r.channelName===t)}NL.__CLIENT_LIST__=pu;var sVe=zZ.forEach,XB=KT("forEach")?[].forEach:function(e){return sVe(this,e,arguments.length>1?arguments[1]:void 0)};tr({target:"Array",proto:!0,forced:[].forEach!=XB},{forEach:XB});var lVe=Rs("Array").forEach,cVe=Kl,uVe=li,dVe=Gi,hVe=lVe,gI=Array.prototype,fVe={DOMTokenList:!0,NodeList:!0},pVe=function(e){var t=e.forEach;return e===gI||dVe(gI,e)&&t===gI.forEach||uVe(fVe,cVe(e))?hVe:t},mVe=Ur(pVe),gVe=Wl,JB=JT;tr({target:"Object",stat:!0,forced:nn(function(){JB(1)})},{keys:function(e){return JB(gVe(e))}});var Jee=Ur(nl.Object.keys),yVe=Ur(tQ),vVe=tr,bVe=B0,EVe=Jr([].reverse),QB=[1,2];vVe({target:"Array",proto:!0,forced:String(QB)===String(QB.reverse())},{reverse:function(){return bVe(this)&&(this.length=this.length),EVe(this)}});var _Ve=Rs("Array").reverse,wVe=Gi,SVe=_Ve,yI=Array.prototype,TVe=function(e){var t=e.reverse;return e===yI||wVe(yI,e)&&t===yI.reverse?SVe:t},Qee=TVe,CVe=Ur(Qee),xVe=tr,ZB=B0,RVe=eC,IVe=ca,e6=H2,NVe=Fc,AVe=ud,OVe=nC,kVe=Kr,PVe=rL,DVe=VZ("slice"),LVe=kVe("species"),vI=Array,MVe=Math.max;xVe({target:"Array",proto:!0,forced:!DVe},{slice:function(e,t){var r,n,i,o=AVe(this),a=NVe(o),s=e6(e,a),l=e6(t===void 0?a:t,a);if(ZB(o)&&(r=o.constructor,(RVe(r)&&(r===vI||ZB(r.prototype))||IVe(r)&&(r=r[LVe])===null)&&(r=void 0),r===vI||r===void 0))return PVe(o,s,l);for(n=new(r===void 0?vI:r)(MVe(l-s,0)),i=0;s<l;s++,i++)s in o&&OVe(n,i,o[s]);return n.length=i,n}});var jVe=Rs("Array").slice,UVe=Gi,FVe=jVe,bI=Array.prototype,VVe=function(e){var t=e.slice;return e===bI||UVe(bI,e)&&t===bI.slice?FVe:t},BVe=Ur(VVe);function we(e,t,r,n,i){var o,a,s,l={};return mVe(o=Jee(n)).call(o,function(c){l[c]=n[c]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=yVe(a=CVe(s=BVe(r).call(r)).call(s)).call(a,function(c,u){return u(e,t,c)||c},l),i&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(i):void 0,l.initializer=void 0),l.initializer===void 0&&(UZ(e,t,l),l=null),l}var dk=function(e){return e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L1T3_KEY="L1T3_KEY",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY",e}({}),Lo=function(e){return e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver",e}({}),v_=function(e){return e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",e}({}),EI=function(e){return e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR",e}({}),Ya=function(e){return e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",e}({}),ki=function(e){return e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",e}({}),De=function(e){return e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",e}({}),Zt=function(e){return e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed",e}({}),ze=function(e){return e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.PRE_CONNECT_PC="pre_connect_pc",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",e}({}),Be=function(e){return e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag",e}({}),Mv=function(e){return e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats",e}({}),pt=function(e){return e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list",e}({}),Ui=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({}),Ke=function(e){return e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",e}({}),q=class extends J{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",arguments.length>2?arguments[2]:void 0),R(this,"name","AgoraRTCException")}print(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return super.print(e,w)}throw(){super.throw(w)}};function fC(e){if(typeof e!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw w.error("Invalid Channel Name ".concat(e)),new q(O.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function pC(e){if(!function(t){return typeof t=="number"&&Math.floor(t)===t&&0<=t&&t<=4294967295}(e)&&!Vee(e,1,255))throw new q(O.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");typeof e=="string"&&w.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}var bc=function(e){return e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e}({}),$Ve={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},_I={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function wI(e,t){kn(e.url,"".concat(t,".url"),1,1e3,!1),gr(e.x)||Wt(e.x,"".concat(t,".x"),0,1e4),gr(e.y)||Wt(e.y,"".concat(t,".y"),0,1e4),gr(e.width)||Wt(e.width,"".concat(t,".width"),0,1e4),gr(e.height)||Wt(e.height,"".concat(t,".height"),0,1e4),gr(e.zOrder)||Wt(e.zOrder,"".concat(t,".zOrder"),0,255),gr(e.alpha)||Wt(e.alpha,"".concat(t,".alpha"),0,1,!1)}var HVe={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},mu=function(e){return e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address",e}({}),hk=function(e){return e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",e}({}),Zr=function(e){return e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",e}({});function t6(e){if(!e.channelName)throw new q(O.INVALID_PARAMS,"invalid channelName in info");if(typeof e.uid!="number")throw new q(O.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&kn(e.token,"info.token",1,2047),pC(e.uid),fC(e.channelName),!0}var Pi=function(e){return e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile",e}({}),ic=function(e){return e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",e}({}),so=function(e){return e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",e}({}),jf=function(e){return e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",e}({}),Lt=function(e){return e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low",e}({}),Hn=function(e){return e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.PRE_CONNECT_PC="pre-connect_pc",e}({}),b_=function(e){return e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON",e}({}),pn=function(e){return e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7",e}({}),It=function(e){return e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS",e}({}),r6=[It.AFRICA,It.ASIA,It.CHINA,It.EUROPE,It.GLOBAL,It.INDIA,It.JAPAN,It.NORTH_AMERICA,It.OCEANIA,It.OVERSEA,It.SOUTH_AMERICA],ei=function(e){return e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL",e}({}),mC={CHINA:{},ASIA:{CODE:ei.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:ei.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:ei.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:ei.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:ei.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:ei.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:ei.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:ei.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:ei.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:ei.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:ei.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:ei.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:ei.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};xL&&(mC.CHINA={CODE:ei.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});var fk=function(e){return e.UPDATE_BITRATE_LIMIT="update_bitrate_limit",e}({}),Zee=class extends _r{constructor(e,t){super(),R(this,"onICEConnectionStateChange",void 0),R(this,"onConnectionStateChange",void 0),R(this,"onDTLSTransportStateChange",void 0),R(this,"onDTLSTransportError",void 0),R(this,"onICETransportStateChange",void 0),R(this,"onFirstAudioReceived",void 0),R(this,"onFirstVideoReceived",void 0),R(this,"onFirstAudioDecoded",void 0),R(this,"onFirstVideoDecoded",void 0),R(this,"onFirstVideoDecodedTimeout",void 0),R(this,"onSelectedLocalCandidateChanged",void 0),R(this,"onSelectedRemoteCandidateChanged",void 0),R(this,"getLocalVideoStats",void 0)}},ete=class extends Zee{constructor(e,t){super(e,t),R(this,"establishPromise",void 0)}},xe=function(e){return e.VIDEO="video",e.AUDIO="audio",e}({}),Io=function(e){return e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY",e}({}),ec=function(e){return e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",e}({}),oe=function(e){return e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack",e}({}),Dt=function(e){return e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected",e}({}),Me=function(e){return e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE",e}({}),rs=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),Xa=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),wn=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),tte=function(e){return e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback",e.PRE_CONNECT_PC="transmitter:pre_connect_pc",e}({}),Tl=function(e){return e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation",e}({}),ma=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),js=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),Tf=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),Dr=function(e){return e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check",e}({}),Cf=function(e){return e.ABORT="abort",e}({}),xu=function(e){return e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e}({}),zVe=function(e){return e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed",e}({}),GVe={[v_.ACCESS_POINT]:{[ki.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[ki.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[ki.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[ki.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[ki.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[ki.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[ki.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[ki.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[ki.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[ki.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[ki.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[ki.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[ki.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[ki.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[ki.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[ki.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[ki.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[ki.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[v_.UNILBS]:{[Ya.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Ya.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Ya.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Ya.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Ya.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Ya.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Ya.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Ya.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Ya.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Ya.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Ya.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Ya.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[v_.STRING_UID_ALLOCATOR]:{[EI.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[EI.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[EI.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function cm(e){let t=GVe[Math.floor(e/1e4)];if(!t)return{desc:"unknown error",retry:!1};let r=t[e%1e4];if(!r){if(Math.floor(e/1e4)===v_.ACCESS_POINT){let n=e%1e4;if(n.toString()[0]==="1")return{desc:e.toString(),retry:!1};if(n.toString()[0]==="2")return{desc:e.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return r}var WVe={[De.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[De.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[De.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[De.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[De.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[De.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[De.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[De.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[De.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[De.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[De.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[De.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[De.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[De.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[De.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[De.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[De.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[De.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[De.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[De.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[De.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[De.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[De.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[De.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[De.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[De.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[De.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[De.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[De.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[De.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[De.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[De.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[De.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[De.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[De.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[De.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[De.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[De.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[De.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[De.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[De.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[De.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[De.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[De.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[De.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[De.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[De.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[De.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[De.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[De.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[De.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[De.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[De.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[De.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[De.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[De.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[De.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[De.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[De.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[De.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[De.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[De.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[De.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function jv(e){return WVe[e]||{desc:"UNKNOWN_ERROR_".concat(e),action:"failed"}}function n6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function SI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n6(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i6(e){return e.every(t=>t.readyState===WebSocket.CLOSED||t.readyState===WebSocket.CLOSING)}function o6(e,t){if(typeof e=="string")return e;let{proxy:r,host:n,port:i}=e;if(t){let o=L("JOIN_GATEWAY_FALLBACK_PORT")||443;return o===443?"wss://".concat(n,"/ws/?p=").concat(Number(i)+150):"wss://".concat(n,":").concat(o,"/ws/?p=").concat(Number(i)+150)}return r?"wss://".concat(r,"/ws/?h=").concat(n,"&p=").concat(i):"wss://".concat(n,":").concat(i)}var KVe=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,qVe=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,YVe=/wss:\/\/(.+):([0-9]+)\/?/,XVe=/wss:\/\/(.[^\/]+)\/?/,JVe=0,QVe=class{constructor(e,t){R(this,"id",0),R(this,"store",void 0),R(this,"recordIndex",void 0),R(this,"websockets",[]),R(this,"try443PortDuration",2e3),R(this,"forceCloseWSDuration",5e3),R(this,"try443PortTimeout",null),R(this,"forceCloseTimeout",null),R(this,"isTry443PortFailed",!1),R(this,"isNormalPortFailed",!1),R(this,"useDoubleDomain",!1),R(this,"useProxy",!1),R(this,"startTime",Date.now()),this.id=++JVe,this.try443PortDuration=L("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach(e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()}),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var e;let t=Date.now()-this.startTime;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];w.debug("[choose-best-ws ".concat((e=this.store)===null||e===void 0?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:"),...n)}createWebSocket(e,t,r){this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:r});let n=L("GATEWAY_DOMAINS"),i=Date.now(),o=[],a=n.find(c=>{var u;return ge(u=e.host).call(u,c)});a||(this.useDoubleDomain=!1);let s=[];if(this.useDoubleDomain)n.forEach(c=>{s.push(o6(SI(SI({},e),{},{host:e.host.replace(a,c)}),t))});else{let c=SI({},e);if(t&&a){let u=n.find(h=>h!==a);u&&(c.host=c.host.replace(a,u))}s.push(o6(c,t))}try{s.forEach(c=>{let u=new WebSocket(c);u.binaryType="arraybuffer",o.push(u),this.logger("ws is connecting:",u.url)})}catch(c){if(this.logger("ws create failed"),o.forEach(u=>u.close()),o.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,r);if(!t&&Number(e.port)!==443)return this.createWebSocket(e,!0,r);throw new q(O.WS_ERR,"init websocket failed! Error: ".concat(c.toString()))}let l=Pv();return this.store&&this.store.recordJoinChannelService({urls:o.map(c=>c.url),service:"gateway"},this.recordIndex),o.forEach(c=>{c.onopen=()=>{this.logger("onopen: ws ".concat(c.url," open cost ").concat(Date.now()-i,"ms")),this.websockets.forEach(u=>{u!==c&&(u.onopen=null,u.onclose=null,u.onmessage=null,u.close(),this.logger("close backup websocket: ".concat(u.url)))}),this.websockets.length=0,l.resolve(c)},c.onclose=u=>{this.logger("onclose: ws ".concat(c.url," closed cost ").concat(Date.now()-i,"ms state: ").concat(c.readyState)),t?this.isTry443PortFailed=i6(o):this.isNormalPortFailed=i6(o),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),(t&&this.isTry443PortFailed||!t&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(u.reason)),l.reject({code:u.code,reason:b_.A_ROUND_WS_FAILED}))},c.onmessage=u=>this.logger("".concat(c.url," onmessage: ").concat(u.data))}),this.websockets.push(...o),r||(()=>{let c=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",l.isResolved),this.websockets.forEach(u=>u.readyState!==WebSocket.OPEN&&u.close())};if(t||this.useProxy)return this.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(c,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout(()=>{if(this.logger("2s timeout, isWebsocket created: ",l.isResolved),l.isResolved)return c();St().os===yn.MAC_OS&&Ir()&&c(),this.createWebSocket(e,!0,!0).then(u=>l.resolve(u)).catch(u=>{this.isNormalPortFailed&&l.reject(u),this.logger("try 443 port to create ws failed")}),this.forceCloseTimeout=window.setTimeout(c,this.forceCloseWSDuration)},this.try443PortDuration)})(),l.promise}chooseBestWebsocket(e,t,r,n){return this.useDoubleDomain=!!t,typeof e=="string"&&(e=function(i){let o,a,s;return[,o,a,s]=i.match(KVe)||[],o||([,a,s]=i.match(qVe)||[]),a&&s||([,a,s]=i.match(YVe)||[]),a&&s||([,a]=i.match(XVe)||[]),a||w.warning("un-destructible url: ",i),{proxy:o,host:a,port:s||"443"}}(e)),this.recordIndex=n,this.useProxy=!!e.proxy,r&&this.useProxy&&(w.warn("cannot use 443 only when use proxy"),r=!1),this.createWebSocket(e,!!r,!1).finally(()=>this.clearTimeout())}};function a6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var rte=class extends _r{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;ge(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,this._state==="reconnecting"?this.emit(Ke.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(Ke.CONNECTED):this._state==="closed"?this.emit(Ke.CLOSED):this._state==="failed"&&this.emit(Ke.FAILED))}resetReconnectCount(e){w.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],n=arguments.length>3&&arguments[3]!==void 0&&arguments[3],i=arguments.length>4&&arguments[4]!==void 0&&arguments[4],o=arguments.length>5?arguments[5]:void 0;super(),R(this,"connectionID",0),R(this,"currentURLIndex",0),R(this,"urls",[]),R(this,"_reconnectMode","tryNext"),R(this,"reconnectReason",void 0),R(this,"_initMutex",new ai("websocket")),R(this,"name",void 0),R(this,"_state","closed"),R(this,"reconnectInterrupter",void 0),R(this,"websocket",void 0),R(this,"retryConfig",void 0),R(this,"reconnectCount",0),R(this,"forceCloseTimeout",5e3),R(this,"onlineReconnectListener",void 0),R(this,"useCompress",void 0),R(this,"tryDoubleDomain",!1),R(this,"use443PortOnly",!1),R(this,"wsInflateLength",0),R(this,"wsDeflateLength",0),R(this,"closeEstablishingWs",()=>{}),R(this,"store",void 0),R(this,"joinGatewayRecordIndex",void 0),this.store=o,this.name=e,this.retryConfig=function(u){for(var h=1;h<arguments.length;h++){var f=arguments[h]!=null?arguments[h]:{};h%2?a6(Object(f),!0).forEach(function(p){R(u,p,f[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):a6(Object(f)).forEach(function(p){Object.defineProperty(u,p,Object.getOwnPropertyDescriptor(f,p))})}return u}({},t),this.useCompress=r,this.tryDoubleDomain=n,this.use443PortOnly=i;let{timeout:a,timeoutFactor:s}=t,l=Math.max(300,Math.floor(3*a/5)),c=Math.max(1.2,Math.floor(8*s)/10);Ro.ONLINE&&(this.retryConfig.timeout=l,this.retryConfig.timeoutFactor=c),Hr.on(cp.NETWORK_STATE_CHANGE,(u,h)=>{u!==h&&(this.resetReconnectCount("network state change: ".concat(h," -> ").concat(u)),u===Ro.ONLINE?(this.retryConfig.timeout=l,this.retryConfig.timeoutFactor=c):(this.retryConfig.timeout=a,this.retryConfig.timeoutFactor=s))})}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,r=await this._initMutex.lock();this.forceCloseTimeout=t,this.urls=e,this.state="connecting";try{let n=Pv(),i=this.urls[this.currentURLIndex];L("ENABLE_PREALLOC_PC")&&this.emit(tte.PRE_CONNECT_PC),this.createWebSocketConnection(i).then(n.resolve).catch(n.reject),this.once(Ke.CLOSED,()=>{n.reject(new J(O.WS_DISCONNECT))}),this.once(Ke.CONNECTED,n.resolve),await n.promise}catch{}finally{r()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;let r=this.websocket;t?setTimeout(()=>r.close(),500):r.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void w.warning("[".concat(this.name,"] can not reconnect, no websocket"));e!==void 0&&(this.reconnectMode=e),w.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinGatewayRecordIndex=="number"&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);let r=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),r&&r.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new J(O.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(r){throw new J(O.WS_ERR,"send websocket message error"+r.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){let e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;let r=Pv();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;let n=c=>{var u;(u=this.store)===null||u===void 0||u.signalChannelOpen(),w.debug("[".concat(this.name,"] websocket opened:"),c),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),r.resolve()},i=async c=>{var u;if(w.debug("[".concat(this.name,"] websocket close ").concat((u=this.websocket)===null||u===void 0?void 0:u.url,", code: ").concat(c.code,", reason: ").concat(c.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)r.reject(new J(O.WS_DISCONNECT,"websocket close: ".concat(c.code))),this.close();else{this.state==="connected"&&(this.reconnectReason=c.reason,this.state="reconnecting");let h=xa(this,Ke.WILL_RECONNECT,this.reconnectMode,c.reason)||this.reconnectMode,f=await this.reconnectWithAction(h);if(this.state==="closed")return void w.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!f)return r.reject(new J(O.WS_DISCONNECT,"websocket reconnect failed: ".concat(c.code))),this.close(!0);r.resolve()}},o=c=>{this.emit(Ke.ON_MESSAGE,c)},a=c=>{w.warn("[".concat(this.connectionID,"] ws open error ").concat(c))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),L("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=L("GATEWAY_WSS_ADDRESS")),w.debug("[".concat(this.name,"] start connect, url:"),e);let s=(t=this.store)===null||t===void 0?void 0:t.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var l;let c=await this.chooseBestWebsocketConnection(e);this.websocket=c,n&&n(this.websocket.url),this.websocket.onclose=i,this.websocket.onmessage=o,this.websocket.onerror=a,(l=this.store)===null||l===void 0||l.recordJoinChannelService({endTs:Date.now(),status:"success"},s),this.joinGatewayRecordIndex=s}catch(c){let u=this.state==="closed",h=c instanceof J,f=h&&c.code===O.WS_ABORT,p=h&&c.code===O.WS_ERR,m=h?c.message:c&&(c.reason||c.toString());w.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(m)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:f?"aborted":"error",errors:[c]},s),u||p?(r.reject(u?new J(O.WS_DISCONNECT,"websocket is closed: ".concat(m)):new J(O.WS_ERR,"init websocket failed: ".concat(m))),p&&w.error("[".concat(this.name,"] init websocket failed: ").concat(m))):i&&i(c)}return r.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||this.urls.length===0||this.state==="closed")return!1;w.warning("[choose-best-ws] action: =>",e),this.onlineReconnectListener||Hr.isOnline||!Hr.onlineWaiter||(this.onlineReconnectListener=Hr.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let r=!0;if(this.reconnectInterrupter=()=>r=!1,t){let o=CL(this.reconnectCount,this.retryConfig);w.debug("[".concat(this.name,"] wait ").concat(o,"ms to reconnect websocket, mode: ").concat(e)),await fe.race([jn(o),this.onlineReconnectListener||new fe(()=>{})])}if(this._state==="closed"||!r)return!1;this.reconnectCount+=1;let n=async(o,a)=>{this.emit(Ke.RECONNECT_CREATE_CONNECTION,a),await this.createWebSocketConnection(o)};try{if(e==="retry")this.emit(Ke.RECONNECT_WAITTING_FINISH,e),await n(this.urls[this.currentURLIndex],e);else if(e==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);w.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit(Ke.RECONNECT_WAITTING_FINISH,e),await n(this.urls[this.currentURLIndex],e)}else e==="recover"&&(w.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(Ke.RECONNECT_WAITTING_FINISH,e),this.urls=await Yn(this,Ke.REQUEST_NEW_URLS),this.currentURLIndex=0,await n(this.urls[this.currentURLIndex],e))}catch(o){var i;w.error("[".concat(this.name,"] reconnect failed ").concat(o&&o.toString()));let a=o==null||(i=o.data)===null||i===void 0?void 0:i.desc;return Array.isArray(a)&&ge(a).call(a,"dynamic key expired")?(this.emit(Ke.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}},AL=class extends rte{constructor(e,t){super(e,t,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){let r=Pv(),n=function(o,a){return new QVe(o,a)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{w.debug("[choose-best-ws] close establishing websockets"),n.closeAllWebsockets(),r.reject(new J(O.WS_ABORT,"choose best websocket aborted"))};let i=L("GATEWAY_DOMAINS");return w.debug("[choose-best-ws] currentDomain: ",e,", domains: ",i,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),n.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(r.resolve).catch(r.reject),r.promise.finally(()=>{this.closeEstablishingWs=void 0})}},Uv=class extends rte{constructor(e,t){super(e,t,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new fe((r,n)=>{let i=!1,o=[];this.closeEstablishingWs=()=>{w.debug("[choose-best-ws] close establishing websockets"),o.forEach(p=>{p.onclose=null,p.onopen=null,p.onmessage=null,p.close()}),n(new J(O.WS_ABORT,"choose best websocket aborted"))};let a=L("GATEWAY_DOMAINS"),s,l=e.indexOf("?h="),c=a.find(p=>l!==-1?ge(e).call(e,p,l):ge(e).call(e,p));w.debug("[choose-best-ws] currentDomain: ",c,", domains: ",a);let u=!this.tryDoubleDomain||!c;if(!u&&c){var h;let p=Date.now();try{a.forEach(m=>{let g=l===-1?e.replace(c,m):e.substr(0,l)+e.substr(l).replace(c,m),y=new WebSocket(g);y.binaryType="arraybuffer",o.push(y),w.debug("[choose-best-ws] ws is connecting:",y.url)})}catch{for(w.debug("[choose-best-ws] ws create failed, fallback to single url"),o.forEach(m=>m.close());o.length;)o.pop();u=!0}(h=this.store)===null||h===void 0||h.recordJoinChannelService({urls:o.map(m=>m.url),service:"gateway"},t),o.forEach(m=>{m.onopen=()=>{if(i)return;let g=Date.now()-p;w.debug("[choose-best-ws] ws open cost ".concat(g,"ms")),o.filter(y=>y!==m).forEach(y=>{w.debug("[choose-best-ws]close backup websocket: ".concat(y.url)),y.close()}),i=!0,r(m)},m.onclose=g=>{s=g,!i&&(o.find(y=>!(y.readyState===WebSocket.CLOSED||y.readyState===WebSocket.CLOSING))||(w.debug("[choose-best-ws] all websocket is closed"),i=!0,n(s)))},m.onmessage=g=>{w.debug("[choose-best-ws]".concat(m.url," onmessage: ").concat(g.data))}}),jn(this.forceCloseTimeout).then(()=>{o.forEach(m=>{m.readyState!==WebSocket.OPEN&&m.close()})})}if(u){var f;let p;w.debug("[choose-best-ws] use single url: ",e),(f=this.store)===null||f===void 0||f.recordJoinChannelService({urls:[e],service:"gateway"},t);try{p=new WebSocket(e),o.push(p),p.binaryType="arraybuffer"}catch(m){let g=new J(O.WS_ERR,"init websocket failed! Error: ".concat(m.toString()));return w.error("[".concat(this.name,"]").concat(g)),void n(g)}p.onopen=()=>{r(p)},p.onclose=m=>{n(m)},p.onmessage=m=>{w.debug("[choose-best-ws]".concat(p.url," onmessage: ").concat(m.data))},jn(this.forceCloseTimeout).then(()=>{p&&p.readyState!==WebSocket.OPEN&&p.close()})}}).then(r=>(this.closeEstablishingWs=void 0,r)).catch(r=>{throw this.closeEstablishingWs=void 0,r})}},ZVe=class extends _r{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===Zt.CONNECTED?this.emit(ze.WS_CONNECTED):e===Zt.RECONNECTING?this.emit(ze.WS_RECONNECTING,this._websocketReconnectReason):e===Zt.CLOSED&&this.emit(ze.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),R(this,"_disconnectedReason",void 0),R(this,"_websocketReconnectReason",void 0),R(this,"_connectionState",Zt.CLOSED),R(this,"reconnectToken",void 0),R(this,"websocket",void 0),R(this,"openConnectionTime",void 0),R(this,"clientId",void 0),R(this,"lastMsgTime",Date.now()),R(this,"uploadCache",[]),R(this,"uploadCacheInterval",void 0),R(this,"rttRolling",new Kee(5)),R(this,"pingpongTimer",void 0),R(this,"wsInflateDataTimer",void 0),R(this,"pingpongTimeoutCount",0),R(this,"joinResponse",void 0),R(this,"multiIpOption",void 0),R(this,"initError",void 0),R(this,"spec",void 0),R(this,"store",void 0),R(this,"onWebsocketMessage",r=>{if(r.data instanceof ArrayBuffer)return void this.emit(ze.ON_BINARY_DATA,r.data);let n=JSON.parse(r.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(n,"_id")){let i="res-@".concat(n._id);this.emit(i,n._result,n._message)}else if(Object.prototype.hasOwnProperty.call(n,"_type")){if(this.emit(n._type,n._message),n._type===pt.ON_NOTIFICATION&&this.handleNotification(n._message),n._type===pt.ON_USER_BANNED)switch(n._message.error_code){case 14:this.close(Bt.UID_BANNED);break;case 15:this.close(Bt.IP_BANNED);break;case 16:this.close(Bt.CHANNEL_BANNED)}if(n._type===pt.ON_USER_LICENSE_BANNED)switch(n._message.error_code){case De.ERR_LICENSE_MISSING:this.close(Bt.LICENSE_MISSING);break;case De.ERR_LICENSE_EXPIRED:this.close(Bt.LICENSE_EXPIRED);break;case De.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Bt.LICENSE_MINUTES_EXCEEDED);break;case De.ERR_LICENSE_PERIOD_INVALID:this.close(Bt.LICENSE_PERIOD_INVALID);break;case De.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Bt.LICENSE_MULTIPLE_SDK_SERVICE);break;case De.ERR_LICENSE_ILLEGAL:this.close(Bt.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new AL("gateway-".concat(this.clientId),this.spec.retryConfig,!0,L("JOIN_GATEWAY_USE_DUAL_DOMAIN"),L("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Zt.CONNECTED&&this.reconnect("retry",Kn.OFFLINE)})}async request(e,t,r,n){let i=er(6,""),o={_id:i,_type:e,_message:t},a=this.websocket.connectionID,s=()=>new fe((p,m)=>{if(this.connectionState===Zt.CONNECTED)return p();let g=()=>{this.off(ze.WS_CLOSED,y),p()},y=()=>{this.off(ze.WS_CONNECTED,g),m(new q(O.WS_ABORT))};this.once(ze.WS_CONNECTED,g),this.once(ze.WS_CLOSED,y),e!==Be.PUBLISH&&e!==Be.PUBLISH_DATASTREAM&&e!==Be.SUBSCRIBE&&e!==Be.SUBSCRIBE_DATASTREAM&&e!==Be.UNSUBSCRIBE&&e!==Be.UNSUBSCRIBE_DATASTREAM&&e!==Be.UNPUBLISH&&e!==Be.UNPUBLISH_DATASTREAM&&e!==Be.CONTROL&&e!==Be.RESTART_ICE||this.once(ze.DISCONNECT_P2P,()=>{m(new q(O.DISCONNECT_P2P))}),e!==Be.PUBLISH&&e!==Be.RESTART_ICE||this.once(ze.ABORT_P2P_EXECUTION,()=>{m(new q(O.DISCONNECT_P2P))})});if(this.connectionState!==Zt.CONNECTING&&this.connectionState!==Zt.RECONNECTING||e===Be.JOIN||e===Be.REJOIN||await s(),this.websocket.sendMessage(o,!0),n)return;let l=new fe((p,m)=>{let g=!1,y=(b,_)=>{g=!0,p({isSuccess:b==="success",message:_||{}}),this.off(ze.WS_CLOSED,v),this.off(ze.WS_RECONNECTING,v),this.emit(ze.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),y);let v=()=>{m(new q(O.WS_ABORT,"type: ".concat(e))),this.off(ze.WS_CLOSED,v),this.off(ze.WS_RECONNECTING,v),this.off("res-@".concat(i),y)};this.once(ze.WS_CLOSED,v),this.once(ze.WS_RECONNECTING,v),jn(L("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==a||g||(w.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(ze.REQUEST_TIMEOUT,e,t))})}),c=null;try{c=await l}catch(p){if(this.connectionState===Zt.CLOSED||e===Be.LEAVE)throw new q(O.WS_ABORT);return!this.spec.forceWaitGatewayResponse||r?p.throw():e===Be.JOIN||e===Be.REJOIN?null:(await s(),await this.request(e,t))}if(c.isSuccess)return c.message;let u=Number(c.message.error_code||c.message.code),h=jv(u),f=new q(O.UNEXPECTED_RESPONSE,"".concat(h.desc,": ").concat(c.message.error_str),{code:u,data:c.message,desc:h.desc});return h.action==="success"?c.message:(w.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(h.desc,", action: ").concat(h.action)),u===De.ERR_TOO_MANY_BROADCASTERS?((e===Be.JOIN||e===Be.REJOIN)&&(this.initError=f,this.close()),f.throw()):h.action==="failed"?f.throw():h.action==="quit"?(this.initError=f,this.close(),f.throw()):(u===De.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=c.message.option,w.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Kn.MULTI_IP)):this.reconnect(h.action,Kn.SERVER_ERROR),e===Be.JOIN||e===Be.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new fe(r=>{let n=i=>{(!t||t(i))&&(this.off(e,n),r(i))};this.on(e,n)})}uploadWRTCStats(e){if(!this.store.sessionId)return void w.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));let t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(Mv.WRTC_STATS,t)}upload(e,t){let r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch{let n=L("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>n&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Zt.CONNECTED)return;let i=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(i._type,i._message)},L("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){let r={_type:e,_message:t};this.websocket.sendMessage(r)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new fe((r,n)=>{this.once(ze.WS_CONNECTED,()=>r(this.joinResponse)),this.once(ze.WS_CLOSED,()=>n(this.initError||new q(O.WS_ABORT))),this.connectionState=Zt.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||Bt.LEAVE,this.connectionState=Zt.CLOSED,w.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(ze.ABORT_P2P_EXECUTION);let e=await Yn(this,ze.REQUEST_JOIN_INFO),t=await this.request(Be.JOIN,e);if(!t)return this.emit(ze.REPORT_JOIN_GATEWAY,b_.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(ze.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new q(O.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");let e=Lv(this,ze.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;let t=await this.request(Be.REJOIN,e);return!!t&&(this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach(r=>{this.emit(pt.ON_USER_ONLINE,{uid:r.uid}),r.audio&&this.emit(pt.ON_ADD_AUDIO_STREAM,{uid:r.uid,uint_id:r.uint_id,audio:!0,ssrcId:r.audio_ssrc}),r.video&&this.emit(pt.ON_ADD_VIDEO_STREAM,{uid:r.uid,uint_id:r.uint_id,video:!0,ssrcId:r.video_ssrc}),r.audio_mute?this.emit(pt.MUTE_AUDIO,{uid:r.uid}):this.emit(pt.UNMUTE_AUDIO,{uid:r.uid}),r.video_mute?this.emit(pt.MUTE_VIDEO,{uid:r.uid}):this.emit(pt.UNMUTE_VIDEO,{uid:r.uid}),r.audio_enable_local?this.emit(pt.ENABLE_LOCAL_AUDIO,{uid:r.uid}):this.emit(pt.DISABLE_LOCAL_AUDIO,{uid:r.uid}),r.video_enable_local?this.emit(pt.ENABLE_LOCAL_VIDEO,{uid:r.uid}):this.emit(pt.DISABLE_LOCAL_VIDEO,{uid:r.uid}),r.audio||r.video||this.emit(pt.ON_REMOVE_STREAM,{uid:r.uid,uint_id:r.uint_id})}),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){w.debug("[".concat(this.clientId,"] receive notification: "),e);let t=jv(e.code);if(t.action!=="success"){if(t.action!=="failed")return t.action==="quit"?(t.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Bt.UID_BANNED),void this.close()):void this.reconnect(t.action,Kn.SERVER_ERROR);w.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;let e=L("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(w.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>L("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Kn.TIMEOUT):this.request(Be.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;let r=Date.now()-t;this.rttRolling.add(r),L("REPORT_STATS")&&this.send(Be.PING_BACK,{pingpongElapse:r})}).catch(r=>{})}handleWsInflateData(){let{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();e!==0&&t!==0&&this.upload(Mv.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(Ke.RECONNECT_WAITTING_FINISH,e=>{this.emit(ze.WS_RECONNECT_WAITTING_FINISH,e)}),this.websocket.on(Ke.RECONNECT_CREATE_CONNECTION,e=>{this.emit(ze.WS_RECONNECT_CREATE_CONNECTION,e)}),this.websocket.on(Ke.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Ke.CLOSED,()=>{this.connectionState=Zt.CLOSED}),this.websocket.on(Ke.FAILED,()=>{this._disconnectedReason=Bt.NETWORK_ERROR,this.connectionState=Zt.CLOSED}),this.websocket.on(Ke.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===Zt.CONNECTED?this.connectionState=Zt.RECONNECTING:this.connectionState=Zt.CONNECTING}),this.websocket.on(Ke.WILL_RECONNECT,(e,t,r)=>{let n=Lv(this,ze.IS_P2P_DISCONNECTED),i=n||e!=="retry";n&&e==="retry"&&(w.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e="tryNext",t=b_.P2P_DISCONNECTED),i&&(w.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(e)),this.emit(ze.REPORT_JOIN_GATEWAY,t||b_.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(ze.DISCONNECT_P2P)),r(e)}),this.websocket.on(Ke.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(e=>{w.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",Kn.SERVER_ERROR)}):this.join().catch(e=>{if(this.emit(ze.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof q){if(e.code===O.UNEXPECTED_RESPONSE&&e.data.code===De.ERR_NO_AUTHORIZED)return this.initError=new q(O.CAN_NOT_GET_GATEWAY_SERVER,"AgoraRTCError CAN_NOT_GET_GATEWAY_SERVER: dynamic key expired"),w.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Kn.SERVER_ERROR);w.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Kn.SERVER_ERROR):(this.initError=e,this.close())}})}),this.websocket.on(Ke.REQUEST_NEW_URLS,(e,t)=>{Yn(this,ze.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)}),this.websocket.on(Ke.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(pt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(tte.PRE_CONNECT_PC,()=>{this.emit(ze.PRE_CONNECT_PC)})}},$r=function(e){return e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",e}({});function s6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s6(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hp(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(L("TURN_DOMAIN")):(w.info("Unidentified as ip: ".concat(e,", use as host")),e)}function OL(e,t){e.addresses||(e.addresses=[]);let r=function(s,l){if(L("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return s.map(h=>{let{ip:f,port:p}=h;return{address:"".concat(f,":").concat(p)}});let c=L("GATEWAY_DOMAINS"),u=c[1]&&ge(l).call(l,c[1])?1:0;return s.map(h=>{let{domain_prefix:f,port:p,ip:m}=h;if(f)return{address:"".concat(f,".").concat(c[u++%c.length],":").concat(p)};let g=/^[\.\:\d]+$/.test(m),y=g?"".concat(m.replace(/[^\d]/g,"-"),".").concat(c[u++%c.length],":").concat(p):"".concat(m,":").concat(p);return g||w.info("Unidentified as ip: ".concat(m,", use as host")),{ip:m,port:p,address:y}})}(e.addresses,t),n=Array.isArray(e.detail)&&e.detail[18];if(n&&typeof n=="string"){let s=n.split(";");for(let l=0;l<s.length;l++){var i;let c=Ri(i=s[l]).call(i);r[l]&&c&&(r[l].ip6=c)}}let o=e.detail&&e.detail.candidate,a;if(o){let[s,l]=o.split(":");s&&l&&(a={port:Number(l),ip:s,address:"".concat(s,":").concat(l)})}return{gatewayAddrs:r,apGatewayAddress:a,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function No(e){return typeof e=="number"?e:e.exact||e.ideal||e.max||e.min||0}function l6(e){let t=e._encoderConfig;if(!t)return{};let r={resolution:t.width&&t.height?"".concat(No(t.width),"x").concat(No(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return typeof t.frameRate=="number"?(r.maxFrameRate=t.frameRate,r.minFrameRate=t.frameRate):t.frameRate&&(r.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,r.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),r}function c6(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function Fv(e,t){let r,n,i;switch(t){case $r.CHOOSE_SERVER:n=4096,i="choose server";break;case $r.CLOUD_PROXY:n=1048576,i="proxy";break;case $r.CLOUD_PROXY_5:n=4194304,i="proxy5";break;case $r.CLOUD_PROXY_FALLBACK:n=4194310,i="proxy fallback";break;default:throw new q(O.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach(o=>{o.buffer&&o.buffer.flag===n&&(r={code:o.buffer.code,addresses:(o.buffer.edges_services||[]).map(a=>lE(lE({},a),{},{ticket:o.buffer.cert})),server_ts:e.enter_ts,uid:o.buffer.uid,cid:o.buffer.cid,cname:o.buffer.cname,detail:lE(lE({},o.buffer.detail),e.detail),flag:o.buffer.flag,opid:e.opid,cert:o.buffer.cert})}),!r)throw new q(O.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return r}async function nte(e,t){return await fe.all(e.addresses.map(async r=>({address:hp(r.ip),tcpport:r.port,udpport:r.port,username:t&&L("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():zn.username,password:t&&L("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await lk(t.toString()):zn.password})))}function pk(e,t){let r=t.getMediaStreamTrack(!0).getSettings(),n=t.videoHeight||r.height,i=t.videoWidth||r.width;return n&&i?Math.max(Math.min(n,i)/Math.min(No(e.height),No(e.width)),1):(w.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function Ru(e){let{candidateType:t,relayProtocol:r,type:n,address:i,port:o,protocol:a}=e;return n==="local-candidate"?{candidateType:t,relayProtocol:r,protocol:a}:{candidateType:t,relayProtocol:r,address:i,port:o,protocol:a}}var Ja,eBe=Ur(Qee),tBe=Rs("Array").values,rBe=Kl,nBe=li,iBe=Gi,oBe=tBe,TI=Array.prototype,aBe={DOMTokenList:!0,NodeList:!0},sBe=function(e){var t=e.values;return e===TI||iBe(TI,e)&&t===TI.values||nBe(aBe,rBe(e))?oBe:t},Cc=Ur(sBe),u6=$a,lBe=Jr,cBe=Zn,uBe=nn,CI=JT,dBe=L0,hBe=HT,fBe=Wl,pBe=zT,xf=Object.assign,d6=Object.defineProperty,mBe=lBe([].concat),gBe=!xf||uBe(function(){if(u6&&xf({b:1},xf(d6({},"a",{enumerable:!0,get:function(){d6(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(i){t[i]=i}),xf({},e)[r]!=7||CI(xf({},t)).join("")!=n})?function(e,t){for(var r=fBe(e),n=arguments.length,i=1,o=dBe.f,a=hBe.f;n>i;)for(var s,l=pBe(arguments[i++]),c=o?mBe(CI(l),o(l)):CI(l),u=c.length,h=0;u>h;)s=c[h++],u6&&!cBe(a,l,s)||(r[s]=l[s]);return r}:xf,yBe=bo,vBe=fQ,bBe=dd,EBe=Zn,_Be=Wl,wBe=function(e,t,r,n){try{return n?t(yBe(r)[0],r[1]):t(r)}catch(i){vBe(e,"throw",i)}},SBe=hQ,TBe=eC,CBe=Fc,h6=nC,xBe=X2,RBe=QT,f6=Array,Zh=Jr,xI=2147483647,IBe=/[^\0-\u007E]/,ite=/[.\u3002\uFF0E\uFF61]/g,p6="Overflow: input needs wider integers to process",m6=RangeError,NBe=Zh(ite.exec),fp=Math.floor,RI=String.fromCharCode,g6=Zh("".charCodeAt),ote=Zh([].join),au=Zh([].push),ABe=Zh("".replace),OBe=Zh("".split),kBe=Zh("".toLowerCase),y6=function(e){return e+22+75*(e<26)},PBe=function(e,t,r){var n=0;for(e=r?fp(e/700):e>>1,e+=fp(e/t);e>455;)e=fp(e/35),n+=36;return fp(n+36*e/(e+38))},DBe=function(e){var t=[];e=function(v){for(var b=[],_=0,S=v.length;_<S;){var I=g6(v,_++);if(I>=55296&&I<=56319&&_<S){var A=g6(v,_++);(64512&A)==56320?au(b,((1023&I)<<10)+(1023&A)+65536):(au(b,I),_--)}else au(b,I)}return b}(e);var r,n,i=e.length,o=128,a=0,s=72;for(r=0;r<e.length;r++)(n=e[r])<128&&au(t,RI(n));var l=t.length,c=l;for(l&&au(t,"-");c<i;){var u=xI;for(r=0;r<e.length;r++)(n=e[r])>=o&&n<u&&(u=n);var h=c+1;if(u-o>fp((xI-a)/h))throw m6(p6);for(a+=(u-o)*h,o=u,r=0;r<e.length;r++){if((n=e[r])<o&&++a>xI)throw m6(p6);if(n==o){for(var f=a,p=36;;){var m=p<=s?1:p>=s+26?26:p-s;if(f<m)break;var g=f-m,y=36-m;au(t,RI(y6(m+g%y))),f=fp(g/y),p+=36}au(t,RI(y6(f))),s=PBe(a,h,c==l),a=0,c++}}a++,o++}return ote(t,"")},LBe=tr,kL=$a,MBe=yL,PL=Jn,v6=dd,Is=Jr,cE=fd,Qa=ZT,jBe=Z2,mk=li,DL=gBe,Rf=function(e){var t=_Be(e),r=TBe(this),n=arguments.length,i=n>1?arguments[1]:void 0,o=i!==void 0;o&&(i=bBe(i,n>2?arguments[2]:void 0));var a,s,l,c,u,h,f=RBe(t),p=0;if(!f||this===f6&&SBe(f))for(a=CBe(t),s=r?new this(a):f6(a);a>p;p++)h=o?i(t[p],p):t[p],h6(s,p,h);else for(u=(c=xBe(t,f)).next,s=r?new this:[];!(l=EBe(u,c)).done;p++)h=o?wBe(c,i,[l.value,p],!0):l.value,h6(s,p,h);return s.length=p,s},ks=lL,UBe=sL.codeAt,FBe=function(e){var t,r,n=[],i=OBe(ABe(kBe(e),ite,"."),".");for(t=0;t<i.length;t++)r=i[t],au(n,NBe(IBe,r)?"xn--"+DBe(r):r);return ote(n,".")},oc=Ha,VBe=pd,BBe=tC,ate=iFe,ste=Qh,$Be=ste.set,sS=ste.getterFor("URL"),HBe=ate.URLSearchParams,zBe=ate.getState,Dg=PL.URL,gk=PL.TypeError,uE=PL.parseInt,GBe=Math.floor,b6=Math.pow,as=Is("".charAt),Ms=Is(/./.exec),ey=Is([].join),WBe=Is(1 .toString),KBe=Is([].pop),If=Is([].push),II=Is("".replace),qBe=Is([].shift),YBe=Is("".split),ty=Is("".slice),E_=Is("".toLowerCase),XBe=Is([].unshift),NI="Invalid scheme",Lg="Invalid host",E6="Invalid port",lte=/[a-z]/i,JBe=/[\d+-.a-z]/i,AI=/\d/,QBe=/^0x/i,ZBe=/^[0-7]+$/,e6e=/^\d+$/,_6=/^[\da-f]+$/i,t6e=/[\0\t\n\r #%/:<>?@[\\\]^|]/,r6e=/[\0\t\n\r #/:<>?@[\\\]^|]/,n6e=/^[\u0000-\u0020]+/,i6e=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,o6e=/[\t\n\r]/g,Mg=function(e){var t,r,n,i;if(typeof e=="number"){for(t=[],r=0;r<4;r++)XBe(t,e%256),e=GBe(e/256);return ey(t,".")}if(typeof e=="object"){for(t="",n=function(o){for(var a=null,s=1,l=null,c=0,u=0;u<8;u++)o[u]!==0?(c>s&&(a=l,s=c),l=null,c=0):(l===null&&(l=u),++c);return c>s&&(a=l,s=c),a}(e),r=0;r<8;r++)i&&e[r]===0||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=WBe(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},__={},cte=DL({},__,{" ":1,'"':1,"<":1,">":1,"`":1}),ute=DL({},cte,{"#":1,"?":1,"{":1,"}":1}),OI=DL({},ute,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Qc=function(e,t){var r=UBe(e,0);return r>32&&r<127&&!mk(t,e)?e:encodeURIComponent(e)},dE={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ry=function(e,t){var r;return e.length==2&&Ms(lte,as(e,0))&&((r=as(e,1))==":"||!t&&r=="|")},w6=function(e){var t;return e.length>1&&ry(ty(e,0,2))&&(e.length==2||(t=as(e,2))==="/"||t==="\\"||t==="?"||t==="#")},a6e=function(e){return e==="."||E_(e)==="%2e"},kI={},S6={},PI={},T6={},C6={},DI={},x6={},R6={},hE={},fE={},LI={},MI={},jI={},UI={},I6={},FI={},Nf={},ul={},N6={},Sd={},tc={},LL=function(e,t,r){var n,i,o,a=oc(e);if(t){if(i=this.parse(a))throw gk(i);this.searchParams=null}else{if(r!==void 0&&(n=new LL(r,!0)),i=this.parse(a,null,n))throw gk(i);(o=zBe(new HBe)).bindURL(this),this.searchParams=o}};LL.prototype={type:"URL",parse:function(e,t,r){var n,i,o,a,s,l=this,c=t||kI,u=0,h="",f=!1,p=!1,m=!1;for(e=oc(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=II(e,n6e,""),e=II(e,i6e,"$1")),e=II(e,o6e,""),n=Rf(e);u<=n.length;){switch(i=n[u],c){case kI:if(!i||!Ms(lte,i)){if(t)return NI;c=PI;continue}h+=E_(i),c=S6;break;case S6:if(i&&(Ms(JBe,i)||i=="+"||i=="-"||i=="."))h+=E_(i);else{if(i!=":"){if(t)return NI;h="",c=PI,u=0;continue}if(t&&(l.isSpecial()!=mk(dE,h)||h=="file"&&(l.includesCredentials()||l.port!==null)||l.scheme=="file"&&!l.host))return;if(l.scheme=h,t)return void(l.isSpecial()&&dE[l.scheme]==l.port&&(l.port=null));h="",l.scheme=="file"?c=UI:l.isSpecial()&&r&&r.scheme==l.scheme?c=T6:l.isSpecial()?c=R6:n[u+1]=="/"?(c=C6,u++):(l.cannotBeABaseURL=!0,If(l.path,""),c=N6)}break;case PI:if(!r||r.cannotBeABaseURL&&i!="#")return NI;if(r.cannotBeABaseURL&&i=="#"){l.scheme=r.scheme,l.path=ks(r.path),l.query=r.query,l.fragment="",l.cannotBeABaseURL=!0,c=tc;break}c=r.scheme=="file"?UI:DI;continue;case T6:if(i!="/"||n[u+1]!="/"){c=DI;continue}c=hE,u++;break;case C6:if(i=="/"){c=fE;break}c=ul;continue;case DI:if(l.scheme=r.scheme,i==Ja)l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=ks(r.path),l.query=r.query;else if(i=="/"||i=="\\"&&l.isSpecial())c=x6;else if(i=="?")l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=ks(r.path),l.query="",c=Sd;else{if(i!="#"){l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=ks(r.path),l.path.length--,c=ul;continue}l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=ks(r.path),l.query=r.query,l.fragment="",c=tc}break;case x6:if(!l.isSpecial()||i!="/"&&i!="\\"){if(i!="/"){l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,c=ul;continue}c=fE}else c=hE;break;case R6:if(c=hE,i!="/"||as(h,u+1)!="/")continue;u++;break;case hE:if(i!="/"&&i!="\\"){c=fE;continue}break;case fE:if(i=="@"){f&&(h="%40"+h),f=!0,o=Rf(h);for(var g=0;g<o.length;g++){var y=o[g];if(y!=":"||m){var v=Qc(y,OI);m?l.password+=v:l.username+=v}else m=!0}h=""}else if(i==Ja||i=="/"||i=="?"||i=="#"||i=="\\"&&l.isSpecial()){if(f&&h=="")return"Invalid authority";u-=Rf(h).length+1,h="",c=LI}else h+=i;break;case LI:case MI:if(t&&l.scheme=="file"){c=FI;continue}if(i!=":"||p){if(i==Ja||i=="/"||i=="?"||i=="#"||i=="\\"&&l.isSpecial()){if(l.isSpecial()&&h=="")return Lg;if(t&&h==""&&(l.includesCredentials()||l.port!==null))return;if(a=l.parseHost(h))return a;if(h="",c=Nf,t)return;continue}i=="["?p=!0:i=="]"&&(p=!1),h+=i}else{if(h=="")return Lg;if(a=l.parseHost(h))return a;if(h="",c=jI,t==MI)return}break;case jI:if(!Ms(AI,i)){if(i==Ja||i=="/"||i=="?"||i=="#"||i=="\\"&&l.isSpecial()||t){if(h!=""){var b=uE(h,10);if(b>65535)return E6;l.port=l.isSpecial()&&b===dE[l.scheme]?null:b,h=""}if(t)return;c=Nf;continue}return E6}h+=i;break;case UI:if(l.scheme="file",i=="/"||i=="\\")c=I6;else{if(!r||r.scheme!="file"){c=ul;continue}if(i==Ja)l.host=r.host,l.path=ks(r.path),l.query=r.query;else if(i=="?")l.host=r.host,l.path=ks(r.path),l.query="",c=Sd;else{if(i!="#"){w6(ey(ks(n,u),""))||(l.host=r.host,l.path=ks(r.path),l.shortenPath()),c=ul;continue}l.host=r.host,l.path=ks(r.path),l.query=r.query,l.fragment="",c=tc}}break;case I6:if(i=="/"||i=="\\"){c=FI;break}r&&r.scheme=="file"&&!w6(ey(ks(n,u),""))&&(ry(r.path[0],!0)?If(l.path,r.path[0]):l.host=r.host),c=ul;continue;case FI:if(i==Ja||i=="/"||i=="\\"||i=="?"||i=="#"){if(!t&&ry(h))c=ul;else if(h==""){if(l.host="",t)return;c=Nf}else{if(a=l.parseHost(h))return a;if(l.host=="localhost"&&(l.host=""),t)return;h="",c=Nf}continue}h+=i;break;case Nf:if(l.isSpecial()){if(c=ul,i!="/"&&i!="\\")continue}else if(t||i!="?")if(t||i!="#"){if(i!=Ja&&(c=ul,i!="/"))continue}else l.fragment="",c=tc;else l.query="",c=Sd;break;case ul:if(i==Ja||i=="/"||i=="\\"&&l.isSpecial()||!t&&(i=="?"||i=="#")){if((s=E_(s=h))===".."||s==="%2e."||s===".%2e"||s==="%2e%2e"?(l.shortenPath(),i=="/"||i=="\\"&&l.isSpecial()||If(l.path,"")):a6e(h)?i=="/"||i=="\\"&&l.isSpecial()||If(l.path,""):(l.scheme=="file"&&!l.path.length&&ry(h)&&(l.host&&(l.host=""),h=as(h,0)+":"),If(l.path,h)),h="",l.scheme=="file"&&(i==Ja||i=="?"||i=="#"))for(;l.path.length>1&&l.path[0]==="";)qBe(l.path);i=="?"?(l.query="",c=Sd):i=="#"&&(l.fragment="",c=tc)}else h+=Qc(i,ute);break;case N6:i=="?"?(l.query="",c=Sd):i=="#"?(l.fragment="",c=tc):i!=Ja&&(l.path[0]+=Qc(i,__));break;case Sd:t||i!="#"?i!=Ja&&(i=="'"&&l.isSpecial()?l.query+="%27":l.query+=i=="#"?"%23":Qc(i,__)):(l.fragment="",c=tc);break;case tc:i!=Ja&&(l.fragment+=Qc(i,cte))}u++}},parseHost:function(e){var t,r,n;if(as(e,0)=="["){if(as(e,e.length-1)!="]"||(t=function(i){var o,a,s,l,c,u,h,f=[0,0,0,0,0,0,0,0],p=0,m=null,g=0,y=function(){return as(i,g)};if(y()==":"){if(as(i,1)!=":")return;g+=2,m=++p}for(;y();){if(p==8)return;if(y()!=":"){for(o=a=0;a<4&&Ms(_6,y());)o=16*o+uE(y(),16),g++,a++;if(y()=="."){if(a==0||(g-=a,p>6))return;for(s=0;y();){if(l=null,s>0){if(!(y()=="."&&s<4))return;g++}if(!Ms(AI,y()))return;for(;Ms(AI,y());){if(c=uE(y(),10),l===null)l=c;else{if(l==0)return;l=10*l+c}if(l>255)return;g++}f[p]=256*f[p]+l,++s!=2&&s!=4||p++}if(s!=4)return;break}if(y()==":"){if(g++,!y())return}else if(y())return;f[p++]=o}else{if(m!==null)return;g++,m=++p}}if(m!==null)for(u=p-m,p=7;p!=0&&u>0;)h=f[p],f[p--]=f[m+u-1],f[m+--u]=h;else if(p!=8)return;return f}(ty(e,1,-1)),!t))return Lg;this.host=t}else if(this.isSpecial()){if(e=FBe(e),Ms(t6e,e)||(t=function(i){var o,a,s,l,c,u,h,f=YBe(i,".");if(f.length&&f[f.length-1]==""&&f.length--,(o=f.length)>4)return i;for(a=[],s=0;s<o;s++){if((l=f[s])=="")return i;if(c=10,l.length>1&&as(l,0)=="0"&&(c=Ms(QBe,l)?16:8,l=ty(l,c==8?1:2)),l==="")u=0;else{if(!Ms(c==10?e6e:c==8?ZBe:_6,l))return i;u=uE(l,c)}If(a,u)}for(s=0;s<o;s++)if(u=a[s],s==o-1){if(u>=b6(256,5-o))return null}else if(u>255)return null;for(h=KBe(a),s=0;s<a.length;s++)h+=a[s]*b6(256,3-s);return h}(e),t===null))return Lg;this.host=t}else{if(Ms(r6e,e))return Lg;for(t="",r=Rf(e),n=0;n<r.length;n++)t+=Qc(r[n],__);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return mk(dE,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||this.scheme=="file"&&t==1&&ry(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,i=e.host,o=e.port,a=e.path,s=e.query,l=e.fragment,c=t+":";return i!==null?(c+="//",e.includesCredentials()&&(c+=r+(n?":"+n:"")+"@"),c+=Mg(i),o!==null&&(c+=":"+o)):t=="file"&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+ey(a,"/"):"",s!==null&&(c+="?"+s),l!==null&&(c+="#"+l),c},setHref:function(e){var t=this.parse(e);if(t)throw gk(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e=="blob")try{return new um(e.path[0]).origin}catch{return"null"}return e!="file"&&this.isSpecial()?e+"://"+Mg(this.host)+(t!==null?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(oc(e)+":",kI)},getUsername:function(){return this.username},setUsername:function(e){var t=Rf(oc(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Qc(t[r],OI)}},getPassword:function(){return this.password},setPassword:function(e){var t=Rf(oc(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Qc(t[r],OI)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?Mg(e):Mg(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,LI)},getHostname:function(){var e=this.host;return e===null?"":Mg(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,MI)},getPort:function(){var e=this.port;return e===null?"":oc(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||((e=oc(e))==""?this.port=null:this.parse(e,jI))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+ey(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Nf))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){(e=oc(e))==""?this.query=null:(as(e,0)=="?"&&(e=ty(e,1)),this.query="",this.parse(e,Sd)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){(e=oc(e))!=""?(as(e,0)=="#"&&(e=ty(e,1)),this.fragment="",this.parse(e,tc)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var um=function(e){var t=jBe(this,So),r=BBe(arguments.length,1)>1?arguments[1]:void 0,n=$Be(t,new LL(e,!1,r));kL||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},So=um.prototype,Za=function(e,t){return{get:function(){return sS(this)[e]()},set:t&&function(r){return sS(this)[t](r)},configurable:!0,enumerable:!0}};kL&&(Qa(So,"href",Za("serialize","setHref")),Qa(So,"origin",Za("getOrigin")),Qa(So,"protocol",Za("getProtocol","setProtocol")),Qa(So,"username",Za("getUsername","setUsername")),Qa(So,"password",Za("getPassword","setPassword")),Qa(So,"host",Za("getHost","setHost")),Qa(So,"hostname",Za("getHostname","setHostname")),Qa(So,"port",Za("getPort","setPort")),Qa(So,"pathname",Za("getPathname","setPathname")),Qa(So,"search",Za("getSearch","setSearch")),Qa(So,"searchParams",Za("getSearchParams")),Qa(So,"hash",Za("getHash","setHash"))),cE(So,"toJSON",function(){return sS(this).serialize()},{enumerable:!0}),cE(So,"toString",function(){return sS(this).serialize()},{enumerable:!0}),Dg&&(VI=Dg.createObjectURL,BI=Dg.revokeObjectURL,VI&&cE(um,"createObjectURL",v6(VI,Dg)),BI&&cE(um,"revokeObjectURL",v6(BI,Dg)));var VI,BI;VBe(um,"URL"),LBe({global:!0,constructor:!0,forced:!MBe,sham:!kL},{URL:um});var s6e=tr,l6e=nn,c6e=tC,A6=Ha,u6e=yL,O6=Po("URL");s6e({target:"URL",stat:!0,forced:!(u6e&&l6e(function(){O6.canParse()}))},{canParse:function(e){var t=c6e(arguments.length,1),r=A6(e),n=t<2||arguments[1]===void 0?void 0:A6(arguments[1]);try{return!!new O6(r,n)}catch{return!1}}});var k6=Ur(nl.URL),An={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function Ct(){return An}function dte(){return"setSinkId"in HTMLAudioElement.prototype&&(!L("RESTRICTION_SET_PLAYBACK_DEVICE")||(Bu()||Pee())&&!SL())}function P6(){return!An.supportUnifiedPlan||L("CHROME_FORCE_PLAN_B")&&ed()}var Dn=function(e){return e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change",e}({});function Af(e,t,r){return{sampleRate:e,stereo:t,bitrate:r}}function Et(e,t,r,n,i){return{width:e,height:t,frameRate:r,bitrateMin:n,bitrateMax:i}}function es(e,t,r,n,i){return{width:{max:e},height:{max:t},frameRate:r,bitrateMin:n,bitrateMax:i}}function $I(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}var d6e={"90p":Et(160,90),"90p_1":Et(160,90),"120p":Et(160,120,15,30,65),"120p_1":Et(160,120,15,30,65),"120p_3":Et(120,120,15,30,50),"120p_4":Et(212,120),"180p":Et(320,180,15,30,140),"180p_1":Et(320,180,15,30,140),"180p_3":Et(180,180,15,30,100),"180p_4":Et(240,180,15,30,120),"240p":Et(320,240,15,40,200),"240p_1":Et(320,240,15,40,200),"240p_3":Et(240,240,15,40,140),"240p_4":Et(424,240,15,40,220),"360p":Et(640,360,15,80,400),"360p_1":Et(640,360,15,80,400),"360p_3":Et(360,360,15,80,260),"360p_4":Et(640,360,30,80,600),"360p_6":Et(360,360,30,80,400),"360p_7":Et(480,360,15,80,320),"360p_8":Et(480,360,30,80,490),"360p_9":Et(640,360,15,80,800),"360p_10":Et(640,360,24,80,800),"360p_11":Et(640,360,24,80,1e3),"480p":Et(640,480,15,100,500),"480p_1":Et(640,480,15,100,500),"480p_2":Et(640,480,30,100,1e3),"480p_3":Et(480,480,15,100,400),"480p_4":Et(640,480,30,100,750),"480p_6":Et(480,480,30,100,600),"480p_8":Et(848,480,15,100,610),"480p_9":Et(848,480,30,100,930),"480p_10":Et(640,480,10,100,400),"720p":Et(1280,720,15,120,1130),"720p_auto":Et(1280,720,30,900,3e3),"720p_1":Et(1280,720,15,120,1130),"720p_2":Et(1280,720,30,120,2e3),"720p_3":Et(1280,720,30,120,1710),"720p_5":Et(960,720,15,120,910),"720p_6":Et(960,720,30,120,1380),"1080p":Et(1920,1080,15,120,2080),"1080p_1":Et(1920,1080,15,120,2080),"1080p_2":Et(1920,1080,30,120,3e3),"1080p_3":Et(1920,1080,30,120,3150),"1080p_5":Et(1920,1080,60,120,4780),"1440p":Et(2560,1440,30,120,4850),"1440p_1":Et(2560,1440,30,120,4850),"1440p_2":Et(2560,1440,60,120,7350),"4k":Et(3840,2160,30,120,8910),"4k_1":Et(3840,2160,30,120,8910),"4k_3":Et(3840,2160,60,120,13500)},h6e={"480p":es(640,480,5),"480p_1":es(640,480,5),"480p_2":es(640,480,30),"480p_3":es(640,480,15),"720p":es(1280,720,5),"720p_auto":Et(1280,720,30,900,3e3),"720p_1":es(1280,720,5),"720p_2":es(1280,720,30),"720p_3":es(1280,720,15),"1080p":es(1920,1080,5),"1080p_1":es(1920,1080,5),"1080p_2":es(1920,1080,30),"1080p_3":es(1920,1080,15)},f6e={"1SL1TL":$I(1,1),"3SL3TL":$I(3,3),"2SL3TL":$I(2,3)};function Nl(e){return e||(e="480p_1"),typeof e=="string"?Object.assign({},d6e[e]):e}function HI(e){return typeof e=="string"?Object.assign({},h6e[e]):e}function pE(e){return typeof e=="string"?Object.assign({},f6e[e]):e}var p6e={speech_low_quality:Af(16e3,!1),speech_standard:Af(32e3,!1,18),music_standard:Af(48e3,!1),standard_stereo:Af(48e3,!0,56),high_quality:Af(48e3,!1,128),high_quality_stereo:Af(48e3,!0,192)};function lS(e){return typeof e=="string"?Object.assign({},p6e[e]):e}var Uf=[];function D6(e){return sn(e,"mediaSource",["screen","window","application"]),!0}var be=function(e){return e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track",e}({}),cr=function(e){return e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream",e}({}),dm=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),m6e=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),g6e=function(e){return e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY",e}({}),hh=function(e){return e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received",e.TRACK_UPDATED="track-updated",e}({}),Ym=function(e){return e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed",e}({}),kp=function(e){return e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed",e}({}),Xm=function(e){return e.AUDIO="audio",e.VIDEO="video",e.DATA="data",e}({}),Ko=function(e){return e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source",e}({});(function(e){e.UPDATE_TRACK_SOURCE="update-track-source"})({});var yk={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},vk={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},hte={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},y6e={uplinkNetworkQuality:0,downlinkNetworkQuality:0},fte={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},Bi=function(e){return e.ON_TRACK="on_track",e.ON_NODE="on_node",e}({}),ia=function(e){return e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints",e}({}),jg=function(e){return e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND",e}({}),Jd=function(e){return e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",e}({}),Ci=function(e){return e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata",e}({}),dl=function(e){return e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen",e}({}),zI={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370},w_=function(e){return e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error",e}({});function _t(e,t,r,n,i){var o,a,s={};return Object.keys(n).forEach(function(l){s[l]=n[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=Zs(o=eBe(a=r.slice()).call(a)).call(o,function(l,c){return c(e,t,l)||l},s),i&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}function Q(e,t,r){return(t=function(n){var i=function(o,a){if(typeof o!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var l=s.call(o,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(n);return typeof i=="symbol"?i:i+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L6(Object(r),!0).forEach(function(n){Q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var pte=class extends _r{set _mediaStreamTrack(e){e!==this.mediaStreamTrack&&(this.safeEmit(hh.TRACK_UPDATED,e),this.mediaStreamTrack=e)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(e,t){super(),Q(this,"trackMediaType",void 0),Q(this,"_ID",void 0),Q(this,"_rtpTransceiver",void 0),Q(this,"_lowRtpTransceiver",void 0),Q(this,"_hints",[]),Q(this,"_isClosed",!1),Q(this,"_originMediaStreamTrack",void 0),Q(this,"mediaStreamTrack",void 0),Q(this,"_external",{}),this._ID=t||er(8,"track-"),this._originMediaStreamTrack=e,this.mediaStreamTrack=e,function(r){ge(Uf).call(Uf,r)||Uf.push(r)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){return e||td(()=>{var t;Te.reportApiInvoke(null,{name:en.GET_MEDIA_STREAM_TRACK,options:[],tag:xr.TRACER}).onSuccess(((t=this._mediaStreamTrack)===null||t===void 0?void 0:t.label)||"")},this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===dm.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){let t=Uf.indexOf(e);t!==-1&&Uf.splice(t,1)}(this),this.emit(Ym.CLOSED),this.removeAllListeners(hh.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===dm.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(hh.TRANSCEIVER_UPDATED,e,t)}},pp=class extends pte{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),Q(this,"_enabled",!0),Q(this,"_muted",!1),Q(this,"_isExternalTrack",!1),Q(this,"_isClosed",!1),Q(this,"_enabledMutex",void 0),Q(this,"processor",void 0),Q(this,"_processorContext",void 0),Q(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new ai("".concat(this.getTrackId())),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return(e=(t=this._originMediaStreamTrack)===null||t===void 0?void 0:t.label)!==null&&e!==void 0?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,w.debug("[".concat(this.getTrackId(),"] close")),this.emit(be.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=r,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Jt(this,be.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){w.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Ym.TRACK_ENDED)}stateCheck(e,t){if(w.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),mc(t,e),this._enabled&&this._muted&&e==="enabled"&&t===!1)throw new J(O.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",w);if(!this._enabled&&!this._muted&&e==="muted"&&t===!0)throw new J(O.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",w)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():fe.resolve([])}},M6=window.AudioContext||window.webkitAudioContext,Fo=null,Ht=new class extends _r{constructor(){super(...arguments),Q(this,"prevState",void 0),Q(this,"curState",void 0),Q(this,"currentTime",void 0),Q(this,"currentTimeStuckAt",void 0),Q(this,"interruptDetectorTrack",void 0),Q(this,"onLocalAudioTrackMute",()=>{w.info("ios15-interruption-start"),this.emit(Dn.IOS_15_16_INTERRUPTION_START)}),Q(this,"onLocalAudioTrackUnmute",async()=>{w.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?w.info("ios15-interruption-end-canceled"):(Fo&&await Fo.suspend(),this.emit(Dn.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(e){w.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){w.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function Jm(){if(!Fo){if(function(){if(!M6)return void w.error("your browser is not support web audio");w.info("create audio context");let e=hr({},L("WEBAUDIO_INIT_OPTIONS"));w.debug("audio context init option:",JSON.stringify(e)),Fo=new M6(e),Ht.curState=Fo.state,Fo.onstatechange=()=>{Ht.prevState=Ht.curState,Ht.curState=Fo?Fo.state:void 0;let{prevState:t,curState:r}=Ht,n=r==="running",i=r==="interrupted",o=t==="running",a=t==="suspended",s=t==="interrupted",l=St().osVersion;(Vi()||ys())&&o&&i&&(w.info("ios".concat(l,"-interruption-start")),Ht.emit(Dn.IOS_INTERRUPTION_START)),(Vi()||ys())&&(a||s)&&n&&(w.info("ios".concat(l,"-interruption-end")),Ht.emit(Dn.IOS_INTERRUPTION_END)),t!==r&&Ht.emit(Dn.STATE_CHANGE,r,t)},setInterval(()=>{var t;let r=(t=Fo)===null||t===void 0?void 0:t.currentTime;Ht.currentTime!==r?(Ht.currentTimeStuckAt&&(w.debug("AudioContext current time resume at ".concat(r)),Ht.currentTimeStuckAt=void 0),Ht.currentTime=r):(r!==Ht.currentTimeStuckAt&&(Te.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:r},tag:xr.TRACER}).onSuccess(),w.warning("AudioContext current time stuck at ".concat(r))),Ht.currentTimeStuckAt=r)},5e3),async function(t){let r=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"],n,i=!1,o=!1,a=!1;function s(g){t.state==="running"?l(!1):Vi()||ys()?t.state==="suspended"&&(l(!0),g&&t.resume().then(c,c)):t.state!=="closed"&&(l(!0),g&&t.resume().then(c,c))}function l(g){if(i!==g){i=g;for(let y=0,v=r;y<v.length;y+=1){let b=v[y];g?window.addEventListener(b,u,{capture:!0,passive:!0}):window.removeEventListener(b,u,{capture:!0,passive:!0})}}}function c(){s(!1)}function u(){s(!0)}function h(g){if(!a)if(n.paused)if(g){let y;f(!1),a=!0;try{y=n.play(),y?y.then(p,p):(n.addEventListener("playing",p),n.addEventListener("abort",p),n.addEventListener("error",p))}catch{p()}}else f(!0);else f(!1)}function f(g){if(o!==g){o=g;for(let y=0,v=r;y<v.length;y++){let b=v[y];g?window.addEventListener(b,m,{capture:!0,passive:!0}):window.removeEventListener(b,m,{capture:!0,passive:!0})}}}function p(){n.removeEventListener("playing",p),n.removeEventListener("abort",p),n.removeEventListener("error",p),a=!1,h(!1)}function m(){h(!0)}if(Vi()){let g=t.createMediaStreamDestination(),y=document.createElement("div");y.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=y.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=g.stream,h(!0)}Ht.on(Dn.STATE_CHANGE,function(){s(!0)}),s(!1)}(Fo)}(),!Fo)throw new J(O.NOT_SUPPORTED,"can not create audio context");return Fo}return Fo}function Ld(e){if(function(){if(GI!==null)return GI;let n=Jm(),i=n.createBufferSource(),o=n.createGain(),a=n.createGain();i.connect(o),i.connect(a),i.disconnect(o);let s=!1;try{i.disconnect(o)}catch{s=!0}return i.disconnect(),GI=s,s}())return;let t=e.connect,r=e.disconnect;e.connect=(n,i,o)=>{var a;return e._inputNodes||(e._inputNodes=[]),ge(a=e._inputNodes).call(a,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,i,o)):t.call(e,n,i)),e},e.disconnect=(n,i,o)=>{r.call(e),n?aS(e._inputNodes,n):e._inputNodes=[];for(let a of e._inputNodes)t.call(e,a)}}var GI=null;function ML(e,t){let r=!1,n=1/t;if(L("DISABLE_WEBAUDIO")){let i=window.setInterval(()=>{r?window.clearInterval(i):e(performance.now()/1e3)},1e3*n)}else{let i=Jm(),o=i.createGain();o.gain.value=0,o.connect(i.destination);let a=()=>{if(r)return void(o=null);let s=i.createOscillator();s.onended=a,s.connect(o),s.start(0),s.stop(i.currentTime+n),e(i.currentTime)};a()}return()=>{r=!0}}var mte=class{constructor(){Q(this,"context",void 0),Q(this,"analyserNode",void 0),Q(this,"sourceNode",void 0),this.context=Jm(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=e,e==null||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||Vi()||ys()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;let e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{let r=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(r);for(let n=0;n<e.length;++n)e[n]=r[n]/128-1}let t=Zs(e).call(e,(r,n)=>r+n*n,0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;(e=this.sourceNode)===null||e===void 0||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,(t=this.sourceNode)===null||t===void 0||t.connect(this.analyserNode)}catch{w.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}},gte=class extends _r{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var r;(r=this.sourceNode)===null||r===void 0||r.disconnect(this.outputNode)}catch{}(t=this._processedNode)===null||t===void 0||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),Q(this,"outputNode",void 0),Q(this,"outputTrack",void 0),Q(this,"isPlayed",!1),Q(this,"sourceNode",void 0),Q(this,"context",void 0),Q(this,"audioBufferNode",void 0),Q(this,"destNode",void 0),Q(this,"audioOutputLevel",0),Q(this,"volumeLevelAnalyser",void 0),Q(this,"_processedNode",void 0),Q(this,"playNode",void 0),Q(this,"isDestroyed",!1),Q(this,"onNoAudioInput",void 0),Q(this,"isNoAudioInput",!1),Q(this,"_noAudioInputCount",0),this.context=Jm(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),Ld(this.outputNode),this.volumeLevelAnalyser=new mte}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=t=>{this.emit(Ko.ON_AUDIO_BUFFER,function(r){for(let n=0;n<r.outputBuffer.numberOfChannels;n+=1){let i=r.outputBuffer.getChannelData(n);for(let o=0;o<i.length;o+=1)i[o]=0}return r.inputBuffer}(t))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Ct().webAudioMediaStreamDest)throw new J(O.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){this.context.state!=="running"&&uC(()=>{Ht.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;Vi()||ys()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();let t=this.volumeLevelAnalyser.getAnalyserNode(),r;t.getFloatTimeDomainData?(r=new Float32Array(t.fftSize),t.getFloatTimeDomainData(r)):(r=new Uint8Array(t.fftSize),t.getByteTimeDomainData(r));let n=!1;for(let i=0;i<r.length;i++)r[i]!==0&&(n=!0);return n?(this.isNoAudioInput=!1,!0):(await jn(200),await this.checkHasAudioInput(e?e+1:1)&&n)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;(e=this.processedNode)===null||e===void 0||e.disconnect(),(t=this.sourceNode)===null||t===void 0||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?(e=this.processedNode)===null||e===void 0||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}},yte=class extends gte{get isFreeze(){return!1}constructor(e,t,r){var n;if(super(),Q(this,"sourceNode",void 0),Q(this,"track",void 0),Q(this,"clonedTrack",void 0),Q(this,"audioElement",void 0),Q(this,"isCurrentTrackCloned",!1),Q(this,"isRemoteTrack",!1),Q(this,"originVolumeLevelAnalyser",void 0),Q(this,"rebuildWebAudio",async()=>{if(w.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void w.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>w.info("resume success")),w.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();let a=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?a.stop():this.isCurrentTrackCloned=!0;let s=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(s),Ld(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();let l=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(l,this.context.currentTime),Ld(this.outputNode),this.emit(Ko.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=s,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),e.kind!=="audio")throw new J(O.UNEXPECTED_ERROR);this.track=e;let i=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(i),Ld(this.sourceNode),r){let a=r.clone();a.enabled=!0,this.clonedTrack=a,w.debug("create an unmuted track ".concat(a.id," from the original track ").concat(r.id," to get the volume"));let s=this.context.createMediaStreamSource(new MediaStream([a]));Ld(s),this.originVolumeLevelAnalyser=new mte,this.originVolumeLevelAnalyser.updateSource(s)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=i;let o=St();t&&o.os===yn.IOS&&Number((n=o.osVersion)===null||n===void 0?void 0:n.split(".")[0])<15&&(Ht.on(Dn.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(a=>{a||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;let t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),Ld(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(Ko.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),Ht.off("state-change",this.rebuildWebAudio),(e=this.originVolumeLevelAnalyser)===null||e===void 0||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){let t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),w.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));let r=this.context.createMediaStreamSource(new MediaStream([t]));Ld(r),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(r)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}};async function vte(e,t,r){let n=(o,a)=>o?typeof o!="number"?o.max||o.exact||o.ideal||o.min||a:o:a,i={audio:!!r&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:n(t.height,1080),maxWidth:n(t.width,1920)}}};return t.frameRate&&typeof t.frameRate!="number"?(i.video.mandatory.maxFrameRate=t.frameRate.max,i.video.mandatory.minFrameRate=t.frameRate.min):typeof t.frameRate=="number"&&(i.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(i)}async function v6e(e,t){let r=await bte(e.mediaSource),{sourceId:n,audio:i}=await function(o){let a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new fe((s,l)=>{let c=document.createElement("div");c.innerText="share screen",c.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");let u=document.createElement("div");u.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");let h=document.createElement("div");h.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",h.setAttribute("style","height: 12%;");let f=document.createElement("div");f.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");let p=document.createElement("div");p.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");let m=document.createElement("button");m.innerHTML="cancel",m.setAttribute("style","width: 85px;"),m.onclick=()=>{document.body.removeChild(v);let b=new Error("NotAllowedError");b.name="NotAllowedError",l(b)};let g=a,y=document.createElement("div");if(a){let b=document.createElement("input");b.setAttribute("type","checkbox");let _=document.createElement("span");b.setAttribute("style","margin-right: 6px;"),_.innerText="Share audio",b.checked=g,b.onchange=()=>{g=b.checked},y.appendChild(b),y.appendChild(_)}p.appendChild(y),p.appendChild(m),u.appendChild(h),u.appendChild(f),u.appendChild(p);let v=document.createElement("div");v.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),v.appendChild(c),v.appendChild(u),document.body.appendChild(v),o.map(b=>{if(b.id){let _=document.createElement("div");_.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let S=b.thumbnail;try{let{width:I}=S.getSize();I>1920&&(S=S.resize({width:1920}))}catch(I){throw I&&I.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),I}_.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+S.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+b.name.replace(/[\u00A0-\u9999<>\&]/g,function(I){return"&#"+I.charCodeAt(0)+";"})+"</span>",_.onclick=()=>{document.body.removeChild(v),s({sourceId:b.id,audio:g})},f.appendChild(_)}})})}(r,t);return await vte(n,e,i)}async function bte(e){let t=["window","screen"];e!=="application"&&e!=="window"||(t=["window"]),e==="screen"&&(t=["screen"]);let r=$ee();if(!r)throw console.error("failed to fetch electron, please mount it to window"),new J(O.ELECTRON_IS_NULL);let n=null;try{var i;n=((i=r.desktopCapturer)===null||i===void 0?void 0:i.getSources({types:t}))||r.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch{n=null}n&&n.then||(n=new fe((o,a)=>{r.desktopCapturer.getSources({types:t},(s,l)=>{s?a(s):o(l)})}));try{return await n}catch(o){throw new J(O.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,o.toString())}}var bk=new ai("safari"),Ete=!1,_te=!1;async function Go(e,t){let r=0,n=null;for(;r<2;)try{n=await b6e(e,t,r>0);break}catch(i){if(i instanceof J)throw w.error("[".concat(t,"] ").concat(i.toString())),i;let o=S_(i.name||i.code||i,i.message);if(o.code===O.MEDIA_OPTION_INVALID){w.debug("[".concat(t,"] detect media option invalid, retry")),r+=1,await jn(500);continue}throw w.error("[".concat(t,"] ").concat(o.toString())),o}if(!n)throw new J(O.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return n}async function b6e(e,t,r){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new J(O.NOT_SUPPORTED,"can not find getUserMedia");r&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));let n=Ct(),i=new MediaStream;if(e.audioSource&&i.addTrack(e.audioSource),e.videoSource&&i.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return w.debug("Using Video Source/ Audio Source"),i;if(e.screen)if($ee())e.screen.sourceId?Of(i,await vte(e.screen.sourceId,e.screen,e.screenAudio)):Of(i,await v6e(e.screen,e.screenAudio));else if(Bu()&&e.screen.extensionId&&e.screen.mandatory){if(!n.getStreamFromExtension)throw new J(O.NOT_SUPPORTED,"This browser does not support screen sharing");w.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));let f=await(a=e.screen.extensionId,s=t,new fe((p,m)=>{try{chrome.runtime.sendMessage(a,{getStream:!0},g=>{if(!g||!g.streamId)return w.error("[".concat(s,"] No response from Chrome Plugin. Plugin not installed properly"),g),void m(new J(O.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));p(g.streamId)})}catch(g){w.error("[".concat(s,"] AgoraRTC screensharing plugin is not accessible(").concat(a,")"),g.toString()),m(new J(O.CHROME_PLUGIN_NOT_INSTALL))}}));e.screen.mandatory.chromeMediaSourceId=f,Of(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(n.getDisplayMedia){var o;e.screen.mediaSource&&D6(e.screen.mediaSource);let f={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:(o=e.screen.displaySurface)!==null&&o!==void 0?o:e.screen.mediaSource==="screen"?"monitor":e.screen.mediaSource},{selfBrowserSurface:p,surfaceSwitching:m,systemAudio:g}=e.screen,y={selfBrowserSurface:p,surfaceSwitching:m,systemAudio:g};!p&&delete y.selfBrowserSurface,!m&&delete y.surfaceSwitching,!g&&delete y.systemAudio,w.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:f,audio:!!e.screenAudio,controls:y})),Of(i,await navigator.mediaDevices.getDisplayMedia(hr({video:f,audio:!!e.screenAudio},y)))}else{if(!Ir())throw w.error("[".concat(t,"] This browser does not support screenSharing")),new J(O.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&D6(e.screen.mediaSource);let f={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};w.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(f))),Of(i,await navigator.mediaDevices.getUserMedia(f))}}var a,s;if(!e.video&&!e.audio)return i;let l={video:e.video,audio:e.audio},c=L("MEDIA_DEVICE_CONSTRAINTS");if(c)try{typeof c=="string"&&(c=JSON.parse(c)),l=ck(l,c)}catch{}w.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(l)),St();let u,h=null;(qn()||Vi()||oS())&&(h=await bk.lock());try{u=await navigator.mediaDevices.getUserMedia(l)}catch(f){throw h&&h(),f}return l.audio&&(Ete=!0),l.video&&(_te=!0),Of(i,u),h&&h(),i}function S_(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new J(O.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new J(O.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new J(O.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new J(O.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new J(O.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new J(O.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return w.error("getUserMedia unexpected error",e),new J(O.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function Of(e,t){let r=e.getVideoTracks()[0],n=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(n&&e.removeTrack(n),e.addTrack(o)),i&&(r&&e.removeTrack(r),e.addTrack(i))}var Yo=new class extends _r{get state(){return this._state}set state(e){e!==this._state&&(this.emit(Jd.STATE_CHANGE,e),this._state=e)}constructor(){super(),Q(this,"_state",jg.IDLE),Q(this,"isAccessMicrophonePermission",!1),Q(this,"isAccessCameraPermission",!1),Q(this,"lastAccessMicrophonePermission",!1),Q(this,"lastAccessCameraPermission",!1),Q(this,"checkdeviceMatched",!1),Q(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(L("ENUMERATE_DEVICES_INTERVAL")||(lC()||sC()===yn.HARMONY_OS)&&ed())&&this.updateDevicesInfo()},L("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(e=>w.error(e.toString()))}async enumerateDevices(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new J(O.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();let n=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(n),o=!this.isAccessMicrophonePermission&&e,a=!this.isAccessCameraPermission&&t;i.audio&&(o=!1),i.video&&(a=!1);let s=null,l=null,c=null;if(!r&&(o||a)){if(bk.isLocked&&(w.debug("[device manager] wait GUM lock"),(await bk.lock())(),w.debug("[device manager] GUM unlock")),Ete&&(o=!1,this.isAccessMicrophonePermission=!0),_te&&(a=!1,this.isAccessCameraPermission=!0),w.debug("[device manager] check media device permissions",e,t,o,a),o&&a){try{c=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(u){let h=S_(u.name||u.code||u,u.message);if(h.code===O.PERMISSION_DENIED)throw h;w.warning("getUserMedia failed in getDevices",h)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{s=await navigator.mediaDevices.getUserMedia({audio:e})}catch(u){let h=S_(u.name||u.code||u,u.message);if(h.code===O.PERMISSION_DENIED)throw h;w.warning("getUserMedia failed in getDevices",h)}this.isAccessMicrophonePermission=!0}else if(a){try{l=await navigator.mediaDevices.getUserMedia({video:t})}catch(u){let h=S_(u.name||u.code||u,u.message);if(h.code===O.PERMISSION_DENIED)throw h;w.warning("getUserMedia failed in getDevices",h)}this.isAccessCameraPermission=!0}w.debug("[device manager] mic permission",e,"cam permission",t)}try{let u=await navigator.mediaDevices.enumerateDevices();return s&&s.getTracks().forEach(h=>h.stop()),l&&l.getTracks().forEach(h=>h.stop()),c&&c.getTracks().forEach(h=>h.stop()),s=null,l=null,c=null,u}catch(u){return s&&s.getTracks().forEach(h=>h.stop()),l&&l.getTracks().forEach(h=>h.stop()),c&&c.getTracks().forEach(h=>h.stop()),s=null,l=null,c=null,new J(O.ENUMERATE_DEVICES_FAILED,u.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(t=>t.kind==="audioinput")}async getCamerasDevices(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter(t=>t.kind==="videoinput")}async getSpeakers(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter(t=>t.kind==="audiooutput")}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach(r=>{r.device.label===e&&(t=r.device.deviceId)}),t}async getDeviceById(e){let t=(await this.enumerateDevices(!0,!0,!0)).find(r=>r.deviceId===e);if(!t)throw new J(O.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=jg.INITING;try{await this.updateDevicesInfo(),this.state=jg.INITEND}catch(e){throw w.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=jg.IDLE,(typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1")||new J(O.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){let e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),r=[];if(e[0]&&e[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;let i=e.find(a=>a.kind==="audioinput"&&a.deviceId==="default"),o=e.find(a=>a.kind==="audiooutput"&&a.deviceId==="default");i&&o?o.groupId===i.groupId?w.debug("[device-check] default input ".concat(i.label," and output ").concat(o.label," is the same group")):w.warning("[device-check] default input ".concat(i.label," and output ").concat(o.label," is not the same group")):w.debug("[device-check] default input or output not found")}let n=this.checkMediaDeviceInfoIsOk(e);if(e.forEach(i=>{if(!i.deviceId)return;let o=this.deviceInfoMap.get("".concat(i.kind,"_").concat(i.deviceId));if((o?o.state:"INACTIVE")!=="ACTIVE"){let a={initAt:t,updateAt:t,device:i,state:"ACTIVE"};this.deviceInfoMap.set("".concat(i.kind,"_").concat(i.deviceId),a),r.push(a)}o&&(o.updateAt=t)}),this.deviceInfoMap.forEach((i,o)=>{i.state==="ACTIVE"&&i.updateAt!==t&&(i.state="INACTIVE",r.push(i))}),this.state!==jg.INITEND)return n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));r.forEach(i=>{switch(i.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Jd.RECORDING_DEVICE_CHANGED,i);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(Jd.CAMERA_DEVICE_CHANGED,i);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Jd.PLAYOUT_DEVICE_CHANGED,i)}}),n.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),n.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){let t=e.filter(i=>i.kind==="audioinput"),r=e.filter(i=>i.kind==="videoinput"),n={audio:!1,video:!1};for(let i of t)if(i.label&&i.deviceId){n.audio=!0;break}for(let i of r)if(i.label&&i.deviceId){n.video=!0;break}return n}},WI=!1,Vo=new class extends _r{constructor(){super(...arguments),Q(this,"onAutoplayFailed",void 0),Q(this,"onAudioAutoplayFailed",void 0)}};function wte(){if(St(),!WI){let e=t=>{t.preventDefault(),WI=!1,Dv()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};WI=!0,Dv()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),w.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Vo.onAutoplayFailed?Vo.onAutoplayFailed():Vo.onAudioAutoplayFailed?w.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):w.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),Vo.emit("autoplay-failed")}}function Ste(e,t,r,n){if(!e)return;let i=Te.getBaseInfoBySessionId(e);if(!i)return;let o=i.info,a=Date.now(),s=hr(hr({},o),{},{vid:o.vid===void 0?0:Number(o.vid),lts:a,elapse:a-i.startTime,cbRegistered:Vo.onAutoplayFailed||Vo.onAudioAutoplayFailed?1:-1,errorMsg:r,mediaType:t,trackId:n,extend:void 0});Te.send({type:vr.AUTOPLAY_FAILED,data:s},!0)}var E6e=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],Ji=new class{constructor(){Q(this,"onAutoplayFailed",void 0),Q(this,"elementMap",new Map),Q(this,"elementStateMap",new Map),Q(this,"elementsNeedToResume",[]),Q(this,"sinkIdMap",new Map),Q(this,"autoResumeAfterInterruption",e=>{Array.from(this.elementMap.entries()).forEach(t=>{let[r,n]=t,i=this.elementStateMap.get(r),o=n.srcObject.getAudioTracks()[0],a=o&&o.readyState;if(w.debug("resume after interrupted, ele: ".concat(i," audio: ").concat(a," ").concat(e)),a==="live"){if(e)return n.pause(),void n.play();if(Ht.curState==="running")return sm()?(n.pause(),void n.play()):void(i&&i==="paused"&&n.play())}})}),Q(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(e=>{let[t,r]=e,n=r.srcObject.getAudioTracks()[0];n&&n.readyState==="live"&&(w.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),r.pause(),r.play())})}),this.autoResumeAudioElement(),Ht.on(Dn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Ht.on(Dn.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),Ht.on(Dn.STATE_CHANGE,()=>{Vi()&&Ht.prevState==="suspended"&&Ht.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(e,t){let r=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),r)try{await r.setSinkId(t)}catch(n){throw new J(O.PERMISSION_DENIED,"can not set sink id: "+n.toString())}}play(e,t,r,n){if(this.elementMap.has(t))return;let i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,Ci.INIT),this.setVolume(t,r);let o=this.sinkIdMap.get(t);if(o)try{i.setSinkId(o).catch(s=>{w.warning("[".concat(t,"] set sink id failed"),s.toString())})}catch(s){w.warning("[".concat(t,"] set sink id failed"),s.toString())}let a=i.play();a&&a.then&&a.catch(s=>{n&&Ste(n,"audio",s.message,t),w.warning("audio element play warning",s.toString()),this.elementMap.has(t)&&s.name==="NotAllowedError"&&(w.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),uC(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),wte()}))})}updateTrack(e,t){let r=this.elementMap.get(e);r&&(r.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&this.elementStateMap.get(e)==="playing"}setVolume(e,t){let r=this.elementMap.get(e);r&&(t=Math.max(0,Math.min(100,t)),r.volume=t/100)}stop(e){let t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;let r=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(r,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){E6e.forEach(r=>{t.addEventListener(r,n=>{let i=this.elementStateMap.get(e),o=n.type==="pause"?"paused":n.type;if(w.debug("[".concat(e,"] audio-element-status change ").concat(i," => ").concat(o)),n.type==="error"){let a=t==null?void 0:t.error;a&&w.error("[".concat(e,"] media error, code: ").concat(a.code,", message: ").concat(a.message))}this.elementStateMap.set(e,o)})})}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){let e=()=>{this.elementsNeedToResume.forEach(t=>{t.play().then(r=>{w.debug("Auto resume audio element success")}).catch(r=>{w.warning("Auto resume audio element failed!",r)})}),this.elementsNeedToResume=[]};new fe(t=>{document.body?t():window.addEventListener("load",()=>t())}).then(()=>{Dv()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))})}};function jr(){return function(e,t,r){let n=r.value;return typeof n=="function"&&(r.value=function(){this._isClosed&&new J(O.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",w);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];let s=n.apply(this,o);return s instanceof fe?new fe((l,c)=>{s.then(l).catch(c)}):s}),r}}var Tte=class extends _r{constructor(e){super(),Q(this,"name","VideoProcessorDestination"),Q(this,"ID","0"),Q(this,"_source",void 0),Q(this,"videoContext",void 0),Q(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new J(O.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new J(O.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(Bi.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(Bi.ON_TRACK,void 0)}},Cte=class extends _r{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),Q(this,"constraintsMap",new Map),Q(this,"statsRegistry",[]),Q(this,"usageRegistry",[]),Q(this,"trackId",void 0),Q(this,"direction",void 0),Q(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await Yn(this,ia.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var r;return w.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Jt(this,ia.REQUEST_UPDATE_CONSTRAINTS,Array.from(Cc(r=this.constraintsMap).call(r)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return w.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),Jt(this,ia.REQUEST_UPDATE_CONSTRAINTS,Array.from(Cc(t=this.constraintsMap).call(t)))}registerStats(e,t,r){this.statsRegistry.find(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t)||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:r})}unregisterStats(e,t){let r=this.statsRegistry.findIndex(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t);r!==-1&&this.statsRegistry.splice(r,1)}gatherStats(){let e=[];for(let{processorID:t,processorName:r,type:n,cb:i}of this.statsRegistry)try{let o=i();e.push({processorID:t,processorName:r,type:n,stats:o})}catch(o){w.error(new J(O.UNEXPECTED_ERROR,o.message))}return e}registerUsage(e,t){this.usageRegistry.find(r=>r.processorID===e.ID&&r.processorName===e.name)||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){let t=this.usageRegistry.findIndex(r=>r.processorID===e.ID&&r.processorName===e.name);t!==-1&&this.usageRegistry.splice(t,1)}async gatherUsage(){let e=[];if(!this.chained)return[];for(let{cb:t}of this.usageRegistry)try{let r=t();r instanceof fe&&(r=await r),e.push(hr(hr({},r),{},{direction:this.direction}))}catch(r){w.error("gather extension usage error",r)}return e}getDirection(){return this.direction}},xte=class extends _r{constructor(e){super(),Q(this,"name","AudioProcessorDestination"),Q(this,"ID","0"),Q(this,"inputTrack",void 0),Q(this,"inputNode",void 0),Q(this,"audioProcessorContext",void 0),Q(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new J(O.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new J(O.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(Bi.ON_TRACK,void 0),this.emit(Bi.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(Bi.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(Bi.ON_NODE,this.inputNode))}},Rte=class extends _r{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,r){super(),Q(this,"constraintsMap",new Map),Q(this,"statsRegistry",[]),Q(this,"audioContext",void 0),Q(this,"trackId",void 0),Q(this,"direction",void 0),Q(this,"usageRegistry",[]),Q(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=r}async getConstraints(){return Yn(this,ia.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var r;return w.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Jt(this,ia.REQUEST_UPDATE_CONSTRAINTS,Array.from(Cc(r=this.constraintsMap).call(r)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),Jt(this,ia.REQUEST_UPDATE_CONSTRAINTS,Array.from(Cc(t=this.constraintsMap).call(t)))}registerStats(e,t,r){this.statsRegistry.find(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t)||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:r})}unregisterStats(e,t){let r=this.statsRegistry.findIndex(n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t);r!==-1&&this.statsRegistry.splice(r,1)}gatherStats(){let e=[];for(let{processorID:t,processorName:r,type:n,cb:i}of this.statsRegistry)try{let o=i();e.push({processorID:t,processorName:r,type:n,stats:o})}catch(o){w.error(new J(O.UNEXPECTED_ERROR,o.message))}return e}registerUsage(e,t){this.usageRegistry.find(r=>r.processorID===e.ID&&r.processorName===e.name)||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){let t=this.usageRegistry.findIndex(r=>r.processorID===e.ID&&r.processorName===e.name);t!==-1&&this.usageRegistry.splice(t,1)}async gatherUsage(){let e=[];if(!this.chained)return[];for(let{cb:t}of this.usageRegistry)try{let r=t();r instanceof fe&&(r=await r),e.push(hr(hr({},r),{},{direction:this.direction}))}catch(r){w.error("gather extension usage error",r)}return e}getDirection(){return this.direction}},Ek=class extends _r{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),Q(this,"context",void 0),Q(this,"processSourceNode",void 0),Q(this,"outputTrack",void 0),Q(this,"processedNode",void 0),Q(this,"clonedTrack",void 0),Q(this,"outputNode",void 0),this.outputNode=new _6e}setVolume(){}createOutputTrack(){throw new J(O.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}},_6e=class{disconnect(){}connect(){}};function Ite(e){return new fe((t,r)=>{let n=!1,i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);let o=Vi()?"canplay":"playing";i.addEventListener(o,()=>{let a=i.videoWidth,s=i.videoHeight;!a&&Ir()||(n=!0,i.srcObject=null,i.remove(),t([a,s]))}),i.srcObject=new MediaStream([e]),i.play().catch(dC),setTimeout(()=>{n||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))},4e3)})}function cS(e){let t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});let r=Nl(e.encoderConfig);return r.width!=null&&(t.width=r.width),r.height!=null&&(t.height=r.height),!Fee()&&r.frameRate&&(t.frameRate=r.frameRate),Pee()&&typeof t.frameRate=="object"&&(t.frameRate.max=60),Ir()&&(t.frameRate={ideal:30,max:30}),t}function j6(e){let t={};if(Fee()||(e.AGC!==void 0&&(t.autoGainControl=e.AGC),e.AEC!==void 0&&(t.echoCancellation=e.AEC),e.ANS!==void 0&&(t.noiseSuppression=e.ANS,Bu()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){let r=lS(e.encoderConfig);t.channelCount=r.stereo?2:1,t.sampleRate=r.sampleRate,t.sampleSize=r.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),lC()&&(t.sampleRate=void 0),t}var w6e=e=>{let t=e._encoderConfig;if(!t)return;let{frameRate:r,width:n,height:i}=e.getMediaStreamTrackSettings(),{frameRate:o=r,width:a=n,height:s=i}=t;if(!o||!a||!s)return;a=fI(a),s=fI(s),o=fI(o);let{max:l,min:c}=function(p,m,g){let y=200*Math.pow(g/15,.6)*Math.pow(p*m/640/360,.75);return{min:Math.floor(y),max:Math.floor(4*y)}}(a,s,o),{bitrateMax:u,bitrateMin:h}=t||{};u||w.debug("calculate bitrate: [w: ".concat(a,", h: ").concat(s,", fps: ").concat(o,"] => [brMax: ").concat(u,", brMin: ").concat(h,"]"));let{maxFramerate:f}=L("ENCODER_CONFIG_LIMIT");return f&&typeof f=="number"&&(o=Math.min(o,f)),{frameRate:o,bitrateMax:u||l,bitrateMin:h||c,scaleResolutionDownBy:1,scale:0}},Nte=async(e,t,r)=>await(async(n,i,o)=>{let a=function(c){let u=[];for(let h=0;h<c.length;h+=2)u.push(parseInt(c.slice(h,h+2),16));return Uint8Array.from(u)}(Wee(""+i+o)).slice(0,16),s=a.slice(0,12),l=await window.crypto.subtle.importKey("raw",a,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:s},l,n))})(e.buffer,t,r),jL=e=>{let t=document.createElement("canvas");return t.width=2,t.height=2,new fe((r,n)=>{t.toBlob(async i=>{if(t.remove(),i){let o=await Ate(i);r({buffer:o,width:t.width,height:t.height})}else n(new J(O.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},e,1)})},Ate=async e=>{let t=await e.arrayBuffer();return new Uint8Array(t)},U6,F6,V6,B6,$6,H6,z6,G6,W6,K6,q6,Y6,X6,J6,Q6,Z6,e8,t8,fr,r8,n8,i8,o8,a8,s8,hl,l8,c8,u8,d8,h8,f8,p8,m8,g8,y8,v8,b8,E8,$n,Cr=(U6=Le({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),F6=Le({argsMap:(e,t)=>[e.getTrackId(),t]}),V6=jr(),B6=lm("LocalAudioTrack","_enabledMutex"),$6=Le({argsMap:(e,t)=>[e.getTrackId(),t]}),H6=jr(),z6=lm("LocalAudioTrack","_enabledMutex"),G6=Le({argsMap:(e,t)=>[e.getTrackId(),t]}),W6=jr(),K6=jr(),q6=jr(),Y6=Le({argsMap:e=>[e.getTrackId()]}),X6=jr(),J6=Le({argsMap:e=>[e.getTrackId()]}),Q6=jr(),Z6=Le({argsMap:e=>[e.getTrackId()]}),e8=Le({argsMap:(e,t)=>[e.getTrackId(),t.name]}),t8=Le({argsMap:e=>[e.getTrackId()]}),_t((fr=class extends pp{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?Ji.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,r,n){super(e,r),Q(this,"trackMediaType",Xm.AUDIO),Q(this,"_encoderConfig",void 0),Q(this,"_trackSource",void 0),Q(this,"_enabled",!0),Q(this,"_volume",100),Q(this,"_useAudioElement",!0),Q(this,"_bypassWebAudio",!1),Q(this,"processor",void 0),Q(this,"_processorContext",void 0),Q(this,"_processorDestination",void 0),Q(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!n,this._trackSource=new Ek,L("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),L("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),qn()&&!Fo?setTimeout(()=>this.initWebAudio()):this.initWebAudio()}setVolume(e){Wt(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Ji.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void w.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));let t=this._source.createOutputTrack();this._mediaStreamTrack!==t&&(this._mediaStreamTrack=t,Jt(this,be.NEED_REPLACE_TRACK,this).then(()=>{w.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(r=>{w.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),r)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!dte())throw new J(O.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Ji.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,r){return this._setEnabled(e,t,r)}async _setEnabled(e,t,r){if(!r){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(w.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{r||(this._enabled=!0),await Jt(this,be.NEED_ENABLE_TRACK,this),w.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(n){throw r||(this._enabled=!1),w.error("[".concat(this.getTrackId(),"] setEnabled to true error"),n.toString()),n}}else{this._originMediaStreamTrack.enabled=!1,r||(this._enabled=!1);try{await Jt(this,be.NEED_DISABLE_TRACK,this)}catch(n){throw r||(this._enabled=!0),w.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,w.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await Jt(this,be.NEED_MUTE_TRACK,this):await Jt(this,be.NEED_UNMUTE_TRACK,this))}getStats(){return td(()=>{w.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),xa(this,be.GET_STATS)||hr({},yk)}setAudioFrameCallback(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Ko.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Ko.ON_AUDIO_BUFFER),this._source.on(Ko.ON_AUDIO_BUFFER,r=>e(r))}play(){w.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(w.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Ji.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){w.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Ji.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];w.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Ji.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Jt(this,be.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return fe.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new J(O.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new J(O.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;let t=this.processor;(e=this._source.processSourceNode)===null||e===void 0||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(Bi.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(t),await Jt(this,be.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Jt(this,be.NEED_REPLACE_TRACK,this))}),e.on(Bi.ON_NODE,t=>{this._source.processedNode=t})}unbindProcessorDestinationEvents(e){e.removeAllListeners(Bi.ON_TRACK),e.removeAllListeners(Bi.ON_NODE)}bindProcessorContextEvents(e){e.on(ia.REQUEST_CONSTRAINTS,async t=>{t(this._originMediaStreamTrack.getSettings())})}unbindProcessorContextEvents(e){e.removeAllListeners(ia.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof Ek&&(this._trackSource=new yte(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){let e=new Rte(this._source.context,this.getTrackId(),"local"),t=new xte(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(Ko.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})}),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(Ji.stop(this.getTrackId()),this._source.play()),Jt(this,be.NEED_REPLACE_MIXING_TRACK,this).then(()=>{w.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))}).catch(r=>{w.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),r)})),{processorContext:e,processorDestination:t}}}).prototype,"setVolume",[U6],Object.getOwnPropertyDescriptor(fr.prototype,"setVolume"),fr.prototype),_t(fr.prototype,"setPlaybackDevice",[F6,V6],Object.getOwnPropertyDescriptor(fr.prototype,"setPlaybackDevice"),fr.prototype),_t(fr.prototype,"setEnabled",[B6,$6,H6],Object.getOwnPropertyDescriptor(fr.prototype,"setEnabled"),fr.prototype),_t(fr.prototype,"setMuted",[z6,G6,W6],Object.getOwnPropertyDescriptor(fr.prototype,"setMuted"),fr.prototype),_t(fr.prototype,"getStats",[K6],Object.getOwnPropertyDescriptor(fr.prototype,"getStats"),fr.prototype),_t(fr.prototype,"setAudioFrameCallback",[q6],Object.getOwnPropertyDescriptor(fr.prototype,"setAudioFrameCallback"),fr.prototype),_t(fr.prototype,"play",[Y6,X6],Object.getOwnPropertyDescriptor(fr.prototype,"play"),fr.prototype),_t(fr.prototype,"stop",[J6,Q6],Object.getOwnPropertyDescriptor(fr.prototype,"stop"),fr.prototype),_t(fr.prototype,"close",[Z6],Object.getOwnPropertyDescriptor(fr.prototype,"close"),fr.prototype),_t(fr.prototype,"pipe",[e8],Object.getOwnPropertyDescriptor(fr.prototype,"pipe"),fr.prototype),_t(fr.prototype,"unpipe",[t8],Object.getOwnPropertyDescriptor(fr.prototype,"unpipe"),fr.prototype),fr),uS=(r8=Le({argsMap:(e,t)=>[e.getTrackId(),t]}),n8=jr(),i8=lm("MicrophoneAudioTrack","_enabledMutex"),o8=Le({argsMap:(e,t,r)=>[e.getTrackId(),t,r]}),a8=jr(),s8=Le({argsMap:e=>[e.getTrackId()]}),_t((hl=class extends Cr{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,r,n){super(e,t.encoderConfig?lS(t.encoderConfig):{},n,L("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),Q(this,"_config",void 0),Q(this,"_deviceName","default"),Q(this,"_constraints",void 0),Q(this,"_originalConstraints",void 0),Q(this,"_enabled",!0),this._config=t,this._constraints=r,this._originalConstraints=r,this._deviceName=e.label,typeof t.bypassWebAudio=="boolean"&&(this._bypassWebAudio=t.bypassWebAudio),(sm()||ak())&&Ht.bindInterruptDetectorTrack(this)}async setDevice(e){if(w.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{let t=await Yo.getDeviceById(e),r={};r.audio=hr({},this._constraints),r.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let n=null;try{n=await Go(r,this.getTrackId())}catch(i){throw w.error("[".concat(this.getTrackId(),"] setDevice failed"),i.toString()),n=await Go({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),i}await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(t){throw w.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}else try{let t=await Yo.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(t){throw w.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}w.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,r){if(t)return w.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!r){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(w.info("[".concat(this.getTrackId(),"] start setEnabled"),e),L("AUTO_RESET_AUDIO_ROUTE")&&(Vi()||ys())){let a=navigator.audioSession;a&&(e||(a.type="playback"),a.type="auto")}if(!e){var n;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(n=this._source.clonedTrack)===null||n===void 0||n.stop(),r||(this._enabled=!1);try{await Jt(this,be.NEED_DISABLE_TRACK,this)}catch(a){throw w.error("[".concat(this.getTrackId(),"] setEnabled false failed"),a.toString()),a}return}let i=hr({},this._constraints),o=Yo.searchDeviceIdByName(this._deviceName);o&&!i.deviceId&&(i.deviceId=o);try{r||(this._enabled=!0);let a=await Go({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(a.getAudioTracks()[0],!1),await Jt(this,be.NEED_ENABLE_TRACK,this)}catch(a){throw r||(this._enabled=!1),w.error("[".concat(this.getTrackId(),"] setEnabled true failed"),a.toString()),a}w.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(sm()||ak())&&Ht.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Vi()||ys())&&this._enabled&&!this._isClosed&&Ht.duringInterruption){let e=async()=>{Ht.off(Dn.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(w.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Ht.on(Dn.IOS_INTERRUPTION_END,e)}else w.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Ym.TRACK_ENDED)}async renewMediaStreamTrack(e){let t=e||this._constraints,r=Yo.searchDeviceIdByName(this._deviceName);if(r&&!t.deviceId&&(t.deviceId=r),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();let n=await Go({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(ia.REQUEST_UPDATE_CONSTRAINTS,async(t,r,n)=>{try{let i=Object.assign({},this._originalConstraints,...t);await this.renewMediaStreamTrack(i),r()}catch(i){n(i)}})}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(ia.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[r8,n8],Object.getOwnPropertyDescriptor(hl.prototype,"setDevice"),hl.prototype),_t(hl.prototype,"setEnabled",[i8,o8,a8],Object.getOwnPropertyDescriptor(hl.prototype,"setEnabled"),hl.prototype),_t(hl.prototype,"close",[s8],Object.getOwnPropertyDescriptor(hl.prototype,"close"),hl.prototype),hl),S6e=(l8=Le({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),c8=jr(),u8=Le({argsMap:e=>[e.getTrackId()]}),d8=jr(),h8=Le({argsMap:e=>[e.getTrackId()]}),f8=jr(),p8=Le({argsMap:e=>[e.getTrackId()]}),m8=jr(),g8=Le({argsMap:e=>[e.getTrackId()]}),y8=jr(),v8=Le({argsMap:e=>[e.getTrackId()]}),b8=Le({argsMap:e=>[e.getTrackId()]}),E8=jr(),_t(($n=class extends Cr{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,r,n){super(t.createOutputTrack(),r,n),Q(this,"source",void 0),Q(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(Ko.AUDIO_SOURCE_STATE_CHANGE,i=>{this.safeEmit(Ym.SOURCE_STATE_CHANGE,i)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){Wt(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}).prototype,"startProcessAudioBuffer",[l8,c8],Object.getOwnPropertyDescriptor($n.prototype,"startProcessAudioBuffer"),$n.prototype),_t($n.prototype,"pauseProcessAudioBuffer",[u8,d8],Object.getOwnPropertyDescriptor($n.prototype,"pauseProcessAudioBuffer"),$n.prototype),_t($n.prototype,"seekAudioBuffer",[h8,f8],Object.getOwnPropertyDescriptor($n.prototype,"seekAudioBuffer"),$n.prototype),_t($n.prototype,"resumeProcessAudioBuffer",[p8,m8],Object.getOwnPropertyDescriptor($n.prototype,"resumeProcessAudioBuffer"),$n.prototype),_t($n.prototype,"stopProcessAudioBuffer",[g8,y8],Object.getOwnPropertyDescriptor($n.prototype,"stopProcessAudioBuffer"),$n.prototype),_t($n.prototype,"close",[v8],Object.getOwnPropertyDescriptor($n.prototype,"close"),$n.prototype),_t($n.prototype,"setAudioBufferPlaybackSpeed",[b8,E8],Object.getOwnPropertyDescriptor($n.prototype,"setAudioBufferPlaybackSpeed"),$n.prototype),$n),gn=class Ote extends Cr{get __className__(){return"MixingAudioTrack"}get isActive(){for(let t of this.trackList)if(t._enabled&&!t._isClosed&&!t.muted)return!0;return!1}constructor(){let t=Jm().createMediaStreamDestination();super(t.stream.getAudioTracks()[0],void 0,er(8,"track-mix-")),Q(this,"trackList",void 0),Q(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=t,this.trackList=[]}hasAudioTrack(t){return this.trackList.indexOf(t)!==-1}addAudioTrack(t){this.trackList.indexOf(t)===-1?(w.debug("add ".concat(t.getTrackId()," to mixing track")),t._source.outputNode.connect(this.destNode),this.trackList.push(t),this.updateEncoderConfig()):w.debug("track ".concat(t.getTrackId()," is already added"))}removeAudioTrack(t){if(this.trackList.indexOf(t)!==-1){w.debug("remove ".concat(t.getTrackId()," from mixing track"));try{t._source.outputNode.disconnect(this.destNode)}catch{}aS(this.trackList,t),this.updateEncoderConfig()}}updateEncoderConfig(){let t={};this.trackList.forEach(r=>{r._encoderConfig&&((r._encoderConfig.bitrate||0)>(t.bitrate||0)&&(t.bitrate=r._encoderConfig.bitrate),(r._encoderConfig.sampleRate||0)>(t.sampleRate||0)&&(t.sampleRate=r._encoderConfig.sampleRate),(r._encoderConfig.sampleSize||0)>(t.sampleSize||0)&&(t.sampleSize=r._encoderConfig.sampleSize),r._encoderConfig.stereo&&(t.stereo=!0))}),this._encoderConfig=t}_updateRtpTransceiver(t){this._rtpTransceiver!==t&&(this._rtpTransceiver=t,this.trackList.forEach(r=>{r instanceof Ote?r.emit(hh.TRANSCEIVER_UPDATED,t):r._updateRtpTransceiver(t)}))}},T6e=class extends gte{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(Ko.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Q(this,"audioBuffer",void 0),Q(this,"sourceNode",void 0),Q(this,"startPlayTime",0),Q(this,"startPlayOffset",0),Q(this,"pausePlayTime",0),Q(this,"options",void 0),Q(this,"currentLoopCount",0),Q(this,"currentPlaybackSpeed",100),Q(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){this.currentState==="stopped"?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):w.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=e,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){let e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}},_8=new Map,UL=class{get rendFrameRate(){if(this.renderStats&&this.renderStats.curTs!==this.renderStats.lastTs){let e=this.renderStats.curTs-this.renderStats.lastTs,t=(this.renderStats.renderNum-this.renderStats.lastRenderNum)/e;return this.renderStats.lastRenderNum=this.renderStats.renderNum,this.renderStats.lastTs=this.renderStats.curTs,t}return 0}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(w.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(this._videoState=e,(t=this.onVideoStateChanged)===null||t===void 0||t.call(this,this.videoState))}constructor(e){Q(this,"trackId",void 0),Q(this,"config",void 0),Q(this,"onFirstVideoFrameDecoded",void 0),Q(this,"onVideoStateChanged",void 0),Q(this,"freezeTimeCounterList",[]),Q(this,"renderFreezeAccTime",0),Q(this,"isKeepLastFrame",!1),Q(this,"timeUpdatedCount",0),Q(this,"freezeTime",0),Q(this,"playbackTime",0),Q(this,"lastTimeUpdatedTime",0),Q(this,"autoplayFailed",!1),Q(this,"videoTrack",void 0),Q(this,"videoElement",void 0),Q(this,"cacheVideoElement",void 0),Q(this,"renderStats",void 0),Q(this,"_videoState",dl.VideoStateStopped),Q(this,"videoElementCheckInterval",void 0),Q(this,"videoElementFreezeTimeout",void 0),Q(this,"_videoElementStatus",Ci.NONE),Q(this,"isGettingVideoDimensions",!1),Q(this,"startGetVideoDimensions",()=>{let t=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return w.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(t,500)};!this.isGettingVideoDimensions&&t()}),Q(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&Ht.curState==="running"&&(w.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(NB())),PB()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),Q(this,"handleVideoEvents",t=>{switch(t.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=Ci.PLAYING;break;case"loadeddata":if(this.videoState=dl.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=Ci.CANPLAY;break;case"stalled":this.videoElementStatus=Ci.STALLED;break;case"suspend":this.videoElementStatus=Ci.SUSPEND;break;case"pause":this.videoElementStatus=Ci.PAUSED,Vi()||ys()||qn()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(w.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=Ci.WAITING;break;case"abort":this.videoElementStatus=Ci.ABORT;break;case"ended":this.videoElementStatus=Ci.ENDED;break;case"emptied":this.videoElementStatus=Ci.EMPTIED;break;case"error":{let r=this.videoElement.error;r?(this.videoElementStatus=Ci.ERROR,w.error("[".concat(this.trackId,"] media error: ").concat(r.message," (").concat(r.code,")"))):w.debug("[".concat(this.trackId,"] media not been an error."));break}case"timeupdate":{let r=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=r);let n=r-this.lastTimeUpdatedTime,i=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=r,ac.lastVisibleTime<ac.lastHiddenTime||i<ac.lastHiddenTime||i<ac.lastVisibleTime)return;for(n>L("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=n),this.playbackTime+=n;this.playbackTime>=6e3;){this.playbackTime-=6e3;let o=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(o),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),Q(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(w.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(NB())),PB()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),Ht.on(Dn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Ht.on(Dn.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return(e=this.videoElement.parentElement)!==null&&e!==void 0?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){let t=this.videoElement.play();t&&t.catch&&t.catch(n=>{e&&Ste(e,"video",n.message,this.trackId),n.name==="NotAllowedError"?(w.warning("detected video element autoplay failed",n),this.autoplayFailed=!0,this.handleAutoPlayFailed()):w.warning("[".concat(this.trackId,"] play warning: "),n)});let r=St();if((r.name==="Safari"&&Number(r.version)===15||sm())&&t&&t.then){let n=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(n).catch(n)}}getCurrentFrame(){let e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;let t=e.getContext("2d");if(!t)return w.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);let r=t.getImageData(0,0,e.width,e.height);return e.remove(),r}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=document.createElement("canvas");r.width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight;let n=r.getContext("2d");return n?(n.drawImage(this.videoElement,0,0,r.width,r.height),new fe((i,o)=>{r.toBlob(async a=>{if(r.remove(),a){let s=await Ate(a);i({buffer:s,width:r.width,height:r.height})}else o(new J(O.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},e,t<0?.1:t>1?1:t)})):await jL(e)}destroy(){this.renderStats=void 0,Ht.off(Dn.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Ht.off(Dn.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=dl.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=Ci.INIT,!this.videoElementCheckInterval&&(w8.forEach(i=>{this.videoElement.addEventListener(i,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(i){return i!==document.body&&document.body.contains(i)})(this.videoElement)||(this.videoElementStatus=Ci.DESTROYED)},1e3),L("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let i,o=()=>{document.visibilityState==="visible"&&(document.removeEventListener("visibilitychange",o),this.videoElementFreezeTimeout=window.setTimeout(a,L("VIDEO_FREEZE_DURATION")))},a=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===dl.VideoStateDecoding&&(document.visibilityState==="visible"?this.videoState=dl.VideoStateFrozen:document.addEventListener("visibilitychange",o))},s=(l,c)=>{if(this.videoElementStatus===Ci.PLAYING){if(this.renderStats?(this.renderStats.renderNum++,this.renderStats.curTs=c.mediaTime):this.renderStats={lastTs:c.mediaTime,curTs:c.mediaTime,lastRenderNum:0,renderNum:0},i){let f=c.presentationTime-i.presentationTime;this.videoState===dl.VideoStateStarting&&(this.videoState=dl.VideoStateDecoding),this.videoState===dl.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(a,L("VIDEO_FREEZE_DURATION"))),f<L("VIDEO_FREEZE_DURATION")&&this.videoState===dl.VideoStateFrozen&&(this.videoState=dl.VideoStateDecoding),f>L("VIDEO_FREEZE_DURATION")&&ac.lastVisibleTime>=ac.lastHiddenTime&&i.timestamp>ac.lastVisibleTime&&i.timestamp>ac.lastHiddenTime&&(this.renderFreezeAccTime+=f)}i=hr(hr({},c),{},{timestamp:l})}var u,h;L("ENABLE_VIDEO_FRAME_CALLBACK")&&((u=(h=this.videoElement).requestVideoFrameCallback)===null||u===void 0||u.call(h,s))};(e=(t=this.videoElement).requestVideoFrameCallback)===null||e===void 0||e.call(t,s)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),lC()&&!L("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");let r=St();r.name==="Safari"&&Number(r.version)===15||sm()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Ir()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Ir()&&this.videoElement.load());let n=this.videoElement.play();n!==void 0&&n.catch(i=>{w.debug("[".concat(this.trackId,"] playback interrupted"),i.toString())})}resetVideoElement(){w8.forEach(e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=Ci.NONE}handleAutoPlayFailed(){let e=t=>{t.preventDefault(),this.videoElement.play().then(()=>{w.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(r=>{w.error(r)}),this.autoplayFailed=!1,Dv()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};Dv()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),wte()}},w8=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"],kte=class extends UL{constructor(e){super(e),Q(this,"container",void 0),Q(this,"slot",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;let t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;(t=this.container)!==null&&t!==void 0&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return(e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(t=this.container)!==null&&t!==void 0&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,r):await jL(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",L("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||(e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var e;if((e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var e;(e=this.container)!==null&&e!==void 0&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}},S8,T8,C8,x8,R8,I8,N8,A8,O8,k8,P8,D8,L8,M8,j8,U8,F8,V8,B8,$8,H8,z8,G8,W8,yt,K8,q8,Y8,X8,J8,Q8,Z8,e$,Mo,ir=(S8=Le({argsMap:(e,t,r)=>[e.getTrackId(),typeof t=="string"?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",r]}),T8=jr(),C8=Le({argsMap:e=>[e.getTrackId()]}),x8=lm("LocalVideoTrack","_enabledMutex"),R8=Le({argsMap:(e,t)=>[e.getTrackId(),t]}),I8=jr(),N8=lm("LocalVideoTrack","_enabledMutex"),A8=Le({argsMap:(e,t)=>[e.getTrackId(),t]}),O8=jr(),k8=Le({argsMap:(e,t)=>[e.getTrackId(),t]}),P8=jr(),D8=jr(),L8=Le({argsMap:(e,t,r)=>[e.getTrackId(),t,r]}),M8=jr(),j8=jr(),U8=jr(),F8=jr(),V8=jr(),B8=jr(),$8=jr(),H8=Le({argsMap:(e,t)=>[e.getTrackId(),t.name]}),z8=Le({argsMap:e=>[e.getTrackId()]}),G8=Le({argsMap:e=>[e.getTrackId()]}),W8=Le({argsMap:(e,t,r)=>[e.getTrackId(),t.label,r]}),yt=class Pte extends pp{get videoHeight(){if(qn()){let{height:t}=this._mediaStreamTrack.getSettings();return this._videoHeight=t,this._videoHeight}return this._videoHeight}get videoWidth(){if(qn()){let{width:t}=this._mediaStreamTrack.getSettings();return this._videoWidth=t,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Ci.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(t){this._processorContext=t}get __className__(){return"LocalVideoTrack"}constructor(t,r,n,i,o,a){if(super(t,o),Q(this,"trackMediaType",Xm.VIDEO),Q(this,"_player",void 0),Q(this,"isUseScaleResolutionDownBy",!1),Q(this,"_videoVisibleTimer",null),Q(this,"_previousVideoVisibleStatus",void 0),Q(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),Q(this,"_encoderConfig",void 0),Q(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),Q(this,"_optimizationMode",void 0),Q(this,"_videoHeight",void 0),Q(this,"_videoWidth",void 0),Q(this,"_forceBitrateLimit",void 0),Q(this,"_enabled",!0),Q(this,"_processorDestination",void 0),Q(this,"_processorContext",void 0),qn()){let{width:s,height:l}=t.getSettings();this._videoWidth=s,this._videoHeight=l}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=r,this._scalabilityMode=n,this._optimizationMode=i,this._hints=a||[],this._hints.indexOf(cr.SCREEN_TRACK)===-1)this.updateBitrateFromProfile();else if(function(s,l,c){let u=St();return!(u.name!==s||!u.osVersion)&&Number(u.version)===l}(Mt.CHROME,115)&&sC().indexOf("Windows")!==-1){let s=function(l,c){if("VideoFrame"in window&&"TransformStream"in window&&Ct().supportWebRTCInsertableStream){let u=new MediaStreamTrackProcessor(l),h=new MediaStreamTrackGenerator({kind:"video"}),f,p,m=Date.now(),g=()=>{y&&(clearInterval(y),y=void 0),f&&(f.close(),f=void 0),l.stop(),p=void 0,h.removeEventListener("ended",g)},y=window.setInterval(()=>{if(p&&f&&Date.now()-m>1e3)try{h.readyState==="live"?p.enqueue(f.clone()):g()}catch{g()}},1e3),v=new TransformStream({transform:(b,_)=>{h.readyState==="live"?(p=_,m=Date.now(),f===void 0?(f=b,_.enqueue(b.clone())):(_.enqueue(f),f=b)):b.close()}});return h.addEventListener("ended",g),u.readable.pipeThrough(v).pipeTo(h.writable),h}}(t);s&&(w.info("local screen video track begin to inject frame"),this._mediaStreamTrack=s)}r&&this._hints.indexOf(cr.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration(r),this._processorContext=new Cte(this.getTrackId(),"local"),this._processorDestination=new Tte(this.processorContext),this.bindProcessorDestinationEvents()}play(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string"){let i=document.getElementById(t);i?t=i:(w.warning("[".concat(this.getTrackId(),'] can not find "#').concat(t,'" element, use document.body')),t=document.body)}w.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(r));let n=hr(hr(hr({},this._getDefaultPlayerConfig()),r),{},{trackId:this.getTrackId(),element:t});this._player?this._player.updateConfig(n):(t instanceof HTMLVideoElement?this._player=new UL(n):this._player=new kte(n),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{let i=this.getVideoElementVisibleStatus();this.safeEmit(Ym.VIDEO_ELEMENT_VISIBLE_STATUS,i)}catch{}},L("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,w.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(t,r){if(!r){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(w.info("[".concat(this.getTrackId(),"] start setEnabled"),t),!t){this._originMediaStreamTrack.enabled=!1;try{await Jt(this,be.NEED_DISABLE_TRACK,this)}catch(n){throw w.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}return r||(this._enabled=!1),void w.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Jt(this,be.NEED_ENABLE_TRACK,this)}catch(n){throw w.error("[".concat(this.getTrackId(),"] setEnabled to true error"),n.toString()),n}w.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}async setMuted(t){t!==this._muted&&(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,w.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),t?await Jt(this,be.NEED_MUTE_TRACK,this):await Jt(this,be.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(t,r){if(!this._enabled)throw new J(O.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(t=Nl(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),t.width||t.height||t.frameRate){let n=cS({encoderConfig:t});(qn()||Vi()||ys())&&(n.deviceId=void 0),w.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(n));try{await this._originMediaStreamTrack.applyConstraints(n),this.updateMediaStreamTrackResolution()}catch(i){let o=new J(O.UNEXPECTED_ERROR,i.toString());throw w.error("[".concat(this.getTrackId(),"] applyConstraints error"),o.toString()),o}}this._encoderConfig=t,this._hints.indexOf(cr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Jt(this,be.NEED_UPDATE_VIDEO_ENCODER,this)}catch(n){return n.throw(w)}}getStats(){return td(()=>{w.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),xa(this,be.GET_STATS)||hr({},vk)}async setBeautyEffect(t){w.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(t,r):await jL(t)}async setBitrateLimit(t){if(w.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(t))),t){this._forceBitrateLimit=t,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<t.max_bitrate?this._encoderConfig.bitrateMax:t.max_bitrate:this._encoderConfig.bitrateMax=t.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=t.min_bitrate);try{await Jt(this,be.NEED_UPDATE_VIDEO_ENCODER,this)}catch(r){return r.throw(w)}}}async setOptimizationMode(t){if(t!=="motion"&&t!=="detail"&&t!=="balanced")return void w.error(O.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");let r=this._optimizationMode;try{this._optimizationMode=t,await Jt(this,be.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(n){throw this._optimizationMode=r,w.error("[".concat(this.getTrackId(),"] set optimization mode failed"),n.toString()),n}w.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(t,")"))}setScalabiltyMode(t){if(t.numSpatialLayers===1&&t.numTemporalLayers!==1)return w.error(O.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=t,w.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(t,")"))}updateMediaStreamTrackResolution(){Ite(this._originMediaStreamTrack).then(t=>{let[r,n]=t;this._videoHeight=n,this._videoWidth=r}).catch(dC)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(t){if(!this._enabled)throw new J(O.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");w.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(t)),t=Nl(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),this._encoderConfig=t,this._hints.indexOf(cr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Jt(this,be.NEED_UPDATE_VIDEO_ENCODER,this)}catch(r){return r.throw(w)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;let{width:t,height:r,frameRate:n}=this.getMediaStreamTrackSettings();if(!t||!r||!n)return;let{bitrateMax:i,bitrateMin:o}=this._encoderConfig;if(o==null||i==null){let{max:a,min:s}=function(l,c,u,h,f){let p=L("BITRATE_ADAPTER_TYPE");if(p==="DEFAULT_BITRATE")return{min:h,max:f};if(f===void 0){var m;let y=Math.floor(200*Math.pow(u/15,.6)*Math.pow(l*c/640/360,.75));f=p==="STANDARD_BITRATE"?4*y:2*y,h=(m=h)!==null&&m!==void 0?m:y}else{var g;h=(g=h)!==null&&g!==void 0?g:Math.floor(f/10)}return{min:h,max:f}}(t,r,n,o,i);this._encoderConfig.bitrateMin=s,this._encoderConfig.bitrateMax=a,w.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(t,", h: ").concat(r,", fps: ").concat(n,"] => [brMax: ").concat(a,", brMin: ").concat(s,"]"))}}getVideoElementVisibleStatus(){try{var t,r;let n=this==null||(t=this._player)===null||t===void 0?void 0:t.getContainerElement(),i={track:this,element:this==null||(r=this._player)===null||r===void 0?void 0:r.getVideoElement(),slot:n==null?void 0:n.parentElement},{element:o,slot:a}=i;if(this.isPlaying&&o instanceof HTMLVideoElement&&a instanceof HTMLElement){let s=Bee.checkOneElementVisible(o),l=Object.assign({},s);if(l.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=l.visible;let c=Te.reportApiInvoke(null,{tag:xr.TRACER,name:en.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});l.visible?c.onSuccess("Video is visible"):c.onSuccess("Invisible because of ".concat(l.reason))}return l}return}catch(n){throw new J(O.GET_VIDEO_ELEMENT_VISIBLE_ERROR,n.message)}}async renewMediaStreamTrack(t){}pipe(t){if(this.processor===t)return t;if(t._source)throw new J(O.INVALID_OPERATION,"Processor ".concat(t.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=t,this.processor._source=this,t.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),t}unpipe(){if(!this.processor)return;let t=this.processor;this.processor._source=void 0,this.processor=void 0,t.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(t){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this._encoderConfig;t&&(n=hr(hr({},n),Nl(t))),n=Yd(n);let i=er(8,"track-video-cloned-"),o=new Pte(r?this._mediaStreamTrack.clone():this._mediaStreamTrack,n,Yd(this._scalabilityMode),this._optimizationMode,i,Yd(this._hints));return t&&n&&o.setEncoderConfiguration(n),w.debug("clone video track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(r)),o}async replaceTrack(t,r){if(!(t instanceof MediaStreamTrack))throw new J(O.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(t.kind!=="video")throw new J(O.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(t,r,!0),this.updateMediaStreamTrackResolution()}sendSeiData(t){if(td(()=>{Te.reportApiInvoke(null,{name:en.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:xr.TRACER}).onSuccess("")},this._mediaStreamTrack.id||this.getTrackId()),!L("ENABLE_VIDEO_SEI")||!L("ENABLE_ENCODED_TRANSFORM"))return void w.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(t instanceof Uint8Array==0)return new J(O.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();let r=this.getRTCRtpTransceiver();if(!r)return void w.warning("Video track is not published, SEI can not be send");let n=r.sender.getParameters();if(n.codecs.length===0)return;let i=n.codecs[0].mimeType.toLocaleLowerCase();i==="video/h264"?this.safeEmit("sei-to-send",t):w.warning("SEI is not supported by ".concat(i))}bindProcessorDestinationEvents(){this.processorDestination.on(Bi.ON_TRACK,async t=>{t?t!==this._mediaStreamTrack&&(this._mediaStreamTrack=t,this._updatePlayerSource(),await Jt(this,be.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Jt(this,be.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Bi.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(ia.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(ia.REQUEST_CONSTRAINTS)}},_t(yt.prototype,"play",[S8,T8],Object.getOwnPropertyDescriptor(yt.prototype,"play"),yt.prototype),_t(yt.prototype,"stop",[C8],Object.getOwnPropertyDescriptor(yt.prototype,"stop"),yt.prototype),_t(yt.prototype,"setEnabled",[x8,R8,I8],Object.getOwnPropertyDescriptor(yt.prototype,"setEnabled"),yt.prototype),_t(yt.prototype,"setMuted",[N8,A8,O8],Object.getOwnPropertyDescriptor(yt.prototype,"setMuted"),yt.prototype),_t(yt.prototype,"setEncoderConfiguration",[k8,P8],Object.getOwnPropertyDescriptor(yt.prototype,"setEncoderConfiguration"),yt.prototype),_t(yt.prototype,"getStats",[D8],Object.getOwnPropertyDescriptor(yt.prototype,"getStats"),yt.prototype),_t(yt.prototype,"setBeautyEffect",[L8,M8],Object.getOwnPropertyDescriptor(yt.prototype,"setBeautyEffect"),yt.prototype),_t(yt.prototype,"getCurrentFrameData",[j8],Object.getOwnPropertyDescriptor(yt.prototype,"getCurrentFrameData"),yt.prototype),_t(yt.prototype,"getCurrentFrameImage",[U8],Object.getOwnPropertyDescriptor(yt.prototype,"getCurrentFrameImage"),yt.prototype),_t(yt.prototype,"setBitrateLimit",[F8],Object.getOwnPropertyDescriptor(yt.prototype,"setBitrateLimit"),yt.prototype),_t(yt.prototype,"setOptimizationMode",[V8],Object.getOwnPropertyDescriptor(yt.prototype,"setOptimizationMode"),yt.prototype),_t(yt.prototype,"setScalabiltyMode",[B8],Object.getOwnPropertyDescriptor(yt.prototype,"setScalabiltyMode"),yt.prototype),_t(yt.prototype,"updateMediaStreamTrackResolution",[$8],Object.getOwnPropertyDescriptor(yt.prototype,"updateMediaStreamTrackResolution"),yt.prototype),_t(yt.prototype,"pipe",[H8],Object.getOwnPropertyDescriptor(yt.prototype,"pipe"),yt.prototype),_t(yt.prototype,"unpipe",[z8],Object.getOwnPropertyDescriptor(yt.prototype,"unpipe"),yt.prototype),_t(yt.prototype,"close",[G8],Object.getOwnPropertyDescriptor(yt.prototype,"close"),yt.prototype),_t(yt.prototype,"replaceTrack",[W8],Object.getOwnPropertyDescriptor(yt.prototype,"replaceTrack"),yt.prototype),yt),_k=(K8=Le({argsMap:(e,t)=>[e.getTrackId(),t]}),q8=jr(),Y8=lm("CameraVideoTrack","_enabledMutex"),X8=Le({argsMap:(e,t)=>[e.getTrackId(),t]}),J8=jr(),Q8=Le({argsMap:(e,t)=>[e.getTrackId(),t]}),Z8=jr(),e$=Le({argsMap:e=>[e.getTrackId()]}),Mo=class Dte extends ir{get __className__(){return"CameraVideoTrack"}constructor(t,r,n,i,o,a){super(t,Nl(r.encoderConfig),i,o,a),Q(this,"_config",void 0),Q(this,"_originalConstraints",void 0),Q(this,"_constraints",void 0),Q(this,"_enabled",!0),Q(this,"_deviceName","default"),Q(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(sm()||ak())&&!function(){let s=St();if(s.os!==yn.IOS||!s.osVersion)return!1;let l=s.osVersion.split(".");return Number(l[0])===15&&Number(l[1])>=2}()&&Uee()&&this._enabled&&!this._isClosed&&(w.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=r,this._originalConstraints=n,this._constraints=n,this._deviceName=t.label,this._encoderConfig=Nl(this._config.encoderConfig),Ht.on(Dn.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Ht.on(Dn.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(t){return typeof t=="string"?this._setDeviceById(t):t.deviceId?this._setDeviceById(t.deviceId):t.facingMode?this._setDeviceByFacingModel(t.facingMode):void 0}async _setDeviceById(t){if(w.info("[".concat(this.getTrackId(),"] set device to ").concat(t)),this._enabled)try{let r=await Yo.getDeviceById(t),n={};n.video=hr({},this._constraints),n.video.deviceId={exact:t},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let i=null;try{i=await Go(n,this.getTrackId())}catch(o){throw w.error("[".concat(this.getTrackId(),"] setDevice failed"),o.toString()),i=await Go({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),o}await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=r.label,this._config.cameraId=t,this._constraints.deviceId={exact:t}}catch(r){throw w.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}else try{let r=await Yo.getDeviceById(t);this._deviceName=r.label,this._config.cameraId=t,this._constraints.deviceId={exact:t}}catch(r){throw w.error("[".concat(this.getTrackId(),"] setDevice error"),r.toString()),r}w.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(t){w.info("[".concat(this.getTrackId(),"] set facingMode ").concat(t));let r={video:hr(hr({},this._constraints),{},{deviceId:void 0,facingMode:{exact:t}})};if(this._enabled){this._originMediaStreamTrack.stop();let n=null;try{n=await Go(r,this.getTrackId())}catch(i){throw w.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),i.toString()),n=await Go({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),i}await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=t,this._config.cameraId=void 0,this._constraints=hr({},r.video),w.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(t,r){if(!r){if(t===this._enabled)return;this.stateCheck("enabled",t)}if(w.info("[".concat(this.getTrackId(),"] start setEnabled"),t),t){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{let n=await Go({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1)}await Jt(this,be.NEED_ENABLE_TRACK,this)}catch(n){throw w.error("[".concat(this.getTrackId(),"] setEnabled true error"),n.toString()),n}this.updateMediaStreamTrackResolution(),w.info("[".concat(this.getTrackId(),"] setEnabled to true success")),r||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),r||(this._enabled=!1);try{await Jt(this,be.NEED_DISABLE_TRACK,this)}catch(n){throw w.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}w.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(t,r){if(!this._enabled)throw new J(O.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");t=Nl(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate||t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate||t.bitrateMin);let n=Br(this._config);n.encoderConfig=t;let i=cS(n);(qn()||Vi()||ys())&&(i.deviceId=void 0),w.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(i));try{await this._originMediaStreamTrack.applyConstraints(i),this.updateMediaStreamTrackResolution()}catch(o){let a=new J(O.UNEXPECTED_ERROR,o.toString());throw w.error("[".concat(this.getTrackId(),"] applyConstraints error"),a.toString()),a}this._config=n,this._constraints=i,this._originalConstraints=i,this._encoderConfig=t,this._hints.indexOf(cr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Jt(this,be.NEED_UPDATE_VIDEO_ENCODER,this)}catch(o){return o.throw(w)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Vi()||ys())&&this._enabled&&!this._isClosed&&Ht.duringInterruption){let t=async()=>{Ht.off(Dn.IOS_INTERRUPTION_END,t),this._enabled&&!this._isClosed&&(w.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Ht.on(Dn.IOS_INTERRUPTION_END,t)}else w.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(Ym.TRACK_ENDED)}async renewMediaStreamTrack(t){let r=t||this._constraints,n=Yo.searchDeviceIdByName(this._deviceName);if(n&&!r.deviceId&&(r.deviceId={exact:n}),this._enabled){let i=await Go({video:r},this.getTrackId());this._constraints=r,await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),Ht.off(Dn.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Ht.off(Dn.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(t){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this._encoderConfig;t&&(n=hr(hr({},n),Nl(t))),n=Yd(n);let i=er(8,"track-cam-cloned-"),o=new Dte(r?this._mediaStreamTrack.clone():this._mediaStreamTrack,Yd(hr(hr({},this._config),{},{encoderConfig:n})),Yd(this._constraints),Yd(this._scalabilityMode),this._optimizationMode,i);return t&&n&&o.setEncoderConfiguration(n),w.debug("clone track from ".concat(this.getTrackId()," to ").concat(i,", clone ").concat(r)),o}bindProcessorContextEvents(){this.processorContext.on(ia.REQUEST_UPDATE_CONSTRAINTS,async(t,r,n)=>{try{let i=Object.assign({},this._originalConstraints,...t);await this.renewMediaStreamTrack(i),r()}catch(i){n(i)}}),this.processorContext.on(ia.REQUEST_CONSTRAINTS,async t=>{t(this._originMediaStreamTrack.getSettings())})}},_t(Mo.prototype,"setDevice",[K8,q8],Object.getOwnPropertyDescriptor(Mo.prototype,"setDevice"),Mo.prototype),_t(Mo.prototype,"setEnabled",[Y8,X8,J8],Object.getOwnPropertyDescriptor(Mo.prototype,"setEnabled"),Mo.prototype),_t(Mo.prototype,"setEncoderConfiguration",[Q8,Z8],Object.getOwnPropertyDescriptor(Mo.prototype,"setEncoderConfiguration"),Mo.prototype),_t(Mo.prototype,"close",[e$],Object.getOwnPropertyDescriptor(Mo.prototype,"close"),Mo.prototype),Mo);function KI(e,t,r,n){r.optimizationMode&&(n&&n.width&&n.height?(r.encoderConfig=hr(hr({},n),{},{bitrateMin:n.bitrateMin,bitrateMax:n.bitrateMax}),r.optimizationMode!=="motion"&&r.optimizationMode!=="detail"||(t.contentHint=r.optimizationMode,t.contentHint===r.optimizationMode?w.debug("[".concat(e,"] set content hint to"),r.optimizationMode):w.debug("[".concat(e,"] set content hint failed")))):w.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var t$,r$,n$,i$,ha,o$,a$,s$,l$,c$,u$,_i,Lte=class extends pte{getUserId(){return this._userId}constructor(e,t,r,n){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(n.clientId,"_").concat(er(5,""))),Q(this,"_userId",void 0),Q(this,"_uintId",void 0),Q(this,"_isDestroyed",!1),Q(this,"store",void 0),Q(this,"processor",void 0),Q(this,"processorContext",void 0),this._userId=t,this._uintId=r,this.store=n}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,w.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}},Pp=(t$=Le({argsMap:(e,t,r)=>[e.getTrackId(),typeof t=="string"?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",r]}),r$=Le({argsMap:e=>[e.getTrackId()]}),n$=Le({argsMap:(e,t)=>[e.getTrackId(),t.name]}),i$=Le({argsMap:e=>[e.getTrackId()]}),_t((ha=class extends Lte{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==Ci.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,r,n){super(e,t,r,n),Q(this,"_videoVisibleTimer",null),Q(this,"_previousVideoVisibleStatus",void 0),Q(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),Q(this,"trackMediaType",Xm.VIDEO),Q(this,"_videoWidth",void 0),Q(this,"_videoHeight",void 0),Q(this,"_player",void 0),Q(this,"processorDestination",void 0),Q(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new Cte(this.getTrackId(),"remote"),this.processorDestination=new Tte(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return td(()=>{w.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),xa(this,be.GET_STATS)||hr({},fte)}play(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="string"){let n=document.getElementById(e);n?e=n:(w.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}w.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));let r=hr(hr({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(r):(e instanceof HTMLVideoElement?this._player=new UL(r):this._player=new kte(r),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(kp.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=n=>{this.safeEmit(kp.VIDEO_STATE_CHANGED,n)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{let n=this.getVideoElementVisibleStatus();this.safeEmit(kp.VIDEO_ELEMENT_VISIBLE_STATUS,n)}catch{}},L("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,w.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Ite(this._originMediaStreamTrack).then(e=>{let[t,r]=e;this._videoHeight=r,this._videoWidth=t}).catch(dC)}_updatePlayerSource(){w.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;let r=this==null||(e=this._player)===null||e===void 0?void 0:e.getContainerElement(),n={track:this,element:this==null||(t=this._player)===null||t===void 0?void 0:t.getVideoElement(),slot:r==null?void 0:r.parentElement},{element:i,slot:o}=n;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){let a=Bee.checkOneElementVisible(i),s=Object.assign({},a);if(s.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=s.visible;let l=Te.reportApiInvoke(null,{tag:xr.TRACER,name:en.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});s.visible?l.onSuccess("Video is visible"):l.onSuccess("Invisible because of ".concat(s.reason))}return s}return}catch(r){throw new J(O.GET_VIDEO_ELEMENT_VISIBLE_ERROR,r.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new J(O.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;let e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Bi.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Bi.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(hh.SEI_RECEIVED,e)}}).prototype,"play",[t$],Object.getOwnPropertyDescriptor(ha.prototype,"play"),ha.prototype),_t(ha.prototype,"stop",[r$],Object.getOwnPropertyDescriptor(ha.prototype,"stop"),ha.prototype),_t(ha.prototype,"pipe",[n$],Object.getOwnPropertyDescriptor(ha.prototype,"pipe"),ha.prototype),_t(ha.prototype,"unpipe",[i$],Object.getOwnPropertyDescriptor(ha.prototype,"unpipe"),ha.prototype),ha),Dp=(o$=Le({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),a$=Le({argsMap:(e,t)=>[e.getTrackId(),t]}),s$=Le({argsMap:e=>[e.getTrackId()]}),l$=Le({argsMap:e=>[e.getTrackId()]}),c$=Le({argsMap:(e,t)=>[e.getTrackId(),t.name]}),u$=Le({argsMap:e=>[e.getTrackId()]}),_t((_i=class extends Lte{get isPlaying(){return this._useAudioElement?Ji.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,r,n){super(e,t,r,n),Q(this,"trackMediaType",Xm.AUDIO),Q(this,"_source",void 0),Q(this,"_useAudioElement",!0),Q(this,"_volume",100),Q(this,"processorContext",void 0),Q(this,"processorDestination",void 0),Q(this,"_played",!1),Q(this,"_bypassWebAudio",!1),L("DISABLE_WEBAUDIO")?(this._source=new Ek,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new yte(e,!0),L("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(Ko.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(kp.FIRST_FRAME_DECODED)}),this.processorContext=new Rte(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new xte(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(Ko.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!e)return this._source.removeAllListeners(Ko.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Ko.ON_AUDIO_BUFFER),this._source.on(Ko.ON_AUDIO_BUFFER,r=>e(r))}setVolume(e){this._volume=e,this._useAudioElement?Ji.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!dte())throw new J(O.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Ji.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return td(()=>{w.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),xa(this,be.GET_STATS)||hr({},hte)}play(){w.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(w.debug("[".concat(this.getTrackId(),"] use audio element to play")),Ji.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){w.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?Ji.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];w.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Ji.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new J(O.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new J(O.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new J(O.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;let t=this.processor;(e=this._source.processSourceNode)===null||e===void 0||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(Bi.ON_TRACK,async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(Bi.ON_NODE,e=>{this._source.processedNode=e;let t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(Bi.ON_TRACK),this.processorDestination.removeAllListeners(Bi.ON_NODE)}}).prototype,"setVolume",[o$],Object.getOwnPropertyDescriptor(_i.prototype,"setVolume"),_i.prototype),_t(_i.prototype,"setPlaybackDevice",[a$],Object.getOwnPropertyDescriptor(_i.prototype,"setPlaybackDevice"),_i.prototype),_t(_i.prototype,"play",[s$],Object.getOwnPropertyDescriptor(_i.prototype,"play"),_i.prototype),_t(_i.prototype,"stop",[l$],Object.getOwnPropertyDescriptor(_i.prototype,"stop"),_i.prototype),_t(_i.prototype,"pipe",[c$],Object.getOwnPropertyDescriptor(_i.prototype,"pipe"),_i.prototype),_t(_i.prototype,"unpipe",[u$],Object.getOwnPropertyDescriptor(_i.prototype,"unpipe"),_i.prototype),_i),ac=new class extends _r{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),Q(this,"_lastHiddenTime",0),Q(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),w.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}},Mte=class extends _r{constructor(e,t){super(),Q(this,"trackMediaType",Xm.DATA),Q(this,"_version",1),Q(this,"_type",3),Q(this,"_config",void 0),Q(this,"_originDataChannel",void 0),Q(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),Q(this,"_dataStreamPacketHandler",{serialize:r=>r,deserialize:r=>r}),Q(this,"_datachannelEventMap",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader()}useDataStream(e){this._dataStreamPacketHandler=e}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return L("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var e,t;return(e=(t=this._originDataChannel)===null||t===void 0?void 0:t.readyState)!==null&&e!==void 0?e:"connecting"}get _originDataChannelId(){var e,t;return(e=(t=this._originDataChannel)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new fe((e,t)=>{if(this._originDataChannel){this._originDataChannel.readyState==="open"&&e();let r=setTimeout(()=>{var n;t(new J(O.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat((n=this._originDataChannel)===null||n===void 0?void 0:n.id)))},1e4);this._originDataChannel.onopen=()=>{clearTimeout(r),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(r),new J(O.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new J(O.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))})}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){let e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[w_.OPEN,w_.CLOSE,w_.ERROR].forEach(t=>{let r=()=>{this.emit(t)};this._datachannelEventMap.set(t,r),e.addEventListener(t,r)})}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach(t=>{let[r,n]=t;e.removeEventListener(r,n)}),this._datachannelEventMap.clear()}},C6e=class extends Mte{constructor(e){super(e),Q(this,"_messageListener",void 0),this._messageListener=t=>{if(t.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);let r=t.data.slice(0,this._dataStreamPacketHeader.byteLength),n=new DataView(r).getUint8(3);if(n!==this.id)return void(L("SHOW_DATASTREAM2_LOG")&&w.debug("invalid datachannel id: ".concat(n," !== ").concat(this.id)));let i=t.data.slice(this._dataStreamPacketHeader.byteLength);i=this._dataStreamPacketHandler.deserialize(i),this.emit(w_.MESSAGE,i)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}},x6e=class extends Mte{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);let r=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);r.set(new Uint8Array(this._dataStreamPacketHeader),0),r.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(r.buffer)}}};function T_(){let e=new Blob([atob("ZnVuY3Rpb24gZShlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLGE9W10sbz0wO2Zvcig7YS5sZW5ndGg8bjspbyszPG4mJjA9PT1yW29dJiYwPT09cltvKzFdJiYzPT09cltvKzJdJiYoMD09PXJbbyszXXx8MT09PXJbbyszXXx8Mj09PXJbbyszXXx8Mz09PXJbbyszXSk/KGEucHVzaChyW29dLHJbbysxXSxyW28rM10pLG8rPTQpOihhLnB1c2gocltvXSksbysrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9ZnVuY3Rpb24gdChlLHQpe2NvbnN0IG49ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmxlbmd0aDtsZXQgbj1bXSxyPTA7Zm9yKDtyPHQ7KXIrMjx0JiYwPT09ZVtyXSYmMD09PWVbcisxXSYmKDA9PT1lW3IrMl18fDE9PT1lW3IrMl18fDI9PT1lW3IrMl18fDM9PT1lW3IrMl0pPyhuLnB1c2goZVtyXSxlW3IrMV0sMyxlW3IrMl0pLHIrPTMpOihuLnB1c2goZVtyXSkscisrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9KHQpLHI9bi5sZW5ndGgsYT1NYXRoLmZsb29yKHIvMjU1KSxvPXIlMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNithKzErcitlLmJ5dGVMZW5ndGgpO3NbMF09MCxzWzFdPTAsc1syXT0wLHNbM109MSxzWzRdPTYsc1s1XT0xMDE7bGV0IGk9MDtmb3IoO2k8YTspc1s2K2ldPTI1NSxpKys7cmV0dXJuIHNbNitpXT1vLGkrKyxzLnNldChuLDYraSkscy5zZXQobmV3IFVpbnQ4QXJyYXkoZSksNitpK3IpLHMuYnVmZmVyfW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+LTEmJi0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJDaHJvbWUiKSYmKHNlbGYub25ydGN0cmFuc2Zvcm09bj0+e2NvbnN0IHI9bi50cmFuc2Zvcm1lcjtsZXQgYT1bXTtyLm9wdGlvbnMucG9ydC5vbm1lc3NhZ2U9ZT0+e2UuZGF0YS5zZWkmJmEucHVzaChlLmRhdGEuc2VpKX0sc2VsZi5wb3N0TWVzc2FnZSgic3RhcnRlZCIpO2NvbnN0IG89ci5yZWFkYWJsZS5nZXRSZWFkZXIoKSxzPXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7InJ4Ij09PXIub3B0aW9ucy5uYW1lP2Z1bmN0aW9uIHQobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgdD1mdW5jdGlvbih0KXtjb25zdCBuPW5ldyBEYXRhVmlldyh0LmRhdGEpO2xldCByPTA7Zm9yKDtyKzQ8dC5kYXRhLmJ5dGVMZW5ndGg7KXtpZigwPT09bi5nZXRVaW50OChyKzApJiYwPT09bi5nZXRVaW50OChyKzEpJiYwPT09bi5nZXRVaW50OChyKzIpJiYxPT09bi5nZXRVaW50OChyKzMpJiY2PT09bi5nZXRVaW50OChyKzQpKXtsZXQgYT1yKzYsbz0wLHM9MDtmb3IoOzI1NT09PShzPW4uZ2V0VWludDgoYSsrKSk7KW8rPTI1NTtvKz1zO2NvbnN0IGk9ZSh0LmRhdGEsYSxvKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoaSl9cisrfXJldHVybiBudWxsfShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1hLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout(()=>k6.revokeObjectURL(e),0),new Worker(k6.createObjectURL(e))}var mE=new Map,gE=new Map;function R6e(e,t,r){let n=new Uint8Array(e,t,r),i=[],o=0;for(;i.length<r;)o+3<r&&n[o]===0&&n[o+1]===0&&n[o+2]===3&&(n[o+3]===0||n[o+3]===1||n[o+3]===2||n[o+3]===3)?(i.push(n[o],n[o+1],n[o+3]),o+=4):(i.push(n[o]),o++);return new Uint8Array(i)}var yE=new Map;async function I6e(e,t){if(!Ct().supportWebRTCEncodedTransform)return void w.warning("browser not support video encoded transform");if(yE.has(e)||!e.track)return;let r={track:e.track};if(Bu()){if(!e.createEncodedStreams)return void w.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(s){return void w.error("create video-encoded-streams error",s&&s.message)}let o=[];t.on("sei-to-send",s=>{o.push(s)});let a=new TransformStream({transform(s,l){r.controller||(r.controller=l),e.track&&e.track.id!==r.track.id&&(w.debug("video track changed: ".concat(r.track.id," => ").concat(e.track.id)),r.track.removeEventListener("ended",n),r.track=e.track,r.track.addEventListener("ended",n));let c=o.shift();c&&(s.data=function(u,h){let f=function(b){let _=b.length,S=[],I=0;for(;I<_;)I+2<_&&b[I]===0&&b[I+1]===0&&(b[I+2]===0||b[I+2]===1||b[I+2]===2||b[I+2]===3)?(S.push(b[I],b[I+1],3,b[I+2]),I+=3):(S.push(b[I]),I++);return new Uint8Array(S)}(h),p=f.length,m=Math.floor(p/255),g=p%255,y=new Uint8Array(6+m+1+p+u.byteLength);y[0]=0,y[1]=0,y[2]=0,y[3]=1,y[4]=6,y[5]=101;let v=0;for(;v<m;)y[6+v]=255,v++;return y[6+v]=g,v++,y.set(f,6+v),y.set(new Uint8Array(u),6+v+p),y.buffer}(s.data,c)),l.enqueue(s)}});i.readable.pipeThrough(a).pipeTo(i.writable)}else{if(!qn())return;{if(typeof RTCRtpScriptTransform>"u")return void w.warning("browser not support RTCRtpScriptTransform");let i=T_(),o=new MessageChannel;await new fe(s=>i.onmessage=l=>{l.data==="registered"&&s(void 0)});let a=new RTCRtpScriptTransform(i,{name:"tx",port:o.port2},[o.port2]);e.transform=a,await new fe(s=>i.onmessage=l=>{l.data==="started"&&s(void 0)}),t.on("sei-to-send",s=>{o.port1.postMessage({sei:s})}),o.port1.onmessage=s=>{var l;s.data.transformed&&e.track&&((l=e.track)===null||l===void 0?void 0:l.id)!==r.track.id&&(w.debug("video track changed: ".concat(r.track.id," => ").concat(e.track.id)),r.track.removeEventListener("ended",n),r.track=e.track,r.track.addEventListener("ended",n))},r.worker=i}}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",n)}let i=yE.get(e);if(i){yE.delete(e);try{var o,a;(o=i.controller)===null||o===void 0||o.terminate(),(a=i.worker)===null||a===void 0||a.terminate()}catch(s){w.warning(s&&s.message)}}}yE.set(e,r),e.track.addEventListener("ended",n)}var Ug=new Map;(function(){let e=St();An.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),An.getStreamFromExtension=e.name===Mt.CHROME&&Number(e.version)>34,An.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t=new RTCPeerConnection,r=!1;try{t.addTransceiver("audio"),r=!0}catch{}return t.close(),r}(),An.supportMinBitrate=e.name===Mt.CHROME||e.name===Mt.EDGE,An.supportSetRtpSenderParameters=function(){let t=St();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!ed()||!(!qn()&&!oS())||t.name===Mt.FIREFOX&&Number(t.version)>=64)}(),e.name===Mt.SAFARI&&(Number(e.version)>=14?An.supportDualStream=!0:An.supportDualStream=!1),An.webAudioMediaStreamDest=function(){let t=St();return!(t.name===Mt.SAFARI&&Number(t.version)<12)}(),An.supportReplaceTrack=!!window.RTCRtpSender&&typeof RTCRtpSender.prototype.replaceTrack=="function",An.supportWebGL=typeof WebGLRenderingContext<"u",An.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,ed()||(An.webAudioWithAEC=!0),An.supportShareAudio=function(){let t=St();return(t.os===yn.WIN_10||t.os===yn.WIN_81||t.os===yn.WIN_7||t.os===yn.LINUX||t.os===yn.MAC_OS||t.os===yn.CHROMIUM_OS)&&t.name===Mt.CHROME&&Number(t.version)>=74}(),An.supportDataChannel=!!(ok(76)||function(t){let r=St();return!(r.name!==Mt.FIREFOX||!r.osVersion)&&Number(r.version)>=t}(68)||Lee(14)),An.supportPCSetConfiguration=function(){let t=window.RTCPeerConnection;return!Ir()&&!!t&&t.prototype.setConfiguration instanceof Function}(),An.supportWebRTCEncodedTransform=function(){let t=St();return t.name==="Chrome"&&Number(t.version)>=86||t.name==="Safari"&&Number(t.version)>=15}(),An.supportWebRTCInsertableStream=function(){let t=St();return(t.name===Mt.CHROME||t.name===Mt.EDGE)&&Number(t.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),An.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,An.supportWebCrypto=typeof window<"u"&&window.crypto!==void 0&&window.crypto.subtle!==void 0,uC(()=>{An.supportDualStreamEncoding=function(){let t=St();return!!L("DISABLE_WEBAUDIO")||t.name==="Safari"&&Number(t.version)>=14||!!(t.name==="Chrome"&&/Windows/i.test(t.os||"")&&Number(t.version)>=100&&L("CHROME_DUAL_STREAM_USE_ENCODING"))}(),w.info("browser compatibility",JSON.stringify(An),JSON.stringify(e))})})();var dS=class wk extends _r{constructor(t,r){super(),R(this,"signal",void 0),R(this,"token",void 0),R(this,"tokenTimeout",void 0),R(this,"tokenInterval",void 0),R(this,"_sequence",0),R(this,"userMap",new Map),R(this,"encoder",new TextEncoder),this.signal=t,this.token=r;let n=()=>{this.signal.connectionState===Zt.CONNECTED&&this.check(),this.userMap.size===0?this.tokenInterval=window.setTimeout(n,1e3):this.tokenInterval=window.setTimeout(n,3*L("P2P_TOKEN_INTERVAL"))};n()}async send(t,r,n,i,o){var a,s,l;if(this.userMap.size===0)return;let c=Array.from(Cc(a=this.userMap).call(a))[0].token;typeof r!="string"&&(r=JSON.stringify(r)),i=(s=i)!==null&&s!==void 0?s:er(6,""),o=(l=o)!==null&&l!==void 0?l:this._sequence++;let u={_id:i,_type:t,_seq:o,_message:r,token:"".concat(this.token,"_").concat(c)};L("SHOW_P2P_LOG")&&w.debug("send message",u,"noNeedResponse : ".concat(n)),this.splitMessage(JSON.stringify(u)).forEach(f=>{this.signal.request(Be.DATA_STREAM,{payload:$u(this.encoder.encode(f))})});let h=new fe((f,p)=>{let m=window.setTimeout(()=>{this.off("res-@".concat(i,"_ack"),g),this.off("res-@".concat(i),v),this.off(Cf.ABORT,y),w.debug("[external-signal] request timeout, type: ".concat(t,", requestId: ").concat(i)),this.userMap.size===0?p(new J(O.INVALID_REMOTE_USER)):p(new J(O.TIMEOUT))},L("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),g=()=>{m&&window.clearTimeout(m),this.off(Cf.ABORT,y),n&&f()},y=()=>{m&&window.clearTimeout(m),this.off("res-@".concat(i,"_ack"),g),this.off("res-@".concat(i),v),p(new J(O.EXTERNAL_SIGNAL_ABORT,"type: ".concat(t,", requestId: ").concat(i)))};this.once(Cf.ABORT,y),this.once("res-@".concat(i,"_ack"),g);let v=(_,S)=>{b=!0,m&&window.clearTimeout(m),this.off("res-@".concat(i,"_ack"),g),this.off(Cf.ABORT,y),_==="success"?f(S):p(new J(O.P2P_MESSAGE_FAILED,"request ".concat(t," failed, requestId: ").concat(i)))},b=!1;n||(this.once("res-@".concat(i),v),jn(L("SIGNAL_REQUEST_TIMEOUT")).then(()=>{b||w.warning("external_signal request timeout, type: ".concat(t,", requestId: ").concat(i,", ").concat(u))}))});try{return await h}catch(f){if(f.code===O.TIMEOUT)return await this.send(t,r,n,i,o);throw f}}onMessage(t){var r;let{_uid:n}=t,i,o=this.userMap.get(n);if(o)i=o.splitMessageMap;else{if(this.userMap.size>0||!("_type"in t)||t._type!==Dr.CHECK)return;let{token:c}=t;i=new Map,o={uid:n,isStart:!0,token:c,splitMessageMap:i,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(n,o),this.signal.emit(pt.ON_USER_ONLINE,{uid:n}),this.handleUserOnline()}if("id"in t&&"total"in t){var a;let{id:c,total:u}=t,h=(a=i.get(c))!==null&&a!==void 0?a:[];if(h.push(t),i.has(c)||i.set(c,h),h.length!==u)return;{let f=V0(h).call(h,(p,m)=>p.index-m.index).map(p=>p.payload).join("");i.delete(c),(t=JSON.parse(f))._uid=n}}let{_type:s,token:l}=t;if(ge(r=[Dr.ACK,Dr.CHECK]).call(r,s))return s===Dr.CHECK&&this.handleCheckToken(o,l),void this.receiveMessage(t);l==="".concat(o.token,"_").concat(this.token)?this.handleReceivedMessage(t):w.debug('Receive unexpected message", '.concat(l,", cur_token: ").concat(o.token,"_").concat(this.token),t)}check(){let t={_id:er(6,""),token:this.token,_type:Dr.CHECK};L("SHOW_P2P_LOG")&&w.debug("send message",t),this.signal.request(Be.DATA_STREAM,{payload:$u(this.encoder.encode(JSON.stringify(t)))})}ack(t){let r={_id:t,_type:Dr.ACK,token:this.token};L("SHOW_P2P_LOG")&&w.debug("send message",r),this.signal.request(Be.DATA_STREAM,{payload:$u(this.encoder.encode(JSON.stringify(r)))})}response(t,r,n){this.send(Dr.RESPONSE,JSON.stringify({success:!n,message:r}),!0,t)}handleReceivedMessage(t){let r=()=>{this.userMap.forEach(c=>{let{receivedMessagesMap:u,nextExpectedSequenceNumber:h}=c;for(;u.has(h);){let f=u.get(h);u.delete(h),this.receiveMessage(f),c.nextExpectedSequenceNumber++}})};if(!t)return void r();let{_uid:n,_seq:i}=t,o=this.userMap.get(n),{receivedMessagesMap:a,isStart:s,nextExpectedSequenceNumber:l}=o;if(i<l)return this.ack(t._id),void w.debug("[external-signal] receive old message, seq: ".concat(i,", ").concat(t._message));a.set(i,t),s&&i===l&&(this.receiveMessage(t),a.delete(l),o.nextExpectedSequenceNumber++,r())}receiveMessage(t){let{_id:r,_type:n,_message:i,_uid:o}=t;if(L("SHOW_P2P_LOG")&&w.debug("receive message",t),r){let a;switch(t._type!==Dr.ACK&&(i&&(a=JSON.parse(i)),this.ack(t._id)),t._type){case Dr.CANDIDATE:case Dr.CONTROL:this.signal.emit(n,a,o);break;case Dr.PUBLISH:case Dr.UNPUBLISH:case Dr.RESTART_ICE:case Dr.CALL:a.uid=o,Yn(this.signal,n,a).then(s=>{this.response(t._id,s)}).catch(()=>{this.response(t._id,void 0,!0)});break;case Dr.ACK:this.getListeners("res-@".concat(r,"_ack")).length>0&&this.emit("res-@".concat(r,"_ack"));break;case Dr.RESPONSE:{let{success:s,message:l}=a;this.emit("res-@".concat(r),s?"success":"failed",l);break}}}}splitMessage(t){if(t.length<wk.MAX_MESSAGE_SIZE)return[t];let r=[],{remoteToken:n}=JSON.parse(t),i=er(6,""),o=0,a=800,s=Math.ceil(t.length/a);for(;t.length>0;){o++;let l={id:i,index:o,total:s,payload:t.slice(0,a),token:"".concat(this.token,"_").concat(n)};JSON.stringify(l).length>wk.MAX_MESSAGE_SIZE?a-=50:(r.push(l),t=t.slice(a))}return r.map(l=>JSON.stringify(l))}handleCheckToken(t,r){return t.token!==r?(w.debug("token changed, from ".concat(t.token," to ").concat(r)),this.reset(t.uid,r),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout(()=>{w.debug("token timeout, ".concat(r)),this.reset(t.uid)},L("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){let t=await Yn(this.signal,Dr.CALL,void 0),r=await this.send(Dr.CALL,t);this.signal.emit(ze.P2P_CONNECTION,r,!0)}async reset(t,r){let n=this.userMap.get(t);n&&(this.emit(Cf.ABORT),this.signal.emit(pt.ON_USER_OFFLINE,{uid:n.uid,reason:zVe.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),r||(w.debug("change local token from ".concat(r," to ").concat(r)),this.token=er(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(Cf.ABORT)}};R(dS,"MAX_SIZE",1),R(dS,"MAX_MESSAGE_SIZE",1024);var d$=class extends _r{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===Zt.CONNECTED?this.emit(ze.WS_CONNECTED):e===Zt.RECONNECTING?this.emit(ze.WS_RECONNECTING,this._websocketReconnectReason):e===Zt.CLOSED&&this.emit(ze.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),R(this,"_disconnectedReason",void 0),R(this,"_websocketReconnectReason",void 0),R(this,"_connectionState",Zt.CLOSED),R(this,"reconnectToken",void 0),R(this,"p2pToken",void 0),R(this,"websocket",void 0),R(this,"openConnectionTime",void 0),R(this,"clientId",void 0),R(this,"lastMsgTime",Date.now()),R(this,"uploadCache",[]),R(this,"uploadCacheInterval",void 0),R(this,"rttRolling",new Kee(5)),R(this,"pingpongTimer",void 0),R(this,"pingpongTimeoutCount",0),R(this,"joinResponse",void 0),R(this,"multiIpOption",void 0),R(this,"initError",void 0),R(this,"spec",void 0),R(this,"store",void 0),R(this,"_external_signal",void 0),R(this,"onWebsocketMessage",r=>{if(r.data instanceof ArrayBuffer)return void this.emit(ze.ON_BINARY_DATA,r.data);let n=JSON.parse(r.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(n,"_id")){let i="res-@".concat(n._id);this.emit(i,n._result,n._message)}else if(Object.prototype.hasOwnProperty.call(n,"_type")){switch(n._type){case pt.ON_DATA_STREAM:return void this.handleDataStream(n._message);case pt.MUTE_AUDIO:case pt.MUTE_VIDEO:case pt.ON_P2P_LOST:case pt.ON_USER_ONLINE:return;case pt.ON_USER_OFFLINE:let{uid:i}=n._message;return w.debug("[".concat(this.clientId,"] user-offline uid: ").concat(i)),void this._external_signal.reset(i)}if(this.emit(n._type,n._message),n._type===pt.ON_NOTIFICATION&&this.handleNotification(n._message),n._type===pt.ON_USER_BANNED)switch(n._message.error_code){case 14:this.close(Bt.UID_BANNED);break;case 15:this.close(Bt.IP_BANNED);break;case 16:this.close(Bt.CHANNEL_BANNED)}if(n._type===pt.ON_USER_LICENSE_BANNED)switch(n._message.error_code){case De.ERR_LICENSE_MISSING:this.close(Bt.LICENSE_MISSING);break;case De.ERR_LICENSE_EXPIRED:this.close(Bt.LICENSE_EXPIRED);break;case De.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Bt.LICENSE_MINUTES_EXCEEDED);break;case De.ERR_LICENSE_PERIOD_INVALID:this.close(Bt.LICENSE_PERIOD_INVALID);break;case De.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Bt.LICENSE_MULTIPLE_SDK_SERVICE);break;case De.ERR_LICENSE_ILLEGAL:this.close(Bt.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new AL("gateway-".concat(this.clientId),this.spec.retryConfig,!0,L("JOIN_GATEWAY_USE_DUAL_DOMAIN"),L("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Zt.CONNECTED&&this.reconnect("retry",Kn.OFFLINE)}),this.p2pToken=er(6,""),this._external_signal=new dS(this,this.p2pToken)}async request(e,t,r,n){let i=er(6,""),o={_id:i,_type:e,_message:t},a=this.websocket.connectionID,s=()=>new fe((p,m)=>{if(this.connectionState===Zt.CONNECTED)return p();let g=()=>{this.off(ze.WS_CLOSED,y),p()},y=()=>{this.off(ze.WS_CONNECTED,g),m(new J(O.WS_ABORT))};this.once(ze.WS_CONNECTED,g),this.once(ze.WS_CLOSED,y)});if(this.connectionState!==Zt.CONNECTING&&this.connectionState!==Zt.RECONNECTING||e===Be.JOIN||e===Be.REJOIN||await s(),this.websocket.sendMessage(o,!0),n)return;let l=new fe((p,m)=>{let g=!1,y=(b,_)=>{g=!0,p({isSuccess:b==="success",message:_||{}}),this.off(ze.WS_CLOSED,v),this.off(ze.WS_RECONNECTING,v),this.emit(ze.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(i),y);let v=()=>{m(new J(O.WS_ABORT,"type: ".concat(e))),this.off(ze.WS_CLOSED,v),this.off(ze.WS_RECONNECTING,v),this.off("res-@".concat(i),y)};this.once(ze.WS_CLOSED,v),this.once(ze.WS_RECONNECTING,v),jn(L("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==a||g||(w.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(ze.REQUEST_TIMEOUT,e,t))})}),c=null;try{c=await l}catch(p){if(this.connectionState===Zt.CLOSED||e===Be.LEAVE)throw new J(O.WS_ABORT);return!this.spec.forceWaitGatewayResponse||r?p.throw():e===Be.JOIN||e===Be.REJOIN?null:(await s(),await this.request(e,t))}if(c.isSuccess)return c.message;let u=Number(c.message.error_code||c.message.code),h=jv(u),f=new J(O.UNEXPECTED_RESPONSE,"".concat(h.desc,": ").concat(c.message.error_str),{code:u,data:c.message,desc:h.desc});return h.action==="success"?c.message:(w.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(h.desc,", action: ").concat(h.action)),u===De.ERR_TOO_MANY_BROADCASTERS?((e===Be.JOIN||e===Be.REJOIN)&&(this.initError=f,this.close()),f.throw()):h.action==="failed"?f.throw():h.action==="quit"?(this.initError=f,this.close(),f.throw()):(u===De.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=c.message.option,w.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Kn.MULTI_IP)):this.reconnect(h.action,Kn.SERVER_ERROR),e===Be.JOIN||e===Be.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new fe(r=>{let n=i=>{(!t||t(i))&&(this.off(e,n),r(i))};this.on(e,n)})}uploadWRTCStats(e){if(!this.store.sessionId)return void w.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));let t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(Mv.WRTC_STATS,t)}upload(e,t){let r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch{let n=L("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>n&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Zt.CONNECTED)return;let i=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(i._type,i._message)},L("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){let r={_type:e,_message:t};this.websocket.sendMessage(r)}async sendExtensionMessage(e,t,r){return await this._external_signal.send(e,t,r)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new fe((t,r)=>{this.once(ze.WS_CONNECTED,()=>t(this.joinResponse)),this.once(ze.WS_CLOSED,()=>r(this.initError||new J(O.WS_ABORT))),this.connectionState=Zt.CONNECTING,this.websocket.init(e).catch(r)})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||Bt.LEAVE,this.connectionState=Zt.CLOSED,w.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),this.p2pToken=er(6,""),this._external_signal.clear(),this._external_signal=new dS(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(ze.ABORT_P2P_EXECUTION);let e=await Yn(this,ze.REQUEST_JOIN_INFO),t=await this.request(Be.JOIN,e);if(!t)return this.emit(ze.REPORT_JOIN_GATEWAY,O.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(ze.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Zt.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;let r=Xd(e.payload),n=new TextDecoder().decode(r),i=JSON.parse(n);"total"in i&&"id"in i||ge(t=Object.values(Dr)).call(t,i._type)?(i._uid=e.uid,this._external_signal.onMessage(i)):this.emit(pt.ON_DATA_STREAM,e)}catch{this.emit(pt.ON_DATA_STREAM,e)}}handleNotification(e){w.debug("[".concat(this.clientId,"] receive notification: "),e);let t=jv(e.code);if(t.action!=="success"){if(t.action!=="failed")return t.action==="quit"?(t.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Bt.UID_BANNED),void this.close()):void this.reconnect(t.action,Kn.SERVER_ERROR);w.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;let e=L("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(w.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>L("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Kn.TIMEOUT):this.request(Be.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;let r=Date.now()-t;this.rttRolling.add(r),L("REPORT_STATS")&&this.send(Be.PING_BACK,{pingpongElapse:r})}).catch(r=>{})}handleWebsocketEvents(){this.websocket.on(Ke.RECONNECT_WAITTING_FINISH,e=>{this.emit(ze.WS_RECONNECT_WAITTING_FINISH,e)}),this.websocket.on(Ke.RECONNECT_CREATE_CONNECTION,e=>{this.emit(ze.WS_RECONNECT_CREATE_CONNECTION,e)}),this.websocket.on(Ke.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(Ke.CLOSED,()=>{this.connectionState=Zt.CLOSED}),this.websocket.on(Ke.FAILED,()=>{this._disconnectedReason=Bt.NETWORK_ERROR,this.connectionState=Zt.CLOSED}),this.websocket.on(Ke.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===Zt.CONNECTED?this.connectionState=Zt.RECONNECTING:this.connectionState=Zt.CONNECTING}),this.websocket.on(Ke.WILL_RECONNECT,(e,t,r)=>{e!=="retry"?(w.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0):w.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),r(e)}),this.websocket.on(Ke.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.join().catch(e=>{if(this.emit(ze.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof J&&e.code===O.UNEXPECTED_RESPONSE&&e.data.code===De.ERR_NO_AUTHORIZED)return w.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Kn.SERVER_ERROR);w.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Kn.SERVER_ERROR):(this.initError=e,this.close())})}),this.websocket.on(Ke.REQUEST_NEW_URLS,(e,t)=>{Yn(this,ze.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)}),this.websocket.on(Ke.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(pt.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}},jte={exports:{}};jte.exports=(()=>{var e={8:(n,i,o)=>{o.r(i),o.d(i,{Parser:()=>H,Printer:()=>$,parse:()=>P,print:()=>B});let a=`
`,s="".concat("\r").concat(a),l=" ",c;function u(x){return x>="0"&&x<="9"}function h(x){return x>="!"&&x<="~"}function f(x){return h(x)||x>=""&&x<="ÿ"}function p(x){return x==="!"||x>="#"&&x<="'"||x>="*"&&x<="+"||x>="-"&&x<="."||x>="0"&&x<="9"||x>="A"&&x<="Z"||x>="^"&&x<="~"}function m(x){return x>="1"&&x<="9"}function g(x){return x>="A"&&x<="Z"||x>="a"&&x<="z"}function y(x){return x==="d"||x==="h"||x==="m"||x==="s"}function v(x){return x>""&&x<"	"||x>"\v"&&x<"\f"||x>""&&x<"ÿ"}function b(x){return g(x)||u(x)||x==="+"||x==="/"}function _(x){return u(x)||g(x)||x==="+"||x==="/"||x==="-"||x==="_"}function S(x){return g(x)||u(x)||x==="+"||x==="/"}function I(x,E){var N=Object.keys(x);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(x);E&&(C=C.filter(function(W){return Object.getOwnPropertyDescriptor(x,W).enumerable})),N.push.apply(N,C)}return N}function A(x){for(var E=1;E<arguments.length;E++){var N=arguments[E]!=null?arguments[E]:{};E%2?I(Object(N),!0).forEach(function(C){D(x,C,N[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(N)):I(Object(N)).forEach(function(C){Object.defineProperty(x,C,Object.getOwnPropertyDescriptor(N,C))})}return x}function D(x,E,N){return E in x?Object.defineProperty(x,E,{value:N,enumerable:!0,configurable:!0,writable:!0}):x[E]=N,x}(function(x){x.VERSION="v",x.ORIGIN="o",x.SESSION_NAME="s",x.INFORMATION="i",x.URI="u",x.EMAIL="e",x.PHONE="p",x.CONNECTION="c",x.BANDWIDTH="b",x.TIME="t",x.REPEAT="r",x.ZONE_ADJUSTMENTS="z",x.KEY="k",x.ATTRIBUTE="a",x.MEDIA="m"})(c||(c={}));class M{consumeText(E,N){let C=N;for(;C<E.length;){let W=E[C];if(W==="\0"||W==="\r"||W===a)break;C+=1}if(C-N==0)throw new Error("Invalid text, at ".concat(E));return C}consumeUnicastAddress(E,N,C){return this.consumeTill(E,N,l)}consumeOneOrMore(E,N,C){let W=N;for(;C(E[W]);)W++;if(W-N==0)throw new Error("Invalid rule at ".concat(N,"."));return W}consumeSpace(E,N){if(E[N]===l)return N+1;throw new Error("Invalid space at ".concat(N,"."))}consumeIP4Address(E,N){let C=N;for(let W=0;W<4;W++)if(C=this.consumeDecimalUChar(E,C),W!==3){if(E[C]!==".")throw new Error("Invalid IP4 address.");C++}return C}consumeDecimalUChar(E,N){let C=N;for(let U=0;U<3&&u(E[C]);U++,C++);if(C-N==0)throw new Error("Invalid decimal uchar.");let W=parseInt(E.slice(N,C));if(W>=0&&W<=255)return C;throw new Error("Invalid decimal uchar")}consumeIP6Address(E,N){let C=this.consumeHexpart(E,N);return E[C]===":"&&(C+=1,C=this.consumeIP4Address(E,C)),C}consumeHexpart(E,N){let C=N;if(E[C]===":"&&E[C+1]===":"){C+=2;try{C=this.consumeHexseq(E,C)}catch{}return C}if(C=this.consumeHexseq(E,C),E[C]===":"&&E[C+1]===":"){C+=2;try{C=this.consumeHexseq(E,C)}catch{}return C}return C}consumeHexseq(E,N){let C=N;for(;C=this.consumeHex4(E,C),E[C]===":"&&E[C+1]!==":";)C+=1;return C}consumeHex4(E,N){let C=0;for(;C<4;C++)if(!((W=E[N+C])>="0"&&W<="9"||W>="a"&&W<="f"||W>="A"&&W<="F")){if(C===0)throw new Error("Invalid hex 4");break}var W;return N+C}consumeFQDN(E,N){let C=N;for(;u(E[C])||g(E[C])||E[C]==="-"||E[C]===".";)C+=1;if(C-N<4)throw new Error("Invalid FQDN");return C}consumeExtnAddr(E,N){return this.consumeOneOrMore(E,N,f)}consumeMulticastAddress(E,N,C){switch(C){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(E,N);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(E,N);default:try{return this.consumeFQDN(E,N)}catch{return this.consumeExtnAddr(E,N)}}}consumeIP6MulticastAddress(E,N){let C=this.consumeHexpart(E,N);return E[C]==="/"?this.consumeInteger(E,C+1):C}consumeIP4MulticastAddress(E,N){let C=N+3,W=E.slice(N,C),U=parseInt(W);if(U<224||U>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let X=0;X<3;X++){if(E[C]!==".")throw new Error("Invalid IP4 multicast address.");C+=1,C=this.consumeDecimalUChar(E,C)}return E[C]==="/"&&(C+=1),C=this.consumeTTL(E,C),E[C]==="/"&&(C=this.consumeInteger(E,C)),C}consumeInteger(E,N){if(!m(E[N]))throw new Error("Invalid integer.");for(N+=1;u(E[N]);)N+=1;return N}consumeTTL(E,N){if(E[N]==="0")return N+1;if(!m(E[N]))throw new Error("Invalid TTL.");N+=1;for(let C=0;C<2&&u(E[N]);C++)N+=1;return N}consumeToken(E,N){return this.consumeOneOrMore(E,N,p)}consumeTime(E,N){let C=N;if(E[C]==="0")return C+1;for(m(E[C])&&(C+=1);u(E[C]);)C++;if(C-N<10)throw new Error("Invalid time");return C}consumeAddress(E,N){return this.consumeTill(E,N,l)}consumeTypedTime(E,N){let C=N;return C=this.consumeOneOrMore(E,C,u),y(E[C])?C+1:C}consumeRepeatInterval(E,N){if(!m(E[N]))throw new Error("Invalid repeat interval");for(N+=1;u(E[N]);)N+=1;return y(E[N])&&(N+=1),N}consumePort(E,N){return this.consumeOneOrMore(E,N,u)}consume(E,N,C){for(let W=0;W<C.length;W++){if(N+W>=E.length)throw new Error("consume exceeding value length");if(E[N+W]!==C[W])throw new Error("consume ".concat(C," failed at ").concat(W))}return N+C.length}consumeTill(E,N,C){let W=N;for(;W<E.length&&(typeof C!="string"||E[W]!==C)&&(typeof C!="function"||!C(E[W]));)W++;return W}}class H extends M{constructor(){super(),D(this,"records",[]),D(this,"currentLine",0)}parse(E){let N=this.probeEOL(E);this.records=E.split(N).filter(bt=>!!Ri(bt).call(bt)).map(this.parseLine),this.currentLine=0;let C=this.parseVersion(),W=this.parseOrigin(),U=this.parseSessionName(),X=this.parseInformation(),ae=this.parseUri(),he=this.parseEmail(),pe=this.parsePhone(),Pe=this.parseConnection(),$e=this.parseBandWidth(),je=this.parseTimeFields(),ot=this.parseKey(),Nt=this.parseSessionAttribute(),et=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:C,origin:W,sessionName:U,information:X,uri:ae,emails:he,phones:pe,connection:Pe,bandwidths:$e,timeFields:je,key:ot,attributes:Nt,mediaDescriptions:et}}getCurrentRecord(){let E=this.records[this.currentLine];if(!E)throw new Error("Record doesn't exit.");return E}probeEOL(E){for(let N=0;N<E.length;N++)if(E[N]===a)return E[N-1]==="\r"?s:a;throw new Error("Invalid newline character.")}parseLine(E,N){if(E.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");let C=E[0];if(E[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:C,value:E.slice(2),line:N,cur:0}}parseSessionAttribute(){let E=new G;for(;this.currentLine<this.records.length;){let N=this.getCurrentRecord();if(N.type!==c.ATTRIBUTE)break;let C={attField:this.extractOneOrMore(N,W=>p(W)&&W!==":"),_cur:0};N.value[N.cur]===":"&&(N.cur+=1,C.attValue=this.extractOneOrMore(N,v)),E.parse(C),this.currentLine++}return E.digest()}parseMediaAttributes(E){let N=new Y(E);for(;this.currentLine<this.records.length;){let C=this.getCurrentRecord();if(C.type!==c.ATTRIBUTE)break;let W={attField:this.extractOneOrMore(C,U=>p(U)&&U!==":"),_cur:0};C.value[C.cur]===":"&&(C.cur+=1,W.attValue=this.extractOneOrMore(C,v)),N.parse(W),this.currentLine++}return N.digest()}parseKey(){let E=this.getCurrentRecord();if(E.type===c.KEY){if(E.value==="prompt"||E.value==="clear:"||E.value==="base64:"||E.value==="uri:")return E.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){let E=this.getCurrentRecord();if(E.type===c.ZONE_ADJUSTMENTS){let N=[];for(;;)try{let C=this.extract(E,this.consumeTime);this.consumeSpaceForRecord(E);let W=!1;E.value[E.cur]==="-"&&(W=!0,E.cur+=1);let U=this.extract(E,this.consumeTypedTime);N.push({time:C,typedTime:U,back:W})}catch{break}if(N.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,N}return[]}parseRepeat(){let E=[];for(;;){let N=this.getCurrentRecord();if(N.type!==c.REPEAT)break;{let C=this.extract(N,this.consumeRepeatInterval),W=this.parseTypedTime(N);E.push({repeatInterval:C,typedTimes:W}),this.currentLine++}}return E}parseTypedTime(E){let N=[];for(;;)try{this.consumeSpaceForRecord(E),N.push(this.extract(E,this.consumeTypedTime))}catch{break}if(N.length===0)throw new Error("Invalid typed time.");return N}parseTime(){let E=this.getCurrentRecord(),N=this.extract(E,this.consumeTime);this.consumeSpaceForRecord(E);let C=this.extract(E,this.consumeTime);return this.currentLine++,{startTime:N,stopTime:C}}parseBandWidth(){let E=[];for(;this.currentLine<this.records.length;){let N=this.getCurrentRecord();if(N.type!==c.BANDWIDTH)break;{let C=this.extractOneOrMore(N,p);if(N.value[N.cur]!==":")throw new Error("Invalid bandwidth field.");N.cur++;let W=this.extractOneOrMore(N,u);E.push({bwtype:C,bandwidth:W}),this.currentLine++}}return E}parseVersion(){let E=this.getCurrentRecord();if(E.type!==c.VERSION)throw new Error("first sdp record must be version");let N=E.value.slice(0,this.consumeOneOrMore(E.value,0,u));if(N.length!==E.value.length)throw new Error('invalid proto version, "v='.concat(E.value,'"'));return this.currentLine++,N}parseOrigin(){let E=this.getCurrentRecord();if(E.type!==c.ORIGIN)throw new Error("second line of sdp must be origin");let N=this.extractOneOrMore(E,f);this.consumeSpaceForRecord(E);let C=this.extractOneOrMore(E,u);this.consumeSpaceForRecord(E);let W=this.extractOneOrMore(E,u);this.consumeSpaceForRecord(E);let U=this.extractOneOrMore(E,p);this.consumeSpaceForRecord(E);let X=this.extractOneOrMore(E,p);this.consumeSpaceForRecord(E);let ae=this.extract(E,this.consumeUnicastAddress);return this.currentLine++,{username:N,sessId:C,sessVersion:W,nettype:U,addrtype:X,unicastAddress:ae}}parseSessionName(){let E=this.getCurrentRecord();if(E.type===c.SESSION_NAME){let N=this.extract(E,this.consumeText);return this.currentLine++,N}}parseInformation(){let E=this.getCurrentRecord();if(E.type!==c.INFORMATION)return;let N=this.extract(E,this.consumeText);return this.currentLine++,N}parseUri(){let E=this.getCurrentRecord();if(E.type===c.URI)return this.currentLine++,E.value}parseEmail(){let E=[];for(;;){let N=this.getCurrentRecord();if(N.type!==c.EMAIL)break;E.push(N.value),this.currentLine++}return E}parsePhone(){let E=[];for(;;){let N=this.getCurrentRecord();if(N.type!==c.PHONE)break;E.push(N.value),this.currentLine++}return E}parseConnection(){let E=this.getCurrentRecord();if(E.type===c.CONNECTION){let N=this.extractOneOrMore(E,p);this.consumeSpaceForRecord(E);let C=this.extractOneOrMore(E,p);this.consumeSpaceForRecord(E);let W=this.extract(E,this.consumeAddress);return this.currentLine++,{nettype:N,addrtype:C,address:W}}}parseMedia(){let E=this.getCurrentRecord(),N=this.extract(E,this.consumeToken);this.consumeSpaceForRecord(E);let C=this.extract(E,this.consumePort);E.value[E.cur]==="/"&&(E.cur+=1,C+=this.extract(E,this.consumeInteger)),this.consumeSpaceForRecord(E);let W=[];for(W.push(this.extract(E,this.consumeToken));E.value[E.cur]==="/";)E.cur+=1,W.push(this.extract(E,this.consumeToken));if(W.length===0)throw new Error("Invalid proto");let U=this.parseFmt(E);return this.currentLine++,{mediaType:N,port:C,protos:W,fmts:U}}parseTimeFields(){let E=[];for(;this.getCurrentRecord().type===c.TIME;){let N=this.parseTime(),C=this.parseRepeat(),W=this.parseZone();E.push({time:N,repeats:C,zones:W})}return E}parseMediaDescription(){let E=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===c.MEDIA;){let N=this.parseMedia(),C=this.parseInformation(),W=this.parseConnections(),U=this.parseBandWidth(),X=this.parseKey(),ae=this.parseMediaAttributes(N);E.push({media:N,information:C,connections:W,bandwidths:U,key:X,attributes:ae})}return E}parseConnections(){let E=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===c.CONNECTION;)E.push(this.parseConnection());return E}parseFmt(E){let N=[];for(;;)try{this.consumeSpaceForRecord(E),N.push(this.extract(E,this.consumeToken))}catch{break}if(N.length===0)throw new Error("Invalid fmts");return N}extract(E,N){for(var C=arguments.length,W=new Array(C>2?C-2:0),U=2;U<C;U++)W[U-2]=arguments[U];let X=N.call(this,E.value,E.cur,...W),ae=E.value.slice(E.cur,X);return E.cur=X,ae}extractOneOrMore(E,N){let C=this.consumeOneOrMore(E.value,E.cur,N),W=E.value.slice(E.cur,C);return E.cur=C,W}consumeSpaceForRecord(E){if(E.value[E.cur]!==l)throw new Error("Invalid space at ".concat(E.cur,"."));E.cur+=1}}class V extends M{constructor(){super(...arguments),D(this,"attributes",void 0),D(this,"digested",!1)}extractOneOrMore(E,N,C){let W=this.consumeOneOrMore(E.attValue,E._cur,N),U=E.attValue.slice(E._cur,W),[X,ae]=C||[];if(typeof X=="number"&&U.length<X)throw new Error("error in length, should be more or equal than ".concat(X," characters."));if(typeof ae=="number"&&U.length>ae)throw new Error("error in length, should be less or equal than ".concat(ae," characters."));return E._cur=W,U}consumeAttributeSpace(E){if(E.attValue[E._cur]!==l)throw new Error("Invalid space at ".concat(E._cur,"."));E._cur+=1}extract(E,N){if(!E.attValue)throw new Error("Nothing to extract from attValue.");for(var C=arguments.length,W=new Array(C>2?C-2:0),U=2;U<C;U++)W[U-2]=arguments[U];let X=N.call(this,E.attValue,E._cur,...W),ae=E.attValue.slice(E._cur,X);return E._cur=X,ae}atEnd(E){if(!E.attValue)throw new Error;return E._cur>=E.attValue.length}peekChar(E){if(!E.attValue)throw new Error;return E.attValue[E._cur]}peek(E,N){if(!E.attValue)throw new Error;for(let C=0;C<N.length;C++)if(N[C]!==E.attValue[E._cur+C])return!1;return!0}parseIceUfrag(E){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(E,b,[4,256])}parseIcePwd(E){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(E,b,[22,256])}parseIceOptions(E){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");let N=[];for(;!this.atEnd(E);){N.push(this.extractOneOrMore(E,b));try{this.consumeAttributeSpace(E)}catch(C){if(this.atEnd(E))break;throw C}}this.attributes.iceOptions=N}parseFingerprint(E){let N=this.extract(E,this.consumeToken);this.consumeAttributeSpace(E);let C=this.extract(E,this.consumeTill);this.attributes.fingerprints.push({hashFunction:N,fingerprint:C})}parseExtmap(E){let N=this.extractOneOrMore(E,u),C;this.peekChar(E)==="/"&&(this.extract(E,this.consume,"/"),C=this.extract(E,this.consumeToken)),this.consumeAttributeSpace(E);let W=this.extract(E,this.consumeTill,l),U=A(A({entry:parseInt(N,10)},C&&{direction:C}),{},{extensionName:W});this.peekChar(E)===l&&(this.consumeAttributeSpace(E),U.extensionAttributes=this.extract(E,this.consumeTill)),this.attributes.extmaps.push(U)}parseSetup(E){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");let N=this.extract(E,this.consumeTill);if(N!=="active"&&N!=="passive"&&N!=="actpass"&&N!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=N}}class G extends V{constructor(){super(...arguments),D(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(E){if(this.digested)throw new Error("already digested");try{switch(E.attField){case"group":this.parseGroup(E);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(E);break;case"ice-pwd":this.parseIcePwd(E);break;case"ice-options":this.parseIceOptions(E);break;case"fingerprint":this.parseFingerprint(E);break;case"setup":this.parseSetup(E);break;case"tls-id":this.parseTlsId(E);break;case"identity":this.parseIdentity(E);break;case"extmap":this.parseExtmap(E);break;case"msid-semantic":this.parseMsidSemantic(E);break;default:E.ignored=!0,this.attributes.unrecognized.push(E)}}catch(N){throw console.error("parsing session attribute ".concat(E.attField,' error, "a=').concat(E.attField,":").concat(E.attValue,'"')),N}if(!E.ignored&&E.attValue&&!this.atEnd(E))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(E){let N=this.extract(E,this.consumeToken),C=[];for(;!this.atEnd(E)&&this.peekChar(E)===l;)this.consumeAttributeSpace(E),C.push(this.extract(E,this.consumeToken));this.attributes.groups.push({semantic:N,identificationTag:C})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(E){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(E,_)}parseIdentity(E){let N=this.extractOneOrMore(E,S),C=[];for(;!this.atEnd(E)&&this.peekChar(E)===l;){this.consumeAttributeSpace(E);let W=this.extract(E,this.consumeToken);this.extract(E,this.consume,"=");let U=this.extractOneOrMore(E,X=>X!==l&&v(X));C.push({name:W,value:U})}this.attributes.identities.push({assertionValue:N,extensions:C})}parseMsidSemantic(E){this.peekChar(E)===l&&this.consumeAttributeSpace(E);let N={semantic:this.extract(E,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(E)}catch{break}if(this.peekChar(E)==="*"){this.extract(E,this.consume,"*"),N.applyForAll=!0;break}{let C=this.extract(E,this.consumeTill,l);N.identifierList.push(C)}}this.attributes.msidSemantic=N}}class Y extends V{constructor(E){super(),D(this,"attributes",void 0),E.protos.indexOf("RTP")!==-1||E.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(E){if(this.digested)throw new Error("already digested");try{switch(E.attField){case"extmap":this.parseExtmap(E);break;case"setup":this.parseSetup(E);break;case"ice-ufrag":this.parseIceUfrag(E);break;case"ice-pwd":this.parseIcePwd(E);break;case"ice-options":this.parseIceOptions(E);break;case"candidate":this.parseCandidate(E);break;case"remote-candidate":this.parseRemoteCandidate(E);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(E);break;case"rtpmap":this.parseRtpmap(E);break;case"ptime":this.parsePtime(E);break;case"maxptime":this.parseMaxPtime(E);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(E);break;case"ssrc":this.parseSSRC(E);break;case"fmtp":this.parseFmtp(E);break;case"rtcp-fb":this.parseRtcpFb(E);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(E);break;case"mid":this.parseMid(E);break;case"msid":this.parseMsid(E);break;case"imageattr":this.parseImageAttr(E);break;case"rid":this.parseRid(E);break;case"simulcast":this.parseSimulcast(E);break;case"sctp-port":this.parseSctpPort(E);break;case"max-message-size":this.parseMaxMessageSize(E);break;case"ssrc-group":this.parseSSRCGroup(E);break;default:E.ignored=!0,this.attributes.unrecognized.push(E)}}catch(N){throw console.error("parsing media attribute ".concat(E.attField,' error, "a=').concat(E.attField,":").concat(E.attValue,'"')),N}if(!E.ignored&&E.attValue&&!this.atEnd(E))throw new Error("attribute parsing error")}parseCandidate(E){let N=this.extractOneOrMore(E,b,[1,32]);this.consumeAttributeSpace(E);let C=this.extractOneOrMore(E,u,[1,5]);this.consumeAttributeSpace(E);let W=this.extract(E,this.consumeToken);this.consumeAttributeSpace(E);let U=this.extractOneOrMore(E,u,[1,10]);this.consumeAttributeSpace(E);let X=this.extract(E,this.consumeAddress);this.consumeAttributeSpace(E);let ae=this.extract(E,this.consumePort);this.consumeAttributeSpace(E),this.extract(E,this.consume,"typ"),this.consumeAttributeSpace(E);let he={foundation:N,componentId:C,transport:W,priority:U,connectionAddress:X,port:ae,type:this.extract(E,this.consumeToken),extension:{}};for(this.peek(E," raddr")&&(this.extract(E,this.consume," raddr"),this.consumeAttributeSpace(E),he.relAddr=this.extract(E,this.consumeAddress)),this.peek(E," rport")&&(this.extract(E,this.consume," rport"),this.consumeAttributeSpace(E),he.relPort=this.extract(E,this.consumePort));this.peekChar(E)===l;){this.consumeAttributeSpace(E);let pe=this.extract(E,this.consumeToken);this.consumeAttributeSpace(E),he.extension[pe]=this.extractOneOrMore(E,h)}this.attributes.candidates.push(he)}parseRemoteCandidate(E){let N=[];for(;;){let C=this.extractOneOrMore(E,u,[1,5]);this.consumeAttributeSpace(E);let W=this.extract(E,this.consumeAddress);this.consumeAttributeSpace(E);let U=this.extract(E,this.consumePort);N.push({componentId:C,connectionAddress:W,port:U});try{this.consumeAttributeSpace(E)}catch{break}}this.attributes.remoteCandidatesList.push(N)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(E){let N=this.extract(E,this.consumeToken);this.consumeAttributeSpace(E);let C=this.extract(E,this.consumeTill,"/");this.extract(E,this.consume,"/");let W={encodingName:C,clockRate:this.extractOneOrMore(E,u)};this.atEnd(E)||this.peekChar(E)!=="/"||(this.extract(E,this.consume,"/"),W.encodingParameters=parseInt(this.extract(E,this.consumeTill),10));let U=this.attributes.payloads.find(X=>X.payloadType===parseInt(N,10));U?U.rtpMap=W:this.attributes.payloads.push({payloadType:parseInt(N,10),rtpMap:W,rtcpFeedbacks:[]})}parsePtime(E){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(E,this.consumeTill)}parseMaxPtime(E){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(E,this.consumeTill)}parseDirection(E){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=E.attField}parseSSRC(E){let N=this.extractOneOrMore(E,u);this.consumeAttributeSpace(E);let C=this.extract(E,this.consumeTill,":"),W;this.peekChar(E)===":"&&(this.extract(E,this.consume,":"),W=this.extract(E,this.consumeTill));let U=this.attributes.ssrcs.find(X=>X.ssrcId===parseInt(N,10));U?U.attributes[C]=W:this.attributes.ssrcs.push({ssrcId:parseInt(N,10),attributes:{[C]:W}})}parseFmtp(E){let N=this.extract(E,this.consumeTill,l);this.consumeAttributeSpace(E);let C=this.extract(E,this.consumeTill),W={};C.split(";").forEach(X=>{let[ae,he]=X.split("=");ae=Ri(ae).call(ae);let pe=typeof he=="string"?Ri(he).call(he):null;typeof ae=="string"&&ae.length>0&&(W[ae]=pe)});let U=this.attributes.payloads.find(X=>X.payloadType===parseInt(N,10));U?U.fmtp={parameters:W}:this.attributes.payloads.push({payloadType:parseInt(N,10),rtcpFeedbacks:[],fmtp:{parameters:W}})}parseFmtParameters(E){let N={},C=this.extract(E,this.consumeTill,"=");E._cur++;let W=this.extract(E,this.consumeTill,";");for(N[C]=W;E.attValue[E._cur]===";";){let U=this.extract(E,this.consumeTill,"=");E._cur++;let X=this.extract(E,this.consumeTill,";");N[U]=X}return N}parseRtcpFb(E){let N="";N=this.peekChar(E)==="*"?this.extract(E,this.consume,"*"):this.extract(E,this.consumeTill,l),this.consumeAttributeSpace(E);let C=this.extract(E,this.consumeTill,l),W;if(C==="trr-int")W={type:C,interval:this.extract(E,this.consumeTill)};else{let U={type:C};this.peekChar(E)===l&&(this.consumeAttributeSpace(E),U.parameter=this.extract(E,this.consumeToken),this.peekChar(E)===l&&(U.additional=this.extract(E,this.consumeTill))),W=U}if(N==="*")this.attributes.rtcpFeedbackWildcards.push(W);else{let U=this.attributes.payloads.find(X=>X.payloadType===parseInt(N,10));U?U.rtcpFeedbacks.push(W):this.attributes.payloads.push({payloadType:parseInt(N,10),rtcpFeedbacks:[W]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(E){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");let N={port:this.extract(E,this.consumePort)};this.peekChar(E)===l&&(this.consumeAttributeSpace(E),N.netType=this.extractOneOrMore(E,p),this.consumeAttributeSpace(E),N.addressType=this.extractOneOrMore(E,p),this.consumeAttributeSpace(E),N.address=this.extract(E,this.consumeAddress)),this.attributes.rtcp=N}parseMsid(E){let N={id:this.extractOneOrMore(E,p,[1,64])};this.peekChar(E)===l&&(this.consumeAttributeSpace(E),N.appdata=this.extractOneOrMore(E,p,[1,64])),this.attributes.msids.push(N)}parseImageAttr(E){this.attributes.imageattr.push(E.attValue)}parseRid(E){let N=this.extractOneOrMore(E,W=>g(W)||u(W)||W==="_"||W==="-");this.consumeAttributeSpace(E);let C={id:N,direction:this.extract(E,this.consumeToken),params:[]};if(this.peekChar(E)===l){if(this.consumeAttributeSpace(E),this.peek(E,"pt=")){this.extract(E,this.consume,"pt=");let W=[];for(;;){let U=this.extract(E,this.consumeToken);W.push(U);try{this.extract(E,this.consume,",")}catch{break}}C.payloads=W,this.peekChar(E)===l&&this.extract(E,this.consume,l)}for(;;){let W=this.extract(E,this.consumeToken);switch(W){case"depend":{let U={type:W,rids:this.extract(E,this.consume,"=").split(",")};C.params.push(U);break}default:{let U={type:W};this.peekChar(E)==="="&&(this.extract(E,this.consume,"="),U.val=this.extract(E,this.consumeTill,";")),C.params.push(U)}}try{this.extract(E,this.consume,";")}catch{break}}}this.attributes.rids.push(C)}parseSimulcast(E){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=E.attValue,this.extract(E,this.consumeTill)}parseSctpPort(E){this.attributes.sctpPort=this.extractOneOrMore(E,u,[1,5])}parseMaxMessageSize(E){this.attributes.maxMessageSize=this.extractOneOrMore(E,u,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(E){this.attributes.mid=this.extract(E,this.consumeToken)}parseSSRCGroup(E){let N=this.extract(E,this.consumeToken),C=[];for(;;)try{this.consumeAttributeSpace(E);let W=this.extract(E,this.consumeInteger);C.push(parseInt(W,10))}catch{break}this.attributes.ssrcGroups.push({semantic:N,ssrcIds:C})}}function Z(x,E,N){return E in x?Object.defineProperty(x,E,{value:N,enumerable:!0,configurable:!0,writable:!0}):x[E]=N,x}class ${constructor(){Z(this,"eol",s)}print(E,N){let C="";return N&&(this.eol=N),C+=this.printVersion(E.version),C+=this.printOrigin(E.origin),C+=this.printSessionName(E.sessionName),C+=this.printInformation(E.information),C+=this.printUri(E.uri),C+=this.printEmail(E.emails),C+=this.printPhone(E.phones),C+=this.printConnection(E.connection),C+=this.printBandwidth(E.bandwidths),C+=this.printTimeFields(E.timeFields),C+=this.printKey(E.key),C+=this.printSessionAttributes(E.attributes),C+=this.printMediaDescription(E.mediaDescriptions),C}printVersion(E){return"v=".concat(E).concat(this.eol)}printOrigin(E){return"o=".concat(E.username," ").concat(E.sessId," ").concat(E.sessVersion," ").concat(E.nettype," ").concat(E.addrtype," ").concat(E.unicastAddress).concat(this.eol)}printSessionName(E){return E?"s=".concat(E).concat(this.eol):""}printInformation(E){return E?"i=".concat(E).concat(this.eol):""}printUri(E){return E?"u=".concat(E).concat(this.eol):""}printEmail(E){let N="";for(let C of E)N+="e=".concat(C).concat(this.eol);return N}printPhone(E){let N="";for(let C of E)N+="e=".concat(C).concat(this.eol);return N}printConnection(E){return E?"c=".concat(E.nettype," ").concat(E.addrtype," ").concat(E.address).concat(this.eol):""}printBandwidth(E){let N="";for(let C of E)N+="b=".concat(C.bwtype,":").concat(C.bandwidth).concat(this.eol);return N}printTimeFields(E){let N="";for(let C of E){N+="t=".concat(C.time.startTime," ").concat(C.time.startTime).concat(this.eol);for(let W of C.repeats)N+="r=".concat(W.repeatInterval," ").concat(W.typedTimes.join(" ")).concat(this.eol);C.zoneAdjustments&&(N+="z=",N+="z=".concat(C.zoneAdjustments.map(W=>"".concat(W.time," ").concat(W.back?"-":""," ").concat(W.typedTime)).join(" ")).concat(this.eol),N+=this.eol)}return N}printKey(E){return E?"k=".concat(E).concat(this.eol):""}printAttributes(E){let N="";for(let C of E)N+="a=".concat(C.attField).concat(C.attValue?":".concat(C.attValue):"").concat(this.eol);return N}printMediaDescription(E){let N="";for(let C of E)N+=this.printMedia(C.media),N+=this.printInformation(C.information),N+=this.printConnections(C.connections),N+=this.printBandwidth(C.bandwidths),N+=this.printKey(C.key),N+=this.printMediaAttributes(C);return N}printConnections(E){let N="";for(let C of E)N+=this.printConnection(C);return N}printMedia(E){return"m=".concat(E.mediaType," ").concat(E.port," ").concat(E.protos.join("/")," ").concat(E.fmts.join(" ")).concat(this.eol)}printSessionAttributes(E){return new K(this.eol).print(E)}printMediaAttributes(E){return new k(this.eol).print(E)}}class F{constructor(E){Z(this,"eol",void 0),this.eol=E}printIceUfrag(E){return E===void 0?"":"a=ice-ufrag:".concat(E).concat(this.eol)}printIcePwd(E){return E===void 0?"":"a=ice-pwd:".concat(E).concat(this.eol)}printIceOptions(E){return E===void 0?"":"a=ice-options:".concat(E.join(l)).concat(this.eol)}printFingerprints(E){return E.length>0?E.map(N=>"a=fingerprint:".concat(N.hashFunction).concat(l).concat(N.fingerprint)).join(this.eol)+this.eol:""}printExtmap(E){return E.map(N=>"a=extmap:".concat(N.entry).concat(N.direction?"/".concat(N.direction):"").concat(l).concat(N.extensionName).concat(N.extensionAttributes?"".concat(l).concat(N.extensionAttributes):"").concat(this.eol)).join("")}printSetup(E){return E===void 0?"":"a=setup:".concat(E).concat(this.eol)}printUnrecognized(E){return E.map(N=>"a=".concat(N.attField).concat(N.attValue?":".concat(N.attValue):"").concat(this.eol)).join("")}}class K extends F{print(E){let N="";return N+=this.printGroups(E.groups),N+=this.printMsidSemantic(E.msidSemantic),N+=this.printIceLite(E.iceLite),N+=this.printIceUfrag(E.iceUfrag),N+=this.printIcePwd(E.icePwd),N+=this.printIceOptions(E.iceOptions),N+=this.printFingerprints(E.fingerprints),N+=this.printSetup(E.setup),N+=this.printTlsId(E.tlsId),N+=this.printIdentity(E.identities),N+=this.printExtmap(E.extmaps),N+=this.printUnrecognized(E.unrecognized),N}printGroups(E){let N="";return E.length>0&&(N+=E.map(C=>"a=group:".concat(C.semantic).concat(C.identificationTag.map(W=>"".concat(l).concat(W)).join("")).concat(this.eol)).join("")),N}printIceLite(E){return E===void 0?"":"a=ice-lite"+this.eol}printTlsId(E){return E?"a=tls-id:".concat(E).concat(this.eol):""}printIdentity(E){return E.length===0?"":E.map(N=>"a=identity:".concat(N.assertionValue).concat(N.extensions.map(C=>"".concat(l).concat(C.name).concat(C.value?"=".concat(C.value):"")))).join(this.eol)+this.eol}printMsidSemantic(E){if(!E)return"";let N="a=msid-semantic:".concat(E.semantic);return E.applyForAll?N+="".concat(l,"*"):E.identifierList.length>0&&(N+=E.identifierList.map(C=>"".concat(l).concat(C))),N+this.eol}}class k extends F{print(E){let N=E.attributes,C="";return C+=this.printRTCP(N.rtcp),C+=this.printIceUfrag(N.iceUfrag),C+=this.printIcePwd(N.icePwd),C+=this.printIceOptions(N.iceOptions),C+=this.printCandidates(N.candidates),C+=this.printRemoteCandidatesList(N.remoteCandidatesList),C+=this.printEndOfCandidates(N.endOfCandidates),C+=this.printFingerprints(N.fingerprints),C+=this.printSetup(N.setup),C+=this.printMid(N.mid),C+=this.printExtmap(N.extmaps),C+=this.printRTPRelated(N),C+=this.printPtime(N.ptime),C+=this.printMaxPtime(N.maxPtime),C+=this.printDirection(N.direction),C+=this.printSSRCGroups(N.ssrcGroups),C+=this.printSSRC(N.ssrcs),C+=this.printRTCPMux(N.rtcpMux),C+=this.printRTCPMuxOnly(N.rtcpMuxOnly),C+=this.printRTCPRsize(N.rtcpRsize),C+=this.printMSId(N.msids),C+=this.printImageattr(N.imageattr),C+=this.printRid(N.rids),C+=this.printSimulcast(N.simulcast),C+=this.printSCTPPort(N.sctpPort),C+=this.printMaxMessageSize(N.maxMessageSize),C+=this.printUnrecognized(N.unrecognized),C}printCandidates(E){return E.map(N=>"a=candidate:".concat(N.foundation).concat(l).concat(N.componentId).concat(l).concat(N.transport).concat(l).concat(N.priority).concat(l).concat(N.connectionAddress).concat(l).concat(N.port).concat(l,"typ").concat(l).concat(N.type).concat(N.relAddr?"".concat(l,"raddr").concat(l).concat(N.relAddr):"").concat(N.relPort?"".concat(l,"rport").concat(l).concat(N.relPort):"").concat(Object.keys(N.extension).map(C=>"".concat(l).concat(C).concat(l).concat(N.extension[C])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(E){return E.map(N=>"a=remote-candidates:".concat(N.join(l)).concat(this.eol)).join("")}printEndOfCandidates(E){return E===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(E){if(!E.payloads)return"";let N=E.payloads,C="";C+=E.rtcpFeedbackWildcards.map(W=>this.printRTCPFeedback("*",W)).join("");for(let W of N)C+=this.printRtpMap(W.payloadType,W.rtpMap),C+=this.printFmtp(W.payloadType,W.fmtp),C+=W.rtcpFeedbacks.map(U=>this.printRTCPFeedback(W.payloadType,U)).join("");return C}printFmtp(E,N){if(!N)return"";let C=Object.keys(N.parameters);return C.length===1&&N.parameters[C[0]]===null?"a=fmtp:".concat(E).concat(l).concat(C[0]).concat(this.eol):"a=fmtp:".concat(E).concat(l).concat(Object.keys(N.parameters).map(W=>"".concat(W,"=").concat(N.parameters[W])).join(";")).concat(this.eol)}printRtpMap(E,N){return N?"a=rtpmap:".concat(E).concat(l).concat(N.encodingName,"/").concat(N.clockRate).concat(N.encodingParameters?"/".concat(N.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(E,N){let C="a=rtcp-fb:".concat(E).concat(l),W=N;return W.type==="trr-int"?C+="ttr-int".concat(l).concat(W.interval):(C+="".concat(W.type),W.parameter&&(C+="".concat(l).concat(W.parameter),W.additional&&(C+="".concat(l).concat(W.additional)))),C+this.eol}printPtime(E){return E===void 0?"":"a=ptime:".concat(E).concat(this.eol)}printMaxPtime(E){return E===void 0?"":"a=maxptime:".concat(E).concat(this.eol)}printDirection(E){return E===void 0?"":"a=".concat(E).concat(this.eol)}printSSRC(E){return E.map(N=>Object.keys(N.attributes).map(C=>"a=ssrc:".concat(N.ssrcId.toString(10)).concat(l).concat(C).concat(N.attributes[C]?":".concat(N.attributes[C]):"").concat(this.eol)).join("")).join("")}printRTCPMux(E){return E===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(E){return E===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(E){return E===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(E){if(E===void 0)return"";let N="a=rtcp:".concat(E.port);return E.netType&&(N+="".concat(l).concat(E.netType)),E.addressType&&(N+="".concat(l).concat(E.addressType)),E.address&&(N+="".concat(l).concat(E.address)),N+this.eol}printMSId(E){return E.map(N=>"a=msid:".concat(N.id).concat(N.appdata?"".concat(l).concat(N.appdata):"").concat(this.eol)).join("")}printImageattr(E){return E.map(N=>"a=imageattr:".concat(N).concat(this.eol)).join("")}printRid(E){return E.map(N=>{let C="a=rid:".concat(N.id).concat(l).concat(N.direction);return N.payloads&&(C+="".concat(l,"pt=").concat(N.payloads.join(","))),N.params.length>0&&(C+="".concat(l).concat(N.params.map(W=>W.type==="depend"?"depend=".concat(W.rids.join(",")):"".concat(W.type,"=").concat(W.val)).join(";"))),C+this.eol}).join("")}printSimulcast(E){return E===void 0?"":"a=simulcast:".concat(E).concat(this.eol)}printSCTPPort(E){return E===void 0?"":"a=sctp-port:".concat(E).concat(this.eol)}printMaxMessageSize(E){return E===void 0?"":"a=max-message-size:".concat(E).concat(this.eol)}printMid(E){return E===void 0?"":"a=mid:".concat(E).concat(this.eol)}printSSRCGroups(E){return E.map(N=>"a=ssrc-group:".concat(N.semantic).concat(N.ssrcIds.map(C=>"".concat(l).concat(C.toString(10))).join("")).concat(this.eol)).join("")}}function P(x){return new H().parse(x)}function B(x,E){return new $().print(x,E)}}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var o in i)r.o(i,o)&&!r.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:i[o]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(8)})();var Ln=jte.exports;function Sk(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L("SVC_MODE");if(L("ENABLE_SVC"))return function(t){return t in dk}(e)?e:dk.L1T3}function h$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function f$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h$(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vv(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,{filterRTX:i,filterVideoFec:o,filterAudioFec:a,filterAudioCodec:s,filterVideoCodec:l}=t,{useXR:c}=r,u=[],h=[],f=[],p=[],m=!1,g=!1;if(Ln.parse(e).mediaDescriptions.forEach(v=>{n&&n!==v.attributes.direction||(v.media.mediaType!=="video"||m||(h=v.attributes.payloads,p=v.attributes.extmaps,m=!0),v.media.mediaType!=="audio"||g||(u=v.attributes.payloads,f=v.attributes.extmaps,g=!0))}),!p||h.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!f||u.length===0)throw new Error("Cannot get audio capabilities from SDP.");if(h.forEach(v=>{var b;(b=v.rtpMap)!==null&&b!==void 0&&b.clockRate&&(v.rtpMap.clockRate=parseInt(v.rtpMap.clockRate)),c&&v.rtcpFeedbacks.push({type:"rrtr"})}),u.forEach(v=>{var b;(b=v.rtpMap)!==null&&b!==void 0&&b.clockRate&&(v.rtpMap.clockRate=parseInt(v.rtpMap.clockRate)),c&&v.rtcpFeedbacks.push({type:"rrtr"})}),i&&(u=u.filter(v=>{var b;return((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName.toLowerCase())!=="rtx"}),h=h.filter(v=>{var b;return((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName.toLowerCase())!=="rtx"})),o&&(h=h.filter(v=>{var b;return!/(red)|(ulpfec)|(flexfec)/i.test(((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName)||"")})),a&&(u=u.filter(v=>{var b;return!/(red)|(ulpfec)|(flexfec)/i.test(((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName)||"")})),s&&(s==null?void 0:s.length)>0&&(u=u.filter(v=>{var b;return ge(s).call(s,((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName.toLowerCase())||"")})),l&&(l==null?void 0:l.length)>0){let v=h.filter(b=>{var _;return ge(l).call(l,((_=b.rtpMap)===null||_===void 0?void 0:_.encodingName.toLowerCase())||"")});h=v.concat(i?[]:BL(v,h))}let y=L("UNSUPPORTED_VIDEO_CODEC");return y&&y.length>0&&(h=h.filter(v=>!(v.rtpMap&&ge(y).call(y,v.rtpMap.encodingName.toLowerCase())))),{audioCodecs:u,videoCodecs:h,audioExtensions:f,videoExtensions:p}}function Iu(e){let t=Ln.parse(e),r,n;for(let i of t.mediaDescriptions){if(!r){let o=i.attributes.iceUfrag,a=i.attributes.icePwd;if(!o||!a)throw new Error("Cannot get iceUfrag or icePwd from SDP.");r={iceUfrag:o,icePwd:a}}if(!n){let o=i.attributes.fingerprints;o.length>0&&(n={fingerprints:o})}}if(!n&&t.attributes.fingerprints.length>0&&(n={fingerprints:t.attributes.fingerprints}),!n||!r)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:r,dtlsParameters:n}}function Ute(e,t){let r=[],n=e.attributes.ssrcGroups.filter(a=>a.semantic==="FID"),i=e.attributes.ssrcGroups.find(a=>a.semantic==="SIM"),o=e.attributes.ssrcs;if(i)i.ssrcIds.forEach(a=>{var s;let l=(s=n.find(c=>c.ssrcIds[0]===a))===null||s===void 0?void 0:s.ssrcIds[1];r.push({ssrcId:a,rtx:t?l:void 0})});else if(n.length>0){let a=n[0].ssrcIds[0],s=n[0].ssrcIds[1];r.push({ssrcId:a,rtx:t?s:void 0})}else{if(o.length===0)throw new Error("No ssrcs found on local media description.");r.push({ssrcId:o[0].ssrcId})}return r}function p$(e,t,r){let{cname:n}=e,i;t?i=Fte(t):(i=e.iceParameters.candidates.map(u=>({foundation:u.foundation,componentId:"1",transport:u.protocol,priority:u.priority.toString(),connectionAddress:u.ip,port:u.port.toString(),type:u.type,extension:{}})),w.debug("Using candidates from gateway."));let o={fingerprints:e.dtlsParameters.fingerprints.map(u=>({hashFunction:u.algorithm,fingerprint:u.fingerprint}))},a={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd},s;switch(e.dtlsParameters.role){case"server":s="passive";break;case"client":s="active";break;case"auto":s="actpass"}let l=fS(e.rtpCapabilities),c=[];return Array.isArray(r)&&r.length>0&&r.forEach(u=>{c.push({kind:xe.VIDEO,ssrcId:u.v,rtx:u.v_rtx,mslabel:"".concat(u.v,"_").concat(u.a)},{kind:xe.AUDIO,ssrcId:u.a,mslabel:"".concat(u.v,"_").concat(u.a)})}),{dtlsParameters:o,iceParameters:a,candidates:i,rtpCapabilities:l,setup:s,cname:n,preSSRCs:c}}function Fte(e){let t=[];return e.ip&&typeof e.port=="number"&&(t=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],w.debug("Using remote candidate from AP ".concat(e.ip,":").concat(e.port)),e.ip6&&(t.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip6,port:e.port.toString(),type:"host",extension:{}}),w.debug("Using IPV6 remote candidate from AP ".concat(e.ip6,":").concat(e.port)))),t}function Vd(e,t,r){let n=[],i=[];return e.forEach(o=>{let{ssrcId:a,rtx:s}=o,l=er(8,"track-"),c={ssrcId:a,attributes:f$({label:l,mslabel:r=r||er(10,""),msid:"".concat(r," ").concat(l)},t&&{cname:t})};if(n.push(c),s!==void 0){let u={ssrcId:s,attributes:f$({label:l,mslabel:r,msid:"".concat(r," ").concat(l)},t&&{cname:t})};n.push(u),i.push({semantic:"FID",ssrcIds:[a,s]})}}),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map(o=>{let{ssrcId:a}=o;return a})}),{ssrcs:n,ssrcGroups:i}}function hm(e,t){t instanceof Cr&&e.attributes.payloads.forEach(r=>{var n;let i=(n=r.rtpMap)===null||n===void 0?void 0:n.encodingName.toLowerCase();if(!i||["opus","pcmu","pcma","g722"].indexOf(i)===-1)return;r.fmtp||(r.fmtp={parameters:{}}),r.fmtp.parameters.minptime="10",r.fmtp.parameters.useinbandfec="1";let o=t._encoderConfig;o&&i!=="pcmu"&&i!=="pcma"&&i!=="g722"&&(o.bitrate&&!Ir()&&(r.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*o.bitrate))),o.sampleRate&&(r.fmtp.parameters.maxplaybackrate="".concat(o.sampleRate),r.fmtp.parameters["sprop-maxcapturerate"]="".concat(o.sampleRate)),o.stereo&&(r.fmtp.parameters.stereo="1",r.fmtp.parameters["sprop-stereo"]="1"))})}function FL(e){let t=e.attributes.unrecognized.findIndex(r=>r.attField==="x-google-flag"&&r.attValue==="conference");t!==-1&&e.attributes.unrecognized.splice(t,1)}function VL(e,t){var r;if(!(t instanceof ir&&t._encoderConfig&&t._hints.indexOf(cr.SCREEN_TRACK)===-1))return;let n=t._encoderConfig;Ct().supportMinBitrate&&n.bitrateMin&&e.attributes.payloads.forEach(i=>{var o,a;ge(o=["h264","h265","vp8","vp9","av1"]).call(o,((a=i.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase())||"")&&(i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters["x-google-min-bitrate"]="".concat(n.bitrateMin))}),Ct().supportMinBitrate&&!ge(r=t._hints).call(r,cr.LOW_STREAM)&&n.bitrateMax&&e.attributes.payloads.forEach(i=>{var o,a;ge(o=["h264","h265","vp8","vp9","av1"]).call(o,((a=i.rtpMap)===null||a===void 0?void 0:a.encodingName.toLowerCase())||"")&&(i.fmtp||(i.fmtp={parameters:{}}),i.fmtp.parameters["x-google-start-bitrate"]="".concat(L("X_GOOGLE_START_BITRATE")||Math.floor(n.bitrateMax)))})}function Vte(e){if(e.media.mediaType!=="video")return;let t=St();if(t.name!==Mt.SAFARI&&t.os!==yn.IOS)return;let r=e.attributes.extmaps.findIndex(n=>/video-orientation/g.test(n.extensionName));r!==-1&&e.attributes.extmaps.splice(r,1)}function hS(e,t,r){if(!t)return;let n,i;if(e.media.mediaType==="video"?(n=r.videoExtensions,i=r.videoCodecs):(n=r.audioExtensions,i=r.audioCodecs),t.twcc===!0){let o=n.find(a=>a.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");o&&(e.attributes.extmaps.find(a=>a.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||e.attributes.extmaps.push({entry:o.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(a,s){return s.filter(l=>!!a.find(c=>c.payloadType===l.payloadType&&!!c.rtcpFeedbacks.find(u=>u.type==="transport-cc")))}(i,e.attributes.payloads).forEach(a=>{a.rtcpFeedbacks.find(s=>s.type==="transport-cc")||a.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(t.twcc===!1){let o=e.attributes.extmaps.findIndex(a=>a.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");o!==-1&&e.attributes.extmaps.splice(o,1),e.attributes.payloads.forEach(a=>{let s=a.rtcpFeedbacks.findIndex(l=>l.type==="transport-cc");s!==-1&&a.rtcpFeedbacks.splice(s,1)})}if(t.remb===!0){let o=n.find(a=>a.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");o&&(e.attributes.extmaps.find(a=>a.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||e.attributes.extmaps.push({entry:o.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(a,s){return s.filter(l=>!!a.find(c=>c.payloadType===l.payloadType&&!!c.rtcpFeedbacks.find(u=>u.type==="goog-remb")))}(i,e.attributes.payloads).forEach(a=>{a.rtcpFeedbacks.find(s=>s.type==="goog-remb")||a.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(t.remb===!1){let o=e.attributes.extmaps.findIndex(a=>a.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");o!==-1&&e.attributes.extmaps.splice(o,1),e.attributes.payloads.forEach(a=>{let s=a.rtcpFeedbacks.findIndex(l=>l.type==="goog-remb");s!==-1&&a.rtcpFeedbacks.splice(s,1)})}}function Bte(e,t,r){if(Ir()||e.media.mediaType!=="video"||!(t instanceof ir)||r!=="vp9"&&r!=="vp8"||r==="vp8"&&!L("SIMULCAST")||r==="vp9"&&L("ENABLE_SVC")||t._scalabilityMode===void 0||t._scalabilityMode.numSpatialLayers<=1)return;let n=r==="vp8"?2:t._scalabilityMode.numSpatialLayers,i=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find(s=>s.semantic==="FID"&&s.ssrcIds[0]===i.ssrcId),a={semantic:"SIM",ssrcIds:[i.ssrcId]};for(let s=1;s<n;s++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+s,attributes:Br(i.attributes)}),a.ssrcIds.push(i.ssrcId+s),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+s,attributes:Br(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+s,o.ssrcIds[1]+s]}));e.attributes.ssrcGroups.unshift(a)}async function $te(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new RTCPeerConnection;r.addTransceiver("video",{direction:"sendonly"}),r.addTransceiver("audio",{direction:"sendonly"}),r.addTransceiver("video",{direction:"recvonly"}),r.addTransceiver("audio",{direction:"recvonly"});let n=(await r.createOffer()).sdp,{send:i,recv:o,sendrecv:a}=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0,u=Vv(c,s,l,"sendonly"),h=Vv(c,s,l,"recvonly"),f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},p={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},m={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(ms(u,h,"videoExtensions",f,p,m),ms(u,h,"videoCodecs",f,p,m),ms(u,h,"audioExtensions",f,p,m),ms(u,h,"audioCodecs",f,p,m),L("RAISE_H264_BASELINE_PRIORITY")){let g=m.videoCodecs.findIndex(y=>{var v,b;return((v=y.rtpMap)===null||v===void 0?void 0:v.encodingName.toLocaleLowerCase())==="h264"&&((b=y.fmtp)===null||b===void 0?void 0:b.parameters["profile-level-id"])==="42001f"});if(g!==-1){let y=m.videoCodecs.findIndex(v=>{var b;return((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName.toLocaleLowerCase())==="h264"});if(y<g){w.debug("raising H264 baseline profile priority");let v=m.videoCodecs[g];m.videoCodecs.splice(g,1),m.videoCodecs.splice(y,0,v)}y!==-1&&(p.videoCodecs=p.videoCodecs.filter(v=>{var b,_;return!(((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName.toLocaleLowerCase())==="h264"&&((_=v.fmtp)===null||_===void 0?void 0:_.parameters["profile-level-id"])!=="42001f")})),y!==-1&&L("FILTER_SEND_H264_BASELINE")&&(f.videoCodecs=f.videoCodecs.filter(v=>{var b,_;return!(((b=v.rtpMap)===null||b===void 0?void 0:b.encodingName.toLocaleLowerCase())==="h264"&&((_=v.fmtp)===null||_===void 0?void 0:_.parameters["profile-level-id"])!=="42001f")}))}}return{send:f,recv:p,sendrecv:m}}(e,t,n);try{r.close()}catch{}return{send:i,recv:o,sendrecv:a}}function m$(){let e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=Vv(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"recvonly"),r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(ms(e,t,"videoExtensions",r,n,i),ms(e,t,"videoCodecs",r,n,i),ms(e,t,"audioExtensions",r,n,i),ms(e,t,"audioCodecs",r,n,i),L("RAISE_H264_BASELINE_PRIORITY")){let o=i.videoCodecs.findIndex(a=>a.rtpMap&&a.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&a.fmtp&&a.fmtp.parameters["profile-level-id"]==="42001f");if(o!==-1){let a=i.videoCodecs.findIndex(s=>s.rtpMap&&s.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(a<o){w.debug("raising H264 baseline profile priority");let s=i.videoCodecs[o];i.videoCodecs.splice(o,1),i.videoCodecs.splice(a,0,s)}a!==-1&&(n.videoCodecs=n.videoCodecs.filter(s=>!(s.rtpMap&&s.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&s.fmtp&&s.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:r,recv:n,sendrecv:i}}function ms(e,t,r,n,i,o){if(r==="videoExtensions"||r==="audioExtensions"){let a=[];return e[r].forEach(s=>{t[r].some((l,c)=>{if(s.entry===l.entry&&s.extensionName===l.extensionName)return a.push(c),!0})?o[r].push(s):n[r].push(s)}),void t[r].forEach((s,l)=>{a.indexOf(l)===-1&&i[r].push(s)})}if(r==="videoCodecs"||r==="audioCodecs"){let a=[];return e[r].forEach(s=>{t[r].some((l,c)=>{if(s.payloadType===l.payloadType&&JSON.stringify(s)===JSON.stringify(l))return a.push(c),!0})?o[r].push(s):n[r].push(s)}),void t[r].forEach((s,l)=>{a.indexOf(l)===-1&&i[r].push(s)})}}function fS(e){let{send:t,recv:r,sendrecv:n}=e;if(!n){if(!t||!r)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:r}}let i,o;return t?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...t.audioCodecs,...n.audioCodecs],i.videoCodecs=[...t.videoCodecs,...n.videoCodecs],i.audioExtensions=[...t.audioExtensions,...n.audioExtensions],i.videoExtensions=[...t.videoExtensions,...n.videoExtensions]):i=n,r?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...r.audioCodecs,...n.audioCodecs],o.videoCodecs=[...r.videoCodecs,...n.videoCodecs],o.audioExtensions=[...r.audioExtensions,...n.audioExtensions],o.videoExtensions=[...r.videoExtensions,...n.videoExtensions]):o=n,{send:i,recv:o}}function fm(e){e.media.mediaType==="audio"&&e.attributes.payloads.filter(t=>{var r;return((r=t.rtpMap)===null||r===void 0?void 0:r.encodingName.toLowerCase())==="opus"}).forEach(t=>{t.fmtp||(t.fmtp={parameters:{}}),t.fmtp.parameters.stereo="1",t.fmtp.parameters["sprop-stereo"]="1"})}function Ly(e,t,r,n){let i=[];if(e===xe.VIDEO){if(L("H264_PROFILE_LEVEL_ID")&&n==="h264"&&(i=t.videoCodecs.filter(o=>{var a;return ge(a=o.rtpMap&&o.rtpMap.encodingName.toLowerCase()||"").call(a,n)&&o&&o.fmtp&&o.fmtp.parameters["profile-level-id"]===L("H264_PROFILE_LEVEL_ID")})),!Array.isArray(i)||i.length===0){let o=[],a=[],s=[],l=[];if(r.videoCodecs.forEach(c=>{let u=c.rtpMap&&c.rtpMap.encodingName.toLowerCase()||"";ge(u).call(u,n)?o.push(c):ge(u).call(u,"vp9")?a.push(c):ge(u).call(u,"vp8")?s.push(c):ge(u).call(u,"h264")&&l.push(c)}),o.length===0){let c="";a.length!==0?(o=a,c="vp9"):s.length!==0?(o=s,c="vp8"):l.length!==0&&(o=l,c="h264"),w.warning("codec ".concat(n," not included in rtpCapabilities, fallback to default payloads: ").concat(c))}o.length!==0&&(i=t.videoCodecs.filter(c=>o.some(u=>u.payloadType===c.payloadType)))}if(i.length===0&&(w.warning("codec ".concat(n," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),i=t.videoCodecs),L("USE_PUB_RTX")||L("USE_SUB_RTX")){let o=BL(i,t.videoCodecs);i=[...i,...o]}}else i=t.audioCodecs.filter(o=>{var a;return ge(a=o.rtpMap&&o.rtpMap.encodingName.toLowerCase()||"").call(a,n)}),i.length===0&&(w.warning("codec ".concat(n," not included in rtpCapabilities, fallback to opus")),i=t.audioCodecs.filter(o=>{var a;return ge(a=o.rtpMap&&o.rtpMap.encodingName.toLowerCase()||"").call(a,"opus")}));return i}function BL(e,t){let r=e.map(n=>n.payloadType.toString());return t.filter(n=>n.rtpMap&&n.rtpMap.encodingName==="rtx"&&n.fmtp&&n.fmtp.parameters.apt&&ge(r).call(r,n.fmtp&&n.fmtp.parameters.apt))}async function vE(e,t,r){let n=t.toString(),i=zte(n,"offer","remote","exchangeSDP");await e.setRemoteDescription({type:"offer",sdp:n});let o=await e.createAnswer();if(!o.sdp)throw new Error("cannot get answer sdp");let a=o.sdp;a=Hte(a,r||{}),i==null||i(a||""),await e.setLocalDescription({type:"answer",sdp:a})}function Hte(e,t,r){let n=Ln.parse(e),{useXR:i}=t;return n.mediaDescriptions.forEach(o=>{var a;o.attributes.mid&&(Array.isArray(r)&&!ge(r).call(r,o.attributes.mid)||(o.media.mediaType==="audio"&&fm(o),i&&ge(a=["audio","video"]).call(a,o.media.mediaType)&&o.attributes.payloads.forEach(s=>{s.rtcpFeedbacks.findIndex(l=>l.type==="rrtr")===-1&&s.rtcpFeedbacks.push({type:"rrtr"})})))}),Ln.print(n)}function zte(e,t,r,n){if(L("SDP_LOGGING"))return w.upload("exchanging ".concat(r," ").concat(t," SDP during P2PConnection.").concat(n,`
`),e),t==="offer"?i=>{zte(i,"answer",r==="local"?"remote":"local",n)}:void 0}function fl(e,t){return typeof L(e)===t?L(e):void 0}function g$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Zc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g$(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var qI=new Map,N6e=class extends _r{get state(){return this._state}set state(e){if(e===this._state)return;let t=this._state;this._state=e,e==="DISCONNECTED"&&this._disconnectedReason?this.emit(Hn.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(Hn.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){w.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),R(this,"store",void 0),R(this,"joinInfo",void 0),R(this,"key",void 0),R(this,"ntpOffset",0),R(this,"signal",void 0),R(this,"role",void 0),R(this,"inChannelInfo",{joinAt:null,duration:0}),R(this,"spec",void 0),R(this,"_state","DISCONNECTED"),R(this,"_statsCollector",void 0),R(this,"_disconnectedReason",void 0),R(this,"isSignalRecover",!1),R(this,"hasChangeBGPAddress",!1),R(this,"trafficStatsInterval",void 0),R(this,"networkQualityInterval",void 0),R(this,"_joinGatewayStartTime",0),R(this,"_signalTimeout",!1),R(this,"_clientRoleOptions",void 0),R(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?new d$(Zc(Zc({},t),{},{retryConfig:t.websocketRetryConfig}),e):new ZVe(Zc(Zc({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,r){this.store.joinGatewayStart(),e.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);let n=Date.now(),i=qI.get(e.cname);if(i||(i=new Map,qI.set(e.cname,i)),this._isProactiveJoin=!0,i.has(e.uid)){let l=new q(O.UID_CONFLICT);throw Te.joinGateway(e.sid,{lts:n,succ:!1,ec:l.code,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:"0",preload:e.preload}),this._isProactiveJoin=!1,l}i.set(e.uid,!0),this.joinInfo=e,this.key=t;let o=0;this.joinGatewayStartTime=n;let a=e.proxyServer;try{w.debug("[".concat(this.store.clientId,"] use websocket join uid ").concat(o));let l=e.gatewayAddrs.map(c=>{let{address:u}=c,[h,f]=u.split(":"),p={host:h,port:f};return e.proxyServer&&(p.proxy=e.proxyServer),p});o=(await this.signal.init(l,r)).uid,w.debug("[".concat(this.store.clientId,"] websocket join uid ").concat(o," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(l){var s;throw w.error("[".concat(this.store.clientId,"] User join failed"),l.toString()),Te.joinGateway(e.sid,{lts:n,succ:!1,ec:((s=l.data)===null||s===void 0?void 0:s.desc)||l.code,errorMsg:l.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!a,signalChannel:"0",preload:e.preload}),this._isProactiveJoin=!1,i.delete(e.uid),this.signal.close(),l}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),w.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(l=>{w.warning("[".concat(this.store.clientId,"] get traffic stats error"),l.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(Hn.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(Hn.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(Hn.NETWORK_QUALITY,{uplinkNetworkQuality:c6(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:c6(this._statsCollector.trafficStats.B_dnq)}):this.emit(Hn.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),o}async leave(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){t!==Bt.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==Zt.CONNECTED||await function(r,n){return n===1/0?r:fe.race([r,XFe(n)])}(this.signal.request(Be.LEAVE,void 0,!0),3e3)}catch(r){w.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),r)}this.signal.close(t),t!==Bt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));let n={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:L("PUB_EXTEND"),twcc:!!L("PUBLISH_TWCC"),rtx:!!L("USE_PUB_RTX")};try{return(await this.signal.request(Be.PUBLISH,n,!0))._message}catch(i){if(r&&i.data&&i.data.code===De.ERR_PUBLISH_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),i.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw i}}async publishDataChannel(e,t,r){var n;if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));let i={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:(n=t.maxRetransmits)!==null&&n!==void 0?n:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(Be.PUBLISH_DATASTREAM,i,!0)}catch(o){if(r&&o.data&&o.data.code===De.ERR_PUBLISH_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),o.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw o}}async unpublish(e,t){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Be.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(r){w.warning("[".concat(this.store.clientId,"] unpublish warning: "),r)}}async unpublishDataChannel(e){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await fe.all(e.map(t=>this.signal.request(Be.UNPUBLISH_DATASTREAM,{channel_id:t},!0)))}catch(t){w.warning("unpublish datachannels warning: ",t)}}async presubscribe(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));let n={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!L("SUBSCRIBE_TWCC"),rtx:!!L("USE_SUB_RTX")||void 0,extend:L("SUB_EXTEND"),svc:Array.isArray(L("SVC"))&&L("SVC").length!==0?L("SVC"):void 0};try{return await this.signal.request(Be.PRE_SUBSCRIBE,n,!0)}catch(i){if(r&&i.data&&i.data.code===De.ERR_SUBSCRIBE_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),i.toString()),this.presubscribe(e,t,!1);throw i}}async subscribe(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));let n={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!L("SUBSCRIBE_TWCC"),rtx:!!L("USE_SUB_RTX"),extend:L("SUB_EXTEND"),ssrcId:t.ssrcId,svc:Array.isArray(L("SVC"))&&L("SVC").length!==0?L("SVC"):void 0};try{return(await this.signal.request(Be.SUBSCRIBE,n,!0))._message}catch(i){if(r&&i.data&&i.data.code===De.ERR_SUBSCRIBE_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),i.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw i}}async subscribeDataChannel(e,t,r){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));let n={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void await this.signal.request(Be.SUBSCRIBE_DATASTREAM,n,!0)}catch(i){if(r&&i.data&&i.data.code===De.ERR_SUBSCRIBE_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),i.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw i}}async subscribeAll(e,t){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));let r={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!L("USE_SUB_RTX"),twcc:!!L("SUBSCRIBE_TWCC"),svc:Array.isArray(L("SVC"))&&L("SVC").length!==0?L("SVC"):void 0};try{return await this.signal.request(Be.SUBSCRIBE_STREAMS,r,!0)}catch(n){if(t&&n.data&&n.data.code===De.ERR_SUBSCRIBE_REQUEST_INVALID)return w.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),n.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw n}}async setVideoProfile(e){let t=function(r){if(!(r.bitrateMax&&r.bitrateMin&&r.frameRate&&r.height&&r.width))return;let n=r.frameRate,i=r.width,o=r.height,a=!0;return typeof n!="number"&&(n=n.exact||n.ideal||n.max||n.min||0,n||(a=!1)),typeof i!="number"&&(i=i.exact||i.ideal||i.max||i.min||0,i||(a=!1)),typeof o!="number"&&(o=o.exact||o.ideal||o.max||o.min||0,n||(a=!1)),a?{stream_type:0,width:i,height:o,fps:n,start_bps:1e3*r.bitrateMax,min_bps:1e3*r.bitrateMin,target_bps:1e3*r.bitrateMax}:void 0}(e);if(t)return this.signal.request(Be.SET_VIDEO_PROFILE,t);w.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(Be.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(r){w.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),r)}}async unsubscribeDataChannel(e,t){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await fe.all(e.map(r=>this.signal.request(Be.UNSUBSCRIBE_DATASTREAM,{stream_id:r,uid:t},!0)))}catch(r){w.warning("unsubscribeDataChannel warning: ",r)}}async massUnsubscribe(e){try{await this.signal.request(Be.UNSUBSCRIBE_STREAMS,e,!0)}catch(t){w.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),t)}}async reconnectPC(e){let{iceParameters:t,dtlsParameters:r,rtpCapabilities:n}=e;return{gatewayEstablishParams:await this.signal.request(Be.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:r,rtpCapabilities:n}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(Be.GATEWAY_INFO)}async renewToken(e){await this.signal.request(Be.RENEW_TOKEN,e),this.key=e.token}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),this.state!=="CONNECTED")return void(this.role=e);let r,n=0;e==="audience"?this._clientRoleOptions&&this._clientRoleOptions.delay?(r=this._clientRoleOptions.delay,n=1):n=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:n=0,await this.signal.request(Be.SET_CLIENT_ROLE,{role:e,level:n,delay:r,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(Be.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(Be.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(Be.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(Be.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(Be.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,r){if(this.signal instanceof d$)return this.signal.sendExtensionMessage(e,t,r)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Zc({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Be.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){let e=qI.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;let e=function(t){let r;return r=t.startsWith("dc")?t.match(/(dc\:\/\/)?([^:]+):(\d+)/):t.match(/(wss\:\/\/)?([^:]+):(\d+)/),r?{username:zn.username,password:zn.password,turnServerURL:r[2],tcpport:parseInt(r[3])+30,udpport:parseInt(r[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(Zc(Zc({},zn),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;let e=await this.signal.request(Be.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),e.ntp_offset!=null&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach(t=>{let r=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(n=>n.peer_uid===t.peer_uid);r&&r.B_st!==t.B_st&&uC(()=>{this.emit(Hn.STREAM_TYPE_CHANGE,t.peer_uid,t.B_st)})}),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new q(O.UNEXPECTED_ERROR,"can not generate join message, no join info");let t=Object.assign({},this.joinInfo.apResponse),r=L("REPORT_APP_SCENARIO");if(typeof r!="string")try{r=JSON.stringify(r)}catch{r=void 0}r&&r.length>128&&(r=void 0);let n=!(Ir()||Dee(87)||P6())&&typeof L("ENABLE_PRE_SUB")=="boolean"&&L("ENABLE_PRE_SUB"),i=!P6()&&fl("ENABLE_PREALLOC_PC","boolean"),o=Zc({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:Ra,browser:navigator.userAgent,process_id:L("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:L("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:r,attributes:{userAttributes:{enablePublishedUserList:L("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:L("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof L("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?L("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof L("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?L("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof L("ENABLE_USER_LICENSE_CHECK")=="boolean"?L("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:L("USE_PUB_RTX")===!0||L("USE_SUB_RTX")===!0||void 0,disableFEC:L("DISABLE_FEC"),enableNTPReport:!!L("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!L("ENABLE_INSTANT_VIDEO")||void 0,enableFulllinkAvSync:!!L("ENABLE_FULL_LINK_AV_SYNC")||void 0,enableDataStream2:fl("ENABLE_DATASTREAM_2","boolean"),enableAutFeedback:!!L("ENABLE_AUT_FEEDBACK")||void 0,rtm2Flag:typeof this.joinInfo.rtmFlag=="number"?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!L("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:fl("USE_XR","boolean"),enableLossbasedBwe:fl("ENABLE_LOSSBASED_BWE","boolean"),enableAutCC:!!L("ENABLE_AUT_CC")||void 0,enableCCFallback:fl("ENABLE_CC_FALLBACK","boolean"),enablePreallocPC:i,preSubNum:n?fl("PRE_SUB_NUM","number"):void 0,enablePubTWCC:fl("PUBLISH_TWCC","boolean"),enableSubTWCC:fl("SUBSCRIBE_TWCC","boolean"),enablePubRTX:fl("USE_PUB_RTX","boolean"),enableSubRTX:fl("USE_SUB_RTX","boolean"),enableSubSVC:L("ENABLE_SVC")?L("ENABLE_SVC_DEFAULT_CODECS"):Array.isArray(L("SVC"))&&L("SVC").length!==0?L("SVC"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(o.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(o.aes_mode=this.joinInfo.aesmode,L("ENCRYPT_AES")?(o.aes_secret=this.joinInfo.aespassword,o.aes_encrypt=!0):o.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(o.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(o.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),this.joinInfo.defaultVideoStream!==void 0&&(o.default_video_stream=this.joinInfo.defaultVideoStream),o}getRejoinMessage(){if(!this.joinInfo)throw new q(O.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(ze.WS_RECONNECT_WAITTING_FINISH,e=>{var t;ge(t=["tryNext","recover"]).call(t,e)&&this.joinInfo&&Te.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(ze.WS_RECONNECT_CREATE_CONNECTION,e=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(ze.WS_RECONNECTING,e=>{this.joinInfo&&Te.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||Kn.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Te.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:this.spec.mode==="live"?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:this.role==="audience"?2:1,buildFormat:2}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(ze.WS_CLOSED,e=>{let t;switch(e){case Bt.LEAVE:t=Kn.LEAVE;break;case Bt.UID_BANNED:case Bt.IP_BANNED:case Bt.CHANNEL_BANNED:case Bt.SERVER_ERROR:t=Kn.SERVER_ERROR;break;case Bt.FALLBACK:t=Kn.FALLBACK;break;case Bt.LICENSE_MISSING:case Bt.LICENSE_EXPIRED:case Bt.LICENSE_MINUTES_EXCEEDED:case Bt.LICENSE_PERIOD_INVALID:case Bt.LICENSE_MULTIPLE_SDK_SERVICE:case Bt.LICENSE_ILLEGAL:case Bt.TOKEN_EXPIRE:t=e;break;default:t=Kn.NETWORK_ERROR}w.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(t||"undefined -> "+Kn.NETWORK_ERROR)),this.joinInfo&&Te.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===Bt.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==Bt.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(ze.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(w.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),Te.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){let e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void w.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));Gt("EVENT_REPORT_DOMAIN",e[1]),Gt("EVENT_REPORT_BACKUP_DOMAIN",e[1]),Gt("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}}),this.signal.on(pt.ON_UPLINK_STATS,e=>{this._statsCollector.updateUplinkStats(e)}),this.signal.on(ze.REQUEST_RECOVER,(e,t,r)=>{if(!this.joinInfo)return r(new q(O.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Yn(this,Hn.REQUEST_NEW_GATEWAY_LIST).then(t).catch(r)}),this.signal.on(ze.REQUEST_JOIN_INFO,async e=>{var t;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));let{iceParameters:r,dtlsParameters:n,rtpCapabilities:i}=await Yn(this,Hn.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:(t=this.joinInfo)===null||t===void 0?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:r,dtlsParameters:n,rtpCapabilities:i,version:"2"}}))}),this.signal.on(ze.REQUEST_REJOIN_INFO,e=>{e(this.getRejoinMessage())}),this.signal.on(ze.REPORT_JOIN_GATEWAY,(e,t)=>{if(!this.joinInfo)return;let r,n="";var i;e instanceof q?(r=((i=e.data)===null||i===void 0?void 0:i.desc)||e.code,n=e.message):r=e,Te.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:r,errorMsg:n,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1}),this.signal.on(ze.IS_P2P_DISCONNECTED,e=>{e(Lv(this,Hn.IS_P2P_DISCONNECTED))}),this.signal.on(ze.DISCONNECT_P2P,()=>{this.emit(Hn.DISCONNECT_P2P)}),this.signal.on(ze.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(ze.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(ze.JOIN_RESPONSE,e=>{let t=this.getCurrentGatewayAddress();this.emit(Hn.JOIN_RESPONSE,e,t)}),this.signal.on(ze.PRE_CONNECT_PC,async()=>{if(this.joinInfo){this.updateTurnConfigFromSignal();let e=this.getCurrentGatewayAddress(),t=L("FINGERPRINT")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(e&&t){let r=Fte(e);this.emit(Hn.PRE_CONNECT_PC,{candidates:r,fingerprint:t})}}})}async tryUnsubBeforeResub(e,t){try{await this.signal.request(Be.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(r){throw w.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),r),r}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(Be.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(r){throw w.warning("unsubscribe datachannel warning",r),r}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(Be.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(r){throw w.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),r),r}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(Be.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(r){throw w.warning("unpublish datastream warning: ",r),r}}async tryMassUnsubBeforeResub(e){let t={users:e.map(r=>({stream_id:r.stream_id,stream_type:r.stream_type}))};try{await this.signal.request(Be.UNSUBSCRIBE_STREAMS,t,!0)}catch(r){throw w.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),r),r}}async muteLocal(e,t){let r={action:e.find(n=>n.stream_type===Lt.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(Be.CONTROL,r,!0,!0)}catch(n){throw w.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),n),n}}async unmuteLocal(e,t){let r={action:e.find(n=>n.stream_type===Lt.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(Be.CONTROL,r,!0,!0)}catch(n){throw w.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),n),n}}async muteRemote(e,t){let r={action:e===xe.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(Be.CONTROL,r,!0,!0)}catch(n){throw w.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),n),n}}async unmuteRemote(e,t){let r={action:e===xe.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(Be.CONTROL,r,!0,!0)}catch(n){throw w.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),n),n}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){let t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(Be.RESTART_ICE,t,!0)}catch(r){throw w.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),r),r}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,Kn.P2P_FAILED)}getCurrentGatewayAddress(){var e,t;if(!L("GATEWAY_WSS_ADDRESS"))return L("USE_CANDIDATE_FROM_AP_DETAIL")&&(e=this.joinInfo)!==null&&e!==void 0&&e.apGatewayAddress?(w.debug("[".concat(this.store.clientId,"] use candidate from ap detail, ").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):(t=this.joinInfo)!==null&&t!==void 0&&t.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(Be.SET_PARAMETER,{enablePublishAudioFilter:e})}},bE=0,YI=0;function ol(e,t,r,n){return new fe((i,o)=>{t.timeout=t.timeout||L("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!r?(t.data=JSON.stringify(t.data),bE+=Il(t.data)):r&&(t.data.size?bE+=t.data.size:t.data instanceof FormData?bE+=Gee(t.data):bE+=Il(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,to.request(t).then(a=>{typeof a.data=="string"?YI+=Il(a.data):a.data instanceof ArrayBuffer||a.data instanceof Uint8Array?YI+=a.data.byteLength:YI+=Il(JSON.stringify(a.data)),n&&i({data:a.data,headers:a.headers}),i(a.data)}).catch(a=>{to.isCancel(a)?o(new q(O.OPERATION_ABORTED,"cancel token canceled")):a.code==="ECONNABORTED"?o(new q(O.NETWORK_TIMEOUT,a.message)):a.response?o(new q(O.NETWORK_RESPONSE_ERROR,a.response.status)):o(new q(O.NETWORK_ERROR,a.message))})})}(function(){var e;function t(k){var P=0;return function(){return P<k.length?{done:!1,value:k[P++]}:{done:!0}}}var r=typeof Object.defineProperties=="function"?Object.defineProperty:function(k,P,B){return k==Array.prototype||k==Object.prototype||(k[P]=B.value),k},n,i=function(k){k=[typeof globalThis=="object"&&globalThis,k,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ip=="object"&&Ip];for(var P=0;P<k.length;++P){var B=k[P];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}(this);function o(k,P){if(P)e:{var B=i;k=k.split(".");for(var x=0;x<k.length-1;x++){var E=k[x];if(!(E in B))break e;B=B[E]}(P=P(x=B[k=k[k.length-1]]))!=x&&P!=null&&r(B,k,{configurable:!0,writable:!0,value:P})}}function a(k){return(k={next:k})[Symbol.iterator]=function(){return this},k}function s(k){var P=typeof Symbol<"u"&&Symbol.iterator&&k[Symbol.iterator];return P?P.call(k):{next:t(k)}}if(o("Symbol",function(k){function P(E,N){this.A=E,r(this,"description",{configurable:!0,writable:!0,value:N})}if(k)return k;P.prototype.toString=function(){return this.A};var B="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",x=0;return function E(N){if(this instanceof E)throw new TypeError("Symbol is not a constructor");return new P(B+(N||"")+"_"+x++,N)}}),o("Symbol.iterator",function(k){if(k)return k;k=Symbol("Symbol.iterator");for(var P="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),B=0;B<P.length;B++){var x=i[P[B]];typeof x=="function"&&typeof x.prototype[k]!="function"&&r(x.prototype,k,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return k}),typeof Object.setPrototypeOf=="function")n=Object.setPrototypeOf;else{var l;e:{var c={};try{c.__proto__={a:!0},l=c.a;break e}catch{}l=!1}n=l?function(k,P){if(k.__proto__=P,k.__proto__!==P)throw new TypeError(k+" is not extensible");return k}:null}var u=n;function h(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function f(k){if(k.m)throw new TypeError("Generator is already running");k.m=!0}function p(k,P){return k.h=3,{value:P}}function m(k){this.g=new h,this.G=k}function g(k,P,B,x){try{var E=P.call(k.g.j,B);if(!(E instanceof Object))throw new TypeError("Iterator result "+E+" is not an object");if(!E.done)return k.g.m=!1,E;var N=E.value}catch(C){return k.g.j=null,k.g.s(C),y(k)}return k.g.j=null,x.call(k.g,N),y(k)}function y(k){for(;k.g.h;)try{var P=k.G(k.g);if(P)return k.g.m=!1,{value:P.value,done:!1}}catch(B){k.g.v=void 0,k.g.s(B)}if(k.g.m=!1,k.g.l){if(P=k.g.l,k.g.l=null,P.F)throw P.D;return{value:P.return,done:!0}}return{value:void 0,done:!0}}function v(k){this.next=function(P){return k.o(P)},this.throw=function(P){return k.s(P)},this.return=function(P){return function(B,x){f(B.g);var E=B.g.j;return E?g(B,"return"in E?E.return:function(N){return{value:N,done:!0}},x,B.g.return):(B.g.return(x),y(B))}(k,P)},this[Symbol.iterator]=function(){return this}}function b(k,P){return P=new v(new m(P)),u&&k.prototype&&u(P,k.prototype),P}if(h.prototype.o=function(k){this.v=k},h.prototype.s=function(k){this.l={D:k,F:!0},this.h=this.C||this.u},h.prototype.return=function(k){this.l={return:k},this.h=this.u},m.prototype.o=function(k){return f(this.g),this.g.j?g(this,this.g.j.next,k,this.g.o):(this.g.o(k),y(this))},m.prototype.s=function(k){return f(this.g),this.g.j?g(this,this.g.j.throw,k,this.g.o):(this.g.s(k),y(this))},o("Array.prototype.entries",function(k){return k||function(){return function(P,B){P instanceof String&&(P+="");var x=0,E=!1,N={next:function(){if(!E&&x<P.length){var C=x++;return{value:B(C,P[C]),done:!1}}return E=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}(this,function(P,B){return[P,B]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var _=function(k,P){for(var B=0;B<k.length;B++)P(k[B])},S=function(k){return k.replace(/\r?\n|\r/g,`\r
`)},I=function(k,P,B){return P instanceof Blob?(B=B!==void 0?B+"":typeof P.name=="string"?P.name:"blob",P.name===B&&Object.prototype.toString.call(P)!=="[object Blob]"||(P=new File([P],B)),[String(k),P]):[String(k),String(P)]},A=function(k,P){if(k.length<P)throw new TypeError(P+" argument required, but only "+k.length+" present.")},D=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,M=D.FormData,H=D.XMLHttpRequest&&D.XMLHttpRequest.prototype.send,V=D.Request&&D.fetch,G=D.navigator&&D.navigator.sendBeacon,Y=D.Element&&D.Element.prototype,Z=D.Symbol&&Symbol.toStringTag;Z&&(Blob.prototype[Z]||(Blob.prototype[Z]="Blob"),"File"in D&&!File.prototype[Z]&&(File.prototype[Z]="File"));try{new File([],"")}catch{D.File=function(k,P,B){return k=new Blob(k,B||{}),Object.defineProperties(k,{name:{value:P},lastModified:{value:+(B&&B.lastModified!==void 0?new Date(B.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Z&&Object.defineProperty(k,Z,{value:"File"}),k}}var $=function(k){return k.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},F=function(k){this.i=[];var P=this;k&&_(k.elements,function(B){if(B.name&&!B.disabled&&B.type!=="submit"&&B.type!=="button"&&!B.matches("form fieldset[disabled] *"))if(B.type==="file"){var x=B.files&&B.files.length?B.files:[new File([],"",{type:"application/octet-stream"})];_(x,function(E){P.append(B.name,E)})}else B.type==="select-multiple"||B.type==="select-one"?_(B.options,function(E){!E.disabled&&E.selected&&P.append(B.name,E.value)}):B.type==="checkbox"||B.type==="radio"?B.checked&&P.append(B.name,B.value):(x=B.type==="textarea"?S(B.value):B.value,P.append(B.name,x))})};if((e=F.prototype).append=function(k,P,B){A(arguments,2),this.i.push(I(k,P,B))},e.delete=function(k){A(arguments,1);var P=[];k=String(k),_(this.i,function(B){B[0]!==k&&P.push(B)}),this.i=P},e.entries=function k(){var P,B=this;return b(k,function(x){if(x.h==1&&(P=0),x.h!=3)return P<B.i.length?x=p(x,B.i[P]):(x.h=0,x=void 0),x;P++,x.h=2})},e.forEach=function(k,P){A(arguments,1);for(var B=s(this),x=B.next();!x.done;x=B.next()){var E=s(x.value);x=E.next().value,E=E.next().value,k.call(P,E,x,this)}},e.get=function(k){A(arguments,1);var P=this.i;k=String(k);for(var B=0;B<P.length;B++)if(P[B][0]===k)return P[B][1];return null},e.getAll=function(k){A(arguments,1);var P=[];return k=String(k),_(this.i,function(B){B[0]===k&&P.push(B[1])}),P},e.has=function(k){A(arguments,1),k=String(k);for(var P=0;P<this.i.length;P++)if(this.i[P][0]===k)return!0;return!1},e.keys=function k(){var P,B,x,E,N=this;return b(k,function(C){if(C.h==1&&(P=s(N),B=P.next()),C.h!=3)return B.done?void(C.h=0):(x=B.value,E=s(x),p(C,E.next().value));B=P.next(),C.h=2})},e.set=function(k,P,B){A(arguments,2),k=String(k);var x=[],E=I(k,P,B),N=!0;_(this.i,function(C){C[0]===k?N&&(N=!x.push(E)):x.push(C)}),N&&x.push(E),this.i=x},e.values=function k(){var P,B,x,E,N=this;return b(k,function(C){if(C.h==1&&(P=s(N),B=P.next()),C.h!=3)return B.done?void(C.h=0):(x=B.value,(E=s(x)).next(),p(C,E.next().value));B=P.next(),C.h=2})},F.prototype._asNative=function(){for(var k=new M,P=s(this),B=P.next();!B.done;B=P.next()){var x=s(B.value);B=x.next().value,x=x.next().value,k.append(B,x)}return k},F.prototype._blob=function(){var k="----formdata-polyfill-"+Math.random(),P=[],B="--"+k+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(x,E){return typeof x=="string"?P.push(B+$(S(E))+`"\r
\r
`+S(x)+`\r
`):P.push(B+$(S(E))+'"; filename="'+$(x.name)+`"\r
Content-Type: `+(x.type||"application/octet-stream")+`\r
\r
`,x,`\r
`)}),P.push("--"+k+"--"),new Blob(P,{type:"multipart/form-data; boundary="+k})},F.prototype[Symbol.iterator]=function(){return this.entries()},F.prototype.toString=function(){return"[object FormData]"},Y&&!Y.matches&&(Y.matches=Y.matchesSelector||Y.mozMatchesSelector||Y.msMatchesSelector||Y.oMatchesSelector||Y.webkitMatchesSelector||function(k){for(var P=(k=(this.document||this.ownerDocument).querySelectorAll(k)).length;0<=--P&&k.item(P)!==this;);return-1<P}),Z&&(F.prototype[Z]="FormData"),H){var K=D.XMLHttpRequest.prototype.setRequestHeader;D.XMLHttpRequest.prototype.setRequestHeader=function(k,P){K.call(this,k,P),k.toLowerCase()==="content-type"&&(this.B=!0)},D.XMLHttpRequest.prototype.send=function(k){k instanceof F?(k=k._blob(),this.B||this.setRequestHeader("Content-Type",k.type),H.call(this,k)):H.call(this,k)}}V&&(D.fetch=function(k,P){return P&&P.body&&P.body instanceof F&&(P.body=P.body._blob()),V.call(this,k,P)}),G&&(D.navigator.sendBeacon=function(k,P){return P instanceof F&&(P=P._asNative()),G.call(this,k,P)}),D.FormData=F}})();var Bv=()=>{let e=L("AREAS");return e.length===0&&e.push(It.GLOBAL),Zs(e).call(e,(t,r,n)=>{let i=Gte(r);return i?n===0?i:"".concat(t,",").concat(i):t},"")},Gte=e=>e===It.OVERSEA?"".concat(ei.ASIA,",").concat(ei.EUROPE,",").concat(ei.AFRICA,",").concat(ei.NORTH_AMERICA,",").concat(ei.SOUTH_AMERICA,",").concat(ei.OCEANIA):ei[e],A6e=e=>{let t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map(r=>{let n=mC[r],i=Object.keys(n);i&&i.map(o=>{o!=="CODE"&&(t[o]=t[o].concat(n[o]))})}),t},C_={GLOBAL:{ASIA:[It.CHINA,It.JAPAN,It.INDIA,It.KOREA,It.HKMC],EUROPE:[],NORTH_AMERICA:[It.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},EE=Object.keys(C_[It.GLOBAL]),XI=[It.CHINA,It.NORTH_AMERICA,It.EUROPE,It.ASIA,It.JAPAN,It.INDIA,It.OCEANIA,It.SOUTH_AMERICA,It.AFRICA,It.KOREA,It.HKMC,It.US],O6e=function(e,t){let r=[];if(ge(e).call(e,It.GLOBAL)){let o=[It.GLOBAL,It.OVERSEA],a=Object.keys(mC);if(t===It.GLOBAL)throw new q(O.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===It.CHINA)r=[It.OVERSEA];else if(i=t,ge(EE).call(EE,i)){let s=(n=t,C_[It.GLOBAL][n]||[]),l=[...o,t,...s];r=a.filter(c=>!ge(l).call(l,c))}else if(function(s){let l=!1;return EE.forEach(c=>{var u;ge(u=C_[It.GLOBAL][c]).call(u,s)&&(l=!0)}),l}(t)){let s=function(c){let u;return EE.forEach(h=>{var f;ge(f=C_[It.GLOBAL][h]).call(f,c)&&(u=h)}),u}(t),l=[...o,s,t];r=a.filter(c=>!ge(l).call(l,c))}else r=e;r=function(s){let l=[];return XI.forEach(c=>{ge(s).call(s,c)&&l.push(c)}),l.concat(s.filter(c=>!ge(XI).call(XI,c)))}(r)}else r=e;var n,i;return r};function y$(e){var t,r;if(!e&&ge(t=L("AREAS")).call(t,It.EXTENSIONS))return w.debug("update area from ap : reset"),void $L(aVe,!0);if(!ge(r=L("AREAS")).call(r,It.GLOBAL)||!e)return;let n=mC.EXTENSIONS;n&&(n={CODE:Gte(It.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},w.debug("update area from ap success: ".concat(e,",config is "),n),Gt("AREAS",[It.EXTENSIONS],!0),Object.keys(n).map(i=>{i==="LOG_UPLOAD_SERVER"||i==="EVENT_REPORT_DOMAIN"||i==="EVENT_REPORT_BACKUP_DOMAIN"||i==="PROXY_SERVER_TYPE3"?Gt(i,n[i][0]):Gt(i,n[i])}))}function $L(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=Te.reportApiInvoke(null,{name:en.SET_AREA,options:e,tag:xr.TRACER});try{let n=[];if(typeof e=="string"&&(n=[e]),Array.isArray(e)&&(e.forEach(o=>{if(!ge(r6).call(r6,o))throw new q(O.INVALID_PARAMS,"invalid area code")}),n=e),Object.prototype.toString.call(e)==="[object Object]"){let{areaCode:o,excludedArea:a}=e;if(!o)throw new q(O.INVALID_PARAMS,"area code is needed");let s=o;typeof o=="string"&&(s=[o]),n=a?O6e(s,a):s}if(!t){if(Cu.AREAS){let o=new q(O.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return r.onError(o),void w.warning("setArea is prohibited because of config-distribute")}if(ge(n).call(n,It.GLOBAL)&&L("AREAS")===It.EXTENSIONS){let o=new q(O.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return r.onError(o),void w.warning("setArea is prohibited because of ap extensions")}}Gt("AREAS",n,t);let i=A6e(n);Object.keys(i).map(o=>{o==="LOG_UPLOAD_SERVER"||o==="EVENT_REPORT_DOMAIN"||o==="EVENT_REPORT_BACKUP_DOMAIN"||o==="PROXY_SERVER_TYPE3"?Gt(o,i[o][0]):Gt(o,i[o])}),w.debug("set area success:",n.join(","))}catch(n){throw r.onError(n),n}r.onSuccess()}function v$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Tk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v$(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var JI=1;function k6e(e,t,r,n,i){JI+=1;let o={sid:r.sid,command:"convergeAllocateEdge",uid:"666",appId:r.appId,ts:Math.floor(Date.now()/1e3),seq:JI,requestId:JI,version:Ra,cname:r.cname},a={service_name:t,json_body:JSON.stringify(o)},s,l,c=e[0];return il(async()=>{s=Date.now();let u=await ol(c,{data:a,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(l=Date.now()-s,u.code!==0){let p=new q(O.UNEXPECTED_RESPONSE,"live streaming ap error, code"+u.code,{retry:!0,responseTime:l});throw w.error(p.toString()),p}let h=JSON.parse(u.json_body);if(h.code!==200){let p=new q(O.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(h.code,", reason: ").concat(h.reason),{code:h.code,responseTime:l});throw w.error(p.toString()),p}if(!h.servers||h.servers.length===0){let p=new q(O.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:h.code,responseTime:l});throw w.error(p.toString()),p}let f=function(p,m){return{addressList:p.servers.map(g=>"wss://".concat(g.address.replace(/\./g,"-"),".").concat(L("WORKER_DOMAIN"),":").concat(g.wss,"?serviceName=").concat(encodeURIComponent(m))),workerToken:p.workerToken,vid:p.vid}}(h,t);return L("LIVE_STREAMING_ADDRESS")&&(f.addressList=L("LIVE_STREAMING_ADDRESS")instanceof Array?L("LIVE_STREAMING_ADDRESS"):[L("LIVE_STREAMING_ADDRESS")]),Tk(Tk({},f),{},{responseTime:l})},(u,h)=>(Te.apworkerEvent(r.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(u.addressList),firstSuccess:h===0,responseTime:l,serverIp:e[h%e.length]}),!1),(u,h)=>(Te.apworkerEvent(r.sid,{success:!1,sc:u.data&&u.data.code||200,serviceName:t,responseTime:l,serverIp:e[h%e.length]}),!!(u.code!==O.OPERATION_ABORTED&&u.code!==O.UNEXPECTED_RESPONSE||u.data&&u.data.retry)&&(c=e[(h+1)%e.length],!0)),i)}var QI=1;function b$(e,t,r,n){let{url:i,areaCode:o}=e,{clientId:a,sid:s}=t,l=Date.now(),c,[u,h]=zL(t,o,[$r.CHOOSE_SERVER]),f=Hr.networkState;return il(async()=>{f&&Hr.networkState===Ro.OFFLINE&&Hr.onlineWaiter&&await fe.race([Hr.onlineWaiter,jn(n&&n.maxRetryTimeout||Yr.maxRetryTimeout)]),f=Hr.networkState;let{data:p,headers:m}=await ol(i,{data:u,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);c=m.http3==="1"?1:-1,Te.reportResourceTiming(i,s),Wte(p,i,t,l,[$r.CHOOSE_SERVER],c);let g=Fv(p,$r.CHOOSE_SERVER);return HL(g),OL(g,i)},p=>(p&&Te.joinChooseServer(s,{lts:l,succ:!0,csAddr:i,opid:h,serverList:p.gatewayAddrs.map(m=>m.address),ec:null,cid:p.cid.toString(),uid:p.uid.toString(),csIp:p.csIp,unilbsServerIds:[$r.CHOOSE_SERVER].toString(),isHttp3:c}),!1),p=>p.code!==O.OPERATION_ABORTED&&(p.code===O.CAN_NOT_GET_GATEWAY_SERVER?p.data.retry:(Te.joinChooseServer(s,{lts:l,succ:!1,csAddr:i,serverList:null,opid:h,ec:p.code,csIp:p.data&&p.data.csIp,unilbsServerIds:[$r.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:f}),isHttp3:c}),w.warning("[".concat(a||"sid-".concat(s.slice(0,6)),"] Choose server network error, retry"),p),!0)),n)}function E$(e,t,r,n){let i,{url:o,areaCode:a,serviceIds:s}=e,l=Date.now(),[c,u]=zL(t,a,s),h;return il(async()=>{h&&Hr.networkState===Ro.OFFLINE&&Hr.onlineWaiter&&await fe.race([Hr.onlineWaiter,jn(n&&n.maxRetryTimeout||Yr.maxRetryTimeout)]),h=Hr.networkState;let{data:f,headers:p}=await ol(o,{data:c,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);i=p.http3==="1"?1:-1,Te.reportResourceTiming(o,t.sid),Wte(f,o,t,l,s,i);let m=Fv(f,$r.CHOOSE_SERVER),g=Fv(f,t.cloudProxyServer==="proxy5"?$r.CLOUD_PROXY_5:t.cloudProxyServer==="proxy3"||t.cloudProxyServer==="proxy4"?$r.CLOUD_PROXY:$r.CLOUD_PROXY_FALLBACK);return HL(m),{gatewayInfo:OL(m,o),proxyInfo:g,url:o}},f=>(f.gatewayInfo&&Te.joinChooseServer(t.sid,{lts:l,succ:!0,csAddr:o,serverList:f.gatewayInfo.gatewayAddrs.map(p=>p.address),ec:null,opid:u,cid:f.gatewayInfo.cid.toString(),uid:f.gatewayInfo.uid.toString(),csIp:f.gatewayInfo.csIp,unilbsServerIds:s.toString(),isHttp3:i}),f.proxyInfo&&Te.joinWebProxyAP(t.sid,{lts:l,sucess:1,apServerAddr:o,turnServerAddrList:f.proxyInfo.addresses.map(p=>p.ip).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:s.toString()}),!1),f=>f.code!==O.OPERATION_ABORTED&&(f.code===O.CAN_NOT_GET_GATEWAY_SERVER?f.data.retry:(Te.joinWebProxyAP(t.sid,{lts:l,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:f.code,eventType:t.cloudProxyServer,unilbsServerIds:s.toString(),extend:JSON.stringify({networkState:h})}),w.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),f),!0)),n)}var Wte=(e,t,r,n,i,o)=>{let{sid:a,clientId:s,cloudProxyServer:l}=r,c=[],u=h=>{h.flag===4096?Te.joinChooseServer(a,{lts:n,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:h.error.message,csIp:h.error.data&&h.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:o}):h.flag!==1048576&&h.flag!==4194304&&h.flag!==4194310||Te.joinWebProxyAP(a,{lts:n,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:h.error.code,eventType:l,unilbsServerIds:i.toString()})};if(e.response_body.forEach(h=>{let f=h.buffer.code;if(h.uri===23&&f===0&&!h.buffer.edges_services)if(h.buffer.flag===4194310)w.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),h.buffer.edges_services=[];else{let p={error:new q(O.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:h.buffer.flag};c.push(p),u(p)}if(f!==0){let p=cm(f),m={error:new q(O.CAN_NOT_GET_GATEWAY_SERVER,p.desc,{desc:p.desc,retry:p.retry,csIp:e.detail[502]}),flag:h.buffer.flag};h.buffer.flag===4194310?w.warning(m.error.toString()):c.push(m),u(m)}}),c.length)throw w.warning("[".concat(s||"sid-".concat(a.slice(0,6)),"] multi unilbs ").concat(t," failed, ").concat(c.map(h=>"flag: ".concat(h.flag,", message: ").concat(h.error.message,", retry: ").concat(h.error.data.retry)).join(" | "))),new q(O.CAN_NOT_GET_GATEWAY_SERVER,c.map(h=>"flag: ".concat(h.flag,", message: ").concat(h.error.message)).join(" | "),{retry:!!c.find(h=>h.error.data.retry),csIp:e.detail[502],desc:[...new Set(c.map(h=>{var f;return h==null||(f=h.error)===null||f===void 0||(f=f.data)===null||f===void 0?void 0:f.desc}).filter(h=>!!h))]})},HL=e=>{var t,r,n,i;if(e.addresses&&e.addresses.length===0&&e.code===0)throw new q(O.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(L("AP_AREA")&&((n=e.detail)!==null&&n!==void 0&&n[23]&&typeof((i=e.detail)===null||i===void 0?void 0:i[23])=="string"?y$(e.detail[23].toLowerCase()):y$()),(t=e.detail)!==null&&t!==void 0&&t[19]&&typeof((r=e.detail)===null||r===void 0?void 0:r[19])=="string"){let a=e.detail[19],s=a==null?void 0:a.split(";");for(let l=0;l<s.length;l++){var o;let c=Ri(o=s[l]).call(o);e.addresses[l]&&s&&(e.addresses[l].fingerprint=c)}}if(L("GATEWAY_ADDRESS")&&L("GATEWAY_ADDRESS").length>0){w.debug("assign gateway address to",L("GATEWAY_ADDRESS"));let a=L("GATEWAY_ADDRESS").map(s=>{var l,c;let u=(l=(c=e.addresses.find(h=>h.ip===s.ip&&h.port===s.port))===null||c===void 0?void 0:c.fingerprint)!==null&&l!==void 0?l:"";return{ip:s.ip,port:s.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:u}});e.addresses=a}},P6e=(e,t)=>{if(e.response_body&&e.response_body.length){let r=e.response_body[0];if(r.buffer.code!==0){let n=cm(r.buffer.code);throw new q(O.UPDATE_TICKET_FAILED,"[".concat(r.buffer.code,"]: ").concat(n.desc),{retry:n.retry})}return r.buffer.ticket}throw w.debug("update ticket request received ap response without response body:",t),new q(O.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},zL=(e,t,r)=>{let n=Math.floor(Math.random()*1e12),i={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:Tk({6:e.stringUid,11:t,12:L("USE_NEW_TOKEN")?"1":void 0,22:t},e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:r,uid:e.uid||0}}]};i.request_bodies.forEach(a=>{e.multiIP&&e.multiIP.gateway_ip&&(a.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))});let o=new FormData;return o.append("request",JSON.stringify(i)),[o,n]},D6e=(e,t)=>{let r=Math.floor(Math.random()*1e12),n={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map(o=>({ip:o.ip,port:o.port}))}}]},i=new FormData;return i.append("request",JSON.stringify(n)),[i,r]},Lp=0;function Qm(e){return fe.all(e.map(t=>t.then(r=>{throw r},r=>r))).then(t=>{throw t},t=>t)}var $v=async e=>{let{fragementLength:t,referenceList:r,asyncMapHandler:n,allFailedhandler:i,promisesCollector:o}=e,a=0,s=t,l,c=0,u=async()=>{let h=(()=>{let f=a*s,p=f+s;return r.slice(f,p).map(n)})();o&&o.push(...h);try{l=await Qm(h)}catch(f){if(c+=s,a++,!(c>=r.length))return void await u();i(f)}h.forEach(f=>f.cancel())};return await u(),l},Kte=async e=>{let{referenceList:t,asyncMapHandler:r,closeFn:n}=e,i=t.length,o=0,a=async()=>{let s=r(t.shift());try{return await s}catch(l){if(o++,o>=i||n!=null&&n(l))throw l;return a()}};return a()};async function Ck(e,t,r,n){return{gatewayInfo:await async function(i,o,a,s){let l=null,c=[],u=async()=>{let f=L("WEBCS_DOMAIN").slice(0,L("AJAX_REQUEST_CONCURRENT")).map(g=>({url:i.proxyServer?"https://".concat(i.proxyServer,"/ap/?url=").concat(g+"/api/v2/transpond/webrtc?v=2"):"https://".concat(g,"/api/v2/transpond/webrtc?v=2"),areaCode:Bv()})),p=s.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:f.map(g=>g.url)}),m=await $v({fragementLength:L("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:g=>(w.debug("[".concat(i.clientId,"] Connect to choose_server:"),g.url),b$(g,i,o,a)),allFailedhandler:g=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:g},p),g[0]},promisesCollector:c});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},p),m},h=async()=>{if(await jn(1e3),l!==null)return l;let f=L("WEBCS_DOMAIN_BACKUP_LIST").map(g=>({url:i.proxyServer?"https://".concat(i.proxyServer,"/ap/?url=").concat(g+"/api/v2/transpond/webrtc?v=2"):"https://".concat(g,"/api/v2/transpond/webrtc?v=2"),areaCode:Bv()})),p=s.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:f.map(g=>g.url)}),m=await $v({fragementLength:L("FRAGEMENT_LENGTH"),referenceList:f,asyncMapHandler:g=>(w.debug("[".concat(i.clientId,"] Connect to backup choose_server:"),g.url),b$(g,i,o,a)),allFailedhandler:g=>{throw s.recordJoinChannelService({endTs:Date.now(),status:"error",errors:g},p),g[0]},promisesCollector:c});return s.recordJoinChannelService({endTs:Date.now(),status:"success"},p),m};try{return l=await Qm([u(),h()]),c.length&&c.forEach(f=>f.cancel&&typeof f.cancel=="function"&&f.cancel()),l}catch(f){throw f[0]}}(e,t,r,n)}}async function _$(e,t,r,n,i){let o=e.cloudProxyServer;if(o==="disabled"){if(e.useLocalAccessPoint)return await Ck(e,t,r,i);if(L("JOIN_WITH_FALLBACK_MEDIA_PROXY")){let{gatewayInfo:f,proxyInfo:p}=await S$(e,t,r,i);if(e.turnServer&&e.turnServer.mode!=="auto")return{gatewayInfo:f};let m=p.map(g=>({turnServerURL:g.address,tcpport:g.tcpport||zn.tcpport,udpport:g.udpport||zn.udpport,username:g.username||zn.username,password:g.password||zn.password,forceturn:!1,security:!0}));if(i.useP2P){var a;let g=(a=e.uid)!==null&&a!==void 0?a:f.uid,y="glb:".concat(g.toString()),v=await lk(y),b=p.map(_=>({turnServerURL:_.address,tcpport:_.tcpport||zn.tcpport,udpport:_.udpport||zn.udpport,username:y,password:v,forceturn:!1,security:!0}));m.push(...b)}return e.turnServer={mode:"manual",servers:m},{gatewayInfo:f}}return await Ck(e,t,r,i)}let{proxyInfo:s,gatewayInfo:l}=await S$(e,t,r,i),c={gatewayInfo:l},u=s.map(f=>({turnServerURL:f.address,tcpport:o==="proxy3"?void 0:f.tcpport?f.tcpport:zn.tcpport,udpport:o==="proxy4"?void 0:f.udpport?f.udpport:zn.udpport,username:f.username||zn.username,password:f.password||zn.password,forceturn:o!=="proxy4",security:o==="proxy5"}));if(i.useP2P){var h;let f=(h=e.uid)!==null&&h!==void 0?h:l.uid,p="glb:".concat(f.toString()),m=await lk(p),g=s.map(y=>({turnServerURL:y.address,tcpport:o==="proxy3"?void 0:y.tcpport||zn.tcpport,udpport:o==="proxy4"?void 0:y.udpport||zn.udpport,username:p,password:m,forceturn:o!=="proxy4",security:o==="proxy5"}));u.push(...g)}return e.turnServer={mode:"manual",servers:u},w.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(o)),c}async function qte(e,t,r,n,i){let o=L("ACCOUNT_REGISTER").slice(0,L("AJAX_REQUEST_CONCURRENT")),a=[];a=t.proxyServer?o.map(l=>"https://".concat(t.proxyServer,"/ap/?url=").concat(l+"/api/v1")):o.map(l=>"https://".concat(l,"/api/v1"));let s=i==null?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:a});try{let l=await async function(c,u,h,f,p){let m=Date.now(),g={sid:h.sid,opid:10,appid:h.appId,string_uid:u},y=c[0],v=await il(()=>ol(y+"".concat(y.indexOf("?")===-1?"?":"&","action=stringuid"),{data:g,cancelToken:f,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(b,_)=>{if(b.code===0){if(b.uid<=0||b.uid>=Math.pow(2,32))throw w.error("Invalid Uint Uid ".concat(u," => ").concat(b.uid),b),Te.reqUserAccount(g.sid,{lts:m,success:!1,serverAddr:y,stringUid:g.string_uid,uid:b.uid,errorCode:O.INVALID_UINT_UID_FROM_STRING_UID,extend:g}),new q(O.INVALID_UINT_UID_FROM_STRING_UID);return Te.reqUserAccount(g.sid,{lts:m,success:!0,serverAddr:y,stringUid:g.string_uid,uid:b.uid,errorCode:null,extend:g}),!1}let S=cm(b.code);return S.retry&&(y=c[(_+1)%c.length]),Te.reqUserAccount(g.sid,{lts:m,success:!1,serverAddr:y,stringUid:g.string_uid,uid:b.uid,errorCode:S.desc,extend:g}),S.retry},(b,_)=>b.code!==O.OPERATION_ABORTED&&(Te.reqUserAccount(g.sid,{lts:m,success:!1,serverAddr:y,stringUid:g.string_uid,uid:null,errorCode:b.code,extend:g}),y=c[(_+1)%c.length],!0),p);if(v.code!==0){let b=cm(v.code);throw new q(O.UNEXPECTED_RESPONSE,b.desc)}return v}(a,e,t,r,n);return i==null||i.recordJoinChannelService({status:"success",endTs:Date.now()},s),l.uid}catch(l){throw i==null||i.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[l]},s),l}}async function L6e(e,t,r){let n=L("ACCOUNT_REGISTER"),i=[];i=t.proxyServer?n.map(o=>"https://".concat(t.proxyServer,"/ap/?url=").concat(o+"/api/v1")):n.map(o=>"https://".concat(o,"/api/v1"));try{return await Kte({referenceList:i,asyncMapHandler:o=>async function(a,s,l,c){let u=Date.now(),h={sid:l.sid,opid:10,appid:l.appId,string_uid:s};try{let f=await ol(a+"".concat(a.indexOf("?")===-1?"?":"&","action=stringuid"),{data:h,cancelToken:c,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(f.code!==0){let p=cm(f.code);throw new q(O.UNEXPECTED_RESPONSE,"preload sua error:".concat(p.desc),p)}if(f.uid<=0||f.uid>=Math.pow(2,32))throw new q(O.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:u,url:a,req:h,uid:f.uid,elapse:Date.now()-u}}catch(f){throw f}}(o,e,t,r),closeFn:o=>o.code===O.OPERATION_ABORTED||o.code===O.UNEXPECTED_RESPONSE&&!o.data.retry})}catch(o){throw o}}async function M6e(e,t,r){let n=L("CDS_AP").slice(0,L("AJAX_REQUEST_CONCURRENT")).map(l=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(l+"/api/v1"):"https://".concat(l,"/api/v1?action=config")),i=n.map(l=>function(c,u,h,f){let p=St(),m={flag:64,cipher_method:0,features:{device:p.name,system:p.os,system_general:navigator.userAgent,vendor:u.appId,version:Ra,cname:u.cname,sid:u.sid,session_id:u.sid,detail:"",proxyServer:u.proxyServer}};return il(()=>ol(c,{data:m,timeout:1e3,cancelToken:h,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,g=>g.code!==O.OPERATION_ABORTED,f)}(l,e,t,r)),o=null,a=null,s={};try{o=await Qm(i)}catch(l){if(l.code===O.OPERATION_ABORTED)throw l;a=l}if(i.forEach(l=>l.cancel()),Te.reportApiInvoke(e.sid,{name:en.REQUEST_CONFIG_DISTRIBUTE,options:{error:a,res:o}}).onSuccess(),o&&o.test_tags)try{s=function(l){if(!l.test_tags)return{};let c=l.test_tags,u=Object.keys(c),h={};return u.forEach(f=>{var p;let m=Ri(p=f.slice(4)).call(p),g=JSON.parse(c[f])[1];h[m]=g}),h}(o)}catch{}return s}async function w$(e,t){let r=L("WEBCS_DOMAIN").concat(L("WEBCS_DOMAIN_BACKUP_LIST")).map(n=>({url:"https://".concat(n,"/api/v2/transpond/webrtc?v=2"),areaCode:Bv(),serviceIds:[$r.CHOOSE_SERVER,$r.CLOUD_PROXY_FALLBACK]}));try{return await Kte({referenceList:r,asyncMapHandler:n=>async function(i,o,a){let s,{url:l,areaCode:c,serviceIds:u}=i,h=Date.now(),[f,p]=zL(o,c,u),m=Hr.networkState;try{m&&Hr.networkState===Ro.OFFLINE&&Hr.onlineWaiter&&await fe.race([Hr.onlineWaiter,jn(Yr.maxRetryTimeout)]),m=Hr.networkState;let{data:g,headers:y}=await ol(l,{data:f,cancelToken:a,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);s=y.http3==="1"?1:-1,(_=>{let S=[];if(_.response_body.forEach(I=>{let A=I.buffer.code;if(I.uri===23&&A===0&&!I.buffer.edges_services)if(I.buffer.flag===4194310)I.buffer.edges_services=[];else{let D={error:new q(O.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:_.detail[502]}),flag:I.buffer.flag};S.push(D)}if(A!==0){let D=cm(A),M={error:new q(O.CAN_NOT_GET_GATEWAY_SERVER,D.desc,{desc:D.desc,retry:D.retry,csIp:_.detail[502]}),flag:I.buffer.flag};I.buffer.flag===4194310?w.warning(M.error.toString()):S.push(M)}}),S.length)throw new q(O.CAN_NOT_GET_GATEWAY_SERVER,S.map(I=>"flag: ".concat(I.flag,", message: ").concat(I.error.message)).join(" | "),{retry:!!S.find(I=>I.error.data.retry),csIp:_.detail[502],desc:[...new Set(S.map(I=>{var A;return I==null||(A=I.error)===null||A===void 0||(A=A.data)===null||A===void 0?void 0:A.desc}).filter(I=>!!I))]})})(g);let v=Fv(g,$r.CHOOSE_SERVER),b=Fv(g,$r.CLOUD_PROXY_FALLBACK);return HL(v),{gatewayInfo:OL(v,l),proxyInfo:b,opid:p,requestTime:h,url:l,isHttp3:s,elapse:Date.now()-h}}catch(g){throw g}}(n,e,t),closeFn:n=>n.code===O.OPERATION_ABORTED||n.code===O.CAN_NOT_GET_GATEWAY_SERVER&&!n.data.retry})}catch(n){throw n}}async function S$(e,t,r,n){let i=L("PROXY_SERVER_TYPE3"),o=(p,m,g)=>{let y=g||i;return Array.isArray(y)&&(y=m%2==0?i[1]:i[0]),"https://".concat(y,"/ap/?url=").concat(p)},a=null,s=[],l=async()=>{let p=L("WEBCS_DOMAIN").slice(0,L("AJAX_REQUEST_CONCURRENT")).map((y,v)=>{let b;return b=e.cloudProxyServer==="disabled"&&e.proxyServer?o("".concat(y,"/api/v2/transpond/webrtc?v=2"),v,e.proxyServer):e.cloudProxyServer==="disabled"||e.cloudProxyServer==="fallback"?"https://".concat(y,"/api/v2/transpond/webrtc?v=2"):o("".concat(y,"/api/v2/transpond/webrtc?v=2"),v),{url:b,areaCode:Bv(),serviceIds:[$r.CHOOSE_SERVER,e.cloudProxyServer==="proxy5"?$r.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?$r.CLOUD_PROXY:$r.CLOUD_PROXY_FALLBACK]}}),m=n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:p.map(y=>y.url)}),g=await $v({fragementLength:L("FRAGEMENT_LENGTH"),referenceList:p,asyncMapHandler:y=>(w.debug("[".concat(e.clientId,"] Connect to choose_server:"),y.url),E$(y,e,t,r)),allFailedhandler:y=>{throw n.recordJoinChannelService({endTs:Date.now(),status:"error",errors:y},m),y[0]},promisesCollector:s});return n.recordJoinChannelService({endTs:Date.now(),status:"success"},m),g},c=async()=>{if(await jn(1e3),a!==null)return a;let p=L("WEBCS_DOMAIN_BACKUP_LIST").map((y,v)=>{let b;return b=e.cloudProxyServer==="disabled"&&e.proxyServer?o("".concat(y,"/api/v2/transpond/webrtc?v=2"),v,e.proxyServer):e.cloudProxyServer==="disabled"||e.cloudProxyServer==="fallback"?"https://".concat(y,"/api/v2/transpond/webrtc?v=2"):o("".concat(y,"/api/v2/transpond/webrtc?v=2"),v),{url:b,areaCode:Bv(),serviceIds:[$r.CHOOSE_SERVER,e.cloudProxyServer==="proxy5"?$r.CLOUD_PROXY_5:e.cloudProxyServer==="proxy3"||e.cloudProxyServer==="proxy4"?$r.CLOUD_PROXY:$r.CLOUD_PROXY_FALLBACK]}}),m=n.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:p.map(y=>y.url)}),g=await $v({fragementLength:L("FRAGEMENT_LENGTH"),referenceList:p,asyncMapHandler:y=>(w.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),y.url),E$(y,e,t,r)),allFailedhandler:y=>{throw n.recordJoinChannelService({endTs:Date.now(),status:"error",errors:y},m),y[0]},promisesCollector:s});return n.recordJoinChannelService({endTs:Date.now(),status:"success"},m),g},u,h,f;try{({gatewayInfo:u,proxyInfo:h,url:f}=await Qm([l(),c()]))}catch(p){throw p[0]}if(s.length&&s.forEach(p=>p.cancel&&typeof p.cancel=="function"&&p.cancel()),!u||!h)throw new q(O.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=f,e.cloudProxyServer!=="disabled"&&Array.isArray(i)&&f){let p=/^https?:\/\/(.+?)(\/.*)?$/.exec(f)[1];ge(i).call(i,p)&&(e.proxyServer=p,w.setProxyServer(p),Te.setProxyServer(p))}return a={gatewayInfo:u,proxyInfo:await nte(h,u.uid)},a}async function j6e(e,t,r){let n=L("UAP_AP").slice(0,L("AJAX_REQUEST_CONCURRENT")).map(o=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(o+"/api/v1?action=uap"):"https://".concat(o,"/api/v1?action=uap")),i=n.map(o=>function(a,s,l,c){let u={command:"convergeAllocateEdge",sid:s.sid,appId:s.appId,token:s.token,ts:Date.now(),version:Ra,cname:s.cname,uid:s.uid.toString(),requestId:QI,seq:QI};QI+=1;let h={service_name:"tele_channel",json_body:JSON.stringify(u)};return il(async()=>{let f=await ol(a,{data:h,cancelToken:l,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(f.code!==0){let m=new q(O.UNEXPECTED_RESPONSE,"cross channel ap error, code"+f.code,{retry:!0});throw w.error(m.toString()),m}let p=JSON.parse(f.json_body);if(p.code!==200){let m=new q(O.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(p.code,", reason: ").concat(p.reason));throw w.error(m.toString()),m}if(!p.servers||p.servers.length===0){let m=new q(O.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw w.error(m.toString()),m}return{vid:p.vid,workerToken:p.workerToken,addressList:(L("CHANNEL_MEDIA_RELAY_SERVERS")||p.servers).map(m=>"wss://".concat(m.address.replace(/\./g,"-"),".").concat(L("WORKER_DOMAIN"),":").concat(m.wss))}},void 0,f=>!!(f.code!==O.OPERATION_ABORTED&&f.code!==O.UNEXPECTED_RESPONSE||f.data&&f.data.retry),c)}(o,e,t,r));try{let o=await Qm(i);return i.forEach(a=>a.cancel()),o}catch(o){throw o[0]}}async function U6e(e,t,r){let n=null,i=[],o=async a=>{let s=L(a?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(l=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(l+"/api/v2/transpond/webrtc?v=2"):"https://".concat(l,"/api/v2/transpond/webrtc?v=2"));return a&&(await jn(1e3),n!==null)?n:await $v({fragementLength:L("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:l=>(w.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(a?"backup":""," choose_server:"),l),function(c,u,h,f){let[p]=D6e(u,[$r.CHOOSE_SERVER]),m=Hr.networkState;return il(async()=>{m&&Hr.networkState===Ro.OFFLINE&&Hr.onlineWaiter&&await fe.race([Hr.onlineWaiter,jn(f&&f.maxRetryTimeout||Yr.maxRetryTimeout)]),m=Hr.networkState;let g=await ol(c,{data:p,cancelToken:h,headers:{"Content-Type":"multipart/form-data;"}},!0);return P6e(g,c)},()=>!1,g=>g.code!==O.OPERATION_ABORTED&&(g.code===O.UPDATE_TICKET_FAILED?g.data.retry:(w.warning("[".concat(u.clientId,"] update ticket network error, retry"),g),!0)),f)}(l,e,t,r)),allFailedhandler:l=>{throw l[0]},promisesCollector:i})};try{return n=await Qm([o(!1),o(!0)]),i.length&&i.forEach(a=>a.cancel&&typeof a.cancel=="function"&&a.cancel()),n}catch(a){throw a[0]}}function T$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function C$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T$(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var F6e=class extends _r{get isSuccess(){return!!this.configs}constructor(){super(),R(this,"configs",void 0),R(this,"joinInfo",void 0),R(this,"cancelToken",void 0),R(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),R(this,"interval",void 0),R(this,"mutex",new ai("config-distribute")),R(this,"mutableParamsRead",!1)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),L("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},L("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,Te.reportApiInvoke(null,{options:void 0,name:en.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:xr.TRACER}).onSuccess(JSON.stringify(Cu))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void w.debug("[config-distribute] get config distribute interrupted have no joininfo");let e,t=await this.mutex.lock();try{e=await M6e(this.joinInfo,this.cancelToken,this.retryConfig),w.debug("[config-distribute] get config distribute",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(r){let n=new q(O.NETWORK_RESPONSE_ERROR,r);w.warning("[config-distribute] ".concat(n.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&t.uplink.max_bitrate!==void 0&&t.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(fk.UPDATE_BITRATE_LIMIT,e):this.emit(fk.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&C$({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;let r=V0(t=Object.keys(e).filter(i=>/^webrtc_ng_global_parameter/.test(i))).call(t);for(let i=0;i<r.length;i++)for(let o=r.length-1;o>i;o--){let a=r[o];if(typeof e[a].__priority=="number"){let s=e[a].__priority,l=r[o-1];if(typeof e[l].__priority=="number"){if(!(s>e[l].__priority))continue;{let c=a;r[o]=r[o-1],r[o-1]=c}}else{let c=a;r[o]=r[o-1],r[o-1]=c}}}let n={};r.forEach(i=>{let o=e[i],a=o.__expires;Object.keys(o).forEach(s=>{s==="__priority"||s==="__expires"||Object.prototype.hasOwnProperty.call(n,s)||(n[s]=C$({value:o[s]},a&&{expires:a}))})});try{(function(a){try{let s=Date.now();Object.keys(a).forEach(l=>{switch(l){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":case"ENABLE_AG_ADAPTATION":case"FORCE_AG_HIGH_FRAMERATE":case"FORCE_SUPPORT_AG_ADAPTATION":case"ENCODER_CONFIG_LIMIT":case"CAMERA_CAPTURE_CONFIG":case"ENABLE_PRELOAD":if(Object.prototype.hasOwnProperty.call(Mr,l)){let{value:c,expires:u}=a[l];if(u&&u<=s)return;Cu[l]=c,Mr[l]=c,w.debug("Update global parameters from config distribute",l,c)}}})}catch(s){w.error("Error update config immediately: ".concat(a),s.message)}})(n);let i=JSON.stringify(n),o=window.btoa(i);window.localStorage.setItem("websdk_ng_global_parameter",o),w.debug("Caching global parameters ".concat(i))}catch(i){w.error("Error caching global parameters:",i.message)}}},V6e=class extends _r{constructor(){super(...arguments),R(this,"resultStorage",new Map)}setLocalAudioStats(e,t,r){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(r,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(r,t))}setLocalVideoStats(e,t,r){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(r,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(r,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(r))}setRemoteAudioStats(e,t){let r=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",r,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){let r=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",r,this.checkVideoDecode(t))}record(e,t,r){if(L("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});let n=this.resultStorage.get(e);if(n&&(n.result.push(r),n.result.length>=5)){var i;let o=ge(i=n.result).call(i,!0);n.isPrevNormal&&!o&&this.emit("exception",x$[e],e,t),!n.isPrevNormal&&o&&this.emit("exception",x$[e]+2e3,e+"_RECOVER",t),n.isPrevNormal=o,n.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&e.receiveLevel===0)}checkAudioInputLevel(e,t){return t instanceof gn&&!t.isActive||!!t.muted||e.sendVolumeLevel!==0}checkFramerateInput(e,t){let r=null;t._encoderConfig&&t._encoderConfig.frameRate&&(r=No(t._encoderConfig.frameRate));let n=e.captureFrameRate;return!r||!n||!(r>10&&n<5||r<10&&r>=5&&n<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||e.sendBitrate!==0}checkSendAudioBitrate(e,t){return t instanceof gn&&!t.isActive||!!t.muted||e.sendBitrate!==0}checkVideoDecode(e){return e.receiveBitrate===0||e.decodeFrameRate!==0}},x$={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},ni=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){let r=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(r.length>0){let n=r[r.length-1];return Math.round(performance.now()-n.startTime)}return 0}measureFromPublishStart(e,t){let r=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(r.length>0){let n=r[r.length-1];return Math.round(performance.now()-n.startTime)}return 0}};function GL(e,t){this.v=e,this.k=t}function Rt(e){return new GL(e,0)}var B6e=JQ,$6e=ql;tr({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var e=$6e.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var H6e=ql,z6e=Km;tr({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=H6e.f(this),r=z6e(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}});var xk=Ur(B6e),Yte=qm.f("asyncIterator"),G6e=Ur(Yte);function ny(e){var t,r;function n(o,a){try{var s=e[o](a),l=s.value,c=l instanceof GL;xk.resolve(c?l.v:l).then(function(u){if(c){var h=o==="return"?"return":"next";if(!l.k||u.done)return n(h,u);u=e[h](u).value}i(s.done?"return":"normal",u)},function(u){n("throw",u)})}catch(u){i("throw",u)}}function i(o,a){switch(o){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(o,a){return new xk(function(s,l){var c={key:o,arg:a,resolve:s,reject:l,next:null};r?r=r.next=c:(t=r=c,n(o,a))})},typeof e.return!="function"&&(this.return=void 0)}function qs(e){return function(){return new ny(e.apply(this,arguments))}}ny.prototype[typeof sp=="function"&&G6e||"@@asyncIterator"]=function(){return this},ny.prototype.next=function(e){return this._invoke("next",e)},ny.prototype.throw=function(e){return this._invoke("throw",e)},ny.prototype.return=function(e){return this._invoke("return",e)};var R$=Ur(nl.Object.getOwnPropertySymbols),W6e=tr,K6e=z2.indexOf,q6e=KT,Rk=Rv([].indexOf),I$=!!Rk&&1/Rk([1],1,-0)<0;W6e({target:"Array",proto:!0,forced:I$||!q6e("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return I$?Rk(this,e,t)||0:K6e(this,e,t)}});var Y6e=Rs("Array").indexOf,X6e=Gi,J6e=Y6e,ZI=Array.prototype,Q6e=function(e){var t=e.indexOf;return e===ZI||X6e(ZI,e)&&t===ZI.indexOf?J6e:t},N$=Ur(Q6e);function Z6e(e,t){if(e==null)return{};var r,n,i=function(a,s){if(a==null)return{};var l,c,u={},h=Jee(a);for(c=0;c<h.length;c++)l=h[c],N$(s).call(s,l)>=0||(u[l]=a[l]);return u}(e,t);if(R$){var o=R$(e);for(n=0;n<o.length;n++)r=o[n],N$(t).call(t,r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ds(e){if(Array.isArray(e))return e.map(r=>r);if(!A$(e))return e;let t={};for(let r in e){let n=e[r];A$(n)||Array.isArray(n)?t[r]=ds(n):t[r]=n}return t}function A$(e){return!(typeof e!="object"||Array.isArray(e)||!e)}var eN=class{constructor(e){R(this,"input",[]),R(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}},Vl={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},Hv={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:Vl,remoteCandidate:Vl}},Xte={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0},Jte={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},Qte={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},Zte={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function O$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function k$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O$(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var WL=class{constructor(e,t){R(this,"onFirstVideoReceived",void 0),R(this,"onFirstVideoDecoded",void 0),R(this,"onFirstAudioReceived",void 0),R(this,"onFirstVideoDecodedTimeout",void 0),R(this,"onFirstAudioDecoded",void 0),R(this,"onSelectedLocalCandidateChanged",void 0),R(this,"onSelectedRemoteCandidateChanged",void 0),R(this,"videoIsReady",!1),R(this,"videoIsReady2",{}),R(this,"pc",void 0),R(this,"options",void 0),R(this,"intervalTimer",void 0),R(this,"stats",ds(Hv)),R(this,"isFirstVideoReceived",{}),R(this,"isFirstVideoDecoded",{}),R(this,"isFirstAudioReceived",{}),R(this,"isFirstAudioDecoded",{}),R(this,"isFirstVideoDecodedTimeout",{}),R(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new fe(e=>{e({local:k$({},Vl),remote:k$({},Vl)})})}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);let t=this.lossRateWindowStats.length,r=["videoSend","audioSend","videoRecv","audioRecv"],n=0,i=0,o=0,a=0;for(let s of r)e[s].forEach((l,c)=>{if(!this.lossRateWindowStats[t-1][s][c]||!this.lossRateWindowStats[0][s][c])return;let u=this.lossRateWindowStats[t-1][s][c].packets-this.lossRateWindowStats[0][s][c].packets,h=this.lossRateWindowStats[t-1][s][c].packetsLost-this.lossRateWindowStats[0][s][c].packetsLost;s==="videoSend"||s==="audioSend"?(n+=u,o+=h):(i+=u,a+=h),Number.isNaN(u)||Number.isNaN(u)?l.packetLostRate=0:l.packetLostRate=u<=0||h<=0?0:h/(u+h)});e.sendPacketLossRate=n<=0||o<=0?0:o/(n+o),e.recvPacketLossRate=i<=0||a<=0?0:a/(i+a)}};function P$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function e8e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P$(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var t8e=class extends WL{constructor(){super(...arguments),R(this,"_stats",Hv),R(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){let e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=ds(Hv);let r=t.filter(i=>i.type==="ssrc");this.processSSRCStats(r);let n=t.find(i=>i.type==="VideoBwe");n&&this.processBandwidthStats(n),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach(t=>{var r;let n=ge(r=t.id).call(r,"send");switch("".concat(t.mediaType,"_").concat(n?"send":"recv")){case"video_send":{let i=ds(Jte);i.codec=t.googCodecName,i.adaptionChangeReason="none",t.googCpuLimitedResolution&&(i.adaptionChangeReason="cpu"),t.googBandwidthLimitedResolution&&(i.adaptionChangeReason="bandwidth"),i.avgEncodeMs=Number(t.googAvgEncodeMs),i.inputFrame={width:Number(t.googFrameWidthInput)||Number(t.googFrameWidthSent),height:Number(t.googFrameHeightInput)||Number(t.googFrameHeightSent),frameRate:Number(t.googFrameRateInput)},i.sentFrame={width:Number(t.googFrameWidthSent),height:Number(t.googFrameHeightSent),frameRate:Number(t.googFrameRateInput)},i.firsCount=Number(t.googFirReceived),i.nacksCount=Number(t.googNacksReceived),i.plisCount=Number(t.googPlisReceived),i.frameCount=Number(t.framesEncoded),i.bytes=Number(t.bytesSent),i.packets=Number(t.packetsSent),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.rttMs=Number(t.googRtt||0),this._stats.videoSend.push(i),this._stats.rtt=i.rttMs;break}case"video_recv":{let i=ds(Xte),o=this.lastDecodeVideoReceiverStats.get(Number(t.ssrc));if(i.codec=t.googCodecName,i.targetDelayMs=Number(t.googTargetDelayMs),i.renderDelayMs=Number(t.googRenderDelayMs),i.currentDelayMs=Number(t.googCurrentDelayMs),i.minPlayoutDelayMs=Number(t.googMinPlayoutDelayMs),i.decodeMs=Number(t.googDecodeMs),i.maxDecodeMs=Number(t.googMaxDecodeMs),i.receivedFrame={width:Number(t.googFrameWidthReceived),height:Number(t.googFrameHeightReceived),frameRate:Number(t.googFrameRateReceived)},i.decodedFrame={width:Number(t.googFrameWidthReceived),height:Number(t.googFrameHeightReceived),frameRate:Number(t.googFrameRateDecoded)},i.decodeFrameRate=Number(t.googFrameRateDecoded),i.outputFrame={width:Number(t.googFrameWidthReceived),height:Number(t.googFrameHeightReceived),frameRate:Number(t.googFrameRateOutput)},i.jitterBufferMs=Number(t.googJitterBufferMs),i.firsCount=Number(t.googFirsSent),i.nacksCount=Number(t.googNacksSent),i.plisCount=Number(t.googPlisSent),i.framesDecodeCount=Number(t.framesDecoded),i.bytes=Number(t.bytesReceived),i.packets=Number(t.packetsReceived),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.packets>0&&!this.isFirstVideoReceived[i.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(i.ssrc),this.isFirstVideoReceived[i.ssrc]=!0),i.framesDecodeCount>0&&!this.isFirstVideoDecoded[i.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(i.ssrc,i.decodedFrame.width,i.decodedFrame.height),this.isFirstVideoDecoded[i.ssrc]=!0),o){let a=o.stats,s=Date.now()-o.lts;i.framesDecodeFreezeTime=a.framesDecodeFreezeTime,i.framesDecodeInterval=a.framesDecodeInterval,i.framesDecodeCount>a.framesDecodeCount&&this.isFirstVideoDecoded[i.ssrc]?(o.lts=Date.now(),i.framesDecodeInterval=s,i.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(t.ssrc,10))?i.framesDecodeFreezeTime+=i.framesDecodeInterval:this.setVideoIsReady2(parseInt(t.ssrc,10),!0))):i.framesDecodeCount<o.stats.framesDecodeCount&&(i.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(i.ssrc,{stats:e8e({},i),lts:Date.now()}),this._stats.videoRecv.push(i);break}case"audio_recv":{let i=ds(Zte);i.codec=t.googCodecName,i.outputLevel=Math.abs(Number(t.audioOutputLevel))/32767,i.decodingCNG=Number(t.googDecodingCNG),i.decodingCTN=Number(t.googDecodingCTN),i.decodingCTSG=Number(t.googDecodingCTSG),i.decodingNormal=Number(t.googDecodingNormal),i.decodingPLC=Number(t.googDecodingPLC),i.decodingPLCCNG=Number(t.googDecodingPLCCNG),i.expandRate=Number(t.googExpandRate),i.accelerateRate=Number(t.googAccelerateRate),i.preemptiveExpandRate=Number(t.googPreemptiveExpandRate),i.secondaryDecodedRate=Number(t.googSecondaryDecodedRate),i.speechExpandRate=Number(t.googSpeechExpandRate),i.preferredJitterBufferMs=Number(t.googPreferredJitterBufferMs),i.jitterBufferMs=Number(t.googJitterBufferMs),i.jitterMs=Number(t.googJitterReceived),i.bytes=Number(t.bytesReceived),i.packets=Number(t.packetsReceived),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.receivedFrames=Number(t.googDecodingCTN)||Number(t.packetsReceived),i.droppedFrames=Number(t.googDecodingPLC)+Number(t.googDecodingPLCCNG)||Number(t.packetsLost),i.receivedFrames>0&&!this.isFirstAudioReceived[i.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(i.ssrc),this.isFirstAudioReceived[i.ssrc]=!0),i.decodingNormal>0&&!this.isFirstAudioDecoded[i.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(i.ssrc),this.isFirstAudioDecoded[i.ssrc]=!0),this._stats.audioRecv.push(i);break}case"audio_send":{let i=ds(Qte);i.codec=t.googCodecName,i.inputLevel=Math.abs(Number(t.audioInputLevel))/32767,i.aecReturnLoss=Number(t.googEchoCancellationReturnLoss||0),i.aecReturnLossEnhancement=Number(t.googEchoCancellationReturnLossEnhancement||0),i.residualEchoLikelihood=Number(t.googResidualEchoLikelihood||0),i.residualEchoLikelihoodRecentMax=Number(t.googResidualEchoLikelihoodRecentMax||0),i.bytes=Number(t.bytesSent),i.packets=Number(t.packetsSent),i.packetsLost=Number(t.packetsLost),i.ssrc=Number(t.ssrc),i.rttMs=Number(t.googRtt||0),this._stats.rtt=i.rttMs,this._stats.audioSend.push(i);break}}})}_getStats(){return new fe((e,t)=>{this.pc.getStats(e,t)})}statsResponsesToObjects(e){let t=[];return e.result().forEach(r=>{let n={id:r.id,timestamp:r.timestamp.valueOf().toString(),type:r.type};r.names().forEach(i=>{n[i]=r.stat(i)}),t.push(n)}),t}};function D$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Td(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D$(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var L$=class extends WL{constructor(){super(...arguments),R(this,"_stats",Hv),R(this,"report",void 0),R(this,"lastDecodeVideoReceiverStats",new Map),R(this,"lastVideoFramesRecv",new Map),R(this,"lastVideoFramesSent",new Map),R(this,"lastVideoFramesDecode",new Map),R(this,"lastVideoFramesOutput",new Map),R(this,"lastVideoJBDelay",new Map),R(this,"lastAudioJBDelay",new Map),R(this,"mediaBytesSent",new Map),R(this,"mediaBytesRetransmit",new Map),R(this,"mediaBytesTargetEncode",new Map),R(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=ds(Hv),this.report.forEach(e=>{switch(e.type){case Lo.OUTBOUND:case Lo.INBOUND:{let t=e.mediaType||e.kind,r=!t&&"frameWidth"in e,n=!t&&!("frameWidth"in e);e.type===Lo.OUTBOUND?t==="audio"||n?this.processAudioOutboundStats(e):(t==="video"||r)&&this.processVideoOutboundStats(e):e.type===Lo.INBOUND&&(t==="audio"||n?this.processAudioInboundStats(e):(t==="video"||r)&&this.processVideoInboundStats(e));break}case Lo.TRANSPORT:{let t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case Lo.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){let e=await this.pc.getStats(),t={local:Td({},Vl),remote:Td({},Vl)};return e.forEach(r=>{let n;if(r.type===Lo.TRANSPORT&&(n=e.get(r.selectedCandidatePairId)),r.type===Lo.CANDIDATE_PAIR&&r.selected&&(n=r),n){let i=(o,a)=>{o.type=a.type,o.id=a.id,a.address&&(o.address=a.address),a.candidateType&&(o.candidateType=a.candidateType),a.port&&(o.port=a.port),a.priority&&(o.priority=a.priority),a.protocol&&(o.protocol=a.protocol),a.relayProtocol&&(o.relayProtocol=a.relayProtocol)};if(n.localCandidateId){let o=e.get(n.localCandidateId);o&&i(t.local,o)}if(n.remoteCandidateId){let o=e.get(n.remoteCandidateId);o&&i(t.remote,o)}}}),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach(t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}),this._stats.audioSend.forEach(t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){let t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){let t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===Lo.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===Lo.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===Lo.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(Td({},t),Td({},this.stats.selectedCandidatePair.localCandidate)),e.type===Lo.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(Td({},t),Td({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find(r=>r.ssrc===e.ssrc);t||(t=ds(Zte),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.packetsDiscarded=e.packetsDiscarded,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),typeof e.concealedSamples=="number"&&(t.concealedSamples=e.concealedSamples)}processVideoInboundStats(e){let t=this._stats.videoRecv.find(a=>a.ssrc===e.ssrc);t||(t=ds(Xte),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.framesDroppedCount=e.framesDropped,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay,t.totalFreezesDuration=e.totalFreezesDuration;let r=this.lastDecodeVideoReceiverStats.get(t.ssrc),n=this.lastVideoFramesDecode.get(t.ssrc),i=this.lastVideoFramesOutput.get(t.ssrc),o=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){let a=t.decodedFrame?t.decodedFrame.width:0,s=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,a,s),this.isFirstVideoDecoded[t.ssrc]=!0}if(r){let a=r.stats,s=o-r.lts;t.framesDecodeFreezeTime=a.framesDecodeFreezeTime,t.framesDecodeInterval=a.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&s>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>a.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(r.lts=Date.now(),t.framesDecodeInterval=s,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<a.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(r.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-r.qpSum)/(e.framesDecoded-r.stats.framesDecodeCount))}n&&o-n.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-n.count)/((o-n.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:t.decodeFrameRate})):n?t.decodeFrameRate=n.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:o,rate:0}),t.framesDroppedCount&&e.framesReceived&&(i&&o-i.lts>=800?(t.outputFrameRate=Math.round((e.framesReceived-t.framesDroppedCount-i.count)/((o-i.lts)/1e3)),this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:Math.max(t.outputFrameRate,0)})):i?t.outputFrameRate=i.rate:this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:o,rate:0})),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:Td({},t),lts:r?r.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find(n=>n.ssrc===e.ssrc);t||(t=ds(Jte),this._stats.videoSend.push(t));let r=this.mediaBytesSent.get(e.ssrc);if(r)r.add(e.bytesSent);else{let n=new eN(10);n.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,n)}if(e.retransmittedBytesSent!==void 0){let n=this.mediaBytesRetransmit.get(e.ssrc);if(n)n.add(e.retransmittedBytesSent);else{let i=new eN(10);i.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,i)}}if(e.totalEncodedBytesTarget){let n=this.mediaBytesTargetEncode.get(e.ssrc);if(n)n.add(e.totalEncodedBytesTarget);else{let i=new eN(10);i.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,i)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){let n=this.lastEncoderMs.get(e.ssrc);if(!n||n.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{let i=e.framesEncoded-n.lastFrameCount,o=e.totalEncodeTime-n.lastEncoderTime;t.avgEncodeMs=1e3*o/i}}if(e.framesEncoded&&e.qpSum){let n=this.lastEncoderMs.get(e.ssrc);!n||n.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-n.lastQpSum)/(e.framesEncoded-n.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{let n=this.findRemoteStatsId(e.ssrc,Lo.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find(r=>r.ssrc===e.ssrc);if(t||(t=ds(Qte),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{let r=this.findRemoteStatsId(e.ssrc,Lo.REMOTE_INBOUND);r&&this.processRemoteInboundStats(r,t)}}findRemoteStatsId(e,t){var r;let n=Array.from(Cc(r=this.report).call(r)).find(i=>i.type===t&&i.ssrc===e);return n?n.id:null}processVideoMediaSource(e,t){let r=this.report.get(e);r&&r.width&&r.height&&r.framesPerSecond&&(t.inputFrame={width:r.width,height:r.height,frameRate:r.framesPerSecond})}processAudioMediaSource(e,t){let r=this.report.get(e);r&&(t.inputLevel=r.audioLevel)}processVideoTrackSenderStats(e,t,r){var n,i,o,a;let s=t?this.report.get(t):void 0,l=(n=s==null?void 0:s.framesSent)!==null&&n!==void 0?n:e.framesSent;if(typeof l!="number")return;let c=(i=s==null?void 0:s.frameWidth)!==null&&i!==void 0?i:e.frameWidth,u=(o=s==null?void 0:s.frameHeight)!==null&&o!==void 0?o:e.frameHeight,h=(a=s==null?void 0:s.framesPerSecond)!==null&&a!==void 0?a:e.framesPerSecond;if(typeof c=="number"&&typeof u=="number"||(c=0,u=0),h==null){let f=Date.now(),p=this.lastVideoFramesSent.get(r.ssrc);p&&f-p.lts>=800?(h=Math.round((l-p.count)/((f-p.lts)/1e3)),this.lastVideoFramesSent.set(r.ssrc,{count:l,lts:f,rate:h})):p?h=p.rate:this.lastVideoFramesSent.set(r.ssrc,{count:l,lts:f,rate:0})}r.sentFrame={width:c,height:u,frameRate:Math.max(0,h)}}processVideoTrackReceiverStats(e,t,r){var n,i,o,a,s;let l=t?this.report.get(t):void 0,c=(n=l==null?void 0:l.framesReceived)!==null&&n!==void 0?n:e.framesReceived,u=(i=l==null?void 0:l.frameWidth)!==null&&i!==void 0?i:e.frameWidth,h=(o=l==null?void 0:l.frameHeight)!==null&&o!==void 0?o:e.frameHeight,f=(a=l==null?void 0:l.jitterBufferDelay)!==null&&a!==void 0?a:e.jitterBufferDelay,p=(s=l==null?void 0:l.jitterBufferEmittedCount)!==null&&s!==void 0?s:e.jitterBufferEmittedCount;if(typeof c=="number"){let m=this.lastVideoFramesRecv.get(r.ssrc),g=Date.now();r.framesReceivedCount=c;let y=0;m&&g-m.lts>=800?(y=Math.round((c-m.count)/((g-m.lts)/1e3)),this.lastVideoFramesRecv.set(r.ssrc,{count:c,lts:g,rate:y})):m?y=m.rate:this.lastVideoFramesRecv.set(r.ssrc,{count:c,lts:g,rate:0}),r.receivedFrame={width:u||0,height:h||0,frameRate:y||0},r.decodedFrame={width:u||0,height:h||0,frameRate:r.decodeFrameRate||0},r.outputFrame={width:u||0,height:h||0,frameRate:r.outputFrameRate||r.decodeFrameRate||0}}if(f&&p){let m=this.lastVideoJBDelay.get(r.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0},g=m.jitterBufferMs,y=p-m.jitterBufferEmittedCount;y>0&&(g=1e3*(f-m.jitterBufferDelay)/y),r.jitterBufferMs=g,r.currentDelayMs=Math.round(g),this.lastVideoJBDelay.set(r.ssrc,{jitterBufferDelay:f,jitterBufferEmittedCount:p,jitterBufferMs:r.currentDelayMs})}}processAudioTrackSenderStats(e,t,r){var n,i,o,a;let s=t?this.report.get(t):void 0,l=(n=(i=s==null?void 0:s.echoReturnLoss)!==null&&i!==void 0?i:e.echoReturnLoss)!==null&&n!==void 0?n:0,c=(o=(a=s==null?void 0:s.echoReturnLossEnhancement)!==null&&a!==void 0?a:e.echoReturnLossEnhancement)!==null&&o!==void 0?o:0;r.aecReturnLoss=l,r.aecReturnLossEnhancement=c}processAudioTrackReceiverStats(e,t,r){var n,i,o,a,s,l,c;let u=t?this.report.get(t):void 0,h=(n=u==null?void 0:u.removedSamplesForAcceleration)!==null&&n!==void 0?n:e.removedSamplesForAcceleration,f=(i=u==null?void 0:u.totalSamplesReceived)!==null&&i!==void 0?i:e.totalSamplesReceived,p=(o=u==null?void 0:u.jitterBufferDelay)!==null&&o!==void 0?o:e.jitterBufferDelay,m=(a=u==null?void 0:u.jitterBufferEmittedCount)!==null&&a!==void 0?a:e.jitterBufferEmittedCount,g=(s=u==null?void 0:u.audioLevel)!==null&&s!==void 0?s:e==null?void 0:e.audioLevel,y=(l=u==null?void 0:u.totalSamplesDuration)!==null&&l!==void 0?l:e==null?void 0:e.totalSamplesDuration,v=(c=u==null?void 0:u.concealedSamples)!==null&&c!==void 0?c:e.concealedSamples;if(h&&f&&(r.accelerateRate=h/f),p&&m){let _=this.lastAudioJBDelay.get(r.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0},S=_.jitterBufferMs,I=m-_.jitterBufferEmittedCount;I>0&&(S=1e3*(p-_.jitterBufferDelay)/I),r.jitterBufferMs=Math.round(S),this.lastAudioJBDelay.set(r.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:m,jitterBufferMs:r.jitterBufferMs})}r.outputLevel=g;let b=1920;y&&f&&(b=f/y/50,r.receivedFrames=Math.round(f/b)),v&&(r.droppedFrames=Math.round(v/b))}processRemoteInboundStats(e,t){let r=this.report.get(e);r&&(t.packetsLost=r.packetsLost,r.roundTripTime&&(t.rttMs=1e3*r.roundTripTime),r.jitter&&(t.jitterMs=1e3*r.jitter),r.timestamp&&(t.timestamp=r.timestamp))}getCodecFromCodecStats(e){let t=this.report.get(e);if(!t)return"";let r=t.mimeType.match(/\/(.*)$/);return r&&r[1]?r[1]:""}updateSendBitrate(){let e=0,t=null,r=null;this.mediaBytesSent.forEach(i=>{e+=i.diffMean()}),this.mediaBytesRetransmit.forEach(i=>{t=t===null?i.diffMean():t+i.diffMean()}),this.mediaBytesTargetEncode.forEach(i=>{r=r===null?i.diffMean():r+i.diffMean()});let n=t!==null?e-t:e;this._stats.bitrate={actualEncoded:8*n/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},t!==null&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),r!==null&&(this._stats.bitrate.targetEncoded=8*r/(this.options.updateInterval/1e3))}},r8e=class extends WL{updateStats(){return fe.resolve()}};function KL(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4,o=function(){let a=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return a&&a[0]?Number(a[0].split("/")[1]):null}();return o?o<76?new t8e(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i}):new L$(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i}):function(a){if(!window.RTCStatsReport)return!1;let s=a.getStats();return!!(s instanceof fe||function(l){return!!l&&(typeof l=="object"||typeof l=="function")&&typeof l.then=="function"}(s))}(e)?new L$(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i}):new r8e(e,{updateInterval:t,lossRateInterval:r,freezeRateLimit:n,firstVideoDecodedTimeout:i})}var M$=class{get localCapabilities(){return Br(this._localCapabilities)}get rtpCapabilities(){return Br(this._rtpCapabilities)}get candidates(){return Br(this._candidates)}get iceParameters(){return Br(this._iceParameters)}get dtlsParameters(){return Br(this._dtlsParameters)}constructor(e){R(this,"sessionDesc",void 0),R(this,"_localCapabilities",void 0),R(this,"_rtpCapabilities",void 0),R(this,"_candidates",void 0),R(this,"_iceParameters",void 0),R(this,"_dtlsParameters",void 0),R(this,"setup",void 0),R(this,"currentMidIndex",void 0),R(this,"cname","o/i14u9pJrxRKAsu"),R(this,"firefoxSsrcMidMap",new Map),e=Br(e);let{remoteIceParameters:t,remoteDtlsParameters:r,candidates:n,remoteRTPCapabilities:i,localCapabilities:o,direction:a,setup:s,videoCodec:l,audioCodec:c}=e,u;this.setup=s,u=a===Ui.RECEIVE_ONLY?Ln.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`):Ln.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`),this._rtpCapabilities=i,this._candidates=n,this._iceParameters=t,this._dtlsParameters=r,this._localCapabilities=o;let h=a===Ui.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,f=a===Ui.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,p=a===Ui.RECEIVE_ONLY?i.send.videoCodecs:Ly(xe.VIDEO,h,f,l),m=a===Ui.RECEIVE_ONLY?i.send.audioCodecs:Ly(xe.AUDIO,h,f,c);for(let g of u.mediaDescriptions)g.attributes.iceUfrag=t.iceUfrag,g.attributes.icePwd=t.icePwd,g.attributes.fingerprints=r.fingerprints,g.attributes.candidates=n,g.attributes.setup=this.setup,g.media.mediaType==="application"&&(g.attributes.sctpPort="5000"),g.media.mediaType==="video"&&(g.media.fmts=p.map(y=>y.payloadType.toString(10)),g.attributes.payloads=p,g.attributes.extmaps=h.videoExtensions),g.media.mediaType==="audio"&&(g.media.fmts=m.map(y=>y.payloadType.toString(10)),g.attributes.payloads=m,g.attributes.extmaps=h.audioExtensions,fm(g));this.sessionDesc=u,this.currentMidIndex=u.mediaDescriptions.length-1}toString(){return Ln.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every(t=>this.hasMid(t)):this.sessionDesc.mediaDescriptions.some(t=>t.attributes.mid===e)}send(e,t,r,n,i){r=r.replace(/ /g,"-");let{ssrcs:o,ssrcGroups:a}=Vd(t,this.cname,L("SYNC_GROUP")?r:void 0),s=this.findPreloadMediaDesc(o);if(s){if(Ir()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,s.attributes.mid),i&&(i.twcc||i.remb)){let l=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[l]=this.mungSendMediaDesc(s,i),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{let l=this.findAvailableMediaIndex(e,o,n),c;return l===-1?(c=this.createOrRecycleSendMedia(e,o,a,"sendonly",n,i),this.updateBundleMids()):(c=Br(this.sessionDesc.mediaDescriptions[l]),c.attributes.direction="sendonly",c.attributes.ssrcs=o,c.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[l]=this.mungSendMediaDesc(c,i)),Ir()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,c.attributes.mid),{needExchangeSDP:!0,mid:c.attributes.mid}}}stopSending(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>r.attributes.mid&&e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach(r=>{r.attributes.ssrcs=[]}),this.updateBundleMids()}receive(e,t,r){let n=[];return e.forEach(i=>{let o=i._mediaStreamTrack.kind,a=this.findAvailableRecvMediaIndex(o),s,l=!1;a===-1?(l=!0,s=this.createOrRecycleRecvMedia(i,[],"recvonly",t,r),this.updateBundleMids()):(s=Br(this.sessionDesc.mediaDescriptions[a]),s.attributes.direction="recvonly"),n.push({mid:s.attributes.mid,needCreateTransceiver:l})}),n}stopReceiving(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach(r=>{r.media.port="0",r.attributes.direction="inactive"}),this.updateBundleMids()}addRemoteCandidate(e){let{foundation:t,protocol:r,address:n,port:i,type:o,relatedAddress:a,relatedPort:s,priority:l}=new RTCIceCandidate(e),c={foundation:t??"",componentId:"1",transport:r??"",priority:l?l+"":"",connectionAddress:n??"",port:i?i+"":"",type:o?o+"":"",relAddr:a??"",relPort:s?s+"":"",extension:{}};this.candidates.some(u=>u.priority===c.priority&&u.connectionAddress===c.connectionAddress&&u.port===c.port)||(this._candidates.push(c),this.sessionDesc.mediaDescriptions.forEach(u=>{u.attributes.candidates=this.candidates}))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,r,n,i){let o=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,s=Ly(o,a,this.localCapabilities.send,o===xe.AUDIO?i:n),l=o===xe.VIDEO?a.videoExtensions:a.audioExtensions,c="".concat(++this.currentMidIndex),u={media:{mediaType:o,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(f=>f.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};u=this.mungRecvMediaDsec(u,e);let h=this.findFirstClosedMedia(o);if(h){let f=this.sessionDesc.mediaDescriptions.indexOf(h);this.sessionDesc.mediaDescriptions[f]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}muteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>ge(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="inactive"})}unmuteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>ge(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="recvonly"})}findAvailableMediaIndex(e,t,r){return this.sessionDesc.mediaDescriptions.findIndex(n=>{let i=n.media.mediaType===e&&n.media.port!=="0"&&(n.attributes.direction==="sendonly"||n.attributes.direction==="sendrecv")&&n.attributes.ssrcs.length===0;if(Ir()){if(i){let o=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(o||n.attributes.mid!=="0"&&n.attributes.mid!=="1")||!(!o||o!==n.attributes.mid)}return!1}return i&&n.attributes.mid===r})}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex(t=>{let r=t.media.mediaType===e&&t.media.port!=="0"&&(t.attributes.direction==="recvonly"||t.attributes.direction==="sendrecv");return t.attributes.mid!=="0"&&t.attributes.mid!=="1"&&r})}predictReceivingMids(e){let t=[];for(let r=0;r<e;r++)t.push((this.currentMidIndex+r+1).toString(10));return t}restartICE(e){e=Br(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd})}createOrRecycleSendMedia(e,t,r,n,i,o){let a=this.rtpCapabilities.send,s=e===xe.VIDEO?a.videoCodecs:a.audioCodecs,l=e===xe.VIDEO?a.videoExtensions:a.audioExtensions;Ir()&&(i="".concat(++this.currentMidIndex));let c={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map(h=>h.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:r,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:i}};c=this.mungSendMediaDesc(c,o);let u=this.findFirstClosedMedia(e);if(u){let h=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[h]=c}else this.sessionDesc.mediaDescriptions.push(c);return c}mungRecvMediaDsec(e,t,r){let n=Br(e);return FL(n),hm(n,t),VL(n,t),Vte(n),hS(n,r,this.localCapabilities.send),n}mungSendMediaDesc(e,t){let r=Br(e);return hS(r,t,this.localCapabilities.recv),fm(r),r}updateRecvMedia(e,t){let r=this.sessionDesc.mediaDescriptions.findIndex(n=>n.attributes.mid===e);if(r!==-1){let n=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],t);this.sessionDesc.mediaDescriptions[r]=n}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>e.media.port!=="0").map(e=>e.attributes.mid)}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(t=>{var r;return((r=t.attributes)===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId)===e[0].ssrcId})}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(t=>Ir()?t.media.port==="0"&&t.media.mediaType===e:t.media.port==="0")}},n8e=["sdp"],nr;function j$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j$(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var U$=(nr=class Ff extends Zee{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var t,r;return(t=(r=this.peerConnection.getReceivers()[0])===null||r===void 0||(r=r.transport)===null||r===void 0?void 0:r.state)!==null&&t!==void 0?t:null}get localCodecs(){return[]}set isInRestartIce(t){this._isInRestartIce=t}get isInRestartIce(){return this._isInRestartIce}constructor(t,r,n){super(t,r),R(this,"direction",void 0),R(this,"name",void 0),R(this,"store",void 0),R(this,"spec",void 0),R(this,"peerConnection",void 0),R(this,"initialOffer",void 0),R(this,"transport",void 0),R(this,"statsFilter",void 0),R(this,"localCandidateCount",0),R(this,"_isInRestartIce",!1),R(this,"mutex",new ai("P2PConnection-mutex")),R(this,"onLocalCandidate",void 0),R(this,"remoteSDP",void 0),R(this,"pendingCandidates",[]),R(this,"localCapabilities",void 0),R(this,"isReady",!1),R(this,"restartCnt",0),R(this,"curTurnServerIndex",0),this.store=r,this.spec=t,this.peerConnection=new RTCPeerConnection(Ff.resolvePCConfiguration(t,r.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=n??Ui.SEND_ONLY,this.name=this.direction===Ui.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=KL(this.peerConnection,L("STATS_UPDATE_INTERVAL"),void 0,Ir()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(t){try{let r=await $te();if(this.localCapabilities=fS(r),t){let{sdp:n}=t,i=Z6e(t,n8e),o=function(){let u={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},h=Vv(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"sendonly"),f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},p={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},m={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(ms(h,u,"videoExtensions",f,p,m),ms(h,u,"videoCodecs",f,p,m),ms(h,u,"audioExtensions",f,p,m),ms(h,u,"audioCodecs",f,p,m),L("RAISE_H264_BASELINE_PRIORITY")){let g=m.videoCodecs.findIndex(y=>y.rtpMap&&y.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&y.fmtp&&y.fmtp.parameters["profile-level-id"]==="42001f");if(g!==-1){let y=m.videoCodecs.findIndex(v=>v.rtpMap&&v.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(y<g){w.debug("raising H264 baseline profile priority");let v=m.videoCodecs[g];m.videoCodecs.splice(g,1),m.videoCodecs.splice(y,0,v)}y!==-1&&L("FILTER_SEND_H264_BASELINE")&&(f.videoCodecs=f.videoCodecs.filter(v=>!(v.rtpMap&&v.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&v.fmtp&&v.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:f,recv:p,sendrecv:m}}({},{},n);this.remoteSDP=new M$({remoteIceParameters:i.iceParameters,remoteDtlsParameters:i.dtlsParameters,candidates:[],remoteRTPCapabilities:o,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;let a=await this.peerConnection.createAnswer();if(!a.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");let s=Iu(a.sdp);await this.peerConnection.setLocalDescription(a);let l=await m$({},{},a.sdp);this.localCapabilities=fS(l);let c=this.peerConnection.getTransceivers()[0];return c!=null&&c.receiver&&c.receiver.transport&&this.tryBindTransportEvents(c.receiver.transport),eu(eu({},s),{},{sdp:a.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});let n=await this.peerConnection.createOffer();if(!n.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let i=Iu(n.sdp);return this.initialOffer=n,eu(eu({},i),{},{sdp:n.sdp})}}catch(r){throw new J(O.GET_LOCAL_CONNECTION_PARAMS_FAILED,r.toString())}}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);let{sdp:r,iceParameters:n,dtlsParameters:i}=t,o=await m$({},{},r);this.remoteSDP=new M$({remoteIceParameters:n,remoteDtlsParameters:i,candidates:[],remoteRTPCapabilities:o,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});let a=this.peerConnection.getTransceivers()[0];a!=null&&a.sender&&a.sender.transport&&this.tryBindTransportEvents(a.sender.transport)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}}async addRemoteCandidate(t){try{t&&this.pendingCandidates.push(t),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach(r=>{this.peerConnection.addIceCandidate(r)}),this.pendingCandidates=[])}catch(r){throw new J(O.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(r.toString()))}}send(t,r,n){var i=this;return qs(function*(){let o=yield Rt(i.mutex.lock("From P2PConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let a=[],s=i.remoteSDP.receive(t,r,n);t.forEach((y,v)=>{if(s[v].needCreateTransceiver){let b=i.peerConnection.addTransceiver(y._mediaStreamTrack,{direction:"sendonly"});a.push(b),y._updateRtpTransceiver(b)}else{let b=i.peerConnection.getTransceivers().find(_=>_.mid===s[v].mid);if(!b)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(s[v].mid));a.push(b),y._updateRtpTransceiver(b)}}),Ir()&&L("SIMULCAST")===!0&&(yield Rt(i.applySimulcastForFirefox(a,t)));let l=s.map(y=>y.mid),c=yield Rt(i.peerConnection.createOffer()),u=i.mungSendOfferSDP(c.sdp,t,l),h=Ln.parse(u),f=l.map(y=>{let v=h.mediaDescriptions.find(b=>b.attributes.mid===y);if(!v)throw new Error("Cannot extract ssrc from mediaDescription.");return Ute(v,L("USE_PUB_RTX"))}),p=a.map((y,v)=>{let b=l[v];return{localSSRC:f[v],id:b}});yield Rt(i.peerConnection.setLocalDescription({type:"offer",sdp:u}));try{yield p}catch(y){let v=i.remoteSDP.toString();throw yield Rt(i.peerConnection.setLocalDescription({type:"offer",sdp:u})),yield Rt(i.peerConnection.setRemoteDescription({type:"answer",sdp:v})),yield Rt(i.stopSending(l,!0)),y}yield Rt(i.applySimulcastEncodings(a,t)),yield Rt(i.applySendEncodings(a,t));let m=i.remoteSDP.toString(),g=i.logSDPExchange(u,"offer","local","send");return g==null||g(m),yield Rt(i.setRemoteDescription({type:"answer",sdp:m})),a.map((y,v)=>{let b=l[v];return{localSSRC:f[v],id:b}})}catch(a){throw a instanceof J?a:new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(a.toString()))}finally{o()}})()}async stopSending(t,r){let n=r?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let i=this.peerConnection.getTransceivers().filter(l=>t.indexOf(l.mid)!==-1);if(i.length!==t.length)throw new Error("Transceivers' length (".concat(i.length,") doesn't match mids' length (").concat(t.length,") when trying to call P2PConnection.stopSending."));i.map(l=>{var c;l.direction="inactive",(c=l.stop)===null||c===void 0||c.call(l)});let o=await this.peerConnection.createOffer(),a=this.logSDPExchange(o.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(o),this.remoteSDP.stopReceiving(t);let s=this.remoteSDP.toString();a==null||a(s),await this.setRemoteDescription({type:"answer",sdp:s})}catch(i){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}finally{n&&n()}}async receive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{mid:o,needExchangeSDP:a}=this.remoteSDP.send(t,r,n,i);if(a){let l=this.remoteSDP.toString(),c=this.logSDPExchange(l,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:l});let u=await this.peerConnection.createAnswer(),h=this.mungReceiveAnswerSDP(u.sdp,o,t);c==null||c(h||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:h}),w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP."))}else w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," no need to exchange SDP."));let s=this.peerConnection.getTransceivers().find(l=>l.mid===o);if(!s||s.mid===null)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,mid:s.mid,transceiver:s}}catch(o){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async mockReceive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{mid:o,needExchangeSDP:a}=this.remoteSDP.send(t,r,n,i);if(a){let s=this.remoteSDP.toString(),l=this.logSDPExchange(s,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:s});let c=await this.peerConnection.createAnswer(),u=this.mungReceiveAnswerSDP(c.sdp,o,t);l==null||l(u||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:u}),w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP."))}else w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," no need to exchange SDP."))}catch(o){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===Dd.Auto&&(this.store.p2pTransport=Dd.SdRtn,Ct().supportPCSetConfiguration&&this.peerConnection.setConfiguration(Ff.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,Ct().supportPCSetConfiguration&&this.peerConnection.setConfiguration(Ff.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;let r=await this.peerConnection.createOffer({iceRestart:!0});if(!r.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let{iceParameters:n}=Iu(r.sdp);return this.store.descriptionStart(),this.direction===Ui.SEND_ONLY&&await this.peerConnection.setLocalDescription(r),n}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===Ui.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});let r=await this.peerConnection.createAnswer();if(!r.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");let{iceParameters:n}=Iu(r.sdp);return await this.peerConnection.setLocalDescription(r),n}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}close(){var t;this.peerConnection.close(),this.peerConnection.onicecandidate=null,(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[r],[t]);this.remoteSDP.updateRecvMedia(t,r);let o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),a==null||a(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new J(O.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(t,r){let n=this.peerConnection.getTransceivers().filter(i=>i.mid===t);n.length===1&&(this.isVP8Simulcast(r)?Ir()||await this.applySimulcastEncodings(n,[r]):await this.applySendEncodings(n,[r]))}setStatsRemoteVideoIsReady(t,r){this.statsFilter.setVideoIsReady2(t,r)}async replaceTrack(t,r){let n=this.peerConnection.getTransceivers().find(i=>i.mid===r);n&&await n.sender.replaceTrack(t._mediaStreamTrack)}async getSelectedCandidatePair(){let t=this.peerConnection.getReceivers();if(t.length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair()){let r=t[0].transport.iceTransport,{local:n,remote:i}=r.getSelectedCandidatePair();return{local:eu(eu({},Vl),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:eu(eu({},Vl),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t,r;ge(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)&&(this.isReady=!1),(r=this.onICEConnectionStateChange)===null||r===void 0||r.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;this.peerConnection.connectionState==="connected"&&(this.restartCnt=0),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=t=>{if(t.candidate){var r;t.candidate.candidate&&((r=this.onLocalCandidate)===null||r===void 0||r.call(this,t.candidate.toJSON())),this.localCandidateCount+=1}else w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i={iceServers:[]};var o;return t.iceServers?i.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(cC(t.turnServer.servers)?i.iceServers=t.turnServer.servers:(i.iceServers&&i.iceServers.push(...Ff.turnServerConfigToIceServers(t.turnServer.servers,r,n)),L("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&t.turnServer.serversFromGateway&&i.iceServers.push(...Ff.turnServerConfigToIceServers(t.turnServer.serversFromGateway,r,n)),ge(o=[Dd.Relay,Dd.SdRtn]).call(o,r)&&(i.iceTransportPolicy="relay"),L("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(a=>{a.forceturn&&(i.iceTransportPolicy="relay")}))),L("ENABLE_ENCODED_TRANSFORM")&&Ct().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),w.debug("P2PConnection p2pTransport is ".concat(r)),i}static turnServerConfigToIceServers(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=[],o=t.filter(s=>s.tcpport);w.debug("P2PConnection turnServers is ".concat(o,", current index is ").concat(n));let a=o.length>n?o[n]:o[0];switch(r){case Dd.SdRtn:let s=t.filter(c=>{var u;return ge(u=c.username).call(u,"glb:")&&c.turnServerURL==c.turnServerURL}),l=s.length>n?s[n]:s[0];l&&(i.push({username:l.username,credential:l.password,credentialType:"password",urls:"turn:".concat(hp(l.turnServerURL),":").concat(l.tcpport,"?transport=udp")}),i.push({username:l.username,credential:l.password,credentialType:"password",urls:"turns:".concat(hp(l.turnServerURL),":").concat(l.tcpport,"?transport=tcp")}));break;case Dd.Relay:a&&(i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=udp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(hp(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}));break;default:a&&(i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turn:".concat(a.turnServerURL,":").concat(a.tcpport,"?transport=udp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"turns:".concat(hp(a.turnServerURL),":").concat(a.tcpport,"?transport=tcp")}),i.push({username:a.username,credential:a.password,credentialType:"password",urls:"stun:".concat(a.turnServerURL,":").concat(a.tcpport)}))}return i}tryBindTransportEvents(t){if(t){this.transport=t,t.onstatechange=()=>{var n;t!=null&&t.state&&((n=this.onDTLSTransportStateChange)===null||n===void 0||n.call(this,t.state))},t.onerror=n=>{var i;(i=this.onDTLSTransportError)===null||i===void 0||i.call(this,"error"in n?n.error:n)};let r=t.iceTransport;r&&(r.onstatechange=()=>{let n=t==null?void 0:t.iceTransport.state;var i;n&&((i=this.onICETransportStateChange)===null||i===void 0||i.call(this,n))},r.getSelectedCandidatePair&&(r.onselectedcandidatepairchange=()=>{if(r.getSelectedCandidatePair()){let{local:n,remote:i}=r.getSelectedCandidatePair();w.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol}),", remote ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(t,r){var n;if(r||(r=this.peerConnection.getSenders().find(u=>u.track===t._mediaStreamTrack)),!r)return w.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(t))return w.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!Ct().supportSetRtpSenderParameters)return w.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");let i={},o={};switch(t._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(t._encoderConfig){var a;let{bitrateMax:u,frameRate:h,scaleResolutionDownBy:f}=t._encoderConfig;u&&(o.maxBitrate=1e3*u),ge(a=t._hints).call(a,cr.LOW_STREAM)&&(h&&(o.maxFramerate=No(h)),f&&f>=1&&(o.scaleResolutionDownBy=f))}if(L("DSCP_TYPE")&&ed()){var s;let u=L("DSCP_TYPE");ge(s=["very-low","low","medium","high"]).call(s,u)&&(o.networkPriority=u)}let l=r.getParameters(),c=(n=l.encodings)===null||n===void 0?void 0:n[0];Ir()&&!c&&(i.encodings=[o]),c&&Object.assign(c,o),Object.assign(l,i),w.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(l.encodings))),await r.setParameters(l)}async applySendEncodings(t,r){try{if(!Ct().supportSetRtpSenderParameters||t.length!==r.length)return;for(let n=0;n<t.length;n++){let i=t[n],o=r[n];o instanceof ir&&!this.isVP8Simulcast(o)&&await this.updateRtpSenderEncodings(o,i.sender)}}catch{w.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,r,n){let i=Ln.parse(t);return r.forEach((o,a)=>{let s=n[a],l=i.mediaDescriptions.find(c=>c.attributes.mid===s);l&&(hm(l,o),Bte(l,o,this.store.codec))}),Ln.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var r;(r=this.onFirstAudioReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var r;(r=this.onFirstVideoReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var r;(r=this.onFirstAudioDecoded)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,r,n)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,r,n)},this.statsFilter.onSelectedLocalCandidateChanged=(t,r)=>{var n;(n=this.onSelectedLocalCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,r)=>{var n;(n=this.onSelectedRemoteCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onFirstVideoDecodedTimeout=t=>{var r;(r=this.onFirstVideoDecodedTimeout)===null||r===void 0||r.call(this,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(t,r){if(t.length===r.length)for(let l=0;l<t.length;l++){var n,i,o,a,s;let c=t[l],u=r[l];if(u instanceof ir&&!ge(n=u._hints).call(n,cr.LOW_STREAM)&&(i=u._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((o=u._encoderConfig)===null||o===void 0?void 0:o.bitrateMax)>200&&(a=u._scalabilityMode)!==null&&a!==void 0&&a.numSpatialLayers&&((s=u._scalabilityMode)===null||s===void 0?void 0:s.numSpatialLayers)>1&&this.store.codec==="vp8"){let h={},f={high:1e3*(u._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{rid:"m",active:!0,maxBitrate:f.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:f.high}];let p=c.sender.getParameters();await c.sender.setParameters(Object.assign(p,h))}}}async applySimulcastEncodings(t,r){if(!Ir()&&t.length===r.length)for(let n=0;n<t.length;n++){let i=r[n];if(i instanceof ir&&this.isVP8Simulcast(i)){let o=t[n],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];let l=o.sender.getParameters();await o.sender.setParameters(Object.assign(l,a))}}}isVP8Simulcast(t){var r,n,i,o,a;return!!(t instanceof ir&&L("SIMULCAST")&&this.store.codec==="vp8"&&!ge(r=t._hints).call(r,cr.LOW_STREAM)&&(n=t._encoderConfig)!==null&&n!==void 0&&n.bitrateMax&&((i=t._encoderConfig)===null||i===void 0?void 0:i.bitrateMax)>200&&(o=t._scalabilityMode)!==null&&o!==void 0&&o.numSpatialLayers&&((a=t._scalabilityMode)===null||a===void 0?void 0:a.numSpatialLayers)>1)}logSDPExchange(t,r,n,i){if(L("SDP_LOGGING"))return w.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(r," SDP during P2PConnection.").concat(i,`
`),t),r==="offer"?o=>{this.logSDPExchange(o,"answer",n==="local"?"remote":"local",i)}:void 0}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(a=>{a.direction="inactive"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(t);let o=this.remoteSDP.toString();i==null||i(o),await this.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(r.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(async a=>{a.direction="sendonly"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(t);let o=this.remoteSDP.toString();i==null||i(o),await this.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(r.toString()))}}async getRemoteSSRC(t,r){var n,i;if(r=(n=r)!==null&&n!==void 0?n:(i=this.currentRemoteDescription)===null||i===void 0?void 0:i.sdp){var o;let a=(o=Ln.parse(r).mediaDescriptions.find(s=>s.attributes.mid===t))===null||o===void 0?void 0:o.attributes.ssrcs;return a==null?void 0:a[0].ssrcId}}async setRemoteDescription(t){var r;await this.peerConnection.setRemoteDescription(t),ge(r=["connected","completed"]).call(r,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(t,r,n){let i=Ln.parse(t),o=i.mediaDescriptions.find(a=>a.attributes.mid===r);return o&&n===xe.AUDIO&&o.media.mediaType==="audio"&&fm(o),Ln.print(i)}},we(nr.prototype,"establish",[ts],Object.getOwnPropertyDescriptor(nr.prototype,"establish"),nr.prototype),we(nr.prototype,"connect",[ts],Object.getOwnPropertyDescriptor(nr.prototype,"connect"),nr.prototype),we(nr.prototype,"receive",[ts],Object.getOwnPropertyDescriptor(nr.prototype,"receive"),nr.prototype),we(nr.prototype,"mockReceive",[ts],Object.getOwnPropertyDescriptor(nr.prototype,"mockReceive"),nr.prototype),we(nr.prototype,"stopReceiving",[ts],Object.getOwnPropertyDescriptor(nr.prototype,"stopReceiving"),nr.prototype),we(nr.prototype,"restartICE",[ts],Object.getOwnPropertyDescriptor(nr.prototype,"restartICE"),nr.prototype),we(nr.prototype,"close",[ts],Object.getOwnPropertyDescriptor(nr.prototype,"close"),nr.prototype),we(nr.prototype,"updateEncoderConfig",[ts],Object.getOwnPropertyDescriptor(nr.prototype,"updateEncoderConfig"),nr.prototype),we(nr.prototype,"updateSendParameters",[ts],Object.getOwnPropertyDescriptor(nr.prototype,"updateSendParameters"),nr.prototype),we(nr.prototype,"replaceTrack",[ts],Object.getOwnPropertyDescriptor(nr.prototype,"replaceTrack"),nr.prototype),we(nr.prototype,"muteLocal",[ts],Object.getOwnPropertyDescriptor(nr.prototype,"muteLocal"),nr.prototype),we(nr.prototype,"unmuteLocal",[ts],Object.getOwnPropertyDescriptor(nr.prototype,"unmuteLocal"),nr.prototype),nr);function ts(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,o=await i.lock("From P2PConnection.".concat(t));try{for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return await n.apply(this,s)}finally{o()}},r}function Ik(e,t){let r=document.createElement("video"),n=document.createElement("canvas");r.setAttribute("style","display:none"),n.setAttribute("style","display:none"),r.setAttribute("muted",""),r.muted=!0,r.setAttribute("autoplay",""),r.autoplay=!0,r.setAttribute("playsinline",""),n.width=No(t.width),n.height=No(t.height);let i=No(t.framerate||15);document.body.append(r),document.body.append(n);let o=e._mediaStreamTrack;r.srcObject=new MediaStream([o]),r.play();let a=n.getContext("2d");if(!a)throw new q(O.UNEXPECTED_ERROR,"can not get canvas context");let s=Ct(),l=n.captureStream(s.supportRequestFrame?0:i).getVideoTracks()[0];l.canvas||(l.canvas=n),n.startCapture=()=>{if(!r)return n.stopCapture&&n.stopCapture();if(r.paused&&r.play(),r.videoHeight>2&&r.videoWidth>2){let u=r.videoWidth,h=r.videoHeight/u,f=n.width*h;Math.abs(f-n.height)>=2&&(w.debug("adjust low stream resolution","".concat(n.width,"x").concat(n.height," -> ").concat(n.width,"x").concat(f)),n.height=f)}a.drawImage(r,0,0,n.width,n.height),l.requestFrame&&l.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,r.srcObject=new MediaStream([o]))},n.stopCapture=ML(()=>n.startCapture&&n.startCapture(),i);let c=l.stop;return l.stop=()=>{c.call(l),r&&(r.remove(),r.srcObject=null,r=null),n&&(n.width=0,n.remove(),n.stopCapture&&n.stopCapture(),n.startCapture=void 0,n.stopCapture=void 0,n=null),w.debug("clean low stream renderer")},l}var x_=function(e){return e[e.HEIGHT=2033]="HEIGHT",e[e.FRAME_RATE=2034]="FRAME_RATE",e[e.WIDTH=2035]="WIDTH",e}(x_||{}),fn=function(e){return e[e.FRAME_RATE=2002]="FRAME_RATE",e[e.WIDTH=2003]="WIDTH",e[e.HEIGHT=2004]="HEIGHT",e[e.PACKAGE_LOST=2005]="PACKAGE_LOST",e[e.AVG_ENCODE=2007]="AVG_ENCODE",e[e.NACKS=2009]="NACKS",e[e.PLIS=2010]="PLIS",e[e.FIRS=2011]="FIRS",e[e.BITRATE=2012]="BITRATE",e[e.PACKAGE_RATE=2031]="PACKAGE_RATE",e[e.ADAPTATION=2032]="ADAPTATION",e[e.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",e[e.BANDWIDTH=2061]="BANDWIDTH",e[e.RETRANSMIT=2062]="RETRANSMIT",e[e.TARGET_ENCODED=2064]="TARGET_ENCODED",e[e.TRANSMIT=2066]="TRANSMIT",e[e.FREEZE=2082]="FREEZE",e[e.DISABLED=2095]="DISABLED",e[e.PLAYER_STATUS=2128]="PLAYER_STATUS",e[e.QP_SUM=2143]="QP_SUM",e}(fn||{}),Md=function(e){return e[e.BITRATE=2069]="BITRATE",e[e.PACKAGE_LOST=2070]="PACKAGE_LOST",e[e.PACKAGE_RATE=2071]="PACKAGE_RATE",e[e.HEIGHT=2073]="HEIGHT",e[e.FRAME_RATE=2075]="FRAME_RATE",e[e.WIDTH=2077]="WIDTH",e}(Md||{}),hi=function(e){return e[e.JITTER=-1]="JITTER",e[e.PACKAGE_LOST=2014]="PACKAGE_LOST",e[e.WIDTH=2018]="WIDTH",e[e.HEIGHT=2019]="HEIGHT",e[e.FRAME_RATE=2020]="FRAME_RATE",e[e.JITTER_BUFFER=2023]="JITTER_BUFFER",e[e.CURRENT_DELAY=2024]="CURRENT_DELAY",e[e.NACKS=2026]="NACKS",e[e.PLIS=2027]="PLIS",e[e.FIRS=2028]="FIRS",e[e.BITRATE=2029]="BITRATE",e[e.PACKAGE_RATE=2078]="PACKAGE_RATE",e[e.FREEZE=2084]="FREEZE",e[e.DISABLED=2101]="DISABLED",e[e.PLAYER_STATUS=2129]="PLAYER_STATUS",e[e.QP_SUM=2144]="QP_SUM",e[e.I_FRAME_DELAY=2149]="I_FRAME_DELAY",e}(hi||{}),jd=function(e){return e[e.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",e[e.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",e[e.FRAME_RATE_OUTPUT=2155]="FRAME_RATE_OUTPUT",e[e.FREEZE_TIME=2109]="FREEZE_TIME",e[e.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER",e[e.FREEZE_DURATION=2156]="FREEZE_DURATION",e}(jd||{}),ere=function(e){return e[e.PCM_LEVEL=2104]="PCM_LEVEL",e}(ere||{}),su=function(e){return e[e.PACKAGE_LOST=-1]="PACKAGE_LOST",e[e.LEVEL=2038]="LEVEL",e[e.BITRATE=2039]="BITRATE",e[e.PACKAGE_RATE=2040]="PACKAGE_RATE",e[e.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",e[e.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",e[e.FREEZE=2081]="FREEZE",e[e.DISABLED=2096]="DISABLED",e}(su||{}),ns=function(e){return e[e.BITRATE=2044]="BITRATE",e[e.PACKAGE_LOST=2045]="PACKAGE_LOST",e[e.PACKAGE_RATE=2046]="PACKAGE_RATE",e[e.CURRENT_DELAY=2047]="CURRENT_DELAY",e[e.JITTER_BUFFER=2054]="JITTER_BUFFER",e[e.JITTER=2055]="JITTER",e[e.FREEZE=2083]="FREEZE",e[e.DISABLED=2102]="DISABLED",e[e.PCM_LEVEL=2105]="PCM_LEVEL",e[e.PLAYER_STATUS=2130]="PLAYER_STATUS",e[e.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES",e}(ns||{}),tre=function(e){return e[e.FREEZE_TIME=-1]="FREEZE_TIME",e[e.LEVEL=2043]="LEVEL",e}(tre||{}),Ea=function(e){return e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE",e}(Ea||{}),rc=1e3,Cd=3;function at(e,t,r){r!=null&&Number.isFinite(r)&&(e[t]=Math.round(Math.max(0,r)))}function F$(e){let t={[Ea.CONN_TYPE]:0,[Ea.RTT]:e.rtt};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{let r=e.selectedCandidatePair.localCandidate.relayProtocol;r==="udp"&&(t[Ea.CONN_TYPE]=1),r==="tcp"&&(t[Ea.CONN_TYPE]=3),r==="tls"&&(t[Ea.CONN_TYPE]=4);break}case"srflx":t[Ea.CONN_TYPE]=2}return t}function V$(e){let t=0;switch(e){case"none":t=0;break;case"cpu":t=1;break;case"bandwidth":t=2;break;case"other":t=3}return t}var rre=class extends _r{constructor(e){super(),R(this,"store",void 0),R(this,"uploadWRTCStatsTimer",void 0),R(this,"uploadOutboundDenoiserStatsTimer",void 0),R(this,"uploadExtStatsTimer",void 0),R(this,"uploadExtUsageStatsTimer",void 0),R(this,"uploadInboundExtStatsTimer",void 0),R(this,"requestStats",void 0),R(this,"requestTransportStats",void 0),R(this,"requestLocalMedia",void 0),R(this,"requestRemoteMedia",void 0),R(this,"requestAllTracks",void 0),R(this,"requestVideoIsReady",void 0),R(this,"requestUploadStats",void 0),R(this,"requestUpload",void 0),R(this,"uploadOutboundStarted",!1),R(this,"uploadInboundStarted",!1),R(this,"uploadTransportStarted",!1),R(this,"uploadExtensionUsageStarted",!1),R(this,"lastRecvStats",void 0),R(this,"lastSendStats",void 0),R(this,"lastFullRecvStats",void 0),R(this,"lastFullSendStats",void 0),R(this,"needUploadRenderFreezeTime",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;let t,r;if(this.uploadTransportStarted&&(t=this.requestStats(),this.store.useP2P&&(r=this.requestStats(!0))),!t&&this.uploadOutboundStarted&&(t=this.requestStats()),!r&&this.uploadInboundStarted&&(r=this.requestStats(!0)),t||r){let n={};if(this.uploadTransportStarted&&t){let i=this.getTransportStats(t,r,e);i&&(n.misc=[i])}if(this.uploadOutboundStarted&&t){let i=this.getOutboundStats(t,e?this.lastSendStats:this.lastFullSendStats,e);i&&(n.outbound=[i])}if(this.uploadInboundStarted&&r){let i=this.getInboundStats(r,e?this.lastRecvStats:this.lastFullRecvStats,e);i&&(n.inbound=i)}this.requestUploadStats(n)}this.lastRecvStats=r,this.lastSendStats=t,e||(this.lastFullRecvStats=r,this.lastFullSendStats=t)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let e=1;this.uploadWRTCStatsTimer=window.setInterval(()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(e!==Cd),++e===Cd+1&&(e=1)},rc)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,r){if(!this.requestStats)return;if(r)return e.rtt==null?void 0:{addition:{[Ea.RTT]:e.rtt,[Ea.CONN_TYPE]:void 0}};let n=F$(e);if(this.store.useP2P){if(t){let i=F$(t);n[Ea.CONN_TYPE]+=i[Ea.CONN_TYPE]<<3}n[Ea.CONN_TYPE]+=110}else n[Ea.CONN_TYPE]+=100;return{addition:n}}getOutboundStats(e,t,r){if(!this.requestUploadStats||!this.requestLocalMedia)return;let n=this.requestLocalMedia();if(!n||n.length===0)return;let i,o,a;return n.forEach(s=>{let[l,{track:c,ssrcs:u}]=s;switch(l){case oe.LocalVideoLowTrack:case oe.LocalVideoTrack:if(l===oe.LocalVideoTrack){let h=function(m,g,y,v,b){let _=g.videoSend.find(H=>H.ssrc===m);if(!_)return;let S={},{sentFrame:I,inputFrame:A}=_;if(A&&I){let H=A.frameRate,V=I.frameRate;S[fn.FREEZE]=function(G,Y){let Z=!0;return Z=!(G<=5)&&(G<=10?Y<3:G<=20?Y<4:Y<5),Z}(H,V)?1:0}if(at(S,fn.QP_SUM,_.qpSumPerFrame),b)return S;switch(I&&(at(S,fn.HEIGHT,I.height),at(S,fn.WIDTH,I.width),at(S,fn.FRAME_RATE,I.frameRate)),S[fn.DISABLED]=v._originMediaStreamTrack&&!v._originMediaStreamTrack.enabled||v._mediaStreamTrack&&!v._mediaStreamTrack.enabled?1:0,_.adaptionChangeReason){case"none":S[fn.ADAPTATION]=0;break;case"cpu":S[fn.ADAPTATION]=1;break;case"bandwidth":S[fn.ADAPTATION]=2;break;case"other":S[fn.ADAPTATION]=3}let D=0;_.adaptionChangeReason&&(D+=V$(_.adaptionChangeReason)),g.qualityLimitationReason&&(D+=V$(g.qualityLimitationReason)<<3),S[fn.ADAPTATION]=D,S[fn.PLAYER_STATUS]=zI[v._player?v._player.videoElementStatus:"uninit"],at(S,fn.NACKS,_.nacksCount),at(S,fn.PLIS,_.plisCount),at(S,fn.FIRS,_.firsCount),at(S,fn.AVG_ENCODE,_.avgEncodeMs);let M=y&&y.videoSend.find(H=>H.ssrc===m);if(M){let H=b?rc:rc*Cd;M.timestamp&&_.timestamp&&(H=_.timestamp-M.timestamp),M.packets!=null&&_.packets!=null&&at(S,fn.PACKAGE_RATE,1e3*(_.packets-M.packets)/H),_.packetsLost!=null&&M.packetsLost!=null&&at(S,fn.PACKAGE_LOST,_.packetsLost-M.packetsLost),M.bytes!=null&&_.bytes!=null&&at(S,fn.BITRATE,8*(_.bytes-M.bytes)/H)}return S}(u[0].ssrcId,e,t,c,r),f=r?null:function(m,g,y){let v=g.videoSend.find(D=>D.ssrc===m);if(!v)return null;let b={},_=v.inputFrame,S=_&&_.height||y&&y.videoHeight||0,I=_&&_.width||y&&y.videoWidth||0,A=_&&_.frameRate||0;return at(b,x_.HEIGHT,S),at(b,x_.WIDTH,I),at(b,x_.FRAME_RATE,A),b}(u[0].ssrcId,e,c),p=r?null:function(m){let g={};return at(g,fn.RETRANSMIT,m.bitrate.retransmit),at(g,fn.TARGET_ENCODED,m.bitrate.targetEncoded),at(g,fn.ACTUAL_ENCODED,m.bitrate.actualEncoded),at(g,fn.TRANSMIT,m.bitrate.transmit),at(g,fn.BANDWIDTH,m.sendBandwidth),g}(e);o=Object.assign({},h,f,p)}else a=r?void 0:function(h,f,p){let m=f.videoSend.find(v=>v.ssrc===h);if(!m)return;let g={},y=m.sentFrame;if(y&&(at(g,Md.HEIGHT,y.height),at(g,Md.WIDTH,y.width),at(g,Md.FRAME_RATE,y.frameRate)),p){let v=p.videoSend.find(b=>b.ssrc===h);if(v){let b=rc*Cd;v.timestamp&&m.timestamp&&(b=m.timestamp-v.timestamp),v.packets!=null&&m.packets!=null&&at(g,Md.PACKAGE_RATE,1e3*(m.packets-v.packets)/b),m.packetsLost!=null&&v.packetsLost!=null&&at(g,Md.PACKAGE_LOST,m.packetsLost-v.packetsLost),v.bytes!=null&&m.bytes!=null&&at(g,Md.BITRATE,8*(m.bytes-v.bytes)/b)}}return g}(u[0].ssrcId,e,t);break;case oe.LocalAudioTrack:i=r?void 0:function(h,f,p,m){let g=f.audioSend.find(S=>S.ssrc===h);if(!g)return;let y={};y[su.DISABLED]=m._originMediaStreamTrack&&!m._originMediaStreamTrack.enabled||m._mediaStreamTrack&&!m._mediaStreamTrack.enabled?1:0;let v=100*m._source.getAccurateVolumeLevel(),b=g.inputLevel;if(b!=null){let S=Math.ceil(50*Math.log10(100*b+1));at(y,su.LEVEL,S)}at(y,ere.PCM_LEVEL,v),at(y,su.AEC_RETURN_LOSS,g.aecReturnLoss),at(y,su.AEC_RETURN_LOSS_ENH,g.aecReturnLossEnhancement),y[su.FREEZE]=0;let _=p&&p.audioSend.find(S=>S.ssrc===h);if(_){let S=rc*Cd;_.timestamp&&g.timestamp&&(S=g.timestamp-_.timestamp),_.bytes!=null&&g.bytes!=null&&at(y,su.BITRATE,8*(g.bytes-_.bytes)/S),_.packets!=null&&g.packets!=null&&at(y,su.PACKAGE_RATE,1e3*(g.packets-_.packets)/S)}return y}(u[0].ssrcId,e,t,c)}}),{high:o,low:a,audio:i}}getInboundStats(e,t,r){if(!this.requestRemoteMedia)return;let n=this.requestRemoteMedia()||[],i=[];return n.forEach(o=>{let[a,s]=o,l={peer:a.uid};if(s.has(xe.VIDEO)&&a.videoTrack){let c=a._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(a._videoSSRC)||!1,u=a.videoTrack?function(h,f,p,m,g,y,v){var b;let _=f.videoRecv.find(V=>V.ssrc===h);if(!_)return;let S={},{receivedFrame:I,outputFrame:A,decodeFrameRate:D}=_,M=p&&p.videoRecv.find(V=>V.ssrc===h);if(S[hi.FREEZE]=g&&nre.isRemoteVideoFreeze(m,_,M)?1:0,at(S,jd.FRAME_RATE_DECODE,D),at(S,hi.QP_SUM,_.qpSumPerFrame),_.framesRateFirefox&&at(S,hi.FRAME_RATE,_.framesRateFirefox),I&&at(S,hi.FRAME_RATE,I.frameRate),M){let V=f.timestamp-p.timestamp||(v?rc:Cd*rc);_.packetsLost!=null&&M.packetsLost!=null&&at(S,hi.PACKAGE_LOST,_.packetsLost-M.packetsLost),M.bytes!=null&&_.bytes!=null&&at(S,hi.BITRATE,8*(_.bytes-M.bytes)/V),M.packets!=null&&_.packets!=null&&at(S,hi.PACKAGE_RATE,1e3*(_.packets-M.packets)/V)}if(v)return S;I?(at(S,hi.HEIGHT,I.height),at(S,hi.WIDTH,I.width)):m&&(at(S,hi.HEIGHT,m._videoHeight||0),at(S,hi.WIDTH,m._videoWidth||0)),A&&at(S,jd.FRAME_RATE_OUTPUT,A.frameRate);let H=(b=m._player)===null||b===void 0?void 0:b.rendFrameRate.toFixed(0);if(H&&at(S,jd.FRAME_RATE_RENDER,+H),at(S,hi.JITTER_BUFFER,_.jitterBufferMs),at(S,hi.CURRENT_DELAY,_.currentDelayMs),at(S,hi.FIRS,_.firsCount),at(S,hi.NACKS,_.nacksCount),at(S,hi.PLIS,_.plisCount),m){S[hi.DISABLED]=m._originMediaStreamTrack.enabled&&m._mediaStreamTrack.enabled?0:1;let V=m._player;if(V){let{freezeTimeCounterList:G,renderFreezeAccTime:Y,videoElementStatus:Z}=V;if(G&&G.length>0&&at(S,jd.FREEZE_TIME,G.splice(0,1)[0]),y&&ac.visibility==="visible"&&Z===Ci.PLAYING&&Ct().supportRequestVideoFrameCallback){let $=Math.min(6e3,Y);V.renderFreezeAccTime=Math.max(0,Y-$),at(S,jd.FREEZE_TIME_RENDER,$)}if(typeof _.totalFreezesDuration=="number"){let $=M&&M.totalFreezesDuration?_.totalFreezesDuration-M.totalFreezesDuration:_.totalFreezesDuration;at(S,jd.FREEZE_DURATION,1e3*$)}}}if(S[hi.PLAYER_STATUS]=zI[m._player?m._player.videoElementStatus:"uninit"],M&&_.totalInterFrameDelay!==void 0&&_.totalSquaredInterFrameDelay!==void 0&&M.totalInterFrameDelay!==void 0&&M.totalSquaredInterFrameDelay!==void 0){let V=_.totalInterFrameDelay-M.totalInterFrameDelay,G=_.totalSquaredInterFrameDelay-M.totalSquaredInterFrameDelay,Y=_.framesDecodeCount-M.framesDecodeCount,Z=V/Y*1e3,$=Math.round(1e3*Math.sqrt((G-Math.pow(V,2)/Y)/Y));!isNaN($)&&Z+$>Math.max(3*Z,Z+150)&&(S[hi.I_FRAME_DELAY]=$)}return S}(a._videoSSRC,e,t,a.videoTrack,c===!0,this.needUploadRenderFreezeTime,r):void 0;u&&(l.video=u)}if(s.has(xe.AUDIO)&&a.audioTrack){let c=a.audioTrack?function(u,h,f,p,m){let g=h.audioRecv.find(M=>M.ssrc===u);if(!g)return;let y={},v=f&&f.audioRecv.find(M=>M.ssrc===u),{receivedFrames:b,droppedFrames:_}=g;var S,I;if(at(y,ns.JITTER,g.jitterMs),b!=null&&_!=null&&(y[ns.FREEZE]=(I=_,(S=b)===0||100*I/S>20?1:0)),v){let M=h.timestamp-f.timestamp||(m?rc:rc*Cd);g.packets!=null&&v.packets!=null&&at(y,ns.PACKAGE_RATE,1e3*(g.packets-v.packets)/M),v.bytes!=null&&g.bytes!=null&&at(y,ns.BITRATE,8*(g.bytes-v.bytes)/M),g.packetsLost!=null&&v.packetsLost!=null&&at(y,ns.PACKAGE_LOST,g.packetsLost-v.packetsLost)}if(m)return y;let A=100*p._source.getAccurateVolumeLevel(),D=g.outputLevel;if(D!=null){let M=Math.ceil(50*Math.log10(100*D+1));at(y,tre.LEVEL,M)}if(at(y,ns.PCM_LEVEL,A),p&&(y[ns.DISABLED]=p._originMediaStreamTrack.enabled&&p._mediaStreamTrack.enabled?0:1),at(y,ns.JITTER_BUFFER,g.jitterBufferMs),at(y,ns.CURRENT_DELAY,g.jitterBufferMs),y[ns.PLAYER_STATUS]=zI[Ji.getPlayerState(p.getTrackId())],v){let M=g.concealedSamples-v.concealedSamples;M>0&&at(y,ns.CONCEALED_SAMPLES,M)}return y}(a._audioSSRC,e,t,a.audioTrack,r):void 0;c&&(l.audio=c)}(l.video||l.audio)&&i.push(l)}),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,i}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval(()=>{if(!this.requestAllTracks||!this.requestUpload)return;let e=(this.requestAllTracks()||[]).find(t=>t instanceof uS);if(e&&e._external.getDenoiserStats){let t=e._external.getDenoiserStats();t&&this.requestUpload(Mv.DENOISER_STATS,t)}},2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval(()=>{!this.requestAllTracks||!this.requestUpload||this.requestAllTracks().forEach(e=>{e.getProcessorStats().forEach(t=>{this.requestUpload&&this.requestUpload(t.type,t.stats)})})},2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval(()=>{!this.requestUpload||!this.requestRemoteMedia||(this.requestRemoteMedia()||[]).forEach(e=>{let[t,r]=e;r.has(xe.VIDEO)&&t.videoTrack&&t.videoTrack.getProcessorStats().forEach(n=>{this.requestUpload&&this.requestUpload(n.type,n.stats)}),r.has(xe.AUDIO)&&t.audioTrack&&t.audioTrack.getProcessorStats().forEach(n=>{this.requestUpload&&this.requestUpload(n.type,n.stats)})})},2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);let e=new Map;this.uploadExtUsageStatsTimer=window.setInterval(async()=>{let t=Date.now(),r={connectionInterval:L("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:t},n=[],i=this.requestAllTracks&&this.requestAllTracks()||[];for(let l of i)!l.muted&&l.enabled&&(n=n.concat(await l.getProcessorUsage()));let o=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(let[l,c]of o)c.has(xe.VIDEO)&&l.videoTrack&&(n=n.concat(await l.videoTrack.getProcessorUsage())),c.has(xe.AUDIO)&&l.audioTrack&&(n=n.concat(await l.audioTrack.getProcessorUsage()));if(n.length===0)return;r.details=function(l,c){let u={};for(let{id:m,value:g,level:y,direction:v}of l){var h;let b=(h=c.get(m))!==null&&h!==void 0?h:0,_=g===2?b+L("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:b;var f,p;c.set(m,_),u[m]?(g===2&&(u[m].value=g),y>u[m].level&&(u[m].level=y),v==="remote"&&(u[m].remoteUidCount+=1),u[m].totalTs=(f=c.get(m))!==null&&f!==void 0?f:0):u[m]={value:g,level:y,remoteUidCount:v==="local"?0:1,totalTs:(p=c.get(m))!==null&&p!==void 0?p:0}}return Object.keys(u).map(m=>{let{level:g,value:y,totalTs:v}=u[m];return{id:m,level:g,value:y,totalTs:v}})}(n,e);let a=Date.now(),s=a>t?a:t+1;this.requestUpload&&this.requestUpload(Mv.EXTENSION_USAGE_STATS,{usageStats:r,sendTs:s})},L("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}},gu=class{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){R(this,"uid",void 0),R(this,"_uintid",void 0),R(this,"_trust_in_room_",!0),R(this,"_trust_audio_enabled_state_",!0),R(this,"_trust_video_enabled_state_",!0),R(this,"_trust_audio_mute_state_",!0),R(this,"_trust_video_mute_state_",!0),R(this,"_audio_muted_",!1),R(this,"_video_muted_",!1),R(this,"_audio_enabled_",!0),R(this,"_video_enabled_",!0),R(this,"_audio_added_",!1),R(this,"_video_added_",!1),R(this,"_is_pre_created",!1),R(this,"_video_pre_subscribed",!1),R(this,"_audio_pre_subscribed",!1),R(this,"_trust_video_stream_added_state_",!0),R(this,"_trust_audio_stream_added_state_",!0),R(this,"_audioTrack",void 0),R(this,"_videoTrack",void 0),R(this,"_dataChannels",[]),R(this,"_audioSSRC",void 0),R(this,"_videoSSRC",void 0),R(this,"_audioOrtc",void 0),R(this,"_videoOrtc",void 0),R(this,"_cname",void 0),R(this,"_rtxSsrcId",void 0),R(this,"_videoMid",void 0),R(this,"_audioMid",void 0),this.uid=e,this._uintid=t}},Us=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({});function i8e(e,t){var r;let n;switch(t){case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoTrack:n=ge(r=e._hints).call(r,cr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalVideoLowTrack:n=Lt.Low}return n}function Nk(e){let t=Ct();if(e.some(r=>r._bypassWebAudio))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function tN(e,t){Nk(e);let r=new gn;return e.forEach(n=>r.addAudioTrack(n)),r}var B$,$$,H$,z$,G$,W$,K$,q$,Y$,X$,J$,dr;function Q$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _E(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q$(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var To=(B$=Ps(Us.SEND_ONLY),$$=Ps(Us.SEND_ONLY),H$=Ps(),z$=Ps(Us.RECEIVE_ONLY),G$=Ps(Us.RECEIVE_ONLY),W$=Ps(Us.RECEIVE_ONLY),K$=Ps(Us.RECEIVE_ONLY),q$=Ps(Us.RECEIVE_ONLY),Y$=Ps(Us.RECEIVE_ONLY),X$=Ps(),J$=Ps(Us.RECEIVE_ONLY),dr=class extends _r{get state(){return this._state}set state(e){let t=this._state;this._state=e,this.emit(Me.StateChange,t,this._state)}constructor(e,t){super(),R(this,"isPlanB",!1),R(this,"store",void 0),R(this,"statsUploader",void 0),R(this,"sendConnection",void 0),R(this,"recvConnection",void 0),R(this,"localTrackMap",new Map),R(this,"remoteUserMap",new Map),R(this,"localDataChannels",[]),R(this,"pendingLocalTracks",[]),R(this,"pendingRemoteTracks",[]),R(this,"statsCollector",void 0),R(this,"dtlsFailedCount",0),R(this,"sendMutex",new ai("P2PChannel2-send-mutex")),R(this,"recvMutex",new ai("P2PChannel2-recv-mutex")),R(this,"_state",Dt.Disconnected),R(this,"_restartStates",["disconnected","failed"]),R(this,"reconnectInterval",void 0),R(this,"uploadUnplinkStarted",!1),R(this,"uploadDownlinkStarted",!1),R(this,"uplinkStateUploadInterval",void 0),R(this,"downlinkStatsUploadInterval",void 0),R(this,"handleMuteLocalTrack",async(r,n,i)=>{let o=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==Dt.Connected)return void i(new J(O.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));let l=this.filterTobeMutedTracks(r);if(l.length===0)return void n();let c=l.find(p=>p[0]==="videoLowTrack");c&&c[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(l.map(p=>{let[,{id:m}]=p;return m}));let u=!1;var a,s;r.trackMediaType==="video"?u=!((a=this.localTrackMap.get(oe.LocalAudioTrack))===null||a===void 0||!a.track._muted):u=((s=this.localTrackMap.get(oe.LocalVideoTrack))===null||s===void 0?void 0:s.id)===void 0;let h=this.createMuteMessage(l);await Jt(this,Me.RequestMuteLocal,h);let f=r.trackMediaType==="video"?xu.MUTE_LOCAL_VIDEO:xu.MUTE_LOCAL_AUDIO;await Jt(this,Me.RequestP2PMuteLocal,{action:f,message:h,isMuteAll:u}),n()}catch(l){i(l)}finally{o()}}),R(this,"handleUnmuteLocalTrack",async(r,n,i)=>{let o=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==Dt.Connected)return void i(new J(O.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));let a=this.filterTobeUnmutedTracks(r);if(a.length===0)return void n();await this.sendConnection.unmuteLocal(a.map(c=>{let[,{id:u}]=c;return u}));let s=this.createUnmuteMessage(a),l=r.trackMediaType==="video"?xu.UNMUTE_LOCAL_VIDEO:xu.UNMUTE_LOCAL_AUDIO;await Jt(this,Me.RequestP2PMuteLocal,{action:l,message:s}),n()}catch(a){i(a)}finally{o()}}),R(this,"handleUpdateVideoEncoder",async(r,n,i)=>{let o=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{let a=this.localTrackMap.get(oe.LocalVideoTrack);if(!this.sendConnection||!a||a.track!==r||this.state!==Dt.Connected)return void n();let{id:s,track:l}=a;s&&(await this.sendConnection.updateSendParameters(s,l),await this.sendConnection.updateEncoderConfig(s,l),this.emit(Me.UpdateVideoEncoder,l)),n()}catch(a){i(a)}finally{o()}}),R(this,"handleUpdateVideoSendParameters",async(r,n,i)=>{let o=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{let a=this.localTrackMap.get(oe.LocalVideoTrack);if(!this.sendConnection||!a||a.track!==r||this.state!==Dt.Connected)return void n();let{id:s,track:l}=a;s&&await this.sendConnection.updateSendParameters(s,l),n()}catch(a){i(a)}finally{o()}}),R(this,"handleReplaceTrack",async(r,n,i,o)=>{let a;w.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(r.getTrackId(),"]")),typeof o=="boolean"&&o||(a=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var s;let c=Array.from(this.localTrackMap.entries()).find(u=>{let[,{track:h}]=u;return r===h});if(!this.sendConnection||!c||c[1].id===void 0||this.state!==Dt.Connected)return void n();if(await((s=this.sendConnection)===null||s===void 0?void 0:s.replaceTrack(r,c[1].id)),c[0]===oe.LocalVideoTrack&&Ct().supportDualStreamEncoding){let u=this.localTrackMap.get(oe.LocalVideoLowTrack);if(u){let h=r._mediaStreamTrack.clone();u.track._originMediaStreamTrack.stop(),u.track._mediaStreamTrack=h,u.track._originMediaStreamTrack=h,await new fe((f,p)=>{this.handleReplaceTrack(u.track,f,p,!0)})}}n()}catch(c){i(c)}finally{var l;(l=a)===null||l===void 0||l()}}),R(this,"handleGetLocalVideoStats",r=>{r(this.statsCollector.getLocalVideoTrackStats())}),R(this,"handleGetLocalAudioStats",r=>{r(this.statsCollector.getLocalAudioTrackStats())}),R(this,"handleGetRemoteVideoStats",r=>this.statsCollector.getRemoteVideoTrackStats(r.uid)[r.uid]),R(this,"handleGetRemoteAudioStats",r=>this.statsCollector.getRemoteAudioTrackStats(r.uid)[r.uid]),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new rre(e),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval(()=>{[this.sendConnection,this.recvConnection].forEach(r=>{r&&(r.iceConnectionState!=="disconnected"&&r.iceConnectionState!=="failed"||this.handleDisconnect(r.direction))})},L("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new J(O.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e){throw new J(O.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let r;try{if(t){this.recvConnection&&(w.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),r=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new U$(e,this.store,Ui.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);let n=await this.recvConnection.establish(t);return{iceParameters:n.iceParameters,dtlsParameters:n.dtlsParameters,sdp:n.sdp}}{this.state=Dt.New,this.sendConnection&&(w.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),r=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new U$(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);let n=await this.sendConnection.establish();return{iceParameters:n.iceParameters,dtlsParameters:n.dtlsParameters,sdp:n.sdp}}}finally{r&&r()}}async p2pConnect(e){if(!this.sendConnection)throw new J(O.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Dt.Connected}async addRemoteCandidate(e,t){if(t===Ui.RECEIVE_ONLY){if(!this.sendConnection)throw new J(O.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new J(O.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,r){var n=this;return qs(function*(){let i=yield Rt(n.sendMutex.lock("From P2PChannel.publish"));try{if(!n.sendConnection||n.state!==Dt.Connected){n.throwIfTrackTypeNotMatch(e);let c=e.filter(u=>n.pendingLocalTracks.indexOf(u)===-1);return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(c))}n.store.pubId=n.store.pubId+1,ni.markPublishStart(n.store.clientId,n.store.pubId);let o=n.filterTobePublishedTracks(e,t,r);if(o.length===0)return void(yield Rt(n.tryToUnmuteAudio(e)));o.forEach(c=>{let{track:u,type:h}=c,f=Date.now();n.store.publish(u.getTrackId(),h===oe.LocalAudioTrack?"audio":"video",f)}),n.bindLocalTrackEvents(o);let a=yield Rt(n.sendConnection.send(o.map(c=>{let{track:u}=c;return u}),n.store.codec,n.store.audioCodec)),s=(yield Rt(a.next())).value,l=n.createGatewayPublishMessage(o,s);try{yield l}catch(c){throw a.throw(c),(c==null?void 0:c.code)===O.WS_ABORT&&o.forEach(u=>{let{track:h}=u;n.pendingLocalTracks.indexOf(h)===-1&&n.pendingLocalTracks.push(h)}),n.unbindLocalTrackEvents(o),c}yield Rt(a.next()),o.forEach(c=>{let{type:u}=c;n.statsCollector.addLocalStats(u)}),n.statsUploader.startUploadOutboundStats(),n.assignLocalTracks(o,s),o.forEach(c=>{let{track:u,type:h}=c,f=Date.now();n.store.publish(u.getTrackId(),h===oe.LocalAudioTrack?"audio":"video",void 0,f)}),n.startUploadUplinkState()}finally{i()}})()}async unpublish(e){if(!this.sendConnection||this.state!==Dt.Connected)return void(e.length===0?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter(i=>!ge(e).call(e,i)));let t=this.filterTobeUnpublishedTracks(e);if(t.length===0)return;let r=t.find(i=>i[0]==="videoLowTrack");r&&r[1].track.close();let n=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map(i=>{let[,{id:o}]=i;return o})),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map(i=>{let[o,{track:a}]=i;return{type:o,track:a}})),t.forEach(i=>{let[o]=i;this.statsCollector.removeLocalStats(o)}),this.localTrackMap.size===0&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===Dt.Connected)return r&&r[1].track.close(),n;e.forEach(i=>{let o=this.pendingLocalTracks.indexOf(i);o!==-1&&this.pendingLocalTracks.splice(o,1)})}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);let e=()=>{let t=[],r=[];Array.from(this.localTrackMap.entries()).forEach(n=>{let[i,{track:o,ssrcs:a}]=n,s={stream_type:i8e(o,i),ssrcs:a};o._muted||!o._enabled?t.push(s):r.push(s)}),t.length>0&&t.forEach(n=>{Jt(this,Me.RequestMuteLocal,[n])}),r.length>0&&r.forEach(n=>{Jt(this,Me.RequestUnmuteLocal,[n])})};e(),this.uplinkStateUploadInterval=window.setInterval(()=>{e()},3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return qs(function*(){throw new J(O.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")})()}async republish(){this.pendingLocalTracks.length>0&&(w.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await Yn(this,Me.RequestRePublish,this.pendingLocalTracks),this.emit(Me.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new J(O.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,r,n){var i;if(!this.recvConnection)throw new J(O.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if((i=this.remoteUserMap.get(e))!==null&&i!==void 0&&i.has(t))return;let{track:o,mid:a,transceiver:s}=await this.recvConnection.receive(t,[{ssrcId:r}],String(e.uid),n);t===xe.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(o):(e._audioTrack=new Dp(o,e.uid,e._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),s&&e._audioTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=r,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(o):(e._videoTrack=new Pp(o,e.uid,e._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),s&&e._videoTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._videoTrack));let l=this.remoteUserMap.get(e);l?l.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();let c=this.pendingRemoteTracks.findIndex(u=>{let{user:h,kind:f}=u;return h.uid===e.uid&&t===f});c!==-1&&(this.pendingRemoteTracks.splice(c,1),this.emit(Me.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,r,n){if(!this.recvConnection)throw new J(O.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:r}],String(e.uid),n)}async unsubscribe(e,t,r){let n=this.pendingRemoteTracks.filter(o=>{let{user:a,kind:s}=o;return t!==void 0?a.uid===e.uid&&t===s:a.uid===e.uid});if(n.forEach(o=>{let a=this.pendingRemoteTracks.indexOf(o);this.pendingRemoteTracks.splice(a,1)}),this.recvConnection||r||n.forEach(o=>{let{kind:a}=o;var s;if(a===xe.AUDIO)(s=e._audioTrack)===null||s===void 0||s._destroy(),e._audioTrack=void 0;else if(a===xe.VIDEO){var l;(l=e._videoTrack)===null||l===void 0||l._destroy(),e._videoTrack=void 0}}),!this.recvConnection)return;let i=this.filterTobeUnSubscribedTracks(e,t);i.length!==0&&(await this.recvConnection.stopReceiving(i.map(o=>{let[,{id:a}]=o;return a})),this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),i.forEach(o=>{let[a,{kind:s}]=o;var l,c;if(s===xe.VIDEO&&a._videoSSRC&&((l=this.recvConnection)===null||l===void 0||l.setStatsRemoteVideoIsReady(a._videoSSRC,!1)),s===xe.VIDEO)this.unbindRemoteTrackEvents(a._videoTrack),r||((c=a._videoTrack)===null||c===void 0||c._destroy(),a._videoTrack=void 0);else if(s===xe.AUDIO){var u;this.unbindRemoteTrackEvents(a._audioTrack),!r&&((u=a._audioTrack)===null||u===void 0||u._destroy(),a._audioTrack=void 0)}}),i.forEach(o=>{let[,{kind:a}]=o;Jt(this,Me.RequestP2PMuteRemote,a)}))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let e=()=>Array.from(this.remoteUserMap.entries()).forEach(t=>{let[,r]=t;[xe.VIDEO,xe.AUDIO].forEach(n=>{r.has(n)?Jt(this,Me.RequestP2PUnmuteRemote,n):Jt(this,Me.RequestP2PMuteRemote,n)})});e(),this.downlinkStatsUploadInterval=window.setInterval(()=>{e()},3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new J(O.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new J(O.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new J(O.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new J(O.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;let r=this.remoteUserMap.get(e);if(!r)return void w.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!r.get(t))return void w.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));let n=t===xe.VIDEO?e._videoSSRC:e._audioSSRC;n!==void 0&&this.recvConnection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;let r=this.remoteUserMap.get(e);if(!r)return void w.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."));r.get(t)||w.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."))}getAllTracks(e){let t=this.localTrackMap.get(oe.LocalAudioTrack);if((t==null?void 0:t.track)instanceof gn){let r=t.track;return Array.from(this.localTrackMap.entries()).filter(n=>{let[i]=n;return i!==oe.LocalAudioTrack}).filter(n=>{let[i]=n;return!(e&&i===oe.LocalVideoLowTrack)}).map(n=>{let[,{track:i}]=n;return i}).concat(r.trackList)}return Array.from(this.localTrackMap.entries()).filter(r=>{let[n]=r;return!(e&&n===oe.LocalVideoLowTrack)}).map(r=>{let[,{track:n}]=r;return n})}reportPublishEvent(e,t,r,n,i){if(e){let a=this.localTrackMap.get(oe.LocalAudioTrack),s=n?this.localTrackMap.get(oe.LocalVideoLowTrack):this.localTrackMap.get(oe.LocalVideoTrack);Te.publish(this.store.sessionId,{eventElapse:ni.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.track.getTrackLabel(),videoName:s==null?void 0:s.track.getTrackLabel(),screenshare:(s==null?void 0:s.track._hints.indexOf(cr.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;r||(r=[]);let a=r.find(l=>l instanceof Cr),s=n?(o=this.localTrackMap.get(oe.LocalVideoTrack))===null||o===void 0?void 0:o.track:r.find(l=>l instanceof ir);Te.publish(this.store.sessionId,{eventElapse:ni.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.getTrackLabel(),videoName:s==null?void 0:s.getTrackLabel(),screenshare:(s==null?void 0:s._hints.indexOf(cr.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,r,n){let i=n===xe.VIDEO?r._videoSSRC:r._audioSSRC;i&&Te.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===xe.VIDEO,audio:n===xe.AUDIO,peerid:r.uid,subscribeRequestid:n===xe.VIDEO?r._videoSSRC:r._audioSSRC,p2pid:this.store.p2pId,eventElapse:ni.measureFromSubscribeStart(this.store.clientId,i)})}reset(){w.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new ai("P2PChannel2-send-mutex"),this.sendMutex=new ai("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();let e=this.localTrackMap.get(oe.LocalAudioTrack);if((e==null?void 0:e.track)instanceof gn){if(e.track.trackList.length>0){let t=e.track;e.track.trackList.forEach(r=>{t.removeAudioTrack(r)})}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=Dt.Disconnected}getStats(e){var t,r;return e?(r=this.recvConnection)===null||r===void 0?void 0:r.getStats():(t=this.sendConnection)===null||t===void 0?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return((t=this.recvConnection)===null||t===void 0?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){let e=this.localTrackMap.get(oe.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){let e=this.localTrackMap.get(oe.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){let t=this.localTrackMap.get(e);return t&&t.track instanceof ir||t&&t.track instanceof Cr?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}getRemoteMedia(e){var t;let r=Array.from(Bo(t=this.remoteUserMap).call(t)).find(n=>n.uid===e);return r?{audioTrack:r.audioTrack,audioSSRC:r._audioSSRC,videoTrack:r.videoTrack,videoSSRC:r._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(r=>{let[n]=r;return{uid:n.uid,level:n.audioTrack?100*n.audioTrack._source.getAccurateVolumeLevel():0}}),t=this.localTrackMap.get(oe.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=V0(e).call(e,(r,n)=>r.level-n.level),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(w.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=Dt.Reconnecting,L("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t]=e;var r;t._videoTrack&&t._videoTrack._player&&((r=t._videoTrack._player.getVideoElement())===null||r===void 0||r.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())}),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(e=>{var t;let[r,{track:n}]=e;switch(r){case oe.LocalVideoTrack:ge(t=n._hints).call(t,cr.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case oe.LocalAudioTrack:n instanceof gn?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);case oe.LocalVideoLowTrack:}}),this.emit(Me.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;Array.from(Bo(r).call(r)).forEach(n=>{this.setPendingRemoteMedia(t,n)}),this.emit(Me.MediaReconnectStart,t.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),w.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(let r of this.pendingRemoteTracks){let{user:n,kind:i}=r;if((e instanceof gu?e.uid:e)===n.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let r,n;if(e===Ui.SEND_ONLY){if(!this.sendConnection)throw new J(O.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");r=await this.sendMutex.lock("From P2PChannel.restartICE"),n=this.sendConnection}else{if(!this.recvConnection)throw new J(O.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");r=await this.recvMutex.lock("From P2PChannel.restartICE"),n=this.recvConnection}try{if(t){let i=await n.restartICE(t);return n.isInRestartIce=!1,i}{let i=await n.restartICE();if(i){let o=await Yn(this,Me.RequestP2PRestartICE,{direction:Ui.RECEIVE_ONLY,iceParameter:i});await n.restartICE(o),n.isInRestartIce=!1}}}finally{r()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;let e=this.sendConnection.getStats(),t=this.localTrackMap.get(oe.LocalVideoTrack),r=this.localTrackMap.get(oe.LocalAudioTrack),n=e.videoSend.find(p=>{var m;return p.ssrc===(t==null||(m=t.ssrcs)===null||m===void 0?void 0:m[0].ssrcId)}),i=e.audioSend.find(p=>{var m;return p.ssrc===(r==null||(m=r.ssrcs)===null||m===void 0?void 0:m[0].ssrcId)});if(!n||!i)return 1;let o=xa(this,Me.NeedSignalRTT),a=n?n.rttMs:void 0,s=i?i.rttMs:void 0,l=a&&s?(a+s)/2:a||s,c=(l&&o?(l+o)/2:l||o)||0,u=100*e.sendPacketLossRate*.7/50+.3*c/1500,h=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,f=t==null?void 0:t.track;if(f&&f._encoderConfig&&f._hints.indexOf(cr.SCREEN_TRACK)===-1){let p=f._encoderConfig.bitrateMax,m=e.bitrate.actualEncoded;if(p&&m){let g=(1e3*p-m)/(1e3*p);return Xee[g<.15?0:g<.3?1:g<.45?2:g<.6?3:4][h]}}return h}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;let e=this.recvConnection.getStats(),t=0;return Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n]=r,i=n._audioSSRC,o=n._videoSSRC,a=e.audioRecv.find(m=>m.ssrc===i),s=e.videoRecv.find(m=>m.ssrc===o);if(!a&&!s)return void(t+=1);let l=xa(this,Me.NeedSignalRTT),c=e.rtt,u=(c&&l?(c+l)/2:c||l)||0,h=a?a.jitterMs:void 0,f=e.recvPacketLossRate,p=.7*f*100/50+.3*u/1500;h&&(p=.6*f*100/50+.2*u/1500+.2*h/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5}),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new fe((t,r)=>{this.handleMuteLocalTrack(e,t,r)})}filterTobePublishedTracks(e,t,r){let n=[],i=Ct(),o=this.getAllTracks();e=up(e=e.filter(l=>o.indexOf(l)===-1));let a=!1,s=!1;for(let l of e){if(l instanceof ir&&(this.localTrackMap.has(oe.LocalVideoTrack)||a?new J(O.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:l,type:oe.LocalVideoTrack}),a=!0),t)){let c=this.getLowVideoTrack(l,r);n.push({track:c,type:oe.LocalVideoLowTrack})}if(l instanceof Cr){let c=this.localTrackMap.get(oe.LocalAudioTrack);if(c){if(!(c.track instanceof gn))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(l._bypassWebAudio)throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");c.track.addAudioTrack(l),this.bindLocalAudioTrackEvents(l,!0)}else if(s){let u=n.find(h=>{let{type:f}=h;return f===oe.LocalAudioTrack});if(!(u.track instanceof gn))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(l._bypassWebAudio)throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");u.track.addAudioTrack(l)}else{if(!i.webAudioMediaStreamDest||l instanceof gn||l._bypassWebAudio)n.push({track:l,type:oe.LocalAudioTrack});else{let u=new gn;u.addAudioTrack(l),n.push({track:u,type:oe.LocalAudioTrack})}s=!0}}}return n}filterTobeUnpublishedTracks(e){let t=[],r=this.getAllTracks();e=up(e=e.filter(n=>r.indexOf(n)!==-1));for(let n of e){if(n instanceof Cr){let i=this.localTrackMap.get(oe.LocalAudioTrack);if(!i)continue;i.track instanceof gn?(i.track.removeAudioTrack(n),this.unbindLocalAudioTrackEvents(n),i.track.trackList.length===0&&(t.push([oe.LocalAudioTrack,i]),i.track.close())):t.push([oe.LocalAudioTrack,i])}if(n instanceof ir){let i=this.localTrackMap.get(oe.LocalVideoTrack);if(!i)continue;t.push([oe.LocalVideoTrack,i]);let o=this.localTrackMap.get(oe.LocalVideoLowTrack);o&&t.push([oe.LocalVideoLowTrack,o])}}return t}bindLocalTrackEvents(e){e.forEach(t=>{let{track:r,type:n}=t;switch(n){case oe.LocalVideoTrack:r.addListener(be.GET_STATS,this.handleGetLocalVideoStats),r.addListener(be.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(be.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(be.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.addListener(be.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.addListener(be.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.addListener(be.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(be.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case oe.LocalAudioTrack:this.bindLocalAudioTrackEvents(r);case oe.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){e instanceof gn?e.trackList.forEach(r=>{r.addListener(be.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(be.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(be.GET_STATS,this.handleGetLocalAudioStats),r.addListener(be.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(be.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(be.GET_STATS,this.handleGetLocalAudioStats),e.addListener(be.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(be.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(be.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(be.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(be.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(t=>{let[r,{track:n}]=t;return{track:n,type:r}})),e.forEach(t=>{let{track:r,type:n}=t;switch(n){case oe.LocalVideoTrack:r.off(be.GET_STATS,this.handleGetLocalVideoStats),r.off(be.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(be.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(be.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.off(be.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.off(be.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.off(be.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(be.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case oe.LocalAudioTrack:this.unbindLocalAudioTrackEvents(r);case oe.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof gn?e.trackList.forEach(t=>{t.off(be.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(be.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(be.GET_STATS,this.handleGetLocalAudioStats),t.off(be.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(be.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(be.GET_STATS,this.handleGetLocalAudioStats),e.off(be.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(be.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(be.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(be.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(be.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof Pp&&t.addListener(be.GET_STATS,r=>{r(this.handleGetRemoteVideoStats(e))}),t instanceof Dp&&t.addListener(be.GET_STATS,r=>{r(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(be.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;r.has(xe.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),r.has(xe.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)})}createGatewayPublishMessage(e,t){return e.map((r,n)=>{var i;let o,{track:a,type:s}=r;switch(s){case oe.LocalAudioTrack:o=Lt.Audio;break;case oe.LocalVideoTrack:o=ge(i=a._hints).call(i,cr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalVideoLowTrack:o=Lt.Low}return{kind:s===oe.LocalAudioTrack?xe.AUDIO:xe.VIDEO,stream_type:o,mid:t[n].id,ssrcs:t[n].localSSRC,isMuted:a.muted||!a.enabled}})}createGatewayUnpublishMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case oe.LocalVideoTrack:n=ge(r=o._hints).call(r,cr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoLowTrack:n=Lt.Low}return{stream_type:n,ssrcs:a,mid:s}})}assignLocalTracks(e,t){e.forEach((r,n)=>{let{track:i,type:o}=r;this.localTrackMap.set(o,{track:i,id:t[n].id,ssrcs:t[n].localSSRC})})}withdrawLocalTracks(e){e.forEach(t=>{let[r]=t;this.localTrackMap.delete(r)})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var r;w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(Me.PeerConnectionStateChange,t),t!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),t==="connected"&&(e.isInRestartIce=!1),ge(r=this._restartStates).call(r,t)&&!e.isInRestartIce&&(t==="disconnected"&&await jn(800),e.iceConnectionState!=="disconnected"&&e.iceConnectionState!=="failed"||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=t=>{t!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(t,")")),Te.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:t,tag:xr.TRACER}).onSuccess(),this.emit(Me.IceConnectionStateChange,t)},e.onICETransportStateChange=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(t,")"))},e.onDTLSTransportStateChange=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(t,")"))},e.onDTLSTransportError=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(t,")"))},e.onFirstAudioDecoded=t=>{var r;let n=Array.from(Bo(r=this.remoteUserMap).call(r)).find(o=>o._audioSSRC===t);var i;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),(i=n.audioTrack)===null||i===void 0||i.emit(kp.FIRST_FRAME_DECODED),Te.firstRemoteFrame(this.store.sessionId,On.FIRST_AUDIO_DECODE,vr.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=t=>{var r;let n=Array.from(Bo(r=this.remoteUserMap).call(r)).find(i=>i._audioSSRC===t);n&&Te.firstRemoteFrame(this.store.sessionId,On.FIRST_AUDIO_RECEIVED,vr.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(t,r,n)=>{this.reportVideoFirstFrameDecoded(t,r,n)},e.onFirstVideoReceived=t=>{var r;let n=Array.from(Bo(r=this.remoteUserMap).call(r)).find(i=>i._videoSSRC===t);n&&Te.firstRemoteFrame(this.store.sessionId,On.FIRST_VIDEO_RECEIVED,vr.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(t,r)=>{let n=t.candidateType==="relay",i=r.candidateType==="relay";r.candidateType!=="unknown"&&n===i||this.emit(Me.ConnectionTypeChange,n),w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Ru(r))," -> ").concat(JSON.stringify(Ru(t)),")"))},e.onSelectedRemoteCandidateChanged=(t,r)=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Ru(r))," -> ").concat(JSON.stringify(Ru(t)),")"))},e.onFirstVideoDecodedTimeout=t=>{this.reportVideoFirstFrameDecoded(t,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(Me.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){let t=e===Ui.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,w.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===Ui.SEND_ONLY?this.restartICE(e):Yn(this,Me.RequestP2PRestartICE,{direction:Ui.SEND_ONLY}))}filterTobeMutedTracks(e){let t=[];if(this.getAllTracks().indexOf(e)===-1)return t;let r=this.localTrackMap.get(oe.LocalAudioTrack);if(e instanceof Cr&&(r==null?void 0:r.track)instanceof gn)return r.track.isActive||t.push([oe.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(n&&(t.push(n),n[0]===oe.LocalVideoTrack)){let i=this.localTrackMap.get(oe.LocalVideoLowTrack);i&&t.push([oe.LocalVideoLowTrack,i])}return t}filterTobeUnmutedTracks(e){let t=[],r=this.localTrackMap.get(oe.LocalAudioTrack);if(e instanceof Cr&&(r==null?void 0:r.track)instanceof gn)return r.track.isActive&&t.push([oe.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(n)if(n[0]===oe.LocalVideoTrack){t.push(n);let i=this.localTrackMap.get(oe.LocalVideoLowTrack);i&&t.push([oe.LocalVideoLowTrack,i])}else t.push(n);return t}createMuteMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoTrack:n=ge(r=o._hints).call(r,cr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalVideoLowTrack:n=Lt.Low}return{stream_type:n,ssrcs:a,mid:s}})}createUnmuteMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoTrack:n=ge(r=o._hints).call(r,cr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalVideoLowTrack:n=Lt.Low}return{stream_type:n,ssrcs:a,mid:s}})}filterTobeUnSubscribedTracks(e,t){let r=[],n=this.remoteUserMap.get(e);if(!n)return r;if(t){let i=n.get(t);if(!i)return r;r.push([e,{kind:t,id:i}])}else Array.from(n.entries()).forEach(i=>{let[o,a]=i;r.push([e,{kind:o,id:a}])});return r}createUnsubscribeMessage(e){let t=[];return e.forEach(r=>{let[n,{kind:i,id:o}]=r;switch(i){case xe.VIDEO:return void(n._videoSSRC&&t.push({stream_type:xe.VIDEO,ssrcId:n._videoSSRC}));case xe.AUDIO:return void(n._audioSSRC&&t.push({stream_type:xe.AUDIO,ssrcId:n._audioSSRC}))}}),t}withdrawRemoteTracks(e){e.forEach(t=>{let[r,{kind:n}]=t,i=this.remoteUserMap.get(r);i&&(i.delete(n),Array.from(i.entries()).length===0&&this.remoteUserMap.delete(r))})}async updateBitrateLimit(e){let t=this.localTrackMap.get(oe.LocalVideoTrack),r=this.localTrackMap.get(oe.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),r&&e.low_stream_uplink&&await r.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){let e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return e!=="connected"&&t!=="connected"}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof Cr){let r=this.filterTobeUnmutedTracks(e[t]);if(r.length===0)continue;let n=this.createUnmuteMessage(r);return void await Jt(this,Me.RequestUnmuteLocal,n)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter(e=>{let[,{ssrcs:t}]=e;return!!t}),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!((t=this.recvConnection)===null||t===void 0||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Me.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(Me.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await jn(CL(this.dtlsFailedCount,Yr)),this.emit(Me.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(oe.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof ir)}throwIfTrackTypeNotMatch(e){if(e.filter(t=>t instanceof ir).length>1)throw new J(O.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(t=>t instanceof Cr).length>1&&(e.some(t=>t instanceof Cr&&t._bypassWebAudio)||!Ct().webAudioMediaStreamDest))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(let t of e){if(t instanceof ir&&this.pendingLocalTracks.some(r=>r instanceof ir))throw new J(O.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof Cr&&this.pendingLocalTracks.some(r=>r instanceof Cr)&&(!Ct().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some(r=>r instanceof Cr&&r._bypassWebAudio)))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){let r=!L("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ct().supportDualStreamEncoding,n=_E(_E({},{width:160,height:120,framerate:15,bitrate:50}),t),i;i=r?e._mediaStreamTrack.clone():Ik(e,n);let o=er(8,"track-low-"),a=new ir(i,_E(_E({},r&&{scaleResolutionDownBy:pk(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,o);return a.on(hh.TRANSCEIVER_UPDATED,s=>{e._updateRtpTransceiver(s,dm.LOW_STREAM)}),a._hints.push(cr.LOW_STREAM),e.addListener(be.NEED_CLOSE,()=>{a.close()}),a}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,r,n){var i;let o=Array.from(Bo(i=this.remoteUserMap).call(i)).find(a=>a._videoSSRC===e);if(o){n||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());let a=this.store.keyMetrics,s=a.subscribe.find(l=>l.userId===o.uid&&l.type==="video");Te.firstRemoteVideoDecode(this.store.sessionId,On.FIRST_VIDEO_DECODE,vr.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:r,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:a.requestAPEnd||0,apStart:a.requestAPStart||0,joinGwEnd:a.joinGatewayEnd||0,joinGwStart:a.joinGatewayStart||0,pcEnd:a.peerConnectionEnd||0,pcStart:a.peerConnectionStart||0,subscriberEnd:(s==null?void 0:s.subscribeEnd)||0,subscriberStart:(s==null?void 0:s.subscribeStart)||0,videoAddNotify:(s==null?void 0:s.streamAdded)||0,state:n?1:0})}}async remoteMediaSsrcChanged(e,t,r){if(!this.recvConnection)return!1;let n=this.remoteUserMap.get(e);if(!n)return!1;let i=n.get(t);if(!i)return!1;let o=await this.recvConnection.getRemoteSSRC(i);return o!==void 0&&o!==r}isPreSubScribe(e){return!1}async publishDataChannel(e){throw new J(O.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new J(O.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new J(O.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new J(O.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new J(O.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new J(O.NOT_SUPPORTED)}async preConnect(e){throw new J(O.NOT_SUPPORTED)}getEstablishParams(){throw new J(O.NOT_SUPPORTED)}async reSubscribe(e){throw new J(O.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new J(O.NOT_SUPPORTED)}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(e=>{let[t,{track:r}]=e;t===oe.LocalVideoLowTrack?r._updateRtpTransceiver(void 0,dm.LOW_STREAM):r._updateRtpTransceiver(void 0)})}},we(dr.prototype,"p2pConnect",[B$],Object.getOwnPropertyDescriptor(dr.prototype,"p2pConnect"),dr.prototype),we(dr.prototype,"unpublish",[$$],Object.getOwnPropertyDescriptor(dr.prototype,"unpublish"),dr.prototype),we(dr.prototype,"unpublishLowStream",[H$],Object.getOwnPropertyDescriptor(dr.prototype,"unpublishLowStream"),dr.prototype),we(dr.prototype,"subscribe",[z$],Object.getOwnPropertyDescriptor(dr.prototype,"subscribe"),dr.prototype),we(dr.prototype,"mockSubscribe",[G$],Object.getOwnPropertyDescriptor(dr.prototype,"mockSubscribe"),dr.prototype),we(dr.prototype,"unsubscribe",[W$],Object.getOwnPropertyDescriptor(dr.prototype,"unsubscribe"),dr.prototype),we(dr.prototype,"muteRemote",[K$],Object.getOwnPropertyDescriptor(dr.prototype,"muteRemote"),dr.prototype),we(dr.prototype,"unmuteRemote",[q$],Object.getOwnPropertyDescriptor(dr.prototype,"unmuteRemote"),dr.prototype),we(dr.prototype,"hasRemoteMediaWithLock",[Y$],Object.getOwnPropertyDescriptor(dr.prototype,"hasRemoteMediaWithLock"),dr.prototype),we(dr.prototype,"disconnectForReconnect",[X$],Object.getOwnPropertyDescriptor(dr.prototype,"disconnectForReconnect"),dr.prototype),we(dr.prototype,"remoteMediaSsrcChanged",[J$],Object.getOwnPropertyDescriptor(dr.prototype,"remoteMediaSsrcChanged"),dr.prototype),dr);function Ps(e){return function(t,r,n){let i=t[r];if(typeof i!="function")throw new Error("Cannot use mutex on object property.");return n.value=async function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];switch(e){case Us.SEND_ONLY:{let l=await this.sendMutex.lock("From P2PChannel2.".concat(r));try{return await i.apply(this,a)}finally{l()}}case Us.RECEIVE_ONLY:{let l=await this.recvMutex.lock("From P2PChannel2.".concat(r));try{return await i.apply(this,a)}finally{l()}}default:{let l=await this.sendMutex.lock("From P2PChannel2.".concat(r)),c=await this.recvMutex.lock("From P2PChannel2.".concat(r));try{return await i.apply(this,a)}finally{l(),c()}}}},n}}function Z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z$(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var nre=class Ak{constructor(t){R(this,"store",void 0),R(this,"onStatsException",void 0),R(this,"onUploadPublishDuration",void 0),R(this,"onStatsChanged",void 0),R(this,"localStats",new Map),R(this,"remoteStats",new Map),R(this,"updateStatsInterval",void 0),R(this,"trafficStats",void 0),R(this,"trafficStatsPeerList",[]),R(this,"uplinkStats",void 0),R(this,"exceptionMonitor",void 0),R(this,"p2pChannel",void 0),R(this,"scalabilityMode",dk.L1T1),R(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=t,this.exceptionMonitor=new V6e,this.exceptionMonitor.on("exception",(r,n,i)=>{this.onStatsException&&this.onStatsException(r,n,i)})}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(oe.LocalAudioTrack)||xd({},yk)}getLocalVideoTrackStats(){return this.localStats.get(oe.LocalVideoTrack)||xd({},vk)}getRemoteAudioTrackStats(t){let r=(o,a)=>{if(!this.trafficStats)return a;let s=this.trafficStats.peer_delay.find(l=>l.peer_uid===o);return s&&(a.publishDuration=s.B_ppad+(Date.now()-this.trafficStats.timestamp)),a},n={};if(t){var i;let o=(i=this.remoteStats.get(t))===null||i===void 0?void 0:i.audioStats;o&&(n[t]=r(t,o))}else Array.from(this.remoteStats.entries()).forEach(o=>{let[a,{audioStats:s}]=o;s&&(n[a]=r(a,s))});return n}getRemoteNetworkQualityStats(t){let r={};if(t){var n;let i=(n=this.remoteStats.get(t))===null||n===void 0?void 0:n.networkStats;i&&(r[t]=i)}else Array.from(this.remoteStats.entries()).forEach(i=>{let[o,{networkStats:a}]=i;a&&(r[o]=a)});return r}getRemoteVideoTrackStats(t){let r=(o,a)=>{if(!this.trafficStats)return a;let s=this.trafficStats.peer_delay.find(l=>l.peer_uid===o);return s&&(a.publishDuration=s.B_ppvd+(Date.now()-this.trafficStats.timestamp)),a},n={};if(t){var i;let o=(i=this.remoteStats.get(t))===null||i===void 0?void 0:i.videoStats;o&&(n[t]=r(t,o))}else Array.from(this.remoteStats.entries()).forEach(o=>{let[a,{videoStats:s}]=o;s&&(n[a]=r(a,s))});return n}getRTCStats(){let t=0,r=0,n=0,i=0,o=this.localStats.get(oe.LocalAudioTrack);o&&(t+=o.sendBytes,r+=o.sendBitrate);let a=this.localStats.get(oe.LocalVideoTrack);a&&(t+=a.sendBytes,r+=a.sendBitrate);let s=this.localStats.get(oe.LocalVideoLowTrack);s&&(t+=s.sendBytes,r+=s.sendBitrate),this.remoteStats.forEach(c=>{let{audioStats:u,videoStats:h}=c;u&&(n+=u.receiveBytes,i+=u.receiveBitrate),h&&(n+=h.receiveBytes,i+=h.receiveBitrate)});let l=1;return this.trafficStats&&(l+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:l,SendBitrate:r,SendBytes:t,RecvBytes:n,RecvBitrate:i,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(t){this.localStats.set(t,void 0)}removeLocalStats(t){t?this.localStats.delete(t):this.localStats.clear()}addRemoteStats(t){this.remoteStats.set(t,{})}removeRemoteStats(t){t?this.remoteStats.delete(t):this.remoteStats.clear()}addP2PChannel(t){this.p2pChannel=t}updateTrafficStats(t){t.peer_delay=t.peer_delay.filter(r=>r.B_ppad!==void 0||r.B_ppvd!==void 0),t.peer_delay.filter(r=>this.trafficStatsPeerList.indexOf(r.peer_uid)===-1).forEach(r=>{var n;let i=(n=this.p2pChannel)===null||n===void 0?void 0:n.getRemoteMedia(r.peer_uid),o=i!=null&&i.videoSSRC?ni.measureFromSubscribeStart(this.store.clientId,i.videoSSRC):0,a=i!=null&&i.audioSSRC?ni.measureFromSubscribeStart(this.store.clientId,i.audioSSRC):0;r.B_ppad!==void 0&&r.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(r.peer_uid,r.B_ppad,r.B_ppvd,o>a?o:a),this.trafficStatsPeerList.push(r.peer_uid))}),this.trafficStats=t}updateUplinkStats(t){this.uplinkStats&&this.uplinkStats.B_fir!==t.B_fir&&w.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(t.B_fir)),this.uplinkStats=t}static isRemoteVideoFreeze(t,r,n){if(!t)return!1;let i=!!n&&r.framesDecodeFreezeTime>n.framesDecodeFreezeTime,o=!n||r.framesDecodeCount>n.framesDecodeCount;return i||!o}static isRemoteAudioFreeze(t){return!!t&&t._isFreeze()}isLocalVideoFreeze(t){return!(!t.inputFrame||!t.sentFrame)&&t.inputFrame.frameRate>5&&t.sentFrame.frameRate<3}updateLocalStats(t){Array.from(this.localStats.entries()).forEach(r=>{let[n,i]=r;switch(n){case oe.LocalVideoTrack:case oe.LocalVideoLowTrack:{let a=i,s=xd({},vk),l=t.getStats(),c=t.getLocalMedia(n);if(l){let u=l.videoSend.find(h=>h.ssrc===(c==null?void 0:c.ssrcs[0].ssrcId));if(u){let h=t.getLocalVideoSize(),f=t.getEncoderConfig(oe.LocalVideoTrack);u.codec!=="H264"&&u.codec!=="H265"&&u.codec!=="VP8"&&u.codec!=="VP9"&&u.codec!=="AV1X"&&u.codec!=="AV1"||(s.codecType=u.codec),s.sendBytes=u.bytes,s.sendBitrate=a?8*Math.max(0,s.sendBytes-a.sendBytes):0,u.inputFrame?(s.captureFrameRate=u.inputFrame.frameRate,s.captureResolutionHeight=u.inputFrame.height,s.captureResolutionWidth=u.inputFrame.width):h&&(s.captureResolutionWidth=h.width,s.captureResolutionHeight=h.height),u.sentFrame?(s.sendFrameRate=u.sentFrame.frameRate,s.sendResolutionHeight=u.sentFrame.height,s.sendResolutionWidth=u.sentFrame.width):h&&(s.sendResolutionWidth=h.width,s.sendResolutionHeight=h.height),u.avgEncodeMs&&(s.encodeDelay=u.avgEncodeMs),f&&f.bitrateMax&&(s.targetSendBitrate=1e3*f.bitrateMax),s.sendPackets=u.packets,s.sendPacketsLost=u.packetsLost,s.sendJitterMs=u.jitterMs,s.sendRttMs=u.rttMs,s.totalDuration=a?a.totalDuration+1:1,s.totalFreezeTime=a?a.totalFreezeTime:0,this.isLocalVideoFreeze(u)&&(s.totalFreezeTime+=1),u.scalabilityMode&&this.scalabilityMode!==u.scalabilityMode&&(w.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(u.scalabilityMode)),this.scalabilityMode=u.scalabilityMode)}this.trafficStats&&(s.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var o;this.localStats.set(n,s),((a==null?void 0:a.sendResolutionWidth)!==s.sendResolutionWidth||(a==null?void 0:a.sendResolutionHeight)!==s.sendResolutionHeight)&&((o=this.onStatsChanged)===null||o===void 0||o.call(this,"resolution",{width:s.sendResolutionWidth,height:s.sendResolutionHeight})),s&&c&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,c.track,s);break}case oe.LocalAudioTrack:{let a=i,s=xd({},yk),l=t.getStats(),c=t.getLocalMedia(n);if(l){let u=l.audioSend.find(h=>h.ssrc===(c==null?void 0:c.ssrcs[0].ssrcId));if(u){if(u.codec!=="opus"&&u.codec!=="aac"&&u.codec!=="PCMU"&&u.codec!=="PCMA"&&u.codec!=="G722"||(s.codecType=u.codec),u.inputLevel)s.sendVolumeLevel=Math.round(32767*u.inputLevel);else{let h=t.getLocalAudioVolume();h&&(s.sendVolumeLevel=Math.round(32767*h))}s.sendBytes=u.bytes,s.sendPackets=u.packets,s.sendPacketsLost=u.packetsLost,s.sendJitterMs=u.jitterMs,s.sendRttMs=u.rttMs,s.sendBitrate=a?8*Math.max(0,s.sendBytes-a.sendBytes):0}}this.trafficStats&&(s.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(oe.LocalAudioTrack,s),s&&c&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,c.track,s);break}}})}updateRemoteStats(t){Array.from(this.remoteStats.entries()).forEach(r=>{var n,i;let[o,{videoStats:a,audioStats:s,videoPcStats:l}]=r,c=s,u=a,h=l,f=xd({},hte),p=xd({},fte),m=xd({},y6e),{audioTrack:g,videoTrack:y,audioSSRC:v,videoSSRC:b}=t.getRemoteMedia(o),_;_=t instanceof To?t.getStats(!0):t.getStats();let S=(n=_)===null||n===void 0?void 0:n.audioRecv.find(D=>D.ssrc===v),I=(i=_)===null||i===void 0?void 0:i.videoRecv.find(D=>D.ssrc===b),A=this.trafficStats&&this.trafficStats.peer_delay.find(D=>D.peer_uid===o);if(S&&(S.codec!=="opus"&&S.codec!=="aac"&&S.codec!=="PCMU"&&S.codec!=="PCMA"&&S.codec!=="G722"||(f.codecType=S.codec),S.outputLevel?f.receiveLevel=Math.round(32767*S.outputLevel):g&&(f.receiveLevel=Math.round(32767*g.getVolumeLevel())),f.receiveBytes=S.bytes,f.receivePackets=S.packets,f.receivePacketsLost=S.packetsLost,f.receivePacketsDiscarded=S.packetsDiscarded,f.packetLossRate=f.receivePacketsLost/(f.receivePackets+f.receivePacketsLost),f.receiveBitrate=c?8*Math.max(0,f.receiveBytes-c.receiveBytes):0,f.totalDuration=c?c.totalDuration+1:1,f.totalFreezeTime=c?c.totalFreezeTime:0,f.freezeRate=f.totalFreezeTime/f.totalDuration,f.receiveDelay=S.jitterBufferMs,f.totalDuration>10&&Ak.isRemoteAudioFreeze(g)&&(f.totalFreezeTime+=1)),I){I.codec!=="H264"&&I.codec!=="H265"&&I.codec!=="VP8"&&I.codec!=="VP9"&&I.codec!=="AV1X"&&I.codec!=="AV1"||(p.codecType=I.codec),p.receiveBytes=I.bytes,p.receiveBitrate=u?8*Math.max(0,p.receiveBytes-u.receiveBytes):0,p.decodeFrameRate=I.decodeFrameRate<0?0:I.decodeFrameRate,p.renderFrameRate=I.decodeFrameRate<0?0:I.decodeFrameRate,I.outputFrame&&(p.renderFrameRate=I.outputFrame.frameRate),I.receivedFrame?(p.receiveFrameRate=I.receivedFrame.frameRate,p.receiveResolutionHeight=I.receivedFrame.height,p.receiveResolutionWidth=I.receivedFrame.width):y&&(p.receiveResolutionHeight=y._videoHeight||0,p.receiveResolutionWidth=y._videoWidth||0),I.framesRateFirefox!==void 0&&(p.receiveFrameRate=Math.round(I.framesRateFirefox)),p.receivePackets=I.packets,p.receivePacketsLost=I.packetsLost,p.packetLossRate=p.receivePacketsLost/(p.receivePackets+p.receivePacketsLost),p.totalDuration=u?u.totalDuration+1:1,p.totalFreezeTime=u?u.totalFreezeTime:0,p.receiveDelay=I.jitterBufferMs||0;let D=!!b&&t.getRemoteVideoIsReady(b);y&&D&&Ak.isRemoteVideoFreeze(y,I,h)&&(p.totalFreezeTime+=1),p.freezeRate=p.totalFreezeTime/p.totalDuration}A&&(f.end2EndDelay=A.B_ad,p.end2EndDelay=A.B_vd,f.transportDelay=A.B_ed,p.transportDelay=A.B_ed,f.currentPacketLossRate=A.B_ealr4/100,p.currentPacketLossRate=A.B_evlr4/100,m.uplinkNetworkQuality=A.B_punq?A.B_punq:0,m.downlinkNetworkQuality=A.B_pdnq?A.B_pdnq:0),this.remoteStats.set(o,{audioStats:f,videoStats:p,videoPcStats:I,networkStats:m}),g&&this.exceptionMonitor.setRemoteAudioStats(g,f),y&&this.exceptionMonitor.setRemoteVideoStats(y,p)})}},ire=class{constructor(){R(this,"destChannelMediaInfos",new Map),R(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){t6(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){t6(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){fC(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}};function eH(e){if(!(e instanceof ire))return new q(O.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();let t=e.getSrcChannelMediaInfo(),r=e.getDestChannelMediaInfo();if(!t)return new q(O.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if(r.size===0)return new q(O.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}function tH(e){var t={},r=!1;function n(i,o){return r=!0,{done:!1,value:new GL(o=new xk(function(a){a(e[i](o))}),1)}}return t[sp!==void 0&&dee||"@@iterator"]=function(){return this},t.next=function(i){return r?(r=!1,i):n("next",i)},typeof e.throw=="function"&&(t.throw=function(i){if(r)throw r=!1,i;return n("throw",i)}),typeof e.return=="function"&&(t.return=function(i){return r?(r=!1,i):n("return",i)}),t}var o8e=Ur(Yte);function rH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Xt;function iH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Fg=(Xt=class iy extends ete{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map(t=>t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").filter(t=>{var r;return ge(r=Object.keys(hC)).call(r,t)}))]}constructor(t,r){super(t,r),R(this,"store",void 0),R(this,"peerConnection",void 0),R(this,"remoteSDP",void 0),R(this,"initialOffer",void 0),R(this,"statsFilter",void 0),R(this,"useRTX",!1),R(this,"localCapabilities",void 0),R(this,"localCandidateCount",0),R(this,"allCandidatesReceived",!1),R(this,"establishPromise",void 0),R(this,"mutex",new ai("P2PConnection-mutex")),this.store=r,this.peerConnection=new RTCPeerConnection(iy.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=KL(this.peerConnection,L("STATS_UPDATE_INTERVAL"),void 0,Ir()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{let t=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!t.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let r=Iu(t.sdp),n=Vv(t.sdp,{filterRTX:!this.useRTX,filterVideoFec:L("FILTER_VIDEO_FEC"),filterAudioFec:L("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=n,this.initialOffer=t,wE(wE({},r),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:n},offerSDP:t.sdp})}catch(t){throw new J(O.GET_LOCAL_CONNECTION_PARAMS_FAILED,t.toString())}}async updateRemoteConnect(){}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(n){R(this,"sessionDesc",void 0),R(this,"localCapabilities",void 0),R(this,"rtpCapabilities",void 0),R(this,"candidates",void 0),R(this,"iceParameters",void 0),R(this,"dtlsParameters",void 0),R(this,"setup",void 0),R(this,"currentMidIndex",void 0),R(this,"cname",void 0),n=Br(n);let{iceParameters:i,dtlsParameters:o,candidates:a,rtpCapabilities:s,setup:l,localCapabilities:c,sdkCodec:u,cname:h}=n,f=Ln.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=s,this.candidates=a,this.iceParameters=i,this.dtlsParameters=o,this.setup=l,this.localCapabilities=c,this.cname=h;for(let p=0;p<f.mediaDescriptions.length;p++){let m=f.mediaDescriptions[p];if(m.attributes.iceUfrag=i.iceUfrag,m.attributes.icePwd=i.icePwd,m.attributes.fingerprints=o.fingerprints,m.attributes.candidates=a,m.attributes.setup=l,m.media.mediaType==="video"){m.media.fmts=s.videoCodecs.map(y=>y.payloadType.toString(10));let g=s.videoCodecs.filter(y=>{var v,b;return(v=y.rtpMap)===null||v===void 0?void 0:ge(b=v.encodingName.toLowerCase()).call(b,u)});g.length===0&&(g=s.videoCodecs),m.attributes.payloads=g,m.attributes.extmaps=s.videoExtensions}m.media.mediaType==="audio"&&(m.media.fmts=s.audioCodecs.map(g=>g.payloadType.toString(10)),m.attributes.payloads=s.audioCodecs,m.attributes.extmaps=s.audioExtensions),f.mediaDescriptions[p]=this.mungMediaDesc(m)}this.sessionDesc=f,this.currentMidIndex=f.mediaDescriptions.length-1}toString(){return Ln.print(this.sessionDesc)}send(n,i,o){let{ssrcs:a,ssrcGroups:s}=Vd(i,this.cname),l=this.sessionDesc.mediaDescriptions.find(h=>n===xe.VIDEO?h.media.mediaType==="video":h.media.mediaType==="audio"),c=a[0].attributes.label,u=a[0].attributes.mslabel;return l.attributes.ssrcs=l.attributes.ssrcs.concat(a),l.attributes.ssrcGroups=l.attributes.ssrcGroups.concat(s),{id:c,mslabel:u}}batchSend(n){return n.map(i=>{let{kind:o,ssrcMsg:a}=i;return this.send(o,a,void 0)})}stopSending(n){this.sessionDesc.mediaDescriptions.forEach(i=>{let o=[],a=[],s=[];i.attributes.ssrcs.forEach(l=>{ge(n).call(n,l.attributes.label||"")?s.push(l):o.push(l)}),i.attributes.ssrcGroups.forEach(l=>{var c;ge(c=s.map(u=>u.ssrcId)).call(c,l.ssrcIds[0])||a.push(l)}),i.attributes.ssrcs=o,i.attributes.ssrcGroups=a})}mute(n){let i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(n){let i=this.sessionDesc.mediaDescriptions.find(o=>o.attributes.mid===n);if(!i)throw new Error("mediaDescription not found with ".concat(n," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}receive(n,i,o){n.forEach((a,s)=>{let l=a._mediaStreamTrack,c=this.sessionDesc.mediaDescriptions.findIndex(h=>h.attributes.mid===l.kind),u=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[c],a);this.sessionDesc.mediaDescriptions[c]=u})}stopReceiving(n){}updateCandidates(n){n===Io.TCP?this.candidates.forEach(i=>{this.candidates.findIndex(o=>o.transport==="tcp"&&o.connectionAddress===i.connectionAddress&&o.port===i.port)===-1&&this.candidates.push(nH(nH({},i),{},{foundation:"tcpcandidate",priority:Number(i.priority)-1+"",transport:"tcp",port:Number(i.port)+90+""}))}):this.candidates=this.candidates.filter(i=>i.transport!=="tcp");for(let i of this.sessionDesc.mediaDescriptions)i.attributes.candidates=this.candidates}restartICE(n){n=Br(n),this.iceParameters=n,this.sessionDesc.mediaDescriptions.forEach(i=>{i.attributes.iceUfrag=n.iceUfrag,i.attributes.icePwd=n.icePwd})}predictReceivingMids(n){let i=[];for(let o=0;o<n;o++)i.push((this.currentMidIndex+o+1).toString(10));return i}mungRecvMediaDsec(n,i){let o=Br(n);return hm(o,i),VL(o,i),o}updateRecvMedia(n,i){let o=this.sessionDesc.mediaDescriptions.findIndex(a=>a.attributes.mid===n);if(o!==-1){let a=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[o],i);this.sessionDesc.mediaDescriptions[o]=a}}bumpMid(n){this.currentMidIndex+=n}updateTrackLabel(n,i,o){let a=this.sessionDesc.mediaDescriptions.find(l=>n===xe.VIDEO?l.attributes.mid==="video":l.attributes.mid==="audio");if(a){let l=a.attributes.ssrcs.find(c=>c.attributes.label===i);var s;l&&(l.attributes.label=o,(s=l.attributes.msid)===null||s===void 0||s.replace(i,o))}}mungMediaDesc(n){let i=Br(n);return FL(i),function(o){let a=o.attributes.extmaps.find(s=>s.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");a&&o.attributes.extmaps.splice(o.attributes.extmaps.indexOf(a),1),o.attributes.payloads.forEach(s=>{let l=s.rtcpFeedbacks.findIndex(c=>c.type==="transport-cc");l!==-1&&s.rtcpFeedbacks.splice(l,1)})}(i),i}getSSRC(n){for(let i of this.sessionDesc.mediaDescriptions)for(let o of i.attributes.ssrcs)if(o.attributes.label===n)return[o]}}(wE(wE({},t),{},{rtpCapabilities:t.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));let r=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}}async updateRemoteRTPCapabilities(t,r){throw new J(O.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}getPreMedia(t){}send(t,r){var n=this;return qs(function*(){let i=yield Rt(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let o=t.map(f=>n.peerConnection.addTrack(f._mediaStreamTrack)),a=yield Rt(n.peerConnection.createOffer()),s=Ln.parse(a.sdp),l=t.map(f=>{let p=f._mediaStreamTrack,m=s.mediaDescriptions.find(g=>g.attributes.mid===p.kind);if(!m)throw new Error("Cannot extract ssrc from mediaDescription.");return function(g,y,v){let b=g.attributes.ssrcs.filter(S=>S.attributes.label===y),_=g.attributes.ssrcGroups;if(b.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(_&&b.length>1){let S=_.find(I=>I.ssrcIds.indexOf(b[0].ssrcId)!==-1);return S?[{ssrcId:S.ssrcIds[0],rtx:v?S.ssrcIds[1]:void 0}]:[{ssrcId:b[0].ssrcId}]}return[{ssrcId:b[0].ssrcId}]}(m,p.id,n.useRTX)}),c;try{c=yield l}catch(f){throw o.forEach(p=>{qn()&&p.replaceTrack(null),n.peerConnection.removeTrack(p)}),f}let u=n.mungSendOfferSDP(a.sdp,t);n.remoteSDP.receive(t,r,c);let h=n.remoteSDP.toString();return yield Rt(n.peerConnection.setLocalDescription({type:"offer",sdp:u})),yield Rt(n.applySendEncodings(o,t)),yield Rt(n.peerConnection.setRemoteDescription({type:"answer",sdp:h})),t.map((f,p)=>{let m=f._mediaStreamTrack.id;return{localSSRC:l[p],id:m}})}catch(o){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(o.toString()))}finally{i()}})()}async stopSending(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let r=this.peerConnection.getSenders().filter(o=>{var a;return t.indexOf(((a=o.track)===null||a===void 0?void 0:a.id)||"")!==-1});if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");r.map(o=>{qn()&&o.replaceTrack(null),this.peerConnection.removeTrack(o)});let n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(t);let i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(r.toString()))}}async receive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{id:o,mslabel:a}=this.remoteSDP.send(t,r,i),s=new fe((u,h)=>{let f=setTimeout(()=>{h(new Error("Cannot receive track, id: ".concat(o)))},1e4),p=m=>{let g=St();if((g.name==="Safari"&&Number(g.version)===11||Vi())&&m.track.id!==o&&m.streams[0].id===a){var y;let v=m.streams[0].getTracks()[0];return(y=this.remoteSDP)===null||y===void 0||y.updateTrackLabel(t,o,m.track.id),this.peerConnection.removeEventListener("track",p),clearTimeout(f),void u(v)}if(m.track.id===o)return this.peerConnection.removeEventListener("track",p),clearTimeout(f),void u(m.track)};this.peerConnection.addEventListener("track",p)}),l=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:l});let c=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(c),{track:await s,id:o}}catch(o){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(t);let r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}async muteRemote(t){}async unmuteRemote(t){}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let r=this.peerConnection.getSenders().filter(n=>{var i;return t.indexOf(((i=n.track)===null||i===void 0?void 0:i.id)||"")!==-1});if(r.length!==t.length)throw new Error("sender' length doesn't match mids' length.");r.map(n=>{if(qn()&&n.track)n.track.enabled=!1;else{let i=n.getParameters();i.encodings.forEach(o=>o.active=!1),n.setParameters(i)}})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(r.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let r=this.peerConnection.getSenders().filter(o=>{var a;return t.indexOf(((a=o.track)===null||a===void 0?void 0:a.id)||"")!==-1});if(r.length!==t.length)throw new Error("Senders' length doesn't match mids' length.");r.map(async o=>{if(qn()&&o.track)o.track.enabled=!0;else{let a=o.getParameters();a.encodings.forEach(s=>s.active=!0),await o.setParameters(a)}});let n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);let i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(r.toString()))}}restartICE(t){var r=this;return qs(function*(){let n=yield Rt(r.mutex.lock("From P2PConnection.restartICE"));try{if(!r.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Ct().supportPCSetConfiguration){let l=r.peerConnection.getConfiguration(),c=t===Io.RELAY?"relay":"all";l.iceTransportPolicy!==c&&(w.debug("[".concat(r.store.clientId,"] restartICE change iceTransportPolicy from [").concat(l.iceTransportPolicy,"] to [").concat(c,"]")),l.iceTransportPolicy=c,r.peerConnection.setConfiguration(l))}else if(t===Io.RELAY)return;t!==Io.RELAY&&r.remoteSDP.updateCandidates(t);let i=yield Rt(r.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let o=Iu(i.sdp),{remoteIceParameters:a}=yield o.iceParameters;r.remoteSDP.restartICE(a);let s=r.remoteSDP.toString();yield Rt(r.peerConnection.setLocalDescription(i)),yield Rt(r.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(i){w.warning("[".concat(r.store.clientId,"] restart ICE failed, abort operation"),i)}finally{n()}})()}close(){var t;this.peerConnection.close(),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[r]);this.remoteSDP.updateRecvMedia(r._mediaStreamTrack.kind,r);let o=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new J(O.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(t,r){let n=this.peerConnection.getSenders().filter(i=>{var o;return((o=i.track)===null||o===void 0?void 0:o.id)===t});n.length===1&&await this.applySendEncodings(n,[r])}setStatsRemoteVideoIsReady(t,r){this.statsFilter.setVideoIsReady2(t,r)}async replaceTrack(t,r){let n=this.peerConnection.getSenders().find(i=>{var o;return((o=i.track)===null||o===void 0?void 0:o.id)===r});n&&await n.replaceTrack(t._mediaStreamTrack)}createDataChannels(t,r){throw new J(O.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(t){throw new J(O.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t;(t=this.onICEConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=t=>{t.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},L("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){let r={iceServers:[],sdpSemantics:"plan-b"};return t.iceServers?r.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(cC(t.turnServer.servers)?r.iceServers=t.turnServer.servers:(r.iceServers&&r.iceServers.push(...iy.turnServerConfigToIceServers(t.turnServer.servers)),L("USE_TURN_SERVER_OF_GATEWAY")&&r.iceServers&&t.turnServer.serversFromGateway&&r.iceServers.push(...iy.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(n=>{n.forceturn&&(r.iceTransportPolicy="relay")}))),r}static turnServerConfigToIceServers(t){let r=[];return t.forEach(n=>{n.security?n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turns:".concat(n.turnServerURL,":").concat(n.tcpport,"?transport=tcp")}):(n.udpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.udpport,"?transport=udp")}),n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.tcpport,"?transport=tcp")}))}),r}async updateRtpSenderEncodings(t,r){var n;if(r||(r=this.peerConnection.getSenders().find(c=>{var u;return((u=c.track)===null||u===void 0?void 0:u.id)===t._mediaStreamTrack.id})),!r)return w.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(!Ct().supportSetRtpSenderParameters)return w.warn("Browser not support set rtp-sender parameters");let i={},o={};if(t instanceof ir)switch(t._optimizationMode){case"motion":i.degradationPreference="maintain-framerate";break;case"detail":i.degradationPreference="maintain-resolution";break;default:i.degradationPreference="balanced"}if(L("DSCP_TYPE")&&ed()){var a;let c=L("DSCP_TYPE");ge(a=["very-low","low","medium","high"]).call(a,c)&&(o.networkPriority=c)}let s=r.getParameters(),l=(n=s.encodings)===null||n===void 0?void 0:n[0];l&&Object.assign(l,o),Object.assign(s,i),w.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(s.encodings))),await r.setParameters(s)}async applySendEncodings(t,r){try{if(!Ct().supportSetRtpSenderParameters||t.length!==r.length)return;for(let n=0;n<t.length;n++){let i=t[n],o=r[n];i&&o&&await this.updateRtpSenderEncodings(o,i)}}catch{w.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,r){let n=Ln.parse(t);return r.forEach((i,o)=>{let a=i._mediaStreamTrack,s=n.mediaDescriptions.find(l=>l.attributes.mid===a.kind);s&&hm(s,i)}),Ln.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var r;(r=this.onFirstAudioReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var r;(r=this.onFirstVideoReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var r;(r=this.onFirstAudioDecoded)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,r,n)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,r,n)},this.statsFilter.onSelectedLocalCandidateChanged=(t,r)=>{var n;(n=this.onSelectedLocalCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,r)=>{var n;(n=this.onSelectedRemoteCandidateChanged)===null||n===void 0||n.call(this,t,r)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");let r=this.remoteSDP.batchSend(t).map((o,a)=>{let{id:s,mslabel:l}=o,{kind:c}=t[a];return new fe((u,h)=>{let f=setTimeout(()=>{h(new Error("Cannot receive track, id: ".concat(s)))},1e4),p=m=>{let g=St();if(g.name==="Safari"&&Number(g.version)===11&&m.track.id!==s&&m.streams[0].id===l){var y;let v=m.streams[0].getTracks()[0];return(y=this.remoteSDP)===null||y===void 0||y.updateTrackLabel(c,s,m.track.id),this.peerConnection.removeEventListener("track",p),clearTimeout(f),void u({track:v,id:s})}if(m.track.id===s)return this.peerConnection.removeEventListener("track",p),clearTimeout(f),void u({track:m.track,id:s})};this.peerConnection.addEventListener("track",p)})}),n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});let i=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(i),await fe.all(r)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(r.toString()))}}async getRemoteSSRC(t){if(!this.remoteSDP)return;let r=this.remoteSDP.getSSRC(t);return r==null?void 0:r[0].ssrcId}setConfiguration(t){if(Ct().supportPCSetConfiguration){let r=iy.resolvePCConfiguration(t);this.peerConnection.setConfiguration(r)}}},we(Xt.prototype,"connect",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"connect"),Xt.prototype),we(Xt.prototype,"stopSending",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"stopSending"),Xt.prototype),we(Xt.prototype,"receive",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"receive"),Xt.prototype),we(Xt.prototype,"stopReceiving",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"stopReceiving"),Xt.prototype),we(Xt.prototype,"muteRemote",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"muteRemote"),Xt.prototype),we(Xt.prototype,"unmuteRemote",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"unmuteRemote"),Xt.prototype),we(Xt.prototype,"muteLocal",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"muteLocal"),Xt.prototype),we(Xt.prototype,"unmuteLocal",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"unmuteLocal"),Xt.prototype),we(Xt.prototype,"close",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"close"),Xt.prototype),we(Xt.prototype,"updateEncoderConfig",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"updateEncoderConfig"),Xt.prototype),we(Xt.prototype,"updateSendParameters",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"updateSendParameters"),Xt.prototype),we(Xt.prototype,"replaceTrack",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"replaceTrack"),Xt.prototype),we(Xt.prototype,"getRemoteSSRC",[fa],Object.getOwnPropertyDescriptor(Xt.prototype,"getRemoteSSRC"),Xt.prototype),Xt);function fa(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,o=await i.lock("Locking from P2PConnection.".concat(t));try{for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return await n.apply(this,s)}finally{o()}},r}function oH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Vg="9",aH=4e4,a8e=class{get localCapabilities(){return Br(this._localCapabilities)}get rtpCapabilities(){return Br(this._rtpCapabilities)}get candidates(){return Br(this._candidates)}get iceParameters(){return Br(this._iceParameters)}get dtlsParameters(){return Br(this._dtlsParameters)}constructor(e){R(this,"sessionDesc",void 0),R(this,"_localCapabilities",void 0),R(this,"_rtpCapabilities",void 0),R(this,"_candidates",void 0),R(this,"_iceParameters",void 0),R(this,"_dtlsParameters",void 0),R(this,"setup",void 0),R(this,"currentMidIndex",void 0),R(this,"cname",void 0),R(this,"firefoxSsrcMidMap",new Map),e=Br(e);let{iceParameters:t,dtlsParameters:r,candidates:n,rtpCapabilities:i,setup:o,localCapabilities:a,cname:s}=e;this._rtpCapabilities=i,this._candidates=n,this._iceParameters=t,this._dtlsParameters=r,this._localCapabilities=a,this.setup=o,this.cname=s,this.sessionDesc=this.updateRemoteRTPCapabilities(i),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}preloadRemoteMedia(e){let t=this.candidates,r=this.dtlsParameters,n=this.iceParameters,i=this.rtpCapabilities.send,o=this.sessionDesc.mediaDescriptions.length-1;for(let a=1;a<e;a++){let s=2*a+2e4,l=2*a+aH,{ssrcs:c,ssrcGroups:u}=Vd([{ssrcId:s}],this.cname),{ssrcs:h,ssrcGroups:f}=Vd([{ssrcId:l,rtx:L("USE_SUB_RTX")?l+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:Vg,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map(p=>p.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:r.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:h,ssrcGroups:f,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:Vg,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map(p=>p.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:n.iceUfrag,icePwd:n.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:r.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++o)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return Ln.print(this.sessionDesc)}send(e,t,r,n){let{ssrcs:i,ssrcGroups:o}=Vd(t,this.cname,L("SYNC_GROUP")?r:void 0),a=this.findPreloadMediaDesc(i);if(a){if(Ir()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,a.attributes.mid),n&&(n.twcc||n.remb)){let s=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[s]=this.mungSendMediaDesc(a,n),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{let s=this.findAvailableMediaIndex(e,i),l;return s===-1||s===1&&(qn()||function(){let c=St();return!(c.name!==Mt.CHROME||!c.osVersion)&&Number(c.version)<=90}())||s===0&&L("USE_SUB_RTX")||kB()?(l=this.createOrRecycleSendMedia(e,i,o,"sendonly",n),this.updateBundleMids()):(l=Br(this.sessionDesc.mediaDescriptions[s]),l.attributes.direction="sendonly",l.attributes.ssrcs=i,l.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[s]=this.mungSendMediaDesc(l,n)),Ir()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,l.attributes.mid),{mid:l.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){let{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){let t=e.map(i=>{let{kind:o,ssrcMsg:a,mslabel:s}=i;return this.send(o,a,s)}),r=[],n=!1;return t.forEach(i=>{let{mid:o,needExchangeSDP:a}=i;a&&(n=!0),r.push(o)}),{mids:r,needExchangeSDP:n}}stopSending(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>r.attributes.mid&&e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach(r=>{r.attributes.mid==="0"||Ir()||kB()?r.attributes.ssrcs=[]:(r.attributes.ssrcs=[],r.attributes.direction="inactive",r.media.port="0")}),this.updateBundleMids()}mute(e){let t=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){let t=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e);if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>ge(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="inactive"})}unmuteRemote(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>ge(e).call(e,r.attributes.mid||""));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach(r=>{r.attributes.direction="recvonly"})}receive(e,t,r,n){e.forEach((i,o)=>{this.createOrRecycleRecvMedia(i,[],"recvonly",t,r,n[o])}),this.updateBundleMids()}stopReceiving(e){let t=this.sessionDesc.mediaDescriptions.filter(r=>e.indexOf(r.attributes.mid)!==-1);if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach(r=>{r.media.port="0",r.attributes.direction="inactive"}),this.updateBundleMids()}updateRemoteRTPCapabilities(e){let t=this.sessionDesc||Ln.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=e;let r=this.rtpCapabilities.send,n=this.localCapabilities.send;for(let i of t.mediaDescriptions){if(i.attributes.iceUfrag=this._iceParameters.iceUfrag,i.attributes.icePwd=this._iceParameters.icePwd,i.attributes.fingerprints=this._dtlsParameters.fingerprints,i.attributes.candidates=this._candidates,i.attributes.setup=this.setup,i.media.mediaType==="application"&&(i.attributes.sctpPort="5000"),i.media.mediaType==="video"){if(r.videoCodecs.length===0){let o=n.videoCodecs.filter(a=>{var s,l;return(s=a.rtpMap)===null||s===void 0?void 0:ge(l=s.encodingName.toLowerCase()).call(l,"vp8")})||[n.videoCodecs[0]];i.media.fmts=o.map(a=>a.payloadType.toString(10)),i.attributes.payloads=o,i.attributes.extmaps=[]}else if(i.media.fmts=r.videoCodecs.map(o=>o.payloadType.toString(10)),i.attributes.payloads=r.videoCodecs,i.attributes.extmaps=r.videoExtensions,L("PRELOAD_MEDIA_COUNT")>0){let{ssrcs:o,ssrcGroups:a}=Vd([{ssrcId:aH,rtx:L("USE_SUB_RTX")?40001:void 0}],this.cname);i.attributes.ssrcs=o,i.attributes.ssrcGroups=a}}if(i.media.mediaType==="audio"){if(r.audioCodecs.length===0){let o=n.audioCodecs.filter(a=>{var s,l;return(s=a.rtpMap)===null||s===void 0?void 0:ge(l=s.encodingName.toLowerCase()).call(l,"opus")})||[n.audioCodecs[0]];i.media.fmts=o.map(a=>a.payloadType.toString(10)),i.attributes.payloads=o,i.attributes.extmaps=[]}else if(i.media.fmts=r.audioCodecs.map(o=>o.payloadType.toString(10)),i.attributes.payloads=r.audioCodecs,i.attributes.extmaps=r.audioExtensions,fm(i),L("PRELOAD_MEDIA_COUNT")>0){let{ssrcs:o,ssrcGroups:a}=Vd([{ssrcId:2e4}],this.cname);i.attributes.ssrcs=o,i.attributes.ssrcGroups=a}}}return this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1,this.sessionDesc}updateCandidates(e){let t=this._candidates.filter(r=>r.transport==="udp");if(e===Io.TCP){if(t.length===0)return;if(L("TCP_CANDIDATE_ONLY")){let r=this._candidates.filter(n=>n.transport==="tcp");t.forEach(n=>{r.findIndex(i=>i.connectionAddress===n.connectionAddress)===-1&&r.push(tu(tu({},n),{},{foundation:"tcpcandidate",priority:Number(n.priority)-1+"",transport:"tcp",port:Number(n.port)+90+""}))}),this._candidates=r}else{let r=[];t.forEach(n=>{r.push(tu(tu({},n),{},{foundation:"tcpcandidate",priority:Number(n.priority)-1+"",transport:"tcp",port:Number(n.port)+90+""}))}),this._candidates=[...t,...r]}}else if(e===Io.RELAY){if(t.length!==0)return;{let r=this._candidates.filter(n=>n.transport==="tcp");r.forEach(n=>{t.push(tu(tu({},n),{},{foundation:"udpcandidate",priority:Number(n.priority)+1+"",transport:"udp",port:Number(n.port)-90+""}))}),this._candidates=[...t,...r]}}else t.length===0?(this._candidates.filter(r=>r.transport==="tcp").forEach(r=>{t.push(tu(tu({},r),{},{foundation:"udpcandidate",priority:Number(r.priority)+1+"",transport:"udp",port:Number(r.port)-90+""}))}),this._candidates=t):this._candidates=this._candidates.filter(r=>r.transport!=="tcp");for(let r of this.sessionDesc.mediaDescriptions)r.attributes.candidates=this.candidates}restartICE(e){e=Br(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach(t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd})}predictReceivingMids(e){let t=[];for(let r=0;r<e;r++)t.push((this.currentMidIndex+r+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex(r=>{let n=r.media.mediaType===e&&r.media.port!=="0"&&(r.attributes.direction==="sendonly"||r.attributes.direction==="sendrecv")&&r.attributes.ssrcs.length===0;if(Ir()){if(n){let i=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(i||r.attributes.mid!=="0"&&r.attributes.mid!=="1")||!(!i||i!==r.attributes.mid)}return!1}return n})}createOrRecycleDataChannel(){for(let r of this.sessionDesc.mediaDescriptions)if(r.media.mediaType==="application")return{mediaDesc:r,needExchangeSDP:!1};this.currentMidIndex+=1;let e="".concat(this.currentMidIndex),t={media:{mediaType:"application",port:Vg,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(e),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,r,n,i,o){let a=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,l=Ly(a,s,this.localCapabilities.send,a===xe.VIDEO?n:i),c=a===xe.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;let u="".concat(this.currentMidIndex),h={media:{mediaType:a,port:Vg,protos:["UDP","TLS","RTP","SAVPF"],fmts:l.map(p=>p.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:l,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(u)}};h=this.mungRecvMediaDsec(h,e,o);let f=this.findFirstClosedMedia(a);if(f){let p=this.sessionDesc.mediaDescriptions.indexOf(f);this.sessionDesc.mediaDescriptions[p]=h}else this.sessionDesc.mediaDescriptions.push(h);return h}updateRemoteCodec(e,t,r){let n=[...new Set(this._rtpCapabilities.recv.videoCodecs.map(h=>h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||"").filter(h=>{var f;return ge(f=Object.keys(hC)).call(f,h)}))],i=new Set(t);if(n.every(h=>i.has(h)))return w.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;let o=this._rtpCapabilities.recv.videoCodecs.filter(h=>t.some(f=>{var p;return ge(p=h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||"").call(p,f)}));if(o.length===0)return w.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(n," codecs: ").concat(t)),!1;let a=[...new Set(o.map(h=>h.rtpMap&&h.rtpMap.encodingName.toLowerCase()||""))],s;if(w.debug("updateRemoteCodec, from ".concat(n," to ").concat(a)),e.length===0)s=this.sessionDesc.mediaDescriptions.filter(h=>h.media.mediaType==="video"&&h.attributes.direction==="recvonly");else if(s=this.sessionDesc.mediaDescriptions.filter(h=>h.attributes.mid&&ge(e).call(e,h.attributes.mid)&&h.attributes.direction==="recvonly"),s.length!==e.length)return w.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;if(L("USE_PUB_RTX")||L("USE_SUB_RTX")){let h=BL(o,this.rtpCapabilities.recv.videoCodecs);o.push(...h)}this._rtpCapabilities.recv.videoCodecs=o;let l=this.localCapabilities.send,c=this.rtpCapabilities.recv,u=Ly(xe.VIDEO,c,l,r);return s.forEach(h=>{let f=u.map(p=>p.payloadType.toString(10));w.debug("updateRemoteCodec mid: ".concat(h.attributes.mid,", from ").concat(h.attributes.payloads," to ").concat(u)),h.attributes.payloads=u,h.media.fmts=f}),!0}createOrRecycleSendMedia(e,t,r,n,i){let o=this.rtpCapabilities.send,a=e===xe.VIDEO?o.videoCodecs:o.audioCodecs,s=e===xe.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;let l="".concat(this.currentMidIndex),c={media:{mediaType:e,port:Vg,protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map(h=>h.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:r,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};c=this.mungSendMediaDesc(c,i);let u=this.findFirstClosedMedia(e);if(u){let h=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[h]=c}else this.sessionDesc.mediaDescriptions.push(c);return c}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(e=>e.media.port!=="0").map(e=>e.attributes.mid)}mungRecvMediaDsec(e,t,r){let n=Br(e);return FL(n),hm(n,t),VL(n,t),Vte(n),hS(n,r,this.localCapabilities.send),n}mungSendMediaDesc(e,t){let r=Br(e);return hS(r,t,this.localCapabilities.recv),fm(r),r}updateRecvMedia(e,t){let r=this.sessionDesc.mediaDescriptions.findIndex(n=>n.attributes.mid===e);if(r!==-1){let n=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],t);this.sessionDesc.mediaDescriptions[r]=n}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find(t=>Ir()?t.media.port==="0"&&t.media.mediaType===e:t.media.port==="0")}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find(t=>{var r;return((r=t.attributes)===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId)===e[0].ssrcId})}getSSRC(e){var t;return(t=this.sessionDesc.mediaDescriptions.find(r=>r.attributes.mid===e))===null||t===void 0?void 0:t.attributes.ssrcs}};function sH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var My=function(e){return e.BANDWIDTH="bandwidth",e.CPU="cpu",e.NONE="none",e.OTHER="other",e}({}),Mp=function(e){return e[e.DOWN=0]="DOWN",e[e.UP=1]="UP",e}(Mp||{}),pS=new Map;function lH(e,t,r,n){let{scale:i}=e;if(i===0&&n===Mp.UP||i>=t.length-1&&n===Mp.DOWN)return e;let o=sc(sc({},e),{},{scale:n===Mp.DOWN?++i:--i});switch(r){case"maintain-framerate":o=sc(sc({},o),t[i].motion);break;case"maintain-resolution":o=sc(sc({},o),t[i].detail);break;case"balanced":o=sc(sc({},o),t[i].balanced)}return o}function ore(e,t){if(t){let r={overUse:0,underUse:0,adaptationList:are(t)};pS.set(e,r)}else pS.delete(e)}function are(e){let t=sc({},e),{bitrateMax:r,frameRate:n,scaleResolutionDownBy:i,bitrateMin:o}=t,{MIN_FRAME_RATE:a,MAX_THRESHOLD_FRAMERATE:s,MAX_SCALE:l,BITRATE_MIN_THRESHOLD:c,BITRATE_MAX_THRESHOLD:u,BWE_SCALE_UP_THRESHOLD:h,BWE_SCALE_DOWN_THRESHOLD:f,PERF_SCALE_DOWN_THRESHOLD:p,PERF_SCALE_UP_THRESHOLD:m,BALANCE_BITRATE_FACTOR:g,BALANCE_FRAMERATE_FACTOR:y,BALANCE_RESOLUTION_FACTOR:v,MOTION_RESOLUTION_FACTOR:b,MOTION_BITRATE_FACTOR:_,DETAIL_FRAMERATE_FACTOR:S,DETAIL_BITRATE_FACTOR:I}=RL,A=Math.min(t.frameRate,s),D=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(f,1)*r),bwe_up:r,fps_down:Math.round(Math.pow(p,1)*A),fps_up:n},balanced:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:r,bitrateMin:o},motion:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:r,bitrateMin:o},detail:{scaleResolutionDownBy:1,frameRate:n,bitrateMax:r,bitrateMin:o}}];for(let M=1;M<=l;M++){let H={bwe_up:Math.round(Math.pow(h,M)*r),bwe_down:Math.round(Math.pow(f,M+1)*r),fps_up:Math.round(Math.pow(m,M)*A),fps_down:Math.round(Math.pow(p,M+1)*A)},V={scaleResolutionDownBy:i/Math.pow(v,M),frameRate:Math.max(Math.round(Math.pow(y,M)*n),a),bitrateMax:Math.max(Math.round(Math.pow(g,M)*r),u),bitrateMin:Math.max(Math.round(Math.pow(g,M)*o),c)},G={scaleResolutionDownBy:i/Math.pow(b,M),frameRate:n,bitrateMax:Math.max(Math.round(Math.pow(_,M)*r),u),bitrateMin:Math.max(Math.round(Math.pow(_,M)*o),c)},Y={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(S,M)*n),a),bitrateMax:Math.max(Math.round(Math.pow(I,M)*r),u),bitrateMin:Math.max(Math.round(Math.pow(I,M)*o),c)};D.push({scale:M,threshold:H,balanced:V,motion:G,detail:Y})}return D}function s8e(e,t,r,n,i,o){let a=pS.get(e)||{overUse:0,underUse:0,adaptationList:are(i)},{adaptationList:s}=a;pS.set(e,a);let{OVERUSE_TIMES_THRESHOLD:l,UNDERUSE_TIMES_THRESHOLD:c}=RL,{scale:u}=n,h,f;return typeof t=="number"&&t>0&&function(p,m,g,y){if(m>=g.length)return!1;let{threshold:{fps_down:v}}=g[m];return L("FORCE_AG_HIGH_FRAMERATE")&&y==="maintain-framerate"&&(v=g[0].threshold.fps_down),p<v}(t,u,s,o)&&(a.overUse++,f=My.CPU,a.overUse>l)||typeof r=="number"&&r>0&&function(p,m,g){if(m>=g.length)return!1;let{threshold:{bwe_down:y}}=g[m];return p<y}(r,u,s)&&(a.overUse++,f=My.BANDWIDTH,a.overUse>l)?(a.overUse=0,a.underUse=0,h=lH(n,s,o,Mp.DOWN),[h,f]):(typeof t=="number"&&t>0&&typeof r=="number"&&r>0&&function(p,m,g,y){if(m===0)return;let{threshold:{fps_up:v}}=g[m];return L("FORCE_AG_HIGH_FRAMERATE")&&y==="maintain-framerate"&&(v=g[1].threshold.fps_up),p>v}(t,u,s,o)&&function(p,m,g){if(m===0)return;let{threshold:{bwe_up:y}}=g[m];return p>y}(r,u,s)&&(a.underUse++,a.underUse>c&&(a.overUse=0,a.underUse=0,h=lH(n,s,o,Mp.UP),h.scale===0&&(f=My.NONE))),[h,f])}function cH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l8e(e){var t;return!!L("ENABLE_AG_ADAPTATION")&&!!(e instanceof _k||ge(t=e._hints).call(t,cr.CUSTOM_TRACK))&&(!!L("FORCE_SUPPORT_AG_ADAPTATION")||!!(function(r){let n=St();if(n.os!==yn.IOS||!n.osVersion)return!1;let i=n.osVersion.split(".");return Number(i[0])>=r}(14)&&Mee(17,4)||Lee(14)&&jee(17,4)))}var mS=new Map;function SE(e,t){let r=mS.get(e);if(r){let{timer:n}=r;window.clearTimeout(n),mS.delete(e)}t.qualityLimitationReason=My.NONE,ore(e)}var vt;function uH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Ds=(vt=class oy extends ete{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var t,r;return(t=(r=this.peerConnection.getReceivers()[0])===null||r===void 0||(r=r.transport)===null||r===void 0?void 0:r.state)!==null&&t!==void 0?t:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map(t=>t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"").filter(t=>{var r;return ge(r=Object.keys(hC)).call(r,t)}))]}constructor(t,r){super(t,r),R(this,"store",void 0),R(this,"peerConnection",void 0),R(this,"id",er(5,"connection-")),R(this,"remoteSDP",void 0),R(this,"initialOffer",void 0),R(this,"transportEventReceiver",void 0),R(this,"statsFilter",void 0),R(this,"extension",{useXR:L("USE_XR")}),R(this,"localCapabilities",void 0),R(this,"remoteCodecs",void 0),R(this,"localCandidateCount",0),R(this,"allCandidatesReceived",!1),R(this,"isPreallocation",!1),R(this,"preSSRCMap",new Map),R(this,"dataStreamChannelMap",new Map),R(this,"establishPromise",void 0),R(this,"recoveredDataChannelIds",[]),R(this,"currentDataChannelId",1),R(this,"mutex",new ai("P2PConnection-mutex")),R(this,"qualityLimitationReason",My.NONE),this.store=r,this.peerConnection=new RTCPeerConnection(oy.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=KL(this.peerConnection,L("STATS_UPDATE_INTERVAL"),void 0,Ir()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}getPreMedia(t){let r=this.preSSRCMap.get(t);if(r!==void 0){let n=this.peerConnection.getTransceivers().find(i=>i.mid===r);if(n)return{transceiver:n,track:n.receiver.track,id:r}}}async updateRemoteRTPCapabilities(t,r){if(this.remoteCodecs=r,!this.remoteSDP)return void w.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(r));if(this.remoteSDP.updateRemoteCodec(t,r,this.store.codec)){let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n);let o=this.remoteSDP.toString();i==null||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}else w.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.")}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});let t=await this.peerConnection.createOffer();if(!t.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let r=Iu(t.sdp),n=await $te({filterRTX:!L("USE_PUB_RTX")&&!L("USE_SUB_RTX"),filterVideoFec:L("FILTER_VIDEO_FEC"),filterAudioFec:L("FILTER_AUDIO_FEC"),filterVideoCodec:L("FILTER_VIDEO_CODEC")},this.extension);return this.localCapabilities=fS(n),this.initialOffer=t,pl(pl({},r),{},{rtpCapabilities:n,offerSDP:t.sdp})}catch(t){throw new J(O.GET_LOCAL_CONNECTION_PARAMS_FAILED,t.toString())}}async connect(t){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new a8e(pl(pl({},t),{},{localCapabilities:this.localCapabilities})),t.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);let r=this.remoteSDP.toString(),n=Hte(this.initialOffer.sdp,this.extension),i=this.logSDPExchange(n||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),i==null||i(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r});let o=this.peerConnection.getTransceivers()[0];if(o!=null&&o.receiver&&this.tryBindTransportEvents(o.receiver),L("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia(L("PRELOAD_MEDIA_COUNT"));let s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});let l=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(l)}let{preSSRCs:a}=t;if(Array.isArray(a)&&a.length>0){let{mids:s}=this.remoteSDP.batchSend(a.map(l=>({kind:l.kind,ssrcMsg:[{ssrcId:l.ssrcId,rtx:l.rtx}],mslabel:l.mslabel})));s.forEach((l,c)=>{this.preSSRCMap.set(a[c].ssrcId,l)}),await vE(this.peerConnection,this.remoteSDP,this.extension),w.debug("[".concat(this.store.clientId,"] [P2PConnection] pre-batchReceive exchange SDP."))}}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}}async updateRemoteConnect(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateRemoteConnect before remote SDP created");let{rtpCapabilities:r}=t;this.remoteSDP.updateRemoteRTPCapabilities(r),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);let{preSSRCs:n}=t;if(Array.isArray(n)&&n.length>0){let{mids:i}=this.remoteSDP.batchSend(n.map(o=>Object.assign({},{kind:o.kind,ssrcMsg:[{ssrcId:o.ssrcId,rtx:o.rtx}],mslabel:o.mslabel})));i.forEach((o,a)=>{this.preSSRCMap.set(n[a].ssrcId,o)})}await vE(this.peerConnection,this.remoteSDP,this.extension),w.debug("[P2PConnection] updateRemoteRTPCapabilities by exchanging SDP.")}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.updateRemoteConnect failed; ".concat(r.toString()))}}send(t,r,n){var i=this;return qs(function*(){let o=yield Rt(i.mutex.lock("From P2PConnection.send"));try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let a=[];t.forEach(g=>{let y=i.peerConnection.addTransceiver(g._mediaStreamTrack,{direction:"sendonly"});a.push(y),g._updateRtpTransceiver(y)}),Ir()&&L("SIMULCAST")===!0&&(yield Rt(i.applySimulcastForFirefox(a,t)));let s=yield Rt(i.peerConnection.createOffer()),l=i.remoteSDP.predictReceivingMids(t.length),c=i.mungSendOfferSDP(s.sdp,t,l),u=Ln.parse(c),h=l.map(g=>{let y=u.mediaDescriptions.find(v=>v.attributes.mid===g);if(!y)throw new Error("Cannot extract ssrc from mediaDescription.");return Ute(y,L("USE_PUB_RTX"))}),f;try{f=yield h}catch(g){f=[],i.remoteSDP.receive(t,r,n,f);let y=i.remoteSDP.toString();throw yield Rt(i.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield Rt(i.peerConnection.setRemoteDescription({type:"answer",sdp:y})),yield Rt(i.stopSending(l,!0)),g}i.remoteSDP.receive(t,r,n,f);let p=i.remoteSDP.toString(),m=i.logSDPExchange(c,"offer","local","send");return yield Rt(i.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield Rt(i.applySimulcastEncodings(a,t)),yield Rt(i.applySendEncodings(a,t)),m==null||m(p),yield Rt(i.peerConnection.setRemoteDescription({type:"answer",sdp:p})),a.map((g,y)=>{let v=l[y];return{localSSRC:h[y],id:v,transceiver:g}})}catch(a){throw a instanceof J?a:new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(a.toString()))}finally{o()}})()}async createDataChannels(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(t);if(n&&n.readyState==="open")w.debug("[P2PConnection] Channels are already available and can be reused directly.");else{let o=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if(typeof o!="number")throw new Error("create DataChannel error, because cannot get dc id");n=this.peerConnection.createDataChannel("datastream-channel",{id:o,negotiated:!0,ordered:!1,maxRetransmits:L("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(t,n)}r.forEach(o=>{o._updateOriginDataChannel(n)});let{needExchangeSDP:i}=this.remoteSDP.sendDataChannel();if(i){let o=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:o});let a=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(a),w.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else w.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(n){throw n instanceof J?n:new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(n.toString()))}}async stopDataChannels(t){try{let r=this.dataStreamChannelMap.get(t);return r&&(r.id&&this.recoveredDataChannelIds.push(r.id),r.close()),void this.dataStreamChannelMap.delete(t)}catch(r){throw r instanceof J?r:new J(O.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(r.toString()))}}async stopSending(t,r){let n=r?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let i=this.peerConnection.getTransceivers().filter(l=>t.indexOf(l.mid)!==-1);if(i.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");i.map(l=>{var c;SE(this.id+l.mid,this),l.direction="inactive",(c=l.stop)===null||c===void 0||c.call(l)});let o=await this.peerConnection.createOffer(),a=this.logSDPExchange(o.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(o),this.remoteSDP.stopReceiving(t);let s=this.remoteSDP.toString();a==null||a(s),await this.peerConnection.setRemoteDescription({type:"answer",sdp:s})}catch(i){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(i.toString()))}finally{n&&n()}}async receive(t,r,n,i){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));let{mid:o,needExchangeSDP:a}=this.remoteSDP.send(t,r,n,i);a&&(await vE(this.peerConnection,this.remoteSDP,this.extension),w.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP.")));let s=this.peerConnection.getTransceivers().find(l=>l.mid===o);if(!s)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:s.receiver.track,id:o,transceiver:s}}catch(o){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async batchReceive(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");let{mids:r,needExchangeSDP:n}=this.remoteSDP.batchSend(t);return n&&(await vE(this.peerConnection,this.remoteSDP,this.extension),w.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))),r.map(i=>{let o=this.peerConnection.getTransceivers().find(a=>a.mid===i);if(!o)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:o.receiver.track,id:i,transceiver:o}})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(r.toString()))}}async stopReceiving(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");t.forEach(o=>{Array.from(this.preSSRCMap.entries()).some(a=>{let[s,l]=a;if(l===o)return this.preSSRCMap.delete(s),!0})}),this.remoteSDP.stopSending(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(r.toString()))}}async muteRemote(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(t," before remote SDP created."));this.remoteSDP.mute(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(r.toString()))}}async unmuteRemote(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(t," before remote SDP created."));this.remoteSDP.unmute(t);let r=this.remoteSDP.toString(),n=this.logSDPExchange(r,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:r});let i=await this.peerConnection.createAnswer();n==null||n(i.sdp||""),await this.peerConnection.setLocalDescription(i)}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(r.toString()))}}async muteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(a=>{a.direction="inactive"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(t);let o=this.remoteSDP.toString();i==null||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(r.toString()))}}async unmuteLocal(t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let r=this.peerConnection.getTransceivers().filter(a=>a.mid&&t.indexOf(a.mid)!==-1);if(r.length!==t.length)throw new Error("Transceivers' length doesn't match mids' length.");r.map(async(a,s)=>{a.direction="sendonly"});let n=await this.peerConnection.createOffer(),i=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(t);let o=this.remoteSDP.toString();i==null||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new J(O.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(r.toString()))}}restartICE(t){var r=this;return qs(function*(){let n=yield Rt(r.mutex.lock("From P2PConnection.restartICE"));try{if(!r.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(Ct().supportPCSetConfiguration){let c=r.peerConnection.getConfiguration(),u=t===Io.RELAY?"relay":"all";c.iceTransportPolicy!==u&&(w.debug("[".concat(r.store.clientId,"] restartICE change iceTransportPolicy from [").concat(c.iceTransportPolicy,"] to [").concat(u,"]")),c.iceTransportPolicy=u,r.peerConnection.setConfiguration(c))}else if(t===Io.RELAY)return;r.remoteSDP.updateCandidates(t);let i=yield Rt(r.peerConnection.createOffer({iceRestart:!0}));if(!i.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let o=Iu(i.sdp),{remoteIceParameters:a}=yield o.iceParameters;r.remoteSDP.restartICE(a);let s=r.remoteSDP.toString(),l=r.logSDPExchange(i.sdp||"","offer","local","restartICE");r.store.descriptionStart(),yield Rt(r.peerConnection.setLocalDescription(i)),l==null||l(s),yield Rt(r.peerConnection.setRemoteDescription({type:"answer",sdp:s}))}catch(i){w.warning("[".concat(r.store.clientId,"] restart ICE failed, abort operation"),i)}finally{n()}})()}close(){var t;this.peerConnection.getTransceivers().forEach(r=>{SE(this.id+r.mid,this)}),this.preSSRCMap.clear(),this.peerConnection.close(),(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return pl(pl({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(t){return this.statsFilter.getVideoIsReady(t)}async updateEncoderConfig(t,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let n=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(n.sdp,[r],[t]);this.remoteSDP.updateRecvMedia(t,r);let o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),a==null||a(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new J(O.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(t,r){let n=this.peerConnection.getTransceivers().filter(i=>i.mid===t);n.length===1&&(this.isVP8Simulcast(r)?Ir()||await this.applySimulcastEncodings(n,[r]):await this.applySendEncodings(n,[r]))}setStatsRemoteVideoIsReady(t,r){this.statsFilter.setVideoIsReady2(t,r)}async replaceTrack(t,r){let n=this.peerConnection.getTransceivers().find(i=>i.mid===r);n&&await n.sender.replaceTrack(t._mediaStreamTrack)}async getSelectedCandidatePair(){let t=this.peerConnection.getReceivers();if(t.length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair()){let r=t[0].transport.iceTransport,{local:n,remote:i}=r.getSelectedCandidatePair();return{local:pl(pl({},Vl),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:pl(pl({},Vl),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var t;(t=this.onICEConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var t;(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=t=>{t.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,w.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},L("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){let r={iceServers:[]};return t.iceServers?r.iceServers=t.iceServers:t.turnServer&&t.turnServer.mode!=="off"&&(cC(t.turnServer.servers)?r.iceServers=t.turnServer.servers:(r.iceServers&&r.iceServers.push(...oy.turnServerConfigToIceServers(t.turnServer.servers)),L("USE_TURN_SERVER_OF_GATEWAY")&&r.iceServers&&t.turnServer.serversFromGateway&&r.iceServers.push(...oy.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),L("FORCE_TURN_TCP")?r.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach(n=>{n.forceturn&&(r.iceTransportPolicy="relay")}))),L("ENABLE_ENCODED_TRANSFORM")&&Ct().supportWebRTCEncodedTransform&&(r.encodedInsertableStreams=!0),r}static turnServerConfigToIceServers(t){let r=[];return t.forEach(n=>{n.security?n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turns:".concat(hp(n.turnServerURL),":").concat(n.tcpport,"?transport=tcp")}):(n.udpport&&!L("FORCE_TURN_TCP")&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.udpport,"?transport=udp")}),n.tcpport&&r.push({username:n.username,credential:n.password,credentialType:"password",urls:"turn:".concat(n.turnServerURL,":").concat(n.tcpport,"?transport=tcp")}))}),r}tryBindTransportEvents(t){let r=t.transport;if(r){this.transportEventReceiver=t,r.onstatechange=()=>{var i;r!=null&&r.state&&((i=this.onDTLSTransportStateChange)===null||i===void 0||i.call(this,r.state))},r.onerror=i=>{var o;(o=this.onDTLSTransportError)===null||o===void 0||o.call(this,"error"in i?i.error:i)};let n=r.iceTransport;n&&(n.onstatechange=()=>{let i=r==null?void 0:r.iceTransport.state;var o;i&&((o=this.onICETransportStateChange)===null||o===void 0||o.call(this,i))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){let{local:i,remote:o}=n.getSelectedCandidatePair();w.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol}),", remote ").concat(JSON.stringify({candidateType:o.type,protocol:o.protocol,address:o.address,port:o.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(t,r){var n,i;if(r||(r=this.peerConnection.getSenders().find(g=>g.track===t._mediaStreamTrack)),!r)return w.warn("[".concat(t.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(t))return w.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!Ct().supportSetRtpSenderParameters)return w.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");let o={},a={};switch(t._optimizationMode){case"motion":o.degradationPreference="maintain-framerate";break;case"detail":o.degradationPreference="maintain-resolution";break;case"balanced":o.degradationPreference="balanced"}let s=function(g,y){return g.getTransceivers().find(v=>v.sender.track===y||v.receiver.track===y)}(this.peerConnection,t._mediaStreamTrack),l=w6e(t);if(l8e(t)&&s&&r&&l&&this.getLocalVideoStats&&ge(n=["vp8","vp9"]).call(n,this.store.codec)){var c;let g=o.degradationPreference||(ge(c=t._hints).call(c,cr.CUSTOM_TRACK)?L("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");(function(y,v,b,_,S,I){if(SE(y,b),S(v),_!=="balanced"&&_!=="maintain-framerate"&&_!=="maintain-resolution")return;let A=-1;ore(y,v);let D=window.setInterval(()=>{let H=mS.get(y);if(!L("ENABLE_AG_ADAPTATION")||!H)return SE(y,b),void S(v);let V=I();if(V.sendPackets>0&&V.OutgoingAvailableBandwidth>0){if(A===-1)return void(A=Date.now());if(Date.now()-A<1e3)return;let G=V.sendFrameRate,Y=V.OutgoingAvailableBandwidth,[Z,$]=s8e(y,G,Y,H.adaptationConfig,v,_);$&&(b.qualityLimitationReason=$),Z&&H.adaptationConfig.scale!==Z.scale&&(w.debug("[".concat(y,"] applyAdaptation: ").concat(b.qualityLimitationReason,`
           sendFps `).concat(G,", bwe ").concat(Y,", switch from ").concat(H.adaptationConfig.scale," to ").concat(Z.scale," ")),H.adaptationConfig=rN(rN({},H.adaptationConfig),Z),S(Z))}},L("CHECK_LOCAL_STATS_INTERVAL")),M=rN({},v);mS.set(y,{timer:D,adaptationConfig:M,originConfig:v,adaptationFunc:S}),w.debug("[".concat(y,"] start adaptation, originConfig: ").concat(JSON.stringify(v),", degradationPreference: ").concat(_))})(this.id+s.mid,l,this,g,y=>{r&&this.updateAdaptation(r,y)},this.getLocalVideoStats.bind(this))}if(t._encoderConfig){var u;let{bitrateMax:g,frameRate:y,scaleResolutionDownBy:v}=t._encoderConfig;g&&(a.maxBitrate=1e3*g),(ge(u=t._hints).call(u,cr.LOW_STREAM)||t.isUseScaleResolutionDownBy)&&(y&&(a.maxFramerate=No(y)),v&&v>=1&&(a.scaleResolutionDownBy=v))}let{maxFramerate:h}=L("ENCODER_CONFIG_LIMIT");if(h&&typeof h=="number"&&(a.maxFramerate=a.maxFramerate?Math.min(a.maxFramerate,h):h),L("DSCP_TYPE")&&ed()){var f;let g=L("DSCP_TYPE");ge(f=["very-low","low","medium","high"]).call(f,g)&&(a.networkPriority=g)}let p=r.getParameters(),m=(i=p.encodings)===null||i===void 0?void 0:i[0];Ir()&&!m&&(o.encodings=[a]),m&&Object.assign(m,a),Object.assign(p,o),w.debug("[".concat(t.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(p.encodings))),await r.setParameters(p),await async function(g,y,v){try{var b;if(!Ct().supportSetRtpSenderParameters||!function(D){return D==="vp9"}(g)||!L("ENABLE_SVC"))return;let _={},S={},I=y.getParameters(),A=(b=I.encodings)===null||b===void 0?void 0:b[0];S.scalabilityMode=Sk(v),A&&Object.assign(A,S),Object.assign(I,_),await y.setParameters(I),w.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: ".concat(JSON.stringify(I.encodings)))}catch(_){w.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed",_)}}(this.store.codec,r,L("SVC_MODE"))}async updateAdaptation(t,r){var n,i;if(!t)return w.debug("[updateAdaptation] no rtpSender found");if(!Ct().supportSetRtpSenderParameters)return w.debug("[updateAdaptation] Browser not support set rtp-sender parameters");let o={},{bitrateMax:a,frameRate:s,scaleResolutionDownBy:l}=r;a&&(o.maxBitrate=1e3*a),s&&(o.maxFramerate=No(s)),l&&l>=1&&ge(n=["vp8","vp9"]).call(n,this.store.codec)&&(o.scaleResolutionDownBy=l);let c=t.getParameters(),u=(i=c.encodings)===null||i===void 0?void 0:i[0];u&&Object.assign(u,o),Object.assign(c,{});try{await t.setParameters(c),w.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(c.encodings)))}catch(h){!("transport"in t)||t.transport&&t.transport.state==="connected"?this.peerConnectionState!=="connected"?w.debug("[updateAdaptation] peerConnection not connected}"):w.debug("[updateAdaptation] updateRtpSenderEncodings failed",h):w.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(t,r){try{if(!Ct().supportSetRtpSenderParameters||t.length!==r.length)return;for(let n=0;n<t.length;n++){let i=t[n],o=r[n];o instanceof ir&&!this.isVP8Simulcast(o)&&await this.updateRtpSenderEncodings(o,i.sender)}}catch{w.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(t,r,n){let i=Ln.parse(t);return r.forEach((o,a)=>{let s=n[a],l=i.mediaDescriptions.find(c=>c.attributes.mid===s);l&&(hm(l,o),Bte(l,o,this.store.codec))}),Ln.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=t=>{var r;(r=this.onFirstAudioReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoReceived=t=>{var r;(r=this.onFirstVideoReceived)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstAudioDecoded=t=>{var r;(r=this.onFirstAudioDecoded)===null||r===void 0||r.call(this,t)},this.statsFilter.onFirstVideoDecoded=(t,r,n)=>{var i;(i=this.onFirstVideoDecoded)===null||i===void 0||i.call(this,t,r,n)},this.statsFilter.onSelectedLocalCandidateChanged=(t,r)=>{var n;(n=this.onSelectedLocalCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onSelectedRemoteCandidateChanged=(t,r)=>{var n;(n=this.onSelectedRemoteCandidateChanged)===null||n===void 0||n.call(this,t,r)},this.statsFilter.onFirstVideoDecodedTimeout=t=>{var r;(r=this.onFirstVideoDecodedTimeout)===null||r===void 0||r.call(this,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(t,r){if(t.length===r.length)for(let l=0;l<t.length;l++){var n,i,o,a,s;let c=t[l],u=r[l];if(u instanceof ir&&!ge(n=u._hints).call(n,cr.LOW_STREAM)&&(i=u._encoderConfig)!==null&&i!==void 0&&i.bitrateMax&&((o=u._encoderConfig)===null||o===void 0?void 0:o.bitrateMax)>200&&(a=u._scalabilityMode)!==null&&a!==void 0&&a.numSpatialLayers&&((s=u._scalabilityMode)===null||s===void 0?void 0:s.numSpatialLayers)>1&&this.store.codec==="vp8"){let h={},f={high:1e3*(u._encoderConfig.bitrateMax-50),medium:5e4};h.encodings=[{rid:"m",active:!0,maxBitrate:f.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:f.high}];let p=c.sender.getParameters();await c.sender.setParameters(Object.assign(p,h))}}}async applySimulcastEncodings(t,r){if(!Ir()&&t.length===r.length)for(let n=0;n<t.length;n++){let i=r[n];if(i instanceof ir&&this.isVP8Simulcast(i)){let o=t[n],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4};a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}];let l=o.sender.getParameters();await o.sender.setParameters(Object.assign(l,a))}}}isVP8Simulcast(t){var r,n,i,o,a;return!!(t instanceof ir&&L("SIMULCAST")&&this.store.codec==="vp8"&&!ge(r=t._hints).call(r,cr.LOW_STREAM)&&(n=t._encoderConfig)!==null&&n!==void 0&&n.bitrateMax&&((i=t._encoderConfig)===null||i===void 0?void 0:i.bitrateMax)>200&&(o=t._scalabilityMode)!==null&&o!==void 0&&o.numSpatialLayers&&((a=t._scalabilityMode)===null||a===void 0?void 0:a.numSpatialLayers)>1)}logSDPExchange(t,r,n,i){if(L("SDP_LOGGING"))return w.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(r," SDP during P2PConnection.").concat(i,`
`),t),r==="offer"?o=>{this.logSDPExchange(o,"answer",n==="local"?"remote":"local",i)}:void 0}async getRemoteSSRC(t){if(!this.remoteSDP)return;let r=this.remoteSDP.getSSRC(t);return r&&r.length!==0?r[0].ssrcId:void 0}setConfiguration(t){if(Ct().supportPCSetConfiguration){let r=oy.resolvePCConfiguration(t);this.peerConnection.setConfiguration(r)}}},we(vt.prototype,"updateRemoteRTPCapabilities",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"updateRemoteRTPCapabilities"),vt.prototype),we(vt.prototype,"connect",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"connect"),vt.prototype),we(vt.prototype,"updateRemoteConnect",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"updateRemoteConnect"),vt.prototype),we(vt.prototype,"createDataChannels",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"createDataChannels"),vt.prototype),we(vt.prototype,"receive",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"receive"),vt.prototype),we(vt.prototype,"batchReceive",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"batchReceive"),vt.prototype),we(vt.prototype,"stopReceiving",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"stopReceiving"),vt.prototype),we(vt.prototype,"muteRemote",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"muteRemote"),vt.prototype),we(vt.prototype,"unmuteRemote",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"unmuteRemote"),vt.prototype),we(vt.prototype,"muteLocal",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"muteLocal"),vt.prototype),we(vt.prototype,"unmuteLocal",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"unmuteLocal"),vt.prototype),we(vt.prototype,"close",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"close"),vt.prototype),we(vt.prototype,"updateEncoderConfig",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"updateEncoderConfig"),vt.prototype),we(vt.prototype,"updateSendParameters",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"updateSendParameters"),vt.prototype),we(vt.prototype,"replaceTrack",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"replaceTrack"),vt.prototype),we(vt.prototype,"updateAdaptation",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"updateAdaptation"),vt.prototype),we(vt.prototype,"getRemoteSSRC",[Wi],Object.getOwnPropertyDescriptor(vt.prototype,"getRemoteSSRC"),vt.prototype),vt);function Wi(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,o=await i.lock("From P2PConnection.".concat(t));try{for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return await n.apply(this,s)}finally{o()}},r}var dt;function dH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ml(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hH(e){var t,r,n,i=2;for(typeof Symbol<"u"&&(r=o8e,n=Symbol.iterator);i--;){if(r&&(t=e[r])!=null)return t.call(e);if(n&&(t=e[n])!=null)return new R_(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function R_(e){function t(r){if(Object(r)!==r)return fe.reject(new TypeError(r+" is not an object."));var n=r.done;return fe.resolve(r.value).then(function(i){return{value:i,done:n}})}return R_=function(r){this.s=r,this.n=r.next},R_.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(r){var n=this.s.return;return n===void 0?fe.resolve({value:r,done:!0}):t(n.apply(this.s,arguments))},throw:function(r){var n=this.s.return;return n===void 0?fe.reject(r):t(n.apply(this.s,arguments))}},new R_(e)}var TE=(dt=class extends _r{get state(){return this._state}set state(e){let t=this._state;this._state=e,this.emit(Me.StateChange,t,this._state)}constructor(e,t){super(),R(this,"isPlanB",void 0),R(this,"store",void 0),R(this,"statsUploader",void 0),R(this,"connection",void 0),R(this,"localTrackMap",new Map),R(this,"remoteUserMap",new Map),R(this,"localDataChannels",[]),R(this,"remoteDataChannelMap",new Map),R(this,"pendingLocalTracks",[]),R(this,"pendingRemoteTracks",[]),R(this,"pendingLocalDataChannels",[]),R(this,"pendingRemoteDataChannels",[]),R(this,"statsCollector",void 0),R(this,"shouldForwardP2PCreation",void 0),R(this,"iceFailedCount",0),R(this,"dtlsFailedCount",0),R(this,"mutex",new ai("P2PChannel-mutex")),R(this,"_state",Dt.Disconnected),R(this,"_pcStatsUploadType",L("NEW_ICE_RESTART")?ec.FIRST_CONNECTION:ec.OLD_FIRST_CONNECTION),R(this,"_isInRestartIce",!1),R(this,"_isStartRestartIce",!1),R(this,"_restartStates",["disconnected","failed"]),R(this,"_restartTimer",void 0),R(this,"_isFirstConnected",!0),R(this,"handleMuteLocalTrack",async(r,n,i)=>{let o=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==Dt.Connected)return void i(new J(O.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));let a=this.filterTobeMutedTracks(r);if(a.length===0)return void n();let s=a.find(c=>c[0]==="videoLowTrack");s&&s[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(a.map(c=>{let[,{id:u}]=c;return u}));let l=this.createMuteMessage(a);await Jt(this,Me.RequestMuteLocal,l),n()}catch(a){i(a)}finally{o()}}),R(this,"handleUnmuteLocalTrack",async(r,n,i)=>{let o=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==Dt.Connected)return void i(new J(O.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));let a=this.filterTobeUnmutedTracks(r);if(a.length===0)return void n();let s=a.find(c=>c[0]==="videoLowTrack");if(s){let c=s[1];if(c.track._originMediaStreamTrack.stop(),!L("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ct().supportDualStreamEncoding){let u=r._mediaStreamTrack.clone();c.track._mediaStreamTrack=u,c.track._originMediaStreamTrack=u}else{let u=Ik(r,Lv(this,Me.RequestLowStreamParameter));c.track._mediaStreamTrack=u,c.track._originMediaStreamTrack=u}await new fe((u,h)=>{this.handleReplaceTrack(c.track,u,h,!0)})}await this.connection.unmuteLocal(a.map(c=>{let[,{id:u}]=c;return u}));let l=this.createUnmuteMessage(a);await Jt(this,Me.RequestUnmuteLocal,l),n()}catch(a){i(a)}finally{o()}}),R(this,"handleUpdateVideoEncoder",async(r,n,i)=>{let o=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{let a=this.localTrackMap.get(oe.LocalVideoTrack);if(!this.connection||!a||a.track!==r||this.state!==Dt.Connected)return void n();let{id:s,track:l}=a;await this.connection.updateSendParameters(s,l),await this.connection.updateEncoderConfig(s,l),this.emit(Me.UpdateVideoEncoder,l),n()}catch(a){i(a)}finally{o()}}),R(this,"handleUpdateVideoSendParameters",async(r,n,i)=>{let o=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{let a=this.localTrackMap.get(oe.LocalVideoTrack);if(!this.connection||!a||a.track!==r||this.state!==Dt.Connected)return void n();let{id:s,track:l}=a;await this.connection.updateSendParameters(s,l),n()}catch(a){i(a)}finally{o()}}),R(this,"handleReplaceMixingTrack",async(r,n,i,o)=>{if(!this.connection||this.state!==Dt.Connected)return void n();let a=tN([r]),s;w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(a.getTrackId(),"]")),typeof o=="boolean"&&o||(s=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(r,a),n()}catch(c){i(c)}finally{var l;(l=s)===null||l===void 0||l()}}),R(this,"handleReplaceTrack",async(r,n,i,o)=>{let a;w.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(r.getTrackId(),"]")),typeof o=="boolean"&&o||(a=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var s;let c=Array.from(this.localTrackMap.entries()).find(u=>{let[,{track:h}]=u;return r===h});if(!this.connection||!c||this.state!==Dt.Connected)return void n();if(await((s=this.connection)===null||s===void 0?void 0:s.replaceTrack(r,c[1].id)),this.isPlanB){let u=c[1];u.id=r._mediaStreamTrack.id,this.localTrackMap.set(c[0],u)}if(c[0]===oe.LocalVideoTrack&&!L("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ct().supportDualStreamEncoding){let u=this.localTrackMap.get(oe.LocalVideoLowTrack);if(u){let h=r._mediaStreamTrack.clone();u.track._originMediaStreamTrack.stop(),u.track._mediaStreamTrack=h,u.track._originMediaStreamTrack=h,await new fe((f,p)=>{this.handleReplaceTrack(u.track,f,p,!0)})}}n()}catch(c){i(c)}finally{var l;(l=a)===null||l===void 0||l()}}),R(this,"handleGetRTCStats",r=>{r(this.statsCollector.getRTCStats())}),R(this,"handleGetLocalVideoStats",r=>{r(this.statsCollector.getLocalVideoTrackStats())}),R(this,"handleGetLocalAudioStats",r=>{r(this.statsCollector.getLocalAudioTrackStats())}),R(this,"handleGetRemoteVideoStats",r=>this.statsCollector.getRemoteVideoTrackStats(r.uid)[r.uid]),R(this,"handleGetRemoteAudioStats",r=>this.statsCollector.getRemoteAudioTrackStats(r.uid)[r.uid]),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new rre(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!Ct().supportUnifiedPlan||L("CHROME_FORCE_PLAN_B")&&ed(),this.shouldForwardP2PCreation=L("FORWARD_P2P_CREATION")&&Ct().supportPCSetConfiguration&&SL(),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new Fg({},this.store):new Ds({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e){var t;this.state=Dt.New;let r=this.shouldForwardP2PCreation&&((t=this.connection)===null||t===void 0?void 0:t.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!r||(r&&this.connection&&(w.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.isPlanB?new Fg(e,this.store):new Ds(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new J(O.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=L("NEW_ICE_RESTART")?ec.FIRST_CONNECTION:ec.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e){if(!this.connection)throw new J(O.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");L("ENABLE_PREALLOC_PC")&&this.state===Dt.Connected?await this.connection.updateRemoteConnect(e):(this.store.peerConnectionStart(),await this.connection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Dt.Connected)}updateRemoteRTPCapabilities(e){let t=Array.from(this.localTrackMap.entries()).filter(i=>{var o;let[a]=i;return ge(o=[oe.LocalVideoLowTrack,oe.LocalVideoTrack]).call(o,a)}),r=t.map(i=>{let[,{id:o}]=i;return o}),n=t.map(i=>{let[o]=i;return o});if(this.connection instanceof Ds){if(Te.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(n),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!ge(e).call(e,this.store.codec)){let i=["vp9","vp8","h264"].find(o=>ge(e).call(e,o));i&&(this.store.codec=i,w.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(i,".")))}this.connection.updateRemoteRTPCapabilities(r,e)}}async getEstablishParams(){var e;if(this.connection instanceof Ds&&this.connection.peerConnectionState!=="closed"&&ge(e=[Dt.New,Dt.Connected]).call(e,this.state))return this.connection.establishPromise}async publishDataChannel(e){if(!this.connection||this.state!==Dt.Connected){if(this.state===Dt.Disconnected)throw new J(O.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return e.forEach(r=>{var n;ge(n=this.pendingLocalDataChannels).call(n,r)||this.pendingLocalDataChannels.push(r)}),[]}let t=this.filterTobePublishedDataChannels(e);return t.length===0?[]:(t.forEach(r=>{let n=Date.now();this.store.publish(r.id.toString(),"datachannel",n)}),await this.connection.createDataChannels(this.store.uid,t),t.forEach(r=>{this.localDataChannels.push(r);let n=Date.now();this.store.publish(r.id+"","datachannel",void 0,n)}),e.map(r=>({streamId:r.id,ordered:r.ordered,maxRetransmits:r.maxRetransmits,metadata:r.metadata,channelId:r._originDataChannelId})))}publish(e,t,r){var n=this;return qs(function*(){let i=yield Rt(n.mutex.lock("From P2PChannel.publish"));try{if(!n.connection||n.state!==Dt.Connected){if(n.state===Dt.Disconnected)throw new J(O.UNEXPECTED_ERROR,"PeerConnection already disconnected.");n.throwIfTrackTypeNotMatch(e);let a=e.filter(s=>n.pendingLocalTracks.indexOf(s)===-1);return void(n.pendingLocalTracks=n.pendingLocalTracks.concat(a))}n.store.pubId=n.store.pubId+1,ni.markPublishStart(n.store.clientId,n.store.pubId);let o=n.filterTobePublishedTracks(e,t,r);if(o.length===0)return void(yield Rt(n.tryToUnmuteAudio(e)));yield*tH(hH(n.doPublish(n.connection,o)))}finally{i()}})()}doPublish(e,t){var r=this;return qs(function*(){t.forEach(h=>{let{track:f,type:p}=h,m=Date.now();r.store.publish(f.getTrackId(),p===oe.LocalAudioTrack?"audio":"video",m)}),r.bindLocalTrackEvents(t);let n=t.map(h=>{let{track:f}=h;return f}),i=yield Rt(e.send(t.map(h=>{let{track:f}=h;return f}),r.store.codec,r.store.audioCodec)),o=(yield Rt(i.next())).value,a=r.createGatewayPublishMessage(t,o),s;try{s=yield a}catch(h){throw i.throw(h),(h==null?void 0:h.code)===O.WS_ABORT&&t.forEach(f=>{let{track:p}=f;r.pendingLocalTracks.indexOf(p)===-1&&r.pendingLocalTracks.push(p)}),r.unbindLocalTrackEvents(t),h}let l=r.mapPubResToRemoteConfig(a,s),c=(yield Rt(i.next(l))).value,u=L("ENABLE_VIDEO_SEI");n.forEach(async h=>{let f=h.getRTCRtpTransceiver();f&&u&&(h.trackMediaType===xe.VIDEO?await I6e(f.sender,h):h.trackMediaType===xe.AUDIO&&await async function(p){if(!Ct().supportWebRTCEncodedTransform)return void w.warning("browser not support audio encoded transform");if(mE.has(p)||!p.track)return;let m={track:p.track};if(Bu()){if(!p.createEncodedStreams)return void w.warning("browser not support createEncodedStreams() API");let y=null;try{y=p.createEncodedStreams()}catch(b){return void w.error("create audio-encoded-streams error",b&&b.message)}let v=new TransformStream({transform(b,_){m.controller||(m.controller=_),p.track&&p.track.id!==m.track.id&&(w.debug("audio track changed: ".concat(m.track.id," => ").concat(p.track.id)),m.track.removeEventListener("ended",g),m.track=p.track,m.track.addEventListener("ended",g)),_.enqueue(b)}});y.readable.pipeThrough(v).pipeTo(y.writable)}else if(qn()){if(typeof RTCRtpScriptTransform>"u")return void w.warning("browser not support RTCRtpScriptTransform");let y=T_(),v=new MessageChannel;await new fe(_=>y.onmessage=S=>{S.data==="registered"&&_(void 0)});let b=new RTCRtpScriptTransform(y,{name:"tx",port:v.port2},[v.port2]);p.transform=b,await new fe(_=>y.onmessage=S=>{S.data==="started"&&_(void 0)}),v.port1.onmessage=_=>{var S;_.data.transformed&&p.track&&((S=p.track)===null||S===void 0?void 0:S.id)!==m.track.id&&(w.debug("audio track changed: ".concat(m.track.id," => ").concat(p.track.id)),m.track.removeEventListener("ended",g),m.track=p.track,m.track.addEventListener("ended",g))},m.worker=y}function g(){if(p.track){if(this.id!==p.track.id)return;p.track.removeEventListener("ended",g)}let y=mE.get(p);if(y){mE.delete(p);try{var v,b;(v=y.controller)===null||v===void 0||v.terminate(),(b=y.worker)===null||b===void 0||b.terminate()}catch(_){w.warning(_&&_.message)}}}mE.set(p,m),p.track.addEventListener("ended",g)}(f.sender))}),t.forEach(h=>{let{type:f}=h;r.statsCollector.addLocalStats(f)}),r.assignLocalTracks(t,c),r.statsUploader.startUploadOutboundStats(),t.forEach(h=>{let{track:f,type:p}=h,m=Date.now();r.store.publish(f.getTrackId(),p===oe.LocalAudioTrack?"audio":"video",void 0,m)})})()}async updateVideoStreamParameter(e,t){let r=this.localTrackMap.get(t);if(!r)return;if(!(r.track instanceof ir))return w.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof Ds||this.connection instanceof Fg))return w.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");let{track:n}=r,i=function(o,a){let s={};return o.height&&o.width&&(s.scaleResolutionDownBy=pk(o,a)),s.maxFramerate=o.framerate?No(o.framerate):void 0,s.maxBitrate=o.bitrate?1e3*o.bitrate:void 0,s}(e,n);if(n._encoderConfig||(n._encoderConfig={}),t!==oe.LocalVideoLowTrack||!L("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ct().supportDualStreamEncoding)i.scaleResolutionDownBy!=null&&(n._encoderConfig.scaleResolutionDownBy=i.scaleResolutionDownBy);else{let o=n._originMediaStreamTrack;if(!o.canvas)return w.warn("[".concat(n.getTrackId(),"] no canvas on track"));(function(a,s){let l=a.canvas;s.width&&(l.width=No(s.width)),s.height&&(l.height=No(s.height)),s.framerate&&(l.stopCapture&&l.stopCapture(),l.stopCapture=ML(()=>{!l.startCapture&&l.stopCapture&&l.stopCapture(),l.startCapture&&l.startCapture()},No(s.framerate)))})(o,e)}i.maxBitrate!=null&&(n._encoderConfig.bitrateMax=i.maxBitrate/1e3),i.maxFramerate!=null&&(n._encoderConfig.frameRate&&typeof n._encoderConfig.frameRate=="object"?n._encoderConfig.frameRate.max=i.maxFramerate:n._encoderConfig.frameRate={max:i.maxFramerate}),w.debug("[".concat(n.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(n._encoderConfig))),await this.connection.updateRtpSenderEncodings(n)}publishLowStream(e){var t=this;return qs(function*(){if(!t.connection||t.state!==Dt.Connected)return;let r=yield Rt(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{let i=t.localTrackMap.get(oe.LocalVideoTrack);if(!i)throw new J(O.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(oe.LocalVideoLowTrack))throw new J(O.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));let o=[{track:t.getLowVideoTrack(i.track,e),type:oe.LocalVideoLowTrack}];if(yield*tH(hH(t.doPublish(t.connection,o))),i.track.muted||!i.track.enabled){var n;let a=(n=t.localTrackMap.get(oe.LocalVideoLowTrack))===null||n===void 0?void 0:n.id;a!==void 0&&(yield Rt(t.connection.muteLocal([a])))}}finally{r()}})()}async republish(){this.pendingLocalTracks.length>0&&(w.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await Yn(this,Me.RequestRePublish,this.pendingLocalTracks),this.emit(Me.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(w.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await Yn(this,Me.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let t=this.pendingRemoteTracks.length-1;t>=0;t--){let{user:r,kind:n}=this.pendingRemoteTracks[t];(n!==xe.AUDIO||r._audio_added_&&r._audioSSRC)&&(n!==xe.VIDEO||r._video_added_&&r._videoSSRC)||this.pendingRemoteTracks.splice(t,1)}if(e)await Yn(this,Me.RequestReSubscribe,this.pendingRemoteTracks);else for(let{user:t,kind:r}of this.pendingRemoteTracks)await this.subscribe(t,r,r===xe.VIDEO?t._videoSSRC:t._audioSSRC);this.pendingRemoteTracks.forEach(t=>{let{user:r}=t;this.emit(Me.MediaReconnectEnd,r.uid)}),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==Dt.Connected)return void e.forEach(n=>{let i=this.pendingLocalTracks.indexOf(n);i!==-1&&this.pendingLocalTracks.splice(i,1)});let t=this.filterTobeUnpublishedTracks(e);if(t.length===0)return;let r=t.find(n=>n[0]==="videoLowTrack");return r&&r[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==Dt.Connected)return void e.forEach(r=>{let n=this.pendingLocalDataChannels.indexOf(r);n!==-1&&this.pendingLocalDataChannels.splice(n,1)});let t=this.filterTobeUnpublishedDataChannels(e);return t.length!==0?(t.forEach(r=>{let n=this.localDataChannels.indexOf(r);n!==-1&&this.localDataChannels.splice(n,1)}),this.localDataChannels.length===0&&await this.connection.stopDataChannels(this.store.uid),t.map(r=>r.id)):void 0}async unpublishLowStream(){if(!this.connection||this.state!==Dt.Connected)return;let e=this.localTrackMap.get(oe.LocalVideoLowTrack);if(!e)return;e.track.close();let t=[[oe.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){let r=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map(n=>{let[,{id:i}]=n;return i})),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map(n=>{let[i,{track:o}]=n;return{type:i,track:o}})),t.forEach(n=>{let[i]=n;this.statsCollector.removeLocalStats(i)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadOutboundStats(),r}async subscribeDataChannel(e,t){if(!this.connection||this.state!==Dt.Connected)throw new J(O.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");let r=t.filter(n=>{var i;return!((i=this.remoteDataChannelMap.get(e))!==null&&i!==void 0&&i.get(n.id))});if(r.length!==0)return await this.connection.createDataChannels(e.uid,r),r.forEach(n=>{var i;this.remoteDataChannelMap.has(e)?(i=this.remoteDataChannelMap.get(e))===null||i===void 0||i.set(n.id,n):this.remoteDataChannelMap.set(e,new Map([[n.id,n]]));let o=this.pendingRemoteDataChannels.findIndex(a=>{let{user:s,id:l}=a;return s.uid===e.uid&&l===n.id});o!==-1&&this.pendingRemoteDataChannels.splice(o,1)}),r.map(n=>n.id)}async subscribe(e,t,r,n,i){var o;if(!this.connection||this.state!==Dt.Connected)throw new J(O.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((o=this.remoteUserMap.get(e))!==null&&o!==void 0&&o.has(t))return;let a,s,l,c=this.connection.getPreMedia(r);if(c)w.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] preSSRCMap has ssrcId: ").concat(r,", no need to send sub to gateway.")),l=c.transceiver,a=c.track,s=c.id;else if(i){let f=i.find(m=>{let{stream_type:g}=m;return g===t});if(!f)throw new J(O.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));let p=await this.connection.receive(t,f.ssrcs,String(e._uintid),f.attributes);this.connection instanceof Ds&&(l=p.transceiver),a=p.track,s=p.id}else{let f=await this.connection.receive(t,[{ssrcId:r,rtx:n}],String(e._uintid),void 0);this.connection instanceof Ds&&(l=f.transceiver),a=f.track,s=f.id}t===xe.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(a):(e._audioTrack=new Dp(a,e.uid,e._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),l&&e._audioTrack._updateRtpTransceiver(l),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(a):(e._videoTrack=new Pp(a,e.uid,e._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),l&&e._videoTrack._updateRtpTransceiver(l),this.bindRemoteTrackEvents(e,e._videoTrack)),L("ENABLE_VIDEO_SEI")&&l&&(t==xe.VIDEO?await async function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ct().supportWebRTCEncodedTransform)return void w.warning("browser not support video encoded transform");if(!f.track)return;if(Ug.has(f)){let y=Ug.get(f);return void(y&&(y.onSei=p.onSei))}let m={track:f.track,onSei:p.onSei};if(Bu()){if(!f.createEncodedStreams)return void w.warning("browser not support createEncodedStreams() API");let y=null;try{y=f.createEncodedStreams()}catch(b){return void w.error("create video-encoded-streams error",b&&b.message)}let v=new TransformStream({transform(b,_){m.controller||(m.controller=_),f.track&&f.track.id!==m.track.id&&(w.debug("video track changed: ".concat(m.track.id," => ").concat(f.track.id)),m.track.removeEventListener("ended",g),m.track=f.track,m.track.addEventListener("ended",g));let S=function(I){let A=new DataView(I.data),D=0;for(;D+4<I.data.byteLength;){if(A.getUint8(D+0)===0&&A.getUint8(D+1)===0&&A.getUint8(D+2)===0&&A.getUint8(D+3)===1&&A.getUint8(D+4)===6){let M=D+6,H=0,V=0;for(;(V=A.getUint8(M++))===255;)H+=255;H+=V;let G=R6e(I.data,M,H);return new Uint8Array(G)}D++}return null}(b);S&&m.onSei&&m.onSei(S),_.enqueue(b)}});y.readable.pipeThrough(v).pipeTo(y.writable)}else if(qn()){if(typeof RTCRtpScriptTransform>"u")return void w.warning("browser not support RTCRtpScriptTransform");let y=T_(),v=new MessageChannel;await new fe(_=>y.onmessage=S=>{S.data==="registered"&&_(void 0)});let b=new RTCRtpScriptTransform(y,{name:"rx",port:v.port2},[v.port2]);f.transform=b,await new fe(_=>y.onmessage=S=>{S.data==="started"&&_(void 0)}),v.port1.onmessage=_=>{var S;_.data.transformed&&f.track&&((S=f.track)===null||S===void 0?void 0:S.id)!==m.track.id?(w.debug("video track changed: ".concat(m.track.id," => ").concat(f.track.id)),m.track.removeEventListener("ended",g),m.track=f.track,m.track.addEventListener("ended",g)):_.data.sei&&m.onSei&&m.onSei(_.data.sei)},m.worker=y}function g(){if(f.track){if(this.id!==f.track.id)return;f.track.removeEventListener("ended",g)}(function(y){let v=Ug.get(y);if(v){Ug.delete(y);try{var b,_;(b=v.controller)===null||b===void 0||b.terminate(),(_=v.worker)===null||_===void 0||_.terminate()}catch(S){w.warning(S&&S.message)}}})(f)}Ug.set(f,m),f.track.addEventListener("ended",g)}(l.receiver,{onSei:f=>{var p;(p=e._videoTrack)===null||p===void 0||p._onSei(f)}}):t==xe.AUDIO&&await async function(f){if(!Ct().supportWebRTCEncodedTransform)return void w.warning("browser not support audio encoded transform");if(gE.has(f))return;let p={track:f.track};if(Bu()){if(!f.createEncodedStreams)return void w.warning("browser not support createEncodedStreams() API");let g=null;try{g=f.createEncodedStreams()}catch(v){return void w.error("create audio-encoded-streams error",v&&v.message)}let y=new TransformStream({transform(v,b){p.controller||(p.controller=b),f.track&&f.track.id!==p.track.id&&(w.debug("audio track changed: ".concat(p.track.id," => ").concat(f.track.id)),p.track.removeEventListener("ended",m),p.track=f.track,p.track.addEventListener("ended",m)),b.enqueue(v)}});g.readable.pipeThrough(y).pipeTo(g.writable)}else if(qn()){if(typeof RTCRtpScriptTransform>"u")return void w.warning("browser not support RTCRtpScriptTransform");let g=T_(),y=new MessageChannel;await new fe(b=>g.onmessage=_=>{_.data==="registered"&&b(void 0)});let v=new RTCRtpScriptTransform(g,{name:"rx",port:y.port2},[y.port2]);f.transform=v,await new fe(b=>g.onmessage=_=>{_.data==="started"&&b(void 0)}),y.port1.onmessage=b=>{var _;b.data.transformed&&f.track&&((_=f.track)===null||_===void 0?void 0:_.id)!==p.track.id&&(w.debug("audio track changed: ".concat(p.track.id," => ").concat(f.track.id)),p.track.removeEventListener("ended",m),p.track=f.track,p.track.addEventListener("ended",m))},p.worker=g}function m(){f.track.removeEventListener("ended",m),function(g){let y=gE.get(g);if(y){gE.delete(g);try{var v,b;(v=y.controller)===null||v===void 0||v.terminate(),(b=y.worker)===null||b===void 0||b.terminate()}catch(_){w.warning(_&&_.message)}}}(f)}gE.set(f,p),f.track.addEventListener("ended",m)}(l.receiver));let u=this.remoteUserMap.get(e);u?u.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();let h=this.pendingRemoteTracks.findIndex(f=>{let{user:p,kind:m}=f;return p.uid===e.uid&&t===m});h!==-1&&(this.pendingRemoteTracks.splice(h,1),this.emit(Me.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==Dt.Connected)throw new J(O.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter(i=>{var o;let{user:a,mediaType:s}=i;return!((o=this.remoteUserMap.get(a))!==null&&o!==void 0&&o.has(s))});let t=[],r=new Map;e.forEach(i=>{if(!this.connection)return;let o=this.connection.getPreMedia(i.ssrcId);o?r.set(i.ssrcId,o):t.push(i)});let n=await this.connection.batchReceive(t.map(i=>{let{user:o,mediaType:a,ssrcId:s,rtxSsrcId:l}=i;return{kind:a,ssrcMsg:[{ssrcId:s,rtx:l}],mslabel:String(o._uintid)}}));t.forEach((i,o)=>{r.set(i.ssrcId,n[o])}),e.forEach(i=>{let{user:o,mediaType:a,ssrcId:s}=i,l=r.get(s);if(!l)return void w.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] cannot find ").concat(o.uid," subscribe data,").concat(a,", ").concat(s));let{track:c,id:u,transceiver:h}=l;a===xe.AUDIO?(o._audioTrack?o._audioTrack._updateOriginMediaStreamTrack(c):(o._audioTrack=new Dp(c,o.uid,o._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(o._audioTrack.getTrackId()))),h&&o._audioTrack._updateRtpTransceiver(h),this.bindRemoteTrackEvents(o,o._audioTrack)):(o._videoTrack?o._videoTrack._updateOriginMediaStreamTrack(c):(o._videoTrack=new Pp(c,o.uid,o._uintid,this.store),w.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(o._videoTrack.getTrackId()))),h&&o._videoTrack._updateRtpTransceiver(h),this.bindRemoteTrackEvents(o,o._videoTrack));let f=this.remoteUserMap.get(o);f?f.set(a,u):this.remoteUserMap.set(o,new Map([[a,u]])),this.statsCollector.addRemoteStats(o.uid),this.statsUploader.startUploadInboundStats();let p=this.pendingRemoteTracks.findIndex(m=>{let{user:g,kind:y}=m;return g.uid===o.uid&&a===y});p!==-1&&(this.pendingRemoteTracks.splice(p,1),this.emit(Me.MediaReconnectEnd,o.uid))})}async unsubscribe(e,t,r){let n=this.pendingRemoteTracks.filter(a=>{let{user:s,kind:l}=a;return t!==void 0?s.uid===e.uid&&t===l:s.uid===e.uid});if(n.forEach(a=>{let s=this.pendingRemoteTracks.indexOf(a);this.pendingRemoteTracks.splice(s,1)}),this.connection&&this.state===Dt.Connected||r||n.forEach(a=>{let{kind:s}=a;var l;if(s===xe.AUDIO)(l=e._audioTrack)===null||l===void 0||l._destroy(),e._audioTrack=void 0;else if(s===xe.VIDEO){var c;(c=e._videoTrack)===null||c===void 0||c._destroy(),e._videoTrack=void 0}}),!this.connection||this.state!==Dt.Connected)return;let i=this.filterTobeUnSubscribedTracks(e,t);if(i.length===0)return;await this.connection.stopReceiving(i.map(a=>{let[,{id:s}]=a;return s}));let o=this.createUnsubscribeMessage(i);return this.withdrawRemoteTracks(i),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),i.forEach(a=>{let[s,{kind:l}]=a;var c,u;if(l===xe.VIDEO&&s._videoSSRC&&((c=this.connection)===null||c===void 0||c.setStatsRemoteVideoIsReady(s._videoSSRC,!1)),l===xe.VIDEO)this.unbindRemoteTrackEvents(s._videoTrack),r||((u=s._videoTrack)===null||u===void 0||u._destroy(),s._videoTrack=void 0);else if(l===xe.AUDIO){var h;this.unbindRemoteTrackEvents(s._audioTrack),!r&&((h=s._audioTrack)===null||h===void 0||h._destroy(),s._audioTrack=void 0)}}),o}async unsubscribeDataChannel(e,t){if(t.forEach(i=>{let o=this.pendingRemoteDataChannels.findIndex(a=>a.id===i.id);o!==-1&&this.pendingRemoteDataChannels.splice(o,1)}),!this.connection)return;let r=this.filterTobeUnSubscribedDataChannels(e,t);if(r.length===0)return;t.forEach(i=>{i._close()});let n=this.remoteDataChannelMap.get(e);return r.forEach(i=>{n&&n.delete(i.id)}),n&&n.size===0&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),r.map(i=>i.id)}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(let{user:i,mediaType:o}of e){let a=this.pendingRemoteTracks.filter(s=>{let{user:l,kind:c}=s;return o!==void 0?l.uid===i.uid&&o===c:l.uid===i.uid});a.forEach(s=>{let l=this.pendingRemoteTracks.indexOf(s);this.pendingRemoteTracks.splice(l,1)}),t=t.concat(a)}if(!this.connection||this.state!==Dt.Connected)return void t.forEach(i=>{let{user:o,kind:a}=i;var s;if(a===xe.AUDIO)(s=o._audioTrack)===null||s===void 0||s._destroy(),o._audioTrack=void 0;else if(a===xe.VIDEO){var l;(l=o._videoTrack)===null||l===void 0||l._destroy(),o._videoTrack=void 0}});let r=Zs(e).call(e,(i,o)=>{let{user:a,mediaType:s}=o,l=this.filterTobeUnSubscribedTracks(a,s);return i.concat(l)},[]);if(r.length===0)return;await this.connection.stopReceiving(r.map(i=>{let[,{id:o}]=i;return o}));let n=this.createUnsubscribeAllMessage(r);return this.withdrawRemoteTracks(r),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),r.forEach(i=>{let[o,{kind:a}]=i;var s,l;if(a===xe.VIDEO&&o._videoSSRC&&((s=this.connection)===null||s===void 0||s.setStatsRemoteVideoIsReady(o._videoSSRC,!1)),a===xe.VIDEO)this.unbindRemoteTrackEvents(o._videoTrack),(l=o._videoTrack)===null||l===void 0||l._destroy(),o._videoTrack=void 0;else if(a===xe.AUDIO){var c;this.unbindRemoteTrackEvents(o._audioTrack),(c=o._audioTrack)===null||c===void 0||c._destroy(),o._audioTrack=void 0}}),n}isPreSubScribe(e){return!this.connection||this.state!==Dt.Connected?!1:!!this.connection.getPreMedia(e)}async muteRemote(e,t){if(!this.connection)return;let r=this.remoteUserMap.get(e);if(!r)return void w.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!r.get(t))return void w.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));let n=t===xe.VIDEO?e._videoSSRC:e._audioSSRC;n!==void 0&&this.connection.setStatsRemoteVideoIsReady(n,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;let r=this.remoteUserMap.get(e);if(!r)return void w.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."));r.get(t)||w.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."))}getAllTracks(e){let t=this.localTrackMap.get(oe.LocalAudioTrack);if((t==null?void 0:t.track)instanceof gn){let r=t.track;return Array.from(this.localTrackMap.entries()).filter(n=>{let[i]=n;return i!==oe.LocalAudioTrack}).filter(n=>{let[i]=n;return!(e&&i===oe.LocalVideoLowTrack)}).map(n=>{let[,{track:i}]=n;return i}).concat(r.trackList)}return Array.from(this.localTrackMap.entries()).filter(r=>{let[n]=r;return!(e&&n===oe.LocalVideoLowTrack)}).map(r=>{let[,{track:n}]=r;return n})}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,r,n,i){if(e){let a=this.localTrackMap.get(oe.LocalAudioTrack),s=n?this.localTrackMap.get(oe.LocalVideoLowTrack):this.localTrackMap.get(oe.LocalVideoTrack);Te.publish(this.store.sessionId,{eventElapse:ni.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.track.getTrackLabel(),videoName:s==null?void 0:s.track.getTrackLabel(),screenshare:(s==null?void 0:s.track._hints.indexOf(cr.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var o;r||(r=[]);let a=r.find(l=>l instanceof Cr),s=n?(o=this.localTrackMap.get(oe.LocalVideoTrack))===null||o===void 0?void 0:o.track:r.find(l=>l instanceof ir);Te.publish(this.store.sessionId,{eventElapse:ni.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:a==null?void 0:a.getTrackLabel(),videoName:s==null?void 0:s.getTrackLabel(),screenshare:(s==null?void 0:s._hints.indexOf(cr.SCREEN_TRACK))!==-1,audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,r,n){let i=n===xe.VIDEO?r._videoSSRC:r._audioSSRC;i&&Te.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===xe.VIDEO,audio:n===xe.AUDIO,peerid:r.uid,subscribeRequestid:i,p2pid:this.store.p2pId,eventElapse:ni.measureFromSubscribeStart(this.store.clientId,i),preSsrc:this.isPreSubScribe(i)})}reset(){w.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new ai("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new Fg({},this.store):new Ds({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();let e=this.localTrackMap.get(oe.LocalAudioTrack);if((e==null?void 0:e.track)instanceof gn){if(e.track.trackList.length>0){let t=e.track;e.track.trackList.forEach(r=>{t.removeAudioTrack(r)})}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=Dt.Disconnected}getStats(){var e;return(e=this.connection)===null||e===void 0?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return((t=this.connection)===null||t===void 0?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){let e=this.localTrackMap.get(oe.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){let e=this.localTrackMap.get(oe.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){let t=this.localTrackMap.get(e);return t&&t.track instanceof ir||t&&t.track instanceof Cr?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;let r=this.remoteUserMap.get(e);return!!r&&(!t||r.has(t))}getRemoteMedia(e){var t;let r=Array.from(Bo(t=this.remoteUserMap).call(t)).find(n=>n.uid===e);return r?{audioTrack:r.audioTrack,audioSSRC:r._audioSSRC,videoTrack:r.videoTrack,videoSSRC:r._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map(r=>{let[n]=r;return{uid:n.uid,level:n.audioTrack?100*n.audioTrack._source.getAccurateVolumeLevel():0}}),t=this.localTrackMap.get(oe.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=V0(e).call(e,(r,n)=>r.level-n.level),e}async disconnectForReconnect(){this.connection&&(w.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=Dt.Reconnecting,L("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t]=e;var r;t._videoTrack&&t._videoTrack._player&&((r=t._videoTrack._player.getVideoElement())===null||r===void 0||r.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new Fg({},this.store):new Ds({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(e=>{var t;let[r,{track:n}]=e;switch(r){case oe.LocalVideoTrack:ge(t=n._hints).call(t,cr.LOW_STREAM)?n.close():this.pendingLocalTracks.push(n);break;case oe.LocalAudioTrack:n instanceof gn?this.pendingLocalTracks=this.pendingLocalTracks.concat(n.trackList):this.pendingLocalTracks.push(n);case oe.LocalVideoLowTrack:}}),this.emit(Me.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;Array.from(Bo(r).call(r)).forEach(n=>{this.setPendingRemoteMedia(t,n)}),this.emit(Me.MediaReconnectStart,t.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.localDataChannels.length!==0&&(this.localDataChannels.forEach(e=>{this.pendingLocalDataChannels.push(e)}),this.localDataChannels.length=0),this.remoteDataChannelMap.size!==0&&(Array.from(this.remoteDataChannelMap.entries()).forEach(e=>{let[t,r]=e;Array.from(Bo(r).call(r)).forEach(n=>{this.setPendingRemoteDataChannel(t,n)})}),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),w.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(let r of this.pendingRemoteDataChannels){let{user:n,id:i}=r;if((e instanceof gu?e.uid:e)===n.uid&&i===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(let r of this.pendingRemoteTracks){let{user:n,kind:i}=r;if((e instanceof gu?e.uid:e)===n.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return qs(function*(){if(!t.connection||t.state!==Dt.Connected)return;let r=yield Rt(t.mutex.lock("From P2PChannel.restartICE")),n;try{n=yield Rt(t.connection.restartICE(e));let o=yield Rt(n.next());if(o.done)return;let a=o.value,s=yield a;switch(t.reportPCDisconnectedOrFailed(e),e){case Io.TCP:t._pcStatsUploadType=ec.TCP_RESTART;break;case Io.RELAY:t._pcStatsUploadType=ec.RELAY_RESTART;break;default:t._pcStatsUploadType=ec.OLD_RESTART}t._isInRestartIce=!0,n.next(s)}catch(o){var i;(i=n)===null||i===void 0||i.throw(o)}finally{r()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;let e=this.connection.getStats(),t=this.localTrackMap.get(oe.LocalVideoTrack),r=this.localTrackMap.get(oe.LocalAudioTrack),n=e.videoSend.find(p=>p.ssrc===(t==null?void 0:t.ssrcs[0].ssrcId)),i=e.audioSend.find(p=>p.ssrc===(r==null?void 0:r.ssrcs[0].ssrcId));if(!n||!i)return 1;let o=xa(this,Me.NeedSignalRTT),a=n?n.rttMs:void 0,s=i?i.rttMs:void 0,l=a&&s?(a+s)/2:a||s,c=(l&&o?(l+o)/2:l||o)||0,u=100*e.sendPacketLossRate*.7/50+.3*c/1500,h=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,f=t==null?void 0:t.track;if(f&&f._encoderConfig&&f._hints.indexOf(cr.SCREEN_TRACK)===-1){let p=f._encoderConfig.bitrateMax,m=e.bitrate.actualEncoded;if(p&&m){let g=(1e3*p-m)/(1e3*p);return Xee[g<.15?0:g<.3?1:g<.45?2:g<.6?3:4][h]}}return h}getDownlinkNetworkQuality(){if(!this.connection)return 0;let e=this.connection.getStats(),t=0;return Array.from(this.remoteUserMap.entries()).forEach(r=>{let[n]=r,i=n._audioSSRC,o=n._videoSSRC,a=e.audioRecv.find(m=>m.ssrc===i),s=e.videoRecv.find(m=>m.ssrc===o);if(!a&&!s)return void(t+=1);let l=xa(this,Me.NeedSignalRTT),c=e.rtt,u=(c&&l?(c+l)/2:c||l)||0,h=a?a.jitterMs:void 0,f=e.recvPacketLossRate,p=.7*f*100/50+.3*u/1500;h&&(p=.6*f*100/50+.2*u/1500+.2*h/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5}),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new fe((t,r)=>{this.handleMuteLocalTrack(e,t,r)})}async replaceTrack(e,t){var r;if(w.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==Dt.Connected)return;let n=Array.from(this.localTrackMap.entries()).find(o=>{let[,{track:a}]=o;return e===a});if(!n)return;let i=n[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:i}]),this.bindLocalTrackEvents([{track:t,type:i}]),n[1].track=t),await((r=this.connection)===null||r===void 0?void 0:r.replaceTrack(t,n[1].id)),this.isPlanB){let o=n[1];o.id=t._mediaStreamTrack.id,this.localTrackMap.set(i,o)}if(i===oe.LocalVideoTrack&&!L("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ct().supportDualStreamEncoding){let o=this.localTrackMap.get(oe.LocalVideoLowTrack);if(o){let a=e._mediaStreamTrack.clone();o.track._originMediaStreamTrack.stop(),o.track._mediaStreamTrack=a,o.track._originMediaStreamTrack=a,await new fe((s,l)=>{this.handleReplaceTrack(o.track,s,l,!0)})}}}filterTobePublishedTracks(e,t,r){let n=[],i=this.getAllTracks();e=up(e=e.filter(l=>i.indexOf(l)===-1));let o,a=!1,s=this.localTrackMap.get(oe.LocalAudioTrack);for(let l of e){if(l instanceof ir&&(this.localTrackMap.has(oe.LocalVideoTrack)||a?new J(O.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:l,type:oe.LocalVideoTrack}),a=!0),t)){let c=this.getLowVideoTrack(l,r);n.push({track:c,type:oe.LocalVideoLowTrack})}if(l instanceof Cr)if(s){let c=s.track;if(c instanceof gn)Nk([l]),c.addAudioTrack(l),this.bindLocalAudioTrackEvents(l,!0);else{let u=tN([c,l]);w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(u.getTrackId(),"]")),this.replaceTrack(c,u)}}else o instanceof gn?(Nk([l]),o.addAudioTrack(l)):o||!l._useAudioElement&&Ct().webAudioMediaStreamDest&&!l._bypassWebAudio?o=tN(o?[l,o]:[l]):o=l}return o&&(w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(o.getTrackId(),"]")),n.push({track:o,type:oe.LocalAudioTrack})),n}filterTobeUnpublishedTracks(e){let t=[],r=this.getAllTracks();e=up(e=e.filter(n=>r.indexOf(n)!==-1));for(let n of e){if(n instanceof Cr){let i=this.localTrackMap.get(oe.LocalAudioTrack);if(!i)continue;i.track instanceof gn?(i.track.removeAudioTrack(n),this.unbindLocalAudioTrackEvents(n),i.track.trackList.length===0&&(t.push([oe.LocalAudioTrack,i]),i.track.close())):t.push([oe.LocalAudioTrack,i])}if(n instanceof ir){let i=this.localTrackMap.get(oe.LocalVideoTrack);if(!i)continue;t.push([oe.LocalVideoTrack,i]);let o=this.localTrackMap.get(oe.LocalVideoLowTrack);o&&t.push([oe.LocalVideoLowTrack,o])}}return t}filterTobePublishedDataChannels(e){return e=(e=up(e)).filter(t=>this.localDataChannels.findIndex(r=>r.id===t.id)===-1)}filterTobeUnpublishedDataChannels(e){return e=(e=(e=up(e)).filter(t=>this.localDataChannels.indexOf(t)!==-1)).filter(t=>t._originDataChannel)}bindLocalTrackEvents(e){e.forEach(t=>{let{track:r,type:n}=t;switch(n){case oe.LocalVideoTrack:r.addListener(be.GET_STATS,this.handleGetLocalVideoStats),r.addListener(be.GET_RTC_STATS,this.handleGetRTCStats),r.addListener(be.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(be.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(be.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.addListener(be.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.addListener(be.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.addListener(be.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(be.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case oe.LocalAudioTrack:this.bindLocalAudioTrackEvents(r);case oe.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){e instanceof gn?e.trackList.forEach(r=>{r.addListener(be.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.addListener(be.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.addListener(be.GET_STATS,this.handleGetLocalAudioStats),r.addListener(be.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.addListener(be.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(be.GET_STATS,this.handleGetLocalAudioStats),e.addListener(be.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(be.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(be.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(be.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(be.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(be.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map(t=>{let[r,{track:n}]=t;return{track:n,type:r}})),e.forEach(t=>{let{track:r,type:n}=t;switch(n){case oe.LocalVideoTrack:r.off(be.GET_STATS,this.handleGetLocalVideoStats),r.off(be.GET_RTC_STATS,this.handleGetRTCStats),r.off(be.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),r.off(be.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),r.off(be.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),r.off(be.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),r.off(be.NEED_REPLACE_TRACK,this.handleReplaceTrack),r.off(be.NEED_MUTE_TRACK,this.handleMuteLocalTrack),r.off(be.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case oe.LocalAudioTrack:this.unbindLocalAudioTrackEvents(r);case oe.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){e instanceof gn?e.trackList.forEach(t=>{t.off(be.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(be.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(be.GET_STATS,this.handleGetLocalAudioStats),t.off(be.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(be.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(be.GET_STATS,this.handleGetLocalAudioStats),e.off(be.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(be.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(be.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(be.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(be.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(be.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof Pp&&t.addListener(be.GET_STATS,r=>{r(this.handleGetRemoteVideoStats(e))}),t instanceof Dp&&t.addListener(be.GET_STATS,r=>{r(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(be.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(e=>{let[t,r]=e;r.has(xe.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),r.has(xe.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)})}createGatewayPublishMessage(e,t){return e.map((r,n)=>{var i;let o,a,{track:s,type:l}=r;switch(l){case oe.LocalAudioTrack:o=Lt.Audio,a={dtx:s instanceof uS&&s._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case oe.LocalVideoTrack:o=ge(i=s._hints).call(i,cr.SCREEN_TRACK)?Lt.Screen:Lt.High,a=ml(ml({},l6(s)),{},{codec:this.store.codec,svc_mode:Sk()});break;case oe.LocalVideoLowTrack:o=Lt.Low,a=ml(ml({},l6(s)),{},{codec:this.store.codec,svc_mode:Sk()})}return{stream_type:o,attributes:a,ssrcs:t[n]}})}createGatewayUnpublishMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case oe.LocalVideoTrack:n=ge(r=o._hints).call(r,cr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoLowTrack:n=Lt.Low}return{stream_type:n,ssrcs:a,mid:s}})}assignLocalTracks(e,t){e.forEach((r,n)=>{let{track:i,type:o}=r;this.localTrackMap.set(o,{track:i,id:t[n].id,ssrcs:t[n].localSSRC})})}withdrawLocalTracks(e){e.forEach(t=>{let[r]=t;this.localTrackMap.delete(r)})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(Me.PeerConnectionStateChange,t),t!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),t==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),L("NEW_ICE_RESTART")){var r;if(ge(r=this._restartStates).call(r,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;let n=a=>{(e.iceConnectionState==="disconnected"||e.iceConnectionState==="checking"||e.iceConnectionState==="failed")&&(w.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(a)),xa(this,Me.QueryClientConnectionState)==="CONNECTED"&&this.emit(Me.RequestRestartICE,a))},i=()=>{e.iceConnectionState!=="disconnected"&&e.iceConnectionState!=="checking"&&e.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),w.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(Me.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},o=L("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(L("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&Ct().supportPCSetConfiguration)n(Io.RELAY),this._restartTimer=window.setTimeout(i,o);else if(Ir())n(Io.UDP),this._restartTimer=window.setTimeout(i,4e3);else{if(n(Io.TCP),Ct().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{n(Io.RELAY),this._restartTimer=window.setTimeout(i,o)},o));this._restartTimer=window.setTimeout(i,o)}},800))}}else{if(t==="disconnected"&&e.iceConnectionState==="disconnected")return setTimeout(()=>{e.iceConnectionState==="disconnected"&&L("ICE_RESTART")&&xa(this,Me.QueryClientConnectionState)==="CONNECTED"&&this.emit(Me.RequestRestartICE)},800),void setTimeout(()=>{e.peerConnectionState==="disconnected"&&(w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(Me.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);t==="failed"&&(w.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(Me.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=t=>{t!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(t,")")),Te.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:t,tag:xr.TRACER}).onSuccess(),this.emit(Me.IceConnectionStateChange,t)},e.onICETransportStateChange=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(t,")"))},e.onDTLSTransportStateChange=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(t,")"))},e.onDTLSTransportError=t=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(t,")"))},e.onFirstAudioDecoded=t=>{var r;let n=Array.from(Bo(r=this.remoteUserMap).call(r)).find(o=>o._audioSSRC===t);var i;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),(i=n.audioTrack)===null||i===void 0||i.emit(kp.FIRST_FRAME_DECODED),Te.firstRemoteFrame(this.store.sessionId,On.FIRST_AUDIO_DECODE,vr.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=t=>{var r;let n=Array.from(Bo(r=this.remoteUserMap).call(r)).find(i=>i._audioSSRC===t);n&&Te.firstRemoteFrame(this.store.sessionId,On.FIRST_AUDIO_RECEIVED,vr.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(t,r,n)=>{this.reportVideoFirstFrameDecoded(t,r,n)},e.onFirstVideoReceived=t=>{var r;let n=Array.from(Bo(r=this.remoteUserMap).call(r)).find(i=>i._videoSSRC===t);n&&Te.firstRemoteFrame(this.store.sessionId,On.FIRST_VIDEO_RECEIVED,vr.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,t),subscribeRequestid:t,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(t,r)=>{let n=t.candidateType==="relay",i=r.candidateType==="relay";r.candidateType!=="unknown"&&n===i||this.emit(Me.ConnectionTypeChange,n),w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(Ru(r))," -> ").concat(JSON.stringify(Ru(t)),")"))},e.onSelectedRemoteCandidateChanged=(t,r)=>{w.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(Ru(r))," -> ").concat(JSON.stringify(Ru(t)),")"))},e.onFirstVideoDecodedTimeout=t=>{this.reportVideoFirstFrameDecoded(t,void 0,void 0,!0)},e.getLocalVideoStats=()=>{let t=this.statsCollector.getLocalVideoTrackStats(),r=this.statsCollector.getRTCStats();return ml(ml({},t),r)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.getLocalVideoStats=void 0}filterTobeMutedTracks(e){let t=[];if(this.getAllTracks().indexOf(e)===-1)return t;let r=this.localTrackMap.get(oe.LocalAudioTrack);if(e instanceof Cr&&(r==null?void 0:r.track)instanceof gn)return r.track.isActive||t.push([oe.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(n&&(t.push(n),n[0]===oe.LocalVideoTrack)){let i=this.localTrackMap.get(oe.LocalVideoLowTrack);i&&t.push([oe.LocalVideoLowTrack,i])}return t}filterTobeUnmutedTracks(e){let t=[],r=this.localTrackMap.get(oe.LocalAudioTrack);if(e instanceof Cr&&(r==null?void 0:r.track)instanceof gn)return r.track.isActive&&t.push([oe.LocalAudioTrack,r]),t;let n=Array.from(this.localTrackMap.entries()).find(i=>{let[,{track:o}]=i;return e===o});if(n)if(n[0]===oe.LocalVideoTrack){t.push(n);let i=this.localTrackMap.get(oe.LocalVideoLowTrack);i&&t.push([oe.LocalVideoLowTrack,i])}else t.push(n);return t}createMuteMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoTrack:n=ge(r=o._hints).call(r,cr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalVideoLowTrack:n=Lt.Low}return{stream_type:n,ssrcs:a,mid:s}})}createUnmuteMessage(e){return e.map(t=>{var r;let n,[i,{track:o,ssrcs:a,id:s}]=t;switch(i){case oe.LocalAudioTrack:n=Lt.Audio;break;case oe.LocalVideoTrack:n=ge(r=o._hints).call(r,cr.SCREEN_TRACK)?Lt.Screen:Lt.High;break;case oe.LocalVideoLowTrack:n=Lt.Low}return{stream_type:n,ssrcs:a,mid:s}})}filterTobeUnSubscribedTracks(e,t){let r=[],n=this.remoteUserMap.get(e);if(!n)return r;if(t){let i=n.get(t);if(!i)return r;r.push([e,{kind:t,id:i}])}else Array.from(n.entries()).forEach(i=>{let[o,a]=i;r.push([e,{kind:o,id:a}])});return r}filterTobeUnSubscribedDataChannels(e,t){let r=[];return t.forEach(n=>{var i;(i=this.remoteDataChannelMap.get(e))!==null&&i!==void 0&&i.has(n.id)&&r.push(n)}),r}createUnsubscribeMessage(e){let t=[];return e.forEach(r=>{let[n,{kind:i,id:o}]=r;switch(i){case xe.VIDEO:return void(n._videoSSRC&&t.push({stream_type:xe.VIDEO,ssrcId:n._videoSSRC}));case xe.AUDIO:return void(n._audioSSRC&&t.push({stream_type:xe.AUDIO,ssrcId:n._audioSSRC}))}}),t}createUnsubscribeAllMessage(e){let t=new Map;return e.forEach(r=>{let[n,{kind:i}]=r;if(t.has(n)){let o=t.get(n);i===xe.VIDEO?o|=pn.Video:o|=pn.Audio,t.set(n,o)}else i===xe.VIDEO?t.set(n,pn.Video):t.set(n,pn.Audio)}),{users:Array.from(t.entries()).map(r=>{let[n,i]=r;return{stream_id:n.uid,stream_type:i}})}}withdrawRemoteTracks(e){e.forEach(t=>{let[r,{kind:n}]=t,i=this.remoteUserMap.get(r);i&&(i.delete(n),Array.from(i.entries()).length===0&&this.remoteUserMap.delete(r))})}async updateBitrateLimit(e){let t=this.localTrackMap.get(oe.LocalVideoTrack),r=this.localTrackMap.get(oe.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),r&&e.low_stream_uplink&&await r.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(e,t){return e.map((r,n)=>{var i;let{stream_type:o}=r;return(i=t.find(a=>{let{stream_type:s}=a;return o===s}))===null||i===void 0?void 0:i.attributes})}async tryToUnmuteAudio(e){for(let r=0;r<e.length;r++)if(e[r]instanceof Cr){var t;let n=this.filterTobeUnmutedTracks(e[r]);if(n.length===0)continue;await((t=this.connection)===null||t===void 0?void 0:t.unmuteLocal(n.map(o=>{let[,{id:a}]=o;return a})));let i=this.createUnmuteMessage(n);return void await Jt(this,Me.RequestUnmuteLocal,i)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!((t=this.connection)===null||t===void 0||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Me.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(Me.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await jn(CL(this.dtlsFailedCount,Yr)),this.emit(Me.RequestReconnect)}async reconnectP2P(){let e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await Yn(this,Me.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(Me.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(oe.LocalVideoTrack)||this.pendingLocalTracks.some(e=>e instanceof ir)}throwIfTrackTypeNotMatch(e){if(e.filter(t=>t instanceof ir).length>1)throw new J(O.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter(t=>t instanceof Cr).length>1&&(e.some(t=>t instanceof Cr&&t._bypassWebAudio)||!Ct().webAudioMediaStreamDest))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(let t of e){if(t instanceof ir&&this.pendingLocalTracks.some(r=>r instanceof ir))throw new J(O.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof Cr&&this.pendingLocalTracks.some(r=>r instanceof Cr)&&(!Ct().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some(r=>r instanceof Cr&&r._bypassWebAudio)))throw new J(O.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){let r=!L("DISABLE_DUAL_STREAM_USE_ENCODING")&&Ct().supportDualStreamEncoding,n=ml(ml({},{width:160,height:120,framerate:15,bitrate:50}),t),i;i=r?e._mediaStreamTrack.clone():Ik(e,n);let o=er(8,"track-low-"),a=new ir(i,ml(ml({},r&&{scaleResolutionDownBy:pk(n,e)}),{},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}),void 0,void 0,o);return a.on(hh.TRANSCEIVER_UPDATED,s=>{e._updateRtpTransceiver(s,dm.LOW_STREAM)}),a._hints.push(cr.LOW_STREAM),e.on("sei-to-send",s=>{a.emit("sei-to-send",s)}),e.addListener(be.NEED_CLOSE,()=>{a.close()}),a}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof Ds){var i,o,a,s;let l=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:c,dtlsTransportState:u,peerConnectionState:h}=this.connection,{local:f,remote:p}=await this.connection.getSelectedCandidatePair();Te.pcStats(this.store.sessionId,{startTime:l,eventElapse:e-l||0,iceconnectionsate:c,dtlsstate:u,connectionstate:h,intSucc:t?1:2,error:n,selectedLocalCandidateProtocol:(i=f==null?void 0:f.protocol)!==null&&i!==void 0?i:"",selectedLocalCandidateType:(o=f.candidateType)!==null&&o!==void 0?o:"",selectedLocalCandidateAddress:"".concat(f.address,":").concat(f.port),selectedRemoteCandidateProtocol:(a=p.protocol)!==null&&a!==void 0?a:"",selectedRemoteCandidateType:(s=p.candidateType)!==null&&s!==void 0?s:"",selectedRemoteCandidateAddress:"".concat(p.address,":").concat(p.port),restartCnt:r,preallocation:this.connection.isPreallocation})}}reportVideoFirstFrameDecoded(e,t,r,n){var i;let o=Array.from(Bo(i=this.remoteUserMap).call(i)).find(a=>a._videoSSRC===e);if(o){n||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());let a=this.store.keyMetrics,s=a.subscribe.find(l=>l.userId===o.uid&&l.type==="video");Te.firstRemoteVideoDecode(this.store.sessionId,On.FIRST_VIDEO_DECODE,vr.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:r,subscribeElapse:ni.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:a.requestAPEnd||0,apStart:a.requestAPStart||0,joinGwEnd:a.joinGatewayEnd||0,joinGwStart:a.joinGatewayStart||0,pcEnd:a.peerConnectionEnd||0,pcStart:a.peerConnectionStart||0,subscriberEnd:(s==null?void 0:s.subscribeEnd)||0,subscriberStart:(s==null?void 0:s.subscribeStart)||0,videoAddNotify:(s==null?void 0:s.streamAdded)||0,state:n?1:0,firstFrame:(s==null?void 0:s.firstFrame)||0})}}async remoteMediaSsrcChanged(e,t,r){if(!this.connection)return!1;let n=this.remoteUserMap.get(e);if(!n)return!1;let i=n.get(t);if(!i)return!1;let o=await this.connection.getRemoteSSRC(i);return o!==void 0&&o!==r}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(e=>{let[t,{track:r}]=e;t===oe.LocalVideoLowTrack?r._updateRtpTransceiver(void 0,dm.LOW_STREAM):r._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof Ds&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===ec.TCP_RESTART&&e===Io.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,ec.DISCONNECTED_OR_FAILED)))}},we(dt.prototype,"startP2PConnection",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"startP2PConnection"),dt.prototype),we(dt.prototype,"connect",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"connect"),dt.prototype),we(dt.prototype,"updateRemoteRTPCapabilities",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"updateRemoteRTPCapabilities"),dt.prototype),we(dt.prototype,"publishDataChannel",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"publishDataChannel"),dt.prototype),we(dt.prototype,"unpublish",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"unpublish"),dt.prototype),we(dt.prototype,"unpublishDataChannel",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"unpublishDataChannel"),dt.prototype),we(dt.prototype,"unpublishLowStream",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"unpublishLowStream"),dt.prototype),we(dt.prototype,"subscribeDataChannel",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"subscribeDataChannel"),dt.prototype),we(dt.prototype,"subscribe",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"subscribe"),dt.prototype),we(dt.prototype,"massSubscribe",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"massSubscribe"),dt.prototype),we(dt.prototype,"unsubscribe",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"unsubscribe"),dt.prototype),we(dt.prototype,"unsubscribeDataChannel",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"unsubscribeDataChannel"),dt.prototype),we(dt.prototype,"massUnsubscribe",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"massUnsubscribe"),dt.prototype),we(dt.prototype,"muteRemote",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"muteRemote"),dt.prototype),we(dt.prototype,"unmuteRemote",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"unmuteRemote"),dt.prototype),we(dt.prototype,"hasRemoteMediaWithLock",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"hasRemoteMediaWithLock"),dt.prototype),we(dt.prototype,"disconnectForReconnect",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"disconnectForReconnect"),dt.prototype),we(dt.prototype,"updateBitrateLimit",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"updateBitrateLimit"),dt.prototype),we(dt.prototype,"remoteMediaSsrcChanged",[wi],Object.getOwnPropertyDescriptor(dt.prototype,"remoteMediaSsrcChanged"),dt.prototype),dt);function wi(e,t,r){let n=e[t];if(typeof n!="function")throw new Error("Cannot use mutex on object property.");return r.value=async function(){let i=this.mutex,o=await i.lock("From P2PChannel.".concat(t));try{for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return await n.apply(this,s)}finally{o()}},r}var sre={};function Bg(e){(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&w.debug("install service ".concat(e.name)),sre[e.name]=e}function ay(e){let t=sre[e];if(!t)throw new J(O.INVALID_OPERATION,"".concat(e," not found, please use AgoraRTC.use(").concat(e,"Service) to load it first"));return t}function fH(e,t){return ay("DataStream").create(e,t)}function pH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var c8e=Date.now(),u8e=20,Ok=new Map,I_=new Map;async function lre(e){let t=Ok.get(e),r=Array.isArray(t)&&t[t.length-1],n=I_.get(e);if(!r)return void(n.isSyncing=!1);let i={uid:r.uid,payload:r.payload};n.firstRecvTs===0&&(n.firstRecvTs=r.recvTs,n.firstSendTs=r.sendTs);let o=r.sendTs-n.firstSendTs,a=o-(Date.now()-n.firstRecvTs);a>0&&(n.firstRecvTs=Date.now()-o);let s=r.mediaDelay+a;s<=0?(t.pop(),cre(r.context,i),s=0):s=Math.min(s,u8e),setTimeout(()=>t.length&&lre(e),s)}function cre(e,t){e.safeEmit(gt.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function d8e(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return cre(r,{uid:e.uid,payload:e.payload});let n="".concat(r.id,"-").concat(e.uid),i=Ok.get(n)||[],o=i.findIndex(c=>e.sendTs>=c.sendTs),a=mH(mH({},e),{},{context:r,mediaDelay:t,recvTs:Date.now()});o===-1?i.push(a):i.splice(o,0,a),Ok.set(n,i);let s=!1;var l;I_.has(n)?s=!((l=I_.get(n))===null||l===void 0||!l.isSyncing):I_.set(n,{isSyncing:s,firstRecvTs:0,firstSendTs:0}),s||lre(n)}var h8e=St().name;function gH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gH(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var jp="websdk_ng_cache_parameter",f8e=L("MAX_PRELOAD_ASYNC_LENGTH"),p8e=1e4,Bd=new Map,$d=[],nN=null,iN=0,oN=0,CE=new Map,m8e=function(e,t){let r=[],n=0,i=async()=>{let o=r.shift();o&&await o(),r.length>0&&n<t?i():n--};return async function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return new fe(async(l,c)=>{r.push(async()=>{try{let u=await e(...a);l(u)}catch(u){c(u)}}),n<t&&(n++,i())})}}(ure,f8e),aN=to.CancelToken.source();async function ure(e,t,r,n,i,o){try{if(!L("ENABLE_PRELOAD"))return;if(!Ct().supportWebCrypto)return void td(()=>{w.warn("Your browser does not support preloading, this feature  be run in a secure environment")},"preload_webcrypto_not_supported");if(!r&&r!==null)throw new J(O.INVALID_PARAMS,"Invalid token: ".concat(r,". If you don not use token, set it to null"));r&&kn(r,"token",1,2047),kn(e,"appid",1,2047),fC(t),n&&pC(n);let a=dp();w.debug("preload channel ".concat(t,", uid is ").concat(n));let s={appId:e,cname:t,token:r||e,uid:typeof n!="string"?n:null,sid:a,proxyServer:i},l,c;typeof n=="string"?(s.stringUid=n,[c,l]=await fe.all([L6e(n,{sid:a,appId:e},aN.token),w$(yH(yH({},s),{},{token:r||e,uid:0}),aN.token)]),s.uid=c.uid,l.gatewayInfo.uid=s.uid,l.gatewayInfo.res.uid=s.uid):(o&&(s.stringUid=o),l=await w$(s,aN.token));let u={sid:a,appId:e,cname:t,token:r||e,uid:s.stringUid||n,intUid:s.uid||l.gatewayInfo.uid,stringUid:s.stringUid,ts:Date.now(),sua:c,ap:l};await async function(h){let f;try{h.uid&&dre({appId:h.appId,cname:h.cname,token:h.token,uid:h.uid,stringUid:h.stringUid});let p=pre(h),m=await async function(y,v){try{let b=await window.crypto.subtle.importKey("raw",zee(v),"AES-GCM",!1,["encrypt"]),_=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},b,Xd(window.btoa(JSON.stringify(y))));return $u(new Uint8Array(_))}catch{return}}(h,h.token||h.appId);if(!m)return;f=fre(jp);let g=f?JSON.parse(f):[];g.push({[p]:m}),g.length>L("AP_CACHE_NUM")&&g.shift(),gS(jp,JSON.stringify(g))}catch(p){w.warn("Error caching server parameters:",p.message),gS(jp,"")}}(u),iN++}catch(a){throw oN++,function(s){nN||(nN=window.setTimeout(()=>{let c="";CE.forEach((u,h)=>{c+="".concat(h,": ").concat(u," ;")}),Te.reportApiInvoke(null,{name:en.PRELOAD,options:{success:iN,failed:oN,err:c}}).onError(s),iN=0,oN=0,CE.clear(),nN=null},p8e));let l=CE.get(s.code)||0;CE.set(s.code,l+1)}(a),a}}async function vH(e){try{let t=dre(e);if(!t||e.cloudProxyServer!=="disabled")return;let r=await async function(n,i){try{let o=await window.crypto.subtle.importKey("raw",zee(i),"AES-GCM",!1,["decrypt"]),a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},o,Xd(n));return JSON.parse(window.atob($u(new Uint8Array(a))))}catch{return}}(t,e.token||e.appId);if(!r||!function(n,i){return n.cname===i.cname&&n.appId===i.appId&&n.token===i.token?i.stringUid?n.stringUid===i.stringUid:typeof i.uid=="number"?n.uid===i.uid:n.uid==i.uid:!1}(r,e))return;if(r&&Date.now()-r.ts<L("AP_CACHE_LIFETIME"))return r}catch(t){w.warn("Error get preloadInfo",t.message)}}function dre(e){let t;try{if(t=fre(jp),!t)return;let r=JSON.parse(t),n=pre(e),i=function(a,s){for(let l=a.length-1;l>=0;l--)if(s(a[l]))return l;return-1}(r,a=>n in a);if(i===-1)return;let o=r.splice(i,1)[0];return gS(jp,JSON.stringify(r)),o[n]}catch(r){w.warn("Error delete preload info: ".concat(t),r.message),gS(jp,"")}}function qL(e){if(e){let t=Bd.get(e);t&&(window.clearTimeout(t),t=null,Bd.delete(e)),ge($d).call($d,e)||e.cloudProxyServer!=="disabled"||$d.push(e)}if(Bd.size<L("AP_CACHE_NUM")&&$d.length>0){let t=$d.shift();Bd.set(t,window.setTimeout(async()=>{let{appId:r,cname:n,token:i,stringUid:o,uid:a,proxyServer:s}=t;try{await m8e(r,n,i,a,s,o),Bd.has(t)&&qL(t)}catch(l){w.warn("update preload failed",l.message),hre(t)}},L("AP_UPDATE_INTERVAL")))}}function hre(e){let t=$d.indexOf(e);t!==-1&&$d.splice(t,1);let r=Bd.get(e);r&&(window.clearTimeout(r),r=null,Bd.delete(e),qL())}function bH(e,t){let r=e.sua,n=e.ap;t&&r&&Te.reqUserAccount(e.sid,{lts:r.requestTime,elapse:r.elapse,success:!0,serverAddr:r.url,stringUid:t,uid:e.intUid,errorCode:null,extend:r.req}),Te.reportResourceTiming(e.ap.url,e.sid),Te.joinWebProxyAP(e.sid,{lts:n.requestTime,elapse:n.elapse,sucess:1,apServerAddr:n.url,turnServerAddrList:n.proxyInfo.addresses.map(i=>i.ip).join(","),eventType:"disabled",unilbsServerIds:[$r.CHOOSE_SERVER,$r.CLOUD_PROXY_FALLBACK].toString()}),Te.joinChooseServer(e.sid,{lts:n.requestTime,elapse:n.elapse,succ:!0,csAddr:n.url,opid:n.opid,serverList:n.gatewayInfo.gatewayAddrs.map(i=>i.address),ec:null,cid:n.gatewayInfo.cid.toString(),uid:n.gatewayInfo.uid.toString(),csIp:n.gatewayInfo.csIp,unilbsServerIds:[$r.CHOOSE_SERVER].toString(),isHttp3:n.isHttp3})}function fre(e){return window.atob(window.localStorage.getItem(e)||"")}function gS(e,t){window.localStorage.setItem(e,window.btoa(t))}function pre(e){let t="".concat(e.appId,"_").concat(e.cname);return typeof e.uid=="string"&&(t+="_s_".concat(e.uid)),typeof e.uid=="number"&&(t+="_".concat(e.uid)),e.token&&(t+="_".concat(e.token)),Wee(t)}function g8e(e){let t=function(){let r=b8e.pop();return r?(r.offset=r.limit=0,r):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(r,n){let i=r.appId;i!==void 0&&(Vr(n,10),ru(n,i));let o=r.cid;o!==void 0&&(Vr(n,16),Vr(n,o));let a=r.cname;a!==void 0&&(Vr(n,26),ru(n,a));let s=r.deviceId;s!==void 0&&(Vr(n,34),ru(n,s));let l=r.elapse;l!==void 0&&(Vr(n,40),nu(n,l));let c=r.fileSize;c!==void 0&&(Vr(n,48),nu(n,kf(c)));let u=r.height;u!==void 0&&(Vr(n,56),nu(n,kf(u)));let h=r.jpg;h!==void 0&&(Vr(n,66),Vr(n,h.length),EH(n,h));let f=r.networkType;f!==void 0&&(Vr(n,72),nu(n,kf(f)));let p=r.osType;p!==void 0&&(Vr(n,80),nu(n,kf(p)));let m=r.requestId;m!==void 0&&(Vr(n,90),ru(n,m));let g=r.sdkVersion;g!==void 0&&(Vr(n,98),ru(n,g));let y=r.sequence;y!==void 0&&(Vr(n,104),nu(n,kf(y)));let v=r.sid;v!==void 0&&(Vr(n,114),ru(n,v));let b=r.timestamp;b!==void 0&&(Vr(n,120),nu(n,b));let _=r.uid;_!==void 0&&(Vr(n,128),Vr(n,_));let S=r.vid;S!==void 0&&(Vr(n,136),Vr(n,S));let I=r.width;I!==void 0&&(Vr(n,144),nu(n,kf(I)));let A=r.service;A!==void 0&&(Vr(n,152),Vr(n,A));let D=r.callbackData;D!==void 0&&(Vr(n,162),Vr(n,D.length),EH(n,D));let M=r.ticket;M!==void 0&&(Vr(n,170),ru(n,M));let H=r.vendorConfigs;H!==void 0&&(Vr(n,178),ru(n,H))}(e,t),function(r){let n=r.bytes,i=r.limit;return n.length===i?n:n.subarray(0,i)}(t)}function y8e(e){return function(r){let n={};e:for(;!E8e(r);){let i=sy(r);switch(i>>>3){case 0:break e;case 1:n.code=sy(r);break;case 2:n.msg=_H(r,sy(r));break;case 3:n.requestId=_H(r,sy(r));break;case 4:n.timestamp=_8e(r,!1);break;default:v8e(r,7&i)}}return n}({bytes:t=e,offset:0,limit:t.length});var t}function v8e(e,t){switch(t){case 0:for(;128&os(e););break;case 2:sN(e,sy(e));break;case 5:sN(e,4);break;case 1:sN(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function kf(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var b8e=[];function sN(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function E8e(e){return e.offset>=e.limit}function gC(e,t){let r=e.bytes,n=e.offset,i=e.limit,o=n+t;if(o>r.length){let a=new Uint8Array(2*o);a.set(r),e.bytes=a}return e.offset=o,o>i&&(e.limit=o),n}function mre(e,t){let r=e.offset;if(r+t>e.limit)throw new Error("Read past limit");return e.offset+=t,r}function EH(e,t){let r=gC(e,t.length);e.bytes.set(t,r)}function _H(e,t){let r=mre(e,t),n=String.fromCharCode,i=e.bytes,o="�",a="";for(let s=0;s<t;s++){let l,c,u,h,f=i[s+r];128&f?(224&f)==192?s+1>=t?a+=o:(l=i[s+r+1],(192&l)!=128?a+=o:(h=(31&f)<<6|63&l,h<128?a+=o:(a+=n(h),s++))):(240&f)==224?s+2>=t?a+=o:(l=i[s+r+1],c=i[s+r+2],(49344&(l|c<<8))!=32896?a+=o:(h=(15&f)<<12|(63&l)<<6|63&c,h<2048||h>=55296&&h<=57343?a+=o:(a+=n(h),s+=2))):(248&f)==240?s+3>=t?a+=o:(l=i[s+r+1],c=i[s+r+2],u=i[s+r+3],(12632256&(l|c<<8|u<<16))!=8421504?a+=o:(h=(7&f)<<18|(63&l)<<12|(63&c)<<6|63&u,h<65536||h>1114111?a+=o:(h-=65536,a+=n(55296+(h>>10),56320+(1023&h)),s+=3))):a+=o:a+=n(f)}return a}function ru(e,t){let r=t.length,n=0;for(let a=0;a<r;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<r&&(s=(s<<10)+t.charCodeAt(++a)-56613888),n+=s<128?1:s<2048?2:s<65536?3:4}Vr(e,n);let i=gC(e,n),o=e.bytes;for(let a=0;a<r;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<r&&(s=(s<<10)+t.charCodeAt(++a)-56613888),s<128?o[i++]=s:(s<2048?o[i++]=s>>6&31|192:(s<65536?o[i++]=s>>12&15|224:(o[i++]=s>>18&7|240,o[i++]=s>>12&63|128),o[i++]=s>>6&63|128),o[i++]=63&s|128)}}function os(e){return e.bytes[mre(e,1)]}function wH(e,t){let r=gC(e,1);e.bytes[r]=t}function sy(e){let t,r=0,n=0;do t=os(e),r<32&&(n|=(127&t)<<r),r+=7;while(128&t);return n}function Vr(e,t){for(t>>>=0;t>=128;)wH(e,127&t|128),t>>>=7;wH(e,t)}function _8e(e,t){let r,n=0,i=0,o=0;return r=os(e),n=127&r,128&r&&(r=os(e),n|=(127&r)<<7,128&r&&(r=os(e),n|=(127&r)<<14,128&r&&(r=os(e),n|=(127&r)<<21,128&r&&(r=os(e),i=127&r,128&r&&(r=os(e),i|=(127&r)<<7,128&r&&(r=os(e),i|=(127&r)<<14,128&r&&(r=os(e),i|=(127&r)<<21,128&r&&(r=os(e),o=127&r,128&r&&(r=os(e),o|=(127&r)<<7))))))))),{low:n|i<<28,high:i>>>4|o<<24,unsigned:t}}function nu(e,t){let r=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=i===0?n===0?r<16384?r<128?1:2:r<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:i<128?9:10,a=gC(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=o!==9?128|i:127&i;case 8:s[a+7]=o!==8?n>>>21|128:n>>>21&127;case 7:s[a+6]=o!==7?n>>>14|128:n>>>14&127;case 6:s[a+5]=o!==6?n>>>7|128:n>>>7&127;case 5:s[a+4]=o!==5?128|n:127&n;case 4:s[a+3]=o!==4?r>>>21|128:r>>>21&127;case 3:s[a+2]=o!==3?r>>>14|128:r>>>14&127;case 2:s[a+1]=o!==2?r>>>7|128:r>>>7&127;case 1:s[a]=o!==1?128|r:127&r}}var SH={},TH={},yS=4294967296,w8e=yS*yS,CH=w8e/2;gre(0,!0);var xH=gre(0),S8e=zv(0,-2147483648,!1),T8e=zv(-1,2147483647,!1);function gre(e,t){let r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=TH[e],n)?n:(r=zv(e,0,!0),i&&(TH[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=SH[e],n)?n:(r=zv(e,e<0?-1:0,!1),i&&(SH[e]=r),r)}function zv(e,t,r){return{low:0|e,high:0|t,unsigned:!!r}}function C8e(e,t){if(isNaN(e))return xH;{if(e<=-CH)return S8e;if(e+1>=CH)return T8e}return e<0?xH:zv(e%yS|0,e/yS|0,t)}function RH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var x8e=class yre extends _r{get connectionState(){return this._connectionState}set connectionState(t){if(this._connectionState===t)return;let r=this._connectionState;this._connectionState=t,this.emit(js.CONNECTION_STATE_CHANGE,t,r)}get quality(){return this._quality}set quality(t){this._quality=t>1?1:t<.1?.1:t,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(t){var r;super(),R(this,"name","AgoraRTCImageModeration"),R(this,"_connectionState",ma.CONNECTING),R(this,"_sequence",0),R(this,"_moderationStartTime",void 0),R(this,"_workerConnection",void 0),R(this,"_workerMessageLengthLimit",void 0),R(this,"_qualityRatio",void 0),R(this,"_connectInfo",void 0),R(this,"_cancelTokenSource",to.CancelToken.source()),R(this,"_retryConfig",void 0),R(this,"_moderationInterval",void 0),R(this,"_moderationTimer",null),R(this,"_moderationMode",1),R(this,"_quality",1),R(this,"_qualityTimer",null),R(this,"_ticket",void 0),R(this,"_moderationIntervalMinimum",void 0),R(this,"_uploadFailedNum",0),R(this,"_uploadNum",0),R(this,"_uploadTimer",null),R(this,"_extraInfo",void 0),R(this,"_vendor",""),R(this,"_encoder",new TextEncoder),R(this,"_moderationId",void 0),R(this,"inspectImage",()=>{if(this.connectionState!==ma.CONNECTED)throw new q(O.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===ma.CONNECTED?this.requestToInspectImage():w.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=er(5,"image-moderation-"),this._workerMessageLengthLimit=L("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=L("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=(r=t.interval)!==null&&r!==void 0?r:1e3,t.extraInfo&&(this._extraInfo=this._encoder.encode(t.extraInfo)),t.vendor&&(this._vendor=t.vendor),this._qualityRatio=L("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new Uv("worker-"+this._moderationId,Yr),this.on(js.STATE_CHANGE,(n,i)=>{w.debug("[".concat(this._moderationId,"] Moderation operation :").concat(Tf[n]," ").concat(i||""))}),this.handleWorkerEvents()}async init(t,r){this.emit(js.STATE_CHANGE,Tf.CONNECT_AP),this._connectInfo=t;let n=this._cancelTokenSource.token;return this._retryConfig=r,new fe((i,o)=>{this.on(js.CONNECTION_STATE_CHANGE,(a,s)=>{a===ma.CONNECTED&&i()}),this.requestAP(t,n,r).then(a=>{this.connectWorker(a)}).catch(a=>{o(a)})})}updateConfig(t){var r;this._moderationInterval=(r=t.interval)!==null&&r!==void 0?r:1e3,t.extraInfo&&(this._extraInfo=this._encoder.encode(t.extraInfo)),t.vendor&&(this._vendor=t.vendor),w.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(t))),this.connectionState===ma.CONNECTED&&this.inspectImage()}async requestAP(t,r,n){let i=L("WEBCS_DOMAIN").map(l=>"https://".concat(l,"/api/v1")),o=await function(l,c,u,h){let{appId:f,areaCode:p,cname:m,sid:g,token:y,uid:v}=c;Lp++;let b="moderation_plugin",_={service_name:b,json_body:JSON.stringify({appId:f,areaCode:p,cname:m,command:"allocateEdge",requestId:Lp,seq:Lp,sid:g,appToken:y,ts:Date.now(),uid:v+""})},S,I,A=l[0];return il(async()=>{S=Date.now();let D=await ol(A,{data:_,cancelToken:u,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(I=Date.now()-S,D.code!==0){let V=new q(O.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+D.code,{retry:!0,responseTime:I});throw w.error(V.toString()),V}let M=JSON.parse(D.json_body);if(M.code!==200){let V=new q(O.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(M.code,", reason: ").concat(M.reason),{code:M.code,responseTime:I});throw w.error(V.toString()),V}if(!M.servers||!Array.isArray(M.servers)||M.servers.length===0){let V=new q(O.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:M.code,responseTime:I});throw w.error(V.toString()),V}if(!M.servers.some(V=>!!V.wss)){let V=new q(O.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:M.code,responseTime:I});throw w.error(V.toString()),V}let H=L("IMAGE_MODERATION_WORKER_HOST");return{addressList:M.servers.map(V=>{let{address:G,wss:Y}=V;if(G&&Y)return"wss://".concat(G.replace(/\./g,"-"),".").concat(H,":").concat(Y,"/moderation")}).filter(V=>!!V),workerToken:M.workerToken,vid:M.vid,ticket:M.appTicket,responseTime:I}},(D,M)=>(Te.apworkerEvent(g,{success:!0,sc:200,serviceName:b,responseDetail:JSON.stringify(D.addressList),firstSuccess:M===0,responseTime:I,serverIp:l[M%l.length]}),!1),(D,M)=>(Te.apworkerEvent(g,{success:!1,sc:D.data&&D.data.code||200,serviceName:b,responseTime:I,serverIp:l[M%l.length]}),!!(D.code!==O.OPERATION_ABORTED&&D.code!==O.UNEXPECTED_RESPONSE||D.data&&D.data.retry)&&(A=l[(M+1)%l.length],!0)),h)}(i,t,r,n);this.emit(js.STATE_CHANGE,Tf.AP_CONNECTED);let{addressList:a,ticket:s}=o;return this._ticket=s,a}async connectWorker(t){this.emit(js.STATE_CHANGE,Tf.CONNECT_WORKER),await this._workerConnection.init(t,1e4)}handleWorkerEvents(){this._workerConnection.on(Ke.CONNECTED,async()=>{this.emit(js.STATE_CHANGE,Tf.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=ma.CONNECTED}),this._workerConnection.on(Ke.CLOSED,()=>{this.connectionState=ma.CLOSED}),this._workerConnection.on(Ke.FAILED,()=>{this.connectionState=ma.CLOSED}),this._workerConnection.on(Ke.RECONNECTING,()=>{this.connectionState=this.connectionState===ma.CONNECTED?ma.RECONNECTING:ma.CONNECTING}),this._workerConnection.on(Ke.ON_MESSAGE,async t=>{if(t.data instanceof ArrayBuffer){let r=y8e(new Uint8Array(t.data));L("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&w.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(r)),this._uploadNum++,r.code===void 0||r.code===0||(this._uploadFailedNum++,w.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(r.code,", msg is ").concat(r.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{Te.reportApiInvoke(this._connectInfo.sid||null,{name:en.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,r.code],tag:xr.TRACER}).onError(new q(O.IMAGE_MODERATION_UPLOAD_FAILED,r.msg)),this._uploadTimer=null},L("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else w.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on(Ke.WILL_RECONNECT,(t,r,n)=>{t==="recover"&&n(t),n("tryNext")}),this._workerConnection.on(Ke.REQUEST_NEW_URLS,(t,r)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(t).catch(r)})}static intToLong(t){return{low:t|=0,high:t>>31,unsigned:t>=0}}async requestToInspectImage(){let t=xa(this,js.CLIENT_LOCAL_VIDEO_TRACK),r={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(t){if(!t.isPlaying)return void(L("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&w.debug("Only the track being played can be inspected"));this._sequence++;let n=await this.generateRequestData(t,r);this._workerConnection.sendMessage(n,!0,!0)}else L("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&w.debug("Only the track being published can be inspected")}async generateRequestData(t,r){let{appId:n,cname:i,cid:o,vid:a,sid:s,uid:l}=r,c=Date.now(),u=await t.getCurrentFrameImage("image/jpeg",this.quality),h=await Nte(u,n,i),f=this._sequence+"-"+o+"-"+l+"-"+c+"-"+er(12,""),p={appId:n,cid:o,cname:i,deviceId:"",elapse:yre.intToLong(Number(c-this._moderationStartTime)),fileSize:u.buffer.byteLength,height:u.height,width:u.width,jpg:h,networkType:6,osType:7,requestId:f,sdkVersion:"4.22.0",sequence:this._sequence,sid:s,timestamp:C8e(c),uid:l,vid:a,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};this._extraInfo===void 0&&delete p.callbackData;let m=g8e(p);if(m.byteLength<this._workerMessageLengthLimit){if(L("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){let g=function(y){for(var v=1;v<arguments.length;v++){var b=arguments[v]!=null?arguments[v]:{};v%2?RH(Object(b),!0).forEach(function(_){R(y,_,b[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(b)):RH(Object(b)).forEach(function(_){Object.defineProperty(y,_,Object.getOwnPropertyDescriptor(b,_))})}return y}({},p);delete g.jpg,w.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(g))}return m}{let g=this.quality*this._qualityRatio;return this.quality=g,await this.generateRequestData(t,{appId:n,cname:i,cid:o,vid:a,sid:s,uid:l})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=to.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=ma.CLOSED,this.emit(js.STATE_CHANGE,Tf.CLOSED)}};function vre(e){if(Wt(e.interval,"interval",1e3,1/0),e&&e.extraInfo&&e.extraInfo.length>1024)throw new q(O.INVALID_PARAMS,"config.extraInfo length cannot exceed 1024 bytes");if(e&&e.vendor&&e.vendor.length>1024)throw new q(O.INVALID_PARAMS,"config.vendor length cannot exceed 1024 bytes")}var R8e={name:"ImageModeration",create:function(e){let{config:t}=e;return vre(t),new x8e(t)}},IH,NH,AH,OH,kH,PH,DH,LH,MH,jH,UH,FH,VH,BH,$H,HH,zH,GH,WH,KH,qH,YH,XH,JH,QH,ZH,e7,t7,r7,n7,i7,o7,a7,s7,l7,c7,u7,d7,h7,f7,me;function p7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Fs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p7(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}ai.setLogger(w);var I8e=(IH=Le(),NH=Le({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof pp))return[t];t=[t]}return t.map(r=>r?Object(r).toString():"null")}}),AH=Le({argsMap:(e,t)=>(t||(t=[]),Array.isArray(t)||t.trackMediaType!==Xm.DATA?(Array.isArray(t)||(t=[t]),t.map(r=>r.getTrackId())):[t.getChannelId()])}),OH=Le({argsMap:(e,t,r,n)=>[typeof t=="object"?t.uid:t,r,n]}),kH=Le({argsMap:(e,t,r)=>[t,r]}),PH=Le({argsMap:(e,t)=>t.map(r=>{let{user:n,mediaType:i}=r;return[n==null?void 0:n.uid,i]})}),DH=Le({argsMap:(e,t,r,n)=>[typeof t=="object"?t.uid:t,r,n]}),LH=Le({argsMap:(e,t)=>t.map(r=>{let{user:n,mediaType:i}=r;return{uid:n==null?void 0:n.uid,mediaType:i}})}),MH=Le(),jH=Le(),UH=Le(),FH=Le(),VH=Le(),BH=Le(),$H=Le(),HH=Le(),zH=Le(),GH=Le(),WH=Le(),KH=Le(),qH=Le(),YH=Le(),XH=Le({argsMap:(e,t)=>[t]}),JH=Le(),QH=Le(),ZH=Le(),e7=Le(),t7=Le(),r7=Le(),n7=Le(),i7=Le(),o7=Le({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),a7=Le(),s7=Le(),l7=Le(),c7=Le(),u7=Le(),d7=Le(),h7=Le({reportResult:!0}),f7=Le(),me=class extends _r{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return((e=this._config)===null||e===void 0?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e){let t;if(super(),R(this,"store",void 0),R(this,"_uid",void 0),R(this,"_channelName",void 0),R(this,"_uintUid",void 0),R(this,"_users",[]),R(this,"_config",void 0),R(this,"_clientId",void 0),R(this,"_appId",void 0),R(this,"_sessionId",null),R(this,"_key",void 0),R(this,"_rtmConfig",{}),R(this,"_joinInfo",void 0),R(this,"_gateway",void 0),R(this,"_statsCollector",void 0),R(this,"_configDistribute",void 0),R(this,"_leaveMutex",new ai("client-leave")),R(this,"_publishMutex",new ai("client-publish")),R(this,"_renewTokenMutex",new ai("client-renewtoken")),R(this,"_subscribeMutex",new ai("client-subscribe")),R(this,"_encryptionMode","none"),R(this,"_encryptionSecret",null),R(this,"_encryptionSalt",null),R(this,"_encryptDataStream",!1),R(this,"_encryptDataStreamKey",null),R(this,"_encryptDataStreamIv",null),R(this,"_proxyServer",void 0),R(this,"_turnServer",{servers:[],mode:"auto"}),R(this,"_cloudProxyServerMode","disabled"),R(this,"_isDualStreamEnabled",!1),R(this,"_defaultStreamFallbackType",void 0),R(this,"_lowStreamParameter",void 0),R(this,"_streamFallbackTypeCacheMap",new Map),R(this,"_remoteStreamTypeCacheMap",new Map),R(this,"_axiosCancelSource",to.CancelToken.source()),R(this,"_audioVolumeIndicationInterval",void 0),R(this,"_networkQualityInterval",void 0),R(this,"_userOfflineTimeout",void 0),R(this,"_streamRemovedTimeout",void 0),R(this,"_liveTranscodeStreamingClient",void 0),R(this,"_liveRawStreamingClient",void 0),R(this,"_channelMediaRelayClient",void 0),R(this,"_networkQualitySensitivity","normal"),R(this,"_p2pChannel",void 0),R(this,"_useLocalAccessPoint",!1),R(this,"_setLocalAPVersion",void 0),R(this,"_joinAndNotLeaveYet",!1),R(this,"_numberOfJoinCount",0),R(this,"_remoteDefaultVideoStreamType",void 0),R(this,"_inspect",void 0),R(this,"_moderation",void 0),R(this,"_license",void 0),R(this,"_pendingPublishedUsers",[]),R(this,"ntpAlignErrorCount",0),R(this,"remoteInboundOffset",0),R(this,"_handleLocalTrackEnable",(r,n,i)=>{this.publish(r,!1).then(n).catch(i)}),R(this,"_handleLocalTrackDisable",(r,n,i)=>{this.unpublish(r).then(n).catch(i)}),R(this,"_handleUserOnline",r=>{if(L("BLOCK_LOCAL_CLIENT")&&wd(r.uid,this.channelName))return void w.debug("[".concat(r.uid,"] will be ignored in local"));this.isStringUID&&typeof r.uid!="string"&&w.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));let n=this._users.find(i=>i.uid===r.uid);if(n)n._trust_in_room_=!0,n._is_pre_created&&(n._is_pre_created=!1,this.safeEmit(gt.USER_JOINED,n));else{let i=new gu(r.uid,r.uint_id||r.uid);this._users.push(i),w.debug("[".concat(this._clientId,"] user online"),r.uid),this.safeEmit(gt.USER_JOINED,i)}}),R(this,"_handleUserOffline",r=>{if(L("BLOCK_LOCAL_CLIENT")&&wd(r.uid,this.channelName))return;let n=this._users.find(i=>i.uid===r.uid);n&&(this._handleRemoveStream(r),this._handleRemoveDataChannels(r),n._audio_pre_subscribed||n._video_pre_subscribed?n._is_pre_created=!0:aS(this._users,n),this._remoteStreamTypeCacheMap.delete(n.uid),this._streamFallbackTypeCacheMap.delete(n.uid),w.debug("[".concat(this._clientId,"] user offline"),r.uid,"reason:",r.reason),this.safeEmit(gt.USER_LEAVED,n,r.reason))}),R(this,"_handleAddAudioOrVideoStream",(r,n,i,o,a,s,l)=>{if(L("BLOCK_LOCAL_CLIENT")&&wd(n,this.channelName))return;let c=this._users.find(h=>h.uid===n);if(!c)return void w.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));w.debug("[".concat(this._clientId,"] stream added with uid ").concat(n,", type ").concat(r)),this.store.subscribe(c.uid,r,void 0,void 0,void 0,Date.now());let u=r==="audio"?c.hasAudio:c.hasVideo;c._uintid||(c._uintid=a||n),r==="audio"?c._trust_audio_stream_added_state_=!0:c._trust_video_stream_added_state_=!0,r==="audio"?(c._audio_added_=!0,i!==void 0&&(c._audioSSRC=i),o!==void 0&&(c._cname=o),s&&(c._audioOrtc=s)):(c._video_added_=!0,i!==void 0&&(c._videoSSRC=i),o!==void 0&&(c._cname=o),l!==void 0&&(c._rtxSsrcId=l),s&&(c._videoOrtc=s)),(r==="audio"?c.hasAudio:c.hasVideo)&&!u&&(w.info("[".concat(this._clientId,"] remote user ").concat(c.uid," published ").concat(r)),this.safeEmit(gt.USER_PUBLISHED,c,r)),r==="video"?Te.onGatewayStream(this._sessionId,On.ON_ADD_VIDEO_STREAM,vr.ON_ADD_VIDEO_STREAM,{peer:a||n,ssrc:c._videoSSRC}):Te.onGatewayStream(this._sessionId,On.ON_ADD_AUDIO_STREAM,vr.ON_ADD_AUDIO_STREAM,{peer:a||n,ssrc:c._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(c,r,i).then(h=>{if(h&&(w.debug("[".concat(this._clientId,"] resubscribe ").concat(r," for user ").concat(c.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof TE))return this._p2pChannel.unsubscribe(c,r,!0).then(()=>this._subscribe(c,r,!0).catch(f=>{w.error("[".concat(this._clientId,"] resubscribe error"),f.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(c,r)&&(w.debug("[".concat(this._clientId,"] resubscribe ").concat(r," for user ").concat(c.uid," after reconnect.")),this._subscribe(c,r,!0).catch(h=>{w.error("[".concat(this._clientId,"] resubscribe error"),h.toString())}))}),R(this,"_handleRemoveStream",r=>{if(L("BLOCK_LOCAL_CLIENT")&&wd(r.uid,this.channelName))return;let n=this._users.find(o=>o.uid===r.uid);if(!n)return void w.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));w.debug("[".concat(this._clientId,"] stream removed with uid ").concat(r.uid));let i=()=>{};n.hasAudio&&n.hasVideo?i=()=>{w.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished audio track")),this.safeEmit(gt.USER_UNPUBLISHED,n,"audio"),w.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished video track")),this.safeEmit(gt.USER_UNPUBLISHED,n,"video")}:n.hasVideo?i=()=>{w.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished video track")),this.safeEmit(gt.USER_UNPUBLISHED,n,"video")}:n.hasAudio&&(i=()=>{w.info("[".concat(this._clientId,"] remote user ").concat(n.uid," unpublished audio track")),this.safeEmit(gt.USER_UNPUBLISHED,n,"audio")}),n._video_pre_subscribed||n._audio_pre_subscribed||(n._trust_audio_stream_added_state_=!0,n._trust_video_stream_added_state_=!0,n._audio_added_=!1,n._video_added_=!1,this._p2pChannel instanceof TE&&this._p2pChannel.unsubscribe(n).then(o=>{if(o)return this._gateway.unsubscribe(o,n.uid)}),n._audioSSRC=void 0,n._videoSSRC=void 0,n._audioOrtc=void 0,n._videoOrtc=void 0,n._rtxSsrcId=void 0),Te.onGatewayStream(this._sessionId,On.ON_REMOVE_STREAM,vr.ON_REMOVE_STREAM,{peer:r.uint_id||r.uid}),i()}),R(this,"_handleSetStreamLocalEnable",(r,n,i)=>{if(L("BLOCK_LOCAL_CLIENT")&&wd(n,this.channelName))return;let o=this._users.find(l=>l.uid===n);if(!o)return void w.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));w.debug("[".concat(this._clientId,"] local ").concat(r," ").concat(i?"enabled":"disabled"," with uid ").concat(n));let a=r==="audio"?o.hasAudio:o.hasVideo;if(r==="audio"){o._trust_audio_enabled_state_=!0;let l=o._audio_enabled_;if(o._audio_enabled_=i,o._audio_enabled_===l)return;{let c=o._audio_enabled_?"enable-local-audio":"disable-local-audio";w.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(n,", msg: ").concat(c)),this.safeEmit(gt.USER_INFO_UPDATED,n,c)}}else{o._trust_video_enabled_state_=!0;let l=o._video_enabled_;if(o._video_enabled_=i,o._video_enabled_===l)return;{let c=o._video_enabled_?"enable-local-video":"disable-local-video";w.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(n,", msg: ").concat(c)),this.safeEmit(gt.USER_INFO_UPDATED,n,c)}}let s=r==="audio"?o.hasAudio:o.hasVideo;return a!==s?!a&&s?(w.info("[".concat(this._clientId,"] remote user ").concat(n," published ").concat(r)),void this.safeEmit(gt.USER_PUBLISHED,o,r)):(r==="video"&&o._videoTrack&&o._videoTrack._destroy(),r==="audio"&&o._audioTrack,this._p2pChannel.muteRemote(o,r),w.info("[".concat(this._clientId,"] remote user ").concat(n," unpublished ").concat(r)),void this.safeEmit(gt.USER_UNPUBLISHED,o,r)):void 0}),R(this,"_handleMuteStream",(r,n,i)=>{if(L("BLOCK_LOCAL_CLIENT")&&wd(r,this.channelName))return;w.debug("[".concat(this._clientId,"] receive mute message"),r,n,i);let o=this._users.find(l=>l.uid===r);if(!o)return void w.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(r));let a=n==="audio"?o.hasAudio:o.hasVideo;if(n==="audio"){o._trust_audio_mute_state_=!0;let l=o._audio_muted_;if(o._audio_muted_=i,o._audio_muted_===l)return;{let c=o._audio_muted_?"mute-audio":"unmute-audio";w.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(r,", msg: ").concat(c)),this.safeEmit(gt.USER_INFO_UPDATED,r,c)}}else{o._trust_video_mute_state_=!0;let l=o._video_muted_;if(o._video_muted_=i,o._video_muted_===l)return;{let c=o._video_muted_?"mute-video":"unmute-video";w.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(r,", msg: ").concat(c)),this.safeEmit(gt.USER_INFO_UPDATED,r,c)}}let s=n==="audio"?o.hasAudio:o.hasVideo;if(a!==s){if(!a&&s)return(n==="audio"?o._audioSSRC:o._videoSSRC)?(w.info("[".concat(this._clientId,"] remote user ").concat(r," published ").concat(n)),void this.safeEmit(gt.USER_PUBLISHED,o,n)):void w.warning("[".concat(this._clientId,"] remote user ").concat(r," receive ").concat(n," unmute message  before add stream message, ").concat(n," SSRC doesn't exist yet."));n==="video"&&o._videoTrack&&!o._video_pre_subscribed&&o._videoTrack._destroy(),n==="audio"&&o._audioTrack,this._p2pChannel.muteRemote(o,n),w.info("[".concat(this._clientId,"] remote user ").concat(r," unpublished ").concat(n)),this.safeEmit(gt.USER_UNPUBLISHED,o,n)}}),R(this,"_handleP2PLost",async r=>{w.debug("[".concat(this._clientId,"] receive p2p lost"),r),parseInt(r.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():w.warning("[".concat(this._clientId,"] P2PLost stream not found"),r)}),R(this,"_handleTokenWillExpire",()=>{w.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(gt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),R(this,"_handleBeforeUnload",r=>{r.type==="beforeunload"&&r.returnValue!==void 0&&r.returnValue!==""||(this.leave(),w.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),R(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(gt.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});let r={downlinkNetworkQuality:0,uplinkNetworkQuality:0};r.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),r.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(gt.NETWORK_QUALITY,r)}),R(this,"_handleP2PAddAudioOrVideoStream",(r,n,i,o)=>{let a=this._users.find(l=>l.uid===n);if(!a)return void w.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));w.debug("[".concat(this._clientId,"] stream added with uid ").concat(n,", type ").concat(r)),this.store.subscribe(a.uid,r,void 0,void 0,void 0,Date.now());let s=r==="audio"?a.hasAudio:a.hasVideo;r==="audio"?a._trust_audio_stream_added_state_=!0:a._trust_video_stream_added_state_=!0,r==="audio"?(a._audio_added_=!0,i!==void 0&&(a._audioSSRC=i),o!==void 0&&(a._audioMid=o)):(a._video_added_=!0,i!==void 0&&(a._videoSSRC=i),o!==void 0&&(a._videoMid=o)),(r==="audio"?a.hasAudio:a.hasVideo)&&!s&&(w.info("[".concat(this._clientId,"] remote user ").concat(a.uid," published ").concat(r)),this.safeEmit(gt.USER_PUBLISHED,a,r)),this._p2pChannel.hasPendingRemoteMedia(a,r)&&(w.debug("[".concat(this._clientId,"] resubscribe ").concat(r," for user ").concat(a.uid," after reconnect.")),this._subscribe(a,r,!0).catch(l=>{w.error("[".concat(this._clientId,"] resubscribe error"),l.toString())}))}),this._config=e,this._clientId=er(5,"client-"),this.store=new ZFe(e.codec,e.audioCodec,e.mode,this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),w.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(Ra," build: ").concat(IL,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{jB(e.clientRoleOptions),t=Object.assign({},e.clientRoleOptions)}catch(r){w.warning("[".concat(this._clientId,"] ").concat(r.toString()))}this._statsCollector=new nre(this.store),this._statsCollector.onStatsException=(r,n,i)=>{w.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(r,", msg: ").concat(n,", uid: ").concat(i)),this.safeEmit(gt.EXCEPTION,{code:r,msg:n,uid:i})},this._statsCollector.onUploadPublishDuration=(r,n,i,o)=>{let a=this._users.find(s=>s.uid===r);a&&Te.peerPublishStatus(this._sessionId,{subscribeElapse:o,audioPublishDuration:n,videoPublishDuration:i,peer:a._uintid})},this.store.useP2P=e.mode==="p2p",this._gateway=new N6e(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||Yr,httpRetryConfig:e.httpRetryConfig||Yr,forceWaitGatewayResponse:e.forceWaitGatewayResponse===void 0||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:t}),this._configDistribute=new F6e,this.store.useP2P?(this._p2pChannel=new To(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new TE(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,r,n,i){let o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],a=arguments.length>6&&arguments[6]!==void 0&&arguments[6];Gt("JOIN_GATEWAY_USE_443PORT_ONLY",o),Gt("JOIN_GATEWAY_USE_DUAL_DOMAIN",a);let s=this._gateway.signal.websocket;return s instanceof AL&&(s.use443PortOnly=o,s.tryDoubleDomain=a),async function(l,c,u){rE.get(l)||rE.set(l,[]),nE.get(l)||nE.set(l,c),cl.get(l)||cl.set(l,0);let h=rE.get(l),f=nE.get(l);if(!h||!f)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(cl.get(l)===f){let v=Pv();h.push(v),await v.promise}cl.set(l,cl.get(l)+1);for(var p=arguments.length,m=new Array(p>3?p-3:0),g=3;g<p;g++)m[g-3]=arguments[g];let y=await u(...m);return cl.set(l,cl.get(l)-1),cl.get(l)===f-1&&h.length>0&&(h[0].resolve(),h.shift()),cl.get(l)===0&&(rE.set(l,[]),nE.set(l,0),cl.set(l,0)),y}("client.join",L("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,r,n,i)}async join(e,t,r,n,i){let o=++this._numberOfJoinCount;this.store.joinStart(),n&&(this.store.uid=n);let a=(oE||oE||(oE=(window.location.protocol.split(":")[0]||"").toUpperCase(),oE))==="HTTPS",s=zB()?window.isSecureContext:"Browser Not Support";(!zB()&&!a||!window.isSecureContext)&&w.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser"),this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),w.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),Te.setAppId(e);try{if(!r&&r!==null)throw new q(O.INVALID_PARAMS,"Invalid token: ".concat(r,". If you don not use token, set it to null"));r&&kn(r,"token",1,2047),kn(e,"appid",1,2047),fC(t),n&&pC(n),i&&kn(i,"optionalInfo",1,2047)}catch(g){throw Te.reportApiInvoke(dp(),{name:en.JOIN,options:[e,t,r,n],states:{isHttps:a,isSecureContext:s},tag:xr.TRACER}).onError(g),g}if(this._leaveMutex.isLocked&&(w.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),w.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){let g=new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw Te.reportApiInvoke(dp(),{name:en.JOIN,options:[e,t,r,n],states:{isHttps:a,isSecureContext:s},tag:xr.TRACER}).onError(g),g}this._gateway.state="CONNECTING";let l=await vH({appId:e,cname:t,uid:n,stringUid:typeof n=="string"?n:void 0,token:r||e,cloudProxyServer:this._cloudProxyServerMode});if(!this._joinAndNotLeaveYet)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));let c=(l==null?void 0:l.sid)||dp();w.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(o)),this._sessionId||(this._sessionId=c,this.store.sessionId=this._sessionId);let u=Te.reportApiInvoke(c,{name:en.JOIN,options:[e,t,r,n],states:{isHttps:a,isSecureContext:s},tag:xr.TRACER}),h=Fs(Fs({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:typeof n!="string"?n:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:r||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!l},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(h.setLocalAPVersion=this._setLocalAPVersion),typeof n=="string"&&(h.stringUid=n,this._uintUid?(h.uid=this._uintUid,this._uintUid=void 0):h.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(h.aesmode=this._encryptionMode,h.aespassword=await(async g=>{let y=function(S){let I=window.atob(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),A=new Uint8Array(new ArrayBuffer(I.length));for(let D=0;D<I.length;D+=1)A[D]=I.charCodeAt(D);return A}(),v=await window.crypto.subtle.importKey("spki",y,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),b=TL(g),_=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},v,b);return function(S){let I="";for(let A=0;A<S.length;A+=1)I+=String.fromCharCode(S[A]);return window.btoa(I)}(new Uint8Array(_))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(h.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&(this._encryptionMode==="aes-128-gcm2"||this._encryptionMode==="aes-256-gcm2"))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){let g=new TextEncoder,y=L("USE_PURE_ENCRYPTION_MASTER_KEY")?g.encode(h.appId+this._encryptionSecret+this._encryptionSecret):g.encode(h.appId+h.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(v,b,_){let S=await window.crypto.subtle.importKey("raw",b,"PBKDF2",!1,["deriveBits","deriveKey"]),I=v==="aes-128-gcm2"?128:256,A=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:WB,hash:"SHA-256",salt:_},S,I+eVe);return new Uint8Array(A).subarray(I/8)}(this._encryptionMode,y,Xd(this._encryptionSalt)),this._encryptDataStreamKey=await async function(v,b,_){let S=await window.crypto.subtle.importKey("raw",b,"PBKDF2",!1,["deriveBits","deriveKey"]),I=v==="aes-128-gcm2"?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:WB,hash:"SHA-256",salt:_},S,{name:"AES-GCM",length:I},!0,["encrypt","decrypt"])}(this._encryptionMode,y,Xd(this._encryptionSalt))}else s?w.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):w.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,w.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:h.stringUid});let f=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&f===this._sessionId&&Te.joinChannelTimeout(this._sessionId,5)},5e3);try{var p;let g,y=h.cloudProxyServer;if(ge(p=["proxy3","proxy4","proxy5"]).call(p,y)){let I=L("PROXY_SERVER_TYPE3");Array.isArray(I)?h.proxyServer=I[0]:h.proxyServer=I}if(Te.setProxyServer(h.proxyServer),w.setProxyServer(h.proxyServer),this.store.requestAPStart(),l){if(w.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(h.stringUid?", ".concat(h.stringUid," => ").concat(l.intUid):""," ")),h.stringUid&&!h.uid&&(h.uid=l.intUid),g={gatewayInfo:l.ap.gatewayInfo},L("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&h.turnServer.mode==="auto")if(l.ap.proxyInfo.addresses.length===0)w.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{let I=(await nte(l.ap.proxyInfo,l.ap.gatewayInfo.uid)).map(A=>({turnServerURL:A.address,tcpport:A.tcpport||zn.tcpport,udpport:A.udpport||zn.udpport,username:A.username||zn.username,password:A.password||zn.password,forceturn:!1,security:!0}));h.turnServer={mode:"manual",servers:I}}bH(l,h.stringUid)}else{if(h.stringUid&&!h.uid){let I;[I,g]=await fe.all([qte(h.stringUid,h,this._axiosCancelSource.token,this._config.httpRetryConfig||Yr,this.store),_$(h,this._axiosCancelSource.token,this._config.httpRetryConfig||Yr,!0,this.store)]),w.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(h.stringUid," => ").concat(I)),h.uid=I,g.gatewayInfo.uid=I,g.gatewayInfo.res.uid=I}else g=await _$(h,this._axiosCancelSource.token,this._config.httpRetryConfig||Yr,!0,this.store);if(!this._joinAndNotLeaveYet)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(h,this._axiosCancelSource.token),this._configDistribute.on(fk.UPDATE_BITRATE_LIMIT,I=>{this._p2pChannel.updateBitrateLimit(I)})},0),this._key=r||e;let v=g.gatewayInfo,b=h.uid?h.uid:v.uid;this._joinInfo=Fs(Fs({},h),{},{cid:v.cid,uid:b,vid:v.vid,apResponse:v.res,apGatewayAddress:v.apGatewayAddress,uni_lbs_ip:v.uni_lbs_ip,gatewayAddrs:v.gatewayAddrs}),this.store.intUid=b;let _=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));u.onSuccess(_),this._appId=e,this._channelName=h.cname,this._uid=_,this.store.uid=_,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(qn()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()},0);let S=h.stringUid?"string uid: ".concat(h.stringUid,",uid: ").concat(h.uid):"uid: ".concat(this._uid);return w.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(S)),setTimeout(()=>{w.startUpload()},5e3),this.store.joinEnd(),m=this,ge(pu).call(pu,m)||pu.push(m),this._cloudProxyServerMode==="disabled"&&Ct().supportWebCrypto&&L("ENABLE_PRELOAD")&&qL(this._joinInfo),_}catch(g){let y=Array.isArray(g)?g[0]:g;throw y&&y.code===O.OPERATION_ABORTED?w.warning("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),y):w.error("[".concat(this._clientId,"] join number: ").concat(o,", Joining channel failed, rollback"),y),y.code!==O.OPERATION_ABORTED&&this._numberOfJoinCount===o&&(this._gateway.state="DISCONNECTED",this._reset()),u.onError(y),y}var m}_joinGateway(){if(!this._joinInfo||!this._key)throw new q(O.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!L("JOIN_WITH_FALLBACK_SIGNAL_PROXY")))}async leave(){w.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(qn()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(t){let r=pu.indexOf(t);r!==-1&&pu.splice(r,1)}(this),this._statsCollector.stopUpdateStats();let e=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return w.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave(this.connectionState!=="CONNECTED"),w.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!Array.isArray(e)){if(!(e instanceof pp))return this._publishDataChannel(e);e=[e]}if(e.length===0)throw new q(O.INVALID_PARAMS,"param list is empty");let r=e;if(this._gateway.role==="audience")throw new q(O.INVALID_OPERATION,"audience can not publish stream");for(let i of r){if(!(i instanceof pp))throw new q(O.INVALID_PARAMS,"parameter is not local track");if(!i._enabled&&t)throw new q(O.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()))}w.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(r.map(i=>"".concat(i.getTrackId()," "))));let n=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&r.forEach(i=>{let o=this._configDistribute.getBitrateLimit();i instanceof ir&&o&&i.setBitrateLimit(o.uplink)});try{await this._publishHighStream(r),w.info("[".concat(this._clientId,"] Publish success, id ").concat(r.map(i=>"".concat(i.getTrackId()," "))))}catch(i){throw w.error("[".concat(this._clientId,"] publish error"),i.toString()),i}finally{n()}}async _publishDataChannel(e){Wt(e.id,"id",0,65535,!0),mc(e.ordered,"ordered"),kn(e.metadata,"metadata",0,512),w.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));let t=await this._publishMutex.lock();try{if(this._p2pChannel.getAllDataChannels().findIndex(i=>i.id===e.id)!==-1)throw new q(O.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||this._uid===void 0)throw new q(O.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&L("FORCE_TURN")&&!L("TURN_ENABLE_TCP")&&!L("TURN_ENABLE_UDP"))throw new q(O.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");let r=function(i){return fH(i,!1)}(e),n=await this._p2pChannel.publishDataChannel([r]);if(n.length>0){if(typeof r._originDataChannelId!="number")throw w.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new q(O.CREATE_DATACHANNEL_ERROR);try{await fe.all(n.map(i=>this._uid&&this._gateway.publishDataChannel(this._uid,i,!0))),await r._waitTillOpen()}catch(i){if(i.code!==O.DISCONNECT_P2P)throw i}}return w.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(r.id)),r}catch(r){throw w.error("[".concat(this._clientId,"] publish datachannels error"),r.toString()),r}finally{t()}}async unpublish(e){if(!this._joinInfo||this._uid===void 0)throw new q(O.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof pp))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);w.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map(n=>"".concat(n.getTrackId()," "))," "));let r=await this._publishMutex.lock();try{if(this._p2pChannel instanceof To){let n=await this._p2pChannel.unpublish(t);n&&await this._gateway.sendExtensionMessage(Dr.UNPUBLISH,{unpubMsg:n},!0)}else{let n=await this._p2pChannel.unpublish(t);n&&await this._gateway.unpublish(n,this._uid),w.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map(i=>"".concat(i.getTrackId()))))}}catch(n){throw w.error("[".concat(this._clientId,"] unpublish error"),n.toString()),n}finally{r&&r()}}async _unpublishDataChannel(e){e!==void 0&&e.length!==0||(e=this._p2pChannel.getAllDataChannels()),w.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map(r=>"".concat(r.id," "))," "));let t=await this._publishMutex.lock();try{let r=await this._p2pChannel.unpublishDataChannel(e);r&&await this._gateway.unpublishDataChannel(r),w.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map(n=>"".concat(n.id))))}catch(r){throw w.error("[".concat(this._clientId,"] unpublish dataChannel error"),r.toString()),r}finally{t&&t()}}async subscribe(e,t,r){if(!(e instanceof gu)){let n=this.remoteUsers.find(i=>i.uid===e);if(!n)throw new q(O.INVALID_REMOTE_USER,"user is not in the channel");e=n}return t==="datachannel"?this._subscribeDataChannel(e,r):this._subscribe(e,t)}async presubscribe(e,t){if(sn(t,"mediaType",["audio","video"]),this._p2pChannel instanceof To)throw new q(O.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new q(O.INVALID_OPERATION,"can't presub when not join");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));let r=t===xe.AUDIO,n=t===xe.VIDEO,i=await this._subscribeMutex.lock();try{let{ssrcId:o,ortc:a,rtxSsrcId:s,cname:l,uint_id:c}=await this._gateway.presubscribe(e,t,!0);if(o==null)throw new q(O.UNEXPECTED_RESPONSE,"no ssrc id");let u=this._users.find(f=>f.uid===e);u||(u=new gu(e,c||e),u._is_pre_created=!0,this._users.push(u)),l&&(u._cname=l),u._uintid||(u._uintid=c||e),r&&(u._audioSSRC=o,u._audio_pre_subscribed=!0,a&&(u._audioOrtc=a)),n&&(u._videoSSRC=o,u._video_pre_subscribed=!0,a&&(u._videoOrtc=a),s!=null&&(u._rtxSsrcId=s)),w.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(o)),await this._p2pChannel.subscribe(u,t,o,s,a);let h=r?u._audioTrack:u._videoTrack;if(!h)throw new q(O.UNEXPECTED_ERROR,"can not find remote track in user");return r&&(u._trust_audio_stream_added_state_=!0,u._audio_added_=!0),n&&(u._trust_video_stream_added_state_=!0,u._video_added_=!0),h}catch(o){throw w.error("[".concat(this._clientId,"] presub user ").concat(e," error"),o),o}finally{i()}}async _subscribeDataChannel(e,t){var r;if(Wt(t,"channelId",0,65535,!0),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find(a=>a===e))throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new q(O.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&e._dataChannels.length===0)throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new q(O.INVALID_REMOTE_USER,"user is not published");let n=(r=e._dataChannels)===null||r===void 0?void 0:r.find(a=>a.id===t);if(!n)throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new q(O.REMOTE_USER_IS_NOT_PUBLISHED);let i=await this._subscribeMutex.lock();w.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{let a=await this._p2pChannel.subscribeDataChannel(e,[n]);if(a&&ge(a).call(a,n.id))try{var o;if(typeof n._originDataChannelId!="number")throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new q(O.CREATE_DATACHANNEL_ERROR);let s={id:n.id,datachannelId:n._originDataChannelId,ordered:n.ordered,maxRetransmits:n.maxRetransmits,metadata:(o=n.metadata)!==null&&o!==void 0?o:""};await this._gateway.subscribeDataChannel(e.uid,s,!0),await n._waitTillOpen()}catch(s){if((s==null?void 0:s.code)!==O.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[n]),s;await this._p2pChannel.unsubscribeDataChannel(e,[n]),this._p2pChannel.setPendingRemoteDataChannel(e,n.id)}return w.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),n}finally{i()}}async _p2pSubscribe(e,t,r){if(sn(t,"mediaType",["audio","video"]),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(i=>i===e)){let i=new q(O.INVALID_REMOTE_USER,"user is not in the channel");throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),i}if(!e.hasAudio&&!e.hasVideo){let i=new q(O.INVALID_REMOTE_USER,"user is not published");throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),i}if(!r&&(t==="audio"&&!e.hasAudio||t==="video"&&!e.hasVideo)){let i=new q(O.REMOTE_USER_IS_NOT_PUBLISHED);throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),i}let n=await this._subscribeMutex.lock();w.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{let o=t==="audio"?e._audioSSRC:e._videoSSRC,a=t==="audio"?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof To&&await this._p2pChannel.subscribe(e,t,o,a)}catch(o){throw o}w.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(o=>{w.warning("[".concat(this._clientId,"] auto set fallback failed"),o)});let i=t==="audio"?e._audioTrack:e._videoTrack;if(!i)throw new q(O.UNEXPECTED_ERROR,"can not find remote track in user object");return i}catch(i){throw w.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),i),i}finally{n()}}async _subscribe(e,t,r){if(this._p2pChannel instanceof To)return this._p2pSubscribe(e,t);if(sn(t,"mediaType",["audio","video"]),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(l=>l===e)){let l=new q(O.INVALID_REMOTE_USER,"user is not in the channel");throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),l}if(!e.hasAudio&&!e.hasVideo){let l=new q(O.INVALID_REMOTE_USER,"user is not published");throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),l}if(!(r||(t!=="audio"||e.hasAudio&&e._audioSSRC!==void 0)&&(t!=="video"||e.hasVideo&&e._videoSSRC!==void 0))){let l=new q(O.REMOTE_USER_IS_NOT_PUBLISHED);throw w.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),l}let n=t==="audio"?e._audioSSRC:e._videoSSRC,i=t==="audio"?e._audioOrtc:e._videoOrtc,o=t==="video"?e._rtxSsrcId:void 0,a={stream_type:t==="audio"?xe.AUDIO:xe.VIDEO,ssrcId:n},s=await this._subscribeMutex.lock();w.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{let c=t==="audio"?e._audioSSRC:e._videoSSRC;c!==void 0&&c!==n&&(n=c,i=t==="audio"?e._audioOrtc:e._videoOrtc,o=t==="video"?e._rtxSsrcId:void 0,a={stream_type:t==="audio"?xe.AUDIO:xe.VIDEO,ssrcId:n}),ni.markSubscribeStart(this.store.clientId,n),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,n,o,i);try{this._p2pChannel.isPreSubScribe(n)||await this._gateway.subscribe(e.uid,a,!0)}catch(u){if((u==null?void 0:u.code)!==O.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),u;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(c){throw this._p2pChannel.reportSubscribeEvent(!1,c==null?void 0:c.code,e,t),c}w.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(c=>{w.warning("[".concat(this._clientId,"] auto set fallback failed"),c)});let l=t==="audio"?e._audioTrack:e._videoTrack;if(!l)throw new q(O.UNEXPECTED_ERROR,"can not find remote track in user object");return l}catch(l){throw w.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),l),l}finally{s()}}async massSubscribe(e){if(cc(e,"subscribeList"),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));let t=Date.now(),r=new Map,n=await this._subscribeMutex.lock();w.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map(s=>{let{user:l,mediaType:c}=s;return"user: ".concat(l==null?void 0:l.uid,", mediaType: ").concat(c)}).join("; ")));let i=(e=[...e]).map(s=>{let{user:l,mediaType:c}=s;return{user:l,mediaType:c}}),o=await this._p2pChannel.globalLock();try{var a;for(let l=e.length-1;l>=0;l--){let c=e[l],{user:u,mediaType:h}=c;if(sn(h,"mediaType",["audio","video"]),!u){let m=new q(O.INVALID_PARAMS,"user property does not exist in subscribeList item");throw w.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),m}if(!this._users.find(m=>m===u)){let m=new q(O.INVALID_REMOTE_USER,"user is not in the channel");w.error("[".concat(this._clientId,"] can not massSubscribe ").concat(u.uid,", this user is not in the channel")),i[l].error=m,e.splice(l,1);continue}if(h==="audio"&&(!u.hasAudio||u._audioSSRC===void 0)||h==="video"&&(!u.hasVideo||u._videoSSRC===void 0)){let m=new q(O.REMOTE_USER_IS_NOT_PUBLISHED);w.error("[".concat(this._clientId,"] can not subscribe ").concat(u.uid," with mediaType ").concat(h,", remote user is not published")),i[l].error=m,e.splice(l,1);continue}let f=pn.Video|pn.LwoVideo,p=r.get(u);if(p){if(h==="video"?p&f:p&pn.Audio){e.splice(l,1),w.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(u.uid,", mediaType:").concat(h," twice"));continue}r.set(u,p|(h==="video"?f:pn.Audio))}else r.set(u,h==="video"?f:pn.Audio)}for(let l=e.length-1;l>=0;l--){let c=e[l],{user:u,mediaType:h}=c,f=pn.Video|pn.LwoVideo;if(this._p2pChannel.hasRemoteMedia(u,h)){await this._p2pChannel.unmuteRemoteNoLock(u,h);let p=r.get(u);r.set(u,h==="video"?p^f:p^pn.Audio),e.splice(l,1)}}this.store.massSubscribe(e.map(l=>({userId:l.user.uid,type:l.mediaType})),t);let s=Zs(a=Array.from(r.entries())).call(a,(l,c)=>{let[u,h]=c;if(h===0)return l;let f={stream_id:u.uid,stream_type:h};return h&pn.Audio&&(f.audio_ssrc=u._audioSSRC),h&pn.Video&&(f.video_ssrc=u._videoSSRC),l.push(f),l},[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map(c=>{let{user:u,mediaType:h}=c;return{user:u,mediaType:h,ssrcId:h===xe.VIDEO?u._videoSSRC:u._audioSSRC,rtxSsrcId:h===xe.VIDEO?u._rtxSsrcId:void 0}}));let l=new Map;if(s=s.filter(c=>c.video_ssrc&&!this._p2pChannel.isPreSubScribe(c.video_ssrc)||c.audio_ssrc&&!this._p2pChannel.isPreSubScribe(c.audio_ssrc)||!c.video_ssrc&&!c.audio_ssrc),s.length>0){let c=await this._gateway.subscribeAll(s,!0);((c==null?void 0:c.users)||[]).forEach(u=>{let{stream_id:h,video_error_code:f,audio_error_code:p,error_code:m}=u;(f||p||m)&&l.set(h,{video_error_code:f,audio_error_code:p,error_code:m})})}if(Array.from(l.entries()).length>0){let c=[];Array.from(l.entries()).forEach(u=>{let[h,f]=u,p=this.remoteUsers.find(m=>m.uid===h);if(p){let m;f.error_code||f.video_error_code&&f.audio_error_code?m=void 0:f.video_error_code?m=xe.VIDEO:f.audio_error_code&&(m=xe.AUDIO),c.push({user:p,mediaType:m})}}),c.length>0&&await this._p2pChannel.massUnsubscribeNoLock(c)}for(let c of i){let u=l.get(c.user.uid);if(u){let h=u.error_code||c.mediaType==="audio"&&u.audio_error_code||c.mediaType==="video"&&u.video_error_code;if(h){let f=jv(h);w.error("user:".concat(c.user.uid," mediaType:").concat(c.mediaType," has massSubscribe error ").concat(f.desc)),c.error=new q(O.SUBSCRIBE_FAILED,"code ".concat(h,": ").concat(f.desc))}}c.error||(c.mediaType==="video"?c.track=c.user.videoTrack:c.track=c.user.audioTrack)}return this.store.massSubscribe(i.filter(c=>!c.error).map(c=>({userId:c.user.uid,type:c.mediaType})),void 0,Date.now()),i.forEach(c=>{var u;Te.subscribe(this.store.sessionId,{succ:!!c.error,ec:((u=c.error)===null||u===void 0?void 0:u.code)||null,video:c.mediaType===xe.VIDEO,audio:c.mediaType===xe.AUDIO,peerid:c.user.uid,subscribeRequestid:c.mediaType===xe.VIDEO?c.user._videoSSRC:c.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t),preSsrc:this._p2pChannel.isPreSubScribe(c.user._videoSSRC)},!0)}),w.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map(c=>{let{user:u,mediaType:h}=c;return"user: ".concat(u==null?void 0:u.uid,", mediaType: ").concat(h)}).join("; "))),i}catch(l){throw await this._p2pChannel.massUnsubscribeNoLock(e),l}}finally{o(),n()}}async unsubscribe(e,t,r){if(!(e instanceof gu)){let i=this.remoteUsers.find(o=>o.uid===e);if(!i)throw new q(O.INVALID_REMOTE_USER,"user is not in the channel");e=i}if(t||this.store.useP2P){if(t==="datachannel")return this._unsubscribeDataChannel(e,r)}else await this._unsubscribeDataChannel(e,r);if(t&&sn(t,"mediaType",["audio","video"]),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(i=>i===e)){let i=new q(O.INVALID_REMOTE_USER,"user is not in the channel");throw w.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),i}w.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));let n=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof To)await this._p2pChannel.unsubscribe(e,t);else{let i=await this._p2pChannel.unsubscribe(e,t);i&&await this._gateway.unsubscribe(i,e.uid),t&&t!=="audio"||(e._audio_pre_subscribed=!1),t&&t!=="video"||(e._video_pre_subscribed=!1),e._is_pre_created&&aS(this._users,e),w.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(i){if(i.code===O.DISCONNECT_P2P)return void w.warning("disconnecting p2p, abort unsubscribe request.");throw w.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),i.toString()),i}finally{n()}}async _unsubscribeDataChannel(e,t){if(t&&Wt(t,"id",0,65535,!0),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find(n=>n===e)){let n=new q(O.INVALID_REMOTE_USER,"user is not in the channel");throw w.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),n}let r;if(typeof t=="number"){let n=e._dataChannels.find(i=>i.id===t);n&&(r=[n])}else r=e._dataChannels;if(r===void 0){let n=new q(O.REMOTE_USER_IS_NOT_PUBLISHED);throw w.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),n}w.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(r.map(n=>n.id)));try{let n=await this._p2pChannel.unsubscribeDataChannel(e,r);n&&await this._gateway.unsubscribeDataChannel(n,e.uid),w.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(n))}catch(n){if(n.code===O.DISCONNECT_P2P)return void w.warning("disconnecting p2p, abort unsubscribe request.");throw w.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),n.toString()),n}}async massUnsubscribe(e){if(cc(e,"unsubscribeList"),!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");w.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map(r=>{let{user:n,mediaType:i}=r;return"user: ".concat(n==null?void 0:n.uid,", mediaType: ").concat(i,";")}).join())),e=[...e];let t=new Map;for(let r=e.length-1;r>=0;r--){let{user:n,mediaType:i}=e[r];if(!n){let a=new q(O.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw w.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),a}if(sn(i,"mediaType",["video","audio",void 0]),!this._users.find(a=>a===n)){w.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(n.uid,", user is not in the channel")),e.splice(r,1);continue}let o=pn.Video|pn.LwoVideo;if(t.has(n)){let a=t.get(n),s;switch(i){case"video":s=a&o;break;case"audio":s=a&pn.Audio;break;default:s=a&(pn.Audio|o)}if(s){w.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(n.uid,",mediaType:").concat(i," twice.")),e.splice(r,1);continue}i?i==="audio"?t.set(n,a|pn.Audio):i==="video"&&t.set(n,a|o):t.set(n,a|pn.Audio|o)}else i?i==="audio"?t.set(n,pn.Audio):i==="video"&&t.set(n,o):t.set(n,pn.Audio|o)}try{let r=await this._p2pChannel.massUnsubscribe(e);r&&await this._gateway.massUnsubscribe(r),w.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map(n=>{let{user:i,mediaType:o}=n;return"user: ".concat(i==null?void 0:i.uid,", mediaType: ").concat(o,";")}).join()))}catch(r){if(r.code===O.DISCONNECT_P2P)return void w.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw w.error("[".concat(this._clientId,"] massUnsubscribe error"),r.toString()),r}}async setLowStreamParameter(e){(function(r){if(!r)throw new J(O.INVALID_PARAMS);gr(r.width)||hI(r.width,"streamParameter.width"),gr(r.height)||hI(r.height,"streamParameter.height"),gr(r.framerate)||hI(r.framerate,"streamParameter.framerate"),gr(r.bitrate)||Wt(r.bitrate,"streamParameter.bitrate")})(e),(!e.width&&e.height||e.width&&!e.height)&&w.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),w.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));let t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,oe.LocalVideoLowTrack)}async enableDualStream(){if(!Ct().supportDualStream)throw Te.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new q(O.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new q(O.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(e){throw Te.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e}this._isDualStreamEnabled=!0,Te.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),w.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new q(O.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(oe.LocalVideoLowTrack))try{let e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(e){throw Te.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e}this._isDualStreamEnabled=!1,Te.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),w.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(function(r){sn(r,"role",["audience","host"])}(e),t&&jB(t),this.mode==="rtc"||this.mode==="p2p")throw w.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new q(O.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&e==="host")throw new q(O.INVALID_OPERATION,"host mode can not set audience latency level");if(e==="audience"&&this._p2pChannel.hasLocalMedia())throw new q(O.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(e,t),this._config.role=e,w.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}getRemoteInboundOffset(){var e;let t=(e=this._p2pChannel.getStats())===null||e===void 0?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;let r=t.timestamp-Date.now();return Math.abs(r)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?r:0}getNtpWallTimeInMs(){return document.visibilityState==="visible"&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(kn(e,"proxyServer"),!t){if(this.connectionState!=="DISCONNECTED")throw new q(O.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new q(O.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,Te.setProxyServer(this._proxyServer),w.setProxyServer(this._proxyServer),w.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if(this.connectionState!=="DISCONNECTED")throw new q(O.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new q(O.INVALID_OPERATION,"You have already set the proxy")}if(cC(e))return this._turnServer={servers:e,mode:"original-manual"},void w.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map(r=>r.urls).join(","),"."));e.forEach(r=>Hee(r)),this._turnServer={servers:e,mode:"manual"},w.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if(this.connectionState!=="DISCONNECTED")throw new q(O.INVALID_OPERATION,"you should set license before join channel");if(kn(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new q(O.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,w.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if(this.connectionState!=="DISCONNECTED")throw new q(O.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new q(O.INVALID_OPERATION,"You have already set the proxy");let t=[3,4,5],r;switch(e===void 0&&(e=3),e){case 1:case 2:throw new q(O.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:r="proxy3";break;case 4:r="proxy4";break;case 5:r="proxy5";break;default:throw new q(O.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=r,this.store.cloudProxyServerMode=r,w.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new q(O.INVALID_OPERATION,"Stop proxy server after leave channel");Te.setProxyServer(),w.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",w.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new q(O.INVALID_PARAMS,"accessPoints is required.");cc(e.accessPoints.serverList,"accessPoints.serverList"),kn(e.accessPoints.domain,"accessPoints.domain");let t=(f,p)=>{Wt(f,p,0,65535,!0)},r=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),r=e.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new q(O.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");L("CLOSE_AFB_FOR_LOCAL_AP")&&(Gt("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),Gt("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));let n=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,o=e.accessPoints.serverList.map(f=>n.test(f)?"".concat(f.replace(/\./g,"-"),".").concat(i):f),a=o.map(f=>"".concat(f,":").concat(r));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Gt("WEBCS_DOMAIN",a),Gt("WEBCS_DOMAIN_BACKUP_LIST",a),Gt("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(cc(e.report.hostname,"report.hostname"),Gt("EVENT_REPORT_DOMAIN",e.report.hostname[0]),Gt("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(Gt("EVENT_REPORT_DOMAIN",o[0]),Gt("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));let s=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),s=e.report.port),Gt("STATS_COLLECTOR_PORT",s),e.report?Gt("ENABLE_EVENT_REPORT",!0):Gt("ENABLE_EVENT_REPORT",!1);let l="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(cc(e.log.hostname,"log.hostname"),l=e.log.hostname[0]):l=o[0];let c=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),c=e.log.port),Gt("LOG_UPLOAD_SERVER","".concat(l,":").concat(c));let u=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(cc(e.cds.hostname,"cds.hostname"),u=e.cds.hostname):u=o;let h=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),h=e.cds.port),Gt("CDS_AP",u.map(f=>"".concat(f,":").concat(h))),e.cds?Gt("ENABLE_CONFIG_DISTRIBUTE",!0):Gt("ENABLE_CONFIG_DISTRIBUTE",!1),w.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(cc(e,"serverList"),kn(t,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new q(O.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");let r=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map(n=>r.test(n)?"".concat(n.replace(/\./g,"-"),".").concat(t):n),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Gt("WEBCS_DOMAIN",e),Gt("WEBCS_DOMAIN_BACKUP_LIST",e),Gt("GATEWAY_DOMAINS",[t]),Gt("EVENT_REPORT_DOMAIN",e[0]),Gt("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),Gt("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),w.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(sn(e,"streamType",[0,1]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(t){throw w.error("[".concat(this._clientId,"] set default remote video stream type error"),t.toString()),t}else w.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){sn(t,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout(()=>{let r=this._users.find(n=>n.uid===e);r&&r.videoTrack&&r.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(r){throw w.error("[".concat(this._clientId,"] set remote video stream type error"),r.toString()),r}w.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){sn(t,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(r){throw w.error("[".concat(this._clientId,"] set stream fallback option"),r.toString()),r}w.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,r,n){(function(o){sn(o,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])})(e),kn(t,"secret");let i=["aes-128-gcm2","aes-256-gcm2"];if(ge(i).call(i,e)){if(!r||!(r instanceof Uint8Array&&r.length===32))throw new q(O.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(r)throw new q(O.INVALID_PARAMS,"current encrypt mode does not need salt");if(n){if(mc(n,"encryptDataStream"),!ge(i).call(i,e))throw new q(O.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test(t)||w.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=e,this._encryptionSecret=t,r&&(this._encryptionSalt=$u(r))}async renewToken(e){if(kn(e,"token",1,2047),!this._key||!this._joinInfo)throw new q(O.INVALID_OPERATION,"renewToken should not be called before user join");let t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);let r=await this._renewTokenMutex.lock();try{if(L("USE_NEW_TOKEN")){w.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));let n=await U6e(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Yr);w.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:n})}else w.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});w.debug("[".concat(this._clientId,"] renewToken success"))}catch(n){throw this._key=t,this._joinInfo.token=t,w.error("[".concat(this._clientId,"] renewToken failed"),n.toString()),n}finally{r()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?w.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{let e=this._p2pChannel.getAudioLevels();this.safeEmit(gt.VOLUME_INDICATOR,e)},L("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){let e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if(this.codec!=="h264")throw new q(O.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new q(O.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new q(O.LIVE_STREAMING_TASK_CONFLICT);let r=t?bc.TRANSCODE:bc.RAW;return this._createLiveStreamingClient(r).startLiveStreamingTask(e,r)}setLiveTranscoding(e){return this._createLiveStreamingClient(bc.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){let t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(r=>r&&r.hasUrl(e));if(!t.length)throw new q(O.INVALID_PARAMS,"can not find live streaming url to stop");await fe.all(t.map(r=>r&&r.stopLiveStreamingTask(e)))}async startChannelMediaRelay(e){eH(e),await this._createChannelMediaRelayClient().startChannelMediaRelay(e)}async updateChannelMediaRelay(e){eH(e),await this._createChannelMediaRelayClient().updateChannelMediaRelay(e)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new q(O.INVALID_OPERATION,"can not send data stream, not joined");if((typeof e=="string"||e instanceof Uint8Array)&&(e={payload:e}),typeof e.payload=="string"){let i=new TextEncoder;e.payload=i.encode(e.payload)}let n=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&ge(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(n=!0,e.payload=await async function(i,o,a){var s;let l=Zs(s=Array.from(a)).call(s,(g,y)=>g+y,0),c={serverTs:0,seq:tVe++,length:a.length,checkSum:l},u=new Uint8Array(HB(l,2)),h=new ArrayBuffer(Sf),f=new DataView(h);f.setUint32(0,c.serverTs),f.setUint16(4,c.seq),f.setUint16(6,c.length),f.setUint16(8,c.checkSum);let p=16-a.length%16;a=FB(a,new Uint8Array(p));let m=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i,tagLength:GB,additionalData:u},o,a);return FB(new Uint8Array(h),new Uint8Array(m))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new q(O.INVALID_PARAMS,n?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(Be.DATA_STREAM,{payload:$u(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-c8e},!r)}sendMetadata(e){if(!this._joinInfo)throw new q(O.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new q(O.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Be.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:$u(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(nVe),!this._joinInfo)throw new q(O.INVALID_OPERATION,"can not send custom report, not joined");await Te.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){sn(t.spatialLayer,"spatialLayer",[0,1,2,3]),sn(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(r){throw w.error("[".concat(this._clientId,"] pick SVC layer failed"),r.toString()),r}}async setRTMConfig(e){let{apRTM:t=!1,rtmFlag:r}=e;if(mc(t,"apRTM"),Wt(r,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=r,w.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),(this.connectionState==="CONNECTED"||this.connectionState==="RECONNECTING")&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=r,this._gateway.setRTM2Flag(r)}_reset(){if(w.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=to.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&hre(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach(e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach(t=>t._close()),e._dataChannels.length=0)}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new ai("client-publish"),this._subscribeMutex=new ai("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(e,t){var r;let n=e||dp();e?w.debug("[".concat(this._clientId,"] new Session ").concat(n)):w.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(n));let i=e?"":this._sessionId||"";this._sessionId=n,this.store.sessionId=n;let o={lts:new Date().getTime(),mode:this.mode,buildFormat:2,stringUid:(t==null?void 0:t.stringUid)||((r=this._joinInfo)===null||r===void 0?void 0:r.stringUid),channelProfile:this.mode==="live"?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:i,clientRole:this.role==="audience"?2:1};Te.sessionInit(this._sessionId,Fs({cname:t.channel,appid:t.appId},o)),this._joinInfo&&(this._joinInfo.sid=n),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=n)}async _publishHighStream(e){if(!this._joinInfo||this._uid===void 0)throw new q(O.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&L("FORCE_TURN")&&!L("TURN_ENABLE_TCP")&&!L("TURN_ENABLE_UDP"))throw new q(O.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");w.debug("[".concat(this._clientId,"] publish high stream"));try{let r=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof To){let n=(await r.next()).value;if(n){try{await this._gateway.sendExtensionMessage(Dr.PUBLISH,n,!0)}catch(i){throw r.throw(i),i}await r.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{let n=(await r.next()).value;if(n){var t;let i;try{i=await this._gateway.publish(this._uid,n,!0)}catch(o){if(o.code!==O.DISCONNECT_P2P)throw r.throw(o),o}await r.next(((t=i)===null||t===void 0?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(let i of e)i instanceof ir&&i._encoderConfig&&this._gateway.setVideoProfile(i._encoderConfig),!i.muted&&i.enabled||await this._p2pChannel.muteLocalTrack(i)}}catch(r){if(this._p2pChannel.reportPublishEvent(!1,r==null?void 0:r.code,e),(r==null?void 0:r.code)===O.WS_ABORT)return;throw r}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new q(O.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new q(O.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));w.debug("[".concat(this._clientId,"] publish low stream"));let e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{let r=await this._p2pChannel.publishLowStream(this._lowStreamParameter),n=(await r.next()).value;if(n){var t;let i;try{i=await this._gateway.publish(this._uid,n,!0)}catch(o){if(o.code!==O.DISCONNECT_P2P)throw r.throw(o),o}r.next(((t=i)===null||t===void 0?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(r){if(this._p2pChannel.reportPublishEvent(!1,r==null?void 0:r.code,void 0,!0),(r==null?void 0:r.code)===O.WS_ABORT)return;throw r}}_createLiveStreamingClient(e){let t=()=>{if(!this._joinInfo||!this._appId)return new q(O.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();let r=(n={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},ay("LiveStreaming").create(n));var n;return r.onLiveStreamError=(i,o)=>{Te.reportApiInvoke(this._sessionId,{name:en.ON_LIVE_STREAM_ERROR,options:[i,o],tag:xr.TRACER}).onSuccess(),this.safeEmit(gt.LIVE_STREAMING_ERROR,i,o)},r.onLiveStreamWarning=(i,o)=>{Te.reportApiInvoke(this._sessionId,{name:en.ON_LIVE_STREAM_WARNING,options:[i,o],tag:xr.TRACER}).onSuccess(),this.safeEmit(gt.LIVE_STREAMING_WARNING,i,o)},r.on(hk.REQUEST_WORKER_MANAGER_LIST,(i,o,a)=>{if(!this._joinInfo)return a(new q(O.INVALID_OPERATION,"can not find join info to get worker manager"));(async function(s,l,c,u){let h=L("UAP_AP").slice(0,L("AJAX_REQUEST_CONCURRENT")).map(f=>l.proxyServer?"https://".concat(l.proxyServer,"/ap/?url=").concat(f+"/api/v1?action=uap"):"https://".concat(f,"/api/v1?action=uap"));return await k6e(h,s,l,c,u)})(i,this._joinInfo,this._axiosCancelSource.token,Yr).then(o).catch(a)}),r};return e===bc.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||t(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||t(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo)return new q(O.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){let{sendResolutionWidth:t,sendResolutionHeight:r}=this.getLocalVideoStats(),n=(e={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:t,height:r}},ay("ChannelMediaRelay").create(e));n.on("state",i=>{i===so.RELAY_STATE_FAILURE&&n&&n.dispose(),this.safeEmit(gt.CHANNEL_MEDIA_RELAY_STATE,i)}),n.on("event",i=>{this.safeEmit(gt.CHANNEL_MEDIA_RELAY_EVENT,i)}),this._channelMediaRelayClient=n,this._statsCollector.onStatsChanged=(i,o)=>{var a;i==="resolution"&&((a=this._channelMediaRelayClient)===null||a===void 0||a.setVideoProfile(o))}}var e;return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){let{added:r,deleted:n}=e,i=[];if(t){let o=[];this._users.forEach(a=>{a._dataChannels.forEach(s=>{r.every(l=>l.uid!==a._uintid||l.stream_id!==s.id)&&o.push({uid:a._uintid,stream_id:s.id,ordered:s.ordered,max_retrans_times:s.maxRetransmits,metadata:s.metadata})})}),o.length>0&&this._handleUpdateDataChannel({added:[],deleted:o})}Array.isArray(r)&&r.length>0&&r.forEach(o=>{let{uid:a,stream_id:s,ordered:l,max_retrans_times:c,metadata:u}=o,h=this._users.find(f=>f._uintid===a);if(!h)return void w.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"));if(w.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(a)),ge(i).call(i,h)||i.push(h),h._uintid||(h._uintid=a),h._dataChannels.findIndex(f=>f.id===o.stream_id)===-1){let f={id:s,ordered:!!l,maxRetransmits:c,metadata:u},p=function(m){return fH(m,!0)}(f);h._dataChannels.push(p),w.info("[".concat(this._clientId,"] remote user ").concat(h.uid," published datachannel")),t||this.safeEmit(gt.USER_PUBLISHED,h,"datachannel",f)}this._p2pChannel.hasPendingRemoteDataChannel(h,o.stream_id)&&(w.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(h.uid," after reconnect.")),this._subscribeDataChannel(h,o.stream_id).catch(f=>{w.error("[".concat(this._clientId,"] resubscribe datachannel error"),f.toString())}))}),t&&(this.safeEmit(gt.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(n)&&n.length>0&&n.forEach(o=>{let{uid:a,stream_id:s}=o,l=this._users.find(u=>u._uintid===a);if(!l)return void w.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));let c=l._dataChannels.find(u=>u.id===o.stream_id);c&&(w.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(a)),this._p2pChannel.unsubscribeDataChannel(l,[c]).then(u=>{if(l._dataChannels=l._dataChannels.filter(h=>h!==c),u)return this._gateway.unsubscribeDataChannel(u,l.uid)}),w.info("[".concat(this._clientId,"] remote user ").concat(a," unpublished datachannel ,id:").concat(c.id)),this.safeEmit(gt.USER_UNPUBLISHED,l,"datachannel",c._config))})}_handleRemoveDataChannels(e){let t=this._users.find(r=>r.uid===e.uid);if(t){if(t._dataChannels!==void 0&&t._dataChannels.length>0){w.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));let r=()=>{w.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach(n=>{this.safeEmit(gt.USER_UNPUBLISHED,t,"datachannel",n._config)})};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then(n=>{if(n)return this._gateway.unsubscribeDataChannel(n,t.uid)}),r()}}else w.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(Hn.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(Hn.CONNECTION_STATE_CHANGE,(e,t,r)=>{var n;if(r===Bt.FALLBACK)return;let i=()=>{this.safeEmit(gt.CONNECTION_STATE_CHANGE,e,t,r)};if(Te.reportApiInvoke(this._sessionId||((n=this._gateway.joinInfo)===null||n===void 0?void 0:n.sid)||null,{name:en.CONNECTION_STATE_CHANGE,options:[e,t,r],tag:xr.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:r})),w.info("[".concat(this._clientId,"] connection state change: ").concat(t," -> ").concat(e)),e==="DISCONNECTED")return this._reset(),void i();if(e==="RECONNECTING")this._users.forEach(a=>{a._trust_in_room_=!1,a._trust_audio_enabled_state_=!1,a._trust_video_enabled_state_=!1,a._trust_audio_mute_state_=!1,a._trust_video_mute_state_=!1,a._trust_audio_stream_added_state_=!1,a._trust_video_stream_added_state_=!1,a._is_pre_created||(a._audio_pre_subscribed||(a._audioSSRC=void 0,a._audioOrtc=void 0),a._video_pre_subscribed||(a._videoSSRC=void 0,a._videoOrtc=void 0,a._rtxSsrcId=void 0),a._cname=void 0)}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(e==="CONNECTED"){var o;this._streamFallbackTypeCacheMap.forEach((a,s)=>{this._gateway.setStreamFallbackOption(s,a).catch(l=>{w.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),l)})}),this._remoteStreamTypeCacheMap.forEach((a,s)=>{this._gateway.setRemoteVideoStreamType(s,a).catch(l=>{w.warning("[".concat(this._clientId,"] auto set remote stream type failed"),l)})}),this._remoteDefaultVideoStreamType!==void 0&&((o=this._joinInfo)===null||o===void 0?void 0:o.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{w.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(a=>{w.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(a))}),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(a=>!a._trust_in_room_).forEach(a=>{w.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(a.uid)),this._handleUserOffline({uid:a.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(a=>{a._trust_audio_mute_state_||(w.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(a.uid)),this._handleMuteStream(a.uid,xe.AUDIO,!1)),a._trust_video_mute_state_||(w.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(a.uid)),this._handleMuteStream(a.uid,xe.VIDEO,!1)),a._trust_audio_enabled_state_||(w.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(a.uid)),this._handleSetStreamLocalEnable("audio",a.uid,!0)),a._trust_video_enabled_state_||(w.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(a.uid)),this._handleSetStreamLocalEnable("video",a.uid,!0)),a._trust_video_stream_added_state_||(w.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(a.uid)),this._handleResetAddStream(a,"video")),a._trust_audio_stream_added_state_||(w.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(a.uid)),this._handleResetAddStream(a,"audio")),a._video_added_||a._audio_added_||(w.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(a.uid)),this._handleRemoveStream({uid:a.uid,uint_id:a._uintid}))}))},1e3))}i()}),this._gateway.on(Hn.REQUEST_NEW_GATEWAY_LIST,async(e,t)=>{if(!this._joinInfo)return t(new q(O.UNEXPECTED_ERROR,"can not recover, no join info"));try{let r,n=await vH(Fs(Fs({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));n?(r=n.ap,bH(n),this._joinInfo.preload=!0):(r=await Ck(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Yr,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=r.gatewayInfo.res,this._joinInfo.gatewayAddrs=r.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=r.gatewayInfo.uni_lbs_ip);let i=[];r.gatewayInfo.gatewayAddrs.forEach(o=>{let{address:a}=o,[s,l]=a.split(":");this._joinInfo&&this._joinInfo.proxyServer?i.push({proxy:this._joinInfo.proxyServer,host:s,port:l}):i.push({host:s,port:l})}),e(i)}catch(r){t(r)}}),this._gateway.on(Hn.NETWORK_QUALITY,e=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(gt.NETWORK_QUALITY,e)}),this._gateway.on(Hn.STREAM_TYPE_CHANGE,(e,t)=>{this.safeEmit(gt.STREAM_TYPE_CHANGED,e,t),Te.reportApiInvoke(this._sessionId,{name:en.STREAM_TYPE_CHANGE,options:[e,t],tag:xr.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))}),this._gateway.on(Hn.IS_P2P_DISCONNECTED,e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)}),this._gateway.on(Hn.REQUEST_P2P_CONNECTION_PARAMS,async(e,t,r)=>{try{let n=await this._p2pChannel.getEstablishParams();L("ENABLE_PREALLOC_PC")&&n||(n=await this._p2pChannel.startP2PConnection(e)),t(n)}catch(n){r(n)}}),this._gateway.on(Hn.JOIN_RESPONSE,(e,t)=>{if(this.store.useP2P)return;let r=p$(e.ortc,t,e.attributes.userAttributes.preSubSsrcs);this._p2pChannel.connect(r)}),this._gateway.on(Hn.PRE_CONNECT_PC,async e=>{let{candidates:t,fingerprint:r}=e;if(this._joinInfo&&t.length>0&&!this._p2pChannel.isPlanB){var n;await this._p2pChannel.startP2PConnection({turnServer:this._joinInfo.turnServer});let{cert:i,cid:o}=this._joinInfo.apResponse;await this._p2pChannel.connect({iceParameters:{iceUfrag:"".concat(o,"_").concat(i),icePwd:"".concat(o,"_").concat(i)},dtlsParameters:{fingerprints:[{hashFunction:"sha-256",fingerprint:(n=L("FINGERPRINT"))!==null&&n!==void 0?n:r}]},candidates:t,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:"active",cname:"o/i14u9pJrxRKAsu",preallocation:!0})}})}_handleGatewaySignalEvents(){this._gateway.signal.on(pt.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(pt.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(pt.ON_ADD_AUDIO_STREAM,e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc)),this._gateway.signal.on(pt.ON_ADD_VIDEO_STREAM,e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId)),this._gateway.signal.on(pt.ON_REMOTE_DATASTREAM_UPDATE,e=>{this._handleUpdateDataChannel(e)}),this._gateway.signal.on(pt.ON_REMOTE_FULL_DATASTREAM_INFO,e=>{this._handleUpdateDataChannel({added:e.datastreams||[],deleted:[]},!0)}),this._gateway.signal.on(pt.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(pt.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(pt.MUTE_AUDIO,e=>this._handleMuteStream(e.uid,xe.AUDIO,!0)),this._gateway.signal.on(pt.UNMUTE_AUDIO,e=>this._handleMuteStream(e.uid,xe.AUDIO,!1)),this._gateway.signal.on(pt.MUTE_VIDEO,e=>this._handleMuteStream(e.uid,xe.VIDEO,!0)),this._gateway.signal.on(pt.UNMUTE_VIDEO,e=>this._handleMuteStream(e.uid,xe.VIDEO,!1)),this._gateway.signal.on(pt.RECEIVE_METADATA,e=>{let t=Xd(e.metadata);this.safeEmit(gt.RECEIVE_METADATA,e.uid,t)}),this._gateway.signal.on(pt.ON_DATA_STREAM,async e=>{var t;if(!e)return;let r=Xd(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&ge(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<Sf)throw new q(O.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(Sf));r=await async function(i,o,a){let s=a.subarray(0,Sf),l=s.slice(8,Sf),c=(l[0]<<8)+l[1],u=(s[6]<<8)+s[7],h=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:i,tagLength:GB,additionalData:new Uint8Array(HB(c,2))},o,a.subarray(Sf));return new Uint8Array(h).subarray(0,u)}(this._encryptDataStreamIv,this._encryptDataStreamKey,r)}let n=0;if(e.ordered||e.syncWithAudio){let i=this._p2pChannel.getStats(),o=this.remoteUsers.find(s=>s.uid===e.uid),a=i==null?void 0:i.audioRecv.find(s=>s.ssrc===(o==null?void 0:o._audioSSRC));n=a==null?void 0:a.jitterBufferMs}n==null&&(n=0),d8e(Fs(Fs({},e),{},{payload:r}),n,{id:this._clientId,onStreamMessage:typeof this.onStreamMessage=="function"?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})}),this._gateway.signal.on(pt.ON_CRYPT_ERROR,()=>{td(()=>{w.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(gt.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(pt.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(pt.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{w.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,Bt.TOKEN_EXPIRE),this.safeEmit(gt.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(pt.ON_STREAM_FALLBACK_UPDATE,e=>{w.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(gt.STREAM_FALLBACK,e.stream_id,e.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(pt.ON_PUBLISH_STREAM,e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),w.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))}),this._gateway.signal.on(pt.ENABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)}),this._gateway.signal.on(pt.DISABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)}),this._gateway.signal.on(ze.REQUEST_TIMEOUT,(e,t)=>{if(this._joinInfo)switch(e){case Be.PUBLISH:{if(!t)return;let i=t.ortc;if(i){var r,n;let o=i.some(l=>{let{stream_type:c}=l;return c===Lt.Audio}),a=i.some(l=>{let{stream_type:c}=l;return c!==Lt.Audio}),s=i.some(l=>{let{stream_type:c}=l;return c===Lt.Screen||c===Lt.ScreenLow});t.state==="offer"&&Te.publish(this._joinInfo.sid,{eventElapse:ni.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:O.TIMEOUT,audio:o,video:a,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:s,audioName:o?(r=i.find(l=>{let{stream_type:c}=l;return c===Lt.Audio}))===null||r===void 0||(r=r.ssrcs[0])===null||r===void 0?void 0:r.ssrcId.toString():void 0,videoName:a?(n=i.find(l=>{let{stream_type:c}=l;return c!==Lt.Audio}))===null||n===void 0||(n=n.ssrcs[0])===null||n===void 0?void 0:n.ssrcId.toString():void 0})}break}case Be.SUBSCRIBE:t&&Te.subscribe(this._joinInfo.sid,{succ:!1,ec:O.TIMEOUT,audio:t.stream_type===xe.AUDIO,video:t.stream_type===xe.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:ni.measureFromSubscribeStart(this.store.clientId,t.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(t.ssrcId)})}}),this._gateway.signal.on(pt.ON_P2P_OK,e=>{this.uid,this._uid}),this._gateway.signal.on(pt.ON_PUBLISHED_USER_LIST,e=>{if(e==null||!e.users)return;L("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter(n=>!wd(n.string_id||n.stream_id,this.channelName)));let t=[],r=[];for(let n of e.users){let i=this._users.find(u=>u._uintid===n.stream_id);i?i._trust_in_room_=!0:(i=new gu(n.string_id||n.stream_id,n.stream_id),this._users.push(i),this.getListeners(gt.PUBLISHED_USER_LIST).length===0&&(w.debug("[".concat(this._clientId,"] user online"),n.stream_id),this.safeEmit(gt.USER_JOINED,i)));let o=pn.Audio&n.stream_type,a=(pn.Video|pn.LwoVideo)&n.stream_type,s=(65280&n.stream_type)!=0,l=o&&i.hasAudio,c=a&&i.hasVideo;a&&(i._trust_video_stream_added_state_=!0,i._video_added_=!0,i._videoSSRC=n.video_ssrc,i._rtxSsrcId=n.video_rtx),o&&(i._trust_audio_stream_added_state_=!0,i._audio_added_=!0,i._audioSSRC=n.audio_ssrc),o&&!l&&this.getListeners(gt.PUBLISHED_USER_LIST).length===0&&(w.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published audio")),this.safeEmit(gt.USER_PUBLISHED,i,"audio")),a&&!c&&this.getListeners(gt.PUBLISHED_USER_LIST).length===0&&(w.info("[".concat(this._clientId,"] remote user ").concat(i.uid," published video")),this.safeEmit(gt.USER_PUBLISHED,i,"video")),(o&&!l||a&&!c||s)&&t.push(i),a&&this._p2pChannel.hasPendingRemoteMedia(i,"video")&&r.push({user:i,mediaType:"video"}),o&&this._p2pChannel.hasPendingRemoteMedia(i,"audio")&&r.push({user:i,mediaType:"audio"})}r.length>0&&(w.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(r.map(n=>"user: ".concat(n.user.uid,", mediaType: ").concat(n.mediaType)).join("; ")," ")),this.massSubscribe(r).catch(n=>{w.error("[".concat(this._clientId,"] mass resubscribe error"),n.toString())})),this.getListeners(gt.PUBLISHED_USER_LIST).length>0?L("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(w.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map(n=>n.uid).join(", "))),this.safeEmit(gt.PUBLISHED_USER_LIST,t)):w.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map(n=>n.uid).join(", ")))}),this._gateway.signal.on(pt.ON_RTP_CAPABILITY_CHANGE,e=>{let{video_codec:t}=e;this._p2pChannel instanceof TE&&this._p2pChannel.updateRemoteRTPCapabilities(t.map(r=>r.toLowerCase()).filter(r=>{var n;return ge(n=Object.keys(hC)).call(n,r)}))})}_handleP2PEvents(){this._gateway.signal.on(pt.ON_USER_OFFLINE,()=>{this._p2pChannel.disconnectForReconnect()}),this._gateway.signal.on(Dr.PUBLISH,(e,t,r)=>{let{uid:n}=e;e.forEach(i=>{let{kind:o,ssrcs:a,mid:s,isMuted:l}=i;this._handleP2PAddAudioOrVideoStream(o,n,a[0].ssrcId,s);let c=this._users.find(u=>u.uid===n);return c&&this._p2pChannel instanceof To?this._p2pChannel.mockSubscribe(c,o,a[0].ssrcId,s).then(()=>{t()}).catch(r):t(),this._handleMuteStream(n,o,!!l)})}),this._gateway.signal.on(Dr.CALL,async(e,t,r)=>{if(this._p2pChannel instanceof To)try{var n;t(await this._p2pChannel.startP2P({turnServer:(n=this._joinInfo)===null||n===void 0?void 0:n.turnServer},e))}catch(i){r(i)}}),this._gateway.signal.on(ze.P2P_CONNECTION,async e=>{this._p2pChannel instanceof To&&await this._p2pChannel.p2pConnect(e)}),this._gateway.signal.on(Dr.UNPUBLISH,async(e,t,r)=>{if(this._p2pChannel instanceof To){let{unpubMsg:n,uid:i}=e,o=this._users.find(a=>a.uid===i);if(!o)return w.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i)),void t();try{n.forEach(async a=>{let{stream_type:s}=a,l=s===Lt.Audio?xe.AUDIO:xe.VIDEO;await this._p2pChannel.unsubscribe(o,l),this._handleMuteStream(i,l,!0)}),t()}catch(a){r(a)}}}),this._gateway.signal.on(Dr.CONTROL,async(e,t)=>{let{action:r}=e;switch(r){case xu.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,xe.VIDEO,!0);break;case xu.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,xe.AUDIO,!0);break;case xu.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,xe.VIDEO,!1);break;case xu.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,xe.AUDIO,!1)}}),this._gateway.signal.on(Dr.RESTART_ICE,async(e,t,r)=>{if(this._p2pChannel instanceof To)try{let{direction:n,iceParameter:i}=e;n!==Ui.SEND_ONLY||i?t(await this._p2pChannel.restartICE(n,i)):(this._p2pChannel.handleDisconnect(n),t())}catch(n){r(n)}}),this._gateway.signal.on(Dr.CANDIDATE,e=>{if(this._p2pChannel instanceof To){let{candidate:t,direction:r}=e;this._p2pChannel.addRemoteCandidate(t,r)}}),this._p2pChannel.on(Me.RequestP2PRestartICE,async(e,t,r)=>{try{let{direction:n}=e;t(await this._gateway.sendExtensionMessage(Dr.RESTART_ICE,e,n===Ui.SEND_ONLY))}catch(n){r(n)}}),this._p2pChannel.on(Me.LocalCandidate,e=>{this._gateway.sendExtensionMessage(Dr.CANDIDATE,JSON.stringify(e),!0)}),this._p2pChannel.on(Me.RequestP2PMuteLocal,async(e,t,r)=>{try{await this._gateway.sendExtensionMessage(Dr.CONTROL,e,!0),t()}catch(n){r(n)}}),this._p2pChannel.on(Me.RequestP2PUnmuteRemote,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===O.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Me.RequestP2PMuteRemote,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===O.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Me.StateChange,(e,t)=>{t===Dt.Connected&&this._p2pChannel.republish()})}_handleP2PChannelEvents(){this._p2pChannel.on(Me.RequestMuteLocal,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===O.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Me.RequestUnmuteLocal,async(e,t,r)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(n){n.code===O.DISCONNECT_P2P?t():r(n)}else t()}),this._p2pChannel.on(Me.RequestRePublish,(e,t,r)=>{this.publish(e,!1).then(t).catch(r)}),this._p2pChannel.on(Me.RequestRePublishDataChannel,(e,t,r)=>{fe.all(e.map(async n=>{let i=await this._p2pChannel.publishDataChannel([n]);try{i.forEach(o=>{this._uid&&this._gateway.publishDataChannel(this._uid,o,!0)})}catch(o){if(o.code!==O.DISCONNECT_P2P)throw o}})).then(t).catch(r)}),this._p2pChannel.on(Me.RequestReSubscribe,async(e,t,r)=>{try{for(let{user:n,kind:i}of e)i===xe.VIDEO?await this.subscribe(n,"video"):await this.subscribe(n,"audio");t()}catch(n){r(n)}}),this._p2pChannel.on(Me.RequestUpload,(e,t)=>{this._gateway.upload(e,t)}),this._p2pChannel.on(Me.RequestUploadStats,e=>{this._gateway.uploadWRTCStats(e)}),this._p2pChannel.on(Me.MediaReconnectStart,e=>{this.safeEmit(gt.MEDIA_RECONNECT_START,e)}),this._p2pChannel.on(Me.MediaReconnectEnd,e=>{this.safeEmit(gt.MEDIA_RECONNECT_END,e)}),this._p2pChannel.on(Me.NeedSignalRTT,e=>{e(this._gateway.getSignalRTT())}),this._p2pChannel.on(Me.RequestRestartICE,async e=>{if(this._p2pChannel instanceof To)return;let t=await this._p2pChannel.restartICE(e),r=await t.next();if(r.done)return;let n=r.value,i;try{i=await this._gateway.restartICE({iceParameters:n})}catch(a){return void t.throw(a)}let{iceParameters:o}=function(a){let s=a.iceParameters;return{iceParameters:{iceUfrag:s.iceUfrag,icePwd:s.icePwd}}}(i);await t.next({remoteIceParameters:o})}),this._p2pChannel.on(Me.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(Me.RequestReconnectPC,async()=>{var e;let{iceParameters:t,dtlsParameters:r,rtpCapabilities:n}=await this._p2pChannel.startP2PConnection({turnServer:(e=this._joinInfo)===null||e===void 0?void 0:e.turnServer}),{gatewayEstablishParams:i,gatewayAddress:o}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:r,rtpCapabilities:n}),a=p$(i,o);await this._p2pChannel.connect(a),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(Me.RequestUnpublishForReconnectPC,async(e,t,r)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(e,this._uid),t()):r()}),this._p2pChannel.on(Me.P2PLost,()=>{this.safeEmit(gt.P2P_LOST,this.store.uid)}),this._p2pChannel.on(Me.UpdateVideoEncoder,e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)}),this._p2pChannel.on(Me.ConnectionTypeChange,e=>{this.safeEmit(gt.IS_USING_CLOUD_PROXY,e)}),this._p2pChannel.on(Me.RequestLowStreamParameter,e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(Me.QueryClientConnectionState,e=>{e(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if(!this._joinInfo||this.connectionState!=="CONNECTED")throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] can not create content inspect, please join channel first"));if(this._inspect)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));try{let r=(t={config:e},ay("ContentInspect").create(t));this._inspect=r,this.handleVideoInspectEvents(r);let{appId:n,cname:i,sid:o,token:a,uid:s,cid:l,vid:c}=this._joinInfo;await r.init({appId:n,areaCode:"",cname:i,sid:o,token:a,uid:s,cid:l,vid:c?Number(c):0},Yr)}catch(r){throw Array.isArray(r)?r[0]:r}var t}handleVideoInspectEvents(e){e.on(wn.CONNECTION_STATE_CHANGE,(t,r)=>{if(this.safeEmit(gt.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,r),r===rs.CONNECTED){if(this.connectionState!=="CONNECTED")return void this.safeEmit(gt.CONTENT_INSPECT_ERROR,new q(O.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}}),e.on(wn.INSPECT_RESULT,(t,r)=>{var n;if((r==null?void 0:r.code)===O.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return w.debug("Stop inspect content because that has left channel"),this==null||(n=this._inspect)===null||n===void 0||n.close(),void(this._inspect=void 0);this.safeEmit(gt.CONTENT_INSPECT_RESULT,t,r)}),e.on(wn.CLIENT_LOCAL_VIDEO_TRACK,t=>{t(this.localTracks.filter(r=>r.trackMediaType==="video")[0])})}async disableContentInspect(){if(!this._inspect)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(e){throw Array.isArray(e)?e[0]:e}}async setImageModeration(e,t){if(mc(e,"enabled"),e){if(!t)throw new q(O.INVALID_PARAMS,"config is required");if(vre(t),!this._joinInfo)throw new q(O.INVALID_OPERATION,"can not create image moderation, please join channel first");try{if(this._moderation)this._moderation.updateConfig(t);else{let n=(r={config:t},ay("ImageModeration").create(r));this._moderation=n,this.handleImageModerationEvents(n);let{appId:i,cname:o,sid:a,token:s,uid:l,cid:c,vid:u}=this._joinInfo;await n.init({appId:i,areaCode:"",cname:o,sid:a,token:s,uid:l,cid:c,vid:u?Number(u):0},Yr)}}catch(n){throw Array.isArray(n)?n[0]:n}}else{var r;if(!this._moderation)throw new q(O.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(n){throw Array.isArray(n)?n[0]:n}}}handleImageModerationEvents(e){e.on(js.CONNECTION_STATE_CHANGE,(t,r)=>{if(this.safeEmit(gt.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,r),t===ma.CONNECTED){if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new q(O.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}}),e.on(js.CLIENT_LOCAL_VIDEO_TRACK,t=>{t(this.localTracks.filter(r=>r.trackMediaType==="video")[0])})}setP2PTransport(e){if(function(t){sn(t,"transport",["default","auto","relay","sd-rtn"])}(e),this.mode!=="p2p")throw new q(O.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,w.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}getJoinChannelServiceRecords(){return w.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){mc(e,"enabled"),Gt("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}},we(me.prototype,"leave",[IH],Object.getOwnPropertyDescriptor(me.prototype,"leave"),me.prototype),we(me.prototype,"publish",[NH],Object.getOwnPropertyDescriptor(me.prototype,"publish"),me.prototype),we(me.prototype,"unpublish",[AH],Object.getOwnPropertyDescriptor(me.prototype,"unpublish"),me.prototype),we(me.prototype,"subscribe",[OH],Object.getOwnPropertyDescriptor(me.prototype,"subscribe"),me.prototype),we(me.prototype,"presubscribe",[kH],Object.getOwnPropertyDescriptor(me.prototype,"presubscribe"),me.prototype),we(me.prototype,"massSubscribe",[PH],Object.getOwnPropertyDescriptor(me.prototype,"massSubscribe"),me.prototype),we(me.prototype,"unsubscribe",[DH],Object.getOwnPropertyDescriptor(me.prototype,"unsubscribe"),me.prototype),we(me.prototype,"massUnsubscribe",[LH],Object.getOwnPropertyDescriptor(me.prototype,"massUnsubscribe"),me.prototype),we(me.prototype,"setLowStreamParameter",[MH],Object.getOwnPropertyDescriptor(me.prototype,"setLowStreamParameter"),me.prototype),we(me.prototype,"enableDualStream",[jH],Object.getOwnPropertyDescriptor(me.prototype,"enableDualStream"),me.prototype),we(me.prototype,"disableDualStream",[UH],Object.getOwnPropertyDescriptor(me.prototype,"disableDualStream"),me.prototype),we(me.prototype,"setClientRole",[FH],Object.getOwnPropertyDescriptor(me.prototype,"setClientRole"),me.prototype),we(me.prototype,"setProxyServer",[VH],Object.getOwnPropertyDescriptor(me.prototype,"setProxyServer"),me.prototype),we(me.prototype,"setTurnServer",[BH],Object.getOwnPropertyDescriptor(me.prototype,"setTurnServer"),me.prototype),we(me.prototype,"setLicense",[$H],Object.getOwnPropertyDescriptor(me.prototype,"setLicense"),me.prototype),we(me.prototype,"startProxyServer",[HH],Object.getOwnPropertyDescriptor(me.prototype,"startProxyServer"),me.prototype),we(me.prototype,"stopProxyServer",[zH],Object.getOwnPropertyDescriptor(me.prototype,"stopProxyServer"),me.prototype),we(me.prototype,"setLocalAccessPointsV2",[GH],Object.getOwnPropertyDescriptor(me.prototype,"setLocalAccessPointsV2"),me.prototype),we(me.prototype,"setLocalAccessPoints",[WH],Object.getOwnPropertyDescriptor(me.prototype,"setLocalAccessPoints"),me.prototype),we(me.prototype,"setRemoteDefaultVideoStreamType",[KH],Object.getOwnPropertyDescriptor(me.prototype,"setRemoteDefaultVideoStreamType"),me.prototype),we(me.prototype,"setRemoteVideoStreamType",[qH],Object.getOwnPropertyDescriptor(me.prototype,"setRemoteVideoStreamType"),me.prototype),we(me.prototype,"setStreamFallbackOption",[YH],Object.getOwnPropertyDescriptor(me.prototype,"setStreamFallbackOption"),me.prototype),we(me.prototype,"setEncryptionConfig",[XH],Object.getOwnPropertyDescriptor(me.prototype,"setEncryptionConfig"),me.prototype),we(me.prototype,"renewToken",[JH],Object.getOwnPropertyDescriptor(me.prototype,"renewToken"),me.prototype),we(me.prototype,"enableAudioVolumeIndicator",[QH],Object.getOwnPropertyDescriptor(me.prototype,"enableAudioVolumeIndicator"),me.prototype),we(me.prototype,"startLiveStreaming",[ZH],Object.getOwnPropertyDescriptor(me.prototype,"startLiveStreaming"),me.prototype),we(me.prototype,"setLiveTranscoding",[e7],Object.getOwnPropertyDescriptor(me.prototype,"setLiveTranscoding"),me.prototype),we(me.prototype,"stopLiveStreaming",[t7],Object.getOwnPropertyDescriptor(me.prototype,"stopLiveStreaming"),me.prototype),we(me.prototype,"startChannelMediaRelay",[r7],Object.getOwnPropertyDescriptor(me.prototype,"startChannelMediaRelay"),me.prototype),we(me.prototype,"updateChannelMediaRelay",[n7],Object.getOwnPropertyDescriptor(me.prototype,"updateChannelMediaRelay"),me.prototype),we(me.prototype,"stopChannelMediaRelay",[i7],Object.getOwnPropertyDescriptor(me.prototype,"stopChannelMediaRelay"),me.prototype),we(me.prototype,"sendCustomReportMessage",[o7],Object.getOwnPropertyDescriptor(me.prototype,"sendCustomReportMessage"),me.prototype),we(me.prototype,"pickSVCLayer",[a7],Object.getOwnPropertyDescriptor(me.prototype,"pickSVCLayer"),me.prototype),we(me.prototype,"setRTMConfig",[s7],Object.getOwnPropertyDescriptor(me.prototype,"setRTMConfig"),me.prototype),we(me.prototype,"enableContentInspect",[l7],Object.getOwnPropertyDescriptor(me.prototype,"enableContentInspect"),me.prototype),we(me.prototype,"disableContentInspect",[c7],Object.getOwnPropertyDescriptor(me.prototype,"disableContentInspect"),me.prototype),we(me.prototype,"setImageModeration",[u7],Object.getOwnPropertyDescriptor(me.prototype,"setImageModeration"),me.prototype),we(me.prototype,"setP2PTransport",[d7],Object.getOwnPropertyDescriptor(me.prototype,"setP2PTransport"),me.prototype),we(me.prototype,"getJoinChannelServiceRecords",[h7],Object.getOwnPropertyDescriptor(me.prototype,"getJoinChannelServiceRecords"),me.prototype),we(me.prototype,"setPublishAudioFilterEnabled",[f7],Object.getOwnPropertyDescriptor(me.prototype,"setPublishAudioFilterEnabled"),me.prototype),me),bre=class kk{constructor(t,r){R(this,"id",0),R(this,"element",void 0),R(this,"peerPair",void 0),R(this,"context",void 0),R(this,"audioPlayerElement",void 0),R(this,"audioTrack",void 0),kk.count+=1,this.id=kk.count,this.element=t,this.context=r}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=t=>{let r=document.createElement("audio");r.srcObject=new MediaStream([t.track]),r.play(),this.audioPlayerElement=r}}async switchSdp(){if(!this.peerPair)return;let t=async(n,i)=>{let o=i==="offer"?await n.createOffer():await n.createAnswer();return await n.setLocalDescription(o),n.iceGatheringState==="complete"?n.localDescription:new fe(a=>{n.onicegatheringstatechange=()=>{n.iceGatheringState==="complete"&&a(n.localDescription)}})},r=async(n,i)=>await n.setRemoteDescription(i);try{let n=await t(this.peerPair[0],"offer");await r(this.peerPair[1],n);let i=await t(this.peerPair[1],"answer");await r(this.peerPair[0],i)}catch(n){throw new q(O.LOCAL_AEC_ERROR,n.toString()).print()}}async getTracksFromMediaElement(t){if(this.audioTrack)return this.audioTrack;let r;try{t instanceof HTMLVideoElement&&(t.captureStream?t.captureStream():t.mozCaptureStream()),r=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(t).connect(r)}catch(i){throw new q(O.LOCAL_AEC_ERROR,i.toString()).print()}if(!r)throw new q(O.LOCAL_AEC_ERROR,"no dest node when local aec").print();let n=r.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();let t=this.element,r=await this.getTracksFromMediaElement(t);this.peerPair&&this.peerPair[0].addTrack(r),await this.switchSdp()}close(){w.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(t=>{t.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}},m7,xE;R(bre,"count",0);var N8e=window.AudioContext||window.webkitAudioContext,A8e=new(m7=Le({report:Te}),we((xE=class{constructor(){R(this,"units",[]),R(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return w.debug("the system does not need to process local aec"),-1;this.context||(this.context=new N8e);let t=this.units.find(r=>r&&r.getElement()===e);return t||(t=new bre(e,this.context),this.units.push(t)),t.startEchoCancellation(),w.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return St().name!==Mt.SAFARI}}).prototype,"processExternalMediaAEC",[m7],Object.getOwnPropertyDescriptor(xE.prototype,"processExternalMediaAEC"),xE.prototype),xE);function g7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function y7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g7(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var lN=window||document;function Ere(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!lN)return;let r=Tr._cspEventHandlerPointer;if(r&&t)return void console.error(r,t);let n=i=>{if(!(i&&i.blockedURI&&(Tr.onSecurityPolicyViolation||Tr.getListeners(Tl.SECURITY_POLICY_VIOLATION).length>0)))return;let o=i.blockedURI;L("CSP_DETECTED_HOSTNAME_LIST").some(a=>ge(o).call(o,a))&&(Tr.onSecurityPolicyViolation&&typeof Tr.onSecurityPolicyViolation=="function"&&Tr.onSecurityPolicyViolation(i),Tr.getListeners(Tl.SECURITY_POLICY_VIOLATION).length>0&&Tr.safeEmit(Tl.SECURITY_POLICY_VIOLATION,i))};r&&lN.removeEventListener("securitypolicyviolation",r),(t||e&&typeof e=="function"||Tr.getListeners(Tl.SECURITY_POLICY_VIOLATION).length>0)&&lN.addEventListener("securitypolicyviolation",n),Tr._cspEventHandlerPointer=n}var O8e=Gi,k8e=bee,v7=RegExp.prototype,P8e=function(e){return e===v7||O8e(v7,e)?k8e(e):e.flags},Si=Ur(P8e);function Zm(e){let t=e.length;for(;--t>=0;)e[t]=0}var YL=256,_re=286,jy=30,Uy=15,Pk=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),N_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),D8e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),b7=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hc=new Array(576);Zm(hc);var Fy=new Array(60);Zm(Fy);var Gv=new Array(512);Zm(Gv);var Wv=new Array(256);Zm(Wv);var XL=new Array(29);Zm(XL);var vS=new Array(jy);function cN(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var E7,_7,w7;function uN(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Zm(vS);var wre=e=>e<256?Gv[e]:Gv[256+(e>>>7)],Kv=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Wo=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,Kv(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},Cl=(e,t,r)=>{Wo(e,r[2*t],r[2*t+1])},Sre=(e,t)=>{let r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0);return r>>>1},Tre=(e,t,r)=>{let n=new Array(16),i,o,a=0;for(i=1;i<=Uy;i++)a=a+r[i-1]<<1,n[i]=a;for(o=0;o<=t;o++){let s=e[2*o+1];s!==0&&(e[2*o]=Sre(n[s]++,s))}},Cre=e=>{let t;for(t=0;t<_re;t++)e.dyn_ltree[2*t]=0;for(t=0;t<jy;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},xre=e=>{e.bi_valid>8?Kv(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},S7=(e,t,r,n)=>{let i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},dN=(e,t,r)=>{let n=e.heap[r],i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&S7(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!S7(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},T7=(e,t,r)=>{let n,i,o,a,s=0;if(e.sym_next!==0)do n=255&e.pending_buf[e.sym_buf+s++],n+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],n===0?Cl(e,i,t):(o=Wv[i],Cl(e,o+YL+1,t),a=Pk[o],a!==0&&(i-=XL[o],Wo(e,i,a)),n--,o=wre(n),Cl(e,o,r),a=N_[o],a!==0&&(n-=vS[o],Wo(e,n,a)));while(s<e.sym_next);Cl(e,256,t)},hN=(e,t)=>{let r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,a,s,l,c=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<o;a++)r[2*a]!==0?(e.heap[++e.heap_len]=c=a,e.depth[a]=0):r[2*a+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,r[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=n[2*l+1]);for(t.max_code=c,a=e.heap_len>>1;a>=1;a--)dN(e,r,a);l=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],dN(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,r[2*l]=r[2*a]+r[2*s],e.depth[l]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,r[2*a+1]=r[2*s+1]=l,e.heap[1]=l++,dN(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((u,h)=>{let f=h.dyn_tree,p=h.max_code,m=h.stat_desc.static_tree,g=h.stat_desc.has_stree,y=h.stat_desc.extra_bits,v=h.stat_desc.extra_base,b=h.stat_desc.max_length,_,S,I,A,D,M,H=0;for(A=0;A<=Uy;A++)u.bl_count[A]=0;for(f[2*u.heap[u.heap_max]+1]=0,_=u.heap_max+1;_<573;_++)S=u.heap[_],A=f[2*f[2*S+1]+1]+1,A>b&&(A=b,H++),f[2*S+1]=A,S>p||(u.bl_count[A]++,D=0,S>=v&&(D=y[S-v]),M=f[2*S],u.opt_len+=M*(A+D),g&&(u.static_len+=M*(m[2*S+1]+D)));if(H!==0){do{for(A=b-1;u.bl_count[A]===0;)A--;u.bl_count[A]--,u.bl_count[A+1]+=2,u.bl_count[b]--,H-=2}while(H>0);for(A=b;A!==0;A--)for(S=u.bl_count[A];S!==0;)I=u.heap[--_],I>p||(f[2*I+1]!==A&&(u.opt_len+=(A-f[2*I+1])*f[2*I],f[2*I+1]=A),S--)}})(e,t),Tre(r,c,e.bl_count)},C7=(e,t,r)=>{let n,i,o=-1,a=t[1],s=0,l=7,c=4;for(a===0&&(l=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<l&&i===a||(s<c?e.bl_tree[2*i]+=s:i!==0?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,a===0?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4))},x7=(e,t,r)=>{let n,i,o=-1,a=t[1],s=0,l=7,c=4;for(a===0&&(l=138,c=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<l&&i===a)){if(s<c)do Cl(e,i,e.bl_tree);while(--s!=0);else i!==0?(i!==o&&(Cl(e,i,e.bl_tree),s--),Cl(e,16,e.bl_tree),Wo(e,s-3,2)):s<=10?(Cl(e,17,e.bl_tree),Wo(e,s-3,3)):(Cl(e,18,e.bl_tree),Wo(e,s-11,7));s=0,o=i,a===0?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4)}},R7=!1,Rre=(e,t,r,n)=>{Wo(e,0+(n?1:0),3),xre(e),Kv(e,r),Kv(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},L8e=e=>{R7||((()=>{let t,r,n,i,o,a=new Array(16);for(n=0,i=0;i<28;i++)for(XL[i]=n,t=0;t<1<<Pk[i];t++)Wv[n++]=i;for(Wv[n-1]=i,o=0,i=0;i<16;i++)for(vS[i]=o,t=0;t<1<<N_[i];t++)Gv[o++]=i;for(o>>=7;i<jy;i++)for(vS[i]=o<<7,t=0;t<1<<N_[i]-7;t++)Gv[256+o++]=i;for(r=0;r<=Uy;r++)a[r]=0;for(t=0;t<=143;)hc[2*t+1]=8,t++,a[8]++;for(;t<=255;)hc[2*t+1]=9,t++,a[9]++;for(;t<=279;)hc[2*t+1]=7,t++,a[7]++;for(;t<=287;)hc[2*t+1]=8,t++,a[8]++;for(Tre(hc,287,a),t=0;t<jy;t++)Fy[2*t+1]=5,Fy[2*t]=Sre(t,5);E7=new cN(hc,Pk,257,_re,Uy),_7=new cN(Fy,N_,0,jy,Uy),w7=new cN(new Array(0),D8e,0,19,7)})(),R7=!0),e.l_desc=new uN(e.dyn_ltree,E7),e.d_desc=new uN(e.dyn_dtree,_7),e.bl_desc=new uN(e.bl_tree,w7),e.bi_buf=0,e.bi_valid=0,Cre(e)},M8e=(e,t,r,n)=>{let i,o,a=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=(s=>{let l,c=4093624447;for(l=0;l<=31;l++,c>>>=1)if(1&c&&s.dyn_ltree[2*l]!==0)return 0;if(s.dyn_ltree[18]!==0||s.dyn_ltree[20]!==0||s.dyn_ltree[26]!==0)return 1;for(l=32;l<YL;l++)if(s.dyn_ltree[2*l]!==0)return 1;return 0})(e)),hN(e,e.l_desc),hN(e,e.d_desc),a=(s=>{let l;for(C7(s,s.dyn_ltree,s.l_desc.max_code),C7(s,s.dyn_dtree,s.d_desc.max_code),hN(s,s.bl_desc),l=18;l>=3&&s.bl_tree[2*b7[l]+1]===0;l--);return s.opt_len+=3*(l+1)+5+5+4,l})(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&t!==-1?Rre(e,t,r,n):e.strategy===4||o===i?(Wo(e,2+(n?1:0),3),T7(e,hc,Fy)):(Wo(e,4+(n?1:0),3),((s,l,c,u)=>{let h;for(Wo(s,l-257,5),Wo(s,c-1,5),Wo(s,u-4,4),h=0;h<u;h++)Wo(s,s.bl_tree[2*b7[h]+1],3);x7(s,s.dyn_ltree,l-1),x7(s,s.dyn_dtree,c-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),T7(e,e.dyn_ltree,e.dyn_dtree)),Cre(e),n&&xre(e)},j8e=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(Wv[r]+YL+1)]++,e.dyn_dtree[2*wre(t)]++),e.sym_next===e.sym_end),U8e=e=>{Wo(e,2,3),Cl(e,256,hc),(t=>{t.bi_valid===16?(Kv(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(e)},F8e={_tr_init:L8e,_tr_stored_block:Rre,_tr_flush_block:M8e,_tr_tally:j8e,_tr_align:U8e},qv=(e,t,r,n)=>{let i=65535&e|0,o=e>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+t[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0},V8e=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})()),Li=(e,t,r,n)=>{let i=V8e,o=n+r;e^=-1;for(let a=n;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},kh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},eg={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:B8e,_tr_stored_block:Dk,_tr_flush_block:$8e,_tr_tally:Hu,_tr_align:H8e}=F8e,{Z_NO_FLUSH:zu,Z_PARTIAL_FLUSH:z8e,Z_FULL_FLUSH:G8e,Z_FINISH:hs,Z_BLOCK:I7,Z_OK:Yi,Z_STREAM_END:N7,Z_STREAM_ERROR:Dl,Z_DATA_ERROR:W8e,Z_BUF_ERROR:fN,Z_DEFAULT_COMPRESSION:K8e,Z_FILTERED:q8e,Z_HUFFMAN_ONLY:RE,Z_RLE:Y8e,Z_FIXED:X8e,Z_DEFAULT_STRATEGY:J8e,Z_UNKNOWN:Q8e,Z_DEFLATED:yC}=eg,Lk=286,Z8e=30,e$e=19,t$e=2*Lk+1,r$e=15,Qd=258,Ll=262,pm=42,Zd=113,ly=666,eh=(e,t)=>(e.msg=kh[t],t),A7=e=>2*e-(e>4?9:0),yu=e=>{let t=e.length;for(;--t>=0;)e[t]=0},n$e=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=i?r-i:0;while(--t);t=i,n=t;do r=e.prev[--n],e.prev[n]=r>=i?r-i:0;while(--t)},Gu=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,va=e=>{let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},_a=(e,t)=>{$8e(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,va(e.strm)},Ar=(e,t)=>{e.pending_buf[e.pending++]=t},$g=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Mk=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),e.state.wrap===1?e.adler=qv(e.adler,t,i,r):e.state.wrap===2&&(e.adler=Li(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},Ire=(e,t)=>{let r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-Ll?e.strstart-(e.w_size-Ll):0,c=e.window,u=e.w_mask,h=e.prev,f=e.strstart+Qd,p=c[o+a-1],m=c[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do if(r=t,c[r+a]===m&&c[r+a-1]===p&&c[r]===c[o]&&c[++r]===c[o+1]){o+=2,r++;do;while(c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&o<f);if(n=Qd-(f-o),o=f-Qd,n>a){if(e.match_start=t,a=n,n>=s)break;p=c[o+a-1],m=c[o+a]}}while((t=h[t&u])>l&&--i!=0);return a<=e.lookahead?a:e.lookahead},mm=e=>{let t=e.w_size,r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ll)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),n$e(e),n+=t),e.strm.avail_in===0)break;if(r=Mk(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Gu(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Gu(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Ll&&e.strm.avail_in!==0)},Nre=(e,t)=>{let r,n,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<o&&(r===0&&t!==hs||t===zu||r!==n+e.strm.avail_in)))break;a=t===hs&&r===n+e.strm.avail_in?1:0,Dk(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,va(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(Mk(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(a===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==zu&&t!==hs&&e.strm.avail_in===0&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Mk(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,o=i>e.w_size?e.w_size:i,n=e.strstart-e.block_start,(n>=o||(n||t===hs)&&t!==zu&&e.strm.avail_in===0&&n<=i)&&(r=n>i?i:n,a=t===hs&&e.strm.avail_in===0&&r===n?1:0,Dk(e,e.block_start,r,a),e.block_start+=r,va(e.strm)),a?3:1)},pN=(e,t)=>{let r,n;for(;;){if(e.lookahead<Ll){if(mm(e),e.lookahead<Ll&&t===zu)return 1;if(e.lookahead===0)break}if(r=0,e.lookahead>=3&&(e.ins_h=Gu(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Ll&&(e.match_length=Ire(e,r)),e.match_length>=3)if(n=Hu(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=Gu(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Gu(e,e.ins_h,e.window[e.strstart+1]);else n=Hu(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(_a(e,!1),e.strm.avail_out===0))return 1}return e.insert=e.strstart<2?e.strstart:2,t===hs?(_a(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(_a(e,!1),e.strm.avail_out===0)?1:2},Pf=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<Ll){if(mm(e),e.lookahead<Ll&&t===zu)return 1;if(e.lookahead===0)break}if(r=0,e.lookahead>=3&&(e.ins_h=Gu(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Ll&&(e.match_length=Ire(e,r),e.match_length<=5&&(e.strategy===q8e||e.match_length===3&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=Hu(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=Gu(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(_a(e,!1),e.strm.avail_out===0))return 1}else if(e.match_available){if(n=Hu(e,0,e.window[e.strstart-1]),n&&_a(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Hu(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===hs?(_a(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(_a(e,!1),e.strm.avail_out===0)?1:2};function gl(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var cy=[new gl(0,0,0,0,Nre),new gl(4,4,8,4,pN),new gl(4,5,16,8,pN),new gl(4,6,32,32,pN),new gl(4,4,16,16,Pf),new gl(8,16,32,32,Pf),new gl(8,16,128,128,Pf),new gl(8,32,128,256,Pf),new gl(32,128,258,1024,Pf),new gl(32,258,258,4096,Pf)];function i$e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=yC,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*t$e),this.dyn_dtree=new Uint16Array(2*(2*Z8e+1)),this.bl_tree=new Uint16Array(2*(2*e$e+1)),yu(this.dyn_ltree),yu(this.dyn_dtree),yu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(r$e+1),this.heap=new Uint16Array(2*Lk+1),yu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Lk+1),yu(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Yv=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.status!==pm&&t.status!==57&&t.status!==69&&t.status!==73&&t.status!==91&&t.status!==103&&t.status!==Zd&&t.status!==ly?1:0},Are=e=>{if(Yv(e))return eh(e,Dl);e.total_in=e.total_out=0,e.data_type=Q8e;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?57:t.wrap?pm:Zd,e.adler=t.wrap===2?0:1,t.last_flush=-2,B8e(t),Yi},Ore=e=>{let t=Are(e);return t===Yi&&(r=>{r.window_size=2*r.w_size,yu(r.head),r.max_lazy_match=cy[r.level].max_lazy,r.good_match=cy[r.level].good_length,r.nice_match=cy[r.level].nice_length,r.max_chain_length=cy[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0})(e.state),t},O7=(e,t,r,n,i,o)=>{if(!e)return Dl;let a=1;if(t===K8e&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>9||r!==yC||n<8||n>15||t<0||t>9||o<0||o>X8e||n===8&&a!==1)return eh(e,Dl);n===8&&(n=9);let s=new i$e;return e.state=s,s.strm=e,s.status=pm,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=r,Ore(e)},o$e=(e,t)=>{if(Yv(e)||t>I7||t<0)return e?eh(e,Dl):Dl;let r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===ly&&t!==hs)return eh(e,e.avail_out===0?fN:Dl);let n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(va(e),e.avail_out===0)return r.last_flush=-1,Yi}else if(e.avail_in===0&&A7(t)<=A7(n)&&t!==hs)return eh(e,fN);if(r.status===ly&&e.avail_in!==0)return eh(e,fN);if(r.status===pm&&r.wrap===0&&(r.status=Zd),r.status===pm){let i=yC+(r.w_bits-8<<4)<<8,o=-1;if(o=r.strategy>=RE||r.level<2?0:r.level<6?1:r.level===6?2:3,i|=o<<6,r.strstart!==0&&(i|=32),i+=31-i%31,$g(r,i),r.strstart!==0&&($g(r,e.adler>>>16),$g(r,65535&e.adler)),e.adler=1,r.status=Zd,va(e),r.pending!==0)return r.last_flush=-1,Yi}if(r.status===57){if(e.adler=0,Ar(r,31),Ar(r,139),Ar(r,8),r.gzhead)Ar(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Ar(r,255&r.gzhead.time),Ar(r,r.gzhead.time>>8&255),Ar(r,r.gzhead.time>>16&255),Ar(r,r.gzhead.time>>24&255),Ar(r,r.level===9?2:r.strategy>=RE||r.level<2?4:0),Ar(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Ar(r,255&r.gzhead.extra.length),Ar(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Li(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(Ar(r,0),Ar(r,0),Ar(r,0),Ar(r,0),Ar(r,0),Ar(r,r.level===9?2:r.strategy>=RE||r.level<2?4:0),Ar(r,3),r.status=Zd,va(e),r.pending!==0)return r.last_flush=-1,Yi}if(r.status===69){if(r.gzhead.extra){let i=r.pending,o=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+o>r.pending_buf_size;){let s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(e.adler=Li(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=s,va(e),r.pending!==0)return r.last_flush=-1,Yi;i=0,o-=s}let a=new Uint8Array(r.gzhead.extra);r.pending_buf.set(a.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending+=o,r.gzhead.hcrc&&r.pending>i&&(e.adler=Li(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=73}if(r.status===73){if(r.gzhead.name){let i,o=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(e.adler=Li(e.adler,r.pending_buf,r.pending-o,o)),va(e),r.pending!==0)return r.last_flush=-1,Yi;o=0}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Ar(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=Li(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=91}if(r.status===91){if(r.gzhead.comment){let i,o=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(e.adler=Li(e.adler,r.pending_buf,r.pending-o,o)),va(e),r.pending!==0)return r.last_flush=-1,Yi;o=0}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Ar(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=Li(e.adler,r.pending_buf,r.pending-o,o))}r.status=103}if(r.status===103){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(va(e),r.pending!==0))return r.last_flush=-1,Yi;Ar(r,255&e.adler),Ar(r,e.adler>>8&255),e.adler=0}if(r.status=Zd,va(e),r.pending!==0)return r.last_flush=-1,Yi}if(e.avail_in!==0||r.lookahead!==0||t!==zu&&r.status!==ly){let i=r.level===0?Nre(r,t):r.strategy===RE?((o,a)=>{let s;for(;;){if(o.lookahead===0&&(mm(o),o.lookahead===0)){if(a===zu)return 1;break}if(o.match_length=0,s=Hu(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,s&&(_a(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,a===hs?(_a(o,!0),o.strm.avail_out===0?3:4):o.sym_next&&(_a(o,!1),o.strm.avail_out===0)?1:2})(r,t):r.strategy===Y8e?((o,a)=>{let s,l,c,u,h=o.window;for(;;){if(o.lookahead<=Qd){if(mm(o),o.lookahead<=Qd&&a===zu)return 1;if(o.lookahead===0)break}if(o.match_length=0,o.lookahead>=3&&o.strstart>0&&(c=o.strstart-1,l=h[c],l===h[++c]&&l===h[++c]&&l===h[++c])){u=o.strstart+Qd;do;while(l===h[++c]&&l===h[++c]&&l===h[++c]&&l===h[++c]&&l===h[++c]&&l===h[++c]&&l===h[++c]&&l===h[++c]&&c<u);o.match_length=Qd-(u-c),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(o.match_length>=3?(s=Hu(o,1,o.match_length-3),o.lookahead-=o.match_length,o.strstart+=o.match_length,o.match_length=0):(s=Hu(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),s&&(_a(o,!1),o.strm.avail_out===0))return 1}return o.insert=0,a===hs?(_a(o,!0),o.strm.avail_out===0?3:4):o.sym_next&&(_a(o,!1),o.strm.avail_out===0)?1:2})(r,t):cy[r.level].func(r,t);if(i!==3&&i!==4||(r.status=ly),i===1||i===3)return e.avail_out===0&&(r.last_flush=-1),Yi;if(i===2&&(t===z8e?H8e(r):t!==I7&&(Dk(r,0,0,!1),t===G8e&&(yu(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),va(e),e.avail_out===0))return r.last_flush=-1,Yi}return t!==hs?Yi:r.wrap<=0?N7:(r.wrap===2?(Ar(r,255&e.adler),Ar(r,e.adler>>8&255),Ar(r,e.adler>>16&255),Ar(r,e.adler>>24&255),Ar(r,255&e.total_in),Ar(r,e.total_in>>8&255),Ar(r,e.total_in>>16&255),Ar(r,e.total_in>>24&255)):($g(r,e.adler>>>16),$g(r,65535&e.adler)),va(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Yi:N7)},a$e=(e,t)=>{let r=t.length;if(Yv(e))return Dl;let n=e.state,i=n.wrap;if(i===2||i===1&&n.status!==pm||n.lookahead)return Dl;if(i===1&&(e.adler=qv(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){i===0&&(yu(n.head),n.strstart=0,n.block_start=0,n.insert=0);let l=new Uint8Array(n.w_size);l.set(t.subarray(r-n.w_size,r),0),t=l,r=n.w_size}let o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,mm(n);n.lookahead>=3;){let l=n.strstart,c=n.lookahead-2;do n.ins_h=Gu(n,n.ins_h,n.window[l+3-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--c);n.strstart=l,n.lookahead=2,mm(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,n.wrap=i,Yi},Vy={deflateInit:(e,t)=>O7(e,t,yC,15,8,J8e),deflateInit2:O7,deflateReset:Ore,deflateResetKeep:Are,deflateSetHeader:(e,t)=>Yv(e)||e.state.wrap!==2?Dl:(e.state.gzhead=t,Yi),deflate:o$e,deflateEnd:e=>{if(Yv(e))return Dl;let t=e.state.status;return e.state=null,t===Zd?eh(e,W8e):Yi},deflateSetDictionary:a$e,deflateInfo:"pako deflate (from Nodeca project)"},s$e=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),vC={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(let n in r)s$e(r,n)&&(e[n]=r[n])}}return e},flattenChunks:e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;let r=new Uint8Array(t);for(let n=0,i=0,o=e.length;n<o;n++){let a=e[n];r.set(a,i),i+=a.length}return r}},kre=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{kre=!1}var Xv=new Uint8Array(256);for(let e=0;e<256;e++)Xv[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Xv[254]=Xv[254]=1;var Jv={string2buf:e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,o,a=e.length,s=0;for(i=0;i<a;i++)r=e.charCodeAt(i),(64512&r)==55296&&i+1<a&&(n=e.charCodeAt(i+1),(64512&n)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)r=e.charCodeAt(i),(64512&r)==55296&&i+1<a&&(n=e.charCodeAt(i+1),(64512&n)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|63&r):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},buf2string:(e,t)=>{let r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i,o=new Array(2*r);for(i=0,n=0;n<r;){let a=e[n++];if(a<128){o[i++]=a;continue}let s=Xv[a];if(s>4)o[i++]=65533,n+=s-1;else{for(a&=s===2?31:s===3?15:7;s>1&&n<r;)a=a<<6|63&e[n++],s--;s>1?o[i++]=65533:a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|1023&a)}}return((a,s)=>{if(s<65534&&a.subarray&&kre)return String.fromCharCode.apply(null,a.length===s?a:a.subarray(0,s));let l="";for(let c=0;c<s;c++)l+=String.fromCharCode(a[c]);return l})(o,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(192&e[r])==128;)r--;return r<0||r===0?t:r+Xv[e[r]]>t?r:t}},Pre=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Dre=Object.prototype.toString,{Z_NO_FLUSH:l$e,Z_SYNC_FLUSH:c$e,Z_FULL_FLUSH:u$e,Z_FINISH:d$e,Z_OK:bS,Z_STREAM_END:h$e,Z_DEFAULT_COMPRESSION:f$e,Z_DEFAULT_STRATEGY:p$e,Z_DEFLATED:m$e}=eg;function By(e){this.options=vC.assign({level:f$e,method:m$e,chunkSize:16384,windowBits:15,memLevel:8,strategy:p$e},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pre,this.strm.avail_out=0;let r=Vy.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==bS)throw new Error(kh[r]);if(t.header&&Vy.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(n=typeof t.dictionary=="string"?Jv.string2buf(t.dictionary):Dre.call(t.dictionary)==="[object ArrayBuffer]"?new Uint8Array(t.dictionary):t.dictionary,r=Vy.deflateSetDictionary(this.strm,n),r!==bS)throw new Error(kh[r]);this._dict_set=!0}}function mN(e,t){let r=new By(t);if(r.push(e,!0),r.err)throw r.msg||kh[r.err];return r.result}By.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,i,o;if(this.ended)return!1;for(o=t===~~t?t:t===!0?d$e:l$e,typeof e=="string"?r.input=Jv.string2buf(e):Dre.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===c$e||o===u$e)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=Vy.deflate(r,o),i===h$e)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Vy.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===bS;if(r.avail_out!==0){if(o>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(r.avail_in===0)break}else this.onData(r.output)}return!0},By.prototype.onData=function(e){this.chunks.push(e)},By.prototype.onEnd=function(e){e===bS&&(this.result=vC.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var g$e={Deflate:By,deflate:mN,deflateRaw:function(e,t){return(t=t||{}).raw=!0,mN(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,mN(e,t)},constants:eg},IE=16209,y$e=function(e,t){let r,n,i,o,a,s,l,c,u,h,f,p,m,g,y,v,b,_,S,I,A,D,M,H,V=e.state;r=e.next_in,M=e.input,n=r+(e.avail_in-5),i=e.next_out,H=e.output,o=i-(t-e.avail_out),a=i+(e.avail_out-257),s=V.dmax,l=V.wsize,c=V.whave,u=V.wnext,h=V.window,f=V.hold,p=V.bits,m=V.lencode,g=V.distcode,y=(1<<V.lenbits)-1,v=(1<<V.distbits)-1;e:do{p<15&&(f+=M[r++]<<p,p+=8,f+=M[r++]<<p,p+=8),b=m[f&y];t:for(;;){if(_=b>>>24,f>>>=_,p-=_,_=b>>>16&255,_===0)H[i++]=65535&b;else{if(!(16&_)){if(!(64&_)){b=m[(65535&b)+(f&(1<<_)-1)];continue t}if(32&_){V.mode=16191;break e}e.msg="invalid literal/length code",V.mode=IE;break e}S=65535&b,_&=15,_&&(p<_&&(f+=M[r++]<<p,p+=8),S+=f&(1<<_)-1,f>>>=_,p-=_),p<15&&(f+=M[r++]<<p,p+=8,f+=M[r++]<<p,p+=8),b=g[f&v];r:for(;;){if(_=b>>>24,f>>>=_,p-=_,_=b>>>16&255,!(16&_)){if(!(64&_)){b=g[(65535&b)+(f&(1<<_)-1)];continue r}e.msg="invalid distance code",V.mode=IE;break e}if(I=65535&b,_&=15,p<_&&(f+=M[r++]<<p,p+=8,p<_&&(f+=M[r++]<<p,p+=8)),I+=f&(1<<_)-1,I>s){e.msg="invalid distance too far back",V.mode=IE;break e}if(f>>>=_,p-=_,_=i-o,I>_){if(_=I-_,_>c&&V.sane){e.msg="invalid distance too far back",V.mode=IE;break e}if(A=0,D=h,u===0){if(A+=l-_,_<S){S-=_;do H[i++]=h[A++];while(--_);A=i-I,D=H}}else if(u<_){if(A+=l+u-_,_-=u,_<S){S-=_;do H[i++]=h[A++];while(--_);if(A=0,u<S){_=u,S-=_;do H[i++]=h[A++];while(--_);A=i-I,D=H}}}else if(A+=u-_,_<S){S-=_;do H[i++]=h[A++];while(--_);A=i-I,D=H}for(;S>2;)H[i++]=D[A++],H[i++]=D[A++],H[i++]=D[A++],S-=3;S&&(H[i++]=D[A++],S>1&&(H[i++]=D[A++]))}else{A=i-I;do H[i++]=H[A++],H[i++]=H[A++],H[i++]=H[A++],S-=3;while(S>2);S&&(H[i++]=H[A++],S>1&&(H[i++]=H[A++]))}break}}break}}while(r<n&&i<a);S=p>>3,r-=S,p-=S<<3,f&=(1<<p)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<a?a-i+257:257-(i-a),V.hold=f,V.bits=p},NE=15,v$e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),b$e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),E$e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),_$e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),$y=(e,t,r,n,i,o,a,s)=>{let l=s.bits,c,u,h,f,p,m,g=0,y=0,v=0,b=0,_=0,S=0,I=0,A=0,D=0,M=0,H=null,V=new Uint16Array(16),G=new Uint16Array(16),Y,Z,$,F=null;for(g=0;g<=NE;g++)V[g]=0;for(y=0;y<n;y++)V[t[r+y]]++;for(_=l,b=NE;b>=1&&V[b]===0;b--);if(_>b&&(_=b),b===0)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(v=1;v<b&&V[v]===0;v++);for(_<v&&(_=v),A=1,g=1;g<=NE;g++)if(A<<=1,A-=V[g],A<0)return-1;if(A>0&&(e===0||b!==1))return-1;for(G[1]=0,g=1;g<NE;g++)G[g+1]=G[g]+V[g];for(y=0;y<n;y++)t[r+y]!==0&&(a[G[t[r+y]]++]=y);if(e===0?(H=F=a,m=20):e===1?(H=v$e,F=b$e,m=257):(H=E$e,F=_$e,m=0),M=0,y=0,g=v,p=o,S=_,I=0,h=-1,D=1<<_,f=D-1,e===1&&D>852||e===2&&D>592)return 1;for(;;){Y=g-I,a[y]+1<m?(Z=0,$=a[y]):a[y]>=m?(Z=F[a[y]-m],$=H[a[y]-m]):(Z=96,$=0),c=1<<g-I,u=1<<S,v=u;do u-=c,i[p+(M>>I)+u]=Y<<24|Z<<16|$|0;while(u!==0);for(c=1<<g-1;M&c;)c>>=1;if(c!==0?(M&=c-1,M+=c):M=0,y++,--V[g]==0){if(g===b)break;g=t[r+a[y]]}if(g>_&&(M&f)!==h){for(I===0&&(I=_),p+=v,S=g-I,A=1<<S;S+I<b&&(A-=V[S+I],!(A<=0));)S++,A<<=1;if(D+=1<<S,e===1&&D>852||e===2&&D>592)return 1;h=M&f,i[h]=_<<24|S<<16|p-o|0}}return M!==0&&(i[p+M]=g-I<<24|64<<16|0),s.bits=_,0},{Z_FINISH:k7,Z_BLOCK:w$e,Z_TREES:AE,Z_OK:fh,Z_STREAM_END:S$e,Z_NEED_DICT:T$e,Z_STREAM_ERROR:fs,Z_DATA_ERROR:Lre,Z_MEM_ERROR:Mre,Z_BUF_ERROR:C$e,Z_DEFLATED:P7}=eg,bC=16180,ES=16190,nc=16191,gN=16192,yN=16194,OE=16199,kE=16200,vN=16206,_n=16209,D7=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function x$e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var ph=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<bC||t.mode>16211?1:0},jre=e=>{if(ph(e))return fs;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=bC,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,fh},Ure=e=>{if(ph(e))return fs;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,jre(e)},Fre=(e,t)=>{let r;if(ph(e))return fs;let n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?fs:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Ure(e))},L7=(e,t)=>{if(!e)return fs;let r=new x$e;e.state=r,r.strm=e,r.window=null,r.mode=bC;let n=Fre(e,t);return n!==fh&&(e.state=null),n},bN,EN,M7=!0,R$e=e=>{if(M7){bN=new Int32Array(512),EN=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for($y(1,e.lens,0,288,bN,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;$y(2,e.lens,0,32,EN,0,e.work,{bits:5}),M7=!1}e.lencode=bN,e.lenbits=9,e.distcode=EN,e.distbits=5},Vre=(e,t,r,n)=>{let i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},I$e=(e,t)=>{let r,n,i,o,a,s,l,c,u,h,f,p,m,g,y,v,b,_,S,I,A,D,M=0,H=new Uint8Array(4),V,G,Y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ph(e)||!e.output||!e.input&&e.avail_in!==0)return fs;r=e.state,r.mode===nc&&(r.mode=gN),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,c=r.hold,u=r.bits,h=s,f=l,D=fh;e:for(;;)switch(r.mode){case bC:if(r.wrap===0){r.mode=gN;break}for(;u<16;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}if(2&r.wrap&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,H[0]=255&c,H[1]=c>>>8&255,r.check=Li(r.check,H,2,0),c=0,u=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=_n;break}if((15&c)!==P7){e.msg="unknown compression method",r.mode=_n;break}if(c>>>=4,u-=4,A=8+(15&c),r.wbits===0&&(r.wbits=A),A>15||A>r.wbits){e.msg="invalid window size",r.mode=_n;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&c?16189:nc,c=0,u=0;break;case 16181:for(;u<16;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}if(r.flags=c,(255&Si(r))!==P7){e.msg="unknown compression method",r.mode=_n;break}if(57344&Si(r)){e.msg="unknown header flags set",r.mode=_n;break}r.head&&(r.head.text=c>>8&1),512&Si(r)&&4&r.wrap&&(H[0]=255&c,H[1]=c>>>8&255,r.check=Li(r.check,H,2,0)),c=0,u=0,r.mode=16182;case 16182:for(;u<32;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}r.head&&(r.head.time=c),512&Si(r)&&4&r.wrap&&(H[0]=255&c,H[1]=c>>>8&255,H[2]=c>>>16&255,H[3]=c>>>24&255,r.check=Li(r.check,H,4,0)),c=0,u=0,r.mode=16183;case 16183:for(;u<16;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&Si(r)&&4&r.wrap&&(H[0]=255&c,H[1]=c>>>8&255,r.check=Li(r.check,H,2,0)),c=0,u=0,r.mode=16184;case 16184:if(1024&Si(r)){for(;u<16;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),512&Si(r)&&4&r.wrap&&(H[0]=255&c,H[1]=c>>>8&255,r.check=Li(r.check,H,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&Si(r)&&(p=r.length,p>s&&(p=s),p&&(r.head&&(A=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+p),A)),512&Si(r)&&4&r.wrap&&(r.check=Li(r.check,n,p,o)),s-=p,o+=p,r.length-=p),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&Si(r)){if(s===0)break e;p=0;do A=n[o+p++],r.head&&A&&r.length<65536&&(r.head.name+=String.fromCharCode(A));while(A&&p<s);if(512&Si(r)&&4&r.wrap&&(r.check=Li(r.check,n,p,o)),s-=p,o+=p,A)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&Si(r)){if(s===0)break e;p=0;do A=n[o+p++],r.head&&A&&r.length<65536&&(r.head.comment+=String.fromCharCode(A));while(A&&p<s);if(512&Si(r)&&4&r.wrap&&(r.check=Li(r.check,n,p,o)),s-=p,o+=p,A)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&Si(r)){for(;u<16;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}if(4&r.wrap&&c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=_n;break}c=0,u=0}r.head&&(r.head.hcrc=Si(r)>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=nc;break;case 16189:for(;u<32;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}e.adler=r.check=D7(c),c=0,u=0,r.mode=ES;case ES:if(r.havedict===0)return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,r.hold=c,r.bits=u,T$e;e.adler=r.check=1,r.mode=nc;case nc:if(t===w$e||t===AE)break e;case gN:if(r.last){c>>>=7&u,u-=7&u,r.mode=vN;break}for(;u<3;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}switch(r.last=1&c,c>>>=1,u-=1,3&c){case 0:r.mode=16193;break;case 1:if(R$e(r),r.mode=OE,t===AE){c>>>=2,u-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=_n}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=_n;break}if(r.length=65535&c,c=0,u=0,r.mode=yN,t===AE)break e;case yN:r.mode=16195;case 16195:if(p=r.length,p){if(p>s&&(p=s),p>l&&(p=l),p===0)break e;i.set(n.subarray(o,o+p),a),s-=p,o+=p,l-=p,a+=p,r.length-=p;break}r.mode=nc;break;case 16196:for(;u<14;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}if(r.nlen=257+(31&c),c>>>=5,u-=5,r.ndist=1+(31&c),c>>>=5,u-=5,r.ncode=4+(15&c),c>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=_n;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;u<3;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}r.lens[Y[r.have++]]=7&c,c>>>=3,u-=3}for(;r.have<19;)r.lens[Y[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,V={bits:r.lenbits},D=$y(0,r.lens,0,19,r.lencode,0,r.work,V),r.lenbits=V.bits,D){e.msg="invalid code lengths set",r.mode=_n;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;M=r.lencode[c&(1<<r.lenbits)-1],y=M>>>24,v=M>>>16&255,b=65535&M,!(y<=u);){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}if(b<16)c>>>=y,u-=y,r.lens[r.have++]=b;else{if(b===16){for(G=y+2;u<G;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}if(c>>>=y,u-=y,r.have===0){e.msg="invalid bit length repeat",r.mode=_n;break}A=r.lens[r.have-1],p=3+(3&c),c>>>=2,u-=2}else if(b===17){for(G=y+3;u<G;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}c>>>=y,u-=y,A=0,p=3+(7&c),c>>>=3,u-=3}else{for(G=y+7;u<G;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}c>>>=y,u-=y,A=0,p=11+(127&c),c>>>=7,u-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=_n;break}for(;p--;)r.lens[r.have++]=A}}if(r.mode===_n)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=_n;break}if(r.lenbits=9,V={bits:r.lenbits},D=$y(1,r.lens,0,r.nlen,r.lencode,0,r.work,V),r.lenbits=V.bits,D){e.msg="invalid literal/lengths set",r.mode=_n;break}if(r.distbits=6,r.distcode=r.distdyn,V={bits:r.distbits},D=$y(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,V),r.distbits=V.bits,D){e.msg="invalid distances set",r.mode=_n;break}if(r.mode=OE,t===AE)break e;case OE:r.mode=kE;case kE:if(s>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,r.hold=c,r.bits=u,y$e(e,f),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,c=r.hold,u=r.bits,r.mode===nc&&(r.back=-1);break}for(r.back=0;M=r.lencode[c&(1<<r.lenbits)-1],y=M>>>24,v=M>>>16&255,b=65535&M,!(y<=u);){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}if(v&&!(240&v)){for(_=y,S=v,I=b;M=r.lencode[I+((c&(1<<_+S)-1)>>_)],y=M>>>24,v=M>>>16&255,b=65535&M,!(_+y<=u);){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}c>>>=_,u-=_,r.back+=_}if(c>>>=y,u-=y,r.back+=y,r.length=b,v===0){r.mode=16205;break}if(32&v){r.back=-1,r.mode=nc;break}if(64&v){e.msg="invalid literal/length code",r.mode=_n;break}r.extra=15&v,r.mode=16201;case 16201:if(r.extra){for(G=r.extra;u<G;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;M=r.distcode[c&(1<<r.distbits)-1],y=M>>>24,v=M>>>16&255,b=65535&M,!(y<=u);){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}if(!(240&v)){for(_=y,S=v,I=b;M=r.distcode[I+((c&(1<<_+S)-1)>>_)],y=M>>>24,v=M>>>16&255,b=65535&M,!(_+y<=u);){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}c>>>=_,u-=_,r.back+=_}if(c>>>=y,u-=y,r.back+=y,64&v){e.msg="invalid distance code",r.mode=_n;break}r.offset=b,r.extra=15&v,r.mode=16203;case 16203:if(r.extra){for(G=r.extra;u<G;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=_n;break}r.mode=16204;case 16204:if(l===0)break e;if(p=f-l,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=_n;break}p>r.wnext?(p-=r.wnext,m=r.wsize-p):m=r.wnext-p,p>r.length&&(p=r.length),g=r.window}else g=i,m=a-r.offset,p=r.length;p>l&&(p=l),l-=p,r.length-=p;do i[a++]=g[m++];while(--p);r.length===0&&(r.mode=kE);break;case 16205:if(l===0)break e;i[a++]=r.length,l--,r.mode=kE;break;case vN:if(r.wrap){for(;u<32;){if(s===0)break e;s--,c|=n[o++]<<u,u+=8}if(f-=l,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=Si(r)?Li(r.check,i,f,a-f):qv(r.check,i,f,a-f)),f=l,4&r.wrap&&(Si(r)?c:D7(c))!==r.check){e.msg="incorrect data check",r.mode=_n;break}c=0,u=0}r.mode=16207;case 16207:if(r.wrap&&Si(r)){for(;u<32;){if(s===0)break e;s--,c+=n[o++]<<u,u+=8}if(4&r.wrap&&c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=_n;break}c=0,u=0}r.mode=16208;case 16208:D=S$e;break e;case _n:D=Lre;break e;case 16210:return Mre;default:return fs}return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,r.hold=c,r.bits=u,(r.wsize||f!==e.avail_out&&r.mode<_n&&(r.mode<vN||t!==k7))&&Vre(e,e.output,e.next_out,f-e.avail_out),h-=e.avail_in,f-=e.avail_out,e.total_in+=h,e.total_out+=f,r.total+=f,4&r.wrap&&f&&(e.adler=r.check=Si(r)?Li(r.check,i,f,e.next_out-f):qv(r.check,i,f,e.next_out-f)),e.data_type=r.bits+(r.last?64:0)+(r.mode===nc?128:0)+(r.mode===OE||r.mode===yN?256:0),(h===0&&f===0||t===k7)&&D===fh&&(D=C$e),D},fc={inflateReset:Ure,inflateReset2:Fre,inflateResetKeep:jre,inflateInit:e=>L7(e,15),inflateInit2:L7,inflate:I$e,inflateEnd:e=>{if(ph(e))return fs;let t=e.state;return t.window&&(t.window=null),e.state=null,fh},inflateGetHeader:(e,t)=>{if(ph(e))return fs;let r=e.state;return 2&r.wrap?(r.head=t,t.done=!1,fh):fs},inflateSetDictionary:(e,t)=>{let r=t.length,n,i,o;return ph(e)?fs:(n=e.state,n.wrap!==0&&n.mode!==ES?fs:n.mode===ES&&(i=1,i=qv(i,t,r,0),i!==n.check)?Lre:(o=Vre(e,t,r,r),o?(n.mode=16210,Mre):(n.havedict=1,fh)))},inflateInfo:"pako inflate (from Nodeca project)"},N$e=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Bre=Object.prototype.toString,{Z_NO_FLUSH:A$e,Z_FINISH:O$e,Z_OK:Hy,Z_STREAM_END:_N,Z_NEED_DICT:wN,Z_STREAM_ERROR:k$e,Z_DATA_ERROR:j7,Z_MEM_ERROR:P$e}=eg;function zy(e){this.options=vC.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pre,this.strm.avail_out=0;let r=fc.inflateInit2(this.strm,t.windowBits);if(r!==Hy)throw new Error(kh[r]);if(this.header=new N$e,fc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Jv.string2buf(t.dictionary):Bre.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=fc.inflateSetDictionary(this.strm,t.dictionary),r!==Hy)))throw new Error(kh[r])}function SN(e,t){let r=new zy(t);if(r.push(e),r.err)throw r.msg||kh[r.err];return r.result}zy.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,o,a,s;if(this.ended)return!1;for(a=t===~~t?t:t===!0?O$e:A$e,Bre.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=fc.inflate(r,a),o===wN&&i&&(o=fc.inflateSetDictionary(r,i),o===Hy?o=fc.inflate(r,a):o===j7&&(o=wN));r.avail_in>0&&o===_N&&r.state.wrap>0&&e[r.next_in]!==0;)fc.inflateReset(r),o=fc.inflate(r,a);switch(o){case k$e:case j7:case wN:case P$e:return this.onEnd(o),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(r.avail_out===0||o===_N))if(this.options.to==="string"){let l=Jv.utf8border(r.output,r.next_out),c=r.next_out-l,u=Jv.buf2string(r.output,l);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(l,l+c),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(o!==Hy||s!==0){if(o===_N)return o=fc.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0},zy.prototype.onData=function(e){this.chunks.push(e)},zy.prototype.onEnd=function(e){e===Hy&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=vC.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var D$e={Inflate:zy,inflate:SN,inflateRaw:function(e,t){return(t=t||{}).raw=!0,SN(e,t)},ungzip:SN,constants:eg},{Deflate:vze,deflate:L$e,deflateRaw:bze,gzip:Eze}=g$e,{Inflate:_ze,inflate:M$e,inflateRaw:wze,ungzip:Sze}=D$e,j$e=L$e,U$e=M$e,$re=function(e){return e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE",e}($re||{}),F$e=class{constructor(){R(this,"_sequence",0),R(this,"_startTime",Date.now()),R(this,"isUseOneByte",!0)}get startTime(){let e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){let t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){let a=new Uint8Array(4);a.set([1,0,0,0]);let s={id:0,length:4,data:a.buffer},l={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[s]};t.commonPacketHeader.extension=1,t.extension=l,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;L("SHOW_DATASTREAM2_LOG")&&w.debug("send data header: ".concat(JSON.stringify(t.commonPacketHeader)));let r=new ArrayBuffer(t.commonPacketHeader.length),n=new Uint8Array(r),i=new DataView(r),o=0;if(i.setUint16(o,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),o+=2,i.setUint32(o,t.commonPacketHeader.sequence,!0),o+=4,i.setUint16(o,t.commonStreamHeader,!0),o+=2,t.extension){let a=this.serializeExtension(t.extension);n.set(new Uint8Array(a),o),o+=a.byteLength}if(n.set(new Uint8Array(t.payload),o),o+=t.payload.byteLength,o!==t.commonPacketHeader.length)throw Error("serialize error!");return r}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);let t=new DataView(e),r=0,n=t.getUint16(r,!0);r+=2;let i={length:16383&n,reserved:(16384&n)>>14,extension:(32768&n)>>15,sequence:t.getUint16(r+2,!0)<<16|t.getUint16(r,!0)},o,a;if(r+=4,L("SHOW_DATASTREAM2_LOG")&&w.debug("receive data header: ".concat(JSON.stringify(i))),t.getUint16(r,!0),r+=2,i.extension){a=this.deserializeExtension(e.slice(r)),r+=2+a.length,o=e.slice(r);let s=!1;if(a.datas.length>0){let l=a.datas.find(c=>c.id===0);l&&(s=(1&new DataView(l.data).getUint32(0,!0))==1)}o=s?this.decompress(o):o}else o=e.slice(8);return o}serializeExtension(e){let{profile:t,length:r,datas:n}=e,i=new ArrayBuffer(r+2),o=new Uint8Array(i),a=new DataView(i),s=0;if(a.setUint8(s++,t),a.setUint8(s++,r),n.forEach(l=>{t?(a.setUint8(s++,l.id),a.setUint8(s++,l.length),o.set(new Uint8Array(l.data),s),s+=l.data.byteLength):(a.setUint8(s++,l.id|l.length<<4),o.set(new Uint8Array(l.data),s),s+=l.data.byteLength)}),s!==r+2)throw Error("serialize extension error, is ".concat(s,"!==").concat(r+2));return i}deserializeExtension(e){let t=new DataView(e),r=0,n=t.getUint8(r);r++;let i=t.getUint8(r);r++;let o=n===$re.TWO_BYTE,a=[],s=new DataView(e,2),l=0;for(;l<i;){let c=0,u=0,h=new ArrayBuffer(0);o?(c=s.getUint8(l),l++,u=s.getUint8(l),l++):(c=15&s.getUint8(l),u=s.getUint8(l)>>4,l++),u>0&&(h=s.buffer.slice(l+2,l+2+u),l+=h.byteLength),a.push({id:c,length:u,data:h})}if(l!==i)throw Error("parse error");return{profile:n,length:i,datas:a}}decompress(e){return U$e(new Uint8Array(e))}compress(e){return j$e(new Uint8Array(e))}},V$e={name:"DataStream",create:(e,t)=>{let r=t?new C6e(e):new x6e(e);return r.useDataStream(new F$e),r}},B$e=class extends _r{constructor(e,t,r){super(),R(this,"ws",void 0),R(this,"requestId",1),R(this,"heartBeatTimer",void 0),R(this,"joinInfo",void 0),R(this,"clientId",void 0),R(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),R(this,"onClose",n=>{this.emit("close"),this.dispose()}),R(this,"onMessage",n=>{let i=JSON.parse(n.data);if(!i||i.command!=="serverResponse"||!i.requestId)return i&&i.command==="serverStatus"&&i.serverStatus&&i.serverStatus.command?(this.emit("status",i.serverStatus),void this.emit(i.serverStatus.command,i.serverStatus)):void 0;this.emit("req_".concat(i.requestId),i)}),this.joinInfo=e,this.clientId=t,this.ws=new Uv("cross-channel-".concat(this.clientId),r),this.ws.on(Ke.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(Ke.CONNECTED,this.onOpen),this.ws.on(Ke.ON_MESSAGE,this.onMessage),this.ws.on(Ke.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(e){let t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new fe((t,r)=>{let n=window.setTimeout(()=>{r(new q(O.TIMEOUT,"wait status timeout, status: ".concat(e)))},5e3);this.once(e,i=>{window.clearTimeout(n),i.state&&i.state!==0?r(new q(O.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)}),this.once("dispose",()=>{window.clearTimeout(n),r(new q(O.WS_ABORT))})})}async request(e){if(this.ws.state==="closed")throw new q(O.WS_DISCONNECT);let t=()=>new fe((o,a)=>{this.ws.once(Ke.CLOSED,()=>a(new q(O.WS_ABORT))),this.ws.once(Ke.CONNECTED,o)});this.ws.state!=="connected"&&await t();let r=this.sendMessage(e),n=new fe((o,a)=>{let s=()=>{a(new q(O.WS_ABORT))};this.ws.once(Ke.RECONNECTING,s),this.ws.once(Ke.CLOSED,s),this.once("req_".concat(r),o),jn(3e3).then(()=>{this.removeAllListeners("req_".concat(r)),this.ws.off(Ke.RECONNECTING,s),this.ws.off(Ke.CLOSED,s),a(new q(O.TIMEOUT,"cross channel ws request timeout"))})}),i=await n;if(!i||i.code!==200)throw new q(O.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(i)));return i}async connect(e){this.ws.removeAllListeners(Ke.REQUEST_NEW_URLS),this.ws.on(Ke.REQUEST_NEW_URLS,t=>{t(e)}),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){let t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}},$$e=class extends _r{set state(e){e!==this._state&&(e!==so.RELAY_STATE_FAILURE&&(this.errorCode=jf.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,r,n,i){super(),R(this,"joinInfo",void 0),R(this,"sid",void 0),R(this,"clientId",void 0),R(this,"cancelToken",to.CancelToken.source()),R(this,"workerToken",void 0),R(this,"requestId",0),R(this,"signal",void 0),R(this,"prevChannelMediaConfig",void 0),R(this,"httpRetryConfig",void 0),R(this,"_resolution",void 0),R(this,"_state",so.RELAY_STATE_IDLE),R(this,"errorCode",jf.RELAY_OK),R(this,"onStatus",o=>{w.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(o))),o&&o.command&&(o.command==="onAudioPacketReceived"&&this.emit("event",ic.PACKET_RECEIVED_AUDIO_FROM_SRC),o.command==="onVideoPacketReceived"&&this.emit("event",ic.PACKET_RECEIVED_VIDEO_FROM_SRC),o.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=jf.SRC_TOKEN_EXPIRED,this.state=so.RELAY_STATE_FAILURE),o.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=jf.DEST_TOKEN_EXPIRED,this.state=so.RELAY_STATE_FAILURE))}),R(this,"onReconnect",async()=>{w.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",ic.NETWORK_DISCONNECTED),this.state=so.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(o=>{this.state!==so.RELAY_STATE_IDLE&&(w.error("auto restart channel media relay failed",o.toString()),this.errorCode=jf.SERVER_CONNECTION_LOST,this.state=so.RELAY_STATE_FAILURE)})}),this.joinInfo=e,this.clientId=t,this.sid=dp(),this.signal=new B$e(this.joinInfo,this.clientId,r),this.httpRetryConfig=n,this._resolution=i}async startChannelMediaRelay(e){if(this.state!==so.RELAY_STATE_IDLE)throw new q(O.INVALID_OPERATION);this.state=so.RELAY_STATE_CONNECTING,await this.connect(),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(t){throw t.data&&t.data.serverResponse&&t.data.serverResponse.command==="SetSourceChannel"?new q(O.CROSS_CHANNEL_FAILED_JOIN_SRC):t.data&&t.data.serverResponse&&t.serverResponse.command==="SetDestChannelStatus"?new q(O.CROSS_CHANNEL_FAILED_JOIN_DEST):t.data&&t.data.serverResponse&&t.serverResponse.command==="StartPacketTransfer"?new q(O.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):t}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==so.RELAY_STATE_RUNNING)throw new q(O.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==so.RELAY_STATE_RUNNING)throw new q(O.INVALID_OPERATION);let t=this.genMessage(Pi.SetVideoProfile);await this.signal.request(t),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),w.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=so.RELAY_STATE_IDLE,this.dispose()}dispose(){w.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=to.CancelToken.source(),this.state=so.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){let e=await j6e(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",ic.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){let t=this.genMessage(Pi.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));let r=this.genMessage(Pi.SetSdkProfile,e);await this.signal.request(r),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));let n=this.genMessage(Pi.SetSourceChannel,e);await this.signal.request(n),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",ic.PACKET_JOINED_SRC_CHANNEL),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));let i=this.genMessage(Pi.SetSourceUserId,e);await this.signal.request(i),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));let o=this.genMessage(Pi.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",ic.PACKET_JOINED_DEST_CHANNEL),w.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));let a=this.genMessage(Pi.StartPacketTransfer,e);await this.signal.request(a),this.emit("event",ic.PACKET_SENT_TO_DEST_CHANNEL),this.state=so.RELAY_STATE_RUNNING,w.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){let t=this.genMessage(Pi.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",ic.PACKET_UPDATE_DEST_CHANNEL),w.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){let e=this.genMessage(Pi.StopPacketTransfer);await this.signal.request(e),w.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){let r=[],n=[],i=[];this.requestId+=1;let o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:Ra,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};o.sdkVersion==="4.22.0"&&(o.sdkVersion="0.0.1");let a=null,s=null;switch(e){case Pi.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case Pi.SetSourceChannel:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new q(O.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceChannel",uid:"0",channelName:s.channelName,token:s.token||this.joinInfo.appId},o;case Pi.SetSourceUserId:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new q(O.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceUserId",uid:s.uid+""},o;case Pi.SetDestChannel:if(a=t&&t.getDestChannelMediaInfo(),!a)throw new q(O.UNEXPECTED_ERROR,"can not find dest config");return a.forEach(l=>{r.push(l.channelName),n.push(l.uid+""),i.push(l.token||this.joinInfo.appId)}),o.clientRequest={command:"SetDestChannel",channelName:r,uid:n,token:i},o;case Pi.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case Pi.Reconnect:return o.clientRequest={command:"Reconnect"},o;case Pi.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case Pi.UpdateDestChannel:if(a=t&&t.getDestChannelMediaInfo(),!a)throw new q(O.UNEXPECTED_ERROR,"can not find dest config");return a.forEach(l=>{r.push(l.channelName),n.push(l.uid+""),i.push(l.token||this.joinInfo.appId)}),o.clientRequest={command:"UpdateDestChannel",channelName:r,uid:n,token:i},o;case Pi.SetVideoProfile:o.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return o}},H$e={name:"ChannelMediaRelay",create:function(e){return new $$e(e.joinInfo,e.clientId,e.websocketRetryConfig||Yr,e.httpRetryConfig||Yr,e.resolution)}};function U7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Hg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U7(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var z$e=class extends _r{constructor(e,t,r,n){super(),R(this,"spec",void 0),R(this,"token",void 0),R(this,"websocket",void 0),R(this,"pingpongTimer",void 0),R(this,"reconnectMode","retry"),R(this,"serviceMode",void 0),R(this,"reqId",0),R(this,"commandReqId",0),R(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),R(this,"handleWebSocketMessage",i=>{if(!i.data)return;let o=JSON.parse(i.data);o.requestId?this.emit("@".concat(o.requestId,"-").concat(o.sid),o):(Te.workerEvent(this.spec.sid,{actionType:"status",serverCode:o.code,workerType:this.serviceMode===bc.TRANSCODE?1:2}),this.emit(mu.PUBLISH_STREAM_STATUS,o))}),this.spec=t,this.token=e,this.serviceMode=n,this.websocket=new Uv("live-streaming",r),this.websocket.on(Ke.CONNECTED,this.handleWebSocketOpen),this.websocket.on(Ke.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(Ke.REQUEST_NEW_URLS,(i,o)=>{Yn(this,mu.REQUEST_NEW_ADDRESS).then(i).catch(o)}),this.websocket.on(Ke.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(e){return this.websocket.init(e)}async request(e,t,r,n){this.reqId+=1,e==="request"&&(this.commandReqId+=1);let i=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new q(O.UNEXPECTED_ERROR);let a=Hg({command:e,sdkVersion:Ra==="4.22.0"?"0.0.1":Ra,seq:o,requestId:o,allocate:r,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if(this.websocket.state==="closed")throw new q(O.WS_DISCONNECT);let s=()=>new fe((h,f)=>{this.websocket.once(Ke.CLOSED,()=>f(new q(O.WS_ABORT))),this.websocket.once(Ke.CONNECTED,h)});this.websocket.state!=="connected"&&await s(),a.clientRequest&&(a.clientRequest.workerToken=this.token);let l=new fe((h,f)=>{let p=()=>{f(new q(O.WS_ABORT))};this.websocket.once(Ke.RECONNECTING,p),this.websocket.once(Ke.CLOSED,p),this.once("@".concat(o,"-").concat(this.spec.sid),m=>{h(m)})});n&&Te.workerEvent(this.spec.sid,Hg(Hg({},n),{},{requestId:i,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));let c=Date.now();this.websocket.sendMessage(a);let u=null;try{u=await l}catch(h){if(this.websocket.state==="closed")throw h;return await s(),await this.request(e,t,r)}return n&&Te.workerEvent(this.spec.sid,Hg(Hg({},n),{},{requestId:i,actionType:"response",payload:JSON.stringify(u.serverResponse),serverCode:u.code,success:u.code===200,responseTime:Date.now()-c})),u.code!==200&&this.handleResponseError(u),u}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){let e=Ra==="4.22.0"?"0.0.1":Ra;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case Zr.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void w.warning("live stream response already exists stream");case Zr.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case Zr.LIVE_STREAM_RESPONSE_BAD_STREAM:case Zr.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new q(O.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case Zr.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(e.serverResponse.command==="UnpublishStream")return;throw new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Zr.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new q(O.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case Zr.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{let t=new q(O.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(mu.WARNING,t,e.serverResponse.url)}case Zr.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{let t=new q(O.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(mu.WARNING,t,e.serverResponse.url)}case Zr.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case Zr.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new q(O.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case Zr.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{let t=new q(O.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(mu.WARNING,t,e.serverResponse.url)}case Zr.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case Zr.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case Zr.LIVE_STREAM_RESPONSE_WORKER_LOST:case Zr.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(e.serverResponse.command==="UnpublishStream")return;throw new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Zr.ERROR_FAIL_SEND_MESSAGE:if(e.serverResponse.command==="UnpublishStream")return;if(e.serverResponse.command==="UpdateTranscoding"||e.serverResponse.command==="ControlStream")return new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case Zr.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Zr.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Zr.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Zr.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new q(O.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(dC)},6e3)}};function F7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ao(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F7(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var G$e=class extends _r{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yr,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Yr;super(),R(this,"onLiveStreamWarning",void 0),R(this,"onLiveStreamError",void 0),R(this,"spec",void 0),R(this,"retryTimeout",1e4),R(this,"connection",void 0),R(this,"httpRetryConfig",void 0),R(this,"wsRetryConfig",void 0),R(this,"streamingTasks",new Map),R(this,"isStartingStreamingTask",!1),R(this,"taskMutex",new ai("live-streaming")),R(this,"cancelToken",to.CancelToken.source()),R(this,"transcodingConfig",void 0),R(this,"uapResponse",void 0),R(this,"lastTaskId",1),R(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=r,this.wsRetryConfig=t}async setTranscodingConfig(e){let t=ao(ao({},HVe),e);t.videoCodecProfile!==66&&t.videoCodecProfile!==77&&t.videoCodecProfile!==100&&(w.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map(o=>ao(ao(ao({},$Ve),o),{},{zOrder:o.zOrder?o.zOrder+1:1}))),function(o){gr(o.width)||Wt(o.width,"config.width",0,1e4),gr(o.height)||Wt(o.height,"config.height",0,1e4),gr(o.videoBitrate)||Wt(o.videoBitrate,"config.videoBitrate",1,1e6),gr(o.videoFrameRate)||Wt(o.videoFrameRate,"config.videoFrameRate"),gr(o.lowLatency)||mc(o.lowLatency,"config.lowLatency"),gr(o.audioSampleRate)||sn(o.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),gr(o.audioBitrate)||Wt(o.audioBitrate,"config.audioBitrate",1,128),gr(o.audioChannels)||sn(o.audioChannels,"config.audioChannels",[1,2,3,4,5]),gr(o.videoGop)||Wt(o.videoGop,"config.videoGop"),gr(o.videoCodecProfile)||sn(o.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),gr(o.userCount)||Wt(o.userCount,"config.userCount",0,17),gr(o.backgroundColor)||Wt(o.backgroundColor,"config.backgroundColor",0,16777215),gr(o.userConfigExtraInfo)||kn(o.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),o.transcodingUsers&&!gr(o.transcodingUsers)&&(cc(o.transcodingUsers,"config.transcodingUsers"),o.transcodingUsers.forEach((a,s)=>{pC(a.uid),gr(a.x)||Wt(a.x,"transcodingUser[".concat(s,"].x"),0,1e4),gr(a.y)||Wt(a.y,"transcodingUser[".concat(s,"].y"),0,1e4),gr(a.width)||Wt(a.width,"transcodingUser[".concat(s,"].width"),0,1e4),gr(a.height)||Wt(a.height,"transcodingUser[".concat(s,"].height"),0,1e4),gr(a.zOrder)||Wt(a.zOrder-1,"transcodingUser[".concat(s,"].zOrder"),0,100),gr(a.alpha)||Wt(a.alpha,"transcodingUser[".concat(s,"].alpha"),0,1,!1)})),gr(o.watermark)||wI(o.watermark,"watermark"),gr(o.backgroundImage)||wI(o.backgroundImage,"backgroundImage"),o.images&&!gr(o.images)&&(cc(o.images,"config.images"),o.images.forEach((a,s)=>{wI(a,"images[".concat(s,"]"))}))}(t);let r=[];t.images&&r.push(...t.images.map(o=>ao(ao(ao({},_I),o),{},{zOrder:255}))),t.backgroundImage&&(r.push(ao(ao(ao({},_I),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(r.push(ao(ao(ao({},_I),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=r,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map(o=>ao({},o)),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);let n=(t.userConfigs||[]).map(o=>typeof o.uid=="number"?fe.resolve(o.uid):qte(o.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await fe.all(n)).forEach((o,a)=>{t.userConfigs&&t.userConfigs[a]&&(t.userConfigs[a].uid=o)}),this.transcodingConfig=t,this.connection)try{var i;let o=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(Cc(i=this.streamingTasks).call(i)).map(a=>a.taskId).join("#")});w.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(o.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(o){if(!o.data||!o.data.retry)throw o;o.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(a=>{w.warning("[".concat(this.spec.clientId,"] live streaming receive error"),o.toString(),"try to republish",a.url),this.startLiveStreamingTask(a.url,a.mode,o).then(()=>{w.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(a.url," success"))}).catch(s=>{w.error("[".concat(this.spec.clientId,"] live streaming republish failed"),a.url,s.toString()),this.onLiveStreamError&&this.onLiveStreamError(a.url,s)})})}}async startLiveStreamingTask(e,t,r){if(!this.transcodingConfig&&t===bc.TRANSCODE)throw new q(O.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let n={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};w.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));let i=await this.taskMutex.lock();if(!this.connection&&r)return void i();if(this.streamingTasks.get(e)&&!r)return i(),new q(O.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(a){throw i(),a}switch(t){case bc.TRANSCODE:n.transcodingConfig=ao({},this.transcodingConfig)}this.uapResponse&&this.uapResponse.vid&&(n.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;let o=this.lastTaskId++;try{let a=new fe((l,c)=>{jn(this.retryTimeout).then(()=>{if(r)return c(r);let u=this.statusError.get(e);return u?(this.statusError.delete(e),c(u)):void 0})}),s=await fe.race([this.connection.request("request",{clientRequest:n},!0,{url:e,command:"PublishStream",workerType:t===bc.TRANSCODE?1:2,requestByUser:!r,tid:o.toString()}),a]);this.isStartingStreamingTask=!1,w.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(s.code)),this.streamingTasks.set(e,{clientRequest:n,mode:t,url:e,taskId:o}),i()}catch(a){if(i(),this.isStartingStreamingTask=!1,!a.data||!a.data.retry||r)throw a;return a.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,a)):await this.startLiveStreamingTask(e,t,a)}}stopLiveStreamingTask(e){return new fe((t,r)=>{let n=this.streamingTasks.get(e);if(!n||!this.connection)return new q(O.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();let i=n.mode;n.abortTask=()=>{w.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:"UnpublishStream",url:n.url}},!1,{url:e,command:"UnPublishStream",workerType:i===bc.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(o=>{w.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(o.code)),this.streamingTasks.delete(e),this.streamingTasks.size===0&&(this.connection&&this.connection.close(),this.connection=void 0),t()}).catch(r)})}resetAllTask(){var e;let t=Array.from(Cc(e=this.streamingTasks).call(e));this.terminate();for(let r of t)this.startLiveStreamingTask(r.url,r.mode).catch(n=>{this.onLiveStreamError&&this.onLiveStreamError(r.url,n)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=to.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new q(O.UNEXPECTED_ERROR,"live streaming connection has already connected");let t=await Yn(this,hk.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new z$e(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(mu.WARNING,(r,n)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(n,r)),this.connection.on(mu.PUBLISH_STREAM_STATUS,r=>this.handlePublishStreamServer(r)),this.connection.on(mu.REQUEST_NEW_ADDRESS,(r,n)=>{if(!this.connection)return n(new q(O.UNEXPECTED_ERROR,"can not get new live streaming address list"));Yn(this,hk.REQUEST_WORKER_MANAGER_LIST,e).then(i=>{this.uapResponse=i,r(i.addressList)}).catch(n)}),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){let t=e.serverStatus&&e.serverStatus.url||"empty_url",r=this.streamingTasks.get(t),n=e.reason;switch(e.code){case Zr.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case Zr.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case Zr.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case Zr.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{let o=new q(O.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(r)return w.error(o.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,o);if(!this.isStartingStreamingTask)return;this.statusError.set(t,o)}case Zr.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{let o=new q(O.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,n);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,o)}case Zr.LIVE_STREAM_RESPONSE_WORKER_LOST:case Zr.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var i;if(!this.connection)return;this.connection.tryNextAddress();let o=Array.from(Cc(i=this.streamingTasks).call(i));for(let a of o)a.abortTask?a.abortTask():(w.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",a.url),this.startLiveStreamingTask(a.url,a.mode,new q(O.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then(()=>{w.debug("[".concat(this.spec.clientId,"] republish live stream success"),a.url)}).catch(s=>{w.error(s.toString()),this.onLiveStreamError&&this.onLiveStreamError(a.url,s)}));return}}}hasUrl(e){return this.streamingTasks.has(e)}},W$e={name:"LiveStreaming",create:function(e){return new G$e(e.joinInfo,e.websocketRetryConfig||Yr,e.httpRetryConfig||Yr)}};function K$e(e){let t=V7();return function(r,n){let i=r.appId;i!==void 0&&(Vt(n,10),bl(n,i));let o=r.cid;o!==void 0&&(Vt(n,16),Vt(n,o));let a=r.cname;a!==void 0&&(Vt(n,26),bl(n,a));let s=r.deviceId;s!==void 0&&(Vt(n,34),bl(n,s));let l=r.elapse;l!==void 0&&(Vt(n,40),iu(n,l));let c=r.fileSize;c!==void 0&&(Vt(n,48),iu(n,Df(c)));let u=r.height;u!==void 0&&(Vt(n,56),iu(n,Df(u)));let h=r.jpg;h!==void 0&&(Vt(n,66),Vt(n,h.length),function(K,k){let P=tg(K,k.length);K.bytes.set(k,P)}(n,h));let f=r.networkType;f!==void 0&&(Vt(n,72),iu(n,Df(f)));let p=r.osType;p!==void 0&&(Vt(n,80),iu(n,Df(p)));let m=r.requestId;m!==void 0&&(Vt(n,90),bl(n,m));let g=r.sdkVersion;g!==void 0&&(Vt(n,98),bl(n,g));let y=r.sequence;y!==void 0&&(Vt(n,104),iu(n,Df(y)));let v=r.sid;v!==void 0&&(Vt(n,114),bl(n,v));let b=r.timestamp;b!==void 0&&(Vt(n,120),iu(n,b));let _=r.uid;_!==void 0&&(Vt(n,128),Vt(n,_));let S=r.vid;S!==void 0&&(Vt(n,136),Vt(n,S));let I=r.width;I!==void 0&&(Vt(n,144),iu(n,Df(I)));let A=r.service;A!==void 0&&(Vt(n,152),Vt(n,A));let D=r.callbackData;D!==void 0&&(Vt(n,162),bl(n,D));let M=r.jpgEncryption;M!==void 0&&(Vt(n,168),Vt(n,M));let H=r.requestType;H!==void 0&&(Vt(n,176),Vt(n,H));let V=r.scorePorn;V!==void 0&&(Vt(n,185),xN(n,V));let G=r.scoreSexy;G!==void 0&&(Vt(n,193),xN(n,G));let Y=r.scoreNeutral;Y!==void 0&&(Vt(n,201),xN(n,Y));let Z=r.scene;Z!==void 0&&(Vt(n,208),Vt(n,Z));let $=r.ossFilePrefix;$!==void 0&&(Vt(n,218),bl(n,$));let F=r.serviceVendor;if(F!==void 0)for(let K of F){Vt(n,226);let k=V7();X$e(K,k),Vt(n,k.limit),eHe(n,k),Z$e(k)}}(e,t),function(r){let n=r.bytes,i=r.limit;return n.length===i?n:n.subarray(0,i)}(t)}function q$e(e){return function(r){let n={};e:for(;!Gre(r);){let i=xl(r);switch(i>>>3){case 0:break e;case 1:n.code=xl(r);break;case 2:n.msg=Wre(r,xl(r));break;case 3:{let o=J$e(r);n.data=Y$e(r),r.limit=o;break}default:Hre(r,7&i)}}return n}({bytes:t=e,offset:0,limit:t.length});var t}function Y$e(e){let t={};e:for(;!Gre(e);){let r=xl(e);switch(r>>>3){case 0:break e;case 1:t.requestId=Wre(e,xl(e));break;case 2:t.requestType=xl(e)>>>0;break;case 3:t.scorePorn=CN(e);break;case 4:t.scoreSexy=CN(e);break;case 5:t.scoreNeutral=CN(e);break;case 6:t.requestScene=xl(e)>>>0;break;case 7:t.scene=xl(e)>>>0;break;default:Hre(e,7&r)}}return t}function X$e(e,t){let r=e.service;r!==void 0&&(Vt(t,8),Vt(t,r));let n=e.vendor;n!==void 0&&(Vt(t,16),Vt(t,n));let i=e.token;i!==void 0&&(Vt(t,26),bl(t,i));let o=e.callbackUrl;o!==void 0&&(Vt(t,34),bl(t,o))}function J$e(e){let t=xl(e),r=e.limit;return e.limit=e.offset+t,r}function Hre(e,t){switch(t){case 0:for(;128&Kre(e););break;case 2:TN(e,xl(e));break;case 5:TN(e,4);break;case 1:TN(e,8);break;default:throw new Error("Unimplemented type: "+t)}}var Q$e=new Float32Array(1);new Uint8Array(Q$e.buffer);var JL=new Float64Array(1),uo=new Uint8Array(JL.buffer);function Df(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var zre=[];function V7(){let e=zre.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function Z$e(e){zre.push(e)}function TN(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function Gre(e){return e.offset>=e.limit}function tg(e,t){let r=e.bytes,n=e.offset,i=e.limit,o=n+t;if(o>r.length){let a=new Uint8Array(2*o);a.set(r),e.bytes=a}return e.offset=o,o>i&&(e.limit=o),n}function QL(e,t){let r=e.offset;if(r+t>e.limit)throw new Error("Read past limit");return e.offset+=t,r}function Wre(e,t){let r=QL(e,t),n=String.fromCharCode,i=e.bytes,o="�",a="";for(let s=0;s<t;s++){let l,c,u,h,f=i[s+r];128&f?(224&f)==192?s+1>=t?a+=o:(l=i[s+r+1],(192&l)!=128?a+=o:(h=(31&f)<<6|63&l,h<128?a+=o:(a+=n(h),s++))):(240&f)==224?s+2>=t?a+=o:(l=i[s+r+1],c=i[s+r+2],(49344&(l|c<<8))!=32896?a+=o:(h=(15&f)<<12|(63&l)<<6|63&c,h<2048||h>=55296&&h<=57343?a+=o:(a+=n(h),s+=2))):(248&f)==240?s+3>=t?a+=o:(l=i[s+r+1],c=i[s+r+2],u=i[s+r+3],(12632256&(l|c<<8|u<<16))!=8421504?a+=o:(h=(7&f)<<18|(63&l)<<12|(63&c)<<6|63&u,h<65536||h>1114111?a+=o:(h-=65536,a+=n(55296+(h>>10),56320+(1023&h)),s+=3))):a+=o:a+=n(f)}return a}function bl(e,t){let r=t.length,n=0;for(let a=0;a<r;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<r&&(s=(s<<10)+t.charCodeAt(++a)-56613888),n+=s<128?1:s<2048?2:s<65536?3:4}Vt(e,n);let i=tg(e,n),o=e.bytes;for(let a=0;a<r;a++){let s=t.charCodeAt(a);s>=55296&&s<=56319&&a+1<r&&(s=(s<<10)+t.charCodeAt(++a)-56613888),s<128?o[i++]=s:(s<2048?o[i++]=s>>6&31|192:(s<65536?o[i++]=s>>12&15|224:(o[i++]=s>>18&7|240,o[i++]=s>>12&63|128),o[i++]=s>>6&63|128),o[i++]=63&s|128)}}function eHe(e,t){let r=tg(e,t.limit),n=e.bytes,i=t.bytes;for(let o=0,a=t.limit;o<a;o++)n[o+r]=i[o]}function Kre(e){return e.bytes[QL(e,1)]}function B7(e,t){let r=tg(e,1);e.bytes[r]=t}function CN(e){let t=QL(e,8),r=e.bytes;return uo[0]=r[t++],uo[1]=r[t++],uo[2]=r[t++],uo[3]=r[t++],uo[4]=r[t++],uo[5]=r[t++],uo[6]=r[t++],uo[7]=r[t++],JL[0]}function xN(e,t){let r=tg(e,8),n=e.bytes;JL[0]=t,n[r++]=uo[0],n[r++]=uo[1],n[r++]=uo[2],n[r++]=uo[3],n[r++]=uo[4],n[r++]=uo[5],n[r++]=uo[6],n[r++]=uo[7]}function xl(e){let t,r=0,n=0;do t=Kre(e),r<32&&(n|=(127&t)<<r),r+=7;while(128&t);return n}function Vt(e,t){for(t>>>=0;t>=128;)B7(e,127&t|128),t>>>=7;B7(e,t)}function iu(e,t){let r=t.low>>>0,n=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=i===0?n===0?r<16384?r<128?1:2:r<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:i<128?9:10,a=tg(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=o!==9?128|i:127&i;case 8:s[a+7]=o!==8?n>>>21|128:n>>>21&127;case 7:s[a+6]=o!==7?n>>>14|128:n>>>14&127;case 6:s[a+5]=o!==6?n>>>7|128:n>>>7&127;case 5:s[a+4]=o!==5?128|n:127&n;case 4:s[a+3]=o!==4?r>>>21|128:r>>>21&127;case 3:s[a+2]=o!==3?r>>>14|128:r>>>14&127;case 2:s[a+1]=o!==2?r>>>7|128:r>>>7&127;case 1:s[a]=o!==1?128|r:127&r}}function $7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}var tHe=new Map([["moderation",1],["supervise",2]]);function H7(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var rHe=class extends _r{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;let t=this._connectionState;this._connectionState=e,this.emit(wn.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=Zs(t=e.map(r=>tHe.get(r)||0)).call(t,(r,n)=>r+n),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(e){super(),R(this,"name","AgoraRTCVideoContentInspect"),R(this,"_connectionState",rs.CONNECTING),R(this,"_innerConnectionState",void 0),R(this,"sequence",0),R(this,"inspectStartTime",void 0),R(this,"workerManagerConnection",void 0),R(this,"workerConnection",void 0),R(this,"workerMessageLengthLimit",void 0),R(this,"inspectIntervalMinimum",void 0),R(this,"qualityRatio",void 0),R(this,"_connectInfo",void 0),R(this,"_cancelTokenSource",to.CancelToken.source()),R(this,"_retryConfig",void 0),R(this,"wmSequence",0),R(this,"inspectInterval",void 0),R(this,"inspectTimer",null),R(this,"ossFilePrefix",void 0),R(this,"extraInfo",void 0),R(this,"_inspectType",void 0),R(this,"_inspectMode",void 0),R(this,"_quality",1),R(this,"qualityTimer",null),R(this,"_inspectId",void 0),R(this,"_needWorkUrlOnly",!1),R(this,"inspectImage",()=>{if(this.connectionState!==rs.CONNECTED)throw new q(O.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===rs.CONNECTED?this.requestToInspectImage():w.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=er(5,"inspect-"),this.workerMessageLengthLimit=L("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=L("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=L("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new Uv("worker-manager-"+this._inspectId,Yr),this.on(wn.STATE_CHANGE,(t,r)=>{this._innerConnectionState=t,w.debug("[".concat(this._inspectId,"] Inspect operation :").concat(Xa[t]," ").concat(r||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new Uv("worker-"+this._inspectId,Yr),this.handleWorkerEvents()}async init(e,t){this.emit(wn.STATE_CHANGE,Xa.CONNECT_AP),this._connectInfo=e;let r=this._cancelTokenSource.token;return this._retryConfig=t,new fe((n,i)=>{this.on(wn.CONNECTION_STATE_CHANGE,(o,a)=>{a===rs.CONNECTED&&n()}),this.requestAP(e,r,t).then(o=>{this.connectWorkerManager(o)}).catch(o=>{i(o)})})}async requestAP(e,t,r){let n=L("WEBCS_DOMAIN").map(a=>"https://".concat(a,"/api/v1")),i=await function(a,s,l,c){let{appId:u,areaCode:h,cname:f,sid:p,token:m,uid:g}=s;Lp++;let y="image_moderation_api",v={service_name:y,json_body:JSON.stringify({appId:u,areaCode:h,cname:f,command:"allocateEdge",requestId:Lp,seq:Lp,sid:p,token:m,ts:Date.now(),uid:g+""})},b,_,S=a[0];return il(async()=>{b=Date.now();let I=await ol(S,{data:v,cancelToken:l,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(_=Date.now()-b,I.code!==0){let H=new q(O.UNEXPECTED_RESPONSE,"image inspect ap error, code"+I.code,{retry:!0,responseTime:_});throw w.error(H.toString()),H}let A=JSON.parse(I.json_body);if(A.code!==200){let H=new q(O.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(A.code,", reason: ").concat(A.reason),{code:A.code,responseTime:_});throw w.error(H.toString()),H}if(!A.servers||!Array.isArray(A.servers)||A.servers.length===0){let H=new q(O.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:A.code,responseTime:_});throw w.error(H.toString()),H}let D=L("VIDEO_INSPECT_WORKER_MANAGER_HOST"),M=L("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:A.servers.map(H=>{let{address:V,wss:G}=H;if(V&&G)return"wss://".concat(V.replace(/\./g,"-"),".").concat(D,":").concat(M||G)}).filter(H=>!!H),workerToken:A.workerToken,vid:A.vid,responseTime:_}},(I,A)=>(Te.apworkerEvent(p,{success:!0,sc:200,serviceName:y,responseDetail:JSON.stringify(I.addressList),firstSuccess:A===0,responseTime:_,serverIp:a[A%a.length]}),!1),(I,A)=>(Te.apworkerEvent(p,{success:!1,sc:I.data&&I.data.code||200,serviceName:y,responseTime:_,serverIp:a[A%a.length]}),!!(I.code!==O.OPERATION_ABORTED&&I.code!==O.UNEXPECTED_RESPONSE||I.data&&I.data.retry)&&(S=a[(A+1)%a.length],!0)),c)}(n,e,t,r);this.emit(wn.STATE_CHANGE,Xa.AP_CONNECTED);let{addressList:o}=i;return this.wmSequence++,o}async connectWorkerManager(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=t,this.emit(wn.STATE_CHANGE,Xa.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(Ke.CONNECTED,async()=>{this.emit(wn.STATE_CHANGE,Xa.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.22.0",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on(Ke.CLOSED,()=>{this._innerConnectionState<Xa.GET_WORKER_MANAGER_RESPONSE&&w.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on(Ke.FAILED,()=>{this._innerConnectionState<Xa.GET_WORKER_MANAGER_RESPONSE&&w.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on(Ke.RECONNECTING,()=>{this._innerConnectionState<Xa.GET_WORKER_MANAGER_RESPONSE&&w.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on(Ke.ON_MESSAGE,async e=>{this.emit(wn.STATE_CHANGE,Xa.GET_WORKER_MANAGER_RESPONSE);let t=this.workerManagerConnection.url;this.workerManagerConnection.close();let r=JSON.parse(e.data);if(r.code!==200)throw w.error("[".concat(this._inspectId,"] Unexpected code ").concat(r.code," from worker manager")),new q(O.UNEXPECTED_RESPONSE,"response code of worker is unexpected",r);if(!(r.serverResponse&&r.serverResponse.portWss&&t))throw w.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(r))),new q(O.UNEXPECTED_RESPONSE,"response content of worker is unexpected",r);{let n=L("VIDEO_INSPECT_WORKER_PORT")||r.serverResponse.portWss,i=t.replace(/:\d+\/?$/,":".concat(n));this.emit(wn.STATE_CHANGE,Xa.CONNECT_WORKER,i),this._needWorkUrlOnly?this.emit(wn.REQUEST_NEW_WORKER_URL,i):await this.connectWorker(i)}}),this.workerManagerConnection.on(Ke.WILL_RECONNECT,(e,t,r)=>{r(e)}),this.workerManagerConnection.on(Ke.REQUEST_NEW_URLS,(e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)})}handleWorkerEvents(){this.workerConnection.on(Ke.CONNECTED,async()=>{this.emit(wn.STATE_CHANGE,Xa.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=rs.CONNECTED}),this.workerConnection.on(Ke.ON_MESSAGE,async e=>{if(e.data instanceof ArrayBuffer){let r=q$e(new Uint8Array(e.data));if(L("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&w.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(r)),r.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(wn.INSPECT_RESULT,void 0,void 0);if(r.data&&r.data.scorePorn&&r.data.scoreSexy&&r.data.scoreNeutral){var t;let n={porn:r.data.scorePorn,sexy:r.data.scoreSexy,neutral:r.data.scoreNeutral},i=Zs(t=Object.keys(n)).call(t,(a,s)=>n[a]>n[s]?a:s,"porn"),o=Object.keys(n).find(a=>a===i);this.emit(wn.INSPECT_RESULT,o)}else this.emit(wn.INSPECT_RESULT,void 0,new q(O.UNEXPECTED_RESPONSE,r.code+"","There is an unexpected data on message"))}else this.emit(wn.INSPECT_RESULT,void 0,new q(O.UNEXPECTED_RESPONSE,r.code+"",r.msg))}else w.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(wn.INSPECT_RESULT,void 0,new q(O.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on(Ke.CLOSED,()=>{this.connectionState=rs.CLOSED}),this.workerConnection.on(Ke.FAILED,()=>{this.connectionState=rs.CLOSED}),this.workerConnection.on(Ke.RECONNECTING,()=>{this.connectionState=this.connectionState===rs.CONNECTED?rs.RECONNECTING:rs.CONNECTING}),this.workerConnection.on(Ke.WILL_RECONNECT,(e,t,r)=>{e==="recover"&&r(e),r("tryNext")}),this.workerConnection.on(Ke.REQUEST_NEW_URLS,(e,t)=>{this.workerManagerConnection.close(),this.once(wn.REQUEST_NEW_WORKER_URL,r=>{e([r])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(r=>{this.connectWorkerManager(r,!0)}).catch(r=>{t(r)})})}async requestToInspectImage(){this.sequence++;let e=xa(this,wn.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(wn.INSPECT_RESULT,void 0,new q(O.INVALID_OPERATION,"Only the track being played can be inspected"));let r=await this.generateRequestData(e,t);this.workerConnection.sendMessage(r,!0,!0)}else this.emit(wn.INSPECT_RESULT,void 0,new q(O.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:r,cname:n,cid:i,vid:o,sid:a,uid:s}=t,l=Date.now(),c=await e.getCurrentFrameImage("image/jpeg",this.quality),u=await Nte(c,r,n),h=this.sequence+"-"+i+"-"+s+"-"+l+"-"+er(12,""),f={appId:r,cid:i,cname:n,deviceId:"",elapse:H7(Number(l-this.inspectStartTime)),fileSize:u.byteLength,jpgEncryption:2,height:c.height,width:c.width,jpg:u,networkType:6,osType:7,requestId:h,sdkVersion:"4.22.0",sequence:this.sequence,sid:a,timestamp:H7(l),uid:s,vid:o,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete f.callbackData,this.ossFilePrefix===void 0&&delete f.ossFilePrefix;let p=K$e(f);if(p.byteLength<this.workerMessageLengthLimit){if(L("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){let m=function(g){for(var y=1;y<arguments.length;y++){var v=arguments[y]!=null?arguments[y]:{};y%2?$7(Object(v),!0).forEach(function(b){R(g,b,v[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(v)):$7(Object(v)).forEach(function(b){Object.defineProperty(g,b,Object.getOwnPropertyDescriptor(v,b))})}return g}({},f);delete m.jpg,w.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(m))}return p}{let m=this.quality*this.qualityRatio;return this.quality=m,await this.generateRequestData(e,{appId:r,cname:n,cid:i,vid:o,sid:a,uid:s})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=to.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=rs.CLOSED,this.emit(wn.STATE_CHANGE,Xa.CLOSED)}},nHe={name:"ContentInspect",create:function(e){let{config:t}=e;return function(r){if(!r)throw new q(O.INVALID_PARAMS,"inspectConfig is necessary.");if(!r.inspectType||!Array.isArray(r.inspectType))throw new q(O.INVALID_PARAMS,"inspectConfig.inspectType is necessary and is an instance of Array.");{let n=[...new Set(r.inspectType)];n.forEach(i=>{var o;if(!ge(o=["supervise","moderation"]).call(o,i))throw new q(O.INVALID_PARAMS,"".concat(i," is not a valid inspect type."))}),r.inspectType=n}if(r&&r.extraInfo&&r.extraInfo.length>1024)throw new q(O.INVALID_PARAMS,"inspectConfig.extraInfo length cannot exceed 1024 bytes")}(t),new rHe(t)}};Gt("PROCESS_ID","process-".concat(er(8,""),"-").concat(er(4,""),"-").concat(er(4,""),"-").concat(er(4,""),"-").concat(er(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(t){return void w.error("Error loading sdk config",t.message)}if(e)try{let t=JSON.parse(window.atob(e)),r=Date.now();w.debug("Loading global parameters from cache",t),Object.keys(t).forEach(n=>{if(Object.prototype.hasOwnProperty.call(Mr,n)){let{value:i,expires:o}=t[n];if(o&&o<=r)return;Cu[n]=i,Mr[n]=i}})}catch(t){w.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(Cu.AREAS)&&Cu.AREAS.length>0&&$L(Cu.AREAS,!0);var z7=(e,t,r)=>{w.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),Gt(e,t,r)};Bg(H$e,!1),Bg(W$e,!1),Bg(R8e,!1),Bg(nHe,!1),Bg(V$e,!1);var Tr=function(e){let t=new _r,r=e,n={getListeners:t.getListeners.bind(t),on:(i,o)=>(function(a,s){a===Tl.SECURITY_POLICY_VIOLATION&&Ere(s,!0)}(i,o),t.on.bind(t)(i,o)),addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return y7(y7({},r),n)}({__TRACK_LIST__:Uf,VERSION:Ra,BUILD:IL,ESM_BUNDLER:!1,ESM:!0,UMD:!1,DEV:!1,setParameter:z7,getParameter:L,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection,r=await async function(n){let i;return Ct().supportUnifiedPlan?(n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"}),i=(await n.createOffer()).sdp):i=(await n.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,i}(t);if(!r)return e;t.close(),t=null,e=function(n){let i={video:[],audio:[]};return n.match(/ VP8/i)&&i.video.push("VP8"),n.match(/ VP9/i)&&i.video.push("VP9"),n.match(/ AV1/i)&&i.video.push("AV1"),n.match(/ H264/i)&&i.video.push("H264"),n.match(/ H265/i)&&i.video.push("H265"),n.match(/ opus/i)&&i.audio.push("OPUS"),n.match(/ PCMU/i)&&i.audio.push("PCMU"),n.match(/ PCMA/i)&&i.audio.push("PCMA"),n.match(/ G722/i)&&i.audio.push("G722"),i}(r)}catch(t){throw new q(O.CREATE_OFFER_FAILED,t.toString&&t.toString()).print()}return e},checkSystemRequirements:function(){let e=Te.reportApiInvoke(null,{name:en.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:xr.TRACER}),t=!1;try{let o=window.RTCPeerConnection,a=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,s=window.WebSocket;t=!!(o&&a&&s),t&&SL()&&Dee(75)&&new o().close()}catch(o){return w.error("check system requirement failed: ",o),!1}let r=!1,n=St();n.name===Mt.CHROME&&Number(n.version)>=58&&(Hs.engine.name!=="WebKit"||function(){let o=St();if(oS()){if(o.os===yn.MAC_OS)return!0;if(o.os===yn.IOS){let a=Hs.os.version&&Hs.os.version.split(".");if(a&&Number(a[0])===14&&a[1]&&Number(a[1])>=3||a&&Number(a[0])>14)return!0}}return!1}())&&(r=!0),(n.name===Mt.FIREFOX&&Number(n.version)>=56||n.name===Mt.OPERA&&Number(n.version)>=45||n.name===Mt.SAFARI&&Number(n.version)>=11||n.name==="WebKit"&&(Vi()||ys())&&n.osVersion&&Number(n.osVersion.split(".")[0])>=11||Uee()||St().name===Mt.QQ)&&(r=!0),w.debug("checkSystemRequirements, api:",t,"browser",r);let i=t&&r;return e.onSuccess(i),i},getDevices:function(e){return Yo.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return Yo.getRecordingDevices(e)},getCameras:function(e){return Yo.getCamerasDevices(e)},getElectronScreenSources:bte,getPlaybackDevices:function(e){return Yo.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"},r=Te.reportApiInvoke(null,{name:en.CREATE_CLIENT,options:[t],tag:xr.TRACER});try{(function(n){sn(n.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),sn(n.mode,"config.mode",["rtc","live","p2p"]),n.audioCodec!==void 0&&sn(n.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),n.proxyServer!==void 0&&kn(n.proxyServer,"config.proxyServer",1,1e4),n.turnServer!==void 0&&Hee(n.turnServer),n.httpRetryConfig!==void 0&&MB(n.httpRetryConfig),n.websocketRetryConfig!==void 0&&MB(n.websocketRetryConfig)})(t)}catch(n){throw r.onError(n),n}return(Mee(16,0)||jee(16,0))&&(t.codec==="vp9"&&(t.codec="vp8",w.debug("browser not support vp9, force use vp8")),Gt("UNSUPPORTED_VIDEO_CODEC",["vp9"])),t.audioCodec===void 0&&(t.audioCodec="opus"),r.onSuccess(),new I8e(Fs(Fs({forceWaitGatewayResponse:!0},t),{},{role:ge(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}))},createCameraVideoTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=L("CAMERA_CAPTURE_CONFIG"),r=Te.reportApiInvoke(null,{tag:xr.TRACER,name:en.CREATE_CAM_VIDEO_TRACK,options:[hr({},e),t]});t&&(e.encoderConfig=t);let n=cS(e),i=er(8,"track-cam-"),o=null;w.info("start create camera video track with config",JSON.stringify(e),"trackId",i);try{o=(await Go({video:n},i)).getVideoTracks()[0]||null}catch(s){throw r.onError(s),s}if(!o){let s=new J(O.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(s),s.throw(w)}e.optimizationMode&&KI(i,o,e,Nl(e.encoderConfig));let a=new _k(o,e,n,e.scalabiltyMode?pE(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i);return r.onSuccess(a.getTrackId()),w.info("create camera video success, trackId:",i),a},createCustomVideoTrack:function(e){let t=Te.reportApiInvoke(null,{tag:xr.TRACER,name:en.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),r=new ir(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?pE(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,er(8,"track-cus-"),[cr.CUSTOM_TRACK]);return t.onSuccess(r.getTrackId()),w.info("create custom video track success with config",e,"trackId",r.getTrackId()),r},createScreenVideoTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable",r=Te.reportApiInvoke(null,{tag:xr.TRACER,name:en.CREATE_SCREEN_VIDEO_TRACK,options:[hr({},e),t]});e.encoderConfig?typeof e.encoderConfig=="string"||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";let n=function(u){let h={};u.screenSourceType&&(h.mediaSource=u.screenSourceType),u.extensionId&&Bu()&&(h.extensionId=u.extensionId);let{displaySurface:f,selfBrowserSurface:p,surfaceSwitching:m,systemAudio:g}=u;(ok(107)||AB(107)||OB(93))&&(f&&(sn(f,"displaySurface",["browser","window","monitor"]),h.displaySurface=f),p?(sn(p,"selfBrowserSurface",["exclude","include"]),h.selfBrowserSurface=p):h.selfBrowserSurface="include",m&&(sn(m,"surfaceSwitching",["exclude","include"]),h.surfaceSwitching=m)),(ok(105)||AB(105)||OB(91))&&g&&(sn(g,"systemAudio",["exclude","include"]),h.systemAudio=g),u.electronScreenSourceId&&(h.sourceId=u.electronScreenSourceId);let y=u.encoderConfig?HI(u.encoderConfig):null;return h.mandatory={chromeMediaSource:"desktop",maxWidth:y?y.width:void 0,maxHeight:y?y.height:void 0},y&&(y.frameRate&&(typeof y.frameRate=="number"?(h.mandatory.maxFrameRate=y.frameRate,h.mandatory.minFrameRate=y.frameRate):(h.mandatory.maxFrameRate=y.frameRate.max||y.frameRate.ideal||y.frameRate.exact||void 0,h.mandatory.minFrameRate=y.frameRate.min||y.frameRate.ideal||y.frameRate.exact||void 0),h.frameRate=y.frameRate),y.width&&(h.width=y.width),y.height&&(h.height=y.height)),h}(e),i=er(8,"track-scr-v-"),o=null,a=null,s=Ct();if(!s.supportShareAudio&&t==="enable"){let u=new J(O.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return r.onError(u),u.throw(w)}w.info("start create screen video track with config",e,"withAudio",t,"trackId",i);try{let u=await Go({screen:n,screenAudio:t==="auto"?s.supportShareAudio:t==="enable"},i);o=u.getVideoTracks()[0]||null,a=u.getAudioTracks()[0]||null}catch(u){throw r.onError(u),u}if(!o){let u=new J(O.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(u),u.throw(w)}if(!a&&t==="enable"){o&&o.stop();let u=new J(O.SHARE_AUDIO_NOT_ALLOWED);return r.onError(u),u.throw(w)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(KI(i,o,e,e.encoderConfig&&HI(e.encoderConfig)||void 0),e.encoderConfig&&typeof e.encoderConfig!="string"&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));let l=new ir(o,e.encoderConfig?HI(e.encoderConfig):{},e.scalabiltyMode?pE(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i,[cr.SCREEN_TRACK]);if(!a)return r.onSuccess(l.getTrackId()),w.info("create screen video track success","video:",l.getTrackId()),l;let c=new Cr(a,void 0,er(8,"track-scr-a-"),!1);return r.onSuccess([l.getTrackId(),c.getTrackId()]),w.info("create screen video track success","video:",l.getTrackId(),"audio:",c.getTrackId()),[l,c]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=L("CAMERA_CAPTURE_CONFIG"),n=Te.reportApiInvoke(null,{tag:xr.TRACER,name:en.CREATE_MIC_AND_CAM_TRACKS,options:[e,t,r]});r&&(t.encoderConfig=r);let i=cS(t),o=j6(e),a=er(8,"track-mic-"),s=er(8,"track-cam-"),l=null,c=null;w.info("start create camera video track(".concat(s,") and microphone audio track(").concat(a,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{let f=await Go({audio:o,video:i},"".concat(a,"-").concat(s));l=f.getAudioTracks()[0],c=f.getVideoTracks()[0]}catch(f){throw n.onError(f),f}if(!l||!c){let f=new J(O.UNEXPECTED_ERROR,"can not find tracks in media stream");return n.onError(f),f.throw(w)}t.optimizationMode&&KI(s,c,t,Nl(t.encoderConfig));let u=new uS(l,e,o,a),h=new _k(c,t,i,t.scalabiltyMode?pE(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,s);return n.onSuccess([u.getTrackId(),h.getTrackId()]),w.info("create camera video track(".concat(s,") and microphone audio track(").concat(a,") success")),[u,h]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Te.reportApiInvoke(null,{tag:xr.TRACER,name:en.CREATE_MIC_AUDIO_TRACK,options:[e]}),r=j6(e),n=er(8,"track-mic-"),i=null;w.info("start create microphone audio track with config",JSON.stringify(e),"trackId",n);try{i=(await Go({audio:r},n)).getAudioTracks()[0]||null}catch(a){throw t.onError(a),a}if(!i){let a=new J(O.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(a),a.throw(w)}let o=new uS(i,e,r,n);return t.onSuccess(o.getTrackId()),w.info("create microphone audio track success, trackId:",n),o},createCustomAudioTrack:function(e){let t=Te.reportApiInvoke(null,{tag:xr.TRACER,name:en.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),r=new Cr(e.mediaStreamTrack,e.encoderConfig?lS(e.encoderConfig):{},er(8,"track-cus-"),!1);return w.info("create custom audio track success with config",e,"trackId",r.getTrackId()),t.onSuccess(r.getTrackId()),r},createBufferSourceAudioTrack:async function(e){var t;let{cacheOnlineFile:r,encoderConfig:n}=e,{source:i}=e,o={source:i instanceof AudioBuffer?"AudioBuffer":i instanceof File?(t=File.name)!==null&&t!==void 0?t:"File":i,cacheOnlineFile:r,encoderConfig:n},a=Te.reportApiInvoke(null,{tag:xr.TRACER,name:en.CREATE_BUFFER_AUDIO_TRACK,options:[o]});if(L("DISABLE_WEBAUDIO"))throw new J(O.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");let s=er(8,"track-buf-");w.info("start create buffer source audio track with config",JSON.stringify(o),"trackId",s);let l=i;if(!(i instanceof AudioBuffer))try{i=await async function(h,f){let p=null;if(typeof h=="string"){let g=_8.get(h);if(g)return w.debug("use cached audio resource: ",h),g;try{p=(await il(()=>to.get(h,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(y){throw new J(O.FETCH_AUDIO_FILE_FAILED,y.toString())}}else p=await new fe((g,y)=>{let v=new FileReader;v.onload=b=>{b.target?g(b.target.result):y(new J(O.READ_LOCAL_AUDIO_FILE_ERROR))},v.onerror=()=>{y(new J(O.READ_LOCAL_AUDIO_FILE_ERROR))},v.readAsArrayBuffer(h)});let m=await function(g){let y=Jm();return new fe((v,b)=>{y.decodeAudioData(g,_=>{v(_)},_=>{b(new J(O.DECODE_AUDIO_FILE_FAILED,_.toString()))})})}(p);return typeof h=="string"&&f&&_8.set(h,m),m}(i,r)}catch(h){return a.onError(h),h.throw(w)}let c=new T6e(i),u=new S6e(l,c,n?lS(n):{},s);return w.info("create buffer source audio track success, trackId:",s),a.onSuccess(u.getTrackId()),u},setAppType:function(e){if(w.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw w.debug("Invalid appType"),new q(O.INVALID_PARAMS,"invalid app type",e);Gt("APP_TYPE",Math.floor(e))},setLogLevel:function(e){w.setLogLevel(e)},enableLogUpload:function(){L("USE_NEW_LOG")?Gt("UPLOAD_LOG",!0):w.enableLogUpload()},disableLogUpload:function(){L("USE_NEW_LOG")?Gt("UPLOAD_LOG",!1):w.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new ire},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,r=Te.reportApiInvoke(null,{tag:xr.TRACER,name:en.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof Cr||e instanceof Dp)){let l=new q(O.INVALID_TRACK,"the parameter is not a audio track");return r.onError(l),l.throw()}t&&t<1e3&&(t=1e3);let n=e instanceof Cr?e.getTrackLabel():"remote_track",i=e.getVolumeLevel(),o=i,a=i,s=Date.now();return new fe(l=>{let c=setInterval(()=>{let u=e.getVolumeLevel();o=u>o?u:o,a=u<a?u:a;let h=o-a>1e-4,f=Date.now()-s;if(h||f>t){clearInterval(c);let p=h,m={duration:f,deviceLabel:n,maxVolumeLevel:o,result:p};w.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(m))),r.onSuccess(m),l(p)}},200)})},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,r=Te.reportApiInvoke(null,{tag:xr.TRACER,name:en.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof ir||e instanceof Pp)){let h=new q(O.INVALID_TRACK,"the parameter is not a video track");return r.onError(h),h.throw()}t&&t<1e3&&(t=1e3);let n=e instanceof ir?e.getTrackLabel():"remote_track",i=e.getMediaStreamTrack(!0),o=document.createElement("video");o.style.width="1px",o.style.height="1px",o.setAttribute("muted",""),o.muted=!0,o.setAttribute("playsinline",""),o.controls=!1,(qn()||oS())&&(o.style.opacity="0.01",o.style.position="fixed",o.style.left="0",o.style.top="0",document.body.appendChild(o)),o.srcObject=new MediaStream([i]),o.play();let a=document.createElement("canvas");a.width=160,a.height=120;let s=0,l=0;try{let h=Date.now();s=await function(f,p,m,g){let y,v=0,b=null;return new fe((_,S)=>{function I(){v>g&&y&&(y(),_(v));let A=m.getContext("2d");if(!A){let H=new q(O.UNEXPECTED_ERROR,"can not get canvas 2d context.");return w.error(H.toString()),void S(H)}A.drawImage(f,0,0,160,120);let D=A.getImageData(0,0,m.width,m.height),M=Math.floor(D.data.length/3);if(b){for(let H=0;H<M;H+=3)if(D.data[H]!==b[H])return v+=1,void(b=D.data);b=D.data}else b=D.data}setTimeout(()=>{y&&(y(),_(v))},p),y=ML(()=>{I()},30)})}(o,t,a,4),l=Date.now()-h}catch(h){throw r.onError(h),h}h8e===Mt.SAFARI&&(o.pause(),o.remove()),o.srcObject=null;let c=s>4,u={duration:l,changedPicNum:s,deviceLabel:n,result:c};return w.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(u))),r.onSuccess(u),c},setArea:$L,audioElementPlayCenter:Ji,resumeAudioContext:function(){Ji.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){A8e.processExternalMediaAEC(e)},registerExtensions:function(e){let t=L("PLUGIN_INFO")||[];e.forEach(r=>{"name"in r&&!ge(t).call(t,r.name)&&t.push(r.name);let n=r;n.__registered__=!0,n.logger.hookLog=w.extLog,n.reporter.hookApiInvoke=Te.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach(i=>{n.parameters[i]=L(i)})}),z7("PLUGIN_INFO",t)},ChannelMediaRelayError:jf,ChannelMediaRelayEvent:ic,ChannelMediaRelayState:so,RemoteStreamFallbackType:g6e,RemoteStreamType:m6e,ConnectionDisconnectedReason:Bt,AudienceLatencyLevelType:YFe,AREAS:It,preload:async function(e,t,r,n){return ure(e,t,r,n)}});Object.defineProperties(Tr,{onAudioAutoplayFailed:{get:()=>Vo.onAudioAutoplayFailed,set:e=>{Vo.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>Vo.onAutoplayFailed,set:e=>{Vo.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>Tr._onSecurityPolicyViolation,set(e){Tr._onSecurityPolicyViolation=e,Ere(e)}},__CLIENT_LIST__:{get:()=>L("SHOW_GLOBAL_CLIENT_LIST")?pu:[]}}),Yo.on(Jd.CAMERA_DEVICE_CHANGED,e=>{w.info("camera device changed",JSON.stringify(e)),Tr.onCameraChanged&&Tr.onCameraChanged(e),Tr.safeEmit(Tl.CAMERA_CHANGED,e)}),Yo.on(Jd.RECORDING_DEVICE_CHANGED,e=>{w.info("microphone device changed",JSON.stringify(e)),Tr.onMicrophoneChanged&&Tr.onMicrophoneChanged(e),Tr.safeEmit(Tl.MICROPHONE_CHANGED,e)}),Yo.on(Jd.PLAYOUT_DEVICE_CHANGED,e=>{w.debug("playout device changed",JSON.stringify(e)),Tr.onPlaybackDeviceChanged&&Tr.onPlaybackDeviceChanged(e),Tr.safeEmit(Tl.PLAYBACK_DEVICE_CHANGED,e)}),Ji.onAutoplayFailed=()=>{w.info("detect audio element autoplay failed"),Vo.onAudioAutoplayFailed&&Vo.onAudioAutoplayFailed()},Ht.on("autoplay-failed",()=>{w.info("detect webaudio autoplay failed"),Vo.onAudioAutoplayFailed&&Vo.onAudioAutoplayFailed(),Tr.safeEmit(Tl.AUTOPLAY_FAILED)}),Ht.on(Dn.STATE_CHANGE,(e,t)=>{w.info("audio context state changed: ".concat(t," => ").concat(e)),Tr.onAudioContextStateChanged&&Tr.onAudioContextStateChanged(e,t),Tr.safeEmit(Tl.AUDIO_CONTEXT_STATE_CHANGED,e,t)}),Hr.on(cp.NETWORK_STATE_CHANGE,(e,t)=>{w.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))}),window&&(window.__ARTC__=Tr);function th(e,t,r){return e.on(t,r),()=>e.off(t,r)}function iHe(e){try{return e()}catch(t){console.error(t)}}function EC(e){return()=>e.forEach(iHe)}function oHe(e,t){let r=setTimeout(e,t);return()=>clearTimeout(r)}function ZL(){let e,t,r;function n(){if(t){let c=t;t=void 0,c()}}async function i(){if(r){let c=r;r=void 0;try{await c()}catch(u){console.error(u)}}}async function o(c){e=!0,await i();try{r=await c()}catch(u){console.error(u)}e=!1,n()}async function a(){e=!0,await i(),e=!1,n()}function s(c){e?t=()=>o(c):o(c)}function l(){e?t=a:a()}return{run:s,dispose:l}}var qre=typeof document<"u"?T.useLayoutEffect:T.useEffect;function aHe(e){return e!=null&&typeof e.then=="function"}function G0(){let e=T.useRef(!1);return T.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e}function sHe(){let e=G0();function t(r,n){return new Promise(async(i,o)=>{try{let a=await r;e.current||i(a)}catch(a){e.current?n&&n(a):o(a)}})}return T.useCallback(t,[e])}function Yre(e){let t=sHe(),[r,n]=T.useState();return qre(()=>{aHe(e)?t(e).then(n):n(e)},[e,t]),r}function _C(e,t){let r=T.useRef();T.useEffect(()=>{let{run:n,dispose:i}=r.current||(r.current=ZL());return n(e),i},t)}function lHe(e,t){let r=e.split("."),n=t.split("."),i=Math.max(r.length,n.length);for(let o=0;o<i;o++){let a=parseInt(r[o]||"0"),s=parseInt(n[o]||"0");if(a>s)return 1;if(a<s)return-1}return 0}var Xre=T.createContext(null);function cHe({client:e,children:t}){return d.jsx(Xre.Provider,{value:e,children:t})}function uHe(e){return T.useContext(Xre)}function W0(e){let t=uHe();if(!t)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return t}T.createContext(null);function rg(e){let t=W0(),[r,n]=T.useState(t?t.connectionState==="CONNECTED":!1);return T.useEffect(()=>{if(t){n(t.connectionState==="CONNECTED");let i;return EC([th(t,"connection-state-change",o=>{i==null||i(),i=oHe(()=>n(o==="CONNECTED"),0)}),()=>i==null?void 0:i()])}else n(!1)},[t]),r}var Ph=class extends Error{constructor(t,r){var e=(...qGe)=>(super(...qGe),dg(this,"rtcMethod"),dg(this,"rtcError"),dg(this,"name","AgoraRTCReactException"),this);e(typeof r=="string"?r:r.message),this.rtcMethod=t,this.rtcError=r}log(t){console[t](this)}};function dHe(e,t=!0,r){let n=W0(),i=rg(),o=T.useRef(),[a,s]=T.useState(!1),[l,c]=T.useState(0),[u,h]=T.useState(null),f=G0();return _C(async()=>{if(f.current||(h(null),c(0),s(!1)),t&&n){try{f.current||s(!0);let{appid:m,channel:g,token:y,uid:v}=typeof e=="function"?await e():e,b=await n.join(m,g,y,v);f.current||c(b)}catch(m){console.error(m),f.current||h(new Ph("IAgoraRTCClient.join",m))}f.current||s(!1);let p=o.current||(o.current=ZL());return EC([()=>{p.dispose()},()=>{p.run(()=>n.unpublish(n.localTracks))},()=>{for(let m of n.localTracks)m.isPlaying&&m.stop(),m.close();p.run(()=>n.leave())}])}},[t,r]),{data:l,isLoading:a,isConnected:i,error:u}}function hHe(e,t=!0,r){let n=W0(),i=rg(),o=T.useRef([]),[a,s]=T.useState(!1),[l,c]=T.useState(null),u=G0();return _C(async()=>{if(u.current||(s(!1),c(null)),!n||!i||!t)return;let h=e.filter(Boolean),f=g=>{let y=lHe(Tr.VERSION,"4.18.2")>=0;return y||new Ph("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),y?n.mode!=="live"||n.role!=="audience":!0},p=g=>o.current.some(y=>y&&y.getTrackId()===g.getTrackId()),m=g=>f()&&g.enabled&&t&&!p(g);for(let g=0;g<h.length;g++){let y=h[g];if(y&&m(y)){await n.unpublish(o.current.filter(v=>(v==null?void 0:v.trackMediaType)===y.trackMediaType));try{u.current||s(!0),await n.publish(y)}catch(v){console.error(v),u.current||c(new Ph("IAgoraRTCClient.publish",v))}u.current||s(!1)}}o.current=h},[i,t,n,e]),{isLoading:a,error:l}}function fHe(e=!0,t={ANS:!0,AEC:!0},r){let n=rg(),[i,o]=T.useState(null),[a,s]=T.useState(!1),[l,c]=T.useState(null),u=G0();return _C(async()=>{if(u.current||(s(!1),c(null)),n&&e&&!i){try{u.current||s(!0);let h=await Tr.createMicrophoneAudioTrack(t);u.current||o(h)}catch(h){console.error(h),u.current||c(new Ph("IAgoraRTC.createMicrophoneAudioTrack",h))}u.current||s(!1)}!n&&!u.current&&o(null)},[n,e]),{localMicrophoneTrack:i,isLoading:a,error:l}}function pHe(e=!0,t,r){let n=rg(),[i,o]=T.useState(null),[a,s]=T.useState(!1),[l,c]=T.useState(null),u=G0();return _C(async()=>{if(u.current||(s(!1),c(null)),n&&e&&!i){try{u.current||s(!0);let h=await Tr.createCameraVideoTrack(t);u.current||o(h)}catch(h){console.error(h),u.current||c(new Ph("IAgoraRTC.createCameraVideoTrack",h))}u.current||s(!1)}!n&&!u.current&&o(null)},[n,e]),{localCameraTrack:i,isLoading:a,error:l}}function G7(e,t,r){let n=W0(),i=t==="audio"?"audioTrack":"videoTrack",[o,a]=T.useState(e&&e[i]),s=rg(),l=T.useRef(),[c,u]=T.useState(!1),[h,f]=T.useState(null);return T.useEffect(()=>{if(!e||!s)return;let p=!1;p||f(null);let m=t==="audio"?"hasAudio":"hasVideo",g=e.uid,y=async(_,S)=>{if(_[i]&&n.remoteUsers.some(({uid:I})=>_.uid===I))try{p||u(!0),await n.unsubscribe(_,S)}catch(I){p||f(new Ph("IAgoraRTCClient.unsubscribe",I)),console.error(I)}p||(a(void 0),u(!1))},v=async(_,S)=>{try{!_[i]&&n.remoteUsers.some(({uid:I})=>_.uid===I)&&(p||u(!0),await n.subscribe(_,S)),p||a(_[i])}catch(I){p||f(new Ph("IAgoraRTCClient.subscribe",I)),console.error(I)}p||u(!1)},b=l.current||(l.current=ZL());return!e[i]&&e[m]?b.run(()=>v(e,t)):a(e[i]),EC([()=>{p=!0,b.dispose()},th(n,"user-published",(_,S)=>{_.uid===g&&S===t&&b.run(()=>v(_,t))}),th(n,"user-unpublished",(_,S)=>{_.uid===g&&S===t&&b.run(()=>y(_,t))})])},[s,n,e,t,i]),{track:o,isLoading:c,error:h}}function mHe(e){let t=W0(),[r,n]=T.useState(t?t.remoteUsers:[]);return T.useEffect(()=>{if(t){let i=()=>n(t.remoteUsers.slice());return EC([th(t,"user-joined",i),th(t,"user-left",i),th(t,"user-published",i),th(t,"user-unpublished",i)])}},[t]),r}var Jre=T.createContext(void 0);function Qre(e,t,r,n){let i=T.useContext(Jre);T.useEffect(()=>{if(e)return n&&t?e.play(n,r||void 0):e.stop(),i?(i.onMount(e),()=>i.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,n,t,i,r])}function Zre(e,t){let r=T.useContext(Jre);qre(()=>{if(e)return t?e.play():e.stop(),r?(r.onMount(e),()=>r.onUnmount(e)):()=>{e.isPlaying&&e.stop()}},[e,t,r])}function gHe({track:e,play:t=!1,volume:r,disabled:n,muted:i,children:o}){let a=Yre(e);return Zre(a,t),T.useEffect(()=>{a&&r!=null&&a.setVolume(r)},[a,r]),T.useEffect(()=>{a&&n!=null&&a.setEnabled(!n).catch(console.warn)},[n,a]),T.useEffect(()=>{a&&i!=null&&a.setMuted(i).catch(console.warn)},[i,a]),o?d.jsx(d.Fragment,{children:o}):null}var ene={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},tne={width:"100%",height:"100%"},eM={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},wC=(e,t)=>T.useMemo(()=>({...e,...t}),[e,t]);function yHe({track:e,play:t,disabled:r,muted:n,style:i,videoPlayerConfig:o,...a}){let s=wC(tne,i),[l,c]=T.useState(null),u=Yre(e);return Qre(u,t,o,l),T.useEffect(()=>{u&&r!=null&&u.setEnabled(!r).catch(console.warn)},[r,u]),T.useEffect(()=>{u&&n!=null&&u.setMuted(n).catch(console.warn)},[n,u]),d.jsx("div",{...a,ref:c,style:s})}var vHe={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},bHe={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function rne({cover:e}){return d.jsx("div",{style:eM,children:typeof e=="string"?d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{...vHe,backgroundImage:`url(${e})`}}),d.jsx("img",{src:e,style:bHe})]}):e()})}function EHe({micOn:e,cameraOn:t,audioTrack:r,videoTrack:n,playAudio:i,playVideo:o,volume:a,cover:s,children:l,style:c,...u}){let h=wC(ene,c);return o=o??!!t,i=i??!!e,d.jsxs("div",{...u,style:h,children:[d.jsx(yHe,{disabled:!t,play:o,track:n}),d.jsx(gHe,{disabled:!e,play:i,track:r,volume:a}),s&&!t&&d.jsx(rne,{cover:s}),d.jsx("div",{style:eM,children:l})]})}function _He({track:e,play:t=!1,playbackDeviceId:r,volume:n,children:i}){return Zre(e,t),T.useEffect(()=>{e&&r!=null&&e.setPlaybackDevice(r).catch(console.warn)},[e,r]),T.useEffect(()=>{e&&n!=null&&e.setVolume(n)},[e,n]),i?d.jsx(d.Fragment,{children:i}):null}function wHe({track:e,play:t,style:r,videoPlayerConfig:n,...i}){let o=wC(tne,r),[a,s]=T.useState(null);return Qre(e,t,n,a),d.jsx("div",{...i,ref:s,style:o})}function SHe({user:e,playVideo:t,playAudio:r,playbackDeviceId:n,volume:i,cover:o,style:a,children:s,videoPlayerConfig:l,...c}){let u=wC(ene,a),{track:h}=G7(e,"video"),{track:f}=G7(e,"audio");return t=t??(e==null?void 0:e.hasVideo),r=r??(e==null?void 0:e.hasAudio),d.jsxs("div",{...c,style:u,children:[d.jsx(wHe,{play:t,track:h,videoPlayerConfig:l}),d.jsx(_He,{play:r,playbackDeviceId:n,track:f,volume:i}),o&&!t&&d.jsx(rne,{cover:o}),d.jsx("div",{style:eM,children:s})]})}var THe=class{constructor(){dg(this,"appType",1001);Tr.setAppType(this.appType)}};new THe;var CHe=Tr;const jk=CHe.createClient({mode:"rtc",codec:"vp8"});function xHe(){const e=new URLSearchParams(location.search),t=e.get("doctorId"),r=e.get("patientId");return d.jsxs("div",{className:"w-screen h-screen flex flex-col gap-2",children:[d.jsx("h1",{className:"w-full h-auto bg-blue-500 p-2 text-lg font-medium flex justify-center shadow-lg",children:"Consultation"}),d.jsx("div",{className:"flex flex-1 w-full p-2",children:d.jsx(cHe,{client:jk,children:d.jsx("div",{className:"w-full h-[80vh]",children:d.jsx(RHe,{doctorId:t,patientId:r})})})})]})}function RHe(e){const t="7b2118df626f4986907f6d989f14fa9d",r=rg(),[n,i]=T.useState(!0),[o,a]=T.useState(!0),[s,l]=T.useState(!0),{localMicrophoneTrack:c}=fHe(o),{localCameraTrack:u}=pHe(s),{doctorId:h,patientId:f}=e;dHe({appid:t,channel:`consulation_${h}_${f}`,token:null},n),hHe([c,u]),T.useEffect(()=>{jk.on("user-joined",m=>{console.log("userrr",m)}),jk.on("user-published",(m,g)=>{console.log("user published",m.uid,g)})},[]);const p=mHe();return d.jsx("div",{className:"w-full h-[88vh]  flex ",children:r&&d.jsxs("div",{className:"w-screen h-full flex gap-2 ",children:[d.jsxs("div",{className:"w-[80%] h-auto grid grid-cols-1 ",children:[p.map((m,g)=>d.jsx("div",{className:"w-full h-[80vh] ",children:d.jsx(SHe,{user:m,className:"rounded-lg  "},g)},g)),d.jsx("div",{className:"h-full w-full px-5 py-2 flex flex-col justify-end",children:d.jsx(IHe,{setCameraOn:l,setMicOn:a,cameraOn:s,micOn:o,setCalling:i})})]}),d.jsx("div",{className:"w-[20%] h-full flex flex-col justify-end",children:d.jsx("div",{className:"w-full h-[30vh]",children:d.jsx(EHe,{cameraOn:s,micOn:o,videoTrack:u,audioTrack:c,className:"rounded-lg",children:d.jsx("samp",{className:"pr-2 flex justify-end text-white text-2xl",children:"you"})})})})]})})}function IHe(e){const{setMicOn:t,setCameraOn:r,micOn:n,cameraOn:i,setCalling:o}=e;return d.jsx("div",{className:"w-full h-[10vh] bg-white bg-opacity-20 rounded-lg  flex flex-between gap-2 ",children:d.jsxs("div",{className:"w-full h-full flex justify-center gap-4 p-4",children:[d.jsx("div",{className:`callButton ${n?"bg-red-500":"bg-white"}  w-[10%] h-full flex items-center justify-center`,onClick:a=>t(!n),children:d.jsx(tOe,{})}),d.jsx("button",{className:`callButton ${i?"bg-red-500":"bg-white"}  w-[10%] h-full flex items-center justify-center`,onClick:a=>r(!i),children:d.jsx(FTe,{})}),d.jsx("button",{type:"button",className:"callButton bg-red-500  w-[10%] h-full flex items-center justify-center",onClick:a=>o(s=>!s),children:d.jsx(ZAe,{})})]})})}function NHe(){const{firstName:e}=rn(t=>t.patient);return d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:d.jsxs("div",{className:"doctor details flex flex-col gap-4",children:[d.jsxs("h1",{className:"w-[60%] h-[20vh] flex item-center p-2 rounded-lg bg-red-400 ",children:[`you have a meeting ${e}`,"  "]}),d.jsx("div",{className:"content w-full h-full flex"})]})})})}function AHe(){return d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full flex flex-col p-2",children:d.jsxs("div",{className:"meetingAlert w-full h-full flex flex-col gap-2",children:[d.jsx("h2",{className:"w-[80%] h-[8vh] text-lg font-medium flex items-center pl-10 bg-blue-500",children:"Notifications"}),d.jsx("div",{className:"alerts flex flex-col hap-2",children:d.jsx(NHe,{})})]})})})}ct.extend(ws);function OHe(e){var n,i,o,a,s,l;const{booking:t}=e,r=Er();return console.log("test date",ct().add(2,"hour").isBefore(ct(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))),d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:(n=t==null?void 0:t.patientId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{children:(i=t==null?void 0:t.patientId)==null?void 0:i.firstName})}),d.jsx("div",{className:"location w-full h-auto",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(Bm,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:(a=(o=t==null?void 0:t.patientId)==null?void 0:o.addressId)==null?void 0:a.place}),d.jsx("span",{className:"flex items-center",children:(l=(s=t==null?void 0:t.patientId)==null?void 0:s.addressId)==null?void 0:l.district})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[d.jsx(R0,{}),d.jsx("span",{children:`Completed On ${t==null?void 0:t.slotDate} ${ct(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),d.jsxs("div",{className:"w-full h-auto flex flex-between gap-4",children:[d.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:c=>r(`/doctor/bookings/prescription/${t.patientId.userId}/${t._id}`),children:"Add Prescription"}),d.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",onClick:c=>r(`/doctor/bookings/labtest/${t.patientId.userId}/${t._id}`),children:"Request Lab Tests"}),d.jsx("button",{className:"cancel w-full h-auto p-2 bg-orange-500 font-medium flex items-center justify-center",onClick:c=>r(`/doctor/bookings/medicine/${t.patientId._id}/${t._id}`),children:"Request Medicines"})]})]})]})})}function kHe(){const[e,t]=T.useState([]),r=async()=>{const n=await tke();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-4 p-5",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[90%] h-[25vh]",children:d.jsx(OHe,{booking:n})},i))})})}const tM="https://hcompanion.onrender.com/api",rM=sessionStorage.getItem("token"),PHe=async({patientId:e})=>{var t,r,n;try{return(await ve.post(`${tM}/doctor/patient/getDetails`,{patientId:e},{headers:{authorization:`bearer ${rM}`}})).data.patientDetails}catch(i){return console.log(i),((t=i==null?void 0:i.response)==null?void 0:t.status)=="500"&&((n=(r=i==null?void 0:i.response)==null?void 0:r.data)!=null&&n.errorServer)&&te.fire("Server Error","","error"),!1}},DHe=async({patientId:e,disease:t,prescription:r,bookingId:n})=>{var i,o,a;try{const s=await ve.post(`${tM}/doctor/patient/prescription/add`,{patientId:e,disease:t,prescription:r,bookingId:n},{headers:{authorization:`bearer ${rM}`}});return!0}catch(s){return console.log(s),((i=s==null?void 0:s.response)==null?void 0:i.status)=="500"&&((a=(o=s==null?void 0:s.response)==null?void 0:o.data)!=null&&a.errorServer)&&te.fire("Server Error","","error"),!1}},LHe=async({bookingId:e})=>{var t,r,n;try{const i=await ve.post(`${tM}/doctor/patient/prescription/onLoad/view`,{bookingId:e},{headers:{authorization:`bearer ${rM}`}});return console.log(i),i.data.prescription}catch(i){return console.log(i),((t=i==null?void 0:i.response)==null?void 0:t.status)=="500"&&((n=(r=i==null?void 0:i.response)==null?void 0:r.data)!=null&&n.errorServer)&&te.fire("Server Error","","error"),!1}};function MHe(){const[e,t]=T.useState(void 0),[r,n]=T.useState(void 0),{patientId:i,bookingId:o}=_m(),a=Wr({initialValues:{disease:"",prescription:""},validationSchema:"",onSubmit:async(l,c)=>{await DHe({...l,patientId:r,bookingId:o})&&te.fire("Added Prescription","","success")}}),s=async()=>{const l=await PHe({patientId:i});n(l._id);const c=await LHe({bookingId:o});c&&(a.setFieldValue("disease",c.disease),a.setFieldValue("prescription",c.prescription)),t(l)};return T.useEffect(()=>{s()},[]),d.jsx("div",{className:"w-full h-full flex ",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:d.jsxs("div",{className:"patient profile w-full h-full flex flex-col gap-4",children:[d.jsxs("div",{className:"w-full h-[10vh] flex gap-10 items-center",children:[d.jsx("div",{className:"w-[5vw] h-[10vh] ",children:d.jsx("img",{src:e==null?void 0:e.profileImage,alt:"patientprofile",className:"w-full h-full rounded-full"})}),d.jsx("div",{className:"details w-full h-full flex flex-col justify-center ",children:d.jsx("h1",{className:"w-full h-[70%] pl-10 bg-blue-500 flex items-center text-lg font-medium",children:`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName}`})})]}),d.jsx("div",{className:"prescription w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex justify-center bg-black bg-opacity-30",children:d.jsxs("form",{onSubmit:a.handleSubmit,className:"w-[70%] h-full p-4 flex flex-col gap-5",children:[d.jsx("h1",{className:"w-full h-[5vh] pl-10 bg-orange-500 flex items-center text-lg font-medium",children:"Prescription"}),d.jsx(le,{variant:"filled",label:"disease",name:"disease",value:a.values.disease,onChange:a.handleChange,onBlur:a.handleBlur}),d.jsx("textarea",{rows:"10",placeholder:"Prescription",name:"prescription",value:a.values.prescription,onChange:a.handleChange,onBlur:a.handleBlur}),d.jsx("button",{className:"bg-orange-500 w-[50%] h-[7vh]",type:"submit",children:"Add"})]})})})]})})})}const nne="https://hcompanion.onrender.com/api",jHe=sessionStorage.getItem("token"),UHe=async()=>{try{const e=await ve.get(`${nne}/patient/medicines/getAllMedicines`);return console.log(e),e.data.medicines}catch(e){console.log(e)}},FHe=async({patientId:e,pharmacyInventoryId:t,bookingId:r})=>{var n,i,o;try{const a=await ve.post(`${nne}/doctor/patient/medicine/request`,{patientId:e,pharmacyInventoryId:t,bookingId:r},{headers:{Authorization:`bearer ${jHe}`}});return console.log(a),!0}catch(a){return console.log(a),((n=a==null?void 0:a.response)==null?void 0:n.status)=="500"&&((o=(i=a==null?void 0:a.response)==null?void 0:i.data)!=null&&o.errorServer)&&te.fire("Server Error","","error"),!1}};function VHe(e){const{medicine:t,patientId:r,bookingId:n}=e,i=async(o,a)=>{await FHe({patientId:r,bookingId:n,pharmacyInventoryId:a._id})&&te.fire("Requested Medicine","","success")};return d.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:d.jsxs("div",{className:"h-full w-full flex flex-col ",children:[d.jsx("div",{className:"w-full h-[50%] ",children:d.jsx("img",{src:t.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[d.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t.medicineId.medicineName}),d.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:d.jsx("div",{className:"price w-full h-[5vh]",children:d.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[d.jsx(jm,{})," ",t.sellingPrice]})})})]}),d.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:o=>i(o,t),children:"Prescribe Medicine"})})]})]})})}function BHe(){Er();const{patientId:e,bookingId:t}=_m(),[r,n]=T.useState([]),i=async()=>{const o=await UHe();o.length>0&&await n(o)};return T.useEffect(()=>{i()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"medicinesList w-full h-full flex flex px-20 py-5 ",children:d.jsx("div",{className:"w-full h-full p-4 grid grid-cols-3 justify-items-center gap-y-10 ",children:r&&r.length>0?r.map((o,a)=>d.jsx("div",{className:"w-auto h-[40vh] flex flex-col cursor-pointer hover:bg-slate-400 rounded-lg",children:d.jsx(VHe,{medicine:o,patientId:e,bookingId:t},o._id)},o._id)):d.jsx("span",{className:"text-lg font-medium",children:"No Medicines.....:)"})})})})}function $He(e){const{order:t}=e,r=async(n,i)=>{const o=await b2({amount:t.doctorId.bookingPrice});if(o){const a=NCe({order:o,medicineOrder:t});await new Razorpay(a).open()}};return d.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-lg rounded-lg ",children:d.jsxs("div",{className:"h-full w-full flex flex-col ",children:[d.jsx("div",{className:"w-full h-[50%] ",children:d.jsx("img",{src:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[d.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t.pharmacyInventoryId.medicineId.medicineName}),d.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:d.jsx("div",{className:"price w-full h-[5vh]",children:d.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[d.jsx(jm,{})," ",t.pharmacyInventoryId.sellingPrice]})})})]}),d.jsx("div",{className:"w-full h-[10vh] flex  px-2 py-1 mb-2 ",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:n=>r(n,t.pharmacyInventoryId._id),children:"Order Medicine"})})]})]})})}function HHe(){const[e,t]=T.useState([]),r=async()=>{const n=await HTe();console.log(n),n&&t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-2",children:[d.jsx("h1",{className:"w-full h-[6vh] bg-blue-500 flex items-center pl-10",children:"Prescribed Medicines"}),d.jsx("div",{className:"w-full h-full flex gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>d.jsx("div",{className:"w-auto h-auto flex",children:d.jsx($He,{order:n})},i))})]})})}function zHe(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"requests",children:"Requests"}),d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"ordered",children:"Ordered"})]})})}function GHe(){return d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[d.jsx("div",{className:"header w-full h-[5vh]",children:d.jsx(zHe,{})}),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx(gi,{})})]})}function WHe(e){var r,n;const{order:t}=e;return d.jsx("div",{className:"w-[18vw] h-full flex flex-col shadow-xl rounded-lg border  ",children:d.jsxs("div",{className:"h-full w-full flex flex-col ",children:[d.jsx("div",{className:"w-full h-[50%] ",children:d.jsx("img",{src:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-[50%] flex flex-1 flex-col mt-2 ",children:[d.jsxs("div",{className:"content w-full h-full flex flex-col pl-4 gap-2  ",children:[d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:(n=(r=t==null?void 0:t.pharmacyInventoryId)==null?void 0:r.medicineId)==null?void 0:n.medicineName}),d.jsx("div",{className:"w-full font-medium flex flex-col gap-4 flex-1 ",children:d.jsx("div",{className:"price w-full h-[5vh]",children:d.jsxs("h1",{className:"w-full h-full flex gap-2 items-center text-xl",children:[d.jsx(jm,{})," ",t.pharmacyInventoryId.sellingPrice]})})})]}),d.jsx("div",{className:"w-full h-[8vh] flex  px-2 py-1 mb-2 ",children:d.jsx("h2",{className:"text-md font-bold text-emerald-500 w-full p-5 bg-blue-100",children:(t==null?void 0:t.orderStatus)=="1"?"Pending Delivery":"Delivered"})})]})]})})}function KHe(){const[e,t]=T.useState([]),r=async()=>{const n=await GTe();console.log(n),n&&t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:d.jsx("div",{className:"w-full h-full grid grid-cols-3 gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>d.jsx("div",{className:"w-auto h-auto flex",children:d.jsx(WHe,{order:n})},i))})})})}function qHe(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"requested",children:"Received"}),d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"delivered",children:"Delivered"})]})})}function YHe(){return d.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[d.jsx("div",{className:"w-full h-[8vh] p-5",children:d.jsx(qHe,{})}),d.jsx("div",{className:"w-full h-full mt-5 pb-2",children:d.jsx(gi,{})})]})}const nM="https://hcompanion.onrender.com/api",iM=sessionStorage.getItem("token"),XHe=async()=>{try{const e=await ve.get(`${nM}/pharmacy/order/medicines/requests`,{headers:{Authorization:`bearer ${iM}`}});return console.log(e),e.data.medicines}catch(e){return console.log(e),!1}},JHe=async({pharmacyInventoryId:e})=>{try{const t=await ve.post(`${nM}/pharmacy/order/medicines/deliver`,{pharmacyInventoryId:e},{headers:{Authorization:`bearer ${iM}`}});return!0}catch(t){return console.log(t),!1}},QHe=async()=>{try{const e=await ve.get(`${nM}/pharmacy/order/medicines/delivered`,{headers:{Authorization:`bearer ${iM}`}});return console.log("delivered Medicines",e),e.data.medicines}catch(e){return console.log(e),!1}};function ZHe(e){const{order:t}=e,r=async n=>{await JHe({pharmacyInventoryId:t.pharmacyInventoryId})&&te.fire("Updated as Delivered","","success")};return d.jsx("div",{className:"w-full h-full flex flex-col shadow-xl rounded-lg border ",children:d.jsxs("div",{className:"h-full w-full flex gap-2 ",children:[d.jsx("div",{className:"w-[30%] h-full ",children:d.jsx("img",{src:t==null?void 0:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-full flex flex-1 flex-col gap-4 mt-2 p-1 ",children:[d.jsxs("div",{className:"w-full h-auto flex gap-10 items-center p-2 bg-blue-500",children:[d.jsx("div",{className:"w-[3vw] h-[6vh]",children:d.jsx("img",{src:t.patientId.profileImage,alt:"",className:"w-full h-full rounded-full"})}),d.jsxs("div",{className:"w-auto h-auto",children:[d.jsx("h2",{className:"text-lg font-medium",children:`${t.patientId.firstName} ${t.patientId.lastName}`}),d.jsx("h2",{})]})]}),d.jsx("div",{className:"content w-full h-[10vh] flex flex-col pl-4 gap-2  ",children:d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t==null?void 0:t.pharmacyInventoryId.medicineId.medicineName})}),d.jsx("div",{className:"w-full h-[8vh] flex  px-2 py-1 mb-2 ",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:n=>r(),children:"Delivered"})})]})]})})}function e7e(){const[e,t]=T.useState([]),r=async()=>{const n=await XHe();n&&t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex p-2",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-5",children:d.jsx("div",{className:"orders w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full grid grid-cols-1",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[80%] h-[30vh]",children:d.jsx(ZHe,{order:n})},i))})})})})}function t7e(e){const{order:t}=e;return d.jsx("div",{className:"w-full h-full flex flex-col shadow-xl rounded-lg border ",children:d.jsxs("div",{className:"h-full w-full flex gap-2 ",children:[d.jsx("div",{className:"w-[30%] h-full ",children:d.jsx("img",{src:t==null?void 0:t.pharmacyInventoryId.medicineImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-full flex flex-1 flex-col gap-4 mt-2 p-1 ",children:[d.jsxs("div",{className:"w-full h-auto flex gap-10 items-center p-2 bg-blue-500",children:[d.jsx("div",{className:"w-[3vw] h-[6vh]",children:d.jsx("img",{src:t.patientId.profileImage,alt:"",className:"w-full h-full rounded-full"})}),d.jsxs("div",{className:"w-auto h-auto",children:[d.jsx("h2",{className:"text-lg font-medium",children:`${t.patientId.firstName} ${t.patientId.lastName}`}),d.jsx("h2",{})]})]}),d.jsx("div",{className:"content w-full h-[10vh] flex flex-col pl-4 gap-2  ",children:d.jsx("h1",{className:"w-full flex justify-start font-medium text-md",children:t==null?void 0:t.pharmacyInventoryId.medicineId.medicineName})}),d.jsx("div",{className:"w-full h-[8vh] flex  px-2 py-1 mb-2 ",children:d.jsx("h2",{className:"text-md font-bold text-emerald-500 w-full p-5 bg-blue-100",children:"Delivered"})})]})]})})}function r7e(){const[e,t]=T.useState([]),r=async()=>{const n=await QHe();n&&t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex p-2",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-5",children:d.jsx("div",{className:"orders w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full grid grid-cols-1",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[80%] h-[30vh]",children:d.jsx(t7e,{order:n})},i))})})})})}const ng="https://hcompanion.onrender.com/api",oM=sessionStorage.getItem("token"),n7e=async()=>{var e,t,r;try{return(await ve.get(`${ng}/doctor/patient/test/allTests`,{headers:{Authorization:`bearer ${oM}`}})).data.tests}catch(n){return console.log(n),((e=n==null?void 0:n.response)==null?void 0:e.status)=="500"&&((r=(t=n==null?void 0:n.response)==null?void 0:t.data)!=null&&r.errorServer)&&te.fire("Server Error","","error"),!1}},i7e=async({testId:e})=>{try{const t=await ve.post(`${ng}/doctor/patient/test/testDetails`,{testId:e},{headers:{Authorization:`bearer ${oM}`}});return console.log(t.data),t.data.testAndLabs}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):t.status=="401"?te.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&te.fire({icon:"warning",text:"Test can't be found at database"}),!1}},o7e=async({labTestId:e,patientId:t,bookingId:r})=>{var n,i;try{const o=await ve.post(`${ng}/doctor/patient/test/request`,{labTestId:e,patientId:t,bookingId:r},{headers:{Authorization:`bearer ${oM}`}});return!0}catch(o){return console.log(o),o.status=="500"&&((i=(n=o==null?void 0:o.response)==null?void 0:n.data)!=null&&i.errorServer)?te.fire({icon:"error",text:"Server Issue"}):o.status=="400"&&o.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):o.status=="401"?te.fire({icon:"warning",text:"Log In"}):o.status=="404"&&o.response.data.errorTestPresent?te.fire({icon:"warning",text:"Test can't be found at database"}):o.status=="404"&&o.response.data.errorTestOrdered&&te.fire({icon:"warning",text:"Test Already Ordered"}),!1}},a7e=async()=>{try{const e=await ve.get(`${ng}/doctor/patient/test/getOrderedTests`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("ordered tests",e.data.orders),e.data.orders}catch(e){return console.log(e),e.status=="500"&&e.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):e.status=="400"&&e.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):e.status=="401"?te.fire({icon:"warning",text:"Log In"}):e.status=="404"&&e.response.data.errorNoPatient&&te.fire({icon:"warning",text:"Patient Can't be found"}),!1}},s7e=async({testOrderId:e})=>{try{return(await ve.post(`${ng}/doctor/patient/test/completed/details`,{testOrderId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.order}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):t.status=="401"?te.fire({icon:"warning",text:"Log In"}):t.status=="400"&&t.response.data.errorDatabase&&te.fire({icon:"error",text:"Issue at the Database"}),!1}},l7e=async({testOrderId:e})=>{try{const t=await ve.post(`${ng}/doctor/patient/test/completed/result`,{testOrderId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log(t.data),t.data.result}catch(t){return console.log(t),t.status=="500"&&t.response.status.errorServer?te.fire({icon:"error",text:"Server Issue"}):t.status=="400"&&t.response.data.invalidToken?te.fire({icon:"warning",text:"Log In"}):t.status=="401"?te.fire({icon:"warning",text:"Log In"}):t.status=="404"&&t.response.data.errorTestPresent&&te.fire({icon:"warning",text:"Test can't be found at database"}),!1}};function c7e(e){var o;const{test:t,patientId:r,bookingId:n}=e,i=async a=>{await o7e({labTestId:t._id,patientId:r,bookingId:n})&&te.fire("Requested Test for the patient","","success")};return d.jsx("div",{className:"flex w-full h-full ",children:d.jsxs("div",{className:"flex h-full w-[40vw] gap-6 bg-white  border rounded-lg p-4 shadow-lg",children:[d.jsx("div",{className:"image w-[20%] h-[90%]",children:d.jsx("img",{src:"/normalUser.png",alt:"image",className:"object-fit w-full h-full"})}),d.jsxs("div",{className:"details h-full w-full flex flex-1 flex-col gap-4 ",children:[d.jsx("h1",{children:(o=t==null?void 0:t.labId)==null?void 0:o.userId.username}),d.jsx("div",{className:"location"}),d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx(Bm,{}),d.jsx("span",{children:"Koovappally"})]}),d.jsxs("div",{className:"flex gap-2 w-full h-auto",children:[(t==null?void 0:t.atHome)&&d.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-orange-400 p-3 rounded-md flex gap-4 items-center",children:[d.jsx("span",{children:" Home Service"}),d.jsxs("span",{className:"flex gap-2 items-center",children:[d.jsx(zw,{}),d.jsx("h6",{children:t==null?void 0:t.priceHome})]})]}),(t==null?void 0:t.atLab)&&d.jsxs("button",{className:"w-[50%] text-white text-md font-medium bg-blue-400 p-3 rounded-md flex gap-4 items-center",children:[d.jsx("span",{children:" Lab Service"}),d.jsxs("span",{className:"flex gap-2 items-center",children:[d.jsx(zw,{}),d.jsx("h6",{children:t==null?void 0:t.priceLab})]})]}),d.jsx("button",{className:"w-[30%] text-white text-md font-medium bg-emerald-400 p-3 rounded-md flex gap-4 items-center",onClick:a=>i(),children:"Request Test"})]})]})]})})}function u7e(){const[e,t]=T.useState([]),[r,n]=T.useState(void 0),{patientId:i,bookingId:o,testId:a}=_m();console.log("testId",a);const s=async()=>{const l=await i7e({testId:a});t(l),n(l[0].testId)};return T.useEffect(()=>{s()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"screen w-full h-full flex  gap-2 justify-between ",children:[d.jsxs("div",{className:"w-[56%] h-[80vh] flex gap-10 border p-4 shadow-lg items-center bg-emerald-400 bg-opacity-10 bg-blur-sm",children:[d.jsx("div",{className:"image h-[40vh] w-[70%]",children:d.jsx("img",{src:r==null?void 0:r.testImage,alt:"testImage",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"testDetails flex flex-col gap-2 w-full h-full justify-center",children:[d.jsxs("div",{className:"description w-full h-[10vh] border shadow-lg flex flex-col gap-2 px-1",children:[d.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Name"}),d.jsx("span",{className:"text-lg font-medium",children:r==null?void 0:r.testName.toUpperCase()})]}),d.jsxs("div",{className:"testDescription flex flex-col gap-2 border w-full h-[40vh] shadow-lg px-1",children:[d.jsx("h2",{className:"flex w-full justify-start text-md font-medium opacity-40",children:"Test Description"}),d.jsx("span",{className:"h-[10vh] p-2",children:r==null?void 0:r.testDescription})]})]})]}),d.jsxs("div",{className:"laboratorys bg-black bg-opacity-10 p-3 flex flex-col gap-4 w-auto h-full border  ",children:[d.jsx("h2",{className:"text-lg text-white  font-medium flex justify-center bg-blue-500 py-2",children:"Labs where the service available"}),d.jsx("div",{className:"labs flex flex-col gap-4 h-full w-full overflow-y-auto",children:(e==null?void 0:e.length)>0&&e.map((l,c)=>d.jsx("div",{className:"w-full h-auto",children:d.jsx(c7e,{test:l,patientId:i,bookingId:o})},c))})]})]})})}function d7e(e){const{test:t,patientId:r,bookingId:n}=e;return d.jsx("div",{className:"flex w-auto h-auto border rounded-lg shadow-lg shadow-emerald-300 hover:bg-black hover:bg-opacity-10 py-5 px-3 cursor-pointer   ",children:d.jsxs("div",{className:"w-[30vw] h-auto flex flex-row gap-5 ",children:[d.jsx("div",{className:"image w-[50%] h-full flex justify-center items-center",children:d.jsx("img",{src:t==null?void 0:t.testImage,alt:"testImage",className:"object-cover w-full h-[70%]"})}),d.jsxs("div",{className:"w-full h-full content flex flex-col gap-5 bg-black bg-opacity-10 p-4",children:[d.jsx("h2",{className:"flex justify-center text-white bg-blue-500 py-3 font-medium",children:t==null?void 0:t.testName}),d.jsx("textarea",{name:"testDescription",id:"id_testDescripion",value:t==null?void 0:t.testDescription,rows:"10",className:"flex text-sm cursor-pointer border-0",disabled:!0})]})]})})}function h7e(){const[e,t]=T.useState([]),r=Er(),{patientId:n,bookingId:i}=_m(),o=async()=>{const a=await n7e();t(a)};return T.useEffect(()=>{o()},[]),d.jsx("div",{className:"flex flex-col w-full h-full",children:d.jsx("div",{className:"w-full h-full grid grid-cols-2 gap-2 justify-items-start",children:(e==null?void 0:e.length)>0&&e.map((a,s)=>d.jsx("div",{className:"w-auto h-auto cursor-pointer",onClick:()=>r(`/doctor/bookings/labtest/testDetails/${n}/${i}/${a._id}`),children:d.jsx(d7e,{test:a,patientId:n,bookingId:i})},s))})})}function f7e(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"requests",children:"Requests"}),d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"ordered",children:"Ordered"})]})})}function p7e(){return d.jsxs("div",{className:"w-full h-full flex flex-col gap-5 overflow-y-auto",children:[d.jsx("div",{className:"header w-full h-[5vh]",children:d.jsx(f7e,{})}),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx(gi,{})})]})}function m7e(e){var n,i,o,a,s,l,c,u,h,f,p,m;const{testOrder:t}=e;console.log(t);const r=async(g,y)=>{const v=await b2({amount:100});if(v){const b=ACe({order:v,testOrder:t});await new Razorpay(b).open()}};return d.jsx("div",{className:"w-full h-full flex ",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("div",{className:"img w-[30%] h-full",children:d.jsx("img",{src:(i=(n=t==null?void 0:t.labTestId)==null?void 0:n.testId)==null?void 0:i.testImage,alt:"test image",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[d.jsx("div",{className:"w-full h-auto flex ",children:d.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[d.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(a=(o=t==null?void 0:t.labTestId)==null?void 0:o.testId)==null?void 0:a.testName}),d.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),d.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[d.jsx("div",{className:"description w-[60%] bg-black bg-opacity-20 p-2",children:d.jsx("h2",{className:"w-full h--full",children:(l=(s=t==null?void 0:t.labTestId)==null?void 0:s.testId)==null?void 0:l.testDescription})}),d.jsxs("div",{className:"pharmacy w-[40%] flex flex-col gap-2 p-1",children:[d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((u=(c=t==null?void 0:t.labTestId)==null?void 0:c.labId)==null?void 0:u.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(f=(h=t==null?void 0:t.labTestId)==null?void 0:h.labId)==null?void 0:f.laboratoryName})]}),d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(x0,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:"koovappally"})]})}),d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((p=t==null?void 0:t.doctorId)==null?void 0:p.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`prescribed by the doctor ${(m=t==null?void 0:t.doctorId)==null?void 0:m.firstName}`})]})]})]})]})]}),d.jsx("div",{className:"w-full h-[5vh] flex gap-2",children:d.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",onClick:g=>r(g,t._id),children:"Order Test"})})]})})}function g7e(){const[e,t]=T.useState([]),r=async()=>{const n=await SCe();console.log(n),n&&await t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"requestedTests flex flex-col gap-4",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[90%] h-auto",children:d.jsx(m7e,{testOrder:n})},i))})})})}function y7e(){return d.jsx("div",{className:"w-full h-full flex",children:d.jsxs("div",{className:"options w-full flex justify-start gap-10",children:[d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-blue-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"test/ordered",children:"Received"}),d.jsx(Rr,{className:"w-auto h-auto px-16 py-6 text-md font-medium bg-red-500 flex justify-center items-center shadow-lg shadow-emerald-400",to:"test/completed",children:"Serviced"})]})})}function v7e(){return d.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[d.jsx("div",{className:"w-full h-[8vh] p-5",children:d.jsx(y7e,{})}),d.jsx("div",{className:"w-full h-full mt-5 pb-2",children:d.jsx(gi,{})})]})}function b7e(e){var n,i,o,a,s,l,c,u,h,f,p,m,g,y,v,b;const{testOrder:t}=e;console.log(t);const r=async(_,S)=>{await POe({testOrderId:S})&&te.fire("Successfully Updated as completed","","success")};return d.jsx("div",{className:"w-full h-full flex ",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("div",{className:"img w-[30%] h-full",children:d.jsx("img",{src:(i=(n=t==null?void 0:t.labTestId)==null?void 0:n.testId)==null?void 0:i.testImage,alt:"test image",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[d.jsx("div",{className:"w-full h-auto flex ",children:d.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[d.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(a=(o=t==null?void 0:t.labTestId)==null?void 0:o.testId)==null?void 0:a.testName}),d.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),d.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[d.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:d.jsx("h2",{className:"w-full h--full",children:(l=(s=t==null?void 0:t.labTestId)==null?void 0:s.testId)==null?void 0:l.testDescription})}),d.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((u=(c=t==null?void 0:t.labTestId)==null?void 0:c.labId)==null?void 0:u.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(f=(h=t==null?void 0:t.labTestId)==null?void 0:h.labId)==null?void 0:f.laboratoryName})]}),d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((p=t==null?void 0:t.patientId)==null?void 0:p.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Ordered by ${(m=t==null?void 0:t.patientId)==null?void 0:m.firstName}`})]})]}),d.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(x0,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(y=(g=t==null?void 0:t.patientId)==null?void 0:g.addressId)==null?void 0:y.place})]})}),d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(LT,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(b=(v=t==null?void 0:t.patientId)==null?void 0:v.userId)==null?void 0:b.phone})]})})]})]})]})]}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-2",children:[d.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",onClick:_=>r(_,t._id),children:"Completed"}),d.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",children:"Upload test Result"})]})]})})}function E7e(){const[e,t]=T.useState([]),r=async()=>{const n=await kOe();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"orders w-full h-full flex flex-col gap-5 p-5",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[90%] h-auto",children:d.jsx(b7e,{testOrder:n})},i))})})})}function _7e(e){var a,s,l,c,u,h,f,p,m,g,y,v,b,_,S,I;const[t,r]=T.useState(!1),{testOrder:n}=e;console.log(n);const i=Er(),o=async()=>{await L1({testOrderId:n._id})&&r(!0)};return T.useEffect(()=>{o()},[]),d.jsx("div",{className:"w-full h-full flex ",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("div",{className:"img w-[30%] h-full",children:d.jsx("img",{src:(s=(a=n==null?void 0:n.labTestId)==null?void 0:a.testId)==null?void 0:s.testImage,alt:"test image",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[d.jsx("div",{className:"w-full h-auto flex ",children:d.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[d.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(c=(l=n==null?void 0:n.labTestId)==null?void 0:l.testId)==null?void 0:c.testName}),d.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${n==null?void 0:n.bookingId._id}`})]})}),d.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[d.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:d.jsx("h2",{className:"w-full h--full",children:(h=(u=n==null?void 0:n.labTestId)==null?void 0:u.testId)==null?void 0:h.testDescription})}),d.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((p=(f=n==null?void 0:n.labTestId)==null?void 0:f.labId)==null?void 0:p.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(g=(m=n==null?void 0:n.labTestId)==null?void 0:m.labId)==null?void 0:g.laboratoryName})]}),d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((y=n==null?void 0:n.patientId)==null?void 0:y.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Ordered by ${(v=n==null?void 0:n.patientId)==null?void 0:v.firstName}`})]})]}),d.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(x0,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(_=(b=n==null?void 0:n.patientId)==null?void 0:b.addressId)==null?void 0:_.place})]})}),d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(LT,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(I=(S=n==null?void 0:n.patientId)==null?void 0:S.userId)==null?void 0:I.phone})]})})]})]})]})]}),d.jsx("div",{className:"w-full h-[5vh] flex gap-2",children:d.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",onClick:A=>{var D;return i(`uploadResult?patientId=${n.patientId._id}&testOrderId=${n._id}&bookingId=${(D=n==null?void 0:n.bookingId)==null?void 0:D._id}&doctorId=${n.doctorId._id}`)},children:t?"View Uploaded result":"Upload test Result"})})]})})}function w7e(){const[e,t]=T.useState([]),r=async()=>{const n=await DOe();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"orders w-full h-full flex flex-col gap-5 p-5",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[90%] h-auto",children:d.jsx(_7e,{testOrder:n})},i))})})})}function S7e(){var c,u;const e=Er(),t=new URLSearchParams(location.search),r=t.get("testOrderId"),n=t.get("patientId"),i=t.get("doctorId");console.log("doctorId",i);const[o,a]=T.useState(void 0),s=Wr({initialValues:{testResultDescription:""},validationSchema:jOe,onSubmit:async(h,f)=>{await MOe({...h,testOrderId:r,patientId:n,doctorId:i})&&(te.fire("Result uploaded successfully","","success"),e("/laboratory/order/test/completed"))}}),l=async()=>{const h=await LOe({testOrderId:r}),f=await L1({testOrderId:r});f&&s.setFieldValue("testResultDescription",f.testResultDescription),a(h)};return T.useEffect(()=>{l()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2 p-10",children:d.jsxs("form",{onSubmit:s.handleSubmit,className:"flex flex-col gap-10",children:[d.jsx("h1",{className:"w-full h-[8vh] p-2 flex items-center justify-center text-white text-lg font-bold bg-blue-500",children:`Test Result for the Request from ${(c=o==null?void 0:o.doctorId)==null?void 0:c.firstName} for ${(u=o==null?void 0:o.patientId)==null?void 0:u.firstName}`}),d.jsx("textarea",{rows:15,name:"testResultDescription",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.testResultDescription}),s.touched.testResultDescription&&s.errors.testResultDescription?d.jsx("span",{className:"text-red",children:s.errors.testResultDescription}):"",d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("button",{className:"w-full h-full flex items-center justify-center bg-orange-500",children:"Upload Result"})})]})})})}function T7e(e){var n,i,o,a,s,l,c;const{booking:t}=e;Er();const r=async(u,h,f,p)=>{u.preventDefault(),await te.fire({showCancelButton:!0,confirmButtonText:"Proceed Canceling",text:"Do you want to cancel the booking",icon:"question"}).then(async m=>{m.isConfirmed&&await U1({startTime:h,slotDate:f,doctorId:p})&&(await te.fire("Canceled","Booking has been Canceled","success"),window.location.reload())})};return d.jsx("div",{className:"w-full h-full ",children:d.jsxs("div",{className:"w-full h-full flex gap-2 border shadow-lg p-4 bg-white rounded-lg hover:bg-black hover:bg-opacity-10 cursor-pointer",children:[d.jsx("div",{className:"image w-auto h-full flex items-center px-5",children:d.jsx("img",{src:(n=t==null?void 0:t.doctorId)==null?void 0:n.profileImage,className:"h-[15vh] w-[7vw] rounded-full"})}),d.jsxs("div",{className:"details w-auto h-full px-2 py-2 flex flex-col gap-4 flex-1 items-start border bg-black bg-opacity-5 ",children:[d.jsx("h4",{className:"text-sm font-medium opacity-40",children:"Cardiology"}),d.jsx("div",{className:"w-full h-auto",children:d.jsx("h4",{children:(o=(i=t==null?void 0:t.doctorId)==null?void 0:i.userId)==null?void 0:o.username})}),d.jsx("div",{className:"location w-full h-auto",children:d.jsxs("div",{className:"flex gap-4 items-start",children:[d.jsx(Bm,{}),d.jsxs("div",{className:"flex flex-col gap-2 w-auto h-full items-start justify-start",children:[d.jsx("span",{className:"flex items-center",children:(s=(a=t==null?void 0:t.doctorId)==null?void 0:a.addressId)==null?void 0:s.place}),d.jsx("span",{className:"flex items-center",children:(c=(l=t==null?void 0:t.doctorId)==null?void 0:l.addressId)==null?void 0:c.district})]})]})})]}),d.jsxs("div",{className:"w-auto h-full flex flex-1 flex-col justify-end font-bold gap-4 py-2 px-2 bg-emerald-200 bg-opacity-40",children:[d.jsxs("div",{className:"slotDetails w-full h-auto p-4 flex gap-4 items-center",children:[d.jsx(R0,{}),d.jsx("span",{children:`${t==null?void 0:t.slotDate} ${ct(t==null?void 0:t.startTime,"H:mm A").format("h:mm A").toString()}`})]}),d.jsxs("div",{className:"w-full h-auto flex gap-4",children:[d.jsx("button",{className:"cancel w-full h-auto p-2 bg-red-500 font-medium flex items-center justify-center",onClick:u=>{var h;return r(u,t==null?void 0:t.startTime,t==null?void 0:t.slotDate,(h=t==null?void 0:t.doctorId)==null?void 0:h._id)},children:"Cancel"}),ct().isAfter(ct(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A"))&&ct().isBefore(ct(`${t.slotDate} ${t.startTime}`,"D MMM, dddd YYYY H:mm A").add(2,"hour"))&&d.jsx("button",{className:"cancel w-full h-auto p-2 bg-blue-500 font-medium flex items-center justify-center",onClick:u=>window.open(`/patient/bookings/videoConsult?patientId=${t.patientId._id}&doctorId=${t.doctorId._id}`,"_blank"),children:"Join Meeting"})]})]})]})})}function C7e(){const[e,t]=T.useState([]),r=async()=>{const n=await YOe();await t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"flex w-full h-full",children:d.jsx("div",{className:"booked flex flex-col gap-4",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>d.jsx("div",{className:"w-[60vw] h-[25vh] ",children:d.jsx(T7e,{booking:n})},i))})})}var ine={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Wu,function(){return function(r,n,i){n.prototype.dayOfYear=function(o){var a=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return o==null?a:this.add(o-a,"day")}}})})(ine);var x7e=ine.exports;const aM=oa(x7e);ct.extend(ws);ct.extend(aM);function R7e(e){var i,o,a,s,l,c,u,h,f,p,m,g,y,v,b,_;const{testOrder:t}=e,r=ct(t==null?void 0:t.testDoneDate.split(" (")[0]).format("D MMM, dddd YYYY h:mm A"),n=Er();return d.jsx("div",{className:"w-full h-full flex ",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("div",{className:"img w-[30%] h-full",children:d.jsx("img",{src:(o=(i=t==null?void 0:t.labTestId)==null?void 0:i.testId)==null?void 0:o.testImage,alt:"test image",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[d.jsx("div",{className:"w-full h-auto flex ",children:d.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[d.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(s=(a=t==null?void 0:t.labTestId)==null?void 0:a.testId)==null?void 0:s.testName}),d.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),d.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[d.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:d.jsx("h2",{className:"w-full h--full",children:(c=(l=t==null?void 0:t.labTestId)==null?void 0:l.testId)==null?void 0:c.testDescription})}),d.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((h=(u=t==null?void 0:t.labTestId)==null?void 0:u.labId)==null?void 0:h.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(p=(f=t==null?void 0:t.labTestId)==null?void 0:f.labId)==null?void 0:p.laboratoryName})]}),d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((m=t==null?void 0:t.doctorId)==null?void 0:m.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Requested by ${(g=t==null?void 0:t.doctorId)==null?void 0:g.firstName}`})]})]}),d.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(x0,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(v=(y=t==null?void 0:t.patientId)==null?void 0:y.addressId)==null?void 0:v.place})]})}),d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(LT,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(_=(b=t==null?void 0:t.patientId)==null?void 0:b.userId)==null?void 0:_.phone})]})})]})]})]})]}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-2",children:[(t==null?void 0:t.orderStatus)=="2"?d.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",onClick:S=>{var I;return n(`uploadResult?patientId=${t.patientId._id}&testOrderId=${t._id}&bookingId=${(I=t==null?void 0:t.bookingId)==null?void 0:I._id}&doctorId=${t.doctorId._id}`)},children:"View test Result"}):d.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",children:"need to be Completed"}),d.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",children:`ordered on ${r}`})]})]})})}function I7e(){const[e,t]=T.useState([]),r=async()=>{const n=await CCe();console.log(n),n&&await t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"requestedTests flex flex-col gap-4",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[90%] h-auto",children:d.jsx(R7e,{testOrder:n})},i))})})})}function N7e(){const[e,t]=T.useState(),r=Wr({initialValues:{place:"",state:"",country:"",pincode:"",district:"",phone:""},validationSchema:JTe,onSubmit:async(i,o)=>{console.log("values",i),await Awe(i)&&te.fire("Profile has been Update","","success")}}),n=async()=>{const i=await Nwe();r.setFieldValue("place",i._doc.place),r.setFieldValue("district",i._doc.district),r.setFieldValue("state",i._doc.state),r.setFieldValue("pincode",i._doc.pincode),r.setFieldValue("country",i._doc.country),r.setFieldValue("phone",i.phone),t(i)};return T.useEffect(()=>{n()},[]),d.jsx("div",{className:"screen w-full h-full flex flex-col p-10",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 justify-center pl-20  ",children:[d.jsx("h1",{className:"font-medium mb-2",children:"Address"}),d.jsxs("div",{className:"w-[60%] flex flex-col gap-2",children:[d.jsx(le,{variant:"filled",name:"place",label:"Place",className:"w-full ",value:r.values.place,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.place&&r.errors.place?{color:"error",helperText:r.errors.place}:{color:"success"}}),d.jsx(le,{variant:"filled",name:"state",label:"state",className:"w-full ",value:r.values.state,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.state&&r.errors.state?{color:"error",helperText:r.errors.state}:{color:"success"}}),d.jsx(le,{variant:"filled",name:"district",label:"district",className:"w-full ",value:r.values.pincode,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.district&&r.errors.district?{color:"error",helperText:r.errors.district}:{color:"success"}}),d.jsx(le,{variant:"filled",name:"country",label:"country",className:"w-full ",value:r.values.country,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.country&&r.errors.country?{color:"error",helperText:r.errors.country}:{color:"success"}}),d.jsx(le,{variant:"filled",name:"pincode",label:"pincode",className:"w-full ",value:r.values.pincode,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.pincode&&r.errors.pincode?{color:"error",helperText:r.errors.pincode}:{color:"success"}})]}),d.jsx("h1",{className:"mt-5 font-medium mb-2",children:"Phone Details"}),d.jsx("div",{className:"w-[60%] flex flex-col gap-2",children:d.jsx(le,{variant:"filled",name:"phone",label:"phone",className:"w-full ",value:r.values.phone,onChange:r.handleChange,onBlur:r.handleBlur,...r.touched.phone&&r.errors.phone?{color:"error",helperText:r.errors.phone}:{color:"success"}})}),d.jsx("button",{type:"button",onClick:r.handleSubmit,className:"w-[60%] h-[5vh] border font-medium rounded-[5%] bg-orange-500 p-2 ",children:"Save"})]})})}function A7e(){var c;const e=Er(),t=new URLSearchParams(location.search),r=t.get("testOrderId"),n=t.get("patientId"),i=t.get("doctorId");console.log("doctorId",i);const[o,a]=T.useState(void 0),s=Wr({initialValues:{testResultDescription:""},validationSchema:"",onSubmit:async(u,h)=>{await laboratory_uploadTestResultService({...u,testOrderId:r,patientId:n,doctorId:i})&&(te.fire("Result uploaded successfully","","success"),e("/laboratory/order/test/completed"))}}),l=async()=>{const u=await RCe({testOrderId:r}),h=await xCe({testOrderId:r});h&&s.setFieldValue("testResultDescription",h.testResultDescription),a(u)};return T.useEffect(()=>{l()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2 p-10",children:d.jsxs("form",{onSubmit:s.handleSubmit,className:"flex flex-col gap-10",children:[d.jsx("h1",{className:"w-full h-[8vh] p-2 flex items-center justify-center text-white text-lg font-bold bg-blue-500",children:`Test Result for ${(c=o==null?void 0:o.patientId)==null?void 0:c.firstName}`}),d.jsx("textarea",{rows:15,name:"testResultDescription",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.testResultDescription}),s.touched.testResultDescription&&s.errors.testResultDescription?d.jsx("span",{className:"text-red",children:s.errors.testResultDescription}):""]})})})}const one="https://hcompanion.onrender.com/api",O7e=async()=>{var e,t,r;try{return(await ve.get(`${one}/patient/doctor/prescriptions`,{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}})).data.prescriptions}catch(n){return console.log(n),((e=n.response)==null?void 0:e.status)=="500"&&((r=(t=n.response)==null?void 0:t.data)!=null&&r.errorServer)&&te.fire("Server Error","","error"),!1}},k7e=async({bookingId:e})=>{var t,r,n;try{const i=await ve.post(`${one}/patient/doctor/prescription/details/booking`,{bookingId:e},{headers:{Authorization:`bearer ${sessionStorage.getItem("token")}`}});return console.log("prescription details",i.data.prescription),i.data.prescription}catch(i){return console.log(i),((t=i.response)==null?void 0:t.status)=="500"&&((n=(r=i.response)==null?void 0:r.data)!=null&&n.errorServer)&&te.fire("Server Error","","error"),!1}};ct.extend(ws);ct.extend(aM);function P7e(e){var i,o,a;const{prescription:t}=e,r=ct(t==null?void 0:t.updatedAt).format("D MMM, dddd YYYY h:mm A"),n=Er();return d.jsx("div",{className:"w-full h-full flex flex-col shadow-xl rounded-lg border ",children:d.jsxs("div",{className:"h-full w-full flex gap-2 ",children:[d.jsx("div",{className:"w-[15%] h-full ",children:d.jsx("img",{src:(i=t==null?void 0:t.doctorId)==null?void 0:i.profileImage,className:"w-full h-full rounded-t-lg"})}),d.jsxs("div",{className:"content w-full h-full flex flex-1 flex-col gap-4 mt-2 p-1 ",children:[d.jsxs("div",{className:"w-full h-auto flex gap-10 items-center p-2 ",children:[d.jsxs("div",{className:"w-[30%] h-auto bg-black bg-opacity-20 flex items-center justify-center p-2",children:[d.jsx("h2",{className:"text-lg font-medium",children:`Doctor ${(o=t==null?void 0:t.doctorId)==null?void 0:o.firstName} ${(a=t==null?void 0:t.doctorId)==null?void 0:a.lastName}`}),d.jsx("h2",{})]}),d.jsx("div",{className:"w-full flex justify-end h-auto bg-black bg-opacity-20 p-2",children:d.jsx("h2",{className:"text-lg font-medium",children:`prescription on Date ${r}`})})]}),d.jsx("div",{className:"w-full h-[8vh] flex   py-1 mb-2 ",children:d.jsx("button",{className:"w-full h-full  font-medium bg-orange-500  border",onClick:s=>{var l,c;return n(`/patient/profile/prescription/details/${(c=(l=t==null?void 0:t.patientId)==null?void 0:l.userId)==null?void 0:c._id}/${t==null?void 0:t.bookingId._id}`)},children:"View Prescription"})})]})]})})}function D7e(){const[e,t]=T.useState([]),r=async()=>{const n=await O7e();t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full flex flex-col p-4",children:d.jsx("div",{className:"prescriptions w-[90%] h-full flex flex-col gap-5",children:(e==null?void 0:e.length)>0&&e.map((n,i)=>d.jsx("div",{className:"w-full h-auto",children:d.jsx(P7e,{prescription:n})},i))})})})}function L7e(){var u,h,f,p,m;const[e,t]=T.useState(void 0),[r,n]=T.useState(void 0),[i,o]=T.useState(void 0),{patientId:a,bookingId:s}=_m(),l=Wr({initialValues:{disease:"",prescription:""},validationSchema:"",onSubmit:async(g,y)=>{}}),c=async()=>{const g=await eJ({patientId:a});n(g._id);const y=await k7e({bookingId:s});o(y),y&&(l.setFieldValue("disease",y.disease),l.setFieldValue("prescription",y.prescription)),t(g)};return T.useEffect(()=>{c()},[]),d.jsx("div",{className:"w-full h-full flex ",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2",children:d.jsxs("div",{className:"patient profile w-full h-full flex flex-col gap-4",children:[d.jsxs("div",{className:"w-full h-[10vh] flex gap-10 items-center",children:[d.jsx("div",{className:"w-[5vw] h-[10vh] ",children:d.jsx("img",{src:(u=i==null?void 0:i.doctorId)==null?void 0:u.profileImage,alt:"patientprofile",className:"w-full h-full rounded-full"})}),d.jsxs("div",{className:"details w-full h-full flex items-center  gap-10",children:[d.jsx("h1",{className:"w-full h-[70%] pl-10 bg-black bg-opacity-20 flex items-center text-lg font-medium",children:`Doctor ${(h=i==null?void 0:i.doctorId)==null?void 0:h.firstName} ${(f=i==null?void 0:i.doctorId)==null?void 0:f.lastName}`}),d.jsx("h1",{className:"w-full h-[70%] pl-10 bg-black bg-opacity-20 flex items-center text-lg font-medium",children:`Consulted on ${(p=i==null?void 0:i.bookingId)==null?void 0:p.slotDate} ${(m=i==null?void 0:i.bookingId)==null?void 0:m.startTime}`})]})]}),d.jsx("div",{className:"prescription w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex justify-center bg-black bg-opacity-30",children:d.jsxs("form",{onSubmit:l.handleSubmit,className:"w-[70%] h-full p-4 flex flex-col gap-5",children:[d.jsx("h1",{className:"w-full h-[5vh] pl-10 bg-orange-500 flex items-center text-lg font-medium",children:"Prescription"}),d.jsx(le,{variant:"filled",label:"disease",name:"disease",value:l.values.disease,onChange:l.handleChange,onBlur:l.handleBlur}),d.jsx("textarea",{rows:"10",placeholder:"Prescription",name:"prescription",value:l.values.prescription,onChange:l.handleChange,onBlur:l.handleBlur})]})})})]})})})}function M7e(){const[e,t]=T.useState(""),r=Wr({initialValues:{pharmacyName:"",ownerName:""},validationSchema:Ni().shape({}),onSubmit:async(o,a)=>{console.log("values",o),await sTe(o)&&(te.fire({icon:"success",text:"The profile has been updated"}),i())}}),n=o=>{const a=o.target.files[0],s=new FileReader;s.onload=l=>{t(l.target.result),r.setFieldValue("profileImage",a)},s.readAsDataURL(o.target.files[0])},i=async()=>{const o=await f2();r.setFieldValue("pharmacyName",o.pharmacyName),r.setFieldValue("ownerName",o.ownerName),t(o.profileImage)};return T.useEffect(()=>{i()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full flex flex-col items-center",children:d.jsxs("form",{className:"w-[50%] h-full flex flex-col gap-6 pt-10 ",children:[d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{helperText:"Choose an Image",name:"profileImage",onChange:n})})})]}),d.jsx(le,{variant:"filled",label:"First Name",name:"firstName",value:r.values.pharmacyName,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Last Name",name:"lastName",value:r.values.ownerName,onChange:r.handleChange}),d.jsxs("button",{type:"button",onClick:r.handleSubmit,className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(Gh,{}),"Save"]})]})})})}function j7e(){var r;const e=Wr({initialValues:{place:"",state:"",district:"",country:"",pincode:"",houseName:"",phone:""},validationSchema:Ni().shape({}),onSubmit:async(n,i)=>{await cTe(n)&&t()}}),t=async()=>{const{phone:n,...i}=await lTe();console.log("temp contact",i._doc),e.setFieldValue("place",i._doc.place),e.setFieldValue("state",i._doc.state),e.setFieldValue("district",i._doc.district),e.setFieldValue("country",i._doc.country),e.setFieldValue("pincode",i._doc.pincode?i._doc.pincode:""),e.setFieldValue("houseName",i._doc.houseName),e.setFieldValue("phone",n)};return T.useEffect(()=>{t()},[]),d.jsx("div",{className:"w-full h-full",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 items-center pt-10",children:[d.jsx("div",{className:"w-[70%] ",children:d.jsx("h1",{className:"text-lg font-medium",children:"Address"})}),d.jsxs("form",{className:"w-[70%]  grid grid-cols-2 gap-4",children:[d.jsx(le,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:(r=e.values)==null?void 0:r.houseName}),d.jsx(le,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),d.jsx(le,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),d.jsx(le,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),d.jsx(le,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),d.jsx(le,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]}),d.jsxs("form",{className:"w-[70%] flex flex-col pt-10",children:[d.jsx("div",{children:d.jsx("h1",{className:"text-lg font-medium",children:"Contact Details"})}),d.jsx("div",{className:"w-[30%] flex flex-col gap-4 mt-5 ",children:d.jsx(le,{variant:"filled",label:"Phone",className:"font-bold",name:"phone",onChange:e.handleChange,value:e.values.phone})})]}),d.jsxs("button",{type:"button",onClick:e.handleSubmit,className:"w-[70%] text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(Gh,{}),"Save"]})]})})}function U7e(){return d.jsxs("div",{className:"w-full h-[10vh] px-2 text-center font-bold flex justify-center items-center gap-2 ",children:[d.jsxs(Rr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/laboratory/profile/profileDetails ",children:[d.jsx(DT,{className:"h-full w-[5%]"}),d.jsx("span",{className:"flex flex-1",children:"Profile Details"})]}),d.jsxs(Rr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/laboratory/profile/contactDetails",children:[d.jsx(p2,{className:"h-full w-[5%]"}),d.jsx("span",{className:"flex flex-1",children:"Contact Details"})]}),d.jsxs(Rr,{className:"options w-[35%] h-[80%] font-bold justify-center items-center p-2 bg-opacity-80 shadow-lg shadow-emerald-200 pl-4 flex items-center gap-5 border  ",to:"/laboratory/profile/passwordReset",children:[d.jsx(m2,{className:"h-full w-[5%]"}),d.jsx("span",{className:"flex flex-1",children:"Password Reset"})]})]})}function F7e(){return d.jsxs("div",{className:"w-full h-full flex flex-col overflow-y-scroll",children:[d.jsx(U7e,{}),d.jsx("div",{className:"w-full h-full mt-5 pb-2",children:d.jsx(gi,{})})]})}function V7e(){const[e,t]=T.useState(""),r=Wr({initialValues:{laboratoryName:"",ownerName:"",profileImage:""},validationSchema:Ni().shape({}),onSubmit:async(o,a)=>{console.log("values",o),await pOe(o)&&(te.fire({icon:"success",text:"The profile has been updated"}),i())}}),n=o=>{const a=o.target.files[0],s=new FileReader;s.onload=l=>{t(l.target.result),r.setFieldValue("profileImage",a)},s.readAsDataURL(o.target.files[0])},i=async()=>{const o=await mOe();r.setFieldValue("laboratoryName",o.laboratoryName),r.setFieldValue("ownerName",o.ownerName),t(o.profileImage)};return T.useEffect(()=>{i()},[]),d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-full flex flex-col items-center",children:d.jsxs("form",{className:"w-[50%] h-full flex flex-col gap-6 pt-10 ",children:[d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{helperText:"Choose an Image",name:"profileImage",onChange:n})})})]}),d.jsx(le,{variant:"filled",label:"First Name",name:"laboratoryName",value:r.values.laboratoryName,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Last Name",name:"ownerName",value:r.values.ownerName,onChange:r.handleChange}),d.jsxs("button",{type:"button",onClick:r.handleSubmit,className:"w-full text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(Gh,{}),"Save"]})]})})})}function B7e(){var r;const e=Wr({initialValues:{place:"",state:"",district:"",country:"",pincode:"",houseName:"",phone:""},validationSchema:Ni().shape({}),onSubmit:async(n,i)=>{await yOe(n)&&t()}}),t=async()=>{const{phone:n,...i}=await gOe();console.log("temp contact",i._doc),e.setFieldValue("place",i._doc.place),e.setFieldValue("state",i._doc.state),e.setFieldValue("district",i._doc.district),e.setFieldValue("country",i._doc.country),e.setFieldValue("pincode",i._doc.pincode?i._doc.pincode:""),e.setFieldValue("houseName",i._doc.houseName),e.setFieldValue("phone",n)};return T.useEffect(()=>{t()},[]),d.jsx("div",{className:"w-full h-full",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 items-center pt-10",children:[d.jsx("div",{className:"w-[70%] ",children:d.jsx("h1",{className:"text-lg font-medium",children:"Address"})}),d.jsxs("form",{className:"w-[70%]  grid grid-cols-2 gap-4",children:[d.jsx(le,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:(r=e.values)==null?void 0:r.houseName}),d.jsx(le,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),d.jsx(le,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),d.jsx(le,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),d.jsx(le,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),d.jsx(le,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]}),d.jsxs("form",{className:"w-[70%] flex flex-col pt-10",children:[d.jsx("div",{children:d.jsx("h1",{className:"text-lg font-medium",children:"Contact Details"})}),d.jsx("div",{className:"w-[30%] flex flex-col gap-4 mt-5 ",children:d.jsx(le,{variant:"filled",label:"Phone",className:"font-bold",name:"phone",onChange:e.handleChange,value:e.values.phone})})]}),d.jsxs("button",{type:"button",onClick:e.handleSubmit,className:"w-[70%] text-lg font-sm border rounded-[5%] bg-orange-500 p-2 flex gap-4 items-center justify-center",children:[d.jsx(Gh,{}),"Save"]})]})})}const $7e="https://hcompanion.onrender.com/api",H7e=async({token:e})=>{try{const t=await ve.get(`${$7e}/doctor/getBasicDetails`,{headers:{authorization:`Bearer ${e}`}});return console.log(t.data),t.data.userData}catch(t){return t.response.status=="401"&&te.fire({html:`<b>${t.response.status.message}</b>`,title:"Session Out"}),console.log(t),!1}};function z7e(){const e=Er(),t=$l();rn(n=>n.user);const r=async()=>{if(sessionStorage.getItem("token")){const n=await H7e({token:sessionStorage.getItem("token")});n?t(Xn({username:n.username,email:n.email,role:n.role,isLoggedIn:!0})):Xn({})}};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"navBar w-full h-full flex flex-col",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 p-4 bg-emerald-400 bg-opacity-90 rounded-tr-[3%]  ",children:[d.jsxs("div",{className:"w-full h-[15vh] flex flex-row items-center gap-4  p-1  ",children:[d.jsx("img",{src:"normalUser.png",className:"rounded-full w-[4vw] h-[100%]"}),d.jsxs("div",{className:"h-full w-full pl-4 flex flex-1 flex-col justify-center gap-2 bg-white bg-opacity-40 rounded-lg ",children:[d.jsx("h2",{className:"text-lg font-bold",children:"Admin"}),d.jsx("span",{className:" font-sm",children:"admin"})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(le,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"options h-full w-full mt-10 flex flex-col gap-4 font-medium text-white ",children:[d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorSlotSetting.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",id:"id_navSlot",onClick:()=>{e("/doctor/slot")},children:"Users"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorBookings.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/bookings")},children:"Approvals"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),t(Xn({})),e("/")},children:"sign out"})]})]})]})})}function G7e(){return d.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[d.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:d.jsx(z7e,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:d.jsx(gi,{})})]})}function W7e(){const{username:e}=rn(t=>t.user);return d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:d.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:d.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white ",children:[d.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome"}),d.jsx("span",{className:"text-[10vh] font-bold",children:e||" "}),d.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Offers you best doctor consultations"})]})})})})}function K7e(){const{username:e}=rn(t=>t.user);return d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:d.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:d.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white p-10 ",children:[d.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome Doctor"}),d.jsx("span",{className:"text-[10vh] font-bold",children:e}),d.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Offers you best doctor consultations"})]})})})})}function q7e(){const{username:e}=rn(t=>t.user);return d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"w-full h-screen flex bg-[url(/icons/pharmacyHome.jpg)] bg-no-repeat bg-cover bg-center",children:d.jsx("div",{className:"w-full h-screen flex flex-col bg-black bg-opacity-70",children:d.jsxs("div",{className:"welcome w-full flex flex-col items-center mt-10 text-white p-10 ",children:[d.jsx("span",{className:"text-[20vh] font-bold",children:"Welcome"}),d.jsx("span",{className:"text-[10vh] font-bold",children:e}),d.jsx("p",{className:"text-[3vh]",children:"The HealthCompanion Laboratory Management"})]})})})})}function Y7e(){const e=Er(),t=$l(),{username:r,email:n,role:i,isLoggedIn:o}=rn(l=>l.user),a=rn(l=>l.doctor),s=async()=>{if(sessionStorage.getItem("token")){const l=await MJ({token:sessionStorage.getItem("token")});if(l){const c=await jJ({token:sessionStorage.getItem("token")});console.log(c),t(Xn({username:l.username,email:l.email,role:l.role,isLoggedIn:!0})),t(Cp({firstName:c.firstName,lastName:c.lastName,profileImage:c.profileImage,weight:c.weight,height:c.height,profileImage:c.profileImage}))}else Xn({}),Cp({})}};return console.log(a),T.useEffect(()=>{s()},[]),d.jsx("div",{className:"navBar w-full h-full flex flex-col",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-4 p-4 bg-slate-800 bg-opacity-90 rounded-tr-[3%]  ",children:[d.jsxs("div",{className:"w-full h-[15vh] flex flex-row items-center gap-4  p-1  ",children:[d.jsx("img",{src:a.profileImage,className:"rounded-full w-[4vw] h-[100%]"}),d.jsxs("div",{className:"h-full w-full pl-4 flex flex-1 flex-col justify-center gap-2 bg-white bg-opacity-40 rounded-lg ",children:[d.jsx("h2",{className:"text-lg font-bold",children:a&&a.firstName?a.firstName:r}),d.jsx("span",{className:" font-sm",children:"Doctor"})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(le,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"options h-full w-full mt-10 flex flex-col gap-4 font-medium text-white ",children:[d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/home")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorSlotSetting.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",id:"id_navSlot",onClick:()=>{e("/doctor/slot")},children:"Slot"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/doctorBookings.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/bookings")},children:"Bookings"})]}),d.jsxs("div",{className:"option p-2 w-full h-[8%] flex flex-row gap-4 justify-start bg-white bg-opacity-40 shadow-lg ",children:[d.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{e("/doctor/profile")},children:"Profile"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),t(Xn({})),t(Cp({})),e("/")},children:"sign out"})]})]})]})})}function X7e(){return d.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[d.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:d.jsx(Y7e,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:d.jsx(gi,{})})]})}function J7e(){const[e,t]=T.useState(""),r=Wr({initialValues:{firstName:"",lastName:"",category:"",height:"",weight:"",place:"",state:"",district:"",country:"",pincode:"",profileImage:"",bloodGroup:"",age:"",license:"",specialization:"",tenInstitutionName:"",twelfthInstitutionName:"",collegeInstitutionName:"",tenCertificate:"",twelfthCertificate:"",collegeCertificate:""},validationSchema:"",onSubmit:async(o,a)=>{await O1(o)&&te.fire("Form Submitted Successfully","","success")}}),n=(o,a)=>{const s=o.target.files[0],l=new FileReader;l.onload=c=>{t(c.target.result),r.setFieldValue(a,s)},l.readAsDataURL(o.target.files[0])},i=(o,a)=>{const s=o.target.files[0],l=new FileReader;l.onload=c=>{r.setFieldValue(a,s)},l.readAsDataURL(o.target.files[0])};return console.log(r.values),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{onSubmit:r.handleSubmit,className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Approval Form"}),d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{helperText:"Choose an Image",name:"profileImage",onChange:o=>n(o,o.target.name)})})})]}),d.jsx(le,{variant:"filled",label:"First Name",name:"firstName",value:r.values.firstName,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Last Name",name:"lastName",value:r.values.lastName,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Age",name:"age",value:r.values.age,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Blood Group",name:"bloodGroup",value:r.values.bloodGroup,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Height",name:"height",value:r.values.height,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Weight",name:"weight",value:r.values.weight,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Category",name:"category",value:r.values.category,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Specialization",name:"specialization",value:r.values.specialization,onChange:r.handleChange}),d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{helperText:"Choose an file",name:"license",onChange:o=>i(o,o.target.name)})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(le,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:r.handleChange,value:r.values.houseName}),d.jsx(le,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:r.handleChange,value:r.values.place}),d.jsx(le,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:r.handleChange,value:r.values.district}),d.jsx(le,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:r.handleChange,value:r.values.state}),d.jsx(le,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:r.handleChange,value:r.values.country}),d.jsx(le,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:r.handleChange,value:r.values.pincode})]})}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Educational Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-5",children:[d.jsx(le,{variant:"filled",label:"Ten Institution Name ",className:"font-bold flex ",name:"tenInstitutionName",onChange:r.handleChange,value:r.values.tenInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{helperText:"Choose an ten certificate",name:"tenCertificate",onChange:o=>i(o,o.target.name)})})})}),d.jsx(le,{variant:"filled",label:"Twelfth Institution Name ",className:"font-bold flex ",name:"twelfthInstitutionName",onChange:r.handleChange,value:r.values.twelfthInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{helperText:"Choose an twelfth certificate",name:"twelfthCertificate",onChange:o=>i(o,o.target.name)})})})}),d.jsx(le,{variant:"filled",label:"College Institution Name ",className:"font-bold flex ",name:"collegeInstitutionName",onChange:r.handleChange,value:r.values.collegeInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{helperText:"Choose an college certificate",name:"collegeCertificate",onChange:o=>i(o,o.target.name)})})})})]})}),d.jsx("button",{type:"submit",className:"w-full h-[5vh] p-2 bg-orange-500",children:"submit"})]})})})}function Q7e(){T.useState("");const e=Wr({initialValues:{firstName:"",lastName:"",category:"",height:"",weight:"",place:"",state:"",district:"",country:"",pincode:"",profileImage:"",bloodGroup:"",age:"",license:"",specialization:"",tenInstitutionName:"",twelfthInstitutionName:"",collegeInstitutionName:"",tenCertificate:"",twelfthCertificate:"",collegeCertificate:""},validationSchema:"",onSubmit:async(r,n)=>{await O1(r)&&te.fire("Form Submitted Successfully","","success")}}),t=async()=>{const r=await cOe();r&&(e.setFieldValue("firstName",r.firstName),e.setFieldValue("lastName",r.lastName),e.setFieldValue("weight",r.weight),e.setFieldValue("height",r.height),e.setFieldValue("age",r.age),e.setFieldValue("license",r.license),e.setFieldValue("bloodGroup",r.bloodGroup),e.setFieldValue("profileImage",r.profileImage),e.setFieldValue("bloodGroup",r.bloodGroup),e.setFieldValue("place",r.addressId.place),e.setFieldValue("district",r.addressId.district),e.setFieldValue("country",r.addressId.country),e.setFieldValue("pincode",r.addressId.pincode),e.setFieldValue("category",r.category),e.setFieldValue("specialization",r.specialization),e.setFieldValue("tenInstitutionName",r.educationId.tenInstutionName),e.setFieldValue("twelfthInstitutionName",r.educationId.twelfthInstutionName),e.setFieldValue("collegeInstitutionName",r.educationId.collegeInstutionName),e.setFieldValue("tenCertificate",r.educationId.tenCertificate),e.setFieldValue("twelfthCertificate",r.educationId.twelfthCertificate),e.setFieldValue("collegeCertificate",r.educationId.collegeCertificate))};return T.useEffect(()=>{t()},[]),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Form has been submitted to Admin"}),d.jsx("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:d.jsx("img",{src:e.values.profileImage||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"})}),d.jsx(le,{variant:"filled",label:"First Name",name:"firstName",value:e.values.firstName,onChange:e.handleChange}),d.jsx(le,{variant:"filled",label:"Last Name",name:"lastName",value:e.values.lastName,onChange:e.handleChange}),d.jsx(le,{variant:"filled",label:"Age",name:"age",value:e.values.age,onChange:e.handleChange}),d.jsx(le,{variant:"filled",label:"Blood Group",name:"bloodGroup",value:e.values.bloodGroup,onChange:e.handleChange}),d.jsx(le,{variant:"filled",label:"Height",name:"height",value:e.values.height,onChange:e.handleChange}),d.jsx(le,{variant:"filled",label:"Weight",name:"weight",value:e.values.weight,onChange:e.handleChange}),d.jsx(le,{variant:"filled",label:"Category",name:"category",value:e.values.category,onChange:e.handleChange}),d.jsx(le,{variant:"filled",label:"Specialization",name:"specialization",value:e.values.specialization,onChange:e.handleChange}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-4 justify-center items-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:e.values.license,download:"licence.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download license"})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(le,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:e.values.houseName}),d.jsx(le,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),d.jsx(le,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),d.jsx(le,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),d.jsx(le,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),d.jsx(le,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]})}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Educational Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-5",children:[d.jsx(le,{variant:"filled",label:"Ten Institution Name ",className:"font-bold flex ",name:"tenInstitutionName",onChange:e.handleChange,value:e.values.tenInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:e.values.tenCertificate,download:"tenCertificate.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download tenth Certificate"})})})}),d.jsx(le,{variant:"filled",label:"Twelfth Institution Name ",className:"font-bold flex ",name:"twelfthInstitutionName",onChange:e.handleChange,value:e.values.twelfthInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:e.values.twelfthCertificate,download:"twelfthCertificate.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download twelfth Certificate"})})})}),d.jsx(le,{variant:"filled",label:"College Institution Name ",className:"font-bold flex ",name:"collegeInstitutionName",onChange:e.handleChange,value:e.values.collegeInstitutionName}),d.jsx("div",{className:"w-full h-full flex gap-4 justify-center items-center",children:d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:e.values.collegeCertificate,download:"collegeCertificate.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download college Certificate"})})})})]})})]})})})}function Z7e(){const e=$l(),{username:t,email:r,role:n,isLoggedIn:i}=rn(u=>u.user),{pharmacyName:o,ownerName:a,profileImage:s}=rn(u=>u.pharmacy),l=Er(),c=async()=>{if(sessionStorage.getItem("token")&&!i){const u=await CJ({token:sessionStorage.getItem("token")});if(u){const h=await f2();e(Xn({username:u.username,email:u.email,role:u.role,isLoggedIn:!0})),e(RJ({pharmacyName:h.pharmacyName,ownerName:h.ownerName,profileImage:h.profileImage}))}}};return T.useEffect(()=>{c()},[]),d.jsx("div",{className:"navbarParent h-full w-full ",children:d.jsxs("div",{className:"navbar w-full h-full flex flex-col rounded-tr-[3%] bg-blue-600 bg-opacity-90 p-4 gap-10 ",children:[d.jsxs("div",{className:"w-full h-[8vh] flex justify-start items-center gap-4 ",children:[d.jsx("img",{src:"/icons/arrowBack.png",alt:"",className:"h-[5vh] w-[] p-2 ml-2 bg-white  rounded-lg"}),d.jsx("h2",{className:"text-white text-sm",children:"Minimize"}),d.jsx("div",{className:"flex-1 h-full flex justify-end items-center",children:d.jsx("img",{src:"/logo.png",alt:"",className:"w-[7vw] h-[7vh] bg-white mr-4"})})]}),d.jsxs("div",{className:"profile h-[12%] flex flex-row justify-start gap-4",children:[d.jsx("div",{className:"profileImage w-auto h-full flex ",children:d.jsx("img",{src:s,alt:"image",className:"h-full w-[5vw] rounded-full "})}),d.jsxs("div",{className:"details flex-1 flex flex-col justify-center bg-white bg-opacity-10 p-2 rounded-lg gap-2 ",children:[d.jsx("span",{children:d.jsx("h2",{className:"text-white text-lg font-bold",children:o||t})}),d.jsx("span",{children:d.jsx("h2",{className:"text-white text-sm",children:"pharmacy"})})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(le,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"home w-full text-white h-[80%] flex flex-col gap-4 border-slate-50",children:[d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/pharmacyHome.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{l("/pharmacy/home")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/stock.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",id:"id_navMedicineStock",onClick:()=>{l("/pharmacy/stock/viewStocks")},children:"Medicine Stock"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/pharmacyOrder.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{l("/pharmacy/order")},children:"Orders"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{l("/pharmacy/profile")},children:"Profile"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-10 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),e(Xn({})),l("/")},children:"sign out"})]})]})]})})}function eze(){return d.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[d.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:d.jsx(Z7e,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:d.jsx(gi,{})})]})}function tze(){const[e,t]=T.useState(""),r=Wr({initialValues:{pharmacyName:"",ownerName:"",profileImage:"",houseName:"",license:"",place:"",state:"",district:"",country:"",pincode:""},validationSchema:"",onSubmit:async(o,a)=>{await uTe(o)&&te.fire("Form Submitted Successfully","","success")}}),n=(o,a)=>{const s=o.target.files[0],l=new FileReader;l.onload=c=>{t(c.target.result),r.setFieldValue(a,s)},l.readAsDataURL(o.target.files[0])},i=(o,a)=>{const s=o.target.files[0],l=new FileReader;l.onload=c=>{r.setFieldValue(a,s)},l.readAsDataURL(o.target.files[0])};return console.log(r.values),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{onSubmit:r.handleSubmit,className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Approval Form"}),d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{helperText:"Choose an Image",name:"profileImage",onChange:o=>n(o,o.target.name)})})})]}),d.jsx(le,{variant:"filled",label:"Pharmacy Name",name:"pharmacyName",value:r.values.pharmacyName,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Owner Name",name:"ownerName",value:r.values.ownerName,onChange:r.handleChange}),d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{helperText:"Choose an file",name:"license",onChange:o=>i(o,o.target.name)})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(le,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:r.handleChange,value:r.values.houseName}),d.jsx(le,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:r.handleChange,value:r.values.place}),d.jsx(le,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:r.handleChange,value:r.values.district}),d.jsx(le,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:r.handleChange,value:r.values.state}),d.jsx(le,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:r.handleChange,value:r.values.country}),d.jsx(le,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:r.handleChange,value:r.values.pincode})]})}),d.jsx("button",{type:"submit",className:"w-full h-[5vh] p-2 bg-orange-500",children:"submit"})]})})})}function rze(){T.useState("");const e=Wr({initialValues:{pharmacyName:"",ownerName:"",profileImage:"",houseName:"",license:"",place:"",state:"",district:"",country:"",pincode:""},validationSchema:"",onSubmit:async(r,n)=>{await doctor_approval_updateProfileDetailsService(r)&&te.fire("Form Submitted Successfully","","success")}}),t=async()=>{const r=await dTe();r&&(e.setFieldValue("pharmacyName",r.pharmacyName),e.setFieldValue("ownerName",r.ownerName),e.setFieldValue("license",r.license),e.setFieldValue("profileImage",r.profileImage),e.setFieldValue("place",r.addressId.place),e.setFieldValue("district",r.addressId.district),e.setFieldValue("country",r.addressId.country),e.setFieldValue("pincode",r.addressId.pincode))};return T.useEffect(()=>{t()},[]),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Form has been submitted to Admin"}),d.jsx("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:d.jsx("img",{src:e.values.profileImage||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"})}),d.jsx(le,{variant:"filled",label:"Pharmacy Name",name:"pharmacyName",value:e.values.pharmacyName,onChange:e.handleChange}),d.jsx(le,{variant:"filled",label:"Owner Name",name:"ownerName",value:e.values.ownerName,onChange:e.handleChange}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-4 justify-center items-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:e.values.license,download:"licence.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download license"})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(le,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:e.values.houseName}),d.jsx(le,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),d.jsx(le,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),d.jsx(le,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),d.jsx(le,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),d.jsx(le,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]})})]})})})}function nze(){const e=$l(),t=Er(),{username:r,email:n}=rn(l=>l.user),{laboratoryName:i,ownerName:o,profileImage:a}=rn(l=>l.laboratory),s=async()=>{const l=await k1();l&&(e(Xn({username:l.userId.username,email:l.userId.email,phone:l.userId.phone,role:l.userId.role,isLoggedIn:!0})),e(D1({laboratoryName:l.laboratoryName,ownerName:l.ownerName,profileImage:l.profileImage})))};return T.useEffect(()=>{s()},[]),d.jsx("div",{className:"navbarParent h-full w-full ",children:d.jsxs("div",{className:"navbar w-full h-full flex flex-col rounded-tr-[3%] bg-pink-600 bg-opacity-90 p-4 gap-10 ",children:[d.jsxs("div",{className:"w-full h-[8vh] flex justify-start items-center gap-4 ",children:[d.jsx("img",{src:"/icons/arrowBack.png",alt:"",className:"h-[5vh] w-[] p-2 ml-2 bg-white  rounded-lg"}),d.jsx("h2",{className:"text-white text-sm",children:"Minimize"}),d.jsx("div",{className:"flex-1 h-full flex justify-end items-center",children:d.jsx("img",{src:"/logo.png",alt:"",className:"w-[7vw] h-[7vh] bg-white mr-4"})})]}),d.jsxs("div",{className:"profile h-[12%] flex flex-row justify-start gap-4",children:[d.jsx("div",{className:"profileImage w-auto h-full flex ",children:d.jsx("img",{src:a,alt:"image",className:"h-full w-[5vw] rounded-full "})}),d.jsxs("div",{className:"details flex-1 flex flex-col justify-center bg-white bg-opacity-30 p-2 rounded-lg gap-2 ",children:[d.jsx("span",{children:d.jsx("h2",{className:"text-white text-lg font-bold",children:i||r})}),d.jsx("span",{children:d.jsx("h2",{className:"text-white text-sm",children:"Laboratory"})})]})]}),d.jsx("div",{className:"search w-full h-[5%]",children:d.jsx(le,{variant:"filled",name:"search",placeholder:"search",className:"h-full"})}),d.jsxs("div",{className:"home w-full text-white h-[80%] flex flex-col gap-4 border-slate-50",children:[d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/laboratory_homeIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full cursor-pointer",onClick:()=>{t("/laboratory/home")},children:"Home"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/laboratory_serviceIcon.jpg",alt:"laboratory services",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full cursor-pointer",onClick:()=>{t("/laboratory/testServices")},children:"Laboratory test Services"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/laboratory_testOrderIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{t("/laboratory/order")},children:"Test Orders"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/profileIcon.jpg",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{t("/laboratory/profile")},children:"Profile"})]}),d.jsxs("div",{className:"option p-2 w-full h-[10%] flex flex-row gap-4 justify-start bg-white bg-opacity-30 ",children:[d.jsx("img",{src:"/icons/logout.png",alt:"home img",className:"bg-white h-full rounded-sm"}),d.jsx("button",{className:"h-full",onClick:()=>{sessionStorage.removeItem("token"),e(Xn({})),t("/")},children:"sign out"})]})]})]})})}function ize(){return d.jsxs("div",{className:"screen w-screen h-screen flex flex-row ",children:[d.jsx("div",{className:"navBar fixed w-[21%] h-[100vh] shadow-lg shadow-emerald-400 ",children:d.jsx(nze,{})}),d.jsx("div",{className:"contentPage relative w-[79%] ml-[21vw] right-[0] h-full flex flex-1 flex-col gap-4",children:d.jsx(gi,{})})]})}function oze(){const[e,t]=T.useState(""),r=Wr({initialValues:{laboratoryName:"",ownerName:"",profileImage:"",houseName:"",license:"",place:"",state:"",district:"",country:"",pincode:""},validationSchema:"",onSubmit:async(o,a)=>{await vOe(o)&&te.fire("Form Submitted Successfully","","success")}}),n=(o,a)=>{const s=o.target.files[0],l=new FileReader;l.onload=c=>{t(c.target.result),r.setFieldValue(a,s)},l.readAsDataURL(o.target.files[0])},i=(o,a)=>{const s=o.target.files[0],l=new FileReader;l.onload=c=>{r.setFieldValue(a,s)},l.readAsDataURL(o.target.files[0])};return console.log(r.values),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{onSubmit:r.handleSubmit,className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Approval Form"}),d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("img",{src:e||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{helperText:"Choose an Image",name:"profileImage",onChange:o=>n(o,o.target.name)})})})]}),d.jsx(le,{variant:"filled",label:"Laboratory Name",name:"laboratoryName",value:r.values.laboratoryName,onChange:r.handleChange}),d.jsx(le,{variant:"filled",label:"Owner Name",name:"ownerName",value:r.values.ownerName,onChange:r.handleChange}),d.jsxs("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-end",children:d.jsx("div",{className:"flex flex-col gap-1",children:d.jsx(po,{helperText:"Choose an file",name:"license",onChange:o=>i(o,o.target.name)})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(le,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:r.handleChange,value:r.values.houseName}),d.jsx(le,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:r.handleChange,value:r.values.place}),d.jsx(le,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:r.handleChange,value:r.values.district}),d.jsx(le,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:r.handleChange,value:r.values.state}),d.jsx(le,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:r.handleChange,value:r.values.country}),d.jsx(le,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:r.handleChange,value:r.values.pincode})]})}),d.jsx("button",{type:"submit",className:"w-full h-[5vh] p-2 bg-orange-500",children:"submit"})]})})})}function aze(){var r;T.useState("");const e=Wr({initialValues:{pharmacyName:"",ownerName:"",profileImage:"",houseName:"",license:"",place:"",state:"",district:"",country:"",pincode:""},validationSchema:"",onSubmit:async(n,i)=>{}}),t=async()=>{const n=await bOe();n&&(e.setFieldValue("laboratoryName",n.laboratoryName),e.setFieldValue("ownerName",n.ownerName),e.setFieldValue("license",n.license),e.setFieldValue("profileImage",n.profileImage),e.setFieldValue("place",n.addressId.place),e.setFieldValue("district",n.addressId.district),e.setFieldValue("country",n.addressId.country),e.setFieldValue("pincode",n.addressId.pincode))};return T.useEffect(()=>{t()},[]),d.jsx("div",{className:"w-full h-auto flex",children:d.jsx("div",{className:"w-full h-auto flex justify-center p-5",children:d.jsxs("form",{className:"approvalDiv w-[80%] h-auto flex flex-col gap-[3vh] p-10 border rounded-lg text-emerald-300 shadow-lg shadow-emerald-500 ",children:[d.jsx("h2",{className:"w-full h-[5vh] bg-red-500 flex items-center justify-center text-white text-bold ",children:"Form has been submitted to Admin"}),d.jsx("div",{className:"w-full h-[15vh] flex gap-4 justify-center",children:d.jsx("img",{src:e.values.profileImage||"/normalUser.png",className:"w-[7vw] h-full rounded-full",name:"profileImage",id:"id_profileImage"})}),d.jsx(le,{variant:"filled",label:"Laboratory Name",name:"pharmacyName",value:e.values.laboratoryName,onChange:e.handleChange}),d.jsx(le,{variant:"filled",label:"Owner Name",name:"ownerName",value:e.values.ownerName,onChange:e.handleChange}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-4 justify-center items-center",children:[d.jsx("h1",{className:"flex w-auto h-full items-center",children:"license"}),d.jsx("div",{className:"h-full w-full flex flex-1 items-center",children:d.jsx("div",{className:"flex flex-col gap-1 h-full justify-center bg-orange-500 p-2 text-white",children:d.jsx("a",{href:e.values.license,download:"licence.pdf",target:"_blank",rel:"noopener noreferrer",children:"Download license"})})})]}),d.jsx("div",{className:"w-full h-[5vh] flex",children:d.jsx("h1",{className:"w-[50%] h-full bg-blue-500 flex items-center justify-center ",children:"Contact Details"})}),d.jsx("div",{className:"w-full h-auto flex",children:d.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[d.jsx(le,{variant:"filled",label:"House Name",className:"font-bold",name:"houseName",onChange:e.handleChange,value:(r=e.values)==null?void 0:r.houseName}),d.jsx(le,{variant:"filled",label:"Place",className:"font-bold",name:"place",onChange:e.handleChange,value:e.values.place}),d.jsx(le,{variant:"filled",label:"District",className:"font-bold",name:"district",onChange:e.handleChange,value:e.values.district}),d.jsx(le,{variant:"filled",label:"State",className:"font-bold",name:"state",onChange:e.handleChange,value:e.values.state}),d.jsx(le,{variant:"filled",label:"Country",className:"font-bold",name:"country",onChange:e.handleChange,value:e.values.country}),d.jsx(le,{variant:"filled",label:"Pincode",className:"font-bold",name:"pincode",onChange:e.handleChange,value:e.values.pincode})]})})]})})})}ct.extend(ws);ct.extend(aM);function sze(e){var i,o,a,s,l,c,u,h,f,p,m,g,y,v,b,_;const{testOrder:t}=e,r=ct(t==null?void 0:t.testDoneDate.split(" (")[0]).format("D MMM, dddd YYYY h:mm A"),n=Er();return d.jsx("div",{className:"w-full h-full flex ",children:d.jsxs("div",{className:"w-full h-full flex flex-col gap-2 p-1 border border-black rounded-lg p-2 shadow-lg",children:[d.jsxs("div",{className:"w-full h-auto flex gap-2",children:[d.jsx("div",{className:"img w-[30%] h-full",children:d.jsx("img",{src:(o=(i=t==null?void 0:t.labTestId)==null?void 0:i.testId)==null?void 0:o.testImage,alt:"test image",className:"w-full h-full object-fit"})}),d.jsxs("div",{className:"content w-auto h-auto flex flex-col gap-2",children:[d.jsx("div",{className:"w-full h-auto flex ",children:d.jsxs("div",{className:"w-full h-auto grid grid-cols-2 gap-2",children:[d.jsx("h1",{className:"w-full h-auto p-1 bg-blue-500 flex justify-center",children:(s=(a=t==null?void 0:t.labTestId)==null?void 0:a.testId)==null?void 0:s.testName}),d.jsx("button",{className:"w-full h-auto p-1 bg-orange-500 flex justify-center",children:`booking ${t==null?void 0:t.bookingId._id}`})]})}),d.jsxs("div",{className:"testDetails w-full h-[80%] flex gap-2",children:[d.jsx("div",{className:"description w-[40%] bg-black bg-opacity-20 p-2",children:d.jsx("h2",{className:"w-full h--full",children:(c=(l=t==null?void 0:t.labTestId)==null?void 0:l.testId)==null?void 0:c.testDescription})}),d.jsxs("div",{className:"pharmacy w-[30%] flex flex-col gap-2 p-1",children:[d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2 ",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((h=(u=t==null?void 0:t.labTestId)==null?void 0:u.labId)==null?void 0:h.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:(p=(f=t==null?void 0:t.labTestId)==null?void 0:f.labId)==null?void 0:p.laboratoryName})]}),d.jsxs("div",{className:"w-full h-[7vh] flex gap-6 justify-end items-center bg-black bg-opacity-20 border p-2",children:[d.jsx("div",{className:"w-[3vw] h-[6vh] flex items-center",children:d.jsx("img",{src:((m=t==null?void 0:t.doctorId)==null?void 0:m.profileImage)||"/normalUser.png",alt:"test image",className:"w-[3vw] h-[6vh] object-fit rounded-full"})}),d.jsx("div",{className:"w-full h-full flex flex-1 items-center flex justify-end pr-4 ",children:`Requested by ${(g=t==null?void 0:t.doctorId)==null?void 0:g.firstName}`})]})]}),d.jsxs("div",{className:"w-full h-full flex flex-1 bg-blue-400 flex-col gap-2 text-white",children:[d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(x0,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(v=(y=t==null?void 0:t.patientId)==null?void 0:y.addressId)==null?void 0:v.place})]})}),d.jsx("div",{className:"address w-full h-auto flex gap-6 justify-end items-center border items-center bg-black bg-opacity-20 border",children:d.jsxs("div",{className:"w-full h-auto flex justify-between gap-8 p-4",children:[d.jsx(LT,{className:"w-[3vw]"}),d.jsx("h3",{className:"flex ",children:(_=(b=t==null?void 0:t.patientId)==null?void 0:b.userId)==null?void 0:_.phone})]})})]})]})]})]}),d.jsxs("div",{className:"w-full h-[5vh] flex gap-2",children:[(t==null?void 0:t.orderStatus)=="2"?d.jsx("button",{className:"w-full h-full p-4 bg-blue-500 flex justify-center items-center",onClick:S=>{var I;return n(`/doctor/bookings/test/completed/details?patientId=${t.patientId._id}&testOrderId=${t._id}&bookingId=${(I=t==null?void 0:t.bookingId)==null?void 0:I._id}&doctorId=${t.doctorId._id}`)},children:"View test Result"}):d.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",children:"need to be Completed"}),d.jsx("button",{className:"w-full h-full p-4 bg-emerald-500 flex justify-center items-center",children:`ordered on ${r}`})]})]})})}function lze(){const[e,t]=T.useState([]),r=async()=>{const n=await a7e();console.log(n),n&&await t(n)};return T.useEffect(()=>{r()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col",children:d.jsx("div",{className:"requestedTests flex flex-col gap-4",children:e.length>0&&e.map((n,i)=>d.jsx("div",{className:"w-[90%] h-auto",children:d.jsx(sze,{testOrder:n})},i))})})})}function cze(){var c;const e=Er(),t=new URLSearchParams(location.search),r=t.get("testOrderId"),n=t.get("patientId"),i=t.get("doctorId");console.log("doctorId",i);const[o,a]=T.useState(void 0),s=Wr({initialValues:{testResultDescription:""},validationSchema:"",onSubmit:async(u,h)=>{await laboratory_uploadTestResultService({...u,testOrderId:r,patientId:n,doctorId:i})&&(te.fire("Result uploaded successfully","","success"),e("/laboratory/order/test/completed"))}}),l=async()=>{const u=await s7e({testOrderId:r}),h=await l7e({testOrderId:r});h&&s.setFieldValue("testResultDescription",h.testResultDescription),a(u)};return T.useEffect(()=>{l()},[]),d.jsx("div",{className:"w-full h-full flex",children:d.jsx("div",{className:"w-full h-full flex flex-col gap-2 p-10",children:d.jsxs("form",{className:"flex flex-col gap-10",children:[d.jsx("h1",{className:"w-full h-[8vh] p-2 flex items-center justify-center text-white text-lg font-bold bg-blue-500",children:`Test Result for ${(c=o==null?void 0:o.patientId)==null?void 0:c.firstName}`}),d.jsx("textarea",{rows:15,name:"testResultDescription",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.testResultDescription}),s.touched.testResultDescription&&s.errors.testResultDescription?d.jsx("span",{className:"text-red",children:s.errors.testResultDescription}):""]})})})}function uze(){return d.jsx(d.Fragment,{children:d.jsx(Bae,{children:d.jsxs(Pae,{children:[d.jsx(Ve,{path:"/login",element:d.jsx(Lwe,{})}),d.jsx(Ve,{path:"/register",element:d.jsx(Gwe,{})}),"//Patient",d.jsxs(Ve,{path:"/",element:d.jsx(oTe,{}),children:[d.jsx(Ve,{path:"patient/home",element:d.jsx(W7e,{})}),d.jsx(Ve,{path:"/patient/medicines",element:d.jsx(WTe,{})}),d.jsx(Ve,{path:"/patient/medicines/medicineDetails",element:d.jsx(KTe,{})}),d.jsxs(Ve,{path:"/patient/profile",element:d.jsx(YTe,{}),children:[d.jsx(Ve,{index:!0,path:"/patient/profile/details",element:d.jsx(QTe,{})}),d.jsx(Ve,{path:"/patient/profile/contactDetails",element:d.jsx(N7e,{})}),d.jsxs(Ve,{path:"/patient/profile/bookings",element:d.jsx(KOe,{}),children:[d.jsx(Ve,{path:"/patient/profile/bookings/currentBookings",element:d.jsx(JOe,{})}),d.jsx(Ve,{path:"/patient/profile/bookings/pastBookings",element:d.jsx(C7e,{})})]}),d.jsxs(Ve,{path:"/patient/profile/medicine",element:d.jsx(GHe,{}),children:[d.jsx(Ve,{path:"/patient/profile/medicine/requests",element:d.jsx(HHe,{})}),d.jsx(Ve,{path:"/patient/profile/medicine/ordered",element:d.jsx(KHe,{})})]}),d.jsxs(Ve,{path:"/patient/profile/test",element:d.jsx(p7e,{}),children:[d.jsx(Ve,{path:"/patient/profile/test/requests",element:d.jsx(g7e,{})}),d.jsx(Ve,{path:"/patient/profile/test/ordered",element:d.jsx(I7e,{})}),d.jsx(Ve,{path:"/patient/profile/test/ordered/uploadResult",element:d.jsx(A7e,{})})]}),d.jsx(Ve,{path:"/patient/profile/prescription",element:d.jsx(D7e,{})}),d.jsx(Ve,{path:"/patient/profile/prescription/details/:patientId/:bookingId",element:d.jsx(L7e,{})})]}),d.jsx(Ve,{path:"/patient/doctors",element:d.jsx(mCe,{}),children:d.jsx(Ve,{path:"/patient/doctors/:doctorId",element:d.jsx(OCe,{})})}),"//test",d.jsx(Ve,{path:"/patient/tests",element:d.jsx(HOe,{})}),d.jsx(Ve,{path:"/patient/tests/testDetails",element:d.jsx(GOe,{})}),d.jsx(Ve,{path:"/patient/treatmentPlan",element:d.jsx(YAe,{})}),d.jsx(Ve,{path:"/patient/alerts",element:d.jsx(AHe,{})})]}),"//video",d.jsx(Ve,{path:"/patient/bookings/videoConsult",element:d.jsx(xHe,{})}),"//pharmcacy",d.jsxs(Ve,{path:"/pharmacy",element:d.jsx(xTe,{}),children:[d.jsx(Ve,{path:"/pharmacy/home",element:d.jsx(fOe,{})}),d.jsx(Ve,{path:"/pharmacy/stock/addCategory",element:d.jsx(STe,{})}),d.jsx(Ve,{path:"/pharmacy/stock/viewStocks",element:d.jsx(TTe,{})}),d.jsx(Ve,{path:"/pharmacy/stock/editStock",element:d.jsx(RTe,{})}),d.jsxs(Ve,{path:"/pharmacy/profile",element:d.jsx(UTe,{}),children:[d.jsx(Ve,{path:"/pharmacy/profile/profileDetails",element:d.jsx(M7e,{})}),d.jsx(Ve,{path:"/pharmacy/profile/contactDetails",element:d.jsx(j7e,{})}),d.jsx(Ve,{path:"/pharmacy/profile/passwordReset",element:d.jsx(r4,{})})]}),d.jsxs(Ve,{path:"/pharmacy/order",element:d.jsx(YHe,{}),children:[d.jsx(Ve,{path:"/pharmacy/order/requested",element:d.jsx(e7e,{})}),d.jsx(Ve,{path:"/pharmacy/order/delivered",element:d.jsx(r7e,{})})]})]}),d.jsxs(Ve,{path:"/pharmacy/approval",element:d.jsx(eze,{}),children:[d.jsx(Ve,{path:"/pharmacy/approval/form",element:d.jsx(tze,{})}),d.jsx(Ve,{path:"/pharmacy/approval/submitted",element:d.jsx(rze,{})})]}),"//Doctor",d.jsxs(Ve,{path:"/doctor",element:d.jsx(iCe,{}),children:[d.jsx(Ve,{path:"/doctor/slot",element:d.jsx(uCe,{})}),d.jsx(Ve,{path:"/doctor/home",element:d.jsx(K7e,{})}),d.jsxs(Ve,{path:"/doctor/profile",element:d.jsx(iOe,{}),children:[d.jsx(Ve,{path:"/doctor/profile/details",element:d.jsx(uOe,{})}),d.jsx(Ve,{path:"/doctor/profile/contact",element:d.jsx(dOe,{})}),d.jsx(Ve,{path:"/doctor/profile/resetPassword",element:d.jsx(hOe,{})})]}),d.jsxs(Ve,{path:"/doctor/bookings",element:d.jsx(ZOe,{}),children:[d.jsx(Ve,{path:"/doctor/bookings/currentBookings",element:d.jsx(nke,{})}),d.jsx(Ve,{path:"/doctor/bookings/pastCompletedBookings",element:d.jsx(kHe,{})}),d.jsx(Ve,{path:"/doctor/bookings/prescription/:patientId/:bookingId",element:d.jsx(MHe,{})}),d.jsx(Ve,{path:"/doctor/bookings/medicine/:patientId/:bookingId",element:d.jsx(BHe,{})}),d.jsx(Ve,{path:"/doctor/bookings/labtest/:patientId/:bookingId",element:d.jsx(h7e,{})}),d.jsx(Ve,{path:"/doctor/bookings/labtest/testDetails/:patientId/:bookingId/:testId",element:d.jsx(u7e,{})}),d.jsx(Ve,{path:"/doctor/bookings/test/ordered",element:d.jsx(lze,{})}),d.jsx(Ve,{path:"/doctor/bookings/test/completed/details",element:d.jsx(cze,{})})]})]}),d.jsxs(Ve,{path:"/doctor/approval",element:d.jsx(X7e,{}),children:[d.jsx(Ve,{path:"/doctor/approval/form",element:d.jsx(J7e,{})}),d.jsx(Ve,{path:"/doctor/approval/submitted",element:d.jsx(Q7e,{})})]}),"//Laboratory",d.jsxs(Ve,{path:"/laboratory",element:d.jsx(SOe,{}),children:[d.jsx(Ve,{path:"/laboratory/home",element:d.jsx(q7e,{})}),d.jsxs(Ve,{path:"/laboratory/testServices",element:d.jsx(COe,{}),children:[d.jsx(Ve,{path:"/laboratory/testServices/addTest",element:d.jsx(UOe,{})}),d.jsx(Ve,{path:"/laboratory/testServices/viewTests",element:d.jsx(FOe,{})}),d.jsx(Ve,{path:"/laboratory/testServices/editTestDetails",element:d.jsx(BOe,{})})]}),d.jsxs(Ve,{path:"/laboratory/order",element:d.jsx(v7e,{}),children:[d.jsx(Ve,{path:"/laboratory/order/test/ordered",element:d.jsx(E7e,{})}),d.jsx(Ve,{path:"/laboratory/order/test/completed",element:d.jsx(w7e,{})}),d.jsx(Ve,{path:"/laboratory/order/test/completed/uploadResult",element:d.jsx(S7e,{})})]}),d.jsxs(Ve,{path:"/laboratory/profile",element:d.jsx(F7e,{}),children:[d.jsx(Ve,{path:"/laboratory/profile/profileDetails",element:d.jsx(V7e,{})}),d.jsx(Ve,{path:"/laboratory/profile/contactDetails",element:d.jsx(B7e,{})}),d.jsx(Ve,{path:"/laboratory/profile/passwordReset",element:d.jsx(r4,{})})]})]}),d.jsxs(Ve,{path:"/laboratory/approval",element:d.jsx(ize,{}),children:[d.jsx(Ve,{path:"/laboratory/approval/form",element:d.jsx(oze,{})}),d.jsx(Ve,{path:"/laboratory/approval/submitted",element:d.jsx(aze,{})})]}),"//Admin",d.jsx(Ve,{path:"/admin",element:d.jsx(G7e,{})})]})})})}const dze={patient_meetingAlert:!1},hze=Nm({name:"alert",initialState:dze,reducers:{setAlert(e,t){e.patient_meetingAlert=t.payload.patient_meetingAlert}}}),fze=hze.reducer,pze=Tye({reducer:{user:jye,patient:xwe,doctor:eCe,patient_alert:fze,pharmacy:fTe,laboratory:_Oe}});aW(document.getElementById("root")).render(d.jsx(T.StrictMode,{children:d.jsx(Yge,{store:pze,children:d.jsx(uze,{})})}))});export default mze();
